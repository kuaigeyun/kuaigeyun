# RiverEdge SaaS 框架启动指南

## 🚀 一键启动脚本

RiverEdge 提供了一键启动脚本 `start-all.sh`，能够自动处理端口冲突、进程清理和服务启动。

### 📋 端口分配策略

- **前端预留端口**: 8001-8010
- **后端预留端口**: 9001-9010
- **端口占用处理**: 优先清理占用进程，清理失败才使用下一个端口

### 🔧 使用方法

```bash
# 启动所有服务
./start-all.sh

# 停止所有服务
./start-all.sh stop

# 重启所有服务
./start-all.sh restart

# 查看服务状态
./start-all.sh status
```

### 📊 启动流程

1. **环境检查**: 验证项目结构、虚拟环境和必要命令
2. **服务清理**: 停止所有现有服务进程
3. **端口分配**: 自动查找可用端口，优先清理占用进程
4. **服务启动**: 依次启动后端和前端服务
5. **启动验证**: 确认服务成功启动并可访问

### 🎯 功能特性

- ✅ **自动端口管理**: 智能处理端口冲突
- ✅ **进程清理**: 优雅停止和清理进程
- ✅ **启动验证**: 确认服务成功启动
- ✅ **状态监控**: 实时查看服务状态
- ✅ **日志记录**: 完整的启动日志
- ✅ **错误处理**: 详细的错误信息和恢复建议

### 📝 日志文件

启动过程中会生成以下日志文件：
- `logs/backend.log`: 后端服务日志
- `logs/frontend.log`: 前端服务日志
- `logs/backend.pid`: 后端进程ID文件
- `logs/frontend.pid`: 前端进程ID文件

### 🔍 故障排除

#### 服务启动失败

1. 检查虚拟环境是否正确创建: `python -m venv venv311`
2. 检查依赖是否已安装: `pip install -r requirements.txt`
3. 查看详细日志: `tail -f backend.log` 或 `tail -f frontend.log`

#### 端口冲突

脚本会自动处理端口冲突，但如果遇到特殊情况：

```bash
# 查看端口占用
./start-all.sh status

# 手动清理端口 (例如端口8001)
lsof -ti:8001 | xargs kill -9
```

#### 权限问题

确保脚本有执行权限：
```bash
chmod +x start-all.sh
```

### ⚠️ 重要说明

- 严禁使用CMD或PowerShell运行脚本
- 必须在项目根目录运行
- 确保Git Bash环境正确配置
- 服务会在后台持续运行

### 🎉 成功启动示例

```
[2025-11-19 08:40:00] INFO: 🚀 RiverEdge SaaS 框架一键启动脚本
[2025-11-19 08:40:00] INFO: 查找可用端口 (前端:8001-8010, 后端:9001-9010)...
[2025-11-19 08:40:05] SUCCESS: 端口 9001 已释放
[2025-11-19 08:40:05] SUCCESS: 端口 8001 已释放
[2025-11-19 08:40:05] INFO: 端口分配完成 - 后端: 9001, 前端: 8001
[2025-11-19 08:40:05] INFO: 启动后端服务 (端口: 9001)...
[2025-11-19 08:40:20] SUCCESS: 后端服务启动成功 (http://localhost:9001)
[2025-11-19 08:40:20] INFO: 启动前端服务 (端口: 8001, 后端: 9001)...
[2025-11-19 08:40:35] SUCCESS: 前端服务启动成功 (http://localhost:8001)
[2025-11-19 08:40:35] SUCCESS: 🎉 所有服务启动成功！

📊 服务状态:
   后端 API:    http://localhost:9001
   后端文档:    http://localhost:9001/docs
   前端界面:    http://localhost:8001

📝 日志文件:
   后端日志:    logs/backend.log
   前端日志:    logs/frontend.log

📁 进程文件:
   后端PID:     logs/backend.pid
   前端PID:     logs/frontend.pid
```

现在可以访问上述地址开始开发！🎊
