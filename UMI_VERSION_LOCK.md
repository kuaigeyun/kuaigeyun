# UMI ç‰ˆæœ¬æ°¸ä¹…é”å®šç­–ç•¥

## ğŸ”’ é”å®šå£°æ˜

**UMI ç‰ˆæœ¬å·²è¢«æ°¸ä¹…é”å®šä¸º `@umijs/max@4.0.90`ï¼Œç¦æ­¢ä»»ä½•å½¢å¼çš„æ›´æ–°æˆ–æ›´æ”¹ã€‚**

## ğŸ“‹ é”å®šå†…å®¹

### 1. ç‰ˆæœ¬é”å®š
- **UMIç‰ˆæœ¬**: `@umijs/max@4.0.90` (æ°¸ä¹…é”å®š)
- **é…å¥—åŒ…**: `umi-request@^1.4.0`
- **é…ç½®æ–‡ä»¶**: ä½¿ç”¨ `defineConfig()` è¯­æ³•

### 2. æ–‡ä»¶é”å®š
- **é”å®šæ–‡ä»¶**: `riveredge-shell/npm-shrinkwrap.json`
- **Gitè·Ÿè¸ª**: å·²æ·»åŠ åˆ°ç‰ˆæœ¬æ§åˆ¶
- **æœ¬åœ°ç¼“å­˜**: å·²ç¼“å­˜åˆ°æœ¬åœ°npmç¼“å­˜

### 3. è¯­æ³•é”å®š
```typescript
// âœ… æ­£ç¡®è¯­æ³•
import { defineConfig } from '@umijs/max';
import request from 'umi-request';

// âŒ ç¦æ­¢è¯­æ³•
import { request } from '@umijs/max'; // é”™è¯¯
import { useModel } from '@umijs/max'; // é”™è¯¯
export default { ... }; // é”™è¯¯ï¼Œå¿…é¡»ä½¿ç”¨defineConfig
```

## ğŸš« ç¦æ­¢æ“ä½œ

### ç»å¯¹ç¦æ­¢
- âŒ `npm update @umijs/max`
- âŒ `npm install @umijs/max@latest`
- âŒ `npm install @umijs/max@^4.1.0`
- âŒ åˆ é™¤æˆ–ä¿®æ”¹ `npm-shrinkwrap.json`
- âŒ ä½¿ç”¨ç½‘ç»œé‡æ–°ä¸‹è½½UMIåŒ…

### è¯­æ³•ç¦æ­¢
- âŒ ä½¿ç”¨ `defineApp` (ä¸å­˜åœ¨)
- âŒ ç›´æ¥å¯¼å‡ºé…ç½®å¯¹è±¡
- âŒ ä» `@umijs/max` å¯¼å…¥ `request`
- âŒ ä½¿ç”¨ `useModel` (å·²ç§»é™¤)
- âŒ ä½¿ç”¨æœªéªŒè¯çš„UMI V4.0.90 API

## âœ… éªŒè¯æœºåˆ¶

### è‡ªåŠ¨éªŒè¯
è¿è¡ŒéªŒè¯è„šæœ¬ï¼š
```bash
cd riveredge-core/scripts
bash verify_umi_lock.sh
```

### æ‰‹åŠ¨éªŒè¯
æ£€æŸ¥ä»¥ä¸‹é¡¹ç›®ï¼š
- [ ] `package.json` ä¸­çš„ç‰ˆæœ¬ä¸º `"4.0.90"`
- [ ] `npm-shrinkwrap.json` å­˜åœ¨ä¸”è¢«gitè·Ÿè¸ª
- [ ] æœ¬åœ°npmç¼“å­˜åŒ…å« `@umijs/max@4.0.90`

## ğŸ”§ æ¢å¤æœºåˆ¶

å¦‚æœUMIç‰ˆæœ¬è¢«æ„å¤–æ›´æ”¹ï¼š

1. **ç«‹å³åœæ­¢**æ‰€æœ‰å¼€å‘å·¥ä½œ
2. **å›æ»š**åˆ°é”å®šç‰ˆæœ¬ï¼š
   ```bash
   npm install @umijs/max@4.0.90 --save-exact
   npm install --package-lock-only
   ```
3. **æ¢å¤**é”å®šæ–‡ä»¶ï¼š
   ```bash
   git checkout HEAD -- riveredge-shell/npm-shrinkwrap.json
   ```

## ğŸ“š å†å²æ•™è®­

- **2024-11-19**: ç»å†å¤šæ¬¡UMIç‰ˆæœ¬å…¼å®¹æ€§é—®é¢˜ï¼Œå¯¼è‡´å¤§é‡ä»£ç é‡æ„
- **è§£å†³æ–¹æ¡ˆ**: æ°¸ä¹…é”å®šç¨³å®šç‰ˆæœ¬ï¼Œæœç»ç‰ˆæœ¬æ›´æ–°é£é™©
- **ç›®æ ‡**: ç¡®ä¿å¼€å‘ä½“éªŒç¨³å®šï¼Œä¸å†å—UMIç‰ˆæœ¬å›°æ‰°

## ğŸ¯ æ‰¿è¯º

**ä»æ­¤åˆ»èµ·ï¼ŒUMIç‰ˆæœ¬å°†æ°¸ä¹…ä¿æŒä¸ºV4.0.90ï¼Œä¸å†è¿›è¡Œä»»ä½•æ›´æ–°ã€‚**

æ‰€æœ‰å¼€å‘å·¥ä½œéƒ½å°†åŸºäºè¿™ä¸ªé”å®šç‰ˆæœ¬è¿›è¡Œï¼Œç¡®ä¿ï¼š
- âœ… è¯­æ³•ç¨³å®š
- âœ… APIå…¼å®¹æ€§
- âœ… å¼€å‘æ•ˆç‡
- âœ… ç”Ÿäº§ç¨³å®šæ€§
