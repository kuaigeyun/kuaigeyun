# é¡¹ç›®æ¸…ç†è®¡åˆ’

## ğŸ“‹ æ¸…ç†æ¦‚è¿°

**ç›®æ ‡ï¼š** æ ¹æ®æœ€æ–°å¼€å‘è®¡åˆ’ï¼Œæ¸…ç†é¡¹ç›®ä¸­ä¸å†éœ€è¦çš„ä»£ç å’Œæ–‡ä»¶ï¼Œä½¿é¡¹ç›®æ¸…æ´ï¼Œæœ‰åˆ©äºæ–°å¼€å‘è®¡åˆ’æ¨è¿›  
**ä¾æ®ï¼š** 
- `è¯¦ç»†åŠŸèƒ½ç‚¹å¼€å‘æ¸…å•-ä¼˜åŒ–ç‰ˆ.md`
- `ç”¨æˆ·ä½¿ç”¨åœºæ™¯æ¨æ¼”-MTS-MTO.md`
- `ç³»ç»Ÿçº§åº”ç”¨çº§ååŒå¼€å‘è®¡åˆ’.md`

**æ–°è®¡åˆ’éœ€è¦çš„åº”ç”¨ï¼š**
- âœ… `master_data` - ä¸»æ•°æ®ç®¡ç†ï¼ˆå·²å­˜åœ¨ï¼‰
- âœ… `kuaizhizao` - å¿«æ™ºé€ ï¼ˆéœ€è¦åˆ›å»ºï¼‰

---

## 1. åº”ç”¨ç›®å½•æ¸…ç†

### 1.1 éœ€è¦ä¿ç•™çš„åº”ç”¨

- âœ… `master_data` - ä¸»æ•°æ®ç®¡ç†ï¼ˆæ–°è®¡åˆ’éœ€è¦ï¼‰

### 1.2 éœ€è¦æ¸…ç†çš„åº”ç”¨ç›®å½•ï¼ˆ22ä¸ªï¼‰

ä»¥ä¸‹åº”ç”¨ç›®å½•åœ¨æ–°è®¡åˆ’ä¸­ä¸å†éœ€è¦ï¼Œå»ºè®®æ¸…ç†ï¼š

1. `kuaaiot` - å¿«æ ¼IoT
2. `kuaiacc` - å¿«æ ¼ä¼šè®¡
3. `kuaiaps` - å¿«æ ¼APS
4. `kuaicert` - å¿«æ ¼è®¤è¯
5. `kuaicrm` - å¿«æ ¼CRMï¼ˆå·²å¤‡ä»½æ•°æ®è¡¨ï¼‰
6. `kuaieam` - å¿«æ ¼EAMï¼ˆå·²å¤‡ä»½æ•°æ®è¡¨ï¼‰
7. `kuaiehs` - å¿«æ ¼EHS
8. `kuaiems` - å¿«æ ¼EMS
9. `kuaiepm` - å¿«æ ¼EPM
10. `kuaihrm` - å¿«æ ¼HRM
11. `kuaiiot` - å¿«æ ¼IoTï¼ˆé‡å¤ï¼‰
12. `kuailims` - å¿«æ ¼LIMS
13. `kuaimes` - å¿«æ ¼MESï¼ˆå·²å¤‡ä»½æ•°æ®è¡¨ï¼Œæ–°è®¡åˆ’ç”¨kuaizhizaoæ›¿ä»£ï¼‰
14. `kuaimi` - å¿«æ ¼MI
15. `kuaimrp` - å¿«æ ¼MRPï¼ˆå·²å¤‡ä»½æ•°æ®è¡¨ï¼Œæ–°è®¡åˆ’ç”¨kuaizhizaoæ›¿ä»£ï¼‰
16. `kuaioa` - å¿«æ ¼OA
17. `kuaipdm` - å¿«æ ¼PDMï¼ˆå·²å¤‡ä»½æ•°æ®è¡¨ï¼‰
18. `kuaipm` - å¿«æ ¼PM
19. `kuaiqms` - å¿«æ ¼QMSï¼ˆå·²å¤‡ä»½æ•°æ®è¡¨ï¼‰
20. `kuaiscm` - å¿«æ ¼SCM
21. `kuaisrm` - å¿«æ ¼SRMï¼ˆå·²å¤‡ä»½æ•°æ®è¡¨ï¼‰
22. `kuaitms` - å¿«æ ¼TMS
23. `kuaiwms` - å¿«æ ¼WMSï¼ˆå·²å¤‡ä»½æ•°æ®è¡¨ï¼Œæ–°è®¡åˆ’ç”¨kuaizhizaoæ›¿ä»£ï¼‰

**æ¸…ç†æ–¹å¼ï¼š**
- âœ… **ç›´æ¥åˆ é™¤** - Archiveç›®å½•ä¸­å·²æœ‰å®Œæ•´å¤‡ä»½ï¼ˆ`archive/apps/backend/`ï¼‰
- âš ï¸ **éœ€è¦å¤„ç†1å¤„ä»£ç å¼•ç”¨**ï¼š`approval_instance_service.py` line 717 å¼•ç”¨äº† `apps.kuaicrm.models.sales_order`

**æ¸…ç†å¯è¡Œæ€§è¯„ä¼°ï¼š**
- âœ… Archiveä¸­å·²æœ‰22ä¸ªåº”ç”¨çš„å®Œæ•´å¤‡ä»½
- âœ… åº”ç”¨æ³¨å†ŒæœåŠ¡æ˜¯åŠ¨æ€çš„ï¼Œä¸ä¾èµ–è¿™äº›ç›®å½•
- âš ï¸ åªæœ‰1å¤„ä»£ç å¼•ç”¨éœ€è¦å¤„ç†ï¼ˆåœ¨try-exceptå—ä¸­ï¼Œå¯é€‰åŠŸèƒ½ï¼‰
- âœ… æ•°æ®åº“é…ç½®ä¸­éƒ½æ˜¯æ³¨é‡Šä»£ç ï¼Œå¯å®‰å…¨æ¸…ç†

**æ¸…ç†å»ºè®®ï¼š**
- ç›´æ¥åˆ é™¤22ä¸ªåº”ç”¨ç›®å½•
- å¤„ç† `approval_instance_service.py` ä¸­çš„å¼•ç”¨ï¼ˆåˆ é™¤æˆ–æ³¨é‡Šæ‰ç›¸å…³ä»£ç ï¼‰

---

## 2. Inngestå‡½æ•°æ¸…ç†

### 2.1 éœ€è¦æ¸…ç†çš„å‡½æ•°ï¼ˆ2ä¸ªï¼‰

1. **`data_backup_executor_function`** - æ•°æ®å¤‡ä»½æ‰§è¡Œ
   - æ–‡ä»¶ï¼š`riveredge-backend/src/core/inngest/functions/data_backup_executor.py`
   - åŸå› ï¼šæ–°è®¡åˆ’ä¸­ä¸éœ€è¦æ•°æ®å¤‡ä»½åŠŸèƒ½

2. **`scheduled_backup_scheduler_function`** - æ•°æ®å¤‡ä»½è°ƒåº¦å™¨
   - æ–‡ä»¶ï¼š`riveredge-backend/src/core/inngest/functions/data_backup_executor.py`ï¼ˆåŒä¸€æ–‡ä»¶ï¼‰
   - åŸå› ï¼šæ–°è®¡åˆ’ä¸­ä¸éœ€è¦æ•°æ®å¤‡ä»½åŠŸèƒ½

### 2.2 éœ€è¦ä¿ç•™çš„å‡½æ•°ï¼ˆ8ä¸ªï¼‰

1. âœ… `test_integration_function` - æµ‹è¯•é›†æˆå‡½æ•°ï¼ˆå¼€å‘æµ‹è¯•ç”¨ï¼‰
2. âœ… `message_sender_function` - æ¶ˆæ¯å‘é€å·¥ä½œæµï¼ˆç³»ç»Ÿçº§æ ¸å¿ƒåŠŸèƒ½ï¼‰
3. âœ… `scheduled_task_executor_function` - å®šæ—¶ä»»åŠ¡æ‰§è¡Œï¼ˆç³»ç»Ÿçº§åŠŸèƒ½ï¼‰
4. âœ… `scheduled_task_scheduler_function` - å®šæ—¶ä»»åŠ¡è°ƒåº¦å™¨ï¼ˆç³»ç»Ÿçº§åŠŸèƒ½ï¼‰
5. âœ… `approval_workflow_function` - å®¡æ‰¹æµç¨‹å·¥ä½œæµï¼ˆç³»ç»Ÿçº§æ ¸å¿ƒåŠŸèƒ½ï¼‰
6. âœ… `approval_action_workflow_function` - å®¡æ‰¹åŠ¨ä½œå·¥ä½œæµï¼ˆç³»ç»Ÿçº§æ ¸å¿ƒåŠŸèƒ½ï¼‰
7. âœ… `sop_execution_workflow_function` - SOPæ‰§è¡Œæµç¨‹å·¥ä½œæµï¼ˆmaster_dataåº”ç”¨åŠŸèƒ½ï¼‰
8. âœ… `sop_node_complete_workflow_function` - SOPèŠ‚ç‚¹å®Œæˆå·¥ä½œæµï¼ˆmaster_dataåº”ç”¨åŠŸèƒ½ï¼‰

### 2.3 æ¸…ç†æ­¥éª¤

1. åˆ é™¤æ–‡ä»¶ï¼š`riveredge-backend/src/core/inngest/functions/data_backup_executor.py`
2. æ›´æ–° `riveredge-backend/src/core/inngest/functions/__init__.py`ï¼Œç§»é™¤ç›¸å…³å¯¼å…¥
3. æ›´æ–° `riveredge-backend/src/server/main.py`ï¼Œç§»é™¤ç›¸å…³å‡½æ•°æ³¨å†Œ
4. æ£€æŸ¥æ˜¯å¦æœ‰æ•°æ®åº“è¡¨éœ€è¦æ¸…ç†ï¼ˆ`DataBackup` æ¨¡å‹ï¼‰

---

## 3. æ•°æ®åº“é…ç½®æ¸…ç†

### 3.1 éœ€è¦æ¸…ç†çš„æ¨¡å‹å¼•ç”¨

**æ–‡ä»¶ï¼š** `riveredge-backend/src/infra/infrastructure/database/database.py`

**å·²æ³¨é‡Šçš„æ¨¡å‹å¼•ç”¨ï¼ˆéœ€è¦ç¡®è®¤æ˜¯å¦å®Œå…¨æ¸…ç†ï¼‰ï¼š**
- `apps.kuaimes.models.order` - å¿«æ ¼è½»MESè®¢å•æ¨¡å‹ï¼ˆå·²åœç”¨ï¼‰
- `apps.kuaicrm.models.*` - CRMç›¸å…³æ¨¡å‹ï¼ˆå·²åœç”¨ï¼‰
- `apps.kuaipdm.models.*` - PDMç›¸å…³æ¨¡å‹ï¼ˆå·²åœç”¨ï¼‰
- `apps.kuaimrp.models.*` - MRPç›¸å…³æ¨¡å‹ï¼ˆå·²åœç”¨ï¼‰
- `apps.kuaisrm.models.*` - SRMç›¸å…³æ¨¡å‹ï¼ˆå·²åœç”¨ï¼‰
- `apps.kuaiwms.models.*` - WMSç›¸å…³æ¨¡å‹ï¼ˆå·²åœç”¨ï¼‰

**æ¸…ç†æ–¹å¼ï¼š**
- ç¡®è®¤è¿™äº›æ³¨é‡Šçš„æ¨¡å‹å¼•ç”¨å¯ä»¥å®Œå…¨åˆ é™¤
- æ¸…ç†æ³¨é‡Šä»£ç ï¼Œä¿æŒä»£ç æ•´æ´

---

## 4. æ•°æ®åº“è¡¨æ¸…ç†

### 4.1 å·²å¤‡ä»½çš„æ•°æ®è¡¨

æ ¹æ® `riveredge-backend/scripts/README_disabled_app_backup.md`ï¼Œä»¥ä¸‹åº”ç”¨çš„æ•°æ®è¡¨å·²å¤‡ä»½ï¼š

- **kuaicrm** - 10ä¸ªè¡¨ï¼ˆå·²å¤‡ä»½ä¸º `apps_kuaicrm_*_backup_disabled`ï¼‰
- **kuaieam** - 9ä¸ªè¡¨ï¼ˆå·²å¤‡ä»½ä¸º `apps_kuaieam_*_backup_disabled`ï¼‰
- **kuaimes** - 5ä¸ªè¡¨ï¼ˆå·²å¤‡ä»½ä¸º `apps_kuaimes_*_backup_disabled`ï¼‰
- **kuaimrp** - 5ä¸ªè¡¨ï¼ˆå·²å¤‡ä»½ä¸º `apps_kuaimrp_*_backup_disabled`ï¼‰
- **kuaipdm** - 5ä¸ªè¡¨ï¼ˆå·²å¤‡ä»½ä¸º `apps_kuaipdm_*_backup_disabled`ï¼‰
- **kuaiqms** - 9ä¸ªè¡¨ï¼ˆå·²å¤‡ä»½ä¸º `apps_kuaiqms_*_backup_disabled`ï¼‰
- **kuaisrm** - 4ä¸ªè¡¨ï¼ˆå·²å¤‡ä»½ä¸º `apps_kuaisrm_*_backup_disabled`ï¼‰
- **kuaiwms** - 6ä¸ªè¡¨ï¼ˆå·²å¤‡ä»½ä¸º `apps_kuaiwms_*_backup_disabled`ï¼‰

**æ€»è®¡ï¼š** 53ä¸ªæ•°æ®è¡¨å·²å¤‡ä»½

**æ¸…ç†å»ºè®®ï¼š**
- å¤‡ä»½è¡¨å¯ä»¥ä¿ç•™ï¼ˆä»¥é˜²ä¸‡ä¸€ï¼‰
- å¦‚æœç¡®è®¤ä¸å†éœ€è¦ï¼Œå¯ä»¥åˆ é™¤å¤‡ä»½è¡¨ï¼ˆè°¨æ…æ“ä½œï¼‰

---

## 5. æ•°æ®å¤‡ä»½ç›¸å…³ä»£ç æ¸…ç†

### 5.1 éœ€è¦æ¸…ç†çš„æ•°æ®å¤‡ä»½ç›¸å…³ä»£ç 

æ ¹æ®æ£€æŸ¥ï¼Œæ•°æ®å¤‡ä»½åŠŸèƒ½åŒ…å«ä»¥ä¸‹æ¨¡å—ï¼Œéƒ½éœ€è¦æ¸…ç†ï¼š

1. **æ•°æ®å¤‡ä»½Inngestå‡½æ•°**
   - `riveredge-backend/src/core/inngest/functions/data_backup_executor.py`
   - åŒ…å«ï¼š`data_backup_executor_function`ã€`scheduled_backup_scheduler_function`

2. **æ•°æ®å¤‡ä»½æ¨¡å‹**
   - `riveredge-backend/src/core/models/data_backup.py`
   - æ¨¡å‹ï¼š`DataBackup`

3. **æ•°æ®å¤‡ä»½æœåŠ¡**
   - `riveredge-backend/src/core/services/data/data_backup_service.py`
   - æœåŠ¡ï¼š`DataBackupService`

4. **æ•°æ®å¤‡ä»½APIè·¯ç”±**
   - `riveredge-backend/src/core/api/data_backups/data_backups.py`
   - è·¯ç”±ï¼š`data_backups_router`
   - æ³¨å†Œä½ç½®ï¼š`riveredge-backend/src/server/main.py` (line 378)

5. **æ•°æ®å¤‡ä»½Schemas**
   - `riveredge-backend/src/core/schemas/data_backup.py`
   - Schemasï¼š`DataBackupCreate`ã€`DataBackupUpdate`ã€`DataBackupResponse`
   - å¯¼å…¥ä½ç½®ï¼š`riveredge-backend/src/core/schemas/__init__.py`

6. **æ•°æ®åº“æ¨¡å‹æ³¨å†Œ**
   - `riveredge-backend/src/infra/infrastructure/database/dynamic_config_service.py` (line 82)
   - `riveredge-backend/src/infra/infrastructure/database/database.py` (line 150)

**æ¸…ç†æ–¹å¼ï¼š**
- å¦‚æœç¡®è®¤ä¸éœ€è¦æ•°æ®å¤‡ä»½åŠŸèƒ½ï¼Œåˆ é™¤æ‰€æœ‰ç›¸å…³ä»£ç 
- å¦‚æœæœªæ¥å¯èƒ½éœ€è¦ï¼Œå¯ä»¥ä¿ç•™ä»£ç ä½†æ³¨é‡Šæ‰Inngestå‡½æ•°æ³¨å†Œå’ŒAPIè·¯ç”±æ³¨å†Œ

---

## 6. è°ƒè¯•ä»£ç æ¸…ç†

### 6.1 åç«¯Pythonè°ƒè¯•ä»£ç 

#### 6.1.1 printè¯­å¥æ¸…ç†

**æ–‡ä»¶ï¼š** `riveredge-backend/src/server/main.py`

**éœ€è¦æ¸…ç†çš„printè¯­å¥ï¼š**
- Line 100: `print("âœ… Tortoise ORM å·²æ³¨å†Œ")`
- Line 104: `print("âœ… ç³»ç»Ÿçº§æœåŠ¡æ¥å£å±‚å·²åˆå§‹åŒ–")`
- Line 109: `print("âœ… å¹³å°çº§æœåŠ¡æ¥å£å±‚å·²åˆå§‹åŒ–")`
- Line 113: `print("âœ… åº”ç”¨è·¯ç”±ç®¡ç†å™¨å·²åˆå§‹åŒ–")`
- Line 117: `print("âœ… åº”ç”¨æ³¨å†ŒæœåŠ¡å·²é‡æ–°åˆå§‹åŒ–")`
- Line 124: `print("âœ… åº”ç”¨å…³é—­ä¸­...")`
- Line 175: `print(f"âœ… é€šè¿‡è·¯ç”±ç®¡ç†å™¨æ³¨å†Œåº”ç”¨ {app_code} çš„è·¯ç”±")`
- Line 181: `print(f"âœ… å·²æ³¨å†Œåº”ç”¨ {app_code} çš„è·¯ç”±ï¼ˆå…¼å®¹æ¨¡å¼ï¼‰")`
- Line 184: `print(f"ğŸ‰ åº”ç”¨è·¯ç”±æ³¨å†Œå®Œæˆï¼Œå…±æ³¨å†Œ {total_routes} ä¸ªè·¯ç”±å¯¹è±¡")`
- Line 187: `print(f"âš ï¸ åº”ç”¨è·¯ç”±æ³¨å†Œå¤±è´¥: {str(e)}")`
- Line 238: `print("âœ… Inngest æœåŠ¡ç«¯ç‚¹æ³¨å†ŒæˆåŠŸ")`
- Line 239-250: `print(f"âœ… å·²æ³¨å†Œ {len([...])} ä¸ª Inngest å‡½æ•°")`
- Line 252: `print(f"âŒ Inngest æœåŠ¡ç«¯ç‚¹æ³¨å†Œå¤±è´¥: {e}")`

**æ¸…ç†æ–¹å¼ï¼š**
- ä½¿ç”¨ `logger.info()` æ›¿ä»£ `print()`ï¼ˆå¯åŠ¨å…³é”®ä¿¡æ¯ï¼‰
- ä½¿ç”¨ `logger.error()` æ›¿ä»£ `print()`ï¼ˆé”™è¯¯ä¿¡æ¯ï¼‰
- åˆ é™¤ä¸å¿…è¦çš„è°ƒè¯•printè¯­å¥

**æ–‡ä»¶ï¼š** `riveredge-backend/src/core/services/application/application_service.py`

**éœ€è¦æ¸…ç†çš„printè¯­å¥ï¼š**
- Line 618: `print(f"è­¦å‘Š: æ— æ³•è¯»å–æ’ä»¶ {plugin_dir.name} çš„ manifest.json: {e}")`
- Line 638: `print(f"æ‰«æåˆ° {len(plugins)} ä¸ªæ’ä»¶æ¸…å•")`
- Line 639: `print(f"æ’ä»¶æ¸…å•å†…å®¹: {plugins}")` âš ï¸ **è°ƒè¯•ä¿¡æ¯ï¼Œå»ºè®®åˆ é™¤**
- Line 643: `print(f"å¤„ç†æ’ä»¶: {manifest.get('name', 'unknown')} (code: {manifest.get('code', 'unknown')})")`
- Line 648: `print(f"è­¦å‘Š: æ’ä»¶ {manifest.get('name', 'unknown')} ç¼ºå°‘ code å­—æ®µï¼Œè·³è¿‡æ³¨å†Œ")`
- Line 743: `print(f"é”™è¯¯: æ³¨å†Œæ’ä»¶ {manifest.get('name', 'unknown')} å¤±è´¥: {e}")`
- Line 747: `print(f"ç»§ç»­å¤„ç†ä¸‹ä¸€ä¸ªæ’ä»¶...")` âš ï¸ **è°ƒè¯•ä¿¡æ¯ï¼Œå»ºè®®åˆ é™¤**
- Line 756: `print(f"âš ï¸ æ¸…é™¤èœå•ç¼“å­˜å¤±è´¥ï¼ˆä¸å½±å“åº”ç”¨æ³¨å†Œï¼‰: {e}")`

**æ¸…ç†æ–¹å¼ï¼š**
- ä½¿ç”¨ `logger.warning()` æ›¿ä»£ `print()`ï¼ˆè­¦å‘Šä¿¡æ¯ï¼‰
- ä½¿ç”¨ `logger.error()` æ›¿ä»£ `print()`ï¼ˆé”™è¯¯ä¿¡æ¯ï¼‰
- åˆ é™¤è°ƒè¯•printè¯­å¥ï¼ˆå¦‚æ’ä»¶æ¸…å•å†…å®¹ã€ç»§ç»­å¤„ç†ç­‰ï¼‰

**æ–‡ä»¶ï¼š** `riveredge-backend/src/core/api/applications/applications.py`

**éœ€è¦æ¸…ç†çš„printè¯­å¥ï¼š**
- Line 127: `print(f"å¤„ç†åº”ç”¨ {app.get('code', 'unknown')} æ—¶å‡ºé”™: {e}")`
- Line 189: `print(f"å¤„ç†åº”ç”¨ {app.get('code', 'unknown')} æ—¶å‡ºé”™: {e}")`
- Line 452: `print(f"å¤„ç†åº”ç”¨ {app.get('code', 'unknown')} æ—¶å‡ºé”™: {e}")`

**æ¸…ç†æ–¹å¼ï¼š**
- ä½¿ç”¨ `logger.error()` æ›¿ä»£ `print()`

#### 6.1.2 æ³¨é‡Šæ‰çš„ä»£ç æ¸…ç†

**æ–‡ä»¶ï¼š** `riveredge-backend/src/infra/infrastructure/database/database.py`

**éœ€è¦æ¸…ç†çš„æ³¨é‡Šä»£ç ï¼š**
- Line 154-199: å¤§é‡æ³¨é‡Šæ‰çš„æ—§åº”ç”¨æ¨¡å‹å¼•ç”¨ï¼ˆkuaimes, kuaicrm, kuaipdm, kuaimrp, kuaisrm, kuaiwmsç­‰ï¼‰

**æ¸…ç†æ–¹å¼ï¼š**
- åˆ é™¤æ‰€æœ‰æ³¨é‡Šæ‰çš„æ—§åº”ç”¨æ¨¡å‹å¼•ç”¨
- ä¿æŒä»£ç æ•´æ´

**æ–‡ä»¶ï¼š** `riveredge-backend/src/infra/services/auth_service.py`

**éœ€è¦æ¸…ç†çš„æ³¨é‡Šä»£ç ï¼š**
- Line 341: `# TODO: å®ç°é‚€è¯·ç éªŒè¯é€»è¾‘` âš ï¸ **é‚€è¯·ç åŠŸèƒ½å·²åˆ é™¤ï¼Œåº”åˆ é™¤æ­¤TODO**

**æ¸…ç†æ–¹å¼ï¼š**
- åˆ é™¤å·²åˆ é™¤åŠŸèƒ½çš„TODOæ³¨é‡Š

### 6.2 å‰ç«¯TypeScriptè°ƒè¯•ä»£ç 

#### 6.2.1 console.logæ¸…ç†

**æ–‡ä»¶ï¼š** `riveredge-frontend/src/utils/pluginLoader.ts`

**éœ€è¦æ¸…ç†çš„console.logï¼š**
- Line 129: `console.log(\`ğŸ” [æ’ä»¶åŠ è½½] ${pluginCode} - æºè·¯å¾„: ${sourcePath}\`)` âš ï¸ **è°ƒè¯•ä¿¡æ¯**
- Line 137: `console.log(\`ğŸ”„ [æ’ä»¶åŠ è½½] ${pluginCode} - å°è¯•å¯¼å…¥: ${sourcePath}\`)` âš ï¸ **è°ƒè¯•ä¿¡æ¯**
- Line 142: `console.log(\`âœ… [æ’ä»¶åŠ è½½] ${pluginCode} - å¯¼å…¥æˆåŠŸ\`)` âš ï¸ **è°ƒè¯•ä¿¡æ¯**
- Line 171: `console.log(\`âœ… [æ’ä»¶åŠ è½½] ${pluginCode} - æ‰¾åˆ°è·¯ç”±ç»„ä»¶:\`, PluginRoutes)` âš ï¸ **è°ƒè¯•ä¿¡æ¯**

**æ¸…ç†æ–¹å¼ï¼š**
- åˆ é™¤æ‰€æœ‰è°ƒè¯•console.log
- å¦‚éœ€ä¿ç•™å…³é”®ä¿¡æ¯ï¼Œä½¿ç”¨ `logger.debug()`ï¼ˆå¦‚æœé¡¹ç›®æœ‰æ—¥å¿—ç³»ç»Ÿï¼‰

**æ–‡ä»¶ï¼š** `riveredge-frontend/src/routes/AppRoutes.tsx`

**éœ€è¦æ¸…ç†çš„console.logï¼š**
- Line 76: `console.log('ğŸ”„ å¼€å§‹åŠ è½½ä¸šåŠ¡åº”ç”¨...')` âš ï¸ **è°ƒè¯•ä¿¡æ¯**
- Line 81: `console.log(\`ğŸ“¦ å‘ç° ${applications.length} ä¸ªå·²å®‰è£…åº”ç”¨:\`, ...)` âš ï¸ **è°ƒè¯•ä¿¡æ¯**
- Line 97: `console.log(\`ğŸ”„ æ­£åœ¨åŠ è½½åº”ç”¨: ${app.code}\`, {...})` âš ï¸ **è°ƒè¯•ä¿¡æ¯**
- Line 104: `console.log(\`âœ… åº”ç”¨ ${app.code} åŠ è½½æˆåŠŸ:\`, pluginRouteConfigs)` âš ï¸ **è°ƒè¯•ä¿¡æ¯**
- Line 134: `console.log(\`ğŸ‰ åº”ç”¨åŠ è½½å®Œæˆï¼Œå…±åŠ è½½ ${routes.length} ä¸ªè·¯ç”±\`)` âš ï¸ **è°ƒè¯•ä¿¡æ¯**

**æ¸…ç†æ–¹å¼ï¼š**
- åˆ é™¤æ‰€æœ‰è°ƒè¯•console.log
- å¦‚éœ€ä¿ç•™å…³é”®ä¿¡æ¯ï¼Œä½¿ç”¨ `logger.debug()`

**æ–‡ä»¶ï¼š** `riveredge-frontend/src/services/api.ts`

**éœ€è¦æ¸…ç†çš„console.logï¼š**
- Line 273-295: æ–‡ä»¶ä¸Šä¼ è¯·æ±‚çš„è¯¦ç»†è°ƒè¯•æ—¥å¿— âš ï¸ **è°ƒè¯•ä¿¡æ¯ï¼Œå»ºè®®åˆ é™¤æˆ–æ”¹ä¸ºlogger.debug()**

**æ¸…ç†æ–¹å¼ï¼š**
- åˆ é™¤è¯¦ç»†çš„è°ƒè¯•æ—¥å¿—
- å¦‚éœ€ä¿ç•™ï¼Œä½¿ç”¨ `logger.debug()` å¹¶æ·»åŠ æ¡ä»¶åˆ¤æ–­ï¼ˆä»…åœ¨å¼€å‘ç¯å¢ƒè¾“å‡ºï¼‰

**æ–‡ä»¶ï¼š** `riveredge-frontend/src/pages/login/index.tsx`

**éœ€è¦æ¸…ç†çš„console.logï¼š**
- Line 224: `console.log('éªŒè¯ç ä¸ºç©ºï¼Œè·³è¿‡éªŒè¯')` âš ï¸ **è°ƒè¯•ä¿¡æ¯**
- Line 226: `console.log('éªŒè¯ç è¾“å…¥:', values.phone_verification_code)` âš ï¸ **è°ƒè¯•ä¿¡æ¯ï¼Œå¯èƒ½æ³„éœ²æ•æ„Ÿä¿¡æ¯**
- Line 738: `console.log('ç™»å½•å¤±è´¥æ¬¡æ•°:', recentFailTimes.length, 'éœ€è¦éªŒè¯:', needVerify)` âš ï¸ **è°ƒè¯•ä¿¡æ¯**

**æ¸…ç†æ–¹å¼ï¼š**
- åˆ é™¤æ‰€æœ‰è°ƒè¯•console.log
- **ç‰¹åˆ«æ³¨æ„ï¼š** åˆ é™¤å¯èƒ½æ³„éœ²æ•æ„Ÿä¿¡æ¯çš„æ—¥å¿—ï¼ˆå¦‚éªŒè¯ç è¾“å…¥ï¼‰

**æ–‡ä»¶ï¼š** `riveredge-frontend/src/main.tsx`

**éœ€è¦æ¸…ç†çš„console.logï¼š**
- Line 85: `console.log('[React Query]', ...args)` âš ï¸ **è°ƒè¯•ä¿¡æ¯**

**æ¸…ç†æ–¹å¼ï¼š**
- åˆ é™¤æˆ–æ”¹ä¸ºæ¡ä»¶è¾“å‡ºï¼ˆä»…åœ¨å¼€å‘ç¯å¢ƒï¼‰

#### 6.2.2 è°ƒè¯•å‡½æ•°æ¸…ç†

**æ–‡ä»¶ï¼š** `riveredge-frontend/src/components/theme-editor/index.tsx`

**éœ€è¦æ¸…ç†çš„è°ƒè¯•å‡½æ•°ï¼š**
- Line 16-36: `window.debugThemeConfig` è°ƒè¯•å‡½æ•° âš ï¸ **è°ƒè¯•å‡½æ•°ï¼Œå»ºè®®åˆ é™¤**

**æ¸…ç†æ–¹å¼ï¼š**
- åˆ é™¤æ•´ä¸ªè°ƒè¯•å‡½æ•°

#### 6.2.3 console.debug/console.warnæ¸…ç†

**æ–‡ä»¶ï¼š** `riveredge-frontend/src/components/safe-pro-form-select/index.tsx`

**éœ€è¦æ¸…ç†çš„è°ƒè¯•æ—¥å¿—ï¼š**
- Line 24: `console.debug(...)` âš ï¸ **è°ƒè¯•ä¿¡æ¯**
- Line 34-38: `console.warn(...)` âš ï¸ **è­¦å‘Šä¿¡æ¯ï¼Œå¯èƒ½éœ€è¦ä¿ç•™**
- Line 47: `console.warn(...)` âš ï¸ **è­¦å‘Šä¿¡æ¯ï¼Œå¯èƒ½éœ€è¦ä¿ç•™**

**æ¸…ç†æ–¹å¼ï¼š**
- `console.debug()` åˆ é™¤æˆ–æ”¹ä¸ºæ¡ä»¶è¾“å‡º
- `console.warn()` è¯„ä¼°æ˜¯å¦éœ€è¦ä¿ç•™ï¼ˆå¦‚æœæ˜¯é‡è¦çš„è­¦å‘Šä¿¡æ¯ï¼Œå¯ä»¥ä¿ç•™ï¼‰

### 6.3 è°ƒè¯•ä»£ç æ¸…ç†åŸåˆ™

1. **ä¿ç•™çš„æ—¥å¿—ï¼š**
   - âœ… å…³é”®é”™è¯¯æ—¥å¿—ï¼ˆä½¿ç”¨logger.errorï¼‰
   - âœ… é‡è¦è­¦å‘Šæ—¥å¿—ï¼ˆä½¿ç”¨logger.warningï¼‰
   - âœ… å…³é”®ä¸šåŠ¡æ—¥å¿—ï¼ˆä½¿ç”¨logger.infoï¼‰

2. **åˆ é™¤çš„æ—¥å¿—ï¼š**
   - âŒ è¯¦ç»†çš„è°ƒè¯•ä¿¡æ¯ï¼ˆconsole.logè¯¦ç»†è¾“å‡ºï¼‰
   - âŒ ä¸´æ—¶è°ƒè¯•ä»£ç ï¼ˆprint/console.logè°ƒè¯•è¯­å¥ï¼‰
   - âŒ å¯èƒ½æ³„éœ²æ•æ„Ÿä¿¡æ¯çš„æ—¥å¿—ï¼ˆå¦‚éªŒè¯ç ã€å¯†ç ç­‰ï¼‰

3. **æ›¿æ¢æ–¹å¼ï¼š**
   - `print()` â†’ `logger.info()` / `logger.error()` / `logger.warning()`
   - `console.log()` â†’ åˆ é™¤æˆ– `logger.debug()`ï¼ˆæ¡ä»¶è¾“å‡ºï¼‰
   - `console.debug()` â†’ åˆ é™¤æˆ–æ¡ä»¶è¾“å‡ºï¼ˆä»…åœ¨å¼€å‘ç¯å¢ƒï¼‰

### 6.4 æ¸…ç†æ­¥éª¤

1. **åç«¯æ¸…ç†ï¼š**
   - æ›¿æ¢æ‰€æœ‰ `print()` ä¸º `logger` è°ƒç”¨
   - åˆ é™¤è°ƒè¯•printè¯­å¥
   - æ¸…ç†æ³¨é‡Šæ‰çš„ä»£ç 

2. **å‰ç«¯æ¸…ç†ï¼š**
   - åˆ é™¤æ‰€æœ‰è°ƒè¯• `console.log()`
   - åˆ é™¤è°ƒè¯•å‡½æ•°
   - è¯„ä¼° `console.warn()` æ˜¯å¦éœ€è¦ä¿ç•™

3. **éªŒè¯ï¼š**
   - å¯åŠ¨æœåŠ¡ï¼Œç¡®è®¤æ²¡æœ‰è°ƒè¯•è¾“å‡º
   - æ£€æŸ¥æ—¥å¿—æ–‡ä»¶ï¼Œç¡®è®¤å…³é”®ä¿¡æ¯æ­£å¸¸è®°å½•
   - æµ‹è¯•åŠŸèƒ½ï¼Œç¡®è®¤æ²¡æœ‰é—æ¼é‡è¦æ—¥å¿—

---

## 7. Archiveç›®å½•æ•´ç†

### 7.1 Archiveç›®å½•ç°çŠ¶

æ ¹æ®æ£€æŸ¥ï¼Œ`archive/apps/backend/` ç›®å½•ä¸‹å·²æœ‰æ—§åº”ç”¨çš„manifest.jsonæ–‡ä»¶ã€‚

**å»ºè®®ï¼š**
- å°†æ¸…ç†çš„åº”ç”¨ç›®å½•ç§»åŠ¨åˆ° `archive/apps/backend/` ç›®å½•
- ä¿æŒarchiveç›®å½•ç»“æ„æ¸…æ™°
- åœ¨archiveç›®å½•ä¸­æ·»åŠ READMEè¯´æ˜

---

## 7. æ¸…ç†æ‰§è¡Œè®¡åˆ’

### 7.1 æ¸…ç†ä¼˜å…ˆçº§

**ä¼˜å…ˆçº§1ï¼ˆç«‹å³æ¸…ç†ï¼‰ï¼š**
1. âœ… æ¸…ç†Inngestæ•°æ®å¤‡ä»½å‡½æ•°ï¼ˆ2ä¸ªå‡½æ•°ï¼‰
2. âœ… æ¸…ç†æ•°æ®åº“é…ç½®ä¸­çš„æ³¨é‡Šä»£ç 
3. âœ… æ¸…ç†è°ƒè¯•ä»£ç ï¼ˆprint/console.logï¼‰

**ä¼˜å…ˆçº§2ï¼ˆç¡®è®¤åæ¸…ç†ï¼‰ï¼š**
1. âš ï¸ æ¸…ç†æ—§åº”ç”¨ç›®å½•ï¼ˆ22ä¸ªåº”ç”¨ï¼‰
2. âš ï¸ æ¸…ç†æ•°æ®å¤‡ä»½ç›¸å…³ä»£ç ï¼ˆæ¨¡å‹ã€æœåŠ¡ã€APIï¼‰

**ä¼˜å…ˆçº§3ï¼ˆå¯é€‰æ¸…ç†ï¼‰ï¼š**
1. âš ï¸ æ¸…ç†å·²å¤‡ä»½çš„æ•°æ®åº“è¡¨ï¼ˆ53ä¸ªè¡¨ï¼‰
2. âš ï¸ æ•´ç†archiveç›®å½•

### 7.2 æ¸…ç†æ­¥éª¤

#### æ­¥éª¤1ï¼šå¤‡ä»½å½“å‰ä»£ç 

```bash
# åˆ›å»ºå¤‡ä»½åˆ†æ”¯
git checkout -b backup/project-cleanup-$(date +%Y%m%d)
git add .
git commit -m "å¤‡ä»½ï¼šé¡¹ç›®æ¸…ç†å‰çš„çŠ¶æ€"
git checkout main
```

#### æ­¥éª¤2ï¼šæ¸…ç†Inngestå‡½æ•°

1. åˆ é™¤ `riveredge-backend/src/core/inngest/functions/data_backup_executor.py`
2. æ›´æ–° `riveredge-backend/src/core/inngest/functions/__init__.py`
3. æ›´æ–° `riveredge-backend/src/server/main.py`
4. éªŒè¯æœåŠ¡å¯åŠ¨æ­£å¸¸

#### æ­¥éª¤3ï¼šæ¸…ç†æ•°æ®åº“é…ç½®

1. æ¸…ç† `riveredge-backend/src/infra/infrastructure/database/database.py` ä¸­çš„æ³¨é‡Šä»£ç 
2. éªŒè¯æ•°æ®åº“è¿æ¥æ­£å¸¸

#### æ­¥éª¤4ï¼šæ¸…ç†è°ƒè¯•ä»£ç 

**åç«¯æ¸…ç†ï¼š**
1. æ›¿æ¢ `server/main.py` ä¸­çš„printè¯­å¥ä¸ºloggerè°ƒç”¨
2. æ›¿æ¢ `application_service.py` ä¸­çš„printè¯­å¥ä¸ºloggerè°ƒç”¨
3. æ›¿æ¢ `applications.py` ä¸­çš„printè¯­å¥ä¸ºloggerè°ƒç”¨
4. åˆ é™¤ `database.py` ä¸­çš„æ³¨é‡Šä»£ç 
5. åˆ é™¤ `auth_service.py` ä¸­çš„TODOæ³¨é‡Š

**å‰ç«¯æ¸…ç†ï¼š**
1. åˆ é™¤ `pluginLoader.ts` ä¸­çš„æ‰€æœ‰console.log
2. åˆ é™¤ `AppRoutes.tsx` ä¸­çš„æ‰€æœ‰console.log
3. åˆ é™¤ `api.ts` ä¸­çš„è¯¦ç»†è°ƒè¯•æ—¥å¿—
4. åˆ é™¤ `login/index.tsx` ä¸­çš„æ‰€æœ‰console.logï¼ˆç‰¹åˆ«æ³¨æ„æ•æ„Ÿä¿¡æ¯ï¼‰
5. åˆ é™¤ `main.tsx` ä¸­çš„console.log
6. åˆ é™¤ `theme-editor/index.tsx` ä¸­çš„è°ƒè¯•å‡½æ•°
7. è¯„ä¼° `safe-pro-form-select/index.tsx` ä¸­çš„console.warnæ˜¯å¦éœ€è¦ä¿ç•™

**éªŒè¯ï¼š**
1. å¯åŠ¨æœåŠ¡ï¼Œç¡®è®¤æ²¡æœ‰è°ƒè¯•è¾“å‡º
2. æ£€æŸ¥æ—¥å¿—æ–‡ä»¶ï¼Œç¡®è®¤å…³é”®ä¿¡æ¯æ­£å¸¸è®°å½•
3. æµ‹è¯•åŠŸèƒ½ï¼Œç¡®è®¤æ²¡æœ‰é—æ¼é‡è¦æ—¥å¿—

#### æ­¥éª¤5ï¼šæ¸…ç†æ—§åº”ç”¨ç›®å½•ï¼ˆâœ… å¯ç›´æ¥æ‰§è¡Œï¼‰

**å‰ææ¡ä»¶ï¼š**
- âœ… Archiveç›®å½•ä¸­å·²æœ‰22ä¸ªåº”ç”¨çš„å®Œæ•´å¤‡ä»½ï¼ˆ`archive/apps/backend/`ï¼‰
- âš ï¸ éœ€è¦å…ˆå¤„ç†1å¤„ä»£ç å¼•ç”¨ï¼š`approval_instance_service.py` line 717

**æ¸…ç†æ­¥éª¤ï¼š**
1. å¤„ç† `approval_instance_service.py` ä¸­çš„å¼•ç”¨ï¼ˆåˆ é™¤æˆ–æ³¨é‡Šæ‰ `_handle_sales_order_approval` å‡½æ•°ï¼‰
2. ç›´æ¥åˆ é™¤22ä¸ªæ—§åº”ç”¨ç›®å½•ï¼ˆArchiveä¸­å·²æœ‰å¤‡ä»½ï¼‰
3. éªŒè¯åº”ç”¨æ³¨å†ŒæœåŠ¡æ­£å¸¸å·¥ä½œ

#### æ­¥éª¤6ï¼šéªŒè¯æ¸…ç†ç»“æœ

1. å¯åŠ¨æœåŠ¡ï¼Œç¡®è®¤æ²¡æœ‰å¯¼å…¥é”™è¯¯
2. æµ‹è¯•ä¿ç•™çš„åŠŸèƒ½æ˜¯å¦æ­£å¸¸å·¥ä½œ
3. æ£€æŸ¥Inngest Dashboardä¸­çš„å‡½æ•°æ³¨å†Œæƒ…å†µ
4. æ£€æŸ¥åº”ç”¨æ³¨å†ŒæœåŠ¡æ˜¯å¦æ­£å¸¸

---

## 8. æ¸…ç†åéªŒè¯æ¸…å•

### 8.1 åŠŸèƒ½éªŒè¯

- [ ] æœåŠ¡å¯åŠ¨æ­£å¸¸ï¼Œæ— å¯¼å…¥é”™è¯¯
- [ ] Inngestå‡½æ•°æ³¨å†Œæ­£å¸¸ï¼ˆ8ä¸ªå‡½æ•°ï¼‰
- [ ] åº”ç”¨æ³¨å†ŒæœåŠ¡æ­£å¸¸ï¼ˆåªæ³¨å†Œmaster_dataï¼‰
- [ ] æ•°æ®åº“è¿æ¥æ­£å¸¸
- [ ] APIè·¯ç”±æ³¨å†Œæ­£å¸¸

### 8.2 ä»£ç è´¨é‡éªŒè¯

- [ ] æ— æœªä½¿ç”¨çš„å¯¼å…¥
- [ ] æ— æœªä½¿ç”¨çš„æ–‡ä»¶
- [ ] ä»£ç ç»“æ„æ¸…æ™°
- [ ] æ³¨é‡Šä»£ç å·²æ¸…ç†

---

## 9. æ¸…ç†æ³¨æ„äº‹é¡¹

### 9.1 é£é™©æç¤º

1. **æ•°æ®å¤‡ä»½åŠŸèƒ½æ¸…ç†ï¼š**
   - å¦‚æœæœªæ¥éœ€è¦æ•°æ®å¤‡ä»½åŠŸèƒ½ï¼Œéœ€è¦é‡æ–°å®ç°
   - å»ºè®®å…ˆç¡®è®¤æ˜¯å¦çœŸçš„ä¸éœ€è¦

2. **æ—§åº”ç”¨ç›®å½•æ¸…ç†ï¼š**
   - å¦‚æœæœªæ¥éœ€è¦å‚è€ƒæ—§åº”ç”¨ä»£ç ï¼Œå¯ä»¥ä»archiveç›®å½•æ¢å¤
   - å»ºè®®å…ˆç§»åŠ¨åˆ°archiveç›®å½•ï¼Œè€Œä¸æ˜¯ç›´æ¥åˆ é™¤

3. **æ•°æ®åº“è¡¨æ¸…ç†ï¼š**
   - å·²å¤‡ä»½çš„è¡¨å¯ä»¥ä¿ç•™ï¼Œä»¥é˜²ä¸‡ä¸€
   - å¦‚æœç¡®è®¤ä¸å†éœ€è¦ï¼Œå¯ä»¥åˆ é™¤ï¼ˆè°¨æ…æ“ä½œï¼‰

### 9.2 æ¸…ç†åŸåˆ™

1. **ä¿å®ˆæ¸…ç†ï¼š** ä¼˜å…ˆæ¸…ç†æ˜ç¡®ä¸éœ€è¦çš„åŠŸèƒ½
2. **å¯æ¢å¤ï¼š** é‡è¦ä»£ç å…ˆç§»åŠ¨åˆ°archiveç›®å½•
3. **é€æ­¥éªŒè¯ï¼š** æ¯æ­¥æ¸…ç†åç«‹å³éªŒè¯
4. **æ–‡æ¡£è®°å½•ï¼š** è®°å½•æ¸…ç†è¿‡ç¨‹å’ŒåŸå› 

---

## 10. æ¸…ç†æ€»ç»“

### 10.1 æ¸…ç†ç»Ÿè®¡

**åº”ç”¨ç›®å½•ï¼š**
- ä¿ç•™ï¼š1ä¸ªï¼ˆmaster_dataï¼‰
- æ¸…ç†ï¼š22ä¸ªï¼ˆç§»åŠ¨åˆ°archiveæˆ–åˆ é™¤ï¼‰

**Inngestå‡½æ•°ï¼š**
- ä¿ç•™ï¼š8ä¸ª
- æ¸…ç†ï¼š2ä¸ªï¼ˆæ•°æ®å¤‡ä»½ç›¸å…³ï¼‰

**æ•°æ®å¤‡ä»½åŠŸèƒ½ï¼š**
- æ¸…ç†ï¼š6ä¸ªæ¨¡å—ï¼ˆå‡½æ•°ã€æ¨¡å‹ã€æœåŠ¡ã€APIã€Schemasã€æ•°æ®åº“æ³¨å†Œï¼‰

**è°ƒè¯•ä»£ç ï¼š**
- åç«¯ï¼šæ¸…ç†20+å¤„printè¯­å¥
- å‰ç«¯ï¼šæ¸…ç†15+å¤„console.log
- æ³¨é‡Šä»£ç ï¼šæ¸…ç†100+è¡Œæ³¨é‡Šæ‰çš„ä»£ç 

**æ•°æ®åº“è¡¨ï¼š**
- å·²å¤‡ä»½ï¼š53ä¸ªè¡¨ï¼ˆå¯ä¿ç•™æˆ–åˆ é™¤ï¼‰

### 10.2 æ¸…ç†æ”¶ç›Š

1. âœ… ä»£ç ç»“æ„æ›´æ¸…æ™°
2. âœ… å‡å°‘ç»´æŠ¤æˆæœ¬
3. âœ… åŠ å¿«æ–°åŠŸèƒ½å¼€å‘é€Ÿåº¦
4. âœ… å‡å°‘æ··æ·†å’Œé”™è¯¯

---

**æ–‡æ¡£åˆ›å»ºæ—¶é—´ï¼š** 2025-12-27  
**æ–‡æ¡£ä½œè€…ï¼š** Luigi Lu  
**æ¸…ç†ä¾æ®ï¼š** æœ€æ–°å¼€å‘è®¡åˆ’æ–‡æ¡£

