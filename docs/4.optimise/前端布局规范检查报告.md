# 前端布局规范检查报告

## 📋 检查概述

**检查时间**: 2025-12-26  
**检查范围**: `kuaizhizao` 和 `master-data` 两个 APP 的前端代码  
**检查重点**: 主内容区（PageContainer）布局规范，遵循 Ant Design 原生规范

---

## 🎯 检查目标

1. ✅ 检查两个 APP 的前端代码是否符合 Ant Design 原生规范
2. ✅ 识别不同场景的布局需求
3. ✅ 建立统一的布局模板
4. ✅ 减少硬编码，使用原生组件和常量配置
5. ✅ 统一界面风格，提升用户体验

---

## 📊 检查结果总览

### 1. 布局模板创建情况

#### ✅ 已创建的布局模板

1. **ListPageTemplate** - 列表页面模板
   - 位置: `riveredge-frontend/src/components/layout-templates/ListPageTemplate.tsx`
   - 功能: 提供统一的列表页面布局，支持统计卡片（可选）和表格区域
   - 特点: 使用 Ant Design 原生组件（Row, Col, Card, Statistic）

2. **FormModalTemplate** - 表单 Modal 模板
   - 位置: `riveredge-frontend/src/components/layout-templates/FormModalTemplate.tsx`
   - 功能: 提供统一的表单 Modal 布局，使用 ProForm
   - 特点: 遵循标准 Modal 宽度和表单布局规范

3. **DetailDrawerTemplate** - 详情 Drawer 模板
   - 位置: `riveredge-frontend/src/components/layout-templates/DetailDrawerTemplate.tsx`
   - 功能: 提供统一的详情 Drawer 布局，使用 ProDescriptions
   - 特点: 遵循标准 Drawer 宽度和详情展示规范

4. **TwoColumnLayout** - 两栏布局模板
   - 位置: `riveredge-frontend/src/components/layout-templates/TwoColumnLayout.tsx`
   - 功能: 左侧树形结构，右侧内容区
   - 使用场景: 物料管理、文件管理等
   - 特点: 已整合到布局模板目录，使用布局常量配置

5. **布局常量配置** - constants.ts
   - 位置: `riveredge-frontend/src/components/layout-templates/constants.ts`
   - 功能: 统一管理尺寸、间距、颜色等常量
   - 包含: Modal、Drawer、表单、统计卡片、页面间距等配置

---

## 🔍 现有代码检查结果

### 1. kuaizhizao APP

#### ✅ 符合规范的部分

1. **销售订单管理页面** (`sales-orders/index.tsx`)
   - ✅ 使用 UniTable 组件
   - ✅ 使用 Modal 和 Drawer
   - ⚠️ 统计卡片使用硬编码样式（`padding: '16px 16px 0 16px'`）
   - ⚠️ 统计卡片列宽硬编码（`span={6}`）
   - ⚠️ Modal 宽度硬编码（`width={600}`）
   - ⚠️ Drawer 宽度硬编码（`width={600}`）

2. **工单管理页面** (`work-orders/index.tsx`)
   - ✅ 使用 UniTable 组件
   - ✅ 使用 Modal 和 Drawer
   - ⚠️ Modal 宽度硬编码（`width={800}`）
   - ⚠️ Drawer 尺寸硬编码（`size="large"`）

#### ❌ 需要改进的部分

1. **硬编码问题**
   ```typescript
   // ❌ 硬编码样式
   <div style={{ padding: '16px 16px 0 16px' }}>
     <Row gutter={16} style={{ marginBottom: 24 }}>
       <Col span={6}>
   ```

2. **布局不统一**
   - 不同页面使用不同的间距和尺寸
   - 统计卡片布局不一致

---

### 2. master-data APP

#### ✅ 符合规范的部分

1. **物料管理页面** (`materials/management.tsx`)
   - ✅ 使用 TwoColumnLayout 组件
   - ✅ 使用 UniTable 组件
   - ✅ 使用 Modal 和 Drawer
   - ⚠️ Modal 宽度硬编码（`width={600}`, `width={800}`）
   - ⚠️ Drawer 宽度硬编码（`size={720}`）

2. **客户管理页面** (`customers/index.tsx`)
   - ✅ 使用 UniTable 组件
   - ✅ 使用 Modal 和 Drawer
   - ✅ 使用 ProForm 和 ProDescriptions
   - ⚠️ Modal 宽度硬编码（`width={800}`）
   - ⚠️ Drawer 宽度硬编码（`size={720}`）

#### ❌ 需要改进的部分

1. **硬编码问题**
   ```typescript
   // ❌ 硬编码宽度
   <Modal width={800} ... />
   <Drawer size={720} ... />
   ```

2. **表单布局不统一**
   - 部分使用 `layout="vertical"`
   - 部分使用 `layout="horizontal"`
   - 网格布局配置不一致

---

## 📐 布局场景分析

### 场景 1: 标准列表页面（带统计卡片）

**使用场景**: 销售订单、工单管理等需要展示统计信息的页面

**当前实现**:
```typescript
// ❌ 硬编码实现
<div style={{ padding: '16px 16px 0 16px' }}>
  <Row gutter={16} style={{ marginBottom: 24 }}>
    <Col span={6}>...</Col>
  </Row>
</div>
<UniTable ... />
```

**推荐实现**:
```typescript
// ✅ 使用模板
<ListPageTemplate
  statCards={[
    { title: '今日订单数', value: 12, prefix: <FileExcelOutlined /> },
  ]}
>
  <UniTable ... />
</ListPageTemplate>
```

---

### 场景 2: 标准列表页面（不带统计卡片）

**使用场景**: 客户管理、供应商管理等简单列表页面

**当前实现**:
```typescript
// ✅ 直接使用 UniTable（符合规范）
<UniTable ... />
```

**推荐实现**:
```typescript
// ✅ 使用模板（保持一致性）
<ListPageTemplate>
  <UniTable ... />
</ListPageTemplate>
```

---

### 场景 3: 两栏布局页面

**使用场景**: 物料管理（左侧分组树，右侧物料列表）

**当前实现**:
```typescript
// ✅ 已使用 TwoColumnLayout（符合规范）
import { TwoColumnLayout } from '@/components/layout-templates';

<TwoColumnLayout
  leftPanel={{ ... }}
  rightPanel={{ ... }}
/>
```

**状态**: ✅ 已符合规范，已整合到布局模板目录

---

### 场景 4: 表单 Modal

**使用场景**: 新建/编辑客户、物料等

**当前实现**:
```typescript
// ❌ 硬编码宽度和布局
<Modal width={800} ...>
  <ProForm layout="vertical" grid={true} ...>
```

**推荐实现**:
```typescript
// ✅ 使用模板
<FormModalTemplate
  title={isEdit ? '编辑客户' : '新建客户'}
  open={modalVisible}
  onClose={handleClose}
  onFinish={handleSubmit}
  isEdit={isEdit}
  initialValues={formValues}
>
  <ProFormText name="code" label="编码" />
  <ProFormText name="name" label="名称" />
</FormModalTemplate>
```

---

### 场景 5: 详情 Drawer

**使用场景**: 查看客户详情、物料详情等

**当前实现**:
```typescript
// ❌ 硬编码宽度
<Drawer size={720} ...>
  <ProDescriptions ... />
</Drawer>
```

**推荐实现**:
```typescript
// ✅ 使用模板
<DetailDrawerTemplate
  title="客户详情"
  open={drawerVisible}
  onClose={handleClose}
  dataSource={customerDetail}
  columns={columns}
/>
```

---

## 🎨 Ant Design 规范检查

### ✅ 符合规范的部分

1. **组件使用**
   - ✅ 使用 Ant Design 原生组件（Button, Modal, Drawer, Card, Statistic）
   - ✅ 使用 Pro Components（ProTable, ProForm, ProDescriptions）
   - ✅ 使用主题 token（`theme.useToken()`）

2. **布局系统**
   - ✅ 使用 Grid 系统（Row, Col）
   - ✅ 使用 Flex 布局
   - ✅ 响应式设计（xs, sm, md, lg, xl, xxl）

3. **间距系统**
   - ✅ 使用标准间距（8px, 16px, 24px）
   - ⚠️ 部分页面硬编码间距值

### ❌ 不符合规范的部分

1. **硬编码问题**
   - ❌ 硬编码宽度值（`width={800}`, `size={720}`）
   - ❌ 硬编码间距值（`padding: '16px 16px 0 16px'`）
   - ❌ 硬编码列宽（`span={6}`）

2. **布局不统一**
   - ❌ 不同页面使用不同的 Modal 宽度
   - ❌ 不同页面使用不同的 Drawer 宽度
   - ❌ 表单布局配置不一致

---

## 📝 改进建议

### 1. 立即改进（高优先级）

1. **替换硬编码为常量**
   ```typescript
   // ❌ 当前
   <Modal width={800} ...>
   
   // ✅ 改进
   import { MODAL_CONFIG } from '@/components/layout-templates';
   <Modal width={MODAL_CONFIG.STANDARD_WIDTH} ...>
   ```

2. **使用布局模板**
   - 列表页面使用 `ListPageTemplate`
   - 表单 Modal 使用 `FormModalTemplate`
   - 详情 Drawer 使用 `DetailDrawerTemplate`

3. **统一表单布局**
   - 统一使用 `layout="vertical"`
   - 统一使用 `grid={true}`
   - 统一使用 `rowProps={{ gutter: 16 }}`

### 2. 逐步改进（中优先级）

1. **统计卡片响应式布局**
   - 使用 `STAT_CARD_CONFIG.COLUMNS` 配置
   - 支持不同屏幕尺寸的自适应

2. **统一间距系统**
   - 使用 `PAGE_SPACING` 常量
   - 统一页面内边距和区块间距

### 3. 长期优化（低优先级）

1. **主题定制**
   - 使用主题 token 替代硬编码颜色
   - 支持深色模式

2. **动画效果**
   - 统一过渡动画
   - 提升用户体验

---

## 🛠️ 实施计划

### 阶段 1: 模板创建（已完成）

- ✅ 创建布局模板组件
- ✅ 创建布局常量配置
- ✅ 导出模板组件

### 阶段 2: 代码迁移（进行中）

1. **kuaizhizao APP**
   - [ ] 销售订单管理页面
   - [ ] 工单管理页面
   - [ ] 其他列表页面

2. **master-data APP**
   - [ ] 物料管理页面
   - [ ] 客户管理页面
   - [ ] 供应商管理页面
   - [ ] 其他列表页面

### 阶段 3: 规范统一（待开始）

1. **统一 Modal 宽度**
   - 标准表单: 800px
   - 复杂表单: 1000px
   - 简单表单: 600px

2. **统一 Drawer 宽度**
   - 标准详情: 720px
   - 复杂详情: 1000px
   - 简单详情: 500px

3. **统一表单布局**
   - 垂直布局（`layout="vertical"`）
   - 网格布局（`grid={true}`）
   - 两栏布局（`colProps={{ span: 12 }}`）

---

## 📚 使用指南

### 1. 列表页面模板

```typescript
import { ListPageTemplate } from '@/components/layout-templates';

<ListPageTemplate
  statCards={[
    {
      title: '今日订单数',
      value: 12,
      prefix: <FileExcelOutlined />,
      valueStyle: { color: '#1890ff' },
    },
  ]}
>
  <UniTable ... />
</ListPageTemplate>
```

### 2. 表单 Modal 模板

```typescript
import { FormModalTemplate } from '@/components/layout-templates';

<FormModalTemplate
  title={isEdit ? '编辑客户' : '新建客户'}
  open={modalVisible}
  onClose={() => setModalVisible(false)}
  onFinish={handleSubmit}
  isEdit={isEdit}
  initialValues={formValues}
>
  <ProFormText name="code" label="编码" />
  <ProFormText name="name" label="名称" />
</FormModalTemplate>
```

### 3. 详情 Drawer 模板

```typescript
import { DetailDrawerTemplate } from '@/components/layout-templates';

<DetailDrawerTemplate
  title="客户详情"
  open={drawerVisible}
  onClose={() => setDrawerVisible(false)}
  dataSource={customerDetail}
  columns={[
    { title: '客户编码', dataIndex: 'code' },
    { title: '客户名称', dataIndex: 'name' },
  ]}
/>
```

### 4. 使用布局常量

```typescript
import { MODAL_CONFIG, DRAWER_CONFIG, FORM_LAYOUT } from '@/components/layout-templates';

// Modal 宽度
<Modal width={MODAL_CONFIG.STANDARD_WIDTH} ...>

// Drawer 宽度
<Drawer width={DRAWER_CONFIG.STANDARD_WIDTH} ...>

// 表单布局
<ProForm
  layout={FORM_LAYOUT.VERTICAL}
  grid={true}
  rowProps={{ gutter: FORM_LAYOUT.GRID_GUTTER }}
>
```

---

## ✅ 检查清单

### 代码规范

- [x] 创建布局模板组件
- [x] 创建布局常量配置
- [ ] 替换硬编码为常量
- [ ] 统一 Modal 宽度
- [ ] 统一 Drawer 宽度
- [ ] 统一表单布局

### 布局统一

- [ ] 列表页面使用 `ListPageTemplate`
- [ ] 表单 Modal 使用 `FormModalTemplate`
- [ ] 详情 Drawer 使用 `DetailDrawerTemplate`
- [ ] 统计卡片使用响应式布局
- [ ] 统一页面间距

### Ant Design 规范

- [x] 使用原生组件
- [x] 使用主题 token
- [ ] 减少硬编码
- [ ] 统一间距系统
- [ ] 响应式设计

---

## 📊 统计数据

- **检查页面数**: 10+
- **发现硬编码问题**: 20+
- **已创建模板**: 3
- **已创建常量**: 1
- **待迁移页面**: 10+

---

## 🎯 总结

### 优点

1. ✅ 已使用 UniTable、ProForm、ProDescriptions 等统一组件
2. ✅ 已使用 TwoColumnLayout 处理两栏布局
3. ✅ 已创建布局模板和常量配置

### 需要改进

1. ❌ 大量硬编码的宽度、间距、列宽
2. ❌ 布局不统一，不同页面使用不同配置
3. ❌ 缺少统一的布局模板使用

### 下一步行动

1. **立即行动**: 使用布局模板替换硬编码实现
2. **短期目标**: 统一所有页面的布局配置
3. **长期目标**: 建立完整的布局规范文档和使用指南

---

**报告生成时间**: 2025-12-26  
**检查人员**: AI Assistant  
**审核状态**: 待审核

