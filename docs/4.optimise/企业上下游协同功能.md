# ä¼ä¸šä¸Šä¸‹æ¸¸ååŒåŠŸèƒ½

> **æ–‡æ¡£è¯´æ˜ï¼š**  
> æœ¬æ–‡æ¡£è¯´æ˜ä¼ä¸šä¸Šä¸‹æ¸¸ååŒåŠŸèƒ½çš„å®ç°æ–¹æ¡ˆï¼ŒåŒ…æ‹¬ä¾›åº”å•†ååŒå¹³å°å’Œå®¢æˆ·ååŒå¹³å°ã€‚  
> 
> **åˆ›å»ºæ—¶é—´ï¼š** 2026-01-27  
> **æ–‡æ¡£ç‰ˆæœ¬ï¼š** v1.0

---

## ğŸ“‹ ç›®å½•

1. [åŠŸèƒ½æ¦‚è¿°](#åŠŸèƒ½æ¦‚è¿°)
2. [å®ç°æ–¹æ¡ˆ](#å®ç°æ–¹æ¡ˆ)
3. [ä½¿ç”¨æŒ‡å—](#ä½¿ç”¨æŒ‡å—)

---

## åŠŸèƒ½æ¦‚è¿°

### ä¾›åº”å•†ååŒå¹³å°

- âœ… **è®¢å•ä¸‹å‘**ï¼šå°†é‡‡è´­è®¢å•å‘é€ç»™ä¾›åº”å•†
- âœ… **è¿›åº¦æ›´æ–°**ï¼šä¾›åº”å•†å¯ä»¥æ›´æ–°é‡‡è´­è®¢å•çš„ç”Ÿäº§è¿›åº¦
- âœ… **å‘è´§é€šçŸ¥**ï¼šä¾›åº”å•†æäº¤å‘è´§é€šçŸ¥ï¼Œé€šçŸ¥é‡‡è´­æ–¹å‡†å¤‡æ”¶è´§
- âœ… **è®¢å•æŸ¥è¯¢**ï¼šä¾›åº”å•†å¯ä»¥æŸ¥çœ‹è‡ªå·±çš„é‡‡è´­è®¢å•åˆ—è¡¨

### å®¢æˆ·ååŒå¹³å°

- âœ… **è®¢å•æŸ¥çœ‹**ï¼šå®¢æˆ·å¯ä»¥æŸ¥çœ‹è‡ªå·±çš„é”€å”®è®¢å•åˆ—è¡¨
- âœ… **ç”Ÿäº§è¿›åº¦æŸ¥çœ‹**ï¼šå®¢æˆ·å¯ä»¥æŸ¥çœ‹è®¢å•å…³è”çš„ç”Ÿäº§è¿›åº¦
- âœ… **è®¢å•æ±‡æ€»**ï¼šå®¢æˆ·å¯ä»¥æŸ¥çœ‹è®¢å•æ±‡æ€»ä¿¡æ¯

---

## å®ç°æ–¹æ¡ˆ

### 1. åç«¯æœåŠ¡

**ä¾›åº”å•†ååŒæœåŠ¡ï¼š** `apps/kuaizhizao/services/supplier_collaboration_service.py`

**ä¸»è¦æ–¹æ³•ï¼š**
- `send_purchase_order_to_supplier()`: ä¸‹å‘é‡‡è´­è®¢å•åˆ°ä¾›åº”å•†ååŒå¹³å°
- `update_purchase_order_progress()`: æ›´æ–°é‡‡è´­è®¢å•è¿›åº¦
- `submit_delivery_notice()`: æäº¤å‘è´§é€šçŸ¥
- `get_supplier_purchase_orders()`: è·å–ä¾›åº”å•†çš„é‡‡è´­è®¢å•åˆ—è¡¨

**å®¢æˆ·ååŒæœåŠ¡ï¼š** `apps/kuaizhizao/services/customer_collaboration_service.py`

**ä¸»è¦æ–¹æ³•ï¼š**
- `get_customer_sales_orders()`: è·å–å®¢æˆ·çš„é”€å”®è®¢å•åˆ—è¡¨
- `get_sales_order_production_progress()`: è·å–é”€å”®è®¢å•çš„ç”Ÿäº§è¿›åº¦
- `get_customer_order_summary()`: è·å–å®¢æˆ·è®¢å•æ±‡æ€»

### 2. APIæ¥å£

**ä¾›åº”å•†ååŒAPIï¼š**
- `POST /purchase-orders/{purchase_order_id}/send-to-supplier`: ä¸‹å‘é‡‡è´­è®¢å•åˆ°ä¾›åº”å•†ååŒå¹³å°
- `POST /purchase-orders/{purchase_order_id}/update-progress`: æ›´æ–°é‡‡è´­è®¢å•è¿›åº¦
- `POST /purchase-orders/{purchase_order_id}/submit-delivery-notice`: æäº¤å‘è´§é€šçŸ¥
- `GET /suppliers/{supplier_id}/purchase-orders`: è·å–ä¾›åº”å•†çš„é‡‡è´­è®¢å•åˆ—è¡¨

**å®¢æˆ·ååŒAPIï¼š**
- `GET /customers/{customer_id}/sales-orders`: è·å–å®¢æˆ·çš„é”€å”®è®¢å•åˆ—è¡¨
- `GET /sales-orders/{sales_order_id}/production-progress`: è·å–é”€å”®è®¢å•ç”Ÿäº§è¿›åº¦
- `GET /customers/{customer_id}/order-summary`: è·å–å®¢æˆ·è®¢å•æ±‡æ€»

### 3. Schemaå®šä¹‰

**ä¾›åº”å•†ååŒSchemaï¼š**
- `PurchaseOrderProgressUpdateRequest`: æ›´æ–°é‡‡è´­è®¢å•è¿›åº¦è¯·æ±‚
- `DeliveryNoticeRequest`: æäº¤å‘è´§é€šçŸ¥è¯·æ±‚

**å®¢æˆ·ååŒSchemaï¼š**
- `SalesOrderProductionProgressResponse`: é”€å”®è®¢å•ç”Ÿäº§è¿›åº¦å“åº”
- `CustomerOrderSummaryResponse`: å®¢æˆ·è®¢å•æ±‡æ€»å“åº”

---

## ä½¿ç”¨æŒ‡å—

### ä¾›åº”å•†ååŒ

#### ä¸‹å‘é‡‡è´­è®¢å•åˆ°ä¾›åº”å•†ååŒå¹³å°

```python
POST /apps/kuaizhizao/purchase-orders/{purchase_order_id}/send-to-supplier
```

#### æ›´æ–°é‡‡è´­è®¢å•è¿›åº¦

```python
POST /apps/kuaizhizao/purchase-orders/{purchase_order_id}/update-progress
{
  "progress_percentage": 60,
  "estimated_delivery_date": "2026-01-15",
  "remarks": "ç”Ÿäº§è¿›åº¦æ­£å¸¸"
}
```

#### æäº¤å‘è´§é€šçŸ¥

```python
POST /apps/kuaizhizao/purchase-orders/{purchase_order_id}/submit-delivery-notice
{
  "delivery_quantity": 1000,
  "delivery_date": "2026-01-15",
  "tracking_number": "SF1234567890",
  "remarks": "å·²å‘è´§"
}
```

### å®¢æˆ·ååŒ

#### è·å–å®¢æˆ·çš„é”€å”®è®¢å•åˆ—è¡¨

```python
GET /apps/kuaizhizao/customers/{customer_id}/sales-orders?status=in_progress
```

#### è·å–é”€å”®è®¢å•ç”Ÿäº§è¿›åº¦

```python
GET /apps/kuaizhizao/sales-orders/{sales_order_id}/production-progress
```

#### è·å–å®¢æˆ·è®¢å•æ±‡æ€»

```python
GET /apps/kuaizhizao/customers/{customer_id}/order-summary
```

---

**æ–‡æ¡£åˆ›å»ºæ—¶é—´ï¼š** 2026-01-27  
**æ–‡æ¡£ä½œè€…ï¼š** Auto (AI Assistant)  
**æ–‡æ¡£ç‰ˆæœ¬ï¼š** v1.0
