# ç¬¬ä¸‰æ­¥æ•°æ®è¿ç§»æ£€æŸ¥æŠ¥å‘Š

**æ£€æŸ¥æ—¥æœŸï¼š** 2026-01-15  
**æ£€æŸ¥èŒƒå›´ï¼š** ç¬¬ä¸‰æ­¥å¼€å‘è®¡åˆ’ä¸­æ‰€æœ‰æ–°åˆ›å»ºçš„æ¨¡å‹å’Œå­—æ®µæ›´æ–°

---

## ğŸ“Š æ€»ä½“è¿ç§»æƒ…å†µ

### æ¨¡å‹è¿ç§»ç»Ÿè®¡
- **æ¨¡å‹æ–‡ä»¶æ€»æ•°ï¼š** 46 ä¸ªï¼ˆkuaizhizaoåº”ç”¨ï¼‰
- **å·²è¿ç§»æ¨¡å‹ï¼š** 26 ä¸ªï¼ˆçº¦ 57%ï¼‰
- **æœªè¿ç§»æ¨¡å‹ï¼š** 20 ä¸ªï¼ˆçº¦ 43%ï¼‰
- **å­¤ç«‹çš„è¡¨ï¼š** 0 ä¸ª

### è¿ç§»æ–‡ä»¶ç»Ÿè®¡
- **è¿ç§»æ–‡ä»¶æ€»æ•°ï¼š** 10 ä¸ª
- **åˆ›å»ºçš„è¡¨ï¼š** 28 ä¸ª
- **åˆ é™¤çš„è¡¨ï¼š** 2 ä¸ª
- **å½“å‰å­˜åœ¨çš„è¡¨ï¼š** 26 ä¸ª

---

## âœ… å·²è¿ç§»çš„æ¨¡å‹ï¼ˆ26ä¸ªï¼‰

### åŸºç¡€ä¸šåŠ¡æ¨¡å‹
- âœ… `apps_kuaizhizao_work_orders` - å·¥å•
- âœ… `apps_kuaizhizao_purchase_orders` - é‡‡è´­å•
- âœ… `apps_kuaizhizao_purchase_order_items` - é‡‡è´­å•æ˜ç»†
- âœ… `apps_kuaizhizao_purchase_receipts` - é‡‡è´­å…¥åº“å•
- âœ… `apps_kuaizhizao_purchase_receipt_items` - é‡‡è´­å…¥åº“å•æ˜ç»†
- âœ… `apps_kuaizhizao_purchase_invoices` - é‡‡è´­å‘ç¥¨
- âœ… `apps_kuaizhizao_sales_orders` - é”€å”®å•
- âœ… `apps_kuaizhizao_sales_order_items` - é”€å”®å•æ˜ç»†
- âœ… `apps_kuaizhizao_sales_deliveries` - é”€å”®å‡ºåº“å•
- âœ… `apps_kuaizhizao_sales_delivery_items` - é”€å”®å‡ºåº“å•æ˜ç»†
- âœ… `apps_kuaizhizao_sales_forecasts` - é”€å”®é¢„æµ‹
- âœ… `apps_kuaizhizao_sales_forecast_items` - é”€å”®é¢„æµ‹æ˜ç»†
- âœ… `apps_kuaizhizao_receivables` - åº”æ”¶å•
- âœ… `apps_kuaizhizao_payables` - åº”ä»˜å•
- âœ… `apps_kuaizhizao_reporting_records` - æŠ¥å·¥è®°å½•

### ç”Ÿäº§ç›¸å…³æ¨¡å‹
- âœ… `apps_kuaizhizao_production_plans` - ç”Ÿäº§è®¡åˆ’
- âœ… `apps_kuaizhizao_production_plan_items` - ç”Ÿäº§è®¡åˆ’æ˜ç»†
- âœ… `apps_kuaizhizao_production_pickings` - ç”Ÿäº§é¢†æ–™å•
- âœ… `apps_kuaizhizao_production_picking_items` - ç”Ÿäº§é¢†æ–™å•æ˜ç»†
- âœ… `apps_kuaizhizao_finished_goods_receipts` - æˆå“å…¥åº“å•
- âœ… `apps_kuaizhizao_finished_goods_receipt_items` - æˆå“å…¥åº“å•æ˜ç»†

### è´¨é‡ç›¸å…³æ¨¡å‹
- âœ… `apps_kuaizhizao_incoming_inspections` - æ¥æ–™æ£€éªŒ
- âœ… `apps_kuaizhizao_process_inspections` - è¿‡ç¨‹æ£€éªŒ
- âœ… `apps_kuaizhizao_finished_goods_inspections` - æˆå“æ£€éªŒ

### è®¡åˆ’ç›¸å…³æ¨¡å‹
- âœ… `apps_kuaizhizao_mrp_results` - MRPç»“æœ
- âœ… `apps_kuaizhizao_lrp_results` - LRPç»“æœ

---

## âŒ æœªè¿ç§»çš„æ¨¡å‹ï¼ˆ20ä¸ªï¼‰

### å·¥å•ç®¡ç†ç›¸å…³ï¼ˆ3ä¸ªï¼‰
- âŒ `apps_kuaizhizao_work_order_operations` - å·¥å•å·¥åº
- âŒ `apps_kuaizhizao_rework_orders` - è¿”å·¥å•
- âŒ `apps_kuaizhizao_outsource_orders` - å§”å¤–å•

### ç”Ÿäº§æ‰§è¡Œç›¸å…³ï¼ˆ3ä¸ªï¼‰
- âŒ `apps_kuaizhizao_scrap_records` - æŠ¥åºŸè®°å½•
- âŒ `apps_kuaizhizao_defect_records` - ä¸è‰¯å“è®°å½•
- âŒ `apps_kuaizhizao_material_bindings` - ç‰©æ–™ç»‘å®š

### ä»“å‚¨ç®¡ç†ç›¸å…³ï¼ˆ4ä¸ªï¼‰
- âŒ `apps_kuaizhizao_stocktakings` - ç›˜ç‚¹å•
- âŒ `apps_kuaizhizao_stocktaking_items` - ç›˜ç‚¹å•æ˜ç»†
- âŒ `apps_kuaizhizao_inventory_alerts` - åº“å­˜é¢„è­¦
- âŒ `apps_kuaizhizao_inventory_alert_rules` - åº“å­˜é¢„è­¦è§„åˆ™
- âŒ `apps_kuaizhizao_packing_bindings` - è£…ç®±ç»‘å®š
- âŒ `apps_kuaizhizao_customer_material_registrations` - å®¢æˆ·æ¥æ–™ç™»è®°

### å¼‚å¸¸å¤„ç†ç›¸å…³ï¼ˆ3ä¸ªï¼‰
- âŒ `apps_kuaizhizao_material_shortage_exceptions` - ç¼ºæ–™å¼‚å¸¸
- âŒ `apps_kuaizhizao_delivery_delay_exceptions` - å»¶æœŸå¼‚å¸¸
- âŒ `apps_kuaizhizao_quality_exceptions` - è´¨é‡å¼‚å¸¸

### å•æ®æ•ˆç‡ç›¸å…³ï¼ˆ1ä¸ªï¼‰
- âŒ `apps_kuaizhizao_document_node_timings` - å•æ®èŠ‚ç‚¹è€—æ—¶

### æˆæœ¬æ ¸ç®—ç›¸å…³ï¼ˆ2ä¸ªï¼‰
- âŒ `apps_kuaizhizao_cost_rules` - æˆæœ¬è§„åˆ™
- âŒ `apps_kuaizhizao_cost_calculations` - æˆæœ¬æ ¸ç®—

### æœŸåˆæ•°æ®ç›¸å…³ï¼ˆ1ä¸ªï¼‰
- âŒ `apps_kuaizhizao_launch_countdowns` - ä¸Šçº¿å€’è®¡æ—¶ï¼ˆ**åˆšåˆ›å»ºï¼Œéœ€è¿ç§»**ï¼‰

### å…¶ä»–ï¼ˆ1ä¸ªï¼‰
- âŒ `apps_kuaizhizao_barcode_mapping_rules` - æ¡ç æ˜ å°„è§„åˆ™

---

## ğŸ” æ¨¡å‹å­—æ®µæ›´æ–°æƒ…å†µ

### å·²æ›´æ–°çš„æ¨¡å‹å­—æ®µ
- âœ… `apps_kuaizhizao_work_orders` - å·²æ·»åŠ å†»ç»“ç›¸å…³å­—æ®µï¼š
  - `is_frozen` - æ˜¯å¦å†»ç»“
  - `freeze_reason` - å†»ç»“åŸå› 
  - `frozen_at` - å†»ç»“æ—¶é—´
  - `frozen_by` - å†»ç»“äººID
  - âš ï¸ **éœ€è¦ç¡®è®¤ï¼šè¿™äº›å­—æ®µæ˜¯å¦å·²ç”Ÿæˆè¿ç§»æ–‡ä»¶**

---

## ğŸ“‹ å…¶ä»–åº”ç”¨çš„æ¨¡å‹è¿ç§»æƒ…å†µ

### Master Dataåº”ç”¨
- âš ï¸ `apps_master_data_material_code_mappings` - ç‰©æ–™ç¼–ç æ˜ å°„
  - **çŠ¶æ€ï¼š** éœ€è¦æ£€æŸ¥æ˜¯å¦å·²è¿ç§»
  - **ä½ç½®ï¼š** `riveredge-backend/src/apps/master_data/models/material_code_mapping.py`

---

## âš ï¸ éœ€è¦å¤„ç†çš„é—®é¢˜

### é«˜ä¼˜å…ˆçº§ï¼ˆP0ï¼‰
1. **å·¥å•å·¥åºæ¨¡å‹æœªè¿ç§»**
   - `apps_kuaizhizao_work_order_operations`
   - **å½±å“ï¼š** å·¥å•å·¥åºä¿®æ”¹åŠŸèƒ½æ— æ³•ä½¿ç”¨
   - **å»ºè®®ï¼š** ç«‹å³ç”Ÿæˆè¿ç§»æ–‡ä»¶

2. **å·¥å•å†»ç»“å­—æ®µæœªè¿ç§»**
   - `apps_kuaizhizao_work_orders` è¡¨çš„å†»ç»“ç›¸å…³å­—æ®µ
   - **å½±å“ï¼š** å·¥å•å†»ç»“/è§£å†»åŠŸèƒ½æ— æ³•ä½¿ç”¨
   - **å»ºè®®ï¼š** æ£€æŸ¥å¹¶ç”Ÿæˆè¿ç§»æ–‡ä»¶

3. **ä¸Šçº¿å€’è®¡æ—¶æ¨¡å‹æœªè¿ç§»**
   - `apps_kuaizhizao_launch_countdowns`
   - **å½±å“ï¼š** æœŸåˆæ•°æ®å¯¼å…¥çš„ä¸Šçº¿å€’è®¡æ—¶åŠŸèƒ½æ— æ³•ä½¿ç”¨
   - **å»ºè®®ï¼š** ç«‹å³ç”Ÿæˆè¿ç§»æ–‡ä»¶

### ä¸­ä¼˜å…ˆçº§ï¼ˆP1ï¼‰
4. **è¿”å·¥å•ã€å§”å¤–å•æœªè¿ç§»**
   - `apps_kuaizhizao_rework_orders`
   - `apps_kuaizhizao_outsource_orders`
   - **å½±å“ï¼š** è¿”å·¥å’Œå§”å¤–åŠŸèƒ½æ— æ³•ä½¿ç”¨

5. **å¼‚å¸¸å¤„ç†æ¨¡å‹æœªè¿ç§»**
   - `apps_kuaizhizao_material_shortage_exceptions`
   - `apps_kuaizhizao_delivery_delay_exceptions`
   - `apps_kuaizhizao_quality_exceptions`
   - **å½±å“ï¼š** å¼‚å¸¸å¤„ç†åŠŸèƒ½æ— æ³•ä½¿ç”¨

6. **æˆæœ¬æ ¸ç®—æ¨¡å‹æœªè¿ç§»**
   - `apps_kuaizhizao_cost_rules`
   - `apps_kuaizhizao_cost_calculations`
   - **å½±å“ï¼š** æˆæœ¬æ ¸ç®—åŠŸèƒ½æ— æ³•ä½¿ç”¨

### ä½ä¼˜å…ˆçº§ï¼ˆP2ï¼‰
7. **å…¶ä»–ä¸šåŠ¡æ¨¡å‹æœªè¿ç§»**
   - ç›˜ç‚¹ã€åº“å­˜é¢„è­¦ã€è£…ç®±ç»‘å®šç­‰
   - **å½±å“ï¼š** ç›¸å…³åŠŸèƒ½æ— æ³•ä½¿ç”¨

---

## ğŸ”§ å»ºè®®æ“ä½œ

### ç«‹å³æ‰§è¡Œï¼ˆP0ï¼‰
1. **ç”Ÿæˆå·¥å•å·¥åºè¿ç§»æ–‡ä»¶**
   ```bash
   cd riveredge-backend
   uv run aerich migrate --name add_work_order_operations
   ```

2. **ç”Ÿæˆå·¥å•å†»ç»“å­—æ®µè¿ç§»æ–‡ä»¶**
   ```bash
   uv run aerich migrate --name add_work_order_freeze_fields
   ```

3. **ç”Ÿæˆä¸Šçº¿å€’è®¡æ—¶è¿ç§»æ–‡ä»¶**
   ```bash
   uv run aerich migrate --name add_launch_countdowns
   ```

### è¿‘æœŸæ‰§è¡Œï¼ˆP1ï¼‰
4. **æ‰¹é‡ç”Ÿæˆå…¶ä»–æ¨¡å‹è¿ç§»æ–‡ä»¶**
   ```bash
   # è¿”å·¥å•
   uv run aerich migrate --name add_rework_orders
   
   # å§”å¤–å•
   uv run aerich migrate --name add_outsource_orders
   
   # å¼‚å¸¸å¤„ç†
   uv run aerich migrate --name add_exception_models
   
   # æˆæœ¬æ ¸ç®—
   uv run aerich migrate --name add_cost_models
   ```

5. **åº”ç”¨è¿ç§»**
   ```bash
   uv run aerich upgrade
   ```

### éªŒè¯æ­¥éª¤
6. **éªŒè¯è¿ç§»ç»“æœ**
   ```bash
   # æ£€æŸ¥è¿ç§»çŠ¶æ€
   uv run aerich status
   
   # é‡æ–°è¿è¡Œæ£€æŸ¥è„šæœ¬
   python migrations/check_unmigrated_models.py
   ```

---

## ğŸ“ è¿ç§»æ–‡ä»¶ä½ç½®

- **è¿ç§»æ–‡ä»¶ç›®å½•ï¼š** `riveredge-backend/migrations/models/`
- **æ£€æŸ¥è„šæœ¬ï¼š** `riveredge-backend/migrations/check_unmigrated_models.py`
- **æ£€æŸ¥æŠ¥å‘Šï¼š** `riveredge-backend/migrations/unmigrated_models_report.txt`

---

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **ä¸¥ç¦ç›´æ¥ä½¿ç”¨SQLä¿®æ”¹æ•°æ®åº“**
   - å¿…é¡»ä½¿ç”¨ Aerich å·¥å…·è¿›è¡Œè¿ç§»
   - æ‰€æœ‰æ•°æ®åº“ç»“æ„å˜æ›´å¿…é¡»é€šè¿‡è¿ç§»æ–‡ä»¶

2. **è¿ç§»æ–‡ä»¶å‘½åè§„èŒƒ**
   - æ ¼å¼ï¼š`{åºå·}_{æ—¥æœŸæ—¶é—´}_{æè¿°}.py`
   - ç¤ºä¾‹ï¼š`10_20260115000000_add_work_order_operations.py`

3. **è¿ç§»å‰å¤‡ä»½æ•°æ®åº“**
   - æ‰§è¡Œè¿ç§»å‰å¿…é¡»å¤‡ä»½æ•°æ®åº“
   - ç¡®ä¿å¯ä»¥å›æ»š

4. **æµ‹è¯•ç¯å¢ƒéªŒè¯**
   - å…ˆåœ¨æµ‹è¯•ç¯å¢ƒéªŒè¯è¿ç§»
   - ç¡®è®¤æ— è¯¯åå†åº”ç”¨åˆ°ç”Ÿäº§ç¯å¢ƒ

---

**æŠ¥å‘Šç”Ÿæˆæ—¶é—´ï¼š** 2026-01-15  
**æ£€æŸ¥å·¥å…·ï¼š** `check_unmigrated_models.py`  
**æœ€åæ›´æ–°ï¼š** 2026-01-15

