# 快格轻制造 - 基础全流程开发文档

## 📋 文档概述

**目标：** 聚焦核心单据业务主流程，实现制造业数字化转型的基础功能

**范围：** 仅包含第一阶段必须实现的单据业务流程，暂不包含优化体验、AI增强、高级报表等功能

**原则：**
- 🚀 **核心业务优先**：专注于单据创建、审核、执行等核心业务流程
- 🚀 **数据完整性**：确保业务数据流转完整，业务规则正确
- 🚀 **基础功能完备**：满足制造业基础管理需求
- 🚀 **可扩展架构**：为后续优化预留扩展接口

---

## 1. 系统初始化阶段（第1天）

### 1.1 系统注册与登录

**用户操作：**
1. 访问系统登录页面
2. 选择"快速注册"
3. 填写组织信息（组织名称、手机号、验证码、密码）
4. 点击"立即注册"，系统自动创建租户和管理员账号

**系统行为：**
- ✅ 创建租户
- ✅ 创建组织管理员账号
- ✅ 分配基础权限
- ✅ 初始化基础菜单和系统参数

**验收标准：**
- ✅ 组织注册成功
- ✅ 管理员账号创建成功
- ✅ 登录功能正常

---

### 1.2 快速初始化向导

**用户操作：**
1. 注册后自动进入初始化向导
2. 按向导步骤完成基础配置：
   - 组织信息完善
   - 基础参数设置
   - 编码规则配置
3. 完成初始化，进入系统主界面

**系统行为：**
- ✅ 引导用户完成基础配置
- ✅ 验证配置完整性
- ✅ 初始化完成标识

---

## 2. 基础数据配置阶段（第2-3天）

### 2.1 组织架构配置

**用户操作：**
1. 配置部门结构
2. 创建员工账号
3. 分配员工到部门
4. 设置员工角色和权限

**核心功能：**
- ✅ 部门树形结构
- ✅ 员工基础信息
- ✅ 角色权限分配

---

### 2.2 工厂建模配置

**用户操作：**
1. 配置车间信息
2. 设置工作中心
3. 建立车间-工作中心关联

**核心功能：**
- ✅ 车间管理
- ✅ 工作中心管理
- ✅ 组织关系建立

---

### 2.3 物料主数据配置

**用户操作：**
1. 创建物料分组（树形结构）
2. 批量导入物料信息
3. 配置物料属性（单位、规格等）

**核心功能：**
- ✅ 物料基础信息
- ✅ 物料分组管理
- ✅ 物料属性配置

---

### 2.4 仓库配置

**用户操作：**
1. 配置仓库信息
2. 设置库区和库位
3. 配置仓库属性

**核心功能：**
- ✅ 仓库基础管理
- ✅ 库位管理
- ✅ 仓库属性配置

---

### 2.5 供应链主数据配置

**用户操作：**
1. 批量导入供应商信息
2. 批量导入客户信息
3. 配置供应商-物料供应关系

**核心功能：**
- ✅ 供应商基础信息
- ✅ 客户基础信息
- ✅ 供应关系配置

---

### 2.6 期初数据导入

**用户操作：**
1. 导入期初库存
2. 导入在制品数据
3. 导入应收应付数据

**核心功能：**
- ✅ 库存数据导入
- ✅ 在制品数据导入
- ✅ 财务数据导入

---

## 3. MTS模式业务流程（按库存生产）

### 3.1 需求管理阶段

**用户操作：**
1. 创建销售预测
2. 设置预测期间和数量
3. 提交销售预测

**核心功能：**
- ✅ 销售预测创建
- ✅ 时间序列管理
- ✅ 预测数据存储

---

### 3.2 MRP运算阶段

**用户操作：**
1. 选择销售预测数据
2. 执行MRP运算
3. 查看运算结果（工单建议、采购建议）

**核心功能：**
- ✅ MRP计算引擎
- ✅ 物料需求计算
- ✅ 采购建议生成
- ✅ 工单建议生成

---

### 3.3 采购订单管理阶段

**用户操作：**
1. 查看MRP生成的采购建议
2. 确认采购需求
3. 创建采购订单
4. 提交订单审批

**核心功能：**
- ✅ 采购订单创建
- ✅ 供应商关联
- ✅ 审批流程基础

---

### 3.4 工单创建阶段

**用户操作：**
1. 根据MRP结果创建工单
2. 选择产品和数量
3. 设置生产参数
4. 提交工单

**核心功能：**
- ✅ 工单基础信息
- ✅ 产品关联
- ✅ 生产参数设置

---

### 3.5 工单下达阶段

**用户操作：**
1. 选择已创建的工单
2. 执行下达操作
3. 工单状态更新为"已下达"

**核心功能：**
- ✅ 工单状态管理
- ✅ 下达操作处理

---

### 3.6 生产领料阶段

**用户操作：**
1. 选择待领料工单
2. 查看BOM物料需求
3. 执行领料操作
4. 更新库存

**核心功能：**
- ✅ BOM物料展开
- ✅ 领料单创建
- ✅ 库存扣减

---

### 3.7 报工阶段

**用户操作：**
1. 选择工单和工序
2. 输入报工数据（数量、工时等）
3. 提交报工记录

**核心功能：**
- ✅ 报工记录创建
- ✅ 工序进度更新
- ✅ 工单状态更新

---

### 3.8 成品入库阶段

**用户操作：**
1. 选择完工工单
2. 创建成品入库单
3. 确认入库数量和质量
4. 执行入库操作

**核心功能：**
- ✅ 入库单创建
- ✅ 库存增加
- ✅ 工单完工处理

---

### 3.9 销售出库阶段

**用户操作：**
1. 根据销售订单创建出库单
2. 选择出库物料和数量
3. 执行出库操作

**核心功能：**
- ✅ 出库单创建
- ✅ 库存扣减
- ✅ 销售订单关联

---

## 4. MTO模式业务流程（按订单生产）

### 4.1 需求管理阶段

**用户操作：**
1. 创建销售订单
2. 设置订单明细（产品、数量、交货期）
3. 提交订单

**核心功能：**
- ✅ 销售订单创建
- ✅ 订单明细管理
- ✅ 交货期管理

---

### 4.2 LRP运算阶段

**用户操作：**
1. 选择销售订单
2. 执行LRP运算
3. 查看运算结果

**核心功能：**
- ✅ LRP计算引擎
- ✅ 订单专属需求计算

---

### 4.3 采购订单管理阶段（订单专属）

**用户操作：**
1. 查看LRP生成的采购建议
2. 创建订单专属采购订单
3. 关联销售订单

**核心功能：**
- ✅ 订单专属采购
- ✅ 销售订单关联

---

### 4.4 工单创建阶段（关联订单）

**用户操作：**
1. 根据LRP结果创建工单
2. 关联销售订单
3. 设置生产参数

**核心功能：**
- ✅ 订单关联工单
- ✅ MTO模式标识

---

### 4.5 工单下达阶段

**核心功能：**
- ✅ MTO工单下达

---

### 4.6 生产领料阶段（订单专属库存）

**核心功能：**
- ✅ 订单专属领料
- ✅ 专属库存管理

---

### 4.7 报工阶段

**核心功能：**
- ✅ MTO报工管理

---

### 4.8 成品入库阶段（订单专属库存）

**核心功能：**
- ✅ 订单专属入库
- ✅ 专属库存标识

---

### 4.9 销售出库阶段（关联订单）

**核心功能：**
- ✅ 订单关联出库
- ✅ 专属库存释放

---

## 5. 质量管理基础流程

### 5.1 来料检验

**用户操作：**
1. 创建来料检验单
2. 关联采购单
3. 执行检验操作
4. 记录检验结果

**核心功能：**
- ✅ 检验单创建
- ✅ 合格/不合格判定
- ✅ 检验结果记录

---

### 5.2 过程检验

**用户操作：**
1. 创建过程检验单
2. 关联工单和工序
3. 执行检验
4. 记录结果

**核心功能：**
- ✅ 过程质量控制
- ✅ 检验数据记录

---

### 5.3 成品检验

**用户操作：**
1. 创建成品检验单
2. 执行最终检验
3. 记录检验结果

**核心功能：**
- ✅ 成品质量把关
- ✅ 出厂质量控制

---

## 6. 财务协同基础流程

### 6.1 应付管理

**用户操作：**
1. 查看采购入库后自动生成的应付单
2. 记录付款信息
3. 更新应付单状态

**核心功能：**
- ✅ 应付单自动生成
- ✅ 付款记录管理
- ✅ 状态更新

---

### 6.2 采购发票管理

**用户操作：**
1. 创建采购发票
2. 关联采购单和应付单
3. 审核发票
4. 更新应付单

**核心功能：**
- ✅ 发票管理
- ✅ 应付核销

---

### 6.3 应收管理

**用户操作：**
1. 查看销售出库后自动生成的应收单
2. 记录收款信息
3. 更新应收单状态

**核心功能：**
- ✅ 应收单自动生成
- ✅ 收款记录管理

---

## 📋 开发状态总览

### ✅ 已完成的核心功能
- **系统初始化**：注册、登录、初始化向导
- **基础数据配置**：组织架构、工厂建模、物料管理、仓库配置、供应链管理
- **工单管理**：工单创建、下达、基础管理功能
- **报工管理**：报工记录创建、工序进度更新
- **采购管理**：采购订单创建、审批基础流程

### 🚧 第一阶段重点实现
- **仓储管理**：出入库单据、库存事务处理
- **质量管理**：检验单据、质量控制流程
- **财务协同**：应付应收单据、发票管理

### ⏸️ 第二阶段暂缓内容
- **优化体验类**：一键操作、批量操作、触屏优化
- **AI增强类**：智能预测、智能建议、异常分析
- **高级报表类**：统计分析报表、绩效分析
- **高级功能**：返工单、工单拆分、委外管理等

---

**开发原则：** 优先实现核心单据业务流程，确保业务数据完整流转，为企业提供可用的基础功能，再逐步添加优化体验和高级功能。
