# RiverEdge SaaS 工作台设计规划

## 📋 概述

工作台（Dashboard）是用户登录系统后的首屏，需要提供最实用、最贴合实际业务场景的功能入口和数据展示。本文档详细规划工作台的设计方案，确保符合 Ant Design 设计规范和项目 VI 规范，同时增强设计感和用户体验。

**创建日期**：2026-01-21  
**设计目标**：打造一个实用、美观、高效的工作台首屏

---

## 🎯 设计目标

### 核心目标
1. **实用性优先**：展示用户最常用的功能和最关心的数据
2. **信息密度适中**：重要信息一目了然，避免信息过载
3. **视觉层次清晰**：通过设计引导用户关注重点
4. **响应式适配**：支持不同屏幕尺寸，移动端友好
5. **个性化定制**：支持用户自定义快捷入口和卡片布局

### 设计原则
- **80/20 原则**：80% 的用户使用 20% 的功能，优先展示高频功能
- **渐进式披露**：重要信息优先展示，详细信息按需展开
- **一致性**：遵循 Ant Design 和项目 VI 规范
- **可访问性**：符合 WCAG 2.1 无障碍设计标准

---

## 👥 用户角色分析

### 1. 普通用户（生产执行人员）
**使用场景**：
- 查看今日工单任务
- 快速报工
- 查看异常提醒
- 查看个人工作统计

**关注重点**：
- 待处理工单数量
- 今日生产任务
- 异常提醒（缺料、延期、质量）
- 个人工作完成情况

### 2. 组织管理员（生产主管/经理）
**使用场景**：
- 查看整体生产进度
- 监控异常情况
- 审核待办事项
- 查看关键指标

**关注重点**：
- 生产完成率
- 异常统计
- 待审核单据
- 库存预警
- 质量合格率

### 3. 平台管理员（系统管理员）
**使用场景**：
- 系统监控
- 用户管理
- 应用配置
- 数据统计

**关注重点**：
- 系统运行状态
- 用户活跃度
- 应用使用情况
- 平台级统计数据

---

## 📐 布局设计

### 整体布局结构

```
┌─────────────────────────────────────────────────────────────┐
│  欢迎区域 (Welcome Banner)                                    │
│  - 用户信息、问候语、日期时间                                 │
│  - 快捷操作按钮（新建工单、快速报工等）                       │
└─────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────┐
│  核心数据看板 (Key Metrics)                                  │
│  ┌──────────┐ ┌──────────┐ ┌──────────┐ ┌──────────┐       │
│  │ 今日生产  │ │ 工单完成率│ │ 库存预警  │ │ 质量合格率│       │
│  └──────────┘ └──────────┘ └──────────┘ └──────────┘       │
└─────────────────────────────────────────────────────────────┘

┌──────────────────────────────┬──────────────────────────────┐
│  左侧主区域 (16列)           │  右侧辅助区域 (8列)           │
│                              │                              │
│  ┌────────────────────────┐  │  ┌────────────────────────┐  │
│  │ 待办事项 (TODOs)       │  │  │ 快捷入口 (Quick Links) │  │
│  │ - 待处理工单           │  │  │ - 工单管理             │  │
│  │ - 待审核单据           │  │  │ - 库存管理             │  │
│  │ - 异常提醒             │  │  │ - 质量管理             │  │
│  └────────────────────────┘  │  │ - 报表分析             │  │
│                              │  └────────────────────────┘  │
│  ┌────────────────────────┐  │                              │
│  │ 生产进度 (Progress)    │  │  ┌────────────────────────┐  │
│  │ - 今日工单列表         │  │  │ 消息通知 (Notifications)│  │
│  │ - 生产进度图表         │  │  │ - 系统通知             │  │
│  └────────────────────────┘  │  │ - 业务提醒             │  │
│                              │  └────────────────────────┘  │
│  ┌────────────────────────┐  │                              │
│  │ 数据图表 (Charts)       │  │  ┌────────────────────────┐  │
│  │ - 生产趋势图           │  │  │ 最近访问 (Recent)       │  │
│  │ - 质量分析图           │  │  │ - 最近访问的页面       │  │
│  └────────────────────────┘  │  └────────────────────────┘  │
└──────────────────────────────┴──────────────────────────────┘
```

### 响应式布局

**桌面端（≥1200px）**：
- 24 列栅格系统
- 左侧 16 列，右侧 8 列
- 卡片间距：24px

**平板端（768px - 1199px）**：
- 左侧 24 列（全宽）
- 右侧 24 列（全宽，下方显示）
- 卡片间距：16px

**移动端（<768px）**：
- 单列布局
- 卡片堆叠显示
- 卡片间距：12px

---

## 🎨 视觉设计

### 颜色方案

**主色调**：
- 主色：`#1890ff`（Ant Design 蓝色）
- 成功色：`#52c41a`（生产完成、正常状态）
- 警告色：`#faad14`（需要关注、预警）
- 错误色：`#ff4d4f`（异常、紧急）

**数据卡片配色**：
```typescript
const metricColors = {
  primary: '#1890ff',      // 主要指标
  success: '#52c41a',      // 正向指标
  warning: '#faad14',      // 预警指标
  error: '#ff4d4f',        // 异常指标
  info: '#13c2c2',         // 信息指标
};
```

### 卡片设计

**标准卡片**：
- 圆角：`6px`
- 阴影：`0 2px 8px rgba(0, 0, 0, 0.15)`
- 内边距：`24px`
- 背景：`#ffffff`
- 悬停效果：轻微阴影加深，轻微上浮

**数据卡片**：
- 渐变背景（可选）：从主色到浅色的渐变
- 图标：左侧大图标（48px × 48px）
- 数值：大号字体（32px，粗体）
- 标题：小号字体（14px，次要色）

### 图标系统

**图标库**：
- 主要使用：`@ant-design/icons`
- 辅助使用：`lucide-react`（制造行业专用图标）

**图标尺寸**：
- 快捷操作：`32px`
- 数据卡片：`48px`
- 待办事项：`16px`
- 快捷入口：`24px`

---

## 📊 功能模块设计

### 1. 欢迎区域 (Welcome Banner)

**位置**：页面顶部，全宽

**内容**：
- **用户信息**：
  - 用户头像（64px × 64px，圆形）
  - 用户名称 + 角色标签
  - 组织名称（如果有）
- **问候语**：
  - 根据时间显示：早上好、下午好、晚上好
  - 个性化问候：如"欢迎回来，张三"
- **日期时间**：
  - 当前日期（YYYY年MM月DD日 星期X）
  - 当前时间（HH:mm:ss，实时更新）
- **快捷操作按钮**：
  - 新建工单（主要按钮）
  - 快速报工（主要按钮）
  - 创建需求（次要按钮）
  - 更多操作（下拉菜单）

**设计要点**：
- 使用渐变背景（从主色到浅色）
- 左侧用户信息，右侧快捷操作
- 响应式：移动端堆叠显示

**代码结构**：
```tsx
<Card className="welcome-banner">
  <Row align="middle" justify="space-between">
    <Col>
      <Space size="large">
        <Avatar size={64} />
        <div>
          <Title level={4}>早上好，张三</Title>
          <Text type="secondary">今天是 2026年01月21日 星期二</Text>
        </div>
      </Space>
    </Col>
    <Col>
      <Space>
        <Button type="primary" size="large">新建工单</Button>
        <Button type="primary" size="large">快速报工</Button>
        <Button>更多操作</Button>
      </Space>
    </Col>
  </Row>
</Card>
```

---

### 2. 核心数据看板 (Key Metrics)

**位置**：欢迎区域下方，全宽

**数据卡片**（4个核心指标）：

#### 2.1 今日生产
- **图标**：`PlayCircleOutlined`（蓝色）
- **数值**：今日完成数量（如：125 件）
- **变化**：相比昨日（+15% ↑）
- **点击**：跳转到生产报表

#### 2.2 工单完成率
- **图标**：`CheckCircleOutlined`（绿色）
- **数值**：完成率百分比（如：85%）
- **进度条**：可视化完成进度
- **点击**：跳转到工单列表

#### 2.3 库存预警
- **图标**：`WarningOutlined`（橙色）
- **数值**：预警数量（如：8 项）
- **状态**：需要关注
- **点击**：跳转到库存预警列表

#### 2.4 质量合格率
- **图标**：`SafetyOutlined`（绿色/红色）
- **数值**：合格率百分比（如：98.5%）
- **趋势**：相比上期（+0.5% ↑）
- **点击**：跳转到质量报表

**设计要点**：
- 卡片等宽（每列 6 格，共 24 格）
- 大号数值，清晰易读
- 使用颜色区分状态（正常/预警/异常）
- 支持趋势指示（上升/下降箭头）

**响应式**：
- 桌面端：4 列（每列 6 格）
- 平板端：2 列（每列 12 格）
- 移动端：1 列（每列 24 格）

---

### 3. 待办事项 (TODOs)

**位置**：左侧主区域，16 列

**内容结构**：

#### 3.1 待处理工单
- **数量**：待处理工单数量（Badge 显示）
- **列表**：显示前 5 条工单
  - 工单编码
  - 产品名称
  - 计划完成时间
  - 优先级标签
- **操作**：点击跳转到工单详情
- **更多**：查看全部工单

#### 3.2 待审核单据
- **数量**：待审核单据数量
- **类型**：销售订单、采购订单、出库单等
- **列表**：显示前 5 条待审核单据
- **操作**：点击跳转到审核页面

#### 3.3 异常提醒
- **缺料异常**：数量 + 列表（前 3 条）
- **延期异常**：数量 + 列表（前 3 条）
- **质量异常**：数量 + 列表（前 3 条）
- **操作**：点击跳转到异常详情

**设计要点**：
- 使用 Tab 或折叠面板组织不同类型待办
- 优先级用颜色标签区分（高/中/低）
- 支持快速操作（处理/忽略）
- 实时更新（30 秒轮询）

---

### 4. 生产进度 (Production Progress)

**位置**：左侧主区域，16 列，待办事项下方

**内容**：

#### 4.1 今日工单列表
- **表格**：显示今日所有工单
  - 工单编码
  - 产品名称
  - 计划数量
  - 完成数量
  - 完成进度（进度条）
  - 状态标签
- **操作**：点击跳转到工单详情

#### 4.2 生产进度图表
- **图表类型**：折线图或柱状图
- **数据**：最近 7 天的生产完成情况
- **交互**：支持时间范围选择（今日/本周/本月）

**设计要点**：
- 使用 Recharts 或 ECharts 渲染图表
- 图表高度：300px
- 支持数据钻取（点击查看详情）

---

### 5. 数据图表 (Data Charts)

**位置**：左侧主区域，16 列，生产进度下方

**内容**：

#### 5.1 生产趋势图
- **图表类型**：折线图
- **数据**：最近 30 天的生产趋势
- **指标**：完成数量、合格率

#### 5.2 质量分析图
- **图表类型**：饼图或柱状图
- **数据**：质量异常分类统计
- **指标**：合格率、不良品分类

**设计要点**：
- 使用卡片容器，每个图表独立卡片
- 支持图表类型切换（折线图/柱状图/饼图）
- 支持时间范围选择
- 响应式：移动端图表简化显示

---

### 6. 快捷入口 (Quick Links)

**位置**：右侧辅助区域，8 列

**内容**：
- **工单管理**：跳转到工单列表
- **库存管理**：跳转到库存列表
- **质量管理**：跳转到质检列表
- **报表分析**：跳转到报表中心
- **设备管理**：跳转到设备列表
- **计划管理**：跳转到计划列表

**设计要点**：
- 图标化展示（大图标 + 文字）
- 2 列网格布局（每项 12 格）
- 支持用户自定义（拖拽排序、添加/删除）
- 显示最近访问标记

---

### 7. 消息通知 (Notifications)

**位置**：右侧辅助区域，8 列，快捷入口下方

**内容**：
- **系统通知**：
  - 系统维护通知
  - 功能更新通知
  - 安全提醒
- **业务提醒**：
  - 工单完成提醒
  - 异常处理提醒
  - 审核待办提醒

**设计要点**：
- 显示未读数量（Badge）
- 列表显示最近 5 条通知
- 支持标记已读
- 点击跳转到通知详情或相关页面

---

### 8. 最近访问 (Recent)

**位置**：右侧辅助区域，8 列，消息通知下方

**内容**：
- 显示最近访问的页面（最多 8 条）
- 按访问时间倒序排列
- 支持快速跳转

**设计要点**：
- 图标 + 页面名称
- 显示访问时间
- 支持清除历史记录

---

## 🔧 技术实现

### 前端技术栈

**组件库**：
- Ant Design 5.x
- Ant Design Pro Components（ProCard、ProDescriptions 等）

**图表库**：
- Recharts（推荐，与 Ant Design 兼容性好）
- 或 ECharts（功能更强大）

**状态管理**：
- React Query（数据获取和缓存）
- Zustand（全局状态，如用户偏好）

**工具库**：
- dayjs（日期处理）
- lodash（工具函数）

### 后端 API 设计

**API 端点**：

```python
# 工作台数据汇总
GET /api/v1/apps/kuaizhizao/dashboard
- 返回：待办事项 + 统计数据

# 待办事项
GET /api/v1/apps/kuaizhizao/dashboard/todos?limit=20
- 返回：待办事项列表

# 统计数据
GET /api/v1/apps/kuaizhizao/dashboard/statistics
- 返回：生产、库存、质量统计数据

# 生产进度
GET /api/v1/apps/kuaizhizao/dashboard/production-progress?date=2026-01-21
- 返回：今日工单列表和进度数据

# 趋势数据
GET /api/v1/apps/kuaizhizao/dashboard/trends?type=production&days=30
- 返回：生产趋势数据

# 用户偏好
GET /api/v1/core/user-preferences
POST /api/v1/core/user-preferences
- 获取/保存用户工作台配置
```

### 数据缓存策略

**缓存时间**：
- 统计数据：60 秒（实时性要求高）
- 待办事项：30 秒（需要及时更新）
- 趋势数据：5 分钟（变化较慢）
- 用户偏好：永久缓存（除非用户修改）

**刷新策略**：
- 页面聚焦时自动刷新
- 支持手动刷新按钮
- 后台定时刷新（使用 React Query 的 `refetchInterval`）

---

## 🎨 设计增强

### 1. 微交互

**悬停效果**：
- 卡片轻微上浮（`transform: translateY(-2px)`）
- 阴影加深（`box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15)`）
- 图标轻微放大（`transform: scale(1.1)`）

**加载状态**：
- 骨架屏（Skeleton）替代 Loading 图标
- 数据渐入动画（`fadeIn`）

**点击反馈**：
- 按钮点击波纹效果（Ant Design 内置）
- 卡片点击轻微缩放（`transform: scale(0.98)`）

### 2. 动画效果

**页面进入**：
- 卡片依次淡入（`stagger` 动画）
- 数据数值计数动画（从 0 到目标值）

**数据更新**：
- 数值变化高亮（短暂闪烁）
- 图表平滑过渡（`transition`）

### 3. 视觉层次

**信息层级**：
1. **一级信息**（最重要）：
   - 核心数据看板（大号字体、醒目颜色）
   - 待办事项（Badge 提示）
2. **二级信息**（重要）：
   - 生产进度、数据图表
3. **三级信息**（辅助）：
   - 快捷入口、消息通知、最近访问

**视觉引导**：
- 使用颜色引导注意力（红色 = 紧急，橙色 = 预警）
- 使用大小区分重要性（大号 = 重要）
- 使用位置引导阅读顺序（上 = 重要，下 = 次要）

---

## 📱 响应式设计

### 桌面端（≥1200px）
- 24 列栅格，左右分栏布局
- 卡片间距：24px
- 字体大小：正常（14px）

### 平板端（768px - 1199px）
- 24 列栅格，上下堆叠布局
- 卡片间距：16px
- 字体大小：正常（14px）

### 移动端（<768px）
- 单列布局
- 卡片间距：12px
- 字体大小：略小（13px）
- 隐藏次要信息（如图表详情）
- 快捷操作改为底部固定栏

---

## ⚙️ 个性化定制

### 用户偏好设置

**可定制项**：
1. **快捷操作**：
   - 添加/删除快捷操作按钮
   - 拖拽排序
2. **数据卡片**：
   - 显示/隐藏特定指标
   - 调整卡片顺序
3. **图表配置**：
   - 选择显示的图表类型
   - 设置时间范围默认值
4. **布局配置**：
   - 选择布局模式（紧凑/舒适）
   - 调整卡片大小

**存储方式**：
- 后端：用户偏好表（`core_user_preferences`）
- 前端：React Query 缓存 + Zustand 状态

---

## 🚀 实施计划

### 阶段一：基础功能（1-2 周）
- [ ] 欢迎区域
- [ ] 核心数据看板（4 个指标）
- [ ] 待办事项列表
- [ ] 基础 API 实现

### 阶段二：数据展示（1 周）
- [ ] 生产进度图表
- [ ] 趋势图表
- [ ] 数据刷新机制

### 阶段三：增强功能（1 周）
- [ ] 快捷入口
- [ ] 消息通知
- [ ] 最近访问
- [ ] 个性化定制

### 阶段四：优化完善（1 周）
- [ ] 响应式适配
- [ ] 动画效果
- [ ] 性能优化
- [ ] 用户体验测试

---

## 📝 设计规范检查清单

### 颜色规范
- [ ] 使用项目主色 `#1890ff`
- [ ] 语义色使用正确（成功/警告/错误）
- [ ] 文本颜色符合层级（标题/正文/次要）

### 字体规范
- [ ] 使用系统字体栈
- [ ] 字号符合规范（14px 基础字号）
- [ ] 字重使用正确（标题 600/700，正文 400）

### 间距规范
- [ ] 使用 8px 基础单位
- [ ] 卡片间距统一（24px/16px/12px）
- [ ] 内边距统一（24px）

### 组件规范
- [ ] 使用 Ant Design 标准组件
- [ ] 圆角统一（6px）
- [ ] 阴影统一（`0 2px 8px rgba(0, 0, 0, 0.15)`）

### 响应式规范
- [ ] 支持桌面端、平板端、移动端
- [ ] 断点使用正确（1200px/768px）
- [ ] 移动端体验优化

---

## 📚 参考资源

### 设计参考
- [Ant Design Pro 工作台](https://pro.ant.design/zh-CN/dashboard/workplace)
- [Ant Design 数据展示](https://ant.design/components/overview-cn/)
- [Recharts 示例](https://recharts.org/en-US/examples)

### 项目文档
- [品牌VI一致性规范](../2.rules/5.品牌VI一致性规范.md)
- [前端开发规范](../2.rules/前端开发规范.md)
- [API设计规范](../2.rules/6.API设计规范.md)

---

**最后更新**：2026-01-21  
**设计者**：Luigi Lu  
**状态**：规划中
