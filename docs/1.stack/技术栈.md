# RiverEdge SaaS 多组织框架 - 技术栈文档

## 📋 项目概述

**RiverEdge SaaS** 是一个多组织框架（SaaS平台），采用前后端分离架构，支持多租户模式，提供完整的应用管理、用户管理、权限控制等企业级功能。

## 🏗️ 架构模式

- **SaaS 多租户架构**: 支持多个组织/租户独立运营
- **微服务化设计**: 前后端分离，后端采用模块化架构（infra/core/apps）
- **插件化应用系统**: 支持动态加载和管理应用模块

## 🔧 技术栈详情

### 🎯 后端技术栈 (Backend)

#### 核心框架
- **Python**: 3.11+ (主流稳定版本)
- **FastAPI**: 0.115+ (高性能异步Web框架)
- **Uvicorn**: 0.32+ (ASGI服务器，支持热重载)

#### 数据库层
- **PostgreSQL**: 15+ (主数据库)
- **Tortoise ORM**: 0.21.1 (异步ORM，支持迁移)
- **Aerich**: 0.7.1+ (数据库迁移工具)
- **AsyncPG**: 0.29+ (PostgreSQL异步驱动)
- **Redis**: 6.x+ (缓存和会话存储)

#### 认证与安全
- **JWT**: python-jose[cryptography] (JSON Web Token)
- **密码加密**: passlib[bcrypt] (BCrypt哈希)
- **CORS**: FastAPI中间件 (跨域资源共享)

#### 工作流引擎
- **Inngest**: 0.3.0+ (事件驱动的工作流引擎)

#### 工具库
- **Pydantic**: 2.9+ (数据验证)
- **Loguru**: 0.7.3+ (日志管理)
- **HTTPX**: 0.27+ (异步HTTP客户端)
- **Psutil**: 5.9.8+ (系统资源监控)

#### 开发工具
- **依赖管理**: UV (现代Python包管理器)
- **代码质量**: Ruff (快速Python代码检查器)
- **格式化**: Black (代码格式化)
- **类型检查**: MyPy (静态类型检查)
- **测试**: Pytest + AsyncIO (异步测试)

### 🎨 前端技术栈 (Frontend)

#### 核心框架
- **React**: 18.3.1 (用户界面库)
- **TypeScript**: 5.6.3 (类型安全的JavaScript)
- **Vite**: 5.4.8 (现代前端构建工具)

#### UI组件库
- **Ant Design**: 6.1.0 (企业级UI组件库)
- **Ant Design Pro**: 2.8.2 (高级组件和布局)
- **Ant Design Charts**: 2.1.0 (图表组件)
- **Ant Design Icons**: 6.1.0 (图标库)

#### 状态管理
- **Zustand**: 5.0.0 (轻量级状态管理)
- **React Query**: 5.51.1 (服务器状态管理)

#### 表单处理
- **React Hook Form**: 7.53.0 (高性能表单库)
- **Formily**: 2.3.7 (动态表单引擎)

#### 工具库
- **Axios**: HTTP客户端 (通过React Query集成)
- **Day.js**: 1.11.13 (日期时间处理)
- **Lodash**: 4.17.21 (工具函数库)
- **Pinyin Pro**: 3.19.0 (中文拼音转换)

#### 国际化
- **React i18next**: 14.1.3 (国际化支持)
- **i18next**: 23.15.2 (国际化框架)

#### 样式处理
- **Less**: 4.4.2 (CSS预处理器)
- **Framer Motion**: 11.5.4 (动画库)

#### 电子表格
- **Univer**: 0.12.3 (现代化的电子表格和文档解决方案)

#### 开发工具
- **ESLint**: 9.11.1 (代码检查)
- **Prettier**: 3.3.3 (代码格式化)
- **Vitest**: 2.1.8 (单元测试)
- **Testing Library**: React + Jest DOM (组件测试)

### 🏛️ 基础设施 (Infrastructure)

#### 部署与运行
- **Bash脚本**: 自动化部署和启动脚本
- **环境变量**: 配置管理
- **进程管理**: 后台服务启动和管理

#### 监控与日志
- **健康检查**: /health 端点
- **日志轮转**: 自动清理过期日志
- **Swagger UI**: API文档 (/docs)

#### 文件处理
- **文件上传**: 支持多种文件格式
- **静态资源**: 托管静态文件

### 🔄 开发工具链

#### 版本控制
- **Git**: 分布式版本控制
- **Git Flow**: 分支管理策略

#### 代码质量
- **统一命名规范**: 项目编码标准
- **注释规范**: 代码注释标准
- **错误处理规范**: 异常处理标准
- **Git工作流规范**: 开发流程标准

#### 构建部署
- **依赖锁定**: uv.lock (后端), package-lock.json (前端)
- **一键启动**: Launch.sh 脚本
- **环境隔离**: 虚拟环境管理

## 🌟 技术亮点

### 架构优势
1. **多租户支持**: 完整的SaaS多租户架构
2. **模块化设计**: infra(基础设施)/core(核心)/apps(应用)三层架构
3. **插件化系统**: 动态应用加载和管理
4. **异步架构**: 全异步处理，高并发支持

### 开发体验
1. **现代化工具链**: UV、Vite等现代开发工具
2. **类型安全**: TypeScript + MyPy 双重类型检查
3. **代码质量**: 多层次代码质量保证
4. **热重载**: 开发时热重载支持

### 生产就绪
1. **高性能**: FastAPI异步框架 + PostgreSQL
2. **可扩展**: 插件化架构，易于扩展
3. **可监控**: 完整的监控和日志系统
4. **易部署**: 一键启动脚本，自动化部署

## 📈 技术选型理由

### 后端技术选型
- **FastAPI**: 高性能异步框架，自动生成API文档
- **Tortoise ORM**: 异步ORM，适合高并发场景
- **PostgreSQL**: 企业级关系数据库，支持复杂查询
- **UV**: 现代Python包管理器，更快更安全

### 前端技术选型
- **React**: 组件化开发，生态成熟
- **TypeScript**: 类型安全，提高代码质量
- **Vite**: 快速构建，优秀的开发体验
- **Ant Design**: 企业级组件库，一致性好

### 架构决策
- **SaaS模式**: 支持多租户，企业级应用需求
- **前后端分离**: 技术栈解耦，独立演进
- **插件化**: 业务模块独立，便于维护和扩展

---

*最后更新: 2025年12月26日*
