# RiverEdge SaaS 多租户框架 - 开发计划

## 📋 项目概述

**RiverEdge SaaS 多租户框架 (RiverEdge SaaS Multi-tenant Framework)** 是一套基于插件化架构的 SaaS 多租户管理框架，采用前后端分离设计，支持动态加载应用插件。

## 🎯 项目目标

1. **核心目标**: 构建可扩展的 SaaS 多租户管理框架
2. **技术目标**: 采用 Python + FastAPI + React + Umi + Ant Design 技术栈
3. **业务目标**: 支持多租户数据隔离、插件化扩展、快速定制

## 🔑 开发顺序原则

**重要原则：租户优先（Tenant-First）**

根据 SaaS 多租户系统最佳实践，本框架采用**租户优先**的开发顺序：

1. **租户系统必须在用户系统之前开发**
   - Week 2: 租户系统核心（优先开发）
   - Week 4: 用户系统和认证授权（在租户系统之后）

2. **所有数据模型从一开始就包含租户隔离**
   - Week 1: BaseModel 必须包含 `tenant_id` 字段
   - 所有后续模型继承 BaseModel，自动获得租户隔离能力

3. **确保所有功能都支持多租户**
   - 所有查询自动过滤租户
   - JWT Token 包含租户信息
   - API 请求自动验证租户权限

**为什么租户优先？**
- ✅ 避免后期重构：从一开始就建立多租户架构，避免后期大规模重构
- ✅ 数据隔离安全：确保所有数据从一开始就正确隔离，防止数据泄露
- ✅ 开发效率高：后续功能开发时，租户隔离已经就绪，无需额外考虑
- ✅ 测试覆盖完整：多租户测试从一开始就纳入测试范围

> **详细说明**：功能实施优先级和详细功能列表请参考：[3.框架功能列表.md](./3.框架功能列表.md)

## 📅 总体时间规划

**预计总工期**: 12-16 周（根据团队规模调整）

**开发阶段**（基于 [3.框架功能列表.md](./3.框架功能列表.md) 的功能实施优先级）：

- **Phase 1: 核心基础功能** (3-4周) - 对应功能列表第一阶段
  - Week 1: 后端核心框架（**BaseModel 包含 tenant_id**）
  - Week 2: 租户系统核心 ⭐ **租户优先**
  - Week 3: 前端基础框架
  - Week 4: 用户系统和认证授权（**带租户隔离**）
- **Phase 2: 多租户完善和用户管理** (2-3周) - 对应功能列表第一阶段（完善）
  - Week 5: 用户管理功能（**自动租户过滤**）
  - Week 6: 多租户前端和注册流程
- **Phase 3: 插件系统开发** (3-4周) - 对应功能列表第一阶段（插件系统完整版）
- **Phase 4: 基础管理模块完善** (2-3周) - 对应功能列表第二、三阶段
  - Week 10: 系统设置和插件管理完善
  - Week 11: 表单自定义字段和打印模板
- **Phase 5: 高级功能与优化** (2-3周) - 对应功能列表第三阶段（完善）
  - Week 12: 国际化、主题和性能优化
  - Week 13: 测试和文档
  - Week 14: 部署和上线准备

## Phase 1: 核心基础功能 (3-4周)

> **对应功能列表第一阶段**：多租户系统、用户认证与授权、查询增强组件、统一响应封装、操作日志、文件上传与管理、插件系统（基础版）

### Week 1: 后端核心框架搭建

**目标**: 搭建后端基础框架，实现核心基础设施

**对应功能**：
- 统一响应封装 ⭐⭐⭐⭐⭐
- 查询增强组件 ⭐⭐⭐⭐⭐（基础版）
- 插件系统 ⭐⭐⭐⭐⭐（基础版）

#### 任务清单

**Day 1-2: 项目初始化**
- [x] 创建 `riveredge-core` 项目
  - [x] 初始化 Python 3.13+ 项目
  - [x] 配置 FastAPI 项目结构
  - [x] 配置 `requirements.txt` 依赖
  - [x] 配置 `pydantic-settings` 环境变量管理
  - [x] 配置 `loguru` 日志系统
  - [x] 配置项目目录结构（参考架构文档）

- [x] 配置数据库连接
  - [x] 安装 PostgreSQL 15+（已手动安装）
  - [x] 配置 Tortoise ORM 连接
  - [x] 配置数据库连接池（Tortoise ORM 自动管理）
  - [x] 编写数据库连接测试（已创建，需要安装 asyncpg）

- [x] 配置 Redis 缓存
  - [x] 安装 Redis 7.2+（已手动安装）
  - [x] 配置 Redis 异步客户端（使用 redis.asyncio，兼容 Python 3.13）
  - [x] 编写缓存工具类
  - [x] 配置缓存连接池（redis 自动管理）
  - [x] 编写 Redis 连接测试（✅ 测试通过）

**Day 3-4: 核心基础设施**
- [x] 实现数据库模型基类
  - [x] 创建 `BaseModel` (Tortoise ORM)
  - [x] 实现通用字段（id, created_at, updated_at）
  - [x] **实现租户隔离字段（tenant_id）** ⭐ 关键：多租户系统必须从一开始就包含
  - [x] 配置模型元数据

- [x] 实现数据库迁移系统
  - [x] 配置 Aerich 0.7+（已在 requirements.txt 中）
  - [x] 初始化迁移目录（✅ 已运行 `aerich init`）
  - [x] 初始化数据库（✅ 已运行 `aerich init-db`）
  - [ ] 编写迁移脚本模板（后续添加）
  - [ ] 测试迁移功能（后续添加）

- [x] 实现核心配置管理
  - [x] 使用 `pydantic-settings` 管理配置
  - [x] 配置数据库连接字符串
  - [x] 配置 Redis 连接字符串
  - [x] 配置 JWT 密钥和过期时间
  - [x] 配置 CORS 跨域设置

**Day 5: FastAPI 应用框架**
- [x] 创建 FastAPI 应用入口
  - [x] 创建 `app/main.py`
  - [x] 配置 FastAPI 应用实例
  - [x] 配置中间件（CORS、异常处理）
  - [x] 配置路由注册机制

- [x] 实现依赖注入系统
  - [x] 创建 `app/dependencies.py`
  - [x] 实现数据库依赖注入（通过 register_tortoise）
  - [x] 实现当前用户依赖注入（占位）
  - [x] 实现权限验证依赖（占位）

- [x] 配置 API 文档
  - [x] 配置 Swagger UI
  - [x] 配置 ReDoc
  - [ ] 测试 API 文档访问（需要运行服务后测试）

#### 交付物
- ✅ 可运行的后端服务（基础框架）
- ✅ 数据库连接和迁移系统
- ✅ Redis 缓存连接
- ✅ FastAPI 应用框架
- ✅ API 文档可访问

---

### Week 2: 租户系统核心 ⭐ 调整：租户系统优先

**目标**: 实现多租户系统的核心机制（租户模型、数据隔离、租户上下文）

**对应功能**：
- 多租户系统 ⭐⭐⭐⭐⭐

> **重要说明**：根据 SaaS 多租户系统最佳实践，**租户系统应该在用户系统之前开发**，确保所有数据模型从一开始就包含租户隔离。

#### 任务清单

**Day 1-2: 租户模型和上下文管理**
- [ ] 实现租户模型
  - [ ] 创建 `models/tenant.py`（租户模型，继承 BaseModel）
  - [ ] 定义租户字段（name, domain, status, plan, settings 等）
  - [ ] 实现租户状态枚举（active, inactive, expired）
  - [ ] 实现租户套餐枚举（basic, professional, enterprise）
  - [ ] 创建数据库迁移脚本

- [ ] 实现租户上下文管理
  - [ ] 创建 `core/tenant_context.py`
  - [ ] 实现租户 ID 获取函数（使用 ContextVar）
  - [ ] 实现租户 ID 设置函数
  - [ ] 实现租户上下文中间件（从 JWT Token 或请求头提取租户 ID）

- [ ] 实现租户配置模型
  - [ ] 创建 `models/tenant_config.py`（租户配置模型）
  - [ ] 使用 PostgreSQL JSONB 存储配置
  - [ ] 实现配置 Schema（Pydantic）

**Day 3-4: 数据隔离机制**
- [ ] 实现查询过滤器基类
  - [ ] 创建 `core/query_filter.py`
  - [ ] 实现自动添加租户过滤条件的查询集
  - [ ] 实现 Tortoise ORM 查询钩子
  - [ ] 实现超级管理员特殊处理（可跨租户访问）

- [ ] 配置 PostgreSQL 行级安全（RLS）
  - [ ] 启用 RLS 策略
  - [ ] 创建租户隔离策略
  - [ ] 测试 RLS 数据隔离效果

- [ ] 实现数据隔离测试
  - [ ] 创建租户数据隔离测试用例
  - [ ] 测试跨租户数据访问防护
  - [ ] 测试超级管理员跨租户访问

**Day 5: 租户管理 API（基础版）**
- [ ] 实现租户管理 API
  - [ ] 创建 `api/v1/tenants.py`
  - [ ] 实现租户列表查询接口（超级管理员）
  - [ ] 实现租户创建接口
  - [ ] 实现租户详情查询接口
  - [ ] 实现租户更新接口
  - [ ] 实现租户状态切换接口

- [ ] 实现租户服务
  - [ ] 创建 `services/tenant_service.py`
  - [ ] 实现租户 CRUD 方法
  - [ ] 实现租户配置管理方法
  - [ ] 实现租户数据初始化方法（占位，后续完善）

#### 交付物
- ✅ 租户数据模型
- ✅ 租户上下文管理机制
- ✅ 数据隔离机制（应用层 + 数据库层）
- ✅ 租户管理 API（基础版）
- ✅ 数据隔离测试通过

---

### Week 3: 前端基础框架搭建

**目标**: 搭建前端主框架，实现基础布局和路由

#### 任务清单

**Day 1-2: 项目初始化**
- [ ] 创建 `riveredge-shell` 项目
  - [ ] 使用 `npm create umi@latest` 创建 Umi V4 项目
  - [ ] 选择 `@umijs/max` 版本（包含所有插件）
  - [ ] 启用 TypeScript
  - [ ] 启用 Ant Design Pro 模板
  - [ ] 启用国际化插件
  - [ ] 启用权限插件

- [ ] 安装核心依赖
  - [ ] 安装 `antd@^6.0.0`
  - [ ] 安装 `@ant-design/pro-components@^2.0.0`
  - [ ] 安装 `@ant-design/icons@^6.0.0`
  - [ ] 安装 `@ant-design/charts@^2.0.0`
  - [ ] 安装 `@formily/core@^2.3.0` + `@formily/react@^2.3.0` + `@formily/antd-v5@^2.3.0`
  - [ ] 安装 `react-to-print@^2.15.0` + `jspdf@^2.5.0` + `html2canvas@^1.4.0`
  - [ ] 安装 `dayjs@^1.11.0` + `lodash-es@^4.17.21`

- [ ] 配置项目结构
  - [ ] 创建 `src/pages` 目录
  - [ ] 创建 `src/components` 目录
  - [ ] 创建 `src/services` 目录
  - [ ] 创建 `src/models` 目录
  - [ ] 创建 `src/utils` 目录
  - [ ] 创建 `src/locales` 目录

**Day 3: 基础布局和路由**
- [ ] 实现基础布局组件
  - [ ] 配置 `ProLayout` 布局组件
  - [ ] 实现顶部导航栏
  - [ ] 实现侧边栏菜单
  - [ ] 实现主内容区域
  - [ ] 实现响应式设计

- [ ] 配置路由系统
  - [ ] 配置 `.umirc.ts` 路由
  - [ ] 实现路由懒加载
  - [ ] 实现 404 页面
  - [ ] 实现路由权限守卫（使用 `@umijs/plugin-access`）

- [ ] 实现状态管理
  - [ ] 创建 `models/user.ts`（Umi Model）
  - [ ] 实现用户信息状态管理
  - [ ] 实现权限信息状态管理
  - [ ] 实现主题配置管理

**Day 4: API 客户端和工具**
- [ ] 配置 Umi Request
  - [ ] 配置请求拦截器（Token 注入）
  - [ ] 配置响应拦截器（错误处理、Token 刷新）
  - [ ] 配置请求错误处理
  - [ ] 配置 loading 状态管理

- [ ] 创建 API 服务
  - [ ] 创建 `services/api.ts`（API 基础配置）
  - [ ] 创建 `services/auth.ts`（认证 API）
  - [ ] 创建 `services/user.ts`（用户 API）
  - [ ] 实现 TypeScript 类型定义

- [ ] 实现工具函数
  - [ ] 创建 `utils/request.ts`（请求工具）
  - [ ] 创建 `utils/storage.ts`（本地存储工具）
  - [ ] 创建 `utils/auth.ts`（认证工具）
  - [ ] 创建 `utils/format.ts`（格式化工具）

**Day 5: 登录页面**
- [ ] 实现登录页面
  - [ ] 创建 `pages/login/index.tsx`
  - [ ] 使用 `ProForm` 实现登录表单
  - [ ] 实现表单验证
  - [ ] 实现登录逻辑（调用认证 API）
  - [ ] 实现 Token 存储
  - [ ] 实现登录后跳转
  - [ ] 实现错误提示

- [ ] 实现权限配置
  - [ ] 创建 `src/access.ts`（权限定义）
  - [ ] 实现权限检查函数
  - [ ] 配置路由权限

#### 交付物
- ✅ 可运行的前端应用
- ✅ 基础布局和路由系统
- ✅ 登录功能完整实现
- ✅ API 客户端配置完成
- ✅ 状态管理基础框架

---

### Week 4: 用户系统和认证授权 ⭐ 调整：用户系统在租户系统之后

**目标**: 实现完整的用户认证和授权系统（**包含租户隔离**）

**对应功能**：
- 用户认证与授权 ⭐⭐⭐⭐⭐

> **重要说明**：用户系统在租户系统之后开发，确保所有用户模型和查询都包含租户隔离。

#### 任务清单

**Day 1-2: 用户模型和认证基础（带租户）**
- [ ] 实现用户模型（Tortoise ORM，**继承 BaseModel，自动包含 tenant_id**）
  - [ ] 创建 `models/user.py`
  - [ ] 定义用户字段（username, email, password_hash, is_active, is_superuser 等）
  - [ ] **实现用户-租户关联关系**（ForeignKey）
  - [ ] 实现密码加密方法（使用 passlib）
  - [ ] 实现用户验证方法
  - [ ] **实现租户内用户名唯一性约束**
  - [ ] 创建数据库迁移脚本

- [ ] 实现角色和权限模型（**也包含 tenant_id**）
  - [ ] 创建 `models/role.py`（角色模型，继承 BaseModel）
  - [ ] 创建 `models/permission.py`（权限模型，继承 BaseModel）
  - [ ] 实现用户-角色多对多关系
  - [ ] 实现角色-权限多对多关系
  - [ ] 创建数据库迁移脚本

- [ ] 实现 Pydantic Schema
  - [ ] 创建 `schemas/user.py`（用户 Schema）
  - [ ] 创建 `schemas/role.py`（角色 Schema）
  - [ ] 创建 `schemas/auth.py`（认证 Schema）
  - [ ] 实现数据验证规则

**Day 3-4: JWT 认证实现（包含租户信息）**
- [ ] 实现 JWT 工具类
  - [ ] 创建 `core/security.py`
  - [ ] **实现 JWT Token 生成（包含 tenant_id）** ⭐ 关键
  - [ ] 实现 JWT Token 验证
  - [ ] 实现 Token 刷新机制
  - [ ] 实现密码加密和验证（使用 passlib[bcrypt]）

- [ ] 实现认证服务
  - [ ] 创建 `services/auth_service.py`
  - [ ] 实现用户注册功能（**自动设置 tenant_id**）
  - [ ] 实现用户登录功能（**返回包含 tenant_id 的 JWT Token**）
  - [ ] 实现 Token 刷新功能
  - [ ] 实现密码重置功能（占位）

- [ ] 实现认证 API
  - [ ] 创建 `api/v1/auth.py`
  - [ ] 实现 `/api/v1/auth/register` 注册接口
  - [ ] 实现 `/api/v1/auth/login` 登录接口（**设置租户上下文**）
  - [ ] 实现 `/api/v1/auth/refresh` Token 刷新接口
  - [ ] 实现 `/api/v1/auth/me` 获取当前用户信息接口
  - [ ] 编写 API 测试

**Day 5: 权限验证中间件（带租户过滤）**
- [ ] 实现权限验证依赖
  - [ ] 创建 `api/deps.py`
  - [ ] 实现 `get_current_user` 依赖（JWT 验证，**自动设置租户上下文**）
  - [ ] 实现 `get_current_active_user` 依赖
  - [ ] 实现 `require_permissions` 权限验证装饰器（**带租户过滤**）

- [ ] 实现权限检查服务
  - [ ] 创建 `services/permission_service.py`
  - [ ] 实现用户权限查询方法（**自动过滤租户**）
  - [ ] 实现权限验证方法
  - [ ] 实现角色权限检查方法
  - [ ] **实现超级管理员特殊处理（可跨租户）**

#### 交付物
- ✅ 完整的用户认证系统（带租户隔离）
- ✅ JWT Token 生成和验证（包含租户信息）
- ✅ 用户注册/登录 API（自动设置租户）
- ✅ 权限验证中间件（自动租户过滤）
- ✅ 用户、角色、权限数据库模型（包含 tenant_id）

---

## Phase 2: 多租户完善和用户管理 (2-3周)

> **对应功能列表第一阶段**：多租户系统（完善）、用户认证与授权（完善）、查询增强组件（完善）、文件上传与管理、操作日志

### Week 5: 用户管理功能（带租户过滤）

**目标**: 实现用户管理功能，所有查询自动包含租户过滤

**对应功能**：
- 用户认证与授权 ⭐⭐⭐⭐⭐（用户管理部分）
- 查询增强组件 ⭐⭐⭐⭐⭐（完善版）
- 文件上传与管理 ⭐⭐⭐⭐（基础版）
- 操作日志 ⭐⭐⭐⭐（基础版）

#### 任务清单

**Day 1-2: 用户管理模块（后端，自动租户过滤）**
- [ ] 实现用户管理 API
  - [ ] 创建 `api/v1/users.py`
  - [ ] 实现用户列表查询接口（**自动过滤当前租户**）
  - [ ] 实现用户详情查询接口（**验证租户权限**）
  - [ ] 实现用户创建接口（**自动设置 tenant_id**）
  - [ ] 实现用户更新接口（**验证租户权限**）
  - [ ] 实现用户删除接口（软删除，**验证租户权限**）
  - [ ] 实现用户状态切换接口
  - [ ] 添加权限验证

- [ ] 实现用户服务
  - [ ] 创建 `services/user_service.py`
  - [ ] 实现用户查询方法（**自动添加租户过滤**）
  - [ ] 实现用户创建方法（**自动设置 tenant_id**）
  - [ ] 实现用户更新方法（**验证租户权限**）
  - [ ] 实现用户删除方法（**验证租户权限**）
  - [ ] 实现用户搜索和筛选方法（**自动租户过滤**）

**Day 3: 用户管理模块（前端）**
- [ ] 实现用户列表页面
  - [ ] 创建 `pages/user/list/index.tsx`
  - [ ] 使用 `ProTable` 实现用户列表
  - [ ] **自动显示当前租户的用户**（后端已过滤）
  - [ ] 实现搜索和筛选功能
  - [ ] 实现分页功能
  - [ ] 实现批量操作功能

- [ ] 实现用户表单页面
  - [ ] 创建 `pages/user/form/index.tsx`
  - [ ] 使用 `ProForm` 实现用户新增/编辑表单
  - [ ] 实现表单验证
  - [ ] 实现表单提交逻辑（**自动关联当前租户**）

**Day 4: 角色管理模块（后端，带租户过滤）**
- [ ] 实现角色管理 API
  - [ ] 创建 `api/v1/roles.py`
  - [ ] 实现角色列表查询接口（**自动过滤租户**）
  - [ ] 实现角色详情查询接口
  - [ ] 实现角色创建接口（**自动设置 tenant_id**）
  - [ ] 实现角色更新接口（**验证租户权限**）
  - [ ] 实现角色删除接口（**验证租户权限**）
  - [ ] 实现权限分配接口

- [ ] 实现角色服务
  - [ ] 创建 `services/role_service.py`
  - [ ] 实现角色 CRUD 方法（**自动租户过滤**）
  - [ ] 实现权限分配方法
  - [ ] 实现角色权限查询方法（**自动租户过滤**）

**Day 5: 角色管理模块（前端）**
- [ ] 实现角色列表页面
  - [ ] 创建 `pages/role/list/index.tsx`
  - [ ] 使用 `ProTable` 实现角色列表
  - [ ] 实现角色新增/编辑表单
  - [ ] 实现权限分配界面（使用 Tree 组件）

#### 交付物
- ✅ 完整的用户管理功能（前后端，带租户隔离）
- ✅ 完整的角色权限管理功能（前后端，带租户隔离）
- ✅ 用户列表、新增、编辑、删除功能（自动租户过滤）
- ✅ 角色列表、新增、编辑、权限分配功能（自动租户过滤）

---

### Week 6: 多租户前端和注册流程

**目标**: 实现多租户前端功能和注册流程

**对应功能**：
- 多租户系统 ⭐⭐⭐⭐⭐（前端完善）

#### 任务清单

**Day 1-2: 租户管理前端**
- [ ] 实现租户列表页面（超级管理员）
  - [ ] 创建 `pages/tenant/list/index.tsx`
  - [ ] 使用 `ProTable` 实现租户列表
  - [ ] 实现租户搜索和筛选
  - [ ] 实现租户状态管理

- [ ] 实现租户表单页面
  - [ ] 创建 `pages/tenant/form/index.tsx`
  - [ ] 使用 `ProForm` 实现租户新增/编辑表单
  - [ ] 实现租户配置管理（使用 Formily）
  - [ ] 实现表单验证和提交

- [ ] 实现租户详情页面
  - [ ] 创建 `pages/tenant/detail/index.tsx`
  - [ ] 使用 `ProDescriptions` 展示租户信息
  - [ ] 实现租户配置编辑

**Day 3-4: 租户注册流程**
- [ ] 实现租户注册 API
  - [ ] 创建 `api/v1/register.py`
  - [ ] 实现租户注册接口（创建租户 + 创建管理员用户）
  - [ ] 实现租户域名验证
  - [ ] 实现租户初始化逻辑（创建默认角色、权限等）

- [ ] 实现租户注册页面
  - [ ] 创建 `pages/register/index.tsx`
  - [ ] 实现租户注册表单（租户信息 + 管理员信息）
  - [ ] 实现表单验证
  - [ ] 实现注册逻辑
  - [ ] 实现注册成功跳转

- [ ] 实现租户选择/切换
  - [ ] 创建租户选择组件
  - [ ] 实现租户切换功能（更新 JWT Token）
  - [ ] 实现租户信息显示
  - [ ] 集成到顶部导航栏

**Day 5: 租户配置和限制**
- [ ] 实现租户配置管理
  - [ ] 创建租户配置页面
  - [ ] 使用 Formily 实现配置表单
  - [ ] 实现配置保存和加载

- [ ] 实现租户限制检查
  - [ ] 创建 `utils/tenant_limit.ts`
  - [ ] 实现用户数量限制检查
  - [ ] 实现功能模块限制检查
  - [ ] 实现存储空间限制检查
  - [ ] 在前端和后端都实现限制检查

#### 交付物
- ✅ 租户管理前端界面
- ✅ 租户注册流程
- ✅ 租户配置管理
- ✅ 租户限制检查机制

---

## Phase 3: 插件系统开发 (3-4周)

> **对应功能列表第一阶段**：插件系统 ⭐⭐⭐⭐⭐（完整版）

### Week 7: 插件规范设计和后端加载器

**目标**: 设计插件规范，实现后端插件加载器

**对应功能**：
- 插件系统 ⭐⭐⭐⭐⭐（后端加载器）

#### 任务清单

**Day 1-2: 插件规范设计**
- [ ] 完善插件清单格式（manifest.json）
  - [ ] 定义前端插件配置结构
  - [ ] 定义后端插件配置结构
  - [ ] 定义插件依赖声明
  - [ ] 定义插件权限声明
  - [ ] 编写插件规范文档

- [ ] 设计插件基类接口
  - [ ] 创建 `core/plugin_base.py`
  - [ ] 定义 `BasePlugin` 抽象基类
  - [ ] 定义插件接口方法
  - [ ] 定义插件生命周期钩子

- [ ] 设计插件注册机制
  - [ ] 设计插件注册表结构
  - [ ] 设计插件状态管理
  - [ ] 设计插件版本管理

**Day 3-4: 后端插件加载器**
- [ ] 实现插件扫描功能
  - [ ] 创建 `utils/plugin_loader.py`
  - [ ] 实现扫描 `riveredge-seeds` 目录
  - [ ] 实现读取 `manifest.json`
  - [ ] 实现插件清单验证

- [ ] 实现插件动态加载
  - [ ] 使用 `importlib` 动态导入插件模块
  - [ ] 实现插件类实例化
  - [ ] 实现插件路由注册
  - [ ] 实现插件模型注册
  - [ ] 实现错误处理和回滚

- [ ] 实现插件管理 API
  - [ ] 创建 `api/v1/plugins.py`
  - [ ] 实现插件列表查询接口
  - [ ] 实现插件详情查询接口
  - [ ] 实现插件启用/禁用接口
  - [ ] 实现插件安装/卸载接口

- [ ] 实现插件服务
  - [ ] 创建 `services/plugin_service.py`
  - [ ] 实现插件扫描方法
  - [ ] 实现插件加载方法
  - [ ] 实现插件状态管理方法
  - [ ] 实现插件依赖检查方法

**Day 5: 插件数据库迁移**
- [ ] 实现插件模型注册
  - [ ] 实现插件模型自动注册到 Tortoise ORM
  - [ ] 实现插件模型命名空间隔离
  - [ ] 实现插件模型迁移脚本管理

- [ ] 实现插件迁移执行
  - [ ] 实现插件迁移脚本扫描
  - [ ] 实现插件迁移执行逻辑
  - [ ] 实现迁移回滚功能

#### 交付物
- ✅ 插件规范文档
- ✅ 后端插件加载器
- ✅ 插件管理 API
- ✅ 插件数据库迁移机制

---

### Week 8: 前端插件加载器

**目标**: 实现前端插件动态加载功能

#### 任务清单

**Day 1-2: 插件加载器核心**
- [ ] 实现插件清单获取
  - [ ] 创建 `utils/plugin_loader.ts`
  - [ ] 实现从后端获取插件列表 API
  - [ ] 实现插件清单解析
  - [ ] 实现插件权限过滤

- [ ] 实现插件动态导入
  - [ ] 使用 ES Modules `import()` 动态导入
  - [ ] 实现插件代码加载
  - [ ] 实现插件依赖管理
  - [ ] 实现插件加载错误处理

- [ ] 实现插件路由注册
  - [ ] 创建 `utils/plugin_router.ts`
  - [ ] 实现动态路由添加（使用 Umi 路由 API）
  - [ ] 实现路由权限验证
  - [ ] 实现路由懒加载

**Day 3: 插件菜单集成**
- [ ] 实现动态菜单生成
  - [ ] 创建 `utils/plugin_menu.ts`
  - [ ] 实现从插件清单生成菜单
  - [ ] 实现菜单权限控制
  - [ ] 实现菜单图标支持
  - [ ] 集成到 `ProLayout` 菜单系统

- [ ] 实现插件状态管理
  - [ ] 创建 `models/plugin.ts`（Umi Model）
  - [ ] 实现插件列表状态管理
  - [ ] 实现插件加载状态管理
  - [ ] 实现插件错误状态管理

**Day 4: 插件管理界面**
- [ ] 实现插件列表页面
  - [ ] 创建 `pages/plugin/list/index.tsx`
  - [ ] 使用 `ProTable` 实现插件列表
  - [ ] 实现插件信息展示
  - [ ] 实现插件状态显示

- [ ] 实现插件操作功能
  - [ ] 实现插件启用/禁用功能
  - [ ] 实现插件详情查看
  - [ ] 实现插件配置管理

**Day 5: 插件通信机制**
- [ ] 实现插件事件总线
  - [ ] 创建 `utils/plugin_event_bus.ts`
  - [ ] 实现事件发布/订阅机制
  - [ ] 实现插件间通信

- [ ] 实现插件共享状态
  - [ ] 实现插件使用 Umi Model
  - [ ] 实现插件共享 Shell 状态
  - [ ] 实现插件 API 调用（通过 Umi Request）

#### 交付物
- ✅ 前端插件加载器
- ✅ 插件路由注册功能
- ✅ 插件菜单集成
- ✅ 插件管理界面
- ✅ 插件通信机制

---

### Week 9: 示例插件开发

**目标**: 开发第一个示例插件，验证插件系统

#### 任务清单

**Day 1-2: 创建示例插件项目**
- [ ] 创建 `seed-example` 插件
  - [ ] 创建插件目录结构（frontend/backend/shared/db）
  - [ ] 编写 `manifest.json`
  - [ ] 配置前端构建工具（Vite）
  - [ ] 配置后端 Python 模块

- [ ] 实现后端插件
  - [ ] 创建 `backend/src/plugin.py`（插件入口）
  - [ ] 实现 `ExamplePlugin` 类（继承 `BasePlugin`）
  - [ ] 创建 `backend/src/api/routes.py`（API 路由）
  - [ ] 创建 `backend/src/models/example.py`（数据模型）
  - [ ] 创建 `backend/src/schemas/example.py`（Pydantic Schema）
  - [ ] 创建 `backend/src/services/example.py`（业务逻辑）
  - [ ] 创建数据库迁移脚本

- [ ] 实现前端插件
  - [ ] 创建 `frontend/src/index.ts`（插件入口）
  - [ ] 创建 `frontend/src/routes.ts`（路由定义）
  - [ ] 创建示例页面组件
  - [ ] 配置前端构建

**Day 3-4: 实现示例功能**
- [ ] 实现简单列表页面
  - [ ] 创建 `frontend/src/components/ExampleList.tsx`
  - [ ] 使用 `ProTable` 实现列表
  - [ ] 实现 API 调用
  - [ ] 实现增删改查功能

- [ ] 实现表单页面
  - [ ] 创建 `frontend/src/components/ExampleForm.tsx`
  - [ ] 使用 `ProForm` 实现表单
  - [ ] 实现表单验证
  - [ ] 实现表单提交

- [ ] 实现插件权限
  - [ ] 在 manifest.json 中定义权限
  - [ ] 实现后端权限验证
  - [ ] 实现前端权限控制

**Day 5: 插件集成测试**
- [ ] 插件加载测试
  - [ ] 测试插件扫描
  - [ ] 测试插件加载
  - [ ] 测试插件路由注册
  - [ ] 测试插件菜单显示

- [ ] 插件功能测试
  - [ ] 测试插件 API 调用
  - [ ] 测试插件权限验证
  - [ ] 测试插件数据隔离（多租户）
  - [ ] 测试插件错误处理

- [ ] 插件开发脚手架
  - [ ] 创建插件模板
  - [ ] 创建 CLI 工具（可选）
  - [ ] 编写插件开发文档

#### 交付物
- ✅ 可运行的示例插件
- ✅ 插件开发模板
- ✅ 插件开发文档
- ✅ 插件系统验证通过

---

## Phase 4: 基础管理模块完善 (2-3周)

> **对应功能列表第二、三阶段**：代码生成器、主子表模型支持、数据字典、系统配置管理、表单自定义字段、打印模板设计、消息通知、国际化支持、主题定制

### Week 10: 系统设置和插件管理完善

**目标**: 完善系统管理功能，实现代码生成器、主子表模型支持、数据字典

**对应功能**：
- 代码生成器 ⭐⭐⭐⭐⭐
- 主子表模型支持 ⭐⭐⭐⭐
- 数据字典 ⭐⭐⭐⭐
- 系统配置管理 ⭐⭐⭐
- 操作日志 ⭐⭐⭐⭐（完善版）
- 插件系统 ⭐⭐⭐⭐⭐（管理界面）

#### 任务清单

**Day 1: 代码生成器**
- [ ] 实现代码生成器（后端）
  - [ ] 创建 `tools/generator/` 目录
  - [ ] 实现数据库表导入（PostgreSQL 元数据查询）
  - [ ] 实现代码模板（Jinja2）
    - [ ] Model 生成器模板
    - [ ] Schema 生成器模板
    - [ ] API 生成器模板
    - [ ] Service 生成器模板
    - [ ] 前端 List 页面生成器模板
    - [ ] 前端 Form 页面生成器模板
  - [ ] 实现单表 CRUD 生成
  - [ ] 实现主子表生成
  - [ ] 实现树形表生成
  - [ ] 实现代码生成 API

**Day 2: 主子表模型支持**
- [ ] 实现主子表模型支持（后端）
  - [ ] 创建 `core/master_detail/` 目录
  - [ ] 实现主子表关系定义（Tortoise ORM ForeignKey）
  - [ ] 实现主子表嵌套 Schema（Pydantic）
  - [ ] 实现主子表 API 支持（事务处理）
  - [ ] 编写主子表使用示例

**Day 3: 数据字典**
- [ ] 实现数据字典（后端）
  - [ ] 创建 `models/dict.py` 和 `models/dict_item.py`
  - [ ] 实现数据字典管理 API
  - [ ] 实现数据字典缓存（Redis）
  - [ ] 实现数据字典同步机制

- [ ] 实现数据字典（前端）
  - [ ] 创建 `components/DictSelect/` 组件
  - [ ] 实现字典选择组件（Select、Radio 等）
  - [ ] 实现字典数据管理页面

**Day 4: 系统设置模块**
- [ ] 实现系统配置管理（后端）
  - [ ] 创建 `models/system_config.py`
  - [ ] 实现系统配置 API
  - [ ] 实现配置存储（PostgreSQL JSONB）
  - [ ] 实现配置缓存（Redis）

- [ ] 实现系统设置页面（前端）
  - [ ] 创建 `pages/system/settings/index.tsx`
  - [ ] 实现系统配置表单
  - [ ] 实现主题配置
  - [ ] 实现邮件配置
  - [ ] 实现存储配置

- [ ] 实现个人信息设置
  - [ ] 创建 `pages/user/profile/index.tsx`
  - [ ] 实现个人信息编辑
  - [ ] 实现密码修改
  - [ ] 实现头像上传

**Day 3-4: 插件管理完善**
- [ ] 实现插件详情页面
  - [ ] 创建 `pages/plugin/detail/index.tsx`
  - [ ] 使用 `ProDescriptions` 展示插件信息
  - [ ] 展示插件路由配置
  - [ ] 展示插件权限配置
  - [ ] 展示插件依赖关系

- [ ] 实现插件配置管理
  - [ ] 实现插件配置表单（使用 Formily）
  - [ ] 实现配置保存和加载
  - [ ] 实现配置验证

- [ ] 实现插件版本管理
  - [ ] 实现插件版本显示
  - [ ] 实现插件更新检查
  - [ ] 实现插件回滚功能（占位）

**Day 5: 操作日志完善**
- [ ] 完善操作日志（后端）
  - [ ] 完善日志记录中间件（自动记录所有 API 操作）
  - [ ] 实现日志导出功能
  - [ ] 实现日志统计功能
  - [ ] 实现日志查询 API（自动租户过滤）

- [ ] 完善日志查看（前端）
  - [ ] 创建 `pages/system/logs/index.tsx`
  - [ ] 使用 `ProTable` 实现日志列表
  - [ ] 实现日志搜索和筛选
  - [ ] 实现日志详情查看
  - [ ] 实现日志导出功能

#### 交付物
- ✅ 代码生成器功能
- ✅ 主子表模型支持
- ✅ 数据字典功能
- ✅ 系统设置功能
- ✅ 插件管理完善
- ✅ 操作日志功能（完善版）

---

### Week 11: 表单自定义字段和打印模板

**目标**: 实现表单自定义字段和打印模板功能

**对应功能**：
- 表单自定义字段 ⭐⭐⭐
- 打印模板设计 ⭐⭐⭐

#### 任务清单

**Day 1-2: 表单自定义字段（后端）**
- [ ] 实现表单模板模型
  - [ ] 创建 `models/form_template.py`
  - [ ] 使用 PostgreSQL JSONB 存储字段配置
  - [ ] 实现模板 CRUD API
  - [ ] 实现模板验证（使用 Pydantic）

- [ ] 实现表单数据模型
  - [ ] 创建 `models/form_data.py`
  - [ ] 使用 PostgreSQL JSONB 存储表单数据
  - [ ] 实现数据 CRUD API
  - [ ] 实现数据验证

**Day 3: 表单自定义字段（前端）**
- [ ] 集成 Formily
  - [ ] 配置 Formily 与 Ant Design 集成
  - [ ] 创建表单设计器组件（基础版）
  - [ ] 实现表单模板管理页面

- [ ] 实现动态表单渲染
  - [ ] 创建动态表单渲染组件
  - [ ] 实现基于 Schema 的表单生成
  - [ ] 实现表单数据提交

**Day 4-5: 打印模板设计**
- [ ] 实现打印模板管理（后端）
  - [ ] 创建 `models/print_template.py`
  - [ ] 使用 PostgreSQL JSONB 存储模板配置
  - [ ] 实现模板 CRUD API

- [ ] 实现打印功能（前端）
  - [ ] 集成 `react-to-print`
  - [ ] 创建打印组件
  - [ ] 实现打印预览
  - [ ] 实现 PDF 生成（使用 jspdf + html2canvas）

- [ ] 实现打印模板管理
  - [ ] 创建打印模板管理页面
  - [ ] 实现模板设计器（基础版）
  - [ ] 实现模板保存和加载

#### 交付物
- ✅ 表单自定义字段功能
- ✅ 打印模板设计功能
- ✅ 动态表单渲染
- ✅ 打印功能实现

---

## Phase 5: 高级功能与优化 (2-3周)

### Week 12: 国际化、主题和性能优化

**目标**: 实现国际化、主题定制和性能优化

#### 任务清单

**Day 1-2: 国际化支持**
- [ ] 配置 Umi 国际化插件
  - [ ] 配置 `@umijs/plugin-locale`
  - [ ] 创建中英文语言包
  - [ ] 实现语言切换功能

- [ ] 实现多语言支持
  - [ ] 翻译所有页面文本
  - [ ] 翻译所有组件文本
  - [ ] 实现日期时间本地化
  - [ ] 实现数字格式化本地化

**Day 3: 主题定制**
- [ ] 实现主题配置
  - [ ] 配置 Ant Design 主题
  - [ ] 实现主题切换功能
  - [ ] 实现自定义主题保存

- [ ] 实现暗色模式
  - [ ] 配置暗色主题
  - [ ] 实现主题切换
  - [ ] 实现主题持久化

**Day 4-5: 性能优化**
- [ ] 前端性能优化
  - [ ] 代码分割优化
  - [ ] 路由懒加载优化
  - [ ] 组件懒加载
  - [ ] 图片懒加载
  - [ ] 打包体积优化

- [ ] 后端性能优化
  - [ ] 数据库查询优化
  - [ ] Redis 缓存策略优化
  - [ ] API 响应时间优化
  - [ ] 连接池优化

#### 交付物
- ✅ 国际化支持
- ✅ 主题定制功能
- ✅ 性能优化报告

---

### Week 13: 测试和文档

**目标**: 完善测试和文档

#### 任务清单

**Day 1-2: 单元测试**
- [ ] 后端单元测试
  - [ ] 使用 `pytest` 编写测试
  - [ ] 测试 API 接口
  - [ ] 测试服务层
  - [ ] 测试工具函数
  - [ ] 测试覆盖率 > 80%

- [ ] 前端单元测试
  - [ ] 配置测试框架
  - [ ] 测试组件
  - [ ] 测试工具函数
  - [ ] 测试覆盖率 > 70%

**Day 3: 集成测试**
- [ ] API 集成测试
  - [ ] 测试认证流程
  - [ ] 测试用户管理流程
  - [ ] 测试插件加载流程
  - [ ] 测试多租户数据隔离

- [ ] 端到端测试
  - [ ] 测试完整业务流程
  - [ ] 测试多租户场景
  - [ ] 测试插件安装和使用

**Day 4-5: 文档编写**
- [ ] API 文档
  - [ ] 完善 FastAPI Swagger 文档
  - [ ] 编写 API 使用示例
  - [ ] 编写错误码说明

- [ ] 开发文档
  - [ ] 编写项目搭建文档
  - [ ] 编写插件开发文档
  - [ ] 编写多租户开发文档
  - [ ] 编写部署文档

- [ ] 用户手册
  - [ ] 编写系统使用手册
  - [ ] 编写管理员手册
  - [ ] 编写插件安装手册

#### 交付物
- ✅ 测试报告（覆盖率达标）
- ✅ 完整项目文档
- ✅ API 文档
- ✅ 用户手册

---

### Week 14: 部署和上线准备

**目标**: 准备生产环境部署

#### 任务清单

**Day 1-2: 部署配置**
- [ ] Docker 容器化
  - [ ] 编写 Dockerfile（后端）
  - [ ] 编写 Dockerfile（前端）
  - [ ] 编写 docker-compose.yml
  - [ ] 配置环境变量

- [ ] 数据库迁移
  - [ ] 准备生产数据库迁移脚本
  - [ ] 测试迁移流程
  - [ ] 准备回滚方案

**Day 3: CI/CD 配置**
- [ ] 配置 CI/CD Pipeline
  - [ ] 配置代码检查
  - [ ] 配置自动化测试
  - [ ] 配置自动化构建
  - [ ] 配置自动化部署

**Day 4-5: 安全加固**
- [ ] 安全配置
  - [ ] 配置 HTTPS
  - [ ] 配置防火墙规则
  - [ ] 配置安全头
  - [ ] 配置 CORS 策略

- [ ] 数据备份
  - [ ] 配置数据库备份
  - [ ] 配置文件备份
  - [ ] 配置备份恢复流程

#### 交付物
- ✅ Docker 容器化配置
- ✅ CI/CD Pipeline
- ✅ 安全配置
- ✅ 备份方案

---

## Phase 6: 扩展功能（可选，持续）

### Week 15+: 扩展功能开发

**后续优化方向**:

- [ ] **riveredge-land (着陆页/官网)**
  - [ ] 创建独立项目
  - [ ] 使用 Ant Design Landing
  - [ ] 实现 SaaS 介绍页面
  - [ ] 实现客户官网模板

- [ ] **riveredge-leaf (移动端应用)**
  - [ ] 创建独立项目
  - [ ] 使用 Ant Design Mobile
  - [ ] 实现移动端基础功能
  - [ ] 实现移动端插件支持

- [ ] **插件市场功能**
  - [ ] 实现插件市场界面
  - [ ] 实现插件上传和下载
  - [ ] 实现插件评分和评论

- [ ] **高级功能**
  - [ ] 工作流引擎集成
  - [ ] 消息通知系统
  - [ ] 文件管理系统
  - [ ] 数据分析报表

---

## 📊 里程碑

| 里程碑 | 时间 | 交付物 | 验收标准 |
|--------|------|--------|----------|
| **M1: 基础框架完成** | Week 4 | 可运行的基础系统 | ✅ 用户注册/登录功能正常<br>✅ 用户管理功能正常<br>✅ 角色权限管理功能正常 |
| **M2: 多租户功能完成** | Week 6 | 多租户系统 | ✅ 租户注册功能正常<br>✅ 数据隔离验证通过<br>✅ 租户管理功能正常 |
| **M3: 插件系统完成** | Week 9 | 可加载插件的系统 | ✅ 插件加载功能正常<br>✅ 示例插件运行正常<br>✅ 插件路由注册正常 |
| **M4: 功能完善** | Week 11 | 完整的管理框架 | ✅ 表单自定义字段功能正常<br>✅ 打印模板功能正常<br>✅ 系统设置功能正常 |
| **M5: 生产就绪** | Week 14 | 可部署的生产版本 | ✅ 测试覆盖率达标<br>✅ 文档完整<br>✅ 部署方案就绪 |

---

## 👥 团队分工建议

### 小型团队 (2-3人)

**Week 1-4: 基础架构**
- **后端开发**: 1人（负责 core 后端开发）
- **前端开发**: 1人（负责 shell 前端开发）
- **全栈开发**: 1人（支持前后端，负责协调）

**Week 5-6: 多租户功能**
- **后端开发**: 1人（多租户后端实现）
- **前端开发**: 1人（多租户前端实现）
- **全栈开发**: 1人（测试和文档）

**Week 7-9: 插件系统**
- **后端开发**: 1人（插件加载器后端）
- **前端开发**: 1人（插件加载器前端）
- **全栈开发**: 1人（示例插件开发）

**Week 10-14: 完善和优化**
- 全员参与功能完善、测试、文档编写

### 中型团队 (4-6人)

**后端团队 (2人)**:
- 后端开发 1: 负责认证授权、用户管理、多租户核心
- 后端开发 2: 负责插件系统、系统设置、API 开发

**前端团队 (2人)**:
- 前端开发 1: 负责基础框架、用户管理、多租户前端
- 前端开发 2: 负责插件系统前端、表单自定义字段、打印模板

**支持团队 (2人)**:
- UI/UX 设计: 1人（负责界面设计和用户体验）
- 测试: 1人（负责测试用例编写和测试执行）

### 大型团队 (7+人)

**后端团队 (3人)**:
- 后端开发 1: 核心框架和认证授权
- 后端开发 2: 多租户和插件系统
- 后端开发 3: 系统设置和扩展功能

**前端团队 (3人)**:
- 前端开发 1: 基础框架和核心功能
- 前端开发 2: 插件系统和高级功能
- 前端开发 3: 移动端和 Landing 页面

**支持团队 (3人)**:
- UI/UX 设计: 1人
- 测试: 2人（单元测试 + 集成测试）
- DevOps: 1人（CI/CD、部署、运维）

---

## 🚀 快速启动建议

### MVP 版本 (最小可行产品) - 6周

如果时间紧迫，可以先实现 MVP 版本：

**Week 1-2**: 基础框架 + 登录功能
- 后端: FastAPI 框架 + 用户认证
- 前端: Umi 框架 + 登录页面

**Week 3**: 用户管理 + 角色管理
- 后端: 用户和角色 CRUD API
- 前端: 用户和角色管理页面

**Week 4**: 多租户基础功能
- 后端: 租户模型 + 数据隔离
- 前端: 租户注册 + 租户管理

**Week 5**: 插件加载器（简化版）
- 后端: 插件扫描和加载
- 前端: 插件路由注册

**Week 6**: 一个示例插件
- 开发简单的示例插件
- 验证插件系统可行性

**MVP 目标**: 验证架构可行性，展示核心功能（认证、多租户、插件）

---

## 📝 开发规范

### 代码规范

详细规范请参考：
- [2.字段命名规范.md](../2.rules/2.字段命名规范.md) - ⭐ **统一命名规范（Python + TypeScript）**
- [4.注释规范.md](../2.rules/4.注释规范.md) - ⭐ **完善注释规范（Python + TypeScript）**
- [3.数据库命名规范.md](../2.rules/3.数据库命名规范.md) - ⭐ **数据库命名规范**

**核心规范要点**：
- **后端 (Python)**: `snake_case` 文件/函数，`PascalCase` 类，类型提示，PEP 8
- **前端 (TypeScript)**: `PascalCase` 组件/类型，`camelCase` 函数/变量
- **数据库**: `snake_case` 表名（复数）和字段，`idx_` 索引前缀

### Git 工作流

- **主分支**: `main` (生产环境)
- **开发分支**: `develop`
- **功能分支**: `feature/xxx` (从 develop 创建)
- **修复分支**: `fix/xxx` (从 develop 创建)
- **发布分支**: `release/xxx` (从 develop 创建)

### 提交规范

遵循 [Conventional Commits](https://www.conventionalcommits.org/) 规范：

- `feat`: 新功能
- `fix`: 修复问题
- `docs`: 文档更新
- `style`: 代码格式（不影响功能）
- `refactor`: 重构
- `test`: 测试相关
- `chore`: 构建/工具相关
- `perf`: 性能优化

### 代码审查

- 所有代码必须经过 Code Review
- 至少一人审查通过才能合并
- 重要功能需要多人审查

---

## 🔒 多租户开发注意事项

### 数据隔离

1. **所有数据模型必须包含 `tenant_id`**
2. **所有查询必须自动过滤租户**
3. **禁止跨租户数据访问**
4. **定期检查数据隔离完整性**

### 租户管理

1. **租户创建时自动初始化数据**
2. **租户删除时清理相关数据**
3. **租户状态管理（激活/禁用/过期）**
4. **租户配置管理（功能限制、资源限制）**

### 安全性

1. **JWT Token 包含租户信息**
2. **API 请求自动验证租户权限**
3. **防止租户信息泄露**
4. **实现租户级别的审计日志**

---

## 📋 依赖关系图

```
Phase 1: 基础架构
├── Week 1: 后端核心框架
├── Week 2: 认证授权系统
├── Week 3: 前端基础框架
└── Week 4: 基础管理模块
    └── 依赖: Week 1, 2, 3

Phase 2: 多租户核心功能
├── Week 5: 多租户数据模型和隔离
│   └── 依赖: Phase 1
└── Week 6: 多租户前端和注册流程
    └── 依赖: Week 5

Phase 3: 插件系统开发
├── Week 7: 插件规范设计和后端加载器
│   └── 依赖: Phase 1, Phase 2
├── Week 8: 前端插件加载器
│   └── 依赖: Week 7
└── Week 9: 示例插件开发
    └── 依赖: Week 7, 8

Phase 4: 基础管理模块完善
├── Week 10: 系统设置和插件管理完善
│   └── 依赖: Phase 3
└── Week 11: 表单自定义字段和打印模板
    └── 依赖: Phase 1, Phase 3

Phase 5: 高级功能与优化
├── Week 12: 国际化、主题和性能优化
│   └── 依赖: Phase 4
├── Week 13: 测试和文档
│   └── 依赖: Phase 4
└── Week 14: 部署和上线准备
    └── 依赖: Week 13
```

---

## ✅ 验收标准

### Phase 1 验收标准
- [ ] 用户可以注册和登录
- [ ] 用户可以管理用户和角色
- [ ] API 文档可以正常访问
- [ ] 前端可以正常访问后端 API

### Phase 2 验收标准
- [ ] 可以创建新租户
- [ ] 租户数据完全隔离
- [ ] 租户可以独立管理自己的用户
- [ ] 超级管理员可以管理所有租户

### Phase 3 验收标准
- [ ] 可以扫描和加载插件
- [ ] 插件路由可以正常注册
- [ ] 插件菜单可以正常显示
- [ ] 示例插件可以正常运行

### Phase 4 验收标准
- [ ] 表单自定义字段功能正常
- [ ] 打印模板功能正常
- [ ] 系统设置功能正常
- [ ] 插件管理功能完善

### Phase 5 验收标准
- [ ] 测试覆盖率 > 80%
- [ ] 性能指标达标
- [ ] 文档完整
- [ ] 可以成功部署到生产环境

---

## 🎯 总结

本开发计划详细规划了 **RiverEdge SaaS 多租户框架 (RiverEdge SaaS Multi-tenant Framework)** 的开发步骤，包括：

1. ✅ **清晰的阶段划分**: 5个主要阶段，14周开发周期
2. ✅ **详细的模块顺序**: 每个模块的开发顺序和依赖关系明确
3. ✅ **多租户支持**: 完整的多租户数据隔离和管理功能
4. ✅ **插件化架构**: 完整的插件系统开发流程
5. ✅ **技术栈统一**: 全部使用最终确定的技术选型
6. ✅ **验收标准明确**: 每个阶段都有明确的验收标准

**建议**: 严格按照开发顺序执行，确保每个阶段的质量，为后续开发打下坚实基础。

**相关文档**:
- [2.架构设计文档.md](./2.架构设计文档.md) - 系统架构设计
- [1.最终技术选型.md](./1.最终技术选型.md) - 详细技术栈选型
- [3.框架功能列表.md](./3.框架功能列表.md) - ⭐ **框架功能列表（核心代码 + 可热插拔功能）**
- [1.框架命名哲学.md](../2.rules/1.框架命名哲学.md) - 命名规范和哲学说明
- [2.字段命名规范.md](../2.rules/2.字段命名规范.md) - ⭐ **统一命名规范**
- [4.注释规范.md](../2.rules/4.注释规范.md) - ⭐ **完善注释规范**
- [3.数据库命名规范.md](../2.rules/3.数据库命名规范.md) - ⭐ **数据库命名规范**
- [插件开发规范.md](../4.branch/插件开发规范.md) - 插件开发详细规范
- [插件目录结构说明.md](../4.branch/插件目录结构说明.md) - 插件目录结构说明
- [表单自定义字段方案.md](../4.branch/表单自定义字段方案.md) - 表单自定义字段实现方案
- [打印模板设计方案.md](../4.branch/打印模板设计方案.md) - 打印模板设计实现方案

---

**最后更新**：2025-01-XX
