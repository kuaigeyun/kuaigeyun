# RiverEdge SaaS å¤šç§Ÿæˆ·æ¡†æ¶ - è¡¨å•è‡ªå®šä¹‰å­—æ®µå®ç°æ–¹æ¡ˆ

## ğŸ“‹ éœ€æ±‚æ¦‚è¿°

åœ¨ **RiverEdge SaaS å¤šç§Ÿæˆ·æ¡†æ¶ (RiverEdge SaaS Multi-tenant Framework)** ä¸­å®ç°è¡¨å•è‡ªå®šä¹‰å­—æ®µåŠŸèƒ½ï¼Œå…è®¸ç”¨æˆ·æ ¹æ®ä¸šåŠ¡éœ€æ±‚åŠ¨æ€é…ç½®è¡¨å•å­—æ®µï¼ŒåŒ…æ‹¬å­—æ®µç±»å‹ã€éªŒè¯è§„åˆ™ã€æ˜¾ç¤ºé¡ºåºç­‰ã€‚

## ğŸ¯ æŠ€æœ¯æ ˆåŸºç¡€

- **å‰ç«¯**: React 19.2 + Umi V4 + Ant Design v6 + Pro Components
- **åç«¯**: Python 3.13 + FastAPI + Pydantic v2 + Tortoise ORM

## ğŸ” æ–¹æ¡ˆå¯¹æ¯”

### æ–¹æ¡ˆä¸€ï¼šAnt Design å®˜æ–¹åŸç”Ÿæ–¹æ¡ˆï¼ˆæ¨èåŸºç¡€åœºæ™¯ï¼‰

#### ä¼˜åŠ¿
- âœ… æ— éœ€å¼•å…¥é¢å¤–ä¾èµ–
- âœ… ä¸ç°æœ‰æŠ€æœ¯æ ˆå®Œç¾é›†æˆ
- âœ… å®˜æ–¹ç»´æŠ¤ï¼Œç¨³å®šå¯é 
- âœ… å­¦ä¹ æˆæœ¬ä½

#### é€‚ç”¨åœºæ™¯
- ç®€å•çš„åŠ¨æ€å­—æ®µæ·»åŠ /åˆ é™¤
- å­—æ®µç±»å‹ç›¸å¯¹å›ºå®š
- ä¸éœ€è¦å¯è§†åŒ–è¡¨å•è®¾è®¡å™¨

#### å®ç°æ–¹å¼

**1. ä½¿ç”¨ Form.List åŠ¨æ€æ·»åŠ å­—æ®µ**

```tsx
import { ProForm, ProFormText, ProFormSelect } from '@ant-design/pro-components';
import { Button, Space } from 'antd';

export default function DynamicForm() {
  const [form] = ProForm.useForm();
  
  return (
    <ProForm
      form={form}
      onFinish={async (values) => {
        console.log('è¡¨å•å€¼:', values);
      }}
    >
      {/* å›ºå®šå­—æ®µ */}
      <ProFormText name="title" label="æ ‡é¢˜" rules={[{ required: true }]} />
      
      {/* è‡ªå®šä¹‰å­—æ®µåˆ—è¡¨ */}
      <ProForm.Item label="è‡ªå®šä¹‰å­—æ®µ">
        <ProForm.List name="customFields">
          {(fields, { add, remove }) => (
            <>
              {fields.map(({ key, name, ...restField }) => (
                <Space key={key} style={{ display: 'flex', marginBottom: 8 }} align="baseline">
                  <ProFormText
                    {...restField}
                    name={[name, 'fieldName']}
                    placeholder="å­—æ®µåç§°"
                    rules={[{ required: true, message: 'è¯·è¾“å…¥å­—æ®µåç§°' }]}
                  />
                  <ProFormSelect
                    {...restField}
                    name={[name, 'fieldType']}
                    placeholder="å­—æ®µç±»å‹"
                    options={[
                      { label: 'æ–‡æœ¬', value: 'text' },
                      { label: 'æ•°å­—', value: 'number' },
                      { label: 'æ—¥æœŸ', value: 'date' },
                    ]}
                    rules={[{ required: true }]}
                  />
                  <ProFormText
                    {...restField}
                    name={[name, 'fieldValue']}
                    placeholder="å­—æ®µå€¼"
                  />
                  <Button type="link" danger onClick={() => remove(name)}>
                    åˆ é™¤
                  </Button>
                </Space>
              ))}
              <Button type="dashed" onClick={() => add()} block>
                + æ·»åŠ è‡ªå®šä¹‰å­—æ®µ
              </Button>
            </>
          )}
        </ProForm.List>
      </ProForm.Item>
    </ProForm>
  );
}
```

**2. åŸºäºé…ç½®çš„åŠ¨æ€è¡¨å•æ¸²æŸ“**

```tsx
import { ProForm, ProFormText, ProFormDigit, ProFormDatePicker } from '@ant-design/pro-components';
import { useMemo } from 'react';

interface FieldConfig {
  name: string;
  label: string;
  type: 'text' | 'number' | 'date';
  required?: boolean;
  placeholder?: string;
}

export default function ConfigurableForm({ fieldConfigs }: { fieldConfigs: FieldConfig[] }) {
  const renderField = (config: FieldConfig) => {
    const commonProps = {
      name: config.name,
      label: config.label,
      rules: config.required ? [{ required: true }] : [],
      placeholder: config.placeholder,
    };

    switch (config.type) {
      case 'text':
        return <ProFormText key={config.name} {...commonProps} />;
      case 'number':
        return <ProFormDigit key={config.name} {...commonProps} />;
      case 'date':
        return <ProFormDatePicker key={config.name} {...commonProps} />;
      default:
        return null;
    }
  };

  return (
    <ProForm onFinish={async (values) => console.log(values)}>
      {fieldConfigs.map(renderField)}
    </ProForm>
  );
}

// ä½¿ç”¨ç¤ºä¾‹
const configs: FieldConfig[] = [
  { name: 'name', label: 'å§“å', type: 'text', required: true },
  { name: 'age', label: 'å¹´é¾„', type: 'number' },
  { name: 'birthday', label: 'ç”Ÿæ—¥', type: 'date' },
];

<ConfigurableForm fieldConfigs={configs} />
```

**3. ä½¿ç”¨ useWatch å®ç°å­—æ®µè”åŠ¨**

```tsx
import { ProForm, ProFormSelect, ProFormText } from '@ant-design/pro-components';
import { Form } from 'antd';

export default function LinkedForm() {
  const [form] = Form.useForm();
  const fieldType = Form.useWatch('fieldType', form);

  return (
    <ProForm
      form={form}
      onFinish={async (values) => console.log(values)}
    >
      <ProFormSelect
        name="fieldType"
        label="å­—æ®µç±»å‹"
        options={[
          { label: 'æ–‡æœ¬', value: 'text' },
          { label: 'æ•°å­—', value: 'number' },
          { label: 'é‚®ç®±', value: 'email' },
        ]}
      />
      
      {fieldType === 'text' && (
        <ProFormText
          name="textValue"
          label="æ–‡æœ¬å€¼"
          rules={[{ required: true }]}
        />
      )}
      
      {fieldType === 'number' && (
        <ProFormDigit
          name="numberValue"
          label="æ•°å­—å€¼"
          rules={[{ required: true }]}
        />
      )}
      
      {fieldType === 'email' && (
        <ProFormText
          name="emailValue"
          label="é‚®ç®±"
          rules={[
            { required: true },
            { type: 'email', message: 'è¯·è¾“å…¥æœ‰æ•ˆçš„é‚®ç®±åœ°å€' },
          ]}
        />
      )}
    </ProForm>
  );
}
```

### æ–¹æ¡ˆäºŒï¼šFormilyï¼ˆé˜¿é‡Œç³»ï¼Œæ¨èå¤æ‚åœºæ™¯ï¼‰

**Formily** æ˜¯é˜¿é‡Œå·´å·´å¼€æºçš„ä¼ä¸šçº§è¡¨å•è§£å†³æ–¹æ¡ˆï¼ŒåŠŸèƒ½å¼ºå¤§ï¼Œé€‚åˆå¤æ‚çš„è¡¨å•è‡ªå®šä¹‰åœºæ™¯ã€‚

#### ä¼˜åŠ¿
- âœ… é˜¿é‡Œç³»ï¼Œä¸ Ant Design ç”Ÿæ€ä¸€è‡´
- âœ… åŠŸèƒ½å¼ºå¤§ï¼Œæ”¯æŒå¤æ‚è¡¨å•åœºæ™¯
- âœ… æä¾›å¯è§†åŒ–è¡¨å•è®¾è®¡å™¨
- âœ… æ”¯æŒå­—æ®µè”åŠ¨ã€æ¡ä»¶æ¸²æŸ“
- âœ… å®Œå–„çš„æ–‡æ¡£å’Œç¤¾åŒºæ”¯æŒ

#### é€‚ç”¨åœºæ™¯
- å¤æ‚çš„è¡¨å•è‡ªå®šä¹‰éœ€æ±‚
- éœ€è¦å¯è§†åŒ–è¡¨å•è®¾è®¡å™¨
- å¤§é‡å­—æ®µè”åŠ¨å’Œæ¡ä»¶æ¸²æŸ“
- ä¼ä¸šçº§è¡¨å•åº”ç”¨

#### æ ¸å¿ƒç‰¹æ€§

1. **è¡¨å•è®¾è®¡å™¨** - å¯è§†åŒ–æ‹–æ‹½è®¾è®¡è¡¨å•
2. **åŠ¨æ€æ¸²æŸ“** - åŸºäº JSON Schema åŠ¨æ€æ¸²æŸ“è¡¨å•
3. **å­—æ®µè”åŠ¨** - å¼ºå¤§çš„å­—æ®µè”åŠ¨æœºåˆ¶
4. **éªŒè¯è§„åˆ™** - çµæ´»çš„éªŒè¯è§„åˆ™é…ç½®
5. **æ€§èƒ½ä¼˜åŒ–** - æŒ‰éœ€æ¸²æŸ“ï¼Œæ€§èƒ½ä¼˜å¼‚

#### å®‰è£…å’Œä½¿ç”¨

```bash
# å®‰è£… Formily
npm install @formily/core @formily/react @formily/antd-v5
```

**åŸºç¡€ä½¿ç”¨ç¤ºä¾‹**:

```tsx
import { createForm } from '@formily/core';
import { FormProvider, FormConsumer, Field } from '@formily/react';
import { FormItem, Input, Select } from '@formily/antd-v5';

const form = createForm({
  initialValues: {},
});

export default function FormilyForm() {
  return (
    <FormProvider form={form}>
      <Field
        name="name"
        title="å§“å"
        required
        component={[Input, { placeholder: 'è¯·è¾“å…¥å§“å' }]}
      />
      <Field
        name="type"
        title="ç±»å‹"
        component={[Select, {
          options: [
            { label: 'ç±»å‹A', value: 'a' },
            { label: 'ç±»å‹B', value: 'b' },
          ],
        }]}
      />
      <FormConsumer>
        {() => (
          <div>
            <pre>{JSON.stringify(form.values, null, 2)}</pre>
          </div>
        )}
      </FormConsumer>
    </FormProvider>
  );
}
```

**åŸºäº Schema çš„åŠ¨æ€è¡¨å•**:

```tsx
import { createForm } from '@formily/core';
import { FormProvider, createSchemaField } from '@formily/react';
import { FormItem, Input, Select, DatePicker } from '@formily/antd-v5';

const SchemaField = createSchemaField({
  components: {
    FormItem,
    Input,
    Select,
    DatePicker,
  },
});

const form = createForm();

const schema = {
  type: 'object',
  properties: {
    name: {
      type: 'string',
      title: 'å§“å',
      required: true,
      'x-component': 'Input',
      'x-decorator': 'FormItem',
    },
    type: {
      type: 'string',
      title: 'ç±»å‹',
      'x-component': 'Select',
      'x-decorator': 'FormItem',
      'x-component-props': {
        options: [
          { label: 'ç±»å‹A', value: 'a' },
          { label: 'ç±»å‹B', value: 'b' },
        ],
      },
    },
    date: {
      type: 'string',
      title: 'æ—¥æœŸ',
      'x-component': 'DatePicker',
      'x-decorator': 'FormItem',
    },
  },
};

export default function SchemaForm() {
  return (
    <FormProvider form={form}>
      <SchemaField schema={schema} />
    </FormProvider>
  );
}
```

#### è¡¨å•è®¾è®¡å™¨

Formily æä¾›å¯è§†åŒ–è¡¨å•è®¾è®¡å™¨ï¼Œå¯ä»¥é€šè¿‡æ‹–æ‹½æ–¹å¼è®¾è®¡è¡¨å•ï¼š

```bash
# å®‰è£…è¡¨å•è®¾è®¡å™¨
npm install @formily/form-designer
```

### æ–¹æ¡ˆä¸‰ï¼šForm Renderï¼ˆé˜¿é‡Œç³»ï¼Œæ¨èå¿«é€Ÿå¼€å‘ï¼‰

**Form Render** æ˜¯é˜¿é‡Œå·´å·´å¼€æºçš„åŸºäº JSON Schema çš„è¡¨å•æ¸²æŸ“å¼•æ“ï¼Œç®€å•æ˜“ç”¨ã€‚

#### ä¼˜åŠ¿
- âœ… é˜¿é‡Œç³»ï¼Œä¸ Ant Design é›†æˆè‰¯å¥½
- âœ… åŸºäº JSON Schemaï¼Œé…ç½®ç®€å•
- âœ… å¼€ç®±å³ç”¨ï¼Œå­¦ä¹ æˆæœ¬ä½
- âœ… æ”¯æŒ Ant Design æ‰€æœ‰ç»„ä»¶

#### é€‚ç”¨åœºæ™¯
- éœ€è¦å¿«é€Ÿå®ç°åŠ¨æ€è¡¨å•
- åŸºäºé…ç½®çš„è¡¨å•ç”Ÿæˆ
- ä¸éœ€è¦å¤æ‚çš„è¡¨å•è®¾è®¡å™¨

#### å®‰è£…å’Œä½¿ç”¨

```bash
# å®‰è£… Form Render
npm install form-render
```

**åŸºç¡€ä½¿ç”¨ç¤ºä¾‹**:

```tsx
import FormRender from 'form-render';
import { Button } from 'antd';

export default function FormRenderExample() {
  const schema = {
    type: 'object',
    properties: {
      name: {
        title: 'å§“å',
        type: 'string',
        required: true,
      },
      age: {
        title: 'å¹´é¾„',
        type: 'number',
        min: 0,
        max: 150,
      },
      email: {
        title: 'é‚®ç®±',
        type: 'string',
        format: 'email',
      },
      department: {
        title: 'éƒ¨é—¨',
        type: 'string',
        enum: ['ç”Ÿäº§éƒ¨', 'è´¨é‡éƒ¨', 'è®¾å¤‡éƒ¨'],
        enumNames: ['ç”Ÿäº§éƒ¨', 'è´¨é‡éƒ¨', 'è®¾å¤‡éƒ¨'],
      },
    },
  };

  const onFinish = (formData) => {
    console.log('è¡¨å•æ•°æ®:', formData);
  };

  return (
    <FormRender
      schema={schema}
      onFinish={onFinish}
      footer={
        <Button type="primary" htmlType="submit">
          æäº¤
        </Button>
      }
    />
  );
}
```

**åŠ¨æ€ Schema ç¤ºä¾‹**:

```tsx
import { useState, useEffect } from 'react';
import FormRender from 'form-render';
import { request } from '@umijs/max';

export default function DynamicFormRender() {
  const [schema, setSchema] = useState({ type: 'object', properties: {} });

  useEffect(() => {
    // ä»åç«¯è·å–è¡¨å•é…ç½®
    request('/api/form-config').then((config) => {
      setSchema(config.schema);
    });
  }, []);

  return (
    <FormRender
      schema={schema}
      onFinish={async (formData) => {
        await request('/api/submit', {
          method: 'POST',
          data: formData,
        });
      }}
    />
  );
}
```

### æ–¹æ¡ˆå››ï¼šant-customize-formï¼ˆç¬¬ä¸‰æ–¹ï¼Œè½»é‡çº§ï¼‰

**ant-customize-form** æ˜¯åŸºäº Ant Design çš„åŠ¨æ€è¡¨å•åº“ï¼Œè½»é‡çº§ï¼Œæ˜“äºä½¿ç”¨ã€‚

#### ä¼˜åŠ¿
- âœ… è½»é‡çº§ï¼Œä½“ç§¯å°
- âœ… åŸºäº Ant Designï¼Œé›†æˆç®€å•
- âœ… API ç®€æ´ï¼Œå­¦ä¹ æˆæœ¬ä½

#### é€‚ç”¨åœºæ™¯
- ç®€å•çš„åŠ¨æ€è¡¨å•éœ€æ±‚
- ä¸éœ€è¦å¤æ‚çš„è¡¨å•è®¾è®¡å™¨
- å¿«é€Ÿå¼€å‘åœºæ™¯

#### å®‰è£…å’Œä½¿ç”¨

```bash
npm install ant-customize-form
```

**ä½¿ç”¨ç¤ºä¾‹**:

```tsx
import { CustomizeForm, ItemTypes } from 'ant-customize-form';
import { Form } from 'antd';

export default function CustomizeFormExample() {
  const [form] = Form.useForm();

  const formItemConfig = [
    {
      itemProps: {
        name: 'name',
        label: 'å§“å',
        rules: [{ required: true, message: 'è¯·è¾“å…¥å§“å' }],
      },
      type: ItemTypes.INPUT,
      typeProps: {
        placeholder: 'è¯·è¾“å…¥å§“å',
        maxLength: 50,
      },
    },
    {
      itemProps: {
        name: 'age',
        label: 'å¹´é¾„',
        rules: [{ required: true }],
      },
      type: ItemTypes.INPUT_NUMBER,
      typeProps: {
        min: 0,
        max: 150,
      },
    },
    {
      itemProps: {
        name: 'department',
        label: 'éƒ¨é—¨',
      },
      type: ItemTypes.SELECT,
      typeProps: {
        options: [
          { label: 'ç”Ÿäº§éƒ¨', value: 'production' },
          { label: 'è´¨é‡éƒ¨', value: 'quality' },
        ],
      },
    },
  ];

  return (
    <CustomizeForm
      form={form}
      formItemConfig={formItemConfig}
      onFinish={(values) => {
        console.log('è¡¨å•å€¼:', values);
      }}
    />
  );
}
```

## ğŸ—ï¸ åç«¯å®ç°æ–¹æ¡ˆ

### FastAPI + Pydantic åŠ¨æ€ Schema

#### æ–¹æ¡ˆä¸€ï¼šä½¿ç”¨ Pydantic åŠ¨æ€æ¨¡å‹

```python
from pydantic import BaseModel, create_model
from typing import Any, Dict, List
from fastapi import FastAPI, HTTPException

app = FastAPI()

# å­—æ®µé…ç½®æ¨¡å‹
class FieldConfig(BaseModel):
    name: str
    type: str  # 'string', 'integer', 'float', 'date', 'boolean'
    required: bool = False
    default: Any = None
    validation: Dict[str, Any] = {}

# åŠ¨æ€åˆ›å»º Pydantic æ¨¡å‹
def create_dynamic_model(fields: List[FieldConfig]):
    field_definitions = {}
    
    for field in fields:
        # æ ¹æ®ç±»å‹ç¡®å®š Python ç±»å‹
        python_type = {
            'string': str,
            'integer': int,
            'float': float,
            'date': str,  # æˆ–ä½¿ç”¨ datetime
            'boolean': bool,
        }.get(field.type, str)
        
        # å¦‚æœå­—æ®µä¸æ˜¯å¿…éœ€çš„ï¼Œä½¿ç”¨ Optional
        if not field.required:
            from typing import Optional
            python_type = Optional[python_type]
        
        field_definitions[field.name] = (python_type, field.default)
    
    return create_model('DynamicForm', **field_definitions)

# API ç«¯ç‚¹
@app.post("/api/dynamic-form/submit")
async def submit_dynamic_form(
    form_config: List[FieldConfig],
    form_data: Dict[str, Any]
):
    # åˆ›å»ºåŠ¨æ€æ¨¡å‹
    DynamicModel = create_dynamic_model(form_config)
    
    try:
        # éªŒè¯æ•°æ®
        validated_data = DynamicModel(**form_data)
        return {"success": True, "data": validated_data.dict()}
    except Exception as e:
        raise HTTPException(status_code=400, detail=str(e))
```

#### æ–¹æ¡ˆäºŒï¼šä½¿ç”¨ JSON Schema éªŒè¯

```python
from fastapi import FastAPI, HTTPException
from pydantic import BaseModel, ValidationError
import jsonschema

app = FastAPI()

class FormConfig(BaseModel):
    schema: dict  # JSON Schema

@app.post("/api/dynamic-form/validate")
async def validate_form_data(
    form_config: FormConfig,
    form_data: dict
):
    try:
        # ä½¿ç”¨ JSON Schema éªŒè¯
        jsonschema.validate(instance=form_data, schema=form_config.schema)
        return {"success": True, "data": form_data}
    except jsonschema.ValidationError as e:
        raise HTTPException(status_code=400, detail=str(e))
```

#### æ–¹æ¡ˆä¸‰ï¼šæ•°æ®åº“å­˜å‚¨å­—æ®µé…ç½®

```python
from tortoise.models import Model
from tortoise import fields

class FormTemplate(Model):
    id = fields.IntField(pk=True)
    name = fields.CharField(max_length=100)
    description = fields.TextField(null=True)
    field_configs = fields.JSONField()  # å­˜å‚¨å­—æ®µé…ç½®
    created_at = fields.DatetimeField(auto_now_add=True)
    updated_at = fields.DatetimeField(auto_now=True)

class FormData(Model):
    id = fields.IntField(pk=True)
    template_id = fields.IntField()
    data = fields.JSONField()  # å­˜å‚¨è¡¨å•æ•°æ®
    created_at = fields.DatetimeField(auto_now_add=True)
```

## ğŸ“Š æ–¹æ¡ˆå¯¹æ¯”æ€»ç»“

| æ–¹æ¡ˆ | å¤æ‚åº¦ | åŠŸèƒ½ä¸°å¯Œåº¦ | å­¦ä¹ æˆæœ¬ | æ¨èåœºæ™¯ |
|------|--------|-----------|---------|---------|
| **Ant Design åŸç”Ÿ** | â­â­ | â­â­â­ | â­ | ç®€å•åŠ¨æ€å­—æ®µ |
| **Formily** | â­â­â­â­ | â­â­â­â­â­ | â­â­â­ | å¤æ‚è¡¨å•ã€è¡¨å•è®¾è®¡å™¨ |
| **Form Render** | â­â­â­ | â­â­â­â­ | â­â­ | åŸºäº Schema çš„å¿«é€Ÿå¼€å‘ |
| **ant-customize-form** | â­â­ | â­â­â­ | â­ | è½»é‡çº§åŠ¨æ€è¡¨å• |

## ğŸ¯ æœ€ç»ˆæ¨èæ–¹æ¡ˆ

**ä½¿ç”¨ Formilyï¼ˆæœ€ç»ˆæŠ€æœ¯é€‰å‹ï¼‰**

Formily æ˜¯ **RiverEdge SaaS å¤šç§Ÿæˆ·æ¡†æ¶**çš„æœ€ç»ˆæŠ€æœ¯é€‰å‹ï¼Œé€‚ç”¨äºæ‰€æœ‰è¡¨å•è‡ªå®šä¹‰å­—æ®µåœºæ™¯ï¼š

- âœ… æä¾›å¯è§†åŒ–è¡¨å•è®¾è®¡å™¨
- âœ… æ”¯æŒå¤æ‚çš„å­—æ®µè”åŠ¨å’Œæ¡ä»¶æ¸²æŸ“
- âœ… æ”¯æŒåŠ¨æ€å­—æ®µé…ç½®
- âœ… ä¼ä¸šçº§è¡¨å•åº”ç”¨çš„æœ€ä½³é€‰æ‹©
- âœ… ä¸ Ant Design å®Œç¾é›†æˆ
- âœ… ç±»å‹å®‰å…¨ï¼Œå¼€å‘ä½“éªŒå¥½

## ğŸš€ å®æ–½å»ºè®®

### ç¬¬ä¸€é˜¶æ®µï¼šåŸºç¡€åŠŸèƒ½ï¼ˆä½¿ç”¨ Formilyï¼‰

1. å®‰è£…å’Œé…ç½® Formily
2. å®ç°å­—æ®µé…ç½®ç®¡ç†ï¼ˆåç«¯å­˜å‚¨ï¼‰
3. å®ç°åŠ¨æ€è¡¨å•æ¸²æŸ“ï¼ˆå‰ç«¯ï¼‰
4. å®ç°åŸºç¡€å­—æ®µç±»å‹ï¼ˆæ–‡æœ¬ã€æ•°å­—ã€æ—¥æœŸã€é€‰æ‹©ï¼‰

### ç¬¬äºŒé˜¶æ®µï¼šå¢å¼ºåŠŸèƒ½

1. å®ç°å¯è§†åŒ–è¡¨å•è®¾è®¡å™¨
2. å®ç°å­—æ®µè”åŠ¨
3. å®ç°æ¡ä»¶æ¸²æŸ“
4. å®ç°è¡¨å•æ¨¡æ¿ç®¡ç†

## ğŸ“ æ•°æ®åº“è®¾è®¡

### è¡¨å•æ¨¡æ¿è¡¨

```sql
CREATE TABLE form_templates (
    id SERIAL PRIMARY KEY,
    name VARCHAR(100) NOT NULL,
    description TEXT,
    field_configs JSONB NOT NULL,  -- å­—æ®µé…ç½®
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

### å­—æ®µé…ç½®ç»“æ„ï¼ˆJSONï¼‰

```json
{
  "fields": [
    {
      "id": "field_1",
      "name": "productName",
      "label": "äº§å“åç§°",
      "type": "text",
      "required": true,
      "placeholder": "è¯·è¾“å…¥äº§å“åç§°",
      "validation": {
        "minLength": 2,
        "maxLength": 100
      },
      "order": 1
    },
    {
      "id": "field_2",
      "name": "quantity",
      "label": "æ•°é‡",
      "type": "number",
      "required": true,
      "validation": {
        "min": 1,
        "max": 10000
      },
      "order": 2
    }
  ]
}
```

## âœ… æ€»ç»“

**æœ€ç»ˆæŠ€æœ¯é€‰å‹ï¼šFormily**

1. **æœ€ç»ˆæ–¹æ¡ˆ**: ä½¿ç”¨ Formilyï¼ˆæä¾›è¡¨å•è®¾è®¡å™¨å’Œå¼ºå¤§åŠŸèƒ½ï¼‰
   - æ”¯æŒå¤æ‚è¡¨å•åœºæ™¯
   - æä¾›å¯è§†åŒ–è¡¨å•è®¾è®¡å™¨
   - æ”¯æŒå­—æ®µè”åŠ¨å’Œæ¡ä»¶æ¸²æŸ“
   - ä¼ä¸šçº§è¡¨å•åº”ç”¨çš„æœ€ä½³é€‰æ‹©

2. **åç«¯**: ä½¿ç”¨ Pydantic åŠ¨æ€æ¨¡å‹ + PostgreSQL JSONB å­˜å‚¨å­—æ®µé…ç½®
3. **æ•°æ®å­˜å‚¨**: ä½¿ç”¨ PostgreSQL JSONB å­˜å‚¨å­—æ®µé…ç½®

**æœ€ç»ˆæŠ€æœ¯æ ˆ**: 
- **å‰ç«¯**: Formily (@formily/core + @formily/react + @formily/antd-v5)
- **åç«¯**: FastAPI + Pydantic åŠ¨æ€æ¨¡å‹ + PostgreSQL JSONB

