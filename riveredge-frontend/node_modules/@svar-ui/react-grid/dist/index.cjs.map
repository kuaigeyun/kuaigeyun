{"version":3,"file":"index.cjs","sources":["../src/context.js","../src/helpers/actions/onresize.js","../src/helpers/actions/reorder.js","../src/helpers/actions/dragscroll.js","../src/helpers/columnWidth.js","../src/components/Cell.jsx","../src/helpers/actions/resize.js","../src/components/inlineFilters/Text.jsx","../src/components/inlineFilters/Richselect.jsx","../src/components/inlineFilters/filters.js","../src/components/inlineFilters/Filter.jsx","../src/components/HeaderCell.jsx","../src/components/FooterCell.jsx","../src/components/HeaderFooter.jsx","../src/components/Overlay.jsx","../src/components/inlineEditors/Text.jsx","../src/components/inlineEditors/Combo.jsx","../src/components/inlineEditors/Datepicker.jsx","../src/components/inlineEditors/Richselect.jsx","../src/components/inlineEditors/editors.js","../src/components/inlineEditors/Editor.jsx","../src/components/print/HeaderFooter.jsx","../src/components/print/Grid.jsx","../src/components/print/Print.jsx","../src/components/Layout.jsx","../src/components/Grid.jsx","../src/components/menus/HeaderMenuItem.jsx","../src/components/menus/HeaderMenu.jsx","../src/components/Tooltip.jsx","../src/components/menus/ContextMenu.jsx","../src/components/Toolbar.jsx","../src/themes/Material.jsx","../src/themes/Willow.jsx","../src/themes/WillowDark.jsx","../src/index.js"],"sourcesContent":["import { createContext } from 'react';\n\nconst store = createContext(null);\nexport default store;\n","export function onresize(node, handler) {\n  const ro = new ResizeObserver((data) => {\n    requestAnimationFrame(() => handler(data[0].contentRect));\n  });\n\n  ro.observe(node.parentNode);\n\n  return {\n    destroy() {\n      ro.disconnect();\n    },\n  };\n}\n","import { locate, id } from '@svar-ui/lib-dom';\n\nconst SHIFT = 5;\nconst LONG_TOUCH_DELAY = 700;\n\nfunction getID(node) {\n  return id(node.getAttribute('data-id'));\n}\n\nexport function getOffset(node) {\n  const box = node.getBoundingClientRect();\n  const body = document.body;\n  const top = box.top + body.scrollTop - body.clientTop || 0;\n  const left = box.left + body.scrollLeft - body.clientLeft || 0;\n  return {\n    y: Math.round(top),\n    x: Math.round(left),\n    width: node.offsetWidth,\n    height: node.offsetHeight,\n  };\n}\n\nexport function getPos(ev, node) {\n  const offset = getOffset(node);\n  return { x: ev.clientX - offset.x, y: ev.clientY - offset.y };\n}\n\nexport function reorder(node, config) {\n  const cfg = config.current;\n  let context = null;\n  let touchTimer, startPos;\n  let started = false,\n    touched = false;\n  const container = document.createElement('DIV');\n  container.className = 'wx-drag-zone';\n  container.setAttribute('tabindex', -1);\n\n  function resetTimer() {\n    clearTimeout(touchTimer);\n    touchTimer = null;\n  }\n\n  function down(ev) {\n    const source = locate(ev);\n    if (!source) return;\n\n    context = {\n      container,\n      sourceNode: ev.target,\n      from: getID(source),\n      pos: getPos(ev, node),\n    };\n    startPos = context.pos;\n    move(ev);\n  }\n\n  function move(ev) {\n    if (!context) return;\n    const p = (context.pos = getPos(ev, node));\n\n    if (!started) {\n      if (\n        !touched &&\n        !ev?.target?.getAttribute('draggable-data') &&\n        Math.abs(startPos.x - p.x) < SHIFT &&\n        Math.abs(startPos.y - p.y) < SHIFT\n      )\n        return;\n      else {\n        if (start(ev) === false) return end();\n      }\n    }\n\n    if (touched) {\n      const scrollLeft =\n        window.scrollX ||\n        document.documentElement.scrollLeft ||\n        document.body.scrollLeft;\n      const scrollTop =\n        window.scrollY ||\n        document.documentElement.scrollTop ||\n        document.body.scrollTop;\n\n      context.targetNode = document.elementFromPoint(\n        ev.pageX - scrollLeft,\n        ev.pageY - scrollTop,\n      );\n    } else context.targetNode = ev.target;\n\n    if (cfg.move) cfg.move(ev, context);\n\n    container.style.left = -(context.offset ? context.offset.x : 0) + 'px';\n    container.style.top =\n      context.pos.y + (context.offset ? context.offset.y : 0) + 'px';\n  }\n\n  function up(ev) {\n    if (container.parentNode) container.parentNode.removeChild(container);\n    container.innerHTML = '';\n\n    if (started && cfg.end) cfg.end(ev, context);\n    context = startPos = null;\n\n    end();\n  }\n\n  function handleMouseDown(ev) {\n    if (cfg.getReorder && !cfg.getReorder()) return;\n    if (ev.button !== 0) return;\n\n    // native dragscroll prevention\n    preventUserSelect(ev);\n\n    window.addEventListener('mousemove', handleMouseMove);\n    window.addEventListener('mouseup', handleMouseUp);\n\n    down(ev);\n  }\n\n  function handleMouseMove(ev) {\n    move(ev);\n  }\n\n  function handleMouseUp(ev) {\n    up(ev);\n  }\n\n  function handleTouchStart(ev) {\n    if (cfg.getReorder && !cfg.getReorder()) return;\n\n    touchTimer = setTimeout(() => {\n      touched = true;\n      down(ev.touches[0]);\n    }, LONG_TOUCH_DELAY);\n\n    // prevent user selection on touch (pre-drag)\n    preventUserSelect(ev);\n\n    function handleTouchEnd() {\n      if (touchTimer) resetTimer();\n\n      // removed elements will still have touch events pointed at them, and these events won't necessarily bubble up\n      // this creates an issue where the touchmove/touchend events are no longer called if we attach them directly to the parent node, and the event target is removed from DOM\n      // best practice suggests attaching event handlers directly to the touch event target\n      // in this case, touch events will continue to fire normally\n      // https://developer.mozilla.org/en-US/docs/Web/API/Touch/target\n\n      ev.target.removeEventListener('touchmove', handleTouchMove);\n      ev.target.removeEventListener('touchend', handleTouchEnd);\n\n      up(ev);\n    }\n\n    ev.target.addEventListener('touchmove', handleTouchMove);\n    ev.target.addEventListener('touchend', handleTouchEnd);\n    node.addEventListener('contextmenu', handleContext);\n  }\n\n  function handleTouchMove(ev) {\n    if (started) {\n      ev.preventDefault();\n      move(ev.touches[0]);\n    } else if (touchTimer) resetTimer();\n  }\n\n  function handleContext(ev) {\n    if (started || touchTimer) {\n      ev.preventDefault();\n      return false;\n    }\n  }\n\n  function preventDefault(ev) {\n    ev.preventDefault();\n  }\n\n  function preventUserSelect(ev) {\n    if (!cfg.getDraggableInfo) return;\n    const { hasDraggable } = cfg.getDraggableInfo();\n\n    if (!hasDraggable || ev.target.getAttribute('draggable-data')) {\n      document.body.style.userSelect = 'none';\n      document.body.style.webkitUserSelect = 'none';\n    }\n  }\n\n  function start(ev) {\n    started = true;\n\n    if (cfg.start) {\n      if (cfg.start(ev, context) === false) return false;\n      else {\n        node.appendChild(container);\n        document.body.style.cursor = 'move';\n      }\n    }\n  }\n\n  function end(full) {\n    started = touched = false;\n    document.body.style.cursor = '';\n    document.body.style.userSelect = '';\n    document.body.style.webkitUserSelect = '';\n\n    window.removeEventListener('mousemove', handleMouseMove);\n    window.removeEventListener('mouseup', handleMouseUp);\n\n    if (full) {\n      node.removeEventListener('mousedown', handleMouseDown);\n      node.removeEventListener('touchstart', handleTouchStart);\n      node.removeEventListener('dragstart', preventDefault);\n    }\n  }\n\n  node.addEventListener('mousedown', handleMouseDown);\n  node.addEventListener('touchstart', handleTouchStart);\n  node.addEventListener('dragstart', preventDefault);\n\n  return {\n    destroy() {\n      end(true);\n    },\n  };\n}\n","import { getPos } from './reorder';\n\nconst SCROLL_SPEED_DELTA = 0.004;\n\nfunction initScrollState() {\n  return {\n    dirX: 0,\n    dirY: 0,\n    scrollSpeedFactor: 1,\n  };\n}\n\nexport function tryAutoScroll(ev, box, context, dragScrollConfig) {\n  const { node, left, top, bottom, sense, xScroll, yScroll } = dragScrollConfig;\n  const rPos = getPos(ev, node);\n\n  if (!context.scrollState) context.scrollState = initScrollState();\n\n  let newDirX = 0;\n  let newDirY = 0;\n\n  if (rPos.x < left + sense) {\n    newDirX = -1;\n  } else if (rPos.x > box.width - sense) {\n    newDirX = 1;\n  }\n\n  if (rPos.y < top + Math.round(sense / 2)) {\n    newDirY = -1;\n  } else if (rPos.y > box.height - bottom - Math.round(sense / 2)) {\n    newDirY = 1;\n  }\n\n  if (\n    context.scrollState.dirX !== newDirX ||\n    context.scrollState.dirY !== newDirY\n  ) {\n    resetAutoScroll(context);\n    context.scrollState.dirX = newDirX;\n    context.scrollState.dirY = newDirY;\n  }\n\n  if (\n    (xScroll && context.scrollState.dirX !== 0) ||\n    (yScroll && context.scrollState.dirY !== 0)\n  ) {\n    startAutoScroll(context, dragScrollConfig, {\n      x: context.scrollState.dirX,\n      y: context.scrollState.dirY,\n    });\n  }\n}\n\nexport function startAutoScroll(context, config, dir) {\n  if (context.autoScrollTimer) return;\n\n  context.autoScrollTimer = setTimeout(() => {\n    context.activeAutoScroll = setInterval(\n      autoScroll,\n      15,\n      context,\n      config,\n      dir,\n    );\n  }, 250);\n}\n\nexport function resetAutoScroll(context) {\n  context.scrollSpeedFactor = 1;\n  if (context.autoScrollTimer) {\n    context.autoScrollTimer = clearTimeout(context.autoScrollTimer);\n    context.activeAutoScroll = clearInterval(context.activeAutoScroll);\n  }\n}\n\nfunction autoScroll(context, config, dir) {\n  const { x, y } = dir;\n\n  context.scrollSpeedFactor += SCROLL_SPEED_DELTA;\n\n  if (x !== 0) autoXScroll(context, config, x);\n  if (y !== 0) autoYScroll(context, config, y);\n}\n\nfunction autoYScroll(context, config, dir) {\n  const scroll = config.node.scrollTop;\n\n  autoScrollTo(\n    scroll + Math.round(config.sense / 3) * context.scrollSpeedFactor * dir,\n    'scrollTop',\n    config,\n  );\n}\n\nfunction autoXScroll(context, config, dir) {\n  const scroll = config.node.scrollLeft;\n\n  autoScrollTo(\n    scroll + Math.round(config.sense / 3) * context.scrollSpeedFactor * dir,\n    'scrollLeft',\n    config,\n  );\n}\n\nfunction autoScrollTo(value, mode, config) {\n  config.node[mode] = value;\n}\n","export function getStyle(width, flexgrow, fixed, left, right, height) {\n  const style = {};\n\n  if (width) {\n    style.width = `${width}px`;\n    style.minWidth = `${width}px`;\n  }\n\n  if (flexgrow) {\n    style.flexGrow = flexgrow;\n  }\n\n  if (height) {\n    style.height = `${height}px`;\n  }\n\n  if (fixed) {\n    style.position = 'sticky';\n    if (fixed.left) {\n      style.left = `${left}px`;\n    }\n    if (fixed.right) {\n      style.right = `${right}px`;\n    }\n  }\n\n  return style;\n}\n\nexport function getCssName(column, cell, columnStyle) {\n  let css = '';\n\n  if (column.fixed) {\n    for (const pos in column.fixed) {\n      css += column.fixed[pos] === -1 ? 'wx-shadow ' : 'wx-fixed ';\n    }\n  }\n  css += cell.rowspan > 1 ? 'wx-rowspan ' : '';\n  css += cell.colspan > 1 ? 'wx-colspan ' : '';\n  css += cell.vertical ? 'wx-vertical ' : '';\n  css += columnStyle ? columnStyle(column) + ' ' : '';\n  return css;\n}\n","import { useEffect, useMemo, useRef, useContext, useCallback } from 'react';\nimport storeContext from '../context';\nimport { useStore } from '@svar-ui/lib-react';\nimport { useWritableProp } from '@svar-ui/lib-react';\nimport { getStyle } from '../helpers/columnWidth';\nimport { getRenderValue } from '@svar-ui/grid-store';\nimport './Cell.css';\n\nexport default function Cell(props) {\n  const {\n    row,\n    column,\n    cellStyle = null,\n    columnStyle = null,\n    children,\n  } = props;\n\n  const [focusable, setFocusable] = useWritableProp(props.focusable);\n\n  const api = useContext(storeContext);\n  const focusCell = useStore(api, 'focusCell');\n  const search = useStore(api, 'search');\n  const reorder = useStore(api, 'reorder');\n\n  const shouldHighlight = useMemo(\n    () => search?.rows[row.id] && search.rows[row.id][column.id],\n    [search, row.id, column.id],\n  );\n\n  const style = useMemo(\n    () =>\n      getStyle(\n        column.width,\n        column.flexgrow,\n        column.fixed,\n        column.left,\n        column.right,\n      ),\n    [column.width, column.flexgrow, column.fixed, column.left, column.right],\n  );\n\n  function buildCellCss(columnStyleFn, cellStyleFn) {\n    let css = 'wx-cell';\n    css += column.fixed\n      ? ' ' + (column.fixed === -1 ? 'wx-shadow' : 'wx-fixed')\n      : '';\n    css += columnStyleFn ? ' ' + columnStyleFn(column) : '';\n    css += cellStyleFn ? ' ' + cellStyleFn(row, column) : '';\n    css += column.treetoggle ? ' wx-tree-cell' : '';\n    return css;\n  }\n\n  const css = useMemo(\n    () => buildCellCss(columnStyle, cellStyle),\n    [columnStyle, cellStyle, column, row],\n  );\n\n  const isDraggable = useMemo(() => {\n    return typeof column.draggable === 'function'\n      ? column.draggable(row, column) !== false\n      : column.draggable;\n  }, [column, row]);\n\n  const cellElRef = useRef(null);\n\n  useEffect(() => {\n    if (cellElRef.current && focusable) {\n      const needFocus =\n        focusCell?.row === row.id && focusCell?.column === column.id;\n      if (needFocus) cellElRef.current.focus();\n    }\n  }, [focusCell, focusable, row.id, column.id]);\n\n  const toggleFocusAction = useCallback(() => {\n    if (focusable && !focusCell) {\n      api.exec('focus-cell', {\n        row: row.id,\n        column: column.id,\n        eventSource: 'focus',\n      });\n    }\n  }, [api, focusable, focusCell, row.id, column.id]);\n\n  useEffect(() => {\n    return () => {\n      if (focusable && focusCell) {\n        api.exec('focus-cell', { eventSource: 'destroy' });\n        setFocusable(false);\n      }\n    };\n  }, [api, setFocusable]);\n\n  function highlightText(text) {\n    const regex = new RegExp(`(${search.value.trim()})`, 'gi');\n    const parts = String(text).split(regex);\n\n    return parts.map((text) => ({ text, highlight: regex.test(text) }));\n  }\n\n  const className = useMemo(() => {\n    const shadowToggle =\n      (column.fixed && column.fixed.left === -1) || column.fixed.right === -1;\n    const fixedRightToggle = column.fixed && column.fixed.right;\n    return [\n      css,\n      shadowToggle ? 'wx-shadow' : '',\n      fixedRightToggle ? 'wx-fixed-right' : '',\n    ]\n      .filter(Boolean)\n      .join(' ');\n  }, [css, column]);\n\n  const CellComponent = column.cell;\n\n  return (\n    <div\n      className={'wx-TSCaXsGV ' + className}\n      ref={cellElRef}\n      onFocus={toggleFocusAction}\n      style={style}\n      data-row-id={row.id}\n      data-col-id={column.id}\n      tabIndex={focusable ? '0' : '-1'}\n      role={'gridcell'}\n      aria-colindex={column._colindex}\n      aria-readonly={!column.editor ? true : undefined}\n    >\n      {reorder && column.draggable ? (\n        isDraggable ? (\n          <i\n            // eslint-disable-next-line react/no-unknown-property\n            draggable-data=\"true\"\n            className=\"wx-TSCaXsGV wx-draggable wxi-drag\"\n          ></i>\n        ) : (\n          <i className=\"wx-TSCaXsGV wx-draggable-stub\"></i>\n        )\n      ) : null}\n\n      {column.treetoggle ? (\n        <>\n          <span style={{ marginLeft: `${row.$level * 28}px` }}></span>\n          {row.$count ? (\n            <i\n              data-action=\"toggle-row\"\n              className={`wx-TSCaXsGV wx-table-tree-toggle wxi-menu-${\n                row.open !== false ? 'down' : 'right'\n              }`}\n            ></i>\n          ) : null}\n        </>\n      ) : null}\n\n      {CellComponent ? (\n        <CellComponent\n          api={api}\n          row={row}\n          column={column}\n          onAction={({ action, data }) => api.exec(action, data)}\n        />\n      ) : children ? (\n        children()\n      ) : shouldHighlight ? (\n        <span>\n          {highlightText(getRenderValue(row, column)).map(\n            ({ highlight, text }, index) =>\n              highlight ? (\n                <mark key={index} className=\"wx-TSCaXsGV wx-search\">\n                  {text}\n                </mark>\n              ) : (\n                <span key={index}>{text}</span>\n              ),\n          )}\n        </span>\n      ) : (\n        getRenderValue(row, column)\n      )}\n    </div>\n  );\n}\n","export function resize(node, config) {\n  let x, dx;\n\n  function down(ev) {\n    x = ev.clientX;\n\n    node.style.opacity = 1;\n\n    document.body.style.cursor = 'ew-resize';\n    document.body.style.userSelect = 'none';\n\n    window.addEventListener('mousemove', move);\n    window.addEventListener('mouseup', up);\n\n    if (config && config.down) config.down(node);\n  }\n\n  function move(ev) {\n    dx = ev.clientX - x;\n\n    if (config && config.move) config.move(dx);\n  }\n\n  function up() {\n    node.style.opacity = '';\n\n    document.body.style.cursor = '';\n    document.body.style.userSelect = '';\n\n    if (config && config.up) config.up(dx);\n\n    window.removeEventListener('mousemove', move);\n    window.removeEventListener('mouseup', up);\n  }\n\n  node.addEventListener('mousedown', down);\n\n  return {\n    destroy() {\n      node.removeEventListener('mousedown', down);\n    },\n  };\n}\n","import { Text } from '@svar-ui/react-core';\nimport './Text.css';\n\nexport default function Component({ filter, column, action, filterValue }) {\n  function filterRows({ value }) {\n    action({ value, key: column.id });\n  }\n\n  return (\n    <Text\n      {...(filter.config ?? {})}\n      value={filterValue}\n      onChange={filterRows}\n    />\n  );\n}\n","import { useMemo, useContext } from 'react';\nimport { RichSelect } from '@svar-ui/react-core';\nimport { getValue } from '@svar-ui/grid-store';\nimport storeContext from '../../context';\nimport { useStore } from '@svar-ui/lib-react';\nimport './Richselect.css';\n\nexport default function Richselect({ filter, column, action, filterValue }) {\n  const api = useContext(storeContext);\n  const data = useStore(api, 'flatData');\n\n  const options = useMemo(\n    () => filter?.config?.options || column?.options || getOptions(data),\n    [filter, column, data],\n  );\n\n  const template = useMemo(() => filter?.config?.template, [filter]);\n\n  function getOptions() {\n    const options = [];\n    data.forEach((d) => {\n      const value = getValue(d, column);\n      if (!options.includes(value)) options.push(value);\n    });\n    return options.map((opt) => ({ id: opt, label: opt }));\n  }\n\n  function filterRows({ value }) {\n    action({ value, key: column.id });\n  }\n\n  function handleKeyDown(ev) {\n    if (ev.key !== 'Tab') ev.preventDefault();\n  }\n\n  return (\n    <div style={{ width: '100%' }} onKeyDown={handleKeyDown}>\n      <RichSelect\n        placeholder={''}\n        clear={true}\n        {...(filter?.config ?? {})}\n        options={options}\n        value={filterValue}\n        onChange={filterRows}\n      >\n        {(option) => (template ? template(option) : option.label)}\n      </RichSelect>\n    </div>\n  );\n}\n","import Text from './Text.jsx';\nimport Richselect from './Richselect.jsx';\n\nexport const filters = {\n  text: Text,\n  richselect: Richselect,\n};\n","import { useContext, useMemo } from 'react';\nimport storeContext from '../../context';\nimport { filters } from './filters';\nimport { useStore } from '@svar-ui/lib-react';\n\nexport default function Filter({ filter, column }) {\n  const api = useContext(storeContext);\n  const filterValues = useStore(api, 'filterValues');\n\n  function filterRows(data) {\n    api.exec('filter-rows', data);\n  }\n\n  const Component = useMemo(() => filters[filter.type], [filter.type]);\n\n  return (\n    <Component\n      filter={filter}\n      column={column}\n      action={filterRows}\n      filterValue={filterValues[column.id]}\n    />\n  );\n}\n","import { useEffect, useMemo, useCallback, useRef, useContext } from 'react';\nimport storeContext from '../context';\nimport { useStore } from '@svar-ui/lib-react';\nimport { resize } from '../helpers/actions/resize';\nimport { getCssName, getStyle } from '../helpers/columnWidth';\nimport Filter from './inlineFilters/Filter.jsx';\nimport './HeaderCell.css';\n\nexport default function HeaderCell(props) {\n  const {\n    cell,\n    column,\n    row,\n    lastRow,\n    sortRow,\n    columnStyle,\n    bodyHeight,\n    hasSplit,\n  } = props;\n\n  const api = useContext(storeContext);\n  const sortMarksValue = useStore(api, 'sortMarks');\n\n  const sortMark = useMemo(() => {\n    return sortMarksValue ? sortMarksValue[column.id] : undefined;\n  }, [sortMarksValue, column.id]);\n\n  const startRef = useRef();\n\n  const down = useCallback(\n    (node) => {\n      startRef.current = cell.flexgrow\n        ? node.parentNode.clientWidth\n        : cell.width;\n    },\n    [cell.flexgrow, cell.width],\n  );\n\n  const resizeColumn = useCallback(\n    (dx, inProgress) => {\n      api.exec('resize-column', {\n        id: cell.id,\n        width: Math.max(1, (startRef.current || 0) + dx),\n        inProgress,\n      });\n    },\n    [api, cell.id],\n  );\n\n  const move = useCallback((dx) => resizeColumn(dx, true), [resizeColumn]);\n  const up = useCallback((dx) => resizeColumn(dx, false), [resizeColumn]);\n\n  const sort = useCallback(\n    (ev) => {\n      if (!column.sort || cell.filter) return;\n      let order = sortMark?.order;\n      if (order) {\n        order = order === 'asc' ? 'desc' : 'asc';\n      }\n      api.exec('sort-rows', { key: cell.id, add: ev.ctrlKey, order });\n    },\n    [api, cell.id, cell.filter, column.sort, sortMark?.order],\n  );\n\n  const collapse = useCallback(\n    (ev) => {\n      if (ev) ev.stopPropagation();\n      api.exec('collapse-column', { id: cell.id, row });\n    },\n    [api, cell.id, row],\n  );\n\n  const toggleCollapseColumn = useCallback(\n    (ev) => {\n      if (ev.key === 'Enter') collapse();\n    },\n    [collapse],\n  );\n\n  const toggleSortColumn = useCallback(\n    (ev) => {\n      if (ev.key === 'Enter' && !cell.filter) sort(ev);\n    },\n    [sort, cell.filter],\n  );\n\n  const isCollapsed = useMemo(\n    () => cell.collapsed && column.collapsed,\n    [cell.collapsed, column.collapsed],\n  );\n  const overlay = useMemo(\n    () => isCollapsed && !hasSplit && cell.collapsible !== 'header',\n    [isCollapsed, hasSplit, cell.collapsible],\n  );\n  const collapsedTextStyle = useMemo(\n    () => (overlay ? { top: -bodyHeight / 2, position: 'absolute' } : {}),\n    [overlay, bodyHeight],\n  );\n\n  const cellStyle = useMemo(\n    () =>\n      getStyle(\n        cell.width,\n        cell.flexgrow,\n        column.fixed,\n        column.left,\n        cell.right ?? column.right,\n        cell.height + (isCollapsed && overlay ? bodyHeight : 0),\n      ),\n    [\n      cell.width,\n      cell.flexgrow,\n      column.fixed,\n      column.left,\n      cell.right,\n      column.right,\n      cell.height,\n      isCollapsed,\n      overlay,\n      bodyHeight,\n    ],\n  );\n\n  const css = useMemo(\n    () => getCssName(column, cell, columnStyle),\n    [column, cell, columnStyle],\n  );\n\n  const getCell = useCallback(() => {\n    return Object.fromEntries(\n      Object.entries(cell).filter(([key]) => key !== 'cell'),\n    );\n  }, [cell]);\n\n  const collapsedClassName = `wx-cell ${css} ${cell.css || ''} wx-collapsed`;\n  const normalClassName = [\n    'wx-cell',\n    css,\n    cell.css || '',\n    cell.filter ? 'wx-filter' : '',\n    column.fixed && column.fixed.right ? 'wx-fixed-right' : '',\n  ]\n    .filter(Boolean)\n    .join(' ');\n\n  const gripRef = useRef(null);\n  useEffect(() => {\n    const node = gripRef.current;\n    if (!node) return;\n    const cleanup = resize(node, { down, move, up });\n    return () => {\n      if (typeof cleanup === 'function') cleanup();\n    };\n  }, [down, move, up, resize]);\n\n  if (isCollapsed) {\n    return (\n      <div\n        className={'wx-RsQD74qC ' + collapsedClassName}\n        style={cellStyle}\n        role=\"button\"\n        aria-label={`Expand column ${cell.text || ''}`}\n        aria-expanded={!cell.collapsed}\n        tabIndex={0}\n        onKeyDown={toggleCollapseColumn}\n        onClick={collapse}\n        data-header-id={column.id}\n      >\n        <div className=\"wx-RsQD74qC wx-text\" style={collapsedTextStyle}>\n          {cell.text || ''}\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div\n      className={'wx-RsQD74qC ' + normalClassName}\n      style={cellStyle}\n      onClick={sort}\n      data-header-id={column.id}\n      tabIndex={!cell._hidden && column.sort && !cell.filter ? 0 : undefined}\n      role=\"columnheader\"\n      aria-colindex={cell._colindex}\n      aria-colspan={cell.colspan > 1 ? cell.colspan : undefined}\n      aria-rowspan={cell.rowspan > 1 ? cell.rowspan : undefined}\n      aria-sort={\n        !sortMark?.order || cell.filter\n          ? 'none'\n          : sortMark?.order === 'asc'\n            ? 'ascending'\n            : 'descending'\n      }\n      onKeyDown={toggleSortColumn}\n    >\n      {cell.collapsible ? (\n        <div\n          className=\"wx-RsQD74qC wx-collapse\"\n          role=\"button\"\n          aria-label={cell.collapsed ? 'Expand column' : 'Collapse column'}\n          aria-expanded={!cell.collapsed}\n          tabIndex={0}\n          onKeyDown={toggleCollapseColumn}\n          onClick={collapse}\n        >\n          <i\n            className={`wx-RsQD74qC wxi-angle-${cell.collapsed ? 'down' : 'right'}`}\n          ></i>\n        </div>\n      ) : null}\n\n      {cell.cell ? (\n        (() => {\n          const CellComponent = cell.cell;\n          return (\n            <CellComponent\n              api={api}\n              cell={getCell()}\n              column={column}\n              row={row}\n              onAction={({ action, data }) => api.exec(action, data)}\n            />\n          );\n        })()\n      ) : cell.filter ? (\n        <Filter filter={cell.filter} column={column} />\n      ) : (\n        <div className=\"wx-RsQD74qC wx-text\">{cell.text || ''}</div>\n      )}\n\n      {column.resize && lastRow && !cell._hidden ? (\n        <div\n          className=\"wx-RsQD74qC wx-grip\"\n          role=\"presentation\"\n          aria-label=\"Resize column\"\n          ref={gripRef}\n          onClick={(ev) => ev.stopPropagation()}\n        >\n          <div></div>\n        </div>\n      ) : null}\n\n      {sortRow ? (\n        <div className=\"wx-RsQD74qC wx-sort\">\n          {sortMark ? (\n            <>\n              {typeof sortMark.index !== 'undefined' ? (\n                <div className=\"wx-RsQD74qC wx-order\">{sortMark.index + 1}</div>\n              ) : null}\n              <i\n                className={`wx-RsQD74qC wxi-arrow-${sortMark.order === 'asc' ? 'up' : 'down'}`}\n              ></i>\n            </>\n          ) : null}\n        </div>\n      ) : null}\n    </div>\n  );\n}\n","import React, { useMemo, useContext, useCallback } from 'react';\nimport storeContext from '../context';\nimport { getStyle, getCssName } from '../helpers/columnWidth';\nimport './FooterCell.css';\n\nfunction FooterCell({ cell, column, row, columnStyle }) {\n  const api = useContext(storeContext);\n\n  const style = useMemo(\n    () =>\n      getStyle(\n        cell?.width,\n        cell?.flexgrow,\n        column?.fixed,\n        column?.left,\n        cell?.right ?? column?.right,\n        cell?.height,\n      ),\n    [\n      cell?.width,\n      cell?.flexgrow,\n      column?.fixed,\n      column?.left,\n      cell?.right,\n      column?.right,\n      cell?.height,\n    ],\n  );\n\n  const css = useMemo(\n    () => getCssName(column, cell, columnStyle),\n    [column, cell, columnStyle],\n  );\n\n  const getCell = useCallback(() => {\n    return Object.fromEntries(\n      Object.entries(cell || {}).filter(([key]) => key !== 'cell'),\n    );\n  }, [cell]);\n\n  const className =\n    `wx-6Sdi3Dfd wx-cell ${css || ''} ${cell?.css || ''}` +\n    (column?.fixed && column?.fixed.right ? ' wx-fixed-right' : '');\n\n  return (\n    <div className={className} style={style}>\n      {!column?.collapsed && !cell?.collapsed ? (\n        cell?.cell ? (\n          React.createElement(cell.cell, {\n            api,\n            cell: getCell(),\n            column,\n            row,\n            onAction: ({ action, data }) => api.exec(action, data),\n          })\n        ) : (\n          <div className=\"wx-6Sdi3Dfd wx-text\">{cell?.text || ''}</div>\n        )\n      ) : null}\n    </div>\n  );\n}\n\nexport default FooterCell;\n","import { useMemo, useContext } from 'react';\nimport HeaderCell from './HeaderCell.jsx';\nimport FooterCell from './FooterCell.jsx';\nimport { isCommunity } from '@svar-ui/grid-store';\nimport storeContext from '../context';\nimport './HeaderFooter.css';\nimport { useStore } from '@svar-ui/lib-react';\n\nfunction HeaderFooter({\n  deltaLeft,\n  contentWidth,\n  columns,\n  type = 'header',\n  columnStyle,\n  bodyHeight,\n}) {\n  const api = useContext(storeContext);\n  const sizes = useStore(api, '_sizes');\n  const split = useStore(api, 'split');\n\n  const rowHeights = useMemo(() => {\n    return sizes?.[`${type}RowHeights`];\n  }, [sizes, type]);\n\n  const renderedHeader = useMemo(() => {\n    let res = [];\n    if (columns && columns.length) {\n      const rowsCount = columns[0][type].length;\n      for (let ri = 0; ri < rowsCount; ri++) {\n        let inSpan = 0;\n        res.push([]);\n        columns.forEach((col, ci) => {\n          const cell = { ...col[type][ri] };\n          if (!inSpan) {\n            res[ri].push(cell);\n          }\n\n          if (cell.colspan > 1) {\n            inSpan = cell.colspan - 1;\n\n            if (!isCommunity()) {\n              if (col.right) {\n                // if column is fixed on the right and have colspan we need to recalculate right position\n                let right = col.right;\n                for (let i = 1; i < cell.colspan; i++) {\n                  right -= columns[ci + i].width;\n                }\n                cell.right = right;\n              }\n            }\n          } else if (inSpan) {\n            inSpan--;\n          }\n        });\n      }\n    }\n    return res;\n  }, [columns, type]);\n\n  const hasSplit = useMemo(() => {\n    return split?.left || split?.right;\n  }, [split]);\n\n  function getColumn(id) {\n    return columns.find((c) => c.id === id);\n  }\n\n  function isLast(cell, ind) {\n    let idx = ind;\n    if (cell.rowspan) idx += cell.rowspan - 1;\n    return idx === renderedHeader.length - 1;\n  }\n\n  function isSort(cell, ind, column) {\n    if (!column.sort) return false;\n    for (let i = renderedHeader.length - 1; i >= 0; i--) {\n      const cell = column.header[i];\n      if (!cell.filter && !cell._hidden) return ind === i;\n    }\n    return isLast(cell, ind);\n  }\n\n  return (\n    <div\n      className={`wx-sAsPVaUK wx-${type}`}\n      style={{ paddingLeft: `${deltaLeft}px`, width: `${contentWidth}px` }}\n      role=\"rowgroup\"\n    >\n      {renderedHeader.map((row, i) => (\n        <div\n          key={i}\n          className={\n            type === 'header' ? 'wx-sAsPVaUK wx-h-row' : 'wx-sAsPVaUK wx-f-row'\n          }\n          style={{ height: `${rowHeights?.[i]}px`, display: 'flex' }}\n          role=\"row\"\n        >\n          {row.map((cell) => {\n            const column = getColumn(cell.id);\n            return type === 'header' ? (\n              <HeaderCell\n                key={cell.id}\n                cell={cell}\n                columnStyle={columnStyle}\n                column={column}\n                row={i}\n                lastRow={isLast(cell, i)}\n                bodyHeight={bodyHeight}\n                sortRow={isSort(cell, i, column)}\n                hasSplit={hasSplit}\n              />\n            ) : (\n              <FooterCell\n                key={cell.id}\n                cell={cell}\n                columnStyle={columnStyle}\n                column={getColumn(cell.id)}\n                row={i}\n              />\n            );\n          })}\n        </div>\n      ))}\n    </div>\n  );\n}\n\nexport default HeaderFooter;\n","import { useContext } from 'react';\nimport storeContext from '../context';\nimport './Overlay.css';\n\nexport default function Overlay({ overlay }) {\n  const api = useContext(storeContext);\n\n  function isComponent(prop) {\n    return typeof prop === 'function';\n  }\n\n  const Component = overlay;\n\n  return (\n    <div className=\"wx-1ty666CQ wx-overlay\">\n      {isComponent(overlay) ? (\n        <Component onAction={({ action, data }) => api.exec(action, data)} />\n      ) : (\n        overlay\n      )}\n    </div>\n  );\n}\n","import { useEffect, useRef, useState } from 'react';\nimport './Text.css';\n\nfunction Text(props) {\n  const { actions, editor } = props;\n\n  const [value, setValue] = useState(editor?.value || '');\n\n  const node = useRef(null);\n  useEffect(() => {\n    if (node.current) node.current.focus();\n  }, []);\n\n  function updateValue() {\n    if (!node.current) return;\n    setValue(node.current.value);\n    actions.updateValue(node.current.value);\n  }\n\n  function closeAndSave({ key }) {\n    if (key === 'Enter') actions.save();\n  }\n\n  return (\n    <input\n      className=\"wx-e7Ao5ejY wx-text\"\n      onInput={updateValue}\n      onKeyDown={closeAndSave}\n      ref={node}\n      type=\"text\"\n      value={value}\n    />\n  );\n}\n\nexport default Text;\n","import { useState, useEffect, useMemo, useRef, useCallback } from 'react';\nimport { SuggestDropdown } from '@svar-ui/react-core';\nimport './Combo.css';\n\nfunction Combo({ actions, editor, onAction }) {\n  const [value, setValue] = useState(editor?.value);\n  const [text, setText] = useState(editor?.renderedValue);\n  const [filterOptions, setFilterOptions] = useState(editor?.options || []);\n  const template = useMemo(() => editor?.config?.template, [editor]);\n  const cell = useMemo(() => editor?.config?.cell, [editor]);\n\n  const index = useMemo(() => {\n    return (filterOptions || []).findIndex((a) => a.id === value);\n  }, [filterOptions, value]);\n\n  const navigate = useRef(null);\n  const keydown = useRef(null);\n\n  const ready = useCallback(\n    (ev) => {\n      navigate.current = ev.navigate;\n      keydown.current = ev.keydown;\n      navigate.current(index);\n    },\n    [index, navigate],\n  );\n\n  const handleChange = useCallback(\n    (e) => {\n      const nextText = e?.target?.value ?? '';\n      setText(nextText);\n\n      const options = nextText\n        ? (editor?.options || []).filter((i) =>\n            (i.label || '').toLowerCase().includes(nextText.toLowerCase()),\n          )\n        : editor?.options || [];\n      setFilterOptions(options);\n\n      if (options.length) navigate.current(-Infinity);\n      else navigate.current(null);\n    },\n    [editor],\n  );\n\n  const inputRef = useRef(null);\n  useEffect(() => {\n    if (inputRef.current) {\n      inputRef.current.focus();\n    }\n  }, []);\n\n  useEffect(() => {\n    setValue(editor?.value);\n    setText(editor?.renderedValue);\n    setFilterOptions(editor?.options || []);\n  }, [editor]);\n\n  const updateValue = useCallback(\n    ({ id }) => {\n      actions.updateValue(id);\n      actions.save();\n    },\n    [actions],\n  );\n\n  return (\n    <>\n      <input\n        className=\"wx-0UYfSd1x wx-input\"\n        ref={inputRef}\n        value={text ?? ''}\n        onChange={handleChange}\n        onKeyDown={(e) =>\n          keydown.current ? keydown.current(e, index) : undefined\n        }\n      />\n      <SuggestDropdown\n        items={filterOptions}\n        onReady={ready}\n        onSelect={updateValue}\n      >\n        {({ option }) => {\n          if (template) {\n            return template(option);\n          } else if (cell) {\n            const Component = cell;\n            return <Component data={option} onAction={onAction} />;\n          } else {\n            return option.label;\n          }\n        }}\n      </SuggestDropdown>\n    </>\n  );\n}\n\nexport default Combo;\n","import { useEffect, useRef, useState } from 'react';\nimport { Calendar, Dropdown } from '@svar-ui/react-core';\nimport './Datepicker.css';\n\nexport default function Datepicker({ actions, editor, onAction }) {\n  const [value] = useState(() => editor.value || new Date());\n  const [template] = useState(() => editor.config?.template);\n  const [cell] = useState(() => editor.config?.cell);\n\n  function updateValue({ value }) {\n    actions.updateValue(value);\n    actions.save();\n  }\n\n  const nodeRef = useRef(null);\n\n  useEffect(() => {\n    if (nodeRef.current) {\n      nodeRef.current.focus();\n    }\n    if (typeof window !== 'undefined' && window.getSelection) {\n      window.getSelection().removeAllRanges();\n    }\n  }, []);\n\n  return (\n    <>\n      <div\n        className=\"wx-lNWNYUb6 wx-value\"\n        ref={nodeRef}\n        tabIndex={0}\n        onClick={() => actions.cancel()}\n        onKeyDown={(ev) => ev.preventDefault()}\n      >\n        {template ? (\n          template(value)\n        ) : cell ? (\n          (() => {\n            const Component = cell;\n            return <Component data={editor.value} onAction={onAction} />;\n          })()\n        ) : (\n          <span className=\"wx-lNWNYUb6 wx-text\">{editor.renderedValue}</span>\n        )}\n      </div>\n      <Dropdown width={'auto'}>\n        <Calendar\n          value={value}\n          onChange={updateValue}\n          buttons={editor.config?.buttons}\n        />\n      </Dropdown>\n    </>\n  );\n}\n","import { useEffect, useMemo, useRef, useState } from 'react';\nimport { SuggestDropdown } from '@svar-ui/react-core';\nimport './Richselect.css';\n\nexport default function Richselect(props) {\n  const { actions, editor } = props;\n  const onAction = props.onAction ?? props.onaction;\n\n  const config = editor.config || {};\n\n  const [data] = useState(\n    editor.options.find((opt) => opt.id === editor.value),\n  );\n  const [value] = useState(editor.value);\n  const [options] = useState(editor.options);\n\n  const index = useMemo(\n    () => options.findIndex((a) => a.id === value),\n    [options, value],\n  );\n\n  function updateValue({ id }) {\n    actions.updateValue(id);\n    actions.save();\n  }\n\n  let navigate;\n  const [keydown, setKeydown] = useState();\n\n  function ready(ev) {\n    navigate = ev.navigate;\n    setKeydown(() => ev.keydown);\n    navigate(index);\n  }\n\n  const node = useRef(null);\n  useEffect(() => {\n    if (node.current) {\n      node.current.focus();\n    }\n    if (typeof window !== 'undefined' && window.getSelection) {\n      window.getSelection().removeAllRanges();\n    }\n  }, []);\n\n  return (\n    <>\n      <div\n        ref={node}\n        className=\"wx-ywGRk611 wx-value\"\n        tabIndex={0}\n        onClick={() => actions.cancel()}\n        onKeyDown={(ev) => {\n          keydown(ev, index);\n          ev.preventDefault();\n        }}\n      >\n        {config.template ? (\n          config.template(data)\n        ) : config.cell ? (\n          (() => {\n            const Component = config.cell;\n            return <Component data={data} onAction={onAction} />;\n          })()\n        ) : (\n          <span className=\"wx-ywGRk611 wx-text\">{editor.renderedValue}</span>\n        )}\n      </div>\n      <SuggestDropdown items={options} onReady={ready} onSelect={updateValue}>\n        {({ option }) =>\n          config.template\n            ? config.template(option)\n            : config.cell\n              ? (() => {\n                  const Component = config.cell;\n                  return <Component data={option} onAction={onAction} />;\n                })()\n              : option.label\n        }\n      </SuggestDropdown>\n    </>\n  );\n}\n","import Text from './Text.jsx';\nimport Combo from './Combo.jsx';\nimport Datepicker from './Datepicker.jsx';\nimport Richselect from './Richselect.jsx';\n\nexport const editors = {\n  text: Text,\n  combo: Combo,\n  datepicker: Datepicker,\n  richselect: Richselect,\n};\n","import { useCallback, useContext, useEffect, useMemo, useRef } from 'react';\nimport storeContext from '../../context';\nimport { useStore } from '@svar-ui/lib-react';\nimport { getStyle } from '../../helpers/columnWidth';\nimport { clickOutside } from '@svar-ui/lib-dom';\nimport { editors } from './editors';\nimport './Editor.css';\n\nexport default function Editor({ column, row }) {\n  const api = useContext(storeContext);\n  const editor = useStore(api, 'editor');\n\n  const closeEditor = useCallback(\n    (ignore, cell) => {\n      api.exec('close-editor', { ignore });\n      if (cell) {\n        api.exec('focus-cell', {\n          ...cell,\n          eventSource: 'click',\n        });\n      }\n    },\n    [api],\n  );\n\n  const save = useCallback(\n    (ignoreFocus) => {\n      const cell = ignoreFocus\n        ? null\n        : { row: editor?.id, column: editor?.column };\n      closeEditor(false, cell);\n    },\n    [editor, closeEditor],\n  );\n\n  const cancel = useCallback(() => {\n    closeEditor(true, { row: editor?.id, column: editor?.column });\n  }, [editor, closeEditor]);\n\n  const updateValue = useCallback(\n    (value) => {\n      api.exec('editor', { value });\n    },\n    [api],\n  );\n\n  const keyHandler = useCallback(\n    (ev) => {\n      if (ev.key === 'Enter' && editor) cancel();\n    },\n    [editor, cancel],\n  );\n\n  const computedStyle = useMemo(\n    () =>\n      getStyle(\n        column.width,\n        column.flexgrow,\n        column.fixed,\n        column.left,\n        column.right,\n      ),\n    [column.width, column.flexgrow, column.fixed, column.left, column.right],\n  );\n\n  const Component = useMemo(() => {\n    let ed = column.editor;\n    if (typeof ed === 'function') ed = ed(row, column);\n    let type = typeof ed === 'string' ? ed : ed.type;\n    return editors[type];\n  }, [column, row]);\n\n  const rootRef = useRef(null);\n\n  useEffect(() => {\n    if (!rootRef.current) return;\n    const destroy = clickOutside(rootRef.current, () => save(true));\n    return () => {\n      if (typeof destroy === 'function') destroy();\n    };\n  }, [save]);\n\n  useEffect(() => {\n    if (!rootRef.current) return;\n    if (typeof computedStyle === 'string') {\n      rootRef.current.setAttribute('style', computedStyle);\n    }\n  }, [computedStyle]);\n\n  const role = typeof row.$parent !== 'undefined' ? 'gridcell' : 'cell';\n  const ariaReadonly =\n    typeof row.$parent !== 'undefined'\n      ? column.editor\n        ? false\n        : true\n      : undefined;\n\n  return (\n    <div\n      className=\"wx-8l724t2g wx-cell wx-editor\"\n      ref={rootRef}\n      style={\n        typeof computedStyle === 'object' && computedStyle !== null\n          ? computedStyle\n          : undefined\n      }\n      role={role}\n      aria-readonly={ariaReadonly}\n      tabIndex={-1}\n      onClick={(ev) => ev.stopPropagation()}\n      onDoubleClick={(ev) => ev.stopPropagation()}\n      onKeyDown={keyHandler}\n    >\n      {Component ? (\n        <Component\n          editor={editor}\n          actions={{ save, cancel, updateValue }}\n          onAction={({ action, data }) => api.exec(action, data)}\n        />\n      ) : null}\n    </div>\n  );\n}\n","import { useContext } from 'react';\nimport { getPrintCellStyle, getPrintFilterValue } from '@svar-ui/grid-store';\nimport storeContext from '../../context';\nimport { styleObject } from '@svar-ui/lib-react';\nimport './HeaderFooter.css';\n\nexport default function HeaderFooter(props) {\n  const { columns, type, columnStyle } = props;\n\n  const api = useContext(storeContext);\n  const { filterValues, _columns, _sizes: sizes } = api.getState();\n\n  function getColumnCss(column) {\n    return columnStyle ? ' ' + columnStyle(column) : '';\n  }\n\n  return (\n    <>\n      {columns.map((row, i) => (\n        <tr key={i}>\n          {row.map((cell) => {\n            const column = _columns.find((c) => c.id == cell.id);\n            const className =\n              `wx-print-cell-${type}` +\n              `${getColumnCss(column)}` +\n              `${cell.filter ? ' wx-print-cell-filter' : ''}` +\n              `${cell.vertical ? ' wx-vertical' : ''}`;\n\n            const CellComp = cell.cell;\n\n            return (\n              <th\n                key={cell.id}\n                style={styleObject(getPrintCellStyle(cell, sizes.columnWidth))}\n                className={'wx-Gy81xq2u ' + className}\n                rowSpan={cell.rowspan}\n                colSpan={cell.colspan}\n              >\n                {CellComp ? (\n                  <CellComp\n                    api={api}\n                    cell={Object.fromEntries(\n                      Object.entries(cell).filter(([key]) => key !== 'cell'),\n                    )}\n                    column={column}\n                    row={i}\n                  />\n                ) : cell.filter ? (\n                  <div className=\"wx-Gy81xq2u wx-print-filter\">\n                    {getPrintFilterValue(filterValues, _columns, cell)}\n                  </div>\n                ) : (\n                  <div className=\"wx-Gy81xq2u wx-text\">{cell.text ?? ''}</div>\n                )}\n              </th>\n            );\n          })}\n        </tr>\n      ))}\n    </>\n  );\n}\n","import { useContext } from 'react';\nimport storeContext from '../../context';\nimport {\n  getRenderValue,\n  getHeaderFooterPrintColumns,\n  getPrintCellStyle,\n} from '@svar-ui/grid-store';\nimport HeaderFooter from './HeaderFooter.jsx';\nimport './Grid.css';\nimport { styleObject } from '@svar-ui/lib-react';\n\nexport default function Grid(props) {\n  const { columns, rowStyle, columnStyle, cellStyle, header, footer, reorder } =\n    props;\n\n  const api = useContext(storeContext);\n  const { flatData: data, _sizes: sizes } = api.getState();\n\n  const headerColumns =\n    header &&\n    getHeaderFooterPrintColumns(columns, 'header', sizes.headerRowHeights);\n  const footerColumns =\n    footer &&\n    getHeaderFooterPrintColumns(columns, 'footer', sizes.footerRowHeights);\n\n  function buildCellCss(row, column) {\n    let css = '';\n    css += columnStyle ? ' ' + columnStyle(column) : '';\n    css += cellStyle ? ' ' + cellStyle(row, column) : '';\n    return css;\n  }\n\n  function isDraggableIcon(row, column) {\n    return typeof column.draggable === 'function'\n      ? column.draggable(row, column) !== false\n      : column.draggable;\n  }\n\n  return (\n    <table\n      className={`wx-8NTMLH0z wx-print-grid ${columns.some((c) => c.flexgrow) ? 'wx-flex-columns' : ''}`}\n    >\n      {header ? (\n        <thead>\n          <HeaderFooter\n            columns={headerColumns}\n            type={'header'}\n            columnStyle={columnStyle}\n          />\n        </thead>\n      ) : null}\n\n      <tbody>\n        {data.map((row, rowIndex) => (\n          <tr\n            key={rowIndex}\n            className={\n              'wx-8NTMLH0z wx-row' + (rowStyle ? ' ' + rowStyle(row) : '')\n            }\n            style={{ height: `${row.rowHeight || sizes.rowHeight}px` }}\n          >\n            {columns.map((column) =>\n              !column.collapsed ? (\n                <td\n                  key={column.id}\n                  className={`wx-8NTMLH0z wx-print-cell wx-cell ${buildCellCss(row, column)}`}\n                  style={styleObject(\n                    getPrintCellStyle(column, sizes.columnWidth),\n                  )}\n                >\n                  {reorder && column.draggable ? (\n                    <span className=\"wx-8NTMLH0z wx-print-draggable\">\n                      {isDraggableIcon(row, column) ? (\n                        <i className=\"wx-8NTMLH0z wxi-drag\"></i>\n                      ) : null}\n                    </span>\n                  ) : null}\n                  {column.treetoggle ? (\n                    <>\n                      <span\n                        style={{ marginLeft: row.$level * 28 + 'px' }}\n                      ></span>\n                      {row.$count ? (\n                        <i\n                          className={\n                            'wx-8NTMLH0z wx-print-grid-tree-toggle ' +\n                            `wxi-menu-${row.open !== false ? 'down' : 'right'}`\n                          }\n                        ></i>\n                      ) : null}\n                    </>\n                  ) : null}\n                  {column.cell ? (\n                    (() => {\n                      const CellComp = column.cell;\n                      return <CellComp api={api} row={row} column={column} />;\n                    })()\n                  ) : (\n                    <span>{getRenderValue(row, column)}</span>\n                  )}\n                </td>\n              ) : null,\n            )}\n          </tr>\n        ))}\n      </tbody>\n\n      {footer ? (\n        <tfoot>\n          <HeaderFooter\n            columns={footerColumns}\n            type={'footer'}\n            columnStyle={columnStyle}\n          />\n        </tfoot>\n      ) : null}\n    </table>\n  );\n}\n","import { useContext, useEffect, useMemo, useRef } from 'react';\nimport Grid from './Grid.jsx';\nimport { getPrintColumns } from '@svar-ui/grid-store';\nimport storeContext from '../../context';\nimport './Print.css';\n\nexport default function Print(props) {\n  const { config, ...restProps } = props;\n\n  const api = useContext(storeContext);\n  const { _skin: skin, _columns: columns } = api.getState();\n\n  const grids = useMemo(() => getPrintColumns(columns, config), []);\n  const nodeRef = useRef(null);\n\n  useEffect(() => {\n    const target = document.body;\n    target.classList.add('wx-print');\n\n    const node = nodeRef.current;\n    if (!node) return;\n\n    const cloned = node.cloneNode(true);\n    target.appendChild(cloned);\n\n    const rule = `@media print { @page { size: ${config.paper} ${config.mode}; }`;\n    const style = document.createElement('style');\n    style.setAttribute('type', 'text/css');\n    style.setAttribute('media', 'print');\n    document.getElementsByTagName('head')[0].appendChild(style);\n    style.appendChild(document.createTextNode(rule));\n\n    window.print();\n\n    style.remove();\n    target.classList.remove('wx-print');\n\n    cloned.remove();\n  }, []);\n\n  return (\n    <div\n      className={`wx-4zwCKA7C wx-${skin}-theme wx-print-container`}\n      ref={nodeRef}\n    >\n      {grids.map((cols, i) => (\n        <div className=\"wx-4zwCKA7C wx-print-grid-wrapper\" key={i}>\n          <Grid columns={cols} {...restProps} />\n        </div>\n      ))}\n    </div>\n  );\n}\n","import {\n  useState,\n  useEffect,\n  useMemo,\n  useRef,\n  useContext,\n  useCallback,\n} from 'react';\nimport storeContext from '../context';\nimport { onresize } from '../helpers/actions/onresize';\nimport { reorder as drag, getOffset } from '../helpers/actions/reorder';\nimport { resetAutoScroll, tryAutoScroll } from '../helpers/actions/dragscroll';\nimport { clickOutside, locateAttr, locate, id as toId } from '@svar-ui/lib-dom';\nimport { hotkeys, defaultHotkeys } from '@svar-ui/grid-store';\nimport { scrollTo } from '@svar-ui/grid-store';\nimport { useStore, delegateClick, useStoreWithCounter } from '@svar-ui/lib-react';\n\nimport Cell from './Cell.jsx';\nimport HeaderFooter from './HeaderFooter.jsx';\nimport Overlay from './Overlay.jsx';\nimport Editor from './inlineEditors/Editor.jsx';\nimport Print from './print/Print.jsx';\nimport './Layout.css';\n\nfunction Layout(props) {\n  const {\n    header,\n    footer,\n    overlay,\n    multiselect,\n    onreorder: onReorder,\n    rowStyle,\n    columnStyle,\n    cellStyle,\n    autoRowHeight,\n    resize,\n    clientWidth,\n    clientHeight,\n    responsiveLevel,\n    hotkeys: hotkeysConfig,\n  } = props;\n\n  const api = useContext(storeContext);\n\n  // subscribe to reactive state from api\n  const dynamic = useStore(api, 'dynamic');\n  const columns = useStore(api, '_columns');\n  const data = useStore(api, 'flatData');\n  const split = useStore(api, 'split');\n  const sizes = useStore(api, '_sizes');\n  const [selectedRows, selectionChanged] = useStoreWithCounter(api, 'selectedRows');\n  const selectState = useStore(api, 'select');\n  const editorState = useStore(api, 'editor');\n  const tree = useStore(api, 'tree');\n  const focusCell = useStore(api, 'focusCell');\n  const printConfig = useStore(api, '_print');\n  const undoState = useStore(api, 'undo');\n  const reorder = useStore(api, 'reorder');\n  const rowHeightFromData = useStore(api, '_rowHeightFromData');\n\n  // will be calculated once, after rendering\n  const [SCROLLSIZE, setSCROLLSIZE] = useState(0);\n  useEffect(() => {\n    setSCROLLSIZE(getScrollSize());\n  }, []);\n\n  const [scrollLeft, setScrollLeft] = useState(0);\n  const [scrollTop, setScrollTop] = useState(0);\n\n  const hasAny = useMemo(() => {\n    return (columns || []).some((col) => !col.hidden && col.flexgrow);\n  }, [columns]);\n\n  const defaultRowHeight = useMemo(() => sizes?.rowHeight || 0, [sizes]);\n\n  const tableNodeRef = useRef(null);\n\n  // reorder\n  const [dragItem, setDragItem] = useState(null);\n  const [dragNode, setDragNode] = useState(null);\n\n  const leftColumns = useMemo(() => {\n    let cols = [];\n    let width = 0;\n\n    if (split && split.left) {\n      cols = (columns || [])\n        .slice(0, split.left)\n        .filter((c) => !c.hidden)\n        .map((a) => ({ ...a }));\n      cols.forEach((a) => {\n        a.fixed = { left: 1 };\n        a.left = width;\n        width += a.width;\n      });\n      if (cols.length) cols[cols.length - 1].fixed = { left: -1 };\n    }\n\n    return { columns: cols, width };\n  }, [split, columns]);\n\n  const rightColumns = useMemo(() => {\n    let cols = [];\n    let width = 0;\n\n    if (split && split.right) {\n      cols = (columns || [])\n        .slice(split.right * -1)\n        .filter((c) => !c.hidden)\n        .map((a) => ({ ...a }));\n      for (let i = cols.length - 1; i >= 0; i--) {\n        const col = cols[i];\n        col.fixed = { right: 1 };\n        col.right = width;\n        width += col.width;\n      }\n      if (cols.length) cols[0].fixed = { right: -1 };\n    }\n\n    return { columns: cols, width };\n  }, [split, columns]);\n\n  const centerColumns = useMemo(() => {\n    const center = (columns || [])\n      .slice(split?.left || 0, (columns || []).length - (split?.right ?? 0))\n      .filter((c) => !c.hidden);\n    center.forEach((a) => {\n      a.fixed = 0;\n    });\n    return center;\n  }, [columns, split]);\n\n  const fullWidth = useMemo(() => {\n    return (columns || []).reduce((acc, col) => {\n      if (!col.hidden) {\n        acc += col.width;\n      }\n      return acc;\n    }, 0);\n  }, [columns]);\n\n  const EXTRACOLUMNS = 1;\n\n  function getHeaderPosition(start, deltaLeft, type) {\n    let delta = deltaLeft;\n    let index = start;\n\n    if (centerColumns.length) {\n      let spanStartInd = centerColumns.length; // max value to compare with\n      for (let i = start; i >= 0; i--) {\n        const colHeader = centerColumns[i][type];\n        colHeader.forEach((h) => {\n          if (h.colspan > 1 && i > start - h.colspan && i < spanStartInd) {\n            spanStartInd = i;\n          }\n        });\n      }\n\n      if (spanStartInd !== centerColumns.length && spanStartInd < start) {\n        for (let i = spanStartInd; i < start; i++) {\n          delta -= centerColumns[i].width;\n        }\n        index = spanStartInd;\n      }\n    }\n\n    return { index, delta };\n  }\n\n  const renderColumns = useMemo(() => {\n    let dataCols, headerCols, footerCols;\n\n    const left = scrollLeft;\n    const right = scrollLeft + (clientWidth || 0);\n\n    let start = 0;\n    let end = 0;\n    let sum = 0;\n\n    let d = 0;\n    centerColumns.forEach((col, index) => {\n      if (left > sum) {\n        start = index;\n        d = sum;\n      }\n      sum = sum + col.width;\n\n      if (right > sum) end = index + EXTRACOLUMNS;\n    });\n\n    const rightSpanDelta = { header: 0, footer: 0 };\n    for (let i = end; i >= start; i--) {\n      ['header', 'footer'].forEach((key) => {\n        if (centerColumns[i])\n          centerColumns[i][key].forEach((hCell) => {\n            const colspan = hCell.colspan;\n            if (colspan && colspan > 1) {\n              const diff = colspan - (end - i + 1);\n              if (diff > 0) {\n                rightSpanDelta[key] = Math.max(rightSpanDelta[key], diff);\n              }\n            }\n          });\n      });\n    }\n\n    const headerPos = getHeaderPosition(start, d, 'header');\n    const footerPos = getHeaderPosition(start, d, 'footer');\n\n    const dh = headerPos.delta;\n    const csH = headerPos.index;\n\n    const df = footerPos.delta;\n    const csF = footerPos.index;\n\n    if (hasAny && fullWidth > (clientWidth || 0)) {\n      dataCols =\n        headerCols =\n        footerCols =\n          [...leftColumns.columns, ...centerColumns, ...rightColumns.columns];\n    } else {\n      dataCols = [\n        ...leftColumns.columns,\n        ...centerColumns.slice(start, end + 1),\n        ...rightColumns.columns,\n      ];\n      headerCols = [\n        ...leftColumns.columns,\n        ...centerColumns.slice(csH, end + rightSpanDelta.header + 1),\n        ...rightColumns.columns,\n      ];\n      footerCols = [\n        ...leftColumns.columns,\n        ...centerColumns.slice(csF, end + rightSpanDelta.footer + 1),\n        ...rightColumns.columns,\n      ];\n    }\n\n    return {\n      data: dataCols || [],\n      header: headerCols || [],\n      footer: footerCols || [],\n      d,\n      df,\n      dh,\n    };\n  }, [\n    centerColumns,\n    leftColumns,\n    rightColumns,\n    scrollLeft,\n    clientWidth,\n    hasAny,\n    fullWidth,\n  ]);\n\n  const headerHeight = useMemo(\n    () => (header ? sizes?.headerHeight || 0 : 0),\n    [header, sizes],\n  );\n  const footerHeight = useMemo(\n    () => (footer ? sizes?.footerHeight || 0 : 0),\n    [footer, sizes],\n  );\n\n  const hasHScroll = useMemo(() => {\n    return clientWidth && clientHeight ? fullWidth >= clientWidth : false;\n  }, [clientWidth, clientHeight, fullWidth]);\n\n  const visibleRowsHeight = useMemo(() => {\n    return (\n      (clientHeight || 0) -\n      headerHeight -\n      footerHeight -\n      (hasHScroll ? SCROLLSIZE : 0)\n    );\n  }, [clientHeight, headerHeight, footerHeight, hasHScroll, SCROLLSIZE]);\n\n  const visibleRows = useMemo(() => {\n    return Math.ceil((visibleRowsHeight || 0) / (defaultRowHeight || 1)) + 1;\n  }, [visibleRowsHeight, defaultRowHeight]);\n\n  const rowHeightsRef = useRef([]);\n  const [renderedHeight, setRenderedHeight] = useState(0);\n  const [renderEnd, setRenderEnd] = useState(undefined);\n\n  const renderRows = useMemo(() => {\n    let start = 0;\n    let deltaTop = 0;\n    const EXTRAROWS = 2;\n\n    if (autoRowHeight) {\n      let st = scrollTop;\n      while (st > 0) {\n        st -= rowHeightsRef.current[start] || defaultRowHeight;\n        start++;\n      }\n\n      deltaTop = scrollTop - st;\n      for (let i = Math.max(0, start - EXTRAROWS - 1); i < start; i++)\n        deltaTop -= rowHeightsRef.current[start - i] || defaultRowHeight;\n\n      start = Math.max(0, start - EXTRAROWS);\n    } else {\n      if (rowHeightFromData) {\n        let startInd = 0;\n        let topHeight = 0;\n        for (let i = 0; i < (data || []).length; i++) {\n          const height = data[i].rowHeight || defaultRowHeight;\n          if (topHeight + height > scrollTop) {\n            startInd = i;\n            break;\n          }\n          topHeight += height;\n        }\n        start = Math.max(0, startInd - EXTRAROWS);\n\n        for (let i = 0; i < start; i++) {\n          deltaTop += data[i].rowHeight || defaultRowHeight;\n        }\n\n        let visibleRowsCount = 0;\n        let currentHeight = 0;\n        for (let i = startInd + 1; i < (data || []).length; i++) {\n          const height = data[i].rowHeight || defaultRowHeight;\n          visibleRowsCount++;\n          if (currentHeight + height > visibleRowsHeight) {\n            break;\n          }\n          currentHeight += height;\n        }\n\n        const end = Math.min(\n          dynamic ? dynamic.rowCount : (data || []).length,\n          startInd + visibleRowsCount + EXTRAROWS,\n        );\n\n        return { d: deltaTop, start, end };\n      }\n\n      start = Math.floor(scrollTop / (defaultRowHeight || 1));\n      start = Math.max(0, start - EXTRAROWS);\n      deltaTop = start * (defaultRowHeight || 0);\n    }\n\n    const totalCount = dynamic ? dynamic.rowCount : (data || []).length;\n    const end = Math.min(totalCount, start + (visibleRows || 0) + EXTRAROWS);\n\n    return { d: deltaTop, start, end };\n  }, [autoRowHeight, rowHeightFromData, scrollTop, defaultRowHeight, dynamic, data, visibleRows, visibleRowsHeight]);\n\n  const fullHeight = useMemo(() => {\n    const count = dynamic ? dynamic.rowCount : (data || []).length;\n\n    if (autoRowHeight) {\n      return (\n        renderedHeight +\n        renderRows.d +\n        (count - (renderEnd || 0)) * (defaultRowHeight || 0)\n      );\n    }\n    if (!rowHeightFromData) {\n      return count * (defaultRowHeight || 0);\n    }\n\n    let totalHeight = 0;\n    for (let i = 0; i < count; i++)\n      totalHeight += (data[i]?.rowHeight || defaultRowHeight);\n\n    return totalHeight;\n  }, [\n    dynamic,\n    data,\n    defaultRowHeight,\n    autoRowHeight,\n    rowHeightFromData,\n    renderedHeight,\n    renderRows.d,\n    renderEnd,\n  ]);\n\n  const hasVScroll = useMemo(() => {\n    return clientWidth && clientHeight\n      ? fullHeight + headerHeight + footerHeight >=\n          clientHeight - (fullWidth >= (clientWidth || 0) ? SCROLLSIZE : 0)\n      : false;\n  }, [\n    clientWidth,\n    clientHeight,\n    fullHeight,\n    headerHeight,\n    footerHeight,\n    fullWidth,\n    SCROLLSIZE,\n  ]);\n\n  const contentWidth = useMemo(() => {\n    return hasAny && fullWidth <= (clientWidth || 0)\n      ? (clientWidth || 0) -\n          (hasHScroll ? 0 : 0) -\n          (hasVScroll ? SCROLLSIZE : 0) // hasHScroll doesn't affect width here; keep logic as in Svelte\n      : fullWidth;\n  }, [hasAny, fullWidth, clientWidth, hasVScroll, SCROLLSIZE, hasHScroll]);\n\n  const globalWidth = useMemo(() => {\n    return hasAny && fullWidth <= (clientWidth || 0)\n      ? clientWidth || 0\n      : contentWidth < (clientWidth || 0)\n        ? fullWidth + (hasVScroll ? SCROLLSIZE : 0)\n        : -1;\n  }, [hasAny, fullWidth, clientWidth, contentWidth, hasVScroll, SCROLLSIZE]);\n\n  const lastCallRef = useRef({});\n  useEffect(() => {\n    if (\n      dynamic &&\n      (lastCallRef.current.start !== renderRows.start ||\n        lastCallRef.current.end !== renderRows.end)\n    ) {\n      const { start, end } = renderRows;\n      lastCallRef.current = { start, end };\n      api && api.exec && api.exec('request-data', { row: { start, end } });\n    }\n  }, [dynamic, renderRows, api]);\n\n  const dataRows = useMemo(() => {\n    if (dynamic) return data || [];\n    return (data || []).slice(renderRows.start, renderRows.end);\n  }, [dynamic, data, renderRows]);\n\n  const visibleSelection = useMemo(() => {\n    return (selectedRows || []).filter((s) =>\n      (dataRows || []).some((r) => r.id === s),\n    );\n  }, [selectionChanged, dataRows]);\n\n  const renderStart = useMemo(() => renderRows.start, [renderRows.start]);\n\n  const onScroll = useCallback((ev) => {\n    setScrollTop(ev.target.scrollTop);\n    setScrollLeft(ev.target.scrollLeft);\n  }, []);\n\n  const lockSelection = useCallback((ev) => {\n    if (ev.shiftKey) ev.preventDefault();\n    tableNodeRef.current &&\n      tableNodeRef.current.focus &&\n      tableNodeRef.current.focus();\n  }, []);\n\n  const checkDraggable = useCallback(() => {\n    return !!(columns || []).find((c) => !!c.draggable);\n  }, [columns]);\n\n  const postDragRef = useRef(null);\n  const movementYRef = useRef(null);\n\n  const bodyClickHandlers = useRef({\n    dblclick: (rowId, ev) => {\n      const data = { id: rowId, column: locateAttr(ev, 'data-col-id') };\n      api.exec('open-editor', data);\n    },\n    click: (rowId, ev) => {\n      if (postDragRef.current) return;\n      const column = locateAttr(ev, 'data-col-id');\n      if (focusCell?.id !== rowId)\n        api.exec('focus-cell', {\n          row: rowId,\n          column,\n          eventSource: 'click',\n        });\n\n      if (selectState === false) return;\n\n      const toggle = multiselect && ev.ctrlKey;\n      const range = multiselect && ev.shiftKey;\n\n      if (\n        toggle ||\n        selectedRows.length > 1 ||\n        !selectedRows.includes(rowId)\n      ) {\n        api.exec('select-row', { id: rowId, toggle, range });\n      }\n    },\n    'toggle-row': (rowId) => {\n      const row = api.getRow(rowId);\n      api.exec(row.open !== false ? 'close-row' : 'open-row', { id: rowId });\n    },\n    'ignore-click': () => {\n      return false;\n    },\n  });\n\n  const dragScrollConfig = useMemo(() => {\n    return {\n      top: headerHeight,\n      bottom: footerHeight,\n      left: leftColumns.width,\n      xScroll: hasHScroll,\n      yScroll: hasVScroll,\n      sense:\n        autoRowHeight && dragNode\n          ? dragNode.offsetHeight\n          : Math.max(sizes?.rowHeight || 0, 40),\n      node: tableNodeRef.current && tableNodeRef.current.firstElementChild,\n    };\n  }, [\n    headerHeight,\n    footerHeight,\n    leftColumns.width,\n    hasHScroll,\n    hasVScroll,\n    autoRowHeight,\n    dragNode,\n    sizes,\n  ]);\n\n  function startDrag(ev, context) {\n    const { container, sourceNode, from } = context;\n    const hasDraggable = checkDraggable();\n\n    if (hasDraggable && !sourceNode.getAttribute('draggable-data'))\n      return false;\n\n    setDragItem(from);\n\n    if (api.getRow(from).open)\n      api.exec('close-row', { id: from, nested: true });\n\n    const itemNode = locate(sourceNode, 'data-id');\n    const cloned = itemNode.cloneNode(true);\n    cloned.classList.remove('wx-selected');\n    cloned\n      .querySelectorAll('[tabindex]')\n      .forEach((element) => element.setAttribute('tabindex', '-1'));\n    container.appendChild(cloned);\n    setDragNode(cloned);\n\n    const offsetX = scrollLeft - renderColumns.d;\n    const vScrollSize = hasVScroll ? SCROLLSIZE : 0;\n\n    container.style.width =\n      Math.min(\n        (clientWidth || 0) - vScrollSize,\n        hasAny && fullWidth <= (clientWidth || 0)\n          ? contentWidth\n          : contentWidth - vScrollSize,\n      ) +\n      offsetX +\n      'px';\n\n    const itemPos = getOffset(itemNode);\n    context.offset = {\n      x: offsetX,\n      y: -Math.round(itemPos.height / 2),\n    };\n\n    if (!movementYRef.current) movementYRef.current = ev.clientY;\n  }\n\n  function moveDrag(ev, context) {\n    const { from } = context;\n    const pos = context.pos;\n    const box = getOffset(tableNodeRef.current);\n\n    pos.x = box.x;\n\n    const min = dragScrollConfig.top;\n    if (pos.y < min) pos.y = min;\n    else {\n      const max =\n        box.height -\n        (hasHScroll && SCROLLSIZE > 0\n          ? SCROLLSIZE\n          : Math.round(dragScrollConfig.sense / 2)) -\n        dragScrollConfig.bottom;\n      if (pos.y > max) pos.y = max;\n    }\n\n    if (tableNodeRef.current.contains(context.targetNode)) {\n      const targetRow = locate(context.targetNode, 'data-id');\n      const to = toId(targetRow?.getAttribute('data-id'));\n\n      if (to && to !== from) {\n        context.to = to;\n\n        const rowHeight = autoRowHeight\n          ? dragNode?.offsetHeight\n          : sizes?.rowHeight;\n\n        if (dragNode && (scrollTop === 0 || pos.y > min + rowHeight - 1)) {\n          const targetRect = targetRow.getBoundingClientRect();\n          const dragNodeOffset = getOffset(dragNode);\n\n          const dragNodePos = dragNodeOffset.y;\n          const targetNodePos = targetRect.y;\n\n          const dir = dragNodePos > targetNodePos ? -1 : 1;\n          const initialMode = dir === 1 ? 'after' : 'before';\n          const diff = Math.abs(api.getRowIndex(from) - api.getRowIndex(to));\n\n          const mode =\n            diff !== 1\n              ? initialMode === 'before'\n                ? 'after'\n                : 'before'\n              : initialMode;\n\n          if (diff === 1) {\n            if (dir === -1 && ev.clientY > movementYRef.current) return;\n            if (dir === 1 && ev.clientY < movementYRef.current) return;\n          }\n\n          movementYRef.current = ev.clientY;\n\n          api.exec('move-item', {\n            id: from,\n            target: to,\n            mode,\n            inProgress: true,\n          });\n        }\n      }\n\n      onReorder && onReorder({ event: ev, context });\n    }\n\n    tryAutoScroll(ev, box, context, dragScrollConfig);\n  }\n\n  function endDrag(ev, context) {\n    const { from, to } = context;\n\n    api.exec('move-item', {\n      id: from,\n      target: to,\n      inProgress: false,\n    });\n\n    postDragRef.current = setTimeout(() => {\n      postDragRef.current = 0;\n    }, 1);\n\n    setDragItem(null);\n    setDragNode(null);\n    movementYRef.current = null;\n    resetAutoScroll(context);\n  }\n\n  function getScrollSize() {\n    const div = document.createElement('div');\n    div.style.cssText =\n      'position:absolute;left:-1000px;width:100px;padding:0px;margin:0px;min-height:100px;overflow-y:scroll;';\n    document.body.appendChild(div);\n    const width = div.offsetWidth - div.clientWidth;\n    document.body.removeChild(div);\n    return width;\n  }\n\n  const styleWidth = useMemo(() => {\n    return globalWidth > 0 ? { width: `${globalWidth}px` } : undefined;\n  }, [globalWidth]);\n\n  const dataElRef = useRef(null);\n  function adjustHeight() {\n    Promise.resolve().then(() => {\n      let rh = 0;\n      let re = renderStart;\n      const container = dataElRef.current;\n      if (!container) return;\n      Array.from(container.children).forEach((row, i) => {\n        rowHeightsRef.current[renderStart + i] = row.offsetHeight;\n        rh += row.offsetHeight;\n        re++;\n      });\n\n      setRenderedHeight(rh);\n      setRenderEnd(re);\n    });\n  }\n\n  useEffect(() => {\n    if (dataRows && autoRowHeight) adjustHeight();\n  }, [dataRows, autoRowHeight, renderStart]);\n\n  let [focus, setFocus] = useState();\n\n  useEffect(() => {\n    if (\n      focusCell &&\n      (!selectState ||\n        !visibleSelection.length ||\n        visibleSelection.includes(focusCell.row))\n    ) {\n      setFocus({ ...focusCell });\n    } else if (dataRows.length && renderColumns.data.length) {\n      if (\n        !focus ||\n        (visibleSelection.length && !visibleSelection.includes(focus.row)) ||\n        dataRows.findIndex((r) => r.id == focus.row) === -1 ||\n        renderColumns.data.findIndex(\n          (c) => c.id == focus.column && !c.collapsed,\n        ) === -1\n      ) {\n        const row = visibleSelection[0] || dataRows[0].id;\n        const cind = renderColumns.data.findIndex((c) => !c.collapsed);\n        if (cind !== -1) setFocus({ row, column: renderColumns.data[cind].id });\n        else setFocus(null);\n      }\n    } else setFocus(null);\n  }, [focusCell]);\n\n  // actions effects\n  const scrollRef = useRef(null);\n  useEffect(() => {\n    const node = tableNodeRef.current;\n    if (!node) return;\n    const cleanup = onresize(node, resize);\n    return () => {\n      if (typeof cleanup === 'function') cleanup();\n    };\n  }, [resize]);\n\n  const dragState = useRef({});\n  Object.assign(dragState.current, {\n    start: startDrag,\n    move: moveDrag,\n    end: endDrag,\n    getReorder: () => reorder,\n    getDraggableInfo: () => ({ hasDraggable: checkDraggable() }),\n  });\n\n  useEffect(() => {\n    const node = tableNodeRef.current;\n    if (!node) return;\n    const cleanup = drag(node, dragState);\n    return cleanup.destroy;\n  }, [reorder, tableNodeRef.current]);\n\n  useEffect(() => {\n    const node = tableNodeRef.current;\n    if (!node) return;\n    const cleanup = hotkeys(node, {\n      keys: hotkeysConfig !== false && {\n        ...defaultHotkeys,\n        'ctrl+z': undoState,\n        'ctrl+y': undoState,\n        ...hotkeysConfig,\n      },\n      exec: (v) => api.exec('hotkey', v),\n    });\n    return cleanup.destroy;\n  }, [api, undoState, hotkeysConfig]);\n\n  const scrollConfig = useRef({\n    scroll: api.getReactiveState().scroll,\n  });\n  scrollConfig.current.getWidth = () =>\n    (clientWidth || 0) - (hasVScroll ? SCROLLSIZE : 0);\n  scrollConfig.current.getHeight = () => visibleRowsHeight;\n  scrollConfig.current.getScrollMargin = () =>\n    leftColumns.width + rightColumns.width;\n\n  useEffect(() => {\n    scrollTo(scrollRef.current, scrollConfig.current);\n  }, []);\n\n  const bodyRef = useRef(null);\n  useEffect(() => {\n    const node = bodyRef.current;\n    if (!node) return;\n\n    const result = [];\n    result.push(\n      clickOutside(node, () => api.exec('focus-cell', { eventSource: 'click' }))\n        .destroy,\n    );\n    result.push(delegateClick(node, bodyClickHandlers.current));\n\n    return () => result.forEach((r) => r());\n  }, []);\n\n  const gridClassName = `wx-grid ${responsiveLevel ? `wx-responsive-${responsiveLevel}` : ''}`;\n\n  return (\n    <>\n      <div\n        className={'wx-4VuBwK2D ' + gridClassName}\n        style={{\n          ['--header-height']: `${headerHeight}px`,\n          ['--footer-height']: `${footerHeight}px`,\n          ['--split-left-width']: `${leftColumns.width}px`,\n          ['--split-right-width']: `${rightColumns.width}px`,\n        }}\n      >\n        <div\n          ref={tableNodeRef}\n          className=\"wx-4VuBwK2D wx-table-box\"\n          style={styleWidth}\n          role={tree ? 'treegrid' : 'grid'}\n          aria-colcount={renderColumns.data.length}\n          aria-rowcount={dataRows.length}\n          aria-multiselectable={tree && multiselect ? true : undefined}\n          tabIndex={-1}\n        >\n          <div\n            ref={scrollRef}\n            className=\"wx-4VuBwK2D wx-scroll\"\n            style={{\n              overflowX: hasHScroll ? 'scroll' : 'hidden',\n              overflowY: hasVScroll ? 'scroll' : 'hidden',\n            }}\n            onScroll={onScroll}\n          >\n            {header ? (\n              <div className=\"wx-4VuBwK2D wx-header-wrapper\">\n                <HeaderFooter\n                  contentWidth={contentWidth}\n                  deltaLeft={renderColumns.dh}\n                  columns={renderColumns.header}\n                  columnStyle={columnStyle}\n                  bodyHeight={visibleRowsHeight - +footer}\n                />\n              </div>\n            ) : null}\n            <div\n              ref={bodyRef}\n              className=\"wx-4VuBwK2D wx-body\"\n              style={{ width: `${contentWidth}px`, height: `${fullHeight}px` }}\n              onMouseDown={(ev) => lockSelection(ev)}\n            >\n              {overlay ? <Overlay overlay={overlay} /> : null}\n              <div\n                ref={dataElRef}\n                className=\"wx-4VuBwK2D wx-data\"\n                style={{\n                  paddingTop: `${renderRows.d}px`,\n                  paddingLeft: `${renderColumns.d}px`,\n                }}\n              >\n                {dataRows.map((row, rIndex) => {\n                  const isSelected = selectedRows.indexOf(row.id) !== -1;\n                  const isInactive = dragItem === row.id;\n                  const rowClass =\n                    'wx-row' +\n                    (autoRowHeight ? ' wx-autoheight' : '') +\n                    (rowStyle ? ' ' + rowStyle(row) : '') +\n                    (isSelected ? ' wx-selected' : '') +\n                    (isInactive ? ' wx-inactive' : '');\n                  const rowStyleProp = autoRowHeight\n                    ? { minHeight: `${row.rowHeight || defaultRowHeight}px` }\n                    : { height: `${row.rowHeight || defaultRowHeight}px` };\n                  return (\n                    <div\n                      key={row.id}\n                      className={'wx-4VuBwK2D ' + rowClass}\n                      data-id={row.id}\n                      data-context-id={row.id}\n                      style={rowStyleProp}\n                      role=\"row\"\n                      aria-rowindex={rIndex}\n                      aria-expanded={row.open}\n                      aria-level={tree ? row.$level + 1 : undefined}\n                      aria-selected={tree ? isSelected : undefined}\n                      tabIndex={-1}\n                    >\n                      {renderColumns.data.map((column) => {\n                        if (column.collapsed) {\n                          return (\n                            <div\n                              key={column.id}\n                              className=\"wx-4VuBwK2D wx-cell wx-collapsed\"\n                            ></div>\n                          );\n                        } else if (\n                          editorState?.id === row.id &&\n                          editorState.column == column.id\n                        ) {\n                          return (\n                            <Editor key={column.id} row={row} column={column} />\n                          );\n                        } else {\n                          return (\n                            <Cell\n                              key={column.id}\n                              row={row}\n                              column={column}\n                              columnStyle={columnStyle}\n                              cellStyle={cellStyle}\n                              reorder={reorder}\n                              focusable={\n                                focus?.row === row.id &&\n                                focus?.column == column.id\n                              }\n                            />\n                          );\n                        }\n                      })}\n                    </div>\n                  );\n                })}\n              </div>\n            </div>\n            {footer && (data || []).length ? (\n              <HeaderFooter\n                type={'footer'}\n                contentWidth={contentWidth}\n                deltaLeft={renderColumns.df}\n                columns={renderColumns.footer}\n                columnStyle={columnStyle}\n              />\n            ) : null}\n          </div>\n        </div>\n      </div>\n      {printConfig ? (\n        <Print\n          config={printConfig}\n          rowStyle={rowStyle}\n          columnStyle={columnStyle}\n          cellStyle={cellStyle}\n          header={header}\n          footer={footer}\n          reorder={reorder}\n        />\n      ) : null}\n    </>\n  );\n}\n\nexport default Layout;\n","import {\n  useState,\n  useMemo,\n  useEffect,\n  useRef,\n  useCallback,\n  useContext,\n  forwardRef,\n  useImperativeHandle,\n} from 'react';\n\n// core widgets lib\nimport { Locale } from '@svar-ui/react-core';\nimport { en } from '@svar-ui/grid-locales';\n\n// stores\nimport { EventBusRouter } from '@svar-ui/lib-state';\nimport { DataStore } from '@svar-ui/grid-store';\n\n// context\nimport { context } from '@svar-ui/react-core';\nimport StoreContext from '../context';\n\n// svelte store factory (used by DataStore)\nimport { writable } from '@svar-ui/lib-react';\n\n// ui\nimport Layout from './Layout.jsx';\n\nconst camelize = (s) =>\n  s\n    .split('-')\n    .map((part) => (part ? part.charAt(0).toUpperCase() + part.slice(1) : ''))\n    .join('');\n\nconst Grid = forwardRef(function Grid(\n  {\n    data = [],\n    columns = [],\n    rowStyle = null,\n    columnStyle = null,\n    cellStyle = null,\n    selectedRows,\n    select = true,\n    multiselect = false,\n    header = true,\n    footer = false,\n    dynamic = null,\n    overlay = null,\n    reorder = false,\n    onReorder = null,\n    autoRowHeight = false,\n    sizes,\n    split,\n    tree = false,\n    autoConfig = false,\n    init = null,\n    responsive = null,\n    sortMarks,\n    undo = false,\n    hotkeys = null,\n    ...restProps\n  },\n  ref,\n) {\n  // keep latest rest props for event routing\n  const restPropsRef = useRef();\n  restPropsRef.current = restProps;\n\n  // init stores\n  const dataStore = useMemo(() => new DataStore(writable), []);\n  const firstInRoute = useMemo(() => dataStore.in, [dataStore]);\n\n  const lastInRouteRef = useRef(null);\n  if (lastInRouteRef.current === null) {\n    lastInRouteRef.current = new EventBusRouter((a, b) => {\n      const name = 'on' + camelize(a);\n      if (restPropsRef.current && restPropsRef.current[name]) {\n        restPropsRef.current[name](b);\n      }\n    });\n    firstInRoute.setNext(lastInRouteRef.current);\n  }\n\n  // public API\n  const api = useMemo(\n    () => ({\n      getState: dataStore.getState.bind(dataStore),\n      getReactiveState: dataStore.getReactive.bind(dataStore),\n      getStores: () => ({ data: dataStore }),\n      exec: firstInRoute.exec,\n      setNext: (ev) => {\n        lastInRouteRef.current = lastInRouteRef.current.setNext(ev);\n        return lastInRouteRef.current;\n      },\n      intercept: firstInRoute.intercept.bind(firstInRoute),\n      on: firstInRoute.on.bind(firstInRoute),\n      detach: firstInRoute.detach.bind(firstInRoute),\n      getRow: dataStore.getRow.bind(dataStore),\n      getRowIndex: dataStore.getRowIndex.bind(dataStore),\n      getColumn: dataStore.getColumn.bind(dataStore),\n    }),\n    [dataStore, firstInRoute],\n  );\n\n  const [clientWidth, setClientWidth] = useState(0);\n  const [clientHeight, setClientHeight] = useState(0);\n  const [responsiveLevel, setResponsiveLevel] = useState(null);\n  const [responsiveConfig, setResponsiveConfig] = useState(null);\n\n  // auto config columns\n  const finalColumns = useMemo(() => {\n    if (autoConfig && !columns.length && data.length) {\n      const test = data[0];\n      const autoCols = [];\n\n      for (let key in test) {\n        if (key !== 'id' && key[0] !== '$') {\n          let col = {\n            id: key,\n            header: key[0].toUpperCase() + key.slice(1),\n          };\n\n          if (typeof autoConfig === 'object') {\n            col = { ...col, ...autoConfig };\n          }\n          autoCols.push(col);\n        }\n      }\n\n      return autoCols;\n    }\n\n    return (responsiveConfig && responsiveConfig.columns) ?? columns;\n  }, [autoConfig, columns, data, responsiveConfig]);\n\n  const finalSizes = useMemo(\n    () => (responsiveConfig && responsiveConfig.sizes) ?? sizes,\n    [responsiveConfig, sizes],\n  );\n\n  const resize = useCallback(\n    (rect) => {\n      setClientWidth(rect.width);\n      setClientHeight(rect.height);\n\n      if (responsive) {\n        const levels = Object.keys(responsive)\n          .map(Number)\n          .sort((a, b) => a - b);\n\n        const newLevel = levels.find((level) => rect.width <= level) ?? null;\n\n        if (newLevel !== responsiveLevel) {\n          setResponsiveConfig(responsive[newLevel]);\n          setResponsiveLevel(newLevel);\n        }\n      }\n    },\n    [responsive, responsiveLevel],\n  );\n\n\n  const _skin = useContext(context.theme);\n\n  const initOnceRef = useRef(0);\n  useEffect(() => {\n    if (!initOnceRef.current) {\n      if (init) init(api);\n    } else {\n      const prev = dataStore.getState();\n      dataStore.init({\n        data,\n        columns: finalColumns,\n        split: split || prev.split,\n        sizes: finalSizes || prev.sizes,\n        selectedRows: selectedRows || prev.selectedRows,\n        dynamic,\n        tree,\n        sortMarks: sortMarks || prev.sortMarks,\n        undo,\n        reorder,\n        _skin,\n        _select: select,\n      });\n    }\n    initOnceRef.current++;\n  }, [\n    dataStore,\n    data,\n    finalColumns,\n    split,\n    finalSizes,\n    selectedRows,\n    dynamic,\n    tree,\n    sortMarks,\n    undo,\n    reorder,\n    _skin,\n    select,\n    init,\n    api,\n  ]);\n\n  if (initOnceRef.current === 0) {\n    dataStore.init({\n      data,\n      columns: finalColumns,\n      split: split || { left: 0 },\n      sizes: finalSizes || {},\n      selectedRows: selectedRows || [],\n      dynamic,\n      tree,\n      sortMarks: sortMarks || {},\n      undo,\n      reorder,\n      _skin,\n      select,\n    });\n  }\n\n  // expose API via ref\n  useImperativeHandle(\n    ref,\n    () => ({\n      ...api,\n    }),\n    [api],\n  );\n\n  return (\n    <StoreContext.Provider value={api}>\n      <Locale words={en} optional={true}>\n        <Layout\n          header={header}\n          footer={footer}\n          overlay={overlay}\n          rowStyle={rowStyle}\n          columnStyle={columnStyle}\n          cellStyle={cellStyle}\n          onReorder={onReorder}\n          multiselect={multiselect}\n          autoRowHeight={autoRowHeight}\n          clientWidth={clientWidth}\n          clientHeight={clientHeight}\n          responsiveLevel={responsiveLevel}\n          resize={resize}\n          hotkeys={hotkeys}\n        />\n      </Locale>\n    </StoreContext.Provider>\n  );\n});\n\nexport default Grid;\n","import './HeaderMenuItem.css';\n\nfunction HeaderMenuItem({ item }) {\n  return (\n    <div\n      tabIndex={-1}\n      role=\"menuitem\"\n      aria-label={\n        item.hidden ? `Show ${item.text} column` : `Hide ${item.text} column`\n      }\n    >\n      <div\n        className={'wx-v13lZxja wx-icon' + (item.hidden ? ' wx-hidden' : '')}\n      >\n        <i className=\"wx-v13lZxja wxi-eye\"></i>\n      </div>\n      <span>{item.text}</span>\n    </div>\n  );\n}\n\nexport default HeaderMenuItem;\n","import { useEffect, useMemo } from 'react';\nimport { ContextMenu, registerMenuItem } from '@svar-ui/react-menu';\nimport HeaderMenuItem from './HeaderMenuItem.jsx';\nimport { useStoreLater } from '@svar-ui/lib-react';\n\nexport default function HeaderMenu({ columns = null, api, children }) {\n  useEffect(() => {\n    registerMenuItem('table-header', HeaderMenuItem);\n  }, []);\n\n  function getLabel(col) {\n    for (let i = col.header.length - 1; i >= 0; i--) {\n      const text = col.header[i].text;\n      if (text) return text;\n    }\n    return col.id;\n  }\n\n  function headerMenuClick(e) {\n    const col = e.action;\n    if (col) {\n      api.exec('hide-column', { id: col.id, mode: !col.hidden });\n    }\n  }\n\n  function open(id) {\n    return id;\n  }\n\n  const rColumns = useStoreLater(api, '_columns');\n\n  const headerMenuOptions = useMemo(() => {\n    if (api) {\n      const source = Array.isArray(rColumns) ? rColumns : [];\n      const included = columns ? source.filter((c) => columns[c.id]) : source;\n\n      return included.map((c) => {\n        const text = getLabel(c);\n        return {\n          id: c.id,\n          text,\n          type: 'table-header',\n          hidden: c.hidden,\n        };\n      });\n    } else {\n      return [];\n    }\n  }, [api, columns, rColumns]);\n\n  return (\n    <ContextMenu\n      dataKey=\"headerId\"\n      options={headerMenuOptions}\n      onClick={headerMenuClick}\n      at=\"point\"\n      resolver={open}\n    >\n      {typeof children === 'function' ? children() : children}\n    </ContextMenu>\n  );\n}\n","import { useEffect, useRef, useState } from 'react';\nimport { getRenderValue } from '@svar-ui/grid-store';\nimport './Tooltip.css';\n\nfunction Tooltip(props) {\n  const { content: Content = null, api, children } = props;\n\n  const areaRef = useRef(null);\n  const tooltipRef = useRef(null);\n\n  const [areaCoords, setAreaCoords] = useState();\n  const [tooltipData, setTooltipData] = useState();\n  const [pos, setPos] = useState();\n\n  function findAttribute(node) {\n    while (node) {\n      if (node.getAttribute) {\n        const id = node.getAttribute('data-row-id');\n        const colId = node.getAttribute('data-col-id');\n        if (id && api && colId) {\n          const col = api.getColumn(colId);\n          return { id, col, target: node };\n        }\n      }\n      node = node.parentNode;\n    }\n    return { id: null, col: null, target: null };\n  }\n\n  useEffect(() => {\n    const node = tooltipRef.current;\n    if (node && areaCoords && pos) {\n      let tooltipCoords = node.getBoundingClientRect();\n      let newLeft = pos.left;\n      let newTop = pos.top;\n      if (tooltipCoords.right >= areaCoords.right) {\n        newLeft = areaCoords.width - tooltipCoords.width - 5;\n      }\n      if (tooltipCoords.bottom >= areaCoords.bottom) {\n        newTop = pos.top - (tooltipCoords.bottom - areaCoords.bottom + 2);\n      }\n      if (newLeft !== pos.left || newTop !== pos.top) {\n        setPos({ ...pos, left: newLeft, top: newTop });\n      }\n    }\n  }, [areaCoords, pos]);\n\n  const timerRef = useRef();\n  const TIMEOUT = 300;\n\n  const debounce = (code) => {\n    clearTimeout(timerRef.current);\n    timerRef.current = setTimeout(() => {\n      code();\n    }, TIMEOUT);\n  };\n\n  function move(e) {\n    const { id, target, col } = findAttribute(e.target);\n    setPos(null);\n    if (!id) {\n      clearTimeout(timerRef.current);\n      return;\n    }\n    const clientX = e.clientX;\n\n    debounce(() => {\n      let text = '';\n      if (id) {\n        const data = getTooltipData(id);\n        setTooltipData(data);\n        text = getTooltipText(col, data);\n      }\n      const targetCoords = target.getBoundingClientRect();\n      const areaEl = areaRef.current;\n      if (!areaEl) return;\n      const areaRect = areaEl.getBoundingClientRect();\n      setAreaCoords(areaRect);\n      const top = targetCoords.top + targetCoords.height - areaRect.top;\n      const left = clientX - areaRect.left;\n      setPos({ top, left, col, text });\n    });\n  }\n\n  function getTooltipData(id) {\n    return api.getRow(id);\n  }\n\n  function getTooltipText(col, data) {\n    data = data || tooltipData;\n    if (typeof col.tooltip === 'function') return col.tooltip(data);\n    return getRenderValue(data, col) || '';\n  }\n\n  return (\n    <div className=\"wx-RYccULtD wx-area\" ref={areaRef} onMouseMove={move}>\n      {pos && pos.col.tooltip !== false && (Content || pos.text) ? (\n        <div\n          className=\"wx-RYccULtD tooltip\"\n          role=\"alert\"\n          tabIndex={0}\n          ref={tooltipRef}\n          style={{ top: pos.top + 'px', left: pos.left + 'px' }}\n        >\n          {Content ? <Content data={tooltipData} /> : pos.text}\n        </div>\n      ) : null}\n      {children}\n    </div>\n  );\n}\n\nexport default Tooltip;\n","import { useContext, useMemo } from 'react';\nimport { ContextMenu as WxContextMenu } from '@svar-ui/react-menu';\nimport { context } from '@svar-ui/react-core';\nimport { useStoreLater } from '@svar-ui/lib-react';\n\nimport {\n  defaultMenuOptions,\n  assignChecks,\n  handleAction,\n} from '@svar-ui/grid-store';\nimport { locale } from \"@svar-ui/lib-dom\";\nimport { en } from \"@svar-ui/grid-locales\";\nimport './ContextMenu.css';\n\nfunction ContextMenu({\n  api,\n  options = [...defaultMenuOptions],\n  at = 'point',\n  resolver,\n  dataKey,\n  filter,\n  css,\n  children,\n  handler,\n  onClick,\n}) {\n  const i18n = useContext(context.i18n);\n  const _ = useMemo(() => i18n ? i18n.getGroup('grid') : locale(en).getGroup('grid'), [i18n]);\n\n  const selectedRows = useStoreLater(api, 'selectedRows');\n  const data = useStoreLater(api, 'data');\n  const reorder = useStoreLater(api, 'reorder');\n\n  const normalizedOptions = useMemo(() => {\n    const filtered = filterItems(options);\n    const normalized = assignChecks(filtered);\n    applyLocale(normalized);\n    return normalized;\n  }, [options, reorder, data]);\n\n  function applyLocale(options) {\n    options.forEach(op => {\n      if (op.text) op.text = _(op.text);\n      if (op.subtext) op.subtext = _(op.subtext);\n      if (op.data) op.data = applyLocale(op.data);\n    });\n  }\n\n  const finalOptions = useMemo(() => {\n    const opts = [];\n    normalizedOptions.forEach(item => {\n      switch (item.id) {\n        case 'move-item:up':\n        case 'move-item:down':\n        case 'paste-row': {\n          if (!item.isDisabled || !api) {\n            opts.push(item);\n            return;\n          }\n          \n          const disabled = item.isDisabled(\n            item.id === 'paste-row' ? api : selectedRows,\n            data\n          );\n\n          opts.push({\n            ...item,\n            disabled,\n          });\n          break;\n        }\n        default: {\n          opts.push(item);\n          break;\n        }\n      }\n    });\n    return opts;\n  }, [normalizedOptions, selectedRows, data, api]);\n\n  function getItem(id) {\n    if (!selectedRows.includes(id)) {\n      api.exec('select-row', { id });\n    }\n    return id;\n  }\n\n  const handleClicks = (ev) => {\n    const option = ev.action;\n    if (option) handleAction(api, option.id);\n    onClick && onClick(ev);\n  };\n\n  function filterItems(items) {\n    if (reorder) return items;\n    return items.filter(({ id }) => {\n      return !(id === 'move-item:up' || id === 'move-item:down');\n    });\n  }\n\n  const resolverProp = resolver !== undefined ? resolver : getItem;\n\n  return (\n    <WxContextMenu\n      css={`wx-KKGLK8TH wx-table-menu ${css}`}\n      at={at}\n      dataKey={dataKey}\n      handler={handler}\n      options={finalOptions}\n      resolver={resolverProp}\n      filter={filter}\n      onClick={handleClicks}\n    >\n      {children}\n    </WxContextMenu>\n  );\n}\n\nexport default ContextMenu;\n","import { useMemo, useContext } from 'react';\nimport { Toolbar } from '@svar-ui/react-toolbar';\nimport {\n\tdefaultToolbarButtons,\n\tassignChecks,\n\thandleAction,\n} from '@svar-ui/grid-store';\nimport { locale } from '@svar-ui/lib-dom';\nimport { en } from '@svar-ui/grid-locales';\nimport { context } from '@svar-ui/react-core';\nimport { useStoreLater } from '@svar-ui/lib-react';\n\nexport default function ToolbarComponent({\n\tapi,\n\titems = [...defaultToolbarButtons],\n\tonClick,\n\t...restProps\n}) {\n\tconst i18nContext = useContext(context.i18n);\n\tconst _ =\n\t\ti18nContext?.getGroup('grid') || locale(en).getGroup('grid');\n\n\tconst selectedRows = useStoreLater(api, 'selectedRows');\n\tconst data = useStoreLater(api, 'data');\n\tconst history = useStoreLater(api, 'history');\n\tconst reorder = useStoreLater(api, 'reorder');\n\tconst undo = useStoreLater(api, 'undo');\n\n\tconst rowActions = [\n\t\t'open-editor',\n\t\t'delete-row',\n\t\t'copy-row',\n\t\t'cut-row',\n\t\t'paste-row',\n\t\t'move-item:up',\n\t\t'move-item:down',\n\t];\n\tconst historyActions = ['undo', 'redo'];\n\n\tconst normalizedItems = useMemo(() => {\n\t\tconst filtered = filterItems(items);\n\t\tconst normalized = assignChecks(filtered);\n\t\tapplyLocale(normalized);\n\t\treturn normalized;\n\n\t\tfunction filterItems(items) {\n\t\t\tif (undo && reorder) return items;\n\t\t\treturn items.filter(({ id }) => {\n\t\t\t\treturn !(\n\t\t\t\t\t(!undo && (id === 'undo' || id === 'redo')) ||\n\t\t\t\t\t(!reorder &&\n\t\t\t\t\t\t(id === 'move-item:up' || id === 'move-item:down'))\n\t\t\t\t);\n\t\t\t});\n\t\t}\n\n\t\tfunction applyLocale(options) {\n\t\t\toptions.forEach(op => {\n\t\t\t\tif (op.text) op.text = _(op.text);\n\t\t\t\tif (op.menuText) op.menuText = _(op.menuText);\n\t\t\t\tif (op.items) op.items = applyLocale(op.items);\n\t\t\t});\n\t\t}\n\t}, [items, undo, reorder, _]);\n\n\tconst buttons = useMemo(() => {\n\t\tconst finalButtons = [];\n\t\tconst selected = selectedRows?.length;\n\t\tnormalizedItems.forEach(item => {\n\t\t\tconst action = item.id;\n\t\t\tif (action === 'add-row') {\n\t\t\t\tfinalButtons.push(item);\n\t\t\t} else if (rowActions.includes(action)) {\n\t\t\t\tif (!selected) return;\n\t\t\t\tfinalButtons.push({\n\t\t\t\t\t...item,\n\t\t\t\t\tdisabled:\n\t\t\t\t\t\titem.isDisabled &&\n\t\t\t\t\t\titem.isDisabled(\n\t\t\t\t\t\t\taction === 'paste-row' ? api : selectedRows,\n\t\t\t\t\t\t\tdata\n\t\t\t\t\t\t),\n\t\t\t\t});\n\t\t\t} else if (historyActions.includes(action)) {\n\t\t\t\tfinalButtons.push({\n\t\t\t\t\t...item,\n\t\t\t\t\tdisabled: item.isDisabled(history),\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tfinalButtons.push(item);\n\t\t\t}\n\t\t});\n\t\treturn finalButtons;\n\t}, [normalizedItems, selectedRows, data, history, api, rowActions, historyActions]);\n\n\tconst handleClicks = ev => {\n\t\tconst option = ev.item;\n\t\tif (option) handleAction(api, option.id);\n\t\tonClick && onClick(ev);\n\t};\n\n\treturn <Toolbar items={buttons} onClick={handleClicks} {...restProps} />;\n}\n","import { Material as CoreMaterial } from '@svar-ui/react-core';\nimport './Material.css';\n\nfunction Material({ fonts = true, children }) {\n  if (children) {\n    return <CoreMaterial fonts={fonts}>{children}</CoreMaterial>;\n  } else {\n    return <CoreMaterial fonts={fonts} />;\n  }\n}\n\nexport default Material;\n","import { Willow as WillowCore } from '@svar-ui/react-core';\nimport './Willow.css';\n\nfunction Willow({ fonts = true, children }) {\n  if (children) {\n    return <WillowCore fonts={fonts}>{children}</WillowCore>;\n  } else {\n    return <WillowCore fonts={fonts} />;\n  }\n}\n\nexport default Willow;\n","import { WillowDark as WillowDarkCore } from '@svar-ui/react-core';\nimport './WillowDark.css';\n\nfunction WillowDark({ fonts = true, children }) {\n  if (children) {\n    return <WillowDarkCore fonts={fonts}>{children}</WillowDarkCore>;\n  } else {\n    return <WillowDarkCore fonts={fonts} />;\n  }\n}\n\nexport default WillowDark;\n","import Grid from './components/Grid.jsx';\nimport HeaderMenu from './components/menus/HeaderMenu.jsx';\nimport Tooltip from './components/Tooltip.jsx';\nimport ContextMenu from './components/menus/ContextMenu.jsx';\nimport Toolbar from './components/Toolbar.jsx';\n\nimport Material from './themes/Material.jsx';\nimport Willow from './themes/Willow.jsx';\nimport WillowDark from './themes/WillowDark.jsx';\n\nexport {\n  getEditorConfig,\n  defaultMenuOptions,\n  defaultToolbarButtons,\n} from '@svar-ui/grid-store';\n\nimport { setEnv, env } from '@svar-ui/lib-dom';\nsetEnv(env);\n\nexport {\n  Grid,\n  HeaderMenu,\n  Tooltip,\n  ContextMenu,\n  Material,\n  Willow,\n  WillowDark,\n  Toolbar,\n};\n"],"names":["store","createContext","onresize","node","handler","ro","data","SHIFT","LONG_TOUCH_DELAY","getID","id","getOffset","box","body","top","left","getPos","ev","offset","reorder","config","cfg","context","touchTimer","startPos","started","touched","container","resetTimer","down","source","locate","move","p","start","end","scrollLeft","scrollTop","up","handleMouseDown","preventUserSelect","handleMouseMove","handleMouseUp","handleTouchStart","handleTouchEnd","handleTouchMove","handleContext","preventDefault","hasDraggable","full","SCROLL_SPEED_DELTA","initScrollState","tryAutoScroll","dragScrollConfig","bottom","sense","xScroll","yScroll","rPos","newDirX","newDirY","resetAutoScroll","startAutoScroll","dir","autoScroll","x","y","autoXScroll","autoYScroll","scroll","autoScrollTo","value","mode","getStyle","width","flexgrow","fixed","right","height","style","getCssName","column","cell","columnStyle","css","pos","Cell","props","row","cellStyle","children","focusable","setFocusable","useWritableProp","api","useContext","storeContext","focusCell","useStore","search","shouldHighlight","useMemo","buildCellCss","columnStyleFn","cellStyleFn","isDraggable","cellElRef","useRef","useEffect","toggleFocusAction","useCallback","highlightText","text","regex","className","shadowToggle","fixedRightToggle","CellComponent","jsxs","jsx","Fragment","action","getRenderValue","highlight","index","resize","dx","Component","filter","filterValue","filterRows","Text","Richselect","options","getOptions","template","d","getValue","opt","handleKeyDown","RichSelect","option","filters","Filter","filterValues","HeaderCell","lastRow","sortRow","bodyHeight","hasSplit","sortMarksValue","sortMark","startRef","resizeColumn","inProgress","sort","order","collapse","toggleCollapseColumn","toggleSortColumn","isCollapsed","overlay","collapsedTextStyle","getCell","key","collapsedClassName","normalClassName","gripRef","cleanup","FooterCell","React","HeaderFooter","deltaLeft","contentWidth","columns","type","sizes","split","rowHeights","renderedHeader","res","rowsCount","ri","inSpan","col","ci","isCommunity","i","getColumn","c","isLast","ind","idx","isSort","Overlay","isComponent","prop","actions","editor","setValue","useState","updateValue","closeAndSave","Combo","onAction","setText","filterOptions","setFilterOptions","a","navigate","keydown","ready","handleChange","e","nextText","inputRef","SuggestDropdown","Datepicker","nodeRef","Dropdown","Calendar","setKeydown","editors","Editor","closeEditor","ignore","save","ignoreFocus","cancel","keyHandler","computedStyle","ed","rootRef","destroy","clickOutside","role","ariaReadonly","_columns","getColumnCss","CellComp","styleObject","getPrintCellStyle","getPrintFilterValue","Grid","rowStyle","header","footer","headerColumns","getHeaderFooterPrintColumns","footerColumns","isDraggableIcon","rowIndex","Print","restProps","skin","grids","getPrintColumns","target","cloned","rule","cols","Layout","multiselect","onReorder","autoRowHeight","clientWidth","clientHeight","responsiveLevel","hotkeysConfig","dynamic","selectedRows","selectionChanged","useStoreWithCounter","selectState","editorState","tree","printConfig","undoState","rowHeightFromData","SCROLLSIZE","setSCROLLSIZE","getScrollSize","setScrollLeft","setScrollTop","hasAny","defaultRowHeight","tableNodeRef","dragItem","setDragItem","dragNode","setDragNode","leftColumns","rightColumns","centerColumns","center","fullWidth","acc","EXTRACOLUMNS","getHeaderPosition","delta","spanStartInd","h","renderColumns","dataCols","headerCols","footerCols","sum","rightSpanDelta","hCell","colspan","diff","headerPos","footerPos","dh","csH","df","csF","headerHeight","footerHeight","hasHScroll","visibleRowsHeight","visibleRows","rowHeightsRef","renderedHeight","setRenderedHeight","renderEnd","setRenderEnd","renderRows","deltaTop","EXTRAROWS","st","startInd","topHeight","visibleRowsCount","currentHeight","totalCount","fullHeight","count","totalHeight","hasVScroll","globalWidth","lastCallRef","dataRows","visibleSelection","r","renderStart","onScroll","lockSelection","checkDraggable","postDragRef","movementYRef","bodyClickHandlers","rowId","locateAttr","toggle","range","startDrag","sourceNode","from","itemNode","element","offsetX","vScrollSize","itemPos","moveDrag","min","max","targetRow","to","toId","rowHeight","targetRect","dragNodePos","targetNodePos","initialMode","endDrag","div","styleWidth","dataElRef","adjustHeight","rh","re","focus","setFocus","cind","scrollRef","dragState","drag","hotkeys","defaultHotkeys","v","scrollConfig","scrollTo","bodyRef","result","delegateClick","gridClassName","rIndex","isSelected","isInactive","rowClass","rowStyleProp","camelize","s","part","forwardRef","select","autoConfig","init","responsive","sortMarks","undo","ref","restPropsRef","dataStore","DataStore","writable","firstInRoute","lastInRouteRef","EventBusRouter","b","name","setClientWidth","setClientHeight","setResponsiveLevel","responsiveConfig","setResponsiveConfig","finalColumns","test","autoCols","finalSizes","rect","newLevel","level","_skin","initOnceRef","prev","useImperativeHandle","StoreContext","Locale","en","HeaderMenuItem","item","HeaderMenu","registerMenuItem","getLabel","headerMenuClick","open","rColumns","useStoreLater","headerMenuOptions","ContextMenu","Tooltip","Content","areaRef","tooltipRef","areaCoords","setAreaCoords","tooltipData","setTooltipData","setPos","findAttribute","colId","tooltipCoords","newLeft","newTop","timerRef","TIMEOUT","debounce","code","clientX","getTooltipData","getTooltipText","targetCoords","areaEl","areaRect","defaultMenuOptions","at","resolver","dataKey","onClick","i18n","_","locale","normalizedOptions","filtered","filterItems","normalized","assignChecks","applyLocale","op","finalOptions","opts","disabled","getItem","handleClicks","handleAction","items","resolverProp","WxContextMenu","ToolbarComponent","defaultToolbarButtons","history","rowActions","historyActions","normalizedItems","buttons","finalButtons","selected","Toolbar","Material","fonts","CoreMaterial","Willow","WillowCore","WillowDark","WillowDarkCore","setEnv","env"],"mappings":"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"}