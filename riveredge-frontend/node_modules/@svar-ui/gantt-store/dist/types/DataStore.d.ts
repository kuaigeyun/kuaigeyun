import { Store, EventBus } from "@svar-ui/lib-state";
import type { TDataConfig, TWritableCreator, TID } from "@svar-ui/lib-state";
import { HistoryManager } from "./pro/HistoryManager";
import type { IData, IDataConfig, ITask, TMethodsConfig, ILink, IVisibleArea, IParsedTask, TScrollTask, IExportConfig } from "./types";
export default class DataStore extends Store<IData> {
    in: EventBus<TMethodsConfig, keyof TMethodsConfig>;
    private _router;
    private _modules;
    constructor(w: TWritableCreator);
    init(state: Partial<IDataConfig>): void;
    private enableModule;
    private disableModule;
    setState(state: Partial<IData>, ctx?: TDataConfig): {
        [key: string]: () => void;
    };
    setStateAsync(state: Partial<IData>): void;
    getTask(id: TID): IParsedTask;
    getHistory(): HistoryManager;
    serialize(): Partial<ITask>[];
    private changeScale;
    private isScheduled;
    private resetSummaryDates;
    private moveSummaryKids;
    private calcScaleDate;
    getNextRow(id: TID): IParsedTask;
    getPrevRow(id: TID): IParsedTask;
}
type CombineTypes<T, N> = {
    [P in keyof T]: T[P] & N;
};
export type IDataMethodsConfig = CombineTypes<{
    ["add-task"]: {
        id?: TID;
        task: Partial<ITask>;
        target?: TID;
        mode?: "before" | "after" | "child";
        show?: TScrollTask["mode"];
        select?: boolean;
        eventSource?: string;
    };
    ["update-task"]: {
        id: TID;
        segmentIndex?: number;
        task: Partial<ITask>;
        diff?: number;
        inProgress?: boolean;
        eventSource?: string;
        skipUndo?: boolean;
    };
    ["delete-task"]: {
        id: TID;
        source?: TID;
    };
    ["open-task"]: {
        id: TID;
        mode: boolean;
    };
    ["select-task"]: {
        id: TID;
        toggle?: boolean;
        range?: boolean;
        show?: TScrollTask["mode"];
    };
    ["drag-task"]: {
        id: TID;
        segmentIndex?: number;
        width?: number;
        left?: number;
        top?: number;
        start?: boolean;
        inProgress?: boolean;
    };
    ["copy-task"]: {
        id: TID;
        target?: TID;
        mode?: "before" | "after" | "child";
        source?: TID;
        lazy?: boolean;
        eventSource?: string;
        skipUndo?: boolean;
    };
    ["move-task"]: {
        id: TID;
        target?: TID;
        mode: "before" | "after" | "up" | "down" | "child";
        inProgress?: boolean;
        source?: TID;
    };
    ["indent-task"]: {
        id: TID;
        mode: boolean;
    };
    ["show-editor"]: {
        id: TID;
    };
    ["add-link"]: {
        id?: TID;
        link: Partial<ILink>;
        eventSource?: string;
        skipUndo: boolean;
    };
    ["update-link"]: {
        id: TID;
        link: Partial<ILink>;
    };
    ["delete-link"]: {
        id: TID;
    };
    ["scroll-chart"]: {
        left?: number;
        top?: number;
    };
    ["render-data"]: IVisibleArea;
    ["request-data"]: {
        id: TID;
    };
    ["provide-data"]: {
        id: TID;
        data: {
            tasks?: Array<ITask>;
            links?: Array<ILink>;
        };
    };
    ["zoom-scale"]: {
        dir: number;
        date: Date;
        offset?: number;
    };
    ["expand-scale"]: {
        minWidth: number;
        date?: Date;
        offset?: number;
    };
    ["sort-tasks"]: {
        key: string;
        order: "asc" | "desc";
        add?: boolean;
    };
    ["hotkey"]: {
        key: string;
        event: any;
        eventSource?: string;
    };
    ["schedule-tasks"]: {
        id?: TID;
        task?: Partial<ITask>;
    };
    ["undo"]: void;
    ["redo"]: void;
    ["split-task"]: {
        id: TID;
        segmentIndex?: number;
    };
    ["export-data"]: IExportConfig;
    ["import-data"]: {
        data: string;
        format?: "mspx";
    };
}, {
    skipProvider?: boolean;
    spipUndo?: boolean;
    [key: string]: any;
}>;
export {};
