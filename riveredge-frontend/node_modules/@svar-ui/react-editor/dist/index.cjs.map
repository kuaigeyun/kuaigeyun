{"version":3,"file":"index.cjs","sources":["../src/helpers.js","../src/en.js","../src/components/FormEditor.jsx","../src/editor.js","../src/components/Values.jsx","../src/components/Form.jsx","../src/components/Columns.jsx","../src/components/buttons/Toolbar.jsx","../src/components/buttons/buttons.js","../src/components/Panel.jsx","../src/components/Layout.jsx","../src/components/Editor.jsx","../src/themes/Material.jsx","../src/themes/Willow.jsx","../src/themes/WillowDark.jsx","../src/components/sections/ReadOnly.jsx","../src/components/sections/Section.jsx","../src/index.js"],"sourcesContent":["const handlers = {};\nexport function getItemHandler(type) {\n  return typeof type !== 'undefined'\n    ? handlers[type] || type\n    : handlers['text'];\n}\nexport function registerEditorItem(type, handler) {\n  handlers[type] = handler;\n}\n","export default {\n  editor: {},\n};\n","import { useEffect, useMemo, useRef, useContext } from 'react';\nimport { Field } from '@svar-ui/react-core';\nimport { context } from '@svar-ui/react-core';\nimport { getItemHandler } from '../helpers';\nimport './FormEditor.css';\n\nexport default function FormEditor(props) {\n  const {\n    editors,\n    data,\n    css = '',\n    errors,\n    focus = false,\n    onClick,\n    children,\n    onChange,\n  } = props;\n\n  const root = useRef(null);\n\n  useEffect(() => {\n    if (focus) {\n      const focused = document.activeElement;\n      if (focused && root.current && root.current.contains(focused)) return;\n\n      const input = root.current\n        ? root.current.querySelector(\n            'input:not([disabled]), textarea:not([disabled]), select:not([disabled])',\n          )\n        : null;\n\n      if (input) {\n        setTimeout(() => {\n          if (typeof input.select === 'function') {\n            input.select();\n          }\n          if (typeof input.focus === 'function') {\n            input.focus();\n          }\n        }, 300);\n      }\n    }\n  }, []);\n\n  const i18n = useContext(context.i18n);\n  const _ = useMemo(() => i18n.getGroup('editor'), [i18n]);\n\n  const overlay = useMemo(\n    () =>\n      editors.config[0].comp === 'readonly' &&\n      editors.config.every((editor) => !Object.keys(data).includes(editor.key)),\n    [editors, data],\n  );\n\n  return (\n    <div className={'wx-s2aE1xdZ wx-sections ' + css} ref={root}>\n      {children}\n      {overlay ? (\n        <div className=\"wx-s2aE1xdZ wx-overlay\">{_('No data')}</div>\n      ) : null}\n      {editors.config.map((editor) => {\n        if (!editor.hidden) {\n          const { key, onChange: onChangeEditor, ...otherProps } = editor;\n          if (editor.comp === 'readonly' || editor.comp === 'section') {\n            const Component = getItemHandler(editor.comp);\n            return (\n              <Component\n                key={key}\n                fieldKey={key}\n                label={editor.label}\n                value={data[key]}\n                {...otherProps}\n                onClick={onClick}\n              />\n            );\n          } else {\n            const Component2 = getItemHandler(editor.comp);\n            return (\n              <div key={key}>\n                <Field\n                  label={\n                    editor.labelTemplate\n                      ? editor.labelTemplate(data[key])\n                      : (editor.label ?? '')\n                  }\n                  required={editor.required}\n                >\n                    <Component2\n                      key={key}\n                      fieldKey={key}\n                      {...otherProps}\n                      onChange={\n                        onChangeEditor ||\n                        ((ev) => {\n                          onChange &&\n                            onChange({\n                              value: ev.value,\n                              key,\n                              input: ev.input,\n                            });\n                        })\n                      }\n                      label={undefined}\n                      error={errors && errors[key]}\n                      value={data[key]}\n                    />\n                </Field>\n                {errors && errors[key] && editor.validationMessage ? (\n                  <div className=\"wx-s2aE1xdZ wx-message\">\n                    {editor.validationMessage}\n                  </div>\n                ) : null}\n              </div>\n            );\n          }\n        }\n        return null;\n      })}\n    </div>\n  );\n}\n","import { uid, isSame } from '@svar-ui/lib-state';\n\nfunction rawGetter(key) {\n  if (typeof key === 'string' && key.includes('.')) {\n    const parts = key.split('.');\n    return (obj) => {\n      let out = obj;\n      parts.forEach((p) => {\n        out = out[p];\n      });\n      return out;\n    };\n  }\n\n  return (obj) => obj[key];\n}\nfunction rawSetter(key) {\n  if (typeof key === 'string' && key.includes('.')) {\n    const parts = key.split('.');\n    return (obj, v) => {\n      let out = obj;\n      parts.forEach((p, i) => {\n        if (i === parts.length - 1) out[p] = v;\n        else out = out[p];\n      });\n    };\n  }\n\n  return (obj, v) => (obj[key] = v);\n}\n\nexport function itemsToEditors(sections) {\n  const config = sections.map((s) => {\n    const obj = { ...s };\n    if (s.config) Object.assign(obj, s.config);\n\n    obj.key = s.key || uid();\n    obj.setter = s.setter || rawSetter(s.key);\n    obj.getter = s.getter || rawGetter(s.key);\n    return obj;\n  });\n\n  const getValues = (raw) => {\n    const out = {};\n    config.forEach((ed) => {\n      if (ed.comp === 'section') return;\n      if (ed.getter) out[ed.key] = ed.getter(raw);\n      else out[ed.key] = raw[ed.key];\n    });\n    return out;\n  };\n\n  const setValues = (out, values, changes) => {\n    const fields = changes.length\n      ? changes.map((key) => config.find((a) => a.key === key))\n      : config;\n    fields.forEach((ed) => {\n      if (ed.setter) ed.setter(out, values[ed.key]);\n      else out[ed.key] = values[ed.key];\n    });\n\n    return out;\n  };\n\n  const diff = (raw, values) => {\n    const initial = getValues(raw);\n    const changes = [];\n    config.forEach((ed) => {\n      const a = initial[ed.key];\n      const b = values[ed.key];\n      // we can have a situation when initial value is undefined\n      // but empty editor will return empty value instead of undefined\n      // this behavior is correct, but we need to ignore this case\n      if (!isSame(a, b) && (a !== undefined || !!b)) {\n        changes.push(ed.key);\n      }\n    });\n\n    return changes;\n  };\n\n  const validateValues = (values, changes, _) => {\n    let any = 0;\n    const errors = {};\n\n    const fields = changes?.length\n      ? changes.map((key) => config.find((a) => a.key === key))\n      : config;\n\n    fields.forEach((ed) => {\n      if (ed.required && !values[ed.key]) {\n        errors[ed.key] = {\n          errorType: 'required',\n        };\n        ed.validationMessage =\n          ed.validationMessage ?? _('This field is required');\n        any++;\n      } else if (ed.validation && !ed.validation(values[ed.key])) {\n        errors[ed.key] = {\n          errorType: 'validation',\n        };\n        ed.validationMessage = ed.validationMessage ?? _('Invalid value');\n        any++;\n      }\n    });\n\n    return any > 0 ? errors : null;\n  };\n\n  return {\n    config: config.filter((x) => x.comp !== 'hidden'),\n    getValues,\n    setValues,\n    diff,\n    validateValues,\n  };\n}\n","import { useState, useEffect, useMemo, useContext } from 'react';\nimport { itemsToEditors } from '../editor';\nimport { deepCopy, isSame } from '@svar-ui/lib-state';\nimport { useWritableProp } from '@svar-ui/lib-react';\nimport { context } from '@svar-ui/react-core';\n\nexport default function Values({\n  values: valuesProp,\n  items,\n  css,\n  activeBatch,\n  autoSave,\n  focus,\n  readonly,\n  topBar = true,\n  bottomBar = true,\n  layout = 'default',\n  placement = 'inline',\n  view: View,\n  children,\n  onChange,\n  onSave,\n  onAction,\n  onValidation,\n  hotkeys,\n}) {\n  const i18n = useContext(context.i18n);\n  const _ = i18n.getGroup('editor');\n\n  const [values, setValues] = useWritableProp(valuesProp);\n\n  const [activatedSection, setActivatedSection] = useState(null);\n\n  const editors = useMemo(() => {\n    const editorsObj = itemsToEditors(items);\n\n    if (activatedSection) {\n      editorsObj.config.forEach((x) => {\n        if (x.comp === 'section') {\n          if (x.key === activatedSection) {\n            if (x.sectionMode === 'accordion') {\n              if (!x.activeSection) {\n                editorsObj.config.forEach((y) => {\n                  if (y.comp === 'section' && y.key !== x.key) {\n                    y.activeSection = false;\n                  }\n                });\n                x.activeSection = true;\n              }\n            } else {\n              x.activeSection = !x.activeSection;\n            }\n          }\n        }\n      });\n    }\n\n    let sections = new Set();\n    let exclusive = null;\n\n    editorsObj.config.forEach((x) => {\n      if (x.sectionMode === 'exclusive' && x.activeSection) exclusive = x.key;\n      if (x.activeSection) sections.add(x.key);\n    });\n\n    editorsObj.config.forEach((x) => {\n      x.hidden =\n        x.hidden ||\n        (activeBatch && activeBatch !== x.batch) ||\n        (exclusive && x.key != exclusive && x.section !== exclusive) ||\n        (x.section && !sections.has(x.section));\n    });\n\n    if (readonly) {\n      return {\n        ...editorsObj,\n        config: editorsObj.config.map((s) => ({ ...s, comp: 'readonly' })),\n        diff: () => [],\n      };\n    }\n    return editorsObj;\n  }, [items, activatedSection, activeBatch, readonly]);\n\n  const [actualValues, setActualValues] = useState({});\n  const [data, setData] = useState({});\n\n  const d = values;\n\n  useEffect(() => {\n    if (values !== undefined) {\n      setActualValues(deepCopy(values));\n      setData(deepCopy(values));\n      if (d.errors) {\n        d.errors = runValidation();\n      }\n    }\n  }, [values]);\n\n  const [notSaved, setNotSaved] = useState([]);\n  useEffect(() => {\n    if (values) setNotSaved([]);\n  }, [values]);\n\n  function getUniqueFields(arr) {\n    return [...new Set(arr)];\n  }\n\n  function runValidation(changes) {\n    const check = editors.validateValues(actualValues, changes, _);\n\n    if (!isSame(check, d.errors)) {\n      onValidation && onValidation({ errors: check, values: actualValues });\n    }\n\n    return check;\n  }\n\n  function handleUpdate(changes, updateData) {\n    if (autoSave && !d.errors) {\n      const updated = editors.setValues(values, updateData ?? data, changes);\n      // Ensure the writable prop reflects the updated values\n      setValues(updated);\n      onSave && onSave({ changes, values: updated });\n    } else {\n      setNotSaved(changes);\n    }\n  }\n\n  function handleChanges({ value, key, input }) {\n    let newData = { ...(data || {}), [key]: value };\n    const event = {\n      key,\n      value,\n      update: newData,\n    };\n    if (input) event.input = input;\n    onChange && onChange(event);\n\n    if (!values) return;\n\n    newData = event.update;\n    setData(newData);\n\n    const changes = editors.diff(values, newData);\n\n    const newActualValues = editors.setValues(\n      { ...(actualValues || {}) },\n      newData,\n      getUniqueFields([...changes, key]),\n    );\n    setActualValues(newActualValues);\n\n    if (changes.length) {\n      const fieldsToValidate = autoSave\n        ? []\n        : getUniqueFields([...changes, ...Object.keys(d.errors ?? {}), key]);\n      d.errors = runValidation(fieldsToValidate);\n      handleUpdate(changes, newData);\n    } else {\n      const errorsFields = Object.keys(d.errors ?? {});\n      if (errorsFields.length) d.errors = runValidation(errorsFields);\n      setNotSaved([]);\n    }\n  }\n\n  function saveAction() {\n    if (!notSaved.length) return;\n    if (!autoSave) d.errors = runValidation();\n    if (!d.errors) {\n      onSave &&\n        onSave({\n          changes: notSaved,\n          values: actualValues,\n        });\n      const updated = editors.setValues(values, data, notSaved);\n      setValues(updated);\n      setNotSaved([]);\n\n      setValues({ ...actualValues });\n    }\n  }\n\n  function handleAction({ item }) {\n    if (item.id === 'save') {\n      saveAction();\n    } else if (item.id === 'toggle-section') {\n      setActivatedSection(item.key);\n    }\n    onAction && onAction({ item, values: actualValues, changes: notSaved });\n  }\n\n  return (\n    <View\n      topBar={topBar}\n      bottomBar={bottomBar}\n      placement={placement}\n      layout={layout}\n      readonly={readonly}\n      autoSave={autoSave}\n      css={css}\n      data={data}\n      editors={editors}\n      focus={focus}\n      hotkeys={hotkeys}\n      errors={d.errors}\n      onClick={handleAction}\n      onKeyDown={handleAction}\n      onChange={handleChanges}\n    >\n      {children}\n    </View>\n  );\n}\n","import { Locale } from '@svar-ui/react-core';\nimport en from '../en.js';\n\nimport Editor from './FormEditor.jsx';\nimport Values from './Values.jsx';\nimport './Form.css';\n\nfunction Form({\n  values = {},\n  items = [],\n  css = '',\n  activeBatch = null,\n  focus = false,\n  autoSave = true,\n  readonly = false,\n  children,\n  ...restProps\n}) {\n  const processedRestProps = {};\n  for (const key in restProps) {\n    if (/^on[a-z]/.test(key)) {\n      const newKey = 'on' + key.charAt(2).toUpperCase() + key.slice(3);\n      // If a camelCase version already exists on restProps, prefer that and skip the lower-case variant\n      if (newKey in restProps) {\n        continue;\n      }\n      processedRestProps[newKey] = restProps[key];\n      continue;\n    }\n    processedRestProps[key] = restProps[key];\n  }\n\n  return (\n    <Locale words={en} optional={true}>\n      <div className=\"wx-H902AF2Y wx-content\">\n        <Values\n          view={Editor}\n          values={values}\n          items={items}\n          css={css}\n          focus={focus}\n          activeBatch={activeBatch}\n          autoSave={autoSave}\n          readonly={readonly}\n          {...processedRestProps}\n        >\n          {children}\n        </Values>\n      </div>\n    </Locale>\n  );\n}\n\nexport default Form;\n","import { useMemo } from 'react';\nimport Editor from './FormEditor.jsx';\nimport './Columns.css';\n\nfunction Columns(props) {\n  const { editors, data, layout, errors, focus, onClick, onChange } = props;\n\n  const columns = useMemo(() => {\n    let cols = [];\n    if (layout === 'columns') {\n      cols = [\n        { ...editors, config: [] },\n        { ...editors, config: [] },\n      ];\n      editors.config.forEach((field) => {\n        const index = field.column === 'left' ? 0 : 1;\n        cols[index].config.push(field);\n      });\n\n      if (cols[0].config.length) {\n        const obj = cols[0].config[0];\n        if (obj.comp === 'text') {\n          cols[0][0] = {\n            ...obj,\n            css: 'title',\n            label: '',\n          };\n        }\n      }\n    }\n    return cols;\n  }, [layout, editors]);\n\n  if (layout === 'columns') {\n    return (\n      <div className=\"wx-bNrSbszs wx-cols\">\n        <div className=\"wx-bNrSbszs wx-left\">\n          <Editor\n            editors={columns[0]}\n            data={data}\n            errors={errors}\n            onClick={onClick}\n            onChange={onChange}\n          />\n        </div>\n        <div className=\"wx-bNrSbszs wx-right\">\n          <Editor\n            editors={columns[1]}\n            data={data}\n            focus={focus}\n            errors={errors}\n            onClick={onClick}\n            onChange={onChange}\n          />\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <Editor\n      editors={editors}\n      data={data}\n      focus={focus}\n      errors={errors}\n      onClick={onClick}\n      onChange={onChange}\n    />\n  );\n}\n\nexport default Columns;\n","import { useCallback } from 'react';\nimport { Toolbar as WxToolbar } from '@svar-ui/react-toolbar';\nimport './Toolbar.css';\n\nfunction Toolbar({\n  items,\n  values = null,\n  top = true,\n  onClick,\n  onChange: onChangeForm,\n}) {\n  const onChange = useCallback(\n    ({ item, value }) => {\n      onChangeForm && onChangeForm({ key: item.key, value });\n    },\n    [onChangeForm],\n  );\n\n  return items.length ? (\n    <div\n      className={`wx-66OW1j0R wx-editor-toolbar ${top ? 'wx-topbar' : 'wx-bottom'}`}\n    >\n      <WxToolbar\n        items={items}\n        values={values}\n        onClick={onClick}\n        onChange={onChange}\n      />\n    </div>\n  ) : null;\n}\n\nexport default Toolbar;\n","export const Spacer = () => ({ comp: 'spacer' });\nexport const CancelButton = (_) => ({\n  comp: 'button',\n  text: _('Cancel'),\n  id: 'cancel',\n});\nexport const SaveButton = (_) => ({\n  type: 'primary',\n  comp: 'button',\n  text: _('Save'),\n  id: 'save',\n});\nexport const CloseIcon = () => ({\n  comp: 'icon',\n  icon: 'wxi-close',\n  id: 'close',\n});\n","import { useContext, useMemo, useRef } from 'react';\nimport { context } from '@svar-ui/react-core';\nimport { useHotkeys } from '@svar-ui/lib-react';\n\nimport Columns from './Columns.jsx';\nimport Toolbar from './buttons/Toolbar.jsx';\n\nimport {\n  SaveButton,\n  CancelButton,\n  CloseIcon,\n  Spacer,\n} from './buttons/buttons.js';\n\nimport './Panel.css';\n\nexport default function Panel(props) {\n  const {\n    data,\n    editors,\n    focus,\n    css,\n    topBar,\n    bottomBar,\n    layout,\n    placement,\n    errors,\n    readonly,\n    autoSave,\n    children,\n    onClick,\n    onKeyDown,\n    onChange,\n    hotkeys,\n  } = props;\n\n  const i18n = useContext(context.i18n);\n  const _ = useMemo(() => i18n.getGroup('editor'), [i18n]);\n\n  const autoBars = useMemo(\n    () => topBar === true && bottomBar === true,\n    [topBar, bottomBar],\n  );\n\n  const tbar = useMemo(() => {\n    let bar = topBar && topBar.items ? topBar.items.map((b) => ({ ...b })) : [];\n\n    if (autoBars) {\n      if (!readonly) {\n        if (autoSave) bar = [Spacer(), CloseIcon()];\n        else if (placement !== 'modal')\n          bar = [Spacer(), CancelButton(_), SaveButton(_)];\n\n        if (layout === 'columns' && !bar.length)\n          bar = [Spacer(), SaveButton(_), CancelButton(_)];\n      } else {\n        bar = [Spacer(), CloseIcon()];\n      }\n    }\n\n    return bar;\n  }, [topBar, autoBars, readonly, autoSave, placement, layout, _]);\n\n  const bbar = useMemo(() => {\n    let bar =\n      bottomBar && bottomBar.items\n        ? bottomBar.items.map((b) => ({ ...b }))\n        : [];\n\n    if (autoBars) {\n      if (!readonly) {\n        if (placement === 'modal' && !autoSave)\n          bar = [Spacer(), SaveButton(_), CancelButton(_)];\n        if (layout === 'columns' && tbar.length) bar = [];\n      }\n    }\n\n    return bar;\n  }, [bottomBar, autoBars, readonly, placement, autoSave, layout, tbar, _]);\n\n  const buttons = useMemo(() => [...tbar, ...bbar], [tbar, bbar]);\n\n  const rootRef = useRef(null);\n  const getHotkeyRef = useRef(null);\n  getHotkeyRef.current = (event, ...args) => {\n    const bi = buttons.findIndex(b => args.includes(b.id));\n    if (bi === -1) return false;\n  \n    const target = event.target;\n    const item = buttons[bi];\n\n    if (\n      event.key == \"Escape\" &&\n      (target.closest(\".wx-combo\") ||\n        target.closest(\".wx-multicombo\") ||\n        target.closest(\".wx-richselect\"))\n    )\n    return;\n\n    if (\n      event.key == \"Delete\" &&\n      (target.tagName === \"INPUT\" || target.tagName === \"TEXTAREA\")\n    )\n    return;\n\n    event.preventDefault();\n    onKeyDown && onKeyDown({ item });    \n  };\n  \n\n  const hotkeysConfig = useMemo(() => {\n    if (hotkeys === false) return {};\n\n    return { \n      'ctrl+s': ev => getHotkeyRef.current(ev, 'save'),\n      'escape': ev => getHotkeyRef.current(ev, 'cancel', 'close'),\n      'ctrl+d': ev => getHotkeyRef.current(ev, 'delete'),\n      ...(hotkeys || {}),\n    };\n  }, [hotkeys]);\n  useHotkeys(hotkeysConfig, rootRef);\n\n  return (\n    <div className={css ? 'wx-85HDaNoA ' + css : 'wx-85HDaNoA'} ref={rootRef}>\n      <Toolbar\n        {...(topBar && typeof topBar === 'object' ? topBar : {})}\n        items={tbar}\n        values={data}\n        onClick={onClick}\n        onChange={onChange}\n      />\n      <div\n        className={`wx-85HDaNoA wx-content${layout === 'columns' ? ' wx-layout-columns' : ''}`}\n      >\n        {children}\n        <Columns\n          editors={editors}\n          layout={layout}\n          data={data}\n          focus={focus}\n          errors={errors}\n          onClick={onClick}\n          onChange={onChange}\n        />\n        <Toolbar\n          {...(bottomBar && typeof bottomBar === 'object' ? bottomBar : {})}\n          items={bbar}\n          values={data}\n          top={false}\n          onClick={onClick}\n          onChange={onChange}\n        />\n      </div>\n    </div>\n  );\n}\n","import { ModalArea, SideArea } from '@svar-ui/react-core';\nimport Panel from './Panel.jsx';\nimport './Layout.css';\n\nexport default function Layout(props) {\n  const { css, onClick, placement, ...restProps } = props;\n\n  function handleClose() {\n    onClick && onClick({ item: { id: 'close' } });\n  }\n\n  if (placement === 'modal') {\n    return (\n      <ModalArea>\n        <Panel\n          css={`wx-panel ${css}`}\n          onClick={onClick}\n          placement={placement}\n          {...restProps}\n        />\n      </ModalArea>\n    );\n  } else if (placement === 'sidebar') {\n    return (\n      <SideArea onCancel={handleClose}>\n        <Panel\n          css={`wx-panel ${css}`}\n          onClick={onClick}\n          placement={placement}\n          {...restProps}\n        />\n      </SideArea>\n    );\n  } else {\n    return (\n      <Panel\n        css={`wx-inline-form ${css}`}\n        onClick={onClick}\n        placement={placement}\n        {...restProps}\n      />\n    );\n  }\n}\n","import { Locale } from '@svar-ui/react-core';\nimport en from '../en.js';\n\nimport Layout from './Layout.jsx';\nimport Values from './Values.jsx';\n\nexport default function Editor(props) {\n  const {\n    values = {},\n    items = [],\n    css = '',\n    activeBatch = null,\n    topBar = true,\n    bottomBar = true,\n    focus = false,\n    autoSave = false,\n    layout = 'default',\n    readonly = false,\n    placement = 'inline',\n    children,\n    ...restProps\n  } = props;\n\n  const normalizedRestProps = Object.keys(restProps).reduce((acc, key) => {\n    if (/^on[a-z]/.test(key)) {\n      const newKey = 'on' + key.charAt(2).toUpperCase() + key.slice(3);\n      if (newKey in restProps) {\n        // Prefer existing camelCase prop if present; keep original key as-is to avoid overwriting\n        acc[key] = restProps[key];\n      } else {\n        acc[newKey] = restProps[key];\n      }\n    } else {\n      acc[key] = restProps[key];\n    }\n    return acc;\n  }, {});\n\n  return (\n    <Locale words={en} optional={true}>\n      <Values\n        view={Layout}\n        values={values}\n        items={items}\n        css={css}\n        activeBatch={activeBatch}\n        topBar={topBar}\n        bottomBar={bottomBar}\n        focus={focus}\n        autoSave={autoSave}\n        layout={layout}\n        readonly={readonly}\n        placement={placement}\n        {...normalizedRestProps}\n      >\n        {children}\n      </Values>\n    </Locale>\n  );\n}\n","import { Material as CoreMaterial } from '@svar-ui/react-core';\nimport './Material.css';\n\nexport default function Material({ fonts = true, children }) {\n  if (children) {\n    return <CoreMaterial fonts={fonts}>{children}</CoreMaterial>;\n  } else {\n    return <CoreMaterial fonts={fonts} />;\n  }\n}\n","import { Willow as CoreWillow } from '@svar-ui/react-core';\nimport './Willow.css';\n\nfunction Willow({ fonts = true, children }) {\n  return children ? (\n    <CoreWillow fonts={fonts}>{children}</CoreWillow>\n  ) : (\n    <CoreWillow fonts={fonts} />\n  );\n}\n\nexport default Willow;\n","import { WillowDark as WillowDarkInner } from '@svar-ui/react-core';\nimport './WillowDark.css';\n\nfunction WillowDark(props) {\n  const { fonts = true, children } = props;\n\n  if (children) {\n    return <WillowDarkInner fonts={fonts}>{children}</WillowDarkInner>;\n  }\n\n  return <WillowDarkInner fonts={fonts} />;\n}\n\nexport default WillowDark;\n","import { useMemo, useContext } from 'react';\nimport { Field } from '@svar-ui/react-core';\nimport { context } from '@svar-ui/react-core';\n\nfunction ReadOnly({ value, options, label }) {\n  const i18n = useContext(context.i18n);\n  const _ = i18n.getGroup('editor');\n\n  const text = useMemo(() => {\n    let t = value;\n    if (typeof value === 'boolean') {\n      t = value ? _('Yes') : _('No');\n    }\n\n    if (options) {\n      const option = options.find((o) => o.id === value);\n      if (option) {\n        t = option.label;\n      }\n    }\n\n    return t;\n  }, [value, options, _]);\n\n  if (text || text === 0) {\n    return <Field label={label}>{text}</Field>;\n  }\n\n  return null;\n}\n\nexport default ReadOnly;\n","import './Section.css';\n\nfunction Section({ fieldKey, label, activeSection, onClick }) {\n  return (\n    <div\n      className={`wx-OmgQq65I wx-section${activeSection ? ' wx-section-active' : ''}`}\n      onClick={() =>\n        onClick &&\n        onClick({\n          item: { id: 'toggle-section', key: activeSection ? null : fieldKey },\n        })\n      }\n    >\n      <h3>{label}</h3>\n      <i\n        className={`wx-OmgQq65I wxi-angle-${activeSection ? 'down' : 'right'} wx-icon`}\n      ></i>\n    </div>\n  );\n}\n\nexport default Section;\n","import { registerEditorItem } from './helpers';\nimport Form from './components/Form.jsx';\nimport Editor from './components/Editor.jsx';\n\nimport Material from './themes/Material.jsx';\nimport Willow from './themes/Willow.jsx';\nimport WillowDark from './themes/WillowDark.jsx';\n\nimport ReadOnly from './components/sections/ReadOnly.jsx';\nimport Section from './components/sections/Section.jsx';\nimport { Text } from '@svar-ui/react-core';\nimport { TextArea } from '@svar-ui/react-core';\nimport { Checkbox } from '@svar-ui/react-core';\n\nregisterEditorItem('text', Text);\nregisterEditorItem('textarea', TextArea);\nregisterEditorItem('checkbox', Checkbox);\n\nregisterEditorItem('readonly', ReadOnly);\nregisterEditorItem('section', Section);\n\nimport { env, setEnv } from '@svar-ui/lib-dom';\nsetEnv(env);\n\nexport { registerEditorItem, Form, Editor, Material, Willow, WillowDark };\n"],"names":["handlers","getItemHandler","type","registerEditorItem","handler","en","FormEditor","props","editors","data","css","errors","focus","onClick","children","onChange","root","useRef","useEffect","focused","input","i18n","useContext","context","_","useMemo","overlay","editor","key","onChangeEditor","otherProps","Component","jsx","Component2","Field","ev","rawGetter","parts","obj","out","p","rawSetter","v","i","itemsToEditors","sections","config","s","uid","getValues","raw","ed","setValues","values","changes","a","diff","initial","b","isSame","validateValues","any","x","Values","valuesProp","items","activeBatch","autoSave","readonly","topBar","bottomBar","layout","placement","View","onSave","onAction","onValidation","hotkeys","useWritableProp","activatedSection","setActivatedSection","useState","editorsObj","y","exclusive","actualValues","setActualValues","setData","d","deepCopy","runValidation","notSaved","setNotSaved","getUniqueFields","arr","check","handleUpdate","updateData","updated","handleChanges","value","newData","event","newActualValues","fieldsToValidate","errorsFields","saveAction","handleAction","item","Form","restProps","processedRestProps","newKey","Locale","Editor","Columns","columns","cols","field","index","jsxs","Toolbar","top","onChangeForm","useCallback","WxToolbar","Spacer","CancelButton","SaveButton","CloseIcon","Panel","onKeyDown","autoBars","tbar","bar","bbar","buttons","rootRef","getHotkeyRef","args","bi","target","hotkeysConfig","useHotkeys","Layout","handleClose","ModalArea","SideArea","normalizedRestProps","acc","Material","fonts","CoreMaterial","Willow","CoreWillow","WillowDark","WillowDarkInner","ReadOnly","options","label","text","t","option","o","Section","fieldKey","activeSection","Text","TextArea","Checkbox","setEnv","env"],"mappings":"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"}