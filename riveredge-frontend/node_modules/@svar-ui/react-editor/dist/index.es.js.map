{"version":3,"file":"index.es.js","sources":["../src/helpers.js","../src/en.js","../src/components/FormEditor.jsx","../src/editor.js","../src/components/Values.jsx","../src/components/Form.jsx","../src/components/Columns.jsx","../src/components/buttons/Toolbar.jsx","../src/components/buttons/buttons.js","../src/components/Panel.jsx","../src/components/Layout.jsx","../src/components/Editor.jsx","../src/themes/Material.jsx","../src/themes/Willow.jsx","../src/themes/WillowDark.jsx","../src/components/sections/ReadOnly.jsx","../src/components/sections/Section.jsx","../src/index.js"],"sourcesContent":["const handlers = {};\nexport function getItemHandler(type) {\n  return typeof type !== 'undefined'\n    ? handlers[type] || type\n    : handlers['text'];\n}\nexport function registerEditorItem(type, handler) {\n  handlers[type] = handler;\n}\n","export default {\n  editor: {},\n};\n","import { useEffect, useMemo, useRef, useContext } from 'react';\nimport { Field } from '@svar-ui/react-core';\nimport { context } from '@svar-ui/react-core';\nimport { getItemHandler } from '../helpers';\nimport './FormEditor.css';\n\nexport default function FormEditor(props) {\n  const {\n    editors,\n    data,\n    css = '',\n    errors,\n    focus = false,\n    onClick,\n    children,\n    onChange,\n  } = props;\n\n  const root = useRef(null);\n\n  useEffect(() => {\n    if (focus) {\n      const focused = document.activeElement;\n      if (focused && root.current && root.current.contains(focused)) return;\n\n      const input = root.current\n        ? root.current.querySelector(\n            'input:not([disabled]), textarea:not([disabled]), select:not([disabled])',\n          )\n        : null;\n\n      if (input) {\n        setTimeout(() => {\n          if (typeof input.select === 'function') {\n            input.select();\n          }\n          if (typeof input.focus === 'function') {\n            input.focus();\n          }\n        }, 300);\n      }\n    }\n  }, []);\n\n  const i18n = useContext(context.i18n);\n  const _ = useMemo(() => i18n.getGroup('editor'), [i18n]);\n\n  const overlay = useMemo(\n    () =>\n      editors.config[0].comp === 'readonly' &&\n      editors.config.every((editor) => !Object.keys(data).includes(editor.key)),\n    [editors, data],\n  );\n\n  return (\n    <div className={'wx-s2aE1xdZ wx-sections ' + css} ref={root}>\n      {children}\n      {overlay ? (\n        <div className=\"wx-s2aE1xdZ wx-overlay\">{_('No data')}</div>\n      ) : null}\n      {editors.config.map((editor) => {\n        if (!editor.hidden) {\n          const { key, onChange: onChangeEditor, ...otherProps } = editor;\n          if (editor.comp === 'readonly' || editor.comp === 'section') {\n            const Component = getItemHandler(editor.comp);\n            return (\n              <Component\n                key={key}\n                fieldKey={key}\n                label={editor.label}\n                value={data[key]}\n                {...otherProps}\n                onClick={onClick}\n              />\n            );\n          } else {\n            const Component2 = getItemHandler(editor.comp);\n            return (\n              <div key={key}>\n                <Field\n                  label={\n                    editor.labelTemplate\n                      ? editor.labelTemplate(data[key])\n                      : (editor.label ?? '')\n                  }\n                  required={editor.required}\n                >\n                    <Component2\n                      key={key}\n                      fieldKey={key}\n                      {...otherProps}\n                      onChange={\n                        onChangeEditor ||\n                        ((ev) => {\n                          onChange &&\n                            onChange({\n                              value: ev.value,\n                              key,\n                              input: ev.input,\n                            });\n                        })\n                      }\n                      label={undefined}\n                      error={errors && errors[key]}\n                      value={data[key]}\n                    />\n                </Field>\n                {errors && errors[key] && editor.validationMessage ? (\n                  <div className=\"wx-s2aE1xdZ wx-message\">\n                    {editor.validationMessage}\n                  </div>\n                ) : null}\n              </div>\n            );\n          }\n        }\n        return null;\n      })}\n    </div>\n  );\n}\n","import { uid, isSame } from '@svar-ui/lib-state';\n\nfunction rawGetter(key) {\n  if (typeof key === 'string' && key.includes('.')) {\n    const parts = key.split('.');\n    return (obj) => {\n      let out = obj;\n      parts.forEach((p) => {\n        out = out[p];\n      });\n      return out;\n    };\n  }\n\n  return (obj) => obj[key];\n}\nfunction rawSetter(key) {\n  if (typeof key === 'string' && key.includes('.')) {\n    const parts = key.split('.');\n    return (obj, v) => {\n      let out = obj;\n      parts.forEach((p, i) => {\n        if (i === parts.length - 1) out[p] = v;\n        else out = out[p];\n      });\n    };\n  }\n\n  return (obj, v) => (obj[key] = v);\n}\n\nexport function itemsToEditors(sections) {\n  const config = sections.map((s) => {\n    const obj = { ...s };\n    if (s.config) Object.assign(obj, s.config);\n\n    obj.key = s.key || uid();\n    obj.setter = s.setter || rawSetter(s.key);\n    obj.getter = s.getter || rawGetter(s.key);\n    return obj;\n  });\n\n  const getValues = (raw) => {\n    const out = {};\n    config.forEach((ed) => {\n      if (ed.comp === 'section') return;\n      if (ed.getter) out[ed.key] = ed.getter(raw);\n      else out[ed.key] = raw[ed.key];\n    });\n    return out;\n  };\n\n  const setValues = (out, values, changes) => {\n    const fields = changes.length\n      ? changes.map((key) => config.find((a) => a.key === key))\n      : config;\n    fields.forEach((ed) => {\n      if (ed.setter) ed.setter(out, values[ed.key]);\n      else out[ed.key] = values[ed.key];\n    });\n\n    return out;\n  };\n\n  const diff = (raw, values) => {\n    const initial = getValues(raw);\n    const changes = [];\n    config.forEach((ed) => {\n      const a = initial[ed.key];\n      const b = values[ed.key];\n      // we can have a situation when initial value is undefined\n      // but empty editor will return empty value instead of undefined\n      // this behavior is correct, but we need to ignore this case\n      if (!isSame(a, b) && (a !== undefined || !!b)) {\n        changes.push(ed.key);\n      }\n    });\n\n    return changes;\n  };\n\n  const validateValues = (values, changes, _) => {\n    let any = 0;\n    const errors = {};\n\n    const fields = changes?.length\n      ? changes.map((key) => config.find((a) => a.key === key))\n      : config;\n\n    fields.forEach((ed) => {\n      if (ed.required && !values[ed.key]) {\n        errors[ed.key] = {\n          errorType: 'required',\n        };\n        ed.validationMessage =\n          ed.validationMessage ?? _('This field is required');\n        any++;\n      } else if (ed.validation && !ed.validation(values[ed.key])) {\n        errors[ed.key] = {\n          errorType: 'validation',\n        };\n        ed.validationMessage = ed.validationMessage ?? _('Invalid value');\n        any++;\n      }\n    });\n\n    return any > 0 ? errors : null;\n  };\n\n  return {\n    config: config.filter((x) => x.comp !== 'hidden'),\n    getValues,\n    setValues,\n    diff,\n    validateValues,\n  };\n}\n","import { useState, useEffect, useMemo, useContext } from 'react';\nimport { itemsToEditors } from '../editor';\nimport { deepCopy, isSame } from '@svar-ui/lib-state';\nimport { useWritableProp } from '@svar-ui/lib-react';\nimport { context } from '@svar-ui/react-core';\n\nexport default function Values({\n  values: valuesProp,\n  items,\n  css,\n  activeBatch,\n  autoSave,\n  focus,\n  readonly,\n  topBar = true,\n  bottomBar = true,\n  layout = 'default',\n  placement = 'inline',\n  view: View,\n  children,\n  onChange,\n  onSave,\n  onAction,\n  onValidation,\n  hotkeys,\n}) {\n  const i18n = useContext(context.i18n);\n  const _ = i18n.getGroup('editor');\n\n  const [values, setValues] = useWritableProp(valuesProp);\n\n  const [activatedSection, setActivatedSection] = useState(null);\n\n  const editors = useMemo(() => {\n    const editorsObj = itemsToEditors(items);\n\n    if (activatedSection) {\n      editorsObj.config.forEach((x) => {\n        if (x.comp === 'section') {\n          if (x.key === activatedSection) {\n            if (x.sectionMode === 'accordion') {\n              if (!x.activeSection) {\n                editorsObj.config.forEach((y) => {\n                  if (y.comp === 'section' && y.key !== x.key) {\n                    y.activeSection = false;\n                  }\n                });\n                x.activeSection = true;\n              }\n            } else {\n              x.activeSection = !x.activeSection;\n            }\n          }\n        }\n      });\n    }\n\n    let sections = new Set();\n    let exclusive = null;\n\n    editorsObj.config.forEach((x) => {\n      if (x.sectionMode === 'exclusive' && x.activeSection) exclusive = x.key;\n      if (x.activeSection) sections.add(x.key);\n    });\n\n    editorsObj.config.forEach((x) => {\n      x.hidden =\n        x.hidden ||\n        (activeBatch && activeBatch !== x.batch) ||\n        (exclusive && x.key != exclusive && x.section !== exclusive) ||\n        (x.section && !sections.has(x.section));\n    });\n\n    if (readonly) {\n      return {\n        ...editorsObj,\n        config: editorsObj.config.map((s) => ({ ...s, comp: 'readonly' })),\n        diff: () => [],\n      };\n    }\n    return editorsObj;\n  }, [items, activatedSection, activeBatch, readonly]);\n\n  const [actualValues, setActualValues] = useState({});\n  const [data, setData] = useState({});\n\n  const d = values;\n\n  useEffect(() => {\n    if (values !== undefined) {\n      setActualValues(deepCopy(values));\n      setData(deepCopy(values));\n      if (d.errors) {\n        d.errors = runValidation();\n      }\n    }\n  }, [values]);\n\n  const [notSaved, setNotSaved] = useState([]);\n  useEffect(() => {\n    if (values) setNotSaved([]);\n  }, [values]);\n\n  function getUniqueFields(arr) {\n    return [...new Set(arr)];\n  }\n\n  function runValidation(changes) {\n    const check = editors.validateValues(actualValues, changes, _);\n\n    if (!isSame(check, d.errors)) {\n      onValidation && onValidation({ errors: check, values: actualValues });\n    }\n\n    return check;\n  }\n\n  function handleUpdate(changes, updateData) {\n    if (autoSave && !d.errors) {\n      const updated = editors.setValues(values, updateData ?? data, changes);\n      // Ensure the writable prop reflects the updated values\n      setValues(updated);\n      onSave && onSave({ changes, values: updated });\n    } else {\n      setNotSaved(changes);\n    }\n  }\n\n  function handleChanges({ value, key, input }) {\n    let newData = { ...(data || {}), [key]: value };\n    const event = {\n      key,\n      value,\n      update: newData,\n    };\n    if (input) event.input = input;\n    onChange && onChange(event);\n\n    if (!values) return;\n\n    newData = event.update;\n    setData(newData);\n\n    const changes = editors.diff(values, newData);\n\n    const newActualValues = editors.setValues(\n      { ...(actualValues || {}) },\n      newData,\n      getUniqueFields([...changes, key]),\n    );\n    setActualValues(newActualValues);\n\n    if (changes.length) {\n      const fieldsToValidate = autoSave\n        ? []\n        : getUniqueFields([...changes, ...Object.keys(d.errors ?? {}), key]);\n      d.errors = runValidation(fieldsToValidate);\n      handleUpdate(changes, newData);\n    } else {\n      const errorsFields = Object.keys(d.errors ?? {});\n      if (errorsFields.length) d.errors = runValidation(errorsFields);\n      setNotSaved([]);\n    }\n  }\n\n  function saveAction() {\n    if (!notSaved.length) return;\n    if (!autoSave) d.errors = runValidation();\n    if (!d.errors) {\n      onSave &&\n        onSave({\n          changes: notSaved,\n          values: actualValues,\n        });\n      const updated = editors.setValues(values, data, notSaved);\n      setValues(updated);\n      setNotSaved([]);\n\n      setValues({ ...actualValues });\n    }\n  }\n\n  function handleAction({ item }) {\n    if (item.id === 'save') {\n      saveAction();\n    } else if (item.id === 'toggle-section') {\n      setActivatedSection(item.key);\n    }\n    onAction && onAction({ item, values: actualValues, changes: notSaved });\n  }\n\n  return (\n    <View\n      topBar={topBar}\n      bottomBar={bottomBar}\n      placement={placement}\n      layout={layout}\n      readonly={readonly}\n      autoSave={autoSave}\n      css={css}\n      data={data}\n      editors={editors}\n      focus={focus}\n      hotkeys={hotkeys}\n      errors={d.errors}\n      onClick={handleAction}\n      onKeyDown={handleAction}\n      onChange={handleChanges}\n    >\n      {children}\n    </View>\n  );\n}\n","import { Locale } from '@svar-ui/react-core';\nimport en from '../en.js';\n\nimport Editor from './FormEditor.jsx';\nimport Values from './Values.jsx';\nimport './Form.css';\n\nfunction Form({\n  values = {},\n  items = [],\n  css = '',\n  activeBatch = null,\n  focus = false,\n  autoSave = true,\n  readonly = false,\n  children,\n  ...restProps\n}) {\n  const processedRestProps = {};\n  for (const key in restProps) {\n    if (/^on[a-z]/.test(key)) {\n      const newKey = 'on' + key.charAt(2).toUpperCase() + key.slice(3);\n      // If a camelCase version already exists on restProps, prefer that and skip the lower-case variant\n      if (newKey in restProps) {\n        continue;\n      }\n      processedRestProps[newKey] = restProps[key];\n      continue;\n    }\n    processedRestProps[key] = restProps[key];\n  }\n\n  return (\n    <Locale words={en} optional={true}>\n      <div className=\"wx-H902AF2Y wx-content\">\n        <Values\n          view={Editor}\n          values={values}\n          items={items}\n          css={css}\n          focus={focus}\n          activeBatch={activeBatch}\n          autoSave={autoSave}\n          readonly={readonly}\n          {...processedRestProps}\n        >\n          {children}\n        </Values>\n      </div>\n    </Locale>\n  );\n}\n\nexport default Form;\n","import { useMemo } from 'react';\nimport Editor from './FormEditor.jsx';\nimport './Columns.css';\n\nfunction Columns(props) {\n  const { editors, data, layout, errors, focus, onClick, onChange } = props;\n\n  const columns = useMemo(() => {\n    let cols = [];\n    if (layout === 'columns') {\n      cols = [\n        { ...editors, config: [] },\n        { ...editors, config: [] },\n      ];\n      editors.config.forEach((field) => {\n        const index = field.column === 'left' ? 0 : 1;\n        cols[index].config.push(field);\n      });\n\n      if (cols[0].config.length) {\n        const obj = cols[0].config[0];\n        if (obj.comp === 'text') {\n          cols[0][0] = {\n            ...obj,\n            css: 'title',\n            label: '',\n          };\n        }\n      }\n    }\n    return cols;\n  }, [layout, editors]);\n\n  if (layout === 'columns') {\n    return (\n      <div className=\"wx-bNrSbszs wx-cols\">\n        <div className=\"wx-bNrSbszs wx-left\">\n          <Editor\n            editors={columns[0]}\n            data={data}\n            errors={errors}\n            onClick={onClick}\n            onChange={onChange}\n          />\n        </div>\n        <div className=\"wx-bNrSbszs wx-right\">\n          <Editor\n            editors={columns[1]}\n            data={data}\n            focus={focus}\n            errors={errors}\n            onClick={onClick}\n            onChange={onChange}\n          />\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <Editor\n      editors={editors}\n      data={data}\n      focus={focus}\n      errors={errors}\n      onClick={onClick}\n      onChange={onChange}\n    />\n  );\n}\n\nexport default Columns;\n","import { useCallback } from 'react';\nimport { Toolbar as WxToolbar } from '@svar-ui/react-toolbar';\nimport './Toolbar.css';\n\nfunction Toolbar({\n  items,\n  values = null,\n  top = true,\n  onClick,\n  onChange: onChangeForm,\n}) {\n  const onChange = useCallback(\n    ({ item, value }) => {\n      onChangeForm && onChangeForm({ key: item.key, value });\n    },\n    [onChangeForm],\n  );\n\n  return items.length ? (\n    <div\n      className={`wx-66OW1j0R wx-editor-toolbar ${top ? 'wx-topbar' : 'wx-bottom'}`}\n    >\n      <WxToolbar\n        items={items}\n        values={values}\n        onClick={onClick}\n        onChange={onChange}\n      />\n    </div>\n  ) : null;\n}\n\nexport default Toolbar;\n","export const Spacer = () => ({ comp: 'spacer' });\nexport const CancelButton = (_) => ({\n  comp: 'button',\n  text: _('Cancel'),\n  id: 'cancel',\n});\nexport const SaveButton = (_) => ({\n  type: 'primary',\n  comp: 'button',\n  text: _('Save'),\n  id: 'save',\n});\nexport const CloseIcon = () => ({\n  comp: 'icon',\n  icon: 'wxi-close',\n  id: 'close',\n});\n","import { useContext, useMemo, useRef } from 'react';\nimport { context } from '@svar-ui/react-core';\nimport { useHotkeys } from '@svar-ui/lib-react';\n\nimport Columns from './Columns.jsx';\nimport Toolbar from './buttons/Toolbar.jsx';\n\nimport {\n  SaveButton,\n  CancelButton,\n  CloseIcon,\n  Spacer,\n} from './buttons/buttons.js';\n\nimport './Panel.css';\n\nexport default function Panel(props) {\n  const {\n    data,\n    editors,\n    focus,\n    css,\n    topBar,\n    bottomBar,\n    layout,\n    placement,\n    errors,\n    readonly,\n    autoSave,\n    children,\n    onClick,\n    onKeyDown,\n    onChange,\n    hotkeys,\n  } = props;\n\n  const i18n = useContext(context.i18n);\n  const _ = useMemo(() => i18n.getGroup('editor'), [i18n]);\n\n  const autoBars = useMemo(\n    () => topBar === true && bottomBar === true,\n    [topBar, bottomBar],\n  );\n\n  const tbar = useMemo(() => {\n    let bar = topBar && topBar.items ? topBar.items.map((b) => ({ ...b })) : [];\n\n    if (autoBars) {\n      if (!readonly) {\n        if (autoSave) bar = [Spacer(), CloseIcon()];\n        else if (placement !== 'modal')\n          bar = [Spacer(), CancelButton(_), SaveButton(_)];\n\n        if (layout === 'columns' && !bar.length)\n          bar = [Spacer(), SaveButton(_), CancelButton(_)];\n      } else {\n        bar = [Spacer(), CloseIcon()];\n      }\n    }\n\n    return bar;\n  }, [topBar, autoBars, readonly, autoSave, placement, layout, _]);\n\n  const bbar = useMemo(() => {\n    let bar =\n      bottomBar && bottomBar.items\n        ? bottomBar.items.map((b) => ({ ...b }))\n        : [];\n\n    if (autoBars) {\n      if (!readonly) {\n        if (placement === 'modal' && !autoSave)\n          bar = [Spacer(), SaveButton(_), CancelButton(_)];\n        if (layout === 'columns' && tbar.length) bar = [];\n      }\n    }\n\n    return bar;\n  }, [bottomBar, autoBars, readonly, placement, autoSave, layout, tbar, _]);\n\n  const buttons = useMemo(() => [...tbar, ...bbar], [tbar, bbar]);\n\n  const rootRef = useRef(null);\n  const getHotkeyRef = useRef(null);\n  getHotkeyRef.current = (event, ...args) => {\n    const bi = buttons.findIndex(b => args.includes(b.id));\n    if (bi === -1) return false;\n  \n    const target = event.target;\n    const item = buttons[bi];\n\n    if (\n      event.key == \"Escape\" &&\n      (target.closest(\".wx-combo\") ||\n        target.closest(\".wx-multicombo\") ||\n        target.closest(\".wx-richselect\"))\n    )\n    return;\n\n    if (\n      event.key == \"Delete\" &&\n      (target.tagName === \"INPUT\" || target.tagName === \"TEXTAREA\")\n    )\n    return;\n\n    event.preventDefault();\n    onKeyDown && onKeyDown({ item });    \n  };\n  \n\n  const hotkeysConfig = useMemo(() => {\n    if (hotkeys === false) return {};\n\n    return { \n      'ctrl+s': ev => getHotkeyRef.current(ev, 'save'),\n      'escape': ev => getHotkeyRef.current(ev, 'cancel', 'close'),\n      'ctrl+d': ev => getHotkeyRef.current(ev, 'delete'),\n      ...(hotkeys || {}),\n    };\n  }, [hotkeys]);\n  useHotkeys(hotkeysConfig, rootRef);\n\n  return (\n    <div className={css ? 'wx-85HDaNoA ' + css : 'wx-85HDaNoA'} ref={rootRef}>\n      <Toolbar\n        {...(topBar && typeof topBar === 'object' ? topBar : {})}\n        items={tbar}\n        values={data}\n        onClick={onClick}\n        onChange={onChange}\n      />\n      <div\n        className={`wx-85HDaNoA wx-content${layout === 'columns' ? ' wx-layout-columns' : ''}`}\n      >\n        {children}\n        <Columns\n          editors={editors}\n          layout={layout}\n          data={data}\n          focus={focus}\n          errors={errors}\n          onClick={onClick}\n          onChange={onChange}\n        />\n        <Toolbar\n          {...(bottomBar && typeof bottomBar === 'object' ? bottomBar : {})}\n          items={bbar}\n          values={data}\n          top={false}\n          onClick={onClick}\n          onChange={onChange}\n        />\n      </div>\n    </div>\n  );\n}\n","import { ModalArea, SideArea } from '@svar-ui/react-core';\nimport Panel from './Panel.jsx';\nimport './Layout.css';\n\nexport default function Layout(props) {\n  const { css, onClick, placement, ...restProps } = props;\n\n  function handleClose() {\n    onClick && onClick({ item: { id: 'close' } });\n  }\n\n  if (placement === 'modal') {\n    return (\n      <ModalArea>\n        <Panel\n          css={`wx-panel ${css}`}\n          onClick={onClick}\n          placement={placement}\n          {...restProps}\n        />\n      </ModalArea>\n    );\n  } else if (placement === 'sidebar') {\n    return (\n      <SideArea onCancel={handleClose}>\n        <Panel\n          css={`wx-panel ${css}`}\n          onClick={onClick}\n          placement={placement}\n          {...restProps}\n        />\n      </SideArea>\n    );\n  } else {\n    return (\n      <Panel\n        css={`wx-inline-form ${css}`}\n        onClick={onClick}\n        placement={placement}\n        {...restProps}\n      />\n    );\n  }\n}\n","import { Locale } from '@svar-ui/react-core';\nimport en from '../en.js';\n\nimport Layout from './Layout.jsx';\nimport Values from './Values.jsx';\n\nexport default function Editor(props) {\n  const {\n    values = {},\n    items = [],\n    css = '',\n    activeBatch = null,\n    topBar = true,\n    bottomBar = true,\n    focus = false,\n    autoSave = false,\n    layout = 'default',\n    readonly = false,\n    placement = 'inline',\n    children,\n    ...restProps\n  } = props;\n\n  const normalizedRestProps = Object.keys(restProps).reduce((acc, key) => {\n    if (/^on[a-z]/.test(key)) {\n      const newKey = 'on' + key.charAt(2).toUpperCase() + key.slice(3);\n      if (newKey in restProps) {\n        // Prefer existing camelCase prop if present; keep original key as-is to avoid overwriting\n        acc[key] = restProps[key];\n      } else {\n        acc[newKey] = restProps[key];\n      }\n    } else {\n      acc[key] = restProps[key];\n    }\n    return acc;\n  }, {});\n\n  return (\n    <Locale words={en} optional={true}>\n      <Values\n        view={Layout}\n        values={values}\n        items={items}\n        css={css}\n        activeBatch={activeBatch}\n        topBar={topBar}\n        bottomBar={bottomBar}\n        focus={focus}\n        autoSave={autoSave}\n        layout={layout}\n        readonly={readonly}\n        placement={placement}\n        {...normalizedRestProps}\n      >\n        {children}\n      </Values>\n    </Locale>\n  );\n}\n","import { Material as CoreMaterial } from '@svar-ui/react-core';\nimport './Material.css';\n\nexport default function Material({ fonts = true, children }) {\n  if (children) {\n    return <CoreMaterial fonts={fonts}>{children}</CoreMaterial>;\n  } else {\n    return <CoreMaterial fonts={fonts} />;\n  }\n}\n","import { Willow as CoreWillow } from '@svar-ui/react-core';\nimport './Willow.css';\n\nfunction Willow({ fonts = true, children }) {\n  return children ? (\n    <CoreWillow fonts={fonts}>{children}</CoreWillow>\n  ) : (\n    <CoreWillow fonts={fonts} />\n  );\n}\n\nexport default Willow;\n","import { WillowDark as WillowDarkInner } from '@svar-ui/react-core';\nimport './WillowDark.css';\n\nfunction WillowDark(props) {\n  const { fonts = true, children } = props;\n\n  if (children) {\n    return <WillowDarkInner fonts={fonts}>{children}</WillowDarkInner>;\n  }\n\n  return <WillowDarkInner fonts={fonts} />;\n}\n\nexport default WillowDark;\n","import { useMemo, useContext } from 'react';\nimport { Field } from '@svar-ui/react-core';\nimport { context } from '@svar-ui/react-core';\n\nfunction ReadOnly({ value, options, label }) {\n  const i18n = useContext(context.i18n);\n  const _ = i18n.getGroup('editor');\n\n  const text = useMemo(() => {\n    let t = value;\n    if (typeof value === 'boolean') {\n      t = value ? _('Yes') : _('No');\n    }\n\n    if (options) {\n      const option = options.find((o) => o.id === value);\n      if (option) {\n        t = option.label;\n      }\n    }\n\n    return t;\n  }, [value, options, _]);\n\n  if (text || text === 0) {\n    return <Field label={label}>{text}</Field>;\n  }\n\n  return null;\n}\n\nexport default ReadOnly;\n","import './Section.css';\n\nfunction Section({ fieldKey, label, activeSection, onClick }) {\n  return (\n    <div\n      className={`wx-OmgQq65I wx-section${activeSection ? ' wx-section-active' : ''}`}\n      onClick={() =>\n        onClick &&\n        onClick({\n          item: { id: 'toggle-section', key: activeSection ? null : fieldKey },\n        })\n      }\n    >\n      <h3>{label}</h3>\n      <i\n        className={`wx-OmgQq65I wxi-angle-${activeSection ? 'down' : 'right'} wx-icon`}\n      ></i>\n    </div>\n  );\n}\n\nexport default Section;\n","import { registerEditorItem } from './helpers';\nimport Form from './components/Form.jsx';\nimport Editor from './components/Editor.jsx';\n\nimport Material from './themes/Material.jsx';\nimport Willow from './themes/Willow.jsx';\nimport WillowDark from './themes/WillowDark.jsx';\n\nimport ReadOnly from './components/sections/ReadOnly.jsx';\nimport Section from './components/sections/Section.jsx';\nimport { Text } from '@svar-ui/react-core';\nimport { TextArea } from '@svar-ui/react-core';\nimport { Checkbox } from '@svar-ui/react-core';\n\nregisterEditorItem('text', Text);\nregisterEditorItem('textarea', TextArea);\nregisterEditorItem('checkbox', Checkbox);\n\nregisterEditorItem('readonly', ReadOnly);\nregisterEditorItem('section', Section);\n\nimport { env, setEnv } from '@svar-ui/lib-dom';\nsetEnv(env);\n\nexport { registerEditorItem, Form, Editor, Material, Willow, WillowDark };\n"],"names":["handlers","getItemHandler","type","registerEditorItem","handler","en","FormEditor","props","editors","data","css","errors","focus","onClick","children","onChange","root","useRef","useEffect","focused","input","i18n","useContext","context","_","useMemo","overlay","editor","key","onChangeEditor","otherProps","Component","jsx","Component2","Field","ev","rawGetter","parts","obj","out","p","rawSetter","v","i","itemsToEditors","sections","config","s","uid","getValues","raw","ed","setValues","values","changes","a","diff","initial","b","isSame","validateValues","any","x","Values","valuesProp","items","activeBatch","autoSave","readonly","topBar","bottomBar","layout","placement","View","onSave","onAction","onValidation","hotkeys","useWritableProp","activatedSection","setActivatedSection","useState","editorsObj","y","exclusive","actualValues","setActualValues","setData","d","deepCopy","runValidation","notSaved","setNotSaved","getUniqueFields","arr","check","handleUpdate","updateData","updated","handleChanges","value","newData","event","newActualValues","fieldsToValidate","errorsFields","saveAction","handleAction","item","Form","restProps","processedRestProps","newKey","Locale","Editor","Columns","columns","cols","field","index","jsxs","Toolbar","top","onChangeForm","useCallback","WxToolbar","Spacer","CancelButton","SaveButton","CloseIcon","Panel","onKeyDown","autoBars","tbar","bar","bbar","buttons","rootRef","getHotkeyRef","args","bi","target","hotkeysConfig","useHotkeys","Layout","handleClose","ModalArea","SideArea","normalizedRestProps","acc","Material","fonts","CoreMaterial","Willow","CoreWillow","WillowDark","WillowDarkInner","ReadOnly","options","label","text","t","option","o","Section","fieldKey","activeSection","Text","TextArea","Checkbox","setEnv","env"],"mappings":"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"}