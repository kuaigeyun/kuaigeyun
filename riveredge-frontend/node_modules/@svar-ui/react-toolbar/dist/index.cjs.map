{"version":3,"file":"index.cjs","sources":["../src/helpers.js","../src/buttons/Separator.jsx","../src/buttons/Spacer.jsx","../src/components/BarComponent.jsx","../src/components/Group.jsx","../src/components/Menu.jsx","../src/components/Toolbar.jsx","../src/buttons/Button.jsx","../src/buttons/Label.jsx","../src/buttons/Icon.jsx","../src/buttons/Item.jsx","../src/index.js"],"sourcesContent":["const handlers = {};\nexport function getItemHandler(type) {\n  return handlers[type] || type;\n}\nexport function registerToolbarItem(type, handler) {\n  handlers[type] = handler;\n}\n","import './Separator.css';\n\nexport default function Separator({ menu = false }) {\n  return (\n    <div className={`wx-z1qpqrvg wx-separator${menu ? '-menu' : ''}`}>\n      &nbsp;\n    </div>\n  );\n}\n","import './Spacer.css';\n\nfunction Spacer() {\n  return <div className=\"wx-1IhFzpJV wx-spacer\"></div>;\n}\n\nexport default Spacer;\n","import { useMemo, useCallback } from 'react';\nimport { getItemHandler } from '../helpers';\nimport Separator from '../buttons/Separator.jsx';\nimport Spacer from '../buttons/Spacer.jsx';\nimport './BarComponent.css';\n\n// eslint-disable-next-line no-unused-vars\nconst omitKey = ({ key, text, ...rest }) => rest;\n\nfunction BarComponent(props) {\n  const { item = {}, menu = false, values, onClick, onChange } = props;\n\n  const itemComponent = useMemo(\n    () => getItemHandler(item.comp || 'label'),\n    [item],\n  );\n\n  const handleClick = useCallback(() => {\n    if (item && item.handler) item.handler(item);\n    if (onClick) onClick({ item });\n  }, [item, onClick]);\n\n  const value = useMemo(() => {\n    return item && item.key\n      ? values\n        ? values[item.key]\n        : undefined\n      : undefined;\n  }, [item, values]);\n\n  const detectChange = useCallback(\n    ({ value }) => {\n      if (item && item.handler) item.handler(item, value);\n      if (onChange) onChange({ value, item });\n    },\n    [item, onChange],\n  );\n\n  const text = useMemo(() => {\n    return menu\n      ? item\n        ? item.menuText || item.text\n        : undefined\n      : item\n        ? item.text\n        : undefined;\n  }, [menu, item]);\n\n  if (item && item.comp == 'spacer') {\n    return <Spacer />;\n  } else if (item && item.comp == 'separator') {\n    return <Separator menu={menu} />;\n  } else {\n    const ReactComponent = itemComponent;\n    const className = [\n      'wx-tb-element',\n      item && item.css ? item.css : '',\n      item && item.spacer ? 'wx-spacer' : '',\n      menu ? 'wx-menu' : '',\n    ]\n      .filter(Boolean)\n      .join(' ');\n\n    return (\n      <div\n        className={'wx-KVAsgMam ' + className}\n        data-id={item ? item.id : undefined}\n      >\n        <ReactComponent\n          value={value}\n          onChange={detectChange}\n          onClick={handleClick}\n          text={text}\n          menu={menu}\n          {...omitKey(item)}\n        />\n      </div>\n    );\n  }\n}\n\nexport default BarComponent;\n","import { useState } from 'react';\nimport BarComponent from './BarComponent.jsx';\nimport { Dropdown } from '@svar-ui/react-core';\nimport './Group.css';\n\nexport default function Group({\n  item,\n  values = null,\n  menu = false,\n  onChange,\n  onClick,\n}) {\n  const [collapsedState, setCollapsedState] = useState(true);\n\n  const oncancel = () => setCollapsedState(true);\n  const show = () => setCollapsedState(false);\n\n  const handleClick = (ev) => {\n    oncancel();\n    onClick && onClick(ev);\n  };\n\n  const rootClassName = [\n    'wx-wSVFAGym',\n    'wx-tb-group',\n    item.css || '',\n    item.layout == 'column' ? 'wx-column' : '',\n    item.collapsed && !menu ? 'wx-group-collapsed' : '',\n  ]\n    .filter(Boolean)\n    .join(' ');\n\n  return (\n    <div className={rootClassName}>\n      {item.collapsed && !menu ? (\n        <>\n          <div className=\"wx-wSVFAGym wx-collapsed\" onClick={show}>\n            {item.icon ? (\n              <i className={`wx-wSVFAGym icon ${item.icon}`}></i>\n            ) : null}\n            {item.text ? (\n              <div className=\"wx-wSVFAGym wx-label-text\">{item.text}</div>\n            ) : null}\n            {item.text && !item.icon ? (\n              <i className=\"wx-wSVFAGym wx-label-arrow wxi-angle-down\"></i>\n            ) : null}\n          </div>\n          {!collapsedState ? (\n            <Dropdown width=\"\" oncancel={oncancel}>\n              <div className=\"wx-wSVFAGym wx-drop-group\">\n                <Group\n                  item={{ ...item, text: '', collapsed: false }}\n                  values={values}\n                  menu={menu}\n                  onChange={onChange}\n                  onClick={handleClick}\n                />\n              </div>\n            </Dropdown>\n          ) : null}\n        </>\n      ) : (\n        <>\n          <div className=\"wx-wSVFAGym wx-tb-body\">\n            {item.items.map((sub, index) =>\n              sub.items ? (\n                <Group\n                  key={sub.id || index}\n                  item={sub}\n                  values={values}\n                  onClick={handleClick}\n                  onChange={onChange}\n                />\n              ) : (\n                <BarComponent\n                  key={sub.id || index}\n                  item={sub}\n                  values={values}\n                  onClick={handleClick}\n                  onChange={onChange}\n                />\n              ),\n            )}\n          </div>\n          {item.text ? (\n            <div className=\"wx-wSVFAGym wx-label\">{item.text}</div>\n          ) : null}\n        </>\n      )}\n    </div>\n  );\n}\n","import { useState, useRef } from 'react';\nimport BarComponent from './BarComponent.jsx';\nimport Group from './Group.jsx';\nimport { Dropdown, Button } from '@svar-ui/react-core';\nimport './Menu.css';\n\nfunction Menu({ items = [], css, values, width, onClick, onChange }) {\n  const [popup, setPopup] = useState(undefined);\n  const div = useRef(null);\n\n  function onCancel() {\n    setPopup(null);\n  }\n  function showMenu() {\n    setPopup(true);\n  }\n  function menuClick(ev) {\n    onCancel();\n    onClick && onClick(ev);\n  }\n\n  return (\n    <div\n      className={`wx-Yo6BuX0p wx-menu ${css || ''}`}\n      ref={div}\n      data-id=\"$menu\"\n    >\n      <Button icon=\"wxi-dots-h\" onClick={showMenu} />\n      {popup ? (\n        <Dropdown width={`${width}px`} onCancel={onCancel}>\n          <div className=\"wx-Yo6BuX0p wx-drop-menu\">\n            {items.map((item, index) =>\n              item.items ? (\n                <Group\n                  key={item.id || index}\n                  item={item}\n                  values={values}\n                  menu={true}\n                  onClick={menuClick}\n                  onChange={onChange}\n                />\n              ) : (\n                <BarComponent\n                  key={item.id || index}\n                  item={item}\n                  values={values}\n                  menu={true}\n                  onClick={menuClick}\n                  onChange={onChange}\n                />\n              ),\n            )}\n          </div>\n        </Dropdown>\n      ) : null}\n    </div>\n  );\n}\n\nexport default Menu;\n","import { useState, useEffect, useMemo, useRef } from 'react';\nimport Menu from './Menu.jsx';\nimport Group from './Group.jsx';\nimport BarComponent from './BarComponent.jsx';\n\nimport { uid } from '@svar-ui/lib-dom';\nimport { useWritableProp } from '@svar-ui/lib-react';\nimport './Toolbar.css';\n\nfunction normalize(list) {\n  list.forEach((item) => {\n    if (!item.id) item.id = uid();\n  });\n  return list;\n}\n\nfunction Toolbar(props) {\n  const {\n    items: itemsProp,\n    menuCss = '',\n    css = '',\n    values: valuesProp,\n    overflow = 'menu',\n    onClick,\n    onChange,\n  } = props;\n\n  const [items, setItems] = useWritableProp(itemsProp || []);\n  const [values, setValues] = useWritableProp(valuesProp || null);\n\n  const visibleItems = useMemo(() => normalize(items), [items]);\n\n  const divRef = useRef(null);\n  const lastToolbarStateRef = useRef(-1);\n\n  const [menuItems, setMenuItems] = useState([]);\n\n  // refs to keep latest values for callbacks created once\n  const itemsRef = useRef(visibleItems);\n  useEffect(() => {\n    itemsRef.current = visibleItems;\n  }, [items]);\n\n  const overflowRef = useRef(overflow);\n  useEffect(() => {\n    overflowRef.current = overflow;\n  }, [overflow]);\n\n  const menuItemsRef = useRef(menuItems);\n  useEffect(() => {\n    menuItemsRef.current = menuItems;\n  }, [menuItems]);\n\n  const scheduleOverflowCheckRef = useRef(false);\n\n  function handleChange(ev) {\n    if (values) {\n      values[ev.item.key] = ev.value;\n      // trigger update similar to `values = values;`\n      setValues({ ...values });\n    }\n    onChange && onChange(ev);\n  }\n\n  function getTotalWidth() {\n    const div = divRef.current;\n    if (!div) return 0;\n    const nodes = div.children;\n    const it = itemsRef.current || [];\n    let sum = 0;\n    for (let i = 0; i < it.length; i++) {\n      if (it[i].comp !== 'spacer') {\n        sum += nodes[i].clientWidth;\n        if (it[i].comp === 'separator') sum += 8;\n      }\n    }\n    return sum;\n  }\n\n  function collapseGroups() {\n    const div = divRef.current;\n    const it = itemsRef.current || [];\n    if (!div) return;\n\n    for (let i = it.length - 1; i >= 0; i--) {\n      if (it[i].items && !it[i].collapsed) {\n        it[i].collapsed = true;\n        it[i].$width = div.children[i].offsetWidth;\n        // schedule after DOM update\n        scheduleOverflowCheckRef.current = true;\n\n        // trigger update similar to `items = [...items];`\n        setItems([...it]);\n        return;\n      }\n    }\n  }\n\n  function expandGroups(freeSpace) {\n    const div = divRef.current;\n    const it = itemsRef.current || [];\n    if (!div) return;\n\n    for (let i = 0; i < it.length; i++) {\n      if (it[i].collapsed && it[i].$width) {\n        if (it[i].$width - div.children[i].offsetWidth < freeSpace + 10) {\n          it[i].collapsed = false;\n          // schedule after DOM update\n          scheduleOverflowCheckRef.current = true;\n        }\n\n        setItems([...it]);\n        return;\n      }\n    }\n  }\n\n  function processOverflow() {\n    const div = divRef.current;\n    if (!div) return;\n    const it = itemsRef.current || [];\n    const ov = overflowRef.current;\n\n    if (ov === 'wrap') return;\n\n    const visibleWidth = div.clientWidth;\n    const fullWidth = div.scrollWidth;\n    const needMenu = fullWidth > visibleWidth;\n\n    if (needMenu) {\n      if (ov === 'collapse') return collapseGroups(visibleWidth);\n      const nodes = div.children;\n      let sum = 0;\n\n      for (let i = 0; i < it.length; i++) {\n        sum += nodes[i].clientWidth;\n        if (it[i].comp === 'separator') sum += 8;\n        if (sum > visibleWidth - 40) {\n          if (lastToolbarStateRef.current === i) return;\n          lastToolbarStateRef.current = i;\n\n          const newMenuItems = [];\n          for (let j = i; j < it.length; j++) {\n            newMenuItems.push(it[j]);\n            nodes[j].style.visibility = 'hidden';\n          }\n          if (i > 0 && it[i - 1].comp === 'separator') {\n            nodes[i - 1].style.visibility = 'hidden';\n          }\n          setMenuItems(newMenuItems);\n          break;\n        }\n        nodes[i].style.visibility = '';\n      }\n    } else {\n      const freeWidth = visibleWidth - getTotalWidth();\n      if (freeWidth <= 0) return;\n      if (ov === 'collapse') return expandGroups(freeWidth);\n\n      if ((menuItemsRef.current || []).length) {\n        lastToolbarStateRef.current = null;\n        const nodes = div.children;\n        for (let i = 0; i < it.length; i++) {\n          nodes[i].style.visibility = '';\n        }\n        setMenuItems([]);\n      }\n    }\n  }\n\n  // run processOverflow after DOM updates triggered by collapse/expand\n  useEffect(() => {\n    if (scheduleOverflowCheckRef.current) {\n      scheduleOverflowCheckRef.current = false;\n      processOverflow();\n    }\n  }, [items]);\n\n  useEffect(() => {\n    const ro = new ResizeObserver(() => processOverflow());\n    if (divRef.current) ro.observe(divRef.current);\n\n    return () => {\n      ro.disconnect();\n    };\n  }, []);\n\n  return (\n    <div\n      className={`wx-VdPSJj8y wx-toolbar ${css || ''} ${overflow === 'wrap' ? 'wx-wrap' : ''}`}\n      ref={divRef}\n    >\n      {visibleItems.map((item) =>\n        item.items ? (\n          <Group\n            key={item.id}\n            item={item}\n            values={values}\n            onClick={onClick}\n            onChange={handleChange}\n          />\n        ) : (\n          <BarComponent\n            key={item.id}\n            item={item}\n            values={values}\n            onClick={onClick}\n            onChange={handleChange}\n          />\n        ),\n      )}\n      {!!menuItems.length && (\n        <Menu\n          items={menuItems}\n          css={menuCss}\n          values={values}\n          onClick={onClick}\n          onChange={handleChange}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default Toolbar;\n","import { Button as CoreButton } from '@svar-ui/react-core';\nimport './Button.css';\n\nfunction Button(props) {\n  const { icon, text = '', css, type, disabled, menu, onClick } = props;\n\n  if (menu) {\n    return (\n      <div className=\"wx-HXpG4gnx wx-item\" onClick={onClick}>\n        <i className={`wx-HXpG4gnx ${icon || 'wxi-empty'} ${css || ''}`} />\n        {text}\n      </div>\n    );\n  }\n\n  return (\n    <CoreButton\n      icon={icon}\n      type={type}\n      css={css}\n      text={text}\n      disabled={disabled}\n      onClick={onClick}\n    />\n  );\n}\n\nexport default Button;\n","import './Label.css';\n\nexport default function Label(props) {\n  const { text, value, children } = props;\n\n  if (children) {\n    return <div className=\"wx-PTEZGYcj wx-label\">{children()}</div>;\n  } else {\n    return <div className=\"wx-PTEZGYcj wx-label\">{value || text}</div>;\n  }\n}\n","import { Button } from '@svar-ui/react-core';\nimport './Icon.css';\n\nexport default function Icon(props) {\n  const { icon, text, css, type, disabled, menu, onClick } = props;\n\n  if (menu) {\n    return (\n      <div className=\"wx-3cuSqONJ wx-item\" onClick={onClick}>\n        {icon ? (\n          <i className={`wx-3cuSqONJ ${icon || ''} ${css || ''}`}></i>\n        ) : null}\n        {text}\n      </div>\n    );\n  }\n\n  return (\n    <Button\n      icon={icon}\n      type={type}\n      css={css}\n      title={text}\n      disabled={disabled}\n      onClick={onClick}\n    />\n  );\n}\n","import './Item.css';\n\nfunction Item({ id = '', text = '', css = '', icon = '', onClick }) {\n  function handleClick() {\n    onClick && onClick({ id });\n  }\n\n  return (\n    <div className={`wx-U0Bx7pIR wx-label ${css}`} onClick={handleClick}>\n      {icon ? <i className={'wx-U0Bx7pIR ' + icon}></i> : null}\n      {text}\n    </div>\n  );\n}\n\nexport default Item;\n","import Toolbar from './components/Toolbar.jsx';\nimport { registerToolbarItem } from './helpers.js';\n\nimport Separator from './buttons/Separator.jsx';\nimport Spacer from './buttons/Spacer.jsx';\nimport Button from './buttons/Button.jsx';\nimport Label from './buttons/Label.jsx';\nimport Icon from './buttons/Icon.jsx';\nimport Item from './buttons/Item.jsx';\n\nregisterToolbarItem('button', Button);\nregisterToolbarItem('separator', Separator);\nregisterToolbarItem('spacer', Spacer);\nregisterToolbarItem('label', Label);\nregisterToolbarItem('item', Item);\nregisterToolbarItem('icon', Icon);\n\nexport { Toolbar, registerToolbarItem };\n"],"names":["handlers","getItemHandler","type","registerToolbarItem","handler","Separator","menu","jsx","Spacer","omitKey","key","text","rest","BarComponent","props","item","values","onClick","onChange","itemComponent","useMemo","handleClick","useCallback","value","detectChange","ReactComponent","className","Group","collapsedState","setCollapsedState","useState","oncancel","show","ev","rootClassName","jsxs","Fragment","Dropdown","sub","index","Menu","items","css","width","popup","setPopup","div","useRef","onCancel","showMenu","menuClick","Button","normalize","list","uid","Toolbar","itemsProp","menuCss","valuesProp","overflow","setItems","useWritableProp","setValues","visibleItems","divRef","lastToolbarStateRef","menuItems","setMenuItems","itemsRef","useEffect","overflowRef","menuItemsRef","scheduleOverflowCheckRef","handleChange","getTotalWidth","nodes","it","sum","i","collapseGroups","expandGroups","freeSpace","processOverflow","ov","visibleWidth","newMenuItems","j","freeWidth","ro","icon","disabled","CoreButton","Label","children","Icon","Item","id"],"mappings":"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"}