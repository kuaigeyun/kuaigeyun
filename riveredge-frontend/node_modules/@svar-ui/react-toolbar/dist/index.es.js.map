{"version":3,"file":"index.es.js","sources":["../src/helpers.js","../src/buttons/Separator.jsx","../src/buttons/Spacer.jsx","../src/components/BarComponent.jsx","../src/components/Group.jsx","../src/components/Menu.jsx","../src/components/Toolbar.jsx","../src/buttons/Button.jsx","../src/buttons/Label.jsx","../src/buttons/Icon.jsx","../src/buttons/Item.jsx","../src/index.js"],"sourcesContent":["const handlers = {};\nexport function getItemHandler(type) {\n  return handlers[type] || type;\n}\nexport function registerToolbarItem(type, handler) {\n  handlers[type] = handler;\n}\n","import './Separator.css';\n\nexport default function Separator({ menu = false }) {\n  return (\n    <div className={`wx-z1qpqrvg wx-separator${menu ? '-menu' : ''}`}>\n      &nbsp;\n    </div>\n  );\n}\n","import './Spacer.css';\n\nfunction Spacer() {\n  return <div className=\"wx-1IhFzpJV wx-spacer\"></div>;\n}\n\nexport default Spacer;\n","import { useMemo, useCallback } from 'react';\nimport { getItemHandler } from '../helpers';\nimport Separator from '../buttons/Separator.jsx';\nimport Spacer from '../buttons/Spacer.jsx';\nimport './BarComponent.css';\n\n// eslint-disable-next-line no-unused-vars\nconst omitKey = ({ key, text, ...rest }) => rest;\n\nfunction BarComponent(props) {\n  const { item = {}, menu = false, values, onClick, onChange } = props;\n\n  const itemComponent = useMemo(\n    () => getItemHandler(item.comp || 'label'),\n    [item],\n  );\n\n  const handleClick = useCallback(() => {\n    if (item && item.handler) item.handler(item);\n    if (onClick) onClick({ item });\n  }, [item, onClick]);\n\n  const value = useMemo(() => {\n    return item && item.key\n      ? values\n        ? values[item.key]\n        : undefined\n      : undefined;\n  }, [item, values]);\n\n  const detectChange = useCallback(\n    ({ value }) => {\n      if (item && item.handler) item.handler(item, value);\n      if (onChange) onChange({ value, item });\n    },\n    [item, onChange],\n  );\n\n  const text = useMemo(() => {\n    return menu\n      ? item\n        ? item.menuText || item.text\n        : undefined\n      : item\n        ? item.text\n        : undefined;\n  }, [menu, item]);\n\n  if (item && item.comp == 'spacer') {\n    return <Spacer />;\n  } else if (item && item.comp == 'separator') {\n    return <Separator menu={menu} />;\n  } else {\n    const ReactComponent = itemComponent;\n    const className = [\n      'wx-tb-element',\n      item && item.css ? item.css : '',\n      item && item.spacer ? 'wx-spacer' : '',\n      menu ? 'wx-menu' : '',\n    ]\n      .filter(Boolean)\n      .join(' ');\n\n    return (\n      <div\n        className={'wx-KVAsgMam ' + className}\n        data-id={item ? item.id : undefined}\n      >\n        <ReactComponent\n          value={value}\n          onChange={detectChange}\n          onClick={handleClick}\n          text={text}\n          menu={menu}\n          {...omitKey(item)}\n        />\n      </div>\n    );\n  }\n}\n\nexport default BarComponent;\n","import { useState } from 'react';\nimport BarComponent from './BarComponent.jsx';\nimport { Dropdown } from '@svar-ui/react-core';\nimport './Group.css';\n\nexport default function Group({\n  item,\n  values = null,\n  menu = false,\n  onChange,\n  onClick,\n}) {\n  const [collapsedState, setCollapsedState] = useState(true);\n\n  const oncancel = () => setCollapsedState(true);\n  const show = () => setCollapsedState(false);\n\n  const handleClick = (ev) => {\n    oncancel();\n    onClick && onClick(ev);\n  };\n\n  const rootClassName = [\n    'wx-wSVFAGym',\n    'wx-tb-group',\n    item.css || '',\n    item.layout == 'column' ? 'wx-column' : '',\n    item.collapsed && !menu ? 'wx-group-collapsed' : '',\n  ]\n    .filter(Boolean)\n    .join(' ');\n\n  return (\n    <div className={rootClassName}>\n      {item.collapsed && !menu ? (\n        <>\n          <div className=\"wx-wSVFAGym wx-collapsed\" onClick={show}>\n            {item.icon ? (\n              <i className={`wx-wSVFAGym icon ${item.icon}`}></i>\n            ) : null}\n            {item.text ? (\n              <div className=\"wx-wSVFAGym wx-label-text\">{item.text}</div>\n            ) : null}\n            {item.text && !item.icon ? (\n              <i className=\"wx-wSVFAGym wx-label-arrow wxi-angle-down\"></i>\n            ) : null}\n          </div>\n          {!collapsedState ? (\n            <Dropdown width=\"\" oncancel={oncancel}>\n              <div className=\"wx-wSVFAGym wx-drop-group\">\n                <Group\n                  item={{ ...item, text: '', collapsed: false }}\n                  values={values}\n                  menu={menu}\n                  onChange={onChange}\n                  onClick={handleClick}\n                />\n              </div>\n            </Dropdown>\n          ) : null}\n        </>\n      ) : (\n        <>\n          <div className=\"wx-wSVFAGym wx-tb-body\">\n            {item.items.map((sub, index) =>\n              sub.items ? (\n                <Group\n                  key={sub.id || index}\n                  item={sub}\n                  values={values}\n                  onClick={handleClick}\n                  onChange={onChange}\n                />\n              ) : (\n                <BarComponent\n                  key={sub.id || index}\n                  item={sub}\n                  values={values}\n                  onClick={handleClick}\n                  onChange={onChange}\n                />\n              ),\n            )}\n          </div>\n          {item.text ? (\n            <div className=\"wx-wSVFAGym wx-label\">{item.text}</div>\n          ) : null}\n        </>\n      )}\n    </div>\n  );\n}\n","import { useState, useRef } from 'react';\nimport BarComponent from './BarComponent.jsx';\nimport Group from './Group.jsx';\nimport { Dropdown, Button } from '@svar-ui/react-core';\nimport './Menu.css';\n\nfunction Menu({ items = [], css, values, width, onClick, onChange }) {\n  const [popup, setPopup] = useState(undefined);\n  const div = useRef(null);\n\n  function onCancel() {\n    setPopup(null);\n  }\n  function showMenu() {\n    setPopup(true);\n  }\n  function menuClick(ev) {\n    onCancel();\n    onClick && onClick(ev);\n  }\n\n  return (\n    <div\n      className={`wx-Yo6BuX0p wx-menu ${css || ''}`}\n      ref={div}\n      data-id=\"$menu\"\n    >\n      <Button icon=\"wxi-dots-h\" onClick={showMenu} />\n      {popup ? (\n        <Dropdown width={`${width}px`} onCancel={onCancel}>\n          <div className=\"wx-Yo6BuX0p wx-drop-menu\">\n            {items.map((item, index) =>\n              item.items ? (\n                <Group\n                  key={item.id || index}\n                  item={item}\n                  values={values}\n                  menu={true}\n                  onClick={menuClick}\n                  onChange={onChange}\n                />\n              ) : (\n                <BarComponent\n                  key={item.id || index}\n                  item={item}\n                  values={values}\n                  menu={true}\n                  onClick={menuClick}\n                  onChange={onChange}\n                />\n              ),\n            )}\n          </div>\n        </Dropdown>\n      ) : null}\n    </div>\n  );\n}\n\nexport default Menu;\n","import { useState, useEffect, useMemo, useRef } from 'react';\nimport Menu from './Menu.jsx';\nimport Group from './Group.jsx';\nimport BarComponent from './BarComponent.jsx';\n\nimport { uid } from '@svar-ui/lib-dom';\nimport { useWritableProp } from '@svar-ui/lib-react';\nimport './Toolbar.css';\n\nfunction normalize(list) {\n  list.forEach((item) => {\n    if (!item.id) item.id = uid();\n  });\n  return list;\n}\n\nfunction Toolbar(props) {\n  const {\n    items: itemsProp,\n    menuCss = '',\n    css = '',\n    values: valuesProp,\n    overflow = 'menu',\n    onClick,\n    onChange,\n  } = props;\n\n  const [items, setItems] = useWritableProp(itemsProp || []);\n  const [values, setValues] = useWritableProp(valuesProp || null);\n\n  const visibleItems = useMemo(() => normalize(items), [items]);\n\n  const divRef = useRef(null);\n  const lastToolbarStateRef = useRef(-1);\n\n  const [menuItems, setMenuItems] = useState([]);\n\n  // refs to keep latest values for callbacks created once\n  const itemsRef = useRef(visibleItems);\n  useEffect(() => {\n    itemsRef.current = visibleItems;\n  }, [items]);\n\n  const overflowRef = useRef(overflow);\n  useEffect(() => {\n    overflowRef.current = overflow;\n  }, [overflow]);\n\n  const menuItemsRef = useRef(menuItems);\n  useEffect(() => {\n    menuItemsRef.current = menuItems;\n  }, [menuItems]);\n\n  const scheduleOverflowCheckRef = useRef(false);\n\n  function handleChange(ev) {\n    if (values) {\n      values[ev.item.key] = ev.value;\n      // trigger update similar to `values = values;`\n      setValues({ ...values });\n    }\n    onChange && onChange(ev);\n  }\n\n  function getTotalWidth() {\n    const div = divRef.current;\n    if (!div) return 0;\n    const nodes = div.children;\n    const it = itemsRef.current || [];\n    let sum = 0;\n    for (let i = 0; i < it.length; i++) {\n      if (it[i].comp !== 'spacer') {\n        sum += nodes[i].clientWidth;\n        if (it[i].comp === 'separator') sum += 8;\n      }\n    }\n    return sum;\n  }\n\n  function collapseGroups() {\n    const div = divRef.current;\n    const it = itemsRef.current || [];\n    if (!div) return;\n\n    for (let i = it.length - 1; i >= 0; i--) {\n      if (it[i].items && !it[i].collapsed) {\n        it[i].collapsed = true;\n        it[i].$width = div.children[i].offsetWidth;\n        // schedule after DOM update\n        scheduleOverflowCheckRef.current = true;\n\n        // trigger update similar to `items = [...items];`\n        setItems([...it]);\n        return;\n      }\n    }\n  }\n\n  function expandGroups(freeSpace) {\n    const div = divRef.current;\n    const it = itemsRef.current || [];\n    if (!div) return;\n\n    for (let i = 0; i < it.length; i++) {\n      if (it[i].collapsed && it[i].$width) {\n        if (it[i].$width - div.children[i].offsetWidth < freeSpace + 10) {\n          it[i].collapsed = false;\n          // schedule after DOM update\n          scheduleOverflowCheckRef.current = true;\n        }\n\n        setItems([...it]);\n        return;\n      }\n    }\n  }\n\n  function processOverflow() {\n    const div = divRef.current;\n    if (!div) return;\n    const it = itemsRef.current || [];\n    const ov = overflowRef.current;\n\n    if (ov === 'wrap') return;\n\n    const visibleWidth = div.clientWidth;\n    const fullWidth = div.scrollWidth;\n    const needMenu = fullWidth > visibleWidth;\n\n    if (needMenu) {\n      if (ov === 'collapse') return collapseGroups(visibleWidth);\n      const nodes = div.children;\n      let sum = 0;\n\n      for (let i = 0; i < it.length; i++) {\n        sum += nodes[i].clientWidth;\n        if (it[i].comp === 'separator') sum += 8;\n        if (sum > visibleWidth - 40) {\n          if (lastToolbarStateRef.current === i) return;\n          lastToolbarStateRef.current = i;\n\n          const newMenuItems = [];\n          for (let j = i; j < it.length; j++) {\n            newMenuItems.push(it[j]);\n            nodes[j].style.visibility = 'hidden';\n          }\n          if (i > 0 && it[i - 1].comp === 'separator') {\n            nodes[i - 1].style.visibility = 'hidden';\n          }\n          setMenuItems(newMenuItems);\n          break;\n        }\n        nodes[i].style.visibility = '';\n      }\n    } else {\n      const freeWidth = visibleWidth - getTotalWidth();\n      if (freeWidth <= 0) return;\n      if (ov === 'collapse') return expandGroups(freeWidth);\n\n      if ((menuItemsRef.current || []).length) {\n        lastToolbarStateRef.current = null;\n        const nodes = div.children;\n        for (let i = 0; i < it.length; i++) {\n          nodes[i].style.visibility = '';\n        }\n        setMenuItems([]);\n      }\n    }\n  }\n\n  // run processOverflow after DOM updates triggered by collapse/expand\n  useEffect(() => {\n    if (scheduleOverflowCheckRef.current) {\n      scheduleOverflowCheckRef.current = false;\n      processOverflow();\n    }\n  }, [items]);\n\n  useEffect(() => {\n    const ro = new ResizeObserver(() => processOverflow());\n    if (divRef.current) ro.observe(divRef.current);\n\n    return () => {\n      ro.disconnect();\n    };\n  }, []);\n\n  return (\n    <div\n      className={`wx-VdPSJj8y wx-toolbar ${css || ''} ${overflow === 'wrap' ? 'wx-wrap' : ''}`}\n      ref={divRef}\n    >\n      {visibleItems.map((item) =>\n        item.items ? (\n          <Group\n            key={item.id}\n            item={item}\n            values={values}\n            onClick={onClick}\n            onChange={handleChange}\n          />\n        ) : (\n          <BarComponent\n            key={item.id}\n            item={item}\n            values={values}\n            onClick={onClick}\n            onChange={handleChange}\n          />\n        ),\n      )}\n      {!!menuItems.length && (\n        <Menu\n          items={menuItems}\n          css={menuCss}\n          values={values}\n          onClick={onClick}\n          onChange={handleChange}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default Toolbar;\n","import { Button as CoreButton } from '@svar-ui/react-core';\nimport './Button.css';\n\nfunction Button(props) {\n  const { icon, text = '', css, type, disabled, menu, onClick } = props;\n\n  if (menu) {\n    return (\n      <div className=\"wx-HXpG4gnx wx-item\" onClick={onClick}>\n        <i className={`wx-HXpG4gnx ${icon || 'wxi-empty'} ${css || ''}`} />\n        {text}\n      </div>\n    );\n  }\n\n  return (\n    <CoreButton\n      icon={icon}\n      type={type}\n      css={css}\n      text={text}\n      disabled={disabled}\n      onClick={onClick}\n    />\n  );\n}\n\nexport default Button;\n","import './Label.css';\n\nexport default function Label(props) {\n  const { text, value, children } = props;\n\n  if (children) {\n    return <div className=\"wx-PTEZGYcj wx-label\">{children()}</div>;\n  } else {\n    return <div className=\"wx-PTEZGYcj wx-label\">{value || text}</div>;\n  }\n}\n","import { Button } from '@svar-ui/react-core';\nimport './Icon.css';\n\nexport default function Icon(props) {\n  const { icon, text, css, type, disabled, menu, onClick } = props;\n\n  if (menu) {\n    return (\n      <div className=\"wx-3cuSqONJ wx-item\" onClick={onClick}>\n        {icon ? (\n          <i className={`wx-3cuSqONJ ${icon || ''} ${css || ''}`}></i>\n        ) : null}\n        {text}\n      </div>\n    );\n  }\n\n  return (\n    <Button\n      icon={icon}\n      type={type}\n      css={css}\n      title={text}\n      disabled={disabled}\n      onClick={onClick}\n    />\n  );\n}\n","import './Item.css';\n\nfunction Item({ id = '', text = '', css = '', icon = '', onClick }) {\n  function handleClick() {\n    onClick && onClick({ id });\n  }\n\n  return (\n    <div className={`wx-U0Bx7pIR wx-label ${css}`} onClick={handleClick}>\n      {icon ? <i className={'wx-U0Bx7pIR ' + icon}></i> : null}\n      {text}\n    </div>\n  );\n}\n\nexport default Item;\n","import Toolbar from './components/Toolbar.jsx';\nimport { registerToolbarItem } from './helpers.js';\n\nimport Separator from './buttons/Separator.jsx';\nimport Spacer from './buttons/Spacer.jsx';\nimport Button from './buttons/Button.jsx';\nimport Label from './buttons/Label.jsx';\nimport Icon from './buttons/Icon.jsx';\nimport Item from './buttons/Item.jsx';\n\nregisterToolbarItem('button', Button);\nregisterToolbarItem('separator', Separator);\nregisterToolbarItem('spacer', Spacer);\nregisterToolbarItem('label', Label);\nregisterToolbarItem('item', Item);\nregisterToolbarItem('icon', Icon);\n\nexport { Toolbar, registerToolbarItem };\n"],"names":["handlers","getItemHandler","type","registerToolbarItem","handler","Separator","menu","jsx","Spacer","omitKey","key","text","rest","BarComponent","props","item","values","onClick","onChange","itemComponent","useMemo","handleClick","useCallback","value","detectChange","ReactComponent","className","Group","collapsedState","setCollapsedState","useState","oncancel","show","ev","rootClassName","jsxs","Fragment","Dropdown","sub","index","Menu","items","css","width","popup","setPopup","div","useRef","onCancel","showMenu","menuClick","Button","normalize","list","uid","Toolbar","itemsProp","menuCss","valuesProp","overflow","setItems","useWritableProp","setValues","visibleItems","divRef","lastToolbarStateRef","menuItems","setMenuItems","itemsRef","useEffect","overflowRef","menuItemsRef","scheduleOverflowCheckRef","handleChange","getTotalWidth","nodes","it","sum","i","collapseGroups","expandGroups","freeSpace","processOverflow","ov","visibleWidth","newMenuItems","j","freeWidth","ro","icon","disabled","CoreButton","Label","children","Icon","Item","id"],"mappings":"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"}