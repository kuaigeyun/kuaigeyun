{"version":3,"file":"index.cjs","sources":["../src/helpers/index.js","../src/components/MenuOption.jsx","../src/components/Menu.jsx","../src/components/ActionMenu.jsx","../src/components/MenuBar.jsx","../src/components/DropDownMenu.jsx","../src/components/ContextMenu.jsx"],"sourcesContent":["export function walkData(data, cb) {\n  data.forEach((a) => {\n    cb(a);\n    if (a.data && a.data.length) walkData(a.data, cb);\n  });\n}\n\nexport function mapData(data, cb) {\n  return data.map((a) => {\n    const out = cb(a);\n    if (a.data && a.data.length) out.data = mapData(a.data, cb);\n    return out;\n  });\n}\n\nexport function filterMenu(data, cb) {\n  const out = [];\n  data.forEach((a) => {\n    if (a.data) {\n      const sub = filterMenu(a.data, cb);\n      if (sub.length) out.push({ ...a, data: sub });\n    } else {\n      if (cb(a)) out.push(a);\n    }\n  });\n\n  return out;\n}\n\nlet uid = 1;\nexport function prepareMenuData(data) {\n  return mapData(data, (a) => {\n    // [deprecated] option.type to be deprecated in 3.0\n    const opt = { ...a, id: a.id || uid++ };\n    if (opt.type) opt.comp = opt.type;\n    return opt;\n  });\n}\n\nconst handlers = {};\nexport function getItemHandler(type) {\n  return handlers[type] || type;\n}\nexport function registerMenuItem(type, handler) {\n  handlers[type] = handler;\n}\n","import { useMemo, useRef, useCallback } from 'react';\nimport { getItemHandler } from '../helpers';\nimport './MenuOption.css';\n\nfunction MenuOption({ onClick, onShow, option }) {\n  const element = useRef(null);\n\n  const onHover = useCallback(() => {\n    onShow(option.data ? option.id : false, element.current);\n  }, [onShow, option]);\n\n  const SubComponent = useMemo(() => {\n    return option && option.comp ? getItemHandler(option.comp) : null;\n  }, [option]);\n\n  return (\n    <div\n      ref={element}\n      className={`wx-cDCz9rZQ wx-option ${option.css || ''} ${option.disabled ? 'wx-disabled' : ''}`}\n      data-id={option.id}\n      onMouseEnter={onHover}\n      onClick={onClick}\n    >\n      {option.icon ? (\n        <i className={`wx-cDCz9rZQ wx-icon ${option.icon}`}></i>\n      ) : null}\n      {option.comp ? (\n        SubComponent ? (\n          <SubComponent item={option} option={option} />\n        ) : null\n      ) : (\n        <span className=\"wx-cDCz9rZQ wx-value\"> {option.text} </span>\n      )}\n      {option.subtext ? (\n        <span className=\"wx-cDCz9rZQ wx-subtext\">{option.subtext}</span>\n      ) : null}\n      {option.data ? (\n        <i className=\"wx-cDCz9rZQ wx-sub-icon wxi-angle-right\"></i>\n      ) : null}\n    </div>\n  );\n}\n\nexport default MenuOption;\n","import {\n  Fragment,\n  useState,\n  useEffect,\n  useMemo,\n  useRef,\n  useCallback,\n} from 'react';\nimport { clickOutside, calculatePosition } from '@svar-ui/lib-dom';\nimport MenuOption from './MenuOption.jsx';\nimport { prepareMenuData } from '../helpers';\nimport './Menu.css';\n\nfunction Menu({\n  options,\n  left = 0,\n  top = 0,\n  at = 'bottom',\n  parent = null,\n  mount = null,\n  context = null,\n  css = '',\n  onClick,\n}) {\n  const [x, setX] = useState(-10000);\n  const [y, setY] = useState(-10000);\n  const [z, setZ] = useState(20);\n  const [width, setWidth] = useState();\n\n  const selfRef = useRef(null);\n  const [showSub, setShowSub] = useState(false);\n  const [activeOption, setActiveOption] = useState(null);\n\n  const updatePosition = useCallback(() => {\n    const result = calculatePosition(selfRef.current, parent, at, left, top);\n    if (result) {\n      setX(result.x);\n      setY(result.y);\n      setZ(result.z);\n      setWidth(result.width);\n    }\n  }, [parent, at, left, top]);\n\n  useEffect(() => {\n    if (mount) mount(updatePosition);\n  }, []);\n\n  const onLeave = useCallback(() => {\n    setShowSub(false);\n  }, []);\n\n  const cancel = useCallback(() => {\n    // [deprecated] action will be deprecated in 3.0\n    onClick && onClick({ action: null, option: null });\n  }, [onClick]);\n\n  const onShow = useCallback((id, el) => {\n    setShowSub(id);\n    setActiveOption(el);\n  }, []);\n\n  const finalOptions = useMemo(() => prepareMenuData(options), [options]);\n\n  useEffect(() => {\n    updatePosition();\n  }, [parent, updatePosition]);\n\n  useEffect(() => {\n    if (!selfRef.current) return;\n    return clickOutside(selfRef.current, { callback: cancel, modal: true })\n      .destroy;\n  }, [cancel]);\n\n  return (\n    <div\n      ref={selfRef}\n      data-wx-menu=\"true\"\n      className={`wx-XMmAGqVx wx-menu ${css}`}\n      style={{\n        position: 'absolute',\n        top: y + 'px',\n        left: x + 'px',\n        width: width,\n        zIndex: z,\n      }}\n      onMouseLeave={onLeave}\n    >\n      {finalOptions.map((option) => (\n        <Fragment key={option.id}>\n          {option.comp === 'separator' ? (\n            <div className=\"wx-XMmAGqVx wx-separator\"></div>\n          ) : (\n            <MenuOption\n              option={option}\n              onShow={onShow}\n              onClick={(ev) => {\n                if (!option.data && !ev.defaultPrevented) {\n                  // [deprecated] action will be deprecated in 3.0\n                  const pack = { context, action: option, option, event: ev };\n                  if (option.handler) option.handler(pack);\n                  onClick && onClick(pack);\n                  ev.stopPropagation();\n                }\n              }}\n            />\n          )}\n          {option.data && showSub === option.id ? (\n            <Menu\n              css={css}\n              options={option.data}\n              at=\"right-overlap\"\n              parent={activeOption}\n              context={context}\n              onClick={onClick}\n            />\n          ) : null}\n        </Fragment>\n      ))}\n    </div>\n  );\n}\n\nexport default Menu;\n","import {\n  forwardRef,\n  useCallback,\n  useImperativeHandle,\n  useMemo,\n  useState,\n} from 'react';\nimport { Portal } from '@svar-ui/react-core';\nimport { id } from '@svar-ui/lib-dom';\nimport Menu from './Menu.jsx';\nimport { filterMenu } from '../helpers';\n\nconst ActionMenu = forwardRef(function ActionMenu(props, ref) {\n  const {\n    options,\n    at = 'bottom',\n    resolver = null,\n    dataKey = 'contextId',\n    filter = null,\n    css = '',\n    children,\n    onClick,\n  } = props;\n\n  const [item, setItem] = useState(null);\n  const [parent, setParent] = useState(null);\n  const [left, setLeft] = useState(0);\n  const [top, setTop] = useState(0);\n\n  const filteredOptions = useMemo(() => {\n    if (item !== null && filter) {\n      return filterMenu(options, (v) => filter(v, item));\n    }\n    return options;\n  }, [item, filter, options]);\n\n  const handleClick = useCallback(\n    (ev) => {\n      setParent(null);\n      if (onClick) onClick(ev);\n    },\n    [onClick],\n  );\n\n  const getDataAttr = useCallback((node, name) => {\n    let v = null;\n    while (node && node.dataset && !v) {\n      v = node.dataset[name];\n      node = node.parentNode;\n    }\n    return v ? id(v) : null;\n  }, []);\n\n  const show = useCallback(\n    (ev, obj) => {\n      if (!ev) {\n        setParent(null);\n        return;\n      }\n\n      if (ev.defaultPrevented) return;\n\n      const target = ev.target;\n      if (target && target.dataset && target.dataset.menuIgnore) return;\n\n      setLeft(ev.clientX + 1);\n      setTop(ev.clientY + 1);\n\n      let nextItem =\n        typeof obj !== 'undefined' ? obj : getDataAttr(target, dataKey);\n      if (resolver) {\n        nextItem = resolver(nextItem, ev);\n        if (!nextItem) return;\n      }\n\n      setItem(nextItem);\n      setParent(target);\n\n      ev.preventDefault();\n    },\n    [dataKey, getDataAttr, resolver],\n  );\n\n  useImperativeHandle(ref, () => ({ show }), [show]);\n\n  return (\n    <>\n      {children ? (\n        <span onClick={show} data-menu-ignore=\"true\">\n          {typeof children === 'function' ? children() : children}\n        </span>\n      ) : null}\n\n      {parent ? (\n        <Portal>\n          <Menu\n            key={parent}\n            css={css}\n            at={at}\n            top={top}\n            left={left}\n            parent={parent}\n            context={item}\n            onClick={handleClick}\n            options={filteredOptions}\n          />\n        </Portal>\n      ) : null}\n    </>\n  );\n});\n\nexport default ActionMenu;\n","import { useMemo, useState, useRef } from 'react';\nimport ActionMenu from './ActionMenu.jsx';\nimport { prepareMenuData } from '../helpers';\nimport './MenuBar.css';\n\nfunction MenuBar(props) {\n  const { css = '', menuCss = '', options, onClick } = props;\n\n  const finalOptions = useMemo(() => prepareMenuData(options), [options]);\n\n  const [active, setActive] = useState(false);\n  const [menuOptions, setMenuOptions] = useState([]);\n\n  const menu = useRef(null);\n\n  function doClick(ev) {\n    setActive(null);\n    onClick && onClick(ev);\n  }\n\n  function setMenu(ev, option, trigger) {\n    // if the option has a submenu, show it and enable hover mode\n    if (option.data && option.data.length) {\n      if (active && trigger) {\n        // second click on option with submenu disables hover mode\n        setActive(null);\n      } else {\n        setMenuOptions(option.data);\n        setActive(option.id);\n        menu.current.show(ev, option);\n      }\n    } else {\n      // hide the submenu\n      menu.current.show(null);\n      // if it was the click action, dispatch it and end hover mode\n      if (trigger) {\n        // [deprecated] action will be deprecated in 3.0\n        onClick && onClick({ action: option, option });\n        setActive(null);\n      } else {\n        // do not remove active flag, to preserve the hover mode\n        setActive(-1);\n      }\n    }\n  }\n\n  function onHover(ev, option) {\n    if (active) setMenu(ev, option);\n  }\n\n  return (\n    <>\n      <div className={`wx-UfhPCLL4 wx-menubar ${css}`}>\n        {finalOptions.map((option) => (\n          <button\n            key={option.id}\n            className={`wx-UfhPCLL4 wx-option ${active === option.id ? 'wx-active' : ''} ${option.disabled ? 'wx-disabled' : ''}`}\n            onMouseEnter={(ev) => onHover(ev, option)}\n            onClick={(ev) => setMenu(ev, option, true)}\n          >\n            {option.text}\n          </button>\n        ))}\n      </div>\n\n      <ActionMenu\n        css={menuCss}\n        onClick={doClick}\n        options={menuOptions}\n        ref={menu}\n      />\n    </>\n  );\n}\n\nexport default MenuBar;\n","import {\n  forwardRef,\n  useCallback,\n  useEffect,\n  useImperativeHandle,\n  useRef,\n  useState,\n} from 'react';\nimport { Portal } from '@svar-ui/react-core';\nimport Menu from './Menu.jsx';\n\nconst DropDownMenu = forwardRef(function DropDownMenu(props, ref) {\n  const { options, at = 'bottom', css = '', children, onClick } = props;\n\n  const [parent, setParent] = useState(null);\n\n  function handleClick(ev) {\n    setParent(null);\n    onClick && onClick(ev);\n  }\n\n  const show = useCallback((ev) => {\n    setParent(ev.target);\n    ev.preventDefault();\n  }, []);\n\n  useImperativeHandle(ref, () => ({ show }), [show]);\n\n  function showAt(ev) {\n    let target = ev.target;\n    while (!target.dataset.menuIgnore) {\n      setParent(target);\n      target = target.parentNode;\n    }\n  }\n\n  const parentKeyRef = useRef(0);\n  const lastParentRef = useRef(parent);\n  useEffect(() => {\n    if (lastParentRef.current !== parent) {\n      parentKeyRef.current += 1;\n      lastParentRef.current = parent;\n    }\n  }, [parent]);\n\n  return (\n    <>\n      <span onClick={showAt} data-menu-ignore=\"true\">\n        {children}\n      </span>\n      {parent ? (\n        <Portal>\n          <Menu\n            key={parentKeyRef.current}\n            css={css}\n            at={at}\n            parent={parent}\n            options={options}\n            onClick={handleClick}\n          />\n        </Portal>\n      ) : null}\n    </>\n  );\n});\n\nexport default DropDownMenu;\n","import { forwardRef, useRef, useCallback, useImperativeHandle } from 'react';\nimport ActionMenu from './ActionMenu.jsx';\n\nconst ContextMenu = forwardRef(function ContextMenu(props, ref) {\n  const {\n    options,\n    at = 'bottom',\n    resolver = null,\n    dataKey = 'contextId',\n    filter = null,\n    css = '',\n    children,\n    onClick,\n  } = props;\n\n  const menu = useRef(null);\n\n  const show = useCallback((ev, obj) => {\n    menu.current.show(ev, obj);\n  }, []);\n\n  useImperativeHandle(\n    ref,\n    () => ({\n      show,\n    }),\n    [show],\n  );\n\n  return (\n    <>\n      {children ? (\n        <span onContextMenu={show} data-menu-ignore=\"true\">\n          {children}\n        </span>\n      ) : null}\n\n      <ActionMenu\n        css={css}\n        at={at}\n        options={options}\n        resolver={resolver}\n        dataKey={dataKey}\n        filter={filter}\n        ref={menu}\n        onClick={onClick}\n      />\n    </>\n  );\n});\n\nexport default ContextMenu;\n"],"names":["mapData","data","cb","a","out","filterMenu","sub","uid","prepareMenuData","opt","handlers","getItemHandler","type","registerMenuItem","handler","MenuOption","onClick","onShow","option","element","useRef","onHover","useCallback","SubComponent","useMemo","jsxs","jsx","Menu","options","left","top","at","parent","mount","context","css","x","setX","useState","y","setY","z","setZ","width","setWidth","selfRef","showSub","setShowSub","activeOption","setActiveOption","updatePosition","result","calculatePosition","useEffect","onLeave","cancel","id","el","finalOptions","clickOutside","Fragment","ev","pack","ActionMenu","forwardRef","props","ref","resolver","dataKey","filter","children","item","setItem","setParent","setLeft","setTop","filteredOptions","v","handleClick","getDataAttr","node","name","show","obj","target","nextItem","useImperativeHandle","Portal","MenuBar","menuCss","active","setActive","menuOptions","setMenuOptions","menu","doClick","setMenu","trigger","DropDownMenu","showAt","parentKeyRef","lastParentRef","ContextMenu"],"mappings":"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"}