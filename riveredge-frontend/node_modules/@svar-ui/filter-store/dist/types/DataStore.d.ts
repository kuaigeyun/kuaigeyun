import { Store, EventBus } from "@wx/lib-state";
import type { TDataConfig, TWritableCreator, TID } from "@wx/lib-state";
import RulesTree from "./RulesTree";
import type { IData, IDataConfig, IFilterSet, IDataFilter } from "./types";
export default class DataStore extends Store<IData> {
    in: EventBus<IDataMethodsConfig, keyof IDataMethodsConfig>;
    private _router;
    constructor(w: TWritableCreator);
    onChange(data: RulesTree): void;
    init(state: Partial<IDataConfig>): void;
    setState(state: Partial<IData>, ctx?: TDataConfig): {
        [key: string]: () => void;
    };
    getValue(): IFilterSet;
    private normalizeOptions;
    private normalizeValue;
    private _fixRule;
}
type CombineTypes<T, N> = {
    [P in keyof T]: T[P] & N;
};
export type IDataMethodsConfig = CombineTypes<{
    ["add-rule"]: {
        rule: IDataFilter;
        edit?: boolean;
        after?: TID;
    };
    ["add-group"]: {
        rule: IDataFilter;
        edit?: boolean;
        after?: TID;
    };
    ["edit-rule"]: {
        id?: TID;
    };
    ["update-rule"]: {
        id: TID;
        rule: IDataFilter;
    };
    ["delete-rule"]: {
        id: TID;
    };
    ["toggle-glue"]: {
        id: TID;
    };
    ["change-rule"]: {
        id: TID;
        rule: IDataFilter;
    };
    ["change"]: {
        value: IFilterSet;
    };
}, {
    [key: string]: any;
}>;
export {};
