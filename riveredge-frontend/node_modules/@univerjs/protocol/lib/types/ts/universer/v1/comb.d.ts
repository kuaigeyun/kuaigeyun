import { Metadata } from '@grpc/grpc-js';
import { Observable } from 'rxjs';
import { Empty } from '../../google/protobuf/empty';
import { Changeset } from '../../univer/changeset';
import { CollaMsg } from '../../univer/colla_msg';
import { Error } from '../../univer/constants/errors';
import { UniverType } from '../../univer/constants/univer';
export declare const protobufPackage = "universer.v1";
/** more details: https://c3fgartrp2.feishu.cn/docx/OS47dk8BCo1ZeKxXiNvcDLuZn2g#PymGdupuyoYfvTxv1EBciV7in9b */
export declare enum CombCmd {
    /** UNKNOWN_CMD - unknown cmd */
    UNKNOWN_CMD = 0,
    /** HELLO - call hello to get comb info, this is essential after you connect to the server */
    HELLO = 1,
    /** JOIN - call join to join couple of rooms */
    JOIN = 2,
    /** LEAVE - call leave to leave a room */
    LEAVE = 3,
    /** INGEST - call ingest to broadcast a message to a room */
    INGEST = 4,
    /** HEARTBEAT - call heartbeat to keep the connection alive */
    HEARTBEAT = 5,
    /**
     * RECV - RECV not a cmd actually, you never call a RECV cmd.
     * when you receive a message from comb(may be created by another user), the cmd will be RECV
     */
    RECV = 6,
    UNRECOGNIZED = -1
}
export declare enum CmdRspCode {
    UNKNOWN_CODE = 0,
    OK = 1,
    FAIL = 2,
    /**
     * JOIN_ROOM_FULL - 1000~1999 room related
     * max room member reached
     */
    JOIN_ROOM_FULL = 1001,
    /** JOIN_ROOM_NOT_EXISTS - the specified room does not exists */
    JOIN_ROOM_NOT_EXISTS = 1002,
    /** JOIN_ROOM_PERMISSION_DENIED - has no permission to join the room */
    JOIN_ROOM_PERMISSION_DENIED = 1003,
    /** GLOBAL_ROOMS_CNT_EXCEEDS - global live collaboration rooms count exceeds */
    GLOBAL_ROOMS_CNT_EXCEEDS = 1004,
    UNRECOGNIZED = -1
}
export interface ConnectResponse {
    error: Error | undefined;
    memberID: string;
}
export interface BroadcastRequest {
    roomID: string;
    message: string;
}
export interface NewChangesRequest {
    unitID: string;
    memberID: string;
    type: UniverType;
    changeset: Changeset | undefined;
}
export interface NewChangesResponse {
    error: Error | undefined;
}
export interface CombMsg {
    cmd: CombCmd;
    /** route key is used to route the message to the right room */
    routeKey: string;
    code: CmdRspCode;
    reason: string;
    traceID: string;
    rule: Rule | undefined;
    collaMsg?: CollaMsg | undefined;
    infoRsp?: CombInfoResponse | undefined;
    joinRsp?: CombJoinResponse | undefined;
    joinReq?: CombJoinRequest | undefined;
    leaveReq?: CombLeaveRequest | undefined;
}
export interface CombJoinInfo {
    roomID: string;
    /** extra args for joining the room */
    args: string;
}
export interface CombJoinRequest {
    rooms: CombJoinInfo[];
}
export interface CombJoinResponse {
    roomInfos: {
        [key: string]: CombJoinResponse_RoomInfo;
    };
}
export interface CombJoinResponse_RoomInfo {
    roomID: string;
    members: Member[];
}
export interface CombJoinResponse_RoomInfosEntry {
    key: string;
    value: CombJoinResponse_RoomInfo | undefined;
}
export interface CombInfoResponse {
    memberID: string;
}
export interface CombLeaveRequest {
    roomID: string;
    /** extra args for leaving the room */
    args: string;
}
export interface Member {
    memberID: string;
    name: string;
    avatar?: string | undefined;
}
export interface Rule {
    /** exclude member */
    excludeMember: string[];
    /** only member */
    onlyMember: string[];
    tunnel: Rule_Tunnel | undefined;
}
export interface Rule_Tunnel {
    name: string;
    value: string;
}
export interface CombService {
    NewChanges(request: NewChangesRequest, metadata?: Metadata): Observable<NewChangesResponse>;
    Broadcast(request: BroadcastRequest, metadata?: Metadata): Observable<Empty>;
}
