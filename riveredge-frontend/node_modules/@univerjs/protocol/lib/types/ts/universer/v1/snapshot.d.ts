import { Metadata } from '@grpc/grpc-js';
import { Observable } from 'rxjs';
import { Changeset, Command, Mutation } from '../../univer/changeset';
import { Error } from '../../univer/constants/errors';
import { UniverType } from '../../univer/constants/univer';
import { InitialSheet } from '../../univer/initial_sheet';
import { Resource } from '../../univer/resource';
import { Snapshot, TableInfo } from '../../univer/snapshot';
import { CustomCellTemplate } from '../../univer/unit_template';
import { Unit } from '../../univer/univer_file';
import { SheetBlock, SheetBlockMeta } from '../../univer/workbook';
export declare const protobufPackage = "universer.v1";
export interface GetSnapshotMetaWithPreCalculatedRequest {
    /** The id of the unit to be computed. */
    workbookId: string;
    /**
     * The revision of the unit to be computed. If not specified or set to 0, the SSC service
     * will fetch the latest version at the request time.
     */
    revision: number;
}
export interface GetSnapshotMetaWithPreCalculatedResponse {
    error: Error | undefined;
    /** Of which revision the unit is processed on. */
    revision: number;
    sscBlock: {
        [key: string]: SheetBlockMeta;
    };
}
export interface GetSnapshotMetaWithPreCalculatedResponse_SscBlockEntry {
    key: string;
    value: SheetBlockMeta | undefined;
}
export interface GetUnitMetaRequest {
    unitId: string;
}
export interface GetUnitMetaResponse {
    error: Error | undefined;
    unitId: string;
    name: string;
    creator: string;
    type: UniverType;
    createTime: string;
    updateTime: string;
}
export interface GetSheetTableInfoRequest {
    unitID: string;
    type: UniverType;
}
export interface GetSheetTableInfoResponse {
    error: Error | undefined;
    unitName: string;
    table: SheetTable | undefined;
}
export interface GetSheetTableRequest {
    unitID: string;
    type: UniverType;
    tableId: string;
}
export interface GetSheetTableResponse {
    error: Error | undefined;
    tableData: Uint8Array;
}
export interface ForkUnitRequest {
    unitId: string;
    type: UniverType;
}
export interface ForkUnitResponse {
    error: Error | undefined;
    unitId: string;
}
export interface CopyFileMetaRequest {
    fileMetaId: string;
}
export interface CopyFileMetaResponse {
    error: Error | undefined;
    fileMetaId: string;
}
export interface DirectWriteRequest {
    unitID: string;
    type: UniverType;
    commands: Command[];
    mutations: Mutation[];
}
export interface DirectWriteResponse {
    error: Error | undefined;
    revision: number;
}
export interface EnsureSnapshotRequest {
    unitID: string;
    type: UniverType;
    revision: number;
}
export interface EnsureSnapshotResponse {
    error: Error | undefined;
    snapshot: Snapshot | undefined;
}
export interface UpdateUnitRequest {
    type: UniverType;
    unitId: string;
    name: string;
    memberId: string;
}
export interface UpdateUnitResponse {
    error: Error | undefined;
}
export interface CreateUnitRequest {
    type: UniverType;
    name: string;
    creator: string;
    locale: string;
    snapshot: Snapshot | undefined;
    templateID: string;
    customCell?: CustomCellTemplate | undefined;
    initialSheets: InitialSheet[];
    docContent: string;
    preCreateUnitId: string;
    workbookDataJson: string;
    /** univer ai for exchange */
    table?: SheetTable | undefined;
}
export interface CreateUnitResponse {
    error: Error | undefined;
    unitID: string;
    sheetOrder: string[];
}
export interface SaveChangesetRequest {
    changeset: Changeset | undefined;
    type: UniverType;
    originChangeset: Changeset | undefined;
}
export interface SaveChangesetResponse {
    error: Error | undefined;
    /** concurrent is the changesets need to follow up. */
    concurrent: Changeset[];
}
export interface GetLatestCsReqIdBySidRequest {
    sid: string;
    unitID: string;
    userID: string;
}
export interface GetLatestCsReqIdBySidResponse {
    /** set to default -1 if has no sid yet */
    latestReqID: number;
    error: Error | undefined;
}
export interface FetchMissingChangesetsRequest {
    /** unitID of the Univer document */
    unitID: string;
    type: UniverType;
    /** exclude from revision, will return (from, latest] */
    from: number;
    /** include to revision, if to == 0 , will return (from, +inf] */
    to: number;
}
export interface FetchMissingChangesetsResponse {
    error: Error | undefined;
    changesets: Changeset[];
    latestRevision?: number | undefined;
}
export interface SaveSnapshotRequest {
    unitID: string;
    type: UniverType;
    snapshot: Snapshot | undefined;
}
export interface SaveSnapshotResponse {
    error: Error | undefined;
}
export interface GetSnapshotRequest {
    unitID: string;
    type: UniverType;
    revision: number;
}
export interface GetSnapshotResponse {
    error: Error | undefined;
    snapshot: Snapshot | undefined;
}
export interface GetUnitOnRevRequest {
    unitID: string;
    type: UniverType;
    revision: number;
}
export interface GetUnitOnRevResponse {
    error: Error | undefined;
    /** the snapshot closest to revision */
    snapshot: Snapshot | undefined;
    /** the changesets need to follow up */
    changesets: Changeset[];
}
export interface SaveSheetBlockRequest {
    unitID: string;
    type: UniverType;
    /** no data */
    block: SheetBlock | undefined;
    fileID?: string | undefined;
}
export interface SaveSheetBlockResponse {
    error: Error | undefined;
    blockID: string;
}
export interface GetSheetBlockRequest {
    unitID: string;
    type: UniverType;
    /** string sheetID = 3; */
    blockID: string;
}
export interface GetSheetBlockResponse {
    error: Error | undefined;
    block: SheetBlock | undefined;
}
export interface GetResourcesRequest {
    unitID: string;
    type: UniverType;
    resourceIDs: string[];
}
export interface GetResourcesResponse {
    error: Error | undefined;
    /** key is resource id */
    resources: {
        [key: string]: Resource;
    };
}
export interface GetResourcesResponse_ResourcesEntry {
    key: string;
    value: Resource | undefined;
}
export interface ListUnitsRequest {
    type: UniverType;
    nextCursor: string;
}
export interface ListUnitsResponse {
    error: Error | undefined;
    units: Unit[];
    nextCursor: string;
}
export interface DeleteUnitsRequest {
    unitIds: string[];
}
export interface DeleteUnitsResponse {
    error: Error | undefined;
}
export interface SheetTable {
    /** key: table-id */
    tables: {
        [key: string]: TableInfo;
    };
}
export interface SheetTable_TablesEntry {
    key: string;
    value: TableInfo | undefined;
}
export interface SnapshotService {
    CreateUnit(request: CreateUnitRequest, metadata?: Metadata): Observable<CreateUnitResponse>;
    UpdateUnit(request: UpdateUnitRequest, metadata?: Metadata): Observable<UpdateUnitResponse>;
    ListUnits(request: ListUnitsRequest, metadata?: Metadata): Observable<ListUnitsResponse>;
    DeleteUnits(request: DeleteUnitsRequest, metadata?: Metadata): Observable<DeleteUnitsResponse>;
    SaveChangeset(request: SaveChangesetRequest, metadata?: Metadata): Observable<SaveChangesetResponse>;
    GetLatestCsReqIdBySid(request: GetLatestCsReqIdBySidRequest, metadata?: Metadata): Observable<GetLatestCsReqIdBySidResponse>;
    FetchMissingChangesets(request: FetchMissingChangesetsRequest, metadata?: Metadata): Observable<FetchMissingChangesetsResponse>;
    /**
     * Save a snapshot to the database. If the snapshot of the unit at a given revision is already
     * saved, the request will be ignored.
     */
    SaveSnapshot(request: SaveSnapshotRequest, metadata?: Metadata): Observable<SaveSnapshotResponse>;
    /** Update a snapshot to the database. */
    UpdateSnapshot(request: SaveSnapshotRequest, metadata?: Metadata): Observable<SaveSnapshotResponse>;
    GetSnapshot(request: GetSnapshotRequest, metadata?: Metadata): Observable<GetSnapshotResponse>;
    SaveSheetBlock(request: SaveSheetBlockRequest, metadata?: Metadata): Observable<SaveSheetBlockResponse>;
    GetSheetBlock(request: GetSheetBlockRequest, metadata?: Metadata): Observable<GetSheetBlockResponse>;
    GetUnitOnRev(request: GetUnitOnRevRequest, metadata?: Metadata): Observable<GetUnitOnRevResponse>;
    GetResources(request: GetResourcesRequest, metadata?: Metadata): Observable<GetResourcesResponse>;
    EnsureSnapshot(request: EnsureSnapshotRequest, metadata?: Metadata): Observable<EnsureSnapshotResponse>;
    /** Directly write a changeset with a user's identification to the document. */
    DirectWrite(request: DirectWriteRequest, metadata?: Metadata): Observable<DirectWriteResponse>;
    CopyFileMeta(request: CopyFileMetaRequest, metadata?: Metadata): Observable<CopyFileMetaResponse>;
    ForkUnit(request: ForkUnitRequest, metadata?: Metadata): Observable<ForkUnitResponse>;
    /** get table info */
    GetSheetTableInfo(request: GetSheetTableInfoRequest, metadata?: Metadata): Observable<GetSheetTableInfoResponse>;
    /** get table data */
    GetSheetTable(request: GetSheetTableRequest, metadata?: Metadata): Observable<GetSheetTableResponse>;
    /** get unit meta */
    GetUnitMeta(request: GetUnitMetaRequest, metadata?: Metadata): Observable<GetUnitMetaResponse>;
    /** 获取公式计算结果 */
    GetSnapshotMetaWithPreCalculated(request: GetSnapshotMetaWithPreCalculatedRequest, metadata?: Metadata): Observable<GetSnapshotMetaWithPreCalculatedResponse>;
}
