function _0x4961(){const _0xb5c530=['pipe','_collaborationController','getUniverSheet','getUnitId','440371huDbdf','994675fuAJSm','2484084fEjBSV','4154367HRhveH','members$','loadSheetAsync','_univerInstanceService','loadActiveSheetAsync','values','55948zAKBwb','_handler','subscribe','CollaborationStatus','7098904WiPPnw','_injector','getCollabEntity','subscribeCollaborators','from','readyForCollab','loadServerUnit','loadServerUnitOfRevision','getFocusedUnit','extend','_snapshotService','13131AcApej','getOwnPropertyDescriptor','loadUnit','get','NOT_COLLAB','state','createInstance','22blGeto'];_0x4961=function(){return _0xb5c530;};return _0x4961();}const _0x15740e=_0x120a;(function(_0x4e8693,_0x55f634){const _0x29689c=_0x120a,_0x550877=_0x4e8693();while(!![]){try{const _0x68d460=parseInt(_0x29689c(0x18a))/0x1+parseInt(_0x29689c(0x185))/0x2*(-parseInt(_0x29689c(0x17e))/0x3)+-parseInt(_0x29689c(0x16f))/0x4+-parseInt(_0x29689c(0x18b))/0x5+parseInt(_0x29689c(0x18c))/0x6+parseInt(_0x29689c(0x18d))/0x7+-parseInt(_0x29689c(0x173))/0x8;if(_0x68d460===_0x55f634)break;else _0x550877['push'](_0x550877['shift']());}catch(_0x3d22da){_0x550877['push'](_0x550877['shift']());}}}(_0x4961,0x491aa));import{CollaborationStatus as _0x219db2,CollaborationController as _0x3e5327,MemberService as _0x16a820,DataLoaderService as _0x7efde2}from'@univerjs-pro/collaboration-client';import{FEnum as _0x82dda3,FBase as _0x3f2b4c,FUniver as _0x1b2d4f}from'@univerjs/core/facade';import{SnapshotService as _0x383276}from'@univerjs-pro/collaboration';import{Inject as _0x2e9bc0,Injector as _0x14f3d7,IUniverInstanceService as _0x374d5c,toDisposable as _0x315301}from'@univerjs/core';import{switchMap as _0x347046}from'rxjs';class y extends _0x82dda3{get[_0x15740e(0x172)](){return _0x219db2;}}_0x82dda3[_0x15740e(0x17c)](y);var U=Object[_0x15740e(0x17f)],w=(_0x5f2e08,_0x4c7533,_0x3c69ce,_0x3089a8)=>{for(var _0x556b56=_0x3089a8>0x1?void 0x0:_0x3089a8?U(_0x4c7533,_0x3c69ce):_0x4c7533,_0x4d669f=_0x5f2e08['length']-0x1,_0xaab07a;_0x4d669f>=0x0;_0x4d669f--)(_0xaab07a=_0x5f2e08[_0x4d669f])&&(_0x556b56=_0xaab07a(_0x556b56)||_0x556b56);return _0x556b56;},a=(_0x2fa675,_0x3805a8)=>(_0x180a83,_0xe09b98)=>_0x3805a8(_0x180a83,_0xe09b98,_0x2fa675);let c=class extends _0x3f2b4c{constructor(_0x2731f7,_0x1b58d6,_0x192238,_0x4f4275,_0x383086){const _0x3c0d7e=_0x15740e;super(),this['_handler']=_0x2731f7,this[_0x3c0d7e(0x174)]=_0x1b58d6,this[_0x3c0d7e(0x16c)]=_0x192238,this[_0x3c0d7e(0x17d)]=_0x4f4275,this['_collaborationController']=_0x383086;}async['loadActiveSheet'](){const _0x31d1ca=_0x15740e;return this[_0x31d1ca(0x16d)]();}async[_0x15740e(0x16d)](){throw new Error('[FCollaboration]:\x20this\x20method\x20should\x20be\x20override.');}async['loadSheet'](_0x3c6ced){const _0x1648f2=_0x15740e;return this[_0x1648f2(0x16b)](_0x3c6ced);}async[_0x15740e(0x16b)](_0x349f12,_0x4044d0){const _0x574ace=_0x15740e;return await this[_0x574ace(0x17d)]['loadSheet'](_0x349f12,0x0,_0x4044d0)?(await this[_0x574ace(0x187)][_0x574ace(0x178)](_0x349f12),this[_0x574ace(0x170)][_0x574ace(0x188)](_0x349f12)):null;}[_0x15740e(0x176)](_0x498bbb,_0x171644){const _0x4d767c=_0x15740e,_0x47fec0=this[_0x4d767c(0x174)][_0x4d767c(0x181)](_0x16a820)['waitForRoom$'](_0x498bbb)[_0x4d767c(0x186)](_0x347046(_0x472459=>_0x472459[_0x4d767c(0x18e)]))[_0x4d767c(0x171)](_0x4658a4=>_0x171644(Array[_0x4d767c(0x177)](_0x4658a4[_0x4d767c(0x16e)]())));return _0x315301(_0x47fec0);}['getCollaborationStatus'](){const _0x299380=_0x15740e,_0x1ba183=this['_univerInstanceService'][_0x299380(0x17b)]();if(!_0x1ba183)return _0x219db2[_0x299380(0x182)];const _0x568d42=this[_0x299380(0x187)][_0x299380(0x175)](_0x1ba183[_0x299380(0x189)]());return _0x568d42?_0x568d42[_0x299380(0x183)]['status']:_0x219db2[_0x299380(0x182)];}};c=w([a(0x1,_0x2e9bc0(_0x14f3d7)),a(0x2,_0x374d5c),a(0x3,_0x2e9bc0(_0x383276)),a(0x4,_0x2e9bc0(_0x3e5327))],c);class A extends _0x1b2d4f{['getCollaboration'](){const _0x7660a4=_0x15740e;return this['_injector'][_0x7660a4(0x184)](c,{'getUniverSheet':_0x166109=>this[_0x7660a4(0x188)](_0x166109)});}[_0x15740e(0x179)](_0xe2d10d,_0x146646,_0x17b479){const _0x34cdae=_0x15740e;return this[_0x34cdae(0x174)][_0x34cdae(0x181)](_0x7efde2)[_0x34cdae(0x180)](_0xe2d10d,_0x146646,_0x17b479);}[_0x15740e(0x17a)](_0xe34af2,_0x57df9d,_0x8572aa){const _0x17a681=_0x15740e;return this[_0x17a681(0x174)][_0x17a681(0x181)](_0x7efde2)['loadUnitOfRevision'](_0xe34af2,_0x57df9d,_0x8572aa);}}function _0x120a(_0x191532,_0x1b2b99){_0x191532=_0x191532-0x16b;const _0x4961b8=_0x4961();let _0x120a69=_0x4961b8[_0x191532];return _0x120a69;}_0x1b2d4f[_0x15740e(0x17c)](A);export{c as FCollaboration};