import { IChartSnapshot, ChartTypeBits, DataOrientation } from '@univerjs-pro/engine-chart';
import { SheetChartModel } from '../models/chart-model';
import { ISheetChartDataSource, ISheetChartSourceRanges } from '../models/types';
import { Disposable, ICommandService, IResourceManagerService, IUniverInstanceService } from '@univerjs/core';
import { RefRangeService } from '@univerjs/sheets';
import { ChartModelService } from './chart-model.service';
export declare const SHEET_CHART_PLUGIN = "SHEET_CHART_PLUGIN";
export interface ISheetChartSnapshot extends IChartSnapshot {
    rangeInfo: ISheetChartSourceRanges;
}
type OptionalProperties<T, K extends keyof T> = Omit<T, K> & {
    [P in K]+?: T[P];
};
export type ISheetChartModelOptions = OptionalProperties<ISheetChartSnapshot, 'id' | 'chartType'>;
export interface ISheetsChartResource {
    [sheetId: string]: ISheetChartSnapshot[];
}
export declare class SheetsChartService extends Disposable {
    private readonly _resourcesManagerService;
    private readonly _refRangeService;
    private readonly _univerInstanceService;
    private readonly _chartModelService;
    private readonly _commandService;
    private _chartModelIdMap;
    private _dataSourceMap;
    private _hasLoaded;
    constructor(_resourcesManagerService: IResourceManagerService, _refRangeService: RefRangeService, _univerInstanceService: IUniverInstanceService, _chartModelService: ChartModelService, _commandService: ICommandService);
    setLoaded(): void;
    getUnitChartModels(unitId: string, subUnitId: string): (SheetChartModel | undefined)[];
    getChartSuggestion(rangeInfo: ISheetChartSourceRanges): {
        orient: DataOrientation;
        chartType: ChartTypeBits;
    };
    ensureChartModelCollection(unitId: string, subUnitId: string): Set<string>;
    getChartDataSource(id: string): ISheetChartDataSource | undefined;
    setChartDataSource(id: string, dataSource: ISheetChartDataSource): void;
    refreshChartSource(): void;
    createChartModel(unitId: string, subUnitId: string, options: ISheetChartModelOptions, isNew?: boolean): SheetChartModel;
    removeChartModel(id: string): void;
    getChartModel(id: string): SheetChartModel | undefined;
    private _serializeChartForUnit;
    watchRange(chartModel: SheetChartModel): {
        dispose: () => void;
    };
    private _updateChartRangeAndContext;
    private _deserializeChartForUnit;
    private _initSnapshot;
    dispose(): void;
}
export {};
