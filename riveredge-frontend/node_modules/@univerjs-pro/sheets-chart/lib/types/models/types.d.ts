import { ChartTypeBits, IChartConfig, IChartData, IChartDataSource } from '@univerjs-pro/engine-chart';
import { IRange } from '@univerjs/core';
import { Observable } from 'rxjs';
import type * as ECharts from 'echarts';
export type EChartsOption = ECharts.EChartsOption;
export type DatasetOption = ECharts.DatasetComponentOption;
export interface IDimensionDefinition {
    type?: 'number' | 'ordinal' | 'time' | 'float' | 'int';
    name?: string;
    displayName?: string;
}
export type DimensionDefinitionLoose = IDimensionDefinition['name'] | IDimensionDefinition;
export type OptionDataValue = string | number | Date | null | undefined;
export interface IUniverDataSet {
    source: OptionDataValue[][];
    dimensions: Array<DimensionDefinitionLoose>;
}
export interface IChartSourceRangeItem {
    range: IRange;
    subUnitId: string;
    unitId: string;
}
export type IChartSourceMultiRangeItem = [IChartSourceRangeItem, IChartSourceRangeItem];
/**
 * @description
 * the chart source range maybe a single range or a multi ranges
 * if the range is a single range, it is a IUnitRangeNameWithSubUnitId
 * if the range is a multi ranges, it is a array of IChartSourceMultiRangeItem, which is a tuple of two IUnitRangeName
 * one is the dimension range, the other is the value range
 */
export type ISheetChartSourceRanges = ISheetChartSourceSingleRange | IChartSourceMultiRangeItem[];
export interface ISheetChartSourceSingleRange {
    rangeInfo: IChartSourceRangeItem;
    isRowDirection?: boolean;
}
export interface ISheetChartDataSource extends IChartDataSource {
    /**
     * the dataset of the chart, it should match echarts dataset option
     */
    data$: Observable<IUniverDataSet>;
    /**
     * can switch the orient of the data, only single range or multi range all range has same value length can switch
     */
    canSwitchOrient$: Observable<boolean>;
    /**
     * the range info of the chart source
     */
    rangeInfo$: Observable<ISheetChartSourceRanges>;
    /**
     * update the range info of the chart source
     */
    convertDataSet(): IUniverDataSet;
    updateRangeInfo(rangeInfo: ISheetChartSourceSingleRange | IChartSourceMultiRangeItem[]): void;
    watchRange(): void;
    canSwitchOrient(): boolean;
    dispose(): void;
    getRangeInfo(): ISheetChartSourceSingleRange | IChartSourceMultiRangeItem[];
    setRangeInfo(rangeInfo: ISheetChartSourceSingleRange | IChartSourceMultiRangeItem[]): void;
    setOrient(flag: boolean): void;
    getDataSet(): IUniverDataSet;
    getDimensionCount(): number;
    refresh(): void;
}
export interface IChartConfigConverter {
    canConvert(type: ChartTypeBits): boolean;
    convert(type: ChartTypeBits, data: IChartData): IChartConfig;
}
