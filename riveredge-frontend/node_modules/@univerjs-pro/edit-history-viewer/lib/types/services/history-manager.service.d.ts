import { IHistoryVersion, IUser, HistoryFetchService } from './history-fetch.service';
import { Disposable, LocaleService } from '@univerjs/core';
import { IConfirmService, IMessageService } from '@univerjs/ui';
export declare enum HistoryModeStatus {
    Entered = "entered",
    Exited = "exited",
    Error = "error"
}
export declare enum LoadingState {
    Init = "init",
    Loading = "loading",
    Loaded = "loaded"
}
export declare const VIRTUAL_VERSION_NOW = "VIRTUAL_VERSION_NOW";
export declare class HistoryManagerService extends Disposable {
    private readonly _messageService;
    private readonly _confirmService;
    private readonly _localeService;
    private readonly _historyFetchService;
    private _versions$;
    readonly versions$: import('rxjs').Observable<IHistoryVersion[]>;
    private _currentVersion$;
    readonly currentVersion$: import('rxjs').Observable<string>;
    private _status$;
    readonly status$: import('rxjs').Observable<HistoryModeStatus>;
    private _revertRevision$;
    readonly revertRevision$: import('rxjs').Observable<number>;
    private _unitId$;
    readonly unitId$: import('rxjs').Observable<string | null>;
    private _fetching;
    private _loadingState$;
    readonly loadingState$: import('rxjs').Observable<LoadingState>;
    private _lastLabel;
    private _hasMore;
    private _members;
    private _historyContainerId;
    private _maskContainer;
    private _maskElement;
    private _canRevert;
    constructor(_messageService: IMessageService, _confirmService: IConfirmService, _localeService: LocaleService, _historyFetchService: HistoryFetchService);
    triggerLoadVersions(unitId: string, containerId: string, canRevert: boolean): Promise<void>;
    loadMoreVersions(): Promise<boolean>;
    triggerLoadSheet(versionId: string): Promise<void>;
    triggerRevert(id?: string): Promise<void>;
    private _updateVersions;
    getCurrentVersion(): IHistoryVersion | undefined;
    getVersion(id: string): IHistoryVersion | undefined;
    getMember(id: string): IUser | undefined;
    private _createMask;
    private _initMaskContainer;
    showMask(): void;
    hideMask(): void;
    set status(value: HistoryModeStatus);
    set currentVersion(value: string);
    get currentVersion(): string;
    set unitId(value: string | null);
    get unitId(): string | null;
    get canRevert(): boolean;
    get loadingState(): LoadingState;
}
