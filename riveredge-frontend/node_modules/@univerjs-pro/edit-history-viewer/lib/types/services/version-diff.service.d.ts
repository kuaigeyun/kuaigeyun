import { IMutationInfo, IRange, Disposable } from '@univerjs/core';
import { ISnapshotServerService, ITransformService } from '@univerjs-pro/collaboration';
import { HistoryManagerService } from './history-manager.service';
export interface ISheetRange {
    unitId: string;
    subUnitId: string;
    range: IRange;
}
export interface IVersionDiff {
    ranges: Map<string, ISheetRange[]>;
    active: string | null;
}
export interface IMutationInfoWithMemberId extends IMutationInfo {
    memberId: string;
}
export declare class VersionDiffService extends Disposable {
    private readonly _historyManagerService;
    private readonly _transformService;
    private readonly _snapshotServerService;
    private _diffRangesMap;
    private _currentVersionDiff$;
    readonly currentVersionDiff$: import('rxjs').Observable<IVersionDiff>;
    constructor(_historyManagerService: HistoryManagerService, _transformService: ITransformService, _snapshotServerService: ISnapshotServerService);
    private _init;
    ensureVersion(versionId: string): Promise<void>;
    private _transformMutationByOrder;
    private _getActiveSubUnitId;
    private _extractRanges;
    private _getRangesByMutation;
    private _combineRanges;
}
