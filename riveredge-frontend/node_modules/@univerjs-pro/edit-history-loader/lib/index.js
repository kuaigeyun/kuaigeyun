function _0x31aa(_0x2fd4fc,_0x553682){_0x2fd4fc=_0x2fd4fc-0x1d5;const _0x53624e=_0x5362();let _0x31aad7=_0x53624e[_0x2fd4fc];return _0x31aad7;}const _0x2db0f7=_0x31aa;(function(_0x2367dd,_0x139e89){const _0x31e4eb=_0x31aa,_0xa15bbf=_0x2367dd();while(!![]){try{const _0x338174=-parseInt(_0x31e4eb(0x1f0))/0x1*(parseInt(_0x31e4eb(0x241))/0x2)+-parseInt(_0x31e4eb(0x1dd))/0x3*(parseInt(_0x31e4eb(0x212))/0x4)+-parseInt(_0x31e4eb(0x226))/0x5+-parseInt(_0x31e4eb(0x268))/0x6*(parseInt(_0x31e4eb(0x1df))/0x7)+-parseInt(_0x31e4eb(0x252))/0x8+parseInt(_0x31e4eb(0x246))/0x9*(-parseInt(_0x31e4eb(0x22b))/0xa)+-parseInt(_0x31e4eb(0x24f))/0xb*(-parseInt(_0x31e4eb(0x238))/0xc);if(_0x338174===_0x139e89)break;else _0xa15bbf['push'](_0xa15bbf['shift']());}catch(_0x4a74ea){_0xa15bbf['push'](_0xa15bbf['shift']());}}}(_0x5362,0xd0334));function _0x5362(){const _0x4e53ce=['UNIVER_UNKNOWN','location','substring','OPERATION','forEach','historyUniver','style','assign','_localCacheService','exhaustSavingTask','54108PVpXmu','toString','M0\x200H16V16H0z','_config','random','history-icon_clip0_907_281','history-icon','onStarting','setConfig','2ukTrff','historyListServerUrl','show','_initUniver','path','2486142BYyKws','registerCommand','M4.45388\x204.14989H3.52896C4.61144\x202.8939\x206.21319\x202.0999\x207.9999\x202.0999C11.2584\x202.0999\x2013.8999\x204.74142\x2013.8999\x207.9999C13.8999\x2011.2584\x2011.2584\x2013.8999\x207.9999\x2013.8999C4.74142\x2013.8999\x202.0999\x2011.2584\x202.0999\x207.9999C2.0999\x207.66853\x201.83127\x207.3999\x201.4999\x207.3999C1.16853\x207.3999\x200.899902\x207.66853\x200.899902\x207.9999C0.899902\x2011.9211\x204.07868\x2015.0999\x207.9999\x2015.0999C11.9211\x2015.0999\x2015.0999\x2011.9211\x2015.0999\x207.9999C15.0999\x204.07868\x2011.9211\x200.899902\x207.9999\x200.899902C5.88709\x200.899902\x203.9903\x201.82298\x202.69023\x203.28636V2.38625C2.69023\x202.05488\x202.42161\x201.78625\x202.09023\x201.78625C1.75886\x201.78625\x201.49023\x202.05488\x201.49023\x202.38625V4.74989C1.49023\x205.08126\x201.75886\x205.34989\x202.09023\x205.34989H4.45388C4.78525\x205.34989\x205.05388\x205.08126\x205.05388\x204.74989C5.05388\x204.41851\x204.78525\x204.14989\x204.45388\x204.14989Z','register','replace','getSubunitRuleList','display','univer-history-container','div','11869pjxgba','event$','getAllPlugins','3353272LxzMhV','editHistory.panel.revertFailed','svg','_permissionService','createElement','tag','type','url(#history-icon_clip0_907_281)','top','__getInjector','editHistory.panel.listFetchError','registerPlugin','_menuManagerService','trim','left','next','1000','Loading','_init','currentTheme$','has','_dialogService','8415834OYeDLd','asObservable','_collaborationController','subscribe','invoke','absolute','OTHERS','mountHistoryContent','_initContainer','getOwnPropertyDescriptor','mergeMenu','mask','getUnit','none','univerContainerId','editHistory.panel.title','closeAll','string','set','UNIVER_CONTAINER_ID','_messageService','length','status$','setDarkMode','attrs','editHistory.panel.reverting','state$','status','univerjs-icon\x20univerjs-icon-','dispose','zIndex','getCollabEntity','displayName','3BjaEkk','Error','7CmgIeJ','includes','_selectionProtectionRuleModel','_themeService','_sidebarService','getConfig','_disposableCollection','UNIVER_EDIT_HISTORY_LOADER_PLUGIN','value','setLocale','dataset','mutations','unsubscribe','fill','getCurrentLocale','_localeService','some','404593psfswo','values','close','data','_configService','_injector','map','_pluginMap','UNIVER_SHEET','history-container','100%','entries','_revertErrorTimer','unMountHistoryContent','reload','session','univer.operation.toggle-edit-history','get','HistoryIcon','idSuffix','\x20has\x20been\x20registered.','CHANGESET_ACK','currentColor','SYNCED','url(#$1','getElementById','height','_checkCanRevert','eventID','_univerInstanceService','pluginName','xlink:href','onCommandExecuted','colorChannel1','1595740GFZibp','1em','_initListener','_historyUniver$','disposeWithMe','defIds','_componentManager','darkMode$','permissionId','Exited','width','setTheme','composePermission','getLocales','children','flat','M8.28291\x205.16293C8.28295\x204.83156\x208.01435\x204.5629\x207.68298\x204.56287C7.35161\x204.56283\x207.08295\x204.83143\x207.08291\x205.1628L7.08252\x208.63494C7.0825\x208.79881\x207.1495\x208.95555\x207.26796\x209.06877L9.70073\x2011.3939C9.94029\x2011.6228\x2010.3201\x2011.6142\x2010.549\x2011.3747C10.778\x2011.1351\x2010.7694\x2010.7553\x2010.5298\x2010.5263L8.28255\x208.37852L8.28291\x205.16293Z','_historyManagerService','onSteady','add','2791915KElAcJ','clipPath','clear','http://www.w3.org/2000/svg','_commandService','30PtBzIw','edit-history-loader.config','0\x200\x2016\x2016'];_0x5362=function(){return _0x4e53ce;};return _0x5362();}var G=Object['defineProperty'],B=(_0x1acb5a,_0x372dac,_0x49c4d9)=>_0x372dac in _0x1acb5a?G(_0x1acb5a,_0x372dac,{'enumerable':!0x0,'configurable':!0x0,'writable':!0x0,'value':_0x49c4d9}):_0x1acb5a[_0x372dac]=_0x49c4d9,g=(_0x2fe2fa,_0x56c420,_0xea2a3e)=>B(_0x2fe2fa,typeof _0x56c420!='symbol'?_0x56c420+'':_0x56c420,_0xea2a3e);import{Inject as _0x21b45d,LocaleService as _0x368e92,IUniverInstanceService as _0xdf5baf,IConfigService as _0x335e48,ICommandService as _0x32b4ba,IPermissionService as _0x1c5b74,ThemeService as _0x5bb364,Disposable as _0x15f9bb,DisposableCollection as _0x56663f,Univer as _0x577e42,IAuthzIoService as _0x945c03,CommandType as _0x129f65,UniverInstanceType as _0x5aebf6,RxDisposable as _0x518e69,toDisposable as _0x579c2d,Plugin as _0x3c5c5b,merge as _0x291300,Injector as _0x3cc0a6}from'@univerjs/core';import{UniverCollaborationPlugin as _0x2e819d,RevertRevisionMutation as _0x11d831,CollaborationEvent as _0x561da0}from'@univerjs-pro/collaboration';import{AuthzIoHttpService as _0x31ffaf,COLLABORATION_CLIENT_PLUGIN_CONFIG_KEY as _0x583645,CollaborationController as _0xd62969,ILocalCacheService as _0x3bee7c,CollaborationStatus as _0x4d5511}from'@univerjs-pro/collaboration-client';import{MessageType as _0x12c38f}from'@univerjs/design';import{useRef as _0x1f19a6,createElement as _0x221eaf,forwardRef as _0x946c4e}from'react';import{IMessageService as _0x5343e4,IDialogService as _0x5387ff,ISidebarService as _0x45d122,UniverUIPlugin as _0xc43ff6,getMenuHiddenObservable as _0x3323dd,MenuItemType as _0x211562,RibbonStartGroup as _0x471df4,IMenuManagerService as _0x458da5,ComponentManager as _0x236294}from'@univerjs/ui';import{BehaviorSubject as _0x5ad379,combineLatest as _0x840415}from'rxjs';import{RangeProtectionRuleModel as _0x5aed72,UniverSheetsPlugin as _0x54080a,WorkbookEditablePermission as _0x1459ec,WorksheetEditPermission as _0xb351dc,RangeProtectionPermissionEditPoint as _0x2bede3,WorkbookRecoverHistoryPermission as _0x29921b,getSheetCommandTarget as _0x25ce28,WorkbookViewHistoryPermission as _0x4abcf9}from'@univerjs/sheets';import{UniverEditHistoryViewerPlugin as _0x4f35b2,HistoryManagerService as _0x3c2597,HistoryModeStatus as _0x42760a}from'@univerjs-pro/edit-history-viewer';import{LS_CONFIG_KEY as _0x114302,UniverLicensePlugin as _0x1b30a5}from'@univerjs-pro/license';import{UniverSheetsChartPlugin as _0x8c0e5d}from'@univerjs-pro/sheets-chart';import{UniverSheetsChartUIPlugin as _0x218af7}from'@univerjs-pro/sheets-chart-ui';import{UniverSheetsPivotTablePlugin as _0x21a4e0}from'@univerjs-pro/sheets-pivot';import{UniverSheetSparklinePlugin as _0x26f54b}from'@univerjs-pro/sheets-sparkline';import{UniverSheetSparklineUIPlugin as _0x3b9d9d}from'@univerjs-pro/sheets-sparkline-ui';import{UniverDataValidationPlugin as _0x2c67b9}from'@univerjs/data-validation';import{UniverDocsPlugin as _0x3ed651}from'@univerjs/docs';import{UniverDocsUIPlugin as _0x3dd627}from'@univerjs/docs-ui';import{UniverDrawingPlugin as _0xf21ae,IImageIoService as _0x5239ce}from'@univerjs/drawing';import{UniverDrawingUIPlugin as _0x3c18c0}from'@univerjs/drawing-ui';import{UniverFormulaEnginePlugin as _0x5d0a51}from'@univerjs/engine-formula';import{UniverRenderEnginePlugin as _0x48f299}from'@univerjs/engine-render';import{UniverNetworkPlugin as _0x49f5e6}from'@univerjs/network';import{UniverRPCMainThreadPlugin as _0x42dbfb}from'@univerjs/rpc';import{UniverSheetsConditionalFormattingPlugin as _0x3f0aeb}from'@univerjs/sheets-conditional-formatting';import{UniverSheetsConditionalFormattingUIPlugin as _0x34a522}from'@univerjs/sheets-conditional-formatting-ui';import{UniverSheetsDataValidationPlugin as _0x418d2c}from'@univerjs/sheets-data-validation';import{UniverSheetsDataValidationUIPlugin as _0x81d315}from'@univerjs/sheets-data-validation-ui';import{UniverSheetsDrawingPlugin as _0x83a463}from'@univerjs/sheets-drawing';import{UniverSheetsDrawingUIPlugin as _0xcdbfd1}from'@univerjs/sheets-drawing-ui';import{UniverSheetsFilterPlugin as _0x42d867}from'@univerjs/sheets-filter';import{UniverSheetsFilterUIPlugin as _0x5ed04d}from'@univerjs/sheets-filter-ui';import{UniverSheetsFormulaPlugin as _0x3847bb}from'@univerjs/sheets-formula';import{UniverSheetsFormulaUIPlugin as _0x5c5426}from'@univerjs/sheets-formula-ui';import{UniverSheetsHyperLinkPlugin as _0xcc5f13}from'@univerjs/sheets-hyper-link';import{UniverSheetsHyperLinkUIPlugin as _0x432264}from'@univerjs/sheets-hyper-link-ui';import{UniverSheetsNumfmtPlugin as _0x291c8a}from'@univerjs/sheets-numfmt';import{UniverSheetsUIPlugin as _0x510c8e,getCurrentRangeDisable$ as _0x53d413}from'@univerjs/sheets-ui';const x=_0x2db0f7(0x22c),w={};function A({ref:_0x5cc039,..._0x1372eb}){const _0x2e6d3f=_0x2db0f7,{icon:_0xcda0e2,id:_0x14810e,className:_0x1157ad,extend:_0x48bfa9,..._0x271f1b}=_0x1372eb,_0x255746=(_0x2e6d3f(0x1d8)+_0x14810e+'\x20'+(_0x1157ad||''))[_0x2e6d3f(0x25f)](),_0x5954d3=_0x1f19a6('_'+ci());return F(_0xcda0e2,''+_0x14810e,{'defIds':_0xcda0e2[_0x2e6d3f(0x217)],'idSuffix':_0x5954d3['current']},{'ref':_0x5cc039,'className':_0x255746,..._0x271f1b},_0x48bfa9);}function F(_0x5349df,_0x17615d,_0x416d90,_0x39b4b4,_0x4b3cb6){const _0x2c84d0=_0x2db0f7;return _0x221eaf(_0x5349df[_0x2c84d0(0x257)],{'key':_0x17615d,...si(_0x5349df,_0x416d90,_0x4b3cb6),..._0x39b4b4},(ai(_0x5349df,_0x416d90)[_0x2c84d0(0x220)]||[])[_0x2c84d0(0x1f6)]((_0x3e0010,_0x3152e9)=>F(_0x3e0010,_0x17615d+'-'+_0x5349df[_0x2c84d0(0x257)]+'-'+_0x3152e9,_0x416d90,void 0x0,_0x4b3cb6)));}function si(_0x1abbc7,_0x2e6db7,_0x7be053){const _0x228623=_0x2db0f7,_0x49047f={..._0x1abbc7['attrs']};_0x7be053!=null&&_0x7be053[_0x228623(0x211)]&&_0x49047f[_0x228623(0x1ec)]===_0x228623(0x211)&&(_0x49047f[_0x228623(0x1ec)]=_0x7be053[_0x228623(0x211)]),_0x1abbc7[_0x228623(0x257)]===_0x228623(0x273)&&_0x49047f['id']&&(_0x49047f['id']=_0x49047f['id']+_0x2e6db7[_0x228623(0x203)]),Object[_0x228623(0x1fb)](_0x49047f)[_0x228623(0x232)](([_0x40e8b3,_0x507f6d])=>{const _0x53a722=_0x228623;_0x40e8b3==='mask'&&typeof _0x507f6d==_0x53a722(0x279)&&(_0x49047f[_0x40e8b3]=_0x507f6d[_0x53a722(0x24a)](/url\(#(.*)\)/,_0x53a722(0x208)+_0x2e6db7[_0x53a722(0x203)]+')'));});const {defIds:_0x196246}=_0x2e6db7;return!_0x196246||_0x196246[_0x228623(0x27d)]===0x0||(_0x1abbc7[_0x228623(0x257)]==='use'&&_0x49047f['xlink:href']&&(_0x49047f[_0x228623(0x20f)]=_0x49047f[_0x228623(0x20f)]+_0x2e6db7[_0x228623(0x203)]),Object[_0x228623(0x1fb)](_0x49047f)[_0x228623(0x232)](([_0x48083d,_0x13584b])=>{const _0x59297b=_0x228623;typeof _0x13584b=='string'&&(_0x49047f[_0x48083d]=_0x13584b[_0x59297b(0x24a)](/url\(#(.*)\)/,'url(#$1'+_0x2e6db7[_0x59297b(0x203)]+')'));})),_0x49047f;}function ai(_0x4e0960,_0x41729b){const _0x4cec6a=_0x2db0f7;var _0x2f6c31;const {defIds:_0x5621f5}=_0x41729b;return!_0x5621f5||_0x5621f5[_0x4cec6a(0x27d)]===0x0?_0x4e0960:_0x4e0960[_0x4cec6a(0x257)]==='defs'&&((_0x2f6c31=_0x4e0960[_0x4cec6a(0x220)])!=null&&_0x2f6c31[_0x4cec6a(0x27d)])?{..._0x4e0960,'children':_0x4e0960[_0x4cec6a(0x220)]['map'](_0x301e45=>typeof _0x301e45[_0x4cec6a(0x280)]['id']==_0x4cec6a(0x279)&&_0x5621f5&&_0x5621f5[_0x4cec6a(0x1e0)](_0x301e45[_0x4cec6a(0x280)]['id'])?{..._0x301e45,'attrs':{..._0x301e45['attrs'],'id':_0x301e45[_0x4cec6a(0x280)]['id']+_0x41729b[_0x4cec6a(0x203)]}}:_0x301e45)}:_0x4e0960;}function ci(){const _0x554779=_0x2db0f7;return Math[_0x554779(0x23c)]()[_0x554779(0x239)](0x24)[_0x554779(0x230)](0x2,0x8);}A[_0x2db0f7(0x1dc)]='UniverIcon';const li={'tag':_0x2db0f7(0x254),'attrs':{'xmlns':_0x2db0f7(0x229),'fill':'none','viewBox':_0x2db0f7(0x22d),'width':_0x2db0f7(0x213),'height':_0x2db0f7(0x213)},'children':[{'tag':'g','attrs':{'fill':_0x2db0f7(0x206),'clipPath':_0x2db0f7(0x259)},'children':[{'tag':'path','attrs':{'d':_0x2db0f7(0x248)}},{'tag':_0x2db0f7(0x245),'attrs':{'d':_0x2db0f7(0x222)}}]},{'tag':'defs','attrs':{},'children':[{'tag':_0x2db0f7(0x227),'attrs':{'id':_0x2db0f7(0x23d)},'children':[{'tag':'path','attrs':{'fill':'white','d':_0x2db0f7(0x23a)}}]}]}],'defIds':[_0x2db0f7(0x23d)]},j=_0x946c4e(function(_0x2a5a9f,_0x4f8617){const _0x3b3aca=_0x2db0f7;return _0x221eaf(A,Object[_0x3b3aca(0x235)]({},_0x2a5a9f,{'id':_0x3b3aca(0x23e),'ref':_0x4f8617,'icon':li}));});j['displayName']=_0x2db0f7(0x202);var ui=Object[_0x2db0f7(0x271)],hi=(_0x59acec,_0x1cd3ab,_0x216253,_0x4166c5)=>{for(var _0x2ebb68=_0x4166c5>0x1?void 0x0:_0x4166c5?ui(_0x1cd3ab,_0x216253):_0x1cd3ab,_0x25b2f4=_0x59acec['length']-0x1,_0x1c0ee6;_0x25b2f4>=0x0;_0x25b2f4--)(_0x1c0ee6=_0x59acec[_0x25b2f4])&&(_0x2ebb68=_0x1c0ee6(_0x2ebb68)||_0x2ebb68);return _0x2ebb68;},l=(_0xf09bcd,_0x10f3e7)=>(_0x22cfaa,_0x12d083)=>_0x10f3e7(_0x22cfaa,_0x12d083,_0xf09bcd);const gi='univer-container',V=_0x2db0f7(0x27b),d=_0x2db0f7(0x24d);let f=class extends _0x15f9bb{constructor(_0x19f8bd,_0xe6b160,_0x29bc2b,_0x4cce94,_0xd63260,_0x31d5e5,_0x3969ff,_0x32e3b0,_0x3fe687,_0x395700){const _0x28f39d=_0x2db0f7;super(),g(this,'_historyUniver$',new _0x5ad379(null)),g(this,'historyUniver$',this['_historyUniver$'][_0x28f39d(0x269)]()),g(this,_0x28f39d(0x1e5),new _0x56663f()),g(this,_0x28f39d(0x1f7),new Map()),(this[_0x28f39d(0x1ee)]=_0x19f8bd,this[_0x28f39d(0x20d)]=_0xe6b160,this[_0x28f39d(0x1f4)]=_0x29bc2b,this['_commandService']=_0x4cce94,this['_messageService']=_0xd63260,this['_permissionService']=_0x31d5e5,this[_0x28f39d(0x1e1)]=_0x3969ff,this[_0x28f39d(0x267)]=_0x32e3b0,this[_0x28f39d(0x1e3)]=_0x3fe687,this['_themeService']=_0x395700,this[_0x28f39d(0x264)]());}get['historyUniver'](){const _0x37df9b=_0x2db0f7;return this[_0x37df9b(0x215)][_0x37df9b(0x1e7)];}['_init'](){const _0x3050eb=_0x2db0f7;this[_0x3050eb(0x270)](),this['_initPlugins']();}[_0x2db0f7(0x270)](){const _0x3f209f=_0x2db0f7;var _0x99c00a;const _0x295192=(_0x99c00a=this['_configService']['getConfig'](V))!=null?_0x99c00a:gi,_0x5565e3=document[_0x3f209f(0x209)](_0x295192);if(!_0x5565e3)return;const _0x1e830e=document[_0x3f209f(0x256)](_0x3f209f(0x24e));_0x1e830e['id']=d,_0x1e830e[_0x3f209f(0x1e9)]['uComp']=_0x3f209f(0x1f9),_0x1e830e[_0x3f209f(0x234)]['position']=_0x3f209f(0x26d),_0x1e830e['style'][_0x3f209f(0x25a)]='0',_0x1e830e[_0x3f209f(0x234)][_0x3f209f(0x260)]='0',_0x1e830e[_0x3f209f(0x234)][_0x3f209f(0x21c)]='100%',_0x1e830e[_0x3f209f(0x234)][_0x3f209f(0x20a)]=_0x3f209f(0x1fa),_0x1e830e[_0x3f209f(0x234)][_0x3f209f(0x1da)]=_0x3f209f(0x262),_0x1e830e[_0x3f209f(0x234)][_0x3f209f(0x24c)]='none',_0x5565e3['appendChild'](_0x1e830e);}['_initPlugins'](){const _0x1bce23=_0x2db0f7;var _0x581e40;[[_0x48f299],[_0xc43ff6,{'container':d,'header':!0x0,'toolbar':!0x1,'footer':!0x0,'contextMenu':!0x1,'override':[[_0x5387ff,null]]}],[_0x49f5e6],[_0xf21ae,{'override':[[_0x5239ce,null]]}],[_0x3ed651,{'hasScroll':!0x1}],[_0x3dd627],[_0x291c8a],[_0x54080a,{'notExecuteFormula':!0x0}],[_0x510c8e],[_0x3847bb],[_0x5c5426],[_0x2e819d],[_0x42d867],[_0x5ed04d],[_0x3f0aeb],[_0x34a522],[_0xcc5f13],[_0x432264],[_0x2c67b9],[_0x418d2c],[_0x81d315],[_0x5d0a51,{'notExecuteFormula':!0x0}],[_0x42dbfb,{'workerURL':'./worker.js'}],[_0x3c18c0],[_0x83a463],[_0xcdbfd1],[_0x26f54b],[_0x3b9d9d],[_0x8c0e5d],[_0x218af7],[_0x21a4e0,{'notExecuteFormula':!0x0}],[_0x4f35b2,{'historyListServerUrl':(_0x581e40=this[_0x1bce23(0x1f4)][_0x1bce23(0x1e4)](x))==null?void 0x0:_0x581e40[_0x1bce23(0x242)]}]]['forEach'](([_0x447fb8,_0x76ed2])=>this[_0x1bce23(0x25d)](_0x447fb8,_0x76ed2));}['dispose'](){const _0x1e5a1d=_0x2db0f7;super[_0x1e5a1d(0x1d9)](),this['unMountHistoryContent'](),this['_pluginMap'][_0x1e5a1d(0x228)]();}['registerPlugin'](_0x3e6ca1,_0x27c848,_0x233776){const _0x4343be=_0x2db0f7;if(this[_0x4343be(0x1f7)][_0x4343be(0x266)](_0x3e6ca1[_0x4343be(0x20e)])&&!_0x233776)throw new Error('[HistoryLoaderService]:\x20Plugin\x20'+_0x3e6ca1[_0x4343be(0x20e)]+_0x4343be(0x204));this[_0x4343be(0x1f7)][_0x4343be(0x27a)](_0x3e6ca1['pluginName'],[_0x3e6ca1,_0x27c848]);}[_0x2db0f7(0x251)](){const _0x270e6e=_0x2db0f7;return Array['from'](this['_pluginMap'][_0x270e6e(0x1f1)]());}[_0x2db0f7(0x26f)](_0x49061c){const _0x4d3ddc=_0x2db0f7,_0x14d5bd=document[_0x4d3ddc(0x209)](d);_0x14d5bd&&(_0x14d5bd[_0x4d3ddc(0x234)]['display']='block',this[_0x4d3ddc(0x244)](_0x49061c,d));}[_0x2db0f7(0x1fd)](){const _0x3be624=_0x2db0f7;var _0x379d6a;this[_0x3be624(0x1e5)]['dispose'](),(_0x379d6a=this[_0x3be624(0x233)])==null||_0x379d6a[_0x3be624(0x1d9)](),this['_historyUniver$'][_0x3be624(0x261)](null);const _0x4d619a=document[_0x3be624(0x209)](d);_0x4d619a&&(_0x4d619a[_0x3be624(0x234)][_0x3be624(0x24c)]=_0x3be624(0x275));}[_0x2db0f7(0x244)](_0x2c115b,_0x4765af){const _0x5eead0=_0x2db0f7;if(this[_0x5eead0(0x233)])return;const _0x278a81=new _0x577e42({'locales':{[this[_0x5eead0(0x1ee)][_0x5eead0(0x1ed)]()]:this[_0x5eead0(0x1ee)][_0x5eead0(0x21f)]()},'override':[[_0x945c03,{'useClass':_0x31ffaf}]]}),_0x1dc7df=_0x278a81[_0x5eead0(0x25b)]();this['disposeWithMe'](this[_0x5eead0(0x1e2)][_0x5eead0(0x219)]['subscribe'](_0x24cc6f=>{const _0x4a21a5=_0x5eead0;_0x1dc7df['get'](_0x5bb364)[_0x4a21a5(0x27f)](_0x24cc6f);})),this['disposeWithMe'](this['_themeService'][_0x5eead0(0x265)][_0x5eead0(0x26b)](_0x4cb370=>{const _0x1ff60d=_0x5eead0;_0x1dc7df['get'](_0x5bb364)[_0x1ff60d(0x21d)](_0x4cb370);})),_0x1dc7df[_0x5eead0(0x201)](_0x368e92)[_0x5eead0(0x1e8)](this[_0x5eead0(0x1ee)]['getCurrentLocale']()),_0x1dc7df[_0x5eead0(0x201)](_0x335e48)[_0x5eead0(0x240)](_0x583645,this[_0x5eead0(0x1f4)]['getConfig'](_0x583645));const _0x10a7f8=this[_0x5eead0(0x1f4)][_0x5eead0(0x1e4)](_0x114302);_0x10a7f8&&_0x278a81[_0x5eead0(0x25d)](_0x1b30a5,{'license':_0x10a7f8['ls']}),this['_pluginMap'][_0x5eead0(0x232)](([_0x54fa75,_0x405360])=>{const _0x20c6df=_0x5eead0;_0x278a81[_0x20c6df(0x25d)](_0x54fa75,_0x405360);}),_0x1dc7df[_0x5eead0(0x26c)](_0x39915c=>{const _0x3191a5=_0x5eead0;this[_0x3191a5(0x214)](_0x39915c,_0x2c115b);}),this[_0x5eead0(0x215)][_0x5eead0(0x261)](_0x278a81);const _0x12266c=_0x1dc7df[_0x5eead0(0x201)](_0x3c2597),_0x1ba5d0=this[_0x5eead0(0x20b)](_0x2c115b);_0x12266c['triggerLoadVersions'](_0x2c115b,_0x4765af,_0x1ba5d0);}[_0x2db0f7(0x214)](_0x1c75ad,_0x59b564){const _0x5d6739=_0x2db0f7,_0x609079=_0x1c75ad[_0x5d6739(0x201)](_0x3c2597);this['_disposableCollection'][_0x5d6739(0x225)](_0x609079[_0x5d6739(0x27e)]['subscribe'](_0x4301d5=>{const _0x561ecf=_0x5d6739;switch(_0x4301d5){case _0x42760a['Entered']:this[_0x561ecf(0x267)][_0x561ecf(0x278)](),this['_sidebarService'][_0x561ecf(0x1f2)]();break;case _0x42760a[_0x561ecf(0x21b)]:this[_0x561ecf(0x1fd)]();break;case _0x42760a['Error']:this['unMountHistoryContent'](),this[_0x561ecf(0x27c)][_0x561ecf(0x243)]({'content':this[_0x561ecf(0x1ee)]['t'](_0x561ecf(0x25c)),'type':_0x12c38f[_0x561ecf(0x1de)],'duration':0xbb8});break;}})),this[_0x5d6739(0x1e5)][_0x5d6739(0x225)](_0x609079['revertRevision$'][_0x5d6739(0x26b)](async _0x31ba44=>{const _0x17e752=_0x5d6739;_0x31ba44&&this[_0x17e752(0x22a)]['executeCommand'](_0x11d831['id'],{'unitId':_0x59b564,'revision':_0x31ba44});}));}['_checkCanRevert'](_0x52100e){const _0x5598a4=_0x2db0f7,_0x329c25=this[_0x5598a4(0x20d)][_0x5598a4(0x274)](_0x52100e)['getSheets']()[_0x5598a4(0x1f6)](_0x3e3486=>_0x3e3486['getSheetId']()),_0x3765b7=new _0x1459ec(_0x52100e)['id'],_0x4b16e9=_0x329c25[_0x5598a4(0x1f6)](_0x4260d2=>new _0xb351dc(_0x52100e,_0x4260d2)['id']),_0x332cdd=_0x329c25[_0x5598a4(0x1f6)](_0x174c78=>this[_0x5598a4(0x1e1)][_0x5598a4(0x24b)](_0x52100e,_0x174c78)['map'](_0x4da009=>new _0x2bede3(_0x52100e,_0x174c78,_0x4da009[_0x5598a4(0x21a)])['id']))[_0x5598a4(0x221)](),_0x26c1c4=new _0x29921b(_0x52100e)['id'];return this[_0x5598a4(0x255)][_0x5598a4(0x21e)]([_0x3765b7,..._0x4b16e9,..._0x332cdd,_0x26c1c4])['every'](_0x25ec29=>!!_0x25ec29['value']);}};f=hi([l(0x0,_0x21b45d(_0x368e92)),l(0x1,_0xdf5baf),l(0x2,_0x335e48),l(0x3,_0x32b4ba),l(0x4,_0x5343e4),l(0x5,_0x1c5b74),l(0x6,_0x21b45d(_0x5aed72)),l(0x7,_0x21b45d(_0x5387ff)),l(0x8,_0x21b45d(_0x45d122)),l(0x9,_0x21b45d(_0x5bb364))],f);const b={'id':_0x2db0f7(0x200),'type':_0x129f65[_0x2db0f7(0x231)],'handler':_0x50d3bc=>{const _0x56ac88=_0x2db0f7,_0x4d2209=_0x50d3bc[_0x56ac88(0x201)](f),_0x2406ee=_0x50d3bc[_0x56ac88(0x201)](_0xdf5baf),{unitId:_0x5d4d3a}=_0x25ce28(_0x2406ee)||{};return _0x5d4d3a?(_0x4d2209['mountHistoryContent'](_0x5d4d3a),!0x0):!0x1;}};function mi(_0x4f8835){const _0x3b7e4b=_0x2db0f7;return{'id':b['id'],'type':_0x211562['BUTTON'],'icon':_0x3b7e4b(0x202),'tooltip':_0x3b7e4b(0x277),'hidden$':_0x3323dd(_0x4f8835,_0x5aebf6[_0x3b7e4b(0x1f8)]),'disabled$':_0x53d413(_0x4f8835,{'workbookTypes':[_0x1459ec,_0x4abcf9],'worksheetTypes':[],'rangeTypes':[]})};}const vi={[_0x471df4[_0x2db0f7(0x26e)]]:{[b['id']]:{'order':0.2,'menuItemFactory':mi}}};var di=Object[_0x2db0f7(0x271)],fi=(_0x30081c,_0x1f8744,_0x18c2ec,_0x4063dd)=>{const _0x2eade5=_0x2db0f7;for(var _0x51c49f=_0x4063dd>0x1?void 0x0:_0x4063dd?di(_0x1f8744,_0x18c2ec):_0x1f8744,_0x4127a7=_0x30081c[_0x2eade5(0x27d)]-0x1,_0x1a1342;_0x4127a7>=0x0;_0x4127a7--)(_0x1a1342=_0x30081c[_0x4127a7])&&(_0x51c49f=_0x1a1342(_0x51c49f)||_0x51c49f);return _0x51c49f;},m=(_0x258d9d,_0x59fd7c)=>(_0x5c6f26,_0x54f9c7)=>_0x59fd7c(_0x5c6f26,_0x54f9c7,_0x258d9d);let p=class extends _0x518e69{constructor(_0x24b4f6,_0x233dc2,_0x24c4ca,_0x4bb263,_0x539635,_0x524ab2,_0x172802,_0x2eb9d3){const _0x4e5b55=_0x2db0f7;super(),g(this,_0x4e5b55(0x1fc),null),(this[_0x4e5b55(0x22a)]=_0x24b4f6,this['_menuManagerService']=_0x233dc2,this[_0x4e5b55(0x218)]=_0x24c4ca,this[_0x4e5b55(0x223)]=_0x4bb263,this[_0x4e5b55(0x1ee)]=_0x539635,this[_0x4e5b55(0x27c)]=_0x524ab2,this[_0x4e5b55(0x26a)]=_0x172802,this['_localCacheService']=_0x2eb9d3,this['_init']());}[_0x2db0f7(0x264)](){const _0x3e11b8=_0x2db0f7;[b][_0x3e11b8(0x232)](_0x5bc1a7=>this[_0x3e11b8(0x216)](_0x579c2d(this[_0x3e11b8(0x22a)][_0x3e11b8(0x247)](_0x5bc1a7)))),this['disposeWithMe'](this['_componentManager'][_0x3e11b8(0x249)]('HistoryIcon',j)),this[_0x3e11b8(0x25e)][_0x3e11b8(0x272)](vi),this[_0x3e11b8(0x216)](this['_commandService'][_0x3e11b8(0x210)](_0x24ffd9=>{const _0x24c852=_0x3e11b8;if(_0x24ffd9['id']===_0x11d831['id']){this[_0x24c852(0x27c)][_0x24c852(0x243)]({'content':this[_0x24c852(0x1ee)]['t'](_0x24c852(0x1d5)),'type':_0x12c38f[_0x24c852(0x263)],'duration':0x1388});const {unitId:_0x4a41bb}=_0x24ffd9['params'],_0xd2afd5=this[_0x24c852(0x26a)][_0x24c852(0x1db)](_0x4a41bb),_0x121baf=_0x840415([_0xd2afd5[_0x24c852(0x1ff)][_0x24c852(0x250)],_0xd2afd5[_0x24c852(0x1d6)]])[_0x24c852(0x26b)](async([_0x5a5b7a,_0x3172c0])=>{const _0x3650d7=_0x24c852;var _0xd3afb1;_0x5a5b7a[_0x3650d7(0x20c)]===_0x561da0[_0x3650d7(0x205)]&&(_0x3172c0==null?void 0x0:_0x3172c0[_0x3650d7(0x1d7)])===_0x4d5511[_0x3650d7(0x207)]&&_0x5a5b7a[_0x3650d7(0x1f3)][_0x3650d7(0x1ea)][_0x3650d7(0x1ef)](_0x29e18c=>_0x29e18c['id']===_0x11d831['id'])&&(this[_0x3650d7(0x223)][_0x3650d7(0x1fd)](),_0x121baf[_0x3650d7(0x1eb)](),this['_revertErrorTimer']&&clearTimeout(this[_0x3650d7(0x1fc)]),await((_0xd3afb1=this[_0x3650d7(0x236)])==null?void 0x0:_0xd3afb1[_0x3650d7(0x237)]()),setTimeout(()=>window[_0x3650d7(0x22f)][_0x3650d7(0x1fe)]()));});this[_0x24c852(0x1fc)]=setTimeout(()=>{const _0x585119=_0x24c852;_0x121baf[_0x585119(0x1eb)](),this[_0x585119(0x27c)]['show']({'content':this[_0x585119(0x1ee)]['t'](_0x585119(0x253)),'type':_0x12c38f[_0x585119(0x1de)],'duration':0xbb8});},0x1388);}}));}};p=fi([m(0x0,_0x32b4ba),m(0x1,_0x458da5),m(0x2,_0x21b45d(_0x236294)),m(0x3,_0x21b45d(f)),m(0x4,_0x21b45d(_0x368e92)),m(0x5,_0x5343e4),m(0x6,_0x21b45d(_0xd62969)),m(0x7,_0x3bee7c)],p);var _i=Object['getOwnPropertyDescriptor'],pi=(_0x1c4a1d,_0x571258,_0x747dd7,_0x289278)=>{const _0x184615=_0x2db0f7;for(var _0x12bb04=_0x289278>0x1?void 0x0:_0x289278?_i(_0x571258,_0x747dd7):_0x571258,_0x3a96a3=_0x1c4a1d[_0x184615(0x27d)]-0x1,_0xb98179;_0x3a96a3>=0x0;_0x3a96a3--)(_0xb98179=_0x1c4a1d[_0x3a96a3])&&(_0x12bb04=_0xb98179(_0x12bb04)||_0x12bb04);return _0x12bb04;},R=(_0x14cb27,_0x12218e)=>(_0x334ec7,_0x5d9ca3)=>_0x12218e(_0x334ec7,_0x5d9ca3,_0x14cb27);const Si=_0x2db0f7(0x1e6);var _;let N=(_=class extends _0x3c5c5b{constructor(_0x3730f6=w,_0x439ccb,_0x3440c7){const _0x2fedc6=_0x2db0f7;super(),this[_0x2fedc6(0x23b)]=_0x3730f6,this['_injector']=_0x439ccb,this[_0x2fedc6(0x1f4)]=_0x3440c7;const {menu:_0x44579c,..._0x2814de}=_0x291300({},w,this[_0x2fedc6(0x23b)]);_0x44579c&&this['_configService']['setConfig']('menu',_0x44579c,{'merge':!0x0}),this[_0x2fedc6(0x1f4)][_0x2fedc6(0x240)](x,_0x2814de),this[_0x2fedc6(0x23b)][_0x2fedc6(0x276)]&&this[_0x2fedc6(0x1f4)][_0x2fedc6(0x240)](V,this[_0x2fedc6(0x23b)][_0x2fedc6(0x276)]);}[_0x2db0f7(0x23f)](){const _0x495fb4=_0x2db0f7;[[f],[p]][_0x495fb4(0x232)](_0x5d72a6=>this[_0x495fb4(0x1f5)][_0x495fb4(0x225)](_0x5d72a6));}[_0x2db0f7(0x224)](){const _0x5d5b26=_0x2db0f7;this[_0x5d5b26(0x1f5)][_0x5d5b26(0x201)](p);}},g(_,_0x2db0f7(0x258),_0x5aebf6[_0x2db0f7(0x22e)]),g(_,_0x2db0f7(0x20e),Si),_);N=pi([R(0x1,_0x21b45d(_0x3cc0a6)),R(0x2,_0x335e48)],N);export{f as HistoryLoaderService,V as UNIVER_CONTAINER_ID_KEY,d as UNIVER_HISTORY_CONTAINER_ID,N as UniverEditHistoryLoaderPlugin};