import { PivotDataFieldDataTypeEnum, PivotDataFieldSortOperatorEnum, PivotDataFieldTypeEnum, PivotDateGroupFieldDateTypeEnum, PivotFilterTypeEnum, PivotShowAsTypeEnum, PivotSubtotalTypeEnum, ST_PivotFilterOperatorEnum } from './enum';
export interface IDateValue {
    /**
     * @description the date value,  it stores the number of seconds since January 1, 1970, 00:00:00 UTC, it is same to excel date value
     */
    v: number;
    /**
     * @description only date type has this property, we can use it to format the date
     */
    f: string;
}
type IBlankValue = null | undefined;
/**
 * Represents the value of a data field in a pivot table data field
 */
export type IDataFieldValue = string | number | boolean | IDateValue | IBlankValue;
export interface IDataFieldInfo {
    id: string;
    name: string;
    fieldDataType: PivotDataFieldDataTypeEnum;
    format: string;
    maxNumber: number;
    minNumber: number;
    maxDate: number;
    minDate: number;
    records: IDataFieldValue[];
    rangeKey: string;
    /**
     * @description the data field type, Used to distinguish between grouping and original data field
     */
    dataFieldType: PivotDataFieldTypeEnum;
}
export interface IBaseGroupFieldInfo extends IDataFieldInfo {
    /**
     * @description the original field id of the group field
     */
    originalFieldId: string;
}
export interface IDateGroupFieldInfo extends IBaseGroupFieldInfo {
    /**
     * @description the date type of the date group field
     */
    dateType?: PivotDateGroupFieldDateTypeEnum;
}
export interface IPivotField {
    id: string;
    displayName: string;
    subtotalType: PivotSubtotalTypeEnum;
}
/**
 * @description using Wefloder to store the pivot table data
 * @typedef Tuple
 * @property {number} sum - The sum of the values in the tuple.
 * @property {number} count - The count of the values in the tuple.
 * @property {number} countN - The count of the number values in the tuple.
 * @property {number} product - The product of the values in the tuple.
 * @property {number} min - The minimum value in the tuple.
 * @property {number} max - The maximum value in the tuple.
 * @property {number} squareSum - The sum of the squares of the values in the tuple.
 */
export interface IPivotTuple {
    sum: number;
    count: number;
    countN: number;
    product: number;
    min: number;
    max: number;
    squareSum: number;
}
export type IPivotTableFilterInfo = IPivotTableManualFilter | IPivotTableCustomFilter | IPivotTableValueFilter;
export type IPivotTableSortInfo = IPivotTableLabelSortInfo | IPivotTableValueSortInfo | IPivotTableLabelCustomSortInfo;
export type IPivotTableGroupInfo = IPivotTableDateGroupInfo;
export interface IPivotTableDateGroupInfo {
    type: PivotDataFieldTypeEnum.dateGroupField;
    dateType: PivotDateGroupFieldDateTypeEnum;
}
export interface IPivotTableLabelSortInfo {
    type: PivotDataFieldSortOperatorEnum;
}
export interface IPivotTableLabelCustomSortInfo extends IPivotTableLabelSortInfo {
    customOrder: string[];
}
export interface IPivotTableValueSortInfo {
    /**
     * @property {PivotDataFieldSortOperatorEnum} - The sort operator of the field items.
     */
    type: PivotDataFieldSortOperatorEnum;
    /**
     * @property {string} - The base field id of the field items to sort.
     */
    baseFieldId: string;
    /**
     * @property {string[]} - The path list of field items to sort.
     */
    sortItems: string[];
}
/**
 * Represents the Pivot Table Manual Filter info
 */
export interface IPivotTableManualFilter {
    /**
     * @property {PivotFilterTypeEnum} - The filter type.
     */
    type: PivotFilterTypeEnum.ManualFilter;
    /**
     * @property {string[]} - The list of selected items.
     */
    list: string[];
    isAll?: boolean;
}
export interface IPivotTableCustomFilter {
    type: PivotFilterTypeEnum.CustomFilter;
    operator: ST_PivotFilterOperatorEnum;
    expected: any;
}
export interface IPivotTableValueFilter {
    type: PivotFilterTypeEnum.ValueFilter;
    operator: ST_PivotFilterOperatorEnum;
    expected: any;
    valueFieldId: string;
}
export interface IPivotTableShowDataAsInfo {
    type: PivotShowAsTypeEnum;
    baseFieldId: string;
    baseItem: string;
}
/**
 * Represents the query data for a label field in a pivot table.
 */
export interface IPivotTableLabelFieldQueryData {
    /**
     * The unique identifier of the label field.
     */
    id: string;
    /**
     * The unique identifier of the data field associated with the label field.
     */
    dataFieldId: string;
    /**
     * The display name of the label field.
     */
    displayName: string;
    /**
     * Information about the filter applied to the label field.
     */
    filterInfo?: IPivotTableFilterInfo;
    /**
     * Information about the sort applied to the label field.
     */
    sortInfo?: IPivotTableSortInfo;
}
/**
 * Represents the data structure for a pivot table query.
 */
export interface IPivotTableQueryData {
    /**
     * The query info of row fields in the pivot table.
     */
    rowQueryInfo: IPivotTableLabelFieldQueryData[];
    /**
     * The query info of column fields in the pivot table.
     */
    colQueryInfo: IPivotTableLabelFieldQueryData[];
    /**
     * The query info of filter fields in the pivot table.
     */
    filterQueryInfo: IPivotTableLabelFieldQueryData[];
    /**
     * The query info of value fields in the pivot table.
     */
    valueQueryInfo: IPivotTableValueFieldQueryData[];
    /**
     * The collapse state of the fields.
     * @property {Record<string, boolean|Record<string, boolean>>} - The collapse state of the pivot table.
     */
    collapseInfo: Record<string, boolean | Record<string, boolean>>;
    /**
     * The value filter info of the pivot table. The ordered should be ensured, because the value filter must be applied in order.
     */
    valueFilterInfo: IValueFilterInfoItem[];
}
/**
 * Represents the query data for a value field in a pivot table.
 */
export interface IPivotTableValueFieldQueryData {
    /**
     * The unique identifier of the value field.
     */
    id: string;
    /**
     * The unique identifier of the data field associated with the value field.
     */
    dataFieldId: string;
    /**
     * The display name of the value field.
     */
    displayName: string;
    /**
     * The type of subtotal to be displayed for this value field.
     */
    subtotal: PivotSubtotalTypeEnum;
    /**
     * Information about how to show the data for this value field.
     */
    showDataAs: IPivotTableShowDataAsInfo;
}
/**
 * Represents the query data for a measure field in a pivot table.
 */
export interface IPivotTableMeasureData {
    /**
     * @property {IPivotTableLabelFieldQueryData[]} - The query data for the value fields.
     */
    values: IPivotTableValueFieldQueryData[];
}
/**
 * Represents the value filer item of the pivot table.
 */
export interface IValueFilterInfoItem {
    /**
     * @property {string} - The base field id of the value filter.
     */
    fieldId: string;
    /**
     * @property {string} - The value field item of the value filter.
     */
    filterInfo: IPivotTableValueFilter;
}
export {};
