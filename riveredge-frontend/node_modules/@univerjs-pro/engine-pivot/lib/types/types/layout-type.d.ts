import { PivotView } from '../layout/pivot-view';
import { NodeTree } from '../summary/node-tree';
import { SummaryManager } from '../summary/summary-manager';
import { PivotErrorTypeEnum } from './enum';
import { IPivotTableGroupInfo, IPivotTableQueryData, IPivotTableValueFieldQueryData, IValueFilterInfoItem } from './interface';
export interface IPivotViewItemData {
    [row: number]: IPivotViewColData;
}
export interface IPivotViewPrefixValue {
    prefix: string;
    value: string;
}
export interface IPivotViewErrorValue {
    errorType: PivotErrorTypeEnum;
}
export type IPivotViewValueType = number | string | undefined | IPivotViewErrorValue | IPivotViewPrefixValue;
interface IPivotViewColData {
    [col: number]: IPivotViewCellData;
}
export interface IPivotViewCellData {
    v?: IPivotViewValueType;
    s?: PivotCellStyleTypeEnum;
    /**
     * @description only for the pivot table page filter cell, the value is the page filter index
     */
    i?: number;
    /**
     * means the cell is blank, the  only value is 1
     */
    t?: PivotViewCellValueTypeEnum;
}
export declare enum PivotViewCellValueTypeEnum {
    blank = 2,
    date = 4,
    other = 8
}
/**
 * Represents the pivot view info data structure, which is used to store row /col path and value index
 */
export interface IPivotViewInfo {
    /**
     * The pivot table field id
     */
    tableFieldId: string;
    /**
     * The paths of the row/col
     */
    paths: string[];
    /**
     * The value index of the row/col
     */
    valueIndex: number;
    /**
     * is this row/col is bottom total, in excel, maybe has top total in outline layout
     */
    isBottomTotal?: boolean;
    /**
     * the node level of row or col
     */
    level: number;
    /**
     * only for col view, to match some node does not save in node tree
     */
    colPathMap?: Record<string, number>;
    /**
     * the info is ΣValue
     */
    isValue?: boolean;
    /**
     * the data field id
     */
    dataFieldId?: string;
}
/**
 * Represents the pivot cell style type enum
 */
export declare enum PivotCellStyleTypeEnum {
    /**
     * the pivot table page filter selected all
     */
    FilterAll = 1,
    /**
     * the pivot table page filter selected partial
     */
    FilterPartial = 2,
    /**
     * the pivot table page filter selected one
     */
    FilterSingle = 3,
    /**
     * the pivot table area cell is blank
     */
    BlankValue = 4,
    /**
     * the pivot table dimension cell has filter but not sort
     */
    FilteredSortNone = 5,
    /**
     * the pivot table dimension cell has filter and sort asc
     */
    FilteredSortAsc = 6,
    /**
     * the pivot table dimension cell has filter and sort desc
     */
    FilteredSortDesc = 7,
    /**
     * the pivot table dimension cell has no filter and sort
     */
    FilterNoneSortNone = 8,
    /**
     * the pivot table dimension cell has no filter and sort asc
     */
    FilterNoneSortAsc = 9,
    /**
     * the pivot table dimension cell has no filter and sort desc
     */
    FilterNoneSortDesc = 10,
    /**
     * the branch node of tree can be collapse
     */
    Collapse = 11,
    /**
     * the branch node of tree can be expand
     */
    Expand = 12,
    /**
     * the subtotal cell, the real value should be  `${value} Total` or `${value} 汇总`
     */
    Subtotal = 13,
    /**
     * the grand total cell, the value template should be `GrandTotal` or `总计`
     */
    GrandTotal = 14,
    /**
     * the grandtotal has more than oen value,  the real value should be  `Total ${value}` or `总计 ${value}`
     */
    MultipleGrandTotal = 15
}
/**
 * Represents the data structure for a pivot table config, which is match CT_pivotTableDefinition
 */
export interface IPivotTableOptions {
    /**
     * The page wrap, it is the wrap of page, the page will wrap to next row when the wrapCursor is equal to pageWrap
     */
    pageWrap?: number;
    /**
     * The page over then down, it is the layout of page, if the pageOverThenDown is true, the page will layout over then down, otherwise, the page will layout down then over
     */
    pageOverThenDown?: boolean;
    showColHeaders?: boolean;
    showColStripes?: boolean;
    showLastColumn?: boolean;
    showRowHeaders?: boolean;
    showRowStripes?: boolean;
    /**
     * use span in the pivot table header
     */
    mergeItems?: boolean;
    /**
     * Whether to repeat the item labels in the pivot table
     */
    repeatRowLabels?: boolean;
}
export interface INodeSizeInfo {
    /**
     * The size of the item
     */
    itemSize: number;
    /**
     *  The size of the children item top total size
     */
    topTotalSize: number;
    /**
     * The size of the children item bottom total size
     */
    bottomTotalSize: number;
}
export interface IColumnNodeSizeInfo extends INodeSizeInfo {
    colPathMap: Record<string, number>;
}
export interface IRowNodeSizeInfo extends INodeSizeInfo {
    valueIndex?: number;
}
export interface IPivotLayoutCtx {
    view: PivotView;
    rowDeep: number;
    colDeep: number;
    rowNodeTree: NodeTree;
    colNodeTree: NodeTree;
    measureCount: number;
    pageWrap: number;
    pageOverThenDown: boolean;
    queryData: IPivotTableQueryData;
    isColMultiMeasure: boolean;
    isRowMultiMeasure: boolean;
    valueIndex: number;
    valueQueryInfo: IPivotTableValueFieldQueryData[];
    measuresMap: Record<string, IPivotTableValueFieldQueryData>;
    colMap: Record<string, number>;
    summaryManager: SummaryManager;
    measureIndexesMap: Record<string, number>;
    collapseInfo: Record<string, boolean | Record<string, boolean>>;
    repeatRowLabels: boolean;
    valueFilterMap: Record<string, IValueFilterInfoItem>;
}
export interface IPageViewItemRange {
    row: number;
    col: number;
    rowCount: number;
    colCount: number;
}
export interface ILabelViewHeaderMapItem {
    isValue: boolean;
    level: number;
    tableFieldId: string;
    dataFieldId: string;
}
export interface IPivotViewItemJSON {
    data: IPivotViewItemData;
    info: IPivotViewInfo[];
    rowCount: number;
    colCount: number;
    lastCol: number;
    lastRow: number;
}
export interface IPageViewItemJSON extends IPivotViewItemJSON {
    lastRow: number;
    lastCol: number;
    ranges: IPageViewItemRange[];
}
export interface ILabelViewItemJSON extends IPivotViewItemJSON {
    headerMap: ILabelViewHeaderMapItem[];
}
export interface IPivotViewJSON {
    pageView: IPageViewItemJSON;
    rowView: ILabelViewItemJSON;
    colView: ILabelViewItemJSON;
    dataView: IPivotViewItemJSON;
    cornerView: IPivotViewItemJSON;
    version: number;
    formatMap: Record<string, string>;
    groupInfo: Record<string, IPivotTableGroupInfo>;
}
export {};
