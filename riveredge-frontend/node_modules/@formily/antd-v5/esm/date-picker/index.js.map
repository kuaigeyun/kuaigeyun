{"version":3,"file":"index.js","sourceRoot":"lib/","sources":["date-picker/index.tsx"],"names":[],"mappings":";;;;;;;;;;;AAAA,OAAO,EAAE,OAAO,EAAE,QAAQ,EAAE,aAAa,EAAE,MAAM,gBAAgB,CAAA;AACjE,OAAO,EAAE,UAAU,IAAI,cAAc,EAAE,MAAM,MAAM,CAAA;AAGnD,OAAO,EAAE,WAAW,EAAE,MAAM,iBAAiB,CAAA;AAC7C,OAAO,EAAE,SAAS,EAAE,gBAAgB,EAAE,MAAM,iBAAiB,CAAA;AAU7D,IAAM,aAAa,GAAG;IACpB,IAAM,gBAAgB,GAAG,UAAC,KAA2C;QACnE,IAAI,KAAK,CAAC,QAAQ,CAAC,KAAK,OAAO,EAAE;YAC/B,OAAO,SAAS,CAAA;SACjB;aAAM,IAAI,KAAK,CAAC,QAAQ,CAAC,KAAK,SAAS,EAAE;YACxC,OAAO,WAAW,CAAA;SACnB;aAAM,IAAI,KAAK,CAAC,QAAQ,CAAC,KAAK,MAAM,EAAE;YACrC,OAAO,MAAM,CAAA;SACd;aAAM,IAAI,KAAK,CAAC,QAAQ,CAAC,KAAK,MAAM,EAAE;YACrC,OAAO,SAAS,CAAA;SACjB;QACD,OAAO,KAAK,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,qBAAqB,CAAC,CAAC,CAAC,YAAY,CAAA;IACjE,CAAC,CAAA;IACD,OAAO,UAAC,KAAU;QAChB,IAAM,MAAM,GAAG,KAAK,CAAC,QAAQ,CAAC,IAAI,gBAAgB,CAAC,KAAK,CAAC,CAAA;QACzD,IAAM,QAAQ,GAAG,KAAK,CAAC,QAAQ,CAAA;QAC/B,6BACK,KAAK,KACR,MAAM,EAAE,MAAM,EACd,KAAK,EAAE,SAAS,CAAC,KAAK,CAAC,KAAK,EAAE,MAAM,KAAK,SAAS,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,MAAM,CAAC,EACxE,QAAQ,EAAE,UAAC,KAAkC;gBAC3C,IAAI,QAAQ,EAAE;oBACZ,QAAQ,CAAC,gBAAgB,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC,CAAA;iBAC1C;YACH,CAAC,IACF;IACH,CAAC,CAAA;AACH,CAAC,CAAA;AAED,IAAM,kBAAkB,GAAG,OAAO,CAChC,cAAc,EACd,QAAQ,CAAC,aAAa,EAAE,CAAC,EACzB,aAAa,CAAC,WAAW,CAAC,UAAU,CAAC,CACtC,CAAA;AACD,IAAM,WAAW,GAAG,OAAO,CACzB,cAAc,CAAC,WAAW,EAC1B,QAAQ,CAAC,aAAa,EAAE,CAAC,EACzB,aAAa,CAAC,WAAW,CAAC,eAAe,CAAC,CAC3C,CAAA;AACD,MAAM,CAAC,IAAM,UAAU,GAAG,MAAM,CAAC,MAAM,CAAC,kBAAkB,EAAE;IAC1D,WAAW,aAAA;CACZ,CAAC,CAAA;AAEF,eAAe,UAAU,CAAA","sourcesContent":["import { connect, mapProps, mapReadPretty } from '@formily/react'\nimport { DatePicker as AntdDatePicker } from 'antd'\nimport { DatePickerProps as AntdDatePickerProps } from 'antd/es/date-picker'\nimport dayjs from 'dayjs'\nimport { PreviewText } from '../preview-text'\nimport { dayjsable, formatDayjsValue } from '../__builtins__'\n\ntype DatePickerProps<PickerProps> = Exclude<\n  PickerProps,\n  'value' | 'onChange'\n> & {\n  value: string\n  onChange: (value: string | string[]) => void\n}\n\nconst mapDateFormat = function () {\n  const getDefaultFormat = (props: DatePickerProps<AntdDatePickerProps>) => {\n    if (props['picker'] === 'month') {\n      return 'YYYY-MM'\n    } else if (props['picker'] === 'quarter') {\n      return 'YYYY-\\\\QQ'\n    } else if (props['picker'] === 'year') {\n      return 'YYYY'\n    } else if (props['picker'] === 'week') {\n      return 'gggg-wo'\n    }\n    return props['showTime'] ? 'YYYY-MM-DD HH:mm:ss' : 'YYYY-MM-DD'\n  }\n  return (props: any) => {\n    const format = props['format'] || getDefaultFormat(props)\n    const onChange = props.onChange\n    return {\n      ...props,\n      format: format,\n      value: dayjsable(props.value, format === 'gggg-wo' ? 'gggg-ww' : format),\n      onChange: (value: dayjs.Dayjs | dayjs.Dayjs[]) => {\n        if (onChange) {\n          onChange(formatDayjsValue(value, format))\n        }\n      },\n    }\n  }\n}\n\nconst InternalDatePicker = connect(\n  AntdDatePicker,\n  mapProps(mapDateFormat()),\n  mapReadPretty(PreviewText.DatePicker)\n)\nconst RangePicker = connect(\n  AntdDatePicker.RangePicker,\n  mapProps(mapDateFormat()),\n  mapReadPretty(PreviewText.DateRangePicker)\n)\nexport const DatePicker = Object.assign(InternalDatePicker, {\n  RangePicker,\n})\n\nexport default DatePicker\n"]}