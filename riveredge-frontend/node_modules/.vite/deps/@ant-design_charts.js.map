{
  "version": 3,
  "sources": ["../../pdfast/src/helper.js", "../../pdfast/src/index.js", "../../@antv/g2/src/index.ts", "../../@antv/g2/src/coordinate/cartesian.ts", "../../@antv/g2/src/utils/angle.ts", "../../@antv/g2/src/coordinate/polar.ts", "../../@antv/g2/src/coordinate/helix.ts", "../../@antv/g2/src/coordinate/transpose.ts", "../../@antv/g2/src/coordinate/theta.ts", "../../@antv/g2/src/coordinate/radial.ts", "../../@antv/g2/src/coordinate/parallel.ts", "../../@antv/g2/src/coordinate/fisheye.ts", "../../@antv/g2/src/coordinate/radar.ts", "../../@antv/g2/src/encode/constant.ts", "../../@antv/g2/src/encode/transform.ts", "../../@antv/g2/src/encode/field.ts", "../../@antv/g2/src/encode/column.ts", "../../@antv/g2/src/transform/utils/helper.ts", "../../@antv/g2/src/transform/maybeZeroY1.ts", "../../d3-array/src/ascending.js", "../../d3-array/src/descending.js", "../../d3-array/src/bisector.js", "../../d3-array/src/number.js", "../../d3-array/src/bisect.js", "../../d3-array/src/blur.js", "../../d3-array/src/count.js", "../../d3-array/src/variance.js", "../../d3-array/src/deviation.js", "../../d3-array/src/extent.js", "../../d3-array/src/fsum.js", "../../internmap/src/index.js", "../../d3-array/src/identity.js", "../../d3-array/src/group.js", "../../d3-array/src/permute.js", "../../d3-array/src/sort.js", "../../d3-array/src/groupSort.js", "../../d3-array/src/array.js", "../../d3-array/src/constant.js", "../../d3-array/src/ticks.js", "../../d3-array/src/nice.js", "../../d3-array/src/threshold/sturges.js", "../../d3-array/src/bin.js", "../../d3-array/src/max.js", "../../d3-array/src/maxIndex.js", "../../d3-array/src/min.js", "../../d3-array/src/minIndex.js", "../../d3-array/src/quickselect.js", "../../d3-array/src/greatest.js", "../../d3-array/src/quantile.js", "../../d3-array/src/threshold/scott.js", "../../d3-array/src/mean.js", "../../d3-array/src/median.js", "../../d3-array/src/merge.js", "../../d3-array/src/range.js", "../../d3-array/src/shuffle.js", "../../d3-array/src/sum.js", "../../@antv/scale/src/utils/compose.ts", "../../@antv/scale/src/utils/normalize.ts", "../../@antv/scale/src/utils/clamp.ts", "../../@antv/scale/src/utils/bisect.ts", "../../@antv/scale/src/utils/ticks.ts", "../../@antv/scale/src/utils/d3-linear-nice.ts", "../../@antv/scale/src/utils/time-interval.ts", "../../@antv/scale/src/utils/utc-interval.ts", "../../@antv/scale/src/utils/find-tick-interval.ts", "../../@antv/scale/src/utils/d3-time-nice.ts", "../../@antv/scale/src/utils/is-valid.ts", "../../@antv/scale/src/utils/log.ts", "../../@antv/scale/src/utils/d3-log-nice.ts", "../../@antv/scale/src/utils/interpolatize.ts", "../../@antv/scale/src/utils/color.ts", "../../@antv/scale/src/utils/interpolate.ts", "../../@antv/scale/src/utils/choose-mask.ts", "../../@antv/scale/src/utils/internMap.ts", "../../@antv/scale/src/scales/base.ts", "../../@antv/scale/src/scales/ordinal.ts", "../../@antv/scale/src/scales/band.ts", "../../@antv/scale/src/tick-methods/d3-ticks.ts", "../../@antv/scale/src/scales/constant.ts", "../../@antv/scale/src/utils/pretty-number.ts", "../../@antv/scale/src/tick-methods/wilkinson-extended.ts", "../../@antv/scale/src/scales/identity.ts", "../../@antv/scale/src/scales/continuous.ts", "../../@antv/scale/src/scales/linear.ts", "../../@antv/scale/src/scales/point.ts", "../../@antv/scale/src/scales/pow.ts", "../../@antv/scale/src/scales/sqrt.ts", "../../@antv/scale/src/scales/threshold.ts", "../../@antv/scale/src/tick-methods/d3-log.ts", "../../@antv/scale/src/scales/log.ts", "../../@antv/scale/src/scales/quantize.ts", "../../@antv/scale/src/utils/create-quartile.ts", "../../@antv/scale/src/scales/quantile.ts", "../../@antv/scale/src/tick-methods/d3-time.ts", "../../@antv/scale/src/scales/time.ts", "../../@antv/scale/src/scales/sequential.ts", "../../@antv/scale/src/scales/diverging.ts", "../../@antv/g2/src/utils/helper.ts", "../../@antv/g2/src/utils/array.ts", "../../@antv/g2/src/transform/utils/order.ts", "../../@antv/g2/src/transform/stackY.ts", "../../@antv/g2/src/transform/maybeStackY.ts", "../../@antv/g2/src/utils/dateFormat.ts", "../../@antv/g2/src/transform/maybeTitle.ts", "../../@antv/g2/src/transform/maybeZeroX.ts", "../../@antv/g2/src/transform/maybeZeroY.ts", "../../@antv/g2/src/transform/maybeZeroZ.ts", "../../@antv/g2/src/transform/maybeSize.ts", "../../@antv/g2/src/transform/maybeKey.ts", "../../@antv/g2/src/transform/maybeSeries.ts", "../../@antv/g2/src/transform/maybeTupleY.ts", "../../@antv/g2/src/transform/maybeTupleX.ts", "../../@antv/g2/src/transform/maybeIdentityY.ts", "../../@antv/g2/src/transform/maybeIdentityX.ts", "../../@antv/g2/src/transform/maybeDefaultX.ts", "../../@antv/g2/src/transform/maybeDefaultY.ts", "../../@antv/g2/src/transform/maybeTooltip.ts", "../../@antv/g2/src/transform/maybeZeroPadding.ts", "../../@antv/g2/src/transform/maybeVisualPosition.ts", "../../@antv/g2/src/transform/maybeFunctionAttribute.ts", "../../@antv/g2/src/transform/maybeTuple.ts", "../../@antv/g2/src/transform/maybeGradient.ts", "../../@antv/g2/src/transform/dodgeX.ts", "../../@antv/g2/src/transform/stackEnter.ts", "../../@antv/g2/src/transform/normalizeY.ts", "../../@antv/g2/src/transform/jitter.ts", "../../@antv/g2/src/transform/jitterX.ts", "../../@antv/g2/src/transform/jitterY.ts", "../../@antv/g2/src/transform/symmetryY.ts", "../../@antv/g2/src/transform/diffY.ts", "../../@antv/g2/src/transform/select.ts", "../../@antv/g2/src/transform/selectX.ts", "../../@antv/g2/src/transform/selectY.ts", "../../@antv/g2/src/transform/groupN.ts", "../../@antv/g2/src/transform/group.ts", "../../@antv/g2/src/transform/groupX.ts", "../../@antv/g2/src/transform/groupY.ts", "../../@antv/g2/src/transform/groupColor.ts", "../../@antv/g2/src/transform/sort.ts", "../../@antv/g2/src/transform/sortX.ts", "../../@antv/g2/src/transform/sortColor.ts", "../../@antv/g2/src/transform/sortY.ts", "../../@antv/g2/src/transform/flexX.ts", "../../@antv/g2/src/utils/vector.ts", "../../@antv/g2/src/transform/pack.ts", "../../@antv/g2/src/transform/bin.ts", "../../@antv/g2/src/transform/binX.ts", "../../@antv/g2/src/transform/utils/lttb.ts", "../../@antv/g2/src/transform/sample.ts", "../../@antv/g2/src/transform/filter.ts", "../../d3-shape/src/constant.js", "../../d3-shape/src/math.js", "../../d3-path/src/path.js", "../../d3-shape/src/path.js", "../../d3-shape/src/arc.js", "../../d3-shape/src/array.js", "../../d3-shape/src/curve/linear.js", "../../d3-shape/src/point.js", "../../d3-shape/src/line.js", "../../d3-shape/src/area.js", "../../d3-shape/src/curve/radial.js", "../../d3-shape/src/lineRadial.js", "../../d3-shape/src/areaRadial.js", "../../d3-shape/src/symbol/asterisk.js", "../../d3-shape/src/symbol/diamond.js", "../../d3-shape/src/symbol/star.js", "../../d3-shape/src/symbol/triangle.js", "../../d3-shape/src/symbol/triangle2.js", "../../d3-shape/src/symbol/wye.js", "../../d3-shape/src/noop.js", "../../d3-shape/src/curve/basis.js", "../../d3-shape/src/curve/basisClosed.js", "../../d3-shape/src/curve/basisOpen.js", "../../d3-shape/src/curve/bundle.js", "../../d3-shape/src/curve/cardinal.js", "../../d3-shape/src/curve/cardinalClosed.js", "../../d3-shape/src/curve/cardinalOpen.js", "../../d3-shape/src/curve/catmullRom.js", "../../d3-shape/src/curve/catmullRomClosed.js", "../../d3-shape/src/curve/catmullRomOpen.js", "../../d3-shape/src/curve/linearClosed.js", "../../d3-shape/src/curve/monotone.js", "../../d3-shape/src/curve/natural.js", "../../d3-shape/src/curve/step.js", "../../@antv/g2/src/utils/coordinate.ts", "../../@antv/g2/src/utils/selection.ts", "../../@antv/g2/src/utils/number.ts", "../../@antv/g2/src/shape/utils.ts", "../../@antv/g2/src/shape/interval/color.ts", "../../@antv/g2/src/shape/interval/rect.ts", "../../@antv/g2/src/shape/interval/hollow.ts", "../../@antv/g2/src/shape/interval/funnel.ts", "../../@antv/g2/src/shape/interval/pyramid.ts", "../../@antv/g2/src/utils/createElement.ts", "../../@antv/g2/src/shape/line/curve.ts", "../../@antv/g2/src/shape/line/line.ts", "../../@antv/g2/src/shape/line/smooth.ts", "../../@antv/g2/src/shape/line/hv.ts", "../../@antv/g2/src/shape/line/vh.ts", "../../@antv/g2/src/shape/line/hvh.ts", "../../@antv/g2/src/shape/line/trail.ts", "../../@antv/g2/src/utils/marker.ts", "../../@antv/g2/src/utils/string.ts", "../../@antv/g2/src/shape/point/color.ts", "../../@antv/g2/src/shape/point/hollowBowtie.ts", "../../@antv/g2/src/shape/point/hollowDiamond.ts", "../../@antv/g2/src/shape/point/hollowHexagon.ts", "../../@antv/g2/src/shape/point/hollow.ts", "../../@antv/g2/src/shape/point/hollowSquare.ts", "../../@antv/g2/src/shape/point/hollowTriangle.ts", "../../@antv/g2/src/shape/point/hollowTriangleDown.ts", "../../@antv/g2/src/shape/point/circle.ts", "../../@antv/g2/src/shape/point/hollowCircle.ts", "../../@antv/g2/src/shape/point/bowtie.ts", "../../@antv/g2/src/shape/point/cross.ts", "../../@antv/g2/src/shape/point/diamond.ts", "../../@antv/g2/src/shape/point/hexagon.ts", "../../@antv/g2/src/shape/point/hyphen.ts", "../../@antv/g2/src/shape/point/line.ts", "../../@antv/g2/src/shape/point/plus.ts", "../../@antv/g2/src/shape/point/point.ts", "../../@antv/g2/src/shape/point/square.ts", "../../@antv/g2/src/shape/point/tick.ts", "../../@antv/g2/src/shape/point/triangle.ts", "../../@antv/g2/src/shape/point/triangleDown.ts", "../../@antv/g2/src/shape/vector/vector.ts", "../../@antv/g2/src/shape/text/advance.ts", "../../@antv/g2/src/shape/text/text.ts", "../../@antv/g2/src/shape/text/badge.ts", "../../@antv/g2/src/shape/text/tag.ts", "../../@antv/g2/src/shape/area/curve.ts", "../../@antv/g2/src/shape/area/area.ts", "../../@antv/g2/src/shape/area/smooth.ts", "../../@antv/g2/src/shape/area/hvh.ts", "../../@antv/g2/src/shape/area/vh.ts", "../../@antv/g2/src/shape/area/hv.ts", "../../@antv/g2/src/shape/link/link.ts", "../../@antv/g2/src/shape/link/smooth.ts", "../../@antv/g2/src/shape/link/vhv.ts", "../../@antv/g2/src/shape/link/arc.ts", "../../@antv/g2/src/mark/utils.ts", "../../@antv/g2/src/shape/image/image.ts", "../../@antv/g2/src/shape/polygon/polygon.ts", "../../@antv/g2/src/shape/polygon/ribbon.ts", "../../@antv/g2/src/shape/box/box.ts", "../../@antv/g2/src/shape/box/violin.ts", "../../@antv/g2/src/shape/lineXY/line.ts", "../../@antv/g2/src/shape/connector/connector.ts", "../../@antv/g2/src/shape/label/position/index.ts", "../../@antv/g2/src/shape/label/position/area.ts", "../../@antv/g2/src/shape/label/position/default.ts", "../../@antv/g2/src/shape/label/position/outside.ts", "../../@antv/g2/src/shape/label/position/utils.ts", "../../@antv/g2/src/shape/label/position/spider.ts", "../../@antv/g2/src/shape/label/position/surround.ts", "../../@antv/g2/src/shape/label/label.ts", "../../@antv/g2/src/shape/path/color.ts", "../../@antv/g2/src/shape/path/path.ts", "../../@antv/g2/src/shape/path/hollow.ts", "../../@antv/g2/src/shape/density/density.ts", "../../flru/dist/flru.mjs", "../../@antv/g2/src/utils/lru.ts", "../../@antv/g2/src/shape/heatmap/renderer/gradient.ts", "../../@antv/g2/src/shape/heatmap/renderer/index.ts", "../../@antv/g2/src/shape/heatmap/heatmap.ts", "../../@antv/g2/src/shape/shape/shape.ts", "../../@antv/g2/src/shape/liquid/wave.ts", "../../@antv/g2/src/shape/liquid/shapes.ts", "../../@antv/g2/src/shape/liquid/liquid.ts", "../../@antv/g2/src/shape/gauge/round.ts", "../../@antv/g2/src/runtime/constant.ts", "../../@antv/g2/src/shape/axis-breaks/axis-breaks.ts", "../../@antv/g2/src/mark/interval.ts", "../../@antv/g2/src/mark/rect.ts", "../../@antv/g2/src/mark/line.ts", "../../@antv/g2/src/mark/point.ts", "../../@antv/g2/src/mark/text.ts", "../../@antv/g2/src/mark/cell.ts", "../../@antv/g2/src/mark/area.ts", "../../@antv/g2/src/mark/link.ts", "../../@antv/g2/src/mark/image.ts", "../../@antv/g2/src/mark/polygon.ts", "../../@antv/g2/src/mark/box.ts", "../../@antv/g2/src/mark/vector.ts", "../../@antv/g2/src/mark/lineY.ts", "../../@antv/g2/src/mark/lineX.ts", "../../@antv/g2/src/mark/connector.ts", "../../@antv/g2/src/mark/range.ts", "../../@antv/g2/src/mark/rangeX.ts", "../../@antv/g2/src/mark/rangeY.ts", "../../@antv/g2/src/data/utils/d3-sankey/align.ts", "../../@antv/g2/src/data/utils/d3-sankey/constant.ts", "../../@antv/g2/src/data/utils/d3-sankey/sankey.ts", "../../@antv/g2/src/data/sankey.ts", "../../@antv/g2/src/utils/mark.ts", "../../@antv/g2/src/mark/sankey.ts", "../../@antv/g2/src/data/utils/arc/sort.ts", "../../@antv/g2/src/data/utils/arc/arc.ts", "../../@antv/g2/src/data/arc.ts", "../../@antv/g2/src/mark/chord.ts", "../../@antv/g2/src/mark/path.ts", "../../d3-hierarchy/src/cluster.js", "../../d3-hierarchy/src/hierarchy/count.js", "../../d3-hierarchy/src/hierarchy/each.js", "../../d3-hierarchy/src/hierarchy/eachBefore.js", "../../d3-hierarchy/src/hierarchy/eachAfter.js", "../../d3-hierarchy/src/hierarchy/find.js", "../../d3-hierarchy/src/hierarchy/sum.js", "../../d3-hierarchy/src/hierarchy/sort.js", "../../d3-hierarchy/src/hierarchy/path.js", "../../d3-hierarchy/src/hierarchy/ancestors.js", "../../d3-hierarchy/src/hierarchy/descendants.js", "../../d3-hierarchy/src/hierarchy/leaves.js", "../../d3-hierarchy/src/hierarchy/links.js", "../../d3-hierarchy/src/hierarchy/iterator.js", "../../d3-hierarchy/src/hierarchy/index.js", "../../d3-hierarchy/src/accessors.js", "../../d3-hierarchy/src/constant.js", "../../d3-hierarchy/src/lcg.js", "../../d3-hierarchy/src/array.js", "../../d3-hierarchy/src/pack/enclose.js", "../../d3-hierarchy/src/pack/siblings.js", "../../d3-hierarchy/src/pack/index.js", "../../d3-hierarchy/src/treemap/round.js", "../../d3-hierarchy/src/treemap/dice.js", "../../d3-hierarchy/src/partition.js", "../../d3-hierarchy/src/stratify.js", "../../d3-hierarchy/src/tree.js", "../../d3-hierarchy/src/treemap/slice.js", "../../d3-hierarchy/src/treemap/squarify.js", "../../d3-hierarchy/src/treemap/index.js", "../../d3-hierarchy/src/treemap/binary.js", "../../d3-hierarchy/src/treemap/sliceDice.js", "../../d3-hierarchy/src/treemap/resquarify.js", "../../@antv/g2/src/utils/treeDataTransform.ts", "../../@antv/g2/src/mark/treemap.ts", "../../@antv/g2/src/mark/pack.ts", "../../@antv/g2/src/mark/boxplot.ts", "../../@antv/g2/src/mark/shape.ts", "../../@antv/g2/src/mark/forceGraph.ts", "../../@antv/g2/src/data/cluster.ts", "../../@antv/g2/src/data/tree.ts", "../../@antv/g2/src/mark/tree.ts", "../../@antv/g2/src/mark/wordCloud.ts", "../../@antv/g2/src/mark/gauge.ts", "../../@antv/g2/src/mark/density.ts", "../../@antv/g2/src/mark/heatmap.ts", "../../@antv/g2/src/mark/liquid.ts", "../../@antv/g2/src/mark/beeswarm.ts", "../../@antv/g2/src/mark/partition.ts", "../../@antv/g2/src/palette/category10.ts", "../../@antv/g2/src/palette/category20.ts", "../../@antv/g2/src/scale/band.ts", "../../@antv/g2/src/scale/linear.ts", "../../@antv/g2/src/scale/ordinal.ts", "../../@antv/g2/src/scale/identity.ts", "../../@antv/g2/src/scale/point.ts", "../../@antv/g2/src/scale/time.ts", "../../@antv/g2/src/scale/log.ts", "../../@antv/g2/src/scale/pow.ts", "../../@antv/g2/src/scale/threshold.ts", "../../@antv/g2/src/scale/quantile.ts", "../../@antv/g2/src/scale/quantize.ts", "../../@antv/g2/src/scale/sqrt.ts", "../../@antv/g2/src/scale/sequential.ts", "../../@antv/g2/src/scale/constant.ts", "../../@antv/g2/src/component/constant.ts", "../../@antv/g2/src/theme/create.ts", "../../@antv/g2/src/theme/light.ts", "../../@antv/g2/src/theme/classic.ts", "../../@antv/g2/src/theme/dark.ts", "../../@antv/g2/src/theme/classicDark.ts", "../../@antv/g2/src/theme/academy.ts", "../../d3-format/src/formatDecimal.js", "../../d3-format/src/exponent.js", "../../d3-format/src/formatGroup.js", "../../d3-format/src/formatNumerals.js", "../../d3-format/src/formatSpecifier.js", "../../d3-format/src/formatTrim.js", "../../d3-format/src/formatPrefixAuto.js", "../../d3-format/src/formatRounded.js", "../../d3-format/src/formatTypes.js", "../../d3-format/src/identity.js", "../../d3-format/src/locale.js", "../../d3-format/src/defaultLocale.js", "../../@antv/g2/src/component/utils.ts", "../../@antv/g2/src/component/axis.ts", "../../@antv/g2/src/component/axisX.ts", "../../@antv/g2/src/component/axisY.ts", "../../@antv/g2/src/component/axisRadar.ts", "../../@antv/g2/src/utils/event.ts", "../../@antv/expr/dist/index.esm.js", "../../@antv/g2/src/utils/expr.ts", "../../@antv/coord/node_modules/@antv/util/src/is-type.ts", "../../@antv/coord/node_modules/@antv/util/src/is-function.ts", "../../@antv/coord/node_modules/@antv/util/src/is-array.ts", "../../@antv/coord/node_modules/@antv/util/src/is-object.ts", "../../@antv/coord/node_modules/@antv/util/src/each.ts", "../../@antv/coord/node_modules/@antv/util/src/is-object-like.ts", "../../@antv/coord/node_modules/@antv/util/src/is-plain-object.ts", "../../@antv/coord/node_modules/@antv/util/src/pull.ts", "../../@antv/coord/node_modules/@antv/util/src/pull-at.ts", "../../@antv/coord/node_modules/@antv/util/src/is-string.ts", "../../@antv/coord/node_modules/@antv/util/src/is-number.ts", "../../@antv/coord/node_modules/@antv/util/src/is-integer.ts", "../../@antv/coord/node_modules/@antv/util/src/to-degree.ts", "../../@antv/coord/node_modules/@antv/util/src/to-radian.ts", "../../@antv/coord/node_modules/@antv/util/src/values.ts", "../../@antv/coord/node_modules/@antv/util/src/get-type.ts", "../../@antv/coord/node_modules/@antv/util/src/is-prototype.ts", "../../@antv/coord/node_modules/@antv/util/src/memoize.ts", "../../@antv/coord/node_modules/@antv/util/src/deep-mix.ts", "../../@antv/coord/node_modules/@antv/util/src/identity.ts", "../../@antv/coord/node_modules/@antv/util/src/measure-text-width.ts", "../../@antv/coord/node_modules/@antv/util/src/cache.ts", "../../@antv/coord/esm/utils/utils/compose.ts", "../../@antv/coord/esm/utils/utils/isMatrix.ts", "../../@antv/coord/esm/utils/utils/extend.ts", "../../@antv/coord/esm/utils/utils/adjustAngle.ts", "../../@antv/coord/esm/transforms/transforms/translate.ts", "../../@antv/coord/node_modules/@antv/scale/esm/utils/utils/compose.ts", "../../@antv/coord/node_modules/@antv/scale/esm/utils/utils/normalize.ts", "../../@antv/coord/node_modules/@antv/scale/esm/utils/utils/clamp.ts", "../../@antv/coord/node_modules/@antv/scale/esm/utils/utils/bisect.ts", "../../@antv/coord/node_modules/@antv/scale/esm/utils/utils/ticks.ts", "../../@antv/coord/node_modules/@antv/scale/esm/utils/utils/d3-linear-nice.ts", "../../@antv/coord/node_modules/@antv/scale/esm/utils/utils/time-interval.ts", "../../@antv/coord/node_modules/@antv/scale/esm/utils/utils/utc-interval.ts", "../../@antv/coord/node_modules/@antv/scale/node_modules/@antv/util/src/color/arr2rgb.ts", "../../@antv/coord/node_modules/@antv/scale/node_modules/@antv/util/src/lodash/is-array.ts", "../../@antv/coord/node_modules/@antv/scale/node_modules/@antv/util/src/lodash/is-object-like.ts", "../../@antv/coord/node_modules/@antv/scale/node_modules/@antv/util/src/lodash/is-type.ts", "../../@antv/coord/node_modules/@antv/scale/node_modules/@antv/util/src/lodash/is-plain-object.ts", "../../@antv/coord/node_modules/@antv/scale/node_modules/@antv/util/src/lodash/pull.ts", "../../@antv/coord/node_modules/@antv/scale/node_modules/@antv/util/src/lodash/pull-at.ts", "../../@antv/coord/node_modules/@antv/scale/node_modules/@antv/util/src/lodash/is-number.ts", "../../@antv/coord/node_modules/@antv/scale/node_modules/@antv/util/src/lodash/to-degree.ts", "../../@antv/coord/node_modules/@antv/scale/node_modules/@antv/util/src/lodash/to-radian.ts", "../../@antv/coord/node_modules/@antv/scale/node_modules/@antv/util/src/lodash/get-type.ts", "../../@antv/coord/node_modules/@antv/scale/node_modules/@antv/util/src/lodash/is-null.ts", "../../@antv/coord/node_modules/@antv/scale/node_modules/@antv/util/src/lodash/is-prototype.ts", "../../@antv/coord/node_modules/@antv/scale/node_modules/@antv/util/src/lodash/is-undefined.ts", "../../@antv/coord/node_modules/@antv/scale/node_modules/@antv/util/src/lodash/memoize.ts", "../../@antv/coord/node_modules/@antv/scale/node_modules/@antv/util/src/lodash/deep-mix.ts", "../../@antv/coord/node_modules/@antv/scale/node_modules/@antv/util/src/lodash/identity.ts", "../../@antv/coord/node_modules/@antv/scale/node_modules/@antv/util/src/lodash/cache.ts", "../../@antv/coord/node_modules/@antv/scale/node_modules/@antv/util/src/color/torgb.ts", "../../@antv/coord/node_modules/@antv/scale/esm/utils/utils/is-valid.ts", "../../@antv/coord/node_modules/@antv/scale/esm/utils/utils/interpolatize.ts", "../../@antv/coord/node_modules/@antv/scale/esm/utils/utils/color.ts", "../../@antv/coord/node_modules/@antv/scale/esm/utils/utils/interpolate.ts", "../../@antv/coord/node_modules/@antv/scale/esm/utils/utils/internMap.ts", "../../@antv/coord/node_modules/@antv/scale/esm/scales/scales/base.ts", "../../@antv/coord/node_modules/@antv/scale/esm/scales/scales/ordinal.ts", "../../@antv/coord/node_modules/@antv/scale/esm/scales/scales/band.ts", "../../@antv/coord/node_modules/@antv/scale/esm/tick-methods/tick-methods/d3-ticks.ts", "../../@antv/coord/node_modules/@antv/scale/esm/tick-methods/tick-methods/wilkinson-extended.ts", "../../@antv/coord/node_modules/@antv/scale/esm/scales/scales/continuous.ts", "../../@antv/coord/node_modules/@antv/scale/esm/scales/scales/linear.ts", "../../@antv/coord/node_modules/@antv/scale/esm/scales/scales/point.ts", "../../@antv/coord/node_modules/@antv/scale/esm/scales/scales/sequential.ts", "../../@antv/coord/node_modules/@antv/scale/esm/scales/scales/diverging.ts", "../../@antv/coord/esm/transforms/transforms/cartesian.ts", "../../@antv/coord/esm/transforms/transforms/custom.ts", "../../@antv/coord/esm/transforms/transforms/matrix.ts", "../../@antv/coord/esm/transforms/transforms/polar.ts", "../../@antv/coord/esm/transforms/transforms/transpose.ts", "../../@antv/coord/esm/transforms/transforms/scale.ts", "../../@antv/coord/esm/transforms/transforms/reflect.ts", "../../@antv/coord/esm/transforms/transforms/rotate.ts", "../../@antv/coord/esm/transforms/transforms/helix.ts", "../../@antv/coord/esm/transforms/transforms/parallel.ts", "../../@antv/coord/esm/transforms/transforms/shear.ts", "../../@antv/coord/esm/transforms/transforms/fisheye.ts", "../../@antv/coord/esm/transforms/transforms/cartesian3D.ts", "../../@antv/coord/esm/transforms/transforms/translate3D.ts", "../../@antv/coord/esm/transforms/transforms/transpose3D.ts", "../../@antv/coord/esm/transforms/transforms/scale3D.ts", "../../@antv/coord/esm/coordinate.ts", "../../@antv/coord/esm/coordinate3D.ts", "../../@antv/g2/src/composition/utils.ts", "../../@antv/g2/src/composition/spaceLayer.ts", "../../@antv/g2/src/composition/spaceFlex.ts", "../../@antv/g2/src/composition/view.ts", "../../@antv/g2/src/composition/mark.ts", "../../@antv/g2/src/utils/container.ts", "../../@antv/g2/src/composition/facetRect.ts", "../../@antv/g2/src/composition/repeatMatrix.ts", "../../@antv/g2/src/composition/facetCircle.ts", "../../@antv/g2/src/composition/timingKeyframe.ts", "../../@antv/g2/src/composition/geoPath.ts", "../../d3-geo/src/math.js", "../../d3-geo/src/noop.js", "../../d3-geo/src/stream.js", "../../d3-geo/src/area.js", "../../d3-geo/src/cartesian.js", "../../d3-geo/src/compose.js", "../../d3-geo/src/rotation.js", "../../d3-geo/src/circle.js", "../../d3-geo/src/clip/buffer.js", "../../d3-geo/src/pointEqual.js", "../../d3-geo/src/clip/rejoin.js", "../../d3-geo/src/polygonContains.js", "../../d3-geo/src/clip/index.js", "../../d3-geo/src/clip/antimeridian.js", "../../d3-geo/src/clip/circle.js", "../../d3-geo/src/clip/line.js", "../../d3-geo/src/clip/rectangle.js", "../../d3-geo/src/graticule.js", "../../d3-geo/src/identity.js", "../../d3-geo/src/path/area.js", "../../d3-geo/src/path/bounds.js", "../../d3-geo/src/path/centroid.js", "../../d3-geo/src/path/context.js", "../../d3-geo/src/path/measure.js", "../../d3-geo/src/path/string.js", "../../d3-geo/src/path/index.js", "../../d3-geo/src/transform.js", "../../d3-geo/src/projection/fit.js", "../../d3-geo/src/projection/resample.js", "../../d3-geo/src/projection/index.js", "../../d3-geo/src/projection/conic.js", "../../d3-geo/src/projection/cylindricalEqualArea.js", "../../d3-geo/src/projection/conicEqualArea.js", "../../d3-geo/src/projection/albers.js", "../../d3-geo/src/projection/albersUsa.js", "../../d3-geo/src/projection/azimuthal.js", "../../d3-geo/src/projection/azimuthalEqualArea.js", "../../d3-geo/src/projection/azimuthalEquidistant.js", "../../d3-geo/src/projection/mercator.js", "../../d3-geo/src/projection/conicConformal.js", "../../d3-geo/src/projection/equirectangular.js", "../../d3-geo/src/projection/conicEquidistant.js", "../../d3-geo/src/projection/equalEarth.js", "../../d3-geo/src/projection/gnomonic.js", "../../d3-geo/src/projection/identity.js", "../../d3-geo/src/projection/naturalEarth1.js", "../../d3-geo/src/projection/orthographic.js", "../../d3-geo/src/projection/stereographic.js", "../../d3-geo/src/projection/transverseMercator.js", "../../@antv/g2/src/composition/d3Projection.ts", "../../@antv/g2/src/composition/geoView.ts", "../../@antv/g2/src/interaction/event.ts", "../../@antv/g2/src/lib/builtinlib.ts", "../../@antv/g2/src/runtime/library.ts", "../../@antv/g2/src/runtime/coordinate.ts", "../../@antv/vendor/es/d3-scale-chromatic.mjs", "../../d3-scale-chromatic/src/colors.js", "../../d3-scale-chromatic/src/categorical/category10.js", "../../d3-scale-chromatic/src/categorical/Accent.js", "../../d3-scale-chromatic/src/categorical/Dark2.js", "../../d3-scale-chromatic/src/categorical/observable10.js", "../../d3-scale-chromatic/src/categorical/Paired.js", "../../d3-scale-chromatic/src/categorical/Pastel1.js", "../../d3-scale-chromatic/src/categorical/Pastel2.js", "../../d3-scale-chromatic/src/categorical/Set1.js", "../../d3-scale-chromatic/src/categorical/Set2.js", "../../d3-scale-chromatic/src/categorical/Set3.js", "../../d3-scale-chromatic/src/categorical/Tableau10.js", "../../d3-scale-chromatic/src/ramp.js", "../../d3-scale-chromatic/src/diverging/BrBG.js", "../../d3-scale-chromatic/src/diverging/PRGn.js", "../../d3-scale-chromatic/src/diverging/PiYG.js", "../../d3-scale-chromatic/src/diverging/PuOr.js", "../../d3-scale-chromatic/src/diverging/RdBu.js", "../../d3-scale-chromatic/src/diverging/RdGy.js", "../../d3-scale-chromatic/src/diverging/RdYlBu.js", "../../d3-scale-chromatic/src/diverging/RdYlGn.js", "../../d3-scale-chromatic/src/diverging/Spectral.js", "../../d3-scale-chromatic/src/sequential-multi/BuGn.js", "../../d3-scale-chromatic/src/sequential-multi/BuPu.js", "../../d3-scale-chromatic/src/sequential-multi/GnBu.js", "../../d3-scale-chromatic/src/sequential-multi/OrRd.js", "../../d3-scale-chromatic/src/sequential-multi/PuBuGn.js", "../../d3-scale-chromatic/src/sequential-multi/PuBu.js", "../../d3-scale-chromatic/src/sequential-multi/PuRd.js", "../../d3-scale-chromatic/src/sequential-multi/RdPu.js", "../../d3-scale-chromatic/src/sequential-multi/YlGnBu.js", "../../d3-scale-chromatic/src/sequential-multi/YlGn.js", "../../d3-scale-chromatic/src/sequential-multi/YlOrBr.js", "../../d3-scale-chromatic/src/sequential-multi/YlOrRd.js", "../../d3-scale-chromatic/src/sequential-single/Blues.js", "../../d3-scale-chromatic/src/sequential-single/Greens.js", "../../d3-scale-chromatic/src/sequential-single/Greys.js", "../../d3-scale-chromatic/src/sequential-single/Purples.js", "../../d3-scale-chromatic/src/sequential-single/Reds.js", "../../d3-scale-chromatic/src/sequential-single/Oranges.js", "../../d3-scale-chromatic/src/sequential-multi/cividis.js", "../../d3-scale-chromatic/src/sequential-multi/cubehelix.js", "../../d3-scale-chromatic/src/sequential-multi/rainbow.js", "../../d3-scale-chromatic/src/sequential-multi/sinebow.js", "../../d3-scale-chromatic/src/sequential-multi/turbo.js", "../../d3-scale-chromatic/src/sequential-multi/viridis.js", "../../@antv/g2/src/runtime/scale.ts", "../../@antv/g2/src/runtime/types/scale.ts", "../../@antv/g2/src/runtime/component.ts", "../../@antv/g2/src/runtime/layout.ts", "../../@antv/g2/src/runtime/transform.ts", "../../@antv/g2/src/runtime/mark.ts", "../../@antv/g2/src/runtime/plot.ts", "../../@antv/g2/src/utils/flow.ts", "../../@antv/g2/src/runtime/option-preprocess/style.ts", "../../@antv/g2/src/runtime/option-preprocess/axis-breaks.ts", "../../@antv/g2/src/runtime/option-preprocess/index.ts", "../../@antv/g2/src/runtime/render.ts", "../../@antv/g2/src/utils/scale.ts", "../../@antv/g2/src/utils/traverse-elements.ts", "../../@antv/g2/src/utils/style.ts", "../../@antv/g2/src/interaction/utils.ts", "../../@antv/g2/src/interaction/legendFilter.ts", "../../@antv/g2/src/component/legendCategory.ts", "../../@antv/g2/src/component/legendContinuous.ts", "../../@antv/g2/src/component/legendContinuousBlock.ts", "../../@antv/g2/src/component/legendContinuousSize.ts", "../../@antv/g2/src/component/legendContinuousBlockSize.ts", "../../@antv/g2/src/component/title.ts", "../../@antv/g2/src/component/slider.ts", "../../@antv/g2/src/component/sliderX.ts", "../../@antv/g2/src/component/sliderY.ts", "../../@antv/g2/src/component/scrollbar.ts", "../../@antv/g2/src/component/scrollbarX.ts", "../../@antv/g2/src/component/scrollbarY.ts", "../../@antv/g2/src/component/legends.ts", "../../@antv/g2/src/animation/scaleInX.ts", "../../@antv/g2/src/animation/scaleOutX.ts", "../../@antv/g2/src/animation/scaleInY.ts", "../../@antv/g2/src/animation/scaleOutY.ts", "../../@antv/g2/src/animation/fadeIn.ts", "../../@antv/g2/src/animation/fadeOut.ts", "../../@antv/g2/src/animation/utils.ts", "../../@antv/g2/src/animation/morphing.ts", "../../@antv/g2/src/animation/waveIn.ts", "../../@antv/g2/src/animation/zoomIn.ts", "../../@antv/g2/src/animation/zoomOut.ts", "../../@antv/g2/src/animation/pathIn.ts", "../../@antv/g2/src/animation/growInX.ts", "../../@antv/g2/src/animation/growInY.ts", "../../@antv/g2/src/interaction/elementHighlight.ts", "../../@antv/g2/src/interaction/elementHighlightByX.ts", "../../@antv/g2/src/interaction/elementHighlightByColor.ts", "../../@antv/g2/src/interaction/elementHoverScale.ts", "../../@antv/g2/src/interaction/elementSelect.ts", "../../@antv/g2/src/interaction/elementSelectByX.ts", "../../@antv/g2/src/interaction/elementSelectByColor.ts", "../../@antv/g2/src/interaction/chartIndex.ts", "../../@antv/g2/src/interaction/fisheye.ts", "../../@antv/g2/src/interaction/tooltip.ts", "../../@antv/g2/src/interaction/legendHighlight.ts", "../../@antv/g2/src/interaction/brushHighlight.ts", "../../@antv/g2/src/interaction/brushXHighlight.ts", "../../@antv/g2/src/interaction/brushYHighlight.ts", "../../@antv/g2/src/interaction/brushAxisHighlight.ts", "../../@antv/g2/src/interaction/brushFilter.ts", "../../@antv/g2/src/interaction/brushXFilter.ts", "../../@antv/g2/src/interaction/brushYFilter.ts", "../../@antv/g2/src/interaction/adaptiveFilter.ts", "../../@antv/g2/src/interaction/sliderFilter.ts", "../../@antv/g2/src/interaction/sliderWheel.ts", "../../@antv/g2/src/interaction/scrollbarFilter.ts", "../../@antv/g2/src/interaction/poptip.ts", "../../@antv/g2/src/interaction/treemapDrillDown.ts", "../../@antv/g2/src/interaction/drillDown.ts", "../../@antv/g2/src/interaction/elementPointMove.ts", "../../d3-dsv/src/dsv.js", "../../d3-dsv/src/csv.js", "../../d3-dsv/src/tsv.js", "../../d3-dsv/src/autoType.js", "../../@antv/g2/src/data/fetch.ts", "../../@antv/g2/src/data/fold.ts", "../../@antv/g2/src/data/filter.ts", "../../@antv/g2/src/data/sort.ts", "../../@antv/g2/src/data/pick.ts", "../../@antv/g2/src/data/rename.ts", "../../@antv/g2/src/data/utils/fields.ts", "../../@antv/g2/src/data/sortBy.ts", "../../@antv/g2/src/data/inline.ts", "../../@antv/g2/src/data/custom.ts", "../../@antv/g2/src/data/map.ts", "../../@antv/g2/src/data/utils/flow.ts", "../../@antv/g2/src/data/utils/d3-cloud/index.ts", "../../@antv/g2/src/data/wordCloud.ts", "../../@antv/g2/src/data/join.ts", "../../@antv/g2/src/data/slice.ts", "../../@antv/g2/src/data/kde.ts", "../../@antv/g2/src/data/utils/venn/fmin/bisect.ts", "../../@antv/g2/src/data/utils/venn/fmin/blas1.ts", "../../@antv/g2/src/data/utils/venn/fmin/nelderMead.ts", "../../@antv/g2/src/data/utils/venn/fmin/linesearch.ts", "../../@antv/g2/src/data/utils/venn/fmin/conjugateGradient.ts", "../../@antv/g2/src/data/utils/venn/circleintersection.ts", "../../@antv/g2/src/data/utils/venn/layout.ts", "../../@antv/g2/src/data/utils/venn/diagram.ts", "../../@antv/g2/src/data/venn.ts", "../../@antv/g2/src/data/log.ts", "../../@antv/g2/src/data/ema.ts", "../../@antv/g2/src/utils/bounds.ts", "../../@antv/g2/src/label-transform/overlapHide.ts", "../../@antv/g2/src/label-transform/overlapDodgeY.ts", "../../@antv/g2/src/utils/color.ts", "../../@antv/g2/src/label-transform/utils.ts", "../../@antv/g2/src/label-transform/contrastReverse.ts", "../../@antv/g2/src/label-transform/overflowHide.ts", "../../@antv/g2/src/label-transform/exceedAdjust.ts", "../../@antv/g2/src/label-transform/overflowStroke.ts", "../../@antv/g2/src/lib/core.ts", "../../@antv/g2/src/lib/geo.ts", "../../@antv/g2/src/lib/graph.ts", "../../@antv/g2/src/lib/plot.ts", "../../@antv/g2/src/lib/std.ts", "../../@antv/g2/src/lib/lite.ts", "../../@antv/g2/src/api/extend.ts", "../../@antv/g2/src/api/library.ts", "../../@antv/g2/src/utils/size.ts", "../../@antv/g2/src/api/node.ts", "../../@antv/g2/src/api/utils.ts", "../../@antv/g2/src/api/define.ts", "../../@antv/g2/src/api/props.ts", "../../@antv/g2/src/api/composition.ts", "../../@antv/g2/src/api/mark.ts", "../../@antv/g2/src/api/runtime.ts", "../../@antv/g2/src/api/chart.ts", "../../@ant-design/charts-util/es/react/render.js", "../../@ant-design/charts-util/es/rc/create-node.js", "../../@ant-design/charts-util/es/rc/chart-loading.js", "../../@ant-design/charts-util/es/rc/error-boundary.js", "../../@ant-design/charts-util/es/utils/measure-text.js", "../../@ant-design/charts-util/es/utils/context.js", "../../@ant-design/plots/es/components/base/index.js", "../../@ant-design/plots/es/hooks/useChart.js", "../../@ant-design/plots/es/util/index.js", "../../@ant-design/plots/es/util/is-valid-element.js", "../../@antv/g2-extension-plot/esm/utils/hierarchy/utils/hierarchy/partition.ts", "../../@antv/g2-extension-plot/esm/mark/mark/sunburst.ts", "../../@antv/g2-extension-plot/esm/interaction/interaction/drillDown.ts", "../../@antv/g2-extension-plot/esm/lib.ts", "../../@ant-design/plots/es/core/base/chart.js", "../../@ant-design/plots/es/core/utils/index.js", "../../@ant-design/plots/es/core/utils/transform.js", "../../@ant-design/plots/es/core/utils/delete-excess-keys.js", "../../@ant-design/plots/es/core/utils/filter-transformed.js", "../../@ant-design/plots/es/core/utils/merge-with-array-coverage.js", "../../@ant-design/plots/es/core/utils/field-adapter.js", "../../@ant-design/plots/es/core/utils/data-transform.js", "../../@ant-design/plots/es/core/constants/index.js", "../../@ant-design/plots/es/core/annotation/shapes/Text.js", "../../@ant-design/plots/es/core/annotation/shapes/Polygon.js", "../../@ant-design/plots/es/core/annotation/core.js", "../../@ant-design/plots/es/core/annotation/conversion-tag.js", "../../@ant-design/plots/es/core/plots/bidirectional-bar/constants.js", "../../@ant-design/plots/es/core/annotation/bidirectional-bar-axis-text.js", "../../@ant-design/plots/es/core/annotation/index.js", "../../@ant-design/plots/es/core/base/index.js", "../../@ant-design/plots/es/core/plots/base/index.js", "../../@ant-design/plots/es/core/adaptor/shape-stack.js", "../../@ant-design/plots/es/core/adaptor/mark.js", "../../@ant-design/plots/es/core/adaptor/coordinate-layout.js", "../../@ant-design/plots/es/core/plots/area/adaptor.js", "../../@ant-design/plots/es/core/plots/area/index.js", "../../@ant-design/plots/es/core/plots/bar/adaptor.js", "../../@ant-design/plots/es/core/plots/bar/shape.js", "../../@ant-design/plots/es/core/plots/bar/index.js", "../../@ant-design/plots/es/core/plots/column/shape.js", "../../@ant-design/plots/es/core/plots/column/index.js", "../../@ant-design/plots/es/core/plots/dual-axes/adaptor.js", "../../@ant-design/plots/es/core/plots/dual-axes/index.js", "../../@ant-design/plots/es/core/plots/funnel/adaptor.js", "../../@ant-design/plots/es/core/plots/funnel/index.js", "../../@ant-design/plots/es/core/plots/line/adaptor.js", "../../@ant-design/plots/es/core/plots/line/index.js", "../../@ant-design/plots/es/core/plots/pie/adaptor.js", "../../@ant-design/plots/es/core/plots/pie/index.js", "../../@ant-design/plots/es/core/plots/scatter/adaptor.js", "../../@ant-design/plots/es/core/plots/scatter/index.js", "../../@ant-design/plots/es/core/plots/radar/adaptor.js", "../../@ant-design/plots/es/core/plots/radar/index.js", "../../@ant-design/plots/es/core/plots/stock/adaptor.js", "../../@ant-design/plots/es/core/plots/stock/index.js", "../../@ant-design/plots/es/core/plots/tiny-line/adaptor.js", "../../@ant-design/plots/es/core/plots/tiny-line/index.js", "../../@ant-design/plots/es/core/plots/tiny-area/adaptor.js", "../../@ant-design/plots/es/core/plots/tiny-area/index.js", "../../@ant-design/plots/es/core/plots/tiny-column/adaptor.js", "../../@ant-design/plots/es/core/plots/tiny-column/index.js", "../../@ant-design/plots/es/core/plots/tiny-progress/adaptor.js", "../../@ant-design/plots/es/core/plots/tiny-progress/index.js", "../../@ant-design/plots/es/core/plots/tiny-ring/adaptor.js", "../../@ant-design/plots/es/core/plots/tiny-ring/index.js", "../../@ant-design/plots/es/core/plots/rose/adaptor.js", "../../@ant-design/plots/es/core/plots/rose/index.js", "../../@ant-design/plots/es/core/plots/waterfall/constants.js", "../../@ant-design/plots/es/core/plots/waterfall/adaptor.js", "../../@ant-design/plots/es/core/plots/waterfall/index.js", "../../@ant-design/plots/es/core/plots/histogram/adaptor.js", "../../@ant-design/plots/es/core/plots/histogram/index.js", "../../@ant-design/plots/es/core/plots/heatmap/adaptor.js", "../../@ant-design/plots/es/core/plots/heatmap/index.js", "../../@ant-design/plots/es/core/plots/box/adaptor.js", "../../@ant-design/plots/es/core/plots/box/index.js", "../../@ant-design/plots/es/core/plots/sankey/adaptor.js", "../../@ant-design/plots/es/core/plots/sankey/index.js", "../../@ant-design/plots/es/core/plots/bullet/adaptor.js", "../../@ant-design/plots/es/core/plots/bullet/index.js", "../../@ant-design/plots/es/core/plots/gauge/adaptor.js", "../../@ant-design/plots/es/core/plots/gauge/index.js", "../../@ant-design/plots/es/core/plots/liquid/adaptor.js", "../../@ant-design/plots/es/core/plots/liquid/index.js", "../../@ant-design/plots/es/core/plots/wordCloud/adaptor.js", "../../@ant-design/plots/es/core/plots/wordCloud/index.js", "../../@ant-design/plots/es/core/plots/treemap/adaptor.js", "../../@ant-design/plots/es/core/plots/treemap/index.js", "../../@ant-design/plots/es/core/plots/radial-bar/adaptor.js", "../../@ant-design/plots/es/core/plots/radial-bar/index.js", "../../@ant-design/plots/es/core/plots/circle-packing/adaptor.js", "../../@ant-design/plots/es/core/plots/circle-packing/index.js", "../../@ant-design/plots/es/core/plots/violin/adaptor.js", "../../@ant-design/plots/es/core/plots/violin/index.js", "../../@ant-design/plots/es/core/plots/bidirectional-bar/adaptor.js", "../../@ant-design/plots/es/core/plots/bidirectional-bar/index.js", "../../@ant-design/plots/es/core/plots/venn/type.js", "../../@ant-design/plots/es/core/plots/venn/adaptor.js", "../../@ant-design/plots/es/core/plots/venn/index.js", "../../@ant-design/plots/es/core/plots/sunburst/adaptor.js", "../../@ant-design/plots/es/core/plots/sunburst/index.js", "../../@ant-design/plots/es/core/index.js", "../../@ant-design/plots/es/util/makeChartComp.js", "../../@ant-design/plots/es/hooks/useConfig.js", "../../@ant-design/plots/es/context.js", "../../@ant-design/plots/es/util/scale.js", "../../@ant-design/plots/es/components/area/index.js", "../../@ant-design/plots/es/components/bar/index.js", "../../@ant-design/plots/es/components/column/index.js", "../../@ant-design/plots/es/components/config-provider/index.js", "../../@ant-design/plots/es/components/dual-axes/index.js", "../../@ant-design/plots/es/components/funnel/index.js", "../../@ant-design/plots/es/components/line/index.js", "../../@ant-design/plots/es/components/pie/index.js", "../../@ant-design/plots/es/components/scatter/index.js", "../../@ant-design/plots/es/components/radar/index.js", "../../@ant-design/plots/es/components/tiny/line/index.js", "../../@ant-design/plots/es/components/tiny/area/index.js", "../../@ant-design/plots/es/components/tiny/column/index.js", "../../@ant-design/plots/es/components/tiny/progress/index.js", "../../@ant-design/plots/es/components/tiny/ring/index.js", "../../@ant-design/plots/es/components/tiny/index.js", "../../@ant-design/plots/es/components/rose/index.js", "../../@ant-design/plots/es/components/waterfall/index.js", "../../@ant-design/plots/es/components/histogram/index.js", "../../@ant-design/plots/es/components/heatmap/index.js", "../../@ant-design/plots/es/components/box/index.js", "../../@ant-design/plots/es/components/sankey/index.js", "../../@ant-design/plots/es/components/stock/index.js", "../../@ant-design/plots/es/components/bullet/index.js", "../../@ant-design/plots/es/components/gauge/index.js", "../../@ant-design/plots/es/components/liquid/index.js", "../../@ant-design/plots/es/components/wordCloud/index.js", "../../@ant-design/plots/es/components/treemap/index.js", "../../@ant-design/plots/es/components/radial-bar/index.js", "../../@ant-design/plots/es/components/circlePacking/index.js", "../../@ant-design/plots/es/components/violin/index.js", "../../@ant-design/plots/es/components/bidirectional-bar/index.js", "../../@ant-design/plots/es/components/venn/index.js", "../../@ant-design/plots/es/components/mix/index.js", "../../@ant-design/plots/es/components/sunburst/index.js"],
  "sourcesContent": ["'use strict';\n\nvar self = module.exports;\n\nmodule.exports.isNumber = function (x) {\n  return (typeof x === 'number');\n};\n\nmodule.exports.findMin = function (arr) {\n  if (arr.length === 0) {\n    return Infinity;\n  }\n\n  var curr = arr[0];\n  for (var i = 1; i < arr.length; i++) {\n    curr = Math.min(curr, arr[i]);\n  }\n  return curr;\n};\n\nmodule.exports.findMax = function (arr) {\n  if (arr.length === 0) {\n    return -Infinity;\n  }\n\n  var curr = arr[0];\n  for (var i = 1; i < arr.length; i++) {\n    curr = Math.max(curr, arr[i]);\n  }\n  return curr;\n};\n\nmodule.exports.findMinMulti = function (arr) {\n  var curr = self.findMin(arr[0]);\n  for (var i = 1; i < arr.length; i++) {\n    curr = Math.min(curr, self.findMin(arr[i]));\n  }\n  return curr;\n};\n\nmodule.exports.findMaxMulti = function (arr) {\n  var curr = self.findMax(arr[0]);\n  for (var i = 1; i < arr.length; i++) {\n    curr = Math.max(curr, self.findMax(arr[i]));\n  }\n  return curr;\n};\n\nmodule.exports.inside = function (min, max, x) {\n  return (min <= x) && (x <= max);\n};\n", "'use strict';\n\nvar DEFAULT_SIZE = 50;\nvar DEFAULT_WIDTH = 2;\n\nvar LN_2 = Math.log(2);\nvar self = module.exports;\n\nvar helper = require('./helper');\n\n// Triangle\nfunction kernel(x) {\n  return 1 - Math.abs(x);\n}\n\n/**\n * Get min and max value for the pdf, covering all arr data range while respecting options' data\n * @param arr\n * @param options\n * @returns {*}\n */\nmodule.exports.getUnifiedMinMax = function (arr, options) {\n  return self.getUnifiedMinMaxMulti([arr], options);\n};\n\nmodule.exports.getUnifiedMinMaxMulti = function (arrMulti, options) {\n  options = options || {};\n\n  var relaxMin = false;\n  var relaxMax = false;\n\n  var width = helper.isNumber(options.width) ? options.width : DEFAULT_WIDTH;\n  var size = helper.isNumber(options.size) ? options.size : DEFAULT_SIZE;\n  var min = helper.isNumber(options.min) ? options.min : (relaxMin = true, helper.findMinMulti(arrMulti));\n  var max = helper.isNumber(options.max) ? options.max : (relaxMax = true, helper.findMaxMulti(arrMulti));\n\n  var range = max - min;\n  var step = range / (size - 1);\n\n  // Relax?\n  if (relaxMin) {\n    min = min - 2 * width * step;\n  }\n  if (relaxMax) {\n    max = max + 2 * width * step;\n  }\n\n  return {\n    min: min,\n    max: max\n  };\n};\n\nmodule.exports.create = function (arr, options) {\n  options = options || {};\n\n  if (!arr || (arr.length === 0)) {\n    return [];\n  }\n\n  var size = helper.isNumber(options.size) ? options.size : DEFAULT_SIZE;\n  var width = helper.isNumber(options.width) ? options.width : DEFAULT_WIDTH;\n  var normalizedMinMax = self.getUnifiedMinMax(arr, {\n    size: size,\n    width: width,\n    min: options.min,\n    max: options.max\n  });\n\n  var min = normalizedMinMax.min;\n  var max = normalizedMinMax.max;\n\n  var range = max - min;\n  var step = range / (size - 1);\n  if (range === 0) {\n    // Special case...\n    return [{x: min, y: 1}];\n  }\n\n  // Good to go\n\n  var buckets = [];\n  for (var i = 0; i < size; i++) {\n    buckets.push({\n      x: min + i * step,\n      y: 0\n    });\n  }\n\n  var xToBucket = function (x) {\n    return Math.floor((x - min) / step);\n  };\n\n  var partialArea = generatePartialAreas(kernel, width);\n  var fullArea = partialArea[width];\n  var c = partialArea[width-1] - partialArea[width-2];\n\n  var initalValue = 0;\n  arr.forEach(function (x) {\n    var bucket = xToBucket(x);\n\n    // Totally outside?\n    if ((bucket + width < 0) || (bucket - width >= buckets.length)) {\n      return;\n    }\n\n    var start = Math.max(bucket - width, 0);\n    var mid = bucket;\n    var end = Math.min(bucket + width, buckets.length - 1);\n\n    var leftBlockCount = start - (bucket - width);\n    var rightBlockCount = (bucket + width) - end;\n    var spilledAreaLeft = partialArea[-width-1 + leftBlockCount] || 0;\n    var spilledAreaRight = partialArea[-width-1 + rightBlockCount] || 0;\n    var weight = fullArea / (fullArea - spilledAreaLeft - spilledAreaRight);\n\n    if (leftBlockCount > 0) {\n      initalValue += weight * (leftBlockCount - 1) * c;\n    }\n\n    // Add grads\n    var startGradPos = Math.max(0, bucket-width+1);\n    if (helper.inside(0, buckets.length-1, startGradPos)) {\n      buckets[startGradPos].y += weight * 1 * c;\n    }\n    if (helper.inside(0, buckets.length-1, mid + 1)) {\n      buckets[mid + 1].y -= weight * 2 * c;\n    }\n    if (helper.inside(0, buckets.length-1, end + 1)) {\n      buckets[end + 1].y += weight * 1 * c;\n    }\n  });\n\n  var accumulator = initalValue;\n  var gradAccumulator = 0;\n  var area = 0;\n  buckets.forEach(function (bucket) {\n    gradAccumulator += bucket.y;\n    accumulator += gradAccumulator;\n\n    bucket.y = accumulator;\n    area += accumulator;\n  });\n\n  // Normalize\n  if (area > 0) {\n    buckets.forEach(function (bucket) {\n      bucket.y /= area;\n    });\n  }\n\n  return buckets;\n};\n\nfunction generatePartialAreas(kernel, width) {\n  var partialAreas = {};\n\n  var accumulator = 0;\n  for (var i = -width; i <= width; i++) {\n    accumulator += kernel(i/width);\n    partialAreas[i] = accumulator;\n  }\n\n  return partialAreas;\n}\n\nmodule.exports.getExpectedValueFromPdf = function (pdf) {\n  if (!pdf || (pdf.length === 0)) {\n    return undefined;\n  }\n\n  var expected = 0;\n\n  pdf.forEach(function (obj) {\n    expected += obj.x * obj.y;\n  });\n\n  return expected;\n};\n\nmodule.exports.getXWithLeftTailArea = function (pdf, area) {\n  if (!pdf || (pdf.length === 0)) {\n    return undefined;\n  }\n\n  var accumulator = 0;\n  var last = 0;\n  for (var i = 0; i < pdf.length; i++) {\n    last = i;\n    accumulator += pdf[i].y;\n\n    if (accumulator >= area) {\n      break;\n    }\n  }\n\n  return pdf[last].x;\n};\n\nmodule.exports.getPerplexity = function (pdf) {\n  if (!pdf || (pdf.length === 0)) {\n    return undefined;\n  }\n\n  var entropy = 0;\n  pdf.forEach(function (obj) {\n    var ln = Math.log(obj.y);\n\n    if (isFinite(ln)) {\n      entropy += obj.y * ln;\n    }\n  });\n  entropy = -entropy / LN_2;\n\n  return Math.pow(2, entropy);\n};\n", "import { litelib, corelib, plotlib, graphlib, geolib, stdlib } from './lib';\nimport { extend, Runtime } from './api';\nimport { API, CompositionAPI } from './api/extend';\nimport { G2Spec } from './spec';\nimport type { SymbolFactor } from './utils/marker';\n\nexport { litelib, corelib, plotlib, graphlib, geolib, stdlib };\n\nexport * from './exports';\n\n/**\n * G2 standard library initial all the libs except 3D and auto.\n */\nconst library = { ...stdlib() };\nexport type { SymbolFactor };\nexport const Chart = extend(Runtime, library);\nexport interface Chart extends API<G2Spec, typeof library> {}\nexport interface CompositionNode extends CompositionAPI<typeof library> {}\n", "import { CoordinateComponent as CC } from '../runtime';\nimport { CartesianCoordinate } from '../spec';\n\nexport type CartesianOptions = Omit<CartesianCoordinate, 'polar'>;\n\n/**\n * Default coordinate transformation for all charts.\n */\nexport const Cartesian: CC<CartesianOptions> = () => [['cartesian']];\n\nCartesian.props = {};\n", "export function toRadian(degree: number): number {\n  return (degree * Math.PI) / 180;\n}\n\nexport function toDegree(radian: number): number {\n  return (radian * 180) / Math.PI;\n}\n\n// convert the angle to the range of 0 to 4*Math.PI\nexport function convertAngles(startAngle: number, endAngle: number) {\n  startAngle = startAngle % (2 * Math.PI);\n  endAngle = endAngle % (2 * Math.PI);\n\n  if (startAngle < 0) {\n    startAngle = 2 * Math.PI + startAngle;\n  }\n  if (endAngle < 0) {\n    endAngle = 2 * Math.PI + endAngle;\n  }\n\n  if (startAngle >= endAngle) {\n    endAngle = endAngle + 2 * Math.PI;\n  }\n\n  return {\n    startAngle,\n    endAngle,\n  };\n}\n", "import { convertAngles } from '../utils/angle';\nimport { CoordinateComponent as CC } from '../runtime';\nimport { PolarCoordinate } from '../spec';\n\nexport type PolarOptions = Omit<PolarCoordinate, 'type'>;\n\nexport const getPolarOptions = (options: PolarOptions = {}) => {\n  const defaultOptions = {\n    startAngle: -Math.PI / 2,\n    endAngle: (Math.PI * 3) / 2,\n    innerRadius: 0,\n    outerRadius: 1,\n  };\n  const polarOption = { ...defaultOptions, ...options };\n  return {\n    ...polarOption,\n    ...convertAngles(polarOption.startAngle, polarOption.endAngle),\n  };\n};\n/**\n * Polar transformation for circular charts using center of canvas as origin.\n * @todo Adjust size of canvas by startAngle and endAngle to make chart as big as possible.\n */\nexport const Polar: CC<PolarOptions> = (options) => {\n  const { startAngle, endAngle, innerRadius, outerRadius } =\n    getPolarOptions(options);\n  return [\n    ['translate', 0, 0.5],\n    ['reflect.y'],\n    ['translate', 0, -0.5],\n    ['polar', startAngle, endAngle, innerRadius, outerRadius],\n  ];\n};\n\nPolar.props = {};\n", "import { CoordinateComponent as CC } from '../runtime';\nimport { HelixCoordinate } from '../spec';\n\nexport type HelixOptions = HelixCoordinate;\n\n/**\n * Helix\n */\nexport const Helix: CC<HelixOptions> = ({\n  startAngle = 0,\n  endAngle = Math.PI * 6,\n  innerRadius = 0,\n  outerRadius = 1,\n}) => [\n  ['translate', 0.5, 0.5],\n  ['reflect.y'],\n  ['translate', -0.5, -0.5],\n  ['helix', startAngle, endAngle, innerRadius, outerRadius],\n];\n\nHelix.props = {};\n", "import { CoordinateComponent as CC } from '../runtime';\nimport { TransposeCoordinate } from '../spec';\n\nexport type TransposeOptions = Omit<TransposeCoordinate, 'type'>;\n\n/**\n * Transpose transformation for transposing chart according to center of canvas.\n */\nexport const Transpose: CC<TransposeOptions> = () => [\n  ['transpose'],\n  ['translate', 0.5, 0.5],\n  ['reflect.x'],\n  ['translate', -0.5, -0.5],\n];\n\nTranspose.props = { transform: true };\n", "import { CoordinateComponent as CC } from '../runtime';\nimport { ThetaCoordinate } from '../spec';\nimport { Polar } from './polar';\nimport { Transpose } from './transpose';\n\nexport type ThetaOptions = ThetaCoordinate;\n\nexport const getThetaOptions = (options: ThetaOptions = {}) => {\n  const defaultOptions = {\n    startAngle: -Math.PI / 2,\n    endAngle: (Math.PI * 3) / 2,\n    innerRadius: 0,\n    outerRadius: 1,\n  };\n  return { ...defaultOptions, ...options };\n};\n\n/**\n * Theta = Transpose + Polar.\n */\nexport const Theta: CC<ThetaOptions> = (options) => {\n  const { startAngle, endAngle, innerRadius, outerRadius } =\n    getThetaOptions(options);\n  return [\n    ...Transpose(),\n    ...Polar({ startAngle, endAngle, innerRadius, outerRadius }),\n  ];\n};\n\nTheta.props = {};\n", "import { CoordinateComponent as CC } from '../runtime';\nimport { RadialCoordinate } from '../spec';\nimport { Polar } from './polar';\n\nexport type RadialOptions = Omit<RadialCoordinate, 'type'>;\n\nexport const getRadialOptions = (options: RadialOptions = {}) => {\n  const defaultOptions = {\n    startAngle: -Math.PI / 2,\n    endAngle: (Math.PI * 3) / 2,\n    innerRadius: 0,\n    outerRadius: 1,\n  };\n  return { ...defaultOptions, ...options };\n};\n\n/**\n * Radial\n */\nexport const Radial: CC<RadialOptions> = (options) => {\n  const { startAngle, endAngle, innerRadius, outerRadius } =\n    getRadialOptions(options);\n  return [\n    ['transpose'],\n    ['translate', 0.5, 0.5],\n    ['reflect'],\n    ['translate', -0.5, -0.5],\n    ...Polar({ startAngle, endAngle, innerRadius, outerRadius }),\n  ];\n};\n\nRadial.props = {};\n", "import { CoordinateComponent as CC } from '../runtime';\nimport { ParallelCoordinate } from '../spec';\n\nexport type ParallelOptions = Omit<ParallelCoordinate, 'type'>;\n\n/**\n * Parallel coordinate transformations for parallel coordinate.\n */\nexport const Parallel: CC<ParallelOptions> = () => [['parallel', 0, 1, 0, 1]];\n\nParallel.props = {};\n", "import { CoordinateComponent as CC } from '../runtime';\nimport { FisheyeCoordinate } from '../spec';\n\nexport type FisheyeOptions = FisheyeCoordinate;\n\n/**\n * Fisheye\n */\nexport const Fisheye: CC<FisheyeOptions> = ({\n  focusX = 0,\n  focusY = 0,\n  distortionX = 2,\n  distortionY = 2,\n  visual = false,\n}) => [['fisheye', focusX, focusY, distortionX, distortionY, visual]];\n\nFisheye.props = { transform: true };\n", "import { CoordinateComponent as CC } from '../runtime';\nimport { RadarCoordinate } from '../spec';\nimport { Polar } from './polar';\nimport { Parallel } from './parallel';\n\nexport type RadarOptions = RadarCoordinate;\n\n/**\n *  Radar = Parallel + Polar.\n */\nexport const Radar: CC<RadarOptions> = (options) => {\n  const {\n    startAngle = -Math.PI / 2,\n    endAngle = (Math.PI * 3) / 2,\n    innerRadius = 0,\n    outerRadius = 1,\n  } = options;\n  return [\n    ...Parallel(),\n    ...Polar({ startAngle, endAngle, innerRadius, outerRadius }),\n  ];\n};\n\nRadar.props = {};\n", "import { EncodeComponent as EC } from '../runtime';\nimport { ConstantEncode } from '../spec';\n\nexport type ConstantOptions = Omit<ConstantEncode, 'type'>;\n\n/**\n * Extract a column of data filled with the specified constant.\n */\nexport const Constant: EC<ConstantOptions> = ({ value }) => {\n  return (data) => data.map(() => value);\n};\n\nConstant.props = {};\n", "import { EncodeComponent as EC } from '../runtime';\nimport { TransformEncode } from '../spec';\n\nexport type TransformOptions = Omit<TransformEncode, 'type'>;\n\n/**\n * Extract a column of data with specified map function from data.\n * Each datum in the array is not visual data by default.\n * Specifying identity scale for related channel explicitly will treat them as visual data.\n */\nexport const Transform: EC<TransformOptions> = ({ value }) => {\n  return (data) => data.map(value);\n};\n\nTransform.props = {};\n", "import { EncodeComponent as EC } from '../runtime';\nimport { FieldEncode } from '../spec';\n\nexport type FieldOptions = Omit<FieldEncode, 'type'>;\n\n/**\n * Extract a column of data with specified field.\n */\nexport const Field: EC<FieldOptions> = ({ value }) => {\n  return (data) => data.map((d) => d[value]);\n};\n\nField.props = {};\n", "import { EncodeComponent as EC } from '../runtime';\nimport { ColumnEncode } from '../spec';\n\nexport type ColumnOptions = Omit<ColumnEncode, 'type'>;\n\n/**\n * Extract a column of data specified in encoding.\n */\nexport const Column: EC<ColumnOptions> = ({ value }) => {\n  return () => value;\n};\n\nColumn.props = {};\n", "import { Primitive } from '../../runtime';\n\nexport function column(value: Primitive[], field?: string) {\n  if (value === null) return undefined;\n  return { type: 'column', value, field };\n}\n\nexport function inferredColumn(value: Primitive[], field?: string) {\n  const c = column(value, field);\n  return { ...c, inferred: true };\n}\n\nexport function visualColumn(value: Primitive[], field?: string) {\n  if (value === null) return undefined;\n  return { type: 'column', value, field, visual: true };\n}\n\nexport function nonConstantColumn(value: Primitive[], field?: string) {\n  const c = column(value, field);\n  return { ...c, constant: false };\n}\n\nexport function constant(I: number[], value: any) {\n  const array = [];\n  for (const i of I) array[i] = value;\n  return array;\n}\n\nexport function columnOf(encode, key: string): [Primitive[], string] {\n  const channel = encode[key];\n  if (!channel) return [null, null];\n  const { value, field = null } = channel;\n  return [value, field];\n}\n\nexport function maybeColumnOf(\n  encode,\n  ...K: (string | Primitive[])[]\n): [Primitive[], string] {\n  for (const key of K) {\n    if (typeof key === 'string') {\n      const [KV, fv] = columnOf(encode, key);\n      if (KV !== null) return [KV, fv];\n    } else {\n      return [key, null];\n    }\n  }\n  return [null, null];\n}\n\nexport function isObject(d) {\n  if (d instanceof Date) return false;\n  return typeof d === 'object';\n}\n", "import { deepMix } from '@antv/util';\nimport { TransformComponent as TC } from '../runtime';\nimport { inferredColumn, constant } from './utils/helper';\n\nexport type MaybeZeroY1Options = Record<string, never>;\n\n/**\n * Add zero constant encode for y1 channel.\n */\nexport const MaybeZeroY1: TC<MaybeZeroY1Options> = () => {\n  return (I, mark) => {\n    const { encode } = mark;\n    const { y1 } = encode;\n    if (y1 !== undefined) return [I, mark];\n    return [\n      I,\n      deepMix({}, mark, {\n        encode: { y1: inferredColumn(constant(I, 0)) },\n      }),\n    ];\n  };\n};\n\nMaybeZeroY1.props = {};\n", "export default function ascending(a, b) {\n  return a == null || b == null ? NaN : a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n", "export default function descending(a, b) {\n  return a == null || b == null ? NaN\n    : b < a ? -1\n    : b > a ? 1\n    : b >= a ? 0\n    : NaN;\n}\n", "import ascending from \"./ascending.js\";\nimport descending from \"./descending.js\";\n\nexport default function bisector(f) {\n  let compare1, compare2, delta;\n\n  // If an accessor is specified, promote it to a comparator. In this case we\n  // can test whether the search value is (self-) comparable. We cant do this\n  // for a comparator (except for specific, known comparators) because we cant\n  // tell if the comparator is symmetric, and an asymmetric comparator cant be\n  // used to test whether a single value is comparable.\n  if (f.length !== 2) {\n    compare1 = ascending;\n    compare2 = (d, x) => ascending(f(d), x);\n    delta = (d, x) => f(d) - x;\n  } else {\n    compare1 = f === ascending || f === descending ? f : zero;\n    compare2 = f;\n    delta = f;\n  }\n\n  function left(a, x, lo = 0, hi = a.length) {\n    if (lo < hi) {\n      if (compare1(x, x) !== 0) return hi;\n      do {\n        const mid = (lo + hi) >>> 1;\n        if (compare2(a[mid], x) < 0) lo = mid + 1;\n        else hi = mid;\n      } while (lo < hi);\n    }\n    return lo;\n  }\n\n  function right(a, x, lo = 0, hi = a.length) {\n    if (lo < hi) {\n      if (compare1(x, x) !== 0) return hi;\n      do {\n        const mid = (lo + hi) >>> 1;\n        if (compare2(a[mid], x) <= 0) lo = mid + 1;\n        else hi = mid;\n      } while (lo < hi);\n    }\n    return lo;\n  }\n\n  function center(a, x, lo = 0, hi = a.length) {\n    const i = left(a, x, lo, hi - 1);\n    return i > lo && delta(a[i - 1], x) > -delta(a[i], x) ? i - 1 : i;\n  }\n\n  return {left, center, right};\n}\n\nfunction zero() {\n  return 0;\n}\n", "export default function number(x) {\n  return x === null ? NaN : +x;\n}\n\nexport function* numbers(values, valueof) {\n  if (valueof === undefined) {\n    for (let value of values) {\n      if (value != null && (value = +value) >= value) {\n        yield value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null && (value = +value) >= value) {\n        yield value;\n      }\n    }\n  }\n}\n", "import ascending from \"./ascending.js\";\nimport bisector from \"./bisector.js\";\nimport number from \"./number.js\";\n\nconst ascendingBisect = bisector(ascending);\nexport const bisectRight = ascendingBisect.right;\nexport const bisectLeft = ascendingBisect.left;\nexport const bisectCenter = bisector(number).center;\nexport default bisectRight;\n", "export function blur(values, r) {\n  if (!((r = +r) >= 0)) throw new RangeError(\"invalid r\");\n  let length = values.length;\n  if (!((length = Math.floor(length)) >= 0)) throw new RangeError(\"invalid length\");\n  if (!length || !r) return values;\n  const blur = blurf(r);\n  const temp = values.slice();\n  blur(values, temp, 0, length, 1);\n  blur(temp, values, 0, length, 1);\n  blur(values, temp, 0, length, 1);\n  return values;\n}\n\nexport const blur2 = Blur2(blurf);\n\nexport const blurImage = Blur2(blurfImage);\n\nfunction Blur2(blur) {\n  return function(data, rx, ry = rx) {\n    if (!((rx = +rx) >= 0)) throw new RangeError(\"invalid rx\");\n    if (!((ry = +ry) >= 0)) throw new RangeError(\"invalid ry\");\n    let {data: values, width, height} = data;\n    if (!((width = Math.floor(width)) >= 0)) throw new RangeError(\"invalid width\");\n    if (!((height = Math.floor(height !== undefined ? height : values.length / width)) >= 0)) throw new RangeError(\"invalid height\");\n    if (!width || !height || (!rx && !ry)) return data;\n    const blurx = rx && blur(rx);\n    const blury = ry && blur(ry);\n    const temp = values.slice();\n    if (blurx && blury) {\n      blurh(blurx, temp, values, width, height);\n      blurh(blurx, values, temp, width, height);\n      blurh(blurx, temp, values, width, height);\n      blurv(blury, values, temp, width, height);\n      blurv(blury, temp, values, width, height);\n      blurv(blury, values, temp, width, height);\n    } else if (blurx) {\n      blurh(blurx, values, temp, width, height);\n      blurh(blurx, temp, values, width, height);\n      blurh(blurx, values, temp, width, height);\n    } else if (blury) {\n      blurv(blury, values, temp, width, height);\n      blurv(blury, temp, values, width, height);\n      blurv(blury, values, temp, width, height);\n    }\n    return data;\n  };\n}\n\nfunction blurh(blur, T, S, w, h) {\n  for (let y = 0, n = w * h; y < n;) {\n    blur(T, S, y, y += w, 1);\n  }\n}\n\nfunction blurv(blur, T, S, w, h) {\n  for (let x = 0, n = w * h; x < w; ++x) {\n    blur(T, S, x, x + n, w);\n  }\n}\n\nfunction blurfImage(radius) {\n  const blur = blurf(radius);\n  return (T, S, start, stop, step) => {\n    start <<= 2, stop <<= 2, step <<= 2;\n    blur(T, S, start + 0, stop + 0, step);\n    blur(T, S, start + 1, stop + 1, step);\n    blur(T, S, start + 2, stop + 2, step);\n    blur(T, S, start + 3, stop + 3, step);\n  };\n}\n\n// Given a target array T, a source array S, sets each value T[i] to the average\n// of {S[i - r], , S[i], , S[i + r]}, where r = radius, start <= i < stop,\n// for each i, i + step, i + 2 * step, etc., and where S[j] is clamped between\n// S[start] (inclusive) and S[stop] (exclusive). If the given radius is not an\n// integer, S[i - r - 1] and S[i + r + 1] are added to the sum, each weighted\n// according to r - radius.\nfunction blurf(radius) {\n  const radius0 = Math.floor(radius);\n  if (radius0 === radius) return bluri(radius);\n  const t = radius - radius0;\n  const w = 2 * radius + 1;\n  return (T, S, start, stop, step) => { // stop must be aligned!\n    if (!((stop -= step) >= start)) return; // inclusive stop\n    let sum = radius0 * S[start];\n    const s0 = step * radius0;\n    const s1 = s0 + step;\n    for (let i = start, j = start + s0; i < j; i += step) {\n      sum += S[Math.min(stop, i)];\n    }\n    for (let i = start, j = stop; i <= j; i += step) {\n      sum += S[Math.min(stop, i + s0)];\n      T[i] = (sum + t * (S[Math.max(start, i - s1)] + S[Math.min(stop, i + s1)])) / w;\n      sum -= S[Math.max(start, i - s0)];\n    }\n  };\n}\n\n// Like blurf, but optimized for integer radius.\nfunction bluri(radius) {\n  const w = 2 * radius + 1;\n  return (T, S, start, stop, step) => { // stop must be aligned!\n    if (!((stop -= step) >= start)) return; // inclusive stop\n    let sum = radius * S[start];\n    const s = step * radius;\n    for (let i = start, j = start + s; i < j; i += step) {\n      sum += S[Math.min(stop, i)];\n    }\n    for (let i = start, j = stop; i <= j; i += step) {\n      sum += S[Math.min(stop, i + s)];\n      T[i] = sum / w;\n      sum -= S[Math.max(start, i - s)];\n    }\n  };\n}\n", "export default function count(values, valueof) {\n  let count = 0;\n  if (valueof === undefined) {\n    for (let value of values) {\n      if (value != null && (value = +value) >= value) {\n        ++count;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null && (value = +value) >= value) {\n        ++count;\n      }\n    }\n  }\n  return count;\n}\n", "export default function variance(values, valueof) {\n  let count = 0;\n  let delta;\n  let mean = 0;\n  let sum = 0;\n  if (valueof === undefined) {\n    for (let value of values) {\n      if (value != null && (value = +value) >= value) {\n        delta = value - mean;\n        mean += delta / ++count;\n        sum += delta * (value - mean);\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null && (value = +value) >= value) {\n        delta = value - mean;\n        mean += delta / ++count;\n        sum += delta * (value - mean);\n      }\n    }\n  }\n  if (count > 1) return sum / (count - 1);\n}\n", "import variance from \"./variance.js\";\n\nexport default function deviation(values, valueof) {\n  const v = variance(values, valueof);\n  return v ? Math.sqrt(v) : v;\n}\n", "export default function extent(values, valueof) {\n  let min;\n  let max;\n  if (valueof === undefined) {\n    for (const value of values) {\n      if (value != null) {\n        if (min === undefined) {\n          if (value >= value) min = max = value;\n        } else {\n          if (min > value) min = value;\n          if (max < value) max = value;\n        }\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null) {\n        if (min === undefined) {\n          if (value >= value) min = max = value;\n        } else {\n          if (min > value) min = value;\n          if (max < value) max = value;\n        }\n      }\n    }\n  }\n  return [min, max];\n}\n", "// https://github.com/python/cpython/blob/a74eea238f5baba15797e2e8b570d153bc8690a7/Modules/mathmodule.c#L1423\nexport class Adder {\n  constructor() {\n    this._partials = new Float64Array(32);\n    this._n = 0;\n  }\n  add(x) {\n    const p = this._partials;\n    let i = 0;\n    for (let j = 0; j < this._n && j < 32; j++) {\n      const y = p[j],\n        hi = x + y,\n        lo = Math.abs(x) < Math.abs(y) ? x - (hi - y) : y - (hi - x);\n      if (lo) p[i++] = lo;\n      x = hi;\n    }\n    p[i] = x;\n    this._n = i + 1;\n    return this;\n  }\n  valueOf() {\n    const p = this._partials;\n    let n = this._n, x, y, lo, hi = 0;\n    if (n > 0) {\n      hi = p[--n];\n      while (n > 0) {\n        x = hi;\n        y = p[--n];\n        hi = x + y;\n        lo = y - (hi - x);\n        if (lo) break;\n      }\n      if (n > 0 && ((lo < 0 && p[n - 1] < 0) || (lo > 0 && p[n - 1] > 0))) {\n        y = lo * 2;\n        x = hi + y;\n        if (y == x - hi) hi = x;\n      }\n    }\n    return hi;\n  }\n}\n\nexport function fsum(values, valueof) {\n  const adder = new Adder();\n  if (valueof === undefined) {\n    for (let value of values) {\n      if (value = +value) {\n        adder.add(value);\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if (value = +valueof(value, ++index, values)) {\n        adder.add(value);\n      }\n    }\n  }\n  return +adder;\n}\n\nexport function fcumsum(values, valueof) {\n  const adder = new Adder();\n  let index = -1;\n  return Float64Array.from(values, valueof === undefined\n      ? v => adder.add(+v || 0)\n      : v => adder.add(+valueof(v, ++index, values) || 0)\n  );\n}\n", "export class InternMap extends Map {\n  constructor(entries, key = keyof) {\n    super();\n    Object.defineProperties(this, {_intern: {value: new Map()}, _key: {value: key}});\n    if (entries != null) for (const [key, value] of entries) this.set(key, value);\n  }\n  get(key) {\n    return super.get(intern_get(this, key));\n  }\n  has(key) {\n    return super.has(intern_get(this, key));\n  }\n  set(key, value) {\n    return super.set(intern_set(this, key), value);\n  }\n  delete(key) {\n    return super.delete(intern_delete(this, key));\n  }\n}\n\nexport class InternSet extends Set {\n  constructor(values, key = keyof) {\n    super();\n    Object.defineProperties(this, {_intern: {value: new Map()}, _key: {value: key}});\n    if (values != null) for (const value of values) this.add(value);\n  }\n  has(value) {\n    return super.has(intern_get(this, value));\n  }\n  add(value) {\n    return super.add(intern_set(this, value));\n  }\n  delete(value) {\n    return super.delete(intern_delete(this, value));\n  }\n}\n\nfunction intern_get({_intern, _key}, value) {\n  const key = _key(value);\n  return _intern.has(key) ? _intern.get(key) : value;\n}\n\nfunction intern_set({_intern, _key}, value) {\n  const key = _key(value);\n  if (_intern.has(key)) return _intern.get(key);\n  _intern.set(key, value);\n  return value;\n}\n\nfunction intern_delete({_intern, _key}, value) {\n  const key = _key(value);\n  if (_intern.has(key)) {\n    value = _intern.get(key);\n    _intern.delete(key);\n  }\n  return value;\n}\n\nfunction keyof(value) {\n  return value !== null && typeof value === \"object\" ? value.valueOf() : value;\n}\n", "export default function identity(x) {\n  return x;\n}\n", "import {InternMap} from \"internmap\";\nimport identity from \"./identity.js\";\n\nexport default function group(values, ...keys) {\n  return nest(values, identity, identity, keys);\n}\n\nexport function groups(values, ...keys) {\n  return nest(values, Array.from, identity, keys);\n}\n\nfunction flatten(groups, keys) {\n  for (let i = 1, n = keys.length; i < n; ++i) {\n    groups = groups.flatMap(g => g.pop().map(([key, value]) => [...g, key, value]));\n  }\n  return groups;\n}\n\nexport function flatGroup(values, ...keys) {\n  return flatten(groups(values, ...keys), keys);\n}\n\nexport function flatRollup(values, reduce, ...keys) {\n  return flatten(rollups(values, reduce, ...keys), keys);\n}\n\nexport function rollup(values, reduce, ...keys) {\n  return nest(values, identity, reduce, keys);\n}\n\nexport function rollups(values, reduce, ...keys) {\n  return nest(values, Array.from, reduce, keys);\n}\n\nexport function index(values, ...keys) {\n  return nest(values, identity, unique, keys);\n}\n\nexport function indexes(values, ...keys) {\n  return nest(values, Array.from, unique, keys);\n}\n\nfunction unique(values) {\n  if (values.length !== 1) throw new Error(\"duplicate key\");\n  return values[0];\n}\n\nfunction nest(values, map, reduce, keys) {\n  return (function regroup(values, i) {\n    if (i >= keys.length) return reduce(values);\n    const groups = new InternMap();\n    const keyof = keys[i++];\n    let index = -1;\n    for (const value of values) {\n      const key = keyof(value, ++index, values);\n      const group = groups.get(key);\n      if (group) group.push(value);\n      else groups.set(key, [value]);\n    }\n    for (const [key, values] of groups) {\n      groups.set(key, regroup(values, i));\n    }\n    return map(groups);\n  })(values, 0);\n}\n", "export default function permute(source, keys) {\n  return Array.from(keys, key => source[key]);\n}\n", "import ascending from \"./ascending.js\";\nimport permute from \"./permute.js\";\n\nexport default function sort(values, ...F) {\n  if (typeof values[Symbol.iterator] !== \"function\") throw new TypeError(\"values is not iterable\");\n  values = Array.from(values);\n  let [f] = F;\n  if ((f && f.length !== 2) || F.length > 1) {\n    const index = Uint32Array.from(values, (d, i) => i);\n    if (F.length > 1) {\n      F = F.map(f => values.map(f));\n      index.sort((i, j) => {\n        for (const f of F) {\n          const c = ascendingDefined(f[i], f[j]);\n          if (c) return c;\n        }\n      });\n    } else {\n      f = values.map(f);\n      index.sort((i, j) => ascendingDefined(f[i], f[j]));\n    }\n    return permute(values, index);\n  }\n  return values.sort(compareDefined(f));\n}\n\nexport function compareDefined(compare = ascending) {\n  if (compare === ascending) return ascendingDefined;\n  if (typeof compare !== \"function\") throw new TypeError(\"compare is not a function\");\n  return (a, b) => {\n    const x = compare(a, b);\n    if (x || x === 0) return x;\n    return (compare(b, b) === 0) - (compare(a, a) === 0);\n  };\n}\n\nexport function ascendingDefined(a, b) {\n  return (a == null || !(a >= a)) - (b == null || !(b >= b)) || (a < b ? -1 : a > b ? 1 : 0);\n}\n", "import ascending from \"./ascending.js\";\nimport group, {rollup} from \"./group.js\";\nimport sort from \"./sort.js\";\n\nexport default function groupSort(values, reduce, key) {\n  return (reduce.length !== 2\n    ? sort(rollup(values, reduce, key), (([ak, av], [bk, bv]) => ascending(av, bv) || ascending(ak, bk)))\n    : sort(group(values, key), (([ak, av], [bk, bv]) => reduce(av, bv) || ascending(ak, bk))))\n    .map(([key]) => key);\n}\n", "var array = Array.prototype;\n\nexport var slice = array.slice;\nexport var map = array.map;\n", "export default function constant(x) {\n  return () => x;\n}\n", "const e10 = Math.sqrt(50),\n    e5 = Math.sqrt(10),\n    e2 = Math.sqrt(2);\n\nfunction tickSpec(start, stop, count) {\n  const step = (stop - start) / Math.max(0, count),\n      power = Math.floor(Math.log10(step)),\n      error = step / Math.pow(10, power),\n      factor = error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1;\n  let i1, i2, inc;\n  if (power < 0) {\n    inc = Math.pow(10, -power) / factor;\n    i1 = Math.round(start * inc);\n    i2 = Math.round(stop * inc);\n    if (i1 / inc < start) ++i1;\n    if (i2 / inc > stop) --i2;\n    inc = -inc;\n  } else {\n    inc = Math.pow(10, power) * factor;\n    i1 = Math.round(start / inc);\n    i2 = Math.round(stop / inc);\n    if (i1 * inc < start) ++i1;\n    if (i2 * inc > stop) --i2;\n  }\n  if (i2 < i1 && 0.5 <= count && count < 2) return tickSpec(start, stop, count * 2);\n  return [i1, i2, inc];\n}\n\nexport default function ticks(start, stop, count) {\n  stop = +stop, start = +start, count = +count;\n  if (!(count > 0)) return [];\n  if (start === stop) return [start];\n  const reverse = stop < start, [i1, i2, inc] = reverse ? tickSpec(stop, start, count) : tickSpec(start, stop, count);\n  if (!(i2 >= i1)) return [];\n  const n = i2 - i1 + 1, ticks = new Array(n);\n  if (reverse) {\n    if (inc < 0) for (let i = 0; i < n; ++i) ticks[i] = (i2 - i) / -inc;\n    else for (let i = 0; i < n; ++i) ticks[i] = (i2 - i) * inc;\n  } else {\n    if (inc < 0) for (let i = 0; i < n; ++i) ticks[i] = (i1 + i) / -inc;\n    else for (let i = 0; i < n; ++i) ticks[i] = (i1 + i) * inc;\n  }\n  return ticks;\n}\n\nexport function tickIncrement(start, stop, count) {\n  stop = +stop, start = +start, count = +count;\n  return tickSpec(start, stop, count)[2];\n}\n\nexport function tickStep(start, stop, count) {\n  stop = +stop, start = +start, count = +count;\n  const reverse = stop < start, inc = reverse ? tickIncrement(stop, start, count) : tickIncrement(start, stop, count);\n  return (reverse ? -1 : 1) * (inc < 0 ? 1 / -inc : inc);\n}\n", "import {tickIncrement} from \"./ticks.js\";\n\nexport default function nice(start, stop, count) {\n  let prestep;\n  while (true) {\n    const step = tickIncrement(start, stop, count);\n    if (step === prestep || step === 0 || !isFinite(step)) {\n      return [start, stop];\n    } else if (step > 0) {\n      start = Math.floor(start / step) * step;\n      stop = Math.ceil(stop / step) * step;\n    } else if (step < 0) {\n      start = Math.ceil(start * step) / step;\n      stop = Math.floor(stop * step) / step;\n    }\n    prestep = step;\n  }\n}\n", "import count from \"../count.js\";\n\nexport default function thresholdSturges(values) {\n  return Math.max(1, Math.ceil(Math.log(count(values)) / Math.LN2) + 1);\n}\n", "import {slice} from \"./array.js\";\nimport bisect from \"./bisect.js\";\nimport constant from \"./constant.js\";\nimport extent from \"./extent.js\";\nimport identity from \"./identity.js\";\nimport nice from \"./nice.js\";\nimport ticks, {tickIncrement} from \"./ticks.js\";\nimport sturges from \"./threshold/sturges.js\";\n\nexport default function bin() {\n  var value = identity,\n      domain = extent,\n      threshold = sturges;\n\n  function histogram(data) {\n    if (!Array.isArray(data)) data = Array.from(data);\n\n    var i,\n        n = data.length,\n        x,\n        step,\n        values = new Array(n);\n\n    for (i = 0; i < n; ++i) {\n      values[i] = value(data[i], i, data);\n    }\n\n    var xz = domain(values),\n        x0 = xz[0],\n        x1 = xz[1],\n        tz = threshold(values, x0, x1);\n\n    // Convert number of thresholds into uniform thresholds, and nice the\n    // default domain accordingly.\n    if (!Array.isArray(tz)) {\n      const max = x1, tn = +tz;\n      if (domain === extent) [x0, x1] = nice(x0, x1, tn);\n      tz = ticks(x0, x1, tn);\n\n      // If the domain is aligned with the first tick (which it will by\n      // default), then we can use quantization rather than bisection to bin\n      // values, which is substantially faster.\n      if (tz[0] <= x0) step = tickIncrement(x0, x1, tn);\n\n      // If the last threshold is coincident with the domains upper bound, the\n      // last bin will be zero-width. If the default domain is used, and this\n      // last threshold is coincident with the maximum input value, we can\n      // extend the niced upper bound by one tick to ensure uniform bin widths;\n      // otherwise, we simply remove the last threshold. Note that we dont\n      // coerce values or the domain to numbers, and thus must be careful to\n      // compare order (>=) rather than strict equality (===)!\n      if (tz[tz.length - 1] >= x1) {\n        if (max >= x1 && domain === extent) {\n          const step = tickIncrement(x0, x1, tn);\n          if (isFinite(step)) {\n            if (step > 0) {\n              x1 = (Math.floor(x1 / step) + 1) * step;\n            } else if (step < 0) {\n              x1 = (Math.ceil(x1 * -step) + 1) / -step;\n            }\n          }\n        } else {\n          tz.pop();\n        }\n      }\n    }\n\n    // Remove any thresholds outside the domain.\n    // Be careful not to mutate an array owned by the user!\n    var m = tz.length, a = 0, b = m;\n    while (tz[a] <= x0) ++a;\n    while (tz[b - 1] > x1) --b;\n    if (a || b < m) tz = tz.slice(a, b), m = b - a;\n\n    var bins = new Array(m + 1),\n        bin;\n\n    // Initialize bins.\n    for (i = 0; i <= m; ++i) {\n      bin = bins[i] = [];\n      bin.x0 = i > 0 ? tz[i - 1] : x0;\n      bin.x1 = i < m ? tz[i] : x1;\n    }\n\n    // Assign data to bins by value, ignoring any outside the domain.\n    if (isFinite(step)) {\n      if (step > 0) {\n        for (i = 0; i < n; ++i) {\n          if ((x = values[i]) != null && x0 <= x && x <= x1) {\n            bins[Math.min(m, Math.floor((x - x0) / step))].push(data[i]);\n          }\n        }\n      } else if (step < 0) {\n        for (i = 0; i < n; ++i) {\n          if ((x = values[i]) != null && x0 <= x && x <= x1) {\n            const j = Math.floor((x0 - x) * step);\n            bins[Math.min(m, j + (tz[j] <= x))].push(data[i]); // handle off-by-one due to rounding\n          }\n        }\n      }\n    } else {\n      for (i = 0; i < n; ++i) {\n        if ((x = values[i]) != null && x0 <= x && x <= x1) {\n          bins[bisect(tz, x, 0, m)].push(data[i]);\n        }\n      }\n    }\n\n    return bins;\n  }\n\n  histogram.value = function(_) {\n    return arguments.length ? (value = typeof _ === \"function\" ? _ : constant(_), histogram) : value;\n  };\n\n  histogram.domain = function(_) {\n    return arguments.length ? (domain = typeof _ === \"function\" ? _ : constant([_[0], _[1]]), histogram) : domain;\n  };\n\n  histogram.thresholds = function(_) {\n    return arguments.length ? (threshold = typeof _ === \"function\" ? _ : constant(Array.isArray(_) ? slice.call(_) : _), histogram) : threshold;\n  };\n\n  return histogram;\n}\n", "export default function max(values, valueof) {\n  let max;\n  if (valueof === undefined) {\n    for (const value of values) {\n      if (value != null\n          && (max < value || (max === undefined && value >= value))) {\n        max = value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null\n          && (max < value || (max === undefined && value >= value))) {\n        max = value;\n      }\n    }\n  }\n  return max;\n}\n", "export default function maxIndex(values, valueof) {\n  let max;\n  let maxIndex = -1;\n  let index = -1;\n  if (valueof === undefined) {\n    for (const value of values) {\n      ++index;\n      if (value != null\n          && (max < value || (max === undefined && value >= value))) {\n        max = value, maxIndex = index;\n      }\n    }\n  } else {\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null\n          && (max < value || (max === undefined && value >= value))) {\n        max = value, maxIndex = index;\n      }\n    }\n  }\n  return maxIndex;\n}\n", "export default function min(values, valueof) {\n  let min;\n  if (valueof === undefined) {\n    for (const value of values) {\n      if (value != null\n          && (min > value || (min === undefined && value >= value))) {\n        min = value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null\n          && (min > value || (min === undefined && value >= value))) {\n        min = value;\n      }\n    }\n  }\n  return min;\n}\n", "export default function minIndex(values, valueof) {\n  let min;\n  let minIndex = -1;\n  let index = -1;\n  if (valueof === undefined) {\n    for (const value of values) {\n      ++index;\n      if (value != null\n          && (min > value || (min === undefined && value >= value))) {\n        min = value, minIndex = index;\n      }\n    }\n  } else {\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null\n          && (min > value || (min === undefined && value >= value))) {\n        min = value, minIndex = index;\n      }\n    }\n  }\n  return minIndex;\n}\n", "import {ascendingDefined, compareDefined} from \"./sort.js\";\n\n// Based on https://github.com/mourner/quickselect\n// ISC license, Copyright 2018 Vladimir Agafonkin.\nexport default function quickselect(array, k, left = 0, right = Infinity, compare) {\n  k = Math.floor(k);\n  left = Math.floor(Math.max(0, left));\n  right = Math.floor(Math.min(array.length - 1, right));\n\n  if (!(left <= k && k <= right)) return array;\n\n  compare = compare === undefined ? ascendingDefined : compareDefined(compare);\n\n  while (right > left) {\n    if (right - left > 600) {\n      const n = right - left + 1;\n      const m = k - left + 1;\n      const z = Math.log(n);\n      const s = 0.5 * Math.exp(2 * z / 3);\n      const sd = 0.5 * Math.sqrt(z * s * (n - s) / n) * (m - n / 2 < 0 ? -1 : 1);\n      const newLeft = Math.max(left, Math.floor(k - m * s / n + sd));\n      const newRight = Math.min(right, Math.floor(k + (n - m) * s / n + sd));\n      quickselect(array, k, newLeft, newRight, compare);\n    }\n\n    const t = array[k];\n    let i = left;\n    let j = right;\n\n    swap(array, left, k);\n    if (compare(array[right], t) > 0) swap(array, left, right);\n\n    while (i < j) {\n      swap(array, i, j), ++i, --j;\n      while (compare(array[i], t) < 0) ++i;\n      while (compare(array[j], t) > 0) --j;\n    }\n\n    if (compare(array[left], t) === 0) swap(array, left, j);\n    else ++j, swap(array, j, right);\n\n    if (j <= k) left = j + 1;\n    if (k <= j) right = j - 1;\n  }\n\n  return array;\n}\n\nfunction swap(array, i, j) {\n  const t = array[i];\n  array[i] = array[j];\n  array[j] = t;\n}\n", "import ascending from \"./ascending.js\";\n\nexport default function greatest(values, compare = ascending) {\n  let max;\n  let defined = false;\n  if (compare.length === 1) {\n    let maxValue;\n    for (const element of values) {\n      const value = compare(element);\n      if (defined\n          ? ascending(value, maxValue) > 0\n          : ascending(value, value) === 0) {\n        max = element;\n        maxValue = value;\n        defined = true;\n      }\n    }\n  } else {\n    for (const value of values) {\n      if (defined\n          ? compare(value, max) > 0\n          : compare(value, value) === 0) {\n        max = value;\n        defined = true;\n      }\n    }\n  }\n  return max;\n}\n", "import max from \"./max.js\";\nimport maxIndex from \"./maxIndex.js\";\nimport min from \"./min.js\";\nimport minIndex from \"./minIndex.js\";\nimport quickselect from \"./quickselect.js\";\nimport number, {numbers} from \"./number.js\";\nimport {ascendingDefined} from \"./sort.js\";\nimport greatest from \"./greatest.js\";\n\nexport default function quantile(values, p, valueof) {\n  values = Float64Array.from(numbers(values, valueof));\n  if (!(n = values.length) || isNaN(p = +p)) return;\n  if (p <= 0 || n < 2) return min(values);\n  if (p >= 1) return max(values);\n  var n,\n      i = (n - 1) * p,\n      i0 = Math.floor(i),\n      value0 = max(quickselect(values, i0).subarray(0, i0 + 1)),\n      value1 = min(values.subarray(i0 + 1));\n  return value0 + (value1 - value0) * (i - i0);\n}\n\nexport function quantileSorted(values, p, valueof = number) {\n  if (!(n = values.length) || isNaN(p = +p)) return;\n  if (p <= 0 || n < 2) return +valueof(values[0], 0, values);\n  if (p >= 1) return +valueof(values[n - 1], n - 1, values);\n  var n,\n      i = (n - 1) * p,\n      i0 = Math.floor(i),\n      value0 = +valueof(values[i0], i0, values),\n      value1 = +valueof(values[i0 + 1], i0 + 1, values);\n  return value0 + (value1 - value0) * (i - i0);\n}\n\nexport function quantileIndex(values, p, valueof = number) {\n  if (isNaN(p = +p)) return;\n  numbers = Float64Array.from(values, (_, i) => number(valueof(values[i], i, values)));\n  if (p <= 0) return minIndex(numbers);\n  if (p >= 1) return maxIndex(numbers);\n  var numbers,\n      index = Uint32Array.from(values, (_, i) => i),\n      j = numbers.length - 1,\n      i = Math.floor(j * p);\n  quickselect(index, i, 0, j, (i, j) => ascendingDefined(numbers[i], numbers[j]));\n  i = greatest(index.subarray(0, i + 1), (i) => numbers[i]);\n  return i >= 0 ? i : -1;\n}\n", "import count from \"../count.js\";\nimport deviation from \"../deviation.js\";\n\nexport default function thresholdScott(values, min, max) {\n  const c = count(values), d = deviation(values);\n  return c && d ? Math.ceil((max - min) * Math.cbrt(c) / (3.49 * d)) : 1;\n}\n", "export default function mean(values, valueof) {\n  let count = 0;\n  let sum = 0;\n  if (valueof === undefined) {\n    for (let value of values) {\n      if (value != null && (value = +value) >= value) {\n        ++count, sum += value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null && (value = +value) >= value) {\n        ++count, sum += value;\n      }\n    }\n  }\n  if (count) return sum / count;\n}\n", "import quantile, {quantileIndex} from \"./quantile.js\";\n\nexport default function median(values, valueof) {\n  return quantile(values, 0.5, valueof);\n}\n\nexport function medianIndex(values, valueof) {\n  return quantileIndex(values, 0.5, valueof);\n}\n", "function* flatten(arrays) {\n  for (const array of arrays) {\n    yield* array;\n  }\n}\n\nexport default function merge(arrays) {\n  return Array.from(flatten(arrays));\n}\n", "export default function range(start, stop, step) {\n  start = +start, stop = +stop, step = (n = arguments.length) < 2 ? (stop = start, start = 0, 1) : n < 3 ? 1 : +step;\n\n  var i = -1,\n      n = Math.max(0, Math.ceil((stop - start) / step)) | 0,\n      range = new Array(n);\n\n  while (++i < n) {\n    range[i] = start + i * step;\n  }\n\n  return range;\n}\n", "export default shuffler(Math.random);\n\nexport function shuffler(random) {\n  return function shuffle(array, i0 = 0, i1 = array.length) {\n    let m = i1 - (i0 = +i0);\n    while (m) {\n      const i = random() * m-- | 0, t = array[m + i0];\n      array[m + i0] = array[i + i0];\n      array[i + i0] = t;\n    }\n    return array;\n  };\n}\n", "export default function sum(values, valueof) {\n  let sum = 0;\n  if (valueof === undefined) {\n    for (let value of values) {\n      if (value = +value) {\n        sum += value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if (value = +valueof(value, ++index, values)) {\n        sum += value;\n      }\n    }\n  }\n  return sum;\n}\n", "/**\n * \n * @param fn \n * @param rest \n * @returns \n */\nexport function compose<T>(fn: (x: T) => T, ...rest: ((x: T) => T)[]) {\n  return rest.reduce((pre, cur) => (x) => pre(cur(x)), fn);\n}\n", "/**\n *  normalize  t  [a, b]  [0, 1]\n * @param a  t \n * @param b  t \n * @returns normalize \n */\nexport function createNormalize(a: number, b: number) {\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  return b - a ? (t: number) => (t - a) / (b - a) : (_: number) => 0.5;\n}\n", "/**\n *  clamp \n * @param a \n * @param b \n * @returns clamp \n */\nexport function createClamp(a: number, b: number) {\n  const lo = b < a ? b : a;\n  const hi = a > b ? a : b;\n  return (x: number) => Math.min(Math.max(lo, x), hi);\n}\n", "/**\n *  array[lo, hi)  x i\n * https://github.com/d3/d3-array/blob/master/src/bisector.js\n * @param array \n * @param x \n * @param lo \n * @param hi \n * @returns \n */\nexport function bisect(array: any[], x: number, lo?: number, hi?: number, getter?: (any) => any): number {\n  let i = lo || 0;\n  let j = hi || array.length;\n  const get = getter || ((x) => x);\n  while (i < j) {\n    const mid = Math.floor((i + j) / 2);\n    if (get(array[mid]) > x) {\n      j = mid;\n    } else {\n      i = mid + 1;\n    }\n  }\n  return i;\n}\n", "const e10 = Math.sqrt(50);\nconst e5 = Math.sqrt(10);\nconst e2 = Math.sqrt(2);\n\nexport function tickIncrement(start: number, stop: number, count: number): number {\n  const step = (stop - start) / Math.max(0, count);\n  const power = Math.floor(Math.log(step) / Math.LN10);\n  const error = step / 10 ** power;\n  if (power >= 0) {\n    // eslint-disable-next-line no-nested-ternary\n    return (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1) * 10 ** power;\n  }\n  // eslint-disable-next-line no-nested-ternary\n  return -(10 ** -power) / (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1);\n}\n\nexport function tickStep(start: number, stop: number, count: number) {\n  const step0 = Math.abs(stop - start) / Math.max(0, count);\n  let step1 = 10 ** Math.floor(Math.log(step0) / Math.LN10);\n  const error = step0 / step1;\n  if (error >= e10) step1 *= 10;\n  else if (error >= e5) step1 *= 5;\n  else if (error >= e2) step1 *= 2;\n  return stop < start ? -step1 : step1;\n}\n", "//  d3-ticks nice \n// https://github.com/d3/d3-scale\n\nimport { tickIncrement } from './ticks';\nimport { NiceMethod } from '../types';\n\nexport const d3LinearNice: NiceMethod = (min: number, max: number, count: number = 5) => {\n  const d = [min, max];\n  let i0 = 0;\n  let i1 = d.length - 1;\n  let start = d[i0];\n  let stop = d[i1];\n  let step;\n\n  if (stop < start) {\n    [start, stop] = [stop, start];\n    [i0, i1] = [i1, i0];\n  }\n  step = tickIncrement(start, stop, count);\n\n  if (step > 0) {\n    start = Math.floor(start / step) * step;\n    stop = Math.ceil(stop / step) * step;\n    step = tickIncrement(start, stop, count);\n  } else if (step < 0) {\n    start = Math.ceil(start * step) / step;\n    stop = Math.floor(stop * step) / step;\n    step = tickIncrement(start, stop, count);\n  }\n\n  if (step > 0) {\n    d[i0] = Math.floor(start / step) * step;\n    d[i1] = Math.ceil(stop / step) * step;\n  } else if (step < 0) {\n    d[i0] = Math.ceil(start * step) / step;\n    d[i1] = Math.floor(stop * step) / step;\n  }\n  return d;\n};\n", "export type TimeTransform = (d: Date, ...rest: any[]) => Date;\ntype TimeRange = (start: Date, stop: Date, step: number, shouldAdjust?: boolean) => Date[];\ntype TimeProcess = (d: Date, ...rest: any[]) => void;\ntype TimeField = (d: Date) => number;\n\nexport const DURATION_SECOND = 1000;\nexport const DURATION_MINUTE = DURATION_SECOND * 60;\nexport const DURATION_HOUR = DURATION_MINUTE * 60;\nexport const DURATION_DAY = DURATION_HOUR * 24;\nexport const DURATION_WEEK = DURATION_DAY * 7;\nexport const DURATION_MONTH = DURATION_DAY * 30;\nexport const DURATION_YEAR = DURATION_DAY * 365;\n\nexport type Interval = {\n  floor: TimeTransform;\n  ceil: TimeTransform;\n  range: TimeRange;\n  duration: number;\n};\n\nexport type IntervalMap = {\n  millisecond: Interval;\n  second: Interval;\n  minute: Interval;\n  hour: Interval;\n  day: Interval;\n  week: Interval;\n  month: Interval;\n  year: Interval;\n};\n\nexport function createInterval(duration: number, floorish: TimeProcess, offseti: TimeProcess, field?: TimeField) {\n  const adjust: TimeTransform = (date, step) => {\n    const test = (date: Date) => field(date) % step === 0;\n    let i = step;\n    while (i && !test(date)) {\n      offseti(date, -1);\n      i -= 1;\n    }\n    return date;\n  };\n\n  const floori: TimeProcess = (date, step?: number) => {\n    if (step) adjust(date, step);\n    floorish(date);\n  };\n\n  const floor: TimeTransform = (date, step?: number) => {\n    const d = new Date(+date);\n    floori(d, step);\n    return d;\n  };\n\n  const ceil: TimeTransform = (date, step?: number) => {\n    const d = new Date(+date - 1);\n    floori(d, step);\n    offseti(d, step);\n    floori(d);\n    return d;\n  };\n\n  const range = (start: Date, stop: Date, step: number, shouldAdjust?: boolean) => {\n    const ticks = [];\n    const roundStep = Math.floor(step);\n    const t = shouldAdjust ? ceil(start, step) : ceil(start);\n    for (let i = t; i < stop; offseti(i, roundStep), floori(i)) {\n      ticks.push(new Date(+i));\n    }\n    return ticks;\n  };\n\n  return {\n    ceil,\n    floor,\n    range,\n    duration,\n  };\n}\n\nexport const millisecond: Interval = createInterval(\n  1,\n  (date) => date,\n  (date, step = 1) => {\n    date.setTime(+date + step);\n  },\n  (date) => date.getTime()\n);\n\nexport const second: Interval = createInterval(\n  DURATION_SECOND,\n  (date) => {\n    date.setMilliseconds(0);\n  },\n  (date, step = 1) => {\n    date.setTime(+date + DURATION_SECOND * step);\n  },\n  (date) => date.getSeconds()\n);\n\nexport const minute: Interval = createInterval(\n  DURATION_MINUTE,\n  (date) => {\n    date.setSeconds(0, 0);\n  },\n  (date, step = 1) => {\n    date.setTime(+date + DURATION_MINUTE * step);\n  },\n  (date) => date.getMinutes()\n);\n\nexport const hour: Interval = createInterval(\n  DURATION_HOUR,\n  (date) => {\n    date.setMinutes(0, 0, 0);\n  },\n  (date, step = 1) => {\n    date.setTime(+date + DURATION_HOUR * step);\n  },\n  (date) => date.getHours()\n);\n\nexport const day: Interval = createInterval(\n  DURATION_DAY,\n  (date) => {\n    date.setHours(0, 0, 0, 0);\n  },\n  (date, step = 1) => {\n    date.setTime(+date + DURATION_DAY * step);\n  },\n  (date) => date.getDate() - 1\n);\n\nexport const month: Interval = createInterval(\n  DURATION_MONTH,\n  (date) => {\n    date.setDate(1);\n    date.setHours(0, 0, 0, 0);\n  },\n  (date, step = 1) => {\n    const month = date.getMonth();\n    date.setMonth(month + step);\n  },\n  (date) => date.getMonth()\n);\n\nexport const week: Interval = createInterval(\n  DURATION_WEEK,\n  (date) => {\n    date.setDate(date.getDate() - (date.getDay() % 7));\n    date.setHours(0, 0, 0, 0);\n  },\n  (date, step = 1) => {\n    date.setDate(date.getDate() + 7 * step);\n  },\n  (date) => {\n    const start = month.floor(date);\n    const end = new Date(+date);\n    return Math.floor((+end - +start) / DURATION_WEEK);\n  }\n);\n\nexport const year: Interval = createInterval(\n  DURATION_YEAR,\n  (date) => {\n    date.setMonth(0, 1);\n    date.setHours(0, 0, 0, 0);\n  },\n  (date, step = 1) => {\n    const year = date.getFullYear();\n    date.setFullYear(year + step);\n  },\n  (date) => date.getFullYear()\n);\n\nexport const localIntervalMap: IntervalMap = {\n  millisecond,\n  second,\n  minute,\n  hour,\n  day,\n  week,\n  month,\n  year,\n};\n", "import {\n  Interval,\n  createInterval,\n  IntervalMap,\n  DURATION_SECOND,\n  DURATION_MINUTE,\n  DURATION_HOUR,\n  DURATION_DAY,\n  DURATION_WEEK,\n  DURATION_MONTH,\n  DURATION_YEAR,\n} from './time-interval';\n\nexport const utcMillisecond: Interval = createInterval(\n  1,\n  (date) => date,\n  (date, step = 1) => {\n    date.setTime(+date + step);\n  },\n  (date) => date.getTime()\n);\n\nexport const utcSecond: Interval = createInterval(\n  DURATION_SECOND,\n  (date) => {\n    date.setUTCMilliseconds(0);\n  },\n  (date, step = 1) => {\n    date.setTime(+date + DURATION_SECOND * step);\n  },\n  (date) => date.getUTCSeconds()\n);\n\nexport const utcMinute: Interval = createInterval(\n  DURATION_MINUTE,\n  (date) => {\n    date.setUTCSeconds(0, 0);\n  },\n  (date, step = 1) => {\n    date.setTime(+date + DURATION_MINUTE * step);\n  },\n  (date) => date.getUTCMinutes()\n);\n\nexport const utcHour: Interval = createInterval(\n  DURATION_HOUR,\n  (date) => {\n    date.setUTCMinutes(0, 0, 0);\n  },\n  (date, step = 1) => {\n    date.setTime(+date + DURATION_HOUR * step);\n  },\n  (date) => date.getUTCHours()\n);\n\nexport const utcDay: Interval = createInterval(\n  DURATION_DAY,\n  (date) => {\n    date.setUTCHours(0, 0, 0, 0);\n  },\n  (date, step = 1) => {\n    date.setTime(+date + DURATION_DAY * step);\n  },\n  (date) => date.getUTCDate() - 1\n);\n\nexport const utcMonth: Interval = createInterval(\n  DURATION_MONTH,\n  (date) => {\n    date.setUTCDate(1);\n    date.setUTCHours(0, 0, 0, 0);\n  },\n  (date, step = 1) => {\n    const month = date.getUTCMonth();\n    date.setUTCMonth(month + step);\n  },\n  (date) => date.getUTCMonth()\n);\n\nexport const utcWeek: Interval = createInterval(\n  DURATION_WEEK,\n  (date) => {\n    date.setUTCDate(date.getUTCDate() - ((date.getUTCDay() + 7) % 7));\n    date.setUTCHours(0, 0, 0, 0);\n  },\n  (date, step = 1) => {\n    date.setTime(+date + DURATION_WEEK * step);\n  },\n  (date) => {\n    const start = utcMonth.floor(date);\n    const end = new Date(+date);\n    return Math.floor((+end - +start) / DURATION_WEEK);\n  }\n);\n\nexport const utcYear: Interval = createInterval(\n  DURATION_YEAR,\n  (date) => {\n    date.setUTCMonth(0, 1);\n    date.setUTCHours(0, 0, 0, 0);\n  },\n  (date, step = 1) => {\n    const year = date.getUTCFullYear();\n    date.setUTCFullYear(year + step);\n  },\n  (date) => date.getUTCFullYear()\n);\n\nexport const utcIntervalMap: IntervalMap = {\n  millisecond: utcMillisecond,\n  second: utcSecond,\n  minute: utcMinute,\n  hour: utcHour,\n  day: utcDay,\n  week: utcWeek,\n  month: utcMonth,\n  year: utcYear,\n};\n", "import { Interval, localIntervalMap } from './time-interval';\nimport { utcIntervalMap } from './utc-interval';\nimport { bisect } from './bisect';\nimport { tickStep } from './ticks';\n\ntype TickInterval = [Interval, number];\n\nfunction chooseTickIntervals(utc: boolean): { year: Interval; millisecond: Interval; tickIntervals: TickInterval[] } {\n  const intervalMap = utc ? utcIntervalMap : localIntervalMap;\n  const { year, month, week, day, hour, minute, second, millisecond } = intervalMap;\n  const tickIntervals: TickInterval[] = [\n    [second, 1],\n    [second, 5],\n    [second, 15],\n    [second, 30],\n    [minute, 1],\n    [minute, 5],\n    [minute, 15],\n    [minute, 30],\n    [hour, 1],\n    [hour, 3],\n    [hour, 6],\n    [hour, 12],\n    [day, 1],\n    [day, 2],\n    [week, 1],\n    [month, 1],\n    [month, 3],\n    [year, 1],\n  ];\n  return {\n    tickIntervals,\n    year,\n    millisecond,\n  };\n}\n\nexport function findTickInterval(start: Date, stop: Date, count: number, interval: number, utc: boolean) {\n  const lo = +start;\n  const hi = +stop;\n  const { tickIntervals, year, millisecond } = chooseTickIntervals(utc);\n  const getter = ([interval, count]) => interval.duration * count;\n  const targetCount = interval ? (hi - lo) / interval : count || 5;\n  const targetInterval = interval || (hi - lo) / targetCount;\n\n  const len = tickIntervals.length;\n  const i = bisect(tickIntervals, targetInterval, 0, len, getter);\n  let matchInterval: TickInterval;\n  if (i === len) {\n    const step = tickStep(lo / year.duration, hi / year.duration, targetCount);\n    matchInterval = [year, step];\n  } else if (i) {\n    const closeToLow = targetInterval / getter(tickIntervals[i - 1]) < getter(tickIntervals[i]) / targetInterval;\n    const [timeInterval, targetStep] = closeToLow ? tickIntervals[i - 1] : tickIntervals[i];\n    const step = interval ? Math.ceil(interval / timeInterval.duration) : targetStep;\n    matchInterval = [timeInterval, step];\n  } else {\n    const step = Math.max(tickStep(lo, hi, targetCount), 1);\n    matchInterval = [millisecond, step];\n  }\n  return matchInterval;\n}\n", "import { NiceMethod } from '../types';\nimport { findTickInterval } from './find-tick-interval';\n\nexport const d3TimeNice: NiceMethod<Date> = (min, max, count, interval, utc) => {\n  const r = min > max;\n  const lo = r ? max : min;\n  const hi = r ? min : max;\n  const [tickInterval, step] = findTickInterval(lo, hi, count, interval, utc);\n  const domain = [tickInterval.floor(lo, step), tickInterval.ceil(hi, step)];\n  return r ? domain.reverse() : domain;\n};\n", "import { isNull, isUndefined } from '@antv/util';\n\nexport function isValid(x: any) {\n  return !isUndefined(x) && !isNull(x) && !Number.isNaN(x);\n}\n", "const reflect = (f: Function) => {\n  return (x: number) => -f(-x);\n};\n\nexport const logs = (base: number, shouldReflect: boolean) => {\n  const baseCache = Math.log(base);\n  const log =\n    base === Math.E\n      ? Math.log\n      : base === 10\n      ? Math.log10\n      : base === 2\n      ? Math.log2\n      : (x: number) => Math.log(x) / baseCache;\n  return shouldReflect ? reflect(log) : log;\n};\n\nexport const pows = (base: number, shouldReflect: boolean) => {\n  const pow = base === Math.E ? Math.exp : (x: number) => base ** x;\n  return shouldReflect ? reflect(pow) : pow;\n};\n", "import { TickMethod } from '../types';\nimport { logs, pows } from './log';\n\nexport const d3LogNice: TickMethod = (a, b, _, base) => {\n  const shouldReflect = a < 0;\n  const log = logs(base, shouldReflect);\n  const pow = pows(base, shouldReflect);\n  const r = a > b;\n  const min = r ? b : a;\n  const max = r ? a : b;\n  const niceDomain = [pow(Math.floor(log(min))), pow(Math.ceil(log(max)))];\n  return r ? niceDomain.reverse() : niceDomain;\n};\n", "import { isNumber } from '@antv/util';\nimport { CreateTransform, Transform, Interpolator } from '../types';\nimport { compose } from './compose';\n\nconst createInterpolatorRound = (interpolator: Interpolator) => {\n  return (t: number) => {\n    // If result is not number, it can't be rounded.\n    const res = interpolator(t);\n    return isNumber(res) ? Math.round(res) : res;\n  };\n};\n\nexport function interpolatize(rangeOf: (interpolator: Interpolator) => number[], normalizeDomain: CreateTransform) {\n  return (Scale) => {\n    Scale.prototype.rescale = function () {\n      this.initRange();\n      this.nice();\n      const [transform] = this.chooseTransforms();\n      this.composeOutput(transform, this.chooseClamp(transform));\n    };\n\n    Scale.prototype.initRange = function () {\n      const { interpolator } = this.options;\n      this.options.range = rangeOf(interpolator);\n    };\n\n    Scale.prototype.composeOutput = function (transform: Transform, clamp: Transform) {\n      const { domain, interpolator, round } = this.getOptions();\n      const normalize = normalizeDomain(domain.map(transform));\n      const interpolate = round ? createInterpolatorRound(interpolator) : interpolator;\n      this.output = compose(interpolate, normalize, clamp, transform);\n    };\n\n    Scale.prototype.invert = undefined;\n  };\n}\n", "import colorString from 'color-string';\n\nfunction hue2rgb(p: number, q: number, m: number) {\n  let t = m;\n  if (t < 0) t += 1;\n  if (t > 1) t -= 1;\n  if (t < 1 / 6) return p + (q - p) * 6 * t;\n  if (t < 1 / 2) return q;\n  if (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6;\n  return p;\n}\n\nfunction hsl2rbg(hsl: number[]) {\n  const h = hsl[0] / 360;\n  const s = hsl[1] / 100;\n  const l = hsl[2] / 100;\n  const a = hsl[3];\n\n  if (s === 0) return [l * 255, l * 255, l * 255, a];\n\n  const q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n  const p = 2 * l - q;\n  const r = hue2rgb(p, q, h + 1 / 3);\n  const g = hue2rgb(p, q, h);\n  const b = hue2rgb(p, q, h - 1 / 3);\n  return [r * 255, g * 255, b * 255, a];\n}\n\nexport function string2rbg(s: string) {\n  const color = colorString.get(s);\n  if (!color) return null;\n  const { model, value } = color;\n  if (model === 'rgb') return value;\n  if (model === 'hsl') return hsl2rbg(value);\n  return null;\n}\n", "import { Interpolate } from '../types';\nimport { string2rbg } from './color';\n\n/**\n * \n * @param a \n * @param b \n * @returns \n */\nexport const createInterpolateNumber: Interpolate<number> = (a, b) => {\n  return (t) => a * (1 - t) + b * t;\n};\n\nexport const createInterpolateColor: Interpolate<string> = (a, b) => {\n  const c1 = string2rbg(a);\n  const c2 = string2rbg(b);\n  if (c1 === null || c2 === null) return c1 ? () => a : () => b;\n  return (t) => {\n    const values = new Array(4);\n    for (let i = 0; i < 4; i += 1) {\n      const from = c1[i];\n      const to = c2[i];\n      values[i] = from * (1 - t) + to * t;\n    }\n    const [r, g, b, a] = values as number[];\n    return `rgba(${Math.round(r)}, ${Math.round(g)}, ${Math.round(b)}, ${a})`;\n  };\n};\n\n/**\n * \n * @param a \n * @param b \n * @returns \n */\nexport const createInterpolateValue: Interpolate<number | string> = (a, b) => {\n  if (typeof a === 'number' && typeof b === 'number') return createInterpolateNumber(a, b);\n  if (typeof a === 'string' && typeof b === 'string') return createInterpolateColor(a, b);\n  return () => a;\n};\n\n/**\n *  round \n * @param a \n * @param b \n * @returns \n */\nexport const createInterpolateRound: Interpolate<number> = (a, b) => {\n  const interpolateNumber = createInterpolateNumber(a, b);\n  return (t) => Math.round(interpolateNumber(t));\n};\n", "import { IntervalMap } from './time-interval';\n\nexport function chooseNiceTimeMask(date: Date, intervalMap: IntervalMap): string {\n  const { second, minute, hour, day, week, month, year } = intervalMap;\n  if (second.floor(date) < date) return '.SSS';\n  if (minute.floor(date) < date) return ':ss';\n  if (hour.floor(date) < date) return 'hh:mm';\n  if (day.floor(date) < date) return 'hh A';\n  if (month.floor(date) < date) {\n    if (week.floor(date) < date) return 'MMM DD';\n    return 'ddd DD';\n  }\n  if (year.floor(date) < date) return 'MMMM';\n  return 'YYYY';\n}\n", "function internGet({ map, initKey }, value) {\n  const key = initKey(value);\n  return map.has(key) ? map.get(key) : value;\n}\n\nfunction internSet({ map, initKey }, value) {\n  const key = initKey(value);\n  if (map.has(key)) return map.get(key);\n  map.set(key, value);\n  return value;\n}\n\nfunction internDelete({ map, initKey }, value) {\n  const key = initKey(value);\n  if (map.has(key)) {\n    value = map.get(key);\n    map.delete(key);\n  }\n  return value;\n}\n\nfunction keyof(value) {\n  return typeof value === 'object' ? value.valueOf() : value;\n}\n\n/**\n * @see  https://github.com/mbostock/internmap/blob/main/src/index.js\n */\nexport class InternMap<K, V> extends Map {\n  private map = new Map<K, V>();\n\n  private initKey = keyof;\n\n  constructor(entries) {\n    super();\n    if (entries !== null) {\n      for (const [key, value] of entries) {\n        this.set(key, value);\n      }\n    }\n  }\n\n  get(key: K) {\n    return super.get(internGet({ map: this.map, initKey: this.initKey }, key));\n  }\n\n  has(key: K) {\n    return super.has(internGet({ map: this.map, initKey: this.initKey }, key));\n  }\n\n  set(key: K, value: V) {\n    return super.set(internSet({ map: this.map, initKey: this.initKey }, key), value);\n  }\n\n  delete(key: K) {\n    return super.delete(internDelete({ map: this.map, initKey: this.initKey }, key));\n  }\n}\n", "import { deepMix } from '@antv/util';\nimport { BaseOptions, Domain, Range, Unknown } from '../types';\n\nexport abstract class Base<O extends BaseOptions> {\n  /**\n   * \n   *  options.unknown\n   * @param x \n   */\n  abstract map(x: Domain<O>): Range<O> | Unknown<O>;\n\n  /**\n   * \n   * @param x \n   */\n  abstract invert(x: Range<O>): Domain<O> | Domain<O>[] | Unknown<O>;\n\n  /**\n   * \n   */\n  abstract clone(): Base<O>;\n\n  /**\n   * \n   */\n  protected abstract getDefaultOptions(): Partial<O>;\n\n  /**\n   * \n   */\n  protected transformBreaks(options: O): O {\n    return options;\n  }\n\n  /**\n   *  ticks \n   */\n  protected options: O;\n\n  /**\n   * \n   * @param options \n   */\n  constructor(options?: O) {\n    this.options = deepMix({}, this.getDefaultOptions());\n    this.update(options?.breaks?.length ? this.transformBreaks(options) : options);\n  }\n\n  /**\n   * \n   * @returns \n   */\n  public getOptions(): O {\n    return this.options;\n  }\n\n  /**\n   * \n   * @param updateOptions \n   */\n  public update(updateOptions: Partial<O> = {}): void {\n    const options = updateOptions.breaks ? this.transformBreaks(updateOptions as O) : updateOptions;\n    this.options = deepMix({}, this.options, options);\n    this.rescale(options);\n  }\n\n  /**\n   *  options  options  scale \n   *  this.options  options\n   * @param options  options\n   */\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  protected rescale(options?: Partial<O>): void {}\n}\n", "import { OrdinalOptions, Domain, Range } from '../types';\nimport { Base } from './base';\n\ntype Transform = (x: any) => any;\n\ntype MapBetweenArrOptions = {\n  // \n  value: any;\n  // indexMapper \n  mapper: Map<any, number>;\n  // \n  from: any[];\n  // \n  to: any[];\n  //  mapper \n  notFoundReturn?: any;\n};\n\nexport const defaultUnknown = Symbol('defaultUnknown');\n\n/**\n *  indexMap\n *\n * @param arr \n * @param target  map\n * @returns {Map<string, any>}  indexMap\n */\nfunction updateIndexMap(target: Map<any, number>, arr: any[], key: Transform) {\n  for (let i = 0; i < arr.length; i += 1) {\n    if (!target.has(arr[i])) {\n      target.set(key(arr[i]), i);\n    }\n  }\n}\n\n/**\n *  indexMap \n *\n * @param options \n * @see MapBetweenArrOptions\n * @return {any} \n */\nfunction mapBetweenArrByMapIndex(options: MapBetweenArrOptions) {\n  const { value, from, to, mapper, notFoundReturn } = options;\n  let mappedIndex = mapper.get(value);\n\n  // index \n  //  unknown  unknown \n  //  value ,  Map\n  if (mappedIndex === undefined) {\n    if (notFoundReturn !== defaultUnknown) {\n      return notFoundReturn;\n    }\n    mappedIndex = from.push(value) - 1;\n    mapper.set(value, mappedIndex);\n  }\n\n  return to[mappedIndex % to.length];\n}\n\nfunction createKey(d: any) {\n  if (d instanceof Date) return (d: Date) => `${d}`;\n  if (typeof d === 'object') return (d: Object) => JSON.stringify(d);\n  return (d: number | string) => d;\n}\n\n/**\n * Ordinal \n *\n * \n *\n * -  for  map for  forEach, map\n * -  mapinvert  update \n * -  map  new Map \n *    update  d3-scale \n */\nexport class Ordinal<O extends OrdinalOptions = OrdinalOptions> extends Base<O> {\n  // \n  private domainIndexMap: Map<any, number>;\n\n  // \n  private rangeIndexMap: Map<any, number>;\n\n  //  domain\n  protected sortedDomain: O['domain'];\n\n  //  domain  key\n  protected domainKey: Transform;\n\n  //  range  key\n  protected rangeKey: Transform;\n\n  // \n  protected getDefaultOptions() {\n    return {\n      domain: [],\n      range: [],\n      unknown: defaultUnknown,\n    } as O;\n  }\n\n  //  options  OrdinalOptions O \n  constructor(options?: OrdinalOptions) {\n    super(options as O);\n  }\n\n  public map(x: Domain<O>) {\n    if (this.domainIndexMap.size === 0) {\n      updateIndexMap(this.domainIndexMap, this.getDomain(), this.domainKey);\n    }\n\n    return mapBetweenArrByMapIndex({\n      value: this.domainKey(x),\n      mapper: this.domainIndexMap,\n      from: this.getDomain(),\n      to: this.getRange(),\n      notFoundReturn: this.options.unknown,\n    });\n  }\n\n  public invert(y: Range<O>) {\n    if (this.rangeIndexMap.size === 0) {\n      updateIndexMap(this.rangeIndexMap, this.getRange(), this.rangeKey);\n    }\n\n    return mapBetweenArrByMapIndex({\n      value: this.rangeKey(y),\n      mapper: this.rangeIndexMap,\n      from: this.getRange(),\n      to: this.getDomain(),\n      notFoundReturn: this.options.unknown,\n    });\n  }\n\n  //  ordinal \n  protected rescale(options?: Partial<O>) {\n    const [d] = this.options.domain;\n    const [r] = this.options.range;\n\n    this.domainKey = createKey(d);\n    this.rangeKey = createKey(r);\n\n    //  rangeIndexMap \n    if (!this.rangeIndexMap) {\n      this.rangeIndexMap = new Map();\n      this.domainIndexMap = new Map();\n      return;\n    }\n\n    // \n    if (!options || options.range) {\n      this.rangeIndexMap.clear();\n    }\n\n    if (!options || options.domain || options.compare) {\n      this.domainIndexMap.clear();\n      this.sortedDomain = undefined;\n    }\n  }\n\n  public clone() {\n    return new Ordinal<O>(this.options);\n  }\n\n  protected getRange() {\n    return this.options.range;\n  }\n\n  public getDomain() {\n    // \n    if (this.sortedDomain) return this.sortedDomain;\n\n    const { domain, compare } = this.options;\n    this.sortedDomain = compare ? [...domain].sort(compare) : domain;\n    return this.sortedDomain;\n  }\n}\n", "import { InternMap } from '../utils';\nimport { BandOptions, Domain } from '../types';\nimport { Ordinal, defaultUnknown } from './ordinal';\n\nfunction normalize(array: number[]): number[] {\n  const min = array.reduce((a, b) => Math.min(a, b), Infinity);\n  return min === Infinity ? [] : array.map((d) => d / min);\n}\n\nfunction splice(array: number[], n: number) {\n  const sn = array.length;\n  const diff = n - sn;\n  return diff > 0 ? [...array, ...new Array(diff).fill(1)] : diff < 0 ? array.slice(0, n) : array;\n}\n\nfunction pretty(n: number) {\n  return Math.round(n * 1e12) / 1e12;\n}\n\ninterface BandStateOptions {\n  /**  */\n  domain: any[];\n  /**  */\n  range: number[];\n  /**  */\n  paddingInner?: number;\n  /**  */\n  paddingOuter?: number;\n  /**  */\n  round?: boolean;\n  /**  0 - 1  0.5  */\n  align?: number;\n  /**  (bandWidth)  */\n  flex?: number[];\n}\n\n/**\n *  band  flex band \n */\nfunction computeFlexBandState(options: BandStateOptions) {\n  //  flex  domain \n  //  flex  domain \n  const { domain, range, paddingOuter, paddingInner, flex: F, round, align } = options;\n  const n = domain.length;\n  const flex = splice(F, n);\n\n  //  step \n  // stepSum = step1 + step2 ... + stepN;\n  // stepAverage = stepSum / n;\n  // PO = stepAverage * paddingOuter;\n  // PI = stepAverage * paddingInner;\n  // width = PO * 2 + stepSum - PI;\n  const [start, end] = range;\n  const width = end - start;\n  const ratio = (2 / n) * paddingOuter + 1 - (1 / n) * paddingInner;\n  const stepSum = width / ratio;\n\n  // stepSum = (b1 + PI) + (b2 + PI) ... + (bN + PI)\n  // = bandSum + PI * n;\n  const PI = (stepSum * paddingInner) / n;\n  const bandWidthSum = stepSum - n * PI;\n\n  //  bandWidth\n  const normalizedFlex = normalize(flex);\n  const flexSum = normalizedFlex.reduce((sum, value) => sum + value);\n  const minBandWidth = bandWidthSum / flexSum;\n\n  //  bandWidth  step\n  const valueBandWidth: InternMap<string, any> = new InternMap(\n    domain.map((d, i) => {\n      const bandWidth = normalizedFlex[i] * minBandWidth;\n      return [d, round ? Math.floor(bandWidth) : bandWidth];\n    })\n  );\n  const valueStep: InternMap<string, any> = new InternMap(\n    domain.map((d, i) => {\n      const bandWidth = normalizedFlex[i] * minBandWidth;\n      const step = bandWidth + PI;\n      return [d, round ? Math.floor(step) : step];\n    })\n  );\n\n  // \n  //  step  round  step \n  const finalStepSum = Array.from(valueStep.values()).reduce((sum, value) => sum + value);\n  const outerPaddingSum = width - (finalStepSum - (finalStepSum / n) * paddingInner);\n  const offset = outerPaddingSum * align;\n\n  //  adjustedRange domain \n  const bandStart = start + offset;\n  let prev = round ? Math.round(bandStart) : bandStart;\n  const adjustedRange = new Array(n);\n  for (let i = 0; i < n; i += 1) {\n    // \n    adjustedRange[i] = pretty(prev);\n    const value = domain[i];\n    prev += valueStep.get(value);\n  }\n\n  return {\n    valueBandWidth,\n    valueStep,\n    adjustedRange,\n  };\n}\n\n/**\n *  band  band \n */\nfunction computeBandState(options: BandStateOptions) {\n  const { domain } = options;\n  const n = domain.length;\n  if (n === 0) {\n    return {\n      valueBandWidth: undefined,\n      valueStep: undefined,\n      adjustedRange: [],\n    };\n  }\n  const hasFlex = !!options.flex?.length;\n  if (hasFlex) {\n    return computeFlexBandState(options);\n  }\n\n  const { range, paddingOuter, paddingInner, round, align } = options;\n\n  let step: number;\n  let bandWidth: number;\n\n  let rangeStart = range[0];\n  const rangeEnd = range[1];\n\n  // range \n  // = stop - start\n  // = (n * step(n  step) )\n  // + (2 * step * paddingOuter( padding))\n  // - (1 * step * paddingInner( inner))\n  const deltaRange = rangeEnd - rangeStart;\n  const outerTotal = paddingOuter * 2;\n  const innerTotal = n - paddingInner;\n  step = deltaRange / Math.max(1, outerTotal + innerTotal);\n\n  // \n  if (round) {\n    step = Math.floor(step);\n  }\n\n  //  align \n  rangeStart += (deltaRange - step * (n - paddingInner)) * align;\n\n  //  step \n  // step = bandWidth + step * paddingInner\n  //  bandWidth = step - step * (paddingInner)\n  bandWidth = step * (1 - paddingInner);\n\n  if (round) {\n    rangeStart = Math.round(rangeStart);\n    bandWidth = Math.round(bandWidth);\n  }\n\n  //  range\n  const adjustedRange = new Array(n).fill(0).map((_, i) => rangeStart + i * step);\n\n  return {\n    valueStep: step,\n    valueBandWidth: bandWidth,\n    adjustedRange,\n  };\n}\n\n/**\n * Band \n *\n *  ordinal scale\n * \n *\n * \n *\n * BN = bandWidthN\n * SN = stepN\n * domain = [A, B]\n *\n * \n * width = PO + B1 + PI + B2 + PI ... + BN + PO;\n * PO = (S1 + S2 + ... SN) / N * paddingOuter\n * PI = (S1 + S2 + ... SN) / N * paddingInner\n * BN / BN-1 = flex[n] / flex[n-1]\n *\n * |<------------------------------------------- range ------------------------------------------->|\n * |             |                   |             |                   |             |             |\n * |<-----PO---->|<------B1--------->|<-----PI---->|<-------B2-------->|<----PI----->|<-----PO---->|\n * |             | ***************** |             | ***************** |             |             |\n * |             | ******* A ******* |             | ******* B ******* |             |             |\n * |             | ***************** |             | ***************** |             |             |\n * |             |<--------------S1--------------->| <--------------S2-------------->|                                              |\n * |-----------------------------------------------------------------------------------------------|\n *\n */\nexport class Band<O extends BandOptions = BandOptions> extends Ordinal<O> {\n  //  range\n  private adjustedRange: O['range'];\n\n  // domain  value  padding\n  private valueBandWidth: InternMap<any, number> | number;\n\n  // domain  value  padding\n  private valueStep: InternMap<any, number> | number;\n\n  // \n  protected getDefaultOptions() {\n    return {\n      domain: [],\n      range: [0, 1],\n      align: 0.5,\n      round: false,\n      paddingInner: 0,\n      paddingOuter: 0,\n      padding: 0,\n      unknown: defaultUnknown,\n      flex: [],\n    } as O;\n  }\n\n  //  options  OrdinalOptions O \n  constructor(options?: BandOptions) {\n    super(options as O);\n  }\n\n  public clone() {\n    return new Band<O>(this.options);\n  }\n\n  public getStep(x?: Domain<BandOptions>) {\n    if (this.valueStep === undefined) return 1;\n\n    //  flex , valueStep  number \n    if (typeof this.valueStep === 'number') {\n      return this.valueStep;\n    }\n\n    //  flex  1 x \n    //  step \n    if (x === undefined) return Array.from(this.valueStep.values())[0];\n    return this.valueStep.get(x);\n  }\n\n  public getBandWidth(x?: Domain<BandOptions>) {\n    if (this.valueBandWidth === undefined) return 1;\n\n    //  flex, valueBandWidth  number \n    if (typeof this.valueBandWidth === 'number') {\n      return this.valueBandWidth;\n    }\n\n    //  flex  1 x \n    //  bandWidth \n    if (x === undefined) return Array.from(this.valueBandWidth.values())[0];\n    return this.valueBandWidth.get(x);\n  }\n\n  public getRange() {\n    return this.adjustedRange;\n  }\n\n  protected getPaddingInner() {\n    const { padding, paddingInner } = this.options;\n    return padding > 0 ? padding : paddingInner;\n  }\n\n  protected getPaddingOuter() {\n    const { padding, paddingOuter } = this.options;\n    return padding > 0 ? padding : paddingOuter;\n  }\n\n  protected rescale() {\n    super.rescale();\n    // opt.padding  0  paddingInner paddingOuter\n    //  padding  paddingInner  paddingOuter \n    const { align, domain, range, round, flex } = this.options;\n    const { adjustedRange, valueBandWidth, valueStep } = computeBandState({\n      align,\n      range,\n      round,\n      flex,\n      paddingInner: this.getPaddingInner(),\n      paddingOuter: this.getPaddingOuter(),\n      domain,\n    });\n\n    // \n    this.valueStep = valueStep;\n    this.valueBandWidth = valueBandWidth;\n    this.adjustedRange = adjustedRange;\n  }\n}\n", "import { TickMethod } from '../types';\nimport { tickIncrement } from '../utils';\nimport type { BreakOptions } from '../types';\n\n/**\n *  Insert breaks into ticks and delete the ticks covered by breaks.\n */\nexport const insertBreaksToTicks = (ticks: number[], breaks?: BreakOptions[]): number[] => {\n  if (!breaks?.length) return ticks;\n  const edgePoints = [...ticks, ...breaks.flatMap((b) => [b.start, b.end])];\n  const uniqueSortedTicks = Array.from(new Set(edgePoints)).sort((a, b) => a - b);\n  const filteredTicks = uniqueSortedTicks.filter(\n    (tick) => !breaks.some(({ start, end }) => tick > start && tick < end)\n  );\n  return filteredTicks.length ? filteredTicks : ticks;\n};\n\nexport const d3Ticks: TickMethod = (begin: number, end: number, count: number, breaks?: BreakOptions[]) => {\n  let n;\n  let ticks;\n\n  let start = begin;\n  let stop = end;\n\n  if (start === stop && count > 0) {\n    return [start];\n  }\n\n  let step = tickIncrement(start, stop, count);\n\n  if (step === 0 || !Number.isFinite(step)) {\n    return [];\n  }\n\n  if (step > 0) {\n    start = Math.ceil(start / step);\n    stop = Math.floor(stop / step);\n    ticks = new Array((n = Math.ceil(stop - start + 1)));\n    for (let i = 0; i < n; i += 1) {\n      ticks[i] = (start + i) * step;\n    }\n  } else {\n    step = -step;\n    start = Math.ceil(start * step);\n    stop = Math.floor(stop * step);\n    ticks = new Array((n = Math.ceil(stop - start + 1)));\n    for (let i = 0; i < n; i += 1) {\n      ticks[i] = (start + i) / step;\n    }\n  }\n\n  return insertBreaksToTicks(ticks, breaks);\n};\n", "import { isNumber } from '@antv/util';\nimport { d3Ticks } from '../tick-methods/d3-ticks';\nimport { ConstantOptions, Domain, Range } from '../types';\nimport { Base } from './base';\n\nexport class Constant extends Base<ConstantOptions> {\n  /**\n   * \n   * @returns \n   */\n  protected getDefaultOptions(): ConstantOptions {\n    return {\n      range: [0],\n      domain: [0, 1],\n      unknown: undefined,\n      tickCount: 5,\n      tickMethod: d3Ticks,\n    };\n  }\n\n  /**\n   * y = b b  options.range \n   * @param _ \n   * @returns \n   */\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  public map(_: Domain<ConstantOptions>) {\n    const [v] = this.options.range;\n    return v !== undefined ? v : this.options.unknown;\n  }\n\n  /**\n   *  x \bx === b []\n   * @param x  (\n   * @returns \n   */\n  public invert(x: Range<ConstantOptions>) {\n    const [v] = this.options.range;\n    return x === v && v !== undefined ? this.options.domain : [];\n  }\n\n  public getTicks() {\n    const { tickMethod, domain, tickCount } = this.options;\n    const [a, b] = domain;\n    if (!isNumber(a) || !isNumber(b)) return [];\n    return tickMethod(a, b, tickCount);\n  }\n\n  /**\n   *  Constant Scale\n   * @returns  Constant Scale\n   */\n  public clone() {\n    return new Constant(this.options);\n  }\n}\n", "//  js \nexport function prettyNumber(n: number) {\n  return Math.abs(n) < 1e-14 ? n : parseFloat(n.toFixed(14));\n}\n", "import { indexOf, size } from '@antv/util';\nimport { TickMethod } from '../types';\nimport { prettyNumber } from '../utils/pretty-number';\n\nexport const DEFAULT_Q = [1, 5, 2, 2.5, 4, 3];\n\nexport const ALL_Q = [1, 5, 2, 2.5, 4, 3, 1.5, 7, 6, 8, 9];\n\nconst eps = Number.EPSILON * 100;\n\nfunction mod(n: number, m: number) {\n  return ((n % m) + m) % m;\n}\n\nfunction round(n: number) {\n  return Math.round(n * 1e12) / 1e12;\n}\n\nfunction simplicity(q: number, Q: number[], j: number, lmin: number, lmax: number, lstep: number) {\n  const n = size(Q);\n  const i = indexOf(Q, q);\n  let v = 0;\n  const m = mod(lmin, lstep);\n  if ((m < eps || lstep - m < eps) && lmin <= 0 && lmax >= 0) {\n    v = 1;\n  }\n  return 1 - i / (n - 1) - j + v;\n}\n\nfunction simplicityMax(q: number, Q: number[], j: number) {\n  const n = size(Q);\n  const i = indexOf(Q, q);\n  const v = 1;\n  return 1 - i / (n - 1) - j + v;\n}\n\nfunction density(k: number, m: number, dMin: number, dMax: number, lMin: number, lMax: number) {\n  const r = (k - 1) / (lMax - lMin);\n  const rt = (m - 1) / (Math.max(lMax, dMax) - Math.min(dMin, lMin));\n  return 2 - Math.max(r / rt, rt / r);\n}\n\nfunction densityMax(k: number, m: number) {\n  if (k >= m) {\n    return 2 - (k - 1) / (m - 1);\n  }\n  return 1;\n}\n\nfunction coverage(dMin: number, dMax: number, lMin: number, lMax: number) {\n  const range = dMax - dMin;\n  return 1 - (0.5 * ((dMax - lMax) ** 2 + (dMin - lMin) ** 2)) / (0.1 * range) ** 2;\n}\n\nfunction coverageMax(dMin: number, dMax: number, span: number) {\n  const range = dMax - dMin;\n  if (span > range) {\n    const half = (span - range) / 2;\n    return 1 - half ** 2 / (0.1 * range) ** 2;\n  }\n  return 1;\n}\n\nfunction legibility() {\n  return 1;\n}\n\n/**\n * An Extension of Wilkinson's Algorithm for Position Tick Labels on Axes\n * https://www.yuque.com/preview/yuque/0/2019/pdf/185317/1546999150858-45c3b9c2-4e86-4223-bf1a-8a732e8195ed.pdf\n * @param dMin \n * @param dMax \n * @param m tick\n * @param onlyLoose minmax[3, 97]\n * @param Q nice numbers\n * @param w \n */\nexport const wilkinsonExtended: TickMethod = (\n  dMin: number,\n  dMax: number,\n  n: number = 5,\n  onlyLoose: boolean = true,\n  Q: number[] = DEFAULT_Q,\n  w: [number, number, number, number] = [0.25, 0.2, 0.5, 0.05]\n) => {\n  const m = n < 0 ? 0 : Math.round(n);\n  // nan \n  if (Number.isNaN(dMin) || Number.isNaN(dMax) || typeof dMin !== 'number' || typeof dMax !== 'number' || !m) {\n    return [];\n  }\n\n  // js  1e-15 \n  if (dMax - dMin < 1e-15 || m === 1) {\n    return [dMin];\n  }\n\n  const best = {\n    score: -2,\n    lmin: 0,\n    lmax: 0,\n    lstep: 0,\n  };\n\n  let j = 1;\n  while (j < Infinity) {\n    // for (const q of Q)\n    for (let i = 0; i < Q.length; i += 1) {\n      const q = Q[i];\n      const sm = simplicityMax(q, Q, j);\n      if (w[0] * sm + w[1] + w[2] + w[3] < best.score) {\n        j = Infinity;\n        break;\n      }\n      let k = 2;\n      while (k < Infinity) {\n        const dm = densityMax(k, m);\n        if (w[0] * sm + w[1] + w[2] * dm + w[3] < best.score) {\n          break;\n        }\n\n        const delta = (dMax - dMin) / (k + 1) / j / q;\n        let z = Math.ceil(Math.log10(delta));\n\n        while (z < Infinity) {\n          const step = j * q * 10 ** z;\n          const cm = coverageMax(dMin, dMax, step * (k - 1));\n\n          if (w[0] * sm + w[1] * cm + w[2] * dm + w[3] < best.score) {\n            break;\n          }\n\n          const minStart = Math.floor(dMax / step) * j - (k - 1) * j;\n          const maxStart = Math.ceil(dMin / step) * j;\n\n          if (minStart <= maxStart) {\n            const count = maxStart - minStart;\n            for (let i = 0; i <= count; i += 1) {\n              const start = minStart + i;\n              const lMin = start * (step / j);\n              const lMax = lMin + step * (k - 1);\n              const lStep = step;\n\n              const s = simplicity(q, Q, j, lMin, lMax, lStep);\n              const c = coverage(dMin, dMax, lMin, lMax);\n              const g = density(k, m, dMin, dMax, lMin, lMax);\n              const l = legibility();\n\n              const score = w[0] * s + w[1] * c + w[2] * g + w[3] * l;\n              if (score > best.score && (!onlyLoose || (lMin <= dMin && lMax >= dMax))) {\n                best.lmin = lMin;\n                best.lmax = lMax;\n                best.lstep = lStep;\n                best.score = score;\n              }\n            }\n          }\n          z += 1;\n        }\n        k += 1;\n      }\n    }\n    j += 1;\n  }\n\n  // \n  const lmax = prettyNumber(best.lmax);\n  const lmin = prettyNumber(best.lmin);\n  const lstep = prettyNumber(best.lstep);\n\n  //  round  extended(0.94, 1, 5)\n  //  tickCount \n  const tickCount = Math.floor(round((lmax - lmin) / lstep)) + 1;\n  const ticks = new Array(tickCount);\n\n  //  -1.2 + 1.2 * 3 = 2.3999999999999995 \n  ticks[0] = prettyNumber(lmin);\n  for (let i = 1; i < tickCount; i += 1) {\n    ticks[i] = prettyNumber(ticks[i - 1] + lstep);\n  }\n\n  return ticks;\n};\n", "import { isNumber } from '@antv/util';\nimport { Base } from './base';\nimport { IdentityOptions, Domain, Range } from '../types';\nimport { wilkinsonExtended } from '../tick-methods/wilkinson-extended';\nimport { isValid } from '../utils';\n\nexport class Identity extends Base<IdentityOptions> {\n  /**\n   * \n   * @returns \n   */\n  protected getDefaultOptions(): IdentityOptions {\n    return {\n      domain: [0, 1],\n      range: [0, 1],\n      tickCount: 5,\n      unknown: undefined,\n      tickMethod: wilkinsonExtended,\n    };\n  }\n\n  /**\n   * y = x\n   * @param x \n   * @returns \n   */\n  public map(x: Domain<IdentityOptions>) {\n    return isValid(x) ? x : this.options.unknown;\n  }\n\n  /**\n   * map x = y map \n   * @param x \n   * @returns \n   */\n  public invert(x: Range<IdentityOptions>) {\n    return this.map(x);\n  }\n\n  /**\n   *  Identity Scale\n   * @returns  Identity Scale\n   */\n  public clone() {\n    return new Identity(this.options);\n  }\n\n  /**\n   *  ticks ticks \n   * @returns  ticks \n   */\n  public getTicks(): Range<IdentityOptions>[] {\n    const { domain, tickCount, tickMethod } = this.options;\n    const [min, max] = domain;\n    if (!isNumber(min) || !isNumber(max)) return [];\n    return tickMethod(min, max, tickCount);\n  }\n}\n", "import { identity, isArray } from '@antv/util';\nimport { Base } from './base';\nimport { ContinuousOptions, Domain, Range, NiceMethod, TickMethodOptions, CreateTransform, Transform } from '../types';\nimport {\n  createInterpolateNumber,\n  createInterpolateRound,\n  createClamp,\n  createNormalize,\n  bisect,\n  compose,\n  d3LinearNice,\n  isValid,\n} from '../utils';\n\n/**  domain  range  map   */\nconst createBiMap: CreateTransform = (domain, range, createInterpolate) => {\n  const [d0, d1] = domain;\n  const [r0, r1] = range;\n  let normalize: Transform;\n  let interpolate: Transform;\n  if (d0 < d1) {\n    normalize = createNormalize(d0, d1);\n    interpolate = createInterpolate(r0, r1);\n  } else {\n    normalize = createNormalize(d1, d0);\n    interpolate = createInterpolate(r1, r0);\n  }\n  return compose(interpolate, normalize);\n};\n\n/**  domain  range  map   */\nconst createPolyMap: CreateTransform = (domain, range, createInterpolate) => {\n  const len = Math.min(domain.length, range.length) - 1;\n  const normalizeList: Transform[] = new Array(len);\n  const interpolateList: Transform[] = new Array(len);\n\n  const reverse = domain[0] > domain[len];\n  const ascendingDomain = reverse ? [...domain].reverse() : domain;\n  const ascendingRange = reverse ? [...range].reverse() : range;\n\n  //  normalize  interpolate\n  for (let i = 0; i < len; i += 1) {\n    normalizeList[i] = createNormalize(ascendingDomain[i], ascendingDomain[i + 1]);\n    interpolateList[i] = createInterpolate(ascendingRange[i], ascendingRange[i + 1]);\n  }\n\n  //  normalize  interpolate\n  return (x: number): number => {\n    const i = bisect(domain, x, 1, len) - 1;\n    const normalize = normalizeList[i];\n    const interpolate = interpolateList[i];\n    return compose(interpolate, normalize)(x);\n  };\n};\n\n/**  */\nconst choosePiecewise: CreateTransform = (domain, range, interpolate, shouldRound?) => {\n  const n = Math.min(domain.length, range.length);\n  const createPiecewise = n > 2 ? createPolyMap : createBiMap;\n  const createInterpolate = shouldRound ? createInterpolateRound : interpolate;\n  return createPiecewise(domain, range, createInterpolate);\n};\n\n/**\n * Continuous   x  y y = a * f(x) + b\n * \n * https://github.com/d3/d3-scale/blob/master/src/continuous.js\n */\nexport abstract class Continuous<O extends ContinuousOptions> extends Base<O> {\n  /**  x  y  */\n  protected output: Transform;\n\n  /**  y  x  */\n  protected input: Transform;\n\n  /**\n   *   options  transform  untransform \n   * y = a * f(x) + b\n   * x = a * f'(y) + b\n   * @returns [f(x), f'(y)]\n   */\n  protected abstract chooseTransforms(): Transform[];\n\n  protected getDefaultOptions() {\n    return {\n      domain: [0, 1],\n      range: [0, 1],\n      nice: false,\n      clamp: false,\n      round: false,\n      interpolate: createInterpolateNumber,\n      tickCount: 5,\n    } as O;\n  }\n\n  /**\n   * y = interpolate(normalize(clamp(transform(x))))\n   */\n  public map(x: Domain<O>) {\n    if (!isValid(x)) return this.options.unknown;\n    return this.output(x);\n  }\n\n  /**\n   * x = transform(clamp(interpolate(normalize(y))))\n   */\n  public invert(x: Range<O>) {\n    if (!isValid(x)) return this.options.unknown;\n    return this.input(x);\n  }\n\n  protected nice() {\n    if (!this.options.nice || isArray(this.options.breaks)) return;\n    const [min, max, tickCount, ...rest] = this.getTickMethodOptions();\n    this.options.domain = this.chooseNice()(min, max, tickCount, ...rest);\n  }\n\n  public getTicks() {\n    const { tickMethod } = this.options;\n    const [min, max, tickCount, ...rest] = this.getTickMethodOptions();\n    return tickMethod(min, max, tickCount, ...rest);\n  }\n\n  protected getTickMethodOptions(): TickMethodOptions {\n    const { domain, tickCount } = this.options;\n    const min = domain[0];\n    const max = domain[domain.length - 1];\n    return [min, max, tickCount];\n  }\n\n  protected chooseNice(): NiceMethod<number | Date> {\n    return d3LinearNice;\n  }\n\n  protected rescale() {\n    this.nice();\n    const [transform, untransform] = this.chooseTransforms();\n    this.composeOutput(transform, this.chooseClamp(transform));\n    this.composeInput(transform, untransform, this.chooseClamp(untransform));\n  }\n\n  protected chooseClamp(transform: Transform) {\n    const { clamp: shouldClamp, range } = this.options;\n    const domain = this.options.domain.map(transform);\n    const n = Math.min(domain.length, range.length);\n    return shouldClamp ? createClamp(domain[0], domain[n - 1]) : identity;\n  }\n\n  protected composeOutput(transform: Transform, clamp: Transform) {\n    const { domain, range, round, interpolate } = this.options;\n    const piecewise = choosePiecewise(domain.map(transform), range, interpolate, round);\n    this.output = compose(piecewise, clamp, transform);\n  }\n\n  protected composeInput(transform: Transform, untransform: Transform, clamp: Transform) {\n    const { domain, range } = this.options;\n    const piecewise = choosePiecewise(range, domain.map(transform), createInterpolateNumber);\n    this.input = compose(untransform, clamp, piecewise);\n  }\n}\n", "import { identity, isArray, last } from '@antv/util';\nimport { Continuous } from './continuous';\nimport { LinearOptions, Transform } from '../types';\nimport { Base } from './base';\nimport { createInterpolateValue } from '../utils';\nimport { d3Ticks } from '../tick-methods/d3-ticks';\nimport { d3LinearNice } from '../utils/d3-linear-nice';\n\n/**\n * Linear \n *\n * \n */\nexport class Linear extends Continuous<LinearOptions> {\n  protected getDefaultOptions(): LinearOptions {\n    return {\n      domain: [0, 1],\n      range: [0, 1],\n      unknown: undefined,\n      nice: false,\n      clamp: false,\n      round: false,\n      interpolate: createInterpolateValue,\n      tickMethod: d3Ticks,\n      tickCount: 5,\n    };\n  }\n\n  protected removeUnsortedValues(breaksDomain: number[], breaksRange: number[], reverse: boolean) {\n    let pre = -Infinity;\n    const deleteIndices = breaksRange.reduce((acc, current, i) => {\n      if (i === 0) return acc;\n      const value = pre > 0 ? pre : current;\n      if (pre > 0 && (reverse ? current > pre : current < pre)) {\n        acc.push(i);\n      } else {\n        const diff = (value - breaksRange[i - 1]) * (reverse ? -1 : 1);\n        if (diff < 0) {\n          if (pre < 0) pre = breaksRange[i - 1];\n          acc.push(i);\n        } else {\n          pre = -Infinity;\n        }\n      }\n      return acc;\n    }, [] as number[]);\n\n    deleteIndices\n      .slice()\n      .reverse()\n      .forEach((index) => {\n        breaksDomain.splice(index, 1);\n        breaksRange.splice(index, 1);\n      });\n\n    return { breaksDomain, breaksRange };\n  }\n\n  protected transformDomain(options: LinearOptions): { breaksDomain: number[]; breaksRange: number[] } {\n    const RANGE_LIMIT = [0.2, 0.8];\n    const DEFAULT_GAP = 0.03;\n    const { domain = [], range = [1, 0], breaks = [], tickCount = 5, nice } = options;\n    const [min, max] = [Math.min(...domain), Math.max(...domain)];\n    let niceDomainMin = min;\n    let niceDomainMax = max;\n    if (nice && breaks.length < 2) {\n      const niceDomain = this.chooseNice()(min, max, tickCount) as number[];\n      niceDomainMin = niceDomain[0];\n      niceDomainMax = niceDomain[niceDomain.length - 1];\n    }\n    const domainMin = Math.min(niceDomainMin, min);\n    let domainMax = Math.max(niceDomainMax, max);\n    const sortedBreaks = breaks.filter(({ end }) => end < domainMax).sort((a, b) => a.start - b.start);\n    const breaksDomain = d3Ticks(domainMin, domainMax, tickCount, sortedBreaks);\n    if (last(breaksDomain) < domainMax) {\n      const nicest = d3LinearNice(0, domainMax - last(breaksDomain), 3);\n      breaksDomain.push(last(breaksDomain) + last(nicest));\n      domainMax = last(breaksDomain);\n    }\n    const [r0, r1] = [range[0], last(range)] as number[];\n    const diffDomain = domainMax - domainMin;\n    const diffRange = Math.abs(r1 - r0);\n    const reverse = r0 > r1;\n    // Calculate the new range based on breaks.\n    const breaksRange = breaksDomain.map((d) => {\n      const ratio = (d - domainMin) / diffDomain;\n      return reverse ? r0 - ratio * diffRange : r0 + ratio * diffRange;\n    });\n    // Compress the range scale according to breaks.\n    const [MIN, MAX] = RANGE_LIMIT;\n    sortedBreaks.forEach(({ start, end, gap = DEFAULT_GAP, compress = 'middle' }) => {\n      const startIndex = breaksDomain.indexOf(start);\n      const endIndex = breaksDomain.indexOf(end);\n      let value = (breaksRange[startIndex] + breaksRange[endIndex]) / 2;\n      if (compress === 'start') value = breaksRange[startIndex];\n      if (compress === 'end') value = breaksRange[endIndex];\n      const halfSpan = (gap * diffRange) / 2;\n      // Calculate the new start and end values based on the center and scaled span.\n      let startValue = reverse ? value + halfSpan : value - halfSpan;\n      let endValue = reverse ? value - halfSpan : value + halfSpan;\n\n      // Ensure the new start and end values are within the defined limits.\n      if (startValue < MIN) {\n        endValue += MIN - startValue;\n        startValue = MIN;\n      }\n      if (endValue > MAX) {\n        startValue -= endValue - MAX;\n        endValue = MAX;\n      }\n      if (startValue > MAX) {\n        endValue -= startValue - MAX;\n        startValue = MAX;\n      }\n      if (endValue < MIN) {\n        startValue += MIN - endValue;\n        endValue = MIN;\n      }\n\n      breaksRange[startIndex] = startValue;\n      breaksRange[endIndex] = endValue;\n    });\n\n    return this.removeUnsortedValues(breaksDomain, breaksRange, reverse);\n  }\n\n  protected transformBreaks(options: LinearOptions): LinearOptions {\n    const { domain, breaks = [] } = options;\n    if (!isArray(options.breaks)) return options;\n    const domainMax = Math.max(...(domain as number[]));\n    const filteredBreaks = breaks.filter(({ end }) => end < domainMax);\n    const optWithFilteredBreaks = { ...options, breaks: filteredBreaks };\n    const { breaksDomain, breaksRange } = this.transformDomain(optWithFilteredBreaks);\n    return {\n      ...options,\n      domain: breaksDomain,\n      range: breaksRange,\n      breaks: filteredBreaks,\n      tickMethod: () => [...breaksDomain],\n    };\n  }\n\n  protected chooseTransforms(): Transform[] {\n    return [identity, identity];\n  }\n\n  public clone(): Base<LinearOptions> {\n    return new Linear(this.options);\n  }\n}\n", "import { Band } from './band';\nimport { defaultUnknown } from './ordinal';\nimport { PointOptions, BandOptions } from '../types';\n\n/**\n * Point \n *\n *  band scale bandWidth  0\n *\n * \n *\n * PO = Padding = PaddingInner\n * domain =  [\"A\", \"B\", \"C\"]\n *\n * |<------------------------------------------- range ------------------------------------------->|\n * |             |                                 |                                 |             |\n * |<--step*PO-->|<--------------step------------->|<--------------step------------->|<--step*PO-->|\n * |             |                                 |                                 |             |\n * |             A                                 B                                 C             |\n * |-----------------------------------------------------------------------------------------------|\n *\n *  d3  8 - 9 \n */\nexport class Point extends Band<PointOptions & BandOptions> {\n  // \n  protected getDefaultOptions() {\n    return {\n      domain: [],\n      range: [0, 1],\n      align: 0.5,\n      round: false,\n      padding: 0,\n      unknown: defaultUnknown,\n      paddingInner: 1,\n      paddingOuter: 0,\n    };\n  }\n\n  //  PointOptions paddingInner \n  constructor(options?: PointOptions) {\n    super(options);\n  }\n\n  // Point  paddingInner 1\n  protected getPaddingInner() {\n    return 1;\n  }\n\n  public clone() {\n    return new Point(this.options);\n  }\n\n  public update(options?: PointOptions) {\n    super.update(options);\n  }\n\n  protected getPaddingOuter() {\n    return this.options.padding;\n  }\n}\n", "import { identity } from '@antv/util';\nimport { Continuous } from './continuous';\nimport { PowOptions, Transform } from '../types';\nimport { Base } from './base';\nimport { createInterpolateValue } from '../utils';\nimport { d3Ticks } from '../tick-methods/d3-ticks';\n\nconst transformPow = (exponent: number) => {\n  return (x: number) => {\n    return x < 0 ? -((-x) ** exponent) : x ** exponent;\n  };\n};\n\nconst transformPowInvert = (exponent: number) => {\n  return (x: number) => {\n    return x < 0 ? -((-x) ** (1 / exponent)) : x ** (1 / exponent);\n  };\n};\n\nconst transformSqrt = (x: number) => {\n  return x < 0 ? -Math.sqrt(-x) : Math.sqrt(x);\n};\n\n/**\n * Pow \n *\n *  linear scale, ,.\n *  y = x ^ k  k\n */\nexport class Pow<O extends PowOptions = PowOptions> extends Continuous<O> {\n  protected getDefaultOptions() {\n    return {\n      domain: [0, 1],\n      range: [0, 1],\n      nice: false,\n      clamp: false,\n      round: false,\n      exponent: 2,\n      interpolate: createInterpolateValue,\n      tickMethod: d3Ticks,\n      tickCount: 5,\n    } as O;\n  }\n\n  //  options  PowOptions O \n  constructor(options?: PowOptions) {\n    super(options as O);\n  }\n\n  protected chooseTransforms(): Transform[] {\n    const { exponent } = this.options;\n    if (exponent === 1) return [identity, identity];\n    const transform = exponent === 0.5 ? transformSqrt : transformPow(exponent);\n    const untransform = transformPowInvert(exponent);\n    return [transform, untransform];\n  }\n\n  public clone(): Base<O> {\n    return new Pow<O>(this.options);\n  }\n}\n", "import { createInterpolateValue } from '../utils';\nimport { SqrtOptions, PowOptions } from '../types';\nimport { Pow } from './pow';\nimport { d3Ticks } from '../tick-methods/d3-ticks';\n\nexport class Sqrt extends Pow<SqrtOptions & PowOptions> {\n  protected getDefaultOptions() {\n    return {\n      domain: [0, 1],\n      range: [0, 1],\n      nice: false,\n      clamp: false,\n      round: false,\n      interpolate: createInterpolateValue,\n      tickMethod: d3Ticks,\n      tickCount: 5,\n      exponent: 0.5,\n    };\n  }\n\n  constructor(options?: SqrtOptions) {\n    super(options);\n  }\n\n  update(options?: SqrtOptions) {\n    super.update(options);\n  }\n\n  public clone(): Sqrt {\n    return new Sqrt(this.options);\n  }\n}\n", "import { Base } from './base';\nimport { Domain, ThresholdOptions, Range } from '../types';\nimport { bisect, isValid } from '../utils';\n\n/**\n * \n */\nexport class Threshold<O extends ThresholdOptions = ThresholdOptions> extends Base<O> {\n  /** threshold  */\n  protected n: number;\n\n  protected thresholds: number[];\n\n  protected getDefaultOptions() {\n    return {\n      domain: [0.5],\n      range: [0, 1],\n    } as O;\n  }\n\n  constructor(options?: ThresholdOptions) {\n    super(options as O);\n  }\n\n  /**\n   * \n   */\n  public map(x: Domain<ThresholdOptions>) {\n    if (!isValid(x)) return this.options.unknown;\n    const index = bisect(this.thresholds, x, 0, this.n);\n    return this.options.range[index];\n  }\n\n  /**\n   * \n   */\n  public invert(y: Range<ThresholdOptions>) {\n    const { range } = this.options;\n    const index = range.indexOf(y);\n    const domain = this.thresholds;\n    return [domain[index - 1], domain[index]];\n  }\n\n  public clone() {\n    return new Threshold<O>(this.options);\n  }\n\n  protected rescale() {\n    const { domain, range } = this.options;\n    this.n = Math.min(domain.length, range.length - 1);\n    this.thresholds = domain;\n  }\n}\n", "import { TickMethod } from '../types';\nimport { d3Ticks } from './d3-ticks';\nimport { pows, logs } from '../utils';\n\nexport const d3Log: TickMethod = (a, b, n, base = 10) => {\n  const shouldReflect = a < 0;\n  const pow = pows(base, shouldReflect);\n  const log = logs(base, shouldReflect);\n\n  const r = b < a;\n  const min = r ? b : a;\n  const max = r ? a : b;\n  let i = log(min);\n  let j = log(max);\n  let ticks = [];\n\n  //  base \n  if (!(base % 1) && j - i < n) {\n    i = Math.floor(i);\n    j = Math.ceil(j);\n    if (shouldReflect) {\n      for (; i <= j; i += 1) {\n        const p = pow(i);\n        for (let k = base - 1; k >= 1; k -= 1) {\n          const t = p * k;\n          if (t > max) break;\n          if (t >= min) ticks.push(t);\n        }\n      }\n    } else {\n      for (; i <= j; i += 1) {\n        const p = pow(i);\n        for (let k = 1; k < base; k += 1) {\n          const t = p * k;\n          if (t > max) break;\n          if (t >= min) ticks.push(t);\n        }\n      }\n    }\n    if (ticks.length * 2 < n) ticks = d3Ticks(min, max, n);\n  } else {\n    const count = n === -1 ? j - i : Math.min(j - i, n);\n    ticks = d3Ticks(i, j, count).map(pow);\n  }\n\n  return r ? ticks.reverse() : ticks;\n};\n", "import { Continuous } from './continuous';\nimport { LogOptions, TickMethodOptions } from '../types';\nimport { createInterpolateValue, logs, pows } from '../utils';\nimport { d3Log } from '../tick-methods/d3-log';\nimport { d3LogNice } from '../utils/d3-log-nice';\n\n/**\n * Linear \n *\n * \n */\nexport class Log extends Continuous<LogOptions> {\n  protected getDefaultOptions(): LogOptions {\n    return {\n      domain: [1, 10],\n      range: [0, 1],\n      base: 10,\n      interpolate: createInterpolateValue,\n      tickMethod: d3Log,\n      tickCount: 5,\n    };\n  }\n\n  protected chooseNice() {\n    return d3LogNice;\n  }\n\n  protected getTickMethodOptions(): TickMethodOptions<number> {\n    const { domain, tickCount, base } = this.options;\n    const min = domain[0];\n    const max = domain[domain.length - 1];\n    return [min, max, tickCount, base];\n  }\n\n  protected chooseTransforms() {\n    const { base, domain } = this.options;\n    const shouldReflect = domain[0] < 0;\n    return [logs(base, shouldReflect), pows(base, shouldReflect)];\n  }\n\n  public clone(): Log {\n    return new Log(this.options);\n  }\n}\n", "import { Threshold } from './threshold';\nimport { QuantizeOptions, Range } from '../types';\nimport { wilkinsonExtended } from '../tick-methods/wilkinson-extended';\nimport { d3LinearNice } from '../utils';\n\n/**\n *  Threshold  thresholds  domain  range \n */\nexport class Quantize extends Threshold<QuantizeOptions> {\n  protected getDefaultOptions(): QuantizeOptions {\n    return {\n      domain: [0, 1],\n      range: [0.5],\n      nice: false,\n      tickCount: 5,\n      tickMethod: wilkinsonExtended,\n    };\n  }\n\n  constructor(options?: QuantizeOptions) {\n    super(options);\n  }\n\n  protected nice() {\n    const { nice } = this.options;\n    if (nice) {\n      const [min, max, tickCount] = this.getTickMethodOptions();\n      this.options.domain = d3LinearNice(min, max, tickCount);\n    }\n  }\n\n  public getTicks() {\n    const { tickMethod } = this.options;\n    const [min, max, tickCount] = this.getTickMethodOptions();\n    return tickMethod(min, max, tickCount);\n  }\n\n  protected getTickMethodOptions() {\n    const { domain, tickCount } = this.options;\n    const min = domain[0];\n    const max = domain[domain.length - 1];\n    return [min, max, tickCount];\n  }\n\n  protected rescale() {\n    this.nice();\n\n    const { range, domain } = this.options;\n    const [x0, x1] = domain;\n\n    this.n = range.length - 1;\n    this.thresholds = new Array(this.n);\n\n    for (let i = 0; i < this.n; i += 1) {\n      this.thresholds[i] = ((i + 1) * x1 - (i - this.n) * x0) / (this.n + 1);\n    }\n  }\n\n  /**\n   * \n   */\n  public invert(y: Range<QuantizeOptions>) {\n    const [a, b] = super.invert(y);\n    const [x0, x1] = this.options.domain;\n    return a === undefined && b === undefined ? [a, b] : [a || x0, b || x1];\n  }\n\n  public getThresholds() {\n    return this.thresholds;\n  }\n\n  public clone() {\n    return new Quantize(this.options);\n  }\n}\n", "/**\n * \n *\n * @param arr \n * @param percentage \n * @returns {number} \n */\nfunction quantileSorted(arr: number[], percentage: number) {\n  const len = arr.length;\n  if (!len) {\n    return undefined;\n  }\n\n  if (len < 2) {\n    return arr[len - 1];\n  }\n\n  const i = (len - 1) * percentage;\n  const i0 = Math.floor(i);\n  const v0 = arr[i0];\n  const v1 = arr[i0 + 1];\n  return v0 + (v1 - v0) * (i - i0);\n}\n\n/**\n * , \n *\n * @param arr \n * @param n \n * @param isSorted \n * @returns {number[]} \n */\nexport function createQuartile(arr: number[], n: number, isSorted: boolean = false) {\n  const numberArr = arr;\n\n  if (!isSorted) {\n    numberArr.sort((a, b) => a - b);\n  }\n\n  const tmp = [];\n  for (let i = 1; i < n; i += 1) {\n    tmp.push(quantileSorted(numberArr, i / n));\n  }\n  return tmp;\n}\n", "import { Threshold } from './threshold';\nimport { QuantileOptions, Range } from '../types';\nimport { wilkinsonExtended } from '../tick-methods/wilkinson-extended';\nimport { createQuartile } from '../utils/create-quartile';\n\n/**\n *  Threshold  (Quantile) \n * \n */\nexport class Quantile extends Threshold<QuantileOptions> {\n  protected getDefaultOptions(): QuantileOptions {\n    return {\n      domain: [],\n      range: [],\n      tickCount: 5,\n      unknown: undefined,\n      tickMethod: wilkinsonExtended,\n    };\n  }\n\n  constructor(options?: QuantileOptions) {\n    super(options);\n  }\n\n  protected rescale() {\n    const { domain, range } = this.options;\n\n    this.n = range.length - 1;\n    this.thresholds = createQuartile(domain, this.n + 1, false);\n  }\n\n  /**\n   * \n   */\n  public invert(y: Range<QuantileOptions>) {\n    const [a, b] = super.invert(y);\n    const { domain } = this.options;\n    const dMin = domain[0];\n    const dMax = domain[domain.length - 1];\n    return a === undefined && b === undefined ? [a, b] : [a || dMin, b || dMax];\n  }\n\n  public getThresholds() {\n    return this.thresholds;\n  }\n\n  public clone() {\n    return new Quantile(this.options);\n  }\n\n  public getTicks() {\n    const { tickCount, domain, tickMethod } = this.options;\n\n    const lastIndex = domain.length - 1;\n    const min = domain[0];\n    const max = domain[lastIndex];\n    return tickMethod(min, max, tickCount);\n  }\n}\n", "import { TickMethod } from '../types';\nimport { findTickInterval } from '../utils';\n\nexport const d3Time: TickMethod<Date> = (min, max, count, interval, utc: boolean) => {\n  const r = min > max;\n  const lo = r ? max : min;\n  const hi = r ? min : max;\n  const [tickInterval, step] = findTickInterval(lo, hi, count, interval, utc);\n  const ticks = tickInterval.range(lo, new Date(+hi + 1), step, true);\n  return r ? ticks.reverse() : ticks;\n};\n", "import { identity } from '@antv/util';\nimport { format } from 'fecha';\nimport { Continuous } from './continuous';\nimport { TickMethodOptions, TimeOptions } from '../types';\nimport { d3Time } from '../tick-methods/d3-time';\nimport { d3TimeNice, createInterpolateNumber, localIntervalMap, utcIntervalMap, chooseNiceTimeMask } from '../utils';\n\nfunction offset(date: Date): Date {\n  const minuteOffset = date.getTimezoneOffset();\n  const d = new Date(date);\n  d.setMinutes(d.getMinutes() + minuteOffset, d.getSeconds(), d.getMilliseconds());\n  return d;\n}\n\nexport class Time extends Continuous<TimeOptions> {\n  protected getDefaultOptions(): TimeOptions {\n    return {\n      domain: [new Date(2000, 0, 1), new Date(2000, 0, 2)],\n      range: [0, 1],\n      nice: false,\n      tickCount: 5,\n      tickInterval: undefined,\n      unknown: undefined,\n      clamp: false,\n      tickMethod: d3Time,\n      interpolate: createInterpolateNumber,\n      mask: undefined,\n      utc: false,\n    };\n  }\n\n  protected chooseTransforms() {\n    const transform = (x: Date) => +x;\n    const untransform = (x: number) => new Date(x);\n    return [transform, untransform];\n  }\n\n  protected chooseNice() {\n    return d3TimeNice;\n  }\n\n  protected getTickMethodOptions(): TickMethodOptions<Date> {\n    const { domain, tickCount, tickInterval, utc } = this.options;\n    const min = domain[0];\n    const max = domain[domain.length - 1];\n    return [min, max, tickCount, tickInterval, utc];\n  }\n\n  public getFormatter() {\n    const { mask, utc } = this.options;\n    const maskMap = utc ? utcIntervalMap : localIntervalMap;\n    const time = utc ? offset : identity; // fecha  utc \n    return (d: Date) => format(time(d), mask || chooseNiceTimeMask(d, maskMap));\n  }\n\n  public clone() {\n    return new Time(this.options);\n  }\n}\n", "import { identity } from '@antv/util';\nimport { d3Ticks } from '../tick-methods/d3-ticks';\nimport { CreateTransform, Transform, SequentialOptions, Interpolator } from '../types';\nimport { compose, createInterpolateNumber, createNormalize, interpolatize } from '../utils';\nimport { Linear } from './linear';\n\n// Modify interface exposed by Sequential.\nexport interface Sequential {\n  invert: undefined;\n  getOptions(): SequentialOptions;\n  update(updateOptions: Partial<SequentialOptions>): void;\n}\n\nfunction rangeOf(interpolator: Interpolator): number[] {\n  return [interpolator(0), interpolator(1)];\n}\nconst normalizeDomain: CreateTransform = (domain: SequentialOptions['domain']) => {\n  const [d0, d1] = domain;\n  // [d0, d1] => [0, 1]\n  const normalize: Transform = compose(createInterpolateNumber(0, 1), createNormalize(d0, d1));\n  return normalize;\n};\n\n/**\n * Sequential \n *\n * \n */\n// @Sequentialish\n@interpolatize(rangeOf, normalizeDomain)\nexport class Sequential extends Linear {\n  protected getDefaultOptions(): SequentialOptions {\n    return {\n      domain: [0, 1],\n      unknown: undefined,\n      nice: false,\n      clamp: false,\n      round: false,\n      interpolator: identity,\n      tickMethod: d3Ticks,\n      tickCount: 5,\n    };\n  }\n\n  constructor(options?: SequentialOptions) {\n    super(options);\n  }\n\n  public clone() {\n    return new Sequential(this.options);\n  }\n}\n", "import { identity } from '@antv/util';\nimport { d3Ticks } from '../tick-methods/d3-ticks';\nimport { CreateTransform, Transform, DivergingOptions, Interpolator } from '../types';\nimport { compose, createInterpolateNumber, createNormalize, interpolatize } from '../utils';\nimport { Linear } from './linear';\n\n// Modify interface exposed by Diverging.\nexport interface Diverging {\n  invert: undefined;\n  getOptions(): DivergingOptions;\n  update(updateOptions: Partial<DivergingOptions>): void;\n}\n\nfunction rangeOf(interpolator: Interpolator): number[] {\n  return [interpolator(0), interpolator(0.5), interpolator(1)];\n}\n\nconst normalizeDomain: CreateTransform = (domain: DivergingOptions['domain']) => {\n  const [d0, d1, d2] = domain;\n  // [d0, d1] => [0, 0.5]\n  const normalizeLeft: Transform = compose(createInterpolateNumber(0, 0.5), createNormalize(d0, d1));\n  // [d1, d2] => [0.5, 1]\n  const normalizeRight: Transform = compose(createInterpolateNumber(0.5, 1), createNormalize(d1, d2));\n\n  return (x: number): number => {\n    // Find x belongs to the range of [d0, d1] or [d1, d2].\n    if (d0 > d2) {\n      return x < d1 ? normalizeRight(x) : normalizeLeft(x);\n    } else {\n      return x < d1 ? normalizeLeft(x) : normalizeRight(x);\n    }\n  };\n};\n\n/**\n * Diverging \n *\n * \n */\n@interpolatize(rangeOf, normalizeDomain)\nexport class Diverging extends Linear {\n  protected getDefaultOptions(): DivergingOptions {\n    return {\n      domain: [0, 0.5, 1],\n      unknown: undefined,\n      nice: false,\n      clamp: false,\n      round: false,\n      interpolator: identity,\n      tickMethod: d3Ticks,\n      tickCount: 5,\n    };\n  }\n\n  constructor(options?: DivergingOptions) {\n    super(options);\n  }\n\n  public clone() {\n    return new Diverging(this.options);\n  }\n}\n", "import { DisplayObject } from '@antv/g';\nimport { lowerFirst, upperFirst, isPlainObject } from '@antv/util';\nimport { Band, Base, Constant } from '@antv/scale';\nimport { G2Element } from './selection';\n\n/**\n * @description Get element's ancestor view node.\n * @param elemenet G2 element.\n * @returns Element's ancestor view node.\n */\nexport function getViewFromElement(element: G2Element) {\n  let current = element as G2Element;\n  while (current) {\n    if (current.attributes?.class === 'view') return current;\n    current = current.parentNode as G2Element;\n  }\n  return null;\n}\n\n/**\n * @description Check if the element is a heatmap.\n * @param element G2 element.\n * @returns True if the element is a heatmap, otherwise false.\n */\nexport function isHeatmap(element) {\n  const { markType, nodeName } = element;\n  return markType === 'heatmap' && nodeName === 'image';\n}\n\n/**\n * @description Get element's original data.\n * @param elemenet G2 element.\n * @param elemenet View data, if not provided, will get from element's ancestor view.\n * @returns The original data of the element.\n */\nexport function dataOf(element: G2Element, viewData?: any) {\n  const view = viewData ?? getViewFromElement(element).__data__;\n  const datum = element.__data__;\n  const { markKey, index, seriesIndex, normalized = { x: 0 } } = datum;\n  const { markState } = view;\n  const selectedMark: any = Array.from(markState.keys()).find(\n    (mark) => (mark as any).key === markKey,\n  );\n  if (!selectedMark) return;\n  if (seriesIndex) {\n    return seriesIndex.map((i) => selectedMark.data[i]);\n  }\n  return isHeatmap(element)\n    ? selectedMark.data[Math.round(selectedMark.data.length * normalized.x)]\n    : selectedMark.data[index];\n}\n\n/**\n * @description Get element's series name.\n * @param elemenet G2 element.\n * @returns The series name of the element.\n */\nexport function seriesOf(elemenet: G2Element): string {\n  const viewData = getViewFromElement(elemenet).__data__;\n  const { scale } = viewData;\n  return groupNameOf(scale, elemenet.__data__);\n}\n\n/**\n * Get series scale by markKey\n */\nfunction getSeriesByMarkKey(scale: Record<string, Base<any>>, datum) {\n  // For path mark, markKey is in datum.element?.__data__?.markKey.\n  const markKey = datum.markKey ?? datum.element?.__data__?.markKey;\n\n  const seriesKey = Object.keys(scale).find((channel) => {\n    if (channel.startsWith('series')) {\n      const options = scale[channel].getOptions();\n      return options.name === 'series' && options.markKey === markKey;\n    }\n  });\n  return scale[seriesKey] ?? scale.series;\n}\n\n/**\n * Get group name with view's scale and element's datum.\n */\nexport function groupNameOf(scale: Record<string, Base<any>>, datum) {\n  const { color: scaleColor, facet = false } = scale;\n  const { color, series } = datum;\n  const scaleSeries = getSeriesByMarkKey(scale, datum);\n\n  const invertAble = (scale) => {\n    return (\n      scale &&\n      scale.invert &&\n      !(scale instanceof Band) &&\n      !(scale instanceof Constant)\n    );\n  };\n  // For non constant color channel.\n  if (invertAble(scaleSeries)) {\n    const cloned = scaleSeries.clone();\n    return cloned.invert(series);\n  }\n  if (\n    series &&\n    scaleSeries instanceof Band &&\n    scaleSeries.invert(series) !== color &&\n    !facet\n  ) {\n    return scaleSeries.invert(series);\n  }\n  if (invertAble(scaleColor)) {\n    const name = scaleColor.invert(color);\n    // For threshold scale.\n    if (Array.isArray(name)) return null;\n    return name;\n  }\n  return null;\n}\n\nexport function identity<T>(x: T): T {\n  return x;\n}\n\ntype Func<R> = (x: R, ...args: any[]) => R;\n/**\n * Composes functions from left to right.\n */\nexport function compose<R>(fns: Func<R>[]): Func<R> {\n  return fns.reduce(\n    (composed, fn) =>\n      (x, ...args) =>\n        fn(composed(x, ...args), ...args),\n    identity,\n  );\n}\n\n/**\n * Composes single-argument async functions from left to right.\n */\nexport function composeAsync<R>(\n  fns: ((x: R) => Promise<R> | R)[],\n): (x: R) => Promise<R> | R {\n  return fns.reduce(\n    (composed, fn) => async (x) => {\n      const value = await composed(x);\n      return fn(value);\n    },\n    identity,\n  );\n}\n\nexport function capitalizeFirst(str: string): string {\n  return str.replace(/( |^)[a-z]/g, (L) => L.toUpperCase());\n}\n\nexport function error(message = ''): never {\n  throw new Error(message);\n}\n\nexport function copyAttributes(target: DisplayObject, source: DisplayObject) {\n  const { attributes } = source;\n  const exclude = new Set(['id', 'className']);\n  for (const [key, value] of Object.entries(attributes)) {\n    if (!exclude.has(key)) {\n      target.attr(key, value);\n    }\n  }\n}\n\nexport function defined(x: any) {\n  return x !== undefined && x !== null && !Number.isNaN(x);\n}\n\nexport function random(a: number, b: number): number {\n  return a + (b - a) * Math.random();\n}\n\nexport function useMemo<T = unknown, U = unknown>(\n  compute: (key: T) => U,\n): (key: T) => U {\n  const map = new Map<T, U>();\n  return (key) => {\n    if (map.has(key)) return map.get(key);\n    const value = compute(key);\n    map.set(key, value);\n    return value;\n  };\n}\n\nexport function appendTransform(node: DisplayObject, transform: any) {\n  const { transform: preTransform } = node.style;\n  const unset = (d) => d === 'none' || d === undefined;\n  const prefix = unset(preTransform) ? '' : preTransform;\n  node.style.transform = `${prefix} ${transform}`.trimStart();\n}\n\nexport function subObject(\n  obj: Record<string, any>,\n  prefix: string,\n): Record<string, any> {\n  return maybeSubObject(obj, prefix) || {};\n}\n\nexport function maybeSubObject(\n  obj: Record<string, any>,\n  prefix: string,\n): Record<string, any> {\n  const entries = Object.entries(obj || {})\n    .filter(([key]) => key.startsWith(prefix))\n    .map(([key, value]) => [lowerFirst(key.replace(prefix, '').trim()), value])\n    .filter(([key]) => !!key);\n  return entries.length === 0 ? null : Object.fromEntries(entries);\n}\n\nexport function prefixObject(\n  obj: Record<string, any>,\n  prefix: string,\n): Record<string, any> {\n  return Object.fromEntries(\n    Object.entries(obj).map(([key, value]) => {\n      return [`${prefix}${upperFirst(key)}`, value];\n    }),\n  );\n}\n\nexport function filterPrefixObject(\n  obj: Record<string, any>,\n  prefix: string[],\n): Record<string, any> {\n  return Object.fromEntries(\n    Object.entries(obj).filter(([key]) =>\n      prefix.find((p) => key.startsWith(p)),\n    ),\n  );\n}\n\nexport function omitPrefixObject(\n  obj: Record<string, any>,\n  ...prefixes: string[]\n) {\n  return Object.fromEntries(\n    Object.entries(obj).filter(([key]) =>\n      prefixes.every((prefix) => !key.startsWith(prefix)),\n    ),\n  );\n}\n\nexport function maybePercentage(x: number | string, size: number) {\n  if (x === undefined) return null;\n  if (typeof x === 'number') return x;\n  const px = +x.replace('%', '');\n  return Number.isNaN(px) ? null : (px / 100) * size;\n}\n\nexport function isStrictObject(d: any): boolean {\n  return (\n    typeof d === 'object' &&\n    !(d instanceof Date) &&\n    d !== null &&\n    !Array.isArray(d)\n  );\n}\n\nexport function isUnset(value) {\n  return value === null || value === false;\n}\n\nexport function deepAssign(\n  dist: Record<string, unknown>,\n  src: Record<string, unknown>,\n  maxLevel = 5,\n  level = 0,\n): Record<string, unknown> {\n  if (level >= maxLevel) return;\n  for (const key of Object.keys(src)) {\n    const value = src[key];\n    if (!isPlainObject(value) || !isPlainObject(dist[key])) {\n      dist[key] = value;\n    } else {\n      deepAssign(\n        dist[key] as Record<string, unknown>,\n        value as Record<string, unknown>,\n        maxLevel,\n        level + 1,\n      );\n    }\n  }\n  return dist;\n}\n", "/**\n * Calls a defined callback function on each key:value of a object,\n * and returns a object contains the result.\n */\nexport function mapObject<T, U>(\n  object: Record<string, T>,\n  callbackfn: (value: T, key?: string, object?: Record<string, T>) => U,\n): Record<string, U> {\n  return Object.entries(object).reduce((obj, [key, value]) => {\n    obj[key] = callbackfn(value, key, object);\n    return obj;\n  }, {});\n}\n\nexport function indexOf<T>(array: T[]): number[] {\n  return array.map((_, i) => i);\n}\n\n/**\n * @example [[1, 2, 3], ['a', 'b', 'c']] => [[1, 'a'], [2, 'b'], [3, 'c']]\n */\nexport function transpose<T>(matrix: T[][]): T[][] {\n  const row = matrix.length;\n  const col = matrix[0].length;\n  // Note: new Array(col).fill(new Array(row)) is not ok!!!\n  // Because in this case it will fill new Array(col) with the same array: new Array(row).\n  const transposed = new Array(col).fill(0).map(() => new Array(row));\n  for (let i = 0; i < col; i++) {\n    for (let j = 0; j < row; j++) {\n      transposed[i][j] = matrix[j][i];\n    }\n  }\n  return transposed;\n}\n\nexport function firstOf<T>(array: T[]) {\n  return array[0];\n}\n\nexport function lastOf<T>(array: T[]) {\n  return array[array.length - 1];\n}\n\nexport function isFlatArray<T>(array: (T | T[])[]): array is T[] {\n  return !array.some(Array.isArray);\n}\n\nexport function unique<T>(array: T[]): T[] {\n  return Array.from(new Set(array));\n}\n\nexport function divide<T>(\n  array: T[],\n  callbackfn: (item: T) => boolean,\n): [T[], T[]] {\n  const result: [T[], T[]] = [[], []];\n  array.forEach((item) => {\n    result[callbackfn(item) ? 0 : 1].push(item);\n  });\n  return result;\n}\n\nfunction comb<T>(array: T[], len = array.length): T[][] {\n  if (len === 1) return array.map((item) => [item]);\n  const result: T[][] = [];\n  for (let i = 0; i < array.length; i++) {\n    const rest = array.slice(i + 1);\n    const restComb = comb(rest, len - 1);\n    restComb.forEach((comb) => {\n      result.push([array[i], ...comb]);\n    });\n  }\n  return result;\n}\n\n/**\n * get all combinations of two elements in an array\n * @example [1, 2, 3] => [[1], [2], [3], [1, 2], [1, 3], [2, 3], [1, 2, 3]]\n * @param array\n * @returns\n */\nexport function combine<T>(array: T[]): T[][] {\n  if (array.length === 1) return [array];\n  const result: T[][] = [];\n  for (let i = 1; i <= array.length; i++) {\n    result.push(...comb(array, i));\n  }\n  return result;\n}\n", "import { group, ascending, maxIndex, Primitive } from '@antv/vendor/d3-array';\nimport { defined } from '../../utils/helper';\nimport { TabularData, G2Mark } from '../../runtime';\nimport { indexOf } from '../../utils/array';\nimport { columnOf } from './helper';\n\nexport type IndexComparatorFactory = (\n  data: TabularData,\n  Y: Primitive[],\n  S: Primitive[],\n) => IndexComparator;\n\nexport type IndexComparator = (i: number, j: number) => number;\n\nexport type Order =\n  | 'value'\n  | 'sum'\n  | 'series'\n  | 'maxIndex'\n  | string[]\n  | ((data: Record<string, Primitive>) => Primitive);\n\nexport function createGroups(\n  groupBy: string | string[],\n  I: number[],\n  mark: G2Mark,\n): number[][] {\n  const { encode } = mark;\n  if (groupBy === null) return [I];\n  const G = normalizeGroupBy(groupBy)\n    .map((k) => [k, columnOf(encode, k)?.[0]] as const)\n    .filter(([, column]) => defined(column));\n  const key = (i: number) => G.map(([, V]) => V[i]).join('-');\n  return Array.from(group(I, key).values());\n}\n\nexport function normalizeComparator(\n  order: Order,\n): IndexComparatorFactory | null {\n  if (Array.isArray(order)) return createFieldsOrder(order);\n  if (typeof order === 'function') return createFunctionOrder(order);\n  if (order === 'series') return createSeriesOrder;\n  if (order === 'value') return createValueOrder;\n  if (order === 'sum') return createSumOrder;\n  if (order === 'maxIndex') return createMaxIndexOrder;\n  return null;\n}\n\nexport function applyOrder(groups: number[][], comparator: IndexComparator) {\n  for (const group of groups) {\n    group.sort(comparator);\n  }\n}\n\nexport function domainOf(value: Primitive[], scale: Record<string, any>) {\n  return scale?.domain || Array.from(new Set(value));\n}\n\nfunction normalizeGroupBy(groupBy: string | string[]): string[] {\n  if (Array.isArray(groupBy)) return groupBy;\n  return [groupBy];\n}\n\nfunction createSeriesOrder(\n  data: TabularData,\n  Y: Primitive[],\n  S: Primitive[],\n): IndexComparator {\n  return ascendingComparator((i: number) => S[i]);\n}\n\nfunction createFunctionOrder(\n  order: (data: Record<string, Primitive>) => Primitive,\n): IndexComparatorFactory {\n  return (data, Y, S) => {\n    return ascendingComparator((i) => order(data[i]));\n  };\n}\n\nfunction createFieldsOrder(order: string[]): IndexComparatorFactory {\n  return (data, Y, S) => {\n    return (i, j) =>\n      order.reduce(\n        (eq, f) => (eq !== 0 ? eq : ascending(data[i][f], data[j][f])),\n        0,\n      );\n  };\n}\n\nfunction createValueOrder(\n  data: TabularData,\n  Y: Primitive[],\n  S: Primitive[],\n): IndexComparator {\n  return ascendingComparator((i: number) => Y[i]);\n}\n\nfunction createSumOrder(\n  data: TabularData,\n  Y: Primitive[],\n  S: Primitive[],\n): IndexComparator {\n  const I = indexOf(data);\n  const groups = Array.from(group(I, (i) => S[+i]).entries());\n  const seriesSum = new Map(\n    groups.map(([k, GI]) => [k, GI.reduce((s, i) => s + +Y[i])] as const),\n  );\n  return ascendingComparator((i: number) => seriesSum.get(S[i]));\n}\n\nfunction createMaxIndexOrder(\n  data: TabularData,\n  Y: Primitive[],\n  S: Primitive[],\n): IndexComparator {\n  const I = indexOf(data);\n  const groups = Array.from(group(I, (i) => S[+i]).entries());\n  const seriesMaxIndex = new Map(\n    groups.map(([k, GI]) => [k, maxIndex(GI, (i) => Y[i])] as const),\n  );\n  return ascendingComparator((i: number) => seriesMaxIndex.get(S[i]));\n}\n\nfunction ascendingComparator(order: (i: number) => any): IndexComparator {\n  return (i, j) => ascending(order(i), order(j));\n}\n", "import { deepMix } from '@antv/util';\nimport { TransformComponent as TC } from '../runtime';\nimport { StackYTransform } from '../spec';\nimport {\n  column,\n  columnOf,\n  inferredColumn,\n  maybeColumnOf,\n} from './utils/helper';\nimport { normalizeComparator, createGroups, applyOrder } from './utils/order';\n\nexport type StackYOptions = Omit<StackYTransform, 'type'>;\n\n/**\n * The stack transform group marks into series by color channel,\n * and then produce new y channel for each series by specified order,\n * say to form vertical \"stacks\" by specified channels.\n */\nexport const StackY: TC<StackYOptions> = (options = {}) => {\n  const {\n    groupBy = 'x',\n    orderBy = null,\n    reverse = false,\n    y: fromY = 'y',\n    y1: fromY1 = 'y1',\n    series = true,\n  } = options;\n  return (I, mark) => {\n    const { data, encode, style = {} } = mark;\n    const [Y, fy] = columnOf(encode, 'y');\n    const [Y1, fy1] = columnOf(encode, 'y1');\n    const [S] = series\n      ? maybeColumnOf(encode, 'series', 'color')\n      : columnOf(encode, 'color');\n\n    // Create groups and apply specified order for each group.\n    const groups = createGroups(groupBy, I, mark);\n    const createComparator = normalizeComparator(orderBy) ?? (() => null);\n    const comparator = createComparator(data, Y, S);\n    if (comparator) applyOrder(groups, comparator);\n\n    // Stack y channels to produce new y and y1 channel.\n    const newY = new Array(I.length);\n    const newY1 = new Array(I.length);\n    const TY = new Array(I.length);\n    const F = [];\n    const L = [];\n    for (const G of groups) {\n      if (reverse) G.reverse();\n      // For range interval with specified y and y1.\n      const start = Y1 ? +Y1[G[0]] : 0;\n\n      // Split positive indices of Y and negative Y.\n      const PG = [];\n      const NG = [];\n      for (const i of G) {\n        const y = (TY[i] = +Y[i] - start);\n        if (y < 0) NG.push(i);\n        else if (y >= 0) PG.push(i);\n      }\n\n      // Store the first and last layer.\n      const FG = PG.length > 0 ? PG : NG;\n      const LG = NG.length > 0 ? NG : PG;\n      let i = PG.length - 1;\n      let j = 0;\n      // Find the last non-zero index.\n      while (i > 0 && Y[FG[i]] === 0) i--;\n      // Find the first non-zero index.\n      while (j < LG.length - 1 && Y[LG[j]] === 0) j++;\n      F.push(FG[i]);\n      L.push(LG[j]);\n\n      // Stack negative y in reverse order.\n      let ny = start;\n      for (const i of NG.reverse()) {\n        const y = TY[i];\n        ny = newY[i] = (newY1[i] = ny) + y;\n      }\n\n      // Stack positive y in input order.\n      let py = start;\n      for (const i of PG) {\n        const y = TY[i];\n        if (y > 0) py = newY[i] = (newY1[i] = py) + y;\n        else newY[i] = newY1[i] = py;\n      }\n    }\n\n    // Only set top radius for the first layer,\n    // and set bottom radius for the last layer.\n    const FS = new Set(F);\n    const LS = new Set(L);\n\n    // Choose new y or y1 channel as the new y channel.\n    const V = fromY === 'y' ? newY : newY1;\n    const V1 = fromY1 === 'y' ? newY : newY1;\n    let newEncode: Record<string, any>;\n    // mark point will compute the actural Y = (y + y1) / 2 if y1 exists\n    if (mark.type === 'point') {\n      newEncode = {\n        y0: inferredColumn(Y, fy), // Store original Y.\n        y: column(V, fy),\n      };\n    } else {\n      newEncode = {\n        y0: inferredColumn(Y, fy), // Store original Y.\n        y: column(V, fy),\n        y1: column(V1, fy1),\n      };\n    }\n\n    return [\n      I,\n      deepMix({}, mark, {\n        encode: {\n          ...newEncode,\n        },\n        style: {\n          first: (_, i) => FS.has(i),\n          last: (_, i) => LS.has(i),\n          ...style,\n        },\n      }),\n    ];\n  };\n};\n\nStackY.props = {};\n", "import { TransformComponent as TC, TransformSpec } from '../runtime';\nimport { StackY } from './stackY';\n\nexport type MaybeStackYOptions = {\n  series?: boolean;\n};\n\n// Avoid duplicate stackY.\n// In most of case only one of stackY and dodgeX is needed.\n// So pass statistic with stackY and dodgeX.\nfunction exclude(transform: TransformSpec): boolean {\n  const { type } = transform;\n  const excludes = ['stackY', 'dodgeX', 'groupX'];\n  return typeof type === 'string' && excludes.includes(type);\n}\n\n/**\n * Add zero constant encode for x channel.\n * This is useful for interval geometry.\n */\nexport const MaybeStackY: TC<MaybeStackYOptions> = (options) => {\n  return (I, mark, context) => {\n    // Skip some transform.\n    const { encode, transform = [] } = mark;\n    if (transform.some(exclude)) return [I, mark];\n\n    // StackY need both x and y channel values.\n    const { x, y } = encode;\n    if (x === undefined || y === undefined) return [I, mark];\n\n    const { series } = options;\n    const groupBy = series ? ['x', 'series'] : 'x';\n    return StackY({ groupBy })(I, mark, context);\n  };\n};\n\nMaybeStackY.props = {};\n", "function fillZero(digit: number) {\n  if (Math.abs(digit) > 10) return String(digit);\n  return digit.toString().padStart(2, '0');\n}\n\nexport function dynamicFormatDateTime(date: Date) {\n  const year = date.getFullYear();\n  const month = fillZero(date.getMonth() + 1);\n  const day = fillZero(date.getDate());\n\n  const yyyyMMDD = `${year}-${month}-${day}`;\n\n  const hour = date.getHours();\n  const minutes = date.getMinutes();\n  const seconds = date.getSeconds();\n\n  if (hour || minutes || seconds)\n    return `${yyyyMMDD} ${fillZero(hour)}:${fillZero(minutes)}:${fillZero(\n      seconds,\n    )}`;\n  return yyyyMMDD;\n}\n", "import { deepMix } from '@antv/util';\nimport { isUnset } from '../utils/helper';\nimport { TransformComponent as TC } from '../runtime';\nimport { dynamicFormatDateTime } from '../utils/dateFormat';\nimport { columnOf } from './utils/helper';\n\nexport type MaybeTitleOptions = {\n  channel?: string;\n};\n\n/**\n * Infer title channel from x-position channel.\n */\nexport const MaybeTitle: TC<MaybeTitleOptions> = (options = {}) => {\n  const { channel = 'x' } = options;\n  return (I, mark) => {\n    const { encode } = mark;\n    const { tooltip } = mark;\n    if (isUnset(tooltip)) return [I, mark];\n    const { title } = tooltip;\n    if (title !== undefined) return [I, mark];\n    const titles = Object.keys(encode)\n      .filter((key) => key.startsWith(channel))\n      .filter((key) => !encode[key].inferred)\n      .map((key) => columnOf(encode, key))\n      .filter(([T]) => T)\n      .map((d) => d[0]);\n    if (titles.length === 0) return [I, mark];\n    const T = [];\n    for (const i of I) {\n      T[i] = {\n        value: titles\n          .map((t) =>\n            t[i] instanceof Date ? dynamicFormatDateTime(t[i] as Date) : t[i],\n          )\n          .join(', '),\n      };\n    }\n    return [\n      I,\n      deepMix({}, mark, {\n        tooltip: {\n          title: T,\n        },\n      }),\n    ];\n  };\n};\n\nMaybeTitle.props = {};\n", "import { deepMix } from '@antv/util';\nimport { TransformComponent as TC } from '../runtime';\nimport { inferredColumn, constant } from './utils/helper';\n\nexport type MaybeZeroXOptions = Record<string, never>;\n\n/**\n * Add zero constant encode for x channel.\n * This is useful for interval geometry.\n */\nexport const MaybeZeroX: TC<MaybeZeroXOptions> = () => {\n  return (I, mark) => {\n    const { encode } = mark;\n    const { x } = encode;\n    if (x !== undefined) return [I, mark];\n    return [\n      I,\n      deepMix({}, mark, {\n        encode: { x: inferredColumn(constant(I, 0)) },\n        scale: { x: { guide: null } },\n      }),\n    ];\n  };\n};\n\nMaybeZeroX.props = {};\n", "import { deepMix } from '@antv/util';\nimport { TransformComponent as TC } from '../runtime';\nimport { inferredColumn, constant } from './utils/helper';\n\nexport type MaybeZeroYOptions = Record<string, never>;\n\n/**\n * Add zero constant encode for y channel.\n */\nexport const MaybeZeroY: TC<MaybeZeroYOptions> = () => {\n  return (I, mark) => {\n    const { encode } = mark;\n    const { y } = encode;\n    if (y !== undefined) return [I, mark];\n    return [\n      I,\n      deepMix({}, mark, {\n        encode: { y: inferredColumn(constant(I, 0)) },\n        scale: { y: { guide: null } },\n      }),\n    ];\n  };\n};\n\nMaybeZeroY.props = {};\n", "import { deepMix } from '@antv/util';\nimport { TransformComponent as TC } from '../runtime';\nimport { inferredColumn, constant } from './utils/helper';\n\nexport type MaybeZeroZOptions = Record<string, never>;\n\n/**\n * Add zero constant encode for z channel.\n */\nexport const MaybeZeroZ: TC<MaybeZeroZOptions> = () => {\n  return (I, mark) => {\n    const { encode } = mark;\n    const { z } = encode;\n    if (z !== undefined) return [I, mark];\n    return [\n      I,\n      deepMix({}, mark, {\n        encode: { z: inferredColumn(constant(I, 0)) },\n        scale: { z: { guide: null } },\n      }),\n    ];\n  };\n};\n\nMaybeZeroZ.props = {};\n", "import { deepMix } from '@antv/util';\nimport { TransformComponent as TC } from '../runtime';\nimport { constant, visualColumn } from './utils/helper';\n\nexport type MaybeSizeOptions = Record<string, never>;\n\n/**\n * Add 3 constant encode for size channel.\n * This is useful for point geometry.\n */\nexport const MaybeSize: TC<MaybeSizeOptions> = () => {\n  return (I, mark) => {\n    const { encode } = mark;\n    const { size } = encode;\n    if (size !== undefined) return [I, mark];\n    return [\n      I,\n      deepMix({}, mark, { encode: { size: visualColumn(constant(I, 3)) } }),\n    ];\n  };\n};\n\nMaybeSize.props = {};\n", "import { deepMix } from '@antv/util';\nimport { TransformComponent as TC } from '../runtime';\nimport { column } from './utils/helper';\n\nexport type MaybeKeyOptions = Record<string, never>;\n\n/**\n * Infer key for every element.\n */\nexport const MaybeKey: TC<MaybeKeyOptions> = () => {\n  return (I, mark) => {\n    const { encode } = mark;\n    const { key, ...rest } = encode;\n    if (key !== undefined) return [I, mark];\n    const values = Object.values(rest).map(({ value }) => value);\n    const K = I.map((i) =>\n      values\n        .filter(Array.isArray)\n        .map((V) => V[i])\n        .join('-'),\n    );\n    return [I, deepMix({}, mark, { encode: { key: column(K) } })];\n  };\n};\n\nMaybeKey.props = {};\n", "import { deepMix } from '@antv/util';\nimport { TransformComponent as TC } from '../runtime';\nimport { column, columnOf } from './utils/helper';\n\nexport type MaybeSeriesOptions = Record<string, never>;\n\n/**\n * Assume color channel is series channel.\n */\nexport const MaybeSeries: TC<MaybeSeriesOptions> = () => {\n  return (I, mark) => {\n    const { encode } = mark;\n    const { series, color } = encode;\n    if (series !== undefined || color === undefined) return [I, mark];\n    const [C, fc] = columnOf(encode, 'color');\n    return [I, deepMix({}, mark, { encode: { series: column(C, fc) } })];\n  };\n};\n\nMaybeSeries.props = {};\n", "import { deepMix } from '@antv/util';\nimport { TransformComponent as TC } from '../runtime';\nimport { column, isObject } from './utils/helper';\n\nexport type MaybeTupleYOptions = Record<string, never>;\n\n/**\n * Add 3 constant encode for size channel.\n * This is useful for point geometry.\n */\nexport const MaybeTupleY: TC<MaybeTupleYOptions> = () => {\n  return (I, mark) => {\n    const { data } = mark;\n    if (!Array.isArray(data) || data.some(isObject)) return [I, mark];\n    return [I, deepMix({}, mark, { encode: { y: column(data) } })];\n  };\n};\n\nMaybeTupleY.props = {};\n", "import { deepMix } from '@antv/util';\nimport { TransformComponent as TC } from '../runtime';\nimport { column, isObject } from './utils/helper';\n\nexport type MaybeTupleXOptions = Record<string, never>;\n\n/**\n * Add 3 constant encode for size channel.\n * This is useful for point geometry.\n */\nexport const MaybeTupleX: TC<MaybeTupleXOptions> = () => {\n  return (I, mark) => {\n    const { data } = mark;\n    if (!Array.isArray(data) || data.some(isObject)) return [I, mark];\n    return [I, deepMix({}, mark, { encode: { x: column(data) } })];\n  };\n};\n\nMaybeTupleX.props = {};\n", "import { deepMix } from '@antv/util';\nimport { TransformComponent as TC } from '../runtime';\nimport { column, columnOf } from './utils/helper';\n\nexport type MaybeIdentityYOptions = Record<string, never>;\n\n/**\n * Add 3 constant encode for size channel.\n * This is useful for point geometry.\n */\nexport const MaybeIdentityY: TC<MaybeIdentityYOptions> = () => {\n  return (I, mark) => {\n    const { encode } = mark;\n    const { y1 } = encode;\n    if (y1) return [I, mark];\n    const [Y] = columnOf(encode, 'y');\n    return [I, deepMix({}, mark, { encode: { y1: column([...Y]) } })];\n  };\n};\n\nMaybeIdentityY.props = {};\n", "import { deepMix } from '@antv/util';\nimport { TransformComponent as TC } from '../runtime';\nimport { column, columnOf } from './utils/helper';\n\nexport type MaybeIdentityXOptions = Record<string, never>;\n\n/**\n * Add 3 constant encode for size channel.\n * This is useful for point geometry.\n */\nexport const MaybeIdentityX: TC<MaybeIdentityXOptions> = () => {\n  return (I, mark) => {\n    const { encode } = mark;\n    const { x1 } = encode;\n    if (x1) return [I, mark];\n    const [X] = columnOf(encode, 'x');\n    return [I, deepMix({}, mark, { encode: { x1: column([...X]) } })];\n  };\n};\n\nMaybeIdentityX.props = {};\n", "import { deepMix } from '@antv/util';\nimport { TransformComponent as TC } from '../runtime';\nimport { column, isObject } from './utils/helper';\n\nexport type MaybeDefaultXOptions = Record<string, never>;\n\n/**\n * Add a default encode for rangeX\n * when data is just an array\n */\nexport const MaybeDefaultX: TC<MaybeDefaultXOptions> = () => {\n  return (I, mark) => {\n    const { data } = mark;\n    if (\n      Array.isArray(data) &&\n      (data.every(Array.isArray) || !data.some(isObject))\n    ) {\n      const extractX = (data, index: number) =>\n        Array.isArray(data[0])\n          ? data.map((item) => item[index])\n          : [data[index]];\n      return [\n        I,\n        deepMix({}, mark, {\n          encode: {\n            x: column(extractX(data, 0)),\n            x1: column(extractX(data, 1)),\n          },\n        }),\n      ];\n    }\n    return [I, mark];\n  };\n};\n\nMaybeDefaultX.props = {};\n", "import { deepMix } from '@antv/util';\nimport { Primitive, TransformComponent as TC } from '../runtime';\nimport { column, isObject } from './utils/helper';\n\nexport type MaybeDefaultYOptions = Record<string, never>;\n\n/**\n * Add a default encode for rangeY\n * when data is just an array\n */\nexport const MaybeDefaultY: TC<MaybeDefaultYOptions> = () => {\n  return (I, mark) => {\n    const { data } = mark;\n    if (\n      Array.isArray(data) &&\n      (data.every(Array.isArray) || !data.some(isObject))\n    ) {\n      const extractY = (data, index: number) =>\n        Array.isArray(data[0])\n          ? data.map((item) => item[index])\n          : [data[index]];\n      return [\n        I,\n        deepMix({}, mark, {\n          encode: {\n            y: column(extractY(data, 0)),\n            y1: column(extractY(data, 1)),\n          },\n        }),\n      ];\n    }\n    return [I, mark];\n  };\n};\n\nMaybeDefaultY.props = {};\n", "import { deepMix } from '@antv/util';\nimport { isUnset } from '../utils/helper';\nimport { TransformComponent as TC } from '../runtime';\n\nexport type MaybeTooltipOptions = {\n  channel: string | string[];\n};\n\n/**\n * Infer tooltip channel from specified channel.\n */\nexport const MaybeTooltip: TC<MaybeTooltipOptions> = (options) => {\n  const { channel } = options;\n  return (I, mark) => {\n    const { encode, tooltip } = mark;\n    if (isUnset(tooltip)) return [I, mark];\n    const { items = [] } = tooltip;\n    if (!items || items.length > 0) return [I, mark];\n    const channels = Array.isArray(channel) ? channel : [channel];\n    const newItems = channels.flatMap((channel) =>\n      Object.keys(encode)\n        .filter((key) => key.startsWith(channel))\n        .map((key) => {\n          const { field, value, inferred = false, aggregate } = encode[key];\n          if (inferred) return null;\n          // Do not show inferred column.\n          if (aggregate && value) return { channel: key };\n          if (field) return { field };\n          if (value) return { channel: key };\n          return null;\n        })\n        .filter((d) => d !== null),\n    );\n    return [I, deepMix({}, mark, { tooltip: { items: newItems } })];\n  };\n};\n\nMaybeTooltip.props = {};\n", "import { deepMix } from '@antv/util';\nimport { TransformComponent as TC } from '../runtime';\n\nexport type MaybeZeroPaddingOptions = Record<string, never>;\n\n/**\n * Set padding of x and y scale to zero.\n */\nexport const MaybeZeroPadding: TC<MaybeZeroPaddingOptions> = () => {\n  return (I, mark) => {\n    return [\n      I,\n      deepMix({ scale: { x: { padding: 0 }, y: { padding: 0 } } }, mark),\n    ];\n  };\n};\n\nMaybeZeroPadding.props = {};\n", "import { deepMix } from '@antv/util';\nimport { TransformComponent as TC } from '../runtime';\nimport { column } from './utils/helper';\n\nexport type MaybeVisualPositionOptions = Record<string, never>;\n\n/**\n * Set visual position with style.x and style.y.\n * The priority of style.x, style.y is higher than data.\n */\nexport const MaybeVisualPosition: TC<MaybeVisualPositionOptions> = () => {\n  return (I, mark) => {\n    const { data, style = {}, ...restMark } = mark;\n    const { x: x0, y: y0, ...rest } = style;\n    if (x0 == undefined || y0 == undefined) return [I, mark];\n    const x = x0 || 0;\n    const y = y0 || 0;\n    return [\n      [0],\n      deepMix({}, restMark, {\n        data: [0],\n        cartesian: true,\n        encode: {\n          x: column([x]),\n          y: column([y]),\n        },\n        scale: {\n          x: { type: 'identity', independent: true, guide: null }, // hide axis\n          y: { type: 'identity', independent: true, guide: null }, // hide axis\n        },\n        style: rest,\n      }),\n    ];\n  };\n};\n\nMaybeVisualPosition.props = {};\n", "import { deepMix } from '@antv/util';\nimport { TransformComponent as TC } from '../runtime';\n\nexport type MaybeFunctionAttributeOptions = Record<string, never>;\n\n/**\n * Mark functional attribute constant.\n */\nexport const MaybeFunctionAttribute: TC<MaybeFunctionAttributeOptions> = () => {\n  return (I, mark) => {\n    const { style = {} } = mark;\n    return [\n      I,\n      deepMix({}, mark, {\n        style: {\n          ...style,\n          ...Object.fromEntries(\n            Object.entries(style)\n              .filter(([, v]) => typeof v === 'function')\n              .map(([k, v]) => [k, () => v]),\n          ),\n        },\n      }),\n    ];\n  };\n};\n\nMaybeFunctionAttribute.props = {};\n", "import { deepMix } from '@antv/util';\nimport { TransformComponent as TC } from '../runtime';\nimport { column, isObject } from './utils/helper';\n\nexport type MaybeTupleOptions = Record<string, never>;\n\n/**\n * Add 3 constant encode for size channel.\n * This is useful for point geometry.\n */\nexport const MaybeTuple: TC<MaybeTupleOptions> = () => {\n  return (I, mark) => {\n    const { data } = mark;\n    if (!Array.isArray(data) || data.some(isObject)) return [I, mark];\n    const position = Array.isArray(data[0]) ? data : [data];\n    const X = position.map((d) => d[0]);\n    const Y = position.map((d) => d[1]);\n    return [I, deepMix({}, mark, { encode: { x: column(X), y: column(Y) } })];\n  };\n};\n\nMaybeTuple.props = {};\n", "import { deepMix } from '@antv/util';\nimport { TransformComponent as TC } from '../runtime';\nimport { constant, visualColumn } from './utils/helper';\n\nexport type MaybeGradientOptions = Record<string, never>;\n\n/**\n * Add 3 constant encode for size channel.\n * This is useful for point geometry.\n */\nexport const MaybeGradient: TC<MaybeGradientOptions> = () => {\n  return (I, mark) => {\n    const { style = {}, encode } = mark;\n    const { series } = encode;\n    const { gradient } = style;\n    if (!gradient || series) return [I, mark];\n    return [\n      I,\n      deepMix({}, mark, {\n        encode: {\n          series: visualColumn(constant(I, undefined)),\n        },\n      }),\n    ];\n  };\n};\n\nMaybeGradient.props = {};\n", "import { deepMix } from '@antv/util';\nimport { TransformComponent as TC } from '../runtime';\nimport { DodgeXTransform } from '../spec';\nimport { column, columnOf, maybeColumnOf } from './utils/helper';\nimport {\n  createGroups,\n  normalizeComparator,\n  applyOrder,\n  domainOf,\n} from './utils/order';\n\nexport type DodgeXOptions = Omit<DodgeXTransform, 'type'>;\n\n/**\n * The dodge group marks into series by color or series channel,\n * and then produce new series channel for each series by specified order,\n * say to form horizontal \"columns\" by specified channels.\n */\nexport const DodgeX: TC<DodgeXOptions> = (options = {}) => {\n  const { groupBy = 'x', reverse = false, orderBy, padding, ...rest } = options;\n  return (I, mark) => {\n    const { data, encode, scale } = mark;\n    const { series: scaleSeries } = scale;\n    const [Y] = columnOf(encode, 'y');\n    const [S] = maybeColumnOf(encode, 'series', 'color');\n    const domainSeries = domainOf(S, scaleSeries);\n    const newMark = deepMix({}, mark, {\n      scale: {\n        series: {\n          domain: domainSeries,\n          paddingInner: padding,\n        },\n      },\n    });\n\n    // Create groups and apply specified order for each group.\n    const groups = createGroups(groupBy, I, mark);\n    const createComparator = normalizeComparator(orderBy);\n\n    if (!createComparator) {\n      return [I, deepMix(newMark, { encode: { series: column(S) } })];\n    }\n\n    // Sort and Update series for each mark related to series domain.\n    const comparator = createComparator(data, Y, S);\n    if (comparator) applyOrder(groups, comparator);\n    const newS = new Array(I.length);\n    for (const G of groups) {\n      if (reverse) G.reverse();\n      for (let i = 0; i < G.length; i++) {\n        newS[G[i]] = domainSeries[i];\n      }\n    }\n\n    return [\n      I,\n      deepMix(newMark, {\n        encode: {\n          series: column(orderBy ? newS : S),\n        },\n      }),\n    ];\n  };\n};\n\nDodgeX.props = {};\n", "import { deepMix } from '@antv/util';\nimport { group, max } from '@antv/vendor/d3-array';\nimport { TransformComponent as TC } from '../runtime';\nimport { StackEnterTransform } from '../spec';\nimport {\n  columnOf,\n  constant,\n  maybeColumnOf,\n  visualColumn,\n} from './utils/helper';\n\nexport type StackEnterOptions = Omit<StackEnterTransform, 'type'>;\n\n/**\n * Group marks by channels into groups and stacking their enterDelay\n * to make marks show up groups by groups.\n * It will update enterDelay channel for each mark by its enterDuration and group.\n * @todo Support orderBy.\n * @todo Sort among groups(e.g. reverse).\n * @todo Stack enter in groups rather than between groups?\n * @todo Auto inter this statistic for scaleInY animation in stacked interval?\n * @todo All the groups shared the enterDuration?\n */\nexport const StackEnter: TC<StackEnterOptions> = (options) => {\n  const {\n    groupBy = ['x'],\n    reducer = (I, V) => V[I[0]],\n    orderBy = null,\n    reverse = false,\n    duration,\n  } = options;\n  return (I, mark) => {\n    const { encode } = mark;\n\n    // Extract group information by each specified channel,\n    // and skip if all values of channels are empty.\n    const by = Array.isArray(groupBy) ? groupBy : [groupBy];\n    const groupEntries = by.map((k) => [k, columnOf(encode, k)[0]]);\n    if (groupEntries.length === 0) return [I, mark];\n\n    // Nest group index and flatten them in right order among timeline.\n    // [[1, 2, 3, 4, 5, 6]] ->\n    // [[1, 2, 3], [4, 5, 6]] ->\n    // [[1], [2], [3], [4], [5], [6]]\n    let groups = [I];\n    for (const [, V] of groupEntries) {\n      const newGroups = [];\n      for (const I of groups) {\n        const G = Array.from(group(I, (i) => V[i]).values());\n        // @todo sort by x.\n        newGroups.push(...G);\n      }\n      groups = newGroups;\n    }\n\n    // const {color} = encode;\n    if (orderBy) {\n      const [V] = columnOf(encode, orderBy);\n      if (V) groups.sort((I, J) => reducer(I, V) - reducer(J, V));\n      if (reverse) groups.reverse();\n    }\n\n    // Stack delay for each group.\n    const t = (duration || 3000) / groups.length;\n    const [ED] = duration\n      ? [constant(I, t)] // If specified duration, generate enter duration for each.\n      : maybeColumnOf(encode, 'enterDuration', constant(I, t));\n    const [EDL] = maybeColumnOf(encode, 'enterDelay', constant(I, 0));\n    const newEnterDelay = new Array(I.length);\n    for (let i = 0, pd = 0; i < groups.length; i++) {\n      const I = groups[i];\n      const maxDuration = max(I, (i) => +ED[i]);\n      for (const j of I) newEnterDelay[j] = +EDL[j] + pd;\n      pd += maxDuration;\n    }\n\n    return [\n      I,\n      deepMix({}, mark, {\n        encode: {\n          enterDuration: visualColumn(ED),\n          enterDelay: visualColumn(newEnterDelay),\n        },\n      }),\n    ];\n  };\n};\n\nStackEnter.props = {};\n", "import { deepMix } from '@antv/util';\nimport { mean, deviation, median, sum, max, min } from '@antv/vendor/d3-array';\nimport { isUnset } from '../utils/helper';\nimport { TransformComponent as TC } from '../runtime';\nimport { NormalizeYTransform } from '../spec';\nimport { column, columnOf } from './utils/helper';\nimport { createGroups } from './utils/order';\n\nexport type NormalizeYOptions = Omit<NormalizeYTransform, 'type'>;\n\nfunction normalizeBasis(basis: NormalizeYOptions['basis']) {\n  if (typeof basis === 'function') return basis;\n  const registry = {\n    min: (I, Y) => min(I, (i) => Y[+i]),\n    max: (I, Y) => max(I, (i) => Y[+i]),\n    first: (I, Y) => Y[I[0]],\n    last: (I, Y) => Y[I[I.length - 1]],\n    mean: (I, Y) => mean(I, (i) => Y[+i]),\n    median: (I, Y) => median(I, (i) => Y[+i]),\n    sum: (I, Y) => sum(I, (i) => Y[+i]),\n    deviation: (I, Y) => deviation(I, (i) => Y[+i]),\n  };\n  return registry[basis] || max;\n}\n\n/**\n * Group marks into series by specified channels, and then transform\n * each series's value, say to transform them relative to some basis\n * to apply a moving average.\n */\nexport const NormalizeY: TC<NormalizeYOptions> = (options = {}) => {\n  const { groupBy = 'x', basis = 'max' } = options;\n  return (I, mark) => {\n    const { encode, tooltip } = mark;\n    const { x, ...rest } = encode;\n\n    // Extract and create new channels starts with y, such as y, y1.\n    const Yn = Object.entries(rest)\n      .filter(([k]) => k.startsWith('y'))\n      .map(([k]) => [k, columnOf(encode, k)[0]] as const);\n    const [, Y] = Yn.find(([k]) => k === 'y');\n    const newYn = Yn.map(([k]) => [k, new Array(I.length)] as const);\n\n    // Group marks into series by specified keys.\n    const groups = createGroups(groupBy, I, mark);\n\n    // Transform y channels for each group based on basis.\n    const basisFunction = normalizeBasis(basis);\n    for (const I of groups) {\n      // Compute basis only base on y.\n      const basisValue = basisFunction(I, Y);\n      for (const i of I) {\n        for (let j = 0; j < Yn.length; j++) {\n          const [, V] = Yn[j];\n          const [, newV] = newYn[j];\n          newV[i] = +V[i] / basisValue;\n        }\n      }\n    }\n\n    const specifiedTooltip =\n      isUnset(tooltip) || (tooltip?.items && tooltip?.items.length !== 0);\n    return [\n      I,\n      deepMix({}, mark, {\n        encode: Object.fromEntries(\n          newYn.map(([k, v]) => [k, column(v, columnOf(encode, k)[1])]),\n        ),\n        // Infer tooltip item.\n        ...(!specifiedTooltip &&\n          encode.y0 && {\n            tooltip: { items: [{ channel: 'y0' }] },\n          }),\n      }),\n    ];\n  };\n};\n\nNormalizeY.props = {};\n", "import { Band } from '@antv/scale';\nimport { deepMix } from '@antv/util';\nimport { Primitive, TransformComponent as TC } from '../runtime';\nimport { JitterTransform } from '../spec';\nimport { column, columnOf } from './utils/helper';\nimport { domainOf } from './utils/order';\n\nexport type JitterOptions = Omit<JitterTransform, 'type'>;\n\nexport function rangeOf(\n  value: Primitive[],\n  scaleOptions: Record<string, any>,\n  padding: number,\n): [number, number] {\n  if (value === null) return [-0.5, 0.5];\n  const domain = domainOf(value, scaleOptions);\n  const scale = new Band({ domain, range: [0, 1], padding });\n  const step = scale.getBandWidth();\n  return [-step / 2, step / 2];\n}\n\nexport function interpolate(t: number, a: number, b: number): number {\n  return a * (1 - t) + b * t;\n}\n\n/**\n * The jitter transform produce dx and dy channels for marks (especially for point)\n * with ordinal x and y dimension, say to make them jitter in their own space.\n */\nexport const Jitter: TC<JitterOptions> = (options = {}) => {\n  const {\n    padding = 0,\n    paddingX = padding,\n    paddingY = padding,\n    random = Math.random,\n  } = options;\n  return (I, mark) => {\n    const { encode, scale } = mark;\n    const { x: scaleX, y: scaleY } = scale;\n    const [X] = columnOf(encode, 'x');\n    const [Y] = columnOf(encode, 'y');\n    const rangeX = rangeOf(X, scaleX, paddingX);\n    const rangeY = rangeOf(Y, scaleY, paddingY);\n    const DY = I.map(() => interpolate(random(), ...rangeY));\n    const DX = I.map(() => interpolate(random(), ...rangeX));\n    return [\n      I,\n      deepMix(\n        {\n          scale: {\n            x: { padding: 0.5 },\n            y: { padding: 0.5 },\n          },\n        },\n        mark,\n        {\n          encode: { dy: column(DY), dx: column(DX) },\n        },\n      ),\n    ];\n  };\n};\n\nJitter.props = {};\n", "import { deepMix } from '@antv/util';\nimport { TransformComponent as TC } from '../runtime';\nimport { JitterXTransform } from '../spec';\nimport { column, columnOf } from './utils/helper';\nimport { rangeOf, interpolate } from './jitter';\n\nexport type JitterXOptions = Omit<JitterXTransform, 'type'>;\n\n/**\n * The JitterX transform produce dy channels for marks (especially for point)\n * with ordinal x and y dimension, say to make them jitter in their own space.\n */\nexport const JitterX: TC<JitterXOptions> = (options = {}) => {\n  const { padding = 0, random = Math.random } = options;\n  return (I, mark) => {\n    const { encode, scale } = mark;\n    const { x: scaleX } = scale;\n    const [X] = columnOf(encode, 'x');\n    const rangeX = rangeOf(X, scaleX, padding);\n    const DX = I.map(() => interpolate(random(), ...rangeX));\n    return [\n      I,\n      deepMix({ scale: { x: { padding: 0.5 } } }, mark, {\n        encode: { dx: column(DX) },\n      }),\n    ];\n  };\n};\n\nJitterX.props = {};\n", "import { deepMix } from '@antv/util';\nimport { TransformComponent as TC } from '../runtime';\nimport { JitterYTransform } from '../spec';\nimport { column, columnOf } from './utils/helper';\nimport { rangeOf, interpolate } from './jitter';\n\nexport type JitterYOptions = Omit<JitterYTransform, 'type'>;\n\n/**\n * The JitterY transform produce dy channels for marks (especially for point)\n * with ordinal x and y dimension, say to make them jitter in their own space.\n */\nexport const JitterY: TC<JitterYOptions> = (options = {}) => {\n  const { padding = 0, random = Math.random } = options;\n  return (I, mark) => {\n    const { encode, scale } = mark;\n    const { y: scaleY } = scale;\n    const [Y] = columnOf(encode, 'y');\n    const rangeY = rangeOf(Y, scaleY, padding);\n    const DY = I.map(() => interpolate(random(), ...rangeY));\n    return [\n      I,\n      deepMix({ scale: { y: { padding: 0.5 } } }, mark, {\n        encode: { dy: column(DY) },\n      }),\n    ];\n  };\n};\n\nJitterY.props = {};\n", "import { deepMix } from '@antv/util';\nimport { extent } from '@antv/vendor/d3-array';\nimport { TransformComponent as TC } from '../runtime';\nimport { SymmetryYTransform } from '../spec';\nimport { columnOf, column } from './utils/helper';\nimport { createGroups } from './utils/order';\n\nexport type SymmetryYOptions = Omit<SymmetryYTransform, 'type'>;\n\n/**\n * The SymmetryY transform apply offset for y channels, say to transform\n * them to be symmetry.\n */\nexport const SymmetryY: TC<SymmetryYOptions> = (options = {}) => {\n  const { groupBy = 'x' } = options;\n  return (I, mark) => {\n    const { encode } = mark;\n    const { x, ...rest } = encode;\n\n    // Extract and create new channels starts with y, such as y, y1.\n    const Yn = Object.entries(rest)\n      .filter(([k]) => k.startsWith('y'))\n      .map(([k]) => [k, columnOf(encode, k)[0]] as const);\n    const newYn = Yn.map(([k]) => [k, new Array(I.length)] as const);\n\n    // Group marks into series by specified keys.\n    const groups = createGroups(groupBy, I, mark);\n    const MY = new Array(groups.length);\n    for (let i = 0; i < groups.length; i++) {\n      const I = groups[i];\n      const Y = I.flatMap((i) => Yn.map(([, V]) => +V[i]));\n      const [minY, maxY] = extent(Y);\n      MY[i] = (minY + maxY) / 2;\n    }\n\n    const maxMiddleY = Math.max(...MY);\n    for (let m = 0; m < groups.length; m++) {\n      const offset = maxMiddleY - MY[m];\n      const I = groups[m];\n      for (const i of I) {\n        for (let j = 0; j < Yn.length; j++) {\n          const [, V] = Yn[j];\n          const [, newV] = newYn[j];\n          newV[i] = +V[i] + offset;\n        }\n      }\n    }\n\n    return [\n      I,\n      deepMix({}, mark, {\n        encode: Object.fromEntries(\n          newYn.map(([k, v]) => [k, column(v, columnOf(encode, k)[1])]),\n        ),\n      }),\n    ];\n  };\n};\n\nSymmetryY.props = {};\n", "import { deepMix } from '@antv/util';\nimport { TransformComponent as TC } from '../runtime';\nimport { DiffYTransform } from '../spec';\nimport { column, columnOf } from './utils/helper';\nimport { createGroups } from './utils/order';\n\nexport type DiffYOptions = Omit<DiffYTransform, 'type'>;\n\n/**\n * The DiffY transform apply offset for y0 channels.\n * Keep y unchanged, set y1 = max(otherY), if y1 > y, remove the data.\n */\nexport const DiffY: TC<DiffYOptions> = (options = {}) => {\n  const { groupBy = 'x' } = options;\n  return (I, mark) => {\n    const { encode } = mark;\n    const [Y] = columnOf(encode, 'y');\n    const [_, fy1] = columnOf(encode, 'y1');\n\n    // Create groups and apply specified order for each group.\n    const groups = createGroups(groupBy, I, mark);\n\n    // Only adjust Y1 channel.\n    const newY1 = new Array(I.length);\n    for (const G of groups) {\n      const YG = G.map((i) => +Y[i]);\n      // Process each series.\n      for (let idx = 0; idx < G.length; idx++) {\n        const i = G[idx];\n        // Get the max Y of current group with current Y exclude.\n        const max = Math.max(...YG.filter((_, _i) => _i !== idx));\n        // Diff Y value.\n        newY1[i] = +Y[i] > max ? max : Y[i];\n      }\n    }\n\n    return [\n      I,\n      deepMix({}, mark, {\n        encode: {\n          y1: column(newY1, fy1),\n        },\n      }),\n    ];\n  };\n};\n\nDiffY.props = {};\n", "import { maxIndex, minIndex } from '@antv/vendor/d3-array';\nimport { TransformComponent as TC } from '../runtime';\nimport { SelectTransform, Selector } from '../spec';\nimport { columnOf } from './utils/helper';\nimport { createGroups } from './utils/order';\n\nexport type SelectOptions = Omit<SelectTransform, 'type'>;\n\ntype SelectorFunction = (I: number[], V: number[]) => number[];\n\nfunction first(I: number[], V: number[]): number[] {\n  return [I[0]];\n}\n\nfunction last(I: number[], V: number[]): number[] {\n  const i = I.length - 1;\n  return [I[i]];\n}\n\nfunction max(I: number[], V: number[]): number[] {\n  const i = maxIndex(I, (i) => V[i]);\n  return [I[i]];\n}\n\nfunction min(I: number[], V: number[]): number[] {\n  const i = minIndex(I, (i) => V[i]);\n  return [I[i]];\n}\n\nfunction normalizeSelector(selector: Selector): SelectorFunction {\n  if (typeof selector === 'function') return selector;\n  const registry = { first, last, max, min };\n  return registry[selector] || first;\n}\n\n/**\n * The select transform groups marks with specified channels, and\n * filter index by specified selector for each series, say to\n * pull a single or multiple values out of each series.\n */\nexport const Select: TC<SelectOptions> = (options = {}) => {\n  const { groupBy = 'series', channel, selector } = options;\n  return (I, mark) => {\n    const { encode } = mark;\n    const groups = createGroups(groupBy, I, mark);\n    const [V] = columnOf(encode, channel);\n    const selectFunction = normalizeSelector(selector);\n    return [groups.flatMap((GI) => selectFunction(GI, V as number[])), mark];\n  };\n};\n\nSelect.props = {};\n", "import { TransformComponent as TC } from '../runtime';\nimport { SelectXTransform } from '../spec';\nimport { Select } from './select';\n\nexport type SelectXOptions = Omit<SelectXTransform, 'type'>;\n\n/**\n * The selectX transform filter index by y channel.\n */\nexport const SelectX: TC<SelectXOptions> = (options = {}) => {\n  const { selector, ...rest } = options;\n  return Select({ channel: 'x', selector, ...rest });\n};\n\nSelectX.props = {};\n", "import { TransformComponent as TC } from '../runtime';\nimport { SelectYTransform } from '../spec';\nimport { Select } from './select';\n\nexport type SelectYOptions = Omit<SelectYTransform, 'type'>;\n\n/**\n * The selectY transform filter index by y channel.\n */\nexport const SelectY: TC<SelectYOptions> = (options = {}) => {\n  const { selector, ...rest } = options;\n  return Select({ channel: 'y', selector, ...rest });\n};\n\nSelectY.props = {};\n", "import { deepMix } from '@antv/util';\nimport {\n  max as d3Max,\n  mean as d3Mean,\n  sum as d3Sum,\n  min as d3Min,\n  median as d3Median,\n} from '@antv/vendor/d3-array';\nimport { TransformComponent as TC, Primitive, G2Mark } from '../runtime';\nimport { GroupTransform, Reducer } from '../spec';\nimport { indexOf } from '../utils/array';\nimport { columnOf, column, nonConstantColumn } from './utils/helper';\n\nexport type GroupNOptions = Omit<\n  GroupTransform & {\n    groupBy?: (\n      I: number[],\n      mark: G2Mark,\n      options?: Record<string, any>,\n    ) => number[][];\n  },\n  'type' | 'channels'\n>;\n\ntype ReducerFunction = (I: number[], V: Primitive[]) => Primitive;\n\ntype Formatter = (d: Primitive) => string;\n\nfunction builtinFormatter(summary: string) {\n  return (d: string) => (d === null ? summary : `${summary} of ${d}`);\n}\n\nfunction normalizeReducer(reducer: Reducer): [ReducerFunction, Formatter] {\n  if (typeof reducer === 'function') return [reducer, null];\n  const registry = { mean, max, count, first, last, sum, min, median };\n  const reducerFunction = registry[reducer];\n  if (!reducerFunction) throw new Error(`Unknown reducer: ${reducer}.`);\n  return reducerFunction();\n}\n\nfunction mean(): [ReducerFunction, Formatter] {\n  const reducer: ReducerFunction = (I, V) => d3Mean(I, (i) => +V[i]);\n  const formatter: Formatter = builtinFormatter('mean');\n  return [reducer, formatter];\n}\n\nfunction median(): [ReducerFunction, Formatter] {\n  const reducer: ReducerFunction = (I, V) => d3Median(I, (i) => +V[i]);\n  const formatter: Formatter = builtinFormatter('median');\n  return [reducer, formatter];\n}\n\nfunction max(): [ReducerFunction, Formatter] {\n  const reducer: ReducerFunction = (I, V) => d3Max(I, (i) => +V[i]);\n  const formatter: Formatter = builtinFormatter('max');\n  return [reducer, formatter];\n}\n\nfunction min(): [ReducerFunction, Formatter] {\n  const reducer: ReducerFunction = (I, V) => d3Min(I, (i) => +V[i]);\n  const formatter: Formatter = builtinFormatter('min');\n  return [reducer, formatter];\n}\n\nfunction count(): [ReducerFunction, Formatter] {\n  const reducer: ReducerFunction = (I, V) => I.length;\n  const formatter: Formatter = builtinFormatter('count');\n  return [reducer, formatter];\n}\n\nfunction sum(): [ReducerFunction, Formatter] {\n  const reducer: ReducerFunction = (I, V) => d3Sum(I, (i) => +V[i]);\n  const formatter: Formatter = builtinFormatter('sum');\n  return [reducer, formatter];\n}\n\nfunction first(): [ReducerFunction, Formatter] {\n  const reducer: ReducerFunction = (I, V) => V[I[0]];\n  const formatter: Formatter = builtinFormatter('first');\n  return [reducer, formatter];\n}\n\nfunction last(): [ReducerFunction, Formatter] {\n  const reducer: ReducerFunction = (I, V) => V[I[I.length - 1]];\n  const formatter: Formatter = builtinFormatter('last');\n  return [reducer, formatter];\n}\n\n/**\n * The Group transform group data by x and y channels, and aggregate.\n */\nexport const GroupN: TC<GroupNOptions> = (options = {}) => {\n  const { groupBy, ...rest } = options;\n  return (I, mark) => {\n    const { data, encode } = mark;\n    const groups = groupBy(I, mark);\n    if (!groups) return [I, mark];\n\n    // Extract field from from channel\n    // x1 from x, y1 from y, etc,.\n    const maybeFrom = (field, reducer) => {\n      if (field) return field;\n      const { from } = reducer;\n      if (!from) return field;\n      const [, field1] = columnOf(encode, from);\n      return field1;\n    };\n    const outputs = Object.entries(rest).map(([channel, reducer]) => {\n      const [reducerFunction, formatter] = normalizeReducer(reducer);\n      const [V, field] = columnOf(encode, channel);\n      const field1 = maybeFrom(field, reducer);\n      const RV = groups.map((I) => reducerFunction(I, V ?? data));\n      return [\n        channel,\n        {\n          ...nonConstantColumn(RV, formatter?.(field1) || field1),\n          aggregate: true,\n        },\n      ];\n    });\n    const reducedColumns = Object.keys(encode).map((key) => {\n      const [V, fv] = columnOf(encode, key);\n      const GV = groups.map((I) => V[I[0]]);\n      return [key, column(GV, fv)];\n    });\n    const GD = groups.map((I) => data[I[0]]);\n    const GI = indexOf(groups);\n    return [\n      GI,\n      deepMix({}, mark, {\n        data: GD,\n        encode: Object.fromEntries([...reducedColumns, ...outputs]),\n      }),\n    ];\n  };\n};\n\nGroupN.props = {};\n", "import { TransformComponent as TC, G2Mark } from '../runtime';\nimport { GroupTransform } from '../spec';\nimport { createGroups } from './utils/order';\nimport { GroupN } from './groupN';\n\nexport type GroupOptions = Omit<\n  GroupTransform & {\n    groupBy?: (\n      I: number[],\n      mark: G2Mark,\n      options?: Record<string, any>,\n    ) => number[][];\n  },\n  'type'\n>;\n\n/**\n * The Group transform group data by x and y channels, and aggregate.\n */\nexport const Group: TC<GroupOptions> = (options = {}) => {\n  const { channels = ['x', 'y'], ...rest } = options;\n  const groupBy = (I, mark) => createGroups(channels, I, mark);\n  return GroupN({ ...rest, groupBy });\n};\n\nGroup.props = {};\n", "import { TransformComponent as TC } from '../runtime';\nimport { GroupXTransform } from '../spec';\nimport { Group } from './group';\n\nexport type GroupXOptions = Omit<GroupXTransform, 'type'>;\n\n/**\n * The GroupX transform group data by x channel, and aggregate.\n */\nexport const GroupX: TC<GroupXOptions> = (options = {}) => {\n  return Group({ ...options, channels: ['x', 'color', 'series'] });\n};\n\nGroupX.props = {};\n", "import { TransformComponent as TC } from '../runtime';\nimport { GroupYTransform } from '../spec';\nimport { Group } from './group';\n\nexport type GroupYOptions = Omit<GroupYTransform, 'type'>;\n\n/**\n * The GroupY transform group data by x channel, and aggregate.\n */\nexport const GroupY: TC<GroupYOptions> = (options = {}) => {\n  return Group({ ...options, channels: ['y', 'color', 'series'] });\n};\n\nGroupY.props = {};\n", "import { TransformComponent as TC } from '../runtime';\nimport { GroupColorTransform } from '../spec';\nimport { Group } from './group';\n\nexport type GroupColorOptions = Omit<GroupColorTransform, 'type'>;\n\n/**\n * The GroupColor transform group data by x channel, and aggregate.\n */\nexport const GroupColor: TC<GroupColorOptions> = (options = {}) => {\n  return Group({ ...options, channels: ['color'] });\n};\n\nGroupColor.props = {};\n", "import { deepMix } from '@antv/util';\nimport {\n  Primitive,\n  groupSort,\n  max,\n  min,\n  sum,\n  mean,\n  median,\n  sort,\n} from '@antv/vendor/d3-array';\nimport { G2Mark, TransformComponent as TC } from '../runtime';\nimport { columnOf } from './utils/helper';\n\nfunction createReducer(channel, options, encode): (I: number[]) => any {\n  const { by = channel, reducer = 'max' } = options;\n  const [V] = columnOf(encode, by);\n  if (typeof reducer === 'function') return (GI: number[]) => reducer(GI, V);\n  if (reducer === 'max') return (GI: number[]) => max(GI, (i) => +V[i]);\n  if (reducer === 'min') return (GI: number[]) => min(GI, (i) => +V[i]);\n  if (reducer === 'sum') return (GI: number[]) => sum(GI, (i) => +V[i]);\n  if (reducer === 'median') return (GI: number[]) => median(GI, (i) => +V[i]);\n  if (reducer === 'mean') return (GI: number[]) => mean(GI, (i) => +V[i]);\n  if (reducer === 'first') return (GI: number[]) => V[GI[0]];\n  if (reducer === 'last') return (GI: number[]) => V[GI[GI.length - 1]];\n  throw new Error(`Unknown reducer: ${reducer}`);\n}\n\nexport type SortOptions = {\n  by?: string;\n  reverse?: boolean;\n  channel?: string;\n  slice?: number | [number, number];\n  ordinal?: boolean;\n  reducer?:\n    | 'max'\n    | 'min'\n    | 'sum'\n    | 'first'\n    | 'last'\n    | 'mean'\n    | 'median'\n    | ((I: number[], V: Primitive[]) => Primitive);\n};\n\n// If domain is specified, only sort data in the domain.\nfunction filterIndex(I, values, specifiedDomain): number[] {\n  if (!Array.isArray(specifiedDomain)) return I;\n  const domain = new Set(specifiedDomain);\n  return I.filter((i) => domain.has(values[i]));\n}\n\n/**\n * Sort marks groups by groups.\n */\nexport const Sort: TC<SortOptions> = (options = {}) => {\n  return (I, mark) => {\n    const { reverse, slice, channel, by, ordinal = true, reducer } = options;\n    const { encode, scale = {} } = mark;\n    const domain = scale[channel].domain;\n    const [V] = columnOf(encode, by ?? channel);\n    const [T] = columnOf(encode, channel);\n    const normalizeReducer = createReducer(channel, { by, reducer }, encode);\n    const SI = filterIndex(I, T, domain);\n    const sortedDomain = groupSort(SI, normalizeReducer, (i: number) => T[i]);\n\n    // when ordinal is true, do not change the index of the data.\n    const sortedI = !ordinal ? sort(I, (i: number) => V[i]) : I;\n    if (reverse) {\n      !ordinal && sortedI.reverse();\n      sortedDomain.reverse();\n    }\n    const s = typeof slice === 'number' ? [0, slice] : slice;\n    const slicedDomain = slice ? sortedDomain.slice(...s) : sortedDomain;\n    return [\n      sortedI,\n      deepMix(mark, { scale: { [channel]: { domain: slicedDomain } } }),\n    ];\n  };\n};\n\nSort.props = {};\n", "import { TransformComponent as TC } from '../runtime';\nimport { SortXTransform } from '../spec';\nimport { Sort } from './sort';\n\nexport type SortXOptions = Omit<SortXTransform, 'type'>;\n\n/**\n * Sort domain of x scale of mark groups by groups.\n */\nexport const SortX: TC<SortXOptions> = (options = {}) => {\n  return Sort({ ...options, channel: 'x' });\n};\n\nSortX.props = {};\n", "import { TransformComponent as TC } from '../runtime';\nimport { SortColorTransform } from '../spec';\nimport { Sort } from './sort';\n\nexport type SortColorOptions = Omit<SortColorTransform, 'type'>;\n\n/**\n * Sort domain of x scale of mark groups by groups.\n */\nexport const SortColor: TC<SortColorOptions> = (options = {}) => {\n  return Sort({ ...options, channel: 'color' });\n};\n\nSortColor.props = {};\n", "import { TransformComponent as TC } from '../runtime';\nimport { SortYTransform } from '../spec';\nimport { Sort } from './sort';\n\nexport type SortYOptions = Omit<SortYTransform, 'type'>;\n\n/**\n * Sort domain of x scale of mark groups by groups.\n */\nexport const SortY: TC<SortYOptions> = (options = {}) => {\n  return Sort({ ...options, channel: 'y' });\n};\n\nSortY.props = {};\n", "import { deepMix } from '@antv/util';\nimport { rollups, sum, Primitive } from '@antv/vendor/d3-array';\nimport { TransformComponent as TC } from '../runtime';\nimport { FlexXTransform } from '../spec';\nimport { columnOf } from './utils/helper';\n\nexport type FlexXOptions = Omit<FlexXTransform, 'type'>;\n\nfunction valueOf(data: any, field: FlexXOptions['field']) {\n  if (typeof field === 'string') return data.map((d) => d[field]);\n  return data.map(field);\n}\n\nfunction createReducer(\n  reducer: FlexXOptions['reducer'],\n  V: Primitive[],\n): (I: number[]) => any {\n  if (typeof reducer === 'function') return (GI: number[]) => reducer(GI, V);\n  if (reducer === 'sum') return (GI: number[]) => sum(GI, (i) => +V[i]);\n  throw new Error(`Unknown reducer: ${reducer}`);\n}\n\n/**\n * Produce flex options from data for x scale.\n */\nexport const FlexX: TC<FlexXOptions> = (options = {}) => {\n  const { field, channel = 'y', reducer = 'sum' } = options;\n  return (I, mark) => {\n    const { data, encode } = mark;\n    const [x] = columnOf(encode, 'x');\n    const V = field ? valueOf(data, field) : columnOf(encode, channel)[0];\n    const reducerFunction = createReducer(reducer, V);\n    const flex = rollups(I, reducerFunction, (i) => x[i]).map((d) => d[1]);\n    return [I, deepMix({}, mark, { scale: { x: { flex } } })];\n  };\n};\n\nFlexX.props = {};\n", "export type Vector2 = [number, number];\n\nexport function sub([x1, y1]: Vector2, [x2, y2]: Vector2): Vector2 {\n  return [x1 - x2, y1 - y2];\n}\n\nexport function add([x1, y1]: Vector2, [x2, y2]: Vector2): Vector2 {\n  return [x1 + x2, y1 + y2];\n}\n\nexport function dist([x0, y0]: Vector2, [x1, y1]: Vector2): number {\n  return Math.sqrt((x0 - x1) ** 2 + (y0 - y1) ** 2);\n}\n\n/**\n * Calculate angle of vector [x, y].\n */\nexport function angle([x, y]: Vector2): number {\n  return Math.atan2(y, x);\n}\n\n/**\n * Calculate angle of [x, y], then + Math.PI / 2.\n * Because of the difference between `Geometric coordinate system` and `Visualization coordinate system`.\n * @returns\n */\nexport function angleWithQuadrant([x, y]: Vector2): number {\n  return angle([x, y]) + Math.PI / 2;\n}\n\nexport function angleBetween(v0: Vector2, v1: Vector2): number {\n  const a0 = angle(v0);\n  const a1 = angle(v1);\n  if (a0 < a1) return a1 - a0;\n  return Math.PI * 2 - (a0 - a1);\n}\n\nexport function calcBBox(points: Vector2[]) {\n  let minX = Infinity;\n  let maxX = -Infinity;\n  let minY = Infinity;\n  let maxY = -Infinity;\n  for (const [x, y] of points) {\n    minX = Math.min(x, minX);\n    maxX = Math.max(x, maxX);\n    minY = Math.min(y, minY);\n    maxY = Math.max(y, maxY);\n  }\n  const width = maxX - minX;\n  const height = maxY - minY;\n  return [minX, minY, width, height];\n}\n\n/**\n * Get the center of two points.\n */\nexport function mid([x1, y1]: Vector2, [x2, y2]: Vector2): Vector2 {\n  return [(x1 + x2) / 2, (y1 + y2) / 2];\n}\n", "import { deepMix } from '@antv/util';\nimport { TransformComponent as TC } from '../runtime';\nimport { calcBBox } from '../utils/vector';\nimport { PackTransform } from '../spec';\n\nexport type PackOptions = Omit<PackTransform, 'type'>;\n\nfunction pack(options: PackOptions) {\n  const { padding = 0, direction = 'col' } = options;\n  return (P, count, layout) => {\n    const pcount = P.length;\n    if (pcount === 0) return [];\n\n    // col * row >= count\n    // row is close to col * aspect, so\n    // col * (col * aspect) >= count\n    const { innerWidth, innerHeight } = layout;\n    const aspect = innerHeight / innerWidth;\n    let col = Math.ceil(Math.sqrt(count / aspect));\n\n    // Increase col to avoid total height of packed shape\n    // being large than height of bbox.\n    let size = innerWidth / col;\n    let row = Math.ceil(count / col);\n    let h0 = row * size;\n    while (h0 > innerHeight) {\n      col = col + 1;\n      size = innerWidth / col;\n      row = Math.ceil(count / col);\n      h0 = row * size;\n    }\n\n    // Some offset to increase the space usage.\n    const space = innerHeight - row * size;\n    const intervalY = row <= 1 ? 0 : space / (row - 1);\n    const [offsetX, offsetY] =\n      row <= 1\n        ? [\n            (innerWidth - pcount * size) / (pcount - 1),\n            (innerHeight - size) / 2,\n          ]\n        : [0, 0];\n\n    return P.map((points, m) => {\n      const [x, y, width, height] = calcBBox(points);\n      const i = direction === 'col' ? m % col : Math.floor(m / row);\n      const j = direction === 'col' ? Math.floor(m / col) : m % row;\n\n      const newX = i * size;\n      const newY = (row - j - 1) * size + space;\n\n      const sx = (size - padding) / width;\n      const sy = (size - padding) / height;\n\n      // Translate the shape and mark to make sure the center of\n      // shape is overlap before and after scale transformation.\n      const tx = newX - x + offsetX * i + (1 / 2) * padding;\n      const ty = newY - y - intervalY * j - offsetY + (1 / 2) * padding;\n      return `translate(${tx}, ${ty}) scale(${sx}, ${sy})`;\n    });\n  };\n}\n\n/**\n * Uniform pack to avid overlap.\n * @todo Improve or change algorithm to increase space usage.\n * @todo Take some special case into account.\n */\nexport const Pack: TC<PackOptions> = (options) => {\n  return (I, mark) => {\n    return [I, deepMix({}, mark, { modifier: pack(options), axis: false })];\n  };\n};\n\nPack.props = {};\n", "import {\n  bin as d3Bin,\n  group,\n  thresholdScott,\n  extent,\n} from '@antv/vendor/d3-array';\nimport { defined, subObject } from '../utils/helper';\nimport { TransformComponent as TC } from '../runtime';\nimport { BinTransform } from '../spec';\nimport { GroupN } from './groupN';\nimport { columnOf } from './utils/helper';\n\nexport type BinOptions = Omit<BinTransform, 'type'> & {\n  groupChannels?: string[];\n  binChannels?: string[];\n};\n\nconst THRESHOLD = 'thresholds';\n\n/**\n * @see https://github.com/observablehq/plot/blob/main/src/transforms/bin.js\n */\nfunction thresholdAuto(values: number[]) {\n  const [min, max] = extent(values);\n  return Math.min(200, thresholdScott(values, min, max));\n}\n\n/**\n * The Bin aggregate data.\n * @todo More threshold method.\n * @todo Performance.\n */\nexport const Bin: TC<BinOptions> = (options = {}) => {\n  const {\n    groupChannels = ['color'],\n    binChannels = ['x', 'y'],\n    ...rest\n  } = options;\n  const channelIndexKey = {};\n\n  // Group indexes and update channelIndexKey.\n  const groupBy = (I, mark): number[][] => {\n    const { encode } = mark;\n    const binValues = binChannels.map((channel) => {\n      const [V] = columnOf(encode, channel);\n      return V;\n    });\n    const thresholds = subObject(rest, THRESHOLD);\n    const DI = I.filter((i) => binValues.every((V) => defined(V[i])));\n\n    // Group indexes by both discrete and quantitative channels.\n    const groupKeys = [\n      // For discrete channels, use value as group key.\n      ...groupChannels\n        .map((d) => {\n          const [V] = columnOf(encode, d);\n          return V;\n        })\n        .filter(defined)\n        .map((V) => (i) => V[i]),\n\n      // For quantitative channels, use extent of bin as group key.\n      ...binChannels.map((d, i) => {\n        const V = binValues[i];\n        const t = thresholds[d] || thresholdAuto(V as number[]);\n        const bins = d3Bin()\n          .thresholds(t)\n          .value((i) => +V[i])(DI);\n        const indexKey = new Map(\n          bins.flatMap((bin) => {\n            const { x0, x1 } = bin;\n            const key = `${x0},${x1}`;\n            return bin.map((i) => [i, key]);\n          }),\n        );\n        channelIndexKey[d] = indexKey;\n        return (i) => indexKey.get(i);\n      }),\n    ];\n\n    // Group by indexes by channel keys.\n    const key = (i: number) => groupKeys.map((key) => key(i)).join('-');\n    return Array.from(group(DI, key).values()) as number[][];\n  };\n\n  return GroupN({\n    // Non-bin channel and reducer.\n    ...Object.fromEntries(\n      Object.entries(rest).filter(([k]) => !k.startsWith(THRESHOLD)),\n    ),\n    // Bin channel and reducer.\n    ...Object.fromEntries(\n      binChannels.flatMap((channel) => {\n        const start = ([i]) => +channelIndexKey[channel].get(i).split(',')[0];\n        const end = ([i]) => +channelIndexKey[channel].get(i).split(',')[1];\n        end.from = channel;\n        return [\n          [channel, start],\n          [`${channel}1`, end],\n        ];\n      }),\n    ),\n    groupBy,\n  });\n};\n\nBin.props = {};\n", "import { TransformComponent as TC } from '../runtime';\nimport { BinXTransform } from '../spec';\nimport { Bin } from './bin';\n\nexport type BinXOptions = Omit<BinXTransform, 'type'>;\n\nexport const BinX: TC<BinXOptions> = (options = {}) => {\n  const { thresholds } = options;\n  return Bin({\n    ...options,\n    thresholdsX: thresholds,\n    groupChannels: ['color'],\n    binChannels: ['x'],\n  });\n};\n\nBinX.props = {};\n", "/**\n * Sample data with lttb(Largest-Triangle-Three-Buckets) algo (https://github.com/pingec/downsample-lttb).\n * Return the sampled index array.\n */\nexport function lttb(\n  I: number[],\n  X: number[],\n  Y: number[],\n  thresholds: number,\n): number[] {\n  const length = I.length;\n  if (thresholds >= length || thresholds === 0) {\n    return I;\n  }\n\n  const x = (i: number) => X[I[i]] * 1;\n  const y = (i: number) => Y[I[i]] * 1;\n  const sampled = [];\n\n  // Bucket size. Leave room for start and end data points.\n  const every = (length - 2) / (thresholds - 2);\n\n  let a = 0; // Initially a is the first point in the triangle.\n  let maxArea;\n  let area;\n  let nextA;\n\n  sampled.push(a); // Always add the first point.\n\n  for (let i = 0; i < thresholds - 2; i++) {\n    // Calculate point average for next bucket (containing c).\n    let avgX = 0;\n    let avgY = 0;\n    let start = Math.floor((i + 1) * every) + 1;\n    let end = Math.floor((i + 2) * every) + 1;\n    end = Math.min(end, length);\n    const size = end - start;\n\n    for (; start < end; start++) {\n      avgX += x(start);\n      avgY += y(start);\n    }\n    avgX /= size;\n    avgY /= size;\n\n    // Get the range for this bucket.\n    let frameStart = Math.floor((i + 0) * every) + 1;\n    const frameEnd = Math.floor((i + 1) * every) + 1;\n\n    // Point a.\n    const pointA = [x(a), y(a)];\n    maxArea = area = -1;\n    for (; frameStart < frameEnd; frameStart++) {\n      // Calculate triangle area over three buckets.\n      area =\n        Math.abs(\n          (pointA[0] - avgX) * (x(frameStart) - pointA[1]) -\n            (pointA[0] - y(frameStart)) * (avgY - pointA[0]),\n        ) * 0.5;\n      if (area > maxArea) {\n        maxArea = area;\n        nextA = frameStart; // Next a is this b.\n      }\n    }\n\n    sampled.push(nextA); // Pick this point from the bucket.\n    a = nextA; // This a is the next a (chosen b).\n  }\n\n  sampled.push(length - 1); // Always add last.\n\n  return sampled.map((a) => I[a]);\n}\n", "// @ts-ignore medianIndex exist in d3-array@3.2.0, but @types/d3-array Expired.\nimport { maxIndex, minIndex, medianIndex } from '@antv/vendor/d3-array';\nimport { TransformComponent as TC, Primitive } from '../runtime';\nimport { SampleTransform, SampleFunction } from '../spec';\nimport { createGroups } from './utils/order';\nimport { columnOf } from './utils/helper';\nimport { lttb } from './utils/lttb';\n\nexport type SampleOptions = Omit<SampleTransform, 'type'>;\n\nfunction normalizeSample(\n  strategy: SampleTransform['strategy'],\n): SampleFunction {\n  if (typeof strategy === 'function') return strategy;\n  if (strategy === 'lttb') return lttb;\n\n  const strategies = {\n    first: (f: number[]) => [f[0]],\n    last: (f: number[]) => [f[f.length - 1]],\n    min: (f: number[], X: number[], Y: number[]) => [\n      f[minIndex(f, (i) => Y[i])],\n    ],\n    max: (f: number[], X: number[], Y: number[]) => [\n      f[maxIndex(f, (i) => Y[i])],\n    ],\n    median: (f: number[], X: number[], Y: number[]) => [\n      f[medianIndex(f, (i) => Y[i])],\n    ],\n  };\n  const sampleFunction = strategies[strategy] || strategies.median;\n  return (I: number[], X: number[], Y: number[], thresholds: number) => {\n    // Sepreate group to frames, then sample each frame.\n    // Keep more data as possible.\n    const frameSize = Math.max(1, Math.floor(I.length / thresholds));\n    const frames = getFrames(I, frameSize);\n    return frames.flatMap((frame) => sampleFunction(frame, X, Y));\n  };\n}\n\n/**\n * Split the array into frame with each frameSize.\n */\nfunction getFrames(I: Primitive[], frameSize: number): number[][] {\n  const size = I.length;\n  const frames = [];\n  let i = 0;\n  while (i < size) {\n    frames.push(I.slice(i, (i += frameSize)));\n  }\n  return frames;\n}\n\n/**\n * The sample transform groups marks with specified groupBy fields, and\n * sample data for each group when data.length >= threshold(default = 2000).\n */\nexport const Sample: TC<SampleOptions> = (options = {}) => {\n  const {\n    strategy = 'median',\n    thresholds = 2000,\n    groupBy = ['series', 'color'],\n  } = options;\n  const sampleFunction = normalizeSample(strategy);\n\n  return (I, mark) => {\n    const { encode } = mark;\n    const groups = createGroups(groupBy, I, mark);\n    const [X] = columnOf(encode, 'x');\n    const [Y] = columnOf(encode, 'y');\n\n    return [\n      groups.flatMap((g) =>\n        sampleFunction(g, X as number[], Y as number[], thresholds),\n      ),\n      mark,\n    ];\n  };\n};\n\nSample.props = {};\n", "import { deepMix } from '@antv/util';\nimport { G2Mark, TransformComponent as TC } from '../runtime';\nimport { FilterTransform } from '../spec';\nimport { defined } from '../utils/helper';\nimport { columnOf } from './utils/helper';\n\nexport type FilterOptions = Omit<FilterTransform, 'type'>;\n\nfunction normalizeValue(value) {\n  if (typeof value === 'object') return [value.value, value.ordinal];\n  else return [value, true];\n}\n\nfunction filterWhenNoElements(mark: G2Mark) {\n  const { encode } = mark;\n\n  // keep y-axis\n  const noElementMark = {\n    ...mark,\n    encode: {\n      ...mark.encode,\n      y: {\n        ...mark.encode.y,\n        value: [],\n      },\n    },\n  };\n\n  const targetField = encode?.color?.field;\n  if (!encode || !targetField) {\n    return noElementMark;\n  }\n\n  // color\n  let filterObject;\n\n  for (const [key, v] of Object.entries(encode)) {\n    if ((key === 'x' || key === 'y') && v.field === targetField) {\n      filterObject = {\n        ...filterObject,\n        [key]: {\n          ...v,\n          value: [],\n        },\n      };\n    }\n  }\n\n  if (!filterObject) {\n    return noElementMark;\n  }\n\n  return {\n    ...mark,\n    encode: {\n      ...mark.encode,\n      ...filterObject,\n    },\n  };\n}\n\n/**\n * The Filter transform filter channels.\n */\nexport const Filter: TC<FilterOptions> = (options = {}) => {\n  return (I, mark) => {\n    const { encode, data } = mark;\n    const filters = Object.entries(options)\n      .map(([key, v]) => {\n        const [V] = columnOf(encode, key);\n        // Skip empty channel.\n        if (!V) return null;\n        const [value, ordinal = true] = normalizeValue(v);\n        if (typeof value === 'function') return (i) => value(V[i]);\n        if (ordinal) {\n          const expectedValues = Array.isArray(value) ? value : [value];\n          // Skip empty expected values.\n          if (expectedValues.length === 0) return null;\n          return (i) => expectedValues.includes(V[i]);\n        } else {\n          const [start, end] = value;\n          return (i) => V[i] >= start && V[i] <= end;\n        }\n      })\n      .filter(defined);\n    // Filter index and channels.\n    const totalFilter = (i) => filters.every((f) => f(i));\n    const FI = I.filter(totalFilter);\n    const newIndex = FI.map((_, i) => i);\n\n    if (filters.length === 0) {\n      const targetMark = filterWhenNoElements(mark);\n      return [I, targetMark];\n    }\n\n    const newEncodes = Object.entries(encode).map(([key, encode]) => {\n      return [\n        key,\n        {\n          ...encode,\n          value: newIndex\n            .map((i) => encode.value[FI[i]])\n            .filter((v) => v !== undefined),\n        },\n      ];\n    });\n    return [\n      newIndex,\n      deepMix({}, mark, {\n        encode: Object.fromEntries(newEncodes),\n        // Filter data for tooltip item.\n        data: FI.map((i) => data[i]),\n      }),\n    ];\n  };\n};\n\nFilter.props = {};\n", "export default function(x) {\n  return function constant() {\n    return x;\n  };\n}\n", "export const abs = Math.abs;\nexport const atan2 = Math.atan2;\nexport const cos = Math.cos;\nexport const max = Math.max;\nexport const min = Math.min;\nexport const sin = Math.sin;\nexport const sqrt = Math.sqrt;\n\nexport const epsilon = 1e-12;\nexport const pi = Math.PI;\nexport const halfPi = pi / 2;\nexport const tau = 2 * pi;\n\nexport function acos(x) {\n  return x > 1 ? 0 : x < -1 ? pi : Math.acos(x);\n}\n\nexport function asin(x) {\n  return x >= 1 ? halfPi : x <= -1 ? -halfPi : Math.asin(x);\n}\n", "const pi = Math.PI,\n    tau = 2 * pi,\n    epsilon = 1e-6,\n    tauEpsilon = tau - epsilon;\n\nfunction append(strings) {\n  this._ += strings[0];\n  for (let i = 1, n = strings.length; i < n; ++i) {\n    this._ += arguments[i] + strings[i];\n  }\n}\n\nfunction appendRound(digits) {\n  let d = Math.floor(digits);\n  if (!(d >= 0)) throw new Error(`invalid digits: ${digits}`);\n  if (d > 15) return append;\n  const k = 10 ** d;\n  return function(strings) {\n    this._ += strings[0];\n    for (let i = 1, n = strings.length; i < n; ++i) {\n      this._ += Math.round(arguments[i] * k) / k + strings[i];\n    }\n  };\n}\n\nexport class Path {\n  constructor(digits) {\n    this._x0 = this._y0 = // start of current subpath\n    this._x1 = this._y1 = null; // end of current subpath\n    this._ = \"\";\n    this._append = digits == null ? append : appendRound(digits);\n  }\n  moveTo(x, y) {\n    this._append`M${this._x0 = this._x1 = +x},${this._y0 = this._y1 = +y}`;\n  }\n  closePath() {\n    if (this._x1 !== null) {\n      this._x1 = this._x0, this._y1 = this._y0;\n      this._append`Z`;\n    }\n  }\n  lineTo(x, y) {\n    this._append`L${this._x1 = +x},${this._y1 = +y}`;\n  }\n  quadraticCurveTo(x1, y1, x, y) {\n    this._append`Q${+x1},${+y1},${this._x1 = +x},${this._y1 = +y}`;\n  }\n  bezierCurveTo(x1, y1, x2, y2, x, y) {\n    this._append`C${+x1},${+y1},${+x2},${+y2},${this._x1 = +x},${this._y1 = +y}`;\n  }\n  arcTo(x1, y1, x2, y2, r) {\n    x1 = +x1, y1 = +y1, x2 = +x2, y2 = +y2, r = +r;\n\n    // Is the radius negative? Error.\n    if (r < 0) throw new Error(`negative radius: ${r}`);\n\n    let x0 = this._x1,\n        y0 = this._y1,\n        x21 = x2 - x1,\n        y21 = y2 - y1,\n        x01 = x0 - x1,\n        y01 = y0 - y1,\n        l01_2 = x01 * x01 + y01 * y01;\n\n    // Is this path empty? Move to (x1,y1).\n    if (this._x1 === null) {\n      this._append`M${this._x1 = x1},${this._y1 = y1}`;\n    }\n\n    // Or, is (x1,y1) coincident with (x0,y0)? Do nothing.\n    else if (!(l01_2 > epsilon));\n\n    // Or, are (x0,y0), (x1,y1) and (x2,y2) collinear?\n    // Equivalently, is (x1,y1) coincident with (x2,y2)?\n    // Or, is the radius zero? Line to (x1,y1).\n    else if (!(Math.abs(y01 * x21 - y21 * x01) > epsilon) || !r) {\n      this._append`L${this._x1 = x1},${this._y1 = y1}`;\n    }\n\n    // Otherwise, draw an arc!\n    else {\n      let x20 = x2 - x0,\n          y20 = y2 - y0,\n          l21_2 = x21 * x21 + y21 * y21,\n          l20_2 = x20 * x20 + y20 * y20,\n          l21 = Math.sqrt(l21_2),\n          l01 = Math.sqrt(l01_2),\n          l = r * Math.tan((pi - Math.acos((l21_2 + l01_2 - l20_2) / (2 * l21 * l01))) / 2),\n          t01 = l / l01,\n          t21 = l / l21;\n\n      // If the start tangent is not coincident with (x0,y0), line to.\n      if (Math.abs(t01 - 1) > epsilon) {\n        this._append`L${x1 + t01 * x01},${y1 + t01 * y01}`;\n      }\n\n      this._append`A${r},${r},0,0,${+(y01 * x20 > x01 * y20)},${this._x1 = x1 + t21 * x21},${this._y1 = y1 + t21 * y21}`;\n    }\n  }\n  arc(x, y, r, a0, a1, ccw) {\n    x = +x, y = +y, r = +r, ccw = !!ccw;\n\n    // Is the radius negative? Error.\n    if (r < 0) throw new Error(`negative radius: ${r}`);\n\n    let dx = r * Math.cos(a0),\n        dy = r * Math.sin(a0),\n        x0 = x + dx,\n        y0 = y + dy,\n        cw = 1 ^ ccw,\n        da = ccw ? a0 - a1 : a1 - a0;\n\n    // Is this path empty? Move to (x0,y0).\n    if (this._x1 === null) {\n      this._append`M${x0},${y0}`;\n    }\n\n    // Or, is (x0,y0) not coincident with the previous point? Line to (x0,y0).\n    else if (Math.abs(this._x1 - x0) > epsilon || Math.abs(this._y1 - y0) > epsilon) {\n      this._append`L${x0},${y0}`;\n    }\n\n    // Is this arc empty? Were done.\n    if (!r) return;\n\n    // Does the angle go the wrong way? Flip the direction.\n    if (da < 0) da = da % tau + tau;\n\n    // Is this a complete circle? Draw two arcs to complete the circle.\n    if (da > tauEpsilon) {\n      this._append`A${r},${r},0,1,${cw},${x - dx},${y - dy}A${r},${r},0,1,${cw},${this._x1 = x0},${this._y1 = y0}`;\n    }\n\n    // Is this arc non-empty? Draw an arc!\n    else if (da > epsilon) {\n      this._append`A${r},${r},0,${+(da >= pi)},${cw},${this._x1 = x + r * Math.cos(a1)},${this._y1 = y + r * Math.sin(a1)}`;\n    }\n  }\n  rect(x, y, w, h) {\n    this._append`M${this._x0 = this._x1 = +x},${this._y0 = this._y1 = +y}h${w = +w}v${+h}h${-w}Z`;\n  }\n  toString() {\n    return this._;\n  }\n}\n\nexport function path() {\n  return new Path;\n}\n\n// Allow instanceof d3.path\npath.prototype = Path.prototype;\n\nexport function pathRound(digits = 3) {\n  return new Path(+digits);\n}\n", "import {Path} from \"d3-path\";\n\nexport function withPath(shape) {\n  let digits = 3;\n\n  shape.digits = function(_) {\n    if (!arguments.length) return digits;\n    if (_ == null) {\n      digits = null;\n    } else {\n      const d = Math.floor(_);\n      if (!(d >= 0)) throw new RangeError(`invalid digits: ${_}`);\n      digits = d;\n    }\n    return shape;\n  };\n\n  return () => new Path(digits);\n}\n", "import constant from \"./constant.js\";\nimport {abs, acos, asin, atan2, cos, epsilon, halfPi, max, min, pi, sin, sqrt, tau} from \"./math.js\";\nimport {withPath} from \"./path.js\";\n\nfunction arcInnerRadius(d) {\n  return d.innerRadius;\n}\n\nfunction arcOuterRadius(d) {\n  return d.outerRadius;\n}\n\nfunction arcStartAngle(d) {\n  return d.startAngle;\n}\n\nfunction arcEndAngle(d) {\n  return d.endAngle;\n}\n\nfunction arcPadAngle(d) {\n  return d && d.padAngle; // Note: optional!\n}\n\nfunction intersect(x0, y0, x1, y1, x2, y2, x3, y3) {\n  var x10 = x1 - x0, y10 = y1 - y0,\n      x32 = x3 - x2, y32 = y3 - y2,\n      t = y32 * x10 - x32 * y10;\n  if (t * t < epsilon) return;\n  t = (x32 * (y0 - y2) - y32 * (x0 - x2)) / t;\n  return [x0 + t * x10, y0 + t * y10];\n}\n\n// Compute perpendicular offset line of length rc.\n// http://mathworld.wolfram.com/Circle-LineIntersection.html\nfunction cornerTangents(x0, y0, x1, y1, r1, rc, cw) {\n  var x01 = x0 - x1,\n      y01 = y0 - y1,\n      lo = (cw ? rc : -rc) / sqrt(x01 * x01 + y01 * y01),\n      ox = lo * y01,\n      oy = -lo * x01,\n      x11 = x0 + ox,\n      y11 = y0 + oy,\n      x10 = x1 + ox,\n      y10 = y1 + oy,\n      x00 = (x11 + x10) / 2,\n      y00 = (y11 + y10) / 2,\n      dx = x10 - x11,\n      dy = y10 - y11,\n      d2 = dx * dx + dy * dy,\n      r = r1 - rc,\n      D = x11 * y10 - x10 * y11,\n      d = (dy < 0 ? -1 : 1) * sqrt(max(0, r * r * d2 - D * D)),\n      cx0 = (D * dy - dx * d) / d2,\n      cy0 = (-D * dx - dy * d) / d2,\n      cx1 = (D * dy + dx * d) / d2,\n      cy1 = (-D * dx + dy * d) / d2,\n      dx0 = cx0 - x00,\n      dy0 = cy0 - y00,\n      dx1 = cx1 - x00,\n      dy1 = cy1 - y00;\n\n  // Pick the closer of the two intersection points.\n  // TODO Is there a faster way to determine which intersection to use?\n  if (dx0 * dx0 + dy0 * dy0 > dx1 * dx1 + dy1 * dy1) cx0 = cx1, cy0 = cy1;\n\n  return {\n    cx: cx0,\n    cy: cy0,\n    x01: -ox,\n    y01: -oy,\n    x11: cx0 * (r1 / r - 1),\n    y11: cy0 * (r1 / r - 1)\n  };\n}\n\nexport default function() {\n  var innerRadius = arcInnerRadius,\n      outerRadius = arcOuterRadius,\n      cornerRadius = constant(0),\n      padRadius = null,\n      startAngle = arcStartAngle,\n      endAngle = arcEndAngle,\n      padAngle = arcPadAngle,\n      context = null,\n      path = withPath(arc);\n\n  function arc() {\n    var buffer,\n        r,\n        r0 = +innerRadius.apply(this, arguments),\n        r1 = +outerRadius.apply(this, arguments),\n        a0 = startAngle.apply(this, arguments) - halfPi,\n        a1 = endAngle.apply(this, arguments) - halfPi,\n        da = abs(a1 - a0),\n        cw = a1 > a0;\n\n    if (!context) context = buffer = path();\n\n    // Ensure that the outer radius is always larger than the inner radius.\n    if (r1 < r0) r = r1, r1 = r0, r0 = r;\n\n    // Is it a point?\n    if (!(r1 > epsilon)) context.moveTo(0, 0);\n\n    // Or is it a circle or annulus?\n    else if (da > tau - epsilon) {\n      context.moveTo(r1 * cos(a0), r1 * sin(a0));\n      context.arc(0, 0, r1, a0, a1, !cw);\n      if (r0 > epsilon) {\n        context.moveTo(r0 * cos(a1), r0 * sin(a1));\n        context.arc(0, 0, r0, a1, a0, cw);\n      }\n    }\n\n    // Or is it a circular or annular sector?\n    else {\n      var a01 = a0,\n          a11 = a1,\n          a00 = a0,\n          a10 = a1,\n          da0 = da,\n          da1 = da,\n          ap = padAngle.apply(this, arguments) / 2,\n          rp = (ap > epsilon) && (padRadius ? +padRadius.apply(this, arguments) : sqrt(r0 * r0 + r1 * r1)),\n          rc = min(abs(r1 - r0) / 2, +cornerRadius.apply(this, arguments)),\n          rc0 = rc,\n          rc1 = rc,\n          t0,\n          t1;\n\n      // Apply padding? Note that since r1  r0, da1  da0.\n      if (rp > epsilon) {\n        var p0 = asin(rp / r0 * sin(ap)),\n            p1 = asin(rp / r1 * sin(ap));\n        if ((da0 -= p0 * 2) > epsilon) p0 *= (cw ? 1 : -1), a00 += p0, a10 -= p0;\n        else da0 = 0, a00 = a10 = (a0 + a1) / 2;\n        if ((da1 -= p1 * 2) > epsilon) p1 *= (cw ? 1 : -1), a01 += p1, a11 -= p1;\n        else da1 = 0, a01 = a11 = (a0 + a1) / 2;\n      }\n\n      var x01 = r1 * cos(a01),\n          y01 = r1 * sin(a01),\n          x10 = r0 * cos(a10),\n          y10 = r0 * sin(a10);\n\n      // Apply rounded corners?\n      if (rc > epsilon) {\n        var x11 = r1 * cos(a11),\n            y11 = r1 * sin(a11),\n            x00 = r0 * cos(a00),\n            y00 = r0 * sin(a00),\n            oc;\n\n        // Restrict the corner radius according to the sector angle. If this\n        // intersection fails, its probably because the arc is too small, so\n        // disable the corner radius entirely.\n        if (da < pi) {\n          if (oc = intersect(x01, y01, x00, y00, x11, y11, x10, y10)) {\n            var ax = x01 - oc[0],\n                ay = y01 - oc[1],\n                bx = x11 - oc[0],\n                by = y11 - oc[1],\n                kc = 1 / sin(acos((ax * bx + ay * by) / (sqrt(ax * ax + ay * ay) * sqrt(bx * bx + by * by))) / 2),\n                lc = sqrt(oc[0] * oc[0] + oc[1] * oc[1]);\n            rc0 = min(rc, (r0 - lc) / (kc - 1));\n            rc1 = min(rc, (r1 - lc) / (kc + 1));\n          } else {\n            rc0 = rc1 = 0;\n          }\n        }\n      }\n\n      // Is the sector collapsed to a line?\n      if (!(da1 > epsilon)) context.moveTo(x01, y01);\n\n      // Does the sectors outer ring have rounded corners?\n      else if (rc1 > epsilon) {\n        t0 = cornerTangents(x00, y00, x01, y01, r1, rc1, cw);\n        t1 = cornerTangents(x11, y11, x10, y10, r1, rc1, cw);\n\n        context.moveTo(t0.cx + t0.x01, t0.cy + t0.y01);\n\n        // Have the corners merged?\n        if (rc1 < rc) context.arc(t0.cx, t0.cy, rc1, atan2(t0.y01, t0.x01), atan2(t1.y01, t1.x01), !cw);\n\n        // Otherwise, draw the two corners and the ring.\n        else {\n          context.arc(t0.cx, t0.cy, rc1, atan2(t0.y01, t0.x01), atan2(t0.y11, t0.x11), !cw);\n          context.arc(0, 0, r1, atan2(t0.cy + t0.y11, t0.cx + t0.x11), atan2(t1.cy + t1.y11, t1.cx + t1.x11), !cw);\n          context.arc(t1.cx, t1.cy, rc1, atan2(t1.y11, t1.x11), atan2(t1.y01, t1.x01), !cw);\n        }\n      }\n\n      // Or is the outer ring just a circular arc?\n      else context.moveTo(x01, y01), context.arc(0, 0, r1, a01, a11, !cw);\n\n      // Is there no inner ring, and its a circular sector?\n      // Or perhaps its an annular sector collapsed due to padding?\n      if (!(r0 > epsilon) || !(da0 > epsilon)) context.lineTo(x10, y10);\n\n      // Does the sectors inner ring (or point) have rounded corners?\n      else if (rc0 > epsilon) {\n        t0 = cornerTangents(x10, y10, x11, y11, r0, -rc0, cw);\n        t1 = cornerTangents(x01, y01, x00, y00, r0, -rc0, cw);\n\n        context.lineTo(t0.cx + t0.x01, t0.cy + t0.y01);\n\n        // Have the corners merged?\n        if (rc0 < rc) context.arc(t0.cx, t0.cy, rc0, atan2(t0.y01, t0.x01), atan2(t1.y01, t1.x01), !cw);\n\n        // Otherwise, draw the two corners and the ring.\n        else {\n          context.arc(t0.cx, t0.cy, rc0, atan2(t0.y01, t0.x01), atan2(t0.y11, t0.x11), !cw);\n          context.arc(0, 0, r0, atan2(t0.cy + t0.y11, t0.cx + t0.x11), atan2(t1.cy + t1.y11, t1.cx + t1.x11), cw);\n          context.arc(t1.cx, t1.cy, rc0, atan2(t1.y11, t1.x11), atan2(t1.y01, t1.x01), !cw);\n        }\n      }\n\n      // Or is the inner ring just a circular arc?\n      else context.arc(0, 0, r0, a10, a00, cw);\n    }\n\n    context.closePath();\n\n    if (buffer) return context = null, buffer + \"\" || null;\n  }\n\n  arc.centroid = function() {\n    var r = (+innerRadius.apply(this, arguments) + +outerRadius.apply(this, arguments)) / 2,\n        a = (+startAngle.apply(this, arguments) + +endAngle.apply(this, arguments)) / 2 - pi / 2;\n    return [cos(a) * r, sin(a) * r];\n  };\n\n  arc.innerRadius = function(_) {\n    return arguments.length ? (innerRadius = typeof _ === \"function\" ? _ : constant(+_), arc) : innerRadius;\n  };\n\n  arc.outerRadius = function(_) {\n    return arguments.length ? (outerRadius = typeof _ === \"function\" ? _ : constant(+_), arc) : outerRadius;\n  };\n\n  arc.cornerRadius = function(_) {\n    return arguments.length ? (cornerRadius = typeof _ === \"function\" ? _ : constant(+_), arc) : cornerRadius;\n  };\n\n  arc.padRadius = function(_) {\n    return arguments.length ? (padRadius = _ == null ? null : typeof _ === \"function\" ? _ : constant(+_), arc) : padRadius;\n  };\n\n  arc.startAngle = function(_) {\n    return arguments.length ? (startAngle = typeof _ === \"function\" ? _ : constant(+_), arc) : startAngle;\n  };\n\n  arc.endAngle = function(_) {\n    return arguments.length ? (endAngle = typeof _ === \"function\" ? _ : constant(+_), arc) : endAngle;\n  };\n\n  arc.padAngle = function(_) {\n    return arguments.length ? (padAngle = typeof _ === \"function\" ? _ : constant(+_), arc) : padAngle;\n  };\n\n  arc.context = function(_) {\n    return arguments.length ? ((context = _ == null ? null : _), arc) : context;\n  };\n\n  return arc;\n}\n", "export var slice = Array.prototype.slice;\n\nexport default function(x) {\n  return typeof x === \"object\" && \"length\" in x\n    ? x // Array, TypedArray, NodeList, array-like\n    : Array.from(x); // Map, Set, iterable, string, or anything else\n}\n", "function Linear(context) {\n  this._context = context;\n}\n\nLinear.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; // falls through\n      default: this._context.lineTo(x, y); break;\n    }\n  }\n};\n\nexport default function(context) {\n  return new Linear(context);\n}\n", "export function x(p) {\n  return p[0];\n}\n\nexport function y(p) {\n  return p[1];\n}\n", "import array from \"./array.js\";\nimport constant from \"./constant.js\";\nimport curveLinear from \"./curve/linear.js\";\nimport {withPath} from \"./path.js\";\nimport {x as pointX, y as pointY} from \"./point.js\";\n\nexport default function(x, y) {\n  var defined = constant(true),\n      context = null,\n      curve = curveLinear,\n      output = null,\n      path = withPath(line);\n\n  x = typeof x === \"function\" ? x : (x === undefined) ? pointX : constant(x);\n  y = typeof y === \"function\" ? y : (y === undefined) ? pointY : constant(y);\n\n  function line(data) {\n    var i,\n        n = (data = array(data)).length,\n        d,\n        defined0 = false,\n        buffer;\n\n    if (context == null) output = curve(buffer = path());\n\n    for (i = 0; i <= n; ++i) {\n      if (!(i < n && defined(d = data[i], i, data)) === defined0) {\n        if (defined0 = !defined0) output.lineStart();\n        else output.lineEnd();\n      }\n      if (defined0) output.point(+x(d, i, data), +y(d, i, data));\n    }\n\n    if (buffer) return output = null, buffer + \"\" || null;\n  }\n\n  line.x = function(_) {\n    return arguments.length ? (x = typeof _ === \"function\" ? _ : constant(+_), line) : x;\n  };\n\n  line.y = function(_) {\n    return arguments.length ? (y = typeof _ === \"function\" ? _ : constant(+_), line) : y;\n  };\n\n  line.defined = function(_) {\n    return arguments.length ? (defined = typeof _ === \"function\" ? _ : constant(!!_), line) : defined;\n  };\n\n  line.curve = function(_) {\n    return arguments.length ? (curve = _, context != null && (output = curve(context)), line) : curve;\n  };\n\n  line.context = function(_) {\n    return arguments.length ? (_ == null ? context = output = null : output = curve(context = _), line) : context;\n  };\n\n  return line;\n}\n", "import array from \"./array.js\";\nimport constant from \"./constant.js\";\nimport curveLinear from \"./curve/linear.js\";\nimport line from \"./line.js\";\nimport {withPath} from \"./path.js\";\nimport {x as pointX, y as pointY} from \"./point.js\";\n\nexport default function(x0, y0, y1) {\n  var x1 = null,\n      defined = constant(true),\n      context = null,\n      curve = curveLinear,\n      output = null,\n      path = withPath(area);\n\n  x0 = typeof x0 === \"function\" ? x0 : (x0 === undefined) ? pointX : constant(+x0);\n  y0 = typeof y0 === \"function\" ? y0 : (y0 === undefined) ? constant(0) : constant(+y0);\n  y1 = typeof y1 === \"function\" ? y1 : (y1 === undefined) ? pointY : constant(+y1);\n\n  function area(data) {\n    var i,\n        j,\n        k,\n        n = (data = array(data)).length,\n        d,\n        defined0 = false,\n        buffer,\n        x0z = new Array(n),\n        y0z = new Array(n);\n\n    if (context == null) output = curve(buffer = path());\n\n    for (i = 0; i <= n; ++i) {\n      if (!(i < n && defined(d = data[i], i, data)) === defined0) {\n        if (defined0 = !defined0) {\n          j = i;\n          output.areaStart();\n          output.lineStart();\n        } else {\n          output.lineEnd();\n          output.lineStart();\n          for (k = i - 1; k >= j; --k) {\n            output.point(x0z[k], y0z[k]);\n          }\n          output.lineEnd();\n          output.areaEnd();\n        }\n      }\n      if (defined0) {\n        x0z[i] = +x0(d, i, data), y0z[i] = +y0(d, i, data);\n        output.point(x1 ? +x1(d, i, data) : x0z[i], y1 ? +y1(d, i, data) : y0z[i]);\n      }\n    }\n\n    if (buffer) return output = null, buffer + \"\" || null;\n  }\n\n  function arealine() {\n    return line().defined(defined).curve(curve).context(context);\n  }\n\n  area.x = function(_) {\n    return arguments.length ? (x0 = typeof _ === \"function\" ? _ : constant(+_), x1 = null, area) : x0;\n  };\n\n  area.x0 = function(_) {\n    return arguments.length ? (x0 = typeof _ === \"function\" ? _ : constant(+_), area) : x0;\n  };\n\n  area.x1 = function(_) {\n    return arguments.length ? (x1 = _ == null ? null : typeof _ === \"function\" ? _ : constant(+_), area) : x1;\n  };\n\n  area.y = function(_) {\n    return arguments.length ? (y0 = typeof _ === \"function\" ? _ : constant(+_), y1 = null, area) : y0;\n  };\n\n  area.y0 = function(_) {\n    return arguments.length ? (y0 = typeof _ === \"function\" ? _ : constant(+_), area) : y0;\n  };\n\n  area.y1 = function(_) {\n    return arguments.length ? (y1 = _ == null ? null : typeof _ === \"function\" ? _ : constant(+_), area) : y1;\n  };\n\n  area.lineX0 =\n  area.lineY0 = function() {\n    return arealine().x(x0).y(y0);\n  };\n\n  area.lineY1 = function() {\n    return arealine().x(x0).y(y1);\n  };\n\n  area.lineX1 = function() {\n    return arealine().x(x1).y(y0);\n  };\n\n  area.defined = function(_) {\n    return arguments.length ? (defined = typeof _ === \"function\" ? _ : constant(!!_), area) : defined;\n  };\n\n  area.curve = function(_) {\n    return arguments.length ? (curve = _, context != null && (output = curve(context)), area) : curve;\n  };\n\n  area.context = function(_) {\n    return arguments.length ? (_ == null ? context = output = null : output = curve(context = _), area) : context;\n  };\n\n  return area;\n}\n", "import curveLinear from \"./linear.js\";\n\nexport var curveRadialLinear = curveRadial(curveLinear);\n\nfunction Radial(curve) {\n  this._curve = curve;\n}\n\nRadial.prototype = {\n  areaStart: function() {\n    this._curve.areaStart();\n  },\n  areaEnd: function() {\n    this._curve.areaEnd();\n  },\n  lineStart: function() {\n    this._curve.lineStart();\n  },\n  lineEnd: function() {\n    this._curve.lineEnd();\n  },\n  point: function(a, r) {\n    this._curve.point(r * Math.sin(a), r * -Math.cos(a));\n  }\n};\n\nexport default function curveRadial(curve) {\n\n  function radial(context) {\n    return new Radial(curve(context));\n  }\n\n  radial._curve = curve;\n\n  return radial;\n}\n", "import curveRadial, {curveRadialLinear} from \"./curve/radial.js\";\nimport line from \"./line.js\";\n\nexport function lineRadial(l) {\n  var c = l.curve;\n\n  l.angle = l.x, delete l.x;\n  l.radius = l.y, delete l.y;\n\n  l.curve = function(_) {\n    return arguments.length ? c(curveRadial(_)) : c()._curve;\n  };\n\n  return l;\n}\n\nexport default function() {\n  return lineRadial(line().curve(curveRadialLinear));\n}\n", "import curveRadial, {curveRadialLinear} from \"./curve/radial.js\";\nimport area from \"./area.js\";\nimport {lineRadial} from \"./lineRadial.js\";\n\nexport default function() {\n  var a = area().curve(curveRadialLinear),\n      c = a.curve,\n      x0 = a.lineX0,\n      x1 = a.lineX1,\n      y0 = a.lineY0,\n      y1 = a.lineY1;\n\n  a.angle = a.x, delete a.x;\n  a.startAngle = a.x0, delete a.x0;\n  a.endAngle = a.x1, delete a.x1;\n  a.radius = a.y, delete a.y;\n  a.innerRadius = a.y0, delete a.y0;\n  a.outerRadius = a.y1, delete a.y1;\n  a.lineStartAngle = function() { return lineRadial(x0()); }, delete a.lineX0;\n  a.lineEndAngle = function() { return lineRadial(x1()); }, delete a.lineX1;\n  a.lineInnerRadius = function() { return lineRadial(y0()); }, delete a.lineY0;\n  a.lineOuterRadius = function() { return lineRadial(y1()); }, delete a.lineY1;\n\n  a.curve = function(_) {\n    return arguments.length ? c(curveRadial(_)) : c()._curve;\n  };\n\n  return a;\n}\n", "import {min, sqrt} from \"../math.js\";\n\nconst sqrt3 = sqrt(3);\n\nexport default {\n  draw(context, size) {\n    const r = sqrt(size + min(size / 28, 0.75)) * 0.59436;\n    const t = r / 2;\n    const u = t * sqrt3;\n    context.moveTo(0, r);\n    context.lineTo(0, -r);\n    context.moveTo(-u, -t);\n    context.lineTo(u, t);\n    context.moveTo(-u, t);\n    context.lineTo(u, -t);\n  }\n};\n", "import {sqrt} from \"../math.js\";\n\nconst tan30 = sqrt(1 / 3);\nconst tan30_2 = tan30 * 2;\n\nexport default {\n  draw(context, size) {\n    const y = sqrt(size / tan30_2);\n    const x = y * tan30;\n    context.moveTo(0, -y);\n    context.lineTo(x, 0);\n    context.lineTo(0, y);\n    context.lineTo(-x, 0);\n    context.closePath();\n  }\n};\n", "import {sin, cos, sqrt, pi, tau} from \"../math.js\";\n\nconst ka = 0.89081309152928522810;\nconst kr = sin(pi / 10) / sin(7 * pi / 10);\nconst kx = sin(tau / 10) * kr;\nconst ky = -cos(tau / 10) * kr;\n\nexport default {\n  draw(context, size) {\n    const r = sqrt(size * ka);\n    const x = kx * r;\n    const y = ky * r;\n    context.moveTo(0, -r);\n    context.lineTo(x, y);\n    for (let i = 1; i < 5; ++i) {\n      const a = tau * i / 5;\n      const c = cos(a);\n      const s = sin(a);\n      context.lineTo(s * r, -c * r);\n      context.lineTo(c * x - s * y, s * x + c * y);\n    }\n    context.closePath();\n  }\n};\n", "import {sqrt} from \"../math.js\";\n\nconst sqrt3 = sqrt(3);\n\nexport default {\n  draw(context, size) {\n    const y = -sqrt(size / (sqrt3 * 3));\n    context.moveTo(0, y * 2);\n    context.lineTo(-sqrt3 * y, -y);\n    context.lineTo(sqrt3 * y, -y);\n    context.closePath();\n  }\n};\n", "import {sqrt} from \"../math.js\";\n\nconst sqrt3 = sqrt(3);\n\nexport default {\n  draw(context, size) {\n    const s = sqrt(size) * 0.6824;\n    const t = s  / 2;\n    const u = (s * sqrt3) / 2; // cos(Math.PI / 6)\n    context.moveTo(0, -s);\n    context.lineTo(u, t);\n    context.lineTo(-u, t);\n    context.closePath();\n  }\n};\n", "import {sqrt} from \"../math.js\";\n\nconst c = -0.5;\nconst s = sqrt(3) / 2;\nconst k = 1 / sqrt(12);\nconst a = (k / 2 + 1) * 3;\n\nexport default {\n  draw(context, size) {\n    const r = sqrt(size / a);\n    const x0 = r / 2, y0 = r * k;\n    const x1 = x0, y1 = r * k + r;\n    const x2 = -x1, y2 = y1;\n    context.moveTo(x0, y0);\n    context.lineTo(x1, y1);\n    context.lineTo(x2, y2);\n    context.lineTo(c * x0 - s * y0, s * x0 + c * y0);\n    context.lineTo(c * x1 - s * y1, s * x1 + c * y1);\n    context.lineTo(c * x2 - s * y2, s * x2 + c * y2);\n    context.lineTo(c * x0 + s * y0, c * y0 - s * x0);\n    context.lineTo(c * x1 + s * y1, c * y1 - s * x1);\n    context.lineTo(c * x2 + s * y2, c * y2 - s * x2);\n    context.closePath();\n  }\n};\n", "export default function() {}\n", "export function point(that, x, y) {\n  that._context.bezierCurveTo(\n    (2 * that._x0 + that._x1) / 3,\n    (2 * that._y0 + that._y1) / 3,\n    (that._x0 + 2 * that._x1) / 3,\n    (that._y0 + 2 * that._y1) / 3,\n    (that._x0 + 4 * that._x1 + x) / 6,\n    (that._y0 + 4 * that._y1 + y) / 6\n  );\n}\n\nexport function Basis(context) {\n  this._context = context;\n}\n\nBasis.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 =\n    this._y0 = this._y1 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 3: point(this, this._x1, this._y1); // falls through\n      case 2: this._context.lineTo(this._x1, this._y1); break;\n    }\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; this._context.lineTo((5 * this._x0 + this._x1) / 6, (5 * this._y0 + this._y1) / 6); // falls through\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = x;\n    this._y0 = this._y1, this._y1 = y;\n  }\n};\n\nexport default function(context) {\n  return new Basis(context);\n}\n", "import noop from \"../noop.js\";\nimport {point} from \"./basis.js\";\n\nfunction BasisClosed(context) {\n  this._context = context;\n}\n\nBasisClosed.prototype = {\n  areaStart: noop,\n  areaEnd: noop,\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 = this._x3 = this._x4 =\n    this._y0 = this._y1 = this._y2 = this._y3 = this._y4 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 1: {\n        this._context.moveTo(this._x2, this._y2);\n        this._context.closePath();\n        break;\n      }\n      case 2: {\n        this._context.moveTo((this._x2 + 2 * this._x3) / 3, (this._y2 + 2 * this._y3) / 3);\n        this._context.lineTo((this._x3 + 2 * this._x2) / 3, (this._y3 + 2 * this._y2) / 3);\n        this._context.closePath();\n        break;\n      }\n      case 3: {\n        this.point(this._x2, this._y2);\n        this.point(this._x3, this._y3);\n        this.point(this._x4, this._y4);\n        break;\n      }\n    }\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._x2 = x, this._y2 = y; break;\n      case 1: this._point = 2; this._x3 = x, this._y3 = y; break;\n      case 2: this._point = 3; this._x4 = x, this._y4 = y; this._context.moveTo((this._x0 + 4 * this._x1 + x) / 6, (this._y0 + 4 * this._y1 + y) / 6); break;\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = x;\n    this._y0 = this._y1, this._y1 = y;\n  }\n};\n\nexport default function(context) {\n  return new BasisClosed(context);\n}\n", "import {point} from \"./basis.js\";\n\nfunction BasisOpen(context) {\n  this._context = context;\n}\n\nBasisOpen.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 =\n    this._y0 = this._y1 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line || (this._line !== 0 && this._point === 3)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; var x0 = (this._x0 + 4 * this._x1 + x) / 6, y0 = (this._y0 + 4 * this._y1 + y) / 6; this._line ? this._context.lineTo(x0, y0) : this._context.moveTo(x0, y0); break;\n      case 3: this._point = 4; // falls through\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = x;\n    this._y0 = this._y1, this._y1 = y;\n  }\n};\n\nexport default function(context) {\n  return new BasisOpen(context);\n}\n", "import {Basis} from \"./basis.js\";\n\nfunction Bundle(context, beta) {\n  this._basis = new Basis(context);\n  this._beta = beta;\n}\n\nBundle.prototype = {\n  lineStart: function() {\n    this._x = [];\n    this._y = [];\n    this._basis.lineStart();\n  },\n  lineEnd: function() {\n    var x = this._x,\n        y = this._y,\n        j = x.length - 1;\n\n    if (j > 0) {\n      var x0 = x[0],\n          y0 = y[0],\n          dx = x[j] - x0,\n          dy = y[j] - y0,\n          i = -1,\n          t;\n\n      while (++i <= j) {\n        t = i / j;\n        this._basis.point(\n          this._beta * x[i] + (1 - this._beta) * (x0 + t * dx),\n          this._beta * y[i] + (1 - this._beta) * (y0 + t * dy)\n        );\n      }\n    }\n\n    this._x = this._y = null;\n    this._basis.lineEnd();\n  },\n  point: function(x, y) {\n    this._x.push(+x);\n    this._y.push(+y);\n  }\n};\n\nexport default (function custom(beta) {\n\n  function bundle(context) {\n    return beta === 1 ? new Basis(context) : new Bundle(context, beta);\n  }\n\n  bundle.beta = function(beta) {\n    return custom(+beta);\n  };\n\n  return bundle;\n})(0.85);\n", "export function point(that, x, y) {\n  that._context.bezierCurveTo(\n    that._x1 + that._k * (that._x2 - that._x0),\n    that._y1 + that._k * (that._y2 - that._y0),\n    that._x2 + that._k * (that._x1 - x),\n    that._y2 + that._k * (that._y1 - y),\n    that._x2,\n    that._y2\n  );\n}\n\nexport function Cardinal(context, tension) {\n  this._context = context;\n  this._k = (1 - tension) / 6;\n}\n\nCardinal.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 =\n    this._y0 = this._y1 = this._y2 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 2: this._context.lineTo(this._x2, this._y2); break;\n      case 3: point(this, this._x1, this._y1); break;\n    }\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; this._x1 = x, this._y1 = y; break;\n      case 2: this._point = 3; // falls through\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(tension) {\n\n  function cardinal(context) {\n    return new Cardinal(context, tension);\n  }\n\n  cardinal.tension = function(tension) {\n    return custom(+tension);\n  };\n\n  return cardinal;\n})(0);\n", "import noop from \"../noop.js\";\nimport {point} from \"./cardinal.js\";\n\nexport function CardinalClosed(context, tension) {\n  this._context = context;\n  this._k = (1 - tension) / 6;\n}\n\nCardinalClosed.prototype = {\n  areaStart: noop,\n  areaEnd: noop,\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 = this._x3 = this._x4 = this._x5 =\n    this._y0 = this._y1 = this._y2 = this._y3 = this._y4 = this._y5 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 1: {\n        this._context.moveTo(this._x3, this._y3);\n        this._context.closePath();\n        break;\n      }\n      case 2: {\n        this._context.lineTo(this._x3, this._y3);\n        this._context.closePath();\n        break;\n      }\n      case 3: {\n        this.point(this._x3, this._y3);\n        this.point(this._x4, this._y4);\n        this.point(this._x5, this._y5);\n        break;\n      }\n    }\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._x3 = x, this._y3 = y; break;\n      case 1: this._point = 2; this._context.moveTo(this._x4 = x, this._y4 = y); break;\n      case 2: this._point = 3; this._x5 = x, this._y5 = y; break;\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(tension) {\n\n  function cardinal(context) {\n    return new CardinalClosed(context, tension);\n  }\n\n  cardinal.tension = function(tension) {\n    return custom(+tension);\n  };\n\n  return cardinal;\n})(0);\n", "import {point} from \"./cardinal.js\";\n\nexport function CardinalOpen(context, tension) {\n  this._context = context;\n  this._k = (1 - tension) / 6;\n}\n\nCardinalOpen.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 =\n    this._y0 = this._y1 = this._y2 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line || (this._line !== 0 && this._point === 3)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; this._line ? this._context.lineTo(this._x2, this._y2) : this._context.moveTo(this._x2, this._y2); break;\n      case 3: this._point = 4; // falls through\n      default: point(this, x, y); break;\n    }\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(tension) {\n\n  function cardinal(context) {\n    return new CardinalOpen(context, tension);\n  }\n\n  cardinal.tension = function(tension) {\n    return custom(+tension);\n  };\n\n  return cardinal;\n})(0);\n", "import {epsilon} from \"../math.js\";\nimport {Cardinal} from \"./cardinal.js\";\n\nexport function point(that, x, y) {\n  var x1 = that._x1,\n      y1 = that._y1,\n      x2 = that._x2,\n      y2 = that._y2;\n\n  if (that._l01_a > epsilon) {\n    var a = 2 * that._l01_2a + 3 * that._l01_a * that._l12_a + that._l12_2a,\n        n = 3 * that._l01_a * (that._l01_a + that._l12_a);\n    x1 = (x1 * a - that._x0 * that._l12_2a + that._x2 * that._l01_2a) / n;\n    y1 = (y1 * a - that._y0 * that._l12_2a + that._y2 * that._l01_2a) / n;\n  }\n\n  if (that._l23_a > epsilon) {\n    var b = 2 * that._l23_2a + 3 * that._l23_a * that._l12_a + that._l12_2a,\n        m = 3 * that._l23_a * (that._l23_a + that._l12_a);\n    x2 = (x2 * b + that._x1 * that._l23_2a - x * that._l12_2a) / m;\n    y2 = (y2 * b + that._y1 * that._l23_2a - y * that._l12_2a) / m;\n  }\n\n  that._context.bezierCurveTo(x1, y1, x2, y2, that._x2, that._y2);\n}\n\nfunction CatmullRom(context, alpha) {\n  this._context = context;\n  this._alpha = alpha;\n}\n\nCatmullRom.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 =\n    this._y0 = this._y1 = this._y2 = NaN;\n    this._l01_a = this._l12_a = this._l23_a =\n    this._l01_2a = this._l12_2a = this._l23_2a =\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 2: this._context.lineTo(this._x2, this._y2); break;\n      case 3: this.point(this._x2, this._y2); break;\n    }\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n\n    if (this._point) {\n      var x23 = this._x2 - x,\n          y23 = this._y2 - y;\n      this._l23_a = Math.sqrt(this._l23_2a = Math.pow(x23 * x23 + y23 * y23, this._alpha));\n    }\n\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; // falls through\n      default: point(this, x, y); break;\n    }\n\n    this._l01_a = this._l12_a, this._l12_a = this._l23_a;\n    this._l01_2a = this._l12_2a, this._l12_2a = this._l23_2a;\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(alpha) {\n\n  function catmullRom(context) {\n    return alpha ? new CatmullRom(context, alpha) : new Cardinal(context, 0);\n  }\n\n  catmullRom.alpha = function(alpha) {\n    return custom(+alpha);\n  };\n\n  return catmullRom;\n})(0.5);\n", "import {CardinalClosed} from \"./cardinalClosed.js\";\nimport noop from \"../noop.js\";\nimport {point} from \"./catmullRom.js\";\n\nfunction CatmullRomClosed(context, alpha) {\n  this._context = context;\n  this._alpha = alpha;\n}\n\nCatmullRomClosed.prototype = {\n  areaStart: noop,\n  areaEnd: noop,\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 = this._x3 = this._x4 = this._x5 =\n    this._y0 = this._y1 = this._y2 = this._y3 = this._y4 = this._y5 = NaN;\n    this._l01_a = this._l12_a = this._l23_a =\n    this._l01_2a = this._l12_2a = this._l23_2a =\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 1: {\n        this._context.moveTo(this._x3, this._y3);\n        this._context.closePath();\n        break;\n      }\n      case 2: {\n        this._context.lineTo(this._x3, this._y3);\n        this._context.closePath();\n        break;\n      }\n      case 3: {\n        this.point(this._x3, this._y3);\n        this.point(this._x4, this._y4);\n        this.point(this._x5, this._y5);\n        break;\n      }\n    }\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n\n    if (this._point) {\n      var x23 = this._x2 - x,\n          y23 = this._y2 - y;\n      this._l23_a = Math.sqrt(this._l23_2a = Math.pow(x23 * x23 + y23 * y23, this._alpha));\n    }\n\n    switch (this._point) {\n      case 0: this._point = 1; this._x3 = x, this._y3 = y; break;\n      case 1: this._point = 2; this._context.moveTo(this._x4 = x, this._y4 = y); break;\n      case 2: this._point = 3; this._x5 = x, this._y5 = y; break;\n      default: point(this, x, y); break;\n    }\n\n    this._l01_a = this._l12_a, this._l12_a = this._l23_a;\n    this._l01_2a = this._l12_2a, this._l12_2a = this._l23_2a;\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(alpha) {\n\n  function catmullRom(context) {\n    return alpha ? new CatmullRomClosed(context, alpha) : new CardinalClosed(context, 0);\n  }\n\n  catmullRom.alpha = function(alpha) {\n    return custom(+alpha);\n  };\n\n  return catmullRom;\n})(0.5);\n", "import {CardinalOpen} from \"./cardinalOpen.js\";\nimport {point} from \"./catmullRom.js\";\n\nfunction CatmullRomOpen(context, alpha) {\n  this._context = context;\n  this._alpha = alpha;\n}\n\nCatmullRomOpen.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 = this._x2 =\n    this._y0 = this._y1 = this._y2 = NaN;\n    this._l01_a = this._l12_a = this._l23_a =\n    this._l01_2a = this._l12_2a = this._l23_2a =\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line || (this._line !== 0 && this._point === 3)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n\n    if (this._point) {\n      var x23 = this._x2 - x,\n          y23 = this._y2 - y;\n      this._l23_a = Math.sqrt(this._l23_2a = Math.pow(x23 * x23 + y23 * y23, this._alpha));\n    }\n\n    switch (this._point) {\n      case 0: this._point = 1; break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; this._line ? this._context.lineTo(this._x2, this._y2) : this._context.moveTo(this._x2, this._y2); break;\n      case 3: this._point = 4; // falls through\n      default: point(this, x, y); break;\n    }\n\n    this._l01_a = this._l12_a, this._l12_a = this._l23_a;\n    this._l01_2a = this._l12_2a, this._l12_2a = this._l23_2a;\n    this._x0 = this._x1, this._x1 = this._x2, this._x2 = x;\n    this._y0 = this._y1, this._y1 = this._y2, this._y2 = y;\n  }\n};\n\nexport default (function custom(alpha) {\n\n  function catmullRom(context) {\n    return alpha ? new CatmullRomOpen(context, alpha) : new CardinalOpen(context, 0);\n  }\n\n  catmullRom.alpha = function(alpha) {\n    return custom(+alpha);\n  };\n\n  return catmullRom;\n})(0.5);\n", "import noop from \"../noop.js\";\n\nfunction LinearClosed(context) {\n  this._context = context;\n}\n\nLinearClosed.prototype = {\n  areaStart: noop,\n  areaEnd: noop,\n  lineStart: function() {\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._point) this._context.closePath();\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    if (this._point) this._context.lineTo(x, y);\n    else this._point = 1, this._context.moveTo(x, y);\n  }\n};\n\nexport default function(context) {\n  return new LinearClosed(context);\n}\n", "function sign(x) {\n  return x < 0 ? -1 : 1;\n}\n\n// Calculate the slopes of the tangents (Hermite-type interpolation) based on\n// the following paper: Steffen, M. 1990. A Simple Method for Monotonic\n// Interpolation in One Dimension. Astronomy and Astrophysics, Vol. 239, NO.\n// NOV(II), P. 443, 1990.\nfunction slope3(that, x2, y2) {\n  var h0 = that._x1 - that._x0,\n      h1 = x2 - that._x1,\n      s0 = (that._y1 - that._y0) / (h0 || h1 < 0 && -0),\n      s1 = (y2 - that._y1) / (h1 || h0 < 0 && -0),\n      p = (s0 * h1 + s1 * h0) / (h0 + h1);\n  return (sign(s0) + sign(s1)) * Math.min(Math.abs(s0), Math.abs(s1), 0.5 * Math.abs(p)) || 0;\n}\n\n// Calculate a one-sided slope.\nfunction slope2(that, t) {\n  var h = that._x1 - that._x0;\n  return h ? (3 * (that._y1 - that._y0) / h - t) / 2 : t;\n}\n\n// According to https://en.wikipedia.org/wiki/Cubic_Hermite_spline#Representations\n// \"you can express cubic Hermite interpolation in terms of cubic Bzier curves\n// with respect to the four values p0, p0 + m0 / 3, p1 - m1 / 3, p1\".\nfunction point(that, t0, t1) {\n  var x0 = that._x0,\n      y0 = that._y0,\n      x1 = that._x1,\n      y1 = that._y1,\n      dx = (x1 - x0) / 3;\n  that._context.bezierCurveTo(x0 + dx, y0 + dx * t0, x1 - dx, y1 - dx * t1, x1, y1);\n}\n\nfunction MonotoneX(context) {\n  this._context = context;\n}\n\nMonotoneX.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x0 = this._x1 =\n    this._y0 = this._y1 =\n    this._t0 = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    switch (this._point) {\n      case 2: this._context.lineTo(this._x1, this._y1); break;\n      case 3: point(this, this._t0, slope2(this, this._t0)); break;\n    }\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    var t1 = NaN;\n\n    x = +x, y = +y;\n    if (x === this._x1 && y === this._y1) return; // Ignore coincident points.\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; break;\n      case 2: this._point = 3; point(this, slope2(this, t1 = slope3(this, x, y)), t1); break;\n      default: point(this, this._t0, t1 = slope3(this, x, y)); break;\n    }\n\n    this._x0 = this._x1, this._x1 = x;\n    this._y0 = this._y1, this._y1 = y;\n    this._t0 = t1;\n  }\n}\n\nfunction MonotoneY(context) {\n  this._context = new ReflectContext(context);\n}\n\n(MonotoneY.prototype = Object.create(MonotoneX.prototype)).point = function(x, y) {\n  MonotoneX.prototype.point.call(this, y, x);\n};\n\nfunction ReflectContext(context) {\n  this._context = context;\n}\n\nReflectContext.prototype = {\n  moveTo: function(x, y) { this._context.moveTo(y, x); },\n  closePath: function() { this._context.closePath(); },\n  lineTo: function(x, y) { this._context.lineTo(y, x); },\n  bezierCurveTo: function(x1, y1, x2, y2, x, y) { this._context.bezierCurveTo(y1, x1, y2, x2, y, x); }\n};\n\nexport function monotoneX(context) {\n  return new MonotoneX(context);\n}\n\nexport function monotoneY(context) {\n  return new MonotoneY(context);\n}\n", "function Natural(context) {\n  this._context = context;\n}\n\nNatural.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x = [];\n    this._y = [];\n  },\n  lineEnd: function() {\n    var x = this._x,\n        y = this._y,\n        n = x.length;\n\n    if (n) {\n      this._line ? this._context.lineTo(x[0], y[0]) : this._context.moveTo(x[0], y[0]);\n      if (n === 2) {\n        this._context.lineTo(x[1], y[1]);\n      } else {\n        var px = controlPoints(x),\n            py = controlPoints(y);\n        for (var i0 = 0, i1 = 1; i1 < n; ++i0, ++i1) {\n          this._context.bezierCurveTo(px[0][i0], py[0][i0], px[1][i0], py[1][i0], x[i1], y[i1]);\n        }\n      }\n    }\n\n    if (this._line || (this._line !== 0 && n === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n    this._x = this._y = null;\n  },\n  point: function(x, y) {\n    this._x.push(+x);\n    this._y.push(+y);\n  }\n};\n\n// See https://www.particleincell.com/2012/bezier-splines/ for derivation.\nfunction controlPoints(x) {\n  var i,\n      n = x.length - 1,\n      m,\n      a = new Array(n),\n      b = new Array(n),\n      r = new Array(n);\n  a[0] = 0, b[0] = 2, r[0] = x[0] + 2 * x[1];\n  for (i = 1; i < n - 1; ++i) a[i] = 1, b[i] = 4, r[i] = 4 * x[i] + 2 * x[i + 1];\n  a[n - 1] = 2, b[n - 1] = 7, r[n - 1] = 8 * x[n - 1] + x[n];\n  for (i = 1; i < n; ++i) m = a[i] / b[i - 1], b[i] -= m, r[i] -= m * r[i - 1];\n  a[n - 1] = r[n - 1] / b[n - 1];\n  for (i = n - 2; i >= 0; --i) a[i] = (r[i] - a[i + 1]) / b[i];\n  b[n - 1] = (x[n] + a[n - 1]) / 2;\n  for (i = 0; i < n - 1; ++i) b[i] = 2 * x[i + 1] - a[i + 1];\n  return [a, b];\n}\n\nexport default function(context) {\n  return new Natural(context);\n}\n", "function Step(context, t) {\n  this._context = context;\n  this._t = t;\n}\n\nStep.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._x = this._y = NaN;\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (0 < this._t && this._t < 1 && this._point === 2) this._context.lineTo(this._x, this._y);\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    if (this._line >= 0) this._t = 1 - this._t, this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; // falls through\n      default: {\n        if (this._t <= 0) {\n          this._context.lineTo(this._x, y);\n          this._context.lineTo(x, y);\n        } else {\n          var x1 = this._x * (1 - this._t) + x * this._t;\n          this._context.lineTo(x1, this._y);\n          this._context.lineTo(x1, y);\n        }\n        break;\n      }\n    }\n    this._x = x, this._y = y;\n  }\n};\n\nexport default function(context) {\n  return new Step(context, 0.5);\n}\n\nexport function stepBefore(context) {\n  return new Step(context, 0);\n}\n\nexport function stepAfter(context) {\n  return new Step(context, 1);\n}\n", "import { Coordinate } from '@antv/coord';\n\nexport function isTranspose(coordinate: Coordinate): boolean {\n  const { transformations } = coordinate.getOptions();\n  const transposes = transformations\n    .map(([type]) => type)\n    .filter((type) => type === 'transpose');\n  return transposes.length % 2 !== 0;\n}\n\nexport function isPolar(coordinate: Coordinate): boolean {\n  const { transformations } = coordinate.getOptions();\n  return transformations.some(([type]) => type === 'polar');\n}\n\nexport function isRadial(coordinate: Coordinate): boolean {\n  const { transformations } = coordinate.getOptions();\n  return (\n    // distinguish radial from theta.\n    transformations.some(([type]) => type === 'reflect') &&\n    transformations.some(([type]) => type.startsWith('transpose'))\n  );\n}\n\nexport function isHelix(coordinate: Coordinate): boolean {\n  const { transformations } = coordinate.getOptions();\n  return transformations.some(([type]) => type === 'helix');\n}\n\nexport function isParallel(coordinate: Coordinate): boolean {\n  const { transformations } = coordinate.getOptions();\n  return transformations.some(([type]) => type === 'parallel');\n}\n\nexport function isFisheye(coordinate: Coordinate): boolean {\n  const { transformations } = coordinate.getOptions();\n  return transformations.some(([type]) => type === 'fisheye');\n}\n\nexport function isRadar(coordinate: Coordinate): boolean {\n  return isParallel(coordinate) && isPolar(coordinate);\n}\n\nexport function isCircular(coordinate: Coordinate): boolean {\n  return isHelix(coordinate) || isPolar(coordinate);\n}\n\nexport function isTheta(coordinate: Coordinate): boolean {\n  return isPolar(coordinate) && isTranspose(coordinate);\n}\n\nexport function isNonCartesian(coordinate: Coordinate): boolean {\n  return (\n    isPolar(coordinate) ||\n    isParallel(coordinate) ||\n    isRadial(coordinate) ||\n    isTheta(coordinate)\n  );\n}\n\nexport function getRadius(coordinate: Coordinate): number {\n  if (isCircular(coordinate)) {\n    const [width, height] = coordinate.getSize();\n    const polar = coordinate\n      .getOptions()\n      .transformations.find((t) => t[0] === 'polar');\n    // coordinate.size * outerRadius.\n    if (polar) return (Math.max(width, height) / 2) * polar[4];\n  }\n  return 0;\n}\n\nexport function radiusOf(coordinate: Coordinate): [number, number] {\n  const { transformations } = coordinate.getOptions();\n  const [, , , innerRadius, outerRadius] = transformations.find(\n    (d) => d[0] === 'polar',\n  );\n  return [+innerRadius, +outerRadius];\n}\n\nexport function angleOf(\n  coordinate: Coordinate,\n  isRadius = true,\n): [number, number] {\n  const { transformations } = coordinate.getOptions();\n  const [, startAngle, endAngle] = transformations.find(\n    (d) => d[0] === 'polar',\n  );\n\n  return isRadius\n    ? [(+startAngle * 180) / Math.PI, (+endAngle * 180) / Math.PI]\n    : ([startAngle, endAngle] as [number, number]);\n}\n\nexport function getTransformOptions(coordinate: Coordinate, type: string) {\n  const { transformations } = coordinate.getOptions();\n  const [, ...args] = transformations.find((d) => d[0] === type);\n  return args;\n}\n", "import {\n  Group,\n  Rect,\n  DisplayObject,\n  IDocument,\n  BaseStyleProps as BP,\n  Circle,\n  Path,\n  Text,\n  Ellipse,\n  Image,\n  Line,\n  Polygon,\n  Polyline,\n  HTML,\n  IAnimation as GAnimation,\n} from '@antv/g';\nimport { group } from '@antv/vendor/d3-array';\nimport { error } from './helper';\n\nexport type G2Element = DisplayObject & {\n  // Data for this element.\n  __data__?: any;\n  // An Array of data to be splitted to.\n  __toData__?: any[];\n  // An Array of elements to be merged from.\n  __fromElements__?: DisplayObject[];\n  // Whether to update parent if it in update selection.\n  __facet__?: boolean;\n  // Whether is removed in G2, but also exist in G dom.\n  __removed__?: boolean;\n};\n\nexport function select<T = any>(node: DisplayObject) {\n  return new Selection<T>([node], null, node, node.ownerDocument);\n}\n\n/**\n * A simple implementation of d3-selection for @antv/g.\n * It has the core features of d3-selection and extended ability.\n * Every methods of selection returns new selection if elements\n * are mutated(e.g. append, remove), otherwise return the selection itself(e.g. attr, style).\n * @see https://github.com/d3/d3-selection\n * @see https://github.com/antvis/g\n * @todo Nested selections.\n * @todo More useful functor.\n */\nexport class Selection<T = any> {\n  static registry: Record<string, new () => G2Element> = {\n    g: Group,\n    rect: Rect,\n    circle: Circle,\n    path: Path,\n    text: Text,\n    ellipse: Ellipse,\n    image: Image,\n    line: Line,\n    polygon: Polygon,\n    polyline: Polyline,\n    html: HTML,\n  };\n  private _elements: G2Element[];\n  private _parent: G2Element;\n  private _data: T[] | [T, G2Element[]][];\n  private _enter: Selection;\n  private _exit: Selection;\n  private _update: Selection;\n  private _merge: Selection;\n  private _split: Selection;\n  private _document: IDocument;\n  private _transitions: (GAnimation | GAnimation[])[];\n  private _facetElements: G2Element[];\n\n  constructor(\n    elements: Iterable<G2Element> = null,\n    data: T[] | [T, G2Element[]][] = null,\n    parent: G2Element = null,\n    document: IDocument | null = null,\n    selections: [Selection, Selection, Selection, Selection, Selection] = [\n      null,\n      null,\n      null,\n      null,\n      null,\n    ],\n    transitions: (GAnimation | GAnimation[])[] = [],\n    updateElements: G2Element[] = [],\n  ) {\n    this._elements = Array.from(elements);\n    this._data = data;\n    this._parent = parent;\n    this._document = document;\n    this._enter = selections[0];\n    this._update = selections[1];\n    this._exit = selections[2];\n    this._merge = selections[3];\n    this._split = selections[4];\n    this._transitions = transitions;\n    this._facetElements = updateElements;\n  }\n\n  selectAll(selector: string | G2Element[]): Selection<T> {\n    const elements =\n      typeof selector === 'string'\n        ? this._parent.querySelectorAll<G2Element>(selector)\n        : selector;\n    return new Selection<T>(elements, null, this._elements[0], this._document);\n  }\n\n  selectFacetAll(selector: string | G2Element[]): Selection<T> {\n    const elements =\n      typeof selector === 'string'\n        ? this._parent.querySelectorAll<G2Element>(selector)\n        : selector;\n    return new Selection<T>(\n      this._elements,\n      null,\n      this._parent,\n      this._document,\n      undefined,\n      undefined,\n      elements,\n    );\n  }\n\n  /**\n   * @todo Replace with querySelector which has bug now.\n   */\n  select(selector: string | G2Element): Selection<T> {\n    const element =\n      typeof selector === 'string'\n        ? this._parent.querySelectorAll<G2Element>(selector)[0] || null\n        : selector;\n    return new Selection<T>([element], null, element, this._document);\n  }\n\n  append(node: string | ((data: T, i: number) => G2Element)): Selection<T> {\n    const callback =\n      typeof node === 'function' ? node : () => this.createElement(node);\n\n    const elements = [];\n    if (this._data !== null) {\n      // For empty selection, append new element to parent.\n      // Each element is bind with datum.\n      for (let i = 0; i < this._data.length; i++) {\n        const d = this._data[i];\n        const [datum, from] = Array.isArray(d) ? d : [d, null];\n        const newElement = callback(datum, i);\n        newElement.__data__ = datum;\n        if (from !== null) newElement.__fromElements__ = from;\n        this._parent.appendChild(newElement);\n        elements.push(newElement);\n      }\n      return new Selection(elements, null, this._parent, this._document);\n    } else {\n      // For non-empty selection, append new element to\n      // selected element and return new selection.\n      for (let i = 0; i < this._elements.length; i++) {\n        const element = this._elements[i];\n        const datum = element.__data__;\n        const newElement = callback(datum, i);\n        element.appendChild(newElement);\n        elements.push(newElement);\n      }\n      return new Selection(elements, null, elements[0], this._document);\n    }\n  }\n\n  maybeAppend(\n    id: string,\n    node: string | (() => G2Element),\n    className?: string,\n  ) {\n    const element = this._elements[0];\n    const child = element.getElementById(id) as G2Element;\n    if (child) {\n      return new Selection([child], null, this._parent, this._document);\n    }\n    const newChild =\n      typeof node === 'string' ? this.createElement(node) : node();\n    newChild.id = id;\n    if (className) newChild.className = className;\n    element.appendChild(newChild);\n    return new Selection([newChild], null, this._parent, this._document);\n  }\n\n  /**\n   * Bind data to elements, and produce three selection:\n   * Enter: Selection with empty elements and data to be bind to elements.\n   * Update: Selection with elements to be updated.\n   * Exit: Selection with elements to be removed.\n   */\n  data<T = any>(\n    data: T[],\n    id: (d: T, index?: number) => any = (d) => d,\n    groupId: (d: T, index?: number) => any = () => null,\n  ): Selection<T> {\n    // An Array of new data.\n    const enter: T[] = [];\n\n    // An Array of elements to be updated.\n    const update: G2Element[] = [];\n\n    // A Set of elements to be removed.\n    const exit = new Set<G2Element>(this._elements);\n\n    // An Array of data to be merged into one element.\n    const merge: [T, G2Element[]][] = [];\n\n    // A Set of elements to be split into multiple datum.\n    const split = new Set<G2Element>();\n\n    // A Map from key to each element.\n    const keyElement = new Map<string, G2Element>(\n      this._elements.map((d, i) => [id(d.__data__, i), d]),\n    );\n\n    // A Map from key to exist element. The Update Selection\n    // can get element from this map, this is for diff among\n    // facets.\n    const keyUpdateElement = new Map<string, G2Element>(\n      this._facetElements.map((d, i) => [id(d.__data__, i), d]),\n    );\n\n    // A Map from groupKey to a group of elements.\n    const groupKeyElements = group(this._elements, (d) => groupId(d.__data__));\n\n    // Diff data with selection(elements with data).\n    // !!! Note\n    // The switch is strictly ordered, not not change the order of them.\n    for (let i = 0; i < data.length; i++) {\n      const datum = data[i];\n      const key = id(datum, i);\n      const groupKey = groupId(datum, i);\n      // Append element to update selection if incoming data has\n      // exactly the same key with elements.\n      if (keyElement.has(key)) {\n        const element = keyElement.get(key);\n        element.__data__ = datum;\n        element.__facet__ = false;\n        update.push(element);\n        exit.delete(element);\n        keyElement.delete(key);\n        // Append element to update selection if incoming data has\n        // exactly the same key with updateElements.\n      } else if (keyUpdateElement.has(key)) {\n        const element = keyUpdateElement.get(key);\n        element.__data__ = datum;\n        // Flag this element should update its parentNode.\n        element.__facet__ = true;\n        update.push(element);\n        keyUpdateElement.delete(key);\n        // Append datum to merge selection if existed elements has\n        // its key as groupKey.\n      } else if (groupKeyElements.has(key)) {\n        const group = groupKeyElements.get(key);\n        merge.push([datum, group]);\n        for (const element of group) exit.delete(element);\n        groupKeyElements.delete(key);\n        // Append element to split selection if incoming data has\n        // groupKey as its key, and bind to datum for it.\n      } else if (keyElement.has(groupKey)) {\n        const element = keyElement.get(groupKey);\n        if (element.__toData__) element.__toData__.push(datum);\n        else element.__toData__ = [datum];\n        split.add(element);\n        exit.delete(element);\n      } else {\n        // @todo Data with non-unique key.\n        enter.push(datum);\n      }\n    }\n\n    // Create new selection with enter, update and exit.\n    const S: [\n      Selection<T>,\n      Selection<T>,\n      Selection<T>,\n      Selection<T>,\n      Selection<T>,\n    ] = [\n      new Selection<T>([], enter, this._parent, this._document),\n      new Selection<T>(update, null, this._parent, this._document),\n      new Selection<T>(exit, null, this._parent, this._document),\n      new Selection<T>([], merge, this._parent, this._document),\n      new Selection<T>(split, null, this._parent, this._document),\n    ];\n\n    return new Selection<T>(\n      this._elements,\n      null,\n      this._parent,\n      this._document,\n      S,\n    );\n  }\n\n  merge(other: Selection<T>): Selection<T> {\n    const elements = [...this._elements, ...other._elements];\n    const transitions = [...this._transitions, ...other._transitions];\n    return new Selection<T>(\n      elements,\n      null,\n      this._parent,\n      this._document,\n      undefined,\n      transitions,\n    );\n  }\n\n  createElement(type: string): G2Element {\n    if (this._document) {\n      return this._document.createElement<G2Element, BP>(type, {});\n    }\n    const Ctor = Selection.registry[type];\n    if (Ctor) return new Ctor();\n    return error(`Unknown node type: ${type}`);\n  }\n  /**\n   * Apply callback for each selection(enter, update, exit)\n   * and merge them into one selection.\n   */\n  join(\n    enter: (selection: Selection<T>) => any = (d) => d,\n    update: (selection: Selection<T>) => any = (d) => d,\n    exit: (selection: Selection<T>) => any = (d) => d.remove(),\n    merge: (selection: Selection<T>) => any = (d) => d,\n    split: (selection: Selection<T>) => any = (d) => d.remove(),\n  ): Selection<T> {\n    const newEnter = enter(this._enter);\n    const newUpdate = update(this._update);\n    const newExit = exit(this._exit);\n    const newMerge = merge(this._merge);\n    const newSplit = split(this._split);\n    return newUpdate\n      .merge(newEnter)\n      .merge(newExit)\n      .merge(newMerge)\n      .merge(newSplit);\n  }\n\n  remove(): Selection<T> {\n    // Remove node immediately if there is no transition,\n    // otherwise wait until transition finished.\n    for (let i = 0; i < this._elements.length; i++) {\n      const transition = this._transitions[i];\n      this._elements[i].__removed__ = true;\n      if (transition) {\n        const T = Array.isArray(transition) ? transition : [transition];\n        Promise.all(T.map((d) => d.finished)).then(() => {\n          const element = this._elements[i];\n          if (element.__removed__) {\n            element.remove();\n          }\n        });\n      } else {\n        const element = this._elements[i];\n        if (element.__removed__) {\n          element.remove();\n        }\n      }\n    }\n    return new Selection<T>(\n      [],\n      null,\n      this._parent,\n      this._document,\n      undefined,\n      this._transitions,\n    );\n  }\n\n  each(callback: (datum: T, index: number, element) => any): Selection<T> {\n    for (let i = 0; i < this._elements.length; i++) {\n      const element = this._elements[i];\n      const datum = element.__data__;\n      callback(datum, i, element);\n    }\n    return this;\n  }\n\n  attr(key: string, value: any): Selection<T> {\n    const callback = typeof value !== 'function' ? () => value : value;\n    return this.each(function (d, i, element) {\n      if (value !== undefined) element[key] = callback(d, i, element);\n    });\n  }\n\n  style(key: string, value: any): Selection<T> {\n    const callback = typeof value !== 'function' ? () => value : value;\n    return this.each(function (d, i, element) {\n      if (value !== undefined) element.style[key] = callback(d, i, element);\n    });\n  }\n\n  transition(value: any): Selection<T> {\n    const callback = typeof value !== 'function' ? () => value : value;\n    const { _transitions: T } = this;\n    return this.each(function (d, i, element) {\n      T[i] = callback(d, i, element);\n    });\n  }\n\n  on(event: string, handler: any) {\n    this.each(function (d, i, element) {\n      element.addEventListener(event, handler);\n    });\n    return this;\n  }\n\n  call(\n    callback: (selection: Selection<T>, ...args: any[]) => any,\n    ...args: any[]\n  ): Selection<T> {\n    callback(this, ...args);\n    return this;\n  }\n\n  node(): G2Element {\n    return this._elements[0];\n  }\n\n  nodes(): G2Element[] {\n    return this._elements;\n  }\n\n  transitions(): (GAnimation | GAnimation[])[] {\n    return this._transitions;\n  }\n\n  parent(): DisplayObject {\n    return this._parent;\n  }\n}\n", "/**\n * Clamp number within the inclusive range within the lower and upper bounds.\n */\nexport function clamp(v: number, lower: number, upper: number): number {\n  return Math.max(lower, Math.min(v, upper));\n}\n\n/**\n * Precision conversion\n */\nexport function prettyNumber(n: number, precision = 10) {\n  if (typeof n !== 'number') return n;\n  return Math.abs(n) < 1e-15 ? n : parseFloat(n.toFixed(precision));\n}\n", "import { Coordinate } from '@antv/coord';\nimport { Linear } from '@antv/scale';\nimport { isNumber, lowerFirst } from '@antv/util';\nimport { extent } from '@antv/vendor/d3-array';\nimport { Path as D3Path } from '@antv/vendor/d3-path';\nimport { Primitive, Vector2, Vector3 } from '../runtime';\nimport { indexOf } from '../utils/array';\nimport { isPolar, isTranspose } from '../utils/coordinate';\nimport { G2Element, Selection } from '../utils/selection';\nimport { angle, angleWithQuadrant, dist, sub } from '../utils/vector';\n\nexport function applyStyle(\n  selection: Selection,\n  style: Record<string, Primitive>,\n) {\n  for (const [key, value] of Object.entries(style)) {\n    selection.style(key, value);\n  }\n}\n\n/**\n * Draw polygon path with points.\n * @param path\n * @param points\n */\nexport function appendPolygon(path: D3Path, points: Vector2[]) {\n  points.forEach((p, idx) =>\n    idx === 0 ? path.moveTo(p[0], p[1]) : path.lineTo(p[0], p[1]),\n  );\n  path.closePath();\n  return path;\n}\n\nexport type ArrowOptions = {\n  /**\n   * Whether show arrow of line.\n   */\n  arrow?: boolean;\n  /**\n   * Arrow size, can be a px number, or a percentage string. Default: '40%'\n   */\n  arrowSize?: number | string;\n};\n\n/**\n * Draw arrow between `from` and `to`.\n * @param from\n * @param to\n * @returns\n */\nexport function arrowPoints(\n  from: Vector2,\n  to: Vector2,\n  options: ArrowOptions,\n): [Vector2, Vector2] {\n  const { arrowSize } = options;\n  const size =\n    typeof arrowSize === 'string'\n      ? (+parseFloat(arrowSize) / 100) * dist(from, to)\n      : arrowSize;\n  // TODO Use config from style.\n  // Default arrow rotate is 30.\n  const arrowAngle = Math.PI / 6;\n\n  const angle = Math.atan2(to[1] - from[1], to[0] - from[0]);\n\n  const arrowAngle1 = Math.PI / 2 - angle - arrowAngle;\n  const arrow1: Vector2 = [\n    to[0] - size * Math.sin(arrowAngle1),\n    to[1] - size * Math.cos(arrowAngle1),\n  ];\n\n  const arrowAngle2 = angle - arrowAngle;\n  const arrow2: Vector2 = [\n    to[0] - size * Math.cos(arrowAngle2),\n    to[1] - size * Math.sin(arrowAngle2),\n  ];\n\n  return [arrow1, arrow2];\n}\n\n/**\n * Draw arc by from -> to, with center and radius.\n * @param path\n * @param from\n * @param to\n * @param center\n * @param radius\n */\nexport function appendArc(\n  path: D3Path,\n  from: Vector2,\n  to: Vector2,\n  center: Vector2,\n  radius: number,\n) {\n  const startAngle = angle(sub(center, from)) + Math.PI;\n  const endAngle = angle(sub(center, to)) + Math.PI;\n\n  path.arc(\n    center[0],\n    center[1],\n    radius,\n    startAngle,\n    endAngle,\n    endAngle - startAngle < 0,\n  );\n\n  return path;\n}\n\n/**\n * @todo Fix wrong key point.\n */\nexport function computeGradient(\n  C: string[],\n  X: number[],\n  Y: number[],\n  from: string | boolean = 'y',\n  mode: 'between' | 'start' | 'end' = 'between',\n  tpShape = false,\n): string {\n  // The angles of gradients rendering are varies when 'from' and 'tpShape' are different.\n  const getTheta = (from: string | boolean, tpShape: boolean) => {\n    if (from === 'y' || from === true) {\n      if (tpShape) {\n        return 180;\n      } else {\n        return 90;\n      }\n    } else {\n      if (tpShape) {\n        return 90;\n      } else {\n        return 0;\n      }\n    }\n  };\n\n  const P = from === 'y' || from === true ? Y : X;\n  const theta = getTheta(from, tpShape);\n  const I = indexOf(P);\n\n  const [min, max] = extent(I, (i) => P[i]);\n  // This need to improve for non-uniform distributed colors.\n  const p = new Linear({\n    domain: [min, max],\n    range: [0, 100],\n  });\n\n  const percentage = (i) =>\n    isNumber(P[i]) && !Number.isNaN(P[i]) ? p.map(P[i]) : 0;\n\n  const gradientMode = {\n    // Interpolate the colors for this segment.\n    between: (i: number) => `${C[i]} ${percentage(i)}%`,\n    // Use the color of the start point as the color for this segment.\n    start: (i: number) =>\n      i === 0\n        ? `${C[i]} ${percentage(i)}%`\n        : `${C[i - 1]} ${percentage(i)}%, ${C[i]} ${percentage(i)}%`,\n    // Use the color of the end point as the color for this segment.\n    end: (i: number) =>\n      i === C.length - 1\n        ? `${C[i]} ${percentage(i)}%`\n        : `${C[i]} ${percentage(i)}%, ${C[i + 1]} ${percentage(i)}%`,\n  };\n\n  const gradient = I.sort((a, b) => percentage(a) - percentage(b))\n    .map(gradientMode[mode] || gradientMode['between'])\n    .join(',');\n  return `linear-gradient(${theta}deg, ${gradient})`;\n}\n\nexport function reorder(points: Vector2[]): Vector2[] {\n  const [p0, p1, p2, p3] = points;\n  return [p3, p0, p1, p2];\n}\n\nexport function getArcObject(\n  coordinate: Coordinate,\n  points: Vector2[],\n  Y: [number, number],\n) {\n  const [p0, p1, , p3] = isTranspose(coordinate) ? reorder(points) : points;\n\n  const [y, y1] = Y;\n  const center = coordinate.getCenter() as Vector2;\n  const a1 = angleWithQuadrant(sub(p0, center));\n  const a2 = angleWithQuadrant(sub(p1, center));\n  // There are two situations that a2 === a1:\n  // 1. a1 - a2 = 0\n  // 2. |a1 - a2| = Math.PI * 2\n  // Distinguish them by y and y1:\n  const a3 = a2 === a1 && y !== y1 ? a2 + Math.PI * 2 : a2;\n  const epsilon = 1e-4;\n  return {\n    startAngle: a1 + epsilon,\n    endAngle: (a3 - a1 >= 0 ? a3 : Math.PI * 2 + a3) - epsilon,\n    innerRadius: dist(p3, center),\n    outerRadius: dist(p0, center),\n  };\n}\n\n/**\n * Pick connectStyle from style.\n * @param style\n */\nexport function getConnectStyle(\n  style: Record<string, any>,\n): Record<string, any> {\n  const PREFIX = 'connect';\n  return Object.fromEntries(\n    Object.entries(style)\n      .filter(([key]) => key.startsWith(PREFIX))\n      .map(([key, value]) => [\n        lowerFirst(key.replace(PREFIX, '').trim()),\n        value,\n      ])\n      .filter(([key]) => key !== undefined),\n  );\n}\n\nexport function toOpacityKey(options) {\n  const { colorAttribute, opacityAttribute = colorAttribute } = options;\n  return `${opacityAttribute}Opacity`;\n}\n\nexport function getTransform(coordinate, value) {\n  if (!isPolar(coordinate)) return '';\n  const center = coordinate.getCenter() as Vector2;\n  const { transform: suffix } = value;\n  return `translate(${center[0]}, ${center[1]}) ${suffix || ''}`;\n}\n\nexport function getOrigin(points: (Vector2 | Vector3)[]) {\n  if (points.length === 1) return points[0];\n  const [[x0, y0, z0 = 0], [x2, y2, z2 = 0]] = points;\n  return [(x0 + x2) / 2, (y0 + y2) / 2, (z0 + z2) / 2];\n}\n", "import { arc } from '@antv/vendor/d3-shape';\nimport { Vector2, ShapeComponent as SC } from '../../runtime';\nimport { isPolar, isHelix, isTranspose } from '../../utils/coordinate';\nimport { select } from '../../utils/selection';\nimport { sub } from '../../utils/vector';\nimport { clamp } from '../../utils/number';\nimport { applyStyle, getArcObject, reorder, toOpacityKey } from '../utils';\n\nexport type ColorOptions = {\n  colorAttribute: 'fill' | 'stroke';\n  /**\n   * Minimum width of each interval.\n   */\n  minWidth?: number;\n  /**\n   * Maximum width of each interval.\n   */\n  maxWidth?: number;\n\n  /**\n   * Minimum height of each interval.\n   */\n  minHeight?: number;\n\n  [key: string]: any;\n};\n\n// Render rect in different coordinate.\nexport function rect(\n  document,\n  points,\n  value,\n  coordinate,\n  style: Record<string, any> = {},\n) {\n  const {\n    inset = 0,\n    radius = 0,\n    insetLeft = inset,\n    insetTop = inset,\n    insetRight = inset,\n    insetBottom = inset,\n    radiusBottomLeft = radius,\n    radiusBottomRight = radius,\n    radiusTopLeft = radius,\n    radiusTopRight = radius,\n    minWidth = -Infinity,\n    maxWidth = Infinity,\n    minHeight = -Infinity,\n    ...rest\n  } = style;\n  if (!isPolar(coordinate) && !isHelix(coordinate)) {\n    const tpShape = !!isTranspose(coordinate);\n\n    const [p0, , p2] = tpShape ? reorder(points) : points;\n    const [x, y] = p0;\n    const [width, height] = sub(p2, p0);\n    // Deal with width or height is negative.\n    const absX = width > 0 ? x : x + width;\n    const absY = height > 0 ? y : y + height;\n\n    const absWidth = Math.abs(width);\n    const absHeight = Math.abs(height);\n    const finalX = absX + insetLeft;\n    const finalY = absY + insetTop;\n    const finalWidth = absWidth - (insetLeft + insetRight);\n    const finalHeight = absHeight - (insetTop + insetBottom);\n\n    const clampWidth = tpShape\n      ? clamp(finalWidth, minHeight, Infinity)\n      : clamp(finalWidth, minWidth, maxWidth);\n    const clampHeight = tpShape\n      ? clamp(finalHeight, minWidth, maxWidth)\n      : clamp(finalHeight, minHeight, Infinity);\n    const clampX = tpShape ? finalX : finalX - (clampWidth - finalWidth) / 2;\n    const clampY = tpShape\n      ? finalY - (clampHeight - finalHeight) / 2\n      : finalY - (clampHeight - finalHeight);\n\n    return select(document.createElement('rect', {}))\n      .style('x', clampX)\n      .style('y', clampY)\n      .style('width', clampWidth)\n      .style('height', clampHeight)\n      .style('radius', [\n        radiusTopLeft,\n        radiusTopRight,\n        radiusBottomRight,\n        radiusBottomLeft,\n      ])\n      .call(applyStyle, rest)\n      .node();\n  }\n\n  // Render path in polar coordinate.\n  const { y, y1 } = value;\n  const center = coordinate.getCenter() as Vector2;\n  const arcObject = getArcObject(coordinate, points, [y, y1]);\n  const path = arc()\n    .cornerRadius(radius as number)\n    .padAngle((inset * Math.PI) / 180);\n\n  return select(document.createElement('path', {}))\n    .style('d', path(arcObject))\n    .style('transform', `translate(${center[0]}, ${center[1]})`)\n    .style('radius', radius)\n    .style('inset', inset)\n    .call(applyStyle, rest)\n    .node();\n}\n\n/**\n * Render rect in different coordinate.\n * Calc arc path based on control points directly rather startAngle, endAngle, innerRadius,\n * outerRadius. This is not accurate and will cause bug when the range of y scale is [1, 0]\n * for cell geometry.\n */\nexport const Color: SC<ColorOptions> = (options, context) => {\n  // Render border only when colorAttribute is stroke.\n  const {\n    colorAttribute,\n    opacityAttribute = 'fill',\n    first = true,\n    last = true,\n    ...style\n  } = options;\n\n  const { coordinate, document } = context;\n\n  return (points, value, defaults) => {\n    const {\n      color: defaultColor,\n      radius: defaultRadius = 0,\n      ...restDefaults\n    } = defaults;\n\n    const defaultLineWidth = restDefaults.lineWidth || 1;\n    const {\n      stroke,\n      radius = defaultRadius,\n      radiusTopLeft = radius,\n      radiusTopRight = radius,\n      radiusBottomRight = radius,\n      radiusBottomLeft = radius,\n      innerRadius = 0,\n      innerRadiusTopLeft = innerRadius,\n      innerRadiusTopRight = innerRadius,\n      innerRadiusBottomRight = innerRadius,\n      innerRadiusBottomLeft = innerRadius,\n      lineWidth = colorAttribute === 'stroke' || stroke ? defaultLineWidth : 0,\n      inset = 0,\n      insetLeft = inset,\n      insetRight = inset,\n      insetBottom = inset,\n      insetTop = inset,\n      minWidth,\n      maxWidth,\n      minHeight,\n      ...rest\n    } = style;\n    const { color = defaultColor, opacity } = value;\n\n    // Extended style, which is not supported by native g shape,\n    // should apply at first.\n    const standardDirRadius = [\n      first ? radiusTopLeft : innerRadiusTopLeft,\n      first ? radiusTopRight : innerRadiusTopRight,\n      last ? radiusBottomRight : innerRadiusBottomRight,\n      last ? radiusBottomLeft : innerRadiusBottomLeft,\n    ];\n    const standardDir = [\n      'radiusTopLeft',\n      'radiusTopRight',\n      'radiusBottomRight',\n      'radiusBottomLeft',\n    ];\n    // Transpose: rotate it clockwise by 90.\n    if (isTranspose(coordinate)) {\n      standardDir.push(standardDir.shift());\n    }\n    const extendedStyle = {\n      radius,\n      ...Object.fromEntries(\n        standardDir.map((d, i) => [d, standardDirRadius[i]]),\n      ),\n      inset,\n      insetLeft,\n      insetRight,\n      insetBottom,\n      insetTop,\n      minWidth,\n      maxWidth,\n      minHeight,\n    };\n\n    return (\n      select(rect(document, points, value, coordinate, extendedStyle))\n        .call(applyStyle, restDefaults)\n        .style('fill', 'transparent')\n        .style(colorAttribute, color)\n        .style(toOpacityKey(options), opacity)\n        .style('lineWidth', lineWidth)\n        .style('stroke', stroke === undefined ? color : stroke)\n        // shape.style has higher priority.\n        .call(applyStyle, rest)\n        .node()\n    );\n  };\n};\n\n// @todo Should Shape have default animations using for ordinal scale?\nColor.props = {\n  defaultEnterAnimation: 'scaleInY',\n  defaultUpdateAnimation: 'morphing',\n  defaultExitAnimation: 'fadeOut',\n};\n", "import { ShapeComponent as SC } from '../../runtime';\nimport { Color } from './color';\n\nexport type RectOptions = {\n  /**\n   * Minimum width of each interval.\n   */\n  minWidth?: number;\n  /**\n   * Maximum width of each interval.\n   */\n  maxWidth?: number;\n\n  /**\n   * Minimum height of each interval.\n   */\n  minHeight?: number;\n};\n\n/**\n * Render rect in different coordinate and using color channel for stroke and fill attribute.\n * The stroke attribute is valid with specified lineWidth attribute which defaults to zero.\n */\nexport const Rect: SC<RectOptions> = (options, context) => {\n  return Color({ colorAttribute: 'fill', ...options }, context);\n};\n\nRect.props = {\n  ...Color.props,\n  defaultMarker: 'square',\n};\n", "import { ShapeComponent as SC } from '../../runtime';\nimport { Color } from './color';\n\nexport type HollowOptions = Record<string, any>;\n\n/**\n * Render rect in different coordinate and using color channel for stroke attribute.\n */\nexport const Hollow: SC<HollowOptions> = (options, context) => {\n  return Color({ colorAttribute: 'stroke', ...options }, context);\n};\n\nHollow.props = {\n  ...Color.props,\n  defaultMarker: 'hollowSquare',\n};\n", "import { line, curveLinearClosed } from '@antv/vendor/d3-shape';\nimport { Coordinate } from '@antv/coord';\nimport { isTranspose } from '../../utils/coordinate';\nimport { ShapeComponent as SC, Vector2 } from '../../runtime';\nimport { select } from '../../utils/selection';\nimport { applyStyle, reorder } from '../utils';\n\nexport type FunnelOptions = {\n  adjustPoints?: (\n    points: Vector2[],\n    nextPoints: Vector2[],\n    coordinate: Coordinate,\n  ) => Vector2[];\n  [key: string]: any;\n};\n\n/**\n * Adjust and return the new `points`.\n */\nfunction getFunnelPoints(\n  points: Vector2[],\n  nextPoints: Vector2[],\n  coordinate: Coordinate,\n) {\n  const [p0, p1, p2, p3] = points;\n\n  if (isTranspose(coordinate)) {\n    const newP1: Vector2 = [nextPoints ? nextPoints[0][0] : p1[0], p1[1]];\n    const newP2: Vector2 = [nextPoints ? nextPoints[3][0] : p2[0], p2[1]];\n    return [p0, newP1, newP2, p3];\n  }\n  const newP1: Vector2 = [p1[0], nextPoints ? nextPoints[0][1] : p1[1]];\n  const newP2: Vector2 = [p2[0], nextPoints ? nextPoints[3][1] : p2[1]];\n  return [p0, newP1, newP2, p3];\n}\n\n/**\n * Render funnel in different coordinate and using color channel for stroke and fill attribute.\n */\nexport const Funnel: SC<FunnelOptions> = (options, context) => {\n  const { adjustPoints = getFunnelPoints, ...style } = options;\n  const { coordinate, document } = context;\n  return (points, value, defaults, point2d) => {\n    const { index } = value;\n    const { color: defaultColor, ...rest } = defaults;\n    const nextPoints = point2d[index + 1];\n    const funnelPoints = adjustPoints(points, nextPoints, coordinate);\n    const tpShape = !!isTranspose(coordinate);\n    const [p0, p1, p2, p3] = tpShape ? reorder(funnelPoints) : funnelPoints;\n    const { color = defaultColor, opacity } = value;\n    const b = line().curve(curveLinearClosed)([p0, p1, p2, p3]);\n    return select(document.createElement('path', {}))\n      .call(applyStyle, rest)\n      .style('d', b)\n      .style('fill', color)\n      .style('fillOpacity', opacity)\n      .call(applyStyle, style)\n      .node();\n  };\n};\n\nFunnel.props = {\n  defaultMarker: 'square',\n};\n", "import { Coordinate } from '@antv/coord';\nimport { isTranspose } from '../../utils/coordinate';\nimport { ShapeComponent as SC, Vector2 } from '../../runtime';\nimport { Funnel } from './funnel';\n\nexport type PyramidOptions = Record<string, any>;\n\n/**\n * Adjust and return the new `points`.\n */\nfunction getPyramidPoints(\n  points: Vector2[],\n  nextPoints: Vector2[],\n  coordinate: Coordinate,\n) {\n  const [p0, p1, p2, p3] = points;\n\n  if (isTranspose(coordinate)) {\n    const newP1: Vector2 = [\n      nextPoints ? nextPoints[0][0] : (p1[0] + p2[0]) / 2,\n      p1[1],\n    ];\n    const newP2: Vector2 = [\n      nextPoints ? nextPoints[3][0] : (p1[0] + p2[0]) / 2,\n      p2[1],\n    ];\n    return [p0, newP1, newP2, p3];\n  }\n  const newP1: Vector2 = [\n    p1[0],\n    nextPoints ? nextPoints[0][1] : (p1[1] + p2[1]) / 2,\n  ];\n  const newP2: Vector2 = [\n    p2[0],\n    nextPoints ? nextPoints[3][1] : (p1[1] + p2[1]) / 2,\n  ];\n  return [p0, newP1, newP2, p3];\n}\n\n/**\n * Render pyramid in different coordinate and using color channel for stroke and fill attribute.\n */\nexport const Pyramid: SC<PyramidOptions> = (options, context) => {\n  return Funnel({ adjustPoints: getPyramidPoints, ...options }, context);\n};\n\nPyramid.props = {\n  defaultMarker: 'square',\n};\n", "import { CustomElement, DisplayObject } from '@antv/g';\n\nexport type ElementDescriptor = {\n  render(container: DisplayObject): void;\n};\n\nexport function createElement<T = Record<string, any>>(\n  descriptor: ElementDescriptor | ElementDescriptor['render'],\n): new (T?) => DisplayObject {\n  const render =\n    typeof descriptor === 'function' ? descriptor : descriptor.render;\n  return class extends CustomElement<T> {\n    connectedCallback() {\n      this.draw();\n    }\n\n    attributeChangedCallback() {\n      this.draw();\n    }\n\n    draw() {\n      render(this);\n    }\n  };\n}\n", "import {\n  line,\n  lineRadial,\n  CurveFactory,\n  CurveFactoryLineOnly,\n} from '@antv/vendor/d3-shape';\nimport { Vector2 } from '@antv/coord';\nimport { isPolar, isTranspose } from '../../utils/coordinate';\nimport { select } from '../../utils/selection';\nimport { ShapeComponent as SC } from '../../runtime';\nimport { applyStyle, computeGradient, getTransform } from '../utils';\nimport { createElement } from '../../utils/createElement';\nimport { subObject } from '../../utils/helper';\nimport { angleWithQuadrant, dist, sub } from '../../utils/vector';\n\nconst DoublePath = createElement((g) => {\n  const { d1, d2, style1, style2 } = g.attributes;\n  const document = g.ownerDocument;\n  select(g)\n    .maybeAppend('line', () => document.createElement('path', {}))\n    .style('d', d1)\n    .call(applyStyle, style1);\n  select(g)\n    .maybeAppend('line1', () => document.createElement('path', {}))\n    .style('d', d2)\n    .call(applyStyle, style2);\n});\n\n/**\n * Given a points sequence, split it into an array of defined points\n * and an array of undefined segments.\n *\n * Input - [[1, 2], [3, 4], [null, null], [null, null], [5, 6], [null, null], [7, 8]]\n * Output\n *  - [[1, 2], [3, 4], [5, 6], [7, 8]]\n *  - [\n *      [[3, 4], [5, 6]],\n *      [[5, 6], [7, 8]]\n *    ]\n */\nfunction segmentation(\n  points: Vector2[],\n  defined: (d: any) => boolean,\n): [Vector2[], [Vector2, Vector2][]] {\n  const definedPoints = [];\n  const segments = [];\n  let m = false; // Is in a undefined sequence.\n  let dp = null; // The previous defined point.\n  for (const p of points) {\n    // If current point is a undefined point,\n    // enter a undefined sequence.\n    if (!defined(p[0]) || !defined(p[1])) m = true;\n    else {\n      definedPoints.push(p);\n      // If current point is a defined point,\n      // and is in a undefined sequence, save\n      // the two closest defined points as this\n      // undefined sequence and exit it.\n      if (m) {\n        m = false;\n        segments.push([dp, p]);\n      }\n      // Update the previous defined point.\n      dp = p;\n    }\n  }\n  return [definedPoints, segments];\n}\n\nexport type CurveOptions = {\n  curve?: CurveFactory | CurveFactoryLineOnly;\n  gradient?: boolean;\n  [key: string]: any;\n};\n\nexport const Curve: SC<CurveOptions> = (options, context) => {\n  const {\n    curve,\n    gradient = false,\n    // The color for each segment.\n    gradientColor = 'between',\n    defined = (d) => !Number.isNaN(d) && d !== undefined && d !== null,\n    connect: connectNulls = false,\n    ...style\n  } = options;\n  const { coordinate, document } = context;\n  return (P, value, defaults) => {\n    // Compute styles.\n    const { color: defaultColor, lineWidth: defaultSize, ...rest } = defaults;\n    const {\n      color = defaultColor,\n      size = defaultSize,\n      seriesColor: sc,\n      seriesX: sx,\n      seriesY: sy,\n    } = value;\n\n    const transform = getTransform(coordinate, value);\n    const tpShape = isTranspose(coordinate);\n    const stroke =\n      gradient && sc\n        ? computeGradient(sc, sx, sy, gradient, gradientColor, tpShape)\n        : color;\n\n    const finalStyle = {\n      ...rest,\n      ...(stroke && { stroke }),\n      ...(size && { lineWidth: size }),\n      ...(transform && { transform }),\n      ...style,\n    };\n\n    // Compute points and segments.\n    let linePath;\n    if (isPolar(coordinate)) {\n      const center = coordinate.getCenter() as Vector2;\n      linePath = (points) =>\n        lineRadial()\n          .angle((_, idx) => angleWithQuadrant(sub(points[idx], center)))\n          .radius((_, idx) => dist(points[idx], center))\n          .defined(([x, y]) => defined(x) && defined(y))\n          .curve(curve)(points);\n    } else {\n      linePath = line()\n        .x((d) => d[0])\n        .y((d) => d[1])\n        .defined(([x, y]) => defined(x) && defined(y))\n        .curve(curve);\n    }\n    const [DP, MS] = segmentation(P, defined);\n    const connectStyle = subObject(finalStyle, 'connect');\n    const missing = !!MS.length;\n\n    // Draw one path of connected defined points.\n    if (!missing || (connectNulls && !Object.keys(connectStyle).length)) {\n      return select(document.createElement('path', {}))\n        .style('d', linePath(DP) || [])\n        .call(applyStyle, finalStyle)\n        .node();\n    }\n\n    // Draw one path of unconnected defined points.\n    if (missing && !connectNulls) {\n      return select(document.createElement('path', {}))\n        .style('d', linePath(P))\n        .call(applyStyle, finalStyle)\n        .node();\n    }\n\n    // Draw two path.\n    // One for unconnected defined points.\n    // One for connected segments.\n    const connectPath = (segments) => segments.map(linePath).join(',');\n    return select(new DoublePath())\n      .style('style1', { ...finalStyle, ...connectStyle })\n      .style('style2', finalStyle)\n      .style('d1', connectPath(MS))\n      .style('d2', linePath(P))\n      .node();\n  };\n};\n\nCurve.props = {\n  defaultMarker: 'smooth',\n  defaultEnterAnimation: 'fadeIn',\n  defaultUpdateAnimation: 'morphing',\n  defaultExitAnimation: 'fadeOut',\n};\n", "import { curveLinear, curveLinearClosed } from '@antv/vendor/d3-shape';\nimport { isPolar } from '../../utils/coordinate';\nimport { ShapeComponent as SC } from '../../runtime';\nimport { Curve } from './curve';\n\nexport type LineOptions = Record<string, any>;\n\nexport const Line: SC<LineOptions> = (options, context) => {\n  const { coordinate } = context;\n  return (...params) => {\n    const curve = isPolar(coordinate) ? curveLinearClosed : curveLinear;\n    return Curve({ curve, ...options }, context)(...params);\n  };\n};\n\nLine.props = {\n  ...Curve.props,\n  defaultMarker: 'line',\n};\n", "import {\n  curveMonotoneX,\n  curveMonotoneY,\n  curveCatmullRomClosed,\n} from '@antv/vendor/d3-shape';\nimport { isPolar, isTranspose } from '../../utils/coordinate';\nimport { ShapeComponent as SC } from '../../runtime';\nimport { Curve } from './curve';\n\nexport type SmoothOptions = Record<string, any>;\n\nexport const Smooth: SC<SmoothOptions> = (options, context) => {\n  const { ...rest } = options;\n  const { coordinate } = context;\n  return (...params) => {\n    const curve = isPolar(coordinate)\n      ? curveCatmullRomClosed\n      : isTranspose(coordinate)\n      ? curveMonotoneY\n      : curveMonotoneX;\n    return Curve({ curve, ...rest }, context)(...params);\n  };\n};\n\nSmooth.props = {\n  ...Curve.props,\n  defaultMarker: 'smooth',\n};\n", "import { curveStepAfter } from '@antv/vendor/d3-shape';\nimport { ShapeComponent as SC } from '../../runtime';\nimport { Curve } from './curve';\n\nexport type HVOptions = Record<string, any>;\n\nexport const HV: SC<HVOptions> = (options, context) => {\n  return Curve({ curve: curveStepAfter, ...options }, context);\n};\n\nHV.props = {\n  ...Curve.props,\n  defaultMarker: 'hv',\n};\n", "import { curveStepBefore } from '@antv/vendor/d3-shape';\nimport { ShapeComponent as SC } from '../../runtime';\nimport { Curve } from './curve';\n\nexport type VHOptions = Record<string, any>;\n\nexport const VH: SC<VHOptions> = (options, context) => {\n  return Curve({ curve: curveStepBefore, ...options }, context);\n};\n\nVH.props = {\n  ...Curve.props,\n  defaultMarker: 'vh',\n};\n", "import { curveStep } from '@antv/vendor/d3-shape';\nimport { ShapeComponent as SC } from '../../runtime';\nimport { Curve } from './curve';\n\nexport type HVHOptions = Record<string, any>;\n\nexport const HVH: SC<HVHOptions> = (options, context) => {\n  return Curve({ curve: curveStep, ...options }, context);\n};\n\nHVH.props = {\n  ...Curve.props,\n  defaultMarker: 'hvh',\n};\n", "import { path as d3path } from '@antv/vendor/d3-path';\nimport { ShapeComponent as SC } from '../../runtime';\nimport { select } from '../../utils/selection';\nimport { applyStyle } from '../utils';\nimport { angle, sub, add, Vector2 } from '../../utils/vector';\nimport { defined } from '../../utils/helper';\nimport { Curve } from './curve';\n\n/**\n *\n * x9-x0---------x1-x2\n * /   |r1        |r2 \\\n *x8---p0---------p1---x3\n * \\ r4|          | r3 /\n *  x7-x6--------x5-x4\n */\nfunction stroke(path, p0, p1, s0, s1) {\n  const v = sub(p1, p0);\n  const a = angle(v);\n  const a1 = a + Math.PI / 2;\n  const r1: Vector2 = [(s0 / 2) * Math.cos(a1), (s0 / 2) * Math.sin(a1)];\n  const r2: Vector2 = [(s1 / 2) * Math.cos(a1), (s1 / 2) * Math.sin(a1)];\n  const r3: Vector2 = [(s1 / 2) * Math.cos(a), (s1 / 2) * Math.sin(a)];\n  const r4: Vector2 = [(s0 / 2) * Math.cos(a), (s0 / 2) * Math.sin(a)];\n  const x0 = add(p0, r1);\n  const x1 = add(p1, r2);\n  const x2 = add(x1, r3);\n  const x3 = add(p1, r3);\n  const x4 = sub(x3, r2);\n  const x5 = sub(p1, r2);\n  const x6 = sub(p0, r1);\n  const x7 = sub(x6, r4);\n  const x8 = sub(p0, r4);\n  const x9 = sub(x0, r4);\n\n  path.moveTo(...x0);\n  path.lineTo(...x1);\n  path.arcTo(...x2, ...x3, s1 / 2);\n  path.arcTo(...x4, ...x5, s1 / 2);\n  path.lineTo(...x6);\n  path.arcTo(...x7, ...x8, s0 / 2);\n  path.arcTo(...x9, ...x0, s0 / 2);\n  path.closePath();\n}\n\nexport type TrailOptions = Record<string, any>;\n\n// @todo Support connect and connectStyle.\nexport const Trail: SC<TrailOptions> = (options, context) => {\n  const { document } = context;\n  return (P, value, defaults) => {\n    const { seriesSize, color } = value;\n    const { color: defaultColor, ...rest } = defaults;\n    const path = d3path();\n    for (let i = 0; i < P.length - 1; i++) {\n      const p0 = P[i];\n      const p1 = P[i + 1];\n      const s0 = seriesSize[i];\n      const s1 = seriesSize[i + 1];\n      if ([...p0, ...p1].every(defined)) stroke(path, p0, p1, s0, s1);\n    }\n    return select(document.createElement('path', {}))\n      .call(applyStyle, rest)\n      .style('fill', color || defaultColor)\n      .style('d', path.toString())\n      .call(applyStyle, options)\n      .node();\n  };\n};\n\nTrail.props = {\n  ...Curve.props,\n  defaultMarker: 'line',\n};\n", "import { Path } from '@antv/g';\nimport type { PathArray } from '@antv/util';\n\nexport interface SymbolFactor {\n  (x: number, y: number, r: number): PathArray;\n  style?: string[];\n}\n\nconst point: SymbolFactor = (x, y, r) => {\n  return [\n    ['M', x - r, y],\n    ['A', r, r, 0, 1, 0, x + r, y],\n    ['A', r, r, 0, 1, 0, x - r, y],\n    ['Z'],\n  ];\n};\npoint.style = ['fill'];\n\nconst hollowPoint = point.bind(undefined);\nhollowPoint.style = ['stroke', 'lineWidth'];\n\nconst square: SymbolFactor = (x, y, r) => {\n  return [\n    ['M', x - r, y - r],\n    ['L', x + r, y - r],\n    ['L', x + r, y + r],\n    ['L', x - r, y + r],\n    ['Z'],\n  ];\n};\nsquare.style = ['fill'];\n\nconst rect = square.bind(undefined);\nrect.style = ['fill'];\n\nconst hollowSquare = square.bind(undefined);\nhollowSquare.style = ['stroke', 'lineWidth'];\n\nconst diamond: SymbolFactor = (x, y, r) => {\n  const hr = r * 0.618;\n  return [\n    ['M', x - hr, y],\n    ['L', x, y - r],\n    ['L', x + hr, y],\n    ['L', x, y + r],\n    ['Z'],\n  ];\n};\ndiamond.style = ['fill'];\n\nconst hollowDiamond = diamond.bind(undefined);\nhollowDiamond.style = ['stroke', 'lineWidth'];\n\nconst triangle: SymbolFactor = (x, y, r) => {\n  const diffY = r * Math.sin((1 / 3) * Math.PI);\n  return [\n    ['M', x - r, y + diffY],\n    ['L', x, y - diffY],\n    ['L', x + r, y + diffY],\n    ['Z'],\n  ];\n};\ntriangle.style = ['fill'];\n\nconst hollowTriangle = triangle.bind(undefined);\nhollowTriangle.style = ['stroke', 'lineWidth'];\n\nconst triangleDown: SymbolFactor = (x, y, r) => {\n  const diffY = r * Math.sin((1 / 3) * Math.PI);\n  return [\n    ['M', x - r, y - diffY],\n    ['L', x + r, y - diffY],\n    ['L', x, y + diffY],\n    ['Z'],\n  ];\n};\ntriangleDown.style = ['fill'];\n\nconst hollowTriangleDown = triangleDown.bind(undefined);\nhollowTriangleDown.style = ['stroke', 'lineWidth'];\n\nconst hexagon: SymbolFactor = (x, y, r) => {\n  const diffX = (r / 2) * Math.sqrt(3);\n  return [\n    ['M', x, y - r],\n    ['L', x + diffX, y - r / 2],\n    ['L', x + diffX, y + r / 2],\n    ['L', x, y + r],\n    ['L', x - diffX, y + r / 2],\n    ['L', x - diffX, y - r / 2],\n    ['Z'],\n  ];\n};\nhexagon.style = ['fill'];\n\nconst hollowHexagon = hexagon.bind(undefined);\nhollowHexagon.style = ['stroke', 'lineWidth'];\n\nconst bowtie: SymbolFactor = (x, y, r) => {\n  const diffY = r - 1.5;\n  return [\n    ['M', x - r, y - diffY],\n    ['L', x + r, y + diffY],\n    ['L', x + r, y - diffY],\n    ['L', x - r, y + diffY],\n    ['Z'],\n  ];\n};\nbowtie.style = ['fill'];\n\nconst hollowBowtie = bowtie.bind(undefined);\nhollowBowtie.style = ['stroke', 'lineWidth'];\n\nconst line: SymbolFactor = (x, y, r) => {\n  return [\n    ['M', x, y + r],\n    ['L', x, y - r],\n  ];\n};\nline.style = ['stroke', 'lineWidth'];\n\nconst cross: SymbolFactor = (x, y, r) => {\n  return [\n    ['M', x - r, y - r],\n    ['L', x + r, y + r],\n    ['M', x + r, y - r],\n    ['L', x - r, y + r],\n  ];\n};\ncross.style = ['stroke', 'lineWidth'];\n\nconst tick: SymbolFactor = (x, y, r) => {\n  return [\n    ['M', x - r / 2, y - r],\n    ['L', x + r / 2, y - r],\n    ['M', x, y - r],\n    ['L', x, y + r],\n    ['M', x - r / 2, y + r],\n    ['L', x + r / 2, y + r],\n  ];\n};\ntick.style = ['stroke', 'lineWidth'];\n\nconst plus: SymbolFactor = (x, y, r) => {\n  return [\n    ['M', x - r, y],\n    ['L', x + r, y],\n    ['M', x, y - r],\n    ['L', x, y + r],\n  ];\n};\nplus.style = ['stroke', 'lineWidth'];\n\nconst hyphen: SymbolFactor = (x, y, r) => {\n  return [\n    ['M', x - r, y],\n    ['L', x + r, y],\n  ];\n};\nhyphen.style = ['stroke', 'lineWidth'];\n\nconst dot: SymbolFactor = (x, y, r) => {\n  return [\n    ['M', x - r, y],\n    ['L', x + r, y],\n  ];\n};\ndot.style = ['stroke', 'lineWidth'];\n\nconst dash = dot.bind(undefined);\ndash.style = ['stroke', 'lineWidth'];\n\nconst smooth: SymbolFactor = (x, y, r) => {\n  return [\n    ['M', x - r, y],\n    ['A', r / 2, r / 2, 0, 1, 1, x, y],\n    ['A', r / 2, r / 2, 0, 1, 0, x + r, y],\n  ];\n};\nsmooth.style = ['stroke', 'lineWidth'];\n\nconst hv: SymbolFactor = (x, y, r) => {\n  return [\n    ['M', x - r - 1, y - 2.5],\n    ['L', x, y - 2.5],\n    ['L', x, y + 2.5],\n    ['L', x + r + 1, y + 2.5],\n  ];\n};\nhv.style = ['stroke', 'lineWidth'];\n\nconst vh: SymbolFactor = (x, y, r) => {\n  return [\n    ['M', x - r - 1, y + 2.5],\n    ['L', x, y + 2.5],\n    ['L', x, y - 2.5],\n    ['L', x + r + 1, y - 2.5],\n  ];\n};\nvh.style = ['stroke', 'lineWidth'];\n\nconst hvh: SymbolFactor = (x, y, r) => {\n  return [\n    ['M', x - (r + 1), y + 2.5],\n    ['L', x - r / 2, y + 2.5],\n    ['L', x - r / 2, y - 2.5],\n    ['L', x + r / 2, y - 2.5],\n    ['L', x + r / 2, y + 2.5],\n    ['L', x + r + 1, y + 2.5],\n  ];\n};\nhvh.style = ['stroke', 'lineWidth'];\n\nconst vhv: SymbolFactor = (x: number, y: number, r: number) => {\n  return [\n    ['M', x - 5, y + 2.5],\n    ['L', x - 5, y],\n    ['L', x, y],\n    ['L', x, y - 3],\n    ['L', x, y + 3],\n    ['L', x + 6.5, y + 3],\n  ];\n};\nvhv.style = ['stroke', 'lineWidth'];\n\nexport const Symbols = new Map<string, SymbolFactor>([\n  ['bowtie', bowtie],\n  ['cross', cross],\n  ['dash', dash],\n  ['diamond', diamond],\n  ['dot', dot],\n  ['hexagon', hexagon],\n  ['hollowBowtie', hollowBowtie],\n  ['hollowDiamond', hollowDiamond],\n  ['hollowHexagon', hollowHexagon],\n  ['hollowPoint', hollowPoint],\n  ['hollowSquare', hollowSquare],\n  ['hollowTriangle', hollowTriangle],\n  ['hollowTriangleDown', hollowTriangleDown],\n  ['hv', hv],\n  ['hvh', hvh],\n  ['hyphen', hyphen],\n  ['line', line],\n  ['plus', plus],\n  ['point', point],\n  ['rect', rect],\n  ['smooth', smooth],\n  ['square', square],\n  ['tick', tick],\n  ['triangleDown', triangleDown],\n  ['triangle', triangle],\n  ['vh', vh],\n  ['vhv', vhv],\n]);\n\nexport function useMarker(\n  type: string,\n  { d, fill, lineWidth, path, stroke, color, ...style }: Record<string, any>,\n) {\n  const symbol = Symbols.get(type) || Symbols.get('point');\n  return (...args: Parameters<SymbolFactor>) => {\n    const path = new Path({\n      style: {\n        ...style,\n        d: symbol(...args),\n        stroke: symbol.style.includes('stroke') ? color || stroke : '',\n        fill: symbol.style.includes('fill') ? color || fill : '',\n        lineWidth: symbol.style.includes('lineWidth')\n          ? lineWidth || lineWidth || 2\n          : 0,\n      },\n    });\n\n    return path;\n  };\n}\n\nexport function registerSymbol(type: string, marker: SymbolFactor) {\n  Symbols.set(type, marker);\n}\n\nexport function unregisterSymbol(type: string) {\n  Symbols.delete(type);\n}\n", "/**\n * camelCase('foo-bar');\n * // => 'fooBar'\n * @param s\n */\nexport function camelCase(s: string) {\n  return s.replace(/-(\\w)/g, function (_, letter) {\n    return letter.toUpperCase();\n  });\n}\n\n/**\n * kebabCase('fooBar');\n * // => 'foo-bar'\n * @param s\n */\nexport function kebabCase(s: string) {\n  return s.replace(/([A-Z])/g, '-$1').toLowerCase();\n}\n", "import { Coordinate, Vector2 } from '@antv/coord';\nimport { ShapeComponent as SC } from '../../runtime';\nimport { isFisheye } from '../../utils/coordinate';\nimport { Symbols } from '../../utils/marker';\nimport { select } from '../../utils/selection';\nimport { camelCase } from '../../utils/string';\nimport { applyStyle, getOrigin, toOpacityKey } from '../utils';\n\nexport type ColorOptions = {\n  colorAttribute: 'fill' | 'stroke';\n  symbol: string;\n  mode?: 'fixed' | 'auto' | 'normal';\n  [key: string]: any;\n};\n\nexport function getRadius(\n  mode: ColorOptions['mode'],\n  points: Vector2[],\n  value: Record<string, any>,\n  coordinate: Coordinate,\n) {\n  if (points.length === 1) return undefined;\n  const { size } = value;\n  if (mode === 'fixed') return size;\n  if (mode === 'normal' || isFisheye(coordinate)) {\n    const [[x0, y0], [x2, y2]] = points;\n    const a = Math.abs((x2 - x0) / 2);\n    const b = Math.abs((y2 - y0) / 2);\n    return Math.max(0, (a + b) / 2);\n  }\n  return size;\n}\n\n/**\n * Render point in different coordinate.\n */\nexport const Color: SC<ColorOptions> = (options, context) => {\n  // Render border only when colorAttribute is stroke.\n  const { colorAttribute, symbol, mode = 'auto', ...style } = options;\n  const path = Symbols.get(camelCase(symbol)) || Symbols.get('point');\n  const { coordinate, document } = context;\n  return (points, value, defaults) => {\n    const { lineWidth, color: defaultColor } = defaults;\n    const finalLineWidth = style.stroke ? lineWidth || 1 : lineWidth;\n    const { color = defaultColor, transform, opacity } = value;\n    const [cx, cy] = getOrigin(points);\n    const r = getRadius(mode, points, value, coordinate);\n    const finalRadius = r || style.r || defaults.r;\n    return select(document.createElement('path', {}))\n      .call(applyStyle, defaults)\n      .style('fill', 'transparent')\n      .style('d', path(cx, cy, finalRadius))\n      .style('lineWidth', finalLineWidth)\n      .style('transform', transform)\n      .style('transformOrigin', `${cx - finalRadius} ${cy - finalRadius}`)\n      .style('stroke', color)\n      .style(toOpacityKey(options), opacity)\n      .style(colorAttribute, color)\n      .call(applyStyle, style)\n      .node();\n  };\n};\n\nColor.props = {\n  defaultEnterAnimation: 'fadeIn',\n  defaultUpdateAnimation: 'morphing',\n  defaultExitAnimation: 'fadeOut',\n};\n", "import { ShapeComponent as SC } from '../../runtime';\nimport { Color } from './color';\n\nexport type HollowBowtieOptions = Record<string, any>;\n\n/**\n * \n */\nexport const HollowBowtie: SC<HollowBowtieOptions> = (options, context) => {\n  return Color(\n    { colorAttribute: 'stroke', symbol: 'bowtie', ...options },\n    context,\n  );\n};\n\nHollowBowtie.props = {\n  defaultMarker: 'hollowBowtie',\n  ...Color.props,\n};\n", "import { ShapeComponent as SC } from '../../runtime';\nimport { Color } from './color';\n\nexport type HollowDiamondOptions = Record<string, any>;\n\n/**\n * \n */\nexport const HollowDiamond: SC<HollowDiamondOptions> = (options, context) => {\n  return Color(\n    {\n      colorAttribute: 'stroke',\n      symbol: 'diamond',\n      ...options,\n    },\n    context,\n  );\n};\n\nHollowDiamond.props = {\n  defaultMarker: 'hollowDiamond',\n  ...Color.props,\n};\n", "import { ShapeComponent as SC } from '../../runtime';\nimport { Color } from './color';\n\nexport type HollowHexagonOptions = Record<string, any>;\n\n/**\n * \n */\nexport const HollowHexagon: SC<HollowHexagonOptions> = (options, context) => {\n  return Color(\n    {\n      colorAttribute: 'stroke',\n      symbol: 'hexagon',\n      ...options,\n    },\n    context,\n  );\n};\n\nHollowHexagon.props = {\n  defaultMarker: 'hollowHexagon',\n  ...Color.props,\n};\n", "import { ShapeComponent as SC } from '../../runtime';\nimport { Color } from './color';\n\nexport type HollowPointOptions = Record<string, any>;\n\n/**\n * \n */\nexport const HollowPoint: SC<HollowPointOptions> = (options, context) => {\n  return Color(\n    { colorAttribute: 'stroke', symbol: 'point', ...options },\n    context,\n  );\n};\n\nHollowPoint.props = {\n  defaultMarker: 'hollowPoint',\n  ...Color.props,\n};\n", "import { ShapeComponent as SC } from '../../runtime';\nimport { Color } from './color';\n\nexport type HollowSquareOptions = Record<string, any>;\n\n/**\n * \n */\nexport const HollowSquare: SC<HollowSquareOptions> = (options, context) => {\n  return Color(\n    { colorAttribute: 'stroke', symbol: 'square', ...options },\n    context,\n  );\n};\n\nHollowSquare.props = {\n  defaultMarker: 'hollowSquare',\n  ...Color.props,\n};\n", "import { ShapeComponent as SC } from '../../runtime';\nimport { Color } from './color';\n\nexport type HollowTriangleOptions = Record<string, any>;\n\n/**\n * \n */\nexport const HollowTriangle: SC<HollowTriangleOptions> = (options, context) => {\n  return Color(\n    {\n      colorAttribute: 'stroke',\n      symbol: 'triangle',\n      ...options,\n    },\n    context,\n  );\n};\n\nHollowTriangle.props = {\n  defaultMarker: 'hollowTriangle',\n  ...Color.props,\n};\n", "import { ShapeComponent as SC } from '../../runtime';\nimport { Color } from './color';\n\nexport type HollowTriangleDownOptions = Record<string, any>;\n\n/**\n * \n */\nexport const HollowTriangleDown: SC<HollowTriangleDownOptions> = (\n  options,\n  context,\n) => {\n  return Color(\n    {\n      colorAttribute: 'stroke',\n      symbol: 'triangle-down',\n      ...options,\n    },\n    context,\n  );\n};\n\nHollowTriangleDown.props = {\n  defaultMarker: 'hollowTriangleDown',\n  ...Color.props,\n};\n", "import { ShapeComponent as SC } from '../../runtime';\nimport { select } from '../../utils/selection';\nimport { applyStyle, getOrigin, toOpacityKey } from '../utils';\nimport { getRadius } from './color';\n\nexport type PointOptions = Record<string, any>;\n\ntype ColorOptions = {\n  colorAttribute: 'fill' | 'stroke';\n  mode?: 'fixed' | 'auto' | 'normal';\n  [key: string]: any;\n};\n\n/**\n * Render point in different coordinate.\n */\nexport const BaseCircle: SC<ColorOptions> = (options, context) => {\n  // Render border only when colorAttribute is stroke.\n  const { colorAttribute, mode = 'auto', ...style } = options;\n\n  const { coordinate, document } = context;\n  return (points, value, defaults) => {\n    const { lineWidth, color: defaultColor } = defaults;\n    const finalLineWidth = style.stroke ? lineWidth || 1 : lineWidth;\n    const { color = defaultColor, transform, opacity } = value;\n    const [cx, cy] = getOrigin(points);\n    const r = getRadius(mode, points, value, coordinate);\n    const finalRadius = r || style.r || defaults.r;\n    return select(document.createElement('circle', {}))\n      .call(applyStyle, defaults)\n      .style('fill', 'transparent')\n      .style('cx', cx)\n      .style('cy', cy)\n      .style('r', finalRadius)\n      .style('lineWidth', finalLineWidth)\n      .style('transform', transform)\n      .style('transformOrigin', `${cx} ${cy}`)\n      .style('stroke', color)\n      .style(toOpacityKey(options), opacity)\n      .style(colorAttribute, color)\n      .call(applyStyle, style)\n      .node();\n  };\n};\n\n/**\n * \n */\nexport const Circle: SC<PointOptions> = (options, context) => {\n  return BaseCircle({ colorAttribute: 'fill', ...options }, context);\n};\n\nCircle.props = {\n  defaultMarker: 'circle',\n  defaultEnterAnimation: 'fadeIn',\n  defaultExitAnimation: 'fadeOut',\n};\n", "import { ShapeComponent as SC } from '../../runtime';\nimport { BaseCircle, Circle } from './circle';\n\nexport type HollowCircleOptions = Record<string, any>;\n\n/**\n * \n */\nexport const HollowCircle: SC<HollowCircleOptions> = (options, context) => {\n  return BaseCircle({ colorAttribute: 'stroke', ...options }, context);\n};\n\nHollowCircle.props = {\n  defaultMarker: 'hollowPoint',\n  ...Circle.props,\n};\n", "import { ShapeComponent as SC } from '../../runtime';\nimport { Color } from './color';\n\nexport type BowtieOptions = Record<string, any>;\n\n/**\n * \n */\nexport const Bowtie: SC<BowtieOptions> = (options, context) => {\n  return Color(\n    { colorAttribute: 'fill', symbol: 'bowtie', ...options },\n    context,\n  );\n};\n\nBowtie.props = {\n  defaultMarker: 'bowtie',\n  ...Color.props,\n};\n", "import { ShapeComponent as SC } from '../../runtime';\nimport { Color } from './color';\n\nexport type CrossOptions = Record<string, any>;\n\n/**\n * \n */\nexport const Cross: SC<CrossOptions> = (options, context) => {\n  return Color(\n    { colorAttribute: 'stroke', symbol: 'cross', ...options },\n    context,\n  );\n};\n\nCross.props = {\n  defaultMarker: 'cross',\n  ...Color.props,\n};\n", "import { ShapeComponent as SC } from '../../runtime';\nimport { Color } from './color';\n\nexport type DiamondOptions = Record<string, any>;\n\n/**\n * \n */\nexport const Diamond: SC<DiamondOptions> = (options, context) => {\n  return Color(\n    { colorAttribute: 'fill', symbol: 'diamond', ...options },\n    context,\n  );\n};\n\nDiamond.props = {\n  defaultMarker: 'diamond',\n  ...Color.props,\n};\n", "import { ShapeComponent as SC } from '../../runtime';\nimport { Color } from './color';\n\nexport type HexagonOptions = Record<string, any>;\n\n/**\n * \n */\nexport const Hexagon: SC<HexagonOptions> = (options, context) => {\n  return Color(\n    { colorAttribute: 'fill', symbol: 'hexagon', ...options },\n    context,\n  );\n};\n\nHexagon.props = {\n  defaultMarker: 'hexagon',\n  ...Color.props,\n};\n", "import { ShapeComponent as SC } from '../../runtime';\nimport { Color } from './color';\n\nexport type HyphenOptions = Record<string, any>;\n\n/**\n * -\n */\nexport const Hyphen: SC<HyphenOptions> = (options, context) => {\n  return Color(\n    { colorAttribute: 'stroke', symbol: 'hyphen', ...options },\n    context,\n  );\n};\n\nHyphen.props = {\n  defaultMarker: 'hyphen',\n  ...Color.props,\n};\n", "import { ShapeComponent as SC } from '../../runtime';\nimport { Color } from './color';\n\nexport type LineOptions = Record<string, any>;\n\n/**\n * |\n */\nexport const Line: SC<LineOptions> = (options, context) => {\n  return Color(\n    { colorAttribute: 'stroke', symbol: 'line', ...options },\n    context,\n  );\n};\n\nLine.props = {\n  defaultMarker: 'line',\n  ...Color.props,\n};\n", "import { ShapeComponent as SC } from '../../runtime';\nimport { Color } from './color';\n\nexport type PlusOptions = Record<string, any>;\n\n/**\n * +\n */\nexport const Plus: SC<PlusOptions> = (options, context) => {\n  return Color(\n    { colorAttribute: 'stroke', symbol: 'plus', ...options },\n    context,\n  );\n};\n\nPlus.props = {\n  defaultMarker: 'plus',\n  ...Color.props,\n};\n", "import { ShapeComponent as SC } from '../../runtime';\nimport { Color } from './color';\n\nexport type PointOptions = Record<string, any>;\n\n/**\n * \n */\nexport const Point: SC<PointOptions> = (options, context) => {\n  return Color(\n    { colorAttribute: 'fill', symbol: 'point', ...options },\n    context,\n  );\n};\n\nPoint.props = {\n  defaultMarker: 'point',\n  ...Color.props,\n};\n", "import { ShapeComponent as SC } from '../../runtime';\nimport { Color } from './color';\n\nexport type SquareOptions = Record<string, any>;\n\n/**\n * \n */\nexport const Square: SC<SquareOptions> = (options, context) => {\n  return Color(\n    { colorAttribute: 'fill', symbol: 'square', ...options },\n    context,\n  );\n};\n\nSquare.props = {\n  defaultMarker: 'square',\n  ...Color.props,\n};\n", "import { ShapeComponent as SC } from '../../runtime';\nimport { Color } from './color';\n\nexport type TickOptions = Record<string, any>;\n\n/**\n * \n */\nexport const Tick: SC<TickOptions> = (options, context) => {\n  return Color(\n    { colorAttribute: 'stroke', symbol: 'tick', ...options },\n    context,\n  );\n};\n\nTick.props = {\n  defaultMarker: 'tick',\n  ...Color.props,\n};\n", "import { ShapeComponent as SC } from '../../runtime';\nimport { Color } from './color';\n\nexport type TriangleOptions = Record<string, any>;\n\n/**\n * \n */\nexport const Triangle: SC<TriangleOptions> = (options, context) => {\n  return Color(\n    { colorAttribute: 'fill', symbol: 'triangle', ...options },\n    context,\n  );\n};\n\nTriangle.props = {\n  defaultMarker: 'triangle',\n  ...Color.props,\n};\n", "import { ShapeComponent as SC } from '../../runtime';\nimport { Color } from './color';\n\nexport type TriangleDownOptions = Record<string, any>;\n\n/**\n * \n */\nexport const TriangleDown: SC<TriangleDownOptions> = (options, context) => {\n  return Color(\n    {\n      colorAttribute: 'fill',\n      symbol: 'triangle-down',\n      ...options,\n    },\n    context,\n  );\n};\n\nTriangleDown.props = {\n  defaultMarker: 'triangleDown',\n  ...Color.props,\n};\n", "import { path as d3path } from '@antv/vendor/d3-path';\nimport { applyStyle, arrowPoints, ArrowOptions } from '../utils';\nimport { select } from '../../utils/selection';\nimport { ShapeComponent as SC } from '../../runtime';\n\nexport type VectorOptions = ArrowOptions;\n\n/**\n * Connect 2 points with a single line with arrow.\n * ----->\n */\nexport const Vector: SC<VectorOptions> = (options, context) => {\n  const { arrow = true, arrowSize = '40%', ...style } = options;\n  const { document } = context;\n  return (points, value, defaults) => {\n    const { defaultColor, ...rest } = defaults;\n    const { color = defaultColor, transform } = value;\n    const [from, to] = points;\n\n    // Draw line\n    const path = d3path();\n    path.moveTo(...from);\n    path.lineTo(...to);\n\n    // Draw 2 arrows.\n    if (arrow) {\n      // Calculate arrow end point.\n      const [arrow1, arrow2] = arrowPoints(from, to, { arrowSize });\n      path.moveTo(...arrow1);\n      path.lineTo(...to);\n      path.lineTo(...arrow2);\n    }\n\n    return select(document.createElement('path', {}))\n      .call(applyStyle, rest)\n      .style('d', path.toString())\n      .style('stroke', color)\n      .style('transform', transform)\n      .call(applyStyle, style)\n      .node();\n  };\n};\n\nVector.props = {\n  defaultMarker: 'line',\n  defaultEnterAnimation: 'fadeIn',\n  defaultUpdateAnimation: 'morphing',\n  defaultExitAnimation: 'fadeOut',\n};\n", "import { Vector2 } from '@antv/coord';\nimport {\n  DisplayObject,\n  Text as GText,\n  Rect,\n  TextStyleProps,\n  RectStyleProps,\n  PathStyleProps,\n} from '@antv/g';\nimport { isNumber } from '@antv/util';\nimport { Marker } from '@antv/component';\nimport { line } from '@antv/vendor/d3-shape';\nimport { WithPrefix } from '../../runtime';\nimport { createElement } from '../../utils/createElement';\nimport { applyStyle } from '../utils';\nimport { subObject } from '../../utils/helper';\nimport { select } from '../../utils/selection';\nimport { dist } from '../../utils/vector';\n\ntype BackgroundStyleProps = WithPrefix<\n  RectStyleProps & { padding?: number[]; radius?: number },\n  'background'\n>;\n\ntype ConnectorStyleProps = WithPrefix<\n  PathStyleProps & { points?: Vector2[] },\n  'connector'\n>;\n\ntype MarkerStyleProps<P extends string> = WithPrefix<Record<string, any>, P>;\n\ntype TextShapeStyleProps = Omit<TextStyleProps, 'text'> &\n  ConnectorStyleProps &\n  BackgroundStyleProps &\n  MarkerStyleProps<'startMarker'> &\n  MarkerStyleProps<'endMarker'> & {\n    id: string;\n    className?: string;\n    x0?: number; // x0 represents the x position of relative point, default is equal to x\n    y0?: number;\n    coordCenter?: Vector2; // center of coordinate\n    background?: boolean;\n    connector?: boolean;\n    startMarker?: boolean;\n    endMarker?: boolean;\n    labelTransform?: string;\n    labelTransformOrigin?: string;\n    rotate?: number;\n    innerHTML?: string | HTMLElement;\n    text?: string;\n  };\n\nfunction getConnectorPoint(shape: GText | Rect): [number, number] {\n  const {\n    min: [x0, y0],\n    max: [x1, y1],\n  } = shape.getLocalBounds();\n  let x = 0;\n  let y = 0;\n  if (x0 > 0) x = x0;\n  if (x1 < 0) x = x1;\n  if (y0 > 0) y = y0;\n  if (y1 < 0) y = y1;\n  return [x, y];\n}\n\nfunction inferBackgroundBounds(textShape: DisplayObject, padding = []) {\n  const [top = 0, right = 0, bottom = top, left = right] = padding;\n  const container = textShape.parentNode as DisplayObject;\n\n  const angle = container.getEulerAngles();\n  container.setEulerAngles(0);\n  const { min, halfExtents } = textShape.getLocalBounds();\n  const [x, y] = min;\n  const [hw, hh] = halfExtents;\n  container.setEulerAngles(angle);\n\n  return {\n    x: x - left,\n    y: y - top,\n    width: hw * 2 + left + right,\n    height: hh * 2 + top + bottom,\n  };\n}\n\nconst cos = (p0: Vector2, p1: Vector2, p2: Vector2) => {\n  const a = dist(p0, p1);\n  const b = dist(p1, p2);\n  const c = dist(p2, p0);\n  return (a ** 2 + b ** 2 - c ** 2) / (2 * a * b);\n};\n\n// A path from element to label.\n// Adapted drawLabelLine from https://github.com/antvis/G2/blob/master/src/geometry/label/layout/pie/spider.ts\nfunction inferConnectorPath(\n  shape: DisplayObject,\n  end: Vector2,\n  control: Vector2[],\n  coordCenter: Vector2,\n  left = true,\n  top = true,\n) {\n  const path = (points) => line()(points);\n\n  if (!end[0] && !end[1]) return path([getConnectorPoint(shape), end]);\n  if (!control.length) return path([[0, 0], end]);\n\n  const [inflection, start] = control;\n  const p1 = [...start];\n  const p2 = [...inflection];\n\n  // Label has been adjusted, so add offset to the label.\n  if (start[0] !== inflection[0]) {\n    const offset = left ? -4 : 4;\n    p1[1] = start[1];\n\n    // For the label in the first quadrant.\n    if (top && !left) {\n      p1[0] = Math.max(inflection[0], start[0] - offset);\n      if (start[1] < inflection[1]) {\n        p2[1] = p1[1];\n      } else {\n        p2[1] = inflection[1];\n        p2[0] = Math.max(p2[0], p1[0] - offset);\n      }\n    }\n\n    // For the label in the second quadrant.\n    if (!top && !left) {\n      p1[0] = Math.max(inflection[0], start[0] - offset);\n      if (start[1] > inflection[1]) {\n        p2[1] = p1[1];\n      } else {\n        p2[1] = inflection[1];\n        p2[0] = Math.max(p2[0], p1[0] - offset);\n      }\n    }\n\n    // For the label in the third quadrant.\n    if (!top && left) {\n      p1[0] = Math.min(inflection[0], start[0] - offset);\n      if (start[1] > inflection[1]) {\n        p2[1] = p1[1];\n      } else {\n        p2[1] = inflection[1];\n        p2[0] = Math.min(p2[0], p1[0] - offset);\n      }\n    }\n\n    // For the label in the fourth quadrant.\n    if (top && left) {\n      p1[0] = Math.min(inflection[0], start[0] - offset);\n      if (start[1] < inflection[1]) {\n        p2[1] = p1[1];\n      } else {\n        p2[1] = inflection[1];\n        p2[0] = Math.min(p2[0], p1[0] - offset);\n      }\n    }\n  }\n\n  return path([start, p1, p2, inflection, end]);\n}\n\nexport const Advance = createElement((g) => {\n  const {\n    className,\n    // Do not pass className\n    class: _c,\n    transform,\n    rotate,\n    labelTransform,\n    labelTransformOrigin,\n    x,\n    y,\n    x0 = x,\n    y0 = y,\n    text,\n    background,\n    connector,\n    startMarker,\n    endMarker,\n    coordCenter,\n    innerHTML,\n    ...rest\n  } = g.attributes as TextShapeStyleProps;\n\n  g.style.transform = `translate(${x}, ${y})`;\n\n  // Position is invalid, do not render the UI,\n  // or clear previous elements.\n  if ([x, y, x0, y0].some((v) => !isNumber(v))) {\n    g.children.forEach((d) => d.remove());\n    return;\n  }\n\n  const { padding, ...backgroundStyle } = subObject(rest, 'background');\n  const { points: controlPoints = [], ...connectorStyle } = subObject(\n    rest,\n    'connector',\n  );\n\n  let textShape;\n  if (innerHTML) {\n    textShape = select(g)\n      .maybeAppend('html', 'html', className)\n      .style('zIndex', 0)\n      .style('innerHTML', innerHTML)\n      .call(applyStyle, {\n        transform: labelTransform,\n        transformOrigin: labelTransformOrigin,\n        ...rest,\n      })\n      .node();\n  } else {\n    textShape = select(g)\n      .maybeAppend('text', 'text')\n      .style('zIndex', 0)\n      .style('text', text)\n      .call(applyStyle, {\n        textBaseline: 'middle',\n        transform: labelTransform,\n        transformOrigin: labelTransformOrigin,\n        ...rest,\n      })\n      .node();\n  }\n\n  const rect = select(g)\n    .maybeAppend('background', 'rect')\n    .style('zIndex', -1)\n    .call(applyStyle, inferBackgroundBounds(textShape, padding))\n    .call(applyStyle, background ? backgroundStyle : {})\n    .node();\n\n  const left = +x0 < coordCenter[0];\n  const top = +y0 < coordCenter[1];\n  const end: [number, number] = [+x0 - +x, +y0 - +y];\n  const connectorPath = inferConnectorPath(\n    rect,\n    end,\n    controlPoints,\n    coordCenter,\n    left,\n    top,\n  );\n\n  const markerStart =\n    startMarker &&\n    new Marker({\n      id: 'startMarker',\n      style: { x: 0, y: 0, ...(subObject(rest, 'startMarker') as any) },\n    });\n  const markerEnd =\n    endMarker &&\n    new Marker({\n      id: 'endMarker',\n      style: { x: 0, y: 0, ...(subObject(rest, 'endMarker') as any) },\n    });\n  select(g)\n    .maybeAppend('connector', 'path')\n    .style('zIndex', 0)\n    .style('d', connectorPath)\n    .style('markerStart', markerStart)\n    .style('markerEnd', markerEnd)\n    .call(applyStyle, connector ? connectorStyle : {});\n});\n", "import { ShapeComponent as SC } from '../../runtime';\nimport { applyStyle } from '../../shape/utils';\nimport { select } from '../../utils/selection';\nimport { Advance } from './advance';\n\nexport type TextOptions = Record<string, any>;\n\n/**\n * @todo autoRotate when in polar coordinate\n */\nexport const Text: SC<TextOptions> = (options, context) => {\n  const { coordinate } = context;\n  return (points, value, defaults) => {\n    const { color, text = '', fontSize, rotate = 0, transform = '' } = value;\n    const textStyle = {\n      text: String(text),\n      stroke: color,\n      fill: color,\n      fontSize,\n    };\n    const [[x0, y0]] = points;\n    return select(new Advance())\n      .style('x', x0)\n      .style('y', y0)\n      .call(applyStyle, defaults)\n      .style('transform', `${transform}rotate(${+rotate})`)\n      .style('coordCenter', coordinate.getCenter())\n      .call(applyStyle, textStyle)\n      .call(applyStyle, options)\n      .node();\n  };\n};\n\nText.props = {\n  defaultMarker: 'point',\n  defaultEnterAnimation: 'fadeIn',\n  defaultUpdateAnimation: 'morphing',\n  defaultExitAnimation: 'fadeOut',\n};\n", "import { TextStyleProps, DisplayObject } from '@antv/g';\nimport { Marker } from '@antv/component';\nimport { ShapeComponent as SC, WithPrefix } from '../../runtime';\nimport { createElement } from '../../utils/createElement';\nimport { subObject } from '../../utils/helper';\nimport { select } from '../../utils/selection';\nimport { applyStyle } from '../../shape/utils';\n\nexport type BadgeOptions = BadgeShapeStyleProps & Record<string, any>;\n\ntype MarkerStyleProps<P extends string> = WithPrefix<Record<string, any>, P>;\ntype BadgeShapeStyleProps = Partial<TextStyleProps> &\n  MarkerStyleProps<'marker'>;\n\n/**\n * Get the path to draw a built-in badge, which is like a balloon.\n */\nfunction getPath(r: number) {\n  const offset = r / Math.sqrt(2);\n  const dy = r * Math.sqrt(2);\n  const [p0x, p0y] = [-offset, offset - dy];\n  const [p1x, p1y] = [0, 0];\n  const [p2x, p2y] = [offset, offset - dy];\n  return [\n    ['M', p0x, p0y],\n    ['A', r, r, 0, 1, 1, p2x, p2y],\n    ['L', p1x, p1y],\n    ['Z'],\n  ];\n}\n\nfunction inferTextPosition(shape: DisplayObject) {\n  const { min, max } = shape.getLocalBounds();\n  return [(min[0] + max[0]) * 0.5, (min[1] + max[1]) * 0.5];\n}\n\nconst BadgeShape = createElement((g) => {\n  const { class: className, x: x0, y: y0, transform, ...rest } = g.attributes;\n\n  const markerStyle = subObject(rest, 'marker');\n  const { size = 24 } = markerStyle;\n\n  const symbol = () => getPath(size / 2);\n  const bgShape = select(g)\n    .maybeAppend('marker', () => new Marker({}))\n    .call((selection) =>\n      (selection.node() as Marker).update({ symbol, ...markerStyle }),\n    )\n    .node() as DisplayObject;\n\n  const [x, y] = inferTextPosition(bgShape);\n  select(g)\n    .maybeAppend('text', 'text')\n    .style('x', x)\n    .style('y', y)\n    .call(applyStyle, rest);\n});\n\nexport const Badge: SC<BadgeOptions> = (options, context) => {\n  const { ...style } = options;\n  return (points, value, defaults) => {\n    const { color: defaultColor, ...rest } = defaults;\n    const { color = defaultColor, text = '' } = value;\n    const textStyle = {\n      text: String(text),\n      stroke: color,\n      fill: color,\n    };\n    const [[x0, y0]] = points;\n    return select(new BadgeShape())\n      .call(applyStyle, rest)\n      .style('transform', `translate(${x0},${y0})`)\n      .call(applyStyle, textStyle)\n      .call(applyStyle, style)\n      .node();\n  };\n};\n\nBadge.props = {\n  defaultMarker: 'point',\n  defaultEnterAnimation: 'fadeIn',\n  defaultUpdateAnimation: 'morphing',\n  defaultExitAnimation: 'fadeOut',\n};\n", "import { Text } from '@antv/g';\nimport { ShapeComponent as SC } from '../../runtime';\nimport { applyStyle } from '../../shape/utils';\nimport { select } from '../../utils/selection';\n\nexport type TagOptions = Record<string, any>;\n\n/**\n * @todo autoRotate when in polar coordinate\n * Tag shape for Text mark, used in wordCloud plot.\n */\nexport const Tag: SC<TagOptions> = (options, context) => {\n  const { coordinate } = context;\n  return (points, value, defaults) => {\n    const { color, text = '', fontSize, rotate = 0, transform = '' } = value;\n    const textStyle = {\n      text: String(text),\n      stroke: color,\n      fill: color,\n      fontSize,\n      textAlign: 'center',\n      textBaseline: 'middle',\n    };\n    const [[x0, y0]] = points;\n    const n = select(new Text())\n      .style('x', x0)\n      .style('y', y0)\n      .call(applyStyle, defaults)\n      .style('transformOrigin', 'center center')\n      .style('transform', `${transform}rotate(${rotate}deg)`)\n      .style('coordCenter', coordinate.getCenter())\n      .call(applyStyle, textStyle)\n      .call(applyStyle, options)\n      .node();\n    return n;\n  };\n};\n\nTag.props = {\n  defaultMarker: 'point',\n  defaultEnterAnimation: 'fadeIn',\n  defaultUpdateAnimation: 'morphing',\n  defaultExitAnimation: 'fadeOut',\n};\n", "import { area, areaRadial, CurveFactory } from '@antv/vendor/d3-shape';\nimport { select } from '../../utils/selection';\nimport { isPolar, isTranspose } from '../../utils/coordinate';\nimport { Vector2, ShapeComponent as SC } from '../../runtime';\nimport { angleWithQuadrant, sub, dist } from '../../utils/vector';\nimport { applyStyle, computeGradient, getTransform } from '../utils';\nimport { subObject } from '../../utils/helper';\nimport { createElement } from '../../utils/createElement';\n\n/**\n * Given a points sequence, split it into an array of defined points\n * and an array of undefined segments.\n *\n * Input - [p0, p1, p2, p3, p4, p5], p1 ~ p2 is `Y1`, p3 ~ p5 is `Y0`.\n * Output - When all of Y1 & Y0 is defined, move into defined points, or else undefined segments.\n */\nfunction segmentation(\n  points: Vector2[],\n  defined: (d: any) => boolean,\n): [Vector2[], [Vector2, Vector2][]] {\n  const definedPointsY1 = [];\n  const definedPointsY0 = [];\n  const segments = [];\n\n  let m = false; // Is in a undefined sequence.\n  let dp = null; // The previous defined point.\n\n  const mid = points.length / 2;\n  for (let i = 0; i < mid; i++) {\n    const y1 = points[i];\n    const y0 = points[i + mid];\n\n    // If current point is a undefined point,\n    // enter a undefined sequence.\n    if ([...y1, ...y0].some((v) => !defined(v))) m = true;\n    else {\n      definedPointsY1.push(y1);\n      definedPointsY0.push(y0);\n      // If current point is a defined point,\n      // and is in a undefined sequence, save\n      // the two closest defined points as this\n      // undefined sequence and exit it.\n      if (m && dp) {\n        m = false;\n        const [dpy1, dpy0] = dp;\n        segments.push([dpy1, y1, dpy0, y0]);\n      }\n      // Update the previous defined point.\n      dp = [y1, y0];\n    }\n  }\n  return [definedPointsY1.concat(definedPointsY0), segments];\n}\n\nexport type CurveOptions = {\n  curve?: CurveFactory;\n  gradient?: boolean | string;\n  [key: string]: any;\n};\n\nconst DoubleArea = createElement((g) => {\n  const { areaPath, connectPath, areaStyle, connectStyle } = g.attributes;\n  const document = g.ownerDocument;\n  select(g)\n    .maybeAppend('connect-path', () => document.createElement('path', {}))\n    .style('d', connectPath)\n    .call(applyStyle, connectStyle);\n  select(g)\n    .maybeAppend('area-path', () => document.createElement('path', {}))\n    .style('d', areaPath)\n    .call(applyStyle, areaStyle);\n});\n\nexport const Curve: SC<CurveOptions> = (options, context) => {\n  const {\n    curve,\n    gradient = false,\n    defined = (d) => !Number.isNaN(d) && d !== undefined && d !== null,\n    connect: connectNulls = false,\n    ...style\n  } = options;\n  const { coordinate, document } = context;\n\n  return (P, value, defaults) => {\n    const { color: defaultColor } = defaults;\n    const {\n      color = defaultColor,\n      seriesColor: sc,\n      seriesX: sx,\n      seriesY: sy,\n    } = value;\n    const tpShape = isTranspose(coordinate);\n    const transform = getTransform(coordinate, value);\n    const fill =\n      gradient && sc\n        ? computeGradient(sc, sx, sy, gradient, undefined, tpShape)\n        : color;\n\n    const finalStyle = {\n      ...defaults,\n      stroke: fill,\n      fill: fill,\n      ...(transform && { transform }),\n      ...style,\n    };\n\n    const [DP, MS] = segmentation(P, defined);\n\n    const connectStyle = subObject(finalStyle, 'connect');\n    const missing = !!MS.length;\n\n    const getPathNode = (path) => {\n      return select(document.createElement('path', {}))\n        .style('d', path || '')\n        .call(applyStyle, finalStyle)\n        .node();\n    };\n\n    if (!isPolar(coordinate)) {\n      /**\n       * Draw area shape by points.\n       */\n      const areaPath = (points) => {\n        const Y1 = points.slice(0, points.length / 2);\n        const Y0 = points.slice(points.length / 2);\n        return tpShape\n          ? area()\n              .y((_, idx) => Y1[idx][1])\n              .x1((_, idx) => Y1[idx][0])\n              .x0((_, idx) => Y0[idx][0])\n              .defined((_, idx) => [...Y1[idx], ...Y0[idx]].every(defined))\n              .curve(curve)(Y1)\n          : area()\n              .x((_, idx) => Y1[idx][0])\n              .y1((_, idx) => Y1[idx][1])\n              .y0((_, idx) => Y0[idx][1])\n              .defined((_, idx) => [...Y1[idx], ...Y0[idx]].every(defined))\n              .curve(curve)(Y1);\n      };\n\n      // Draw one area of connected defined points.\n      if (!missing || (connectNulls && !Object.keys(connectStyle).length)) {\n        return getPathNode(areaPath(DP));\n      }\n\n      // Draw one area of unconnected defined points.\n      if (missing && !connectNulls) {\n        return getPathNode(areaPath(P));\n      }\n\n      // Draw two area.\n      // One for unconnected defined points.\n      // One for connected segments.\n      return select(new DoubleArea())\n        .style('areaStyle', finalStyle)\n        .style('connectStyle', { ...connectStyle, ...style })\n        .style('areaPath', areaPath(P))\n        .style('connectPath', MS.map(areaPath).join(''))\n        .node();\n    } else {\n      /**\n       * Draw areaRadial shape by points.\n       */\n      const areaRadialPath = (points) => {\n        const center = coordinate.getCenter() as Vector2;\n        const Y1 = points.slice(0, points.length / 2);\n        const Y0 = points.slice(points.length / 2);\n\n        return areaRadial()\n          .angle((_, idx) => angleWithQuadrant(sub(Y1[idx], center)))\n          .outerRadius((_, idx) => dist(Y1[idx], center))\n          .innerRadius((_, idx) => dist(Y0[idx], center))\n          .defined((_, idx) => [...Y1[idx], ...Y0[idx]].every(defined))\n          .curve(curve)(Y0);\n      };\n\n      // Draw one area of connected defined points.\n      if (!missing || (connectNulls && !Object.keys(connectStyle).length)) {\n        return getPathNode(areaRadialPath(DP));\n      }\n\n      // Draw one area of unconnected defined points.\n      if (missing && !connectNulls) {\n        return getPathNode(areaRadialPath(P));\n      }\n\n      // Draw two area.\n      // One for unconnected defined points.\n      // One for connected segments.\n      return select(new DoubleArea())\n        .style('areaStyle', finalStyle)\n        .style('connectStyle', { ...connectStyle, ...style })\n        .style('areaPath', areaRadialPath(P))\n        .style('connectPath', MS.map(areaRadialPath).join(''))\n        .node();\n    }\n  };\n};\n\nCurve.props = {\n  defaultMarker: 'smooth',\n  defaultEnterAnimation: 'fadeIn',\n  defaultUpdateAnimation: 'morphing',\n  defaultExitAnimation: 'fadeOut',\n};\n", "import { curveLinearClosed, curveLinear } from '@antv/vendor/d3-shape';\nimport { isPolar } from '../../utils/coordinate';\nimport { ShapeComponent as SC } from '../../runtime';\nimport { Curve } from './curve';\n\nexport type AreaOptions = Record<string, any>;\n\nexport const Area: SC<AreaOptions> = (options, context) => {\n  const { coordinate } = context;\n  return (...params) => {\n    const curve = isPolar(coordinate) ? curveLinearClosed : curveLinear;\n    return Curve({ curve: curve, ...options }, context)(...params);\n  };\n};\n\nArea.props = {\n  ...Curve.props,\n  defaultMarker: 'square',\n};\n", "import {\n  curveCatmullRomClosed,\n  curveMonotoneX,\n  curveMonotoneY,\n} from '@antv/vendor/d3-shape';\nimport { isPolar, isTranspose } from '../../utils/coordinate';\nimport { ShapeComponent as SC } from '../../runtime';\nimport { Curve } from './curve';\n\nexport type SmoothOptions = Record<string, any>;\n\nexport const Smooth: SC<SmoothOptions> = (options, context) => {\n  const { ...rest } = options;\n  const { coordinate } = context;\n  return (...params) => {\n    const curve = isPolar(coordinate)\n      ? curveCatmullRomClosed\n      : isTranspose(coordinate)\n      ? curveMonotoneY\n      : curveMonotoneX;\n    return Curve({ curve, ...rest }, context)(...params);\n  };\n};\n\nSmooth.props = {\n  ...Curve.props,\n  defaultMarker: 'smooth',\n};\n", "import { curveStep } from '@antv/vendor/d3-shape';\nimport { ShapeComponent as SC } from '../../runtime';\nimport { Curve } from './curve';\n\nexport type HVHOptions = Record<string, any>;\n\nexport const HVH: SC<HVHOptions> = (options, context) => {\n  return (...params) => {\n    return Curve({ curve: curveStep, ...options }, context)(...params);\n  };\n};\n\nHVH.props = {\n  ...Curve.props,\n  defaultMarker: 'hvh',\n};\n", "import { curveStepBefore } from '@antv/vendor/d3-shape';\nimport { ShapeComponent as SC } from '../../runtime';\nimport { Curve } from './curve';\n\nexport type VHOptions = Record<string, any>;\n\nexport const VH: SC<VHOptions> = (options, context) => {\n  return (...params) => {\n    return Curve({ curve: curveStepBefore, ...options }, context)(...params);\n  };\n};\n\nVH.props = {\n  ...Curve.props,\n  defaultMarker: 'vh',\n};\n", "import { curveStepAfter } from '@antv/vendor/d3-shape';\nimport { ShapeComponent as SC } from '../../runtime';\nimport { Curve } from './curve';\n\nexport type HVOptions = Record<string, any>;\n\nexport const HV: SC<HVOptions> = (options, context) => {\n  return (...params) => {\n    return Curve({ curve: curveStepAfter, ...options }, context)(...params);\n  };\n};\n\nHV.props = {\n  ...Curve.props,\n  defaultMarker: 'hv',\n};\n", "import { ArrowOptions } from '../utils';\nimport { ShapeComponent as SC } from '../../runtime';\nimport { Vector } from '../../shape/vector/vector';\n\nexport type LinkOptions = ArrowOptions;\n\n/**\n * Connect 2 points with a single line with arrow.\n * ----->\n */\nexport const Link: SC<LinkOptions> = (options, context) => {\n  const { arrow = false } = options;\n  return (...params) => {\n    return Vector({ ...options, arrow }, context)(...params);\n  };\n};\n\nLink.props = {\n  defaultMarker: 'line',\n  defaultEnterAnimation: 'fadeIn',\n  defaultUpdateAnimation: 'morphing',\n  defaultExitAnimation: 'fadeOut',\n};\n", "import { path as d3path } from '@antv/vendor/d3-path';\nimport { applyStyle } from '../utils';\nimport { select } from '../../utils/selection';\nimport { ShapeComponent as SC } from '../../runtime';\n\nexport type SmoothOptions = Record<string, any>;\n\n/**\n * Connect 2 points with a smooth line, used in tree.\n */\nexport const Smooth: SC<SmoothOptions> = (options, context) => {\n  const { ...style } = options;\n  const { document } = context;\n  return (points, value, defaults) => {\n    const { color: defaultColor, ...rest } = defaults;\n    const { color = defaultColor, transform } = value;\n    const [from, to] = points;\n\n    const path = d3path();\n    path.moveTo(from[0], from[1]);\n    path.bezierCurveTo(\n      from[0] / 2 + to[0] / 2,\n      from[1],\n      from[0] / 2 + to[0] / 2,\n      to[1],\n      to[0],\n      to[1],\n    );\n\n    return select(document.createElement('path', {}))\n      .call(applyStyle, rest)\n      .style('d', path.toString())\n      .style('stroke', color)\n      .style('transform', transform)\n      .call(applyStyle, style)\n      .node();\n  };\n};\n\nSmooth.props = {\n  defaultMarker: 'smooth',\n  defaultEnterAnimation: 'fadeIn',\n  defaultUpdateAnimation: 'morphing',\n  defaultExitAnimation: 'fadeOut',\n};\n", "import { path as d3path } from '@antv/vendor/d3-path';\nimport { Coordinate } from '@antv/coord';\nimport { appendArc, applyStyle } from '../utils';\nimport { select } from '../../utils/selection';\nimport { isTranspose, isPolar } from '../../utils/coordinate';\nimport { Vector2, dist } from '../../utils/vector';\nimport { ShapeComponent as SC } from '../../runtime';\n\nexport type VHVOptions = {\n  /**\n   * The ratio of line corner, default: 1/3.\n   */\n  cornerRatio?: number;\n  [key: string]: any;\n};\n\n/**\n * Get vhv path in different coordinate.\n */\nfunction getVHVPath(\n  from: Vector2,\n  to: Vector2,\n  coordinate: Coordinate,\n  ratio: number,\n) {\n  const path = d3path();\n\n  if (isPolar(coordinate)) {\n    const center = coordinate.getCenter();\n\n    const a = dist(from, center);\n    const b = dist(to, center);\n    const radius = (b - a) * ratio + a;\n\n    path.moveTo(from[0], from[1]);\n    appendArc(path, from, to, center, radius);\n    path.lineTo(to[0], to[1]);\n\n    return path;\n  }\n\n  if (isTranspose(coordinate)) {\n    path.moveTo(from[0], from[1]);\n    // VHV in x.\n    path.lineTo(from[0] + (to[0] - from[0]) * ratio, from[1]);\n    path.lineTo(from[0] + (to[0] - from[0]) * ratio, to[1]);\n    path.lineTo(to[0], to[1]);\n\n    return path;\n  }\n\n  path.moveTo(from[0], from[1]);\n  // VHV in y.\n  path.lineTo(from[0], from[1] + (to[1] - from[1]) * ratio);\n  path.lineTo(to[0], from[1] + (to[1] - from[1]) * ratio);\n  path.lineTo(to[0], to[1]);\n\n  return path;\n}\n\n/**\n * Connect 2 points with a VHV line, used in tree.\n */\nexport const VHV: SC<VHVOptions> = (options, context) => {\n  const { cornerRatio = 1 / 3, ...style } = options;\n  const { coordinate, document } = context;\n  return (points, value, defaults) => {\n    const { defaultColor, ...rest } = defaults;\n    const { color = defaultColor, transform } = value;\n    const [from, to] = points;\n    const path = getVHVPath(from, to, coordinate, cornerRatio);\n    return select(document.createElement('path', {}))\n      .call(applyStyle, rest)\n      .style('d', path.toString())\n      .style('stroke', color)\n      .style('transform', transform)\n      .call(applyStyle, style)\n      .node();\n  };\n};\n\nVHV.props = {\n  defaultMarker: 'vhv',\n  defaultEnterAnimation: 'fadeIn',\n  defaultUpdateAnimation: 'morphing',\n  defaultExitAnimation: 'fadeOut',\n};\n", "import { path as d3path } from '@antv/vendor/d3-path';\nimport { appendArc, applyStyle } from '../utils';\nimport { select } from '../../utils/selection';\nimport { isPolar } from '../../utils/coordinate';\nimport { dist, mid } from '../../utils/vector';\nimport { ShapeComponent as SC } from '../../runtime';\n\nexport type ArcOptions = Record<string, any>;\n\n/**\n * Connect points for 2 points:\n * - In rect, draw half circle.\n * - In polar, draw quadratic curve.\n */\nexport const Arc: SC<ArcOptions> = (options, context) => {\n  const { ...style } = options;\n  const { coordinate, document } = context;\n  return (points, value, defaults) => {\n    const { color: defaultColor, ...rest } = defaults;\n\n    const { color = defaultColor, transform } = value;\n    const [from, to] = points;\n\n    const path = d3path();\n    path.moveTo(from[0], from[1]);\n\n    if (isPolar(coordinate)) {\n      const center = coordinate.getCenter();\n      path.quadraticCurveTo(center[0], center[1], to[0], to[1]);\n    } else {\n      const center = mid(from, to);\n      const raduis = dist(from, to) / 2;\n      appendArc(path, from, to, center, raduis);\n    }\n\n    return select(document.createElement('path', {}))\n      .call(applyStyle, rest)\n      .style('d', path.toString())\n      .style('stroke', color)\n      .style('transform', transform)\n      .call(applyStyle, style)\n      .node();\n  };\n};\n\nArc.props = {\n  defaultMarker: 'smooth',\n  defaultEnterAnimation: 'fadeIn',\n  defaultUpdateAnimation: 'morphing',\n  defaultExitAnimation: 'fadeOut',\n};\n", "import { Band } from '@antv/scale';\nimport { Primitive } from '@antv/vendor/d3-array';\nimport { Vector2 } from '@antv/coord';\nimport { Scale } from '../runtime/types/component';\nimport { Channel } from '../runtime';\nimport { MaybeKey, MaybeTitle, MaybeTooltip } from '../transform';\n\nexport type ChannelOptions = {\n  shapes?: (string | { (...args: any[]); props?: Record<string, any> })[];\n};\n\nexport function baseChannels(options: ChannelOptions = {}): Channel[] {\n  const { shapes } = options;\n  return [\n    { name: 'color' },\n    { name: 'opacity' },\n    { name: 'shape', range: shapes },\n    { name: 'enterType' },\n    { name: 'enterDelay', scaleKey: 'enter' },\n    { name: 'enterDuration', scaleKey: 'enter' },\n    { name: 'enterEasing' },\n    { name: 'key', scale: 'identity' },\n    { name: 'groupKey', scale: 'identity' },\n    { name: 'label', scale: 'identity' },\n  ];\n}\n\nexport function baseGeometryChannels(options: ChannelOptions = {}): Channel[] {\n  return [...baseChannels(options), { name: 'title', scale: 'identity' }];\n}\n\nexport function tooltip3d() {\n  return [\n    { type: MaybeTitle, channel: 'color' },\n    { type: MaybeTooltip, channel: ['x', 'y', 'z'] },\n  ];\n}\n\nexport function tooltip2d() {\n  return [\n    { type: MaybeTitle, channel: 'color' },\n    { type: MaybeTooltip, channel: ['x', 'y'] },\n  ];\n}\n\nexport function tooltip1d() {\n  return [\n    { type: MaybeTitle, channel: 'x' },\n    { type: MaybeTooltip, channel: ['y'] },\n  ];\n}\n\nexport function tooltipXd() {\n  return [\n    { type: MaybeTitle, channel: 'color' },\n    { type: MaybeTooltip, channel: ['position'] },\n  ];\n}\n\nexport function baseAnnotationChannels(\n  options: ChannelOptions = {},\n): Channel[] {\n  return baseChannels(options);\n}\n\nexport function basePreInference() {\n  return [{ type: MaybeKey }];\n}\n\nexport function basePostInference() {\n  return [];\n}\n\nexport function bandWidth(scale: Band, x: any): number {\n  return scale.getBandWidth(scale.invert(x));\n}\n\nexport function createBandOffset(\n  scale: Record<string, Scale>,\n  value: Record<string, Primitive[]>,\n  options: Record<string, any> = {},\n): (d: [number, number], i?: number) => [number, number] {\n  const { x: X, y: Y, series: S } = value;\n  const { x, y, series } = scale;\n  const {\n    style: {\n      bandOffset = series ? 0 : 0.5,\n      bandOffsetX = bandOffset,\n      bandOffsetY = bandOffset,\n    } = {},\n  } = options;\n  const isBandX = !!x?.getBandWidth;\n  const isBandY = !!y?.getBandWidth;\n  const isSeries = !!series?.getBandWidth;\n  if (!isBandX && !isBandY) return (d) => d;\n  return (d, i) => {\n    const widthX = isBandX ? bandWidth(x as Band, X[i]) : 0;\n    const widthY = isBandY ? bandWidth(y as Band, Y[i]) : 0;\n    const f = () => (bandWidth(series as Band, S[i]) / 2 + +S[i]) * widthX;\n    const offset = isSeries && S ? f() : 0;\n    const [x0, y0] = d;\n    return [x0 + bandOffsetX * widthX + offset, y0 + bandOffsetY * widthY];\n  };\n}\n\nexport function p(d) {\n  return parseFloat(d) / 100;\n}\n\nexport function visualMark(index: number[], scale, value, coordinate) {\n  const { x: X, y: Y } = value;\n  const { innerWidth, innerHeight } = coordinate.getOptions();\n  const P: Vector2[][] = Array.from(index, (i) => {\n    const x0 = X[i];\n    const y0 = Y[i];\n    const x = typeof x0 === 'string' ? p(x0) * innerWidth : +x0;\n    const y = typeof y0 === 'string' ? p(y0) * innerHeight : +y0;\n    return [[x, y]];\n  });\n  return [index, P];\n}\n\ntype Encode = 'string' | ((d: any) => any);\n\nexport function field(encode: Encode): (d: any) => any {\n  return typeof encode === 'function' ? encode : (d) => d[encode];\n}\n\nexport function valueof(data: Record<string, any>[], encode: Encode): any[] {\n  return Array.from(data, field(encode));\n}\n\n/**\n * Normalizes data input for graph charts (sankey, chord, forceGraph) to ensure consistent format\n * Supports both array input (like other charts) and object input (original format)\n *\n * @param data - Input data, can be array or object with links/nodes properties\n * @returns Normalized data object with links and optional nodes properties\n */\nfunction normalizeGraphData(data: any): { links: any[]; nodes?: any[] } {\n  // Handle array input - convert to { links: data } format\n  if (Array.isArray(data)) {\n    return { links: data };\n  }\n\n  // Handle object input - return as is (original format)\n  if (data && typeof data === 'object') {\n    return {\n      links: data.links || [],\n      nodes: data.nodes,\n    };\n  }\n\n  // Handle null/undefined and unexpected input types\n  return { links: [] };\n}\n\nexport function initializeData(\n  data: { nodes?: any[]; links: any[] },\n  encode: Record<string, Encode>,\n): {\n  links: { target: string; source: string; value: any }[];\n  nodes: { key: string }[];\n} {\n  const normalizedData = normalizeGraphData(data);\n  const {\n    source = (d) => d.source,\n    target = (d) => d.target,\n    value = (d) => d.value,\n  } = encode;\n\n  const { links, nodes } = normalizedData;\n\n  // Early return for empty links\n  if (!links.length) {\n    return {\n      links: [],\n      nodes: nodes || [],\n    };\n  }\n\n  const LS = valueof(links, source);\n  const LT = valueof(links, target);\n  const LV = valueof(links, value);\n\n  return {\n    links: links.map((_, i) => ({\n      target: LT[i],\n      source: LS[i],\n      value: LV[i],\n    })),\n    nodes: nodes || Array.from(new Set([...LS, ...LT]), (key) => ({ key })),\n  };\n}\n", "import { ShapeComponent as SC } from '../../runtime';\nimport { applyStyle } from '../utils';\nimport { select } from '../../utils/selection';\nimport { p } from '../../mark/utils';\n\nexport type ImageOptions = Record<string, any>;\n\nexport const Image: SC<ImageOptions> = (options, context) => {\n  const { coordinate, document } = context;\n  return (points, value, defaults) => {\n    const { color: defaultColor, ...rest } = defaults;\n    const { color = defaultColor, src = '', size = 32, transform = '' } = value;\n    let { width = size, height = size } = options;\n    const [[x0, y0]] = points;\n\n    // Support percentage width, height.\n    const [w, h] = coordinate.getSize();\n    width = typeof width === 'string' ? p(width) * w : width;\n    height = typeof height === 'string' ? p(height) * h : height;\n\n    const x = x0 - Number(width) / 2;\n    const y = y0 - Number(height) / 2;\n\n    return select(document.createElement('image', {}))\n      .call(applyStyle, rest)\n      .style('x', x)\n      .style('y', y)\n      .style('src', src)\n      .style('stroke', color)\n      .style('transform', transform)\n      .call(applyStyle, options)\n      .style('width', width)\n      .style('height', height)\n      .node();\n  };\n};\n\nImage.props = {\n  defaultEnterAnimation: 'fadeIn',\n  defaultUpdateAnimation: 'morphing',\n  defaultExitAnimation: 'fadeOut',\n};\n", "import { Coordinate } from '@antv/coord';\nimport { path as d3path } from '@antv/vendor/d3-path';\nimport { isPolar } from '../../utils/coordinate';\nimport { applyStyle, appendPolygon, appendArc } from '../utils';\nimport { select } from '../../utils/selection';\nimport { dist } from '../../utils/vector';\nimport { ShapeComponent as SC, Vector2 } from '../../runtime';\n\nexport type PolygonOptions = Record<string, any>;\n\nfunction getPolygonPath(points: Vector2[], coordinate: Coordinate) {\n  const path = d3path();\n  // In polar, draw arc.\n  if (isPolar(coordinate)) {\n    const center = coordinate.getCenter();\n    const closedPoints = [...points, points[0]];\n    // Calculate dist array for cache.\n    const dists = closedPoints.map((p) => dist(p, center));\n\n    closedPoints.forEach((curr, idx) => {\n      if (idx === 0) {\n        path.moveTo(curr[0], curr[1]);\n        return;\n      }\n      const currDist = dists[idx];\n      const prev = points[idx - 1];\n      const prevDist = dists[idx - 1];\n\n      // When radius is equal, draw 2 point with arc.\n      // todo: choose a minimum value.\n      if (prevDist !== undefined && Math.abs(currDist - prevDist) < 1e-10) {\n        appendArc(path, prev, curr, center, currDist);\n      } else {\n        path.lineTo(curr[0], curr[1]);\n      }\n    });\n    path.closePath();\n\n    return path;\n  }\n\n  // In rect, draw polygon.\n  return appendPolygon(path, points);\n}\n\nexport const Polygon: SC<PolygonOptions> = (options, context) => {\n  const { coordinate, document } = context;\n  return (points, value, defaults) => {\n    const { color: defaultColor, ...rest } = defaults;\n    const { color = defaultColor, transform } = value;\n    const path = getPolygonPath(points, coordinate);\n    return select(document.createElement('path', {}))\n      .call(applyStyle, rest)\n      .style('d', path.toString())\n      .style('stroke', color)\n      .style('fill', color)\n      .style('transform', transform)\n      .call(applyStyle, options)\n      .node();\n  };\n};\n\nPolygon.props = {\n  defaultMarker: 'square',\n  defaultEnterAnimation: 'fadeIn',\n  defaultUpdateAnimation: 'morphing',\n  defaultExitAnimation: 'fadeOut',\n};\n", "import { path as d3path } from '@antv/vendor/d3-path';\nimport { Coordinate } from '@antv/coord';\nimport { appendArc, applyStyle } from '../utils';\nimport { select } from '../../utils/selection';\nimport { isPolar } from '../../utils/coordinate';\nimport { dist } from '../../utils/vector';\nimport { ShapeComponent as SC, Vector2 } from '../../runtime';\n\n/**\n * p0                          p2\n *    \n *                          \n *                          \n * p1  p3\n */\nexport type RibbonOptions = Record<string, any>;\n\nfunction getRibbonPath(points: Vector2[], coordinate: Coordinate) {\n  const [p0, p1, p2, p3] = points;\n  const path = d3path();\n\n  // In polar, draw shape only for Chord.\n  if (isPolar(coordinate)) {\n    const center = coordinate.getCenter();\n    const radius = dist(center, p0);\n\n    path.moveTo(p0[0], p0[1]);\n    // p0 -> p2\n    path.quadraticCurveTo(center[0], center[1], p2[0], p2[1]);\n    // p2 -> p3\n    appendArc(path, p2, p3, center, radius);\n    // p3 -> p1\n    path.quadraticCurveTo(center[0], center[1], p1[0], p1[1]);\n    // p1 -> p0\n    appendArc(path, p1, p0, center, radius);\n    path.closePath();\n\n    return path;\n  }\n\n  // In Rect, draw shape for Sankey.\n  path.moveTo(p0[0], p0[1]);\n  path.bezierCurveTo(\n    p0[0] / 2 + p2[0] / 2,\n    p0[1],\n    p0[0] / 2 + p2[0] / 2,\n    p2[1],\n    p2[0],\n    p2[1],\n  );\n  path.lineTo(p3[0], p3[1]);\n  path.bezierCurveTo(\n    p3[0] / 2 + p1[0] / 2,\n    p3[1],\n    p3[0] / 2 + p1[0] / 2,\n    p1[1],\n    p1[0],\n    p1[1],\n  );\n  path.lineTo(p0[0], p0[1]);\n\n  path.closePath();\n\n  return path;\n}\n\n/**\n * Connect points for 4 points:\n * - In rect, draw ribbon used in Sankey.\n * - In polar, draw arc used in Chord.\n */\nexport const Ribbon: SC<RibbonOptions> = (options, context) => {\n  const { ...style } = options;\n  const { coordinate, document } = context;\n  return (points, value, defaults) => {\n    const { color: defaultColor, ...rest } = defaults;\n    const { color = defaultColor, transform } = value;\n    const path = getRibbonPath(points, coordinate);\n    return select(document.createElement('path', {}))\n      .call(applyStyle, rest)\n      .style('d', path.toString())\n      .style('fill', color || defaultColor)\n      .style('stroke', color || defaultColor)\n      .style('transform', transform)\n      .call(applyStyle, style)\n      .node();\n  };\n};\n\nRibbon.props = {\n  defaultMarker: 'square',\n  defaultEnterAnimation: 'fadeIn',\n  defaultUpdateAnimation: 'morphing',\n  defaultExitAnimation: 'fadeOut',\n};\n", "import { path as d3path } from '@antv/vendor/d3-path';\nimport { Coordinate } from '@antv/coord';\nimport { applyStyle } from '../utils';\nimport { select } from '../../utils/selection';\nimport { ShapeComponent as SC, Vector2 } from '../../runtime';\nimport { isPolar } from '../../utils/coordinate';\nimport { angle, sub, dist } from '../../utils/vector';\n\nexport type BoxOptions = Record<string, any>;\n\nfunction getPath(points: Vector2[], coordinate: Coordinate) {\n  const path = d3path();\n\n  if (!isPolar(coordinate)) {\n    path.moveTo(...points[0]);\n    path.lineTo(...points[1]);\n\n    path.moveTo(...points[2]);\n    path.lineTo(...points[3]);\n\n    path.moveTo(...points[4]);\n    path.lineTo(...points[5]);\n    path.lineTo(...points[6]);\n    path.lineTo(...points[7]);\n    path.closePath();\n\n    path.moveTo(...points[8]);\n    path.lineTo(...points[9]);\n\n    path.moveTo(...points[10]);\n    path.lineTo(...points[11]);\n\n    path.moveTo(...points[12]);\n    path.lineTo(...points[13]);\n  } else {\n    // In polar coordinate.\n    const center = coordinate.getCenter();\n    const [x, y] = center;\n    const startAngle = angle(sub(points[0], center));\n    const endAngle = angle(sub(points[1], center));\n\n    const radiusHigh = dist(center, points[2]);\n    const radiusQ3 = dist(center, points[3]);\n    const radiusMedian = dist(center, points[8]);\n    const radiusQ1 = dist(center, points[10]);\n    const radiusLow = dist(center, points[11]);\n\n    path.moveTo(...points[0]);\n    path.arc(x, y, radiusHigh, startAngle, endAngle);\n    path.arc(x, y, radiusHigh, endAngle, startAngle, true);\n\n    path.moveTo(...points[2]);\n    path.lineTo(...points[3]);\n\n    path.moveTo(...points[4]);\n    path.arc(x, y, radiusQ3, startAngle, endAngle); // 4 -> 5\n    path.lineTo(...points[6]); // 5 -> 6\n    path.arc(x, y, radiusQ1, endAngle, startAngle, true); // 6 -> 7\n    path.closePath();\n\n    path.moveTo(...points[8]);\n    path.arc(x, y, radiusMedian, startAngle, endAngle); // 8 -> 9\n    path.arc(x, y, radiusMedian, endAngle, startAngle, true); // 9 -> 8\n\n    path.moveTo(...points[10]);\n    path.lineTo(...points[11]);\n\n    path.moveTo(...points[12]);\n    path.arc(x, y, radiusLow, startAngle, endAngle); // 12 -> 13\n    path.arc(x, y, radiusLow, endAngle, startAngle, true); // 13 -> 12\n  }\n  return path;\n}\n\nexport const Box: SC<BoxOptions> = (options, context) => {\n  const { coordinate, document } = context;\n  return (points, value, defaults) => {\n    const { color, transform } = value;\n    const {\n      color: defaultColor,\n      fill = defaultColor,\n      stroke = defaultColor,\n      ...rest\n    } = defaults;\n\n    const path = getPath(points, coordinate);\n\n    return select(document.createElement('path', {}))\n      .call(applyStyle, rest)\n      .style('d', path.toString())\n      .style('stroke', stroke)\n      .style('fill', color || fill)\n      .style('transform', transform)\n      .call(applyStyle, options)\n      .node();\n  };\n};\n\nBox.props = {\n  defaultMarker: 'point',\n  defaultEnterAnimation: 'fadeIn',\n  defaultUpdateAnimation: 'morphing',\n  defaultExitAnimation: 'fadeOut',\n};\n", "import { path as d3path } from '@antv/vendor/d3-path';\nimport { Coordinate } from '@antv/coord';\nimport { applyStyle } from '../utils';\nimport { select } from '../../utils/selection';\nimport { ShapeComponent as SC, Vector2 } from '../../runtime';\nimport { isPolar } from '../../utils/coordinate';\nimport { angle, sub, dist } from '../../utils/vector';\n\nexport type ViolinOptions = Record<string, any>;\n\nfunction getPath(p: Vector2[], coordinate: Coordinate, size = 4) {\n  const path = d3path();\n\n  if (!isPolar(coordinate)) {\n    path.moveTo(...p[2]);\n    path.lineTo(...p[3]);\n\n    path.lineTo(p[3][0] - size, p[3][1]);\n    path.lineTo(p[10][0] - size, p[10][1]);\n    path.lineTo(p[10][0] + size, p[10][1]);\n    path.lineTo(p[3][0] + size, p[3][1]);\n    path.lineTo(...p[3]);\n    path.closePath();\n\n    path.moveTo(...p[10]);\n    path.lineTo(...p[11]);\n\n    path.moveTo(p[3][0] + size / 2, p[8][1]);\n    path.arc(p[3][0], p[8][1], size / 2, 0, Math.PI * 2);\n    path.closePath();\n\n    return path;\n  }\n\n  const center = coordinate.getCenter();\n  const [x, y] = center;\n\n  const radiusQ3 = dist(center, p[3]);\n  const radiusMedian = dist(center, p[8]);\n  const radiusQ1 = dist(center, p[10]);\n\n  const middleAngle = angle(sub(p[2], center));\n  const rectAngle = Math.asin(size / radiusMedian);\n  const startAngle = middleAngle - rectAngle;\n  const endAngle = middleAngle + rectAngle;\n\n  path.moveTo(...p[2]);\n  path.lineTo(...p[3]);\n\n  path.moveTo(\n    Math.cos(startAngle) * radiusQ3 + x,\n    Math.sin(startAngle) * radiusQ3 + y,\n  );\n  path.arc(x, y, radiusQ3, startAngle, endAngle);\n  path.lineTo(\n    Math.cos(endAngle) * radiusQ1 + x,\n    Math.sin(endAngle) * radiusQ1 + y,\n  );\n  path.arc(x, y, radiusQ1, endAngle, startAngle, true);\n  path.lineTo(\n    Math.cos(startAngle) * radiusQ3 + x,\n    Math.sin(startAngle) * radiusQ3 + y,\n  );\n  path.closePath();\n\n  path.moveTo(...p[10]);\n  path.lineTo(...p[11]);\n\n  const a = (startAngle + endAngle) / 2;\n\n  path.moveTo(\n    Math.cos(a) * (radiusMedian + size / 2) + x,\n    Math.sin(a) * (radiusMedian + size / 2) + y,\n  );\n  path.arc(\n    Math.cos(a) * radiusMedian + x,\n    Math.sin(a) * radiusMedian + y,\n    size / 2,\n    a,\n    Math.PI * 2 + a,\n  );\n  path.closePath();\n\n  return path;\n}\n\nexport const Violin: SC<ViolinOptions> = (options, context) => {\n  const { coordinate, document } = context;\n  return (points, value, defaults) => {\n    const { color, transform } = value;\n    // TODO: how to setting it by size channel.\n    const size = 4;\n    const {\n      color: defaultColor,\n      fill = defaultColor,\n      stroke = defaultColor,\n      ...rest\n    } = defaults;\n    const path = getPath(points, coordinate, size);\n    return select(document.createElement('path', {}))\n      .call(applyStyle, rest)\n      .style('d', path.toString())\n      .style('stroke', stroke)\n      .style('fill', color || fill)\n      .style('transform', transform)\n      .call(applyStyle, options)\n      .node();\n  };\n};\n\nViolin.props = {\n  defaultMarker: 'point',\n  defaultEnterAnimation: 'fadeIn',\n  defaultUpdateAnimation: 'morphing',\n  defaultExitAnimation: 'fadeOut',\n};\n", "import { IDocument } from '@antv/g';\nimport { Coordinate } from '@antv/coord';\nimport { arc, line } from '@antv/vendor/d3-shape';\nimport { isPolar } from '../../utils/coordinate';\nimport { select } from '../../utils/selection';\nimport { dist } from '../../utils/vector';\nimport { subObject } from '../../utils/helper';\nimport { Primitive, ShapeComponent as SC, Vector2 } from '../../runtime';\nimport { applyStyle } from '../utils';\n\nexport type LineOptions = {\n  /**\n   * Whether show arrow.\n   */\n  arrow?: boolean;\n  /**\n   * Arrow size(px), default is 4px.\n   */\n  arrowSize?: number;\n  /**\n   * Fill color of arrow.\n   */\n  arrowFill?: string;\n  /**\n   * Stroke color of arrow.\n   */\n  arrowStroke?: string;\n  /**\n   * Others.\n   */\n  [key: string]: any;\n};\n\nfunction getArrowMarker(\n  document: IDocument,\n  arrowSize: number,\n  arrowStyle: any,\n) {\n  const arrowMarker = document.createElement('path', {\n    style: {\n      d: `M ${arrowSize},${arrowSize} L -${arrowSize},0 L ${arrowSize},-${arrowSize} L 0,0 Z`,\n      transformOrigin: 'center',\n      ...arrowStyle,\n    },\n  });\n  return arrowMarker;\n}\n\nfunction getPath(points: Vector2[], coordinate: Coordinate) {\n  if (!isPolar(coordinate))\n    return line()\n      .x((d) => d[0])\n      .y((d) => d[1])(points);\n\n  const center = coordinate.getCenter();\n  return arc()({\n    startAngle: 0,\n    endAngle: Math.PI * 2,\n    outerRadius: dist(points[0], center),\n    innerRadius: dist(points[1], center),\n  });\n}\n\nfunction getTransform(coordinate: Coordinate, transform?: Primitive) {\n  if (!isPolar(coordinate)) return transform;\n\n  const [cx, cy] = coordinate.getCenter();\n  return `translate(${cx}, ${cy}) ${transform || ''}`;\n}\n\nexport const Line: SC<LineOptions> = (options, context) => {\n  const { arrow, arrowSize = 4, ...style } = options;\n  const { coordinate, document } = context;\n  return (points, value, defaults) => {\n    const { color: defaultColor, lineWidth, ...shapeTheme } = defaults;\n    const { color = defaultColor, size = lineWidth } = value;\n\n    const arrowMarker = arrow\n      ? getArrowMarker(document, arrowSize, {\n          fill: style.stroke || color,\n          stroke: style.stroke || color,\n          ...subObject(style, 'arrow'),\n        })\n      : null;\n\n    const path = getPath(points, coordinate);\n    const transform = getTransform(coordinate, value.transform);\n\n    return select(document.createElement('path', {}))\n      .call(applyStyle, shapeTheme)\n      .style('d', path)\n      .style('stroke', color)\n      .style('lineWidth', size)\n      .style('transform', transform)\n      .style('markerEnd', arrowMarker)\n      .call(applyStyle, style)\n      .node();\n  };\n};\n\nLine.props = {\n  defaultMarker: 'line',\n  defaultEnterAnimation: 'fadeIn',\n  defaultUpdateAnimation: 'morphing',\n  defaultExitAnimation: 'fadeOut',\n};\n", "import { Coordinate } from '@antv/coord';\nimport type { PathArray } from '@antv/util';\nimport { PathStyleProps, Path } from '@antv/g';\nimport { Marker } from '@antv/component';\nimport { line as d3line } from '@antv/vendor/d3-shape';\nimport { ShapeComponent as SC, Vector2, WithPrefix } from '../../runtime';\nimport { isTranspose } from '../../utils/coordinate';\nimport { subObject } from '../../utils/helper';\nimport { select } from '../../utils/selection';\nimport { applyStyle } from '../utils';\n\nexport type ConnectorOptions = ConnectorPathStyleProps & Record<string, any>;\n\ntype MarkerStyleProps<P extends string> = WithPrefix<Record<string, any>, P>;\n\ntype ConnectorPathStyleProps = Omit<PathStyleProps, 'path'> &\n  MarkerStyleProps<'endMarker'> & {\n    connectorPath?: PathArray[];\n    endMarker?: boolean;\n  };\n\nfunction inferSymbol(x: number, y: number, r: number) {\n  return [['M', x, y], ['L', x + 2 * r, y - r], ['L', x + 2 * r, y + r], ['Z']];\n}\n\n/**\n * @todo support polar later.\n */\nfunction inferConnectorPath(points: Vector2[]) {\n  return d3line()\n    .x((d) => d[0])\n    .y((d) => d[1])(points);\n}\n\nfunction getPoints(\n  coordinate: Coordinate,\n  points: Vector2[],\n  sourceOffsetY: number,\n  targetOffsetY: number,\n  sourceOffsetX: number,\n  targetOffsetX: number,\n  length1 = 0,\n): Vector2[] {\n  const [[x0, y0], [x1, y1]] = points;\n\n  if (isTranspose(coordinate)) {\n    const X0 = x0 + sourceOffsetY;\n    const X1 = x1 + targetOffsetY;\n    const X = X0 + length1;\n    const Y0 = y0 + sourceOffsetX;\n    const Y1 = y1 + targetOffsetX;\n    return [\n      [X0, Y0],\n      [X, Y0],\n      [X, Y1],\n      [X1, Y1],\n    ];\n  }\n\n  const Y0 = y0 - sourceOffsetY;\n  const Y1 = y1 - targetOffsetY;\n  const Y = Y0 - length1;\n  const X0 = x0 - sourceOffsetX;\n  const X1 = x1 - targetOffsetX;\n  return [\n    [X0, Y0],\n    [X0, Y],\n    [X1, Y],\n    [X1, Y1],\n  ];\n}\n\nexport const Connector: SC<ConnectorOptions> = (options, context) => {\n  const {\n    offsetX = 0,\n    sourceOffsetX = offsetX,\n    targetOffsetX = offsetX,\n    offsetY = 0,\n    sourceOffsetY = offsetY,\n    targetOffsetY = offsetY,\n    connectLength1: length1,\n    endMarker = true,\n    ...style\n  } = options;\n  const { coordinate } = context;\n\n  return (points, value, defaults) => {\n    const { color: defaultColor, connectLength1, ...rest } = defaults;\n    const { color, transform } = value;\n    const P = getPoints(\n      coordinate,\n      points,\n      sourceOffsetY,\n      targetOffsetY,\n      sourceOffsetX,\n      targetOffsetX,\n      length1 ?? connectLength1,\n    );\n    const makerStyle = subObject({ ...style, ...defaults }, 'endMarker');\n\n    return select(new Path())\n      .call(applyStyle, rest)\n      .style('d', inferConnectorPath(P))\n      .style('stroke', color || defaultColor)\n      .style('transform', transform)\n      .style(\n        'markerEnd',\n        endMarker\n          ? new Marker({\n              className: 'marker',\n              style: {\n                ...makerStyle,\n                symbol: inferSymbol,\n              },\n            })\n          : null,\n      )\n      .call(applyStyle, style)\n      .node();\n  };\n};\n\nConnector.props = {\n  defaultMarker: 'line',\n  defaultEnterAnimation: 'fadeIn',\n  defaultUpdateAnimation: 'morphing',\n  defaultExitAnimation: 'fadeOut',\n};\n", "export { area } from './area';\nexport { bottom } from './bottom';\nexport { bottomLeft } from './bottomLeft';\nexport { bottomRight } from './bottomRight';\nexport { inside } from './inside';\nexport { left } from './left';\nexport { outside } from './outside';\nexport { right } from './right';\nexport { spider } from './spider';\nexport { surround } from './surround';\nexport { top } from './top';\nexport { topLeft } from './topLeft';\nexport { topRight } from './topRight';\n", "import { maxIndex } from '@antv/vendor/d3-array';\nimport { Coordinate } from '@antv/coord';\nimport { Vector2 } from '../../../runtime';\nimport { sub, angle } from '../../../utils/vector';\nimport { LabelPosition } from './default';\n\n/**\n * Only for Area label.\n */\nexport function area(\n  position: LabelPosition,\n  points: Vector2[],\n  value: Record<string, any>,\n  coordinate: Coordinate,\n) {\n  const l = points.length / 2;\n  const Y1 = points.slice(0, l);\n  const Y0 = points.slice(l);\n  // Get the maximal space for label.\n  let idx = maxIndex(Y1, (p, i) => Math.abs(p[1] - Y0[i][1]));\n  // Do not show label at first and last.\n  idx = Math.max(Math.min(idx, l - 2), 1);\n\n  const mid = (i: number): Vector2 => [Y1[i][0], (Y1[i][1] + Y0[i][1]) / 2];\n  const point = mid(idx);\n  const prev = mid(idx - 1);\n  const next = mid(idx + 1);\n\n  // todo: G rotate only support deg.\n  const rotate = (angle(sub(next, prev)) / Math.PI) * 180;\n\n  return {\n    x: point[0],\n    y: point[1],\n    transform: `rotate(${rotate})`,\n    textAlign: 'center',\n    textBaseline: 'middle',\n  };\n}\n", "import { Coordinate } from '@antv/coord';\nimport { Vector2 } from '../../../runtime';\nimport { getArcObject } from '../../../shape/utils';\nimport { isCircular, isRadial } from '../../../utils/coordinate';\nimport { maybePercentage } from '../../../utils/helper';\nimport { mid } from '../../../utils/vector';\n\nexport type LabelPosition =\n  | 'top'\n  | 'left'\n  | 'right'\n  | 'bottom'\n  | 'top-left'\n  | 'top-right'\n  | 'bottom-left'\n  | 'bottom-right'\n  | 'inside'\n  | 'outside'\n  | 'area'\n  | 'spider'\n  | 'surround';\n\nexport function inferNonCircularStyle(\n  position: LabelPosition,\n  points: Vector2[],\n  value: Record<string, any>,\n  coordinate: Coordinate,\n) {\n  const { bounds } = value;\n  const [[x0, y0], [x1, y1]] = bounds;\n  const w = x1 - x0;\n  const h = y1 - y0;\n  const xy = (options) => {\n    const { x: ox, y: oy } = options;\n    const px = maybePercentage(value.x, w);\n    const py = maybePercentage(value.y, h);\n    return {\n      ...options,\n      x: (px || ox) + x0,\n      y: (py || oy) + y0,\n    };\n  };\n  // 4 direction.\n  if (position === 'left')\n    return xy({ x: 0, y: h / 2, textAlign: 'start', textBaseline: 'middle' });\n  if (position === 'right')\n    return xy({ x: w, y: h / 2, textAlign: 'end', textBaseline: 'middle' });\n  if (position === 'top')\n    return xy({ x: w / 2, y: 0, textAlign: 'center', textBaseline: 'top' });\n  if (position === 'bottom')\n    return xy({ x: w / 2, y: h, textAlign: 'center', textBaseline: 'bottom' });\n  // 4 corner position.\n  if (position === 'top-left')\n    return xy({ x: 0, y: 0, textAlign: 'start', textBaseline: 'top' });\n  if (position === 'top-right')\n    return xy({ x: w, y: 0, textAlign: 'end', textBaseline: 'top' });\n  if (position === 'bottom-left')\n    return xy({ x: 0, y: h, textAlign: 'start', textBaseline: 'bottom' });\n  if (position === 'bottom-right')\n    return xy({ x: w, y: h, textAlign: 'end', textBaseline: 'bottom' });\n  // default return 'inside'\n  return xy({\n    x: w / 2,\n    y: h / 2,\n    textAlign: 'center',\n    textBaseline: 'middle',\n  });\n}\n\nexport function inferRadialStyle(\n  position: LabelPosition,\n  points: Vector2[],\n  value: Record<string, any>,\n  coordinate: Coordinate,\n) {\n  const { y, y1, autoRotate, rotateToAlignArc } = value;\n  const center = coordinate.getCenter();\n  const arcObject = getArcObject(coordinate, points, [y, y1]);\n\n  const { innerRadius, outerRadius, startAngle, endAngle } = arcObject;\n  const angle = position === 'inside' ? (startAngle + endAngle) / 2 : endAngle;\n  const rotate = inferRotation(angle, autoRotate, rotateToAlignArc);\n\n  const point = (() => {\n    const [p0, p1] = points;\n    const radius = innerRadius + (outerRadius - innerRadius) * 0.5;\n    const [x, y] =\n      position === 'inside' ? pointOfArc(center, angle, radius) : mid(p0, p1);\n    return { x, y };\n  })();\n\n  return {\n    ...point,\n    textAlign: position === 'inside' ? 'center' : 'start',\n    textBaseline: 'middle',\n    rotate,\n  };\n}\n\nexport function pointOfArc(center: Vector2, angle, radius): Vector2 {\n  return [\n    center[0] + Math.sin(angle) * radius,\n    center[1] - Math.cos(angle) * radius,\n  ];\n}\n\nexport function inferRotation(angle, autoRotate, rotateToAlignArc) {\n  if (!autoRotate) return 0;\n\n  const append = rotateToAlignArc ? 0 : Math.sin(angle) < 0 ? 90 : -90;\n  return (angle / Math.PI) * 180 + append;\n}\n\nfunction inferInnerCircularStyle(\n  position: LabelPosition,\n  points: Vector2[],\n  value: Record<string, any>,\n  coordinate: Coordinate,\n) {\n  const {\n    y,\n    y1,\n    autoRotate,\n    rotateToAlignArc,\n    radius: radiusRatio = 0.5,\n    offset = 0,\n  } = value;\n  const arcObject = getArcObject(coordinate, points, [y, y1]);\n  const { startAngle, endAngle } = arcObject;\n  const center = coordinate.getCenter();\n\n  const angle = (startAngle + endAngle) / 2;\n  const rotate = inferRotation(angle, autoRotate, rotateToAlignArc);\n\n  const textStyle = { textAlign: 'center', textBaseline: 'middle', rotate };\n  const { innerRadius, outerRadius } = arcObject;\n  const r0 = innerRadius + (outerRadius - innerRadius) * radiusRatio;\n  const r1 = r0 + offset;\n  const [x0, y0] = pointOfArc(center, angle, r1);\n\n  return {\n    x: x0,\n    y: y0,\n    ...textStyle,\n  };\n}\n\n// Set to null will not be set with default value as below.\n// const { x = 0 } = options;\nfunction maybeUndefined(d) {\n  return d === undefined ? null : d;\n}\n\nexport function inferIdentityStyle(position, points, value, coordinate) {\n  const { bounds } = value;\n  const [p] = bounds;\n  return {\n    x: maybeUndefined(p[0]),\n    y: maybeUndefined(p[1]),\n  };\n}\n\nexport function getDefaultStyle(\n  position: LabelPosition,\n  points: Vector2[],\n  value: Record<string, any>,\n  coordinate: Coordinate,\n) {\n  const { bounds } = value;\n  // When bounds.length = 1\n  // For series mark, such as line and area.\n  // The bounds for text is defined with only one point.\n  // Use this point as the label position.\n  if (bounds.length === 1) {\n    return inferIdentityStyle(position, points, value, coordinate);\n  }\n\n  const inferDefaultStyle = isRadial(coordinate)\n    ? inferRadialStyle\n    : isCircular(coordinate)\n    ? inferInnerCircularStyle\n    : inferNonCircularStyle;\n\n  return inferDefaultStyle(position, points, value, coordinate);\n}\n", "import { Coordinate } from '@antv/coord';\nimport { Vector2 } from '../../../runtime';\nimport { getArcObject } from '../../../shape/utils';\nimport { isCircular, isRadial } from '../../../utils/coordinate';\n\nimport type { LabelPosition } from './default';\nimport {\n  pointOfArc,\n  inferRotation,\n  inferIdentityStyle,\n  inferRadialStyle,\n  inferNonCircularStyle,\n} from './default';\n\nexport function linePoints(center: Vector2, angle, radius, radius1, offsetX) {\n  const [x0, y0] = pointOfArc(center, angle, radius);\n  const [x1, y1] = pointOfArc(center, angle, radius1);\n  const sign = Math.sin(angle) > 0 ? 1 : -1;\n  return [\n    [x0, y0],\n    [x1, y1],\n    [x1 + sign * offsetX, y1],\n  ];\n}\n\nexport function radiusOf(points, value, coordinate) {\n  const arcObject = getArcObject(coordinate, points, [value.y, value.y1]);\n  const { innerRadius, outerRadius } = arcObject;\n  return innerRadius + (outerRadius - innerRadius);\n}\n\nexport function angleOf(points, value, coordinate) {\n  const arcObject = getArcObject(coordinate, points, [value.y, value.y1]);\n  const { startAngle, endAngle } = arcObject;\n\n  return (startAngle + endAngle) / 2;\n}\n\nexport function inferOutsideCircularStyle(\n  position: LabelPosition,\n  points: Vector2[],\n  value: Record<string, any>,\n  coordinate: Coordinate,\n) {\n  const {\n    autoRotate,\n    rotateToAlignArc,\n    offset = 0,\n    connector = true,\n    connectorLength = offset,\n    connectorLength2 = 0,\n    connectorDistance = 0,\n  } = value;\n  const center = coordinate.getCenter();\n\n  const angle = angleOf(points, value, coordinate);\n  const sign = Math.sin(angle) > 0 ? 1 : -1;\n\n  const rotate = inferRotation(angle, autoRotate, rotateToAlignArc);\n  const textStyle = {\n    textAlign: sign > 0 || isRadial(coordinate) ? 'start' : 'end',\n    textBaseline: 'middle',\n    rotate,\n  };\n\n  const radius = radiusOf(points, value, coordinate);\n  const radius1 = radius + (connector ? connectorLength : offset);\n\n  const [[x0, y0], [x1, y1], [x2, y2]] = linePoints(\n    center,\n    angle,\n    radius,\n    radius1,\n    connector ? connectorLength2 : 0,\n  );\n\n  const dx = connector ? +connectorDistance * sign : 0;\n\n  const x = x2 + dx;\n  const y = y2;\n  const connectorStyle = {\n    connector,\n    connectorPoints: [\n      [x1 - x, y1 - y],\n      [x2 - x, y2 - y],\n    ],\n  };\n\n  return {\n    x0,\n    y0,\n    x: x2 + dx,\n    y: y2,\n    ...textStyle,\n    ...connectorStyle,\n  };\n}\n\nexport function outside(\n  position: LabelPosition,\n  points: Vector2[],\n  value: Record<string, any>,\n  coordinate: Coordinate,\n) {\n  const { bounds } = value;\n  // When bounds.length = 1\n  // For series mark, such as line and area.\n  // The bounds for text is defined with only one point.\n  // Use this point as the label position.\n  if (bounds.length === 1) {\n    return inferIdentityStyle(position, points, value, coordinate);\n  }\n\n  const inferDefaultStyle = isRadial(coordinate)\n    ? inferRadialStyle\n    : isCircular(coordinate)\n    ? inferOutsideCircularStyle\n    : inferNonCircularStyle;\n\n  return inferDefaultStyle(position, points, value, coordinate);\n}\n", "import { sort } from '@antv/vendor/d3-array';\n\n// Optimize antiCollision from: https://github.com/antvis/G2/blob/master/src/geometry/label/layout/pie/util.ts\nexport function dodgeY(\n  labels: Record<string, any>[],\n  options: Record<string, any> = {},\n) {\n  const { labelHeight = 14, height } = options;\n\n  // Sort labels by y and init boxes (one box for each label)\n  const sortedLabels = sort(labels, (d) => d.y);\n  const n = sortedLabels.length;\n  const boxes = new Array(n);\n  for (let i = 0; i < n; i++) {\n    const label = sortedLabels[i];\n    const { y } = label;\n    boxes[i] = { y, y1: y + labelHeight, labels: [y] };\n  }\n\n  // Merge boxes until no overlapping boxes or only one box left.\n  // All the boxes should start higher than 0, but maybe higher than height.\n  let overlap = true;\n  while (overlap) {\n    overlap = false;\n    // Scan backward because boxes maybe deleted.\n    for (let i = boxes.length - 1; i > 0; i--) {\n      const box = boxes[i];\n      const preBox = boxes[i - 1];\n      if (preBox.y1 > box.y) {\n        overlap = true;\n        preBox.labels.push(...box.labels);\n        boxes.splice(i, 1);\n\n        // Compute new y1 to contain the current box.\n        preBox.y1 += box.y1 - box.y;\n\n        // Make sure the new box is in the range of [0, height].\n        const newHeight = preBox.y1 - preBox.y;\n        preBox.y1 = Math.max(Math.min(preBox.y1, height), newHeight);\n        preBox.y = preBox.y1 - newHeight;\n      }\n    }\n  }\n\n  let i = 0;\n  for (const box of boxes) {\n    const { y, labels } = box;\n    let prevY = y - labelHeight;\n    for (const curY of labels) {\n      const label = sortedLabels[i++];\n      const expectedY = prevY + labelHeight;\n      const dy = expectedY - curY;\n      label.connectorPoints[0][1] -= dy;\n      label.y = prevY + labelHeight;\n      prevY += labelHeight;\n    }\n  }\n}\n\nexport function hideAndDodgeY(\n  unsorted: Record<string, any>[],\n  options: Record<string, any>,\n) {\n  const labels = sort(unsorted, (d) => d.y);\n  const { height, labelHeight = 14 } = options;\n  const maxCount = Math.ceil(height / labelHeight);\n  if (labels.length <= maxCount) return dodgeY(labels, options);\n  const filtered = [];\n  for (let i = 0; i < labels.length; i++) {\n    // Hide labels out of range.\n    if (i < labels.length - maxCount) {\n      labels[i].opacity = 0;\n      labels[i].connector = false;\n    } else filtered.push(labels[i]);\n  }\n  dodgeY(filtered, options);\n}\n", "import { Coordinate } from '@antv/coord';\nimport { Vector2 } from '../../../runtime';\nimport { isCircular } from '../../../utils/coordinate';\nimport { LabelPosition } from './default';\nimport { inferOutsideCircularStyle, radiusOf, angleOf } from './outside';\nimport { hideAndDodgeY } from './utils';\n\nconst styleByPoints = new WeakMap();\n\nfunction compute(\n  points: Vector2[],\n  value: Record<string, any>,\n  coordinate: Coordinate,\n) {\n  const { connectorLength, connectorLength2, connectorDistance } = value;\n  const { ...style }: any = inferOutsideCircularStyle(\n    'outside',\n    points,\n    value,\n    coordinate,\n  );\n  const center = coordinate.getCenter();\n  const radius = radiusOf(points, value, coordinate);\n  const angle = angleOf(points, value, coordinate);\n  const radius1 = radius + connectorLength + connectorLength2;\n  const sign = Math.sin(angle) > 0 ? 1 : -1;\n  const newX = center[0] + (radius1 + +connectorDistance) * sign;\n  const { x: originX } = style;\n  const dx = newX - originX;\n  style.x += dx;\n  style.connectorPoints[0][0] -= dx;\n  return style;\n}\n\n/**\n * Spider label transform only suitable for the labels in polar coordinate,\n * labels should distinguish coordinate type.\n */\nexport function spider(\n  position: LabelPosition,\n  points: Vector2[],\n  value: Record<string, any>,\n  coordinate: Coordinate,\n  options: Record<string, any>,\n  labels: Vector2[][],\n) {\n  if (!isCircular(coordinate)) return {};\n  if (styleByPoints.has(points)) return styleByPoints.get(points);\n  const computed = labels.map((points) => compute(points, value, coordinate));\n  const { width, height } = coordinate.getOptions();\n  const left = computed.filter((d) => d.x < width / 2);\n  const right = computed.filter((d) => d.x >= width / 2);\n  const extendedOptions = { ...options, height };\n  hideAndDodgeY(left, extendedOptions);\n  hideAndDodgeY(right, extendedOptions);\n  computed.forEach((style, i) => styleByPoints.set(labels[i], style));\n  return styleByPoints.get(points);\n}\n", "import { Coordinate } from '@antv/coord';\nimport { Vector2 } from '../../../runtime';\nimport { getRadius, isCircular } from '../../../utils/coordinate';\nimport { angleWithQuadrant } from '../../../utils/vector';\nimport { LabelPosition, pointOfArc } from './default';\nimport { inferOutsideCircularStyle } from './outside';\n\n/**\n * Surround label transform is used to make labels surround circular.\n */\nexport function surround(\n  position: LabelPosition,\n  points: Vector2[],\n  value: Record<string, any>,\n  coordinate: Coordinate,\n) {\n  if (!isCircular(coordinate)) return {};\n  const { connectorLength, connectorLength2, connectorDistance } = value;\n\n  const { ...style }: any = inferOutsideCircularStyle(\n    'outside',\n    points,\n    value,\n    coordinate,\n  );\n  const { x0, y0 } = style;\n\n  const center = coordinate.getCenter();\n  const radius = getRadius(coordinate);\n  const radius1 = radius + connectorLength;\n  const angle = angleWithQuadrant([x0 - center[0], y0 - center[1]]);\n  const sign = Math.sin(angle) > 0 ? 1 : -1;\n\n  const [newX, newY] = pointOfArc(center, angle, radius1);\n\n  style.x = newX + (connectorLength2 + connectorDistance) * sign;\n  style.y = newY;\n\n  return style;\n}\n", "import { Coordinate } from '@antv/coord';\nimport { select } from '../../utils/selection';\nimport { G2Theme, ShapeComponent as SC, Vector2 } from '../../runtime';\nimport { applyStyle } from '../../shape/utils';\nimport { isTranspose, isCircular } from '../../utils/coordinate';\nimport { camelCase } from '../../utils/string';\nimport { Advance } from '../text/advance';\nimport { LabelPosition } from './position/default';\nimport * as PositionProcessor from './position';\n\nexport type LabelOptions = {\n  /**\n   * Customize label with html string or element.\n   */\n  render: (text: string, datum: any, index: number) => string | HTMLElement;\n  [key: string]: any;\n};\n\nfunction inferPosition(position: LabelPosition, coordinate: Coordinate) {\n  if (position !== undefined) return position;\n  if (isCircular(coordinate)) return 'inside';\n  if (isTranspose(coordinate)) return 'right';\n  return 'top';\n}\n\nfunction getDefaultStyle(\n  points: Vector2[],\n  value: Record<string, any>,\n  coordinate: Coordinate,\n  theme: G2Theme,\n  options: LabelOptions,\n  labels: Vector2[][],\n): Record<string, any> {\n  // For non-series mark, calc position for label based on\n  // position and the bounds of shape.\n  const { position } = value;\n  const { render } = options;\n  const p = inferPosition(position, coordinate);\n  const labelType = render\n    ? 'htmlLabel'\n    : p === 'inside'\n    ? 'innerLabel'\n    : 'label';\n  const t = theme[labelType];\n  const v = Object.assign({}, t, value);\n  const processor = PositionProcessor[camelCase(p)];\n  if (!processor) {\n    throw new Error(`Unknown position: ${p}`);\n  }\n  return {\n    ...t,\n    ...processor(p, points, v, coordinate, options, labels),\n  };\n}\n\n/**\n * Render normal label for each mark.\n * @todo Support position option: middle...\n */\nexport const Label: SC<LabelOptions> = (options, context) => {\n  const { coordinate, theme } = context;\n  const { render } = options;\n  return (points, value, style, labels) => {\n    const {\n      text,\n      x,\n      y,\n      transform: specifiedTS = '',\n      transformOrigin,\n      className = '',\n      ...overrideStyle\n    } = value;\n    const {\n      rotate = 0,\n      transform = '',\n      ...defaultStyle\n    } = getDefaultStyle(points, value, coordinate, theme, options, labels);\n\n    return select(new Advance())\n      .call(applyStyle, defaultStyle)\n      .style('text', `${text}`)\n      .style('className', `${className} g2-label`)\n      .style(\n        'innerHTML',\n        render ? render(text, value.datum, value.index) : undefined,\n      )\n      .style(\n        'labelTransform',\n        `${transform} rotate(${+rotate}) ${specifiedTS}`.trim(),\n      )\n      .style('labelTransformOrigin', transformOrigin)\n      .style('coordCenter', coordinate.getCenter())\n      .call(applyStyle, overrideStyle)\n      .node();\n  };\n};\n\nLabel.props = {\n  defaultMarker: 'point',\n};\n", "import { applyStyle } from '../utils';\nimport { select } from '../../utils/selection';\nimport { ShapeComponent as SC } from '../../runtime';\n\nexport type ColorOptions = {\n  colorAttribute: 'fill' | 'stroke';\n  [key: string]: any;\n};\n\n/**\n * Draw a filled or hollow path.\n */\nexport const Color: SC<ColorOptions> = (options, context) => {\n  const { arrow, colorAttribute, ...style } = options;\n  const { coordinate, document } = context;\n  return (points, value, defaults) => {\n    const { color: defaultColor, stroke, ...rest } = defaults;\n    const { d, color = defaultColor } = value;\n    const [width, height] = coordinate.getSize();\n    return (\n      select(document.createElement('path', {}))\n        .call(applyStyle, rest)\n        // Path support string, function with parameter { width, height }.\n        .style('d', typeof d === 'function' ? d({ width, height }) : d)\n        .style(colorAttribute, color)\n        .call(applyStyle, style)\n        .node()\n    );\n  };\n};\n\nColor.props = {\n  defaultEnterAnimation: 'fadeIn',\n  defaultUpdateAnimation: 'morphing',\n  defaultExitAnimation: 'fadeOut',\n};\n", "import { ShapeComponent as SC } from '../../runtime';\nimport { Color } from './color';\n\n// @todo\nexport type PathOptions = {\n  [key: string]: any;\n};\n\n/**\n * A filled path.\n */\nexport const Path: SC<PathOptions> = (options, context) => {\n  return Color({ colorAttribute: 'fill', ...options }, context);\n};\n\nPath.props = {\n  defaultMarker: 'hvh',\n  defaultEnterAnimation: 'fadeIn',\n  defaultUpdateAnimation: 'morphing',\n  defaultExitAnimation: 'fadeOut',\n};\n", "import { ShapeComponent as SC } from '../../runtime';\nimport { Color } from './color';\n\n// @todo\nexport type PathOptions = {\n  [key: string]: any;\n};\n\n/**\n * A hollow path.\n */\nexport const Hollow: SC<PathOptions> = (options, context) => {\n  return Color({ fill: 'none', colorAttribute: 'stroke', ...options }, context);\n};\n\nHollow.props = {\n  defaultMarker: 'hvh',\n  defaultEnterAnimation: 'fadeIn',\n  defaultUpdateAnimation: 'morphing',\n  defaultExitAnimation: 'fadeOut',\n};\n", "import { path as d3path } from '@antv/vendor/d3-path';\nimport { applyStyle } from '../utils';\nimport { select } from '../../utils/selection';\nimport { ShapeComponent as SC } from '../../runtime';\n\nexport type DensityOptions = {\n  colorAttribute: 'fill' | 'stroke';\n};\n\n/**\n * Draw density shape.\n */\nexport const Density: SC<DensityOptions> = (options, context) => {\n  const { document } = context;\n  return (points, value, defaults) => {\n    const { transform } = value;\n    const { color: defaultColor, ...rest } = defaults;\n    const { color = defaultColor } = value;\n    const [first, ...p] = points;\n\n    // todo smooth, hollow\n    const path = d3path();\n    path.moveTo(...first);\n    p.forEach(([x, y]) => {\n      path.lineTo(x, y);\n    });\n    path.closePath();\n\n    return select(document.createElement('path', {}))\n      .call(applyStyle, rest)\n      .style('d', path.toString())\n      .style('stroke', color || defaultColor) // Always has stroke color.\n      .style('fill', color || defaultColor)\n      .style('fillOpacity', 0.4)\n      .style('transform', transform)\n      .call(applyStyle, options)\n      .node();\n  };\n};\n\nDensity.props = {\n  defaultMarker: 'square',\n  defaultEnterAnimation: 'fadeIn',\n  defaultUpdateAnimation: 'morphing',\n  defaultExitAnimation: 'fadeOut',\n};\n", "export default function (max) {\n\tvar num, curr, prev;\n\tvar limit = max || 1;\n\n\tfunction keep(key, value) {\n\t\tif (++num > limit) {\n\t\t\tprev = curr;\n\t\t\treset(1);\n\t\t\t++num;\n\t\t}\n\t\tcurr[key] = value;\n\t}\n\n\tfunction reset(isPartial) {\n\t\tnum = 0;\n\t\tcurr = Object.create(null);\n\t\tisPartial || (prev=Object.create(null));\n\t}\n\n\treset();\n\n\treturn {\n\t\tclear: reset,\n\t\thas: function (key) {\n\t\t\treturn curr[key] !== void 0 || prev[key] !== void 0;\n\t\t},\n\t\tget: function (key) {\n\t\t\tvar val = curr[key];\n\t\t\tif (val !== void 0) return val;\n\t\t\tif ((val=prev[key]) !== void 0) {\n\t\t\t\tkeep(key, val);\n\t\t\t\treturn val;\n\t\t\t}\n\t\t},\n\t\tset: function (key, value) {\n\t\t\tif (curr[key] !== void 0) {\n\t\t\t\tcurr[key] = value;\n\t\t\t} else {\n\t\t\t\tkeep(key, value);\n\t\t\t}\n\t\t}\n\t};\n}\n", "import flru from 'flru';\n\nconst cache = flru(3);\n/**\n * A decorator to return new function with LRU cache.\n */\nexport function lru<T = any, V = any>(\n  fn: (...args: T[]) => V,\n  keyFn: (...args: T[]) => string = (...args) => `${args[0]}`,\n  maxSize = 16,\n) {\n  const cache = flru(maxSize);\n\n  return (...args) => {\n    const key = keyFn(...args);\n    let v = cache.get(key);\n\n    if (cache.has(key)) return cache.get(key);\n\n    v = fn(...args);\n    cache.set(key, v);\n\n    return v;\n  };\n}\n", "import { HeatmapGradient } from './types';\n\n/**\n * Parse heatmap gradient.\n */\nexport function parseGradient(\n  gradient: HeatmapGradient,\n): Array<[number, string]> {\n  if (typeof gradient === 'string') {\n    return gradient.split(' ').map((stop) => {\n      const [r, c] = stop.split(':');\n      return [+r, c];\n    });\n  }\n  return gradient;\n}\n", "import { lru } from '../../../utils/lru';\nimport { parseGradient } from './gradient';\nimport {\n  HeatmapGradient,\n  HeatmapRendererData,\n  HeatmapRendererOptions,\n} from './types';\n\nfunction newCanvas(\n  createCanvas: () => HTMLCanvasElement,\n  width: number,\n  height: number,\n) {\n  const c = createCanvas ? createCanvas() : document.createElement('canvas');\n  c.width = width;\n  c.height = height;\n  return c;\n}\n\n/**\n * Get a point with template.\n * @param radius\n * @param blurFactor\n * @returns\n */\nconst getPointTemplate = lru(\n  (\n    radius: number,\n    blurFactor: number,\n    createCanvas?: () => HTMLCanvasElement,\n  ) => {\n    const tplCanvas = newCanvas(createCanvas, radius * 2, radius * 2);\n    const tplCtx = tplCanvas.getContext('2d');\n    const x = radius;\n    const y = radius;\n\n    if (blurFactor === 1) {\n      tplCtx.beginPath();\n      tplCtx.arc(x, y, radius, 0, 2 * Math.PI, false);\n      tplCtx.fillStyle = 'rgba(0,0,0,1)';\n      tplCtx.fill();\n    } else {\n      const gradient = tplCtx.createRadialGradient(\n        x,\n        y,\n        radius * blurFactor,\n        x,\n        y,\n        radius,\n      );\n      gradient.addColorStop(0, 'rgba(0,0,0,1)');\n      gradient.addColorStop(1, 'rgba(0,0,0,0)');\n      tplCtx.fillStyle = gradient;\n      tplCtx.fillRect(0, 0, 2 * radius, 2 * radius);\n    }\n    return tplCanvas;\n  },\n  (radius) => `${radius}`,\n);\n\n/**\n * Get a color palette with len = 256 base on gradient.\n * @param gradientConfig\n * @returns\n */\nfunction getColorPalette(gradientConfig: HeatmapGradient, createCanvas) {\n  const paletteCanvas = newCanvas(createCanvas, 256, 1);\n  const paletteCtx = paletteCanvas.getContext('2d');\n\n  const gradient = paletteCtx.createLinearGradient(0, 0, 256, 1);\n  parseGradient(gradientConfig).forEach(([r, c]) => {\n    gradient.addColorStop(r, c);\n  });\n\n  paletteCtx.fillStyle = gradient;\n  paletteCtx.fillRect(0, 0, 256, 1);\n\n  return paletteCtx.getImageData(0, 0, 256, 1).data;\n}\n\n/**\n * Draw all circle with alpha.\n */\nfunction drawAlpha(\n  shadowCtx,\n  min: number,\n  max: number,\n  data: HeatmapRendererData[],\n  options: HeatmapRendererOptions,\n  createCanvas?: () => HTMLCanvasElement,\n) {\n  const { blur } = options;\n  let len = data.length;\n  while (len--) {\n    const { x, y, value: v, radius } = data[len];\n    // Ff value is bigger than max, use max as value.\n    const value = Math.min(v, max);\n    const rectX = x - radius;\n    const rectY = y - radius;\n\n    const tpl = getPointTemplate(radius, 1 - blur, createCanvas);\n    // Value from minimum / value range, => [0, 1].\n    const templateAlpha = (value - min) / (max - min);\n    // Small values are not visible because globalAlpha < .001 cannot be read from imageData.\n    shadowCtx.globalAlpha = Math.max(templateAlpha, 0.001);\n    shadowCtx.drawImage(tpl, rectX, rectY);\n  }\n  return shadowCtx;\n}\n\nfunction colorize(\n  shadowCtx,\n  maxWidth: number,\n  maxHeight: number,\n  palette,\n  options: HeatmapRendererOptions,\n) {\n  const { minOpacity, opacity, maxOpacity, useGradientOpacity } = options;\n  const x = 0;\n  const y = 0;\n  const width = maxWidth;\n  const height = maxHeight;\n\n  const img = shadowCtx.getImageData(x, y, width, height);\n  const imgData = img.data;\n  const len = imgData.length;\n\n  for (let i = 3; i < len; i += 4) {\n    const alpha = imgData[i];\n    const offset = alpha * 4;\n\n    if (!offset) {\n      continue;\n    }\n\n    // Should be in [min, max], min >= 0.\n    const finalAlpha =\n      opacity || Math.max(0, Math.min(maxOpacity, Math.max(minOpacity, alpha)));\n    // Update rgba.\n    imgData[i - 3] = palette[offset];\n    imgData[i - 2] = palette[offset + 1];\n    imgData[i - 1] = palette[offset + 2];\n    imgData[i] = useGradientOpacity ? palette[offset + 3] : finalAlpha;\n  }\n\n  return img;\n}\n\n/**\n * Render a heatmap with canvas.\n * See [heatmap.js](https://github.com/pa7/heatmap.js/blob/master/src/renderer/canvas2d.js).\n */\nexport function HeatmapRenderer(\n  width: number,\n  height: number,\n  min: number,\n  max: number,\n  data: HeatmapRendererData[],\n  options: HeatmapRendererOptions,\n  createCanvas: () => HTMLCanvasElement,\n) {\n  const opts: HeatmapRendererOptions = {\n    blur: 0.85,\n    minOpacity: 0,\n    opacity: 0.6,\n    maxOpacity: 1,\n    gradient: [\n      [0.25, 'rgb(0,0,255)'],\n      [0.55, 'rgb(0,255,0)'],\n      [0.85, 'yellow'],\n      [1.0, 'rgb(255,0,0)'],\n    ],\n    ...options,\n  };\n  opts.minOpacity *= 255;\n  opts.opacity *= 255;\n  opts.maxOpacity *= 255;\n\n  const shadowCanvas = newCanvas(createCanvas, width, height);\n  const shadowCtx = shadowCanvas.getContext('2d');\n\n  const palette = getColorPalette(opts.gradient, createCanvas);\n\n  shadowCtx.clearRect(0, 0, width, height);\n  drawAlpha(shadowCtx, min, max, data, opts, createCanvas);\n  const img = colorize(shadowCtx, width, height, palette, opts);\n\n  const canvas = newCanvas(createCanvas, width, height);\n  const ctx = canvas.getContext('2d');\n  ctx.putImageData(img, 0, 0);\n\n  return ctx;\n}\n", "import { max as d3max, min as d3min } from '@antv/vendor/d3-array';\nimport { applyStyle } from '../utils';\nimport { select } from '../../utils/selection';\nimport { ShapeComponent as SC } from '../../runtime';\nimport { HeatmapRenderer } from './renderer';\nimport type { HeatmapRendererOptions } from './renderer/types';\n\nexport type HeatmapOptions = HeatmapRendererOptions;\n\nfunction deleteKey(obj: any, fn: (v, k) => boolean) {\n  return Object.keys(obj).reduce((r, k) => {\n    const v = obj[k];\n    if (!fn(v, k)) r[k] = v;\n    return r;\n  }, {});\n}\n\nexport const Heatmap: SC<HeatmapOptions> = (options, context) => {\n  const {\n    gradient,\n    opacity,\n    maxOpacity,\n    minOpacity,\n    blur,\n    useGradientOpacity,\n    ...style\n  } = options;\n  const { coordinate, createCanvas, document } = context;\n  return (points: number[][], value, defaults) => {\n    const { transform } = value;\n    const [width, height] = coordinate.getSize();\n    const data = points.map((p: number[]) => ({\n      x: p[0],\n      y: p[1],\n      value: p[2],\n      radius: p[3],\n    }));\n\n    const min = d3min(points, (p) => p[2]);\n    const max = d3max(points, (p) => p[2]);\n\n    const options = {\n      gradient,\n      opacity,\n      minOpacity,\n      maxOpacity,\n      blur,\n      useGradientOpacity,\n    };\n    const ctx =\n      width && height\n        ? HeatmapRenderer(\n            width,\n            height,\n            min,\n            max,\n            data,\n            deleteKey(options, (v) => v === undefined),\n            createCanvas,\n          )\n        : { canvas: null };\n\n    return select(document.createElement('image', {}))\n      .call(applyStyle, defaults)\n      .style('x', 0)\n      .style('y', 0)\n      .style('width', width)\n      .style('height', height)\n      .style('src', ctx.canvas.toDataURL())\n      .style('transform', transform)\n      .call(applyStyle, style)\n      .node();\n  };\n};\n\nHeatmap.props = {\n  defaultMarker: 'point',\n  defaultEnterAnimation: 'fadeIn',\n  defaultUpdateAnimation: 'morphing',\n  defaultExitAnimation: 'fadeOut',\n};\n", "import { ShapeComponent as SC } from '../../runtime';\n\n//@todo\nexport type ShapeOptions = Record<string, any>;\n\n/**\n * Draw a custom shape.\n */\nexport const Shape: SC<ShapeOptions> = (options, context) => {\n  const { render, ...rest } = options;\n  return (points) => {\n    const [[x0, y0]] = points;\n    return render(\n      {\n        ...rest,\n        x: x0,\n        y: y0,\n      },\n      context,\n    );\n  };\n};\n\nShape.props = {\n  defaultMarker: 'point',\n  defaultEnterAnimation: 'fadeIn',\n  defaultUpdateAnimation: 'morphing',\n  defaultExitAnimation: 'fadeOut',\n};\n", "import { PathStyleProps, IAnimation } from '@antv/g';\n\nconst DURATION = 5000;\n\n/**\n * A function of linear mapping.\n * @param min\n * @param max\n * @param factor\n */\nfunction lerp(min: number, max: number, factor: number) {\n  return min + (max - min) * factor;\n}\n\n/**\n * Using Bessel curve to simulate sine wave.\n * Using Bezier curves to fit sine wave.\n * There is 4 control points for each curve of wave,\n * which is at 1/4 wave length of the sine wave.\n *\n * The control points for a wave from (a) to (d) are a-b-c-d:\n *          c *----* d\n *     b *\n *       |\n * ... a * ..................\n *\n * Whose positions are a: (0, 0), b: (0.5, 0.5), c: (1, 1), d: (PI / 2, 1).\n *\n * @param x          x position of the left-most point (a).\n * @param stage      0-3, stating which part of the wave it is.\n * @param waveLength wave length of the sine wave.\n * @param amplitude  wave amplitude.\n * @return Sinusoidal segment curve.\n */\nfunction getWaterWavePositions(\n  x: number,\n  stage: number,\n  waveLength: number,\n  amplitude: number,\n) {\n  if (stage === 0) {\n    return [\n      [x + ((1 / 2) * waveLength) / Math.PI / 2, amplitude / 2],\n      [x + ((1 / 2) * waveLength) / Math.PI, amplitude],\n      [x + waveLength / 4, amplitude],\n    ];\n  }\n  if (stage === 1) {\n    return [\n      [x + (((1 / 2) * waveLength) / Math.PI / 2) * (Math.PI - 2), amplitude],\n      [\n        x + (((1 / 2) * waveLength) / Math.PI / 2) * (Math.PI - 1),\n        amplitude / 2,\n      ],\n      [x + waveLength / 4, 0],\n    ];\n  }\n  if (stage === 2) {\n    return [\n      [x + ((1 / 2) * waveLength) / Math.PI / 2, -amplitude / 2],\n      [x + ((1 / 2) * waveLength) / Math.PI, -amplitude],\n      [x + waveLength / 4, -amplitude],\n    ];\n  }\n  return [\n    [x + (((1 / 2) * waveLength) / Math.PI / 2) * (Math.PI - 2), -amplitude],\n    [\n      x + (((1 / 2) * waveLength) / Math.PI / 2) * (Math.PI - 1),\n      -amplitude / 2,\n    ],\n    [x + waveLength / 4, 0],\n  ];\n}\n\n/**\n * Get wave path.\n * @param radius\n * @param waterLevel      water level\n * @param waveLength      wave length\n * @param phase\n * @param amplitude\n * @param cx              center x\n * @param cy              center y\n * @return path           path\n */\nfunction getWaterWavePath(\n  radius: number,\n  waterLevel: number,\n  waveLength: number,\n  phase: number,\n  amplitude: number,\n  cx: number,\n  cy: number,\n) {\n  const curves = Math.ceil(((2 * radius) / waveLength) * 4) * 4;\n  const path = [];\n  let _phase = phase;\n\n  // Map phase to [-Math.PI * 2, 0].\n  while (_phase < -Math.PI * 2) {\n    _phase += Math.PI * 2;\n  }\n  while (_phase > 0) {\n    _phase -= Math.PI * 2;\n  }\n  _phase = (_phase / Math.PI / 2) * waveLength;\n\n  const left = cx - radius + _phase - radius * 2;\n  /**\n   * Top-left corner as start point.\n   *\n   * Draws this point.\n   *  |\n   * \\|/\n   *  ~~~~~~~~\n   *  |      |\n   *  +------+\n   */\n  path.push(['M', left, waterLevel]);\n\n  /**\n   * Top wave.\n   *\n   * ~~~~~~~~ <- Draws this sine wave.\n   * |      |\n   * +------+\n   */\n  let waveRight = 0;\n  for (let c = 0; c < curves; ++c) {\n    const stage = c % 4;\n    const pos = getWaterWavePositions(\n      (c * waveLength) / 4,\n      stage,\n      waveLength,\n      amplitude,\n    );\n    path.push([\n      'C',\n      pos[0][0] + left,\n      -pos[0][1] + waterLevel,\n      pos[1][0] + left,\n      -pos[1][1] + waterLevel,\n      pos[2][0] + left,\n      -pos[2][1] + waterLevel,\n    ]);\n\n    if (c === curves - 1) {\n      waveRight = pos[2][0];\n    }\n  }\n\n  /**\n   * Top-right corner.\n   *\n   *                       ~~~~~~~~\n   * 3. Draws this line. -> |      | <- 1. Draws this line.\n   *                       +------+\n   *                          ^\n   *                          |\n   *                  2. Draws this line.\n   */\n  path.push(['L', waveRight + left, cy + radius]);\n  path.push(['L', left, cy + radius]);\n  path.push(['Z']);\n\n  return path;\n}\n\n/**\n * Add wave.\n * @param x           center x\n * @param y           center y\n * @param level       wave level 01\n * @param waveCount   wave count\n * @param waveAttrs   style\n * @param group       g\n * @param minY        Minimum height\n * @param radius      radius\n * @param waveLength  wave length\n * @param animation  animation config\n * @param document\n */\nexport function addWave(\n  x: number,\n  y: number,\n  level: number,\n  waveCount: number,\n  waveAttrs: PathStyleProps,\n  group: any,\n  minY: number,\n  radius: number,\n  waveLength: number,\n  animation: IAnimation | boolean,\n  document: any,\n) {\n  // Box property Color width height.\n  const { fill, fillOpacity, opacity } = waveAttrs;\n\n  // Number of cyclic waveCount.\n  for (let idx = 0; idx < waveCount; idx++) {\n    const factor = waveCount <= 1 ? 1 : idx / (waveCount - 1);\n\n    const path = getWaterWavePath(\n      radius,\n      minY + radius * level,\n      waveLength,\n      0,\n      // Amplitude height.\n      radius / 40,\n      x,\n      y,\n    );\n\n    // Create wave path.\n    const wave = document.createElement('path', {\n      style: {\n        d: path,\n        fill,\n        opacity: lerp(0.2, 0.9, factor) * Number(opacity || fillOpacity),\n      },\n    });\n\n    group.appendChild(wave);\n\n    try {\n      if (animation === false) return;\n\n      const keyframes = [\n        {\n          transform: 'translate(0, 0)',\n        },\n        {\n          transform: `translate(${waveLength * 2}, 0)`,\n        },\n      ];\n\n      wave.animate(keyframes, {\n        duration: lerp(0.5 * DURATION, DURATION, factor) * 2,\n        iterations: Infinity,\n      });\n    } catch (e) {\n      console.warn('off-screen group animate error!');\n    }\n  }\n}\n", "/**\n * @param x center x\n * @param y center y\n * @param radius\n */\nfunction circle(x: number, y: number, r: number) {\n  return `\n      M ${x} ${y - r} \n      a ${r} ${r} 0 1 0 0 ${r * 2}\n      a ${r} ${r} 0 1 0 0 ${-r * 2}\n      Z\n    `;\n}\n\n/**\n * @param x center x\n * @param y center y\n * @param radius\n */\nfunction rect(x: number, y: number, r: number) {\n  const GOLDEN_SECTION_RATIO = 0.618;\n  const w = r * GOLDEN_SECTION_RATIO;\n  return `\n      M ${x - w} ${y - r}\n      L ${x + w} ${y - r}\n      L ${x + w} ${y + r}\n      L ${x - w} ${y + r}\n      Z\n    `;\n}\n\n/**\n * @param x center x\n * @param y center y\n * @param radius\n */\nfunction diamond(x: number, y: number, r: number) {\n  return `\n      M ${x} ${y - r}\n      L ${x + r} ${y}\n      L ${x} ${y + r}\n      L ${x - r} ${y}\n      Z\n    `;\n}\n\n/**\n * @param x center x\n * @param y center y\n * @param radius\n */\nfunction triangle(x: number, y: number, r: number) {\n  return `\n      M ${x} ${y - r}\n      L ${x + r} ${y + r}\n      L ${x - r} ${y + r}\n      Z\n    `;\n}\n\n/**\n * @param x center x\n * @param y center y\n * @param radius\n */\nfunction pin(x: number, y: number, radius: number) {\n  const w = (radius * 4) / 3;\n  const h = Math.max(w, radius * 2);\n  const r = w / 2;\n\n  // Attrs of the upper circle.\n  const cx = x;\n  const cy = r + y - h / 2;\n  const theta = Math.asin(r / ((h - r) * 0.85));\n  const dy = Math.sin(theta) * r;\n  const dx = Math.cos(theta) * r;\n\n  // The start point of the path.\n  const x0 = cx - dx;\n  const y0 = cy + dy;\n\n  // Control point.\n  const cpX = x;\n  const cpY = cy + r / Math.sin(theta);\n\n  return `\n      M ${x0} ${y0}\n      A ${r} ${r} 0 1 1 ${x0 + dx * 2} ${y0}\n      Q ${cpX} ${cpY} ${x} ${y + h / 2}\n      Q ${cpX} ${cpY} ${x0} ${y0}\n      Z \n    `;\n}\n\nexport const LiquidShapesPath = {\n  pin,\n  rect,\n  circle,\n  diamond,\n  triangle,\n};\n", "import { isFunction } from '@antv/util';\nimport type { PathStyleProps } from '@antv/g';\nimport type { ShapeComponent as SC } from '../../runtime';\nimport { addWave } from './wave';\nimport { LiquidShapesPath } from './shapes';\n\nconst getLiquidShape = (shape = 'circle') =>\n  LiquidShapesPath[shape] || LiquidShapesPath.circle;\n\nexport type LiquidOptions = Record<string, any>;\n\nexport const Liquid: SC<LiquidOptions> = (options, context) => {\n  if (!context) return;\n  const { coordinate } = context;\n  const { liquidOptions, styleOptions } = options;\n  const { liquidShape, percent } = liquidOptions;\n  const {\n    background: backgroundStyle,\n    outline = {},\n    wave = {},\n    ...attr\n  } = styleOptions;\n  const { border = 2, distance = 0, ...outlineStyle } = outline;\n  const { length = 192, count = 3 } = wave;\n\n  return (points, cfg, defaultAttr) => {\n    const { document } = context.canvas;\n    const { color, fillOpacity } = defaultAttr;\n    const attrs = { fill: color, ...defaultAttr, ...attr } as PathStyleProps;\n\n    const g = document.createElement('g', {});\n\n    // Center x/y.\n    const [centerX, centerY] = coordinate.getCenter();\n    // [width,height].\n    const size = coordinate.getSize();\n    const radius = Math.min(...size) / 2;\n\n    // 1Gets the path of the overall shape.\n    const buildPath = isFunction(liquidShape)\n      ? liquidShape\n      : getLiquidShape(liquidShape);\n    const shapePath = buildPath(centerX, centerY, radius, ...size);\n    const shapeClipPath = buildPath(\n      centerX,\n      centerY,\n      radius + border / 2,\n      ...size,\n    );\n\n    // 2Background create.\n    if (Object.keys(backgroundStyle).length) {\n      const backgroundShape = document.createElement('path', {\n        style: {\n          d: shapePath,\n          fill: '#fff',\n          ...backgroundStyle,\n        },\n      });\n\n      g.appendChild(backgroundShape);\n    }\n\n    // Percent > 0 Mapping water waves.\n    if (percent > 0) {\n      // 3. Clip create.\n      const clipShape = document.createElement('path', {\n        style: {\n          d: shapeClipPath,\n        },\n      });\n\n      g.appendChild(clipShape);\n      g.style.clipPath = clipShape;\n\n      // 4. Wave create.\n      addWave(\n        centerX,\n        centerY,\n        1 - percent,\n        count,\n        attrs,\n        g,\n        clipShape.getBBox().y,\n        radius * 2,\n        length,\n        true,\n        document,\n      );\n    }\n\n    // 5. Draw distance.\n    const distanceShape = document.createElement('path', {\n      style: {\n        d: shapePath,\n        fill: 'transparent',\n        lineWidth: border + 2 * distance,\n        stroke: '#fff',\n      },\n    });\n\n    // 6. Draw border.\n    const borderShape = document.createElement('path', {\n      style: {\n        d: shapePath,\n        stroke: color,\n        strokeOpacity: fillOpacity,\n        lineWidth: border,\n        ...attrs,\n        ...outlineStyle,\n        fill: 'transparent',\n      },\n    });\n\n    g.appendChild(distanceShape);\n    g.appendChild(borderShape);\n\n    return g;\n  };\n};\n\nLiquid.props = {};\n", "import { omit } from '@antv/util';\nimport type { Vector2, ShapeComponent as SC } from '../../runtime';\n\nexport type RoundOptions = Record<string, any>;\n\n// Get point1 point2 radius.\nconst getR = (point1, point2) => {\n  return (\n    Math.sqrt(\n      Math.pow(point1[0] - point2[0], 2) + Math.pow(point1[1] - point2[1], 2),\n    ) / 2\n  );\n};\n\n// \nconst getAngle = (start, end, center) => {\n  const startAngle = Math.atan2(start[1] - center[1], start[0] - center[0]);\n  const endAngle = Math.atan2(end[1] - center[1], end[0] - center[0]);\n  let angle = endAngle - startAngle;\n  //  0-2 \n  if (angle < 0) angle += Math.PI * 2;\n  return angle;\n};\n\n// Gauge round.\nexport const Round: SC<RoundOptions> = (options, context) => {\n  if (!context) return;\n  const { coordinate } = context;\n  if (!coordinate?.getCenter) return;\n  // Get coordinate center point.\n  const center = coordinate.getCenter() as Vector2;\n\n  return (points, cfg, defaultCfg) => {\n    const { document } = context.canvas;\n    const { color, index } = cfg;\n\n    const g = document.createElement('g', {});\n\n    const minR = getR(points[0], points[1]);\n    const maxR = getR(points[0], center) * 2;\n\n    // \n    // 180\n    const isHalf = getAngle(points[3], points[0], center) > Math.PI;\n\n    /**\n     * MinR small circle radius,  maxR big circle radius.\n     * Draw four arcs.\n     * Style lineWidth and stroke for the time being inset.\n     */\n    const roundPath = document.createElement('path', {\n      style: {\n        d: [\n          ['M', ...points[0]],\n          ['A', minR, minR, 0, 1, 0, ...points[1]],\n          [\n            'A',\n            maxR + minR * 2,\n            maxR + minR * 2,\n            0,\n            isHalf ? 1 : 0,\n            0,\n            ...points[2],\n          ],\n          ['A', minR, minR, 0, 1, index === 0 ? 0 : 1, ...points[3]],\n          ['A', maxR, maxR, 0, isHalf ? 1 : 0, 1, ...points[0]],\n          ['Z'],\n        ],\n        ...defaultCfg,\n        ...omit(options, ['shape', 'last', 'first']),\n        fill: color || defaultCfg.color,\n      },\n    });\n\n    g.appendChild(roundPath);\n\n    return g;\n  };\n};\n", "export const MAIN_LAYER_CLASS_NAME = 'main-layer';\nexport const LABEL_LAYER_CLASS_NAME = 'label-layer';\nexport const ELEMENT_CLASS_NAME = 'element';\nexport const VIEW_CLASS_NAME = 'view';\nexport const PLOT_CLASS_NAME = 'plot';\nexport const COMPONENT_CLASS_NAME = 'component';\nexport const LABEL_CLASS_NAME = 'label';\nexport const AREA_CLASS_NAME = 'area';\nexport const MASK_CLASS_NAME = 'mask';\nexport const BREAK_CLASS_NAME = 'axis-breaks';\nexport const BREAK_GROUP_CLASS_NAME = 'axis-breaks-group';\n", "import { Path } from '@antv/g';\nimport { get, deepMix, set } from '@antv/util';\nimport type { PathStyleProps } from '@antv/g';\nimport {\n  BREAK_GROUP_CLASS_NAME,\n  PLOT_CLASS_NAME,\n} from '../../runtime/constant';\n\nexport const BREAKS_GAP = 0.03; // Default gap ratio for axis breaks\n\nexport type BreakOptions = {\n  /** Start position of the break. */\n  start: number;\n  /** End position of the break. */\n  end: number;\n  /** Gap ratio of the break, default is 0.1. */\n  gap?: number;\n  /** Number of wave vertices, default is 50. */\n  vertices?: number;\n  /** Offset of each vertex, default is 3. */\n  verticeOffset?: number;\n  /** Compression type of the break, default is 'middle'. */\n  compress?: 'start' | 'end' | 'middle';\n  /** Custom styles of the break. */\n  [key: string]: any;\n};\n\nconst DEFAULT_STYLE = {\n  fill: '#fff',\n  stroke: '#aaa',\n  lineDash: '4 3',\n  lineWidth: 0.5,\n  fillOpacity: 1,\n  strokeOpacity: 1,\n};\n\nconst PADDING = 0;\n\n/**\n * Create path points and corresponding clip paths.\n * @param y baseline Y coordinate\n * @param width total width of the path\n * @param offset vertical offset of wave\n * @param vertices number of generated points\n * @param isLowerBoundary whether it is the lower boundary\n * @param lineWidth line width of path\n * @returns tuple of [pathPoints, clipPoints]\n */\nconst createPathPoints = (\n  y: number,\n  width: number,\n  offset: number,\n  vertices: number,\n  isLowerBoundary: boolean,\n  lineWidth: number,\n) => {\n  const pathPoints: string[] = [];\n  const clipPoints: string[] = [];\n  const segments = vertices - 1;\n\n  for (let i = 1; i < segments; i++) {\n    const x = (i / segments) * width;\n    const offsetY = y + (i % 2 === 0 ? offset : -offset);\n\n    pathPoints.push(`${x},${offsetY}`);\n    clipPoints.push(\n      `${x},${isLowerBoundary ? offsetY - lineWidth : offsetY + lineWidth}`,\n    );\n  }\n\n  // Ensure last point reaches width\n  pathPoints.push(`${width},${y}`);\n  clipPoints.push(`${width + lineWidth},${y}`);\n\n  return [pathPoints, clipPoints] as const;\n};\n\nexport const AxisBreaks = (_, params) => {\n  const { context, selection, view } = params;\n  const layer = selection.select(`.${PLOT_CLASS_NAME}`).node();\n  const { document } = context.canvas;\n  const { scale } = view;\n\n  const collapsed = new Map<string, BreakOptions>();\n\n  const handleCollapseToggle = async (\n    key: string,\n    start: number,\n    end: number,\n  ) => {\n    const { update, setState } = context.externals;\n    setState('options', (prev) => {\n      const { marks } = prev;\n      if (!marks || !marks.length) return prev;\n      const newMarks = marks.map((mark) => {\n        const breaks = get(mark, 'scale.y.breaks', []);\n\n        const newBreaks = breaks.filter(\n          (b) => b.start !== start && b.end !== end && !b.collapsed,\n        );\n        // add collapsed: true flag to the corresponding breaks\n        breaks.forEach((b) => {\n          if (b.start === start && b.end === end) {\n            b.collapsed = true;\n          }\n        });\n        console.log('breaks group:', breaks, newBreaks);\n        return deepMix({}, mark, { scale: { y: { breaks: newBreaks } } });\n      });\n      collapsed.set(key, { start, end });\n      return { ...prev, marks: newMarks };\n    });\n    await update();\n  };\n\n  const resetCollapsed = async () => {\n    if (!collapsed.size) return;\n    const { update, setState } = context.externals;\n    setState('options', (prev) => {\n      const { marks } = prev;\n      const newMarks = marks.map((mark) => {\n        const breaks = get(mark, 'scale.y.breaks', []);\n        set(\n          mark,\n          'scale.y.breaks',\n          breaks.map((b) => ({\n            ...b,\n            collapsed: false,\n          })),\n        );\n        return mark;\n      });\n      collapsed.clear();\n      return { ...prev, marks: newMarks };\n    });\n    await update();\n  };\n\n  return (option: BreakOptions) => {\n    const {\n      key,\n      start,\n      end,\n      gap = BREAKS_GAP,\n      vertices = 50,\n      lineWidth = 0.5,\n      verticeOffset = 3,\n      ...style\n    } = option;\n\n    const g = document.createElement('g', {\n      id: `break-group-${key}`,\n      className: BREAK_GROUP_CLASS_NAME,\n    });\n\n    const xDomain = get(scale, 'x.sortedDomain', []);\n    const yScale = scale['y'].getOptions();\n    const { range, domain } = yScale;\n    const startIndex = domain.indexOf(start);\n    const endIndex = domain.indexOf(end);\n    const { width: plotWidth, height: plotHeight } = layer.getBBox();\n    if (startIndex === -1 || endIndex === -1 || !xDomain.length) return g;\n    const reverse = range[0] > range[1];\n    const lowerY = range[startIndex] * plotHeight;\n    const upperY = range[endIndex] * plotHeight;\n\n    let linePath = '';\n    let clipPath = '';\n\n    for (const [boundaryIndex, { y, isLower }] of [\n      { y: upperY, isLower: false },\n      { y: lowerY, isLower: true },\n    ].entries()) {\n      const clipOffset = reverse ? lineWidth : -lineWidth;\n      const [pathPoints, clipPoints] = createPathPoints(\n        y,\n        plotWidth - PADDING,\n        verticeOffset,\n        vertices,\n        isLower,\n        clipOffset,\n      );\n      if (boundaryIndex === 0) {\n        // start point + Top boundary path\n        linePath = `M ${PADDING},${y} L ${pathPoints.join(' L ')} `;\n        clipPath = `M ${PADDING - lineWidth},${\n          y + clipOffset\n        } L ${clipPoints.join(' L ')} `;\n      } else {\n        // Bottom boundary path + close point\n        linePath += `L ${plotWidth - PADDING},${y} L ${[...pathPoints]\n          .reverse()\n          .join(' L ')} L ${PADDING},${y} Z`;\n        clipPath += `L ${plotWidth - PADDING + lineWidth + 2},${\n          y - clipOffset\n        } L ${[...clipPoints].reverse().join(' L ')} L ${PADDING - lineWidth},${\n          y - clipOffset\n        } Z`;\n      }\n    }\n\n    const pathAttrs = { ...DEFAULT_STYLE, ...style } as PathStyleProps;\n\n    try {\n      const path1 = new Path({ style: { ...pathAttrs, d: linePath } });\n      const path2 = new Path({\n        style: { ...pathAttrs, d: clipPath, lineWidth: 0, cursor: 'pointer' },\n      });\n      // double click to remove break\n      path2.addEventListener('click', async (e) => {\n        e.stopPropagation();\n        if (e.detail === 2) {\n          await handleCollapseToggle(key, start, end);\n        }\n      });\n      g.appendChild(path1);\n      g.appendChild(path2);\n\n      // reset collapsed breaks on double click the plot background\n      layer.addEventListener('click', async (e) => {\n        if (e.detail === 2) {\n          await resetCollapsed();\n        }\n      });\n\n      layer.appendChild(g);\n    } catch (e) {\n      console.error('Failed to create break path:', e);\n    }\n\n    return g;\n  };\n};\n\nAxisBreaks.props = {};\n", "import { Band } from '@antv/scale';\nimport { MarkComponent as MC, Vector2 } from '../runtime';\nimport { IntervalMark } from '../spec';\nimport { MaybeZeroY1, MaybeZeroX } from '../transform';\nimport {\n  IntervalShape,\n  IntervalHollow,\n  IntervalFunnel,\n  IntervalPyramid,\n} from '../shape';\nimport {\n  baseGeometryChannels,\n  basePostInference,\n  basePreInference,\n  tooltip1d,\n} from './utils';\n\nfunction bandWidth(scale: Band, x: any): number {\n  return scale.getBandWidth(scale.invert(x));\n}\n\nconst shape = {\n  rect: IntervalShape,\n  hollow: IntervalHollow,\n  funnel: IntervalFunnel,\n  pyramid: IntervalPyramid,\n};\n\nexport type IntervalOptions = Omit<IntervalMark, 'type'>;\n\n/**\n * Convert value for each channel to rect shapes.\n * p0        p1\n *    \n *        \n *        \n * p3  p2\n */\nexport const Interval: MC<IntervalOptions> = () => {\n  return (index, scale, value, coordinate) => {\n    const { x: X, y1: Y1, series: S, size: SZ } = value;\n    let { y: Y } = value;\n    Y = Y.map((d) => (d !== undefined ? d : 1));\n\n    // Calc width for each interval.\n    // The scales for x and series channels must be band scale.\n    const x = scale.x as Band;\n    const series = scale.series as Band;\n    const [width] = coordinate.getSize();\n    const NSZ = SZ ? SZ.map((d) => +d / width) : null;\n    const x1x2 = !SZ\n      ? (x: number, w: number, i: number) => [x, x + w]\n      : (x: number, w: number, i: number) => {\n          const mx = x + w / 2;\n          const s = NSZ[i];\n          return [mx - s / 2, mx + s / 2];\n        };\n\n    // Calc the points of bounding box for the interval.\n    // They are start from left-top corner in clock wise order.\n    const P = Array.from(index, (i) => {\n      const groupWidth = bandWidth(x, X[i]);\n      const ratio = series ? bandWidth(series, S?.[i]) : 1;\n      const width = groupWidth * ratio;\n      const offset = (+S?.[i] || 0) * groupWidth;\n      const x0 = +X[i] + offset;\n      const [x1, x2] = x1x2(x0, width, i);\n      const y1 = +Y[i];\n      const y2 = +Y1[i];\n      const p1 = [x1, y1];\n      const p2 = [x2, y1];\n      const p3 = [x2, y2];\n      const p4 = [x1, y2];\n      return [p1, p2, p3, p4].map((d) => coordinate.map(d)) as Vector2[];\n    });\n    return [index, P];\n  };\n};\n\nInterval.props = {\n  defaultShape: 'rect',\n  defaultLabelShape: 'label',\n  composite: false,\n  shape,\n  channels: [\n    ...baseGeometryChannels({ shapes: Object.keys(shape) }),\n    { name: 'x', scale: 'band', required: true },\n    { name: 'y', required: true },\n    { name: 'series', scale: 'band' },\n    { name: 'size' },\n  ],\n  preInference: [\n    ...basePreInference(),\n    { type: MaybeZeroY1 },\n    { type: MaybeZeroX },\n  ],\n  postInference: [...basePostInference(), ...tooltip1d()],\n  interaction: { shareTooltip: true },\n};\n", "import { MarkComponent as MC, Vector2 } from '../runtime';\nimport { RectMark } from '../spec';\nimport { RectShape, RectHollow } from '../shape';\nimport { MaybeZeroY1 } from '../transform';\nimport {\n  baseGeometryChannels,\n  basePostInference,\n  basePreInference,\n  tooltip1d,\n} from './utils';\n\nconst shape = {\n  rect: RectShape,\n  hollow: RectHollow,\n};\n\nexport type RectOptions = Omit<RectMark, 'type'>;\n\nexport const Rect: MC<RectOptions> = () => {\n  return (index, scale, value, coordinate) => {\n    const { x: X, x1: X1, y: Y, y1: Y1 } = value;\n\n    const P = Array.from(index, (i) => {\n      const p1 = [+X[i], +Y[i]];\n      const p2 = [+X1[i], +Y[i]];\n      const p3 = [+X1[i], +Y1[i]];\n      const p4 = [+X[i], +Y1[i]];\n\n      return [p1, p2, p3, p4].map((d) => coordinate.map(d)) as Vector2[];\n    });\n\n    return [index, P];\n  };\n};\n\nRect.props = {\n  defaultShape: 'rect',\n  defaultLabelShape: 'label',\n  composite: false,\n  shape,\n  channels: [\n    ...baseGeometryChannels({ shapes: Object.keys(shape) }),\n    { name: 'x', required: true },\n    { name: 'y', required: true },\n  ],\n  preInference: [...basePreInference(), { type: MaybeZeroY1 }],\n  postInference: [...basePostInference(), ...tooltip1d()],\n  interaction: {\n    shareTooltip: true,\n  },\n};\n", "import { Vector } from '@antv/coord';\nimport { group } from '@antv/vendor/d3-array';\nimport { isParallel, isPolar } from '../utils/coordinate';\nimport { Mark, MarkComponent as MC, SingleMark, Vector2 } from '../runtime';\nimport { LineMark } from '../spec';\nimport {\n  LineShape,\n  LineHV,\n  LineVH,\n  LineHVH,\n  LineTrail,\n  LineSmooth,\n} from '../shape';\nimport { MaybeSeries, MaybeGradient } from '../transform';\nimport {\n  baseGeometryChannels,\n  basePostInference,\n  basePreInference,\n  tooltip1d,\n  tooltipXd,\n} from './utils';\n\nconst shape = {\n  line: LineShape,\n  smooth: LineSmooth,\n  hv: LineHV,\n  vh: LineVH,\n  hvh: LineHVH,\n  trail: LineTrail,\n};\n\nexport type LineOptions = Omit<LineMark, 'type'>;\n\nconst line: Mark = (index, scale, value, coordinate) => {\n  const { series: S, x: X, y: Y } = value;\n  const { x, y } = scale;\n\n  // Because x and y channel is not strictly required in Line.props,\n  // it should throw error with empty x or y channels.\n  if (X === undefined || Y === undefined) {\n    throw new Error('Missing encode for x or y channel.');\n  }\n\n  // Group data into series.\n  // There is only one series without specified series encode.\n  const series = S ? Array.from(group(index, (i) => S[i]).values()) : [index];\n  const I = series.map((group) => group[0]).filter((i) => i !== undefined);\n\n  // A group of data corresponds to one line.\n  const xoffset = (x?.getBandWidth?.() || 0) / 2;\n  const yoffset = (y?.getBandWidth?.() || 0) / 2;\n  const P = Array.from(series, (I) => {\n    return I.map((i) =>\n      coordinate.map([+X[i] + xoffset, +Y[i] + yoffset]),\n    ) as Vector2[];\n  });\n  return [I, P, series];\n};\n\nconst parallel: Mark = (index, scale, value, coordinate) => {\n  // Extract all value for position[number] channels.\n  const PV = Object.entries(value)\n    .filter(([key]) => key.startsWith('position'))\n    .map(([, value]) => value);\n\n  // Because position channel is not strictly required in Line.props,\n  // it should throw error with empty position values.\n  if (PV.length === 0) {\n    throw new Error('Missing encode for position channel.');\n  }\n  // Close the loop for radar(= parallel + polar) coordinate.\n  if (isPolar(coordinate)) PV.push(PV[0]);\n\n  // One data corresponds to one line.\n  const P = Array.from(index, (i) => {\n    // Transform high dimension vector to a list of two-dimension vectors.\n    // [a, b, c] -> [d, e, f, g, h, i]\n    const vector = PV.map((pv) => +pv[i]);\n    const vectors = coordinate.map(vector) as Vector;\n\n    // Two-dimension vectors are stored in a flat array, so extract them.\n    // [d, e, f, g, h, i] -> [d, e], [f, g], [h, i]\n    const points = [];\n    for (let i = 0; i < vectors.length; i += 2) {\n      points.push([vectors[i], vectors[i + 1]]);\n    }\n    return points;\n  });\n  return [index, P];\n};\n\n/**\n * Convert value for each channel to line shapes.\n */\nexport const Line: MC<LineOptions> = () => {\n  return (index, scale, value, coordinate) => {\n    const mark = isParallel(coordinate) ? parallel : line;\n    return (mark as SingleMark)(index, scale, value, coordinate);\n  };\n};\n\nLine.props = {\n  defaultShape: 'line',\n  defaultLabelShape: 'label',\n  composite: false,\n  shape,\n  channels: [\n    ...baseGeometryChannels({ shapes: Object.keys(shape) }),\n    { name: 'x' },\n    { name: 'y' },\n    { name: 'position', independent: true },\n    { name: 'size' },\n    { name: 'series', scale: 'band' },\n  ],\n  preInference: [\n    ...basePreInference(),\n    // !!!Note This order is very important.\n    { type: MaybeGradient },\n    { type: MaybeSeries },\n  ],\n  postInference: [...basePostInference(), ...tooltip1d(), ...tooltipXd()],\n  interaction: {\n    shareTooltip: true,\n    seriesTooltip: true,\n    crosshairs: true,\n  },\n};\n", "import { MarkComponent as MC, Vector2 } from '../runtime';\nimport { PointMark } from '../spec';\nimport {\n  PointBowtie,\n  PointCross,\n  PointDiamond,\n  PointHexagon,\n  PointHollowBowtie,\n  PointHollowDiamond,\n  PointHollowHexagon,\n  PointHollow,\n  PointHollowSquare,\n  PointHollowTriangle,\n  PointHollowTriangleDown,\n  PointHyphen,\n  PointLine,\n  PointTriangleDown,\n  PointPlus,\n  PointSquare,\n  PointShape,\n  PointTick,\n  PointTriangle,\n  PointCircle,\n  PointHollowCircle,\n} from '../shape';\nimport { MaybeZeroX, MaybeZeroY, MaybeSize } from '../transform';\nimport {\n  baseGeometryChannels,\n  basePostInference,\n  basePreInference,\n  createBandOffset,\n  tooltip2d,\n} from './utils';\n\nconst shape = {\n  hollow: PointHollow,\n  hollowDiamond: PointHollowDiamond,\n  hollowHexagon: PointHollowHexagon,\n  hollowSquare: PointHollowSquare,\n  hollowTriangleDown: PointHollowTriangleDown,\n  hollowTriangle: PointHollowTriangle,\n  hollowBowtie: PointHollowBowtie,\n  hollowCircle: PointHollowCircle,\n  point: PointShape,\n  plus: PointPlus,\n  diamond: PointDiamond,\n  square: PointSquare,\n  triangle: PointTriangle,\n  hexagon: PointHexagon,\n  cross: PointCross,\n  bowtie: PointBowtie,\n  hyphen: PointHyphen,\n  line: PointLine,\n  tick: PointTick,\n  triangleDown: PointTriangleDown,\n  circle: PointCircle,\n};\n\nexport type PointOptions = Omit<PointMark, 'type'>;\n\n/**\n * Convert value for each channel to point shapes.\n * Calc the bbox of each point based on x, y and r.\n * This is for allowing their radius can be affected by coordinate(e.g. fisheye).\n */\nexport const Point: MC<PointOptions> = (options) => {\n  return (index, scale, value, coordinate) => {\n    const { x: X, y: Y, x1: X1, y1: Y1, size: S, dx: DX, dy: DY } = value;\n    const [width, height] = coordinate.getSize();\n    const offset = createBandOffset(scale, value, options);\n    const xy: (i: number) => Vector2 = (i) => {\n      const dx = +(DX?.[i] || 0);\n      const dy = +(DY?.[i] || 0);\n      const x = X1 ? (+X[i] + +X1[i]) / 2 : +X[i];\n      const y = Y1 ? (+Y[i] + +Y1[i]) / 2 : +Y[i];\n      const cx = x + dx;\n      const cy = y + dy;\n      return [cx, cy];\n    };\n    const P = S\n      ? Array.from(index, (i) => {\n          const [cx, cy] = xy(i);\n          const r = +S[i];\n          const a = r / width;\n          const b = r / height;\n          const p1: Vector2 = [cx - a, cy - b];\n          const p2: Vector2 = [cx + a, cy + b];\n          return [\n            coordinate.map(offset(p1, i)),\n            coordinate.map(offset(p2, i)),\n          ] as Vector2[];\n        })\n      : Array.from(\n          index,\n          (i) => [coordinate.map(offset(xy(i), i))] as Vector2[],\n        );\n    return [index, P];\n  };\n};\n\nPoint.props = {\n  defaultShape: 'hollow',\n  defaultLabelShape: 'label',\n  composite: false,\n  shape,\n  channels: [\n    ...baseGeometryChannels({ shapes: Object.keys(shape) }),\n    { name: 'x', required: true },\n    { name: 'y', required: true },\n    { name: 'series', scale: 'band' },\n    { name: 'size', quantitative: 'sqrt' },\n    { name: 'dx', scale: 'identity' },\n    { name: 'dy', scale: 'identity' },\n  ],\n  preInference: [\n    ...basePreInference(),\n    { type: MaybeZeroX },\n    { type: MaybeZeroY },\n  ],\n  postInference: [...basePostInference(), { type: MaybeSize }, ...tooltip2d()],\n};\n", "import { MarkComponent as MC, Vector2, Mark } from '../runtime';\nimport { TextMark } from '../spec';\nimport { TextShape, TextBadge, TextTag } from '../shape';\nimport { MaybeTuple, MaybeVisualPosition } from '../transform';\nimport {\n  baseGeometryChannels,\n  basePostInference,\n  basePreInference,\n  createBandOffset,\n  tooltip2d,\n  visualMark,\n} from './utils';\n\nconst shape = {\n  text: TextShape,\n  badge: TextBadge,\n  tag: TextTag,\n};\n\nexport type TextOptions = Omit<TextMark, 'type'>;\n\nexport const Text: MC<TextOptions> = (options) => {\n  const { cartesian = false } = options;\n  if (cartesian) return visualMark as Mark;\n  return ((index, scale, value, coordinate) => {\n    const { x: X, y: Y } = value;\n    const offset = createBandOffset(scale, value, options);\n    const P = Array.from(index, (i) => {\n      const p: Vector2 = [+X[i], +Y[i]];\n      return [coordinate.map(offset(p, i))] as Vector2[];\n    });\n    return [index, P];\n  }) as Mark;\n};\n\nText.props = {\n  defaultShape: 'text',\n  defaultLabelShape: 'label',\n  composite: false,\n  shape,\n  channels: [\n    ...baseGeometryChannels({ shapes: Object.keys(shape) }),\n    { name: 'x', required: true },\n    { name: 'y', required: true },\n    { name: 'text', scale: 'identity' },\n    { name: 'fontSize', scale: 'identity' },\n    { name: 'rotate', scale: 'identity' },\n  ],\n  preInference: [\n    ...basePreInference(),\n    { type: MaybeTuple },\n    { type: MaybeVisualPosition },\n  ],\n  postInference: [...basePostInference(), ...tooltip2d()],\n};\n", "import { Band } from '@antv/scale';\nimport { MarkComponent as MC, Vector2 } from '../runtime';\nimport { CellMark } from '../spec';\nimport { CellShape, CellHollow } from '../shape';\nimport { MaybeZeroX, MaybeZeroY, MaybeZeroPadding } from '../transform';\nimport {\n  baseGeometryChannels,\n  basePostInference,\n  basePreInference,\n  tooltip2d,\n} from './utils';\n\nconst shape = {\n  cell: CellShape,\n  hollow: CellHollow,\n};\n\nexport type CellOptions = Omit<CellMark, 'type'>;\n\n/**\n * Convert value for each channel to Cell shapes.\n * Calc the bbox of each Cell based on x, y and r.\n * This is for allowing their radius can be affected by coordinate(e.g. fisheye).\n */\nexport const Cell: MC<CellOptions> = () => {\n  return (index, scale, value, coordinate) => {\n    const { x: X, y: Y } = value;\n    const x = scale.x as Band;\n    const y = scale.y as Band;\n    const P = Array.from(index, (i) => {\n      const width = x.getBandWidth(x.invert(+X[i]));\n      const height = y.getBandWidth(y.invert(+Y[i]));\n      const x1 = +X[i];\n      const y1 = +Y[i];\n      const p1 = [x1, y1];\n      const p2 = [x1 + width, y1];\n      const p3 = [x1 + width, y1 + height];\n      const p4 = [x1, y1 + height];\n      return [p1, p2, p3, p4].map((d) => coordinate.map(d)) as Vector2[];\n    });\n    return [index, P];\n  };\n};\n\nCell.props = {\n  defaultShape: 'cell',\n  defaultLabelShape: 'label',\n  shape,\n  composite: false,\n  channels: [\n    ...baseGeometryChannels({ shapes: Object.keys(shape) }),\n    { name: 'x', required: true, scale: 'band' },\n    { name: 'y', required: true, scale: 'band' },\n  ],\n  preInference: [\n    ...basePreInference(),\n    { type: MaybeZeroX },\n    { type: MaybeZeroY },\n    { type: MaybeZeroPadding },\n  ],\n  postInference: [...basePostInference(), ...tooltip2d()],\n};\n", "import { group } from '@antv/vendor/d3-array';\nimport { MarkComponent as MC } from '../runtime';\nimport { AreaMark } from '../spec';\nimport { AreaShape, AreaHV, AreaHVH, AreaSmooth, AreaVH } from '../shape';\nimport { MaybeSeries, MaybeZeroY1, MaybeZeroPadding } from '../transform';\nimport {\n  baseGeometryChannels,\n  basePostInference,\n  basePreInference,\n  tooltip1d,\n} from './utils';\n\nconst shape = {\n  area: AreaShape,\n  smooth: AreaSmooth,\n  hvh: AreaHVH,\n  vh: AreaVH,\n  hv: AreaHV,\n};\n\nexport type AreaOptions = Omit<AreaMark, 'type'>;\n\n/*\n * Convert value for each channel to area shapes.\n *\n *     \n *     \n *                                              y2\n *     \n *                          y1     xxxxxxxxxxxxx\n *                              xxxx            x\n *                           xxx                x\n *                         xxx                  x\n *             y0       xxx                     x\n *                xxxxxxx                       x\n *               x                              x\n *              xx                              x\n *              x                               x\n *              x                               x\n *              x                               x\n *              x                               x\n *              x                               x\n *              x                               x\n *              x                               x\n * xx\n *             y3             y4                y5\n */\n\nexport const Area: MC<AreaOptions> = () => {\n  return (index, scale, value, coordinate) => {\n    const { x: X, y: Y, y1: Y1, series: S } = value;\n    const { x, y } = scale;\n\n    // Group data by series field.\n    const series = S ? Array.from(group(index, (i) => S[i]).values()) : [index];\n    const I = series.map((group) => group[0]).filter((i) => i !== undefined);\n\n    // A group of data corresponds to one area.\n    const xoffset = (x?.getBandWidth?.() || 0) / 2;\n    const yoffset = (y?.getBandWidth?.() || 0) / 2;\n    const P = Array.from(series, (SI) => {\n      const l = SI.length;\n      const points = new Array(l * 2);\n\n      for (let idx = 0; idx < SI.length; idx++) {\n        const i = SI[idx];\n        points[idx] = coordinate.map([+X[i] + xoffset, +Y[i] + yoffset]); // y1\n        points[l + idx] = coordinate.map([+X[i] + xoffset, +Y1[i] + yoffset]); // y0\n      }\n\n      return points;\n    });\n\n    return [I, P, series];\n  };\n};\n\nArea.props = {\n  defaultShape: 'area',\n  defaultLabelShape: 'label',\n  composite: false,\n  shape,\n  channels: [\n    ...baseGeometryChannels({ shapes: Object.keys(shape) }),\n    { name: 'x', required: true },\n    { name: 'y', required: true },\n    { name: 'size' },\n    { name: 'series', scale: 'band' },\n  ],\n  preInference: [\n    ...basePreInference(),\n    { type: MaybeSeries },\n    { type: MaybeZeroY1 },\n    { type: MaybeZeroPadding },\n  ],\n  postInference: [...basePostInference(), ...tooltip1d()],\n  interaction: {\n    shareTooltip: true,\n    seriesTooltip: true,\n    crosshairs: true,\n  },\n};\n", "import { MarkComponent as MC, Vector2 } from '../runtime';\nimport { LineMark } from '../spec';\nimport { MaybeIdentityX, MaybeIdentityY } from '../transform';\nimport { LinkArc, LinkShape, LinkSmooth, LinkVHV } from '../shape';\nimport {\n  baseGeometryChannels,\n  basePostInference,\n  basePreInference,\n  createBandOffset,\n  tooltip2d,\n} from './utils';\n\nconst shape = {\n  link: LinkShape,\n  arc: LinkArc,\n  smooth: LinkSmooth,\n  vhv: LinkVHV,\n};\n\nexport type LinkOptions = Omit<LineMark, 'type'>;\n\n/**\n * Connect `start` to `end` with single line.\n */\nexport const Link: MC<LinkOptions> = (options) => {\n  return (index, scale, value, coordinate) => {\n    const { x: X, y: Y, x1: X1 = X, y1: Y1 = Y } = value;\n    const offset = createBandOffset(scale, value, options);\n    const P = index.map((i) => [\n      coordinate.map(offset([+X[i], +Y[i]], i)) as Vector2,\n      coordinate.map(offset([+X1[i], +Y1[i]], i)) as Vector2,\n    ]);\n    return [index, P];\n  };\n};\n\nLink.props = {\n  defaultShape: 'link',\n  defaultLabelShape: 'label',\n  composite: false,\n  shape,\n  channels: [\n    ...baseGeometryChannels({ shapes: Object.keys(shape) }),\n    { name: 'x', required: true },\n    { name: 'y', required: true },\n  ],\n  preInference: [\n    ...basePreInference(),\n    { type: MaybeIdentityY },\n    { type: MaybeIdentityX },\n  ],\n  postInference: [...basePostInference(), ...tooltip2d()],\n};\n", "import { Mark, MarkComponent as MC, Vector2 } from '../runtime';\nimport { ImageMark } from '../spec';\nimport { MaybeTuple, MaybeVisualPosition } from '../transform';\nimport { ImageShape } from '../shape';\nimport {\n  baseGeometryChannels,\n  basePostInference,\n  basePreInference,\n  createBandOffset,\n  tooltip2d,\n  visualMark,\n} from './utils';\n\nconst shape = {\n  image: ImageShape,\n};\n\nexport type ImageOptions = Omit<ImageMark, 'type'>;\n\nexport const Image: MC<ImageOptions> = (options) => {\n  const { cartesian } = options;\n  if (cartesian) return visualMark as Mark;\n  return (index, scale, value, coordinate) => {\n    const { x: X, y: Y } = value;\n    const offset = createBandOffset(scale, value, options);\n    const P = Array.from(index, (i) => {\n      const p: Vector2 = [+X[i], +Y[i]];\n      return [coordinate.map(offset(p, i))] as Vector2[];\n    });\n    return [index, P];\n  };\n};\n\nImage.props = {\n  defaultShape: 'image',\n  defaultLabelShape: 'label',\n  composite: false,\n  shape,\n  channels: [\n    ...baseGeometryChannels({ shapes: Object.keys(shape) }),\n    { name: 'x', required: true },\n    { name: 'y', required: true },\n    { name: 'src', scale: 'identity' },\n    { name: 'size' },\n  ],\n  preInference: [\n    ...basePreInference(),\n    { type: MaybeTuple },\n    { type: MaybeVisualPosition },\n  ],\n  postInference: [...basePostInference(), ...tooltip2d()],\n};\n", "import { Vector2, MarkComponent as MC } from '../runtime';\nimport { PolygonMark } from '../spec';\nimport { PolygonShape, PolygonRibbon } from '../shape';\nimport {\n  baseGeometryChannels,\n  basePostInference,\n  basePreInference,\n  tooltip2d,\n} from './utils';\n\nconst shape = {\n  polygon: PolygonShape,\n  ribbon: PolygonRibbon,\n};\n\nexport type PolygonOptions = Omit<PolygonMark, 'type'>;\n\n/**\n * Convert value for each channel to polygon shapes.\n */\nexport const Polygon: MC<PolygonOptions> = () => {\n  return (index, scale, value, coordinate) => {\n    const Xn = Object.entries(value)\n      .filter(([key]) => key.startsWith('x'))\n      .map(([, value]) => value);\n\n    const Yn = Object.entries(value)\n      .filter(([key]) => key.startsWith('y'))\n      .map(([, value]) => value);\n\n    const P = index.map((i) => {\n      const Pn = [];\n      for (let j = 0; j < Xn.length; j++) {\n        const x = Xn[j][i];\n        if (x === undefined) break;\n        const y = Yn[j][i];\n        Pn.push(coordinate.map([+x, +y]));\n      }\n      return Pn as Vector2[];\n    });\n\n    return [index, P];\n  };\n};\n\nPolygon.props = {\n  defaultShape: 'polygon',\n  defaultLabelShape: 'label',\n  composite: false,\n  shape,\n  channels: [\n    ...baseGeometryChannels({ shapes: Object.keys(shape) }),\n    { name: 'x', required: true },\n    { name: 'y', required: true },\n  ],\n  preInference: [...basePreInference()],\n  postInference: [...basePostInference(), ...tooltip2d()],\n};\n", "import { Band } from '@antv/scale';\nimport { Vector2, MarkComponent as MC } from '../runtime';\nimport { BoxMark } from '../spec';\nimport { BoxShape, BoxViolin } from '../shape';\nimport { MaybeZeroX } from '../transform';\nimport {\n  baseGeometryChannels,\n  basePostInference,\n  basePreInference,\n  tooltip1d,\n} from './utils';\n\nconst shape = {\n  box: BoxShape,\n  violin: BoxViolin,\n};\n\nexport type BoxOptions = Omit<BoxMark, 'type'>;\n\n/**\n * Convert value for each channel to box shapes.\n *\n * p0           p2          p1\n *    \n *              \n *              \n *              \n *              \n *              \n *              \n *               p3\n * p4  p5\n *                        \n *                        \n * p8  p9\n *                        \n *            p10         \n * p7  p6\n *              \n *              \n *              \n *              \n *              \n *              \n *              \n *              \n *   \n * p12         p11           p13\n */\nexport const Box: MC<BoxOptions> = () => {\n  return (index, scale, value, coordinate) => {\n    const { x: X, y: Y, y1: Y1, y2: Y2, y3: Y3, y4: Y4, series: S } = value;\n\n    // Calc width for each box.\n    // The scales for x and series channels must be band scale.\n    const xScale = scale.x as Band;\n    const series = scale.series as Band;\n\n    const P = Array.from(index, (i) => {\n      const groupWidth = xScale.getBandWidth(xScale.invert(+X[i]));\n      const ratio = series ? series.getBandWidth(series.invert(+S?.[i])) : 1;\n      const width = groupWidth * ratio;\n      const offset = (+S?.[i] || 0) * groupWidth;\n\n      const x = +X[i] + offset + width / 2;\n      const [low, q1, median, q3, high] = [\n        +Y[i],\n        +Y1[i],\n        +Y2[i],\n        +Y3[i],\n        +Y4[i],\n      ];\n\n      const P13 = [\n        [x - width / 2, high],\n        [x + width / 2, high],\n        [x, high],\n        [x, q3], // idx = 3\n        [x - width / 2, q3],\n        [x + width / 2, q3],\n        [x + width / 2, q1],\n        [x - width / 2, q1],\n        [x - width / 2, median], // idx = 8\n        [x + width / 2, median],\n        [x, q1], // idx = 10\n        [x, low],\n        [x - width / 2, low],\n        [x + width / 2, low],\n      ];\n\n      return P13.map((d) => coordinate.map(d)) as Vector2[];\n    });\n    return [index, P];\n  };\n};\n\nBox.props = {\n  defaultShape: 'box',\n  defaultLabelShape: 'label',\n  composite: false,\n  shape,\n  channels: [\n    ...baseGeometryChannels({ shapes: Object.keys(shape) }),\n    { name: 'x', scale: 'band', required: true },\n    { name: 'y', required: true },\n    { name: 'series', scale: 'band' },\n  ],\n  preInference: [...basePreInference(), { type: MaybeZeroX }],\n  postInference: [...basePostInference(), ...tooltip1d()],\n  interaction: {\n    shareTooltip: true,\n  },\n};\n", "import { MarkComponent as MC, Vector2 } from '../runtime';\nimport { VectorMark } from '../spec';\nimport { VectorShape } from '../shape';\nimport {\n  baseGeometryChannels,\n  basePostInference,\n  basePreInference,\n  tooltip2d,\n} from './utils';\n\nconst shape = {\n  vector: VectorShape,\n};\n\nexport type VectorOptions = Omit<VectorMark, 'type'>;\n\n/**\n * Convert value for each channel to start, end.\n * The angle starts from the X axis(right direction).\n */\nexport const Vector: MC<VectorOptions> = () => {\n  return (index, scale, value, coordinate) => {\n    const { x: X, y: Y, size: S, rotate: R } = value;\n    const [width, height] = coordinate.getSize();\n\n    const P = index.map((i) => {\n      const angle = (+R[i] / 180) * Math.PI;\n      const s = +S[i];\n      const a = s / width;\n      const b = s / height;\n\n      const vx = a * Math.cos(angle);\n      const vy = -b * Math.sin(angle);\n\n      return [\n        coordinate.map([+X[i] - vx / 2, +Y[i] - vy / 2]),\n        coordinate.map([+X[i] + vx / 2, +Y[i] + vy / 2]),\n      ] as Vector2[];\n    });\n\n    return [index, P];\n  };\n};\n\nVector.props = {\n  defaultShape: 'vector',\n  defaultLabelShape: 'label',\n  composite: false,\n  shape,\n  channels: [\n    ...baseGeometryChannels({ shapes: Object.keys(shape) }),\n    { name: 'x', required: true },\n    { name: 'y', required: true },\n    { name: 'rotate', required: true, scale: 'identity' },\n    { name: 'size', required: true },\n  ],\n  preInference: [...basePreInference()],\n  postInference: [...basePostInference(), ...tooltip2d()],\n};\n", "import { deepMix } from '@antv/util';\nimport { MarkComponent as MC, Vector2 } from '../runtime';\nimport { LineYMark } from '../spec';\nimport { LineXY } from '../shape';\nimport { MaybeTupleY } from '../transform';\nimport {\n  baseAnnotationChannels,\n  basePreInference,\n  basePostInference,\n  createBandOffset,\n} from './utils';\n\nconst shape = {\n  line: LineXY,\n};\n\nexport type LineYOptions = Omit<LineYMark, 'type'>;\n\nexport const LineY: MC<LineYOptions> = (options) => {\n  return (index, scale, value, coordinate) => {\n    const { y: Y } = value;\n    const offset = createBandOffset(\n      scale,\n      value,\n      deepMix({ style: { bandOffset: 0 } }, options),\n    );\n    const P = Array.from(index, (i) => {\n      const p1 = [0, Y[i]] as Vector2;\n      const p2 = [1, Y[i]] as Vector2;\n      return [p1, p2].map((d) => coordinate.map(offset(d, i))) as Vector2[];\n    });\n    return [index, P];\n  };\n};\n\nLineY.props = {\n  defaultShape: 'line',\n  defaultLabelShape: 'label',\n  composite: false,\n  shape,\n  channels: [\n    ...baseAnnotationChannels({ shapes: Object.keys(shape) }),\n    { name: 'y', required: true },\n  ],\n  preInference: [...basePreInference(), { type: MaybeTupleY }],\n  postInference: [...basePostInference()],\n};\n", "import { deepMix } from '@antv/util';\nimport { MarkComponent as MC, Vector2 } from '../runtime';\nimport { LineXMark } from '../spec';\nimport { LineXY } from '../shape';\nimport { MaybeTupleX } from '../transform';\nimport {\n  basePostInference,\n  baseAnnotationChannels,\n  basePreInference,\n  createBandOffset,\n} from './utils';\n\nconst shape = {\n  line: LineXY,\n};\n\nexport type LineXOptions = Omit<LineXMark, 'type'>;\n\nexport const LineX: MC<LineXOptions> = (options) => {\n  return (index, scale, value, coordinate) => {\n    const { x: X } = value;\n    const offset = createBandOffset(\n      scale,\n      value,\n      deepMix({ style: { bandOffset: 0 } }, options),\n    );\n    const P = Array.from(index, (i) => {\n      const p1 = [X[i], 1] as Vector2;\n      const p2 = [X[i], 0] as Vector2;\n      return [p1, p2].map((d) => coordinate.map(offset(d, i))) as Vector2[];\n    });\n    return [index, P];\n  };\n};\n\nLineX.props = {\n  defaultShape: 'line',\n  defaultLabelShape: 'label',\n  composite: false,\n  shape,\n  channels: [\n    ...baseAnnotationChannels({ shapes: Object.keys(shape) }),\n    { name: 'x', required: true },\n  ],\n  preInference: [...basePreInference(), { type: MaybeTupleX }],\n  postInference: [...basePostInference()],\n};\n", "import { MarkComponent as MC } from '../runtime';\nimport { ConnectorMark } from '../spec';\nimport { ConnectorShape } from '../shape';\nimport {\n  baseAnnotationChannels,\n  basePostInference,\n  basePreInference,\n} from './utils';\nimport { Link } from './link';\n\nconst shape = {\n  connector: ConnectorShape,\n};\n\nexport type ConnectorOptions = Omit<ConnectorMark, 'type'>;\n\nexport const Connector: MC<ConnectorOptions> = (...args) => {\n  return Link(...args);\n};\n\nConnector.props = {\n  defaultShape: 'connector',\n  defaultLabelShape: 'label',\n  composite: false,\n  shape,\n  channels: [\n    ...baseAnnotationChannels({ shapes: Object.keys(shape) }),\n    { name: 'x', required: true },\n    { name: 'y', required: true },\n  ],\n  preInference: [...basePreInference()],\n  postInference: [...basePostInference()],\n};\n", "import { Mark, MarkComponent as MC, Vector2 } from '../runtime';\nimport { RangeMark } from '../spec';\nimport { RangeShape } from '../shape';\nimport {\n  baseAnnotationChannels,\n  basePostInference,\n  basePreInference,\n} from './utils';\n\nfunction extend(channel: string, extended: boolean, value, scale) {\n  if (extended) return () => [0, 1];\n  const { [channel]: C, [`${channel}1`]: C1 } = value;\n  return (i) => {\n    const offset = scale.getBandWidth?.(scale.invert(+C1[i])) || 0;\n    return [C[i], C1[i] + offset];\n  };\n}\n\nexport function AbstractRange(\n  options: { extendX?: boolean; extendY?: boolean } = {},\n): Mark {\n  const { extendX = false, extendY = false } = options;\n  return (index, scale, value, coordinate) => {\n    const x = extend('x', extendX, value, scale.x);\n    const y = extend('y', extendY, value, scale.y);\n    const P = Array.from(index, (i) => {\n      const [x1, x2] = x(i);\n      const [y1, y2] = y(i);\n\n      const p1 = [x1, y1];\n      const p2 = [x2, y1];\n      const p3 = [x2, y2];\n      const p4 = [x1, y2];\n      return [p1, p2, p3, p4].map((d) => coordinate.map(d)) as Vector2[];\n    });\n    return [index, P];\n  };\n}\n\nconst shape = { range: RangeShape };\n\nexport type RangeOptions = Omit<RangeMark, 'type'>;\n\nexport const Range: MC<RangeOptions> = () => {\n  return AbstractRange();\n};\n\nRange.props = {\n  defaultShape: 'range',\n  defaultLabelShape: 'label',\n  composite: false,\n  shape,\n  channels: [\n    ...baseAnnotationChannels({ shapes: Object.keys(shape) }),\n    { name: 'x', required: true },\n    { name: 'y', required: true },\n  ],\n  preInference: [...basePreInference()],\n  postInference: [...basePostInference()],\n};\n", "import { MarkComponent as MC } from '../runtime';\nimport { RangeXMark } from '../spec';\nimport { RangeShape } from '../shape';\nimport { MaybeDefaultX } from '../transform';\nimport {\n  baseAnnotationChannels,\n  basePostInference,\n  basePreInference,\n} from './utils';\nimport { AbstractRange } from './range';\n\nconst shape = {\n  range: RangeShape,\n};\n\nexport type RangeXOptions = Omit<RangeXMark, 'type'>;\n\nexport const RangeX: MC<RangeXOptions> = () => {\n  return AbstractRange({ extendY: true });\n};\n\nRangeX.props = {\n  defaultShape: 'range',\n  defaultLabelShape: 'label',\n  composite: false,\n  shape,\n  channels: [\n    ...baseAnnotationChannels({ shapes: Object.keys(shape) }),\n    { name: 'x', required: true },\n  ],\n  preInference: [...basePreInference(), { type: MaybeDefaultX }],\n  postInference: [...basePostInference()],\n};\n", "import { MarkComponent as MC } from '../runtime';\nimport { RangeYMark } from '../spec';\nimport { RangeShape } from '../shape';\nimport { MaybeDefaultY } from '../transform';\nimport {\n  baseAnnotationChannels,\n  basePostInference,\n  basePreInference,\n} from './utils';\nimport { AbstractRange } from './range';\n\nconst shape = {\n  range: RangeShape,\n};\n\nexport type RangeYOptions = Omit<RangeYMark, 'type'>;\n\nexport const RangeY: MC<RangeYOptions> = () => {\n  return AbstractRange({ extendX: true });\n};\n\nRangeY.props = {\n  defaultShape: 'range',\n  defaultLabelShape: 'label',\n  composite: false,\n  shape,\n  channels: [\n    ...baseAnnotationChannels({ shapes: Object.keys(shape) }),\n    { name: 'y', required: true },\n  ],\n  preInference: [...basePreInference(), { type: MaybeDefaultY }],\n  postInference: [...basePostInference()],\n};\n", "import { min } from '@antv/vendor/d3-array';\n\nfunction targetDepth(d) {\n  return d.target.depth;\n}\n\nexport function left(node) {\n  return node.depth;\n}\n\nexport function right(node, n) {\n  return n - 1 - node.height;\n}\n\nexport function justify(node, n) {\n  return node.sourceLinks.length ? node.depth : n - 1;\n}\n\nexport function center(node) {\n  return node.targetLinks.length\n    ? node.depth\n    : node.sourceLinks.length\n    ? (min(node.sourceLinks, targetDepth) as any) - 1\n    : 0;\n}\n", "export function constant(x: any) {\n  return function () {\n    return x;\n  };\n}\n", "import { sum, max, min } from '@antv/vendor/d3-array';\nimport { justify } from './align';\nimport { constant } from './constant';\n\nfunction ascendingSourceBreadth(a, b) {\n  return ascendingBreadth(a.source, b.source) || a.index - b.index;\n}\n\nfunction ascendingTargetBreadth(a, b) {\n  return ascendingBreadth(a.target, b.target) || a.index - b.index;\n}\n\nfunction ascendingBreadth(a, b) {\n  return a.y0 - b.y0;\n}\n\nfunction value(d) {\n  return d.value;\n}\n\nfunction defaultId(d) {\n  return d.index;\n}\n\nfunction defaultNodes(graph) {\n  return graph.nodes;\n}\n\nfunction defaultLinks(graph) {\n  return graph.links;\n}\n\nfunction find(nodeById, id) {\n  const node = nodeById.get(id);\n  if (!node) throw new Error('missing: ' + id);\n  return node;\n}\n\nfunction computeLinkBreadths({ nodes }) {\n  for (const node of nodes) {\n    let y0 = node.y0;\n    let y1 = y0;\n    for (const link of node.sourceLinks) {\n      link.y0 = y0 + link.width / 2;\n      y0 += link.width;\n    }\n    for (const link of node.targetLinks) {\n      link.y1 = y1 + link.width / 2;\n      y1 += link.width;\n    }\n  }\n}\n\nexport function Sankey() {\n  let x0 = 0,\n    y0 = 0,\n    x1 = 1,\n    y1 = 1; // extent\n  let dx = 24; // nodeWidth\n  let dy = 8,\n    py; // nodePadding\n  let id = defaultId;\n  let align = justify;\n  let depth;\n  let sort;\n  let linkSort;\n  let nodes = defaultNodes;\n  let links = defaultLinks;\n  let iterations = 6;\n\n  function sankey(arg) {\n    const graph = {\n      nodes: nodes(arg),\n      links: links(arg),\n    };\n    computeNodeLinks(graph);\n    computeNodeValues(graph);\n    computeNodeDepths(graph);\n    computeNodeHeights(graph);\n    computeNodeBreadths(graph);\n    computeLinkBreadths(graph);\n    return graph;\n  }\n\n  sankey.update = function (graph) {\n    computeLinkBreadths(graph);\n    return graph;\n  };\n\n  sankey.nodeId = function (_) {\n    return arguments.length\n      ? ((id = typeof _ === 'function' ? _ : constant(_)), sankey)\n      : id;\n  };\n\n  sankey.nodeAlign = function (_) {\n    return arguments.length\n      ? ((align = typeof _ === 'function' ? _ : constant(_)), sankey)\n      : align;\n  };\n\n  sankey.nodeDepth = function (_) {\n    return arguments.length\n      ? ((depth = typeof _ === 'function' ? _ : _), sankey)\n      : depth;\n  };\n\n  sankey.nodeSort = function (_) {\n    return arguments.length ? ((sort = _), sankey) : sort;\n  };\n\n  sankey.nodeWidth = function (_) {\n    return arguments.length ? ((dx = +_), sankey) : dx;\n  };\n\n  sankey.nodePadding = function (_) {\n    return arguments.length ? ((dy = py = +_), sankey) : dy;\n  };\n\n  sankey.nodes = function (_) {\n    return arguments.length\n      ? ((nodes = typeof _ === 'function' ? _ : constant(_)), sankey)\n      : nodes;\n  };\n\n  sankey.links = function (_) {\n    return arguments.length\n      ? ((links = typeof _ === 'function' ? _ : constant(_)), sankey)\n      : links;\n  };\n\n  sankey.linkSort = function (_) {\n    return arguments.length ? ((linkSort = _), sankey) : linkSort;\n  };\n\n  sankey.size = function (_) {\n    return arguments.length\n      ? ((x0 = y0 = 0), (x1 = +_[0]), (y1 = +_[1]), sankey)\n      : [x1 - x0, y1 - y0];\n  };\n\n  sankey.extent = function (_) {\n    return arguments.length\n      ? ((x0 = +_[0][0]),\n        (x1 = +_[1][0]),\n        (y0 = +_[0][1]),\n        (y1 = +_[1][1]),\n        sankey)\n      : [\n          [x0, y0],\n          [x1, y1],\n        ];\n  };\n\n  sankey.iterations = function (_) {\n    return arguments.length ? ((iterations = +_), sankey) : iterations;\n  };\n\n  function computeNodeLinks({ nodes, links }) {\n    nodes.forEach((node, idx) => {\n      node.index = idx;\n      node.sourceLinks = [];\n      node.targetLinks = [];\n    });\n\n    const nodeById = new Map(nodes.map((d) => [id(d), d]));\n\n    links.forEach((link, idx) => {\n      link.index = idx;\n      let { source, target } = link;\n      if (typeof source !== 'object')\n        source = link.source = find(nodeById, source);\n      if (typeof target !== 'object')\n        target = link.target = find(nodeById, target);\n      source.sourceLinks.push(link);\n      target.targetLinks.push(link);\n    });\n\n    if (linkSort != null) {\n      for (const { sourceLinks, targetLinks } of nodes) {\n        sourceLinks.sort(linkSort);\n        targetLinks.sort(linkSort);\n      }\n    }\n  }\n\n  function computeNodeValues({ nodes }) {\n    for (const node of nodes) {\n      node.value =\n        node.fixedValue === undefined\n          ? Math.max(sum(node.sourceLinks, value), sum(node.targetLinks, value))\n          : node.fixedValue;\n    }\n  }\n\n  function computeNodeDepths({ nodes }) {\n    const n = nodes.length;\n    let current = new Set<any>(nodes);\n    let next = new Set();\n    let x = 0;\n    while (current.size) {\n      current.forEach((node) => {\n        node.depth = x;\n        for (const { target } of node.sourceLinks) {\n          next.add(target);\n        }\n      });\n      if (++x > n) throw new Error('circular link');\n      current = next;\n      next = new Set();\n    }\n\n    //  depth depth\n    if (depth) {\n      const maxDepth = Math.max(\n        max(nodes, (d: { depth: number }) => d.depth) + 1,\n        0,\n      );\n\n      let node;\n      for (let i = 0; i < nodes.length; i++) {\n        node = nodes[i];\n        node.depth = depth.call(null, node, maxDepth);\n      }\n    }\n  }\n\n  function computeNodeHeights({ nodes }) {\n    const n = nodes.length;\n    let current = new Set<any>(nodes);\n    let next = new Set();\n    let x = 0;\n    while (current.size) {\n      current.forEach((node) => {\n        node.height = x;\n        for (const { source } of node.targetLinks) {\n          next.add(source);\n        }\n      });\n      if (++x > n) throw new Error('circular link');\n      current = next;\n      next = new Set();\n    }\n  }\n\n  function computeNodeLayers({ nodes }) {\n    const x = Math.max(max(nodes, (d: { depth: number }) => d.depth) + 1, 0);\n    const kx = (x1 - x0 - dx) / (x - 1);\n    const columns = new Array(x).fill(0).map(() => []);\n    for (const node of nodes) {\n      const i = Math.max(\n        0,\n        Math.min(x - 1, Math.floor(align.call(null, node, x))),\n      );\n      node.layer = i;\n      node.x0 = x0 + i * kx;\n      node.x1 = node.x0 + dx;\n      if (columns[i]) columns[i].push(node);\n      else columns[i] = [node];\n    }\n    if (sort)\n      for (const column of columns) {\n        column.sort(sort);\n      }\n    return columns;\n  }\n\n  function initializeNodeBreadths(columns) {\n    const ky = min(\n      columns,\n      (c: any[]) => (y1 - y0 - (c.length - 1) * py) / sum(c, value),\n    ) as any as number;\n    for (const nodes of columns) {\n      let y = y0;\n      for (const node of nodes) {\n        node.y0 = y;\n        node.y1 = y + node.value * ky;\n        y = node.y1 + py;\n        for (const link of node.sourceLinks) {\n          link.width = link.value * ky;\n        }\n      }\n      y = (y1 - y + py) / (nodes.length + 1);\n      for (let i = 0; i < nodes.length; ++i) {\n        const node = nodes[i];\n        node.y0 += y * (i + 1);\n        node.y1 += y * (i + 1);\n      }\n      reorderLinks(nodes);\n    }\n  }\n\n  function computeNodeBreadths(graph) {\n    const columns = computeNodeLayers(graph);\n    py = Math.min(\n      dy,\n      (y1 - y0) / ((max(columns, (c: any[]) => c.length) as any as number) - 1),\n    );\n    initializeNodeBreadths(columns);\n    for (let i = 0; i < iterations; ++i) {\n      const alpha = Math.pow(0.99, i);\n      const beta = Math.max(1 - alpha, (i + 1) / iterations);\n      relaxRightToLeft(columns, alpha, beta);\n      relaxLeftToRight(columns, alpha, beta);\n    }\n  }\n\n  // Reposition each node based on its incoming (target) links.\n  function relaxLeftToRight(columns, alpha, beta) {\n    for (let i = 1, n = columns.length; i < n; ++i) {\n      const column = columns[i];\n      for (const target of column) {\n        let y = 0;\n        let w = 0;\n        for (const { source, value } of target.targetLinks) {\n          const v = value * (target.layer - source.layer);\n          y += targetTop(source, target) * v;\n          w += v;\n        }\n        if (!(w > 0)) continue;\n        const dy = (y / w - target.y0) * alpha;\n        target.y0 += dy;\n        target.y1 += dy;\n        reorderNodeLinks(target);\n      }\n      if (sort === undefined) column.sort(ascendingBreadth);\n      if (column.length) resolveCollisions(column, beta);\n    }\n  }\n\n  // Reposition each node based on its outgoing (source) links.\n  function relaxRightToLeft(columns, alpha, beta) {\n    for (let n = columns.length, i = n - 2; i >= 0; --i) {\n      const column = columns[i];\n      for (const source of column) {\n        let y = 0;\n        let w = 0;\n        for (const { target, value } of source.sourceLinks) {\n          const v = value * (target.layer - source.layer);\n          y += sourceTop(source, target) * v;\n          w += v;\n        }\n        if (!(w > 0)) continue;\n        const dy = (y / w - source.y0) * alpha;\n        source.y0 += dy;\n        source.y1 += dy;\n        reorderNodeLinks(source);\n      }\n      if (sort === undefined) column.sort(ascendingBreadth);\n      if (column.length) resolveCollisions(column, beta);\n    }\n  }\n\n  function resolveCollisions(nodes, alpha) {\n    const i = nodes.length >> 1;\n    const subject = nodes[i];\n    resolveCollisionsBottomToTop(nodes, subject.y0 - py, i - 1, alpha);\n    resolveCollisionsTopToBottom(nodes, subject.y1 + py, i + 1, alpha);\n    resolveCollisionsBottomToTop(nodes, y1, nodes.length - 1, alpha);\n    resolveCollisionsTopToBottom(nodes, y0, 0, alpha);\n  }\n\n  // Push any overlapping nodes down.\n  function resolveCollisionsTopToBottom(nodes, y, i, alpha) {\n    for (; i < nodes.length; ++i) {\n      const node = nodes[i];\n      const dy = (y - node.y0) * alpha;\n      if (dy > 1e-6) (node.y0 += dy), (node.y1 += dy);\n      y = node.y1 + py;\n    }\n  }\n\n  // Push any overlapping nodes up.\n  function resolveCollisionsBottomToTop(nodes, y, i, alpha) {\n    for (; i >= 0; --i) {\n      const node = nodes[i];\n      const dy = (node.y1 - y) * alpha;\n      if (dy > 1e-6) (node.y0 -= dy), (node.y1 -= dy);\n      y = node.y0 - py;\n    }\n  }\n\n  function reorderNodeLinks({ sourceLinks, targetLinks }) {\n    if (linkSort === undefined) {\n      for (const {\n        source: { sourceLinks },\n      } of targetLinks) {\n        sourceLinks.sort(ascendingTargetBreadth);\n      }\n      for (const {\n        target: { targetLinks },\n      } of sourceLinks) {\n        targetLinks.sort(ascendingSourceBreadth);\n      }\n    }\n  }\n\n  function reorderLinks(nodes) {\n    if (linkSort === undefined) {\n      for (const { sourceLinks, targetLinks } of nodes) {\n        sourceLinks.sort(ascendingTargetBreadth);\n        targetLinks.sort(ascendingSourceBreadth);\n      }\n    }\n  }\n\n  // Returns the target.y0 that would produce an ideal link from source to target.\n  function targetTop(source, target) {\n    let y = source.y0 - ((source.sourceLinks.length - 1) * py) / 2;\n    for (const { target: node, width } of source.sourceLinks) {\n      if (node === target) break;\n      y += width + py;\n    }\n    for (const { source: node, width } of target.targetLinks) {\n      if (node === source) break;\n      y -= width;\n    }\n    return y;\n  }\n\n  // Returns the source.y0 that would produce an ideal link from source to target.\n  function sourceTop(source, target) {\n    let y = target.y0 - ((target.targetLinks.length - 1) * py) / 2;\n    for (const { source: node, width } of target.targetLinks) {\n      if (node === source) break;\n      y += width + py;\n    }\n    for (const { target: node, width } of source.sourceLinks) {\n      if (node === target) break;\n      y -= width;\n    }\n    return y;\n  }\n\n  return sankey;\n}\n", "import { DataComponent as DC } from '../runtime';\nimport { sankey, left, right, center, justify } from './utils/d3-sankey';\n\nconst DEFAULT_OPTIONS: Partial<SankeyOptions> = {\n  nodeAlign: 'justify',\n  nodeWidth: 0.008,\n  nodePadding: 0.03,\n  nodes: (graph) => graph.nodes,\n  links: (graph) => graph.links,\n  nodeSort: undefined,\n  linkSort: undefined,\n  iterations: 6,\n};\n\nconst ALIGN_METHOD = {\n  left,\n  right,\n  center,\n  justify,\n};\n\nfunction getNodeAlignFunction(nodeAlign: SankeyOptions['nodeAlign']) {\n  const type = typeof nodeAlign;\n  if (type === 'string') return ALIGN_METHOD[nodeAlign as string] || justify;\n  if (type === 'function') return nodeAlign;\n  return justify;\n}\n\nexport type SankeyOptions = Omit<Record<string, any>, 'type'>;\n\n/**\n * Compute the node and edge position, return a graph representing the Sankey layout. All will be normalized to [[0, 0], [1, 1]]\n * Required graph data (nodes, edges)\n */\nexport const Sankey: DC<SankeyOptions> = (options) => {\n  return (data) => {\n    const {\n      nodeId,\n      nodeSort,\n      nodeAlign,\n      nodeWidth,\n      nodePadding,\n      nodeDepth,\n      nodes: nodeNodes,\n      links: nodeLinks,\n      linkSort,\n      iterations,\n    } = Object.assign({}, DEFAULT_OPTIONS, options);\n\n    const sankeyProcessor = sankey()\n      .nodeSort(nodeSort)\n      .linkSort(linkSort)\n      .links(nodeLinks)\n      .nodes(nodeNodes)\n      .nodeWidth(nodeWidth)\n      .nodePadding(nodePadding)\n      .nodeDepth(nodeDepth)\n      .nodeAlign(getNodeAlignFunction(nodeAlign))\n      .iterations(iterations)\n      .extent([\n        [0, 0],\n        [1, 1],\n      ]);\n\n    if (typeof nodeId === 'function') {\n      sankeyProcessor.nodeId(nodeId);\n    }\n\n    const layoutData = sankeyProcessor(data);\n\n    const { nodes: N, links: L } = layoutData;\n    const nodes = N.map((node) => {\n      const { x0, x1, y0, y1 } = node;\n      /* points\n       * 3---2\n       * |   |\n       * 0---1\n       */\n      return { ...node, x: [x0, x1, x1, x0], y: [y0, y0, y1, y1] };\n    });\n    const links = L.map((edge) => {\n      const { source, target } = edge;\n      const sx = source.x1;\n      const tx = target.x0;\n      const offset = edge.width / 2;\n      return {\n        ...edge,\n        x: [sx, sx, tx, tx],\n        y: [\n          edge.y0 + offset,\n          edge.y0 - offset,\n          edge.y1 + offset,\n          edge.y1 - offset,\n        ],\n      };\n    });\n    return { nodes, links };\n  };\n};\n\nSankey.props = {};\n", "import { deepMix } from '@antv/util';\nimport { isUnset, subObject } from './helper';\n\nexport function subTooltip(tooltip, name, defaults = {}, main = false) {\n  if (isUnset(tooltip)) return tooltip;\n  if (Array.isArray(tooltip) && main) return tooltip;\n  const sub = subObject(tooltip, name);\n  return deepMix(defaults, sub);\n}\n\nexport function maybeTooltip(tooltip, defaults = {}) {\n  if (isUnset(tooltip)) return tooltip;\n  if (Array.isArray(tooltip)) return tooltip;\n  if (!isFullTooltip(tooltip)) return tooltip;\n  return deepMix(defaults, tooltip);\n}\n\nexport function isFullTooltip(tooltip) {\n  if (Object.keys(tooltip).length === 0) return true;\n  const { title, items } = tooltip;\n  return title !== undefined || items !== undefined;\n}\n\nexport function maybeAnimation(animate, sub) {\n  return typeof animate === 'object' ? subObject(animate, sub) : animate;\n}\n", "import { deepMix } from '@antv/util';\nimport { CompositeMarkComponent as CC } from '../runtime';\nimport { SankeyMark } from '../spec';\nimport { Sankey as SankeyTransform } from '../data/sankey';\nimport { omitPrefixObject, subObject } from '../utils/helper';\nimport { subTooltip, maybeAnimation } from '../utils/mark';\nimport { field, initializeData } from './utils';\n\nconst DEFAULT_LAYOUT_OPTIONS = {\n  nodeId: (d) => d.key,\n  nodeWidth: 0.02,\n  nodePadding: 0.02,\n};\n\nconst DEFAULT_NODE_OPTIONS = {\n  type: 'polygon',\n  axis: false,\n  legend: false,\n  encode: {\n    shape: 'polygon',\n    x: 'x',\n    y: 'y',\n  },\n  scale: {\n    x: { type: 'identity' },\n    y: { type: 'identity' },\n  },\n  style: {\n    stroke: '#000',\n  },\n};\n\nconst DEFAULT_LINK_OPTIONS = {\n  type: 'polygon',\n  axis: false,\n  legend: false,\n  encode: {\n    shape: 'ribbon',\n    x: 'x',\n    y: 'y',\n  },\n  style: {\n    fillOpacity: 0.5,\n    stroke: undefined,\n  },\n};\n\nconst DEFAULT_LABEL_OPTIONS = {\n  textAlign: (d) => (d.x[0] < 0.5 ? 'start' : 'end'),\n  position: (d) => (d.x[0] < 0.5 ? 'right' : 'left'),\n  fontSize: 10,\n};\n\nexport type SankeyOptions = Omit<SankeyMark, 'type'>;\n\n/**\n * @todo Add interaction\n * @todo Add source-link color mode\n */\nexport const Sankey: CC<SankeyOptions> = (options) => {\n  const {\n    data,\n    encode = {},\n    scale,\n    style = {},\n    layout = {},\n    nodeLabels = [],\n    linkLabels = [],\n    animate = {},\n    tooltip = {},\n    interaction,\n    state = {},\n    viewStyle = {},\n  } = options;\n\n  // Initialize data, generating nodes by link if is not specified.\n  const { links, nodes } = initializeData(data, encode);\n\n  // Early check for empty data - return empty marks instead of processing\n  if (!links || links.length === 0) {\n    return [\n      // Empty node mark\n      deepMix({}, DEFAULT_NODE_OPTIONS, {\n        data: [],\n        encode: {},\n        scale,\n        style: subObject(style, 'node'),\n        viewStyle,\n        labels: [],\n        tooltip: false,\n        animate: false,\n        axis: false,\n        interaction,\n        state: {},\n      }),\n      // Empty link mark\n      deepMix({}, DEFAULT_LINK_OPTIONS, {\n        data: [],\n        encode: {},\n        labels: [],\n        style: subObject(style, 'link'),\n        tooltip: false,\n        animate: false,\n        interaction,\n        state: {},\n      }),\n    ];\n  }\n\n  // Extract encode for node and link.\n  const nodeEncode = subObject(encode, 'node');\n  const linkEncode = subObject(encode, 'link');\n  const { key: nodeKey = (d) => d.key, color = nodeKey } = nodeEncode;\n\n  // Transform data, using nodeKey as nodeId.\n  const { links: linkData, nodes: nodeData } = SankeyTransform({\n    ...DEFAULT_LAYOUT_OPTIONS,\n    nodeId: field(nodeKey),\n    ...layout,\n  })({ links, nodes });\n\n  // Extract label style and apply defaults.\n  const {\n    text = nodeKey,\n    spacing = 5,\n    ...labelStyle\n  } = subObject(style, 'label');\n\n  const key1 = field(nodeKey);\n\n  const nodeTooltip = subTooltip(\n    tooltip,\n    'node',\n    {\n      title: key1,\n      items: [{ field: 'value' }],\n    },\n    true,\n  );\n  const linkTooltip = subTooltip(tooltip, 'link', {\n    title: '',\n    items: [\n      (d) => ({ name: 'source', value: key1(d.source) }),\n      (d) => ({ name: 'target', value: key1(d.target) }),\n    ],\n  });\n  // Extract node and link state.\n  const [nodeState, linkState] = Object.entries(state).reduce(\n    (acc, [stateName, styleObj]) => {\n      const commonState = omitPrefixObject(styleObj, 'node', 'link');\n      const nodeState = subObject(styleObj, 'node');\n      acc[0][stateName] = { ...commonState, ...nodeState };\n      const linkState = subObject(styleObj, 'link');\n      acc[1][stateName] = { ...commonState, ...linkState };\n      return acc;\n    },\n    [{}, {}],\n  );\n  return [\n    deepMix({}, DEFAULT_NODE_OPTIONS, {\n      data: nodeData,\n      encode: { ...nodeEncode, color },\n      scale,\n      style: subObject(style, 'node'),\n      viewStyle,\n      labels: [\n        {\n          ...DEFAULT_LABEL_OPTIONS,\n          text,\n          dx: (d) => (d.x[0] < 0.5 ? spacing : -spacing),\n          ...labelStyle,\n        },\n        ...nodeLabels,\n      ],\n      tooltip: nodeTooltip,\n      animate: maybeAnimation(animate, 'node'),\n      axis: false,\n      interaction,\n      state: nodeState,\n    }),\n    deepMix({}, DEFAULT_LINK_OPTIONS, {\n      data: linkData,\n      encode: linkEncode,\n      labels: linkLabels,\n      style: {\n        fill: linkEncode.color ? undefined : '#aaa',\n        lineWidth: 0,\n        ...subObject(style, 'link'),\n      },\n      tooltip: linkTooltip,\n      animate: maybeAnimation(animate, 'link'),\n      interaction,\n      state: linkState,\n    }),\n  ];\n};\n\nSankey.props = {};\n", "export function weight(a, b) {\n  return b.value - a.value;\n}\n\nexport function frequency(a, b) {\n  return b.frequency - a.frequency;\n}\n\nexport function id(a, b) {\n  return `${a.id}`.localeCompare(`${b.id}`);\n}\n\nexport function name(a, b) {\n  return `${a.name}`.localeCompare(`${b.name}`);\n}\n", "import { group, sum } from '@antv/vendor/d3-array';\nimport { error } from '../../../utils/helper';\nimport { ArcData, ArcOptions, ArcEdge, ArcNode } from './types';\nimport * as SortMethods from './sort';\n\nconst DEFAULT_OPTIONS = {\n  y: 0,\n  thickness: 0.05,\n  weight: false,\n  marginRatio: 0.1,\n  id: (node) => node.id,\n  source: (edge) => edge.source,\n  target: (edge) => edge.target,\n  sourceWeight: (edge) => edge.value || 1,\n  targetWeight: (edge) => edge.value || 1,\n  sortBy: null,\n};\n\n/**\n * Layout for Arc / Chord diagram with d3 style.\n */\nexport function Arc(options?: ArcOptions) {\n  const {\n    y,\n    thickness,\n    weight,\n    marginRatio,\n    id,\n    source,\n    target,\n    sourceWeight,\n    targetWeight,\n    sortBy,\n  } = {\n    ...DEFAULT_OPTIONS,\n    ...options,\n  };\n\n  function arc(data: ArcData) {\n    // Clone first.\n    const nodes = data.nodes.map((n) => ({ ...n }));\n    const edges = data.edges.map((n) => ({ ...n }));\n\n    // Keep reference in below functions.\n    preprocess(nodes, edges);\n    sortNodes(nodes, edges);\n    layoutNodes(nodes, edges);\n    layoutEdges(nodes, edges);\n\n    return { nodes, edges };\n  }\n\n  /**\n   * Calculate id, value, frequency for node, and source,target for edge.\n   */\n  function preprocess(nodes: ArcNode[], edges: ArcEdge[]) {\n    edges.forEach((edge) => {\n      edge.source = source(edge);\n      edge.target = target(edge);\n      edge.sourceWeight = sourceWeight(edge);\n      edge.targetWeight = targetWeight(edge);\n    });\n\n    // Group edges by source, target.\n    const edgesBySource = group(edges, (e: any) => e.source);\n    const edgesByTarget = group(edges, (e: any) => e.target);\n\n    nodes.forEach((node) => {\n      node.id = id(node);\n      const sources = edgesBySource.has(node.id)\n        ? edgesBySource.get(node.id)\n        : [];\n      const targets = edgesByTarget.has(node.id)\n        ? edgesByTarget.get(node.id)\n        : [];\n      node.frequency = sources.length + targets.length;\n\n      node.value =\n        sum(sources, (d) => d.sourceWeight) +\n        sum(targets, (d) => d.targetWeight);\n    });\n\n    return { nodes, edges };\n  }\n\n  function sortNodes(nodes: ArcNode[], edges: ArcEdge[]) {\n    const method = typeof sortBy === 'function' ? sortBy : SortMethods[sortBy];\n\n    if (method) {\n      nodes.sort(method);\n    }\n  }\n\n  function layoutNodes(nodes: ArcNode[], edges: ArcEdge[]) {\n    const size = nodes.length;\n    if (!size) {\n      throw error(\"Invalid nodes: it's empty!\");\n    }\n\n    // No weight.\n    if (!weight) {\n      const deltaX = 1 / size;\n\n      nodes.forEach((node, i: number) => {\n        node.x = (i + 0.5) * deltaX;\n        node.y = y;\n      });\n\n      return { nodes, edges };\n    }\n\n    // todo: marginRatio should be in [0, 1)\n    // todo: thickness shoule be in (0, 1)\n    const margin = marginRatio / (2 * size);\n\n    const total = nodes.reduce((prev: number, node) => (prev += node.value), 0);\n\n    nodes.reduce((deltaX: number, node) => {\n      node.weight = node.value / total;\n      node.width = node.weight * (1 - marginRatio);\n      node.height = thickness;\n\n      /* points\n       * 3---2\n       * |   |\n       * 0---1\n       */\n      const minX = margin + deltaX;\n      const maxX = minX + node.width;\n      const minY = y - thickness / 2;\n      const maxY = minY + thickness;\n\n      node.x = [minX, maxX, maxX, minX];\n      node.y = [minY, minY, maxY, maxY];\n\n      // Return next deltaX.\n      return deltaX + node.width + 2 * margin;\n    }, 0);\n    return {\n      nodes,\n      edges,\n    };\n  }\n\n  /**\n   * Get edge layout information from nodes, and save into edge object.\n   */\n  function layoutEdges(nodes: ArcNode[], edges: ArcEdge[]) {\n    const nodesMap = new Map(nodes.map((d) => [d.id, d]));\n\n    if (!weight) {\n      edges.forEach((edge) => {\n        const sourceId = source(edge);\n        const targetId = target(edge);\n\n        const sourceNode: any = nodesMap.get(sourceId);\n        const targetNode: any = nodesMap.get(targetId);\n\n        // Edge's layout information is Equal with node.\n        if (sourceNode && targetNode) {\n          edge.x = [sourceNode.x, targetNode.x];\n          edge.y = [sourceNode.y, targetNode.y];\n        }\n      });\n      return { nodes, edges };\n    }\n\n    // Initial edge.x, edge.y.\n    edges.forEach((edge) => {\n      edge.x = [0, 0, 0, 0];\n      edge.y = [y, y, y, y];\n    });\n\n    // Group edges by source, target.\n    const edgesBySource = group(edges, (e: any) => e.source);\n    const edgesByTarget = group(edges, (e: any) => e.target);\n\n    // When weight = true, we need to calculation the bbox of edge start/end.\n    nodes.forEach((node) => {\n      const { edges, width, x, y, value, id } = node;\n\n      const sourceEdges = edgesBySource.get(id) || [];\n      const targetEdges = edgesByTarget.get(id) || [];\n\n      let offset = 0;\n      /* points\n       * 0----------2\n       * |          |\n       * 1----------3\n       */\n      sourceEdges.map((edge) => {\n        const w = (edge.sourceWeight / value) * width;\n        edge.x[0] = x[0] + offset;\n        edge.x[1] = x[0] + offset + w;\n\n        offset += w;\n      });\n\n      targetEdges.forEach((edge) => {\n        const w = (edge.targetWeight / value) * width;\n        edge.x[3] = x[0] + offset;\n        edge.x[2] = x[0] + offset + w;\n\n        offset += w;\n      });\n    });\n  }\n\n  return arc;\n}\n", "import { DataComponent as DC } from '../runtime';\nimport { Arc as ArcLayout } from '../data/utils/arc';\n\nexport type ArcOptions = Omit<Record<string, any>, 'type'>;\n\n/**\n * For arc diagram(edge with weight) or chord diagram(with weight)\n */\nexport const Arc: DC<ArcOptions> = (options) => {\n  return (data) => {\n    return ArcLayout(options)(data);\n  };\n};\n\nArc.props = {};\n", "import { deepMix } from '@antv/util';\nimport { CompositeMarkComponent as CC, MarkOptions } from '../runtime';\nimport { ChordMark } from '../spec';\nimport { subObject } from '../utils/helper';\nimport { subTooltip, maybeAnimation } from '../utils/mark';\nimport { Arc } from '../data/arc';\nimport { ArcOptions } from '../data/utils/arc/types';\nimport { field, initializeData } from './utils';\n\nconst DEFAULT_LAYOUT_OPTIONS: ArcOptions = {\n  y: 0,\n  thickness: 0.05, // width of the node, (0, 1)\n  marginRatio: 0.1, // margin ratio, [0, 1)\n  id: (node) => node.key,\n  source: (edge) => edge.source,\n  target: (edge) => edge.target,\n  sourceWeight: (edge) => edge.value || 1,\n  targetWeight: (edge) => edge.value || 1,\n  sortBy: null, // optional, id | weight | frequency | {function}\n};\n\nconst DEFAULT_NODE_OPTIONS = {\n  type: 'polygon',\n  axis: false,\n  legend: false,\n  encode: {\n    shape: 'polygon',\n    x: 'x',\n    y: 'y',\n  },\n  scale: {\n    x: { type: 'identity' },\n    y: { type: 'identity' },\n  },\n  style: {\n    opacity: 1,\n    fillOpacity: 1,\n    lineWidth: 1,\n  },\n};\n\nconst DEFAULT_LINK_OPTIONS = {\n  type: 'polygon',\n  axis: false,\n  legend: false,\n  encode: {\n    shape: 'ribbon',\n    x: 'x',\n    y: 'y',\n  },\n  style: {\n    opacity: 0.5,\n    lineWidth: 1,\n  },\n};\n\nconst DEFAULT_LABEL_OPTIONS = {\n  position: 'outside',\n  fontSize: 10,\n};\n\nexport type ChordOptions = Omit<ChordMark, 'type'>;\n\nexport const Chord: CC<ChordOptions> = (options, context) => {\n  const {\n    data,\n    encode = {},\n    scale,\n    style = {},\n    layout = {},\n    nodeLabels = [],\n    linkLabels = [],\n    animate = {},\n    tooltip = {},\n  } = options;\n\n  // Initialize data, generating nodes by link if is not specified.\n  const { nodes, links } = initializeData(data, encode);\n\n  // Extract encode for node and link.\n  const nodeEncode = subObject(encode, 'node');\n  const linkEncode = subObject(encode, 'link');\n  const { key: nodeKey = (d) => d.key, color = nodeKey } = nodeEncode;\n  const { linkEncodeColor = (d) => d.source } = linkEncode;\n  const {\n    nodeWidthRatio = DEFAULT_LAYOUT_OPTIONS.thickness,\n    nodePaddingRatio = DEFAULT_LAYOUT_OPTIONS.marginRatio,\n    ...restLayout\n  } = layout;\n\n  const { nodes: nodeData, edges: linkData } = Arc({\n    ...DEFAULT_LAYOUT_OPTIONS,\n    id: field(nodeKey),\n    thickness: nodeWidthRatio,\n    marginRatio: nodePaddingRatio,\n    ...restLayout,\n    weight: true,\n  })({ nodes, edges: links });\n\n  // Extract label style and apply defaults.\n  const { text = nodeKey, ...labelStyle } = subObject(style, 'label');\n\n  const nodeTooltip = subTooltip(\n    tooltip,\n    'node',\n    {\n      title: '',\n      items: [(d) => ({ name: d.key, value: d.value })],\n    },\n    true,\n  );\n  const linkTooltip = subTooltip(tooltip, 'link', {\n    title: '',\n    items: [(d) => ({ name: `${d.source} -> ${d.target}`, value: d.value })],\n  });\n\n  const { height, width } = context;\n\n  const minimumLen = Math.min(height, width);\n\n  return [\n    deepMix({}, DEFAULT_LINK_OPTIONS, {\n      data: linkData,\n      encode: { ...linkEncode, color: linkEncodeColor },\n      labels: linkLabels,\n      style: {\n        fill: linkEncodeColor ? undefined : '#aaa',\n        ...subObject(style, 'link'),\n      },\n      tooltip: linkTooltip,\n      animate: maybeAnimation(animate, 'link'),\n    }),\n    deepMix({}, DEFAULT_NODE_OPTIONS, {\n      data: nodeData,\n      encode: { ...nodeEncode, color },\n      scale,\n      style: subObject(style, 'node'),\n      coordinate: {\n        type: 'polar',\n        // Leave enough rendering space for the label.\n        outerRadius: (minimumLen - 20) / minimumLen,\n        startAngle: -Math.PI * 2,\n        endAngle: 0,\n      },\n      labels: [\n        {\n          ...DEFAULT_LABEL_OPTIONS,\n          text,\n          ...labelStyle,\n        },\n        ...nodeLabels,\n      ],\n      tooltip: nodeTooltip,\n      animate: maybeAnimation(animate, 'node'),\n      axis: false,\n    }),\n  ] as MarkOptions[];\n};\n\nChord.props = {};\n", "import { MarkComponent as MC } from '../runtime';\nimport { PathMark } from '../spec';\nimport { PathShape, PathHollow } from '../shape';\nimport {\n  baseGeometryChannels,\n  basePostInference,\n  basePreInference,\n} from './utils';\n\nconst shape = {\n  path: PathShape,\n  hollow: PathHollow,\n};\n\nexport type PathOptions = Omit<PathMark, 'type'>;\n\n/**\n * Draw a path.\n */\nexport const Path: MC<PathOptions> = (options) => {\n  return (index, scale, value, coordinate) => {\n    // The points is meaning less for path mark,\n    // because the position of path shapes specified\n    // by the d option. So set [0, 0] for render pipeline.\n    return [index, index.map(() => [[0, 0]])];\n  };\n};\n\nPath.props = {\n  defaultShape: 'path',\n  defaultLabelShape: 'label',\n  shape,\n  composite: false,\n  channels: [\n    ...baseGeometryChannels({ shapes: Object.keys(shape) }),\n    { name: 'd', scale: 'identity' },\n  ],\n  preInference: [...basePreInference()],\n  postInference: [...basePostInference()],\n};\n", "function defaultSeparation(a, b) {\n  return a.parent === b.parent ? 1 : 2;\n}\n\nfunction meanX(children) {\n  return children.reduce(meanXReduce, 0) / children.length;\n}\n\nfunction meanXReduce(x, c) {\n  return x + c.x;\n}\n\nfunction maxY(children) {\n  return 1 + children.reduce(maxYReduce, 0);\n}\n\nfunction maxYReduce(y, c) {\n  return Math.max(y, c.y);\n}\n\nfunction leafLeft(node) {\n  var children;\n  while (children = node.children) node = children[0];\n  return node;\n}\n\nfunction leafRight(node) {\n  var children;\n  while (children = node.children) node = children[children.length - 1];\n  return node;\n}\n\nexport default function() {\n  var separation = defaultSeparation,\n      dx = 1,\n      dy = 1,\n      nodeSize = false;\n\n  function cluster(root) {\n    var previousNode,\n        x = 0;\n\n    // First walk, computing the initial x & y values.\n    root.eachAfter(function(node) {\n      var children = node.children;\n      if (children) {\n        node.x = meanX(children);\n        node.y = maxY(children);\n      } else {\n        node.x = previousNode ? x += separation(node, previousNode) : 0;\n        node.y = 0;\n        previousNode = node;\n      }\n    });\n\n    var left = leafLeft(root),\n        right = leafRight(root),\n        x0 = left.x - separation(left, right) / 2,\n        x1 = right.x + separation(right, left) / 2;\n\n    // Second walk, normalizing x & y to the desired size.\n    return root.eachAfter(nodeSize ? function(node) {\n      node.x = (node.x - root.x) * dx;\n      node.y = (root.y - node.y) * dy;\n    } : function(node) {\n      node.x = (node.x - x0) / (x1 - x0) * dx;\n      node.y = (1 - (root.y ? node.y / root.y : 1)) * dy;\n    });\n  }\n\n  cluster.separation = function(x) {\n    return arguments.length ? (separation = x, cluster) : separation;\n  };\n\n  cluster.size = function(x) {\n    return arguments.length ? (nodeSize = false, dx = +x[0], dy = +x[1], cluster) : (nodeSize ? null : [dx, dy]);\n  };\n\n  cluster.nodeSize = function(x) {\n    return arguments.length ? (nodeSize = true, dx = +x[0], dy = +x[1], cluster) : (nodeSize ? [dx, dy] : null);\n  };\n\n  return cluster;\n}\n", "function count(node) {\n  var sum = 0,\n      children = node.children,\n      i = children && children.length;\n  if (!i) sum = 1;\n  else while (--i >= 0) sum += children[i].value;\n  node.value = sum;\n}\n\nexport default function() {\n  return this.eachAfter(count);\n}\n", "export default function(callback, that) {\n  let index = -1;\n  for (const node of this) {\n    callback.call(that, node, ++index, this);\n  }\n  return this;\n}\n", "export default function(callback, that) {\n  var node = this, nodes = [node], children, i, index = -1;\n  while (node = nodes.pop()) {\n    callback.call(that, node, ++index, this);\n    if (children = node.children) {\n      for (i = children.length - 1; i >= 0; --i) {\n        nodes.push(children[i]);\n      }\n    }\n  }\n  return this;\n}\n", "export default function(callback, that) {\n  var node = this, nodes = [node], next = [], children, i, n, index = -1;\n  while (node = nodes.pop()) {\n    next.push(node);\n    if (children = node.children) {\n      for (i = 0, n = children.length; i < n; ++i) {\n        nodes.push(children[i]);\n      }\n    }\n  }\n  while (node = next.pop()) {\n    callback.call(that, node, ++index, this);\n  }\n  return this;\n}\n", "export default function(callback, that) {\n  let index = -1;\n  for (const node of this) {\n    if (callback.call(that, node, ++index, this)) {\n      return node;\n    }\n  }\n}\n", "export default function(value) {\n  return this.eachAfter(function(node) {\n    var sum = +value(node.data) || 0,\n        children = node.children,\n        i = children && children.length;\n    while (--i >= 0) sum += children[i].value;\n    node.value = sum;\n  });\n}\n", "export default function(compare) {\n  return this.eachBefore(function(node) {\n    if (node.children) {\n      node.children.sort(compare);\n    }\n  });\n}\n", "export default function(end) {\n  var start = this,\n      ancestor = leastCommonAncestor(start, end),\n      nodes = [start];\n  while (start !== ancestor) {\n    start = start.parent;\n    nodes.push(start);\n  }\n  var k = nodes.length;\n  while (end !== ancestor) {\n    nodes.splice(k, 0, end);\n    end = end.parent;\n  }\n  return nodes;\n}\n\nfunction leastCommonAncestor(a, b) {\n  if (a === b) return a;\n  var aNodes = a.ancestors(),\n      bNodes = b.ancestors(),\n      c = null;\n  a = aNodes.pop();\n  b = bNodes.pop();\n  while (a === b) {\n    c = a;\n    a = aNodes.pop();\n    b = bNodes.pop();\n  }\n  return c;\n}\n", "export default function() {\n  var node = this, nodes = [node];\n  while (node = node.parent) {\n    nodes.push(node);\n  }\n  return nodes;\n}\n", "export default function() {\n  return Array.from(this);\n}\n", "export default function() {\n  var leaves = [];\n  this.eachBefore(function(node) {\n    if (!node.children) {\n      leaves.push(node);\n    }\n  });\n  return leaves;\n}\n", "export default function() {\n  var root = this, links = [];\n  root.each(function(node) {\n    if (node !== root) { // Dont include the roots parent, if any.\n      links.push({source: node.parent, target: node});\n    }\n  });\n  return links;\n}\n", "export default function*() {\n  var node = this, current, next = [node], children, i, n;\n  do {\n    current = next.reverse(), next = [];\n    while (node = current.pop()) {\n      yield node;\n      if (children = node.children) {\n        for (i = 0, n = children.length; i < n; ++i) {\n          next.push(children[i]);\n        }\n      }\n    }\n  } while (next.length);\n}\n", "import node_count from \"./count.js\";\nimport node_each from \"./each.js\";\nimport node_eachBefore from \"./eachBefore.js\";\nimport node_eachAfter from \"./eachAfter.js\";\nimport node_find from \"./find.js\";\nimport node_sum from \"./sum.js\";\nimport node_sort from \"./sort.js\";\nimport node_path from \"./path.js\";\nimport node_ancestors from \"./ancestors.js\";\nimport node_descendants from \"./descendants.js\";\nimport node_leaves from \"./leaves.js\";\nimport node_links from \"./links.js\";\nimport node_iterator from \"./iterator.js\";\n\nexport default function hierarchy(data, children) {\n  if (data instanceof Map) {\n    data = [undefined, data];\n    if (children === undefined) children = mapChildren;\n  } else if (children === undefined) {\n    children = objectChildren;\n  }\n\n  var root = new Node(data),\n      node,\n      nodes = [root],\n      child,\n      childs,\n      i,\n      n;\n\n  while (node = nodes.pop()) {\n    if ((childs = children(node.data)) && (n = (childs = Array.from(childs)).length)) {\n      node.children = childs;\n      for (i = n - 1; i >= 0; --i) {\n        nodes.push(child = childs[i] = new Node(childs[i]));\n        child.parent = node;\n        child.depth = node.depth + 1;\n      }\n    }\n  }\n\n  return root.eachBefore(computeHeight);\n}\n\nfunction node_copy() {\n  return hierarchy(this).eachBefore(copyData);\n}\n\nfunction objectChildren(d) {\n  return d.children;\n}\n\nfunction mapChildren(d) {\n  return Array.isArray(d) ? d[1] : null;\n}\n\nfunction copyData(node) {\n  if (node.data.value !== undefined) node.value = node.data.value;\n  node.data = node.data.data;\n}\n\nexport function computeHeight(node) {\n  var height = 0;\n  do node.height = height;\n  while ((node = node.parent) && (node.height < ++height));\n}\n\nexport function Node(data) {\n  this.data = data;\n  this.depth =\n  this.height = 0;\n  this.parent = null;\n}\n\nNode.prototype = hierarchy.prototype = {\n  constructor: Node,\n  count: node_count,\n  each: node_each,\n  eachAfter: node_eachAfter,\n  eachBefore: node_eachBefore,\n  find: node_find,\n  sum: node_sum,\n  sort: node_sort,\n  path: node_path,\n  ancestors: node_ancestors,\n  descendants: node_descendants,\n  leaves: node_leaves,\n  links: node_links,\n  copy: node_copy,\n  [Symbol.iterator]: node_iterator\n};\n", "export function optional(f) {\n  return f == null ? null : required(f);\n}\n\nexport function required(f) {\n  if (typeof f !== \"function\") throw new Error;\n  return f;\n}\n", "export function constantZero() {\n  return 0;\n}\n\nexport default function(x) {\n  return function() {\n    return x;\n  };\n}\n", "// https://en.wikipedia.org/wiki/Linear_congruential_generator#Parameters_in_common_use\nconst a = 1664525;\nconst c = 1013904223;\nconst m = 4294967296; // 2^32\n\nexport default function() {\n  let s = 1;\n  return () => (s = (a * s + c) % m) / m;\n}\n", "export default function(x) {\n  return typeof x === \"object\" && \"length\" in x\n    ? x // Array, TypedArray, NodeList, array-like\n    : Array.from(x); // Map, Set, iterable, string, or anything else\n}\n\nexport function shuffle(array, random) {\n  let m = array.length,\n      t,\n      i;\n\n  while (m) {\n    i = random() * m-- | 0;\n    t = array[m];\n    array[m] = array[i];\n    array[i] = t;\n  }\n\n  return array;\n}\n", "import {shuffle} from \"../array.js\";\nimport lcg from \"../lcg.js\";\n\nexport default function(circles) {\n  return packEncloseRandom(circles, lcg());\n}\n\nexport function packEncloseRandom(circles, random) {\n  var i = 0, n = (circles = shuffle(Array.from(circles), random)).length, B = [], p, e;\n\n  while (i < n) {\n    p = circles[i];\n    if (e && enclosesWeak(e, p)) ++i;\n    else e = encloseBasis(B = extendBasis(B, p)), i = 0;\n  }\n\n  return e;\n}\n\nfunction extendBasis(B, p) {\n  var i, j;\n\n  if (enclosesWeakAll(p, B)) return [p];\n\n  // If we get here then B must have at least one element.\n  for (i = 0; i < B.length; ++i) {\n    if (enclosesNot(p, B[i])\n        && enclosesWeakAll(encloseBasis2(B[i], p), B)) {\n      return [B[i], p];\n    }\n  }\n\n  // If we get here then B must have at least two elements.\n  for (i = 0; i < B.length - 1; ++i) {\n    for (j = i + 1; j < B.length; ++j) {\n      if (enclosesNot(encloseBasis2(B[i], B[j]), p)\n          && enclosesNot(encloseBasis2(B[i], p), B[j])\n          && enclosesNot(encloseBasis2(B[j], p), B[i])\n          && enclosesWeakAll(encloseBasis3(B[i], B[j], p), B)) {\n        return [B[i], B[j], p];\n      }\n    }\n  }\n\n  // If we get here then something is very wrong.\n  throw new Error;\n}\n\nfunction enclosesNot(a, b) {\n  var dr = a.r - b.r, dx = b.x - a.x, dy = b.y - a.y;\n  return dr < 0 || dr * dr < dx * dx + dy * dy;\n}\n\nfunction enclosesWeak(a, b) {\n  var dr = a.r - b.r + Math.max(a.r, b.r, 1) * 1e-9, dx = b.x - a.x, dy = b.y - a.y;\n  return dr > 0 && dr * dr > dx * dx + dy * dy;\n}\n\nfunction enclosesWeakAll(a, B) {\n  for (var i = 0; i < B.length; ++i) {\n    if (!enclosesWeak(a, B[i])) {\n      return false;\n    }\n  }\n  return true;\n}\n\nfunction encloseBasis(B) {\n  switch (B.length) {\n    case 1: return encloseBasis1(B[0]);\n    case 2: return encloseBasis2(B[0], B[1]);\n    case 3: return encloseBasis3(B[0], B[1], B[2]);\n  }\n}\n\nfunction encloseBasis1(a) {\n  return {\n    x: a.x,\n    y: a.y,\n    r: a.r\n  };\n}\n\nfunction encloseBasis2(a, b) {\n  var x1 = a.x, y1 = a.y, r1 = a.r,\n      x2 = b.x, y2 = b.y, r2 = b.r,\n      x21 = x2 - x1, y21 = y2 - y1, r21 = r2 - r1,\n      l = Math.sqrt(x21 * x21 + y21 * y21);\n  return {\n    x: (x1 + x2 + x21 / l * r21) / 2,\n    y: (y1 + y2 + y21 / l * r21) / 2,\n    r: (l + r1 + r2) / 2\n  };\n}\n\nfunction encloseBasis3(a, b, c) {\n  var x1 = a.x, y1 = a.y, r1 = a.r,\n      x2 = b.x, y2 = b.y, r2 = b.r,\n      x3 = c.x, y3 = c.y, r3 = c.r,\n      a2 = x1 - x2,\n      a3 = x1 - x3,\n      b2 = y1 - y2,\n      b3 = y1 - y3,\n      c2 = r2 - r1,\n      c3 = r3 - r1,\n      d1 = x1 * x1 + y1 * y1 - r1 * r1,\n      d2 = d1 - x2 * x2 - y2 * y2 + r2 * r2,\n      d3 = d1 - x3 * x3 - y3 * y3 + r3 * r3,\n      ab = a3 * b2 - a2 * b3,\n      xa = (b2 * d3 - b3 * d2) / (ab * 2) - x1,\n      xb = (b3 * c2 - b2 * c3) / ab,\n      ya = (a3 * d2 - a2 * d3) / (ab * 2) - y1,\n      yb = (a2 * c3 - a3 * c2) / ab,\n      A = xb * xb + yb * yb - 1,\n      B = 2 * (r1 + xa * xb + ya * yb),\n      C = xa * xa + ya * ya - r1 * r1,\n      r = -(Math.abs(A) > 1e-6 ? (B + Math.sqrt(B * B - 4 * A * C)) / (2 * A) : C / B);\n  return {\n    x: x1 + xa + xb * r,\n    y: y1 + ya + yb * r,\n    r: r\n  };\n}\n", "import array from \"../array.js\";\nimport lcg from \"../lcg.js\";\nimport {packEncloseRandom} from \"./enclose.js\";\n\nfunction place(b, a, c) {\n  var dx = b.x - a.x, x, a2,\n      dy = b.y - a.y, y, b2,\n      d2 = dx * dx + dy * dy;\n  if (d2) {\n    a2 = a.r + c.r, a2 *= a2;\n    b2 = b.r + c.r, b2 *= b2;\n    if (a2 > b2) {\n      x = (d2 + b2 - a2) / (2 * d2);\n      y = Math.sqrt(Math.max(0, b2 / d2 - x * x));\n      c.x = b.x - x * dx - y * dy;\n      c.y = b.y - x * dy + y * dx;\n    } else {\n      x = (d2 + a2 - b2) / (2 * d2);\n      y = Math.sqrt(Math.max(0, a2 / d2 - x * x));\n      c.x = a.x + x * dx - y * dy;\n      c.y = a.y + x * dy + y * dx;\n    }\n  } else {\n    c.x = a.x + c.r;\n    c.y = a.y;\n  }\n}\n\nfunction intersects(a, b) {\n  var dr = a.r + b.r - 1e-6, dx = b.x - a.x, dy = b.y - a.y;\n  return dr > 0 && dr * dr > dx * dx + dy * dy;\n}\n\nfunction score(node) {\n  var a = node._,\n      b = node.next._,\n      ab = a.r + b.r,\n      dx = (a.x * b.r + b.x * a.r) / ab,\n      dy = (a.y * b.r + b.y * a.r) / ab;\n  return dx * dx + dy * dy;\n}\n\nfunction Node(circle) {\n  this._ = circle;\n  this.next = null;\n  this.previous = null;\n}\n\nexport function packSiblingsRandom(circles, random) {\n  if (!(n = (circles = array(circles)).length)) return 0;\n\n  var a, b, c, n, aa, ca, i, j, k, sj, sk;\n\n  // Place the first circle.\n  a = circles[0], a.x = 0, a.y = 0;\n  if (!(n > 1)) return a.r;\n\n  // Place the second circle.\n  b = circles[1], a.x = -b.r, b.x = a.r, b.y = 0;\n  if (!(n > 2)) return a.r + b.r;\n\n  // Place the third circle.\n  place(b, a, c = circles[2]);\n\n  // Initialize the front-chain using the first three circles a, b and c.\n  a = new Node(a), b = new Node(b), c = new Node(c);\n  a.next = c.previous = b;\n  b.next = a.previous = c;\n  c.next = b.previous = a;\n\n  // Attempt to place each remaining circle\n  pack: for (i = 3; i < n; ++i) {\n    place(a._, b._, c = circles[i]), c = new Node(c);\n\n    // Find the closest intersecting circle on the front-chain, if any.\n    // Closeness is determined by linear distance along the front-chain.\n    // Ahead or behind is likewise determined by linear distance.\n    j = b.next, k = a.previous, sj = b._.r, sk = a._.r;\n    do {\n      if (sj <= sk) {\n        if (intersects(j._, c._)) {\n          b = j, a.next = b, b.previous = a, --i;\n          continue pack;\n        }\n        sj += j._.r, j = j.next;\n      } else {\n        if (intersects(k._, c._)) {\n          a = k, a.next = b, b.previous = a, --i;\n          continue pack;\n        }\n        sk += k._.r, k = k.previous;\n      }\n    } while (j !== k.next);\n\n    // Success! Insert the new circle c between a and b.\n    c.previous = a, c.next = b, a.next = b.previous = b = c;\n\n    // Compute the new closest circle pair to the centroid.\n    aa = score(a);\n    while ((c = c.next) !== b) {\n      if ((ca = score(c)) < aa) {\n        a = c, aa = ca;\n      }\n    }\n    b = a.next;\n  }\n\n  // Compute the enclosing circle of the front chain.\n  a = [b._], c = b; while ((c = c.next) !== b) a.push(c._); c = packEncloseRandom(a, random);\n\n  // Translate the circles to put the enclosing circle around the origin.\n  for (i = 0; i < n; ++i) a = circles[i], a.x -= c.x, a.y -= c.y;\n\n  return c.r;\n}\n\nexport default function(circles) {\n  packSiblingsRandom(circles, lcg());\n  return circles;\n}\n", "import {optional} from \"../accessors.js\";\nimport constant, {constantZero} from \"../constant.js\";\nimport lcg from \"../lcg.js\";\nimport {packSiblingsRandom} from \"./siblings.js\";\n\nfunction defaultRadius(d) {\n  return Math.sqrt(d.value);\n}\n\nexport default function() {\n  var radius = null,\n      dx = 1,\n      dy = 1,\n      padding = constantZero;\n\n  function pack(root) {\n    const random = lcg();\n    root.x = dx / 2, root.y = dy / 2;\n    if (radius) {\n      root.eachBefore(radiusLeaf(radius))\n          .eachAfter(packChildrenRandom(padding, 0.5, random))\n          .eachBefore(translateChild(1));\n    } else {\n      root.eachBefore(radiusLeaf(defaultRadius))\n          .eachAfter(packChildrenRandom(constantZero, 1, random))\n          .eachAfter(packChildrenRandom(padding, root.r / Math.min(dx, dy), random))\n          .eachBefore(translateChild(Math.min(dx, dy) / (2 * root.r)));\n    }\n    return root;\n  }\n\n  pack.radius = function(x) {\n    return arguments.length ? (radius = optional(x), pack) : radius;\n  };\n\n  pack.size = function(x) {\n    return arguments.length ? (dx = +x[0], dy = +x[1], pack) : [dx, dy];\n  };\n\n  pack.padding = function(x) {\n    return arguments.length ? (padding = typeof x === \"function\" ? x : constant(+x), pack) : padding;\n  };\n\n  return pack;\n}\n\nfunction radiusLeaf(radius) {\n  return function(node) {\n    if (!node.children) {\n      node.r = Math.max(0, +radius(node) || 0);\n    }\n  };\n}\n\nfunction packChildrenRandom(padding, k, random) {\n  return function(node) {\n    if (children = node.children) {\n      var children,\n          i,\n          n = children.length,\n          r = padding(node) * k || 0,\n          e;\n\n      if (r) for (i = 0; i < n; ++i) children[i].r += r;\n      e = packSiblingsRandom(children, random);\n      if (r) for (i = 0; i < n; ++i) children[i].r -= r;\n      node.r = e + r;\n    }\n  };\n}\n\nfunction translateChild(k) {\n  return function(node) {\n    var parent = node.parent;\n    node.r *= k;\n    if (parent) {\n      node.x = parent.x + k * node.x;\n      node.y = parent.y + k * node.y;\n    }\n  };\n}\n", "export default function(node) {\n  node.x0 = Math.round(node.x0);\n  node.y0 = Math.round(node.y0);\n  node.x1 = Math.round(node.x1);\n  node.y1 = Math.round(node.y1);\n}\n", "export default function(parent, x0, y0, x1, y1) {\n  var nodes = parent.children,\n      node,\n      i = -1,\n      n = nodes.length,\n      k = parent.value && (x1 - x0) / parent.value;\n\n  while (++i < n) {\n    node = nodes[i], node.y0 = y0, node.y1 = y1;\n    node.x0 = x0, node.x1 = x0 += node.value * k;\n  }\n}\n", "import roundNode from \"./treemap/round.js\";\nimport treemapDice from \"./treemap/dice.js\";\n\nexport default function() {\n  var dx = 1,\n      dy = 1,\n      padding = 0,\n      round = false;\n\n  function partition(root) {\n    var n = root.height + 1;\n    root.x0 =\n    root.y0 = padding;\n    root.x1 = dx;\n    root.y1 = dy / n;\n    root.eachBefore(positionNode(dy, n));\n    if (round) root.eachBefore(roundNode);\n    return root;\n  }\n\n  function positionNode(dy, n) {\n    return function(node) {\n      if (node.children) {\n        treemapDice(node, node.x0, dy * (node.depth + 1) / n, node.x1, dy * (node.depth + 2) / n);\n      }\n      var x0 = node.x0,\n          y0 = node.y0,\n          x1 = node.x1 - padding,\n          y1 = node.y1 - padding;\n      if (x1 < x0) x0 = x1 = (x0 + x1) / 2;\n      if (y1 < y0) y0 = y1 = (y0 + y1) / 2;\n      node.x0 = x0;\n      node.y0 = y0;\n      node.x1 = x1;\n      node.y1 = y1;\n    };\n  }\n\n  partition.round = function(x) {\n    return arguments.length ? (round = !!x, partition) : round;\n  };\n\n  partition.size = function(x) {\n    return arguments.length ? (dx = +x[0], dy = +x[1], partition) : [dx, dy];\n  };\n\n  partition.padding = function(x) {\n    return arguments.length ? (padding = +x, partition) : padding;\n  };\n\n  return partition;\n}\n", "import {optional} from \"./accessors.js\";\nimport {Node, computeHeight} from \"./hierarchy/index.js\";\n\nvar preroot = {depth: -1},\n    ambiguous = {},\n    imputed = {};\n\nfunction defaultId(d) {\n  return d.id;\n}\n\nfunction defaultParentId(d) {\n  return d.parentId;\n}\n\nexport default function() {\n  var id = defaultId,\n      parentId = defaultParentId,\n      path;\n\n  function stratify(data) {\n    var nodes = Array.from(data),\n        currentId = id,\n        currentParentId = parentId,\n        n,\n        d,\n        i,\n        root,\n        parent,\n        node,\n        nodeId,\n        nodeKey,\n        nodeByKey = new Map;\n\n    if (path != null) {\n      const I = nodes.map((d, i) => normalize(path(d, i, data)));\n      const P = I.map(parentof);\n      const S = new Set(I).add(\"\");\n      for (const i of P) {\n        if (!S.has(i)) {\n          S.add(i);\n          I.push(i);\n          P.push(parentof(i));\n          nodes.push(imputed);\n        }\n      }\n      currentId = (_, i) => I[i];\n      currentParentId = (_, i) => P[i];\n    }\n\n    for (i = 0, n = nodes.length; i < n; ++i) {\n      d = nodes[i], node = nodes[i] = new Node(d);\n      if ((nodeId = currentId(d, i, data)) != null && (nodeId += \"\")) {\n        nodeKey = node.id = nodeId;\n        nodeByKey.set(nodeKey, nodeByKey.has(nodeKey) ? ambiguous : node);\n      }\n      if ((nodeId = currentParentId(d, i, data)) != null && (nodeId += \"\")) {\n        node.parent = nodeId;\n      }\n    }\n\n    for (i = 0; i < n; ++i) {\n      node = nodes[i];\n      if (nodeId = node.parent) {\n        parent = nodeByKey.get(nodeId);\n        if (!parent) throw new Error(\"missing: \" + nodeId);\n        if (parent === ambiguous) throw new Error(\"ambiguous: \" + nodeId);\n        if (parent.children) parent.children.push(node);\n        else parent.children = [node];\n        node.parent = parent;\n      } else {\n        if (root) throw new Error(\"multiple roots\");\n        root = node;\n      }\n    }\n\n    if (!root) throw new Error(\"no root\");\n\n    // When imputing internal nodes, only introduce roots if needed.\n    // Then replace the imputed marker data with null.\n    if (path != null) {\n      while (root.data === imputed && root.children.length === 1) {\n        root = root.children[0], --n;\n      }\n      for (let i = nodes.length - 1; i >= 0; --i) {\n        node = nodes[i];\n        if (node.data !== imputed) break;\n        node.data = null;\n      }\n    }\n\n    root.parent = preroot;\n    root.eachBefore(function(node) { node.depth = node.parent.depth + 1; --n; }).eachBefore(computeHeight);\n    root.parent = null;\n    if (n > 0) throw new Error(\"cycle\");\n\n    return root;\n  }\n\n  stratify.id = function(x) {\n    return arguments.length ? (id = optional(x), stratify) : id;\n  };\n\n  stratify.parentId = function(x) {\n    return arguments.length ? (parentId = optional(x), stratify) : parentId;\n  };\n\n  stratify.path = function(x) {\n    return arguments.length ? (path = optional(x), stratify) : path;\n  };\n\n  return stratify;\n}\n\n// To normalize a path, we coerce to a string, strip the trailing slash if any\n// (as long as the trailing slash is not immediately preceded by another slash),\n// and add leading slash if missing.\nfunction normalize(path) {\n  path = `${path}`;\n  let i = path.length;\n  if (slash(path, i - 1) && !slash(path, i - 2)) path = path.slice(0, -1);\n  return path[0] === \"/\" ? path : `/${path}`;\n}\n\n// Walk backwards to find the first slash that is not the leading slash, e.g.:\n// \"/foo/bar\"  \"/foo\", \"/foo\"  \"/\", \"/\"  \"\". (The root is special-cased\n// because the id of the root must be a truthy value.)\nfunction parentof(path) {\n  let i = path.length;\n  if (i < 2) return \"\";\n  while (--i > 1) if (slash(path, i)) break;\n  return path.slice(0, i);\n}\n\n// Slashes can be escaped; to determine whether a slash is a path delimiter, we\n// count the number of preceding backslashes escaping the forward slash: an odd\n// number indicates an escaped forward slash.\nfunction slash(path, i) {\n  if (path[i] === \"/\") {\n    let k = 0;\n    while (i > 0 && path[--i] === \"\\\\\") ++k;\n    if ((k & 1) === 0) return true;\n  }\n  return false;\n}\n", "import {Node} from \"./hierarchy/index.js\";\n\nfunction defaultSeparation(a, b) {\n  return a.parent === b.parent ? 1 : 2;\n}\n\n// function radialSeparation(a, b) {\n//   return (a.parent === b.parent ? 1 : 2) / a.depth;\n// }\n\n// This function is used to traverse the left contour of a subtree (or\n// subforest). It returns the successor of v on this contour. This successor is\n// either given by the leftmost child of v or by the thread of v. The function\n// returns null if and only if v is on the highest level of its subtree.\nfunction nextLeft(v) {\n  var children = v.children;\n  return children ? children[0] : v.t;\n}\n\n// This function works analogously to nextLeft.\nfunction nextRight(v) {\n  var children = v.children;\n  return children ? children[children.length - 1] : v.t;\n}\n\n// Shifts the current subtree rooted at w+. This is done by increasing\n// prelim(w+) and mod(w+) by shift.\nfunction moveSubtree(wm, wp, shift) {\n  var change = shift / (wp.i - wm.i);\n  wp.c -= change;\n  wp.s += shift;\n  wm.c += change;\n  wp.z += shift;\n  wp.m += shift;\n}\n\n// All other shifts, applied to the smaller subtrees between w- and w+, are\n// performed by this function. To prepare the shifts, we have to adjust\n// change(w+), shift(w+), and change(w-).\nfunction executeShifts(v) {\n  var shift = 0,\n      change = 0,\n      children = v.children,\n      i = children.length,\n      w;\n  while (--i >= 0) {\n    w = children[i];\n    w.z += shift;\n    w.m += shift;\n    shift += w.s + (change += w.c);\n  }\n}\n\n// If vi-s ancestor is a sibling of v, returns vi-s ancestor. Otherwise,\n// returns the specified (default) ancestor.\nfunction nextAncestor(vim, v, ancestor) {\n  return vim.a.parent === v.parent ? vim.a : ancestor;\n}\n\nfunction TreeNode(node, i) {\n  this._ = node;\n  this.parent = null;\n  this.children = null;\n  this.A = null; // default ancestor\n  this.a = this; // ancestor\n  this.z = 0; // prelim\n  this.m = 0; // mod\n  this.c = 0; // change\n  this.s = 0; // shift\n  this.t = null; // thread\n  this.i = i; // number\n}\n\nTreeNode.prototype = Object.create(Node.prototype);\n\nfunction treeRoot(root) {\n  var tree = new TreeNode(root, 0),\n      node,\n      nodes = [tree],\n      child,\n      children,\n      i,\n      n;\n\n  while (node = nodes.pop()) {\n    if (children = node._.children) {\n      node.children = new Array(n = children.length);\n      for (i = n - 1; i >= 0; --i) {\n        nodes.push(child = node.children[i] = new TreeNode(children[i], i));\n        child.parent = node;\n      }\n    }\n  }\n\n  (tree.parent = new TreeNode(null, 0)).children = [tree];\n  return tree;\n}\n\n// Node-link tree diagram using the Reingold-Tilford \"tidy\" algorithm\nexport default function() {\n  var separation = defaultSeparation,\n      dx = 1,\n      dy = 1,\n      nodeSize = null;\n\n  function tree(root) {\n    var t = treeRoot(root);\n\n    // Compute the layout using Buchheim et al.s algorithm.\n    t.eachAfter(firstWalk), t.parent.m = -t.z;\n    t.eachBefore(secondWalk);\n\n    // If a fixed node size is specified, scale x and y.\n    if (nodeSize) root.eachBefore(sizeNode);\n\n    // If a fixed tree size is specified, scale x and y based on the extent.\n    // Compute the left-most, right-most, and depth-most nodes for extents.\n    else {\n      var left = root,\n          right = root,\n          bottom = root;\n      root.eachBefore(function(node) {\n        if (node.x < left.x) left = node;\n        if (node.x > right.x) right = node;\n        if (node.depth > bottom.depth) bottom = node;\n      });\n      var s = left === right ? 1 : separation(left, right) / 2,\n          tx = s - left.x,\n          kx = dx / (right.x + s + tx),\n          ky = dy / (bottom.depth || 1);\n      root.eachBefore(function(node) {\n        node.x = (node.x + tx) * kx;\n        node.y = node.depth * ky;\n      });\n    }\n\n    return root;\n  }\n\n  // Computes a preliminary x-coordinate for v. Before that, FIRST WALK is\n  // applied recursively to the children of v, as well as the function\n  // APPORTION. After spacing out the children by calling EXECUTE SHIFTS, the\n  // node v is placed to the midpoint of its outermost children.\n  function firstWalk(v) {\n    var children = v.children,\n        siblings = v.parent.children,\n        w = v.i ? siblings[v.i - 1] : null;\n    if (children) {\n      executeShifts(v);\n      var midpoint = (children[0].z + children[children.length - 1].z) / 2;\n      if (w) {\n        v.z = w.z + separation(v._, w._);\n        v.m = v.z - midpoint;\n      } else {\n        v.z = midpoint;\n      }\n    } else if (w) {\n      v.z = w.z + separation(v._, w._);\n    }\n    v.parent.A = apportion(v, w, v.parent.A || siblings[0]);\n  }\n\n  // Computes all real x-coordinates by summing up the modifiers recursively.\n  function secondWalk(v) {\n    v._.x = v.z + v.parent.m;\n    v.m += v.parent.m;\n  }\n\n  // The core of the algorithm. Here, a new subtree is combined with the\n  // previous subtrees. Threads are used to traverse the inside and outside\n  // contours of the left and right subtree up to the highest common level. The\n  // vertices used for the traversals are vi+, vi-, vo-, and vo+, where the\n  // superscript o means outside and i means inside, the subscript - means left\n  // subtree and + means right subtree. For summing up the modifiers along the\n  // contour, we use respective variables si+, si-, so-, and so+. Whenever two\n  // nodes of the inside contours conflict, we compute the left one of the\n  // greatest uncommon ancestors using the function ANCESTOR and call MOVE\n  // SUBTREE to shift the subtree and prepare the shifts of smaller subtrees.\n  // Finally, we add a new thread (if necessary).\n  function apportion(v, w, ancestor) {\n    if (w) {\n      var vip = v,\n          vop = v,\n          vim = w,\n          vom = vip.parent.children[0],\n          sip = vip.m,\n          sop = vop.m,\n          sim = vim.m,\n          som = vom.m,\n          shift;\n      while (vim = nextRight(vim), vip = nextLeft(vip), vim && vip) {\n        vom = nextLeft(vom);\n        vop = nextRight(vop);\n        vop.a = v;\n        shift = vim.z + sim - vip.z - sip + separation(vim._, vip._);\n        if (shift > 0) {\n          moveSubtree(nextAncestor(vim, v, ancestor), v, shift);\n          sip += shift;\n          sop += shift;\n        }\n        sim += vim.m;\n        sip += vip.m;\n        som += vom.m;\n        sop += vop.m;\n      }\n      if (vim && !nextRight(vop)) {\n        vop.t = vim;\n        vop.m += sim - sop;\n      }\n      if (vip && !nextLeft(vom)) {\n        vom.t = vip;\n        vom.m += sip - som;\n        ancestor = v;\n      }\n    }\n    return ancestor;\n  }\n\n  function sizeNode(node) {\n    node.x *= dx;\n    node.y = node.depth * dy;\n  }\n\n  tree.separation = function(x) {\n    return arguments.length ? (separation = x, tree) : separation;\n  };\n\n  tree.size = function(x) {\n    return arguments.length ? (nodeSize = false, dx = +x[0], dy = +x[1], tree) : (nodeSize ? null : [dx, dy]);\n  };\n\n  tree.nodeSize = function(x) {\n    return arguments.length ? (nodeSize = true, dx = +x[0], dy = +x[1], tree) : (nodeSize ? [dx, dy] : null);\n  };\n\n  return tree;\n}\n", "export default function(parent, x0, y0, x1, y1) {\n  var nodes = parent.children,\n      node,\n      i = -1,\n      n = nodes.length,\n      k = parent.value && (y1 - y0) / parent.value;\n\n  while (++i < n) {\n    node = nodes[i], node.x0 = x0, node.x1 = x1;\n    node.y0 = y0, node.y1 = y0 += node.value * k;\n  }\n}\n", "import treemapDice from \"./dice.js\";\nimport treemapSlice from \"./slice.js\";\n\nexport var phi = (1 + Math.sqrt(5)) / 2;\n\nexport function squarifyRatio(ratio, parent, x0, y0, x1, y1) {\n  var rows = [],\n      nodes = parent.children,\n      row,\n      nodeValue,\n      i0 = 0,\n      i1 = 0,\n      n = nodes.length,\n      dx, dy,\n      value = parent.value,\n      sumValue,\n      minValue,\n      maxValue,\n      newRatio,\n      minRatio,\n      alpha,\n      beta;\n\n  while (i0 < n) {\n    dx = x1 - x0, dy = y1 - y0;\n\n    // Find the next non-empty node.\n    do sumValue = nodes[i1++].value; while (!sumValue && i1 < n);\n    minValue = maxValue = sumValue;\n    alpha = Math.max(dy / dx, dx / dy) / (value * ratio);\n    beta = sumValue * sumValue * alpha;\n    minRatio = Math.max(maxValue / beta, beta / minValue);\n\n    // Keep adding nodes while the aspect ratio maintains or improves.\n    for (; i1 < n; ++i1) {\n      sumValue += nodeValue = nodes[i1].value;\n      if (nodeValue < minValue) minValue = nodeValue;\n      if (nodeValue > maxValue) maxValue = nodeValue;\n      beta = sumValue * sumValue * alpha;\n      newRatio = Math.max(maxValue / beta, beta / minValue);\n      if (newRatio > minRatio) { sumValue -= nodeValue; break; }\n      minRatio = newRatio;\n    }\n\n    // Position and record the row orientation.\n    rows.push(row = {value: sumValue, dice: dx < dy, children: nodes.slice(i0, i1)});\n    if (row.dice) treemapDice(row, x0, y0, x1, value ? y0 += dy * sumValue / value : y1);\n    else treemapSlice(row, x0, y0, value ? x0 += dx * sumValue / value : x1, y1);\n    value -= sumValue, i0 = i1;\n  }\n\n  return rows;\n}\n\nexport default (function custom(ratio) {\n\n  function squarify(parent, x0, y0, x1, y1) {\n    squarifyRatio(ratio, parent, x0, y0, x1, y1);\n  }\n\n  squarify.ratio = function(x) {\n    return custom((x = +x) > 1 ? x : 1);\n  };\n\n  return squarify;\n})(phi);\n", "import roundNode from \"./round.js\";\nimport squarify from \"./squarify.js\";\nimport {required} from \"../accessors.js\";\nimport constant, {constantZero} from \"../constant.js\";\n\nexport default function() {\n  var tile = squarify,\n      round = false,\n      dx = 1,\n      dy = 1,\n      paddingStack = [0],\n      paddingInner = constantZero,\n      paddingTop = constantZero,\n      paddingRight = constantZero,\n      paddingBottom = constantZero,\n      paddingLeft = constantZero;\n\n  function treemap(root) {\n    root.x0 =\n    root.y0 = 0;\n    root.x1 = dx;\n    root.y1 = dy;\n    root.eachBefore(positionNode);\n    paddingStack = [0];\n    if (round) root.eachBefore(roundNode);\n    return root;\n  }\n\n  function positionNode(node) {\n    var p = paddingStack[node.depth],\n        x0 = node.x0 + p,\n        y0 = node.y0 + p,\n        x1 = node.x1 - p,\n        y1 = node.y1 - p;\n    if (x1 < x0) x0 = x1 = (x0 + x1) / 2;\n    if (y1 < y0) y0 = y1 = (y0 + y1) / 2;\n    node.x0 = x0;\n    node.y0 = y0;\n    node.x1 = x1;\n    node.y1 = y1;\n    if (node.children) {\n      p = paddingStack[node.depth + 1] = paddingInner(node) / 2;\n      x0 += paddingLeft(node) - p;\n      y0 += paddingTop(node) - p;\n      x1 -= paddingRight(node) - p;\n      y1 -= paddingBottom(node) - p;\n      if (x1 < x0) x0 = x1 = (x0 + x1) / 2;\n      if (y1 < y0) y0 = y1 = (y0 + y1) / 2;\n      tile(node, x0, y0, x1, y1);\n    }\n  }\n\n  treemap.round = function(x) {\n    return arguments.length ? (round = !!x, treemap) : round;\n  };\n\n  treemap.size = function(x) {\n    return arguments.length ? (dx = +x[0], dy = +x[1], treemap) : [dx, dy];\n  };\n\n  treemap.tile = function(x) {\n    return arguments.length ? (tile = required(x), treemap) : tile;\n  };\n\n  treemap.padding = function(x) {\n    return arguments.length ? treemap.paddingInner(x).paddingOuter(x) : treemap.paddingInner();\n  };\n\n  treemap.paddingInner = function(x) {\n    return arguments.length ? (paddingInner = typeof x === \"function\" ? x : constant(+x), treemap) : paddingInner;\n  };\n\n  treemap.paddingOuter = function(x) {\n    return arguments.length ? treemap.paddingTop(x).paddingRight(x).paddingBottom(x).paddingLeft(x) : treemap.paddingTop();\n  };\n\n  treemap.paddingTop = function(x) {\n    return arguments.length ? (paddingTop = typeof x === \"function\" ? x : constant(+x), treemap) : paddingTop;\n  };\n\n  treemap.paddingRight = function(x) {\n    return arguments.length ? (paddingRight = typeof x === \"function\" ? x : constant(+x), treemap) : paddingRight;\n  };\n\n  treemap.paddingBottom = function(x) {\n    return arguments.length ? (paddingBottom = typeof x === \"function\" ? x : constant(+x), treemap) : paddingBottom;\n  };\n\n  treemap.paddingLeft = function(x) {\n    return arguments.length ? (paddingLeft = typeof x === \"function\" ? x : constant(+x), treemap) : paddingLeft;\n  };\n\n  return treemap;\n}\n", "export default function(parent, x0, y0, x1, y1) {\n  var nodes = parent.children,\n      i, n = nodes.length,\n      sum, sums = new Array(n + 1);\n\n  for (sums[0] = sum = i = 0; i < n; ++i) {\n    sums[i + 1] = sum += nodes[i].value;\n  }\n\n  partition(0, n, parent.value, x0, y0, x1, y1);\n\n  function partition(i, j, value, x0, y0, x1, y1) {\n    if (i >= j - 1) {\n      var node = nodes[i];\n      node.x0 = x0, node.y0 = y0;\n      node.x1 = x1, node.y1 = y1;\n      return;\n    }\n\n    var valueOffset = sums[i],\n        valueTarget = (value / 2) + valueOffset,\n        k = i + 1,\n        hi = j - 1;\n\n    while (k < hi) {\n      var mid = k + hi >>> 1;\n      if (sums[mid] < valueTarget) k = mid + 1;\n      else hi = mid;\n    }\n\n    if ((valueTarget - sums[k - 1]) < (sums[k] - valueTarget) && i + 1 < k) --k;\n\n    var valueLeft = sums[k] - valueOffset,\n        valueRight = value - valueLeft;\n\n    if ((x1 - x0) > (y1 - y0)) {\n      var xk = value ? (x0 * valueRight + x1 * valueLeft) / value : x1;\n      partition(i, k, valueLeft, x0, y0, xk, y1);\n      partition(k, j, valueRight, xk, y0, x1, y1);\n    } else {\n      var yk = value ? (y0 * valueRight + y1 * valueLeft) / value : y1;\n      partition(i, k, valueLeft, x0, y0, x1, yk);\n      partition(k, j, valueRight, x0, yk, x1, y1);\n    }\n  }\n}\n", "import dice from \"./dice.js\";\nimport slice from \"./slice.js\";\n\nexport default function(parent, x0, y0, x1, y1) {\n  (parent.depth & 1 ? slice : dice)(parent, x0, y0, x1, y1);\n}\n", "import treemapDice from \"./dice.js\";\nimport treemapSlice from \"./slice.js\";\nimport {phi, squarifyRatio} from \"./squarify.js\";\n\nexport default (function custom(ratio) {\n\n  function resquarify(parent, x0, y0, x1, y1) {\n    if ((rows = parent._squarify) && (rows.ratio === ratio)) {\n      var rows,\n          row,\n          nodes,\n          i,\n          j = -1,\n          n,\n          m = rows.length,\n          value = parent.value;\n\n      while (++j < m) {\n        row = rows[j], nodes = row.children;\n        for (i = row.value = 0, n = nodes.length; i < n; ++i) row.value += nodes[i].value;\n        if (row.dice) treemapDice(row, x0, y0, x1, value ? y0 += (y1 - y0) * row.value / value : y1);\n        else treemapSlice(row, x0, y0, value ? x0 += (x1 - x0) * row.value / value : x1, y1);\n        value -= row.value;\n      }\n    } else {\n      parent._squarify = rows = squarifyRatio(ratio, parent, x0, y0, x1, y1);\n      rows.ratio = ratio;\n    }\n  }\n\n  resquarify.ratio = function(x) {\n    return custom((x = +x) > 1 ? x : 1);\n  };\n\n  return resquarify;\n})(phi);\n", "import { isArray, get } from '@antv/util';\nimport {\n  stratify,\n  hierarchy,\n  treemap as treemapLayout,\n  treemapBinary,\n  treemapDice,\n  treemapSlice,\n  treemapSliceDice,\n  treemapSquarify,\n  treemapResquarify,\n} from '@antv/vendor/d3-hierarchy';\nimport type { HierarchyNode } from '@antv/vendor/d3-hierarchy';\nimport { field } from '../mark/utils';\n\ntype Data = any[] | Record<string, any>;\n\nexport interface Node<T> extends HierarchyNode<T> {\n  x0?: number;\n  y0?: number;\n  x1?: number;\n  y1?: number;\n}\n\ntype Layout = {\n  tile?:\n    | 'treemapBinary'\n    | 'treemapDice'\n    | 'treemapSlice'\n    | 'treemapSliceDice'\n    | 'treemapSquarify'\n    | 'treemapResquarify';\n  size?: [number, number];\n  round?: boolean;\n  // Ignore the value of the parent node when calculating the total value.\n  ignoreParentValue?: boolean;\n  ratio?: number;\n  padding?: number;\n  paddingInner?: number;\n  paddingOuter?: number;\n  paddingTop?: number;\n  paddingRight?: number;\n  paddingBottom?: number;\n  paddingLeft?: number;\n  sort?(a: any, b: any): number;\n  path?: (d: any) => any;\n  /** The granularity of Display layer.  */\n  layer?: number | ((d: any) => any);\n};\n\n/**\n * @description Path need when the data is a flat json structure,\n * and the tree object structure do not need.\n */\nfunction generateHierarchyRoot(data: Data, path: (d: any) => any): Node<Data> {\n  if (Array.isArray(data)) {\n    return typeof path === 'function'\n      ? stratify().path(path)(data)\n      : stratify()(data);\n  }\n  return hierarchy(data);\n}\n\nfunction addObjectDataPath(\n  root: Node<Record<string, any>>,\n  path: any = [root.data.name],\n) {\n  // @ts-ignore\n  root.id = root.id || root.data.name;\n  root.path = path;\n\n  if (root.children) {\n    root.children.forEach((item) => {\n      // @ts-ignore\n      item.id = `${root.id}/${item.data.name}`;\n      item.path = [...path, item.data.name] as any;\n      addObjectDataPath(item, item.path);\n    });\n  }\n}\n\nfunction addArrayDataPath(root: Node<any[]>) {\n  const name = get(root, ['data', 'name']);\n  if (name.replaceAll) {\n    root.path = name.replaceAll('.', '/').split('/');\n  }\n\n  if (root.children) {\n    root.children.forEach((item) => {\n      addArrayDataPath(item);\n    });\n  }\n}\n\nfunction getTileMethod(tile: string, ratio: number) {\n  const tiles = {\n    treemapBinary,\n    treemapDice,\n    treemapSlice,\n    treemapSliceDice,\n    treemapSquarify,\n    treemapResquarify,\n  };\n  const tileMethod =\n    tile === 'treemapSquarify' ? tiles[tile].ratio(ratio) : tiles[tile];\n  if (!tileMethod) {\n    throw new TypeError('Invalid tile method!');\n  }\n  return tileMethod;\n}\n\nexport function treeDataTransform(\n  data,\n  layout: Layout,\n  encode,\n): [Node<Data>[], Node<Data>[]] {\n  const { value } = encode;\n  const tileMethod = getTileMethod(layout.tile, layout.ratio);\n\n  const root = generateHierarchyRoot(data, layout.path);\n\n  if (isArray(data)) {\n    addArrayDataPath(root as HierarchyNode<any[]>);\n  } else {\n    addObjectDataPath(root as HierarchyNode<Record<string, any>>);\n  }\n\n  // Calculate the value and sort.\n  value\n    ? root\n        .sum((d) =>\n          layout.ignoreParentValue && (d as Record<string, any>).children\n            ? 0\n            : field(value)(d),\n        )\n        .sort(layout.sort)\n    : root.count();\n\n  treemapLayout()\n    .tile(tileMethod)\n    // @ts-ignore\n    .size(layout.size)\n    .round(layout.round)\n    .paddingInner(layout.paddingInner)\n    .paddingOuter(layout.paddingOuter)\n    .paddingTop(layout.paddingTop)\n    .paddingRight(layout.paddingRight)\n    .paddingBottom(layout.paddingBottom)\n    .paddingLeft(layout.paddingLeft)(root);\n\n  const nodes = root.descendants().map((d) =>\n    Object.assign(d, {\n      id: d.id.replace(/^\\//, ''),\n      x: [d.x0, d.x1],\n      y: [d.y0, d.y1],\n    }),\n  );\n\n  const filterData = nodes.filter(\n    typeof layout.layer === 'function'\n      ? layout.layer\n      : (d) => d.height === layout.layer,\n  );\n\n  return [filterData, nodes];\n}\n", "import { deepMix, get, last } from '@antv/util';\nimport { subObject } from '../utils/helper';\nimport { CompositionComponent as CC } from '../runtime';\nimport { TreemapMark } from '../spec';\nimport { maybeTooltip } from '../utils/mark';\nimport { treeDataTransform } from '../utils/treeDataTransform';\n\nexport type TreemapOptions = Omit<TreemapMark, 'type'>;\n\n// Defaults\nconst GET_DEFAULT_LAYOUT_OPTIONS = (width, height) => ({\n  tile: 'treemapSquarify',\n  ratio: 0.5 * (1 + Math.sqrt(5)),\n  size: [width, height],\n  round: false,\n  ignoreParentValue: true,\n  padding: 0,\n  paddingInner: 0,\n  paddingOuter: 0,\n  paddingTop: 0,\n  paddingRight: 0,\n  paddingBottom: 0,\n  paddingLeft: 0,\n  sort: (a, b) => b.value - a.value,\n  layer: 0,\n});\n\nconst GET_DEFAULT_OPTIONS = (width, height) => ({\n  type: 'rect',\n  axis: false,\n  encode: {\n    x: 'x',\n    y: 'y',\n    key: 'id',\n    color: (d) => d.path[1],\n  },\n  scale: {\n    x: { domain: [0, width], range: [0, 1] },\n    y: { domain: [0, height], range: [0, 1] },\n  },\n  style: {\n    stroke: '#fff',\n  },\n  state: {\n    active: { opacity: 0.6 },\n    inactive: { opacity: 1 },\n  },\n});\n\nconst DEFAULT_LABEL_OPTIONS = {\n  fontSize: 10,\n  text: (d) => last(d.path),\n  position: 'inside',\n  fill: '#000',\n  textOverflow: 'clip',\n  wordWrap: true,\n  maxLines: 1,\n  wordWrapWidth: (d) => d.x1 - d.x0,\n  isTreemapLabel: true,\n};\n\nconst DEFAULT_TOOLTIP_OPTIONS = {\n  title: (d) => d.path?.join?.('.'),\n  items: [{ field: 'value' }],\n};\n\nconst DEFAULT_TOOLTIP_OPTIONS_DRILL = {\n  title: (d) => last(d.path),\n  items: [{ field: 'value' }],\n};\n\nexport const Treemap: CC<TreemapOptions> = (options, context) => {\n  const { width, height, options: markOptions } = context;\n\n  const {\n    data,\n    encode = {},\n    scale,\n    style = {},\n    layout = {},\n    labels = [],\n    tooltip = {},\n    ...resOptions\n  } = options;\n\n  const treemapDrillDown =\n    get(markOptions, ['interaction', 'treemapDrillDown']) ||\n    get(markOptions, ['marks', 0, 'interaction', 'treemapDrillDown']);\n\n  // Layout\n  const layoutOptions = deepMix(\n    {},\n    GET_DEFAULT_LAYOUT_OPTIONS(width, height),\n    layout,\n    {\n      layer: treemapDrillDown\n        ? (d) => {\n            return d.depth === 1;\n          }\n        : layout.layer,\n    },\n  );\n\n  // Data\n  const [transformedData, transformedDataAll] = treeDataTransform(\n    data,\n    layoutOptions,\n    encode,\n  );\n\n  // Label\n  const labelStyle = subObject(style, 'label');\n\n  return deepMix(\n    {},\n    GET_DEFAULT_OPTIONS(width, height),\n    {\n      data: transformedData,\n      scale,\n      style,\n      labels: [\n        {\n          ...DEFAULT_LABEL_OPTIONS,\n          ...labelStyle,\n          ...(treemapDrillDown && { cursor: 'pointer' }),\n        },\n        ...labels,\n      ],\n      ...resOptions,\n      encode,\n      tooltip: maybeTooltip(tooltip, DEFAULT_TOOLTIP_OPTIONS),\n      axis: false,\n    },\n    treemapDrillDown\n      ? {\n          interaction: {\n            ...resOptions.interaction,\n            treemapDrillDown: treemapDrillDown\n              ? {\n                  ...treemapDrillDown,\n                  originData: transformedDataAll,\n                  layout: layoutOptions,\n                }\n              : undefined,\n          },\n          encode: {\n            color: (d) => last(d.path),\n            ...encode,\n          },\n          tooltip: maybeTooltip(tooltip, DEFAULT_TOOLTIP_OPTIONS_DRILL),\n        }\n      : {},\n  );\n};\n\nTreemap.props = {};\n", "import { deepMix, isArray } from '@antv/util';\nimport {\n  stratify,\n  hierarchy,\n  pack as packLayout,\n} from '@antv/vendor/d3-hierarchy';\nimport { CompositionComponent as CC } from '../runtime';\nimport { subObject } from '../utils/helper';\nimport { PackMark } from '../spec';\nimport { maybeTooltip } from '../utils/mark';\nimport { field } from './utils';\n\nconst GET_DEFAULT_LAYOUT_OPTIONS = (width, height) => ({\n  size: [width, height],\n  padding: 0,\n  sort: (a, b) => b.value - a.value,\n});\n\nconst GET_DEFAULT_OPTIONS = (width, height, encode) => ({\n  type: 'point',\n  axis: false,\n  legend: false,\n  scale: {\n    x: { domain: [0, width] },\n    y: { domain: [0, height] },\n    size: { type: 'identity' },\n  },\n  encode: {\n    x: 'x',\n    y: 'y',\n    size: 'r',\n    shape: 'point',\n  },\n  style: {\n    fill: !encode.color ? (d) => (d.height === 0 ? '#ddd' : '#fff') : undefined,\n    stroke: !encode.color ? (d) => (d.height === 0 ? '' : '#000') : undefined,\n  },\n});\n\nconst DEFAULT_LABEL_OPTIONS = {\n  text: '',\n  position: 'inside',\n  textOverflow: 'clip',\n  wordWrap: true,\n  maxLines: 1,\n  wordWrapWidth: (d) => d.r * 2,\n};\nconst DEFAULT_TOOLTIP_OPTIONS = {\n  title: (d) => d.data.name,\n  items: [{ field: 'value' }],\n};\n\ntype PackLayout = {\n  size?: [number, number];\n  padding?: number;\n  sort?(a: any, b: any): number;\n  // @todo\n  path?: any;\n};\n\nconst dataTransform = (data, layout: PackLayout, encode) => {\n  const { value } = encode;\n  const root = isArray(data)\n    ? stratify().path(layout.path)(data)\n    : hierarchy(data);\n  value ? root.sum((d) => field(value)(d)).sort(layout.sort) : root.count();\n  // @ts-ignore\n  packLayout().size(layout.size).padding(layout.padding)(root);\n  return root.descendants();\n};\n\nexport type PackOptions = Omit<PackMark, 'type'>;\n\nexport const Pack: CC<PackOptions> = (markOptions, context) => {\n  const { width, height } = context;\n\n  const {\n    data,\n    encode = {},\n    scale = {},\n    style = {},\n    layout = {},\n    labels = [],\n    tooltip = {},\n    ...resOptions\n  } = markOptions;\n\n  const DEFAULT_OPTIONS = GET_DEFAULT_OPTIONS(width, height, encode);\n\n  const transformedData = dataTransform(\n    data,\n    deepMix({}, GET_DEFAULT_LAYOUT_OPTIONS(width, height), layout),\n    deepMix({}, DEFAULT_OPTIONS['encode'], encode),\n  );\n\n  const labelStyle = subObject(style, 'label');\n\n  return deepMix({}, DEFAULT_OPTIONS, {\n    data: transformedData,\n    encode,\n    scale,\n    style,\n    labels: [\n      {\n        ...DEFAULT_LABEL_OPTIONS,\n        ...labelStyle,\n      },\n      ...labels,\n    ],\n    ...resOptions,\n    tooltip: maybeTooltip(tooltip, DEFAULT_TOOLTIP_OPTIONS),\n    axis: false,\n  });\n};\n\nPack.props = {};\n", "import {\n  min as d3Min,\n  max as d3Max,\n  quantile,\n  group,\n} from '@antv/vendor/d3-array';\nimport { CompositeMarkComponent as CC } from '../runtime';\nimport { BoxPlotMark } from '../spec';\nimport { subObject } from '../utils/helper';\nimport { maybeAnimation, subTooltip } from '../utils/mark';\n\nexport type BoxPlotOptions = Omit<BoxPlotMark, 'type'>;\n\nfunction min(I: number[], V: number[]): number {\n  return d3Min(I, (i) => V[i]);\n}\n\nfunction max(I: number[], V: number[]): number {\n  return d3Max(I, (i) => V[i]);\n}\n\nfunction lower(I: number[], V: number[]): number {\n  const lo = q1(I, V) * 2.5 - q3(I, V) * 1.5;\n  return d3Min(I, (i) => (V[i] >= lo ? V[i] : NaN));\n}\n\nfunction q1(I: number[], V: number[]): number {\n  return quantile(I, 0.25, (i) => V[i]);\n}\n\nfunction q2(I: number[], V: number[]): number {\n  return quantile(I, 0.5, (i) => V[i]);\n}\n\nfunction q3(I: number[], V: number[]): number {\n  return quantile(I, 0.75, (i) => V[i]);\n}\n\nfunction upper(I: number[], V: number[]): number {\n  const hi = q3(I, V) * 2.5 - q1(I, V) * 1.5;\n  return d3Max(I, (i) => (V[i] <= hi ? V[i] : NaN));\n}\n\n/**\n * Group marks by x and reserve outlier indexes.\n */\nfunction OutlierY() {\n  return (I: number[], mark) => {\n    const { encode } = mark;\n    const { y, x } = encode;\n    const { value: V } = y;\n    const { value: X } = x;\n    const GI = Array.from(group(I, (i) => X[+i]).values());\n    const FI = GI.flatMap((I) => {\n      const lo = lower(I, V);\n      const hi = upper(I, V);\n      return I.filter((i) => V[i] < lo || V[i] > hi);\n    });\n    return [FI, mark];\n  };\n}\n\nexport const Boxplot: CC<BoxPlotOptions> = (options) => {\n  const {\n    data,\n    encode,\n    style = {},\n    tooltip = {},\n    transform,\n    animate,\n    ...rest\n  } = options;\n  const { point = true, ...restStyle } = style;\n  const { y } = encode;\n  const encodeY = { y, y1: y, y2: y, y3: y, y4: y };\n  const qy = { y1: q1, y2: q2, y3: q3 };\n\n  // Tooltips.\n  const boxTooltip = subTooltip(\n    tooltip,\n    'box',\n    {\n      items: [\n        { channel: 'y', name: 'min' },\n        { channel: 'y1', name: 'q1' },\n        { channel: 'y2', name: 'q2' },\n        { channel: 'y3', name: 'q3' },\n        { channel: 'y4', name: 'max' },\n      ],\n    },\n    true,\n  );\n  const pointTooltip = subTooltip(tooltip, 'point', {\n    title: { channel: 'x' },\n    items: [{ name: 'outlier', channel: 'y' }],\n  });\n\n  // Only show min and max instead of lower and upper.\n  // Only draw a box.\n  if (!point) {\n    return {\n      type: 'box',\n      data: data,\n      transform: [\n        {\n          type: 'groupX',\n          y: min,\n          ...qy,\n          y4: max,\n        },\n      ],\n      encode: { ...encode, ...encodeY },\n      style: restStyle,\n      tooltip: boxTooltip,\n      ...rest,\n    };\n  }\n\n  const boxStyle = subObject(restStyle, 'box');\n  const pointStyle = subObject(restStyle, 'point');\n  return [\n    // Draw five-number box.\n    {\n      type: 'box',\n      data: data,\n      transform: [\n        {\n          type: 'groupX',\n          y: lower,\n          ...qy,\n          y4: upper,\n        },\n      ],\n      encode: { ...encode, ...encodeY },\n      style: boxStyle,\n      tooltip: boxTooltip,\n      animate: maybeAnimation(animate, 'box'),\n      ...rest,\n    },\n    // Draw outliers.\n    {\n      type: 'point',\n      data: data,\n      transform: [{ type: OutlierY }],\n      encode,\n      style: { ...pointStyle },\n      tooltip: pointTooltip,\n      animate: maybeAnimation(animate, 'point'),\n    },\n  ];\n};\n\nBoxplot.props = {};\n", "import { Mark, MarkComponent as MC, Vector2 } from '../runtime';\nimport { ShapeMark } from '../spec';\nimport { ShapeShape } from '../shape';\nimport {\n  MaybeTuple,\n  MaybeVisualPosition,\n  MaybeFunctionAttribute,\n} from '../transform';\nimport { basePreInference, createBandOffset, visualMark } from './utils';\n\nconst shape = {\n  shape: ShapeShape,\n};\n\nexport type ShapeOptions = Omit<ShapeMark, 'type'>;\n\n/**\n * @todo Unify with text, image and point.\n */\nexport const Shape: MC<ShapeOptions> = (options) => {\n  const { cartesian } = options;\n  if (cartesian) return visualMark as Mark;\n  return (index, scale, value, coordinate) => {\n    const { x: X, y: Y } = value;\n    const offset = createBandOffset(scale, value, options);\n    const P = Array.from(index, (i) => {\n      const p: Vector2 = [+X[i], +Y[i]];\n      return [coordinate.map(offset(p, i))] as Vector2[];\n    });\n    return [index, P];\n  };\n};\n\nShape.props = {\n  defaultShape: 'shape',\n  defaultLabelShape: 'label',\n  composite: false,\n  shape,\n  channels: [\n    { name: 'x', required: true },\n    { name: 'y', required: true },\n  ],\n  preInference: [\n    ...basePreInference(),\n    { type: MaybeTuple },\n    { type: MaybeVisualPosition },\n    { type: MaybeFunctionAttribute },\n  ],\n};\n", "import {\n  forceSimulation,\n  forceManyBody,\n  forceLink,\n  forceX,\n  forceY,\n  forceCenter,\n} from '@antv/vendor/d3-force';\nimport { deepMix } from '@antv/util';\nimport { subObject } from '../utils/helper';\nimport { CompositeMarkComponent as CC } from '../runtime';\nimport { ForceGraphMark } from '../spec';\nimport { maybeAnimation, subTooltip } from '../utils/mark';\nimport { field, initializeData } from './utils';\n\ntype ForceLayout = {\n  /** Connect all nodes. */\n  joint?: boolean;\n  /** Gravity coefficient between nodes. */\n  nodeStrength?: number | ((d: any) => number);\n  /** Gravity coefficient between links. */\n  linkStrength?: number | ((d: any) => number);\n};\n\nconst DEFAULT_LAYOUT_OPTIONS: ForceLayout = {\n  joint: true,\n};\n\nconst DEFAULT_LINK_OPTIONS = {\n  type: 'link',\n  axis: false,\n  legend: false,\n  encode: {\n    x: [(d) => d.source.x, (d) => d.target.x],\n    y: [(d) => d.source.y, (d) => d.target.y],\n  },\n  style: {\n    stroke: '#999',\n    strokeOpacity: 0.6,\n  },\n};\n\nconst DEFAULT_NODE_OPTIONS = {\n  type: 'point',\n  axis: false,\n  legend: false,\n  encode: {\n    x: 'x',\n    y: 'y',\n    size: 5,\n    color: 'group',\n    shape: 'point',\n  },\n  style: {\n    stroke: '#fff',\n  },\n};\nconst DEFAULT_LABEL_OPTIONS = {\n  text: '',\n};\n\nfunction dataTransform(data, layout, encode) {\n  const { nodes, links } = data;\n  const { joint, nodeStrength, linkStrength } = layout;\n  const { nodeKey = (d) => d.id, linkKey = (d) => d.id } = encode;\n  const nodeForce = forceManyBody();\n  const linkForce = forceLink(links).id(field(linkKey));\n  typeof nodeStrength === 'function' && nodeForce.strength(nodeStrength);\n  typeof linkStrength === 'function' && linkForce.strength(linkStrength);\n  const simulation = forceSimulation(nodes)\n    .force('link', linkForce)\n    .force('charge', nodeForce);\n  joint\n    ? simulation.force('center', forceCenter())\n    : simulation.force('x', forceX()).force('y', forceY());\n  simulation.stop();\n  const n = Math.ceil(\n    Math.log(simulation.alphaMin()) / Math.log(1 - simulation.alphaDecay()),\n  );\n  for (let i = 0; i < n; i++) simulation.tick();\n  return {\n    nodesData: nodes,\n    linksData: links,\n  };\n}\n\nexport type ForceGraphOptions = Omit<ForceGraphMark, 'type'>;\n\nexport const ForceGraph: CC<ForceGraphOptions> = (options) => {\n  const {\n    data,\n    encode: e = {},\n    scale,\n    style = {},\n    layout = {},\n    nodeLabels = [],\n    linkLabels = [],\n    animate = {},\n    tooltip = {},\n  } = options;\n  const { nodeKey = (d) => d.id, linkKey = (d) => d.id, ...restEncode } = e;\n  const encode = { nodeKey, linkKey, ...restEncode };\n  const nodeEncode = subObject(encode, 'node');\n  const linkEncode = subObject(encode, 'link');\n  const { links, nodes } = initializeData(data, encode);\n  const { nodesData, linksData } = dataTransform(\n    { links, nodes },\n    deepMix({}, DEFAULT_LAYOUT_OPTIONS, layout),\n    encode,\n  );\n  const linkTooltip = subTooltip(tooltip, 'link', {\n    items: [\n      (d) => ({ name: 'source', value: field(linkKey)(d.source) }),\n      (d) => ({ name: 'target', value: field(linkKey)(d.target) }),\n    ],\n  });\n  const nodeTooltip = subTooltip(\n    tooltip,\n    'node',\n    {\n      items: [(d) => ({ name: 'key', value: field(nodeKey)(d) })],\n    },\n    true,\n  );\n  return [\n    deepMix({}, DEFAULT_LINK_OPTIONS, {\n      data: linksData,\n      encode: linkEncode,\n      labels: linkLabels,\n      style: subObject(style, 'link'),\n      tooltip: linkTooltip,\n      animate: maybeAnimation(animate, 'link'),\n    }),\n    deepMix({}, DEFAULT_NODE_OPTIONS, {\n      data: nodesData,\n      encode: { ...nodeEncode },\n      scale,\n      style: subObject(style, 'node'),\n      tooltip: nodeTooltip,\n      labels: [\n        { ...DEFAULT_LABEL_OPTIONS, ...subObject(style, 'label') },\n        ...nodeLabels,\n      ],\n      animate: maybeAnimation(animate, 'link'),\n    }),\n  ];\n};\n\nForceGraph.props = {};\n", "import { cluster, hierarchy } from '@antv/vendor/d3-hierarchy';\nimport { DataComponent as DC } from '../runtime';\n\nexport type ClusterOptions = Omit<Record<string, any>, 'type'>;\n\nexport const hierarchyFunction = (layoutFunction) => (options) => {\n  return (data) => {\n    const {\n      field = 'value',\n      nodeSize,\n      separation,\n      sortBy,\n      as = ['x', 'y'],\n    } = options;\n    const [x, y] = as;\n\n    // Process root data.\n    const root = hierarchy(data, (d) => d.children)\n      .sum((d) => d[field!])\n      .sort(sortBy);\n\n    // Layout\n    const c = layoutFunction();\n    c.size([1, 1]);\n    if (nodeSize) c.nodeSize(nodeSize);\n    if (separation) c.separation(separation);\n    c(root);\n\n    const nodes = [];\n    root.each((node: any) => {\n      node[x] = node.x;\n      node[y] = node.y;\n      node.name = node.data.name;\n\n      nodes.push(node);\n    });\n\n    const edges = root.links();\n    edges.forEach((edge) => {\n      edge[x] = [edge.source[x], edge.target[x]];\n      edge[y] = [edge.source[y], edge.target[y]];\n    });\n\n    return { nodes, edges };\n  };\n};\n\nexport const Cluster: DC<ClusterOptions> = (options) => {\n  return hierarchyFunction(cluster)(options);\n};\n\nCluster.props = {};\n", "import { tree } from '@antv/vendor/d3-hierarchy';\nimport { DataComponent as DC } from '../runtime';\nimport { hierarchyFunction } from './cluster';\n\nexport type TreeOptions = Omit<Record<string, any>, 'type'>;\n\nexport const Tree: DC<TreeOptions> = (options) => {\n  return hierarchyFunction(tree)(options);\n};\n\nTree.props = {};\n", "import { deepMix } from '@antv/util';\nimport { subObject } from '../utils/helper';\nimport { CompositeMarkComponent as CC } from '../runtime';\nimport { TreeMark } from '../spec';\nimport {\n  Tree as TreeTransform,\n  TreeOptions as TreeTransformOptions,\n} from '../data/tree';\nimport { maybeAnimation, subTooltip } from '../utils/mark';\n\nconst DEFAULT_LAYOUT_OPTIONS: TreeTransformOptions = {\n  sortBy: (a, b) => b.value - a.value,\n};\n\nconst DEFAULT_NODE_OPTIONS = {\n  axis: false,\n  legend: false,\n  type: 'point',\n  encode: {\n    x: 'x',\n    y: 'y',\n    size: 2,\n    shape: 'point',\n  },\n};\n\nconst DEFAULT_LINK_OPTIONS = {\n  type: 'link',\n  encode: {\n    x: 'x',\n    y: 'y',\n    shape: 'smooth',\n  },\n};\n\nconst DEFAULT_LABEL_OPTIONS = {\n  text: '',\n  fontSize: 10,\n};\n\nexport type TreeOptions = Omit<TreeMark, 'type'>;\n\nexport const Tree: CC<TreeOptions> = (options) => {\n  const {\n    data,\n    encode = {},\n    scale = {},\n    style = {},\n    layout = {},\n    nodeLabels = [],\n    linkLabels = [],\n    animate = {},\n    tooltip = {},\n  } = options;\n  const valueEncode = encode?.value;\n  const { nodes, edges } = TreeTransform({\n    ...DEFAULT_LAYOUT_OPTIONS,\n    ...layout,\n    field: valueEncode,\n  })(data);\n\n  const nodeTooltip = subTooltip(\n    tooltip,\n    'node',\n    {\n      title: 'name',\n      items: ['value'],\n    },\n    true,\n  );\n\n  const linkTooltip = subTooltip(tooltip, 'link', {\n    title: '',\n    items: [\n      (d) => ({ name: 'source', value: d.source.name }),\n      (d) => ({ name: 'target', value: d.target.name }),\n    ],\n  });\n\n  return [\n    deepMix({}, DEFAULT_LINK_OPTIONS, {\n      data: edges,\n      encode: subObject(encode, 'link'),\n      scale: subObject(scale, 'link'),\n      labels: linkLabels,\n      style: { stroke: '#999', ...subObject(style, 'link') },\n      tooltip: linkTooltip,\n      animate: maybeAnimation(animate, 'link'),\n    }),\n    deepMix({}, DEFAULT_NODE_OPTIONS, {\n      data: nodes,\n      scale: subObject(scale, 'node'),\n      encode: subObject(encode, 'node'),\n      labels: [\n        {\n          ...DEFAULT_LABEL_OPTIONS,\n          ...subObject(style, 'label'),\n        },\n        ...nodeLabels,\n      ],\n      style: { ...subObject(style, 'node') },\n      tooltip: nodeTooltip,\n      animate: maybeAnimation(animate, 'node'),\n    }),\n  ];\n};\n\nTree.props = {};\n", "import { deepMix } from '@antv/util';\nimport { itemsOf } from 'interaction/legendFilter';\nimport { CompositeMarkComponent as CC } from '../runtime';\nimport { WordCloudMark } from '../spec';\n\nexport type WordCloudOptions = Omit<WordCloudMark, 'type'>;\n\nfunction initializeData(data, encode) {\n  const { text = 'text', value = 'value' } = encode;\n  return data.map((d) => ({\n    ...d,\n    text: d[text],\n    value: d[value],\n  }));\n}\n\nconst GET_DEFAULT_OPTIONS = () => ({\n  axis: false,\n  type: 'text',\n  encode: {\n    x: 'x',\n    y: 'y',\n    text: 'text',\n    rotate: 'rotate',\n    fontSize: 'size',\n    shape: 'tag',\n  },\n  scale: {\n    x: { range: [0, 1] },\n    y: { range: [0, 1] },\n  },\n  style: {\n    fontFamily: (d) => d.fontFamily,\n  },\n  tooltip: {\n    items: [\n      (datum) => ({\n        name: datum.text,\n        value: datum.value,\n      }),\n    ],\n  },\n});\n\nexport const WordCloud: CC<WordCloudOptions> = async (options, context) => {\n  const { width, height } = context;\n\n  const {\n    data,\n    encode = {},\n    scale,\n    style = {},\n    layout = {},\n    ...resOptions\n  } = options;\n\n  const initializedData = initializeData(data, encode);\n\n  return deepMix({}, GET_DEFAULT_OPTIONS(), {\n    data: {\n      value: initializedData,\n      transform: [\n        {\n          type: 'wordCloud',\n          size: [width, height],\n          ...layout,\n        },\n      ],\n    },\n    encode,\n    scale,\n    style,\n    ...resOptions,\n    axis: false,\n  });\n};\n\nWordCloud.props = {};\n", "import { deepMix, isNumber } from '@antv/util';\nimport { Vector2 } from '@antv/coord';\nimport { Group } from '@antv/g';\nimport { filterPrefixObject, isUnset, subObject } from '../utils/helper';\nimport { CompositeMarkComponent as CC, ShapeComponent as SC } from '../runtime';\nimport { ColorOptions } from '../shape/point/color';\nimport { GaugeMark } from '../spec';\nimport { getTransformOptions } from '../utils/coordinate';\nimport { Radial } from '../coordinate';\nimport { applyStyle, getOrigin } from '../shape/utils';\nimport { select } from '../utils/selection';\nimport { GaugeRound } from '../shape';\n\nconst indicatorShape: SC<ColorOptions> = (options, context) => {\n  const { shape, radius, ...style } = options;\n  const pointerStyle = subObject(style, 'pointer');\n  const pinStyle = subObject(style, 'pin');\n  const { shape: pointerShape, ...resPointerStyle } = pointerStyle;\n  const { shape: pinShape, ...resPinStyle } = pinStyle;\n  const { coordinate, theme } = context;\n  return (points, value) => {\n    // Invert points.\n    const invertedPoints = points.map((p) => coordinate.invert(p));\n    // Get new coordinate.\n    const [startAngle, endAngle, innerRadius] = getTransformOptions(\n      coordinate,\n      'polar',\n    ) as number[];\n    const newCoordinate = coordinate.clone();\n    const { color: stroke } = value;\n    const newTransformations = Radial({\n      startAngle,\n      endAngle,\n      innerRadius,\n      outerRadius: radius,\n    });\n    newTransformations.push(['cartesian']);\n    newCoordinate.update({\n      transformations: newTransformations,\n    });\n    const newPoints = invertedPoints.map((p) => newCoordinate.map(p));\n    const [x, y] = getOrigin(newPoints as Vector2[]);\n    const [cx, cy] = coordinate.getCenter();\n    const pointerAttrs = {\n      x1: x,\n      y1: y,\n      x2: cx,\n      y2: cy,\n      stroke,\n      ...resPointerStyle,\n      ...style,\n    };\n    const pinAttrs = {\n      cx,\n      cy,\n      stroke,\n      ...resPinStyle,\n      ...style,\n    };\n    const indicatorGroup = select(new Group());\n    if (!isUnset(pointerShape)) {\n      typeof pointerShape === 'function'\n        ? indicatorGroup.append(() =>\n            pointerShape(newPoints, value, newCoordinate, theme),\n          )\n        : indicatorGroup.append('line').call(applyStyle, pointerAttrs).node();\n    }\n    if (!isUnset(pinShape)) {\n      typeof pinShape === 'function'\n        ? indicatorGroup.append(() =>\n            pinShape(newPoints, value, newCoordinate, theme),\n          )\n        : indicatorGroup.append('circle').call(applyStyle, pinAttrs).node();\n    }\n    return indicatorGroup.node();\n  };\n};\n\nconst DEFAULT_OPTIONS = {\n  coordinate: {\n    type: 'radial',\n    innerRadius: 0.9,\n    outerRadius: 1,\n    startAngle: (-11 / 10) * Math.PI,\n    endAngle: (1 / 10) * Math.PI,\n  },\n  axis: {\n    x: false,\n  },\n  legend: false,\n  tooltip: false,\n  encode: {\n    x: 'x',\n    y: 'y',\n    color: 'color',\n  },\n  scale: {\n    color: {\n      range: ['#30BF78', '#D0D0D0'],\n    },\n  },\n};\n\nconst DEFAULT_INDICATOR_OPTIONS = {\n  style: {\n    shape: indicatorShape,\n    lineWidth: 4,\n    pointerLineCap: 'round',\n    pinR: 10,\n    pinFill: '#fff',\n    radius: 0.6,\n  },\n};\n\nconst DEFAULT_TEXT_OPTIONS = {\n  type: 'text',\n  style: {\n    x: '50%',\n    y: '60%',\n    textAlign: 'center',\n    textBaseline: 'middle',\n    fontSize: 20,\n    fontWeight: 800,\n    fill: '#888',\n  },\n  tooltip: false,\n};\n\nexport type GaugeData =\n  | {\n      target?: number;\n      total?: number;\n      percent?: number;\n      name?: string;\n      thresholds?: number[];\n    }\n  | number;\n\nfunction getGaugeData(data: GaugeData) {\n  if (isNumber(data)) {\n    // Percent range [0, 1].\n    const percent = Math.max(0, Math.min(data, 1));\n    return {\n      percent,\n      target: percent,\n      total: 1,\n    };\n  }\n  return data;\n}\n\nfunction dataTransform(data: GaugeData, scale) {\n  const {\n    name = 'score',\n    target,\n    total,\n    percent,\n    thresholds = [],\n  } = getGaugeData(data);\n  const _target = percent || target;\n  const _total = percent ? 1 : total;\n  const newScale = {\n    y: {\n      domain: [0, _total],\n    },\n    ...scale,\n  };\n  if (!thresholds.length) {\n    return {\n      targetData: [{ x: name, y: _target, color: 'target' }],\n      totalData: [\n        { x: name, y: _target, color: 'target' },\n        { x: name, y: _total - _target, color: 'total' },\n      ],\n      target: _target,\n      total: _total,\n      scale: newScale,\n    };\n  }\n  return {\n    targetData: [{ x: name, y: _target, color: 'target' }],\n    totalData: thresholds.map((d, i) => ({\n      x: name,\n      y: i >= 1 ? d - thresholds[i - 1] : d,\n      color: i,\n    })),\n    target: _target,\n    total: _total,\n    scale: newScale,\n  };\n}\n\nfunction getTextContent(textStyle, { target, total }) {\n  const { content } = textStyle;\n  return content ? content(target, total) : target.toString();\n}\n\nexport type GaugeOptions = Omit<GaugeMark, 'type'>;\n\nexport const Gauge: CC<GaugeOptions> = (options) => {\n  const {\n    data = {},\n    scale = {},\n    style = {},\n    animate = {},\n    transform = [],\n    ...resOptions\n  } = options;\n  const {\n    targetData,\n    totalData,\n    target,\n    total,\n    scale: newScale,\n  } = dataTransform(data, scale);\n  const { tooltip, ...textStyle } = subObject(style, 'text');\n  // pointer + pin\n  const indicatorStyle = filterPrefixObject(style, ['pointer', 'pin']);\n\n  const arcStyle = subObject(style, 'arc');\n  const shape = arcStyle.shape;\n\n  return [\n    deepMix({}, DEFAULT_OPTIONS, {\n      type: 'interval',\n      transform: [{ type: 'stackY' }],\n      data: totalData,\n      scale: newScale,\n      style: shape === 'round' ? { ...arcStyle, shape: GaugeRound } : arcStyle,\n      animate:\n        typeof animate === 'object' ? subObject(animate, 'arc') : animate,\n      ...resOptions,\n    }),\n    deepMix({}, DEFAULT_OPTIONS, DEFAULT_INDICATOR_OPTIONS, {\n      type: 'point',\n      data: targetData,\n      scale: newScale,\n      style: indicatorStyle,\n      animate:\n        typeof animate === 'object' ? subObject(animate, 'indicator') : animate,\n      ...resOptions,\n    }),\n    deepMix({}, DEFAULT_TEXT_OPTIONS, {\n      style: {\n        text: getTextContent(textStyle, { target, total }),\n        ...textStyle,\n      },\n      tooltip,\n      animate:\n        typeof animate === 'object' ? subObject(animate, 'text') : animate,\n    }),\n  ];\n};\n\nGauge.props = {};\n", "import { Band } from '@antv/scale';\nimport { MarkComponent as MC, Vector2 } from '../runtime';\nimport { DensityMark } from '../spec';\nimport { DensityShape } from '../shape';\nimport { MaybeZeroY1, MaybeZeroX } from '../transform';\nimport {\n  baseGeometryChannels,\n  basePostInference,\n  basePreInference,\n  tooltip1d,\n} from './utils';\n\nconst shape = {\n  density: DensityShape,\n};\n\nexport type DensityOptions = Omit<DensityMark, 'type'>;\n\nexport const Density: MC<DensityOptions> = () => {\n  return (index, scale, value, coordinate) => {\n    const { x: X, series: S } = value;\n\n    const Yn = Object.entries(value)\n      .filter(([key]) => key.startsWith('y'))\n      .map(([, value]) => value);\n\n    const SZn = Object.entries(value)\n      .filter(([key]) => key.startsWith('size'))\n      .map(([, value]) => value);\n\n    // Because x and y channel is not strictly required in Line.props,\n    // it should throw error with empty x or y channels.\n    if (X === undefined || Yn === undefined || SZn === undefined) {\n      throw new Error('Missing encode for x or y or size channel.');\n    }\n\n    // Calc width for each box.\n    // The scales for x and series channels must be band scale.\n    const xScale = scale.x as Band;\n    const series = scale.series as Band;\n\n    const P = Array.from(index, (i) => {\n      const groupWidth = xScale.getBandWidth(xScale.invert(+X[i]));\n      const ratio = series ? series.getBandWidth(series.invert(+S?.[i])) : 1;\n      const width = groupWidth * ratio;\n      const offset = (+S?.[i] || 0) * groupWidth;\n\n      const x = +X[i] + offset + width / 2;\n\n      const PN = [\n        ...Yn.map((_, idx) => [x + +SZn[idx][i] / index.length, +Yn[idx][i]]), // right\n        ...Yn.map((_, idx) => [\n          x - +SZn[idx][i] / index.length,\n          +Yn[idx][i],\n        ]).reverse(), // left\n      ];\n\n      return PN.map((p) => coordinate.map(p)) as Vector2[];\n    });\n    return [index, P];\n  };\n};\n\nDensity.props = {\n  defaultShape: 'density',\n  defaultLabelShape: 'label',\n  composite: false,\n  shape,\n  channels: [\n    ...baseGeometryChannels({ shapes: Object.keys(shape) }),\n    { name: 'x', scale: 'band', required: true },\n    { name: 'y', required: true },\n    { name: 'size', required: true },\n    { name: 'series', scale: 'band' },\n    { name: 'size', required: true, scale: 'identity' },\n  ],\n  preInference: [\n    ...basePreInference(),\n    { type: MaybeZeroY1 },\n    { type: MaybeZeroX },\n  ],\n  postInference: [...basePostInference(), ...tooltip1d()],\n  interaction: { shareTooltip: true },\n};\n", "import { MarkComponent as MC, Vector2 } from '../runtime';\nimport { HeatmapMark } from '../spec';\nimport { HeatmapShape } from '../shape';\nimport { MaybeZeroX, MaybeZeroY } from '../transform';\nimport {\n  baseGeometryChannels,\n  basePostInference,\n  basePreInference,\n  tooltip2d,\n} from './utils';\n\nconst shape = {\n  heatmap: HeatmapShape,\n};\n\nexport type HeatmapOptions = Omit<HeatmapMark, 'type'>;\n\n/**\n * Draw heatmap with gradient.\n */\nexport const Heatmap: MC<HeatmapOptions> = (options) => {\n  return (index, scale, value, coordinate) => {\n    const { x: X, y: Y, size: S, color: C } = value;\n    const P = Array.from(index, (i) => {\n      // Default size = 40.\n      const r = S ? +S[i] : 40;\n      // Warning: x, y, value, radius.\n      return [...coordinate.map([+X[i], +Y[i]]), C[i], r] as unknown as Vector2;\n    });\n\n    return [[0], [P]];\n  };\n};\n\nHeatmap.props = {\n  defaultShape: 'heatmap',\n  defaultLabelShape: 'label',\n  composite: false,\n  shape,\n  channels: [\n    ...baseGeometryChannels({ shapes: Object.keys(shape) }),\n    { name: 'x', required: true },\n    { name: 'y', required: true },\n    { name: 'color', scale: 'identity', required: true },\n    { name: 'size' },\n  ],\n  preInference: [\n    ...basePreInference(),\n    { type: MaybeZeroX },\n    { type: MaybeZeroY },\n  ],\n  postInference: [...basePostInference(), ...tooltip2d()],\n};\n", "import { deepMix, isNumber } from '@antv/util';\nimport { subObject } from '../utils/helper';\nimport { prettyNumber } from '../utils/number';\nimport { CompositeMarkComponent as CC } from '../runtime';\nimport { LiquidMark } from '../spec';\nimport { LiquidShape } from '../shape';\n\nconst DEFAULT_OPTIONS = {\n  axis: {\n    x: false,\n    y: false,\n  },\n  legend: false,\n  tooltip: false,\n  encode: {\n    x: 'type',\n    y: 'percent',\n  },\n  scale: {\n    y: {\n      domain: [0, 1],\n    },\n  },\n  style: {\n    shape: LiquidShape,\n  },\n  animate: {\n    enter: {\n      type: 'fadeIn',\n    },\n  },\n};\n\nconst DEFAULT_TEXT_OPTIONS = {\n  type: 'text',\n  style: {\n    x: '50%',\n    y: '50%',\n    textAlign: 'center',\n    textBaseline: 'middle',\n    fontSize: 20,\n    fontWeight: 800,\n    fill: '#888',\n  },\n  animate: {\n    enter: {\n      type: 'fadeIn',\n    },\n  },\n};\n\nexport type LiquidData =\n  | {\n      percent?: number;\n    }\n  | number;\n\nexport type LiquidOptions = Omit<LiquidMark, 'type'>;\n\nexport const Liquid: CC<LiquidOptions> = (options) => {\n  const { data = {}, style = {}, animate, ...resOptions } = options;\n  // Compatible with old data structures: { percent: number } and percent >= 0.\n  const percent = Math.max(0, isNumber(data) ? data : data?.percent);\n\n  const newData = [{ percent, type: 'liquid' }];\n\n  const contentStyle = {\n    ...subObject(style, 'text'),\n    ...subObject(style, 'content'),\n  };\n\n  const outline = subObject(style, 'outline');\n  const wave = subObject(style, 'wave');\n  const background = subObject(style, 'background');\n\n  return [\n    deepMix({}, DEFAULT_OPTIONS, {\n      type: 'interval',\n      data: newData,\n      style: {\n        liquidOptions: {\n          percent,\n          liquidShape: style?.shape,\n        },\n        styleOptions: {\n          ...style,\n          outline,\n          wave,\n          background,\n        },\n      },\n      animate,\n      ...resOptions,\n    }),\n    deepMix({}, DEFAULT_TEXT_OPTIONS, {\n      style: {\n        text: `${prettyNumber(percent * 100)} %`,\n        ...contentStyle,\n      },\n      animate,\n    }),\n  ];\n};\n\nLiquid.props = {};\n", "import {\n  forceSimulation,\n  forceX,\n  forceY,\n  forceCollide,\n} from '@antv/vendor/d3-force';\nimport { MarkComponent as MC, Vector2 } from '../runtime';\nimport { PointMark } from '../spec';\nimport {\n  PointBowtie,\n  PointCross,\n  PointDiamond,\n  PointHexagon,\n  PointHollowBowtie,\n  PointHollowDiamond,\n  PointHollowHexagon,\n  PointHollow,\n  PointHollowSquare,\n  PointHollowTriangle,\n  PointHollowTriangleDown,\n  PointHyphen,\n  PointLine,\n  PointTriangleDown,\n  PointPlus,\n  PointSquare,\n  PointShape,\n  PointTick,\n  PointTriangle,\n  PointCircle,\n  PointHollowCircle,\n} from '../shape';\nimport { MaybeZeroX, MaybeZeroY, MaybeSize } from '../transform';\nimport {\n  baseGeometryChannels,\n  basePostInference,\n  basePreInference,\n  createBandOffset,\n  tooltip2d,\n} from './utils';\n\nconst shape = {\n  hollow: PointHollow,\n  hollowDiamond: PointHollowDiamond,\n  hollowHexagon: PointHollowHexagon,\n  hollowSquare: PointHollowSquare,\n  hollowTriangleDown: PointHollowTriangleDown,\n  hollowTriangle: PointHollowTriangle,\n  hollowBowtie: PointHollowBowtie,\n  hollowCircle: PointHollowCircle,\n  point: PointShape,\n  plus: PointPlus,\n  diamond: PointDiamond,\n  square: PointSquare,\n  triangle: PointTriangle,\n  hexagon: PointHexagon,\n  cross: PointCross,\n  bowtie: PointBowtie,\n  hyphen: PointHyphen,\n  line: PointLine,\n  tick: PointTick,\n  triangleDown: PointTriangleDown,\n  circle: PointCircle,\n};\n\nexport type BeeswarmOptions = Omit<PointMark, 'type'>;\n\nconst DEFAULT_RADIUS = 4;\nconst ITERATIONS = 200;\n\n/**\n *  (Beeswarm)\n */\nexport const Beeswarm: MC<BeeswarmOptions> = (options) => {\n  return (index, scale, value, coordinate) => {\n    const { x: X, y: Y, size: S } = value;\n\n    if (!X.length || !Y.length) return [index, Y.map(() => [[]])];\n    const [width, height] = coordinate.getSize();\n    const offset = createBandOffset(scale, value, options);\n\n    const nodes = Array.from(index, (i) => {\n      const x0 = +X[i] * width;\n      const y0 = +Y[i] * height;\n      const r = +S[i] || DEFAULT_RADIUS;\n      return { i, x: x0, y: y0, r };\n    });\n\n    // 2. forceSimulation\n    const sim = forceSimulation(nodes)\n      .stop()\n      .force(\n        'collide',\n        forceCollide<any>()\n          .radius((d) => d.r + 1)\n          .strength(1),\n      );\n\n    // \n    sim.force('x', forceX<any>((d) => d.x).strength(0.5));\n    sim.force('y', forceY<any>((d) => d.y).strength(5));\n\n    for (let i = 0; i < ITERATIONS; i++) sim.tick();\n    sim.stop();\n\n    const xy = (i: number): Vector2 => {\n      const n = nodes.find((d) => d.i === i)!;\n      return [n.x / width, n.y / height];\n    };\n\n    const P = S\n      ? Array.from(index, (i) => {\n          const [cx, cy] = xy(i);\n          const r = +S[i];\n          const a = r / width;\n          const b = r / height;\n          const p1: Vector2 = [cx - a, cy - b];\n          const p2: Vector2 = [cx + a, cy + b];\n          return [\n            coordinate.map(offset(p1, i)),\n            coordinate.map(offset(p2, i)),\n          ] as Vector2[];\n        })\n      : Array.from(\n          index,\n          (i) => [coordinate.map(offset(xy(i), i))] as Vector2[],\n        );\n\n    return [index, P];\n  };\n};\n\nBeeswarm.props = {\n  defaultShape: 'point',\n  defaultLabelShape: 'label',\n  composite: false,\n  shape,\n  channels: [\n    ...baseGeometryChannels({ shapes: Object.keys(shape) }),\n    { name: 'x', required: true },\n    { name: 'y', required: true },\n    { name: 'series', scale: 'band' },\n    { name: 'size', quantitative: 'sqrt' },\n  ],\n  preInference: [\n    ...basePreInference(),\n    { type: MaybeZeroX },\n    { type: MaybeZeroY },\n  ],\n  postInference: [...basePostInference(), { type: MaybeSize }, ...tooltip2d()],\n};\n", "import { deepMix, pick } from '@antv/util';\nimport { CompositeMarkComponent } from '../runtime';\nimport { BaseMark, ChannelTypes, PartitionNode } from '../spec';\nexport type PartitionMark = BaseMark<'rect', 'value' | ChannelTypes>;\n\nexport interface PartitionDataNode {\n  data: PartitionNode;\n  depth: number;\n  parent: PartitionDataNode | null;\n  children: PartitionDataNode[];\n  x0: number;\n  x1: number;\n  value: number;\n}\n\nexport interface LayoutOptions {\n  valueField?: string;\n  sort?: (a: PartitionNode, b: PartitionNode) => number;\n  fillParent?: boolean; // Whether child nodes fill parent width.\n  nameField?: string;\n}\n\n/**\n * Partition layout algorithm.\n * Child nodes start layout from the parent's starting position to show parent-child relationships.\n *\n * @param data Hierarchical data\n * @param options Configuration options\n */\nexport function partitionLayout(\n  data: PartitionNode[],\n  options: LayoutOptions = {},\n) {\n  const {\n    valueField = 'value',\n    sort,\n    fillParent = true,\n    nameField = 'name',\n  } = options;\n\n  if (!data || data.length === 0) return [];\n\n  // Build hierarchical structure\n  const buildPartition = (\n    node: PartitionNode,\n    parent: PartitionDataNode | null = null,\n    depth = 0,\n  ): PartitionDataNode => {\n    const partitionNode: PartitionDataNode = {\n      data: node,\n      depth,\n      parent,\n      children: [],\n      x0: 0,\n      x1: 0,\n      value: node[valueField] || 0,\n    };\n\n    if (node.children && node.children.length > 0) {\n      partitionNode.children = node.children.map((child: PartitionNode) =>\n        buildPartition(child, partitionNode, depth + 1),\n      );\n    }\n\n    return partitionNode;\n  };\n\n  // Process each root node\n  const result: Array<Record<string, any>> = [];\n  let currentRootStartX = 0; // Track the starting position for the next root node\n\n  data.forEach((rootData: PartitionNode) => {\n    const root = buildPartition(rootData);\n\n    // Calculate position for each node - key point: child nodes start layout from parent's starting position\n    const calculateLayout = (\n      node: PartitionDataNode,\n      parentStartX = 0,\n      isRootNode = false,\n      parentWidth = 0, // Parent node actual width.\n    ): void => {\n      if (isRootNode || node.depth === 0) {\n        // Root node: start from current root position\n        node.x0 = isRootNode ? parentStartX : 0;\n        node.x1 = node.x0 + node.value;\n      } else {\n        // Child node: start layout from parent's starting position\n        node.x0 = parentStartX;\n        if (fillParent && parentWidth > 0) {\n          // If fillParent is true, calculate width based on parent width and value ratio.\n          const siblingsTotalValue = node.parent\n            ? node.parent.children.reduce((acc, child) => acc + child.value, 0)\n            : node.value;\n          const siblingsCount = node.parent ? node.parent.children.length : 1;\n          const ratio =\n            siblingsTotalValue > 0\n              ? node.value / siblingsTotalValue\n              : 1 / siblingsCount;\n          node.x1 = parentStartX + parentWidth * ratio;\n        } else {\n          // If fillParent is false, use node own value as width.\n          node.x1 = parentStartX + node.value;\n        }\n      }\n\n      // Calculate position for child nodes - start from current node's starting position\n      let childStartX = node.x0;\n      const nodeWidth = node.x1 - node.x0;\n\n      const sortedChildren = sort\n        ? [...node.children].sort(\n            (a: PartitionDataNode, b: PartitionDataNode) =>\n              sort(a.data, b.data),\n          )\n        : node.children;\n\n      if (fillParent && sortedChildren.length > 0) {\n        // fillParent mode: child nodes fill parent width proportionally.\n        const childrenTotalValue = node.children.reduce(\n          (sum, c) => sum + c.value,\n          0,\n        );\n        sortedChildren.forEach((child: PartitionDataNode) => {\n          calculateLayout(child, childStartX, false, nodeWidth);\n          const ratio =\n            childrenTotalValue > 0\n              ? child.value / childrenTotalValue\n              : 1 / sortedChildren.length;\n          childStartX += nodeWidth * ratio;\n        });\n      } else {\n        // Non-fillParent mode: child nodes layout independently based on own value.\n        sortedChildren.forEach((child: PartitionDataNode) => {\n          calculateLayout(child, childStartX, false, 0);\n          // Next child node starts from current child node's end position.\n          childStartX += child.x1 - child.x0;\n        });\n      }\n    };\n\n    // Start layout calculation from root node, using current root start position.\n    calculateLayout(root, currentRootStartX, true);\n\n    // Update the starting position for the next root node.\n    currentRootStartX += root.value;\n\n    // Convert to final format.\n    const processNode = (node: PartitionDataNode): Record<string, any> => {\n      const getName = (d: PartitionNode) => d[nameField] ?? d.name;\n      const path = [getName(node.data)];\n      let ancestorNode = node;\n      while (ancestorNode.parent) {\n        path.unshift(getName(ancestorNode.parent.data));\n        ancestorNode = ancestorNode.parent;\n      }\n\n      return {\n        ...pick(node.data, [valueField]),\n        [PARTITION_PATH_FIELD]: path,\n        [PARTITION_ANCESTOR_FIELD]:\n          ancestorNode.parent?.data?.[nameField] ?? node.data[nameField],\n        name: node.data[nameField],\n        depth: node.depth,\n        value: node.value,\n        x: [node.x0, node.x1],\n        y: [node.depth, node.depth + 1],\n        // Add child node count attribute for drill-down interaction judgment.\n        [CHILD_NODE_COUNT]: node.children.length,\n      };\n    };\n\n    // Collect all nodes.\n    const collectResultNodes = (node: PartitionDataNode): void => {\n      result.push(processNode(node));\n      node.children.forEach(collectResultNodes);\n    };\n\n    collectResultNodes(root);\n  });\n\n  return result;\n}\n\nexport type PartitionData = PartitionNode[];\n\nexport type PartitionOptions = Omit<PartitionMark, 'type'> & {\n  fillParent?: boolean; // Whether child nodes fill parent width.\n};\n\nexport const PARTITION_TYPE = 'partition';\nexport const PARTITION_TYPE_FIELD = 'markType';\nexport const PARTITION_PATH_FIELD = 'path';\nexport const PARTITION_ANCESTOR_FIELD = 'ancestor-node';\nexport const CHILD_NODE_COUNT = 'childNodeCount';\n\nexport function transformData(\n  options: Pick<PartitionOptions, 'data' | 'encode'> & {\n    fillParent?: boolean;\n    sort?: (a: PartitionNode, b: PartitionNode) => number;\n  },\n) {\n  const { data, encode, fillParent, sort } = options;\n  const { color, value, name } = encode as any;\n\n  const nodes = partitionLayout(data, {\n    valueField: value,\n    fillParent,\n    nameField: name,\n    sort,\n  });\n\n  return nodes.map((node: Record<string, any>) => {\n    // Handle color mapping.\n    const nodeInfo = { ...node };\n    if (color && color !== PARTITION_ANCESTOR_FIELD) {\n      nodeInfo[color] = node[color];\n    }\n    return nodeInfo;\n  });\n}\n\nconst DEFAULT_OPTIONS = {\n  id: PARTITION_TYPE,\n  encode: {\n    x: 'x',\n    y: 'y',\n    key: PARTITION_PATH_FIELD,\n    color: PARTITION_ANCESTOR_FIELD,\n    value: 'value',\n    name: 'name',\n  },\n  labels: [\n    {\n      style: {\n        pointerEvents: 'none',\n      },\n      text: 'value',\n      position: 'inside',\n      transform: [\n        {\n          type: 'overflowHide',\n        },\n      ],\n    },\n  ],\n  axis: {\n    x: { title: 'Time/Order', label: true },\n    y: false,\n  },\n  style: {\n    [PARTITION_TYPE_FIELD]: PARTITION_TYPE,\n    [CHILD_NODE_COUNT]: 'childNodeCount', // Add child node count attribute for drill-down interaction.\n  },\n  state: {\n    active: { zIndex: 2 },\n    inactive: { zIndex: 1 },\n  },\n  legend: false,\n  coordinate: {\n    type: 'cartesian',\n    grid: false, // Remove grid lines.\n  },\n  interaction: {\n    drillDown: true,\n  },\n};\n\nexport const Partition: CompositeMarkComponent<PartitionOptions> = (\n  options,\n) => {\n  const {\n    encode: encodeOption,\n    data = [],\n    layout = {},\n    ...resOptions\n  } = options;\n\n  const { fillParent = true, sort } = layout as {\n    fillParent?: boolean;\n    sort?: (a: PartitionNode, b: PartitionNode) => number;\n  };\n\n  const encode = { ...DEFAULT_OPTIONS.encode, ...encodeOption };\n  const { value } = encode;\n  const rectData = transformData({ encode, data, fillParent, sort });\n\n  return [\n    deepMix({}, DEFAULT_OPTIONS, {\n      type: 'rect',\n      data: rectData,\n      encode,\n      tooltip: {\n        title: 'path',\n        items: [\n          (d: Record<string, any>) => {\n            return {\n              name: value as string,\n              value: d[value],\n            };\n          },\n        ],\n      },\n      // Add basic interaction.\n      interaction: {\n        elementHighlight: true,\n      },\n      ...resOptions,\n    }),\n  ];\n};\n\nPartition.props = {};\n", "import { PaletteComponent } from '../runtime';\nimport { Category10Palette } from '../spec/palette';\n\nexport type Category10Options = Omit<Category10Palette, 'type'>;\n\n/**\n * Classic palette of AntV for ordinal data with 10 colors.\n */\nexport const Category10: PaletteComponent<Category10Options> = () => {\n  return [\n    '#5B8FF9',\n    '#5AD8A6',\n    '#5D7092',\n    '#F6BD16',\n    '#6F5EF9',\n    '#6DC8EC',\n    '#945FB9',\n    '#FF9845',\n    '#1E9493',\n    '#FF99C3',\n  ];\n};\n\nCategory10.props = {};\n", "import { PaletteComponent } from '../runtime';\nimport { Category20Palette } from '../spec/palette';\n\nexport type Category20Options = Omit<Category20Palette, 'type'>;\n\n/**\n * Classic palette of AntV for ordinal data with 20 colors.\n */\nexport const Category20: PaletteComponent<Category20Options> = () => {\n  return [\n    '#5B8FF9',\n    '#CDDDFD',\n    '#5AD8A6',\n    '#CDF3E4',\n    '#5D7092',\n    '#CED4DE',\n    '#F6BD16',\n    '#FCEBB9',\n    '#6F5EF9',\n    '#D3CEFD',\n    '#6DC8EC',\n    '#D3EEF9',\n    '#945FB9',\n    '#DECFEA',\n    '#FF9845',\n    '#FFE0C7',\n    '#1E9493',\n    '#BBDEDE',\n    '#FF99C3',\n    '#FFE0ED',\n  ];\n};\n\nCategory20.props = {};\n", "import { Band as BandScale } from '@antv/scale';\nimport { BandScale as BandScaleSpec } from '../spec';\nimport { ScaleComponent as SC } from '../runtime';\n\nexport type BandOptions = Omit<BandScaleSpec, 'type'>;\n\nexport const Band: SC<BandOptions> = (options) => {\n  return new BandScale(options);\n};\n\nBand.props = {};\n", "import { Linear as LinearScale } from '@antv/scale';\nimport { ScaleComponent as SC } from '../runtime';\nimport { LinearScale as LinearScaleSpec } from '../spec';\n\nexport type LinearOptions = Omit<LinearScaleSpec, 'type'>;\n\nexport const Linear: SC<LinearOptions> = (options) => {\n  return new LinearScale(options);\n};\n\nLinear.props = {};\n", "import { Ordinal as OrdinalScale } from '@antv/scale';\nimport { ScaleComponent as SC } from '../runtime';\nimport { OrdinalScale as OrdinalScaleSpec } from '../spec';\n\nexport type OrdinalOptions = Omit<OrdinalScaleSpec, 'type'>;\n\nexport const Ordinal: SC<OrdinalOptions> = (options) => {\n  return new OrdinalScale(options);\n};\n\nOrdinal.props = {};\n", "import { Identity as IdentityScale } from '@antv/scale';\nimport { IdentityScale as IdentityScaleSpec } from '../spec';\nimport { ScaleComponent as SC } from '../runtime';\n\nexport type IdentityOptions = Omit<IdentityScaleSpec, 'type'>;\n\nexport const Identity: SC<IdentityOptions> = (options) => {\n  return new IdentityScale(options);\n};\n\nIdentity.props = {};\n", "import { Point as PointScale } from '@antv/scale';\n\nimport { PointScale as PointScaleSpec } from '../spec';\nimport { ScaleComponent as SC } from '../runtime';\n\nexport type PointOptions = Omit<PointScaleSpec, 'type'>;\n\nexport const Point: SC<PointOptions> = (options) => {\n  return new PointScale(options);\n};\n\nPoint.props = {};\n", "import { Time as TimeScale } from '@antv/scale';\nimport { TimeScale as TimeScaleSpec } from '../spec';\nimport { ScaleComponent as SC } from '../runtime';\n\nexport type TimeOptions = Omit<TimeScaleSpec, 'type'>;\n\nexport const Time: SC<TimeOptions> = (options) => {\n  return new TimeScale(options);\n};\n\nTime.props = {};\n", "import { Log as LogScale } from '@antv/scale';\nimport { ScaleComponent as SC } from '../runtime';\nimport { LogScale as LogScaleSpec } from '../spec';\n\nexport type LogOptions = Omit<LogScaleSpec, 'type'>;\n\nexport const Log: SC<LogOptions> = (options) => {\n  return new LogScale(options);\n};\n\nLog.props = {};\n", "import { Pow as PowScale } from '@antv/scale';\nimport { ScaleComponent as SC } from '../runtime';\nimport { PowScale as PowScaleSpec } from '../spec';\n\nexport type PowOptions = Omit<PowScaleSpec, 'type'>;\n\nexport const Pow: SC<PowOptions> = (options) => {\n  return new PowScale(options);\n};\n\nPow.props = {};\n", "import { Threshold as ThresholdScale } from '@antv/scale';\nimport { ScaleComponent as SC } from '../runtime';\nimport { ThresholdScale as ThresholdScaleSpec } from '../spec';\n\nexport type ThresholdOptions = Omit<ThresholdScaleSpec, 'type'>;\n\nexport const Threshold: SC<ThresholdOptions> = (options) => {\n  return new ThresholdScale(options);\n};\n\nThreshold.props = {};\n", "import { Quantile as QuantileScale } from '@antv/scale';\nimport { ScaleComponent as SC } from '../runtime';\nimport { QuantileScale as QuantileScaleSpec } from '../spec';\n\nexport type QuantileOptions = Omit<QuantileScaleSpec, 'type'>;\n\nexport const Quantile: SC<QuantileOptions> = (options) => {\n  return new QuantileScale(options);\n};\n\nQuantile.props = {};\n", "import { Quantize as QuantizeScale } from '@antv/scale';\nimport { ScaleComponent as SC } from '../runtime';\nimport { QuantizeScale as QuantizeScaleSpec } from '../spec';\n\nexport type QuantizeOptions = Omit<QuantizeScaleSpec, 'type'>;\n\nexport const Quantize: SC<QuantizeOptions> = (options) => {\n  return new QuantizeScale(options);\n};\n\nQuantize.props = {};\n", "import { Sqrt as SqrtScale } from '@antv/scale';\nimport { SqrtScale as SqrtScaleSpec } from '../spec';\nimport { ScaleComponent as SC } from '../runtime';\n\nexport type SqrtOptions = Omit<SqrtScaleSpec, 'type'>;\n\nexport const Sqrt: SC<SqrtOptions> = (options) => {\n  return new SqrtScale(options);\n};\n\nSqrt.props = {};\n", "import { Sequential as SequentialScale } from '@antv/scale';\nimport { ScaleComponent as SC } from '../runtime';\nimport { SequentialScale as SequentialScaleSpec } from '../spec';\n\nexport type SequentialOptions = Omit<SequentialScaleSpec, 'type'>;\n\nexport const Sequential: SC<SequentialOptions> = (options) => {\n  return new SequentialScale(options);\n};\n\nSequential.props = {};\n", "import { Constant as ConstantScale } from '@antv/scale';\nimport { ConstantScale as ConstantScaleSpec } from '../spec';\nimport { ScaleComponent as SC } from '../runtime';\n\nexport type ConstantOptions = Omit<ConstantScaleSpec, 'type'>;\n\nexport const Constant: SC<ConstantOptions> = (options) => {\n  return new ConstantScale(options);\n};\n\nConstant.props = {};\n", "/**\n * G2 component class name prefix\n */\nexport const G2_CLASS_PREFIX = 'g2-';\n\n/**\n * Helper function to create G2 CSS class selector\n */\nexport function g2Selector(className: string): string {\n  return `.${G2_CLASS_PREFIX}${className}`;\n}\n\n// [legend type, [channels, scale type][][]]\ntype InferStrategy = [string, [string, string][][]];\n\n/**\n * @examples\n * \n * color - `discrete`, shape - `constant`\n * legendCategory.rule[27] is matched\n *\n * \n * shape - `discrete`, size - `constant`\n * There are no rules to match\n *\n */\nexport const LEGEND_INFER_STRATEGIES: InferStrategy[] = [\n  [\n    'legendCategory',\n    [\n      [\n        ['color', 'discrete'],\n        ['opacity', 'discrete'],\n        ['shape', 'discrete'],\n        ['size', 'constant'],\n      ],\n      [\n        ['color', 'discrete'],\n        ['opacity', 'constant'],\n        ['shape', 'discrete'],\n        ['size', 'constant'],\n      ],\n      [\n        ['color', 'discrete'],\n        ['opacity', 'discrete'],\n        ['shape', 'constant'],\n        ['size', 'constant'],\n      ],\n      [\n        ['color', 'discrete'],\n        ['opacity', 'constant'],\n        ['shape', 'constant'],\n        ['size', 'constant'],\n      ],\n      [\n        ['color', 'constant'],\n        ['opacity', 'discrete'],\n        ['shape', 'discrete'],\n        ['size', 'constant'],\n      ],\n      [\n        ['color', 'constant'],\n        ['opacity', 'constant'],\n        ['shape', 'discrete'],\n        ['size', 'constant'],\n      ],\n      [\n        ['color', 'constant'],\n        ['opacity', 'discrete'],\n        ['shape', 'constant'],\n        ['size', 'constant'],\n      ],\n      [\n        ['color', 'discrete'],\n        ['shape', 'discrete'],\n        ['size', 'constant'],\n      ],\n      [\n        ['color', 'discrete'],\n        ['opacity', 'discrete'],\n        ['shape', 'discrete'],\n      ],\n      [\n        ['color', 'discrete'],\n        ['opacity', 'discrete'],\n        ['size', 'constant'],\n      ],\n      [\n        ['color', 'discrete'],\n        ['opacity', 'constant'],\n        ['shape', 'discrete'],\n      ],\n      [\n        ['color', 'discrete'],\n        ['opacity', 'constant'],\n        ['size', 'constant'],\n      ],\n      [\n        ['color', 'discrete'],\n        ['shape', 'constant'],\n        ['size', 'constant'],\n      ],\n      [\n        ['color', 'discrete'],\n        ['opacity', 'discrete'],\n        ['shape', 'constant'],\n      ],\n      [\n        ['color', 'discrete'],\n        ['opacity', 'constant'],\n        ['shape', 'constant'],\n      ],\n      [\n        ['color', 'constant'],\n        ['shape', 'discrete'],\n        ['size', 'constant'],\n      ],\n      [\n        ['color', 'constant'],\n        ['opacity', 'discrete'],\n        ['shape', 'discrete'],\n      ],\n      [\n        ['color', 'constant'],\n        ['opacity', 'discrete'],\n        ['size', 'constant'],\n      ],\n      [\n        ['color', 'constant'],\n        ['opacity', 'constant'],\n        ['shape', 'discrete'],\n      ],\n      // [\n      //   ['color', 'constant'],\n      //   ['opacity', 'constant'],\n      //   ['size', 'constant'],\n      // ],\n      // [\n      //   ['color', 'constant'],\n      //   ['shape', 'constant'],\n      //   ['size', 'constant'],\n      // ],\n      [\n        ['color', 'constant'],\n        ['opacity', 'discrete'],\n        ['shape', 'constant'],\n      ],\n      [\n        ['color', 'discrete'],\n        ['shape', 'discrete'],\n      ],\n      [\n        ['color', 'discrete'],\n        ['size', 'constant'],\n      ],\n      [\n        ['color', 'discrete'],\n        ['opacity', 'discrete'],\n      ],\n      [\n        ['color', 'discrete'],\n        ['opacity', 'constant'],\n      ],\n      [\n        ['color', 'discrete'],\n        ['shape', 'constant'],\n      ],\n      [\n        ['color', 'constant'],\n        ['shape', 'discrete'],\n      ],\n      [\n        ['color', 'constant'],\n        ['size', 'constant'],\n      ],\n      [\n        ['color', 'constant'],\n        ['opacity', 'discrete'],\n      ],\n      // [\n      //   ['color', 'constant'],\n      //   ['opacity', 'constant'],\n      // ],\n      // [\n      //   ['color', 'constant'],\n      //   ['shape', 'constant'],\n      // ],\n      [['color', 'discrete']],\n      // [['color', 'constant']],\n    ],\n  ],\n  [\n    'legendContinuousSize',\n    [\n      [\n        ['color', 'continuous'],\n        ['opacity', 'continuous'],\n        ['size', 'continuous'],\n      ],\n      [\n        ['color', 'constant'],\n        ['opacity', 'continuous'],\n        ['size', 'continuous'],\n      ],\n      [\n        ['color', 'continuous'],\n        ['size', 'continuous'],\n      ],\n      [\n        ['color', 'constant'],\n        ['size', 'continuous'],\n      ],\n      [\n        ['size', 'continuous'],\n        ['opacity', 'continuous'],\n      ],\n      [['size', 'continuous']],\n    ],\n  ],\n  [\n    'legendContinuousBlockSize',\n    [\n      [\n        ['color', 'distribution'],\n        ['opacity', 'distribution'],\n        ['size', 'distribution'],\n      ],\n      [\n        ['color', 'distribution'],\n        ['size', 'distribution'],\n      ],\n    ],\n  ],\n  [\n    'legendContinuousBlock',\n    [\n      [\n        ['color', 'distribution'],\n        ['opacity', 'continuous'],\n      ],\n      [['color', 'distribution']],\n    ],\n  ],\n  [\n    'legendContinuous',\n    [\n      [\n        ['color', 'continuous'],\n        ['opacity', 'continuous'],\n      ],\n      [['color', 'continuous']],\n      [['opacity', 'continuous']],\n    ],\n  ],\n];\n\nexport const ANNOTATION_MARKS = [\n  'lineX',\n  'lineY',\n  'rangeX',\n  'rangeY',\n  'range',\n  'connector',\n];\n", "import { g2Selector } from '../component/constant';\n\nexport function create({\n  colorDefault,\n  colorBlack,\n  colorWhite,\n  colorStroke,\n  colorBackground,\n  padding1,\n  padding2,\n  padding3,\n  alpha90,\n  alpha65,\n  alpha45,\n  alpha25,\n  alpha10,\n  category10,\n  category20,\n  sizeDefault = 1,\n  padding = 'auto',\n  margin = 16,\n}) {\n  return {\n    padding,\n    margin,\n    size: sizeDefault,\n    color: colorDefault,\n    category10,\n    category20,\n    enter: {\n      duration: 300,\n      fill: 'both',\n      delay: 0,\n    },\n    update: {\n      duration: 300,\n      fill: 'both',\n      delay: 0,\n    },\n    exit: {\n      duration: 300,\n      fill: 'both',\n      delay: 0,\n    },\n    view: {\n      viewFill: colorBackground,\n      plotFill: 'transparent',\n      mainFill: 'transparent',\n      contentFill: 'transparent',\n    },\n    line: {\n      line: {\n        fill: '',\n        strokeOpacity: 1,\n        lineWidth: 1,\n        lineCap: 'round',\n      },\n    },\n    point: {\n      point: {\n        r: 3,\n        fillOpacity: 0.95,\n        lineWidth: 0,\n      },\n      hollow: {\n        r: 3,\n        strokeOpacity: 0.95,\n        lineWidth: 1,\n      },\n      plus: {\n        r: 3,\n        strokeOpacity: 0.95,\n        lineWidth: 3,\n      },\n      diamond: {\n        r: 3,\n        strokeOpacity: 0.95,\n        lineWidth: 1,\n      },\n    },\n    interval: {\n      rect: {\n        fillOpacity: 0.95,\n      },\n      hollow: {\n        fill: '',\n        strokeOpacity: 1,\n        lineWidth: 2,\n      },\n    },\n    area: {\n      area: {\n        fillOpacity: 0.85,\n        lineWidth: 0,\n      },\n    },\n    polygon: {\n      polygon: {\n        fillOpacity: 0.95,\n      },\n    },\n    cell: {\n      cell: {\n        fillOpacity: 0.95,\n      },\n      hollow: {\n        fill: '',\n        strokeOpacity: 1,\n        lineWidth: 2,\n      },\n    },\n    rect: {\n      rect: {\n        fillOpacity: 0.95,\n      },\n      hollow: {\n        fill: '',\n        strokeOpacity: 1,\n        lineWidth: 2,\n      },\n    },\n    link: {\n      link: {\n        fill: '',\n        strokeOpacity: 1,\n      },\n    },\n    vector: {\n      vector: {\n        fillOpacity: 1,\n      },\n    },\n    box: {\n      box: {\n        fillOpacity: 0.95,\n        stroke: colorBlack,\n        lineWidth: 1,\n      },\n    },\n    text: {\n      text: {\n        fill: '#1D2129',\n        fontSize: 12,\n        lineWidth: 0,\n        connectorStroke: colorStroke,\n        connectorStrokeOpacity: 0.45,\n        connectorLineWidth: 1,\n        backgroundFill: colorStroke,\n        backgroundFillOpacity: 0.15,\n        backgroundPadding: [2, 4],\n        startMarkerSymbol: 'circle',\n        startMarkerSize: 4,\n        endMarkerSymbol: 'circle',\n        endMarkerSize: 4,\n      },\n      badge: {\n        fill: '#1D2129',\n        fillOpacity: 0.65,\n        lineWidth: 0,\n        fontSize: 10,\n        textAlign: 'center',\n        textBaseline: 'middle',\n        markerFill: colorStroke,\n        markerFillOpacity: 0.25,\n        markerStrokeOpacity: 0,\n      },\n    },\n    lineX: {\n      line: {\n        stroke: colorStroke,\n        strokeOpacity: 0.45,\n        lineWidth: 1,\n      },\n    },\n    lineY: {\n      line: {\n        stroke: colorStroke,\n        strokeOpacity: 0.45,\n        lineWidth: 1,\n      },\n    },\n    rangeX: {\n      range: {\n        fill: colorStroke,\n        fillOpacity: 0.15,\n        lineWidth: 0,\n      },\n    },\n    rangeY: {\n      range: {\n        fill: colorStroke,\n        fillOpacity: 0.15,\n        lineWidth: 0,\n      },\n    },\n    connector: {\n      connector: {\n        stroke: colorStroke,\n        strokeOpacity: 0.45,\n        lineWidth: 1,\n        connectLength1: 12,\n        endMarker: true,\n        endMarkerSize: 6,\n        endMarkerFill: colorStroke,\n        endMarkerFillOpacity: 0.95,\n      },\n    },\n    axis: {\n      arrow: false,\n      gridLineDash: [3, 4],\n      gridLineWidth: 0.5,\n      gridStroke: colorBlack,\n      gridStrokeOpacity: alpha10,\n      labelAlign: 'horizontal',\n      labelFill: colorBlack,\n      labelOpacity: alpha45,\n      labelFontSize: 12,\n      labelFontWeight: 'normal',\n      labelSpacing: padding1, // spacing between label and it's tick\n      line: false,\n      lineLineWidth: 0.5,\n      lineStroke: colorBlack,\n      lineStrokeOpacity: alpha45,\n      tickLength: 4,\n      tickLineWidth: 1,\n      tickStroke: colorBlack,\n      tickOpacity: alpha45,\n      titleFill: colorBlack,\n      titleOpacity: alpha90,\n      titleFontSize: 12,\n      titleFontWeight: 'normal',\n      titleSpacing: 12,\n      titleTransformOrigin: 'center',\n      lineArrowOffset: 6,\n      lineArrowSize: 6,\n    },\n    axisTop: {\n      gridDirection: 'positive',\n      labelDirection: 'negative',\n      tickDirection: 'negative',\n      titlePosition: 'top',\n      titleSpacing: 12,\n      labelSpacing: 4,\n      titleTextBaseline: 'middle',\n    },\n    axisBottom: {\n      gridDirection: 'negative',\n      labelDirection: 'positive',\n      tickDirection: 'positive',\n      titlePosition: 'bottom',\n      titleSpacing: 12,\n      labelSpacing: 4,\n      titleTextBaseline: 'bottom',\n      titleTransform: 'translate(0, 8)',\n    },\n    axisLeft: {\n      gridDirection: 'positive',\n      labelDirection: 'negative',\n      labelSpacing: 4,\n      tickDirection: 'negative',\n      titlePosition: 'left',\n      titleSpacing: 12,\n      titleTextBaseline: 'middle',\n      titleDirection: 'vertical',\n      titleTransform: 'rotate(-90) translate(0, -8)',\n      titleTransformOrigin: 'center',\n    },\n    axisRight: {\n      gridDirection: 'negative',\n      labelDirection: 'positive',\n      labelSpacing: 4,\n      tickDirection: 'positive',\n      titlePosition: 'right',\n      titleSpacing: 12,\n      titleTextBaseline: 'top',\n      titleDirection: 'vertical',\n      titleTransformOrigin: 'center',\n    },\n    axisLinear: {\n      girdClosed: true,\n      gridConnect: 'arc',\n      gridDirection: 'negative',\n      gridType: 'surround',\n      titlePosition: 'top',\n      titleSpacing: 0,\n    },\n    axisArc: {\n      title: false,\n      titlePosition: 'inner',\n      line: false,\n      tick: true,\n      labelSpacing: 4,\n    },\n    axisRadar: {\n      girdClosed: true,\n      gridStrokeOpacity: 0.3,\n      gridType: 'surround',\n      tick: false,\n      titlePosition: 'start',\n    },\n    legendCategory: {\n      backgroundFill: 'transparent',\n      itemBackgroundFill: 'transparent',\n      itemLabelFill: colorBlack,\n      itemLabelFillOpacity: alpha90,\n      itemLabelFontSize: 12,\n      itemLabelFontWeight: 'normal',\n      itemMarkerFillOpacity: 1,\n      itemMarkerSize: 8,\n      focusMarkerSize: 12,\n      itemSpacing: [padding1, padding1, padding1 / 2],\n      itemValueFill: colorBlack,\n      itemValueFillOpacity: 0.65,\n      itemValueFontSize: 12,\n      itemValueFontWeight: 'normal',\n      navButtonFill: colorBlack,\n      navButtonFillOpacity: 0.65,\n      navPageNumFill: colorBlack,\n      navPageNumFillOpacity: 0.45,\n      navPageNumFontSize: 12,\n      padding: 8,\n      title: false,\n      titleFill: colorBlack,\n      titleFillOpacity: 0.65,\n      titleFontSize: 12,\n      titleFontWeight: 'normal',\n      titleSpacing: 4,\n      tickStroke: colorBlack,\n      tickStrokeOpacity: 0.25,\n      rowPadding: padding1,\n      colPadding: padding2,\n      maxRows: 3,\n      maxCols: 3,\n    },\n    legendContinuous: {\n      handleHeight: 12,\n      handleLabelFill: colorBlack,\n      handleLabelFillOpacity: alpha45,\n      handleLabelFontSize: 12,\n      handleLabelFontWeight: 'normal',\n      handleMarkerFill: colorBlack,\n      handleMarkerFillOpacity: 0.6,\n      handleMarkerLineWidth: 1,\n      handleMarkerStroke: colorBlack,\n      handleMarkerStrokeOpacity: 0.25,\n      handleWidth: 10,\n      labelFill: colorBlack,\n      labelFillOpacity: alpha45,\n      labelFontSize: 12,\n      labelFontWeight: 'normal',\n      labelSpacing: 3,\n      tick: true,\n      tickLength: 12,\n      ribbonSize: 12,\n      ribbonFill: '#aaa',\n      handle: true,\n      handleLabel: false,\n      handleShape: 'slider',\n      handleIconSize: 12 / 1.8,\n      indicator: false,\n      titleFontSize: 12,\n      titleSpacing: 4,\n      titleFontWeight: 'normal',\n      titleFillOpacity: alpha90,\n      tickStroke: colorBlack,\n      tickStrokeOpacity: alpha45,\n    },\n    label: {\n      fill: colorBlack,\n      fillOpacity: 0.65,\n      fontSize: 12,\n      fontWeight: 'normal',\n      stroke: undefined,\n      offset: 12,\n      connectorStroke: colorBlack,\n      connectorStrokeOpacity: 0.45,\n      connectorLineWidth: 1,\n      connectorLength: 12,\n      connectorLength2: 8,\n      connectorDistance: 4,\n    },\n    innerLabel: {\n      fill: colorWhite,\n      fontSize: 12,\n      fillOpacity: 0.85,\n      fontWeight: 'normal',\n      stroke: undefined,\n      offset: 0,\n    },\n    htmlLabel: {\n      fontSize: 12,\n      opacity: 0.65,\n      color: colorBlack,\n      fontWeight: 'normal',\n    },\n    slider: {\n      trackSize: 16,\n      trackFill: colorStroke,\n      trackFillOpacity: 1,\n      selectionFill: colorDefault,\n      selectionFillOpacity: 0.15,\n      handleIconSize: 10,\n      handleIconFill: '#f7f7f7',\n      handleIconFillOpacity: 1,\n      handleIconStroke: colorBlack,\n      handleIconStrokeOpacity: 0.25,\n      handleIconLineWidth: 1,\n      handleIconRadius: 2,\n      handleLabelFill: colorBlack,\n      handleLabelFillOpacity: 0.45,\n      handleLabelFontSize: 12,\n      handleLabelFontWeight: 'normal',\n    },\n    scrollbar: {\n      padding: [0, 0, 0, 0],\n      trackSize: 6,\n      isRound: true,\n      slidable: true,\n      scrollable: true,\n      trackFill: '#e5e5e5',\n      trackFillOpacity: 0,\n      thumbFill: '#000',\n      thumbFillOpacity: 0.15,\n      thumbHighlightedFillOpacity: 0.2,\n    },\n    title: {\n      spacing: 8,\n      titleFill: colorBlack,\n      titleFillOpacity: alpha90,\n      titleFontSize: 16,\n      titleFontWeight: 'bold',\n      titleTextBaseline: 'top',\n      subtitleFill: colorBlack,\n      subtitleFillOpacity: alpha65,\n      subtitleFontSize: 12,\n      subtitleFontWeight: 'normal',\n      subtitleTextBaseline: 'top',\n    },\n    tooltip: {\n      css: {\n        [g2Selector('tooltip')]: {\n          'font-family': 'sans-serif',\n        },\n      },\n    },\n  };\n}\n", "import { deepMix } from '@antv/util';\nimport { ThemeComponent as TC, Theme } from '../runtime';\nimport { create } from './create';\n\nexport const tokens = {\n  colorBlack: '#1D2129',\n  colorWhite: '#ffffff',\n  colorStroke: '#416180',\n  colorDefault: '#1783FF',\n  colorBackground: 'transparent',\n  category10: [\n    '#1783FF',\n    '#00C9C9',\n    '#F0884D',\n    '#D580FF',\n    '#7863FF',\n    '#60C42D',\n    '#BD8F24',\n    '#FF80CA',\n    '#2491B3',\n    '#17C76F',\n  ],\n  category20: [\n    '#1783FF',\n    '#00C9C9',\n    '#F0884D',\n    '#D580FF',\n    '#7863FF',\n    '#60C42D',\n    '#BD8F24',\n    '#FF80CA',\n    '#2491B3',\n    '#17C76F',\n    '#AABA01',\n    '#BC7CFC',\n    '#237CBC',\n    '#2DE379',\n    '#CE8032',\n    '#FF7AF4',\n    '#545FD3',\n    '#AFE410',\n    '#D8C608',\n    '#FFA1E0',\n  ],\n  padding1: 8,\n  padding2: 12,\n  padding3: 20,\n  alpha90: 0.9,\n  alpha65: 0.65,\n  alpha45: 0.45,\n  alpha25: 0.25,\n  alpha10: 0.1,\n};\n\nconst defaults = create(tokens);\n\nexport type LightOptions = Theme;\n\n/**\n * Default theme.\n */\nexport const Light: TC<LightOptions> = (options) => {\n  return deepMix({}, defaults, options);\n};\n\nLight.props = {};\n", "import { deepMix } from '@antv/util';\nimport { ThemeComponent as TC, Theme } from '../runtime';\nimport { Light } from './light';\n\nexport type ClassicOptions = Theme;\n\n/**\n * Default theme.\n */\nexport const Classic: TC<ClassicOptions> = (options) => {\n  return deepMix(\n    {},\n    Light(),\n    {\n      category10: 'category10',\n      category20: 'category20',\n    },\n    options,\n  );\n};\n\nClassic.props = {};\n", "import { deepMix } from '@antv/util';\nimport { ThemeComponent as TC, Theme } from '../runtime';\nimport { g2Selector } from '../component/constant';\nimport { create } from './create';\n\nexport type DarkOptions = Theme;\n\nexport const tokens = {\n  colorBlack: '#fff',\n  colorWhite: '#000',\n  colorStroke: '#416180',\n  colorDefault: '#1783FF',\n  colorBackground: 'transparent',\n  category10: [\n    '#1783FF',\n    '#00C9C9',\n    '#F0884D',\n    '#D580FF',\n    '#7863FF',\n    '#60C42D',\n    '#BD8F24',\n    '#FF80CA',\n    '#2491B3',\n    '#17C76F',\n  ],\n  category20: [\n    '#1783FF',\n    '#00C9C9',\n    '#F0884D',\n    '#D580FF',\n    '#7863FF',\n    '#60C42D',\n    '#BD8F24',\n    '#FF80CA',\n    '#2491B3',\n    '#17C76F',\n    '#AABA01',\n    '#BC7CFC',\n    '#237CBC',\n    '#2DE379',\n    '#CE8032',\n    '#FF7AF4',\n    '#545FD3',\n    '#AFE410',\n    '#D8C608',\n    '#FFA1E0',\n  ],\n  padding1: 8,\n  padding2: 12,\n  padding3: 20,\n  alpha90: 0.9,\n  alpha65: 0.65,\n  alpha45: 0.45,\n  alpha25: 0.25,\n  alpha10: 0.25,\n};\n\nconst defaults = create(tokens);\n\nexport const Dark: TC<DarkOptions> = (options) => {\n  return deepMix(\n    {},\n    defaults,\n    {\n      tooltip: {\n        crosshairsStroke: '#fff',\n        crosshairsLineWidth: 1,\n        crosshairsStrokeOpacity: 0.25,\n        css: {\n          [g2Selector('tooltip')]: {\n            background: '#1f1f1f',\n            opacity: 0.95,\n          },\n          [g2Selector('tooltip-title')]: {\n            color: '#A6A6A6',\n          },\n          [g2Selector('tooltip-list-item-name-label')]: {\n            color: '#A6A6A6',\n          },\n          [g2Selector('tooltip-list-item-value')]: {\n            color: '#A6A6A6',\n          },\n        },\n      },\n    },\n    options,\n  );\n};\n", "import { ThemeComponent as TC, Theme } from '../runtime';\nimport { Dark } from './dark';\n\nexport type ClassicDarkOptions = Theme;\n\n/**\n * Dark theme.\n */\nexport const ClassicDark: TC<ClassicDarkOptions> = (options) => {\n  return Object.assign(\n    {},\n    Dark(),\n    {\n      category10: 'category10',\n      category20: 'category20',\n    },\n    options,\n  );\n};\n\nClassicDark.props = {};\n", "import { deepMix } from '@antv/util';\nimport { ThemeComponent as TC, Theme } from '../runtime';\nimport { create } from './create';\n\nexport const tokens = {\n  colorBlack: '#000',\n  colorWhite: '#fff',\n  colorStroke: '#888',\n  colorDefault: '#4e79a7',\n  colorBackground: 'transparent',\n  category10: [\n    '#4e79a7',\n    '#f28e2c',\n    '#e15759',\n    '#76b7b2',\n    '#59a14f',\n    '#edc949',\n    '#af7aa1',\n    '#ff9da7',\n    '#9c755f',\n    '#bab0ab',\n  ],\n  category20: [\n    '#4e79a7',\n    '#f28e2c',\n    '#e15759',\n    '#76b7b2',\n    '#59a14f',\n    '#edc949',\n    '#af7aa1',\n    '#ff9da7',\n    '#9c755f',\n    '#bab0ab',\n  ],\n  padding1: 8,\n  padding2: 12,\n  padding3: 20,\n  alpha90: 0.9,\n  alpha65: 0.65,\n  alpha45: 0.45,\n  alpha25: 0.25,\n  alpha10: 0.1,\n};\n\nconst defaults = create(tokens);\n\nexport type AcademyOptions = Theme;\n\nexport const Academy: TC<AcademyOptions> = (options) => {\n  return deepMix(\n    {},\n    defaults,\n    {\n      text: { text: { fontSize: 10 } },\n      axis: {\n        gridLineDash: [0, 0],\n        gridLineWidth: 1,\n        gridStroke: '#ddd',\n        gridStrokeOpacity: 1,\n        labelOpacity: 1,\n        labelStrokeOpacity: 1,\n        labelFontSize: 10,\n        line: true,\n        lineLineWidth: 1,\n        lineStroke: '#888',\n        lineStrokeOpacity: 1,\n        tickLength: 5,\n        tickStrokeOpacity: 1,\n        titleOpacity: 1,\n        titleStrokeOpacity: 1,\n        titleFillOpacity: 1,\n        titleFontSize: 11,\n        titleFontWeight: 'bold',\n      },\n      axisLeft: {\n        gridFilter: (_, i) => i !== 0,\n      },\n      axisRight: {\n        gridFilter: (_, i) => i !== 0,\n      },\n      legendCategory: {\n        itemLabelFillOpacity: 1,\n        itemLabelFontSize: 10,\n        itemValueFillOpacity: 1,\n        itemValueFontSize: 10,\n        titleFillOpacity: 1,\n        titleFontSize: 11,\n        titleFontWeight: 'bold',\n      },\n      legendContinuous: {\n        handleLabelFontSize: 10,\n        labelFillOpacity: 0.45,\n        labelFontSize: 10,\n      },\n      label: {\n        fontSize: 10,\n      },\n      innerLabel: {\n        fontSize: 10,\n      },\n      htmlLabel: {\n        fontSize: 10,\n      },\n      slider: {\n        handleLabelFontSize: 10,\n        trackFillOpacity: 0.05,\n      },\n    },\n    options,\n  );\n};\n\nAcademy.props = {};\n", "export default function(x) {\n  return Math.abs(x = Math.round(x)) >= 1e21\n      ? x.toLocaleString(\"en\").replace(/,/g, \"\")\n      : x.toString(10);\n}\n\n// Computes the decimal coefficient and exponent of the specified number x with\n// significant digits p, where x is positive and p is in [1, 21] or undefined.\n// For example, formatDecimalParts(1.23) returns [\"123\", 0].\nexport function formatDecimalParts(x, p) {\n  if ((i = (x = p ? x.toExponential(p - 1) : x.toExponential()).indexOf(\"e\")) < 0) return null; // NaN, Infinity\n  var i, coefficient = x.slice(0, i);\n\n  // The string returned by toExponential either has the form \\d\\.\\d+e[-+]\\d+\n  // (e.g., 1.2e+3) or the form \\de[-+]\\d+ (e.g., 1e+3).\n  return [\n    coefficient.length > 1 ? coefficient[0] + coefficient.slice(2) : coefficient,\n    +x.slice(i + 1)\n  ];\n}\n", "import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport default function(x) {\n  return x = formatDecimalParts(Math.abs(x)), x ? x[1] : NaN;\n}\n", "export default function(grouping, thousands) {\n  return function(value, width) {\n    var i = value.length,\n        t = [],\n        j = 0,\n        g = grouping[0],\n        length = 0;\n\n    while (i > 0 && g > 0) {\n      if (length + g + 1 > width) g = Math.max(1, width - length);\n      t.push(value.substring(i -= g, i + g));\n      if ((length += g + 1) > width) break;\n      g = grouping[j = (j + 1) % grouping.length];\n    }\n\n    return t.reverse().join(thousands);\n  };\n}\n", "export default function(numerals) {\n  return function(value) {\n    return value.replace(/[0-9]/g, function(i) {\n      return numerals[+i];\n    });\n  };\n}\n", "// [[fill]align][sign][symbol][0][width][,][.precision][~][type]\nvar re = /^(?:(.)?([<>=^]))?([+\\-( ])?([$#])?(0)?(\\d+)?(,)?(\\.\\d+)?(~)?([a-z%])?$/i;\n\nexport default function formatSpecifier(specifier) {\n  if (!(match = re.exec(specifier))) throw new Error(\"invalid format: \" + specifier);\n  var match;\n  return new FormatSpecifier({\n    fill: match[1],\n    align: match[2],\n    sign: match[3],\n    symbol: match[4],\n    zero: match[5],\n    width: match[6],\n    comma: match[7],\n    precision: match[8] && match[8].slice(1),\n    trim: match[9],\n    type: match[10]\n  });\n}\n\nformatSpecifier.prototype = FormatSpecifier.prototype; // instanceof\n\nexport function FormatSpecifier(specifier) {\n  this.fill = specifier.fill === undefined ? \" \" : specifier.fill + \"\";\n  this.align = specifier.align === undefined ? \">\" : specifier.align + \"\";\n  this.sign = specifier.sign === undefined ? \"-\" : specifier.sign + \"\";\n  this.symbol = specifier.symbol === undefined ? \"\" : specifier.symbol + \"\";\n  this.zero = !!specifier.zero;\n  this.width = specifier.width === undefined ? undefined : +specifier.width;\n  this.comma = !!specifier.comma;\n  this.precision = specifier.precision === undefined ? undefined : +specifier.precision;\n  this.trim = !!specifier.trim;\n  this.type = specifier.type === undefined ? \"\" : specifier.type + \"\";\n}\n\nFormatSpecifier.prototype.toString = function() {\n  return this.fill\n      + this.align\n      + this.sign\n      + this.symbol\n      + (this.zero ? \"0\" : \"\")\n      + (this.width === undefined ? \"\" : Math.max(1, this.width | 0))\n      + (this.comma ? \",\" : \"\")\n      + (this.precision === undefined ? \"\" : \".\" + Math.max(0, this.precision | 0))\n      + (this.trim ? \"~\" : \"\")\n      + this.type;\n};\n", "// Trims insignificant zeros, e.g., replaces 1.2000k with 1.2k.\nexport default function(s) {\n  out: for (var n = s.length, i = 1, i0 = -1, i1; i < n; ++i) {\n    switch (s[i]) {\n      case \".\": i0 = i1 = i; break;\n      case \"0\": if (i0 === 0) i0 = i; i1 = i; break;\n      default: if (!+s[i]) break out; if (i0 > 0) i0 = 0; break;\n    }\n  }\n  return i0 > 0 ? s.slice(0, i0) + s.slice(i1 + 1) : s;\n}\n", "import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport var prefixExponent;\n\nexport default function(x, p) {\n  var d = formatDecimalParts(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1],\n      i = exponent - (prefixExponent = Math.max(-8, Math.min(8, Math.floor(exponent / 3))) * 3) + 1,\n      n = coefficient.length;\n  return i === n ? coefficient\n      : i > n ? coefficient + new Array(i - n + 1).join(\"0\")\n      : i > 0 ? coefficient.slice(0, i) + \".\" + coefficient.slice(i)\n      : \"0.\" + new Array(1 - i).join(\"0\") + formatDecimalParts(x, Math.max(0, p + i - 1))[0]; // less than 1y!\n}\n", "import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport default function(x, p) {\n  var d = formatDecimalParts(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1];\n  return exponent < 0 ? \"0.\" + new Array(-exponent).join(\"0\") + coefficient\n      : coefficient.length > exponent + 1 ? coefficient.slice(0, exponent + 1) + \".\" + coefficient.slice(exponent + 1)\n      : coefficient + new Array(exponent - coefficient.length + 2).join(\"0\");\n}\n", "import formatDecimal from \"./formatDecimal.js\";\nimport formatPrefixAuto from \"./formatPrefixAuto.js\";\nimport formatRounded from \"./formatRounded.js\";\n\nexport default {\n  \"%\": (x, p) => (x * 100).toFixed(p),\n  \"b\": (x) => Math.round(x).toString(2),\n  \"c\": (x) => x + \"\",\n  \"d\": formatDecimal,\n  \"e\": (x, p) => x.toExponential(p),\n  \"f\": (x, p) => x.toFixed(p),\n  \"g\": (x, p) => x.toPrecision(p),\n  \"o\": (x) => Math.round(x).toString(8),\n  \"p\": (x, p) => formatRounded(x * 100, p),\n  \"r\": formatRounded,\n  \"s\": formatPrefixAuto,\n  \"X\": (x) => Math.round(x).toString(16).toUpperCase(),\n  \"x\": (x) => Math.round(x).toString(16)\n};\n", "export default function(x) {\n  return x;\n}\n", "import exponent from \"./exponent.js\";\nimport formatGroup from \"./formatGroup.js\";\nimport formatNumerals from \"./formatNumerals.js\";\nimport formatSpecifier from \"./formatSpecifier.js\";\nimport formatTrim from \"./formatTrim.js\";\nimport formatTypes from \"./formatTypes.js\";\nimport {prefixExponent} from \"./formatPrefixAuto.js\";\nimport identity from \"./identity.js\";\n\nvar map = Array.prototype.map,\n    prefixes = [\"y\",\"z\",\"a\",\"f\",\"p\",\"n\",\"\",\"m\",\"\",\"k\",\"M\",\"G\",\"T\",\"P\",\"E\",\"Z\",\"Y\"];\n\nexport default function(locale) {\n  var group = locale.grouping === undefined || locale.thousands === undefined ? identity : formatGroup(map.call(locale.grouping, Number), locale.thousands + \"\"),\n      currencyPrefix = locale.currency === undefined ? \"\" : locale.currency[0] + \"\",\n      currencySuffix = locale.currency === undefined ? \"\" : locale.currency[1] + \"\",\n      decimal = locale.decimal === undefined ? \".\" : locale.decimal + \"\",\n      numerals = locale.numerals === undefined ? identity : formatNumerals(map.call(locale.numerals, String)),\n      percent = locale.percent === undefined ? \"%\" : locale.percent + \"\",\n      minus = locale.minus === undefined ? \"\" : locale.minus + \"\",\n      nan = locale.nan === undefined ? \"NaN\" : locale.nan + \"\";\n\n  function newFormat(specifier) {\n    specifier = formatSpecifier(specifier);\n\n    var fill = specifier.fill,\n        align = specifier.align,\n        sign = specifier.sign,\n        symbol = specifier.symbol,\n        zero = specifier.zero,\n        width = specifier.width,\n        comma = specifier.comma,\n        precision = specifier.precision,\n        trim = specifier.trim,\n        type = specifier.type;\n\n    // The \"n\" type is an alias for \",g\".\n    if (type === \"n\") comma = true, type = \"g\";\n\n    // The \"\" type, and any invalid type, is an alias for \".12~g\".\n    else if (!formatTypes[type]) precision === undefined && (precision = 12), trim = true, type = \"g\";\n\n    // If zero fill is specified, padding goes after sign and before digits.\n    if (zero || (fill === \"0\" && align === \"=\")) zero = true, fill = \"0\", align = \"=\";\n\n    // Compute the prefix and suffix.\n    // For SI-prefix, the suffix is lazily computed.\n    var prefix = symbol === \"$\" ? currencyPrefix : symbol === \"#\" && /[boxX]/.test(type) ? \"0\" + type.toLowerCase() : \"\",\n        suffix = symbol === \"$\" ? currencySuffix : /[%p]/.test(type) ? percent : \"\";\n\n    // What format function should we use?\n    // Is this an integer type?\n    // Can this type generate exponential notation?\n    var formatType = formatTypes[type],\n        maybeSuffix = /[defgprs%]/.test(type);\n\n    // Set the default precision if not specified,\n    // or clamp the specified precision to the supported range.\n    // For significant precision, it must be in [1, 21].\n    // For fixed precision, it must be in [0, 20].\n    precision = precision === undefined ? 6\n        : /[gprs]/.test(type) ? Math.max(1, Math.min(21, precision))\n        : Math.max(0, Math.min(20, precision));\n\n    function format(value) {\n      var valuePrefix = prefix,\n          valueSuffix = suffix,\n          i, n, c;\n\n      if (type === \"c\") {\n        valueSuffix = formatType(value) + valueSuffix;\n        value = \"\";\n      } else {\n        value = +value;\n\n        // Determine the sign. -0 is not less than 0, but 1 / -0 is!\n        var valueNegative = value < 0 || 1 / value < 0;\n\n        // Perform the initial formatting.\n        value = isNaN(value) ? nan : formatType(Math.abs(value), precision);\n\n        // Trim insignificant zeros.\n        if (trim) value = formatTrim(value);\n\n        // If a negative value rounds to zero after formatting, and no explicit positive sign is requested, hide the sign.\n        if (valueNegative && +value === 0 && sign !== \"+\") valueNegative = false;\n\n        // Compute the prefix and suffix.\n        valuePrefix = (valueNegative ? (sign === \"(\" ? sign : minus) : sign === \"-\" || sign === \"(\" ? \"\" : sign) + valuePrefix;\n        valueSuffix = (type === \"s\" ? prefixes[8 + prefixExponent / 3] : \"\") + valueSuffix + (valueNegative && sign === \"(\" ? \")\" : \"\");\n\n        // Break the formatted value into the integer value part that can be\n        // grouped, and fractional or exponential suffix part that is not.\n        if (maybeSuffix) {\n          i = -1, n = value.length;\n          while (++i < n) {\n            if (c = value.charCodeAt(i), 48 > c || c > 57) {\n              valueSuffix = (c === 46 ? decimal + value.slice(i + 1) : value.slice(i)) + valueSuffix;\n              value = value.slice(0, i);\n              break;\n            }\n          }\n        }\n      }\n\n      // If the fill character is not \"0\", grouping is applied before padding.\n      if (comma && !zero) value = group(value, Infinity);\n\n      // Compute the padding.\n      var length = valuePrefix.length + value.length + valueSuffix.length,\n          padding = length < width ? new Array(width - length + 1).join(fill) : \"\";\n\n      // If the fill character is \"0\", grouping is applied after padding.\n      if (comma && zero) value = group(padding + value, padding.length ? width - valueSuffix.length : Infinity), padding = \"\";\n\n      // Reconstruct the final output based on the desired alignment.\n      switch (align) {\n        case \"<\": value = valuePrefix + value + valueSuffix + padding; break;\n        case \"=\": value = valuePrefix + padding + value + valueSuffix; break;\n        case \"^\": value = padding.slice(0, length = padding.length >> 1) + valuePrefix + value + valueSuffix + padding.slice(length); break;\n        default: value = padding + valuePrefix + value + valueSuffix; break;\n      }\n\n      return numerals(value);\n    }\n\n    format.toString = function() {\n      return specifier + \"\";\n    };\n\n    return format;\n  }\n\n  function formatPrefix(specifier, value) {\n    var f = newFormat((specifier = formatSpecifier(specifier), specifier.type = \"f\", specifier)),\n        e = Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3,\n        k = Math.pow(10, -e),\n        prefix = prefixes[8 + e / 3];\n    return function(value) {\n      return f(k * value) + prefix;\n    };\n  }\n\n  return {\n    format: newFormat,\n    formatPrefix: formatPrefix\n  };\n}\n", "import formatLocale from \"./locale.js\";\n\nvar locale;\nexport var format;\nexport var formatPrefix;\n\ndefaultLocale({\n  thousands: \",\",\n  grouping: [3],\n  currency: [\"$\", \"\"]\n});\n\nexport default function defaultLocale(definition) {\n  locale = formatLocale(definition);\n  format = locale.format;\n  formatPrefix = locale.formatPrefix;\n  return locale;\n}\n", "import { CustomElement, DisplayObjectConfig, Group } from '@antv/g';\nimport { Layout } from '@antv/component';\nimport { deepMix, upperFirst } from '@antv/util';\nimport {\n  FlexLayout,\n  GuideComponentComponent,\n  GuideComponentOrientation,\n  GuideComponentPosition,\n  Scale,\n} from '../runtime';\nimport { G2Element, select, Selection } from '../utils/selection';\n\ntype Descriptor<T> = {\n  render?: (attributes: T, container: CustomElement<T>) => void;\n};\n\nexport function createComponent<T>(descriptor: Descriptor<T>): any {\n  return class extends CustomElement<T> {\n    public descriptor: Descriptor<T>;\n\n    constructor(config: DisplayObjectConfig<T>) {\n      super(config);\n      this.descriptor = descriptor;\n    }\n\n    connectedCallback() {\n      this.descriptor.render?.(this.attributes, this);\n    }\n\n    public update(cfg = {}) {\n      this.attr(deepMix({}, this.attributes, cfg));\n      this.descriptor.render?.(this.attributes, this);\n    }\n  };\n}\n\nexport function maybeAppend<T>(\n  parent: Group,\n  selector: string,\n  node: string | ((data: T, i: number) => G2Element),\n): Selection<T> {\n  if (!parent.querySelector(selector)) {\n    return select(parent).append(node);\n  }\n  return select(parent).select(selector);\n}\n\nexport function titleContent(field: string | string[]): string {\n  return Array.isArray(field) ? field.join(', ') : `${field || ''}`;\n}\n\nexport function inferComponentLayout(\n  position: GuideComponentPosition,\n  userDefinitions?: FlexLayout,\n) {\n  const preset = {\n    display: 'flex',\n    flexDirection: 'row',\n    justifyContent: 'flex-start',\n    alignItems: 'center',\n  };\n\n  let { flexDirection, justifyContent, alignItems } = preset;\n\n  const layout = {\n    top: ['row', 'flex-start', 'center'],\n    bottom: ['row', 'flex-start', 'center'],\n    left: ['column', 'flex-start', 'center'],\n    right: ['column', 'flex-start', 'center'],\n    center: ['column', 'center', 'center'],\n  };\n\n  if (position in layout) {\n    [flexDirection, justifyContent, alignItems] = layout[position];\n  }\n  return {\n    display: 'flex',\n    flexDirection,\n    justifyContent,\n    alignItems,\n    ...userDefinitions,\n  };\n}\n\nexport class G2Layout extends Layout {\n  get child() {\n    return this.children?.[0] as any;\n  }\n\n  update(options: any) {\n    this.attr(options);\n    const { subOptions } = options;\n    this.child?.update(subOptions);\n  }\n}\n\nexport class LegendCategoryLayout extends G2Layout {\n  update(options: any) {\n    const { subOptions } = options;\n    this.attr(options);\n    this.child?.update(subOptions);\n  }\n}\n\nexport function scaleOf(scales: Scale[], type: string): Scale | undefined {\n  return scales.filter((s) => s.getOptions().name === type)?.[0];\n}\n\nexport function isHorizontal(orientation: GuideComponentOrientation) {\n  return orientation === 'horizontal' || orientation === 0;\n}\n\nexport function isVertical(orientation: GuideComponentOrientation) {\n  return orientation === 'vertical' || orientation === -Math.PI / 2;\n}\n\nexport function inferComponentShape(\n  value: Record<string, any>,\n  options: Record<string, any>,\n  component: GuideComponentComponent,\n) {\n  const { bbox } = value;\n  const {\n    position = 'top',\n    size: userDefinedSize,\n    length: userDefinedLength,\n  } = options;\n  const isHorizontal = ['top', 'bottom', 'center'].includes(position);\n  const [bboxSize, bboxLength] = isHorizontal\n    ? [bbox.height, bbox.width]\n    : [bbox.width, bbox.height];\n  const { defaultSize, defaultLength } = component.props;\n  const size = userDefinedSize || defaultSize || bboxSize;\n  const length = userDefinedLength || defaultLength || bboxLength;\n  const orientation = isHorizontal ? 'horizontal' : 'vertical';\n  const [width, height] = isHorizontal ? [length, size] : [size, length];\n  return {\n    orientation,\n    width,\n    height,\n    size,\n    length,\n  } as const;\n}\n\nexport function domainOf(scales: Scale[]): any[] {\n  // to get a available scale's domain\n  return scales\n    .find((scale) => scale.getOptions().domain.length > 0)\n    .getOptions().domain;\n}\n\nexport function adaptor<T>(style: T) {\n  const reservedKeys = [\n    'arrow',\n    'crosshairs',\n    'grid',\n    'handle',\n    'handleLabel',\n    'indicator',\n    'label',\n    'line',\n    'tick',\n    'tip',\n    'title',\n    'trunc',\n  ];\n  // @ts-ignore\n  const { style: styles, ...rest } = style;\n  const finalStyle = {};\n  Object.entries(rest).forEach(([key, value]) => {\n    if (reservedKeys.includes(key)) {\n      finalStyle[`show${upperFirst(key)}`] = value;\n    } else finalStyle[key] = value;\n  });\n  return {\n    ...finalStyle,\n    ...styles,\n  };\n}\n", "import { Coordinate } from '@antv/coord';\nimport type { DisplayObject } from '@antv/g';\nimport { Axis as AxisComponent } from '@antv/component';\nimport { Linear as LinearScale } from '@antv/scale';\nimport { deepMix, omit, upperFirst } from '@antv/util';\nimport { extent } from '@antv/vendor/d3-array';\nimport { format } from '@antv/vendor/d3-format';\nimport {\n  BBox,\n  G2Theme,\n  GuideComponentComponent as GCC,\n  GuideComponentOrientation as GCO,\n  GuideComponentPosition as GCP,\n  GuideComponentPlane,\n  Scale,\n  Vector3,\n} from '../runtime';\nimport {\n  angleOf,\n  isFisheye,\n  isParallel,\n  isPolar,\n  isRadial,\n  isTheta,\n  isTranspose,\n  radiusOf,\n} from '../utils/coordinate';\nimport { prettyNumber } from '../utils/number';\nimport { capitalizeFirst } from '../utils/helper';\nimport { adaptor, isVertical, titleContent } from './utils';\nimport { G2_CLASS_PREFIX } from './constant';\n\nexport type AxisOptions = {\n  position?: GCP;\n  plane?: GuideComponentPlane;\n  zIndex?: number;\n  title?: string | string[];\n  direction?: 'left' | 'center' | 'right';\n  labelFormatter?: (datum: any, index: number, array: any[]) => string;\n  labelFilter?: (datum: any, index: number, array: any[]) => boolean;\n  labelRender?: (\n    datum: any,\n    index: number,\n    array: any[],\n  ) => string | DisplayObject;\n  tickFormatter?: (\n    datum: any,\n    index: number,\n    array: any[],\n    vector: [number, number],\n  ) => DisplayObject;\n  tickFilter?: (datum: any, index: number, array: any[]) => boolean;\n  tickMethod?: (\n    start: number | Date,\n    end: number | Date,\n    tickCount: number,\n  ) => number[];\n  tickCount?: number;\n  tickLength?: number | ((datum: any, index: number, array: any[]) => number);\n  grid: any;\n  // options won't be overridden\n  important: Record<string, any>;\n  /**\n   * Rotation origin.\n   */\n  origin?: Vector3;\n  /**\n   * EulerAngles of rotation.\n   */\n  eulerAngles?: Vector3;\n  [key: string]: any;\n};\n\nexport function rotateAxis(axis: DisplayObject, options: AxisOptions) {\n  const { eulerAngles, origin } = options;\n  if (origin) {\n    axis.setOrigin(origin);\n  }\n  if (eulerAngles) {\n    axis.rotate(eulerAngles[0], eulerAngles[1], eulerAngles[2]);\n  }\n}\n\nfunction sizeOf(coordinate: Coordinate): [number, number, number] {\n  // @ts-ignore\n  const { innerWidth, innerHeight, depth } = coordinate.getOptions();\n  return [innerWidth, innerHeight, depth];\n}\n\nfunction createFisheye(position, coordinate) {\n  const { width, height } = coordinate.getOptions();\n  return (tick) => {\n    if (!isFisheye(coordinate)) return tick;\n    const tickPoint = position === 'bottom' ? [tick, 1] : [0, tick];\n    const vector = coordinate.map(tickPoint);\n    if (position === 'bottom') {\n      const v = vector[0];\n      const x = new LinearScale({\n        domain: [0, width],\n        range: [0, 1],\n      });\n      return x.map(v);\n    } else if (position === 'left') {\n      const v = vector[1];\n      const x = new LinearScale({\n        domain: [0, height],\n        range: [0, 1],\n      });\n      return x.map(v);\n    }\n    return tick;\n  };\n}\n\nfunction ticksOf(\n  scale: Scale,\n  domain: any[],\n  tickMethod: AxisOptions['tickMethod'],\n) {\n  if (scale.getTicks) return scale.getTicks();\n  if (!tickMethod) return domain;\n  const [min, max] = extent(domain, (d) => +d);\n  const { tickCount } = scale.getOptions();\n  return tickMethod(min, max, tickCount);\n}\n\n// Set inset for axis.\nfunction createInset(position, coordinate) {\n  if (isPolar(coordinate)) return (d) => d;\n  const options = coordinate.getOptions();\n  const {\n    innerWidth,\n    innerHeight,\n    insetTop,\n    insetBottom,\n    insetLeft,\n    insetRight,\n  } = options;\n  const [start, end, size] =\n    position === 'left' || position === 'right'\n      ? [insetTop, insetBottom, innerHeight]\n      : [insetLeft, insetRight, innerWidth];\n  const x = new LinearScale({\n    domain: [0, 1],\n    range: [start / size, 1 - end / size],\n  });\n  return (i) => x.map(i);\n}\n\n/**\n * Calc ticks based on scale and coordinate.\n */\nfunction getData(\n  scale: Scale,\n  domain: any[],\n  tickCount: number,\n  defaultTickFormatter: AxisOptions['labelFormatter'],\n  tickFilter: AxisOptions['tickFilter'],\n  tickMethod: AxisOptions['tickMethod'],\n  position: GCP,\n  coordinate: Coordinate,\n) {\n  if (tickCount !== undefined || tickMethod !== undefined) {\n    scale.update({\n      ...(tickCount && { tickCount }),\n      ...(tickMethod && { tickMethod }),\n    });\n  }\n\n  const ticks = ticksOf(scale, domain, tickMethod);\n  const filteredTicks = tickFilter ? ticks.filter(tickFilter) : ticks;\n  const toString = (d) =>\n    d instanceof Date\n      ? String(d)\n      : typeof d === 'object' && !!d\n      ? d\n      : String(d);\n  const labelFormatter =\n    defaultTickFormatter || scale.getFormatter?.() || toString;\n  const applyInset = createInset(position, coordinate);\n  const applyFisheye = createFisheye(position, coordinate);\n  const isHorizontal = (position) =>\n    ['top', 'bottom', 'center', 'outer'].includes(position);\n  const isVertical = (position) => ['left', 'right'].includes(position);\n\n  // @todo GUI should consider the overlap problem for the first\n  // and label of arc axis.\n  if (isPolar(coordinate) || isTranspose(coordinate)) {\n    return filteredTicks.map((d, i, array) => {\n      const offset = scale.getBandWidth?.(d) / 2 || 0;\n      const tick = applyInset(scale.map(d) + offset);\n      const shouldReverse =\n        (isRadial(coordinate) && position === 'center') ||\n        (isTranspose(coordinate) &&\n          scale.getTicks?.() &&\n          isHorizontal(position)) ||\n        (isTranspose(coordinate) && isVertical(position));\n\n      return {\n        value: shouldReverse ? 1 - tick : tick,\n        label: toString(labelFormatter(prettyNumber(d), i, array)),\n        id: String(i),\n      };\n    });\n  }\n\n  return filteredTicks.map((d, i, array) => {\n    const offset = scale.getBandWidth?.(d) / 2 || 0;\n    const tick = applyFisheye(applyInset(scale.map(d) + offset));\n    const shouldReverse = isVertical(position);\n    return {\n      value: shouldReverse ? 1 - tick : tick,\n      label: toString(labelFormatter(prettyNumber(d), i, array)),\n      id: String(i),\n    };\n  });\n}\n\nfunction inferGridLength(\n  position: GCP,\n  coordinate: Coordinate,\n  plane: GuideComponentPlane = 'xy',\n) {\n  const [width, height, depth] = sizeOf(coordinate);\n\n  if (plane === 'xy') {\n    if (position.includes('bottom') || position.includes('top')) return height;\n    return width;\n  } else if (plane === 'xz') {\n    if (position.includes('bottom') || position.includes('top')) return depth;\n    return width;\n  } else {\n    if (position.includes('bottom') || position.includes('top')) return height;\n    return depth;\n  }\n}\n\nfunction inferLabelOverlap(transform = [], style: Record<string, any>) {\n  if (transform.length > 0) return transform;\n  const { labelAutoRotate, labelAutoHide, labelAutoEllipsis, labelAutoWrap } =\n    style;\n\n  const finalTransforms = [];\n\n  const addToTransforms = (overlap, state) => {\n    if (state) {\n      finalTransforms.push({ ...overlap, ...state });\n    }\n  };\n\n  addToTransforms(\n    {\n      type: 'rotate',\n      optionalAngles: [0, 15, 30, 45, 60, 90],\n    },\n    labelAutoRotate,\n  );\n  addToTransforms({ type: 'ellipsis', minLength: 20 }, labelAutoEllipsis);\n  addToTransforms({ type: 'hide' }, labelAutoHide);\n  addToTransforms(\n    { type: 'wrap', wordWrapWidth: 100, maxLines: 3, recoveryWhenFail: true },\n    labelAutoWrap,\n  );\n  return finalTransforms;\n}\n\nfunction inferArcStyle(\n  position: GCP,\n  bbox: BBox,\n  innerRadius: number,\n  outerRadius: number,\n  coordinate: Coordinate,\n) {\n  const { x, y, width, height } = bbox;\n  const center: [number, number] = [x + width / 2, y + height / 2];\n  const radius = Math.min(width, height) / 2;\n  const [startAngle, endAngle] = angleOf(coordinate);\n\n  const [w, h] = sizeOf(coordinate);\n  const r = Math.min(w, h) / 2;\n\n  const common = {\n    center,\n    radius,\n    startAngle,\n    endAngle,\n    gridLength: (outerRadius - innerRadius) * r,\n  };\n\n  if (position === 'inner') {\n    // @ts-ignore\n    const { insetLeft, insetTop } = coordinate.getOptions();\n    return {\n      ...common,\n      center: [center[0] - insetLeft, center[1] - insetTop],\n      labelAlign: 'perpendicular',\n      labelDirection: 'positive',\n      tickDirection: 'positive',\n      gridDirection: 'negative',\n    };\n  }\n\n  // arc outer\n  return {\n    ...common,\n    labelAlign: 'parallel',\n    labelDirection: 'negative',\n    tickDirection: 'negative',\n    gridDirection: 'positive',\n  };\n}\n\nfunction inferGrid(value: boolean, coordinate: Coordinate, scale: Scale) {\n  if (isTheta(coordinate) || isParallel(coordinate)) return false;\n  // Display axis grid for non-discrete values.\n  return value === undefined ? !!scale.getTicks : value;\n}\n\nfunction infer3DAxisLinearOverrideStyle(coordinate: Coordinate) {\n  // @ts-ignore\n  const { depth } = coordinate.getOptions();\n  return depth\n    ? {\n        tickIsBillboard: true,\n        lineIsBillboard: true,\n        labelIsBillboard: true,\n        titleIsBillboard: true,\n        gridIsBillboard: true,\n      }\n    : {};\n}\n\nfunction inferAxisLinearOverrideStyle(\n  position: GCP,\n  orientation: GCO,\n  bbox: BBox,\n  coordinate: Coordinate,\n  xScale: Scale,\n): {\n  startPos?: [number, number];\n  endPos?: [number, number];\n  [k: string]: any;\n} {\n  const { x, y, width, height } = bbox;\n\n  if (position === 'bottom') {\n    return { startPos: [x, y], endPos: [x + width, y] };\n  }\n  if (position === 'left') {\n    return { startPos: [x + width, y + height], endPos: [x + width, y] };\n  }\n  if (position === 'right') {\n    return { startPos: [x, y + height], endPos: [x, y] };\n  }\n  if (position === 'top') {\n    return { startPos: [x, y + height], endPos: [x + width, y + height] };\n  }\n  // linear axis, maybe in parallel, polar, radial or radar systems.\n  if (position === 'center') {\n    // axisY\n    if (orientation === 'vertical') {\n      return {\n        startPos: [x, y],\n        endPos: [x, y + height],\n      };\n    }\n    // axisX\n    else if (orientation === 'horizontal') {\n      return {\n        startPos: [x, y],\n        endPos: [x + width, y],\n      };\n    }\n    // axis with rotate\n    else if (typeof orientation === 'number') {\n      const [cx, cy] = coordinate.getCenter();\n      const [innerRadius, outerRadius] = radiusOf(coordinate);\n      const [startAngle, endAngle] = angleOf(coordinate);\n      const r = Math.min(width, height) / 2;\n      // @ts-ignore\n      const { insetLeft, insetTop } = coordinate.getOptions();\n\n      const innerR = innerRadius * r;\n      const outerR = outerRadius * r;\n\n      const [actualCx, actualCy] = [cx + x - insetLeft, cy + y - insetTop];\n      const [cos, sin] = [Math.cos(orientation), Math.sin(orientation)];\n\n      const startPos: [number, number] = [\n        actualCx + outerR * cos,\n        actualCy + outerR * sin,\n      ];\n      const endPos: [number, number] = [\n        actualCx + innerR * cos,\n        actualCy + innerR * sin,\n      ];\n\n      const getAxisXDomainLength = () => {\n        const { domain } = xScale.getOptions();\n        return domain.length;\n      };\n      const controllAngleCount =\n        isPolar(coordinate) && xScale ? getAxisXDomainLength() : 3;\n\n      return {\n        startPos,\n        endPos,\n        gridClosed: Math.abs(endAngle - startAngle - 360) < 1e-6,\n        gridCenter: [actualCx, actualCy],\n        gridControlAngles: new Array(controllAngleCount)\n          .fill(0)\n          .map(\n            (d, i, arr) => ((endAngle - startAngle) / controllAngleCount) * i,\n          ),\n      };\n    }\n  }\n\n  // position is inner or outer for arc axis won't be here\n\n  return {};\n}\n\nconst ArcAxisComponent: GCC<AxisOptions> = (options) => {\n  const {\n    order,\n    size,\n    position,\n    orientation,\n    labelFormatter,\n    tickFilter,\n    tickCount,\n    tickMethod,\n    tickLength,\n    important = {},\n    style = {},\n    indexBBox,\n    title,\n    grid = false,\n    ...rest\n  } = options;\n\n  return ({ scales: [scale], value, coordinate, theme }) => {\n    const { bbox } = value;\n    const { domain } = scale.getOptions();\n    const data = getData(\n      scale,\n      domain,\n      tickCount,\n      labelFormatter,\n      tickFilter,\n      tickMethod,\n      position,\n      coordinate,\n    );\n\n    // Bind computed bbox if exists.\n    const labels = indexBBox\n      ? data.map((d, i) => {\n          const bbox = indexBBox.get(i);\n          if (!bbox) return d;\n          // bbox: [label, bbox]\n          // Make than indexBBox can match current label.\n          if (bbox[0] !== d.label) return d;\n          return { ...d, bbox: bbox[1] };\n        })\n      : data;\n\n    const [innerRadius, outerRadius] = radiusOf(coordinate);\n\n    const defaultStyle = inferArcStyle(\n      position,\n      bbox,\n      innerRadius,\n      outerRadius,\n      coordinate,\n    );\n\n    const { axis: axisTheme, axisArc = {} } = theme;\n    const finalStyle = adaptor(\n      deepMix({}, axisTheme, axisArc, defaultStyle, {\n        type: 'arc',\n        data: labels,\n        titleText: titleContent(title),\n        grid,\n        classNamePrefix: G2_CLASS_PREFIX,\n        ...(tickLength !== undefined ? { tickLength } : null),\n        ...rest,\n        ...important,\n      }),\n    );\n\n    return new AxisComponent({\n      // @fixme transform is not valid for arcAxis.\n      // @ts-ignore\n      style: omit(finalStyle, ['transform']),\n    }) as unknown as DisplayObject;\n  };\n};\n\nfunction inferThemeStyle(\n  scale: Scale,\n  coordinate: Coordinate,\n  theme: G2Theme,\n  direction,\n  position: GCP,\n  orientation: GCO,\n) {\n  const baseStyle = theme.axis;\n  const positionStyle = ['top', 'right', 'bottom', 'left'].includes(position)\n    ? theme[`axis${capitalizeFirst(position)}`]\n    : theme.axisLinear;\n  const channel = scale.getOptions().name;\n  const channelStyle = theme[`axis${upperFirst(channel)}`] || {};\n  return Object.assign({}, baseStyle, positionStyle, channelStyle);\n}\n\nfunction inferDefaultStyle(\n  scale: Scale,\n  coordinate: Coordinate,\n  theme: G2Theme,\n  direction,\n  position: GCP,\n  orientation: GCO,\n) {\n  const themeStyle = inferThemeStyle(\n    scale,\n    coordinate,\n    theme,\n    direction,\n    position,\n    orientation,\n  );\n\n  if (position === 'center') {\n    return {\n      ...themeStyle,\n      labelDirection: direction === 'right' ? 'negative' : 'positive',\n      ...(direction === 'center'\n        ? { labelTransform: 'translate(50%,0)' }\n        : null),\n      tickDirection: direction === 'right' ? 'negative' : 'positive',\n      labelSpacing: direction === 'center' ? 0 : 4,\n      titleSpacing: isVertical(orientation) ? 10 : 0,\n      tick: direction === 'center' ? false : undefined,\n    };\n  }\n  return themeStyle;\n}\n\nconst LinearAxisComponent: GCC<AxisOptions> = (options) => {\n  const {\n    direction = 'left',\n    important = {},\n    labelFormatter,\n    order,\n    orientation,\n    actualPosition,\n    position,\n    size,\n    style = {},\n    title,\n    tickCount,\n    tickFilter,\n    tickMethod,\n    tickLength,\n    transform,\n    indexBBox,\n    ...userDefinitions\n  } = options;\n  return ({ scales, value, coordinate, theme }) => {\n    const { bbox } = value;\n    const [scale] = scales;\n    const { domain, xScale } = scale.getOptions();\n    const defaultStyle = inferDefaultStyle(\n      scale,\n      coordinate,\n      theme,\n      direction,\n      position,\n      orientation,\n    );\n    const internalAxisStyle = {\n      ...defaultStyle,\n      ...style,\n      ...userDefinitions,\n    };\n\n    const gridLength = inferGridLength(\n      actualPosition || position,\n      coordinate,\n      options.plane,\n    );\n\n    const overrideStyle = inferAxisLinearOverrideStyle(\n      position,\n      orientation,\n      bbox,\n      coordinate,\n      xScale,\n    );\n\n    const threeDOverrideStyle = infer3DAxisLinearOverrideStyle(coordinate);\n\n    const data = getData(\n      scale,\n      domain,\n      tickCount,\n      labelFormatter,\n      tickFilter,\n      tickMethod,\n      position,\n      coordinate,\n    );\n\n    // Bind computed bbox if exists.\n    const labels = indexBBox\n      ? data.map((d, i) => {\n          const bbox = indexBBox.get(i);\n          if (!bbox) return d;\n          // bbox: [label, bbox]\n          // Make than indexBBox can match current label.\n          if (bbox[0] !== d.label) return d;\n          return { ...d, bbox: bbox[1] };\n        })\n      : data;\n    const finalAxisStyle = {\n      ...internalAxisStyle,\n      type: 'linear' as const,\n      data: labels,\n      crossSize: size,\n      titleText: titleContent(title),\n      labelOverlap: inferLabelOverlap(transform, internalAxisStyle),\n      grid: inferGrid(internalAxisStyle.grid, coordinate, scale),\n      gridLength,\n      // Always showLine, make title could align the end of axis.\n      line: true,\n      indexBBox,\n      classNamePrefix: G2_CLASS_PREFIX,\n      ...(tickLength !== undefined ? { tickLength } : null),\n      ...(!internalAxisStyle.line ? { lineOpacity: 0 } : null),\n      ...overrideStyle,\n      ...threeDOverrideStyle,\n      ...important,\n    };\n\n    // For hide overlap, do not set crossSize.\n    const hasHide = finalAxisStyle.labelOverlap.find((d) => d.type === 'hide');\n    if (hasHide) finalAxisStyle.crossSize = false;\n\n    return new AxisComponent({\n      className: 'axis',\n      style: adaptor(finalAxisStyle),\n    }) as unknown as DisplayObject;\n  };\n};\n\nconst axisFactor: (\n  axis: typeof ArcAxisComponent | typeof LinearAxisComponent,\n) => GCC<AxisOptions> = (axis) => {\n  return (options) => {\n    const {\n      labelFormatter: useDefinedLabelFormatter,\n      labelFilter: userDefinedLabelFilter = () => true,\n    } = options;\n\n    return (context) => {\n      const {\n        scales: [scale],\n      } = context;\n      const ticks = scale.getTicks?.() || scale.getOptions().domain;\n      const labelFormatter =\n        typeof useDefinedLabelFormatter === 'string'\n          ? format(useDefinedLabelFormatter)\n          : useDefinedLabelFormatter;\n      const labelFilter = (datum: any, index: number, array: any[]) =>\n        userDefinedLabelFilter(ticks[index], index, ticks);\n      const normalizedOptions = {\n        ...options,\n        labelFormatter,\n        labelFilter,\n        scale,\n      };\n      return axis(normalizedOptions)(context);\n    };\n  };\n};\n\nexport const LinearAxis = axisFactor(LinearAxisComponent);\n\nexport const ArcAxis = axisFactor(ArcAxisComponent);\n\nLinearAxis.props = {\n  defaultPosition: 'center',\n  defaultSize: 45,\n  defaultOrder: 0,\n  defaultCrossPadding: [12, 12],\n  defaultPadding: [12, 12],\n};\n\nArcAxis.props = {\n  defaultPosition: 'outer',\n  defaultOrientation: 'vertical',\n  defaultSize: 45,\n  defaultOrder: 0,\n  defaultCrossPadding: [12, 12],\n  defaultPadding: [12, 12],\n};\n", "import { GuideComponentComponent as GCC } from '../runtime';\nimport { AxisOptions, LinearAxis, rotateAxis } from './axis';\n\nexport type AxisXOptions = AxisOptions;\n\n/**\n * LinearAxis component bind to x scale.\n */\nexport const AxisX: GCC<AxisXOptions> = (options) => {\n  return (...args) => {\n    // empirical value for crossPadding\n    const axisX = LinearAxis(Object.assign({}, { crossPadding: 50 }, options))(\n      ...args,\n    );\n    rotateAxis(axisX, options);\n    return axisX;\n  };\n};\n\nAxisX.props = {\n  ...LinearAxis.props,\n  defaultPosition: 'bottom',\n};\n\nexport function axisXConfig() {}\n", "import { GuideComponentComponent as GCC } from '../runtime';\nimport { AxisOptions, LinearAxis, rotateAxis } from './axis';\n\nexport type AxisYOptions = AxisOptions;\n\n/**\n * LinearAxis component bind to y scale.\n */\nexport const AxisY: GCC<AxisYOptions> = (options) => {\n  return (...args) => {\n    const axisY = LinearAxis(Object.assign({}, { crossPadding: 10 }, options))(\n      ...args,\n    );\n    rotateAxis(axisY, options);\n    return axisY;\n  };\n};\n\nAxisY.props = {\n  ...LinearAxis.props,\n  defaultPosition: 'left',\n};\n", "import { Coordinate } from '@antv/coord';\nimport { G2Theme, GuideComponentComponent as GCC, Scale } from '../runtime';\nimport { angleOf } from '../utils/coordinate';\nimport { AxisOptions, LinearAxis } from './axis';\n\nexport type AxisRadarOptions = AxisOptions & {\n  radar: {\n    count: number;\n    index: number;\n  };\n};\n\nfunction inferTitleTransform(orientation: number) {\n  const internalOrientation = orientation % (Math.PI * 2);\n\n  if (internalOrientation === Math.PI / 2) {\n    return { titleTransform: 'translate(0, 50%)' };\n  }\n  if (internalOrientation > -Math.PI / 2 && internalOrientation < Math.PI / 2) {\n    return { titleTransform: 'translate(50%, 0)' };\n  }\n  if (\n    internalOrientation > Math.PI / 2 &&\n    internalOrientation < (Math.PI * 3) / 2\n  ) {\n    return { titleTransform: 'translate(-50%, 0)' };\n  }\n  return {};\n}\n\nfunction inferAxisStyle(\n  options: AxisRadarOptions,\n  theme: G2Theme,\n  coordinate: Coordinate,\n  scales: Scale[],\n) {\n  const { radar } = options;\n  const [scale] = scales;\n  const name = scale.getOptions().name;\n  const [startAngle, endAngle] = angleOf(coordinate);\n  const { axisRadar: radarTheme = {} } = theme;\n\n  return {\n    ...radarTheme,\n    grid: name === 'position',\n    gridConnect: 'line',\n    gridControlAngles: new Array(radar.count).fill(0).map((_, i) => {\n      const angle = (endAngle - startAngle) / radar.count;\n      return angle * i;\n    }),\n  };\n}\n\nexport const AxisRadar: GCC<AxisRadarOptions> = (options) => {\n  const { important = {}, ...restOptions } = options;\n  return (context) => {\n    const { theme, coordinate, scales } = context;\n    return LinearAxis({\n      ...restOptions,\n      ...inferTitleTransform(options.orientation),\n      important: {\n        ...inferAxisStyle(options, theme, coordinate, scales),\n        ...important,\n      },\n    })(context);\n  };\n};\n\nAxisRadar.props = {\n  ...LinearAxis.props,\n  defaultPosition: 'center',\n};\n", "// to prevent users from tampering with internal values.\nexport const ChartEvent = {\n  BEFORE_RENDER: 'beforerender',\n  AFTER_RENDER: 'afterrender',\n\n  BEFORE_PAINT: 'beforepaint',\n  AFTER_PAINT: 'afterpaint',\n\n  BEFORE_CHANGE_DATA: 'beforechangedata',\n  AFTER_CHANGE_DATA: 'afterchangedata',\n\n  BEFORE_CLEAR: 'beforeclear',\n  AFTER_CLEAR: 'afterclear',\n\n  BEFORE_DESTROY: 'beforedestroy',\n  AFTER_DESTROY: 'afterdestroy',\n\n  BEFORE_CHANGE_SIZE: 'beforechangesize',\n  AFTER_CHANGE_SIZE: 'afterchangesize',\n\n  POINTER_TAP: 'pointertap',\n  POINTER_DOWN: 'pointerdown',\n  POINTER_UP: 'pointerup',\n  POINTER_OVER: 'pointerover',\n  POINTER_OUT: 'pointerout',\n  POINTER_MOVE: 'pointermove',\n  POINTER_ENTER: 'pointerenter',\n  POINTER_LEAVE: 'pointerleave',\n  POINTER_UPOUTSIDE: 'pointerupoutside',\n  DRAG_START: 'dragstart',\n  DRAG: 'drag',\n  DRAG_END: 'dragend',\n  DRAG_ENTER: 'dragenter',\n  DRAG_LEAVE: 'dragleave',\n  DRAG_OVER: 'dragover',\n  DROP: 'DROP',\n  CLICK: 'click',\n  DBLCLICK: 'dblclick',\n};\n", "const e={abs:Math.abs,ceil:Math.ceil,floor:Math.floor,max:Math.max,min:Math.min,round:Math.round,sqrt:Math.sqrt,pow:Math.pow};function t(t,n){e[t]=n}class n extends Error{constructor(e,t,n){super(e),this.position=t,this.token=n,this.name=\"ExpressionError\"}}var r;!function(e){e[e.STRING=0]=\"STRING\",e[e.NUMBER=1]=\"NUMBER\",e[e.BOOLEAN=2]=\"BOOLEAN\",e[e.NULL=3]=\"NULL\",e[e.IDENTIFIER=4]=\"IDENTIFIER\",e[e.OPERATOR=5]=\"OPERATOR\",e[e.FUNCTION=6]=\"FUNCTION\",e[e.DOT=7]=\"DOT\",e[e.BRACKET_LEFT=8]=\"BRACKET_LEFT\",e[e.BRACKET_RIGHT=9]=\"BRACKET_RIGHT\",e[e.PAREN_LEFT=10]=\"PAREN_LEFT\",e[e.PAREN_RIGHT=11]=\"PAREN_RIGHT\",e[e.COMMA=12]=\"COMMA\",e[e.QUESTION=13]=\"QUESTION\",e[e.COLON=14]=\"COLON\",e[e.DOLLAR=15]=\"DOLLAR\"}(r||(r={}));const o=new Set([32,9,10,13]),a=new Set([43,45,42,47,37,33,38,124,61,60,62]),s=new Map([[\"true\",r.BOOLEAN],[\"false\",r.BOOLEAN],[\"null\",r.NULL]]),i=new Map([[\"===\",!0],[\"!==\",!0],[\"<=\",!0],[\">=\",!0],[\"&&\",!0],[\"||\",!0],[\"+\",!0],[\"-\",!0],[\"*\",!0],[\"/\",!0],[\"%\",!0],[\"!\",!0],[\"<\",!0],[\">\",!0]]),u=new Map([[46,r.DOT],[91,r.BRACKET_LEFT],[93,r.BRACKET_RIGHT],[40,r.PAREN_LEFT],[41,r.PAREN_RIGHT],[44,r.COMMA],[63,r.QUESTION],[58,r.COLON],[36,r.DOLLAR]]),c=new Map;for(const[e,t]of u.entries())c.set(e,{type:t,value:String.fromCharCode(e)});function p(e){return e>=48&&e<=57}function l(e){return e>=97&&e<=122||e>=65&&e<=90||95===e}function f(e){return l(e)||p(e)}function E(e){return a.has(e)}var h;!function(e){e[e.Program=0]=\"Program\",e[e.Literal=1]=\"Literal\",e[e.Identifier=2]=\"Identifier\",e[e.MemberExpression=3]=\"MemberExpression\",e[e.CallExpression=4]=\"CallExpression\",e[e.BinaryExpression=5]=\"BinaryExpression\",e[e.UnaryExpression=6]=\"UnaryExpression\",e[e.ConditionalExpression=7]=\"ConditionalExpression\"}(h||(h={}));const d=new Map([[\"||\",2],[\"&&\",3],[\"===\",4],[\"!==\",4],[\">\",5],[\">=\",5],[\"<\",5],[\"<=\",5],[\"+\",6],[\"-\",6],[\"*\",7],[\"/\",7],[\"%\",7],[\"!\",8]]),R={type:h.Literal,value:null},T={type:h.Literal,value:!0},w={type:h.Literal,value:!1},y=e=>{let t=0;const o=e.length,a=()=>t>=o?null:e[t],s=()=>e[t++],i=e=>{const t=a();return null!==t&&t.type===e},u=e=>e.type===r.OPERATOR?d.get(e.value)||-1:e.type===r.DOT||e.type===r.BRACKET_LEFT?9:e.type===r.QUESTION?1:-1,c=e=>{let o,u;if(s().type===r.DOT){if(!i(r.IDENTIFIER)){const e=a();throw new n(\"Expected property name\",t,e?e.value:\"<end of input>\")}const e=s();o={type:h.Identifier,name:e.value},u=!1}else{if(o=l(0),!i(r.BRACKET_RIGHT)){const e=a();throw new n(\"Expected closing bracket\",t,e?e.value:\"<end of input>\")}s(),u=!0}return{type:h.MemberExpression,object:e,property:o,computed:u}},p=()=>{const e=a();if(!e)throw new n(\"Unexpected end of input\",t,\"<end of input>\");if(e.type===r.OPERATOR&&(\"!\"===e.value||\"-\"===e.value)){s();const t=p();return{type:h.UnaryExpression,operator:e.value,argument:t,prefix:!0}}switch(e.type){case r.NUMBER:return s(),{type:h.Literal,value:Number(e.value)};case r.STRING:return s(),{type:h.Literal,value:e.value};case r.BOOLEAN:return s(),\"true\"===e.value?T:w;case r.NULL:return s(),R;case r.IDENTIFIER:return s(),{type:h.Identifier,name:e.value};case r.FUNCTION:return(()=>{const e=s(),o=[];if(!i(r.PAREN_LEFT)){const e=a();throw new n(\"Expected opening parenthesis after function name\",t,e?e.value:\"<end of input>\")}for(s();;){if(i(r.PAREN_RIGHT)){s();break}if(!a()){const e=a();throw new n(\"Expected closing parenthesis\",t,e?e.value:\"<end of input>\")}if(o.length>0){if(!i(r.COMMA)){const e=a();throw new n(\"Expected comma between function arguments\",t,e?e.value:\"<end of input>\")}s()}const e=l(0);o.push(e)}return{type:h.CallExpression,callee:{type:h.Identifier,name:e.value},arguments:o}})();case r.PAREN_LEFT:{s();const e=l(0);if(!i(r.PAREN_RIGHT)){const e=a();throw new n(\"Expected closing parenthesis\",t,e?e.value:\"<end of input>\")}return s(),e}default:throw new n(`Unexpected token: ${e.type}`,t,e.value)}},l=(f=0)=>{let E=p();for(;t<o;){const o=e[t],p=u(o);if(p<=f)break;if(o.type!==r.QUESTION)if(o.type!==r.OPERATOR){if(o.type!==r.DOT&&o.type!==r.BRACKET_LEFT)break;E=c(E)}else{s();const e=l(p);E={type:h.BinaryExpression,operator:o.value,left:E,right:e}}else{s();const e=l(0);if(!i(r.COLON)){const e=a();throw new n(\"Expected : in conditional expression\",t,e?e.value:\"<end of input>\")}s();const o=l(0);E={type:h.ConditionalExpression,test:E,consequent:e,alternate:o}}}return E},f=l();return{type:h.Program,body:f}},O=(e,t,r)=>{let o=t;r&&(o={...t,context:{...t.context,...r}});const a=e=>{switch(e.type){case h.Literal:return(e=>e.value)(e);case h.Identifier:return(e=>{if(!(e.name in o.context))throw new n(`Undefined variable: ${e.name}`);return o.context[e.name]})(e);case h.MemberExpression:return(e=>{const t=a(e.object);if(null==t)throw new n(\"Cannot access property of null or undefined\");return t[e.computed?a(e.property):e.property.name]})(e);case h.CallExpression:return(e=>{const t=o.functions[e.callee.name];if(!t)throw new n(`Undefined function: ${e.callee.name}`);return t(...e.arguments.map((e=>a(e))))})(e);case h.BinaryExpression:return(e=>{if(\"&&\"===e.operator){const t=a(e.left);return t?a(e.right):t}if(\"||\"===e.operator){return a(e.left)||a(e.right)}const t=a(e.left),r=a(e.right);switch(e.operator){case\"+\":return t+r;case\"-\":return t-r;case\"*\":return t*r;case\"/\":return t/r;case\"%\":return t%r;case\"===\":return t===r;case\"!==\":return t!==r;case\">\":return t>r;case\">=\":return t>=r;case\"<\":return t<r;case\"<=\":return t<=r;default:throw new n(`Unknown operator: ${e.operator}`)}})(e);case h.UnaryExpression:return(e=>{const t=a(e.argument);if(e.prefix)switch(e.operator){case\"!\":return!t;case\"-\":if(\"number\"!=typeof t)throw new n(`Cannot apply unary - to non-number: ${t}`);return-t;default:throw new n(`Unknown operator: ${e.operator}`)}throw new n(`Postfix operators are not supported: ${e.operator}`)})(e);case h.ConditionalExpression:return(e=>{const t=a(e.test);return a(t?e.consequent:e.alternate)})(e);default:throw new n(`Evaluation error: Unsupported node type: ${e.type}`)}};return a(e.body)};function A(t){const a=(e=>{const t=e,a=t.length,u=new Array(Math.ceil(a/3));let h=0,d=0;function R(e){const o=d+1;d++;let s=\"\",i=!1;for(;d<a;){const n=t.charCodeAt(d);if(n===e)return i||(s=t.substring(o,d)),d++,{type:r.STRING,value:s};92===n?(i||(s=t.substring(o,d),i=!0),d++,s+=t[d]):i&&(s+=t[d]),d++}throw new n(`Unterminated string starting with ${String.fromCharCode(e)}`,d,t.substring(Math.max(0,d-10),d))}function T(){const e=d;for(45===t.charCodeAt(d)&&d++;d<a&&p(t.charCodeAt(d));)d++;if(d<a&&46===t.charCodeAt(d))for(d++;d<a&&p(t.charCodeAt(d));)d++;const n=t.slice(e,d);return{type:r.NUMBER,value:n}}function w(){d++;const e=d;if(d<a&&l(t.charCodeAt(d)))for(d++;d<a&&f(t.charCodeAt(d));)d++;const n=t.slice(e,d);return{type:r.FUNCTION,value:n}}function y(){const e=d++;for(;d<a&&f(t.charCodeAt(d));)d++;const n=t.slice(e,d),o=s.get(n);return o?{type:o,value:n}:{type:r.IDENTIFIER,value:n}}function O(){if(d+2<a){const e=t.substring(d,d+3);if(i.has(e))return d+=3,{type:r.OPERATOR,value:e}}if(d+1<a){const e=t.substring(d,d+2);if(i.has(e))return d+=2,{type:r.OPERATOR,value:e}}const e=t[d];if(i.has(e))return d++,{type:r.OPERATOR,value:e};throw new n(`Unknown operator at position ${d}: ${t.substring(d,d+1)}`,d,t.substring(Math.max(0,d-10),d))}for(;d<a;){const e=t.charCodeAt(d);if(A=e,o.has(A)){d++;continue}const r=c.get(e);if(r)u[h++]=r,d++;else if(34!==e&&39!==e)if(p(e)||45===e&&d+1<a&&p(t.charCodeAt(d+1)))u[h++]=T();else if(64!==e)if(l(e))u[h++]=y();else{if(!E(e))throw new n(`Unexpected character: ${t[d]}`,d,t.substring(Math.max(0,d-10),d));u[h++]=O()}else u[h++]=w();else u[h++]=R(e)}var A;return h===u.length?u:u.slice(0,h)})(t),u=y(a),h=((e={},t={})=>({context:e,functions:t}))({},e);return(e={})=>O(u,h,e)}function N(e,t={}){return A(e)(t)}export{n as ExpressionError,A as compile,N as evaluate,t as register};\n", "import { compile } from '@antv/expr';\nimport { mapValues } from '@antv/util';\nimport { lru } from './lru';\n\n// Whitelist of properties that can contain expressions.\nexport const EXPR_WHITE_LIST = ['style', 'encode', 'labels', 'children'];\n\n/**\n * Compiles an expression string into a function.\n * @param expr Expression string to compile.\n * @returns Compiled function or original string if empty.\n */\nconst compileExpression = lru(\n  (expr: string): (() => any) | string => {\n    const evaluator = compile(expr);\n\n    return (...args) => {\n      const paramNames = Array.from({ length: args.length }, (_, i) =>\n        String.fromCharCode(97 + i),\n      );\n\n      const namedParams = Object.fromEntries(\n        args.map((value, index) => [paramNames[index], value]),\n      );\n\n      // global is used to overview what can i get in props.\n      return evaluator({\n        ...namedParams,\n        global: { ...namedParams },\n      });\n    };\n  },\n  (expr) => expr,\n  128,\n);\n\n/**\n * Processes options object to convert expressions to functions.\n * @param options Options object to process.\n * @param isSpecRoot Whether the options is the root of the spec.\n * @returns Processed options object with expressions converted to functions.\n */\nexport function parseOptionsExpr(options: any, isSpecRoot = true): any {\n  if (Array.isArray(options)) {\n    return options.map((_, i) => parseOptionsExpr(options[i], isSpecRoot));\n  }\n\n  if (typeof options === 'object' && options) {\n    return mapValues(options, (value, key) => {\n      // if options is root and the key is in the white list, parse the expression.\n      if (isSpecRoot && EXPR_WHITE_LIST.includes(key)) {\n        return parseOptionsExpr(value, key === 'children');\n      }\n      if (!isSpecRoot) {\n        return parseOptionsExpr(value, false);\n      }\n      return value;\n    });\n  }\n\n  // if options is a string and is a valid expression.\n  if (typeof options === 'string') {\n    const trimmed = options.trim();\n    if (trimmed.startsWith('{') && trimmed.endsWith('}')) {\n      return compileExpression(trimmed.slice(1, -1));\n    }\n  }\n\n  return options;\n}\n", "const toString = {}.toString;\n\nconst isType = (value: any, type: string): boolean => toString.call(value) === '[object ' + type + ']';\n\nexport default isType;\n", "/**\n * \n * @param  {*} fn \n * @return {Boolean}  \n */\nimport isType from './is-type';\n\nexport default (value: any): value is Function => {\n  return isType(value, 'Function');\n};\n", "import isType from './is-type';\n\nexport default (value: any): value is Array<any> => {\n  return Array.isArray ?\n    Array.isArray(value) :\n    isType(value, 'Array');\n}\n", "export default <T = object>(value: any): value is T => {\n    /**\n     * isObject({}) => true\n     * isObject([1, 2, 3]) => true\n     * isObject(Function) => true\n     * isObject(null) => false\n     */\n  const type = typeof value;\n  return value !== null && type === 'object' || type === 'function';\n};\n", "import isArray from './is-array';\nimport isObject from './is-object';\n\nfunction each (elements: any[] | object, func: (v: any, k: any) => any): void {\n  if (!elements) {\n    return;\n  }\n  let rst;\n  if (isArray(elements)) {\n    for (let i = 0, len = elements.length; i < len; i++) {\n      rst = func(elements[i], i);\n      if (rst === false) {\n        break;\n      }\n    }\n  } else if (isObject(elements)) {\n    for (const k in elements) {\n      if (elements.hasOwnProperty(k)) {\n        rst = func(elements[k], k);\n        if (rst === false) {\n          break;\n        }\n      }\n    }\n  }\n}\n\nexport default each;\n", "const isObjectLike = function(value: any): value is object {\n    /**\n     * isObjectLike({}) => true\n     * isObjectLike([1, 2, 3]) => true\n     * isObjectLike(Function) => false\n     * isObjectLike(null) => false\n     */\n  return typeof value === 'object' && value !== null;\n};\n\nexport default isObjectLike;\n", "import isObjectLike from './is-object-like';\nimport isType from './is-type';\n\nconst isPlainObject = function(value: any): value is object {\n    /**\n     * isObjectLike(new Foo) => false\n     * isObjectLike([1, 2, 3]) => false\n     * isObjectLike({ x: 0, y: 0 }) => true\n     * isObjectLike(Object.create(null)) => true\n     */\n  if (!isObjectLike(value) || !isType(value, 'Object')) {\n    return false;\n  }\n  if (Object.getPrototypeOf(value) === null) {\n    return true;\n  }\n  let proto = value;\n  while (Object.getPrototypeOf(proto) !== null) {\n    proto = Object.getPrototypeOf(proto);\n  }\n  return Object.getPrototypeOf(value) === proto;\n};\n\nexport default isPlainObject;\n", "const arrPrototype = Array.prototype;\nconst splice = arrPrototype.splice;\nconst indexOf = arrPrototype.indexOf;\n\nconst pull = function<T>(arr: T[], ...values: any[]): T[] {\n  for (let i = 0; i < values.length; i++) {\n    const value = values[i];\n    let fromIndex = -1;\n    while ((fromIndex = indexOf.call(arr, value)) > -1) {\n      splice.call(arr, fromIndex, 1);\n    }\n  }\n  return arr;\n};\n\nexport default pull;\n", "import isArrayLike from './is-array-like';\n\nconst splice = Array.prototype.splice;\n\nconst pullAt = function pullAt <T>(arr: T[], indexes: number[]): T[] {\n  if (!isArrayLike(arr)) {\n    return [];\n  }\n  let length = arr ? indexes.length : 0;\n  const last = length - 1;\n\n  while (length--) {\n    let previous;\n    const index = indexes[length];\n    if (length === last || index !== previous) {\n      previous = index;\n      splice.call(arr, index, 1);\n    }\n  }\n  return arr;\n};\n\nexport default pullAt;\n", "import isType from './is-type';\n\nexport default (str: any): str is string => {\n  return isType(str, 'String');\n}\n", "/**\n * \n * @return {Boolean} \n */\nimport isType from './is-type';\n\nconst isNumber = function(value: any): value is number {\n  return isType(value, 'Number');\n};\nexport default isNumber;\n", "import isNumber from './is-number';\n\nconst isInteger = Number.isInteger ? Number.isInteger : function(num: any): boolean {\n  return isNumber(num) && num % 1 === 0;\n};\n\nexport default isInteger;\n", "const DEGREE = 180 / Math.PI;\n\nconst toDegree = function(radian: number): number {\n  return DEGREE * radian;\n};\n\nexport default toDegree;\n", "const RADIAN = Math.PI / 180;\n\nconst toRadian = function(degree: number): number {\n  return RADIAN * degree;\n};\n\nexport default toRadian;\n", "import each from './each';\nimport isFunction from './is-function';\n\n// @ts-ignore\nconst values = Object.values ? obj => Object.values(obj) : obj => {\n  const result = [];\n  each(obj, (value, key) => {\n    if (!(isFunction(obj) && key === 'prototype')) {\n      result.push(value);\n    }\n  });\n  return result;\n};\n\nexport default values;\n", "const toString = {}.toString;\n\nconst getType = function(value: any): string {\n  return toString.call(value).replace(/^\\[object /, '').replace(/]$/, '');\n};\n\nexport default getType;\n", "const objectProto = Object.prototype;\n\nconst isPrototype = function(value: any): boolean {\n  const Ctor = value && value.constructor;\n  const proto = (typeof Ctor === 'function' && Ctor.prototype) || objectProto;\n  return value === proto;\n};\n\nexport default isPrototype;\n", "import isFunction from './is-function';\n\n/**\n * _.memoize(calColor);\n * _.memoize(calColor, (...args) => args[0]);\n * @param f\n * @param resolver\n */\nexport default (f: Function, resolver?: (...args: any[]) => string) => {\n  if (!isFunction(f)) {\n    throw new TypeError('Expected a function')\n  }\n\n  const memoized = function(...args) {\n    //  key resolver key\n    const key = resolver ? resolver.apply(this, args) : args[0];\n    const cache = memoized.cache;\n\n    if (cache.has(key)) {\n      return cache.get(key)\n    }\n    const result = f.apply(this, args);\n    // \n    cache.set(key, result);\n    return result\n  };\n\n  memoized.cache = new Map();\n\n  return memoized\n}\n", "import isArray from './is-array';\nimport isPlainObject from './is-plain-object';\n\nconst MAX_MIX_LEVEL = 5;\n\nfunction _deepMix(dist, src, level?, maxLevel?) {\n  level = level || 0;\n  maxLevel = maxLevel || MAX_MIX_LEVEL;\n  for (const key in src) {\n    if (src.hasOwnProperty(key)) {\n      const value = src[key];\n      if (value !== null && isPlainObject(value)) {\n        if (!isPlainObject(dist[key])) {\n          dist[key] = {};\n        }\n        if (level < maxLevel) {\n          _deepMix(dist[key], value, level + 1, maxLevel);\n        } else {\n          dist[key] = src[key];\n        }\n      } else if (isArray(value)) {\n        dist[key] = [];\n        dist[key] = dist[key].concat(value);\n      } else if (value !== undefined) {\n        dist[key] = value;\n      }\n    }\n  }\n}\n\n// todo \nconst deepMix = function(rst:any, ...args:any[]) {\n  for (let i = 0; i < args.length; i += 1) {\n    _deepMix(rst, args[i]);\n  }\n  return rst;\n};\n\nexport default deepMix;\n", "export default <T>(v: T): T => v;\n", "import values from './values';\nimport memoize from './memoize';\nimport isString from './is-string';\nimport type { Properties } from 'csstype';\n\nexport type Font = Pick<Properties, 'fontFamily' | 'fontWeight' | 'fontStyle' | 'fontVariant'> & {\n  fontSize?: number;\n};\n\nlet ctx: CanvasRenderingContext2D;\n\n/**\n * \n */\nexport default memoize(\n  (text: any, font: Font = {}): number => {\n    const { fontSize, fontFamily, fontWeight, fontStyle, fontVariant } = font;\n    if (!ctx) {\n      ctx = document.createElement('canvas').getContext('2d') as CanvasRenderingContext2D;\n    }\n    ctx!.font = [fontStyle, fontVariant, fontWeight, `${fontSize}px`, fontFamily].join(' ');\n    return ctx!.measureText(isString(text) ? text : '').width;\n  },\n  (text: any, font: Font = {}) => [text, ...values(font)].join('')\n);\n", "/**\n * k-v \n */\nexport default class <T> {\n  map: { [key: string]: T } = {};\n\n  has(key: string): boolean {\n    return this.map[key] !== undefined;\n  }\n\n  get(key: string, def?: T): T | undefined {\n    const v = this.map[key];\n    return v === undefined ? def : v;\n  }\n\n  set(key: string, value: T): void {\n    this.map[key] = value;\n  }\n\n  clear() {\n    this.map = {};\n  }\n\n  delete(key: string) {\n    delete this.map[key];\n  }\n\n  size(): number {\n    return Object.keys(this.map).length;\n  }\n}\n", null, null, null, null, null, null, null, null, null, null, null, null, null, "/**\n *  0-255  16 \n * @param value\n * @returns\n */\nexport function toHex(value: number): string {\n  const x16Value = Math.round(value).toString(16);\n\n  return x16Value.length === 1 ? `0${x16Value}` : x16Value;\n}\n\n/**\n * \n * @param arr\n * @returns\n */\nexport function arr2rgb(arr: number[]): string {\n  return `#${toHex(arr[0])}${toHex(arr[1])}${toHex(arr[2])}`;\n}\n", "/**\n * \n * @return \n */\nexport default function isArray(value: unknown): value is Array<any> {\n  return Array.isArray(value);\n}\n", "const isObjectLike = function (value: any): value is object {\n  /**\n   * isObjectLike({}) => true\n   * isObjectLike([1, 2, 3]) => true\n   * isObjectLike(Function) => false\n   * isObjectLike(null) => false\n   */\n  return typeof value === 'object' && value !== null;\n};\n\nexport default isObjectLike;\n", "const toString = {}.toString;\n\nconst isType = (value: any, type: string): boolean => toString.call(value) === '[object ' + type + ']';\n\nexport default isType;\n", "import isObjectLike from './is-object-like';\nimport isType from './is-type';\n\nconst isPlainObject = function (value: any): value is object {\n  /**\n   * isObjectLike(new Foo) => false\n   * isObjectLike([1, 2, 3]) => false\n   * isObjectLike({ x: 0, y: 0 }) => true\n   * isObjectLike(Object.create(null)) => true\n   */\n  if (!isObjectLike(value) || !isType(value, 'Object')) {\n    return false;\n  }\n  if (Object.getPrototypeOf(value) === null) {\n    return true;\n  }\n  let proto = value;\n  while (Object.getPrototypeOf(proto) !== null) {\n    proto = Object.getPrototypeOf(proto);\n  }\n  return Object.getPrototypeOf(value) === proto;\n};\n\nexport default isPlainObject;\n", "const arrPrototype = Array.prototype;\nconst splice = arrPrototype.splice;\nconst indexOf = arrPrototype.indexOf;\n\nconst pull = function <T>(arr: T[], ...values: any[]): T[] {\n  for (let i = 0; i < values.length; i++) {\n    const value = values[i];\n    let fromIndex = -1;\n    while ((fromIndex = indexOf.call(arr, value)) > -1) {\n      splice.call(arr, fromIndex, 1);\n    }\n  }\n  return arr;\n};\n\nexport default pull;\n", "import isArrayLike from './is-array-like';\n\nconst splice = Array.prototype.splice;\n\nconst pullAt = function pullAt<T>(arr: T[], indexes: number[]): T[] {\n  if (!isArrayLike(arr)) {\n    return [];\n  }\n  let length = arr ? indexes.length : 0;\n  const last = length - 1;\n\n  while (length--) {\n    let previous;\n    const index = indexes[length];\n    if (length === last || index !== previous) {\n      previous = index;\n      splice.call(arr, index, 1);\n    }\n  }\n  return arr;\n};\n\nexport default pullAt;\n", "/**\n * \n * @return \n */\nexport default function isNumber(value: unknown): value is number {\n  return typeof value === 'number';\n}\n", "const DEGREE = 180 / Math.PI;\n\nconst toDegree = function (radian: number): number {\n  return DEGREE * radian;\n};\n\nexport default toDegree;\n", "const RADIAN = Math.PI / 180;\n\nconst toRadian = function (degree: number): number {\n  return RADIAN * degree;\n};\n\nexport default toRadian;\n", "const toString = {}.toString;\n\nconst getType = function (value: any): string {\n  return toString\n    .call(value)\n    .replace(/^\\[object /, '')\n    .replace(/]$/, '');\n};\n\nexport default getType;\n", "/**\n *  null\n * @return  null\n */\nexport default function isNull(value: unknown): value is null {\n  return value === null;\n}\n", "const objectProto = Object.prototype;\n\nconst isPrototype = function (value: any): boolean {\n  const Ctor = value && value.constructor;\n  const proto = (typeof Ctor === 'function' && Ctor.prototype) || objectProto;\n  return value === proto;\n};\n\nexport default isPrototype;\n", "const isUndefined = function (value: any): value is undefined {\n  return value === undefined;\n};\n\nexport default isUndefined;\n", "function flru(max: number) {\n  let num, curr, prev;\n  const limit = max || 1;\n\n  function keep(key, value) {\n    if (++num > limit) {\n      prev = curr;\n      reset(1);\n      ++num;\n    }\n    curr[key] = value;\n  }\n\n  function reset(isPartial?: number) {\n    num = 0;\n    curr = Object.create(null);\n    isPartial || (prev = Object.create(null));\n  }\n\n  reset();\n\n  return {\n    clear: reset,\n    has: function (key) {\n      return curr[key] !== void 0 || prev[key] !== void 0;\n    },\n    get: function (key) {\n      var val = curr[key];\n      if (val !== void 0) return val;\n      if ((val = prev[key]) !== void 0) {\n        keep(key, val);\n        return val;\n      }\n    },\n    set: function (key, value) {\n      if (curr[key] !== void 0) {\n        curr[key] = value;\n      } else {\n        keep(key, value);\n      }\n    },\n  };\n}\n\nconst CacheMap = new Map<Function, ReturnType<typeof flru>>();\n\n/**\n * \n * @example\n * _.memoize(calColor);\n * _.memoize(calColor, (...args) => args[0]);\n * @param fn \n * @param resolver  key \n * @param maxSize lru \n */\nexport default function memoize<T extends Function>(fn: T, resolver?: (...args: any[]) => string, maxSize = 128) {\n  const memoized = function (...args) {\n    //  key resolver key\n    const key = resolver ? resolver.apply(this, args) : args[0];\n    if (!CacheMap.has(fn)) CacheMap.set(fn, flru(maxSize));\n    const cache = CacheMap.get(fn);\n\n    if (cache.has(key)) return cache.get(key);\n    const result = fn.apply(this, args);\n    cache.set(key, result);\n    return result;\n  };\n\n  return memoized as unknown as T;\n}\n", "import isArray from './is-array';\nimport isPlainObject from './is-plain-object';\n\nconst MAX_MIX_LEVEL = 5;\n\nfunction hasOwn(object, property) {\n  if ((Object as any).hasOwn) {\n    return (Object as any).hasOwn(object, property);\n  }\n  if (object == null) {\n    throw new TypeError('Cannot convert undefined or null to object');\n  }\n  return Object.prototype.hasOwnProperty.call(Object(object), property);\n}\n\nfunction _deepMix(dist, src, level?, maxLevel?) {\n  level = level || 0;\n  maxLevel = maxLevel || MAX_MIX_LEVEL;\n  for (const key in src) {\n    if (hasOwn(src, key)) {\n      const value = src[key];\n      if (value !== null && isPlainObject(value)) {\n        if (!isPlainObject(dist[key])) {\n          dist[key] = {};\n        }\n        if (level < maxLevel) {\n          _deepMix(dist[key], value, level + 1, maxLevel);\n        } else {\n          dist[key] = src[key];\n        }\n      } else if (isArray(value)) {\n        dist[key] = [];\n        dist[key] = dist[key].concat(value);\n      } else if (value !== undefined) {\n        dist[key] = value;\n      }\n    }\n  }\n}\n\n// todo \nconst deepMix = function (rst: any, ...args: any[]) {\n  for (let i = 0; i < args.length; i += 1) {\n    _deepMix(rst, args[i]);\n  }\n  return rst;\n};\n\nexport default deepMix;\n", "export default <T>(v: T): T => v;\n", "/**\n * k-v \n */\nexport default class<T> {\n  map: { [key: string]: T } = {};\n\n  has(key: string): boolean {\n    return this.map[key] !== undefined;\n  }\n\n  get(key: string, def?: T): T | undefined {\n    const v = this.map[key];\n    return v === undefined ? def : v;\n  }\n\n  set(key: string, value: T): void {\n    this.map[key] = value;\n  }\n\n  clear() {\n    this.map = {};\n  }\n\n  delete(key: string) {\n    delete this.map[key];\n  }\n\n  size(): number {\n    return Object.keys(this.map).length;\n  }\n}\n", "import { memoize } from '../lodash';\nimport { arr2rgb } from './arr2rgb';\n\nconst RGB_REG = /rgba?\\(([\\s.,0-9]+)\\)/;\n\n/**\n *  tag \n * @returns\n */\nfunction getTmp(): HTMLElement {\n  let i = document.getElementById('antv-web-colour-picker');\n  if (i) {\n    return i;\n  }\n  i = document.createElement('i');\n  i.id = 'antv-web-colour-picker';\n  i.title = 'Web Colour Picker';\n  i.style.display = 'none';\n  document.body.appendChild(i);\n  return i;\n}\n\n/**\n *  rgb \n * @param {color} color \n * @return  '#ffffff' \n */\nfunction toRGBString(color: string): string {\n  //  rgb\n  if (color[0] === '#' && color.length === 7) {\n    return color;\n  }\n\n  const iEl = getTmp();\n\n  iEl.style.color = color;\n\n  let rst = document.defaultView.getComputedStyle(iEl, '').getPropertyValue('color');\n  const matches = RGB_REG.exec(rst) as string[];\n  const cArray: number[] = matches[1].split(/\\s*,\\s*/).map((s) => Number(s));\n\n  rst = arr2rgb(cArray);\n\n  return rst;\n}\n\n/**\n * export with memoize.\n * @param color\n * @returns\n */\nexport const toRGB = memoize(toRGBString, (color) => color, 256);\n", null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, "import { deepMix } from '@antv/util';\n\ntype Adapter<T> = (options: T, ...rest: any[]) => T;\n\n/**\n * Adaptor return default options for raw options.\n */\nexport function useDefaultAdaptor<T>(adaptor: Adapter<T>): Adapter<T> {\n  return (options?, ...rest) => deepMix({}, adaptor(options, ...rest), options);\n}\n\n/**\n * Adaptor return options override raw options.\n */\nexport function useOverrideAdaptor<T>(adaptor: Adapter<T>): Adapter<T> {\n  return (options?, ...rest) => deepMix({}, options, adaptor(options, ...rest));\n}\n\nexport function isObject(d) {\n  if (d instanceof Date) return false;\n  return typeof d === 'object';\n}\n\nexport function mergeData(\n  dataDescriptor: any[] | { value: any; [key: string]: any },\n  dataValue: any[],\n) {\n  if (!dataDescriptor) return dataValue;\n  if (Array.isArray(dataDescriptor)) return dataDescriptor;\n  if (isObject(dataDescriptor)) {\n    const { value = dataValue, ...rest } = dataDescriptor;\n    return { ...rest, value };\n  }\n  return dataDescriptor;\n}\n", "import { CompositionComponent as CC } from '../runtime';\nimport { SpaceLayerComposition } from '../spec';\nimport { mergeData } from './utils';\n\nexport type SpaceLayerOptions = Omit<SpaceLayerComposition, 'type'>;\n\n/**\n * @todo Propagate more options to children.\n */\nexport const SpaceLayer: CC<SpaceLayerOptions> = () => {\n  return (options) => {\n    const { children } = options;\n    if (!Array.isArray(children)) return [];\n    const {\n      x: viewX = 0,\n      y: viewY = 0,\n      width: viewWidth,\n      height: viewHeight,\n      data: layerData,\n    } = options;\n    return children.map(({ data, x, y, width, height, ...rest }) => ({\n      ...rest,\n      data: mergeData(data, layerData),\n      x: x ?? viewX,\n      y: y ?? viewY,\n      width: width ?? viewWidth,\n      height: height ?? viewHeight,\n    }));\n  };\n};\n\nSpaceLayer.props = {};\n", "import { CompositionComponent as CC } from '../runtime';\nimport { SpaceFlexComposition } from '../spec';\nimport { mergeData } from './utils';\n\nexport type SpaceFlexOptions = Omit<SpaceFlexComposition, 'type'>;\n\n/**\n * @todo Propagate more options to children.\n */\nexport const SpaceFlex: CC<SpaceFlexOptions> = () => {\n  return (options) => {\n    const { children } = options;\n    if (!Array.isArray(children)) return [];\n\n    const {\n      direction = 'row',\n      ratio = children.map(() => 1),\n      padding = 0,\n      data: flexData,\n    } = options;\n    const [mainStart, mainSize, crossSize, crossStart] =\n      direction === 'col'\n        ? ['y', 'height', 'width', 'x']\n        : ['x', 'width', 'height', 'y'];\n\n    const sum = ratio.reduce((total, value) => total + value);\n    const totalSize = options[mainSize] - padding * (children.length - 1);\n    const sizes = ratio.map((value) => totalSize * (value / sum));\n\n    const newChildren = [];\n    let next = options[mainStart] || 0;\n    for (let i = 0; i < sizes.length; i += 1) {\n      const { data, ...rest } = children[i];\n      const newData = mergeData(data, flexData);\n      newChildren.push({\n        [mainStart]: next,\n        [mainSize]: sizes[i],\n        [crossStart]: options[crossStart] || 0,\n        [crossSize]: options[crossSize],\n        data: newData,\n        ...rest,\n      });\n      next += sizes[i] + padding;\n    }\n    return newChildren;\n  };\n};\n\nSpaceFlex.props = {};\n", "import { deepMix } from '@antv/util';\nimport { CompositionComponent as CC } from '../runtime';\nimport { ViewComposition } from '../spec';\nimport { mergeData } from './utils';\n\nexport type ViewOptions = Omit<ViewComposition, 'type'>;\n\n/**\n * @todo Propagate more options to children.(e.g. filter)\n * @todo Propagate encode options to children. This is useful for Matrix composition.\n * @todo Move this to runtime, do not treat it as a composition to cause confusion.\n */\nexport const View: CC<ViewOptions> = () => {\n  return (options) => {\n    const { children, ...restOptions } = options;\n    if (!Array.isArray(children)) return [];\n    const {\n      data: viewData,\n      scale: viewScale = {},\n      axis: viewAxis = {},\n      legend: viewLegend = {},\n      encode: viewEncode = {},\n      transform: viewTransform = [],\n      slider: viewSlider = {},\n      ...rest\n    } = restOptions;\n    const marks = children.map(\n      ({\n        data,\n        scale = {},\n        axis = {},\n        legend = {},\n        encode = {},\n        transform = [],\n        slider = {},\n        ...rest\n      }) => ({\n        data: mergeData(data, viewData),\n        scale: deepMix({}, viewScale, scale),\n        encode: deepMix({}, viewEncode, encode),\n        transform: [...viewTransform, ...transform],\n        axis: axis && viewAxis ? deepMix({}, viewAxis, axis) : false,\n        legend: legend && viewLegend ? deepMix({}, viewLegend, legend) : false,\n        slider: deepMix({}, viewSlider, slider),\n        ...rest,\n      }),\n    );\n    return [{ ...rest, marks, type: 'standardView', slider: viewSlider }];\n  };\n};\n\nView.props = {};\n", "import { CompositionComponent as CC } from '../runtime';\nimport { Mark as MarkComposition } from '../spec';\n\nexport type MarkOptions = Omit<MarkComposition, 'type'>;\n\n// @todo Move this to runtime.\nexport const Mark: CC<MarkOptions> = ({\n  static: isStatic = false,\n}: any = {}) => {\n  return (options) => {\n    const {\n      width,\n      height,\n      depth,\n      paddingLeft,\n      paddingRight,\n      paddingTop,\n      paddingBottom,\n      padding,\n      inset,\n      insetLeft,\n      insetTop,\n      insetRight,\n      insetBottom,\n      margin,\n      marginLeft,\n      marginBottom,\n      marginTop,\n      marginRight,\n      data,\n      coordinate,\n      theme,\n      component,\n      interaction,\n      x,\n      y,\n      z,\n      key,\n      frame,\n      labelTransform,\n      parentKey,\n      clip,\n      viewStyle,\n      title,\n      ...mark\n    } = options;\n\n    return [\n      {\n        type: 'standardView',\n        x,\n        y,\n        z,\n        key,\n        width,\n        height,\n        depth,\n        padding,\n        paddingLeft,\n        paddingRight,\n        paddingTop,\n        inset,\n        insetLeft,\n        insetTop,\n        insetRight,\n        insetBottom,\n        paddingBottom,\n        theme,\n        coordinate,\n        component,\n        interaction,\n        frame,\n        labelTransform,\n        margin,\n        marginLeft,\n        marginBottom,\n        marginTop,\n        marginRight,\n        parentKey,\n        clip,\n        style: viewStyle,\n        // For axis component, title is the axis title.\n        ...(!isStatic && { title }),\n        marks: [{ ...mark, key: `${key}-0`, data, ...(isStatic && { title }) }],\n      },\n    ];\n  };\n};\n\nMark.props = {};\n", "class Container<O> {\n  private $value: any;\n\n  constructor(x: any) {\n    this.$value = x;\n  }\n\n  static of<O>(x: any) {\n    return new Container<O>(x);\n  }\n\n  call<T, U>(f: (x: T, ...rest: any[]) => U, ...rest: any[]) {\n    return (this.$value = f(this.$value, ...rest)), this;\n  }\n\n  value(): O {\n    return this.$value;\n  }\n}\n\nexport { Container };\n", "import { deepMix } from '@antv/util';\nimport { extent, group, max } from '@antv/vendor/d3-array';\nimport {\n  CompositionComponent as CC,\n  G2MarkChildrenCallback,\n  G2ViewTree,\n  Node,\n} from '../runtime';\nimport { FacetRectComposition } from '../spec';\nimport { calcBBox } from '../utils/vector';\nimport { Container } from '../utils/container';\nimport { indexOf } from '../utils/array';\nimport { useDefaultAdaptor, useOverrideAdaptor } from './utils';\n\nexport type SubLayout = (data?: any) => number[];\n\nconst setScale = useDefaultAdaptor<G2ViewTree>((options) => {\n  const { encode, data, scale, shareSize = false } = options;\n  const { x, y } = encode;\n  const flexDomain = (encode: string, channel: string) => {\n    if (encode === undefined || !shareSize) return {};\n    const groups = group(data, (d) => d[encode]);\n    const domain = scale?.[channel]?.domain || Array.from(groups.keys());\n    const flex = domain.map((key) => {\n      if (!groups.has(key)) return 1;\n      return groups.get(key).length;\n    });\n    return { domain, flex };\n  };\n  return {\n    scale: {\n      x: {\n        paddingOuter: 0,\n        paddingInner: 0.1,\n        guide: x === undefined ? null : { position: 'top' },\n        ...(x === undefined && { paddingInner: 0 }),\n        ...flexDomain(x, 'x'),\n      },\n      y: {\n        range: [0, 1],\n        paddingOuter: 0,\n        paddingInner: 0.1,\n        guide: y === undefined ? null : { position: 'right' },\n        ...(y === undefined && { paddingInner: 0 }),\n        ...flexDomain(y, 'y'),\n      },\n    },\n  };\n});\n\n/**\n * BFS view tree and using the last discovered color encode\n * as the top-level encode for this plot. This is useful when\n * color encode and color scale is specified in mark node.\n * It makes sense because the whole facet should shared the same\n * color encoding, but it also can be override with explicity\n * encode and scale specification.\n */\nexport const inferColor = useOverrideAdaptor<G2ViewTree>(\n  (options: G2ViewTree) => {\n    const { data, scale, legend } = options;\n    const discovered = [options];\n    let encodeColor;\n    let scaleColor;\n    let legendColor;\n    while (discovered.length) {\n      const node = discovered.shift();\n      const { children, encode = {}, scale = {}, legend = {} } = node;\n      const { color: c } = encode;\n      const { color: cs } = scale;\n      const { color: cl } = legend;\n      if (c !== undefined) encodeColor = c;\n      if (cs !== undefined) scaleColor = cs;\n      if (cl !== undefined) legendColor = cl;\n      if (Array.isArray(children)) {\n        discovered.push(...children);\n      }\n    }\n\n    const domainColor = () => {\n      const domain = scale?.color?.domain;\n      if (domain !== undefined) return [domain];\n      if (encodeColor === undefined) return [undefined];\n      const color =\n        typeof encodeColor === 'function' ? encodeColor : (d) => d[encodeColor];\n      const values = data.map(color);\n      if (values.some((d) => typeof d === 'number')) return [extent(values)];\n      return [Array.from(new Set(values)), 'ordinal'];\n    };\n\n    const title = typeof encodeColor === 'string' ? encodeColor : '';\n    const [domain, type] = domainColor();\n\n    return {\n      encode: { color: { type: 'column', value: domain ?? [] } },\n      scale: { color: deepMix({}, scaleColor, { domain, type }) },\n      ...(legend === undefined && {\n        legend: { color: deepMix({ title }, legendColor) },\n      }),\n    };\n  },\n);\n\nexport const setAnimation = useDefaultAdaptor<G2ViewTree>(() => ({\n  animate: {\n    enterType: 'fadeIn',\n  },\n}));\n\nexport const setStyle = useOverrideAdaptor<G2ViewTree>(() => ({\n  frame: false,\n  encode: {\n    shape: 'hollow',\n  },\n  style: {\n    lineWidth: 0,\n  },\n}));\n\nexport const toCell = useOverrideAdaptor<G2ViewTree>(() => ({\n  type: 'cell',\n}));\n\n/**\n * Do not set cell data directly, the children will get wrong do if do\n * so. Use transform to set new data.\n **/\nexport const setData = useOverrideAdaptor<G2ViewTree>((options) => {\n  const { data } = options;\n  const connector = {\n    type: 'custom',\n    callback: () => {\n      const { data, encode } = options;\n      const { x, y } = encode;\n      const X = x ? Array.from(new Set(data.map((d) => d[x]))) : [];\n      const Y = y ? Array.from(new Set(data.map((d) => d[y]))) : [];\n      const cellData = () => {\n        if (X.length && Y.length) {\n          const cellData = [];\n          for (const vx of X) {\n            for (const vy of Y) {\n              cellData.push({ [x]: vx, [y]: vy });\n            }\n          }\n          return cellData;\n        }\n        if (X.length) return X.map((d) => ({ [x]: d }));\n        if (Y.length) return Y.map((d) => ({ [y]: d }));\n      };\n      return cellData();\n    },\n  };\n  return {\n    data: { type: 'inline', value: data, transform: [connector] },\n  };\n});\n\n/**\n * @todo Move some options assignment to runtime.\n */\nexport const setChildren = useOverrideAdaptor<G2ViewTree>(\n  (\n    options,\n    subLayout: SubLayout = subLayoutRect,\n    createGuideX = createGuideXRect,\n    createGuideY = createGuideYRect,\n    childOptions = {},\n  ) => {\n    const {\n      data: dataValue,\n      encode,\n      children,\n      scale: facetScale,\n      x: originX = 0,\n      y: originY = 0,\n      shareData = false,\n      key: viewKey,\n    } = options;\n    const { value: data } = dataValue;\n    // Only support field encode now.\n    const { x: encodeX, y: encodeY } = encode;\n    const { color: facetScaleColor } = facetScale;\n    const { domain: facetDomainColor } = facetScaleColor;\n    const createChildren: G2MarkChildrenCallback = (\n      visualData,\n      scale,\n      layout,\n    ) => {\n      const { x: scaleX, y: scaleY } = scale;\n      const { paddingLeft, paddingTop, marginLeft, marginTop } = layout;\n      const { domain: domainX } = scaleX.getOptions();\n      const { domain: domainY } = scaleY.getOptions();\n      const index = indexOf(visualData);\n      const bboxs = visualData.map(subLayout);\n      const values = visualData.map(({ x, y }) => [\n        scaleX.invert(x),\n        scaleY.invert(y),\n      ]);\n      const filters = values.map(([fx, fy]) => (d) => {\n        const { [encodeX]: x, [encodeY]: y } = d;\n        const inX = encodeX !== undefined ? x === fx : true;\n        const inY = encodeY !== undefined ? y === fy : true;\n        return inX && inY;\n      });\n      const facetData2d = filters.map((f) => data.filter(f));\n      const maxDataDomain = shareData\n        ? max(facetData2d, (data) => data.length)\n        : undefined;\n      const facets = values.map(([fx, fy]) => ({\n        columnField: encodeX,\n        columnIndex: domainX.indexOf(fx),\n        columnValue: fx,\n        columnValuesLength: domainX.length,\n        rowField: encodeY,\n        rowIndex: domainY.indexOf(fy),\n        rowValue: fy,\n        rowValuesLength: domainY.length,\n      }));\n      const normalizedChildren: Node[][] = facets.map((facet) => {\n        if (Array.isArray(children)) return children;\n        return [children(facet)].flat(1);\n      });\n      return index.flatMap((i) => {\n        const [left, top, width, height] = bboxs[i];\n        const facet = facets[i];\n        const facetData = facetData2d[i];\n        const children = normalizedChildren[i];\n        return children.map(\n          ({\n            scale,\n            key,\n            facet: isFacet = true,\n            axis = {},\n            legend = {},\n            ...rest\n          }) => {\n            const guideY = scale?.y?.guide || axis.y;\n            const guideX = scale?.x?.guide || axis.x;\n            const defaultScale = {\n              x: { tickCount: encodeX ? 5 : undefined },\n              y: { tickCount: encodeY ? 5 : undefined },\n            };\n            const newData = isFacet\n              ? facetData\n              : facetData.length === 0\n              ? []\n              : data;\n            const newScale = {\n              color: { domain: facetDomainColor },\n            };\n            const newAxis = {\n              x: createGuide(guideX, createGuideX)(facet, newData),\n              y: createGuide(guideY, createGuideY)(facet, newData),\n            };\n            return {\n              key: `${key}-${i}`,\n              data: newData,\n              margin: 0,\n              x: left + paddingLeft + originX + marginLeft,\n              y: top + paddingTop + originY + marginTop,\n              parentKey: viewKey,\n              width,\n              height,\n              paddingLeft: 0,\n              paddingRight: 0,\n              paddingTop: 0,\n              paddingBottom: 0,\n              frame: newData.length ? true : false,\n              dataDomain: maxDataDomain,\n              scale: deepMix(defaultScale, scale, newScale),\n              axis: deepMix({}, axis, newAxis),\n              // Hide all legends for child mark by default,\n              // they are displayed in the top-level.\n              legend: false,\n              ...rest,\n              ...childOptions,\n            };\n          },\n        );\n      });\n    };\n    return {\n      children: createChildren,\n    };\n  },\n);\n\nfunction subLayoutRect(data) {\n  const { points } = data;\n  return calcBBox(points);\n}\n\n/**\n * Inner guide not show title, tickLine, label and subTickLine,\n * if data is empty, do not show guide.\n */\nexport function createInnerGuide(guide, data) {\n  return data.length\n    ? deepMix(\n        {\n          title: false,\n          tick: null,\n          label: null,\n        },\n        guide,\n      )\n    : deepMix(\n        {\n          title: false,\n          tick: null,\n          label: null,\n          grid: null,\n        },\n        guide,\n      );\n}\n\nfunction createGuideXRect(guide) {\n  return (facet, data) => {\n    const { rowIndex, rowValuesLength, columnIndex, columnValuesLength } =\n      facet;\n    // Only the bottom-most facet show axisX.\n    if (rowIndex !== rowValuesLength - 1) return createInnerGuide(guide, data);\n    // Only the bottom-left facet show title.\n    const title = columnIndex !== columnValuesLength - 1 ? false : undefined;\n    // If data is empty, do not show cell.\n    const grid = data.length ? undefined : null;\n    return deepMix({ title, grid }, guide);\n  };\n}\n\nfunction createGuideYRect(guide) {\n  return (facet, data) => {\n    const { rowIndex, columnIndex } = facet;\n    // Only the left-most facet show axisY.\n    if (columnIndex !== 0) return createInnerGuide(guide, data);\n    // Only the left-top facet show title.\n    const title = rowIndex !== 0 ? false : undefined;\n    // If data is empty, do not show cell.\n    const grid = data.length ? undefined : null;\n    return deepMix({ title, grid }, guide);\n  };\n}\n\nfunction createGuide(guide, factory) {\n  if (typeof guide === 'function') return guide;\n  if (guide === null || guide === false) return () => null;\n  return factory(guide);\n}\n\nexport type FacetRectOptions = Omit<FacetRectComposition, 'type'>;\n\nexport const FacetRect: CC<FacetRectOptions> = () => {\n  return (options) => {\n    const newOptions = Container.of<G2ViewTree>(options)\n      .call(toCell)\n      .call(inferColor)\n      .call(setAnimation)\n      .call(setScale)\n      .call(setStyle)\n      .call(setData)\n      .call(setChildren)\n      .value();\n    return [newOptions];\n  };\n};\n\nFacetRect.props = {};\n", "import { deepMix } from '@antv/util';\nimport {\n  CompositionComponent as CC,\n  G2View,\n  G2ViewTree,\n  Node,\n} from '../runtime';\nimport { RepeatMatrixComposition } from '../spec';\nimport { Container } from '../utils/container';\nimport { calcBBox } from '../utils/vector';\nimport { indexOf } from '../utils/array';\nimport {\n  createInnerGuide,\n  inferColor,\n  setAnimation,\n  setStyle,\n  toCell,\n} from './facetRect';\nimport { useDefaultAdaptor, useOverrideAdaptor } from './utils';\n\nexport type RepeatMatrixOptions = Omit<RepeatMatrixComposition, 'type'>;\n\nconst setScale = useDefaultAdaptor<G2ViewTree>((options) => {\n  return {\n    scale: {\n      x: { guide: null, paddingOuter: 0, paddingInner: 0.1 },\n      y: { guide: null, range: [0, 1], paddingOuter: 0, paddingInner: 0.1 },\n    },\n  };\n});\n\nconst setChildren = useOverrideAdaptor<G2ViewTree>((options) => {\n  const {\n    data,\n    children,\n    x: originX = 0,\n    y: originY = 0,\n    key: viewKey,\n  } = options;\n  const createChildren = (visualData, scale, layout) => {\n    const { x: scaleX, y: scaleY } = scale;\n    const { paddingLeft, paddingTop, marginLeft, marginTop } = layout;\n    const { domain: domainX } = scaleX.getOptions();\n    const { domain: domainY } = scaleY.getOptions();\n    const index = indexOf(visualData);\n    const bboxs = visualData.map(({ points }) => calcBBox(points));\n    const values = visualData.map(({ x, y }) => [\n      scaleX.invert(x),\n      scaleY.invert(y),\n    ]);\n    const facets = values.map(([fx, fy]) => ({\n      columnField: fx,\n      columnIndex: domainX.indexOf(fx),\n      columnValue: fx,\n      columnValuesLength: domainX.length,\n      rowField: fy,\n      rowIndex: domainY.indexOf(fy),\n      rowValue: fy,\n      rowValuesLength: domainY.length,\n    }));\n    const normalizedChildren: Node[][] = facets.map((facet) => {\n      if (Array.isArray(children)) return children;\n      return [children(facet)].flat(1);\n    });\n    return index.flatMap((i) => {\n      const [left, top, width, height] = bboxs[i];\n      const [fx, fy] = values[i];\n      const facet = facets[i];\n      const children = normalizedChildren[i];\n      return children.map((d) => {\n        const { scale, key, encode, axis, interaction, ...rest } = d;\n        const guideY = scale?.y?.guide;\n        const guideX = scale?.x?.guide;\n        const defaultScale = {\n          // Do not sync position scales among facets by default.\n          x: { facet: false },\n          // Do not sync position scales among facets by default.\n          y: { facet: false },\n        };\n        const newAxis = {\n          x: createGuideX(guideX)(facet, data),\n          y: createGuideY(guideY)(facet, data),\n        };\n        const defaultAxis = {\n          x: { tickCount: 5 },\n          y: { tickCount: 5 },\n        };\n        return {\n          data,\n          parentKey: viewKey,\n          key: `${key}-${i}`,\n          x: left + paddingLeft + originX + marginLeft,\n          y: top + paddingTop + originY + marginTop,\n          width,\n          height,\n          margin: 0,\n          paddingLeft: 0,\n          paddingRight: 0,\n          paddingTop: 0,\n          paddingBottom: 0,\n          frame: true,\n          scale: deepMix(defaultScale, scale),\n          axis: deepMix(defaultAxis, axis, newAxis),\n          // Hide all legends for child mark by default,\n          // they are displayed in the top-level.\n          legend: false,\n          encode: deepMix({}, encode, {\n            x: fx,\n            y: fy,\n          }),\n          interaction: deepMix({}, interaction, {\n            // Register this interaction in parent node.\n            legendFilter: false,\n          }),\n          ...rest,\n        };\n      });\n    });\n  };\n  return {\n    children: createChildren,\n  };\n});\n\n/**\n * @todo Use transform instead of override data directly.\n */\nconst setData = useOverrideAdaptor<G2ViewTree>((options: G2ViewTree) => {\n  const { encode, ...rest } = options;\n  const {\n    position: P = [],\n    x: X = P,\n    y: Y = [...P].reverse(),\n    ...restEncode\n  } = encode;\n  const data = [];\n  for (const $x of [X].flat(1)) {\n    for (const $y of [Y].flat(1)) {\n      data.push({ $x, $y });\n    }\n  }\n  return {\n    ...rest,\n    data,\n    encode: { ...restEncode, x: '$x', y: '$y' },\n    scale: {\n      ...([X].flat(1).length === 1 && { x: { paddingInner: 0 } }),\n      ...([Y].flat(1).length === 1 && { y: { paddingInner: 0 } }),\n    },\n  };\n});\n\nfunction createGuideX(guideX) {\n  if (typeof guideX === 'function') return guideX;\n  if (guideX === null) return () => null;\n  return (facet, data) => {\n    const { rowIndex, rowValuesLength } = facet;\n    // Only the bottom-most facet show axisX.\n    if (rowIndex !== rowValuesLength - 1) return createInnerGuide(guideX, data);\n  };\n}\n\nfunction createGuideY(guideY) {\n  if (typeof guideY === 'function') return guideY;\n  if (guideY === null) return () => null;\n  return (facet, data) => {\n    const { columnIndex } = facet;\n    // Only the left-most facet show axisY.\n    if (columnIndex !== 0) return createInnerGuide(guideY, data);\n  };\n}\n\n/**\n * @todo Layout mode: layer, row, col...\n * @todo Specify show axis or not.\n */\nexport const RepeatMatrix: CC<RepeatMatrixComposition> = () => {\n  return (options) => {\n    const newOptions = Container.of<G2ViewTree>(options)\n      .call(toCell)\n      .call(inferColor)\n      .call(setChildren)\n      .call(setData)\n      .call(setAnimation)\n      .call(setStyle)\n      .call(setScale)\n      .value();\n    return [newOptions];\n  };\n};\n", "import { CompositionComponent as CC, G2ViewTree } from '../runtime';\nimport { FacetCircleComposition } from '../spec';\nimport { Container } from '../utils/container';\nimport { angleWithQuadrant, angleBetween, dist, sub } from '../utils/vector';\nimport {\n  inferColor,\n  setAnimation,\n  setStyle,\n  toCell,\n  setChildren,\n  setData,\n} from './facetRect';\nimport { useDefaultAdaptor } from './utils';\n\nexport type FacetCircleOptions = Omit<FacetCircleComposition, 'type'>;\n\nconst setScale = useDefaultAdaptor<G2ViewTree>((options) => {\n  return {\n    scale: {\n      x: { guide: { type: 'axisArc' }, paddingOuter: 0, paddingInner: 0.1 },\n      y: { guide: null, range: [0, 1], paddingOuter: 0, paddingInner: 0.1 },\n    },\n  };\n});\n\nconst setCoordinate = useDefaultAdaptor((options: G2ViewTree) => {\n  return {\n    coordinate: { type: 'polar' },\n  };\n});\n\nconst setEncode = (options) => {\n  const { encode, ...rest } = options;\n  const { position } = encode;\n  return {\n    ...rest,\n    encode: { x: position },\n  };\n};\n\n/**\n * Every facet should do not show both axisX and axisY by default.\n */\nfunction createGuideFacetCircle(guide) {\n  return (facet) => null;\n}\n\n/**\n * Use the inscribed circle of the sector as the\n * circumscribed circle of the new bbox.\n */\nfunction subLayoutFacetCircle(data) {\n  const { points } = data;\n  const [p0, p1, p2, p3] = points;\n\n  const sr = dist(p0, p3); // radius of sector\n  const v0 = sub(p0, p3);\n  const v1 = sub(p1, p2);\n  const a01 = angleBetween(v0, v1);\n\n  // sr = ir + ir / sin(theta/2)\n  const t = 1 / Math.sin(a01 / 2);\n  const ir = sr / (1 + t); // radius of inscribed circle\n  const s = ir * Math.sqrt(2); // size of the bbox.\n\n  // This assume the innerRadius of polar is 0.\n  // @todo Compute the right origin if it's not 0,\n  // or maybe pass the coordinates to get the right center.\n  const [x0, y0] = p2;\n  const a0 = angleWithQuadrant(v0);\n  const a3 = a0 + a01 / 2;\n  const d = ir * t;\n  const cx = x0 + d * Math.sin(a3); // center x of inscribed circle\n  const cy = y0 - d * Math.cos(a3); // center y of inscribed circle\n  return [cx - s / 2, cy - s / 2, s, s];\n}\n\n/**\n * @todo Pack.\n */\nexport const FacetCircle: CC<FacetCircleComposition> = () => {\n  return (options) => {\n    const newOptions = Container.of<G2ViewTree>(options)\n      .call(toCell)\n      .call(setEncode)\n      .call(inferColor)\n      .call(setCoordinate)\n      .call(setData)\n      .call(\n        setChildren,\n        subLayoutFacetCircle,\n        createGuideFacetCircle,\n        createGuideFacetCircle,\n        { frame: false },\n      )\n      .call(setAnimation)\n      .call(setStyle)\n      .call(setScale)\n      .value();\n    return [newOptions];\n  };\n};\n", "import { deepMix } from '@antv/util';\nimport { CompositionComponent as CC, G2ViewTree } from '../runtime';\nimport { TimingKeyframeComposition } from '../spec';\n\nexport type TimingKeyframeOptions = Omit<TimingKeyframeComposition, 'type'>;\n\nfunction range(\n  direction: TimingKeyframeComposition['direction'],\n  iterationCount: number,\n  keyframeCount: number,\n): [number, number] {\n  const start = 0;\n  const end = keyframeCount;\n  const normal: [number, number] = [start, end];\n  const reverse: [number, number] = [-end + 1, -start + 1];\n  if (direction === 'normal') return normal;\n  if (direction === 'reverse') return reverse;\n  if (direction === 'alternate') {\n    return iterationCount % 2 === 0 ? normal : reverse;\n  }\n  if (direction === 'reverse-alternate') {\n    return iterationCount % 2 === 0 ? reverse : normal;\n  }\n}\n\n/**\n * Set animation options for all descendants.\n */\nfunction setAnimation(node: G2ViewTree, duration: number, easing: string) {\n  const discovered = [node];\n  while (discovered.length) {\n    const n = discovered.pop();\n    n.animate = deepMix(\n      {\n        enter: {\n          duration,\n        },\n        update: {\n          duration,\n          easing,\n          type: 'morphing',\n          fill: 'both',\n        },\n        exit: {\n          type: 'fadeOut',\n          duration,\n        },\n      },\n      n.animate || {},\n    );\n    const { children } = n;\n    if (Array.isArray(children)) discovered.push(...children);\n  }\n  return node;\n}\n\n/**\n * @todo More options, such as fill, totalDuration...\n */\nexport const TimingKeyframe: CC<TimingKeyframeOptions> = () => {\n  return (options) => {\n    const {\n      children = [],\n      duration = 1000,\n      iterationCount = 1,\n      direction = 'normal',\n      easing = 'ease-in-out-sine',\n    } = options;\n    const n = children.length;\n    if (!Array.isArray(children) || n === 0) return [];\n    const { key } = children[0];\n    const newChildren = children\n      .map((d) => ({ ...d, key }))\n      .map((d) => setAnimation(d, duration, easing));\n    return function* () {\n      let count = 0;\n      let prevIndex: number;\n      while (iterationCount === 'infinite' || count < iterationCount) {\n        const [start, end] = range(direction, count, n);\n        for (let i = start; i < end; i += 1) {\n          // For reverse direction, the range is from negative to negative\n          // so the absolute value of i is the real index for newChildren.\n          const index = Math.abs(i);\n          // This is for preventing alternate or reverse-alternate keyframe\n          // to yield two same node one by one when the direction change.\n          if (prevIndex !== index) yield newChildren[index];\n          prevIndex = index;\n        }\n        count++;\n      }\n    };\n  };\n};\n\nTimingKeyframe.props = {};\n", "import { CompositionComponent as CC } from '../runtime';\nimport { GeoPathComposition } from '../spec';\n\nexport type GeoPathOptions = Omit<GeoPathComposition, 'type'>;\n\n/**\n * Wrap GeoPath by a GeoView.\n */\nexport const GeoPath: CC<GeoPathOptions> = () => {\n  return (options) => {\n    const {\n      type,\n      data,\n      scale,\n      encode,\n      style,\n      animate,\n      key,\n      state,\n      tooltip,\n      ...rest\n    } = options;\n    return [\n      {\n        type: 'geoView',\n        ...rest,\n        children: [\n          {\n            type: 'geoPath',\n            key: `${key}-0`,\n            data: {\n              value: data,\n            },\n            scale,\n            encode,\n            style,\n            animate,\n            state,\n            tooltip,\n          },\n        ],\n      },\n    ];\n  };\n};\n\nGeoPath.props = {};\n", "export var epsilon = 1e-6;\nexport var epsilon2 = 1e-12;\nexport var pi = Math.PI;\nexport var halfPi = pi / 2;\nexport var quarterPi = pi / 4;\nexport var tau = pi * 2;\n\nexport var degrees = 180 / pi;\nexport var radians = pi / 180;\n\nexport var abs = Math.abs;\nexport var atan = Math.atan;\nexport var atan2 = Math.atan2;\nexport var cos = Math.cos;\nexport var ceil = Math.ceil;\nexport var exp = Math.exp;\nexport var floor = Math.floor;\nexport var hypot = Math.hypot;\nexport var log = Math.log;\nexport var pow = Math.pow;\nexport var sin = Math.sin;\nexport var sign = Math.sign || function(x) { return x > 0 ? 1 : x < 0 ? -1 : 0; };\nexport var sqrt = Math.sqrt;\nexport var tan = Math.tan;\n\nexport function acos(x) {\n  return x > 1 ? 0 : x < -1 ? pi : Math.acos(x);\n}\n\nexport function asin(x) {\n  return x > 1 ? halfPi : x < -1 ? -halfPi : Math.asin(x);\n}\n\nexport function haversin(x) {\n  return (x = sin(x / 2)) * x;\n}\n", "export default function noop() {}\n", "function streamGeometry(geometry, stream) {\n  if (geometry && streamGeometryType.hasOwnProperty(geometry.type)) {\n    streamGeometryType[geometry.type](geometry, stream);\n  }\n}\n\nvar streamObjectType = {\n  Feature: function(object, stream) {\n    streamGeometry(object.geometry, stream);\n  },\n  FeatureCollection: function(object, stream) {\n    var features = object.features, i = -1, n = features.length;\n    while (++i < n) streamGeometry(features[i].geometry, stream);\n  }\n};\n\nvar streamGeometryType = {\n  Sphere: function(object, stream) {\n    stream.sphere();\n  },\n  Point: function(object, stream) {\n    object = object.coordinates;\n    stream.point(object[0], object[1], object[2]);\n  },\n  MultiPoint: function(object, stream) {\n    var coordinates = object.coordinates, i = -1, n = coordinates.length;\n    while (++i < n) object = coordinates[i], stream.point(object[0], object[1], object[2]);\n  },\n  LineString: function(object, stream) {\n    streamLine(object.coordinates, stream, 0);\n  },\n  MultiLineString: function(object, stream) {\n    var coordinates = object.coordinates, i = -1, n = coordinates.length;\n    while (++i < n) streamLine(coordinates[i], stream, 0);\n  },\n  Polygon: function(object, stream) {\n    streamPolygon(object.coordinates, stream);\n  },\n  MultiPolygon: function(object, stream) {\n    var coordinates = object.coordinates, i = -1, n = coordinates.length;\n    while (++i < n) streamPolygon(coordinates[i], stream);\n  },\n  GeometryCollection: function(object, stream) {\n    var geometries = object.geometries, i = -1, n = geometries.length;\n    while (++i < n) streamGeometry(geometries[i], stream);\n  }\n};\n\nfunction streamLine(coordinates, stream, closed) {\n  var i = -1, n = coordinates.length - closed, coordinate;\n  stream.lineStart();\n  while (++i < n) coordinate = coordinates[i], stream.point(coordinate[0], coordinate[1], coordinate[2]);\n  stream.lineEnd();\n}\n\nfunction streamPolygon(coordinates, stream) {\n  var i = -1, n = coordinates.length;\n  stream.polygonStart();\n  while (++i < n) streamLine(coordinates[i], stream, 1);\n  stream.polygonEnd();\n}\n\nexport default function(object, stream) {\n  if (object && streamObjectType.hasOwnProperty(object.type)) {\n    streamObjectType[object.type](object, stream);\n  } else {\n    streamGeometry(object, stream);\n  }\n}\n", "import {Adder} from \"d3-array\";\nimport {atan2, cos, quarterPi, radians, sin, tau} from \"./math.js\";\nimport noop from \"./noop.js\";\nimport stream from \"./stream.js\";\n\nexport var areaRingSum = new Adder();\n\n// hello?\n\nvar areaSum = new Adder(),\n    lambda00,\n    phi00,\n    lambda0,\n    cosPhi0,\n    sinPhi0;\n\nexport var areaStream = {\n  point: noop,\n  lineStart: noop,\n  lineEnd: noop,\n  polygonStart: function() {\n    areaRingSum = new Adder();\n    areaStream.lineStart = areaRingStart;\n    areaStream.lineEnd = areaRingEnd;\n  },\n  polygonEnd: function() {\n    var areaRing = +areaRingSum;\n    areaSum.add(areaRing < 0 ? tau + areaRing : areaRing);\n    this.lineStart = this.lineEnd = this.point = noop;\n  },\n  sphere: function() {\n    areaSum.add(tau);\n  }\n};\n\nfunction areaRingStart() {\n  areaStream.point = areaPointFirst;\n}\n\nfunction areaRingEnd() {\n  areaPoint(lambda00, phi00);\n}\n\nfunction areaPointFirst(lambda, phi) {\n  areaStream.point = areaPoint;\n  lambda00 = lambda, phi00 = phi;\n  lambda *= radians, phi *= radians;\n  lambda0 = lambda, cosPhi0 = cos(phi = phi / 2 + quarterPi), sinPhi0 = sin(phi);\n}\n\nfunction areaPoint(lambda, phi) {\n  lambda *= radians, phi *= radians;\n  phi = phi / 2 + quarterPi; // half the angular distance from south pole\n\n  // Spherical excess E for a spherical triangle with vertices: south pole,\n  // previous point, current point.  Uses a formula derived from Cagnolis\n  // theorem.  See Todhunter, Spherical Trig. (1871), Sec. 103, Eq. (2).\n  var dLambda = lambda - lambda0,\n      sdLambda = dLambda >= 0 ? 1 : -1,\n      adLambda = sdLambda * dLambda,\n      cosPhi = cos(phi),\n      sinPhi = sin(phi),\n      k = sinPhi0 * sinPhi,\n      u = cosPhi0 * cosPhi + k * cos(adLambda),\n      v = k * sdLambda * sin(adLambda);\n  areaRingSum.add(atan2(v, u));\n\n  // Advance the previous points.\n  lambda0 = lambda, cosPhi0 = cosPhi, sinPhi0 = sinPhi;\n}\n\nexport default function(object) {\n  areaSum = new Adder();\n  stream(object, areaStream);\n  return areaSum * 2;\n}\n", "import {asin, atan2, cos, sin, sqrt} from \"./math.js\";\n\nexport function spherical(cartesian) {\n  return [atan2(cartesian[1], cartesian[0]), asin(cartesian[2])];\n}\n\nexport function cartesian(spherical) {\n  var lambda = spherical[0], phi = spherical[1], cosPhi = cos(phi);\n  return [cosPhi * cos(lambda), cosPhi * sin(lambda), sin(phi)];\n}\n\nexport function cartesianDot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\n\nexport function cartesianCross(a, b) {\n  return [a[1] * b[2] - a[2] * b[1], a[2] * b[0] - a[0] * b[2], a[0] * b[1] - a[1] * b[0]];\n}\n\n// TODO return a\nexport function cartesianAddInPlace(a, b) {\n  a[0] += b[0], a[1] += b[1], a[2] += b[2];\n}\n\nexport function cartesianScale(vector, k) {\n  return [vector[0] * k, vector[1] * k, vector[2] * k];\n}\n\n// TODO return d\nexport function cartesianNormalizeInPlace(d) {\n  var l = sqrt(d[0] * d[0] + d[1] * d[1] + d[2] * d[2]);\n  d[0] /= l, d[1] /= l, d[2] /= l;\n}\n", "export default function(a, b) {\n\n  function compose(x, y) {\n    return x = a(x, y), b(x[0], x[1]);\n  }\n\n  if (a.invert && b.invert) compose.invert = function(x, y) {\n    return x = b.invert(x, y), x && a.invert(x[0], x[1]);\n  };\n\n  return compose;\n}\n", "import compose from \"./compose.js\";\nimport {abs, asin, atan2, cos, degrees, pi, radians, sin, tau} from \"./math.js\";\n\nfunction rotationIdentity(lambda, phi) {\n  if (abs(lambda) > pi) lambda -= Math.round(lambda / tau) * tau;\n  return [lambda, phi];\n}\n\nrotationIdentity.invert = rotationIdentity;\n\nexport function rotateRadians(deltaLambda, deltaPhi, deltaGamma) {\n  return (deltaLambda %= tau) ? (deltaPhi || deltaGamma ? compose(rotationLambda(deltaLambda), rotationPhiGamma(deltaPhi, deltaGamma))\n    : rotationLambda(deltaLambda))\n    : (deltaPhi || deltaGamma ? rotationPhiGamma(deltaPhi, deltaGamma)\n    : rotationIdentity);\n}\n\nfunction forwardRotationLambda(deltaLambda) {\n  return function(lambda, phi) {\n    lambda += deltaLambda;\n    if (abs(lambda) > pi) lambda -= Math.round(lambda / tau) * tau;\n    return [lambda, phi];\n  };\n}\n\nfunction rotationLambda(deltaLambda) {\n  var rotation = forwardRotationLambda(deltaLambda);\n  rotation.invert = forwardRotationLambda(-deltaLambda);\n  return rotation;\n}\n\nfunction rotationPhiGamma(deltaPhi, deltaGamma) {\n  var cosDeltaPhi = cos(deltaPhi),\n      sinDeltaPhi = sin(deltaPhi),\n      cosDeltaGamma = cos(deltaGamma),\n      sinDeltaGamma = sin(deltaGamma);\n\n  function rotation(lambda, phi) {\n    var cosPhi = cos(phi),\n        x = cos(lambda) * cosPhi,\n        y = sin(lambda) * cosPhi,\n        z = sin(phi),\n        k = z * cosDeltaPhi + x * sinDeltaPhi;\n    return [\n      atan2(y * cosDeltaGamma - k * sinDeltaGamma, x * cosDeltaPhi - z * sinDeltaPhi),\n      asin(k * cosDeltaGamma + y * sinDeltaGamma)\n    ];\n  }\n\n  rotation.invert = function(lambda, phi) {\n    var cosPhi = cos(phi),\n        x = cos(lambda) * cosPhi,\n        y = sin(lambda) * cosPhi,\n        z = sin(phi),\n        k = z * cosDeltaGamma - y * sinDeltaGamma;\n    return [\n      atan2(y * cosDeltaGamma + z * sinDeltaGamma, x * cosDeltaPhi + k * sinDeltaPhi),\n      asin(k * cosDeltaPhi - x * sinDeltaPhi)\n    ];\n  };\n\n  return rotation;\n}\n\nexport default function(rotate) {\n  rotate = rotateRadians(rotate[0] * radians, rotate[1] * radians, rotate.length > 2 ? rotate[2] * radians : 0);\n\n  function forward(coordinates) {\n    coordinates = rotate(coordinates[0] * radians, coordinates[1] * radians);\n    return coordinates[0] *= degrees, coordinates[1] *= degrees, coordinates;\n  }\n\n  forward.invert = function(coordinates) {\n    coordinates = rotate.invert(coordinates[0] * radians, coordinates[1] * radians);\n    return coordinates[0] *= degrees, coordinates[1] *= degrees, coordinates;\n  };\n\n  return forward;\n}\n", "import {cartesian, cartesianNormalizeInPlace, spherical} from \"./cartesian.js\";\nimport constant from \"./constant.js\";\nimport {acos, cos, degrees, epsilon, radians, sin, tau} from \"./math.js\";\nimport {rotateRadians} from \"./rotation.js\";\n\n// Generates a circle centered at [0, 0], with a given radius and precision.\nexport function circleStream(stream, radius, delta, direction, t0, t1) {\n  if (!delta) return;\n  var cosRadius = cos(radius),\n      sinRadius = sin(radius),\n      step = direction * delta;\n  if (t0 == null) {\n    t0 = radius + direction * tau;\n    t1 = radius - step / 2;\n  } else {\n    t0 = circleRadius(cosRadius, t0);\n    t1 = circleRadius(cosRadius, t1);\n    if (direction > 0 ? t0 < t1 : t0 > t1) t0 += direction * tau;\n  }\n  for (var point, t = t0; direction > 0 ? t > t1 : t < t1; t -= step) {\n    point = spherical([cosRadius, -sinRadius * cos(t), -sinRadius * sin(t)]);\n    stream.point(point[0], point[1]);\n  }\n}\n\n// Returns the signed angle of a cartesian point relative to [cosRadius, 0, 0].\nfunction circleRadius(cosRadius, point) {\n  point = cartesian(point), point[0] -= cosRadius;\n  cartesianNormalizeInPlace(point);\n  var radius = acos(-point[1]);\n  return ((-point[2] < 0 ? -radius : radius) + tau - epsilon) % tau;\n}\n\nexport default function() {\n  var center = constant([0, 0]),\n      radius = constant(90),\n      precision = constant(2),\n      ring,\n      rotate,\n      stream = {point: point};\n\n  function point(x, y) {\n    ring.push(x = rotate(x, y));\n    x[0] *= degrees, x[1] *= degrees;\n  }\n\n  function circle() {\n    var c = center.apply(this, arguments),\n        r = radius.apply(this, arguments) * radians,\n        p = precision.apply(this, arguments) * radians;\n    ring = [];\n    rotate = rotateRadians(-c[0] * radians, -c[1] * radians, 0).invert;\n    circleStream(stream, r, p, 1);\n    c = {type: \"Polygon\", coordinates: [ring]};\n    ring = rotate = null;\n    return c;\n  }\n\n  circle.center = function(_) {\n    return arguments.length ? (center = typeof _ === \"function\" ? _ : constant([+_[0], +_[1]]), circle) : center;\n  };\n\n  circle.radius = function(_) {\n    return arguments.length ? (radius = typeof _ === \"function\" ? _ : constant(+_), circle) : radius;\n  };\n\n  circle.precision = function(_) {\n    return arguments.length ? (precision = typeof _ === \"function\" ? _ : constant(+_), circle) : precision;\n  };\n\n  return circle;\n}\n", "import noop from \"../noop.js\";\n\nexport default function() {\n  var lines = [],\n      line;\n  return {\n    point: function(x, y, m) {\n      line.push([x, y, m]);\n    },\n    lineStart: function() {\n      lines.push(line = []);\n    },\n    lineEnd: noop,\n    rejoin: function() {\n      if (lines.length > 1) lines.push(lines.pop().concat(lines.shift()));\n    },\n    result: function() {\n      var result = lines;\n      lines = [];\n      line = null;\n      return result;\n    }\n  };\n}\n", "import {abs, epsilon} from \"./math.js\";\n\nexport default function(a, b) {\n  return abs(a[0] - b[0]) < epsilon && abs(a[1] - b[1]) < epsilon;\n}\n", "import pointEqual from \"../pointEqual.js\";\nimport {epsilon} from \"../math.js\";\n\nfunction Intersection(point, points, other, entry) {\n  this.x = point;\n  this.z = points;\n  this.o = other; // another intersection\n  this.e = entry; // is an entry?\n  this.v = false; // visited\n  this.n = this.p = null; // next & previous\n}\n\n// A generalized polygon clipping algorithm: given a polygon that has been cut\n// into its visible line segments, and rejoins the segments by interpolating\n// along the clip edge.\nexport default function(segments, compareIntersection, startInside, interpolate, stream) {\n  var subject = [],\n      clip = [],\n      i,\n      n;\n\n  segments.forEach(function(segment) {\n    if ((n = segment.length - 1) <= 0) return;\n    var n, p0 = segment[0], p1 = segment[n], x;\n\n    if (pointEqual(p0, p1)) {\n      if (!p0[2] && !p1[2]) {\n        stream.lineStart();\n        for (i = 0; i < n; ++i) stream.point((p0 = segment[i])[0], p0[1]);\n        stream.lineEnd();\n        return;\n      }\n      // handle degenerate cases by moving the point\n      p1[0] += 2 * epsilon;\n    }\n\n    subject.push(x = new Intersection(p0, segment, null, true));\n    clip.push(x.o = new Intersection(p0, null, x, false));\n    subject.push(x = new Intersection(p1, segment, null, false));\n    clip.push(x.o = new Intersection(p1, null, x, true));\n  });\n\n  if (!subject.length) return;\n\n  clip.sort(compareIntersection);\n  link(subject);\n  link(clip);\n\n  for (i = 0, n = clip.length; i < n; ++i) {\n    clip[i].e = startInside = !startInside;\n  }\n\n  var start = subject[0],\n      points,\n      point;\n\n  while (1) {\n    // Find first unvisited intersection.\n    var current = start,\n        isSubject = true;\n    while (current.v) if ((current = current.n) === start) return;\n    points = current.z;\n    stream.lineStart();\n    do {\n      current.v = current.o.v = true;\n      if (current.e) {\n        if (isSubject) {\n          for (i = 0, n = points.length; i < n; ++i) stream.point((point = points[i])[0], point[1]);\n        } else {\n          interpolate(current.x, current.n.x, 1, stream);\n        }\n        current = current.n;\n      } else {\n        if (isSubject) {\n          points = current.p.z;\n          for (i = points.length - 1; i >= 0; --i) stream.point((point = points[i])[0], point[1]);\n        } else {\n          interpolate(current.x, current.p.x, -1, stream);\n        }\n        current = current.p;\n      }\n      current = current.o;\n      points = current.z;\n      isSubject = !isSubject;\n    } while (!current.v);\n    stream.lineEnd();\n  }\n}\n\nfunction link(array) {\n  if (!(n = array.length)) return;\n  var n,\n      i = 0,\n      a = array[0],\n      b;\n  while (++i < n) {\n    a.n = b = array[i];\n    b.p = a;\n    a = b;\n  }\n  a.n = b = array[0];\n  b.p = a;\n}\n", "import {Adder} from \"d3-array\";\nimport {cartesian, cartesianCross, cartesianNormalizeInPlace} from \"./cartesian.js\";\nimport {abs, asin, atan2, cos, epsilon, epsilon2, halfPi, pi, quarterPi, sign, sin, tau} from \"./math.js\";\n\nfunction longitude(point) {\n  return abs(point[0]) <= pi ? point[0] : sign(point[0]) * ((abs(point[0]) + pi) % tau - pi);\n}\n\nexport default function(polygon, point) {\n  var lambda = longitude(point),\n      phi = point[1],\n      sinPhi = sin(phi),\n      normal = [sin(lambda), -cos(lambda), 0],\n      angle = 0,\n      winding = 0;\n\n  var sum = new Adder();\n\n  if (sinPhi === 1) phi = halfPi + epsilon;\n  else if (sinPhi === -1) phi = -halfPi - epsilon;\n\n  for (var i = 0, n = polygon.length; i < n; ++i) {\n    if (!(m = (ring = polygon[i]).length)) continue;\n    var ring,\n        m,\n        point0 = ring[m - 1],\n        lambda0 = longitude(point0),\n        phi0 = point0[1] / 2 + quarterPi,\n        sinPhi0 = sin(phi0),\n        cosPhi0 = cos(phi0);\n\n    for (var j = 0; j < m; ++j, lambda0 = lambda1, sinPhi0 = sinPhi1, cosPhi0 = cosPhi1, point0 = point1) {\n      var point1 = ring[j],\n          lambda1 = longitude(point1),\n          phi1 = point1[1] / 2 + quarterPi,\n          sinPhi1 = sin(phi1),\n          cosPhi1 = cos(phi1),\n          delta = lambda1 - lambda0,\n          sign = delta >= 0 ? 1 : -1,\n          absDelta = sign * delta,\n          antimeridian = absDelta > pi,\n          k = sinPhi0 * sinPhi1;\n\n      sum.add(atan2(k * sign * sin(absDelta), cosPhi0 * cosPhi1 + k * cos(absDelta)));\n      angle += antimeridian ? delta + sign * tau : delta;\n\n      // Are the longitudes either side of the points meridian (lambda),\n      // and are the latitudes smaller than the parallel (phi)?\n      if (antimeridian ^ lambda0 >= lambda ^ lambda1 >= lambda) {\n        var arc = cartesianCross(cartesian(point0), cartesian(point1));\n        cartesianNormalizeInPlace(arc);\n        var intersection = cartesianCross(normal, arc);\n        cartesianNormalizeInPlace(intersection);\n        var phiArc = (antimeridian ^ delta >= 0 ? -1 : 1) * asin(intersection[2]);\n        if (phi > phiArc || phi === phiArc && (arc[0] || arc[1])) {\n          winding += antimeridian ^ delta >= 0 ? 1 : -1;\n        }\n      }\n    }\n  }\n\n  // First, determine whether the South pole is inside or outside:\n  //\n  // It is inside if:\n  // * the polygon winds around it in a clockwise direction.\n  // * the polygon does not (cumulatively) wind around it, but has a negative\n  //   (counter-clockwise) area.\n  //\n  // Second, count the (signed) number of times a segment crosses a lambda\n  // from the point to the South pole.  If it is zero, then the point is the\n  // same side as the South pole.\n\n  return (angle < -epsilon || angle < epsilon && sum < -epsilon2) ^ (winding & 1);\n}\n", "import clipBuffer from \"./buffer.js\";\nimport clipRejoin from \"./rejoin.js\";\nimport {epsilon, halfPi} from \"../math.js\";\nimport polygonContains from \"../polygonContains.js\";\nimport {merge} from \"d3-array\";\n\nexport default function(pointVisible, clipLine, interpolate, start) {\n  return function(sink) {\n    var line = clipLine(sink),\n        ringBuffer = clipBuffer(),\n        ringSink = clipLine(ringBuffer),\n        polygonStarted = false,\n        polygon,\n        segments,\n        ring;\n\n    var clip = {\n      point: point,\n      lineStart: lineStart,\n      lineEnd: lineEnd,\n      polygonStart: function() {\n        clip.point = pointRing;\n        clip.lineStart = ringStart;\n        clip.lineEnd = ringEnd;\n        segments = [];\n        polygon = [];\n      },\n      polygonEnd: function() {\n        clip.point = point;\n        clip.lineStart = lineStart;\n        clip.lineEnd = lineEnd;\n        segments = merge(segments);\n        var startInside = polygonContains(polygon, start);\n        if (segments.length) {\n          if (!polygonStarted) sink.polygonStart(), polygonStarted = true;\n          clipRejoin(segments, compareIntersection, startInside, interpolate, sink);\n        } else if (startInside) {\n          if (!polygonStarted) sink.polygonStart(), polygonStarted = true;\n          sink.lineStart();\n          interpolate(null, null, 1, sink);\n          sink.lineEnd();\n        }\n        if (polygonStarted) sink.polygonEnd(), polygonStarted = false;\n        segments = polygon = null;\n      },\n      sphere: function() {\n        sink.polygonStart();\n        sink.lineStart();\n        interpolate(null, null, 1, sink);\n        sink.lineEnd();\n        sink.polygonEnd();\n      }\n    };\n\n    function point(lambda, phi) {\n      if (pointVisible(lambda, phi)) sink.point(lambda, phi);\n    }\n\n    function pointLine(lambda, phi) {\n      line.point(lambda, phi);\n    }\n\n    function lineStart() {\n      clip.point = pointLine;\n      line.lineStart();\n    }\n\n    function lineEnd() {\n      clip.point = point;\n      line.lineEnd();\n    }\n\n    function pointRing(lambda, phi) {\n      ring.push([lambda, phi]);\n      ringSink.point(lambda, phi);\n    }\n\n    function ringStart() {\n      ringSink.lineStart();\n      ring = [];\n    }\n\n    function ringEnd() {\n      pointRing(ring[0][0], ring[0][1]);\n      ringSink.lineEnd();\n\n      var clean = ringSink.clean(),\n          ringSegments = ringBuffer.result(),\n          i, n = ringSegments.length, m,\n          segment,\n          point;\n\n      ring.pop();\n      polygon.push(ring);\n      ring = null;\n\n      if (!n) return;\n\n      // No intersections.\n      if (clean & 1) {\n        segment = ringSegments[0];\n        if ((m = segment.length - 1) > 0) {\n          if (!polygonStarted) sink.polygonStart(), polygonStarted = true;\n          sink.lineStart();\n          for (i = 0; i < m; ++i) sink.point((point = segment[i])[0], point[1]);\n          sink.lineEnd();\n        }\n        return;\n      }\n\n      // Rejoin connected segments.\n      // TODO reuse ringBuffer.rejoin()?\n      if (n > 1 && clean & 2) ringSegments.push(ringSegments.pop().concat(ringSegments.shift()));\n\n      segments.push(ringSegments.filter(validSegment));\n    }\n\n    return clip;\n  };\n}\n\nfunction validSegment(segment) {\n  return segment.length > 1;\n}\n\n// Intersections are sorted along the clip edge. For both antimeridian cutting\n// and circle clipping, the same comparison is used.\nfunction compareIntersection(a, b) {\n  return ((a = a.x)[0] < 0 ? a[1] - halfPi - epsilon : halfPi - a[1])\n       - ((b = b.x)[0] < 0 ? b[1] - halfPi - epsilon : halfPi - b[1]);\n}\n", "import clip from \"./index.js\";\nimport {abs, atan, cos, epsilon, halfPi, pi, sin} from \"../math.js\";\n\nexport default clip(\n  function() { return true; },\n  clipAntimeridianLine,\n  clipAntimeridianInterpolate,\n  [-pi, -halfPi]\n);\n\n// Takes a line and cuts into visible segments. Return values: 0 - there were\n// intersections or the line was empty; 1 - no intersections; 2 - there were\n// intersections, and the first and last segments should be rejoined.\nfunction clipAntimeridianLine(stream) {\n  var lambda0 = NaN,\n      phi0 = NaN,\n      sign0 = NaN,\n      clean; // no intersections\n\n  return {\n    lineStart: function() {\n      stream.lineStart();\n      clean = 1;\n    },\n    point: function(lambda1, phi1) {\n      var sign1 = lambda1 > 0 ? pi : -pi,\n          delta = abs(lambda1 - lambda0);\n      if (abs(delta - pi) < epsilon) { // line crosses a pole\n        stream.point(lambda0, phi0 = (phi0 + phi1) / 2 > 0 ? halfPi : -halfPi);\n        stream.point(sign0, phi0);\n        stream.lineEnd();\n        stream.lineStart();\n        stream.point(sign1, phi0);\n        stream.point(lambda1, phi0);\n        clean = 0;\n      } else if (sign0 !== sign1 && delta >= pi) { // line crosses antimeridian\n        if (abs(lambda0 - sign0) < epsilon) lambda0 -= sign0 * epsilon; // handle degeneracies\n        if (abs(lambda1 - sign1) < epsilon) lambda1 -= sign1 * epsilon;\n        phi0 = clipAntimeridianIntersect(lambda0, phi0, lambda1, phi1);\n        stream.point(sign0, phi0);\n        stream.lineEnd();\n        stream.lineStart();\n        stream.point(sign1, phi0);\n        clean = 0;\n      }\n      stream.point(lambda0 = lambda1, phi0 = phi1);\n      sign0 = sign1;\n    },\n    lineEnd: function() {\n      stream.lineEnd();\n      lambda0 = phi0 = NaN;\n    },\n    clean: function() {\n      return 2 - clean; // if intersections, rejoin first and last segments\n    }\n  };\n}\n\nfunction clipAntimeridianIntersect(lambda0, phi0, lambda1, phi1) {\n  var cosPhi0,\n      cosPhi1,\n      sinLambda0Lambda1 = sin(lambda0 - lambda1);\n  return abs(sinLambda0Lambda1) > epsilon\n      ? atan((sin(phi0) * (cosPhi1 = cos(phi1)) * sin(lambda1)\n          - sin(phi1) * (cosPhi0 = cos(phi0)) * sin(lambda0))\n          / (cosPhi0 * cosPhi1 * sinLambda0Lambda1))\n      : (phi0 + phi1) / 2;\n}\n\nfunction clipAntimeridianInterpolate(from, to, direction, stream) {\n  var phi;\n  if (from == null) {\n    phi = direction * halfPi;\n    stream.point(-pi, phi);\n    stream.point(0, phi);\n    stream.point(pi, phi);\n    stream.point(pi, 0);\n    stream.point(pi, -phi);\n    stream.point(0, -phi);\n    stream.point(-pi, -phi);\n    stream.point(-pi, 0);\n    stream.point(-pi, phi);\n  } else if (abs(from[0] - to[0]) > epsilon) {\n    var lambda = from[0] < to[0] ? pi : -pi;\n    phi = direction * lambda / 2;\n    stream.point(-lambda, phi);\n    stream.point(0, phi);\n    stream.point(lambda, phi);\n  } else {\n    stream.point(to[0], to[1]);\n  }\n}\n", "import {cartesian, cartesianAddInPlace, cartesianCross, cartesianDot, cartesianScale, spherical} from \"../cartesian.js\";\nimport {circleStream} from \"../circle.js\";\nimport {abs, cos, epsilon, pi, radians, sqrt} from \"../math.js\";\nimport pointEqual from \"../pointEqual.js\";\nimport clip from \"./index.js\";\n\nexport default function(radius) {\n  var cr = cos(radius),\n      delta = 2 * radians,\n      smallRadius = cr > 0,\n      notHemisphere = abs(cr) > epsilon; // TODO optimise for this common case\n\n  function interpolate(from, to, direction, stream) {\n    circleStream(stream, radius, delta, direction, from, to);\n  }\n\n  function visible(lambda, phi) {\n    return cos(lambda) * cos(phi) > cr;\n  }\n\n  // Takes a line and cuts into visible segments. Return values used for polygon\n  // clipping: 0 - there were intersections or the line was empty; 1 - no\n  // intersections 2 - there were intersections, and the first and last segments\n  // should be rejoined.\n  function clipLine(stream) {\n    var point0, // previous point\n        c0, // code for previous point\n        v0, // visibility of previous point\n        v00, // visibility of first point\n        clean; // no intersections\n    return {\n      lineStart: function() {\n        v00 = v0 = false;\n        clean = 1;\n      },\n      point: function(lambda, phi) {\n        var point1 = [lambda, phi],\n            point2,\n            v = visible(lambda, phi),\n            c = smallRadius\n              ? v ? 0 : code(lambda, phi)\n              : v ? code(lambda + (lambda < 0 ? pi : -pi), phi) : 0;\n        if (!point0 && (v00 = v0 = v)) stream.lineStart();\n        if (v !== v0) {\n          point2 = intersect(point0, point1);\n          if (!point2 || pointEqual(point0, point2) || pointEqual(point1, point2))\n            point1[2] = 1;\n        }\n        if (v !== v0) {\n          clean = 0;\n          if (v) {\n            // outside going in\n            stream.lineStart();\n            point2 = intersect(point1, point0);\n            stream.point(point2[0], point2[1]);\n          } else {\n            // inside going out\n            point2 = intersect(point0, point1);\n            stream.point(point2[0], point2[1], 2);\n            stream.lineEnd();\n          }\n          point0 = point2;\n        } else if (notHemisphere && point0 && smallRadius ^ v) {\n          var t;\n          // If the codes for two points are different, or are both zero,\n          // and there this segment intersects with the small circle.\n          if (!(c & c0) && (t = intersect(point1, point0, true))) {\n            clean = 0;\n            if (smallRadius) {\n              stream.lineStart();\n              stream.point(t[0][0], t[0][1]);\n              stream.point(t[1][0], t[1][1]);\n              stream.lineEnd();\n            } else {\n              stream.point(t[1][0], t[1][1]);\n              stream.lineEnd();\n              stream.lineStart();\n              stream.point(t[0][0], t[0][1], 3);\n            }\n          }\n        }\n        if (v && (!point0 || !pointEqual(point0, point1))) {\n          stream.point(point1[0], point1[1]);\n        }\n        point0 = point1, v0 = v, c0 = c;\n      },\n      lineEnd: function() {\n        if (v0) stream.lineEnd();\n        point0 = null;\n      },\n      // Rejoin first and last segments if there were intersections and the first\n      // and last points were visible.\n      clean: function() {\n        return clean | ((v00 && v0) << 1);\n      }\n    };\n  }\n\n  // Intersects the great circle between a and b with the clip circle.\n  function intersect(a, b, two) {\n    var pa = cartesian(a),\n        pb = cartesian(b);\n\n    // We have two planes, n1.p = d1 and n2.p = d2.\n    // Find intersection line p(t) = c1 n1 + c2 n2 + t (n1  n2).\n    var n1 = [1, 0, 0], // normal\n        n2 = cartesianCross(pa, pb),\n        n2n2 = cartesianDot(n2, n2),\n        n1n2 = n2[0], // cartesianDot(n1, n2),\n        determinant = n2n2 - n1n2 * n1n2;\n\n    // Two polar points.\n    if (!determinant) return !two && a;\n\n    var c1 =  cr * n2n2 / determinant,\n        c2 = -cr * n1n2 / determinant,\n        n1xn2 = cartesianCross(n1, n2),\n        A = cartesianScale(n1, c1),\n        B = cartesianScale(n2, c2);\n    cartesianAddInPlace(A, B);\n\n    // Solve |p(t)|^2 = 1.\n    var u = n1xn2,\n        w = cartesianDot(A, u),\n        uu = cartesianDot(u, u),\n        t2 = w * w - uu * (cartesianDot(A, A) - 1);\n\n    if (t2 < 0) return;\n\n    var t = sqrt(t2),\n        q = cartesianScale(u, (-w - t) / uu);\n    cartesianAddInPlace(q, A);\n    q = spherical(q);\n\n    if (!two) return q;\n\n    // Two intersection points.\n    var lambda0 = a[0],\n        lambda1 = b[0],\n        phi0 = a[1],\n        phi1 = b[1],\n        z;\n\n    if (lambda1 < lambda0) z = lambda0, lambda0 = lambda1, lambda1 = z;\n\n    var delta = lambda1 - lambda0,\n        polar = abs(delta - pi) < epsilon,\n        meridian = polar || delta < epsilon;\n\n    if (!polar && phi1 < phi0) z = phi0, phi0 = phi1, phi1 = z;\n\n    // Check that the first point is between a and b.\n    if (meridian\n        ? polar\n          ? phi0 + phi1 > 0 ^ q[1] < (abs(q[0] - lambda0) < epsilon ? phi0 : phi1)\n          : phi0 <= q[1] && q[1] <= phi1\n        : delta > pi ^ (lambda0 <= q[0] && q[0] <= lambda1)) {\n      var q1 = cartesianScale(u, (-w + t) / uu);\n      cartesianAddInPlace(q1, A);\n      return [q, spherical(q1)];\n    }\n  }\n\n  // Generates a 4-bit vector representing the location of a point relative to\n  // the small circle's bounding box.\n  function code(lambda, phi) {\n    var r = smallRadius ? radius : pi - radius,\n        code = 0;\n    if (lambda < -r) code |= 1; // left\n    else if (lambda > r) code |= 2; // right\n    if (phi < -r) code |= 4; // below\n    else if (phi > r) code |= 8; // above\n    return code;\n  }\n\n  return clip(visible, clipLine, interpolate, smallRadius ? [0, -radius] : [-pi, radius - pi]);\n}\n", "export default function(a, b, x0, y0, x1, y1) {\n  var ax = a[0],\n      ay = a[1],\n      bx = b[0],\n      by = b[1],\n      t0 = 0,\n      t1 = 1,\n      dx = bx - ax,\n      dy = by - ay,\n      r;\n\n  r = x0 - ax;\n  if (!dx && r > 0) return;\n  r /= dx;\n  if (dx < 0) {\n    if (r < t0) return;\n    if (r < t1) t1 = r;\n  } else if (dx > 0) {\n    if (r > t1) return;\n    if (r > t0) t0 = r;\n  }\n\n  r = x1 - ax;\n  if (!dx && r < 0) return;\n  r /= dx;\n  if (dx < 0) {\n    if (r > t1) return;\n    if (r > t0) t0 = r;\n  } else if (dx > 0) {\n    if (r < t0) return;\n    if (r < t1) t1 = r;\n  }\n\n  r = y0 - ay;\n  if (!dy && r > 0) return;\n  r /= dy;\n  if (dy < 0) {\n    if (r < t0) return;\n    if (r < t1) t1 = r;\n  } else if (dy > 0) {\n    if (r > t1) return;\n    if (r > t0) t0 = r;\n  }\n\n  r = y1 - ay;\n  if (!dy && r < 0) return;\n  r /= dy;\n  if (dy < 0) {\n    if (r > t1) return;\n    if (r > t0) t0 = r;\n  } else if (dy > 0) {\n    if (r < t0) return;\n    if (r < t1) t1 = r;\n  }\n\n  if (t0 > 0) a[0] = ax + t0 * dx, a[1] = ay + t0 * dy;\n  if (t1 < 1) b[0] = ax + t1 * dx, b[1] = ay + t1 * dy;\n  return true;\n}\n", "import {abs, epsilon} from \"../math.js\";\nimport clipBuffer from \"./buffer.js\";\nimport clipLine from \"./line.js\";\nimport clipRejoin from \"./rejoin.js\";\nimport {merge} from \"d3-array\";\n\nvar clipMax = 1e9, clipMin = -clipMax;\n\n// TODO Use d3-polygons polygonContains here for the ring check?\n// TODO Eliminate duplicate buffering in clipBuffer and polygon.push?\n\nexport default function clipRectangle(x0, y0, x1, y1) {\n\n  function visible(x, y) {\n    return x0 <= x && x <= x1 && y0 <= y && y <= y1;\n  }\n\n  function interpolate(from, to, direction, stream) {\n    var a = 0, a1 = 0;\n    if (from == null\n        || (a = corner(from, direction)) !== (a1 = corner(to, direction))\n        || comparePoint(from, to) < 0 ^ direction > 0) {\n      do stream.point(a === 0 || a === 3 ? x0 : x1, a > 1 ? y1 : y0);\n      while ((a = (a + direction + 4) % 4) !== a1);\n    } else {\n      stream.point(to[0], to[1]);\n    }\n  }\n\n  function corner(p, direction) {\n    return abs(p[0] - x0) < epsilon ? direction > 0 ? 0 : 3\n        : abs(p[0] - x1) < epsilon ? direction > 0 ? 2 : 1\n        : abs(p[1] - y0) < epsilon ? direction > 0 ? 1 : 0\n        : direction > 0 ? 3 : 2; // abs(p[1] - y1) < epsilon\n  }\n\n  function compareIntersection(a, b) {\n    return comparePoint(a.x, b.x);\n  }\n\n  function comparePoint(a, b) {\n    var ca = corner(a, 1),\n        cb = corner(b, 1);\n    return ca !== cb ? ca - cb\n        : ca === 0 ? b[1] - a[1]\n        : ca === 1 ? a[0] - b[0]\n        : ca === 2 ? a[1] - b[1]\n        : b[0] - a[0];\n  }\n\n  return function(stream) {\n    var activeStream = stream,\n        bufferStream = clipBuffer(),\n        segments,\n        polygon,\n        ring,\n        x__, y__, v__, // first point\n        x_, y_, v_, // previous point\n        first,\n        clean;\n\n    var clipStream = {\n      point: point,\n      lineStart: lineStart,\n      lineEnd: lineEnd,\n      polygonStart: polygonStart,\n      polygonEnd: polygonEnd\n    };\n\n    function point(x, y) {\n      if (visible(x, y)) activeStream.point(x, y);\n    }\n\n    function polygonInside() {\n      var winding = 0;\n\n      for (var i = 0, n = polygon.length; i < n; ++i) {\n        for (var ring = polygon[i], j = 1, m = ring.length, point = ring[0], a0, a1, b0 = point[0], b1 = point[1]; j < m; ++j) {\n          a0 = b0, a1 = b1, point = ring[j], b0 = point[0], b1 = point[1];\n          if (a1 <= y1) { if (b1 > y1 && (b0 - a0) * (y1 - a1) > (b1 - a1) * (x0 - a0)) ++winding; }\n          else { if (b1 <= y1 && (b0 - a0) * (y1 - a1) < (b1 - a1) * (x0 - a0)) --winding; }\n        }\n      }\n\n      return winding;\n    }\n\n    // Buffer geometry within a polygon and then clip it en masse.\n    function polygonStart() {\n      activeStream = bufferStream, segments = [], polygon = [], clean = true;\n    }\n\n    function polygonEnd() {\n      var startInside = polygonInside(),\n          cleanInside = clean && startInside,\n          visible = (segments = merge(segments)).length;\n      if (cleanInside || visible) {\n        stream.polygonStart();\n        if (cleanInside) {\n          stream.lineStart();\n          interpolate(null, null, 1, stream);\n          stream.lineEnd();\n        }\n        if (visible) {\n          clipRejoin(segments, compareIntersection, startInside, interpolate, stream);\n        }\n        stream.polygonEnd();\n      }\n      activeStream = stream, segments = polygon = ring = null;\n    }\n\n    function lineStart() {\n      clipStream.point = linePoint;\n      if (polygon) polygon.push(ring = []);\n      first = true;\n      v_ = false;\n      x_ = y_ = NaN;\n    }\n\n    // TODO rather than special-case polygons, simply handle them separately.\n    // Ideally, coincident intersection points should be jittered to avoid\n    // clipping issues.\n    function lineEnd() {\n      if (segments) {\n        linePoint(x__, y__);\n        if (v__ && v_) bufferStream.rejoin();\n        segments.push(bufferStream.result());\n      }\n      clipStream.point = point;\n      if (v_) activeStream.lineEnd();\n    }\n\n    function linePoint(x, y) {\n      var v = visible(x, y);\n      if (polygon) ring.push([x, y]);\n      if (first) {\n        x__ = x, y__ = y, v__ = v;\n        first = false;\n        if (v) {\n          activeStream.lineStart();\n          activeStream.point(x, y);\n        }\n      } else {\n        if (v && v_) activeStream.point(x, y);\n        else {\n          var a = [x_ = Math.max(clipMin, Math.min(clipMax, x_)), y_ = Math.max(clipMin, Math.min(clipMax, y_))],\n              b = [x = Math.max(clipMin, Math.min(clipMax, x)), y = Math.max(clipMin, Math.min(clipMax, y))];\n          if (clipLine(a, b, x0, y0, x1, y1)) {\n            if (!v_) {\n              activeStream.lineStart();\n              activeStream.point(a[0], a[1]);\n            }\n            activeStream.point(b[0], b[1]);\n            if (!v) activeStream.lineEnd();\n            clean = false;\n          } else if (v) {\n            activeStream.lineStart();\n            activeStream.point(x, y);\n            clean = false;\n          }\n        }\n      }\n      x_ = x, y_ = y, v_ = v;\n    }\n\n    return clipStream;\n  };\n}\n", "import {range} from \"d3-array\";\nimport {abs, ceil, epsilon} from \"./math.js\";\n\nfunction graticuleX(y0, y1, dy) {\n  var y = range(y0, y1 - epsilon, dy).concat(y1);\n  return function(x) { return y.map(function(y) { return [x, y]; }); };\n}\n\nfunction graticuleY(x0, x1, dx) {\n  var x = range(x0, x1 - epsilon, dx).concat(x1);\n  return function(y) { return x.map(function(x) { return [x, y]; }); };\n}\n\nexport default function graticule() {\n  var x1, x0, X1, X0,\n      y1, y0, Y1, Y0,\n      dx = 10, dy = dx, DX = 90, DY = 360,\n      x, y, X, Y,\n      precision = 2.5;\n\n  function graticule() {\n    return {type: \"MultiLineString\", coordinates: lines()};\n  }\n\n  function lines() {\n    return range(ceil(X0 / DX) * DX, X1, DX).map(X)\n        .concat(range(ceil(Y0 / DY) * DY, Y1, DY).map(Y))\n        .concat(range(ceil(x0 / dx) * dx, x1, dx).filter(function(x) { return abs(x % DX) > epsilon; }).map(x))\n        .concat(range(ceil(y0 / dy) * dy, y1, dy).filter(function(y) { return abs(y % DY) > epsilon; }).map(y));\n  }\n\n  graticule.lines = function() {\n    return lines().map(function(coordinates) { return {type: \"LineString\", coordinates: coordinates}; });\n  };\n\n  graticule.outline = function() {\n    return {\n      type: \"Polygon\",\n      coordinates: [\n        X(X0).concat(\n        Y(Y1).slice(1),\n        X(X1).reverse().slice(1),\n        Y(Y0).reverse().slice(1))\n      ]\n    };\n  };\n\n  graticule.extent = function(_) {\n    if (!arguments.length) return graticule.extentMinor();\n    return graticule.extentMajor(_).extentMinor(_);\n  };\n\n  graticule.extentMajor = function(_) {\n    if (!arguments.length) return [[X0, Y0], [X1, Y1]];\n    X0 = +_[0][0], X1 = +_[1][0];\n    Y0 = +_[0][1], Y1 = +_[1][1];\n    if (X0 > X1) _ = X0, X0 = X1, X1 = _;\n    if (Y0 > Y1) _ = Y0, Y0 = Y1, Y1 = _;\n    return graticule.precision(precision);\n  };\n\n  graticule.extentMinor = function(_) {\n    if (!arguments.length) return [[x0, y0], [x1, y1]];\n    x0 = +_[0][0], x1 = +_[1][0];\n    y0 = +_[0][1], y1 = +_[1][1];\n    if (x0 > x1) _ = x0, x0 = x1, x1 = _;\n    if (y0 > y1) _ = y0, y0 = y1, y1 = _;\n    return graticule.precision(precision);\n  };\n\n  graticule.step = function(_) {\n    if (!arguments.length) return graticule.stepMinor();\n    return graticule.stepMajor(_).stepMinor(_);\n  };\n\n  graticule.stepMajor = function(_) {\n    if (!arguments.length) return [DX, DY];\n    DX = +_[0], DY = +_[1];\n    return graticule;\n  };\n\n  graticule.stepMinor = function(_) {\n    if (!arguments.length) return [dx, dy];\n    dx = +_[0], dy = +_[1];\n    return graticule;\n  };\n\n  graticule.precision = function(_) {\n    if (!arguments.length) return precision;\n    precision = +_;\n    x = graticuleX(y0, y1, 90);\n    y = graticuleY(x0, x1, precision);\n    X = graticuleX(Y0, Y1, 90);\n    Y = graticuleY(X0, X1, precision);\n    return graticule;\n  };\n\n  return graticule\n      .extentMajor([[-180, -90 + epsilon], [180, 90 - epsilon]])\n      .extentMinor([[-180, -80 - epsilon], [180, 80 + epsilon]]);\n}\n\nexport function graticule10() {\n  return graticule()();\n}\n", "export default x => x;\n", "import {Adder} from \"d3-array\";\nimport {abs} from \"../math.js\";\nimport noop from \"../noop.js\";\n\nvar areaSum = new Adder(),\n    areaRingSum = new Adder(),\n    x00,\n    y00,\n    x0,\n    y0;\n\nvar areaStream = {\n  point: noop,\n  lineStart: noop,\n  lineEnd: noop,\n  polygonStart: function() {\n    areaStream.lineStart = areaRingStart;\n    areaStream.lineEnd = areaRingEnd;\n  },\n  polygonEnd: function() {\n    areaStream.lineStart = areaStream.lineEnd = areaStream.point = noop;\n    areaSum.add(abs(areaRingSum));\n    areaRingSum = new Adder();\n  },\n  result: function() {\n    var area = areaSum / 2;\n    areaSum = new Adder();\n    return area;\n  }\n};\n\nfunction areaRingStart() {\n  areaStream.point = areaPointFirst;\n}\n\nfunction areaPointFirst(x, y) {\n  areaStream.point = areaPoint;\n  x00 = x0 = x, y00 = y0 = y;\n}\n\nfunction areaPoint(x, y) {\n  areaRingSum.add(y0 * x - x0 * y);\n  x0 = x, y0 = y;\n}\n\nfunction areaRingEnd() {\n  areaPoint(x00, y00);\n}\n\nexport default areaStream;\n", "import noop from \"../noop.js\";\n\nvar x0 = Infinity,\n    y0 = x0,\n    x1 = -x0,\n    y1 = x1;\n\nvar boundsStream = {\n  point: boundsPoint,\n  lineStart: noop,\n  lineEnd: noop,\n  polygonStart: noop,\n  polygonEnd: noop,\n  result: function() {\n    var bounds = [[x0, y0], [x1, y1]];\n    x1 = y1 = -(y0 = x0 = Infinity);\n    return bounds;\n  }\n};\n\nfunction boundsPoint(x, y) {\n  if (x < x0) x0 = x;\n  if (x > x1) x1 = x;\n  if (y < y0) y0 = y;\n  if (y > y1) y1 = y;\n}\n\nexport default boundsStream;\n", "import {sqrt} from \"../math.js\";\n\n// TODO Enforce positive area for exterior, negative area for interior?\n\nvar X0 = 0,\n    Y0 = 0,\n    Z0 = 0,\n    X1 = 0,\n    Y1 = 0,\n    Z1 = 0,\n    X2 = 0,\n    Y2 = 0,\n    Z2 = 0,\n    x00,\n    y00,\n    x0,\n    y0;\n\nvar centroidStream = {\n  point: centroidPoint,\n  lineStart: centroidLineStart,\n  lineEnd: centroidLineEnd,\n  polygonStart: function() {\n    centroidStream.lineStart = centroidRingStart;\n    centroidStream.lineEnd = centroidRingEnd;\n  },\n  polygonEnd: function() {\n    centroidStream.point = centroidPoint;\n    centroidStream.lineStart = centroidLineStart;\n    centroidStream.lineEnd = centroidLineEnd;\n  },\n  result: function() {\n    var centroid = Z2 ? [X2 / Z2, Y2 / Z2]\n        : Z1 ? [X1 / Z1, Y1 / Z1]\n        : Z0 ? [X0 / Z0, Y0 / Z0]\n        : [NaN, NaN];\n    X0 = Y0 = Z0 =\n    X1 = Y1 = Z1 =\n    X2 = Y2 = Z2 = 0;\n    return centroid;\n  }\n};\n\nfunction centroidPoint(x, y) {\n  X0 += x;\n  Y0 += y;\n  ++Z0;\n}\n\nfunction centroidLineStart() {\n  centroidStream.point = centroidPointFirstLine;\n}\n\nfunction centroidPointFirstLine(x, y) {\n  centroidStream.point = centroidPointLine;\n  centroidPoint(x0 = x, y0 = y);\n}\n\nfunction centroidPointLine(x, y) {\n  var dx = x - x0, dy = y - y0, z = sqrt(dx * dx + dy * dy);\n  X1 += z * (x0 + x) / 2;\n  Y1 += z * (y0 + y) / 2;\n  Z1 += z;\n  centroidPoint(x0 = x, y0 = y);\n}\n\nfunction centroidLineEnd() {\n  centroidStream.point = centroidPoint;\n}\n\nfunction centroidRingStart() {\n  centroidStream.point = centroidPointFirstRing;\n}\n\nfunction centroidRingEnd() {\n  centroidPointRing(x00, y00);\n}\n\nfunction centroidPointFirstRing(x, y) {\n  centroidStream.point = centroidPointRing;\n  centroidPoint(x00 = x0 = x, y00 = y0 = y);\n}\n\nfunction centroidPointRing(x, y) {\n  var dx = x - x0,\n      dy = y - y0,\n      z = sqrt(dx * dx + dy * dy);\n\n  X1 += z * (x0 + x) / 2;\n  Y1 += z * (y0 + y) / 2;\n  Z1 += z;\n\n  z = y0 * x - x0 * y;\n  X2 += z * (x0 + x);\n  Y2 += z * (y0 + y);\n  Z2 += z * 3;\n  centroidPoint(x0 = x, y0 = y);\n}\n\nexport default centroidStream;\n", "import {tau} from \"../math.js\";\nimport noop from \"../noop.js\";\n\nexport default function PathContext(context) {\n  this._context = context;\n}\n\nPathContext.prototype = {\n  _radius: 4.5,\n  pointRadius: function(_) {\n    return this._radius = _, this;\n  },\n  polygonStart: function() {\n    this._line = 0;\n  },\n  polygonEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line === 0) this._context.closePath();\n    this._point = NaN;\n  },\n  point: function(x, y) {\n    switch (this._point) {\n      case 0: {\n        this._context.moveTo(x, y);\n        this._point = 1;\n        break;\n      }\n      case 1: {\n        this._context.lineTo(x, y);\n        break;\n      }\n      default: {\n        this._context.moveTo(x + this._radius, y);\n        this._context.arc(x, y, this._radius, 0, tau);\n        break;\n      }\n    }\n  },\n  result: noop\n};\n", "import {Adder} from \"d3-array\";\nimport {sqrt} from \"../math.js\";\nimport noop from \"../noop.js\";\n\nvar lengthSum = new Adder(),\n    lengthRing,\n    x00,\n    y00,\n    x0,\n    y0;\n\nvar lengthStream = {\n  point: noop,\n  lineStart: function() {\n    lengthStream.point = lengthPointFirst;\n  },\n  lineEnd: function() {\n    if (lengthRing) lengthPoint(x00, y00);\n    lengthStream.point = noop;\n  },\n  polygonStart: function() {\n    lengthRing = true;\n  },\n  polygonEnd: function() {\n    lengthRing = null;\n  },\n  result: function() {\n    var length = +lengthSum;\n    lengthSum = new Adder();\n    return length;\n  }\n};\n\nfunction lengthPointFirst(x, y) {\n  lengthStream.point = lengthPoint;\n  x00 = x0 = x, y00 = y0 = y;\n}\n\nfunction lengthPoint(x, y) {\n  x0 -= x, y0 -= y;\n  lengthSum.add(sqrt(x0 * x0 + y0 * y0));\n  x0 = x, y0 = y;\n}\n\nexport default lengthStream;\n", "// Simple caching for constant-radius points.\nlet cacheDigits, cacheAppend, cacheRadius, cacheCircle;\n\nexport default class PathString {\n  constructor(digits) {\n    this._append = digits == null ? append : appendRound(digits);\n    this._radius = 4.5;\n    this._ = \"\";\n  }\n  pointRadius(_) {\n    this._radius = +_;\n    return this;\n  }\n  polygonStart() {\n    this._line = 0;\n  }\n  polygonEnd() {\n    this._line = NaN;\n  }\n  lineStart() {\n    this._point = 0;\n  }\n  lineEnd() {\n    if (this._line === 0) this._ += \"Z\";\n    this._point = NaN;\n  }\n  point(x, y) {\n    switch (this._point) {\n      case 0: {\n        this._append`M${x},${y}`;\n        this._point = 1;\n        break;\n      }\n      case 1: {\n        this._append`L${x},${y}`;\n        break;\n      }\n      default: {\n        this._append`M${x},${y}`;\n        if (this._radius !== cacheRadius || this._append !== cacheAppend) {\n          const r = this._radius;\n          const s = this._;\n          this._ = \"\"; // stash the old string so we can cache the circle path fragment\n          this._append`m0,${r}a${r},${r} 0 1,1 0,${-2 * r}a${r},${r} 0 1,1 0,${2 * r}z`;\n          cacheRadius = r;\n          cacheAppend = this._append;\n          cacheCircle = this._;\n          this._ = s;\n        }\n        this._ += cacheCircle;\n        break;\n      }\n    }\n  }\n  result() {\n    const result = this._;\n    this._ = \"\";\n    return result.length ? result : null;\n  }\n}\n\nfunction append(strings) {\n  let i = 1;\n  this._ += strings[0];\n  for (const j = strings.length; i < j; ++i) {\n    this._ += arguments[i] + strings[i];\n  }\n}\n\nfunction appendRound(digits) {\n  const d = Math.floor(digits);\n  if (!(d >= 0)) throw new RangeError(`invalid digits: ${digits}`);\n  if (d > 15) return append;\n  if (d !== cacheDigits) {\n    const k = 10 ** d;\n    cacheDigits = d;\n    cacheAppend = function append(strings) {\n      let i = 1;\n      this._ += strings[0];\n      for (const j = strings.length; i < j; ++i) {\n        this._ += Math.round(arguments[i] * k) / k + strings[i];\n      }\n    };\n  }\n  return cacheAppend;\n}\n", "import identity from \"../identity.js\";\nimport stream from \"../stream.js\";\nimport pathArea from \"./area.js\";\nimport pathBounds from \"./bounds.js\";\nimport pathCentroid from \"./centroid.js\";\nimport PathContext from \"./context.js\";\nimport pathMeasure from \"./measure.js\";\nimport PathString from \"./string.js\";\n\nexport default function(projection, context) {\n  let digits = 3,\n      pointRadius = 4.5,\n      projectionStream,\n      contextStream;\n\n  function path(object) {\n    if (object) {\n      if (typeof pointRadius === \"function\") contextStream.pointRadius(+pointRadius.apply(this, arguments));\n      stream(object, projectionStream(contextStream));\n    }\n    return contextStream.result();\n  }\n\n  path.area = function(object) {\n    stream(object, projectionStream(pathArea));\n    return pathArea.result();\n  };\n\n  path.measure = function(object) {\n    stream(object, projectionStream(pathMeasure));\n    return pathMeasure.result();\n  };\n\n  path.bounds = function(object) {\n    stream(object, projectionStream(pathBounds));\n    return pathBounds.result();\n  };\n\n  path.centroid = function(object) {\n    stream(object, projectionStream(pathCentroid));\n    return pathCentroid.result();\n  };\n\n  path.projection = function(_) {\n    if (!arguments.length) return projection;\n    projectionStream = _ == null ? (projection = null, identity) : (projection = _).stream;\n    return path;\n  };\n\n  path.context = function(_) {\n    if (!arguments.length) return context;\n    contextStream = _ == null ? (context = null, new PathString(digits)) : new PathContext(context = _);\n    if (typeof pointRadius !== \"function\") contextStream.pointRadius(pointRadius);\n    return path;\n  };\n\n  path.pointRadius = function(_) {\n    if (!arguments.length) return pointRadius;\n    pointRadius = typeof _ === \"function\" ? _ : (contextStream.pointRadius(+_), +_);\n    return path;\n  };\n\n  path.digits = function(_) {\n    if (!arguments.length) return digits;\n    if (_ == null) digits = null;\n    else {\n      const d = Math.floor(_);\n      if (!(d >= 0)) throw new RangeError(`invalid digits: ${_}`);\n      digits = d;\n    }\n    if (context === null) contextStream = new PathString(digits);\n    return path;\n  };\n\n  return path.projection(projection).digits(digits).context(context);\n}\n", "export default function(methods) {\n  return {\n    stream: transformer(methods)\n  };\n}\n\nexport function transformer(methods) {\n  return function(stream) {\n    var s = new TransformStream;\n    for (var key in methods) s[key] = methods[key];\n    s.stream = stream;\n    return s;\n  };\n}\n\nfunction TransformStream() {}\n\nTransformStream.prototype = {\n  constructor: TransformStream,\n  point: function(x, y) { this.stream.point(x, y); },\n  sphere: function() { this.stream.sphere(); },\n  lineStart: function() { this.stream.lineStart(); },\n  lineEnd: function() { this.stream.lineEnd(); },\n  polygonStart: function() { this.stream.polygonStart(); },\n  polygonEnd: function() { this.stream.polygonEnd(); }\n};\n", "import {default as geoStream} from \"../stream.js\";\nimport boundsStream from \"../path/bounds.js\";\n\nfunction fit(projection, fitBounds, object) {\n  var clip = projection.clipExtent && projection.clipExtent();\n  projection.scale(150).translate([0, 0]);\n  if (clip != null) projection.clipExtent(null);\n  geoStream(object, projection.stream(boundsStream));\n  fitBounds(boundsStream.result());\n  if (clip != null) projection.clipExtent(clip);\n  return projection;\n}\n\nexport function fitExtent(projection, extent, object) {\n  return fit(projection, function(b) {\n    var w = extent[1][0] - extent[0][0],\n        h = extent[1][1] - extent[0][1],\n        k = Math.min(w / (b[1][0] - b[0][0]), h / (b[1][1] - b[0][1])),\n        x = +extent[0][0] + (w - k * (b[1][0] + b[0][0])) / 2,\n        y = +extent[0][1] + (h - k * (b[1][1] + b[0][1])) / 2;\n    projection.scale(150 * k).translate([x, y]);\n  }, object);\n}\n\nexport function fitSize(projection, size, object) {\n  return fitExtent(projection, [[0, 0], size], object);\n}\n\nexport function fitWidth(projection, width, object) {\n  return fit(projection, function(b) {\n    var w = +width,\n        k = w / (b[1][0] - b[0][0]),\n        x = (w - k * (b[1][0] + b[0][0])) / 2,\n        y = -k * b[0][1];\n    projection.scale(150 * k).translate([x, y]);\n  }, object);\n}\n\nexport function fitHeight(projection, height, object) {\n  return fit(projection, function(b) {\n    var h = +height,\n        k = h / (b[1][1] - b[0][1]),\n        x = -k * b[0][0],\n        y = (h - k * (b[1][1] + b[0][1])) / 2;\n    projection.scale(150 * k).translate([x, y]);\n  }, object);\n}\n", "import {cartesian} from \"../cartesian.js\";\nimport {abs, asin, atan2, cos, epsilon, radians, sqrt} from \"../math.js\";\nimport {transformer} from \"../transform.js\";\n\nvar maxDepth = 16, // maximum depth of subdivision\n    cosMinDistance = cos(30 * radians); // cos(minimum angular distance)\n\nexport default function(project, delta2) {\n  return +delta2 ? resample(project, delta2) : resampleNone(project);\n}\n\nfunction resampleNone(project) {\n  return transformer({\n    point: function(x, y) {\n      x = project(x, y);\n      this.stream.point(x[0], x[1]);\n    }\n  });\n}\n\nfunction resample(project, delta2) {\n\n  function resampleLineTo(x0, y0, lambda0, a0, b0, c0, x1, y1, lambda1, a1, b1, c1, depth, stream) {\n    var dx = x1 - x0,\n        dy = y1 - y0,\n        d2 = dx * dx + dy * dy;\n    if (d2 > 4 * delta2 && depth--) {\n      var a = a0 + a1,\n          b = b0 + b1,\n          c = c0 + c1,\n          m = sqrt(a * a + b * b + c * c),\n          phi2 = asin(c /= m),\n          lambda2 = abs(abs(c) - 1) < epsilon || abs(lambda0 - lambda1) < epsilon ? (lambda0 + lambda1) / 2 : atan2(b, a),\n          p = project(lambda2, phi2),\n          x2 = p[0],\n          y2 = p[1],\n          dx2 = x2 - x0,\n          dy2 = y2 - y0,\n          dz = dy * dx2 - dx * dy2;\n      if (dz * dz / d2 > delta2 // perpendicular projected distance\n          || abs((dx * dx2 + dy * dy2) / d2 - 0.5) > 0.3 // midpoint close to an end\n          || a0 * a1 + b0 * b1 + c0 * c1 < cosMinDistance) { // angular distance\n        resampleLineTo(x0, y0, lambda0, a0, b0, c0, x2, y2, lambda2, a /= m, b /= m, c, depth, stream);\n        stream.point(x2, y2);\n        resampleLineTo(x2, y2, lambda2, a, b, c, x1, y1, lambda1, a1, b1, c1, depth, stream);\n      }\n    }\n  }\n  return function(stream) {\n    var lambda00, x00, y00, a00, b00, c00, // first point\n        lambda0, x0, y0, a0, b0, c0; // previous point\n\n    var resampleStream = {\n      point: point,\n      lineStart: lineStart,\n      lineEnd: lineEnd,\n      polygonStart: function() { stream.polygonStart(); resampleStream.lineStart = ringStart; },\n      polygonEnd: function() { stream.polygonEnd(); resampleStream.lineStart = lineStart; }\n    };\n\n    function point(x, y) {\n      x = project(x, y);\n      stream.point(x[0], x[1]);\n    }\n\n    function lineStart() {\n      x0 = NaN;\n      resampleStream.point = linePoint;\n      stream.lineStart();\n    }\n\n    function linePoint(lambda, phi) {\n      var c = cartesian([lambda, phi]), p = project(lambda, phi);\n      resampleLineTo(x0, y0, lambda0, a0, b0, c0, x0 = p[0], y0 = p[1], lambda0 = lambda, a0 = c[0], b0 = c[1], c0 = c[2], maxDepth, stream);\n      stream.point(x0, y0);\n    }\n\n    function lineEnd() {\n      resampleStream.point = point;\n      stream.lineEnd();\n    }\n\n    function ringStart() {\n      lineStart();\n      resampleStream.point = ringPoint;\n      resampleStream.lineEnd = ringEnd;\n    }\n\n    function ringPoint(lambda, phi) {\n      linePoint(lambda00 = lambda, phi), x00 = x0, y00 = y0, a00 = a0, b00 = b0, c00 = c0;\n      resampleStream.point = linePoint;\n    }\n\n    function ringEnd() {\n      resampleLineTo(x0, y0, lambda0, a0, b0, c0, x00, y00, lambda00, a00, b00, c00, maxDepth, stream);\n      resampleStream.lineEnd = lineEnd;\n      lineEnd();\n    }\n\n    return resampleStream;\n  };\n}\n", "import clipAntimeridian from \"../clip/antimeridian.js\";\nimport clipCircle from \"../clip/circle.js\";\nimport clipRectangle from \"../clip/rectangle.js\";\nimport compose from \"../compose.js\";\nimport identity from \"../identity.js\";\nimport {cos, degrees, radians, sin, sqrt} from \"../math.js\";\nimport {rotateRadians} from \"../rotation.js\";\nimport {transformer} from \"../transform.js\";\nimport {fitExtent, fitSize, fitWidth, fitHeight} from \"./fit.js\";\nimport resample from \"./resample.js\";\n\nvar transformRadians = transformer({\n  point: function(x, y) {\n    this.stream.point(x * radians, y * radians);\n  }\n});\n\nfunction transformRotate(rotate) {\n  return transformer({\n    point: function(x, y) {\n      var r = rotate(x, y);\n      return this.stream.point(r[0], r[1]);\n    }\n  });\n}\n\nfunction scaleTranslate(k, dx, dy, sx, sy) {\n  function transform(x, y) {\n    x *= sx; y *= sy;\n    return [dx + k * x, dy - k * y];\n  }\n  transform.invert = function(x, y) {\n    return [(x - dx) / k * sx, (dy - y) / k * sy];\n  };\n  return transform;\n}\n\nfunction scaleTranslateRotate(k, dx, dy, sx, sy, alpha) {\n  if (!alpha) return scaleTranslate(k, dx, dy, sx, sy);\n  var cosAlpha = cos(alpha),\n      sinAlpha = sin(alpha),\n      a = cosAlpha * k,\n      b = sinAlpha * k,\n      ai = cosAlpha / k,\n      bi = sinAlpha / k,\n      ci = (sinAlpha * dy - cosAlpha * dx) / k,\n      fi = (sinAlpha * dx + cosAlpha * dy) / k;\n  function transform(x, y) {\n    x *= sx; y *= sy;\n    return [a * x - b * y + dx, dy - b * x - a * y];\n  }\n  transform.invert = function(x, y) {\n    return [sx * (ai * x - bi * y + ci), sy * (fi - bi * x - ai * y)];\n  };\n  return transform;\n}\n\nexport default function projection(project) {\n  return projectionMutator(function() { return project; })();\n}\n\nexport function projectionMutator(projectAt) {\n  var project,\n      k = 150, // scale\n      x = 480, y = 250, // translate\n      lambda = 0, phi = 0, // center\n      deltaLambda = 0, deltaPhi = 0, deltaGamma = 0, rotate, // pre-rotate\n      alpha = 0, // post-rotate angle\n      sx = 1, // reflectX\n      sy = 1, // reflectX\n      theta = null, preclip = clipAntimeridian, // pre-clip angle\n      x0 = null, y0, x1, y1, postclip = identity, // post-clip extent\n      delta2 = 0.5, // precision\n      projectResample,\n      projectTransform,\n      projectRotateTransform,\n      cache,\n      cacheStream;\n\n  function projection(point) {\n    return projectRotateTransform(point[0] * radians, point[1] * radians);\n  }\n\n  function invert(point) {\n    point = projectRotateTransform.invert(point[0], point[1]);\n    return point && [point[0] * degrees, point[1] * degrees];\n  }\n\n  projection.stream = function(stream) {\n    return cache && cacheStream === stream ? cache : cache = transformRadians(transformRotate(rotate)(preclip(projectResample(postclip(cacheStream = stream)))));\n  };\n\n  projection.preclip = function(_) {\n    return arguments.length ? (preclip = _, theta = undefined, reset()) : preclip;\n  };\n\n  projection.postclip = function(_) {\n    return arguments.length ? (postclip = _, x0 = y0 = x1 = y1 = null, reset()) : postclip;\n  };\n\n  projection.clipAngle = function(_) {\n    return arguments.length ? (preclip = +_ ? clipCircle(theta = _ * radians) : (theta = null, clipAntimeridian), reset()) : theta * degrees;\n  };\n\n  projection.clipExtent = function(_) {\n    return arguments.length ? (postclip = _ == null ? (x0 = y0 = x1 = y1 = null, identity) : clipRectangle(x0 = +_[0][0], y0 = +_[0][1], x1 = +_[1][0], y1 = +_[1][1]), reset()) : x0 == null ? null : [[x0, y0], [x1, y1]];\n  };\n\n  projection.scale = function(_) {\n    return arguments.length ? (k = +_, recenter()) : k;\n  };\n\n  projection.translate = function(_) {\n    return arguments.length ? (x = +_[0], y = +_[1], recenter()) : [x, y];\n  };\n\n  projection.center = function(_) {\n    return arguments.length ? (lambda = _[0] % 360 * radians, phi = _[1] % 360 * radians, recenter()) : [lambda * degrees, phi * degrees];\n  };\n\n  projection.rotate = function(_) {\n    return arguments.length ? (deltaLambda = _[0] % 360 * radians, deltaPhi = _[1] % 360 * radians, deltaGamma = _.length > 2 ? _[2] % 360 * radians : 0, recenter()) : [deltaLambda * degrees, deltaPhi * degrees, deltaGamma * degrees];\n  };\n\n  projection.angle = function(_) {\n    return arguments.length ? (alpha = _ % 360 * radians, recenter()) : alpha * degrees;\n  };\n\n  projection.reflectX = function(_) {\n    return arguments.length ? (sx = _ ? -1 : 1, recenter()) : sx < 0;\n  };\n\n  projection.reflectY = function(_) {\n    return arguments.length ? (sy = _ ? -1 : 1, recenter()) : sy < 0;\n  };\n\n  projection.precision = function(_) {\n    return arguments.length ? (projectResample = resample(projectTransform, delta2 = _ * _), reset()) : sqrt(delta2);\n  };\n\n  projection.fitExtent = function(extent, object) {\n    return fitExtent(projection, extent, object);\n  };\n\n  projection.fitSize = function(size, object) {\n    return fitSize(projection, size, object);\n  };\n\n  projection.fitWidth = function(width, object) {\n    return fitWidth(projection, width, object);\n  };\n\n  projection.fitHeight = function(height, object) {\n    return fitHeight(projection, height, object);\n  };\n\n  function recenter() {\n    var center = scaleTranslateRotate(k, 0, 0, sx, sy, alpha).apply(null, project(lambda, phi)),\n        transform = scaleTranslateRotate(k, x - center[0], y - center[1], sx, sy, alpha);\n    rotate = rotateRadians(deltaLambda, deltaPhi, deltaGamma);\n    projectTransform = compose(project, transform);\n    projectRotateTransform = compose(rotate, projectTransform);\n    projectResample = resample(projectTransform, delta2);\n    return reset();\n  }\n\n  function reset() {\n    cache = cacheStream = null;\n    return projection;\n  }\n\n  return function() {\n    project = projectAt.apply(this, arguments);\n    projection.invert = project.invert && invert;\n    return recenter();\n  };\n}\n", "import {degrees, pi, radians} from \"../math.js\";\nimport {projectionMutator} from \"./index.js\";\n\nexport function conicProjection(projectAt) {\n  var phi0 = 0,\n      phi1 = pi / 3,\n      m = projectionMutator(projectAt),\n      p = m(phi0, phi1);\n\n  p.parallels = function(_) {\n    return arguments.length ? m(phi0 = _[0] * radians, phi1 = _[1] * radians) : [phi0 * degrees, phi1 * degrees];\n  };\n\n  return p;\n}\n", "import {asin, cos, sin} from \"../math.js\";\n\nexport function cylindricalEqualAreaRaw(phi0) {\n  var cosPhi0 = cos(phi0);\n\n  function forward(lambda, phi) {\n    return [lambda * cosPhi0, sin(phi) / cosPhi0];\n  }\n\n  forward.invert = function(x, y) {\n    return [x / cosPhi0, asin(y * cosPhi0)];\n  };\n\n  return forward;\n}\n", "import {abs, asin, atan2, cos, epsilon, pi, sign, sin, sqrt} from \"../math.js\";\nimport {conicProjection} from \"./conic.js\";\nimport {cylindricalEqualAreaRaw} from \"./cylindricalEqualArea.js\";\n\nexport function conicEqualAreaRaw(y0, y1) {\n  var sy0 = sin(y0), n = (sy0 + sin(y1)) / 2;\n\n  // Are the parallels symmetrical around the Equator?\n  if (abs(n) < epsilon) return cylindricalEqualAreaRaw(y0);\n\n  var c = 1 + sy0 * (2 * n - sy0), r0 = sqrt(c) / n;\n\n  function project(x, y) {\n    var r = sqrt(c - 2 * n * sin(y)) / n;\n    return [r * sin(x *= n), r0 - r * cos(x)];\n  }\n\n  project.invert = function(x, y) {\n    var r0y = r0 - y,\n        l = atan2(x, abs(r0y)) * sign(r0y);\n    if (r0y * n < 0)\n      l -= pi * sign(x) * sign(r0y);\n    return [l / n, asin((c - (x * x + r0y * r0y) * n * n) / (2 * n))];\n  };\n\n  return project;\n}\n\nexport default function() {\n  return conicProjection(conicEqualAreaRaw)\n      .scale(155.424)\n      .center([0, 33.6442]);\n}\n", "import conicEqualArea from \"./conicEqualArea.js\";\n\nexport default function() {\n  return conicEqualArea()\n      .parallels([29.5, 45.5])\n      .scale(1070)\n      .translate([480, 250])\n      .rotate([96, 0])\n      .center([-0.6, 38.7]);\n}\n", "import {epsilon} from \"../math.js\";\nimport albers from \"./albers.js\";\nimport conicEqualArea from \"./conicEqualArea.js\";\nimport {fitExtent, fitSize, fitWidth, fitHeight} from \"./fit.js\";\n\n// The projections must have mutually exclusive clip regions on the sphere,\n// as this will avoid emitting interleaving lines and polygons.\nfunction multiplex(streams) {\n  var n = streams.length;\n  return {\n    point: function(x, y) { var i = -1; while (++i < n) streams[i].point(x, y); },\n    sphere: function() { var i = -1; while (++i < n) streams[i].sphere(); },\n    lineStart: function() { var i = -1; while (++i < n) streams[i].lineStart(); },\n    lineEnd: function() { var i = -1; while (++i < n) streams[i].lineEnd(); },\n    polygonStart: function() { var i = -1; while (++i < n) streams[i].polygonStart(); },\n    polygonEnd: function() { var i = -1; while (++i < n) streams[i].polygonEnd(); }\n  };\n}\n\n// A composite projection for the United States, configured by default for\n// 960500. The projection also works quite well at 960600 if you change the\n// scale to 1285 and adjust the translate accordingly. The set of standard\n// parallels for each region comes from USGS, which is published here:\n// http://egsc.usgs.gov/isb/pubs/MapProjections/projections.html#albers\nexport default function() {\n  var cache,\n      cacheStream,\n      lower48 = albers(), lower48Point,\n      alaska = conicEqualArea().rotate([154, 0]).center([-2, 58.5]).parallels([55, 65]), alaskaPoint, // EPSG:3338\n      hawaii = conicEqualArea().rotate([157, 0]).center([-3, 19.9]).parallels([8, 18]), hawaiiPoint, // ESRI:102007\n      point, pointStream = {point: function(x, y) { point = [x, y]; }};\n\n  function albersUsa(coordinates) {\n    var x = coordinates[0], y = coordinates[1];\n    return point = null,\n        (lower48Point.point(x, y), point)\n        || (alaskaPoint.point(x, y), point)\n        || (hawaiiPoint.point(x, y), point);\n  }\n\n  albersUsa.invert = function(coordinates) {\n    var k = lower48.scale(),\n        t = lower48.translate(),\n        x = (coordinates[0] - t[0]) / k,\n        y = (coordinates[1] - t[1]) / k;\n    return (y >= 0.120 && y < 0.234 && x >= -0.425 && x < -0.214 ? alaska\n        : y >= 0.166 && y < 0.234 && x >= -0.214 && x < -0.115 ? hawaii\n        : lower48).invert(coordinates);\n  };\n\n  albersUsa.stream = function(stream) {\n    return cache && cacheStream === stream ? cache : cache = multiplex([lower48.stream(cacheStream = stream), alaska.stream(stream), hawaii.stream(stream)]);\n  };\n\n  albersUsa.precision = function(_) {\n    if (!arguments.length) return lower48.precision();\n    lower48.precision(_), alaska.precision(_), hawaii.precision(_);\n    return reset();\n  };\n\n  albersUsa.scale = function(_) {\n    if (!arguments.length) return lower48.scale();\n    lower48.scale(_), alaska.scale(_ * 0.35), hawaii.scale(_);\n    return albersUsa.translate(lower48.translate());\n  };\n\n  albersUsa.translate = function(_) {\n    if (!arguments.length) return lower48.translate();\n    var k = lower48.scale(), x = +_[0], y = +_[1];\n\n    lower48Point = lower48\n        .translate(_)\n        .clipExtent([[x - 0.455 * k, y - 0.238 * k], [x + 0.455 * k, y + 0.238 * k]])\n        .stream(pointStream);\n\n    alaskaPoint = alaska\n        .translate([x - 0.307 * k, y + 0.201 * k])\n        .clipExtent([[x - 0.425 * k + epsilon, y + 0.120 * k + epsilon], [x - 0.214 * k - epsilon, y + 0.234 * k - epsilon]])\n        .stream(pointStream);\n\n    hawaiiPoint = hawaii\n        .translate([x - 0.205 * k, y + 0.212 * k])\n        .clipExtent([[x - 0.214 * k + epsilon, y + 0.166 * k + epsilon], [x - 0.115 * k - epsilon, y + 0.234 * k - epsilon]])\n        .stream(pointStream);\n\n    return reset();\n  };\n\n  albersUsa.fitExtent = function(extent, object) {\n    return fitExtent(albersUsa, extent, object);\n  };\n\n  albersUsa.fitSize = function(size, object) {\n    return fitSize(albersUsa, size, object);\n  };\n\n  albersUsa.fitWidth = function(width, object) {\n    return fitWidth(albersUsa, width, object);\n  };\n\n  albersUsa.fitHeight = function(height, object) {\n    return fitHeight(albersUsa, height, object);\n  };\n\n  function reset() {\n    cache = cacheStream = null;\n    return albersUsa;\n  }\n\n  return albersUsa.scale(1070);\n}\n", "import {asin, atan2, cos, sin, sqrt} from \"../math.js\";\n\nexport function azimuthalRaw(scale) {\n  return function(x, y) {\n    var cx = cos(x),\n        cy = cos(y),\n        k = scale(cx * cy);\n        if (k === Infinity) return [2, 0];\n    return [\n      k * cy * sin(x),\n      k * sin(y)\n    ];\n  }\n}\n\nexport function azimuthalInvert(angle) {\n  return function(x, y) {\n    var z = sqrt(x * x + y * y),\n        c = angle(z),\n        sc = sin(c),\n        cc = cos(c);\n    return [\n      atan2(x * sc, z * cc),\n      asin(z && y * sc / z)\n    ];\n  }\n}\n", "import {asin, sqrt} from \"../math.js\";\nimport {azimuthalRaw, azimuthalInvert} from \"./azimuthal.js\";\nimport projection from \"./index.js\";\n\nexport var azimuthalEqualAreaRaw = azimuthalRaw(function(cxcy) {\n  return sqrt(2 / (1 + cxcy));\n});\n\nazimuthalEqualAreaRaw.invert = azimuthalInvert(function(z) {\n  return 2 * asin(z / 2);\n});\n\nexport default function() {\n  return projection(azimuthalEqualAreaRaw)\n      .scale(124.75)\n      .clipAngle(180 - 1e-3);\n}\n", "import {acos, sin} from \"../math.js\";\nimport {azimuthalRaw, azimuthalInvert} from \"./azimuthal.js\";\nimport projection from \"./index.js\";\n\nexport var azimuthalEquidistantRaw = azimuthalRaw(function(c) {\n  return (c = acos(c)) && c / sin(c);\n});\n\nazimuthalEquidistantRaw.invert = azimuthalInvert(function(z) {\n  return z;\n});\n\nexport default function() {\n  return projection(azimuthalEquidistantRaw)\n      .scale(79.4188)\n      .clipAngle(180 - 1e-3);\n}\n", "import {atan, exp, halfPi, log, pi, tan, tau} from \"../math.js\";\nimport rotation from \"../rotation.js\";\nimport projection from \"./index.js\";\n\nexport function mercatorRaw(lambda, phi) {\n  return [lambda, log(tan((halfPi + phi) / 2))];\n}\n\nmercatorRaw.invert = function(x, y) {\n  return [x, 2 * atan(exp(y)) - halfPi];\n};\n\nexport default function() {\n  return mercatorProjection(mercatorRaw)\n      .scale(961 / tau);\n}\n\nexport function mercatorProjection(project) {\n  var m = projection(project),\n      center = m.center,\n      scale = m.scale,\n      translate = m.translate,\n      clipExtent = m.clipExtent,\n      x0 = null, y0, x1, y1; // clip extent\n\n  m.scale = function(_) {\n    return arguments.length ? (scale(_), reclip()) : scale();\n  };\n\n  m.translate = function(_) {\n    return arguments.length ? (translate(_), reclip()) : translate();\n  };\n\n  m.center = function(_) {\n    return arguments.length ? (center(_), reclip()) : center();\n  };\n\n  m.clipExtent = function(_) {\n    return arguments.length ? ((_ == null ? x0 = y0 = x1 = y1 = null : (x0 = +_[0][0], y0 = +_[0][1], x1 = +_[1][0], y1 = +_[1][1])), reclip()) : x0 == null ? null : [[x0, y0], [x1, y1]];\n  };\n\n  function reclip() {\n    var k = pi * scale(),\n        t = m(rotation(m.rotate()).invert([0, 0]));\n    return clipExtent(x0 == null\n        ? [[t[0] - k, t[1] - k], [t[0] + k, t[1] + k]] : project === mercatorRaw\n        ? [[Math.max(t[0] - k, x0), y0], [Math.min(t[0] + k, x1), y1]]\n        : [[x0, Math.max(t[1] - k, y0)], [x1, Math.min(t[1] + k, y1)]]);\n  }\n\n  return reclip();\n}\n", "import {abs, atan, atan2, cos, epsilon, halfPi, log, pi, pow, sign, sin, sqrt, tan} from \"../math.js\";\nimport {conicProjection} from \"./conic.js\";\nimport {mercatorRaw} from \"./mercator.js\";\n\nfunction tany(y) {\n  return tan((halfPi + y) / 2);\n}\n\nexport function conicConformalRaw(y0, y1) {\n  var cy0 = cos(y0),\n      n = y0 === y1 ? sin(y0) : log(cy0 / cos(y1)) / log(tany(y1) / tany(y0)),\n      f = cy0 * pow(tany(y0), n) / n;\n\n  if (!n) return mercatorRaw;\n\n  function project(x, y) {\n    if (f > 0) { if (y < -halfPi + epsilon) y = -halfPi + epsilon; }\n    else { if (y > halfPi - epsilon) y = halfPi - epsilon; }\n    var r = f / pow(tany(y), n);\n    return [r * sin(n * x), f - r * cos(n * x)];\n  }\n\n  project.invert = function(x, y) {\n    var fy = f - y, r = sign(n) * sqrt(x * x + fy * fy),\n      l = atan2(x, abs(fy)) * sign(fy);\n    if (fy * n < 0)\n      l -= pi * sign(x) * sign(fy);\n    return [l / n, 2 * atan(pow(f / r, 1 / n)) - halfPi];\n  };\n\n  return project;\n}\n\nexport default function() {\n  return conicProjection(conicConformalRaw)\n      .scale(109.5)\n      .parallels([30, 30]);\n}\n", "import projection from \"./index.js\";\n\nexport function equirectangularRaw(lambda, phi) {\n  return [lambda, phi];\n}\n\nequirectangularRaw.invert = equirectangularRaw;\n\nexport default function() {\n  return projection(equirectangularRaw)\n      .scale(152.63);\n}\n", "import {abs, atan2, cos, epsilon, pi, sign, sin, sqrt} from \"../math.js\";\nimport {conicProjection} from \"./conic.js\";\nimport {equirectangularRaw} from \"./equirectangular.js\";\n\nexport function conicEquidistantRaw(y0, y1) {\n  var cy0 = cos(y0),\n      n = y0 === y1 ? sin(y0) : (cy0 - cos(y1)) / (y1 - y0),\n      g = cy0 / n + y0;\n\n  if (abs(n) < epsilon) return equirectangularRaw;\n\n  function project(x, y) {\n    var gy = g - y, nx = n * x;\n    return [gy * sin(nx), g - gy * cos(nx)];\n  }\n\n  project.invert = function(x, y) {\n    var gy = g - y,\n        l = atan2(x, abs(gy)) * sign(gy);\n    if (gy * n < 0)\n      l -= pi * sign(x) * sign(gy);\n    return [l / n, g - sign(n) * sqrt(x * x + gy * gy)];\n  };\n\n  return project;\n}\n\nexport default function() {\n  return conicProjection(conicEquidistantRaw)\n      .scale(131.154)\n      .center([0, 13.9389]);\n}\n", "import projection from \"./index.js\";\nimport {abs, asin, cos, epsilon2, sin, sqrt} from \"../math.js\";\n\nvar A1 = 1.340264,\n    A2 = -0.081106,\n    A3 = 0.000893,\n    A4 = 0.003796,\n    M = sqrt(3) / 2,\n    iterations = 12;\n\nexport function equalEarthRaw(lambda, phi) {\n  var l = asin(M * sin(phi)), l2 = l * l, l6 = l2 * l2 * l2;\n  return [\n    lambda * cos(l) / (M * (A1 + 3 * A2 * l2 + l6 * (7 * A3 + 9 * A4 * l2))),\n    l * (A1 + A2 * l2 + l6 * (A3 + A4 * l2))\n  ];\n}\n\nequalEarthRaw.invert = function(x, y) {\n  var l = y, l2 = l * l, l6 = l2 * l2 * l2;\n  for (var i = 0, delta, fy, fpy; i < iterations; ++i) {\n    fy = l * (A1 + A2 * l2 + l6 * (A3 + A4 * l2)) - y;\n    fpy = A1 + 3 * A2 * l2 + l6 * (7 * A3 + 9 * A4 * l2);\n    l -= delta = fy / fpy, l2 = l * l, l6 = l2 * l2 * l2;\n    if (abs(delta) < epsilon2) break;\n  }\n  return [\n    M * x * (A1 + 3 * A2 * l2 + l6 * (7 * A3 + 9 * A4 * l2)) / cos(l),\n    asin(sin(l) / M)\n  ];\n};\n\nexport default function() {\n  return projection(equalEarthRaw)\n      .scale(177.158);\n}\n", "import {atan, cos, sin} from \"../math.js\";\nimport {azimuthalInvert} from \"./azimuthal.js\";\nimport projection from \"./index.js\";\n\nexport function gnomonicRaw(x, y) {\n  var cy = cos(y), k = cos(x) * cy;\n  return [cy * sin(x) / k, sin(y) / k];\n}\n\ngnomonicRaw.invert = azimuthalInvert(atan);\n\nexport default function() {\n  return projection(gnomonicRaw)\n      .scale(144.049)\n      .clipAngle(60);\n}\n", "import clipRectangle from \"../clip/rectangle.js\";\nimport identity from \"../identity.js\";\nimport {transformer} from \"../transform.js\";\nimport {fitExtent, fitSize, fitWidth, fitHeight} from \"./fit.js\";\nimport {cos, degrees, radians, sin} from \"../math.js\";\n\nexport default function() {\n  var k = 1, tx = 0, ty = 0, sx = 1, sy = 1, // scale, translate and reflect\n      alpha = 0, ca, sa, // angle\n      x0 = null, y0, x1, y1, // clip extent\n      kx = 1, ky = 1,\n      transform = transformer({\n        point: function(x, y) {\n          var p = projection([x, y])\n          this.stream.point(p[0], p[1]);\n        }\n      }),\n      postclip = identity,\n      cache,\n      cacheStream;\n\n  function reset() {\n    kx = k * sx;\n    ky = k * sy;\n    cache = cacheStream = null;\n    return projection;\n  }\n\n  function projection (p) {\n    var x = p[0] * kx, y = p[1] * ky;\n    if (alpha) {\n      var t = y * ca - x * sa;\n      x = x * ca + y * sa;\n      y = t;\n    }    \n    return [x + tx, y + ty];\n  }\n  projection.invert = function(p) {\n    var x = p[0] - tx, y = p[1] - ty;\n    if (alpha) {\n      var t = y * ca + x * sa;\n      x = x * ca - y * sa;\n      y = t;\n    }\n    return [x / kx, y / ky];\n  };\n  projection.stream = function(stream) {\n    return cache && cacheStream === stream ? cache : cache = transform(postclip(cacheStream = stream));\n  };\n  projection.postclip = function(_) {\n    return arguments.length ? (postclip = _, x0 = y0 = x1 = y1 = null, reset()) : postclip;\n  };\n  projection.clipExtent = function(_) {\n    return arguments.length ? (postclip = _ == null ? (x0 = y0 = x1 = y1 = null, identity) : clipRectangle(x0 = +_[0][0], y0 = +_[0][1], x1 = +_[1][0], y1 = +_[1][1]), reset()) : x0 == null ? null : [[x0, y0], [x1, y1]];\n  };\n  projection.scale = function(_) {\n    return arguments.length ? (k = +_, reset()) : k;\n  };\n  projection.translate = function(_) {\n    return arguments.length ? (tx = +_[0], ty = +_[1], reset()) : [tx, ty];\n  }\n  projection.angle = function(_) {\n    return arguments.length ? (alpha = _ % 360 * radians, sa = sin(alpha), ca = cos(alpha), reset()) : alpha * degrees;\n  };\n  projection.reflectX = function(_) {\n    return arguments.length ? (sx = _ ? -1 : 1, reset()) : sx < 0;\n  };\n  projection.reflectY = function(_) {\n    return arguments.length ? (sy = _ ? -1 : 1, reset()) : sy < 0;\n  };\n  projection.fitExtent = function(extent, object) {\n    return fitExtent(projection, extent, object);\n  };\n  projection.fitSize = function(size, object) {\n    return fitSize(projection, size, object);\n  };\n  projection.fitWidth = function(width, object) {\n    return fitWidth(projection, width, object);\n  };\n  projection.fitHeight = function(height, object) {\n    return fitHeight(projection, height, object);\n  };\n\n  return projection;\n}\n", "import projection from \"./index.js\";\nimport {abs, epsilon} from \"../math.js\";\n\nexport function naturalEarth1Raw(lambda, phi) {\n  var phi2 = phi * phi, phi4 = phi2 * phi2;\n  return [\n    lambda * (0.8707 - 0.131979 * phi2 + phi4 * (-0.013791 + phi4 * (0.003971 * phi2 - 0.001529 * phi4))),\n    phi * (1.007226 + phi2 * (0.015085 + phi4 * (-0.044475 + 0.028874 * phi2 - 0.005916 * phi4)))\n  ];\n}\n\nnaturalEarth1Raw.invert = function(x, y) {\n  var phi = y, i = 25, delta;\n  do {\n    var phi2 = phi * phi, phi4 = phi2 * phi2;\n    phi -= delta = (phi * (1.007226 + phi2 * (0.015085 + phi4 * (-0.044475 + 0.028874 * phi2 - 0.005916 * phi4))) - y) /\n        (1.007226 + phi2 * (0.015085 * 3 + phi4 * (-0.044475 * 7 + 0.028874 * 9 * phi2 - 0.005916 * 11 * phi4)));\n  } while (abs(delta) > epsilon && --i > 0);\n  return [\n    x / (0.8707 + (phi2 = phi * phi) * (-0.131979 + phi2 * (-0.013791 + phi2 * phi2 * phi2 * (0.003971 - 0.001529 * phi2)))),\n    phi\n  ];\n};\n\nexport default function() {\n  return projection(naturalEarth1Raw)\n      .scale(175.295);\n}\n", "import {asin, cos, epsilon, sin} from \"../math.js\";\nimport {azimuthalInvert} from \"./azimuthal.js\";\nimport projection from \"./index.js\";\n\nexport function orthographicRaw(x, y) {\n  return [cos(y) * sin(x), sin(y)];\n}\n\northographicRaw.invert = azimuthalInvert(asin);\n\nexport default function() {\n  return projection(orthographicRaw)\n      .scale(249.5)\n      .clipAngle(90 + epsilon);\n}\n", "import {atan, cos, sin} from \"../math.js\";\nimport {azimuthalInvert} from \"./azimuthal.js\";\nimport projection from \"./index.js\";\n\nexport function stereographicRaw(x, y) {\n  var cy = cos(y), k = 1 + cos(x) * cy;\n  return [cy * sin(x) / k, sin(y) / k];\n}\n\nstereographicRaw.invert = azimuthalInvert(function(z) {\n  return 2 * atan(z);\n});\n\nexport default function() {\n  return projection(stereographicRaw)\n      .scale(250)\n      .clipAngle(142);\n}\n", "import {atan, exp, halfPi, log, tan} from \"../math.js\";\nimport {mercatorProjection} from \"./mercator.js\";\n\nexport function transverseMercatorRaw(lambda, phi) {\n  return [log(tan((halfPi + phi) / 2)), -lambda];\n}\n\ntransverseMercatorRaw.invert = function(x, y) {\n  return [-y, 2 * atan(exp(x)) - halfPi];\n};\n\nexport default function() {\n  var m = mercatorProjection(transverseMercatorRaw),\n      center = m.center,\n      rotate = m.rotate;\n\n  m.center = function(_) {\n    return arguments.length ? center([-_[1], _[0]]) : (_ = center(), [_[1], -_[0]]);\n  };\n\n  m.rotate = function(_) {\n    return arguments.length ? rotate([_[0], _[1], _.length > 2 ? _[2] + 90 : 90]) : (_ = rotate(), [_[0], _[1], _[2] - 90]);\n  };\n\n  return rotate([0, 0, 90])\n      .scale(159.155);\n}\n", "export {\n  geoAlbersUsa,\n  geoAlbers,\n  geoAzimuthalEqualArea,\n  geoAzimuthalEqualAreaRaw,\n  geoAzimuthalEquidistant,\n  geoAzimuthalEquidistantRaw,\n  geoConicConformal,\n  geoConicConformalRaw,\n  geoConicEqualArea,\n  geoConicEqualAreaRaw,\n  geoConicEquidistant,\n  geoConicEquidistantRaw,\n  geoEqualEarth,\n  geoEqualEarthRaw,\n  geoEquirectangular,\n  geoEquirectangularRaw,\n  geoGnomonic,\n  geoGnomonicRaw,\n  geoIdentity,\n  geoProjection,\n  geoProjectionMutator,\n  geoMercator,\n  geoMercatorRaw,\n  geoNaturalEarth1,\n  geoNaturalEarth1Raw,\n  geoOrthographic,\n  geoOrthographicRaw,\n  geoStereographic,\n  geoStereographicRaw,\n  geoTransverseMercator,\n  geoTransverseMercatorRaw,\n} from '@antv/vendor/d3-geo';\n", "import { Linear } from '@antv/scale';\nimport { upperFirst } from '@antv/util';\nimport { geoPath, geoGraticule10 } from '@antv/vendor/d3-geo';\nimport { maybeTooltip } from '../utils/mark';\nimport { CompositionComponent as CC } from '../runtime';\nimport { GeoViewComposition } from '../spec';\n\nimport * as d3Projection from './d3Projection';\nimport { mergeData } from './utils';\n\n/**\n * Get projection factory from d3-projection.\n */\nfunction normalizeProjection(type: string) {\n  if (typeof type === 'function') return type;\n  const name = `geo${upperFirst(type)}`;\n  const projection = d3Projection[name];\n  if (!projection) throw new Error(`Unknown coordinate: ${type}`);\n  return projection;\n}\n\n/**\n * @see https://github.com/mapbox/geojson-merge/blob/master/index.js\n */\nfunction mergeGeoJSON(gjs) {\n  return {\n    type: 'FeatureCollection',\n    features: gjs.flatMap((gj) => normalizeGeoJSON(gj).features),\n  };\n}\n\nfunction normalizeGeoJSON(gj) {\n  const types = {\n    Point: 'geometry',\n    MultiPoint: 'geometry',\n    LineString: 'geometry',\n    MultiLineString: 'geometry',\n    Polygon: 'geometry',\n    MultiPolygon: 'geometry',\n    GeometryCollection: 'geometry',\n    Feature: 'feature',\n    FeatureCollection: 'featureCollection',\n  };\n  if (!gj || !gj.type) return null;\n  const type = types[gj.type];\n  if (!type) return null;\n  if (type === 'geometry') {\n    return {\n      type: 'FeatureCollection',\n      features: [\n        {\n          type: 'Feature',\n          properties: {},\n          geometry: gj,\n        },\n      ],\n    };\n  } else if (type === 'feature') {\n    return {\n      type: 'FeatureCollection',\n      features: [gj],\n    };\n  } else if (type === 'featureCollection') {\n    return gj;\n  }\n}\n\n/**\n * Specify the options for d3 projection\n * @see https://github.com/d3/d3-geo#projections\n * @todo Specify key each by each.\n */\nfunction setProjectionOptions(projection, options) {\n  for (const [key, value] of Object.entries(options)) {\n    projection[key]?.(value);\n  }\n}\n\nfunction setProjectionSize(projection, nodes, layout, options) {\n  const defaultOutline = () => {\n    const geoNodes = nodes.filter(isGeoPath);\n    // For geoPath with sphere mark, use it as outline.\n    const sphere = geoNodes.find((d) => d.sphere);\n    if (sphere) return { type: 'Sphere' };\n\n    // Merge all GeoJSON as the outline.\n    return mergeGeoJSON(\n      geoNodes.filter((d) => !d.sphere).flatMap((d) => d.data.value),\n    );\n  };\n  const { outline = defaultOutline() } = options;\n  const { size = 'fitExtent' } = options;\n  if (size === 'fitExtent') {\n    return setFitExtent(projection, outline, layout);\n  } else if (size === 'fitWidth') {\n    return setFitWidth(projection, outline, layout);\n  }\n}\n\nfunction setFitExtent(projection, object, layout) {\n  const { x, y, width, height } = layout;\n  projection.fitExtent(\n    [\n      [x, y],\n      [width, height],\n    ],\n    object,\n  );\n}\n\nfunction setFitWidth(projection, object, layout) {\n  const { width, height } = layout;\n  const [[x0, y0], [x1, y1]] = geoPath(\n    projection.fitWidth(width, object),\n  ).bounds(object);\n  const dy = Math.ceil(y1 - y0);\n  const l = Math.min(Math.ceil(x1 - x0), dy);\n  const s = (projection.scale() * (l - 1)) / l;\n  const [tx, ty] = projection.translate();\n  const t = ty + (height - dy) / 2;\n  projection.scale(s).translate([tx, t]).precision(0.2);\n}\n\n/**\n * @todo Remove this.\n */\nfunction normalizeDataSource(node) {\n  const { data } = node;\n  if (Array.isArray(data)) return { ...node, data: { value: data } };\n  const { type } = data;\n  if (type === 'graticule10') {\n    return { ...node, data: { value: [geoGraticule10()] } };\n  } else if (type === 'sphere') {\n    // Sphere is not a standard type of GeoJSON.\n    // Mark this geoPath as sphere geoPath.\n    return { ...node, sphere: true, data: { value: [{ type: 'Sphere' }] } };\n  }\n  return node;\n}\n\nfunction isGeoPath(d) {\n  return d.type === 'geoPath';\n}\n\nexport type GeoViewOptions = Omit<GeoViewComposition, 'type'>;\n\n/**\n * A view with geo coordinate.\n */\nexport const GeoView: CC<GeoViewOptions> = () => {\n  return (options) => {\n    const { children, coordinate: projection = {} } = options;\n    if (!Array.isArray(children)) return [];\n\n    // Get projection factory.\n    const { type = 'equalEarth', ...projectionOptions } = projection;\n    const createProjection = normalizeProjection(type);\n    const nodes = children\n      .map((c) => {\n        return { ...c, data: mergeData(c.data, options.data) };\n      })\n      .map(normalizeDataSource);\n\n    // Set path generator lazily.\n    let path;\n\n    // A custom geo coordinate.\n    function Geo() {\n      return [\n        [\n          'custom',\n          (x, y, width, height) => {\n            // Create and set projection.\n            const visual = createProjection();\n            const layout = { x, y, width, height };\n            setProjectionSize(visual, nodes, layout, projectionOptions);\n            setProjectionOptions(visual, projectionOptions);\n\n            // Create path generator.\n            path = geoPath(visual);\n\n            // Normalize projection and projection.invert,\n            // which normalize projected points.\n            const scaleX = new Linear({\n              domain: [x, x + width],\n            });\n            const scaleY = new Linear({\n              domain: [y, y + height],\n            });\n            const normalize = (point) => {\n              const visualPoint = visual(point);\n              if (!visualPoint) return [null, null];\n              const [vx, vy] = visualPoint;\n              return [scaleX.map(vx), scaleY.map(vy)];\n            };\n            const normalizeInvert = (point) => {\n              if (!point) return null;\n              const [px, py] = point;\n              const visualPoint = [scaleX.invert(px), scaleY.invert(py)];\n              return visual.invert(visualPoint);\n            };\n            return {\n              transform: (point) => normalize(point),\n              untransform: (point) => normalizeInvert(point),\n            };\n          },\n        ],\n      ];\n    }\n\n    function GeoPath(options) {\n      const { style, tooltip = {} } = options;\n      return {\n        ...options,\n        type: 'path',\n        tooltip: maybeTooltip(tooltip, {\n          title: 'id',\n          items: [{ channel: 'color' }],\n        }),\n        style: {\n          ...style,\n          d: (d) => path(d) || [],\n        },\n      };\n    }\n\n    const t = (d) => (isGeoPath(d) ? GeoPath(d) : d);\n\n    return [\n      {\n        ...options,\n        type: 'view',\n        scale: {\n          x: { type: 'identity' },\n          y: { type: 'identity' },\n        },\n        axis: false,\n        coordinate: { type: Geo },\n        children: nodes.flatMap(t),\n      },\n    ];\n  };\n};\n\nGeoView.props = {};\n", "import { ChartEvent } from '../utils/event';\nimport { dataOf } from '../utils/helper';\nimport { maybeRoot } from './utils';\n\n// For extended component\nfunction maybeComponentRoot(node) {\n  return maybeRoot(node, (node) => node.className === 'component');\n}\n\n// For extended shape.\nfunction maybeElementRoot(node) {\n  return maybeRoot(node, (node) => node.className === 'element');\n}\n\n// For extended label.\nfunction maybeLabelRoot(node) {\n  return maybeRoot(node, (node) => node.className === 'label');\n}\n\nfunction bubblesEvent(eventType, view, emitter, predicate = (event) => true) {\n  return (e) => {\n    if (!predicate(e)) return;\n\n    // Emit plot events.\n    emitter.emit(`plot:${eventType}`, e);\n\n    const { target } = e;\n\n    // There is no target for pointerupoutside event if out of canvas.\n    if (!target) return;\n\n    const { className } = target;\n\n    // If target area is plot area, do not emit extra events.\n    if (className === 'plot') return;\n\n    // If target is element or child of element.\n    const elementRoot = maybeElementRoot(target);\n    // If target is component or child of component.\n    const componentRoot = maybeComponentRoot(target);\n    //  If target is babel or child of babel.\n    const babelRoot = maybeLabelRoot(target);\n\n    const root = elementRoot || componentRoot || babelRoot;\n\n    if (!root) return;\n    const { className: elementType, markType } = root;\n    const e1 = {\n      ...e,\n      nativeEvent: true,\n    };\n    if (elementType === 'element') {\n      e1['data'] = { data: dataOf(root, view) };\n      emitter.emit(`element:${eventType}`, e1);\n      emitter.emit(`${markType}:${eventType}`, e1);\n    } else if (elementType === 'label') {\n      //label children [Text2, Rect2, Path2],\n      e1['data'] = { data: root.attributes.datum };\n      emitter.emit(`label:${eventType}`, e1);\n      // Support multiple classNames (e.g., \"axis-label-item g2-axis-label-item\")\n      const classNames = className.split(/\\s+/).filter(Boolean);\n      classNames.forEach((cls) => {\n        emitter.emit(`${cls}:${eventType}`, e1);\n      });\n    } else {\n      emitter.emit(`component:${eventType}`, e1);\n      // Support multiple classNames (e.g., \"axis-tick-item g2-axis-tick-item\")\n      const classNames = className.split(/\\s+/).filter(Boolean);\n      classNames.forEach((cls) => {\n        emitter.emit(`${cls}:${eventType}`, e1);\n      });\n    }\n  };\n}\n\n// @todo Provide more info for event.dataset.\nexport function Event() {\n  return (context, _, emitter) => {\n    const { container, view } = context;\n\n    // Click events.\n    const click = bubblesEvent(\n      ChartEvent.CLICK,\n      view,\n      emitter,\n      (e) => e.detail === 1,\n    );\n    const dblclick = bubblesEvent(\n      ChartEvent.DBLCLICK,\n      view,\n      emitter,\n      (e) => e.detail === 2,\n    );\n\n    // Pointer events.\n    const pointertap = bubblesEvent(ChartEvent.POINTER_TAP, view, emitter);\n    const pointerdown = bubblesEvent(ChartEvent.POINTER_DOWN, view, emitter);\n    const pointerup = bubblesEvent(ChartEvent.POINTER_UP, view, emitter);\n    const pointerover = bubblesEvent(ChartEvent.POINTER_OVER, view, emitter);\n    const pointerout = bubblesEvent(ChartEvent.POINTER_OUT, view, emitter);\n    const pointermove = bubblesEvent(ChartEvent.POINTER_MOVE, view, emitter);\n    const pointerenter = bubblesEvent(ChartEvent.POINTER_ENTER, view, emitter);\n    const pointerleave = bubblesEvent(ChartEvent.POINTER_LEAVE, view, emitter);\n    const pointerupoutside = bubblesEvent(\n      ChartEvent.POINTER_UPOUTSIDE,\n      view,\n      emitter,\n    );\n\n    // Drag and drop events.\n    const dragstart = bubblesEvent(ChartEvent.DRAG_START, view, emitter);\n    const drag = bubblesEvent(ChartEvent.DRAG, view, emitter);\n    const dragend = bubblesEvent(ChartEvent.DRAG_END, view, emitter);\n    const dragenter = bubblesEvent(ChartEvent.DRAG_ENTER, view, emitter);\n    const dragleave = bubblesEvent(ChartEvent.DRAG_LEAVE, view, emitter);\n    const dragover = bubblesEvent(ChartEvent.DRAG_OVER, view, emitter);\n    const drop = bubblesEvent(ChartEvent.DROP, view, emitter);\n\n    // For legacy usage.\n    container.addEventListener('click', click);\n    container.addEventListener('click', dblclick);\n\n    // Recommend events.\n    container.addEventListener('pointertap', pointertap);\n    container.addEventListener('pointerdown', pointerdown);\n    container.addEventListener('pointerup', pointerup);\n    container.addEventListener('pointerover', pointerover);\n    container.addEventListener('pointerout', pointerout);\n    container.addEventListener('pointermove', pointermove);\n    container.addEventListener('pointerenter', pointerenter);\n    container.addEventListener('pointerleave', pointerleave);\n    container.addEventListener('pointerupoutside', pointerupoutside);\n\n    // Plugin events.\n    container.addEventListener('dragstart', dragstart);\n    container.addEventListener('drag', drag);\n    container.addEventListener('dragend', dragend);\n    container.addEventListener('dragenter', dragenter);\n    container.addEventListener('dragleave', dragleave);\n    container.addEventListener('dragover', dragover);\n    container.addEventListener('drop', drop);\n\n    return () => {\n      container.removeEventListener('click', click);\n      container.removeEventListener('click', dblclick);\n\n      container.removeEventListener('pointertap', pointertap);\n      container.removeEventListener('pointerdown', pointerdown);\n      container.removeEventListener('pointerup', pointerup);\n      container.removeEventListener('pointerover', pointerover);\n      container.removeEventListener('pointerout', pointerout);\n      container.removeEventListener('pointermove', pointermove);\n      container.removeEventListener('pointerenter', pointerenter);\n      container.removeEventListener('pointerleave', pointerleave);\n      container.removeEventListener('pointerupoutside', pointerupoutside);\n\n      container.removeEventListener('dragstart', dragstart);\n      container.removeEventListener('drag', drag);\n      container.removeEventListener('dragend', dragend);\n      container.removeEventListener('dragenter', dragenter);\n      container.removeEventListener('dragleave', dragleave);\n      container.removeEventListener('dragover', dragover);\n      container.removeEventListener('drop', drop);\n    };\n  };\n}\n\nEvent.props = {\n  reapplyWhenUpdate: true,\n};\n", "import {\n  AxisLinear,\n  AxisArc,\n  AxisRadar,\n  LegendContinuousBlock,\n  LegendContinuousBlockSize,\n  LegendContinuousSize,\n} from '../component';\nimport { Mark, View } from '../composition';\nimport { LabelShape, BreakShape } from '../shape';\nimport { Event } from '../interaction/event';\n\n// Some private visual components, they are not public to\n// users, only for runtime.\nexport function builtinlib() {\n  return {\n    'component.axisRadar': AxisRadar,\n    'component.axisLinear': AxisLinear,\n    'component.axisArc': AxisArc,\n    'component.legendContinuousBlock': LegendContinuousBlock,\n    'component.legendContinuousBlockSize': LegendContinuousBlockSize,\n    'component.legendContinuousSize': LegendContinuousSize,\n    'interaction.event': Event,\n    'composition.mark': Mark,\n    'composition.view': View,\n    'shape.label.label': LabelShape,\n    'shape.break': BreakShape,\n  } as const;\n}\n", "import { IDocument } from '@antv/g';\nimport { error } from '../utils/helper';\nimport { builtinlib } from '../lib/builtinlib';\nimport { G2ComponentOptions, G2Context, G2Library } from './types/options';\nimport {\n  G2Component,\n  G2ComponentNamespaces,\n  G2ComponentValue,\n} from './types/component';\n\nexport function useLibrary<\n  O extends G2ComponentOptions,\n  C extends G2Component,\n  V extends G2ComponentValue,\n>(\n  namespace: G2ComponentNamespaces,\n  publicLibrary: G2Library,\n): [(options: O, context?) => V, (type: O['type']) => C] {\n  const library = { ...builtinlib(), ...publicLibrary };\n\n  const create = (type: O['type']) => {\n    if (typeof type !== 'string') return type;\n    const key = `${namespace}.${type}`;\n    return library[key] || error(`Unknown Component: ${key}`);\n  };\n\n  const use = (options: O, context?) => {\n    const { type, ...rest } = options;\n    if (!type) error(`Plot type is required!`);\n    const currentLibrary = create(type);\n    return currentLibrary?.(rest, context);\n  };\n\n  return [use, create];\n}\n\nexport function documentOf(library: G2Context): IDocument {\n  const { canvas, group } = library;\n  return (\n    canvas?.document ||\n    group?.ownerDocument ||\n    error(`Cannot find library document`)\n  );\n}\n", "import { Coordinate, Coordinate3D } from '@antv/coord';\nimport { G2View, G2CoordinateOptions, G2Library } from './types/options';\nimport { CoordinateComponent, CoordinateTransform } from './types/component';\nimport { useLibrary } from './library';\nimport { Layout } from './types/common';\n\nexport function createCoordinate(\n  layout: Layout,\n  partialOptions: G2View,\n  library: G2Library,\n): Coordinate {\n  const [useCoordinate] = useLibrary<\n    G2CoordinateOptions,\n    CoordinateComponent,\n    CoordinateTransform\n  >('coordinate', library);\n  const {\n    innerHeight,\n    innerWidth,\n    insetLeft,\n    insetTop,\n    insetRight,\n    insetBottom,\n  } = layout;\n  const { coordinates: partialTransform = [] } = partialOptions;\n  const transform = inferCoordinate(partialTransform);\n\n  const isCartesian3D = transform[0].type === 'cartesian3D';\n  const options = {\n    // @todo Find a better solution.\n    // Store more layout information for component.\n    ...layout,\n    x: insetLeft,\n    y: insetTop,\n    width: innerWidth - insetLeft - insetRight,\n    height: innerHeight - insetBottom - insetTop,\n    transformations: transform.flatMap(useCoordinate),\n  };\n\n  const coordinate = isCartesian3D\n    ? // @ts-ignore\n      new Coordinate3D(options)\n    : new Coordinate(options);\n  return coordinate as Coordinate;\n}\n\nexport function coordinate2Transform(node: G2View, library: G2Library): G2View {\n  // @ts-ignore\n  const { coordinate = {}, coordinates, ...rest } = node;\n\n  // If coordinates are already set, it means that the coordinate has been processed\n  // during the initialization. There is not need to process it during update.\n  if (coordinates) return node;\n\n  const { type, transform = [], ...options } = coordinate;\n  if (!type) return { ...rest, coordinates: transform };\n  const [, createCoordinate] = useLibrary<\n    G2CoordinateOptions,\n    CoordinateComponent,\n    CoordinateTransform\n  >('coordinate', library);\n  const { transform: isTransform = false } = createCoordinate(type).props || {};\n  if (isTransform) {\n    throw new Error(`Unknown coordinate: ${type}.`);\n  }\n  return { ...rest, coordinates: [{ type, ...options }, ...transform] };\n}\n\nexport function coordOf(\n  coordinates: G2CoordinateOptions[],\n  type: string,\n): G2CoordinateOptions[] {\n  return coordinates.filter((d) => d.type === type);\n}\n\n/**\n * todo Duplication is not considered\n */\n\nexport function isPolar(coordinates: G2CoordinateOptions[]) {\n  return coordOf(coordinates, 'polar').length > 0;\n}\n\nexport function isHelix(coordinates: G2CoordinateOptions[]) {\n  return coordOf(coordinates, 'helix').length > 0;\n}\n\n/**\n * todo The number of transposes matters\n */\nexport function isTranspose(coordinates: G2CoordinateOptions[]) {\n  return coordOf(coordinates, 'transpose').length % 2 === 1;\n}\n\nexport function isParallel(coordinates: G2CoordinateOptions[]) {\n  return coordOf(coordinates, 'parallel').length > 0;\n}\n\nexport function isTheta(coordinates: G2CoordinateOptions[]) {\n  return coordOf(coordinates, 'theta').length > 0;\n}\n\nexport function isReflect(coordinates: G2CoordinateOptions[]) {\n  return coordOf(coordinates, 'reflect').length > 0;\n}\n\nexport function isRadial(coordinates: G2CoordinateOptions[]) {\n  return coordOf(coordinates, 'radial').length > 0;\n}\n\nexport function isRadar(coordinates: G2CoordinateOptions[]) {\n  return coordOf(coordinates, 'radar').length > 0;\n}\n\n/**\n * todo The axis corresponding to the Y reversal is not reversed\n */\nexport function isReflectY(coordinates: G2CoordinateOptions[]) {\n  return coordOf(coordinates, 'reflectY').length > 0;\n}\n\nfunction inferCoordinate(\n  coordinates: G2CoordinateOptions[],\n): G2CoordinateOptions[] {\n  if (\n    coordinates.find((d) => d.type === 'cartesian' || d.type === 'cartesian3D')\n  )\n    return coordinates;\n  return [...coordinates, { type: 'cartesian' }];\n}\n", "\n// `@antv/vendor/d3-scale-chromatic` (ESM)\n// See upstream license: https://github.com/d3/d3-scale-chromatic/blob/main/LICENSE\n//\n// Our ESM package uses the underlying installed dependencies of `node_modules/d3-scale-chromatic`\nexport * from \"d3-scale-chromatic\";\n", "export default function(specifier) {\n  var n = specifier.length / 6 | 0, colors = new Array(n), i = 0;\n  while (i < n) colors[i] = \"#\" + specifier.slice(i * 6, ++i * 6);\n  return colors;\n}\n", "import colors from \"../colors.js\";\n\nexport default colors(\"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf\");\n", "import colors from \"../colors.js\";\n\nexport default colors(\"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666\");\n", "import colors from \"../colors.js\";\n\nexport default colors(\"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666\");\n", "import colors from \"../colors.js\";\n\nexport default colors(\"4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0\");\n", "import colors from \"../colors.js\";\n\nexport default colors(\"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928\");\n", "import colors from \"../colors.js\";\n\nexport default colors(\"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2\");\n", "import colors from \"../colors.js\";\n\nexport default colors(\"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc\");\n", "import colors from \"../colors.js\";\n\nexport default colors(\"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999\");\n", "import colors from \"../colors.js\";\n\nexport default colors(\"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3\");\n", "import colors from \"../colors.js\";\n\nexport default colors(\"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f\");\n", "import colors from \"../colors.js\";\n\nexport default colors(\"4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab\");\n", "import {interpolateRgbBasis} from \"d3-interpolate\";\n\nexport default scheme => interpolateRgbBasis(scheme[scheme.length - 1]);\n", "import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"d8b365f5f5f55ab4ac\",\n  \"a6611adfc27d80cdc1018571\",\n  \"a6611adfc27df5f5f580cdc1018571\",\n  \"8c510ad8b365f6e8c3c7eae55ab4ac01665e\",\n  \"8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e\",\n  \"8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e\",\n  \"8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e\",\n  \"5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30\",\n  \"5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30\"\n).map(colors);\n\nexport default ramp(scheme);\n", "import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"af8dc3f7f7f77fbf7b\",\n  \"7b3294c2a5cfa6dba0008837\",\n  \"7b3294c2a5cff7f7f7a6dba0008837\",\n  \"762a83af8dc3e7d4e8d9f0d37fbf7b1b7837\",\n  \"762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837\",\n  \"762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837\",\n  \"762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837\",\n  \"40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b\",\n  \"40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b\"\n).map(colors);\n\nexport default ramp(scheme);\n", "import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"e9a3c9f7f7f7a1d76a\",\n  \"d01c8bf1b6dab8e1864dac26\",\n  \"d01c8bf1b6daf7f7f7b8e1864dac26\",\n  \"c51b7de9a3c9fde0efe6f5d0a1d76a4d9221\",\n  \"c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221\",\n  \"c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221\",\n  \"c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221\",\n  \"8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419\",\n  \"8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419\"\n).map(colors);\n\nexport default ramp(scheme);\n", "import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"998ec3f7f7f7f1a340\",\n  \"5e3c99b2abd2fdb863e66101\",\n  \"5e3c99b2abd2f7f7f7fdb863e66101\",\n  \"542788998ec3d8daebfee0b6f1a340b35806\",\n  \"542788998ec3d8daebf7f7f7fee0b6f1a340b35806\",\n  \"5427888073acb2abd2d8daebfee0b6fdb863e08214b35806\",\n  \"5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806\",\n  \"2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08\",\n  \"2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08\"\n).map(colors);\n\nexport default ramp(scheme);\n", "import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"ef8a62f7f7f767a9cf\",\n  \"ca0020f4a58292c5de0571b0\",\n  \"ca0020f4a582f7f7f792c5de0571b0\",\n  \"b2182bef8a62fddbc7d1e5f067a9cf2166ac\",\n  \"b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac\",\n  \"b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac\",\n  \"b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac\",\n  \"67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061\",\n  \"67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061\"\n).map(colors);\n\nexport default ramp(scheme);\n", "import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"ef8a62ffffff999999\",\n  \"ca0020f4a582bababa404040\",\n  \"ca0020f4a582ffffffbababa404040\",\n  \"b2182bef8a62fddbc7e0e0e09999994d4d4d\",\n  \"b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d\",\n  \"b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d\",\n  \"b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d\",\n  \"67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a\",\n  \"67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a\"\n).map(colors);\n\nexport default ramp(scheme);\n", "import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"fc8d59ffffbf91bfdb\",\n  \"d7191cfdae61abd9e92c7bb6\",\n  \"d7191cfdae61ffffbfabd9e92c7bb6\",\n  \"d73027fc8d59fee090e0f3f891bfdb4575b4\",\n  \"d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4\",\n  \"d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4\",\n  \"d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4\",\n  \"a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695\",\n  \"a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695\"\n).map(colors);\n\nexport default ramp(scheme);\n", "import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"fc8d59ffffbf91cf60\",\n  \"d7191cfdae61a6d96a1a9641\",\n  \"d7191cfdae61ffffbfa6d96a1a9641\",\n  \"d73027fc8d59fee08bd9ef8b91cf601a9850\",\n  \"d73027fc8d59fee08bffffbfd9ef8b91cf601a9850\",\n  \"d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850\",\n  \"d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850\",\n  \"a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837\",\n  \"a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837\"\n).map(colors);\n\nexport default ramp(scheme);\n", "import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"fc8d59ffffbf99d594\",\n  \"d7191cfdae61abdda42b83ba\",\n  \"d7191cfdae61ffffbfabdda42b83ba\",\n  \"d53e4ffc8d59fee08be6f59899d5943288bd\",\n  \"d53e4ffc8d59fee08bffffbfe6f59899d5943288bd\",\n  \"d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd\",\n  \"d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd\",\n  \"9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2\",\n  \"9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2\"\n).map(colors);\n\nexport default ramp(scheme);\n", "import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"e5f5f999d8c92ca25f\",\n  \"edf8fbb2e2e266c2a4238b45\",\n  \"edf8fbb2e2e266c2a42ca25f006d2c\",\n  \"edf8fbccece699d8c966c2a42ca25f006d2c\",\n  \"edf8fbccece699d8c966c2a441ae76238b45005824\",\n  \"f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824\",\n  \"f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b\"\n).map(colors);\n\nexport default ramp(scheme);\n", "import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"e0ecf49ebcda8856a7\",\n  \"edf8fbb3cde38c96c688419d\",\n  \"edf8fbb3cde38c96c68856a7810f7c\",\n  \"edf8fbbfd3e69ebcda8c96c68856a7810f7c\",\n  \"edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b\",\n  \"f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b\",\n  \"f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b\"\n).map(colors);\n\nexport default ramp(scheme);\n", "import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"e0f3dba8ddb543a2ca\",\n  \"f0f9e8bae4bc7bccc42b8cbe\",\n  \"f0f9e8bae4bc7bccc443a2ca0868ac\",\n  \"f0f9e8ccebc5a8ddb57bccc443a2ca0868ac\",\n  \"f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e\",\n  \"f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e\",\n  \"f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081\"\n).map(colors);\n\nexport default ramp(scheme);\n", "import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"fee8c8fdbb84e34a33\",\n  \"fef0d9fdcc8afc8d59d7301f\",\n  \"fef0d9fdcc8afc8d59e34a33b30000\",\n  \"fef0d9fdd49efdbb84fc8d59e34a33b30000\",\n  \"fef0d9fdd49efdbb84fc8d59ef6548d7301f990000\",\n  \"fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000\",\n  \"fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000\"\n).map(colors);\n\nexport default ramp(scheme);\n", "import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"ece2f0a6bddb1c9099\",\n  \"f6eff7bdc9e167a9cf02818a\",\n  \"f6eff7bdc9e167a9cf1c9099016c59\",\n  \"f6eff7d0d1e6a6bddb67a9cf1c9099016c59\",\n  \"f6eff7d0d1e6a6bddb67a9cf3690c002818a016450\",\n  \"fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450\",\n  \"fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636\"\n).map(colors);\n\nexport default ramp(scheme);\n", "import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"ece7f2a6bddb2b8cbe\",\n  \"f1eef6bdc9e174a9cf0570b0\",\n  \"f1eef6bdc9e174a9cf2b8cbe045a8d\",\n  \"f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d\",\n  \"f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b\",\n  \"fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b\",\n  \"fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858\"\n).map(colors);\n\nexport default ramp(scheme);\n", "import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"e7e1efc994c7dd1c77\",\n  \"f1eef6d7b5d8df65b0ce1256\",\n  \"f1eef6d7b5d8df65b0dd1c77980043\",\n  \"f1eef6d4b9dac994c7df65b0dd1c77980043\",\n  \"f1eef6d4b9dac994c7df65b0e7298ace125691003f\",\n  \"f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f\",\n  \"f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f\"\n).map(colors);\n\nexport default ramp(scheme);\n", "import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"fde0ddfa9fb5c51b8a\",\n  \"feebe2fbb4b9f768a1ae017e\",\n  \"feebe2fbb4b9f768a1c51b8a7a0177\",\n  \"feebe2fcc5c0fa9fb5f768a1c51b8a7a0177\",\n  \"feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177\",\n  \"fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177\",\n  \"fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a\"\n).map(colors);\n\nexport default ramp(scheme);\n", "import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"edf8b17fcdbb2c7fb8\",\n  \"ffffcca1dab441b6c4225ea8\",\n  \"ffffcca1dab441b6c42c7fb8253494\",\n  \"ffffccc7e9b47fcdbb41b6c42c7fb8253494\",\n  \"ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84\",\n  \"ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84\",\n  \"ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58\"\n).map(colors);\n\nexport default ramp(scheme);\n", "import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"f7fcb9addd8e31a354\",\n  \"ffffccc2e69978c679238443\",\n  \"ffffccc2e69978c67931a354006837\",\n  \"ffffccd9f0a3addd8e78c67931a354006837\",\n  \"ffffccd9f0a3addd8e78c67941ab5d238443005a32\",\n  \"ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32\",\n  \"ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529\"\n).map(colors);\n\nexport default ramp(scheme);\n", "import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"fff7bcfec44fd95f0e\",\n  \"ffffd4fed98efe9929cc4c02\",\n  \"ffffd4fed98efe9929d95f0e993404\",\n  \"ffffd4fee391fec44ffe9929d95f0e993404\",\n  \"ffffd4fee391fec44ffe9929ec7014cc4c028c2d04\",\n  \"ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04\",\n  \"ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506\"\n).map(colors);\n\nexport default ramp(scheme);\n", "import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"ffeda0feb24cf03b20\",\n  \"ffffb2fecc5cfd8d3ce31a1c\",\n  \"ffffb2fecc5cfd8d3cf03b20bd0026\",\n  \"ffffb2fed976feb24cfd8d3cf03b20bd0026\",\n  \"ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026\",\n  \"ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026\",\n  \"ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026\"\n).map(colors);\n\nexport default ramp(scheme);\n", "import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"deebf79ecae13182bd\",\n  \"eff3ffbdd7e76baed62171b5\",\n  \"eff3ffbdd7e76baed63182bd08519c\",\n  \"eff3ffc6dbef9ecae16baed63182bd08519c\",\n  \"eff3ffc6dbef9ecae16baed64292c62171b5084594\",\n  \"f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594\",\n  \"f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b\"\n).map(colors);\n\nexport default ramp(scheme);\n", "import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"e5f5e0a1d99b31a354\",\n  \"edf8e9bae4b374c476238b45\",\n  \"edf8e9bae4b374c47631a354006d2c\",\n  \"edf8e9c7e9c0a1d99b74c47631a354006d2c\",\n  \"edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32\",\n  \"f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32\",\n  \"f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b\"\n).map(colors);\n\nexport default ramp(scheme);\n", "import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"f0f0f0bdbdbd636363\",\n  \"f7f7f7cccccc969696525252\",\n  \"f7f7f7cccccc969696636363252525\",\n  \"f7f7f7d9d9d9bdbdbd969696636363252525\",\n  \"f7f7f7d9d9d9bdbdbd969696737373525252252525\",\n  \"fffffff0f0f0d9d9d9bdbdbd969696737373525252252525\",\n  \"fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000\"\n).map(colors);\n\nexport default ramp(scheme);\n", "import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"efedf5bcbddc756bb1\",\n  \"f2f0f7cbc9e29e9ac86a51a3\",\n  \"f2f0f7cbc9e29e9ac8756bb154278f\",\n  \"f2f0f7dadaebbcbddc9e9ac8756bb154278f\",\n  \"f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486\",\n  \"fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486\",\n  \"fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d\"\n).map(colors);\n\nexport default ramp(scheme);\n", "import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"fee0d2fc9272de2d26\",\n  \"fee5d9fcae91fb6a4acb181d\",\n  \"fee5d9fcae91fb6a4ade2d26a50f15\",\n  \"fee5d9fcbba1fc9272fb6a4ade2d26a50f15\",\n  \"fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d\",\n  \"fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d\",\n  \"fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d\"\n).map(colors);\n\nexport default ramp(scheme);\n", "import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"fee6cefdae6be6550d\",\n  \"feeddefdbe85fd8d3cd94701\",\n  \"feeddefdbe85fd8d3ce6550da63603\",\n  \"feeddefdd0a2fdae6bfd8d3ce6550da63603\",\n  \"feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04\",\n  \"fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04\",\n  \"fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704\"\n).map(colors);\n\nexport default ramp(scheme);\n", "export default function(t) {\n  t = Math.max(0, Math.min(1, t));\n  return \"rgb(\"\n      + Math.max(0, Math.min(255, Math.round(-4.54 - t * (35.34 - t * (2381.73 - t * (6402.7 - t * (7024.72 - t * 2710.57))))))) + \", \"\n      + Math.max(0, Math.min(255, Math.round(32.49 + t * (170.73 + t * (52.82 - t * (131.46 - t * (176.58 - t * 67.37))))))) + \", \"\n      + Math.max(0, Math.min(255, Math.round(81.24 + t * (442.36 - t * (2482.43 - t * (6167.24 - t * (6614.94 - t * 2475.67)))))))\n      + \")\";\n}\n", "import {cubehelix} from \"d3-color\";\nimport {interpolateCubehelixLong} from \"d3-interpolate\";\n\nexport default interpolateCubehelixLong(cubehelix(300, 0.5, 0.0), cubehelix(-240, 0.5, 1.0));\n", "import {cubehelix} from \"d3-color\";\nimport {interpolateCubehelixLong} from \"d3-interpolate\";\n\nexport var warm = interpolateCubehelixLong(cubehelix(-100, 0.75, 0.35), cubehelix(80, 1.50, 0.8));\n\nexport var cool = interpolateCubehelixLong(cubehelix(260, 0.75, 0.35), cubehelix(80, 1.50, 0.8));\n\nvar c = cubehelix();\n\nexport default function(t) {\n  if (t < 0 || t > 1) t -= Math.floor(t);\n  var ts = Math.abs(t - 0.5);\n  c.h = 360 * t - 100;\n  c.s = 1.5 - 1.5 * ts;\n  c.l = 0.8 - 0.9 * ts;\n  return c + \"\";\n}\n", "import {rgb} from \"d3-color\";\n\nvar c = rgb(),\n    pi_1_3 = Math.PI / 3,\n    pi_2_3 = Math.PI * 2 / 3;\n\nexport default function(t) {\n  var x;\n  t = (0.5 - t) * Math.PI;\n  c.r = 255 * (x = Math.sin(t)) * x;\n  c.g = 255 * (x = Math.sin(t + pi_1_3)) * x;\n  c.b = 255 * (x = Math.sin(t + pi_2_3)) * x;\n  return c + \"\";\n}\n", "export default function(t) {\n  t = Math.max(0, Math.min(1, t));\n  return \"rgb(\"\n      + Math.max(0, Math.min(255, Math.round(34.61 + t * (1172.33 - t * (10793.56 - t * (33300.12 - t * (38394.49 - t * 14825.05))))))) + \", \"\n      + Math.max(0, Math.min(255, Math.round(23.31 + t * (557.33 + t * (1225.33 - t * (3574.96 - t * (1073.77 + t * 707.56))))))) + \", \"\n      + Math.max(0, Math.min(255, Math.round(27.2 + t * (3211.1 - t * (15327.97 - t * (27814 - t * (22569.18 - t * 6838.66)))))))\n      + \")\";\n}\n", "import colors from \"../colors.js\";\n\nfunction ramp(range) {\n  var n = range.length;\n  return function(t) {\n    return range[Math.max(0, Math.min(n - 1, Math.floor(t * n)))];\n  };\n}\n\nexport default ramp(colors(\"44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725\"));\n\nexport var magma = ramp(colors(\"00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf\"));\n\nexport var inferno = ramp(colors(\"00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4\"));\n\nexport var plasma = ramp(colors(\"0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921\"));\n", "import { Linear, createInterpolateValue } from '@antv/scale';\nimport { extent, max, rollups } from '@antv/vendor/d3-array';\nimport * as d3ScaleChromatic from '@antv/vendor/d3-scale-chromatic';\nimport { deepMix, omit, upperFirst } from '@antv/util';\nimport { firstOf, lastOf, unique } from '../utils/array';\nimport { defined, identity, isStrictObject } from '../utils/helper';\nimport { Primitive, G2Theme, G2MarkState, ChannelGroups } from './types/common';\nimport {\n  G2CoordinateOptions,\n  G2Library,\n  G2ScaleOptions,\n  G2PaletteOptions,\n  G2Mark,\n  G2View,\n} from './types/options';\nimport {\n  ScaleComponent,\n  PaletteComponent,\n  Palette,\n  Scale,\n} from './types/component';\nimport { isTheta } from './coordinate';\nimport { useLibrary } from './library';\nimport { MarkChannel } from './types/mark';\n\nexport function inferScale(\n  name: string,\n  values: Primitive[][],\n  options: Record<string, any>,\n  coordinates: G2CoordinateOptions[],\n  theme: G2Theme,\n  library: G2Library,\n) {\n  const { guide = {} } = options;\n  const type = inferScaleType(name, values, options);\n  if (typeof type !== 'string') return options;\n  const expectedDomain = inferScaleDomain(type, name, values, options);\n  const actualDomain = maybeRatio(type, expectedDomain, options);\n  return {\n    ...options,\n    ...inferScaleOptions(type, name, values, options, coordinates),\n    domain: actualDomain,\n    range: inferScaleRange(\n      type,\n      name,\n      values,\n      options,\n      actualDomain,\n      theme,\n      library,\n    ),\n    expectedDomain,\n    guide,\n    name,\n    type,\n  };\n}\n\nexport function applyScale(\n  channels: ChannelGroups[],\n  scale: Record<string, Scale>,\n): MarkChannel {\n  const scaledValue = {};\n  for (const channel of channels) {\n    const { values, name: scaleName } = channel;\n    const scaleInstance = scale[scaleName];\n    for (const value of values) {\n      const { name, value: V } = value;\n      scaledValue[name] = V.map((d) => scaleInstance.map(d));\n    }\n  }\n  return scaledValue;\n}\n\nexport function groupTransform(\n  markState: Map<G2Mark, G2MarkState>,\n  uidScale: Map<symbol, Scale>,\n) {\n  const channels = Array.from(markState.values()).flatMap((d) => d.channels);\n\n  const scaleGroups = rollups(\n    channels,\n    (channels) => channels.map((d) => uidScale.get(d.scale.uid)),\n    (d) => d.name,\n  )\n    .filter(\n      ([, scales]) =>\n        scales.some(\n          (d) => typeof d.getOptions().groupTransform === 'function',\n        ) && // only sync scales with groupTransform options\n        scales.every((d) => d.getTicks), // only sync quantitative scales\n    )\n    .map((d) => d[1]);\n\n  scaleGroups.forEach((group) => {\n    const groupTransform = group.map((d) => d.getOptions().groupTransform)[0];\n    groupTransform(group);\n  });\n}\n\nexport function collectScales(states: G2MarkState[], options: G2View) {\n  const { components = [] } = options;\n\n  const NONE_STATIC_KEYS = [\n    'scale',\n    'encode',\n    'axis',\n    'legend',\n    'data',\n    'transform',\n  ];\n\n  // From normal marks.\n  const scales = Array.from(\n    new Set(states.flatMap((d) => d.channels.map((d) => d.scale))),\n  );\n\n  // From static marks.\n  const nameScale = new Map(scales.map((scale) => [scale.name, scale]));\n  for (const component of components) {\n    const channels = inferChannelsForComponent(component);\n    for (const channel of channels) {\n      const scale = nameScale.get(channel);\n      const staticScale = component.scale?.[channel] || {};\n      const { independent = false } = staticScale;\n\n      if (scale && !independent) {\n        // Merged with exist scales if is not independent.\n        const { guide } = scale;\n        const guide1 = typeof guide === 'boolean' ? {} : guide;\n        scale.guide = deepMix({}, guide1, component);\n        Object.assign(scale, staticScale);\n      } else {\n        // Append new scales without exit scales or independent.\n        const options1 = {\n          ...staticScale,\n          expectedDomain: staticScale.domain,\n          name: channel,\n          guide: omit(component, NONE_STATIC_KEYS),\n        };\n        scales.push(options1);\n      }\n    }\n  }\n  return scales;\n}\n\nexport function useRelation(\n  relations: [any, any][],\n): [(scale: Scale) => Scale, (scale: Scale) => Scale] {\n  if (!relations || !Array.isArray(relations)) return [identity, identity];\n\n  // Store original map and invert.\n  let map;\n  let invert;\n\n  const conditionalize = (scale: Scale) => {\n    map = scale.map.bind(scale);\n    invert = scale.invert?.bind(scale);\n\n    // Distinguish functions[function, output] and value[vale, output] relations.\n    const funcRelations = relations.filter(([v]) => typeof v === 'function');\n    const valueRelations = relations.filter(([v]) => typeof v !== 'function');\n\n    // Update scale.map\n    const valueOutput = new Map(valueRelations);\n    scale.map = (x) => {\n      for (const [verify, value] of funcRelations) {\n        if (verify(x)) return value;\n      }\n      if (valueOutput.has(x)) return valueOutput.get(x);\n      return map(x);\n    };\n\n    if (!invert) return scale;\n\n    // Update scale.invert\n    const outputValue = new Map(valueRelations.map(([a, b]) => [b, a]));\n    const outputFunc = new Map(funcRelations.map(([a, b]) => [b, a]));\n    scale.invert = (x) => {\n      if (outputFunc.has(x)) return x;\n      if (outputValue.has(x)) return outputValue.get(x);\n      return invert(x);\n    };\n    return scale;\n  };\n\n  const deconditionalize = (scale: Scale) => {\n    if (map !== null) scale.map = map;\n    if (invert !== null) scale.invert = invert;\n    return scale;\n  };\n\n  return [conditionalize, deconditionalize];\n}\n\nexport function assignScale(\n  target: Record<string, Scale>,\n  source: Record<string, Scale>,\n): Record<string, Scale> {\n  const keys = Object.keys(target);\n  for (const scale of Object.values(source)) {\n    const { name } = scale.getOptions();\n    if (!(name in target)) target[name] = scale;\n    else {\n      const I = keys\n        .filter((d) => d.startsWith(name))\n        // Reg is for extract `1` from `x1`;\n        .map((d) => +(d.replace(name, '') || 0));\n      const index = max(I) + 1;\n      const newKey = `${name}${index}`;\n      target[newKey] = scale;\n      scale.getOptions().key = newKey;\n    }\n  }\n  return target;\n}\n\nexport function useRelationScale(\n  options: Record<string, any>,\n  library: G2Library,\n) {\n  const [useScale] = useLibrary<G2ScaleOptions, ScaleComponent, Scale>(\n    'scale',\n    library,\n  );\n  const { relations } = options;\n  const [conditionalize] = useRelation(relations);\n  const scale = useScale(options);\n  return conditionalize(scale);\n}\n\nexport function syncFacetsScales(states: Map<G2Mark, G2MarkState>[]): void {\n  const scales = states\n    .flatMap((d) => Array.from(d.values()))\n    .flatMap((d) => d.channels.map((d) => d.scale));\n  syncFacetsScaleByChannel(scales, 'x');\n  syncFacetsScaleByChannel(scales, 'y');\n}\n\nfunction inferChannelsForComponent(component) {\n  const { channels = [], type, scale = {} } = component;\n  const L = ['shape', 'color', 'opacity', 'size'];\n  if (channels.length !== 0) return channels;\n  if (type === 'axisX') return ['x'];\n  if (type === 'axisY') return ['y'];\n  if (type === 'legends')\n    return Object.keys(scale).filter((d) => L.includes(d));\n  return [];\n}\n\nfunction syncFacetsScaleByChannel(\n  scales: G2ScaleOptions[],\n  channel: 'x' | 'y',\n): void {\n  const S = scales.filter(\n    ({ name, facet = true }) => facet && name === channel,\n  );\n  const D = S.flatMap((d) => d.domain);\n  const syncedD = S.every(isQuantitativeScale)\n    ? extent(D)\n    : S.every(isDiscreteScale)\n    ? Array.from(new Set(D))\n    : null;\n  if (syncedD === null) return;\n  for (const scale of S) {\n    scale.domain = syncedD;\n  }\n}\n\nfunction maybeRatio(\n  type: string,\n  domain: Primitive[],\n  options: G2ScaleOptions,\n) {\n  const { ratio } = options;\n  if (ratio === undefined || ratio === null) return domain;\n  if (isQuantitativeScale({ type })) {\n    return clampQuantitativeScale(domain as number[], ratio, type);\n  }\n  if (isDiscreteScale({ type })) return clampDiscreteScale(domain, ratio);\n  return domain;\n}\n\nfunction clampQuantitativeScale(domain: number[], ratio: number, type: string) {\n  const D = domain.map(Number);\n  const scale = new Linear({\n    domain: D,\n    range: [D[0], D[0] + (D[D.length - 1] - D[0]) * ratio],\n  });\n  if (type === 'time') return domain.map((d) => new Date(scale.map(d)));\n  return domain.map((d) => scale.map(d));\n}\n\nfunction clampDiscreteScale(domain: Primitive[], ratio: number) {\n  const index = Math.round(domain.length * ratio);\n  return domain.slice(0, index);\n}\n\nfunction isQuantitativeScale(scale: G2ScaleOptions) {\n  const { type } = scale;\n  if (typeof type !== 'string') return false;\n  // Do not take quantize, quantile or threshold scale into account,\n  // because they are not for position scales. If they are, there is\n  // no need to sync them.\n  const names = ['linear', 'log', 'pow', 'time'];\n  return names.includes(type);\n}\n\nfunction isDiscreteScale(scale: G2ScaleOptions) {\n  const { type } = scale;\n  if (typeof type !== 'string') return false;\n  const names = ['band', 'point', 'ordinal'];\n  return names.includes(type);\n}\n\n// @todo More accurate inference for different cases.\nfunction inferScaleType(\n  name: string,\n  values: Primitive[][],\n  options: G2ScaleOptions,\n): string | ScaleComponent {\n  const { type, domain, range, quantitative, ordinal } = options;\n  if (type !== undefined) return type;\n  if (isObject(values)) return 'identity';\n  if (typeof range === 'string') return 'linear';\n  if ((domain || range || []).length > 2) return asOrdinalType(name, ordinal);\n  if (domain !== undefined) {\n    if (isOrdinal([domain])) return asOrdinalType(name, ordinal);\n    if (isTemporal(values)) return 'time';\n    return asQuantitativeType(name, range, quantitative);\n  }\n  if (isOrdinal(values)) return asOrdinalType(name, ordinal);\n  if (isTemporal(values)) return 'time';\n  return asQuantitativeType(name, range, quantitative);\n}\n\nfunction inferScaleDomain(\n  type: string,\n  name: string,\n  values,\n  options: G2ScaleOptions,\n): Primitive[] {\n  const { domain } = options;\n  if (domain !== undefined) return domain;\n  switch (type) {\n    case 'linear':\n    case 'time':\n    case 'log':\n    case 'pow':\n    case 'sqrt':\n    case 'quantize':\n    case 'threshold':\n      return maybeMinMax(inferDomainQ(values, options), options);\n    case 'band':\n    case 'ordinal':\n    case 'point':\n      return inferDomainC(values);\n    case 'quantile':\n      return inferDomainO(values);\n    case 'sequential':\n      return maybeMinMax(inferDomainS(values), options);\n    default:\n      return [];\n  }\n}\n\nfunction inferScaleRange(\n  type: string,\n  name: string,\n  values: Primitive[][],\n  options: G2ScaleOptions,\n  domain: Primitive[],\n  theme: G2Theme,\n  library: G2Library,\n) {\n  const { range } = options;\n  if (typeof range === 'string') return gradientColors(range);\n  if (range !== undefined) return range;\n  const { rangeMin, rangeMax } = options;\n  switch (type) {\n    case 'linear':\n    case 'time':\n    case 'log':\n    case 'pow':\n    case 'sqrt': {\n      const colors = categoricalColors(values, options, domain, theme, library);\n      const [r0, r1] = inferRangeQ(name, colors);\n      return [rangeMin ?? r0, rangeMax ?? r1];\n    }\n    case 'band':\n    case 'point': {\n      const min = name === 'size' ? 5 : 0;\n      const max = name === 'size' ? 10 : 1;\n      return [rangeMin ?? min, rangeMax ?? max];\n    }\n    case 'ordinal': {\n      return categoricalColors(values, options, domain, theme, library);\n    }\n    case 'sequential':\n      return undefined;\n    case 'constant':\n      return [values[0][0]];\n    default:\n      return [];\n  }\n}\n\nfunction inferScaleOptions(\n  type: string,\n  name: string,\n  values: Primitive[][],\n  options: G2ScaleOptions,\n  coordinates: G2CoordinateOptions[],\n): G2ScaleOptions {\n  switch (type) {\n    case 'linear':\n    case 'time':\n    case 'log':\n    case 'pow':\n    case 'sqrt':\n      return inferOptionsQ(coordinates, options);\n    case 'band':\n    case 'point':\n      return inferOptionsC(type, name, coordinates, options);\n    case 'sequential':\n      return inferOptionsS(options);\n    default:\n      return options;\n  }\n}\n\nfunction categoricalColors(\n  values: Primitive[][],\n  options: G2ScaleOptions,\n  domain: Primitive[],\n  theme: G2Theme,\n  library: G2Library,\n) {\n  const [usePalette] = useLibrary<G2PaletteOptions, PaletteComponent, Palette>(\n    'palette',\n    library,\n  );\n  const { category10: c10, category20: c20 } = theme;\n  const defaultPalette = unique(domain).length <= c10.length ? c10 : c20;\n  const { palette = defaultPalette, offset } = options;\n  if (Array.isArray(palette)) return palette;\n  // Built-in palettes have higher priority.\n  try {\n    return usePalette({ type: palette });\n  } catch (e) {\n    const colors = interpolatedColors(palette, domain, offset);\n    if (colors) return colors;\n    throw new Error(`Unknown Component: ${palette} `);\n  }\n}\n\nfunction gradientColors(range: string): string[] {\n  return range.split('-');\n}\n\nfunction interpolatedColors(\n  palette: string,\n  domain: Primitive[],\n  offset = (d) => d,\n): string[] {\n  if (!palette) return null;\n  const fullName = upperFirst(palette);\n\n  // If scheme have enough colors, then return pre-defined colors.\n  const scheme = d3ScaleChromatic[`scheme${fullName}`];\n  const interpolator = d3ScaleChromatic[`interpolate${fullName}`];\n  if (!scheme && !interpolator) return null;\n\n  if (scheme) {\n    // If is a one dimension array, return it.\n    if (!scheme.some(Array.isArray)) return scheme;\n    const schemeColors = scheme[domain.length];\n    if (schemeColors) return schemeColors;\n  }\n\n  // Otherwise interpolate to get full colors.\n  return domain.map((_, i) => interpolator(offset(i / domain.length)));\n}\n\nfunction inferOptionsS(options) {\n  const { palette = 'ylGnBu', offset } = options;\n  const name = upperFirst(palette);\n  const interpolator = d3ScaleChromatic[`interpolate${name}`];\n  if (!interpolator) throw new Error(`Unknown palette: ${name}`);\n  return {\n    interpolator: offset ? (x) => interpolator(offset(x)) : interpolator,\n  };\n}\n\nfunction inferOptionsQ(\n  coordinates: G2CoordinateOptions[],\n  options: G2ScaleOptions,\n): G2ScaleOptions {\n  const {\n    interpolate = createInterpolateValue,\n    nice = false,\n    tickCount = 5,\n  } = options;\n  return { ...options, interpolate, nice, tickCount };\n}\n\nfunction inferOptionsC(\n  type: string,\n  name: string,\n  coordinates: G2CoordinateOptions[],\n  options: G2ScaleOptions,\n): G2ScaleOptions {\n  if (\n    options.padding !== undefined ||\n    options.paddingInner !== undefined ||\n    options.paddingOuter !== undefined\n  ) {\n    return { ...options, unknown: NaN };\n  }\n  const padding = inferPadding(type, name, coordinates);\n  const { paddingInner = padding, paddingOuter = padding } = options;\n  return {\n    ...options,\n    paddingInner,\n    paddingOuter,\n    padding,\n    unknown: NaN,\n  };\n}\n\nfunction inferPadding(\n  type: string,\n  name: string,\n  coordinates: G2CoordinateOptions[],\n): number {\n  // The scale for enterDelay and enterDuration should has zero padding by default.\n  // Because there is no need to add extra delay for the start and the end.\n  if (name === 'enterDelay' || name === 'enterDuration') return 0;\n  if (name === 'size') return 0;\n  if (type === 'band') return isTheta(coordinates) ? 0 : 0.1;\n  // Point scale need 0.5 padding to make interval between first and last point\n  // equal to other intervals in polar coordinate.\n  if (type === 'point') return 0.5;\n  return 0;\n}\n\nfunction asOrdinalType(name: string, defaults: string) {\n  if (defaults) return defaults;\n  return isQuantitative(name) ? 'point' : 'ordinal';\n}\n\nfunction asQuantitativeType(\n  name: string,\n  range: Primitive[],\n  defaults: string,\n) {\n  if (defaults) return defaults;\n  if (name !== 'color') return 'linear';\n  return range ? 'linear' : 'sequential';\n}\n\nfunction maybeMinMax(\n  domain: Primitive[],\n  options: G2ScaleOptions,\n): Primitive[] {\n  if (domain.length === 0) return domain;\n  const { domainMin, domainMax } = options;\n  const [d0, d1] = domain;\n  return [domainMin ?? d0, domainMax ?? d1];\n}\n\nfunction inferDomainQ(values: Primitive[][], options: G2ScaleOptions) {\n  const { zero = false } = options;\n  let min = Infinity;\n  let max = -Infinity;\n  for (const value of values) {\n    for (const d of value) {\n      if (defined(d)) {\n        min = Math.min(min, +d);\n        max = Math.max(max, +d);\n      }\n    }\n  }\n  if (min === Infinity) return [];\n  return zero ? [Math.min(0, min), max] : [min, max];\n}\n\nfunction inferDomainC(values: Primitive[][]) {\n  return Array.from(new Set(values.flat()));\n}\n\nfunction inferDomainO(values: Primitive[][]) {\n  return values.flat().sort();\n}\n\nfunction inferDomainS(values: Primitive[][]) {\n  let min = Infinity;\n  let max = -Infinity;\n  for (const value of values) {\n    for (const d of value) {\n      if (defined(d)) {\n        min = Math.min(min, +d);\n        max = Math.max(max, +d);\n      }\n    }\n  }\n  if (min === Infinity) return [];\n  return [min < 0 ? -max : min, max];\n}\n\n/**\n * @todo More nice default range for enterDelay and enterDuration.\n * @todo Move these to channel definition.\n */\nfunction inferRangeQ(name: string, palette: Palette): Primitive[] {\n  if (name === 'enterDelay') return [0, 1000];\n  if (name == 'enterDuration') return [300, 1000];\n  if (name.startsWith('y') || name.startsWith('position')) return [1, 0];\n  if (name === 'color') return [firstOf(palette), lastOf(palette)];\n  if (name === 'opacity') return [0, 1];\n  if (name === 'size') return [1, 10];\n  return [0, 1];\n}\n\nfunction isOrdinal(values: Primitive[][]): boolean {\n  return some(values, (d) => {\n    const type = typeof d;\n    return type === 'string' || type === 'boolean';\n  });\n}\n\nfunction isTemporal(values: Primitive[][]): boolean {\n  return some(values, (d) => d instanceof Date);\n}\n\nfunction isObject(values: Primitive[][]): boolean {\n  return some(values, isStrictObject);\n}\n\nfunction some(values, callback) {\n  for (const V of values) {\n    if (V.some(callback)) return true;\n  }\n  return false;\n}\n\nfunction isQuantitative(name: string): boolean {\n  return (\n    name.startsWith('x') ||\n    name.startsWith('y') ||\n    name.startsWith('position') ||\n    name.startsWith('size')\n  );\n}\n\n// Spatial and temporal position.\nexport function isPosition(name: string): boolean {\n  return (\n    name.startsWith('x') ||\n    name.startsWith('y') ||\n    name.startsWith('position') ||\n    name === 'enterDelay' ||\n    name === 'enterDuration' ||\n    name === 'updateDelay' ||\n    name === 'updateDuration' ||\n    name === 'exitDelay' ||\n    name === 'exitDuration'\n  );\n}\n\nexport function isValidScale(scale: G2ScaleOptions) {\n  if (!scale || !scale.type) return false;\n  if (typeof scale.type === 'function') return true;\n  const { type, domain, range, interpolator } = scale;\n  const isValidDomain = domain && domain.length > 0;\n  const isValidRange = range && range.length > 0;\n\n  if (\n    [\n      'linear',\n      'sqrt',\n      'log',\n      'time',\n      'pow',\n      'threshold',\n      'quantize',\n      'quantile',\n      'ordinal',\n      'band',\n      'point',\n    ].includes(type) &&\n    isValidDomain &&\n    isValidRange\n  ) {\n    return true;\n  }\n\n  if (\n    ['sequential'].includes(type) &&\n    isValidDomain &&\n    (isValidRange || interpolator)\n  ) {\n    return true;\n  }\n\n  if (['constant', 'identity'].includes(type) && isValidRange) return true;\n\n  return false;\n}\n", "export const ContinuousScale = {\n  linear: 'linear',\n  identity: 'identity',\n  log: 'log',\n  pow: 'pow',\n  sqrt: 'sqrt',\n  sequential: 'sequential',\n} as const;\n\nexport const DistributionScale = {\n  threshold: 'threshold',\n  quantize: 'quantize',\n  quantile: 'quantile',\n} as const;\n\nexport const DiscreteScale = {\n  ordinal: 'ordinal',\n  band: 'band',\n  point: 'point',\n} as const;\n\nexport const ConstantScale = {\n  constant: 'constant',\n} as const;\n", "/**\n * @see https://github.com/antvis/G2/discussions/4557\n */\nimport { Coordinate } from '@antv/coord';\nimport { deepMix, isEqual } from '@antv/util';\nimport { groups, max, sum } from '@antv/vendor/d3-array';\nimport { format } from '@antv/vendor/d3-format';\nimport { DisplayObject, Text } from '@antv/g';\nimport {\n  getPolarOptions,\n  getRadialOptions,\n  type PolarOptions,\n  type RadialOptions,\n} from '../coordinate';\nimport { combine } from '../utils/array';\nimport { prettyNumber } from '../utils/number';\nimport { capitalizeFirst, defined, subObject } from '../utils/helper';\nimport { LEGEND_INFER_STRATEGIES } from '../component/constant';\nimport {\n  coordOf,\n  isHelix,\n  isParallel,\n  isPolar,\n  isRadar,\n  isRadial,\n  isReflect,\n  isReflectY,\n  isTheta,\n  isTranspose,\n} from './coordinate';\nimport { useLibrary } from './library';\nimport { isValidScale } from './scale';\nimport {\n  G2MarkState,\n  G2Theme,\n  GuideComponentOrientation as GCO,\n  GuideComponentPosition as GCP,\n} from './types/common';\nimport {\n  GuideComponent,\n  GuideComponentComponent as GCC,\n  ScaleComponent,\n  Scale,\n} from './types/component';\nimport {\n  G2CoordinateOptions,\n  G2GuideComponentOptions,\n  G2Library,\n  G2Mark,\n  G2ScaleOptions,\n  G2View,\n} from './types/options';\nimport {\n  ConstantScale,\n  ContinuousScale,\n  DiscreteScale,\n  DistributionScale,\n} from './types/scale';\n\nexport function inferComponent(\n  scales: G2ScaleOptions[],\n  partialOptions: G2View,\n  library: G2Library,\n): G2GuideComponentOptions[] {\n  const { coordinates = [], title } = partialOptions;\n  const [, createGuideComponent] = useLibrary<\n    G2GuideComponentOptions,\n    GCC,\n    GuideComponent\n  >('component', library);\n\n  const displayedScales = scales.filter(({ guide }) => {\n    if (guide === null) return false;\n    return true;\n  });\n\n  const components = [];\n\n  // Sliders and scrollbar component.\n  const sliders = inferScrollableComponents(partialOptions, scales, library);\n  components.push(...sliders);\n\n  // Title components.\n  if (title) {\n    const { props } = createGuideComponent('title');\n    const {\n      defaultPosition,\n      defaultOrientation,\n      defaultOrder,\n      defaultSize,\n      defaultCrossPadding,\n    } = props;\n    const titleOptions = typeof title === 'string' ? { title } : title;\n    components.push({\n      type: 'title',\n      position: defaultPosition,\n      orientation: defaultOrientation,\n      order: defaultOrder,\n      crossPadding: defaultCrossPadding[0],\n      defaultSize,\n      ...titleOptions,\n    });\n  }\n\n  // Axis and legends.\n  const inferredComponents = inferComponentsType(displayedScales, coordinates);\n\n  inferredComponents.forEach(([type, relativeScales]) => {\n    const { props } = createGuideComponent(type);\n    const {\n      defaultPosition,\n      defaultPlane = 'xy',\n      defaultOrientation,\n      defaultSize,\n      defaultOrder,\n      defaultLength,\n      defaultPadding: DP = [0, 0],\n      defaultCrossPadding: DCP = [0, 0],\n    } = props;\n    // @todo to be confirm if the scale can be merged.\n    // const scale: G2ScaleOptions = Object.assign({}, ...relativeScales);\n    const scale: G2ScaleOptions = deepMix({}, ...relativeScales);\n    const { guide: guideOptions, field } = scale;\n    // A scale may have multiple guides.\n    const guides = Array.isArray(guideOptions) ? guideOptions : [guideOptions];\n    for (const partialGuide of guides) {\n      const [position, orientation] = inferComponentPositionAndOrientation(\n        type,\n        defaultPosition,\n        defaultOrientation,\n        partialGuide,\n        relativeScales,\n        displayedScales,\n        coordinates,\n      );\n\n      // Skip if position and orientation are not specified.\n      // @example the last axis of radar chart\n      if (!position && !orientation) continue;\n\n      const isVertical = position === 'left' || position === 'right';\n      const defaultPadding = isVertical ? DP[1] : DP[0];\n      const defaultCrossPadding = isVertical ? DCP[1] : DCP[0];\n\n      const {\n        size,\n        order = defaultOrder,\n        length = defaultLength,\n        padding = defaultPadding,\n        crossPadding = defaultCrossPadding,\n      } = partialGuide;\n\n      components.push({\n        title: field,\n        ...partialGuide,\n        defaultSize,\n        length,\n        position,\n        plane: defaultPlane,\n        orientation,\n        padding,\n        order,\n        crossPadding,\n        size,\n        type,\n        scales: relativeScales,\n      });\n    }\n  });\n\n  return components;\n}\n\nexport function renderComponent(\n  component: G2GuideComponentOptions,\n  coordinate: Coordinate,\n  theme: G2Theme,\n  library: G2Library,\n  markState: Map<G2Mark, G2MarkState>,\n) {\n  const [useGuideComponent] = useLibrary<\n    G2GuideComponentOptions,\n    GCC,\n    GuideComponent\n  >('component', library);\n  const { scaleInstances: scales, scale, bbox, ...options } = component;\n  const value = { bbox, library };\n  const render = useGuideComponent(options);\n  return render({\n    coordinate,\n    library,\n    markState,\n    scales,\n    theme,\n    value,\n    scale,\n  });\n}\n\nexport function normalizeComponents(components: G2GuideComponentOptions[]) {\n  return components.map((d) => {\n    const component = deepMix(d, d.style);\n    delete component.style;\n    return component;\n  });\n}\n\nexport function flatComponents(\n  components: G2GuideComponentOptions[],\n): G2GuideComponentOptions[] {\n  return components.flatMap((d) => (d.type == 'group' ? d.children : d));\n}\n\n// Wrap legends into a group component.\nexport function groupComponents(\n  components: G2GuideComponentOptions[],\n  crossSize?: number,\n): G2GuideComponentOptions[] {\n  // Group components by key.\n  const P = ['left', 'right', 'bottom', 'top'];\n  const key = ({ type, position, group }) => {\n    if (!P.includes(position)) return Symbol('independent');\n    if (group === undefined) {\n      if (type.startsWith('legend')) return `legend-${position}`;\n      return Symbol('independent');\n    }\n    if (group === 'independent') return Symbol('independent');\n    return group;\n  };\n  const grouped = groups(components, key);\n\n  // Update attributes of group components,\n  // and maybe flatten group components without enough room.\n  return grouped.flatMap(([, components]) => {\n    if (components.length === 1) return components[0];\n\n    // If crossSize defined, group components only when has\n    // enough room.\n    if (crossSize !== undefined) {\n      // Compute total length.\n      const DL = components\n        .filter((d) => d.length !== undefined)\n        .map((d) => d.length);\n      const totalLength = sum(DL);\n\n      // If there is no enough room for components,\n      // do not group.\n      if (totalLength > crossSize) {\n        components.forEach((d) => (d.group = Symbol('independent')));\n        return components;\n      }\n\n      // Group legends and update legend length.\n      const emptyLength = crossSize - totalLength;\n      const emptyCount = components.length - DL.length;\n      const length = emptyLength / emptyCount;\n      components.forEach((d) => {\n        if (d.length !== undefined) return;\n        d.length = length;\n      });\n    }\n\n    // Create a group component.\n    const size = max(components, (d) => d.size);\n    const order = max(components, (d) => d.order);\n    const crossPadding = max(components, (d) => d.crossPadding);\n    const position = components[0].position;\n    return {\n      type: 'group',\n      size,\n      order,\n      position,\n      children: components,\n      crossPadding,\n    };\n  });\n}\n\nfunction inferLegendComponentType(\n  scales: G2ScaleOptions[],\n  coordinates: G2CoordinateOptions[],\n) {\n  // Filter accepts scales.\n  const channels = ['shape', 'size', 'color', 'opacity'];\n  const isConstantSize = (type, name) => type === 'constant' && name === 'size';\n  const accepts = scales.filter(\n    ({ type, name }) =>\n      typeof type === 'string' &&\n      channels.includes(name) &&\n      !isConstantSize(type, name), // Do not support constant size scale.\n  );\n\n  // Group scales by fields.\n  const constants = accepts.filter(({ type }) => type === 'constant');\n  const nonConstants = accepts.filter(({ type }) => type !== 'constant');\n  const groupKey = (d) => (d.field ? d.field : Symbol('independent'));\n  const fieldScales = groups(nonConstants, groupKey)\n    .map(([key, scales]) => [key, [...scales, ...constants]] as const)\n    .filter(([, scales]) => scales.some((scale) => scale.type !== 'constant'));\n  const scalesByField = new Map(fieldScales) as Map<string, G2ScaleOptions[]>;\n\n  // Skip empty scales.\n  if (scalesByField.size === 0) return [];\n\n  // Infer components.\n  const sort = (arr: string[][]) => arr.sort(([a], [b]) => a.localeCompare(b));\n  const components = Array.from(scalesByField)\n    .map(([, scs]) => {\n      const combinations = combine(scs).sort((a, b) => b.length - a.length);\n      const options = combinations.map((combination) => ({\n        combination,\n        option: combination.map((scale) => [scale.name, getScaleType(scale)]),\n      }));\n\n      // For category legend.\n      for (const { option, combination } of options) {\n        // If every scale is constant, do not display legend.\n        if (option.every((d) => d[1] === 'constant')) continue;\n        if (option.every((d) => d[1] === 'discrete' || d[1] === 'constant')) {\n          return ['legendCategory', combination] as [string, G2ScaleOptions[]];\n        }\n      }\n\n      // For reset legend.\n      // @todo Remove this.\n      for (const [componentType, accords] of LEGEND_INFER_STRATEGIES) {\n        for (const { option, combination } of options) {\n          if (accords.some((accord) => isEqual(sort(accord), sort(option)))) {\n            return [componentType, combination] as [string, G2ScaleOptions[]];\n          }\n        }\n      }\n      return null;\n    })\n    .filter(defined);\n\n  return components;\n}\n\nfunction getScaleType(scale: G2ScaleOptions): string {\n  const { type } = scale;\n  if (typeof type !== 'string') return null;\n  if (type in ContinuousScale) return 'continuous';\n  if (type in DiscreteScale) return 'discrete';\n  if (type in DistributionScale) return 'distribution';\n  if (type in ConstantScale) return 'constant';\n  return null;\n}\n\nfunction inferAxisComponentType(\n  scales: G2ScaleOptions[],\n  coordinates: G2CoordinateOptions[],\n) {\n  return scales\n    .map((scale) => {\n      const { name } = scale;\n      // todo wait for gui provide helix axis\n      if (isHelix(coordinates) || isTheta(coordinates)) return null;\n      if (\n        isTranspose(coordinates) &&\n        (isPolar(coordinates) || isRadial(coordinates))\n      )\n        return null;\n      // infer axis\n      if (name.startsWith('x')) {\n        if (isPolar(coordinates)) return ['axisArc', [scale]];\n        if (isRadial(coordinates)) return ['axisLinear', [scale]];\n        return [isTranspose(coordinates) ? 'axisY' : 'axisX', [scale]];\n      }\n      if (name.startsWith('y')) {\n        if (isPolar(coordinates)) return ['axisLinear', [scale]];\n        if (isRadial(coordinates)) return ['axisArc', [scale]];\n        return [isTranspose(coordinates) ? 'axisX' : 'axisY', [scale]];\n      }\n      // Only support linear axis for z.\n      if (name.startsWith('z')) {\n        return ['axisZ', [scale]];\n      }\n      if (name.startsWith('position')) {\n        if (isRadar(coordinates)) return ['axisRadar', [scale]];\n        if (!isPolar(coordinates)) return ['axisY', [scale]];\n      }\n      return null;\n    })\n    .filter(defined) as [string | GCC, G2ScaleOptions[]][];\n}\n\nfunction inferComponentsType(\n  scales: G2ScaleOptions[],\n  coordinates: G2CoordinateOptions[],\n): [string | GCC, G2ScaleOptions[]][] {\n  const availableScales = scales.filter((scale) => isValidScale(scale));\n  return [\n    ...inferLegendComponentType(availableScales, coordinates),\n    ...inferAxisComponentType(availableScales, coordinates),\n  ];\n}\n\nfunction angleOf(coordinates: G2CoordinateOptions[]) {\n  const polar = coordOf(coordinates, 'polar');\n  if (polar.length) {\n    const lastPolar = polar[polar.length - 1] as PolarOptions;\n    const { startAngle, endAngle } = getPolarOptions(lastPolar);\n    return [startAngle, endAngle];\n  }\n  const radial = coordOf(coordinates, 'radial') as RadialOptions[];\n  if (radial.length) {\n    const lastRadial = radial[radial.length - 1];\n    const { startAngle, endAngle } = getRadialOptions(lastRadial);\n    return [startAngle, endAngle];\n  }\n  return [-Math.PI / 2, (Math.PI / 2) * 3];\n}\n\n/**\n * match index of position\n */\nfunction matchPosition(name: string) {\n  const match = /position(\\d*)/g.exec(name);\n  if (!match) return null;\n  return +match[1];\n}\n\nfunction inferAxisPositionAndOrientation(\n  type: string,\n  ordinalPosition: [GCP, GCO],\n  relativeScales: G2ScaleOptions[],\n  scales: G2ScaleOptions[],\n  coordinates: G2CoordinateOptions[],\n): [GCP, GCO] {\n  // a axis only has one scale\n  const { name } = relativeScales[0];\n  // todo, in current resolution, the radar chart is implement by parallel + polar coordinate.\n  // implementation plan to be confirmed.\n  // in current implementation, it must to add the first position encode to it's last.\n  // so we won't render the last axis repeatably.\n  if (type === 'axisRadar') {\n    const positions = scales.filter((scale) =>\n      scale.name.startsWith('position'),\n    );\n    const index = matchPosition(name);\n    if (index === null) return [null, null];\n    // infer radar axis orientation\n    const [startAngle, endAngle] = angleOf(coordinates);\n    const positionLength = isRadar(coordinates)\n      ? positions.length\n      : positions.length - 1;\n    const angle =\n      ((endAngle - startAngle) / positionLength) * index + startAngle;\n    return ['center', angle];\n  }\n\n  if (type === 'axisY' && isParallel(coordinates)) {\n    return isTranspose(coordinates)\n      ? ['center', 'horizontal']\n      : ['center', 'vertical'];\n  }\n\n  // in non-cartesian coordinate systems, infer the arc axis angle\n  if (type === 'axisLinear') {\n    const [startAngle] = angleOf(coordinates);\n    return ['center', startAngle];\n  }\n\n  if (type === 'axisArc') {\n    if (ordinalPosition[0] === 'inner') return ['inner', null];\n    return ['outer', null];\n  }\n\n  if (isPolar(coordinates)) return ['center', null];\n  if (isRadial(coordinates)) return ['center', null];\n  if (\n    (type === 'axisX' && isReflect(coordinates)) ||\n    (type === 'axisX' && isReflectY(coordinates))\n  ) {\n    return ['top', null];\n  }\n\n  // if (type === 'axisX') return ['bottom', null];\n  return ordinalPosition;\n}\n\n// @todo Infer position by coordinates.\nfunction inferComponentPositionAndOrientation(\n  type: string | GCC,\n  defaultPosition: GCP,\n  defaultOrientation: GCO,\n  guide: G2GuideComponentOptions,\n  relativeScales: G2ScaleOptions[],\n  scales: G2ScaleOptions[],\n  coordinates: G2CoordinateOptions[],\n): [GCP, GCO] {\n  const [startAngle] = angleOf(coordinates);\n  const ordinalPositionAndOrientation: [GCP, GCO] = [\n    guide.position || defaultPosition,\n    startAngle ?? defaultOrientation,\n  ];\n\n  if (typeof type === 'string' && type.startsWith('axis')) {\n    return inferAxisPositionAndOrientation(\n      type,\n      ordinalPositionAndOrientation,\n      relativeScales,\n      scales,\n      coordinates,\n    );\n  }\n\n  if (\n    typeof type === 'string' &&\n    type.startsWith('legend') &&\n    isPolar(coordinates)\n  ) {\n    if (guide.position === 'center') return ['center', 'vertical'];\n  }\n  // for general component, use default position\n  return ordinalPositionAndOrientation;\n}\n\nfunction inferScrollableType(name: string, type: string, coordinates = []) {\n  if (name === 'x') return isTranspose(coordinates) ? `${type}Y` : `${type}X`;\n  if (name === 'y') return isTranspose(coordinates) ? `${type}X` : `${type}Y`;\n  return null;\n}\n\n/**\n * Infer scrollable components, such as slider and scrollbar.\n */\nfunction inferScrollableComponents(\n  partialOptions: G2View,\n  scales: G2ScaleOptions[],\n  library: G2Library,\n): G2GuideComponentOptions[] {\n  const [, createGuideComponent] = useLibrary<\n    G2GuideComponentOptions,\n    GCC,\n    GuideComponent\n  >('component', library);\n\n  const { coordinates } = partialOptions;\n\n  function normalized(\n    type: string,\n    channelName: string,\n    scale: G2ScaleOptions,\n    options: Record<string, any>,\n  ) {\n    const componentType = inferScrollableType(channelName, type, coordinates);\n    if (!options || !componentType) return;\n\n    const { props } = createGuideComponent(componentType);\n    const {\n      defaultPosition,\n      defaultSize,\n      defaultOrder,\n      defaultCrossPadding: [crossPadding],\n    } = props;\n    return {\n      position: defaultPosition,\n      defaultSize,\n      order: defaultOrder,\n      type: componentType,\n      crossPadding,\n      ...options,\n      scales: [scale],\n    };\n  }\n  return scales\n    .filter((d) => d.slider || d.scrollbar)\n    .flatMap((scale) => {\n      const { slider, scrollbar, name: channelName } = scale;\n      return [\n        normalized('slider', channelName, scale, slider),\n        normalized('scrollbar', channelName, scale, scrollbar),\n      ];\n    })\n    .filter((d) => !!d);\n}\n\n// !!! Note Mutate component.size and component.\nexport function computeComponentSize(\n  component: G2GuideComponentOptions,\n  crossSize: number,\n  crossPadding: [number, number],\n  position: GCP,\n  theme: G2Theme,\n  library: G2Library,\n) {\n  // Only compute and update size of components in padding area.\n  const { type } = component;\n  const paddingAreas = ['left', 'right', 'bottom', 'top'];\n  if (!paddingAreas.includes(position)) return;\n  if (typeof type !== 'string') return;\n  const t = type as unknown as string;\n  const createCompute = () => {\n    if (t.startsWith('axis')) return computeAxisSize;\n    if (t.startsWith('group')) return computeGroupSize;\n    if (t.startsWith('legendContinuous')) return computeContinuousLegendSize;\n    if (t === 'legendCategory') return computeCategoryLegendSize;\n    if (t.startsWith('slider')) return computeSliderSize;\n    if (t === 'title') return computeTitleSize;\n    if (t.startsWith('scrollbar')) return computeScrollbarSize;\n    return () => {};\n  };\n  return createCompute()(\n    component,\n    crossSize,\n    crossPadding,\n    position,\n    theme,\n    library,\n  );\n}\n\nfunction computeGroupSize(\n  component: G2GuideComponentOptions,\n  crossSize: number,\n  crossPadding: [number, number],\n  position: GCP,\n  theme: G2Theme,\n  library: G2Library,\n) {\n  const { children } = component;\n  const maxCrossPadding = max(\n    children,\n    (d: G2GuideComponentOptions) => d.crossPadding,\n  );\n  children.forEach((d) => (d.crossPadding = maxCrossPadding));\n  children.forEach((child) =>\n    computeComponentSize(\n      child,\n      crossSize,\n      crossPadding,\n      position,\n      theme,\n      library,\n    ),\n  );\n  const maxSize = max(children, (d: G2GuideComponentOptions) => d.size);\n  component.size = maxSize;\n  children.forEach((d) => (d.size = maxSize));\n}\n\nfunction computeScrollbarSize(\n  component: G2GuideComponentOptions,\n  crossSize: number,\n  crossPadding: [number, number],\n  position: GCP,\n  theme: G2Theme,\n  library: G2Library,\n) {\n  const { trackSize = 6 } = deepMix({}, theme.scrollbar, component);\n  component.size = trackSize;\n}\n\nfunction computeTitleSize(\n  component: G2GuideComponentOptions,\n  crossSize: number,\n  crossPadding: [number, number],\n  position: GCP,\n  theme: G2Theme,\n  library: G2Library,\n) {\n  const {\n    title,\n    subtitle,\n    spacing = 0,\n    ...style\n  } = deepMix({}, theme.title, component);\n  if (title) {\n    const titleStyle = subObject(style, 'title');\n    const titleBBox = computeLabelSize(title, titleStyle);\n    component.size = titleBBox.height;\n  }\n  if (subtitle) {\n    const subtitleStyle = subObject(style, 'subtitle');\n    const subtitleBBox = computeLabelSize(subtitle, subtitleStyle);\n    component.size += spacing + subtitleBBox.height;\n  }\n}\n\nfunction computeSliderSize(\n  component: G2GuideComponentOptions,\n  crossSize: number,\n  crossPadding: [number, number],\n  position: GCP,\n  theme: G2Theme,\n  library: G2Library,\n) {\n  const styleOf = () => {\n    const { slider } = theme;\n    return deepMix({}, slider, component);\n  };\n  const { trackSize, handleIconSize } = styleOf();\n  const size = Math.max(trackSize, handleIconSize * 2.4);\n  component.size = size;\n}\n\nfunction computeAxisSize(\n  component: G2GuideComponentOptions,\n  crossSize: number,\n  crossPadding: [number, number],\n  position: GCP,\n  theme: G2Theme,\n  library: G2Library,\n) {\n  // If padding is auto, use hide as the labelTransform by default\n  // to avoid overlap between labels.\n  component.transform = component.transform || [{ type: 'hide' }];\n\n  // Vertical or horizontal.\n  const isVertical = position === 'left' || position === 'right';\n\n  // Get styles to be applied.\n  const style = styleOf(component, position, theme);\n  const {\n    tickLength = 0,\n    labelSpacing = 0,\n    titleSpacing = 0,\n    labelAutoRotate,\n    ...rest\n  } = style;\n\n  // Compute Labels.\n  const scale = createScale(component, library);\n  const labelBBoxes = computeLabelsBBox(rest, scale);\n\n  // Compute dynamic tickLength if it's a function\n  let maxTickLength = tickLength;\n  if (typeof component.tickLength === 'function') {\n    const ticks = scale.getTicks?.() || scale.getOptions().domain;\n    const tickLengths = ticks.map((d, i, array) =>\n      component.tickLength(d, i, array),\n    );\n    maxTickLength = Math.max(...tickLengths, 0);\n  }\n\n  const paddingTick = maxTickLength + labelSpacing;\n  if (labelBBoxes && labelBBoxes.length) {\n    const maxLabelWidth = max(labelBBoxes, (d) => d.width);\n    const maxLabelHeight = max(labelBBoxes, (d) => d.height);\n    if (isVertical) {\n      component.size = maxLabelWidth + paddingTick;\n    } else {\n      const { tickFilter, labelTransform } = component;\n      // If the labels can't be placed horizontally, and labelTransform is unset,\n      // rotate 90 deg to display them.\n      if (\n        overflowX(scale, labelBBoxes, crossSize, crossPadding, tickFilter) &&\n        !labelTransform &&\n        labelAutoRotate !== false &&\n        labelAutoRotate !== null\n      ) {\n        component.labelTransform = 'rotate(90)';\n        component.size = maxLabelWidth + paddingTick;\n      } else {\n        component.labelTransform = component.labelTransform ?? 'rotate(0)';\n        component.size = maxLabelHeight + paddingTick;\n      }\n    }\n  } else {\n    component.size = maxTickLength;\n  }\n\n  // Compute title.\n  const titleBBox = computeTitleBBox(rest);\n  if (titleBBox) {\n    if (isVertical) {\n      component.size += titleSpacing + titleBBox.width;\n    } else {\n      component.size += titleSpacing + titleBBox.height;\n    }\n  }\n}\n\nfunction computeContinuousLegendSize(\n  component: G2GuideComponentOptions,\n  crossSize: number,\n  crossPadding: [number, number],\n  position: GCP,\n  theme: G2Theme,\n  library: G2Library,\n) {\n  // Get styles.\n  const styleOf = () => {\n    const { legendContinuous } = theme;\n    return deepMix({}, legendContinuous, component);\n  };\n  const { labelSpacing = 0, titleSpacing = 0, ...rest } = styleOf();\n\n  // Vertical or horizontal.\n  const isVertical = position === 'left' || position === 'right';\n\n  // Ribbon styles.\n  const ribbonStyles = subObject(rest, 'ribbon');\n  const { size: ribbonSize } = ribbonStyles;\n\n  const handleIconStyles = subObject(rest, 'handleIcon');\n  const { size: handleIconSize } = handleIconStyles;\n\n  const mainSize = Math.max(\n    ribbonSize,\n    handleIconSize * 2.4, // height = width * 2.4\n  );\n\n  component.size = mainSize;\n\n  // Compute labels.\n  const scale = createScale(component, library);\n  const labelBBoxes = computeLabelsBBox(rest, scale);\n  if (labelBBoxes) {\n    const key = isVertical ? 'width' : 'height';\n    const size = max(labelBBoxes, (d) => d[key]);\n    component.size += size + labelSpacing;\n  }\n\n  // Compute title.\n  const titleBBox = computeTitleBBox(rest);\n  if (titleBBox) {\n    if (isVertical) {\n      component.size = Math.max(component.size, titleBBox.width);\n    } else {\n      component.size += titleSpacing + titleBBox.height;\n    }\n  }\n}\n\nfunction computeCategoryLegendSize(\n  component: G2GuideComponentOptions,\n  crossSize0: number,\n  crossPadding: [number, number],\n  position: GCP,\n  theme: G2Theme,\n  library: G2Library,\n) {\n  const styleOf = () => {\n    const { legendCategory } = theme;\n    const { title } = component;\n    const [defaultTitle, specifiedTitle] = Array.isArray(title)\n      ? [title, undefined]\n      : [undefined, title];\n    return deepMix({ title: defaultTitle }, legendCategory, {\n      ...component,\n      title: specifiedTitle,\n    });\n  };\n\n  const {\n    focus,\n    itemSpacing,\n    focusMarkerSize,\n    itemMarkerSize,\n    titleSpacing,\n    rowPadding,\n    colPadding,\n    maxCols = Infinity,\n    maxRows = Infinity,\n    ...rest\n  } = styleOf();\n\n  const { cols, length } = component;\n\n  const getRows = (rows) => Math.min(rows, maxRows);\n  const getCols = (cols) => Math.min(cols, maxCols);\n\n  // Vertical or horizontal.\n  const isVertical = position === 'left' || position === 'right';\n\n  const crossSize =\n    length === undefined\n      ? crossSize0 + (isVertical ? 0 : crossPadding[0] + crossPadding[1])\n      : length;\n\n  // Compute title.\n  const titleBBox = computeTitleBBox(rest);\n\n  const scale = createScale(component, library);\n  const labelBBoxes = computeLabelsBBox(rest, scale, 'itemLabel');\n\n  const height = Math.max(labelBBoxes[0].height, itemMarkerSize) + rowPadding;\n  const widthOf = (w, padding = 0) =>\n    itemMarkerSize +\n    w +\n    itemSpacing[0] +\n    padding +\n    (focus ? focusMarkerSize + itemSpacing[2] : 0);\n\n  // Only support grid layout for vertical area.\n  const computeVerticalSize = () => {\n    let maxSize = -Infinity;\n    let pos = 0;\n    let cols = 1;\n    let rows = 0;\n    let maxRows = -Infinity;\n    let maxPos = -Infinity;\n    const titleHeight = titleBBox ? titleBBox.height : 0;\n    const maxHeight = crossSize - titleHeight;\n    for (const { width } of labelBBoxes) {\n      const w = widthOf(width, colPadding);\n      maxSize = Math.max(maxSize, w);\n      if (pos + height > maxHeight) {\n        cols++;\n        maxRows = Math.max(maxRows, rows);\n        maxPos = Math.max(maxPos, pos);\n        rows = 1;\n        pos = height;\n      } else {\n        pos += height;\n        rows++;\n      }\n    }\n    if (cols <= 1) {\n      maxRows = rows;\n      maxPos = pos;\n    }\n    component.size = maxSize * getCols(cols);\n    component.length = maxPos + titleHeight;\n    deepMix(component, { cols: getCols(cols), gridRow: maxRows });\n  };\n\n  // Horizontal grid layout.\n  const computeHorizontalGrid = () => {\n    const rows = Math.ceil(labelBBoxes.length / cols);\n    const maxWidth = max(labelBBoxes, (d) => widthOf(d.width)) * cols;\n    component.size = height * getRows(rows) - rowPadding;\n    component.length = Math.min(maxWidth, crossSize);\n  };\n\n  // Horizontal flex layout.\n  const computeHorizontalFlex = () => {\n    let rows = 1;\n    let pos = 0;\n    let maxPos = -Infinity;\n    for (const { width } of labelBBoxes) {\n      const w = widthOf(width, colPadding);\n      if (pos + w > crossSize) {\n        maxPos = Math.max(maxPos, pos);\n        pos = w;\n        rows++;\n      } else {\n        pos += w;\n      }\n    }\n    if (rows === 1) maxPos = pos;\n    component.size = height * getRows(rows) - rowPadding;\n    component.length = maxPos;\n  };\n\n  if (isVertical) computeVerticalSize();\n  else if (typeof cols === 'number') computeHorizontalGrid();\n  else computeHorizontalFlex();\n\n  // Compute titles.\n  if (titleBBox) {\n    if (isVertical) {\n      component.size = Math.max(component.size, titleBBox.width);\n    } else {\n      component.size += titleSpacing + titleBBox.height;\n    }\n  }\n}\n\nexport function createScale(\n  component: G2GuideComponentOptions,\n  library: G2Library,\n): Scale {\n  const [useScale] = useLibrary<G2ScaleOptions, ScaleComponent, Scale>(\n    'scale',\n    library,\n  );\n  // Init scale, the tickCount of axis has higher priority than scale.\n  const { scales, tickCount, tickMethod } = component;\n  const scaleOptions = scales.find(\n    (d) => d.type !== 'constant' && d.type !== 'identity',\n  );\n  if (tickCount !== undefined) scaleOptions.tickCount = tickCount;\n  if (tickMethod !== undefined) scaleOptions.tickMethod = tickMethod;\n  return useScale(scaleOptions);\n}\n\nexport function computeLabelsBBox(\n  component: G2GuideComponentOptions,\n  scale: Scale,\n  key = 'label',\n) {\n  const { labelFormatter, tickFilter, label = true, ...style } = component;\n  if (!label) return null;\n\n  // Get labels to be rendered.\n  const labels = labelsOf(scale, labelFormatter, tickFilter);\n  const labelStyle = subObject(style, key);\n  const labelStyles = labels.map((d, i) =>\n    Object.fromEntries(\n      Object.entries(labelStyle).map(([key, value]) => [\n        key,\n        typeof value === 'function' ? value(d, i) : value,\n      ]),\n    ),\n  );\n  const labelBBoxes = labels.map((d, i) => {\n    const normalizeStyle = labelStyles[i];\n    return computeLabelSize(d, normalizeStyle);\n  });\n\n  // Cache boxes to avoid computed twice.\n  // @todo GUI use untransformed bbox, so it can't cache if\n  // label.style has transform attributes.\n  const hasTransform = labelStyles.some((d) => d.transform);\n  if (!hasTransform) {\n    const I = labels.map((_, i) => i);\n    component.indexBBox = new Map(\n      I.map((i) => [i, [labels[i], labelBBoxes[i]]]),\n    );\n  }\n\n  return labelBBoxes;\n}\n\nexport function computeTitleBBox(component: G2GuideComponentOptions) {\n  const isFalsy = (x) => x === false || x === null;\n  const { title, ...style } = component;\n  if (isFalsy(title) || title === undefined) return null;\n  const titleStyle = subObject(style, 'title');\n  const { direction, transform } = titleStyle;\n  const titleText = Array.isArray(title) ? title.join(',') : title;\n  if (typeof titleText !== 'string') return null;\n  const titleBBox = computeLabelSize(titleText, {\n    ...titleStyle,\n    transform: transform || (direction === 'vertical' ? 'rotate(-90)' : ''),\n  });\n  return titleBBox;\n}\n\nexport function styleOf(\n  axis: G2GuideComponentOptions,\n  position: GCP,\n  theme: G2Theme,\n): Record<string, any> {\n  const { title } = axis;\n  const [defaultTitle, specifiedTitle] = Array.isArray(title)\n    ? [title, undefined]\n    : [undefined, title];\n  const {\n    axis: baseStyle,\n    // @ts-ignore\n    [`axis${capitalizeFirst(position)}`]: positionStyle,\n  } = theme;\n  return deepMix({ title: defaultTitle }, baseStyle, positionStyle, {\n    ...axis,\n    title: specifiedTitle,\n  });\n}\n\nfunction ticksOf(scale: Scale, tickFilter: (d: any) => boolean): any[] {\n  const ticks = scale.getTicks ? scale.getTicks() : scale.getOptions().domain;\n  if (!tickFilter) return ticks;\n  return ticks.filter(tickFilter);\n}\n\nfunction labelsOf(\n  scale: Scale,\n  labelFormatter: (d: any) => string | DisplayObject,\n  tickFilter,\n): (string | DisplayObject)[] {\n  const T = ticksOf(scale, tickFilter);\n  const ticks = T.map((d) => (typeof d === 'number' ? prettyNumber(d) : d));\n  const formatter = labelFormatter\n    ? typeof labelFormatter === 'string'\n      ? format(labelFormatter)\n      : labelFormatter\n    : scale.getFormatter\n    ? scale.getFormatter()\n    : (d) => `${d}`;\n  return ticks.map(formatter);\n}\n\nfunction offsetOf(scale: Scale, d: any): number {\n  if (!scale.getBandWidth) return 0;\n  const offset = scale.getBandWidth(d) / 2;\n  return offset;\n}\n\nfunction overflowX(\n  scale: Scale,\n  labelBBoxes: DOMRect[],\n  crossSize: number,\n  crossPadding: [number, number],\n  tickFilter: (d: any) => boolean,\n): boolean {\n  // If actual size bigger than container size, overflow.\n  const totalSize = sum(labelBBoxes, (d) => d.width);\n  if (totalSize > crossSize) return true;\n\n  // Clone scale to get visual position for labels.\n  const scaleX = scale.clone();\n  scaleX.update({ range: [0, crossSize] });\n  const ticks = ticksOf(scale, tickFilter);\n  const X = ticks.map((d) => scaleX.map(d) + offsetOf(scaleX, d));\n\n  const I = ticks.map((_, i) => i);\n  const startX = -crossPadding[0];\n  const endX = crossSize + crossPadding[1];\n  const extent = (x, bbox) => {\n    const { width } = bbox;\n    return [x - width / 2, x + width / 2];\n  };\n\n  // Collision detection.\n  for (let i = 0; i < I.length; i++) {\n    const x = X[i];\n    const [x0, x1] = extent(x, labelBBoxes[i]);\n    // If a label is out of plot area, overflow.\n    if (x0 < startX || x1 > endX) return true;\n    const y = X[i + 1];\n    if (y) {\n      // If two labels intersect, overflow.\n      const [y0] = extent(y, labelBBoxes[i + 1]);\n      if (x1 > y0) return true;\n    }\n  }\n  return false;\n}\n\nfunction computeLabelSize(\n  d: string | DisplayObject,\n  style: Record<string, any>,\n): DOMRect {\n  const shape = normalizeLabel(d);\n  const { filter, ...rest } = style;\n  shape.attr({ ...rest, visibility: 'none' });\n  const bbox = shape.getBBox();\n  return bbox;\n}\n\nfunction normalizeLabel(d: string | DisplayObject): DisplayObject {\n  if (d instanceof DisplayObject) return d;\n  return new Text({ style: { text: `${d}` } });\n}\n", "import { Coordinate } from '@antv/coord';\nimport {\n  NestedInternMap,\n  ascending,\n  group,\n  max,\n  min,\n  sum,\n} from '@antv/vendor/d3-array';\nimport { measureTextWidth } from '@antv/component';\nimport { deepMix, head, last, get } from '@antv/util';\nimport { isParallel, isPolar, isRadar, radiusOf } from '../utils/coordinate';\nimport { capitalizeFirst, defined } from '../utils/helper';\nimport { divide } from '../utils/array';\nimport { camelCase } from '../utils/string';\nimport {\n  GuideComponentPosition as GCP,\n  GuideComponentOrientation as GCO,\n  Layout,\n  Section,\n  SectionArea,\n  G2Theme,\n  GuideComponentPlane,\n} from './types/common';\nimport {\n  computeComponentSize,\n  computeLabelsBBox,\n  computeTitleBBox,\n  createScale,\n  groupComponents,\n  styleOf,\n} from './component';\nimport { G2GuideComponentOptions, G2Library, G2View } from './types/options';\nimport {\n  isPolar as isPolarOptions,\n  isRadial as isRadarOptions,\n} from './coordinate';\n\nconst DEFAULT_MARGIN = 16;\n\nexport function processAxisZ(components: G2GuideComponentOptions[]) {\n  const axisX = components.find(({ type }) => type === 'axisX');\n  const axisY = components.find(({ type }) => type === 'axisY');\n  const axisZ = components.find(({ type }) => type === 'axisZ');\n  if (axisX && axisY && axisZ) {\n    axisX.plane = 'xy';\n    axisY.plane = 'xy';\n    axisZ.plane = 'yz';\n    axisZ.origin = [axisX.bbox.x, axisX.bbox.y, 0];\n    axisZ.eulerAngles = [0, -90, 0];\n    axisZ.bbox.x = axisX.bbox.x;\n    axisZ.bbox.y = axisX.bbox.y;\n    components.push({\n      ...axisX,\n      plane: 'xz',\n      showLabel: false,\n      showTitle: false,\n      origin: [axisX.bbox.x, axisX.bbox.y, 0],\n      eulerAngles: [-90, 0, 0],\n    });\n    components.push({\n      ...axisY,\n      plane: 'yz',\n      showLabel: false,\n      showTitle: false,\n      origin: [axisY.bbox.x + axisY.bbox.width, axisY.bbox.y, 0],\n      eulerAngles: [0, -90, 0],\n    });\n    components.push({\n      ...axisZ,\n      plane: 'xz',\n      actualPosition: 'left',\n      showLabel: false,\n      showTitle: false,\n      eulerAngles: [90, -90, 0],\n    });\n  }\n}\n\nexport function computeLayout(\n  components: G2GuideComponentOptions[],\n  options: G2View,\n  theme: G2Theme,\n  library: G2Library,\n): Layout {\n  const {\n    width,\n    height,\n    depth,\n    x = 0,\n    y = 0,\n    z = 0,\n    inset = theme.inset ?? 0,\n    insetLeft = inset,\n    insetTop = inset,\n    insetBottom = inset,\n    insetRight = inset,\n    margin = theme.margin ?? 0,\n    marginLeft = margin,\n    marginBottom = margin,\n    marginTop = margin,\n    marginRight = margin,\n    padding = theme.padding,\n    paddingBottom = padding,\n    paddingLeft = padding,\n    paddingRight = padding,\n    paddingTop = padding,\n  } = computeInset(components, options, theme, library);\n\n  const isDefaultLayoutLeft =\n    marginLeft === DEFAULT_MARGIN && paddingLeft === 'auto';\n  const isDefaultLayoutRight =\n    marginRight === DEFAULT_MARGIN && paddingRight === 'auto';\n  const isTranspose = get(options, 'coordinates', []).some(\n    (t) => t.type === 'transpose',\n  );\n  const axisX = components.find(({ type }) => type === 'axisX');\n  const { size, labelTransform } = axisX || {};\n\n  const MIN_CONTENT_RATIO = 1 / 4;\n\n  const maybeClamp = (viewWidth, paddingLeft, paddingRight, pl0, pr0) => {\n    // Only clamp when has marks.\n    const { marks } = options;\n    if (marks.length === 0) return [pl0, pr0];\n\n    // If size of content is enough, skip.\n    const contentSize = viewWidth - pl0 - pr0;\n    const diff = contentSize - viewWidth * MIN_CONTENT_RATIO;\n    if (diff > 0) return [pl0, pr0];\n\n    // Shrink start and end size equally.\n    const shrinkSize = viewWidth * (1 - MIN_CONTENT_RATIO);\n    return [\n      paddingLeft === 'auto' ? (shrinkSize * pl0) / (pl0 + pr0) : pl0,\n      paddingRight === 'auto' ? (shrinkSize * pr0) / (pl0 + pr0) : pr0,\n    ];\n  };\n\n  const roughPadding = (padding) => (padding === 'auto' ? 20 : padding ?? 20);\n  const rpt = roughPadding(paddingTop);\n  const rpb = roughPadding(paddingBottom);\n\n  // Compute paddingLeft and paddingRight first to get innerWidth.\n  const horizontalPadding = computePadding(\n    components,\n    height - rpt - rpb,\n    [rpt + marginTop, rpb + marginBottom],\n    ['left', 'right'],\n    options,\n    theme,\n    library,\n  );\n  const { paddingLeft: pl0, paddingRight: pr0 } = horizontalPadding;\n  const viewWidth = width - marginLeft - marginRight;\n  let [pl, pr] = maybeClamp(viewWidth, paddingLeft, paddingRight, pl0, pr0);\n  let iw = viewWidth - pl - pr;\n\n  // Compute paddingBottom and paddingTop based on innerWidth.\n  const verticalPadding = computePadding(\n    components,\n    iw,\n    [pl + marginLeft, pr + marginRight],\n    ['bottom', 'top'],\n    options,\n    theme,\n    library,\n  );\n  const { paddingTop: pt0, paddingBottom: pb0 } = verticalPadding;\n  const viewHeight = height - marginBottom - marginTop;\n  const [pb, pt] = maybeClamp(viewHeight, paddingBottom, paddingTop, pb0, pt0);\n  const ih = viewHeight - pb - pt;\n\n  // Adjust paddingLeft and paddingRight for axisX when they are 'auto' and not specified by user.\n  if (size && !isTranspose && !labelTransform) {\n    const { fontSize = 12, fontFamily = 'sans-serif', scales = [] } = axisX;\n    const domain = scales?.[0]?.domain ?? [];\n    if (!domain.length) return;\n\n    const adjustSide = (\n      side: 'left' | 'right',\n      labelText: string,\n      margin: number,\n      padding: number,\n    ) => {\n      const labelWidth = measureTextWidth(labelText, { fontSize, fontFamily });\n      const diff = labelWidth / 2 - margin - padding;\n      if (diff > 0) {\n        iw -= diff;\n        if (side === 'left') pl += labelWidth / 2 - margin;\n        else pr += labelWidth / 2 - margin;\n      }\n    };\n\n    if (isDefaultLayoutLeft) {\n      adjustSide('left', head(domain), marginLeft, pl);\n    }\n\n    if (isDefaultLayoutRight) {\n      adjustSide('right', last(domain), marginRight, pr);\n    }\n  }\n\n  return {\n    width,\n    height,\n    depth,\n    insetLeft,\n    insetTop,\n    insetBottom,\n    insetRight,\n    innerWidth: iw,\n    innerHeight: ih,\n    paddingLeft: pl,\n    paddingRight: pr,\n    paddingTop: pt,\n    paddingBottom: pb,\n    marginLeft,\n    marginBottom,\n    marginTop,\n    marginRight,\n    x,\n    y,\n    z,\n  };\n}\n\n// For composite mark with a layout algorithm and without axis,\n// such as worldcloud, circlepack.\nexport function computeRoughPlotSize(options: G2View) {\n  const {\n    height,\n    width,\n    padding = 0,\n    paddingLeft = padding,\n    paddingRight = padding,\n    paddingTop = padding,\n    paddingBottom = padding,\n    margin = 16,\n    marginLeft = margin,\n    marginRight = margin,\n    marginTop = margin,\n    marginBottom = margin,\n    inset = 0,\n    insetLeft = inset,\n    insetRight = inset,\n    insetTop = inset,\n    insetBottom = inset,\n  } = options;\n\n  // @todo Add this padding to theme.\n  // 30 is default size for padding, which defined in runtime.\n  const maybeAuto = (padding) => (padding === 'auto' ? 20 : padding);\n\n  const finalWidth =\n    width -\n    maybeAuto(paddingLeft) -\n    maybeAuto(paddingRight) -\n    marginLeft -\n    marginRight -\n    insetLeft -\n    insetRight;\n\n  const finalHeight =\n    height -\n    maybeAuto(paddingTop) -\n    maybeAuto(paddingBottom) -\n    marginTop -\n    marginBottom -\n    insetTop -\n    insetBottom;\n\n  return { width: finalWidth, height: finalHeight };\n}\n\nfunction computeInset(\n  components: G2GuideComponentOptions[],\n  options: G2View,\n  theme: G2Theme,\n  library: G2Library,\n) {\n  const { coordinates } = options;\n  if (!isPolarOptions(coordinates) && !isRadarOptions(coordinates)) {\n    return options;\n  }\n\n  // Filter axis.\n  const axes = components.filter(\n    (d) => typeof d.type === 'string' && d.type.startsWith('axis'),\n  );\n\n  if (axes.length === 0) return options;\n\n  const styles = axes.map((component) => {\n    const key = component.type === 'axisArc' ? 'arc' : 'linear';\n    return styleOf(component, key as any, theme);\n  });\n\n  // Compute max labelSpacing.\n  const maxLabelSpacing = max(styles, (d) => d.labelSpacing ?? 0);\n\n  // Compute labelBBoxes.\n  const labelBBoxes = axes\n    .flatMap((component, i) => {\n      const style = styles[i];\n      const scale = createScale(component, library);\n      const labels = computeLabelsBBox(style, scale);\n      return labels;\n    })\n    .filter(defined);\n\n  const size = max(labelBBoxes, (d) => d.height) + maxLabelSpacing;\n\n  // Compute titles.\n  const titleBBoxes = axes\n    .flatMap((_, i) => {\n      const style = styles[i];\n      return computeTitleBBox(style);\n    })\n    .filter((d) => d !== null);\n  const titleSize =\n    titleBBoxes.length === 0 ? 0 : max(titleBBoxes, (d) => d.height);\n\n  // Update inset.\n  const {\n    inset = size,\n    insetLeft = inset,\n    insetBottom = inset,\n    insetTop = inset + titleSize,\n    insetRight = inset,\n  } = options;\n  return { ...options, insetLeft, insetBottom, insetTop, insetRight };\n}\n\n/**\n * @todo Support percentage size(e.g. 50%)\n */\nfunction computePadding(\n  components: G2GuideComponentOptions[],\n  crossSize: number,\n  crossPadding: [number, number],\n  positions: GCP[],\n  options: G2View,\n  theme: G2Theme,\n  library: G2Library,\n) {\n  const positionComponents = group(components, (d) => d.position);\n  const {\n    padding = theme.padding,\n    paddingLeft = padding,\n    paddingRight = padding,\n    paddingBottom = padding,\n    paddingTop = padding,\n  } = options;\n  const layout = {\n    paddingBottom,\n    paddingLeft,\n    paddingTop,\n    paddingRight,\n  };\n\n  for (const position of positions) {\n    const key = `padding${capitalizeFirst(camelCase(position))}`;\n    const components = positionComponents.get(position) || [];\n    const value = layout[key];\n    const defaultSizeOf = (d) => {\n      if (d.size === undefined) d.size = d.defaultSize;\n    };\n    const sizeOf = (d) => {\n      if (d.type === 'group') {\n        d.children.forEach(defaultSizeOf);\n        d.size = max(d.children, (d) => (d as any).size);\n      } else {\n        d.size = d.defaultSize;\n      }\n    };\n    const autoSizeOf = (d) => {\n      if (d.size) return;\n      if (value !== 'auto') sizeOf(d);\n      else {\n        // Compute component size dynamically.\n        computeComponentSize(\n          d,\n          crossSize,\n          crossPadding,\n          position,\n          theme,\n          library,\n        );\n        defaultSizeOf(d);\n      }\n    };\n\n    const maybeHide = (d) => {\n      if (!d.type.startsWith('axis')) return;\n      if (d.labelAutoHide === undefined) d.labelAutoHide = true;\n    };\n\n    const isHorizontal = position === 'bottom' || position === 'top';\n\n    // !!!Note\n    // Mute axis component padding.\n    // The first axis do not has padding.\n    const minOrder = min(components, (d) => d.order);\n    const axes = components.filter(\n      (d) => (d.type as string).startsWith('axis') && d.order == minOrder,\n    );\n    if (axes.length) axes[0].crossPadding = 0;\n\n    // Specified padding.\n    if (typeof value === 'number') {\n      components.forEach(defaultSizeOf);\n      components.forEach(maybeHide);\n    } else {\n      // Compute padding dynamically.\n      if (components.length === 0) {\n        layout[key] = 0;\n      } else {\n        const size = isHorizontal\n          ? crossSize + crossPadding[0] + crossPadding[1]\n          : crossSize;\n        const grouped = groupComponents(components, size);\n        grouped.forEach(autoSizeOf);\n        const totalSize = grouped.reduce(\n          (sum, { size, crossPadding = 12 }) => sum + size + crossPadding,\n          0,\n        );\n        layout[key] = totalSize;\n      }\n    }\n  }\n\n  return layout;\n}\n\nexport function placeComponents(\n  components: G2GuideComponentOptions[],\n  coordinate: Coordinate,\n  layout: Layout,\n): void {\n  // Group components by plane & position.\n\n  const positionComponents: NestedInternMap<\n    G2GuideComponentOptions,\n    G2GuideComponentOptions[],\n    [string]\n  > = group<G2GuideComponentOptions, [string]>(\n    components,\n    (d) => `${d.plane || 'xy'}-${d.position}`,\n  );\n\n  const {\n    paddingLeft,\n    paddingRight,\n    paddingTop,\n    paddingBottom,\n    marginLeft,\n    marginTop,\n    marginBottom,\n    marginRight,\n    innerHeight,\n    innerWidth,\n    insetBottom,\n    insetLeft,\n    insetRight,\n    insetTop,\n    height,\n    width,\n    depth,\n  } = layout;\n\n  const planes = {\n    xy: createSection({\n      width,\n      height,\n      paddingLeft,\n      paddingRight,\n      paddingTop,\n      paddingBottom,\n      marginLeft,\n      marginTop,\n      marginBottom,\n      marginRight,\n      innerHeight,\n      innerWidth,\n      insetBottom,\n      insetLeft,\n      insetRight,\n      insetTop,\n    }),\n    yz: createSection({\n      width: depth,\n      height: height,\n      paddingLeft: 0,\n      paddingRight: 0,\n      paddingTop: 0,\n      paddingBottom: 0,\n      marginLeft: 0,\n      marginTop: 0,\n      marginBottom: 0,\n      marginRight: 0,\n      innerWidth: depth,\n      innerHeight: height,\n      insetBottom: 0,\n      insetLeft: 0,\n      insetRight: 0,\n      insetTop: 0,\n    }),\n    xz: createSection({\n      width,\n      height: depth,\n      paddingLeft: 0,\n      paddingRight: 0,\n      paddingTop: 0,\n      paddingBottom: 0,\n      marginLeft: 0,\n      marginTop: 0,\n      marginBottom: 0,\n      marginRight: 0,\n      innerWidth: width,\n      innerHeight: depth,\n      insetBottom: 0,\n      insetLeft: 0,\n      insetRight: 0,\n      insetTop: 0,\n    }),\n  };\n\n  for (const [key, components] of positionComponents.entries()) {\n    const [plane, position] = key.split('-') as [GuideComponentPlane, GCP];\n    const area = planes[plane][position];\n\n    /**\n     * @description non-entity components: axis in the center, inner, outer, component in the center\n     * @description entity components: other components\n     * @description no volume components take up no extra space\n     */\n\n    const [nonEntityComponents, entityComponents] = divide(\n      components,\n      (component) => {\n        if (typeof component.type !== 'string') return false;\n        if (position === 'center') return true;\n        if (\n          component.type.startsWith('axis') &&\n          ['inner', 'outer'].includes(position)\n        ) {\n          return true;\n        }\n        return false;\n      },\n    );\n\n    if (nonEntityComponents.length) {\n      placeNonEntityComponents(nonEntityComponents, coordinate, area, position);\n    }\n    if (entityComponents.length) {\n      placePaddingArea(components, coordinate, area);\n    }\n  }\n}\n\nfunction createSection({\n  width,\n  height,\n  paddingLeft,\n  paddingRight,\n  paddingTop,\n  paddingBottom,\n  marginLeft,\n  marginTop,\n  marginBottom,\n  marginRight,\n  innerHeight,\n  innerWidth,\n  insetBottom,\n  insetLeft,\n  insetRight,\n  insetTop,\n}: {\n  width: number;\n  height: number;\n  paddingLeft: number;\n  paddingRight: number;\n  paddingTop: number;\n  paddingBottom: number;\n  marginLeft: number;\n  marginTop: number;\n  marginBottom: number;\n  marginRight: number;\n  innerHeight: number;\n  innerWidth: number;\n  insetBottom: number;\n  insetLeft: number;\n  insetRight: number;\n  insetTop: number;\n}): Section {\n  const pl = paddingLeft + marginLeft;\n  const pt = paddingTop + marginTop;\n  const pr = paddingRight + marginRight;\n  const pb = paddingBottom + marginBottom;\n  const plotWidth = width - marginLeft - marginRight;\n\n  const centerSection: SectionArea = [\n    pl + insetLeft,\n    pt + insetTop,\n    innerWidth - insetLeft - insetRight,\n    innerHeight - insetTop - insetBottom,\n    'center',\n    null,\n    null,\n  ];\n\n  const xySection: Section = {\n    top: [\n      pl,\n      0,\n      innerWidth,\n      pt,\n      'vertical',\n      true,\n      ascending,\n      marginLeft,\n      plotWidth,\n    ],\n    right: [width - pr, pt, pr, innerHeight, 'horizontal', false, ascending],\n    bottom: [\n      pl,\n      height - pb,\n      innerWidth,\n      pb,\n      'vertical',\n      false,\n      ascending,\n      marginLeft,\n      plotWidth,\n    ],\n    left: [0, pt, pl, innerHeight, 'horizontal', true, ascending],\n    'top-left': [pl, 0, innerWidth, pt, 'vertical', true, ascending],\n    'top-right': [pl, 0, innerWidth, pt, 'vertical', true, ascending],\n    'bottom-left': [\n      pl,\n      height - pb,\n      innerWidth,\n      pb,\n      'vertical',\n      false,\n      ascending,\n    ],\n    'bottom-right': [\n      pl,\n      height - pb,\n      innerWidth,\n      pb,\n      'vertical',\n      false,\n      ascending,\n    ],\n    center: centerSection,\n    inner: centerSection,\n    outer: centerSection,\n  };\n\n  return xySection;\n}\n\nfunction placeNonEntityComponents(\n  components: G2GuideComponentOptions[],\n  coordinate: Coordinate,\n  area: SectionArea,\n  position: GCP,\n) {\n  const [axisComponents, nonAxisComponents] = divide(\n    components,\n    (component) => {\n      if (\n        typeof component.type === 'string' &&\n        component.type.startsWith('axis')\n      ) {\n        return true;\n      }\n      return false;\n    },\n  );\n\n  placeNonEntityAxis(axisComponents, coordinate, area, position);\n  // in current stage, only legend component which located in the center can be placed\n  placeCenter(nonAxisComponents, coordinate, area);\n}\n\nfunction placeNonEntityAxis(\n  components: G2GuideComponentOptions[],\n  coordinate: Coordinate,\n  area: SectionArea,\n  position: GCP,\n) {\n  if (position === 'center') {\n    if (isRadar(coordinate)) {\n      placeAxisRadar(components, coordinate, area, position);\n    } else if (isPolar(coordinate)) {\n      placeArcLinear(components, coordinate, area);\n    } else if (isParallel(coordinate)) {\n      placeAxisParallel(\n        components,\n        coordinate,\n        area,\n        components[0].orientation, // assume that all components have the same orientation\n      );\n    }\n  } else if (position === 'inner') {\n    placeAxisArcInner(components, coordinate, area);\n  } else if (position === 'outer') {\n    placeAxisArcOuter(components, coordinate, area);\n  }\n}\n\nfunction placeAxisArcInner(\n  components: G2GuideComponentOptions[],\n  coordinate: Coordinate,\n  area: SectionArea,\n) {\n  const [x, y, , height] = area;\n  const [cx, cy] = coordinate.getCenter();\n  const [innerRadius] = radiusOf(coordinate);\n  const r = height / 2;\n  const size = innerRadius * r;\n  const x0 = cx - size;\n  const y0 = cy - size;\n  for (let i = 0; i < components.length; i++) {\n    const component = components[i];\n    component.bbox = {\n      x: x + x0,\n      y: y + y0,\n      width: size * 2,\n      height: size * 2,\n    };\n  }\n}\n\nfunction placeAxisArcOuter(\n  components: G2GuideComponentOptions[],\n  coordinate: Coordinate,\n  area: SectionArea,\n) {\n  const [x, y, width, height] = area;\n  for (const component of components) {\n    component.bbox = { x, y, width, height };\n  }\n}\n\n/**\n * @example arcX, arcY, axisLinear with angle\n */\nfunction placeArcLinear(\n  components: G2GuideComponentOptions[],\n  coordinate: Coordinate,\n  area: SectionArea,\n) {\n  const [x, y, width, height] = area;\n  for (const component of components) {\n    component.bbox = { x: x, y, width, height };\n  }\n}\n\nfunction placeAxisParallel(\n  components: G2GuideComponentOptions[],\n  coordinate: Coordinate,\n  area: SectionArea,\n  orientation: GCO,\n) {\n  if (orientation === 'horizontal') {\n    placeAxisParallelHorizontal(components, coordinate, area);\n  } else if (orientation === 'vertical') {\n    placeAxisParallelVertical(components, coordinate, area);\n  }\n}\n\nfunction placeAxisParallelVertical(\n  components: G2GuideComponentOptions[],\n  coordinate: Coordinate,\n  area: SectionArea,\n): void {\n  const [x, y, , height] = area;\n\n  // Create a high dimension vector and map to a list of two-dimension points.\n  // [0, 0, 0] -> [x0, 0, x1, 0, x2, 0]\n  const vector = new Array(components.length).fill(0);\n  const points = coordinate.map(vector);\n\n  // Extract x of each points.\n  // [x0, 0, x1, 0, x2, 0] -> [x0, x1, x2]\n  const X = points.filter((_, i) => i % 2 === 0).map((d) => d + x);\n\n  // Place each axis by coordinate in parallel coordinate.\n  for (let i = 0; i < components.length; i++) {\n    const component = components[i];\n    const x = X[i];\n    const width = X[i + 1] - x;\n    component.bbox = { x, y, width, height };\n  }\n}\n\nfunction placeAxisParallelHorizontal(\n  components: G2GuideComponentOptions[],\n  coordinate: Coordinate,\n  area: SectionArea,\n): void {\n  const [x, y, width] = area;\n\n  // Create a high dimension vector and map to a list of two-dimension points.\n  // [0, 0, 0] -> [height, y0, height, y1, height, y2]\n  const vector = new Array(components.length).fill(0);\n  const points = coordinate.map(vector);\n\n  // Extract y of each points.\n  // [x0, 0, x1, 0, x2, 0] -> [x0, x1, x2]\n  const Y = points.filter((_, i) => i % 2 === 1).map((d) => d + y);\n\n  // Place each axis by coordinate in parallel coordinate.\n  for (let i = 0; i < components.length; i++) {\n    const component = components[i];\n    const y = Y[i];\n    const height = Y[i + 1] - y;\n    component.bbox = { x, y, width, height };\n  }\n}\n\nfunction placeAxisRadar(\n  components: G2GuideComponentOptions[],\n  coordinate: Coordinate,\n  area: SectionArea,\n  position: GCP,\n) {\n  const [x, y, width, height] = area;\n  for (const component of components) {\n    component.bbox = { x, y, width, height };\n    component.radar = {\n      index: components.indexOf(component),\n      count: components.length,\n    };\n  }\n}\n\nfunction placePaddingArea(\n  components: G2GuideComponentOptions[],\n  coordinate: Coordinate,\n  area: SectionArea,\n) {\n  const [x, y, width, height, direction, reverse, comparator, minX, totalSize] =\n    area;\n  const [\n    mainStartKey,\n    mainStartValue,\n    crossStartKey,\n    crossStartValue,\n    mainSizeKey,\n    mainSizeValue,\n    crossSizeKey,\n    crossSizeValue,\n  ] =\n    direction === 'vertical'\n      ? ['y', y, 'x', x, 'height', height, 'width', width]\n      : ['x', x, 'y', y, 'width', width, 'height', height];\n\n  // Sort components by order.\n  // The smaller the order, the closer to center.\n  components.sort((a, b) => comparator?.(a.order, b.order));\n\n  const isLarge = (type) =>\n    type === 'title' || type === 'group' || type.startsWith('legend');\n\n  const crossSizeOf = (type, small, bigger) => {\n    if (bigger === undefined) return small;\n    if (isLarge(type)) return bigger;\n    return small;\n  };\n\n  const crossStartOf = (type, x, minX) => {\n    if (minX === undefined) return x;\n    if (isLarge(type)) return minX;\n    return x;\n  };\n\n  const startValue = reverse ? mainStartValue + mainSizeValue : mainStartValue;\n  for (let i = 0, start = startValue; i < components.length; i++) {\n    const component = components[i];\n    const { crossPadding = 0, type } = component;\n    const { size } = component;\n    component.bbox = {\n      [mainStartKey]: reverse\n        ? start - size - crossPadding\n        : start + crossPadding,\n      [crossStartKey]: crossStartOf(type, crossStartValue, minX),\n      [mainSizeKey]: size,\n      [crossSizeKey]: crossSizeOf(type, crossSizeValue, totalSize),\n    };\n    start += (size + crossPadding) * (reverse ? -1 : 1);\n  }\n\n  // Place group components.\n  const groupComponents = components.filter((d) => d.type === 'group');\n  for (const group of groupComponents) {\n    const { bbox, children } = group;\n    const size = bbox[crossSizeKey];\n    const step = size / children.length;\n    const justifyContent = children.reduce((j, child) => {\n      const j0 = child.layout?.justifyContent;\n      return j0 ? j0 : j;\n    }, 'flex-start');\n    const L = children.map((d, i) => {\n      const { length = step, padding = 0 } = d;\n      return length + (i === children.length - 1 ? 0 : padding);\n    });\n    const totalLength = sum(L);\n    const diff = size - totalLength;\n    const offset =\n      justifyContent === 'flex-start'\n        ? 0\n        : justifyContent === 'center'\n        ? diff / 2\n        : diff;\n\n    for (\n      let i = 0, start = bbox[crossStartKey] + offset;\n      i < children.length;\n      i++\n    ) {\n      const component = children[i];\n      const { padding = 0 } = component;\n      const interval = i === children.length - 1 ? 0 : padding;\n      component.bbox = {\n        [mainSizeKey]: bbox[mainSizeKey],\n        [mainStartKey]: bbox[mainStartKey],\n        [crossStartKey]: start,\n        [crossSizeKey]: L[i] - interval,\n      };\n      deepMix(component, { layout: { justifyContent } });\n      start += L[i];\n    }\n  }\n}\n\n/**\n * @example legend in the center of radial or polar system\n */\nfunction placeCenter(\n  components: G2GuideComponentOptions[],\n  coordinate: Coordinate,\n  area: SectionArea,\n) {\n  if (components.length === 0) return;\n  const [x, y, width, height] = area;\n  const [innerRadius] = radiusOf(coordinate);\n  const r = ((height / 2) * innerRadius) / Math.sqrt(2);\n  const cx = x + width / 2;\n  const cy = y + height / 2;\n  for (let i = 0; i < components.length; i++) {\n    const component = components[i];\n    component.bbox = { x: cx - r, y: cy - r, width: r * 2, height: r * 2 };\n  }\n}\n", "import { Primitive } from '@antv/vendor/d3-array';\nimport { deepMix, isNumber } from '@antv/util';\nimport { format } from '@antv/vendor/d3-format';\nimport { indexOf, mapObject } from '../utils/array';\nimport {\n  composeAsync,\n  defined,\n  isStrictObject,\n  isUnset,\n} from '../utils/helper';\nimport { isFullTooltip } from '../utils/mark';\nimport { useLibrary } from './library';\nimport { createColumnOf } from './mark';\nimport { Data, DataComponent } from './types/data';\nimport { G2Mark, G2DataOptions, G2Context } from './types/options';\nimport { isPosition } from './scale';\n\nexport const CALLBACK_ITEM_SYMBOL = Symbol('CALLBACK_ITEM');\n\n// @todo Add more defaults.\nexport function applyDefaults(\n  I: number[],\n  mark: G2Mark,\n  context: G2Context,\n): [number[], G2Mark] {\n  const { encode = {}, scale = {}, transform = [], ...rest } = mark;\n  return [I, { ...rest, encode, scale, transform }];\n}\n\nexport async function applyDataTransform(\n  I: number[],\n  mark: G2Mark,\n  context: G2Context,\n): Promise<[number[], G2Mark]> {\n  const { library } = context;\n  const { data } = mark;\n  const [useData] = useLibrary<G2DataOptions, DataComponent, Data>(\n    'data',\n    library,\n  );\n  const descriptor = normalizedDataSource(data);\n  const { transform: T = [], ...connector } = descriptor;\n  const transform = [connector, ...T];\n  const transformFunctions = transform.map((t) => useData(t, context));\n  const transformedData = await composeAsync(transformFunctions)(data);\n\n  // Maintain the consistency of shape between input and output data.\n  // If the shape of raw data is like { value: any }\n  // and the returned transformedData is Object,\n  // returns the wrapped data: { value: transformedData },\n  // otherwise returns the processed tabular data.\n  const newData =\n    data && !Array.isArray(data) && !Array.isArray(transformedData)\n      ? { value: transformedData }\n      : transformedData;\n\n  return [\n    Array.isArray(transformedData) ? indexOf(transformedData) : [],\n    { ...mark, data: newData },\n  ];\n}\n\nexport function flatEncode(\n  I: number[],\n  mark: G2Mark,\n  context: G2Context,\n): [number[], G2Mark] {\n  const { encode } = mark;\n  if (!encode) return [I, mark];\n  const flattenEncode = {};\n  for (const [key, value] of Object.entries(encode)) {\n    if (Array.isArray(value)) {\n      for (let i = 0; i < value.length; i++) {\n        const name = `${key}${i === 0 ? '' : i}`;\n        flattenEncode[name] = value[i];\n      }\n    } else {\n      flattenEncode[key] = value;\n    }\n  }\n  return [I, { ...mark, encode: flattenEncode }];\n}\n\nexport function inferChannelsType(\n  I: number[],\n  mark: G2Mark,\n  context: G2Context,\n): [number[], G2Mark] {\n  const { encode, data } = mark;\n  if (!encode) return [I, mark];\n  const typedEncode = mapObject(encode, (channel) => {\n    if (isTypedChannel(channel)) return channel;\n    const type = inferChannelType(data, channel);\n    return { type, value: channel };\n  });\n  return [I, { ...mark, encode: typedEncode }];\n}\n\nexport function maybeVisualChannel(\n  I: number[],\n  mark: G2Mark,\n  context: G2Context,\n): [number[], G2Mark] {\n  const { encode } = mark;\n  if (!encode) return [I, mark];\n  const newEncode = mapObject(encode, (channel, name) => {\n    const { type } = channel;\n    if (type !== 'constant' || isPosition(name)) return channel;\n    return { ...channel, constant: true };\n  });\n  return [I, { ...mark, encode: newEncode }];\n}\n\nexport function extractColumns(\n  I: number[],\n  mark: G2Mark,\n  context: G2Context,\n): [number[], G2Mark] {\n  const { encode, data } = mark;\n  if (!encode) return [I, mark];\n  const { library } = context;\n  const columnOf = createColumnOf(library);\n  const valuedEncode = mapObject(encode, (channel) => columnOf(data, channel));\n  return [I, { ...mark, encode: valuedEncode }];\n}\n\n/**\n * Normalize mark.tooltip to {title, items}.\n */\nexport function normalizeTooltip(\n  I: number[],\n  mark: G2Mark,\n  context: G2Context,\n): [number[], G2Mark] {\n  const { tooltip = {} } = mark;\n  if (isUnset(tooltip)) return [I, mark];\n  if (Array.isArray(tooltip)) {\n    return [I, { ...mark, tooltip: { items: tooltip } }];\n  }\n  if (isStrictObject(tooltip) && isFullTooltip(tooltip)) {\n    return [I, { ...mark, tooltip }];\n  }\n  return [I, { ...mark, tooltip: { items: [tooltip] } }];\n}\n\nexport function extractTooltip(\n  I: number[],\n  mark: G2Mark,\n  context: G2Context,\n): [number[], G2Mark] {\n  const { data, encode, tooltip = {} } = mark;\n  if (isUnset(tooltip)) return [I, mark];\n  const valueOf = (item) => {\n    if (!item) return item;\n    if (typeof item === 'string') {\n      return I.map((i) => ({ name: item, value: data[i][item] }));\n    }\n    if (isStrictObject(item)) {\n      const {\n        field,\n        channel,\n        color,\n        name = field,\n        valueFormatter = (d) => d,\n      } = item;\n\n      // Support d3-format.\n      const normalizedValueFormatter =\n        typeof valueFormatter === 'string'\n          ? format(valueFormatter)\n          : valueFormatter;\n\n      // Field name.\n      const definedChannel = channel && encode[channel];\n      const channelField = definedChannel && encode[channel].field;\n      const name1 = name || channelField || channel;\n\n      const values = [];\n      for (const i of I) {\n        const value1 = field\n          ? data[i][field]\n          : definedChannel\n          ? encode[channel].value[i]\n          : null;\n        values[i] = {\n          name: name1,\n          color,\n          value: normalizedValueFormatter(value1),\n        };\n      }\n      return values;\n    }\n    if (typeof item === 'function') {\n      const values = [];\n      for (const i of I) {\n        const v = item(data[i], i, data, encode);\n        if (isStrictObject(v))\n          values[i] = { ...v, [CALLBACK_ITEM_SYMBOL]: true };\n        else values[i] = { value: v };\n      }\n      return values;\n    }\n    return item;\n  };\n  const { title, items = [], ...rest } = tooltip;\n  const newTooltip = {\n    title: valueOf(title),\n    items: Array.isArray(items) ? items.map(valueOf) : [],\n    ...rest,\n  };\n  return [I, { ...mark, tooltip: newTooltip }];\n}\n\nexport function maybeArrayField(\n  I: number[],\n  mark: G2Mark,\n  context: G2Context,\n): [number[], G2Mark] {\n  const { encode, ...rest } = mark;\n  if (!encode) return [I, mark];\n  const columns = Object.entries(encode);\n  const arrayColumns = columns\n    .filter(([, channel]) => {\n      const { value: V } = channel;\n      return Array.isArray(V[0]);\n    })\n    .flatMap(([key, V]) => {\n      const columns = [[key, new Array(I.length).fill(undefined)] as const];\n      const { value: rows, ...rest } = V;\n      for (let i = 0; i < rows.length; i++) {\n        const row = rows[i];\n        if (Array.isArray(row)) {\n          for (let j = 0; j < row.length; j++) {\n            const column = columns[j] || [\n              `${key}${j}`,\n              new Array(I).fill(undefined),\n            ];\n            column[1][i] = row[j];\n            columns[j] = column;\n          }\n        }\n      }\n      return columns.map(([key, value]) => [\n        key,\n        { type: 'column', value, ...rest },\n      ]);\n    });\n  const newEncode = Object.fromEntries([...columns, ...arrayColumns]);\n  return [I, { ...rest, encode: newEncode }];\n}\n\nexport function addGuideToScale(\n  I: number[],\n  mark: G2Mark,\n  context: G2Context,\n): [number[], G2Mark] {\n  const { axis = {}, legend = {}, slider = {}, scrollbar = {} } = mark;\n  const normalize = (guide: boolean | Record<string, any>, channel: string) => {\n    if (typeof guide === 'boolean') return guide ? {} : null;\n    const eachGuide = guide[channel];\n    return eachGuide === undefined || eachGuide ? eachGuide : null;\n  };\n  const axisChannels =\n    typeof axis === 'object'\n      ? Array.from(new Set(['x', 'y', 'z', ...Object.keys(axis)]))\n      : ['x', 'y', 'z'];\n\n  deepMix(mark, {\n    scale: {\n      ...Object.fromEntries(\n        axisChannels.map((channel) => {\n          const scrollbarOptions = normalize(scrollbar, channel);\n          return [\n            channel,\n            {\n              guide: normalize(axis, channel),\n              slider: normalize(slider, channel),\n              scrollbar: scrollbarOptions,\n              ...(scrollbarOptions && {\n                ratio:\n                  scrollbarOptions.ratio === undefined\n                    ? 0.5\n                    : scrollbarOptions.ratio,\n              }),\n            },\n          ];\n        }),\n      ),\n      color: { guide: normalize(legend, 'color') },\n      size: { guide: normalize(legend, 'size') },\n      shape: { guide: normalize(legend, 'shape') },\n      // fixme: opacity is conflict with DisplayObject.opacity\n      // to be confirm.\n      opacity: { guide: normalize(legend, 'opacity') },\n    },\n  });\n  return [I, mark];\n}\n\nexport function maybeNonAnimate(\n  I: number[],\n  mark: G2Mark,\n  context: G2Context,\n): [number[], G2Mark] {\n  const { animate } = mark;\n  if (animate || animate === undefined) return [I, mark];\n  deepMix(mark, {\n    animate: {\n      enter: { type: null },\n      exit: { type: null },\n      update: { type: null },\n    },\n  });\n  return [I, mark];\n}\n\nexport function appendMarkScaleKey(\n  I: number[],\n  mark: G2Mark,\n  context: G2Context,\n): [number[], G2Mark] {\n  deepMix(mark, {\n    scale: {\n      series: {\n        key: `DEFAULT_${mark.type}_SERIES_KEY`,\n        ...(mark?.scale?.series ?? {}),\n      },\n    },\n  });\n\n  return [I, mark];\n}\n\nfunction isTypedChannel(channel): boolean {\n  if (\n    typeof channel !== 'object' ||\n    channel instanceof Date ||\n    channel === null\n  ) {\n    return false;\n  }\n  const { type } = channel;\n  return defined(type);\n}\n\nfunction inferChannelType(data: Record<string, Primitive>[], channel): string {\n  if (typeof channel === 'function') return 'transform';\n  if (typeof channel === 'string' && isField(data, channel)) return 'field';\n  return 'constant';\n}\n\nfunction isField(data: Record<string, Primitive>[], value: string): boolean {\n  if (!Array.isArray(data)) return false;\n  return data.some((d) => d[value] !== undefined);\n}\n\nfunction normalizedDataSource(data) {\n  // LiquidGauge need number data.\n  if (isNumber(data)) return { type: 'inline', value: data };\n  // Return null as a placeholder.\n  if (!data) return { type: 'inline', value: null };\n  if (Array.isArray(data)) return { type: 'inline', value: data };\n  const { type = 'inline', ...rest } = data;\n  return { ...rest, type };\n}\n", "import { rollups } from '@antv/vendor/d3-array';\nimport { defined } from '../utils/helper';\nimport { useLibrary } from './library';\nimport { G2MarkState } from './types/common';\nimport {\n  G2Library,\n  G2Mark,\n  G2TransformOptions,\n  G2EncodeOptions,\n  G2Context,\n} from './types/options';\nimport { MarkProps } from './types/mark';\nimport { NormalizedEncodeSpec, EncodeComponent, Encode } from './types/encode';\nimport { ColumnOf, Transform, TransformComponent } from './types/transform';\nimport {\n  applyDefaults,\n  applyDataTransform,\n  extractColumns,\n  flatEncode,\n  inferChannelsType,\n  maybeArrayField,\n  maybeVisualChannel,\n  addGuideToScale,\n  maybeNonAnimate,\n  normalizeTooltip,\n  extractTooltip,\n  appendMarkScaleKey,\n} from './transform';\n\nexport async function initializeMark(\n  partialMark: G2Mark,\n  partialProps: MarkProps,\n  context: G2Library,\n): Promise<[G2Mark, G2MarkState]> {\n  // Apply transform to mark to derive indices, data, encode, etc,.\n  const [I, transformedMark] = await applyMarkTransform(\n    partialMark,\n    partialProps,\n    context,\n  );\n\n  const { encode, scale, data, tooltip, key: markKey } = transformedMark;\n\n  // Skip mark with non-tabular data. Do not skip empty\n  // data, they are useful for facet to display axes.\n  if (Array.isArray(data) === false) {\n    return null;\n  }\n\n  // Group non-independent channels with same prefix, such as x1, x2 => x.\n  // For independent channels, dot not group them, such as position1, position2.\n  const { channels: channelDescriptors } = partialProps;\n  const nameChannels = rollups(\n    Object.entries(encode).filter(([, value]) => defined(value)),\n    (values) =>\n      values.map(([key, options]) => ({\n        name: key,\n        ...options,\n      })),\n    ([key]) => {\n      const prefix = /([^\\d]+)\\d*$/.exec(key)?.[1];\n      const descriptor = channelDescriptors.find((d) => d.name === prefix);\n      if (descriptor?.independent) return key;\n      return prefix;\n    },\n  );\n\n  // Check required channels and initialize scale options for each channel.\n  const channels = channelDescriptors\n    .filter((descriptor) => {\n      const { name, required } = descriptor;\n      if (nameChannels.find(([d]) => d === name)) return true;\n      if (required) throw new Error(`Missing encoding for channel: ${name}.`);\n      return false;\n    })\n    .flatMap((descriptor) => {\n      const {\n        name,\n        scale: scaleType,\n        scaleKey,\n        range,\n        quantitative,\n        ordinal,\n      } = descriptor;\n      const valuesArray = nameChannels.filter(([channel]) =>\n        channel.startsWith(name),\n      );\n      return valuesArray.map(([channel, values], i) => {\n        const visual = values.some((d) => d.visual);\n        const constant = values.some((d) => d.constant);\n        const {\n          independent = false,\n          // Use channel name as default scale key.\n          key = scaleKey || channel,\n          // Visual channel use identity scale.\n          type = constant ? 'constant' : visual ? 'identity' : scaleType,\n          ...scaleOptions\n        } = scale[channel] || {};\n        // For constant scale, infer range from data.\n        const isConstant = type === 'constant';\n        const finalRange = isConstant ? undefined : range;\n        return {\n          name: channel,\n          values,\n          // Generate a unique key for independent channel,\n          // which will not group with any other channels.\n          scaleKey: independent || isConstant ? Symbol('independent') : key,\n          scale: {\n            type,\n            markKey,\n            range: finalRange,\n            ...scaleOptions,\n            quantitative,\n            ordinal,\n          },\n        };\n      });\n    });\n\n  return [transformedMark, { ...partialProps, index: I, channels, tooltip }];\n}\n\nexport function createColumnOf(library: G2Library): ColumnOf {\n  const [useEncode] = useLibrary<G2EncodeOptions, EncodeComponent, Encode>(\n    'encode',\n    library,\n  );\n  return (data, encode) => {\n    if (encode === undefined) return null;\n    if (data === undefined) return null;\n    return {\n      ...encode,\n      type: 'column',\n      value: useEncode(encode)(data),\n      field: fieldOf(encode),\n    };\n  };\n}\n\nasync function applyMarkTransform(\n  mark: G2Mark,\n  props: MarkProps,\n  context: G2Context,\n): Promise<[number[], G2Mark]> {\n  const { library } = context;\n  const [useTransform] = useLibrary<\n    G2TransformOptions,\n    TransformComponent,\n    Transform\n  >('transform', library);\n  const { preInference = [], postInference = [] } = props;\n  const { transform = [] } = mark;\n  const transforms = [\n    applyDefaults,\n    applyDataTransform,\n    flatEncode,\n    inferChannelsType,\n    maybeVisualChannel,\n    extractColumns,\n    maybeArrayField,\n    maybeNonAnimate,\n    addGuideToScale,\n    normalizeTooltip,\n    appendMarkScaleKey,\n    ...preInference.map(useTransform),\n    ...transform.map(useTransform),\n    ...postInference.map(useTransform),\n    extractTooltip,\n  ];\n  let index = [];\n  let transformedMark = mark;\n  for (const t of transforms) {\n    [index, transformedMark] = await t(index, transformedMark, context);\n  }\n  return [index, transformedMark];\n}\n\nfunction fieldOf(encode: NormalizedEncodeSpec): string {\n  const { type, value } = encode;\n  if (type === 'field' && typeof value === 'string') return value;\n  return null;\n}\n", "import { Vector2 } from '@antv/coord';\nimport { DisplayObject, IAnimation as GAnimation, Rect } from '@antv/g';\nimport { deepMix, upperFirst, isArray, get } from '@antv/util';\nimport { group, groups } from '@antv/vendor/d3-array';\nimport { format } from '@antv/vendor/d3-format';\nimport { mapObject } from '../utils/array';\nimport { ChartEvent } from '../utils/event';\nimport {\n  isStrictObject,\n  appendTransform,\n  compose,\n  copyAttributes,\n  defined,\n  error,\n  maybeSubObject,\n  subObject,\n  useMemo,\n} from '../utils/helper';\nimport { G2Element, select, Selection } from '../utils/selection';\nimport {\n  groupComponents,\n  inferComponent,\n  normalizeComponents,\n  renderComponent,\n} from './component';\nimport {\n  AREA_CLASS_NAME,\n  COMPONENT_CLASS_NAME,\n  ELEMENT_CLASS_NAME,\n  LABEL_CLASS_NAME,\n  LABEL_LAYER_CLASS_NAME,\n  MAIN_LAYER_CLASS_NAME,\n  PLOT_CLASS_NAME,\n  VIEW_CLASS_NAME,\n  BREAK_CLASS_NAME,\n  BREAK_GROUP_CLASS_NAME,\n} from './constant';\nimport { coordinate2Transform, createCoordinate } from './coordinate';\nimport {\n  computeLayout,\n  computeRoughPlotSize,\n  placeComponents,\n  processAxisZ,\n} from './layout';\nimport { documentOf, useLibrary } from './library';\nimport { initializeMark } from './mark';\nimport {\n  applyScale,\n  assignScale,\n  collectScales,\n  inferScale,\n  syncFacetsScales,\n  useRelationScale,\n  groupTransform,\n} from './scale';\nimport { applyDataTransform } from './transform';\nimport {\n  G2MarkState,\n  G2Theme,\n  G2ViewDescriptor,\n  G2ViewInstance,\n  Primitive,\n} from './types/common';\nimport {\n  Animation,\n  AnimationComponent,\n  Composition,\n  CompositionComponent,\n  Interaction,\n  InteractionComponent,\n  LabelTransform,\n  LabelTransformComponent,\n  Scale,\n  Shape,\n  ShapeComponent,\n  Theme,\n  ThemeComponent,\n} from './types/component';\nimport { Mark, MarkComponent, SingleMark } from './types/mark';\nimport {\n  G2AnimationOptions,\n  G2CompositionOptions,\n  G2Context,\n  G2GuideComponentOptions,\n  G2InteractionOptions,\n  G2LabelTransformOptions,\n  G2Library,\n  G2Mark,\n  G2MarkOptions,\n  G2ScaleOptions,\n  G2ShapeOptions,\n  G2ThemeOptions,\n  G2View,\n  G2ViewTree,\n} from './types/options';\n\ntype Store = Map<any, (options: G2ViewTree) => G2ViewTree>;\n\nexport async function plot<T extends G2ViewTree>(\n  options: T,\n  selection: Selection,\n  context: G2Context,\n): Promise<any> {\n  const { library } = context;\n\n  const [useComposition] = useLibrary<\n    G2CompositionOptions,\n    CompositionComponent,\n    Composition\n  >('composition', library);\n  const [useInteraction] = useLibrary<\n    G2InteractionOptions,\n    InteractionComponent,\n    Interaction\n  >('interaction', library);\n\n  // Some helper functions.\n  const marks = new Set(\n    Object.keys(library)\n      .map((d) => /mark\\.(.*)/.exec(d)?.[1])\n      .filter(defined),\n  );\n  const staticMarks = new Set(\n    Object.keys(library)\n      .map((d) => /component\\.(.*)/.exec(d)?.[1])\n      .filter(defined),\n  );\n\n  const typeOf = (node: G2ViewTree) => {\n    const { type } = node;\n    if (typeof type === 'function') {\n      // @ts-ignore\n      const { props = {} } = type;\n      const { composite = true } = props;\n      if (composite) return 'mark';\n    }\n    if (typeof type !== 'string') return type;\n    if (marks.has(type) || staticMarks.has(type)) return 'mark';\n    return type;\n  };\n\n  const isMark = (node: G2ViewTree) => typeOf(node) === 'mark';\n  const isStandardView = (node: G2ViewTree) => typeOf(node) === 'standardView';\n  const isStaticMark = (node: G2ViewTree) => {\n    const { type } = node;\n    if (typeof type !== 'string') return false;\n    if (staticMarks.has(type)) return true;\n    return false;\n  };\n\n  const transform = (node: G2ViewTree) => {\n    if (isStandardView(node)) return [node];\n    const type = typeOf(node);\n    const composition = useComposition({ type, static: isStaticMark(node) });\n    return composition(node);\n  };\n\n  // Some temporary variables help parse the view tree.\n  const views: G2ViewDescriptor[] = [];\n  const viewNode = new Map<G2ViewDescriptor, G2ViewTree>();\n  const nodeState = new Map<G2ViewTree, Map<G2Mark, G2MarkState>>();\n  const discovered: G2ViewTree[] = [options];\n  const nodeGenerators: Generator<G2ViewTree, void, void>[] = [];\n\n  while (discovered.length) {\n    const node = discovered.shift();\n    if (isStandardView(node)) {\n      // Initialize view to get data to be visualized. If the marks\n      // of the view have already been initialized (facet view),\n      // initialize the view based on the initialized mark states,\n      // otherwise initialize it from beginning.\n      const state = nodeState.get(node);\n      const [view, children] = state\n        ? initializeState(state, node, library)\n        : await initializeView(node, context);\n      viewNode.set(view, node);\n      views.push(view);\n\n      // Transform children, they will be transformed into\n      // standardView if they are mark or view node.\n      const transformedNodes = children\n        .flatMap(transform)\n        .map((d) => coordinate2Transform(d, library));\n      discovered.push(...transformedNodes);\n\n      // Only StandardView can be treated as facet and it\n      // should sync position scales among facets normally.\n      if (transformedNodes.every(isStandardView)) {\n        const states = await Promise.all(\n          transformedNodes.map((d) => initializeMarks(d, context)),\n        );\n        // Note!!!\n        // This will mutate scales for marks.\n        syncFacetsScales(states);\n        for (let i = 0; i < transformedNodes.length; i++) {\n          const nodeT = transformedNodes[i];\n          const state = states[i];\n          nodeState.set(nodeT, state);\n        }\n      }\n    } else {\n      // Apply transform to get data in advance for non-mark composition\n      // node, which makes sure that composition node can preprocess the\n      // data to produce more nodes based on it.\n      const n = isMark(node) ? node : await applyTransform(node, context);\n      const N = transform(n);\n      if (Array.isArray(N)) discovered.push(...N);\n      else if (typeof N === 'function') nodeGenerators.push(N());\n    }\n  }\n\n  context.emitter.emit(ChartEvent.BEFORE_PAINT);\n\n  // Plot chart.\n  const enterContainer = new Map<G2ViewDescriptor, DisplayObject>();\n  const updateContainer = new Map<G2ViewDescriptor, DisplayObject>();\n  const transitions: GAnimation[] = [];\n  selection\n    .selectAll(className(VIEW_CLASS_NAME))\n    .data(views, (d) => d.key)\n    .join(\n      (enter) =>\n        enter\n          .append('g')\n          .attr('className', VIEW_CLASS_NAME)\n          .attr('id', (view) => view.key)\n          .call(applyTranslate)\n          .each(function (view, i, element) {\n            plotView(view, select(element), transitions, context);\n            enterContainer.set(view, element);\n          }),\n      (update) =>\n        update.call(applyTranslate).each(function (view, i, element) {\n          plotView(view, select(element), transitions, context);\n          updateContainer.set(view, element);\n        }),\n      (exit) =>\n        exit\n          .each(function (d, i, element) {\n            // Remove existed interactions.\n            const interactions = element['nameInteraction'].values();\n            for (const interaction of interactions) {\n              interaction.destroy();\n            }\n          })\n          .remove(),\n    );\n\n  // Apply interactions.\n  const viewInstanceof = (\n    viewContainer: Map<G2ViewDescriptor, DisplayObject>,\n    updateInteractions?: (\n      container: Map<G2ViewDescriptor, DisplayObject>,\n      updateTypes?: string[],\n      store?: Store,\n    ) => void,\n    oldStore?: Store,\n  ) => {\n    return Array.from(viewContainer.entries()).map(([view, container]) => {\n      // Index state by component or interaction name,\n      // such as legend, scrollbar, brushFilter.\n      // Each state transform options to another options.\n      const store =\n        oldStore || new Map<any, (options: G2ViewTree) => G2ViewTree>();\n      const setState = (key, reducer = (x) => x) => store.set(key, reducer);\n      const options = viewNode.get(view);\n      const update = createUpdateView(select(container), options, context);\n      const target = {\n        view,\n        container,\n        options,\n        setState,\n        update: async (from, updateTypes) => {\n          // Apply all state functions to get new options.\n          const reducer = compose(Array.from(store.values()));\n          const newOptions = reducer(options);\n          return await update(newOptions, from, () => {\n            if (isArray(updateTypes)) {\n              updateInteractions(viewContainer, updateTypes, store);\n            }\n          });\n        },\n      };\n      context.externals.update = target.update;\n      context.externals.setState = setState;\n      return target;\n    });\n  };\n\n  const updateInteractions = (\n    container = updateContainer,\n    updateType?: string[],\n    oldStore?: Map<any, (options: G2ViewTree) => G2ViewTree>,\n  ) => {\n    // Interactions for update views.\n    const updateViewInstances = viewInstanceof(\n      container,\n      updateInteractions,\n      oldStore,\n    );\n\n    for (const target of updateViewInstances) {\n      const { options, container } = target;\n      const nameInteraction = container['nameInteraction'];\n      let typeOptions = inferInteraction(options);\n\n      if (updateType) {\n        typeOptions = typeOptions.filter((v) => updateType.includes(v[0]));\n      }\n\n      for (const typeOption of typeOptions) {\n        const [type, option] = typeOption;\n        // Remove interaction for existed views.\n        const prevInteraction = nameInteraction.get(type);\n        if (prevInteraction) prevInteraction.destroy?.();\n\n        // Apply new interaction.\n        if (option) {\n          const interaction = useThemeInteraction(\n            target.view,\n            type,\n            option as Record<string, any>,\n            useInteraction,\n          );\n          const destroy = interaction(\n            target,\n            updateViewInstances,\n            context.emitter,\n          );\n          nameInteraction.set(type, { destroy });\n        }\n      }\n    }\n  };\n\n  // Interactions for enter views.\n  const enterViewInstances = viewInstanceof(enterContainer, updateInteractions);\n  for (const target of enterViewInstances) {\n    const { options } = target;\n\n    // A Map index interaction by interaction name.\n    const nameInteraction = new Map();\n    target.container['nameInteraction'] = nameInteraction;\n\n    // Apply interactions.\n    for (const typeOption of inferInteraction(options)) {\n      const [type, option] = typeOption;\n      if (option) {\n        const interaction = useThemeInteraction(\n          target.view,\n          type,\n          option as Record<string, any>,\n          useInteraction,\n        );\n        const destroy = interaction(\n          target,\n          enterViewInstances,\n          context.emitter,\n        );\n        nameInteraction.set(type, { destroy });\n      }\n    }\n  }\n\n  updateInteractions();\n\n  // Author animations.\n  const { width, height } = options;\n  const keyframes = [];\n  for (const nodeGenerator of nodeGenerators) {\n    // Delay the rendering of animation keyframe. Different animation\n    // created by different nodeGenerator will play in the same time.\n    // eslint-disable-next-line no-async-promise-executor\n    const keyframe = new Promise<void>(async (resolve) => {\n      for (const node of nodeGenerator) {\n        const sizedNode = { width, height, ...node };\n        await plot(sizedNode, selection, context);\n      }\n      resolve();\n    });\n    keyframes.push(keyframe);\n  }\n\n  context.views = views;\n\n  // Clear and update animation.\n  context.animations?.forEach((animation) => animation?.cancel());\n  context.animations = transitions;\n\n  context.emitter.emit(ChartEvent.AFTER_PAINT);\n\n  // Note!!!\n  // The returned promise will never resolved if one of nodeGenerator\n  // never stop to yield node, which may created by a keyframe composition\n  // with iteration count set to infinite.\n  const finished = transitions\n    .filter(defined)\n    .map(cancel)\n    .map((d) => d.finished);\n  return Promise.all([...finished, ...keyframes]);\n}\n\nfunction applyTranslate(selection: Selection) {\n  selection.style(\n    'transform',\n    (d) => `translate(${d.layout.x}, ${d.layout.y})`,\n  );\n}\n\nfunction definedInteraction(library: G2Library) {\n  const [, createInteraction] = useLibrary<\n    G2InteractionOptions,\n    InteractionComponent,\n    Interaction\n  >('interaction', library);\n  return (d) => {\n    const [name, options] = d;\n    try {\n      return [name, createInteraction(name)] as const;\n    } catch {\n      return [name, options.type] as const;\n    }\n  };\n}\n\nfunction createUpdateView(\n  selection: Selection,\n  options: G2ViewTree,\n  context: G2Context,\n): G2ViewInstance['update'] {\n  const { library } = context;\n  const createDefinedInteraction = definedInteraction(library);\n  const filter = (d) => d[1] && d[1].props && d[1].props.reapplyWhenUpdate;\n  const interactions = inferInteraction(options);\n  const updates = interactions\n    .map(createDefinedInteraction)\n    .filter(filter)\n    .map((d) => d[0]);\n\n  return async (newOptions, source, callback) => {\n    const transitions = [];\n    const [newView, newChildren] = await initializeView(newOptions, context);\n    plotView(newView, selection, transitions, context);\n\n    // Update interaction need to reapply when update.\n    for (const name of updates.filter((d) => d !== source)) {\n      updateInteraction(name, selection, newOptions, newView, context);\n    }\n\n    for (const child of newChildren) {\n      plot(child, selection, context);\n    }\n    callback();\n    return { options: newOptions, view: newView };\n  };\n}\n\nfunction updateInteraction(\n  name: string,\n  selection: Selection,\n  options: G2ViewTree,\n  view: G2ViewDescriptor,\n  context: G2Context,\n) {\n  const { library } = context;\n\n  const [useInteraction] = useLibrary<\n    G2InteractionOptions,\n    InteractionComponent,\n    Interaction\n  >('interaction', library);\n\n  // Instances for interaction.\n  const container = selection.node();\n  const nameInteraction = container['nameInteraction'];\n  const interactionOptions = inferInteraction(options).find(\n    ([d]) => d === name,\n  );\n\n  // Destroy older interaction.\n  const interaction = nameInteraction.get(name);\n  if (!interaction) return;\n  interaction.destroy?.();\n\n  if (!interactionOptions[1]) return;\n\n  // Apply new interaction.\n  const applyInteraction = useThemeInteraction(\n    view,\n    name,\n    interactionOptions[1] as any,\n    useInteraction,\n  );\n  const target = {\n    options,\n    view,\n    container: selection.node(),\n    update: (options) => Promise.resolve(options),\n  };\n  const destroy = applyInteraction(target, [], context.emitter);\n  nameInteraction.set(name, { destroy });\n}\n\nasync function initializeView(\n  options: G2View,\n  context: G2Context,\n): Promise<[G2ViewDescriptor, G2ViewTree[]]> {\n  const { library } = context;\n\n  const flattenOptions = await transformMarks(options, context);\n\n  const mergedOptions = bubbleOptions(flattenOptions);\n\n  // @todo Remove this.\n  // !!! NOTE: Mute original view options.\n  // Update interaction and coordinate for this view.\n  options.interaction = mergedOptions.interaction;\n  options.coordinate = mergedOptions.coordinate;\n  // @ts-ignore\n  options.marks = [...mergedOptions.marks, ...mergedOptions.components];\n\n  const transformedOptions = coordinate2Transform(mergedOptions, library);\n  const state = await initializeMarks(transformedOptions, context);\n  return initializeState(state, transformedOptions, library);\n}\n\nfunction bubbleOptions(options: G2View): G2View {\n  const {\n    coordinate: viewCoordinate = {},\n    interaction: viewInteraction = {},\n    style: viewStyle = {},\n    marks,\n    ...rest\n  } = options;\n  const markCoordinates = marks.map((d) => d.coordinate || {});\n  const markInteractions = marks.map((d) => d.interaction || {});\n  const markViewStyles = marks.map((d) => d.viewStyle || {});\n  const newCoordinate = [...markCoordinates, viewCoordinate].reduceRight(\n    (prev, cur) => deepMix(prev, cur),\n    {},\n  );\n  const newInteraction = [viewInteraction, ...markInteractions].reduce(\n    (prev, cur) => deepMix(prev, cur),\n    {},\n  );\n  const newStyle = [...markViewStyles, viewStyle].reduce(\n    (prev, cur) => deepMix(prev, cur),\n    {},\n  );\n  return {\n    ...rest,\n    marks,\n    coordinate: newCoordinate,\n    interaction: newInteraction,\n    style: newStyle,\n  };\n}\n\nasync function transformMarks(\n  options: G2View,\n  context: G2Context,\n): Promise<G2View> {\n  const { library } = context;\n\n  const [useMark, createMark] = useLibrary<G2MarkOptions, MarkComponent, Mark>(\n    'mark',\n    library,\n  );\n\n  const staticMarks = new Set(\n    Object.keys(library)\n      .map((d) => /component\\.(.*)/.exec(d)?.[1])\n      .filter(defined),\n  );\n  const { marks } = options;\n  const flattenMarks = [];\n  const components = [];\n  const discovered = [...marks];\n  const { width, height } = computeRoughPlotSize(options);\n  const markOptions = { options, width, height };\n\n  // Pre order traversal.\n  while (discovered.length) {\n    const [node] = discovered.splice(0, 1);\n    // Apply data transform to get data.\n    const mark = (await applyTransform(node, context)) as G2Mark;\n    const { type = error('G2Mark type is required.'), key } = mark;\n\n    // For components.\n    if (staticMarks.has(type as string)) components.push(mark);\n    else {\n      const { props = {} } = createMark(type);\n      const { composite = true } = props;\n      if (!composite) flattenMarks.push(mark);\n      else {\n        // Unwrap data from { value: data } to data,\n        // then the composite mark can process the normalized data.\n        const { data } = mark;\n        const newMark = {\n          ...mark,\n          data: data ? (Array.isArray(data) ? data : data.value) : data,\n        };\n\n        // Convert composite mark to marks.\n        const marks = await useMark(newMark, markOptions);\n        const M = Array.isArray(marks) ? marks : [marks];\n        discovered.unshift(...M.map((d, i) => ({ ...d, key: `${key}-${i}` })));\n      }\n    }\n  }\n\n  return { ...options, marks: flattenMarks, components };\n}\n\nasync function initializeMarks(\n  options: G2View,\n  context: G2Context,\n): Promise<Map<G2Mark, G2MarkState>> {\n  const { library } = context;\n\n  const [useTheme] = useLibrary<G2ThemeOptions, ThemeComponent, Theme>(\n    'theme',\n    library,\n  );\n  const [, createMark] = useLibrary<G2MarkOptions, MarkComponent, Mark>(\n    'mark',\n    library,\n  );\n\n  const {\n    theme: partialTheme,\n    marks: partialMarks,\n    coordinates = [],\n  } = options;\n  const theme = useTheme(inferTheme(partialTheme));\n  const markState = new Map<G2Mark, G2MarkState>();\n\n  // Initialize channels for marks.\n  for (const markOptions of partialMarks) {\n    const { type } = markOptions;\n    const { props = {} } = createMark(type);\n    const markAndState = await initializeMark(markOptions, props, context);\n    if (markAndState) {\n      const [initializedMark, state] = markAndState;\n      markState.set(initializedMark, state);\n    }\n  }\n\n  // Group channels by scale key, each group has scale.\n  const scaleChannels = group(\n    Array.from(markState.values()).flatMap((d) => d.channels),\n    ({ scaleKey }) => scaleKey,\n  );\n\n  // Infer scale for each channel groups.\n  for (const channels of scaleChannels.values()) {\n    // Merge scale options for these channels.\n    const scaleOptions = channels.reduce(\n      (total, { scale }) => deepMix(total, scale),\n      {},\n    );\n    const { scaleKey } = channels[0];\n\n    // Use the fields of the first channel as the title.\n    const { values: FV } = channels[0];\n    const fields = Array.from(new Set(FV.map((d) => d.field).filter(defined)));\n    const options = deepMix(\n      {\n        guide: { title: fields.length === 0 ? undefined : fields },\n        field: fields[0],\n      },\n      scaleOptions,\n    );\n\n    // Use the name of the first channel as the scale name.\n    const { name } = channels[0];\n    const values = channels.flatMap(({ values }) => values.map((d) => d.value));\n    const scale = {\n      ...inferScale(name, values, options, coordinates, theme, library),\n      uid: Symbol('scale'),\n      key: scaleKey,\n    };\n    channels.forEach((channel) => (channel.scale = scale));\n  }\n\n  return markState;\n}\n\nfunction useThemeInteraction(\n  view: G2ViewDescriptor,\n  type: string,\n  option: Record<string, any>,\n  useInteraction: (options: G2InteractionOptions, context?: any) => Interaction,\n): Interaction {\n  const theme = view.theme;\n  const defaults = typeof type === 'string' ? theme[type] || {} : {};\n  const interaction = useInteraction(\n    deepMix(defaults, { type, ...(option as any) }),\n  );\n  return interaction;\n}\n\nfunction initializeState(\n  markState: Map<G2Mark, G2MarkState>,\n  options: G2View,\n  library: G2Library,\n): [G2ViewDescriptor, G2ViewTree[]] {\n  const [useMark] = useLibrary<G2MarkOptions, MarkComponent, Mark>(\n    'mark',\n    library,\n  );\n  const [useTheme] = useLibrary<G2ThemeOptions, ThemeComponent, Theme>(\n    'theme',\n    library,\n  );\n  const [useLabelTransform] = useLibrary<\n    G2LabelTransformOptions,\n    LabelTransformComponent,\n    LabelTransform\n  >('labelTransform', library);\n\n  const {\n    key,\n    frame = false,\n    theme: partialTheme,\n    clip,\n    style = {},\n    labelTransform = [],\n  } = options;\n\n  const theme = useTheme(inferTheme(partialTheme));\n\n  // Infer components and compute layout.\n  const states = Array.from(markState.values());\n  const scales = collectScales(states, options);\n  const components = normalizeComponents(\n    inferComponent(\n      inferComponentScales(Array.from(scales), states, markState),\n      options,\n      library,\n    ),\n  );\n  const layout = computeLayout(components, options, theme, library);\n  const coordinate = createCoordinate(layout, options, library);\n  const framedStyle = frame\n    ? deepMix({ mainLineWidth: 1, mainStroke: '#000' }, style)\n    : style;\n\n  // Place components and mutate their bbox.\n  placeComponents(groupComponents(components), coordinate, layout);\n\n  // AxisZ need a copy of axisX and axisY to show grids in X-Z & Y-Z planes.\n  processAxisZ(components);\n\n  // Index scale instance by uid.\n  const uidScale = new Map(\n    Array.from(markState.values()).flatMap((state) => {\n      const { channels } = state;\n      return channels.map(({ scale }) => [\n        scale.uid,\n        useRelationScale(scale, library),\n      ]);\n    }),\n  );\n\n  groupTransform(markState, uidScale);\n\n  // Scale from marks and components.\n  const scaleInstance: Record<string, Scale> = {};\n\n  // Initialize scale from components.\n  for (const component of components) {\n    const { scales: scaleDescriptors = [] } = component;\n    const scales = [];\n    for (const descriptor of scaleDescriptors) {\n      const { name, uid } = descriptor;\n      const scale = uidScale.get(uid) ?? useRelationScale(descriptor, library);\n      scales.push(scale);\n      // Delivery the scale of axisX to the AxisY,\n      // in order to calculate the angle of axisY component when rendering radar chart.\n      if (name === 'y') {\n        scale.update({\n          ...scale.getOptions(),\n          xScale: scaleInstance.x,\n        });\n      }\n      assignScale(scaleInstance, { [name]: scale });\n    }\n    component.scaleInstances = scales;\n  }\n\n  // Calc data to be rendered for each mark.\n  // @todo More readable APIs for Container which stays\n  // the same style with JS standard and lodash APIs.\n  // @todo More proper way to index scale for different marks.\n  const children = [];\n  const dataMap = new Map();\n  for (const [mark, state] of markState.entries()) {\n    const {\n      // scale,\n      // Callback to create children options based on this mark.\n      children: createChildren,\n      // The total count of data (both show and hide)for this facet.\n      // This is for unit visualization to sync data domain.\n      dataDomain,\n      modifier,\n      key: markKey,\n      data,\n    } = mark;\n    dataMap.set(markKey, data);\n    const { index, channels, tooltip } = state;\n    const scale = Object.fromEntries(\n      channels.map(({ name, scale }) => [name, scale]),\n    );\n    // Transform abstract value to visual value by scales.\n    const markScaleInstance = mapObject(scale, ({ uid }) => uidScale.get(uid));\n    assignScale(scaleInstance, markScaleInstance);\n    const value = applyScale(channels, markScaleInstance);\n\n    // Calc points and transformation for each data,\n    // and then transform visual value to visual data.\n    const calcPoints = (useMark as (options: G2MarkOptions) => SingleMark)(\n      mark,\n    );\n    const [I, P, S] = filterValid(\n      calcPoints(index, markScaleInstance, value, coordinate),\n    );\n    const count = dataDomain || I.length;\n    const T = modifier ? modifier(P, count, layout) : [];\n    const titleOf = (i) => tooltip.title?.[i]?.value;\n    const itemsOf = (i) => tooltip.items.map((V) => V[i]);\n    const visualData: Record<string, any>[] = I.map((d, i) => {\n      const datum = {\n        points: P[i],\n        transform: T[i],\n        index: d,\n        markKey,\n        viewKey: key,\n        data: data[d],\n        ...(tooltip && {\n          title: titleOf(d),\n          items: itemsOf(d),\n        }),\n      };\n      for (const [k, V] of Object.entries(value)) {\n        datum[k] = V[d];\n        if (S) datum[`series${upperFirst(k)}`] = S[i].map((i) => V[i]);\n      }\n      if (S) datum['seriesIndex'] = S[i];\n      if (S && tooltip) {\n        datum['seriesItems'] = S[i].map((si) => itemsOf(si));\n        datum['seriesTitle'] = S[i].map((si) => titleOf(si));\n      }\n      return datum;\n    });\n    state.data = visualData;\n    state.index = I;\n\n    // Create children options by children callback,\n    // and then propagate data to each child.\n    const markChildren = createChildren?.(\n      visualData,\n      markScaleInstance,\n      layout,\n    );\n    children.push(...(markChildren || []));\n  }\n\n  const view = {\n    layout,\n    theme,\n    coordinate,\n    markState,\n    key,\n    clip,\n    scale: scaleInstance,\n    style: framedStyle,\n    components,\n    data: dataMap,\n    options: options,\n    labelTransform: compose(labelTransform.map(useLabelTransform)),\n  };\n\n  return [view, children];\n}\n\nasync function plotView(\n  view: G2ViewDescriptor,\n  selection: Selection,\n  transitions: GAnimation[],\n  context: G2Context,\n): Promise<void> {\n  const { library } = context;\n  const {\n    components,\n    theme,\n    layout,\n    markState,\n    coordinate,\n    key,\n    style,\n    clip,\n    scale,\n  } = view;\n\n  // Render background for the different areas.\n  const { x, y, width, height, ...rest } = layout;\n  const areaKeys = ['view', 'plot', 'main', 'content'];\n  const I = areaKeys.map((_, i) => i);\n  const sizeKeys = ['a', 'margin', 'padding', 'inset'];\n  const areaStyles = areaKeys.map((d) =>\n    maybeSubObject(Object.assign({}, theme.view, style), d),\n  );\n  const areaSizes = sizeKeys.map((d) => subObject(rest, d));\n  const styleArea = (selection) =>\n    selection\n      .style('x', (i) => areaLayouts[i].x)\n      .style('y', (i) => areaLayouts[i].y)\n      .style('width', (i) => areaLayouts[i].width)\n      .style('height', (i) => areaLayouts[i].height)\n      .each(function (i, d, element) {\n        applyStyle(select(element), areaStyles[i]);\n      });\n  let px = 0;\n  let py = 0;\n  let pw = width;\n  let ph = height;\n  const areaLayouts = I.map((i) => {\n    const size = areaSizes[i];\n    const { left = 0, top = 0, bottom = 0, right = 0 } = size;\n    px += left;\n    py += top;\n    pw -= left + right;\n    ph -= top + bottom;\n    return {\n      x: px,\n      y: py,\n      width: pw,\n      height: ph,\n    };\n  });\n  selection\n    .selectAll(className(AREA_CLASS_NAME))\n    .data(\n      // Only render area with defined style.\n      I.filter((i) => defined(areaStyles[i])),\n      (i) => areaKeys[i],\n    )\n    .join(\n      (enter) =>\n        enter\n          .append('rect')\n          .attr('className', AREA_CLASS_NAME)\n          .style('zIndex', -2)\n          .call(styleArea),\n      (update) => update.call(styleArea),\n      (exit) => exit.remove(),\n    );\n\n  const animationExtent = computeAnimationExtent(markState);\n\n  const componentAnimateOptions = animationExtent\n    ? { duration: animationExtent[1] }\n    : false;\n\n  // Render components.\n  // @todo renderComponent return ctor and options.\n  // Key for each type of component.\n  // Index them grouped by position.\n  for (const [, C] of groups(components, (d) => `${d.type}-${d.position}`)) {\n    C.forEach((d, i) => (d.index = i));\n  }\n\n  const componentsTransitions = selection\n    .selectAll(className(COMPONENT_CLASS_NAME))\n    .data(components, (d) => `${d.type}-${d.position}-${d.index}`)\n    .join(\n      (enter) =>\n        enter\n          .append('g')\n          .style('zIndex', ({ zIndex }) => zIndex || -1)\n          .attr('className', COMPONENT_CLASS_NAME)\n          .append((options) =>\n            renderComponent(\n              deepMix({ animate: componentAnimateOptions, scale }, options),\n              coordinate,\n              theme,\n              library,\n              markState,\n            ),\n          ),\n      (update) =>\n        update.transition(function (\n          options: G2GuideComponentOptions,\n          i,\n          element,\n        ) {\n          const { preserve = false } = options;\n          if (preserve) return;\n          const newComponent = renderComponent(\n            deepMix({ animate: componentAnimateOptions, scale }, options),\n            coordinate,\n            theme,\n            library,\n            markState,\n          );\n          const { attributes } = newComponent;\n          const [node] = element.childNodes;\n          return node.update(attributes, false);\n        }),\n    )\n    .transitions();\n\n  transitions.push(...componentsTransitions.flat().filter(defined));\n\n  // Main layer is for showing the main visual representation such as marks. There\n  // may be multiple main layers for a view, each main layer correspond to one of marks.\n  // @todo Test DOM structure.\n  const T = selection\n    .selectAll(className(PLOT_CLASS_NAME))\n    .data([layout], () => key)\n    .join(\n      (enter) =>\n        enter\n          // Make this layer interactive, such as click and mousemove events.\n          .append('rect')\n          .style('zIndex', 0)\n          .style('fill', 'transparent')\n          .attr('className', PLOT_CLASS_NAME)\n          .call(updateBBox)\n          .call(updateLayers, Array.from(markState.keys()))\n          .call(applyClip, clip),\n      (update) =>\n        update\n          .call(updateLayers, Array.from(markState.keys()))\n          .call(updateBBox)\n          // .call((selection) => {\n          //   return animationExtent\n          //     ? animateBBox(selection, animationExtent)\n          //     : updateBBox(selection);\n          // })\n          .call(applyClip, clip),\n    )\n    .transitions();\n  transitions.push(...T.flat());\n\n  // Render marks with corresponding data.\n  for (const [mark, state] of markState.entries()) {\n    const { data } = state;\n    const { key, class: cls, type } = mark;\n    const viewNode = selection.select(`#${key}`);\n    const shapeFunction = createMarkShapeFunction(mark, state, view, context);\n    const enterFunction = createEnterFunction(mark, state, view, library);\n    const updateFunction = createUpdateFunction(mark, state, view, library);\n    const exitFunction = createExitFunction(mark, state, view, library);\n    const facetElements = selectFacetElements(\n      selection,\n      viewNode,\n      cls,\n      'element',\n    );\n    const T = viewNode\n      .selectAll(className(ELEMENT_CLASS_NAME))\n      .selectFacetAll(facetElements)\n      .data(\n        data,\n        (d) => d.key,\n        (d) => d.groupKey,\n      )\n      .join(\n        (enter) =>\n          enter\n            .append(shapeFunction)\n            // Note!!! Only one className can be set.\n            // Using attribute as alternative for other classNames.\n            .attr('className', ELEMENT_CLASS_NAME)\n            .attr('markType', type)\n            .transition(function (data, i, element) {\n              return enterFunction(data, [element]);\n            }),\n        (update) =>\n          update.call((selection) => {\n            const parent = selection.parent();\n            const origin = useMemo<DisplayObject, [number, number]>((node) => {\n              const [x, y] = node.getBounds().min;\n              return [x, y];\n            });\n            selection\n              .transition(function (data, index, element) {\n                maybeFacetElement(element, parent, origin);\n                const node = shapeFunction(data, index);\n                const animation = updateFunction(data, [element], [node]);\n                if (animation?.length) return animation;\n                if (\n                  element.nodeName === node.nodeName &&\n                  node.nodeName !== 'g'\n                ) {\n                  copyAttributes(element, node);\n                } else {\n                  element.parentNode.replaceChild(node, element);\n                  node.className = ELEMENT_CLASS_NAME;\n                  // @ts-ignore\n                  node.markType = type;\n                  // @ts-ignore\n                  node.__data__ = element.__data__;\n                }\n                return animation;\n              })\n              .each(function (d, i, element) {\n                if (element.__removed__) {\n                  element.__removed__ = false;\n                }\n              })\n              .attr('markType', type)\n              .attr('className', ELEMENT_CLASS_NAME);\n          }),\n        (exit) => {\n          return exit\n            .each(function (d, i, element) {\n              element.__removed__ = true;\n            })\n            .transition(function (data, i, element) {\n              return exitFunction(data, [element]);\n            })\n            .remove();\n        },\n        (merge) =>\n          merge\n            // Append elements to be merged.\n            .append(shapeFunction)\n            .attr('className', ELEMENT_CLASS_NAME)\n            .attr('markType', type)\n            .transition(function (data, i, element) {\n              // Remove merged elements after animation finishing.\n              const { __fromElements__: fromElements } = element;\n              const transition = updateFunction(data, fromElements, [element]);\n              const exit = new Selection(\n                fromElements,\n                null,\n                element.parentNode,\n              );\n              exit.transition(transition).remove();\n              return transition;\n            }),\n        (split) =>\n          split\n            .transition(function (data, i, element) {\n              // Append splitted shapes.\n              const enter = new Selection(\n                [],\n                element.__toData__,\n                element.parentNode,\n              );\n              const toElements = enter\n                .append(shapeFunction)\n                .attr('className', ELEMENT_CLASS_NAME)\n                .attr('markType', type)\n                .nodes();\n              return updateFunction(data, [element], toElements);\n            })\n            // Remove elements to be splitted after animation finishing.\n            .remove(),\n      )\n      .transitions();\n    transitions.push(...T.flat());\n  }\n\n  // Plot label for this view.\n  plotLabel(view, selection, transitions, library, context);\n  plotBreak(view, selection, library, context);\n}\n\n/**\n * Auto hide labels be specify label layout.\n */\nfunction plotLabel(\n  view: G2ViewDescriptor,\n  selection: Selection,\n  transitions: GAnimation[],\n  library: G2Library,\n  context: G2Context,\n) {\n  const [useLabelTransform] = useLibrary<\n    G2LabelTransformOptions,\n    LabelTransformComponent,\n    LabelTransform\n  >('labelTransform', library);\n  const { markState, labelTransform } = view;\n  const labelLayer = selection.select(className(LABEL_LAYER_CLASS_NAME)).node();\n\n  // A Map index shapeFunction by label.\n  const labelShapeFunction = new Map();\n\n  // A Map index options by label.\n  const labelDescriptor = new Map();\n\n  // Get all labels for this view.\n  const labels = Array.from(markState.entries()).flatMap(([mark, state]) => {\n    const { labels: labelOptions = [], key } = mark;\n    const shapeFunction = createLabelShapeFunction(\n      mark,\n      state,\n      view,\n      library,\n      context,\n    );\n    const elements = selection\n      .select(`#${key}`)\n      .selectAll(className(ELEMENT_CLASS_NAME))\n      .nodes()\n      // Only select the valid element.\n      .filter((n) => {\n        if (n.__removed__) return false;\n        // Filter out elements that are hidden (e.g., by slider filtering)\n        // Check if element or its children have visibility: hidden\n        const isHidden =\n          n.style?.visibility === 'hidden' ||\n          (n.children &&\n            n.children.some((child) => child.style?.visibility === 'hidden'));\n        return !isHidden;\n      });\n    return labelOptions.flatMap((labelOption, i) => {\n      const { transform = [], ...options } = labelOption;\n      return elements.flatMap((e) => {\n        const L = getLabels(options, i, e);\n        L.forEach((l) => {\n          labelShapeFunction.set(l, (data) =>\n            shapeFunction({ ...data, element: e }),\n          );\n          labelDescriptor.set(l, labelOption);\n        });\n        return L;\n      });\n    });\n  });\n\n  // Render all labels.\n  const labelShapes = select(labelLayer)\n    .selectAll(className(LABEL_CLASS_NAME))\n    .data(labels, (d) => d.key)\n    .join(\n      (enter) =>\n        enter\n          .append((d) => labelShapeFunction.get(d)(d))\n          .attr('className', LABEL_CLASS_NAME),\n      (update) =>\n        update.each(function (d, i, element) {\n          // @todo Handle Label with different type.\n          const shapeFunction = labelShapeFunction.get(d);\n          const node = shapeFunction(d);\n          copyAttributes(element, node);\n        }),\n      (exit) => exit.remove(),\n    )\n    .nodes();\n\n  // Apply group-level transforms.\n  const labelGroups = group(labelShapes, (d) =>\n    labelDescriptor.get(d.__data__),\n  );\n  const { coordinate, layout } = view;\n\n  const labelTransformContext = {\n    canvas: context.canvas,\n    coordinate,\n    layout,\n  };\n  for (const [label, shapes] of labelGroups) {\n    const { transform = [] } = label;\n    const transformFunction = compose(transform.map(useLabelTransform));\n    transformFunction(shapes, labelTransformContext);\n  }\n\n  // Apply view-level transform.\n  if (labelTransform) {\n    labelTransform(labelShapes, labelTransformContext);\n  }\n}\n\nfunction getLabels(\n  label: Record<string, any>,\n  labelIndex: number,\n  element: G2Element,\n): Record<string, any>[] {\n  const { seriesIndex: SI, seriesKey, points, key, index } = element.__data__;\n  const bounds = getLocalBounds(element);\n  if (!SI) {\n    return [\n      {\n        ...label,\n        key: `${key}-${labelIndex}`,\n        bounds,\n        index,\n        points,\n        dependentElement: element,\n      },\n    ];\n  }\n  const selector = normalizeLabelSelector(label);\n  const F = SI.map((index: number, i: number) => ({\n    ...label,\n    key: `${seriesKey[i]}-${labelIndex}`,\n    bounds: [points[i]],\n    index,\n    points,\n    dependentElement: element,\n  }));\n  // @ts-ignore\n  return selector ? selector(F) : F;\n}\n\n/**\n * Plot break shapes.\n */\nfunction plotBreak(\n  view: G2ViewDescriptor,\n  selection: Selection,\n  library: G2Library,\n  context: G2Context,\n) {\n  const scale = view.scale;\n  const breaks = get(scale, 'y.options.breaks', []);\n  const { document } = context.canvas;\n  [BREAK_CLASS_NAME, BREAK_GROUP_CLASS_NAME].forEach((d) => {\n    document.getElementsByClassName(d).forEach((e) => {\n      e.remove();\n    });\n  });\n  if (!breaks.length) {\n    return;\n  }\n  const breakLayer = selection.select(className(PLOT_CLASS_NAME)).node();\n  const [useShape] = useLibrary<G2ShapeOptions, ShapeComponent, Shape>(\n    'shape',\n    library,\n  );\n  const breaksShapeFunction = new Map();\n  breaks.forEach((breakConfig, index) => {\n    breaksShapeFunction.set(\n      breakConfig,\n      useShape(\n        {\n          type: 'break',\n        },\n        {\n          view,\n          selection,\n          context,\n        },\n      ),\n    );\n  });\n\n  // Render all breaks.\n  select(breakLayer)\n    .selectAll(className(BREAK_CLASS_NAME))\n    .data(breaks, (d) => d.key)\n    .join(\n      (enter) =>\n        enter\n          .append((d, index) => breaksShapeFunction.get(d)(d, index))\n          .attr('className', BREAK_CLASS_NAME),\n      (update) =>\n        update.each(function (d, i, element) {\n          const shapeFunction = breaksShapeFunction.get(d);\n          const node = shapeFunction(d, i);\n          copyAttributes(element, node);\n        }),\n      (exit) => exit.remove(),\n    )\n    .nodes();\n}\n\nfunction filterValid([I, P, S]: [number[], Vector2[][], number[][]?]): [\n  number[],\n  Vector2[][],\n  number[][]?,\n] {\n  if (S) return [I, P, S];\n  const definedIndex = [];\n  const definedPoints = [];\n  for (let i = 0; i < I.length; i++) {\n    const d = I[i];\n    const p = P[i];\n    if (p.every(([x, y]) => defined(x) && defined(y))) {\n      definedIndex.push(d);\n      definedPoints.push(p);\n    }\n  }\n  return [definedIndex, definedPoints];\n}\n\nfunction normalizeLabelSelector(\n  label: Record<string, any>,\n): (I: number[]) => number[] {\n  const { selector } = label;\n  if (!selector) return null;\n  if (typeof selector === 'function') return selector;\n  if (selector === 'first') return (I) => [I[0]];\n  if (selector === 'last') return (I) => [I[I.length - 1]];\n  throw new Error(`Unknown selector: ${selector}`);\n}\n\n/**\n * Avoid getting error bounds caused by element animations.\n * @todo Remove this temporary handle method, if runtime supports\n * correct process: drawElement, do label layout and then do\n * transitions together.\n */\nfunction getLocalBounds(element: DisplayObject) {\n  const cloneElement = element.cloneNode(true);\n  const animations = element.getAnimations();\n  cloneElement.style.visibility = 'hidden';\n  animations.forEach((animation) => {\n    const keyframes = animation.effect.getKeyframes();\n    cloneElement.attr(keyframes[keyframes.length - 1]);\n  });\n  element.parentNode.appendChild(cloneElement);\n  const bounds = cloneElement.getLocalBounds();\n  cloneElement.destroy();\n  const { min, max } = bounds;\n  return [min, max];\n}\n\nfunction createLabelShapeFunction(\n  mark: G2Mark,\n  state: G2MarkState,\n  view: G2ViewDescriptor,\n  library: G2Library,\n  context: G2Context,\n): (options: Record<string, any>) => DisplayObject {\n  const [useShape] = useLibrary<G2ShapeOptions, ShapeComponent, Shape>(\n    'shape',\n    library,\n  );\n  const { data: abstractData, encode } = mark;\n  const { data: visualData, defaultLabelShape } = state;\n  const point2d = visualData.map((d) => d.points);\n  const channel = mapObject(encode, (d) => d.value);\n\n  // Assemble Context.\n  const { theme, coordinate } = view;\n  const shapeContext = {\n    ...context,\n    document: documentOf(context),\n    theme,\n    coordinate,\n  };\n\n  return (options) => {\n    // Computed values from data and styles.\n    const { index, points } = options;\n    const datum = abstractData[index];\n    const {\n      formatter = (d) => `${d}`,\n      transform,\n      style: abstractStyle,\n      render,\n      selector,\n      element,\n      ...abstractOptions\n    } = options;\n\n    const visualOptions = mapObject(\n      { ...abstractOptions, ...abstractStyle } as Record<string, any>,\n      (d) =>\n        valueOf(d, datum, index, abstractData, {\n          channel,\n          element,\n        }),\n    );\n    const { shape = defaultLabelShape, text, ...style } = visualOptions;\n    const f = typeof formatter === 'string' ? format(formatter) : formatter;\n    const value = {\n      ...style,\n      text: f(text, datum, index, abstractData),\n      datum,\n    };\n\n    // Params for create shape.\n    const shapeOptions = { type: `label.${shape}`, render, ...style };\n    const shapeFunction = useShape(shapeOptions, shapeContext);\n    const defaults = getDefaultsStyle(theme, 'label', shape, 'label');\n\n    return shapeFunction(points, value, defaults, point2d);\n  };\n}\n\nfunction valueOf(\n  value: Primitive | ((d: any, i: number, array: any, channel: any) => any),\n  datum: Record<string, any>,\n  i: number,\n  data: Record<string, any>,\n  options: { channel: Record<string, any>; element?: G2Element },\n) {\n  if (typeof value === 'function') return value(datum, i, data, options);\n  if (typeof value !== 'string') return value;\n  if (isStrictObject(datum) && datum[value] !== undefined) return datum[value];\n  return value;\n}\n\n/**\n * Compute max duration for this frame.\n */\nfunction computeAnimationExtent(markState): [number, number] {\n  let maxDuration = -Infinity;\n  let minDelay = Infinity;\n  for (const [mark, state] of markState) {\n    const { animate = {} } = mark;\n    const { data } = state;\n    const { enter = {}, update = {}, exit = {} } = animate;\n    const {\n      type: defaultUpdateType,\n      duration: defaultUpdateDuration = 300,\n      delay: defaultUpdateDelay = 0,\n    } = update;\n    const {\n      type: defaultEnterType,\n      duration: defaultEnterDuration = 300,\n      delay: defaultEnterDelay = 0,\n    } = enter;\n    const {\n      type: defaultExitType,\n      duration: defaultExitDuration = 300,\n      delay: defaultExitDelay = 0,\n    } = exit;\n    for (const d of data) {\n      const {\n        updateType = defaultUpdateType,\n        updateDuration = defaultUpdateDuration,\n        updateDelay = defaultUpdateDelay,\n        enterType = defaultEnterType,\n        enterDuration = defaultEnterDuration,\n        enterDelay = defaultEnterDelay,\n        exitDuration = defaultExitDuration,\n        exitDelay = defaultExitDelay,\n        exitType = defaultExitType,\n      } = d;\n\n      if (updateType === undefined || updateType) {\n        maxDuration = Math.max(maxDuration, updateDuration + updateDelay);\n        minDelay = Math.min(minDelay, updateDelay);\n      }\n      if (exitType === undefined || exitType) {\n        maxDuration = Math.max(maxDuration, exitDuration + exitDelay);\n        minDelay = Math.min(minDelay, exitDelay);\n      }\n      if (enterType === undefined || enterType) {\n        maxDuration = Math.max(maxDuration, enterDuration + enterDelay);\n        minDelay = Math.min(minDelay, enterDelay);\n      }\n    }\n  }\n  if (maxDuration === -Infinity) return null;\n  return [minDelay, maxDuration - minDelay];\n}\n\nfunction selectFacetElements(\n  selection: Selection,\n  current: Selection,\n  facetClassName: string,\n  elementClassName: string,\n): DisplayObject[] {\n  const group = selection.node().parentElement;\n  if (!group || typeof group.findAll !== 'function') return [];\n  return group\n    .findAll(\n      (node) =>\n        node.style.facet !== undefined &&\n        node.style.facet === facetClassName &&\n        node !== current.node(), // Exclude current view.\n    )\n    .flatMap((node) => node.getElementsByClassName(elementClassName));\n}\n\n/**\n * Update the parent of element and apply transform to make it\n * stay in original position.\n */\nfunction maybeFacetElement(\n  element: G2Element,\n  parent: DisplayObject,\n  originOf: (node: DisplayObject) => [number, number],\n): void {\n  if (!element.__facet__) return;\n  // element -> g#main -> rect#plot\n  const prePlot = element.parentNode.parentNode as DisplayObject;\n  // g#main -> rect#plot\n  const newPlot = parent.parentNode as DisplayObject;\n  const [px, py] = originOf(prePlot);\n  const [x, y] = originOf(newPlot);\n  const translate = `translate(${px - x}, ${py - y})`;\n  appendTransform(element, translate);\n  parent.append(element);\n}\n\nfunction createMarkShapeFunction(\n  mark: G2Mark,\n  state: G2MarkState,\n  view: G2ViewDescriptor,\n  context: G2Context,\n): (\n  data: Record<string, any>,\n  index: number,\n  element?: DisplayObject,\n) => DisplayObject {\n  const { library } = context;\n\n  const [useShape] = useLibrary<G2ShapeOptions, ShapeComponent, Shape>(\n    'shape',\n    library,\n  );\n  const { data: abstractData, encode } = mark;\n  const { defaultShape, data, shape: shapeLibrary } = state;\n  const channel = mapObject(encode, (d) => d.value);\n  const point2d = data.map((d) => d.points);\n  const { theme, coordinate } = view;\n  const { type: markType, style = {} } = mark;\n  const shapeContext = {\n    ...context,\n    document: documentOf(context),\n    coordinate,\n    theme,\n  };\n  return (data) => {\n    const { shape: styleShape = defaultShape } = style;\n    const { shape = styleShape, points, seriesIndex, index: i, ...v } = data;\n    const value = { ...v, index: i };\n\n    // Get data-driven style.\n    // If it is a series shape, such as area and line,\n    // provides the series of abstract data and indices\n    // for this shape, otherwise the single datum and\n    // index.\n    const abstractDatum = seriesIndex\n      ? seriesIndex.map((i) => abstractData[i])\n      : abstractData[i];\n\n    const I = seriesIndex ? seriesIndex : i;\n    const visualStyle = mapObject(style, (d) =>\n      valueOf(d, abstractDatum, I, abstractData, { channel }),\n    );\n\n    // Try get shape from mark first, then from library.\n    const shapeFunction = shapeLibrary[shape]\n      ? shapeLibrary[shape](visualStyle, shapeContext)\n      : useShape(\n          { ...visualStyle, type: shapeName(mark, shape) },\n          shapeContext,\n        );\n\n    const defaults = getDefaultsStyle(theme, markType, shape, defaultShape);\n    return shapeFunction(points, value, defaults, point2d);\n  };\n}\n\nfunction getDefaultsStyle(\n  theme: G2Theme,\n  mark: string | MarkComponent,\n  shape: string,\n  defaultShape: string,\n) {\n  if (typeof mark !== 'string') return;\n  const { color } = theme;\n  const markTheme = theme[mark] || {};\n  const shapeTheme = markTheme[shape] || markTheme[defaultShape];\n  return Object.assign({ color }, shapeTheme);\n}\n\nfunction createAnimationFunction(\n  type: 'enter' | 'exit' | 'update',\n  mark: G2Mark,\n  state: G2MarkState,\n  view: G2ViewDescriptor,\n  library: G2Library,\n): (\n  data: Record<string, any>,\n  from: DisplayObject[],\n  to: DisplayObject[],\n) => GAnimation[] {\n  const [, createShape] = useLibrary<G2ShapeOptions, ShapeComponent, Shape>(\n    'shape',\n    library,\n  );\n  const [useAnimation] = useLibrary<\n    G2AnimationOptions,\n    AnimationComponent,\n    Animation\n  >('animation', library);\n  const { defaultShape, shape: shapeLibrary } = state;\n  const { theme, coordinate } = view;\n\n  const upperType = upperFirst(type) as 'Enter' | 'Exit' | 'Update';\n  const key:\n    | 'defaultEnterAnimation'\n    | 'defaultExitAnimation'\n    | 'defaultUpdateAnimation' = `default${upperType}Animation`;\n\n  // Get shape from mark first, then from library.\n  const { [key]: defaultAnimation } =\n    shapeLibrary[defaultShape]?.props ||\n    createShape(shapeName(mark, defaultShape)).props;\n\n  const { [type]: defaultEffectTiming = {} } = theme;\n  const animate = mark.animate?.[type] || {};\n  const context = { coordinate };\n\n  return (data, from, to) => {\n    const {\n      [`${type}Type`]: animation,\n      [`${type}Delay`]: delay,\n      [`${type}Duration`]: duration,\n      [`${type}Easing`]: easing,\n    } = data;\n\n    const options = {\n      type: animation || defaultAnimation,\n      ...animate,\n    };\n    if (!options.type) return null;\n\n    const animateFunction = useAnimation(options, context);\n    const value = { delay, duration, easing };\n    const A = animateFunction(from, to, deepMix(defaultEffectTiming, value));\n    let an: GAnimation[] = [];\n    if (!Array.isArray(A)) {\n      an = [A];\n    } else {\n      an = A;\n    }\n    return an.filter(Boolean);\n  };\n}\n\nfunction createEnterFunction(\n  mark: G2Mark,\n  state: G2MarkState,\n  view: G2ViewDescriptor,\n  library: G2Library,\n): (\n  data: Record<string, any>,\n  from?: DisplayObject[],\n  to?: DisplayObject[],\n) => GAnimation[] {\n  return createAnimationFunction('enter', mark, state, view, library);\n}\n\n/**\n * Animation will not cancel automatically, it should be canceled\n * manually. This is very important for performance.\n */\nfunction cancel(animation: GAnimation): GAnimation {\n  animation.finished.then(() => {\n    animation.cancel();\n  });\n  return animation;\n}\n\nfunction createUpdateFunction(\n  mark: G2Mark,\n  state: G2MarkState,\n  view: G2ViewDescriptor,\n  library: G2Library,\n): (\n  data: Record<string, any>,\n  from?: DisplayObject[],\n  to?: DisplayObject[],\n) => GAnimation[] {\n  return createAnimationFunction('update', mark, state, view, library);\n}\n\nfunction createExitFunction(\n  mark: G2Mark,\n  state: G2MarkState,\n  view: G2ViewDescriptor,\n  library: G2Library,\n): (\n  data: Record<string, any>,\n  from?: DisplayObject[],\n  to?: DisplayObject[],\n) => GAnimation[] {\n  return createAnimationFunction('exit', mark, state, view, library);\n}\n\nfunction inferTheme(theme: G2ThemeOptions = {}): G2ThemeOptions {\n  if (typeof theme === 'string') return { type: theme };\n  const { type = 'light', ...rest } = theme;\n  return { ...rest, type };\n}\n\n/**\n * @todo Infer builtin tooltips.\n */\nfunction inferInteraction(\n  view: G2View,\n): [string, boolean | Omit<G2InteractionOptions, 'type'>][] {\n  const defaults = {\n    event: true,\n    tooltip: true,\n    // @todo Inferred by slider self.\n    sliderFilter: true,\n    legendFilter: true,\n    scrollbarFilter: true,\n  };\n  const { interaction = {} } = view;\n  return Object.entries(deepMix(defaults, interaction)).reverse();\n}\n\nasync function applyTransform<T extends G2ViewTree>(\n  node: T,\n  context: G2Context,\n): Promise<G2ViewTree> {\n  const { data, ...rest } = node;\n  if (data == undefined) return node;\n  const [, { data: newData }] = await applyDataTransform([], { data }, context);\n  return { data: newData, ...rest };\n}\n\nfunction updateBBox(selection: Selection) {\n  selection\n    .style(\n      'transform',\n      (d) =>\n        `translate(${d.paddingLeft + d.marginLeft}, ${\n          d.paddingTop + d.marginTop\n        })`,\n    )\n    .style('width', (d) => d.innerWidth)\n    .style('height', (d) => d.innerHeight);\n}\n\nfunction animateBBox(selection: Selection, extent: [number, number]) {\n  const [delay, duration] = extent;\n  selection.transition(function (data, i, element) {\n    const { transform, width, height } = element.style;\n    const {\n      paddingLeft,\n      paddingTop,\n      innerWidth,\n      innerHeight,\n      marginLeft,\n      marginTop,\n    } = data;\n    const keyframes = [\n      {\n        transform,\n        width,\n        height,\n      },\n      {\n        transform: `translate(${paddingLeft + marginLeft}, ${\n          paddingTop + marginTop\n        })`,\n        width: innerWidth,\n        height: innerHeight,\n      },\n    ];\n    return element.animate(keyframes, { delay, duration, fill: 'both' });\n  });\n}\n\nfunction shapeName(mark, name) {\n  const { type } = mark;\n  if (typeof name === 'string') return `${type}.${name}`;\n  return name;\n}\n\n/**\n * Create and update layer for each mark.\n * All the layers created here are treated as main layers.\n */\nfunction updateLayers(selection: Selection, marks: G2Mark[]) {\n  const facet = (d) => (d.class !== undefined ? `${d.class}` : '');\n\n  // Skip for empty selection, it can't append nodes.\n  const nodes = selection.nodes();\n  if (nodes.length === 0) return;\n\n  selection\n    .selectAll(className(MAIN_LAYER_CLASS_NAME))\n    .data(marks, (d) => d.key)\n    .join(\n      (enter) =>\n        enter\n          .append('g')\n          .attr('className', MAIN_LAYER_CLASS_NAME)\n          .attr('id', (d) => d.key)\n          .style('facet', facet)\n          .style('fill', 'transparent')\n          .style('zIndex', (d) => d.zIndex ?? 0),\n      (update) =>\n        update\n          .style('facet', facet)\n          .style('fill', 'transparent')\n          .style('zIndex', (d) => d.zIndex ?? 0),\n      (exit) => exit.remove(),\n    );\n\n  const labelLayer = selection.select(className(LABEL_LAYER_CLASS_NAME)).node();\n  if (labelLayer) return;\n  selection\n    .append('g')\n    .attr('className', LABEL_LAYER_CLASS_NAME)\n    .style('zIndex', 0);\n}\n\nfunction className(...names: string[]): string {\n  return names.map((d) => `.${d}`).join('');\n}\n\nfunction applyClip(selection, clip?: boolean) {\n  if (!selection.node()) return;\n  selection.style('clipPath', (data) => {\n    if (!clip) return null;\n    const {\n      paddingTop: y,\n      paddingLeft: x,\n      marginLeft: x1,\n      marginTop: y1,\n      innerWidth: width,\n      innerHeight: height,\n    } = data;\n    return new Rect({ style: { x: x + x1, y: y + y1, width, height } });\n  });\n}\n\nfunction inferComponentScales(\n  scales: G2ScaleOptions[],\n  states: G2MarkState[],\n  markState: Map<G2Mark, G2MarkState>,\n): G2ScaleOptions[] {\n  // add shape scale to state.\n\n  // for cell, omit shape scale.\n  // @todo support shape scale for cell.\n  for (const [key] of markState.entries()) {\n    if (key.type === 'cell') {\n      return scales.filter((scale) => scale.name !== 'shape');\n    }\n  }\n\n  // can't infer shape scale if there are multiple states.\n  if (states.length !== 1 || scales.some((scale) => scale.name === 'shape')) {\n    return scales;\n  }\n\n  const { defaultShape: shape } = states[0];\n  const acceptMarkTypes = ['point', 'line', 'rect', 'hollow'];\n  if (!acceptMarkTypes.includes(shape)) return scales;\n  const shapeMap = {\n    point: 'point',\n    line: 'hyphen',\n    rect: 'square',\n    hollow: 'hollow',\n  };\n\n  // create shape scale\n  const field = scales.find((scale) => scale.name === 'color')?.field || null;\n  const shapeScale = {\n    field,\n    name: 'shape',\n    type: 'constant',\n    domain: [],\n    range: [shapeMap[shape]],\n  };\n  return [...scales, shapeScale];\n}\n\nexport function applyStyle(\n  selection: Selection,\n  style: Record<string, Primitive>,\n) {\n  for (const [key, value] of Object.entries(style)) {\n    selection.style(key, value);\n  }\n}\n", "type FlowFunction<P> = (param: P) => P;\n\n/**\n *  lodash.flow \n * @param flows\n */\nexport function flow<P>(...flows: FlowFunction<P>[]): FlowFunction<P> {\n  return (param: P) => {\n    return flows.reduce((result: P, f: FlowFunction<P>) => {\n      return f(result);\n    }, param);\n  };\n}\n", "import { get } from '@antv/util';\nimport { G2View, G2ViewTree } from '../types/options';\n\n// style: { columnWidthRatio: 0.2 } => scale: { x: { padding: 0.8 } }\nexport function columnWidthRatio<T extends G2ViewTree = G2ViewTree>(\n  options: T,\n): T {\n  const { style, scale, type } = options;\n  const scaleOption: G2View = {};\n  const columnWidthRatio = get(style, 'columnWidthRatio');\n  if (columnWidthRatio && type === 'interval') {\n    scaleOption.x = {\n      ...scale?.x,\n      padding: 1 - columnWidthRatio,\n    };\n  }\n  return {\n    ...options,\n    scale: { ...scale, ...scaleOption },\n  };\n}\n", "import { get, set } from '@antv/util';\nimport { G2ViewTree } from '../types/options';\n\n/**\n * Convert a percentage string to a ratio.\n */\nexport const percentToRatio = (gap: string) => {\n  if (!gap || typeof gap !== 'string') {\n    return gap;\n  }\n  const value = gap.endsWith('%')\n    ? parseFloat(gap.slice(0, -1)) / 100\n    : parseFloat(gap);\n  if (isNaN(value) || value < 0 || value > 1) {\n    throw new Error(`Invalid gap value: ${gap}. It should be between 0 and 1.`);\n  }\n  return value;\n};\n\nexport function axisBreaks<T extends G2ViewTree = G2ViewTree>(options: T): T {\n  const { axis } = options;\n  const breaks = get(axis, 'y.breaks');\n\n  if (breaks) {\n    set(\n      options,\n      'scale.y.breaks',\n      breaks.map((item) => ({\n        key: `break-${item.start}-${item.end}`,\n        ...item,\n        gap: percentToRatio(item.gap),\n      })),\n    );\n  }\n  return options;\n}\n", "import { G2ViewTree } from '../types/options';\nimport { flow } from '../../utils/flow';\nimport { columnWidthRatio } from './style';\nimport { axisBreaks } from './axis-breaks';\n\nexport function preprocessOption<T extends G2ViewTree = G2ViewTree>(\n  options: T,\n): T {\n  const convertedOptions = adapter(options);\n  // If there are children, recursively convert each child node.\n  if (convertedOptions.children && Array.isArray(convertedOptions.children)) {\n    convertedOptions.children = convertedOptions.children.map((child) =>\n      preprocessOption(child),\n    );\n  }\n\n  return convertedOptions;\n}\n\n// Entry point for all syntactic sugar functions.\nfunction adapter<T extends G2ViewTree = G2ViewTree>(options: T): T {\n  //@todo define a type for params of flow\n  return flow(columnWidthRatio, axisBreaks)(options);\n}\n", "import { Canvas as GCanvas, DisplayObject, Group } from '@antv/g';\nimport { Renderer as CanvasRenderer } from '@antv/g-canvas';\nimport { Plugin as DragAndDropPlugin } from '@antv/g-plugin-dragndrop';\nimport { deepMix } from '@antv/util';\nimport EventEmitter from '@antv/event-emitter';\nimport { select } from '../utils/selection';\nimport { ChartEvent } from '../utils/event';\nimport { error } from '../utils/helper';\nimport { parseOptionsExpr } from '../utils/expr';\nimport { G2Context, G2ViewTree } from './types/options';\nimport { plot } from './plot';\nimport { VIEW_CLASS_NAME } from './constant';\nimport { preprocessOption } from './option-preprocess';\n/**\n * Infer key for each node of view tree.\n * Each key should be unique in the entire view tree.\n * The key is for incremental render when view tree is changed.\n * @todo Fix custom key equals to inferred key.\n */\nfunction inferKeys<T extends G2ViewTree = G2ViewTree>(options: T): T {\n  const root = deepMix({}, options);\n  const nodeParent = new Map<T, T>([[root, null]]);\n  const nodeIndex = new Map<T, number>([[null, -1]]);\n  const discovered = [root];\n  while (discovered.length) {\n    const node = discovered.shift();\n    // If key of node is not specified, using parentKey and the index for it\n    // in parent.children as its key.\n    // e.g. The key of node named 'a' will be 'a', and the key of node named\n    // 'b' will be 'parent-1' in the following view tree specification.\n    // { key: 'parent', children: [{ name: 'a', key: 'a' }, { name: 'b' }] }\n    if (node.key === undefined) {\n      const parent = nodeParent.get(node);\n      const index = nodeIndex.get(node);\n      const key = parent === null ? `${0}` : `${parent.key}-${index}`;\n      node.key = key;\n    }\n    const { children = [] } = node;\n    if (Array.isArray(children)) {\n      for (let i = 0; i < children.length; i++) {\n        // Clone node as well.\n        const child = deepMix({}, children[i]);\n        children[i] = child;\n        nodeParent.set(child, node);\n        nodeIndex.set(child, i);\n        discovered.push(child);\n      }\n    }\n  }\n  return root;\n}\n\nfunction Canvas(width: number, height: number): GCanvas {\n  const renderer = new CanvasRenderer();\n  // DragAndDropPlugin is for interaction.\n  renderer.registerPlugin(new DragAndDropPlugin());\n  return new GCanvas({\n    width,\n    height,\n    container: document.createElement('div'),\n    renderer: renderer,\n  });\n}\n\nexport function render<T extends G2ViewTree = G2ViewTree>(\n  options: T,\n  context: G2Context = {},\n  resolve = (): void => {},\n  reject = (e?: any): void => {\n    throw e;\n  },\n): HTMLElement {\n  const afterParsedOptions = parseOptionsExpr(options);\n  // Initialize the context if it is not provided.\n  const { width = 640, height = 480, depth = 0 } = afterParsedOptions;\n  // Preprocessing here, such as syntactic sugar.\n  const preprocessedOption = preprocessOption(afterParsedOptions);\n  const keyed = inferKeys(preprocessedOption);\n  const {\n    canvas = Canvas(width, height),\n    emitter = new EventEmitter(),\n    library,\n  } = context;\n\n  context.canvas = canvas;\n  context.emitter = emitter;\n  context.externals = {};\n\n  const { width: prevWidth, height: prevHeight } = canvas.getConfig();\n  if (prevWidth !== width || prevHeight !== height) {\n    canvas.resize(width, height);\n  }\n\n  emitter.emit(ChartEvent.BEFORE_RENDER);\n\n  // Plot the chart and mutate context.\n  // Make sure that plot chart after container is ready for every time.\n  const selection = select(canvas.document.documentElement);\n  canvas.ready\n    .then(() => plot<T>({ ...keyed, width, height, depth }, selection, context))\n    .then(() => {\n      // Place the center of whole scene at z axis' origin.\n      if (depth) {\n        const [x, y] = canvas!.document.documentElement.getPosition();\n        // Since `render` method can be called for multiple times, use setPosition instead of translate here.\n        canvas!.document.documentElement.setPosition(x, y, -depth / 2);\n      }\n\n      // Wait for the next tick.\n      // FIXME: Use `rendered?` event instead of `requestAnimationFrame`.\n      canvas.requestAnimationFrame(() => {\n        canvas.requestAnimationFrame(() => {\n          emitter.emit(ChartEvent.AFTER_RENDER);\n          resolve?.();\n        });\n      });\n    })\n    .catch((e) => {\n      reject?.(e);\n    });\n\n  // Return the container HTML element wraps the canvas or svg element.\n  return normalizeContainer(canvas.getConfig().container);\n}\n\nexport function renderToMountedElement<T extends G2ViewTree = G2ViewTree>(\n  options: T,\n  context: G2Context = {},\n  resolve = () => {},\n  reject = (e?: any) => {\n    throw e;\n  },\n): DisplayObject {\n  // Initialize the context if it is not provided.\n  const { width = 640, height = 480 } = options;\n  const keyed = inferKeys(options);\n  const {\n    group = new Group(),\n    emitter = new EventEmitter(),\n    library,\n  } = context;\n\n  if (!group?.parentElement) {\n    error(`renderToMountedElement can't render chart to unmounted group.`);\n  }\n\n  const selection = select(group);\n  context.group = group;\n  context.emitter = emitter;\n  context.externals = {};\n  context.canvas =\n    context.canvas || (group?.ownerDocument?.defaultView as GCanvas);\n\n  emitter.emit(ChartEvent.BEFORE_RENDER);\n  // Plot the chart and mutate context.\n  // Make sure that plot chart after container is ready for every time.\n  plot<T>({ ...keyed, width, height }, selection, context)\n    .then(() => {\n      context.canvas?.requestAnimationFrame(() => {\n        emitter.emit(ChartEvent.AFTER_RENDER);\n        resolve?.();\n      });\n    })\n    .catch((e) => {\n      reject?.(e);\n    });\n\n  // Return the Group wraps the canvas or svg element.\n  return group;\n}\n\nexport function destroy<T extends G2ViewTree = G2ViewTree>(\n  options: T,\n  context: G2Context = {},\n  isDestroyCanvas = false,\n  isClearEvents = true,\n) {\n  const { canvas, emitter } = context;\n  if (canvas) {\n    destroyAllInteractions(canvas);\n    isDestroyCanvas ? canvas.destroy() : canvas.destroyChildren();\n  }\n\n  if (isClearEvents) {\n    emitter.off();\n  }\n}\n\n/**\n * Destroy all interactions mounted on the canvas.\n */\nfunction destroyAllInteractions(canvas: GCanvas) {\n  const viewGroups = canvas.getRoot().querySelectorAll(`.${VIEW_CLASS_NAME}`);\n  viewGroups?.forEach((group) => {\n    const { nameInteraction = new Map() }: Record<string, any> = group;\n    if (nameInteraction?.size > 0) {\n      Array.from(nameInteraction?.values()).forEach((value: any) => {\n        value?.destroy();\n      });\n    }\n  });\n}\n\nfunction normalizeContainer(container: HTMLElement | string): HTMLElement {\n  return typeof container === 'string'\n    ? document.getElementById(container)\n    : container;\n}\n", "import { bisectLeft, sort } from '@antv/vendor/d3-array';\n\nfunction constrain(x, lo, hi) {\n  return Math.min(hi, Math.max(lo, x));\n}\n\nexport function isOrdinalScale(scale) {\n  return !!scale.getBandWidth;\n}\n\nexport function invert(scale, x, start) {\n  if (!isOrdinalScale(scale)) return scale.invert(x);\n  const { adjustedRange } = scale;\n  if (adjustedRange.includes(x)) {\n    return scale.invert(x);\n  }\n  const { domain } = scale.getOptions();\n  const offset = start ? -1 : 0;\n  const step = scale.getStep();\n  const range = start ? adjustedRange : adjustedRange.map((d) => d + step);\n  // R[i0 - 1] < x <= R[i0]\n  const i0 = bisectLeft(range, x);\n  const i1 = constrain(i0 + offset, 0, domain.length - 1);\n  return domain[i1];\n}\n\nexport function domainOf(scale, values, ratioX?) {\n  if (!values) return scale.getOptions().domain;\n  if (!isOrdinalScale(scale)) {\n    const sortedDomain = sort(values);\n    if (!ratioX) return sortedDomain;\n    const [d] = sortedDomain;\n    const { range } = scale.getOptions();\n    const [r0, r1] = range;\n    const v = r0 > r1 ? -1 : 1;\n    const d1 = scale.invert(scale.map(d) + v * ratioX);\n    return [d, d1];\n  }\n  const { domain } = scale.getOptions();\n  const v1 = values[0];\n  const start = domain.indexOf(v1);\n  if (ratioX) {\n    const end = start + Math.round(domain.length * ratioX);\n    return domain.slice(start, end);\n  }\n  const v2 = values[values.length - 1];\n  const end = domain.indexOf(v2);\n  return domain.slice(start, end + 1);\n}\n\nexport function selectionOf(x, y, x1, y1, scale, coordinate) {\n  const { x: scaleX, y: scaleY } = scale;\n  const abstractDomain = (point, start) => {\n    const [x, y] = coordinate.invert(point);\n    return [invert(scaleX, x, start), invert(scaleY, y, start)];\n  };\n  const p0 = abstractDomain([x, y], true);\n  const p1 = abstractDomain([x1, y1], false);\n  const domainX = domainOf(scaleX, [p0[0], p1[0]]);\n  const domainY = domainOf(scaleY, [p0[1], p1[1]]);\n  return [domainX, domainY];\n}\n\nexport function abstractOf(domain, scale) {\n  const [d0, d1] = domain;\n  const maybeStep = (scale) => (scale.getStep ? scale.getStep() : 0);\n  return [scale.map(d0), scale.map(d1) + maybeStep(scale)];\n}\n\n// For slider display, use direct index-based mapping instead of scale.map()\n// to avoid inaccuracies caused by padding, band width, etc.\nexport const sliderAbstractOf = (domain, scale) => {\n  const [d0, d1] = domain;\n  const scaleDomain = scale.getOptions?.()?.domain || [];\n\n  const index0 = scaleDomain.indexOf(d0);\n  const index1 = scaleDomain.indexOf(d1);\n\n  if (index0 === -1 || index1 === -1) {\n    return [scale.map(d0), scale.map(d1)];\n  }\n\n  const count = scaleDomain.length;\n  if (count <= 1) {\n    return [0, 1];\n  }\n\n  return [index0 / (count - 1), index1 / (count - 1)];\n};\n\nexport function pixelsOf(selection, scale, coordinate) {\n  const { x: scaleX, y: scaleY } = scale;\n  const [X, Y] = selection;\n  const AX = abstractOf(X, scaleX);\n  const AY = abstractOf(Y, scaleY);\n  const p0 = [AX[0], AY[0]];\n  const p1 = [AX[1], AY[1]];\n  const [x, y] = coordinate.map(p0);\n  const [x1, y1] = coordinate.map(p1);\n  return [x, y, x1, y1];\n}\n", "import { DisplayObject } from '@antv/g';\n\nexport function traverseElements(\n  element: DisplayObject,\n  visitor: (el: DisplayObject) => boolean | void,\n): boolean {\n  if (visitor(element)) return true;\n  if (element.tagName === 'g') {\n    const { childNodes = [] } = element;\n    for (const child of childNodes) {\n      if (traverseElements(child as DisplayObject, visitor)) return true;\n    }\n  }\n\n  return false;\n}\n", "import type { DisplayObject, BaseStyleProps } from '@antv/g';\nimport { traverseElements } from './traverse-elements';\n\nconst defaultStyle: BaseStyleProps = {\n  visibility: 'visible',\n  opacity: 1,\n  fillOpacity: 1,\n  strokeOpacity: 1,\n};\n\nexport function getStyle(element: DisplayObject, key: string) {\n  let value: any;\n  traverseElements(element, (el) => {\n    if (el.tagName !== 'g' && el.style?.[key] !== undefined) {\n      value = el.style[key];\n      return true;\n    }\n    return false;\n  });\n\n  return value ?? defaultStyle[key];\n}\n\nexport function setStyle(\n  element: DisplayObject,\n  key: string,\n  value: any,\n  recursive: boolean,\n) {\n  element.style[key] = value;\n  if (recursive) {\n    element.children.forEach((child: DisplayObject) =>\n      setStyle(child, key, value, recursive),\n    );\n  }\n}\n\nexport function hide(element: DisplayObject) {\n  setStyle(element, 'visibility', 'hidden', true);\n}\n\nexport function show(element: DisplayObject) {\n  setStyle(element, 'visibility', 'visible', true);\n}\n", "import { DisplayObject, Path, AABB } from '@antv/g';\nimport { path as d3Path } from '@antv/vendor/d3-path';\nimport { sort, bisector } from '@antv/vendor/d3-array';\nimport { Vector2 } from '@antv/coord';\nimport { filter } from '@antv/util';\nimport type { PathArray } from '@antv/util';\nimport { G2Element, select } from '../utils/selection';\nimport { mapObject } from '../utils/array';\nimport {\n  G2ViewDescriptor,\n  ELEMENT_CLASS_NAME,\n  PLOT_CLASS_NAME,\n} from '../runtime';\nimport { isOrdinalScale } from '../utils/scale';\nimport { rect } from '../shape/interval/color';\nimport { isPolar, isTranspose } from '../utils/coordinate';\nimport { getStyle } from '../utils/style';\nimport { reorder } from '../shape/utils';\nimport { angle, angleBetween, sub } from '../utils/vector';\nimport { traverseElements } from '../utils/traverse-elements';\n\n/**\n * Given root of chart returns elements to be manipulated\n */\nexport function selectG2Elements(root: DisplayObject): DisplayObject[] {\n  return select(root)\n    .selectAll(`.${ELEMENT_CLASS_NAME}`)\n    .nodes()\n    .filter((d) => !d.__removed__);\n}\n\nexport function selectFacetG2Elements(target, viewInstances): DisplayObject[] {\n  return selectFacetViews(target, viewInstances).flatMap(({ container }) =>\n    selectG2Elements(container),\n  );\n}\n\nexport function selectFacetViews(target, viewInstances) {\n  return viewInstances.filter(\n    (d) => d !== target && d.options.parentKey === target.options.key,\n  );\n}\n\nexport function selectPlotArea(root: DisplayObject): DisplayObject {\n  return select(root).select(`.${PLOT_CLASS_NAME}`).node();\n}\n\nexport function bboxOf(element: DisplayObject) {\n  // The geometry bounds of a group is empty, so return the render bounds.\n  if (element.tagName === 'g') return element.getRenderBounds();\n\n  // Compute the geometry bounds related to the parent.\n  const bounds = element.getGeometryBounds();\n  const aabb = new AABB();\n  aabb.setFromTransformedAABB(bounds, element.getWorldTransform());\n  return aabb;\n}\n\nexport function mousePosition(target, event) {\n  const { offsetX, offsetY } = event;\n  const bbox = bboxOf(target);\n  const {\n    min: [x, y],\n    max: [x1, y1],\n  } = bbox;\n  const isOutX = offsetX < x || offsetX > x1;\n  const isOutY = offsetY < y || offsetY > y1;\n  if (isOutX || isOutY) return null;\n  return [offsetX - x, offsetY - y];\n}\n\n/**\n * @todo Pass bbox rather than calc it here.\n */\nexport function brushMousePosition(target, event) {\n  const { offsetX, offsetY } = event;\n  const [x, y, x1, y1] = boundsOfBrushArea(target);\n  return [\n    Math.min(x1, Math.max(x, offsetX)) - x,\n    Math.min(y1, Math.max(y, offsetY)) - y,\n  ];\n}\n\nexport function boundsOfBrushArea(target) {\n  // Calc bbox after clipping.\n  const bbox = target.getRenderBounds();\n  const {\n    min: [x0, y0],\n    max: [x1, y1],\n  } = bbox;\n  return [x0, y0, x1, y1];\n}\n\nexport function createColorKey(view) {\n  return (element) => element.__data__.color;\n}\n\nexport function createXKey(view) {\n  return (element) => element.__data__.x;\n}\n\nexport function createDatumof(view: G2ViewDescriptor | G2ViewDescriptor[]) {\n  const views = Array.isArray(view) ? view : [view];\n  const keyData = new Map(\n    views.flatMap((view) => {\n      const marks = Array.from(view.markState.keys());\n      return marks.map((mark) => [keyed(view.key, mark.key), mark.data]);\n    }),\n  );\n  return (element) => {\n    const { index, markKey, viewKey } = element.__data__;\n    const data = keyData.get(keyed(viewKey, markKey));\n    return data[index];\n  };\n}\n\n/**\n * A state manager for G2Element.\n * The keys for each state's style start with the state name.\n * { selectedFill, selectedStroke } is for selected state.\n * { unselectedFill, unselectedStroke } is for unselected state.\n */\n\n/**\n * Define state priorities, higher number means higher priority.\n */\nconst STATE_PRIORITIES = {\n  selected: 3,\n  unselected: 3,\n  active: 2,\n  inactive: 2,\n  default: 1,\n};\n\n/**\n * Define state groups, states in the same group are mutually exclusive.\n */\nconst STATE_GROUPS = {\n  selection: ['selected', 'unselected'],\n  highlight: ['active', 'inactive'],\n};\n\nconst setElementAttribute = (element: DisplayObject, k: string, v: string) => {\n  traverseElements(element, (el) => {\n    if ('setAttribute' in el && typeof el.setAttribute === 'function') {\n      (el as DisplayObject).setAttribute(k, v);\n    }\n  });\n};\n\nexport function createUseState(\n  style: Record<string, any>,\n  elements: Element[],\n) {\n  // Apply interaction style to all elements.\n  elements.forEach((element) => {\n    // @ts-ignore\n    const currentStyle = element.__interactionStyle__;\n\n    if (currentStyle) {\n      // @ts-ignore\n      element.__interactionStyle__ = { ...currentStyle, ...style };\n    } else {\n      // @ts-ignore\n      element.__interactionStyle__ = style;\n    }\n  });\n\n  return (valueof = (d, element) => d, setAttribute = setElementAttribute) =>\n    useState(undefined, valueof, setAttribute);\n}\n\nexport function useState(\n  style: Record<string, any> | undefined,\n  valueof = (d, element) => d,\n  setAttribute = setElementAttribute,\n) {\n  const STATES = '__states__';\n  const ORIGINAL = '__ordinal__';\n\n  // Get state priority.\n  const getStatePriority = (stateName) =>\n    STATE_PRIORITIES[stateName] || STATE_PRIORITIES.default;\n\n  // Get the group that a state belongs to.\n  const getStateGroup = (stateName) => {\n    return Object.entries(STATE_GROUPS).find(([_, states]) =>\n      states.includes(stateName),\n    )?.[0];\n  };\n\n  // Mix style for each state and apply it to element.\n  const applyState = (element) => {\n    const { [STATES]: states = [], [ORIGINAL]: original = {} } = element;\n\n    // Sort states by priority.\n    const sortedStates = [...states].sort(\n      (a, b) => getStatePriority(b) - getStatePriority(a),\n    );\n\n    // Create a Map to track the highest priority state for each style attribute.\n    const styleAttributeMap = new Map();\n\n    // Iterate through all states to find the highest priority state for each style attribute.\n    for (const state of sortedStates) {\n      // If style exists, use it directly, else use interaction style on element.\n      const stateStyles =\n        (style ?? element.__interactionStyle__)?.[state] || {};\n      for (const [key, value] of Object.entries(stateStyles)) {\n        if (!styleAttributeMap.has(key)) {\n          styleAttributeMap.set(key, value);\n        }\n      }\n    }\n\n    // Apply styles including original styles.\n    const finalStyle = { ...original };\n    for (const [key, value] of styleAttributeMap.entries()) {\n      finalStyle[key] = value;\n    }\n\n    if (Object.keys(finalStyle).length === 0) return;\n\n    // Apply final styles to the element.\n    for (const [key, value] of Object.entries(finalStyle)) {\n      const currentValue = getStyle(element, key);\n      const v = valueof(value, element);\n      setAttribute(element, key, v);\n      // Store the attribute if it does not exist in original.\n      if (!(key in original)) original[key] = currentValue;\n    }\n    element[ORIGINAL] = original;\n  };\n\n  const initState = (element) => {\n    if (element[STATES]) return;\n    element[STATES] = [];\n    return;\n  };\n\n  /**\n   * Update states and update element, handle conflict states automatically.\n   */\n  const updateState = (element, ...states) => {\n    initState(element);\n    const currentStates = element[STATES];\n\n    // Collect all new state groups.\n    const newStateGroups = new Set(\n      states\n        .map((state) => getStateGroup(state))\n        .filter((group) => group !== undefined),\n    );\n\n    // Exclude old states that are in the new state group.\n    const remainingStates = currentStates.filter(\n      (existingState) => !newStateGroups.has(getStateGroup(existingState)),\n    );\n\n    element[STATES] = [...remainingStates, ...states];\n    applyState(element);\n  };\n\n  /**\n   * Set the states and update element.\n   */\n  const setState = (element, ...states) => {\n    initState(element);\n    element[STATES] = [...states];\n    applyState(element);\n  };\n\n  /**\n   * Remove the states and update element.\n   */\n  const removeState = (element, ...states) => {\n    initState(element);\n    for (const state of states) {\n      const index = element[STATES].indexOf(state);\n      if (index !== -1) {\n        element[STATES].splice(index, 1);\n      }\n    }\n    applyState(element);\n  };\n\n  const hasState = (element, state) => {\n    initState(element);\n    return element[STATES].indexOf(state) !== -1;\n  };\n\n  return {\n    setState,\n    updateState,\n    removeState,\n    hasState,\n  };\n}\n\nfunction isEmptyObject(obj: any): boolean {\n  if (obj === undefined) return true;\n  if (typeof obj !== 'object') return false;\n  return Object.keys(obj).length === 0;\n}\n\n// A function to generate key for mark each view.\nfunction keyed(viewKey, markKey) {\n  return `${viewKey},${markKey}`;\n}\n\nexport function mergeState(options, states) {\n  // Index state by mark key and view key.\n  const views = Array.isArray(options) ? options : [options];\n  const markState = views.flatMap((view) =>\n    view.marks.map((mark) => [keyed(view.key, mark.key), mark.state]),\n  );\n\n  const state = {};\n  // Update each specified state.\n  for (const descriptor of states) {\n    const [key, defaults] = Array.isArray(descriptor)\n      ? descriptor\n      : [descriptor, {}];\n\n    // Update each specified mark state.\n    state[key] = markState.reduce((merged, mark) => {\n      // Normalize state.\n      const [markKey, markState = {}] = mark;\n      const selectedState = isEmptyObject(markState[key])\n        ? defaults\n        : markState[key];\n\n      // Update each state attribute.\n      for (const [attr, value] of Object.entries(selectedState)) {\n        const oldValue = merged[attr];\n        const newValue = (data, index, array, element) => {\n          const k = keyed(element.__data__.viewKey, element.__data__.markKey);\n          if (markKey !== k) return oldValue?.(data, index, array, element);\n          if (typeof value !== 'function') return value;\n          return value(data, index, array, element);\n        };\n        merged[attr] = newValue;\n      }\n      return merged;\n    }, {});\n  }\n  return state;\n}\n\n// @todo Support elements from different view.\nexport function createValueof(elements, datum) {\n  const elementIndex = new Map(elements.map((d, i) => [d, i]));\n  const fa = datum ? elements.map(datum) : elements;\n  return (d, e) => {\n    if (typeof d !== 'function') return d;\n    const i = elementIndex.get(e);\n    const fe = datum ? datum(e) : e;\n    return d(fe, i, fa, e);\n  };\n}\n\nexport function renderLink({\n  link = false,\n  valueof = (d, element) => d,\n  coordinate,\n  ...style\n}) {\n  const LINK_CLASS_NAME = 'element-link';\n\n  if (!link) return [() => {}, () => {}];\n\n  const pointsOf = (element) => element.__data__.points;\n\n  const pathPointsOf = (P0, P1) => {\n    const [, p1, p2] = P0;\n    const [p0, , , p3] = P1;\n    const P: Vector2[] = [p1, p0, p3, p2];\n    return P;\n  };\n\n  const append = (elements) => {\n    if (elements.length <= 1) return;\n\n    // Sort elements by normalized x to avoid cross.\n    const sortedElements = sort<G2Element>(elements, (e0, e1) => {\n      const { x: x0 } = e0.__data__;\n      const { x: x1 } = e1.__data__;\n      const dx = x0 - x1;\n      return dx;\n    });\n\n    for (let i = 1; i < sortedElements.length; i++) {\n      const p = d3Path();\n      const e0 = sortedElements[i - 1];\n      const e1 = sortedElements[i];\n      const [p0, p1, p2, p3] = pathPointsOf(pointsOf(e0), pointsOf(e1));\n      p.moveTo(...p0);\n      p.lineTo(...p1);\n      p.lineTo(...p2);\n      p.lineTo(...p3);\n      p.closePath();\n      const { fill = e0.getAttribute('fill'), ...rest } = mapObject(\n        style,\n        (d) => valueof(d, e0),\n      );\n      const link = new Path({\n        className: LINK_CLASS_NAME,\n        style: {\n          d: p.toString(),\n          fill,\n          zIndex: -2,\n          ...rest,\n        },\n      });\n      // @ts-ignore\n      e0.link?.remove();\n      e0.parentNode.appendChild(link);\n      // @ts-ignore\n      e0.link = link;\n    }\n  };\n\n  const remove = (element) => {\n    element.link?.remove();\n    element.link = null;\n  };\n\n  return [append, remove] as const;\n}\n\n// Apply translate to mock slice out.\nexport function offsetTransform(element, offset, coordinate) {\n  const append = (t) => {\n    const { transform } = element.style;\n    return transform ? `${transform} ${t}` : t;\n  };\n  if (isPolar(coordinate)) {\n    const { points } = element.__data__;\n    const [p0, p1] = isTranspose(coordinate) ? reorder(points) : points;\n    const center = coordinate.getCenter();\n    const v0 = sub(p0, center);\n    const v1 = sub(p1, center);\n    const a0 = angle(v0);\n    const da = angleBetween(v0, v1);\n    const amid = a0 + da / 2;\n    const dx = offset * Math.cos(amid);\n    const dy = offset * Math.sin(amid);\n    return append(`translate(${dx}, ${dy})`);\n  }\n  if (isTranspose(coordinate)) return append(`translate(${offset}, 0)`);\n  return append(`translate(0, ${-offset})`);\n}\n\nexport function renderBackground({\n  document,\n  background,\n  scale,\n  coordinate,\n  valueof,\n  ...rest\n}) {\n  const BACKGROUND_CLASS_NAME = 'element-background';\n\n  // Don't have background.\n  if (!background) return [() => {}, () => {}];\n\n  const extentOf = (scale, x, padding) => {\n    const ax = scale.invert(x);\n    const mid = x + scale.getBandWidth(ax) / 2;\n    const half = scale.getStep(ax) / 2;\n    const offset = half * padding;\n    return [mid - half + offset, mid + half - offset];\n  };\n\n  const sizeXOf = (element, padding) => {\n    const { x: scaleX } = scale;\n    if (!isOrdinalScale(scaleX)) return [0, 1];\n    const { __data__: data } = element;\n    const { x } = data;\n    const [e1, e2] = extentOf(scaleX, x, padding);\n    return [e1, e2];\n  };\n\n  const sizeYOf = (element, padding) => {\n    const { y: scaleY } = scale;\n    if (!isOrdinalScale(scaleY)) return [0, 1];\n    const { __data__: data } = element;\n    const { y } = data;\n    const [e1, e2] = extentOf(scaleY, y, padding);\n    return [e1, e2];\n  };\n\n  const bandShapeOf = (element, style) => {\n    const { padding } = style;\n    const [x1, x2] = sizeXOf(element, padding);\n    const [y1, y2] = sizeYOf(element, padding);\n    const points = [\n      [x1, y1],\n      [x2, y1],\n      [x2, y2],\n      [x1, y2],\n    ].map((d) => coordinate.map(d));\n    const { __data__: data } = element;\n    const { y: dy, y1: dy1 } = data;\n    return rect(document, points, { y: dy, y1: dy1 }, coordinate, style);\n  };\n\n  // Shape without ordinal style.\n  // Clone and scale it.\n  const cloneShapeOf = (element, style) => {\n    const {\n      transform = 'scale(1.2, 1.2)',\n      transformOrigin = 'center center',\n      stroke = '',\n      ...rest\n    } = style;\n    const finalStyle = { transform, transformOrigin, stroke, ...rest };\n    const shape = element.cloneNode(true);\n    for (const [key, value] of Object.entries(finalStyle)) {\n      shape.style[key] = value;\n    }\n    return shape;\n  };\n\n  const isOrdinalShape = () => {\n    const { x, y } = scale;\n    return [x, y].some(isOrdinalScale);\n  };\n\n  const append = (element) => {\n    if (element.background) element.background.remove();\n    const {\n      fill = '#CCD6EC',\n      fillOpacity = 0.3,\n      zIndex = -2,\n      padding = 0.001,\n      lineWidth = 0,\n      ...style\n    } = mapObject(rest, (d) => valueof(d, element));\n    const finalStyle = {\n      ...style,\n      fill,\n      fillOpacity,\n      zIndex,\n      padding,\n      lineWidth,\n    };\n    const shapeOf = isOrdinalShape() ? bandShapeOf : cloneShapeOf;\n    const shape = shapeOf(element, finalStyle);\n    shape.className = BACKGROUND_CLASS_NAME;\n    element.parentNode.parentNode.appendChild(shape);\n    element.background = shape;\n  };\n\n  const remove = (element) => {\n    element.background?.remove();\n    element.background = null;\n  };\n\n  const is = (element) => {\n    return element.className === BACKGROUND_CLASS_NAME;\n  };\n\n  return [append, remove, is] as const;\n}\n\nexport function setCursor(root, cursor) {\n  // @ts-ignore\n  const canvas = root.getRootNode().defaultView;\n  const dom = canvas.getContextService().getDomElement();\n  if (dom?.style) {\n    root.cursor = dom.style.cursor;\n    dom.style.cursor = cursor;\n  }\n}\n\nexport function restoreCursor(root) {\n  setCursor(root, root.cursor);\n}\n\nexport function selectElementByData(elements, data, datum) {\n  return elements.find((d) =>\n    Object.entries(data).every(([key, value]) => datum(d)[key] === value),\n  );\n}\n\nexport function getPointsR(point: number[], nextPoint: number[]) {\n  return Math.sqrt(\n    Math.pow(point[0] - nextPoint[0], 2) + Math.pow(point[1] - nextPoint[1], 2),\n  );\n}\n\n// Points create path.\nexport function getPointsPath(points: number[][], isClose = false) {\n  const path = filter(points, (d) => !!d).map((d, i) => {\n    return [i === 0 ? 'M' : 'L', ...d];\n  }) as PathArray;\n\n  if (isClose) {\n    path.push(['Z']);\n  }\n  return path;\n}\n\n// Get element.\nexport function getElements(plot) {\n  return plot.querySelectorAll('.element');\n}\n\n// Get Theta coordinate round path.\nexport function getThetaPath(\n  center: number[],\n  points: number[][],\n  isBig = 0,\n): PathArray {\n  const path = [['M', ...points[1]]];\n  const innerRadius = getPointsR(center, points[1]);\n  const outerRadius = getPointsR(center, points[0]);\n\n  if (innerRadius === 0) {\n    path.push(\n      ['L', ...points[3]],\n      ['A', outerRadius, outerRadius, 0, isBig, 1, ...points[0]],\n      ['Z'],\n    );\n  } else {\n    path.push(\n      ['A', innerRadius, innerRadius, 0, isBig, 0, ...points[2]],\n      ['L', ...points[3]],\n      ['A', outerRadius, outerRadius, 0, isBig, 1, ...points[0]],\n      ['Z'],\n    );\n  }\n  return path as PathArray;\n}\n\nexport function maybeRoot(node, rootOf) {\n  if (rootOf(node)) return node;\n  let root = node.parent;\n  while (root && !rootOf(root)) root = root.parent;\n  return root;\n}\n\nexport const VALID_FIND_BY_X_MARKS = ['interval', 'point', 'density'];\n/**\n * @description Create function that can find element by event.\n * @returns Element find function.\n */\nexport function createFindElementByEvent({\n  elementsof,\n  root,\n  coordinate,\n  scale,\n  validFindByXMarks = VALID_FIND_BY_X_MARKS,\n}) {\n  let elements = elementsof(root);\n  const getValidFindByXMarks = (d) => validFindByXMarks.includes(d.markType);\n  const hasValidFindByXMarks = elements.find(getValidFindByXMarks);\n\n  // Try to find element by x position.\n  if (hasValidFindByXMarks) {\n    elements = elements.filter(getValidFindByXMarks);\n\n    const scaleX = scale.x;\n    const scaleSeries = scale.series;\n    const bandWidth = scaleX?.getBandWidth?.() ?? 0;\n    const xof = scaleSeries\n      ? (d) => {\n          const seriesCount = Math.round(1 / (scaleSeries.valueBandWidth ?? 1));\n          return (\n            d.__data__.x +\n            (d.__data__.series ?? 0) * bandWidth +\n            bandWidth / (seriesCount * 2)\n          );\n        }\n      : (d) => d.__data__.x + bandWidth / 2;\n\n    // Sort for bisector search.\n    elements.sort((a, b) => xof(a) - xof(b));\n\n    return (event) => {\n      const mouse = mousePosition(root, event);\n      if (!mouse) return;\n      const [abstractX] = coordinate.invert(mouse);\n      const search = bisector(xof).center;\n      const i = search(elements, abstractX);\n      const target = elements[i];\n\n      return target;\n    };\n  }\n\n  // If there is no valid element find by x, just return the target element.\n  return (event) => {\n    const { target } = event;\n    return maybeRoot(target, (node) => {\n      if (!node.classList) return false;\n      return node.classList.includes('element');\n    });\n  };\n}\n\n/**\n * Calculate adaptive sensitivity multiplier (inversely proportional to range).\n *\n * - Smaller range  higher sensitivity\n * - Larger range  lower sensitivity\n *\n * @param range Current range (0-1)\n * @returns Sensitivity multiplier (0.1x ~ 100x)\n */\nexport function calculateSensitivityMultiplier(range: number): number {\n  // Base sensitivity factor (adjust this to tune overall responsiveness)\n  const BASE_FACTOR = 0.01;\n  const MIN_RANGE_FOR_SENSITIVITY = 0.0001;\n  const MIN_MULTIPLIER = 0.1;\n  const MAX_MULTIPLIER = 100;\n\n  // Simple inverse relationship with reasonable bounds\n  const multiplier = BASE_FACTOR / Math.max(range, MIN_RANGE_FOR_SENSITIVITY);\n\n  // Clamp to reasonable range: 0.1x to 100x\n  return Math.max(MIN_MULTIPLIER, Math.min(MAX_MULTIPLIER, multiplier));\n}\n\n/**\n * Check if a value is considered \"falsy\" for configuration purposes.\n * Returns true for false, null, or undefined values.\n * Uses type predicate for better type safety.\n *\n * @param value The value to check\n * @returns true if the value is falsy (false, null, undefined)\n */\nexport function isFalsyValue(\n  value: unknown,\n): value is false | null | undefined {\n  return value === false || value === null || value === undefined;\n}\n\n/**\n * Extract channel data with preserved X-Y relationships from all marks in a view.\n * Supports multi-mark scenarios, bin transforms, and array-encoded Y values.\n *\n * @param view The view object containing markState\n * @returns Object containing flattened values for backward compatibility and structured mark data\n */\nexport function extractChannelValues(view: G2ViewDescriptor): {\n  xChannelValues: unknown[];\n  yChannelValues: unknown[];\n  markDataPairs: Array<{\n    markKey: string;\n    channelData: { [key: string]: unknown[] };\n  }>;\n} {\n  const allXChannelValues: unknown[][] = [];\n  const allYChannelValues: unknown[][] = [];\n  const markDataPairs: Array<{\n    markKey: string;\n    channelData: { [key: string]: unknown[] };\n  }> = [];\n  const marks = view.markState;\n\n  if (marks) {\n    for (const [mark, state] of marks.entries()) {\n      if (state?.channels) {\n        const channelData: { [key: string]: any[] } = {};\n\n        // Process each channel for the current mark\n        for (const channel of state.channels) {\n          if (channel?.name === 'x' && channel.values?.length > 0) {\n            // Collect X values (supports bin transforms with multiple values)\n            let xValues: unknown[] = [];\n            for (const valueItem of channel.values) {\n              if (valueItem?.value) {\n                xValues = xValues.concat(valueItem.value);\n                allXChannelValues.push(valueItem.value);\n              }\n            }\n            channelData['x'] = xValues;\n          } else if (\n            channel &&\n            (channel.name === 'y' || channel.name.startsWith('y')) && // Support y, y1, y2, y3, etc.\n            channel.values?.length > 0\n          ) {\n            const channelName = channel.name;\n            const channelValues: unknown[] = [];\n\n            // Handle Y and Y1+ channels for multi-Y marks (e.g., area charts, candlestick charts)\n            for (const valueItem of channel.values) {\n              if (valueItem?.value) {\n                const values = valueItem.value;\n                // Preserve G2's internal structure for array-encoded data\n                // Area charts: [[low1,low2,low3], [high1,high2,high3]]\n                // Line charts: [[value1,value2,value3]]\n                channelValues.push(values);\n                if (channelName === 'y' || channelName === 'y1') {\n                  // For global domain calculation, flatten only for allYChannelValues\n                  if (Array.isArray(values)) {\n                    allYChannelValues.push(values.flat());\n                  } else {\n                    allYChannelValues.push([values]);\n                  }\n                }\n              }\n            }\n\n            // Store all Y-related channels\n            channelData[channelName] = channelValues;\n          }\n        }\n\n        // Store mark data with preserved X-Y relationships\n        const xValues = channelData['x'] || [];\n        const yValues = channelData['y'] || [];\n\n        if (xValues.length > 0 && yValues.length > 0) {\n          markDataPairs.push({\n            markKey: mark.key || `mark_${markDataPairs.length}`,\n            channelData,\n          });\n        }\n      }\n    }\n  }\n\n  return {\n    xChannelValues: allXChannelValues.flat(),\n    yChannelValues: allYChannelValues.flat(),\n    markDataPairs,\n  };\n}\n\n/**\n * Check if there are multiple independent axis for a given channel.\n * Multi-axis can be defined by:\n * 1. Explicit `independent: true` in scale configuration\n * 2. Different `scale.key` values for the same channel name\n *\n * @param channel1 - Channel name (x or y)\n * @param marks - Array of marks to check\n * @returns true if multiple independent axis exist\n */\nexport function hasIndependentXYScale(\n  channel1: string,\n  marks: readonly unknown[],\n): boolean {\n  const scaleKeys = new Set<string>();\n\n  for (const mark of marks) {\n    const { scale: markScale } = mark as Record<string, unknown>;\n    const channelScale = (markScale as Record<string, unknown>)?.[channel1] as\n      | Record<string, unknown>\n      | undefined;\n\n    if (!channelScale) continue;\n\n    // Early return if explicit independent flag is found\n    if (channelScale.independent) {\n      return true;\n    }\n\n    // Collect scale keys, treating undefined/missing key as 'default'\n    const key = (channelScale.key as string | undefined) || 'default';\n    scaleKeys.add(key);\n\n    // Early return if multiple different keys are detected\n    if (scaleKeys.size > 1) {\n      return true;\n    }\n  }\n\n  // No multiple axes detected\n  return false;\n}\n\n/**\n * Calculate multi-axis channel domains for slider filtering.\n * When independent scales are detected, generates separate domains for each axis (x1, y1, x2, y2, etc.)\n *\n * @param view The view object containing markState\n * @param initDomain Initial domain configuration\n * @param scaleX X scale instance\n * @param scaleY Y scale instance\n * @param independentInfo Pre-computed independent scale information\n * @returns Extended channelDomain object with multi-axis support\n */\nexport function calculateMultiAxisChannelDomains(\n  view: G2ViewDescriptor,\n  initDomain: Record<string, unknown>,\n  scaleX: { getOptions(): { domain: unknown } },\n  scaleY: { getOptions(): { domain: unknown } },\n  independentInfo?: IndependentScaleInfo,\n): Record<string, unknown[]> {\n  const channelDomain: Record<string, unknown[]> = {\n    x:\n      (initDomain.x as unknown[]) ||\n      (scaleX.getOptions().domain as unknown[]) ||\n      [],\n    y:\n      (initDomain.y as unknown[]) ||\n      (scaleY.getOptions().domain as unknown[]) ||\n      [],\n  };\n\n  // Use pre-computed info if available, otherwise calculate\n  const info = independentInfo || calculateAllIndependentScaleInfo(view);\n  const { hasIndependentX, hasIndependentY } = info;\n\n  if (hasIndependentX || hasIndependentY) {\n    let xIndex = 1;\n    let yIndex = 1;\n\n    // Iterate through marks to collect independent scale domains\n    for (const [mark, state] of view.markState.entries()) {\n      if (state?.channels) {\n        // Process independent X scales\n        if (hasIndependentX) {\n          const xChannel = state.channels.find((ch) => ch.name === 'x');\n          if (mark?.scale?.x?.independent) {\n            const xKey = `x${xIndex}`;\n            channelDomain[xKey] = xChannel.scale.domain;\n            xIndex++;\n          }\n        }\n\n        // Process independent Y scales\n        if (hasIndependentY) {\n          const yChannel = state.channels.find((ch) => ch.name === 'y');\n          if (mark?.scale?.y?.independent) {\n            const yKey = `y${yIndex}`;\n            channelDomain[yKey] = yChannel.scale.domain;\n            yIndex++;\n          }\n        }\n      }\n    }\n  }\n\n  return channelDomain;\n}\n\n/**\n * Independent scale information cache interface\n */\nexport interface IndependentScaleInfo {\n  hasIndependentX: boolean;\n  hasIndependentY: boolean;\n  marksWithSharedX: string[];\n  marksWithIndependentX: string[];\n  marksWithSharedY: string[];\n  marksWithIndependentY: string[];\n  markToXScaleMap: Map<string, string>;\n  markToYScaleMap: Map<string, string>;\n}\n\n/**\n * Calculate all independent scale information in one pass\n * This function performs a single traversal to compute all independent scale related information,\n * avoiding repeated calculations throughout the codebase.\n *\n * Multi-axis detection logic:\n * 1. Explicit independent: scale.y.independent = true\n * 2. Different scale keys: scale.y.key = 'left' vs scale.y.key = 'right'\n *\n * @param view The view object containing markState\n * @returns Complete independent scale information\n */\nexport function calculateAllIndependentScaleInfo(\n  view: G2ViewDescriptor,\n): IndependentScaleInfo {\n  const marks = Array.from(view.markState.keys());\n  const hasIndependentX = hasIndependentXYScale('x', marks);\n  const hasIndependentY = hasIndependentXYScale('y', marks);\n\n  const marksWithSharedX: string[] = [];\n  const marksWithIndependentX: string[] = [];\n  const marksWithSharedY: string[] = [];\n  const marksWithIndependentY: string[] = [];\n\n  const markToXScaleMap = new Map<string, string>();\n  const markToYScaleMap = new Map<string, string>();\n\n  // Track scale key assignments\n  const xScaleKeyMap = new Map<string, number>(); // key -> index\n  const yScaleKeyMap = new Map<string, number>(); // key -> index\n  let xIndex = 1;\n  let yIndex = 1;\n\n  // Single traversal to compute all classifications and mappings\n  for (const [mark] of view.markState.entries()) {\n    const markKey = mark.key;\n\n    // X axis processing\n    const xScaleKey = (mark?.scale?.x?.key as string) || 'x';\n    const hasExplicitIndependentX = !!mark?.scale?.x?.independent;\n\n    if (hasExplicitIndependentX || (hasIndependentX && xScaleKey !== 'x')) {\n      marksWithIndependentX.push(markKey);\n\n      // Assign scale name based on key\n      // Always use indexed names (x1, x2, ...) to avoid collision with shared 'x'\n      if (!xScaleKeyMap.has(xScaleKey)) {\n        xScaleKeyMap.set(xScaleKey, xIndex++);\n      }\n      const scaleIndex = xScaleKeyMap.get(xScaleKey);\n      markToXScaleMap.set(markKey, `x${scaleIndex}`);\n    } else {\n      marksWithSharedX.push(markKey);\n      markToXScaleMap.set(markKey, 'x');\n    }\n\n    // Y axis processing\n    const yScaleKey = (mark?.scale?.y?.key as string) || 'y';\n    const hasExplicitIndependentY = !!mark?.scale?.y?.independent;\n\n    if (hasExplicitIndependentY || (hasIndependentY && yScaleKey !== 'y')) {\n      marksWithIndependentY.push(markKey);\n\n      // Assign scale name based on key\n      // Always use indexed names (y1, y2, ...) to avoid collision with shared 'y'\n      if (!yScaleKeyMap.has(yScaleKey)) {\n        yScaleKeyMap.set(yScaleKey, yIndex++);\n      }\n      const scaleIndex = yScaleKeyMap.get(yScaleKey);\n      markToYScaleMap.set(markKey, `y${scaleIndex}`);\n    } else {\n      marksWithSharedY.push(markKey);\n      markToYScaleMap.set(markKey, 'y');\n    }\n  }\n\n  return {\n    hasIndependentX,\n    hasIndependentY,\n    marksWithSharedX,\n    marksWithIndependentX,\n    marksWithSharedY,\n    marksWithIndependentY,\n    markToXScaleMap,\n    markToYScaleMap,\n  };\n}\n", "import { DisplayObject } from '@antv/g';\nimport { deepMix, throttle } from '@antv/util';\nimport { Base } from '@antv/scale';\nimport { subObject } from '../utils/helper';\nimport { ANNOTATION_MARKS } from '../component/constant';\nimport { useState, setCursor, restoreCursor } from './utils';\n\nexport const CATEGORY_LEGEND_CLASS_NAME = 'legend-category';\nexport const CATEGORY_LEGEND_HTML_CLASS_NAME = 'legend-html-category';\n\nexport const CONTINUOUS_LEGEND_CLASS_NAME = 'legend-continuous';\n\nexport const LEGEND_ITEMS_CLASS_NAME = 'items-item';\n\nexport const LEGEND_MAKER_CLASS_NAME = 'legend-category-item-marker';\n\nexport const LEGEND_LABEL_CLASS_NAME = 'legend-category-item-label';\n\nexport const LEGEND_FOCUS_ICON_CLASS_NAME = 'legend-category-item-focus-group';\n\nexport function markerOf(item) {\n  return item.getElementsByClassName(LEGEND_MAKER_CLASS_NAME)[0];\n}\n\nexport function labelOf(item) {\n  return item.getElementsByClassName(LEGEND_LABEL_CLASS_NAME)[0];\n}\n\nexport function focusIconOf(item) {\n  return item.getElementsByClassName(LEGEND_FOCUS_ICON_CLASS_NAME)[0];\n}\n\nexport function itemsOf(root) {\n  return root.getElementsByClassName(LEGEND_ITEMS_CLASS_NAME);\n}\n\nexport function legendsOf(root) {\n  return root.getElementsByClassName(CATEGORY_LEGEND_CLASS_NAME);\n}\nexport function legendsHtmlOf(root) {\n  return root.getElementsByClassName(CATEGORY_LEGEND_HTML_CLASS_NAME);\n}\n\nexport function legendsContinuousOf(root) {\n  return root.getElementsByClassName(CONTINUOUS_LEGEND_CLASS_NAME);\n}\n\nexport function legendClearSetState(root, setState) {\n  const legends = [...legendsOf(root), ...legendsContinuousOf(root)];\n\n  legends.forEach((legend) => {\n    setState(legend, (v) => v);\n  });\n}\n\nexport function dataOf(root) {\n  // legend -> layout -> container\n  let parent = root.parentNode;\n  while (parent && !parent.__data__) {\n    parent = parent.parentNode;\n  }\n  return parent.__data__;\n}\n\nexport function attributesOf(root) {\n  let child = root;\n  while (child && !child.attr('class').startsWith('legend')) {\n    child = child.children[0];\n  }\n  return child.attributes;\n}\n\nfunction getScaleByMarkKey(\n  scale: Record<string, Base<any>>,\n  markKey: string,\n  channelName: string,\n) {\n  const seriesKey = Object.keys(scale).find((channel) => {\n    if (channel.startsWith(channelName)) {\n      const options = scale[channel].getOptions();\n      return options.name === channelName && options.markKey === markKey;\n    }\n  });\n\n  return scale[seriesKey] ?? scale[channelName];\n}\n\nfunction legendFilterOrdinal(\n  root: DisplayObject,\n  {\n    legends, // given the root of chart returns legends to be manipulated\n    marker: markerOf, // given the legend returns the marker\n    label: labelOf, // given the legend returns the label\n    datum, // given the legend returns the value\n    filter, // invoke when dispatch filter event,\n    defaultSelect,\n    emitter,\n    channel,\n    state = {} as Record<string, any>, // state options\n  },\n) {\n  // Index handler by item.\n  const itemClick = new Map();\n  const itemPointerenter = new Map();\n  const itemPointerout = new Map();\n  const focusIconClick = new Map();\n\n  const {\n    unselected = {\n      markerStroke: '#aaa',\n      markerFill: '#aaa',\n      labelFill: '#aaa',\n    },\n  } = state;\n  const markerStyle = { unselected: subObject(unselected, 'marker') };\n  const labelStyle = { unselected: subObject(unselected, 'label') };\n  const { setState: setM, removeState: removeM } = useState(\n    markerStyle,\n    undefined,\n  );\n  const { setState: setL, removeState: removeL } = useState(\n    labelStyle,\n    undefined,\n  );\n\n  const items: DisplayObject[] = Array.from(legends(root));\n  let selectedValues = items.map(datum);\n  const updateLegendState = () => {\n    for (const item of items) {\n      const value = datum(item);\n      const marker = markerOf(item);\n      const label = labelOf(item);\n      if (!selectedValues.includes(value)) {\n        setM(marker, 'unselected');\n        setL(label, 'unselected');\n      } else {\n        removeM(marker, 'unselected');\n        removeL(label, 'unselected');\n      }\n    }\n  };\n\n  for (const item of items) {\n    // Defined handlers.\n    const pointerenter = () => {\n      setCursor(root, 'pointer');\n    };\n\n    const pointerout = () => {\n      restoreCursor(root);\n    };\n\n    const click = async (event) => {\n      const value = datum(item);\n      const index = selectedValues.indexOf(value);\n      if (index === -1) selectedValues.push(value);\n      else selectedValues.splice(index, 1);\n      await filter(selectedValues);\n      updateLegendState();\n\n      const { nativeEvent = true } = event;\n      if (!nativeEvent) return;\n      if (selectedValues.length === items.length) {\n        emitter.emit('legend:reset', { nativeEvent });\n      } else {\n        // Emit events.\n        emitter.emit('legend:filter', {\n          ...event,\n          nativeEvent,\n          data: {\n            channel,\n            values: selectedValues,\n          },\n        });\n      }\n    };\n\n    // Bind and store handlers.\n    item.addEventListener('click', click);\n    item.addEventListener('pointerenter', pointerenter);\n    item.addEventListener('pointerout', pointerout);\n    itemClick.set(item, click);\n    itemPointerenter.set(item, pointerenter);\n    itemPointerout.set(item, pointerout);\n\n    const focusIcon = focusIconOf(item);\n    if (focusIcon) {\n      const focusClick = async (event) => {\n        event.stopPropagation();\n        const value = datum(item);\n        const index = selectedValues.indexOf(value);\n        const { nativeEvent = true } = event;\n\n        if (index !== -1 && selectedValues.length === 1) {\n          if (!nativeEvent) return;\n          // If the item is already focused, reset to show all items.\n          selectedValues = items.map(datum);\n          await filter(selectedValues);\n          updateLegendState();\n          emitter.emit('legend:reset', { nativeEvent });\n        } else {\n          // Otherwise, focus on the clicked item.\n          selectedValues = [value];\n          await filter(selectedValues);\n          updateLegendState();\n\n          if (!nativeEvent) return;\n          emitter.emit('legend:focus', {\n            ...event,\n            nativeEvent,\n            data: {\n              channel,\n              value,\n            },\n          });\n        }\n      };\n\n      // Bind focus icon handlers.\n      focusIcon.addEventListener('click', focusClick);\n      focusIconClick.set(item, focusClick);\n    }\n  }\n\n  const onFocus = async (event) => {\n    const { nativeEvent } = event;\n    if (nativeEvent) return;\n\n    const { data } = event;\n    const { channel: specifiedChannel, value } = data;\n    if (specifiedChannel !== channel) return;\n\n    selectedValues = [value];\n\n    await filter(selectedValues);\n    updateLegendState();\n  };\n\n  const onFilter = async (event) => {\n    const { nativeEvent } = event;\n    if (nativeEvent) return;\n    const { data } = event;\n    const { channel: specifiedChannel, values } = data;\n    if (specifiedChannel !== channel) return;\n    selectedValues = values;\n    await filter(selectedValues);\n    updateLegendState();\n  };\n\n  const onEnd = async (event) => {\n    const { nativeEvent } = event;\n    if (nativeEvent) return;\n    selectedValues = items.map(datum);\n    await filter(selectedValues);\n    updateLegendState();\n  };\n\n  emitter.on('legend:filter', onFilter);\n  emitter.on('legend:focus', onFocus);\n  emitter.on('legend:reset', onEnd);\n\n  if (defaultSelect) {\n    emitter.emit('legend:filter', {\n      data: { channel, values: defaultSelect },\n    });\n  }\n\n  return () => {\n    for (const item of items) {\n      item.removeEventListener('click', itemClick.get(item));\n      item.removeEventListener('pointerenter', itemPointerenter.get(item));\n      item.removeEventListener('pointerout', itemPointerout.get(item));\n      const focusIcon = focusIconOf(item);\n      if (focusIcon) {\n        focusIcon.removeEventListener('click', focusIconClick.get(item));\n      }\n    }\n    emitter.off('legend:focus', onFocus);\n    emitter.off('legend:filter', onFilter);\n    emitter.off('legend:reset', onEnd);\n  };\n}\n\nfunction legendFilterOrdinalHtml(\n  root: DisplayObject,\n  { domain, filter, defaultSelect, emitter, channel },\n) {\n  // HTML DOM event handlers.\n  const htmlItemClick = new Map();\n  const htmlItemPointerenter = new Map();\n  const htmlItemPointerout = new Map();\n\n  let selectedValues = [...domain];\n\n  // Helper function to get chart container element.\n  const getChartContainer = () => {\n    // Use the same approach as tooltip.ts to get container.\n    const view = root.ownerDocument?.defaultView;\n    if (!view) return document.body;\n\n    const canvas: any = view.getContextService().getDomElement();\n    return (canvas.parentElement as unknown as HTMLElement) || document.body;\n  };\n\n  // Helper function to bind HTML DOM events.\n  const bindHtmlDomEvents = () => {\n    const chartContainer = getChartContainer();\n\n    // Find HTML legend containers within this chart's container.\n    const htmlContainer = chartContainer.querySelector('.legend-html');\n\n    const htmlClick = async (event) => {\n      // Find the element with legend-value attribute by traversing up from the target.\n      let targetElement = event.target as Element;\n      while (targetElement && !targetElement.hasAttribute('legend-value')) {\n        targetElement = targetElement.parentElement;\n        if (targetElement === htmlContainer) break; // Stop if we reach the container.\n      }\n\n      if (!targetElement || !targetElement.hasAttribute('legend-value')) return;\n\n      event.preventDefault();\n      event.stopPropagation();\n\n      const value = targetElement.getAttribute('legend-value');\n      if (!value) return;\n\n      const index = selectedValues.indexOf(value);\n      if (index === -1) selectedValues.push(value);\n      else selectedValues.splice(index, 1);\n\n      await filter(selectedValues);\n      updateHtmlLegendState();\n\n      if (selectedValues.length === domain.length) {\n        emitter.emit('legend:reset', { nativeEvent: true });\n      } else {\n        emitter.emit('legend:filter', {\n          nativeEvent: true,\n          data: {\n            channel,\n            values: selectedValues,\n          },\n        });\n      }\n    };\n\n    // Bind HTML DOM events to the container using event delegation.\n    htmlContainer.addEventListener('click', htmlClick);\n\n    // Store handlers for cleanup.\n    htmlItemClick.set(htmlContainer, htmlClick);\n  };\n\n  // Helper function to update HTML legend visual state.\n  const updateHtmlLegendState = () => {\n    const chartContainer = getChartContainer();\n    const htmlLegendItems = chartContainer.querySelectorAll('[legend-value]');\n\n    htmlLegendItems.forEach((htmlItem) => {\n      const value = htmlItem.getAttribute('legend-value');\n      if (!value) return;\n\n      // Check if this value exists in the domain (belongs to this chart instance).\n      if (!domain.includes(value)) return;\n\n      const isSelected = selectedValues.includes(value);\n      const htmlElement = htmlItem as HTMLElement;\n\n      if (!isSelected) {\n        // Apply unselected style.\n        // User can override style via CSS.\n        htmlElement.style.opacity = '0.4';\n        htmlElement.classList.add('legend-item-inactive');\n      } else {\n        // Apply selected style.\n        htmlElement.style.opacity = '1';\n        htmlElement.classList.remove('legend-item-inactive');\n      }\n    });\n  };\n\n  // Bind HTML DOM events.\n  bindHtmlDomEvents();\n\n  const onFocus = async (event) => {\n    const { nativeEvent } = event;\n    if (nativeEvent) return;\n\n    const { data } = event;\n    const { channel: specifiedChannel, value } = data;\n    if (specifiedChannel !== channel) return;\n\n    selectedValues = [value];\n\n    await filter(selectedValues);\n    updateHtmlLegendState();\n  };\n\n  const onFilter = async (event) => {\n    const { nativeEvent } = event;\n    if (nativeEvent) return;\n    const { data } = event;\n    const { channel: specifiedChannel, values } = data;\n    if (specifiedChannel !== channel) return;\n    selectedValues = values;\n    await filter(selectedValues);\n    updateHtmlLegendState();\n  };\n\n  const onEnd = async (event) => {\n    const { nativeEvent } = event;\n    if (nativeEvent) return;\n    selectedValues = [...domain];\n    await filter(selectedValues);\n    updateHtmlLegendState();\n  };\n\n  emitter.on('legend:filter', onFilter);\n  emitter.on('legend:focus', onFocus);\n  emitter.on('legend:reset', onEnd);\n\n  if (defaultSelect) {\n    emitter.emit('legend:filter', {\n      data: { channel, values: defaultSelect },\n    });\n  }\n\n  return () => {\n    // Clean up HTML DOM event listeners.\n    const chartContainer = getChartContainer();\n    const htmlLegendItems = chartContainer.querySelectorAll('[legend-value]');\n\n    htmlLegendItems.forEach((htmlItem) => {\n      const value = htmlItem.getAttribute('legend-value');\n      if (!value) return;\n\n      // Only clean up items that belong to this chart instance.\n      if (!domain.includes(value)) return;\n\n      const clickHandler = htmlItemClick.get(htmlItem);\n      const pointerenterHandler = htmlItemPointerenter.get(htmlItem);\n      const pointeroutHandler = htmlItemPointerout.get(htmlItem);\n\n      if (clickHandler) {\n        htmlItem.removeEventListener('click', clickHandler);\n      }\n      if (pointerenterHandler) {\n        htmlItem.removeEventListener('pointerenter', pointerenterHandler);\n      }\n      if (pointeroutHandler) {\n        htmlItem.removeEventListener('pointerout', pointeroutHandler);\n      }\n    });\n\n    // Clear HTML DOM handler maps.\n    htmlItemClick.clear();\n    htmlItemPointerenter.clear();\n    htmlItemPointerout.clear();\n\n    // Clean up emitter listeners.\n    emitter.off('legend:filter', onFilter);\n    emitter.off('legend:focus', onFocus);\n    emitter.off('legend:reset', onEnd);\n  };\n}\n\nfunction legendFilterContinuous(_, { legend, filter, emitter, channel }) {\n  const { attributes } = legend;\n  const onValueChange = (data) => {\n    const { value } = data.detail;\n    const domainValue = value.map((d) => {\n      const matchRealValue = attributes.data?.find((item) => item.value === d);\n      // For threshold/quantile scale, use domain value instead of threshold index.\n      if (matchRealValue) return matchRealValue.domainValue ?? d;\n\n      return d;\n    });\n\n    filter(domainValue);\n    emitter.emit({\n      nativeEvent: true,\n      data: {\n        channel,\n        values: domainValue,\n      },\n    });\n  };\n  legend.addEventListener('valuechange', onValueChange);\n  return () => {\n    legend.removeEventListener('valuechange', onValueChange);\n  };\n}\n\nasync function filterView(\n  context, // View instance,\n  {\n    legend, // Legend instance.\n    channel, // Filter Channel.\n    value, // Filtered Values.\n    ordinal, // Data type of the legend.\n    channels, // Channels for this legend.\n    allChannels, // Channels for all legends.\n    facet = false, // For facet.\n  },\n) {\n  const { view, update, setState } = context;\n  setState(legend, (viewOptions) => {\n    const { marks } = viewOptions;\n    // Add filter transform for every marks,\n    // which will skip for mark without color channel.\n\n    const channelScale = legend.attributes?.scales?.find(\n      (s) => s.name === channel,\n    );\n    const newMarks = marks.map((mark) => {\n      // Only filter marks with the same scale key.\n      if (\n        // if key is not defined, use default channel name.\n        (mark.scale[channel].key ?? channel) !==\n        (channelScale?.key ?? channelScale?.name)\n      )\n        return mark;\n\n      if (mark.type === 'legends') return mark;\n      // Skip Annotation marks.\n      if (ANNOTATION_MARKS.includes(mark.type)) return mark;\n\n      // Inset after aggregate transform, such as group, and bin.\n      const { transform = [], data = [] } = mark;\n      const index = transform.findIndex(\n        ({ type }) => type.startsWith('group') || type.startsWith('bin'),\n      );\n      const newTransform = [...transform];\n      if (data.length) {\n        newTransform.splice(index + 1, 0, {\n          type: 'filter',\n          [channel]: {\n            value,\n            ordinal,\n          },\n        });\n      }\n\n      // Set domain of scale to preserve encoding.\n      const newScale = Object.fromEntries(\n        channels.map((channel) => {\n          const matchScale = getScaleByMarkKey(\n            view.scale,\n            viewOptions.key,\n            channel,\n          );\n\n          return [channel, { domain: matchScale.getOptions().domain }];\n        }),\n      );\n      return deepMix({}, mark, {\n        transform: newTransform,\n        scale: newScale,\n        ...(!ordinal && { animate: false }),\n        legend: facet\n          ? false\n          : Object.fromEntries(allChannels.map((d) => [d, { preserve: true }])),\n      });\n    });\n    return { ...viewOptions, marks: newMarks };\n  });\n  await update();\n}\n\nfunction filterFacets(facets, options) {\n  for (const facet of facets) {\n    filterView(facet, { ...options, facet: true });\n  }\n}\n\nexport function LegendFilter() {\n  return (context, contexts, emitter) => {\n    const { container } = context;\n    const facets = contexts.filter((d) => d !== context);\n    const isFacet = facets.length > 0;\n\n    const channelsOf = (legend) => {\n      return dataOf(legend).scales.map((d) => d.name);\n    };\n    const legends = [\n      ...legendsOf(container),\n      ...legendsHtmlOf(container),\n      ...legendsContinuousOf(container),\n    ];\n    const allChannels = legends.flatMap(channelsOf);\n\n    const filter = isFacet\n      ? throttle(filterFacets, 50, { trailing: true })\n      : throttle(filterView, 50, { trailing: true });\n\n    const removes = legends.map((legend) => {\n      const { name: channel, domain } = dataOf(legend).scales[0];\n      const channels = channelsOf(legend);\n      const common = {\n        legend,\n        channel,\n        channels,\n        allChannels,\n      };\n\n      if (legend.className === CATEGORY_LEGEND_CLASS_NAME) {\n        return legendFilterOrdinal(legend, {\n          legends: itemsOf,\n          marker: markerOf,\n          label: labelOf,\n          datum: (d) => {\n            const { __data__: datum } = d;\n            const { index } = datum;\n            return domain[index];\n          },\n          filter: (value) => {\n            const options = { ...common, value, ordinal: true };\n            if (isFacet) filter(facets, options);\n            else filter(context, options);\n          },\n          state: legend.attributes.state,\n          defaultSelect: legend.attributes.defaultSelect,\n          channel,\n          emitter,\n        });\n      } else if (legend.className === CATEGORY_LEGEND_HTML_CLASS_NAME) {\n        return legendFilterOrdinalHtml(container, {\n          domain,\n          filter: (value) => {\n            const options = { ...common, value, ordinal: true };\n            if (isFacet) filter(facets, options);\n            else filter(context, options);\n          },\n          defaultSelect: legend.attributes.defaultSelect,\n          channel,\n          emitter,\n        });\n      } else {\n        return legendFilterContinuous(container, {\n          legend,\n          filter: (value) => {\n            const options = { ...common, value, ordinal: false };\n            if (isFacet) filter(facets, options);\n            else filter(context, options);\n          },\n          emitter,\n          channel,\n        });\n      }\n    });\n    return () => {\n      removes.forEach((remove) => remove());\n    };\n  };\n}\n", "import type { DisplayObject } from '@antv/g';\nimport { HTML } from '@antv/g';\nimport { Category } from '@antv/component';\nimport { last } from '@antv/util';\nimport { format } from '@antv/vendor/d3-format';\nimport { Identity } from '@antv/scale';\nimport type {\n  FlexLayout,\n  G2MarkState,\n  GuideComponentComponent as GCC,\n  GuideComponentOrientation as GCO,\n  GuideComponentPosition as GCP,\n  Scale,\n} from '../runtime';\nimport { GuideComponentContext } from '../runtime/types/component';\nimport type { G2Mark } from '../runtime/types/options';\nimport { useMarker } from '../utils/marker';\nimport { CATEGORY_LEGEND_HTML_CLASS_NAME } from '../interaction/legendFilter';\nimport {\n  adaptor,\n  domainOf,\n  LegendCategoryLayout,\n  inferComponentLayout,\n  inferComponentShape,\n  scaleOf,\n  titleContent,\n} from './utils';\nimport { G2_CLASS_PREFIX } from './constant';\n\nexport type LegendCategoryOptions = {\n  dx?: number;\n  dy?: number;\n  labelFormatter?: (d: any) => string;\n  layout?: FlexLayout;\n  orientation?: GCO;\n  position?: GCP;\n  title?: string | string[];\n  [key: string]: any;\n};\n\nfunction inferShape(scales: Scale[], markState: Map<G2Mark, G2MarkState>) {\n  const shapeScale = scaleOf(scales, 'shape');\n  const colorScale = scaleOf(scales, 'color');\n\n  // NOTE!!!\n  // scaleOrdinal.map will mute domain.\n  const shapeScale1 = shapeScale ? shapeScale.clone() : null;\n\n  // Infer the main shape if multiple marks are used.\n  const shapes: [string, string[]][] = [];\n  for (const [mark, state] of markState) {\n    const namespace = mark.type;\n    const domain =\n      colorScale?.getOptions().domain.length > 0\n        ? colorScale?.getOptions().domain\n        : state.data;\n    const shape: string[] = domain.map((d, i) => {\n      if (shapeScale1) return shapeScale1.map(d || 'point');\n      return mark?.style?.shape || state.defaultShape || 'point';\n    });\n    if (typeof namespace === 'string') shapes.push([namespace, shape]);\n  }\n\n  if (shapes.length === 0) return ['point', ['point']];\n  if (shapes.length === 1) return shapes[0];\n  if (!shapeScale) return shapes[0];\n  // Evaluate the maximum likelihood of shape\n  const { range } = shapeScale.getOptions();\n  return shapes\n    .map(([namespace, shape]) => {\n      let sum = 0;\n      for (let i = 0; i < shapes.length; i++) {\n        const targetShape = range[i % range.length];\n        if (shape[i] === targetShape) sum++;\n      }\n      return [sum / shape.length, [namespace, shape]] as const;\n    })\n    .sort((a, b) => b[0] - a[0])[0][1];\n}\n\nfunction inferItemMarker(\n  options,\n  context: GuideComponentContext,\n): ((datum: any, i: number, data: any) => () => DisplayObject) | undefined {\n  const { scales, library, markState } = context;\n  const [mark, shapes] = inferShape(scales, markState);\n  const { itemMarker, itemMarkerSize: size } = options;\n\n  const create = (name, d) => {\n    const marker =\n      (library[`mark.${mark}`]?.props?.shape[name]?.props\n        .defaultMarker as string) || last(name.split('.'));\n    const radius = typeof size === 'function' ? size(d) : size;\n    return () => useMarker(marker, { color: d.color })(0, 0, radius);\n  };\n\n  const shapeOf = (i) => `${shapes[i]}`;\n\n  const shapeScale = scaleOf(scales, 'shape');\n  if (shapeScale && !itemMarker) return (d, i) => create(shapeOf(i), d);\n  if (typeof itemMarker === 'function') {\n    return (d, i) => {\n      // @todo Fix this in GUI.\n      // It should pass primitive value rather object.\n      const node = itemMarker(d.id, i);\n      if (typeof node === 'string') return create(node, d);\n      return node;\n    };\n  }\n  return (d, i) => create(itemMarker || shapeOf(i), d);\n}\n\nfunction inferItemMarkerOpacity(scales: Scale[]) {\n  const scale = scaleOf(scales, 'opacity');\n  if (scale) {\n    const { range } = scale.getOptions();\n    return (d, i) => range[i];\n  }\n  return undefined;\n}\n\nfunction inferItemMarkerSize(scales: Scale[], defaults: number) {\n  const scale = scaleOf(scales, 'size');\n  if (scale instanceof Identity) return scale.map(NaN) * 2;\n  return defaults;\n}\n\nfunction inferItemMarkerLineWidth(options, context: GuideComponentContext) {\n  const { scales, markState } = context;\n  const [mark, shapes] = inferShape(scales, markState);\n  const { itemMarker, itemMarkerLineWidth } = options;\n\n  // If user explicitly set itemMarkerLineWidth, use it\n  if (itemMarkerLineWidth !== undefined) {\n    return itemMarkerLineWidth;\n  }\n\n  // Define line-based shapes that should have thicker line width\n  const lineShapes = [\n    'line',\n    'hyphen',\n    'dash',\n    'smooth',\n    'hv',\n    'hvh',\n    'vh',\n    'vhv',\n  ];\n\n  // If itemMarker is explicitly set to a line shape\n  if (typeof itemMarker === 'string' && lineShapes.includes(itemMarker)) {\n    return 4;\n  }\n\n  // If itemMarker is a function, we need to return a function that checks each shape\n  if (typeof itemMarker === 'function') {\n    return (d, i) => {\n      const markerShape = itemMarker(d.id, i);\n      if (typeof markerShape === 'string' && lineShapes.includes(markerShape)) {\n        return 4;\n      }\n      return undefined;\n    };\n  }\n\n  // Check if any of the inferred shapes are line-based\n  const shapesArray = Array.isArray(shapes) ? shapes : [shapes];\n  const hasLineShape = shapesArray.some((shape) => lineShapes.includes(shape));\n  if (hasLineShape) {\n    return 4;\n  }\n\n  return undefined;\n}\n\nfunction inferCategoryStyle(options, context: GuideComponentContext) {\n  const { labelFormatter = (d) => `${d}` } = options;\n  const { scales, theme } = context;\n  const defaultSize = theme.legendCategory.itemMarkerSize;\n  const itemMarkerSize = inferItemMarkerSize(scales, defaultSize);\n  const baseStyle = {\n    itemMarker: inferItemMarker({ ...options, itemMarkerSize }, context),\n    itemMarkerSize: itemMarkerSize,\n    itemMarkerOpacity: inferItemMarkerOpacity(scales),\n    itemMarkerLineWidth: inferItemMarkerLineWidth(options, context),\n  };\n\n  const finalLabelFormatter =\n    typeof labelFormatter === 'string'\n      ? format(labelFormatter)\n      : labelFormatter;\n\n  const colorScale = scaleOf(scales, 'color');\n  const domain = domainOf(scales);\n  const colorOf = colorScale\n    ? (d) => colorScale.map(d)\n    : () => context.theme.color;\n\n  return {\n    ...baseStyle,\n    data: domain.map((d) => ({\n      id: d,\n      label: finalLabelFormatter(d),\n      color: colorOf(d),\n    })),\n  };\n}\n\nfunction inferLegendShape(\n  value: Record<string, any>,\n  options: LegendCategoryOptions,\n  component: GCC,\n) {\n  const { position } = options;\n  if (position === 'center') {\n    const { bbox } = value;\n    // to be confirm: if position is center, we should use the width and height of user definition.\n    const { width, height } = bbox;\n    return { width, height };\n  }\n  const { width, height } = inferComponentShape(value, options, component);\n  return { width, height };\n}\n\nfunction filterEmptyIds(legendStyle) {\n  return {\n    ...legendStyle,\n    data: legendStyle?.data.filter((item) => item.id !== '') || [],\n  };\n}\n\n/**\n * Guide Component for ordinal color scale.\n */\nexport const LegendCategory: GCC<LegendCategoryOptions> = (options) => {\n  const {\n    labelFormatter,\n    layout,\n    order,\n    orientation,\n    position,\n    size,\n    title,\n    cols,\n    itemMarker,\n    render,\n    ...style\n  } = options;\n\n  const { gridRow } = style;\n\n  return (context) => {\n    const { value, theme } = context;\n    const { bbox } = value;\n    const { width, height } = inferLegendShape(value, options, LegendCategory);\n\n    const finalLayout = inferComponentLayout(position, layout);\n\n    const legendStyle = {\n      orientation: ['right', 'left', 'center'].includes(position)\n        ? 'vertical'\n        : 'horizontal',\n      width,\n      height,\n      layout: cols !== undefined ? 'grid' : 'flex',\n      ...(cols !== undefined && { gridCol: cols }),\n      ...(gridRow !== undefined && { gridRow }),\n      titleText: titleContent(title),\n      ...inferCategoryStyle(options, context),\n    };\n\n    const { legendCategory: legendTheme = {} } = theme;\n\n    // Filter out the data items with empty string IDs in the wordCloud's data before generating the legend.\n    const categoryStyle = adaptor(\n      Object.assign({}, legendTheme, filterEmptyIds(legendStyle), style, {\n        classNamePrefix: G2_CLASS_PREFIX,\n      }),\n    );\n\n    // If render is provided, use HTML to render.\n    if (render) {\n      return new Category({\n        className: CATEGORY_LEGEND_HTML_CLASS_NAME,\n        style: { ...categoryStyle, x: bbox.x, y: bbox.y, render },\n      });\n    }\n\n    const layoutWrapper = new LegendCategoryLayout({\n      style: {\n        x: bbox.x,\n        y: bbox.y,\n        width: bbox.width,\n        height: bbox.height,\n        ...finalLayout,\n        // @ts-ignore\n        subOptions: categoryStyle,\n      },\n    });\n\n    layoutWrapper.appendChild(\n      new Category({\n        className: 'legend-category',\n        style: categoryStyle,\n      }),\n    );\n\n    return layoutWrapper as unknown as DisplayObject;\n  };\n};\n\nLegendCategory.props = {\n  defaultPosition: 'top',\n  defaultOrder: 1,\n  defaultSize: 40,\n  defaultCrossPadding: [12, 12],\n  defaultPadding: [12, 12],\n};\n", "import { DisplayObject, parseColor } from '@antv/g';\nimport { Continuous } from '@antv/component';\nimport { Constant, Quantile, Quantize, Threshold } from '@antv/scale';\nimport { format } from '@antv/vendor/d3-format';\nimport type {\n  FlexLayout,\n  G2Theme,\n  GuideComponentComponent as GCC,\n  GuideComponentOrientation as GCO,\n  GuideComponentPosition as GCP,\n  Scale,\n} from '../runtime';\nimport { lastOf } from '../utils/array';\nimport {\n  G2Layout,\n  adaptor,\n  inferComponentLayout,\n  inferComponentShape,\n  isHorizontal,\n  scaleOf,\n  titleContent,\n} from './utils';\nimport { G2_CLASS_PREFIX } from './constant';\n\nexport type LegendContinuousOptions = {\n  layout?: FlexLayout;\n  position?: GCP;\n  title?: string | string[];\n  [key: string]: any;\n};\n\ntype Shape = {\n  orientation: string;\n  width: number;\n  height: number;\n  length: number;\n  size: number;\n};\n\ntype Config = {\n  orientation: string;\n  width: number;\n  height: number;\n  color: string[];\n  data: any[];\n  labelFilter?: (datum: any, index: number) => boolean;\n  domain?: [number, number];\n};\n\nfunction updateShapeDimensions(\n  shape: Shape,\n  finalSize: number,\n  orientation: Exclude<GCO, number>,\n): Shape {\n  shape.size = finalSize;\n  if (isHorizontal(orientation)) {\n    shape.height = finalSize;\n  } else {\n    shape.width = finalSize;\n  }\n  return shape;\n}\n\nfunction inferContinuousShape(\n  value: Record<string, any>,\n  options: LegendContinuousOptions,\n  component: GCC,\n): Shape {\n  const { size } = options;\n  const shape = inferComponentShape(value, options, component);\n  return updateShapeDimensions(shape, size, shape.orientation);\n}\n\nfunction getFormatter(max: number) {\n  return (value: number) => ({\n    value: value / max,\n    label: String(value),\n    // Reference of input original domain value.\n    domainValue: value,\n  });\n}\n\nfunction getQuantizeOrQuantileConfig(\n  shape: Shape,\n  colorScale: Threshold,\n  min: number,\n  max: number,\n  range: string[],\n): Config {\n  const thresholds = (colorScale as any).thresholds as number[];\n  const formatter = getFormatter(max);\n  return {\n    ...shape,\n    color: range,\n    data: [min, ...thresholds, max].map(formatter),\n  };\n}\n\nfunction getThresholdConfig(\n  shape: Shape,\n  colorScale: Threshold,\n  range: string[],\n): Config {\n  const thresholds = (colorScale as any).thresholds as number[];\n  const data = [-Infinity, ...thresholds, Infinity].map((value, index) => ({\n    value: index,\n    // Reference of input original domain value.\n    domainValue: value,\n    label: value,\n  }));\n  return {\n    ...shape,\n    data,\n    color: range,\n    labelFilter: (datum, index) => {\n      return index > 0 && index < data.length - 1;\n    },\n  };\n}\n\nfunction rangeOf(scale: Scale) {\n  const { domain } = scale.getOptions();\n  const [min, max] = [domain[0], lastOf(domain)];\n  return [min, max];\n}\n\n/**\n * if color scale is not defined, create a constant color scale based on default color\n * @param scale\n * @param theme\n */\nfunction createColorScale(scale: Scale, defaultColor: string): Scale {\n  const options = scale.getOptions();\n  const newScale = scale.clone();\n  newScale.update({ ...options, range: [parseColor(defaultColor).toString()] });\n  return newScale;\n}\n\nfunction getLinearConfig(\n  shape: Shape,\n  colorScale: Scale,\n  sizeScale: Scale,\n  opacityScale: Scale,\n  scales: Record<string, any>,\n  theme: G2Theme,\n): Config {\n  const { length } = shape;\n  const definedScale = sizeScale || opacityScale;\n\n  // Only use defaultColor when there is no color scale\n  // in this view.\n  const defaultColor = scales.color\n    ? theme.legendContinuous.ribbonFill || 'black'\n    : theme.color;\n\n  const scale = colorScale || createColorScale(definedScale, defaultColor);\n  const [min, max] = rangeOf(scale);\n  const [domainMin, domainMax] = rangeOf(\n    [colorScale, sizeScale, opacityScale]\n      .filter((d) => d !== undefined)\n      .find((d) => !(d instanceof Constant)),\n  );\n  return {\n    ...shape,\n    domain: [domainMin, domainMax],\n    data: scale.getTicks().map((value) => ({ value })),\n    color: new Array(Math.floor(length)).fill(0).map((d, i) => {\n      const value = ((max - min) / (length - 1)) * i + min;\n      const color = scale.map(value) || defaultColor;\n      const opacity = opacityScale ? opacityScale.map(value) : 1;\n      return color.replace(\n        /rgb[a]*\\(([\\d]{1,3}) *, *([\\d]{1,3}) *, *([\\d]{1,3})[\\S\\s]*\\)/,\n        (match, p1, p2, p3) => `rgba(${p1}, ${p2}, ${p3}, ${opacity})`,\n      );\n    }),\n  };\n}\n\nfunction inferContinuousConfig(\n  scales: Scale[],\n  scale: Record<string, Scale>,\n  value: Record<string, any>,\n  options: LegendContinuousOptions,\n  component: GCC,\n  theme: G2Theme,\n): Config {\n  const colorScale = scaleOf(scales, 'color');\n  const shape = inferContinuousShape(value, options, component);\n\n  if (colorScale instanceof Threshold) {\n    const { range } = colorScale.getOptions();\n    const [min, max] = rangeOf(colorScale);\n    // for quantize, quantile scale\n    if (colorScale instanceof Quantize || colorScale instanceof Quantile) {\n      return getQuantizeOrQuantileConfig(shape, colorScale, min, max, range);\n    }\n    // for threshold\n    return getThresholdConfig(shape, colorScale, range);\n  }\n\n  // for linear, pow, sqrt, log, time, utc scale\n  const sizeScale = scaleOf(scales, 'size');\n  const opacityScale = scaleOf(scales, 'opacity');\n  return getLinearConfig(\n    shape,\n    colorScale,\n    sizeScale,\n    opacityScale,\n    scale,\n    theme,\n  );\n}\n\n/**\n * Guide Component for continuous color scale.\n * @todo Custom style.\n */\nexport const LegendContinuous: GCC<LegendContinuousOptions> = (options) => {\n  const {\n    labelFormatter,\n    layout,\n    order,\n    orientation,\n    position,\n    size,\n    title,\n    style,\n    crossPadding,\n    padding,\n    ...rest\n  } = options;\n\n  return ({ scales, value, theme, scale }) => {\n    const { bbox } = value;\n    const { x, y, width, height } = bbox;\n    const finalLayout = inferComponentLayout(position, layout);\n\n    const { legendContinuous: legendTheme = {} } = theme;\n\n    const finalStyle = adaptor(\n      Object.assign(\n        {},\n        legendTheme,\n        {\n          titleText: titleContent(title),\n          labelAlign: 'value',\n          labelFormatter:\n            typeof labelFormatter === 'string'\n              ? (d) => format(labelFormatter)(d.label)\n              : labelFormatter,\n          ...inferContinuousConfig(\n            scales,\n            scale,\n            value,\n            options,\n            LegendContinuous,\n            theme,\n          ),\n          ...style,\n          classNamePrefix: G2_CLASS_PREFIX,\n        },\n        rest,\n      ),\n    );\n\n    const layoutWrapper = new G2Layout({\n      style: {\n        x,\n        y,\n        width,\n        height,\n        ...finalLayout,\n        // @ts-ignore\n        subOptions: finalStyle,\n      },\n    });\n\n    layoutWrapper.appendChild(\n      new Continuous({\n        className: 'legend-continuous',\n        style: finalStyle,\n      }),\n    );\n\n    return layoutWrapper as unknown as DisplayObject;\n  };\n};\n\nLegendContinuous.props = {\n  defaultPosition: 'top',\n  defaultOrientation: 'vertical',\n  defaultOrder: 1,\n  defaultSize: 60,\n  defaultLength: 200,\n  defaultLegendSize: 60,\n  defaultPadding: [20, 10], // [horizontal, vertical]\n  defaultCrossPadding: [12, 12], // [horizontal, vertical]\n};\n", "import { GuideComponentComponent as GCC } from '../runtime';\nimport { LegendContinuous, LegendContinuousOptions } from './legendContinuous';\n\nexport type LegendContinuousBlockOptions = LegendContinuousOptions;\n\nexport const LegendContinuousBlock: GCC<LegendContinuousBlockOptions> = (\n  options,\n) => {\n  return (...args) =>\n    LegendContinuous(Object.assign({}, { block: true }, options))(...args);\n};\n\nLegendContinuousBlock.props = {\n  ...LegendContinuous.props,\n  defaultPosition: 'top',\n  defaultOrientation: 'horizontal',\n};\n", "import { GuideComponentComponent as GCC } from '../runtime';\nimport { scaleOf } from './utils';\nimport { LegendContinuous, LegendContinuousOptions } from './legendContinuous';\n\nexport type LegendContinuousSizeOptions = LegendContinuousOptions;\n\nexport const LegendContinuousSize: GCC<LegendContinuousSizeOptions> = (\n  options,\n) => {\n  return (context) => {\n    const { scales } = context;\n    const sizeScale = scaleOf(scales, 'size');\n    return LegendContinuous(\n      Object.assign(\n        {},\n        {\n          type: 'size',\n          data: sizeScale.getTicks().map((value, index) => ({\n            value,\n            label: String(value),\n          })),\n        },\n        options,\n      ),\n    )(context);\n  };\n};\n\nLegendContinuousSize.props = {\n  ...LegendContinuous.props,\n  defaultPosition: 'top',\n  defaultOrientation: 'horizontal',\n};\n", "import { GuideComponentComponent as GCC } from '../runtime';\nimport { LegendContinuous, LegendContinuousOptions } from './legendContinuous';\nimport { LegendContinuousSize } from './legendContinuousSize';\n\nexport type LegendContinuousBlockSizeOptions = LegendContinuousOptions;\n\nexport const LegendContinuousBlockSize: GCC<\n  LegendContinuousBlockSizeOptions\n> = (options) => {\n  return LegendContinuousSize(Object.assign({}, { block: true }, options));\n};\n\nLegendContinuousBlockSize.props = {\n  ...LegendContinuous.props,\n  defaultPosition: 'top',\n  defaultOrientation: 'horizontal',\n};\n", "import { deepMix } from '@antv/util';\nimport { applyStyle } from '../shape/utils';\nimport { subObject } from '../utils/helper';\nimport { GuideComponentComponent as GCC, G2TitleOptions } from '../runtime';\nimport { createComponent, maybeAppend } from './utils';\n\nexport type TitleComponentOptions = G2TitleOptions;\n\ntype TitleStyleProps = G2TitleOptions & {\n  x: number;\n  y: number;\n  width: number;\n  height: number;\n};\n\nfunction inferStyleByAlign(\n  x: number,\n  y: number,\n  width: number,\n  align: TitleStyleProps['align'],\n) {\n  switch (align) {\n    case 'center':\n      return {\n        x: x + width / 2,\n        y,\n        textAlign: 'middle',\n      };\n    case 'right':\n      return {\n        x: x + width,\n        y,\n        textAlign: 'right',\n      };\n    default:\n      return {\n        x,\n        y,\n        textAlign: 'left',\n      };\n  }\n}\n\nconst Title = createComponent<TitleStyleProps>({\n  render(attributes, container) {\n    const {\n      width,\n      title,\n      subtitle,\n      spacing = 2,\n      align = 'left',\n      x,\n      y,\n      ...style\n    } = attributes;\n\n    container.style.transform = `translate(${x}, ${y})`;\n\n    const titleStyle = subObject(style, 'title');\n    const subtitleStyle = subObject(style, 'subtitle');\n\n    const mainTitle = maybeAppend(container, '.title', 'text')\n      .attr('className', 'title')\n      .call(applyStyle, {\n        ...inferStyleByAlign(0, 0, width, align),\n        fontSize: 14,\n        textBaseline: 'top',\n        text: title,\n        ...titleStyle,\n      })\n      .node();\n\n    const bounds = mainTitle.getLocalBounds();\n    maybeAppend(container, '.sub-title', 'text')\n      .attr('className', 'sub-title')\n      .call((selection) => {\n        if (!subtitle) return selection.node().remove();\n        selection.node().attr({\n          ...inferStyleByAlign(0, bounds.max[1] + spacing, width, align),\n          fontSize: 12,\n          textBaseline: 'top',\n          text: subtitle,\n          ...subtitleStyle,\n        });\n      });\n  },\n});\n\n/**\n * Title Component.\n */\nexport const TitleComponent: GCC<TitleComponentOptions> = (options) => {\n  return ({ value, theme }) => {\n    const { x, y, width, height } = value.bbox;\n    return new Title({\n      style: deepMix({}, theme.title, {\n        x,\n        y,\n        width,\n        height,\n        ...options,\n      }),\n    });\n  };\n};\n\nTitleComponent.props = {\n  defaultPosition: 'top',\n  defaultOrder: 2,\n  defaultSize: 36,\n  defaultCrossPadding: [20, 20],\n  defaultPadding: [12, 12],\n};\n", "import { Slider as SliderComponent } from '@antv/component';\nimport { format } from '@antv/vendor/d3-format';\nimport { DisplayObject } from '@antv/g';\nimport { isArray } from '@antv/util';\nimport { isTranspose } from '../utils/coordinate';\nimport {\n  GuideComponentComponent as GCC,\n  GuideComponentContext,\n} from '../runtime';\nimport { invert } from '../utils/scale';\n\nexport type SliderOptions = {\n  orientation: 'horizontal' | 'vertical';\n  showHandle?: boolean;\n  showLabel?: boolean;\n  showLabelOnInteraction?: boolean;\n  autoFitLabel?: boolean;\n  [key: string]: any;\n};\n\nfunction inferPosition(bbox, position, trackSize) {\n  const { x, y, width, height } = bbox;\n  if (position === 'left') return [x + width - trackSize, y];\n  if (position === 'right') return [x, y];\n  if (position === 'bottom') return [x, y];\n  if (position === 'top') return [x, y + height - trackSize];\n}\n\n/**\n * Slider component.\n */\nexport const Slider: GCC<SliderOptions> = (options) => {\n  // do not pass size.\n  const {\n    orientation,\n    labelFormatter,\n    size,\n    style = {},\n    position,\n    ...rest\n  } = options;\n\n  return (context) => {\n    const {\n      scales: [scale],\n      value,\n      theme,\n      coordinate,\n    } = context;\n    const { bbox } = value;\n\n    const { width, height } = bbox;\n    const { slider: sliderTheme = {} } = theme;\n    const defaultFormatter = scale.getFormatter?.() || ((v) => v + '');\n    const formatter =\n      typeof labelFormatter === 'string'\n        ? format(labelFormatter)\n        : labelFormatter;\n\n    const isHorizontal = orientation === 'horizontal';\n    const reverse = isTranspose(coordinate) && isHorizontal;\n    const { trackSize = sliderTheme.trackSize } = style;\n    const [x0, y0] = inferPosition(bbox, position, trackSize);\n    return new SliderComponent({\n      className: 'slider',\n      style: Object.assign({}, sliderTheme, {\n        x: x0,\n        y: y0,\n        trackLength: isHorizontal ? width : height,\n        orientation,\n        formatter: (v) => {\n          const f = formatter || defaultFormatter;\n          const v1 = reverse ? 1 - v : v;\n          const tick = invert(scale, v1, true);\n          return f(tick);\n        },\n        sparklineData: inferSparklineData(options, context),\n        ...style,\n        ...rest,\n      }),\n    }) as unknown as DisplayObject;\n  };\n};\n\nfunction markValue(markState, channels: string[]) {\n  const [value] = Array.from(markState.entries())\n    .filter(\n      ([mark]) =>\n        mark.type === 'line' ||\n        mark.type === 'area' ||\n        mark.type === 'interval',\n    )\n    .filter(([mark]) => mark.slider)\n    .map(([mark]) => {\n      const { encode, slider } = mark;\n      if (slider?.x) {\n        const channel = (name) => {\n          const channel = encode[name];\n          return [name, channel ? channel.value : undefined];\n        };\n        return Object.fromEntries(channels.map(channel));\n      }\n    });\n\n  if (!value?.series) return value?.y;\n  const result = value.series.reduce((acc, curr, index) => {\n    acc[curr] = acc[curr] || [];\n    acc[curr].push(value.y[index]);\n    return acc;\n  }, {});\n  return Object.values(result);\n}\n\nfunction inferSparklineData(options, context: GuideComponentContext) {\n  const { markState } = context;\n  if (isArray(options.sparklineData)) return options.sparklineData;\n  return markValue(markState, ['y', 'series']);\n}\n\nSlider.props = {\n  defaultPosition: 'bottom',\n  defaultSize: 24,\n  defaultOrder: 1,\n  defaultCrossPadding: [12, 12],\n  defaultPadding: [12, 12],\n};\n", "import { GuideComponentComponent as GCC } from '../runtime';\nimport { Slider, SliderOptions } from './slider';\n\nexport type SliderXOptions = SliderOptions;\n\n/**\n * SliderX component.\n */\nexport const SliderX: GCC<SliderXOptions> = (options) => {\n  return Slider({ ...options, orientation: 'horizontal' });\n};\n\nSliderX.props = {\n  ...Slider.props,\n  defaultPosition: 'bottom',\n};\n", "import { GuideComponentComponent as GCC } from '../runtime';\nimport { Slider, SliderOptions } from './slider';\n\nexport type SliderYOptions = SliderOptions;\n\n/**\n * SliderY component.\n */\nexport const SliderY: GCC<SliderYOptions> = (options) => {\n  return Slider({ ...options, orientation: 'vertical' });\n};\n\nSliderY.props = {\n  ...Slider.props,\n  defaultPosition: 'left',\n};\n", "import { Scrollbar as ScrollbarComponent } from '@antv/component';\nimport { DisplayObject } from '@antv/g';\nimport { GuideComponentComponent as GCC } from '../runtime';\nimport { G2_CLASS_PREFIX } from './constant';\n\nexport type ScrollbarOptions = {\n  orientation?: 'horizontal' | 'vertical';\n  ratio?: number;\n  [key: string]: any;\n};\n\n/**\n * Scrollbar component.\n */\nexport const Scrollbar: GCC<ScrollbarOptions> = (options) => {\n  const { orientation, labelFormatter, style, ...rest } = options;\n\n  return ({ scales: [scale], value, theme }) => {\n    const { bbox } = value;\n    const { x, y, width, height } = bbox;\n    const { scrollbar: scrollbarTheme = {} } = theme;\n    const { ratio, range } = scale.getOptions();\n    const mainSize = orientation === 'horizontal' ? width : height;\n    const actualSize = mainSize / ratio;\n    const [r0, r1] = range;\n    const value1 = r1 > r0 ? 0 : 1;\n    return new ScrollbarComponent({\n      className: `${G2_CLASS_PREFIX}scrollbar`,\n      style: Object.assign({}, scrollbarTheme, {\n        ...style,\n        x,\n        y,\n        trackLength: mainSize,\n        value: value1,\n        ...rest,\n        orientation,\n        contentLength: actualSize,\n        viewportLength: mainSize,\n      }),\n    }) as unknown as DisplayObject;\n  };\n};\n\nScrollbar.props = {\n  defaultPosition: 'bottom',\n  defaultSize: 24,\n  defaultOrder: 1,\n  defaultCrossPadding: [12, 12],\n  defaultPadding: [12, 12],\n};\n", "import { GuideComponentComponent as GCC } from '../runtime';\nimport { Scrollbar, ScrollbarOptions } from './scrollbar';\n\nexport type ScrollbarXOptions = ScrollbarOptions;\n\n/**\n * ScrollbarX component.\n */\nexport const ScrollbarX: GCC<ScrollbarXOptions> = (options) => {\n  return Scrollbar({ ...options, orientation: 'horizontal' });\n};\n\nScrollbarX.props = {\n  ...Scrollbar.props,\n  defaultPosition: 'bottom',\n};\n", "import { GuideComponentComponent as GCC } from '../runtime';\nimport { Scrollbar, ScrollbarOptions } from './scrollbar';\n\nexport type ScrollbarYOptions = ScrollbarOptions;\n\n/**\n * ScrollbarY component.\n */\nexport const ScrollbarY: GCC<ScrollbarYOptions> = (options) => {\n  return Scrollbar({ ...options, orientation: 'vertical' });\n};\n\nScrollbarY.props = {\n  ...Scrollbar.props,\n  defaultPosition: 'left',\n};\n", "import { Group } from '@antv/g';\n\nimport type { GuideComponentComponent as GCC } from '../runtime';\n\nexport type LegendsOptions = Record<string, unknown>;\n\n// A empty component to pass parse view tree stage.\nexport const Legends: GCC<LegendsOptions> = (options) => {\n  return () => {\n    return new Group();\n  };\n};\n\nLegends.props = {};\n", "import { isTranspose } from '../utils/coordinate';\nimport { AnimationComponent as AC } from '../runtime';\nimport { Animation } from './types';\n\nexport type ScaleInXOptions = Animation;\n\n/**\n * Scale mark from nothing to desired shape in x direction.\n */\nexport const ScaleInX: AC<ScaleInXOptions> = (options, context) => {\n  // Small enough to hide or show very small part of mark,\n  // but bigger enough to not cause bug.\n  const ZERO = 0.0001;\n\n  const { coordinate } = context;\n\n  return (from, _, defaults) => {\n    const [shape] = from;\n    const {\n      transform: prefix = '',\n      fillOpacity = 1,\n      strokeOpacity = 1,\n      opacity = 1,\n    } = shape.style;\n    const [transformOrigin, transform]: [string, string] = isTranspose(\n      coordinate,\n    )\n      ? [`left bottom`, `scale(1, ${ZERO})`] // left-bottom corner\n      : [`left top`, `scale(${ZERO}, 1)`]; // left-top corner\n\n    // Using a short fadeIn transition to hide element with scale(0.001)\n    // which is still visible.\n    const keyframes = [\n      {\n        transform: `${prefix} ${transform}`.trimStart(),\n        transformOrigin,\n        fillOpacity: 0,\n        strokeOpacity: 0,\n        opacity: 0,\n      },\n      {\n        transform: `${prefix} ${transform}`.trimStart(),\n        transformOrigin,\n        fillOpacity,\n        strokeOpacity,\n        opacity,\n        offset: 0.01,\n      },\n      {\n        transform: `${prefix} scale(1, 1)`.trimStart(),\n        transformOrigin,\n        fillOpacity,\n        strokeOpacity,\n        opacity,\n      },\n    ];\n\n    const animation = shape.animate(keyframes, { ...defaults, ...options });\n\n    return animation;\n  };\n};\n", "import { isTranspose } from '../utils/coordinate';\nimport { AnimationComponent as AC } from '../runtime';\nimport { Animation } from './types';\n\nexport type ScaleOutXOptions = Animation;\n\n/**\n * Scale mark from desired shape to nothing in x direction.\n */\nexport const ScaleOutX: AC<ScaleOutXOptions> = (options, context) => {\n  // Small enough to hide or show very small part of mark,\n  // but bigger enough to not cause bug.\n  const ZERO = 0.0001;\n\n  const { coordinate } = context;\n\n  return (from, _, defaults) => {\n    const [shape] = from;\n    const {\n      transform: prefix = '',\n      fillOpacity = 1,\n      strokeOpacity = 1,\n      opacity = 1,\n    } = shape.style;\n    const [transformOrigin, transform]: [string, string] = isTranspose(\n      coordinate,\n    )\n      ? [`left bottom`, `scale(1, ${ZERO})`] // left-bottom corner\n      : [`left top`, `scale(${ZERO}, 1)`]; // left-top corner\n\n    // Using a short fadeIn transition to hide element with scale(0.001)\n    // which is still visible.\n    const keyframes = [\n      {\n        transform: `${prefix} scale(1, 1)`.trimStart(),\n        transformOrigin,\n      },\n      {\n        transform: `${prefix} ${transform}`.trimStart(),\n        transformOrigin,\n        fillOpacity,\n        strokeOpacity,\n        opacity,\n        offset: 0.99,\n      },\n      {\n        transform: `${prefix} ${transform}`.trimStart(),\n        transformOrigin,\n        fillOpacity: 0,\n        strokeOpacity: 0,\n        opacity: 0,\n      },\n    ];\n\n    const animation = shape.animate(keyframes, { ...defaults, ...options });\n\n    return animation;\n  };\n};\n", "import { CSS, PropertySyntax, DisplayObject } from '@antv/g';\nimport { G2Element } from 'utils/selection';\nimport { AnimationComponent as AC } from '../runtime';\nimport { isTranspose, isPolar } from '../utils/coordinate';\nimport { getArcObject } from '../shape/utils';\nimport { Animation } from './types';\n\nexport type ScaleInYOptions = Animation;\n\n/**\n * Scale mark from nothing to desired shape in y direction.\n */\nexport const ScaleInY: AC<ScaleInYOptions> = (options, context) => {\n  // Small enough to hide or show very small part of mark,\n  // but bigger enough to not cause bug.\n  const ZERO = 0.0001;\n\n  const { coordinate } = context;\n\n  // the polar coordinate need\n  CSS.registerProperty({\n    name: 'scaleInYRadius',\n    inherits: false,\n    initialValue: '',\n    interpolable: true,\n    syntax: PropertySyntax.NUMBER,\n  });\n\n  return (from, _, defaults) => {\n    const [shape] = from;\n    const PolarScaleInY = (shape: DisplayObject) => {\n      const { __data__, style } = shape as G2Element;\n      const { fillOpacity = 1, strokeOpacity = 1, opacity = 1 } = style;\n      const { points, y, y1 } = __data__;\n      const arcObject = getArcObject(coordinate, points, [y, y1]);\n      const { innerRadius, outerRadius } = arcObject;\n\n      const keyframes = [\n        {\n          scaleInYRadius: innerRadius + ZERO,\n          fillOpacity: 0,\n          strokeOpacity: 0,\n          opacity: 0,\n        },\n        {\n          scaleInYRadius: innerRadius + ZERO,\n          fillOpacity,\n          strokeOpacity,\n          opacity,\n          offset: 0.01,\n        },\n        {\n          scaleInYRadius: outerRadius,\n          fillOpacity,\n          strokeOpacity,\n          opacity,\n        },\n      ];\n\n      const animation = shape.animate(keyframes, { ...defaults, ...options });\n      return animation;\n    };\n\n    const RectangularScaleInY = (shape: DisplayObject) => {\n      const { style } = shape as G2Element;\n      const {\n        transform: prefix = '',\n        fillOpacity = 1,\n        strokeOpacity = 1,\n        opacity = 1,\n      } = style;\n      const [transformOrigin, transform]: [string, string] = isTranspose(\n        coordinate,\n      )\n        ? [`left top`, `scale(${ZERO}, 1)`] // left-top corner\n        : [`left bottom`, `scale(1, ${ZERO})`]; // left-bottom corner\n\n      // Using a short fadeIn transition to hide element with scale(0.001)\n      // which is still visible.\n      const keyframes = [\n        {\n          transform: `${prefix} ${transform}`.trimStart(),\n          transformOrigin,\n          fillOpacity: 0,\n          strokeOpacity: 0,\n          opacity: 0,\n        },\n        {\n          transform: `${prefix} ${transform}`.trimStart(),\n          transformOrigin,\n          fillOpacity,\n          strokeOpacity,\n          opacity,\n          offset: 0.01,\n        },\n        {\n          transform: `${prefix} scale(1, 1)`.trimStart(),\n          transformOrigin,\n          fillOpacity,\n          strokeOpacity,\n          opacity,\n        },\n      ];\n\n      const animation = shape.animate(keyframes, { ...defaults, ...options });\n      return animation;\n    };\n\n    if (isPolar(coordinate)) {\n      return PolarScaleInY(shape);\n    } else {\n      return RectangularScaleInY(shape);\n    }\n  };\n};\n", "import { isTranspose } from '../utils/coordinate';\nimport { AnimationComponent as AC } from '../runtime';\nimport { Animation } from './types';\n\nexport type ScaleOutYOptions = Animation;\n\n/**\n * Scale mark from desired shape to nothing in y direction.\n */\nexport const ScaleOutY: AC<ScaleOutYOptions> = (options, context) => {\n  // Small enough to hide or show very small part of mark,\n  // but bigger enough to not cause bug.\n  const ZERO = 0.0001;\n\n  const { coordinate } = context;\n\n  return (from, _, defaults) => {\n    const [shape] = from;\n    const {\n      transform: prefix = '',\n      fillOpacity = 1,\n      strokeOpacity = 1,\n      opacity = 1,\n    } = shape.style;\n    const [transformOrigin, transform]: [string, string] = isTranspose(\n      coordinate,\n    )\n      ? [`left top`, `scale(${ZERO}, 1)`] // left-top corner\n      : [`left bottom`, `scale(1, ${ZERO})`]; // left-bottom corner\n\n    // Using a short fadeIn transition to hide element with scale(0.001)\n    // which is still visible.\n    const keyframes = [\n      {\n        transform: `${prefix} scale(1, 1)`.trimStart(),\n        transformOrigin,\n      },\n      {\n        transform: `${prefix} ${transform}`.trimStart(),\n        transformOrigin,\n        fillOpacity,\n        strokeOpacity,\n        opacity,\n        offset: 0.99,\n      },\n      {\n        transform: `${prefix} ${transform}`.trimStart(),\n        transformOrigin,\n        fillOpacity: 0,\n        strokeOpacity: 0,\n        opacity: 0,\n      },\n    ];\n\n    const animation = shape.animate(keyframes, { ...defaults, ...options });\n\n    return animation;\n  };\n};\n", "import { AnimationComponent as AC } from '../runtime';\nimport { Animation } from './types';\n\nexport type FadeInOptions = Animation;\n\n/**\n * Transform mark from transparent to solid.\n */\nexport const FadeIn: AC<FadeInOptions> = (options) => {\n  return (from, _, defaults) => {\n    const [shape] = from;\n    const { fillOpacity = 1, strokeOpacity = 1, opacity = 1 } = shape.style;\n    const keyframes = [\n      { fillOpacity: 0, strokeOpacity: 0, opacity: 0 },\n      {\n        fillOpacity,\n        strokeOpacity,\n        opacity,\n      },\n    ];\n    return shape.animate(keyframes, { ...defaults, ...options });\n  };\n};\n\nFadeIn.props = {};\n", "import { AnimationComponent as AC } from '../runtime';\nimport { Animation } from './types';\n\nexport type FadeOutOptions = Animation;\n\n/**\n * Transform mark from solid to transparent.\n */\nexport const FadeOut: AC<FadeOutOptions> = (options) => {\n  return (from, _, defaults) => {\n    const [shape] = from;\n    const { fillOpacity = 1, strokeOpacity = 1, opacity = 1 } = shape.style;\n    const keyframes = [\n      {\n        fillOpacity,\n        strokeOpacity,\n        opacity,\n      },\n      { fillOpacity: 0, strokeOpacity: 0, opacity: 0 },\n    ];\n    return shape.animate(keyframes, { ...defaults, ...options });\n  };\n};\n\nFadeOut.props = {};\n", "import { DisplayObject, Shape } from '@antv/g';\n\nconst DEFAULT_ATTRIBUTE_VALUE = {\n  opacity: 1,\n  strokeOpacity: 1,\n  fillOpacity: 1,\n  lineWidth: 0,\n  x: 0,\n  y: 0,\n  cx: 0,\n  cy: 0,\n  r: 0,\n  rx: 0,\n  ry: 0,\n  width: 0,\n  height: 0,\n};\n\nexport const GEOMETRY_ATTRIBUTES = {\n  [Shape.CIRCLE]: ['cx', 'cy', 'r'],\n  [Shape.ELLIPSE]: ['cx', 'cy', 'rx', 'ry'],\n  [Shape.RECT]: ['x', 'y', 'width', 'height'],\n  [Shape.IMAGE]: ['x', 'y', 'width', 'height'],\n  [Shape.LINE]: ['x1', 'y1', 'x2', 'y2'],\n  [Shape.POLYLINE]: ['points'],\n  [Shape.POLYGON]: ['points'],\n};\n\nexport function attributeOf(\n  shape: DisplayObject,\n  keys: string[],\n  useDefaultValue = false,\n) {\n  const attribute = {};\n  for (const key of keys) {\n    const value = shape.style[key];\n    if (value) {\n      attribute[key] = value;\n    } else if (useDefaultValue) {\n      attribute[key] = DEFAULT_ATTRIBUTE_VALUE[key];\n    }\n  }\n  return attribute;\n}\n\nexport const attributeKeys = [\n  'fill',\n  'stroke',\n  'fillOpacity',\n  'strokeOpacity',\n  'opacity',\n  'lineWidth',\n];\n", "import {\n  convertToPath,\n  DisplayObject,\n  IAnimation as GAnimation,\n  Path,\n  Shape,\n} from '@antv/g';\nimport { get, isEqual } from '@antv/util';\nimport { AnimationComponent as AC } from '../runtime';\nimport { copyAttributes } from '../utils/helper';\nimport { Animation } from './types';\nimport { attributeKeys, attributeOf, GEOMETRY_ATTRIBUTES } from './utils';\n\nexport type MorphingOptions = Animation & { split: 'pack' | SplitFunction };\n\ntype BBox = [number, number, number, number];\n\ntype SplitFunction = (shape: DisplayObject, count: number) => string[];\n\nfunction localBBoxOf(shape: DisplayObject): BBox {\n  const { min, max } = shape.getLocalBounds();\n  const [x0, y0] = min;\n  const [x1, y1] = max;\n  const height = y1 - y0;\n  const width = x1 - x0;\n  return [x0, y0, width, height];\n}\n\nfunction d(bbox: BBox): string {\n  const [x, y, width, height] = bbox;\n  return `\n    M ${x} ${y}\n    L ${x + width} ${y}\n    L ${x + width} ${y + height}\n    L ${x} ${y + height}\n    Z\n  `;\n}\n\nfunction pack(shape: DisplayObject, count: number): string[] {\n  const [x0, y0, width, height] = localBBoxOf(shape);\n  const aspect = height / width;\n  const col = Math.ceil(Math.sqrt(count / aspect));\n  const row = Math.ceil(count / col);\n  const B = [];\n  const h = height / row;\n  let j = 0;\n  let n = count;\n  while (n > 0) {\n    const c = Math.min(n, col);\n    const w = width / c;\n    for (let i = 0; i < c; i++) {\n      const x = x0 + i * w;\n      const y = y0 + j * h;\n      B.push(d([x, y, w, h]));\n    }\n    n -= c;\n    j += 1;\n  }\n  return B;\n}\n\nfunction normalizeSplit(\n  split: MorphingOptions['split'] = 'pack',\n): SplitFunction {\n  if (typeof split == 'function') return split;\n  return pack;\n}\n\n/**\n * Use attributes relative to geometry to do shape to shape animation.\n *\n * For example, the x, y, width, height of `Rect`, the cx, cy, r of `Circle`.\n * And for `Group`, it will use the bbox of the group.\n */\nfunction shapeToShape(\n  from: DisplayObject,\n  to: DisplayObject,\n  timeEffect: Record<string, any>,\n): GAnimation {\n  let { transform: fromTransform } = from.style;\n  const { transform: toTransform } = to.style;\n\n  // Replace first to get right bbox after mounting.\n  replaceChild(to, from);\n\n  let keys = attributeKeys;\n  if (from.nodeName === Shape.GROUP) {\n    // Apply translate and scale transform.\n    const [x0, y0, w0, h0] = localBBoxOf(from);\n    const [x1, y1, w1, h1] = localBBoxOf(to);\n    const dx = x0 - x1;\n    const dy = y0 - y1;\n    const sx = w0 / w1;\n    const sy = h0 / h1;\n    fromTransform = `translate(${dx}, ${dy}) scale(${sx}, ${sy})`;\n  } else {\n    keys = keys.concat(GEOMETRY_ATTRIBUTES[from.nodeName] || []);\n  }\n\n  const keyframes = [\n    {\n      transform: fromTransform ?? 'none',\n      ...attributeOf(from, keys, true),\n    },\n    {\n      transform: toTransform ?? 'none',\n      ...attributeOf(to, keys, true),\n    },\n  ];\n  const animation = to.animate(keyframes, timeEffect);\n  return animation;\n}\n\n/**\n * Replace object and copy className and __data__\n */\nfunction replaceChild(newChild: DisplayObject, oldChild: DisplayObject) {\n  newChild['__data__'] = oldChild['__data__'];\n  newChild.className = oldChild.className;\n  // @ts-ignore\n  newChild.markType = oldChild.markType;\n  oldChild.parentNode.replaceChild(newChild, oldChild);\n}\n\n/**\n * Replace element with a path shape.\n */\nfunction maybePath(node: DisplayObject, d: string): DisplayObject {\n  const { nodeName } = node;\n  if (nodeName === 'path') return node;\n  const path = new Path({\n    style: {\n      ...attributeOf(node, attributeKeys),\n      d,\n    },\n  });\n  replaceChild(path, node);\n  return path;\n}\n\nfunction hasUniqueString(search: string, pattern: string): boolean {\n  const first = search.indexOf(pattern);\n  const last = search.lastIndexOf(pattern);\n  return first === last;\n}\n\n// Path definition with multiple m and M command has sub path.\n// eg. 'M10,10...M20,20', 'm10,10...m20,20'\nfunction hasSubPath(path: string): boolean {\n  return !hasUniqueString(path, 'm') || !hasUniqueString(path, 'M');\n}\n\nfunction shape2path(shape: DisplayObject): string {\n  const path = convertToPath(shape);\n  if (!path) return;\n  // Path definition with sub path can't do path morphing animation,\n  // so skip this kind of path.\n  if (hasSubPath(path)) return;\n  return path;\n}\n// Check if the path has a markerEnd | markerStart\nfunction hasMarker(shape: DisplayObject): boolean {\n  const { nodeName } = shape;\n  if (nodeName === 'path') {\n    const attributes = get(shape, 'attributes');\n    return attributes.markerEnd || attributes.markerStart;\n  }\n  return false;\n}\n\nfunction oneToOne(\n  shape: DisplayObject,\n  from: DisplayObject,\n  to: DisplayObject,\n  timeEffect: Record<string, any>,\n) {\n  // If the nodeTypes of from and to are equal,\n  // or non of them can convert to path,\n  // the apply shape to shape animation.\n  const { nodeName: fromName } = from;\n  const { nodeName: toName } = to;\n  const fromPath = shape2path(from);\n  const toPath = shape2path(to);\n  const {\n    opacity: fromOpacity = 1,\n    strokeOpacity: fromStrokeOpacity = 1,\n    fillOpacity: fromFillOpacity = 1,\n  } = from.style;\n  const {\n    opacity: toOpacity = 1,\n    strokeOpacity: toStrokeOpacity = 1,\n    fillOpacity: toFillOpacity = 1,\n  } = to.style;\n  const isSameNodes = fromName === toName && fromName !== 'path';\n  const hasNonPathNode = fromPath === undefined || toPath === undefined;\n  // Path with mark can not use animate like ordinary path.\n  const isPathWithMarker = hasMarker(from) || hasMarker(to);\n  if (isSameNodes || hasNonPathNode || isPathWithMarker)\n    return shapeToShape(from, to, timeEffect);\n  const pathShape = maybePath(shape, fromPath);\n  // Convert Path will take transform, anchor, etc into account,\n  // so there is no need to specify these attributes in keyframes.\n  const fromKeyframes = {\n    ...attributeOf(from, attributeKeys),\n    opacity: fromOpacity,\n    strokeOpacity: fromStrokeOpacity,\n    fillOpacity: fromFillOpacity,\n  };\n\n  const toKeyframes = {\n    ...attributeOf(to, attributeKeys),\n    opacity: toOpacity,\n    strokeOpacity: toStrokeOpacity,\n    fillOpacity: toFillOpacity,\n  };\n\n  const keyframes: Keyframe[] = [fromKeyframes, toKeyframes];\n\n  if (fromPath !== toPath) {\n    keyframes[0].d = fromPath;\n    keyframes[1].d = toPath;\n\n    const animation = pathShape.animate(keyframes, timeEffect);\n    animation.onfinish = () => {\n      // Should keep the original path definition.\n      copyAttributes(pathShape, to);\n      pathShape.style.d = toPath;\n      pathShape.style.transform = 'none';\n    };\n\n    // Remove transform because it already applied in path\n    // converted by convertToPath.\n    pathShape.style.transform = 'none';\n    return animation;\n  }\n\n  // If fromKeyframes and toKeyframes are not equal, apply animation.\n  if (!isEqual(fromKeyframes, toKeyframes)) {\n    return pathShape.animate(keyframes, timeEffect);\n  }\n\n  // No need to apply animation since fromKeyframes equals toKeyframes.\n  return null;\n}\n\nfunction oneToMultiple(\n  from: DisplayObject,\n  to: DisplayObject[],\n  timeEffect: Record<string, any>,\n  split: SplitFunction,\n) {\n  // Hide the shape to be split before being removing.\n  from.style.visibility = 'hidden';\n  const D = split(from, to.length);\n  return to.map((shape, i) => {\n    const path = new Path({\n      style: {\n        d: D[i],\n        ...attributeOf(from, attributeKeys),\n      },\n    });\n    return oneToOne(shape, path, shape, timeEffect);\n  });\n}\n\nfunction multipleToOne(\n  from: DisplayObject[],\n  to: DisplayObject,\n  timeEffect: Record<string, any>,\n  split: SplitFunction,\n) {\n  const D = split(to, from.length);\n  const { fillOpacity = 1, strokeOpacity = 1, opacity = 1 } = to.style;\n  const keyframes = [\n    { fillOpacity: 0, strokeOpacity: 0, opacity: 0 },\n    { fillOpacity: 0, strokeOpacity: 0, opacity: 0, offset: 0.99 },\n    {\n      fillOpacity,\n      strokeOpacity,\n      opacity,\n    },\n  ];\n  const animation = to.animate(keyframes, timeEffect);\n  const animations = from.map((shape, i) => {\n    const path = new Path({\n      style: {\n        d: D[i],\n        fill: to.style.fill,\n      },\n    });\n    return oneToOne(shape, shape, path, timeEffect);\n  });\n  return [...animations, animation];\n}\n\n/**\n * Morphing animations.\n * @todo Support more split function.\n */\nexport const Morphing: AC<MorphingOptions> = (options) => {\n  return (from, to, defaults) => {\n    const split = normalizeSplit(options.split);\n    const timeEffect = { ...defaults, ...options };\n    const { length: fl } = from;\n    const { length: tl } = to;\n    if ((fl === 1 && tl === 1) || (fl > 1 && tl > 1)) {\n      const [f] = from;\n      const [t] = to;\n      return oneToOne(f, f, t, timeEffect);\n    }\n    if (fl === 1 && tl > 1) {\n      const [f] = from;\n      return oneToMultiple(f, to, timeEffect, split);\n    }\n    if (fl > 1 && tl === 1) {\n      const [t] = to;\n      return multipleToOne(from, t, timeEffect, split);\n    }\n    return null;\n  };\n};\n\nMorphing.props = {};\n", "import { arc } from '@antv/vendor/d3-shape';\nimport { CSS, PropertySyntax } from '@antv/g';\nimport { G2Element } from '../utils/selection';\nimport { AnimationComponent as AC } from '../runtime';\nimport { getArcObject } from '../shape/utils';\nimport { isPolar } from '../utils/coordinate';\nimport { Animation } from './types';\nimport { ScaleInX } from './scaleInX';\n\nexport type WaveInOptions = Animation;\n\n/**\n * Transform mark from transparent to solid.\n */\nexport const WaveIn: AC<WaveInOptions> = (options, context) => {\n  const ZERO = 0.0001;\n\n  // @see https://g-next.antv.vision/zh/docs/api/css/css-properties-values-api#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%B1%9E%E6%80%A7\n  CSS.registerProperty({\n    name: 'waveInArcAngle',\n    inherits: false,\n    initialValue: '',\n    interpolable: true,\n    syntax: PropertySyntax.NUMBER,\n  });\n\n  const { coordinate } = context;\n\n  return (from, to, defaults) => {\n    const [shape] = from;\n\n    if (!isPolar(coordinate)) {\n      return ScaleInX(options, context)(from, to, defaults);\n    }\n\n    const { __data__, style } = shape as G2Element;\n    const {\n      radius = 0,\n      inset = 0,\n      fillOpacity = 1,\n      strokeOpacity = 1,\n      opacity = 1,\n    } = style;\n\n    const { points, y, y1 } = __data__;\n\n    const path = arc()\n      .cornerRadius(radius as number)\n      .padAngle((inset * Math.PI) / 180);\n    const arcObject = getArcObject(coordinate, points, [y, y1]);\n    const { startAngle, endAngle } = arcObject;\n\n    const keyframes = [\n      // Use custom interpolable CSS property.\n      {\n        waveInArcAngle: startAngle + ZERO,\n        fillOpacity: 0,\n        strokeOpacity: 0,\n        opacity: 0,\n      },\n      {\n        waveInArcAngle: startAngle + ZERO,\n        fillOpacity,\n        strokeOpacity,\n        opacity,\n        offset: 0.01,\n      },\n      {\n        waveInArcAngle: endAngle,\n        fillOpacity,\n        strokeOpacity,\n        opacity,\n      },\n    ];\n    const animation = shape.animate(keyframes, { ...defaults, ...options });\n\n    animation.onframe = function () {\n      shape.style.d = path({\n        ...arcObject,\n        endAngle: Number(shape.style.waveInArcAngle),\n      });\n    };\n    animation.onfinish = function () {\n      shape.style.d = path({\n        ...arcObject,\n        endAngle: endAngle,\n      });\n    };\n\n    return animation;\n  };\n};\n\nWaveIn.props = {};\n", "import { AnimationComponent as AC } from '../runtime';\nimport { Animation } from './types';\n\nexport type ZoomInOptions = Animation;\n\nexport const ZoomIn: AC<ZoomInOptions> = (options) => {\n  // Small enough to hide or show very small part of mark,\n  // but bigger enough to not cause bug.\n  const ZERO = 0.0001;\n\n  return (from, _, defaults) => {\n    const [shape] = from;\n    const {\n      transform: prefix = '',\n      fillOpacity = 1,\n      strokeOpacity = 1,\n      opacity = 1,\n    } = shape.style;\n    const transformOrigin = 'center center';\n    const keyframes = [\n      {\n        transform: `${prefix} scale(${ZERO})`.trimStart(),\n        transformOrigin,\n        fillOpacity: 0,\n        strokeOpacity: 0,\n        opacity: 0,\n      },\n      {\n        transform: `${prefix} scale(${ZERO})`.trimStart(),\n        transformOrigin,\n        fillOpacity,\n        strokeOpacity,\n        opacity,\n        offset: 0.01,\n      },\n      {\n        transform: `${prefix} scale(1)`.trimStart(),\n        transformOrigin,\n        fillOpacity,\n        strokeOpacity,\n        opacity,\n      },\n    ];\n\n    const animation = shape.animate(keyframes, { ...defaults, ...options });\n\n    return animation;\n  };\n};\n", "import { AnimationComponent as AC } from '../runtime';\nimport { Animation } from './types';\n\nexport type ZoomOutOptions = Animation;\n\nexport const ZoomOut: AC<ZoomOutOptions> = (options) => {\n  // Small enough to hide or show very small part of mark,\n  // but bigger enough to not cause bug.\n  const ZERO = 0.0001;\n\n  return (from, _, defaults) => {\n    const [shape] = from;\n    const {\n      transform: prefix = '',\n      fillOpacity = 1,\n      strokeOpacity = 1,\n      opacity = 1,\n    } = shape.style;\n    const transformOrigin = 'center center';\n    const keyframes = [\n      { transform: `${prefix} scale(1)`.trimStart(), transformOrigin },\n      {\n        transform: `${prefix} scale(${ZERO})`.trimStart(),\n        transformOrigin,\n        fillOpacity,\n        strokeOpacity,\n        opacity,\n        offset: 0.99,\n      },\n      {\n        transform: `${prefix} scale(${ZERO})`.trimStart(),\n        transformOrigin,\n        fillOpacity: 0,\n        strokeOpacity: 0,\n        opacity: 0,\n      },\n    ];\n\n    const animation = shape.animate(keyframes, { ...defaults, ...options });\n\n    return animation;\n  };\n};\n", "import { Line } from '@antv/g';\nimport { AnimationComponent as AC } from '../runtime';\nimport { Animation } from './types';\n\nexport type PathInOptions = Animation;\n\n/**\n * Transform mark from transparent to solid.\n */\nexport const PathIn: AC<PathInOptions> = (options) => {\n  return (from, _, defaults) => {\n    const [shape] = from;\n    const length = (shape as Line).getTotalLength?.() || 0;\n\n    const keyframes = [\n      { lineDash: [0, length] },\n      { lineDash: [length, 0] },\n    ] as any[];\n    return shape.animate(keyframes, { ...defaults, ...options });\n  };\n};\n\nPathIn.props = {};\n", "import { Path } from '@antv/g';\nimport { AnimationComponent as AC } from '../runtime';\nimport { Animation } from './types';\nimport { ScaleInX } from './scaleInX';\n\nexport type GrowInXOptions = Animation;\n\n/**\n * Scale mark from nothing to desired shape in x direction.\n */\nexport const GrowInX: AC<GrowInXOptions> = (options, context) => {\n  return (from, to, defaults) => {\n    const [shape] = from;\n    const {\n      min: [x, y],\n      halfExtents,\n    } = shape.getLocalBounds();\n    const width = halfExtents[0] * 2;\n    const height = halfExtents[1] * 2;\n    const clipPath = new Path({\n      style: {\n        d: `M${x},${y}L${x + width},${y}L${x + width},${y + height}L${x},${\n          y + height\n        }Z`,\n      },\n    });\n    shape.appendChild(clipPath);\n    shape.style.clipPath = clipPath;\n\n    const animation = ScaleInX(options, context)([clipPath], to, defaults);\n\n    return animation;\n  };\n};\n\nGrowInX.props = {};\n", "import { Path } from '@antv/g';\nimport { AnimationComponent as AC } from '../runtime';\nimport { Animation } from './types';\nimport { ScaleInY } from './scaleInY';\n\nexport type GrowInYOptions = Animation;\n\n/**\n * Scale mark from nothing to desired shape in x direction.\n */\nexport const GrowInY: AC<GrowInYOptions> = (options, context) => {\n  return (from, to, defaults) => {\n    const [shape] = from;\n    const {\n      min: [x, y],\n      halfExtents,\n    } = shape.getLocalBounds();\n    const width = halfExtents[0] * 2;\n    const height = halfExtents[1] * 2;\n    const clipPath = new Path({\n      style: {\n        d: `M${x},${y}L${x + width},${y}L${x + width},${y + height}L${x},${\n          y + height\n        }Z`,\n      },\n    });\n    shape.appendChild(clipPath);\n    shape.style.clipPath = clipPath;\n\n    const animation = ScaleInY(options, context)([clipPath], to, defaults);\n\n    return animation;\n  };\n};\n\nGrowInY.props = {};\n", "import { DisplayObject } from '@antv/g';\nimport { deepMix } from '@antv/util';\nimport { group } from '@antv/vendor/d3-array';\nimport { subObject } from '../utils/helper';\nimport {\n  createDatumof,\n  createFindElementByEvent,\n  createUseState,\n  createValueof,\n  createXKey,\n  mergeState,\n  offsetTransform,\n  renderBackground,\n  renderLink,\n  selectElementByData,\n  selectG2Elements,\n  selectPlotArea,\n  VALID_FIND_BY_X_MARKS,\n} from './utils';\n\n/**\n * highlight a group of elements.\n */\nexport function elementHighlight(\n  root: DisplayObject,\n  {\n    elements: elementsof, // given the root of chart returns elements to be manipulated\n    datum, // given each element returns the datum of it\n    groupKey: eleGroupKey = (d) => d, // group elements by specified key\n    regionGroupKey = (d) => d, // how to group elements when hover region\n    link = false, // draw link or not\n    background = false, // draw background or not\n    delay = 60, // delay to unhighlighted element\n    scale,\n    coordinate,\n    emitter,\n    state = {},\n    region = false,\n    regionEleFilter = (el) => VALID_FIND_BY_X_MARKS.includes(el.markType), // some elements can not be highlighted by region, like shapes in pie.\n  }: Record<string, any>,\n) {\n  const allElements = elementsof(root) ?? [];\n  const elements = region ? allElements.filter(regionEleFilter) : allElements;\n  const elementSet = new Set(elements);\n  const groupKey = region ? regionGroupKey : eleGroupKey;\n  const keyGroup = group(elements, groupKey);\n  const findElement = createFindElementByEvent({\n    elementsof,\n    root,\n    coordinate,\n    scale,\n  });\n\n  const valueof = createValueof(elements, datum);\n  const [appendLink, removeLink] = renderLink({\n    elements,\n    valueof,\n    link,\n    coordinate,\n    ...subObject(state.active, 'link'),\n  });\n  const [appendBackground, removeBackground, isBackground] = renderBackground({\n    document: root.ownerDocument,\n    scale,\n    coordinate,\n    background,\n    valueof,\n    ...subObject(state.active, 'background'),\n  });\n\n  const elementStyle = deepMix(state, {\n    active: {\n      ...(state.active?.offset && {\n        //Apply translate to mock slice out.\n        transform: (...params) => {\n          const value = state.active.offset(...params);\n          const [, i] = params;\n          return offsetTransform(elements[i], value, coordinate);\n        },\n      }),\n    },\n  });\n\n  const useState = createUseState(elementStyle, elements);\n\n  const { updateState, removeState, hasState } = useState(valueof);\n\n  let out; // Timer for delaying unhighlighted.\n  const pointerover = (event) => {\n    const { nativeEvent = true } = event;\n    let element = event.target;\n    if (region) {\n      element = findElement(event);\n    }\n    if (!elementSet.has(element)) return;\n    if (out) clearTimeout(out);\n    const k = groupKey(element);\n    const group = keyGroup.get(k);\n    const groupSet = new Set(group);\n    for (const e of elements) {\n      if (groupSet.has(e)) {\n        if (!hasState(e, 'active')) updateState(e, 'active');\n      } else {\n        updateState(e, 'inactive');\n        removeLink(e);\n      }\n      if (e !== element) removeBackground(e);\n    }\n    appendBackground(element);\n    appendLink(group);\n\n    // Emit events.\n    if (!nativeEvent) return;\n    emitter.emit('element:highlight', {\n      nativeEvent,\n      data: {\n        data: datum(element),\n        group: group.map(datum),\n      },\n    });\n  };\n\n  const delayUnhighlighted = () => {\n    if (out) clearTimeout(out);\n    out = setTimeout(() => {\n      unhighlighted();\n      out = null;\n    }, delay);\n  };\n\n  const unhighlighted = (nativeEvent = true) => {\n    for (const e of elements) {\n      removeState(e, 'active', 'inactive');\n      removeBackground(e);\n      removeLink(e);\n    }\n    if (nativeEvent) {\n      emitter.emit('element:unhighlight', { nativeEvent });\n    }\n  };\n\n  const pointerout = (event) => {\n    let element = event.target;\n    if (region) {\n      element = findElement(event);\n    }\n    if (!element) {\n      if (delay > 0) delayUnhighlighted();\n      else unhighlighted();\n      return;\n    }\n    if (background && !isBackground(element)) return;\n    if (!background && !elementSet.has(element)) return;\n    if (delay > 0) delayUnhighlighted();\n    else unhighlighted();\n  };\n\n  const pointerleave = () => {\n    unhighlighted();\n  };\n\n  root.addEventListener('pointerover', pointerover);\n  root.addEventListener('pointermove', pointerover);\n  root.addEventListener('pointerout', pointerout);\n  root.addEventListener('pointerleave', pointerleave);\n\n  const onRest = (e) => {\n    const { nativeEvent } = e;\n    if (nativeEvent) return;\n    unhighlighted(false);\n  };\n\n  const onHighlight = (e) => {\n    const { nativeEvent } = e;\n    if (nativeEvent) return;\n    const { data } = e.data;\n    const element = selectElementByData(elements, data, datum);\n    if (!element) return;\n    pointerover({ target: element, nativeEvent: false });\n  };\n\n  emitter.on('element:highlight', onHighlight);\n  emitter.on('element:unhighlight', onRest);\n\n  return () => {\n    root.removeEventListener('pointerover', pointerover);\n    root.removeEventListener('pointermove', pointerover);\n    root.removeEventListener('pointerout', pointerout);\n    root.removeEventListener('pointerleave', pointerleave);\n    emitter.off('element:highlight', onHighlight);\n    emitter.off('element:unhighlight', onRest);\n    for (const e of elements) {\n      removeBackground(e);\n      removeLink(e);\n    }\n  };\n}\n\nexport function ElementHighlight({\n  delay,\n  createGroup,\n  createRegionGroup,\n  background = false,\n  link = false,\n  ...rest\n}) {\n  return (context, _, emitter) => {\n    const { container, view, options } = context;\n    const { scale, coordinate } = view;\n    const plotArea = selectPlotArea(container);\n\n    return elementHighlight(plotArea, {\n      elements: selectG2Elements,\n      datum: createDatumof(view),\n      groupKey: createGroup ? createGroup(view) : undefined,\n      regionGroupKey: createRegionGroup\n        ? createRegionGroup(view)\n        : createXKey(view),\n      coordinate,\n      scale,\n      state: mergeState(options, [\n        ['active', background ? {} : { lineWidth: '1', stroke: '#000' }],\n        'inactive',\n      ]),\n      background,\n      link,\n      delay,\n      emitter,\n      ...rest,\n    });\n  };\n}\n\nElementHighlight.props = {\n  reapplyWhenUpdate: true,\n};\n", "import { createXKey } from './utils';\nimport { ElementHighlight } from './elementHighlight';\n\nexport function ElementHighlightByX(options) {\n  return ElementHighlight({ ...options, createGroup: createXKey });\n}\n\nElementHighlightByX.props = {\n  reapplyWhenUpdate: true,\n};\n", "import { createColorKey } from './utils';\nimport { ElementHighlight } from './elementHighlight';\n\nexport function ElementHighlightByColor(options) {\n  return ElementHighlight({ ...options, createGroup: createColorKey });\n}\n\nElementHighlightByColor.props = {\n  reapplyWhenUpdate: true,\n};\n", "import { DisplayObject } from '@antv/g';\nimport { deepMix } from '@antv/util';\nimport { group } from '@antv/vendor/d3-array';\nimport {\n  createDatumof,\n  createUseState,\n  createValueof,\n  mergeState,\n  selectElementByData,\n  selectG2Elements,\n  selectPlotArea,\n} from './utils';\n\n/**\n * Scale up elements on hover.\n */\nexport function elementHoverScale(\n  root: DisplayObject,\n  {\n    elements: elementsof,\n    datum,\n    groupKey = (element) => element,\n    scaleFactor = 1.04,\n    scaleOrigin = 'center center',\n    shadow = true,\n    shadowColor = 'rgba(0, 0, 0, 0.4)',\n    shadowBlur = 10,\n    shadowOffsetX = 0,\n    shadowOffsetY = 2,\n    zIndex = 10,\n    delay = 60,\n    emitter,\n    state = {},\n  }: Record<string, any>,\n) {\n  // Helper function to get current valid elements\n  const getCurrentElements = () => {\n    return elementsof(root) ?? [];\n  };\n\n  const initialElements = getCurrentElements();\n  const valueof = createValueof(initialElements, datum);\n\n  const elementStyle = deepMix(state, {\n    active: {},\n  });\n\n  const useState = createUseState(elementStyle, initialElements);\n  const { updateState, removeState, hasState } = useState(valueof);\n\n  const originalStyles = new Map<DisplayObject, Record<string, any>>();\n  const hoveredElements = new Set<DisplayObject>();\n\n  let out;\n\n  const applyHoverEffect = (element: DisplayObject) => {\n    if (hoveredElements.has(element)) return;\n\n    // Capture current state before applying effect\n    const currentTransform = element.style.transform || '';\n    const currentTransformOrigin = element.style.transformOrigin || '';\n\n    originalStyles.set(element, {\n      transform: currentTransform,\n      transformOrigin: currentTransformOrigin,\n      zIndex: element.style.zIndex || 0,\n      shadowColor: element.style.shadowColor || '',\n      shadowBlur: element.style.shadowBlur || 0,\n      shadowOffsetX: element.style.shadowOffsetX || 0,\n      shadowOffsetY: element.style.shadowOffsetY || 0,\n    });\n\n    // Treat 'none' as empty string since it means no transform\n    const prefix =\n      currentTransform && currentTransform !== 'none' ? currentTransform : '';\n    const scaleTransform = `scale(${scaleFactor})`;\n\n    // Build new transform: append or replace scale in existing transform\n    let newTransform: string;\n    if (prefix && !prefix.includes('scale')) {\n      newTransform = `${prefix} ${scaleTransform}`.trimStart();\n    } else if (prefix && prefix.includes('scale')) {\n      newTransform = prefix\n        .replace(/scale\\([^)]+\\)/g, scaleTransform)\n        .trimStart();\n    } else {\n      newTransform = scaleTransform;\n    }\n\n    // Apply styles\n    element.style.transformOrigin = scaleOrigin;\n    element.style.transform = newTransform;\n    element.style.zIndex = zIndex;\n\n    if (shadow) {\n      element.style.shadowColor = shadowColor;\n      element.style.shadowBlur = shadowBlur;\n      element.style.shadowOffsetX = shadowOffsetX;\n      element.style.shadowOffsetY = shadowOffsetY;\n    }\n\n    hoveredElements.add(element);\n  };\n\n  const removeHoverEffect = (element: DisplayObject) => {\n    const original = originalStyles.get(element);\n    if (!original) return;\n\n    // Restore all original styles\n    element.style.transform = original.transform;\n    element.style.transformOrigin = original.transformOrigin;\n    element.style.zIndex = original.zIndex;\n    element.style.shadowColor = original.shadowColor;\n    element.style.shadowBlur = original.shadowBlur;\n    element.style.shadowOffsetX = original.shadowOffsetX;\n    element.style.shadowOffsetY = original.shadowOffsetY;\n\n    hoveredElements.delete(element);\n    originalStyles.delete(element);\n  };\n\n  const pointerover = (event) => {\n    const { nativeEvent = true } = event;\n    const element = event.target;\n\n    // Get current elements dynamically to handle chart updates (e.g., legend filter)\n    const validElements = getCurrentElements();\n    const currentElementSet = new Set(validElements);\n\n    if (!currentElementSet.has(element)) return;\n    if (out) clearTimeout(out);\n\n    const currentKeyGroup = group(validElements, groupKey);\n    const k = groupKey(element);\n    const currentGroup = currentKeyGroup.get(k);\n\n    if (!currentGroup) return;\n\n    const groupSet = new Set(currentGroup);\n\n    // Remove hover effects from elements not in current group\n    for (const e of validElements) {\n      if (!groupSet.has(e)) {\n        removeState(e, 'active');\n        removeHoverEffect(e);\n      }\n    }\n\n    // Apply hover effects to current group\n    for (const e of currentGroup) {\n      if (!hasState(e, 'active')) updateState(e, 'active');\n      applyHoverEffect(e as DisplayObject);\n    }\n\n    // Emit events\n    if (!nativeEvent) return;\n    emitter.emit('element:hoverscale', {\n      nativeEvent,\n      data: {\n        data: datum(element),\n        group: currentGroup.map(datum),\n      },\n    });\n  };\n\n  const delayReset = () => {\n    if (out) clearTimeout(out);\n    out = setTimeout(() => {\n      reset();\n      out = null;\n    }, delay);\n  };\n\n  const reset = (nativeEvent = true) => {\n    const validElements = getCurrentElements();\n\n    // Remove hover effects and states from all valid elements\n    for (const e of validElements) {\n      removeState(e, 'active');\n      removeHoverEffect(e);\n    }\n\n    hoveredElements.clear();\n\n    if (nativeEvent) {\n      emitter.emit('element:unhoverscale', { nativeEvent });\n    }\n  };\n\n  const pointerout = (event) => {\n    if (delay > 0) delayReset();\n    else reset();\n  };\n\n  const pointerleave = () => {\n    reset();\n  };\n\n  root.addEventListener('pointerover', pointerover);\n  root.addEventListener('pointermove', pointerover);\n  root.addEventListener('pointerout', pointerout);\n  root.addEventListener('pointerleave', pointerleave);\n\n  const onReset = (e) => {\n    const { nativeEvent } = e;\n    if (nativeEvent) return;\n    reset(false);\n  };\n\n  const onHoverScale = (e) => {\n    const { nativeEvent } = e;\n    if (nativeEvent) return;\n\n    const { data } = e.data;\n    const currentElements = getCurrentElements();\n    const element = selectElementByData(currentElements, data, datum);\n    if (!element) return;\n\n    pointerover({ target: element, nativeEvent: false });\n  };\n\n  emitter.on('element:hoverscale', onHoverScale);\n  emitter.on('element:unhoverscale', onReset);\n\n  return () => {\n    root.removeEventListener('pointerover', pointerover);\n    root.removeEventListener('pointermove', pointerover);\n    root.removeEventListener('pointerout', pointerout);\n    root.removeEventListener('pointerleave', pointerleave);\n    emitter.off('element:hoverscale', onHoverScale);\n    emitter.off('element:unhoverscale', onReset);\n\n    // Clean up all hover effects from current elements\n    const validElements = getCurrentElements();\n    for (const e of validElements) {\n      removeHoverEffect(e);\n    }\n    originalStyles.clear();\n    hoveredElements.clear();\n  };\n}\n\nexport function ElementHoverScale({\n  delay,\n  createGroup,\n  scale: scaleFactorParam,\n  scaleOrigin,\n  shadow,\n  shadowColor,\n  shadowBlur,\n  shadowOffsetX,\n  shadowOffsetY,\n  zIndex,\n  ...rest\n}) {\n  return (context, _contexts, emitter) => {\n    const { container, view, options } = context;\n    const plotArea = selectPlotArea(container);\n    const datumof = createDatumof(view);\n\n    return elementHoverScale(plotArea, {\n      elements: selectG2Elements,\n      datum: datumof,\n      groupKey: createGroup\n        ? (element) => createGroup(view)(datumof(element))\n        : undefined,\n      state: mergeState(options, ['active']),\n      scaleFactor: scaleFactorParam,\n      scaleOrigin,\n      shadow,\n      shadowColor,\n      shadowBlur,\n      shadowOffsetX,\n      shadowOffsetY,\n      zIndex,\n      delay,\n      emitter,\n      ...rest,\n    });\n  };\n}\n\nElementHoverScale.props = {\n  reapplyWhenUpdate: true,\n};\n", "import { DisplayObject } from '@antv/g';\nimport { group } from '@antv/vendor/d3-array';\nimport { deepMix } from '@antv/util';\nimport { subObject } from '../utils/helper';\nimport { traverseElements } from '../utils/traverse-elements';\nimport {\n  createValueof,\n  createDatumof,\n  selectG2Elements,\n  renderLink,\n  renderBackground,\n  selectPlotArea,\n  offsetTransform,\n  mergeState,\n  selectElementByData,\n  createXKey,\n  createFindElementByEvent,\n  VALID_FIND_BY_X_MARKS,\n  createUseState,\n} from './utils';\n\n/**\n * Active a group of elements.\n */\nexport function elementSelect(\n  root: DisplayObject,\n  {\n    elements: elementsof, // given the root of chart returns elements to be manipulated\n    datum, // given each element returns the datum of it\n    groupKey = (d) => d, // group elements by specified key\n    regionGroupKey = (d) => d, // how to group elements when click region\n    link = false, // draw link or not\n    single = false, // single select or not\n    multipleSelectHotkey, // hotkey for multi-select mode\n    coordinate,\n    background = false,\n    scale,\n    emitter,\n    state = {},\n    region = false,\n    regionEleFilter = (el) => VALID_FIND_BY_X_MARKS.includes(el.markType),\n  }: Record<string, any>,\n) {\n  const elements = elementsof(root);\n  const elementSet: Set<DisplayObject> = new Set(elements);\n  const findElement = createFindElementByEvent({\n    elementsof,\n    root,\n    coordinate,\n    scale,\n  });\n  const keyGroup = group(elements, groupKey);\n  const regionGroup = group(elements, regionGroupKey);\n\n  const valueof = createValueof(elements, datum);\n\n  const [appendLink, removeLink] = renderLink({\n    link,\n    elements,\n    valueof,\n    coordinate,\n    ...subObject(state.selected, 'link'),\n  });\n\n  const [appendBackground, removeBackground] = renderBackground({\n    document: root.ownerDocument,\n    background,\n    coordinate,\n    scale,\n    valueof,\n    ...subObject(state.selected, 'background'),\n  });\n\n  const elementStyle = deepMix(state, {\n    selected: {\n      ...(state.selected?.offset && {\n        // Apply translate to mock slice out.\n        transform: (...params) => {\n          const value = state.selected.offset(...params);\n          const [, i] = params;\n          return offsetTransform(elements[i], value, coordinate);\n        },\n      }),\n    },\n  });\n\n  const useState = createUseState(elementStyle, elements);\n\n  const { updateState, removeState, hasState } = useState(valueof);\n  let isMultiSelectMode = !single; // \"single\" determines whether to multi-select by default\n  let activeHotkey = null; // Track the currently active hotkey\n\n  const clear = (nativeEvent = true) => {\n    for (const e of elements) {\n      removeState(e, 'selected', 'unselected');\n      removeLink(e);\n      removeBackground(e);\n    }\n    if (nativeEvent) emitter.emit('element:unselect', { nativeEvent: true });\n    return;\n  };\n\n  const singleSelect = ({\n    event,\n    element,\n    nativeEvent = true,\n    filter = (el) => true,\n    groupBy = groupKey,\n    groupMap = keyGroup,\n  }) => {\n    const filteredElements = elements.filter(filter);\n    // Clear states if clicked selected element.\n    if (hasState(element, 'selected')) clear();\n    else {\n      const k = groupBy(element);\n      const group = groupMap.get(k);\n      const groupSet = new Set(group);\n      for (const e of filteredElements) {\n        if (groupSet.has(e)) updateState(e, 'selected');\n        else {\n          updateState(e, 'unselected');\n          removeLink(e);\n        }\n        if (e !== element) removeBackground(e);\n      }\n      appendLink(group);\n      appendBackground(element);\n\n      if (!nativeEvent) return;\n      emitter.emit('element:select', {\n        ...event,\n        nativeEvent,\n        data: {\n          data: [datum(element), ...group.map(datum)],\n        },\n      });\n    }\n  };\n\n  const multipleSelect = ({\n    event,\n    element,\n    nativeEvent = true,\n    filter = (el) => true,\n    groupBy = groupKey,\n    groupMap = keyGroup,\n  }) => {\n    const k = groupBy(element);\n    const group = groupMap.get(k);\n    const groupSet = new Set(group);\n    const filteredElements = elements.filter(filter);\n\n    if (!hasState(element, 'selected')) {\n      const hasSelectedGroup = group.some((e) => hasState(e, 'selected'));\n      for (const e of filteredElements) {\n        if (groupSet.has(e)) updateState(e, 'selected');\n        else if (!hasState(e, 'selected')) updateState(e, 'unselected');\n      }\n      // Append link for each group only once.\n      if (!hasSelectedGroup && link) appendLink(group);\n      appendBackground(element);\n    } else {\n      // If there is no selected elements after resetting this group,\n      // clear the states.\n      const hasSelected = elements.some(\n        (e) => !groupSet.has(e) && hasState(e, 'selected'),\n      );\n      if (!hasSelected) return clear();\n      // If there are still some selected elements after resetting this group,\n      // only remove the link.\n      for (const e of group) {\n        updateState(e, 'unselected');\n        removeLink(e);\n        removeBackground(e);\n      }\n    }\n    if (!nativeEvent) return;\n    emitter.emit('element:select', {\n      ...event,\n      nativeEvent,\n      data: {\n        data: elements.filter((e) => hasState(e, 'selected')).map(datum),\n      },\n    });\n  };\n\n  const isClickElementOrGroup = (element: DisplayObject): boolean => {\n    if (elementSet.has(element)) return true;\n\n    for (const group of elementSet) {\n      const found = traverseElements(group, (el) => el === element);\n      if (found) return true;\n    }\n\n    return false;\n  };\n\n  const getRealElement = (element: DisplayObject): DisplayObject => {\n    if (elementSet.has(element)) return element;\n    for (const group of elementSet) {\n      let match: DisplayObject | null = null;\n      traverseElements(group, (el) => {\n        if (el === element) match = group;\n      });\n      if (match) return match;\n    }\n    return element;\n  };\n\n  const click = (event) => {\n    const { target: element, nativeEvent = true } = event;\n\n    const select = !isMultiSelectMode ? singleSelect : multipleSelect;\n    let el = element;\n    const isClickElement = isClickElementOrGroup(element);\n\n    if (!region || isClickElement) {\n      // Click non-element shape, reset.\n      // Such as the rest of content area(background).\n      if (!isClickElement) return clear();\n      return select({\n        event,\n        element: getRealElement(el),\n        nativeEvent,\n        groupBy: groupKey,\n      });\n    } else {\n      // Click background region area, select elements in the region.\n      // Get element at cursor.x position.\n      el = findElement(event);\n\n      if (!elementSet.has(el)) return clear();\n\n      return select({\n        event,\n        element: el,\n        nativeEvent,\n        filter: regionEleFilter,\n        groupBy: regionGroupKey,\n        groupMap: regionGroup,\n      });\n    }\n  };\n\n  // Handle keyboard events for multi-select mode\n  const hotkeys = Array.isArray(multipleSelectHotkey)\n    ? multipleSelectHotkey\n    : [multipleSelectHotkey];\n  const handleKeyDown = (event) => {\n    if (hotkeys.includes(event.code) && !activeHotkey) {\n      activeHotkey = event.code;\n      isMultiSelectMode = true;\n    }\n  };\n  const handleKeyUp = (event) => {\n    if (event.code === activeHotkey) {\n      activeHotkey = null;\n      isMultiSelectMode = false;\n    }\n  };\n\n  root.addEventListener('click', click);\n  if (multipleSelectHotkey) {\n    // If a hotkey is set, the initial state should be single mode\n    isMultiSelectMode = false;\n    document.addEventListener('keydown', handleKeyDown);\n    document.addEventListener('keyup', handleKeyUp);\n  }\n\n  const onSelect = (e) => {\n    const { nativeEvent, data } = e;\n    if (nativeEvent) return;\n    const selectedData = !isMultiSelectMode ? data.data.slice(0, 1) : data.data;\n    for (const d of selectedData) {\n      const element = selectElementByData(elements, d, datum);\n      click({ target: element, nativeEvent: false });\n    }\n  };\n\n  const onUnSelect = () => {\n    clear(false);\n  };\n\n  emitter.on('element:select', onSelect);\n  emitter.on('element:unselect', onUnSelect);\n\n  return () => {\n    for (const e of elements) removeLink(e);\n    root.removeEventListener('click', click);\n    if (multipleSelectHotkey) {\n      document.removeEventListener('keydown', handleKeyDown);\n      document.removeEventListener('keyup', handleKeyUp);\n    }\n    emitter.off('element:select', onSelect);\n    emitter.off('element:unselect', onUnSelect);\n  };\n}\n\nexport function ElementSelect({\n  createGroup,\n  createRegionGroup,\n  background = false,\n  link = false,\n  ...rest\n}) {\n  return (context, _, emitter) => {\n    const { container, view, options } = context;\n    const { coordinate, scale } = view;\n    const plotArea = selectPlotArea(container);\n    return elementSelect(plotArea, {\n      elements: selectG2Elements,\n      datum: createDatumof(view),\n      groupKey: createGroup ? createGroup(view) : undefined,\n      regionGroupKey: createRegionGroup\n        ? createRegionGroup(view)\n        : createXKey(view),\n      coordinate,\n      scale,\n      state: mergeState(options, [\n        ['selected', background ? {} : { lineWidth: '1', stroke: '#000' }],\n        'unselected',\n      ]),\n      background,\n      link,\n      emitter,\n      ...rest,\n    });\n  };\n}\n\nElementSelect.props = {\n  reapplyWhenUpdate: true,\n};\n", "import { createXKey } from './utils';\nimport { ElementSelect } from './elementSelect';\n\nexport function ElementSelectByX(options) {\n  return ElementSelect({ ...options, createGroup: createXKey });\n}\n\nElementSelectByX.props = {\n  reapplyWhenUpdate: true,\n};\n", "import { createColorKey } from './utils';\nimport { ElementSelect } from './elementSelect';\n\nexport function ElementSelectByColor(options) {\n  return ElementSelect({ ...options, createGroup: createColorKey });\n}\n\nElementSelectByColor.props = {\n  reapplyWhenUpdate: true,\n};\n", "import { Line, Text } from '@antv/g';\nimport { deepMix, throttle } from '@antv/util';\nimport {\n  max,\n  min,\n  rollup,\n  sort,\n  bisectCenter,\n  bisector,\n  group,\n} from '@antv/vendor/d3-array';\nimport { G2Element } from 'utils/selection';\nimport { subObject } from '../utils/helper';\nimport {\n  ELEMENT_CLASS_NAME,\n  G2Mark,\n  G2MarkState,\n  LABEL_CLASS_NAME,\n} from '../runtime';\nimport { selectPlotArea, mousePosition } from './utils';\n\nfunction maybeTransform(options) {\n  const { transform = [] } = options;\n  const normalizeY = transform.find((d) => d.type === 'normalizeY');\n  if (normalizeY) return normalizeY;\n  const newNormalizeY = { type: 'normalizeY' };\n  transform.push(newNormalizeY);\n  options.transform = transform;\n  return newNormalizeY;\n}\n\nfunction markValue(\n  markState: Map<G2Mark, G2MarkState>,\n  markName: string,\n  channels: string[],\n) {\n  const [value] = Array.from(markState.entries())\n    .filter(([mark]) => mark.type === markName)\n    .map(([mark]) => {\n      const { encode } = mark;\n      const channel = (name) => {\n        const channel = encode[name];\n        return [name, channel ? channel.value : undefined];\n      };\n      return Object.fromEntries(channels.map(channel));\n    });\n  return value;\n}\n\n/**\n * @todo Perf\n */\nexport function ChartIndex({\n  wait = 20,\n  leading,\n  trailing = false,\n  labelFormatter = (date) => `${date}`,\n  ...style\n}: Record<string, any>) {\n  return (context) => {\n    const { view, container, update, setState } = context;\n    const { markState, scale, coordinate } = view;\n\n    // Get line mark value, exit if it is not existed.\n    const value = markValue(markState, 'line', ['x', 'y', 'series']);\n    if (!value) return;\n\n    // Prepare channel value.\n    const { y: Y, x: X, series: S = [] } = value;\n    const I = Y.map((_, i) => i);\n    const sortedX: number[] = sort(I.map((i) => X[i]));\n\n    // Prepare shapes.\n    const plotArea = selectPlotArea(container);\n    const lines = container.getElementsByClassName(ELEMENT_CLASS_NAME);\n    const labels = container.getElementsByClassName(\n      LABEL_CLASS_NAME,\n    ) as G2Element[];\n\n    // The format of label key: `${elementKey}-index`,\n    // group labels by elementKey.\n    const keyofLabel = (d) => d.__data__.key.split('-')[0];\n    const keyLabels = group(labels, keyofLabel);\n\n    const rule = new Line({\n      style: {\n        x1: 0,\n        y1: 0,\n        x2: 0,\n        y2: plotArea.getAttribute('height'),\n        stroke: 'black',\n        lineWidth: 1,\n        ...subObject(style, 'rule'),\n      },\n    });\n    const text = new Text({\n      style: {\n        x: 0,\n        y: plotArea.getAttribute('height'),\n        text: '',\n        fontSize: 10,\n        ...subObject(style, 'label'),\n      },\n    });\n    rule.append(text);\n    plotArea.appendChild(rule);\n\n    // Get the closet date to the rule.\n    const dateByFocus = (coordinate, scaleX, focus) => {\n      const [normalizedX] = coordinate.invert(focus);\n      const date = scaleX.invert(normalizedX);\n      return sortedX[bisectCenter(sortedX, date)];\n    };\n\n    // Update rule and label content.\n    const updateRule = (focus, date) => {\n      rule.setAttribute('x1', focus[0]);\n      rule.setAttribute('x2', focus[0]);\n      text.setAttribute('text', labelFormatter(date));\n    };\n\n    // Store the new inner state alter rerender the view.\n    let newView;\n\n    // Rerender the view to update basis for each line.\n    const updateBasisByRerender = async (focus) => {\n      // Find the closetDate to the rule.\n      const { x: scaleX } = scale;\n      const date = dateByFocus(coordinate, scaleX, focus);\n\n      updateRule(focus, date);\n\n      setState('chartIndex', (options) => {\n        // Clone options and get line mark.\n        const clonedOptions = deepMix({}, options);\n        const lineMark = clonedOptions.marks.find((d) => d.type === 'line');\n\n        // Update domain of y scale for the line mark.\n        const r = (I: number[]) => max(I, (i) => +Y[i]) / min(I, (i) => +Y[i]);\n        const k = max(rollup(I, r, (i) => S[i]).values());\n        const domainY = [1 / k, k];\n        deepMix(lineMark, {\n          scale: { y: { domain: domainY } },\n        });\n        // Update normalize options.\n        const normalizeY = maybeTransform(lineMark);\n        normalizeY.groupBy = 'color';\n        normalizeY.basis = (I, Y) => {\n          const i = I[bisector((i) => X[+i]).center(I, date)];\n          return Y[i];\n        };\n        // Disable animation.\n        for (const mark of clonedOptions.marks) mark.animate = false;\n        return clonedOptions;\n      });\n\n      const newState = await update('chartIndex');\n      newView = newState.view;\n    };\n\n    // Only apply translate to update basis for each line.\n    // If performance is ok, there is no need to use this\n    // strategy to update basis.\n    const updateBasisByTranslate = (focus) => {\n      // Find the closetDate to the rule.\n      const { scale, coordinate } = newView;\n      const { x: scaleX, y: scaleY } = scale;\n      const date = dateByFocus(coordinate, scaleX, focus);\n\n      updateRule(focus, date);\n\n      // Translate mark and label for better performance.\n      for (const line of lines) {\n        // Compute transform in y direction.\n        const { seriesIndex: SI, key } = line.__data__;\n        const i = SI[bisector((i) => X[+i]).center(SI, date)];\n        const p0 = [0, scaleY.map(1)]; // basis point\n        const p1 = [0, scaleY.map(Y[i] / Y[SI[0]])];\n        const [, y0] = coordinate.map(p0);\n        const [, y1] = coordinate.map(p1);\n        const dy = y0 - y1;\n        line.setAttribute('transform', `translate(0, ${dy})`);\n\n        // Update line and related label.\n        const labels = keyLabels.get(key) || [];\n        for (const label of labels) {\n          // @todo Replace with style.transform.\n          // It now has unexpected behavior.\n          label.setAttribute('dy', dy);\n        }\n      }\n    };\n\n    const updateBasis = throttle(\n      (event) => {\n        const focus = mousePosition(plotArea, event);\n        if (!focus) return;\n        updateBasisByTranslate(focus);\n      },\n      wait,\n      { leading, trailing },\n    ) as (...args: any[]) => void;\n\n    updateBasisByRerender([0, 0]);\n\n    plotArea.addEventListener('pointerenter', updateBasis);\n    plotArea.addEventListener('pointermove', updateBasis);\n    plotArea.addEventListener('pointerleave', updateBasis);\n\n    return () => {\n      rule.remove();\n      plotArea.removeEventListener('pointerenter', updateBasis);\n      plotArea.removeEventListener('pointermove', updateBasis);\n      plotArea.removeEventListener('pointerleave', updateBasis);\n    };\n  };\n}\n\nChartIndex.props = {\n  reapplyWhenUpdate: true,\n};\n", "import { throttle, deepMix } from '@antv/util';\nimport { selectPlotArea, mousePosition } from './utils';\n\nfunction maybeCoordinate(options) {\n  const { coordinate = {} } = options;\n  const { transform = [] } = coordinate;\n  const fisheye = transform.find((d) => d.type === 'fisheye');\n  if (fisheye) return fisheye;\n  const newFisheye = { type: 'fisheye' };\n  transform.push(newFisheye);\n  coordinate.transform = transform;\n  options.coordinate = coordinate;\n  return newFisheye;\n}\n\n/**\n * @todo Bind abstract data or data index.\n */\nexport function Fisheye({\n  wait = 30,\n  leading,\n  trailing = false,\n}: Record<string, any>) {\n  return (context) => {\n    const { options, update, setState, container } = context;\n    const plotArea = selectPlotArea(container);\n\n    const updateFocus = throttle(\n      (event) => {\n        const focus = mousePosition(plotArea, event);\n        if (!focus) {\n          setState('fisheye');\n          update();\n          return;\n        }\n        setState('fisheye', (options) => {\n          // Clone options and mutate it.\n          // Disable animation.\n          const clonedOptions = deepMix({}, options, {\n            interaction: { tooltip: { preserve: true } },\n          });\n          for (const mark of clonedOptions.marks) mark.animate = false;\n          const [x, y] = focus;\n          const fisheye = maybeCoordinate(clonedOptions);\n          fisheye.focusX = x;\n          fisheye.focusY = y;\n          fisheye.visual = true;\n          return clonedOptions;\n        });\n        update();\n      },\n      wait,\n      { leading, trailing },\n    ) as (...args: any[]) => void;\n\n    // Bind events.\n    plotArea.addEventListener('pointerenter', updateFocus);\n    plotArea.addEventListener('pointermove', updateFocus);\n    plotArea.addEventListener('pointerleave', updateFocus);\n\n    return () => {\n      plotArea.removeEventListener('pointerenter', updateFocus);\n      plotArea.removeEventListener('pointermove', updateFocus);\n      plotArea.removeEventListener('pointerleave', updateFocus);\n    };\n  };\n}\n", "import { Circle, DisplayObject, IElement, Line } from '@antv/g';\nimport { sort, group, mean, bisector, minIndex } from '@antv/vendor/d3-array';\nimport { deepMix, lowerFirst, set, throttle, last, isNumber } from '@antv/util';\nimport { Tooltip as TooltipComponent } from '@antv/component';\nimport {\n  defined,\n  groupNameOf,\n  subObject,\n  dataOf,\n  isHeatmap,\n} from '../utils/helper';\nimport { isTranspose, isPolar } from '../utils/coordinate';\nimport { angle, sub, dist } from '../utils/vector';\nimport { invert } from '../utils/scale';\nimport { BBox } from '../runtime';\nimport { CALLBACK_ITEM_SYMBOL } from '../runtime/transform';\nimport { G2_CLASS_PREFIX, g2Selector } from '../component/constant';\nimport {\n  selectG2Elements,\n  createXKey,\n  selectPlotArea,\n  mousePosition,\n  selectFacetG2Elements,\n  createDatumof,\n  selectElementByData,\n  bboxOf,\n  maybeRoot,\n} from './utils';\n\nconst LOCKED_SYMBOL = 'tooltipLocked';\n\nfunction getContainer(\n  group: IElement,\n  mount?: string | HTMLElement,\n): HTMLElement {\n  if (mount) {\n    return typeof mount === 'string' ? document.querySelector(mount) : mount;\n  }\n  const view = group.ownerDocument?.defaultView;\n  if (!view) return;\n  const canvas: any = view.getContextService().getDomElement();\n  return canvas.parentElement as unknown as HTMLElement;\n}\n\nfunction getBounding(root: DisplayObject): BBox {\n  const bbox = root.getRenderBounds();\n  const {\n    min: [x1, y1],\n    max: [x2, y2],\n  } = bbox;\n  return {\n    x: x1,\n    y: y1,\n    width: x2 - x1,\n    height: y2 - y1,\n  };\n}\n\nfunction getContainerOffset(\n  container1: HTMLElement,\n  container2: HTMLElement,\n): { x: number; y: number } {\n  const r1 = container1.getBoundingClientRect();\n  const r2 = container2.getBoundingClientRect();\n  return {\n    x: r1.x - r2.x,\n    y: r1.y - r2.y,\n  };\n}\n\nfunction createTooltip(\n  container: HTMLElement,\n  x0,\n  y0,\n  position,\n  enterable,\n  bounding,\n  containerOffset,\n  css = {},\n  offset: [number, number] = [10, 10],\n) {\n  const defaults = {\n    [g2Selector('tooltip')]: {},\n    [g2Selector('tooltip-title')]: {\n      overflow: 'hidden',\n      'white-space': 'nowrap',\n      'text-overflow': 'ellipsis',\n    },\n  };\n  const tooltipElement = new TooltipComponent({\n    className: 'tooltip',\n    style: {\n      x: x0,\n      y: y0,\n      container: containerOffset,\n      data: [],\n      bounding,\n      position,\n      enterable,\n      title: '',\n      offset,\n      template: {\n        prefixCls: G2_CLASS_PREFIX,\n      },\n      style: deepMix(defaults, css),\n    },\n  });\n  container.appendChild(tooltipElement.HTMLTooltipElement);\n  return tooltipElement;\n}\n\nfunction showTooltip({\n  root,\n  data,\n  x,\n  y,\n  render,\n  event,\n  single,\n  position = 'right-bottom',\n  enterable = false,\n  css,\n  mount,\n  bounding,\n  offset,\n}) {\n  const container = getContainer(root, mount);\n  const canvasContainer = getContainer(root);\n  // All the views share the same tooltip.\n  const parent = single ? canvasContainer : root;\n  const b = bounding || getBounding(root);\n  const containerOffset = getContainerOffset(canvasContainer, container);\n  const {\n    tooltipElement = createTooltip(\n      container,\n      x,\n      y,\n      position,\n      enterable,\n      b,\n      containerOffset,\n      css,\n      offset,\n    ),\n  } = parent as any;\n  const { items, title = '' } = data;\n  tooltipElement.update({\n    x,\n    y,\n    data: items.map((item) => ({\n      ...item,\n      value: !item.value && item.value !== 0 ? '' : item.value,\n    })),\n    title,\n    position,\n    enterable,\n    container: containerOffset,\n    ...(render !== undefined && {\n      content: render(event, { items, title }),\n    }),\n  });\n  parent.tooltipElement = tooltipElement;\n}\n\nfunction hideTooltip({\n  root,\n  single,\n  emitter,\n  nativeEvent = true,\n  event = null,\n}) {\n  if (nativeEvent) {\n    emitter.emit('tooltip:hide', { nativeEvent });\n  }\n  const container = getContainer(root);\n  const parent = single ? container : root;\n  const { tooltipElement } = parent;\n  if (tooltipElement) {\n    // Must be clientX, clientY.\n    tooltipElement.hide(event?.clientX, event?.clientY);\n  }\n  hideRuleY(root);\n  hideRuleX(root);\n  hideMarker(root);\n}\n\nfunction destroyTooltip({ root, single }) {\n  const container = getContainer(root);\n  const parent = single ? container : root;\n  if (!parent) return;\n  const { tooltipElement } = parent;\n  if (tooltipElement) {\n    tooltipElement.destroy();\n    parent.tooltipElement = undefined;\n  }\n  hideRuleY(root);\n  hideRuleX(root);\n  hideMarker(root);\n}\n\nfunction showUndefined(item) {\n  const { value } = item;\n  return { ...item, value: value === undefined ? 'undefined' : value };\n}\n\nfunction heatmapItem(element) {\n  const { __data__: datum } = element;\n  const { title, items = [] } = datum;\n\n  // Check if there are user-defined items using the existing CALLBACK_ITEM_SYMBOL\n  const hasCustomItems = items.some((item) => CALLBACK_ITEM_SYMBOL in item);\n\n  if (hasCustomItems) {\n    // User has defined custom items, pass them through as is\n    const newItems = items\n      .filter(defined)\n      .map(({ color = itemColorOf(element), ...item }) => ({\n        ...item,\n        color,\n      }))\n      .map(showUndefined);\n    return {\n      ...(title && { title }),\n      items: newItems,\n    };\n  }\n\n  // No user-defined items, use special logic for heatmap\n  const normalizedX = datum?.normalized?.x ?? 0;\n  const originalDatum = element.parentNode?.__data__;\n  const encode = originalDatum?.encode ?? {};\n  const { x = {}, y = {}, color = {} } = encode;\n  const { value: vx = [] } = x;\n  const { value: vy = [] } = y;\n  const { value: vc = [] } = color;\n  const index = Math.min(Math.round(vx.length * normalizedX), vx.length - 1);\n\n  return {\n    title: `${vx[index]}, ${vy[index]}`,\n    items: [\n      {\n        name: color.field ?? 'value',\n        value: vc[index],\n        color: element.style?.fill || element.getAttribute?.('color') || '#000',\n      },\n    ],\n  };\n}\n\nfunction singleItem(element) {\n  const { __data__: datum } = element;\n  if (isHeatmap(element)) return heatmapItem(element);\n  const { title, items = [] } = datum;\n  const newItems = items\n    .filter(defined)\n    .map(({ color = itemColorOf(element), ...item }) => ({\n      ...item,\n      color,\n    }))\n    .map(showUndefined);\n  return {\n    ...(title && { title }),\n    items: newItems,\n  };\n}\n\nfunction itemColorOf(element) {\n  const fill = element.getAttribute('fill');\n  const stroke = element.getAttribute('stroke');\n  const { __data__: datum } = element;\n  const { color = fill && fill !== 'transparent' ? fill : stroke } = datum;\n  return color;\n}\n\nfunction unique(items, key = (d) => d) {\n  const valueName = new Map(items.map((d) => [key(d), d]));\n  return Array.from(valueName.values());\n}\n\nfunction groupItems(\n  elements,\n  scale,\n  groupName,\n  data = elements.map((d) => d['__data__']),\n  theme: Record<string, any> = {},\n) {\n  const key = (d) => (d instanceof Date ? +d : d);\n  const T = unique(\n    data.map((d) => d.title),\n    key,\n  ).filter(defined);\n  const newItems = data\n    .flatMap((datum, i) => {\n      // Fix: Get the corresponding element from datum instead of using index i\n      // When data and elements don't correspond one-to-one, using index will cause color errors\n      const element = datum.element || elements[i];\n      const { items = [], title } = datum;\n      const definedItems = items.filter(defined);\n\n      // If there is only one item, use groupName as title by default.\n      const useGroupName =\n        groupName !== undefined ? groupName : items.length <= 1 ? true : false;\n\n      return definedItems.map(\n        ({ color = itemColorOf(element) || theme.color, name, ...item }) => {\n          const groupName = groupNameOf(scale, datum);\n          // callback's priority is higher than groupName.\n          const name1 =\n            useGroupName && !(CALLBACK_ITEM_SYMBOL in item)\n              ? groupName || name\n              : name || groupName;\n\n          return {\n            ...item,\n            color,\n            name: name1 || title,\n          };\n        },\n      );\n    })\n    .map(showUndefined);\n  return {\n    ...(T.length > 0 && { title: T.join(',') }),\n    items: unique(\n      newItems,\n      (d) => `(${key(d.name)}, ${key(d.value)}, ${key(d.color)})`,\n    ),\n  };\n}\n\nfunction updateRuleX(\n  root,\n  points,\n  mouse,\n  {\n    plotWidth,\n    plotHeight,\n    mainWidth,\n    mainHeight,\n    startX,\n    startY,\n    transposed,\n    polar,\n    insetLeft,\n    insetTop,\n    ...rest\n  },\n) {\n  const defaults = {\n    lineWidth: 1,\n    stroke: '#1b1e23',\n    strokeOpacity: 0.5,\n    ...rest,\n  };\n\n  const createCircle = (cx, cy, r) => {\n    const circle = new Circle({\n      style: {\n        cx,\n        cy,\n        r,\n        ...defaults,\n      },\n    });\n    root.appendChild(circle);\n    return circle;\n  };\n\n  const createLine = (x1, x2, y1, y2) => {\n    const line = new Line({\n      style: {\n        x1,\n        x2,\n        y1,\n        y2,\n        ...defaults,\n      },\n    });\n    root.appendChild(line);\n    return line;\n  };\n\n  const minDistPoint = (mouse, points) => {\n    // only one point do not need compute\n    if (points.length === 1) {\n      return points[0];\n    }\n    const dists = points.map((p) => dist(p, mouse));\n    const minDistIndex = minIndex(dists, (d) => d);\n    return points[minDistIndex];\n  };\n\n  const target = minDistPoint(mouse, points);\n\n  const pointsOf = () => {\n    if (transposed)\n      return [\n        startX + target[0],\n        startX + target[0],\n        startY,\n        startY + plotHeight,\n      ];\n    return [startX, startX + plotWidth, target[1] + startY, target[1] + startY];\n  };\n\n  const pointsOfPolar = () => {\n    const cx = startX + insetLeft + mainWidth / 2;\n    const cy = startY + insetTop + mainHeight / 2;\n    const cdist = dist([cx, cy], target);\n    return [cx, cy, cdist];\n  };\n\n  if (polar) {\n    const [cx, cy, r] = pointsOfPolar();\n    const ruleX = root.ruleX || createCircle(cx, cy, r);\n    ruleX.style.cx = cx;\n    ruleX.style.cy = cy;\n    ruleX.style.r = r;\n    root.ruleX = ruleX;\n  } else {\n    const [x1, x2, y1, y2] = pointsOf();\n    const ruleX = root.ruleX || createLine(x1, x2, y1, y2);\n    ruleX.style.x1 = x1;\n    ruleX.style.x2 = x2;\n    ruleX.style.y1 = y1;\n    ruleX.style.y2 = y2;\n    root.ruleX = ruleX;\n  }\n}\n\nfunction updateRuleY(\n  root,\n  points,\n  {\n    plotWidth,\n    plotHeight,\n    mainWidth,\n    mainHeight,\n    startX,\n    startY,\n    transposed,\n    polar,\n    insetLeft,\n    insetTop,\n    ...rest\n  },\n) {\n  const defaults = {\n    lineWidth: 1,\n    stroke: '#1b1e23',\n    strokeOpacity: 0.5,\n    ...rest,\n  };\n\n  const Y = points.map((p) => p[1]);\n  const X = points.map((p) => p[0]);\n  const y = mean(Y);\n  const x = mean(X);\n\n  const pointsOf = () => {\n    if (polar) {\n      const r = Math.min(mainWidth, mainHeight) / 2;\n      const cx = startX + insetLeft + mainWidth / 2;\n      const cy = startY + insetTop + mainHeight / 2;\n      const a = angle(sub([x, y], [cx, cy]));\n      const x0 = cx + r * Math.cos(a);\n      const y0 = cy + r * Math.sin(a);\n      return [cx, x0, cy, y0];\n    }\n    if (transposed) return [startX, startX + plotWidth, y + startY, y + startY];\n    return [x + startX, x + startX, startY, startY + plotHeight];\n  };\n\n  const [x1, x2, y1, y2] = pointsOf();\n  const createLine = () => {\n    const line = new Line({\n      style: {\n        x1,\n        x2,\n        y1,\n        y2,\n        ...defaults,\n      },\n    });\n\n    root.appendChild(line);\n    return line;\n  };\n  // Only update rule with defined series elements.\n  if (X.length > 0) {\n    const ruleY = root.ruleY || createLine();\n    ruleY.style.x1 = x1;\n    ruleY.style.x2 = x2;\n    ruleY.style.y1 = y1;\n    ruleY.style.y2 = y2;\n    root.ruleY = ruleY;\n  }\n}\n\nfunction hideRuleY(root) {\n  if (root.ruleY) {\n    root.ruleY.remove();\n    root.ruleY = undefined;\n  }\n}\n\nfunction hideRuleX(root) {\n  if (root.ruleX) {\n    root.ruleX.remove();\n    root.ruleX = undefined;\n  }\n}\n\nfunction updateMarker(root, { data, style, theme }) {\n  if (root.markers) root.markers.forEach((d) => d.remove());\n  const { type = '' } = style;\n\n  const markers = data\n    .filter((d) => {\n      const [{ x, y }] = d;\n      return defined(x) && defined(y);\n    })\n    .map((d) => {\n      const [{ color, element }, point] = d;\n      const originColor =\n        color || // encode value\n        element.style.fill ||\n        element.style.stroke ||\n        theme.color;\n      const fill = type === 'hollow' ? 'transparent' : originColor;\n      const stroke = type === 'hollow' ? originColor : '#fff';\n      const shape = new Circle({\n        className: `${G2_CLASS_PREFIX}tooltip-marker`,\n        style: {\n          cx: point[0],\n          cy: point[1],\n          fill,\n          r: 4,\n          stroke,\n          lineWidth: 2,\n          // Prevents blocking clicks on elements behind.\n          pointerEvents: 'none',\n          ...style,\n        },\n      });\n      return shape;\n    });\n  for (const marker of markers) root.appendChild(marker);\n  root.markers = markers;\n}\n\nfunction hideMarker(root) {\n  if (root.markers) {\n    root.markers.forEach((d) => d.remove());\n    root.markers = [];\n  }\n}\n\nfunction interactionKeyof(markState, key) {\n  return Array.from(markState.values()).some(\n    // @ts-ignore\n    (d) => d.interaction?.[key],\n  );\n}\n\nexport function maybeValue(specified, defaults) {\n  return specified === undefined ? defaults : specified;\n}\n\nfunction isEmptyTooltipData(data) {\n  const { title, items } = data;\n  if (items.length === 0 && title === undefined) return true;\n  return false;\n}\n\nfunction hasSeries(markState): boolean {\n  return Array.from(markState.values()).some(\n    // @ts-ignore\n    (d) => d.interaction?.seriesTooltip && d.tooltip,\n  );\n}\n\nfunction normalizedPosition(coordinate, position) {\n  const {\n    innerWidth,\n    innerHeight,\n    marginLeft,\n    paddingLeft,\n    insetLeft,\n    marginTop,\n    paddingTop,\n    insetTop,\n  } = coordinate.getOptions();\n  return {\n    x: (position.x - marginLeft - paddingLeft - insetLeft) / innerWidth,\n    y: (position.y - marginTop - paddingTop - insetTop) / innerHeight,\n  };\n}\n\n/**\n * Determine whether the band widths occupied by different categories are the same.\n */\nfunction equalBandWidth(scale) {\n  const { x } = scale;\n  if (!x || !x.valueBandWidth) return true;\n  const { valueBandWidth } = x;\n  if (isNumber(valueBandWidth)) return true;\n  return new Set(valueBandWidth.values()).size === 1;\n}\n\n/**\n * Get the index of the element closest to the abstractX\n */\nfunction findNearestElementIndex(scale, abstractX): number {\n  const { adjustedRange, valueBandWidth, valueStep } = scale;\n  const values: number[] = Array.from(valueBandWidth.values());\n  const steps: number[] = Array.from(valueStep.values());\n  const ranges = adjustedRange.map((v, i) => {\n    const halfStep = (steps[i] - values[i]) / 2;\n    return [v - halfStep, v + values[i] + halfStep];\n  });\n  const index = ranges.findIndex(\n    ([start, end]) => start <= abstractX && abstractX <= end,\n  );\n  if (index !== -1) return index;\n  return abstractX > 0.5 ? adjustedRange.length - 1 : 0;\n}\n\n/**\n * Finds a single element based on the mouse event in a non-series context (e.g., single item tooltip).\n * @param root - The root display object of the chart.\n * @param event - The mouse event object (e.g., pointermove, pointerdown).\n * @param elements - Array of chart elements to search within.\n * @param coordinate - The coordinate system of the chart (e.g., Cartesian, polar).\n * @param scale - The scale configurations (e.g., x, series scales).\n * @param shared - Whether the tooltip is shared among multiple elements (e.g., grouped bars).\n * @returns The matched display object or `undefined` if no element is found.\n * @description\n * - Handles bar charts by sorting elements and using bisector search for efficient lookup.\n * - For non-bar charts, directly finds the target element from the event's target.\n * - Adjusts for bar spacing in grouped charts when `shared` is false.\n */\nexport function findSingleElement({\n  root,\n  event,\n  elements = [],\n  coordinate,\n  scale,\n  shared,\n}): DisplayObject | undefined {\n  const inInterval = (d) => d.markType === 'interval';\n  const isBar = elements.every(inInterval) && !isPolar(coordinate);\n  const scaleX = scale.x;\n  const isEqualWidth = equalBandWidth(scale);\n  const scaleSeries = scale.series;\n  const bandWidth = scaleX?.getBandWidth?.() ?? 0;\n  const xof =\n    scaleSeries && scaleSeries.valueBandWidth\n      ? (d) => {\n          const seriesCount = Math.round(1 / scaleSeries.valueBandWidth);\n          return (\n            d.__data__.x +\n            d.__data__.series * bandWidth +\n            bandWidth / (seriesCount * 2)\n          );\n        }\n      : (d) => d.__data__.x + bandWidth / 2;\n\n  // Sort for bisector search.\n  if (isBar) elements.sort((a, b) => xof(a) - xof(b));\n  const findElementByTarget = (event) => {\n    const { target = last(elements) } = event;\n    return maybeRoot(target, (node) => {\n      if (!node.classList) return false;\n      if (isHeatmap(node)) {\n        set(\n          node,\n          '__data__.normalized',\n          normalizedPosition(coordinate, {\n            x: event.offsetX,\n            y: event.offsetY,\n          }),\n        );\n      }\n      return node.classList.includes('element');\n    });\n  };\n\n  const element = isBar\n    ? (event) => {\n        const mouse = mousePosition(root, event);\n        if (!mouse) return;\n        const [abstractX] = coordinate.invert(mouse);\n        const search = bisector(xof).center;\n        const i = isEqualWidth\n          ? search(elements, abstractX)\n          : findNearestElementIndex(scaleX, abstractX);\n        const target = elements[i];\n\n        if (!shared) {\n          // For grouped bar chart without shared options.\n          const isGrouped = elements.find(\n            (d) => d !== target && xof(d) === xof(target),\n          );\n          if (isGrouped) return findElementByTarget(event) || isGrouped;\n        }\n        return target;\n      }\n    : findElementByTarget;\n\n  return element(event);\n}\n\n/**\n * Finds series-related elements and data based on the mouse event for series tooltips.\n * @param root - The root display object of the chart.\n * @param event - The mouse event object (e.g., pointermove, pointerdown).\n * @param elements - Array of chart elements to search within.\n * @param coordinate - The coordinate system of the chart (e.g., Cartesian, polar).\n * @param scale - The scale configurations (e.g., x, series scales).\n * @param startX - The starting X position of the plot area.\n * @param startY - The starting Y position of the plot area.\n * @returns An object containing:\n * - `selectedElements`: Matched display objects (series and item elements).\n * - `selectedData`: Corresponding data records of the selected elements.\n * - `filteredSeriesData`: Filtered series data closest to the mouse focus.\n * - `abstractX`: A function to convert mouse coordinates to abstract X values.\n * @description\n * - Splits elements into series and item elements for targeted searching.\n * - Handles bar charts and band scales using bisector search and coordinate inversion.\n * - Sorts elements to ensure correct visual ordering (top-to-bottom or right-to-left in transposed mode).\n * - Filters and groups data to provide accurate tooltip information for series.\n */\nexport function findSeriesElement({\n  root,\n  event,\n  elements,\n  coordinate,\n  scale,\n  startX,\n  startY,\n}): {\n  selectedElements: DisplayObject[];\n  selectedData: Record<string, any>[];\n  filteredSeriesData: any[];\n  abstractX: (number) => number;\n} {\n  const transposed = isTranspose(coordinate);\n\n  // Split elements into series elements and item elements.\n  const seriesElements = [];\n  const itemElements = [];\n  for (const element of elements) {\n    const { __data__: data } = element;\n    const { seriesX, title, items } = data;\n    if (seriesX) seriesElements.push(element);\n    else if (title || items) itemElements.push(element);\n  }\n  const inInterval = (d) => d.markType === 'interval';\n  const isBar =\n    itemElements.length &&\n    itemElements.every(inInterval) &&\n    !isPolar(coordinate);\n  const xof = (d) => d.__data__.x;\n\n  // For band scale x, find the closest series element to focus,\n  // useful for interval + line mark.\n  const isBandScale = !!scale.x.getBandWidth;\n  const closest = isBandScale && itemElements.length > 0;\n\n  // Sorted elements from top to bottom visually,\n  // or from right to left in transpose coordinate.\n  seriesElements.sort((a, b) => {\n    const index = transposed ? 0 : 1;\n    const minY = (d) => d.getBounds().min[index];\n    return transposed ? minY(b) - minY(a) : minY(a) - minY(b);\n  });\n\n  const extent = (d) => {\n    const index = transposed ? 1 : 0;\n    const { min, max } = d.getLocalBounds();\n    return sort([min[index], max[index]]);\n  };\n\n  // Sort itemElements for bisector search.\n  if (isBar) elements.sort((a, b) => xof(a) - xof(b));\n  else {\n    itemElements.sort((a, b) => {\n      const [minA, maxA] = extent(a);\n      const [minB, maxB] = extent(b);\n      const midA = (minA + maxA) / 2;\n      const midB = (minB + maxB) / 2;\n      return transposed ? midB - midA : midA - midB;\n    });\n  }\n\n  // Get sortedIndex and X for each series elements\n  const elementSortedX = new Map(\n    seriesElements.map((element) => {\n      const { __data__: data } = element;\n      const { seriesX } = data;\n      const seriesIndex = seriesX.map((_, i) => i);\n      const sortedIndex = sort(seriesIndex, (i) => seriesX[+i]);\n      return [element, [sortedIndex, seriesX]];\n    }),\n  );\n\n  const { x: scaleX } = scale;\n\n  // Apply offset for band scale x.\n  const offsetX = scaleX?.getBandWidth ? scaleX.getBandWidth() / 2 : 0;\n\n  const abstractX = (focus) => {\n    const [normalizedX] = coordinate.invert(focus);\n    return normalizedX - offsetX;\n  };\n\n  const indexByFocus = (event, focus, I, X) => {\n    // _x is from emit event, to find the right element.\n    const { _x } = event;\n    const finalX = _x !== undefined ? scaleX.map(_x) : abstractX(focus);\n    const DX = X.filter(defined);\n    const [minX, maxX] = sort([DX[0], DX[DX.length - 1]]);\n    // If only has one element(minX == maxX), show tooltip when hover whole chart\n    const isOnlyOneElement = minX === maxX;\n\n    // If closest is true, always find at least one element.\n    // Otherwise, skip element out of plot area.\n    if (!closest && (finalX < minX || finalX > maxX) && !isOnlyOneElement)\n      return null;\n    const search = bisector((i) => X[+i]).center;\n    const i = search(I, finalX);\n    return I[i];\n  };\n\n  const elementsByFocus = isBar\n    ? (focus, elements) => {\n        const search = bisector(xof).center;\n        const i = search(elements, abstractX(focus));\n        const find = elements[i];\n        const groups = group(elements, xof);\n        const selected = groups.get(xof(find));\n        return selected;\n      }\n    : (focus, elements) => {\n        const index = transposed ? 1 : 0;\n        const x = focus[index];\n        const filtered = elements.filter((element) => {\n          const [min, max] = extent(element);\n          return x >= min && x <= max;\n        });\n        // If closet is true, always find at least one element.\n        if (!closest || filtered.length > 0) return filtered;\n\n        // Search the closet element to the focus.\n        const search = bisector((element) => {\n          const [min, max] = extent(element);\n          return (min + max) / 2;\n        }).center;\n        const i = search(elements, x);\n        return [elements[i]].filter(defined);\n      };\n\n  const seriesData = (element, index) => {\n    const { __data__: data } = element;\n    return Object.fromEntries(\n      Object.entries(data)\n        .filter(([key]) => key.startsWith('series') && key !== 'series')\n        .map(([key, V]) => {\n          const d = V[index];\n          return [lowerFirst(key.replace('series', '')), d];\n        }),\n    );\n  };\n  const mouse = mousePosition(root, event);\n  if (!mouse) return;\n  const focus = [mouse[0] - startX, mouse[1] - startY];\n  if (!focus) return;\n  // Get selected item element.\n  const selectedItems = elementsByFocus(focus, itemElements);\n\n  // Get selected data item from both series element and item element.\n  const selectedSeriesElements = [];\n  const selectedSeriesData = [];\n  for (const element of seriesElements) {\n    const [sortedIndex, X] = elementSortedX.get(element);\n    const index = indexByFocus(event, focus, sortedIndex, X);\n    if (index !== null) {\n      selectedSeriesElements.push(element);\n      const d = seriesData(element, index);\n      const { x, y } = d;\n      const p = coordinate.map([(x || 0) + offsetX, y || 0]);\n      selectedSeriesData.push([{ ...d, element }, p] as const);\n    }\n  }\n\n  // Filter selectedSeriesData with different x,\n  // make sure there is only one x closest to focusX.\n  const SX = Array.from(new Set(selectedSeriesData.map((d) => d[0].x)));\n  const closestX = SX[minIndex(SX, (x) => Math.abs(x - abstractX(focus)))];\n  const filteredSeriesData = selectedSeriesData.filter(\n    (d) => d[0].x === closestX,\n  );\n\n  const selectedData = [\n    ...filteredSeriesData.map((d) => d[0]),\n    ...selectedItems.map((d) => d.__data__),\n  ];\n\n  // Get the displayed tooltip data.\n  const selectedElements = [...selectedSeriesElements, ...selectedItems];\n\n  return { selectedElements, selectedData, filteredSeriesData, abstractX };\n}\n\n/**\n * Show tooltip for series item.\n */\nexport function seriesTooltip(\n  root: DisplayObject,\n  {\n    elements: elementsof,\n    sort: sortFunction,\n    filter: filterFunction,\n    scale,\n    coordinate,\n    crosshairs,\n    crosshairsX,\n    crosshairsY,\n    render,\n    groupName,\n    emitter,\n    wait = 50,\n    leading = true,\n    trailing = false,\n    startX = 0,\n    startY = 0,\n    body = true,\n    single = true,\n    position,\n    enterable,\n    mount,\n    bounding,\n    theme,\n    offset,\n    disableNative = false,\n    marker = true,\n    preserve = false,\n    style: _style = {},\n    css = {},\n    clickLock = false,\n    disableAutoHide = false,\n    ...rest\n  }: Record<string, any>,\n) {\n  const elements = elementsof(root);\n  const style = deepMix(_style, rest);\n  const polar = isPolar(coordinate);\n  const transposed = isTranspose(coordinate);\n  const {\n    innerWidth: plotWidth,\n    innerHeight: plotHeight,\n    width: mainWidth,\n    height: mainHeight,\n    insetLeft,\n    insetTop,\n  } = coordinate.getOptions();\n  const update = throttle(\n    (event) => {\n      if (clickLock && root.getAttribute(LOCKED_SYMBOL)) return;\n      const mouse = mousePosition(root, event);\n      if (!mouse) return;\n      const bbox = bboxOf(root);\n      const x = bbox.min[0];\n      const y = bbox.min[1];\n      const { selectedElements, selectedData, filteredSeriesData, abstractX } =\n        findSeriesElement({\n          root,\n          event,\n          elements,\n          coordinate,\n          scale,\n          startX,\n          startY,\n        });\n      const tooltipData = groupItems(\n        selectedElements,\n        scale,\n        groupName,\n        selectedData,\n        theme,\n      );\n\n      // Sort items and filter items.\n      if (sortFunction) {\n        tooltipData.items.sort((a, b) => sortFunction(a) - sortFunction(b));\n      }\n      if (filterFunction) {\n        tooltipData.items = tooltipData.items.filter(filterFunction);\n      }\n\n      // Hide tooltip with no selected tooltip.\n      if (selectedElements.length === 0 || isEmptyTooltipData(tooltipData)) {\n        hide(event);\n        return;\n      }\n\n      if (body) {\n        showTooltip({\n          root,\n          data: tooltipData,\n          x: mouse[0] + x,\n          y: mouse[1] + y,\n          render,\n          event,\n          single,\n          position,\n          enterable,\n          mount,\n          bounding,\n          css,\n          offset,\n        });\n      }\n\n      if (crosshairs || crosshairsX || crosshairsY) {\n        const ruleStyle = subObject(style, 'crosshairs');\n\n        const ruleStyleX = {\n          ...ruleStyle,\n          ...subObject(style, 'crosshairsX'),\n        };\n        const ruleStyleY = {\n          ...ruleStyle,\n          ...subObject(style, 'crosshairsY'),\n        };\n\n        const points = filteredSeriesData.map((d) => d[1]);\n        if (crosshairsX) {\n          updateRuleX(root, points, mouse, {\n            ...ruleStyleX,\n            plotWidth,\n            plotHeight,\n            mainWidth,\n            mainHeight,\n            insetLeft,\n            insetTop,\n            startX,\n            startY,\n            transposed,\n            polar,\n          });\n        }\n\n        if (crosshairsY) {\n          updateRuleY(root, points, {\n            ...ruleStyleY,\n            plotWidth,\n            plotHeight,\n            mainWidth,\n            mainHeight,\n            insetLeft,\n            insetTop,\n            startX,\n            startY,\n            transposed,\n            polar,\n          });\n        }\n      }\n\n      if (marker) {\n        const markerStyles = subObject(style, 'marker');\n        updateMarker(root, {\n          data: filteredSeriesData,\n          style: markerStyles,\n          theme,\n        });\n      }\n\n      // X in focus may related multiple points when dataset is large,\n      // so we need to find the first x to show tooltip.\n      const firstX = filteredSeriesData[0]?.[0].x;\n      const transformedX = firstX ?? abstractX(focus);\n\n      emitter.emit('tooltip:show', {\n        ...event,\n        nativeEvent: true,\n        data: {\n          ...tooltipData,\n          data: { x: invert(scale.x, transformedX, true) },\n        },\n      });\n    },\n    wait,\n    { leading, trailing },\n  ) as (...args: any[]) => void;\n\n  const hide = (event: MouseEvent) => {\n    if ((clickLock && root.getAttribute(LOCKED_SYMBOL)) || disableAutoHide)\n      return;\n    hideTooltip({ root, single, emitter, event });\n  };\n\n  const destroy = () => {\n    destroyTooltip({ root, single });\n  };\n\n  const onTooltipShow = ({ nativeEvent, data, offsetX, offsetY, ...rest }) => {\n    if (nativeEvent) return;\n    const x = data?.data?.x;\n    const scaleX = scale.x;\n    const x1 = scaleX.map(x);\n    const [x2, y2] = coordinate.map([x1, 0.5]);\n    const rootBounds = bboxOf(root);\n    const minX = rootBounds.min[0];\n    const minY = rootBounds.min[1];\n    update({\n      ...rest,\n      offsetX: offsetX !== undefined ? offsetX : minX + x2,\n      offsetY: offsetY !== undefined ? offsetY : minY + y2,\n      _x: x, // a hint, to lookup for the right element if multiple element in the same abstractX.\n    });\n  };\n\n  const onTooltipHide = () => {\n    hideTooltip({ root, single, emitter, nativeEvent: false });\n  };\n\n  const onTooltipDisable = () => {\n    removeEventListeners();\n    destroy();\n  };\n\n  const pointerleave = (e) => {\n    if (mousePosition(root, e)) return;\n    hide(e);\n  };\n\n  const onTooltipEnable = () => {\n    addEventListeners();\n  };\n\n  const pointerdown = (e) => {\n    if (clickLock) {\n      root.setAttribute(LOCKED_SYMBOL, !root.getAttribute(LOCKED_SYMBOL));\n    }\n    update(e);\n  };\n\n  const addEventListeners = () => {\n    if (!disableNative) {\n      root.addEventListener('pointerdown', pointerdown);\n      root.addEventListener('pointerenter', update);\n      root.addEventListener('pointermove', update);\n      // Only emit pointerleave event when the pointer is not in the root area.\n      root.addEventListener('pointerleave', pointerleave);\n      root.addEventListener('pointerup', hide);\n    }\n  };\n\n  const removeEventListeners = () => {\n    if (!disableNative) {\n      root.removeEventListener('pointerdown', pointerdown);\n      root.removeEventListener('pointerenter', update);\n      root.removeEventListener('pointermove', update);\n      root.removeEventListener('pointerleave', pointerleave);\n      root.removeEventListener('pointerup', hide);\n    }\n  };\n\n  addEventListeners();\n\n  emitter.on('tooltip:show', onTooltipShow);\n  emitter.on('tooltip:hide', onTooltipHide);\n  emitter.on('tooltip:disable', onTooltipDisable);\n  emitter.on('tooltip:enable', onTooltipEnable);\n\n  return () => {\n    removeEventListeners();\n    emitter.off('tooltip:show', onTooltipShow);\n    emitter.off('tooltip:hide', onTooltipHide);\n    emitter.off('tooltip:disable', onTooltipDisable);\n    emitter.off('tooltip:enable', onTooltipEnable);\n    if (preserve) {\n      hideTooltip({ root, single, emitter, nativeEvent: false });\n    } else {\n      destroy();\n    }\n  };\n}\n\n/**\n * Show tooltip for non-series item.\n */\nexport function tooltip(\n  root: DisplayObject,\n  {\n    elements: elementsof,\n    coordinate,\n    scale,\n    render,\n    groupName,\n    sort: sortFunction,\n    filter: filterFunction,\n    emitter,\n    wait = 50,\n    leading = true,\n    trailing = false,\n    groupKey = (d) => d, // group elements by specified key\n    single = true,\n    position,\n    enterable,\n    datum,\n    view,\n    mount,\n    bounding,\n    theme,\n    offset,\n    shared = false,\n    body = true,\n    disableNative = false,\n    preserve = false,\n    css = {},\n    clickLock = false,\n    disableAutoHide = false,\n  }: Record<string, any>,\n) {\n  const elements = elementsof(root);\n  const keyGroup = group(elements, groupKey);\n  const pointermove = throttle(\n    (event) => {\n      if (clickLock && root.getAttribute(LOCKED_SYMBOL)) return;\n      const element = findSingleElement({\n        root,\n        event,\n        elements,\n        coordinate,\n        scale,\n        shared,\n      });\n      if (!element) {\n        if (!disableAutoHide) {\n          hideTooltip({ root, single, emitter, event });\n        }\n        return;\n      }\n      const k = groupKey(element);\n      const group = keyGroup.get(k);\n      if (!group) {\n        return;\n      }\n      const data =\n        group.length === 1 && !shared\n          ? singleItem(group[0])\n          : groupItems(group, scale, groupName, undefined, theme);\n\n      // Sort items and sort.\n      if (sortFunction) {\n        data.items.sort((a, b) => sortFunction(a) - sortFunction(b));\n      }\n      if (filterFunction) {\n        data.items = data.items.filter(filterFunction);\n      }\n\n      if (isEmptyTooltipData(data)) {\n        if (!disableAutoHide) {\n          hideTooltip({ root, single, emitter, event });\n        }\n        return;\n      }\n\n      const { offsetX, offsetY } = event;\n      if (body) {\n        showTooltip({\n          root,\n          data,\n          x: offsetX,\n          y: offsetY,\n          render,\n          event,\n          single,\n          position,\n          enterable,\n          mount,\n          bounding,\n          css,\n          offset,\n        });\n      }\n\n      emitter.emit('tooltip:show', {\n        ...event,\n        nativeEvent: true,\n        data: {\n          ...data,\n          data: dataOf(element, view),\n        },\n      });\n    },\n    wait,\n    { leading, trailing },\n  ) as (...args: any[]) => void;\n\n  const pointerleave = (event) => {\n    if (disableAutoHide) return;\n    hideTooltip({ root, single, emitter, event });\n  };\n\n  const pointerdown = (e) => {\n    if (clickLock) {\n      root.setAttribute(LOCKED_SYMBOL, !root.getAttribute(LOCKED_SYMBOL));\n    }\n    pointermove(e);\n  };\n\n  const addEventListeners = () => {\n    if (!disableNative) {\n      root.addEventListener('pointerdown', pointerdown);\n      root.addEventListener('pointermove', pointermove);\n      // Only emit pointerleave event when the pointer is not in the root area.\n      // !!!DO NOT USE pointerout event, it will emit when the pointer is in the child area.\n      root.addEventListener('pointerleave', pointerleave);\n      root.addEventListener('pointerup', pointerleave);\n    }\n  };\n\n  const removeEventListeners = () => {\n    if (!disableNative) {\n      root.removeEventListener('pointerdown', pointerdown);\n      root.removeEventListener('pointermove', pointermove);\n      root.removeEventListener('pointerleave', pointerleave);\n      root.removeEventListener('pointerup', pointerleave);\n    }\n  };\n\n  const onTooltipShow = ({ nativeEvent, offsetX, offsetY, data: raw }) => {\n    if (nativeEvent) return;\n    const { data } = raw;\n    const element = selectElementByData(elements, data, datum);\n    if (!element) return;\n    const bbox = element.getBBox();\n    const { x, y, width, height } = bbox;\n    const rootBBox = root.getBBox();\n    pointermove({\n      target: element,\n      offsetX: offsetX !== undefined ? offsetX + rootBBox.x : x + width / 2,\n      offsetY: offsetY !== undefined ? offsetY + rootBBox.y : y + height / 2,\n    });\n  };\n\n  const onTooltipHide = ({ nativeEvent }: any = {}) => {\n    if (nativeEvent) return;\n    hideTooltip({ root, single, emitter, nativeEvent: false });\n  };\n\n  const onTooltipDisable = () => {\n    removeEventListeners();\n    destroyTooltip({ root, single });\n  };\n\n  const onTooltipEnable = () => {\n    addEventListeners();\n  };\n\n  emitter.on('tooltip:show', onTooltipShow);\n  emitter.on('tooltip:hide', onTooltipHide);\n  emitter.on('tooltip:enable', onTooltipEnable);\n  emitter.on('tooltip:disable', onTooltipDisable);\n\n  addEventListeners();\n\n  return () => {\n    removeEventListeners();\n    emitter.off('tooltip:show', onTooltipShow);\n    emitter.off('tooltip:hide', onTooltipHide);\n    emitter.off('tooltip:enable', onTooltipEnable);\n    emitter.off('tooltip:disable', onTooltipDisable);\n    if (preserve) {\n      hideTooltip({ root, single, emitter, nativeEvent: false });\n    } else {\n      destroyTooltip({ root, single });\n    }\n  };\n}\n\nexport function Tooltip(options) {\n  const {\n    shared,\n    crosshairs,\n    crosshairsX,\n    crosshairsY,\n    series,\n    name,\n    item = () => ({}),\n    facet = false,\n    ...rest\n  } = options;\n\n  return (target, viewInstances, emitter) => {\n    const { container, view } = target;\n    const { scale, markState, coordinate, theme } = view;\n    // Get default value from mark states.\n    const defaultSeries = interactionKeyof(markState, 'seriesTooltip');\n    const defaultShowCrosshairs = interactionKeyof(markState, 'crosshairs');\n    const plotArea = selectPlotArea(container);\n    const isSeries = maybeValue(series, defaultSeries);\n    const crosshairsSetting = maybeValue(crosshairs, defaultShowCrosshairs);\n    if (rest.clickLock && !facet) plotArea.setAttribute(LOCKED_SYMBOL, false);\n    // For non-facet and series tooltip.\n    if (isSeries && hasSeries(markState) && !facet) {\n      return seriesTooltip(plotArea, {\n        ...rest,\n        theme,\n        elements: selectG2Elements,\n        scale,\n        coordinate,\n        crosshairs: crosshairsSetting,\n        // the crosshairsX settings level: crosshairsX > crosshairs > false\n        // it means crosshairsX default is false\n        crosshairsX: maybeValue(maybeValue(crosshairsX, crosshairs), false),\n        // crosshairsY default depend on the crossharisSettings\n        crosshairsY: maybeValue(crosshairsY, crosshairsSetting),\n        item,\n        emitter,\n      });\n    }\n\n    // For facet and series tooltip.\n    if (isSeries && facet) {\n      // Get sub view instances for this view.\n      const facetInstances = viewInstances.filter(\n        (d) => d !== target && d.options.parentKey === target.options.key,\n      );\n      const elements = selectFacetG2Elements(target, viewInstances);\n      // Use the scale of the first view.\n      const scale = facetInstances[0].view.scale;\n      const bbox = plotArea.getBounds();\n      const startX = bbox.min[0];\n      const startY = bbox.min[1];\n      Object.assign(scale, { facet: true });\n      const root = plotArea.parentNode.parentNode as DisplayObject;\n      if (rest.clickLock) root.setAttribute(LOCKED_SYMBOL, false);\n      // @todo Nested structure rather than flat structure for facet?\n      // Add listener to the root area.\n      // @ts-ignore\n      return seriesTooltip(root, {\n        ...rest,\n        theme,\n        elements: () => elements,\n        scale,\n        coordinate,\n        crosshairs: maybeValue(crosshairs, defaultShowCrosshairs),\n        // the crosshairsX settings level: crosshairsX > crosshairs > false\n        // it means crosshairsX default is false\n        crosshairsX: maybeValue(maybeValue(crosshairsX, crosshairs), false),\n        crosshairsY: maybeValue(crosshairsY, crosshairsSetting),\n        item,\n        startX,\n        startY,\n        emitter,\n      });\n    }\n\n    return tooltip(plotArea, {\n      ...rest,\n      datum: createDatumof(view),\n      elements: selectG2Elements,\n      scale,\n      coordinate,\n      groupKey: shared ? createXKey(view) : undefined,\n      item,\n      emitter,\n      view,\n      theme,\n      shared,\n    });\n  };\n}\n\nTooltip.props = {\n  reapplyWhenUpdate: true,\n};\n", "import { InternMap, group } from '@antv/vendor/d3-array';\nimport { subObject } from '../utils/helper';\nimport {\n  mergeState,\n  selectG2Elements,\n  useState,\n  createValueof,\n  createDatumof,\n} from './utils';\nimport { markerOf, labelOf, itemsOf, legendsOf, dataOf } from './legendFilter';\n\nexport function LegendHighlight() {\n  return (context, _, emitter) => {\n    const { container, view, options } = context;\n    const legends = legendsOf(container);\n    const elements = selectG2Elements(container);\n    const channelOf = (legend) => {\n      return dataOf(legend).scales[0].name;\n    };\n    const scaleOf = (channel) => {\n      const {\n        scale: { [channel]: scale },\n      } = view;\n      return scale;\n    };\n    const markState = mergeState(options, ['active', 'inactive']);\n    const valueof = createValueof(elements, createDatumof(view));\n    const destroys = [];\n\n    // Bind events for each legend.\n    for (const legend of legends) {\n      const datumOf = (item) => {\n        const { data } = legend.attributes;\n        const { __data__: datum } = item;\n        const { index } = datum;\n        return data[index].label;\n      };\n      const channel = channelOf(legend);\n      const items = itemsOf(legend);\n      const scale = scaleOf(channel);\n      const elementGroup = group<any, any>(elements, (d) =>\n        scale.invert(d.__data__[channel]),\n      );\n      const { state: legendState = {} } = legend.attributes;\n      const { inactive = {} } = legendState;\n      const { setState, removeState } = useState(markState, valueof);\n\n      // Handle styles of inner item.\n      const markerStyle = { inactive: subObject(inactive, 'marker') };\n      const labelStyle = { inactive: subObject(inactive, 'label') };\n      const { setState: setM, removeState: removeM } = useState(markerStyle);\n      const { setState: setL, removeState: removeL } = useState(labelStyle);\n      const updateLegendState = (highlight) => {\n        for (const item of items) {\n          const marker = markerOf(item);\n          const label = labelOf(item);\n          if (item === highlight || highlight === null) {\n            removeM(marker, 'inactive');\n            removeL(label, 'inactive');\n          } else {\n            setM(marker, 'inactive');\n            setL(label, 'inactive');\n          }\n        }\n      };\n      const highlightItem = (event, item) => {\n        // Update UI.\n        const value = datumOf(item);\n        const elementSet = new Set(\n          (elementGroup as InternMap<unknown, any[]>).get(value),\n        );\n        for (const e of elements) {\n          if (elementSet.has(e)) setState(e, 'active');\n          else setState(e, 'inactive');\n        }\n        updateLegendState(item);\n\n        // Emit events.\n        const { nativeEvent = true } = event;\n        if (!nativeEvent) return;\n        emitter.emit('legend:highlight', {\n          ...event,\n          nativeEvent,\n          data: { channel, value },\n        });\n      };\n\n      const itemPointerover = new Map();\n\n      // Add listener for the legend items.\n      for (const item of items) {\n        const pointerover = (event) => {\n          highlightItem(event, item);\n        };\n        item.addEventListener('pointerover', pointerover);\n        itemPointerover.set(item, pointerover);\n      }\n\n      // Add listener for the legend group.\n      const pointerleave = (event) => {\n        for (const e of elements) removeState(e, 'inactive', 'active');\n        updateLegendState(null);\n\n        // Emit events.\n        const { nativeEvent = true } = event;\n        if (!nativeEvent) return;\n        emitter.emit('legend:unhighlight', { nativeEvent });\n      };\n\n      const onHighlight = (event) => {\n        const { nativeEvent, data } = event;\n        if (nativeEvent) return;\n        const { channel: specifiedChannel, value } = data;\n        if (specifiedChannel !== channel) return;\n        const item = items.find((d) => datumOf(d) === value);\n        if (!item) return;\n        highlightItem({ nativeEvent: false }, item);\n      };\n\n      const onUnHighlight = (event) => {\n        const { nativeEvent } = event;\n        if (nativeEvent) return;\n        pointerleave({ nativeEvent: false });\n      };\n\n      legend.addEventListener('pointerleave', pointerleave);\n      emitter.on('legend:highlight', onHighlight);\n      emitter.on('legend:unhighlight', onUnHighlight);\n\n      const destroy = () => {\n        legend.removeEventListener(pointerleave);\n        emitter.off('legend:highlight', onHighlight);\n        emitter.off('legend:unhighlight', onUnHighlight);\n        for (const [item, pointerover] of itemPointerover) {\n          item.removeEventListener(pointerover);\n        }\n      };\n      destroys.push(destroy);\n    }\n\n    return () => destroys.forEach((d) => d());\n  };\n}\n", "import { DisplayObject, Rect, Path } from '@antv/g';\nimport { subObject, omitPrefixObject } from '../utils/helper';\nimport { selectionOf, pixelsOf } from '../utils/scale';\nimport { createElement } from '../utils/createElement';\nimport { G2Element, select, Selection } from '../utils/selection';\nimport {\n  selectG2Elements,\n  selectPlotArea,\n  createDatumof,\n  useState,\n  createValueof,\n  setCursor,\n  brushMousePosition,\n  selectFacetG2Elements,\n  mergeState,\n  selectFacetViews,\n} from './utils';\n\nfunction intersect(bbox1: any, bbox2: any) {\n  const [minX1, minY1, maxX1, maxY1] = bbox1;\n  const [minX2, minY2, maxX2, maxY2] = bbox2;\n  return !(minX2 > maxX1 || maxX2 < minX1 || minY2 > maxY1 || maxY2 < minY1);\n}\n\nfunction normalizeBounds(x, y, x1, y1, extent) {\n  const [minX, minY, maxX, maxY] = extent;\n  return [\n    Math.max(minX, Math.min(x, x1)),\n    Math.max(minY, Math.min(y, y1)),\n    Math.min(maxX, Math.max(x, x1)),\n    Math.min(maxY, Math.max(y, y1)),\n  ];\n}\n\nfunction bboxOf(root: DisplayObject) {\n  const { width, height } = root.getBBox();\n  return [0, 0, width, height];\n}\n\nfunction applyStyle(selection: Selection, style: Record<string, any>) {\n  for (const [key, value] of Object.entries(style)) {\n    selection.style(key, value);\n  }\n}\n\nconst ResizableMask = createElement((g) => {\n  const {\n    x,\n    y,\n    width,\n    height,\n    class: className,\n    renders = {},\n    handleSize: size = 10,\n    document,\n    ...style\n  } = g.attributes;\n\n  if (\n    !document ||\n    width === undefined ||\n    height === undefined ||\n    x === undefined ||\n    y === undefined\n  )\n    return;\n\n  const half = size / 2;\n\n  const renderRect = (g, options, document) => {\n    if (!g.handle) {\n      g.handle = document.createElement('rect');\n      g.append(g.handle);\n    }\n    const { handle } = g;\n    handle.attr(options);\n    return handle;\n  };\n\n  const { render: handleNRender = renderRect, ...handleNStyle } = subObject(\n    omitPrefixObject(style, 'handleNW', 'handleNE'),\n    'handleN',\n  );\n\n  const { render: handleERender = renderRect, ...handleEStyle } = subObject(\n    style,\n    'handleE',\n  );\n  const { render: handleSRender = renderRect, ...handleSStyle } = subObject(\n    omitPrefixObject(style, 'handleSE', 'handleSW'),\n    'handleS',\n  );\n  const { render: handleWRender = renderRect, ...handleWStyle } = subObject(\n    style,\n    'handleW',\n  );\n  const { render: handleNWRender = renderRect, ...handleNWStyle } = subObject(\n    style,\n    'handleNW',\n  );\n  const { render: handleNERender = renderRect, ...handleNEStyle } = subObject(\n    style,\n    'handleNE',\n  );\n  const { render: handleSERender = renderRect, ...handleSEStyle } = subObject(\n    style,\n    'handleSE',\n  );\n  const { render: handleSWRender = renderRect, ...handleSWStyle } = subObject(\n    style,\n    'handleSW',\n  );\n\n  const renderHandle = (g, renderNode) => {\n    const { id } = g;\n    const handle = renderNode(g, g.attributes, document);\n    handle.id = id;\n    handle.style.draggable = true;\n  };\n\n  const appendHandle = (handleRender) => {\n    return () => {\n      const Node = createElement((g) => renderHandle(g, handleRender));\n      return new Node({});\n    };\n  };\n\n  const container = select(g)\n    .attr('className', className)\n    .style('transform', `translate(${x}, ${y})`)\n    .style('draggable', true);\n\n  container\n    .maybeAppend('selection', 'rect')\n    .style('draggable', true)\n    .style('fill', 'transparent')\n    .call(applyStyle, {\n      width,\n      height,\n      ...omitPrefixObject(style, 'handle'),\n      transform: undefined,\n    });\n\n  container\n    .maybeAppend('handle-n', appendHandle(handleNRender))\n    .style('x', half)\n    .style('y', -half)\n    .style('width', width - size)\n    .style('height', size)\n    .style('fill', 'transparent')\n    .call(applyStyle, handleNStyle);\n\n  container\n    .maybeAppend('handle-e', appendHandle(handleERender))\n    .style('x', width - half)\n    .style('y', half)\n    .style('width', size)\n    .style('height', height - size)\n    .style('fill', 'transparent')\n    .call(applyStyle, handleEStyle);\n\n  container\n    .maybeAppend('handle-s', appendHandle(handleSRender))\n    .style('x', half)\n    .style('y', height - half)\n    .style('width', width - size)\n    .style('height', size)\n    .style('fill', 'transparent')\n    .call(applyStyle, handleSStyle);\n\n  container\n    .maybeAppend('handle-w', appendHandle(handleWRender))\n    .style('x', -half)\n    .style('y', half)\n    .style('width', size)\n    .style('height', height - size)\n    .style('fill', 'transparent')\n    .call(applyStyle, handleWStyle);\n\n  container\n    .maybeAppend('handle-nw', appendHandle(handleNWRender))\n    .style('x', -half)\n    .style('y', -half)\n    .style('width', size)\n    .style('height', size)\n    .style('fill', 'transparent')\n    .call(applyStyle, handleNWStyle);\n\n  container\n    .maybeAppend('handle-ne', appendHandle(handleNERender))\n    .style('x', width - half)\n    .style('y', -half)\n    .style('width', size)\n    .style('height', size)\n    .style('fill', 'transparent')\n    .call(applyStyle, handleNEStyle);\n\n  container\n    .maybeAppend('handle-se', appendHandle(handleSERender))\n    .style('x', width - half)\n    .style('y', height - half)\n    .style('width', size)\n    .style('height', size)\n    .style('fill', 'transparent')\n    .call(applyStyle, handleSEStyle);\n\n  container\n    .maybeAppend('handle-sw', appendHandle(handleSWRender))\n    .style('x', -half)\n    .style('y', height - half)\n    .style('width', size)\n    .style('height', size)\n    .style('fill', 'transparent')\n    .call(applyStyle, handleSWStyle);\n});\n\nexport function brush(\n  root: DisplayObject,\n  {\n    brushed = () => {},\n    brushended = () => {},\n    brushcreated = () => {},\n    brushstarted = () => {},\n    brushupdated = () => {},\n    extent = bboxOf(root),\n    brushRegion = (x, y, x1, y1, extent) => [x, y, x1, y1],\n    reverse = false,\n    fill = '#777',\n    fillOpacity = '0.3',\n    stroke = '#fff',\n    selectedHandles = [\n      'handle-n',\n      'handle-e',\n      'handle-s',\n      'handle-w',\n      'handle-nw',\n      'handle-ne',\n      'handle-se',\n      'handle-sw',\n    ],\n    ...style\n  }: Record<string, any>,\n) {\n  let start = null; // Start point of mask.\n  let end = null; // End point of mask.\n  let moveStart = null; // Start point of moving mask.\n  let mask = null; // Mask instance.\n  let background = null;\n  let creating = false;\n\n  const [originX, originY, width, height] = extent;\n\n  setCursor(root, 'crosshair');\n  root.style.draggable = true; // Make it response to drag event.\n\n  // Remove old mask and init new mask.\n  const initMask = (x, y, event) => {\n    brushstarted(event);\n    if (mask) mask.remove();\n    if (background) background.remove();\n    start = [x, y];\n    if (reverse) return initReverseMask();\n    initNormalMask();\n  };\n\n  const initReverseMask = () => {\n    background = new Path({\n      style: {\n        ...style,\n        fill,\n        fillOpacity,\n        stroke,\n        pointerEvents: 'none',\n      },\n    });\n    mask = new ResizableMask({\n      // @ts-ignore\n      style: {\n        x: 0,\n        y: 0,\n        width: 0,\n        height: 0,\n        draggable: true,\n        document: root.ownerDocument,\n      },\n      className: 'mask',\n    });\n    root.appendChild(background);\n    root.appendChild(mask);\n  };\n\n  const initNormalMask = () => {\n    mask = new ResizableMask({\n      // @ts-ignore\n      style: {\n        document: root.ownerDocument,\n        x: 0,\n        y: 0,\n        ...style,\n        fill,\n        fillOpacity,\n        stroke,\n        draggable: true, // Make it response to drag event.\n      },\n      className: 'mask',\n    });\n    root.appendChild(mask);\n  };\n\n  // Remove mask and reset states.\n  const removeMask = (emit = true) => {\n    if (mask) mask.remove();\n    if (background) background.remove();\n    start = null;\n    end = null;\n    moveStart = null;\n    creating = false;\n    mask = null;\n    background = null;\n    brushended(emit);\n  };\n\n  // Update mask and invoke brushended callback.\n  const updateMask = (start, end, emit = true) => {\n    const [x, y, x1, y1] = normalizeBounds(\n      start[0],\n      start[1],\n      end[0],\n      end[1],\n      extent,\n    );\n    const [fx, fy, fx1, fy1] = brushRegion(x, y, x1, y1, extent);\n    if (reverse) updateReverseMask(fx, fy, fx1, fy1);\n    else updateNormalMask(fx, fy, fx1, fy1);\n    brushed(fx, fy, fx1, fy1, emit);\n    return [fx, fy, fx1, fy1];\n  };\n\n  const updateNormalMask = (x, y, x1, y1) => {\n    mask.style.x = x;\n    mask.style.y = y;\n    mask.style.width = x1 - x;\n    mask.style.height = y1 - y;\n  };\n\n  const updateReverseMask = (x, y, x1, y1) => {\n    background.style.d = `\n      M${originX},${originY}L${width},${originY}L${width},${height}L${originX},${height}Z\n      M${x},${y}L${x},${y1}L${x1},${y1}L${x1},${y}Z\n    `;\n    mask.style.x = x;\n    mask.style.y = y;\n    mask.style.width = x1 - x;\n    mask.style.height = y1 - y;\n  };\n\n  // Move and update mask.\n  const moveMask = (current) => {\n    const clip = (dt, start, end, min, max) => {\n      if (dt + start < min) return min - start;\n      if (dt + end > max) return max - end;\n      return dt;\n    };\n    const dx = current[0] - moveStart[0];\n    const dy = current[1] - moveStart[1];\n    const dx1 = clip(dx, start[0], end[0], originX, width);\n    const dy1 = clip(dy, start[1], end[1], originY, height);\n    const currentStart = [start[0] + dx1, start[1] + dy1];\n    const currentEnd = [end[0] + dx1, end[1] + dy1];\n    updateMask(currentStart, currentEnd);\n  };\n\n  const handles = {\n    'handle-n': { vector: [0, 1, 0, 0], cursor: 'ns-resize' },\n    'handle-e': { vector: [0, 0, 1, 0], cursor: 'ew-resize' },\n    'handle-s': { vector: [0, 0, 0, 1], cursor: 'ns-resize' },\n    'handle-w': { vector: [1, 0, 0, 0], cursor: 'ew-resize' },\n    'handle-nw': { vector: [1, 1, 0, 0], cursor: 'nwse-resize' },\n    'handle-ne': { vector: [0, 1, 1, 0], cursor: 'nesw-resize' },\n    'handle-se': { vector: [0, 0, 1, 1], cursor: 'nwse-resize' },\n    'handle-sw': { vector: [1, 0, 0, 1], cursor: 'nesw-resize' },\n  };\n\n  const isMask = (target) => {\n    return isSelection(target) || isHandle(target);\n  };\n\n  const isHandle = (target) => {\n    const { id } = target;\n    if (selectedHandles.indexOf(id) === -1) return false;\n    return new Set(Object.keys(handles)).has(id);\n  };\n\n  const isSelection = (target) => {\n    return target === mask.getElementById('selection');\n  };\n\n  // If target is plot area, create mask.\n  // If target is mask, about to update position.\n  const dragstart = (event) => {\n    const { target } = event;\n    const [offsetX, offsetY] = brushMousePosition(root, event);\n    if (!mask || !isMask(target)) {\n      initMask(offsetX, offsetY, event);\n      creating = true;\n      return;\n    }\n    if (isMask(target)) {\n      moveStart = [offsetX, offsetY];\n    }\n  };\n\n  const drag = (event) => {\n    const { target } = event;\n    const mouse = brushMousePosition(root, event);\n    if (!start) return;\n    // If target is plot area, resize mask.\n    if (!moveStart) return updateMask(start, mouse);\n\n    // If target is selection area, move mask.\n    if (isSelection(target)) return moveMask(mouse);\n\n    // If target is handle area, resize mask.\n    const [dx, dy] = [mouse[0] - moveStart[0], mouse[1] - moveStart[1]];\n    const { id } = target;\n    if (handles[id]) {\n      const [sx, sy, ex, ey] = handles[id].vector;\n      return updateMask(\n        [start[0] + dx * sx, start[1] + dy * sy],\n        [end[0] + dx * ex, end[1] + dy * ey],\n      );\n    }\n  };\n\n  // If target is plot area, finish creating.\n  // If target is mask, finish moving mask.\n  const dragend = (event) => {\n    if (moveStart) {\n      moveStart = null;\n      // Update start and end;\n      const { x, y, width, height } = mask.style;\n      start = [x, y];\n      end = [x + width, y + height];\n      brushupdated(x, y, x + width, y + height, event);\n      return;\n    }\n    end = brushMousePosition(root, event);\n    const [fx, fy, fx1, fy1] = updateMask(start, end);\n    creating = false;\n    brushcreated(fx, fy, fx1, fy1, event);\n  };\n\n  // Hide mask.\n  const click = (event) => {\n    const { target } = event;\n    if (mask && !isMask(target)) removeMask();\n  };\n\n  // Update cursor depends on hovered element.\n  const pointermove = (event) => {\n    const { target } = event;\n    if (!mask || !isMask(target) || creating) setCursor(root, 'crosshair');\n    else if (isSelection(target)) setCursor(root, 'move');\n    else if (isHandle(target)) setCursor(root, handles[target.id].cursor);\n  };\n\n  const pointerleave = () => {\n    setCursor(root, 'default');\n  };\n\n  root.addEventListener('dragstart', dragstart);\n  root.addEventListener('drag', drag);\n  root.addEventListener('dragend', dragend);\n  root.addEventListener('click', click);\n  root.addEventListener('pointermove', pointermove);\n  root.addEventListener('pointerleave', pointerleave);\n\n  return {\n    mask,\n    move(x, y, x1, y1, emit = true) {\n      if (!mask) initMask(x, y, {});\n      start = [x, y];\n      end = [x1, y1];\n      updateMask([x, y], [x1, y1], emit);\n    },\n    remove(emit = true) {\n      if (mask) removeMask(emit);\n    },\n    destroy() {\n      // Do not emit brush:end event.\n      if (mask) removeMask(false);\n      setCursor(root, 'default');\n      root.removeEventListener('dragstart', dragstart);\n      root.removeEventListener('drag', drag);\n      root.removeEventListener('dragend', dragend);\n      root.removeEventListener('click', click);\n      root.removeEventListener('pointermove', pointermove);\n      root.removeEventListener('pointerleave', pointerleave);\n    },\n  };\n}\n\nfunction selectSiblingViews(target, viewInstances, brushKey) {\n  return viewInstances.filter((d) => {\n    if (d === target) return false;\n    const { interaction = {} } = d.options;\n    return Object.values(interaction as Record<string, any>).find(\n      (d) => d.brushKey === brushKey,\n    );\n  });\n}\n\nfunction selectSiblingContainers(target, viewInstances, brushKey) {\n  return selectSiblingViews(target, viewInstances, brushKey).map((d) =>\n    selectPlotArea(d.container),\n  );\n}\n\nfunction selectSiblingOptions(target, viewInstances, brushKey) {\n  return selectSiblingViews(target, viewInstances, brushKey).map(\n    (d) => d.options,\n  );\n}\n\n/**\n * @todo Brush over view for series view.\n * @todo Test perf.\n */\nexport function brushHighlight(\n  root,\n  {\n    elements: elementof,\n    selectedHandles,\n    siblings: siblingsof = (root) => [],\n    datum,\n    brushRegion,\n    extent: optionalExtent,\n    reverse,\n    scale,\n    coordinate,\n    series = false,\n    key = (d) => d,\n    bboxOf = (root) => {\n      const { x, y, width, height } = root.style;\n      return { x, y, width, height };\n    },\n    state = {},\n    emitter,\n    ...rest\n  },\n) {\n  const elements = elementof(root);\n  const siblings = siblingsof(root);\n  const siblingElements = siblings.flatMap(elementof);\n  const valueof = createValueof(elements, datum);\n  const brushStyle = subObject(rest, 'mask');\n  const { setState, removeState } = useState(state, valueof);\n  const clonedElement = new Map();\n  const {\n    width: rootWidth,\n    height: rootHeight,\n    x: ordinalX = 0,\n    y: ordinalY = 0,\n  } = bboxOf(root);\n  const extent = optionalExtent\n    ? optionalExtent\n    : [0, 0, rootWidth, rootHeight];\n\n  const brushended = () => {\n    for (const element of [...elements, ...siblingElements]) {\n      removeState(element, 'active', 'inactive');\n    }\n  };\n\n  const brushed = (x, y, x1, y1) => {\n    // Hide brush for the sibling view.\n    for (const sibling of siblings) sibling.brush?.remove();\n\n    // Store the key of the active element.\n    const keys = new Set();\n\n    // Highlight and store selected elements.\n    for (const element of elements) {\n      const { min, max } = element.getLocalBounds();\n      const [ex, ey] = min;\n      const [ex1, ey1] = max;\n      if (!intersect([ex, ey, ex1, ey1], [x, y, x1, y1])) {\n        setState(element, 'inactive');\n      } else {\n        setState(element, 'active');\n        keys.add(key(element));\n      }\n    }\n\n    // Highlight elements with same key in sibling view.\n    for (const element of siblingElements) {\n      if (keys.has(key(element))) setState(element, 'active');\n      else setState(element, 'inactive');\n    }\n  };\n\n  const seriesBrushend = () => {\n    for (const element of elements) removeState(element, 'inactive');\n    for (const cloned of clonedElement.values()) cloned.remove();\n    clonedElement.clear();\n  };\n\n  const seriesBrushed = (x, y, x1, y1) => {\n    const clone = (element) => {\n      const cloned = element.cloneNode();\n      cloned.__data__ = element.__data__;\n      element.parentNode.appendChild(cloned);\n      clonedElement.set(element, cloned);\n      return cloned;\n    };\n\n    // Create a clipPath shared between all children.\n    const clipPath = new Rect({\n      style: {\n        x: x + ordinalX,\n        y: y + ordinalY,\n        width: x1 - x,\n        height: y1 - y,\n      },\n    });\n    root.appendChild(clipPath);\n\n    for (const element of elements) {\n      const cloned = clonedElement.get(element) || clone(element);\n      cloned.style.clipPath = clipPath;\n      setState(element, 'inactive');\n      setState(cloned, 'active');\n    }\n  };\n\n  const brushHandler = brush(root, {\n    ...brushStyle,\n    extent,\n    brushRegion,\n    reverse,\n    selectedHandles,\n    brushended: (emit) => {\n      const handler = series ? seriesBrushend : brushended;\n      if (emit) {\n        emitter.emit('brush:remove', { nativeEvent: true });\n      }\n      handler();\n    },\n    brushed: (x, y, x1, y1, emit) => {\n      const selection = selectionOf(x, y, x1, y1, scale, coordinate);\n      if (emit) {\n        emitter.emit('brush:highlight', {\n          nativeEvent: true,\n          data: { selection },\n        });\n      }\n      const handler = series ? seriesBrushed : brushed;\n      handler(x, y, x1, y1);\n    },\n    brushcreated: (x, y, x1, y1, event) => {\n      const selection = selectionOf(x, y, x1, y1, scale, coordinate);\n      emitter.emit('brush:end', {\n        ...event,\n        nativeEvent: true,\n        data: { selection },\n      });\n    },\n    brushupdated: (x, y, x1, y1, event) => {\n      const selection = selectionOf(x, y, x1, y1, scale, coordinate);\n      emitter.emit('brush:end', {\n        ...event,\n        nativeEvent: true,\n        data: { selection },\n      });\n    },\n    brushstarted: (e) => {\n      emitter.emit('brush:start', e);\n    },\n  });\n\n  // Move brush and highlight data.\n  const onHighlight = ({ nativeEvent, data }) => {\n    if (nativeEvent) return;\n    const { selection } = data;\n    const [x, y, x1, y1] = pixelsOf(selection, scale, coordinate);\n    brushHandler.move(x, y, x1, y1, false);\n  };\n  emitter.on('brush:highlight', onHighlight);\n\n  // Remove brush and reset data.\n  const onRemove = ({ nativeEvent }: any = {}) => {\n    if (nativeEvent) return;\n    brushHandler.remove(false);\n  };\n  emitter.on('brush:remove', onRemove);\n\n  // Remove event handlers.\n  const preBrushDestroy = brushHandler.destroy.bind(brushHandler);\n  brushHandler.destroy = () => {\n    emitter.off('brush:highlight', onHighlight);\n    emitter.off('brush:remove', onRemove);\n    preBrushDestroy();\n  };\n\n  return brushHandler;\n}\n\nexport function BrushHighlight({ facet, brushKey, ...rest }) {\n  return (target, viewInstances, emitter) => {\n    const { container, view, options } = target;\n    const plotArea = selectPlotArea(container);\n    const defaultOptions = {\n      maskFill: '#777',\n      maskFillOpacity: '0.3',\n      maskStroke: '#fff',\n      reverse: false,\n    };\n    const defaultStates = ['active', ['inactive', { opacity: 0.5 }]];\n    const { scale, coordinate } = view;\n\n    if (facet) {\n      const bbox = plotArea.getBounds();\n      const x = bbox.min[0];\n      const y = bbox.min[1];\n      const x1 = bbox.max[0];\n      const y1 = bbox.max[1];\n      return brushHighlight(plotArea.parentNode.parentNode, {\n        elements: () => selectFacetG2Elements(target, viewInstances),\n        datum: createDatumof(\n          selectFacetViews(target, viewInstances).map((d) => d.view),\n        ),\n        brushRegion: (x, y, x1, y1) => [x, y, x1, y1],\n        extent: [x, y, x1, y1],\n        state: mergeState(\n          selectFacetViews(target, viewInstances).map((d) => d.options),\n          defaultStates,\n        ),\n        emitter,\n        scale,\n        coordinate,\n        selectedHandles: undefined,\n        ...defaultOptions,\n        ...rest,\n      });\n    }\n\n    const brush = brushHighlight(plotArea, {\n      elements: selectG2Elements,\n      key: (element) => element.__data__.key,\n      siblings: () => selectSiblingContainers(target, viewInstances, brushKey),\n      datum: createDatumof([\n        view,\n        ...selectSiblingViews(target, viewInstances, brushKey).map(\n          (d) => d.view,\n        ),\n      ]),\n      brushRegion: (x, y, x1, y1) => [x, y, x1, y1],\n      extent: undefined,\n      state: mergeState(\n        [options, ...selectSiblingOptions(target, viewInstances, brushKey)],\n        defaultStates,\n      ),\n      emitter,\n      scale,\n      coordinate,\n      selectedHandles: undefined,\n      ...defaultOptions,\n      ...rest,\n    });\n\n    // Bind brush to the view it belongs to.\n    //@ts-ignore\n    plotArea.brush = brush;\n\n    return () => brush.destroy();\n  };\n}\n\n// Ensure BrushHighlight gets reapplied when view updates (e.g., after slider filter)\nBrushHighlight.props = {\n  reapplyWhenUpdate: true,\n};\n", "import { BrushHighlight } from './brushHighlight';\n\nexport function brushXRegion(x, y, x1, y1, extent) {\n  const [, minY, , maxY] = extent;\n  return [x, minY, x1, maxY];\n}\n\nexport function BrushXHighlight(options) {\n  return BrushHighlight({\n    ...options,\n    brushRegion: brushXRegion,\n    selectedHandles: ['handle-e', 'handle-w'],\n  });\n}\n", "import { BrushHighlight } from './brushHighlight';\n\nexport function brushYRegion(x, y, x1, y1, extent) {\n  const [minX, , maxX] = extent;\n  return [minX, y, maxX, y1];\n}\n\nexport function BrushYHighlight(options) {\n  return BrushHighlight({\n    ...options,\n    brushRegion: brushYRegion,\n    selectedHandles: ['handle-n', 'handle-s'],\n  });\n}\n", "import { Rect } from '@antv/g';\nimport { subObject } from '../utils/helper';\nimport { domainOf, pixelsOf } from '../utils/scale';\nimport { brush } from './brushHighlight';\nimport { brushXRegion } from './brushXHighlight';\nimport { brushYRegion } from './brushYHighlight';\nimport {\n  selectG2Elements,\n  createDatumof,\n  createValueof,\n  useState,\n  selectPlotArea,\n  mergeState,\n} from './utils';\n\nexport const AXIS_CLASS_NAME = 'axis';\n\nexport const AXIS_LINE_CLASS_NAME = 'axis-line';\n\nexport const AXIS_MAIN_CLASS_NAME = 'axis-main-group';\n\nexport const AXIS_HOT_AREA_CLASS_NAME = 'axis-hot-area';\n\nfunction axesOf(container) {\n  return container.getElementsByClassName(AXIS_CLASS_NAME);\n}\n\nfunction lineOf(axis) {\n  return axis.getElementsByClassName(AXIS_LINE_CLASS_NAME)[0];\n}\n\nfunction mainGroupOf(axis) {\n  return axis.getElementsByClassName(AXIS_MAIN_CLASS_NAME)[0];\n}\n\n// Use the bounds of main group of axis as the bounds of axis,\n// get rid of grid and title.\nfunction boundsOfAxis(axis) {\n  return mainGroupOf(axis).getLocalBounds();\n}\n\n// Brush for vertical axis.\nfunction verticalBrush(axis, { cross, offsetX, offsetY, ...style }) {\n  const bounds = boundsOfAxis(axis);\n  const axisLine = lineOf(axis);\n  const [lineX] = axisLine.getLocalBounds().min;\n  const [minX, minY] = bounds.min;\n  const [maxX, maxY] = bounds.max;\n  const size = (maxX - minX) * 2;\n  return {\n    brushRegion: brushYRegion,\n    hotZone: new Rect({\n      className: AXIS_HOT_AREA_CLASS_NAME,\n      style: {\n        // If it is not cross, draw brush in both side of axisLine,\n        // otherwise the draw brush within bounds area.\n        width: cross ? size / 2 : size,\n        transform: `translate(${(cross ? minX : lineX - size / 2).toFixed(\n          2,\n        )}, ${minY})`,\n        height: maxY - minY,\n        ...style,\n      },\n    }),\n    extent: cross\n      ? // If it is cross, the x range is ignored.\n        (x, y, x1, y1) => [-Infinity, y, Infinity, y1]\n      : (x, y, x1, y1) => [\n          Math.floor(minX - offsetX),\n          y,\n          Math.ceil(maxX - offsetX),\n          y1,\n        ],\n  };\n}\n\n// Brush for horizontal axis.\nfunction horizontalBrush(axis, { offsetY, offsetX, cross = false, ...style }) {\n  const bounds = boundsOfAxis(axis);\n  const axisLine = lineOf(axis);\n  const [, lineY] = axisLine.getLocalBounds().min;\n  const [minX, minY] = bounds.min;\n  const [maxX, maxY] = bounds.max;\n  const size = maxY - minY;\n  return {\n    brushRegion: brushXRegion,\n    hotZone: new Rect({\n      className: AXIS_HOT_AREA_CLASS_NAME,\n      style: {\n        width: maxX - minX,\n        // If it is not cross, draw brush in both side of axisLine,\n        // otherwise the draw brush within bounds area.\n        height: cross ? size : size * 2,\n        transform: `translate(${minX}, ${cross ? minY : lineY - size})`,\n        ...style,\n      },\n    }),\n    extent: cross\n      ? // If it is cross, the y range is ignored.\n        (x, y, x1, y1) => [x, -Infinity, x1, Infinity]\n      : (x, y, x1, y1) => [\n          x,\n          Math.floor(minY - offsetY),\n          x1,\n          Math.ceil(maxY - offsetY),\n        ],\n  };\n}\n\nexport function brushAxisHighlight(\n  root,\n  {\n    axes: axesOf, // given root, return axes\n    elements: elementsOf, // given root, return elements\n    points: pointsOf, // given shape, return control points\n    horizontal: isHorizontal, // given axis, return direction\n    datum, // given shape, return datum\n    offsetY, // offsetY for shape area\n    offsetX, // offsetX for shape area\n    reverse = false,\n    state = {},\n    emitter,\n    coordinate,\n    ...rest // style\n  },\n) {\n  const elements = elementsOf(root);\n  const axes = axesOf(root);\n  const valueof = createValueof(elements, datum);\n  const { setState, removeState } = useState(state, valueof);\n  const axisExtent = new Map();\n  const brushStyle = subObject(rest, 'mask');\n\n  // Only some of shape's points in all mask, it is selected.\n  const brushed = (points) =>\n    Array.from(axisExtent.values()).every(([x, y, x1, y1]) =>\n      points.some(([x0, y0]) => {\n        return x0 >= x && x0 <= x1 && y0 >= y && y0 <= y1;\n      }),\n    );\n\n  const scales = axes.map((d) => d.attributes.scale);\n\n  const extentOf = (D) => (D.length > 2 ? [D[0], D[D.length - 1]] : D);\n\n  const indexDomain = new Map<number, [any, any]>();\n\n  const initIndexDomain = () => {\n    indexDomain.clear();\n    for (let i = 0; i < axes.length; i++) {\n      const scale = scales[i];\n      const { domain } = scale.getOptions();\n      indexDomain.set(i, extentOf(domain));\n    }\n  };\n\n  initIndexDomain();\n\n  // Update element when brush changed.\n  const updateElement = (i, emit) => {\n    const selectedElements = [];\n    for (const element of elements) {\n      const points = pointsOf(element);\n      if (brushed(points)) {\n        setState(element, 'active');\n        selectedElements.push(element);\n      } else setState(element, 'inactive');\n    }\n\n    indexDomain.set(i, selectionOf(selectedElements, i));\n\n    if (!emit) return;\n\n    // Emit events.\n    const selection = () => {\n      if (!cross) return Array.from(indexDomain.values());\n      const S = [];\n      for (const [index, domain] of indexDomain) {\n        const scale = scales[index];\n        const { name } = scale.getOptions();\n        if (name === 'x') S[0] = domain;\n        else S[1] = domain;\n      }\n      return S;\n    };\n    emitter.emit('brushAxis:highlight', {\n      nativeEvent: true,\n      data: {\n        selection: selection(),\n      },\n    });\n  };\n\n  const clearElement = (emit) => {\n    for (const element of elements) removeState(element, 'active', 'inactive');\n    initIndexDomain();\n    if (!emit) return;\n    emitter.emit('brushAxis:remove', { nativeEvent: true });\n  };\n\n  const selectionOf = (selected, i) => {\n    const scale = scales[i];\n    const { name } = scale.getOptions();\n    const domain = selected.map((d) => {\n      const data = d.__data__;\n      return scale.invert(data[name]);\n    });\n    return extentOf(domainOf(scale, domain));\n  };\n\n  // Distinguish between parallel coordinates and normal charts.\n  const cross = axes.some(isHorizontal) && axes.some((d) => !isHorizontal(d));\n  const handlers = [];\n  for (let i = 0; i < axes.length; i++) {\n    const axis = axes[i];\n    const createBrush = isHorizontal(axis) ? horizontalBrush : verticalBrush;\n    const { hotZone, brushRegion, extent } = createBrush(axis, {\n      offsetY,\n      offsetX,\n      cross,\n      zIndex: 999, // Pin mask to top.\n      fill: 'transparent', // Make it interactive.\n    });\n    axis.parentNode.appendChild(hotZone);\n\n    const brushHandler = brush(hotZone, {\n      ...brushStyle,\n      reverse,\n      brushRegion,\n      brushended(emit) {\n        axisExtent.delete(axis);\n        if (Array.from(axisExtent.entries()).length === 0) clearElement(emit);\n        else updateElement(i, emit);\n      },\n      brushed(x, y, x1, y1, emit) {\n        axisExtent.set(axis, extent(x, y, x1, y1));\n        updateElement(i, emit);\n      },\n    });\n    handlers.push(brushHandler);\n  }\n\n  const onRemove = (event: any = {}) => {\n    const { nativeEvent } = event;\n    if (nativeEvent) return;\n    handlers.forEach((d) => d.remove(false));\n  };\n\n  const rangeOf = (domain, scale, axis) => {\n    const [d0, d1] = domain;\n    const maybeStep = (scale) => (scale.getStep ? scale.getStep() : 0);\n    const x = abstractOf(d0, scale, axis);\n    const x1 = abstractOf(d1, scale, axis) + maybeStep(scale);\n    if (isHorizontal(axis)) return [x, -Infinity, x1, Infinity];\n    return [-Infinity, x, Infinity, x1];\n  };\n\n  const abstractOf = (x, scale, axis) => {\n    const { height, width } = coordinate.getOptions();\n    const scale1 = scale.clone();\n    if (isHorizontal(axis)) scale1.update({ range: [0, width] });\n    else scale1.update({ range: [height, 0] });\n    return scale1.map(x);\n  };\n\n  const onHighlight = (event) => {\n    const { nativeEvent } = event;\n    if (nativeEvent) return;\n    const { selection } = event.data;\n    for (let i = 0; i < handlers.length; i++) {\n      const domain = selection[i];\n      const handler = handlers[i];\n      const axis = axes[i];\n      if (domain) {\n        const scale = scales[i];\n        handler.move(...rangeOf(domain, scale, axis), false);\n      } else {\n        handler.remove(false);\n      }\n    }\n  };\n\n  emitter.on('brushAxis:remove', onRemove);\n  emitter.on('brushAxis:highlight', onHighlight);\n\n  return () => {\n    handlers.forEach((d) => d.destroy());\n    emitter.off('brushAxis:remove', onRemove);\n    emitter.off('brushAxis:highlight', onHighlight);\n  };\n}\n\n/**\n * @todo Support mask size.\n */\nexport function BrushAxisHighlight(options) {\n  return (target, _, emitter) => {\n    const { container, view, options: viewOptions } = target;\n    const plotArea = selectPlotArea(container);\n    const { x: x0, y: y0 } = plotArea.getBBox();\n    const { coordinate } = view;\n    return brushAxisHighlight(container, {\n      elements: selectG2Elements,\n      axes: axesOf,\n      offsetY: y0,\n      offsetX: x0,\n      points: (element) => element.__data__.points,\n      horizontal: (axis) => {\n        const {\n          startPos: [sx, sy],\n          endPos: [ex, ey],\n        } = axis.attributes;\n        // attention, non-horizontal does not mean vertical\n        // it may has a specific degree angle\n        return sx !== ex && sy === ey;\n      },\n      datum: createDatumof(view),\n      state: mergeState(viewOptions, [\n        'active',\n        ['inactive', { opacity: 0.5 }],\n      ]),\n      coordinate,\n      emitter,\n      ...options,\n    });\n  };\n}\n", "import { deepMix } from '@antv/util';\nimport { subObject } from '../utils/helper';\nimport { selectionOf } from '../utils/scale';\nimport { brush as createBrush } from './brushHighlight';\nimport { selectPlotArea } from './utils';\n\n// Mock dblclick events.\nfunction dblclick(interval = 300) {\n  let preTimeStamp = null;\n  return (e) => {\n    const { timeStamp } = e;\n    if (preTimeStamp !== null && timeStamp - preTimeStamp < interval) {\n      preTimeStamp = timeStamp;\n      return true;\n    }\n    preTimeStamp = timeStamp;\n    return false;\n  };\n}\n\nexport function brushFilter(\n  root,\n  {\n    filter,\n    reset,\n    brushRegion,\n    extent: optionalExtent,\n    reverse,\n    emitter,\n    scale,\n    coordinate,\n    selection,\n    series = false,\n    ...rest\n  },\n) {\n  const brushStyle = subObject(rest, 'mask');\n  const { width: rootWidth, height: rootHeight } = root.getBBox();\n  const extent = optionalExtent\n    ? optionalExtent\n    : [0, 0, rootWidth, rootHeight];\n  const isDblclick = dblclick();\n\n  const brush = createBrush(root, {\n    ...brushStyle,\n    extent,\n    brushRegion,\n    reverse,\n    brushcreated,\n  });\n\n  root.addEventListener('click', click);\n\n  // Filter when brush created.\n  function brushcreated(x, y, x1, y1, event) {\n    if (x === x1 && y === y1) return;\n    event.nativeEvent = true;\n    filter(selection(x, y, x1, y1), event);\n    brush.remove();\n  }\n\n  // Reset when dblclick.\n  function click(e) {\n    if (isDblclick(e)) {\n      e.nativeEvent = true;\n      reset(e);\n    }\n  }\n\n  const onFilter = ({ nativeEvent, data }) => {\n    if (nativeEvent) return;\n    const { selection } = data;\n    filter(selection, { nativeEvent: false });\n  };\n  emitter.on('brush:filter', onFilter);\n\n  return () => {\n    brush.destroy();\n    emitter.off('brush:filter', onFilter);\n    root.removeEventListener('click', click);\n  };\n}\n\nexport function BrushFilter({ hideX = true, hideY = true, ...rest }) {\n  return (target, viewInstances, emitter) => {\n    const { container, view, options: viewOptions, update, setState } = target;\n    const plotArea = selectPlotArea(container);\n    const defaultOptions = {\n      maskFill: '#777',\n      maskFillOpacity: '0.3',\n      maskStroke: '#fff',\n      unhighlightedOpacity: 0.5,\n      reverse: false,\n    };\n\n    let filtered = false;\n    let filtering = false;\n    let newView = view;\n\n    const { scale, coordinate } = view;\n    return brushFilter(plotArea, {\n      brushRegion: (x, y, x1, y1) => [x, y, x1, y1],\n      selection: (x, y, x1, y1) => {\n        const { scale, coordinate } = newView;\n        return selectionOf(x, y, x1, y1, scale, coordinate);\n      },\n      filter: async (selection, event) => {\n        // Avoid redundant filter.\n        if (filtering) return;\n        filtering = true;\n\n        // Update the domain of x and y scale to filter data.\n        const [domainX, domainY] = selection;\n\n        setState('brushFilter', (options) => {\n          const { marks } = options;\n          const newMarks = marks.map((mark) =>\n            deepMix(\n              {\n                // Hide label to keep smooth transition.\n                axis: {\n                  ...(hideX && { x: { transform: [{ type: 'hide' }] } }),\n                  ...(hideY && { y: { transform: [{ type: 'hide' }] } }),\n                },\n              },\n              mark,\n              {\n                // Set nice to false to avoid modify domain.\n                scale: {\n                  x: { domain: domainX, nice: false },\n                  y: { domain: domainY, nice: false },\n                },\n              },\n            ),\n          );\n\n          return {\n            ...viewOptions,\n            marks: newMarks,\n            clip: true, // Clip shapes out of plot area.\n          };\n        });\n\n        // Emit event.\n        emitter.emit('brush:filter', {\n          ...event,\n          data: { selection: [domainX, domainY] },\n        });\n\n        const newState = await update();\n        newView = newState.view;\n        filtering = false;\n        filtered = true;\n      },\n      reset: (event) => {\n        if (filtering || !filtered) return;\n\n        // Emit event.\n        const { scale } = view;\n        const { x: scaleX, y: scaleY } = scale;\n        const domainX = scaleX.getOptions().domain;\n        const domainY = scaleY.getOptions().domain;\n        emitter.emit('brush:filter', {\n          ...event,\n          data: { selection: [domainX, domainY] },\n        });\n        filtered = false;\n        newView = view;\n        setState('brushFilter');\n        update();\n      },\n      extent: undefined,\n      emitter,\n      scale,\n      coordinate,\n      ...defaultOptions,\n      ...rest,\n    });\n  };\n}\n", "import { BrushFilter } from './brushFilter';\nimport { brushXRegion } from './brushXHighlight';\n\nexport function BrushXFilter(options) {\n  return BrushFilter({\n    hideX: true,\n    ...options,\n    brushRegion: brushXRegion,\n  });\n}\n", "import { BrushFilter } from './brushFilter';\nimport { brushYRegion } from './brushYHighlight';\n\nexport function BrushYFilter(options) {\n  return BrushFilter({\n    hideY: true,\n    ...options,\n    brushRegion: brushYRegion,\n  });\n}\n", "import { isOrdinalScale } from '../utils/scale';\nimport { isFalsyValue } from './utils';\n\n/**\n * Runtime scale interface for adaptive filtering operations.\n * Represents the actual scale instance available at runtime.\n */\nexport interface RuntimeScale {\n  getOptions(): {\n    domain: unknown[];\n    range?: [number, number];\n    ratio?: number;\n  };\n  map(value: unknown): number;\n  invert(value: number): unknown;\n  getBandWidth?: (value?: unknown) => number;\n  getStep?: (value?: unknown) => number;\n}\n\n/**\n * Adaptive filter mode configuration.\n */\nexport type AdaptiveFilterMode =\n  | 'filter' // Enable adaptive filtering with data window filtering\n  | false // Disable adaptive filtering\n  | null; // Disable adaptive filtering\n\n/**\n * Mark data structure for adaptive filtering.\n * Contains mark identifier and associated channel data.\n */\nexport interface MarkDataPair {\n  markKey: string;\n  channelData: { [key: string]: unknown[] };\n}\n\n/**\n * Scale information for single-axis adaptive filtering.\n */\nexport interface SingleAxisScaleInfo {\n  currentScale: RuntimeScale;\n  targetScale: RuntimeScale;\n  isSourceDiscrete: boolean;\n  isTargetDiscrete: boolean;\n  shouldPreserveZeroBaseline: boolean;\n}\n\n/**\n * Scale information for multi-axis adaptive filtering.\n */\nexport interface MultiAxisScaleInfo {\n  currentScale: RuntimeScale;\n  targetScales: RuntimeScale[];\n  isSourceDiscrete: boolean;\n  isTargetDiscrete: boolean[];\n  shouldPreserveZeroBaseline: boolean[];\n  targetScaleKeys: string[];\n}\n\n/**\n * Parameters for single-axis adaptive filtering operations.\n */\nexport interface SingleAxisFilteringParams {\n  markDataPairs: MarkDataPair[];\n  domain: unknown[];\n  scaleInfo: SingleAxisScaleInfo;\n  adaptiveMode: AdaptiveFilterMode;\n  shouldFilterXAxis?: boolean;\n}\n\n/**\n * Parameters for multi-axis adaptive filtering operations.\n */\nexport interface MultiAxisFilteringParams {\n  markDataPairs: MarkDataPair[];\n  domain: unknown[];\n  scaleInfo: MultiAxisScaleInfo;\n  markToScaleMap: Map<string, string>;\n  adaptiveMode: AdaptiveFilterMode;\n  isViewSlider: boolean;\n  shouldFilterXAxis?: boolean;\n}\n\n/**\n * Options for calculating filtered domain values.\n */\ninterface CalculateFilteredDomainOptions {\n  isTargetDiscrete: boolean;\n  filteredValues: number[];\n  shouldPreserveZeroBaseline: boolean;\n}\n\n/**\n * Extracts scale information for single-axis adaptive filtering.\n *\n * @param shouldFilterXAxis - Whether to adapt X-axis (true) or Y-axis (false)\n * @param scaleX - X-axis scale instance\n * @param scaleY - Y-axis scale instance\n * @returns Scale information required for single-axis filtering\n */\nexport function extractSingleAxisScaleInfo(\n  shouldFilterXAxis: boolean,\n  scaleX: RuntimeScale,\n  scaleY: RuntimeScale,\n): SingleAxisScaleInfo {\n  const currentScale = shouldFilterXAxis ? scaleY : scaleX;\n  const targetScale = shouldFilterXAxis ? scaleX : scaleY;\n  const isSourceDiscrete = isOrdinalScale(currentScale);\n  const isTargetDiscrete = isOrdinalScale(targetScale);\n\n  const targetOriginalDomain = targetScale.getOptions().domain;\n  const shouldPreserveZeroBaseline =\n    !isTargetDiscrete &&\n    targetOriginalDomain &&\n    targetOriginalDomain.length >= 2 &&\n    targetOriginalDomain[0] === 0;\n\n  return {\n    currentScale,\n    targetScale,\n    isSourceDiscrete,\n    isTargetDiscrete,\n    shouldPreserveZeroBaseline,\n  };\n}\n\n/**\n * Extracts scale information for multi-axis adaptive filtering.\n * Handles scenarios where multiple independent scales exist (x1, x2, y1, y2, etc.).\n *\n * @param shouldFilterXAxis - Whether to adapt X-axis (true) or Y-axis (false)\n * @param scale - Record of all available scale instances\n * @param scaleX - Primary X-axis scale instance\n * @param scaleY - Primary Y-axis scale instance\n * @param channelDomain - Channel domain configuration\n * @returns Scale information required for multi-axis filtering\n */\nexport function extractMultiAxisScaleInfo(\n  shouldFilterXAxis: boolean,\n  scale: Record<string, RuntimeScale>,\n  scaleX: RuntimeScale,\n  scaleY: RuntimeScale,\n  channelDomain: Record<string, unknown[]>,\n): MultiAxisScaleInfo {\n  const currentScale = shouldFilterXAxis ? scaleY : scaleX;\n\n  /**\n   * Retrieves scale domains for a specific axis type (x or y).\n   * Supports both primary axes (x, y) and numbered variants (x1, x2, y1, y2).\n   */\n  const getAxisScaleDomains = (axisType: 'x' | 'y') => {\n    const axisScales: Record<string, unknown[]> = {};\n    Object.keys(channelDomain).forEach((key) => {\n      if (key === axisType || key.match(new RegExp(`^${axisType}\\\\d+$`))) {\n        axisScales[key] = channelDomain[key];\n      }\n    });\n    return axisScales;\n  };\n\n  const targetScaleDomain = shouldFilterXAxis\n    ? getAxisScaleDomains('x')\n    : getAxisScaleDomains('y');\n  const targetScaleKeys = Object.keys(targetScaleDomain);\n\n  const targetScales = targetScaleKeys.map((item) => scale[item]);\n  const isSourceDiscrete = isOrdinalScale(currentScale);\n  const isTargetDiscrete = targetScales.map((targetScale) =>\n    isOrdinalScale(targetScale),\n  );\n\n  const shouldPreserveZeroBaseline = targetScales.map((targetScale, index) => {\n    const targetOriginalDomain = targetScale.getOptions().domain;\n    const isDiscrete = isTargetDiscrete[index];\n    return (\n      !isDiscrete &&\n      targetOriginalDomain &&\n      targetOriginalDomain.length >= 2 &&\n      targetOriginalDomain[0] === 0\n    );\n  });\n\n  return {\n    currentScale,\n    targetScales,\n    isSourceDiscrete,\n    isTargetDiscrete,\n    shouldPreserveZeroBaseline,\n    targetScaleKeys,\n  };\n}\n\n/**\n * Removes duplicate values from an array and returns sorted result.\n *\n * @param values - Array of numeric values\n * @returns Sorted array with unique values\n */\nfunction getUniqueSortedValues(values: number[]): number[] {\n  const uniqueValues = Array.from(new Set(values));\n  return uniqueValues.sort((a, b) => a - b);\n}\n\n/**\n * Calculates the filtered domain based on target scale type and constraints.\n *\n * @param options - Configuration for domain calculation\n * @returns Calculated domain array\n */\nfunction calculateFilteredDomain({\n  isTargetDiscrete,\n  filteredValues,\n  shouldPreserveZeroBaseline,\n}: CalculateFilteredDomainOptions): unknown[] {\n  if (isTargetDiscrete) {\n    return getUniqueSortedValues(filteredValues);\n  } else {\n    const min = Math.min(...filteredValues);\n    const max = Math.max(...filteredValues);\n    return shouldPreserveZeroBaseline ? [0, max] : [min, max];\n  }\n}\n\n/**\n * Converts various value types to numeric for comparison.\n * Handles Date objects, strings, and numbers.\n */\nfunction convertToNumeric(value: unknown): number {\n  if (value instanceof Date) {\n    return value.getTime();\n  }\n  if (typeof value === 'string') {\n    return parseFloat(value);\n  }\n  return Number(value);\n}\n\n/**\n * Filters mark data based on domain constraints with bidirectional support.\n * Supports both discrete and continuous scales with proper domain calculation.\n *\n * @param markDataPairs - Array of mark data with channel information\n * @param domain - Domain values for filtering\n * @param isSourceDiscrete - Whether the source scale is discrete\n * @param isTargetDiscrete - Whether the target scale is discrete\n * @param shouldPreserveZeroBaseline - Whether to preserve zero baseline for continuous scales\n * @param adaptiveMode - Adaptive filtering mode configuration\n * @param shouldFilterXAxis - Whether to adapt X-axis (true) or Y-axis (false)\n * @returns Filtered domain array\n */\nexport function filterMarkDataByDomain(\n  markDataPairs: MarkDataPair[],\n  domain: unknown[],\n  isSourceDiscrete: boolean,\n  isTargetDiscrete: boolean,\n  shouldPreserveZeroBaseline: boolean,\n  adaptiveMode: AdaptiveFilterMode = 'filter',\n  shouldFilterXAxis = false,\n): unknown[] {\n  if (isFalsyValue(adaptiveMode)) {\n    return [];\n  }\n\n  const sourceChannel = shouldFilterXAxis ? 'y' : 'x';\n  const targetChannel = shouldFilterXAxis ? 'x' : 'y';\n  const allFilteredTargetValues: number[] = [];\n\n  for (const markData of markDataPairs) {\n    const { channelData } = markData;\n    const sourceValues = channelData[sourceChannel] || [];\n    const targetValues = channelData[targetChannel] || [];\n\n    // Handle different data structures based on channel type:\n    // X channel: one-dimensional array [x1, x2, x3, ...]\n    // Y channel: two-dimensional array [[y1, y2, y3, ...]]\n\n    // Normalize source values to one-dimensional array\n    const normalizedSourceValues = Array.isArray(sourceValues[0])\n      ? sourceValues[0] // If it's 2D array (Y channel), take first sub-array\n      : sourceValues; // If it's 1D array (X channel), use as is\n\n    // Handle target values based on their structure\n    const isTargetArray2D = Array.isArray(targetValues[0]);\n\n    if (normalizedSourceValues.length === 0) continue;\n\n    const dataLength = normalizedSourceValues.length;\n\n    for (let i = 0; i < dataLength; i++) {\n      const sourceValue = normalizedSourceValues[i];\n      let shouldInclude = false;\n\n      if (isSourceDiscrete) {\n        shouldInclude = domain.includes(sourceValue);\n      } else {\n        // Handle both numeric and Date domains\n        if (domain.length >= 2) {\n          const sourceTime = convertToNumeric(sourceValue);\n          const domainStartTime = convertToNumeric(domain[0]);\n          const domainEndTime = convertToNumeric(domain[domain.length - 1]);\n\n          if (\n            !isNaN(sourceTime) &&\n            !isNaN(domainStartTime) &&\n            !isNaN(domainEndTime)\n          ) {\n            shouldInclude =\n              sourceTime >= domainStartTime && sourceTime <= domainEndTime;\n          }\n        }\n      }\n\n      if (adaptiveMode === 'filter' && shouldInclude) {\n        // Collect target channel values for this data point\n        if (isTargetArray2D) {\n          // Target is 2D array (Y channel)\n          const numChannels = targetValues.length;\n          for (let channelIdx = 0; channelIdx < numChannels; channelIdx++) {\n            const channelData = targetValues[channelIdx];\n            if (Array.isArray(channelData) && i < channelData.length) {\n              const targetValue = channelData[i];\n              const numericValue = convertToNumeric(targetValue);\n              if (!isNaN(numericValue)) {\n                allFilteredTargetValues.push(numericValue);\n              }\n            }\n          }\n        } else {\n          // Target is 1D array (X channel)\n          if (i < targetValues.length) {\n            const targetValue = targetValues[i];\n            const numericValue = convertToNumeric(targetValue);\n            if (!isNaN(numericValue)) {\n              allFilteredTargetValues.push(numericValue);\n            }\n          }\n        }\n      }\n    }\n  }\n\n  if (allFilteredTargetValues.length > 0) {\n    return calculateFilteredDomain({\n      isTargetDiscrete,\n      filteredValues: allFilteredTargetValues,\n      shouldPreserveZeroBaseline,\n    });\n  }\n\n  return [];\n}\n\n/**\n * Processes adaptive filtering for single-axis scenarios.\n *\n * @param params - Single-axis filtering parameters\n * @returns Filtered domain array\n */\nexport function processSingleAxisFiltering({\n  markDataPairs,\n  domain,\n  scaleInfo,\n  adaptiveMode,\n  shouldFilterXAxis = false,\n}: SingleAxisFilteringParams): unknown[] {\n  const { isSourceDiscrete, isTargetDiscrete, shouldPreserveZeroBaseline } =\n    scaleInfo;\n\n  return filterMarkDataByDomain(\n    markDataPairs,\n    domain,\n    isSourceDiscrete,\n    isTargetDiscrete,\n    shouldPreserveZeroBaseline,\n    adaptiveMode,\n    shouldFilterXAxis,\n  );\n}\n\n/**\n * Processes multi-axis filtering for view-level sliders.\n * Handles scenarios with independent scales across multiple marks.\n *\n * @param params - Multi-axis filtering parameters\n * @returns Map of scale keys to filtered domain arrays\n */\nexport function processMultiAxisViewFiltering({\n  markDataPairs,\n  domain,\n  scaleInfo,\n  markToScaleMap,\n  adaptiveMode,\n  shouldFilterXAxis = false,\n}: MultiAxisFilteringParams): Map<string, unknown[]> {\n  const filteredDomain = new Map<string, unknown[]>();\n  const {\n    isSourceDiscrete,\n    isTargetDiscrete,\n    shouldPreserveZeroBaseline,\n    targetScaleKeys,\n  } = scaleInfo;\n\n  markDataPairs.forEach((markData) => {\n    const scaleKey = markToScaleMap.get(markData.markKey);\n    if (!scaleKey) return;\n\n    const scaleIndex = targetScaleKeys.indexOf(scaleKey);\n    if (scaleIndex === -1) return;\n\n    const currentIsTargetDiscrete = isTargetDiscrete[scaleIndex];\n    const currentShouldPreserveZeroBaseline =\n      shouldPreserveZeroBaseline[scaleIndex];\n\n    const markFilteredDomain = filterMarkDataByDomain(\n      [markData],\n      domain,\n      isSourceDiscrete,\n      currentIsTargetDiscrete,\n      currentShouldPreserveZeroBaseline,\n      adaptiveMode,\n      shouldFilterXAxis,\n    );\n\n    filteredDomain.set(scaleKey, markFilteredDomain);\n  });\n\n  return filteredDomain;\n}\n\n/**\n * Processes multi-axis filtering for mark-level sliders.\n * Uses all marks that share the same target scale key instead of just the target mark.\n *\n * @param markDataPairs - Array of mark data pairs\n * @param domain - Domain values for filtering\n * @param scaleInfo - Single-axis scale information\n * @param targetMarkKey - Key of the target mark to filter\n * @param targetScaleKey - Key of the target scale to update\n * @param adaptiveMode - Adaptive filtering mode\n * @param shouldFilterXAxis - Whether to adapt X-axis (true) or Y-axis (false)\n * @param markToScaleMap - Map from mark keys to scale keys to identify shared axes\n * @returns Map of scale keys to filtered domain arrays\n */\nexport function processMultiAxisMarkFiltering(\n  markDataPairs: MarkDataPair[],\n  domain: unknown[],\n  scaleInfo: SingleAxisScaleInfo,\n  targetMarkKey: string,\n  targetScaleKey: string,\n  adaptiveMode: AdaptiveFilterMode,\n  shouldFilterXAxis = false,\n  markToScaleMap?: Map<string, string>,\n): Map<string, unknown[]> {\n  const filteredDomain = new Map<string, unknown[]>();\n\n  // Early return if no data to process\n  if (markDataPairs.length === 0 || domain.length === 0) {\n    return filteredDomain;\n  }\n\n  const { isSourceDiscrete, isTargetDiscrete, shouldPreserveZeroBaseline } =\n    scaleInfo;\n\n  // Find all marks that share the same target scale key\n  const relevantMarkData = markToScaleMap\n    ? markDataPairs.filter((markData) => {\n        const markScaleKey = markToScaleMap.get(markData.markKey);\n        return markScaleKey === targetScaleKey;\n      })\n    : markDataPairs.filter((markData) => markData.markKey === targetMarkKey);\n\n  // Early return if no relevant marks found\n  if (relevantMarkData.length === 0) {\n    return filteredDomain;\n  }\n\n  const markFilteredDomain = filterMarkDataByDomain(\n    relevantMarkData,\n    domain,\n    isSourceDiscrete,\n    isTargetDiscrete,\n    shouldPreserveZeroBaseline,\n    adaptiveMode,\n    shouldFilterXAxis,\n  );\n\n  filteredDomain.set(targetScaleKey, markFilteredDomain);\n  return filteredDomain;\n}\n\n/**\n * Updates channel domains with filtered results.\n * Supports both single-axis and multi-axis scenarios.\n *\n * @param channelDomain - Current channel domain configuration\n * @param filteredDomain - Filtered domain values (array for single-axis, Map for multi-axis)\n * @param shouldFilterXAxis - Whether X-axis is being filtered\n * @param isMultiAxis - Whether this is a multi-axis scenario\n */\nexport function updateChannelDomains(\n  channelDomain: Record<string, unknown[]>,\n  filteredDomain: unknown[] | Map<string, unknown[]>,\n  shouldFilterXAxis: boolean,\n  isMultiAxis: boolean,\n): void {\n  if (isMultiAxis && filteredDomain instanceof Map) {\n    filteredDomain.forEach((domain, scaleKey) => {\n      if (domain && Array.isArray(domain) && domain.length > 0) {\n        channelDomain[scaleKey] = domain;\n      }\n    });\n  } else if (!isMultiAxis && Array.isArray(filteredDomain)) {\n    if (filteredDomain.length > 0) {\n      channelDomain[shouldFilterXAxis ? 'x' : 'y'] = filteredDomain;\n    }\n  }\n}\n", "import { deepMix, get, throttle, upperFirst } from '@antv/util';\nimport { CustomEvent } from '@antv/g';\nimport { isTranspose } from '../utils/coordinate';\nimport { invert, domainOf, sliderAbstractOf } from '../utils/scale';\nimport { SliderFilterInteraction } from '../spec/interaction';\nimport { Mark } from '../spec';\nimport { G2ViewDescriptor, G2MarkState } from '../runtime/types/common';\nimport {\n  extractChannelValues,\n  isFalsyValue,\n  calculateMultiAxisChannelDomains,\n  calculateAllIndependentScaleInfo,\n} from './utils';\nimport {\n  RuntimeScale,\n  extractSingleAxisScaleInfo,\n  extractMultiAxisScaleInfo,\n  processSingleAxisFiltering,\n  processMultiAxisViewFiltering,\n  processMultiAxisMarkFiltering,\n  updateChannelDomains,\n} from './adaptiveFilter';\n\nexport const SLIDER_CLASS_NAME = 'slider';\n\n/**\n * Calculates extra inset needed for point marks based on size scale range or values\n *\n * @param view - View descriptor containing markState\n * @returns Calculated inset value from size scale range or values\n */\nfunction calculatePointInset(view: G2ViewDescriptor): number {\n  if (!view?.markState) return 0;\n\n  let maxSize = 0;\n\n  for (const [mark, state] of view.markState.entries()) {\n    if (mark.type !== 'point' || !state?.channels) continue;\n\n    const sizeChannel = state.channels?.find((ch) => ch.name === 'size');\n    if (!sizeChannel) continue;\n\n    // Priority 1: Use scale range if available\n    if (sizeChannel.scale?.range?.length > 0) {\n      const rangeMax = Math.max(\n        ...sizeChannel.scale.range.filter((val) => typeof val === 'number'),\n      );\n      maxSize = Math.max(maxSize, rangeMax);\n      continue;\n    }\n\n    // Priority 2: Fallback to values maximum\n    if (sizeChannel.values?.length > 0) {\n      const sizes = sizeChannel.values\n        .filter((item) => item.value !== undefined)\n        .flatMap((item) =>\n          Array.isArray(item.value) ? item.value : [item.value],\n        )\n        .filter(\n          (value): value is number =>\n            typeof value === 'number' && !isNaN(value),\n        );\n\n      if (sizes.length > 0) {\n        maxSize = Math.max(maxSize, ...sizes);\n      }\n    }\n  }\n\n  return maxSize;\n}\n\n/**\n * Options for filtering data by domain.\n * Uses Mark[] type for better type safety.\n */\ninterface FilterDataByDomainOptions {\n  marks: Mark[];\n  [key: string]: unknown;\n}\n\n/**\n * Scale configuration options.\n * Uses Record<string, unknown> to accommodate various scale property types.\n */\ninterface ScaleOptions {\n  [key: string]: unknown;\n}\n\n/**\n * Emits filter events with proper X/Y domain mapping.\n *\n * @param emitter - Event emitter instance\n * @param eventName - Name of the event to emit\n * @param event - Event data object\n * @param domain0 - Primary domain values\n * @param channelDomain - Channel domain configuration\n * @param isX - Whether this is an X-axis event\n * @param nativeEvent - Whether this is a native DOM event\n */\nfunction emitFilterEvent(\n  emitter: { emit: (eventName: string, data: unknown) => void },\n  eventName: string,\n  event: Record<string, unknown>,\n  domain0: unknown[],\n  channelDomain: Record<string, unknown[]>,\n  isX: boolean,\n  nativeEvent: boolean,\n): void {\n  if (nativeEvent) {\n    const X = isX ? domain0 : channelDomain.x;\n    const Y = isX ? channelDomain.y : domain0;\n    emitter.emit(eventName, {\n      ...event,\n      nativeEvent,\n      data: { selection: [extentOf(X), extentOf(Y)] },\n    });\n  }\n}\n\n/**\n * Updates slider state with appropriate filter function.\n * Handles both single-axis and multi-axis scenarios.\n *\n * @param setState - State setter function\n * @param slider - Slider component instance\n * @param params - Configuration parameters for state update\n */\nfunction updateSliderState(\n  setState: (slider: unknown, fn: (options: unknown) => unknown) => void,\n  slider: unknown,\n  view: G2ViewDescriptor,\n  params: {\n    domain0: unknown[];\n    filteredDomain: unknown[] | Map<string, unknown[]>;\n    channel0: string;\n    channel1: string;\n    prefix: string;\n    hasState: boolean;\n    isMultiAxis: boolean;\n    markToScaleMap?: Map<string, string>;\n    enableAdaptiveFiltering: boolean;\n  },\n): void {\n  const {\n    domain0,\n    filteredDomain,\n    channel0,\n    channel1,\n    prefix,\n    hasState,\n    isMultiAxis,\n    markToScaleMap,\n    enableAdaptiveFiltering,\n  } = params;\n\n  if (isMultiAxis && filteredDomain instanceof Map) {\n    setState(slider, (options: FilterDataByDomainOptions) => ({\n      ...filterDataByDomainMultiAxis(\n        options,\n        view,\n        {\n          [channel0]: { domain: domain0, nice: false },\n        },\n        prefix,\n        hasState,\n        channel0,\n        channel1,\n        markToScaleMap || new Map(),\n        filteredDomain,\n      ),\n    }));\n  } else {\n    setState(slider, (options: FilterDataByDomainOptions) => ({\n      ...filterDataByDomain(\n        options,\n        view,\n        {\n          [channel0]: { domain: domain0, nice: false },\n          ...(enableAdaptiveFiltering && Array.isArray(filteredDomain)\n            ? {\n                [channel1]: {\n                  domain: filteredDomain,\n                  nice: true,\n                },\n              }\n            : {}),\n        },\n        prefix,\n        hasState,\n        channel0,\n        channel1,\n      ),\n    }));\n  }\n}\n\n/**\n * Filters data by domain for single-axis scenarios.\n * Applies scale options and preserves slider state.\n *\n * @param options - Filter data options\n * @param scaleOptions - Scale configuration\n * @param prefix - Slider prefix identifier\n * @param hasState - Whether slider has state\n * @param channel0 - Primary channel (x or y)\n * @param channel1 - Secondary channel (y or x)\n * @returns Filtered options with updated marks\n */\nfunction filterDataByDomain(\n  options: FilterDataByDomainOptions,\n  view: G2ViewDescriptor,\n  scaleOptions: ScaleOptions,\n  prefix: string,\n  hasState = false,\n  channel0 = 'x',\n  channel1 = 'y',\n) {\n  const { marks } = options;\n  const extraInset = calculatePointInset(view);\n\n  const newMarks = marks.map((mark) =>\n    deepMix(\n      {\n        // Hide label to keep smooth transition.\n        axis: {\n          x: { transform: [{ type: 'hide' }] },\n          y: { transform: [{ type: 'hide' }] },\n        },\n      },\n      mark,\n      {\n        scale: scaleOptions,\n        [prefix]: {\n          ...(mark[prefix]?.[channel0] && {\n            [channel0]: { preserve: true, ...(hasState && { ratio: null }) },\n          }),\n          ...(mark[prefix]?.[channel1] && {\n            [channel1]: { preserve: true },\n          }),\n        },\n        animate: false,\n      },\n    ),\n  );\n\n  return {\n    ...options,\n    marks: newMarks,\n    // Add adaptive inset based on actual point sizes from markState\n    insetLeft: extraInset,\n    insetRight: extraInset,\n    insetTop: extraInset,\n    insetBottom: extraInset,\n    clip: true,\n    animate: false,\n  };\n}\n\n/**\n * Filters data by domain for multi-axis scenarios.\n * Handles independent scales and mark-specific filtering.\n *\n * @param options - Filter data options\n * @param scaleOptions - Scale configuration\n * @param prefix - Slider prefix identifier\n * @param hasState - Whether slider has state\n * @param channel0 - Primary channel (x or y)\n * @param channel1 - Secondary channel (y or x)\n * @param markToScaleMap - Mapping of marks to scale keys\n * @param filteredDomainList - Map of filtered domains by scale key\n * @returns Filtered options with updated marks\n */\nfunction filterDataByDomainMultiAxis(\n  options: FilterDataByDomainOptions,\n  view: G2ViewDescriptor,\n  scaleOptions: ScaleOptions,\n  prefix: string,\n  hasState = false,\n  channel0 = 'x',\n  channel1 = 'y',\n  markToScaleMap = new Map<string, string>(),\n  filteredDomainList = new Map<string, unknown[]>(),\n) {\n  const { marks } = options;\n  const extraInset = calculatePointInset(view);\n\n  const newMarks = marks.map((mark: Record<string, unknown>) => {\n    const markKey =\n      typeof mark?.key === 'string' ? mark.key : String(mark?.key || '');\n    const markToScale = markToScaleMap.get(markKey);\n    const filterDomain = filteredDomainList.get(markToScale);\n    const scaleNew = filterDomain && {\n      y: {\n        domain: filterDomain,\n        nice: true,\n        ...(markToScale !== 'y'\n          ? {\n              independent: true,\n            }\n          : undefined),\n      },\n    };\n    return deepMix(\n      {\n        // Hide label to keep smooth transition.\n        axis: {\n          x: { transform: [{ type: 'hide' }] },\n          y: { transform: [{ type: 'hide' }] },\n        },\n      },\n      mark,\n      {\n        scale: { ...scaleOptions, ...scaleNew },\n        [prefix]: {\n          ...(mark[prefix]?.[channel0] && {\n            [channel0]: { preserve: true, ...(hasState && { ratio: null }) },\n          }),\n          ...(mark[prefix]?.[channel1] && {\n            [channel1]: { preserve: true },\n          }),\n        },\n        animate: false,\n      },\n    );\n  });\n  return {\n    ...options,\n    marks: newMarks,\n    // Add adaptive inset based on actual point sizes from markState\n    insetLeft: extraInset,\n    insetRight: extraInset,\n    insetTop: extraInset,\n    insetBottom: extraInset,\n    clip: true,\n    animate: false,\n  };\n}\n\n/**\n * Converts slider values to abstract domain values.\n *\n * @param values - Slider value range [start, end]\n * @param scale - Scale instance for conversion\n * @param reverse - Whether to reverse the mapping\n * @returns Abstract domain values\n */\nfunction abstractValue(\n  values: [number, number],\n  scale: RuntimeScale,\n  reverse: boolean,\n) {\n  const [x, x1] = values;\n  const v = reverse ? (d: number) => 1 - d : (d: number) => d;\n  const d0 = invert(scale, v(x), true);\n  const d1 = invert(scale, v(x1), false);\n  return domainOf(scale, [d0, d1]);\n}\n\n/**\n * Gets the extent (first and last) values from a domain array.\n *\n * @param domain - Domain array\n * @returns Array containing first and last domain values\n */\nfunction extentOf(domain: unknown[]): unknown[] {\n  return [domain[0], domain[domain.length - 1]];\n}\n\n/**\n * @todo Support click to reset after fix click and dragend conflict.\n */\nexport function SliderFilter({\n  initDomain = {},\n  className = SLIDER_CLASS_NAME,\n  prefix = 'slider',\n  setValue = (component, values) => component.setValues(values),\n  hasState = false,\n  wait = 50,\n  leading = true,\n  trailing = false,\n  adaptiveMode = 'filter',\n  getInitValues = (slider) => {\n    const values = slider?.attributes?.values;\n    if (values[0] !== 0 || values[1] !== 1) return values;\n  },\n}: SliderFilterInteraction) {\n  return (context: any, _: any, emitter: any) => {\n    const { container, view, update, setState } = context;\n    const sliders = container.getElementsByClassName(className);\n    if (!sliders.length) return () => {};\n\n    let filtering = false;\n    const { scale, coordinate } = view;\n    const { x: scaleX, y: scaleY } = scale;\n    const transposed = isTranspose(coordinate);\n\n    const channelOf = (orientation: string) => {\n      const channel0 = orientation === 'vertical' ? 'y' : 'x';\n      const channel1 = orientation === 'vertical' ? 'x' : 'y';\n      if (transposed) return [channel1, channel0];\n      return [channel0, channel1];\n    };\n\n    const sliderHandler = new Map();\n    const emitHandlers = new Set<[string, (event: any) => void]>();\n\n    const independentScaleInfo = calculateAllIndependentScaleInfo(view);\n\n    const channelDomain = calculateMultiAxisChannelDomains(\n      view,\n      initDomain,\n      scaleX,\n      scaleY,\n      independentScaleInfo,\n    );\n\n    const sliderArray = Array.from(sliders);\n\n    const hasSliderOfType = (type: string) =>\n      sliderArray.some((slider: any) => {\n        const { orientation } = slider.attributes;\n        const [channel0] = channelOf(orientation);\n        return channel0 === type;\n      });\n\n    const hasOnlyXSlider = hasSliderOfType('x') && !hasSliderOfType('y');\n    const hasOnlyYSlider = hasSliderOfType('y') && !hasSliderOfType('x');\n\n    const enableAdaptiveFiltering =\n      !isFalsyValue(adaptiveMode) && (hasOnlyXSlider || hasOnlyYSlider);\n\n    for (const slider of sliders) {\n      const { orientation } = slider.attributes;\n      const [channel0, channel1] = channelOf(orientation);\n      const eventName = `${prefix}${upperFirst(channel0)}:filter`;\n      const isX = channel0 === 'x';\n      const { ratio: ratioX } = scaleX.getOptions();\n      const { ratio: ratioY } = scaleY.getOptions();\n      const domainsOf = (event: any): [unknown[], unknown[]] => {\n        if (event.data) {\n          const { selection } = event.data;\n          const [X = extentOf(channelDomain.x), Y = extentOf(channelDomain.y)] =\n            selection;\n          return isX\n            ? [domainOf(scaleX, X, ratioX), domainOf(scaleY, Y, ratioY)]\n            : [domainOf(scaleY, Y, ratioY), domainOf(scaleX, X, ratioX)];\n        }\n\n        const { value: values } = event.detail;\n        const scale0 = scale[channel0];\n        const domain0 = abstractValue(\n          values,\n          scale0,\n          transposed && orientation === 'horizontal',\n        );\n        const domain1 = channelDomain[channel1];\n        return [domain0, domain1];\n      };\n\n      // Create value change handler with independent filtering state\n      // Each slider maintains its own filtering state to prevent mutual interference in dual-axis scenarios\n      let isFiltering = false;\n      const setFiltering = (value: boolean) => {\n        isFiltering = value;\n        // Only reset global state when all sliders are not filtering\n        if (!value) {\n          filtering = false;\n        }\n      };\n\n      const onValueChange = createValueChangeHandler({\n        getFiltering: () => isFiltering,\n        setFiltering,\n        domainsOf,\n        view,\n        independentScaleInfo,\n        enableAdaptiveFiltering,\n        hasOnlyXSlider,\n        hasOnlyYSlider,\n        adaptiveMode,\n        scaleX,\n        scaleY,\n        scale,\n        channelDomain,\n        channel0,\n        channel1,\n        isX,\n        emitter,\n        eventName,\n        setState,\n        slider,\n        prefix,\n        hasState,\n        update,\n        wait,\n        leading,\n        trailing,\n      });\n\n      const emitHandler = (event: any) => {\n        const { nativeEvent } = event;\n        if (nativeEvent) return;\n\n        const { data } = event;\n        const { selection } = data;\n        const [X, Y] = selection;\n\n        slider.dispatchEvent(\n          new CustomEvent('valuechange', {\n            data,\n            nativeEvent: false,\n          }),\n        );\n\n        const V = isX\n          ? sliderAbstractOf(X, scaleX)\n          : sliderAbstractOf(Y, scaleY);\n        setValue(slider, V);\n      };\n\n      emitter.on(eventName, emitHandler);\n\n      slider.addEventListener('valuechange', onValueChange);\n      sliderHandler.set(slider, onValueChange);\n      emitHandlers.add([eventName, emitHandler]);\n\n      const values = getInitValues(slider);\n\n      if (values) {\n        slider.dispatchEvent(\n          new CustomEvent('valuechange', {\n            detail: {\n              value: values,\n            },\n            nativeEvent: false,\n            initValue: true,\n          }),\n        );\n      }\n    }\n\n    return () => {\n      for (const [slider, handler] of sliderHandler) {\n        slider.removeEventListener('valuechange', handler);\n      }\n      for (const [name, handler] of emitHandlers) {\n        emitter.off(name, handler);\n      }\n    };\n  };\n}\n\n/**\n * Processes multi-axis filtering for view-level sliders.\n * Handles both view-level and mark-level slider configurations.\n *\n * @param params - Multi-axis filtering parameters\n * @returns Filtered domain mapping\n */\nfunction processMultiAxisFiltering({\n  view,\n  domain0,\n  shouldFilterXAxis,\n  enableAdaptiveFiltering,\n  markDataPairs,\n  adaptiveMode,\n  scaleX,\n  scaleY,\n  scale,\n  channelDomain,\n  independentScaleInfo,\n  channel0,\n}: {\n  view: any;\n  domain0: unknown[];\n  shouldFilterXAxis: boolean;\n  enableAdaptiveFiltering: boolean;\n  markDataPairs: any[];\n  adaptiveMode: any;\n  scaleX: RuntimeScale;\n  scaleY: RuntimeScale;\n  scale: Record<string, RuntimeScale>;\n  channelDomain: Record<string, unknown[]>;\n  independentScaleInfo: any;\n  channel0: string;\n}): {\n  filteredDomain: Map<string, unknown[]>;\n  markToScaleMap: Map<string, string>;\n} {\n  const filteredDomain = new Map<string, unknown[]>();\n  const markToScaleMap = new Map<string, string>();\n\n  if (\n    !enableAdaptiveFiltering ||\n    markDataPairs.length === 0 ||\n    !domain0?.length\n  ) {\n    return { filteredDomain, markToScaleMap };\n  }\n\n  const viewSlider = get(view, 'options.slider');\n  const isViewSlider =\n    Object.keys(viewSlider).length > 0 &&\n    Object.prototype.hasOwnProperty.call(viewSlider, channel0);\n\n  if (isViewSlider) {\n    // Handle view-level slider\n    const multiAxisScaleInfo = extractMultiAxisScaleInfo(\n      shouldFilterXAxis,\n      scale,\n      scaleX,\n      scaleY,\n      channelDomain,\n    );\n\n    const scaleMapToUse = shouldFilterXAxis\n      ? independentScaleInfo.markToXScaleMap\n      : independentScaleInfo.markToYScaleMap;\n\n    scaleMapToUse.forEach((scaleKey, markKey) => {\n      markToScaleMap.set(markKey, scaleKey);\n    });\n\n    const processedFilteredDomain = processMultiAxisViewFiltering({\n      markDataPairs,\n      domain: domain0,\n      scaleInfo: multiAxisScaleInfo,\n      markToScaleMap,\n      adaptiveMode,\n      isViewSlider: true,\n      shouldFilterXAxis,\n    });\n\n    updateChannelDomains(\n      channelDomain,\n      processedFilteredDomain,\n      shouldFilterXAxis,\n      true,\n    );\n    return { filteredDomain: processedFilteredDomain, markToScaleMap };\n  } else {\n    // Handle mark-level slider\n    const targetMarkKey = findTargetMarkKey(view, channel0);\n    if (targetMarkKey) {\n      const singleAxisScaleInfo = extractSingleAxisScaleInfo(\n        shouldFilterXAxis,\n        scaleX,\n        scaleY,\n      );\n      const scaleMapping = shouldFilterXAxis\n        ? independentScaleInfo.markToXScaleMap\n        : independentScaleInfo.markToYScaleMap;\n      const targetScaleKey = scaleMapping.get(targetMarkKey) || '';\n\n      if (targetScaleKey) {\n        markToScaleMap.set(targetMarkKey, targetScaleKey);\n        const processedFilteredDomain = processMultiAxisMarkFiltering(\n          markDataPairs,\n          domain0,\n          singleAxisScaleInfo,\n          targetMarkKey,\n          targetScaleKey,\n          adaptiveMode,\n          shouldFilterXAxis,\n          scaleMapping,\n        );\n        return { filteredDomain: processedFilteredDomain, markToScaleMap };\n      }\n    }\n  }\n\n  return { filteredDomain, markToScaleMap };\n}\n\n/**\n * Finds the target mark key for mark-level sliders.\n *\n * @param view - View instance\n * @param channel0 - Channel identifier\n * @returns Target mark key or null if not found\n */\nfunction findTargetMarkKey(view: any, channel0: string): string | null {\n  for (const [mark] of view.markState.entries()) {\n    const markSlider = get(mark, 'slider');\n    const hasMarkSlider =\n      Object.keys(markSlider || {}).length > 0 &&\n      Object.prototype.hasOwnProperty.call(markSlider, channel0);\n    if (hasMarkSlider) {\n      return String(mark.key || '');\n    }\n  }\n  return null;\n}\n\n/**\n * Processes single-axis filtering for scenarios without independent scales.\n *\n * @param params - Single-axis filtering parameters\n * @returns Filtered domain array\n */\nfunction processSingleAxisFilteringWithDomainUpdate({\n  domain0,\n  domain1,\n  shouldFilterXAxis,\n  enableAdaptiveFiltering,\n  markDataPairs,\n  adaptiveMode,\n  scaleX,\n  scaleY,\n  channelDomain,\n  hasOnlyXSlider,\n  hasOnlyYSlider,\n  isX,\n}: {\n  domain0: unknown[];\n  domain1: unknown[];\n  shouldFilterXAxis: boolean;\n  enableAdaptiveFiltering: boolean;\n  markDataPairs: any[];\n  adaptiveMode: any;\n  scaleX: RuntimeScale;\n  scaleY: RuntimeScale;\n  channelDomain: Record<string, unknown[]>;\n  hasOnlyXSlider: boolean;\n  hasOnlyYSlider: boolean;\n  isX: boolean;\n}): unknown[] {\n  let filteredDomain: unknown[] = domain1;\n\n  if (\n    enableAdaptiveFiltering &&\n    markDataPairs.length > 0 &&\n    ((hasOnlyXSlider && isX) || (hasOnlyYSlider && !isX)) &&\n    domain0?.length > 0\n  ) {\n    const singleAxisScaleInfo = extractSingleAxisScaleInfo(\n      shouldFilterXAxis,\n      scaleX,\n      scaleY,\n    );\n    filteredDomain = processSingleAxisFiltering({\n      markDataPairs,\n      domain: domain0,\n      scaleInfo: singleAxisScaleInfo,\n      adaptiveMode,\n      shouldFilterXAxis,\n    });\n\n    // Update channelDomain if filtering was applied\n    updateChannelDomains(\n      channelDomain,\n      filteredDomain,\n      shouldFilterXAxis,\n      false,\n    );\n  }\n\n  return filteredDomain;\n}\n\n/**\n * Creates the main value change handler for slider filtering.\n *\n * @param params - Handler creation parameters\n * @returns Throttled value change handler\n */\nfunction createValueChangeHandler({\n  getFiltering,\n  setFiltering,\n  domainsOf,\n  view,\n  independentScaleInfo,\n  enableAdaptiveFiltering,\n  hasOnlyXSlider,\n  hasOnlyYSlider,\n  adaptiveMode,\n  scaleX,\n  scaleY,\n  scale,\n  channelDomain,\n  channel0,\n  channel1,\n  isX,\n  emitter,\n  eventName,\n  setState,\n  slider,\n  prefix,\n  hasState,\n  update,\n  wait,\n  leading,\n  trailing,\n}: {\n  getFiltering: () => boolean;\n  setFiltering: (value: boolean) => void;\n  domainsOf: (event: any) => [unknown[], unknown[]];\n  view: any;\n  independentScaleInfo: any;\n  enableAdaptiveFiltering: boolean;\n  hasOnlyXSlider: boolean;\n  hasOnlyYSlider: boolean;\n  adaptiveMode: any;\n  scaleX: RuntimeScale;\n  scaleY: RuntimeScale;\n  scale: Record<string, RuntimeScale>;\n  channelDomain: Record<string, unknown[]>;\n  channel0: string;\n  channel1: string;\n  isX: boolean;\n  emitter: any;\n  eventName: string;\n  setState: any;\n  slider: any;\n  prefix: string;\n  hasState: boolean;\n  update: () => Promise<void>;\n  wait: number;\n  leading: boolean;\n  trailing: boolean;\n}) {\n  return throttle(\n    async (event: any) => {\n      const { initValue = false } = event;\n      if (getFiltering() && !initValue) {\n        return;\n      }\n      setFiltering(true);\n\n      const { nativeEvent = true } = event;\n      const { markDataPairs } = extractChannelValues(view);\n      const hasIndependentScale =\n        independentScaleInfo[`hasIndependent${channel1.toUpperCase()}`];\n\n      if (hasIndependentScale) {\n        // Handle multi-axis scenario\n        const [domain0] = domainsOf(event);\n        const shouldFilterXAxis = hasOnlyYSlider && !isX;\n        const { filteredDomain, markToScaleMap } = processMultiAxisFiltering({\n          view,\n          domain0,\n          shouldFilterXAxis,\n          enableAdaptiveFiltering:\n            enableAdaptiveFiltering &&\n            ((hasOnlyXSlider && isX) || (hasOnlyYSlider && !isX)),\n          markDataPairs,\n          adaptiveMode,\n          scaleX,\n          scaleY,\n          scale,\n          channelDomain,\n          independentScaleInfo,\n          channel0,\n        });\n\n        // Update channelDomain to reflect the current filter state\n        channelDomain[channel0] = domain0;\n\n        emitFilterEvent(\n          emitter,\n          eventName,\n          event,\n          domain0,\n          channelDomain,\n          isX,\n          nativeEvent,\n        );\n        updateSliderState(setState, slider, view, {\n          domain0,\n          filteredDomain,\n          channel0,\n          channel1,\n          prefix,\n          hasState,\n          isMultiAxis: true,\n          markToScaleMap,\n          enableAdaptiveFiltering,\n        });\n      } else {\n        // Handle single-axis scenario\n        const [domain0, domain1] = domainsOf(event);\n        const shouldFilterXAxis = hasOnlyYSlider && !isX;\n        const filteredDomain = processSingleAxisFilteringWithDomainUpdate({\n          domain0,\n          domain1,\n          shouldFilterXAxis,\n          enableAdaptiveFiltering,\n          markDataPairs,\n          adaptiveMode,\n          scaleX,\n          scaleY,\n          channelDomain,\n          hasOnlyXSlider,\n          hasOnlyYSlider,\n          isX,\n        });\n\n        // Update channelDomain to reflect the current filter state\n        channelDomain[channel0] = domain0;\n\n        emitFilterEvent(\n          emitter,\n          eventName,\n          event,\n          domain0,\n          channelDomain,\n          isX,\n          nativeEvent,\n        );\n        updateSliderState(setState, slider, view, {\n          domain0,\n          filteredDomain,\n          channel0,\n          channel1,\n          prefix,\n          hasState,\n          isMultiAxis: false,\n          markToScaleMap: undefined,\n          enableAdaptiveFiltering,\n        });\n      }\n\n      await update();\n      setFiltering(false);\n    },\n    wait,\n    { leading, trailing },\n  );\n}\n", "import { CustomEvent, DisplayObject } from '@antv/g';\nimport { isTranspose } from '../utils/coordinate';\nimport { SLIDER_CLASS_NAME } from './sliderFilter';\nimport { calculateSensitivityMultiplier } from './utils';\n\n/**\n * SliderWheel interaction for mouse wheel/touchpad gestures on charts.\n */\n\n/**\n * Get the real DOM canvas element from G2 container.\n * This helper function provides better type safety than using 'as any' directly.\n */\nfunction getCanvasDOM(container: any): HTMLElement | null {\n  try {\n    const canvas = container.ownerDocument?.defaultView;\n    if (!canvas || typeof canvas.getContextService !== 'function') {\n      return null;\n    }\n    const dom = canvas.getContextService().getDomElement();\n    return dom instanceof HTMLElement ? dom : null;\n  } catch {\n    return null;\n  }\n}\n\ntype SliderDirection = true | false | 'shift' | 'ctrl' | 'alt';\n\ninterface SliderWheelOptions {\n  className?: string;\n  setValue?: (component: any, values: [number, number]) => void;\n  minRange?: number; // Minimum range (0.000001-1), auto-clamped\n  wheelSensitivity?: number;\n  x?: SliderDirection;\n  y?: SliderDirection;\n}\n\nexport function SliderWheel({\n  className = SLIDER_CLASS_NAME,\n  setValue = (component, values) => component.setValues(values),\n  minRange = 0.01,\n  wheelSensitivity = 0.05,\n  x = true,\n  y = true,\n}: SliderWheelOptions = {}) {\n  return (context) => {\n    const { container, view } = context;\n    const { coordinate } = view;\n    const transposed = isTranspose(coordinate);\n\n    // Get the real DOM canvas element to attach wheel listener\n    const canvasDOM = getCanvasDOM(container);\n    const safeMinRange = Math.max(0.000001, Math.min(1, minRange));\n\n    const sliders = container.getElementsByClassName(className);\n    if (!sliders.length) return () => {};\n\n    const isModifierKeyActive = (\n      config: SliderDirection,\n      event: WheelEvent,\n    ): boolean => {\n      if (config === true) return true;\n      if (config === false) return false;\n      if (config === 'shift')\n        return event.shiftKey && !event.ctrlKey && !event.altKey;\n      if (config === 'ctrl')\n        return event.ctrlKey && !event.shiftKey && !event.altKey;\n      if (config === 'alt')\n        return event.altKey && !event.shiftKey && !event.ctrlKey;\n      return false;\n    };\n\n    const triggerSliderValueChange = (\n      slider: any,\n      values: [number, number],\n    ) => {\n      setValue(slider, values);\n      slider.dispatchEvent(\n        new CustomEvent('valuechange', {\n          detail: { value: values },\n          nativeEvent: true,\n        }),\n      );\n    };\n\n    /**\n     * Calculate zoom center based on mouse position relative to slider track.\n     * @param mousePos - Mouse position (X or Y) relative to canvas\n     * @param sliderPos - Slider position (X or Y)\n     * @param trackLength - Length of slider track\n     * @param v0 - Current selection start value [0-1]\n     * @param v1 - Current selection end value [0-1]\n     * @returns Normalized center position [0-1] clamped to current selection\n     */\n    const calculateZoomCenter = (\n      mousePos: number,\n      sliderPos: number,\n      trackLength: number,\n      v0: number,\n      v1: number,\n    ): number => {\n      const relativePos = mousePos - sliderPos;\n      const normalizedPosition = relativePos / trackLength;\n      // Clamp to [0, 1] range first, then to current selection range\n      const clamped = Math.max(0, Math.min(1, normalizedPosition));\n      return Math.max(v0, Math.min(v1, clamped));\n    };\n\n    const handleWheel = (event: WheelEvent) => {\n      // Early return if canvas DOM is not available\n      if (!canvasDOM) return;\n\n      // Check if the event target is within our canvas container\n      const target = event.target as HTMLElement;\n      if (!canvasDOM.contains(target)) {\n        return;\n      }\n\n      // Get mouse position relative to canvas\n      const canvasRect = canvasDOM.getBoundingClientRect();\n      const mouseX = event.clientX - canvasRect.left;\n      const mouseY = event.clientY - canvasRect.top;\n\n      // Find all sliders that should respond to this event\n      const activeSliders: DisplayObject[] = [];\n\n      for (const slider of sliders) {\n        const { values, orientation } = (slider as any).attributes;\n        if (!values) continue;\n\n        const isHorizontal = orientation === 'horizontal';\n        const actualAxis = transposed\n          ? isHorizontal\n            ? 'y'\n            : 'x'\n          : isHorizontal\n          ? 'x'\n          : 'y';\n        const axisConfig = actualAxis === 'x' ? x : y;\n\n        if (isModifierKeyActive(axisConfig, event)) {\n          activeSliders.push(slider);\n        }\n      }\n\n      // If no slider should handle this event, let it propagate\n      if (activeSliders.length === 0) {\n        return;\n      }\n\n      // Prevent page scroll since we have active sliders\n      event.preventDefault();\n      event.stopPropagation();\n\n      // Process all active sliders\n      for (const slider of activeSliders) {\n        const {\n          values,\n          orientation,\n          x: sliderX,\n          y: sliderY,\n          trackLength,\n        } = (slider as any).attributes;\n        const [v0, v1] = values;\n        const range = v1 - v0;\n        const isHorizontal = orientation === 'horizontal';\n\n        // Calculate zoom center based on mouse position relative to slider\n        const center = isHorizontal\n          ? calculateZoomCenter(mouseX, sliderX, trackLength, v0, v1)\n          : calculateZoomCenter(mouseY, sliderY, trackLength, v0, v1);\n\n        const adaptiveSensitivity =\n          wheelSensitivity * calculateSensitivityMultiplier(range);\n\n        const delta = event.deltaY * adaptiveSensitivity;\n        const zoomFactor = 1 + delta;\n        const newRange = Math.max(\n          safeMinRange,\n          Math.min(1, range * zoomFactor),\n        );\n\n        // Calculate new range boundaries based on mouse position\n        // The zoom should maintain the ratio of distances from center to edges\n        const leftRatio = (center - v0) / range;\n        const rightRatio = (v1 - center) / range;\n\n        let newV0 = center - newRange * leftRatio;\n        let newV1 = center + newRange * rightRatio;\n\n        // Handle boundary conditions while trying to maintain mouse position as center\n        if (newV0 < 0) {\n          newV0 = 0;\n          newV1 = Math.min(1, newRange);\n        } else if (newV1 > 1) {\n          newV1 = 1;\n          newV0 = Math.max(0, 1 - newRange);\n        }\n\n        triggerSliderValueChange(slider, [newV0, newV1]);\n      }\n    };\n\n    // Listen on the real DOM canvas element with passive: false AND capture: true\n    // Capture phase ensures we intercept BEFORE @antv/g-canvas's passive listener\n    // This is the only way to preventDefault() before the passive listener receives it\n    if (canvasDOM) {\n      canvasDOM.addEventListener('wheel', handleWheel, {\n        passive: false,\n        capture: true,\n      });\n    }\n\n    return () => {\n      if (canvasDOM) {\n        canvasDOM.removeEventListener('wheel', handleWheel, { capture: true });\n      }\n    };\n  };\n}\n\nSliderWheel.props = {\n  reapplyWhenUpdate: true,\n};\n", "import { G2_CLASS_PREFIX } from '../component/constant';\nimport { SliderFilter } from './sliderFilter';\n\nexport const SCROLLBAR_CLASS_NAME = `${G2_CLASS_PREFIX}scrollbar`;\n\nexport function ScrollbarFilter(options: any = {}) {\n  return (context, _, emitter) => {\n    const { view, container } = context;\n    const scrollbars = container.getElementsByClassName(SCROLLBAR_CLASS_NAME);\n    if (!scrollbars.length) return () => {};\n    const { scale } = view;\n    const { x: scaleX, y: scaleY } = scale;\n\n    // The filtered domain, computed by the ratio attribute.\n    const initDomain = {\n      x: [...scaleX.getOptions().domain],\n      y: [...scaleY.getOptions().domain],\n    };\n\n    // The ordinal domain for each channel.\n    scaleX.update({ domain: scaleX.getOptions().expectedDomain });\n    scaleY.update({ domain: scaleY.getOptions().expectedDomain });\n\n    const interaction = SliderFilter({\n      initDomain,\n      className: SCROLLBAR_CLASS_NAME,\n      prefix: 'scrollbar',\n      hasState: true,\n      setValue: (component, values) => component.setValue(values[0]),\n      getInitValues: (scrollbar) => {\n        const values = scrollbar.slider.attributes.values;\n        if (values[0] !== 0 || values[1] !== 1) return values;\n      },\n      ...options,\n    });\n    return interaction(context, _, emitter);\n  };\n}\n", "import { DisplayObject, HTML } from '@antv/g';\nimport { kebabCase } from '../utils/string';\nimport { subObject } from '../utils/helper';\n\nfunction dom(tag, children, style) {\n  return `<${tag} style=\"${Object.entries(style)\n    .map(([key, value]) => `${kebabCase(key)}:${value}`)\n    .join(';')}\">${children}</${tag}>`;\n}\n\nconst defaultTipStyle = {\n  backgroundColor: 'rgba(0,0,0,0.75)',\n  color: '#fff',\n  width: 'max-content',\n  padding: '1px 4px',\n  fontSize: '12px',\n  borderRadius: '2.5px',\n  boxShadow:\n    '0 3px 6px -4px rgba(0,0,0,0.12), 0 6px 16px 0 rgba(0,0,0,0.08), 0 9px 28px 8px rgba(0,0,0,0.05)',\n};\n\nfunction isTipText(element) {\n  if (element.nodeName !== 'text') return false;\n  if (element.isOverflowing()) return true;\n  return false;\n}\n\nexport function Poptip({ offsetX = 8, offsetY = 8, ...style }) {\n  return (context) => {\n    const { container } = context;\n    const [x0, y0] = container.getBounds().min;\n    const tipStyle = subObject(style, 'tip');\n    const tips = new Set();\n\n    const pointerover = (e) => {\n      const { target } = e;\n      if (!isTipText(target)) {\n        e.stopPropagation();\n        return;\n      }\n      const { offsetX: mouseX, offsetY: mouseY } = e;\n      const x = mouseX + offsetX - x0;\n      const y = mouseY + offsetY - y0;\n      if (target.tip) {\n        target.tip.style.x = x;\n        target.tip.style.y = y;\n        return;\n      }\n      const { text } = target.style;\n      const tipELement = new HTML({\n        className: 'poptip',\n        style: {\n          innerHTML: dom('div', text, {\n            ...defaultTipStyle,\n            ...tipStyle,\n          }),\n          x,\n          y,\n        },\n      });\n      container.appendChild(tipELement);\n      target.tip = tipELement;\n      tips.add(tipELement);\n    };\n\n    const pointerout = (e) => {\n      const { target } = e;\n      if (!isTipText(target)) {\n        e.stopPropagation();\n        return;\n      }\n      if (!target.tip) return;\n      target.tip.remove();\n      target.tip = null;\n      tips.delete(target.tip);\n    };\n\n    container.addEventListener('pointerover', pointerover);\n    container.addEventListener('pointerout', pointerout);\n\n    return () => {\n      container.removeEventListener('pointerover', pointerover);\n      container.removeEventListener('pointerout', pointerout);\n      tips.forEach((tip) => (tip as DisplayObject).remove());\n    };\n  };\n}\n\nPoptip.props = {\n  reapplyWhenUpdate: true,\n};\n", "import { Text, Group, Shape } from '@antv/g';\nimport { get, deepMix, pick, keys, find, size, last } from '@antv/util';\nimport type { DisplayObject } from '@antv/g';\nimport { subObject } from '../utils/helper';\nimport { PLOT_CLASS_NAME } from '../runtime';\nimport { select } from '../utils/selection';\nimport { Node, treeDataTransform } from '../utils/treeDataTransform';\nimport { legendClearSetState } from './legendFilter';\nimport { getElements } from './utils';\n\nfunction selectPlotArea(root: DisplayObject): DisplayObject {\n  return select(root).select(`.${PLOT_CLASS_NAME}`).node();\n}\n\nexport type DrillDownOptions = {\n  originData?: Node<any>[];\n  layout?: any;\n  [key: string]: any;\n};\n\n// Default breadCrumb config.\nconst DEFAULT_BREADCRUMB_STYLE = {\n  breadCrumbFill: 'rgba(0, 0, 0, 0.85)',\n  breadCrumbFontSize: 12,\n  breadCrumbY: 12,\n  activeFill: 'rgba(0, 0, 0, 0.5)',\n};\n\n/**\n * TreemapDrillDown interaction.\n */\nexport function TreemapDrillDown(drillDownOptions: DrillDownOptions = {}) {\n  const { originData = [], layout, ...style } = drillDownOptions;\n\n  const breadCrumb = deepMix({}, DEFAULT_BREADCRUMB_STYLE, style);\n\n  const breadCrumbStyle = subObject(breadCrumb, 'breadCrumb');\n  const breadCrumbActiveStyle = subObject(breadCrumb, 'active');\n\n  return (context) => {\n    const { update, setState, container, options } = context;\n    const plotArea = selectPlotArea(container);\n    const mark = options.marks[0];\n\n    const { state } = mark;\n\n    // Create breadCrumbTextsGroup,save textSeparatordrillTexts.\n    const textGroup = new Group();\n    plotArea.appendChild(textGroup);\n\n    // Modify the data and scale according to the path and the level of the current click, so as to achieve the effect of drilling down and drilling up and initialization.\n    const drillDownClick = async (path: string[], depth: number) => {\n      // Clear text.\n      textGroup.removeChildren();\n\n      // More path creation text.\n      if (depth) {\n        let name = '';\n        let y = breadCrumbStyle.y;\n        let x = 0;\n        const textPath = [];\n\n        const maxWidth = plotArea.getBBox().width;\n\n        // Create path: 'type1 / type2 / type3' -> '/ type1 / type2 / type3'.\n        const drillTexts = path.map((text, index) => {\n          name = `${name}${text}/`;\n          textPath.push(text);\n          const drillText = new Text({\n            name: name.replace(/\\/$/, ''),\n            style: {\n              text,\n              x,\n              // @ts-ignore\n              path: [...textPath],\n              depth: index,\n              ...breadCrumbStyle,\n              y,\n            },\n          });\n\n          textGroup.appendChild(drillText);\n\n          x += drillText.getBBox().width;\n\n          const textSeparator = new Text({\n            style: {\n              x,\n              text: ' / ',\n              ...breadCrumbStyle,\n              y,\n            },\n          });\n\n          textGroup.appendChild(textSeparator);\n\n          x += textSeparator.getBBox().width;\n\n          /**\n           * Page width exceeds maximum, line feed.\n           * | ----maxWidth---- |\n           * | / tyep1 / tyep2 / type3 |\n           * ->\n           * | ----maxWidth---- |\n           * | / tyep1 / tyep2  |\n           * | / type3 |\n           */\n          if (x > maxWidth) {\n            y = textGroup.getBBox().height + breadCrumbStyle.y;\n            x = 0;\n            drillText.attr({\n              x,\n              y,\n            });\n            x += drillText.getBBox().width;\n            textSeparator.attr({\n              x,\n              y,\n            });\n            x += textSeparator.getBBox().width;\n          }\n\n          if (index === size(path) - 1) {\n            textSeparator.remove();\n          }\n\n          return drillText;\n        });\n\n        // Add Active, Add TreemapDrillDown\n        drillTexts.forEach((item, index) => {\n          // Last drillText\n          if (index === size(drillTexts) - 1) return;\n          const originalAttrs = { ...item.attributes };\n          item.attr('cursor', 'pointer');\n          item.addEventListener('mouseenter', () => {\n            item.attr(breadCrumbActiveStyle);\n          });\n          item.addEventListener('mouseleave', () => {\n            item.attr(originalAttrs);\n          });\n          item.addEventListener('click', () => {\n            drillDownClick(\n              get(item, ['style', 'path']),\n              get(item, ['style', 'depth']),\n            );\n          });\n        });\n      }\n\n      // LegendFilter interaction and treemapDrillDown clash.\n      legendClearSetState(container, setState);\n\n      // Update marks.\n      setState('treemapDrillDown', (viewOptions) => {\n        const { marks } = viewOptions;\n        // Add filter transform for every marks,\n        // which will skip for mark without color channel.\n\n        const strPath = path.join('/');\n\n        const newMarks = marks.map((mark) => {\n          if (mark.type !== 'rect') return mark;\n          let newData = originData;\n\n          if (depth) {\n            const filterData = originData\n              .filter((item) => {\n                const id = get(item, ['id']);\n                return id && (id.match(`${strPath}/`) || strPath.match(id));\n              })\n              .map((item) => ({\n                value: item.height === 0 ? get(item, ['value']) : undefined,\n                name: get(item, ['id']),\n              }));\n\n            const { paddingLeft, paddingBottom, paddingRight } = layout;\n\n            // New drill layout for calculation x y and filtration data.\n            const newLayout = {\n              ...layout,\n              paddingTop:\n                (layout.paddingTop || textGroup.getBBox().height + 10) /\n                (depth + 1),\n              paddingLeft: paddingLeft / (depth + 1),\n              paddingBottom: paddingBottom / (depth + 1),\n              paddingRight: paddingRight / (depth + 1),\n              path: (d) => d.name,\n              layer: (d) => d.depth === depth + 1,\n            };\n\n            // Transform the new matrix tree data.\n            newData = treeDataTransform(filterData, newLayout, {\n              value: 'value',\n            })[0];\n          } else {\n            newData = originData.filter((item) => {\n              return item.depth === 1;\n            });\n          }\n\n          const colorDomain = [];\n          newData.forEach(({ path }) => {\n            colorDomain.push(last(path));\n          });\n\n          // TreemapDrillDown by filtering the data and scale.\n          return deepMix({}, mark, {\n            data: newData,\n            scale: {\n              color: { domain: colorDomain },\n            },\n          });\n        });\n\n        return { ...viewOptions, marks: newMarks };\n      });\n\n      // The second argument is to allow the legendFilter event to be re-added; the update method itself causes legend to lose the interaction event.\n      await update(undefined, ['legendFilter']);\n    };\n    //\n    const keyofLabel = (d) => d.attributes.key.split('-')[0];\n    const keyofRect = (d) => get(d, ['__data__', 'key']);\n    // Elements and BreadCrumb click.\n    const createDrillClick = (e) => {\n      const item = e.target;\n      const { markType, nodeName, attributes } = item || {};\n      if (markType !== 'rect' && nodeName !== Shape.TEXT) return;\n      const key =\n        nodeName === Shape.TEXT && get(attributes, 'isTreemapLabel') === true\n          ? keyofLabel(item)\n          : keyofRect(item);\n      const node = find(originData, (d) => d.id === key);\n\n      // Node height = 0 no children\n      if (get(node, 'height')) {\n        drillDownClick(get(node, 'path'), get(node, 'depth'));\n      }\n    };\n\n    // Add click drill interaction.\n    plotArea.addEventListener('click', createDrillClick);\n\n    // Change attributes keys.\n    const changeStyleKey = keys({ ...state.active, ...state.inactive });\n\n    const createActive = () => {\n      const elements = getElements(plotArea);\n      elements.forEach((element) => {\n        const cursor = get(element, ['style', 'cursor']);\n        const node = find(\n          originData,\n          (d) => d.id === get(element, ['__data__', 'key']),\n        );\n\n        if (cursor !== 'pointer' && node?.height) {\n          element.style.cursor = 'pointer';\n          const originalAttrs = pick(element.attributes, changeStyleKey);\n\n          element.addEventListener('mouseenter', () => {\n            element.attr(state.active);\n          });\n\n          element.addEventListener('mouseleave', () => {\n            element.attr(deepMix(originalAttrs, state.inactive));\n          });\n        }\n      });\n    };\n\n    createActive();\n    // Animate elements update, Add active.\n    plotArea.addEventListener('mousemove', createActive);\n\n    return () => {\n      textGroup.remove();\n      plotArea.removeEventListener('click', createDrillClick);\n      plotArea.removeEventListener('mousemove', createActive);\n    };\n  };\n}\n", "import type { DisplayObject } from '@antv/g';\nimport { get, deepMix, pick, keys } from '@antv/util';\nimport { DrillDownInteraction } from 'spec';\nimport { select } from '../utils/selection';\nimport { PLOT_CLASS_NAME } from '../runtime';\nimport {\n  CHILD_NODE_COUNT,\n  PARTITION_TYPE,\n  PARTITION_TYPE_FIELD,\n} from '../mark/partition';\n\n// Get partition element.\nconst getElementsPartition = (plot: DisplayObject) => {\n  return plot.querySelectorAll('.element').filter((item) => {\n    const itemStyle = (item as any).style || {};\n    return itemStyle[PARTITION_TYPE_FIELD] === PARTITION_TYPE;\n  });\n};\n\nfunction selectPlotArea(root: DisplayObject): DisplayObject {\n  return select(root).select(`.${PLOT_CLASS_NAME}`).node();\n}\n\n// Default breadCrumb config.\nconst DEFAULT_BREADCRUMB = {\n  rootText: 'root',\n  style: {\n    fill: 'rgba(0, 0, 0, 0.6)',\n    fontSize: 11,\n  },\n  y: 4,\n  active: {\n    fill: 'rgba(0, 0, 0, 0.4)',\n  },\n};\n\n/**\n * DrillDown interaction for partition visualization.\n * Based on the proven sunburst drilldown implementation.\n */\nexport function DrillDown(drillDownOptions: DrillDownInteraction = {}) {\n  const { breadCrumb: textConfig = {} } = drillDownOptions;\n  const breadCrumb = deepMix({}, DEFAULT_BREADCRUMB, textConfig);\n\n  return (context: any) => {\n    const { update, setState, container, view, options: viewOptions } = context;\n\n    const document = container.ownerDocument;\n\n    const plotArea = selectPlotArea(container);\n\n    const partitionMark = viewOptions.marks.find(\n      ({ id }: any) => id === PARTITION_TYPE,\n    );\n    if (!partitionMark) return;\n    const { state } = partitionMark;\n\n    // Create breadCrumbTextsGroup to save textSeparator and drillTexts.\n    const textGroup = document.createElement('g');\n    textGroup.style.transform = `translate(${breadCrumb.x || 0}px, ${\n      breadCrumb.y || 0\n    }px)`;\n\n    textGroup.setAttribute('x', 'drilldown-breadcrumb');\n    plotArea.appendChild(textGroup);\n\n    // Modify data and scale according to the path and level of current click to achieve drilling down, drilling up and initialization effects.\n    const drillDownClick = async (path: string[]) => {\n      // Clear text.\n      textGroup.removeChildren();\n\n      // More path creation text.\n      if (path && path.length > 0) {\n        // Create root text.\n        const rootText = document.createElement('text', {\n          style: {\n            text: breadCrumb.rootText,\n            ...breadCrumb.style,\n          },\n        });\n\n        textGroup.appendChild(rootText);\n\n        let name = '';\n        const pathArray = path;\n        let y = breadCrumb.style.y;\n        let x = rootText.getBBox().width;\n\n        const maxWidth = plotArea.getBBox().width;\n\n        // Create path: 'type1 / type2 / type3' -> '/ type1 / type2 / type3'.\n        const drillTexts = pathArray.map((text, index) => {\n          const textSeparator = document.createElement('text', {\n            style: {\n              x,\n              text: ' / ',\n              ...breadCrumb.style,\n              y,\n            },\n          });\n\n          textGroup.appendChild(textSeparator);\n\n          x += textSeparator.getBBox().width;\n\n          name = `${name}${text} / `;\n\n          const drillText = document.createElement('text', {\n            name: name.replace(/\\s\\/\\s$/, ''),\n            style: {\n              text,\n              x,\n              ...breadCrumb.style,\n              y,\n            },\n          });\n\n          textGroup.appendChild(drillText);\n\n          x += drillText.getBBox().width;\n\n          /**\n           * Page width exceeds maximum, line feed.\n           * | ----maxWidth---- |\n           * | / type1 / type2 / type3 |\n           * ->\n           * | ----maxWidth---- |\n           * | / type1 / type2  |\n           * | / type3 |\n           */\n          if (x > maxWidth) {\n            y = textGroup.getBBox().height;\n            x = 0;\n            textSeparator.attr({\n              x,\n              y,\n            });\n            x += textSeparator.getBBox().width;\n            drillText.attr({\n              x,\n              y,\n            });\n            x += drillText.getBBox().width;\n          }\n\n          return drillText;\n        });\n\n        // Add active state and drilldown interaction.\n        const textStack = [rootText, ...drillTexts];\n        textStack.forEach((item, index) => {\n          // Skip the last drillText\n          if (index === drillTexts.length) return;\n          const originalAttrs = { ...item.attributes };\n          item.attr('cursor', 'pointer');\n          item.addEventListener('mouseenter', () => {\n            item.attr(breadCrumb.active);\n          });\n          item.addEventListener('mouseleave', () => {\n            item.attr(originalAttrs);\n          });\n          item.addEventListener('click', () => {\n            drillDownClick(path.slice(0, index));\n          });\n        });\n      }\n\n      // Update marks.\n      setState('drillDown', (viewOptions: any) => {\n        const { marks } = viewOptions;\n        // Add filter transform for every mark,\n        // which will skip for mark without color channel.\n        const newMarks = marks.map((mark: any) => {\n          if (mark.id !== PARTITION_TYPE && mark.type !== 'rect') return mark;\n\n          // Inset after aggregate transform, such as group and bin.\n          const { data } = mark;\n\n          const newData = data.filter((item: any) => {\n            const itemPath = item.path ?? [];\n            if (path.length === 0) return true;\n            if (!Array.isArray(itemPath) || itemPath.length < path.length)\n              return false;\n            for (let i = 0; i < path.length; i++) {\n              if (itemPath[i] !== path[i]) return false;\n            }\n            return true;\n          });\n\n          // DrillDown by filtering the data and scale.\n          return deepMix({}, mark, {\n            data: newData,\n          });\n        });\n        return { ...viewOptions, marks: newMarks };\n      });\n\n      await update();\n    };\n\n    const createDrillClick = (e: Event) => {\n      const item = e.target as DisplayObject;\n\n      // Get properties directly from DOM element attributes instead of using get function.\n      const markType = (item as any).markType;\n      const itemStyle = (item as any).style || {};\n      const partitionType = itemStyle[PARTITION_TYPE_FIELD];\n      const childNodeCount = itemStyle[CHILD_NODE_COUNT];\n      const itemData = (item as any).__data__;\n\n      if (\n        markType !== 'rect' ||\n        partitionType !== PARTITION_TYPE ||\n        !childNodeCount\n      ) {\n        return;\n      }\n\n      const path = itemData?.data?.path ?? [];\n      drillDownClick(path);\n    };\n\n    // Add click drill interaction.\n    plotArea.addEventListener('click', createDrillClick);\n\n    // Change attribute keys.\n    const changeStyleKey = keys({ ...state.active, ...state.inactive });\n\n    const createActive = () => {\n      const elements = getElementsPartition(plotArea);\n      elements.forEach((element: DisplayObject) => {\n        const childNodeCount = get(element, ['style', CHILD_NODE_COUNT]);\n        const cursor = get(element, ['style', 'cursor']);\n        if (cursor !== 'pointer' && childNodeCount) {\n          (element as any).style.cursor = 'pointer';\n          const originalAttrs = pick(element.attributes, changeStyleKey);\n\n          element.addEventListener('mouseenter', () => {\n            element.attr(state.active);\n          });\n\n          element.addEventListener('mouseleave', () => {\n            element.attr(deepMix(originalAttrs, state.inactive));\n          });\n        }\n      });\n    };\n\n    // Animate elements update and add active state.\n    plotArea.addEventListener('mousemove', createActive);\n\n    return () => {\n      textGroup.remove();\n      plotArea.removeEventListener('click', createDrillClick);\n      plotArea.removeEventListener('mousemove', createActive);\n    };\n  };\n}\n", "import { Text, Group, Circle, Path } from '@antv/g';\nimport { deepMix, isUndefined, find, get } from '@antv/util';\nimport type { CircleStyleProps, TextStyleProps, PathStyleProps } from '@antv/g';\nimport { subObject } from '../utils/helper';\n\nimport {\n  selectPlotArea,\n  getPointsR,\n  getPointsPath,\n  getElements,\n  getThetaPath,\n} from './utils';\n\nexport type ElementPointMoveOptions = {\n  selection?: number[];\n  precision?: number;\n  [key: string]: any;\n};\n\nconst DEFAULT_STYLE = {\n  pointR: 6,\n  pointStrokeWidth: 1,\n  pointStroke: '#888',\n  pointActiveStroke: '#f5f5f5',\n  pathStroke: '#888',\n  pathLineDash: [3, 4],\n  labelFontSize: 12,\n  labelFill: '#888',\n  labelStroke: '#fff',\n  labelLineWidth: 1,\n  labelY: -6,\n  labelX: 2,\n};\n\n// point shape name.\nconst MOVE_POINT_NAME = 'movePoint';\n\n// Element mouseenter change style.\nconst elementMouseenter = (e) => {\n  const element = e.target;\n  const { markType } = element;\n  // Mark line.\n  if (markType === 'line') {\n    element.attr('_lineWidth', element.attr('lineWidth') || 1);\n    element.attr('lineWidth', element.attr('_lineWidth') + 3);\n  }\n  // Mark interval.\n  if (markType === 'interval') {\n    element.attr('_opacity', element.attr('opacity') || 1);\n    element.attr('opacity', 0.7 * element.attr('_opacity'));\n  }\n};\n\n// Element mouseleave change style.\nconst elementMouseleave = (e) => {\n  const element = e.target;\n  const { markType } = element;\n  // Mark line.\n  if (markType === 'line') {\n    element.attr('lineWidth', element.attr('_lineWidth'));\n  }\n  // Mark interval.\n  if (markType === 'interval') {\n    element.attr('opacity', element.attr('_opacity'));\n  }\n};\n\n// Get the latest overall data based on the individual data changes.\nconst getNewData = (newChangeData, data, encode) => {\n  return data.map((d) => {\n    const isUpdate = ['x', 'color'].reduce((v, key) => {\n      const field = encode[key];\n      if (!field) return v;\n\n      if (d[field] !== newChangeData[field]) return false;\n\n      return v;\n    }, true);\n\n    return isUpdate ? { ...d, ...newChangeData } : d;\n  });\n};\n\n// Find mark interval origin element data.\nconst getIntervalDataRatioTransformFn = (element) => {\n  const y = get(element, ['__data__', 'y']);\n  const y1 = get(element, ['__data__', 'y1']);\n  const v = y1 - y;\n\n  const {\n    __data__: { data, encode, transform },\n    childNodes,\n  } = element.parentNode;\n  const isNormalizeY = find(transform, ({ type }) => type === 'normalizeY');\n  const yField = get(encode, ['y', 'field']);\n  const value = data[childNodes.indexOf(element)][yField];\n\n  return (newValue, isTheta = false) => {\n    if (isNormalizeY || isTheta) {\n      return (newValue / (1 - newValue) / (v / (1 - v))) * value;\n    }\n\n    return newValue;\n  };\n};\n\n// Find origin path data.\nconst getPathDataRatioTransformFn = (element, index) => {\n  const v = get(element, ['__data__', 'seriesItems', index, '0', 'value']);\n  const i = get(element, ['__data__', 'seriesIndex', index]);\n\n  const {\n    __data__: { data, encode, transform },\n  } = element.parentNode;\n  const isNormalizeY = find(transform, ({ type }) => type === 'normalizeY');\n  const yField = get(encode, ['y', 'field']);\n  const value = data[i][yField];\n\n  return (newValue) => {\n    if (isNormalizeY) {\n      if (v === 1) {\n        return newValue;\n      }\n      return (newValue / (1 - newValue) / (v / (1 - v))) * value;\n    }\n\n    return newValue;\n  };\n};\n\n// Point shape select change style.\nconst selectedPointsStyle = (pointsShape, selection, defaultStyle) => {\n  pointsShape.forEach((shape, index) => {\n    shape.attr(\n      'stroke',\n      selection[1] === index\n        ? defaultStyle['activeStroke']\n        : defaultStyle['stroke'],\n    );\n  });\n};\n\n// Create help show message shape.\nconst createHelpShape = (\n  group,\n  circle,\n  pathStyle,\n  labelStyle,\n): [Path, Text] => {\n  const pathShape = new Path({\n    style: pathStyle,\n  });\n\n  const labelShape = new Text({\n    style: labelStyle,\n  });\n\n  circle.appendChild(labelShape);\n  group.appendChild(pathShape);\n  return [pathShape, labelShape];\n};\n\n// Get color scale type.\nconst getColorType = (scaleColor, color) => {\n  const indexOf = get(scaleColor, ['options', 'range', 'indexOf']);\n  if (!indexOf) return;\n  const i = scaleColor.options.range.indexOf(color);\n  return scaleColor.sortedDomain[i];\n};\n\n// Get the same direction new point.\nconst getSamePointPosition = (center, point, target) => {\n  const oldR = getPointsR(center, point);\n  const newR = getPointsR(center, target);\n  const ratio = newR / oldR;\n  const newX = center[0] + (point[0] - center[0]) * ratio;\n  const newY = center[1] + (point[1] - center[1]) * ratio;\n  return [newX, newY];\n};\n\n/**\n * ElementPointMove interaction.\n */\nexport function ElementPointMove(\n  elementPointMoveOptions: ElementPointMoveOptions = {},\n) {\n  const { selection = [], precision = 2, ...style } = elementPointMoveOptions;\n\n  const defaultStyle = { ...DEFAULT_STYLE, ...(style || {}) };\n\n  // Shape default style.\n  const pathDefaultStyle = subObject(defaultStyle, 'path') as PathStyleProps;\n  const labelDefaultStyle = subObject(defaultStyle, 'label') as TextStyleProps;\n  const pointDefaultStyle = subObject(\n    defaultStyle,\n    'point',\n  ) as CircleStyleProps;\n\n  return (context, _, emitter) => {\n    const {\n      update,\n      setState,\n      container,\n      view,\n      options: { marks, coordinate: coordinateOptions },\n    } = context;\n    const plotArea = selectPlotArea(container);\n    let elements = getElements(plotArea);\n    let newState;\n    let newSelection = selection;\n\n    const { transform = [], type: coordinateType } = coordinateOptions;\n    const isTranspose = !!find(transform, ({ type }) => type === 'transpose');\n    const isPolar = coordinateType === 'polar';\n    const isTheta = coordinateType === 'theta';\n    const isArea = !!find(elements, ({ markType }) => markType === 'area');\n\n    if (isArea) {\n      elements = elements.filter(({ markType }) => markType === 'area');\n    }\n\n    // Create points\n    const pointsGroup = new Group({\n      style: {\n        // Tooltip point need down.\n        zIndex: 2,\n      },\n    });\n    plotArea.appendChild(pointsGroup);\n\n    const selectedChange = () => {\n      emitter.emit('element-point:select', {\n        nativeEvent: true,\n        data: {\n          selection: newSelection,\n        },\n      });\n    };\n\n    const dataChange = (changeData, data) => {\n      emitter.emit('element-point:moved', {\n        nativeEvent: true,\n        data: {\n          changeData,\n          data,\n        },\n      });\n    };\n\n    // Element click change style.\n    const elementClick = (e) => {\n      const element = e.target;\n      newSelection = [element.parentNode.childNodes.indexOf(element)];\n      selectedChange();\n      createPoints(element);\n    };\n\n    const elementSelect = (d) => {\n      const {\n        data: { selection },\n        nativeEvent,\n      } = d;\n      if (nativeEvent) return;\n      newSelection = selection;\n      const element = get(elements, [newSelection?.[0]]);\n      if (element) {\n        createPoints(element);\n      }\n    };\n\n    // Create select element points.\n    const createPoints = (element) => {\n      const { attributes, markType, __data__: data } = element;\n      const { stroke: fill } = attributes;\n      const { points, seriesTitle, color, title, seriesX, y1 } = data;\n      // Transpose Currently only do mark interval;\n      if (isTranspose && markType !== 'interval') return;\n\n      const { scale, coordinate } = newState?.view || view;\n      const { color: scaleColor, y: scaleY, x: scaleX } = scale;\n      const center = coordinate.getCenter();\n\n      pointsGroup.removeChildren();\n      let downPoint;\n\n      const updateView = async (x, y, color, markTypes) => {\n        setState('elementPointMove', (viewOptions) => {\n          // Update marks.\n          const newMarks = (newState?.options?.marks || marks).map((mark) => {\n            if (!markTypes.includes(mark.type)) return mark;\n            const { data, encode } = mark;\n            const encodeKeys = Object.keys(encode);\n\n            // Get change new one element data.\n            const newChangeData = encodeKeys.reduce((value, key) => {\n              const dataKey = encode[key];\n              if (key === 'x') {\n                value[dataKey] = x;\n              }\n              if (key === 'y') {\n                value[dataKey] = y;\n              }\n              if (key === 'color') {\n                value[dataKey] = color;\n              }\n              return value;\n            }, {} as any);\n            // Get change new all data.\n            const newData = getNewData(newChangeData, data, encode);\n            dataChange(newChangeData, newData);\n\n            return deepMix({}, mark, {\n              data: newData,\n              // No need animate\n              animate: false,\n            });\n          });\n\n          return { ...viewOptions, marks: newMarks };\n        });\n\n        return await update('elementPointMove');\n      };\n\n      if (['line', 'area'].includes(markType)) {\n        points.forEach((p, index) => {\n          const title = scaleX.invert(seriesX[index]);\n\n          // Area points have bottom point.\n          if (!title) return;\n\n          const circle = new Circle({\n            name: MOVE_POINT_NAME,\n            style: {\n              cx: p[0],\n              cy: p[1],\n              fill,\n              ...pointDefaultStyle,\n            },\n          });\n\n          const ratioTransform = getPathDataRatioTransformFn(element, index);\n\n          circle.addEventListener('mousedown', (e) => {\n            const oldPoint = coordinate.output([seriesX[index], 0]);\n            const pathLength = seriesTitle?.length;\n\n            container.attr('cursor', 'move');\n\n            if (newSelection[1] !== index) {\n              newSelection[1] = index;\n              selectedChange();\n            }\n            selectedPointsStyle(\n              pointsGroup.childNodes,\n              newSelection,\n              pointDefaultStyle,\n            );\n\n            const [pathShape, labelShape] = createHelpShape(\n              pointsGroup,\n              circle,\n              pathDefaultStyle,\n              labelDefaultStyle,\n            );\n\n            // Point move change text\n            const pointMousemove = (e) => {\n              const newCy = p[1] + e.clientY - downPoint[1];\n              // Area/Radar chart.\n              if (isArea) {\n                // Radar chart.\n                if (isPolar) {\n                  const newCx = p[0] + e.clientX - downPoint[0];\n\n                  const [newX, newY] = getSamePointPosition(center, oldPoint, [\n                    newCx,\n                    newCy,\n                  ]);\n\n                  const [, initY] = coordinate.output([1, scaleY.output(0)]);\n                  const [, y] = coordinate.invert([\n                    newX,\n                    initY - (points[index + pathLength][1] - newY),\n                  ]);\n\n                  const nextIndex = (index + 1) % pathLength;\n                  const lastIndex = (index - 1 + pathLength) % pathLength;\n                  const newPath = getPointsPath([\n                    points[lastIndex],\n                    [newX, newY],\n                    seriesTitle[nextIndex] && points[nextIndex],\n                  ]);\n                  labelShape.attr(\n                    'text',\n                    ratioTransform(scaleY.invert(y)).toFixed(precision),\n                  );\n                  pathShape.attr('d', newPath);\n                  circle.attr('cx', newX);\n                  circle.attr('cy', newY);\n                } else {\n                  // Area chart.\n                  const [, initY] = coordinate.output([1, scaleY.output(0)]);\n                  const [, y] = coordinate.invert([\n                    p[0],\n                    initY - (points[index + pathLength][1] - newCy),\n                  ]);\n                  const newPath = getPointsPath([\n                    points[index - 1],\n                    [p[0], newCy],\n                    seriesTitle[index + 1] && points[index + 1],\n                  ]);\n                  labelShape.attr(\n                    'text',\n                    ratioTransform(scaleY.invert(y)).toFixed(precision),\n                  );\n                  pathShape.attr('d', newPath);\n                  circle.attr('cy', newCy);\n                }\n              } else {\n                // Line chart.\n                const [, y] = coordinate.invert([p[0], newCy]);\n                const newPath = getPointsPath([\n                  points[index - 1],\n                  [p[0], newCy],\n                  points[index + 1],\n                ]);\n                labelShape.attr('text', scaleY.invert(y).toFixed(precision));\n                pathShape.attr('d', newPath);\n                circle.attr('cy', newCy);\n              }\n            };\n\n            downPoint = [e.clientX, e.clientY];\n            window.addEventListener('mousemove', pointMousemove);\n\n            const mouseupFn = async () => {\n              container.attr('cursor', 'default');\n              window.removeEventListener('mousemove', pointMousemove);\n              container.removeEventListener('mouseup', mouseupFn);\n\n              if (isUndefined(labelShape.attr('text'))) return;\n\n              const y = Number(labelShape.attr('text'));\n              const colorType = getColorType(scaleColor, color);\n              newState = await updateView(title, y, colorType, [\n                'line',\n                'area',\n              ]);\n\n              labelShape.remove();\n              pathShape.remove();\n              createPoints(element);\n            };\n\n            container.addEventListener('mouseup', mouseupFn);\n          });\n\n          pointsGroup.appendChild(circle);\n        });\n\n        selectedPointsStyle(\n          pointsGroup.childNodes,\n          newSelection,\n          pointDefaultStyle,\n        );\n      } else if (markType === 'interval') {\n        // Column chart point.\n        let circlePoint = [(points[0][0] + points[1][0]) / 2, points[0][1]];\n        // Bar chart point.\n        if (isTranspose) {\n          circlePoint = [points[0][0], (points[0][1] + points[1][1]) / 2];\n        } else if (isTheta) {\n          // Pie chart point.\n          circlePoint = points[0];\n        }\n\n        const ratioTransform = getIntervalDataRatioTransformFn(element);\n\n        const circle = new Circle({\n          name: MOVE_POINT_NAME,\n          style: {\n            cx: circlePoint[0],\n            cy: circlePoint[1],\n            fill,\n            ...pointDefaultStyle,\n            stroke: pointDefaultStyle['activeStroke'],\n          },\n        });\n\n        circle.addEventListener('mousedown', (e) => {\n          container.attr('cursor', 'move');\n\n          const colorType = getColorType(scaleColor, color);\n\n          const [pathShape, labelShape] = createHelpShape(\n            pointsGroup,\n            circle,\n            pathDefaultStyle,\n            labelDefaultStyle,\n          );\n\n          // Point move change text\n          const pointMousemove = (e) => {\n            if (isTranspose) {\n              // Bar chart.\n              const newCx = circlePoint[0] + e.clientX - downPoint[0];\n              const [initX] = coordinate.output([\n                scaleY.output(0),\n                scaleY.output(0),\n              ]);\n\n              const [, x] = coordinate.invert([\n                initX + (newCx - points[2][0]),\n                circlePoint[1],\n              ]);\n              const newPath = getPointsPath(\n                [\n                  [newCx, points[0][1]],\n                  [newCx, points[1][1]],\n                  points[2],\n                  points[3],\n                ],\n                true,\n              );\n\n              labelShape.attr(\n                'text',\n                ratioTransform(scaleY.invert(x)).toFixed(precision),\n              );\n              pathShape.attr('d', newPath);\n              circle.attr('cx', newCx);\n            } else if (isTheta) {\n              // Pie chart.\n              const newCy = circlePoint[1] + e.clientY - downPoint[1];\n              const newCx = circlePoint[0] + e.clientX - downPoint[0];\n\n              const [newXOut, newYOut] = getSamePointPosition(\n                center,\n                [newCx, newCy],\n                circlePoint,\n              );\n              const [newXIn, newYIn] = getSamePointPosition(\n                center,\n                [newCx, newCy],\n                points[1],\n              );\n              const lastPercent = coordinate.invert([newXOut, newYOut])[1];\n              const percent = y1 - lastPercent;\n\n              if (percent < 0) return;\n              const newPath = getThetaPath(\n                center,\n                [[newXOut, newYOut], [newXIn, newYIn], points[2], points[3]],\n                percent > 0.5 ? 1 : 0,\n              );\n\n              labelShape.attr(\n                'text',\n                ratioTransform(percent, true).toFixed(precision),\n              );\n              pathShape.attr('d', newPath);\n              circle.attr('cx', newXOut);\n              circle.attr('cy', newYOut);\n            } else {\n              // Column chart.\n              const newCy = circlePoint[1] + e.clientY - downPoint[1];\n              const [, initY] = coordinate.output([1, scaleY.output(0)]);\n\n              const [, y] = coordinate.invert([\n                circlePoint[0],\n                initY - (points[2][1] - newCy),\n              ]);\n              const newPath = getPointsPath(\n                [\n                  [points[0][0], newCy],\n                  [points[1][0], newCy],\n                  points[2],\n                  points[3],\n                ],\n                true,\n              );\n\n              labelShape.attr(\n                'text',\n                ratioTransform(scaleY.invert(y)).toFixed(precision),\n              );\n              pathShape.attr('d', newPath);\n              circle.attr('cy', newCy);\n            }\n          };\n\n          downPoint = [e.clientX, e.clientY];\n          window.addEventListener('mousemove', pointMousemove);\n\n          // Change mosueup change data and update clear shape.\n          const mouseupFn = async () => {\n            container.attr('cursor', 'default');\n            container.removeEventListener('mouseup', mouseupFn);\n            window.removeEventListener('mousemove', pointMousemove);\n\n            if (isUndefined(labelShape.attr('text'))) return;\n\n            const y = Number(labelShape.attr('text'));\n\n            newState = await updateView(title, y, colorType, [markType]);\n\n            labelShape.remove();\n            pathShape.remove();\n            createPoints(element);\n          };\n\n          container.addEventListener('mouseup', mouseupFn);\n        });\n\n        pointsGroup.appendChild(circle);\n      }\n    };\n\n    // Add EventListener.\n    elements.forEach((element, index) => {\n      if (newSelection[0] === index) {\n        createPoints(element);\n      }\n      element.addEventListener('click', elementClick);\n      element.addEventListener('mouseenter', elementMouseenter);\n      element.addEventListener('mouseleave', elementMouseleave);\n    });\n\n    const rootClick = (e) => {\n      const element = e?.target;\n      if (\n        !element ||\n        (element.name !== MOVE_POINT_NAME && !elements.includes(element))\n      ) {\n        newSelection = [];\n        selectedChange();\n        pointsGroup.removeChildren();\n      }\n    };\n\n    emitter.on('element-point:select', elementSelect);\n    emitter.on('element-point:unselect', rootClick);\n    container.addEventListener('mousedown', rootClick);\n\n    // Remove EventListener.\n    return () => {\n      pointsGroup.remove();\n      emitter.off('element-point:select', elementSelect);\n      emitter.off('element-point:unselect', rootClick);\n      container.removeEventListener('mousedown', rootClick);\n      elements.forEach((element) => {\n        element.removeEventListener('click', elementClick);\n        element.removeEventListener('mouseenter', elementMouseenter);\n        element.removeEventListener('mouseleave', elementMouseleave);\n      });\n    };\n  };\n}\n", "var EOL = {},\n    EOF = {},\n    QUOTE = 34,\n    NEWLINE = 10,\n    RETURN = 13;\n\nfunction objectConverter(columns) {\n  return new Function(\"d\", \"return {\" + columns.map(function(name, i) {\n    return JSON.stringify(name) + \": d[\" + i + \"] || \\\"\\\"\";\n  }).join(\",\") + \"}\");\n}\n\nfunction customConverter(columns, f) {\n  var object = objectConverter(columns);\n  return function(row, i) {\n    return f(object(row), i, columns);\n  };\n}\n\n// Compute unique columns in order of discovery.\nfunction inferColumns(rows) {\n  var columnSet = Object.create(null),\n      columns = [];\n\n  rows.forEach(function(row) {\n    for (var column in row) {\n      if (!(column in columnSet)) {\n        columns.push(columnSet[column] = column);\n      }\n    }\n  });\n\n  return columns;\n}\n\nfunction pad(value, width) {\n  var s = value + \"\", length = s.length;\n  return length < width ? new Array(width - length + 1).join(0) + s : s;\n}\n\nfunction formatYear(year) {\n  return year < 0 ? \"-\" + pad(-year, 6)\n    : year > 9999 ? \"+\" + pad(year, 6)\n    : pad(year, 4);\n}\n\nfunction formatDate(date) {\n  var hours = date.getUTCHours(),\n      minutes = date.getUTCMinutes(),\n      seconds = date.getUTCSeconds(),\n      milliseconds = date.getUTCMilliseconds();\n  return isNaN(date) ? \"Invalid Date\"\n      : formatYear(date.getUTCFullYear(), 4) + \"-\" + pad(date.getUTCMonth() + 1, 2) + \"-\" + pad(date.getUTCDate(), 2)\n      + (milliseconds ? \"T\" + pad(hours, 2) + \":\" + pad(minutes, 2) + \":\" + pad(seconds, 2) + \".\" + pad(milliseconds, 3) + \"Z\"\n      : seconds ? \"T\" + pad(hours, 2) + \":\" + pad(minutes, 2) + \":\" + pad(seconds, 2) + \"Z\"\n      : minutes || hours ? \"T\" + pad(hours, 2) + \":\" + pad(minutes, 2) + \"Z\"\n      : \"\");\n}\n\nexport default function(delimiter) {\n  var reFormat = new RegExp(\"[\\\"\" + delimiter + \"\\n\\r]\"),\n      DELIMITER = delimiter.charCodeAt(0);\n\n  function parse(text, f) {\n    var convert, columns, rows = parseRows(text, function(row, i) {\n      if (convert) return convert(row, i - 1);\n      columns = row, convert = f ? customConverter(row, f) : objectConverter(row);\n    });\n    rows.columns = columns || [];\n    return rows;\n  }\n\n  function parseRows(text, f) {\n    var rows = [], // output rows\n        N = text.length,\n        I = 0, // current character index\n        n = 0, // current line number\n        t, // current token\n        eof = N <= 0, // current token followed by EOF?\n        eol = false; // current token followed by EOL?\n\n    // Strip the trailing newline.\n    if (text.charCodeAt(N - 1) === NEWLINE) --N;\n    if (text.charCodeAt(N - 1) === RETURN) --N;\n\n    function token() {\n      if (eof) return EOF;\n      if (eol) return eol = false, EOL;\n\n      // Unescape quotes.\n      var i, j = I, c;\n      if (text.charCodeAt(j) === QUOTE) {\n        while (I++ < N && text.charCodeAt(I) !== QUOTE || text.charCodeAt(++I) === QUOTE);\n        if ((i = I) >= N) eof = true;\n        else if ((c = text.charCodeAt(I++)) === NEWLINE) eol = true;\n        else if (c === RETURN) { eol = true; if (text.charCodeAt(I) === NEWLINE) ++I; }\n        return text.slice(j + 1, i - 1).replace(/\"\"/g, \"\\\"\");\n      }\n\n      // Find next delimiter or newline.\n      while (I < N) {\n        if ((c = text.charCodeAt(i = I++)) === NEWLINE) eol = true;\n        else if (c === RETURN) { eol = true; if (text.charCodeAt(I) === NEWLINE) ++I; }\n        else if (c !== DELIMITER) continue;\n        return text.slice(j, i);\n      }\n\n      // Return last token before EOF.\n      return eof = true, text.slice(j, N);\n    }\n\n    while ((t = token()) !== EOF) {\n      var row = [];\n      while (t !== EOL && t !== EOF) row.push(t), t = token();\n      if (f && (row = f(row, n++)) == null) continue;\n      rows.push(row);\n    }\n\n    return rows;\n  }\n\n  function preformatBody(rows, columns) {\n    return rows.map(function(row) {\n      return columns.map(function(column) {\n        return formatValue(row[column]);\n      }).join(delimiter);\n    });\n  }\n\n  function format(rows, columns) {\n    if (columns == null) columns = inferColumns(rows);\n    return [columns.map(formatValue).join(delimiter)].concat(preformatBody(rows, columns)).join(\"\\n\");\n  }\n\n  function formatBody(rows, columns) {\n    if (columns == null) columns = inferColumns(rows);\n    return preformatBody(rows, columns).join(\"\\n\");\n  }\n\n  function formatRows(rows) {\n    return rows.map(formatRow).join(\"\\n\");\n  }\n\n  function formatRow(row) {\n    return row.map(formatValue).join(delimiter);\n  }\n\n  function formatValue(value) {\n    return value == null ? \"\"\n        : value instanceof Date ? formatDate(value)\n        : reFormat.test(value += \"\") ? \"\\\"\" + value.replace(/\"/g, \"\\\"\\\"\") + \"\\\"\"\n        : value;\n  }\n\n  return {\n    parse: parse,\n    parseRows: parseRows,\n    format: format,\n    formatBody: formatBody,\n    formatRows: formatRows,\n    formatRow: formatRow,\n    formatValue: formatValue\n  };\n}\n", "import dsv from \"./dsv.js\";\n\nvar csv = dsv(\",\");\n\nexport var csvParse = csv.parse;\nexport var csvParseRows = csv.parseRows;\nexport var csvFormat = csv.format;\nexport var csvFormatBody = csv.formatBody;\nexport var csvFormatRows = csv.formatRows;\nexport var csvFormatRow = csv.formatRow;\nexport var csvFormatValue = csv.formatValue;\n", "import dsv from \"./dsv.js\";\n\nvar tsv = dsv(\"\\t\");\n\nexport var tsvParse = tsv.parse;\nexport var tsvParseRows = tsv.parseRows;\nexport var tsvFormat = tsv.format;\nexport var tsvFormatBody = tsv.formatBody;\nexport var tsvFormatRows = tsv.formatRows;\nexport var tsvFormatRow = tsv.formatRow;\nexport var tsvFormatValue = tsv.formatValue;\n", "export default function autoType(object) {\n  for (var key in object) {\n    var value = object[key].trim(), number, m;\n    if (!value) value = null;\n    else if (value === \"true\") value = true;\n    else if (value === \"false\") value = false;\n    else if (value === \"NaN\") value = NaN;\n    else if (!isNaN(number = +value)) value = number;\n    else if (m = value.match(/^([-+]\\d{2})?\\d{4}(-\\d{2}(-\\d{2})?)?(T\\d{2}:\\d{2}(:\\d{2}(\\.\\d{3})?)?(Z|[-+]\\d{2}:\\d{2})?)?$/)) {\n      if (fixtz && !!m[4] && !m[7]) value = value.replace(/-/g, \"/\").replace(/T/, \" \");\n      value = new Date(value);\n    }\n    else continue;\n    object[key] = value;\n  }\n  return object;\n}\n\n// https://github.com/d3/d3-dsv/issues/45\nconst fixtz = new Date(\"2019-01-01T00:00\").getHours() || new Date(\"2019-07-01T00:00\").getHours();", "import { autoType as d3AutoType, dsvFormat } from '@antv/vendor/d3-dsv';\nimport type { DataComponent as DC } from '../runtime';\nimport type { FetchConnector } from '../spec';\nimport { identity } from '../utils/helper';\n\nexport type FetchOptions = Omit<FetchConnector, 'type'>;\n\nexport const Fetch: DC<FetchOptions> = (options) => {\n  const {\n    value,\n    format = value.split('.').pop(),\n    delimiter = ',',\n    autoType = true,\n  } = options;\n  return async () => {\n    const response = await fetch(value);\n\n    if (format === 'csv') {\n      // @see: https://github.com/d3/d3-dsv#dsv_parse\n      const str = await response.text();\n      return dsvFormat(delimiter).parse(str, autoType ? d3AutoType : identity);\n    }\n    if (format === 'json') {\n      return await response.json();\n    }\n    throw new Error(`Unknown format: ${format}.`);\n  };\n};\n\nFetch.props = {};\n", "import { DataComponent as DC } from '../runtime';\nimport { FoldTransform } from '../spec';\n\nexport function isEmpty(obj: any) {\n  return !obj || Object.keys(obj).length === 0;\n}\n\nexport type FoldOptions = Omit<FoldTransform, 'type'>;\n\n/**\n * Collapses (or folds) one or more data fields into two\n * properties: `key` (contains the original data field name)\n * and `value` (contains the original data value.)\n */\nexport const Fold: DC<FoldOptions> = (options) => {\n  const { fields, key = 'key', value = 'value' } = options;\n  return (data) => {\n    if (isEmpty(fields)) return data;\n    return data.flatMap((d) =>\n      fields.map((f) => ({ ...d, [key]: f, [value]: d[f] })),\n    );\n  };\n};\n\nFold.props = {};\n", "import { DataComponent as DC } from '../runtime';\nimport { FilterDataTransform } from '../spec';\n\nexport type FilterDataOptions = Omit<FilterDataTransform, 'type'>;\n\nexport function defined(d: any): boolean {\n  return d !== undefined && d !== null && !Number.isNaN(d);\n}\n\n/**\n * Filter data by specified fields and filter callback for each fields.\n * It saves datum with every fields defined by default.\n */\nexport const Filter: DC<FilterDataOptions> = (options) => {\n  const { callback = defined } = options;\n  return (data) => data.filter(callback);\n};\n\nFilter.props = {};\n", "import { DataComponent as DC } from '../runtime';\nimport { SortTransform } from '../spec';\n\nexport type SortOptions = Omit<SortTransform, 'type'>;\n\nexport function defined(d: any): boolean {\n  return d !== undefined && d !== null && !Number.isNaN(d);\n}\n\n/**\n * Sort data similar with Array.prototypo.sort.\n */\nexport const Sort: DC<SortOptions> = (options) => {\n  const { callback } = options;\n  return (data) => (Array.isArray(data) ? [...data].sort(callback) : data);\n};\n\nSort.props = {};\n", "import { DataComponent as DC } from '../runtime';\nimport { PickTransform } from '../spec';\n\nexport type PickOptions = Omit<PickTransform, 'type'>;\n\nfunction pick(v: any, fields: string[] = []) {\n  return fields.reduce((datum, field) => {\n    // Pick the data deeply.\n    if (field in v) {\n      datum[field] = v[field];\n    }\n    return datum;\n  }, {});\n}\n\n/**\n * Immutable data pick by specified fields.\n */\nexport const Pick: DC<PickOptions> = (options) => {\n  const { fields } = options;\n  return (data) => data.map((d) => pick(d, fields));\n};\n\nPick.props = {};\n", "import { DataComponent as DC } from '../runtime';\nimport { RenameTransform } from '../spec';\n\nexport function isEmpty(obj: any) {\n  return Object.keys(obj).length === 0;\n}\n\nexport type RenameOptions = Omit<RenameTransform, 'type'>;\n\n/**\n * Immutable data rename by specified fields.\n */\nexport const Rename: DC<RenameOptions> = (options) => {\n  return (data) => {\n    if (!options || isEmpty(options)) return data;\n    const rename = (v: any) =>\n      Object.entries(v).reduce(\n        (datum, [key, value]) => ((datum[options[key] || key] = value), datum),\n        {},\n      );\n    return data.map(rename);\n  };\n};\n\nRename.props = {};\n", "/**\n *\n * @description Converts a random format array into a regular two-dimensional array\n * @example ['a', 'b', ['c', value]] => [['a', defaultValue], ['b', defaultValue], ['c', value]]\n */\nexport function normalizeFields(\n  fields: any[],\n  defaultValue: boolean | ((d: any) => boolean),\n) {\n  return fields.map((d) => {\n    if (Array.isArray(d)) {\n      const [field, value = defaultValue] = d;\n      return [field, value];\n    }\n    return [d, defaultValue];\n  });\n}\n", "import { DataComponent as DC } from '../runtime';\nimport { SortByTransform } from '../spec';\nimport { normalizeFields } from './utils/fields';\n\nexport type SortByOptions = Omit<SortByTransform, 'type'>;\n\n/**\n * Immutable data sort by specified fields.\n */\nexport const SortBy: DC<SortByOptions> = (options) => {\n  const { fields: F = [] } = options;\n\n  const normalizedF = normalizeFields(F, true);\n\n  return (data) => {\n    const comparator = (a: any, b: any) =>\n      normalizedF.reduce((ret: number, [field, order = true]) => {\n        if (ret !== 0) {\n          return ret;\n        }\n\n        if (order) {\n          return a[field] < b[field] ? -1 : +(a[field] !== b[field]);\n        } else {\n          return a[field] > b[field] ? -1 : +(a[field] !== b[field]);\n        }\n      }, 0);\n\n    return [...data].sort(comparator);\n  };\n};\n\nSortBy.props = {};\n", "import { DataComponent as DC } from '../runtime';\nimport { InlineConnector } from '../spec';\n\nexport type InlineOptions = Omit<InlineConnector, 'type'>;\n\nexport const Inline: DC<InlineOptions> = (options) => {\n  const { value } = options;\n  return () => value;\n};\n\nInline.props = {};\n", "import { DataComponent as DC } from '../runtime';\nimport { CustomDataTransform } from '../spec';\nimport { identity } from '../utils/helper';\n\nexport type CustomOptions = Omit<CustomDataTransform, 'type'>;\n\n/**\n * Connector transfom by function.\n */\nexport const Custom: DC<CustomOptions> = (options) => {\n  const { callback = identity } = options;\n  return (data) => callback(data);\n};\n\nCustom.props = {};\n", "import { DataComponent as DC } from '../runtime';\nimport { identity } from '../utils/helper';\nimport { MapTransform } from '../spec';\n\nexport type MapOptions = Omit<MapTransform, 'type'>;\n\n/**\n * Map transform by function.\n */\nexport const Map: DC<MapOptions> = (options) => {\n  const { callback = identity } = options;\n  return (data) => (Array.isArray(data) ? data.map(callback) : data);\n};\n\nMap.props = {};\n", "type Flow = {\n  set(key: string, normalize?, callback?): Flow;\n  setAsync(key: string, normalize?, callback?): Promise<Flow>;\n};\n/**\n * @todo Combine with the `Container` util\n */\nexport function flow(\n  target: Record<keyof any, any>,\n  source: Record<keyof any, any>,\n): Flow {\n  return {\n    set(key: string, normalize?, callback?) {\n      if (source[key] === undefined) return this;\n\n      const value = normalize ? normalize.call(null, source[key]) : source[key];\n      if (callback) callback.call(null, value);\n      else if (typeof target[key] === 'function') target[key](value);\n      else target[key] = value;\n\n      return this;\n    },\n    async setAsync(key: string, normalize?, callback?) {\n      if (source[key] === undefined) return this;\n\n      const value = normalize\n        ? await normalize.call(null, source[key])\n        : source[key];\n      if (callback) callback.call(null, value);\n      else if (typeof target[key] === 'function') target[key](value);\n      else target[key] = value;\n\n      return this;\n    },\n  };\n}\n", "/*\n * Synchronous version of d3-cloud\n * Word cloud layout by Jason Davies, https://www.jasondavies.com/wordcloud/\n * Algorithm due to Jonathan Feinberg, http://static.mrfeinberg.com/bv_ch03.pdf\n */\ninterface Item {\n  value: number;\n  text: string;\n  sprite: boolean;\n}\n\nconst cloudRadians = Math.PI / 180,\n  cw = (1 << 11) >> 5,\n  ch = 1 << 11;\n\nfunction cloudText(d: Item) {\n  return d.text;\n}\n\nfunction cloudFont() {\n  return 'serif';\n}\n\nfunction cloudFontNormal() {\n  return 'normal';\n}\n\nfunction cloudFontSize(d: Item) {\n  return d.value;\n}\n\nfunction cloudRotate() {\n  return ~~(Math.random() * 2) * 90;\n}\n\nfunction cloudPadding() {\n  return 1;\n}\n\nfunction cloudDispatch() {\n  return;\n}\n// Fetches a monochrome sprite bitmap for the specified text.\n// Load in batches for speed.\nfunction cloudSprite(contextAndRatio, d, data, di) {\n  if (d.sprite) return;\n  const c = contextAndRatio.context,\n    ratio = contextAndRatio.ratio;\n\n  c.clearRect(0, 0, (cw << 5) / ratio, ch / ratio);\n  let x = 0,\n    y = 0,\n    maxh = 0;\n  const n = data.length;\n  --di;\n  while (++di < n) {\n    d = data[di];\n    c.save();\n    c.font =\n      d.style +\n      ' ' +\n      d.weight +\n      ' ' +\n      ~~((d.size + 1) / ratio) +\n      'px ' +\n      d.font;\n    let w = c.measureText(d.text + 'm').width * ratio,\n      h = d.size << 1;\n    if (d.rotate) {\n      const sr = Math.sin(d.rotate * cloudRadians),\n        cr = Math.cos(d.rotate * cloudRadians),\n        wcr = w * cr,\n        wsr = w * sr,\n        hcr = h * cr,\n        hsr = h * sr;\n      w =\n        ((Math.max(Math.abs(wcr + hsr), Math.abs(wcr - hsr)) + 0x1f) >> 5) << 5;\n      h = ~~Math.max(Math.abs(wsr + hcr), Math.abs(wsr - hcr));\n    } else {\n      w = ((w + 0x1f) >> 5) << 5;\n    }\n    if (h > maxh) maxh = h;\n    if (x + w >= cw << 5) {\n      x = 0;\n      y += maxh;\n      maxh = 0;\n    }\n    if (y + h >= ch) break;\n    c.translate((x + (w >> 1)) / ratio, (y + (h >> 1)) / ratio);\n    if (d.rotate) c.rotate(d.rotate * cloudRadians);\n    c.fillText(d.text, 0, 0);\n    if (d.padding) {\n      c.lineWidth = 2 * d.padding;\n      c.strokeText(d.text, 0, 0);\n    }\n    c.restore();\n    d.width = w;\n    d.height = h;\n    d.xoff = x;\n    d.yoff = y;\n    d.x1 = w >> 1;\n    d.y1 = h >> 1;\n    d.x0 = -d.x1;\n    d.y0 = -d.y1;\n    d.hasText = true;\n    x += w;\n  }\n  const pixels = c.getImageData(0, 0, (cw << 5) / ratio, ch / ratio).data,\n    sprite = [];\n  while (--di >= 0) {\n    d = data[di];\n    if (!d.hasText) continue;\n    const w = d.width,\n      w32 = w >> 5;\n    let h = d.y1 - d.y0;\n    // Zero the buffer\n    for (let i = 0; i < h * w32; i++) sprite[i] = 0;\n    x = d.xoff;\n    if (x == null) return;\n    y = d.yoff;\n    let seen = 0,\n      seenRow = -1;\n    for (let j = 0; j < h; j++) {\n      for (let i = 0; i < w; i++) {\n        const k = w32 * j + (i >> 5),\n          m = pixels[((y + j) * (cw << 5) + (x + i)) << 2]\n            ? 1 << (31 - (i % 32))\n            : 0;\n        sprite[k] |= m;\n        seen |= m;\n      }\n      if (seen) seenRow = j;\n      else {\n        d.y0++;\n        h--;\n        j--;\n        y++;\n      }\n    }\n    d.y1 = d.y0 + seenRow;\n    d.sprite = sprite.slice(0, (d.y1 - d.y0) * w32);\n  }\n}\n\n// Use mask-based collision detection.\nfunction cloudCollide(tag, board, sw) {\n  sw >>= 5;\n  const sprite = tag.sprite,\n    w = tag.width >> 5,\n    lx = tag.x - (w << 4),\n    sx = lx & 0x7f,\n    msx = 32 - sx,\n    h = tag.y1 - tag.y0;\n  let x = (tag.y + tag.y0) * sw + (lx >> 5),\n    last;\n  for (let j = 0; j < h; j++) {\n    last = 0;\n    for (let i = 0; i <= w; i++) {\n      if (\n        ((last << msx) | (i < w ? (last = sprite[j * w + i]) >>> sx : 0)) &\n        board[x + i]\n      )\n        return true;\n    }\n    x += sw;\n  }\n  return false;\n}\n\nfunction cloudBounds(bounds, d) {\n  const b0 = bounds[0],\n    b1 = bounds[1];\n  if (d.x + d.x0 < b0.x) b0.x = d.x + d.x0;\n  if (d.y + d.y0 < b0.y) b0.y = d.y + d.y0;\n  if (d.x + d.x1 > b1.x) b1.x = d.x + d.x1;\n  if (d.y + d.y1 > b1.y) b1.y = d.y + d.y1;\n}\n\nfunction collideRects(a, b) {\n  return (\n    a.x + a.x1 > b[0].x &&\n    a.x + a.x0 < b[1].x &&\n    a.y + a.y1 > b[0].y &&\n    a.y + a.y0 < b[1].y\n  );\n}\n\nfunction archimedeanSpiral(size) {\n  const e = size[0] / size[1];\n  return function (t) {\n    return [e * (t *= 0.1) * Math.cos(t), t * Math.sin(t)];\n  };\n}\n\nfunction rectangularSpiral(size) {\n  const dy = 4,\n    dx = (dy * size[0]) / size[1];\n  let x = 0,\n    y = 0;\n  return function (t) {\n    const sign = t < 0 ? -1 : 1;\n    // See triangular numbers: T_n = n * (n + 1) / 2.\n    switch ((Math.sqrt(1 + 4 * sign * t) - sign) & 3) {\n      case 0:\n        x += dx;\n        break;\n      case 1:\n        y += dy;\n        break;\n      case 2:\n        x -= dx;\n        break;\n      default:\n        y -= dy;\n        break;\n    }\n    return [x, y];\n  };\n}\n\n// TODO reuse arrays?\nfunction zeroArray(n) {\n  const a = [];\n  let i = -1;\n  while (++i < n) a[i] = 0;\n  return a;\n}\n\nfunction cloudCanvas() {\n  return document.createElement('canvas');\n}\n\nfunction functor(d) {\n  return typeof d === 'function'\n    ? d\n    : function () {\n        return d;\n      };\n}\n\nconst spirals = {\n  archimedean: archimedeanSpiral,\n  rectangular: rectangularSpiral,\n};\n\nexport function tagCloud() {\n  let size = [256, 256],\n    text = cloudText,\n    font = cloudFont,\n    fontSize = cloudFontSize,\n    fontWeight = cloudFontNormal,\n    rotate = cloudRotate,\n    padding = cloudPadding,\n    spiral = archimedeanSpiral,\n    random = Math.random,\n    event = cloudDispatch,\n    words = [],\n    timer = null,\n    timeInterval = Infinity,\n    canvas = cloudCanvas;\n\n  const fontStyle = cloudFontNormal;\n  const cloud: any = {};\n\n  cloud.start = function () {\n    const [width, height] = size;\n    const contextAndRatio = getContext(canvas()),\n      board = cloud.board ? cloud.board : zeroArray((size[0] >> 5) * size[1]),\n      n = words.length,\n      tags = [],\n      data = words\n        .map(function (d, i, data) {\n          d.text = text.call(this, d, i, data);\n          d.font = font.call(this, d, i, data);\n          d.style = fontStyle.call(this, d, i, data);\n          d.weight = fontWeight.call(this, d, i, data);\n          d.rotate = rotate.call(this, d, i, data);\n          d.size = ~~fontSize.call(this, d, i, data);\n          d.padding = padding.call(this, d, i, data);\n          return d;\n        })\n        .sort(function (a, b) {\n          return b.size - a.size;\n        });\n    let i = -1,\n      bounds = !cloud.board\n        ? undefined\n        : [\n            {\n              x: 0,\n              y: 0,\n            },\n            {\n              x: width,\n              y: height,\n            },\n          ];\n\n    if (timer) clearInterval(timer);\n    timer = setInterval(step, 0);\n    step();\n\n    function step() {\n      const start = Date.now();\n      while (Date.now() - start < timeInterval && ++i < n) {\n        const d = data[i];\n        d.x = (width * (random() + 0.5)) >> 1;\n        d.y = (height * (random() + 0.5)) >> 1;\n        cloudSprite(contextAndRatio, d, data, i);\n        if (d.hasText && place(board, d, bounds)) {\n          event.call(null, 'word', { cloud, word: d });\n          tags.push(d);\n          if (bounds) {\n            if (!cloud.hasImage) {\n              // update bounds if image mask not set\n              cloudBounds(bounds, d);\n            }\n          } else {\n            bounds = [\n              { x: d.x + d.x0, y: d.y + d.y0 },\n              { x: d.x + d.x1, y: d.y + d.y1 },\n            ];\n          }\n          // Temporary hack\n          d.x -= size[0] >> 1;\n          d.y -= size[1] >> 1;\n        }\n      }\n      cloud._tags = tags;\n      cloud._bounds = bounds;\n\n      if (i >= n) {\n        cloud.stop();\n        event.call(null, 'end', { cloud, words: tags, bounds });\n      }\n    }\n\n    return cloud;\n  };\n\n  cloud.stop = function () {\n    if (timer) {\n      clearInterval(timer);\n      timer = null;\n    }\n    return cloud;\n  };\n\n  function getContext(canvas: HTMLCanvasElement) {\n    canvas.width = canvas.height = 1;\n    const ratio = Math.sqrt(\n      canvas.getContext('2d')!.getImageData(0, 0, 1, 1).data.length >> 2,\n    );\n    canvas.width = (cw << 5) / ratio;\n    canvas.height = ch / ratio;\n\n    const context = canvas.getContext('2d') as CanvasRenderingContext2D;\n    context.fillStyle = context.strokeStyle = 'red';\n    context.textAlign = 'center';\n    context.textBaseline = 'middle';\n    return { context, ratio };\n  }\n\n  function place(board, tag, bounds) {\n    // const perimeter = [{ x: 0, y: 0 }, { x: size[0], y: size[1] }],\n    const startX = tag.x,\n      startY = tag.y,\n      maxDelta = Math.sqrt(size[0] * size[0] + size[1] * size[1]),\n      s = spiral(size),\n      dt = random() < 0.5 ? 1 : -1;\n    let dxdy,\n      t = -dt,\n      dx,\n      dy;\n\n    while ((dxdy = s((t += dt)))) {\n      dx = ~~dxdy[0];\n      dy = ~~dxdy[1];\n\n      if (Math.min(Math.abs(dx), Math.abs(dy)) >= maxDelta) break;\n\n      tag.x = startX + dx;\n      tag.y = startY + dy;\n\n      if (\n        tag.x + tag.x0 < 0 ||\n        tag.y + tag.y0 < 0 ||\n        tag.x + tag.x1 > size[0] ||\n        tag.y + tag.y1 > size[1]\n      )\n        continue;\n      // TODO only check for collisions within current bounds.\n      if (!bounds || !cloudCollide(tag, board, size[0])) {\n        if (!bounds || collideRects(tag, bounds)) {\n          const sprite = tag.sprite,\n            w = tag.width >> 5,\n            sw = size[0] >> 5,\n            lx = tag.x - (w << 4),\n            sx = lx & 0x7f,\n            msx = 32 - sx,\n            h = tag.y1 - tag.y0;\n          let last,\n            x = (tag.y + tag.y0) * sw + (lx >> 5);\n          for (let j = 0; j < h; j++) {\n            last = 0;\n            for (let i = 0; i <= w; i++) {\n              board[x + i] |=\n                (last << msx) | (i < w ? (last = sprite[j * w + i]) >>> sx : 0);\n            }\n            x += sw;\n          }\n          delete tag.sprite;\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n\n  cloud.createMask = (img: HTMLImageElement) => {\n    const can: HTMLCanvasElement = document.createElement('canvas');\n    const [width, height] = size;\n\n    //  width  height  0  cxt.getImageData \n    if (!width || !height) {\n      return;\n    }\n    const w32 = width >> 5;\n    const board = zeroArray((width >> 5) * height);\n    can.width = width;\n    can.height = height;\n    const cxt = can.getContext('2d') as CanvasRenderingContext2D;\n    cxt.drawImage(img, 0, 0, img.width, img.height, 0, 0, width, height);\n    const imageData = cxt.getImageData(0, 0, width, height).data;\n    for (let j = 0; j < height; j++) {\n      for (let i = 0; i < width; i++) {\n        const k = w32 * j + (i >> 5);\n        const tmp = (j * width + i) << 2;\n        const flag =\n          imageData[tmp] >= 250 &&\n          imageData[tmp + 1] >= 250 &&\n          imageData[tmp + 2] >= 250;\n        const m = flag ? 1 << (31 - (i % 32)) : 0;\n        board[k] |= m;\n      }\n    }\n    cloud.board = board;\n    cloud.hasImage = true;\n  };\n\n  cloud.timeInterval = function (_) {\n    timeInterval = _ == null ? Infinity : _;\n  };\n\n  cloud.words = function (_) {\n    words = _;\n  };\n\n  cloud.size = function (_ = []) {\n    size = [+_[0], +_[1]];\n  };\n\n  cloud.text = function (_) {\n    text = functor(_);\n  };\n\n  cloud.font = function (_) {\n    font = functor(_);\n  };\n\n  cloud.fontWeight = function (_) {\n    fontWeight = functor(_);\n  };\n\n  cloud.rotate = function (_) {\n    rotate = functor(_);\n  };\n\n  cloud.canvas = function (_) {\n    canvas = functor(_);\n  };\n\n  cloud.spiral = function (_) {\n    spiral = spirals[_] || _;\n  };\n\n  cloud.fontSize = function (_) {\n    fontSize = functor(_);\n  };\n\n  cloud.padding = function (_) {\n    padding = functor(_);\n  };\n\n  cloud.random = function (_) {\n    random = functor(_);\n  };\n\n  cloud.on = function (_) {\n    event = functor(_);\n  };\n\n  return cloud;\n}\n", "import { min, max } from '@antv/vendor/d3-array';\nimport { DataComponent as DC } from '../runtime';\nimport { flow } from './utils/flow';\nimport { tagCloud } from './utils/d3-cloud';\n\ntype Callable<T> = T | ((datum: any, i: number) => T);\n\n/**\n * See the document here: https://github.com/jasondavies/d3-cloud.\n */\nexport type WordCloudOptions = {\n  /**\n   * Internally, the layout uses setInterval to avoid locking up the browsers event loop.\n   * If specified, time is the maximum amount of time that can be spent during the current timestep.\n   * If not specified, returns the current maximum time interval, which defaults to Infinity.\n   */\n  timeInterval: number;\n  /**\n   * If specified, sets the words array. If not specified, returns the current words array, which defaults to [].\n   */\n  words: any[];\n  /**\n   * If specified, sets the rectangular [width, height] of the layout.\n   * If not specified, returns the current size, which defaults to [1, 1].\n   */\n  size: [number, number];\n  /**\n   * If specified, sets the font accessor function, which indicates the font face for each word.\n   * If not specified, returns the current font accessor function, which defaults to \"serif\".\n   * A constant may be specified instead of a function.\n   */\n  font: Callable<CSSStyleDeclaration['fontFamily']>;\n  /**\n   * TODO: Cname of font.\n   */\n  fontFamily: Callable<CSSStyleDeclaration['fontFamily']>;\n  /**\n   * If specified, sets the fontStyle accessor function, which indicates the font style for each word.\n   * If not specified, returns the current fontStyle accessor function, which defaults to \"normal\".\n   * A constant may be specified instead of a function.\n   */\n  fontStyle: Callable<CSSStyleDeclaration['fontFamily']>;\n  /**\n   * If specified, sets the fontWeight accessor function, which indicates the font weight for each word.\n   * If not specified, returns the current fontWeight accessor function, which defaults to \"normal\".\n   * A constant may be specified instead of a function.\n   */\n  fontWeight: Callable<CSSStyleDeclaration['fontFamily']>;\n  /**\n   * If specified, sets the fontSize accessor function, which indicates the numerical font size for each word.\n   * If not specified, returns the current fontSize accessor function, which defaults to:\n   *\n   * > function(d) { return Math.sqrt(d.value); }\n   *\n   * A constant may be specified instead of a function.\n   *\n   * If the fontSize is an array, it will be normalized to the range of [min, max] of the data value.\n   * If the fontSize is a function, it will be called with the data value.\n   * If the fontSize is a number, it will be used as the constant value.\n   */\n  fontSize: number | [number, number] | ((d: any) => number);\n  /**\n   * If specified, sets the rotate accessor function, which indicates the rotation angle (in degrees) for each word.\n   * If not specified, returns the current rotate accessor function, which defaults to:\n   *\n   * function() { return (~~(Math.random() * 6) - 3) * 30; }\n   *\n   * A constant may be specified instead of a function.\n   */\n  rotate: Callable<number>;\n  /**\n   * If specified, sets the text accessor function, which indicates the text for each word.\n   * If not specified, returns the current text accessor function, which defaults to:\n   *\n   * function(d) { return d.text; }\n   *\n   * A constant may be specified instead of a function.\n   */\n  text: Callable<string>;\n  /**\n   * If specified, sets the padding accessor function, which indicates the numerical padding for each word.\n   * If not specified, returns the current padding, which defaults to 1.\n   */\n  padding: Callable<number>;\n\n  /**\n   * If specified, sets the internal random number generator, used for selecting the initial position of each word,\n   *  and the clockwise/counterclockwise direction of the spiral for each word.\n   * This should return a number in the range [0, 1).\n   * If not specified, returns the current random number generator, which defaults to Math.random.\n   */\n  random: () => number;\n\n  /**\n   * If specified, sets the spiral used for positioning words.\n   */\n  spiral: any;\n\n  /**\n   * If specified, sets the image mask used for positioning words.\n   */\n  canvas: HTMLCanvasElement;\n};\n\nconst DEFAULT_OPTIONS = {\n  fontSize: [20, 60],\n  font: 'Impact',\n  padding: 2,\n  rotate: function () {\n    return (~~(Math.random() * 6) - 3) * 30;\n  },\n};\n\n/**\n * Process the image mask of wordCloud.\n * @param img\n * @returns\n */\nexport function processImageMask(\n  img: HTMLImageElement | string,\n): Promise<HTMLImageElement> {\n  return new Promise((res, rej) => {\n    if (img instanceof HTMLImageElement) {\n      res(img);\n      return;\n    }\n    if (typeof img === 'string') {\n      const image = new Image();\n      image.crossOrigin = 'anonymous';\n      image.src = img;\n      image.onload = () => res(image);\n      image.onerror = () => {\n        console.error(`'image ${img} load failed !!!'`);\n        rej();\n      };\n      return;\n    }\n    rej();\n  });\n}\n\n/**\n * normalize fontSize range to d3-cloud fontSize function.\n * @param fontSize\n * @param range\n * @returns\n */\nexport function normalizeFontSize(fontSize: any, range?: [number, number]) {\n  if (typeof fontSize === 'function') return fontSize;\n\n  if (Array.isArray(fontSize)) {\n    const [fMin, fMax] = fontSize;\n    if (!range) return () => (fMax + fMin) / 2;\n\n    const [min, max] = range;\n    if (max === min) return () => (fMax + fMin) / 2;\n\n    return ({ value }) => ((fMax - fMin) / (max - min)) * (value - min) + fMin;\n  }\n  return () => fontSize;\n}\n\nexport const WordCloud: DC<Partial<WordCloudOptions>> = (options, context) => {\n  return async (data) => {\n    const cloudOptions = Object.assign({}, DEFAULT_OPTIONS, options, {\n      canvas: context.createCanvas,\n    });\n    const layout = tagCloud();\n\n    await flow(layout, cloudOptions)\n      .set('fontSize', (v) => {\n        const arr = data.map((d) => d.value);\n        return normalizeFontSize(v, [min(arr) as any, max(arr) as any]);\n      })\n      .set('font')\n      .set('fontStyle')\n      .set('fontWeight')\n      .set('padding')\n      .set('rotate')\n      .set('size')\n      .set('spiral')\n      .set('timeInterval')\n      .set('random')\n      .set('text')\n      .set('on')\n      .set('canvas')\n      .setAsync('imageMask', processImageMask, layout.createMask);\n\n    layout.words([...data]);\n\n    const result = layout.start();\n\n    const [cw, ch] = cloudOptions.size;\n    const defaultBounds = [\n      { x: 0, y: 0 },\n      { x: cw, y: ch },\n    ];\n\n    const { _bounds: bounds = defaultBounds, _tags, hasImage } = result;\n\n    const tags = _tags.map(({ x, y, font, ...rest }) => ({\n      ...rest,\n      x: x + cw / 2,\n      y: y + ch / 2,\n      fontFamily: font,\n    }));\n\n    // Append two data to replace the corner of top-left and bottom-right, avoid calculate the actual bounds will occur some error.\n    const [{ x: tlx, y: tly }, { x: brx, y: bry }] = bounds;\n    const invisibleText = { text: '', value: 0, opacity: 0, fontSize: 0 };\n    tags.push(\n      {\n        ...invisibleText,\n        x: hasImage ? 0 : tlx,\n        y: hasImage ? 0 : tly,\n      },\n      {\n        ...invisibleText,\n        x: hasImage ? cw : brx,\n        y: hasImage ? ch : bry,\n      },\n    );\n\n    return tags;\n  };\n};\n\nWordCloud.props = {};\n", "import { rollup } from '@antv/vendor/d3-array';\nimport { DataComponent as DC } from '../runtime';\nimport { JoinTransform } from '../spec';\n\nfunction field(key: string | ((d: any) => any)): (d: any) => any {\n  return typeof key === 'string' ? (d) => d[key] : key;\n}\n\nexport type JoinOptions = Omit<JoinTransform, 'type'>;\n\n/**\n * Join data with another dataset by SQL style.\n */\nexport const Join: DC<JoinOptions> = (options) => {\n  // const { fromKey, from, key, unknown = NaN, ...rest } = options;\n  const { join, on, select = [], as = select, unknown = NaN } = options;\n  const [key, fromKey] = on;\n  const fk = field(fromKey);\n  const k = field(key);\n  const keyData = rollup(\n    join,\n    ([d]) => d, // Get the first matched.\n    (d) => fk(d),\n  );\n  return (data) =>\n    data.map((d) => {\n      const source = keyData.get(k(d));\n      return {\n        ...d,\n        ...select.reduce(\n          (prev, key, idx) => (\n            (prev[as[idx]] = source ? source[key] : unknown), prev\n          ),\n          {},\n        ),\n      };\n    });\n};\n\nJoin.props = {};\n", "import { DataComponent as DC } from '../runtime';\nimport { SliceTransform } from '../spec';\n\nexport type SliceOptions = Omit<SliceTransform, 'type'>;\n\n/**\n * Slice data between `start` ~ `end`.\n * Same with https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/slice\n */\nexport const Slice: DC<SliceOptions> = (options) => {\n  const { start, end } = options;\n  return (data) => data.slice(start, end);\n};\n\nSlice.props = {};\n", "import pdf from 'pdfast';\nimport { group } from '@antv/vendor/d3-array';\nimport { DataComponent as DC } from '../runtime';\nimport { KDEDataTransform } from '../spec';\n\nexport type KDEOptions = Omit<KDEDataTransform, 'type'>;\n\nexport function defined(d: any): boolean {\n  return d !== undefined && d !== null && !Number.isNaN(d);\n}\n\n/**\n * Kernel Density Estimation base on [pdfast](https://www.npmjs.com/package/pdfast),\n * generating probability density function (pdf) using triangular kernel,\n * optimized to run in O(N + K).\n */\nexport const KDE: DC<KDEOptions> = (options) => {\n  const {\n    field,\n    groupBy,\n    as = ['y', 'size'],\n    min,\n    max,\n    size = 10,\n    width,\n  } = options;\n  const [yField, sizeField] = as;\n  return (data) => {\n    const gs = Array.from(\n      group(data, (d) => groupBy.map((gb) => d[gb]).join('-')).values(),\n    );\n    return gs.map((g) => {\n      const pdfResult = pdf.create(\n        g.map((i) => i[field]),\n        {\n          min,\n          max,\n          size,\n          width,\n        },\n      );\n      const _y = pdfResult.map((result) => result.x);\n      const _size = pdfResult.map((result) => result.y);\n      return {\n        ...(g[0] as Record<string, unknown>),\n        [yField]: _y,\n        [sizeField]: _size,\n      };\n    });\n  };\n};\n\nKDE.props = {};\n", "/** finds the zeros of a function, given two starting points (which must\n * have opposite signs */\nexport function bisect(f, a, b, parameters?: any) {\n  parameters = parameters || {};\n  const maxIterations = parameters.maxIterations || 100;\n  const tolerance = parameters.tolerance || 1e-10;\n  const fA = f(a);\n  const fB = f(b);\n  let delta = b - a;\n\n  if (fA * fB > 0) {\n    throw 'Initial bisect points must have opposite signs';\n  }\n\n  if (fA === 0) return a;\n  if (fB === 0) return b;\n\n  for (let i = 0; i < maxIterations; ++i) {\n    delta /= 2;\n    const mid = a + delta;\n    const fMid = f(mid);\n\n    if (fMid * fA >= 0) {\n      a = mid;\n    }\n\n    if (Math.abs(delta) < tolerance || fMid === 0) {\n      return mid;\n    }\n  }\n  return a + delta;\n}\n", "// need some basic operations on vectors, rather than adding a dependency,\n// just define here\nexport function zeros(x) {\n  const r = new Array(x);\n  for (let i = 0; i < x; ++i) {\n    r[i] = 0;\n  }\n  return r;\n}\nexport function zerosM(x, y) {\n  return zeros(x).map(() => zeros(y));\n}\n\nexport function dot(a, b) {\n  let ret = 0;\n  for (let i = 0; i < a.length; ++i) {\n    ret += a[i] * b[i];\n  }\n  return ret;\n}\n\nexport function norm2(a) {\n  return Math.sqrt(dot(a, a));\n}\n\nexport function scale(ret, value, c?: any) {\n  for (let i = 0; i < value.length; ++i) {\n    ret[i] = value[i] * c;\n  }\n}\n\nexport function weightedSum(ret, w1, v1, w2, v2) {\n  for (let j = 0; j < ret.length; ++j) {\n    ret[j] = w1 * v1[j] + w2 * v2[j];\n  }\n}\n\nexport function gemv(output, A, x) {\n  for (let i = 0; i < output.length; ++i) {\n    output[i] = dot(A[i], x);\n  }\n}\n", "import { dot, norm2, weightedSum } from './blas1';\n\n/** minimizes a function using the downhill simplex method */\nexport function nelderMead(f, x0, parameters?: any) {\n  parameters = parameters || {};\n\n  const maxIterations = parameters.maxIterations || x0.length * 200;\n  const nonZeroDelta = parameters.nonZeroDelta || 1.05;\n  const zeroDelta = parameters.zeroDelta || 0.001;\n  const minErrorDelta = parameters.minErrorDelta || 1e-6;\n  const minTolerance = parameters.minErrorDelta || 1e-5;\n  const rho = parameters.rho !== undefined ? parameters.rho : 1;\n  const chi = parameters.chi !== undefined ? parameters.chi : 2;\n  const psi = parameters.psi !== undefined ? parameters.psi : -0.5;\n  const sigma = parameters.sigma !== undefined ? parameters.sigma : 0.5;\n  let maxDiff;\n\n  // initialize simplex.\n  const N = x0.length;\n  const simplex = new Array(N + 1);\n  simplex[0] = x0;\n  simplex[0].fx = f(x0);\n  simplex[0].id = 0;\n  for (let i = 0; i < N; ++i) {\n    const point = x0.slice();\n    point[i] = point[i] ? point[i] * nonZeroDelta : zeroDelta;\n    simplex[i + 1] = point;\n    simplex[i + 1].fx = f(point);\n    simplex[i + 1].id = i + 1;\n  }\n\n  function updateSimplex(value) {\n    for (let i = 0; i < value.length; i++) {\n      simplex[N][i] = value[i];\n    }\n    simplex[N].fx = value.fx;\n  }\n\n  const sortOrder = (a, b) => a.fx - b.fx;\n\n  const centroid = x0.slice();\n  const reflected = x0.slice();\n  const contracted = x0.slice();\n  const expanded = x0.slice();\n\n  for (let iteration = 0; iteration < maxIterations; ++iteration) {\n    simplex.sort(sortOrder);\n\n    if (parameters.history) {\n      // copy the simplex (since later iterations will mutate) and\n      // sort it to have a consistent order between iterations\n      const sortedSimplex = simplex.map((x) => {\n        const state = x.slice();\n        state.fx = x.fx;\n        state.id = x.id;\n        return state;\n      });\n      sortedSimplex.sort((a, b) => a.id - b.id);\n\n      parameters.history.push({\n        x: simplex[0].slice(),\n        fx: simplex[0].fx,\n        simplex: sortedSimplex,\n      });\n    }\n\n    maxDiff = 0;\n    for (let i = 0; i < N; ++i) {\n      maxDiff = Math.max(maxDiff, Math.abs(simplex[0][i] - simplex[1][i]));\n    }\n\n    if (\n      Math.abs(simplex[0].fx - simplex[N].fx) < minErrorDelta &&\n      maxDiff < minTolerance\n    ) {\n      break;\n    }\n\n    // compute the centroid of all but the worst point in the simplex\n    for (let i = 0; i < N; ++i) {\n      centroid[i] = 0;\n      for (let j = 0; j < N; ++j) {\n        centroid[i] += simplex[j][i];\n      }\n      centroid[i] /= N;\n    }\n\n    // reflect the worst point past the centroid  and compute loss at reflected\n    // point\n    const worst = simplex[N];\n    weightedSum(reflected, 1 + rho, centroid, -rho, worst);\n    reflected.fx = f(reflected);\n\n    // if the reflected point is the best seen, then possibly expand\n    if (reflected.fx < simplex[0].fx) {\n      weightedSum(expanded, 1 + chi, centroid, -chi, worst);\n      expanded.fx = f(expanded);\n      if (expanded.fx < reflected.fx) {\n        updateSimplex(expanded);\n      } else {\n        updateSimplex(reflected);\n      }\n    }\n\n    // if the reflected point is worse than the second worst, we need to\n    // contract\n    else if (reflected.fx >= simplex[N - 1].fx) {\n      let shouldReduce = false;\n\n      if (reflected.fx > worst.fx) {\n        // do an inside contraction\n        weightedSum(contracted, 1 + psi, centroid, -psi, worst);\n        contracted.fx = f(contracted);\n        if (contracted.fx < worst.fx) {\n          updateSimplex(contracted);\n        } else {\n          shouldReduce = true;\n        }\n      } else {\n        // do an outside contraction\n        weightedSum(contracted, 1 - psi * rho, centroid, psi * rho, worst);\n        contracted.fx = f(contracted);\n        if (contracted.fx < reflected.fx) {\n          updateSimplex(contracted);\n        } else {\n          shouldReduce = true;\n        }\n      }\n\n      if (shouldReduce) {\n        // if we don't contract here, we're done\n        if (sigma >= 1) break;\n\n        // do a reduction\n        for (let i = 1; i < simplex.length; ++i) {\n          weightedSum(simplex[i], 1 - sigma, simplex[0], sigma, simplex[i]);\n          simplex[i].fx = f(simplex[i]);\n        }\n      }\n    } else {\n      updateSimplex(reflected);\n    }\n  }\n\n  simplex.sort(sortOrder);\n  return { fx: simplex[0].fx, x: simplex[0] };\n}\n", "import { dot, weightedSum } from './blas1';\n\n/// searches along line 'pk' for a point that satifies the wolfe conditions\n/// See 'Numerical Optimization' by Nocedal and Wright p59-60\n/// f : objective function\n/// pk : search direction\n/// current: object containing current gradient/loss\n/// next: output: contains next gradient/loss\n/// returns a: step size taken\nexport function wolfeLineSearch(f, pk, current, next, a, c1?: any, c2?: any) {\n  const phi0 = current.fx;\n  const phiPrime0 = dot(current.fxprime, pk);\n  let phi = phi0;\n  let phi_old = phi0;\n  let phiPrime = phiPrime0;\n  let a0 = 0;\n\n  a = a || 1;\n  c1 = c1 || 1e-6;\n  c2 = c2 || 0.1;\n\n  function zoom(a_lo, a_high, phi_lo) {\n    for (let iteration = 0; iteration < 16; ++iteration) {\n      a = (a_lo + a_high) / 2;\n      weightedSum(next.x, 1.0, current.x, a, pk);\n      phi = next.fx = f(next.x, next.fxprime);\n      phiPrime = dot(next.fxprime, pk);\n\n      if (phi > phi0 + c1 * a * phiPrime0 || phi >= phi_lo) {\n        a_high = a;\n      } else {\n        if (Math.abs(phiPrime) <= -c2 * phiPrime0) {\n          return a;\n        }\n\n        if (phiPrime * (a_high - a_lo) >= 0) {\n          a_high = a_lo;\n        }\n\n        a_lo = a;\n        phi_lo = phi;\n      }\n    }\n\n    return 0;\n  }\n\n  for (let iteration = 0; iteration < 10; ++iteration) {\n    weightedSum(next.x, 1.0, current.x, a, pk);\n    phi = next.fx = f(next.x, next.fxprime);\n    phiPrime = dot(next.fxprime, pk);\n    if (phi > phi0 + c1 * a * phiPrime0 || (iteration && phi >= phi_old)) {\n      return zoom(a0, a, phi_old);\n    }\n\n    if (Math.abs(phiPrime) <= -c2 * phiPrime0) {\n      return a;\n    }\n\n    if (phiPrime >= 0) {\n      return zoom(a, a0, phi);\n    }\n\n    phi_old = phi;\n    a0 = a;\n    a *= 2;\n  }\n\n  return a;\n}\n", "import { dot, gemv, norm2, scale, weightedSum } from './blas1';\nimport { wolfeLineSearch } from './linesearch';\n\nexport function conjugateGradient(f, initial, params) {\n  // allocate all memory up front here, keep out of the loop for perfomance\n  // reasons\n  let current = { x: initial.slice(), fx: 0, fxprime: initial.slice() };\n  let next = { x: initial.slice(), fx: 0, fxprime: initial.slice() };\n  const yk = initial.slice();\n  let temp;\n  let a = 1;\n\n  params = params || {};\n  const maxIterations = params.maxIterations || initial.length * 20;\n\n  current.fx = f(current.x, current.fxprime);\n  const pk = current.fxprime.slice();\n  scale(pk, current.fxprime, -1);\n\n  for (let i = 0; i < maxIterations; ++i) {\n    a = wolfeLineSearch(f, pk, current, next, a);\n\n    // todo: history in wrong spot?\n    if (params.history) {\n      params.history.push({\n        x: current.x.slice(),\n        fx: current.fx,\n        fxprime: current.fxprime.slice(),\n        alpha: a,\n      });\n    }\n\n    if (!a) {\n      // faiiled to find point that satifies wolfe conditions.\n      // reset direction for next iteration\n      scale(pk, current.fxprime, -1);\n    } else {\n      // update direction using PolakRibiere CG method\n      weightedSum(yk, 1, next.fxprime, -1, current.fxprime);\n\n      const delta_k = dot(current.fxprime, current.fxprime);\n      const beta_k = Math.max(0, dot(yk, next.fxprime) / delta_k);\n\n      weightedSum(pk, beta_k, pk, -1, next.fxprime);\n\n      temp = current;\n      current = next;\n      next = temp;\n    }\n\n    if (norm2(current.fxprime) <= 1e-5) {\n      break;\n    }\n  }\n\n  if (params.history) {\n    params.history.push({\n      x: current.x.slice(),\n      fx: current.fx,\n      fxprime: current.fxprime.slice(),\n      alpha: a,\n    });\n  }\n\n  return current;\n}\n\n/// Solves a system of lienar equations Ax =b for x\n/// using the conjugate gradient method.\nexport function conjugateGradientSolve(A, b, x, history?: any) {\n  const r = x.slice();\n  const Ap = x.slice();\n  let rsold;\n  let rsnew;\n  let alpha;\n\n  // r = b - A*x\n  gemv(Ap, A, x);\n  weightedSum(r, 1, b, -1, Ap);\n  const p = r.slice();\n  rsold = dot(r, r);\n\n  for (let i = 0; i < b.length; ++i) {\n    gemv(Ap, A, p);\n    alpha = rsold / dot(p, Ap);\n    if (history) {\n      history.push({ x: x.slice(), p: p.slice(), alpha: alpha });\n    }\n\n    //x=x+alpha*p;\n    weightedSum(x, 1, x, alpha, p);\n\n    // r=r-alpha*Ap;\n    weightedSum(r, 1, r, -alpha, Ap);\n    rsnew = dot(r, r);\n    if (Math.sqrt(rsnew) <= 1e-10) break;\n\n    // p=r+(rsnew/rsold)*p;\n    weightedSum(p, 1, r, rsnew / rsold, p);\n    rsold = rsnew;\n  }\n  if (history) {\n    history.push({ x: x.slice(), p: p.slice(), alpha: alpha });\n  }\n  return x;\n}\n", "const SMALL = 1e-10;\n\n/**\n * Returns the intersection area of a bunch of circles (where each circle\n * is an object having an x,y and radius property)\n */\nexport function intersectionArea(circles, stats?: any) {\n  // Get all the intersection points of the circles\n  const intersectionPoints = getIntersectionPoints(circles);\n\n  // Filter out points that aren't included in all the circles\n  const innerPoints = intersectionPoints.filter(function (p) {\n    return containedInCircles(p, circles);\n  });\n\n  let arcArea = 0,\n    polygonArea = 0,\n    i;\n  const arcs = [];\n  // If we have intersection points that are within all the circles,\n  // then figure out the area contained by them\n  if (innerPoints.length > 1) {\n    // Sort the points by angle from the center of the polygon, which lets\n    // us just iterate over points to get the edges\n    const center = getCenter(innerPoints);\n    for (i = 0; i < innerPoints.length; ++i) {\n      const p = innerPoints[i];\n      p.angle = Math.atan2(p.x - center.x, p.y - center.y);\n    }\n    innerPoints.sort(function (a, b) {\n      return b.angle - a.angle;\n    });\n\n    // Iterate over all points, get arc between the points\n    // and update the areas\n    let p2 = innerPoints[innerPoints.length - 1];\n    for (i = 0; i < innerPoints.length; ++i) {\n      const p1 = innerPoints[i];\n\n      // Polygon area updates easily ...\n      polygonArea += (p2.x + p1.x) * (p1.y - p2.y);\n\n      // Updating the arc area is a little more involved\n      const midPoint = { x: (p1.x + p2.x) / 2, y: (p1.y + p2.y) / 2 };\n      let arc = null;\n\n      for (let j = 0; j < p1.parentIndex.length; ++j) {\n        if (p2.parentIndex.indexOf(p1.parentIndex[j]) > -1) {\n          // Figure out the angle halfway between the two points\n          // on the current circle\n          const circle = circles[p1.parentIndex[j]],\n            a1 = Math.atan2(p1.x - circle.x, p1.y - circle.y),\n            a2 = Math.atan2(p2.x - circle.x, p2.y - circle.y);\n\n          let angleDiff = a2 - a1;\n          if (angleDiff < 0) {\n            angleDiff += 2 * Math.PI;\n          }\n\n          // and use that angle to figure out the width of the\n          // arc\n          const a = a2 - angleDiff / 2;\n          let width = distance(midPoint, {\n            x: circle.x + circle.radius * Math.sin(a),\n            y: circle.y + circle.radius * Math.cos(a),\n          });\n\n          // Clamp the width to the largest is can actually be\n          // (sometimes slightly overflows because of FP errors)\n          if (width > circle.radius * 2) {\n            width = circle.radius * 2;\n          }\n\n          // Pick the circle whose arc has the smallest width\n          if (arc === null || arc.width > width) {\n            arc = { circle: circle, width: width, p1: p1, p2: p2 };\n          }\n        }\n      }\n\n      if (arc !== null) {\n        arcs.push(arc);\n        arcArea += circleArea(arc.circle.radius, arc.width);\n        p2 = p1;\n      }\n    }\n  } else {\n    // No intersection points, is either disjoint - or is completely\n    // overlapped. figure out which by examining the smallest circle\n    let smallest = circles[0];\n    for (i = 1; i < circles.length; ++i) {\n      if (circles[i].radius < smallest.radius) {\n        smallest = circles[i];\n      }\n    }\n\n    // Make sure the smallest circle is completely contained in all\n    // the other circles\n    let disjoint = false;\n    for (i = 0; i < circles.length; ++i) {\n      if (\n        distance(circles[i], smallest) >\n        Math.abs(smallest.radius - circles[i].radius)\n      ) {\n        disjoint = true;\n        break;\n      }\n    }\n\n    if (disjoint) {\n      arcArea = polygonArea = 0;\n    } else {\n      arcArea = smallest.radius * smallest.radius * Math.PI;\n      arcs.push({\n        circle: smallest,\n        p1: { x: smallest.x, y: smallest.y + smallest.radius },\n        p2: { x: smallest.x - SMALL, y: smallest.y + smallest.radius },\n        width: smallest.radius * 2,\n      });\n    }\n  }\n\n  polygonArea /= 2;\n  if (stats) {\n    stats.area = arcArea + polygonArea;\n    stats.arcArea = arcArea;\n    stats.polygonArea = polygonArea;\n    stats.arcs = arcs;\n    stats.innerPoints = innerPoints;\n    stats.intersectionPoints = intersectionPoints;\n  }\n\n  return arcArea + polygonArea;\n}\n\n/**\n * Returns whether a point is contained by all of a list of circles\n */\nexport function containedInCircles(point, circles) {\n  for (let i = 0; i < circles.length; ++i) {\n    if (distance(point, circles[i]) > circles[i].radius + SMALL) {\n      return false;\n    }\n  }\n  return true;\n}\n\n/** Gets all intersection points between a bunch of circles */\nfunction getIntersectionPoints(circles) {\n  const ret = [];\n  for (let i = 0; i < circles.length; ++i) {\n    for (let j = i + 1; j < circles.length; ++j) {\n      const intersect = circleCircleIntersection(circles[i], circles[j]);\n      for (let k = 0; k < intersect.length; ++k) {\n        const p: any = intersect[k];\n        p.parentIndex = [i, j];\n        ret.push(p);\n      }\n    }\n  }\n  return ret;\n}\n\n/** Circular segment area calculation. See http://mathworld.wolfram.com/CircularSegment.html */\nexport function circleArea(r, width) {\n  return (\n    r * r * Math.acos(1 - width / r) -\n    (r - width) * Math.sqrt(width * (2 * r - width))\n  );\n}\n\n/** Euclidean distance between two points */\nexport function distance(p1, p2) {\n  return Math.sqrt(\n    (p1.x - p2.x) * (p1.x - p2.x) + (p1.y - p2.y) * (p1.y - p2.y),\n  );\n}\n\n/** Returns the overlap area of two circles of radius r1 and r2 - that\nhave their centers separated by distance d. Simpler faster\ncircle intersection for only two circles */\nexport function circleOverlap(r1, r2, d) {\n  // no overlap\n  if (d >= r1 + r2) {\n    return 0;\n  }\n\n  // Completely overlapped\n  if (d <= Math.abs(r1 - r2)) {\n    return Math.PI * Math.min(r1, r2) * Math.min(r1, r2);\n  }\n\n  const w1 = r1 - (d * d - r2 * r2 + r1 * r1) / (2 * d),\n    w2 = r2 - (d * d - r1 * r1 + r2 * r2) / (2 * d);\n  return circleArea(r1, w1) + circleArea(r2, w2);\n}\n\n/** Given two circles (containing a x/y/radius attributes),\nreturns the intersecting points if possible.\nnote: doesn't handle cases where there are infinitely many\nintersection points (circles are equivalent):, or only one intersection point*/\nexport function circleCircleIntersection(p1, p2) {\n  const d = distance(p1, p2),\n    r1 = p1.radius,\n    r2 = p2.radius;\n\n  // If to far away, or self contained - can't be done\n  if (d >= r1 + r2 || d <= Math.abs(r1 - r2)) {\n    return [];\n  }\n\n  const a = (r1 * r1 - r2 * r2 + d * d) / (2 * d),\n    h = Math.sqrt(r1 * r1 - a * a),\n    x0 = p1.x + (a * (p2.x - p1.x)) / d,\n    y0 = p1.y + (a * (p2.y - p1.y)) / d,\n    rx = -(p2.y - p1.y) * (h / d),\n    ry = -(p2.x - p1.x) * (h / d);\n\n  return [\n    { x: x0 + rx, y: y0 - ry },\n    { x: x0 - rx, y: y0 + ry },\n  ];\n}\n\n/** Returns the center of a bunch of points */\nexport function getCenter(points) {\n  const center = { x: 0, y: 0 };\n  for (let i = 0; i < points.length; ++i) {\n    center.x += points[i].x;\n    center.y += points[i].y;\n  }\n  center.x /= points.length;\n  center.y /= points.length;\n  return center;\n}\n", "import {\n  bisect,\n  conjugateGradient,\n  nelderMead,\n  norm2,\n  scale,\n  zeros,\n  zerosM,\n} from './fmin';\nimport {\n  circleCircleIntersection,\n  circleOverlap,\n  distance,\n  intersectionArea,\n} from './circleintersection';\n\n/** given a list of set objects, and their corresponding overlaps.\nupdates the (x, y, radius) attribute on each set such that their positions\nroughly correspond to the desired overlaps */\nexport function venn(areas, parameters?: any) {\n  parameters = parameters || {};\n  parameters.maxIterations = parameters.maxIterations || 500;\n  const initialLayout = parameters.initialLayout || bestInitialLayout;\n  const loss = parameters.lossFunction || lossFunction;\n\n  // add in missing pairwise areas as having 0 size\n  areas = addMissingAreas(areas);\n\n  // initial layout is done greedily\n  const circles = initialLayout(areas, parameters);\n\n  // transform x/y coordinates to a vector to optimize\n  const initial = [],\n    setids = [];\n  let setid;\n  for (setid in circles) {\n    // eslint-disable-next-line\n    if (circles.hasOwnProperty(setid)) {\n      initial.push(circles[setid].x);\n      initial.push(circles[setid].y);\n      setids.push(setid);\n    }\n  }\n\n  // optimize initial layout from our loss function\n  const solution = nelderMead(\n    function (values) {\n      const current = {};\n      for (let i = 0; i < setids.length; ++i) {\n        const setid = setids[i];\n        current[setid] = {\n          x: values[2 * i],\n          y: values[2 * i + 1],\n          radius: circles[setid].radius,\n        };\n      }\n      return loss(current, areas);\n    },\n    initial,\n    parameters,\n  );\n\n  // transform solution vector back to x/y points\n  const positions = solution.x;\n  for (let i = 0; i < setids.length; ++i) {\n    setid = setids[i];\n    circles[setid].x = positions[2 * i];\n    circles[setid].y = positions[2 * i + 1];\n  }\n\n  return circles;\n}\n\nconst SMALL = 1e-10;\n\n/** Returns the distance necessary for two circles of radius r1 + r2 to\nhave the overlap area 'overlap' */\nexport function distanceFromIntersectArea(r1, r2, overlap) {\n  // handle complete overlapped circles\n  if (Math.min(r1, r2) * Math.min(r1, r2) * Math.PI <= overlap + SMALL) {\n    return Math.abs(r1 - r2);\n  }\n\n  return bisect(\n    function (distance) {\n      return circleOverlap(r1, r2, distance) - overlap;\n    },\n    0,\n    r1 + r2,\n  );\n}\n\n/** Missing pair-wise intersection area data can cause problems:\n treating as an unknown means that sets will be laid out overlapping,\n which isn't what people expect. To reflect that we want disjoint sets\n here, set the overlap to 0 for all missing pairwise set intersections */\nfunction addMissingAreas(areas) {\n  areas = areas.slice();\n\n  // two circle intersections that aren't defined\n  const ids: number[] = [],\n    pairs: any = {};\n  let i, j, a, b;\n  for (i = 0; i < areas.length; ++i) {\n    const area = areas[i];\n    if (area.sets.length == 1) {\n      ids.push(area.sets[0]);\n    } else if (area.sets.length == 2) {\n      a = area.sets[0];\n      b = area.sets[1];\n      // @ts-ignore\n      pairs[[a, b]] = true;\n      // @ts-ignore\n      pairs[[b, a]] = true;\n    }\n  }\n  ids.sort((a, b) => {\n    return a > b ? 1 : -1;\n  });\n\n  for (i = 0; i < ids.length; ++i) {\n    a = ids[i];\n    for (j = i + 1; j < ids.length; ++j) {\n      b = ids[j];\n      // @ts-ignore\n      if (!([a, b] in pairs)) {\n        areas.push({ sets: [a, b], size: 0 });\n      }\n    }\n  }\n  return areas;\n}\n\n/// Returns two matrices, one of the euclidean distances between the sets\n/// and the other indicating if there are subset or disjoint set relationships\nexport function getDistanceMatrices(areas, sets, setids) {\n  // initialize an empty distance matrix between all the points\n  const distances = zerosM(sets.length, sets.length),\n    constraints = zerosM(sets.length, sets.length);\n\n  // compute required distances between all the sets such that\n  // the areas match\n  areas\n    .filter(function (x) {\n      return x.sets.length == 2;\n    })\n    .map(function (current) {\n      const left = setids[current.sets[0]],\n        right = setids[current.sets[1]],\n        r1 = Math.sqrt(sets[left].size / Math.PI),\n        r2 = Math.sqrt(sets[right].size / Math.PI),\n        distance = distanceFromIntersectArea(r1, r2, current.size);\n\n      distances[left][right] = distances[right][left] = distance;\n\n      // also update constraints to indicate if its a subset or disjoint\n      // relationship\n      let c = 0;\n      if (current.size + 1e-10 >= Math.min(sets[left].size, sets[right].size)) {\n        c = 1;\n      } else if (current.size <= 1e-10) {\n        c = -1;\n      }\n      constraints[left][right] = constraints[right][left] = c;\n    });\n\n  return { distances: distances, constraints: constraints };\n}\n\n/// computes the gradient and loss simulatenously for our constrained MDS optimizer\nfunction constrainedMDSGradient(x, fxprime, distances, constraints) {\n  let loss = 0,\n    i;\n  for (i = 0; i < fxprime.length; ++i) {\n    fxprime[i] = 0;\n  }\n\n  for (i = 0; i < distances.length; ++i) {\n    const xi = x[2 * i],\n      yi = x[2 * i + 1];\n    for (let j = i + 1; j < distances.length; ++j) {\n      const xj = x[2 * j],\n        yj = x[2 * j + 1],\n        dij = distances[i][j],\n        constraint = constraints[i][j];\n\n      const squaredDistance = (xj - xi) * (xj - xi) + (yj - yi) * (yj - yi),\n        distance = Math.sqrt(squaredDistance),\n        delta = squaredDistance - dij * dij;\n\n      if (\n        (constraint > 0 && distance <= dij) ||\n        (constraint < 0 && distance >= dij)\n      ) {\n        continue;\n      }\n\n      loss += 2 * delta * delta;\n\n      fxprime[2 * i] += 4 * delta * (xi - xj);\n      fxprime[2 * i + 1] += 4 * delta * (yi - yj);\n\n      fxprime[2 * j] += 4 * delta * (xj - xi);\n      fxprime[2 * j + 1] += 4 * delta * (yj - yi);\n    }\n  }\n  return loss;\n}\n\n/// takes the best working variant of either constrained MDS or greedy\nexport function bestInitialLayout(areas, params) {\n  let initial = greedyLayout(areas, params);\n  const loss = params.lossFunction || lossFunction;\n\n  // greedylayout is sufficient for all 2/3 circle cases. try out\n  // constrained MDS for higher order problems, take its output\n  // if it outperforms. (greedy is aesthetically better on 2/3 circles\n  // since it axis aligns)\n  if (areas.length >= 8) {\n    const constrained = constrainedMDSLayout(areas, params),\n      constrainedLoss = loss(constrained, areas),\n      greedyLoss = loss(initial, areas);\n\n    if (constrainedLoss + 1e-8 < greedyLoss) {\n      initial = constrained;\n    }\n  }\n  return initial;\n}\n\n/// use the constrained MDS variant to generate an initial layout\nexport function constrainedMDSLayout(areas, params) {\n  params = params || {};\n  const restarts = params.restarts || 10;\n\n  // bidirectionally map sets to a rowid  (so we can create a matrix)\n  const sets = [],\n    setids = {};\n  let i;\n  for (i = 0; i < areas.length; ++i) {\n    const area = areas[i];\n    if (area.sets.length == 1) {\n      setids[area.sets[0]] = sets.length;\n      sets.push(area);\n    }\n  }\n\n  const matrices = getDistanceMatrices(areas, sets, setids);\n  let distances = matrices.distances;\n  const constraints = matrices.constraints;\n\n  // keep distances bounded, things get messed up otherwise.\n  // TODO: proper preconditioner?\n  const norm = norm2(distances.map(norm2)) / distances.length;\n  distances = distances.map(function (row) {\n    return row.map(function (value) {\n      return value / norm;\n    });\n  });\n\n  const obj = function (x, fxprime) {\n    return constrainedMDSGradient(x, fxprime, distances, constraints);\n  };\n\n  let best, current;\n  for (i = 0; i < restarts; ++i) {\n    const initial = zeros(distances.length * 2).map(Math.random);\n\n    current = conjugateGradient(obj, initial, params);\n    if (!best || current.fx < best.fx) {\n      best = current;\n    }\n  }\n  const positions = best.x;\n\n  // translate rows back to (x,y,radius) coordinates\n  const circles = {};\n  for (i = 0; i < sets.length; ++i) {\n    const set = sets[i];\n    circles[set.sets[0]] = {\n      x: positions[2 * i] * norm,\n      y: positions[2 * i + 1] * norm,\n      radius: Math.sqrt(set.size / Math.PI),\n    };\n  }\n\n  if (params.history) {\n    for (i = 0; i < params.history.length; ++i) {\n      scale(params.history[i].x, norm);\n    }\n  }\n  return circles;\n}\n\n/** Lays out a Venn diagram greedily, going from most overlapped sets to\nleast overlapped, attempting to position each new set such that the\noverlapping areas to already positioned sets are basically right */\nexport function greedyLayout(areas, params) {\n  const loss =\n    params && params.lossFunction ? params.lossFunction : lossFunction;\n  // define a circle for each set\n  const circles = {},\n    setOverlaps = {};\n  let set;\n  for (let i = 0; i < areas.length; ++i) {\n    const area = areas[i];\n    if (area.sets.length == 1) {\n      set = area.sets[0];\n      circles[set] = {\n        x: 1e10,\n        y: 1e10,\n        // rowid: circles.length, // fix to ->\n        rowid: Object.keys(circles).length,\n        size: area.size,\n        radius: Math.sqrt(area.size / Math.PI),\n      };\n      setOverlaps[set] = [];\n    }\n  }\n  areas = areas.filter(function (a) {\n    return a.sets.length == 2;\n  });\n\n  // map each set to a list of all the other sets that overlap it\n  for (let i = 0; i < areas.length; ++i) {\n    const current = areas[i];\n    // eslint-disable-next-line\n    let weight = current.hasOwnProperty('weight') ? current.weight : 1.0;\n    const left = current.sets[0],\n      right = current.sets[1];\n\n    // completely overlapped circles shouldn't be positioned early here\n    if (\n      current.size + SMALL >=\n      Math.min(circles[left].size, circles[right].size)\n    ) {\n      weight = 0;\n    }\n\n    setOverlaps[left].push({ set: right, size: current.size, weight: weight });\n    setOverlaps[right].push({ set: left, size: current.size, weight: weight });\n  }\n\n  // get list of most overlapped sets\n  const mostOverlapped = [];\n  for (set in setOverlaps) {\n    // eslint-disable-next-line\n    if (setOverlaps.hasOwnProperty(set)) {\n      let size = 0;\n      for (let i = 0; i < setOverlaps[set].length; ++i) {\n        size += setOverlaps[set][i].size * setOverlaps[set][i].weight;\n      }\n\n      mostOverlapped.push({ set: set, size: size });\n    }\n  }\n\n  // sort by size desc\n  function sortOrder(a, b) {\n    return b.size - a.size;\n  }\n  mostOverlapped.sort(sortOrder);\n\n  // keep track of what sets have been laid out\n  const positioned = {};\n  function isPositioned(element) {\n    return element.set in positioned;\n  }\n\n  // adds a point to the output\n  function positionSet(point, index) {\n    circles[index].x = point.x;\n    circles[index].y = point.y;\n    positioned[index] = true;\n  }\n\n  // add most overlapped set at (0,0)\n  positionSet({ x: 0, y: 0 }, mostOverlapped[0].set);\n\n  // get distances between all points. TODO, necessary?\n  // answer: probably not\n  // var distances = venn.getDistanceMatrices(circles, areas).distances;\n  for (let i = 1; i < mostOverlapped.length; ++i) {\n    const setIndex = mostOverlapped[i].set,\n      overlap = setOverlaps[setIndex].filter(isPositioned);\n    set = circles[setIndex];\n    overlap.sort(sortOrder);\n\n    if (overlap.length === 0) {\n      // this shouldn't happen anymore with addMissingAreas\n      throw 'ERROR: missing pairwise overlap information';\n    }\n\n    const points = [];\n    for (let j = 0; j < overlap.length; ++j) {\n      // get appropriate distance from most overlapped already added set\n      const p1 = circles[overlap[j].set],\n        d1 = distanceFromIntersectArea(set.radius, p1.radius, overlap[j].size);\n\n      // sample positions at 90 degrees for maximum aesthetics\n      points.push({ x: p1.x + d1, y: p1.y });\n      points.push({ x: p1.x - d1, y: p1.y });\n      points.push({ y: p1.y + d1, x: p1.x });\n      points.push({ y: p1.y - d1, x: p1.x });\n\n      // if we have at least 2 overlaps, then figure out where the\n      // set should be positioned analytically and try those too\n      for (let k = j + 1; k < overlap.length; ++k) {\n        const p2 = circles[overlap[k].set],\n          d2 = distanceFromIntersectArea(\n            set.radius,\n            p2.radius,\n            overlap[k].size,\n          );\n\n        const extraPoints = circleCircleIntersection(\n          { x: p1.x, y: p1.y, radius: d1 },\n          { x: p2.x, y: p2.y, radius: d2 },\n        );\n\n        for (let l = 0; l < extraPoints.length; ++l) {\n          points.push(extraPoints[l]);\n        }\n      }\n    }\n\n    // we have some candidate positions for the set, examine loss\n    // at each position to figure out where to put it at\n    let bestLoss = 1e50,\n      bestPoint = points[0];\n    for (let j = 0; j < points.length; ++j) {\n      circles[setIndex].x = points[j].x;\n      circles[setIndex].y = points[j].y;\n      const localLoss = loss(circles, areas);\n      if (localLoss < bestLoss) {\n        bestLoss = localLoss;\n        bestPoint = points[j];\n      }\n    }\n\n    positionSet(bestPoint, setIndex);\n  }\n\n  return circles;\n}\n\n/** Given a bunch of sets, and the desired overlaps between these sets - computes\nthe distance from the actual overlaps to the desired overlaps. Note that\nthis method ignores overlaps of more than 2 circles */\nexport function lossFunction(sets, overlaps) {\n  let output = 0;\n\n  function getCircles(indices) {\n    return indices.map(function (i) {\n      return sets[i];\n    });\n  }\n\n  for (let i = 0; i < overlaps.length; ++i) {\n    const area = overlaps[i];\n    let overlap;\n    if (area.sets.length == 1) {\n      continue;\n    } else if (area.sets.length == 2) {\n      const left = sets[area.sets[0]],\n        right = sets[area.sets[1]];\n      overlap = circleOverlap(left.radius, right.radius, distance(left, right));\n    } else {\n      overlap = intersectionArea(getCircles(area.sets));\n    }\n\n    // eslint-disable-next-line\n    const weight = area.hasOwnProperty('weight') ? area.weight : 1.0;\n    output += weight * (overlap - area.size) * (overlap - area.size);\n  }\n\n  return output;\n}\n\n// orientates a bunch of circles to point in orientation\nfunction orientateCircles(circles, orientation, orientationOrder) {\n  if (orientationOrder === null) {\n    circles.sort(function (a, b) {\n      return b.radius - a.radius;\n    });\n  } else {\n    circles.sort(orientationOrder);\n  }\n\n  let i;\n  // shift circles so largest circle is at (0, 0)\n  if (circles.length > 0) {\n    const largestX = circles[0].x,\n      largestY = circles[0].y;\n\n    for (i = 0; i < circles.length; ++i) {\n      circles[i].x -= largestX;\n      circles[i].y -= largestY;\n    }\n  }\n\n  if (circles.length == 2) {\n    // if the second circle is a subset of the first, arrange so that\n    // it is off to one side. hack for https://github.com/benfred/venn.js/issues/120\n    const dist = distance(circles[0], circles[1]);\n    if (dist < Math.abs(circles[1].radius - circles[0].radius)) {\n      circles[1].x =\n        circles[0].x + circles[0].radius - circles[1].radius - 1e-10;\n      circles[1].y = circles[0].y;\n    }\n  }\n\n  // rotate circles so that second largest is at an angle of 'orientation'\n  // from largest\n  if (circles.length > 1) {\n    const rotation = Math.atan2(circles[1].x, circles[1].y) - orientation;\n    let x, y;\n    const c = Math.cos(rotation),\n      s = Math.sin(rotation);\n    for (i = 0; i < circles.length; ++i) {\n      x = circles[i].x;\n      y = circles[i].y;\n      circles[i].x = c * x - s * y;\n      circles[i].y = s * x + c * y;\n    }\n  }\n\n  // mirror solution if third solution is above plane specified by\n  // first two circles\n  if (circles.length > 2) {\n    let angle = Math.atan2(circles[2].x, circles[2].y) - orientation;\n    while (angle < 0) {\n      angle += 2 * Math.PI;\n    }\n    while (angle > 2 * Math.PI) {\n      angle -= 2 * Math.PI;\n    }\n    if (angle > Math.PI) {\n      const slope = circles[1].y / (1e-10 + circles[1].x);\n      for (i = 0; i < circles.length; ++i) {\n        const d = (circles[i].x + slope * circles[i].y) / (1 + slope * slope);\n        circles[i].x = 2 * d - circles[i].x;\n        circles[i].y = 2 * d * slope - circles[i].y;\n      }\n    }\n  }\n}\n\nexport function disjointCluster(circles) {\n  // union-find clustering to get disjoint sets\n  circles.map(function (circle) {\n    circle.parent = circle;\n  });\n\n  // path compression step in union find\n  function find(circle) {\n    if (circle.parent !== circle) {\n      circle.parent = find(circle.parent);\n    }\n    return circle.parent;\n  }\n\n  function union(x, y) {\n    const xRoot = find(x),\n      yRoot = find(y);\n    xRoot.parent = yRoot;\n  }\n\n  // get the union of all overlapping sets\n  for (let i = 0; i < circles.length; ++i) {\n    for (let j = i + 1; j < circles.length; ++j) {\n      const maxDistance = circles[i].radius + circles[j].radius;\n      if (distance(circles[i], circles[j]) + 1e-10 < maxDistance) {\n        union(circles[j], circles[i]);\n      }\n    }\n  }\n\n  // find all the disjoint clusters and group them together\n  const disjointClusters = {};\n  let setid;\n  for (let i = 0; i < circles.length; ++i) {\n    setid = find(circles[i]).parent.setid;\n    if (!(setid in disjointClusters)) {\n      disjointClusters[setid] = [];\n    }\n    disjointClusters[setid].push(circles[i]);\n  }\n\n  // cleanup bookkeeping\n  circles.map(function (circle) {\n    delete circle.parent;\n  });\n\n  // return in more usable form\n  const ret = [];\n  for (setid in disjointClusters) {\n    // eslint-disable-next-line\n    if (disjointClusters.hasOwnProperty(setid)) {\n      ret.push(disjointClusters[setid]);\n    }\n  }\n  return ret;\n}\n\nfunction getBoundingBox(circles) {\n  const minMax = function (d) {\n    const hi = Math.max.apply(\n        null,\n        circles.map(function (c) {\n          return c[d] + c.radius;\n        }),\n      ),\n      lo = Math.min.apply(\n        null,\n        circles.map(function (c) {\n          return c[d] - c.radius;\n        }),\n      );\n    return { max: hi, min: lo };\n  };\n\n  return { xRange: minMax('x'), yRange: minMax('y') };\n}\n\nexport function normalizeSolution(solution, orientation, orientationOrder) {\n  if (orientation === null) {\n    orientation = Math.PI / 2;\n  }\n\n  // work with a list instead of a dictionary, and take a copy so we\n  // don't mutate input\n  let circles = [],\n    i,\n    setid;\n  for (setid in solution) {\n    // eslint-disable-next-line\n    if (solution.hasOwnProperty(setid)) {\n      const previous = solution[setid];\n      circles.push({\n        x: previous.x,\n        y: previous.y,\n        radius: previous.radius,\n        setid: setid,\n      });\n    }\n  }\n\n  // get all the disjoint clusters\n  const clusters = disjointCluster(circles);\n\n  // orientate all disjoint sets, get sizes\n  for (i = 0; i < clusters.length; ++i) {\n    orientateCircles(clusters[i], orientation, orientationOrder);\n    const bounds = getBoundingBox(clusters[i]);\n    clusters[i].size =\n      (bounds.xRange.max - bounds.xRange.min) *\n      (bounds.yRange.max - bounds.yRange.min);\n    clusters[i].bounds = bounds;\n  }\n  clusters.sort(function (a, b) {\n    return b.size - a.size;\n  });\n\n  // orientate the largest at 0,0, and get the bounds\n  circles = clusters[0];\n  // @ts-ignore fixme \n  let returnBounds = circles.bounds;\n\n  const spacing = (returnBounds.xRange.max - returnBounds.xRange.min) / 50;\n\n  function addCluster(cluster, right, bottom) {\n    if (!cluster) return;\n\n    const bounds = cluster.bounds;\n    let xOffset, yOffset, centreing;\n\n    if (right) {\n      xOffset = returnBounds.xRange.max - bounds.xRange.min + spacing;\n    } else {\n      xOffset = returnBounds.xRange.max - bounds.xRange.max;\n      centreing =\n        (bounds.xRange.max - bounds.xRange.min) / 2 -\n        (returnBounds.xRange.max - returnBounds.xRange.min) / 2;\n      if (centreing < 0) xOffset += centreing;\n    }\n\n    if (bottom) {\n      yOffset = returnBounds.yRange.max - bounds.yRange.min + spacing;\n    } else {\n      yOffset = returnBounds.yRange.max - bounds.yRange.max;\n      centreing =\n        (bounds.yRange.max - bounds.yRange.min) / 2 -\n        (returnBounds.yRange.max - returnBounds.yRange.min) / 2;\n      if (centreing < 0) yOffset += centreing;\n    }\n\n    for (let j = 0; j < cluster.length; ++j) {\n      cluster[j].x += xOffset;\n      cluster[j].y += yOffset;\n      circles.push(cluster[j]);\n    }\n  }\n\n  let index = 1;\n  while (index < clusters.length) {\n    addCluster(clusters[index], true, false);\n    addCluster(clusters[index + 1], false, true);\n    addCluster(clusters[index + 2], true, true);\n    index += 3;\n\n    // have one cluster (in top left). lay out next three relative\n    // to it in a grid\n    returnBounds = getBoundingBox(circles);\n  }\n\n  // convert back to solution form\n  const ret = {};\n  for (i = 0; i < circles.length; ++i) {\n    ret[circles[i].setid] = circles[i];\n  }\n  return ret;\n}\n\n/** Scales a solution from venn.venn or venn.greedyLayout such that it fits in\na rectangle of width/height - with padding around the borders. also\ncenters the diagram in the available space at the same time */\nexport function scaleSolution(solution, width, height, padding) {\n  const circles = [],\n    setids = [];\n  for (const setid in solution) {\n    // eslint-disable-next-line\n    if (solution.hasOwnProperty(setid)) {\n      setids.push(setid);\n      circles.push(solution[setid]);\n    }\n  }\n\n  width -= 2 * padding;\n  height -= 2 * padding;\n\n  const bounds = getBoundingBox(circles),\n    xRange = bounds.xRange,\n    yRange = bounds.yRange;\n\n  if (xRange.max == xRange.min || yRange.max == yRange.min) {\n    console.log('not scaling solution: zero size detected');\n    return solution;\n  }\n\n  const xScaling = width / (xRange.max - xRange.min),\n    yScaling = height / (yRange.max - yRange.min),\n    scaling = Math.min(yScaling, xScaling),\n    // while we're at it, center the diagram too\n    xOffset = (width - (xRange.max - xRange.min) * scaling) / 2,\n    yOffset = (height - (yRange.max - yRange.min) * scaling) / 2;\n\n  const scaled = {};\n  for (let i = 0; i < circles.length; ++i) {\n    const circle = circles[i];\n    scaled[setids[i]] = {\n      radius: scaling * circle.radius,\n      x: padding + xOffset + (circle.x - xRange.min) * scaling,\n      y: padding + yOffset + (circle.y - yRange.min) * scaling,\n    };\n  }\n\n  return scaled;\n}\n", "import { intersectionArea } from './circleintersection';\n\n/**\n * (x, y)  r  path\n * @param x  x\n * @param y  y\n * @param r \n * @returns  path\n */\nfunction circlePath(x, y, r) {\n  const ret = [];\n  // ret.push('\\nM', x, y);\n  // ret.push('\\nm', -r, 0);\n  // ret.push('\\na', r, r, 0, 1, 0, r * 2, 0);\n  // ret.push('\\na', r, r, 0, 1, 0, -r * 2, 0);\n  const x0 = x - r;\n  const y0 = y;\n  ret.push('M', x0, y0);\n  ret.push('A', r, r, 0, 1, 0, x0 + 2 * r, y0);\n  ret.push('A', r, r, 0, 1, 0, x0, y0);\n\n  return ret.join(' ');\n}\n\n/** returns a svg path of the intersection area of a bunch of circles */\nexport function intersectionAreaPath(circles) {\n  const stats: any = {};\n  intersectionArea(circles, stats);\n  const arcs = stats.arcs;\n\n  if (arcs.length === 0) {\n    return 'M 0 0';\n  } else if (arcs.length == 1) {\n    const circle = arcs[0].circle;\n    return circlePath(circle.x, circle.y, circle.radius);\n  } else {\n    // draw path around arcs\n    const ret = ['\\nM', arcs[0].p2.x, arcs[0].p2.y];\n    for (let i = 0; i < arcs.length; ++i) {\n      const arc = arcs[i],\n        r = arc.circle.radius,\n        wide = arc.width > r;\n      ret.push('\\nA', r, r, 0, wide ? 1 : 0, 1, arc.p1.x, arc.p1.y);\n    }\n    return ret.join(' ');\n  }\n}\n", "import { DataComponent as DC } from '../runtime';\nimport { VennDataTransform } from '../spec';\nimport { intersectionAreaPath, scaleSolution, venn } from './utils/venn';\n\nexport type VennOptions = Omit<VennDataTransform, 'type'>;\n\ntype VennData = {\n  key?: string;\n  sets: string[];\n  size: number;\n};\n\n/**\n * Layout venn data, get the path string for each set.\n */\nexport const Venn: DC<VennOptions> = (options) => {\n  const {\n    sets = 'sets',\n    size = 'size',\n    as = ['key', 'path'],\n    padding = 0,\n  } = options;\n  const [key, path] = as;\n  return (data) => {\n    // Transform the data, venn layout use `sets` and `size` field.\n    const vennData: VennData[] = data.map((d) => ({\n      ...d,\n      sets: d[sets],\n      size: d[size],\n      [key]: d.sets.join('&'),\n    }));\n    // Sort data, avoid data occlusion.\n    vennData.sort((a, b) => a.sets.length - b.sets.length);\n\n    // Layout venn data.\n    const solution = venn(vennData);\n\n    let circles;\n\n    return vennData.map((datum) => {\n      const setsValue = datum[sets];\n      const pathFunc = ({ width, height }) => {\n        circles = circles\n          ? circles\n          : scaleSolution(solution, width, height, padding);\n        const setCircles = setsValue.map((set) => circles[set]);\n        let p = intersectionAreaPath(setCircles);\n        // Close the path for event picker.\n        if (!/[zZ]$/.test(p)) p += ' Z';\n        return p;\n      };\n\n      return { ...datum, [path]: pathFunc };\n    });\n  };\n};\n\nVenn.props = {};\n", "import { DataComponent as DC } from '../runtime';\nimport { LogDataTransform } from '../spec';\n\nexport type LogDataOptions = Omit<LogDataTransform, 'type'>;\n\n/**\n * Console.log the data section for dev debugger.\n */\nexport const Log: DC<LogDataOptions> = () => {\n  return (data) => {\n    console.log('G2 data section:', data);\n    return data;\n  };\n};\n\nLog.props = {};\n", "import { DataComponent as DC } from '../runtime';\nimport { EMADataTransform } from '../spec';\n\nexport function ema(values: number[], alpha: number): number[] {\n  if (alpha < 0 || alpha > 1) {\n    throw new Error('alpha must be between 0 and 1.');\n  }\n  if (values.length === 0) {\n    return [];\n  }\n\n  let last = values[0];\n  const smoothed: number[] = [];\n\n  for (const point of values) {\n    if (point === null || point === undefined) {\n      // \n      smoothed.push(point);\n      console.warn('EMAThe value is null or undefined', values);\n      continue;\n    }\n\n    if (last === null || last === undefined) {\n      last = point;\n    }\n\n    const smoothedVal = last * alpha + (1 - alpha) * point;\n    smoothed.push(smoothedVal);\n    last = smoothedVal;\n  }\n\n  return smoothed;\n}\n\nexport type EMAOptions = Omit<EMADataTransform, 'type'>;\n\n/**\n * https://en.wikipedia.org/wiki/Exponential_smoothing\n * @param options\n * @returns\n */\n\nexport const EMA: DC<EMAOptions> = (options) => {\n  const { field = 'y', alpha = 0.6, as = field } = options;\n\n  return (data) => {\n    const values = data.map((d) => {\n      return d[field];\n    });\n\n    const out = ema(values, alpha);\n\n    return data.map((d, i) => {\n      return {\n        ...d,\n        [as]: out[i],\n      };\n    });\n  };\n};\n\nEMA.props = {};\n", "import { AABB } from '@antv/g';\nimport { Vector2 } from './vector';\n\ntype Min = Vector2;\ntype Max = Vector2;\nexport type Bounds = [Min, Max];\n\n// There is a certain error in the calculation of text bounds.\nconst EPSILON = 1e-2;\n\nexport function parseAABB(min2: AABB): Bounds {\n  const { min, max } = min2;\n  return [\n    [min[0], min[1]],\n    [max[0], max[1]],\n  ];\n}\n\n/**\n * Whether the `point` in `bounds`.\n * @param point\n * @param bounds\n * @param threshold\n */\nexport function isInBounds(\n  point: Vector2,\n  bounds: Bounds,\n  threshold = EPSILON,\n): boolean {\n  const [x, y] = point;\n  const [min, max] = bounds;\n  return (\n    x >= min[0] - threshold &&\n    x <= max[0] + threshold &&\n    y >= min[1] - threshold &&\n    y <= max[1] + threshold\n  );\n}\n\n/**\n * Whether `b1` is overflow from `b2`.\n * @param b1\n * @param b2\n * @param threshold The threshold to determine whether the bounds is overflowed, default is 0.\n */\nexport function isOverflow(\n  b1: Bounds,\n  b2: Bounds,\n  threshold = EPSILON,\n): boolean {\n  const [min, max] = b1;\n  return !(isInBounds(min, b2, threshold) && isInBounds(max, b2, threshold));\n}\n\n/**\n * Whether `b1` is overlap with `b2`.\n * @param b1\n * @param b2\n * @returns\n */\nexport function isOverlap(b1: Bounds, b2: Bounds): boolean {\n  const [min1, max1] = b1;\n  const [min2, max2] = b2;\n  return (\n    min1[0] < max2[0] &&\n    max1[0] > min2[0] &&\n    min1[1] < max2[1] &&\n    max1[1] > min2[1]\n  );\n}\n", "import { DisplayObject } from '@antv/g';\nimport { LabelTransformComponent as LLC } from '../runtime';\nimport { OverlapHideLabelTransform } from '../spec';\nimport { isOverlap, parseAABB } from '../utils/bounds';\nimport { hide, show } from '../utils/style';\n\nexport type OverlapHideOptions = Omit<OverlapHideLabelTransform, 'type'>;\n\n/**\n * Hide the label when overlap.\n */\nexport const OverlapHide: LLC<OverlapHideOptions> = (options) => {\n  const { priority } = options;\n  return (labels: DisplayObject[]) => {\n    const displayLabels = [];\n    // When overlap, will hide the next label.\n    if (priority) labels.sort(priority);\n\n    labels.forEach((l) => {\n      show(l);\n\n      const b1 = l.getLocalBounds();\n      const overlaping = displayLabels.some((dl) =>\n        isOverlap(parseAABB(b1), parseAABB(dl.getLocalBounds())),\n      );\n\n      if (overlaping) hide(l);\n      else displayLabels.push(l);\n    });\n\n    return labels;\n  };\n};\n", "import { DisplayObject } from '@antv/g';\nimport { ascending } from '@antv/vendor/d3-array';\nimport { OverlapDodgeYLabelTransform } from '../spec';\nimport { LabelTransformComponent as LLC } from '../runtime';\n\nexport type OverlapDodgeYOptions = Omit<OverlapDodgeYLabelTransform, 'type'>;\n\nfunction isSegmentIntersect([a, b], [c, d]) {\n  return d > a && b > c;\n}\n\nfunction useMap<K, V>() {\n  const map = new Map<K, V>();\n  const get = (key: K) => map.get(key);\n  const set = (key: K, value: V) => map.set(key, value);\n  return [get, set] as const;\n}\n\nfunction getBoundsWithoutConnector(shape: DisplayObject) {\n  const node = shape.cloneNode(true);\n  const connectorShape = node.getElementById('connector');\n  connectorShape && node.removeChild(connectorShape);\n  const { min, max } = node.getRenderBounds();\n  node.destroy();\n  return { min, max };\n}\n\n/**\n * An iterative dodge method avoids label overlap. (n * log(n))\n */\nexport const OverlapDodgeY: LLC<OverlapDodgeYOptions> = (options) => {\n  const { maxIterations = 10, maxError = 0.1, padding = 1 } = options;\n  return (labels: DisplayObject[]) => {\n    const n = labels.length;\n    if (n <= 1) return labels;\n\n    // Index y, x0, x, height, by label.\n    const [y0, setY0] = useMap<DisplayObject, number>();\n    const [y, setY] = useMap<DisplayObject, number>();\n    const [h, setH] = useMap<DisplayObject, number>();\n    const [xx, setXX] = useMap<DisplayObject, [number, number]>();\n    for (const label of labels) {\n      const { min, max } = getBoundsWithoutConnector(label);\n      const [x0, y0] = min;\n      const [x1, y1] = max;\n      setY0(label, y0);\n      setY(label, y0);\n      setH(label, y1 - y0);\n      setXX(label, [x0, x1]);\n    }\n\n    // Offsets position Y.\n    for (let iter = 0; iter < maxIterations; iter++) {\n      labels.sort((a, b) => ascending(y(a), y(b)));\n      let error = 0;\n      for (let i = 0; i < n - 1; i++) {\n        const l0 = labels[i];\n        let j = i + 1;\n        let l1;\n        // Find the next label overlapping with the current label in x direction.\n        while ((l1 = labels[j]) && !isSegmentIntersect(xx(l0), xx(l1))) j += 1;\n        if (l1) {\n          const y0 = y(l0);\n          const h0 = h(l0);\n          const y1 = y(l1);\n          const delta = y1 - (y0 + h0);\n          if (delta < padding) {\n            const newDelta = (padding - delta) / 2;\n            error = Math.max(error, newDelta);\n            setY(l0, y0 - newDelta);\n            setY(l1, y1 + newDelta);\n          }\n        }\n      }\n      if (error < maxError) break;\n    }\n\n    for (const label of labels) {\n      label.style.y += y(label) - y0(label);\n    }\n\n    return labels;\n  };\n};\n", "import { parseColor } from '@antv/g';\n\nexport type Color = {\n  r: number;\n  g: number;\n  b: number;\n};\n\nexport function parseToRGB(c: string | Color): Color {\n  if (typeof c === 'object') return c;\n  return parseColor(c) as Color;\n}\n", "import { maxIndex } from '@antv/vendor/d3-array';\nimport { parseToRGB } from '../utils/color';\n\nfunction getsRGB(s: number) {\n  let c = s / 255;\n  c = c <= 0.03928 ? c / 12.92 : Math.pow((c + 0.055) / 1.055, 2.4);\n  return c;\n}\n\nfunction getL(r: number, g: number, b: number) {\n  return 0.2126 * getsRGB(r) + 0.7152 * getsRGB(g) + 0.0722 * getsRGB(b);\n}\n\n/**\n * Calculate the contrast. see https://webaim.org/resources/contrastchecker/\n * @param foreground\n * @param background\n */\nexport function contrast(foreground, background): number {\n  if (!foreground || !background || foreground === background) return 1;\n  const { r, g, b } = foreground;\n  const { r: rb, g: gb, b: bb } = background;\n  const L1 = getL(r, g, b);\n  const L2 = getL(rb, gb, bb);\n  return (Math.max(L1, L2) + 0.05) / (Math.min(L1, L2) + 0.05);\n}\n\n/**\n * Reverse color for max contrast.\n */\nexport function mostContrast(color, palette: string[]): string {\n  const i = maxIndex(palette, (c) => contrast(color, parseToRGB(c)));\n  return palette[i];\n}\n", "import { DisplayObject } from '@antv/g';\nimport { ContrastReverseLabelTransform } from '../spec';\nimport { LabelTransformComponent as LLC } from '../runtime';\nimport { contrast, mostContrast } from './utils';\n\nexport type ContrastReverseOptions = Omit<\n  ContrastReverseLabelTransform,\n  'type'\n>;\n\n/**\n * Reverse the label color when the contrast is lower then `threshold`.\n * The default value of `threshold` is 4.5.\n * More about contract, see https://webaim.org/resources/contrastchecker/\n */\nexport const ContrastReverse: LLC<ContrastReverseOptions> = (options) => {\n  const { threshold = 4.5, palette = ['#000', '#fff'] } = options;\n  return (labels: DisplayObject[]) => {\n    labels.forEach((l) => {\n      const background = l.attr('dependentElement').parsedStyle.fill;\n      const foreground = l.parsedStyle.fill;\n      const c = contrast(foreground, background);\n      if (c < threshold) l.attr('fill', mostContrast(background, palette));\n    });\n    return labels;\n  };\n};\n", "import { DisplayObject } from '@antv/g';\nimport { OverflowHideLabelTransform } from '../spec';\nimport { LabelTransformComponent as LLC } from '../runtime';\nimport { isOverflow, parseAABB } from '../utils/bounds';\nimport { hide, show } from '../utils/style';\n\nexport type OverflowHideOptions = Omit<OverflowHideLabelTransform, 'type'>;\n\n/**\n * Hide the label when the label is overflowed from the element.\n */\nexport const OverflowHide: LLC<OverflowHideOptions> = () => {\n  return (labels: DisplayObject[]) => {\n    labels.forEach((l) => {\n      show(l);\n      const bounds = l.attr('bounds');\n      const b = l.getLocalBounds();\n      const overflow = isOverflow(parseAABB(b), bounds);\n      if (overflow) hide(l);\n    });\n    return labels;\n  };\n};\n", "import { AABB, DisplayObject } from '@antv/g';\nimport { LabelTransformComponent as LLC } from '../runtime';\nimport { ExceedAdjustLabel } from '../spec';\nimport { Bounds } from '../utils/bounds';\nimport { show } from '../utils/style';\n\nconst adjustPosition = (target: Bounds, edge: Bounds) => {\n  const [[minEdgeX, minEdgeY], [maxEdgeX, maxEdgeY]] = edge;\n  const [[minX, minY], [maxX, maxY]] = target;\n\n  let changeX = 0,\n    changeY = 0;\n\n  // x-axis\n  if (minX < minEdgeX) {\n    changeX = minEdgeX - minX;\n  } else if (maxX > maxEdgeX) {\n    changeX = maxEdgeX - maxX;\n  }\n\n  // y-axis\n  if (minY < minEdgeY) {\n    changeY = minEdgeY - minY;\n  } else if (maxY > maxEdgeY) {\n    changeY = maxEdgeY - maxY;\n  }\n\n  return [changeX, changeY];\n};\n\nconst union = (a: AABB, b: AABB) => {\n  // Handle null bounds by returning the non-null one, or a default AABB\n  if (!a || !a.min || !a.max) {\n    if (!b || !b.min || !b.max) {\n      return { min: [0, 0], max: [0, 0] };\n    }\n    return b;\n  }\n  if (!b || !b.min || !b.max) {\n    return a;\n  }\n\n  return {\n    min: [Math.min(a.min[0], b.min[0]), Math.min(a.min[1], b.min[1])],\n    max: [Math.max(a.max[0], b.max[0]), Math.max(a.max[1], b.max[1])],\n  };\n};\n\nexport type ExceedAdjustOptions = Omit<ExceedAdjustLabel, 'type'> & {\n  /** X-axis offset default is 0 */\n  offsetX?: number;\n  /** Y-axis offset default is 0 */\n  offsetY?: number;\n};\n\n/**\n * adjust the label when exceed the specific area\n */\nexport const ExceedAdjust: LLC<ExceedAdjustOptions> = (options = {}) => {\n  return (labels: DisplayObject[], { canvas, layout }) => {\n    const { bounds = 'view', offsetX = 0, offsetY = 0 } = options;\n\n    // Calculate boundary area based on bounds option\n    const getBoundaryArea = () => {\n      if (bounds === 'main') {\n        // Main area: exclude margins and paddings from view area\n        const {\n          x = 0,\n          y = 0,\n          width = 0,\n          height = 0,\n          marginLeft = 0,\n          marginRight = 0,\n          marginTop = 0,\n          marginBottom = 0,\n          paddingLeft = 0,\n          paddingRight = 0,\n          paddingTop = 0,\n          paddingBottom = 0,\n        } = layout;\n\n        return [\n          [\n            x + marginLeft + paddingLeft + offsetX,\n            y + marginTop + paddingTop + offsetY,\n          ],\n          [\n            x + width - marginRight - paddingRight - offsetX,\n            y + height - marginBottom - paddingBottom - offsetY,\n          ],\n        ] as Bounds;\n      } else {\n        // View area (default): entire layout area\n        const { x = 0, y = 0, width = 0, height = 0 } = layout;\n        return [\n          [x + offsetX, y + offsetY],\n          [x + width - offsetX, y + height - offsetY],\n        ] as Bounds;\n      }\n    };\n\n    const boundaryArea = getBoundaryArea();\n\n    labels.forEach((l) => {\n      show(l);\n      const { max, min } = union(l.getRenderBounds(), l.getBounds());\n\n      // Skip labels with invalid bounds (filtered out data points)\n      // When bounds are all zeros or invalid, it means the label shouldn't be displayed\n      if (\n        !max ||\n        !min ||\n        (max[0] === 0 && max[1] === 0 && min[0] === 0 && min[1] === 0)\n      ) {\n        return;\n      }\n\n      const [xMax, yMax] = max,\n        [xMin, yMin] = min;\n      const changeValue = adjustPosition(\n        [\n          [xMin, yMin],\n          [xMax, yMax],\n        ],\n        // Use the calculated boundary area based on bounds configuration\n        boundaryArea,\n      );\n      // For label with connectorPoints\n      if (l.style.connector && l.style.connectorPoints) {\n        l.style.connectorPoints[0][0] -= changeValue[0];\n        l.style.connectorPoints[0][1] -= changeValue[1];\n      }\n      l.style.x += changeValue[0];\n      l.style.y += changeValue[1];\n    });\n\n    return labels;\n  };\n};\n", "import { DisplayObject } from '@antv/g';\nimport { OverflowStrokeTransform } from '../spec';\nimport { LabelTransformComponent as LLC } from '../runtime';\nimport { parseToRGB } from '../utils/color';\nimport { isOverflow, parseAABB } from '../utils/bounds';\nimport { bboxOf } from '../interaction/utils';\nimport { mostContrast } from './utils';\n\nexport type OverflowStrokeOptions = Omit<OverflowStrokeTransform, 'type'>;\n\n/**\n * Get bounds of element considering animation state.\n * If element has animations, get the final state bounds.\n */\nfunction getBoundsWithAnimation(element: DisplayObject) {\n  const animations = element.getAnimations();\n\n  // If no animations, use regular bboxOf.\n  if (!animations || animations.length === 0) {\n    return bboxOf(element);\n  }\n\n  // Clone element and apply final animation state.\n  const cloneElement = element.cloneNode(true) as DisplayObject;\n  cloneElement.style.visibility = 'hidden';\n\n  animations.forEach((animation) => {\n    const keyframes = animation.effect.getKeyframes();\n    if (keyframes && keyframes.length > 0) {\n      cloneElement.attr(keyframes[keyframes.length - 1]);\n    }\n  });\n\n  element.parentNode?.appendChild(cloneElement);\n  const bounds = bboxOf(cloneElement);\n  cloneElement.destroy();\n\n  return bounds;\n}\n\n/**\n * Reverse label stroke against label color.\n * More about contract, see https://webaim.org/resources/contrastchecker/\n */\nexport const OverflowStroke: LLC<OverflowStrokeOptions> = (options) => {\n  const { palette = ['#000', '#fff'], threshold = 2 } = options;\n\n  return (labels: DisplayObject[]) => {\n    labels.forEach((l) => {\n      const dependentElement = l.attr('dependentElement');\n      const labelFill = l.attributes.fill ?? l.parsedStyle.fill ?? '#fff';\n\n      const textBounds = parseAABB(getBoundsWithAnimation(l));\n      const elementBounds = parseAABB(getBoundsWithAnimation(dependentElement));\n\n      if (isOverflow(textBounds, elementBounds, threshold)) {\n        // Add stroke to make overflowing text more visible.\n        // Use the opposite color from palette for stroke.\n        const strokeColor = mostContrast(parseToRGB(labelFill), palette);\n\n        l.attr('stroke', strokeColor);\n      } else {\n        // Undefined can't set to attrs, have to remove.\n        l.removeAttribute('stroke');\n      }\n    });\n    return labels;\n  };\n};\n", "import {\n  Cartesian,\n  Polar,\n  Transpose,\n  Theta,\n  Parallel,\n  Fisheye,\n  Radial,\n  Radar,\n  Helix,\n} from '../coordinate';\nimport { Constant, Field, Transform, Column } from '../encode';\nimport {\n  Cell,\n  Interval,\n  Rect,\n  Line,\n  Point,\n  Text,\n  Area,\n  Image,\n  Polygon,\n  Box,\n  Vector,\n  Link,\n  LineX,\n  LineY,\n  Connector,\n  Range,\n  RangeX,\n  RangeY,\n  Path,\n  Shape,\n  Density,\n  Heatmap,\n  WordCloud as WordCloudGeometry,\n  Beeswarm,\n} from '../mark';\nimport { Category10, Category20 } from '../palette';\nimport {\n  Linear as ScaleLinear,\n  Ordinal as ScaleOrdinal,\n  Band as ScaleBand,\n  Identity as ScaleIdentity,\n  Point as ScalePoint,\n  Time as ScaleTime,\n  Log as ScaleLog,\n  Pow as ScalePow,\n  Threshold as ScaleThreshold,\n  Quantile as ScaleQuantile,\n  Quantize as ScaleQuantize,\n  Sqrt as ScaleSqrt,\n  Sequential as ScaleSequential,\n  Constant as ScaleConstant,\n} from '../scale';\nimport { Classic, ClassicDark, Academy, Light, Dark } from '../theme';\nimport {\n  AxisX,\n  AxisY,\n  LegendCategory,\n  LegendContinuous,\n  TitleComponent,\n  SliderX,\n  SliderY,\n  ScrollbarX,\n  ScrollbarY,\n  Legends,\n} from '../component';\nimport {\n  ScaleInX,\n  ScaleOutX,\n  ScaleInY,\n  ScaleOutY,\n  WaveIn,\n  FadeIn,\n  FadeOut,\n  Morphing,\n  ZoomIn,\n  ZoomOut,\n  PathIn,\n  GrowInX,\n  GrowInY,\n} from '../animation';\nimport {\n  ElementHighlight,\n  ElementHighlightByX,\n  ElementHighlightByColor,\n  ElementHoverScale,\n  ElementSelect,\n  ElementSelectByX,\n  ElementSelectByColor,\n  ChartIndex,\n  Fisheye as ChartFisheye,\n  Tooltip,\n  LegendFilter,\n  LegendHighlight,\n  BrushHighlight,\n  BrushXHighlight,\n  BrushYHighlight,\n  BrushAxisHighlight,\n  BrushFilter,\n  BrushXFilter,\n  BrushYFilter,\n  SliderFilter,\n  SliderWheel,\n  Poptip,\n  ScrollbarFilter,\n  TreemapDrillDown,\n  DrillDown,\n  ElementPointMove,\n} from '../interaction';\nimport {\n  SpaceLayer,\n  SpaceFlex,\n  FacetRect,\n  FacetCircle,\n  RepeatMatrix,\n  TimingKeyframe,\n} from '../composition';\nimport {\n  StackY,\n  DodgeX,\n  StackEnter,\n  NormalizeY,\n  Jitter,\n  JitterX,\n  JitterY,\n  SymmetryY,\n  DiffY,\n  Select,\n  SelectX,\n  SelectY,\n  GroupX,\n  Group,\n  SortX,\n  FlexX,\n  SortY,\n  GroupY,\n  GroupColor,\n  SortColor,\n  Pack,\n  BinX,\n  Bin,\n  Sample,\n  Filter,\n} from '../transform';\nimport {\n  Fetch as DataFetch,\n  SortBy as DataSortBy,\n  Filter as DataFilter,\n  Map as DataMap,\n  Pick as DataPick,\n  Rename as DataRename,\n  Fold as DataFold,\n  Slice as DataSlice,\n  Inline as DataInline,\n  Custom as DataCustom,\n  Join as DataJoin,\n  Sort as DataSort,\n  KDE as DataKDE,\n  Log as DataLog,\n  EMA as DataEMA,\n  WordCloud,\n} from '../data';\nimport {\n  OverlapDodgeY,\n  OverflowHide,\n  ContrastReverse,\n  OverlapHide,\n  ExceedAdjust,\n  OverflowStroke,\n} from '../label-transform';\n\nexport function corelib() {\n  return {\n    'data.fetch': DataFetch,\n    'data.inline': DataInline,\n    'data.sortBy': DataSortBy,\n    'data.sort': DataSort,\n    'data.filter': DataFilter,\n    'data.pick': DataPick,\n    'data.rename': DataRename,\n    'data.fold': DataFold,\n    'data.slice': DataSlice,\n    'data.custom': DataCustom,\n    'data.map': DataMap,\n    'data.join': DataJoin,\n    'data.kde': DataKDE,\n    'data.log': DataLog,\n    'data.wordCloud': WordCloud,\n    'data.ema': DataEMA,\n    'transform.stackY': StackY,\n    'transform.binX': BinX,\n    'transform.bin': Bin,\n    'transform.dodgeX': DodgeX,\n    'transform.jitter': Jitter,\n    'transform.jitterX': JitterX,\n    'transform.jitterY': JitterY,\n    'transform.symmetryY': SymmetryY,\n    'transform.diffY': DiffY,\n    'transform.stackEnter': StackEnter,\n    'transform.normalizeY': NormalizeY,\n    'transform.select': Select,\n    'transform.selectX': SelectX,\n    'transform.selectY': SelectY,\n    'transform.groupX': GroupX,\n    'transform.groupY': GroupY,\n    'transform.groupColor': GroupColor,\n    'transform.group': Group,\n    'transform.sortX': SortX,\n    'transform.sortY': SortY,\n    'transform.sortColor': SortColor,\n    'transform.flexX': FlexX,\n    'transform.pack': Pack,\n    'transform.sample': Sample,\n    'transform.filter': Filter,\n    'coordinate.cartesian': Cartesian,\n    'coordinate.polar': Polar,\n    'coordinate.transpose': Transpose,\n    'coordinate.theta': Theta,\n    'coordinate.parallel': Parallel,\n    'coordinate.fisheye': Fisheye,\n    'coordinate.radial': Radial,\n    'coordinate.radar': Radar,\n    'coordinate.helix': Helix,\n    'encode.constant': Constant,\n    'encode.field': Field,\n    'encode.transform': Transform,\n    'encode.column': Column,\n    'mark.interval': Interval,\n    'mark.rect': Rect,\n    'mark.line': Line,\n    'mark.point': Point,\n    'mark.text': Text,\n    'mark.cell': Cell,\n    'mark.area': Area,\n    'mark.link': Link,\n    'mark.image': Image,\n    'mark.polygon': Polygon,\n    'mark.box': Box,\n    'mark.vector': Vector,\n    'mark.lineX': LineX,\n    'mark.lineY': LineY,\n    'mark.connector': Connector,\n    'mark.range': Range,\n    'mark.rangeX': RangeX,\n    'mark.rangeY': RangeY,\n    'mark.path': Path,\n    'mark.shape': Shape,\n    'mark.density': Density,\n    'mark.heatmap': Heatmap,\n    'mark.wordCloud': WordCloudGeometry,\n    'mark.beeswarm': Beeswarm,\n    'palette.category10': Category10,\n    'palette.category20': Category20,\n    'scale.linear': ScaleLinear,\n    'scale.ordinal': ScaleOrdinal,\n    'scale.band': ScaleBand,\n    'scale.identity': ScaleIdentity,\n    'scale.point': ScalePoint,\n    'scale.time': ScaleTime,\n    'scale.log': ScaleLog,\n    'scale.pow': ScalePow,\n    'scale.sqrt': ScaleSqrt,\n    'scale.threshold': ScaleThreshold,\n    'scale.quantile': ScaleQuantile,\n    'scale.quantize': ScaleQuantize,\n    'scale.sequential': ScaleSequential,\n    'scale.constant': ScaleConstant,\n    'theme.classic': Classic,\n    'theme.classicDark': ClassicDark,\n    'theme.academy': Academy,\n    'theme.light': Light,\n    'theme.dark': Dark,\n    'component.axisX': AxisX,\n    'component.axisY': AxisY,\n    'component.legendCategory': LegendCategory,\n    'component.legendContinuous': LegendContinuous,\n    'component.legends': Legends,\n    'component.title': TitleComponent,\n    'component.sliderX': SliderX,\n    'component.sliderY': SliderY,\n    'component.scrollbarX': ScrollbarX,\n    'component.scrollbarY': ScrollbarY,\n    'animation.scaleInX': ScaleInX,\n    'animation.scaleOutX': ScaleOutX,\n    'animation.scaleInY': ScaleInY,\n    'animation.scaleOutY': ScaleOutY,\n    'animation.waveIn': WaveIn,\n    'animation.fadeIn': FadeIn,\n    'animation.fadeOut': FadeOut,\n    'animation.zoomIn': ZoomIn,\n    'animation.zoomOut': ZoomOut,\n    'animation.pathIn': PathIn,\n    'animation.morphing': Morphing,\n    'animation.growInX': GrowInX,\n    'animation.growInY': GrowInY,\n    'interaction.elementHighlight': ElementHighlight,\n    'interaction.elementHighlightByX': ElementHighlightByX,\n    'interaction.elementHighlightByColor': ElementHighlightByColor,\n    'interaction.elementHoverScale': ElementHoverScale,\n    'interaction.elementSelect': ElementSelect,\n    'interaction.elementSelectByX': ElementSelectByX,\n    'interaction.elementSelectByColor': ElementSelectByColor,\n    'interaction.fisheye': ChartFisheye,\n    'interaction.chartIndex': ChartIndex,\n    'interaction.tooltip': Tooltip,\n    'interaction.legendFilter': LegendFilter,\n    'interaction.legendHighlight': LegendHighlight,\n    'interaction.brushHighlight': BrushHighlight,\n    'interaction.brushXHighlight': BrushXHighlight,\n    'interaction.brushYHighlight': BrushYHighlight,\n    'interaction.brushAxisHighlight': BrushAxisHighlight,\n    'interaction.brushFilter': BrushFilter,\n    'interaction.brushXFilter': BrushXFilter,\n    'interaction.brushYFilter': BrushYFilter,\n    'interaction.sliderFilter': SliderFilter,\n    'interaction.sliderWheel': SliderWheel,\n    'interaction.scrollbarFilter': ScrollbarFilter,\n    'interaction.poptip': Poptip,\n    'interaction.treemapDrillDown': TreemapDrillDown,\n    'interaction.drillDown': DrillDown,\n    'interaction.elementPointMove': ElementPointMove,\n    'composition.spaceLayer': SpaceLayer,\n    'composition.spaceFlex': SpaceFlex,\n    'composition.facetRect': FacetRect,\n    'composition.repeatMatrix': RepeatMatrix,\n    'composition.facetCircle': FacetCircle,\n    'composition.timingKeyframe': TimingKeyframe,\n    'labelTransform.overlapHide': OverlapHide,\n    'labelTransform.overlapDodgeY': OverlapDodgeY,\n    'labelTransform.overflowHide': OverflowHide,\n    'labelTransform.contrastReverse': ContrastReverse,\n    'labelTransform.overflowStroke': OverflowStroke,\n    'labelTransform.exceedAdjust': ExceedAdjust,\n  } as const;\n}\n", "import { GeoView } from '../composition/geoView';\nimport { GeoPath } from '../composition/geoPath';\n\nexport function geolib() {\n  return {\n    'composition.geoView': GeoView,\n    'composition.geoPath': GeoPath,\n  } as const;\n}\n", "import {\n  Sankey,\n  Treemap,\n  Pack,\n  ForceGraph,\n  Tree,\n  Chord,\n  Partition,\n} from '../mark';\nimport { Arc, Cluster } from '../data';\n\nexport function graphlib() {\n  return {\n    'data.arc': Arc,\n    'data.cluster': Cluster,\n    'mark.forceGraph': ForceGraph,\n    'mark.tree': Tree,\n    'mark.pack': Pack,\n    'mark.sankey': Sankey,\n    'mark.chord': Chord,\n    'mark.treemap': Treemap,\n    'mark.partition': Partition,\n  } as const;\n}\n", "import { Boxplot, WordCloud, Gauge, Liquid } from '../mark';\nimport { Venn } from '../data';\n\nexport function plotlib() {\n  return {\n    'data.venn': Venn,\n    'mark.boxplot': Boxplot,\n    'mark.gauge': Gauge,\n    'mark.wordCloud': WordCloud,\n    'mark.liquid': Liquid,\n  } as const;\n}\n", "import { corelib } from './core';\nimport { geolib } from './geo';\nimport { graphlib } from './graph';\nimport { plotlib } from './plot';\n\nexport function stdlib() {\n  return {\n    ...geolib(),\n    ...graphlib(),\n    ...plotlib(),\n    ...corelib(),\n  } as const;\n}\n", "import { Cartesian } from '../coordinate';\nimport { Constant, Field, Transform, Column } from '../encode';\nimport { Interval } from '../mark';\nimport { Category10, Category20 } from '../palette';\nimport {\n  Linear as ScaleLinear,\n  Ordinal as ScaleOrdinal,\n  Band as ScaleBand,\n  Identity as ScaleIdenity,\n  Point as ScalePoint,\n  Time as ScaleTime,\n  Log as ScaleLog,\n  Pow as ScalePow,\n  Threshold as ScaleThreshold,\n  Quantile as ScaleQuantile,\n  Quantize as ScaleQuantize,\n  Sqrt as ScaleSqrt,\n  Sequential as ScaleSequential,\n  Constant as ScaleConstant,\n} from '../scale';\nimport { Classic } from '../theme';\nimport {\n  AxisLinear,\n  AxisArc,\n  AxisX,\n  AxisY,\n  AxisRadar,\n  LegendCategory,\n  LegendContinuous,\n  LegendContinuousBlock,\n  LegendContinuousBlockSize,\n  LegendContinuousSize,\n  TitleComponent,\n  SliderX,\n  SliderY,\n  ScrollbarX,\n  ScrollbarY,\n  Legends,\n} from '../component';\nimport {\n  ScaleInX,\n  ScaleOutX,\n  ScaleInY,\n  ScaleOutY,\n  WaveIn,\n  FadeIn,\n  FadeOut,\n  Morphing,\n} from '../animation';\nimport {\n  Tooltip,\n  LegendFilter,\n  LegendHighlight,\n  SliderFilter,\n  Poptip,\n  Event,\n  ScrollbarFilter,\n} from '../interaction';\nimport { Mark, View } from '../composition';\nimport { LabelShape } from '../shape';\nimport { Inline } from '../data';\n\n/**\n * In test stage, don't use it.\n */\nexport function litelib() {\n  return {\n    'data.inline': Inline,\n    'coordinate.cartesian': Cartesian,\n    'encode.constant': Constant,\n    'encode.field': Field,\n    'encode.transform': Transform,\n    'encode.column': Column,\n    'mark.interval': Interval,\n    'shape.label.label': LabelShape,\n    'palette.category10': Category10,\n    'palette.category20': Category20,\n    'scale.linear': ScaleLinear,\n    'scale.ordinal': ScaleOrdinal,\n    'scale.band': ScaleBand,\n    'scale.identity': ScaleIdenity,\n    'scale.point': ScalePoint,\n    'scale.time': ScaleTime,\n    'scale.log': ScaleLog,\n    'scale.pow': ScalePow,\n    'scale.sqrt': ScaleSqrt,\n    'scale.threshold': ScaleThreshold,\n    'scale.quantile': ScaleQuantile,\n    'scale.quantize': ScaleQuantize,\n    'scale.sequential': ScaleSequential,\n    'scale.constant': ScaleConstant,\n    'theme.classic': Classic,\n    'component.axisX': AxisX,\n    'component.axisY': AxisY,\n    'component.axisRadar': AxisRadar,\n    'component.axisLinear': AxisLinear,\n    'component.axisArc': AxisArc,\n    'component.legendCategory': LegendCategory,\n    'component.legendContinuous': LegendContinuous,\n    'component.legendContinuousBlock': LegendContinuousBlock,\n    'component.legendContinuousBlockSize': LegendContinuousBlockSize,\n    'component.legendContinuousSize': LegendContinuousSize,\n    'component.legends': Legends,\n    'component.title': TitleComponent,\n    'component.sliderX': SliderX,\n    'component.sliderY': SliderY,\n    'component.scrollbarX': ScrollbarX,\n    'component.scrollbarY': ScrollbarY,\n    'animation.scaleInX': ScaleInX,\n    'animation.scaleOutX': ScaleOutX,\n    'animation.scaleInY': ScaleInY,\n    'animation.scaleOutY': ScaleOutY,\n    'animation.waveIn': WaveIn,\n    'animation.fadeIn': FadeIn,\n    'animation.fadeOut': FadeOut,\n    'animation.morphing': Morphing,\n    'interaction.tooltip': Tooltip,\n    'interaction.legendFilter': LegendFilter,\n    'interaction.legendHighlight': LegendHighlight,\n    'interaction.sliderFilter': SliderFilter,\n    'interaction.scrollbarFilter': ScrollbarFilter,\n    'interaction.poptip': Poptip,\n    'interaction.event': Event,\n    'composition.mark': Mark,\n    'composition.view': View,\n  } as const;\n}\n", "import { G2Spec } from '../spec';\nimport { G2Library } from '../runtime';\nimport { Runtime, RuntimeOptions } from './runtime';\nimport { MarkOf, CompositionOf as Of } from './types';\nimport { MarkNode } from './mark';\nimport { CompositionNode } from './composition';\n\ntype BuiltinComposition = {\n  'composition.mark': any;\n  'composition.view': any;\n};\n\nexport type CompositionOf<Library> = Of<\n  Library,\n  (composite?) => CompositionAPI<Library>\n>;\n\nexport type CompositionAPI<Library> = CompositionNode<\n  CompositionOf<Library> & MarkOf<Library, (composite?) => MarkNode>\n> &\n  MarkOf<Library, (composite?) => MarkNode> &\n  CompositionOf<Library>;\n\nexport type API<Spec, Library> = Runtime<Spec> &\n  MarkOf<Library, (composite?) => MarkNode> &\n  CompositionOf<Library & BuiltinComposition>;\n\nexport function extend<\n  Spec extends G2Spec = G2Spec,\n  Library extends G2Library = G2Library,\n>(\n  Runtime: new (options: RuntimeOptions) => Runtime<Spec>,\n  library: Library,\n): new (options?: RuntimeOptions) => API<Spec, Library> {\n  class Chart extends Runtime {\n    constructor(options: Omit<RuntimeOptions, 'lib'>) {\n      super({ ...options, lib: library });\n    }\n  }\n  return Chart as any;\n}\n", "import { G2ComponentNamespaces, G2Component } from '../runtime';\nimport { registerSymbol, type SymbolFactor } from '../utils/marker';\n\nexport const library = {};\n\n// @todo Warn if override existing key.\nexport function register(\n  key: `${G2ComponentNamespaces | 'symbol'}.${any}`,\n  component: G2Component | SymbolFactor,\n) {\n  if (key.startsWith('symbol.'))\n    registerSymbol(key.split('.').pop(), component as SymbolFactor);\n  else Object.assign(library, { [key]: component });\n}\n", "import { G2View } from '../runtime';\n\ntype Size = {\n  width: number;\n  height: number;\n  depth?: number;\n};\n\nconst parseInt10 = (d: string) => (d ? parseInt(d) : 0);\n\n/**\n * @description Get the element's bounding size.\n * @param container dom element.\n * @returns the element width and height\n */\nexport function getContainerSize(container: HTMLElement): Size {\n  // size = width/height - padding.\n\n  const style = getComputedStyle(container);\n\n  const wrapperWidth = container.clientWidth || parseInt10(style.width);\n  const wrapperHeight = container.clientHeight || parseInt10(style.height);\n\n  const widthPadding =\n    parseInt10(style.paddingLeft) + parseInt10(style.paddingRight);\n  const heightPadding =\n    parseInt10(style.paddingTop) + parseInt10(style.paddingBottom);\n\n  return {\n    width: wrapperWidth - widthPadding,\n    height: wrapperHeight - heightPadding,\n  };\n}\n\n/**\n * @description Calculate the real canvas size by view options.\n */\nexport function getBBoxSize(options: G2View): Size {\n  const {\n    height,\n    width,\n    padding = 0,\n    paddingLeft = padding,\n    paddingRight = padding,\n    paddingTop = padding,\n    paddingBottom = padding,\n    margin = 0,\n    marginLeft = margin,\n    marginRight = margin,\n    marginTop = margin,\n    marginBottom = margin,\n    inset = 0,\n    insetLeft = inset,\n    insetRight = inset,\n    insetTop = inset,\n    insetBottom = inset,\n  } = options;\n\n  // @todo Add this padding to theme.\n  // 30 is default size for padding, which defined in runtime.\n  const maybeAuto = (padding) => (padding === 'auto' ? 20 : padding);\n\n  const finalWidth =\n    width -\n    maybeAuto(paddingLeft) -\n    maybeAuto(paddingRight) -\n    marginLeft -\n    marginRight -\n    insetLeft -\n    insetRight;\n  const finalHeight =\n    height -\n    maybeAuto(paddingTop) -\n    maybeAuto(paddingBottom) -\n    marginTop -\n    marginBottom -\n    insetTop -\n    insetBottom;\n\n  return { width: finalWidth, height: finalHeight };\n}\n", "import { Runtime } from './runtime';\n\n/**\n * BFS nodes and execute callback.\n */\nfunction bfs(node: Node, callback?: (...args: any[]) => void) {\n  const discovered: Node[] = [node];\n  while (discovered.length) {\n    const currentNode = discovered.shift();\n    callback && callback(currentNode);\n    const children = currentNode.children || [];\n    for (const child of children) {\n      discovered.push(child);\n    }\n  }\n}\n\n/**\n * Hierarchy container.\n */\nexport class Node<\n  Value extends Record<string, any> = Record<string, any>,\n  ParentValue extends Record<string, any> = Record<string, any>,\n  ChildValue extends Record<string, any> = Record<string, any>,\n> {\n  // The parent node.\n  parentNode: Node<ParentValue, Record<string, any>, Value> = null;\n\n  // The children nodes.\n  children: Node<ChildValue, Value, Record<string, any>>[] = [];\n\n  // The index of parent children.\n  index = 0;\n\n  // The value of the node.\n  value: Partial<Value>;\n\n  // The type of the node.\n  type: string;\n\n  constructor(value: Partial<Value> = {}, type?: string) {\n    this.type = type;\n    this.value = value;\n  }\n\n  /**\n   * Apply specified transform to current value. Mount the node\n   * to replace the original one in the tree and then return it.\n   */\n  map(transform = (x: Value): Value => x): this {\n    const newValue = transform(this.value as Value);\n    this.value = newValue;\n    return this;\n  }\n\n  /**\n   * Set or get the specified attribute. It the value is specified, update\n   * the attribute of current value and return the node. Otherwise\n   * return the the attribute of current value.\n   */\n  attr<T extends Value[keyof Value]>(\n    key: keyof Value,\n    value?: T,\n  ): T extends undefined ? T : this {\n    if (arguments.length === 1) return this.value[key];\n    return this.map((v) => ((v[key] = value), v)) as any;\n  }\n\n  /**\n   * Create a new node and append to children nodes.\n   */\n  append(\n    Ctor: new (value: Record<string, any>) => Node<ChildValue, Value>,\n  ): Node<ChildValue, Value> {\n    const node = new Ctor({});\n    node.children = [];\n    this.push(node);\n    return node;\n  }\n\n  push(node: Node<ChildValue, Value>): this {\n    node.parentNode = this;\n    node.index = this.children.length;\n    this.children.push(node);\n    return this;\n  }\n\n  /**\n   * Remove current node from parentNode.\n   */\n  remove(): Node {\n    const parent = this.parentNode;\n    if (parent) {\n      const { children } = parent;\n      const index = children.findIndex((item) => item === this);\n      children.splice(index, 1);\n    }\n    return this;\n  }\n\n  getNodeByKey(key: string): Node {\n    let targetNode = null;\n    const callback = (node: Node) => {\n      if (key === node.attr('key')) {\n        targetNode = node;\n      }\n    };\n    bfs(this, callback);\n    return targetNode;\n  }\n\n  getNodesByType(type: string): Node[] {\n    const nodes = [];\n    const callback = (node: Node) => {\n      if (type === node.type) {\n        nodes.push(node);\n      }\n    };\n    bfs(this, callback);\n    return nodes;\n  }\n\n  getNodeByType(type: string): Node {\n    let node = null;\n    bfs(this, (current: Node) => {\n      if (node) return;\n      if (type === current.type) node = current;\n    });\n    return node;\n  }\n\n  /**\n   * Apply specified callback to the node value.\n   */\n  call(\n    callback: (node: this, ...params: any[]) => any,\n    ...params: any[]\n  ): this {\n    callback(this.map(), ...params);\n    return this;\n  }\n\n  getRoot(): Runtime {\n    // Find the root chart and render.\n    let root: Node = this;\n    while (root && root.parentNode) {\n      root = root.parentNode;\n    }\n    return root as Runtime;\n  }\n}\n", "import { isNumber } from '@antv/util';\nimport { G2ViewTree } from '../runtime';\nimport { getContainerSize } from '../utils/size';\nimport { deepAssign } from '../utils/helper';\nimport { Node } from './node';\n\n// Keys can specified by new Chart({...}).\n// Keys can bubble form mark-level options to view-level options.\nexport const VIEW_KEYS = [\n  'width',\n  'height',\n  'depth',\n  'padding',\n  'paddingLeft',\n  'paddingRight',\n  'paddingBottom',\n  'paddingTop',\n  'inset',\n  'insetLeft',\n  'insetRight',\n  'insetTop',\n  'insetBottom',\n  'margin',\n  'marginLeft',\n  'marginRight',\n  'marginTop',\n  'marginBottom',\n  'autoFit',\n  'theme',\n  'title',\n  'interaction',\n];\n\nexport const REMOVE_FLAG = '__remove__';\n\nexport const CALLBACK_NODE = '__callback__';\n\n/** Minimum chart width */\nexport const MIN_CHART_WIDTH = 1;\n/** Minimum chart height */\nexport const MIN_CHART_HEIGHT = 1;\n\nexport function normalizeContainer(\n  container: string | HTMLElement,\n): HTMLElement {\n  if (container === undefined) {\n    const container = document.createElement('div');\n    container[REMOVE_FLAG] = true;\n    return container;\n  }\n  if (typeof container === 'string') {\n    const node = document.getElementById(container);\n    return node;\n  }\n  return container;\n}\n\nexport function removeContainer(container: HTMLElement) {\n  const parent = container.parentNode;\n  if (parent) {\n    parent.removeChild(container);\n  }\n}\n\nexport function normalizeRoot(node: Node) {\n  if (node.type !== null) return node;\n  const root = node.children[node.children.length - 1];\n  for (const key of VIEW_KEYS) root.attr(key, node.attr(key));\n  return root;\n}\n\nexport function valueOf(node: Node): Record<string, any> {\n  return {\n    ...node.value,\n    type: node.type,\n  };\n}\n\nexport function sizeOf(options, container) {\n  const { width, height, autoFit, depth = 0 } = options;\n  let effectiveWidth = 640;\n  let effectiveHeight = 480;\n\n  if (autoFit) {\n    const { width: containerWidth, height: containerHeight } =\n      getContainerSize(container);\n    effectiveWidth = containerWidth || effectiveWidth;\n    effectiveHeight = containerHeight || effectiveHeight;\n  }\n\n  effectiveWidth = width || effectiveWidth;\n  effectiveHeight = height || effectiveHeight;\n\n  return {\n    width: Math.max(\n      isNumber(effectiveWidth) ? effectiveWidth : MIN_CHART_WIDTH,\n      MIN_CHART_WIDTH,\n    ),\n    height: Math.max(\n      isNumber(effectiveHeight) ? effectiveHeight : MIN_CHART_HEIGHT,\n      MIN_CHART_HEIGHT,\n    ),\n    depth,\n  };\n}\n\nexport function optionsOf(node: Node): Record<string, any> {\n  const root = normalizeRoot(node);\n  const discovered: Node[] = [root];\n  const nodeValue = new Map<Node, Record<string, any>>();\n  nodeValue.set(root, valueOf(root));\n  while (discovered.length) {\n    const node = discovered.pop();\n    const value = nodeValue.get(node);\n    const { children = [] } = node;\n    for (const child of children) {\n      if (child.type === CALLBACK_NODE) {\n        value.children = child.value;\n      } else {\n        const childValue = valueOf(child);\n        const { children = [] } = value;\n        children.push(childValue);\n        discovered.push(child);\n        nodeValue.set(child, childValue);\n        value.children = children;\n      }\n    }\n  }\n  return nodeValue.get(root);\n}\n\nfunction isMark(\n  type: string | ((...args: any[]) => any),\n  mark: Record<string, new () => Node>,\n): boolean {\n  if (typeof type === 'function') return true;\n  return new Set(Object.keys(mark)).has(type);\n}\n\nfunction isComposition(\n  type: string | ((...args: any[]) => any),\n  composition: Record<string, new () => Node>,\n): boolean {\n  return (\n    typeof type !== 'function' && new Set(Object.keys(composition)).has(type)\n  );\n}\n\nfunction normalizeRootOptions(\n  node: Node,\n  options: G2ViewTree,\n  previousType: string,\n  marks: Record<string, new () => Node>,\n  composition: Record<string, new () => Node>,\n) {\n  const { type: oldType } = node;\n  const { type = previousType || oldType } = options;\n  if (isComposition(type, composition)) {\n    for (const key of VIEW_KEYS) {\n      if (node.attr(key) !== undefined && options[key] === undefined) {\n        options[key] = node.attr(key);\n      }\n    }\n    return options;\n  }\n  if (isMark(type, marks)) {\n    const view = { type: 'view' };\n    const mark = { ...options };\n    for (const key of VIEW_KEYS) {\n      if (mark[key] !== undefined) {\n        view[key] = mark[key];\n        delete mark[key];\n      }\n    }\n    return { ...view, children: [mark] };\n  }\n  return options;\n}\n\nfunction typeCtor(\n  type: string | ((...args: any[]) => any),\n  mark: Record<string, new () => Node>,\n  composition: Record<string, new () => Node>,\n): new () => Node {\n  if (typeof type === 'function') return mark.mark;\n  const node = { ...mark, ...composition };\n  const ctor = node[type];\n  if (!ctor) throw new Error(`Unknown mark: ${type}.`);\n  return ctor;\n}\n\n// Create node from options.\nfunction createNode(\n  options: G2ViewTree,\n  mark: Record<string, new () => Node>,\n  composition: Record<string, new () => Node>,\n): Node {\n  if (typeof options === 'function') {\n    const node = new Node();\n    node.value = options;\n    node.type = CALLBACK_NODE;\n    return node;\n  }\n  const { type, children, ...value } = options;\n  const Ctor = typeCtor(type, mark, composition);\n  const node = new Ctor();\n  node.value = value;\n  // @ts-ignore\n  node.type = type;\n  return node;\n}\n\n// Update node by options.\nfunction updateNode(node: Node, newOptions: G2ViewTree) {\n  const { type, children, ...value } = newOptions;\n  if (node.type === type || type === undefined) {\n    // Update node.\n    deepAssign(node.value, value);\n  } else if (typeof type === 'string') {\n    // Transform node.\n    node.type = type;\n    node.value = value;\n  }\n}\n\n// Create a nested node tree from newOptions, and append it to the parent.\nfunction appendNode(\n  parent: Node,\n  newOptions: G2ViewTree,\n  mark: Record<string, new () => Node>,\n  composition: Record<string, new () => Node>,\n) {\n  if (!parent) return;\n  const discovered = [[parent, newOptions]];\n  while (discovered.length) {\n    const [parent, nodeOptions] = discovered.shift();\n    const node = createNode(nodeOptions, mark, composition);\n    if (Array.isArray(parent.children)) parent.push(node);\n    const { children } = nodeOptions;\n    if (Array.isArray(children)) {\n      for (const child of children) {\n        discovered.push([node, child]);\n      }\n    } else if (typeof children === 'function') {\n      discovered.push([node, children]);\n    }\n  }\n}\n\n// Update node tree from options.\nexport function updateRoot(\n  node: Node,\n  options: G2ViewTree,\n  definedType: string,\n  mark: Record<string, new () => Node>,\n  composition: Record<string, new () => Node>,\n) {\n  const rootOptions = normalizeRootOptions(\n    node,\n    options,\n    definedType,\n    mark,\n    composition,\n  );\n  const discovered: [Node, Node, G2ViewTree][] = [[null, node, rootOptions]];\n  while (discovered.length) {\n    const [parent, oldNode, newNode] = discovered.shift();\n    // If there is no oldNode, create a node tree directly.\n    if (!oldNode) {\n      appendNode(parent, newNode, mark, composition);\n    } else if (!newNode) {\n      oldNode.remove();\n    } else {\n      updateNode(oldNode, newNode);\n      const { children: newChildren } = newNode;\n      const { children: oldChildren } = oldNode;\n      if (Array.isArray(newChildren) && Array.isArray(oldChildren)) {\n        // Only update node specified in newChildren,\n        // the extra oldChildren will remain still.\n        const n = Math.max(newChildren.length, oldChildren.length);\n        for (let i = 0; i < n; i++) {\n          const newChild = newChildren[i];\n          const oldChild = oldChildren[i];\n          discovered.push([oldNode, oldChild, newChild]);\n        }\n      } else if (typeof newChildren === 'function') {\n        discovered.push([oldNode, null, newChildren]);\n      }\n    }\n  }\n}\n\nexport function createEmptyPromise<T>(): [\n  Promise<T>,\n  (reason?: any) => void,\n  (value: T | PromiseLike<T>) => void,\n] {\n  let reject: (reason?: any) => void;\n  let resolve: (value: T | PromiseLike<T>) => void;\n  const cloned = new Promise<T>((res, rej) => {\n    resolve = res;\n    reject = rej;\n  });\n  return [cloned, resolve, reject];\n}\n", "import { isStrictObject } from '../utils/helper';\nimport { Node } from './node';\n\nexport type NodePropertyDescriptor = {\n  type: 'object' | 'value' | 'array' | 'node' | 'container' | 'mix';\n  key?: string;\n  ctor?: new (...args: any[]) => any;\n};\n\ntype NodeClass = new (props: any, type?: string) => Node;\n\nfunction defineValueProp(\n  Node: NodeClass,\n  name: string,\n  { key = name }: NodePropertyDescriptor,\n) {\n  Node.prototype[name] = function (value) {\n    if (arguments.length === 0) return this.attr(key);\n    return this.attr(key, value);\n  };\n}\n\nfunction defineArrayProp(\n  Node: NodeClass,\n  name: string,\n  { key = name }: NodePropertyDescriptor,\n) {\n  Node.prototype[name] = function (value) {\n    if (arguments.length === 0) return this.attr(key);\n    if (Array.isArray(value)) return this.attr(key, value);\n    const array = [...(this.attr(key) || []), value];\n    return this.attr(key, array);\n  };\n}\n\nfunction defineObjectProp(\n  Node: NodeClass,\n  name: string,\n  { key: k = name }: NodePropertyDescriptor,\n) {\n  Node.prototype[name] = function (key, value) {\n    if (arguments.length === 0) return this.attr(k);\n    if (arguments.length === 1 && typeof key !== 'string') {\n      return this.attr(k, key);\n    }\n    const obj = this.attr(k) || {};\n    obj[key] = arguments.length === 1 ? true : value;\n    return this.attr(k, obj);\n  };\n}\n\nfunction defineMixProp(\n  Node: NodeClass,\n  name: string,\n  descriptor: NodePropertyDescriptor,\n) {\n  Node.prototype[name] = function (key) {\n    if (arguments.length === 0) return this.attr(name);\n    if (Array.isArray(key)) return this.attr(name, { items: key });\n    if (\n      isStrictObject(key) &&\n      (key.title !== undefined || key.items !== undefined)\n    ) {\n      return this.attr(name, key);\n    }\n    if (key === null || key === false) return this.attr(name, key);\n    const obj = this.attr(name) || {};\n    const { items = [] } = obj;\n    items.push(key);\n    obj.items = items;\n    return this.attr(name, obj);\n  };\n}\n\nfunction defineNodeProp(\n  Node: NodeClass,\n  name: string,\n  { ctor }: NodePropertyDescriptor,\n) {\n  Node.prototype[name] = function (hocMark?) {\n    const node = this.append(ctor);\n    if (name === 'mark') {\n      node.type = hocMark;\n    }\n    return node;\n  };\n}\n\nfunction defineContainerProp(\n  Node: NodeClass,\n  name: string,\n  { ctor }: NodePropertyDescriptor,\n) {\n  Node.prototype[name] = function () {\n    this.type = null;\n    return this.append(ctor);\n  };\n}\n\n/**\n * A decorator to define different type of attribute setter or\n * getter for current node.\n */\nexport function defineProps(\n  descriptors: Record<string, NodePropertyDescriptor>,\n) {\n  return (Node: NodeClass) => {\n    for (const [name, descriptor] of Object.entries(descriptors)) {\n      const { type } = descriptor;\n      if (type === 'value') defineValueProp(Node, name, descriptor);\n      else if (type === 'array') defineArrayProp(Node, name, descriptor);\n      else if (type === 'object') defineObjectProp(Node, name, descriptor);\n      else if (type === 'node') defineNodeProp(Node, name, descriptor);\n      else if (type === 'container')\n        defineContainerProp(Node, name, descriptor);\n      else if (type === 'mix') defineMixProp(Node, name, descriptor);\n    }\n    return Node as any;\n  };\n}\n\nexport function nodeProps(\n  node: Record<string, new (...args: any[]) => any>,\n): Record<string, NodePropertyDescriptor> {\n  return Object.fromEntries(\n    Object.entries(node).map(([name, ctor]) => [name, { type: 'node', ctor }]),\n  );\n}\n", "export const commonProps = {\n  encode: { type: 'object' },\n  scale: { type: 'object' },\n  data: { type: 'value' },\n  transform: { type: 'array' },\n  style: { type: 'object' },\n  animate: { type: 'object' },\n  coordinate: { type: 'object' },\n  interaction: { type: 'object' },\n  label: { type: 'array', key: 'labels' },\n  axis: { type: 'object' },\n  legend: { type: 'object' },\n  slider: { type: 'object' },\n  scrollbar: { type: 'object' },\n  state: { type: 'object' },\n  layout: { type: 'object' },\n  theme: { type: 'object' },\n  title: { type: 'value' },\n} as const;\n\nexport const markProps = {\n  ...commonProps,\n  tooltip: { type: 'mix' },\n  viewStyle: { type: 'object' },\n} as const;\n\nexport const compositionProps = {\n  ...commonProps,\n  labelTransform: { type: 'array' },\n} as const;\n", "import { Coordinate } from '@antv/coord';\nimport { DisplayObject } from '@antv/g';\nimport { Scale, G2Theme, G2ViewDescriptor } from '../runtime';\nimport { hide, show } from '../utils/style';\nimport { Composition as Spec } from '../spec';\nimport { Node } from './node';\nimport { defineProps } from './define';\nimport { compositionProps } from './props';\nimport { PropsOf } from './types';\n\nexport interface CompositionNode<T = any>\n  extends PropsOf<\n    typeof compositionProps,\n    any, // todo Remove this when update types of Spec.\n    CompositionNode & T\n  > {}\n\n@defineProps(compositionProps)\nexport class CompositionNode extends Node<Spec & { [key: string]: any }> {\n  protected _key: string;\n\n  /**\n   * Change current node data and its children data.\n   */\n  changeData(data: any) {\n    const chart = this.getRoot();\n    if (!chart) return;\n    this.attr('data', data);\n    if (this.children?.length) {\n      this.children.forEach((child) => {\n        child.attr('data', data);\n      });\n    }\n    return chart?.render();\n  }\n\n  /**\n   * Get view instance by key.\n   */\n  getView(): G2ViewDescriptor {\n    const chart = this.getRoot();\n    const { views } = chart.getContext();\n    if (!views?.length) return undefined;\n    return views.find((view) => view.key === this._key);\n  }\n\n  getScale(): Record<string, Scale> {\n    return this.getView()?.scale;\n  }\n\n  getScaleByChannel(channel: string): Scale {\n    const scale = this.getScale();\n    if (scale) return scale[channel];\n    return;\n  }\n\n  getCoordinate(): Coordinate {\n    return this.getView()?.coordinate;\n  }\n\n  getTheme(): G2Theme {\n    return this.getView()?.theme;\n  }\n\n  getGroup(): DisplayObject {\n    const key = this._key;\n    if (!key) return undefined;\n    const chart = this.getRoot();\n    const chartGroup = chart.getContext().canvas.getRoot();\n    return chartGroup.getElementById(key);\n  }\n\n  /**\n   * Show the view.\n   */\n  show() {\n    const group = this.getGroup();\n    if (!group) return;\n    !group.isVisible() && show(group);\n  }\n\n  /**\n   * Hide the view.\n   */\n  hide() {\n    const group = this.getGroup();\n    if (!group) return;\n    group.isVisible() && hide(group);\n  }\n}\n", "import { DisplayObject } from '@antv/g';\nimport { G2MarkState, Scale } from '../runtime';\nimport { Mark as Spec } from '../spec';\nimport { Node } from './node';\nimport { defineProps } from './define';\nimport { markProps } from './props';\nimport { PropsOf } from './types';\n\nexport interface MarkNode extends PropsOf<typeof markProps, Spec, MarkNode> {}\n\n@defineProps(markProps)\nexport class MarkNode extends Node<Spec & { [key: string]: any }> {\n  changeData(data: any) {\n    const chart = this.getRoot();\n    if (!chart) return;\n    this.attr('data', data);\n    return chart?.render();\n  }\n\n  /**\n   * Get mark from chart views.\n   */\n  getMark(): G2MarkState {\n    const chartView = this.getRoot()?.getView();\n    if (!chartView) return undefined;\n    const { markState } = chartView;\n    const markKey = Array.from(markState.keys()).find(\n      (item) => item.key === this.attr('key'),\n    );\n    return markState.get(markKey);\n  }\n\n  /**\n   * Get all scales instance.\n   */\n  getScale(): Record<string, Scale> {\n    const chartView = this.getRoot()?.getView();\n    if (!chartView) return undefined;\n    return chartView?.scale;\n  }\n\n  /**\n   * Get the scale instance by channel.\n   */\n  getScaleByChannel(channel: string): Scale {\n    const chartView = this.getRoot()?.getView();\n    if (!chartView) return undefined;\n    return chartView?.scale?.[channel];\n  }\n\n  /**\n   * Get canvas group.\n   */\n  getGroup(): DisplayObject {\n    const key = this.attr('key');\n    if (!key) return undefined;\n    const chart = this.getRoot();\n    const chartGroup = chart.getContext().canvas.getRoot();\n    return chartGroup.getElementById(key);\n  }\n}\n", "import {\n  DisplayObject,\n  IRenderer,\n  RendererPlugin,\n  Canvas as GCanvas,\n} from '@antv/g';\nimport { Renderer as CanvasRenderer } from '@antv/g-canvas';\nimport { Plugin as DragAndDropPlugin } from '@antv/g-plugin-dragndrop';\nimport { debounce, get } from '@antv/util';\nimport EventEmitter from '@antv/event-emitter';\nimport { group } from '@antv/vendor/d3-array';\nimport { G2Element } from '../utils/selection';\nimport {\n  G2Context,\n  render,\n  destroy,\n  ELEMENT_CLASS_NAME,\n  VIEW_CLASS_NAME,\n} from '../runtime';\nimport { G2Spec, ViewComposition } from '../spec';\nimport { ChartEvent } from '../utils/event';\nimport type { G2Library } from '../runtime/types/options';\nimport {\n  findSingleElement,\n  maybeValue,\n  findSeriesElement,\n} from '../interaction/tooltip';\nimport { isHeatmap, dataOf } from '../utils/helper';\nimport { selectPlotArea } from '../interaction/utils';\nimport {\n  normalizeContainer,\n  removeContainer,\n  sizeOf,\n  optionsOf,\n  updateRoot,\n  createEmptyPromise,\n  REMOVE_FLAG,\n} from './utils';\nimport { CompositionNode } from './composition';\nimport { Node } from './node';\nimport { defineProps, nodeProps } from './define';\nimport { MarkNode } from './mark';\nimport { library } from './library';\n\nexport const G2_CHART_KEY = 'G2_CHART_KEY';\n\nexport type RuntimeOptions = ViewComposition & {\n  container?: string | HTMLElement;\n  canvas?: GCanvas;\n  autoFit?: boolean;\n  renderer?: IRenderer;\n  plugins?: RendererPlugin[];\n  theme?: string;\n  lib?: G2Library;\n  createCanvas?: () => HTMLCanvasElement;\n};\n\nexport class Runtime<Spec extends G2Spec = G2Spec> extends CompositionNode {\n  private _container: HTMLElement;\n  private _context: G2Context;\n  private _emitter: EventEmitter;\n  private _width: number;\n  private _height: number;\n  private _renderer: IRenderer;\n  private _plugins: RendererPlugin[];\n  // Identifies whether bindAutoFit.\n  private _hasBindAutoFit = false;\n  private _rendering = false;\n  private _trailingClear = null;\n  private _trailing = false;\n  private _trailingResolve = null;\n  private _trailingReject = null;\n  private _previousDefinedType = null;\n  private _marks: Record<string, new () => Node>;\n  private _compositions: Record<string, new () => Node>;\n\n  constructor(options: RuntimeOptions) {\n    const { container, canvas, renderer, plugins, lib, createCanvas, ...rest } =\n      options;\n    super(rest, 'view');\n    this._renderer = renderer || new CanvasRenderer();\n    this._plugins = plugins || [];\n    this._container = normalizeContainer(container);\n    this._emitter = new EventEmitter();\n    this._context = {\n      library: { ...lib, ...library },\n      emitter: this._emitter,\n      canvas,\n      createCanvas,\n    };\n    this._create();\n  }\n\n  render(): Promise<Runtime<Spec>> {\n    if (this._rendering) return this._addToTrailing();\n    if (!this._context.canvas) this._createCanvas();\n    this._bindAutoFit();\n    this._rendering = true;\n\n    // @fixme The cancel render is not marked, which will cause additional rendered event.\n    // @ref src/runtime/render.ts\n    const finished = new Promise<Runtime<Spec>>((resolve, reject) =>\n      render(\n        this._computedOptions(),\n        this._context,\n        this._createResolve(resolve),\n        this._createReject(reject),\n      ),\n    );\n\n    const [finished1, resolve, reject] = createEmptyPromise<Runtime<Spec>>();\n    finished\n      .then(resolve)\n      .then(() => {\n        // Resolve trailing clear.\n        if (this._trailingClear) {\n          const options = this.options();\n\n          this._trailingClear();\n\n          // If clear is called during trailing, recover options for next trailing render.\n          if (this._trailing) this.options(options);\n        }\n      })\n      .catch(reject)\n      .then(() => {\n        this._trailingClear = null;\n        this._renderTrailing();\n      });\n\n    return finished1;\n  }\n\n  /**\n   * @overload\n   * @returns {Spec}\n   */\n  options(): Spec;\n  /**\n   * @overload\n   * @param {G2ViewTree} options\n   * @returns {Runtime}\n   */\n  options(options: Spec): Runtime<Spec>;\n  /**\n   * @overload\n   * @param {G2ViewTree} [options]\n   * @returns {Runtime|Spec}\n   */\n  options(options?: Spec): Runtime<Spec> | Spec {\n    if (arguments.length === 0) return optionsOf(this) as Spec;\n    const { type } = options;\n    if (type) this._previousDefinedType = type;\n    updateRoot(\n      this,\n      options,\n      this._previousDefinedType,\n      this._marks,\n      this._compositions,\n    );\n    return this;\n  }\n\n  getContainer(): HTMLElement {\n    return this._container;\n  }\n\n  getContext(): G2Context {\n    return this._context;\n  }\n\n  on(event: string, callback: (...args: any[]) => any, once?: boolean): this {\n    this._emitter.on(event, callback, once);\n    return this;\n  }\n\n  once(event: string, callback: (...args: any[]) => any): this {\n    this._emitter.once(event, callback);\n    return this;\n  }\n\n  emit(event: string, ...args: any[]): this {\n    this._emitter.emit(event, ...args);\n    return this;\n  }\n\n  off(event?: string, callback?: (...args: any[]) => any) {\n    this._emitter.off(event, callback);\n    return this;\n  }\n\n  clear(isClearEvents = true) {\n    // Clear after render, otherwise render with destroyed context will return infinite promise, which will block trialing render.\n    if (this._rendering) {\n      this._trailingClear = () => {\n        this.clear(isClearEvents);\n      };\n      // Only reset options, not destroy canvas.\n      this._reset();\n      return;\n    }\n    const options = this.options();\n    this.emit(ChartEvent.BEFORE_CLEAR);\n    this._reset();\n    destroy(options, this._context, false, isClearEvents);\n    this.emit(ChartEvent.AFTER_CLEAR);\n  }\n\n  destroy() {\n    const options = this.options();\n    this.emit(ChartEvent.BEFORE_DESTROY);\n    this._unbindAutoFit();\n    this._reset();\n    destroy(options, this._context, true);\n    if (this._container[REMOVE_FLAG]) removeContainer(this._container);\n    this.emit(ChartEvent.AFTER_DESTROY);\n  }\n\n  forceFit() {\n    // Don't fit if size do not change.\n    this.options['autoFit'] = true;\n    const { width, height } = sizeOf(this.options(), this._container);\n    if (width === this._width && height === this._height) {\n      return Promise.resolve(this);\n    }\n\n    // Don't call changeSize to prevent update width and height of options.\n    this.emit(ChartEvent.BEFORE_CHANGE_SIZE);\n    const finished = this.render();\n    finished.then(() => {\n      this.emit(ChartEvent.AFTER_CHANGE_SIZE);\n    });\n    return finished;\n  }\n\n  changeSize(width: number, height: number): Promise<Runtime<Spec>> {\n    if (width === this._width && height === this._height) {\n      return Promise.resolve(this);\n    }\n    this.emit(ChartEvent.BEFORE_CHANGE_SIZE);\n    this.attr('width', width);\n    this.attr('height', height);\n    const finished = this.render();\n    finished.then(() => {\n      this.emit(ChartEvent.AFTER_CHANGE_SIZE);\n    });\n    return finished;\n  }\n\n  getDataByXY(\n    point: { x: number; y: number },\n    options: {\n      shared?: boolean;\n      series?: boolean;\n      facet?: boolean;\n      startX?: number;\n      startY?: number;\n    } = {},\n  ): any[] {\n    const {\n      shared = false,\n      series,\n      facet = false,\n      startX = 0,\n      startY = 0,\n    } = options;\n    const { canvas, views } = this._context;\n    const { document } = canvas;\n    const { x, y } = point;\n    // Temporarily do not handle the multi - view situation.\n    const { coordinate, scale, markState, data: dataMap, key } = views[0];\n    const elements = document.getElementsByClassName(ELEMENT_CLASS_NAME);\n    const groupKey = shared ? (element) => element.__data__.x : (d) => d;\n    const keyGroup = group(elements, groupKey);\n    const container = document.getElementsByClassName(\n      VIEW_CLASS_NAME,\n    )[0] as DisplayObject;\n    const root = selectPlotArea(container);\n    const hasSeriesInteraction = (markState: Map<string, any>) => {\n      return Array.from(markState.values()).some(\n        (d) =>\n          d.interaction?.['seriesTooltip'] ||\n          d.channels?.some(\n            (c) => c.name === 'series' && c.values !== undefined,\n          ),\n      );\n    };\n    const isSeries = maybeValue(\n      series,\n      hasSeriesInteraction(markState as Map<string, any>),\n    );\n    const getElementData = (el: G2Element) => get(el, '__data__.data', null);\n    const getElementsData = (els: G2Element[]) => els.map(getElementData);\n\n    try {\n      // For non-facet and series chart.\n      if (\n        isSeries &&\n        hasSeriesInteraction(markState as Map<string, any>) &&\n        !facet\n      ) {\n        const { selectedData } = findSeriesElement({\n          root,\n          event: { offsetX: x, offsetY: y },\n          elements,\n          coordinate,\n          scale,\n          startX,\n          startY,\n        });\n        const viewData = dataMap.get(`${key}-0`);\n        return selectedData.map(({ index }) => viewData[index]);\n      }\n      // For single chart.\n      const element = findSingleElement({\n        root,\n        event: { offsetX: x, offsetY: y },\n        elements,\n        coordinate,\n        scale,\n        shared,\n      });\n      if (isHeatmap(element)) return dataOf(element, dataMap.get(key));\n      const k = groupKey(element);\n      const groupElements = keyGroup.get(k) as G2Element[];\n      return groupElements ? getElementsData(groupElements) : [];\n    } catch (e) {\n      const topMostElement = canvas.document.elementFromPointSync(\n        x,\n        y,\n      ) as G2Element;\n      return topMostElement ? getElementData(topMostElement) : [];\n    }\n  }\n\n  private _create() {\n    const { library } = this._context;\n\n    // @todo After refactor component as mark, remove this.\n    const isMark = (key) =>\n      key.startsWith('mark.') ||\n      key === 'component.axisX' ||\n      key === 'component.axisY' ||\n      key === 'component.legends';\n\n    const marks = [\n      'mark.mark', // chart.mark(composite)\n      ...Object.keys(library).filter(isMark),\n    ];\n\n    // Create mark generators.\n    this._marks = {};\n    for (const key of marks) {\n      const name = key.split('.').pop();\n      class Mark extends MarkNode {\n        constructor() {\n          super({}, name);\n        }\n      }\n      this._marks[name] = Mark;\n      this[name] = function (composite) {\n        const node = this.append(Mark);\n        if (name === 'mark') node.type = composite;\n        return node;\n      };\n    }\n\n    // Create composition generators.\n    const compositions = [\n      'composition.view', // chat.view()\n      ...Object.keys(library).filter(\n        (key) => key.startsWith('composition.') && key !== 'composition.mark',\n      ),\n    ];\n    this._compositions = Object.fromEntries(\n      compositions.map((key) => {\n        const name = key.split('.').pop();\n        @defineProps(nodeProps(this._marks))\n        class Composition extends CompositionNode {\n          constructor() {\n            super({}, name);\n          }\n        }\n        return [name, Composition];\n      }),\n    );\n\n    for (const Ctor of Object.values(this._compositions)) {\n      defineProps(nodeProps(this._compositions))(Ctor);\n    }\n\n    for (const key of compositions) {\n      const name = key.split('.').pop();\n      this[name] = function () {\n        const Composition = this._compositions[name];\n        this.type = null;\n        return this.append(Composition);\n      };\n    }\n  }\n\n  private _reset() {\n    const KEYS = ['theme', 'type', 'width', 'height', 'autoFit'];\n    this.type = 'view';\n    this.value = Object.fromEntries(\n      Object.entries(this.value).filter(\n        ([key]) =>\n          key.startsWith('margin') ||\n          key.startsWith('padding') ||\n          key.startsWith('inset') ||\n          KEYS.includes(key),\n      ),\n    );\n    this.children = [];\n  }\n\n  private _renderTrailing() {\n    if (!this._trailing) return;\n    this._trailing = false;\n    this.render()\n      .then(() => {\n        const trailingResolve = this._trailingResolve.bind(this);\n        this._trailingResolve = null;\n        trailingResolve(this);\n      })\n      .catch((error) => {\n        const trailingReject = this._trailingReject.bind(this);\n        this._trailingReject = null;\n        trailingReject(error);\n      });\n  }\n\n  private _createResolve(resolve: (chart: Runtime<Spec>) => void) {\n    return () => {\n      this._rendering = false;\n      resolve(this);\n    };\n  }\n\n  private _createReject(reject: (error: Error) => void) {\n    return (error: Error) => {\n      this._rendering = false;\n      reject(error);\n    };\n  }\n\n  // Update actual size and key.\n  private _computedOptions() {\n    const options = this.options();\n    const { key = G2_CHART_KEY } = options;\n    const { width, height, depth } = sizeOf(options, this._container);\n    this._width = width;\n    this._height = height;\n    this._key = key;\n    return { key: this._key, ...options, width, height, depth };\n  }\n\n  // Create canvas if it does not exist.\n  // DragAndDropPlugin is for interaction.\n  // It is OK to register more than one time, G will handle this.\n  private _createCanvas() {\n    const { width, height } = sizeOf(this.options(), this._container);\n    this._plugins.push(new DragAndDropPlugin());\n    this._plugins.forEach((d) => this._renderer.registerPlugin(d));\n    this._context.canvas = new GCanvas({\n      container: this._container,\n      width,\n      height,\n      renderer: this._renderer,\n    });\n\n    const dom = this._context.canvas\n      ?.getContextService()\n      ?.getDomElement() as HTMLCanvasElement;\n    if (dom) dom.style.display = 'block';\n  }\n\n  private _addToTrailing(): Promise<Runtime<Spec>> {\n    // Resolve previous promise, and give up this task.\n    this._trailingResolve?.(this);\n\n    // Create new task.\n    this._trailing = true;\n    const promise = new Promise<Runtime<Spec>>((resolve, reject) => {\n      this._trailingResolve = resolve;\n      this._trailingReject = reject;\n    });\n\n    return promise;\n  }\n\n  private _onResize = debounce(() => {\n    this.forceFit();\n  }, 300);\n\n  private _bindAutoFit() {\n    const options = this.options();\n    const { autoFit } = options;\n\n    if (this._hasBindAutoFit) {\n      // If it was bind before, unbind it now.\n      if (!autoFit) this._unbindAutoFit();\n      return;\n    }\n\n    if (autoFit) {\n      this._hasBindAutoFit = true;\n      window.addEventListener('resize', this._onResize);\n    }\n  }\n\n  private _unbindAutoFit() {\n    if (this._hasBindAutoFit) {\n      this._hasBindAutoFit = false;\n      window.removeEventListener('resize', this._onResize);\n    }\n  }\n}\n", "import type { G2Spec } from '../spec';\nimport { extend, API, CompositionAPI } from './extend';\nimport { library } from './library';\nimport { Runtime } from './runtime';\nimport { MarkNode as Node } from './mark';\nimport type { RuntimeOptions } from './runtime';\n\nexport interface Chart extends API<G2Spec, typeof library> {}\n\nexport interface CompositionNode extends CompositionAPI<typeof library> {}\n\nexport interface MarkNode extends Node {}\n\nexport const Chart = extend(Runtime, library);\n\nexport type ChartOptions = Omit<RuntimeOptions, 'lib'>;\n", "var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\n    return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport * as React from 'react';\nvar version = React.version || '';\nvar createRoot;\nvar legacyRender;\nvar legacyUnmount;\nvar MARK = '__rc_react_root__';\ntry {\n    var mainVersion = parseInt(version.split('.')[0], 10);\n    if (mainVersion >= 18) {\n        //  React 18+  API\n        var client = require('react-dom/client');\n        createRoot = client.createRoot;\n    }\n    else {\n        //  React <18  render/unmountComponentAtNode\n        var legacyReactDOM = require('react-dom');\n        legacyRender = legacyReactDOM.render;\n        legacyUnmount = legacyReactDOM.unmountComponentAtNode;\n    }\n}\ncatch (e) {\n    // \n}\n// ==========  ==========\nfunction modernRender(node, container) {\n    if (!container[MARK]) {\n        container[MARK] = createRoot(container);\n    }\n    container[MARK].render(node);\n}\nfunction fallbackLegacyRender(node, container) {\n    if (legacyRender) {\n        legacyRender(node, container);\n    }\n    else {\n        throw new Error('ReactDOM.render is not available in this React version');\n    }\n}\nexport function render(node, container) {\n    if (createRoot) {\n        modernRender(node, container);\n    }\n    else {\n        fallbackLegacyRender(node, container);\n    }\n}\n// ==========  ==========\nfunction fallbackLegacyUnmount(container) {\n    if (legacyUnmount) {\n        legacyUnmount(container);\n    }\n    else {\n        throw new Error('ReactDOM.unmountComponentAtNode is not available in this React version');\n    }\n}\nfunction modernUnmount(container) {\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            return [2 /*return*/, Promise.resolve().then(function () {\n                    var _a, _b;\n                    (_b = (_a = container[MARK]) === null || _a === void 0 ? void 0 : _a.unmount) === null || _b === void 0 ? void 0 : _b.call(_a);\n                    delete container[MARK];\n                })];\n        });\n    });\n}\nexport function unmount(container) {\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            if (createRoot) {\n                return [2 /*return*/, modernUnmount(container)];\n            }\n            else {\n                return [2 /*return*/, fallbackLegacyUnmount(container)];\n            }\n            return [2 /*return*/];\n        });\n    });\n}\n", "import { render } from '../react/render';\nvar mountMapping = new Map();\nif (typeof document !== 'undefined') {\n    mountMapping.set('tooltip', document.createElement('div'));\n}\nexport var createNode = function (children, isTooltip) {\n    if (isTooltip === void 0) { isTooltip = false; }\n    var mount = null;\n    /**\n     * @description tooltip root\n     */\n    if (isTooltip) {\n        mount = mountMapping.get('tooltip');\n    }\n    else {\n        mount = document.createElement('div');\n        if (children === null || children === void 0 ? void 0 : children.key) {\n            var exist = mountMapping.get(children.key);\n            if (exist) {\n                mount = exist;\n            }\n            else {\n                mountMapping.set(children.key, mount);\n            }\n        }\n    }\n    render(children, mount);\n    return mount;\n};\n", "var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport React from 'react';\nvar shadowLoading = function (ele, style) {\n    if (style === void 0) { style = {}; }\n    if (typeof document === 'undefined') {\n        return 'loading';\n    }\n    var overStyle = \"\";\n    if (style) {\n        Object.keys(style).forEach(function (key) {\n            overStyle += \"\".concat(key, \": \").concat(style[key], \";\\n\");\n        });\n    }\n    var shadowRoot = ele.attachShadow({ mode: 'open' });\n    var shadowDiv = document.createElement('div');\n    var shadowStyle = document.createElement('style');\n    shadowStyle.innerHTML = \".loading {\\n    display: inline-block;\\n    position: relative;\\n    width: 80px;\\n    height: 80px;\\n  }\\n  .loading div {\\n    position: absolute;\\n    top: 33px;\\n    width: 13px;\\n    height: 13px;\\n    border-radius: 50%;\\n    background: #ccc;\\n    animation-timing-function: cubic-bezier(0, 1, 1, 0);\\n    \".concat(overStyle, \"\\n  }\\n  .loading div:nth-child(1) {\\n    left: 8px;\\n    animation: loading1 0.6s infinite;\\n  }\\n  .loading div:nth-child(2) {\\n    left: 8px;\\n    animation: loading2 0.6s infinite;\\n  }\\n  .loading div:nth-child(3) {\\n    left: 32px;\\n    animation: loading2 0.6s infinite;\\n  }\\n  .loading div:nth-child(4) {\\n    left: 56px;\\n    animation: loading3 0.6s infinite;\\n  }\\n  @keyframes loading1 {\\n    0% {\\n      transform: scale(0);\\n    }\\n    100% {\\n      transform: scale(1);\\n    }\\n  }\\n  @keyframes loading3 {\\n    0% {\\n      transform: scale(1);\\n    }\\n    100% {\\n      transform: scale(0);\\n    }\\n  }\\n  @keyframes loading2 {\\n    0% {\\n      transform: translate(0, 0);\\n    }\\n    100% {\\n      transform: translate(24px, 0);\\n    }\\n  }\\n  \");\n    shadowDiv.classList.add('loading');\n    shadowDiv.innerHTML = '<div></div><div></div><div></div><div></div>';\n    shadowRoot.appendChild(shadowStyle);\n    shadowRoot.appendChild(shadowDiv);\n};\nexport var ChartLoading = function (_a) {\n    var loadingTemplate = _a.loadingTemplate, _b = _a.theme, theme = _b === void 0 ? 'light' : _b, loading = _a.loading;\n    var shadow = React.useRef(null);\n    var _c = typeof loading === 'object' ? loading : {}, _d = _c.container, container = _d === void 0 ? {} : _d, _e = _c.icon, icon = _e === void 0 ? {} : _e;\n    React.useEffect(function () {\n        if (!loadingTemplate && shadow.current) {\n            shadowLoading(shadow.current, icon);\n        }\n    }, []);\n    var renderLoading = function () {\n        if (loadingTemplate)\n            return loadingTemplate;\n        return React.createElement(\"div\", { ref: shadow });\n    };\n    return (React.createElement(\"div\", { className: \"charts-loading-container\", style: __assign({ position: 'absolute', width: '100%', height: '100%', display: 'flex', alignItems: 'center', justifyContent: 'center', left: 0, top: 0, zIndex: 99, background: theme === 'dark' ? 'rgb(20, 20, 20)' : 'rgb(255, 255, 255)' }, container) }, renderLoading()));\n};\n", "var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport React, { Fragment } from 'react';\nvar ErrorBoundary = /** @class */ (function (_super) {\n    __extends(ErrorBoundary, _super);\n    function ErrorBoundary() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.state = {\n            hasError: false,\n        };\n        _this.renderError = function (e) {\n            var errorTemplate = _this.props.errorTemplate;\n            switch (e) {\n                default:\n                    if (typeof errorTemplate === 'function')\n                        return errorTemplate(e);\n                    return errorTemplate ? errorTemplate : React.createElement(\"h5\", null,\n                        \"\\u7EC4\\u4EF6\\u51FA\\u9519\\u4E86\\uFF0C\\u8BF7\\u6838\\u67E5\\u540E\\u91CD\\u8BD5\\uFF1A \",\n                        e.message);\n            }\n        };\n        return _this;\n    }\n    ErrorBoundary.getDerivedStateFromError = function (error) {\n        return { hasError: true, error: error };\n    };\n    ErrorBoundary.getDerivedStateFromProps = function (nextProps, state) {\n        if (state.children !== nextProps.children) {\n            return {\n                children: nextProps.children,\n                hasError: false,\n                error: undefined,\n            };\n        }\n        return null;\n    };\n    ErrorBoundary.prototype.render = function () {\n        if (this.state.hasError) {\n            return this.renderError(this.state.error);\n        }\n        return React.createElement(Fragment, null, this.props.children);\n    };\n    return ErrorBoundary;\n}(React.Component));\nexport { ErrorBoundary };\n", "var __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { isString, memoize, values } from 'lodash';\nimport { getCanvasContext } from './context';\n/**\n * \n * @see https://developer.mozilla.org/zh-CN/docs/Web/API/CanvasRenderingContext2D/measureText\n */\nexport var measureText = memoize(function (text, font) {\n    if (font === void 0) { font = {}; }\n    var fontSize = font.fontSize, _a = font.fontFamily, fontFamily = _a === void 0 ? 'sans-serif' : _a, fontWeight = font.fontWeight, fontStyle = font.fontStyle, fontVariant = font.fontVariant;\n    var ctx = getCanvasContext();\n    // @see https://developer.mozilla.org/zh-CN/docs/Web/CSS/font\n    ctx.font = [fontStyle, fontWeight, fontVariant, \"\".concat(fontSize, \"px\"), fontFamily].join(' ');\n    return ctx.measureText(isString(text) ? text : '');\n}, function (text, font) {\n    if (font === void 0) { font = {}; }\n    return __spreadArray([text], values(font), true).join('');\n});\n/**\n * \n * @param text \n * @param font \n */\nexport var measureTextWidth = function (text, font) {\n    if (font === void 0) { font = {}; }\n    return measureText(text, font).width;\n};\n/**\n * \n * @param text \n * @param font \n */\nexport var measureTextHeight = function (text, font) {\n    if (font === void 0) { font = {}; }\n    var metrics = measureText(text, font);\n    return metrics.actualBoundingBoxAscent + metrics.actualBoundingBoxDescent;\n};\n", "var ctx;\n/**\n *  canvas context\n */\nexport var getCanvasContext = function () {\n    if (!ctx) {\n        ctx = document.createElement('canvas').getContext('2d');\n    }\n    return ctx;\n};\n", "var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport React, { forwardRef } from 'react';\nimport { ErrorBoundary, ChartLoading } from '@ant-design/charts-util';\nimport useChart from '../../hooks/useChart';\nimport { Plots } from '../../core';\nexport var BaseChart = forwardRef(function (_a, ref) {\n    var _b = _a.chartType, chartType = _b === void 0 ? 'Base' : _b, config = __rest(_a, [\"chartType\"]);\n    var _c = config.containerStyle, containerStyle = _c === void 0 ? {\n        height: 'inherit',\n        flex: 1\n    } : _c, _d = config.containerAttributes, containerAttributes = _d === void 0 ? {} : _d, className = config.className, loading = config.loading, loadingTemplate = config.loadingTemplate, errorTemplate = config.errorTemplate, onReady = config.onReady, rest = __rest(config, [\"containerStyle\", \"containerAttributes\", \"className\", \"loading\", \"loadingTemplate\", \"errorTemplate\", \"onReady\"]);\n    var _e = useChart(Plots[chartType], __assign(__assign({}, rest), { onReady: function (chartInstance) {\n            if (ref) {\n                if (typeof ref === 'function') {\n                    ref(chartInstance);\n                }\n                else {\n                    ref.current = chartInstance;\n                }\n            }\n            onReady === null || onReady === void 0 ? void 0 : onReady(chartInstance);\n        } })), chart = _e.chart, container = _e.container;\n    return (React.createElement(ErrorBoundary, { errorTemplate: errorTemplate },\n        loading && React.createElement(ChartLoading, { loadingTemplate: loadingTemplate, theme: config.theme, loading: loading }),\n        React.createElement(\"div\", __assign({ className: className, style: containerStyle, ref: container }, containerAttributes))));\n});\n", "var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { useRef, useEffect } from 'react';\nimport { isFunction, isEqual, createNode, cloneDeep, isArray, isObject, isValidElement } from '../util';\nexport default function useChart(ChartClass, config) {\n    var chart = useRef(null);\n    var chartOptions = useRef(null);\n    var container = useRef(null);\n    var onReady = config.onReady, onEvent = config.onEvent;\n    /**\n     * Get data base64\n     * @param {string} type A DOMString indicating the image format. The default format type is image/png.\n     * @param {number} encoderOptions A Number between 0 and 1 indicating the image quality\n     */\n    var toDataURL = function (type, encoderOptions) {\n        var _a;\n        if (type === void 0) { type = 'image/png'; }\n        var canvas = (_a = container.current) === null || _a === void 0 ? void 0 : _a.getElementsByTagName('canvas')[0];\n        return canvas === null || canvas === void 0 ? void 0 : canvas.toDataURL(type, encoderOptions);\n    };\n    /**\n     * Download Image\n     * @param {string} name A name of image\n     * @param {string} type A DOMString indicating the image format. The default format type is image/png.\n     * @param {number} encoderOptions A Number between 0 and 1 indicating the image quality\n     */\n    var downloadImage = function (name, type, encoderOptions) {\n        if (name === void 0) { name = 'download'; }\n        if (type === void 0) { type = 'image/png'; }\n        var imageName = name;\n        if (name.indexOf('.') === -1) {\n            imageName = \"\".concat(name, \".\").concat(type.split('/')[1]);\n        }\n        var base64 = toDataURL(type, encoderOptions);\n        var a = document.createElement('a');\n        a.href = base64;\n        a.download = imageName;\n        document.body.appendChild(a);\n        a.click();\n        document.body.removeChild(a);\n        a = null;\n        return imageName;\n    };\n    /**\n     * JSX TO HTMLElement\n     * @param {object} cfg\n     * @param {boolean} flag isTooltip\n     */\n    var processConfig = function (cfg, flag) {\n        if (flag === void 0) { flag = false; }\n        var keys = Object.keys(cfg);\n        var isTooltip = flag;\n        keys.forEach(function (key) {\n            var current = cfg[key];\n            if (key === 'tooltip') {\n                isTooltip = true;\n            }\n            if (isFunction(current) && isValidElement(\"\".concat(current))) {\n                cfg[key] = function () {\n                    var arg = [];\n                    for (var _i = 0; _i < arguments.length; _i++) {\n                        arg[_i] = arguments[_i];\n                    }\n                    return createNode(current.apply(void 0, arg), isTooltip);\n                };\n            }\n            else {\n                if (isArray(current)) {\n                    current.forEach(function (item) {\n                        processConfig(item, isTooltip);\n                    });\n                }\n                else if (isObject(current)) {\n                    processConfig(current, isTooltip);\n                }\n                else {\n                    isTooltip = flag;\n                }\n            }\n        });\n    };\n    useEffect(function () {\n        if (chart.current && !isEqual(chartOptions.current, config)) {\n            chartOptions.current = cloneDeep(config);\n            processConfig(config);\n            chart.current.update(config);\n            chart.current.render();\n        }\n    }, [config]);\n    useEffect(function () {\n        if (!container.current) {\n            return function () { return null; };\n        }\n        if (!chartOptions.current) {\n            chartOptions.current = cloneDeep(config);\n        }\n        processConfig(config);\n        var chartInstance = new ChartClass(container.current, __assign({}, config));\n        chartInstance.toDataURL = toDataURL;\n        chartInstance.downloadImage = downloadImage;\n        chartInstance.render();\n        chart.current = chartInstance;\n        if (onReady) {\n            onReady(chartInstance);\n        }\n        var handler = function (event) {\n            if (onEvent) {\n                onEvent(chartInstance, event);\n            }\n        };\n        chartInstance.on('*', handler);\n        // \n        return function () {\n            if (chart.current) {\n                chart.current.destroy();\n                chart.current.off('*', handler);\n                chart.current = undefined;\n            }\n        };\n    }, []);\n    return {\n        chart: chart,\n        container: container,\n    };\n}\n", "export { createNode, uuid } from '@ant-design/charts-util';\nexport { cloneDeep, flow, get, isArray, isElement, isEqual, isFunction, isNumber, isObject, isString, set, } from 'lodash';\nexport { isValidElement } from './is-valid-element';\n", "export var isValidElement = function (jsxCode) {\n    var basicReactPatterns = [/\\breact\\b/i, /\\.jsx/, /children:\\s*\\[/, /\\*#__PURE__\\*/];\n    var createElementPattern = /(\\w+)?\\.createElement\\(\\s*(['\"`])([^'\"`]+)\\2/g;\n    // G \n    var GElements = new Set([\n        'g',\n        'circle',\n        'ellipse',\n        'image',\n        'rect',\n        'line',\n        'polyline',\n        'polygon',\n        'text',\n        'path',\n        'html',\n        'mesh',\n    ]);\n    if (basicReactPatterns.some(function (pattern) { return pattern.test(jsxCode); })) {\n        return true;\n    }\n    var matches = jsxCode.match(createElementPattern);\n    if (!matches) {\n        return false;\n    }\n    return matches.some(function (match) {\n        var elementMatch = match.match(/\\.createElement\\(\\s*(['\"`])([^'\"`]+)\\1/);\n        return elementMatch && !GElements.has(elementMatch[2].toLowerCase());\n    });\n};\n", null, null, null, null, "var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { plotlib } from '@antv/g2-extension-plot';\nimport { Runtime, extend, stdlib } from '@antv/g2';\nexport var Chart = extend(Runtime, __assign(__assign({}, stdlib()), plotlib()));\n", "export { flatten, flow, isArray, isBoolean, omit, pick, isFunction, remove, get, groupBy, set, sortBy, assign, divide, ceil, isNumber, isString, includes, map, maxBy, isObject, uniqBy, isPlainObject, reduce, isNil, mergeWith, memoize, values, isUndefined, } from 'lodash';\nexport { isCompositePlot } from './is-composite-plot';\nexport { transformOptions } from './transform';\nexport { deleteExcessKeys } from './delete-excess-keys';\nexport { filterTransformed } from './filter-transformed';\nexport { conversionTagFormatter } from './conversion';\nexport { mergeWithArrayCoverage } from './merge-with-array-coverage';\nexport { fieldAdapter } from './field-adapter';\nexport { dataTransform } from './data-transform';\n", "var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { CONFIG_SHAPE, SPECIAL_OPTIONS, TRANSFORM_OPTION_KEY, VIEW_OPTIONS } from '../constants';\nimport { deleteExcessKeys, filterTransformed, isArray, isObject, isUndefined, mergeWithArrayCoverage, omit, pick, set, } from './index';\n/**\n * @title  G2 \n */\nexport var transformOptions = function (params) {\n    var options = filterTransformed(params);\n    var _a = options.children, children = _a === void 0 ? [] : _a;\n    var rest = omit(options, [].concat(VIEW_OPTIONS, CONFIG_SHAPE.map(function (item) { return item.key; })));\n    var getCustomTransform = function (key) {\n        var _a;\n        return (_a = SPECIAL_OPTIONS.find(function (option) { return option.key === key; })) === null || _a === void 0 ? void 0 : _a.callback;\n    };\n    /**\n     * @description \n     */\n    var updateOptions = function (origin, key, value) {\n        var callback = getCustomTransform(key);\n        if (callback) {\n            callback(origin, key, value);\n        }\n        else {\n            origin[key] = mergeWithArrayCoverage({}, origin[key], value);\n        }\n    };\n    /**\n     * @description\n     *  1.  CONFIG_SHAPE ,  children\n     * @example  src/core/constants/index.ts\n     */\n    var transformShape = function (config) {\n        Object.keys(config).forEach(function (key) {\n            // \n            if (!config[key])\n                return;\n            var exist = CONFIG_SHAPE.find(function (item) { return item.key === key; });\n            if (exist) {\n                var type = exist.type, extendedProperties = exist.extendedProperties, _a = exist.defaultShapeConfig, defaultShapeConfig = _a === void 0 ? {} : _a;\n                if (type) {\n                    var tooltip = config[key].tooltip;\n                    children.push(transformConfig(mergeWithArrayCoverage({}, pick(config, extendedProperties), defaultShapeConfig, { type: type }, config[key], {\n                        tooltip: tooltip ? tooltip : false,\n                    })));\n                }\n                else {\n                    // annotations\n                    if (isArray(config[key])) {\n                        var isText_1 = config[key].some(function (item) { return item.type === 'text'; });\n                        config[key].forEach(function (annotation) {\n                            children.push(transformConfig(__assign(__assign(__assign({}, (isText_1 ? { data: [] } : {})), { tooltip: false }), annotation)));\n                        });\n                    }\n                }\n            }\n        });\n    };\n    /**\n     * @title \n     * @description \n     */\n    var transformConfig = function (config) {\n        transformShape(config);\n        /**\n         * @description \n         * @example  src/core/constants/index.ts\n         */\n        Object.keys(TRANSFORM_OPTION_KEY).forEach(function (key) {\n            var transformTarget = TRANSFORM_OPTION_KEY[key];\n            if (!isUndefined(config[key])) {\n                if (isObject(transformTarget)) {\n                    var value = transformTarget.value, target = transformTarget.target;\n                    var transformValue = value(config[key]);\n                    updateOptions(config, target, transformValue);\n                }\n                else {\n                    set(config, transformTarget, config[key]);\n                }\n            }\n        });\n        return config;\n    };\n    children.forEach(function (child) {\n        /**\n         *  child  config  rest   child \n         * @description  children\n         */\n        var config = mergeWithArrayCoverage({}, rest, child);\n        transformConfig(mergeWithArrayCoverage(child, config));\n    });\n    transformShape(options);\n    deleteExcessKeys(options);\n    return params;\n};\n", "var __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { TRANSFORM_OPTION_KEY, VIEW_OPTIONS, CONFIG_SHAPE, ANNOTATION_LIST } from '../constants';\n/**\n * \n */\nexport var deleteExcessKeys = function (options) {\n    var _a = options.children, children = _a === void 0 ? [] : _a;\n    var deleteKeys = Object.keys(TRANSFORM_OPTION_KEY).concat(CONFIG_SHAPE.map(function (item) { return item.key; }));\n    deleteKeys.forEach(function (key) {\n        delete options[key];\n    });\n    /** Mix  */\n    children.forEach(function (child) {\n        Object.keys(child).forEach(function (key) {\n            if (deleteKeys.includes(key)) {\n                delete child[key];\n            }\n        });\n    });\n    /**  View  Annotations  Transform & Scale  */\n    Object.keys(options).forEach(function (key) {\n        if (!__spreadArray(__spreadArray([], VIEW_OPTIONS, true), ANNOTATION_LIST.map(function (item) { return item.key; }), true).includes(key)) {\n            delete options[key];\n        }\n    });\n    return options;\n};\n", "import { TRANSFORM_SIGN } from '../constants';\nimport { isArray } from './index';\nexport var filterTransformed = function (params) {\n    var options = params.options;\n    var _a = options.children, children = _a === void 0 ? [] : _a;\n    children.forEach(function (child) {\n        Object.keys(child).forEach(function (key) {\n            if (isArray(child[key]) && key !== 'data') {\n                child[key] = child[key].filter(function (item) { return !item[TRANSFORM_SIGN]; });\n            }\n        });\n    });\n    return options;\n};\n", "var __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { isArray, mergeWith } from './index';\nvar arrayCoverage = function (objValue, srcValue) {\n    if (isArray(srcValue)) {\n        return srcValue;\n    }\n};\nexport var mergeWithArrayCoverage = function () {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n    }\n    return mergeWith.apply(void 0, __spreadArray(__spreadArray([], args, false), [arrayCoverage], false));\n};\n", "import { get } from './index';\nexport function fieldAdapter(field) {\n    switch (typeof field) {\n        case 'function':\n            return field;\n        case 'string':\n            return function (d) { return get(d, [field]); };\n        default:\n            return function () { return field; };\n    }\n}\n", "import { get, isPlainObject, set } from '../utils';\n/**\n * Data transformation.\n * @description `data` to `data.value`\n * If `data` is not an object or does not have a `value` property, it will be set to `data.value`.\n * If `data` is an object without a `type` property, it will be set to `data.value`.\n * @param params - The adaptor parameters.\n * @returns The updated parameters with transformed data.\n */\nexport var dataTransform = function (params) {\n    var options = params.options;\n    var data = options.data;\n    if (get(data, 'value'))\n        return params;\n    if (get(data, 'type') !== 'fetch' && isPlainObject(data)) {\n        set(options, 'data.value', data);\n    }\n    return params;\n};\n", "var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { isArray, isBoolean } from '../utils';\n/** new Chart options */\nexport var CHART_OPTIONS = ['renderer', 'plugins'];\n/** There is only the view layer, no need to pass it down to children */\nexport var VIEW_OPTIONS = [\n    'width',\n    'height',\n    'autoFit',\n    'theme',\n    'inset',\n    'insetLeft',\n    'insetRight',\n    'insetTop',\n    'insetBottom',\n    'padding',\n    'paddingTop',\n    'paddingRight',\n    'paddingBottom',\n    'paddingLeft',\n    'margin',\n    'marginTop',\n    'marginRight',\n    'marginBottom',\n    'marginLeft',\n    'depth',\n    'title',\n    'clip',\n    'children',\n    'type',\n    'data',\n    'direction',\n    'plugins',\n];\n/**  */\nexport var TRANSFORM_SIGN = '__transform__';\n/**   */\nexport var SKIP_DEL_CUSTOM_SIGN = '__skipDelCustomKeys__';\n/**\n * @title \n * @example\n *    1. xField: 'year' -> encode: {x: 'year'}\n *    2. yField: 'scales' -> encode: {y: 'scales'}\n *    3. shape: 'smooth' -> style: {shape: 'smooth'} shapeField: 'shape' -> encode: { shape: 'shape' }\n *    4. connectNulls: {connect: true} -> style: {connect: true}\n *    5. keyField: 'key' -> encode: { key: 'key' }\n */\nvar commonCallback = function (type, value) {\n    if (isBoolean(value)) {\n        return {\n            type: type,\n            available: value,\n        };\n    }\n    return __assign({ type: type }, value);\n};\nexport var TRANSFORM_OPTION_KEY = {\n    /** encode */\n    xField: 'encode.x',\n    yField: 'encode.y',\n    colorField: 'encode.color',\n    angleField: 'encode.y',\n    keyField: 'encode.key',\n    y1Field: 'encode.y1',\n    sizeField: 'encode.size',\n    setsField: 'encode.sets',\n    shapeField: 'encode.shape',\n    seriesField: 'encode.series',\n    positionField: 'encode.position',\n    textField: 'encode.text',\n    valueField: 'encode.value',\n    binField: 'encode.x',\n    srcField: 'encode.src',\n    linkColorField: 'encode.linkColor',\n    fontSizeField: 'encode.fontSize',\n    coordinateType: 'coordinate.type',\n    radius: 'coordinate.outerRadius',\n    innerRadius: 'coordinate.innerRadius',\n    startAngle: 'coordinate.startAngle',\n    endAngle: 'coordinate.endAngle',\n    focusX: 'coordinate.focusX',\n    focusY: 'coordinate.focusY',\n    distortionX: 'coordinate.distortionX',\n    distortionY: 'coordinate.distortionY',\n    visual: 'coordinate.visual',\n    /**\n     * @title \n     * @example\n     *  1. stack: true -> transform: [{type: 'stackY'}]\n     */\n    stack: {\n        target: 'transform',\n        value: function (value) {\n            return commonCallback('stackY', value);\n        },\n    },\n    /**\n     * @title \n     * @example\n     *  1. normalize: true -> transform: [{type: 'normalizeY'}]\n     */\n    normalize: {\n        target: 'transform',\n        value: function (value) {\n            return commonCallback('normalizeY', value);\n        },\n    },\n    /**\n     * @title \n     * @description  normalize\n     * @example\n     *  1. percent: true -> transform: [{type: 'normalizeY'}]\n     */\n    percent: {\n        target: 'transform',\n        value: function (value) {\n            return commonCallback('normalizeY', value);\n        },\n    },\n    /**\n     * @title \n     * @example\n     *  1. group: true -> transform: [{type: 'dodgeX'}]\n     */\n    group: {\n        target: 'transform',\n        value: function (value) {\n            return commonCallback('dodgeX', value);\n        },\n    },\n    /**\n     * @title \n     * @example\n     *  1. sort: true -> transform: [{type: 'sortX'}]\n     */\n    sort: {\n        target: 'transform',\n        value: function (value) {\n            return commonCallback('sortX', value);\n        },\n    },\n    /**\n     * @title \n     * @example\n     *  1. symmetry: true -> transform: [{type: 'symmetryY'}]\n     */\n    symmetry: {\n        target: 'transform',\n        value: function (value) {\n            return commonCallback('symmetryY', value);\n        },\n    },\n    /**\n     * @title  y  y1 \n     * @example\n     *  1. diff: true -> transform: [{type: 'diffY'}]\n     */\n    diff: {\n        target: 'transform',\n        value: function (value) {\n            return commonCallback('diffY', value);\n        },\n    },\n    meta: {\n        target: 'scale',\n        value: function (value) {\n            return value;\n        },\n    },\n    label: {\n        target: 'labels',\n        value: function (value) {\n            return value;\n        },\n    },\n    /**\n     * @title \n     * @example\n     *  1. shape: 'smooth' -> style: {shape: 'smooth'}\n     */\n    shape: 'style.shape',\n    /**\n     * @title \n     * @description  boolean  \n     */\n    connectNulls: {\n        target: 'style',\n        value: function (value) {\n            if (isBoolean(value)) {\n                return {\n                    connect: value,\n                };\n            }\n            return value;\n        },\n    },\n    /**\n     * @title \n     * @example\n     *  1. transpose: true -> coordinate: { transform: [{ type: 'transpose' }]}\n     *  2. transpose: false -> coordinate: { }\n     */\n    transpose: {\n        target: 'transpose',\n        value: function (value) {\n            return commonCallback('transpose', value);\n        },\n    },\n};\n/**\n * @title  CONFIG_SHAPE ,  children\n * @example\n *    1. annotations: [{type: 'text'}] -> children: [{type: 'text'}]\n *    2. line: {shape: 'hvh'}-> children: [{type: 'line', style: { shape: 'hvh'}}]\n */\nvar EXTENDED_PROPERTIES = [\n    'xField',\n    'yField',\n    'seriesField',\n    'colorField',\n    'shapeField',\n    'keyField',\n    'positionField',\n    'meta',\n    'tooltip',\n    'animate',\n    'stack',\n    'normalize',\n    'percent',\n    'group',\n    'sort',\n    'symmetry',\n    'diff',\n];\nexport var CONFIG_SHAPE = [\n    {\n        key: 'annotations',\n        extendedProperties: [],\n    },\n    {\n        key: 'line',\n        type: 'line',\n        extendedProperties: EXTENDED_PROPERTIES,\n    },\n    {\n        key: 'connector',\n        type: 'connector',\n        extendedProperties: [],\n    },\n    {\n        key: 'point',\n        type: 'point',\n        extendedProperties: EXTENDED_PROPERTIES,\n        defaultShapeConfig: {\n            shapeField: 'circle',\n        },\n    },\n    {\n        key: 'area',\n        type: 'area',\n        extendedProperties: EXTENDED_PROPERTIES,\n    },\n];\n/**\n * @description \n */\nexport var SPECIAL_OPTIONS = [\n    {\n        key: 'transform',\n        callback: function (origin, key, value) {\n            var _a;\n            origin[key] = origin[key] || [];\n            var _b = value.available, available = _b === void 0 ? true : _b, rest = __rest(value, [\"available\"]);\n            if (available) {\n                origin[key].push(__assign((_a = {}, _a[TRANSFORM_SIGN] = true, _a), rest));\n            }\n            else {\n                var index = origin[key].indexOf(function (item) { return item.type === value.type; });\n                if (index !== -1) {\n                    origin[key].splice(index, 1);\n                }\n            }\n        },\n    },\n    {\n        key: 'labels',\n        callback: function (origin, key, value) {\n            var _a;\n            /**\n             * @description \n             *   1.  labels  false\n             *   2.  labels  label \n             * @example\n             *   1. label: false -> labels: []\n             *   2. label: [{x}, {xx}] -> labels: [{x}, {xx}]\n             */\n            if (!value || isArray(value)) {\n                origin[key] = value ? value : [];\n                return;\n            }\n            /**\n             * @description  text \n             */\n            if (!value.text) {\n                value['text'] = origin['yField'];\n            }\n            origin[key] = origin[key] || [];\n            origin[key].push(__assign((_a = {}, _a[TRANSFORM_SIGN] = true, _a), value));\n        },\n    },\n    {\n        key: 'transpose',\n        callback: function (origin, key, value) {\n            var _a;\n            if (value.available) {\n                origin['coordinate'] = {\n                    transform: [__assign((_a = {}, _a[TRANSFORM_SIGN] = true, _a), value)],\n                };\n            }\n            else {\n                origin['coordinate'] = {};\n            }\n        },\n    },\n];\nexport var ANNOTATION_LIST = [\n    {\n        key: 'conversionTag',\n        shape: 'ConversionTag',\n    },\n    {\n        key: 'axisText',\n        shape: 'BidirectionalBarAxisText',\n    },\n];\n", "var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { Text as GText } from '@antv/g';\nvar Text = /** @class */ (function (_super) {\n    __extends(Text, _super);\n    function Text(_a) {\n        if (_a === void 0) { _a = {}; }\n        var style = _a.style, restOptions = __rest(_a, [\"style\"]);\n        return _super.call(this, __assign({ style: __assign({ text: '', fontSize: 12, textBaseline: 'middle', textAlign: 'center', fill: '#000', fontStyle: 'normal', fontVariant: 'normal', fontWeight: 'normal', lineWidth: 1 }, style) }, restOptions)) || this;\n    }\n    return Text;\n}(GText));\nexport { Text };\n", "var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { Polygon as GPolygon } from '@antv/g';\nvar Polygon = /** @class */ (function (_super) {\n    __extends(Polygon, _super);\n    function Polygon(_a) {\n        if (_a === void 0) { _a = {}; }\n        var style = _a.style, restOptions = __rest(_a, [\"style\"]);\n        return _super.call(this, __assign({ style: __assign({ fill: '#eee' }, style) }, restOptions)) || this;\n    }\n    return Polygon;\n}(GPolygon));\nexport { Polygon };\n", "var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { CustomElement } from '@antv/g';\nimport { mergeWithArrayCoverage } from '../utils';\nvar Annotation = /** @class */ (function (_super) {\n    __extends(Annotation, _super);\n    function Annotation(chart, config, defaultOptions) {\n        var _this = _super.call(this, { style: mergeWithArrayCoverage(defaultOptions, config) }) || this;\n        _this.chart = chart;\n        return _this;\n    }\n    Annotation.prototype.connectedCallback = function () {\n        this.render(this.attributes, this);\n        this.bindEvents(this.attributes, this);\n    };\n    Annotation.prototype.disconnectedCallback = function () { };\n    Annotation.prototype.attributeChangedCallback = function (name) { };\n    Annotation.prototype.update = function (attr, animate) {\n        var _a;\n        this.attr(mergeWithArrayCoverage({}, this.attributes, attr || {}));\n        return (_a = this.render) === null || _a === void 0 ? void 0 : _a.call(this, this.attributes, this, animate);\n    };\n    Annotation.prototype.clear = function () {\n        this.removeChildren();\n    };\n    Annotation.prototype.getElementsLayout = function () {\n        var canvas = this.chart.getContext().canvas;\n        var elements = canvas.document.getElementsByClassName('element');\n        var elementsLayout = [];\n        elements.forEach(function (element) {\n            //@ts-expect-error\n            var bbox = element.getBBox();\n            var x = bbox.x, y = bbox.y, width = bbox.width, height = bbox.height;\n            var data = element['__data__'];\n            elementsLayout.push({\n                bbox: bbox,\n                x: x,\n                y: y,\n                width: width,\n                height: height,\n                key: data.key,\n                data: data,\n            });\n        });\n        return elementsLayout;\n    };\n    Annotation.prototype.bindEvents = function (attributes, container) { };\n    return Annotation;\n}(CustomElement));\nexport { Annotation };\n", "var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { get, isFunction } from '../utils';\nimport { Text, Polygon } from './shapes';\nimport { Annotation } from './core';\nvar ConversionTag = /** @class */ (function (_super) {\n    __extends(ConversionTag, _super);\n    function ConversionTag(chart, options) {\n        return _super.call(this, chart, options, { type: ConversionTag.tag }) || this;\n    }\n    ConversionTag.prototype.getConversionTagLayout = function () {\n        var isVertical = this.direction === 'vertical';\n        // Ensure elements are sorted by their position\n        var elementsLayout = Array.from(this.getElementsLayout()).sort(function (a, b) {\n            if (isVertical) {\n                return a.y - b.y;\n            }\n            return a.x - b.x;\n        });\n        var _a = elementsLayout[0], firstX = _a.x, firstY = _a.y, firstHeight = _a.height, firstWidth = _a.width, firstData = _a.data;\n        var valuePath = ['items', 0, 'value'];\n        var preValue = get(firstData, valuePath);\n        var elementDistance = isVertical\n            ? elementsLayout[1].y - firstY - firstHeight\n            : elementsLayout[1].x - firstX - firstWidth;\n        var tagLayout = [];\n        var _b = this.attributes, _c = _b.size, size = _c === void 0 ? 40 : _c, _d = _b.arrowSize, arrowSize = _d === void 0 ? 20 : _d, _e = _b.spacing, spacing = _e === void 0 ? 4 : _e;\n        elementsLayout.forEach(function (element, index) {\n            if (index > 0) {\n                var x = element.x, y = element.y, height = element.height, width = element.width, data = element.data, key = element.key;\n                var currentValue = get(data, valuePath);\n                var halfSize = size / 2;\n                if (isVertical) {\n                    var arrowVertexX = x + width / 2;\n                    var arrowVertexY = y;\n                    tagLayout.push({\n                        points: [\n                            [arrowVertexX + halfSize, arrowVertexY - elementDistance + spacing],\n                            [arrowVertexX + halfSize, arrowVertexY - arrowSize - spacing],\n                            [arrowVertexX, arrowVertexY - spacing],\n                            [arrowVertexX - halfSize, arrowVertexY - arrowSize - spacing],\n                            [arrowVertexX - halfSize, arrowVertexY - elementDistance + spacing],\n                        ],\n                        center: [arrowVertexX, arrowVertexY - elementDistance / 2],\n                        width: elementDistance,\n                        value: [preValue, currentValue],\n                        key: key,\n                    });\n                }\n                else {\n                    var arrowVertexX = x;\n                    var arrowVertexY = y + height / 2;\n                    tagLayout.push({\n                        points: [\n                            [x - elementDistance + spacing, arrowVertexY - halfSize],\n                            [x - arrowSize - spacing, arrowVertexY - halfSize],\n                            [arrowVertexX - spacing, arrowVertexY],\n                            [x - arrowSize - spacing, arrowVertexY + halfSize],\n                            [x - elementDistance + spacing, arrowVertexY + halfSize],\n                        ],\n                        center: [arrowVertexX - elementDistance / 2, arrowVertexY],\n                        width: elementDistance,\n                        value: [preValue, currentValue],\n                        key: key,\n                    });\n                }\n                preValue = currentValue;\n            }\n        });\n        return tagLayout;\n    };\n    ConversionTag.prototype.render = function () {\n        this.setDirection();\n        this.drawConversionTag();\n    };\n    /**  coordinate  */\n    ConversionTag.prototype.setDirection = function () {\n        var coordinate = this.chart.getCoordinate();\n        var transformations = get(coordinate, 'options.transformations');\n        var direction = 'horizontal';\n        transformations.forEach(function (transformation) {\n            if (transformation.includes('transpose')) {\n                direction = 'vertical';\n            }\n        });\n        this.direction = direction;\n    };\n    ConversionTag.prototype.drawConversionTag = function () {\n        var _this = this;\n        var conversionLayout = this.getConversionTagLayout();\n        var _a = this.attributes, style = _a.style, _b = _a.text, textStyle = _b.style, formatter = _b.formatter;\n        conversionLayout.forEach(function (layout) {\n            var points = layout.points, center = layout.center, value = layout.value, key = layout.key;\n            var prev = value[0], next = value[1];\n            var x = center[0], y = center[1];\n            var polygon = new Polygon({\n                style: __assign({ points: points, fill: '#eee' }, style),\n                id: \"polygon-\".concat(key),\n            });\n            var text = new Text({\n                style: __assign({ x: x, y: y, text: isFunction(formatter) ? formatter(prev, next) : ((next / prev) * 100).toFixed(2) + '%' }, textStyle),\n                id: \"text-\".concat(key),\n            });\n            _this.appendChild(polygon);\n            _this.appendChild(text);\n        });\n    };\n    ConversionTag.prototype.update = function () {\n        this.clear();\n        this.drawConversionTag();\n    };\n    ConversionTag.prototype.destroy = function () {\n        this.clear();\n    };\n    ConversionTag.tag = 'ConversionTag';\n    return ConversionTag;\n}(Annotation));\nexport { ConversionTag };\n", "export var VERTICAL_MARGIN = 32;\nexport var HORIZONTAL_MARGIN = 16;\nexport var AXIS_LABEL_PADDING = 48;\n", "var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { get, isFunction, uniqBy, groupBy } from '../utils';\nimport { Annotation } from './core';\nimport { Text } from './shapes';\nimport { VERTICAL_MARGIN } from '../plots/bidirectional-bar/constants';\nvar BidirectionalBarAxisText = /** @class */ (function (_super) {\n    __extends(BidirectionalBarAxisText, _super);\n    function BidirectionalBarAxisText(chart, options) {\n        return _super.call(this, chart, options, { type: BidirectionalBarAxisText.tag }) || this;\n    }\n    BidirectionalBarAxisText.prototype.render = function () {\n        this.drawText();\n    };\n    BidirectionalBarAxisText.prototype.getBidirectionalBarAxisTextLayout = function () {\n        var layout = this.attributes.layout;\n        var isVertical = layout === 'vertical';\n        var allElementsLayout = this.getElementsLayout();\n        var elementsLayout = isVertical ? uniqBy(allElementsLayout, 'x') : uniqBy(allElementsLayout, 'y');\n        var textPath = ['title'];\n        var textLayout = [];\n        var views = this.chart.getContext().views;\n        var _a = get(views, [0, 'layout']), viewWidth = _a.width, viewHeight = _a.height;\n        elementsLayout.forEach(function (element) {\n            var x = element.x, y = element.y, height = element.height, width = element.width, data = element.data, key = element.key;\n            var text = get(data, textPath);\n            if (isVertical) {\n                textLayout.push({\n                    x: x + width / 2,\n                    y: viewHeight,\n                    text: text,\n                    key: key,\n                });\n            }\n            else {\n                textLayout.push({\n                    x: viewWidth,\n                    y: y + height / 2,\n                    text: text,\n                    key: key,\n                });\n            }\n        });\n        /**  */\n        if (uniqBy(textLayout, 'text').length !== textLayout.length) {\n            textLayout = Object.values(groupBy(textLayout, 'text')).map(function (items) {\n                var _a;\n                var sum = items.reduce(function (pre, cur) {\n                    return pre + (isVertical ? cur.x : cur.y);\n                }, 0);\n                return __assign(__assign({}, items[0]), (_a = {}, _a[isVertical ? 'x' : 'y'] = sum / items.length, _a));\n            });\n        }\n        return textLayout;\n    };\n    BidirectionalBarAxisText.prototype.transformLabelStyle = function (style) {\n        var removeLabel = {};\n        var reg = /^label[A-Z]/;\n        Object.keys(style).forEach(function (key) {\n            if (reg.test(key)) {\n                removeLabel[key.replace('label', '').replace(/^[A-Z]/, function (match) { return match.toLowerCase(); })] = style[key];\n            }\n        });\n        return removeLabel;\n    };\n    BidirectionalBarAxisText.prototype.drawText = function () {\n        var _this = this;\n        var axisLayout = this.getBidirectionalBarAxisTextLayout();\n        var _a = this.attributes, viewLayout = _a.layout, labelFormatter = _a.labelFormatter, textStyle = __rest(_a, [\"layout\", \"labelFormatter\"]);\n        axisLayout.forEach(function (layout) {\n            var x = layout.x, y = layout.y, text = layout.text, key = layout.key;\n            var textNode = new Text({\n                style: __assign({ x: x, y: y, text: isFunction(labelFormatter) ? labelFormatter(text) : text, wordWrap: true, wordWrapWidth: viewLayout === 'horizontal' ? VERTICAL_MARGIN * 2 : 120, maxLines: 2, textOverflow: 'ellipsis' }, _this.transformLabelStyle(textStyle)),\n                id: \"text-\".concat(key),\n            });\n            _this.appendChild(textNode);\n        });\n    };\n    BidirectionalBarAxisText.prototype.destroy = function () {\n        this.clear();\n    };\n    /**  */\n    BidirectionalBarAxisText.prototype.update = function () {\n        this.destroy();\n        this.drawText();\n    };\n    BidirectionalBarAxisText.tag = 'BidirectionalBarAxisText';\n    return BidirectionalBarAxisText;\n}(Annotation));\nexport { BidirectionalBarAxisText };\n", "import { ANNOTATION_LIST } from '../constants';\nimport { ConversionTag } from './conversion-tag';\nimport { BidirectionalBarAxisText } from './bidirectional-bar-axis-text';\nvar Annotaion = { ConversionTag: ConversionTag, BidirectionalBarAxisText: BidirectionalBarAxisText };\nvar Controller = /** @class */ (function () {\n    function Controller(chart, config) {\n        this.container = new Map();\n        this.chart = chart;\n        this.config = config;\n        this.init();\n    }\n    Controller.prototype.init = function () {\n        var _this = this;\n        ANNOTATION_LIST.forEach(function (annotation) {\n            var _a;\n            var key = annotation.key, shape = annotation.shape;\n            var annotationOptions = _this.config[key];\n            if (annotationOptions) {\n                var annotationInstance = new Annotaion[shape](_this.chart, annotationOptions);\n                var canvas = _this.chart.getContext().canvas;\n                canvas.appendChild(annotationInstance);\n                _this.container.set(key, annotationInstance);\n            }\n            else {\n                (_a = _this.container.get(key)) === null || _a === void 0 ? void 0 : _a.clear();\n            }\n        });\n    };\n    /**\n     * Update annotaions\n     */\n    Controller.prototype.update = function () {\n        var _this = this;\n        if (!this.container.size)\n            return;\n        ANNOTATION_LIST.forEach(function (annotation) {\n            var key = annotation.key;\n            var annotationInstance = _this.container.get(key);\n            annotationInstance === null || annotationInstance === void 0 ? void 0 : annotationInstance.update();\n        });\n    };\n    /**\n     * Dws the annotations\n     */\n    Controller.prototype.destroy = function () {\n        this.container.forEach(function (annotationInstance) {\n            annotationInstance.destroy();\n        });\n        this.container.clear();\n    };\n    return Controller;\n}());\nexport { Controller };\n", "var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport EE from '@antv/event-emitter';\nimport { ChartEvent } from '@antv/g2';\nimport { Chart } from './chart';\nimport { Controller as Annotation } from '../annotation';\nimport { CHART_OPTIONS, SKIP_DEL_CUSTOM_SIGN } from '../constants';\nimport { mergeWithArrayCoverage, pick } from '../utils';\nvar SOURCE_ATTRIBUTE_NAME = 'data-chart-source-type';\nvar Plot = /** @class */ (function (_super) {\n    __extends(Plot, _super);\n    function Plot(container, options) {\n        var _this = _super.call(this) || this;\n        // \n        _this.eventListeners = [];\n        _this.bindedEvents = false;\n        _this.container = typeof container === 'string' ? document.getElementById(container) : container;\n        _this.options = _this.mergeOption(options);\n        _this.createG2();\n        _this.bindEvents();\n        return _this;\n    }\n    /**\n     * new Chart \n     */\n    Plot.prototype.getChartOptions = function () {\n        return __assign(__assign({}, pick(this.options, CHART_OPTIONS)), { container: this.container });\n    };\n    /**\n     * G2 options(Spec) \n     */\n    Plot.prototype.getSpecOptions = function () {\n        if (this.type === 'base' || this[SKIP_DEL_CUSTOM_SIGN]) {\n            return __assign(__assign({}, this.options), this.getChartOptions());\n        }\n        return this.options;\n    };\n    /**\n     *  G2 \n     */\n    Plot.prototype.createG2 = function () {\n        if (!this.container) {\n            throw Error('The container is not initialized!');\n        }\n        this.chart = new Chart(this.getChartOptions());\n        //  G2\n        this.container.setAttribute(SOURCE_ATTRIBUTE_NAME, 'Ant Design Charts');\n    };\n    /**\n     *  G2 \n     */\n    Plot.prototype.bindEvents = function () {\n        var _this = this;\n        if (this.chart) {\n            var eventHandler_1 = function (e) {\n                if (e === null || e === void 0 ? void 0 : e.type) {\n                    _this.emit(e.type, e);\n                }\n            };\n            this.chart.on('*', eventHandler_1);\n            this.eventListeners.push(function () {\n                var _a;\n                (_a = _this.chart) === null || _a === void 0 ? void 0 : _a.off('*', eventHandler_1);\n            });\n        }\n    };\n    Plot.prototype.getBaseOptions = function () {\n        return { type: 'view', autoFit: true };\n    };\n    /**\n     *  options \n     */\n    Plot.prototype.getDefaultOptions = function () { };\n    /**\n     * \n     */\n    Plot.prototype.render = function () {\n        var _this = this;\n        //  adaptor , base  adaptor.\n        if (this.type !== 'base') {\n            this.execAdaptor();\n        }\n        // options \n        this.chart.options(this.getSpecOptions());\n        // \n        this.chart.render().then(function () {\n            if (_this.annotation) {\n                _this.annotation.update();\n            }\n            else {\n                _this.annotation = new Annotation(_this.chart, _this.options);\n            }\n            _this.bindSizeSensor();\n        });\n    };\n    /**\n     * \n     * @param options\n     */\n    Plot.prototype.update = function (options) {\n        this.options = this.mergeOption(options);\n    };\n    Plot.prototype.mergeOption = function (options) {\n        return mergeWithArrayCoverage({}, this.getBaseOptions(), this.getDefaultOptions(), options);\n    };\n    /**\n     * \n     * @override\n     * @param options\n     */\n    Plot.prototype.changeData = function (data) {\n        this.chart.changeData(data);\n    };\n    /**\n     * \n     * @param width\n     * @param height\n     */\n    Plot.prototype.changeSize = function (width, height) {\n        this.chart.changeSize(width, height);\n    };\n    /**\n     * \n     */\n    Plot.prototype.destroy = function () {\n        // \n        this.eventListeners.forEach(function (cleanup) { return cleanup(); });\n        this.eventListeners = [];\n        //  annotation\n        if (this.annotation && typeof this.annotation.destroy === 'function') {\n            this.annotation.destroy();\n        }\n        this.annotation = null;\n        // G2 \n        this.chart.destroy();\n        // \n        this.off();\n        this.bindedEvents = false;\n        this.container.removeAttribute(SOURCE_ATTRIBUTE_NAME);\n    };\n    /**\n     *  adaptor \n     */\n    Plot.prototype.execAdaptor = function () {\n        var adaptor = this.getSchemaAdaptor();\n        //  G2 Spec\n        adaptor({\n            chart: this.chart,\n            options: this.options,\n        });\n    };\n    /**\n     * \n     */\n    Plot.prototype.triggerResize = function () {\n        this.chart.forceFit();\n    };\n    /**\n     *  dom \n     */\n    Plot.prototype.bindSizeSensor = function () {\n        var _this = this;\n        if (this.bindedEvents)\n            return;\n        var _a = this.options.autoFit, autoFit = _a === void 0 ? true : _a;\n        if (autoFit) {\n            var resizeHandler_1 = function () {\n                if (_this.annotation) {\n                    _this.annotation.update();\n                }\n            };\n            this.chart.on(ChartEvent.AFTER_CHANGE_SIZE, resizeHandler_1);\n            // \n            this.eventListeners.push(function () {\n                var _a;\n                (_a = _this.chart) === null || _a === void 0 ? void 0 : _a.off(ChartEvent.AFTER_CHANGE_SIZE, resizeHandler_1);\n            });\n            this.bindedEvents = true;\n        }\n    };\n    return Plot;\n}(EE));\nexport { Plot };\n", "var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Plot } from '../../base';\nvar Base = /** @class */ (function (_super) {\n    __extends(Base, _super);\n    function Base() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        /**  */\n        _this.type = 'base';\n        return _this;\n    }\n    /**\n     *   \n     * \n     */\n    Base.getDefaultOptions = function () {\n        return {\n            type: 'view',\n            children: [{ type: 'line' }],\n        };\n    };\n    /**\n     *   \n     */\n    Base.prototype.getDefaultOptions = function () {\n        return Base.getDefaultOptions();\n    };\n    /**\n     * \n     */\n    Base.prototype.getSchemaAdaptor = function () {\n        return function (params) { return params; };\n    };\n    return Base;\n}(Plot));\nexport { Base };\n", "var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { set, isBoolean } from '../utils';\nimport { CONFIG_SHAPE } from '../constants';\n/**\n * @description line|point|areatransform\n */\nexport function shapeStack(params) {\n    var options = params.options;\n    var stack = options.stack, tooltip = options.tooltip, xField = options.xField;\n    if (!stack)\n        return params;\n    var shapes = CONFIG_SHAPE.map(function (item) { return item.type; }).filter(function (item) { return !!item; });\n    var hasStack = false;\n    shapes.forEach(function (shape) {\n        if (options[shape]) {\n            hasStack = true;\n            /** https://github.com/antvis/G2/issues/4515 */\n            set(options, [shape, 'stack'], __assign({ y1: 'y' }, (typeof stack === 'object' ? stack : {})));\n        }\n    });\n    /** tooltip */\n    if (hasStack && !isBoolean(tooltip) && !tooltip) {\n        set(options, 'tooltip', {\n            title: xField,\n            items: [\n                {\n                    channel: 'y',\n                },\n            ],\n        });\n    }\n    return params;\n}\n", "import { flow } from '../utils';\nimport { shapeStack } from './shape-stack';\n/**\n *  Mark\n */\nexport function mark(params) {\n    return flow(shapeStack)(params);\n}\n", "/**\n * layout = 'horizontal' | 'vertical'\n * @param params\n * @returns\n */\nexport function coordinateLayout(params) {\n    var _a = params.options.layout, layout = _a === void 0 ? 'horizontal' : _a;\n    params.options.coordinate.transform = layout !== 'horizontal' ? undefined : [{ type: 'transpose' }];\n    return params;\n}\n/**\n * layout = 'horizontal' | 'vertical'\n * all children change\n * @param params\n * @returns\n */\nexport function allCoordinateLayout(params) {\n    coordinateLayout(params);\n    var _a = params.options.layout, layout = _a === void 0 ? 'horizontal' : _a;\n    params.options.children.forEach(function (item) {\n        var _a;\n        if ((_a = item === null || item === void 0 ? void 0 : item.coordinate) === null || _a === void 0 ? void 0 : _a.transform) {\n            item.coordinate.transform = layout !== 'horizontal' ? undefined : [{ type: 'transpose' }];\n        }\n    });\n    return params;\n}\n", "import { flow, transformOptions } from '../../utils';\nimport { mark } from '../../adaptor';\n/**\n * @param chart\n * @param options\n */\nexport function adaptor(params) {\n    return flow(mark, transformOptions)(params);\n}\n", "var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Plot } from '../../base';\nimport { adaptor } from './adaptor';\nvar Area = /** @class */ (function (_super) {\n    __extends(Area, _super);\n    function Area() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        /**  */\n        _this.type = 'area';\n        return _this;\n    }\n    /**\n     *   \n     * \n     */\n    Area.getDefaultOptions = function () {\n        return {\n            type: 'view',\n            children: [{ type: 'area' }],\n            scale: {\n                y: { nice: true },\n            },\n            axis: {\n                y: { title: false },\n                x: { title: false },\n            },\n            interaction: {\n                tooltip: {\n                    shared: true,\n                },\n            },\n        };\n    };\n    /**\n     *   \n     */\n    Area.prototype.getDefaultOptions = function () {\n        return Area.getDefaultOptions();\n    };\n    /**\n     * \n     */\n    Area.prototype.getSchemaAdaptor = function () {\n        return adaptor;\n    };\n    return Area;\n}(Plot));\nexport { Area };\n", "var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { mark } from '../../adaptor';\nimport { flow, transformOptions, get, isArray, set, omit } from '../../utils';\n/**\n * @param chart\n * @param options\n */\nexport function adaptor(params) {\n    /**\n     * @title \n     * @description  interval \n     */\n    var background = function (params) {\n        var options = params.options;\n        /**\n         * @description \n         */\n        if (get(options, 'children.length') > 1) {\n            set(options, 'children', [{ type: 'interval' }]);\n        }\n        var scale = options.scale, markBackground = options.markBackground, data = options.data, children = options.children, yField = options.yField;\n        var domain = get(scale, 'y.domain', []);\n        if (markBackground && domain.length && isArray(data)) {\n            var domainMax_1 = 'domainMax';\n            var backgroundData = data.map(function (item) {\n                var _a;\n                return __assign(__assign({ originData: __assign({}, item) }, omit(item, yField)), (_a = {}, _a[domainMax_1] = domain[domain.length - 1], _a));\n            });\n            children.unshift(__assign({ type: 'interval', data: backgroundData, yField: domainMax_1, tooltip: false, style: {\n                    fill: '#eee',\n                }, label: false }, markBackground));\n        }\n        return params;\n    };\n    return flow(background, mark, transformOptions)(params);\n}\n", "import { register } from '@antv/g2';\nexport var reisterShape = function () {\n    /**\n     * Draw 2.5d bar shape.\n     */\n    var draw25DBar = function (style, context) {\n        return function (points) {\n            var _a = style.fill, fill = _a === void 0 ? '#2888FF' : _a, stroke = style.stroke, _b = style.fillOpacity, fillOpacity = _b === void 0 ? 1 : _b, _c = style.strokeOpacity, strokeOpacity = _c === void 0 ? 0.2 : _c, _d = style.pitch, pitch = _d === void 0 ? 8 : _d;\n            var p1 = points[0], p2 = points[1], p3 = points[2], p4 = points[3];\n            var height = (p2[1] - p1[1]) / 2;\n            var document = context.document;\n            var g = document.createElement('g', {});\n            var top = document.createElement('polygon', {\n                style: {\n                    points: [p1, [p1[0] - pitch, p1[1] + height], [p3[0] - pitch, p1[1] + height], p4],\n                    fill: fill,\n                    fillOpacity: fillOpacity,\n                    stroke: stroke,\n                    strokeOpacity: strokeOpacity,\n                    inset: 30,\n                },\n            });\n            var bottom = document.createElement('polygon', {\n                style: {\n                    points: [[p1[0] - pitch, p1[1] + height], p2, p3, [p3[0] - pitch, p1[1] + height]],\n                    fill: fill,\n                    fillOpacity: fillOpacity,\n                    stroke: stroke,\n                    strokeOpacity: strokeOpacity,\n                },\n            });\n            var right = document.createElement('polygon', {\n                style: {\n                    points: [p1, [p1[0] - pitch, p1[1] + height], p2, [p1[0] + pitch, p1[1] + height]],\n                    fill: fill,\n                    fillOpacity: fillOpacity - 0.2,\n                },\n            });\n            g.appendChild(top);\n            g.appendChild(bottom);\n            g.appendChild(right);\n            return g;\n        };\n    };\n    // @ts-ignore\n    register('shape.interval.bar25D', draw25DBar);\n};\n", "var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Plot } from '../../base';\nimport { adaptor } from './adaptor';\nimport { reisterShape } from './shape';\nreisterShape();\nvar Bar = /** @class */ (function (_super) {\n    __extends(Bar, _super);\n    function Bar() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        /**  */\n        _this.type = 'Bar';\n        return _this;\n    }\n    /**\n     *   \n     * \n     */\n    Bar.getDefaultOptions = function () {\n        return {\n            type: 'view',\n            coordinate: { transform: [{ type: 'transpose' }] },\n            children: [{ type: 'interval' }],\n            scale: {\n                y: { nice: true },\n            },\n            axis: {\n                y: { title: false },\n                x: { title: false },\n            },\n            interaction: {\n                tooltip: {\n                    shared: true,\n                },\n                elementHighlight: {\n                    background: true,\n                },\n            },\n        };\n    };\n    /**\n     *   \n     */\n    Bar.prototype.getDefaultOptions = function () {\n        return Bar.getDefaultOptions();\n    };\n    /**\n     * \n     */\n    Bar.prototype.getSchemaAdaptor = function () {\n        return adaptor;\n    };\n    return Bar;\n}(Plot));\nexport { Bar };\n", "import { register } from '@antv/g2';\nexport var reisterShape = function () {\n    /**\n     * Draw 2.5d column shape.\n     */\n    var draw25DColumn = function (style, context) {\n        return function (points) {\n            var _a = style.fill, fill = _a === void 0 ? '#2888FF' : _a, stroke = style.stroke, _b = style.fillOpacity, fillOpacity = _b === void 0 ? 1 : _b, _c = style.strokeOpacity, strokeOpacity = _c === void 0 ? 0.2 : _c, _d = style.pitch, pitch = _d === void 0 ? 8 : _d;\n            var x3 = points[1][0] - points[0][0];\n            var x4 = x3 / 2 + points[0][0];\n            var document = context.document;\n            var g = document.createElement('g', {});\n            var left = document.createElement('polygon', {\n                style: {\n                    points: [\n                        [points[0][0], points[0][1]],\n                        [x4, points[1][1] + pitch],\n                        [x4, points[3][1] + pitch],\n                        [points[3][0], points[3][1]],\n                    ],\n                    fill: fill,\n                    fillOpacity: fillOpacity,\n                    stroke: stroke,\n                    strokeOpacity: strokeOpacity,\n                    inset: 30,\n                },\n            });\n            var right = document.createElement('polygon', {\n                style: {\n                    points: [\n                        [x4, points[1][1] + pitch],\n                        [points[1][0], points[1][1]],\n                        [points[2][0], points[2][1]],\n                        [x4, points[2][1] + pitch],\n                    ],\n                    fill: fill,\n                    fillOpacity: fillOpacity,\n                    stroke: stroke,\n                    strokeOpacity: strokeOpacity,\n                },\n            });\n            var top = document.createElement('polygon', {\n                style: {\n                    points: [\n                        [points[0][0], points[0][1]],\n                        [x4, points[1][1] - pitch],\n                        [points[1][0], points[1][1]],\n                        [x4, points[1][1] + pitch],\n                    ],\n                    fill: fill,\n                    fillOpacity: fillOpacity - 0.2,\n                },\n            });\n            g.appendChild(right);\n            g.appendChild(left);\n            g.appendChild(top);\n            return g;\n        };\n    };\n    // @ts-ignore\n    register('shape.interval.column25D', draw25DColumn);\n};\n", "var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Plot } from '../../base';\nimport { adaptor } from '../bar/adaptor';\nimport { reisterShape } from './shape';\nreisterShape();\nvar Column = /** @class */ (function (_super) {\n    __extends(Column, _super);\n    function Column() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        /**  */\n        _this.type = 'column';\n        return _this;\n    }\n    Column.getDefaultOptions = function () {\n        return {\n            type: 'view',\n            scale: {\n                y: { nice: true },\n            },\n            interaction: {\n                tooltip: {\n                    shared: true,\n                },\n                elementHighlight: {\n                    background: true,\n                },\n            },\n            axis: {\n                y: { title: false },\n                x: { title: false },\n            },\n            children: [\n                {\n                    type: 'interval',\n                },\n            ],\n        };\n    };\n    Column.prototype.getDefaultOptions = function () {\n        return Column.getDefaultOptions();\n    };\n    Column.prototype.getSchemaAdaptor = function () {\n        return adaptor;\n    };\n    return Column;\n}(Plot));\nexport { Column };\n", "import { mark } from '../../adaptor';\nimport { flow, transformOptions, get, set } from '../../utils';\n/**\n * @param chart\n * @param options\n */\nexport function adaptor(params) {\n    var colorField = function (params) {\n        var options = params.options;\n        var _a = options.children, children = _a === void 0 ? [] : _a, legend = options.legend;\n        if (!legend)\n            return params;\n        children.forEach(function (option) {\n            if (!get(option, 'colorField')) {\n                var yField_1 = get(option, 'yField');\n                set(option, 'colorField', function () { return yField_1; });\n            }\n        });\n        return params;\n    };\n    /**\n     * @description Top level annotations needs to share scale, when top level annotations is not empty, scale needs to be dynamically set.\n     */\n    var annotations = function (params) {\n        var options = params.options;\n        var _a = options.annotations, annotations = _a === void 0 ? [] : _a, _b = options.children, children = _b === void 0 ? [] : _b, scale = options.scale;\n        var sharedScale = false;\n        if (get(scale, 'y.key')) {\n            return params;\n        }\n        children.forEach(function (child, index) {\n            if (!get(child, 'scale.y.key')) {\n                var scaleKey_1 = \"child\".concat(index, \"Scale\");\n                set(child, 'scale.y.key', scaleKey_1);\n                var _a = child.annotations, childAnnotations = _a === void 0 ? [] : _a;\n                /**\n                 * @description If the child has annotations, the scale of the child needs to be assigned scaleKey to connect the annotation.\n                 */\n                if (childAnnotations.length > 0) {\n                    set(child, 'scale.y.independent', false);\n                    childAnnotations.forEach(function (annotation) {\n                        set(annotation, 'scale.y.key', scaleKey_1);\n                    });\n                }\n                if (!sharedScale && annotations.length > 0 && get(child, 'scale.y.independent') === undefined) {\n                    sharedScale = true;\n                    set(child, 'scale.y.independent', false);\n                    annotations.forEach(function (annotation) {\n                        set(annotation, 'scale.y.key', scaleKey_1);\n                    });\n                }\n            }\n        });\n        return params;\n    };\n    return flow(colorField, annotations, mark, transformOptions)(params);\n}\n", "var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Plot } from '../../base';\nimport { adaptor } from './adaptor';\nvar DualAxes = /** @class */ (function (_super) {\n    __extends(DualAxes, _super);\n    function DualAxes() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        /**  */\n        _this.type = 'DualAxes';\n        return _this;\n    }\n    /**\n     *   \n     * \n     */\n    DualAxes.getDefaultOptions = function () {\n        return {\n            type: 'view',\n            axis: {\n                y: { title: false, tick: false },\n                x: { title: false },\n            },\n            scale: {\n                y: {\n                    independent: true,\n                    nice: true,\n                },\n            },\n        };\n    };\n    /**\n     *   \n     */\n    DualAxes.prototype.getDefaultOptions = function () {\n        return DualAxes.getDefaultOptions();\n    };\n    /**\n     * \n     */\n    DualAxes.prototype.getSchemaAdaptor = function () {\n        return adaptor;\n    };\n    return DualAxes;\n}(Plot));\nexport { DualAxes };\n", "import { flow, transformOptions, set, groupBy } from '../../utils';\nimport { mark } from '../../adaptor';\n/**\n * @param chart\n * @param options\n */\nexport function adaptor(params) {\n    /**\n     * \n     */\n    var init = function (params) {\n        var options = params.options;\n        var xField = options.xField, colorField = options.colorField;\n        if (!colorField) {\n            set(options, 'colorField', xField);\n        }\n        return params;\n    };\n    var transform = function (params) {\n        var options = params.options;\n        var compareField = options.compareField, transform = options.transform, _a = options.isTransposed, isTransposed = _a === void 0 ? true : _a, coordinate = options.coordinate;\n        if (!transform) {\n            if (compareField) {\n                set(options, 'transform', []);\n            }\n            else {\n                set(options, 'transform', [{ type: 'symmetryY' }]);\n            }\n        }\n        if (!coordinate && isTransposed) {\n            set(options, 'coordinate', { transform: [{ type: 'transpose' }] });\n        }\n        return params;\n    };\n    var compare = function (params) {\n        var options = params.options;\n        var compareField = options.compareField, seriesField = options.seriesField, data = options.data, children = options.children, yField = options.yField, _a = options.isTransposed, isTransposed = _a === void 0 ? true : _a;\n        if (compareField || seriesField) {\n            var groupedData = Object.values(groupBy(data, function (item) { return item[compareField || seriesField]; }));\n            children[0].data = groupedData[0];\n            children.push({\n                type: 'interval',\n                data: groupedData[1],\n                // @ts-ignore\n                yField: function (item) { return -item[yField]; },\n            });\n            delete options['compareField'];\n            delete options.data;\n        }\n        if (seriesField) {\n            set(options, 'type', 'spaceFlex');\n            set(options, 'ratio', [1, 1]);\n            set(options, 'direction', isTransposed ? 'row' : 'col');\n            delete options['seriesField'];\n        }\n        return params;\n    };\n    var tooltip = function (params) {\n        var options = params.options;\n        var tooltip = options.tooltip, xField = options.xField, yField = options.yField;\n        if (!tooltip) {\n            set(options, 'tooltip', {\n                title: false,\n                items: [\n                    function (d) {\n                        return { name: d[xField], value: d[yField] };\n                    },\n                ],\n            });\n        }\n        return params;\n    };\n    return flow(init, transform, compare, tooltip, mark, transformOptions)(params);\n}\n", "var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Plot } from '../../base';\nimport { adaptor } from './adaptor';\nvar Funnel = /** @class */ (function (_super) {\n    __extends(Funnel, _super);\n    function Funnel() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        /**  */\n        _this.type = 'column';\n        return _this;\n    }\n    /**\n     *   \n     * \n     */\n    Funnel.getDefaultOptions = function () {\n        return {\n            type: 'view',\n            scale: { x: { padding: 0 } },\n            animate: { enter: { type: 'fadeIn' } },\n            axis: false,\n            shapeField: 'funnel',\n            label: {\n                position: 'inside',\n                transform: [{ type: 'contrastReverse' }],\n            },\n            children: [\n                {\n                    type: 'interval',\n                },\n            ],\n        };\n    };\n    /**\n     *   \n     */\n    Funnel.prototype.getDefaultOptions = function () {\n        return Funnel.getDefaultOptions();\n    };\n    /**\n     * \n     */\n    Funnel.prototype.getSchemaAdaptor = function () {\n        return adaptor;\n    };\n    return Funnel;\n}(Plot));\nexport { Funnel };\n", "import { flow, transformOptions } from '../../utils';\nimport { mark } from '../../adaptor';\n/**\n * @param chart\n * @param options\n */\nexport function adaptor(params) {\n    return flow(mark, transformOptions)(params);\n}\n", "var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Plot } from '../../base';\nimport { adaptor } from './adaptor';\nvar Line = /** @class */ (function (_super) {\n    __extends(Line, _super);\n    function Line() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        /**  */\n        _this.type = 'line';\n        return _this;\n    }\n    /**\n     *   \n     * \n     */\n    Line.getDefaultOptions = function () {\n        return {\n            type: 'view',\n            scale: {\n                y: { nice: true },\n            },\n            interaction: {\n                tooltip: {\n                    shared: true,\n                },\n            },\n            axis: {\n                y: { title: false },\n                x: { title: false },\n            },\n            // - \n            // animate: {\n            //   enter: { type: 'growInX' },\n            // },\n            children: [{ type: 'line' }],\n        };\n    };\n    /**\n     *   \n     */\n    Line.prototype.getDefaultOptions = function () {\n        return Line.getDefaultOptions();\n    };\n    /**\n     * \n     */\n    Line.prototype.getSchemaAdaptor = function () {\n        return adaptor;\n    };\n    return Line;\n}(Plot));\nexport { Line };\n", "var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { flow, transformOptions, isArray, set, get, fieldAdapter, isFunction } from '../../utils';\n/**\n * @param chart\n * @param options\n */\nexport function adaptor(params) {\n    /**\n     * @description  angleField  0 \n     * @link https://github.com/ant-design/ant-design-charts/issues/2324\n     */\n    var emptyData = function (params) {\n        var options = params.options;\n        var angleField = options.angleField, data = options.data, label = options.label, tooltip = options.tooltip, colorField = options.colorField;\n        var getColorValue = fieldAdapter(colorField);\n        if (isArray(data) && data.length > 0) {\n            var sum = data.reduce(function (a, b) { return a + b[angleField]; }, 0);\n            if (sum === 0) {\n                var normalization = data.map(function (item) {\n                    var _a;\n                    return (__assign(__assign({}, item), (_a = {}, _a[angleField] = 1, _a)));\n                });\n                set(options, 'data', normalization);\n                if (label) {\n                    var isColorField = colorField === get(label, 'text');\n                    set(options, 'label', __assign(__assign({}, label), (isColorField ? {} : { formatter: function () { return 0; } })));\n                }\n                if (tooltip !== false) {\n                    if (isFunction(tooltip)) {\n                        set(options, 'tooltip', function (arg, index, items) {\n                            var _a;\n                            return tooltip(__assign(__assign({}, arg), (_a = {}, _a[angleField] = 0, _a)), index, items.map(function (item) {\n                                var _a;\n                                return (__assign(__assign({}, item), (_a = {}, _a[angleField] = 0, _a)));\n                            }));\n                        });\n                    }\n                    else {\n                        set(options, 'tooltip', __assign(__assign({}, tooltip), { items: [\n                                function (arg, i, d) {\n                                    return {\n                                        name: getColorValue(arg, i, d),\n                                        value: 0,\n                                    };\n                                },\n                            ] }));\n                    }\n                }\n            }\n        }\n        return params;\n    };\n    return flow(emptyData, transformOptions)(params);\n}\n", "var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Plot } from '../../base';\nimport { adaptor } from './adaptor';\nvar Pie = /** @class */ (function (_super) {\n    __extends(Pie, _super);\n    function Pie() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        /**  */\n        _this.type = 'pie';\n        return _this;\n    }\n    /**\n     *   \n     * \n     */\n    Pie.getDefaultOptions = function () {\n        return {\n            type: 'view',\n            children: [{ type: 'interval' }],\n            coordinate: { type: 'theta' },\n            transform: [{ type: 'stackY', reverse: true }],\n            animate: { enter: { type: 'waveIn' } },\n        };\n    };\n    /**\n     *   \n     */\n    Pie.prototype.getDefaultOptions = function () {\n        return Pie.getDefaultOptions();\n    };\n    /**\n     * \n     */\n    Pie.prototype.getSchemaAdaptor = function () {\n        return adaptor;\n    };\n    return Pie;\n}(Plot));\nexport { Pie };\n", "import { flow, transformOptions } from '../../utils';\nimport { mark } from '../../adaptor';\n/**\n * @param chart\n * @param options\n */\nexport function adaptor(params) {\n    return flow(mark, transformOptions)(params);\n}\n", "var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Plot } from '../../base';\nimport { adaptor } from './adaptor';\nvar Scatter = /** @class */ (function (_super) {\n    __extends(Scatter, _super);\n    function Scatter() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        /**  */\n        _this.type = 'scatter';\n        return _this;\n    }\n    /**\n     *   \n     * \n     */\n    Scatter.getDefaultOptions = function () {\n        return {\n            axis: {\n                y: { title: false },\n                x: { title: false },\n            },\n            legend: {\n                size: false,\n            },\n            children: [{ type: 'point' }],\n        };\n    };\n    /**\n     *   \n     */\n    Scatter.prototype.getDefaultOptions = function () {\n        return Scatter.getDefaultOptions();\n    };\n    /**\n     * \n     */\n    Scatter.prototype.getSchemaAdaptor = function () {\n        return adaptor;\n    };\n    return Scatter;\n}(Plot));\nexport { Scatter };\n", "import { flow, transformOptions, get, set } from '../../utils';\n/**\n * @param chart\n * @param options\n */\nexport function adaptor(params) {\n    /**\n     * \n     */\n    var init = function (params) {\n        set(params, 'options.coordinate', { type: get(params, 'options.coordinateType', 'polar') });\n        return params;\n    };\n    return flow(init, transformOptions)(params);\n}\n", "var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { adaptor } from './adaptor';\nimport { Plot } from '../../base';\nvar Radar = /** @class */ (function (_super) {\n    __extends(Radar, _super);\n    function Radar() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        /**  */\n        _this.type = 'radar';\n        return _this;\n    }\n    /**\n     *   \n     * \n     */\n    Radar.getDefaultOptions = function () {\n        return {\n            axis: {\n                x: { grid: true, line: true },\n                y: { zIndex: 1, title: false, line: true, nice: true },\n            },\n            meta: { x: { padding: 0.5, align: 0 } },\n            interaction: { tooltip: { style: { crosshairsLineDash: [4, 4] } } },\n            children: [{ type: 'line' }],\n            //   polar  radar \n            coordinateType: 'polar',\n        };\n    };\n    /**\n     *   \n     */\n    Radar.prototype.getDefaultOptions = function () {\n        return Radar.getDefaultOptions();\n    };\n    /**\n     * \n     */\n    Radar.prototype.getSchemaAdaptor = function () {\n        return adaptor;\n    };\n    return Radar;\n}(Plot));\nexport { Radar };\n", "import { set, flow, transformOptions } from '../../utils';\n/**\n * @param chart\n * @param options\n */\nexport function adaptor(params) {\n    /**\n     * \n     */\n    var init = function (params) {\n        var options = params.options;\n        var yField = options.yField, children = options.children, _a = options.style, style = _a === void 0 ? {} : _a, _b = options.lineStyle, lineStyle = _b === void 0 ? {} : _b;\n        var open = yField[0], close = yField[1], high = yField[2], low = yField[3];\n        // \n        set(children, [0, 'yField'], [high, low]);\n        set(children, [0, 'style'], lineStyle);\n        // \n        set(children, [1, 'yField'], [open, close]);\n        set(children, [1, 'style'], style);\n        delete options.yField;\n        delete options.lineStyle;\n        delete options.style;\n        return params;\n    };\n    return flow(init, transformOptions)(params);\n}\n", "var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Plot } from '../../base';\nimport { adaptor } from './adaptor';\nexport var DEFAULT_COLORS = ['#26a69a', '#999999', '#ef5350'];\nvar Stock = /** @class */ (function (_super) {\n    __extends(Stock, _super);\n    function Stock() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        /**  */\n        _this.type = 'stock';\n        return _this;\n    }\n    /**\n     *   \n     * \n     */\n    Stock.getDefaultOptions = function () {\n        return {\n            type: 'view',\n            scale: {\n                color: {\n                    domain: [-1, 0, 1],\n                    range: DEFAULT_COLORS,\n                },\n                y: { nice: true },\n            },\n            children: [\n                // line shadow\n                {\n                    type: 'link',\n                },\n                {\n                    type: 'interval',\n                },\n            ],\n            axis: {\n                x: { title: false, grid: false },\n                y: { title: false, grid: true, gridLineDash: null },\n            },\n            animate: { enter: { type: 'scaleInY' } },\n            interaction: {\n                tooltip: {\n                    shared: true,\n                    marker: false,\n                    groupName: false,\n                    crosshairs: true,\n                },\n            },\n        };\n    };\n    /**\n     *   \n     */\n    Stock.prototype.getDefaultOptions = function () {\n        return Stock.getDefaultOptions();\n    };\n    /**\n     * \n     */\n    Stock.prototype.getSchemaAdaptor = function () {\n        return adaptor;\n    };\n    return Stock;\n}(Plot));\nexport { Stock };\n", "import { flow, transformOptions } from '../../utils';\nimport { mark } from '../../adaptor';\n/**\n * @param chart\n * @param options\n */\nexport function adaptor(params) {\n    return flow(mark, transformOptions)(params);\n}\n", "var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Plot } from '../../base';\nimport { adaptor } from './adaptor';\nvar TinyLine = /** @class */ (function (_super) {\n    __extends(TinyLine, _super);\n    function TinyLine() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        /**  */\n        _this.type = 'TinyLine';\n        return _this;\n    }\n    /**\n     *   \n     * \n     */\n    TinyLine.getDefaultOptions = function () {\n        return {\n            type: 'view',\n            children: [{ type: 'line', axis: false }],\n            // - \n            // animate: {\n            //   enter: { type: 'growInX', duration: 500 },\n            // },\n            padding: 0,\n            margin: 0,\n            tooltip: false,\n        };\n    };\n    /**\n     *   \n     */\n    TinyLine.prototype.getDefaultOptions = function () {\n        return TinyLine.getDefaultOptions();\n    };\n    /**\n     * \n     */\n    TinyLine.prototype.getSchemaAdaptor = function () {\n        return adaptor;\n    };\n    return TinyLine;\n}(Plot));\nexport { TinyLine };\n", "import { flow, transformOptions } from '../../utils';\nimport { mark } from '../../adaptor';\n/**\n * @param chart\n * @param options\n */\nexport function adaptor(params) {\n    return flow(mark, transformOptions)(params);\n}\n", "var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Plot } from '../../base';\nimport { adaptor } from './adaptor';\nvar TinyArea = /** @class */ (function (_super) {\n    __extends(TinyArea, _super);\n    function TinyArea() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        /**  */\n        _this.type = 'TinyArea';\n        return _this;\n    }\n    /**\n     *   \n     * \n     */\n    TinyArea.getDefaultOptions = function () {\n        return {\n            type: 'view',\n            animate: {\n                enter: { type: 'growInX', duration: 500 },\n            },\n            children: [{ type: 'area', axis: false }],\n            padding: 0,\n            margin: 0,\n            tooltip: false,\n        };\n    };\n    /**\n     *   \n     */\n    TinyArea.prototype.getDefaultOptions = function () {\n        return TinyArea.getDefaultOptions();\n    };\n    /**\n     * \n     */\n    TinyArea.prototype.getSchemaAdaptor = function () {\n        return adaptor;\n    };\n    return TinyArea;\n}(Plot));\nexport { TinyArea };\n", "import { flow, transformOptions } from '../../utils';\nimport { mark } from '../../adaptor';\n/**\n * @param chart\n * @param options\n */\nexport function adaptor(params) {\n    return flow(mark, transformOptions)(params);\n}\n", "var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Plot } from '../../base';\nimport { adaptor } from './adaptor';\nvar TinyColumn = /** @class */ (function (_super) {\n    __extends(TinyColumn, _super);\n    function TinyColumn() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        /**  */\n        _this.type = 'TinyColumn';\n        return _this;\n    }\n    /**\n     *   \n     * \n     */\n    TinyColumn.getDefaultOptions = function () {\n        return {\n            type: 'view',\n            children: [{ type: 'interval', axis: false }],\n            padding: 0,\n            margin: 0,\n            tooltip: false,\n        };\n    };\n    /**\n     *   \n     */\n    TinyColumn.prototype.getDefaultOptions = function () {\n        return TinyColumn.getDefaultOptions();\n    };\n    /**\n     * \n     */\n    TinyColumn.prototype.getSchemaAdaptor = function () {\n        return adaptor;\n    };\n    return TinyColumn;\n}(Plot));\nexport { TinyColumn };\n", "var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { flow, transformOptions } from '../../utils';\nimport { mark } from '../../adaptor';\n/**\n * @param chart\n * @param options\n */\nexport function adaptor(params) {\n    /**\n     * @description \n     */\n    var transformData = function (params) {\n        var options = params.options;\n        var percent = options.percent, _a = options.color, color = _a === void 0 ? [] : _a;\n        if (!percent)\n            return params;\n        var transformOption = {\n            scale: {\n                color: { range: color.length ? color : [] },\n            },\n            data: [1, percent],\n        };\n        Object.assign(options, __assign({}, transformOption));\n        return params;\n    };\n    return flow(transformData, mark, transformOptions)(params);\n}\n", "var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Plot } from '../../base';\nimport { adaptor } from './adaptor';\nvar TinyProgress = /** @class */ (function (_super) {\n    __extends(TinyProgress, _super);\n    function TinyProgress() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        /**  */\n        _this.type = 'TinyProgress';\n        return _this;\n    }\n    /**\n     *   \n     * \n     */\n    TinyProgress.getDefaultOptions = function () {\n        return {\n            type: 'view',\n            data: [],\n            margin: 0,\n            padding: 0,\n            tooltip: false,\n            children: [\n                {\n                    interaction: { tooltip: false },\n                    coordinate: { transform: [{ type: 'transpose' }] },\n                    type: 'interval',\n                    axis: false,\n                    legend: false,\n                    encode: { y: function (d) { return d; }, color: function (d, idx) { return idx; } },\n                },\n            ],\n        };\n    };\n    /**\n     *   \n     */\n    TinyProgress.prototype.getDefaultOptions = function () {\n        return TinyProgress.getDefaultOptions();\n    };\n    /**\n     * \n     */\n    TinyProgress.prototype.getSchemaAdaptor = function () {\n        return adaptor;\n    };\n    return TinyProgress;\n}(Plot));\nexport { TinyProgress };\n", "var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { flow, transformOptions, set } from '../../utils';\nimport { mark } from '../../adaptor';\n/**\n * @param chart\n * @param options\n */\nexport function adaptor(params) {\n    /**\n     * @description radius\n     */\n    var radius = function (params) {\n        var options = params.options;\n        var _a = options.radius, radius = _a === void 0 ? 0.8 : _a;\n        set(params, 'options.coordinate.innerRadius', radius);\n        return params;\n    };\n    /**\n     * @description \n     */\n    var transformData = function (params) {\n        var options = params.options;\n        var percent = options.percent, _a = options.color, color = _a === void 0 ? [] : _a;\n        if (!percent)\n            return params;\n        var transformOption = {\n            scale: {\n                color: { range: color.length ? color : [] },\n            },\n            data: [1, percent],\n        };\n        Object.assign(options, __assign({}, transformOption));\n        return params;\n    };\n    return flow(radius, transformData, mark, transformOptions)(params);\n}\n", "var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Plot } from '../../base';\nimport { adaptor } from './adaptor';\nvar TinyRing = /** @class */ (function (_super) {\n    __extends(TinyRing, _super);\n    function TinyRing() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        /**  */\n        _this.type = 'TinyRing';\n        return _this;\n    }\n    /**\n     * \n     * \n     */\n    TinyRing.getDefaultOptions = function () {\n        return {\n            type: 'view',\n            data: [],\n            margin: 0,\n            padding: 0,\n            coordinate: { type: 'theta' },\n            animate: { enter: { type: 'waveIn' } },\n            interaction: { tooltip: false },\n            tooltip: false,\n            children: [\n                {\n                    type: 'interval',\n                    axis: false,\n                    legend: false,\n                    encode: { y: function (d) { return d; }, color: function (d, idx) { return idx; } },\n                },\n            ],\n        };\n    };\n    /**\n     *   \n     */\n    TinyRing.prototype.getDefaultOptions = function () {\n        return TinyRing.getDefaultOptions();\n    };\n    /**\n     * \n     */\n    TinyRing.prototype.getSchemaAdaptor = function () {\n        return adaptor;\n    };\n    return TinyRing;\n}(Plot));\nexport { TinyRing };\n", "import { flow, transformOptions } from '../../utils';\n/**\n * @param chart\n * @param options\n */\nexport function adaptor(params) {\n    return flow(transformOptions)(params);\n}\n", "var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Plot } from '../../base';\nimport { adaptor } from './adaptor';\nvar Rose = /** @class */ (function (_super) {\n    __extends(Rose, _super);\n    function Rose() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        /**  */\n        _this.type = 'rose';\n        return _this;\n    }\n    /**\n     *   \n     * \n     */\n    Rose.getDefaultOptions = function () {\n        return {\n            type: 'view',\n            children: [{ type: 'interval' }],\n            coordinate: { type: 'polar' },\n            animate: { enter: { type: 'waveIn' } },\n        };\n    };\n    /**\n     *   \n     */\n    Rose.prototype.getDefaultOptions = function () {\n        return Rose.getDefaultOptions();\n    };\n    /**\n     * \n     */\n    Rose.prototype.getSchemaAdaptor = function () {\n        return adaptor;\n    };\n    return Rose;\n}(Plot));\nexport { Rose };\n", "export var START_KEY = '__start__';\nexport var END_KEY = '__end__';\nexport var WATERFALL_VALUE = '__waterfall_value__';\n", "var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { flow, transformOptions, fieldAdapter, isObject, set } from '../../utils';\nimport { mark } from '../../adaptor';\nimport { START_KEY, END_KEY, WATERFALL_VALUE } from './constants';\n/**\n * @param chart\n * @param options\n */\nexport function adaptor(params) {\n    /**\n     * @description \n     */\n    var transformData = function (params) {\n        var options = params.options;\n        var _a = options.data, data = _a === void 0 ? [] : _a, yField = options.yField;\n        if (!data.length)\n            return params;\n        data.reduce(function (prev, cur, index) {\n            var _a;\n            var getFieldData = fieldAdapter(yField);\n            var newCur = getFieldData(cur, index, data);\n            if (index === 0 || cur.isTotal) {\n                cur[START_KEY] = 0;\n                cur[END_KEY] = newCur;\n                cur[WATERFALL_VALUE] = newCur;\n            }\n            else {\n                var start = (_a = prev[END_KEY]) !== null && _a !== void 0 ? _a : getFieldData(prev, index, data);\n                cur[START_KEY] = start;\n                cur[END_KEY] = start + newCur;\n                cur[WATERFALL_VALUE] = prev[END_KEY];\n            }\n            return cur;\n        }, []);\n        Object.assign(options, { yField: [START_KEY, END_KEY] });\n        return params;\n    };\n    /**\n     * @description \n     */\n    var link = function (params) {\n        var options = params.options;\n        var _a = options.data, data = _a === void 0 ? [] : _a, xField = options.xField, children = options.children, linkStyle = options.linkStyle;\n        var linkData = __spreadArray([], data, true);\n        linkData.reduce(function (prev, cur, index) {\n            if (index > 0) {\n                cur.x1 = prev[xField];\n                cur.x2 = cur[xField];\n                cur.y1 = prev[END_KEY];\n            }\n            return cur;\n        }, []);\n        linkData.shift();\n        children.push({\n            type: 'link',\n            xField: ['x1', 'x2'],\n            yField: 'y1',\n            //  scrollbar  link  interval\n            zIndex: -1,\n            data: linkData,\n            style: __assign({ stroke: '#697474' }, linkStyle),\n            label: false,\n            tooltip: false,\n        });\n        return params;\n    };\n    /**\n    * @description \n    */\n    var connectorTransform = function (params) {\n        var options = params.options;\n        var _a = options.data, data = _a === void 0 ? [] : _a, connector = options.connector;\n        if (!connector)\n            return params;\n        set(options, 'connector', __assign({ xField: connector.reverse ? ['x2', 'x1'] : ['x1', 'x2'], yField: connector.reverse ? ['y2', 'y1'] : ['y1', 'y2'], data: [\n                {\n                    x1: data[0].x,\n                    y1: data[0][END_KEY],\n                    x2: data[data.length - 1].x,\n                    y2: data[data.length - 1][END_KEY],\n                },\n            ] }, (isObject(connector) ? connector : {})));\n        return params;\n    };\n    return flow(transformData, link, mark, connectorTransform, transformOptions)(params);\n}\n", "var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Plot } from '../../base';\nimport { adaptor } from './adaptor';\nimport { WATERFALL_VALUE } from './constants';\nvar Waterfall = /** @class */ (function (_super) {\n    __extends(Waterfall, _super);\n    function Waterfall() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        /**  */\n        _this.type = 'waterfall';\n        return _this;\n    }\n    Waterfall.getDefaultOptions = function () {\n        return {\n            type: 'view',\n            legend: null,\n            tooltip: {\n                field: WATERFALL_VALUE,\n                valueFormatter: '~s',\n                name: 'value',\n            },\n            axis: {\n                y: {\n                    title: null,\n                    labelFormatter: '~s',\n                },\n                x: {\n                    title: null,\n                },\n            },\n            children: [\n                {\n                    type: 'interval',\n                    interaction: {\n                        elementHighlight: {\n                            background: true,\n                        },\n                    },\n                },\n            ],\n        };\n    };\n    Waterfall.prototype.getDefaultOptions = function () {\n        return Waterfall.getDefaultOptions();\n    };\n    Waterfall.prototype.getSchemaAdaptor = function () {\n        return adaptor;\n    };\n    return Waterfall;\n}(Plot));\nexport { Waterfall };\n", "import { flow, transformOptions, assign, isNumber, divide, ceil, get } from '../../utils';\nimport { mark } from '../../adaptor';\n/**\n * @param chart\n * @param options\n */\nexport function adaptor(params) {\n    var transformHistogramConfig = function (params) {\n        var options = params.options;\n        var data = options.data, binNumber = options.binNumber, binWidth = options.binWidth, children = options.children, _a = options.channel, channel = _a === void 0 ? 'count' : _a;\n        var targetTransform = get(children, '[0].transform[0]', {});\n        if (isNumber(binWidth)) {\n            assign(targetTransform, { thresholds: ceil(divide(data.length, binWidth)), y: channel });\n            return params;\n        }\n        if (isNumber(binNumber)) {\n            assign(targetTransform, { thresholds: binNumber, y: channel });\n            return params;\n        }\n        return params;\n    };\n    return flow(transformHistogramConfig, mark, transformOptions)(params);\n}\n", "var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Plot } from '../../base';\nimport { adaptor } from './adaptor';\nvar Histogram = /** @class */ (function (_super) {\n    __extends(Histogram, _super);\n    function Histogram() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        /**  */\n        _this.type = 'Histogram';\n        return _this;\n    }\n    /**\n     *   \n     * \n     */\n    Histogram.getDefaultOptions = function () {\n        return {\n            type: 'view',\n            autoFit: true,\n            axis: {\n                y: { title: false },\n                x: { title: false },\n            },\n            children: [\n                {\n                    type: 'rect',\n                    transform: [{ type: 'binX', y: 'count' }],\n                    interaction: {\n                        elementHighlight: {\n                            background: true,\n                        },\n                    },\n                },\n            ],\n        };\n    };\n    /**\n     *   \n     */\n    Histogram.prototype.getDefaultOptions = function () {\n        return Histogram.getDefaultOptions();\n    };\n    /**\n     * \n     */\n    Histogram.prototype.getSchemaAdaptor = function () {\n        return adaptor;\n    };\n    return Histogram;\n}(Plot));\nexport { Histogram };\n", "import { flow, transformOptions } from '../../utils';\nimport { mark } from '../../adaptor';\n/**\n * @param chart\n * @param options\n */\nexport function adaptor(params) {\n    /**\n     * @description  tooltip \n     */\n    var tooltip = function (params) {\n        var options = params.options;\n        var _a = options.tooltip, tooltip = _a === void 0 ? {} : _a, colorField = options.colorField, sizeField = options.sizeField;\n        if (tooltip && !tooltip.field) {\n            tooltip.field = colorField || sizeField;\n        }\n        return params;\n    };\n    /**\n     * @description  mark \n     */\n    var transformMark = function (params) {\n        var options = params.options;\n        var mark = options.mark, children = options.children;\n        if (mark) {\n            children[0].type = mark;\n        }\n        return params;\n    };\n    return flow(tooltip, transformMark, mark, transformOptions)(params);\n}\n", "var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Plot } from '../../base';\nimport { adaptor } from './adaptor';\nvar Heatmap = /** @class */ (function (_super) {\n    __extends(Heatmap, _super);\n    function Heatmap() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        /**  */\n        _this.type = 'heatmap';\n        return _this;\n    }\n    Heatmap.getDefaultOptions = function () {\n        return {\n            type: 'view',\n            legend: null,\n            tooltip: {\n                valueFormatter: '~s',\n            },\n            axis: {\n                y: {\n                    title: null,\n                    grid: true,\n                },\n                x: {\n                    title: null,\n                    grid: true,\n                },\n            },\n            children: [\n                {\n                    type: 'point',\n                },\n            ],\n        };\n    };\n    Heatmap.prototype.getDefaultOptions = function () {\n        return Heatmap.getDefaultOptions();\n    };\n    Heatmap.prototype.getSchemaAdaptor = function () {\n        return adaptor;\n    };\n    return Heatmap;\n}(Plot));\nexport { Heatmap };\n", "import { flow, transformOptions } from '../../utils';\nimport { mark } from '../../adaptor';\n/**\n * @param chart\n * @param options\n */\nexport function adaptor(params) {\n    /**\n     * \n     */\n    var init = function (params) {\n        var _a = params.options.boxType, boxType = _a === void 0 ? 'box' : _a;\n        params.options.children[0].type = boxType;\n        return params;\n    };\n    return flow(init, mark, transformOptions)(params);\n}\n", "var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Plot } from '../../base';\nimport { adaptor } from './adaptor';\nvar Box = /** @class */ (function (_super) {\n    __extends(Box, _super);\n    function Box() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        /**  */\n        _this.type = 'box';\n        return _this;\n    }\n    /**\n     * \n     * \n     */\n    Box.getDefaultOptions = function () {\n        return {\n            type: 'view',\n            children: [{ type: 'box' }],\n            axis: {\n                y: { title: false },\n                x: { title: false },\n            },\n            //  tooltip\n            tooltip: {\n                items: [\n                    { name: 'min', channel: 'y' },\n                    { name: 'q1', channel: 'y1' },\n                    { name: 'q2', channel: 'y2' },\n                    { name: 'q3', channel: 'y3' },\n                    { name: 'max', channel: 'y4' },\n                ],\n            },\n        };\n    };\n    /**\n     *   \n     */\n    Box.prototype.getDefaultOptions = function () {\n        return Box.getDefaultOptions();\n    };\n    /**\n     * \n     */\n    Box.prototype.getSchemaAdaptor = function () {\n        return adaptor;\n    };\n    return Box;\n}(Plot));\nexport { Box };\n", "import { mark } from '../../adaptor';\nimport { flow, get, isArray, set, dataTransform, transformOptions } from '../../utils';\nvar defaultTransform = function (params) {\n    var options = params.options;\n    var data = options.data;\n    var transformLinks = [\n        {\n            type: 'custom',\n            callback: function (datum) { return ({ links: datum }); },\n        },\n    ];\n    if (isArray(data)) {\n        if (data.length > 0) {\n            set(options, 'data', {\n                value: data,\n                transform: transformLinks,\n            });\n        }\n        else {\n            delete options.children;\n        }\n    }\n    else if (get(data, 'type') === 'fetch' && get(data, 'value')) {\n        var transform = get(data, 'transform');\n        if (!isArray(transform)) {\n            set(data, 'transform', transformLinks);\n        }\n    }\n    return params;\n};\n/**\n * @param chart\n * @param options\n */\nexport function adaptor(params) {\n    return flow(dataTransform, defaultTransform, mark, transformOptions)(params);\n}\n", "var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Plot } from '../../base';\nimport { adaptor } from './adaptor';\nvar Sankey = /** @class */ (function (_super) {\n    __extends(Sankey, _super);\n    function Sankey() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        /**  */\n        _this.type = 'sankey';\n        return _this;\n    }\n    /**\n     *   \n     * \n     */\n    Sankey.getDefaultOptions = function () {\n        return { type: 'view', children: [{ type: 'sankey' }] };\n    };\n    /**\n     *   \n     */\n    Sankey.prototype.getDefaultOptions = function () {\n        return Sankey.getDefaultOptions();\n    };\n    /**\n     * \n     */\n    Sankey.prototype.getSchemaAdaptor = function () {\n        return adaptor;\n    };\n    return Sankey;\n}(Plot));\nexport { Sankey };\n", "var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { allCoordinateLayout } from '../../adaptor';\nimport { flow, transformOptions, map, set, get, isArray, includes, isNumber, mergeWithArrayCoverage, isNil, isString, } from '../../utils';\n// \nexport var DEFAULT_COLORS = ['#f0efff', '#5B8FF9', '#3D76DD'];\n/**\n * \n * 1[{ measures: [1,2], title: 'x' }, ...] -> [{ measures: 1, title: 'x', index: 0 }, { measures: 2, title: 'x', index: 1 },...]\n * 2[{ measures: 1, title: 'x' }, { measures: [2,3], title: 'x' }] ->\n * [{ measures: 1, title: 'x', index: 0 }, { measures: 2, title: 'x', index: 0 }, { measures: 3, title: 'x', index: 1 },...]\n * @param data \n * @param field \n * @param xField x \n * @param isSort \n * @returns [, ]\n */\nfunction getTransformData(data, field, xField, isSort) {\n    if (isSort === void 0) { isSort = true; }\n    var maxSize = 0;\n    var isArrayData = false;\n    var transformData = map(data, function (d) {\n        var _a, _b;\n        var fieldData = get(d, [field]);\n        // null undefined  Number(string)  NaN  \n        if (isNil(fieldData))\n            return [];\n        if (isString(fieldData)) {\n            var numberData = Number(fieldData);\n            if (isNaN(numberData))\n                return [];\n            return _a = {}, _a[xField] = d[xField], _a[field] = numberData, _a;\n        }\n        // \n        if (isArray(fieldData)) {\n            isArrayData = true;\n            maxSize = Math.max(maxSize, fieldData.length);\n            return map(isSort ? fieldData.sort(function (a, b) { return b - a; }) : fieldData, function (value, index) {\n                var _a;\n                return (_a = {},\n                    _a[xField] = d[xField],\n                    _a[field] = value,\n                    _a.index = index,\n                    _a);\n            });\n        }\n        //  min  1\n        maxSize = Math.max(1, maxSize);\n        return _b = {}, _b[xField] = d[xField], _b[field] = fieldData, _b;\n    }).flat();\n    //  measures  'measures'  'measures_0' \n    if (isArrayData) {\n        return [\n            transformData.map(function (item) { return (__assign({ index: 0 }, item)); }),\n            maxSize,\n        ];\n    }\n    return [transformData, maxSize];\n}\n/**\n * \n * @param maxSize \n * @param color \n * @returns string[]\n */\nfunction getFieldColor(maxSize, color) {\n    return new Array(maxSize).fill('').map(function (d, i) { return (isArray(color) ? color[i % color.length] : color); });\n}\n/**\n * @param chart\n * @param options\n */\nexport function adaptor(params) {\n    /**\n     * \n     */\n    var init = function (params) {\n        var options = params.options;\n        var color = options.color, _a = options.rangeField, rangeField = _a === void 0 ? 'ranges' : _a, _b = options.measureField, measureField = _b === void 0 ? 'measures' : _b, _c = options.targetField, targetField = _c === void 0 ? 'targets' : _c, _d = options.xField, xField = _d === void 0 ? 'title' : _d, mapField = options.mapField, data = options.data;\n        // \n        var _e = getTransformData(data, rangeField, xField), rangesData = _e[0], rangesMaxSize = _e[1];\n        var _f = getTransformData(data, measureField, xField, false), measuresData = _f[0], measuresMaxSize = _f[1];\n        var _g = getTransformData(data, targetField, xField, false), targetsData = _g[0], targetsMaxSize = _g[1];\n        // \n        var rangesColor = get(color, [rangeField], DEFAULT_COLORS[0]);\n        var measuresColor = get(color, [measureField], DEFAULT_COLORS[1]);\n        var targetsColor = get(color, [targetField], DEFAULT_COLORS[2]);\n        //  scale.color \n        var colors = [\n            getFieldColor(rangesMaxSize, rangesColor),\n            getFieldColor(measuresMaxSize, measuresColor),\n            getFieldColor(targetsMaxSize, targetsColor),\n        ].flat();\n        options.children = map(options.children, function (c, i) {\n            var datas = [rangesData, measuresData, targetsData][i];\n            var yField = [rangeField, measureField, targetField][i];\n            return __assign(__assign({}, c), { data: datas, encode: __assign(__assign({}, (c.encode || {})), { x: xField, y: yField, color: function (d) {\n                        var index = d.index;\n                        var mapString = isNumber(index) ? \"\".concat(yField, \"_\").concat(index) : yField;\n                        return mapField ? get(mapField, [yField, index], mapString) : mapString;\n                    } }) });\n        });\n        set(options, 'scale.color.range', colors);\n        // legend itemMarker \n        options.legend.color.itemMarker = function (d) {\n            if (mapField && includes(mapField === null || mapField === void 0 ? void 0 : mapField[targetField], d)) {\n                return 'line';\n            }\n            return (d === null || d === void 0 ? void 0 : d.replace(/\\_\\d$/, '')) === targetField ? 'line' : 'square';\n        };\n        return params;\n    };\n    /**\n     *  target\n     * @param params Params\n     * @returns params Params\n     */\n    var layoutAdaptor = function (params) {\n        var _a = params.options.transpose, transpose = _a === void 0 ? true : _a;\n        if (!transpose) {\n            set(params, 'options.children[2].shapeField', 'hyphen');\n        }\n        return params;\n    };\n    /**\n     * rangemeasuretarget \n     * @param params Params\n     * @returns params Params\n     */\n    var cfgAdaptor = function (params) {\n        var options = params.options;\n        var _a = options.range, range = _a === void 0 ? {} : _a, _b = options.measure, measure = _b === void 0 ? {} : _b, _c = options.target, target = _c === void 0 ? {} : _c, children = options.children;\n        options.children = [range, measure, target].map(function (c, i) { return mergeWithArrayCoverage(children[i], c); });\n        return params;\n    };\n    return flow(init, layoutAdaptor, cfgAdaptor, allCoordinateLayout, transformOptions)(params);\n}\n", "var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Plot } from '../../base';\nimport { adaptor, DEFAULT_COLORS } from './adaptor';\nvar Bullet = /** @class */ (function (_super) {\n    __extends(Bullet, _super);\n    function Bullet() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        /**  */\n        _this.type = 'bullet';\n        return _this;\n    }\n    /**\n     *   \n     * \n     */\n    Bullet.getDefaultOptions = function () {\n        return {\n            type: 'view',\n            scale: {\n                color: {\n                    range: DEFAULT_COLORS,\n                },\n            },\n            legend: {\n                color: {\n                    itemMarker: function (d) {\n                        return d === 'targets' ? 'line' : 'square';\n                    },\n                },\n            },\n            axis: {\n                y: { title: false },\n                x: { title: false },\n            },\n            children: [\n                {\n                    type: 'interval',\n                    style: { maxWidth: 30, zIndex: -2 },\n                    axis: { y: { grid: true, gridLineWidth: 2 } },\n                },\n                {\n                    type: 'interval',\n                    style: { maxWidth: 20, zIndex: -1 },\n                    transform: [{ type: 'stackY' }],\n                },\n                {\n                    type: 'point',\n                    encode: { size: 8, shape: 'line' },\n                },\n            ],\n            interaction: { tooltip: { shared: true } },\n            coordinate: { transform: [{ type: 'transpose' }] },\n        };\n    };\n    /**\n     *   \n     */\n    Bullet.prototype.getDefaultOptions = function () {\n        return Bullet.getDefaultOptions();\n    };\n    /**\n     * \n     */\n    Bullet.prototype.getSchemaAdaptor = function () {\n        return adaptor;\n    };\n    return Bullet;\n}(Plot));\nexport { Bullet };\n", "import { flow, transformOptions } from '../../utils';\nimport { mark } from '../../adaptor';\n/**\n * @param chart\n * @param options\n */\nexport function adaptor(params) {\n    /**\n     * \n     */\n    var init = function (params) {\n        var data = params.options.data;\n        params.options.data = {\n            value: data,\n        };\n        return params;\n    };\n    return flow(init, mark, transformOptions)(params);\n}\n", "var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Plot } from '../../base';\nimport { adaptor } from './adaptor';\nvar Gauge = /** @class */ (function (_super) {\n    __extends(Gauge, _super);\n    function Gauge() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        /**  */\n        _this.type = 'Gauge';\n        return _this;\n    }\n    /**\n     *   \n     * \n     */\n    Gauge.getDefaultOptions = function () {\n        return {\n            type: 'view',\n            legend: false,\n            children: [{ type: 'gauge' }],\n        };\n    };\n    /**\n     *   \n     */\n    Gauge.prototype.getDefaultOptions = function () {\n        return Gauge.getDefaultOptions();\n    };\n    /**\n     * \n     */\n    Gauge.prototype.getSchemaAdaptor = function () {\n        return adaptor;\n    };\n    return Gauge;\n}(Plot));\nexport { Gauge };\n", "import { flow, transformOptions, isNumber, set } from '../../utils';\nimport { mark } from '../../adaptor';\n/**\n * @param chart\n * @param options\n */\nexport function adaptor(params) {\n    /**\n     * \n     */\n    var init = function (params) {\n        var percent = params.options.percent;\n        if (isNumber(percent)) {\n            set(params, 'options.data', percent);\n            delete params.options.percent;\n        }\n        return params;\n    };\n    return flow(init, mark, transformOptions)(params);\n}\n", "var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Plot } from '../../base';\nimport { adaptor } from './adaptor';\nvar Liquid = /** @class */ (function (_super) {\n    __extends(Liquid, _super);\n    function Liquid() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        /**  */\n        _this.type = 'Liquid';\n        return _this;\n    }\n    /**\n     *   \n     * \n     */\n    Liquid.getDefaultOptions = function () {\n        return { type: 'view', children: [{ type: 'liquid' }] };\n    };\n    /**\n     *   \n     */\n    Liquid.prototype.getDefaultOptions = function () {\n        return Liquid.getDefaultOptions();\n    };\n    /**\n     * \n     */\n    Liquid.prototype.getSchemaAdaptor = function () {\n        return adaptor;\n    };\n    return Liquid;\n}(Plot));\nexport { Liquid };\n", "import { flow, transformOptions } from '../../utils';\nimport { mark } from '../../adaptor';\n/**\n * @param chart\n * @param options\n */\nexport function adaptor(params) {\n    return flow(mark, transformOptions)(params);\n}\n", "var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Plot } from '../../base';\nimport { adaptor } from './adaptor';\nvar WordCloud = /** @class */ (function (_super) {\n    __extends(WordCloud, _super);\n    function WordCloud() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        /**  */\n        _this.type = 'WordCloud';\n        return _this;\n    }\n    /**\n     *   \n     * \n     */\n    WordCloud.getDefaultOptions = function () {\n        return { type: 'view', legend: false, children: [{ type: 'wordCloud' }] };\n    };\n    /**\n     *   \n     */\n    WordCloud.prototype.getDefaultOptions = function () {\n        return WordCloud.getDefaultOptions();\n    };\n    /**\n     * \n     */\n    WordCloud.prototype.getSchemaAdaptor = function () {\n        return adaptor;\n    };\n    return WordCloud;\n}(Plot));\nexport { WordCloud };\n", "import { flow, transformOptions, dataTransform } from '../../utils';\nimport { mark } from '../../adaptor';\n/**\n * @param chart\n * @param options\n */\nexport function adaptor(params) {\n    return flow(dataTransform, mark, transformOptions)(params);\n}\n", "var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Plot } from '../../base';\nimport { adaptor } from './adaptor';\nvar Treemap = /** @class */ (function (_super) {\n    __extends(Treemap, _super);\n    function Treemap() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        /**  */\n        _this.type = 'treemap';\n        return _this;\n    }\n    Treemap.getDefaultOptions = function () {\n        return {\n            type: 'view',\n            children: [\n                {\n                    type: 'treemap',\n                },\n            ],\n        };\n    };\n    Treemap.prototype.getDefaultOptions = function () {\n        return Treemap.getDefaultOptions();\n    };\n    Treemap.prototype.getSchemaAdaptor = function () {\n        return adaptor;\n    };\n    return Treemap;\n}(Plot));\nexport { Treemap };\n", "var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport { flow, set, transformOptions, isNumber, get, fieldAdapter } from '../../utils';\nimport { mark } from '../../adaptor';\n/**\n * @param chart\n * @param options\n */\nexport function adaptor(params) {\n    /**\n     * coordinate \n     * @param params\n     */\n    var coordinate = function (params) {\n        var options = params.options;\n        var startAngle = options.startAngle, maxAngle = options.maxAngle, coordinate = options.coordinate;\n        // -90\n        var start = isNumber(startAngle) ? (startAngle / (2 * Math.PI)) * 360 : -90;\n        // maxAngle\n        var end = isNumber(maxAngle) ? ((Number(maxAngle) + start) / 180) * Math.PI : Math.PI;\n        set(params, ['options', 'coordinate'], __assign(__assign({}, coordinate), { endAngle: end, startAngle: startAngle !== null && startAngle !== void 0 ? startAngle : -Math.PI / 2 }));\n        return params;\n    };\n    /**\n     * tooltip \n     * @param params\n     */\n    var tooltip = function (params) {\n        var options = params.options;\n        var tooltip = options.tooltip, xField = options.xField, yField = options.yField;\n        var getXFieldData = fieldAdapter(xField);\n        var getYFieldData = fieldAdapter(yField);\n        if (!tooltip) {\n            set(options, 'tooltip', {\n                title: false,\n                items: [function (d, i, data) { return ({ name: getXFieldData(d, i, data), value: getYFieldData(d, i, data) }); }],\n            });\n        }\n        return params;\n    };\n    /**\n     * background \n     * @param params\n     */\n    var background = function (params) {\n        var options = params.options;\n        var markBackground = options.markBackground, children = options.children, scale = options.scale, coordinate = options.coordinate, xField = options.xField;\n        var domain = get(scale, 'y.domain', []);\n        if (markBackground) {\n            var style = markBackground.style, rest = __rest(markBackground, [\"style\"]);\n            children.unshift(__assign({ type: 'interval', xField: xField, yField: domain[domain.length - 1], style: __assign({ fillOpacity: 0.4, fill: '#e0e4ee' }, style), \n                // \n                coordinate: __assign(__assign({}, coordinate), { startAngle: -Math.PI / 2, endAngle: (3 / 2) * Math.PI }), animate: false }, rest));\n        }\n        return params;\n    };\n    return flow(coordinate, tooltip, background, mark, transformOptions)(params);\n}\n", "var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Plot } from '../../base';\nimport { adaptor } from './adaptor';\nvar RadialBar = /** @class */ (function (_super) {\n    __extends(RadialBar, _super);\n    function RadialBar() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        /**  */\n        _this.type = 'radial';\n        return _this;\n    }\n    /**\n     *   \n     * \n     */\n    RadialBar.getDefaultOptions = function () {\n        return {\n            type: 'view',\n            children: [{ type: 'interval' }],\n            coordinate: { type: 'radial', innerRadius: 0.1, outerRadius: 1, endAngle: Math.PI },\n            animate: { enter: { type: 'waveIn', duration: 800 } },\n            axis: {\n                y: {\n                    nice: true,\n                    labelAutoHide: true,\n                    labelAutoRotate: false,\n                },\n                x: {\n                    title: false,\n                    nice: true,\n                    labelAutoRotate: false,\n                    labelAutoHide: { type: 'equidistance', cfg: { minGap: 6 } },\n                },\n            },\n        };\n    };\n    /**\n     *   \n     */\n    RadialBar.prototype.getDefaultOptions = function () {\n        return RadialBar.getDefaultOptions();\n    };\n    /**\n     * \n     */\n    RadialBar.prototype.getSchemaAdaptor = function () {\n        return adaptor;\n    };\n    return RadialBar;\n}(Plot));\nexport { RadialBar };\n", "import { flow, dataTransform, transformOptions } from '../../utils';\n/**\n * @param chart\n * @param options\n */\nexport function adaptor(params) {\n    return flow(dataTransform, transformOptions)(params);\n}\n", "var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Plot } from '../../base';\nimport { adaptor } from './adaptor';\nvar CirclePacking = /** @class */ (function (_super) {\n    __extends(CirclePacking, _super);\n    function CirclePacking() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        /**  */\n        _this.type = 'CirclePacking';\n        return _this;\n    }\n    /**\n     *  circle packing \n     * \n     */\n    CirclePacking.getDefaultOptions = function () {\n        return {\n            legend: false,\n            type: 'view',\n            children: [\n                {\n                    type: 'pack',\n                    encode: {\n                        color: 'depth',\n                    }\n                },\n            ],\n        };\n    };\n    /**\n     *   \n     */\n    CirclePacking.prototype.getDefaultOptions = function () {\n        return CirclePacking.getDefaultOptions();\n    };\n    /**\n     * \n     */\n    CirclePacking.prototype.getSchemaAdaptor = function () {\n        return adaptor;\n    };\n    return CirclePacking;\n}(Plot));\nexport { CirclePacking };\n", "var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { flow, transformOptions, set } from '../../utils';\nimport { mark } from '../../adaptor';\nfunction withField(field1, field2) {\n    if (field1)\n        return field1;\n    return field2;\n}\n/**\n * @param chart\n * @param options\n */\nexport function adaptor(params) {\n    /**\n     * \n     */\n    var customTransform = function (params) {\n        var options = params.options;\n        var xField = options.xField, yField = options.yField, colorField = options.colorField, seriesField = options.seriesField, children = options.children;\n        var newChildren = children === null || children === void 0 ? void 0 : children.map(function (item) {\n            return __assign(__assign({}, item), { xField: xField, yField: yField, seriesField: withField(seriesField, colorField), colorField: withField(colorField, seriesField), data: item.type === 'density'\n                    ? {\n                        transform: [\n                            {\n                                type: 'kde',\n                                field: yField,\n                                groupBy: [xField, withField(seriesField, colorField)],\n                            },\n                        ],\n                    }\n                    : item.data });\n        }).filter(function (item) { return options.box || item.type === 'density'; });\n        set(options, 'children', newChildren);\n        // \n        delete options.box;\n        return params;\n    };\n    return flow(customTransform, mark, transformOptions)(params);\n}\n", "var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Plot } from '../../base';\nimport { adaptor } from './adaptor';\nvar Violin = /** @class */ (function (_super) {\n    __extends(Violin, _super);\n    function Violin() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        /**  */\n        _this.type = 'violin';\n        return _this;\n    }\n    /**\n     *   \n     * \n     */\n    Violin.getDefaultOptions = function () {\n        return {\n            type: 'view',\n            children: [\n                {\n                    type: 'density',\n                    sizeField: 'size',\n                    tooltip: false,\n                },\n                {\n                    type: 'boxplot',\n                    shapeField: 'violin',\n                    style: {\n                        opacity: 0.5,\n                        point: false,\n                    },\n                },\n            ],\n            animate: { enter: { type: 'fadeIn' } },\n        };\n    };\n    /**\n     *   \n     */\n    Violin.prototype.getDefaultOptions = function () {\n        return Violin.getDefaultOptions();\n    };\n    /**\n     * \n     */\n    Violin.prototype.getSchemaAdaptor = function () {\n        return adaptor;\n    };\n    return Violin;\n}(Plot));\nexport { Violin };\n", "var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { mark } from '../../adaptor';\nimport { flow, transformOptions, set, isArray, get, isPlainObject } from '../../utils';\nimport { HORIZONTAL_MARGIN, AXIS_LABEL_PADDING, VERTICAL_MARGIN } from './constants';\n/**\n * @param chart\n * @param options\n */\nexport function adaptor(params) {\n    /**  yFiled Array  */\n    var field = function (params) {\n        var options = params.options;\n        var yField = options.yField, children = options.children;\n        children.forEach(function (child, index) {\n            set(child, 'yField', yField[index]);\n        });\n        return params;\n    };\n    /** data  */\n    var data = function (params) {\n        var options = params.options;\n        var yField = options.yField, children = options.children, data = options.data;\n        if (isPlainObject(data))\n            return params;\n        var transformData = isArray(get(data, [0])) ? data : [data, data];\n        children.forEach(function (child, index) {\n            set(child, 'data', __spreadArray([], transformData[index].map(function (item) { return (__assign({ groupKey: yField[index] }, item)); }), true));\n        });\n        return params;\n    };\n    /**  Tooltip  */\n    var tooltip = function (params) {\n        var options = params.options;\n        var _a = options.yField, y1 = _a[0], y2 = _a[1], tooltip = options.tooltip;\n        if (!tooltip) {\n            set(options, 'tooltip', {\n                items: [\n                    {\n                        field: y1,\n                        value: y1,\n                    },\n                    {\n                        field: y2,\n                        value: y2,\n                    },\n                ],\n            });\n        }\n        return params;\n    };\n    /**  layout  */\n    var layout = function (params) {\n        var options = params.options;\n        var children = options.children, layout = options.layout, transform = options.coordinate.transform, _a = options.paddingBottom, paddingBottom = _a === void 0 ? AXIS_LABEL_PADDING : _a, _b = options.paddingLeft, paddingLeft = _b === void 0 ? AXIS_LABEL_PADDING : _b, axis = options.axis;\n        set(options, 'axisText', __assign(__assign({}, ((axis === null || axis === void 0 ? void 0 : axis.x) || {})), { layout: layout }));\n        var child1 = children[0], child2 = children[1];\n        if (layout === 'vertical') {\n            set(options, 'direction', 'col');\n            set(options, 'paddingLeft', paddingLeft);\n            set(options, 'coordinate.transform', transform.filter(function (item) { return item.type !== 'transpose'; }));\n            set(child1, 'paddingBottom', HORIZONTAL_MARGIN);\n            set(child2, 'paddingTop', HORIZONTAL_MARGIN);\n            set(child2, 'axis.x.position', 'top');\n            set(child2, 'scale.y.range', [0, 1]);\n        }\n        else {\n            set(options, 'paddingBottom', paddingBottom);\n            set(child1, 'scale.y.range', [0, 1]);\n            var _c = child1.paddingRight, paddingRight = _c === void 0 ? VERTICAL_MARGIN : _c;\n            var _d = child2.paddingLeft, paddingLeft_1 = _d === void 0 ? VERTICAL_MARGIN : _d;\n            set(child1, 'paddingRight', paddingRight);\n            set(child1, 'axis.x.position', 'right');\n            set(child2, 'paddingLeft', paddingLeft_1);\n        }\n        return params;\n    };\n    return flow(field, data, tooltip, layout, mark, transformOptions)(params);\n}\n", "var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Plot } from '../../base';\nimport { adaptor } from './adaptor';\nvar BidirectionalBar = /** @class */ (function (_super) {\n    __extends(BidirectionalBar, _super);\n    function BidirectionalBar() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        /**  */\n        _this.type = 'BidirectionalBar';\n        return _this;\n    }\n    BidirectionalBar.getDefaultOptions = function () {\n        return {\n            type: 'spaceFlex',\n            coordinate: { transform: [{ type: 'transpose' }] },\n            scale: {\n                y: { nice: true },\n            },\n            direction: 'row',\n            layout: 'horizontal',\n            legend: false,\n            axis: {\n                y: {\n                    title: false,\n                },\n                x: { title: false, label: false },\n            },\n            children: [{ type: 'interval' }, { type: 'interval' }],\n        };\n    };\n    BidirectionalBar.prototype.getDefaultOptions = function () {\n        return BidirectionalBar.getDefaultOptions();\n    };\n    BidirectionalBar.prototype.getSchemaAdaptor = function () {\n        return adaptor;\n    };\n    return BidirectionalBar;\n}(Plot));\nexport { BidirectionalBar };\n", "export var DefaultTransformKey;\n(function (DefaultTransformKey) {\n    DefaultTransformKey[\"color\"] = \"key\";\n    DefaultTransformKey[\"d\"] = \"path\";\n})(DefaultTransformKey || (DefaultTransformKey = {}));\n", "import { flow, isArray, set, transformOptions } from '../../utils';\nimport { DefaultTransformKey } from './type';\n/**\n * @param chart\n * @param options\n */\nexport function adaptor(params) {\n    /**\n     * \n     */\n    var init = function (params) {\n        var options = params.options;\n        var data = options.data, setsField = options.setsField, sizeField = options.sizeField;\n        if (isArray(data)) {\n            set(options, 'data', {\n                type: 'inline',\n                value: data,\n                transform: [\n                    {\n                        type: 'venn',\n                        sets: setsField,\n                        size: sizeField,\n                        as: [DefaultTransformKey.color, DefaultTransformKey.d],\n                    },\n                ],\n            });\n            set(options, 'colorField', DefaultTransformKey.color);\n            set(options, ['children', '0', 'encode', 'd'], DefaultTransformKey.d);\n        }\n        return params;\n    };\n    return flow(init, transformOptions)(params);\n}\n", "var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { Plot } from '../../base';\nimport { adaptor } from './adaptor';\nimport { DefaultTransformKey } from './type';\nvar Venn = /** @class */ (function (_super) {\n    __extends(Venn, _super);\n    function Venn() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        /**  */\n        _this.type = 'venn';\n        return _this;\n    }\n    /**\n     *   \n     * \n     */\n    Venn.getDefaultOptions = function () {\n        return {\n            type: 'view',\n            children: [{ type: 'path' }],\n            legend: {\n                color: { itemMarker: 'circle' },\n            },\n            encode: { color: DefaultTransformKey.color, d: DefaultTransformKey.d },\n        };\n    };\n    /**\n     *   \n     */\n    Venn.prototype.getDefaultOptions = function () {\n        return Venn.getDefaultOptions();\n    };\n    /**\n     * \n     */\n    Venn.prototype.getSchemaAdaptor = function () {\n        return adaptor;\n    };\n    return Venn;\n}(Plot));\nexport { Venn };\n", "import { flow, transformOptions, dataTransform } from '../../utils';\n/**\n * @param chart\n * @param options\n */\nexport function adaptor(params) {\n    return flow(dataTransform, transformOptions)(params);\n}\n", "var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { adaptor } from './adaptor';\nimport { Plot } from '../../base';\nvar Sunburst = /** @class */ (function (_super) {\n    __extends(Sunburst, _super);\n    function Sunburst() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        /**  */\n        _this.type = 'Sunburst';\n        return _this;\n    }\n    /**\n     *   \n     * \n     */\n    Sunburst.getDefaultOptions = function () {\n        return { type: 'view', children: [{ type: 'sunburst' }] };\n    };\n    /**\n     *   \n     */\n    Sunburst.prototype.getDefaultOptions = function () {\n        return Sunburst.getDefaultOptions();\n    };\n    /**\n     * \n     */\n    Sunburst.prototype.getSchemaAdaptor = function () {\n        return adaptor;\n    };\n    return Sunburst;\n}(Plot));\nexport { Sunburst };\n", "export * from './types';\nimport * as G2 from '@antv/g2';\nimport { Base } from './plots/base';\nimport { Area } from './plots/area';\nimport { Bar } from './plots/bar';\nimport { Column } from './plots/column';\nimport { DualAxes } from './plots/dual-axes';\nimport { Funnel } from './plots/funnel';\nimport { Line } from './plots/line';\nimport { Pie } from './plots/pie';\nimport { Scatter } from './plots/scatter';\nimport { Radar } from './plots/radar';\nimport { Stock } from './plots/stock';\nimport { TinyLine } from './plots/tiny-line';\nimport { TinyArea } from './plots/tiny-area';\nimport { TinyColumn } from './plots/tiny-column';\nimport { TinyProgress } from './plots/tiny-progress';\nimport { TinyRing } from './plots/tiny-ring';\nimport { Rose } from './plots/rose';\nimport { Waterfall } from './plots/waterfall';\nimport { Histogram } from './plots/histogram';\nimport { Heatmap } from './plots/heatmap';\nimport { Box } from './plots/box';\nimport { Sankey } from './plots/sankey';\nimport { Bullet } from './plots/bullet';\nimport { Gauge } from './plots/gauge';\nimport { Liquid } from './plots/liquid';\nimport { WordCloud } from './plots/wordCloud';\nimport { Treemap } from './plots/treemap';\nimport { RadialBar } from './plots/radial-bar';\nimport { CirclePacking } from './plots/circle-packing';\nimport { Violin } from './plots/violin';\nimport { BidirectionalBar } from './plots/bidirectional-bar';\nimport { Venn } from './plots/venn';\nimport { Mix } from './plots/mix';\nimport { Sunburst } from './plots/sunburst';\nexport { G2 };\nexport var Plots = {\n    Base: Base,\n    Line: Line,\n    Column: Column,\n    Pie: Pie,\n    Area: Area,\n    Bar: Bar,\n    DualAxes: DualAxes,\n    Funnel: Funnel,\n    Scatter: Scatter,\n    Radar: Radar,\n    Rose: Rose,\n    Stock: Stock,\n    TinyLine: TinyLine,\n    TinyArea: TinyArea,\n    TinyColumn: TinyColumn,\n    TinyProgress: TinyProgress,\n    TinyRing: TinyRing,\n    Waterfall: Waterfall,\n    Histogram: Histogram,\n    Heatmap: Heatmap,\n    Box: Box,\n    Sankey: Sankey,\n    Bullet: Bullet,\n    Gauge: Gauge,\n    Liquid: Liquid,\n    WordCloud: WordCloud,\n    Treemap: Treemap,\n    RadialBar: RadialBar,\n    CirclePacking: CirclePacking,\n    Violin: Violin,\n    BidirectionalBar: BidirectionalBar,\n    Venn: Venn,\n    Mix: Mix,\n    Sunburst: Sunburst,\n};\n", "var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport React, { forwardRef, useMemo } from 'react';\nimport { BaseChart } from '../components/base';\nimport useConfig from '../hooks/useConfig';\nimport { flow } from '../util';\nimport scale from './scale';\nexport function makeChartComp(chartType) {\n    var configKey = chartType.charAt(0).toLowerCase() + chartType.slice(1);\n    return forwardRef(function (props, ref) {\n        var _a, _b;\n        var config = useConfig();\n        var configKey = useMemo(function () { return chartType.charAt(0).toLowerCase() + chartType.slice(1); }, [chartType]);\n        var flowProps = flow([scale])(props);\n        var mergedConfig = __assign(__assign({}, ((_a = config === null || config === void 0 ? void 0 : config.common) !== null && _a !== void 0 ? _a : {})), ((_b = config === null || config === void 0 ? void 0 : config[configKey]) !== null && _b !== void 0 ? _b : {}));\n        return React.createElement(BaseChart, __assign({}, mergedConfig, flowProps, { chartType: chartType, ref: ref }));\n    });\n}\n", "import { useContext } from 'react';\nimport { ConfigContext } from '../context';\nexport default function useConfig() {\n    return useContext(ConfigContext);\n}\n", "import { createContext } from 'react';\nexport var ConfigContext = createContext({});\n", "var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { get, isArray, isString, set } from '.';\nexport default function scale(props) {\n    var yField = props.yField, data = props.data;\n    var noDomainMax = isArray(data) && data.length > 0 && isString(yField) && !get(props, 'scale.y.domainMax');\n    var newProps = Object.isFrozen(props) ? __assign({}, props) : props;\n    if (noDomainMax && data.reduce(function (acc, item) { return acc + item[yField]; }, 0) === 0) {\n        set(newProps, 'scale.y.domainMax', 1);\n    }\n    else if (noDomainMax && data.reduce(function (acc, item) { return acc + item[yField]; }, 0) !== 0) {\n        set(newProps, 'scale.y.domainMax', undefined);\n    }\n    return newProps;\n}\n", "import { makeChartComp } from '../../util/makeChartComp';\nvar AreaChart = makeChartComp('Area');\nexport default AreaChart;\n", "import { makeChartComp } from '../../util/makeChartComp';\nvar BarChart = makeChartComp('Bar');\nexport default BarChart;\n", "import { makeChartComp } from '../../util/makeChartComp';\nvar ColumnChart = makeChartComp('Column');\nexport default ColumnChart;\n", "var __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport React from 'react';\nimport { ConfigContext } from '../../context';\nexport default function ConfigProvider(_a) {\n    var children = _a.children, value = __rest(_a, [\"children\"]);\n    return React.createElement(ConfigContext.Provider, { value: value }, children);\n}\n", "import { makeChartComp } from '../../util/makeChartComp';\nvar DualAxesChart = makeChartComp('DualAxes');\nexport default DualAxesChart;\n", "import { makeChartComp } from '../../util/makeChartComp';\nvar FunnelChart = makeChartComp('Funnel');\nexport default FunnelChart;\n", "import { makeChartComp } from '../../util/makeChartComp';\nvar LineChart = makeChartComp('Line');\nexport default LineChart;\n", "import { makeChartComp } from '../../util/makeChartComp';\nvar PieChart = makeChartComp('Pie');\nexport default PieChart;\n", "import { makeChartComp } from '../../util/makeChartComp';\nvar ScatterChart = makeChartComp('Scatter');\nexport default ScatterChart;\n", "import { makeChartComp } from '../../util/makeChartComp';\nvar RadarChart = makeChartComp('Radar');\nexport default RadarChart;\n", "import { makeChartComp } from '../../../util/makeChartComp';\nvar TinyLineChart = makeChartComp('TinyLine');\nexport default TinyLineChart;\n", "import { makeChartComp } from '../../../util/makeChartComp';\nvar TinyAreaChart = makeChartComp('TinyArea');\nexport default TinyAreaChart;\n", "import { makeChartComp } from '../../../util/makeChartComp';\nvar TinyLineChart = makeChartComp('TinyColumn');\nexport default TinyLineChart;\n", "import { makeChartComp } from '../../../util/makeChartComp';\nvar TinyProgressChart = makeChartComp('TinyProgress');\nexport default TinyProgressChart;\n", "import { makeChartComp } from '../../../util/makeChartComp';\nvar TinyRingChart = makeChartComp('TinyRing');\nexport default TinyRingChart;\n", "import Line from './line';\nimport Area from './area';\nimport Column from './column';\nimport Progress from './progress';\nimport Ring from './ring';\nexport var Tiny = { Line: Line, Area: Area, Column: Column, Progress: Progress, Ring: Ring };\n", "import { makeChartComp } from '../../util/makeChartComp';\nvar RoseChart = makeChartComp('Rose');\nexport default RoseChart;\n", "import { makeChartComp } from '../../util/makeChartComp';\nvar WaterfallChart = makeChartComp('Waterfall');\nexport default WaterfallChart;\n", "import { makeChartComp } from '../../util/makeChartComp';\nvar HistogramChart = makeChartComp('Histogram');\nexport default HistogramChart;\n", "import { makeChartComp } from '../../util/makeChartComp';\nvar HeatmapChart = makeChartComp('Heatmap');\nexport default HeatmapChart;\n", "import { makeChartComp } from '../../util/makeChartComp';\nvar BoxChart = makeChartComp('Box');\nexport default BoxChart;\n", "import { makeChartComp } from '../../util/makeChartComp';\nvar SankeyChart = makeChartComp('Sankey');\nexport default SankeyChart;\n", "import { makeChartComp } from '../../util/makeChartComp';\nvar StockChart = makeChartComp('Stock');\nexport default StockChart;\n", "import { makeChartComp } from '../../util/makeChartComp';\nvar BulletChart = makeChartComp('Bullet');\nexport default BulletChart;\n", "import { makeChartComp } from '../../util/makeChartComp';\nvar GaugeChart = makeChartComp('Gauge');\nexport default GaugeChart;\n", "import { makeChartComp } from '../../util/makeChartComp';\nvar LiquidChart = makeChartComp('Liquid');\nexport default LiquidChart;\n", "import { makeChartComp } from '../../util/makeChartComp';\nvar WordCloudChart = makeChartComp('WordCloud');\nexport default WordCloudChart;\n", "import { makeChartComp } from '../../util/makeChartComp';\nvar TreemapChart = makeChartComp('Treemap');\nexport default TreemapChart;\n", "import { makeChartComp } from '../../util/makeChartComp';\nvar RadialBar = makeChartComp('RadialBar');\nexport default RadialBar;\n", "import { makeChartComp } from '../../util/makeChartComp';\nvar CirclePackingChart = makeChartComp('CirclePacking');\nexport default CirclePackingChart;\n", "import { makeChartComp } from '../../util/makeChartComp';\nvar ViolinChart = makeChartComp('Violin');\nexport default ViolinChart;\n", "import { makeChartComp } from '../../util/makeChartComp';\nvar BidirectionalBarChart = makeChartComp('BidirectionalBar');\nexport default BidirectionalBarChart;\n", "import { makeChartComp } from '../../util/makeChartComp';\nvar VennChart = makeChartComp('Venn');\nexport default VennChart;\n", "import { makeChartComp } from '../../util/makeChartComp';\nvar MixChart = makeChartComp('Mix');\nexport default MixChart;\n", "import { makeChartComp } from '../../util/makeChartComp';\nvar SunburstChart = makeChartComp('Sunburst');\nexport default SunburstChart;\n"],
  "mappings": "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",
  "names": ["x", "i", "min", "max", "x", "size", "min", "max", "range", "i", "c", "mid", "weight", "area", "kernel", "pdf", "last", "Chart", "Group", "extend", "value", "value", "value", "d", "value", "value", "field", "c", "array", "i", "d", "mark", "y1", "a", "a", "f", "d", "x", "left", "a", "mid", "right", "center", "i", "x", "values", "valueof", "value", "index", "blur", "values", "T", "w", "h", "y", "n", "x", "sum", "i", "s", "values", "valueof", "count", "value", "index", "values", "valueof", "count", "mean", "sum", "value", "index", "values", "valueof", "values", "valueof", "min", "max", "value", "index", "x", "p", "i", "y", "n", "key", "value", "value", "x", "values", "values", "reduce", "values", "map", "reduce", "i", "groups", "keyof", "index", "value", "group", "values", "f", "index", "d", "i", "c", "a", "x", "values", "reduce", "key", "constant", "x", "count", "error", "reverse", "n", "ticks", "i", "count", "values", "value", "i", "n", "x", "values", "x0", "x1", "max", "step", "m", "a", "bin", "constant", "values", "valueof", "max", "value", "index", "values", "valueof", "max", "maxIndex", "index", "value", "values", "valueof", "min", "value", "index", "values", "valueof", "min", "minIndex", "index", "value", "array", "k", "left", "right", "n", "m", "s", "i", "values", "max", "defined", "value", "values", "p", "valueof", "n", "i", "values", "p", "valueof", "numbers", "i", "index", "j", "values", "min", "max", "c", "d", "values", "valueof", "count", "sum", "value", "index", "values", "valueof", "array", "n", "i", "range", "shuffle", "array", "m", "i", "values", "valueof", "sum", "value", "index", "x", "a", "a", "x", "array", "x", "i", "get", "mid", "e10", "e5", "e2", "tickIncrement", "count", "error", "tickStep", "min", "max", "count", "d", "tickIncrement", "field", "date", "i", "d", "ceil", "range", "ticks", "month", "year", "month", "year", "year", "month", "week", "day", "hour", "minute", "second", "millisecond", "count", "interval", "i", "tickStep", "min", "max", "count", "r", "x", "f", "x", "log", "pow", "a", "log", "pow", "r", "min", "max", "rangeOf", "normalizeDomain", "transform", "clamp", "round", "normalize", "interpolate", "p", "m", "h", "s", "l", "a", "r", "colorString", "value", "a", "c2", "values", "i", "r", "b", "second", "minute", "hour", "day", "week", "month", "year", "map", "value", "keyof", "InternMap", "i", "value", "d", "x", "y", "r", "array", "min", "a", "d", "n", "range", "round", "sum", "value", "InternMap", "i", "bandWidth", "offset", "x", "ticks", "a", "tick", "count", "n", "tickIncrement", "i", "Constant", "x", "a", "n", "n", "m", "i", "k", "r", "range", "w", "count", "s", "c", "l", "score", "ticks", "x", "min", "max", "range", "normalize", "interpolate", "reverse", "i", "x", "n", "Continuous", "min", "max", "transform", "clamp", "round", "Continuous", "reverse", "i", "value", "index", "range", "nice", "min", "max", "a", "d", "x", "Continuous", "transform", "x", "index", "y", "range", "a", "n", "pow", "log", "r", "min", "max", "i", "ticks", "p", "k", "count", "Continuous", "min", "max", "nice", "min", "max", "range", "x0", "x1", "i", "y", "a", "quantileSorted", "i", "n", "a", "range", "y", "a", "min", "max", "min", "max", "count", "r", "ticks", "d", "Continuous", "transform", "x", "min", "max", "normalize", "Sequential", "rangeOf", "normalizeDomain", "d2", "x", "Diverging", "__decorate", "index", "mark", "i", "scale", "Constant", "name", "identity", "x", "compose", "value", "exclude", "compute", "map", "value", "transform", "d", "p", "prefixes", "x", "size", "d", "value", "dist", "value", "array", "i", "array", "array", "i", "comb", "groupBy", "mark", "k", "column", "i", "groups", "group", "value", "scale", "f", "s", "groupBy", "reverse", "mark", "Y1", "groups", "i", "y", "transform", "mark", "x", "y", "groupBy", "year", "month", "day", "hour", "mark", "tooltip", "T", "d", "i", "mark", "x", "mark", "y", "mark", "mark", "size", "mark", "values", "value", "i", "mark", "mark", "mark", "mark", "y1", "mark", "x1", "mark", "data", "index", "mark", "data", "index", "mark", "tooltip", "channel", "field", "value", "d", "mark", "mark", "__rest", "x0", "y0", "x", "y", "mark", "k", "mark", "d", "mark", "gradient", "groupBy", "reverse", "__rest", "mark", "scale", "groups", "i", "groupBy", "reverse", "mark", "k", "groups", "I", "i", "i", "groupBy", "mark", "tooltip", "x", "__rest", "k", "groups", "I", "rangeOf", "value", "scale", "a", "mark", "mark", "scale", "rangeOf", "mark", "scale", "rangeOf", "groupBy", "mark", "x", "__rest", "k", "groups", "i", "I", "maxY", "m", "offset", "groupBy", "mark", "groups", "i", "max", "_", "last", "i", "max", "min", "groupBy", "mark", "groups", "__rest", "__rest", "d", "mean", "max", "count", "first", "last", "sum", "min", "median", "i", "groupBy", "__rest", "mark", "groups", "field", "I", "Group", "__rest", "groupBy", "mark", "Group", "Group", "Group", "i", "values", "mark", "reverse", "slice", "scale", "T", "normalizeReducer", "s", "field", "d", "createReducer", "i", "mark", "x", "x1", "y1", "y2", "x0", "y0", "x", "y", "maxY", "direction", "count", "size", "m", "x", "y", "i", "mark", "values", "min", "max", "__rest", "groupBy", "mark", "i", "d", "bin", "x0", "x1", "key", "k", "x", "i", "y", "every", "a", "area", "size", "f", "i", "size", "groupBy", "mark", "groups", "value", "mark", "i", "f", "encode", "x", "constant", "max", "min", "x", "pi", "tau", "epsilon", "i", "n", "d", "k", "Path", "x", "y", "x1", "y1", "y2", "r", "x0", "y0", "l", "cw", "w", "h", "shape", "d", "Path", "d", "x0", "y0", "x1", "y1", "y2", "cw", "x00", "y00", "d2", "r", "max", "path", "min", "a", "slice", "x", "Linear", "x", "y", "p", "x", "y", "defined", "path", "line", "i", "n", "d", "x0", "y0", "y1", "x1", "defined", "path", "area", "i", "k", "n", "d", "Radial", "a", "r", "l", "c", "a", "c", "x0", "x1", "y0", "y1", "sqrt3", "sqrt3", "x", "y", "x", "y", "x", "y", "x0", "y0", "x", "y", "x0", "y0", "i", "beta", "point", "x", "y", "custom", "tension", "x", "y", "point", "custom", "tension", "x", "y", "point", "custom", "tension", "point", "x", "y", "x1", "y1", "x2", "y2", "a", "n", "m", "custom", "alpha", "x", "y", "point", "custom", "alpha", "x", "y", "point", "custom", "alpha", "x", "y", "x", "y2", "p", "h", "point", "x0", "y0", "x1", "y1", "y", "x", "y", "n", "i", "m", "a", "r", "x", "y", "x1", "polar", "d", "document", "i", "d", "id", "className", "merge", "group", "T", "value", "Image", "lower", "upper", "prettyNumber", "n", "value", "path", "p", "size", "angle", "center", "mode", "from", "tpShape", "min", "max", "i", "gradient", "a", "p2", "y", "y1", "a2", "a3", "epsilon", "value", "center", "x0", "y0", "y2", "document", "value", "__rest", "p2", "x", "y", "y1", "center", "path", "first", "last", "defaults", "defaultRadius", "stroke", "d", "i", "Rect", "p2", "newP1", "newP2", "__rest", "document", "value", "defaults", "index", "p2", "newP1", "newP2", "render", "d2", "document", "defined", "m", "p", "gradient", "d", "__rest", "value", "defaults", "size", "transform", "stroke", "center", "x", "y", "Line", "__rest", "path", "a", "x0", "x1", "document", "value", "defaults", "__rest", "i", "point", "x", "y", "r", "rect", "cross", "d", "path", "stroke", "__rest", "s", "getRadius", "mode", "value", "size", "x0", "y0", "y2", "a", "Color", "__rest", "path", "document", "defaults", "transform", "r", "Color", "Color", "Color", "Color", "Color", "Color", "Color", "mode", "__rest", "document", "value", "defaults", "transform", "r", "getRadius", "Circle", "Circle", "Color", "Color", "Color", "Color", "Color", "Line", "Color", "Color", "Point", "Color", "Color", "Color", "Color", "Color", "__rest", "document", "value", "defaults", "transform", "path", "shape", "x0", "y0", "x1", "y1", "x", "y", "right", "left", "angle", "min", "shape", "left", "path", "p2", "offset", "className", "transform", "rotate", "x", "y", "x0", "y0", "__rest", "d", "controlPoints", "rect", "Text", "value", "defaults", "rotate", "transform", "x0", "y0", "r", "offset", "shape", "min", "max", "className", "x0", "y0", "transform", "__rest", "size", "x", "y", "value", "defaults", "value", "defaults", "rotate", "transform", "x0", "y0", "n", "segmentation", "defined", "m", "mid", "i", "y1", "y0", "document", "Curve", "gradient", "d", "__rest", "value", "defaults", "transform", "path", "Y1", "Y0", "center", "Curve", "Smooth", "__rest", "Curve", "HVH", "Curve", "VH", "Curve", "HV", "Curve", "Smooth", "__rest", "document", "value", "defaults", "transform", "path", "path", "center", "a", "__rest", "document", "value", "defaults", "transform", "__rest", "document", "value", "defaults", "transform", "path", "center", "scale", "x", "value", "y", "d", "i", "f", "offset", "x0", "y0", "index", "Image", "document", "value", "defaults", "__rest", "size", "transform", "x0", "y0", "w", "h", "x", "y", "path", "center", "p", "Polygon", "document", "value", "defaults", "__rest", "transform", "p2", "path", "center", "__rest", "document", "value", "defaults", "transform", "getPath", "path", "center", "x", "y", "document", "value", "defaults", "transform", "stroke", "__rest", "getPath", "p", "size", "path", "center", "x", "y", "a", "document", "value", "defaults", "transform", "stroke", "__rest", "document", "getPath", "d", "center", "getTransform", "transform", "Line", "__rest", "value", "defaults", "size", "path", "x", "y", "r", "inferConnectorPath", "d", "x0", "y0", "x1", "y1", "X0", "X1", "Y0", "Y1", "__rest", "value", "defaults", "transform", "value", "l", "Y1", "Y0", "p", "i", "mid", "point", "rotate", "value", "x0", "y0", "x1", "y1", "w", "h", "y", "center", "angle", "rotate", "point", "x", "append", "offset", "d", "p", "inferDefaultStyle", "center", "angle", "x0", "y0", "x1", "y1", "sign", "radiusOf", "value", "angleOf", "offset", "rotate", "y2", "x", "y", "inferDefaultStyle", "d", "n", "i", "y", "labels", "value", "__rest", "center", "radiusOf", "angle", "angleOf", "sign", "points", "left", "d", "right", "i", "value", "__rest", "x0", "y0", "center", "angle", "sign", "getDefaultStyle", "value", "render", "p", "x", "y", "className", "__rest", "rotate", "transform", "defaultStyle", "Color", "__rest", "document", "value", "defaults", "stroke", "d", "Path", "Color", "Hollow", "Color", "document", "value", "defaults", "transform", "__rest", "first", "p", "path", "x", "y", "max", "value", "cache", "gradient", "r", "c", "c", "x", "y", "gradient", "r", "min", "max", "blur", "value", "i", "offset", "ctx", "r", "k", "gradient", "blur", "__rest", "document", "value", "defaults", "transform", "p", "min", "max", "options", "ctx", "Shape", "render", "__rest", "x0", "y0", "min", "max", "x", "path", "left", "c", "y", "group", "document", "e", "x", "y", "r", "rect", "w", "diamond", "triangle", "h", "x0", "y0", "shape", "__rest", "distance", "count", "document", "size", "point2", "center", "angle", "document", "index", "roundPath", "y", "offset", "i", "x", "document", "scale", "__awaiter", "mark", "__rest", "range", "reverse", "e", "bandWidth", "scale", "x", "Rect", "index", "value", "Y1", "d", "w", "i", "s", "width", "offset", "x0", "x1", "x2", "y1", "y2", "p2", "shape", "Rect", "index", "scale", "value", "X1", "Y1", "i", "p2", "d", "shape", "Line", "line", "index", "scale", "value", "x", "y", "i", "group", "I", "mark", "shape", "Point", "Line", "Circle", "index", "scale", "value", "X1", "Y1", "offset", "i", "x", "y", "r", "a", "p2", "shape", "Text", "cartesian", "index", "scale", "value", "offset", "i", "p", "shape", "Rect", "index", "scale", "value", "x", "y", "i", "x1", "y1", "p2", "d", "shape", "Smooth", "HVH", "VH", "HV", "Area", "index", "scale", "value", "Y1", "x", "y", "i", "group", "l", "shape", "Smooth", "Link", "index", "scale", "value", "X1", "Y1", "offset", "i", "shape", "Image", "cartesian", "index", "scale", "value", "offset", "i", "p", "shape", "Polygon", "index", "scale", "value", "i", "x", "y", "shape", "Box", "index", "scale", "value", "Y1", "Y2", "i", "offset", "x", "q1", "median", "q3", "d", "shape", "Vector", "index", "scale", "value", "R", "i", "angle", "s", "a", "shape", "Line", "index", "scale", "value", "offset", "i", "p2", "d", "shape", "Line", "index", "scale", "value", "offset", "i", "p2", "d", "shape", "Connector", "Link", "value", "scale", "i", "offset", "index", "x", "y", "x1", "x2", "y1", "y2", "p2", "d", "shape", "Rect", "shape", "Rect", "shape", "Rect", "d", "n", "constant", "x", "a", "d", "id", "y0", "y1", "link", "x0", "x1", "sort", "iterations", "constant", "nodes", "links", "n", "x", "maxDepth", "i", "kx", "column", "ky", "c", "y", "w", "value", "dy", "sourceLinks", "targetLinks", "Sankey", "iterations", "x0", "x1", "y0", "y1", "offset", "tooltip", "name", "defaults", "sub", "d", "Sankey", "scale", "tooltip", "__rest", "nodeState", "linkState", "a", "DEFAULT_OPTIONS", "Arc", "y", "weight", "id", "sortBy", "n", "e", "d", "size", "i", "maxY", "edges", "x", "value", "offset", "w", "Arc", "DEFAULT_LAYOUT_OPTIONS", "DEFAULT_NODE_OPTIONS", "DEFAULT_LINK_OPTIONS", "DEFAULT_LABEL_OPTIONS", "scale", "tooltip", "d", "__rest", "Arc", "shape", "Path", "Hollow", "index", "scale", "value", "a", "x", "c", "y", "left", "right", "x0", "x1", "count", "sum", "i", "index", "i", "index", "i", "n", "index", "find_default", "index", "value", "sum", "i", "k", "a", "c", "i", "n", "i", "n", "d", "find_default", "f", "constant_default", "x", "a", "s", "array_default", "x", "array", "m", "i", "i", "n", "p", "e", "a", "x1", "y1", "y2", "l", "c", "a2", "a3", "c2", "c3", "d2", "A", "r", "a", "c", "x", "a2", "y", "d2", "Node", "circle", "n", "array_default", "i", "k", "d", "pack", "x", "constant_default", "k", "i", "n", "r", "e", "x0", "y0", "x1", "y1", "i", "n", "k", "round", "partition", "n", "dy", "x0", "y0", "x1", "y1", "x", "defaultId", "d", "id", "path", "n", "i", "normalize", "node", "x", "k", "defaultSeparation", "a", "i", "w", "n", "left", "right", "s", "kx", "ky", "x", "x0", "y0", "x1", "y1", "i", "n", "k", "x0", "y0", "x1", "y1", "n", "value", "custom", "x", "round", "p", "x0", "y0", "x1", "y1", "x", "constant_default", "x0", "y0", "x1", "y1", "i", "n", "sum", "partition", "value", "k", "mid", "x0", "y0", "x1", "y1", "custom", "x0", "y0", "x1", "y1", "i", "n", "m", "value", "x", "path", "name", "value", "d", "a", "d", "DEFAULT_LABEL_OPTIONS", "scale", "tooltip", "__rest", "GET_DEFAULT_LAYOUT_OPTIONS", "a", "GET_DEFAULT_OPTIONS", "d", "DEFAULT_LABEL_OPTIONS", "DEFAULT_TOOLTIP_OPTIONS", "value", "Pack", "scale", "tooltip", "__rest", "DEFAULT_OPTIONS", "min", "i", "max", "mark", "y", "x", "I", "tooltip", "transform", "__rest", "point", "shape", "Shape", "cartesian", "index", "scale", "value", "offset", "i", "p", "DEFAULT_LAYOUT_OPTIONS", "DEFAULT_LINK_OPTIONS", "d", "DEFAULT_NODE_OPTIONS", "DEFAULT_LABEL_OPTIONS", "dataTransform", "n", "i", "e", "scale", "tooltip", "__rest", "field", "sortBy", "x", "y", "d", "c", "DEFAULT_LAYOUT_OPTIONS", "a", "DEFAULT_NODE_OPTIONS", "DEFAULT_LINK_OPTIONS", "DEFAULT_LABEL_OPTIONS", "Tree", "scale", "tooltip", "d", "initializeData", "value", "d", "GET_DEFAULT_OPTIONS", "__awaiter", "scale", "__rest", "shape", "__rest", "value", "p", "stroke", "x", "y", "DEFAULT_OPTIONS", "dataTransform", "scale", "name", "d", "i", "transform", "tooltip", "shape", "Density", "index", "scale", "value", "i", "offset", "x", "p", "shape", "Heatmap", "index", "scale", "value", "i", "r", "DEFAULT_OPTIONS", "DEFAULT_TEXT_OPTIONS", "Liquid", "__rest", "prettyNumber", "shape", "Point", "Line", "Circle", "index", "scale", "value", "offset", "i", "x0", "y0", "r", "d", "n", "a", "p2", "sort", "a", "sum", "c", "d", "_a", "path", "value", "name", "DEFAULT_OPTIONS", "__rest", "Band", "Linear", "Ordinal", "Identity", "Point", "Time", "Log", "Pow", "Threshold", "Quantile", "Quantize", "Sqrt", "Sequential", "Constant", "className", "tokens", "defaults", "tokens", "defaults", "i", "x", "p", "i", "x", "value", "i", "value", "i", "s", "n", "i", "x", "p", "d", "i", "n", "x", "p", "d", "x", "p", "identity_default", "x", "map", "locale", "group", "identity_default", "sign", "zero", "format", "value", "i", "n", "c", "formatPrefix", "f", "e", "k", "format", "field", "s", "value", "isHorizontal", "size", "domainOf", "scale", "__rest", "tick", "x", "scale", "min", "max", "d", "size", "i", "ticks", "toString", "isHorizontal", "position", "isVertical", "array", "offset", "_a", "prettyNumber", "transform", "y", "center", "w", "h", "r", "value", "cos", "sin", "__rest", "bbox", "defaultStyle", "direction", "format", "index", "scale", "name", "i", "angle", "__rest", "e", "n", "a", "s", "c", "p", "y", "o", "i", "t", "u", "l", "f", "E", "r", "h", "d", "R", "T", "w", "O", "A", "i", "value", "index", "value", "value", "value", "value", "i", "k", "each_default", "value", "value", "is_plain_object_default", "splice", "indexOf", "splice", "isNumber", "value", "each_default", "value", "toString", "f", "cache", "dist", "value", "is_plain_object_default", "i", "deep_mix_default", "identity_default", "default_1", "value", "compose", "x", "identity_default", "transformer", "extend", "transform", "i", "min", "max", "x", "y", "__read", "matrix", "compose", "x", "createNormalize", "a", "createClamp", "a", "x", "bisect", "array", "x", "i", "get", "mid", "e10", "e5", "e2", "tickIncrement", "count", "error", "d3LinearNice", "min", "max", "count", "d", "tickIncrement", "DURATION_SECOND", "DURATION_MINUTE", "DURATION_HOUR", "DURATION_DAY", "DURATION_WEEK", "DURATION_MONTH", "DURATION_YEAR", "createInterval", "field", "date", "i", "d", "ceil", "range", "ticks", "millisecond", "second", "minute", "hour", "day", "month", "week", "year", "utcMillisecond", "createInterval", "utcSecond", "DURATION_SECOND", "utcMinute", "DURATION_MINUTE", "utcHour", "DURATION_HOUR", "utcDay", "DURATION_DAY", "utcMonth", "DURATION_MONTH", "month", "utcWeek", "DURATION_WEEK", "utcYear", "DURATION_YEAR", "year", "value", "isArray", "value", "isObjectLike", "value", "is_object_like_default", "toString", "isType", "value", "is_type_default", "isPlainObject", "value", "is_object_like_default", "is_type_default", "is_plain_object_default", "arrPrototype", "splice", "indexOf", "splice", "isNumber", "value", "DEGREE", "RADIAN", "toString", "isNull", "value", "objectProto", "value", "is_undefined_default", "max", "value", "cache", "MAX_MIX_LEVEL", "_deepMix", "dist", "value", "is_plain_object_default", "isArray", "deepMix", "i", "deep_mix_default", "identity_default", "default_1", "value", "i", "s", "isValid", "x", "is_undefined_default", "isNull", "createInterpolatorRound", "isNumber", "interpolatize", "rangeOf", "normalizeDomain", "transform", "clamp", "round", "normalize", "interpolate", "compose", "import_color_string", "hue2rgb", "p", "m", "hsl2rbg", "h", "s", "l", "a", "r", "string2rbg", "colorString", "value", "createInterpolateNumber", "a", "createInterpolateColor", "string2rbg", "c2", "values", "i", "r", "b", "createInterpolateValue", "createInterpolateRound", "internGet", "map", "value", "internSet", "internDelete", "keyof", "InternMap", "Base", "deep_mix_default", "defaultUnknown", "updateIndexMap", "i", "mapBetweenArrByMapIndex", "value", "createKey", "d", "Ordinal", "Base", "x", "y", "r", "normalize", "array", "min", "d", "splice", "n", "pretty", "computeFlexBandState", "range", "round", "sum", "value", "InternMap", "i", "bandWidth", "offset", "computeBandState", "Band", "Ordinal", "defaultUnknown", "x", "d3Ticks", "count", "n", "ticks", "tickIncrement", "i", "eps", "createBiMap", "range", "normalize", "interpolate", "createNormalize", "compose", "createPolyMap", "reverse", "i", "x", "bisect", "choosePiecewise", "n", "createInterpolateRound", "Continuous", "Base", "createInterpolateNumber", "isValid", "min", "max", "d3LinearNice", "transform", "createClamp", "identity_default", "clamp", "round", "Linear", "Continuous", "createInterpolateValue", "d3Ticks", "identity_default", "Point", "Band", "defaultUnknown", "rangeOf", "normalizeDomain", "normalize", "compose", "createInterpolateNumber", "createNormalize", "Sequential", "Sequential_1", "Linear", "identity_default", "d3Ticks", "__decorate", "interpolatize", "rangeOf", "normalizeDomain", "d2", "compose", "createInterpolateNumber", "createNormalize", "x", "Diverging", "Diverging_1", "Linear", "identity_default", "d3Ticks", "__decorate", "interpolatize", "x", "y", "Linear", "__read", "custom", "x", "y", "__read", "x", "y", "__read", "matrix", "x", "y", "__read", "Linear", "angle", "_a", "r", "transpose", "x", "y", "__read", "x", "y", "__read", "matrix", "reflect", "__spreadArray", "__read", "x", "y", "__read", "matrix", "x", "y", "__read", "count", "d", "Linear", "angle", "_a", "a", "r", "parallel", "x", "y", "__read", "x0", "x1", "y0", "y1", "Linear", "Point", "i", "e", "x", "y", "__read", "_a", "x", "focus", "min", "max", "left", "m", "f", "normalize", "s", "Linear", "y", "__read", "_a", "r", "x", "y", "Linear", "__read", "x", "y", "__read", "x", "y", "__read", "z", "x", "y", "__read", "Coordinate", "custom", "transpose", "reflect", "parallel", "deep_mix_default", "x", "y", "__spreadArray", "__read", "invert", "d", "add", "transform", "extend", "transformer", "identity_default", "compose", "matrix", "m", "Coordinate3D", "deep_mix_default", "x", "y", "__spreadArray", "__read", "invert", "d", "add", "transform", "__values", "transformer", "identity_default", "compose", "matrix", "m", "adaptor", "isObject", "d", "value", "__rest", "x", "y", "__rest", "direction", "sum", "value", "i", "__rest", "__rest", "scale", "transform", "rest", "x", "y", "mark", "__rest", "x", "f", "scale", "x", "y", "encode", "groups", "d", "legend", "c", "domain", "values", "data", "cellData", "createGuideX", "createGuideY", "index", "f", "i", "left", "children", "__rest", "setScale", "setChildren", "scale", "index", "values", "x", "y", "i", "left", "children", "d", "__rest", "setData", "setScale", "__rest", "p2", "s", "x0", "y0", "a3", "d", "range", "direction", "reverse", "setAnimation", "n", "d", "count", "i", "index", "scale", "tooltip", "__rest", "epsilon", "epsilon2", "pi", "halfPi", "tau", "abs", "atan2", "cos", "sin", "sign", "x", "sqrt", "acos", "pi", "asin", "halfPi", "i", "n", "cartesian", "atan2", "asin", "spherical", "phi", "cos", "sin", "a", "k", "d", "l", "sqrt", "a", "compose", "x", "y", "phi", "abs", "pi", "tau", "cos", "sin", "x", "y", "k", "atan2", "asin", "rotate", "direction", "cos", "sin", "tau", "point", "cartesian", "acos", "epsilon", "line", "x", "y", "m", "a", "abs", "epsilon", "point", "compareIntersection", "interpolate", "i", "n", "x", "epsilon", "link", "array", "a", "point", "abs", "pi", "sign", "tau", "phi", "sin", "cos", "angle", "sum", "halfPi", "epsilon", "i", "n", "m", "k", "atan2", "cartesian", "intersection", "asin", "epsilon2", "interpolate", "line", "point", "phi", "i", "n", "m", "a", "halfPi", "epsilon", "pi", "halfPi", "abs", "epsilon", "sin", "cos", "direction", "phi", "circle_default", "cos", "abs", "epsilon", "interpolate", "direction", "phi", "point2", "c", "pi", "intersect", "a", "cartesian", "c2", "A", "u", "w", "sqrt", "delta", "polar", "q1", "r", "code", "line_default", "a", "x0", "y0", "x1", "y1", "r", "x0", "y0", "x1", "y1", "x", "y", "interpolate", "direction", "a", "p", "abs", "epsilon", "compareIntersection", "first", "point", "i", "n", "ring", "m", "visible", "line_default", "y0", "y1", "y", "epsilon", "x", "x0", "x1", "X1", "X0", "Y1", "Y0", "graticule", "abs", "identity_default", "x", "areaSum", "areaRingSum", "areaStream", "abs", "area", "x", "y", "area_default", "x0", "y0", "x", "y", "x00", "y00", "x0", "y0", "x", "y", "sqrt", "x", "y", "tau", "x00", "y00", "x0", "y0", "x", "y", "sqrt", "append", "appendRound", "x", "y", "r", "s", "i", "d", "k", "path_default", "projection", "path", "area_default", "identity_default", "d", "s", "x", "y", "projection", "extent", "w", "h", "k", "x", "y", "size", "cos", "x", "y", "x0", "y0", "x1", "y1", "d2", "a", "c", "m", "sqrt", "asin", "abs", "epsilon", "atan2", "p", "y2", "x00", "y00", "point", "phi", "cartesian", "x", "y", "rotate", "r", "k", "transform", "cos", "sin", "a", "phi", "x0", "y0", "x1", "y1", "identity_default", "cache", "projection", "point", "invert", "circle_default", "sqrt", "extent", "size", "center", "pi", "m", "p", "cos", "phi", "sin", "x", "y", "asin", "y0", "y1", "sin", "n", "abs", "epsilon", "c", "sqrt", "x", "y", "r", "cos", "l", "atan2", "sign", "pi", "asin", "n", "x", "y", "i", "cache", "point", "k", "epsilon", "extent", "size", "scale", "x", "y", "cos", "k", "sin", "angle", "sqrt", "c", "atan2", "asin", "sqrt", "asin", "c", "acos", "sin", "phi", "halfPi", "x", "y", "tau", "m", "center", "scale", "translate", "x0", "y0", "x1", "y1", "k", "pi", "y", "halfPi", "y0", "y1", "cos", "n", "sin", "f", "x", "epsilon", "r", "sign", "sqrt", "l", "atan2", "abs", "pi", "phi", "y0", "y1", "cos", "n", "sin", "abs", "epsilon", "x", "y", "l", "atan2", "sign", "pi", "sqrt", "sqrt", "phi", "l", "asin", "sin", "l2", "cos", "x", "y", "i", "abs", "epsilon2", "x", "y", "cos", "k", "sin", "identity_default", "k", "x0", "y0", "x1", "y1", "kx", "ky", "transform", "x", "y", "p", "projection", "cache", "sin", "cos", "extent", "size", "phi", "phi2", "x", "y", "i", "abs", "epsilon", "x", "y", "cos", "sin", "asin", "epsilon", "x", "y", "cos", "k", "sin", "phi", "halfPi", "x", "y", "m", "center", "rotate", "identity_default", "name", "projection", "value", "d", "size", "x", "y", "x0", "y0", "x1", "y1", "path_default", "l", "s", "__rest", "c", "path", "normalize", "point", "GeoPath", "options", "tooltip", "node", "e", "className", "dblclick", "library", "create", "__rest", "group", "library", "transform", "__rest", "createCoordinate", "d", "isPolar", "isHelix", "isTranspose", "isParallel", "isTheta", "isRadial", "isRadar", "scheme", "n", "i", "scheme", "scheme", "scheme", "scheme", "scheme", "scheme", "scheme", "scheme", "scheme", "scheme", "scheme", "scheme", "scheme", "scheme", "scheme", "scheme", "scheme", "scheme", "scheme", "scheme", "scheme", "scheme", "scheme", "scheme", "scheme", "scheme", "scheme", "c", "c", "x", "range", "n", "name", "values", "library", "scale", "value", "d", "channels", "group", "groupTransform", "identity", "map", "invert", "x", "a", "index", "range", "isObject", "min", "max", "offset", "e", "scheme", "i", "interpolate", "nice", "isTheta", "defaults", "zero", "some", "library", "scale", "field", "isVertical", "size", "__rest", "value", "render", "d", "group", "components", "d", "size", "name", "scales", "scale", "sort", "a", "isHelix", "isTheta", "isTranspose", "isPolar", "isRadial", "isRadar", "angleOf", "polar", "index", "angle", "isParallel", "library", "__rest", "styleOf", "isVertical", "ticks", "i", "array", "focus", "cols", "w", "maxRows", "key", "value", "x", "direction", "transform", "ticksOf", "T", "prettyNumber", "format", "offset", "extent", "x0", "x1", "y", "y0", "shape", "filter", "library", "x", "y", "isTranspose", "size", "viewWidth", "paddingLeft", "paddingRight", "pl0", "pr0", "padding", "margin", "isPolar", "isRadial", "d", "i", "scale", "components", "value", "sizeOf", "isHorizontal", "sum", "crossPadding", "area", "r", "x0", "y0", "direction", "reverse", "a", "minX", "groupComponents", "group", "offset", "mark", "scale", "transform", "__rest", "library", "T", "value", "i", "name", "columnOf", "tooltip", "valueOf", "field", "d", "format", "values", "columns", "rest", "column", "key", "normalize", "scale", "tooltip", "value", "values", "d", "name", "required", "range", "i", "constant", "__rest", "library", "mark", "transform", "index", "library", "d", "_a", "isMark", "transform", "i", "state", "n", "updateInteractions", "x", "options", "__awaiter", "compose", "container", "destroy", "name", "filter", "__rest", "mark", "marks", "M", "scale", "values", "defaults", "scales", "index", "tooltip", "value", "count", "T", "itemsOf", "k", "y", "selection", "applyStyle", "size", "left", "right", "key", "data", "merge", "e", "l", "document", "p", "min", "max", "render", "valueOf", "shape", "f", "format", "group", "translate", "A", "mark", "name", "d", "y", "x", "x1", "y1", "scale", "shape", "field", "applyStyle", "value", "f", "scale", "columnWidthRatio", "value", "index", "i", "Canvas", "e", "keyed", "library", "x", "y", "group", "_a", "value", "x", "scale", "offset", "range", "d", "domainOf", "values", "end", "y", "x1", "y1", "point", "count", "value", "setStyle", "d", "x", "y", "x1", "y1", "x0", "y0", "view", "mark", "index", "k", "valueof", "a", "value", "group", "defaults", "markState", "array", "i", "e", "link", "__rest", "p2", "append", "p", "p3", "_a", "remove", "offset", "transform", "center", "document", "scale", "extentOf", "mid", "e2", "y2", "stroke", "rest", "shape", "dom", "point", "path", "plot", "bandWidth", "_b", "range", "xValues", "values", "ch", "dataOf", "scale", "markerOf", "labelOf", "filter", "value", "__awaiter", "index", "values", "d", "_a", "s", "mark", "_b", "transform", "channel", "dataOf", "remove", "mark", "shape", "d", "i", "range", "sum", "a", "library", "size", "create", "name", "scale", "defaults", "format", "domainOf", "value", "width", "height", "render", "__rest", "shape", "value", "size", "max", "min", "range", "index", "rangeOf", "scale", "d", "Constant", "i", "p2", "__rest", "x", "y", "format", "value", "index", "x", "y", "__rest", "value", "inferPosition", "x", "y", "Slider", "size", "__rest", "scale", "value", "format", "isHorizontal", "reverse", "x0", "y0", "f", "tick", "mark", "name", "channel", "index", "Slider", "Slider", "Scrollbar", "__rest", "scale", "value", "x", "y", "range", "Scrollbar", "Scrollbar", "defaults", "shape", "transform", "defaults", "shape", "transform", "defaults", "shape", "y", "y1", "transform", "defaults", "shape", "transform", "defaults", "shape", "defaults", "shape", "shape", "value", "shape", "min", "max", "x0", "y0", "x1", "y1", "d", "x", "y", "pack", "count", "h", "n", "c", "w", "i", "path", "first", "last", "defaults", "f", "defaults", "shape", "y", "y1", "path", "defaults", "shape", "defaults", "shape", "defaults", "shape", "defaults", "shape", "x", "y", "defaults", "shape", "x", "y", "d", "link", "scale", "valueof", "value", "i", "useState", "k", "group", "e", "__rest", "valueof", "useState", "k", "e", "__rest", "d", "link", "scale", "valueof", "value", "i", "useState", "e", "filter", "groupBy", "k", "group", "select", "__rest", "transform", "d", "markValue", "value", "mark", "name", "channel", "__rest", "scale", "i", "coordinate", "focus", "__awaiter", "r", "I", "k", "Y", "line", "y0", "y1", "labels", "transform", "fisheye", "d", "Fisheye", "focus", "options", "mark", "x", "y", "group", "x1", "y1", "y2", "x0", "y0", "offset", "defaults", "x", "y", "render", "value", "_a", "color", "__rest", "index", "stroke", "unique", "d", "scale", "T", "i", "name", "groupName", "polar", "r", "circle", "line", "mouse", "points", "p", "a", "x2", "point", "shape", "values", "bandWidth", "event", "extent", "min", "max", "focus", "elements", "find", "groups", "hide", "destroy", "rest", "e", "k", "Tooltip", "dataOf", "scaleOf", "scale", "valueof", "index", "d", "value", "e", "destroy", "intersect", "x", "y", "x1", "y1", "extent", "maxY", "bboxOf", "applyStyle", "value", "className", "size", "document", "__rest", "g", "id", "Node", "reverse", "stroke", "start", "end", "min", "max", "width", "height", "d", "root", "scale", "valueof", "_a", "e", "brush", "x", "y", "x1", "y1", "extent", "maxY", "x", "y", "x1", "y1", "extent", "cross", "__rest", "maxY", "size", "x", "y", "x1", "y1", "axesOf", "isHorizontal", "reverse", "valueof", "x0", "y0", "d", "extentOf", "i", "scale", "selectionOf", "index", "name", "domainOf", "extent", "rangeOf", "abstractOf", "e", "filter", "reverse", "scale", "__rest", "extent", "brush", "x", "y", "x1", "y1", "selection", "coordinate", "__awaiter", "mark", "scale", "index", "values", "a", "min", "max", "value", "i", "channelData", "mark", "ch", "value", "values", "scale", "reverse", "x", "x1", "d", "domainOf", "className", "name", "__awaiter", "dom", "className", "values", "x", "y", "normalizedPosition", "isHorizontal", "range", "center", "scale", "values", "value", "__rest", "x0", "y0", "e", "x", "y", "selectPlotArea", "__rest", "mark", "path", "__awaiter", "name", "y", "x", "index", "id", "d", "e", "plot", "selectPlotArea", "document", "id", "path", "__awaiter", "name", "y", "x", "index", "viewOptions", "mark", "i", "e", "DEFAULT_STYLE", "e", "d", "field", "y", "y1", "transform", "value", "isTheta", "index", "i", "defaultStyle", "shape", "group", "circle", "indexOf", "center", "point", "__rest", "isTranspose", "isPolar", "elementSelect", "selection", "scale", "x", "color", "__awaiter", "mark", "data", "p", "title", "name", "i", "f", "column", "value", "s", "year", "n", "c", "format", "value", "number", "m", "value", "format", "autoType", "__awaiter", "identity", "value", "d", "f", "defined", "d", "Filter", "Sort", "field", "d", "isEmpty", "value", "d", "field", "value", "a", "field", "value", "identity", "Map", "identity", "flow", "normalize", "value", "d", "c", "x", "y", "n", "w", "h", "i", "k", "m", "last", "a", "size", "e", "sign", "rotate", "data", "place", "canvas", "s", "DEFAULT_OPTIONS", "range", "min", "max", "value", "WordCloud", "__awaiter", "flow", "d", "cw", "ch", "x", "y", "__rest", "field", "d", "select", "k", "key", "field", "groupBy", "min", "max", "size", "d", "pdf", "i", "bisect", "f", "a", "i", "mid", "x", "r", "i", "y", "dot", "a", "scale", "value", "c", "f", "x0", "i", "point", "value", "a", "x", "f", "a", "c2", "dot", "phi", "f", "a", "scale", "i", "dot", "p", "i", "center", "a", "p2", "midPoint", "circle", "a2", "disjoint", "point", "intersect", "k", "r", "d", "h", "x0", "y0", "values", "i", "setid", "SMALL", "bisect", "distance", "pairs", "a", "area", "b", "x", "left", "right", "c", "value", "set", "scale", "weight", "size", "point", "index", "k", "p2", "d2", "l", "d", "c", "i", "circle", "x", "y", "r", "x0", "y0", "circle", "i", "size", "path", "d", "a", "set", "p", "Log", "values", "last", "point", "field", "d", "i", "min2", "min", "max", "point", "x", "y", "max2", "l", "a", "c", "d", "map", "get", "set", "value", "shape", "min", "max", "n", "y0", "y", "h", "x0", "x1", "y1", "error", "i", "c", "s", "c", "r", "i", "l", "c", "l", "maxY", "union", "a", "x", "y", "l", "max", "min", "l", "Sort", "Filter", "Map", "Log", "WordCloud", "Group", "Rect", "Line", "Point", "Text", "Area", "Link", "Image", "Polygon", "Box", "Vector", "Connector", "Path", "Shape", "Density", "Heatmap", "Linear", "Ordinal", "Band", "Identity", "Time", "Pow", "Sqrt", "Threshold", "Quantile", "Quantize", "Sequential", "Constant", "Fisheye", "Tooltip", "Arc", "Tree", "Pack", "Sankey", "Liquid", "Linear", "Ordinal", "Band", "Identity", "Point", "Time", "Log", "Pow", "Sqrt", "Threshold", "Quantile", "Quantize", "Sequential", "Constant", "Tooltip", "extend", "Runtime", "library", "Chart", "d", "Node", "value", "transform", "x", "index", "normalizeContainer", "container", "valueOf", "sizeOf", "node", "value", "children", "mark", "Node", "__rest", "parent", "n", "i", "Node", "name", "value", "array", "k", "CompositionNode", "Node", "scale", "group", "__decorate", "MarkNode", "Node", "__decorate", "__rest", "normalizeContainer", "resolve", "reject", "sizeOf", "point", "document", "x", "y", "scale", "d", "markState", "c", "index", "k", "e", "library", "isMark", "name", "Mark", "__decorate", "error", "dom", "extend", "library", "Chart", "extend", "version", "e", "render", "createNode", "render", "__assign", "s", "i", "n", "p", "React", "import_react", "d", "b", "p", "ErrorBoundary", "e", "React", "error", "import_lodash", "ctx", "__spreadArray", "pack", "i", "l", "ctx", "measureTextWidth", "import_react", "import_react", "import_lodash", "__assign", "s", "i", "n", "p", "name", "a", "createNode", "DEFAULT_OPTIONS", "a", "CHILD_NODE_COUNT", "field", "index", "d", "n", "e", "partition", "data", "x", "y", "transformData", "value", "path", "d", "x", "y", "DEFAULT_OPTIONS", "CHILD_NODE_COUNT", "__rest", "plot", "selectPlotArea", "DEFAULT_BREADCRUMB", "DrillDown", "document", "id", "path", "__awaiter", "name", "y", "x", "index", "mark", "e", "CHILD_NODE_COUNT", "plotlib", "DrillDown", "__assign", "s", "i", "n", "p", "Chart", "extend", "plotlib", "import_lodash", "__assign", "s", "i", "n", "p", "_a", "value", "tooltip", "__spreadArray", "pack", "i", "l", "__spreadArray", "pack", "i", "l", "field", "d", "dataTransform", "__assign", "s", "i", "n", "p", "__rest", "e", "value", "index", "__extends", "d", "b", "p", "__assign", "s", "i", "n", "__rest", "e", "Text", "__extends", "d", "b", "p", "__assign", "s", "i", "n", "__rest", "e", "Polygon", "__extends", "d", "b", "p", "Annotation", "name", "x", "y", "__extends", "d", "b", "p", "__assign", "s", "i", "n", "ConversionTag", "isVertical", "a", "size", "index", "x", "y", "direction", "center", "value", "Polygon", "Text", "__extends", "d", "b", "p", "__assign", "s", "i", "n", "__rest", "e", "BidirectionalBarAxisText", "isVertical", "x", "y", "_a", "sum", "Text", "Controller", "shape", "__extends", "d", "b", "p", "__assign", "s", "i", "n", "Plot", "Chart", "e", "adaptor", "_a", "__extends", "d", "b", "p", "Base", "__assign", "s", "i", "n", "p", "tooltip", "shape", "_a", "adaptor", "__extends", "d", "b", "p", "Area", "adaptor", "__assign", "s", "i", "n", "p", "adaptor", "params", "scale", "stroke", "p2", "document", "right", "__extends", "d", "b", "p", "Bar", "adaptor", "reisterShape", "stroke", "document", "left", "right", "__extends", "d", "b", "p", "reisterShape", "Column", "adaptor", "adaptor", "params", "annotations", "scale", "index", "_a", "__extends", "d", "b", "p", "DualAxes", "adaptor", "adaptor", "params", "transform", "tooltip", "d", "__extends", "d", "b", "p", "Funnel", "adaptor", "adaptor", "__extends", "d", "b", "p", "Line", "adaptor", "__assign", "s", "i", "n", "p", "adaptor", "params", "tooltip", "sum", "a", "index", "_a", "d", "__extends", "d", "b", "p", "Pie", "adaptor", "adaptor", "__extends", "d", "b", "p", "Scatter", "adaptor", "adaptor", "params", "__extends", "d", "b", "p", "Radar", "adaptor", "adaptor", "params", "__extends", "d", "b", "p", "Stock", "adaptor", "adaptor", "__extends", "d", "b", "p", "TinyLine", "adaptor", "adaptor", "__extends", "d", "b", "p", "TinyArea", "adaptor", "adaptor", "__extends", "d", "b", "p", "TinyColumn", "adaptor", "__assign", "s", "i", "n", "p", "adaptor", "transformData", "params", "__extends", "d", "b", "p", "TinyProgress", "adaptor", "__assign", "s", "i", "n", "p", "adaptor", "params", "radius", "transformData", "__extends", "d", "b", "p", "TinyRing", "adaptor", "adaptor", "__extends", "d", "b", "p", "Rose", "adaptor", "__assign", "s", "i", "n", "p", "__spreadArray", "pack", "l", "adaptor", "transformData", "params", "index", "_a", "link", "__extends", "d", "b", "p", "Waterfall", "adaptor", "adaptor", "params", "__extends", "d", "b", "p", "Histogram", "adaptor", "adaptor", "tooltip", "params", "mark", "__extends", "d", "b", "p", "Heatmap", "adaptor", "adaptor", "params", "__extends", "d", "b", "p", "Box", "adaptor", "transform", "adaptor", "dataTransform", "__extends", "d", "b", "p", "Sankey", "adaptor", "__assign", "s", "i", "n", "p", "DEFAULT_COLORS", "field", "transformData", "d", "a", "value", "index", "_a", "adaptor", "params", "c", "transpose", "range", "__extends", "d", "b", "p", "Bullet", "DEFAULT_COLORS", "adaptor", "adaptor", "params", "__extends", "d", "b", "p", "Gauge", "adaptor", "adaptor", "params", "__extends", "d", "b", "p", "Liquid", "adaptor", "adaptor", "__extends", "d", "b", "p", "WordCloud", "adaptor", "adaptor", "dataTransform", "__extends", "d", "b", "p", "Treemap", "adaptor", "__assign", "s", "i", "n", "p", "__rest", "e", "adaptor", "params", "coordinate", "tooltip", "d", "scale", "__extends", "d", "b", "p", "RadialBar", "adaptor", "adaptor", "dataTransform", "__extends", "d", "b", "p", "CirclePacking", "adaptor", "__assign", "s", "i", "n", "p", "field2", "adaptor", "params", "__extends", "d", "b", "p", "Violin", "adaptor", "__assign", "s", "i", "n", "p", "__spreadArray", "pack", "l", "adaptor", "field", "params", "index", "data", "transformData", "tooltip", "y1", "y2", "layout", "transform", "__extends", "d", "b", "p", "BidirectionalBar", "adaptor", "DefaultTransformKey", "adaptor", "params", "__extends", "d", "b", "p", "Venn", "adaptor", "adaptor", "dataTransform", "__extends", "d", "b", "p", "Sunburst", "adaptor", "Base", "Line", "Column", "Area", "Funnel", "Radar", "Heatmap", "Box", "Sankey", "Gauge", "Liquid", "WordCloud", "Treemap", "Violin", "Venn", "Sunburst", "__assign", "s", "i", "n", "p", "__rest", "e", "className", "React", "import_react", "import_react", "import_react", "__assign", "s", "i", "n", "p", "scale", "__assign", "s", "i", "n", "p", "configKey", "scale", "React", "area_default", "import_react", "__rest", "s", "e", "p", "i", "value", "React", "line_default", "pie_default", "line_default", "area_default", "TinyLineChart", "column_default", "line_default", "area_default", "column_default", "treemap_default", "RadialBar"]
}
