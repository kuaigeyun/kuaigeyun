{
  "version": 3,
  "sources": ["../../lodash/lodash.js", "../../eventemitter3/index.js", "../../svg-path-parser/parser.js", "../../svg-path-parser/index.js", "../../@antv/util/src/lodash/is-array-like.ts", "../../@antv/util/src/lodash/filter.ts", "../../@antv/util/src/lodash/is-function.ts", "../../@antv/util/src/lodash/is-nil.ts", "../../@antv/util/src/lodash/is-array.ts", "../../@antv/util/src/lodash/is-object.ts", "../../@antv/util/src/lodash/is-object-like.ts", "../../@antv/util/src/lodash/is-type.ts", "../../@antv/util/src/lodash/is-plain-object.ts", "../../@antv/util/src/lodash/is-string.ts", "../../@antv/util/src/lodash/group-by.ts", "../../@antv/util/src/lodash/clamp.ts", "../../@antv/util/src/lodash/is-number.ts", "../../@antv/util/src/lodash/to-string.ts", "../../@antv/util/src/lodash/lower-first.ts", "../../@antv/util/src/lodash/upper-first.ts", "../../@antv/util/src/lodash/is-boolean.ts", "../../@antv/util/src/lodash/is-date.ts", "../../@antv/util/src/lodash/is-undefined.ts", "../../@antv/util/src/lodash/debounce.ts", "../../@antv/util/src/lodash/memoize.ts", "../../@antv/util/src/lodash/deep-mix.ts", "../../@antv/util/src/lodash/get-type.ts", "../../@antv/util/src/lodash/is-prototype.ts", "../../@antv/util/src/lodash/is-empty.ts", "../../@antv/util/src/lodash/is-equal.ts", "../../@antv/util/src/lodash/get.ts", "../../@antv/util/src/lodash/set.ts", "../../@antv/util/src/lodash/each.ts", "../../@antv/util/src/lodash/pick.ts", "../../@antv/util/src/lodash/reduce.ts", "../../@antv/util/src/lodash/omit.ts", "../../@antv/util/src/lodash/throttle.ts", "../../@antv/util/src/lodash/unique-id.ts", "../../@antv/util/src/lodash/contains.ts", "../../@antv/util/src/lodash/difference.ts", "../../@antv/util/src/lodash/keys.ts", "../../@antv/util/src/lodash/is-match.ts", "../../@antv/util/src/lodash/find.ts", "../../@antv/util/src/lodash/flatten.ts", "../../@antv/util/src/lodash/max.ts", "../../@antv/util/src/lodash/min.ts", "../../@antv/util/src/lodash/pull.ts", "../../@antv/util/src/lodash/pull-at.ts", "../../@antv/util/src/lodash/uniq.ts", "../../@antv/util/src/lodash/head.ts", "../../@antv/util/src/lodash/last.ts", "../../@antv/util/src/lodash/is-number-equal.ts", "../../@antv/util/src/lodash/max-by.ts", "../../@antv/util/src/lodash/min-by.ts", "../../@antv/util/src/lodash/mod.ts", "../../@antv/util/src/lodash/to-degree.ts", "../../@antv/util/src/lodash/to-radian.ts", "../../@antv/util/src/lodash/substitute.ts", "../../@antv/util/src/lodash/is-null.ts", "../../@antv/util/src/lodash/is-element.ts", "../../@antv/util/src/lodash/mix.ts", "../../@antv/util/src/lodash/clone.ts", "../../@antv/util/src/lodash/index-of.ts", "../../@antv/util/src/lodash/map-values.ts", "../../@antv/util/src/lodash/noop.ts", "../../@antv/util/src/lodash/identity.ts", "../../@antv/util/src/lodash/size.ts", "../../@antv/util/src/lodash/cache.ts", "../../@antv/util/src/dom/create-dom.ts", "../../@antv/util/src/color/arr2rgb.ts", "../../@antv/util/src/color/torgb.ts", "../../gl-matrix/esm/common.js", "../../gl-matrix/esm/mat3.js", "../../gl-matrix/esm/mat4.js", "../../gl-matrix/esm/quat.js", "../../gl-matrix/esm/vec3.js", "../../gl-matrix/esm/vec4.js", "../../gl-matrix/esm/vec2.js", "../../@antv/util/src/path/parser/params-parser.ts", "../../@antv/util/src/path/process/fix-arc.ts", "../../@antv/util/src/path/parser/params-count.ts", "../../@antv/util/src/path/util/is-path-array.ts", "../../@antv/util/src/path/util/is-absolute-array.ts", "../../@antv/util/src/path/util/is-normalized-array.ts", "../../@antv/util/src/path/parser/finalize-segment.ts", "../../@antv/util/src/path/parser/scan-flag.ts", "../../@antv/util/src/path/parser/is-digit-start.ts", "../../@antv/util/src/path/parser/scan-param.ts", "../../@antv/util/src/path/parser/is-space.ts", "../../@antv/util/src/path/parser/skip-spaces.ts", "../../@antv/util/src/path/parser/is-path-command.ts", "../../@antv/util/src/path/parser/is-arc-command.ts", "../../@antv/util/src/path/parser/scan-segment.ts", "../../@antv/util/src/path/parser/path-parser.ts", "../../@antv/util/src/path/parser/parse-path-string.ts", "../../@antv/util/src/path/convert/path-2-absolute.ts", "../../@antv/util/src/path/process/normalize-segment.ts", "../../@antv/util/src/path/process/normalize-path.ts", "../../@antv/util/src/path/util/is-curve-array.ts", "../../@antv/util/src/path/util/rotate-vector.ts", "../../@antv/util/src/path/process/arc-2-cubic.ts", "../../@antv/util/src/path/process/quad-2-cubic.ts", "../../@antv/util/src/path/util/mid-point.ts", "../../@antv/util/src/path/process/line-2-cubic.ts", "../../@antv/util/src/path/process/segment-2-cubic.ts", "../../@antv/util/src/path/convert/path-2-curve.ts", "../../@antv/util/src/path/process/clone-path.ts", "../../@antv/util/src/path/process/reverse-curve.ts", "../../@antv/util/src/path/util/distance-square-root.ts", "../../@antv/util/src/path/util/segment-line-factory.ts", "../../@antv/util/src/path/util/segment-arc-factory.ts", "../../@antv/util/src/path/util/segment-cubic-factory.ts", "../../@antv/util/src/path/util/segment-quad-factory.ts", "../../@antv/util/src/path/util/path-length-factory.ts", "../../@antv/util/src/path/util/get-total-length.ts", "../../@antv/util/src/path/util/get-rotated-curve.ts", "../../@antv/util/src/path/util/get-path-area.ts", "../../@antv/util/src/path/util/get-draw-direction.ts", "../../@antv/util/src/path/util/get-point-at-length.ts", "../../@antv/util/src/path/util/equalize-segments.ts", "../../eventemitter3/index.mjs", "../../@babel/runtime/helpers/esm/superPropBase.js", "../../@babel/runtime/helpers/esm/get.js", "../../@babel/runtime/helpers/esm/superPropGet.js", "../../@antv/g-math/src/util.ts", "../../@antv/g-math/src/ellipse.ts", "../../@antv/g-math/src/arc.ts", "../../@antv/g-math/src/bezier.ts", "../../@antv/g-math/src/line.ts", "../../@antv/g-math/src/cubic.ts", "../../@antv/g-math/src/segments.ts", "../../@antv/g-math/src/polyline.ts", "../../@antv/g-math/src/polygon.ts", "../../@antv/g-math/src/quadratic.ts", "../../node_modules/.pnpm/rbush@3.0.1/node_modules/rbush/rbush.js", "../../@antv/g-lite/src/types.ts", "../../@antv/g-lite/src/AbstractRenderer.ts", "../../@antv/g-lite/src/shapes/AABB.ts", "../../@antv/g-lite/src/shapes/Plane.ts", "../../@antv/g-lite/src/shapes/Frustum.ts", "../../@antv/g-lite/src/shapes/Point.ts", "../../@antv/g-lite/src/shapes/Rectangle.ts", "../../@antv/g-lite/src/utils/error.ts", "../../@antv/g-lite/src/utils/math.ts", "../../@antv/g-lite/src/camera/interfaces.ts", "../../@antv/g-lite/src/camera/Camera.ts", "../../@antv/g-lite/src/components/Cullable.ts", "../../@antv/g-lite/src/components/Sortable.ts", "../../@antv/g-lite/src/components/Transform.ts", "../../@antv/g-lite/src/display-objects/constants.ts", "../../@antv/g-lite/src/css/interfaces.ts", "../../node_modules/.pnpm/d3-color@3.1.0/node_modules/d3-color/src/define.js", "../../node_modules/.pnpm/d3-color@3.1.0/node_modules/d3-color/src/color.js", "../../@antv/g-lite/src/utils/memoize.ts", "../../@antv/g-lite/src/css/cssom/types.ts", "../../@antv/g-lite/src/css/cssom/CSSStyleValue.ts", "../../@antv/g-lite/src/css/cssom/CSSColorValue.ts", "../../@antv/g-lite/src/css/cssom/CSSGradientValue.ts", "../../@antv/g-lite/src/css/cssom/CSSKeywordValue.ts", "../../@antv/g-lite/src/css/cssom/CSSNumericValue.ts", "../../@antv/g-lite/src/css/cssom/CSSRGB.ts", "../../@antv/g-lite/src/css/CSSStyleValuePool.ts", "../../@antv/g-lite/src/utils/gradient.ts", "../../@antv/g-lite/src/css/parser/gradient.ts", "../../@antv/g-lite/src/css/parser/color.ts", "../../@antv/g-lite/src/css/parser/dimension.ts", "../../@antv/g-lite/src/css/parser/filter.ts", "../../@antv/g-lite/src/css/parser/numeric.ts", "../../@antv/g-lite/src/utils/path.ts", "../../@antv/g-lite/src/css/parser/path.ts", "../../@antv/g-lite/src/css/parser/points.ts", "../../@antv/g-lite/src/css/parser/transform.ts", "../../@antv/g-lite/src/css/parser/transform-origin.ts", "../../@antv/g-lite/src/css/StyleValueRegistry.ts", "../../@antv/g-lite/src/css/properties/CSSPropertyAngle.ts", "../../@antv/g-lite/src/css/properties/CSSPropertyClipPath.ts", "../../@antv/g-lite/src/css/properties/CSSPropertyColor.ts", "../../@antv/g-lite/src/css/properties/CSSPropertyFilter.ts", "../../@antv/g-lite/src/css/properties/CSSPropertyLengthOrPercentage.ts", "../../@antv/g-lite/src/css/properties/CSSPropertyLengthOrPercentage12.ts", "../../@antv/g-lite/src/css/properties/CSSPropertyLengthOrPercentage14.ts", "../../@antv/g-lite/src/css/properties/CSSPropertyMarker.ts", "../../@antv/g-lite/src/css/properties/CSSPropertyNumber.ts", "../../@antv/g-lite/src/css/properties/CSSPropertyOffsetDistance.ts", "../../@antv/g-lite/src/css/properties/CSSPropertyOpacity.ts", "../../@antv/g-lite/src/css/properties/CSSPropertyPath.ts", "../../@antv/g-lite/src/css/properties/CSSPropertyPoints.ts", "../../@antv/g-lite/src/css/properties/CSSPropertyShadowBlur.ts", "../../@antv/g-lite/src/css/properties/CSSPropertyText.ts", "../../@antv/g-lite/src/css/properties/CSSPropertyTextTransform.ts", "../../@antv/g-lite/src/utils/assert.ts", "../../@antv/g-lite/src/utils/canvas.ts", "../../@antv/g-lite/src/utils/dom.ts", "../../@antv/g-lite/src/utils/event.ts", "../../@antv/g-lite/src/utils/fragment.ts", "../../@antv/g-lite/src/utils/pointer-events.ts", "../../@antv/g-lite/src/utils/raf.ts", "../../@antv/g-lite/src/utils/tapable/AsyncParallelHook.ts", "../../@antv/g-lite/src/utils/tapable/AsyncSeriesWaterfallHook.ts", "../../@antv/g-lite/src/utils/tapable/SyncHook.ts", "../../@antv/g-lite/src/utils/tapable/SyncWaterfallHook.ts", "../../@antv/g-lite/src/utils/text.ts", "../../@antv/g-lite/src/utils/transform-mat4.ts", "../../@antv/g-lite/src/css/properties/CSSPropertyTransform.ts", "../../@antv/g-lite/src/css/properties/CSSPropertyTransformOrigin.ts", "../../@antv/g-lite/src/css/properties/CSSPropertyZIndex.ts", "../../@antv/g-lite/src/services/aabb/CircleUpdater.ts", "../../@antv/g-lite/src/services/aabb/EllipseUpdater.ts", "../../@antv/g-lite/src/services/aabb/LineUpdater.ts", "../../@antv/g-lite/src/services/aabb/PathUpdater.ts", "../../@antv/g-lite/src/services/aabb/PolylineUpdater.ts", "../../@antv/g-lite/src/services/aabb/RectUpdater.ts", "../../@antv/g-lite/src/services/aabb/TextUpdater.ts", "../../@antv/g-lite/src/services/aabb/GroupUpdater.ts", "../../@antv/g-lite/src/services/aabb/HTMLUpdater.ts", "../../@antv/g-lite/src/dom/FederatedEvent.ts", "../../@antv/g-lite/src/dom/FederatedMouseEvent.ts", "../../@antv/g-lite/src/dom/FederatedPointerEvent.ts", "../../@antv/g-lite/src/dom/FederatedWheelEvent.ts", "../../@antv/g-lite/src/dom/CustomEvent.ts", "../../@antv/g-lite/src/dom/EventTarget.ts", "../../@antv/g-lite/src/dom/Node.ts", "../../@antv/g-lite/src/services/EventService.ts", "../../@antv/g-lite/src/services/OffscreenCanvasCreator.ts", "../../@antv/g-lite/src/services/RenderingContext.ts", "../../@antv/g-lite/src/services/RenderingService.ts", "../../@antv/g-lite/src/services/SceneGraphSelector.ts", "../../@antv/g-lite/src/dom/interfaces.ts", "../../@antv/g-lite/src/dom/MutationEvent.ts", "../../@antv/g-lite/src/services/SceneGraphService.ts", "../../@antv/g-lite/src/utils/LRU.ts", "../../@antv/g-lite/src/services/TextService.ts", "../../@antv/g-lite/src/global-runtime.ts", "../../@antv/g-lite/src/dom/Element.ts", "../../@antv/g-lite/src/display-objects/DisplayObject.ts", "../../@antv/g-lite/src/display-objects/Circle.ts", "../../@antv/g-lite/src/display-objects/CustomElement.ts", "../../@antv/g-lite/src/display-objects/Ellipse.ts", "../../@antv/g-lite/src/display-objects/Fragment.ts", "../../@antv/g-lite/src/display-objects/Group.ts", "../../@antv/g-lite/src/display-objects/HTML.ts", "../../@antv/g-lite/src/display-objects/Image.ts", "../../@antv/g-lite/src/display-objects/Line.ts", "../../@antv/g-lite/src/display-objects/Path.ts", "../../@antv/g-lite/src/display-objects/Polygon.ts", "../../@antv/g-lite/src/display-objects/Polyline.ts", "../../@antv/g-lite/src/display-objects/Rect.ts", "../../@antv/g-lite/src/display-objects/Text.ts", "../../@antv/g-lite/src/dom/CustomElementRegistry.ts", "../../@antv/g-lite/src/css/CSS.ts", "../../@antv/g-lite/src/dom/Document.ts", "../../@antv/g-lite/src/plugins/CullingPlugin.ts", "../../@antv/g-lite/src/plugins/EventPlugin.ts", "../../@antv/g-lite/src/plugins/FrustumCullingStrategy.ts", "../../@antv/g-lite/src/plugins/PrepareRendererPlugin.ts", "../../@antv/g-lite/src/Canvas.ts", "../../@antv/g-camera-api/src/AdvancedCamera.ts", "../../@antv/g-camera-api/src/index.ts", "../../@antv/g-dom-mutation-observer-api/src/dom/MutationRecord.ts", "../../@antv/g-dom-mutation-observer-api/src/dom/MutationObserver.ts", "../../@antv/g-web-animations-api/src/dom/AnimationEvent.ts", "../../@antv/g-web-animations-api/src/dom/Animation.ts", "../../@antv/g-web-animations-api/src/utils/bezier-easing.ts", "../../@antv/g-web-animations-api/src/utils/custom-easing.ts", "../../@antv/g-web-animations-api/src/utils/animation.ts", "../../@antv/g-web-animations-api/src/utils/interpolation.ts", "../../@antv/g-web-animations-api/src/dom/AnimationEffectTiming.ts", "../../@antv/g-web-animations-api/src/dom/KeyframeList.ts", "../../@antv/g-web-animations-api/src/dom/KeyframeEffect.ts", "../../@antv/g-web-animations-api/src/dom/AnimationTimeline.ts", "../../@antv/g-web-animations-api/src/index.ts", "../../@antv/g-plugin-canvas-path-generator/src/paths/Circle.ts", "../../@antv/g-plugin-canvas-path-generator/src/paths/Ellipse.ts", "../../@antv/g-plugin-canvas-path-generator/src/paths/Line.ts", "../../@antv/g-plugin-canvas-path-generator/src/paths/Path.ts", "../../@antv/g-plugin-canvas-path-generator/src/paths/Polygon.ts", "../../@antv/g-plugin-canvas-path-generator/src/paths/Polyline.ts", "../../@antv/g-plugin-canvas-path-generator/src/paths/Rect.ts", "../../@antv/g-plugin-canvas-path-generator/src/index.ts", "../../@antv/g-plugin-canvas-picker/src/CanvasPickerPlugin.ts", "../../@antv/g-plugin-canvas-picker/src/Circle.ts", "../../@antv/g-plugin-canvas-picker/src/Ellipse.ts", "../../@antv/g-plugin-canvas-picker/src/utils/math.ts", "../../@antv/g-plugin-canvas-picker/src/Line.ts", "../../@antv/g-plugin-canvas-picker/src/Path.ts", "../../@antv/g-plugin-canvas-picker/src/Polygon.ts", "../../@antv/g-plugin-canvas-picker/src/Polyline.ts", "../../@antv/g-plugin-canvas-picker/src/Rect.ts", "../../@antv/g-plugin-canvas-picker/src/Image.ts", "../../@antv/g-plugin-canvas-picker/src/Text.ts", "../../@antv/g-plugin-canvas-picker/src/index.ts", "../../@babel/runtime/helpers/esm/classPrivateFieldLooseBase.js", "../../@babel/runtime/helpers/esm/classPrivateFieldLooseKey.js", "../../@antv/g-plugin-image-loader/src/RefCountCache.ts", "../../@antv/g-plugin-image-loader/src/ImageSlicer.ts", "../../@antv/g-plugin-image-loader/src/ImagePool.ts", "../../@antv/g-plugin-image-loader/src/LoadImagePlugin.ts", "../../@antv/g-plugin-image-loader/src/index.ts", "../../@antv/g-plugin-canvas-renderer/src/CanvasRendererPlugin.ts", "../../@antv/g-plugin-canvas-renderer/src/shapes/styles/helper.ts", "../../@antv/g-plugin-canvas-renderer/src/shapes/styles/OptimizedDefault.ts", "../../@antv/g-plugin-canvas-renderer/src/shapes/styles/Default.ts", "../../@antv/g-plugin-canvas-renderer/src/utils/math.ts", "../../@antv/g-plugin-canvas-renderer/src/shapes/styles/Image.ts", "../../@antv/g-plugin-canvas-renderer/src/shapes/styles/Text.ts", "../../@antv/g-plugin-canvas-renderer/src/index.ts", "../../@antv/g-plugin-dom-interaction/src/DOMInteractionPlugin.ts", "../../@antv/g-plugin-dom-interaction/src/index.ts", "../../@antv/g-plugin-html-renderer/src/HTMLRenderingPlugin.ts", "../../@antv/g-plugin-html-renderer/src/index.ts", "../../@antv/g-canvas/src/Canvas2DContextService.ts", "../../@antv/g-canvas/src/ContextRegisterPlugin.ts", "../../@antv/g-canvas/src/index.ts", "../../@antv/event-emitter/src/index.ts", "../../d3-force/src/center.js", "../../d3-quadtree/src/add.js", "../../d3-quadtree/src/cover.js", "../../d3-quadtree/src/data.js", "../../d3-quadtree/src/extent.js", "../../d3-quadtree/src/quad.js", "../../d3-quadtree/src/find.js", "../../d3-quadtree/src/remove.js", "../../d3-quadtree/src/root.js", "../../d3-quadtree/src/size.js", "../../d3-quadtree/src/visit.js", "../../d3-quadtree/src/visitAfter.js", "../../d3-quadtree/src/x.js", "../../d3-quadtree/src/y.js", "../../d3-quadtree/src/quadtree.js", "../../d3-force/src/constant.js", "../../d3-force/src/jiggle.js", "../../d3-force/src/collide.js", "../../d3-force/src/link.js", "../../d3-force/src/lcg.js", "../../d3-force/src/simulation.js", "../../d3-force/src/manyBody.js", "../../d3-force/src/radial.js", "../../d3-force/src/x.js", "../../d3-force/src/y.js", "../../@antv/component/src/util/angle-converter.ts", "../../@antv/component/src/util/bbox.ts", "../../@antv/component/src/util/callback.ts", "../../@antv/component/src/util/classnames.ts", "../../@antv/component/src/util/deep-assign.ts", "../../@antv/component/src/util/defined.ts", "../../@antv/component/src/util/text.ts", "../../@antv/component/src/util/ellipsis.ts", "../../@antv/component/src/util/wrap.ts", "../../@antv/component/src/util/event.ts", "../../@antv/component/src/util/traverse.ts", "../../@antv/component/src/util/visibility.ts", "../../@antv/component/src/util/offscreen.ts", "../../@antv/component/src/shapes/Text.ts", "../../@antv/component/src/util/extend-display-object.ts", "../../@antv/component/src/util/geometry/lines-intersection.ts", "../../@antv/component/src/util/geometry/line-length.ts", "../../@antv/component/src/util/group-by.ts", "../../@antv/component/src/util/if-show.ts", "../../@antv/component/src/util/in-range.ts", "../../@antv/component/src/util/interpolate.ts", "../../@antv/component/src/util/keyframe-interpolate.ts", "../../@antv/component/src/util/layout/utils/helper.ts", "../../@antv/component/src/util/layout/flex/index.ts", "../../@antv/component/src/util/layout/grid/index.ts", "../../@antv/component/src/util/layout/executer.ts", "../../@antv/component/src/util/matrix.ts", "../../@antv/component/src/util/number.ts", "../../@antv/component/src/util/omit.ts", "../../@antv/component/src/util/path.ts", "../../@antv/component/src/util/primitive.ts", "../../@antv/component/src/util/sampling.ts", "../../@antv/component/src/util/scale-to-pixel.ts", "../../@antv/component/src/util/group.ts", "../../@antv/component/src/util/selection.ts", "../../@antv/component/src/util/series.ts", "../../@antv/component/src/util/shape.ts", "../../@antv/component/src/util/string.ts", "../../@antv/component/src/util/style.ts", "../../@antv/component/src/util/svg2marker.ts", "../../@antv/component/src/util/time.ts", "../../@antv/component/src/util/transform.ts", "../../@antv/component/src/util/transpose.ts", "../../@antv/component/src/util/replace-children.ts", "../../@antv/component/src/util/pase-position.ts", "../../@antv/component/src/util/parse-height-from-html.ts", "../../@antv/component/src/animation/utils.ts", "../../@antv/component/src/animation/fadeOut.ts", "../../@antv/component/src/core/component.ts", "../../@antv/component/src/ui/axis/classname-map.ts", "../../@antv/component/src/ui/axis/constant.ts", "../../@antv/component/src/ui/grid/index.ts", "../../@antv/component/src/ui/axis/guides/utils.ts", "../../@antv/component/src/ui/axis/utils/classname.ts", "../../@antv/component/src/ui/axis/guides/line.ts", "../../@antv/component/src/ui/axis/guides/grid.ts", "../../@antv/component/src/ui/axis/utils/bounds.ts", "../../@antv/component/src/ui/axis/utils/contain.ts", "../../@antv/component/src/ui/axis/utils/intersect.ts", "../../@antv/component/src/ui/axis/utils/test.ts", "../../@antv/component/src/ui/axis/overlap/autoEllipsis.ts", "../../@antv/component/src/ui/axis/overlap/autoHide.ts", "../../@antv/component/src/ui/axis/overlap/autoRotate.ts", "../../@antv/component/src/ui/axis/overlap/autoWrap.ts", "../../@antv/component/src/ui/axis/overlap/index.ts", "../../@antv/component/src/ui/axis/utils/index.ts", "../../@antv/component/src/ui/axis/guides/labels.ts", "../../@antv/component/src/ui/axis/guides/ticks.ts", "../../@antv/component/src/ui/axis/guides/title.ts", "../../@antv/component/src/ui/axis/axis.ts", "../../@antv/component/src/ui/legend/utils/classname.ts", "../../@antv/component/src/ui/marker/symbol.ts", "../../@antv/component/src/ui/marker/utils.ts", "../../@antv/component/src/ui/marker/index.ts", "../../@antv/component/src/ui/legend/utils.ts", "../../@antv/component/src/ui/legend/classname-map.ts", "../../@antv/component/src/ui/legend/continuous/handle.ts", "../../@antv/component/src/ui/legend/constant.ts", "../../@antv/component/src/ui/legend/title/index.ts", "../../@antv/component/src/ui/navigator/index.ts", "../../@antv/component/src/ui/poptip/constant.ts", "../../@antv/component/src/ui/poptip/utils.ts", "../../@antv/component/src/ui/poptip/index.ts", "../../@antv/component/src/ui/legend/category/item.ts", "../../@antv/component/src/ui/legend/category/items.ts", "../../@antv/component/src/ui/legend/category.ts", "../../@antv/component/node_modules/@antv/scale/esm/utils/utils/compose.ts", "../../@antv/component/node_modules/@antv/scale/esm/utils/utils/normalize.ts", "../../@antv/component/node_modules/@antv/scale/esm/utils/utils/clamp.ts", "../../@antv/component/node_modules/@antv/scale/esm/utils/utils/bisect.ts", "../../@antv/component/node_modules/@antv/scale/esm/utils/utils/ticks.ts", "../../@antv/component/node_modules/@antv/scale/esm/utils/utils/d3-linear-nice.ts", "../../@antv/component/node_modules/@antv/scale/esm/utils/utils/time-interval.ts", "../../@antv/component/node_modules/@antv/scale/esm/utils/utils/utc-interval.ts", "../../@antv/component/node_modules/@antv/scale/esm/utils/utils/is-valid.ts", "../../@antv/component/node_modules/@antv/scale/esm/utils/utils/interpolatize.ts", "../../@antv/component/node_modules/@antv/scale/esm/utils/utils/color.ts", "../../@antv/component/node_modules/@antv/scale/esm/utils/utils/interpolate.ts", "../../@antv/component/node_modules/@antv/scale/esm/utils/utils/internMap.ts", "../../@antv/component/node_modules/@antv/scale/esm/scales/scales/base.ts", "../../@antv/component/node_modules/@antv/scale/esm/scales/scales/ordinal.ts", "../../@antv/component/node_modules/@antv/scale/esm/scales/scales/band.ts", "../../@antv/component/node_modules/@antv/scale/esm/tick-methods/tick-methods/d3-ticks.ts", "../../@antv/component/node_modules/@antv/scale/esm/tick-methods/tick-methods/wilkinson-extended.ts", "../../@antv/component/node_modules/@antv/scale/esm/scales/scales/continuous.ts", "../../@antv/component/node_modules/@antv/scale/esm/scales/scales/linear.ts", "../../fecha/src/fecha.ts", "../../@antv/component/node_modules/@antv/scale/esm/scales/scales/sequential.ts", "../../@antv/component/node_modules/@antv/scale/esm/scales/scales/diverging.ts", "../../@antv/component/src/ui/indicator/constant.ts", "../../@antv/component/src/ui/indicator/indicator.ts", "../../@antv/component/src/ui/slider/constant.ts", "../../@antv/component/src/ui/slider/handle.ts", "../../@antv/component/src/ui/legend/continuous/utils.ts", "../../@antv/component/src/ui/legend/continuous/ribbon.ts", "../../@antv/component/src/ui/legend/continuous.ts", "../../@antv/component/src/ui/tooltip/constant.ts", "../../@antv/component/src/ui/tooltip/index.ts", "../../@antv/component/src/ui/sparkline/columns.ts", "../../@antv/component/src/ui/sparkline/lines.ts", "../../@antv/component/src/ui/sparkline/path.ts", "../../@antv/component/src/ui/sparkline/utils.ts", "../../@antv/component/src/ui/sparkline/index.ts", "../../@antv/component/src/ui/slider/index.ts", "../../@antv/component/src/ui/select/option.ts", "../../@antv/component/src/ui/select/select.ts", "../../@antv/component/src/ui/timebar/icons.ts", "../../@antv/component/src/ui/timebar/controller.ts", "../../@antv/component/src/ui/timebar/handle.ts", "../../@antv/component/src/ui/timebar/utils.ts", "../../@antv/component/src/ui/timebar/timebar.ts", "../../@antv/component/src/ui/tag/index.ts", "../../@antv/component/src/ui/button/constant.ts", "../../@antv/component/src/ui/button/index.ts", "../../@antv/component/src/ui/breadcrumb/index.ts", "../../@antv/component/src/ui/scrollbar/index.ts", "../../@antv/component/src/ui/switch/constant.ts", "../../@antv/component/src/ui/switch/index.ts", "../../@antv/component/src/ui/crosshair/constant.ts", "../../@antv/component/src/ui/crosshair/base.ts", "../../@antv/component/src/ui/crosshair/line.ts", "../../@antv/component/src/ui/crosshair/circle.ts", "../../@antv/component/src/ui/crosshair/polygon.ts", "../../@antv/component/src/ui/checkbox/constant.ts", "../../@antv/component/src/ui/checkbox/index.ts", "../../@antv/component/src/ui/layout/layout.ts", "../../@antv/g-plugin-dragndrop/src/DragndropPlugin.ts", "../../@antv/g-plugin-dragndrop/src/index.ts"],
  "sourcesContent": ["/**\n * @license\n * Lodash <https://lodash.com/>\n * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n;(function() {\n\n  /** Used as a safe reference for `undefined` in pre-ES5 environments. */\n  var undefined;\n\n  /** Used as the semantic version number. */\n  var VERSION = '4.17.21';\n\n  /** Used as the size to enable large array optimizations. */\n  var LARGE_ARRAY_SIZE = 200;\n\n  /** Error message constants. */\n  var CORE_ERROR_TEXT = 'Unsupported core-js use. Try https://npms.io/search?q=ponyfill.',\n      FUNC_ERROR_TEXT = 'Expected a function',\n      INVALID_TEMPL_VAR_ERROR_TEXT = 'Invalid `variable` option passed into `_.template`';\n\n  /** Used to stand-in for `undefined` hash values. */\n  var HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n  /** Used as the maximum memoize cache size. */\n  var MAX_MEMOIZE_SIZE = 500;\n\n  /** Used as the internal argument placeholder. */\n  var PLACEHOLDER = '__lodash_placeholder__';\n\n  /** Used to compose bitmasks for cloning. */\n  var CLONE_DEEP_FLAG = 1,\n      CLONE_FLAT_FLAG = 2,\n      CLONE_SYMBOLS_FLAG = 4;\n\n  /** Used to compose bitmasks for value comparisons. */\n  var COMPARE_PARTIAL_FLAG = 1,\n      COMPARE_UNORDERED_FLAG = 2;\n\n  /** Used to compose bitmasks for function metadata. */\n  var WRAP_BIND_FLAG = 1,\n      WRAP_BIND_KEY_FLAG = 2,\n      WRAP_CURRY_BOUND_FLAG = 4,\n      WRAP_CURRY_FLAG = 8,\n      WRAP_CURRY_RIGHT_FLAG = 16,\n      WRAP_PARTIAL_FLAG = 32,\n      WRAP_PARTIAL_RIGHT_FLAG = 64,\n      WRAP_ARY_FLAG = 128,\n      WRAP_REARG_FLAG = 256,\n      WRAP_FLIP_FLAG = 512;\n\n  /** Used as default options for `_.truncate`. */\n  var DEFAULT_TRUNC_LENGTH = 30,\n      DEFAULT_TRUNC_OMISSION = '...';\n\n  /** Used to detect hot functions by number of calls within a span of milliseconds. */\n  var HOT_COUNT = 800,\n      HOT_SPAN = 16;\n\n  /** Used to indicate the type of lazy iteratees. */\n  var LAZY_FILTER_FLAG = 1,\n      LAZY_MAP_FLAG = 2,\n      LAZY_WHILE_FLAG = 3;\n\n  /** Used as references for various `Number` constants. */\n  var INFINITY = 1 / 0,\n      MAX_SAFE_INTEGER = 9007199254740991,\n      MAX_INTEGER = 1.7976931348623157e+308,\n      NAN = 0 / 0;\n\n  /** Used as references for the maximum length and index of an array. */\n  var MAX_ARRAY_LENGTH = 4294967295,\n      MAX_ARRAY_INDEX = MAX_ARRAY_LENGTH - 1,\n      HALF_MAX_ARRAY_LENGTH = MAX_ARRAY_LENGTH >>> 1;\n\n  /** Used to associate wrap methods with their bit flags. */\n  var wrapFlags = [\n    ['ary', WRAP_ARY_FLAG],\n    ['bind', WRAP_BIND_FLAG],\n    ['bindKey', WRAP_BIND_KEY_FLAG],\n    ['curry', WRAP_CURRY_FLAG],\n    ['curryRight', WRAP_CURRY_RIGHT_FLAG],\n    ['flip', WRAP_FLIP_FLAG],\n    ['partial', WRAP_PARTIAL_FLAG],\n    ['partialRight', WRAP_PARTIAL_RIGHT_FLAG],\n    ['rearg', WRAP_REARG_FLAG]\n  ];\n\n  /** `Object#toString` result references. */\n  var argsTag = '[object Arguments]',\n      arrayTag = '[object Array]',\n      asyncTag = '[object AsyncFunction]',\n      boolTag = '[object Boolean]',\n      dateTag = '[object Date]',\n      domExcTag = '[object DOMException]',\n      errorTag = '[object Error]',\n      funcTag = '[object Function]',\n      genTag = '[object GeneratorFunction]',\n      mapTag = '[object Map]',\n      numberTag = '[object Number]',\n      nullTag = '[object Null]',\n      objectTag = '[object Object]',\n      promiseTag = '[object Promise]',\n      proxyTag = '[object Proxy]',\n      regexpTag = '[object RegExp]',\n      setTag = '[object Set]',\n      stringTag = '[object String]',\n      symbolTag = '[object Symbol]',\n      undefinedTag = '[object Undefined]',\n      weakMapTag = '[object WeakMap]',\n      weakSetTag = '[object WeakSet]';\n\n  var arrayBufferTag = '[object ArrayBuffer]',\n      dataViewTag = '[object DataView]',\n      float32Tag = '[object Float32Array]',\n      float64Tag = '[object Float64Array]',\n      int8Tag = '[object Int8Array]',\n      int16Tag = '[object Int16Array]',\n      int32Tag = '[object Int32Array]',\n      uint8Tag = '[object Uint8Array]',\n      uint8ClampedTag = '[object Uint8ClampedArray]',\n      uint16Tag = '[object Uint16Array]',\n      uint32Tag = '[object Uint32Array]';\n\n  /** Used to match empty string literals in compiled template source. */\n  var reEmptyStringLeading = /\\b__p \\+= '';/g,\n      reEmptyStringMiddle = /\\b(__p \\+=) '' \\+/g,\n      reEmptyStringTrailing = /(__e\\(.*?\\)|\\b__t\\)) \\+\\n'';/g;\n\n  /** Used to match HTML entities and HTML characters. */\n  var reEscapedHtml = /&(?:amp|lt|gt|quot|#39);/g,\n      reUnescapedHtml = /[&<>\"']/g,\n      reHasEscapedHtml = RegExp(reEscapedHtml.source),\n      reHasUnescapedHtml = RegExp(reUnescapedHtml.source);\n\n  /** Used to match template delimiters. */\n  var reEscape = /<%-([\\s\\S]+?)%>/g,\n      reEvaluate = /<%([\\s\\S]+?)%>/g,\n      reInterpolate = /<%=([\\s\\S]+?)%>/g;\n\n  /** Used to match property names within property paths. */\n  var reIsDeepProp = /\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,\n      reIsPlainProp = /^\\w*$/,\n      rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g;\n\n  /**\n   * Used to match `RegExp`\n   * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n   */\n  var reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g,\n      reHasRegExpChar = RegExp(reRegExpChar.source);\n\n  /** Used to match leading whitespace. */\n  var reTrimStart = /^\\s+/;\n\n  /** Used to match a single whitespace character. */\n  var reWhitespace = /\\s/;\n\n  /** Used to match wrap detail comments. */\n  var reWrapComment = /\\{(?:\\n\\/\\* \\[wrapped with .+\\] \\*\\/)?\\n?/,\n      reWrapDetails = /\\{\\n\\/\\* \\[wrapped with (.+)\\] \\*/,\n      reSplitDetails = /,? & /;\n\n  /** Used to match words composed of alphanumeric characters. */\n  var reAsciiWord = /[^\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\x7f]+/g;\n\n  /**\n   * Used to validate the `validate` option in `_.template` variable.\n   *\n   * Forbids characters which could potentially change the meaning of the function argument definition:\n   * - \"(),\" (modification of function parameters)\n   * - \"=\" (default value)\n   * - \"[]{}\" (destructuring of function parameters)\n   * - \"/\" (beginning of a comment)\n   * - whitespace\n   */\n  var reForbiddenIdentifierChars = /[()=,{}\\[\\]\\/\\s]/;\n\n  /** Used to match backslashes in property paths. */\n  var reEscapeChar = /\\\\(\\\\)?/g;\n\n  /**\n   * Used to match\n   * [ES template delimiters](http://ecma-international.org/ecma-262/7.0/#sec-template-literal-lexical-components).\n   */\n  var reEsTemplate = /\\$\\{([^\\\\}]*(?:\\\\.[^\\\\}]*)*)\\}/g;\n\n  /** Used to match `RegExp` flags from their coerced string values. */\n  var reFlags = /\\w*$/;\n\n  /** Used to detect bad signed hexadecimal string values. */\n  var reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n  /** Used to detect binary string values. */\n  var reIsBinary = /^0b[01]+$/i;\n\n  /** Used to detect host constructors (Safari). */\n  var reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n  /** Used to detect octal string values. */\n  var reIsOctal = /^0o[0-7]+$/i;\n\n  /** Used to detect unsigned integer values. */\n  var reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n  /** Used to match Latin Unicode letters (excluding mathematical operators). */\n  var reLatin = /[\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\xff\\u0100-\\u017f]/g;\n\n  /** Used to ensure capturing order of template delimiters. */\n  var reNoMatch = /($^)/;\n\n  /** Used to match unescaped characters in compiled string literals. */\n  var reUnescapedString = /['\\n\\r\\u2028\\u2029\\\\]/g;\n\n  /** Used to compose unicode character classes. */\n  var rsAstralRange = '\\\\ud800-\\\\udfff',\n      rsComboMarksRange = '\\\\u0300-\\\\u036f',\n      reComboHalfMarksRange = '\\\\ufe20-\\\\ufe2f',\n      rsComboSymbolsRange = '\\\\u20d0-\\\\u20ff',\n      rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange,\n      rsDingbatRange = '\\\\u2700-\\\\u27bf',\n      rsLowerRange = 'a-z\\\\xdf-\\\\xf6\\\\xf8-\\\\xff',\n      rsMathOpRange = '\\\\xac\\\\xb1\\\\xd7\\\\xf7',\n      rsNonCharRange = '\\\\x00-\\\\x2f\\\\x3a-\\\\x40\\\\x5b-\\\\x60\\\\x7b-\\\\xbf',\n      rsPunctuationRange = '\\\\u2000-\\\\u206f',\n      rsSpaceRange = ' \\\\t\\\\x0b\\\\f\\\\xa0\\\\ufeff\\\\n\\\\r\\\\u2028\\\\u2029\\\\u1680\\\\u180e\\\\u2000\\\\u2001\\\\u2002\\\\u2003\\\\u2004\\\\u2005\\\\u2006\\\\u2007\\\\u2008\\\\u2009\\\\u200a\\\\u202f\\\\u205f\\\\u3000',\n      rsUpperRange = 'A-Z\\\\xc0-\\\\xd6\\\\xd8-\\\\xde',\n      rsVarRange = '\\\\ufe0e\\\\ufe0f',\n      rsBreakRange = rsMathOpRange + rsNonCharRange + rsPunctuationRange + rsSpaceRange;\n\n  /** Used to compose unicode capture groups. */\n  var rsApos = \"['\\u2019]\",\n      rsAstral = '[' + rsAstralRange + ']',\n      rsBreak = '[' + rsBreakRange + ']',\n      rsCombo = '[' + rsComboRange + ']',\n      rsDigits = '\\\\d+',\n      rsDingbat = '[' + rsDingbatRange + ']',\n      rsLower = '[' + rsLowerRange + ']',\n      rsMisc = '[^' + rsAstralRange + rsBreakRange + rsDigits + rsDingbatRange + rsLowerRange + rsUpperRange + ']',\n      rsFitz = '\\\\ud83c[\\\\udffb-\\\\udfff]',\n      rsModifier = '(?:' + rsCombo + '|' + rsFitz + ')',\n      rsNonAstral = '[^' + rsAstralRange + ']',\n      rsRegional = '(?:\\\\ud83c[\\\\udde6-\\\\uddff]){2}',\n      rsSurrPair = '[\\\\ud800-\\\\udbff][\\\\udc00-\\\\udfff]',\n      rsUpper = '[' + rsUpperRange + ']',\n      rsZWJ = '\\\\u200d';\n\n  /** Used to compose unicode regexes. */\n  var rsMiscLower = '(?:' + rsLower + '|' + rsMisc + ')',\n      rsMiscUpper = '(?:' + rsUpper + '|' + rsMisc + ')',\n      rsOptContrLower = '(?:' + rsApos + '(?:d|ll|m|re|s|t|ve))?',\n      rsOptContrUpper = '(?:' + rsApos + '(?:D|LL|M|RE|S|T|VE))?',\n      reOptMod = rsModifier + '?',\n      rsOptVar = '[' + rsVarRange + ']?',\n      rsOptJoin = '(?:' + rsZWJ + '(?:' + [rsNonAstral, rsRegional, rsSurrPair].join('|') + ')' + rsOptVar + reOptMod + ')*',\n      rsOrdLower = '\\\\d*(?:1st|2nd|3rd|(?![123])\\\\dth)(?=\\\\b|[A-Z_])',\n      rsOrdUpper = '\\\\d*(?:1ST|2ND|3RD|(?![123])\\\\dTH)(?=\\\\b|[a-z_])',\n      rsSeq = rsOptVar + reOptMod + rsOptJoin,\n      rsEmoji = '(?:' + [rsDingbat, rsRegional, rsSurrPair].join('|') + ')' + rsSeq,\n      rsSymbol = '(?:' + [rsNonAstral + rsCombo + '?', rsCombo, rsRegional, rsSurrPair, rsAstral].join('|') + ')';\n\n  /** Used to match apostrophes. */\n  var reApos = RegExp(rsApos, 'g');\n\n  /**\n   * Used to match [combining diacritical marks](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks) and\n   * [combining diacritical marks for symbols](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks_for_Symbols).\n   */\n  var reComboMark = RegExp(rsCombo, 'g');\n\n  /** Used to match [string symbols](https://mathiasbynens.be/notes/javascript-unicode). */\n  var reUnicode = RegExp(rsFitz + '(?=' + rsFitz + ')|' + rsSymbol + rsSeq, 'g');\n\n  /** Used to match complex or compound words. */\n  var reUnicodeWord = RegExp([\n    rsUpper + '?' + rsLower + '+' + rsOptContrLower + '(?=' + [rsBreak, rsUpper, '$'].join('|') + ')',\n    rsMiscUpper + '+' + rsOptContrUpper + '(?=' + [rsBreak, rsUpper + rsMiscLower, '$'].join('|') + ')',\n    rsUpper + '?' + rsMiscLower + '+' + rsOptContrLower,\n    rsUpper + '+' + rsOptContrUpper,\n    rsOrdUpper,\n    rsOrdLower,\n    rsDigits,\n    rsEmoji\n  ].join('|'), 'g');\n\n  /** Used to detect strings with [zero-width joiners or code points from the astral planes](http://eev.ee/blog/2015/09/12/dark-corners-of-unicode/). */\n  var reHasUnicode = RegExp('[' + rsZWJ + rsAstralRange  + rsComboRange + rsVarRange + ']');\n\n  /** Used to detect strings that need a more robust regexp to match words. */\n  var reHasUnicodeWord = /[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;\n\n  /** Used to assign default `context` object properties. */\n  var contextProps = [\n    'Array', 'Buffer', 'DataView', 'Date', 'Error', 'Float32Array', 'Float64Array',\n    'Function', 'Int8Array', 'Int16Array', 'Int32Array', 'Map', 'Math', 'Object',\n    'Promise', 'RegExp', 'Set', 'String', 'Symbol', 'TypeError', 'Uint8Array',\n    'Uint8ClampedArray', 'Uint16Array', 'Uint32Array', 'WeakMap',\n    '_', 'clearTimeout', 'isFinite', 'parseInt', 'setTimeout'\n  ];\n\n  /** Used to make template sourceURLs easier to identify. */\n  var templateCounter = -1;\n\n  /** Used to identify `toStringTag` values of typed arrays. */\n  var typedArrayTags = {};\n  typedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\n  typedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\n  typedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\n  typedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\n  typedArrayTags[uint32Tag] = true;\n  typedArrayTags[argsTag] = typedArrayTags[arrayTag] =\n  typedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\n  typedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\n  typedArrayTags[errorTag] = typedArrayTags[funcTag] =\n  typedArrayTags[mapTag] = typedArrayTags[numberTag] =\n  typedArrayTags[objectTag] = typedArrayTags[regexpTag] =\n  typedArrayTags[setTag] = typedArrayTags[stringTag] =\n  typedArrayTags[weakMapTag] = false;\n\n  /** Used to identify `toStringTag` values supported by `_.clone`. */\n  var cloneableTags = {};\n  cloneableTags[argsTag] = cloneableTags[arrayTag] =\n  cloneableTags[arrayBufferTag] = cloneableTags[dataViewTag] =\n  cloneableTags[boolTag] = cloneableTags[dateTag] =\n  cloneableTags[float32Tag] = cloneableTags[float64Tag] =\n  cloneableTags[int8Tag] = cloneableTags[int16Tag] =\n  cloneableTags[int32Tag] = cloneableTags[mapTag] =\n  cloneableTags[numberTag] = cloneableTags[objectTag] =\n  cloneableTags[regexpTag] = cloneableTags[setTag] =\n  cloneableTags[stringTag] = cloneableTags[symbolTag] =\n  cloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] =\n  cloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;\n  cloneableTags[errorTag] = cloneableTags[funcTag] =\n  cloneableTags[weakMapTag] = false;\n\n  /** Used to map Latin Unicode letters to basic Latin letters. */\n  var deburredLetters = {\n    // Latin-1 Supplement block.\n    '\\xc0': 'A',  '\\xc1': 'A', '\\xc2': 'A', '\\xc3': 'A', '\\xc4': 'A', '\\xc5': 'A',\n    '\\xe0': 'a',  '\\xe1': 'a', '\\xe2': 'a', '\\xe3': 'a', '\\xe4': 'a', '\\xe5': 'a',\n    '\\xc7': 'C',  '\\xe7': 'c',\n    '\\xd0': 'D',  '\\xf0': 'd',\n    '\\xc8': 'E',  '\\xc9': 'E', '\\xca': 'E', '\\xcb': 'E',\n    '\\xe8': 'e',  '\\xe9': 'e', '\\xea': 'e', '\\xeb': 'e',\n    '\\xcc': 'I',  '\\xcd': 'I', '\\xce': 'I', '\\xcf': 'I',\n    '\\xec': 'i',  '\\xed': 'i', '\\xee': 'i', '\\xef': 'i',\n    '\\xd1': 'N',  '\\xf1': 'n',\n    '\\xd2': 'O',  '\\xd3': 'O', '\\xd4': 'O', '\\xd5': 'O', '\\xd6': 'O', '\\xd8': 'O',\n    '\\xf2': 'o',  '\\xf3': 'o', '\\xf4': 'o', '\\xf5': 'o', '\\xf6': 'o', '\\xf8': 'o',\n    '\\xd9': 'U',  '\\xda': 'U', '\\xdb': 'U', '\\xdc': 'U',\n    '\\xf9': 'u',  '\\xfa': 'u', '\\xfb': 'u', '\\xfc': 'u',\n    '\\xdd': 'Y',  '\\xfd': 'y', '\\xff': 'y',\n    '\\xc6': 'Ae', '\\xe6': 'ae',\n    '\\xde': 'Th', '\\xfe': 'th',\n    '\\xdf': 'ss',\n    // Latin Extended-A block.\n    '\\u0100': 'A',  '\\u0102': 'A', '\\u0104': 'A',\n    '\\u0101': 'a',  '\\u0103': 'a', '\\u0105': 'a',\n    '\\u0106': 'C',  '\\u0108': 'C', '\\u010a': 'C', '\\u010c': 'C',\n    '\\u0107': 'c',  '\\u0109': 'c', '\\u010b': 'c', '\\u010d': 'c',\n    '\\u010e': 'D',  '\\u0110': 'D', '\\u010f': 'd', '\\u0111': 'd',\n    '\\u0112': 'E',  '\\u0114': 'E', '\\u0116': 'E', '\\u0118': 'E', '\\u011a': 'E',\n    '\\u0113': 'e',  '\\u0115': 'e', '\\u0117': 'e', '\\u0119': 'e', '\\u011b': 'e',\n    '\\u011c': 'G',  '\\u011e': 'G', '\\u0120': 'G', '\\u0122': 'G',\n    '\\u011d': 'g',  '\\u011f': 'g', '\\u0121': 'g', '\\u0123': 'g',\n    '\\u0124': 'H',  '\\u0126': 'H', '\\u0125': 'h', '\\u0127': 'h',\n    '\\u0128': 'I',  '\\u012a': 'I', '\\u012c': 'I', '\\u012e': 'I', '\\u0130': 'I',\n    '\\u0129': 'i',  '\\u012b': 'i', '\\u012d': 'i', '\\u012f': 'i', '\\u0131': 'i',\n    '\\u0134': 'J',  '\\u0135': 'j',\n    '\\u0136': 'K',  '\\u0137': 'k', '\\u0138': 'k',\n    '\\u0139': 'L',  '\\u013b': 'L', '\\u013d': 'L', '\\u013f': 'L', '\\u0141': 'L',\n    '\\u013a': 'l',  '\\u013c': 'l', '\\u013e': 'l', '\\u0140': 'l', '\\u0142': 'l',\n    '\\u0143': 'N',  '\\u0145': 'N', '\\u0147': 'N', '\\u014a': 'N',\n    '\\u0144': 'n',  '\\u0146': 'n', '\\u0148': 'n', '\\u014b': 'n',\n    '\\u014c': 'O',  '\\u014e': 'O', '\\u0150': 'O',\n    '\\u014d': 'o',  '\\u014f': 'o', '\\u0151': 'o',\n    '\\u0154': 'R',  '\\u0156': 'R', '\\u0158': 'R',\n    '\\u0155': 'r',  '\\u0157': 'r', '\\u0159': 'r',\n    '\\u015a': 'S',  '\\u015c': 'S', '\\u015e': 'S', '\\u0160': 'S',\n    '\\u015b': 's',  '\\u015d': 's', '\\u015f': 's', '\\u0161': 's',\n    '\\u0162': 'T',  '\\u0164': 'T', '\\u0166': 'T',\n    '\\u0163': 't',  '\\u0165': 't', '\\u0167': 't',\n    '\\u0168': 'U',  '\\u016a': 'U', '\\u016c': 'U', '\\u016e': 'U', '\\u0170': 'U', '\\u0172': 'U',\n    '\\u0169': 'u',  '\\u016b': 'u', '\\u016d': 'u', '\\u016f': 'u', '\\u0171': 'u', '\\u0173': 'u',\n    '\\u0174': 'W',  '\\u0175': 'w',\n    '\\u0176': 'Y',  '\\u0177': 'y', '\\u0178': 'Y',\n    '\\u0179': 'Z',  '\\u017b': 'Z', '\\u017d': 'Z',\n    '\\u017a': 'z',  '\\u017c': 'z', '\\u017e': 'z',\n    '\\u0132': 'IJ', '\\u0133': 'ij',\n    '\\u0152': 'Oe', '\\u0153': 'oe',\n    '\\u0149': \"'n\", '\\u017f': 's'\n  };\n\n  /** Used to map characters to HTML entities. */\n  var htmlEscapes = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#39;'\n  };\n\n  /** Used to map HTML entities to characters. */\n  var htmlUnescapes = {\n    '&amp;': '&',\n    '&lt;': '<',\n    '&gt;': '>',\n    '&quot;': '\"',\n    '&#39;': \"'\"\n  };\n\n  /** Used to escape characters for inclusion in compiled string literals. */\n  var stringEscapes = {\n    '\\\\': '\\\\',\n    \"'\": \"'\",\n    '\\n': 'n',\n    '\\r': 'r',\n    '\\u2028': 'u2028',\n    '\\u2029': 'u2029'\n  };\n\n  /** Built-in method references without a dependency on `root`. */\n  var freeParseFloat = parseFloat,\n      freeParseInt = parseInt;\n\n  /** Detect free variable `global` from Node.js. */\n  var freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n  /** Detect free variable `self`. */\n  var freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n  /** Used as a reference to the global object. */\n  var root = freeGlobal || freeSelf || Function('return this')();\n\n  /** Detect free variable `exports`. */\n  var freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n  /** Detect free variable `module`. */\n  var freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n  /** Detect the popular CommonJS extension `module.exports`. */\n  var moduleExports = freeModule && freeModule.exports === freeExports;\n\n  /** Detect free variable `process` from Node.js. */\n  var freeProcess = moduleExports && freeGlobal.process;\n\n  /** Used to access faster Node.js helpers. */\n  var nodeUtil = (function() {\n    try {\n      // Use `util.types` for Node.js 10+.\n      var types = freeModule && freeModule.require && freeModule.require('util').types;\n\n      if (types) {\n        return types;\n      }\n\n      // Legacy `process.binding('util')` for Node.js < 10.\n      return freeProcess && freeProcess.binding && freeProcess.binding('util');\n    } catch (e) {}\n  }());\n\n  /* Node.js helper references. */\n  var nodeIsArrayBuffer = nodeUtil && nodeUtil.isArrayBuffer,\n      nodeIsDate = nodeUtil && nodeUtil.isDate,\n      nodeIsMap = nodeUtil && nodeUtil.isMap,\n      nodeIsRegExp = nodeUtil && nodeUtil.isRegExp,\n      nodeIsSet = nodeUtil && nodeUtil.isSet,\n      nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n  /*--------------------------------------------------------------------------*/\n\n  /**\n   * A faster alternative to `Function#apply`, this function invokes `func`\n   * with the `this` binding of `thisArg` and the arguments of `args`.\n   *\n   * @private\n   * @param {Function} func The function to invoke.\n   * @param {*} thisArg The `this` binding of `func`.\n   * @param {Array} args The arguments to invoke `func` with.\n   * @returns {*} Returns the result of `func`.\n   */\n  function apply(func, thisArg, args) {\n    switch (args.length) {\n      case 0: return func.call(thisArg);\n      case 1: return func.call(thisArg, args[0]);\n      case 2: return func.call(thisArg, args[0], args[1]);\n      case 3: return func.call(thisArg, args[0], args[1], args[2]);\n    }\n    return func.apply(thisArg, args);\n  }\n\n  /**\n   * A specialized version of `baseAggregator` for arrays.\n   *\n   * @private\n   * @param {Array} [array] The array to iterate over.\n   * @param {Function} setter The function to set `accumulator` values.\n   * @param {Function} iteratee The iteratee to transform keys.\n   * @param {Object} accumulator The initial aggregated object.\n   * @returns {Function} Returns `accumulator`.\n   */\n  function arrayAggregator(array, setter, iteratee, accumulator) {\n    var index = -1,\n        length = array == null ? 0 : array.length;\n\n    while (++index < length) {\n      var value = array[index];\n      setter(accumulator, value, iteratee(value), array);\n    }\n    return accumulator;\n  }\n\n  /**\n   * A specialized version of `_.forEach` for arrays without support for\n   * iteratee shorthands.\n   *\n   * @private\n   * @param {Array} [array] The array to iterate over.\n   * @param {Function} iteratee The function invoked per iteration.\n   * @returns {Array} Returns `array`.\n   */\n  function arrayEach(array, iteratee) {\n    var index = -1,\n        length = array == null ? 0 : array.length;\n\n    while (++index < length) {\n      if (iteratee(array[index], index, array) === false) {\n        break;\n      }\n    }\n    return array;\n  }\n\n  /**\n   * A specialized version of `_.forEachRight` for arrays without support for\n   * iteratee shorthands.\n   *\n   * @private\n   * @param {Array} [array] The array to iterate over.\n   * @param {Function} iteratee The function invoked per iteration.\n   * @returns {Array} Returns `array`.\n   */\n  function arrayEachRight(array, iteratee) {\n    var length = array == null ? 0 : array.length;\n\n    while (length--) {\n      if (iteratee(array[length], length, array) === false) {\n        break;\n      }\n    }\n    return array;\n  }\n\n  /**\n   * A specialized version of `_.every` for arrays without support for\n   * iteratee shorthands.\n   *\n   * @private\n   * @param {Array} [array] The array to iterate over.\n   * @param {Function} predicate The function invoked per iteration.\n   * @returns {boolean} Returns `true` if all elements pass the predicate check,\n   *  else `false`.\n   */\n  function arrayEvery(array, predicate) {\n    var index = -1,\n        length = array == null ? 0 : array.length;\n\n    while (++index < length) {\n      if (!predicate(array[index], index, array)) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  /**\n   * A specialized version of `_.filter` for arrays without support for\n   * iteratee shorthands.\n   *\n   * @private\n   * @param {Array} [array] The array to iterate over.\n   * @param {Function} predicate The function invoked per iteration.\n   * @returns {Array} Returns the new filtered array.\n   */\n  function arrayFilter(array, predicate) {\n    var index = -1,\n        length = array == null ? 0 : array.length,\n        resIndex = 0,\n        result = [];\n\n    while (++index < length) {\n      var value = array[index];\n      if (predicate(value, index, array)) {\n        result[resIndex++] = value;\n      }\n    }\n    return result;\n  }\n\n  /**\n   * A specialized version of `_.includes` for arrays without support for\n   * specifying an index to search from.\n   *\n   * @private\n   * @param {Array} [array] The array to inspect.\n   * @param {*} target The value to search for.\n   * @returns {boolean} Returns `true` if `target` is found, else `false`.\n   */\n  function arrayIncludes(array, value) {\n    var length = array == null ? 0 : array.length;\n    return !!length && baseIndexOf(array, value, 0) > -1;\n  }\n\n  /**\n   * This function is like `arrayIncludes` except that it accepts a comparator.\n   *\n   * @private\n   * @param {Array} [array] The array to inspect.\n   * @param {*} target The value to search for.\n   * @param {Function} comparator The comparator invoked per element.\n   * @returns {boolean} Returns `true` if `target` is found, else `false`.\n   */\n  function arrayIncludesWith(array, value, comparator) {\n    var index = -1,\n        length = array == null ? 0 : array.length;\n\n    while (++index < length) {\n      if (comparator(value, array[index])) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  /**\n   * A specialized version of `_.map` for arrays without support for iteratee\n   * shorthands.\n   *\n   * @private\n   * @param {Array} [array] The array to iterate over.\n   * @param {Function} iteratee The function invoked per iteration.\n   * @returns {Array} Returns the new mapped array.\n   */\n  function arrayMap(array, iteratee) {\n    var index = -1,\n        length = array == null ? 0 : array.length,\n        result = Array(length);\n\n    while (++index < length) {\n      result[index] = iteratee(array[index], index, array);\n    }\n    return result;\n  }\n\n  /**\n   * Appends the elements of `values` to `array`.\n   *\n   * @private\n   * @param {Array} array The array to modify.\n   * @param {Array} values The values to append.\n   * @returns {Array} Returns `array`.\n   */\n  function arrayPush(array, values) {\n    var index = -1,\n        length = values.length,\n        offset = array.length;\n\n    while (++index < length) {\n      array[offset + index] = values[index];\n    }\n    return array;\n  }\n\n  /**\n   * A specialized version of `_.reduce` for arrays without support for\n   * iteratee shorthands.\n   *\n   * @private\n   * @param {Array} [array] The array to iterate over.\n   * @param {Function} iteratee The function invoked per iteration.\n   * @param {*} [accumulator] The initial value.\n   * @param {boolean} [initAccum] Specify using the first element of `array` as\n   *  the initial value.\n   * @returns {*} Returns the accumulated value.\n   */\n  function arrayReduce(array, iteratee, accumulator, initAccum) {\n    var index = -1,\n        length = array == null ? 0 : array.length;\n\n    if (initAccum && length) {\n      accumulator = array[++index];\n    }\n    while (++index < length) {\n      accumulator = iteratee(accumulator, array[index], index, array);\n    }\n    return accumulator;\n  }\n\n  /**\n   * A specialized version of `_.reduceRight` for arrays without support for\n   * iteratee shorthands.\n   *\n   * @private\n   * @param {Array} [array] The array to iterate over.\n   * @param {Function} iteratee The function invoked per iteration.\n   * @param {*} [accumulator] The initial value.\n   * @param {boolean} [initAccum] Specify using the last element of `array` as\n   *  the initial value.\n   * @returns {*} Returns the accumulated value.\n   */\n  function arrayReduceRight(array, iteratee, accumulator, initAccum) {\n    var length = array == null ? 0 : array.length;\n    if (initAccum && length) {\n      accumulator = array[--length];\n    }\n    while (length--) {\n      accumulator = iteratee(accumulator, array[length], length, array);\n    }\n    return accumulator;\n  }\n\n  /**\n   * A specialized version of `_.some` for arrays without support for iteratee\n   * shorthands.\n   *\n   * @private\n   * @param {Array} [array] The array to iterate over.\n   * @param {Function} predicate The function invoked per iteration.\n   * @returns {boolean} Returns `true` if any element passes the predicate check,\n   *  else `false`.\n   */\n  function arraySome(array, predicate) {\n    var index = -1,\n        length = array == null ? 0 : array.length;\n\n    while (++index < length) {\n      if (predicate(array[index], index, array)) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  /**\n   * Gets the size of an ASCII `string`.\n   *\n   * @private\n   * @param {string} string The string inspect.\n   * @returns {number} Returns the string size.\n   */\n  var asciiSize = baseProperty('length');\n\n  /**\n   * Converts an ASCII `string` to an array.\n   *\n   * @private\n   * @param {string} string The string to convert.\n   * @returns {Array} Returns the converted array.\n   */\n  function asciiToArray(string) {\n    return string.split('');\n  }\n\n  /**\n   * Splits an ASCII `string` into an array of its words.\n   *\n   * @private\n   * @param {string} The string to inspect.\n   * @returns {Array} Returns the words of `string`.\n   */\n  function asciiWords(string) {\n    return string.match(reAsciiWord) || [];\n  }\n\n  /**\n   * The base implementation of methods like `_.findKey` and `_.findLastKey`,\n   * without support for iteratee shorthands, which iterates over `collection`\n   * using `eachFunc`.\n   *\n   * @private\n   * @param {Array|Object} collection The collection to inspect.\n   * @param {Function} predicate The function invoked per iteration.\n   * @param {Function} eachFunc The function to iterate over `collection`.\n   * @returns {*} Returns the found element or its key, else `undefined`.\n   */\n  function baseFindKey(collection, predicate, eachFunc) {\n    var result;\n    eachFunc(collection, function(value, key, collection) {\n      if (predicate(value, key, collection)) {\n        result = key;\n        return false;\n      }\n    });\n    return result;\n  }\n\n  /**\n   * The base implementation of `_.findIndex` and `_.findLastIndex` without\n   * support for iteratee shorthands.\n   *\n   * @private\n   * @param {Array} array The array to inspect.\n   * @param {Function} predicate The function invoked per iteration.\n   * @param {number} fromIndex The index to search from.\n   * @param {boolean} [fromRight] Specify iterating from right to left.\n   * @returns {number} Returns the index of the matched value, else `-1`.\n   */\n  function baseFindIndex(array, predicate, fromIndex, fromRight) {\n    var length = array.length,\n        index = fromIndex + (fromRight ? 1 : -1);\n\n    while ((fromRight ? index-- : ++index < length)) {\n      if (predicate(array[index], index, array)) {\n        return index;\n      }\n    }\n    return -1;\n  }\n\n  /**\n   * The base implementation of `_.indexOf` without `fromIndex` bounds checks.\n   *\n   * @private\n   * @param {Array} array The array to inspect.\n   * @param {*} value The value to search for.\n   * @param {number} fromIndex The index to search from.\n   * @returns {number} Returns the index of the matched value, else `-1`.\n   */\n  function baseIndexOf(array, value, fromIndex) {\n    return value === value\n      ? strictIndexOf(array, value, fromIndex)\n      : baseFindIndex(array, baseIsNaN, fromIndex);\n  }\n\n  /**\n   * This function is like `baseIndexOf` except that it accepts a comparator.\n   *\n   * @private\n   * @param {Array} array The array to inspect.\n   * @param {*} value The value to search for.\n   * @param {number} fromIndex The index to search from.\n   * @param {Function} comparator The comparator invoked per element.\n   * @returns {number} Returns the index of the matched value, else `-1`.\n   */\n  function baseIndexOfWith(array, value, fromIndex, comparator) {\n    var index = fromIndex - 1,\n        length = array.length;\n\n    while (++index < length) {\n      if (comparator(array[index], value)) {\n        return index;\n      }\n    }\n    return -1;\n  }\n\n  /**\n   * The base implementation of `_.isNaN` without support for number objects.\n   *\n   * @private\n   * @param {*} value The value to check.\n   * @returns {boolean} Returns `true` if `value` is `NaN`, else `false`.\n   */\n  function baseIsNaN(value) {\n    return value !== value;\n  }\n\n  /**\n   * The base implementation of `_.mean` and `_.meanBy` without support for\n   * iteratee shorthands.\n   *\n   * @private\n   * @param {Array} array The array to iterate over.\n   * @param {Function} iteratee The function invoked per iteration.\n   * @returns {number} Returns the mean.\n   */\n  function baseMean(array, iteratee) {\n    var length = array == null ? 0 : array.length;\n    return length ? (baseSum(array, iteratee) / length) : NAN;\n  }\n\n  /**\n   * The base implementation of `_.property` without support for deep paths.\n   *\n   * @private\n   * @param {string} key The key of the property to get.\n   * @returns {Function} Returns the new accessor function.\n   */\n  function baseProperty(key) {\n    return function(object) {\n      return object == null ? undefined : object[key];\n    };\n  }\n\n  /**\n   * The base implementation of `_.propertyOf` without support for deep paths.\n   *\n   * @private\n   * @param {Object} object The object to query.\n   * @returns {Function} Returns the new accessor function.\n   */\n  function basePropertyOf(object) {\n    return function(key) {\n      return object == null ? undefined : object[key];\n    };\n  }\n\n  /**\n   * The base implementation of `_.reduce` and `_.reduceRight`, without support\n   * for iteratee shorthands, which iterates over `collection` using `eachFunc`.\n   *\n   * @private\n   * @param {Array|Object} collection The collection to iterate over.\n   * @param {Function} iteratee The function invoked per iteration.\n   * @param {*} accumulator The initial value.\n   * @param {boolean} initAccum Specify using the first or last element of\n   *  `collection` as the initial value.\n   * @param {Function} eachFunc The function to iterate over `collection`.\n   * @returns {*} Returns the accumulated value.\n   */\n  function baseReduce(collection, iteratee, accumulator, initAccum, eachFunc) {\n    eachFunc(collection, function(value, index, collection) {\n      accumulator = initAccum\n        ? (initAccum = false, value)\n        : iteratee(accumulator, value, index, collection);\n    });\n    return accumulator;\n  }\n\n  /**\n   * The base implementation of `_.sortBy` which uses `comparer` to define the\n   * sort order of `array` and replaces criteria objects with their corresponding\n   * values.\n   *\n   * @private\n   * @param {Array} array The array to sort.\n   * @param {Function} comparer The function to define sort order.\n   * @returns {Array} Returns `array`.\n   */\n  function baseSortBy(array, comparer) {\n    var length = array.length;\n\n    array.sort(comparer);\n    while (length--) {\n      array[length] = array[length].value;\n    }\n    return array;\n  }\n\n  /**\n   * The base implementation of `_.sum` and `_.sumBy` without support for\n   * iteratee shorthands.\n   *\n   * @private\n   * @param {Array} array The array to iterate over.\n   * @param {Function} iteratee The function invoked per iteration.\n   * @returns {number} Returns the sum.\n   */\n  function baseSum(array, iteratee) {\n    var result,\n        index = -1,\n        length = array.length;\n\n    while (++index < length) {\n      var current = iteratee(array[index]);\n      if (current !== undefined) {\n        result = result === undefined ? current : (result + current);\n      }\n    }\n    return result;\n  }\n\n  /**\n   * The base implementation of `_.times` without support for iteratee shorthands\n   * or max array length checks.\n   *\n   * @private\n   * @param {number} n The number of times to invoke `iteratee`.\n   * @param {Function} iteratee The function invoked per iteration.\n   * @returns {Array} Returns the array of results.\n   */\n  function baseTimes(n, iteratee) {\n    var index = -1,\n        result = Array(n);\n\n    while (++index < n) {\n      result[index] = iteratee(index);\n    }\n    return result;\n  }\n\n  /**\n   * The base implementation of `_.toPairs` and `_.toPairsIn` which creates an array\n   * of key-value pairs for `object` corresponding to the property names of `props`.\n   *\n   * @private\n   * @param {Object} object The object to query.\n   * @param {Array} props The property names to get values for.\n   * @returns {Object} Returns the key-value pairs.\n   */\n  function baseToPairs(object, props) {\n    return arrayMap(props, function(key) {\n      return [key, object[key]];\n    });\n  }\n\n  /**\n   * The base implementation of `_.trim`.\n   *\n   * @private\n   * @param {string} string The string to trim.\n   * @returns {string} Returns the trimmed string.\n   */\n  function baseTrim(string) {\n    return string\n      ? string.slice(0, trimmedEndIndex(string) + 1).replace(reTrimStart, '')\n      : string;\n  }\n\n  /**\n   * The base implementation of `_.unary` without support for storing metadata.\n   *\n   * @private\n   * @param {Function} func The function to cap arguments for.\n   * @returns {Function} Returns the new capped function.\n   */\n  function baseUnary(func) {\n    return function(value) {\n      return func(value);\n    };\n  }\n\n  /**\n   * The base implementation of `_.values` and `_.valuesIn` which creates an\n   * array of `object` property values corresponding to the property names\n   * of `props`.\n   *\n   * @private\n   * @param {Object} object The object to query.\n   * @param {Array} props The property names to get values for.\n   * @returns {Object} Returns the array of property values.\n   */\n  function baseValues(object, props) {\n    return arrayMap(props, function(key) {\n      return object[key];\n    });\n  }\n\n  /**\n   * Checks if a `cache` value for `key` exists.\n   *\n   * @private\n   * @param {Object} cache The cache to query.\n   * @param {string} key The key of the entry to check.\n   * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n   */\n  function cacheHas(cache, key) {\n    return cache.has(key);\n  }\n\n  /**\n   * Used by `_.trim` and `_.trimStart` to get the index of the first string symbol\n   * that is not found in the character symbols.\n   *\n   * @private\n   * @param {Array} strSymbols The string symbols to inspect.\n   * @param {Array} chrSymbols The character symbols to find.\n   * @returns {number} Returns the index of the first unmatched string symbol.\n   */\n  function charsStartIndex(strSymbols, chrSymbols) {\n    var index = -1,\n        length = strSymbols.length;\n\n    while (++index < length && baseIndexOf(chrSymbols, strSymbols[index], 0) > -1) {}\n    return index;\n  }\n\n  /**\n   * Used by `_.trim` and `_.trimEnd` to get the index of the last string symbol\n   * that is not found in the character symbols.\n   *\n   * @private\n   * @param {Array} strSymbols The string symbols to inspect.\n   * @param {Array} chrSymbols The character symbols to find.\n   * @returns {number} Returns the index of the last unmatched string symbol.\n   */\n  function charsEndIndex(strSymbols, chrSymbols) {\n    var index = strSymbols.length;\n\n    while (index-- && baseIndexOf(chrSymbols, strSymbols[index], 0) > -1) {}\n    return index;\n  }\n\n  /**\n   * Gets the number of `placeholder` occurrences in `array`.\n   *\n   * @private\n   * @param {Array} array The array to inspect.\n   * @param {*} placeholder The placeholder to search for.\n   * @returns {number} Returns the placeholder count.\n   */\n  function countHolders(array, placeholder) {\n    var length = array.length,\n        result = 0;\n\n    while (length--) {\n      if (array[length] === placeholder) {\n        ++result;\n      }\n    }\n    return result;\n  }\n\n  /**\n   * Used by `_.deburr` to convert Latin-1 Supplement and Latin Extended-A\n   * letters to basic Latin letters.\n   *\n   * @private\n   * @param {string} letter The matched letter to deburr.\n   * @returns {string} Returns the deburred letter.\n   */\n  var deburrLetter = basePropertyOf(deburredLetters);\n\n  /**\n   * Used by `_.escape` to convert characters to HTML entities.\n   *\n   * @private\n   * @param {string} chr The matched character to escape.\n   * @returns {string} Returns the escaped character.\n   */\n  var escapeHtmlChar = basePropertyOf(htmlEscapes);\n\n  /**\n   * Used by `_.template` to escape characters for inclusion in compiled string literals.\n   *\n   * @private\n   * @param {string} chr The matched character to escape.\n   * @returns {string} Returns the escaped character.\n   */\n  function escapeStringChar(chr) {\n    return '\\\\' + stringEscapes[chr];\n  }\n\n  /**\n   * Gets the value at `key` of `object`.\n   *\n   * @private\n   * @param {Object} [object] The object to query.\n   * @param {string} key The key of the property to get.\n   * @returns {*} Returns the property value.\n   */\n  function getValue(object, key) {\n    return object == null ? undefined : object[key];\n  }\n\n  /**\n   * Checks if `string` contains Unicode symbols.\n   *\n   * @private\n   * @param {string} string The string to inspect.\n   * @returns {boolean} Returns `true` if a symbol is found, else `false`.\n   */\n  function hasUnicode(string) {\n    return reHasUnicode.test(string);\n  }\n\n  /**\n   * Checks if `string` contains a word composed of Unicode symbols.\n   *\n   * @private\n   * @param {string} string The string to inspect.\n   * @returns {boolean} Returns `true` if a word is found, else `false`.\n   */\n  function hasUnicodeWord(string) {\n    return reHasUnicodeWord.test(string);\n  }\n\n  /**\n   * Converts `iterator` to an array.\n   *\n   * @private\n   * @param {Object} iterator The iterator to convert.\n   * @returns {Array} Returns the converted array.\n   */\n  function iteratorToArray(iterator) {\n    var data,\n        result = [];\n\n    while (!(data = iterator.next()).done) {\n      result.push(data.value);\n    }\n    return result;\n  }\n\n  /**\n   * Converts `map` to its key-value pairs.\n   *\n   * @private\n   * @param {Object} map The map to convert.\n   * @returns {Array} Returns the key-value pairs.\n   */\n  function mapToArray(map) {\n    var index = -1,\n        result = Array(map.size);\n\n    map.forEach(function(value, key) {\n      result[++index] = [key, value];\n    });\n    return result;\n  }\n\n  /**\n   * Creates a unary function that invokes `func` with its argument transformed.\n   *\n   * @private\n   * @param {Function} func The function to wrap.\n   * @param {Function} transform The argument transform.\n   * @returns {Function} Returns the new function.\n   */\n  function overArg(func, transform) {\n    return function(arg) {\n      return func(transform(arg));\n    };\n  }\n\n  /**\n   * Replaces all `placeholder` elements in `array` with an internal placeholder\n   * and returns an array of their indexes.\n   *\n   * @private\n   * @param {Array} array The array to modify.\n   * @param {*} placeholder The placeholder to replace.\n   * @returns {Array} Returns the new array of placeholder indexes.\n   */\n  function replaceHolders(array, placeholder) {\n    var index = -1,\n        length = array.length,\n        resIndex = 0,\n        result = [];\n\n    while (++index < length) {\n      var value = array[index];\n      if (value === placeholder || value === PLACEHOLDER) {\n        array[index] = PLACEHOLDER;\n        result[resIndex++] = index;\n      }\n    }\n    return result;\n  }\n\n  /**\n   * Converts `set` to an array of its values.\n   *\n   * @private\n   * @param {Object} set The set to convert.\n   * @returns {Array} Returns the values.\n   */\n  function setToArray(set) {\n    var index = -1,\n        result = Array(set.size);\n\n    set.forEach(function(value) {\n      result[++index] = value;\n    });\n    return result;\n  }\n\n  /**\n   * Converts `set` to its value-value pairs.\n   *\n   * @private\n   * @param {Object} set The set to convert.\n   * @returns {Array} Returns the value-value pairs.\n   */\n  function setToPairs(set) {\n    var index = -1,\n        result = Array(set.size);\n\n    set.forEach(function(value) {\n      result[++index] = [value, value];\n    });\n    return result;\n  }\n\n  /**\n   * A specialized version of `_.indexOf` which performs strict equality\n   * comparisons of values, i.e. `===`.\n   *\n   * @private\n   * @param {Array} array The array to inspect.\n   * @param {*} value The value to search for.\n   * @param {number} fromIndex The index to search from.\n   * @returns {number} Returns the index of the matched value, else `-1`.\n   */\n  function strictIndexOf(array, value, fromIndex) {\n    var index = fromIndex - 1,\n        length = array.length;\n\n    while (++index < length) {\n      if (array[index] === value) {\n        return index;\n      }\n    }\n    return -1;\n  }\n\n  /**\n   * A specialized version of `_.lastIndexOf` which performs strict equality\n   * comparisons of values, i.e. `===`.\n   *\n   * @private\n   * @param {Array} array The array to inspect.\n   * @param {*} value The value to search for.\n   * @param {number} fromIndex The index to search from.\n   * @returns {number} Returns the index of the matched value, else `-1`.\n   */\n  function strictLastIndexOf(array, value, fromIndex) {\n    var index = fromIndex + 1;\n    while (index--) {\n      if (array[index] === value) {\n        return index;\n      }\n    }\n    return index;\n  }\n\n  /**\n   * Gets the number of symbols in `string`.\n   *\n   * @private\n   * @param {string} string The string to inspect.\n   * @returns {number} Returns the string size.\n   */\n  function stringSize(string) {\n    return hasUnicode(string)\n      ? unicodeSize(string)\n      : asciiSize(string);\n  }\n\n  /**\n   * Converts `string` to an array.\n   *\n   * @private\n   * @param {string} string The string to convert.\n   * @returns {Array} Returns the converted array.\n   */\n  function stringToArray(string) {\n    return hasUnicode(string)\n      ? unicodeToArray(string)\n      : asciiToArray(string);\n  }\n\n  /**\n   * Used by `_.trim` and `_.trimEnd` to get the index of the last non-whitespace\n   * character of `string`.\n   *\n   * @private\n   * @param {string} string The string to inspect.\n   * @returns {number} Returns the index of the last non-whitespace character.\n   */\n  function trimmedEndIndex(string) {\n    var index = string.length;\n\n    while (index-- && reWhitespace.test(string.charAt(index))) {}\n    return index;\n  }\n\n  /**\n   * Used by `_.unescape` to convert HTML entities to characters.\n   *\n   * @private\n   * @param {string} chr The matched character to unescape.\n   * @returns {string} Returns the unescaped character.\n   */\n  var unescapeHtmlChar = basePropertyOf(htmlUnescapes);\n\n  /**\n   * Gets the size of a Unicode `string`.\n   *\n   * @private\n   * @param {string} string The string inspect.\n   * @returns {number} Returns the string size.\n   */\n  function unicodeSize(string) {\n    var result = reUnicode.lastIndex = 0;\n    while (reUnicode.test(string)) {\n      ++result;\n    }\n    return result;\n  }\n\n  /**\n   * Converts a Unicode `string` to an array.\n   *\n   * @private\n   * @param {string} string The string to convert.\n   * @returns {Array} Returns the converted array.\n   */\n  function unicodeToArray(string) {\n    return string.match(reUnicode) || [];\n  }\n\n  /**\n   * Splits a Unicode `string` into an array of its words.\n   *\n   * @private\n   * @param {string} The string to inspect.\n   * @returns {Array} Returns the words of `string`.\n   */\n  function unicodeWords(string) {\n    return string.match(reUnicodeWord) || [];\n  }\n\n  /*--------------------------------------------------------------------------*/\n\n  /**\n   * Create a new pristine `lodash` function using the `context` object.\n   *\n   * @static\n   * @memberOf _\n   * @since 1.1.0\n   * @category Util\n   * @param {Object} [context=root] The context object.\n   * @returns {Function} Returns a new `lodash` function.\n   * @example\n   *\n   * _.mixin({ 'foo': _.constant('foo') });\n   *\n   * var lodash = _.runInContext();\n   * lodash.mixin({ 'bar': lodash.constant('bar') });\n   *\n   * _.isFunction(_.foo);\n   * // => true\n   * _.isFunction(_.bar);\n   * // => false\n   *\n   * lodash.isFunction(lodash.foo);\n   * // => false\n   * lodash.isFunction(lodash.bar);\n   * // => true\n   *\n   * // Create a suped-up `defer` in Node.js.\n   * var defer = _.runInContext({ 'setTimeout': setImmediate }).defer;\n   */\n  var runInContext = (function runInContext(context) {\n    context = context == null ? root : _.defaults(root.Object(), context, _.pick(root, contextProps));\n\n    /** Built-in constructor references. */\n    var Array = context.Array,\n        Date = context.Date,\n        Error = context.Error,\n        Function = context.Function,\n        Math = context.Math,\n        Object = context.Object,\n        RegExp = context.RegExp,\n        String = context.String,\n        TypeError = context.TypeError;\n\n    /** Used for built-in method references. */\n    var arrayProto = Array.prototype,\n        funcProto = Function.prototype,\n        objectProto = Object.prototype;\n\n    /** Used to detect overreaching core-js shims. */\n    var coreJsData = context['__core-js_shared__'];\n\n    /** Used to resolve the decompiled source of functions. */\n    var funcToString = funcProto.toString;\n\n    /** Used to check objects for own properties. */\n    var hasOwnProperty = objectProto.hasOwnProperty;\n\n    /** Used to generate unique IDs. */\n    var idCounter = 0;\n\n    /** Used to detect methods masquerading as native. */\n    var maskSrcKey = (function() {\n      var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n      return uid ? ('Symbol(src)_1.' + uid) : '';\n    }());\n\n    /**\n     * Used to resolve the\n     * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n     * of values.\n     */\n    var nativeObjectToString = objectProto.toString;\n\n    /** Used to infer the `Object` constructor. */\n    var objectCtorString = funcToString.call(Object);\n\n    /** Used to restore the original `_` reference in `_.noConflict`. */\n    var oldDash = root._;\n\n    /** Used to detect if a method is native. */\n    var reIsNative = RegExp('^' +\n      funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n      .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n    );\n\n    /** Built-in value references. */\n    var Buffer = moduleExports ? context.Buffer : undefined,\n        Symbol = context.Symbol,\n        Uint8Array = context.Uint8Array,\n        allocUnsafe = Buffer ? Buffer.allocUnsafe : undefined,\n        getPrototype = overArg(Object.getPrototypeOf, Object),\n        objectCreate = Object.create,\n        propertyIsEnumerable = objectProto.propertyIsEnumerable,\n        splice = arrayProto.splice,\n        spreadableSymbol = Symbol ? Symbol.isConcatSpreadable : undefined,\n        symIterator = Symbol ? Symbol.iterator : undefined,\n        symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n    var defineProperty = (function() {\n      try {\n        var func = getNative(Object, 'defineProperty');\n        func({}, '', {});\n        return func;\n      } catch (e) {}\n    }());\n\n    /** Mocked built-ins. */\n    var ctxClearTimeout = context.clearTimeout !== root.clearTimeout && context.clearTimeout,\n        ctxNow = Date && Date.now !== root.Date.now && Date.now,\n        ctxSetTimeout = context.setTimeout !== root.setTimeout && context.setTimeout;\n\n    /* Built-in method references for those with the same name as other `lodash` methods. */\n    var nativeCeil = Math.ceil,\n        nativeFloor = Math.floor,\n        nativeGetSymbols = Object.getOwnPropertySymbols,\n        nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined,\n        nativeIsFinite = context.isFinite,\n        nativeJoin = arrayProto.join,\n        nativeKeys = overArg(Object.keys, Object),\n        nativeMax = Math.max,\n        nativeMin = Math.min,\n        nativeNow = Date.now,\n        nativeParseInt = context.parseInt,\n        nativeRandom = Math.random,\n        nativeReverse = arrayProto.reverse;\n\n    /* Built-in method references that are verified to be native. */\n    var DataView = getNative(context, 'DataView'),\n        Map = getNative(context, 'Map'),\n        Promise = getNative(context, 'Promise'),\n        Set = getNative(context, 'Set'),\n        WeakMap = getNative(context, 'WeakMap'),\n        nativeCreate = getNative(Object, 'create');\n\n    /** Used to store function metadata. */\n    var metaMap = WeakMap && new WeakMap;\n\n    /** Used to lookup unminified function names. */\n    var realNames = {};\n\n    /** Used to detect maps, sets, and weakmaps. */\n    var dataViewCtorString = toSource(DataView),\n        mapCtorString = toSource(Map),\n        promiseCtorString = toSource(Promise),\n        setCtorString = toSource(Set),\n        weakMapCtorString = toSource(WeakMap);\n\n    /** Used to convert symbols to primitives and strings. */\n    var symbolProto = Symbol ? Symbol.prototype : undefined,\n        symbolValueOf = symbolProto ? symbolProto.valueOf : undefined,\n        symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates a `lodash` object which wraps `value` to enable implicit method\n     * chain sequences. Methods that operate on and return arrays, collections,\n     * and functions can be chained together. Methods that retrieve a single value\n     * or may return a primitive value will automatically end the chain sequence\n     * and return the unwrapped value. Otherwise, the value must be unwrapped\n     * with `_#value`.\n     *\n     * Explicit chain sequences, which must be unwrapped with `_#value`, may be\n     * enabled using `_.chain`.\n     *\n     * The execution of chained methods is lazy, that is, it's deferred until\n     * `_#value` is implicitly or explicitly called.\n     *\n     * Lazy evaluation allows several methods to support shortcut fusion.\n     * Shortcut fusion is an optimization to merge iteratee calls; this avoids\n     * the creation of intermediate arrays and can greatly reduce the number of\n     * iteratee executions. Sections of a chain sequence qualify for shortcut\n     * fusion if the section is applied to an array and iteratees accept only\n     * one argument. The heuristic for whether a section qualifies for shortcut\n     * fusion is subject to change.\n     *\n     * Chaining is supported in custom builds as long as the `_#value` method is\n     * directly or indirectly included in the build.\n     *\n     * In addition to lodash methods, wrappers have `Array` and `String` methods.\n     *\n     * The wrapper `Array` methods are:\n     * `concat`, `join`, `pop`, `push`, `shift`, `sort`, `splice`, and `unshift`\n     *\n     * The wrapper `String` methods are:\n     * `replace` and `split`\n     *\n     * The wrapper methods that support shortcut fusion are:\n     * `at`, `compact`, `drop`, `dropRight`, `dropWhile`, `filter`, `find`,\n     * `findLast`, `head`, `initial`, `last`, `map`, `reject`, `reverse`, `slice`,\n     * `tail`, `take`, `takeRight`, `takeRightWhile`, `takeWhile`, and `toArray`\n     *\n     * The chainable wrapper methods are:\n     * `after`, `ary`, `assign`, `assignIn`, `assignInWith`, `assignWith`, `at`,\n     * `before`, `bind`, `bindAll`, `bindKey`, `castArray`, `chain`, `chunk`,\n     * `commit`, `compact`, `concat`, `conforms`, `constant`, `countBy`, `create`,\n     * `curry`, `debounce`, `defaults`, `defaultsDeep`, `defer`, `delay`,\n     * `difference`, `differenceBy`, `differenceWith`, `drop`, `dropRight`,\n     * `dropRightWhile`, `dropWhile`, `extend`, `extendWith`, `fill`, `filter`,\n     * `flatMap`, `flatMapDeep`, `flatMapDepth`, `flatten`, `flattenDeep`,\n     * `flattenDepth`, `flip`, `flow`, `flowRight`, `fromPairs`, `functions`,\n     * `functionsIn`, `groupBy`, `initial`, `intersection`, `intersectionBy`,\n     * `intersectionWith`, `invert`, `invertBy`, `invokeMap`, `iteratee`, `keyBy`,\n     * `keys`, `keysIn`, `map`, `mapKeys`, `mapValues`, `matches`, `matchesProperty`,\n     * `memoize`, `merge`, `mergeWith`, `method`, `methodOf`, `mixin`, `negate`,\n     * `nthArg`, `omit`, `omitBy`, `once`, `orderBy`, `over`, `overArgs`,\n     * `overEvery`, `overSome`, `partial`, `partialRight`, `partition`, `pick`,\n     * `pickBy`, `plant`, `property`, `propertyOf`, `pull`, `pullAll`, `pullAllBy`,\n     * `pullAllWith`, `pullAt`, `push`, `range`, `rangeRight`, `rearg`, `reject`,\n     * `remove`, `rest`, `reverse`, `sampleSize`, `set`, `setWith`, `shuffle`,\n     * `slice`, `sort`, `sortBy`, `splice`, `spread`, `tail`, `take`, `takeRight`,\n     * `takeRightWhile`, `takeWhile`, `tap`, `throttle`, `thru`, `toArray`,\n     * `toPairs`, `toPairsIn`, `toPath`, `toPlainObject`, `transform`, `unary`,\n     * `union`, `unionBy`, `unionWith`, `uniq`, `uniqBy`, `uniqWith`, `unset`,\n     * `unshift`, `unzip`, `unzipWith`, `update`, `updateWith`, `values`,\n     * `valuesIn`, `without`, `wrap`, `xor`, `xorBy`, `xorWith`, `zip`,\n     * `zipObject`, `zipObjectDeep`, and `zipWith`\n     *\n     * The wrapper methods that are **not** chainable by default are:\n     * `add`, `attempt`, `camelCase`, `capitalize`, `ceil`, `clamp`, `clone`,\n     * `cloneDeep`, `cloneDeepWith`, `cloneWith`, `conformsTo`, `deburr`,\n     * `defaultTo`, `divide`, `each`, `eachRight`, `endsWith`, `eq`, `escape`,\n     * `escapeRegExp`, `every`, `find`, `findIndex`, `findKey`, `findLast`,\n     * `findLastIndex`, `findLastKey`, `first`, `floor`, `forEach`, `forEachRight`,\n     * `forIn`, `forInRight`, `forOwn`, `forOwnRight`, `get`, `gt`, `gte`, `has`,\n     * `hasIn`, `head`, `identity`, `includes`, `indexOf`, `inRange`, `invoke`,\n     * `isArguments`, `isArray`, `isArrayBuffer`, `isArrayLike`, `isArrayLikeObject`,\n     * `isBoolean`, `isBuffer`, `isDate`, `isElement`, `isEmpty`, `isEqual`,\n     * `isEqualWith`, `isError`, `isFinite`, `isFunction`, `isInteger`, `isLength`,\n     * `isMap`, `isMatch`, `isMatchWith`, `isNaN`, `isNative`, `isNil`, `isNull`,\n     * `isNumber`, `isObject`, `isObjectLike`, `isPlainObject`, `isRegExp`,\n     * `isSafeInteger`, `isSet`, `isString`, `isUndefined`, `isTypedArray`,\n     * `isWeakMap`, `isWeakSet`, `join`, `kebabCase`, `last`, `lastIndexOf`,\n     * `lowerCase`, `lowerFirst`, `lt`, `lte`, `max`, `maxBy`, `mean`, `meanBy`,\n     * `min`, `minBy`, `multiply`, `noConflict`, `noop`, `now`, `nth`, `pad`,\n     * `padEnd`, `padStart`, `parseInt`, `pop`, `random`, `reduce`, `reduceRight`,\n     * `repeat`, `result`, `round`, `runInContext`, `sample`, `shift`, `size`,\n     * `snakeCase`, `some`, `sortedIndex`, `sortedIndexBy`, `sortedLastIndex`,\n     * `sortedLastIndexBy`, `startCase`, `startsWith`, `stubArray`, `stubFalse`,\n     * `stubObject`, `stubString`, `stubTrue`, `subtract`, `sum`, `sumBy`,\n     * `template`, `times`, `toFinite`, `toInteger`, `toJSON`, `toLength`,\n     * `toLower`, `toNumber`, `toSafeInteger`, `toString`, `toUpper`, `trim`,\n     * `trimEnd`, `trimStart`, `truncate`, `unescape`, `uniqueId`, `upperCase`,\n     * `upperFirst`, `value`, and `words`\n     *\n     * @name _\n     * @constructor\n     * @category Seq\n     * @param {*} value The value to wrap in a `lodash` instance.\n     * @returns {Object} Returns the new `lodash` wrapper instance.\n     * @example\n     *\n     * function square(n) {\n     *   return n * n;\n     * }\n     *\n     * var wrapped = _([1, 2, 3]);\n     *\n     * // Returns an unwrapped value.\n     * wrapped.reduce(_.add);\n     * // => 6\n     *\n     * // Returns a wrapped value.\n     * var squares = wrapped.map(square);\n     *\n     * _.isArray(squares);\n     * // => false\n     *\n     * _.isArray(squares.value());\n     * // => true\n     */\n    function lodash(value) {\n      if (isObjectLike(value) && !isArray(value) && !(value instanceof LazyWrapper)) {\n        if (value instanceof LodashWrapper) {\n          return value;\n        }\n        if (hasOwnProperty.call(value, '__wrapped__')) {\n          return wrapperClone(value);\n        }\n      }\n      return new LodashWrapper(value);\n    }\n\n    /**\n     * The base implementation of `_.create` without support for assigning\n     * properties to the created object.\n     *\n     * @private\n     * @param {Object} proto The object to inherit from.\n     * @returns {Object} Returns the new object.\n     */\n    var baseCreate = (function() {\n      function object() {}\n      return function(proto) {\n        if (!isObject(proto)) {\n          return {};\n        }\n        if (objectCreate) {\n          return objectCreate(proto);\n        }\n        object.prototype = proto;\n        var result = new object;\n        object.prototype = undefined;\n        return result;\n      };\n    }());\n\n    /**\n     * The function whose prototype chain sequence wrappers inherit from.\n     *\n     * @private\n     */\n    function baseLodash() {\n      // No operation performed.\n    }\n\n    /**\n     * The base constructor for creating `lodash` wrapper objects.\n     *\n     * @private\n     * @param {*} value The value to wrap.\n     * @param {boolean} [chainAll] Enable explicit method chain sequences.\n     */\n    function LodashWrapper(value, chainAll) {\n      this.__wrapped__ = value;\n      this.__actions__ = [];\n      this.__chain__ = !!chainAll;\n      this.__index__ = 0;\n      this.__values__ = undefined;\n    }\n\n    /**\n     * By default, the template delimiters used by lodash are like those in\n     * embedded Ruby (ERB) as well as ES2015 template strings. Change the\n     * following template settings to use alternative delimiters.\n     *\n     * @static\n     * @memberOf _\n     * @type {Object}\n     */\n    lodash.templateSettings = {\n\n      /**\n       * Used to detect `data` property values to be HTML-escaped.\n       *\n       * @memberOf _.templateSettings\n       * @type {RegExp}\n       */\n      'escape': reEscape,\n\n      /**\n       * Used to detect code to be evaluated.\n       *\n       * @memberOf _.templateSettings\n       * @type {RegExp}\n       */\n      'evaluate': reEvaluate,\n\n      /**\n       * Used to detect `data` property values to inject.\n       *\n       * @memberOf _.templateSettings\n       * @type {RegExp}\n       */\n      'interpolate': reInterpolate,\n\n      /**\n       * Used to reference the data object in the template text.\n       *\n       * @memberOf _.templateSettings\n       * @type {string}\n       */\n      'variable': '',\n\n      /**\n       * Used to import variables into the compiled template.\n       *\n       * @memberOf _.templateSettings\n       * @type {Object}\n       */\n      'imports': {\n\n        /**\n         * A reference to the `lodash` function.\n         *\n         * @memberOf _.templateSettings.imports\n         * @type {Function}\n         */\n        '_': lodash\n      }\n    };\n\n    // Ensure wrappers are instances of `baseLodash`.\n    lodash.prototype = baseLodash.prototype;\n    lodash.prototype.constructor = lodash;\n\n    LodashWrapper.prototype = baseCreate(baseLodash.prototype);\n    LodashWrapper.prototype.constructor = LodashWrapper;\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates a lazy wrapper object which wraps `value` to enable lazy evaluation.\n     *\n     * @private\n     * @constructor\n     * @param {*} value The value to wrap.\n     */\n    function LazyWrapper(value) {\n      this.__wrapped__ = value;\n      this.__actions__ = [];\n      this.__dir__ = 1;\n      this.__filtered__ = false;\n      this.__iteratees__ = [];\n      this.__takeCount__ = MAX_ARRAY_LENGTH;\n      this.__views__ = [];\n    }\n\n    /**\n     * Creates a clone of the lazy wrapper object.\n     *\n     * @private\n     * @name clone\n     * @memberOf LazyWrapper\n     * @returns {Object} Returns the cloned `LazyWrapper` object.\n     */\n    function lazyClone() {\n      var result = new LazyWrapper(this.__wrapped__);\n      result.__actions__ = copyArray(this.__actions__);\n      result.__dir__ = this.__dir__;\n      result.__filtered__ = this.__filtered__;\n      result.__iteratees__ = copyArray(this.__iteratees__);\n      result.__takeCount__ = this.__takeCount__;\n      result.__views__ = copyArray(this.__views__);\n      return result;\n    }\n\n    /**\n     * Reverses the direction of lazy iteration.\n     *\n     * @private\n     * @name reverse\n     * @memberOf LazyWrapper\n     * @returns {Object} Returns the new reversed `LazyWrapper` object.\n     */\n    function lazyReverse() {\n      if (this.__filtered__) {\n        var result = new LazyWrapper(this);\n        result.__dir__ = -1;\n        result.__filtered__ = true;\n      } else {\n        result = this.clone();\n        result.__dir__ *= -1;\n      }\n      return result;\n    }\n\n    /**\n     * Extracts the unwrapped value from its lazy wrapper.\n     *\n     * @private\n     * @name value\n     * @memberOf LazyWrapper\n     * @returns {*} Returns the unwrapped value.\n     */\n    function lazyValue() {\n      var array = this.__wrapped__.value(),\n          dir = this.__dir__,\n          isArr = isArray(array),\n          isRight = dir < 0,\n          arrLength = isArr ? array.length : 0,\n          view = getView(0, arrLength, this.__views__),\n          start = view.start,\n          end = view.end,\n          length = end - start,\n          index = isRight ? end : (start - 1),\n          iteratees = this.__iteratees__,\n          iterLength = iteratees.length,\n          resIndex = 0,\n          takeCount = nativeMin(length, this.__takeCount__);\n\n      if (!isArr || (!isRight && arrLength == length && takeCount == length)) {\n        return baseWrapperValue(array, this.__actions__);\n      }\n      var result = [];\n\n      outer:\n      while (length-- && resIndex < takeCount) {\n        index += dir;\n\n        var iterIndex = -1,\n            value = array[index];\n\n        while (++iterIndex < iterLength) {\n          var data = iteratees[iterIndex],\n              iteratee = data.iteratee,\n              type = data.type,\n              computed = iteratee(value);\n\n          if (type == LAZY_MAP_FLAG) {\n            value = computed;\n          } else if (!computed) {\n            if (type == LAZY_FILTER_FLAG) {\n              continue outer;\n            } else {\n              break outer;\n            }\n          }\n        }\n        result[resIndex++] = value;\n      }\n      return result;\n    }\n\n    // Ensure `LazyWrapper` is an instance of `baseLodash`.\n    LazyWrapper.prototype = baseCreate(baseLodash.prototype);\n    LazyWrapper.prototype.constructor = LazyWrapper;\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates a hash object.\n     *\n     * @private\n     * @constructor\n     * @param {Array} [entries] The key-value pairs to cache.\n     */\n    function Hash(entries) {\n      var index = -1,\n          length = entries == null ? 0 : entries.length;\n\n      this.clear();\n      while (++index < length) {\n        var entry = entries[index];\n        this.set(entry[0], entry[1]);\n      }\n    }\n\n    /**\n     * Removes all key-value entries from the hash.\n     *\n     * @private\n     * @name clear\n     * @memberOf Hash\n     */\n    function hashClear() {\n      this.__data__ = nativeCreate ? nativeCreate(null) : {};\n      this.size = 0;\n    }\n\n    /**\n     * Removes `key` and its value from the hash.\n     *\n     * @private\n     * @name delete\n     * @memberOf Hash\n     * @param {Object} hash The hash to modify.\n     * @param {string} key The key of the value to remove.\n     * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n     */\n    function hashDelete(key) {\n      var result = this.has(key) && delete this.__data__[key];\n      this.size -= result ? 1 : 0;\n      return result;\n    }\n\n    /**\n     * Gets the hash value for `key`.\n     *\n     * @private\n     * @name get\n     * @memberOf Hash\n     * @param {string} key The key of the value to get.\n     * @returns {*} Returns the entry value.\n     */\n    function hashGet(key) {\n      var data = this.__data__;\n      if (nativeCreate) {\n        var result = data[key];\n        return result === HASH_UNDEFINED ? undefined : result;\n      }\n      return hasOwnProperty.call(data, key) ? data[key] : undefined;\n    }\n\n    /**\n     * Checks if a hash value for `key` exists.\n     *\n     * @private\n     * @name has\n     * @memberOf Hash\n     * @param {string} key The key of the entry to check.\n     * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n     */\n    function hashHas(key) {\n      var data = this.__data__;\n      return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n    }\n\n    /**\n     * Sets the hash `key` to `value`.\n     *\n     * @private\n     * @name set\n     * @memberOf Hash\n     * @param {string} key The key of the value to set.\n     * @param {*} value The value to set.\n     * @returns {Object} Returns the hash instance.\n     */\n    function hashSet(key, value) {\n      var data = this.__data__;\n      this.size += this.has(key) ? 0 : 1;\n      data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n      return this;\n    }\n\n    // Add methods to `Hash`.\n    Hash.prototype.clear = hashClear;\n    Hash.prototype['delete'] = hashDelete;\n    Hash.prototype.get = hashGet;\n    Hash.prototype.has = hashHas;\n    Hash.prototype.set = hashSet;\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates an list cache object.\n     *\n     * @private\n     * @constructor\n     * @param {Array} [entries] The key-value pairs to cache.\n     */\n    function ListCache(entries) {\n      var index = -1,\n          length = entries == null ? 0 : entries.length;\n\n      this.clear();\n      while (++index < length) {\n        var entry = entries[index];\n        this.set(entry[0], entry[1]);\n      }\n    }\n\n    /**\n     * Removes all key-value entries from the list cache.\n     *\n     * @private\n     * @name clear\n     * @memberOf ListCache\n     */\n    function listCacheClear() {\n      this.__data__ = [];\n      this.size = 0;\n    }\n\n    /**\n     * Removes `key` and its value from the list cache.\n     *\n     * @private\n     * @name delete\n     * @memberOf ListCache\n     * @param {string} key The key of the value to remove.\n     * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n     */\n    function listCacheDelete(key) {\n      var data = this.__data__,\n          index = assocIndexOf(data, key);\n\n      if (index < 0) {\n        return false;\n      }\n      var lastIndex = data.length - 1;\n      if (index == lastIndex) {\n        data.pop();\n      } else {\n        splice.call(data, index, 1);\n      }\n      --this.size;\n      return true;\n    }\n\n    /**\n     * Gets the list cache value for `key`.\n     *\n     * @private\n     * @name get\n     * @memberOf ListCache\n     * @param {string} key The key of the value to get.\n     * @returns {*} Returns the entry value.\n     */\n    function listCacheGet(key) {\n      var data = this.__data__,\n          index = assocIndexOf(data, key);\n\n      return index < 0 ? undefined : data[index][1];\n    }\n\n    /**\n     * Checks if a list cache value for `key` exists.\n     *\n     * @private\n     * @name has\n     * @memberOf ListCache\n     * @param {string} key The key of the entry to check.\n     * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n     */\n    function listCacheHas(key) {\n      return assocIndexOf(this.__data__, key) > -1;\n    }\n\n    /**\n     * Sets the list cache `key` to `value`.\n     *\n     * @private\n     * @name set\n     * @memberOf ListCache\n     * @param {string} key The key of the value to set.\n     * @param {*} value The value to set.\n     * @returns {Object} Returns the list cache instance.\n     */\n    function listCacheSet(key, value) {\n      var data = this.__data__,\n          index = assocIndexOf(data, key);\n\n      if (index < 0) {\n        ++this.size;\n        data.push([key, value]);\n      } else {\n        data[index][1] = value;\n      }\n      return this;\n    }\n\n    // Add methods to `ListCache`.\n    ListCache.prototype.clear = listCacheClear;\n    ListCache.prototype['delete'] = listCacheDelete;\n    ListCache.prototype.get = listCacheGet;\n    ListCache.prototype.has = listCacheHas;\n    ListCache.prototype.set = listCacheSet;\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates a map cache object to store key-value pairs.\n     *\n     * @private\n     * @constructor\n     * @param {Array} [entries] The key-value pairs to cache.\n     */\n    function MapCache(entries) {\n      var index = -1,\n          length = entries == null ? 0 : entries.length;\n\n      this.clear();\n      while (++index < length) {\n        var entry = entries[index];\n        this.set(entry[0], entry[1]);\n      }\n    }\n\n    /**\n     * Removes all key-value entries from the map.\n     *\n     * @private\n     * @name clear\n     * @memberOf MapCache\n     */\n    function mapCacheClear() {\n      this.size = 0;\n      this.__data__ = {\n        'hash': new Hash,\n        'map': new (Map || ListCache),\n        'string': new Hash\n      };\n    }\n\n    /**\n     * Removes `key` and its value from the map.\n     *\n     * @private\n     * @name delete\n     * @memberOf MapCache\n     * @param {string} key The key of the value to remove.\n     * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n     */\n    function mapCacheDelete(key) {\n      var result = getMapData(this, key)['delete'](key);\n      this.size -= result ? 1 : 0;\n      return result;\n    }\n\n    /**\n     * Gets the map value for `key`.\n     *\n     * @private\n     * @name get\n     * @memberOf MapCache\n     * @param {string} key The key of the value to get.\n     * @returns {*} Returns the entry value.\n     */\n    function mapCacheGet(key) {\n      return getMapData(this, key).get(key);\n    }\n\n    /**\n     * Checks if a map value for `key` exists.\n     *\n     * @private\n     * @name has\n     * @memberOf MapCache\n     * @param {string} key The key of the entry to check.\n     * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n     */\n    function mapCacheHas(key) {\n      return getMapData(this, key).has(key);\n    }\n\n    /**\n     * Sets the map `key` to `value`.\n     *\n     * @private\n     * @name set\n     * @memberOf MapCache\n     * @param {string} key The key of the value to set.\n     * @param {*} value The value to set.\n     * @returns {Object} Returns the map cache instance.\n     */\n    function mapCacheSet(key, value) {\n      var data = getMapData(this, key),\n          size = data.size;\n\n      data.set(key, value);\n      this.size += data.size == size ? 0 : 1;\n      return this;\n    }\n\n    // Add methods to `MapCache`.\n    MapCache.prototype.clear = mapCacheClear;\n    MapCache.prototype['delete'] = mapCacheDelete;\n    MapCache.prototype.get = mapCacheGet;\n    MapCache.prototype.has = mapCacheHas;\n    MapCache.prototype.set = mapCacheSet;\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     *\n     * Creates an array cache object to store unique values.\n     *\n     * @private\n     * @constructor\n     * @param {Array} [values] The values to cache.\n     */\n    function SetCache(values) {\n      var index = -1,\n          length = values == null ? 0 : values.length;\n\n      this.__data__ = new MapCache;\n      while (++index < length) {\n        this.add(values[index]);\n      }\n    }\n\n    /**\n     * Adds `value` to the array cache.\n     *\n     * @private\n     * @name add\n     * @memberOf SetCache\n     * @alias push\n     * @param {*} value The value to cache.\n     * @returns {Object} Returns the cache instance.\n     */\n    function setCacheAdd(value) {\n      this.__data__.set(value, HASH_UNDEFINED);\n      return this;\n    }\n\n    /**\n     * Checks if `value` is in the array cache.\n     *\n     * @private\n     * @name has\n     * @memberOf SetCache\n     * @param {*} value The value to search for.\n     * @returns {number} Returns `true` if `value` is found, else `false`.\n     */\n    function setCacheHas(value) {\n      return this.__data__.has(value);\n    }\n\n    // Add methods to `SetCache`.\n    SetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\n    SetCache.prototype.has = setCacheHas;\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates a stack cache object to store key-value pairs.\n     *\n     * @private\n     * @constructor\n     * @param {Array} [entries] The key-value pairs to cache.\n     */\n    function Stack(entries) {\n      var data = this.__data__ = new ListCache(entries);\n      this.size = data.size;\n    }\n\n    /**\n     * Removes all key-value entries from the stack.\n     *\n     * @private\n     * @name clear\n     * @memberOf Stack\n     */\n    function stackClear() {\n      this.__data__ = new ListCache;\n      this.size = 0;\n    }\n\n    /**\n     * Removes `key` and its value from the stack.\n     *\n     * @private\n     * @name delete\n     * @memberOf Stack\n     * @param {string} key The key of the value to remove.\n     * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n     */\n    function stackDelete(key) {\n      var data = this.__data__,\n          result = data['delete'](key);\n\n      this.size = data.size;\n      return result;\n    }\n\n    /**\n     * Gets the stack value for `key`.\n     *\n     * @private\n     * @name get\n     * @memberOf Stack\n     * @param {string} key The key of the value to get.\n     * @returns {*} Returns the entry value.\n     */\n    function stackGet(key) {\n      return this.__data__.get(key);\n    }\n\n    /**\n     * Checks if a stack value for `key` exists.\n     *\n     * @private\n     * @name has\n     * @memberOf Stack\n     * @param {string} key The key of the entry to check.\n     * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n     */\n    function stackHas(key) {\n      return this.__data__.has(key);\n    }\n\n    /**\n     * Sets the stack `key` to `value`.\n     *\n     * @private\n     * @name set\n     * @memberOf Stack\n     * @param {string} key The key of the value to set.\n     * @param {*} value The value to set.\n     * @returns {Object} Returns the stack cache instance.\n     */\n    function stackSet(key, value) {\n      var data = this.__data__;\n      if (data instanceof ListCache) {\n        var pairs = data.__data__;\n        if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n          pairs.push([key, value]);\n          this.size = ++data.size;\n          return this;\n        }\n        data = this.__data__ = new MapCache(pairs);\n      }\n      data.set(key, value);\n      this.size = data.size;\n      return this;\n    }\n\n    // Add methods to `Stack`.\n    Stack.prototype.clear = stackClear;\n    Stack.prototype['delete'] = stackDelete;\n    Stack.prototype.get = stackGet;\n    Stack.prototype.has = stackHas;\n    Stack.prototype.set = stackSet;\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates an array of the enumerable property names of the array-like `value`.\n     *\n     * @private\n     * @param {*} value The value to query.\n     * @param {boolean} inherited Specify returning inherited property names.\n     * @returns {Array} Returns the array of property names.\n     */\n    function arrayLikeKeys(value, inherited) {\n      var isArr = isArray(value),\n          isArg = !isArr && isArguments(value),\n          isBuff = !isArr && !isArg && isBuffer(value),\n          isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n          skipIndexes = isArr || isArg || isBuff || isType,\n          result = skipIndexes ? baseTimes(value.length, String) : [],\n          length = result.length;\n\n      for (var key in value) {\n        if ((inherited || hasOwnProperty.call(value, key)) &&\n            !(skipIndexes && (\n               // Safari 9 has enumerable `arguments.length` in strict mode.\n               key == 'length' ||\n               // Node.js 0.10 has enumerable non-index properties on buffers.\n               (isBuff && (key == 'offset' || key == 'parent')) ||\n               // PhantomJS 2 has enumerable non-index properties on typed arrays.\n               (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n               // Skip index properties.\n               isIndex(key, length)\n            ))) {\n          result.push(key);\n        }\n      }\n      return result;\n    }\n\n    /**\n     * A specialized version of `_.sample` for arrays.\n     *\n     * @private\n     * @param {Array} array The array to sample.\n     * @returns {*} Returns the random element.\n     */\n    function arraySample(array) {\n      var length = array.length;\n      return length ? array[baseRandom(0, length - 1)] : undefined;\n    }\n\n    /**\n     * A specialized version of `_.sampleSize` for arrays.\n     *\n     * @private\n     * @param {Array} array The array to sample.\n     * @param {number} n The number of elements to sample.\n     * @returns {Array} Returns the random elements.\n     */\n    function arraySampleSize(array, n) {\n      return shuffleSelf(copyArray(array), baseClamp(n, 0, array.length));\n    }\n\n    /**\n     * A specialized version of `_.shuffle` for arrays.\n     *\n     * @private\n     * @param {Array} array The array to shuffle.\n     * @returns {Array} Returns the new shuffled array.\n     */\n    function arrayShuffle(array) {\n      return shuffleSelf(copyArray(array));\n    }\n\n    /**\n     * This function is like `assignValue` except that it doesn't assign\n     * `undefined` values.\n     *\n     * @private\n     * @param {Object} object The object to modify.\n     * @param {string} key The key of the property to assign.\n     * @param {*} value The value to assign.\n     */\n    function assignMergeValue(object, key, value) {\n      if ((value !== undefined && !eq(object[key], value)) ||\n          (value === undefined && !(key in object))) {\n        baseAssignValue(object, key, value);\n      }\n    }\n\n    /**\n     * Assigns `value` to `key` of `object` if the existing value is not equivalent\n     * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * for equality comparisons.\n     *\n     * @private\n     * @param {Object} object The object to modify.\n     * @param {string} key The key of the property to assign.\n     * @param {*} value The value to assign.\n     */\n    function assignValue(object, key, value) {\n      var objValue = object[key];\n      if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n          (value === undefined && !(key in object))) {\n        baseAssignValue(object, key, value);\n      }\n    }\n\n    /**\n     * Gets the index at which the `key` is found in `array` of key-value pairs.\n     *\n     * @private\n     * @param {Array} array The array to inspect.\n     * @param {*} key The key to search for.\n     * @returns {number} Returns the index of the matched value, else `-1`.\n     */\n    function assocIndexOf(array, key) {\n      var length = array.length;\n      while (length--) {\n        if (eq(array[length][0], key)) {\n          return length;\n        }\n      }\n      return -1;\n    }\n\n    /**\n     * Aggregates elements of `collection` on `accumulator` with keys transformed\n     * by `iteratee` and values set by `setter`.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} setter The function to set `accumulator` values.\n     * @param {Function} iteratee The iteratee to transform keys.\n     * @param {Object} accumulator The initial aggregated object.\n     * @returns {Function} Returns `accumulator`.\n     */\n    function baseAggregator(collection, setter, iteratee, accumulator) {\n      baseEach(collection, function(value, key, collection) {\n        setter(accumulator, value, iteratee(value), collection);\n      });\n      return accumulator;\n    }\n\n    /**\n     * The base implementation of `_.assign` without support for multiple sources\n     * or `customizer` functions.\n     *\n     * @private\n     * @param {Object} object The destination object.\n     * @param {Object} source The source object.\n     * @returns {Object} Returns `object`.\n     */\n    function baseAssign(object, source) {\n      return object && copyObject(source, keys(source), object);\n    }\n\n    /**\n     * The base implementation of `_.assignIn` without support for multiple sources\n     * or `customizer` functions.\n     *\n     * @private\n     * @param {Object} object The destination object.\n     * @param {Object} source The source object.\n     * @returns {Object} Returns `object`.\n     */\n    function baseAssignIn(object, source) {\n      return object && copyObject(source, keysIn(source), object);\n    }\n\n    /**\n     * The base implementation of `assignValue` and `assignMergeValue` without\n     * value checks.\n     *\n     * @private\n     * @param {Object} object The object to modify.\n     * @param {string} key The key of the property to assign.\n     * @param {*} value The value to assign.\n     */\n    function baseAssignValue(object, key, value) {\n      if (key == '__proto__' && defineProperty) {\n        defineProperty(object, key, {\n          'configurable': true,\n          'enumerable': true,\n          'value': value,\n          'writable': true\n        });\n      } else {\n        object[key] = value;\n      }\n    }\n\n    /**\n     * The base implementation of `_.at` without support for individual paths.\n     *\n     * @private\n     * @param {Object} object The object to iterate over.\n     * @param {string[]} paths The property paths to pick.\n     * @returns {Array} Returns the picked elements.\n     */\n    function baseAt(object, paths) {\n      var index = -1,\n          length = paths.length,\n          result = Array(length),\n          skip = object == null;\n\n      while (++index < length) {\n        result[index] = skip ? undefined : get(object, paths[index]);\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.clamp` which doesn't coerce arguments.\n     *\n     * @private\n     * @param {number} number The number to clamp.\n     * @param {number} [lower] The lower bound.\n     * @param {number} upper The upper bound.\n     * @returns {number} Returns the clamped number.\n     */\n    function baseClamp(number, lower, upper) {\n      if (number === number) {\n        if (upper !== undefined) {\n          number = number <= upper ? number : upper;\n        }\n        if (lower !== undefined) {\n          number = number >= lower ? number : lower;\n        }\n      }\n      return number;\n    }\n\n    /**\n     * The base implementation of `_.clone` and `_.cloneDeep` which tracks\n     * traversed objects.\n     *\n     * @private\n     * @param {*} value The value to clone.\n     * @param {boolean} bitmask The bitmask flags.\n     *  1 - Deep clone\n     *  2 - Flatten inherited properties\n     *  4 - Clone symbols\n     * @param {Function} [customizer] The function to customize cloning.\n     * @param {string} [key] The key of `value`.\n     * @param {Object} [object] The parent object of `value`.\n     * @param {Object} [stack] Tracks traversed objects and their clone counterparts.\n     * @returns {*} Returns the cloned value.\n     */\n    function baseClone(value, bitmask, customizer, key, object, stack) {\n      var result,\n          isDeep = bitmask & CLONE_DEEP_FLAG,\n          isFlat = bitmask & CLONE_FLAT_FLAG,\n          isFull = bitmask & CLONE_SYMBOLS_FLAG;\n\n      if (customizer) {\n        result = object ? customizer(value, key, object, stack) : customizer(value);\n      }\n      if (result !== undefined) {\n        return result;\n      }\n      if (!isObject(value)) {\n        return value;\n      }\n      var isArr = isArray(value);\n      if (isArr) {\n        result = initCloneArray(value);\n        if (!isDeep) {\n          return copyArray(value, result);\n        }\n      } else {\n        var tag = getTag(value),\n            isFunc = tag == funcTag || tag == genTag;\n\n        if (isBuffer(value)) {\n          return cloneBuffer(value, isDeep);\n        }\n        if (tag == objectTag || tag == argsTag || (isFunc && !object)) {\n          result = (isFlat || isFunc) ? {} : initCloneObject(value);\n          if (!isDeep) {\n            return isFlat\n              ? copySymbolsIn(value, baseAssignIn(result, value))\n              : copySymbols(value, baseAssign(result, value));\n          }\n        } else {\n          if (!cloneableTags[tag]) {\n            return object ? value : {};\n          }\n          result = initCloneByTag(value, tag, isDeep);\n        }\n      }\n      // Check for circular references and return its corresponding clone.\n      stack || (stack = new Stack);\n      var stacked = stack.get(value);\n      if (stacked) {\n        return stacked;\n      }\n      stack.set(value, result);\n\n      if (isSet(value)) {\n        value.forEach(function(subValue) {\n          result.add(baseClone(subValue, bitmask, customizer, subValue, value, stack));\n        });\n      } else if (isMap(value)) {\n        value.forEach(function(subValue, key) {\n          result.set(key, baseClone(subValue, bitmask, customizer, key, value, stack));\n        });\n      }\n\n      var keysFunc = isFull\n        ? (isFlat ? getAllKeysIn : getAllKeys)\n        : (isFlat ? keysIn : keys);\n\n      var props = isArr ? undefined : keysFunc(value);\n      arrayEach(props || value, function(subValue, key) {\n        if (props) {\n          key = subValue;\n          subValue = value[key];\n        }\n        // Recursively populate clone (susceptible to call stack limits).\n        assignValue(result, key, baseClone(subValue, bitmask, customizer, key, value, stack));\n      });\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.conforms` which doesn't clone `source`.\n     *\n     * @private\n     * @param {Object} source The object of property predicates to conform to.\n     * @returns {Function} Returns the new spec function.\n     */\n    function baseConforms(source) {\n      var props = keys(source);\n      return function(object) {\n        return baseConformsTo(object, source, props);\n      };\n    }\n\n    /**\n     * The base implementation of `_.conformsTo` which accepts `props` to check.\n     *\n     * @private\n     * @param {Object} object The object to inspect.\n     * @param {Object} source The object of property predicates to conform to.\n     * @returns {boolean} Returns `true` if `object` conforms, else `false`.\n     */\n    function baseConformsTo(object, source, props) {\n      var length = props.length;\n      if (object == null) {\n        return !length;\n      }\n      object = Object(object);\n      while (length--) {\n        var key = props[length],\n            predicate = source[key],\n            value = object[key];\n\n        if ((value === undefined && !(key in object)) || !predicate(value)) {\n          return false;\n        }\n      }\n      return true;\n    }\n\n    /**\n     * The base implementation of `_.delay` and `_.defer` which accepts `args`\n     * to provide to `func`.\n     *\n     * @private\n     * @param {Function} func The function to delay.\n     * @param {number} wait The number of milliseconds to delay invocation.\n     * @param {Array} args The arguments to provide to `func`.\n     * @returns {number|Object} Returns the timer id or timeout object.\n     */\n    function baseDelay(func, wait, args) {\n      if (typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      return setTimeout(function() { func.apply(undefined, args); }, wait);\n    }\n\n    /**\n     * The base implementation of methods like `_.difference` without support\n     * for excluding multiple arrays or iteratee shorthands.\n     *\n     * @private\n     * @param {Array} array The array to inspect.\n     * @param {Array} values The values to exclude.\n     * @param {Function} [iteratee] The iteratee invoked per element.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns the new array of filtered values.\n     */\n    function baseDifference(array, values, iteratee, comparator) {\n      var index = -1,\n          includes = arrayIncludes,\n          isCommon = true,\n          length = array.length,\n          result = [],\n          valuesLength = values.length;\n\n      if (!length) {\n        return result;\n      }\n      if (iteratee) {\n        values = arrayMap(values, baseUnary(iteratee));\n      }\n      if (comparator) {\n        includes = arrayIncludesWith;\n        isCommon = false;\n      }\n      else if (values.length >= LARGE_ARRAY_SIZE) {\n        includes = cacheHas;\n        isCommon = false;\n        values = new SetCache(values);\n      }\n      outer:\n      while (++index < length) {\n        var value = array[index],\n            computed = iteratee == null ? value : iteratee(value);\n\n        value = (comparator || value !== 0) ? value : 0;\n        if (isCommon && computed === computed) {\n          var valuesIndex = valuesLength;\n          while (valuesIndex--) {\n            if (values[valuesIndex] === computed) {\n              continue outer;\n            }\n          }\n          result.push(value);\n        }\n        else if (!includes(values, computed, comparator)) {\n          result.push(value);\n        }\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.forEach` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @returns {Array|Object} Returns `collection`.\n     */\n    var baseEach = createBaseEach(baseForOwn);\n\n    /**\n     * The base implementation of `_.forEachRight` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @returns {Array|Object} Returns `collection`.\n     */\n    var baseEachRight = createBaseEach(baseForOwnRight, true);\n\n    /**\n     * The base implementation of `_.every` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} predicate The function invoked per iteration.\n     * @returns {boolean} Returns `true` if all elements pass the predicate check,\n     *  else `false`\n     */\n    function baseEvery(collection, predicate) {\n      var result = true;\n      baseEach(collection, function(value, index, collection) {\n        result = !!predicate(value, index, collection);\n        return result;\n      });\n      return result;\n    }\n\n    /**\n     * The base implementation of methods like `_.max` and `_.min` which accepts a\n     * `comparator` to determine the extremum value.\n     *\n     * @private\n     * @param {Array} array The array to iterate over.\n     * @param {Function} iteratee The iteratee invoked per iteration.\n     * @param {Function} comparator The comparator used to compare values.\n     * @returns {*} Returns the extremum value.\n     */\n    function baseExtremum(array, iteratee, comparator) {\n      var index = -1,\n          length = array.length;\n\n      while (++index < length) {\n        var value = array[index],\n            current = iteratee(value);\n\n        if (current != null && (computed === undefined\n              ? (current === current && !isSymbol(current))\n              : comparator(current, computed)\n            )) {\n          var computed = current,\n              result = value;\n        }\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.fill` without an iteratee call guard.\n     *\n     * @private\n     * @param {Array} array The array to fill.\n     * @param {*} value The value to fill `array` with.\n     * @param {number} [start=0] The start position.\n     * @param {number} [end=array.length] The end position.\n     * @returns {Array} Returns `array`.\n     */\n    function baseFill(array, value, start, end) {\n      var length = array.length;\n\n      start = toInteger(start);\n      if (start < 0) {\n        start = -start > length ? 0 : (length + start);\n      }\n      end = (end === undefined || end > length) ? length : toInteger(end);\n      if (end < 0) {\n        end += length;\n      }\n      end = start > end ? 0 : toLength(end);\n      while (start < end) {\n        array[start++] = value;\n      }\n      return array;\n    }\n\n    /**\n     * The base implementation of `_.filter` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} predicate The function invoked per iteration.\n     * @returns {Array} Returns the new filtered array.\n     */\n    function baseFilter(collection, predicate) {\n      var result = [];\n      baseEach(collection, function(value, index, collection) {\n        if (predicate(value, index, collection)) {\n          result.push(value);\n        }\n      });\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.flatten` with support for restricting flattening.\n     *\n     * @private\n     * @param {Array} array The array to flatten.\n     * @param {number} depth The maximum recursion depth.\n     * @param {boolean} [predicate=isFlattenable] The function invoked per iteration.\n     * @param {boolean} [isStrict] Restrict to values that pass `predicate` checks.\n     * @param {Array} [result=[]] The initial result value.\n     * @returns {Array} Returns the new flattened array.\n     */\n    function baseFlatten(array, depth, predicate, isStrict, result) {\n      var index = -1,\n          length = array.length;\n\n      predicate || (predicate = isFlattenable);\n      result || (result = []);\n\n      while (++index < length) {\n        var value = array[index];\n        if (depth > 0 && predicate(value)) {\n          if (depth > 1) {\n            // Recursively flatten arrays (susceptible to call stack limits).\n            baseFlatten(value, depth - 1, predicate, isStrict, result);\n          } else {\n            arrayPush(result, value);\n          }\n        } else if (!isStrict) {\n          result[result.length] = value;\n        }\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `baseForOwn` which iterates over `object`\n     * properties returned by `keysFunc` and invokes `iteratee` for each property.\n     * Iteratee functions may exit iteration early by explicitly returning `false`.\n     *\n     * @private\n     * @param {Object} object The object to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @param {Function} keysFunc The function to get the keys of `object`.\n     * @returns {Object} Returns `object`.\n     */\n    var baseFor = createBaseFor();\n\n    /**\n     * This function is like `baseFor` except that it iterates over properties\n     * in the opposite order.\n     *\n     * @private\n     * @param {Object} object The object to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @param {Function} keysFunc The function to get the keys of `object`.\n     * @returns {Object} Returns `object`.\n     */\n    var baseForRight = createBaseFor(true);\n\n    /**\n     * The base implementation of `_.forOwn` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Object} object The object to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @returns {Object} Returns `object`.\n     */\n    function baseForOwn(object, iteratee) {\n      return object && baseFor(object, iteratee, keys);\n    }\n\n    /**\n     * The base implementation of `_.forOwnRight` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Object} object The object to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @returns {Object} Returns `object`.\n     */\n    function baseForOwnRight(object, iteratee) {\n      return object && baseForRight(object, iteratee, keys);\n    }\n\n    /**\n     * The base implementation of `_.functions` which creates an array of\n     * `object` function property names filtered from `props`.\n     *\n     * @private\n     * @param {Object} object The object to inspect.\n     * @param {Array} props The property names to filter.\n     * @returns {Array} Returns the function names.\n     */\n    function baseFunctions(object, props) {\n      return arrayFilter(props, function(key) {\n        return isFunction(object[key]);\n      });\n    }\n\n    /**\n     * The base implementation of `_.get` without support for default values.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @param {Array|string} path The path of the property to get.\n     * @returns {*} Returns the resolved value.\n     */\n    function baseGet(object, path) {\n      path = castPath(path, object);\n\n      var index = 0,\n          length = path.length;\n\n      while (object != null && index < length) {\n        object = object[toKey(path[index++])];\n      }\n      return (index && index == length) ? object : undefined;\n    }\n\n    /**\n     * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n     * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n     * symbols of `object`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @param {Function} keysFunc The function to get the keys of `object`.\n     * @param {Function} symbolsFunc The function to get the symbols of `object`.\n     * @returns {Array} Returns the array of property names and symbols.\n     */\n    function baseGetAllKeys(object, keysFunc, symbolsFunc) {\n      var result = keysFunc(object);\n      return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n    }\n\n    /**\n     * The base implementation of `getTag` without fallbacks for buggy environments.\n     *\n     * @private\n     * @param {*} value The value to query.\n     * @returns {string} Returns the `toStringTag`.\n     */\n    function baseGetTag(value) {\n      if (value == null) {\n        return value === undefined ? undefinedTag : nullTag;\n      }\n      return (symToStringTag && symToStringTag in Object(value))\n        ? getRawTag(value)\n        : objectToString(value);\n    }\n\n    /**\n     * The base implementation of `_.gt` which doesn't coerce arguments.\n     *\n     * @private\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @returns {boolean} Returns `true` if `value` is greater than `other`,\n     *  else `false`.\n     */\n    function baseGt(value, other) {\n      return value > other;\n    }\n\n    /**\n     * The base implementation of `_.has` without support for deep paths.\n     *\n     * @private\n     * @param {Object} [object] The object to query.\n     * @param {Array|string} key The key to check.\n     * @returns {boolean} Returns `true` if `key` exists, else `false`.\n     */\n    function baseHas(object, key) {\n      return object != null && hasOwnProperty.call(object, key);\n    }\n\n    /**\n     * The base implementation of `_.hasIn` without support for deep paths.\n     *\n     * @private\n     * @param {Object} [object] The object to query.\n     * @param {Array|string} key The key to check.\n     * @returns {boolean} Returns `true` if `key` exists, else `false`.\n     */\n    function baseHasIn(object, key) {\n      return object != null && key in Object(object);\n    }\n\n    /**\n     * The base implementation of `_.inRange` which doesn't coerce arguments.\n     *\n     * @private\n     * @param {number} number The number to check.\n     * @param {number} start The start of the range.\n     * @param {number} end The end of the range.\n     * @returns {boolean} Returns `true` if `number` is in the range, else `false`.\n     */\n    function baseInRange(number, start, end) {\n      return number >= nativeMin(start, end) && number < nativeMax(start, end);\n    }\n\n    /**\n     * The base implementation of methods like `_.intersection`, without support\n     * for iteratee shorthands, that accepts an array of arrays to inspect.\n     *\n     * @private\n     * @param {Array} arrays The arrays to inspect.\n     * @param {Function} [iteratee] The iteratee invoked per element.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns the new array of shared values.\n     */\n    function baseIntersection(arrays, iteratee, comparator) {\n      var includes = comparator ? arrayIncludesWith : arrayIncludes,\n          length = arrays[0].length,\n          othLength = arrays.length,\n          othIndex = othLength,\n          caches = Array(othLength),\n          maxLength = Infinity,\n          result = [];\n\n      while (othIndex--) {\n        var array = arrays[othIndex];\n        if (othIndex && iteratee) {\n          array = arrayMap(array, baseUnary(iteratee));\n        }\n        maxLength = nativeMin(array.length, maxLength);\n        caches[othIndex] = !comparator && (iteratee || (length >= 120 && array.length >= 120))\n          ? new SetCache(othIndex && array)\n          : undefined;\n      }\n      array = arrays[0];\n\n      var index = -1,\n          seen = caches[0];\n\n      outer:\n      while (++index < length && result.length < maxLength) {\n        var value = array[index],\n            computed = iteratee ? iteratee(value) : value;\n\n        value = (comparator || value !== 0) ? value : 0;\n        if (!(seen\n              ? cacheHas(seen, computed)\n              : includes(result, computed, comparator)\n            )) {\n          othIndex = othLength;\n          while (--othIndex) {\n            var cache = caches[othIndex];\n            if (!(cache\n                  ? cacheHas(cache, computed)\n                  : includes(arrays[othIndex], computed, comparator))\n                ) {\n              continue outer;\n            }\n          }\n          if (seen) {\n            seen.push(computed);\n          }\n          result.push(value);\n        }\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.invert` and `_.invertBy` which inverts\n     * `object` with values transformed by `iteratee` and set by `setter`.\n     *\n     * @private\n     * @param {Object} object The object to iterate over.\n     * @param {Function} setter The function to set `accumulator` values.\n     * @param {Function} iteratee The iteratee to transform values.\n     * @param {Object} accumulator The initial inverted object.\n     * @returns {Function} Returns `accumulator`.\n     */\n    function baseInverter(object, setter, iteratee, accumulator) {\n      baseForOwn(object, function(value, key, object) {\n        setter(accumulator, iteratee(value), key, object);\n      });\n      return accumulator;\n    }\n\n    /**\n     * The base implementation of `_.invoke` without support for individual\n     * method arguments.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @param {Array|string} path The path of the method to invoke.\n     * @param {Array} args The arguments to invoke the method with.\n     * @returns {*} Returns the result of the invoked method.\n     */\n    function baseInvoke(object, path, args) {\n      path = castPath(path, object);\n      object = parent(object, path);\n      var func = object == null ? object : object[toKey(last(path))];\n      return func == null ? undefined : apply(func, object, args);\n    }\n\n    /**\n     * The base implementation of `_.isArguments`.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n     */\n    function baseIsArguments(value) {\n      return isObjectLike(value) && baseGetTag(value) == argsTag;\n    }\n\n    /**\n     * The base implementation of `_.isArrayBuffer` without Node.js optimizations.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is an array buffer, else `false`.\n     */\n    function baseIsArrayBuffer(value) {\n      return isObjectLike(value) && baseGetTag(value) == arrayBufferTag;\n    }\n\n    /**\n     * The base implementation of `_.isDate` without Node.js optimizations.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a date object, else `false`.\n     */\n    function baseIsDate(value) {\n      return isObjectLike(value) && baseGetTag(value) == dateTag;\n    }\n\n    /**\n     * The base implementation of `_.isEqual` which supports partial comparisons\n     * and tracks traversed objects.\n     *\n     * @private\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @param {boolean} bitmask The bitmask flags.\n     *  1 - Unordered comparison\n     *  2 - Partial comparison\n     * @param {Function} [customizer] The function to customize comparisons.\n     * @param {Object} [stack] Tracks traversed `value` and `other` objects.\n     * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n     */\n    function baseIsEqual(value, other, bitmask, customizer, stack) {\n      if (value === other) {\n        return true;\n      }\n      if (value == null || other == null || (!isObjectLike(value) && !isObjectLike(other))) {\n        return value !== value && other !== other;\n      }\n      return baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);\n    }\n\n    /**\n     * A specialized version of `baseIsEqual` for arrays and objects which performs\n     * deep comparisons and tracks traversed objects enabling objects with circular\n     * references to be compared.\n     *\n     * @private\n     * @param {Object} object The object to compare.\n     * @param {Object} other The other object to compare.\n     * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n     * @param {Function} customizer The function to customize comparisons.\n     * @param {Function} equalFunc The function to determine equivalents of values.\n     * @param {Object} [stack] Tracks traversed `object` and `other` objects.\n     * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n     */\n    function baseIsEqualDeep(object, other, bitmask, customizer, equalFunc, stack) {\n      var objIsArr = isArray(object),\n          othIsArr = isArray(other),\n          objTag = objIsArr ? arrayTag : getTag(object),\n          othTag = othIsArr ? arrayTag : getTag(other);\n\n      objTag = objTag == argsTag ? objectTag : objTag;\n      othTag = othTag == argsTag ? objectTag : othTag;\n\n      var objIsObj = objTag == objectTag,\n          othIsObj = othTag == objectTag,\n          isSameTag = objTag == othTag;\n\n      if (isSameTag && isBuffer(object)) {\n        if (!isBuffer(other)) {\n          return false;\n        }\n        objIsArr = true;\n        objIsObj = false;\n      }\n      if (isSameTag && !objIsObj) {\n        stack || (stack = new Stack);\n        return (objIsArr || isTypedArray(object))\n          ? equalArrays(object, other, bitmask, customizer, equalFunc, stack)\n          : equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);\n      }\n      if (!(bitmask & COMPARE_PARTIAL_FLAG)) {\n        var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),\n            othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\n\n        if (objIsWrapped || othIsWrapped) {\n          var objUnwrapped = objIsWrapped ? object.value() : object,\n              othUnwrapped = othIsWrapped ? other.value() : other;\n\n          stack || (stack = new Stack);\n          return equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);\n        }\n      }\n      if (!isSameTag) {\n        return false;\n      }\n      stack || (stack = new Stack);\n      return equalObjects(object, other, bitmask, customizer, equalFunc, stack);\n    }\n\n    /**\n     * The base implementation of `_.isMap` without Node.js optimizations.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n     */\n    function baseIsMap(value) {\n      return isObjectLike(value) && getTag(value) == mapTag;\n    }\n\n    /**\n     * The base implementation of `_.isMatch` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Object} object The object to inspect.\n     * @param {Object} source The object of property values to match.\n     * @param {Array} matchData The property names, values, and compare flags to match.\n     * @param {Function} [customizer] The function to customize comparisons.\n     * @returns {boolean} Returns `true` if `object` is a match, else `false`.\n     */\n    function baseIsMatch(object, source, matchData, customizer) {\n      var index = matchData.length,\n          length = index,\n          noCustomizer = !customizer;\n\n      if (object == null) {\n        return !length;\n      }\n      object = Object(object);\n      while (index--) {\n        var data = matchData[index];\n        if ((noCustomizer && data[2])\n              ? data[1] !== object[data[0]]\n              : !(data[0] in object)\n            ) {\n          return false;\n        }\n      }\n      while (++index < length) {\n        data = matchData[index];\n        var key = data[0],\n            objValue = object[key],\n            srcValue = data[1];\n\n        if (noCustomizer && data[2]) {\n          if (objValue === undefined && !(key in object)) {\n            return false;\n          }\n        } else {\n          var stack = new Stack;\n          if (customizer) {\n            var result = customizer(objValue, srcValue, key, object, source, stack);\n          }\n          if (!(result === undefined\n                ? baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG, customizer, stack)\n                : result\n              )) {\n            return false;\n          }\n        }\n      }\n      return true;\n    }\n\n    /**\n     * The base implementation of `_.isNative` without bad shim checks.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a native function,\n     *  else `false`.\n     */\n    function baseIsNative(value) {\n      if (!isObject(value) || isMasked(value)) {\n        return false;\n      }\n      var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n      return pattern.test(toSource(value));\n    }\n\n    /**\n     * The base implementation of `_.isRegExp` without Node.js optimizations.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a regexp, else `false`.\n     */\n    function baseIsRegExp(value) {\n      return isObjectLike(value) && baseGetTag(value) == regexpTag;\n    }\n\n    /**\n     * The base implementation of `_.isSet` without Node.js optimizations.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n     */\n    function baseIsSet(value) {\n      return isObjectLike(value) && getTag(value) == setTag;\n    }\n\n    /**\n     * The base implementation of `_.isTypedArray` without Node.js optimizations.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n     */\n    function baseIsTypedArray(value) {\n      return isObjectLike(value) &&\n        isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n    }\n\n    /**\n     * The base implementation of `_.iteratee`.\n     *\n     * @private\n     * @param {*} [value=_.identity] The value to convert to an iteratee.\n     * @returns {Function} Returns the iteratee.\n     */\n    function baseIteratee(value) {\n      // Don't store the `typeof` result in a variable to avoid a JIT bug in Safari 9.\n      // See https://bugs.webkit.org/show_bug.cgi?id=156034 for more details.\n      if (typeof value == 'function') {\n        return value;\n      }\n      if (value == null) {\n        return identity;\n      }\n      if (typeof value == 'object') {\n        return isArray(value)\n          ? baseMatchesProperty(value[0], value[1])\n          : baseMatches(value);\n      }\n      return property(value);\n    }\n\n    /**\n     * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property names.\n     */\n    function baseKeys(object) {\n      if (!isPrototype(object)) {\n        return nativeKeys(object);\n      }\n      var result = [];\n      for (var key in Object(object)) {\n        if (hasOwnProperty.call(object, key) && key != 'constructor') {\n          result.push(key);\n        }\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.keysIn` which doesn't treat sparse arrays as dense.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property names.\n     */\n    function baseKeysIn(object) {\n      if (!isObject(object)) {\n        return nativeKeysIn(object);\n      }\n      var isProto = isPrototype(object),\n          result = [];\n\n      for (var key in object) {\n        if (!(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {\n          result.push(key);\n        }\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.lt` which doesn't coerce arguments.\n     *\n     * @private\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @returns {boolean} Returns `true` if `value` is less than `other`,\n     *  else `false`.\n     */\n    function baseLt(value, other) {\n      return value < other;\n    }\n\n    /**\n     * The base implementation of `_.map` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} iteratee The function invoked per iteration.\n     * @returns {Array} Returns the new mapped array.\n     */\n    function baseMap(collection, iteratee) {\n      var index = -1,\n          result = isArrayLike(collection) ? Array(collection.length) : [];\n\n      baseEach(collection, function(value, key, collection) {\n        result[++index] = iteratee(value, key, collection);\n      });\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.matches` which doesn't clone `source`.\n     *\n     * @private\n     * @param {Object} source The object of property values to match.\n     * @returns {Function} Returns the new spec function.\n     */\n    function baseMatches(source) {\n      var matchData = getMatchData(source);\n      if (matchData.length == 1 && matchData[0][2]) {\n        return matchesStrictComparable(matchData[0][0], matchData[0][1]);\n      }\n      return function(object) {\n        return object === source || baseIsMatch(object, source, matchData);\n      };\n    }\n\n    /**\n     * The base implementation of `_.matchesProperty` which doesn't clone `srcValue`.\n     *\n     * @private\n     * @param {string} path The path of the property to get.\n     * @param {*} srcValue The value to match.\n     * @returns {Function} Returns the new spec function.\n     */\n    function baseMatchesProperty(path, srcValue) {\n      if (isKey(path) && isStrictComparable(srcValue)) {\n        return matchesStrictComparable(toKey(path), srcValue);\n      }\n      return function(object) {\n        var objValue = get(object, path);\n        return (objValue === undefined && objValue === srcValue)\n          ? hasIn(object, path)\n          : baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG);\n      };\n    }\n\n    /**\n     * The base implementation of `_.merge` without support for multiple sources.\n     *\n     * @private\n     * @param {Object} object The destination object.\n     * @param {Object} source The source object.\n     * @param {number} srcIndex The index of `source`.\n     * @param {Function} [customizer] The function to customize merged values.\n     * @param {Object} [stack] Tracks traversed source values and their merged\n     *  counterparts.\n     */\n    function baseMerge(object, source, srcIndex, customizer, stack) {\n      if (object === source) {\n        return;\n      }\n      baseFor(source, function(srcValue, key) {\n        stack || (stack = new Stack);\n        if (isObject(srcValue)) {\n          baseMergeDeep(object, source, key, srcIndex, baseMerge, customizer, stack);\n        }\n        else {\n          var newValue = customizer\n            ? customizer(safeGet(object, key), srcValue, (key + ''), object, source, stack)\n            : undefined;\n\n          if (newValue === undefined) {\n            newValue = srcValue;\n          }\n          assignMergeValue(object, key, newValue);\n        }\n      }, keysIn);\n    }\n\n    /**\n     * A specialized version of `baseMerge` for arrays and objects which performs\n     * deep merges and tracks traversed objects enabling objects with circular\n     * references to be merged.\n     *\n     * @private\n     * @param {Object} object The destination object.\n     * @param {Object} source The source object.\n     * @param {string} key The key of the value to merge.\n     * @param {number} srcIndex The index of `source`.\n     * @param {Function} mergeFunc The function to merge values.\n     * @param {Function} [customizer] The function to customize assigned values.\n     * @param {Object} [stack] Tracks traversed source values and their merged\n     *  counterparts.\n     */\n    function baseMergeDeep(object, source, key, srcIndex, mergeFunc, customizer, stack) {\n      var objValue = safeGet(object, key),\n          srcValue = safeGet(source, key),\n          stacked = stack.get(srcValue);\n\n      if (stacked) {\n        assignMergeValue(object, key, stacked);\n        return;\n      }\n      var newValue = customizer\n        ? customizer(objValue, srcValue, (key + ''), object, source, stack)\n        : undefined;\n\n      var isCommon = newValue === undefined;\n\n      if (isCommon) {\n        var isArr = isArray(srcValue),\n            isBuff = !isArr && isBuffer(srcValue),\n            isTyped = !isArr && !isBuff && isTypedArray(srcValue);\n\n        newValue = srcValue;\n        if (isArr || isBuff || isTyped) {\n          if (isArray(objValue)) {\n            newValue = objValue;\n          }\n          else if (isArrayLikeObject(objValue)) {\n            newValue = copyArray(objValue);\n          }\n          else if (isBuff) {\n            isCommon = false;\n            newValue = cloneBuffer(srcValue, true);\n          }\n          else if (isTyped) {\n            isCommon = false;\n            newValue = cloneTypedArray(srcValue, true);\n          }\n          else {\n            newValue = [];\n          }\n        }\n        else if (isPlainObject(srcValue) || isArguments(srcValue)) {\n          newValue = objValue;\n          if (isArguments(objValue)) {\n            newValue = toPlainObject(objValue);\n          }\n          else if (!isObject(objValue) || isFunction(objValue)) {\n            newValue = initCloneObject(srcValue);\n          }\n        }\n        else {\n          isCommon = false;\n        }\n      }\n      if (isCommon) {\n        // Recursively merge objects and arrays (susceptible to call stack limits).\n        stack.set(srcValue, newValue);\n        mergeFunc(newValue, srcValue, srcIndex, customizer, stack);\n        stack['delete'](srcValue);\n      }\n      assignMergeValue(object, key, newValue);\n    }\n\n    /**\n     * The base implementation of `_.nth` which doesn't coerce arguments.\n     *\n     * @private\n     * @param {Array} array The array to query.\n     * @param {number} n The index of the element to return.\n     * @returns {*} Returns the nth element of `array`.\n     */\n    function baseNth(array, n) {\n      var length = array.length;\n      if (!length) {\n        return;\n      }\n      n += n < 0 ? length : 0;\n      return isIndex(n, length) ? array[n] : undefined;\n    }\n\n    /**\n     * The base implementation of `_.orderBy` without param guards.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function[]|Object[]|string[]} iteratees The iteratees to sort by.\n     * @param {string[]} orders The sort orders of `iteratees`.\n     * @returns {Array} Returns the new sorted array.\n     */\n    function baseOrderBy(collection, iteratees, orders) {\n      if (iteratees.length) {\n        iteratees = arrayMap(iteratees, function(iteratee) {\n          if (isArray(iteratee)) {\n            return function(value) {\n              return baseGet(value, iteratee.length === 1 ? iteratee[0] : iteratee);\n            }\n          }\n          return iteratee;\n        });\n      } else {\n        iteratees = [identity];\n      }\n\n      var index = -1;\n      iteratees = arrayMap(iteratees, baseUnary(getIteratee()));\n\n      var result = baseMap(collection, function(value, key, collection) {\n        var criteria = arrayMap(iteratees, function(iteratee) {\n          return iteratee(value);\n        });\n        return { 'criteria': criteria, 'index': ++index, 'value': value };\n      });\n\n      return baseSortBy(result, function(object, other) {\n        return compareMultiple(object, other, orders);\n      });\n    }\n\n    /**\n     * The base implementation of `_.pick` without support for individual\n     * property identifiers.\n     *\n     * @private\n     * @param {Object} object The source object.\n     * @param {string[]} paths The property paths to pick.\n     * @returns {Object} Returns the new object.\n     */\n    function basePick(object, paths) {\n      return basePickBy(object, paths, function(value, path) {\n        return hasIn(object, path);\n      });\n    }\n\n    /**\n     * The base implementation of  `_.pickBy` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Object} object The source object.\n     * @param {string[]} paths The property paths to pick.\n     * @param {Function} predicate The function invoked per property.\n     * @returns {Object} Returns the new object.\n     */\n    function basePickBy(object, paths, predicate) {\n      var index = -1,\n          length = paths.length,\n          result = {};\n\n      while (++index < length) {\n        var path = paths[index],\n            value = baseGet(object, path);\n\n        if (predicate(value, path)) {\n          baseSet(result, castPath(path, object), value);\n        }\n      }\n      return result;\n    }\n\n    /**\n     * A specialized version of `baseProperty` which supports deep paths.\n     *\n     * @private\n     * @param {Array|string} path The path of the property to get.\n     * @returns {Function} Returns the new accessor function.\n     */\n    function basePropertyDeep(path) {\n      return function(object) {\n        return baseGet(object, path);\n      };\n    }\n\n    /**\n     * The base implementation of `_.pullAllBy` without support for iteratee\n     * shorthands.\n     *\n     * @private\n     * @param {Array} array The array to modify.\n     * @param {Array} values The values to remove.\n     * @param {Function} [iteratee] The iteratee invoked per element.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns `array`.\n     */\n    function basePullAll(array, values, iteratee, comparator) {\n      var indexOf = comparator ? baseIndexOfWith : baseIndexOf,\n          index = -1,\n          length = values.length,\n          seen = array;\n\n      if (array === values) {\n        values = copyArray(values);\n      }\n      if (iteratee) {\n        seen = arrayMap(array, baseUnary(iteratee));\n      }\n      while (++index < length) {\n        var fromIndex = 0,\n            value = values[index],\n            computed = iteratee ? iteratee(value) : value;\n\n        while ((fromIndex = indexOf(seen, computed, fromIndex, comparator)) > -1) {\n          if (seen !== array) {\n            splice.call(seen, fromIndex, 1);\n          }\n          splice.call(array, fromIndex, 1);\n        }\n      }\n      return array;\n    }\n\n    /**\n     * The base implementation of `_.pullAt` without support for individual\n     * indexes or capturing the removed elements.\n     *\n     * @private\n     * @param {Array} array The array to modify.\n     * @param {number[]} indexes The indexes of elements to remove.\n     * @returns {Array} Returns `array`.\n     */\n    function basePullAt(array, indexes) {\n      var length = array ? indexes.length : 0,\n          lastIndex = length - 1;\n\n      while (length--) {\n        var index = indexes[length];\n        if (length == lastIndex || index !== previous) {\n          var previous = index;\n          if (isIndex(index)) {\n            splice.call(array, index, 1);\n          } else {\n            baseUnset(array, index);\n          }\n        }\n      }\n      return array;\n    }\n\n    /**\n     * The base implementation of `_.random` without support for returning\n     * floating-point numbers.\n     *\n     * @private\n     * @param {number} lower The lower bound.\n     * @param {number} upper The upper bound.\n     * @returns {number} Returns the random number.\n     */\n    function baseRandom(lower, upper) {\n      return lower + nativeFloor(nativeRandom() * (upper - lower + 1));\n    }\n\n    /**\n     * The base implementation of `_.range` and `_.rangeRight` which doesn't\n     * coerce arguments.\n     *\n     * @private\n     * @param {number} start The start of the range.\n     * @param {number} end The end of the range.\n     * @param {number} step The value to increment or decrement by.\n     * @param {boolean} [fromRight] Specify iterating from right to left.\n     * @returns {Array} Returns the range of numbers.\n     */\n    function baseRange(start, end, step, fromRight) {\n      var index = -1,\n          length = nativeMax(nativeCeil((end - start) / (step || 1)), 0),\n          result = Array(length);\n\n      while (length--) {\n        result[fromRight ? length : ++index] = start;\n        start += step;\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.repeat` which doesn't coerce arguments.\n     *\n     * @private\n     * @param {string} string The string to repeat.\n     * @param {number} n The number of times to repeat the string.\n     * @returns {string} Returns the repeated string.\n     */\n    function baseRepeat(string, n) {\n      var result = '';\n      if (!string || n < 1 || n > MAX_SAFE_INTEGER) {\n        return result;\n      }\n      // Leverage the exponentiation by squaring algorithm for a faster repeat.\n      // See https://en.wikipedia.org/wiki/Exponentiation_by_squaring for more details.\n      do {\n        if (n % 2) {\n          result += string;\n        }\n        n = nativeFloor(n / 2);\n        if (n) {\n          string += string;\n        }\n      } while (n);\n\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.rest` which doesn't validate or coerce arguments.\n     *\n     * @private\n     * @param {Function} func The function to apply a rest parameter to.\n     * @param {number} [start=func.length-1] The start position of the rest parameter.\n     * @returns {Function} Returns the new function.\n     */\n    function baseRest(func, start) {\n      return setToString(overRest(func, start, identity), func + '');\n    }\n\n    /**\n     * The base implementation of `_.sample`.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to sample.\n     * @returns {*} Returns the random element.\n     */\n    function baseSample(collection) {\n      return arraySample(values(collection));\n    }\n\n    /**\n     * The base implementation of `_.sampleSize` without param guards.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to sample.\n     * @param {number} n The number of elements to sample.\n     * @returns {Array} Returns the random elements.\n     */\n    function baseSampleSize(collection, n) {\n      var array = values(collection);\n      return shuffleSelf(array, baseClamp(n, 0, array.length));\n    }\n\n    /**\n     * The base implementation of `_.set`.\n     *\n     * @private\n     * @param {Object} object The object to modify.\n     * @param {Array|string} path The path of the property to set.\n     * @param {*} value The value to set.\n     * @param {Function} [customizer] The function to customize path creation.\n     * @returns {Object} Returns `object`.\n     */\n    function baseSet(object, path, value, customizer) {\n      if (!isObject(object)) {\n        return object;\n      }\n      path = castPath(path, object);\n\n      var index = -1,\n          length = path.length,\n          lastIndex = length - 1,\n          nested = object;\n\n      while (nested != null && ++index < length) {\n        var key = toKey(path[index]),\n            newValue = value;\n\n        if (key === '__proto__' || key === 'constructor' || key === 'prototype') {\n          return object;\n        }\n\n        if (index != lastIndex) {\n          var objValue = nested[key];\n          newValue = customizer ? customizer(objValue, key, nested) : undefined;\n          if (newValue === undefined) {\n            newValue = isObject(objValue)\n              ? objValue\n              : (isIndex(path[index + 1]) ? [] : {});\n          }\n        }\n        assignValue(nested, key, newValue);\n        nested = nested[key];\n      }\n      return object;\n    }\n\n    /**\n     * The base implementation of `setData` without support for hot loop shorting.\n     *\n     * @private\n     * @param {Function} func The function to associate metadata with.\n     * @param {*} data The metadata.\n     * @returns {Function} Returns `func`.\n     */\n    var baseSetData = !metaMap ? identity : function(func, data) {\n      metaMap.set(func, data);\n      return func;\n    };\n\n    /**\n     * The base implementation of `setToString` without support for hot loop shorting.\n     *\n     * @private\n     * @param {Function} func The function to modify.\n     * @param {Function} string The `toString` result.\n     * @returns {Function} Returns `func`.\n     */\n    var baseSetToString = !defineProperty ? identity : function(func, string) {\n      return defineProperty(func, 'toString', {\n        'configurable': true,\n        'enumerable': false,\n        'value': constant(string),\n        'writable': true\n      });\n    };\n\n    /**\n     * The base implementation of `_.shuffle`.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to shuffle.\n     * @returns {Array} Returns the new shuffled array.\n     */\n    function baseShuffle(collection) {\n      return shuffleSelf(values(collection));\n    }\n\n    /**\n     * The base implementation of `_.slice` without an iteratee call guard.\n     *\n     * @private\n     * @param {Array} array The array to slice.\n     * @param {number} [start=0] The start position.\n     * @param {number} [end=array.length] The end position.\n     * @returns {Array} Returns the slice of `array`.\n     */\n    function baseSlice(array, start, end) {\n      var index = -1,\n          length = array.length;\n\n      if (start < 0) {\n        start = -start > length ? 0 : (length + start);\n      }\n      end = end > length ? length : end;\n      if (end < 0) {\n        end += length;\n      }\n      length = start > end ? 0 : ((end - start) >>> 0);\n      start >>>= 0;\n\n      var result = Array(length);\n      while (++index < length) {\n        result[index] = array[index + start];\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.some` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} predicate The function invoked per iteration.\n     * @returns {boolean} Returns `true` if any element passes the predicate check,\n     *  else `false`.\n     */\n    function baseSome(collection, predicate) {\n      var result;\n\n      baseEach(collection, function(value, index, collection) {\n        result = predicate(value, index, collection);\n        return !result;\n      });\n      return !!result;\n    }\n\n    /**\n     * The base implementation of `_.sortedIndex` and `_.sortedLastIndex` which\n     * performs a binary search of `array` to determine the index at which `value`\n     * should be inserted into `array` in order to maintain its sort order.\n     *\n     * @private\n     * @param {Array} array The sorted array to inspect.\n     * @param {*} value The value to evaluate.\n     * @param {boolean} [retHighest] Specify returning the highest qualified index.\n     * @returns {number} Returns the index at which `value` should be inserted\n     *  into `array`.\n     */\n    function baseSortedIndex(array, value, retHighest) {\n      var low = 0,\n          high = array == null ? low : array.length;\n\n      if (typeof value == 'number' && value === value && high <= HALF_MAX_ARRAY_LENGTH) {\n        while (low < high) {\n          var mid = (low + high) >>> 1,\n              computed = array[mid];\n\n          if (computed !== null && !isSymbol(computed) &&\n              (retHighest ? (computed <= value) : (computed < value))) {\n            low = mid + 1;\n          } else {\n            high = mid;\n          }\n        }\n        return high;\n      }\n      return baseSortedIndexBy(array, value, identity, retHighest);\n    }\n\n    /**\n     * The base implementation of `_.sortedIndexBy` and `_.sortedLastIndexBy`\n     * which invokes `iteratee` for `value` and each element of `array` to compute\n     * their sort ranking. The iteratee is invoked with one argument; (value).\n     *\n     * @private\n     * @param {Array} array The sorted array to inspect.\n     * @param {*} value The value to evaluate.\n     * @param {Function} iteratee The iteratee invoked per element.\n     * @param {boolean} [retHighest] Specify returning the highest qualified index.\n     * @returns {number} Returns the index at which `value` should be inserted\n     *  into `array`.\n     */\n    function baseSortedIndexBy(array, value, iteratee, retHighest) {\n      var low = 0,\n          high = array == null ? 0 : array.length;\n      if (high === 0) {\n        return 0;\n      }\n\n      value = iteratee(value);\n      var valIsNaN = value !== value,\n          valIsNull = value === null,\n          valIsSymbol = isSymbol(value),\n          valIsUndefined = value === undefined;\n\n      while (low < high) {\n        var mid = nativeFloor((low + high) / 2),\n            computed = iteratee(array[mid]),\n            othIsDefined = computed !== undefined,\n            othIsNull = computed === null,\n            othIsReflexive = computed === computed,\n            othIsSymbol = isSymbol(computed);\n\n        if (valIsNaN) {\n          var setLow = retHighest || othIsReflexive;\n        } else if (valIsUndefined) {\n          setLow = othIsReflexive && (retHighest || othIsDefined);\n        } else if (valIsNull) {\n          setLow = othIsReflexive && othIsDefined && (retHighest || !othIsNull);\n        } else if (valIsSymbol) {\n          setLow = othIsReflexive && othIsDefined && !othIsNull && (retHighest || !othIsSymbol);\n        } else if (othIsNull || othIsSymbol) {\n          setLow = false;\n        } else {\n          setLow = retHighest ? (computed <= value) : (computed < value);\n        }\n        if (setLow) {\n          low = mid + 1;\n        } else {\n          high = mid;\n        }\n      }\n      return nativeMin(high, MAX_ARRAY_INDEX);\n    }\n\n    /**\n     * The base implementation of `_.sortedUniq` and `_.sortedUniqBy` without\n     * support for iteratee shorthands.\n     *\n     * @private\n     * @param {Array} array The array to inspect.\n     * @param {Function} [iteratee] The iteratee invoked per element.\n     * @returns {Array} Returns the new duplicate free array.\n     */\n    function baseSortedUniq(array, iteratee) {\n      var index = -1,\n          length = array.length,\n          resIndex = 0,\n          result = [];\n\n      while (++index < length) {\n        var value = array[index],\n            computed = iteratee ? iteratee(value) : value;\n\n        if (!index || !eq(computed, seen)) {\n          var seen = computed;\n          result[resIndex++] = value === 0 ? 0 : value;\n        }\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.toNumber` which doesn't ensure correct\n     * conversions of binary, hexadecimal, or octal string values.\n     *\n     * @private\n     * @param {*} value The value to process.\n     * @returns {number} Returns the number.\n     */\n    function baseToNumber(value) {\n      if (typeof value == 'number') {\n        return value;\n      }\n      if (isSymbol(value)) {\n        return NAN;\n      }\n      return +value;\n    }\n\n    /**\n     * The base implementation of `_.toString` which doesn't convert nullish\n     * values to empty strings.\n     *\n     * @private\n     * @param {*} value The value to process.\n     * @returns {string} Returns the string.\n     */\n    function baseToString(value) {\n      // Exit early for strings to avoid a performance hit in some environments.\n      if (typeof value == 'string') {\n        return value;\n      }\n      if (isArray(value)) {\n        // Recursively convert values (susceptible to call stack limits).\n        return arrayMap(value, baseToString) + '';\n      }\n      if (isSymbol(value)) {\n        return symbolToString ? symbolToString.call(value) : '';\n      }\n      var result = (value + '');\n      return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n    }\n\n    /**\n     * The base implementation of `_.uniqBy` without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Array} array The array to inspect.\n     * @param {Function} [iteratee] The iteratee invoked per element.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns the new duplicate free array.\n     */\n    function baseUniq(array, iteratee, comparator) {\n      var index = -1,\n          includes = arrayIncludes,\n          length = array.length,\n          isCommon = true,\n          result = [],\n          seen = result;\n\n      if (comparator) {\n        isCommon = false;\n        includes = arrayIncludesWith;\n      }\n      else if (length >= LARGE_ARRAY_SIZE) {\n        var set = iteratee ? null : createSet(array);\n        if (set) {\n          return setToArray(set);\n        }\n        isCommon = false;\n        includes = cacheHas;\n        seen = new SetCache;\n      }\n      else {\n        seen = iteratee ? [] : result;\n      }\n      outer:\n      while (++index < length) {\n        var value = array[index],\n            computed = iteratee ? iteratee(value) : value;\n\n        value = (comparator || value !== 0) ? value : 0;\n        if (isCommon && computed === computed) {\n          var seenIndex = seen.length;\n          while (seenIndex--) {\n            if (seen[seenIndex] === computed) {\n              continue outer;\n            }\n          }\n          if (iteratee) {\n            seen.push(computed);\n          }\n          result.push(value);\n        }\n        else if (!includes(seen, computed, comparator)) {\n          if (seen !== result) {\n            seen.push(computed);\n          }\n          result.push(value);\n        }\n      }\n      return result;\n    }\n\n    /**\n     * The base implementation of `_.unset`.\n     *\n     * @private\n     * @param {Object} object The object to modify.\n     * @param {Array|string} path The property path to unset.\n     * @returns {boolean} Returns `true` if the property is deleted, else `false`.\n     */\n    function baseUnset(object, path) {\n      path = castPath(path, object);\n      object = parent(object, path);\n      return object == null || delete object[toKey(last(path))];\n    }\n\n    /**\n     * The base implementation of `_.update`.\n     *\n     * @private\n     * @param {Object} object The object to modify.\n     * @param {Array|string} path The path of the property to update.\n     * @param {Function} updater The function to produce the updated value.\n     * @param {Function} [customizer] The function to customize path creation.\n     * @returns {Object} Returns `object`.\n     */\n    function baseUpdate(object, path, updater, customizer) {\n      return baseSet(object, path, updater(baseGet(object, path)), customizer);\n    }\n\n    /**\n     * The base implementation of methods like `_.dropWhile` and `_.takeWhile`\n     * without support for iteratee shorthands.\n     *\n     * @private\n     * @param {Array} array The array to query.\n     * @param {Function} predicate The function invoked per iteration.\n     * @param {boolean} [isDrop] Specify dropping elements instead of taking them.\n     * @param {boolean} [fromRight] Specify iterating from right to left.\n     * @returns {Array} Returns the slice of `array`.\n     */\n    function baseWhile(array, predicate, isDrop, fromRight) {\n      var length = array.length,\n          index = fromRight ? length : -1;\n\n      while ((fromRight ? index-- : ++index < length) &&\n        predicate(array[index], index, array)) {}\n\n      return isDrop\n        ? baseSlice(array, (fromRight ? 0 : index), (fromRight ? index + 1 : length))\n        : baseSlice(array, (fromRight ? index + 1 : 0), (fromRight ? length : index));\n    }\n\n    /**\n     * The base implementation of `wrapperValue` which returns the result of\n     * performing a sequence of actions on the unwrapped `value`, where each\n     * successive action is supplied the return value of the previous.\n     *\n     * @private\n     * @param {*} value The unwrapped value.\n     * @param {Array} actions Actions to perform to resolve the unwrapped value.\n     * @returns {*} Returns the resolved value.\n     */\n    function baseWrapperValue(value, actions) {\n      var result = value;\n      if (result instanceof LazyWrapper) {\n        result = result.value();\n      }\n      return arrayReduce(actions, function(result, action) {\n        return action.func.apply(action.thisArg, arrayPush([result], action.args));\n      }, result);\n    }\n\n    /**\n     * The base implementation of methods like `_.xor`, without support for\n     * iteratee shorthands, that accepts an array of arrays to inspect.\n     *\n     * @private\n     * @param {Array} arrays The arrays to inspect.\n     * @param {Function} [iteratee] The iteratee invoked per element.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns the new array of values.\n     */\n    function baseXor(arrays, iteratee, comparator) {\n      var length = arrays.length;\n      if (length < 2) {\n        return length ? baseUniq(arrays[0]) : [];\n      }\n      var index = -1,\n          result = Array(length);\n\n      while (++index < length) {\n        var array = arrays[index],\n            othIndex = -1;\n\n        while (++othIndex < length) {\n          if (othIndex != index) {\n            result[index] = baseDifference(result[index] || array, arrays[othIndex], iteratee, comparator);\n          }\n        }\n      }\n      return baseUniq(baseFlatten(result, 1), iteratee, comparator);\n    }\n\n    /**\n     * This base implementation of `_.zipObject` which assigns values using `assignFunc`.\n     *\n     * @private\n     * @param {Array} props The property identifiers.\n     * @param {Array} values The property values.\n     * @param {Function} assignFunc The function to assign values.\n     * @returns {Object} Returns the new object.\n     */\n    function baseZipObject(props, values, assignFunc) {\n      var index = -1,\n          length = props.length,\n          valsLength = values.length,\n          result = {};\n\n      while (++index < length) {\n        var value = index < valsLength ? values[index] : undefined;\n        assignFunc(result, props[index], value);\n      }\n      return result;\n    }\n\n    /**\n     * Casts `value` to an empty array if it's not an array like object.\n     *\n     * @private\n     * @param {*} value The value to inspect.\n     * @returns {Array|Object} Returns the cast array-like object.\n     */\n    function castArrayLikeObject(value) {\n      return isArrayLikeObject(value) ? value : [];\n    }\n\n    /**\n     * Casts `value` to `identity` if it's not a function.\n     *\n     * @private\n     * @param {*} value The value to inspect.\n     * @returns {Function} Returns cast function.\n     */\n    function castFunction(value) {\n      return typeof value == 'function' ? value : identity;\n    }\n\n    /**\n     * Casts `value` to a path array if it's not one.\n     *\n     * @private\n     * @param {*} value The value to inspect.\n     * @param {Object} [object] The object to query keys on.\n     * @returns {Array} Returns the cast property path array.\n     */\n    function castPath(value, object) {\n      if (isArray(value)) {\n        return value;\n      }\n      return isKey(value, object) ? [value] : stringToPath(toString(value));\n    }\n\n    /**\n     * A `baseRest` alias which can be replaced with `identity` by module\n     * replacement plugins.\n     *\n     * @private\n     * @type {Function}\n     * @param {Function} func The function to apply a rest parameter to.\n     * @returns {Function} Returns the new function.\n     */\n    var castRest = baseRest;\n\n    /**\n     * Casts `array` to a slice if it's needed.\n     *\n     * @private\n     * @param {Array} array The array to inspect.\n     * @param {number} start The start position.\n     * @param {number} [end=array.length] The end position.\n     * @returns {Array} Returns the cast slice.\n     */\n    function castSlice(array, start, end) {\n      var length = array.length;\n      end = end === undefined ? length : end;\n      return (!start && end >= length) ? array : baseSlice(array, start, end);\n    }\n\n    /**\n     * A simple wrapper around the global [`clearTimeout`](https://mdn.io/clearTimeout).\n     *\n     * @private\n     * @param {number|Object} id The timer id or timeout object of the timer to clear.\n     */\n    var clearTimeout = ctxClearTimeout || function(id) {\n      return root.clearTimeout(id);\n    };\n\n    /**\n     * Creates a clone of  `buffer`.\n     *\n     * @private\n     * @param {Buffer} buffer The buffer to clone.\n     * @param {boolean} [isDeep] Specify a deep clone.\n     * @returns {Buffer} Returns the cloned buffer.\n     */\n    function cloneBuffer(buffer, isDeep) {\n      if (isDeep) {\n        return buffer.slice();\n      }\n      var length = buffer.length,\n          result = allocUnsafe ? allocUnsafe(length) : new buffer.constructor(length);\n\n      buffer.copy(result);\n      return result;\n    }\n\n    /**\n     * Creates a clone of `arrayBuffer`.\n     *\n     * @private\n     * @param {ArrayBuffer} arrayBuffer The array buffer to clone.\n     * @returns {ArrayBuffer} Returns the cloned array buffer.\n     */\n    function cloneArrayBuffer(arrayBuffer) {\n      var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n      new Uint8Array(result).set(new Uint8Array(arrayBuffer));\n      return result;\n    }\n\n    /**\n     * Creates a clone of `dataView`.\n     *\n     * @private\n     * @param {Object} dataView The data view to clone.\n     * @param {boolean} [isDeep] Specify a deep clone.\n     * @returns {Object} Returns the cloned data view.\n     */\n    function cloneDataView(dataView, isDeep) {\n      var buffer = isDeep ? cloneArrayBuffer(dataView.buffer) : dataView.buffer;\n      return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);\n    }\n\n    /**\n     * Creates a clone of `regexp`.\n     *\n     * @private\n     * @param {Object} regexp The regexp to clone.\n     * @returns {Object} Returns the cloned regexp.\n     */\n    function cloneRegExp(regexp) {\n      var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));\n      result.lastIndex = regexp.lastIndex;\n      return result;\n    }\n\n    /**\n     * Creates a clone of the `symbol` object.\n     *\n     * @private\n     * @param {Object} symbol The symbol object to clone.\n     * @returns {Object} Returns the cloned symbol object.\n     */\n    function cloneSymbol(symbol) {\n      return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};\n    }\n\n    /**\n     * Creates a clone of `typedArray`.\n     *\n     * @private\n     * @param {Object} typedArray The typed array to clone.\n     * @param {boolean} [isDeep] Specify a deep clone.\n     * @returns {Object} Returns the cloned typed array.\n     */\n    function cloneTypedArray(typedArray, isDeep) {\n      var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n      return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n    }\n\n    /**\n     * Compares values to sort them in ascending order.\n     *\n     * @private\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @returns {number} Returns the sort order indicator for `value`.\n     */\n    function compareAscending(value, other) {\n      if (value !== other) {\n        var valIsDefined = value !== undefined,\n            valIsNull = value === null,\n            valIsReflexive = value === value,\n            valIsSymbol = isSymbol(value);\n\n        var othIsDefined = other !== undefined,\n            othIsNull = other === null,\n            othIsReflexive = other === other,\n            othIsSymbol = isSymbol(other);\n\n        if ((!othIsNull && !othIsSymbol && !valIsSymbol && value > other) ||\n            (valIsSymbol && othIsDefined && othIsReflexive && !othIsNull && !othIsSymbol) ||\n            (valIsNull && othIsDefined && othIsReflexive) ||\n            (!valIsDefined && othIsReflexive) ||\n            !valIsReflexive) {\n          return 1;\n        }\n        if ((!valIsNull && !valIsSymbol && !othIsSymbol && value < other) ||\n            (othIsSymbol && valIsDefined && valIsReflexive && !valIsNull && !valIsSymbol) ||\n            (othIsNull && valIsDefined && valIsReflexive) ||\n            (!othIsDefined && valIsReflexive) ||\n            !othIsReflexive) {\n          return -1;\n        }\n      }\n      return 0;\n    }\n\n    /**\n     * Used by `_.orderBy` to compare multiple properties of a value to another\n     * and stable sort them.\n     *\n     * If `orders` is unspecified, all values are sorted in ascending order. Otherwise,\n     * specify an order of \"desc\" for descending or \"asc\" for ascending sort order\n     * of corresponding values.\n     *\n     * @private\n     * @param {Object} object The object to compare.\n     * @param {Object} other The other object to compare.\n     * @param {boolean[]|string[]} orders The order to sort by for each property.\n     * @returns {number} Returns the sort order indicator for `object`.\n     */\n    function compareMultiple(object, other, orders) {\n      var index = -1,\n          objCriteria = object.criteria,\n          othCriteria = other.criteria,\n          length = objCriteria.length,\n          ordersLength = orders.length;\n\n      while (++index < length) {\n        var result = compareAscending(objCriteria[index], othCriteria[index]);\n        if (result) {\n          if (index >= ordersLength) {\n            return result;\n          }\n          var order = orders[index];\n          return result * (order == 'desc' ? -1 : 1);\n        }\n      }\n      // Fixes an `Array#sort` bug in the JS engine embedded in Adobe applications\n      // that causes it, under certain circumstances, to provide the same value for\n      // `object` and `other`. See https://github.com/jashkenas/underscore/pull/1247\n      // for more details.\n      //\n      // This also ensures a stable sort in V8 and other engines.\n      // See https://bugs.chromium.org/p/v8/issues/detail?id=90 for more details.\n      return object.index - other.index;\n    }\n\n    /**\n     * Creates an array that is the composition of partially applied arguments,\n     * placeholders, and provided arguments into a single array of arguments.\n     *\n     * @private\n     * @param {Array} args The provided arguments.\n     * @param {Array} partials The arguments to prepend to those provided.\n     * @param {Array} holders The `partials` placeholder indexes.\n     * @params {boolean} [isCurried] Specify composing for a curried function.\n     * @returns {Array} Returns the new array of composed arguments.\n     */\n    function composeArgs(args, partials, holders, isCurried) {\n      var argsIndex = -1,\n          argsLength = args.length,\n          holdersLength = holders.length,\n          leftIndex = -1,\n          leftLength = partials.length,\n          rangeLength = nativeMax(argsLength - holdersLength, 0),\n          result = Array(leftLength + rangeLength),\n          isUncurried = !isCurried;\n\n      while (++leftIndex < leftLength) {\n        result[leftIndex] = partials[leftIndex];\n      }\n      while (++argsIndex < holdersLength) {\n        if (isUncurried || argsIndex < argsLength) {\n          result[holders[argsIndex]] = args[argsIndex];\n        }\n      }\n      while (rangeLength--) {\n        result[leftIndex++] = args[argsIndex++];\n      }\n      return result;\n    }\n\n    /**\n     * This function is like `composeArgs` except that the arguments composition\n     * is tailored for `_.partialRight`.\n     *\n     * @private\n     * @param {Array} args The provided arguments.\n     * @param {Array} partials The arguments to append to those provided.\n     * @param {Array} holders The `partials` placeholder indexes.\n     * @params {boolean} [isCurried] Specify composing for a curried function.\n     * @returns {Array} Returns the new array of composed arguments.\n     */\n    function composeArgsRight(args, partials, holders, isCurried) {\n      var argsIndex = -1,\n          argsLength = args.length,\n          holdersIndex = -1,\n          holdersLength = holders.length,\n          rightIndex = -1,\n          rightLength = partials.length,\n          rangeLength = nativeMax(argsLength - holdersLength, 0),\n          result = Array(rangeLength + rightLength),\n          isUncurried = !isCurried;\n\n      while (++argsIndex < rangeLength) {\n        result[argsIndex] = args[argsIndex];\n      }\n      var offset = argsIndex;\n      while (++rightIndex < rightLength) {\n        result[offset + rightIndex] = partials[rightIndex];\n      }\n      while (++holdersIndex < holdersLength) {\n        if (isUncurried || argsIndex < argsLength) {\n          result[offset + holders[holdersIndex]] = args[argsIndex++];\n        }\n      }\n      return result;\n    }\n\n    /**\n     * Copies the values of `source` to `array`.\n     *\n     * @private\n     * @param {Array} source The array to copy values from.\n     * @param {Array} [array=[]] The array to copy values to.\n     * @returns {Array} Returns `array`.\n     */\n    function copyArray(source, array) {\n      var index = -1,\n          length = source.length;\n\n      array || (array = Array(length));\n      while (++index < length) {\n        array[index] = source[index];\n      }\n      return array;\n    }\n\n    /**\n     * Copies properties of `source` to `object`.\n     *\n     * @private\n     * @param {Object} source The object to copy properties from.\n     * @param {Array} props The property identifiers to copy.\n     * @param {Object} [object={}] The object to copy properties to.\n     * @param {Function} [customizer] The function to customize copied values.\n     * @returns {Object} Returns `object`.\n     */\n    function copyObject(source, props, object, customizer) {\n      var isNew = !object;\n      object || (object = {});\n\n      var index = -1,\n          length = props.length;\n\n      while (++index < length) {\n        var key = props[index];\n\n        var newValue = customizer\n          ? customizer(object[key], source[key], key, object, source)\n          : undefined;\n\n        if (newValue === undefined) {\n          newValue = source[key];\n        }\n        if (isNew) {\n          baseAssignValue(object, key, newValue);\n        } else {\n          assignValue(object, key, newValue);\n        }\n      }\n      return object;\n    }\n\n    /**\n     * Copies own symbols of `source` to `object`.\n     *\n     * @private\n     * @param {Object} source The object to copy symbols from.\n     * @param {Object} [object={}] The object to copy symbols to.\n     * @returns {Object} Returns `object`.\n     */\n    function copySymbols(source, object) {\n      return copyObject(source, getSymbols(source), object);\n    }\n\n    /**\n     * Copies own and inherited symbols of `source` to `object`.\n     *\n     * @private\n     * @param {Object} source The object to copy symbols from.\n     * @param {Object} [object={}] The object to copy symbols to.\n     * @returns {Object} Returns `object`.\n     */\n    function copySymbolsIn(source, object) {\n      return copyObject(source, getSymbolsIn(source), object);\n    }\n\n    /**\n     * Creates a function like `_.groupBy`.\n     *\n     * @private\n     * @param {Function} setter The function to set accumulator values.\n     * @param {Function} [initializer] The accumulator object initializer.\n     * @returns {Function} Returns the new aggregator function.\n     */\n    function createAggregator(setter, initializer) {\n      return function(collection, iteratee) {\n        var func = isArray(collection) ? arrayAggregator : baseAggregator,\n            accumulator = initializer ? initializer() : {};\n\n        return func(collection, setter, getIteratee(iteratee, 2), accumulator);\n      };\n    }\n\n    /**\n     * Creates a function like `_.assign`.\n     *\n     * @private\n     * @param {Function} assigner The function to assign values.\n     * @returns {Function} Returns the new assigner function.\n     */\n    function createAssigner(assigner) {\n      return baseRest(function(object, sources) {\n        var index = -1,\n            length = sources.length,\n            customizer = length > 1 ? sources[length - 1] : undefined,\n            guard = length > 2 ? sources[2] : undefined;\n\n        customizer = (assigner.length > 3 && typeof customizer == 'function')\n          ? (length--, customizer)\n          : undefined;\n\n        if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n          customizer = length < 3 ? undefined : customizer;\n          length = 1;\n        }\n        object = Object(object);\n        while (++index < length) {\n          var source = sources[index];\n          if (source) {\n            assigner(object, source, index, customizer);\n          }\n        }\n        return object;\n      });\n    }\n\n    /**\n     * Creates a `baseEach` or `baseEachRight` function.\n     *\n     * @private\n     * @param {Function} eachFunc The function to iterate over a collection.\n     * @param {boolean} [fromRight] Specify iterating from right to left.\n     * @returns {Function} Returns the new base function.\n     */\n    function createBaseEach(eachFunc, fromRight) {\n      return function(collection, iteratee) {\n        if (collection == null) {\n          return collection;\n        }\n        if (!isArrayLike(collection)) {\n          return eachFunc(collection, iteratee);\n        }\n        var length = collection.length,\n            index = fromRight ? length : -1,\n            iterable = Object(collection);\n\n        while ((fromRight ? index-- : ++index < length)) {\n          if (iteratee(iterable[index], index, iterable) === false) {\n            break;\n          }\n        }\n        return collection;\n      };\n    }\n\n    /**\n     * Creates a base function for methods like `_.forIn` and `_.forOwn`.\n     *\n     * @private\n     * @param {boolean} [fromRight] Specify iterating from right to left.\n     * @returns {Function} Returns the new base function.\n     */\n    function createBaseFor(fromRight) {\n      return function(object, iteratee, keysFunc) {\n        var index = -1,\n            iterable = Object(object),\n            props = keysFunc(object),\n            length = props.length;\n\n        while (length--) {\n          var key = props[fromRight ? length : ++index];\n          if (iteratee(iterable[key], key, iterable) === false) {\n            break;\n          }\n        }\n        return object;\n      };\n    }\n\n    /**\n     * Creates a function that wraps `func` to invoke it with the optional `this`\n     * binding of `thisArg`.\n     *\n     * @private\n     * @param {Function} func The function to wrap.\n     * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n     * @param {*} [thisArg] The `this` binding of `func`.\n     * @returns {Function} Returns the new wrapped function.\n     */\n    function createBind(func, bitmask, thisArg) {\n      var isBind = bitmask & WRAP_BIND_FLAG,\n          Ctor = createCtor(func);\n\n      function wrapper() {\n        var fn = (this && this !== root && this instanceof wrapper) ? Ctor : func;\n        return fn.apply(isBind ? thisArg : this, arguments);\n      }\n      return wrapper;\n    }\n\n    /**\n     * Creates a function like `_.lowerFirst`.\n     *\n     * @private\n     * @param {string} methodName The name of the `String` case method to use.\n     * @returns {Function} Returns the new case function.\n     */\n    function createCaseFirst(methodName) {\n      return function(string) {\n        string = toString(string);\n\n        var strSymbols = hasUnicode(string)\n          ? stringToArray(string)\n          : undefined;\n\n        var chr = strSymbols\n          ? strSymbols[0]\n          : string.charAt(0);\n\n        var trailing = strSymbols\n          ? castSlice(strSymbols, 1).join('')\n          : string.slice(1);\n\n        return chr[methodName]() + trailing;\n      };\n    }\n\n    /**\n     * Creates a function like `_.camelCase`.\n     *\n     * @private\n     * @param {Function} callback The function to combine each word.\n     * @returns {Function} Returns the new compounder function.\n     */\n    function createCompounder(callback) {\n      return function(string) {\n        return arrayReduce(words(deburr(string).replace(reApos, '')), callback, '');\n      };\n    }\n\n    /**\n     * Creates a function that produces an instance of `Ctor` regardless of\n     * whether it was invoked as part of a `new` expression or by `call` or `apply`.\n     *\n     * @private\n     * @param {Function} Ctor The constructor to wrap.\n     * @returns {Function} Returns the new wrapped function.\n     */\n    function createCtor(Ctor) {\n      return function() {\n        // Use a `switch` statement to work with class constructors. See\n        // http://ecma-international.org/ecma-262/7.0/#sec-ecmascript-function-objects-call-thisargument-argumentslist\n        // for more details.\n        var args = arguments;\n        switch (args.length) {\n          case 0: return new Ctor;\n          case 1: return new Ctor(args[0]);\n          case 2: return new Ctor(args[0], args[1]);\n          case 3: return new Ctor(args[0], args[1], args[2]);\n          case 4: return new Ctor(args[0], args[1], args[2], args[3]);\n          case 5: return new Ctor(args[0], args[1], args[2], args[3], args[4]);\n          case 6: return new Ctor(args[0], args[1], args[2], args[3], args[4], args[5]);\n          case 7: return new Ctor(args[0], args[1], args[2], args[3], args[4], args[5], args[6]);\n        }\n        var thisBinding = baseCreate(Ctor.prototype),\n            result = Ctor.apply(thisBinding, args);\n\n        // Mimic the constructor's `return` behavior.\n        // See https://es5.github.io/#x13.2.2 for more details.\n        return isObject(result) ? result : thisBinding;\n      };\n    }\n\n    /**\n     * Creates a function that wraps `func` to enable currying.\n     *\n     * @private\n     * @param {Function} func The function to wrap.\n     * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n     * @param {number} arity The arity of `func`.\n     * @returns {Function} Returns the new wrapped function.\n     */\n    function createCurry(func, bitmask, arity) {\n      var Ctor = createCtor(func);\n\n      function wrapper() {\n        var length = arguments.length,\n            args = Array(length),\n            index = length,\n            placeholder = getHolder(wrapper);\n\n        while (index--) {\n          args[index] = arguments[index];\n        }\n        var holders = (length < 3 && args[0] !== placeholder && args[length - 1] !== placeholder)\n          ? []\n          : replaceHolders(args, placeholder);\n\n        length -= holders.length;\n        if (length < arity) {\n          return createRecurry(\n            func, bitmask, createHybrid, wrapper.placeholder, undefined,\n            args, holders, undefined, undefined, arity - length);\n        }\n        var fn = (this && this !== root && this instanceof wrapper) ? Ctor : func;\n        return apply(fn, this, args);\n      }\n      return wrapper;\n    }\n\n    /**\n     * Creates a `_.find` or `_.findLast` function.\n     *\n     * @private\n     * @param {Function} findIndexFunc The function to find the collection index.\n     * @returns {Function} Returns the new find function.\n     */\n    function createFind(findIndexFunc) {\n      return function(collection, predicate, fromIndex) {\n        var iterable = Object(collection);\n        if (!isArrayLike(collection)) {\n          var iteratee = getIteratee(predicate, 3);\n          collection = keys(collection);\n          predicate = function(key) { return iteratee(iterable[key], key, iterable); };\n        }\n        var index = findIndexFunc(collection, predicate, fromIndex);\n        return index > -1 ? iterable[iteratee ? collection[index] : index] : undefined;\n      };\n    }\n\n    /**\n     * Creates a `_.flow` or `_.flowRight` function.\n     *\n     * @private\n     * @param {boolean} [fromRight] Specify iterating from right to left.\n     * @returns {Function} Returns the new flow function.\n     */\n    function createFlow(fromRight) {\n      return flatRest(function(funcs) {\n        var length = funcs.length,\n            index = length,\n            prereq = LodashWrapper.prototype.thru;\n\n        if (fromRight) {\n          funcs.reverse();\n        }\n        while (index--) {\n          var func = funcs[index];\n          if (typeof func != 'function') {\n            throw new TypeError(FUNC_ERROR_TEXT);\n          }\n          if (prereq && !wrapper && getFuncName(func) == 'wrapper') {\n            var wrapper = new LodashWrapper([], true);\n          }\n        }\n        index = wrapper ? index : length;\n        while (++index < length) {\n          func = funcs[index];\n\n          var funcName = getFuncName(func),\n              data = funcName == 'wrapper' ? getData(func) : undefined;\n\n          if (data && isLaziable(data[0]) &&\n                data[1] == (WRAP_ARY_FLAG | WRAP_CURRY_FLAG | WRAP_PARTIAL_FLAG | WRAP_REARG_FLAG) &&\n                !data[4].length && data[9] == 1\n              ) {\n            wrapper = wrapper[getFuncName(data[0])].apply(wrapper, data[3]);\n          } else {\n            wrapper = (func.length == 1 && isLaziable(func))\n              ? wrapper[funcName]()\n              : wrapper.thru(func);\n          }\n        }\n        return function() {\n          var args = arguments,\n              value = args[0];\n\n          if (wrapper && args.length == 1 && isArray(value)) {\n            return wrapper.plant(value).value();\n          }\n          var index = 0,\n              result = length ? funcs[index].apply(this, args) : value;\n\n          while (++index < length) {\n            result = funcs[index].call(this, result);\n          }\n          return result;\n        };\n      });\n    }\n\n    /**\n     * Creates a function that wraps `func` to invoke it with optional `this`\n     * binding of `thisArg`, partial application, and currying.\n     *\n     * @private\n     * @param {Function|string} func The function or method name to wrap.\n     * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n     * @param {*} [thisArg] The `this` binding of `func`.\n     * @param {Array} [partials] The arguments to prepend to those provided to\n     *  the new function.\n     * @param {Array} [holders] The `partials` placeholder indexes.\n     * @param {Array} [partialsRight] The arguments to append to those provided\n     *  to the new function.\n     * @param {Array} [holdersRight] The `partialsRight` placeholder indexes.\n     * @param {Array} [argPos] The argument positions of the new function.\n     * @param {number} [ary] The arity cap of `func`.\n     * @param {number} [arity] The arity of `func`.\n     * @returns {Function} Returns the new wrapped function.\n     */\n    function createHybrid(func, bitmask, thisArg, partials, holders, partialsRight, holdersRight, argPos, ary, arity) {\n      var isAry = bitmask & WRAP_ARY_FLAG,\n          isBind = bitmask & WRAP_BIND_FLAG,\n          isBindKey = bitmask & WRAP_BIND_KEY_FLAG,\n          isCurried = bitmask & (WRAP_CURRY_FLAG | WRAP_CURRY_RIGHT_FLAG),\n          isFlip = bitmask & WRAP_FLIP_FLAG,\n          Ctor = isBindKey ? undefined : createCtor(func);\n\n      function wrapper() {\n        var length = arguments.length,\n            args = Array(length),\n            index = length;\n\n        while (index--) {\n          args[index] = arguments[index];\n        }\n        if (isCurried) {\n          var placeholder = getHolder(wrapper),\n              holdersCount = countHolders(args, placeholder);\n        }\n        if (partials) {\n          args = composeArgs(args, partials, holders, isCurried);\n        }\n        if (partialsRight) {\n          args = composeArgsRight(args, partialsRight, holdersRight, isCurried);\n        }\n        length -= holdersCount;\n        if (isCurried && length < arity) {\n          var newHolders = replaceHolders(args, placeholder);\n          return createRecurry(\n            func, bitmask, createHybrid, wrapper.placeholder, thisArg,\n            args, newHolders, argPos, ary, arity - length\n          );\n        }\n        var thisBinding = isBind ? thisArg : this,\n            fn = isBindKey ? thisBinding[func] : func;\n\n        length = args.length;\n        if (argPos) {\n          args = reorder(args, argPos);\n        } else if (isFlip && length > 1) {\n          args.reverse();\n        }\n        if (isAry && ary < length) {\n          args.length = ary;\n        }\n        if (this && this !== root && this instanceof wrapper) {\n          fn = Ctor || createCtor(fn);\n        }\n        return fn.apply(thisBinding, args);\n      }\n      return wrapper;\n    }\n\n    /**\n     * Creates a function like `_.invertBy`.\n     *\n     * @private\n     * @param {Function} setter The function to set accumulator values.\n     * @param {Function} toIteratee The function to resolve iteratees.\n     * @returns {Function} Returns the new inverter function.\n     */\n    function createInverter(setter, toIteratee) {\n      return function(object, iteratee) {\n        return baseInverter(object, setter, toIteratee(iteratee), {});\n      };\n    }\n\n    /**\n     * Creates a function that performs a mathematical operation on two values.\n     *\n     * @private\n     * @param {Function} operator The function to perform the operation.\n     * @param {number} [defaultValue] The value used for `undefined` arguments.\n     * @returns {Function} Returns the new mathematical operation function.\n     */\n    function createMathOperation(operator, defaultValue) {\n      return function(value, other) {\n        var result;\n        if (value === undefined && other === undefined) {\n          return defaultValue;\n        }\n        if (value !== undefined) {\n          result = value;\n        }\n        if (other !== undefined) {\n          if (result === undefined) {\n            return other;\n          }\n          if (typeof value == 'string' || typeof other == 'string') {\n            value = baseToString(value);\n            other = baseToString(other);\n          } else {\n            value = baseToNumber(value);\n            other = baseToNumber(other);\n          }\n          result = operator(value, other);\n        }\n        return result;\n      };\n    }\n\n    /**\n     * Creates a function like `_.over`.\n     *\n     * @private\n     * @param {Function} arrayFunc The function to iterate over iteratees.\n     * @returns {Function} Returns the new over function.\n     */\n    function createOver(arrayFunc) {\n      return flatRest(function(iteratees) {\n        iteratees = arrayMap(iteratees, baseUnary(getIteratee()));\n        return baseRest(function(args) {\n          var thisArg = this;\n          return arrayFunc(iteratees, function(iteratee) {\n            return apply(iteratee, thisArg, args);\n          });\n        });\n      });\n    }\n\n    /**\n     * Creates the padding for `string` based on `length`. The `chars` string\n     * is truncated if the number of characters exceeds `length`.\n     *\n     * @private\n     * @param {number} length The padding length.\n     * @param {string} [chars=' '] The string used as padding.\n     * @returns {string} Returns the padding for `string`.\n     */\n    function createPadding(length, chars) {\n      chars = chars === undefined ? ' ' : baseToString(chars);\n\n      var charsLength = chars.length;\n      if (charsLength < 2) {\n        return charsLength ? baseRepeat(chars, length) : chars;\n      }\n      var result = baseRepeat(chars, nativeCeil(length / stringSize(chars)));\n      return hasUnicode(chars)\n        ? castSlice(stringToArray(result), 0, length).join('')\n        : result.slice(0, length);\n    }\n\n    /**\n     * Creates a function that wraps `func` to invoke it with the `this` binding\n     * of `thisArg` and `partials` prepended to the arguments it receives.\n     *\n     * @private\n     * @param {Function} func The function to wrap.\n     * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n     * @param {*} thisArg The `this` binding of `func`.\n     * @param {Array} partials The arguments to prepend to those provided to\n     *  the new function.\n     * @returns {Function} Returns the new wrapped function.\n     */\n    function createPartial(func, bitmask, thisArg, partials) {\n      var isBind = bitmask & WRAP_BIND_FLAG,\n          Ctor = createCtor(func);\n\n      function wrapper() {\n        var argsIndex = -1,\n            argsLength = arguments.length,\n            leftIndex = -1,\n            leftLength = partials.length,\n            args = Array(leftLength + argsLength),\n            fn = (this && this !== root && this instanceof wrapper) ? Ctor : func;\n\n        while (++leftIndex < leftLength) {\n          args[leftIndex] = partials[leftIndex];\n        }\n        while (argsLength--) {\n          args[leftIndex++] = arguments[++argsIndex];\n        }\n        return apply(fn, isBind ? thisArg : this, args);\n      }\n      return wrapper;\n    }\n\n    /**\n     * Creates a `_.range` or `_.rangeRight` function.\n     *\n     * @private\n     * @param {boolean} [fromRight] Specify iterating from right to left.\n     * @returns {Function} Returns the new range function.\n     */\n    function createRange(fromRight) {\n      return function(start, end, step) {\n        if (step && typeof step != 'number' && isIterateeCall(start, end, step)) {\n          end = step = undefined;\n        }\n        // Ensure the sign of `-0` is preserved.\n        start = toFinite(start);\n        if (end === undefined) {\n          end = start;\n          start = 0;\n        } else {\n          end = toFinite(end);\n        }\n        step = step === undefined ? (start < end ? 1 : -1) : toFinite(step);\n        return baseRange(start, end, step, fromRight);\n      };\n    }\n\n    /**\n     * Creates a function that performs a relational operation on two values.\n     *\n     * @private\n     * @param {Function} operator The function to perform the operation.\n     * @returns {Function} Returns the new relational operation function.\n     */\n    function createRelationalOperation(operator) {\n      return function(value, other) {\n        if (!(typeof value == 'string' && typeof other == 'string')) {\n          value = toNumber(value);\n          other = toNumber(other);\n        }\n        return operator(value, other);\n      };\n    }\n\n    /**\n     * Creates a function that wraps `func` to continue currying.\n     *\n     * @private\n     * @param {Function} func The function to wrap.\n     * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n     * @param {Function} wrapFunc The function to create the `func` wrapper.\n     * @param {*} placeholder The placeholder value.\n     * @param {*} [thisArg] The `this` binding of `func`.\n     * @param {Array} [partials] The arguments to prepend to those provided to\n     *  the new function.\n     * @param {Array} [holders] The `partials` placeholder indexes.\n     * @param {Array} [argPos] The argument positions of the new function.\n     * @param {number} [ary] The arity cap of `func`.\n     * @param {number} [arity] The arity of `func`.\n     * @returns {Function} Returns the new wrapped function.\n     */\n    function createRecurry(func, bitmask, wrapFunc, placeholder, thisArg, partials, holders, argPos, ary, arity) {\n      var isCurry = bitmask & WRAP_CURRY_FLAG,\n          newHolders = isCurry ? holders : undefined,\n          newHoldersRight = isCurry ? undefined : holders,\n          newPartials = isCurry ? partials : undefined,\n          newPartialsRight = isCurry ? undefined : partials;\n\n      bitmask |= (isCurry ? WRAP_PARTIAL_FLAG : WRAP_PARTIAL_RIGHT_FLAG);\n      bitmask &= ~(isCurry ? WRAP_PARTIAL_RIGHT_FLAG : WRAP_PARTIAL_FLAG);\n\n      if (!(bitmask & WRAP_CURRY_BOUND_FLAG)) {\n        bitmask &= ~(WRAP_BIND_FLAG | WRAP_BIND_KEY_FLAG);\n      }\n      var newData = [\n        func, bitmask, thisArg, newPartials, newHolders, newPartialsRight,\n        newHoldersRight, argPos, ary, arity\n      ];\n\n      var result = wrapFunc.apply(undefined, newData);\n      if (isLaziable(func)) {\n        setData(result, newData);\n      }\n      result.placeholder = placeholder;\n      return setWrapToString(result, func, bitmask);\n    }\n\n    /**\n     * Creates a function like `_.round`.\n     *\n     * @private\n     * @param {string} methodName The name of the `Math` method to use when rounding.\n     * @returns {Function} Returns the new round function.\n     */\n    function createRound(methodName) {\n      var func = Math[methodName];\n      return function(number, precision) {\n        number = toNumber(number);\n        precision = precision == null ? 0 : nativeMin(toInteger(precision), 292);\n        if (precision && nativeIsFinite(number)) {\n          // Shift with exponential notation to avoid floating-point issues.\n          // See [MDN](https://mdn.io/round#Examples) for more details.\n          var pair = (toString(number) + 'e').split('e'),\n              value = func(pair[0] + 'e' + (+pair[1] + precision));\n\n          pair = (toString(value) + 'e').split('e');\n          return +(pair[0] + 'e' + (+pair[1] - precision));\n        }\n        return func(number);\n      };\n    }\n\n    /**\n     * Creates a set object of `values`.\n     *\n     * @private\n     * @param {Array} values The values to add to the set.\n     * @returns {Object} Returns the new set.\n     */\n    var createSet = !(Set && (1 / setToArray(new Set([,-0]))[1]) == INFINITY) ? noop : function(values) {\n      return new Set(values);\n    };\n\n    /**\n     * Creates a `_.toPairs` or `_.toPairsIn` function.\n     *\n     * @private\n     * @param {Function} keysFunc The function to get the keys of a given object.\n     * @returns {Function} Returns the new pairs function.\n     */\n    function createToPairs(keysFunc) {\n      return function(object) {\n        var tag = getTag(object);\n        if (tag == mapTag) {\n          return mapToArray(object);\n        }\n        if (tag == setTag) {\n          return setToPairs(object);\n        }\n        return baseToPairs(object, keysFunc(object));\n      };\n    }\n\n    /**\n     * Creates a function that either curries or invokes `func` with optional\n     * `this` binding and partially applied arguments.\n     *\n     * @private\n     * @param {Function|string} func The function or method name to wrap.\n     * @param {number} bitmask The bitmask flags.\n     *    1 - `_.bind`\n     *    2 - `_.bindKey`\n     *    4 - `_.curry` or `_.curryRight` of a bound function\n     *    8 - `_.curry`\n     *   16 - `_.curryRight`\n     *   32 - `_.partial`\n     *   64 - `_.partialRight`\n     *  128 - `_.rearg`\n     *  256 - `_.ary`\n     *  512 - `_.flip`\n     * @param {*} [thisArg] The `this` binding of `func`.\n     * @param {Array} [partials] The arguments to be partially applied.\n     * @param {Array} [holders] The `partials` placeholder indexes.\n     * @param {Array} [argPos] The argument positions of the new function.\n     * @param {number} [ary] The arity cap of `func`.\n     * @param {number} [arity] The arity of `func`.\n     * @returns {Function} Returns the new wrapped function.\n     */\n    function createWrap(func, bitmask, thisArg, partials, holders, argPos, ary, arity) {\n      var isBindKey = bitmask & WRAP_BIND_KEY_FLAG;\n      if (!isBindKey && typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      var length = partials ? partials.length : 0;\n      if (!length) {\n        bitmask &= ~(WRAP_PARTIAL_FLAG | WRAP_PARTIAL_RIGHT_FLAG);\n        partials = holders = undefined;\n      }\n      ary = ary === undefined ? ary : nativeMax(toInteger(ary), 0);\n      arity = arity === undefined ? arity : toInteger(arity);\n      length -= holders ? holders.length : 0;\n\n      if (bitmask & WRAP_PARTIAL_RIGHT_FLAG) {\n        var partialsRight = partials,\n            holdersRight = holders;\n\n        partials = holders = undefined;\n      }\n      var data = isBindKey ? undefined : getData(func);\n\n      var newData = [\n        func, bitmask, thisArg, partials, holders, partialsRight, holdersRight,\n        argPos, ary, arity\n      ];\n\n      if (data) {\n        mergeData(newData, data);\n      }\n      func = newData[0];\n      bitmask = newData[1];\n      thisArg = newData[2];\n      partials = newData[3];\n      holders = newData[4];\n      arity = newData[9] = newData[9] === undefined\n        ? (isBindKey ? 0 : func.length)\n        : nativeMax(newData[9] - length, 0);\n\n      if (!arity && bitmask & (WRAP_CURRY_FLAG | WRAP_CURRY_RIGHT_FLAG)) {\n        bitmask &= ~(WRAP_CURRY_FLAG | WRAP_CURRY_RIGHT_FLAG);\n      }\n      if (!bitmask || bitmask == WRAP_BIND_FLAG) {\n        var result = createBind(func, bitmask, thisArg);\n      } else if (bitmask == WRAP_CURRY_FLAG || bitmask == WRAP_CURRY_RIGHT_FLAG) {\n        result = createCurry(func, bitmask, arity);\n      } else if ((bitmask == WRAP_PARTIAL_FLAG || bitmask == (WRAP_BIND_FLAG | WRAP_PARTIAL_FLAG)) && !holders.length) {\n        result = createPartial(func, bitmask, thisArg, partials);\n      } else {\n        result = createHybrid.apply(undefined, newData);\n      }\n      var setter = data ? baseSetData : setData;\n      return setWrapToString(setter(result, newData), func, bitmask);\n    }\n\n    /**\n     * Used by `_.defaults` to customize its `_.assignIn` use to assign properties\n     * of source objects to the destination object for all destination properties\n     * that resolve to `undefined`.\n     *\n     * @private\n     * @param {*} objValue The destination value.\n     * @param {*} srcValue The source value.\n     * @param {string} key The key of the property to assign.\n     * @param {Object} object The parent object of `objValue`.\n     * @returns {*} Returns the value to assign.\n     */\n    function customDefaultsAssignIn(objValue, srcValue, key, object) {\n      if (objValue === undefined ||\n          (eq(objValue, objectProto[key]) && !hasOwnProperty.call(object, key))) {\n        return srcValue;\n      }\n      return objValue;\n    }\n\n    /**\n     * Used by `_.defaultsDeep` to customize its `_.merge` use to merge source\n     * objects into destination objects that are passed thru.\n     *\n     * @private\n     * @param {*} objValue The destination value.\n     * @param {*} srcValue The source value.\n     * @param {string} key The key of the property to merge.\n     * @param {Object} object The parent object of `objValue`.\n     * @param {Object} source The parent object of `srcValue`.\n     * @param {Object} [stack] Tracks traversed source values and their merged\n     *  counterparts.\n     * @returns {*} Returns the value to assign.\n     */\n    function customDefaultsMerge(objValue, srcValue, key, object, source, stack) {\n      if (isObject(objValue) && isObject(srcValue)) {\n        // Recursively merge objects and arrays (susceptible to call stack limits).\n        stack.set(srcValue, objValue);\n        baseMerge(objValue, srcValue, undefined, customDefaultsMerge, stack);\n        stack['delete'](srcValue);\n      }\n      return objValue;\n    }\n\n    /**\n     * Used by `_.omit` to customize its `_.cloneDeep` use to only clone plain\n     * objects.\n     *\n     * @private\n     * @param {*} value The value to inspect.\n     * @param {string} key The key of the property to inspect.\n     * @returns {*} Returns the uncloned value or `undefined` to defer cloning to `_.cloneDeep`.\n     */\n    function customOmitClone(value) {\n      return isPlainObject(value) ? undefined : value;\n    }\n\n    /**\n     * A specialized version of `baseIsEqualDeep` for arrays with support for\n     * partial deep comparisons.\n     *\n     * @private\n     * @param {Array} array The array to compare.\n     * @param {Array} other The other array to compare.\n     * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n     * @param {Function} customizer The function to customize comparisons.\n     * @param {Function} equalFunc The function to determine equivalents of values.\n     * @param {Object} stack Tracks traversed `array` and `other` objects.\n     * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\n     */\n    function equalArrays(array, other, bitmask, customizer, equalFunc, stack) {\n      var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n          arrLength = array.length,\n          othLength = other.length;\n\n      if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\n        return false;\n      }\n      // Check that cyclic values are equal.\n      var arrStacked = stack.get(array);\n      var othStacked = stack.get(other);\n      if (arrStacked && othStacked) {\n        return arrStacked == other && othStacked == array;\n      }\n      var index = -1,\n          result = true,\n          seen = (bitmask & COMPARE_UNORDERED_FLAG) ? new SetCache : undefined;\n\n      stack.set(array, other);\n      stack.set(other, array);\n\n      // Ignore non-index properties.\n      while (++index < arrLength) {\n        var arrValue = array[index],\n            othValue = other[index];\n\n        if (customizer) {\n          var compared = isPartial\n            ? customizer(othValue, arrValue, index, other, array, stack)\n            : customizer(arrValue, othValue, index, array, other, stack);\n        }\n        if (compared !== undefined) {\n          if (compared) {\n            continue;\n          }\n          result = false;\n          break;\n        }\n        // Recursively compare arrays (susceptible to call stack limits).\n        if (seen) {\n          if (!arraySome(other, function(othValue, othIndex) {\n                if (!cacheHas(seen, othIndex) &&\n                    (arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {\n                  return seen.push(othIndex);\n                }\n              })) {\n            result = false;\n            break;\n          }\n        } else if (!(\n              arrValue === othValue ||\n                equalFunc(arrValue, othValue, bitmask, customizer, stack)\n            )) {\n          result = false;\n          break;\n        }\n      }\n      stack['delete'](array);\n      stack['delete'](other);\n      return result;\n    }\n\n    /**\n     * A specialized version of `baseIsEqualDeep` for comparing objects of\n     * the same `toStringTag`.\n     *\n     * **Note:** This function only supports comparing values with tags of\n     * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n     *\n     * @private\n     * @param {Object} object The object to compare.\n     * @param {Object} other The other object to compare.\n     * @param {string} tag The `toStringTag` of the objects to compare.\n     * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n     * @param {Function} customizer The function to customize comparisons.\n     * @param {Function} equalFunc The function to determine equivalents of values.\n     * @param {Object} stack Tracks traversed `object` and `other` objects.\n     * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n     */\n    function equalByTag(object, other, tag, bitmask, customizer, equalFunc, stack) {\n      switch (tag) {\n        case dataViewTag:\n          if ((object.byteLength != other.byteLength) ||\n              (object.byteOffset != other.byteOffset)) {\n            return false;\n          }\n          object = object.buffer;\n          other = other.buffer;\n\n        case arrayBufferTag:\n          if ((object.byteLength != other.byteLength) ||\n              !equalFunc(new Uint8Array(object), new Uint8Array(other))) {\n            return false;\n          }\n          return true;\n\n        case boolTag:\n        case dateTag:\n        case numberTag:\n          // Coerce booleans to `1` or `0` and dates to milliseconds.\n          // Invalid dates are coerced to `NaN`.\n          return eq(+object, +other);\n\n        case errorTag:\n          return object.name == other.name && object.message == other.message;\n\n        case regexpTag:\n        case stringTag:\n          // Coerce regexes to strings and treat strings, primitives and objects,\n          // as equal. See http://www.ecma-international.org/ecma-262/7.0/#sec-regexp.prototype.tostring\n          // for more details.\n          return object == (other + '');\n\n        case mapTag:\n          var convert = mapToArray;\n\n        case setTag:\n          var isPartial = bitmask & COMPARE_PARTIAL_FLAG;\n          convert || (convert = setToArray);\n\n          if (object.size != other.size && !isPartial) {\n            return false;\n          }\n          // Assume cyclic values are equal.\n          var stacked = stack.get(object);\n          if (stacked) {\n            return stacked == other;\n          }\n          bitmask |= COMPARE_UNORDERED_FLAG;\n\n          // Recursively compare objects (susceptible to call stack limits).\n          stack.set(object, other);\n          var result = equalArrays(convert(object), convert(other), bitmask, customizer, equalFunc, stack);\n          stack['delete'](object);\n          return result;\n\n        case symbolTag:\n          if (symbolValueOf) {\n            return symbolValueOf.call(object) == symbolValueOf.call(other);\n          }\n      }\n      return false;\n    }\n\n    /**\n     * A specialized version of `baseIsEqualDeep` for objects with support for\n     * partial deep comparisons.\n     *\n     * @private\n     * @param {Object} object The object to compare.\n     * @param {Object} other The other object to compare.\n     * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n     * @param {Function} customizer The function to customize comparisons.\n     * @param {Function} equalFunc The function to determine equivalents of values.\n     * @param {Object} stack Tracks traversed `object` and `other` objects.\n     * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n     */\n    function equalObjects(object, other, bitmask, customizer, equalFunc, stack) {\n      var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n          objProps = getAllKeys(object),\n          objLength = objProps.length,\n          othProps = getAllKeys(other),\n          othLength = othProps.length;\n\n      if (objLength != othLength && !isPartial) {\n        return false;\n      }\n      var index = objLength;\n      while (index--) {\n        var key = objProps[index];\n        if (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {\n          return false;\n        }\n      }\n      // Check that cyclic values are equal.\n      var objStacked = stack.get(object);\n      var othStacked = stack.get(other);\n      if (objStacked && othStacked) {\n        return objStacked == other && othStacked == object;\n      }\n      var result = true;\n      stack.set(object, other);\n      stack.set(other, object);\n\n      var skipCtor = isPartial;\n      while (++index < objLength) {\n        key = objProps[index];\n        var objValue = object[key],\n            othValue = other[key];\n\n        if (customizer) {\n          var compared = isPartial\n            ? customizer(othValue, objValue, key, other, object, stack)\n            : customizer(objValue, othValue, key, object, other, stack);\n        }\n        // Recursively compare objects (susceptible to call stack limits).\n        if (!(compared === undefined\n              ? (objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack))\n              : compared\n            )) {\n          result = false;\n          break;\n        }\n        skipCtor || (skipCtor = key == 'constructor');\n      }\n      if (result && !skipCtor) {\n        var objCtor = object.constructor,\n            othCtor = other.constructor;\n\n        // Non `Object` object instances with different constructors are not equal.\n        if (objCtor != othCtor &&\n            ('constructor' in object && 'constructor' in other) &&\n            !(typeof objCtor == 'function' && objCtor instanceof objCtor &&\n              typeof othCtor == 'function' && othCtor instanceof othCtor)) {\n          result = false;\n        }\n      }\n      stack['delete'](object);\n      stack['delete'](other);\n      return result;\n    }\n\n    /**\n     * A specialized version of `baseRest` which flattens the rest array.\n     *\n     * @private\n     * @param {Function} func The function to apply a rest parameter to.\n     * @returns {Function} Returns the new function.\n     */\n    function flatRest(func) {\n      return setToString(overRest(func, undefined, flatten), func + '');\n    }\n\n    /**\n     * Creates an array of own enumerable property names and symbols of `object`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property names and symbols.\n     */\n    function getAllKeys(object) {\n      return baseGetAllKeys(object, keys, getSymbols);\n    }\n\n    /**\n     * Creates an array of own and inherited enumerable property names and\n     * symbols of `object`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property names and symbols.\n     */\n    function getAllKeysIn(object) {\n      return baseGetAllKeys(object, keysIn, getSymbolsIn);\n    }\n\n    /**\n     * Gets metadata for `func`.\n     *\n     * @private\n     * @param {Function} func The function to query.\n     * @returns {*} Returns the metadata for `func`.\n     */\n    var getData = !metaMap ? noop : function(func) {\n      return metaMap.get(func);\n    };\n\n    /**\n     * Gets the name of `func`.\n     *\n     * @private\n     * @param {Function} func The function to query.\n     * @returns {string} Returns the function name.\n     */\n    function getFuncName(func) {\n      var result = (func.name + ''),\n          array = realNames[result],\n          length = hasOwnProperty.call(realNames, result) ? array.length : 0;\n\n      while (length--) {\n        var data = array[length],\n            otherFunc = data.func;\n        if (otherFunc == null || otherFunc == func) {\n          return data.name;\n        }\n      }\n      return result;\n    }\n\n    /**\n     * Gets the argument placeholder value for `func`.\n     *\n     * @private\n     * @param {Function} func The function to inspect.\n     * @returns {*} Returns the placeholder value.\n     */\n    function getHolder(func) {\n      var object = hasOwnProperty.call(lodash, 'placeholder') ? lodash : func;\n      return object.placeholder;\n    }\n\n    /**\n     * Gets the appropriate \"iteratee\" function. If `_.iteratee` is customized,\n     * this function returns the custom method, otherwise it returns `baseIteratee`.\n     * If arguments are provided, the chosen function is invoked with them and\n     * its result is returned.\n     *\n     * @private\n     * @param {*} [value] The value to convert to an iteratee.\n     * @param {number} [arity] The arity of the created iteratee.\n     * @returns {Function} Returns the chosen function or its result.\n     */\n    function getIteratee() {\n      var result = lodash.iteratee || iteratee;\n      result = result === iteratee ? baseIteratee : result;\n      return arguments.length ? result(arguments[0], arguments[1]) : result;\n    }\n\n    /**\n     * Gets the data for `map`.\n     *\n     * @private\n     * @param {Object} map The map to query.\n     * @param {string} key The reference key.\n     * @returns {*} Returns the map data.\n     */\n    function getMapData(map, key) {\n      var data = map.__data__;\n      return isKeyable(key)\n        ? data[typeof key == 'string' ? 'string' : 'hash']\n        : data.map;\n    }\n\n    /**\n     * Gets the property names, values, and compare flags of `object`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the match data of `object`.\n     */\n    function getMatchData(object) {\n      var result = keys(object),\n          length = result.length;\n\n      while (length--) {\n        var key = result[length],\n            value = object[key];\n\n        result[length] = [key, value, isStrictComparable(value)];\n      }\n      return result;\n    }\n\n    /**\n     * Gets the native function at `key` of `object`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @param {string} key The key of the method to get.\n     * @returns {*} Returns the function if it's native, else `undefined`.\n     */\n    function getNative(object, key) {\n      var value = getValue(object, key);\n      return baseIsNative(value) ? value : undefined;\n    }\n\n    /**\n     * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n     *\n     * @private\n     * @param {*} value The value to query.\n     * @returns {string} Returns the raw `toStringTag`.\n     */\n    function getRawTag(value) {\n      var isOwn = hasOwnProperty.call(value, symToStringTag),\n          tag = value[symToStringTag];\n\n      try {\n        value[symToStringTag] = undefined;\n        var unmasked = true;\n      } catch (e) {}\n\n      var result = nativeObjectToString.call(value);\n      if (unmasked) {\n        if (isOwn) {\n          value[symToStringTag] = tag;\n        } else {\n          delete value[symToStringTag];\n        }\n      }\n      return result;\n    }\n\n    /**\n     * Creates an array of the own enumerable symbols of `object`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of symbols.\n     */\n    var getSymbols = !nativeGetSymbols ? stubArray : function(object) {\n      if (object == null) {\n        return [];\n      }\n      object = Object(object);\n      return arrayFilter(nativeGetSymbols(object), function(symbol) {\n        return propertyIsEnumerable.call(object, symbol);\n      });\n    };\n\n    /**\n     * Creates an array of the own and inherited enumerable symbols of `object`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of symbols.\n     */\n    var getSymbolsIn = !nativeGetSymbols ? stubArray : function(object) {\n      var result = [];\n      while (object) {\n        arrayPush(result, getSymbols(object));\n        object = getPrototype(object);\n      }\n      return result;\n    };\n\n    /**\n     * Gets the `toStringTag` of `value`.\n     *\n     * @private\n     * @param {*} value The value to query.\n     * @returns {string} Returns the `toStringTag`.\n     */\n    var getTag = baseGetTag;\n\n    // Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.\n    if ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n        (Map && getTag(new Map) != mapTag) ||\n        (Promise && getTag(Promise.resolve()) != promiseTag) ||\n        (Set && getTag(new Set) != setTag) ||\n        (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n      getTag = function(value) {\n        var result = baseGetTag(value),\n            Ctor = result == objectTag ? value.constructor : undefined,\n            ctorString = Ctor ? toSource(Ctor) : '';\n\n        if (ctorString) {\n          switch (ctorString) {\n            case dataViewCtorString: return dataViewTag;\n            case mapCtorString: return mapTag;\n            case promiseCtorString: return promiseTag;\n            case setCtorString: return setTag;\n            case weakMapCtorString: return weakMapTag;\n          }\n        }\n        return result;\n      };\n    }\n\n    /**\n     * Gets the view, applying any `transforms` to the `start` and `end` positions.\n     *\n     * @private\n     * @param {number} start The start of the view.\n     * @param {number} end The end of the view.\n     * @param {Array} transforms The transformations to apply to the view.\n     * @returns {Object} Returns an object containing the `start` and `end`\n     *  positions of the view.\n     */\n    function getView(start, end, transforms) {\n      var index = -1,\n          length = transforms.length;\n\n      while (++index < length) {\n        var data = transforms[index],\n            size = data.size;\n\n        switch (data.type) {\n          case 'drop':      start += size; break;\n          case 'dropRight': end -= size; break;\n          case 'take':      end = nativeMin(end, start + size); break;\n          case 'takeRight': start = nativeMax(start, end - size); break;\n        }\n      }\n      return { 'start': start, 'end': end };\n    }\n\n    /**\n     * Extracts wrapper details from the `source` body comment.\n     *\n     * @private\n     * @param {string} source The source to inspect.\n     * @returns {Array} Returns the wrapper details.\n     */\n    function getWrapDetails(source) {\n      var match = source.match(reWrapDetails);\n      return match ? match[1].split(reSplitDetails) : [];\n    }\n\n    /**\n     * Checks if `path` exists on `object`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @param {Array|string} path The path to check.\n     * @param {Function} hasFunc The function to check properties.\n     * @returns {boolean} Returns `true` if `path` exists, else `false`.\n     */\n    function hasPath(object, path, hasFunc) {\n      path = castPath(path, object);\n\n      var index = -1,\n          length = path.length,\n          result = false;\n\n      while (++index < length) {\n        var key = toKey(path[index]);\n        if (!(result = object != null && hasFunc(object, key))) {\n          break;\n        }\n        object = object[key];\n      }\n      if (result || ++index != length) {\n        return result;\n      }\n      length = object == null ? 0 : object.length;\n      return !!length && isLength(length) && isIndex(key, length) &&\n        (isArray(object) || isArguments(object));\n    }\n\n    /**\n     * Initializes an array clone.\n     *\n     * @private\n     * @param {Array} array The array to clone.\n     * @returns {Array} Returns the initialized clone.\n     */\n    function initCloneArray(array) {\n      var length = array.length,\n          result = new array.constructor(length);\n\n      // Add properties assigned by `RegExp#exec`.\n      if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {\n        result.index = array.index;\n        result.input = array.input;\n      }\n      return result;\n    }\n\n    /**\n     * Initializes an object clone.\n     *\n     * @private\n     * @param {Object} object The object to clone.\n     * @returns {Object} Returns the initialized clone.\n     */\n    function initCloneObject(object) {\n      return (typeof object.constructor == 'function' && !isPrototype(object))\n        ? baseCreate(getPrototype(object))\n        : {};\n    }\n\n    /**\n     * Initializes an object clone based on its `toStringTag`.\n     *\n     * **Note:** This function only supports cloning values with tags of\n     * `Boolean`, `Date`, `Error`, `Map`, `Number`, `RegExp`, `Set`, or `String`.\n     *\n     * @private\n     * @param {Object} object The object to clone.\n     * @param {string} tag The `toStringTag` of the object to clone.\n     * @param {boolean} [isDeep] Specify a deep clone.\n     * @returns {Object} Returns the initialized clone.\n     */\n    function initCloneByTag(object, tag, isDeep) {\n      var Ctor = object.constructor;\n      switch (tag) {\n        case arrayBufferTag:\n          return cloneArrayBuffer(object);\n\n        case boolTag:\n        case dateTag:\n          return new Ctor(+object);\n\n        case dataViewTag:\n          return cloneDataView(object, isDeep);\n\n        case float32Tag: case float64Tag:\n        case int8Tag: case int16Tag: case int32Tag:\n        case uint8Tag: case uint8ClampedTag: case uint16Tag: case uint32Tag:\n          return cloneTypedArray(object, isDeep);\n\n        case mapTag:\n          return new Ctor;\n\n        case numberTag:\n        case stringTag:\n          return new Ctor(object);\n\n        case regexpTag:\n          return cloneRegExp(object);\n\n        case setTag:\n          return new Ctor;\n\n        case symbolTag:\n          return cloneSymbol(object);\n      }\n    }\n\n    /**\n     * Inserts wrapper `details` in a comment at the top of the `source` body.\n     *\n     * @private\n     * @param {string} source The source to modify.\n     * @returns {Array} details The details to insert.\n     * @returns {string} Returns the modified source.\n     */\n    function insertWrapDetails(source, details) {\n      var length = details.length;\n      if (!length) {\n        return source;\n      }\n      var lastIndex = length - 1;\n      details[lastIndex] = (length > 1 ? '& ' : '') + details[lastIndex];\n      details = details.join(length > 2 ? ', ' : ' ');\n      return source.replace(reWrapComment, '{\\n/* [wrapped with ' + details + '] */\\n');\n    }\n\n    /**\n     * Checks if `value` is a flattenable `arguments` object or array.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is flattenable, else `false`.\n     */\n    function isFlattenable(value) {\n      return isArray(value) || isArguments(value) ||\n        !!(spreadableSymbol && value && value[spreadableSymbol]);\n    }\n\n    /**\n     * Checks if `value` is a valid array-like index.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n     * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n     */\n    function isIndex(value, length) {\n      var type = typeof value;\n      length = length == null ? MAX_SAFE_INTEGER : length;\n\n      return !!length &&\n        (type == 'number' ||\n          (type != 'symbol' && reIsUint.test(value))) &&\n            (value > -1 && value % 1 == 0 && value < length);\n    }\n\n    /**\n     * Checks if the given arguments are from an iteratee call.\n     *\n     * @private\n     * @param {*} value The potential iteratee value argument.\n     * @param {*} index The potential iteratee index or key argument.\n     * @param {*} object The potential iteratee object argument.\n     * @returns {boolean} Returns `true` if the arguments are from an iteratee call,\n     *  else `false`.\n     */\n    function isIterateeCall(value, index, object) {\n      if (!isObject(object)) {\n        return false;\n      }\n      var type = typeof index;\n      if (type == 'number'\n            ? (isArrayLike(object) && isIndex(index, object.length))\n            : (type == 'string' && index in object)\n          ) {\n        return eq(object[index], value);\n      }\n      return false;\n    }\n\n    /**\n     * Checks if `value` is a property name and not a property path.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @param {Object} [object] The object to query keys on.\n     * @returns {boolean} Returns `true` if `value` is a property name, else `false`.\n     */\n    function isKey(value, object) {\n      if (isArray(value)) {\n        return false;\n      }\n      var type = typeof value;\n      if (type == 'number' || type == 'symbol' || type == 'boolean' ||\n          value == null || isSymbol(value)) {\n        return true;\n      }\n      return reIsPlainProp.test(value) || !reIsDeepProp.test(value) ||\n        (object != null && value in Object(object));\n    }\n\n    /**\n     * Checks if `value` is suitable for use as unique object key.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n     */\n    function isKeyable(value) {\n      var type = typeof value;\n      return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n        ? (value !== '__proto__')\n        : (value === null);\n    }\n\n    /**\n     * Checks if `func` has a lazy counterpart.\n     *\n     * @private\n     * @param {Function} func The function to check.\n     * @returns {boolean} Returns `true` if `func` has a lazy counterpart,\n     *  else `false`.\n     */\n    function isLaziable(func) {\n      var funcName = getFuncName(func),\n          other = lodash[funcName];\n\n      if (typeof other != 'function' || !(funcName in LazyWrapper.prototype)) {\n        return false;\n      }\n      if (func === other) {\n        return true;\n      }\n      var data = getData(other);\n      return !!data && func === data[0];\n    }\n\n    /**\n     * Checks if `func` has its source masked.\n     *\n     * @private\n     * @param {Function} func The function to check.\n     * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n     */\n    function isMasked(func) {\n      return !!maskSrcKey && (maskSrcKey in func);\n    }\n\n    /**\n     * Checks if `func` is capable of being masked.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `func` is maskable, else `false`.\n     */\n    var isMaskable = coreJsData ? isFunction : stubFalse;\n\n    /**\n     * Checks if `value` is likely a prototype object.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n     */\n    function isPrototype(value) {\n      var Ctor = value && value.constructor,\n          proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n      return value === proto;\n    }\n\n    /**\n     * Checks if `value` is suitable for strict equality comparisons, i.e. `===`.\n     *\n     * @private\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` if suitable for strict\n     *  equality comparisons, else `false`.\n     */\n    function isStrictComparable(value) {\n      return value === value && !isObject(value);\n    }\n\n    /**\n     * A specialized version of `matchesProperty` for source values suitable\n     * for strict equality comparisons, i.e. `===`.\n     *\n     * @private\n     * @param {string} key The key of the property to get.\n     * @param {*} srcValue The value to match.\n     * @returns {Function} Returns the new spec function.\n     */\n    function matchesStrictComparable(key, srcValue) {\n      return function(object) {\n        if (object == null) {\n          return false;\n        }\n        return object[key] === srcValue &&\n          (srcValue !== undefined || (key in Object(object)));\n      };\n    }\n\n    /**\n     * A specialized version of `_.memoize` which clears the memoized function's\n     * cache when it exceeds `MAX_MEMOIZE_SIZE`.\n     *\n     * @private\n     * @param {Function} func The function to have its output memoized.\n     * @returns {Function} Returns the new memoized function.\n     */\n    function memoizeCapped(func) {\n      var result = memoize(func, function(key) {\n        if (cache.size === MAX_MEMOIZE_SIZE) {\n          cache.clear();\n        }\n        return key;\n      });\n\n      var cache = result.cache;\n      return result;\n    }\n\n    /**\n     * Merges the function metadata of `source` into `data`.\n     *\n     * Merging metadata reduces the number of wrappers used to invoke a function.\n     * This is possible because methods like `_.bind`, `_.curry`, and `_.partial`\n     * may be applied regardless of execution order. Methods like `_.ary` and\n     * `_.rearg` modify function arguments, making the order in which they are\n     * executed important, preventing the merging of metadata. However, we make\n     * an exception for a safe combined case where curried functions have `_.ary`\n     * and or `_.rearg` applied.\n     *\n     * @private\n     * @param {Array} data The destination metadata.\n     * @param {Array} source The source metadata.\n     * @returns {Array} Returns `data`.\n     */\n    function mergeData(data, source) {\n      var bitmask = data[1],\n          srcBitmask = source[1],\n          newBitmask = bitmask | srcBitmask,\n          isCommon = newBitmask < (WRAP_BIND_FLAG | WRAP_BIND_KEY_FLAG | WRAP_ARY_FLAG);\n\n      var isCombo =\n        ((srcBitmask == WRAP_ARY_FLAG) && (bitmask == WRAP_CURRY_FLAG)) ||\n        ((srcBitmask == WRAP_ARY_FLAG) && (bitmask == WRAP_REARG_FLAG) && (data[7].length <= source[8])) ||\n        ((srcBitmask == (WRAP_ARY_FLAG | WRAP_REARG_FLAG)) && (source[7].length <= source[8]) && (bitmask == WRAP_CURRY_FLAG));\n\n      // Exit early if metadata can't be merged.\n      if (!(isCommon || isCombo)) {\n        return data;\n      }\n      // Use source `thisArg` if available.\n      if (srcBitmask & WRAP_BIND_FLAG) {\n        data[2] = source[2];\n        // Set when currying a bound function.\n        newBitmask |= bitmask & WRAP_BIND_FLAG ? 0 : WRAP_CURRY_BOUND_FLAG;\n      }\n      // Compose partial arguments.\n      var value = source[3];\n      if (value) {\n        var partials = data[3];\n        data[3] = partials ? composeArgs(partials, value, source[4]) : value;\n        data[4] = partials ? replaceHolders(data[3], PLACEHOLDER) : source[4];\n      }\n      // Compose partial right arguments.\n      value = source[5];\n      if (value) {\n        partials = data[5];\n        data[5] = partials ? composeArgsRight(partials, value, source[6]) : value;\n        data[6] = partials ? replaceHolders(data[5], PLACEHOLDER) : source[6];\n      }\n      // Use source `argPos` if available.\n      value = source[7];\n      if (value) {\n        data[7] = value;\n      }\n      // Use source `ary` if it's smaller.\n      if (srcBitmask & WRAP_ARY_FLAG) {\n        data[8] = data[8] == null ? source[8] : nativeMin(data[8], source[8]);\n      }\n      // Use source `arity` if one is not provided.\n      if (data[9] == null) {\n        data[9] = source[9];\n      }\n      // Use source `func` and merge bitmasks.\n      data[0] = source[0];\n      data[1] = newBitmask;\n\n      return data;\n    }\n\n    /**\n     * This function is like\n     * [`Object.keys`](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n     * except that it includes inherited enumerable properties.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property names.\n     */\n    function nativeKeysIn(object) {\n      var result = [];\n      if (object != null) {\n        for (var key in Object(object)) {\n          result.push(key);\n        }\n      }\n      return result;\n    }\n\n    /**\n     * Converts `value` to a string using `Object.prototype.toString`.\n     *\n     * @private\n     * @param {*} value The value to convert.\n     * @returns {string} Returns the converted string.\n     */\n    function objectToString(value) {\n      return nativeObjectToString.call(value);\n    }\n\n    /**\n     * A specialized version of `baseRest` which transforms the rest array.\n     *\n     * @private\n     * @param {Function} func The function to apply a rest parameter to.\n     * @param {number} [start=func.length-1] The start position of the rest parameter.\n     * @param {Function} transform The rest array transform.\n     * @returns {Function} Returns the new function.\n     */\n    function overRest(func, start, transform) {\n      start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\n      return function() {\n        var args = arguments,\n            index = -1,\n            length = nativeMax(args.length - start, 0),\n            array = Array(length);\n\n        while (++index < length) {\n          array[index] = args[start + index];\n        }\n        index = -1;\n        var otherArgs = Array(start + 1);\n        while (++index < start) {\n          otherArgs[index] = args[index];\n        }\n        otherArgs[start] = transform(array);\n        return apply(func, this, otherArgs);\n      };\n    }\n\n    /**\n     * Gets the parent value at `path` of `object`.\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @param {Array} path The path to get the parent value of.\n     * @returns {*} Returns the parent value.\n     */\n    function parent(object, path) {\n      return path.length < 2 ? object : baseGet(object, baseSlice(path, 0, -1));\n    }\n\n    /**\n     * Reorder `array` according to the specified indexes where the element at\n     * the first index is assigned as the first element, the element at\n     * the second index is assigned as the second element, and so on.\n     *\n     * @private\n     * @param {Array} array The array to reorder.\n     * @param {Array} indexes The arranged array indexes.\n     * @returns {Array} Returns `array`.\n     */\n    function reorder(array, indexes) {\n      var arrLength = array.length,\n          length = nativeMin(indexes.length, arrLength),\n          oldArray = copyArray(array);\n\n      while (length--) {\n        var index = indexes[length];\n        array[length] = isIndex(index, arrLength) ? oldArray[index] : undefined;\n      }\n      return array;\n    }\n\n    /**\n     * Gets the value at `key`, unless `key` is \"__proto__\" or \"constructor\".\n     *\n     * @private\n     * @param {Object} object The object to query.\n     * @param {string} key The key of the property to get.\n     * @returns {*} Returns the property value.\n     */\n    function safeGet(object, key) {\n      if (key === 'constructor' && typeof object[key] === 'function') {\n        return;\n      }\n\n      if (key == '__proto__') {\n        return;\n      }\n\n      return object[key];\n    }\n\n    /**\n     * Sets metadata for `func`.\n     *\n     * **Note:** If this function becomes hot, i.e. is invoked a lot in a short\n     * period of time, it will trip its breaker and transition to an identity\n     * function to avoid garbage collection pauses in V8. See\n     * [V8 issue 2070](https://bugs.chromium.org/p/v8/issues/detail?id=2070)\n     * for more details.\n     *\n     * @private\n     * @param {Function} func The function to associate metadata with.\n     * @param {*} data The metadata.\n     * @returns {Function} Returns `func`.\n     */\n    var setData = shortOut(baseSetData);\n\n    /**\n     * A simple wrapper around the global [`setTimeout`](https://mdn.io/setTimeout).\n     *\n     * @private\n     * @param {Function} func The function to delay.\n     * @param {number} wait The number of milliseconds to delay invocation.\n     * @returns {number|Object} Returns the timer id or timeout object.\n     */\n    var setTimeout = ctxSetTimeout || function(func, wait) {\n      return root.setTimeout(func, wait);\n    };\n\n    /**\n     * Sets the `toString` method of `func` to return `string`.\n     *\n     * @private\n     * @param {Function} func The function to modify.\n     * @param {Function} string The `toString` result.\n     * @returns {Function} Returns `func`.\n     */\n    var setToString = shortOut(baseSetToString);\n\n    /**\n     * Sets the `toString` method of `wrapper` to mimic the source of `reference`\n     * with wrapper details in a comment at the top of the source body.\n     *\n     * @private\n     * @param {Function} wrapper The function to modify.\n     * @param {Function} reference The reference function.\n     * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n     * @returns {Function} Returns `wrapper`.\n     */\n    function setWrapToString(wrapper, reference, bitmask) {\n      var source = (reference + '');\n      return setToString(wrapper, insertWrapDetails(source, updateWrapDetails(getWrapDetails(source), bitmask)));\n    }\n\n    /**\n     * Creates a function that'll short out and invoke `identity` instead\n     * of `func` when it's called `HOT_COUNT` or more times in `HOT_SPAN`\n     * milliseconds.\n     *\n     * @private\n     * @param {Function} func The function to restrict.\n     * @returns {Function} Returns the new shortable function.\n     */\n    function shortOut(func) {\n      var count = 0,\n          lastCalled = 0;\n\n      return function() {\n        var stamp = nativeNow(),\n            remaining = HOT_SPAN - (stamp - lastCalled);\n\n        lastCalled = stamp;\n        if (remaining > 0) {\n          if (++count >= HOT_COUNT) {\n            return arguments[0];\n          }\n        } else {\n          count = 0;\n        }\n        return func.apply(undefined, arguments);\n      };\n    }\n\n    /**\n     * A specialized version of `_.shuffle` which mutates and sets the size of `array`.\n     *\n     * @private\n     * @param {Array} array The array to shuffle.\n     * @param {number} [size=array.length] The size of `array`.\n     * @returns {Array} Returns `array`.\n     */\n    function shuffleSelf(array, size) {\n      var index = -1,\n          length = array.length,\n          lastIndex = length - 1;\n\n      size = size === undefined ? length : size;\n      while (++index < size) {\n        var rand = baseRandom(index, lastIndex),\n            value = array[rand];\n\n        array[rand] = array[index];\n        array[index] = value;\n      }\n      array.length = size;\n      return array;\n    }\n\n    /**\n     * Converts `string` to a property path array.\n     *\n     * @private\n     * @param {string} string The string to convert.\n     * @returns {Array} Returns the property path array.\n     */\n    var stringToPath = memoizeCapped(function(string) {\n      var result = [];\n      if (string.charCodeAt(0) === 46 /* . */) {\n        result.push('');\n      }\n      string.replace(rePropName, function(match, number, quote, subString) {\n        result.push(quote ? subString.replace(reEscapeChar, '$1') : (number || match));\n      });\n      return result;\n    });\n\n    /**\n     * Converts `value` to a string key if it's not a string or symbol.\n     *\n     * @private\n     * @param {*} value The value to inspect.\n     * @returns {string|symbol} Returns the key.\n     */\n    function toKey(value) {\n      if (typeof value == 'string' || isSymbol(value)) {\n        return value;\n      }\n      var result = (value + '');\n      return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n    }\n\n    /**\n     * Converts `func` to its source code.\n     *\n     * @private\n     * @param {Function} func The function to convert.\n     * @returns {string} Returns the source code.\n     */\n    function toSource(func) {\n      if (func != null) {\n        try {\n          return funcToString.call(func);\n        } catch (e) {}\n        try {\n          return (func + '');\n        } catch (e) {}\n      }\n      return '';\n    }\n\n    /**\n     * Updates wrapper `details` based on `bitmask` flags.\n     *\n     * @private\n     * @returns {Array} details The details to modify.\n     * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n     * @returns {Array} Returns `details`.\n     */\n    function updateWrapDetails(details, bitmask) {\n      arrayEach(wrapFlags, function(pair) {\n        var value = '_.' + pair[0];\n        if ((bitmask & pair[1]) && !arrayIncludes(details, value)) {\n          details.push(value);\n        }\n      });\n      return details.sort();\n    }\n\n    /**\n     * Creates a clone of `wrapper`.\n     *\n     * @private\n     * @param {Object} wrapper The wrapper to clone.\n     * @returns {Object} Returns the cloned wrapper.\n     */\n    function wrapperClone(wrapper) {\n      if (wrapper instanceof LazyWrapper) {\n        return wrapper.clone();\n      }\n      var result = new LodashWrapper(wrapper.__wrapped__, wrapper.__chain__);\n      result.__actions__ = copyArray(wrapper.__actions__);\n      result.__index__  = wrapper.__index__;\n      result.__values__ = wrapper.__values__;\n      return result;\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates an array of elements split into groups the length of `size`.\n     * If `array` can't be split evenly, the final chunk will be the remaining\n     * elements.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to process.\n     * @param {number} [size=1] The length of each chunk\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Array} Returns the new array of chunks.\n     * @example\n     *\n     * _.chunk(['a', 'b', 'c', 'd'], 2);\n     * // => [['a', 'b'], ['c', 'd']]\n     *\n     * _.chunk(['a', 'b', 'c', 'd'], 3);\n     * // => [['a', 'b', 'c'], ['d']]\n     */\n    function chunk(array, size, guard) {\n      if ((guard ? isIterateeCall(array, size, guard) : size === undefined)) {\n        size = 1;\n      } else {\n        size = nativeMax(toInteger(size), 0);\n      }\n      var length = array == null ? 0 : array.length;\n      if (!length || size < 1) {\n        return [];\n      }\n      var index = 0,\n          resIndex = 0,\n          result = Array(nativeCeil(length / size));\n\n      while (index < length) {\n        result[resIndex++] = baseSlice(array, index, (index += size));\n      }\n      return result;\n    }\n\n    /**\n     * Creates an array with all falsey values removed. The values `false`, `null`,\n     * `0`, `\"\"`, `undefined`, and `NaN` are falsey.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to compact.\n     * @returns {Array} Returns the new array of filtered values.\n     * @example\n     *\n     * _.compact([0, 1, false, 2, '', 3]);\n     * // => [1, 2, 3]\n     */\n    function compact(array) {\n      var index = -1,\n          length = array == null ? 0 : array.length,\n          resIndex = 0,\n          result = [];\n\n      while (++index < length) {\n        var value = array[index];\n        if (value) {\n          result[resIndex++] = value;\n        }\n      }\n      return result;\n    }\n\n    /**\n     * Creates a new array concatenating `array` with any additional arrays\n     * and/or values.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to concatenate.\n     * @param {...*} [values] The values to concatenate.\n     * @returns {Array} Returns the new concatenated array.\n     * @example\n     *\n     * var array = [1];\n     * var other = _.concat(array, 2, [3], [[4]]);\n     *\n     * console.log(other);\n     * // => [1, 2, 3, [4]]\n     *\n     * console.log(array);\n     * // => [1]\n     */\n    function concat() {\n      var length = arguments.length;\n      if (!length) {\n        return [];\n      }\n      var args = Array(length - 1),\n          array = arguments[0],\n          index = length;\n\n      while (index--) {\n        args[index - 1] = arguments[index];\n      }\n      return arrayPush(isArray(array) ? copyArray(array) : [array], baseFlatten(args, 1));\n    }\n\n    /**\n     * Creates an array of `array` values not included in the other given arrays\n     * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * for equality comparisons. The order and references of result values are\n     * determined by the first array.\n     *\n     * **Note:** Unlike `_.pullAll`, this method returns a new array.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {...Array} [values] The values to exclude.\n     * @returns {Array} Returns the new array of filtered values.\n     * @see _.without, _.xor\n     * @example\n     *\n     * _.difference([2, 1], [2, 3]);\n     * // => [1]\n     */\n    var difference = baseRest(function(array, values) {\n      return isArrayLikeObject(array)\n        ? baseDifference(array, baseFlatten(values, 1, isArrayLikeObject, true))\n        : [];\n    });\n\n    /**\n     * This method is like `_.difference` except that it accepts `iteratee` which\n     * is invoked for each element of `array` and `values` to generate the criterion\n     * by which they're compared. The order and references of result values are\n     * determined by the first array. The iteratee is invoked with one argument:\n     * (value).\n     *\n     * **Note:** Unlike `_.pullAllBy`, this method returns a new array.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {...Array} [values] The values to exclude.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {Array} Returns the new array of filtered values.\n     * @example\n     *\n     * _.differenceBy([2.1, 1.2], [2.3, 3.4], Math.floor);\n     * // => [1.2]\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.differenceBy([{ 'x': 2 }, { 'x': 1 }], [{ 'x': 1 }], 'x');\n     * // => [{ 'x': 2 }]\n     */\n    var differenceBy = baseRest(function(array, values) {\n      var iteratee = last(values);\n      if (isArrayLikeObject(iteratee)) {\n        iteratee = undefined;\n      }\n      return isArrayLikeObject(array)\n        ? baseDifference(array, baseFlatten(values, 1, isArrayLikeObject, true), getIteratee(iteratee, 2))\n        : [];\n    });\n\n    /**\n     * This method is like `_.difference` except that it accepts `comparator`\n     * which is invoked to compare elements of `array` to `values`. The order and\n     * references of result values are determined by the first array. The comparator\n     * is invoked with two arguments: (arrVal, othVal).\n     *\n     * **Note:** Unlike `_.pullAllWith`, this method returns a new array.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {...Array} [values] The values to exclude.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns the new array of filtered values.\n     * @example\n     *\n     * var objects = [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }];\n     *\n     * _.differenceWith(objects, [{ 'x': 1, 'y': 2 }], _.isEqual);\n     * // => [{ 'x': 2, 'y': 1 }]\n     */\n    var differenceWith = baseRest(function(array, values) {\n      var comparator = last(values);\n      if (isArrayLikeObject(comparator)) {\n        comparator = undefined;\n      }\n      return isArrayLikeObject(array)\n        ? baseDifference(array, baseFlatten(values, 1, isArrayLikeObject, true), undefined, comparator)\n        : [];\n    });\n\n    /**\n     * Creates a slice of `array` with `n` elements dropped from the beginning.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.5.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {number} [n=1] The number of elements to drop.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * _.drop([1, 2, 3]);\n     * // => [2, 3]\n     *\n     * _.drop([1, 2, 3], 2);\n     * // => [3]\n     *\n     * _.drop([1, 2, 3], 5);\n     * // => []\n     *\n     * _.drop([1, 2, 3], 0);\n     * // => [1, 2, 3]\n     */\n    function drop(array, n, guard) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return [];\n      }\n      n = (guard || n === undefined) ? 1 : toInteger(n);\n      return baseSlice(array, n < 0 ? 0 : n, length);\n    }\n\n    /**\n     * Creates a slice of `array` with `n` elements dropped from the end.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {number} [n=1] The number of elements to drop.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * _.dropRight([1, 2, 3]);\n     * // => [1, 2]\n     *\n     * _.dropRight([1, 2, 3], 2);\n     * // => [1]\n     *\n     * _.dropRight([1, 2, 3], 5);\n     * // => []\n     *\n     * _.dropRight([1, 2, 3], 0);\n     * // => [1, 2, 3]\n     */\n    function dropRight(array, n, guard) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return [];\n      }\n      n = (guard || n === undefined) ? 1 : toInteger(n);\n      n = length - n;\n      return baseSlice(array, 0, n < 0 ? 0 : n);\n    }\n\n    /**\n     * Creates a slice of `array` excluding elements dropped from the end.\n     * Elements are dropped until `predicate` returns falsey. The predicate is\n     * invoked with three arguments: (value, index, array).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney',  'active': true },\n     *   { 'user': 'fred',    'active': false },\n     *   { 'user': 'pebbles', 'active': false }\n     * ];\n     *\n     * _.dropRightWhile(users, function(o) { return !o.active; });\n     * // => objects for ['barney']\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.dropRightWhile(users, { 'user': 'pebbles', 'active': false });\n     * // => objects for ['barney', 'fred']\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.dropRightWhile(users, ['active', false]);\n     * // => objects for ['barney']\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.dropRightWhile(users, 'active');\n     * // => objects for ['barney', 'fred', 'pebbles']\n     */\n    function dropRightWhile(array, predicate) {\n      return (array && array.length)\n        ? baseWhile(array, getIteratee(predicate, 3), true, true)\n        : [];\n    }\n\n    /**\n     * Creates a slice of `array` excluding elements dropped from the beginning.\n     * Elements are dropped until `predicate` returns falsey. The predicate is\n     * invoked with three arguments: (value, index, array).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney',  'active': false },\n     *   { 'user': 'fred',    'active': false },\n     *   { 'user': 'pebbles', 'active': true }\n     * ];\n     *\n     * _.dropWhile(users, function(o) { return !o.active; });\n     * // => objects for ['pebbles']\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.dropWhile(users, { 'user': 'barney', 'active': false });\n     * // => objects for ['fred', 'pebbles']\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.dropWhile(users, ['active', false]);\n     * // => objects for ['pebbles']\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.dropWhile(users, 'active');\n     * // => objects for ['barney', 'fred', 'pebbles']\n     */\n    function dropWhile(array, predicate) {\n      return (array && array.length)\n        ? baseWhile(array, getIteratee(predicate, 3), true)\n        : [];\n    }\n\n    /**\n     * Fills elements of `array` with `value` from `start` up to, but not\n     * including, `end`.\n     *\n     * **Note:** This method mutates `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.2.0\n     * @category Array\n     * @param {Array} array The array to fill.\n     * @param {*} value The value to fill `array` with.\n     * @param {number} [start=0] The start position.\n     * @param {number} [end=array.length] The end position.\n     * @returns {Array} Returns `array`.\n     * @example\n     *\n     * var array = [1, 2, 3];\n     *\n     * _.fill(array, 'a');\n     * console.log(array);\n     * // => ['a', 'a', 'a']\n     *\n     * _.fill(Array(3), 2);\n     * // => [2, 2, 2]\n     *\n     * _.fill([4, 6, 8, 10], '*', 1, 3);\n     * // => [4, '*', '*', 10]\n     */\n    function fill(array, value, start, end) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return [];\n      }\n      if (start && typeof start != 'number' && isIterateeCall(array, value, start)) {\n        start = 0;\n        end = length;\n      }\n      return baseFill(array, value, start, end);\n    }\n\n    /**\n     * This method is like `_.find` except that it returns the index of the first\n     * element `predicate` returns truthy for instead of the element itself.\n     *\n     * @static\n     * @memberOf _\n     * @since 1.1.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @param {number} [fromIndex=0] The index to search from.\n     * @returns {number} Returns the index of the found element, else `-1`.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney',  'active': false },\n     *   { 'user': 'fred',    'active': false },\n     *   { 'user': 'pebbles', 'active': true }\n     * ];\n     *\n     * _.findIndex(users, function(o) { return o.user == 'barney'; });\n     * // => 0\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.findIndex(users, { 'user': 'fred', 'active': false });\n     * // => 1\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.findIndex(users, ['active', false]);\n     * // => 0\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.findIndex(users, 'active');\n     * // => 2\n     */\n    function findIndex(array, predicate, fromIndex) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return -1;\n      }\n      var index = fromIndex == null ? 0 : toInteger(fromIndex);\n      if (index < 0) {\n        index = nativeMax(length + index, 0);\n      }\n      return baseFindIndex(array, getIteratee(predicate, 3), index);\n    }\n\n    /**\n     * This method is like `_.findIndex` except that it iterates over elements\n     * of `collection` from right to left.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @param {number} [fromIndex=array.length-1] The index to search from.\n     * @returns {number} Returns the index of the found element, else `-1`.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney',  'active': true },\n     *   { 'user': 'fred',    'active': false },\n     *   { 'user': 'pebbles', 'active': false }\n     * ];\n     *\n     * _.findLastIndex(users, function(o) { return o.user == 'pebbles'; });\n     * // => 2\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.findLastIndex(users, { 'user': 'barney', 'active': true });\n     * // => 0\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.findLastIndex(users, ['active', false]);\n     * // => 2\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.findLastIndex(users, 'active');\n     * // => 0\n     */\n    function findLastIndex(array, predicate, fromIndex) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return -1;\n      }\n      var index = length - 1;\n      if (fromIndex !== undefined) {\n        index = toInteger(fromIndex);\n        index = fromIndex < 0\n          ? nativeMax(length + index, 0)\n          : nativeMin(index, length - 1);\n      }\n      return baseFindIndex(array, getIteratee(predicate, 3), index, true);\n    }\n\n    /**\n     * Flattens `array` a single level deep.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to flatten.\n     * @returns {Array} Returns the new flattened array.\n     * @example\n     *\n     * _.flatten([1, [2, [3, [4]], 5]]);\n     * // => [1, 2, [3, [4]], 5]\n     */\n    function flatten(array) {\n      var length = array == null ? 0 : array.length;\n      return length ? baseFlatten(array, 1) : [];\n    }\n\n    /**\n     * Recursively flattens `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to flatten.\n     * @returns {Array} Returns the new flattened array.\n     * @example\n     *\n     * _.flattenDeep([1, [2, [3, [4]], 5]]);\n     * // => [1, 2, 3, 4, 5]\n     */\n    function flattenDeep(array) {\n      var length = array == null ? 0 : array.length;\n      return length ? baseFlatten(array, INFINITY) : [];\n    }\n\n    /**\n     * Recursively flatten `array` up to `depth` times.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.4.0\n     * @category Array\n     * @param {Array} array The array to flatten.\n     * @param {number} [depth=1] The maximum recursion depth.\n     * @returns {Array} Returns the new flattened array.\n     * @example\n     *\n     * var array = [1, [2, [3, [4]], 5]];\n     *\n     * _.flattenDepth(array, 1);\n     * // => [1, 2, [3, [4]], 5]\n     *\n     * _.flattenDepth(array, 2);\n     * // => [1, 2, 3, [4], 5]\n     */\n    function flattenDepth(array, depth) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return [];\n      }\n      depth = depth === undefined ? 1 : toInteger(depth);\n      return baseFlatten(array, depth);\n    }\n\n    /**\n     * The inverse of `_.toPairs`; this method returns an object composed\n     * from key-value `pairs`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} pairs The key-value pairs.\n     * @returns {Object} Returns the new object.\n     * @example\n     *\n     * _.fromPairs([['a', 1], ['b', 2]]);\n     * // => { 'a': 1, 'b': 2 }\n     */\n    function fromPairs(pairs) {\n      var index = -1,\n          length = pairs == null ? 0 : pairs.length,\n          result = {};\n\n      while (++index < length) {\n        var pair = pairs[index];\n        result[pair[0]] = pair[1];\n      }\n      return result;\n    }\n\n    /**\n     * Gets the first element of `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @alias first\n     * @category Array\n     * @param {Array} array The array to query.\n     * @returns {*} Returns the first element of `array`.\n     * @example\n     *\n     * _.head([1, 2, 3]);\n     * // => 1\n     *\n     * _.head([]);\n     * // => undefined\n     */\n    function head(array) {\n      return (array && array.length) ? array[0] : undefined;\n    }\n\n    /**\n     * Gets the index at which the first occurrence of `value` is found in `array`\n     * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * for equality comparisons. If `fromIndex` is negative, it's used as the\n     * offset from the end of `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {*} value The value to search for.\n     * @param {number} [fromIndex=0] The index to search from.\n     * @returns {number} Returns the index of the matched value, else `-1`.\n     * @example\n     *\n     * _.indexOf([1, 2, 1, 2], 2);\n     * // => 1\n     *\n     * // Search from the `fromIndex`.\n     * _.indexOf([1, 2, 1, 2], 2, 2);\n     * // => 3\n     */\n    function indexOf(array, value, fromIndex) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return -1;\n      }\n      var index = fromIndex == null ? 0 : toInteger(fromIndex);\n      if (index < 0) {\n        index = nativeMax(length + index, 0);\n      }\n      return baseIndexOf(array, value, index);\n    }\n\n    /**\n     * Gets all but the last element of `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * _.initial([1, 2, 3]);\n     * // => [1, 2]\n     */\n    function initial(array) {\n      var length = array == null ? 0 : array.length;\n      return length ? baseSlice(array, 0, -1) : [];\n    }\n\n    /**\n     * Creates an array of unique values that are included in all given arrays\n     * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * for equality comparisons. The order and references of result values are\n     * determined by the first array.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to inspect.\n     * @returns {Array} Returns the new array of intersecting values.\n     * @example\n     *\n     * _.intersection([2, 1], [2, 3]);\n     * // => [2]\n     */\n    var intersection = baseRest(function(arrays) {\n      var mapped = arrayMap(arrays, castArrayLikeObject);\n      return (mapped.length && mapped[0] === arrays[0])\n        ? baseIntersection(mapped)\n        : [];\n    });\n\n    /**\n     * This method is like `_.intersection` except that it accepts `iteratee`\n     * which is invoked for each element of each `arrays` to generate the criterion\n     * by which they're compared. The order and references of result values are\n     * determined by the first array. The iteratee is invoked with one argument:\n     * (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to inspect.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {Array} Returns the new array of intersecting values.\n     * @example\n     *\n     * _.intersectionBy([2.1, 1.2], [2.3, 3.4], Math.floor);\n     * // => [2.1]\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.intersectionBy([{ 'x': 1 }], [{ 'x': 2 }, { 'x': 1 }], 'x');\n     * // => [{ 'x': 1 }]\n     */\n    var intersectionBy = baseRest(function(arrays) {\n      var iteratee = last(arrays),\n          mapped = arrayMap(arrays, castArrayLikeObject);\n\n      if (iteratee === last(mapped)) {\n        iteratee = undefined;\n      } else {\n        mapped.pop();\n      }\n      return (mapped.length && mapped[0] === arrays[0])\n        ? baseIntersection(mapped, getIteratee(iteratee, 2))\n        : [];\n    });\n\n    /**\n     * This method is like `_.intersection` except that it accepts `comparator`\n     * which is invoked to compare elements of `arrays`. The order and references\n     * of result values are determined by the first array. The comparator is\n     * invoked with two arguments: (arrVal, othVal).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to inspect.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns the new array of intersecting values.\n     * @example\n     *\n     * var objects = [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }];\n     * var others = [{ 'x': 1, 'y': 1 }, { 'x': 1, 'y': 2 }];\n     *\n     * _.intersectionWith(objects, others, _.isEqual);\n     * // => [{ 'x': 1, 'y': 2 }]\n     */\n    var intersectionWith = baseRest(function(arrays) {\n      var comparator = last(arrays),\n          mapped = arrayMap(arrays, castArrayLikeObject);\n\n      comparator = typeof comparator == 'function' ? comparator : undefined;\n      if (comparator) {\n        mapped.pop();\n      }\n      return (mapped.length && mapped[0] === arrays[0])\n        ? baseIntersection(mapped, undefined, comparator)\n        : [];\n    });\n\n    /**\n     * Converts all elements in `array` into a string separated by `separator`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to convert.\n     * @param {string} [separator=','] The element separator.\n     * @returns {string} Returns the joined string.\n     * @example\n     *\n     * _.join(['a', 'b', 'c'], '~');\n     * // => 'a~b~c'\n     */\n    function join(array, separator) {\n      return array == null ? '' : nativeJoin.call(array, separator);\n    }\n\n    /**\n     * Gets the last element of `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @returns {*} Returns the last element of `array`.\n     * @example\n     *\n     * _.last([1, 2, 3]);\n     * // => 3\n     */\n    function last(array) {\n      var length = array == null ? 0 : array.length;\n      return length ? array[length - 1] : undefined;\n    }\n\n    /**\n     * This method is like `_.indexOf` except that it iterates over elements of\n     * `array` from right to left.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {*} value The value to search for.\n     * @param {number} [fromIndex=array.length-1] The index to search from.\n     * @returns {number} Returns the index of the matched value, else `-1`.\n     * @example\n     *\n     * _.lastIndexOf([1, 2, 1, 2], 2);\n     * // => 3\n     *\n     * // Search from the `fromIndex`.\n     * _.lastIndexOf([1, 2, 1, 2], 2, 2);\n     * // => 1\n     */\n    function lastIndexOf(array, value, fromIndex) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return -1;\n      }\n      var index = length;\n      if (fromIndex !== undefined) {\n        index = toInteger(fromIndex);\n        index = index < 0 ? nativeMax(length + index, 0) : nativeMin(index, length - 1);\n      }\n      return value === value\n        ? strictLastIndexOf(array, value, index)\n        : baseFindIndex(array, baseIsNaN, index, true);\n    }\n\n    /**\n     * Gets the element at index `n` of `array`. If `n` is negative, the nth\n     * element from the end is returned.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.11.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {number} [n=0] The index of the element to return.\n     * @returns {*} Returns the nth element of `array`.\n     * @example\n     *\n     * var array = ['a', 'b', 'c', 'd'];\n     *\n     * _.nth(array, 1);\n     * // => 'b'\n     *\n     * _.nth(array, -2);\n     * // => 'c';\n     */\n    function nth(array, n) {\n      return (array && array.length) ? baseNth(array, toInteger(n)) : undefined;\n    }\n\n    /**\n     * Removes all given values from `array` using\n     * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * for equality comparisons.\n     *\n     * **Note:** Unlike `_.without`, this method mutates `array`. Use `_.remove`\n     * to remove elements from an array by predicate.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @category Array\n     * @param {Array} array The array to modify.\n     * @param {...*} [values] The values to remove.\n     * @returns {Array} Returns `array`.\n     * @example\n     *\n     * var array = ['a', 'b', 'c', 'a', 'b', 'c'];\n     *\n     * _.pull(array, 'a', 'c');\n     * console.log(array);\n     * // => ['b', 'b']\n     */\n    var pull = baseRest(pullAll);\n\n    /**\n     * This method is like `_.pull` except that it accepts an array of values to remove.\n     *\n     * **Note:** Unlike `_.difference`, this method mutates `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to modify.\n     * @param {Array} values The values to remove.\n     * @returns {Array} Returns `array`.\n     * @example\n     *\n     * var array = ['a', 'b', 'c', 'a', 'b', 'c'];\n     *\n     * _.pullAll(array, ['a', 'c']);\n     * console.log(array);\n     * // => ['b', 'b']\n     */\n    function pullAll(array, values) {\n      return (array && array.length && values && values.length)\n        ? basePullAll(array, values)\n        : array;\n    }\n\n    /**\n     * This method is like `_.pullAll` except that it accepts `iteratee` which is\n     * invoked for each element of `array` and `values` to generate the criterion\n     * by which they're compared. The iteratee is invoked with one argument: (value).\n     *\n     * **Note:** Unlike `_.differenceBy`, this method mutates `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to modify.\n     * @param {Array} values The values to remove.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {Array} Returns `array`.\n     * @example\n     *\n     * var array = [{ 'x': 1 }, { 'x': 2 }, { 'x': 3 }, { 'x': 1 }];\n     *\n     * _.pullAllBy(array, [{ 'x': 1 }, { 'x': 3 }], 'x');\n     * console.log(array);\n     * // => [{ 'x': 2 }]\n     */\n    function pullAllBy(array, values, iteratee) {\n      return (array && array.length && values && values.length)\n        ? basePullAll(array, values, getIteratee(iteratee, 2))\n        : array;\n    }\n\n    /**\n     * This method is like `_.pullAll` except that it accepts `comparator` which\n     * is invoked to compare elements of `array` to `values`. The comparator is\n     * invoked with two arguments: (arrVal, othVal).\n     *\n     * **Note:** Unlike `_.differenceWith`, this method mutates `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.6.0\n     * @category Array\n     * @param {Array} array The array to modify.\n     * @param {Array} values The values to remove.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns `array`.\n     * @example\n     *\n     * var array = [{ 'x': 1, 'y': 2 }, { 'x': 3, 'y': 4 }, { 'x': 5, 'y': 6 }];\n     *\n     * _.pullAllWith(array, [{ 'x': 3, 'y': 4 }], _.isEqual);\n     * console.log(array);\n     * // => [{ 'x': 1, 'y': 2 }, { 'x': 5, 'y': 6 }]\n     */\n    function pullAllWith(array, values, comparator) {\n      return (array && array.length && values && values.length)\n        ? basePullAll(array, values, undefined, comparator)\n        : array;\n    }\n\n    /**\n     * Removes elements from `array` corresponding to `indexes` and returns an\n     * array of removed elements.\n     *\n     * **Note:** Unlike `_.at`, this method mutates `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to modify.\n     * @param {...(number|number[])} [indexes] The indexes of elements to remove.\n     * @returns {Array} Returns the new array of removed elements.\n     * @example\n     *\n     * var array = ['a', 'b', 'c', 'd'];\n     * var pulled = _.pullAt(array, [1, 3]);\n     *\n     * console.log(array);\n     * // => ['a', 'c']\n     *\n     * console.log(pulled);\n     * // => ['b', 'd']\n     */\n    var pullAt = flatRest(function(array, indexes) {\n      var length = array == null ? 0 : array.length,\n          result = baseAt(array, indexes);\n\n      basePullAt(array, arrayMap(indexes, function(index) {\n        return isIndex(index, length) ? +index : index;\n      }).sort(compareAscending));\n\n      return result;\n    });\n\n    /**\n     * Removes all elements from `array` that `predicate` returns truthy for\n     * and returns an array of the removed elements. The predicate is invoked\n     * with three arguments: (value, index, array).\n     *\n     * **Note:** Unlike `_.filter`, this method mutates `array`. Use `_.pull`\n     * to pull elements from an array by value.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @category Array\n     * @param {Array} array The array to modify.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the new array of removed elements.\n     * @example\n     *\n     * var array = [1, 2, 3, 4];\n     * var evens = _.remove(array, function(n) {\n     *   return n % 2 == 0;\n     * });\n     *\n     * console.log(array);\n     * // => [1, 3]\n     *\n     * console.log(evens);\n     * // => [2, 4]\n     */\n    function remove(array, predicate) {\n      var result = [];\n      if (!(array && array.length)) {\n        return result;\n      }\n      var index = -1,\n          indexes = [],\n          length = array.length;\n\n      predicate = getIteratee(predicate, 3);\n      while (++index < length) {\n        var value = array[index];\n        if (predicate(value, index, array)) {\n          result.push(value);\n          indexes.push(index);\n        }\n      }\n      basePullAt(array, indexes);\n      return result;\n    }\n\n    /**\n     * Reverses `array` so that the first element becomes the last, the second\n     * element becomes the second to last, and so on.\n     *\n     * **Note:** This method mutates `array` and is based on\n     * [`Array#reverse`](https://mdn.io/Array/reverse).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to modify.\n     * @returns {Array} Returns `array`.\n     * @example\n     *\n     * var array = [1, 2, 3];\n     *\n     * _.reverse(array);\n     * // => [3, 2, 1]\n     *\n     * console.log(array);\n     * // => [3, 2, 1]\n     */\n    function reverse(array) {\n      return array == null ? array : nativeReverse.call(array);\n    }\n\n    /**\n     * Creates a slice of `array` from `start` up to, but not including, `end`.\n     *\n     * **Note:** This method is used instead of\n     * [`Array#slice`](https://mdn.io/Array/slice) to ensure dense arrays are\n     * returned.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to slice.\n     * @param {number} [start=0] The start position.\n     * @param {number} [end=array.length] The end position.\n     * @returns {Array} Returns the slice of `array`.\n     */\n    function slice(array, start, end) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return [];\n      }\n      if (end && typeof end != 'number' && isIterateeCall(array, start, end)) {\n        start = 0;\n        end = length;\n      }\n      else {\n        start = start == null ? 0 : toInteger(start);\n        end = end === undefined ? length : toInteger(end);\n      }\n      return baseSlice(array, start, end);\n    }\n\n    /**\n     * Uses a binary search to determine the lowest index at which `value`\n     * should be inserted into `array` in order to maintain its sort order.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The sorted array to inspect.\n     * @param {*} value The value to evaluate.\n     * @returns {number} Returns the index at which `value` should be inserted\n     *  into `array`.\n     * @example\n     *\n     * _.sortedIndex([30, 50], 40);\n     * // => 1\n     */\n    function sortedIndex(array, value) {\n      return baseSortedIndex(array, value);\n    }\n\n    /**\n     * This method is like `_.sortedIndex` except that it accepts `iteratee`\n     * which is invoked for `value` and each element of `array` to compute their\n     * sort ranking. The iteratee is invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The sorted array to inspect.\n     * @param {*} value The value to evaluate.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {number} Returns the index at which `value` should be inserted\n     *  into `array`.\n     * @example\n     *\n     * var objects = [{ 'x': 4 }, { 'x': 5 }];\n     *\n     * _.sortedIndexBy(objects, { 'x': 4 }, function(o) { return o.x; });\n     * // => 0\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.sortedIndexBy(objects, { 'x': 4 }, 'x');\n     * // => 0\n     */\n    function sortedIndexBy(array, value, iteratee) {\n      return baseSortedIndexBy(array, value, getIteratee(iteratee, 2));\n    }\n\n    /**\n     * This method is like `_.indexOf` except that it performs a binary\n     * search on a sorted `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {*} value The value to search for.\n     * @returns {number} Returns the index of the matched value, else `-1`.\n     * @example\n     *\n     * _.sortedIndexOf([4, 5, 5, 5, 6], 5);\n     * // => 1\n     */\n    function sortedIndexOf(array, value) {\n      var length = array == null ? 0 : array.length;\n      if (length) {\n        var index = baseSortedIndex(array, value);\n        if (index < length && eq(array[index], value)) {\n          return index;\n        }\n      }\n      return -1;\n    }\n\n    /**\n     * This method is like `_.sortedIndex` except that it returns the highest\n     * index at which `value` should be inserted into `array` in order to\n     * maintain its sort order.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The sorted array to inspect.\n     * @param {*} value The value to evaluate.\n     * @returns {number} Returns the index at which `value` should be inserted\n     *  into `array`.\n     * @example\n     *\n     * _.sortedLastIndex([4, 5, 5, 5, 6], 5);\n     * // => 4\n     */\n    function sortedLastIndex(array, value) {\n      return baseSortedIndex(array, value, true);\n    }\n\n    /**\n     * This method is like `_.sortedLastIndex` except that it accepts `iteratee`\n     * which is invoked for `value` and each element of `array` to compute their\n     * sort ranking. The iteratee is invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The sorted array to inspect.\n     * @param {*} value The value to evaluate.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {number} Returns the index at which `value` should be inserted\n     *  into `array`.\n     * @example\n     *\n     * var objects = [{ 'x': 4 }, { 'x': 5 }];\n     *\n     * _.sortedLastIndexBy(objects, { 'x': 4 }, function(o) { return o.x; });\n     * // => 1\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.sortedLastIndexBy(objects, { 'x': 4 }, 'x');\n     * // => 1\n     */\n    function sortedLastIndexBy(array, value, iteratee) {\n      return baseSortedIndexBy(array, value, getIteratee(iteratee, 2), true);\n    }\n\n    /**\n     * This method is like `_.lastIndexOf` except that it performs a binary\n     * search on a sorted `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {*} value The value to search for.\n     * @returns {number} Returns the index of the matched value, else `-1`.\n     * @example\n     *\n     * _.sortedLastIndexOf([4, 5, 5, 5, 6], 5);\n     * // => 3\n     */\n    function sortedLastIndexOf(array, value) {\n      var length = array == null ? 0 : array.length;\n      if (length) {\n        var index = baseSortedIndex(array, value, true) - 1;\n        if (eq(array[index], value)) {\n          return index;\n        }\n      }\n      return -1;\n    }\n\n    /**\n     * This method is like `_.uniq` except that it's designed and optimized\n     * for sorted arrays.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @returns {Array} Returns the new duplicate free array.\n     * @example\n     *\n     * _.sortedUniq([1, 1, 2]);\n     * // => [1, 2]\n     */\n    function sortedUniq(array) {\n      return (array && array.length)\n        ? baseSortedUniq(array)\n        : [];\n    }\n\n    /**\n     * This method is like `_.uniqBy` except that it's designed and optimized\n     * for sorted arrays.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {Function} [iteratee] The iteratee invoked per element.\n     * @returns {Array} Returns the new duplicate free array.\n     * @example\n     *\n     * _.sortedUniqBy([1.1, 1.2, 2.3, 2.4], Math.floor);\n     * // => [1.1, 2.3]\n     */\n    function sortedUniqBy(array, iteratee) {\n      return (array && array.length)\n        ? baseSortedUniq(array, getIteratee(iteratee, 2))\n        : [];\n    }\n\n    /**\n     * Gets all but the first element of `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * _.tail([1, 2, 3]);\n     * // => [2, 3]\n     */\n    function tail(array) {\n      var length = array == null ? 0 : array.length;\n      return length ? baseSlice(array, 1, length) : [];\n    }\n\n    /**\n     * Creates a slice of `array` with `n` elements taken from the beginning.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {number} [n=1] The number of elements to take.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * _.take([1, 2, 3]);\n     * // => [1]\n     *\n     * _.take([1, 2, 3], 2);\n     * // => [1, 2]\n     *\n     * _.take([1, 2, 3], 5);\n     * // => [1, 2, 3]\n     *\n     * _.take([1, 2, 3], 0);\n     * // => []\n     */\n    function take(array, n, guard) {\n      if (!(array && array.length)) {\n        return [];\n      }\n      n = (guard || n === undefined) ? 1 : toInteger(n);\n      return baseSlice(array, 0, n < 0 ? 0 : n);\n    }\n\n    /**\n     * Creates a slice of `array` with `n` elements taken from the end.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {number} [n=1] The number of elements to take.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * _.takeRight([1, 2, 3]);\n     * // => [3]\n     *\n     * _.takeRight([1, 2, 3], 2);\n     * // => [2, 3]\n     *\n     * _.takeRight([1, 2, 3], 5);\n     * // => [1, 2, 3]\n     *\n     * _.takeRight([1, 2, 3], 0);\n     * // => []\n     */\n    function takeRight(array, n, guard) {\n      var length = array == null ? 0 : array.length;\n      if (!length) {\n        return [];\n      }\n      n = (guard || n === undefined) ? 1 : toInteger(n);\n      n = length - n;\n      return baseSlice(array, n < 0 ? 0 : n, length);\n    }\n\n    /**\n     * Creates a slice of `array` with elements taken from the end. Elements are\n     * taken until `predicate` returns falsey. The predicate is invoked with\n     * three arguments: (value, index, array).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney',  'active': true },\n     *   { 'user': 'fred',    'active': false },\n     *   { 'user': 'pebbles', 'active': false }\n     * ];\n     *\n     * _.takeRightWhile(users, function(o) { return !o.active; });\n     * // => objects for ['fred', 'pebbles']\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.takeRightWhile(users, { 'user': 'pebbles', 'active': false });\n     * // => objects for ['pebbles']\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.takeRightWhile(users, ['active', false]);\n     * // => objects for ['fred', 'pebbles']\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.takeRightWhile(users, 'active');\n     * // => []\n     */\n    function takeRightWhile(array, predicate) {\n      return (array && array.length)\n        ? baseWhile(array, getIteratee(predicate, 3), false, true)\n        : [];\n    }\n\n    /**\n     * Creates a slice of `array` with elements taken from the beginning. Elements\n     * are taken until `predicate` returns falsey. The predicate is invoked with\n     * three arguments: (value, index, array).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Array\n     * @param {Array} array The array to query.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the slice of `array`.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney',  'active': false },\n     *   { 'user': 'fred',    'active': false },\n     *   { 'user': 'pebbles', 'active': true }\n     * ];\n     *\n     * _.takeWhile(users, function(o) { return !o.active; });\n     * // => objects for ['barney', 'fred']\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.takeWhile(users, { 'user': 'barney', 'active': false });\n     * // => objects for ['barney']\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.takeWhile(users, ['active', false]);\n     * // => objects for ['barney', 'fred']\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.takeWhile(users, 'active');\n     * // => []\n     */\n    function takeWhile(array, predicate) {\n      return (array && array.length)\n        ? baseWhile(array, getIteratee(predicate, 3))\n        : [];\n    }\n\n    /**\n     * Creates an array of unique values, in order, from all given arrays using\n     * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * for equality comparisons.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to inspect.\n     * @returns {Array} Returns the new array of combined values.\n     * @example\n     *\n     * _.union([2], [1, 2]);\n     * // => [2, 1]\n     */\n    var union = baseRest(function(arrays) {\n      return baseUniq(baseFlatten(arrays, 1, isArrayLikeObject, true));\n    });\n\n    /**\n     * This method is like `_.union` except that it accepts `iteratee` which is\n     * invoked for each element of each `arrays` to generate the criterion by\n     * which uniqueness is computed. Result values are chosen from the first\n     * array in which the value occurs. The iteratee is invoked with one argument:\n     * (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to inspect.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {Array} Returns the new array of combined values.\n     * @example\n     *\n     * _.unionBy([2.1], [1.2, 2.3], Math.floor);\n     * // => [2.1, 1.2]\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.unionBy([{ 'x': 1 }], [{ 'x': 2 }, { 'x': 1 }], 'x');\n     * // => [{ 'x': 1 }, { 'x': 2 }]\n     */\n    var unionBy = baseRest(function(arrays) {\n      var iteratee = last(arrays);\n      if (isArrayLikeObject(iteratee)) {\n        iteratee = undefined;\n      }\n      return baseUniq(baseFlatten(arrays, 1, isArrayLikeObject, true), getIteratee(iteratee, 2));\n    });\n\n    /**\n     * This method is like `_.union` except that it accepts `comparator` which\n     * is invoked to compare elements of `arrays`. Result values are chosen from\n     * the first array in which the value occurs. The comparator is invoked\n     * with two arguments: (arrVal, othVal).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to inspect.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns the new array of combined values.\n     * @example\n     *\n     * var objects = [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }];\n     * var others = [{ 'x': 1, 'y': 1 }, { 'x': 1, 'y': 2 }];\n     *\n     * _.unionWith(objects, others, _.isEqual);\n     * // => [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }, { 'x': 1, 'y': 1 }]\n     */\n    var unionWith = baseRest(function(arrays) {\n      var comparator = last(arrays);\n      comparator = typeof comparator == 'function' ? comparator : undefined;\n      return baseUniq(baseFlatten(arrays, 1, isArrayLikeObject, true), undefined, comparator);\n    });\n\n    /**\n     * Creates a duplicate-free version of an array, using\n     * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * for equality comparisons, in which only the first occurrence of each element\n     * is kept. The order of result values is determined by the order they occur\n     * in the array.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @returns {Array} Returns the new duplicate free array.\n     * @example\n     *\n     * _.uniq([2, 1, 2]);\n     * // => [2, 1]\n     */\n    function uniq(array) {\n      return (array && array.length) ? baseUniq(array) : [];\n    }\n\n    /**\n     * This method is like `_.uniq` except that it accepts `iteratee` which is\n     * invoked for each element in `array` to generate the criterion by which\n     * uniqueness is computed. The order of result values is determined by the\n     * order they occur in the array. The iteratee is invoked with one argument:\n     * (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {Array} Returns the new duplicate free array.\n     * @example\n     *\n     * _.uniqBy([2.1, 1.2, 2.3], Math.floor);\n     * // => [2.1, 1.2]\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.uniqBy([{ 'x': 1 }, { 'x': 2 }, { 'x': 1 }], 'x');\n     * // => [{ 'x': 1 }, { 'x': 2 }]\n     */\n    function uniqBy(array, iteratee) {\n      return (array && array.length) ? baseUniq(array, getIteratee(iteratee, 2)) : [];\n    }\n\n    /**\n     * This method is like `_.uniq` except that it accepts `comparator` which\n     * is invoked to compare elements of `array`. The order of result values is\n     * determined by the order they occur in the array.The comparator is invoked\n     * with two arguments: (arrVal, othVal).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns the new duplicate free array.\n     * @example\n     *\n     * var objects = [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }, { 'x': 1, 'y': 2 }];\n     *\n     * _.uniqWith(objects, _.isEqual);\n     * // => [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }]\n     */\n    function uniqWith(array, comparator) {\n      comparator = typeof comparator == 'function' ? comparator : undefined;\n      return (array && array.length) ? baseUniq(array, undefined, comparator) : [];\n    }\n\n    /**\n     * This method is like `_.zip` except that it accepts an array of grouped\n     * elements and creates an array regrouping the elements to their pre-zip\n     * configuration.\n     *\n     * @static\n     * @memberOf _\n     * @since 1.2.0\n     * @category Array\n     * @param {Array} array The array of grouped elements to process.\n     * @returns {Array} Returns the new array of regrouped elements.\n     * @example\n     *\n     * var zipped = _.zip(['a', 'b'], [1, 2], [true, false]);\n     * // => [['a', 1, true], ['b', 2, false]]\n     *\n     * _.unzip(zipped);\n     * // => [['a', 'b'], [1, 2], [true, false]]\n     */\n    function unzip(array) {\n      if (!(array && array.length)) {\n        return [];\n      }\n      var length = 0;\n      array = arrayFilter(array, function(group) {\n        if (isArrayLikeObject(group)) {\n          length = nativeMax(group.length, length);\n          return true;\n        }\n      });\n      return baseTimes(length, function(index) {\n        return arrayMap(array, baseProperty(index));\n      });\n    }\n\n    /**\n     * This method is like `_.unzip` except that it accepts `iteratee` to specify\n     * how regrouped values should be combined. The iteratee is invoked with the\n     * elements of each group: (...group).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.8.0\n     * @category Array\n     * @param {Array} array The array of grouped elements to process.\n     * @param {Function} [iteratee=_.identity] The function to combine\n     *  regrouped values.\n     * @returns {Array} Returns the new array of regrouped elements.\n     * @example\n     *\n     * var zipped = _.zip([1, 2], [10, 20], [100, 200]);\n     * // => [[1, 10, 100], [2, 20, 200]]\n     *\n     * _.unzipWith(zipped, _.add);\n     * // => [3, 30, 300]\n     */\n    function unzipWith(array, iteratee) {\n      if (!(array && array.length)) {\n        return [];\n      }\n      var result = unzip(array);\n      if (iteratee == null) {\n        return result;\n      }\n      return arrayMap(result, function(group) {\n        return apply(iteratee, undefined, group);\n      });\n    }\n\n    /**\n     * Creates an array excluding all given values using\n     * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * for equality comparisons.\n     *\n     * **Note:** Unlike `_.pull`, this method returns a new array.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {Array} array The array to inspect.\n     * @param {...*} [values] The values to exclude.\n     * @returns {Array} Returns the new array of filtered values.\n     * @see _.difference, _.xor\n     * @example\n     *\n     * _.without([2, 1, 2, 3], 1, 2);\n     * // => [3]\n     */\n    var without = baseRest(function(array, values) {\n      return isArrayLikeObject(array)\n        ? baseDifference(array, values)\n        : [];\n    });\n\n    /**\n     * Creates an array of unique values that is the\n     * [symmetric difference](https://en.wikipedia.org/wiki/Symmetric_difference)\n     * of the given arrays. The order of result values is determined by the order\n     * they occur in the arrays.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.4.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to inspect.\n     * @returns {Array} Returns the new array of filtered values.\n     * @see _.difference, _.without\n     * @example\n     *\n     * _.xor([2, 1], [2, 3]);\n     * // => [1, 3]\n     */\n    var xor = baseRest(function(arrays) {\n      return baseXor(arrayFilter(arrays, isArrayLikeObject));\n    });\n\n    /**\n     * This method is like `_.xor` except that it accepts `iteratee` which is\n     * invoked for each element of each `arrays` to generate the criterion by\n     * which by which they're compared. The order of result values is determined\n     * by the order they occur in the arrays. The iteratee is invoked with one\n     * argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to inspect.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {Array} Returns the new array of filtered values.\n     * @example\n     *\n     * _.xorBy([2.1, 1.2], [2.3, 3.4], Math.floor);\n     * // => [1.2, 3.4]\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.xorBy([{ 'x': 1 }], [{ 'x': 2 }, { 'x': 1 }], 'x');\n     * // => [{ 'x': 2 }]\n     */\n    var xorBy = baseRest(function(arrays) {\n      var iteratee = last(arrays);\n      if (isArrayLikeObject(iteratee)) {\n        iteratee = undefined;\n      }\n      return baseXor(arrayFilter(arrays, isArrayLikeObject), getIteratee(iteratee, 2));\n    });\n\n    /**\n     * This method is like `_.xor` except that it accepts `comparator` which is\n     * invoked to compare elements of `arrays`. The order of result values is\n     * determined by the order they occur in the arrays. The comparator is invoked\n     * with two arguments: (arrVal, othVal).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to inspect.\n     * @param {Function} [comparator] The comparator invoked per element.\n     * @returns {Array} Returns the new array of filtered values.\n     * @example\n     *\n     * var objects = [{ 'x': 1, 'y': 2 }, { 'x': 2, 'y': 1 }];\n     * var others = [{ 'x': 1, 'y': 1 }, { 'x': 1, 'y': 2 }];\n     *\n     * _.xorWith(objects, others, _.isEqual);\n     * // => [{ 'x': 2, 'y': 1 }, { 'x': 1, 'y': 1 }]\n     */\n    var xorWith = baseRest(function(arrays) {\n      var comparator = last(arrays);\n      comparator = typeof comparator == 'function' ? comparator : undefined;\n      return baseXor(arrayFilter(arrays, isArrayLikeObject), undefined, comparator);\n    });\n\n    /**\n     * Creates an array of grouped elements, the first of which contains the\n     * first elements of the given arrays, the second of which contains the\n     * second elements of the given arrays, and so on.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to process.\n     * @returns {Array} Returns the new array of grouped elements.\n     * @example\n     *\n     * _.zip(['a', 'b'], [1, 2], [true, false]);\n     * // => [['a', 1, true], ['b', 2, false]]\n     */\n    var zip = baseRest(unzip);\n\n    /**\n     * This method is like `_.fromPairs` except that it accepts two arrays,\n     * one of property identifiers and one of corresponding values.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.4.0\n     * @category Array\n     * @param {Array} [props=[]] The property identifiers.\n     * @param {Array} [values=[]] The property values.\n     * @returns {Object} Returns the new object.\n     * @example\n     *\n     * _.zipObject(['a', 'b'], [1, 2]);\n     * // => { 'a': 1, 'b': 2 }\n     */\n    function zipObject(props, values) {\n      return baseZipObject(props || [], values || [], assignValue);\n    }\n\n    /**\n     * This method is like `_.zipObject` except that it supports property paths.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.1.0\n     * @category Array\n     * @param {Array} [props=[]] The property identifiers.\n     * @param {Array} [values=[]] The property values.\n     * @returns {Object} Returns the new object.\n     * @example\n     *\n     * _.zipObjectDeep(['a.b[0].c', 'a.b[1].d'], [1, 2]);\n     * // => { 'a': { 'b': [{ 'c': 1 }, { 'd': 2 }] } }\n     */\n    function zipObjectDeep(props, values) {\n      return baseZipObject(props || [], values || [], baseSet);\n    }\n\n    /**\n     * This method is like `_.zip` except that it accepts `iteratee` to specify\n     * how grouped values should be combined. The iteratee is invoked with the\n     * elements of each group: (...group).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.8.0\n     * @category Array\n     * @param {...Array} [arrays] The arrays to process.\n     * @param {Function} [iteratee=_.identity] The function to combine\n     *  grouped values.\n     * @returns {Array} Returns the new array of grouped elements.\n     * @example\n     *\n     * _.zipWith([1, 2], [10, 20], [100, 200], function(a, b, c) {\n     *   return a + b + c;\n     * });\n     * // => [111, 222]\n     */\n    var zipWith = baseRest(function(arrays) {\n      var length = arrays.length,\n          iteratee = length > 1 ? arrays[length - 1] : undefined;\n\n      iteratee = typeof iteratee == 'function' ? (arrays.pop(), iteratee) : undefined;\n      return unzipWith(arrays, iteratee);\n    });\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates a `lodash` wrapper instance that wraps `value` with explicit method\n     * chain sequences enabled. The result of such sequences must be unwrapped\n     * with `_#value`.\n     *\n     * @static\n     * @memberOf _\n     * @since 1.3.0\n     * @category Seq\n     * @param {*} value The value to wrap.\n     * @returns {Object} Returns the new `lodash` wrapper instance.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney',  'age': 36 },\n     *   { 'user': 'fred',    'age': 40 },\n     *   { 'user': 'pebbles', 'age': 1 }\n     * ];\n     *\n     * var youngest = _\n     *   .chain(users)\n     *   .sortBy('age')\n     *   .map(function(o) {\n     *     return o.user + ' is ' + o.age;\n     *   })\n     *   .head()\n     *   .value();\n     * // => 'pebbles is 1'\n     */\n    function chain(value) {\n      var result = lodash(value);\n      result.__chain__ = true;\n      return result;\n    }\n\n    /**\n     * This method invokes `interceptor` and returns `value`. The interceptor\n     * is invoked with one argument; (value). The purpose of this method is to\n     * \"tap into\" a method chain sequence in order to modify intermediate results.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Seq\n     * @param {*} value The value to provide to `interceptor`.\n     * @param {Function} interceptor The function to invoke.\n     * @returns {*} Returns `value`.\n     * @example\n     *\n     * _([1, 2, 3])\n     *  .tap(function(array) {\n     *    // Mutate input array.\n     *    array.pop();\n     *  })\n     *  .reverse()\n     *  .value();\n     * // => [2, 1]\n     */\n    function tap(value, interceptor) {\n      interceptor(value);\n      return value;\n    }\n\n    /**\n     * This method is like `_.tap` except that it returns the result of `interceptor`.\n     * The purpose of this method is to \"pass thru\" values replacing intermediate\n     * results in a method chain sequence.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Seq\n     * @param {*} value The value to provide to `interceptor`.\n     * @param {Function} interceptor The function to invoke.\n     * @returns {*} Returns the result of `interceptor`.\n     * @example\n     *\n     * _('  abc  ')\n     *  .chain()\n     *  .trim()\n     *  .thru(function(value) {\n     *    return [value];\n     *  })\n     *  .value();\n     * // => ['abc']\n     */\n    function thru(value, interceptor) {\n      return interceptor(value);\n    }\n\n    /**\n     * This method is the wrapper version of `_.at`.\n     *\n     * @name at\n     * @memberOf _\n     * @since 1.0.0\n     * @category Seq\n     * @param {...(string|string[])} [paths] The property paths to pick.\n     * @returns {Object} Returns the new `lodash` wrapper instance.\n     * @example\n     *\n     * var object = { 'a': [{ 'b': { 'c': 3 } }, 4] };\n     *\n     * _(object).at(['a[0].b.c', 'a[1]']).value();\n     * // => [3, 4]\n     */\n    var wrapperAt = flatRest(function(paths) {\n      var length = paths.length,\n          start = length ? paths[0] : 0,\n          value = this.__wrapped__,\n          interceptor = function(object) { return baseAt(object, paths); };\n\n      if (length > 1 || this.__actions__.length ||\n          !(value instanceof LazyWrapper) || !isIndex(start)) {\n        return this.thru(interceptor);\n      }\n      value = value.slice(start, +start + (length ? 1 : 0));\n      value.__actions__.push({\n        'func': thru,\n        'args': [interceptor],\n        'thisArg': undefined\n      });\n      return new LodashWrapper(value, this.__chain__).thru(function(array) {\n        if (length && !array.length) {\n          array.push(undefined);\n        }\n        return array;\n      });\n    });\n\n    /**\n     * Creates a `lodash` wrapper instance with explicit method chain sequences enabled.\n     *\n     * @name chain\n     * @memberOf _\n     * @since 0.1.0\n     * @category Seq\n     * @returns {Object} Returns the new `lodash` wrapper instance.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney', 'age': 36 },\n     *   { 'user': 'fred',   'age': 40 }\n     * ];\n     *\n     * // A sequence without explicit chaining.\n     * _(users).head();\n     * // => { 'user': 'barney', 'age': 36 }\n     *\n     * // A sequence with explicit chaining.\n     * _(users)\n     *   .chain()\n     *   .head()\n     *   .pick('user')\n     *   .value();\n     * // => { 'user': 'barney' }\n     */\n    function wrapperChain() {\n      return chain(this);\n    }\n\n    /**\n     * Executes the chain sequence and returns the wrapped result.\n     *\n     * @name commit\n     * @memberOf _\n     * @since 3.2.0\n     * @category Seq\n     * @returns {Object} Returns the new `lodash` wrapper instance.\n     * @example\n     *\n     * var array = [1, 2];\n     * var wrapped = _(array).push(3);\n     *\n     * console.log(array);\n     * // => [1, 2]\n     *\n     * wrapped = wrapped.commit();\n     * console.log(array);\n     * // => [1, 2, 3]\n     *\n     * wrapped.last();\n     * // => 3\n     *\n     * console.log(array);\n     * // => [1, 2, 3]\n     */\n    function wrapperCommit() {\n      return new LodashWrapper(this.value(), this.__chain__);\n    }\n\n    /**\n     * Gets the next value on a wrapped object following the\n     * [iterator protocol](https://mdn.io/iteration_protocols#iterator).\n     *\n     * @name next\n     * @memberOf _\n     * @since 4.0.0\n     * @category Seq\n     * @returns {Object} Returns the next iterator value.\n     * @example\n     *\n     * var wrapped = _([1, 2]);\n     *\n     * wrapped.next();\n     * // => { 'done': false, 'value': 1 }\n     *\n     * wrapped.next();\n     * // => { 'done': false, 'value': 2 }\n     *\n     * wrapped.next();\n     * // => { 'done': true, 'value': undefined }\n     */\n    function wrapperNext() {\n      if (this.__values__ === undefined) {\n        this.__values__ = toArray(this.value());\n      }\n      var done = this.__index__ >= this.__values__.length,\n          value = done ? undefined : this.__values__[this.__index__++];\n\n      return { 'done': done, 'value': value };\n    }\n\n    /**\n     * Enables the wrapper to be iterable.\n     *\n     * @name Symbol.iterator\n     * @memberOf _\n     * @since 4.0.0\n     * @category Seq\n     * @returns {Object} Returns the wrapper object.\n     * @example\n     *\n     * var wrapped = _([1, 2]);\n     *\n     * wrapped[Symbol.iterator]() === wrapped;\n     * // => true\n     *\n     * Array.from(wrapped);\n     * // => [1, 2]\n     */\n    function wrapperToIterator() {\n      return this;\n    }\n\n    /**\n     * Creates a clone of the chain sequence planting `value` as the wrapped value.\n     *\n     * @name plant\n     * @memberOf _\n     * @since 3.2.0\n     * @category Seq\n     * @param {*} value The value to plant.\n     * @returns {Object} Returns the new `lodash` wrapper instance.\n     * @example\n     *\n     * function square(n) {\n     *   return n * n;\n     * }\n     *\n     * var wrapped = _([1, 2]).map(square);\n     * var other = wrapped.plant([3, 4]);\n     *\n     * other.value();\n     * // => [9, 16]\n     *\n     * wrapped.value();\n     * // => [1, 4]\n     */\n    function wrapperPlant(value) {\n      var result,\n          parent = this;\n\n      while (parent instanceof baseLodash) {\n        var clone = wrapperClone(parent);\n        clone.__index__ = 0;\n        clone.__values__ = undefined;\n        if (result) {\n          previous.__wrapped__ = clone;\n        } else {\n          result = clone;\n        }\n        var previous = clone;\n        parent = parent.__wrapped__;\n      }\n      previous.__wrapped__ = value;\n      return result;\n    }\n\n    /**\n     * This method is the wrapper version of `_.reverse`.\n     *\n     * **Note:** This method mutates the wrapped array.\n     *\n     * @name reverse\n     * @memberOf _\n     * @since 0.1.0\n     * @category Seq\n     * @returns {Object} Returns the new `lodash` wrapper instance.\n     * @example\n     *\n     * var array = [1, 2, 3];\n     *\n     * _(array).reverse().value()\n     * // => [3, 2, 1]\n     *\n     * console.log(array);\n     * // => [3, 2, 1]\n     */\n    function wrapperReverse() {\n      var value = this.__wrapped__;\n      if (value instanceof LazyWrapper) {\n        var wrapped = value;\n        if (this.__actions__.length) {\n          wrapped = new LazyWrapper(this);\n        }\n        wrapped = wrapped.reverse();\n        wrapped.__actions__.push({\n          'func': thru,\n          'args': [reverse],\n          'thisArg': undefined\n        });\n        return new LodashWrapper(wrapped, this.__chain__);\n      }\n      return this.thru(reverse);\n    }\n\n    /**\n     * Executes the chain sequence to resolve the unwrapped value.\n     *\n     * @name value\n     * @memberOf _\n     * @since 0.1.0\n     * @alias toJSON, valueOf\n     * @category Seq\n     * @returns {*} Returns the resolved unwrapped value.\n     * @example\n     *\n     * _([1, 2, 3]).value();\n     * // => [1, 2, 3]\n     */\n    function wrapperValue() {\n      return baseWrapperValue(this.__wrapped__, this.__actions__);\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Creates an object composed of keys generated from the results of running\n     * each element of `collection` thru `iteratee`. The corresponding value of\n     * each key is the number of times the key was returned by `iteratee`. The\n     * iteratee is invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 0.5.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The iteratee to transform keys.\n     * @returns {Object} Returns the composed aggregate object.\n     * @example\n     *\n     * _.countBy([6.1, 4.2, 6.3], Math.floor);\n     * // => { '4': 1, '6': 2 }\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.countBy(['one', 'two', 'three'], 'length');\n     * // => { '3': 2, '5': 1 }\n     */\n    var countBy = createAggregator(function(result, value, key) {\n      if (hasOwnProperty.call(result, key)) {\n        ++result[key];\n      } else {\n        baseAssignValue(result, key, 1);\n      }\n    });\n\n    /**\n     * Checks if `predicate` returns truthy for **all** elements of `collection`.\n     * Iteration is stopped once `predicate` returns falsey. The predicate is\n     * invoked with three arguments: (value, index|key, collection).\n     *\n     * **Note:** This method returns `true` for\n     * [empty collections](https://en.wikipedia.org/wiki/Empty_set) because\n     * [everything is true](https://en.wikipedia.org/wiki/Vacuous_truth) of\n     * elements of empty collections.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {boolean} Returns `true` if all elements pass the predicate check,\n     *  else `false`.\n     * @example\n     *\n     * _.every([true, 1, null, 'yes'], Boolean);\n     * // => false\n     *\n     * var users = [\n     *   { 'user': 'barney', 'age': 36, 'active': false },\n     *   { 'user': 'fred',   'age': 40, 'active': false }\n     * ];\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.every(users, { 'user': 'barney', 'active': false });\n     * // => false\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.every(users, ['active', false]);\n     * // => true\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.every(users, 'active');\n     * // => false\n     */\n    function every(collection, predicate, guard) {\n      var func = isArray(collection) ? arrayEvery : baseEvery;\n      if (guard && isIterateeCall(collection, predicate, guard)) {\n        predicate = undefined;\n      }\n      return func(collection, getIteratee(predicate, 3));\n    }\n\n    /**\n     * Iterates over elements of `collection`, returning an array of all elements\n     * `predicate` returns truthy for. The predicate is invoked with three\n     * arguments: (value, index|key, collection).\n     *\n     * **Note:** Unlike `_.remove`, this method returns a new array.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the new filtered array.\n     * @see _.reject\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney', 'age': 36, 'active': true },\n     *   { 'user': 'fred',   'age': 40, 'active': false }\n     * ];\n     *\n     * _.filter(users, function(o) { return !o.active; });\n     * // => objects for ['fred']\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.filter(users, { 'age': 36, 'active': true });\n     * // => objects for ['barney']\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.filter(users, ['active', false]);\n     * // => objects for ['fred']\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.filter(users, 'active');\n     * // => objects for ['barney']\n     *\n     * // Combining several predicates using `_.overEvery` or `_.overSome`.\n     * _.filter(users, _.overSome([{ 'age': 36 }, ['age', 40]]));\n     * // => objects for ['fred', 'barney']\n     */\n    function filter(collection, predicate) {\n      var func = isArray(collection) ? arrayFilter : baseFilter;\n      return func(collection, getIteratee(predicate, 3));\n    }\n\n    /**\n     * Iterates over elements of `collection`, returning the first element\n     * `predicate` returns truthy for. The predicate is invoked with three\n     * arguments: (value, index|key, collection).\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to inspect.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @param {number} [fromIndex=0] The index to search from.\n     * @returns {*} Returns the matched element, else `undefined`.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney',  'age': 36, 'active': true },\n     *   { 'user': 'fred',    'age': 40, 'active': false },\n     *   { 'user': 'pebbles', 'age': 1,  'active': true }\n     * ];\n     *\n     * _.find(users, function(o) { return o.age < 40; });\n     * // => object for 'barney'\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.find(users, { 'age': 1, 'active': true });\n     * // => object for 'pebbles'\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.find(users, ['active', false]);\n     * // => object for 'fred'\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.find(users, 'active');\n     * // => object for 'barney'\n     */\n    var find = createFind(findIndex);\n\n    /**\n     * This method is like `_.find` except that it iterates over elements of\n     * `collection` from right to left.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to inspect.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @param {number} [fromIndex=collection.length-1] The index to search from.\n     * @returns {*} Returns the matched element, else `undefined`.\n     * @example\n     *\n     * _.findLast([1, 2, 3, 4], function(n) {\n     *   return n % 2 == 1;\n     * });\n     * // => 3\n     */\n    var findLast = createFind(findLastIndex);\n\n    /**\n     * Creates a flattened array of values by running each element in `collection`\n     * thru `iteratee` and flattening the mapped results. The iteratee is invoked\n     * with three arguments: (value, index|key, collection).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the new flattened array.\n     * @example\n     *\n     * function duplicate(n) {\n     *   return [n, n];\n     * }\n     *\n     * _.flatMap([1, 2], duplicate);\n     * // => [1, 1, 2, 2]\n     */\n    function flatMap(collection, iteratee) {\n      return baseFlatten(map(collection, iteratee), 1);\n    }\n\n    /**\n     * This method is like `_.flatMap` except that it recursively flattens the\n     * mapped results.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.7.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the new flattened array.\n     * @example\n     *\n     * function duplicate(n) {\n     *   return [[[n, n]]];\n     * }\n     *\n     * _.flatMapDeep([1, 2], duplicate);\n     * // => [1, 1, 2, 2]\n     */\n    function flatMapDeep(collection, iteratee) {\n      return baseFlatten(map(collection, iteratee), INFINITY);\n    }\n\n    /**\n     * This method is like `_.flatMap` except that it recursively flattens the\n     * mapped results up to `depth` times.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.7.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @param {number} [depth=1] The maximum recursion depth.\n     * @returns {Array} Returns the new flattened array.\n     * @example\n     *\n     * function duplicate(n) {\n     *   return [[[n, n]]];\n     * }\n     *\n     * _.flatMapDepth([1, 2], duplicate, 2);\n     * // => [[1, 1], [2, 2]]\n     */\n    function flatMapDepth(collection, iteratee, depth) {\n      depth = depth === undefined ? 1 : toInteger(depth);\n      return baseFlatten(map(collection, iteratee), depth);\n    }\n\n    /**\n     * Iterates over elements of `collection` and invokes `iteratee` for each element.\n     * The iteratee is invoked with three arguments: (value, index|key, collection).\n     * Iteratee functions may exit iteration early by explicitly returning `false`.\n     *\n     * **Note:** As with other \"Collections\" methods, objects with a \"length\"\n     * property are iterated like arrays. To avoid this behavior use `_.forIn`\n     * or `_.forOwn` for object iteration.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @alias each\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Array|Object} Returns `collection`.\n     * @see _.forEachRight\n     * @example\n     *\n     * _.forEach([1, 2], function(value) {\n     *   console.log(value);\n     * });\n     * // => Logs `1` then `2`.\n     *\n     * _.forEach({ 'a': 1, 'b': 2 }, function(value, key) {\n     *   console.log(key);\n     * });\n     * // => Logs 'a' then 'b' (iteration order is not guaranteed).\n     */\n    function forEach(collection, iteratee) {\n      var func = isArray(collection) ? arrayEach : baseEach;\n      return func(collection, getIteratee(iteratee, 3));\n    }\n\n    /**\n     * This method is like `_.forEach` except that it iterates over elements of\n     * `collection` from right to left.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @alias eachRight\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Array|Object} Returns `collection`.\n     * @see _.forEach\n     * @example\n     *\n     * _.forEachRight([1, 2], function(value) {\n     *   console.log(value);\n     * });\n     * // => Logs `2` then `1`.\n     */\n    function forEachRight(collection, iteratee) {\n      var func = isArray(collection) ? arrayEachRight : baseEachRight;\n      return func(collection, getIteratee(iteratee, 3));\n    }\n\n    /**\n     * Creates an object composed of keys generated from the results of running\n     * each element of `collection` thru `iteratee`. The order of grouped values\n     * is determined by the order they occur in `collection`. The corresponding\n     * value of each key is an array of elements responsible for generating the\n     * key. The iteratee is invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The iteratee to transform keys.\n     * @returns {Object} Returns the composed aggregate object.\n     * @example\n     *\n     * _.groupBy([6.1, 4.2, 6.3], Math.floor);\n     * // => { '4': [4.2], '6': [6.1, 6.3] }\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.groupBy(['one', 'two', 'three'], 'length');\n     * // => { '3': ['one', 'two'], '5': ['three'] }\n     */\n    var groupBy = createAggregator(function(result, value, key) {\n      if (hasOwnProperty.call(result, key)) {\n        result[key].push(value);\n      } else {\n        baseAssignValue(result, key, [value]);\n      }\n    });\n\n    /**\n     * Checks if `value` is in `collection`. If `collection` is a string, it's\n     * checked for a substring of `value`, otherwise\n     * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * is used for equality comparisons. If `fromIndex` is negative, it's used as\n     * the offset from the end of `collection`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object|string} collection The collection to inspect.\n     * @param {*} value The value to search for.\n     * @param {number} [fromIndex=0] The index to search from.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.reduce`.\n     * @returns {boolean} Returns `true` if `value` is found, else `false`.\n     * @example\n     *\n     * _.includes([1, 2, 3], 1);\n     * // => true\n     *\n     * _.includes([1, 2, 3], 1, 2);\n     * // => false\n     *\n     * _.includes({ 'a': 1, 'b': 2 }, 1);\n     * // => true\n     *\n     * _.includes('abcd', 'bc');\n     * // => true\n     */\n    function includes(collection, value, fromIndex, guard) {\n      collection = isArrayLike(collection) ? collection : values(collection);\n      fromIndex = (fromIndex && !guard) ? toInteger(fromIndex) : 0;\n\n      var length = collection.length;\n      if (fromIndex < 0) {\n        fromIndex = nativeMax(length + fromIndex, 0);\n      }\n      return isString(collection)\n        ? (fromIndex <= length && collection.indexOf(value, fromIndex) > -1)\n        : (!!length && baseIndexOf(collection, value, fromIndex) > -1);\n    }\n\n    /**\n     * Invokes the method at `path` of each element in `collection`, returning\n     * an array of the results of each invoked method. Any additional arguments\n     * are provided to each invoked method. If `path` is a function, it's invoked\n     * for, and `this` bound to, each element in `collection`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Array|Function|string} path The path of the method to invoke or\n     *  the function invoked per iteration.\n     * @param {...*} [args] The arguments to invoke each method with.\n     * @returns {Array} Returns the array of results.\n     * @example\n     *\n     * _.invokeMap([[5, 1, 7], [3, 2, 1]], 'sort');\n     * // => [[1, 5, 7], [1, 2, 3]]\n     *\n     * _.invokeMap([123, 456], String.prototype.split, '');\n     * // => [['1', '2', '3'], ['4', '5', '6']]\n     */\n    var invokeMap = baseRest(function(collection, path, args) {\n      var index = -1,\n          isFunc = typeof path == 'function',\n          result = isArrayLike(collection) ? Array(collection.length) : [];\n\n      baseEach(collection, function(value) {\n        result[++index] = isFunc ? apply(path, value, args) : baseInvoke(value, path, args);\n      });\n      return result;\n    });\n\n    /**\n     * Creates an object composed of keys generated from the results of running\n     * each element of `collection` thru `iteratee`. The corresponding value of\n     * each key is the last element responsible for generating the key. The\n     * iteratee is invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The iteratee to transform keys.\n     * @returns {Object} Returns the composed aggregate object.\n     * @example\n     *\n     * var array = [\n     *   { 'dir': 'left', 'code': 97 },\n     *   { 'dir': 'right', 'code': 100 }\n     * ];\n     *\n     * _.keyBy(array, function(o) {\n     *   return String.fromCharCode(o.code);\n     * });\n     * // => { 'a': { 'dir': 'left', 'code': 97 }, 'd': { 'dir': 'right', 'code': 100 } }\n     *\n     * _.keyBy(array, 'dir');\n     * // => { 'left': { 'dir': 'left', 'code': 97 }, 'right': { 'dir': 'right', 'code': 100 } }\n     */\n    var keyBy = createAggregator(function(result, value, key) {\n      baseAssignValue(result, key, value);\n    });\n\n    /**\n     * Creates an array of values by running each element in `collection` thru\n     * `iteratee`. The iteratee is invoked with three arguments:\n     * (value, index|key, collection).\n     *\n     * Many lodash methods are guarded to work as iteratees for methods like\n     * `_.every`, `_.filter`, `_.map`, `_.mapValues`, `_.reject`, and `_.some`.\n     *\n     * The guarded methods are:\n     * `ary`, `chunk`, `curry`, `curryRight`, `drop`, `dropRight`, `every`,\n     * `fill`, `invert`, `parseInt`, `random`, `range`, `rangeRight`, `repeat`,\n     * `sampleSize`, `slice`, `some`, `sortBy`, `split`, `take`, `takeRight`,\n     * `template`, `trim`, `trimEnd`, `trimStart`, and `words`\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the new mapped array.\n     * @example\n     *\n     * function square(n) {\n     *   return n * n;\n     * }\n     *\n     * _.map([4, 8], square);\n     * // => [16, 64]\n     *\n     * _.map({ 'a': 4, 'b': 8 }, square);\n     * // => [16, 64] (iteration order is not guaranteed)\n     *\n     * var users = [\n     *   { 'user': 'barney' },\n     *   { 'user': 'fred' }\n     * ];\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.map(users, 'user');\n     * // => ['barney', 'fred']\n     */\n    function map(collection, iteratee) {\n      var func = isArray(collection) ? arrayMap : baseMap;\n      return func(collection, getIteratee(iteratee, 3));\n    }\n\n    /**\n     * This method is like `_.sortBy` except that it allows specifying the sort\n     * orders of the iteratees to sort by. If `orders` is unspecified, all values\n     * are sorted in ascending order. Otherwise, specify an order of \"desc\" for\n     * descending or \"asc\" for ascending sort order of corresponding values.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Array[]|Function[]|Object[]|string[]} [iteratees=[_.identity]]\n     *  The iteratees to sort by.\n     * @param {string[]} [orders] The sort orders of `iteratees`.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.reduce`.\n     * @returns {Array} Returns the new sorted array.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'fred',   'age': 48 },\n     *   { 'user': 'barney', 'age': 34 },\n     *   { 'user': 'fred',   'age': 40 },\n     *   { 'user': 'barney', 'age': 36 }\n     * ];\n     *\n     * // Sort by `user` in ascending order and by `age` in descending order.\n     * _.orderBy(users, ['user', 'age'], ['asc', 'desc']);\n     * // => objects for [['barney', 36], ['barney', 34], ['fred', 48], ['fred', 40]]\n     */\n    function orderBy(collection, iteratees, orders, guard) {\n      if (collection == null) {\n        return [];\n      }\n      if (!isArray(iteratees)) {\n        iteratees = iteratees == null ? [] : [iteratees];\n      }\n      orders = guard ? undefined : orders;\n      if (!isArray(orders)) {\n        orders = orders == null ? [] : [orders];\n      }\n      return baseOrderBy(collection, iteratees, orders);\n    }\n\n    /**\n     * Creates an array of elements split into two groups, the first of which\n     * contains elements `predicate` returns truthy for, the second of which\n     * contains elements `predicate` returns falsey for. The predicate is\n     * invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the array of grouped elements.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney',  'age': 36, 'active': false },\n     *   { 'user': 'fred',    'age': 40, 'active': true },\n     *   { 'user': 'pebbles', 'age': 1,  'active': false }\n     * ];\n     *\n     * _.partition(users, function(o) { return o.active; });\n     * // => objects for [['fred'], ['barney', 'pebbles']]\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.partition(users, { 'age': 1, 'active': false });\n     * // => objects for [['pebbles'], ['barney', 'fred']]\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.partition(users, ['active', false]);\n     * // => objects for [['barney', 'pebbles'], ['fred']]\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.partition(users, 'active');\n     * // => objects for [['fred'], ['barney', 'pebbles']]\n     */\n    var partition = createAggregator(function(result, value, key) {\n      result[key ? 0 : 1].push(value);\n    }, function() { return [[], []]; });\n\n    /**\n     * Reduces `collection` to a value which is the accumulated result of running\n     * each element in `collection` thru `iteratee`, where each successive\n     * invocation is supplied the return value of the previous. If `accumulator`\n     * is not given, the first element of `collection` is used as the initial\n     * value. The iteratee is invoked with four arguments:\n     * (accumulator, value, index|key, collection).\n     *\n     * Many lodash methods are guarded to work as iteratees for methods like\n     * `_.reduce`, `_.reduceRight`, and `_.transform`.\n     *\n     * The guarded methods are:\n     * `assign`, `defaults`, `defaultsDeep`, `includes`, `merge`, `orderBy`,\n     * and `sortBy`\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @param {*} [accumulator] The initial value.\n     * @returns {*} Returns the accumulated value.\n     * @see _.reduceRight\n     * @example\n     *\n     * _.reduce([1, 2], function(sum, n) {\n     *   return sum + n;\n     * }, 0);\n     * // => 3\n     *\n     * _.reduce({ 'a': 1, 'b': 2, 'c': 1 }, function(result, value, key) {\n     *   (result[value] || (result[value] = [])).push(key);\n     *   return result;\n     * }, {});\n     * // => { '1': ['a', 'c'], '2': ['b'] } (iteration order is not guaranteed)\n     */\n    function reduce(collection, iteratee, accumulator) {\n      var func = isArray(collection) ? arrayReduce : baseReduce,\n          initAccum = arguments.length < 3;\n\n      return func(collection, getIteratee(iteratee, 4), accumulator, initAccum, baseEach);\n    }\n\n    /**\n     * This method is like `_.reduce` except that it iterates over elements of\n     * `collection` from right to left.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @param {*} [accumulator] The initial value.\n     * @returns {*} Returns the accumulated value.\n     * @see _.reduce\n     * @example\n     *\n     * var array = [[0, 1], [2, 3], [4, 5]];\n     *\n     * _.reduceRight(array, function(flattened, other) {\n     *   return flattened.concat(other);\n     * }, []);\n     * // => [4, 5, 2, 3, 0, 1]\n     */\n    function reduceRight(collection, iteratee, accumulator) {\n      var func = isArray(collection) ? arrayReduceRight : baseReduce,\n          initAccum = arguments.length < 3;\n\n      return func(collection, getIteratee(iteratee, 4), accumulator, initAccum, baseEachRight);\n    }\n\n    /**\n     * The opposite of `_.filter`; this method returns the elements of `collection`\n     * that `predicate` does **not** return truthy for.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the new filtered array.\n     * @see _.filter\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney', 'age': 36, 'active': false },\n     *   { 'user': 'fred',   'age': 40, 'active': true }\n     * ];\n     *\n     * _.reject(users, function(o) { return !o.active; });\n     * // => objects for ['fred']\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.reject(users, { 'age': 40, 'active': true });\n     * // => objects for ['barney']\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.reject(users, ['active', false]);\n     * // => objects for ['fred']\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.reject(users, 'active');\n     * // => objects for ['barney']\n     */\n    function reject(collection, predicate) {\n      var func = isArray(collection) ? arrayFilter : baseFilter;\n      return func(collection, negate(getIteratee(predicate, 3)));\n    }\n\n    /**\n     * Gets a random element from `collection`.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to sample.\n     * @returns {*} Returns the random element.\n     * @example\n     *\n     * _.sample([1, 2, 3, 4]);\n     * // => 2\n     */\n    function sample(collection) {\n      var func = isArray(collection) ? arraySample : baseSample;\n      return func(collection);\n    }\n\n    /**\n     * Gets `n` random elements at unique keys from `collection` up to the\n     * size of `collection`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to sample.\n     * @param {number} [n=1] The number of elements to sample.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Array} Returns the random elements.\n     * @example\n     *\n     * _.sampleSize([1, 2, 3], 2);\n     * // => [3, 1]\n     *\n     * _.sampleSize([1, 2, 3], 4);\n     * // => [2, 3, 1]\n     */\n    function sampleSize(collection, n, guard) {\n      if ((guard ? isIterateeCall(collection, n, guard) : n === undefined)) {\n        n = 1;\n      } else {\n        n = toInteger(n);\n      }\n      var func = isArray(collection) ? arraySampleSize : baseSampleSize;\n      return func(collection, n);\n    }\n\n    /**\n     * Creates an array of shuffled values, using a version of the\n     * [Fisher-Yates shuffle](https://en.wikipedia.org/wiki/Fisher-Yates_shuffle).\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to shuffle.\n     * @returns {Array} Returns the new shuffled array.\n     * @example\n     *\n     * _.shuffle([1, 2, 3, 4]);\n     * // => [4, 1, 3, 2]\n     */\n    function shuffle(collection) {\n      var func = isArray(collection) ? arrayShuffle : baseShuffle;\n      return func(collection);\n    }\n\n    /**\n     * Gets the size of `collection` by returning its length for array-like\n     * values or the number of own enumerable string keyed properties for objects.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object|string} collection The collection to inspect.\n     * @returns {number} Returns the collection size.\n     * @example\n     *\n     * _.size([1, 2, 3]);\n     * // => 3\n     *\n     * _.size({ 'a': 1, 'b': 2 });\n     * // => 2\n     *\n     * _.size('pebbles');\n     * // => 7\n     */\n    function size(collection) {\n      if (collection == null) {\n        return 0;\n      }\n      if (isArrayLike(collection)) {\n        return isString(collection) ? stringSize(collection) : collection.length;\n      }\n      var tag = getTag(collection);\n      if (tag == mapTag || tag == setTag) {\n        return collection.size;\n      }\n      return baseKeys(collection).length;\n    }\n\n    /**\n     * Checks if `predicate` returns truthy for **any** element of `collection`.\n     * Iteration is stopped once `predicate` returns truthy. The predicate is\n     * invoked with three arguments: (value, index|key, collection).\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {boolean} Returns `true` if any element passes the predicate check,\n     *  else `false`.\n     * @example\n     *\n     * _.some([null, 0, 'yes', false], Boolean);\n     * // => true\n     *\n     * var users = [\n     *   { 'user': 'barney', 'active': true },\n     *   { 'user': 'fred',   'active': false }\n     * ];\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.some(users, { 'user': 'barney', 'active': false });\n     * // => false\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.some(users, ['active', false]);\n     * // => true\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.some(users, 'active');\n     * // => true\n     */\n    function some(collection, predicate, guard) {\n      var func = isArray(collection) ? arraySome : baseSome;\n      if (guard && isIterateeCall(collection, predicate, guard)) {\n        predicate = undefined;\n      }\n      return func(collection, getIteratee(predicate, 3));\n    }\n\n    /**\n     * Creates an array of elements, sorted in ascending order by the results of\n     * running each element in a collection thru each iteratee. This method\n     * performs a stable sort, that is, it preserves the original sort order of\n     * equal elements. The iteratees are invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Collection\n     * @param {Array|Object} collection The collection to iterate over.\n     * @param {...(Function|Function[])} [iteratees=[_.identity]]\n     *  The iteratees to sort by.\n     * @returns {Array} Returns the new sorted array.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'fred',   'age': 48 },\n     *   { 'user': 'barney', 'age': 36 },\n     *   { 'user': 'fred',   'age': 30 },\n     *   { 'user': 'barney', 'age': 34 }\n     * ];\n     *\n     * _.sortBy(users, [function(o) { return o.user; }]);\n     * // => objects for [['barney', 36], ['barney', 34], ['fred', 48], ['fred', 30]]\n     *\n     * _.sortBy(users, ['user', 'age']);\n     * // => objects for [['barney', 34], ['barney', 36], ['fred', 30], ['fred', 48]]\n     */\n    var sortBy = baseRest(function(collection, iteratees) {\n      if (collection == null) {\n        return [];\n      }\n      var length = iteratees.length;\n      if (length > 1 && isIterateeCall(collection, iteratees[0], iteratees[1])) {\n        iteratees = [];\n      } else if (length > 2 && isIterateeCall(iteratees[0], iteratees[1], iteratees[2])) {\n        iteratees = [iteratees[0]];\n      }\n      return baseOrderBy(collection, baseFlatten(iteratees, 1), []);\n    });\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Gets the timestamp of the number of milliseconds that have elapsed since\n     * the Unix epoch (1 January 1970 00:00:00 UTC).\n     *\n     * @static\n     * @memberOf _\n     * @since 2.4.0\n     * @category Date\n     * @returns {number} Returns the timestamp.\n     * @example\n     *\n     * _.defer(function(stamp) {\n     *   console.log(_.now() - stamp);\n     * }, _.now());\n     * // => Logs the number of milliseconds it took for the deferred invocation.\n     */\n    var now = ctxNow || function() {\n      return root.Date.now();\n    };\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * The opposite of `_.before`; this method creates a function that invokes\n     * `func` once it's called `n` or more times.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Function\n     * @param {number} n The number of calls before `func` is invoked.\n     * @param {Function} func The function to restrict.\n     * @returns {Function} Returns the new restricted function.\n     * @example\n     *\n     * var saves = ['profile', 'settings'];\n     *\n     * var done = _.after(saves.length, function() {\n     *   console.log('done saving!');\n     * });\n     *\n     * _.forEach(saves, function(type) {\n     *   asyncSave({ 'type': type, 'complete': done });\n     * });\n     * // => Logs 'done saving!' after the two async saves have completed.\n     */\n    function after(n, func) {\n      if (typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      n = toInteger(n);\n      return function() {\n        if (--n < 1) {\n          return func.apply(this, arguments);\n        }\n      };\n    }\n\n    /**\n     * Creates a function that invokes `func`, with up to `n` arguments,\n     * ignoring any additional arguments.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Function\n     * @param {Function} func The function to cap arguments for.\n     * @param {number} [n=func.length] The arity cap.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Function} Returns the new capped function.\n     * @example\n     *\n     * _.map(['6', '8', '10'], _.ary(parseInt, 1));\n     * // => [6, 8, 10]\n     */\n    function ary(func, n, guard) {\n      n = guard ? undefined : n;\n      n = (func && n == null) ? func.length : n;\n      return createWrap(func, WRAP_ARY_FLAG, undefined, undefined, undefined, undefined, n);\n    }\n\n    /**\n     * Creates a function that invokes `func`, with the `this` binding and arguments\n     * of the created function, while it's called less than `n` times. Subsequent\n     * calls to the created function return the result of the last `func` invocation.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Function\n     * @param {number} n The number of calls at which `func` is no longer invoked.\n     * @param {Function} func The function to restrict.\n     * @returns {Function} Returns the new restricted function.\n     * @example\n     *\n     * jQuery(element).on('click', _.before(5, addContactToList));\n     * // => Allows adding up to 4 contacts to the list.\n     */\n    function before(n, func) {\n      var result;\n      if (typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      n = toInteger(n);\n      return function() {\n        if (--n > 0) {\n          result = func.apply(this, arguments);\n        }\n        if (n <= 1) {\n          func = undefined;\n        }\n        return result;\n      };\n    }\n\n    /**\n     * Creates a function that invokes `func` with the `this` binding of `thisArg`\n     * and `partials` prepended to the arguments it receives.\n     *\n     * The `_.bind.placeholder` value, which defaults to `_` in monolithic builds,\n     * may be used as a placeholder for partially applied arguments.\n     *\n     * **Note:** Unlike native `Function#bind`, this method doesn't set the \"length\"\n     * property of bound functions.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Function\n     * @param {Function} func The function to bind.\n     * @param {*} thisArg The `this` binding of `func`.\n     * @param {...*} [partials] The arguments to be partially applied.\n     * @returns {Function} Returns the new bound function.\n     * @example\n     *\n     * function greet(greeting, punctuation) {\n     *   return greeting + ' ' + this.user + punctuation;\n     * }\n     *\n     * var object = { 'user': 'fred' };\n     *\n     * var bound = _.bind(greet, object, 'hi');\n     * bound('!');\n     * // => 'hi fred!'\n     *\n     * // Bound with placeholders.\n     * var bound = _.bind(greet, object, _, '!');\n     * bound('hi');\n     * // => 'hi fred!'\n     */\n    var bind = baseRest(function(func, thisArg, partials) {\n      var bitmask = WRAP_BIND_FLAG;\n      if (partials.length) {\n        var holders = replaceHolders(partials, getHolder(bind));\n        bitmask |= WRAP_PARTIAL_FLAG;\n      }\n      return createWrap(func, bitmask, thisArg, partials, holders);\n    });\n\n    /**\n     * Creates a function that invokes the method at `object[key]` with `partials`\n     * prepended to the arguments it receives.\n     *\n     * This method differs from `_.bind` by allowing bound functions to reference\n     * methods that may be redefined or don't yet exist. See\n     * [Peter Michaux's article](http://peter.michaux.ca/articles/lazy-function-definition-pattern)\n     * for more details.\n     *\n     * The `_.bindKey.placeholder` value, which defaults to `_` in monolithic\n     * builds, may be used as a placeholder for partially applied arguments.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.10.0\n     * @category Function\n     * @param {Object} object The object to invoke the method on.\n     * @param {string} key The key of the method.\n     * @param {...*} [partials] The arguments to be partially applied.\n     * @returns {Function} Returns the new bound function.\n     * @example\n     *\n     * var object = {\n     *   'user': 'fred',\n     *   'greet': function(greeting, punctuation) {\n     *     return greeting + ' ' + this.user + punctuation;\n     *   }\n     * };\n     *\n     * var bound = _.bindKey(object, 'greet', 'hi');\n     * bound('!');\n     * // => 'hi fred!'\n     *\n     * object.greet = function(greeting, punctuation) {\n     *   return greeting + 'ya ' + this.user + punctuation;\n     * };\n     *\n     * bound('!');\n     * // => 'hiya fred!'\n     *\n     * // Bound with placeholders.\n     * var bound = _.bindKey(object, 'greet', _, '!');\n     * bound('hi');\n     * // => 'hiya fred!'\n     */\n    var bindKey = baseRest(function(object, key, partials) {\n      var bitmask = WRAP_BIND_FLAG | WRAP_BIND_KEY_FLAG;\n      if (partials.length) {\n        var holders = replaceHolders(partials, getHolder(bindKey));\n        bitmask |= WRAP_PARTIAL_FLAG;\n      }\n      return createWrap(key, bitmask, object, partials, holders);\n    });\n\n    /**\n     * Creates a function that accepts arguments of `func` and either invokes\n     * `func` returning its result, if at least `arity` number of arguments have\n     * been provided, or returns a function that accepts the remaining `func`\n     * arguments, and so on. The arity of `func` may be specified if `func.length`\n     * is not sufficient.\n     *\n     * The `_.curry.placeholder` value, which defaults to `_` in monolithic builds,\n     * may be used as a placeholder for provided arguments.\n     *\n     * **Note:** This method doesn't set the \"length\" property of curried functions.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @category Function\n     * @param {Function} func The function to curry.\n     * @param {number} [arity=func.length] The arity of `func`.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Function} Returns the new curried function.\n     * @example\n     *\n     * var abc = function(a, b, c) {\n     *   return [a, b, c];\n     * };\n     *\n     * var curried = _.curry(abc);\n     *\n     * curried(1)(2)(3);\n     * // => [1, 2, 3]\n     *\n     * curried(1, 2)(3);\n     * // => [1, 2, 3]\n     *\n     * curried(1, 2, 3);\n     * // => [1, 2, 3]\n     *\n     * // Curried with placeholders.\n     * curried(1)(_, 3)(2);\n     * // => [1, 2, 3]\n     */\n    function curry(func, arity, guard) {\n      arity = guard ? undefined : arity;\n      var result = createWrap(func, WRAP_CURRY_FLAG, undefined, undefined, undefined, undefined, undefined, arity);\n      result.placeholder = curry.placeholder;\n      return result;\n    }\n\n    /**\n     * This method is like `_.curry` except that arguments are applied to `func`\n     * in the manner of `_.partialRight` instead of `_.partial`.\n     *\n     * The `_.curryRight.placeholder` value, which defaults to `_` in monolithic\n     * builds, may be used as a placeholder for provided arguments.\n     *\n     * **Note:** This method doesn't set the \"length\" property of curried functions.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Function\n     * @param {Function} func The function to curry.\n     * @param {number} [arity=func.length] The arity of `func`.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Function} Returns the new curried function.\n     * @example\n     *\n     * var abc = function(a, b, c) {\n     *   return [a, b, c];\n     * };\n     *\n     * var curried = _.curryRight(abc);\n     *\n     * curried(3)(2)(1);\n     * // => [1, 2, 3]\n     *\n     * curried(2, 3)(1);\n     * // => [1, 2, 3]\n     *\n     * curried(1, 2, 3);\n     * // => [1, 2, 3]\n     *\n     * // Curried with placeholders.\n     * curried(3)(1, _)(2);\n     * // => [1, 2, 3]\n     */\n    function curryRight(func, arity, guard) {\n      arity = guard ? undefined : arity;\n      var result = createWrap(func, WRAP_CURRY_RIGHT_FLAG, undefined, undefined, undefined, undefined, undefined, arity);\n      result.placeholder = curryRight.placeholder;\n      return result;\n    }\n\n    /**\n     * Creates a debounced function that delays invoking `func` until after `wait`\n     * milliseconds have elapsed since the last time the debounced function was\n     * invoked. The debounced function comes with a `cancel` method to cancel\n     * delayed `func` invocations and a `flush` method to immediately invoke them.\n     * Provide `options` to indicate whether `func` should be invoked on the\n     * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n     * with the last arguments provided to the debounced function. Subsequent\n     * calls to the debounced function return the result of the last `func`\n     * invocation.\n     *\n     * **Note:** If `leading` and `trailing` options are `true`, `func` is\n     * invoked on the trailing edge of the timeout only if the debounced function\n     * is invoked more than once during the `wait` timeout.\n     *\n     * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n     * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n     *\n     * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n     * for details over the differences between `_.debounce` and `_.throttle`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Function\n     * @param {Function} func The function to debounce.\n     * @param {number} [wait=0] The number of milliseconds to delay.\n     * @param {Object} [options={}] The options object.\n     * @param {boolean} [options.leading=false]\n     *  Specify invoking on the leading edge of the timeout.\n     * @param {number} [options.maxWait]\n     *  The maximum time `func` is allowed to be delayed before it's invoked.\n     * @param {boolean} [options.trailing=true]\n     *  Specify invoking on the trailing edge of the timeout.\n     * @returns {Function} Returns the new debounced function.\n     * @example\n     *\n     * // Avoid costly calculations while the window size is in flux.\n     * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n     *\n     * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n     * jQuery(element).on('click', _.debounce(sendMail, 300, {\n     *   'leading': true,\n     *   'trailing': false\n     * }));\n     *\n     * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n     * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n     * var source = new EventSource('/stream');\n     * jQuery(source).on('message', debounced);\n     *\n     * // Cancel the trailing debounced invocation.\n     * jQuery(window).on('popstate', debounced.cancel);\n     */\n    function debounce(func, wait, options) {\n      var lastArgs,\n          lastThis,\n          maxWait,\n          result,\n          timerId,\n          lastCallTime,\n          lastInvokeTime = 0,\n          leading = false,\n          maxing = false,\n          trailing = true;\n\n      if (typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      wait = toNumber(wait) || 0;\n      if (isObject(options)) {\n        leading = !!options.leading;\n        maxing = 'maxWait' in options;\n        maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n        trailing = 'trailing' in options ? !!options.trailing : trailing;\n      }\n\n      function invokeFunc(time) {\n        var args = lastArgs,\n            thisArg = lastThis;\n\n        lastArgs = lastThis = undefined;\n        lastInvokeTime = time;\n        result = func.apply(thisArg, args);\n        return result;\n      }\n\n      function leadingEdge(time) {\n        // Reset any `maxWait` timer.\n        lastInvokeTime = time;\n        // Start the timer for the trailing edge.\n        timerId = setTimeout(timerExpired, wait);\n        // Invoke the leading edge.\n        return leading ? invokeFunc(time) : result;\n      }\n\n      function remainingWait(time) {\n        var timeSinceLastCall = time - lastCallTime,\n            timeSinceLastInvoke = time - lastInvokeTime,\n            timeWaiting = wait - timeSinceLastCall;\n\n        return maxing\n          ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n          : timeWaiting;\n      }\n\n      function shouldInvoke(time) {\n        var timeSinceLastCall = time - lastCallTime,\n            timeSinceLastInvoke = time - lastInvokeTime;\n\n        // Either this is the first call, activity has stopped and we're at the\n        // trailing edge, the system time has gone backwards and we're treating\n        // it as the trailing edge, or we've hit the `maxWait` limit.\n        return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n          (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n      }\n\n      function timerExpired() {\n        var time = now();\n        if (shouldInvoke(time)) {\n          return trailingEdge(time);\n        }\n        // Restart the timer.\n        timerId = setTimeout(timerExpired, remainingWait(time));\n      }\n\n      function trailingEdge(time) {\n        timerId = undefined;\n\n        // Only invoke if we have `lastArgs` which means `func` has been\n        // debounced at least once.\n        if (trailing && lastArgs) {\n          return invokeFunc(time);\n        }\n        lastArgs = lastThis = undefined;\n        return result;\n      }\n\n      function cancel() {\n        if (timerId !== undefined) {\n          clearTimeout(timerId);\n        }\n        lastInvokeTime = 0;\n        lastArgs = lastCallTime = lastThis = timerId = undefined;\n      }\n\n      function flush() {\n        return timerId === undefined ? result : trailingEdge(now());\n      }\n\n      function debounced() {\n        var time = now(),\n            isInvoking = shouldInvoke(time);\n\n        lastArgs = arguments;\n        lastThis = this;\n        lastCallTime = time;\n\n        if (isInvoking) {\n          if (timerId === undefined) {\n            return leadingEdge(lastCallTime);\n          }\n          if (maxing) {\n            // Handle invocations in a tight loop.\n            clearTimeout(timerId);\n            timerId = setTimeout(timerExpired, wait);\n            return invokeFunc(lastCallTime);\n          }\n        }\n        if (timerId === undefined) {\n          timerId = setTimeout(timerExpired, wait);\n        }\n        return result;\n      }\n      debounced.cancel = cancel;\n      debounced.flush = flush;\n      return debounced;\n    }\n\n    /**\n     * Defers invoking the `func` until the current call stack has cleared. Any\n     * additional arguments are provided to `func` when it's invoked.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Function\n     * @param {Function} func The function to defer.\n     * @param {...*} [args] The arguments to invoke `func` with.\n     * @returns {number} Returns the timer id.\n     * @example\n     *\n     * _.defer(function(text) {\n     *   console.log(text);\n     * }, 'deferred');\n     * // => Logs 'deferred' after one millisecond.\n     */\n    var defer = baseRest(function(func, args) {\n      return baseDelay(func, 1, args);\n    });\n\n    /**\n     * Invokes `func` after `wait` milliseconds. Any additional arguments are\n     * provided to `func` when it's invoked.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Function\n     * @param {Function} func The function to delay.\n     * @param {number} wait The number of milliseconds to delay invocation.\n     * @param {...*} [args] The arguments to invoke `func` with.\n     * @returns {number} Returns the timer id.\n     * @example\n     *\n     * _.delay(function(text) {\n     *   console.log(text);\n     * }, 1000, 'later');\n     * // => Logs 'later' after one second.\n     */\n    var delay = baseRest(function(func, wait, args) {\n      return baseDelay(func, toNumber(wait) || 0, args);\n    });\n\n    /**\n     * Creates a function that invokes `func` with arguments reversed.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Function\n     * @param {Function} func The function to flip arguments for.\n     * @returns {Function} Returns the new flipped function.\n     * @example\n     *\n     * var flipped = _.flip(function() {\n     *   return _.toArray(arguments);\n     * });\n     *\n     * flipped('a', 'b', 'c', 'd');\n     * // => ['d', 'c', 'b', 'a']\n     */\n    function flip(func) {\n      return createWrap(func, WRAP_FLIP_FLAG);\n    }\n\n    /**\n     * Creates a function that memoizes the result of `func`. If `resolver` is\n     * provided, it determines the cache key for storing the result based on the\n     * arguments provided to the memoized function. By default, the first argument\n     * provided to the memoized function is used as the map cache key. The `func`\n     * is invoked with the `this` binding of the memoized function.\n     *\n     * **Note:** The cache is exposed as the `cache` property on the memoized\n     * function. Its creation may be customized by replacing the `_.memoize.Cache`\n     * constructor with one whose instances implement the\n     * [`Map`](http://ecma-international.org/ecma-262/7.0/#sec-properties-of-the-map-prototype-object)\n     * method interface of `clear`, `delete`, `get`, `has`, and `set`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Function\n     * @param {Function} func The function to have its output memoized.\n     * @param {Function} [resolver] The function to resolve the cache key.\n     * @returns {Function} Returns the new memoized function.\n     * @example\n     *\n     * var object = { 'a': 1, 'b': 2 };\n     * var other = { 'c': 3, 'd': 4 };\n     *\n     * var values = _.memoize(_.values);\n     * values(object);\n     * // => [1, 2]\n     *\n     * values(other);\n     * // => [3, 4]\n     *\n     * object.a = 2;\n     * values(object);\n     * // => [1, 2]\n     *\n     * // Modify the result cache.\n     * values.cache.set(object, ['a', 'b']);\n     * values(object);\n     * // => ['a', 'b']\n     *\n     * // Replace `_.memoize.Cache`.\n     * _.memoize.Cache = WeakMap;\n     */\n    function memoize(func, resolver) {\n      if (typeof func != 'function' || (resolver != null && typeof resolver != 'function')) {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      var memoized = function() {\n        var args = arguments,\n            key = resolver ? resolver.apply(this, args) : args[0],\n            cache = memoized.cache;\n\n        if (cache.has(key)) {\n          return cache.get(key);\n        }\n        var result = func.apply(this, args);\n        memoized.cache = cache.set(key, result) || cache;\n        return result;\n      };\n      memoized.cache = new (memoize.Cache || MapCache);\n      return memoized;\n    }\n\n    // Expose `MapCache`.\n    memoize.Cache = MapCache;\n\n    /**\n     * Creates a function that negates the result of the predicate `func`. The\n     * `func` predicate is invoked with the `this` binding and arguments of the\n     * created function.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Function\n     * @param {Function} predicate The predicate to negate.\n     * @returns {Function} Returns the new negated function.\n     * @example\n     *\n     * function isEven(n) {\n     *   return n % 2 == 0;\n     * }\n     *\n     * _.filter([1, 2, 3, 4, 5, 6], _.negate(isEven));\n     * // => [1, 3, 5]\n     */\n    function negate(predicate) {\n      if (typeof predicate != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      return function() {\n        var args = arguments;\n        switch (args.length) {\n          case 0: return !predicate.call(this);\n          case 1: return !predicate.call(this, args[0]);\n          case 2: return !predicate.call(this, args[0], args[1]);\n          case 3: return !predicate.call(this, args[0], args[1], args[2]);\n        }\n        return !predicate.apply(this, args);\n      };\n    }\n\n    /**\n     * Creates a function that is restricted to invoking `func` once. Repeat calls\n     * to the function return the value of the first invocation. The `func` is\n     * invoked with the `this` binding and arguments of the created function.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Function\n     * @param {Function} func The function to restrict.\n     * @returns {Function} Returns the new restricted function.\n     * @example\n     *\n     * var initialize = _.once(createApplication);\n     * initialize();\n     * initialize();\n     * // => `createApplication` is invoked once\n     */\n    function once(func) {\n      return before(2, func);\n    }\n\n    /**\n     * Creates a function that invokes `func` with its arguments transformed.\n     *\n     * @static\n     * @since 4.0.0\n     * @memberOf _\n     * @category Function\n     * @param {Function} func The function to wrap.\n     * @param {...(Function|Function[])} [transforms=[_.identity]]\n     *  The argument transforms.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * function doubled(n) {\n     *   return n * 2;\n     * }\n     *\n     * function square(n) {\n     *   return n * n;\n     * }\n     *\n     * var func = _.overArgs(function(x, y) {\n     *   return [x, y];\n     * }, [square, doubled]);\n     *\n     * func(9, 3);\n     * // => [81, 6]\n     *\n     * func(10, 5);\n     * // => [100, 10]\n     */\n    var overArgs = castRest(function(func, transforms) {\n      transforms = (transforms.length == 1 && isArray(transforms[0]))\n        ? arrayMap(transforms[0], baseUnary(getIteratee()))\n        : arrayMap(baseFlatten(transforms, 1), baseUnary(getIteratee()));\n\n      var funcsLength = transforms.length;\n      return baseRest(function(args) {\n        var index = -1,\n            length = nativeMin(args.length, funcsLength);\n\n        while (++index < length) {\n          args[index] = transforms[index].call(this, args[index]);\n        }\n        return apply(func, this, args);\n      });\n    });\n\n    /**\n     * Creates a function that invokes `func` with `partials` prepended to the\n     * arguments it receives. This method is like `_.bind` except it does **not**\n     * alter the `this` binding.\n     *\n     * The `_.partial.placeholder` value, which defaults to `_` in monolithic\n     * builds, may be used as a placeholder for partially applied arguments.\n     *\n     * **Note:** This method doesn't set the \"length\" property of partially\n     * applied functions.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.2.0\n     * @category Function\n     * @param {Function} func The function to partially apply arguments to.\n     * @param {...*} [partials] The arguments to be partially applied.\n     * @returns {Function} Returns the new partially applied function.\n     * @example\n     *\n     * function greet(greeting, name) {\n     *   return greeting + ' ' + name;\n     * }\n     *\n     * var sayHelloTo = _.partial(greet, 'hello');\n     * sayHelloTo('fred');\n     * // => 'hello fred'\n     *\n     * // Partially applied with placeholders.\n     * var greetFred = _.partial(greet, _, 'fred');\n     * greetFred('hi');\n     * // => 'hi fred'\n     */\n    var partial = baseRest(function(func, partials) {\n      var holders = replaceHolders(partials, getHolder(partial));\n      return createWrap(func, WRAP_PARTIAL_FLAG, undefined, partials, holders);\n    });\n\n    /**\n     * This method is like `_.partial` except that partially applied arguments\n     * are appended to the arguments it receives.\n     *\n     * The `_.partialRight.placeholder` value, which defaults to `_` in monolithic\n     * builds, may be used as a placeholder for partially applied arguments.\n     *\n     * **Note:** This method doesn't set the \"length\" property of partially\n     * applied functions.\n     *\n     * @static\n     * @memberOf _\n     * @since 1.0.0\n     * @category Function\n     * @param {Function} func The function to partially apply arguments to.\n     * @param {...*} [partials] The arguments to be partially applied.\n     * @returns {Function} Returns the new partially applied function.\n     * @example\n     *\n     * function greet(greeting, name) {\n     *   return greeting + ' ' + name;\n     * }\n     *\n     * var greetFred = _.partialRight(greet, 'fred');\n     * greetFred('hi');\n     * // => 'hi fred'\n     *\n     * // Partially applied with placeholders.\n     * var sayHelloTo = _.partialRight(greet, 'hello', _);\n     * sayHelloTo('fred');\n     * // => 'hello fred'\n     */\n    var partialRight = baseRest(function(func, partials) {\n      var holders = replaceHolders(partials, getHolder(partialRight));\n      return createWrap(func, WRAP_PARTIAL_RIGHT_FLAG, undefined, partials, holders);\n    });\n\n    /**\n     * Creates a function that invokes `func` with arguments arranged according\n     * to the specified `indexes` where the argument value at the first index is\n     * provided as the first argument, the argument value at the second index is\n     * provided as the second argument, and so on.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Function\n     * @param {Function} func The function to rearrange arguments for.\n     * @param {...(number|number[])} indexes The arranged argument indexes.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var rearged = _.rearg(function(a, b, c) {\n     *   return [a, b, c];\n     * }, [2, 0, 1]);\n     *\n     * rearged('b', 'c', 'a')\n     * // => ['a', 'b', 'c']\n     */\n    var rearg = flatRest(function(func, indexes) {\n      return createWrap(func, WRAP_REARG_FLAG, undefined, undefined, undefined, indexes);\n    });\n\n    /**\n     * Creates a function that invokes `func` with the `this` binding of the\n     * created function and arguments from `start` and beyond provided as\n     * an array.\n     *\n     * **Note:** This method is based on the\n     * [rest parameter](https://mdn.io/rest_parameters).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Function\n     * @param {Function} func The function to apply a rest parameter to.\n     * @param {number} [start=func.length-1] The start position of the rest parameter.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var say = _.rest(function(what, names) {\n     *   return what + ' ' + _.initial(names).join(', ') +\n     *     (_.size(names) > 1 ? ', & ' : '') + _.last(names);\n     * });\n     *\n     * say('hello', 'fred', 'barney', 'pebbles');\n     * // => 'hello fred, barney, & pebbles'\n     */\n    function rest(func, start) {\n      if (typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      start = start === undefined ? start : toInteger(start);\n      return baseRest(func, start);\n    }\n\n    /**\n     * Creates a function that invokes `func` with the `this` binding of the\n     * create function and an array of arguments much like\n     * [`Function#apply`](http://www.ecma-international.org/ecma-262/7.0/#sec-function.prototype.apply).\n     *\n     * **Note:** This method is based on the\n     * [spread operator](https://mdn.io/spread_operator).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.2.0\n     * @category Function\n     * @param {Function} func The function to spread arguments over.\n     * @param {number} [start=0] The start position of the spread.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var say = _.spread(function(who, what) {\n     *   return who + ' says ' + what;\n     * });\n     *\n     * say(['fred', 'hello']);\n     * // => 'fred says hello'\n     *\n     * var numbers = Promise.all([\n     *   Promise.resolve(40),\n     *   Promise.resolve(36)\n     * ]);\n     *\n     * numbers.then(_.spread(function(x, y) {\n     *   return x + y;\n     * }));\n     * // => a Promise of 76\n     */\n    function spread(func, start) {\n      if (typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      start = start == null ? 0 : nativeMax(toInteger(start), 0);\n      return baseRest(function(args) {\n        var array = args[start],\n            otherArgs = castSlice(args, 0, start);\n\n        if (array) {\n          arrayPush(otherArgs, array);\n        }\n        return apply(func, this, otherArgs);\n      });\n    }\n\n    /**\n     * Creates a throttled function that only invokes `func` at most once per\n     * every `wait` milliseconds. The throttled function comes with a `cancel`\n     * method to cancel delayed `func` invocations and a `flush` method to\n     * immediately invoke them. Provide `options` to indicate whether `func`\n     * should be invoked on the leading and/or trailing edge of the `wait`\n     * timeout. The `func` is invoked with the last arguments provided to the\n     * throttled function. Subsequent calls to the throttled function return the\n     * result of the last `func` invocation.\n     *\n     * **Note:** If `leading` and `trailing` options are `true`, `func` is\n     * invoked on the trailing edge of the timeout only if the throttled function\n     * is invoked more than once during the `wait` timeout.\n     *\n     * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n     * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n     *\n     * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n     * for details over the differences between `_.throttle` and `_.debounce`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Function\n     * @param {Function} func The function to throttle.\n     * @param {number} [wait=0] The number of milliseconds to throttle invocations to.\n     * @param {Object} [options={}] The options object.\n     * @param {boolean} [options.leading=true]\n     *  Specify invoking on the leading edge of the timeout.\n     * @param {boolean} [options.trailing=true]\n     *  Specify invoking on the trailing edge of the timeout.\n     * @returns {Function} Returns the new throttled function.\n     * @example\n     *\n     * // Avoid excessively updating the position while scrolling.\n     * jQuery(window).on('scroll', _.throttle(updatePosition, 100));\n     *\n     * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.\n     * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });\n     * jQuery(element).on('click', throttled);\n     *\n     * // Cancel the trailing throttled invocation.\n     * jQuery(window).on('popstate', throttled.cancel);\n     */\n    function throttle(func, wait, options) {\n      var leading = true,\n          trailing = true;\n\n      if (typeof func != 'function') {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      if (isObject(options)) {\n        leading = 'leading' in options ? !!options.leading : leading;\n        trailing = 'trailing' in options ? !!options.trailing : trailing;\n      }\n      return debounce(func, wait, {\n        'leading': leading,\n        'maxWait': wait,\n        'trailing': trailing\n      });\n    }\n\n    /**\n     * Creates a function that accepts up to one argument, ignoring any\n     * additional arguments.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Function\n     * @param {Function} func The function to cap arguments for.\n     * @returns {Function} Returns the new capped function.\n     * @example\n     *\n     * _.map(['6', '8', '10'], _.unary(parseInt));\n     * // => [6, 8, 10]\n     */\n    function unary(func) {\n      return ary(func, 1);\n    }\n\n    /**\n     * Creates a function that provides `value` to `wrapper` as its first\n     * argument. Any additional arguments provided to the function are appended\n     * to those provided to the `wrapper`. The wrapper is invoked with the `this`\n     * binding of the created function.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Function\n     * @param {*} value The value to wrap.\n     * @param {Function} [wrapper=identity] The wrapper function.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var p = _.wrap(_.escape, function(func, text) {\n     *   return '<p>' + func(text) + '</p>';\n     * });\n     *\n     * p('fred, barney, & pebbles');\n     * // => '<p>fred, barney, &amp; pebbles</p>'\n     */\n    function wrap(value, wrapper) {\n      return partial(castFunction(wrapper), value);\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Casts `value` as an array if it's not one.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.4.0\n     * @category Lang\n     * @param {*} value The value to inspect.\n     * @returns {Array} Returns the cast array.\n     * @example\n     *\n     * _.castArray(1);\n     * // => [1]\n     *\n     * _.castArray({ 'a': 1 });\n     * // => [{ 'a': 1 }]\n     *\n     * _.castArray('abc');\n     * // => ['abc']\n     *\n     * _.castArray(null);\n     * // => [null]\n     *\n     * _.castArray(undefined);\n     * // => [undefined]\n     *\n     * _.castArray();\n     * // => []\n     *\n     * var array = [1, 2, 3];\n     * console.log(_.castArray(array) === array);\n     * // => true\n     */\n    function castArray() {\n      if (!arguments.length) {\n        return [];\n      }\n      var value = arguments[0];\n      return isArray(value) ? value : [value];\n    }\n\n    /**\n     * Creates a shallow clone of `value`.\n     *\n     * **Note:** This method is loosely based on the\n     * [structured clone algorithm](https://mdn.io/Structured_clone_algorithm)\n     * and supports cloning arrays, array buffers, booleans, date objects, maps,\n     * numbers, `Object` objects, regexes, sets, strings, symbols, and typed\n     * arrays. The own enumerable properties of `arguments` objects are cloned\n     * as plain objects. An empty object is returned for uncloneable values such\n     * as error objects, functions, DOM nodes, and WeakMaps.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to clone.\n     * @returns {*} Returns the cloned value.\n     * @see _.cloneDeep\n     * @example\n     *\n     * var objects = [{ 'a': 1 }, { 'b': 2 }];\n     *\n     * var shallow = _.clone(objects);\n     * console.log(shallow[0] === objects[0]);\n     * // => true\n     */\n    function clone(value) {\n      return baseClone(value, CLONE_SYMBOLS_FLAG);\n    }\n\n    /**\n     * This method is like `_.clone` except that it accepts `customizer` which\n     * is invoked to produce the cloned value. If `customizer` returns `undefined`,\n     * cloning is handled by the method instead. The `customizer` is invoked with\n     * up to four arguments; (value [, index|key, object, stack]).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to clone.\n     * @param {Function} [customizer] The function to customize cloning.\n     * @returns {*} Returns the cloned value.\n     * @see _.cloneDeepWith\n     * @example\n     *\n     * function customizer(value) {\n     *   if (_.isElement(value)) {\n     *     return value.cloneNode(false);\n     *   }\n     * }\n     *\n     * var el = _.cloneWith(document.body, customizer);\n     *\n     * console.log(el === document.body);\n     * // => false\n     * console.log(el.nodeName);\n     * // => 'BODY'\n     * console.log(el.childNodes.length);\n     * // => 0\n     */\n    function cloneWith(value, customizer) {\n      customizer = typeof customizer == 'function' ? customizer : undefined;\n      return baseClone(value, CLONE_SYMBOLS_FLAG, customizer);\n    }\n\n    /**\n     * This method is like `_.clone` except that it recursively clones `value`.\n     *\n     * @static\n     * @memberOf _\n     * @since 1.0.0\n     * @category Lang\n     * @param {*} value The value to recursively clone.\n     * @returns {*} Returns the deep cloned value.\n     * @see _.clone\n     * @example\n     *\n     * var objects = [{ 'a': 1 }, { 'b': 2 }];\n     *\n     * var deep = _.cloneDeep(objects);\n     * console.log(deep[0] === objects[0]);\n     * // => false\n     */\n    function cloneDeep(value) {\n      return baseClone(value, CLONE_DEEP_FLAG | CLONE_SYMBOLS_FLAG);\n    }\n\n    /**\n     * This method is like `_.cloneWith` except that it recursively clones `value`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to recursively clone.\n     * @param {Function} [customizer] The function to customize cloning.\n     * @returns {*} Returns the deep cloned value.\n     * @see _.cloneWith\n     * @example\n     *\n     * function customizer(value) {\n     *   if (_.isElement(value)) {\n     *     return value.cloneNode(true);\n     *   }\n     * }\n     *\n     * var el = _.cloneDeepWith(document.body, customizer);\n     *\n     * console.log(el === document.body);\n     * // => false\n     * console.log(el.nodeName);\n     * // => 'BODY'\n     * console.log(el.childNodes.length);\n     * // => 20\n     */\n    function cloneDeepWith(value, customizer) {\n      customizer = typeof customizer == 'function' ? customizer : undefined;\n      return baseClone(value, CLONE_DEEP_FLAG | CLONE_SYMBOLS_FLAG, customizer);\n    }\n\n    /**\n     * Checks if `object` conforms to `source` by invoking the predicate\n     * properties of `source` with the corresponding property values of `object`.\n     *\n     * **Note:** This method is equivalent to `_.conforms` when `source` is\n     * partially applied.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.14.0\n     * @category Lang\n     * @param {Object} object The object to inspect.\n     * @param {Object} source The object of property predicates to conform to.\n     * @returns {boolean} Returns `true` if `object` conforms, else `false`.\n     * @example\n     *\n     * var object = { 'a': 1, 'b': 2 };\n     *\n     * _.conformsTo(object, { 'b': function(n) { return n > 1; } });\n     * // => true\n     *\n     * _.conformsTo(object, { 'b': function(n) { return n > 2; } });\n     * // => false\n     */\n    function conformsTo(object, source) {\n      return source == null || baseConformsTo(object, source, keys(source));\n    }\n\n    /**\n     * Performs a\n     * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n     * comparison between two values to determine if they are equivalent.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n     * @example\n     *\n     * var object = { 'a': 1 };\n     * var other = { 'a': 1 };\n     *\n     * _.eq(object, object);\n     * // => true\n     *\n     * _.eq(object, other);\n     * // => false\n     *\n     * _.eq('a', 'a');\n     * // => true\n     *\n     * _.eq('a', Object('a'));\n     * // => false\n     *\n     * _.eq(NaN, NaN);\n     * // => true\n     */\n    function eq(value, other) {\n      return value === other || (value !== value && other !== other);\n    }\n\n    /**\n     * Checks if `value` is greater than `other`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.9.0\n     * @category Lang\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @returns {boolean} Returns `true` if `value` is greater than `other`,\n     *  else `false`.\n     * @see _.lt\n     * @example\n     *\n     * _.gt(3, 1);\n     * // => true\n     *\n     * _.gt(3, 3);\n     * // => false\n     *\n     * _.gt(1, 3);\n     * // => false\n     */\n    var gt = createRelationalOperation(baseGt);\n\n    /**\n     * Checks if `value` is greater than or equal to `other`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.9.0\n     * @category Lang\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @returns {boolean} Returns `true` if `value` is greater than or equal to\n     *  `other`, else `false`.\n     * @see _.lte\n     * @example\n     *\n     * _.gte(3, 1);\n     * // => true\n     *\n     * _.gte(3, 3);\n     * // => true\n     *\n     * _.gte(1, 3);\n     * // => false\n     */\n    var gte = createRelationalOperation(function(value, other) {\n      return value >= other;\n    });\n\n    /**\n     * Checks if `value` is likely an `arguments` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n     *  else `false`.\n     * @example\n     *\n     * _.isArguments(function() { return arguments; }());\n     * // => true\n     *\n     * _.isArguments([1, 2, 3]);\n     * // => false\n     */\n    var isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n      return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n        !propertyIsEnumerable.call(value, 'callee');\n    };\n\n    /**\n     * Checks if `value` is classified as an `Array` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n     * @example\n     *\n     * _.isArray([1, 2, 3]);\n     * // => true\n     *\n     * _.isArray(document.body.children);\n     * // => false\n     *\n     * _.isArray('abc');\n     * // => false\n     *\n     * _.isArray(_.noop);\n     * // => false\n     */\n    var isArray = Array.isArray;\n\n    /**\n     * Checks if `value` is classified as an `ArrayBuffer` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.3.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is an array buffer, else `false`.\n     * @example\n     *\n     * _.isArrayBuffer(new ArrayBuffer(2));\n     * // => true\n     *\n     * _.isArrayBuffer(new Array(2));\n     * // => false\n     */\n    var isArrayBuffer = nodeIsArrayBuffer ? baseUnary(nodeIsArrayBuffer) : baseIsArrayBuffer;\n\n    /**\n     * Checks if `value` is array-like. A value is considered array-like if it's\n     * not a function and has a `value.length` that's an integer greater than or\n     * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n     * @example\n     *\n     * _.isArrayLike([1, 2, 3]);\n     * // => true\n     *\n     * _.isArrayLike(document.body.children);\n     * // => true\n     *\n     * _.isArrayLike('abc');\n     * // => true\n     *\n     * _.isArrayLike(_.noop);\n     * // => false\n     */\n    function isArrayLike(value) {\n      return value != null && isLength(value.length) && !isFunction(value);\n    }\n\n    /**\n     * This method is like `_.isArrayLike` except that it also checks if `value`\n     * is an object.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is an array-like object,\n     *  else `false`.\n     * @example\n     *\n     * _.isArrayLikeObject([1, 2, 3]);\n     * // => true\n     *\n     * _.isArrayLikeObject(document.body.children);\n     * // => true\n     *\n     * _.isArrayLikeObject('abc');\n     * // => false\n     *\n     * _.isArrayLikeObject(_.noop);\n     * // => false\n     */\n    function isArrayLikeObject(value) {\n      return isObjectLike(value) && isArrayLike(value);\n    }\n\n    /**\n     * Checks if `value` is classified as a boolean primitive or object.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a boolean, else `false`.\n     * @example\n     *\n     * _.isBoolean(false);\n     * // => true\n     *\n     * _.isBoolean(null);\n     * // => false\n     */\n    function isBoolean(value) {\n      return value === true || value === false ||\n        (isObjectLike(value) && baseGetTag(value) == boolTag);\n    }\n\n    /**\n     * Checks if `value` is a buffer.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.3.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n     * @example\n     *\n     * _.isBuffer(new Buffer(2));\n     * // => true\n     *\n     * _.isBuffer(new Uint8Array(2));\n     * // => false\n     */\n    var isBuffer = nativeIsBuffer || stubFalse;\n\n    /**\n     * Checks if `value` is classified as a `Date` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a date object, else `false`.\n     * @example\n     *\n     * _.isDate(new Date);\n     * // => true\n     *\n     * _.isDate('Mon April 23 2012');\n     * // => false\n     */\n    var isDate = nodeIsDate ? baseUnary(nodeIsDate) : baseIsDate;\n\n    /**\n     * Checks if `value` is likely a DOM element.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a DOM element, else `false`.\n     * @example\n     *\n     * _.isElement(document.body);\n     * // => true\n     *\n     * _.isElement('<body>');\n     * // => false\n     */\n    function isElement(value) {\n      return isObjectLike(value) && value.nodeType === 1 && !isPlainObject(value);\n    }\n\n    /**\n     * Checks if `value` is an empty object, collection, map, or set.\n     *\n     * Objects are considered empty if they have no own enumerable string keyed\n     * properties.\n     *\n     * Array-like values such as `arguments` objects, arrays, buffers, strings, or\n     * jQuery-like collections are considered empty if they have a `length` of `0`.\n     * Similarly, maps and sets are considered empty if they have a `size` of `0`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is empty, else `false`.\n     * @example\n     *\n     * _.isEmpty(null);\n     * // => true\n     *\n     * _.isEmpty(true);\n     * // => true\n     *\n     * _.isEmpty(1);\n     * // => true\n     *\n     * _.isEmpty([1, 2, 3]);\n     * // => false\n     *\n     * _.isEmpty({ 'a': 1 });\n     * // => false\n     */\n    function isEmpty(value) {\n      if (value == null) {\n        return true;\n      }\n      if (isArrayLike(value) &&\n          (isArray(value) || typeof value == 'string' || typeof value.splice == 'function' ||\n            isBuffer(value) || isTypedArray(value) || isArguments(value))) {\n        return !value.length;\n      }\n      var tag = getTag(value);\n      if (tag == mapTag || tag == setTag) {\n        return !value.size;\n      }\n      if (isPrototype(value)) {\n        return !baseKeys(value).length;\n      }\n      for (var key in value) {\n        if (hasOwnProperty.call(value, key)) {\n          return false;\n        }\n      }\n      return true;\n    }\n\n    /**\n     * Performs a deep comparison between two values to determine if they are\n     * equivalent.\n     *\n     * **Note:** This method supports comparing arrays, array buffers, booleans,\n     * date objects, error objects, maps, numbers, `Object` objects, regexes,\n     * sets, strings, symbols, and typed arrays. `Object` objects are compared\n     * by their own, not inherited, enumerable properties. Functions and DOM\n     * nodes are compared by strict equality, i.e. `===`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n     * @example\n     *\n     * var object = { 'a': 1 };\n     * var other = { 'a': 1 };\n     *\n     * _.isEqual(object, other);\n     * // => true\n     *\n     * object === other;\n     * // => false\n     */\n    function isEqual(value, other) {\n      return baseIsEqual(value, other);\n    }\n\n    /**\n     * This method is like `_.isEqual` except that it accepts `customizer` which\n     * is invoked to compare values. If `customizer` returns `undefined`, comparisons\n     * are handled by the method instead. The `customizer` is invoked with up to\n     * six arguments: (objValue, othValue [, index|key, object, other, stack]).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @param {Function} [customizer] The function to customize comparisons.\n     * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n     * @example\n     *\n     * function isGreeting(value) {\n     *   return /^h(?:i|ello)$/.test(value);\n     * }\n     *\n     * function customizer(objValue, othValue) {\n     *   if (isGreeting(objValue) && isGreeting(othValue)) {\n     *     return true;\n     *   }\n     * }\n     *\n     * var array = ['hello', 'goodbye'];\n     * var other = ['hi', 'goodbye'];\n     *\n     * _.isEqualWith(array, other, customizer);\n     * // => true\n     */\n    function isEqualWith(value, other, customizer) {\n      customizer = typeof customizer == 'function' ? customizer : undefined;\n      var result = customizer ? customizer(value, other) : undefined;\n      return result === undefined ? baseIsEqual(value, other, undefined, customizer) : !!result;\n    }\n\n    /**\n     * Checks if `value` is an `Error`, `EvalError`, `RangeError`, `ReferenceError`,\n     * `SyntaxError`, `TypeError`, or `URIError` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is an error object, else `false`.\n     * @example\n     *\n     * _.isError(new Error);\n     * // => true\n     *\n     * _.isError(Error);\n     * // => false\n     */\n    function isError(value) {\n      if (!isObjectLike(value)) {\n        return false;\n      }\n      var tag = baseGetTag(value);\n      return tag == errorTag || tag == domExcTag ||\n        (typeof value.message == 'string' && typeof value.name == 'string' && !isPlainObject(value));\n    }\n\n    /**\n     * Checks if `value` is a finite primitive number.\n     *\n     * **Note:** This method is based on\n     * [`Number.isFinite`](https://mdn.io/Number/isFinite).\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a finite number, else `false`.\n     * @example\n     *\n     * _.isFinite(3);\n     * // => true\n     *\n     * _.isFinite(Number.MIN_VALUE);\n     * // => true\n     *\n     * _.isFinite(Infinity);\n     * // => false\n     *\n     * _.isFinite('3');\n     * // => false\n     */\n    function isFinite(value) {\n      return typeof value == 'number' && nativeIsFinite(value);\n    }\n\n    /**\n     * Checks if `value` is classified as a `Function` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n     * @example\n     *\n     * _.isFunction(_);\n     * // => true\n     *\n     * _.isFunction(/abc/);\n     * // => false\n     */\n    function isFunction(value) {\n      if (!isObject(value)) {\n        return false;\n      }\n      // The use of `Object#toString` avoids issues with the `typeof` operator\n      // in Safari 9 which returns 'object' for typed arrays and other constructors.\n      var tag = baseGetTag(value);\n      return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n    }\n\n    /**\n     * Checks if `value` is an integer.\n     *\n     * **Note:** This method is based on\n     * [`Number.isInteger`](https://mdn.io/Number/isInteger).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is an integer, else `false`.\n     * @example\n     *\n     * _.isInteger(3);\n     * // => true\n     *\n     * _.isInteger(Number.MIN_VALUE);\n     * // => false\n     *\n     * _.isInteger(Infinity);\n     * // => false\n     *\n     * _.isInteger('3');\n     * // => false\n     */\n    function isInteger(value) {\n      return typeof value == 'number' && value == toInteger(value);\n    }\n\n    /**\n     * Checks if `value` is a valid array-like length.\n     *\n     * **Note:** This method is loosely based on\n     * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n     * @example\n     *\n     * _.isLength(3);\n     * // => true\n     *\n     * _.isLength(Number.MIN_VALUE);\n     * // => false\n     *\n     * _.isLength(Infinity);\n     * // => false\n     *\n     * _.isLength('3');\n     * // => false\n     */\n    function isLength(value) {\n      return typeof value == 'number' &&\n        value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n    }\n\n    /**\n     * Checks if `value` is the\n     * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n     * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n     * @example\n     *\n     * _.isObject({});\n     * // => true\n     *\n     * _.isObject([1, 2, 3]);\n     * // => true\n     *\n     * _.isObject(_.noop);\n     * // => true\n     *\n     * _.isObject(null);\n     * // => false\n     */\n    function isObject(value) {\n      var type = typeof value;\n      return value != null && (type == 'object' || type == 'function');\n    }\n\n    /**\n     * Checks if `value` is object-like. A value is object-like if it's not `null`\n     * and has a `typeof` result of \"object\".\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n     * @example\n     *\n     * _.isObjectLike({});\n     * // => true\n     *\n     * _.isObjectLike([1, 2, 3]);\n     * // => true\n     *\n     * _.isObjectLike(_.noop);\n     * // => false\n     *\n     * _.isObjectLike(null);\n     * // => false\n     */\n    function isObjectLike(value) {\n      return value != null && typeof value == 'object';\n    }\n\n    /**\n     * Checks if `value` is classified as a `Map` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.3.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n     * @example\n     *\n     * _.isMap(new Map);\n     * // => true\n     *\n     * _.isMap(new WeakMap);\n     * // => false\n     */\n    var isMap = nodeIsMap ? baseUnary(nodeIsMap) : baseIsMap;\n\n    /**\n     * Performs a partial deep comparison between `object` and `source` to\n     * determine if `object` contains equivalent property values.\n     *\n     * **Note:** This method is equivalent to `_.matches` when `source` is\n     * partially applied.\n     *\n     * Partial comparisons will match empty array and empty object `source`\n     * values against any array or object value, respectively. See `_.isEqual`\n     * for a list of supported value comparisons.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Lang\n     * @param {Object} object The object to inspect.\n     * @param {Object} source The object of property values to match.\n     * @returns {boolean} Returns `true` if `object` is a match, else `false`.\n     * @example\n     *\n     * var object = { 'a': 1, 'b': 2 };\n     *\n     * _.isMatch(object, { 'b': 2 });\n     * // => true\n     *\n     * _.isMatch(object, { 'b': 1 });\n     * // => false\n     */\n    function isMatch(object, source) {\n      return object === source || baseIsMatch(object, source, getMatchData(source));\n    }\n\n    /**\n     * This method is like `_.isMatch` except that it accepts `customizer` which\n     * is invoked to compare values. If `customizer` returns `undefined`, comparisons\n     * are handled by the method instead. The `customizer` is invoked with five\n     * arguments: (objValue, srcValue, index|key, object, source).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {Object} object The object to inspect.\n     * @param {Object} source The object of property values to match.\n     * @param {Function} [customizer] The function to customize comparisons.\n     * @returns {boolean} Returns `true` if `object` is a match, else `false`.\n     * @example\n     *\n     * function isGreeting(value) {\n     *   return /^h(?:i|ello)$/.test(value);\n     * }\n     *\n     * function customizer(objValue, srcValue) {\n     *   if (isGreeting(objValue) && isGreeting(srcValue)) {\n     *     return true;\n     *   }\n     * }\n     *\n     * var object = { 'greeting': 'hello' };\n     * var source = { 'greeting': 'hi' };\n     *\n     * _.isMatchWith(object, source, customizer);\n     * // => true\n     */\n    function isMatchWith(object, source, customizer) {\n      customizer = typeof customizer == 'function' ? customizer : undefined;\n      return baseIsMatch(object, source, getMatchData(source), customizer);\n    }\n\n    /**\n     * Checks if `value` is `NaN`.\n     *\n     * **Note:** This method is based on\n     * [`Number.isNaN`](https://mdn.io/Number/isNaN) and is not the same as\n     * global [`isNaN`](https://mdn.io/isNaN) which returns `true` for\n     * `undefined` and other non-number values.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is `NaN`, else `false`.\n     * @example\n     *\n     * _.isNaN(NaN);\n     * // => true\n     *\n     * _.isNaN(new Number(NaN));\n     * // => true\n     *\n     * isNaN(undefined);\n     * // => true\n     *\n     * _.isNaN(undefined);\n     * // => false\n     */\n    function isNaN(value) {\n      // An `NaN` primitive is the only value that is not equal to itself.\n      // Perform the `toStringTag` check first to avoid errors with some\n      // ActiveX objects in IE.\n      return isNumber(value) && value != +value;\n    }\n\n    /**\n     * Checks if `value` is a pristine native function.\n     *\n     * **Note:** This method can't reliably detect native functions in the presence\n     * of the core-js package because core-js circumvents this kind of detection.\n     * Despite multiple requests, the core-js maintainer has made it clear: any\n     * attempt to fix the detection will be obstructed. As a result, we're left\n     * with little choice but to throw an error. Unfortunately, this also affects\n     * packages, like [babel-polyfill](https://www.npmjs.com/package/babel-polyfill),\n     * which rely on core-js.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a native function,\n     *  else `false`.\n     * @example\n     *\n     * _.isNative(Array.prototype.push);\n     * // => true\n     *\n     * _.isNative(_);\n     * // => false\n     */\n    function isNative(value) {\n      if (isMaskable(value)) {\n        throw new Error(CORE_ERROR_TEXT);\n      }\n      return baseIsNative(value);\n    }\n\n    /**\n     * Checks if `value` is `null`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is `null`, else `false`.\n     * @example\n     *\n     * _.isNull(null);\n     * // => true\n     *\n     * _.isNull(void 0);\n     * // => false\n     */\n    function isNull(value) {\n      return value === null;\n    }\n\n    /**\n     * Checks if `value` is `null` or `undefined`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is nullish, else `false`.\n     * @example\n     *\n     * _.isNil(null);\n     * // => true\n     *\n     * _.isNil(void 0);\n     * // => true\n     *\n     * _.isNil(NaN);\n     * // => false\n     */\n    function isNil(value) {\n      return value == null;\n    }\n\n    /**\n     * Checks if `value` is classified as a `Number` primitive or object.\n     *\n     * **Note:** To exclude `Infinity`, `-Infinity`, and `NaN`, which are\n     * classified as numbers, use the `_.isFinite` method.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a number, else `false`.\n     * @example\n     *\n     * _.isNumber(3);\n     * // => true\n     *\n     * _.isNumber(Number.MIN_VALUE);\n     * // => true\n     *\n     * _.isNumber(Infinity);\n     * // => true\n     *\n     * _.isNumber('3');\n     * // => false\n     */\n    function isNumber(value) {\n      return typeof value == 'number' ||\n        (isObjectLike(value) && baseGetTag(value) == numberTag);\n    }\n\n    /**\n     * Checks if `value` is a plain object, that is, an object created by the\n     * `Object` constructor or one with a `[[Prototype]]` of `null`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.8.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     * }\n     *\n     * _.isPlainObject(new Foo);\n     * // => false\n     *\n     * _.isPlainObject([1, 2, 3]);\n     * // => false\n     *\n     * _.isPlainObject({ 'x': 0, 'y': 0 });\n     * // => true\n     *\n     * _.isPlainObject(Object.create(null));\n     * // => true\n     */\n    function isPlainObject(value) {\n      if (!isObjectLike(value) || baseGetTag(value) != objectTag) {\n        return false;\n      }\n      var proto = getPrototype(value);\n      if (proto === null) {\n        return true;\n      }\n      var Ctor = hasOwnProperty.call(proto, 'constructor') && proto.constructor;\n      return typeof Ctor == 'function' && Ctor instanceof Ctor &&\n        funcToString.call(Ctor) == objectCtorString;\n    }\n\n    /**\n     * Checks if `value` is classified as a `RegExp` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.1.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a regexp, else `false`.\n     * @example\n     *\n     * _.isRegExp(/abc/);\n     * // => true\n     *\n     * _.isRegExp('/abc/');\n     * // => false\n     */\n    var isRegExp = nodeIsRegExp ? baseUnary(nodeIsRegExp) : baseIsRegExp;\n\n    /**\n     * Checks if `value` is a safe integer. An integer is safe if it's an IEEE-754\n     * double precision number which isn't the result of a rounded unsafe integer.\n     *\n     * **Note:** This method is based on\n     * [`Number.isSafeInteger`](https://mdn.io/Number/isSafeInteger).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a safe integer, else `false`.\n     * @example\n     *\n     * _.isSafeInteger(3);\n     * // => true\n     *\n     * _.isSafeInteger(Number.MIN_VALUE);\n     * // => false\n     *\n     * _.isSafeInteger(Infinity);\n     * // => false\n     *\n     * _.isSafeInteger('3');\n     * // => false\n     */\n    function isSafeInteger(value) {\n      return isInteger(value) && value >= -MAX_SAFE_INTEGER && value <= MAX_SAFE_INTEGER;\n    }\n\n    /**\n     * Checks if `value` is classified as a `Set` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.3.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n     * @example\n     *\n     * _.isSet(new Set);\n     * // => true\n     *\n     * _.isSet(new WeakSet);\n     * // => false\n     */\n    var isSet = nodeIsSet ? baseUnary(nodeIsSet) : baseIsSet;\n\n    /**\n     * Checks if `value` is classified as a `String` primitive or object.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a string, else `false`.\n     * @example\n     *\n     * _.isString('abc');\n     * // => true\n     *\n     * _.isString(1);\n     * // => false\n     */\n    function isString(value) {\n      return typeof value == 'string' ||\n        (!isArray(value) && isObjectLike(value) && baseGetTag(value) == stringTag);\n    }\n\n    /**\n     * Checks if `value` is classified as a `Symbol` primitive or object.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n     * @example\n     *\n     * _.isSymbol(Symbol.iterator);\n     * // => true\n     *\n     * _.isSymbol('abc');\n     * // => false\n     */\n    function isSymbol(value) {\n      return typeof value == 'symbol' ||\n        (isObjectLike(value) && baseGetTag(value) == symbolTag);\n    }\n\n    /**\n     * Checks if `value` is classified as a typed array.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n     * @example\n     *\n     * _.isTypedArray(new Uint8Array);\n     * // => true\n     *\n     * _.isTypedArray([]);\n     * // => false\n     */\n    var isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\n    /**\n     * Checks if `value` is `undefined`.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is `undefined`, else `false`.\n     * @example\n     *\n     * _.isUndefined(void 0);\n     * // => true\n     *\n     * _.isUndefined(null);\n     * // => false\n     */\n    function isUndefined(value) {\n      return value === undefined;\n    }\n\n    /**\n     * Checks if `value` is classified as a `WeakMap` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.3.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a weak map, else `false`.\n     * @example\n     *\n     * _.isWeakMap(new WeakMap);\n     * // => true\n     *\n     * _.isWeakMap(new Map);\n     * // => false\n     */\n    function isWeakMap(value) {\n      return isObjectLike(value) && getTag(value) == weakMapTag;\n    }\n\n    /**\n     * Checks if `value` is classified as a `WeakSet` object.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.3.0\n     * @category Lang\n     * @param {*} value The value to check.\n     * @returns {boolean} Returns `true` if `value` is a weak set, else `false`.\n     * @example\n     *\n     * _.isWeakSet(new WeakSet);\n     * // => true\n     *\n     * _.isWeakSet(new Set);\n     * // => false\n     */\n    function isWeakSet(value) {\n      return isObjectLike(value) && baseGetTag(value) == weakSetTag;\n    }\n\n    /**\n     * Checks if `value` is less than `other`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.9.0\n     * @category Lang\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @returns {boolean} Returns `true` if `value` is less than `other`,\n     *  else `false`.\n     * @see _.gt\n     * @example\n     *\n     * _.lt(1, 3);\n     * // => true\n     *\n     * _.lt(3, 3);\n     * // => false\n     *\n     * _.lt(3, 1);\n     * // => false\n     */\n    var lt = createRelationalOperation(baseLt);\n\n    /**\n     * Checks if `value` is less than or equal to `other`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.9.0\n     * @category Lang\n     * @param {*} value The value to compare.\n     * @param {*} other The other value to compare.\n     * @returns {boolean} Returns `true` if `value` is less than or equal to\n     *  `other`, else `false`.\n     * @see _.gte\n     * @example\n     *\n     * _.lte(1, 3);\n     * // => true\n     *\n     * _.lte(3, 3);\n     * // => true\n     *\n     * _.lte(3, 1);\n     * // => false\n     */\n    var lte = createRelationalOperation(function(value, other) {\n      return value <= other;\n    });\n\n    /**\n     * Converts `value` to an array.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Lang\n     * @param {*} value The value to convert.\n     * @returns {Array} Returns the converted array.\n     * @example\n     *\n     * _.toArray({ 'a': 1, 'b': 2 });\n     * // => [1, 2]\n     *\n     * _.toArray('abc');\n     * // => ['a', 'b', 'c']\n     *\n     * _.toArray(1);\n     * // => []\n     *\n     * _.toArray(null);\n     * // => []\n     */\n    function toArray(value) {\n      if (!value) {\n        return [];\n      }\n      if (isArrayLike(value)) {\n        return isString(value) ? stringToArray(value) : copyArray(value);\n      }\n      if (symIterator && value[symIterator]) {\n        return iteratorToArray(value[symIterator]());\n      }\n      var tag = getTag(value),\n          func = tag == mapTag ? mapToArray : (tag == setTag ? setToArray : values);\n\n      return func(value);\n    }\n\n    /**\n     * Converts `value` to a finite number.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.12.0\n     * @category Lang\n     * @param {*} value The value to convert.\n     * @returns {number} Returns the converted number.\n     * @example\n     *\n     * _.toFinite(3.2);\n     * // => 3.2\n     *\n     * _.toFinite(Number.MIN_VALUE);\n     * // => 5e-324\n     *\n     * _.toFinite(Infinity);\n     * // => 1.7976931348623157e+308\n     *\n     * _.toFinite('3.2');\n     * // => 3.2\n     */\n    function toFinite(value) {\n      if (!value) {\n        return value === 0 ? value : 0;\n      }\n      value = toNumber(value);\n      if (value === INFINITY || value === -INFINITY) {\n        var sign = (value < 0 ? -1 : 1);\n        return sign * MAX_INTEGER;\n      }\n      return value === value ? value : 0;\n    }\n\n    /**\n     * Converts `value` to an integer.\n     *\n     * **Note:** This method is loosely based on\n     * [`ToInteger`](http://www.ecma-international.org/ecma-262/7.0/#sec-tointeger).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to convert.\n     * @returns {number} Returns the converted integer.\n     * @example\n     *\n     * _.toInteger(3.2);\n     * // => 3\n     *\n     * _.toInteger(Number.MIN_VALUE);\n     * // => 0\n     *\n     * _.toInteger(Infinity);\n     * // => 1.7976931348623157e+308\n     *\n     * _.toInteger('3.2');\n     * // => 3\n     */\n    function toInteger(value) {\n      var result = toFinite(value),\n          remainder = result % 1;\n\n      return result === result ? (remainder ? result - remainder : result) : 0;\n    }\n\n    /**\n     * Converts `value` to an integer suitable for use as the length of an\n     * array-like object.\n     *\n     * **Note:** This method is based on\n     * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to convert.\n     * @returns {number} Returns the converted integer.\n     * @example\n     *\n     * _.toLength(3.2);\n     * // => 3\n     *\n     * _.toLength(Number.MIN_VALUE);\n     * // => 0\n     *\n     * _.toLength(Infinity);\n     * // => 4294967295\n     *\n     * _.toLength('3.2');\n     * // => 3\n     */\n    function toLength(value) {\n      return value ? baseClamp(toInteger(value), 0, MAX_ARRAY_LENGTH) : 0;\n    }\n\n    /**\n     * Converts `value` to a number.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to process.\n     * @returns {number} Returns the number.\n     * @example\n     *\n     * _.toNumber(3.2);\n     * // => 3.2\n     *\n     * _.toNumber(Number.MIN_VALUE);\n     * // => 5e-324\n     *\n     * _.toNumber(Infinity);\n     * // => Infinity\n     *\n     * _.toNumber('3.2');\n     * // => 3.2\n     */\n    function toNumber(value) {\n      if (typeof value == 'number') {\n        return value;\n      }\n      if (isSymbol(value)) {\n        return NAN;\n      }\n      if (isObject(value)) {\n        var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n        value = isObject(other) ? (other + '') : other;\n      }\n      if (typeof value != 'string') {\n        return value === 0 ? value : +value;\n      }\n      value = baseTrim(value);\n      var isBinary = reIsBinary.test(value);\n      return (isBinary || reIsOctal.test(value))\n        ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n        : (reIsBadHex.test(value) ? NAN : +value);\n    }\n\n    /**\n     * Converts `value` to a plain object flattening inherited enumerable string\n     * keyed properties of `value` to own properties of the plain object.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Lang\n     * @param {*} value The value to convert.\n     * @returns {Object} Returns the converted plain object.\n     * @example\n     *\n     * function Foo() {\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.assign({ 'a': 1 }, new Foo);\n     * // => { 'a': 1, 'b': 2 }\n     *\n     * _.assign({ 'a': 1 }, _.toPlainObject(new Foo));\n     * // => { 'a': 1, 'b': 2, 'c': 3 }\n     */\n    function toPlainObject(value) {\n      return copyObject(value, keysIn(value));\n    }\n\n    /**\n     * Converts `value` to a safe integer. A safe integer can be compared and\n     * represented correctly.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to convert.\n     * @returns {number} Returns the converted integer.\n     * @example\n     *\n     * _.toSafeInteger(3.2);\n     * // => 3\n     *\n     * _.toSafeInteger(Number.MIN_VALUE);\n     * // => 0\n     *\n     * _.toSafeInteger(Infinity);\n     * // => 9007199254740991\n     *\n     * _.toSafeInteger('3.2');\n     * // => 3\n     */\n    function toSafeInteger(value) {\n      return value\n        ? baseClamp(toInteger(value), -MAX_SAFE_INTEGER, MAX_SAFE_INTEGER)\n        : (value === 0 ? value : 0);\n    }\n\n    /**\n     * Converts `value` to a string. An empty string is returned for `null`\n     * and `undefined` values. The sign of `-0` is preserved.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Lang\n     * @param {*} value The value to convert.\n     * @returns {string} Returns the converted string.\n     * @example\n     *\n     * _.toString(null);\n     * // => ''\n     *\n     * _.toString(-0);\n     * // => '-0'\n     *\n     * _.toString([1, 2, 3]);\n     * // => '1,2,3'\n     */\n    function toString(value) {\n      return value == null ? '' : baseToString(value);\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Assigns own enumerable string keyed properties of source objects to the\n     * destination object. Source objects are applied from left to right.\n     * Subsequent sources overwrite property assignments of previous sources.\n     *\n     * **Note:** This method mutates `object` and is loosely based on\n     * [`Object.assign`](https://mdn.io/Object/assign).\n     *\n     * @static\n     * @memberOf _\n     * @since 0.10.0\n     * @category Object\n     * @param {Object} object The destination object.\n     * @param {...Object} [sources] The source objects.\n     * @returns {Object} Returns `object`.\n     * @see _.assignIn\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     * }\n     *\n     * function Bar() {\n     *   this.c = 3;\n     * }\n     *\n     * Foo.prototype.b = 2;\n     * Bar.prototype.d = 4;\n     *\n     * _.assign({ 'a': 0 }, new Foo, new Bar);\n     * // => { 'a': 1, 'c': 3 }\n     */\n    var assign = createAssigner(function(object, source) {\n      if (isPrototype(source) || isArrayLike(source)) {\n        copyObject(source, keys(source), object);\n        return;\n      }\n      for (var key in source) {\n        if (hasOwnProperty.call(source, key)) {\n          assignValue(object, key, source[key]);\n        }\n      }\n    });\n\n    /**\n     * This method is like `_.assign` except that it iterates over own and\n     * inherited source properties.\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @alias extend\n     * @category Object\n     * @param {Object} object The destination object.\n     * @param {...Object} [sources] The source objects.\n     * @returns {Object} Returns `object`.\n     * @see _.assign\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     * }\n     *\n     * function Bar() {\n     *   this.c = 3;\n     * }\n     *\n     * Foo.prototype.b = 2;\n     * Bar.prototype.d = 4;\n     *\n     * _.assignIn({ 'a': 0 }, new Foo, new Bar);\n     * // => { 'a': 1, 'b': 2, 'c': 3, 'd': 4 }\n     */\n    var assignIn = createAssigner(function(object, source) {\n      copyObject(source, keysIn(source), object);\n    });\n\n    /**\n     * This method is like `_.assignIn` except that it accepts `customizer`\n     * which is invoked to produce the assigned values. If `customizer` returns\n     * `undefined`, assignment is handled by the method instead. The `customizer`\n     * is invoked with five arguments: (objValue, srcValue, key, object, source).\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @alias extendWith\n     * @category Object\n     * @param {Object} object The destination object.\n     * @param {...Object} sources The source objects.\n     * @param {Function} [customizer] The function to customize assigned values.\n     * @returns {Object} Returns `object`.\n     * @see _.assignWith\n     * @example\n     *\n     * function customizer(objValue, srcValue) {\n     *   return _.isUndefined(objValue) ? srcValue : objValue;\n     * }\n     *\n     * var defaults = _.partialRight(_.assignInWith, customizer);\n     *\n     * defaults({ 'a': 1 }, { 'b': 2 }, { 'a': 3 });\n     * // => { 'a': 1, 'b': 2 }\n     */\n    var assignInWith = createAssigner(function(object, source, srcIndex, customizer) {\n      copyObject(source, keysIn(source), object, customizer);\n    });\n\n    /**\n     * This method is like `_.assign` except that it accepts `customizer`\n     * which is invoked to produce the assigned values. If `customizer` returns\n     * `undefined`, assignment is handled by the method instead. The `customizer`\n     * is invoked with five arguments: (objValue, srcValue, key, object, source).\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Object\n     * @param {Object} object The destination object.\n     * @param {...Object} sources The source objects.\n     * @param {Function} [customizer] The function to customize assigned values.\n     * @returns {Object} Returns `object`.\n     * @see _.assignInWith\n     * @example\n     *\n     * function customizer(objValue, srcValue) {\n     *   return _.isUndefined(objValue) ? srcValue : objValue;\n     * }\n     *\n     * var defaults = _.partialRight(_.assignWith, customizer);\n     *\n     * defaults({ 'a': 1 }, { 'b': 2 }, { 'a': 3 });\n     * // => { 'a': 1, 'b': 2 }\n     */\n    var assignWith = createAssigner(function(object, source, srcIndex, customizer) {\n      copyObject(source, keys(source), object, customizer);\n    });\n\n    /**\n     * Creates an array of values corresponding to `paths` of `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 1.0.0\n     * @category Object\n     * @param {Object} object The object to iterate over.\n     * @param {...(string|string[])} [paths] The property paths to pick.\n     * @returns {Array} Returns the picked values.\n     * @example\n     *\n     * var object = { 'a': [{ 'b': { 'c': 3 } }, 4] };\n     *\n     * _.at(object, ['a[0].b.c', 'a[1]']);\n     * // => [3, 4]\n     */\n    var at = flatRest(baseAt);\n\n    /**\n     * Creates an object that inherits from the `prototype` object. If a\n     * `properties` object is given, its own enumerable string keyed properties\n     * are assigned to the created object.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.3.0\n     * @category Object\n     * @param {Object} prototype The object to inherit from.\n     * @param {Object} [properties] The properties to assign to the object.\n     * @returns {Object} Returns the new object.\n     * @example\n     *\n     * function Shape() {\n     *   this.x = 0;\n     *   this.y = 0;\n     * }\n     *\n     * function Circle() {\n     *   Shape.call(this);\n     * }\n     *\n     * Circle.prototype = _.create(Shape.prototype, {\n     *   'constructor': Circle\n     * });\n     *\n     * var circle = new Circle;\n     * circle instanceof Circle;\n     * // => true\n     *\n     * circle instanceof Shape;\n     * // => true\n     */\n    function create(prototype, properties) {\n      var result = baseCreate(prototype);\n      return properties == null ? result : baseAssign(result, properties);\n    }\n\n    /**\n     * Assigns own and inherited enumerable string keyed properties of source\n     * objects to the destination object for all destination properties that\n     * resolve to `undefined`. Source objects are applied from left to right.\n     * Once a property is set, additional values of the same property are ignored.\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The destination object.\n     * @param {...Object} [sources] The source objects.\n     * @returns {Object} Returns `object`.\n     * @see _.defaultsDeep\n     * @example\n     *\n     * _.defaults({ 'a': 1 }, { 'b': 2 }, { 'a': 3 });\n     * // => { 'a': 1, 'b': 2 }\n     */\n    var defaults = baseRest(function(object, sources) {\n      object = Object(object);\n\n      var index = -1;\n      var length = sources.length;\n      var guard = length > 2 ? sources[2] : undefined;\n\n      if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n        length = 1;\n      }\n\n      while (++index < length) {\n        var source = sources[index];\n        var props = keysIn(source);\n        var propsIndex = -1;\n        var propsLength = props.length;\n\n        while (++propsIndex < propsLength) {\n          var key = props[propsIndex];\n          var value = object[key];\n\n          if (value === undefined ||\n              (eq(value, objectProto[key]) && !hasOwnProperty.call(object, key))) {\n            object[key] = source[key];\n          }\n        }\n      }\n\n      return object;\n    });\n\n    /**\n     * This method is like `_.defaults` except that it recursively assigns\n     * default properties.\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.10.0\n     * @category Object\n     * @param {Object} object The destination object.\n     * @param {...Object} [sources] The source objects.\n     * @returns {Object} Returns `object`.\n     * @see _.defaults\n     * @example\n     *\n     * _.defaultsDeep({ 'a': { 'b': 2 } }, { 'a': { 'b': 1, 'c': 3 } });\n     * // => { 'a': { 'b': 2, 'c': 3 } }\n     */\n    var defaultsDeep = baseRest(function(args) {\n      args.push(undefined, customDefaultsMerge);\n      return apply(mergeWith, undefined, args);\n    });\n\n    /**\n     * This method is like `_.find` except that it returns the key of the first\n     * element `predicate` returns truthy for instead of the element itself.\n     *\n     * @static\n     * @memberOf _\n     * @since 1.1.0\n     * @category Object\n     * @param {Object} object The object to inspect.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {string|undefined} Returns the key of the matched element,\n     *  else `undefined`.\n     * @example\n     *\n     * var users = {\n     *   'barney':  { 'age': 36, 'active': true },\n     *   'fred':    { 'age': 40, 'active': false },\n     *   'pebbles': { 'age': 1,  'active': true }\n     * };\n     *\n     * _.findKey(users, function(o) { return o.age < 40; });\n     * // => 'barney' (iteration order is not guaranteed)\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.findKey(users, { 'age': 1, 'active': true });\n     * // => 'pebbles'\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.findKey(users, ['active', false]);\n     * // => 'fred'\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.findKey(users, 'active');\n     * // => 'barney'\n     */\n    function findKey(object, predicate) {\n      return baseFindKey(object, getIteratee(predicate, 3), baseForOwn);\n    }\n\n    /**\n     * This method is like `_.findKey` except that it iterates over elements of\n     * a collection in the opposite order.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @category Object\n     * @param {Object} object The object to inspect.\n     * @param {Function} [predicate=_.identity] The function invoked per iteration.\n     * @returns {string|undefined} Returns the key of the matched element,\n     *  else `undefined`.\n     * @example\n     *\n     * var users = {\n     *   'barney':  { 'age': 36, 'active': true },\n     *   'fred':    { 'age': 40, 'active': false },\n     *   'pebbles': { 'age': 1,  'active': true }\n     * };\n     *\n     * _.findLastKey(users, function(o) { return o.age < 40; });\n     * // => returns 'pebbles' assuming `_.findKey` returns 'barney'\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.findLastKey(users, { 'age': 36, 'active': true });\n     * // => 'barney'\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.findLastKey(users, ['active', false]);\n     * // => 'fred'\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.findLastKey(users, 'active');\n     * // => 'pebbles'\n     */\n    function findLastKey(object, predicate) {\n      return baseFindKey(object, getIteratee(predicate, 3), baseForOwnRight);\n    }\n\n    /**\n     * Iterates over own and inherited enumerable string keyed properties of an\n     * object and invokes `iteratee` for each property. The iteratee is invoked\n     * with three arguments: (value, key, object). Iteratee functions may exit\n     * iteration early by explicitly returning `false`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.3.0\n     * @category Object\n     * @param {Object} object The object to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Object} Returns `object`.\n     * @see _.forInRight\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.forIn(new Foo, function(value, key) {\n     *   console.log(key);\n     * });\n     * // => Logs 'a', 'b', then 'c' (iteration order is not guaranteed).\n     */\n    function forIn(object, iteratee) {\n      return object == null\n        ? object\n        : baseFor(object, getIteratee(iteratee, 3), keysIn);\n    }\n\n    /**\n     * This method is like `_.forIn` except that it iterates over properties of\n     * `object` in the opposite order.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @category Object\n     * @param {Object} object The object to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Object} Returns `object`.\n     * @see _.forIn\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.forInRight(new Foo, function(value, key) {\n     *   console.log(key);\n     * });\n     * // => Logs 'c', 'b', then 'a' assuming `_.forIn` logs 'a', 'b', then 'c'.\n     */\n    function forInRight(object, iteratee) {\n      return object == null\n        ? object\n        : baseForRight(object, getIteratee(iteratee, 3), keysIn);\n    }\n\n    /**\n     * Iterates over own enumerable string keyed properties of an object and\n     * invokes `iteratee` for each property. The iteratee is invoked with three\n     * arguments: (value, key, object). Iteratee functions may exit iteration\n     * early by explicitly returning `false`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.3.0\n     * @category Object\n     * @param {Object} object The object to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Object} Returns `object`.\n     * @see _.forOwnRight\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.forOwn(new Foo, function(value, key) {\n     *   console.log(key);\n     * });\n     * // => Logs 'a' then 'b' (iteration order is not guaranteed).\n     */\n    function forOwn(object, iteratee) {\n      return object && baseForOwn(object, getIteratee(iteratee, 3));\n    }\n\n    /**\n     * This method is like `_.forOwn` except that it iterates over properties of\n     * `object` in the opposite order.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.0.0\n     * @category Object\n     * @param {Object} object The object to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Object} Returns `object`.\n     * @see _.forOwn\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.forOwnRight(new Foo, function(value, key) {\n     *   console.log(key);\n     * });\n     * // => Logs 'b' then 'a' assuming `_.forOwn` logs 'a' then 'b'.\n     */\n    function forOwnRight(object, iteratee) {\n      return object && baseForOwnRight(object, getIteratee(iteratee, 3));\n    }\n\n    /**\n     * Creates an array of function property names from own enumerable properties\n     * of `object`.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The object to inspect.\n     * @returns {Array} Returns the function names.\n     * @see _.functionsIn\n     * @example\n     *\n     * function Foo() {\n     *   this.a = _.constant('a');\n     *   this.b = _.constant('b');\n     * }\n     *\n     * Foo.prototype.c = _.constant('c');\n     *\n     * _.functions(new Foo);\n     * // => ['a', 'b']\n     */\n    function functions(object) {\n      return object == null ? [] : baseFunctions(object, keys(object));\n    }\n\n    /**\n     * Creates an array of function property names from own and inherited\n     * enumerable properties of `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Object\n     * @param {Object} object The object to inspect.\n     * @returns {Array} Returns the function names.\n     * @see _.functions\n     * @example\n     *\n     * function Foo() {\n     *   this.a = _.constant('a');\n     *   this.b = _.constant('b');\n     * }\n     *\n     * Foo.prototype.c = _.constant('c');\n     *\n     * _.functionsIn(new Foo);\n     * // => ['a', 'b', 'c']\n     */\n    function functionsIn(object) {\n      return object == null ? [] : baseFunctions(object, keysIn(object));\n    }\n\n    /**\n     * Gets the value at `path` of `object`. If the resolved value is\n     * `undefined`, the `defaultValue` is returned in its place.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.7.0\n     * @category Object\n     * @param {Object} object The object to query.\n     * @param {Array|string} path The path of the property to get.\n     * @param {*} [defaultValue] The value returned for `undefined` resolved values.\n     * @returns {*} Returns the resolved value.\n     * @example\n     *\n     * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n     *\n     * _.get(object, 'a[0].b.c');\n     * // => 3\n     *\n     * _.get(object, ['a', '0', 'b', 'c']);\n     * // => 3\n     *\n     * _.get(object, 'a.b.c', 'default');\n     * // => 'default'\n     */\n    function get(object, path, defaultValue) {\n      var result = object == null ? undefined : baseGet(object, path);\n      return result === undefined ? defaultValue : result;\n    }\n\n    /**\n     * Checks if `path` is a direct property of `object`.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The object to query.\n     * @param {Array|string} path The path to check.\n     * @returns {boolean} Returns `true` if `path` exists, else `false`.\n     * @example\n     *\n     * var object = { 'a': { 'b': 2 } };\n     * var other = _.create({ 'a': _.create({ 'b': 2 }) });\n     *\n     * _.has(object, 'a');\n     * // => true\n     *\n     * _.has(object, 'a.b');\n     * // => true\n     *\n     * _.has(object, ['a', 'b']);\n     * // => true\n     *\n     * _.has(other, 'a');\n     * // => false\n     */\n    function has(object, path) {\n      return object != null && hasPath(object, path, baseHas);\n    }\n\n    /**\n     * Checks if `path` is a direct or inherited property of `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Object\n     * @param {Object} object The object to query.\n     * @param {Array|string} path The path to check.\n     * @returns {boolean} Returns `true` if `path` exists, else `false`.\n     * @example\n     *\n     * var object = _.create({ 'a': _.create({ 'b': 2 }) });\n     *\n     * _.hasIn(object, 'a');\n     * // => true\n     *\n     * _.hasIn(object, 'a.b');\n     * // => true\n     *\n     * _.hasIn(object, ['a', 'b']);\n     * // => true\n     *\n     * _.hasIn(object, 'b');\n     * // => false\n     */\n    function hasIn(object, path) {\n      return object != null && hasPath(object, path, baseHasIn);\n    }\n\n    /**\n     * Creates an object composed of the inverted keys and values of `object`.\n     * If `object` contains duplicate values, subsequent values overwrite\n     * property assignments of previous values.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.7.0\n     * @category Object\n     * @param {Object} object The object to invert.\n     * @returns {Object} Returns the new inverted object.\n     * @example\n     *\n     * var object = { 'a': 1, 'b': 2, 'c': 1 };\n     *\n     * _.invert(object);\n     * // => { '1': 'c', '2': 'b' }\n     */\n    var invert = createInverter(function(result, value, key) {\n      if (value != null &&\n          typeof value.toString != 'function') {\n        value = nativeObjectToString.call(value);\n      }\n\n      result[value] = key;\n    }, constant(identity));\n\n    /**\n     * This method is like `_.invert` except that the inverted object is generated\n     * from the results of running each element of `object` thru `iteratee`. The\n     * corresponding inverted value of each inverted key is an array of keys\n     * responsible for generating the inverted value. The iteratee is invoked\n     * with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.1.0\n     * @category Object\n     * @param {Object} object The object to invert.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {Object} Returns the new inverted object.\n     * @example\n     *\n     * var object = { 'a': 1, 'b': 2, 'c': 1 };\n     *\n     * _.invertBy(object);\n     * // => { '1': ['a', 'c'], '2': ['b'] }\n     *\n     * _.invertBy(object, function(value) {\n     *   return 'group' + value;\n     * });\n     * // => { 'group1': ['a', 'c'], 'group2': ['b'] }\n     */\n    var invertBy = createInverter(function(result, value, key) {\n      if (value != null &&\n          typeof value.toString != 'function') {\n        value = nativeObjectToString.call(value);\n      }\n\n      if (hasOwnProperty.call(result, value)) {\n        result[value].push(key);\n      } else {\n        result[value] = [key];\n      }\n    }, getIteratee);\n\n    /**\n     * Invokes the method at `path` of `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Object\n     * @param {Object} object The object to query.\n     * @param {Array|string} path The path of the method to invoke.\n     * @param {...*} [args] The arguments to invoke the method with.\n     * @returns {*} Returns the result of the invoked method.\n     * @example\n     *\n     * var object = { 'a': [{ 'b': { 'c': [1, 2, 3, 4] } }] };\n     *\n     * _.invoke(object, 'a[0].b.c.slice', 1, 3);\n     * // => [2, 3]\n     */\n    var invoke = baseRest(baseInvoke);\n\n    /**\n     * Creates an array of the own enumerable property names of `object`.\n     *\n     * **Note:** Non-object values are coerced to objects. See the\n     * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n     * for more details.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property names.\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.keys(new Foo);\n     * // => ['a', 'b'] (iteration order is not guaranteed)\n     *\n     * _.keys('hi');\n     * // => ['0', '1']\n     */\n    function keys(object) {\n      return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n    }\n\n    /**\n     * Creates an array of the own and inherited enumerable property names of `object`.\n     *\n     * **Note:** Non-object values are coerced to objects.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Object\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property names.\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.keysIn(new Foo);\n     * // => ['a', 'b', 'c'] (iteration order is not guaranteed)\n     */\n    function keysIn(object) {\n      return isArrayLike(object) ? arrayLikeKeys(object, true) : baseKeysIn(object);\n    }\n\n    /**\n     * The opposite of `_.mapValues`; this method creates an object with the\n     * same values as `object` and keys generated by running each own enumerable\n     * string keyed property of `object` thru `iteratee`. The iteratee is invoked\n     * with three arguments: (value, key, object).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.8.0\n     * @category Object\n     * @param {Object} object The object to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Object} Returns the new mapped object.\n     * @see _.mapValues\n     * @example\n     *\n     * _.mapKeys({ 'a': 1, 'b': 2 }, function(value, key) {\n     *   return key + value;\n     * });\n     * // => { 'a1': 1, 'b2': 2 }\n     */\n    function mapKeys(object, iteratee) {\n      var result = {};\n      iteratee = getIteratee(iteratee, 3);\n\n      baseForOwn(object, function(value, key, object) {\n        baseAssignValue(result, iteratee(value, key, object), value);\n      });\n      return result;\n    }\n\n    /**\n     * Creates an object with the same keys as `object` and values generated\n     * by running each own enumerable string keyed property of `object` thru\n     * `iteratee`. The iteratee is invoked with three arguments:\n     * (value, key, object).\n     *\n     * @static\n     * @memberOf _\n     * @since 2.4.0\n     * @category Object\n     * @param {Object} object The object to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Object} Returns the new mapped object.\n     * @see _.mapKeys\n     * @example\n     *\n     * var users = {\n     *   'fred':    { 'user': 'fred',    'age': 40 },\n     *   'pebbles': { 'user': 'pebbles', 'age': 1 }\n     * };\n     *\n     * _.mapValues(users, function(o) { return o.age; });\n     * // => { 'fred': 40, 'pebbles': 1 } (iteration order is not guaranteed)\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.mapValues(users, 'age');\n     * // => { 'fred': 40, 'pebbles': 1 } (iteration order is not guaranteed)\n     */\n    function mapValues(object, iteratee) {\n      var result = {};\n      iteratee = getIteratee(iteratee, 3);\n\n      baseForOwn(object, function(value, key, object) {\n        baseAssignValue(result, key, iteratee(value, key, object));\n      });\n      return result;\n    }\n\n    /**\n     * This method is like `_.assign` except that it recursively merges own and\n     * inherited enumerable string keyed properties of source objects into the\n     * destination object. Source properties that resolve to `undefined` are\n     * skipped if a destination value exists. Array and plain object properties\n     * are merged recursively. Other objects and value types are overridden by\n     * assignment. Source objects are applied from left to right. Subsequent\n     * sources overwrite property assignments of previous sources.\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.5.0\n     * @category Object\n     * @param {Object} object The destination object.\n     * @param {...Object} [sources] The source objects.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * var object = {\n     *   'a': [{ 'b': 2 }, { 'd': 4 }]\n     * };\n     *\n     * var other = {\n     *   'a': [{ 'c': 3 }, { 'e': 5 }]\n     * };\n     *\n     * _.merge(object, other);\n     * // => { 'a': [{ 'b': 2, 'c': 3 }, { 'd': 4, 'e': 5 }] }\n     */\n    var merge = createAssigner(function(object, source, srcIndex) {\n      baseMerge(object, source, srcIndex);\n    });\n\n    /**\n     * This method is like `_.merge` except that it accepts `customizer` which\n     * is invoked to produce the merged values of the destination and source\n     * properties. If `customizer` returns `undefined`, merging is handled by the\n     * method instead. The `customizer` is invoked with six arguments:\n     * (objValue, srcValue, key, object, source, stack).\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Object\n     * @param {Object} object The destination object.\n     * @param {...Object} sources The source objects.\n     * @param {Function} customizer The function to customize assigned values.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * function customizer(objValue, srcValue) {\n     *   if (_.isArray(objValue)) {\n     *     return objValue.concat(srcValue);\n     *   }\n     * }\n     *\n     * var object = { 'a': [1], 'b': [2] };\n     * var other = { 'a': [3], 'b': [4] };\n     *\n     * _.mergeWith(object, other, customizer);\n     * // => { 'a': [1, 3], 'b': [2, 4] }\n     */\n    var mergeWith = createAssigner(function(object, source, srcIndex, customizer) {\n      baseMerge(object, source, srcIndex, customizer);\n    });\n\n    /**\n     * The opposite of `_.pick`; this method creates an object composed of the\n     * own and inherited enumerable property paths of `object` that are not omitted.\n     *\n     * **Note:** This method is considerably slower than `_.pick`.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The source object.\n     * @param {...(string|string[])} [paths] The property paths to omit.\n     * @returns {Object} Returns the new object.\n     * @example\n     *\n     * var object = { 'a': 1, 'b': '2', 'c': 3 };\n     *\n     * _.omit(object, ['a', 'c']);\n     * // => { 'b': '2' }\n     */\n    var omit = flatRest(function(object, paths) {\n      var result = {};\n      if (object == null) {\n        return result;\n      }\n      var isDeep = false;\n      paths = arrayMap(paths, function(path) {\n        path = castPath(path, object);\n        isDeep || (isDeep = path.length > 1);\n        return path;\n      });\n      copyObject(object, getAllKeysIn(object), result);\n      if (isDeep) {\n        result = baseClone(result, CLONE_DEEP_FLAG | CLONE_FLAT_FLAG | CLONE_SYMBOLS_FLAG, customOmitClone);\n      }\n      var length = paths.length;\n      while (length--) {\n        baseUnset(result, paths[length]);\n      }\n      return result;\n    });\n\n    /**\n     * The opposite of `_.pickBy`; this method creates an object composed of\n     * the own and inherited enumerable string keyed properties of `object` that\n     * `predicate` doesn't return truthy for. The predicate is invoked with two\n     * arguments: (value, key).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Object\n     * @param {Object} object The source object.\n     * @param {Function} [predicate=_.identity] The function invoked per property.\n     * @returns {Object} Returns the new object.\n     * @example\n     *\n     * var object = { 'a': 1, 'b': '2', 'c': 3 };\n     *\n     * _.omitBy(object, _.isNumber);\n     * // => { 'b': '2' }\n     */\n    function omitBy(object, predicate) {\n      return pickBy(object, negate(getIteratee(predicate)));\n    }\n\n    /**\n     * Creates an object composed of the picked `object` properties.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The source object.\n     * @param {...(string|string[])} [paths] The property paths to pick.\n     * @returns {Object} Returns the new object.\n     * @example\n     *\n     * var object = { 'a': 1, 'b': '2', 'c': 3 };\n     *\n     * _.pick(object, ['a', 'c']);\n     * // => { 'a': 1, 'c': 3 }\n     */\n    var pick = flatRest(function(object, paths) {\n      return object == null ? {} : basePick(object, paths);\n    });\n\n    /**\n     * Creates an object composed of the `object` properties `predicate` returns\n     * truthy for. The predicate is invoked with two arguments: (value, key).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Object\n     * @param {Object} object The source object.\n     * @param {Function} [predicate=_.identity] The function invoked per property.\n     * @returns {Object} Returns the new object.\n     * @example\n     *\n     * var object = { 'a': 1, 'b': '2', 'c': 3 };\n     *\n     * _.pickBy(object, _.isNumber);\n     * // => { 'a': 1, 'c': 3 }\n     */\n    function pickBy(object, predicate) {\n      if (object == null) {\n        return {};\n      }\n      var props = arrayMap(getAllKeysIn(object), function(prop) {\n        return [prop];\n      });\n      predicate = getIteratee(predicate);\n      return basePickBy(object, props, function(value, path) {\n        return predicate(value, path[0]);\n      });\n    }\n\n    /**\n     * This method is like `_.get` except that if the resolved value is a\n     * function it's invoked with the `this` binding of its parent object and\n     * its result is returned.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The object to query.\n     * @param {Array|string} path The path of the property to resolve.\n     * @param {*} [defaultValue] The value returned for `undefined` resolved values.\n     * @returns {*} Returns the resolved value.\n     * @example\n     *\n     * var object = { 'a': [{ 'b': { 'c1': 3, 'c2': _.constant(4) } }] };\n     *\n     * _.result(object, 'a[0].b.c1');\n     * // => 3\n     *\n     * _.result(object, 'a[0].b.c2');\n     * // => 4\n     *\n     * _.result(object, 'a[0].b.c3', 'default');\n     * // => 'default'\n     *\n     * _.result(object, 'a[0].b.c3', _.constant('default'));\n     * // => 'default'\n     */\n    function result(object, path, defaultValue) {\n      path = castPath(path, object);\n\n      var index = -1,\n          length = path.length;\n\n      // Ensure the loop is entered when path is empty.\n      if (!length) {\n        length = 1;\n        object = undefined;\n      }\n      while (++index < length) {\n        var value = object == null ? undefined : object[toKey(path[index])];\n        if (value === undefined) {\n          index = length;\n          value = defaultValue;\n        }\n        object = isFunction(value) ? value.call(object) : value;\n      }\n      return object;\n    }\n\n    /**\n     * Sets the value at `path` of `object`. If a portion of `path` doesn't exist,\n     * it's created. Arrays are created for missing index properties while objects\n     * are created for all other missing properties. Use `_.setWith` to customize\n     * `path` creation.\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.7.0\n     * @category Object\n     * @param {Object} object The object to modify.\n     * @param {Array|string} path The path of the property to set.\n     * @param {*} value The value to set.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n     *\n     * _.set(object, 'a[0].b.c', 4);\n     * console.log(object.a[0].b.c);\n     * // => 4\n     *\n     * _.set(object, ['x', '0', 'y', 'z'], 5);\n     * console.log(object.x[0].y.z);\n     * // => 5\n     */\n    function set(object, path, value) {\n      return object == null ? object : baseSet(object, path, value);\n    }\n\n    /**\n     * This method is like `_.set` except that it accepts `customizer` which is\n     * invoked to produce the objects of `path`.  If `customizer` returns `undefined`\n     * path creation is handled by the method instead. The `customizer` is invoked\n     * with three arguments: (nsValue, key, nsObject).\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Object\n     * @param {Object} object The object to modify.\n     * @param {Array|string} path The path of the property to set.\n     * @param {*} value The value to set.\n     * @param {Function} [customizer] The function to customize assigned values.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * var object = {};\n     *\n     * _.setWith(object, '[0][1]', 'a', Object);\n     * // => { '0': { '1': 'a' } }\n     */\n    function setWith(object, path, value, customizer) {\n      customizer = typeof customizer == 'function' ? customizer : undefined;\n      return object == null ? object : baseSet(object, path, value, customizer);\n    }\n\n    /**\n     * Creates an array of own enumerable string keyed-value pairs for `object`\n     * which can be consumed by `_.fromPairs`. If `object` is a map or set, its\n     * entries are returned.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @alias entries\n     * @category Object\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the key-value pairs.\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.toPairs(new Foo);\n     * // => [['a', 1], ['b', 2]] (iteration order is not guaranteed)\n     */\n    var toPairs = createToPairs(keys);\n\n    /**\n     * Creates an array of own and inherited enumerable string keyed-value pairs\n     * for `object` which can be consumed by `_.fromPairs`. If `object` is a map\n     * or set, its entries are returned.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @alias entriesIn\n     * @category Object\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the key-value pairs.\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.toPairsIn(new Foo);\n     * // => [['a', 1], ['b', 2], ['c', 3]] (iteration order is not guaranteed)\n     */\n    var toPairsIn = createToPairs(keysIn);\n\n    /**\n     * An alternative to `_.reduce`; this method transforms `object` to a new\n     * `accumulator` object which is the result of running each of its own\n     * enumerable string keyed properties thru `iteratee`, with each invocation\n     * potentially mutating the `accumulator` object. If `accumulator` is not\n     * provided, a new object with the same `[[Prototype]]` will be used. The\n     * iteratee is invoked with four arguments: (accumulator, value, key, object).\n     * Iteratee functions may exit iteration early by explicitly returning `false`.\n     *\n     * @static\n     * @memberOf _\n     * @since 1.3.0\n     * @category Object\n     * @param {Object} object The object to iterate over.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @param {*} [accumulator] The custom accumulator value.\n     * @returns {*} Returns the accumulated value.\n     * @example\n     *\n     * _.transform([2, 3, 4], function(result, n) {\n     *   result.push(n *= n);\n     *   return n % 2 == 0;\n     * }, []);\n     * // => [4, 9]\n     *\n     * _.transform({ 'a': 1, 'b': 2, 'c': 1 }, function(result, value, key) {\n     *   (result[value] || (result[value] = [])).push(key);\n     * }, {});\n     * // => { '1': ['a', 'c'], '2': ['b'] }\n     */\n    function transform(object, iteratee, accumulator) {\n      var isArr = isArray(object),\n          isArrLike = isArr || isBuffer(object) || isTypedArray(object);\n\n      iteratee = getIteratee(iteratee, 4);\n      if (accumulator == null) {\n        var Ctor = object && object.constructor;\n        if (isArrLike) {\n          accumulator = isArr ? new Ctor : [];\n        }\n        else if (isObject(object)) {\n          accumulator = isFunction(Ctor) ? baseCreate(getPrototype(object)) : {};\n        }\n        else {\n          accumulator = {};\n        }\n      }\n      (isArrLike ? arrayEach : baseForOwn)(object, function(value, index, object) {\n        return iteratee(accumulator, value, index, object);\n      });\n      return accumulator;\n    }\n\n    /**\n     * Removes the property at `path` of `object`.\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Object\n     * @param {Object} object The object to modify.\n     * @param {Array|string} path The path of the property to unset.\n     * @returns {boolean} Returns `true` if the property is deleted, else `false`.\n     * @example\n     *\n     * var object = { 'a': [{ 'b': { 'c': 7 } }] };\n     * _.unset(object, 'a[0].b.c');\n     * // => true\n     *\n     * console.log(object);\n     * // => { 'a': [{ 'b': {} }] };\n     *\n     * _.unset(object, ['a', '0', 'b', 'c']);\n     * // => true\n     *\n     * console.log(object);\n     * // => { 'a': [{ 'b': {} }] };\n     */\n    function unset(object, path) {\n      return object == null ? true : baseUnset(object, path);\n    }\n\n    /**\n     * This method is like `_.set` except that accepts `updater` to produce the\n     * value to set. Use `_.updateWith` to customize `path` creation. The `updater`\n     * is invoked with one argument: (value).\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.6.0\n     * @category Object\n     * @param {Object} object The object to modify.\n     * @param {Array|string} path The path of the property to set.\n     * @param {Function} updater The function to produce the updated value.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n     *\n     * _.update(object, 'a[0].b.c', function(n) { return n * n; });\n     * console.log(object.a[0].b.c);\n     * // => 9\n     *\n     * _.update(object, 'x[0].y.z', function(n) { return n ? n + 1 : 0; });\n     * console.log(object.x[0].y.z);\n     * // => 0\n     */\n    function update(object, path, updater) {\n      return object == null ? object : baseUpdate(object, path, castFunction(updater));\n    }\n\n    /**\n     * This method is like `_.update` except that it accepts `customizer` which is\n     * invoked to produce the objects of `path`.  If `customizer` returns `undefined`\n     * path creation is handled by the method instead. The `customizer` is invoked\n     * with three arguments: (nsValue, key, nsObject).\n     *\n     * **Note:** This method mutates `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.6.0\n     * @category Object\n     * @param {Object} object The object to modify.\n     * @param {Array|string} path The path of the property to set.\n     * @param {Function} updater The function to produce the updated value.\n     * @param {Function} [customizer] The function to customize assigned values.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * var object = {};\n     *\n     * _.updateWith(object, '[0][1]', _.constant('a'), Object);\n     * // => { '0': { '1': 'a' } }\n     */\n    function updateWith(object, path, updater, customizer) {\n      customizer = typeof customizer == 'function' ? customizer : undefined;\n      return object == null ? object : baseUpdate(object, path, castFunction(updater), customizer);\n    }\n\n    /**\n     * Creates an array of the own enumerable string keyed property values of `object`.\n     *\n     * **Note:** Non-object values are coerced to objects.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Object\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property values.\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.values(new Foo);\n     * // => [1, 2] (iteration order is not guaranteed)\n     *\n     * _.values('hi');\n     * // => ['h', 'i']\n     */\n    function values(object) {\n      return object == null ? [] : baseValues(object, keys(object));\n    }\n\n    /**\n     * Creates an array of the own and inherited enumerable string keyed property\n     * values of `object`.\n     *\n     * **Note:** Non-object values are coerced to objects.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Object\n     * @param {Object} object The object to query.\n     * @returns {Array} Returns the array of property values.\n     * @example\n     *\n     * function Foo() {\n     *   this.a = 1;\n     *   this.b = 2;\n     * }\n     *\n     * Foo.prototype.c = 3;\n     *\n     * _.valuesIn(new Foo);\n     * // => [1, 2, 3] (iteration order is not guaranteed)\n     */\n    function valuesIn(object) {\n      return object == null ? [] : baseValues(object, keysIn(object));\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Clamps `number` within the inclusive `lower` and `upper` bounds.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Number\n     * @param {number} number The number to clamp.\n     * @param {number} [lower] The lower bound.\n     * @param {number} upper The upper bound.\n     * @returns {number} Returns the clamped number.\n     * @example\n     *\n     * _.clamp(-10, -5, 5);\n     * // => -5\n     *\n     * _.clamp(10, -5, 5);\n     * // => 5\n     */\n    function clamp(number, lower, upper) {\n      if (upper === undefined) {\n        upper = lower;\n        lower = undefined;\n      }\n      if (upper !== undefined) {\n        upper = toNumber(upper);\n        upper = upper === upper ? upper : 0;\n      }\n      if (lower !== undefined) {\n        lower = toNumber(lower);\n        lower = lower === lower ? lower : 0;\n      }\n      return baseClamp(toNumber(number), lower, upper);\n    }\n\n    /**\n     * Checks if `n` is between `start` and up to, but not including, `end`. If\n     * `end` is not specified, it's set to `start` with `start` then set to `0`.\n     * If `start` is greater than `end` the params are swapped to support\n     * negative ranges.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.3.0\n     * @category Number\n     * @param {number} number The number to check.\n     * @param {number} [start=0] The start of the range.\n     * @param {number} end The end of the range.\n     * @returns {boolean} Returns `true` if `number` is in the range, else `false`.\n     * @see _.range, _.rangeRight\n     * @example\n     *\n     * _.inRange(3, 2, 4);\n     * // => true\n     *\n     * _.inRange(4, 8);\n     * // => true\n     *\n     * _.inRange(4, 2);\n     * // => false\n     *\n     * _.inRange(2, 2);\n     * // => false\n     *\n     * _.inRange(1.2, 2);\n     * // => true\n     *\n     * _.inRange(5.2, 4);\n     * // => false\n     *\n     * _.inRange(-3, -2, -6);\n     * // => true\n     */\n    function inRange(number, start, end) {\n      start = toFinite(start);\n      if (end === undefined) {\n        end = start;\n        start = 0;\n      } else {\n        end = toFinite(end);\n      }\n      number = toNumber(number);\n      return baseInRange(number, start, end);\n    }\n\n    /**\n     * Produces a random number between the inclusive `lower` and `upper` bounds.\n     * If only one argument is provided a number between `0` and the given number\n     * is returned. If `floating` is `true`, or either `lower` or `upper` are\n     * floats, a floating-point number is returned instead of an integer.\n     *\n     * **Note:** JavaScript follows the IEEE-754 standard for resolving\n     * floating-point values which can produce unexpected results.\n     *\n     * @static\n     * @memberOf _\n     * @since 0.7.0\n     * @category Number\n     * @param {number} [lower=0] The lower bound.\n     * @param {number} [upper=1] The upper bound.\n     * @param {boolean} [floating] Specify returning a floating-point number.\n     * @returns {number} Returns the random number.\n     * @example\n     *\n     * _.random(0, 5);\n     * // => an integer between 0 and 5\n     *\n     * _.random(5);\n     * // => also an integer between 0 and 5\n     *\n     * _.random(5, true);\n     * // => a floating-point number between 0 and 5\n     *\n     * _.random(1.2, 5.2);\n     * // => a floating-point number between 1.2 and 5.2\n     */\n    function random(lower, upper, floating) {\n      if (floating && typeof floating != 'boolean' && isIterateeCall(lower, upper, floating)) {\n        upper = floating = undefined;\n      }\n      if (floating === undefined) {\n        if (typeof upper == 'boolean') {\n          floating = upper;\n          upper = undefined;\n        }\n        else if (typeof lower == 'boolean') {\n          floating = lower;\n          lower = undefined;\n        }\n      }\n      if (lower === undefined && upper === undefined) {\n        lower = 0;\n        upper = 1;\n      }\n      else {\n        lower = toFinite(lower);\n        if (upper === undefined) {\n          upper = lower;\n          lower = 0;\n        } else {\n          upper = toFinite(upper);\n        }\n      }\n      if (lower > upper) {\n        var temp = lower;\n        lower = upper;\n        upper = temp;\n      }\n      if (floating || lower % 1 || upper % 1) {\n        var rand = nativeRandom();\n        return nativeMin(lower + (rand * (upper - lower + freeParseFloat('1e-' + ((rand + '').length - 1)))), upper);\n      }\n      return baseRandom(lower, upper);\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Converts `string` to [camel case](https://en.wikipedia.org/wiki/CamelCase).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the camel cased string.\n     * @example\n     *\n     * _.camelCase('Foo Bar');\n     * // => 'fooBar'\n     *\n     * _.camelCase('--foo-bar--');\n     * // => 'fooBar'\n     *\n     * _.camelCase('__FOO_BAR__');\n     * // => 'fooBar'\n     */\n    var camelCase = createCompounder(function(result, word, index) {\n      word = word.toLowerCase();\n      return result + (index ? capitalize(word) : word);\n    });\n\n    /**\n     * Converts the first character of `string` to upper case and the remaining\n     * to lower case.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to capitalize.\n     * @returns {string} Returns the capitalized string.\n     * @example\n     *\n     * _.capitalize('FRED');\n     * // => 'Fred'\n     */\n    function capitalize(string) {\n      return upperFirst(toString(string).toLowerCase());\n    }\n\n    /**\n     * Deburrs `string` by converting\n     * [Latin-1 Supplement](https://en.wikipedia.org/wiki/Latin-1_Supplement_(Unicode_block)#Character_table)\n     * and [Latin Extended-A](https://en.wikipedia.org/wiki/Latin_Extended-A)\n     * letters to basic Latin letters and removing\n     * [combining diacritical marks](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to deburr.\n     * @returns {string} Returns the deburred string.\n     * @example\n     *\n     * _.deburr('dj vu');\n     * // => 'deja vu'\n     */\n    function deburr(string) {\n      string = toString(string);\n      return string && string.replace(reLatin, deburrLetter).replace(reComboMark, '');\n    }\n\n    /**\n     * Checks if `string` ends with the given target string.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to inspect.\n     * @param {string} [target] The string to search for.\n     * @param {number} [position=string.length] The position to search up to.\n     * @returns {boolean} Returns `true` if `string` ends with `target`,\n     *  else `false`.\n     * @example\n     *\n     * _.endsWith('abc', 'c');\n     * // => true\n     *\n     * _.endsWith('abc', 'b');\n     * // => false\n     *\n     * _.endsWith('abc', 'b', 2);\n     * // => true\n     */\n    function endsWith(string, target, position) {\n      string = toString(string);\n      target = baseToString(target);\n\n      var length = string.length;\n      position = position === undefined\n        ? length\n        : baseClamp(toInteger(position), 0, length);\n\n      var end = position;\n      position -= target.length;\n      return position >= 0 && string.slice(position, end) == target;\n    }\n\n    /**\n     * Converts the characters \"&\", \"<\", \">\", '\"', and \"'\" in `string` to their\n     * corresponding HTML entities.\n     *\n     * **Note:** No other characters are escaped. To escape additional\n     * characters use a third-party library like [_he_](https://mths.be/he).\n     *\n     * Though the \">\" character is escaped for symmetry, characters like\n     * \">\" and \"/\" don't need escaping in HTML and have no special meaning\n     * unless they're part of a tag or unquoted attribute value. See\n     * [Mathias Bynens's article](https://mathiasbynens.be/notes/ambiguous-ampersands)\n     * (under \"semi-related fun fact\") for more details.\n     *\n     * When working with HTML you should always\n     * [quote attribute values](http://wonko.com/post/html-escaping) to reduce\n     * XSS vectors.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category String\n     * @param {string} [string=''] The string to escape.\n     * @returns {string} Returns the escaped string.\n     * @example\n     *\n     * _.escape('fred, barney, & pebbles');\n     * // => 'fred, barney, &amp; pebbles'\n     */\n    function escape(string) {\n      string = toString(string);\n      return (string && reHasUnescapedHtml.test(string))\n        ? string.replace(reUnescapedHtml, escapeHtmlChar)\n        : string;\n    }\n\n    /**\n     * Escapes the `RegExp` special characters \"^\", \"$\", \"\\\", \".\", \"*\", \"+\",\n     * \"?\", \"(\", \")\", \"[\", \"]\", \"{\", \"}\", and \"|\" in `string`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to escape.\n     * @returns {string} Returns the escaped string.\n     * @example\n     *\n     * _.escapeRegExp('[lodash](https://lodash.com/)');\n     * // => '\\[lodash\\]\\(https://lodash\\.com/\\)'\n     */\n    function escapeRegExp(string) {\n      string = toString(string);\n      return (string && reHasRegExpChar.test(string))\n        ? string.replace(reRegExpChar, '\\\\$&')\n        : string;\n    }\n\n    /**\n     * Converts `string` to\n     * [kebab case](https://en.wikipedia.org/wiki/Letter_case#Special_case_styles).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the kebab cased string.\n     * @example\n     *\n     * _.kebabCase('Foo Bar');\n     * // => 'foo-bar'\n     *\n     * _.kebabCase('fooBar');\n     * // => 'foo-bar'\n     *\n     * _.kebabCase('__FOO_BAR__');\n     * // => 'foo-bar'\n     */\n    var kebabCase = createCompounder(function(result, word, index) {\n      return result + (index ? '-' : '') + word.toLowerCase();\n    });\n\n    /**\n     * Converts `string`, as space separated words, to lower case.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the lower cased string.\n     * @example\n     *\n     * _.lowerCase('--Foo-Bar--');\n     * // => 'foo bar'\n     *\n     * _.lowerCase('fooBar');\n     * // => 'foo bar'\n     *\n     * _.lowerCase('__FOO_BAR__');\n     * // => 'foo bar'\n     */\n    var lowerCase = createCompounder(function(result, word, index) {\n      return result + (index ? ' ' : '') + word.toLowerCase();\n    });\n\n    /**\n     * Converts the first character of `string` to lower case.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the converted string.\n     * @example\n     *\n     * _.lowerFirst('Fred');\n     * // => 'fred'\n     *\n     * _.lowerFirst('FRED');\n     * // => 'fRED'\n     */\n    var lowerFirst = createCaseFirst('toLowerCase');\n\n    /**\n     * Pads `string` on the left and right sides if it's shorter than `length`.\n     * Padding characters are truncated if they can't be evenly divided by `length`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to pad.\n     * @param {number} [length=0] The padding length.\n     * @param {string} [chars=' '] The string used as padding.\n     * @returns {string} Returns the padded string.\n     * @example\n     *\n     * _.pad('abc', 8);\n     * // => '  abc   '\n     *\n     * _.pad('abc', 8, '_-');\n     * // => '_-abc_-_'\n     *\n     * _.pad('abc', 3);\n     * // => 'abc'\n     */\n    function pad(string, length, chars) {\n      string = toString(string);\n      length = toInteger(length);\n\n      var strLength = length ? stringSize(string) : 0;\n      if (!length || strLength >= length) {\n        return string;\n      }\n      var mid = (length - strLength) / 2;\n      return (\n        createPadding(nativeFloor(mid), chars) +\n        string +\n        createPadding(nativeCeil(mid), chars)\n      );\n    }\n\n    /**\n     * Pads `string` on the right side if it's shorter than `length`. Padding\n     * characters are truncated if they exceed `length`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to pad.\n     * @param {number} [length=0] The padding length.\n     * @param {string} [chars=' '] The string used as padding.\n     * @returns {string} Returns the padded string.\n     * @example\n     *\n     * _.padEnd('abc', 6);\n     * // => 'abc   '\n     *\n     * _.padEnd('abc', 6, '_-');\n     * // => 'abc_-_'\n     *\n     * _.padEnd('abc', 3);\n     * // => 'abc'\n     */\n    function padEnd(string, length, chars) {\n      string = toString(string);\n      length = toInteger(length);\n\n      var strLength = length ? stringSize(string) : 0;\n      return (length && strLength < length)\n        ? (string + createPadding(length - strLength, chars))\n        : string;\n    }\n\n    /**\n     * Pads `string` on the left side if it's shorter than `length`. Padding\n     * characters are truncated if they exceed `length`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to pad.\n     * @param {number} [length=0] The padding length.\n     * @param {string} [chars=' '] The string used as padding.\n     * @returns {string} Returns the padded string.\n     * @example\n     *\n     * _.padStart('abc', 6);\n     * // => '   abc'\n     *\n     * _.padStart('abc', 6, '_-');\n     * // => '_-_abc'\n     *\n     * _.padStart('abc', 3);\n     * // => 'abc'\n     */\n    function padStart(string, length, chars) {\n      string = toString(string);\n      length = toInteger(length);\n\n      var strLength = length ? stringSize(string) : 0;\n      return (length && strLength < length)\n        ? (createPadding(length - strLength, chars) + string)\n        : string;\n    }\n\n    /**\n     * Converts `string` to an integer of the specified radix. If `radix` is\n     * `undefined` or `0`, a `radix` of `10` is used unless `value` is a\n     * hexadecimal, in which case a `radix` of `16` is used.\n     *\n     * **Note:** This method aligns with the\n     * [ES5 implementation](https://es5.github.io/#x15.1.2.2) of `parseInt`.\n     *\n     * @static\n     * @memberOf _\n     * @since 1.1.0\n     * @category String\n     * @param {string} string The string to convert.\n     * @param {number} [radix=10] The radix to interpret `value` by.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {number} Returns the converted integer.\n     * @example\n     *\n     * _.parseInt('08');\n     * // => 8\n     *\n     * _.map(['6', '08', '10'], _.parseInt);\n     * // => [6, 8, 10]\n     */\n    function parseInt(string, radix, guard) {\n      if (guard || radix == null) {\n        radix = 0;\n      } else if (radix) {\n        radix = +radix;\n      }\n      return nativeParseInt(toString(string).replace(reTrimStart, ''), radix || 0);\n    }\n\n    /**\n     * Repeats the given string `n` times.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to repeat.\n     * @param {number} [n=1] The number of times to repeat the string.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {string} Returns the repeated string.\n     * @example\n     *\n     * _.repeat('*', 3);\n     * // => '***'\n     *\n     * _.repeat('abc', 2);\n     * // => 'abcabc'\n     *\n     * _.repeat('abc', 0);\n     * // => ''\n     */\n    function repeat(string, n, guard) {\n      if ((guard ? isIterateeCall(string, n, guard) : n === undefined)) {\n        n = 1;\n      } else {\n        n = toInteger(n);\n      }\n      return baseRepeat(toString(string), n);\n    }\n\n    /**\n     * Replaces matches for `pattern` in `string` with `replacement`.\n     *\n     * **Note:** This method is based on\n     * [`String#replace`](https://mdn.io/String/replace).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to modify.\n     * @param {RegExp|string} pattern The pattern to replace.\n     * @param {Function|string} replacement The match replacement.\n     * @returns {string} Returns the modified string.\n     * @example\n     *\n     * _.replace('Hi Fred', 'Fred', 'Barney');\n     * // => 'Hi Barney'\n     */\n    function replace() {\n      var args = arguments,\n          string = toString(args[0]);\n\n      return args.length < 3 ? string : string.replace(args[1], args[2]);\n    }\n\n    /**\n     * Converts `string` to\n     * [snake case](https://en.wikipedia.org/wiki/Snake_case).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the snake cased string.\n     * @example\n     *\n     * _.snakeCase('Foo Bar');\n     * // => 'foo_bar'\n     *\n     * _.snakeCase('fooBar');\n     * // => 'foo_bar'\n     *\n     * _.snakeCase('--FOO-BAR--');\n     * // => 'foo_bar'\n     */\n    var snakeCase = createCompounder(function(result, word, index) {\n      return result + (index ? '_' : '') + word.toLowerCase();\n    });\n\n    /**\n     * Splits `string` by `separator`.\n     *\n     * **Note:** This method is based on\n     * [`String#split`](https://mdn.io/String/split).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to split.\n     * @param {RegExp|string} separator The separator pattern to split by.\n     * @param {number} [limit] The length to truncate results to.\n     * @returns {Array} Returns the string segments.\n     * @example\n     *\n     * _.split('a-b-c', '-', 2);\n     * // => ['a', 'b']\n     */\n    function split(string, separator, limit) {\n      if (limit && typeof limit != 'number' && isIterateeCall(string, separator, limit)) {\n        separator = limit = undefined;\n      }\n      limit = limit === undefined ? MAX_ARRAY_LENGTH : limit >>> 0;\n      if (!limit) {\n        return [];\n      }\n      string = toString(string);\n      if (string && (\n            typeof separator == 'string' ||\n            (separator != null && !isRegExp(separator))\n          )) {\n        separator = baseToString(separator);\n        if (!separator && hasUnicode(string)) {\n          return castSlice(stringToArray(string), 0, limit);\n        }\n      }\n      return string.split(separator, limit);\n    }\n\n    /**\n     * Converts `string` to\n     * [start case](https://en.wikipedia.org/wiki/Letter_case#Stylistic_or_specialised_usage).\n     *\n     * @static\n     * @memberOf _\n     * @since 3.1.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the start cased string.\n     * @example\n     *\n     * _.startCase('--foo-bar--');\n     * // => 'Foo Bar'\n     *\n     * _.startCase('fooBar');\n     * // => 'Foo Bar'\n     *\n     * _.startCase('__FOO_BAR__');\n     * // => 'FOO BAR'\n     */\n    var startCase = createCompounder(function(result, word, index) {\n      return result + (index ? ' ' : '') + upperFirst(word);\n    });\n\n    /**\n     * Checks if `string` starts with the given target string.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to inspect.\n     * @param {string} [target] The string to search for.\n     * @param {number} [position=0] The position to search from.\n     * @returns {boolean} Returns `true` if `string` starts with `target`,\n     *  else `false`.\n     * @example\n     *\n     * _.startsWith('abc', 'a');\n     * // => true\n     *\n     * _.startsWith('abc', 'b');\n     * // => false\n     *\n     * _.startsWith('abc', 'b', 1);\n     * // => true\n     */\n    function startsWith(string, target, position) {\n      string = toString(string);\n      position = position == null\n        ? 0\n        : baseClamp(toInteger(position), 0, string.length);\n\n      target = baseToString(target);\n      return string.slice(position, position + target.length) == target;\n    }\n\n    /**\n     * Creates a compiled template function that can interpolate data properties\n     * in \"interpolate\" delimiters, HTML-escape interpolated data properties in\n     * \"escape\" delimiters, and execute JavaScript in \"evaluate\" delimiters. Data\n     * properties may be accessed as free variables in the template. If a setting\n     * object is given, it takes precedence over `_.templateSettings` values.\n     *\n     * **Note:** In the development build `_.template` utilizes\n     * [sourceURLs](http://www.html5rocks.com/en/tutorials/developertools/sourcemaps/#toc-sourceurl)\n     * for easier debugging.\n     *\n     * For more information on precompiling templates see\n     * [lodash's custom builds documentation](https://lodash.com/custom-builds).\n     *\n     * For more information on Chrome extension sandboxes see\n     * [Chrome's extensions documentation](https://developer.chrome.com/extensions/sandboxingEval).\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category String\n     * @param {string} [string=''] The template string.\n     * @param {Object} [options={}] The options object.\n     * @param {RegExp} [options.escape=_.templateSettings.escape]\n     *  The HTML \"escape\" delimiter.\n     * @param {RegExp} [options.evaluate=_.templateSettings.evaluate]\n     *  The \"evaluate\" delimiter.\n     * @param {Object} [options.imports=_.templateSettings.imports]\n     *  An object to import into the template as free variables.\n     * @param {RegExp} [options.interpolate=_.templateSettings.interpolate]\n     *  The \"interpolate\" delimiter.\n     * @param {string} [options.sourceURL='lodash.templateSources[n]']\n     *  The sourceURL of the compiled template.\n     * @param {string} [options.variable='obj']\n     *  The data object variable name.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Function} Returns the compiled template function.\n     * @example\n     *\n     * // Use the \"interpolate\" delimiter to create a compiled template.\n     * var compiled = _.template('hello <%= user %>!');\n     * compiled({ 'user': 'fred' });\n     * // => 'hello fred!'\n     *\n     * // Use the HTML \"escape\" delimiter to escape data property values.\n     * var compiled = _.template('<b><%- value %></b>');\n     * compiled({ 'value': '<script>' });\n     * // => '<b>&lt;script&gt;</b>'\n     *\n     * // Use the \"evaluate\" delimiter to execute JavaScript and generate HTML.\n     * var compiled = _.template('<% _.forEach(users, function(user) { %><li><%- user %></li><% }); %>');\n     * compiled({ 'users': ['fred', 'barney'] });\n     * // => '<li>fred</li><li>barney</li>'\n     *\n     * // Use the internal `print` function in \"evaluate\" delimiters.\n     * var compiled = _.template('<% print(\"hello \" + user); %>!');\n     * compiled({ 'user': 'barney' });\n     * // => 'hello barney!'\n     *\n     * // Use the ES template literal delimiter as an \"interpolate\" delimiter.\n     * // Disable support by replacing the \"interpolate\" delimiter.\n     * var compiled = _.template('hello ${ user }!');\n     * compiled({ 'user': 'pebbles' });\n     * // => 'hello pebbles!'\n     *\n     * // Use backslashes to treat delimiters as plain text.\n     * var compiled = _.template('<%= \"\\\\<%- value %\\\\>\" %>');\n     * compiled({ 'value': 'ignored' });\n     * // => '<%- value %>'\n     *\n     * // Use the `imports` option to import `jQuery` as `jq`.\n     * var text = '<% jq.each(users, function(user) { %><li><%- user %></li><% }); %>';\n     * var compiled = _.template(text, { 'imports': { 'jq': jQuery } });\n     * compiled({ 'users': ['fred', 'barney'] });\n     * // => '<li>fred</li><li>barney</li>'\n     *\n     * // Use the `sourceURL` option to specify a custom sourceURL for the template.\n     * var compiled = _.template('hello <%= user %>!', { 'sourceURL': '/basic/greeting.jst' });\n     * compiled(data);\n     * // => Find the source of \"greeting.jst\" under the Sources tab or Resources panel of the web inspector.\n     *\n     * // Use the `variable` option to ensure a with-statement isn't used in the compiled template.\n     * var compiled = _.template('hi <%= data.user %>!', { 'variable': 'data' });\n     * compiled.source;\n     * // => function(data) {\n     * //   var __t, __p = '';\n     * //   __p += 'hi ' + ((__t = ( data.user )) == null ? '' : __t) + '!';\n     * //   return __p;\n     * // }\n     *\n     * // Use custom template delimiters.\n     * _.templateSettings.interpolate = /{{([\\s\\S]+?)}}/g;\n     * var compiled = _.template('hello {{ user }}!');\n     * compiled({ 'user': 'mustache' });\n     * // => 'hello mustache!'\n     *\n     * // Use the `source` property to inline compiled templates for meaningful\n     * // line numbers in error messages and stack traces.\n     * fs.writeFileSync(path.join(process.cwd(), 'jst.js'), '\\\n     *   var JST = {\\\n     *     \"main\": ' + _.template(mainText).source + '\\\n     *   };\\\n     * ');\n     */\n    function template(string, options, guard) {\n      // Based on John Resig's `tmpl` implementation\n      // (http://ejohn.org/blog/javascript-micro-templating/)\n      // and Laura Doktorova's doT.js (https://github.com/olado/doT).\n      var settings = lodash.templateSettings;\n\n      if (guard && isIterateeCall(string, options, guard)) {\n        options = undefined;\n      }\n      string = toString(string);\n      options = assignInWith({}, options, settings, customDefaultsAssignIn);\n\n      var imports = assignInWith({}, options.imports, settings.imports, customDefaultsAssignIn),\n          importsKeys = keys(imports),\n          importsValues = baseValues(imports, importsKeys);\n\n      var isEscaping,\n          isEvaluating,\n          index = 0,\n          interpolate = options.interpolate || reNoMatch,\n          source = \"__p += '\";\n\n      // Compile the regexp to match each delimiter.\n      var reDelimiters = RegExp(\n        (options.escape || reNoMatch).source + '|' +\n        interpolate.source + '|' +\n        (interpolate === reInterpolate ? reEsTemplate : reNoMatch).source + '|' +\n        (options.evaluate || reNoMatch).source + '|$'\n      , 'g');\n\n      // Use a sourceURL for easier debugging.\n      // The sourceURL gets injected into the source that's eval-ed, so be careful\n      // to normalize all kinds of whitespace, so e.g. newlines (and unicode versions of it) can't sneak in\n      // and escape the comment, thus injecting code that gets evaled.\n      var sourceURL = '//# sourceURL=' +\n        (hasOwnProperty.call(options, 'sourceURL')\n          ? (options.sourceURL + '').replace(/\\s/g, ' ')\n          : ('lodash.templateSources[' + (++templateCounter) + ']')\n        ) + '\\n';\n\n      string.replace(reDelimiters, function(match, escapeValue, interpolateValue, esTemplateValue, evaluateValue, offset) {\n        interpolateValue || (interpolateValue = esTemplateValue);\n\n        // Escape characters that can't be included in string literals.\n        source += string.slice(index, offset).replace(reUnescapedString, escapeStringChar);\n\n        // Replace delimiters with snippets.\n        if (escapeValue) {\n          isEscaping = true;\n          source += \"' +\\n__e(\" + escapeValue + \") +\\n'\";\n        }\n        if (evaluateValue) {\n          isEvaluating = true;\n          source += \"';\\n\" + evaluateValue + \";\\n__p += '\";\n        }\n        if (interpolateValue) {\n          source += \"' +\\n((__t = (\" + interpolateValue + \")) == null ? '' : __t) +\\n'\";\n        }\n        index = offset + match.length;\n\n        // The JS engine embedded in Adobe products needs `match` returned in\n        // order to produce the correct `offset` value.\n        return match;\n      });\n\n      source += \"';\\n\";\n\n      // If `variable` is not specified wrap a with-statement around the generated\n      // code to add the data object to the top of the scope chain.\n      var variable = hasOwnProperty.call(options, 'variable') && options.variable;\n      if (!variable) {\n        source = 'with (obj) {\\n' + source + '\\n}\\n';\n      }\n      // Throw an error if a forbidden character was found in `variable`, to prevent\n      // potential command injection attacks.\n      else if (reForbiddenIdentifierChars.test(variable)) {\n        throw new Error(INVALID_TEMPL_VAR_ERROR_TEXT);\n      }\n\n      // Cleanup code by stripping empty strings.\n      source = (isEvaluating ? source.replace(reEmptyStringLeading, '') : source)\n        .replace(reEmptyStringMiddle, '$1')\n        .replace(reEmptyStringTrailing, '$1;');\n\n      // Frame code as the function body.\n      source = 'function(' + (variable || 'obj') + ') {\\n' +\n        (variable\n          ? ''\n          : 'obj || (obj = {});\\n'\n        ) +\n        \"var __t, __p = ''\" +\n        (isEscaping\n           ? ', __e = _.escape'\n           : ''\n        ) +\n        (isEvaluating\n          ? ', __j = Array.prototype.join;\\n' +\n            \"function print() { __p += __j.call(arguments, '') }\\n\"\n          : ';\\n'\n        ) +\n        source +\n        'return __p\\n}';\n\n      var result = attempt(function() {\n        return Function(importsKeys, sourceURL + 'return ' + source)\n          .apply(undefined, importsValues);\n      });\n\n      // Provide the compiled function's source by its `toString` method or\n      // the `source` property as a convenience for inlining compiled templates.\n      result.source = source;\n      if (isError(result)) {\n        throw result;\n      }\n      return result;\n    }\n\n    /**\n     * Converts `string`, as a whole, to lower case just like\n     * [String#toLowerCase](https://mdn.io/toLowerCase).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the lower cased string.\n     * @example\n     *\n     * _.toLower('--Foo-Bar--');\n     * // => '--foo-bar--'\n     *\n     * _.toLower('fooBar');\n     * // => 'foobar'\n     *\n     * _.toLower('__FOO_BAR__');\n     * // => '__foo_bar__'\n     */\n    function toLower(value) {\n      return toString(value).toLowerCase();\n    }\n\n    /**\n     * Converts `string`, as a whole, to upper case just like\n     * [String#toUpperCase](https://mdn.io/toUpperCase).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the upper cased string.\n     * @example\n     *\n     * _.toUpper('--foo-bar--');\n     * // => '--FOO-BAR--'\n     *\n     * _.toUpper('fooBar');\n     * // => 'FOOBAR'\n     *\n     * _.toUpper('__foo_bar__');\n     * // => '__FOO_BAR__'\n     */\n    function toUpper(value) {\n      return toString(value).toUpperCase();\n    }\n\n    /**\n     * Removes leading and trailing whitespace or specified characters from `string`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to trim.\n     * @param {string} [chars=whitespace] The characters to trim.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {string} Returns the trimmed string.\n     * @example\n     *\n     * _.trim('  abc  ');\n     * // => 'abc'\n     *\n     * _.trim('-_-abc-_-', '_-');\n     * // => 'abc'\n     *\n     * _.map(['  foo  ', '  bar  '], _.trim);\n     * // => ['foo', 'bar']\n     */\n    function trim(string, chars, guard) {\n      string = toString(string);\n      if (string && (guard || chars === undefined)) {\n        return baseTrim(string);\n      }\n      if (!string || !(chars = baseToString(chars))) {\n        return string;\n      }\n      var strSymbols = stringToArray(string),\n          chrSymbols = stringToArray(chars),\n          start = charsStartIndex(strSymbols, chrSymbols),\n          end = charsEndIndex(strSymbols, chrSymbols) + 1;\n\n      return castSlice(strSymbols, start, end).join('');\n    }\n\n    /**\n     * Removes trailing whitespace or specified characters from `string`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to trim.\n     * @param {string} [chars=whitespace] The characters to trim.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {string} Returns the trimmed string.\n     * @example\n     *\n     * _.trimEnd('  abc  ');\n     * // => '  abc'\n     *\n     * _.trimEnd('-_-abc-_-', '_-');\n     * // => '-_-abc'\n     */\n    function trimEnd(string, chars, guard) {\n      string = toString(string);\n      if (string && (guard || chars === undefined)) {\n        return string.slice(0, trimmedEndIndex(string) + 1);\n      }\n      if (!string || !(chars = baseToString(chars))) {\n        return string;\n      }\n      var strSymbols = stringToArray(string),\n          end = charsEndIndex(strSymbols, stringToArray(chars)) + 1;\n\n      return castSlice(strSymbols, 0, end).join('');\n    }\n\n    /**\n     * Removes leading whitespace or specified characters from `string`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to trim.\n     * @param {string} [chars=whitespace] The characters to trim.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {string} Returns the trimmed string.\n     * @example\n     *\n     * _.trimStart('  abc  ');\n     * // => 'abc  '\n     *\n     * _.trimStart('-_-abc-_-', '_-');\n     * // => 'abc-_-'\n     */\n    function trimStart(string, chars, guard) {\n      string = toString(string);\n      if (string && (guard || chars === undefined)) {\n        return string.replace(reTrimStart, '');\n      }\n      if (!string || !(chars = baseToString(chars))) {\n        return string;\n      }\n      var strSymbols = stringToArray(string),\n          start = charsStartIndex(strSymbols, stringToArray(chars));\n\n      return castSlice(strSymbols, start).join('');\n    }\n\n    /**\n     * Truncates `string` if it's longer than the given maximum string length.\n     * The last characters of the truncated string are replaced with the omission\n     * string which defaults to \"...\".\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to truncate.\n     * @param {Object} [options={}] The options object.\n     * @param {number} [options.length=30] The maximum string length.\n     * @param {string} [options.omission='...'] The string to indicate text is omitted.\n     * @param {RegExp|string} [options.separator] The separator pattern to truncate to.\n     * @returns {string} Returns the truncated string.\n     * @example\n     *\n     * _.truncate('hi-diddly-ho there, neighborino');\n     * // => 'hi-diddly-ho there, neighbo...'\n     *\n     * _.truncate('hi-diddly-ho there, neighborino', {\n     *   'length': 24,\n     *   'separator': ' '\n     * });\n     * // => 'hi-diddly-ho there,...'\n     *\n     * _.truncate('hi-diddly-ho there, neighborino', {\n     *   'length': 24,\n     *   'separator': /,? +/\n     * });\n     * // => 'hi-diddly-ho there...'\n     *\n     * _.truncate('hi-diddly-ho there, neighborino', {\n     *   'omission': ' [...]'\n     * });\n     * // => 'hi-diddly-ho there, neig [...]'\n     */\n    function truncate(string, options) {\n      var length = DEFAULT_TRUNC_LENGTH,\n          omission = DEFAULT_TRUNC_OMISSION;\n\n      if (isObject(options)) {\n        var separator = 'separator' in options ? options.separator : separator;\n        length = 'length' in options ? toInteger(options.length) : length;\n        omission = 'omission' in options ? baseToString(options.omission) : omission;\n      }\n      string = toString(string);\n\n      var strLength = string.length;\n      if (hasUnicode(string)) {\n        var strSymbols = stringToArray(string);\n        strLength = strSymbols.length;\n      }\n      if (length >= strLength) {\n        return string;\n      }\n      var end = length - stringSize(omission);\n      if (end < 1) {\n        return omission;\n      }\n      var result = strSymbols\n        ? castSlice(strSymbols, 0, end).join('')\n        : string.slice(0, end);\n\n      if (separator === undefined) {\n        return result + omission;\n      }\n      if (strSymbols) {\n        end += (result.length - end);\n      }\n      if (isRegExp(separator)) {\n        if (string.slice(end).search(separator)) {\n          var match,\n              substring = result;\n\n          if (!separator.global) {\n            separator = RegExp(separator.source, toString(reFlags.exec(separator)) + 'g');\n          }\n          separator.lastIndex = 0;\n          while ((match = separator.exec(substring))) {\n            var newEnd = match.index;\n          }\n          result = result.slice(0, newEnd === undefined ? end : newEnd);\n        }\n      } else if (string.indexOf(baseToString(separator), end) != end) {\n        var index = result.lastIndexOf(separator);\n        if (index > -1) {\n          result = result.slice(0, index);\n        }\n      }\n      return result + omission;\n    }\n\n    /**\n     * The inverse of `_.escape`; this method converts the HTML entities\n     * `&amp;`, `&lt;`, `&gt;`, `&quot;`, and `&#39;` in `string` to\n     * their corresponding characters.\n     *\n     * **Note:** No other HTML entities are unescaped. To unescape additional\n     * HTML entities use a third-party library like [_he_](https://mths.be/he).\n     *\n     * @static\n     * @memberOf _\n     * @since 0.6.0\n     * @category String\n     * @param {string} [string=''] The string to unescape.\n     * @returns {string} Returns the unescaped string.\n     * @example\n     *\n     * _.unescape('fred, barney, &amp; pebbles');\n     * // => 'fred, barney, & pebbles'\n     */\n    function unescape(string) {\n      string = toString(string);\n      return (string && reHasEscapedHtml.test(string))\n        ? string.replace(reEscapedHtml, unescapeHtmlChar)\n        : string;\n    }\n\n    /**\n     * Converts `string`, as space separated words, to upper case.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the upper cased string.\n     * @example\n     *\n     * _.upperCase('--foo-bar');\n     * // => 'FOO BAR'\n     *\n     * _.upperCase('fooBar');\n     * // => 'FOO BAR'\n     *\n     * _.upperCase('__foo_bar__');\n     * // => 'FOO BAR'\n     */\n    var upperCase = createCompounder(function(result, word, index) {\n      return result + (index ? ' ' : '') + word.toUpperCase();\n    });\n\n    /**\n     * Converts the first character of `string` to upper case.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category String\n     * @param {string} [string=''] The string to convert.\n     * @returns {string} Returns the converted string.\n     * @example\n     *\n     * _.upperFirst('fred');\n     * // => 'Fred'\n     *\n     * _.upperFirst('FRED');\n     * // => 'FRED'\n     */\n    var upperFirst = createCaseFirst('toUpperCase');\n\n    /**\n     * Splits `string` into an array of its words.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category String\n     * @param {string} [string=''] The string to inspect.\n     * @param {RegExp|string} [pattern] The pattern to match words.\n     * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n     * @returns {Array} Returns the words of `string`.\n     * @example\n     *\n     * _.words('fred, barney, & pebbles');\n     * // => ['fred', 'barney', 'pebbles']\n     *\n     * _.words('fred, barney, & pebbles', /[^, ]+/g);\n     * // => ['fred', 'barney', '&', 'pebbles']\n     */\n    function words(string, pattern, guard) {\n      string = toString(string);\n      pattern = guard ? undefined : pattern;\n\n      if (pattern === undefined) {\n        return hasUnicodeWord(string) ? unicodeWords(string) : asciiWords(string);\n      }\n      return string.match(pattern) || [];\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Attempts to invoke `func`, returning either the result or the caught error\n     * object. Any additional arguments are provided to `func` when it's invoked.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Util\n     * @param {Function} func The function to attempt.\n     * @param {...*} [args] The arguments to invoke `func` with.\n     * @returns {*} Returns the `func` result or error object.\n     * @example\n     *\n     * // Avoid throwing errors for invalid selectors.\n     * var elements = _.attempt(function(selector) {\n     *   return document.querySelectorAll(selector);\n     * }, '>_>');\n     *\n     * if (_.isError(elements)) {\n     *   elements = [];\n     * }\n     */\n    var attempt = baseRest(function(func, args) {\n      try {\n        return apply(func, undefined, args);\n      } catch (e) {\n        return isError(e) ? e : new Error(e);\n      }\n    });\n\n    /**\n     * Binds methods of an object to the object itself, overwriting the existing\n     * method.\n     *\n     * **Note:** This method doesn't set the \"length\" property of bound functions.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Util\n     * @param {Object} object The object to bind and assign the bound methods to.\n     * @param {...(string|string[])} methodNames The object method names to bind.\n     * @returns {Object} Returns `object`.\n     * @example\n     *\n     * var view = {\n     *   'label': 'docs',\n     *   'click': function() {\n     *     console.log('clicked ' + this.label);\n     *   }\n     * };\n     *\n     * _.bindAll(view, ['click']);\n     * jQuery(element).on('click', view.click);\n     * // => Logs 'clicked docs' when clicked.\n     */\n    var bindAll = flatRest(function(object, methodNames) {\n      arrayEach(methodNames, function(key) {\n        key = toKey(key);\n        baseAssignValue(object, key, bind(object[key], object));\n      });\n      return object;\n    });\n\n    /**\n     * Creates a function that iterates over `pairs` and invokes the corresponding\n     * function of the first predicate to return truthy. The predicate-function\n     * pairs are invoked with the `this` binding and arguments of the created\n     * function.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Util\n     * @param {Array} pairs The predicate-function pairs.\n     * @returns {Function} Returns the new composite function.\n     * @example\n     *\n     * var func = _.cond([\n     *   [_.matches({ 'a': 1 }),           _.constant('matches A')],\n     *   [_.conforms({ 'b': _.isNumber }), _.constant('matches B')],\n     *   [_.stubTrue,                      _.constant('no match')]\n     * ]);\n     *\n     * func({ 'a': 1, 'b': 2 });\n     * // => 'matches A'\n     *\n     * func({ 'a': 0, 'b': 1 });\n     * // => 'matches B'\n     *\n     * func({ 'a': '1', 'b': '2' });\n     * // => 'no match'\n     */\n    function cond(pairs) {\n      var length = pairs == null ? 0 : pairs.length,\n          toIteratee = getIteratee();\n\n      pairs = !length ? [] : arrayMap(pairs, function(pair) {\n        if (typeof pair[1] != 'function') {\n          throw new TypeError(FUNC_ERROR_TEXT);\n        }\n        return [toIteratee(pair[0]), pair[1]];\n      });\n\n      return baseRest(function(args) {\n        var index = -1;\n        while (++index < length) {\n          var pair = pairs[index];\n          if (apply(pair[0], this, args)) {\n            return apply(pair[1], this, args);\n          }\n        }\n      });\n    }\n\n    /**\n     * Creates a function that invokes the predicate properties of `source` with\n     * the corresponding property values of a given object, returning `true` if\n     * all predicates return truthy, else `false`.\n     *\n     * **Note:** The created function is equivalent to `_.conformsTo` with\n     * `source` partially applied.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Util\n     * @param {Object} source The object of property predicates to conform to.\n     * @returns {Function} Returns the new spec function.\n     * @example\n     *\n     * var objects = [\n     *   { 'a': 2, 'b': 1 },\n     *   { 'a': 1, 'b': 2 }\n     * ];\n     *\n     * _.filter(objects, _.conforms({ 'b': function(n) { return n > 1; } }));\n     * // => [{ 'a': 1, 'b': 2 }]\n     */\n    function conforms(source) {\n      return baseConforms(baseClone(source, CLONE_DEEP_FLAG));\n    }\n\n    /**\n     * Creates a function that returns `value`.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.4.0\n     * @category Util\n     * @param {*} value The value to return from the new function.\n     * @returns {Function} Returns the new constant function.\n     * @example\n     *\n     * var objects = _.times(2, _.constant({ 'a': 1 }));\n     *\n     * console.log(objects);\n     * // => [{ 'a': 1 }, { 'a': 1 }]\n     *\n     * console.log(objects[0] === objects[1]);\n     * // => true\n     */\n    function constant(value) {\n      return function() {\n        return value;\n      };\n    }\n\n    /**\n     * Checks `value` to determine whether a default value should be returned in\n     * its place. The `defaultValue` is returned if `value` is `NaN`, `null`,\n     * or `undefined`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.14.0\n     * @category Util\n     * @param {*} value The value to check.\n     * @param {*} defaultValue The default value.\n     * @returns {*} Returns the resolved value.\n     * @example\n     *\n     * _.defaultTo(1, 10);\n     * // => 1\n     *\n     * _.defaultTo(undefined, 10);\n     * // => 10\n     */\n    function defaultTo(value, defaultValue) {\n      return (value == null || value !== value) ? defaultValue : value;\n    }\n\n    /**\n     * Creates a function that returns the result of invoking the given functions\n     * with the `this` binding of the created function, where each successive\n     * invocation is supplied the return value of the previous.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Util\n     * @param {...(Function|Function[])} [funcs] The functions to invoke.\n     * @returns {Function} Returns the new composite function.\n     * @see _.flowRight\n     * @example\n     *\n     * function square(n) {\n     *   return n * n;\n     * }\n     *\n     * var addSquare = _.flow([_.add, square]);\n     * addSquare(1, 2);\n     * // => 9\n     */\n    var flow = createFlow();\n\n    /**\n     * This method is like `_.flow` except that it creates a function that\n     * invokes the given functions from right to left.\n     *\n     * @static\n     * @since 3.0.0\n     * @memberOf _\n     * @category Util\n     * @param {...(Function|Function[])} [funcs] The functions to invoke.\n     * @returns {Function} Returns the new composite function.\n     * @see _.flow\n     * @example\n     *\n     * function square(n) {\n     *   return n * n;\n     * }\n     *\n     * var addSquare = _.flowRight([square, _.add]);\n     * addSquare(1, 2);\n     * // => 9\n     */\n    var flowRight = createFlow(true);\n\n    /**\n     * This method returns the first argument it receives.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Util\n     * @param {*} value Any value.\n     * @returns {*} Returns `value`.\n     * @example\n     *\n     * var object = { 'a': 1 };\n     *\n     * console.log(_.identity(object) === object);\n     * // => true\n     */\n    function identity(value) {\n      return value;\n    }\n\n    /**\n     * Creates a function that invokes `func` with the arguments of the created\n     * function. If `func` is a property name, the created function returns the\n     * property value for a given element. If `func` is an array or object, the\n     * created function returns `true` for elements that contain the equivalent\n     * source properties, otherwise it returns `false`.\n     *\n     * @static\n     * @since 4.0.0\n     * @memberOf _\n     * @category Util\n     * @param {*} [func=_.identity] The value to convert to a callback.\n     * @returns {Function} Returns the callback.\n     * @example\n     *\n     * var users = [\n     *   { 'user': 'barney', 'age': 36, 'active': true },\n     *   { 'user': 'fred',   'age': 40, 'active': false }\n     * ];\n     *\n     * // The `_.matches` iteratee shorthand.\n     * _.filter(users, _.iteratee({ 'user': 'barney', 'active': true }));\n     * // => [{ 'user': 'barney', 'age': 36, 'active': true }]\n     *\n     * // The `_.matchesProperty` iteratee shorthand.\n     * _.filter(users, _.iteratee(['user', 'fred']));\n     * // => [{ 'user': 'fred', 'age': 40 }]\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.map(users, _.iteratee('user'));\n     * // => ['barney', 'fred']\n     *\n     * // Create custom iteratee shorthands.\n     * _.iteratee = _.wrap(_.iteratee, function(iteratee, func) {\n     *   return !_.isRegExp(func) ? iteratee(func) : function(string) {\n     *     return func.test(string);\n     *   };\n     * });\n     *\n     * _.filter(['abc', 'def'], /ef/);\n     * // => ['def']\n     */\n    function iteratee(func) {\n      return baseIteratee(typeof func == 'function' ? func : baseClone(func, CLONE_DEEP_FLAG));\n    }\n\n    /**\n     * Creates a function that performs a partial deep comparison between a given\n     * object and `source`, returning `true` if the given object has equivalent\n     * property values, else `false`.\n     *\n     * **Note:** The created function is equivalent to `_.isMatch` with `source`\n     * partially applied.\n     *\n     * Partial comparisons will match empty array and empty object `source`\n     * values against any array or object value, respectively. See `_.isEqual`\n     * for a list of supported value comparisons.\n     *\n     * **Note:** Multiple values can be checked by combining several matchers\n     * using `_.overSome`\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Util\n     * @param {Object} source The object of property values to match.\n     * @returns {Function} Returns the new spec function.\n     * @example\n     *\n     * var objects = [\n     *   { 'a': 1, 'b': 2, 'c': 3 },\n     *   { 'a': 4, 'b': 5, 'c': 6 }\n     * ];\n     *\n     * _.filter(objects, _.matches({ 'a': 4, 'c': 6 }));\n     * // => [{ 'a': 4, 'b': 5, 'c': 6 }]\n     *\n     * // Checking for several possible values\n     * _.filter(objects, _.overSome([_.matches({ 'a': 1 }), _.matches({ 'a': 4 })]));\n     * // => [{ 'a': 1, 'b': 2, 'c': 3 }, { 'a': 4, 'b': 5, 'c': 6 }]\n     */\n    function matches(source) {\n      return baseMatches(baseClone(source, CLONE_DEEP_FLAG));\n    }\n\n    /**\n     * Creates a function that performs a partial deep comparison between the\n     * value at `path` of a given object to `srcValue`, returning `true` if the\n     * object value is equivalent, else `false`.\n     *\n     * **Note:** Partial comparisons will match empty array and empty object\n     * `srcValue` values against any array or object value, respectively. See\n     * `_.isEqual` for a list of supported value comparisons.\n     *\n     * **Note:** Multiple values can be checked by combining several matchers\n     * using `_.overSome`\n     *\n     * @static\n     * @memberOf _\n     * @since 3.2.0\n     * @category Util\n     * @param {Array|string} path The path of the property to get.\n     * @param {*} srcValue The value to match.\n     * @returns {Function} Returns the new spec function.\n     * @example\n     *\n     * var objects = [\n     *   { 'a': 1, 'b': 2, 'c': 3 },\n     *   { 'a': 4, 'b': 5, 'c': 6 }\n     * ];\n     *\n     * _.find(objects, _.matchesProperty('a', 4));\n     * // => { 'a': 4, 'b': 5, 'c': 6 }\n     *\n     * // Checking for several possible values\n     * _.filter(objects, _.overSome([_.matchesProperty('a', 1), _.matchesProperty('a', 4)]));\n     * // => [{ 'a': 1, 'b': 2, 'c': 3 }, { 'a': 4, 'b': 5, 'c': 6 }]\n     */\n    function matchesProperty(path, srcValue) {\n      return baseMatchesProperty(path, baseClone(srcValue, CLONE_DEEP_FLAG));\n    }\n\n    /**\n     * Creates a function that invokes the method at `path` of a given object.\n     * Any additional arguments are provided to the invoked method.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.7.0\n     * @category Util\n     * @param {Array|string} path The path of the method to invoke.\n     * @param {...*} [args] The arguments to invoke the method with.\n     * @returns {Function} Returns the new invoker function.\n     * @example\n     *\n     * var objects = [\n     *   { 'a': { 'b': _.constant(2) } },\n     *   { 'a': { 'b': _.constant(1) } }\n     * ];\n     *\n     * _.map(objects, _.method('a.b'));\n     * // => [2, 1]\n     *\n     * _.map(objects, _.method(['a', 'b']));\n     * // => [2, 1]\n     */\n    var method = baseRest(function(path, args) {\n      return function(object) {\n        return baseInvoke(object, path, args);\n      };\n    });\n\n    /**\n     * The opposite of `_.method`; this method creates a function that invokes\n     * the method at a given path of `object`. Any additional arguments are\n     * provided to the invoked method.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.7.0\n     * @category Util\n     * @param {Object} object The object to query.\n     * @param {...*} [args] The arguments to invoke the method with.\n     * @returns {Function} Returns the new invoker function.\n     * @example\n     *\n     * var array = _.times(3, _.constant),\n     *     object = { 'a': array, 'b': array, 'c': array };\n     *\n     * _.map(['a[2]', 'c[0]'], _.methodOf(object));\n     * // => [2, 0]\n     *\n     * _.map([['a', '2'], ['c', '0']], _.methodOf(object));\n     * // => [2, 0]\n     */\n    var methodOf = baseRest(function(object, args) {\n      return function(path) {\n        return baseInvoke(object, path, args);\n      };\n    });\n\n    /**\n     * Adds all own enumerable string keyed function properties of a source\n     * object to the destination object. If `object` is a function, then methods\n     * are added to its prototype as well.\n     *\n     * **Note:** Use `_.runInContext` to create a pristine `lodash` function to\n     * avoid conflicts caused by modifying the original.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Util\n     * @param {Function|Object} [object=lodash] The destination object.\n     * @param {Object} source The object of functions to add.\n     * @param {Object} [options={}] The options object.\n     * @param {boolean} [options.chain=true] Specify whether mixins are chainable.\n     * @returns {Function|Object} Returns `object`.\n     * @example\n     *\n     * function vowels(string) {\n     *   return _.filter(string, function(v) {\n     *     return /[aeiou]/i.test(v);\n     *   });\n     * }\n     *\n     * _.mixin({ 'vowels': vowels });\n     * _.vowels('fred');\n     * // => ['e']\n     *\n     * _('fred').vowels().value();\n     * // => ['e']\n     *\n     * _.mixin({ 'vowels': vowels }, { 'chain': false });\n     * _('fred').vowels();\n     * // => ['e']\n     */\n    function mixin(object, source, options) {\n      var props = keys(source),\n          methodNames = baseFunctions(source, props);\n\n      if (options == null &&\n          !(isObject(source) && (methodNames.length || !props.length))) {\n        options = source;\n        source = object;\n        object = this;\n        methodNames = baseFunctions(source, keys(source));\n      }\n      var chain = !(isObject(options) && 'chain' in options) || !!options.chain,\n          isFunc = isFunction(object);\n\n      arrayEach(methodNames, function(methodName) {\n        var func = source[methodName];\n        object[methodName] = func;\n        if (isFunc) {\n          object.prototype[methodName] = function() {\n            var chainAll = this.__chain__;\n            if (chain || chainAll) {\n              var result = object(this.__wrapped__),\n                  actions = result.__actions__ = copyArray(this.__actions__);\n\n              actions.push({ 'func': func, 'args': arguments, 'thisArg': object });\n              result.__chain__ = chainAll;\n              return result;\n            }\n            return func.apply(object, arrayPush([this.value()], arguments));\n          };\n        }\n      });\n\n      return object;\n    }\n\n    /**\n     * Reverts the `_` variable to its previous value and returns a reference to\n     * the `lodash` function.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Util\n     * @returns {Function} Returns the `lodash` function.\n     * @example\n     *\n     * var lodash = _.noConflict();\n     */\n    function noConflict() {\n      if (root._ === this) {\n        root._ = oldDash;\n      }\n      return this;\n    }\n\n    /**\n     * This method returns `undefined`.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.3.0\n     * @category Util\n     * @example\n     *\n     * _.times(2, _.noop);\n     * // => [undefined, undefined]\n     */\n    function noop() {\n      // No operation performed.\n    }\n\n    /**\n     * Creates a function that gets the argument at index `n`. If `n` is negative,\n     * the nth argument from the end is returned.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Util\n     * @param {number} [n=0] The index of the argument to return.\n     * @returns {Function} Returns the new pass-thru function.\n     * @example\n     *\n     * var func = _.nthArg(1);\n     * func('a', 'b', 'c', 'd');\n     * // => 'b'\n     *\n     * var func = _.nthArg(-2);\n     * func('a', 'b', 'c', 'd');\n     * // => 'c'\n     */\n    function nthArg(n) {\n      n = toInteger(n);\n      return baseRest(function(args) {\n        return baseNth(args, n);\n      });\n    }\n\n    /**\n     * Creates a function that invokes `iteratees` with the arguments it receives\n     * and returns their results.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Util\n     * @param {...(Function|Function[])} [iteratees=[_.identity]]\n     *  The iteratees to invoke.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var func = _.over([Math.max, Math.min]);\n     *\n     * func(1, 2, 3, 4);\n     * // => [4, 1]\n     */\n    var over = createOver(arrayMap);\n\n    /**\n     * Creates a function that checks if **all** of the `predicates` return\n     * truthy when invoked with the arguments it receives.\n     *\n     * Following shorthands are possible for providing predicates.\n     * Pass an `Object` and it will be used as an parameter for `_.matches` to create the predicate.\n     * Pass an `Array` of parameters for `_.matchesProperty` and the predicate will be created using them.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Util\n     * @param {...(Function|Function[])} [predicates=[_.identity]]\n     *  The predicates to check.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var func = _.overEvery([Boolean, isFinite]);\n     *\n     * func('1');\n     * // => true\n     *\n     * func(null);\n     * // => false\n     *\n     * func(NaN);\n     * // => false\n     */\n    var overEvery = createOver(arrayEvery);\n\n    /**\n     * Creates a function that checks if **any** of the `predicates` return\n     * truthy when invoked with the arguments it receives.\n     *\n     * Following shorthands are possible for providing predicates.\n     * Pass an `Object` and it will be used as an parameter for `_.matches` to create the predicate.\n     * Pass an `Array` of parameters for `_.matchesProperty` and the predicate will be created using them.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Util\n     * @param {...(Function|Function[])} [predicates=[_.identity]]\n     *  The predicates to check.\n     * @returns {Function} Returns the new function.\n     * @example\n     *\n     * var func = _.overSome([Boolean, isFinite]);\n     *\n     * func('1');\n     * // => true\n     *\n     * func(null);\n     * // => true\n     *\n     * func(NaN);\n     * // => false\n     *\n     * var matchesFunc = _.overSome([{ 'a': 1 }, { 'a': 2 }])\n     * var matchesPropertyFunc = _.overSome([['a', 1], ['a', 2]])\n     */\n    var overSome = createOver(arraySome);\n\n    /**\n     * Creates a function that returns the value at `path` of a given object.\n     *\n     * @static\n     * @memberOf _\n     * @since 2.4.0\n     * @category Util\n     * @param {Array|string} path The path of the property to get.\n     * @returns {Function} Returns the new accessor function.\n     * @example\n     *\n     * var objects = [\n     *   { 'a': { 'b': 2 } },\n     *   { 'a': { 'b': 1 } }\n     * ];\n     *\n     * _.map(objects, _.property('a.b'));\n     * // => [2, 1]\n     *\n     * _.map(_.sortBy(objects, _.property(['a', 'b'])), 'a.b');\n     * // => [1, 2]\n     */\n    function property(path) {\n      return isKey(path) ? baseProperty(toKey(path)) : basePropertyDeep(path);\n    }\n\n    /**\n     * The opposite of `_.property`; this method creates a function that returns\n     * the value at a given path of `object`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.0.0\n     * @category Util\n     * @param {Object} object The object to query.\n     * @returns {Function} Returns the new accessor function.\n     * @example\n     *\n     * var array = [0, 1, 2],\n     *     object = { 'a': array, 'b': array, 'c': array };\n     *\n     * _.map(['a[2]', 'c[0]'], _.propertyOf(object));\n     * // => [2, 0]\n     *\n     * _.map([['a', '2'], ['c', '0']], _.propertyOf(object));\n     * // => [2, 0]\n     */\n    function propertyOf(object) {\n      return function(path) {\n        return object == null ? undefined : baseGet(object, path);\n      };\n    }\n\n    /**\n     * Creates an array of numbers (positive and/or negative) progressing from\n     * `start` up to, but not including, `end`. A step of `-1` is used if a negative\n     * `start` is specified without an `end` or `step`. If `end` is not specified,\n     * it's set to `start` with `start` then set to `0`.\n     *\n     * **Note:** JavaScript follows the IEEE-754 standard for resolving\n     * floating-point values which can produce unexpected results.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Util\n     * @param {number} [start=0] The start of the range.\n     * @param {number} end The end of the range.\n     * @param {number} [step=1] The value to increment or decrement by.\n     * @returns {Array} Returns the range of numbers.\n     * @see _.inRange, _.rangeRight\n     * @example\n     *\n     * _.range(4);\n     * // => [0, 1, 2, 3]\n     *\n     * _.range(-4);\n     * // => [0, -1, -2, -3]\n     *\n     * _.range(1, 5);\n     * // => [1, 2, 3, 4]\n     *\n     * _.range(0, 20, 5);\n     * // => [0, 5, 10, 15]\n     *\n     * _.range(0, -4, -1);\n     * // => [0, -1, -2, -3]\n     *\n     * _.range(1, 4, 0);\n     * // => [1, 1, 1]\n     *\n     * _.range(0);\n     * // => []\n     */\n    var range = createRange();\n\n    /**\n     * This method is like `_.range` except that it populates values in\n     * descending order.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Util\n     * @param {number} [start=0] The start of the range.\n     * @param {number} end The end of the range.\n     * @param {number} [step=1] The value to increment or decrement by.\n     * @returns {Array} Returns the range of numbers.\n     * @see _.inRange, _.range\n     * @example\n     *\n     * _.rangeRight(4);\n     * // => [3, 2, 1, 0]\n     *\n     * _.rangeRight(-4);\n     * // => [-3, -2, -1, 0]\n     *\n     * _.rangeRight(1, 5);\n     * // => [4, 3, 2, 1]\n     *\n     * _.rangeRight(0, 20, 5);\n     * // => [15, 10, 5, 0]\n     *\n     * _.rangeRight(0, -4, -1);\n     * // => [-3, -2, -1, 0]\n     *\n     * _.rangeRight(1, 4, 0);\n     * // => [1, 1, 1]\n     *\n     * _.rangeRight(0);\n     * // => []\n     */\n    var rangeRight = createRange(true);\n\n    /**\n     * This method returns a new empty array.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.13.0\n     * @category Util\n     * @returns {Array} Returns the new empty array.\n     * @example\n     *\n     * var arrays = _.times(2, _.stubArray);\n     *\n     * console.log(arrays);\n     * // => [[], []]\n     *\n     * console.log(arrays[0] === arrays[1]);\n     * // => false\n     */\n    function stubArray() {\n      return [];\n    }\n\n    /**\n     * This method returns `false`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.13.0\n     * @category Util\n     * @returns {boolean} Returns `false`.\n     * @example\n     *\n     * _.times(2, _.stubFalse);\n     * // => [false, false]\n     */\n    function stubFalse() {\n      return false;\n    }\n\n    /**\n     * This method returns a new empty object.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.13.0\n     * @category Util\n     * @returns {Object} Returns the new empty object.\n     * @example\n     *\n     * var objects = _.times(2, _.stubObject);\n     *\n     * console.log(objects);\n     * // => [{}, {}]\n     *\n     * console.log(objects[0] === objects[1]);\n     * // => false\n     */\n    function stubObject() {\n      return {};\n    }\n\n    /**\n     * This method returns an empty string.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.13.0\n     * @category Util\n     * @returns {string} Returns the empty string.\n     * @example\n     *\n     * _.times(2, _.stubString);\n     * // => ['', '']\n     */\n    function stubString() {\n      return '';\n    }\n\n    /**\n     * This method returns `true`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.13.0\n     * @category Util\n     * @returns {boolean} Returns `true`.\n     * @example\n     *\n     * _.times(2, _.stubTrue);\n     * // => [true, true]\n     */\n    function stubTrue() {\n      return true;\n    }\n\n    /**\n     * Invokes the iteratee `n` times, returning an array of the results of\n     * each invocation. The iteratee is invoked with one argument; (index).\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Util\n     * @param {number} n The number of times to invoke `iteratee`.\n     * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n     * @returns {Array} Returns the array of results.\n     * @example\n     *\n     * _.times(3, String);\n     * // => ['0', '1', '2']\n     *\n     *  _.times(4, _.constant(0));\n     * // => [0, 0, 0, 0]\n     */\n    function times(n, iteratee) {\n      n = toInteger(n);\n      if (n < 1 || n > MAX_SAFE_INTEGER) {\n        return [];\n      }\n      var index = MAX_ARRAY_LENGTH,\n          length = nativeMin(n, MAX_ARRAY_LENGTH);\n\n      iteratee = getIteratee(iteratee);\n      n -= MAX_ARRAY_LENGTH;\n\n      var result = baseTimes(length, iteratee);\n      while (++index < n) {\n        iteratee(index);\n      }\n      return result;\n    }\n\n    /**\n     * Converts `value` to a property path array.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Util\n     * @param {*} value The value to convert.\n     * @returns {Array} Returns the new property path array.\n     * @example\n     *\n     * _.toPath('a.b.c');\n     * // => ['a', 'b', 'c']\n     *\n     * _.toPath('a[0].b.c');\n     * // => ['a', '0', 'b', 'c']\n     */\n    function toPath(value) {\n      if (isArray(value)) {\n        return arrayMap(value, toKey);\n      }\n      return isSymbol(value) ? [value] : copyArray(stringToPath(toString(value)));\n    }\n\n    /**\n     * Generates a unique ID. If `prefix` is given, the ID is appended to it.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Util\n     * @param {string} [prefix=''] The value to prefix the ID with.\n     * @returns {string} Returns the unique ID.\n     * @example\n     *\n     * _.uniqueId('contact_');\n     * // => 'contact_104'\n     *\n     * _.uniqueId();\n     * // => '105'\n     */\n    function uniqueId(prefix) {\n      var id = ++idCounter;\n      return toString(prefix) + id;\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * Adds two numbers.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.4.0\n     * @category Math\n     * @param {number} augend The first number in an addition.\n     * @param {number} addend The second number in an addition.\n     * @returns {number} Returns the total.\n     * @example\n     *\n     * _.add(6, 4);\n     * // => 10\n     */\n    var add = createMathOperation(function(augend, addend) {\n      return augend + addend;\n    }, 0);\n\n    /**\n     * Computes `number` rounded up to `precision`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.10.0\n     * @category Math\n     * @param {number} number The number to round up.\n     * @param {number} [precision=0] The precision to round up to.\n     * @returns {number} Returns the rounded up number.\n     * @example\n     *\n     * _.ceil(4.006);\n     * // => 5\n     *\n     * _.ceil(6.004, 2);\n     * // => 6.01\n     *\n     * _.ceil(6040, -2);\n     * // => 6100\n     */\n    var ceil = createRound('ceil');\n\n    /**\n     * Divide two numbers.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.7.0\n     * @category Math\n     * @param {number} dividend The first number in a division.\n     * @param {number} divisor The second number in a division.\n     * @returns {number} Returns the quotient.\n     * @example\n     *\n     * _.divide(6, 4);\n     * // => 1.5\n     */\n    var divide = createMathOperation(function(dividend, divisor) {\n      return dividend / divisor;\n    }, 1);\n\n    /**\n     * Computes `number` rounded down to `precision`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.10.0\n     * @category Math\n     * @param {number} number The number to round down.\n     * @param {number} [precision=0] The precision to round down to.\n     * @returns {number} Returns the rounded down number.\n     * @example\n     *\n     * _.floor(4.006);\n     * // => 4\n     *\n     * _.floor(0.046, 2);\n     * // => 0.04\n     *\n     * _.floor(4060, -2);\n     * // => 4000\n     */\n    var floor = createRound('floor');\n\n    /**\n     * Computes the maximum value of `array`. If `array` is empty or falsey,\n     * `undefined` is returned.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Math\n     * @param {Array} array The array to iterate over.\n     * @returns {*} Returns the maximum value.\n     * @example\n     *\n     * _.max([4, 2, 8, 6]);\n     * // => 8\n     *\n     * _.max([]);\n     * // => undefined\n     */\n    function max(array) {\n      return (array && array.length)\n        ? baseExtremum(array, identity, baseGt)\n        : undefined;\n    }\n\n    /**\n     * This method is like `_.max` except that it accepts `iteratee` which is\n     * invoked for each element in `array` to generate the criterion by which\n     * the value is ranked. The iteratee is invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Math\n     * @param {Array} array The array to iterate over.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {*} Returns the maximum value.\n     * @example\n     *\n     * var objects = [{ 'n': 1 }, { 'n': 2 }];\n     *\n     * _.maxBy(objects, function(o) { return o.n; });\n     * // => { 'n': 2 }\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.maxBy(objects, 'n');\n     * // => { 'n': 2 }\n     */\n    function maxBy(array, iteratee) {\n      return (array && array.length)\n        ? baseExtremum(array, getIteratee(iteratee, 2), baseGt)\n        : undefined;\n    }\n\n    /**\n     * Computes the mean of the values in `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Math\n     * @param {Array} array The array to iterate over.\n     * @returns {number} Returns the mean.\n     * @example\n     *\n     * _.mean([4, 2, 8, 6]);\n     * // => 5\n     */\n    function mean(array) {\n      return baseMean(array, identity);\n    }\n\n    /**\n     * This method is like `_.mean` except that it accepts `iteratee` which is\n     * invoked for each element in `array` to generate the value to be averaged.\n     * The iteratee is invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.7.0\n     * @category Math\n     * @param {Array} array The array to iterate over.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {number} Returns the mean.\n     * @example\n     *\n     * var objects = [{ 'n': 4 }, { 'n': 2 }, { 'n': 8 }, { 'n': 6 }];\n     *\n     * _.meanBy(objects, function(o) { return o.n; });\n     * // => 5\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.meanBy(objects, 'n');\n     * // => 5\n     */\n    function meanBy(array, iteratee) {\n      return baseMean(array, getIteratee(iteratee, 2));\n    }\n\n    /**\n     * Computes the minimum value of `array`. If `array` is empty or falsey,\n     * `undefined` is returned.\n     *\n     * @static\n     * @since 0.1.0\n     * @memberOf _\n     * @category Math\n     * @param {Array} array The array to iterate over.\n     * @returns {*} Returns the minimum value.\n     * @example\n     *\n     * _.min([4, 2, 8, 6]);\n     * // => 2\n     *\n     * _.min([]);\n     * // => undefined\n     */\n    function min(array) {\n      return (array && array.length)\n        ? baseExtremum(array, identity, baseLt)\n        : undefined;\n    }\n\n    /**\n     * This method is like `_.min` except that it accepts `iteratee` which is\n     * invoked for each element in `array` to generate the criterion by which\n     * the value is ranked. The iteratee is invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Math\n     * @param {Array} array The array to iterate over.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {*} Returns the minimum value.\n     * @example\n     *\n     * var objects = [{ 'n': 1 }, { 'n': 2 }];\n     *\n     * _.minBy(objects, function(o) { return o.n; });\n     * // => { 'n': 1 }\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.minBy(objects, 'n');\n     * // => { 'n': 1 }\n     */\n    function minBy(array, iteratee) {\n      return (array && array.length)\n        ? baseExtremum(array, getIteratee(iteratee, 2), baseLt)\n        : undefined;\n    }\n\n    /**\n     * Multiply two numbers.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.7.0\n     * @category Math\n     * @param {number} multiplier The first number in a multiplication.\n     * @param {number} multiplicand The second number in a multiplication.\n     * @returns {number} Returns the product.\n     * @example\n     *\n     * _.multiply(6, 4);\n     * // => 24\n     */\n    var multiply = createMathOperation(function(multiplier, multiplicand) {\n      return multiplier * multiplicand;\n    }, 1);\n\n    /**\n     * Computes `number` rounded to `precision`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.10.0\n     * @category Math\n     * @param {number} number The number to round.\n     * @param {number} [precision=0] The precision to round to.\n     * @returns {number} Returns the rounded number.\n     * @example\n     *\n     * _.round(4.006);\n     * // => 4\n     *\n     * _.round(4.006, 2);\n     * // => 4.01\n     *\n     * _.round(4060, -2);\n     * // => 4100\n     */\n    var round = createRound('round');\n\n    /**\n     * Subtract two numbers.\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Math\n     * @param {number} minuend The first number in a subtraction.\n     * @param {number} subtrahend The second number in a subtraction.\n     * @returns {number} Returns the difference.\n     * @example\n     *\n     * _.subtract(6, 4);\n     * // => 2\n     */\n    var subtract = createMathOperation(function(minuend, subtrahend) {\n      return minuend - subtrahend;\n    }, 0);\n\n    /**\n     * Computes the sum of the values in `array`.\n     *\n     * @static\n     * @memberOf _\n     * @since 3.4.0\n     * @category Math\n     * @param {Array} array The array to iterate over.\n     * @returns {number} Returns the sum.\n     * @example\n     *\n     * _.sum([4, 2, 8, 6]);\n     * // => 20\n     */\n    function sum(array) {\n      return (array && array.length)\n        ? baseSum(array, identity)\n        : 0;\n    }\n\n    /**\n     * This method is like `_.sum` except that it accepts `iteratee` which is\n     * invoked for each element in `array` to generate the value to be summed.\n     * The iteratee is invoked with one argument: (value).\n     *\n     * @static\n     * @memberOf _\n     * @since 4.0.0\n     * @category Math\n     * @param {Array} array The array to iterate over.\n     * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n     * @returns {number} Returns the sum.\n     * @example\n     *\n     * var objects = [{ 'n': 4 }, { 'n': 2 }, { 'n': 8 }, { 'n': 6 }];\n     *\n     * _.sumBy(objects, function(o) { return o.n; });\n     * // => 20\n     *\n     * // The `_.property` iteratee shorthand.\n     * _.sumBy(objects, 'n');\n     * // => 20\n     */\n    function sumBy(array, iteratee) {\n      return (array && array.length)\n        ? baseSum(array, getIteratee(iteratee, 2))\n        : 0;\n    }\n\n    /*------------------------------------------------------------------------*/\n\n    // Add methods that return wrapped values in chain sequences.\n    lodash.after = after;\n    lodash.ary = ary;\n    lodash.assign = assign;\n    lodash.assignIn = assignIn;\n    lodash.assignInWith = assignInWith;\n    lodash.assignWith = assignWith;\n    lodash.at = at;\n    lodash.before = before;\n    lodash.bind = bind;\n    lodash.bindAll = bindAll;\n    lodash.bindKey = bindKey;\n    lodash.castArray = castArray;\n    lodash.chain = chain;\n    lodash.chunk = chunk;\n    lodash.compact = compact;\n    lodash.concat = concat;\n    lodash.cond = cond;\n    lodash.conforms = conforms;\n    lodash.constant = constant;\n    lodash.countBy = countBy;\n    lodash.create = create;\n    lodash.curry = curry;\n    lodash.curryRight = curryRight;\n    lodash.debounce = debounce;\n    lodash.defaults = defaults;\n    lodash.defaultsDeep = defaultsDeep;\n    lodash.defer = defer;\n    lodash.delay = delay;\n    lodash.difference = difference;\n    lodash.differenceBy = differenceBy;\n    lodash.differenceWith = differenceWith;\n    lodash.drop = drop;\n    lodash.dropRight = dropRight;\n    lodash.dropRightWhile = dropRightWhile;\n    lodash.dropWhile = dropWhile;\n    lodash.fill = fill;\n    lodash.filter = filter;\n    lodash.flatMap = flatMap;\n    lodash.flatMapDeep = flatMapDeep;\n    lodash.flatMapDepth = flatMapDepth;\n    lodash.flatten = flatten;\n    lodash.flattenDeep = flattenDeep;\n    lodash.flattenDepth = flattenDepth;\n    lodash.flip = flip;\n    lodash.flow = flow;\n    lodash.flowRight = flowRight;\n    lodash.fromPairs = fromPairs;\n    lodash.functions = functions;\n    lodash.functionsIn = functionsIn;\n    lodash.groupBy = groupBy;\n    lodash.initial = initial;\n    lodash.intersection = intersection;\n    lodash.intersectionBy = intersectionBy;\n    lodash.intersectionWith = intersectionWith;\n    lodash.invert = invert;\n    lodash.invertBy = invertBy;\n    lodash.invokeMap = invokeMap;\n    lodash.iteratee = iteratee;\n    lodash.keyBy = keyBy;\n    lodash.keys = keys;\n    lodash.keysIn = keysIn;\n    lodash.map = map;\n    lodash.mapKeys = mapKeys;\n    lodash.mapValues = mapValues;\n    lodash.matches = matches;\n    lodash.matchesProperty = matchesProperty;\n    lodash.memoize = memoize;\n    lodash.merge = merge;\n    lodash.mergeWith = mergeWith;\n    lodash.method = method;\n    lodash.methodOf = methodOf;\n    lodash.mixin = mixin;\n    lodash.negate = negate;\n    lodash.nthArg = nthArg;\n    lodash.omit = omit;\n    lodash.omitBy = omitBy;\n    lodash.once = once;\n    lodash.orderBy = orderBy;\n    lodash.over = over;\n    lodash.overArgs = overArgs;\n    lodash.overEvery = overEvery;\n    lodash.overSome = overSome;\n    lodash.partial = partial;\n    lodash.partialRight = partialRight;\n    lodash.partition = partition;\n    lodash.pick = pick;\n    lodash.pickBy = pickBy;\n    lodash.property = property;\n    lodash.propertyOf = propertyOf;\n    lodash.pull = pull;\n    lodash.pullAll = pullAll;\n    lodash.pullAllBy = pullAllBy;\n    lodash.pullAllWith = pullAllWith;\n    lodash.pullAt = pullAt;\n    lodash.range = range;\n    lodash.rangeRight = rangeRight;\n    lodash.rearg = rearg;\n    lodash.reject = reject;\n    lodash.remove = remove;\n    lodash.rest = rest;\n    lodash.reverse = reverse;\n    lodash.sampleSize = sampleSize;\n    lodash.set = set;\n    lodash.setWith = setWith;\n    lodash.shuffle = shuffle;\n    lodash.slice = slice;\n    lodash.sortBy = sortBy;\n    lodash.sortedUniq = sortedUniq;\n    lodash.sortedUniqBy = sortedUniqBy;\n    lodash.split = split;\n    lodash.spread = spread;\n    lodash.tail = tail;\n    lodash.take = take;\n    lodash.takeRight = takeRight;\n    lodash.takeRightWhile = takeRightWhile;\n    lodash.takeWhile = takeWhile;\n    lodash.tap = tap;\n    lodash.throttle = throttle;\n    lodash.thru = thru;\n    lodash.toArray = toArray;\n    lodash.toPairs = toPairs;\n    lodash.toPairsIn = toPairsIn;\n    lodash.toPath = toPath;\n    lodash.toPlainObject = toPlainObject;\n    lodash.transform = transform;\n    lodash.unary = unary;\n    lodash.union = union;\n    lodash.unionBy = unionBy;\n    lodash.unionWith = unionWith;\n    lodash.uniq = uniq;\n    lodash.uniqBy = uniqBy;\n    lodash.uniqWith = uniqWith;\n    lodash.unset = unset;\n    lodash.unzip = unzip;\n    lodash.unzipWith = unzipWith;\n    lodash.update = update;\n    lodash.updateWith = updateWith;\n    lodash.values = values;\n    lodash.valuesIn = valuesIn;\n    lodash.without = without;\n    lodash.words = words;\n    lodash.wrap = wrap;\n    lodash.xor = xor;\n    lodash.xorBy = xorBy;\n    lodash.xorWith = xorWith;\n    lodash.zip = zip;\n    lodash.zipObject = zipObject;\n    lodash.zipObjectDeep = zipObjectDeep;\n    lodash.zipWith = zipWith;\n\n    // Add aliases.\n    lodash.entries = toPairs;\n    lodash.entriesIn = toPairsIn;\n    lodash.extend = assignIn;\n    lodash.extendWith = assignInWith;\n\n    // Add methods to `lodash.prototype`.\n    mixin(lodash, lodash);\n\n    /*------------------------------------------------------------------------*/\n\n    // Add methods that return unwrapped values in chain sequences.\n    lodash.add = add;\n    lodash.attempt = attempt;\n    lodash.camelCase = camelCase;\n    lodash.capitalize = capitalize;\n    lodash.ceil = ceil;\n    lodash.clamp = clamp;\n    lodash.clone = clone;\n    lodash.cloneDeep = cloneDeep;\n    lodash.cloneDeepWith = cloneDeepWith;\n    lodash.cloneWith = cloneWith;\n    lodash.conformsTo = conformsTo;\n    lodash.deburr = deburr;\n    lodash.defaultTo = defaultTo;\n    lodash.divide = divide;\n    lodash.endsWith = endsWith;\n    lodash.eq = eq;\n    lodash.escape = escape;\n    lodash.escapeRegExp = escapeRegExp;\n    lodash.every = every;\n    lodash.find = find;\n    lodash.findIndex = findIndex;\n    lodash.findKey = findKey;\n    lodash.findLast = findLast;\n    lodash.findLastIndex = findLastIndex;\n    lodash.findLastKey = findLastKey;\n    lodash.floor = floor;\n    lodash.forEach = forEach;\n    lodash.forEachRight = forEachRight;\n    lodash.forIn = forIn;\n    lodash.forInRight = forInRight;\n    lodash.forOwn = forOwn;\n    lodash.forOwnRight = forOwnRight;\n    lodash.get = get;\n    lodash.gt = gt;\n    lodash.gte = gte;\n    lodash.has = has;\n    lodash.hasIn = hasIn;\n    lodash.head = head;\n    lodash.identity = identity;\n    lodash.includes = includes;\n    lodash.indexOf = indexOf;\n    lodash.inRange = inRange;\n    lodash.invoke = invoke;\n    lodash.isArguments = isArguments;\n    lodash.isArray = isArray;\n    lodash.isArrayBuffer = isArrayBuffer;\n    lodash.isArrayLike = isArrayLike;\n    lodash.isArrayLikeObject = isArrayLikeObject;\n    lodash.isBoolean = isBoolean;\n    lodash.isBuffer = isBuffer;\n    lodash.isDate = isDate;\n    lodash.isElement = isElement;\n    lodash.isEmpty = isEmpty;\n    lodash.isEqual = isEqual;\n    lodash.isEqualWith = isEqualWith;\n    lodash.isError = isError;\n    lodash.isFinite = isFinite;\n    lodash.isFunction = isFunction;\n    lodash.isInteger = isInteger;\n    lodash.isLength = isLength;\n    lodash.isMap = isMap;\n    lodash.isMatch = isMatch;\n    lodash.isMatchWith = isMatchWith;\n    lodash.isNaN = isNaN;\n    lodash.isNative = isNative;\n    lodash.isNil = isNil;\n    lodash.isNull = isNull;\n    lodash.isNumber = isNumber;\n    lodash.isObject = isObject;\n    lodash.isObjectLike = isObjectLike;\n    lodash.isPlainObject = isPlainObject;\n    lodash.isRegExp = isRegExp;\n    lodash.isSafeInteger = isSafeInteger;\n    lodash.isSet = isSet;\n    lodash.isString = isString;\n    lodash.isSymbol = isSymbol;\n    lodash.isTypedArray = isTypedArray;\n    lodash.isUndefined = isUndefined;\n    lodash.isWeakMap = isWeakMap;\n    lodash.isWeakSet = isWeakSet;\n    lodash.join = join;\n    lodash.kebabCase = kebabCase;\n    lodash.last = last;\n    lodash.lastIndexOf = lastIndexOf;\n    lodash.lowerCase = lowerCase;\n    lodash.lowerFirst = lowerFirst;\n    lodash.lt = lt;\n    lodash.lte = lte;\n    lodash.max = max;\n    lodash.maxBy = maxBy;\n    lodash.mean = mean;\n    lodash.meanBy = meanBy;\n    lodash.min = min;\n    lodash.minBy = minBy;\n    lodash.stubArray = stubArray;\n    lodash.stubFalse = stubFalse;\n    lodash.stubObject = stubObject;\n    lodash.stubString = stubString;\n    lodash.stubTrue = stubTrue;\n    lodash.multiply = multiply;\n    lodash.nth = nth;\n    lodash.noConflict = noConflict;\n    lodash.noop = noop;\n    lodash.now = now;\n    lodash.pad = pad;\n    lodash.padEnd = padEnd;\n    lodash.padStart = padStart;\n    lodash.parseInt = parseInt;\n    lodash.random = random;\n    lodash.reduce = reduce;\n    lodash.reduceRight = reduceRight;\n    lodash.repeat = repeat;\n    lodash.replace = replace;\n    lodash.result = result;\n    lodash.round = round;\n    lodash.runInContext = runInContext;\n    lodash.sample = sample;\n    lodash.size = size;\n    lodash.snakeCase = snakeCase;\n    lodash.some = some;\n    lodash.sortedIndex = sortedIndex;\n    lodash.sortedIndexBy = sortedIndexBy;\n    lodash.sortedIndexOf = sortedIndexOf;\n    lodash.sortedLastIndex = sortedLastIndex;\n    lodash.sortedLastIndexBy = sortedLastIndexBy;\n    lodash.sortedLastIndexOf = sortedLastIndexOf;\n    lodash.startCase = startCase;\n    lodash.startsWith = startsWith;\n    lodash.subtract = subtract;\n    lodash.sum = sum;\n    lodash.sumBy = sumBy;\n    lodash.template = template;\n    lodash.times = times;\n    lodash.toFinite = toFinite;\n    lodash.toInteger = toInteger;\n    lodash.toLength = toLength;\n    lodash.toLower = toLower;\n    lodash.toNumber = toNumber;\n    lodash.toSafeInteger = toSafeInteger;\n    lodash.toString = toString;\n    lodash.toUpper = toUpper;\n    lodash.trim = trim;\n    lodash.trimEnd = trimEnd;\n    lodash.trimStart = trimStart;\n    lodash.truncate = truncate;\n    lodash.unescape = unescape;\n    lodash.uniqueId = uniqueId;\n    lodash.upperCase = upperCase;\n    lodash.upperFirst = upperFirst;\n\n    // Add aliases.\n    lodash.each = forEach;\n    lodash.eachRight = forEachRight;\n    lodash.first = head;\n\n    mixin(lodash, (function() {\n      var source = {};\n      baseForOwn(lodash, function(func, methodName) {\n        if (!hasOwnProperty.call(lodash.prototype, methodName)) {\n          source[methodName] = func;\n        }\n      });\n      return source;\n    }()), { 'chain': false });\n\n    /*------------------------------------------------------------------------*/\n\n    /**\n     * The semantic version number.\n     *\n     * @static\n     * @memberOf _\n     * @type {string}\n     */\n    lodash.VERSION = VERSION;\n\n    // Assign default placeholders.\n    arrayEach(['bind', 'bindKey', 'curry', 'curryRight', 'partial', 'partialRight'], function(methodName) {\n      lodash[methodName].placeholder = lodash;\n    });\n\n    // Add `LazyWrapper` methods for `_.drop` and `_.take` variants.\n    arrayEach(['drop', 'take'], function(methodName, index) {\n      LazyWrapper.prototype[methodName] = function(n) {\n        n = n === undefined ? 1 : nativeMax(toInteger(n), 0);\n\n        var result = (this.__filtered__ && !index)\n          ? new LazyWrapper(this)\n          : this.clone();\n\n        if (result.__filtered__) {\n          result.__takeCount__ = nativeMin(n, result.__takeCount__);\n        } else {\n          result.__views__.push({\n            'size': nativeMin(n, MAX_ARRAY_LENGTH),\n            'type': methodName + (result.__dir__ < 0 ? 'Right' : '')\n          });\n        }\n        return result;\n      };\n\n      LazyWrapper.prototype[methodName + 'Right'] = function(n) {\n        return this.reverse()[methodName](n).reverse();\n      };\n    });\n\n    // Add `LazyWrapper` methods that accept an `iteratee` value.\n    arrayEach(['filter', 'map', 'takeWhile'], function(methodName, index) {\n      var type = index + 1,\n          isFilter = type == LAZY_FILTER_FLAG || type == LAZY_WHILE_FLAG;\n\n      LazyWrapper.prototype[methodName] = function(iteratee) {\n        var result = this.clone();\n        result.__iteratees__.push({\n          'iteratee': getIteratee(iteratee, 3),\n          'type': type\n        });\n        result.__filtered__ = result.__filtered__ || isFilter;\n        return result;\n      };\n    });\n\n    // Add `LazyWrapper` methods for `_.head` and `_.last`.\n    arrayEach(['head', 'last'], function(methodName, index) {\n      var takeName = 'take' + (index ? 'Right' : '');\n\n      LazyWrapper.prototype[methodName] = function() {\n        return this[takeName](1).value()[0];\n      };\n    });\n\n    // Add `LazyWrapper` methods for `_.initial` and `_.tail`.\n    arrayEach(['initial', 'tail'], function(methodName, index) {\n      var dropName = 'drop' + (index ? '' : 'Right');\n\n      LazyWrapper.prototype[methodName] = function() {\n        return this.__filtered__ ? new LazyWrapper(this) : this[dropName](1);\n      };\n    });\n\n    LazyWrapper.prototype.compact = function() {\n      return this.filter(identity);\n    };\n\n    LazyWrapper.prototype.find = function(predicate) {\n      return this.filter(predicate).head();\n    };\n\n    LazyWrapper.prototype.findLast = function(predicate) {\n      return this.reverse().find(predicate);\n    };\n\n    LazyWrapper.prototype.invokeMap = baseRest(function(path, args) {\n      if (typeof path == 'function') {\n        return new LazyWrapper(this);\n      }\n      return this.map(function(value) {\n        return baseInvoke(value, path, args);\n      });\n    });\n\n    LazyWrapper.prototype.reject = function(predicate) {\n      return this.filter(negate(getIteratee(predicate)));\n    };\n\n    LazyWrapper.prototype.slice = function(start, end) {\n      start = toInteger(start);\n\n      var result = this;\n      if (result.__filtered__ && (start > 0 || end < 0)) {\n        return new LazyWrapper(result);\n      }\n      if (start < 0) {\n        result = result.takeRight(-start);\n      } else if (start) {\n        result = result.drop(start);\n      }\n      if (end !== undefined) {\n        end = toInteger(end);\n        result = end < 0 ? result.dropRight(-end) : result.take(end - start);\n      }\n      return result;\n    };\n\n    LazyWrapper.prototype.takeRightWhile = function(predicate) {\n      return this.reverse().takeWhile(predicate).reverse();\n    };\n\n    LazyWrapper.prototype.toArray = function() {\n      return this.take(MAX_ARRAY_LENGTH);\n    };\n\n    // Add `LazyWrapper` methods to `lodash.prototype`.\n    baseForOwn(LazyWrapper.prototype, function(func, methodName) {\n      var checkIteratee = /^(?:filter|find|map|reject)|While$/.test(methodName),\n          isTaker = /^(?:head|last)$/.test(methodName),\n          lodashFunc = lodash[isTaker ? ('take' + (methodName == 'last' ? 'Right' : '')) : methodName],\n          retUnwrapped = isTaker || /^find/.test(methodName);\n\n      if (!lodashFunc) {\n        return;\n      }\n      lodash.prototype[methodName] = function() {\n        var value = this.__wrapped__,\n            args = isTaker ? [1] : arguments,\n            isLazy = value instanceof LazyWrapper,\n            iteratee = args[0],\n            useLazy = isLazy || isArray(value);\n\n        var interceptor = function(value) {\n          var result = lodashFunc.apply(lodash, arrayPush([value], args));\n          return (isTaker && chainAll) ? result[0] : result;\n        };\n\n        if (useLazy && checkIteratee && typeof iteratee == 'function' && iteratee.length != 1) {\n          // Avoid lazy use if the iteratee has a \"length\" value other than `1`.\n          isLazy = useLazy = false;\n        }\n        var chainAll = this.__chain__,\n            isHybrid = !!this.__actions__.length,\n            isUnwrapped = retUnwrapped && !chainAll,\n            onlyLazy = isLazy && !isHybrid;\n\n        if (!retUnwrapped && useLazy) {\n          value = onlyLazy ? value : new LazyWrapper(this);\n          var result = func.apply(value, args);\n          result.__actions__.push({ 'func': thru, 'args': [interceptor], 'thisArg': undefined });\n          return new LodashWrapper(result, chainAll);\n        }\n        if (isUnwrapped && onlyLazy) {\n          return func.apply(this, args);\n        }\n        result = this.thru(interceptor);\n        return isUnwrapped ? (isTaker ? result.value()[0] : result.value()) : result;\n      };\n    });\n\n    // Add `Array` methods to `lodash.prototype`.\n    arrayEach(['pop', 'push', 'shift', 'sort', 'splice', 'unshift'], function(methodName) {\n      var func = arrayProto[methodName],\n          chainName = /^(?:push|sort|unshift)$/.test(methodName) ? 'tap' : 'thru',\n          retUnwrapped = /^(?:pop|shift)$/.test(methodName);\n\n      lodash.prototype[methodName] = function() {\n        var args = arguments;\n        if (retUnwrapped && !this.__chain__) {\n          var value = this.value();\n          return func.apply(isArray(value) ? value : [], args);\n        }\n        return this[chainName](function(value) {\n          return func.apply(isArray(value) ? value : [], args);\n        });\n      };\n    });\n\n    // Map minified method names to their real names.\n    baseForOwn(LazyWrapper.prototype, function(func, methodName) {\n      var lodashFunc = lodash[methodName];\n      if (lodashFunc) {\n        var key = lodashFunc.name + '';\n        if (!hasOwnProperty.call(realNames, key)) {\n          realNames[key] = [];\n        }\n        realNames[key].push({ 'name': methodName, 'func': lodashFunc });\n      }\n    });\n\n    realNames[createHybrid(undefined, WRAP_BIND_KEY_FLAG).name] = [{\n      'name': 'wrapper',\n      'func': undefined\n    }];\n\n    // Add methods to `LazyWrapper`.\n    LazyWrapper.prototype.clone = lazyClone;\n    LazyWrapper.prototype.reverse = lazyReverse;\n    LazyWrapper.prototype.value = lazyValue;\n\n    // Add chain sequence methods to the `lodash` wrapper.\n    lodash.prototype.at = wrapperAt;\n    lodash.prototype.chain = wrapperChain;\n    lodash.prototype.commit = wrapperCommit;\n    lodash.prototype.next = wrapperNext;\n    lodash.prototype.plant = wrapperPlant;\n    lodash.prototype.reverse = wrapperReverse;\n    lodash.prototype.toJSON = lodash.prototype.valueOf = lodash.prototype.value = wrapperValue;\n\n    // Add lazy aliases.\n    lodash.prototype.first = lodash.prototype.head;\n\n    if (symIterator) {\n      lodash.prototype[symIterator] = wrapperToIterator;\n    }\n    return lodash;\n  });\n\n  /*--------------------------------------------------------------------------*/\n\n  // Export lodash.\n  var _ = runInContext();\n\n  // Some AMD build optimizers, like r.js, check for condition patterns like:\n  if (typeof define == 'function' && typeof define.amd == 'object' && define.amd) {\n    // Expose Lodash on the global object to prevent errors when Lodash is\n    // loaded by a script tag in the presence of an AMD loader.\n    // See http://requirejs.org/docs/errors.html#mismatch for more details.\n    // Use `_.noConflict` to remove Lodash from the global object.\n    root._ = _;\n\n    // Define as an anonymous module so, through path mapping, it can be\n    // referenced as the \"underscore\" module.\n    define(function() {\n      return _;\n    });\n  }\n  // Check for `exports` after `define` in case a build optimizer adds it.\n  else if (freeModule) {\n    // Export for Node.js.\n    (freeModule.exports = _)._ = _;\n    // Export for CommonJS support.\n    freeExports._ = _;\n  }\n  else {\n    // Export to the global object.\n    root._ = _;\n  }\n}.call(this));\n", "'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('The listener must be a function');\n  }\n\n  var listener = new EE(fn, context || emitter, once)\n    , evt = prefix ? prefix + event : event;\n\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n  else emitter._events[evt] = [emitter._events[evt], listener];\n\n  return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();\n  else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event\n    , handlers = this._events[evt];\n\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event\n    , listeners = this._events[evt];\n\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n      listeners.fn === fn &&\n      (!once || listeners.once) &&\n      (!context || listeners.context === context)\n    ) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n        listeners[i].fn !== fn ||\n        (once && !listeners[i].once) ||\n        (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else clearEvent(this, evt);\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n", "/*\n * Generated by PEG.js 0.10.0.\n *\n * http://pegjs.org/\n */\n\n\"use strict\";\n\nfunction peg$subclass(child, parent) {\n  function ctor() { this.constructor = child; }\n  ctor.prototype = parent.prototype;\n  child.prototype = new ctor();\n}\n\nfunction peg$SyntaxError(message, expected, found, location) {\n  this.message  = message;\n  this.expected = expected;\n  this.found    = found;\n  this.location = location;\n  this.name     = \"SyntaxError\";\n\n  if (typeof Error.captureStackTrace === \"function\") {\n    Error.captureStackTrace(this, peg$SyntaxError);\n  }\n}\n\npeg$subclass(peg$SyntaxError, Error);\n\npeg$SyntaxError.buildMessage = function(expected, found) {\n  var DESCRIBE_EXPECTATION_FNS = {\n        literal: function(expectation) {\n          return \"\\\"\" + literalEscape(expectation.text) + \"\\\"\";\n        },\n\n        \"class\": function(expectation) {\n          var escapedParts = \"\",\n              i;\n\n          for (i = 0; i < expectation.parts.length; i++) {\n            escapedParts += expectation.parts[i] instanceof Array\n              ? classEscape(expectation.parts[i][0]) + \"-\" + classEscape(expectation.parts[i][1])\n              : classEscape(expectation.parts[i]);\n          }\n\n          return \"[\" + (expectation.inverted ? \"^\" : \"\") + escapedParts + \"]\";\n        },\n\n        any: function(expectation) {\n          return \"any character\";\n        },\n\n        end: function(expectation) {\n          return \"end of input\";\n        },\n\n        other: function(expectation) {\n          return expectation.description;\n        }\n      };\n\n  function hex(ch) {\n    return ch.charCodeAt(0).toString(16).toUpperCase();\n  }\n\n  function literalEscape(s) {\n    return s\n      .replace(/\\\\/g, '\\\\\\\\')\n      .replace(/\"/g,  '\\\\\"')\n      .replace(/\\0/g, '\\\\0')\n      .replace(/\\t/g, '\\\\t')\n      .replace(/\\n/g, '\\\\n')\n      .replace(/\\r/g, '\\\\r')\n      .replace(/[\\x00-\\x0F]/g,          function(ch) { return '\\\\x0' + hex(ch); })\n      .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, function(ch) { return '\\\\x'  + hex(ch); });\n  }\n\n  function classEscape(s) {\n    return s\n      .replace(/\\\\/g, '\\\\\\\\')\n      .replace(/\\]/g, '\\\\]')\n      .replace(/\\^/g, '\\\\^')\n      .replace(/-/g,  '\\\\-')\n      .replace(/\\0/g, '\\\\0')\n      .replace(/\\t/g, '\\\\t')\n      .replace(/\\n/g, '\\\\n')\n      .replace(/\\r/g, '\\\\r')\n      .replace(/[\\x00-\\x0F]/g,          function(ch) { return '\\\\x0' + hex(ch); })\n      .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, function(ch) { return '\\\\x'  + hex(ch); });\n  }\n\n  function describeExpectation(expectation) {\n    return DESCRIBE_EXPECTATION_FNS[expectation.type](expectation);\n  }\n\n  function describeExpected(expected) {\n    var descriptions = new Array(expected.length),\n        i, j;\n\n    for (i = 0; i < expected.length; i++) {\n      descriptions[i] = describeExpectation(expected[i]);\n    }\n\n    descriptions.sort();\n\n    if (descriptions.length > 0) {\n      for (i = 1, j = 1; i < descriptions.length; i++) {\n        if (descriptions[i - 1] !== descriptions[i]) {\n          descriptions[j] = descriptions[i];\n          j++;\n        }\n      }\n      descriptions.length = j;\n    }\n\n    switch (descriptions.length) {\n      case 1:\n        return descriptions[0];\n\n      case 2:\n        return descriptions[0] + \" or \" + descriptions[1];\n\n      default:\n        return descriptions.slice(0, -1).join(\", \")\n          + \", or \"\n          + descriptions[descriptions.length - 1];\n    }\n  }\n\n  function describeFound(found) {\n    return found ? \"\\\"\" + literalEscape(found) + \"\\\"\" : \"end of input\";\n  }\n\n  return \"Expected \" + describeExpected(expected) + \" but \" + describeFound(found) + \" found.\";\n};\n\nfunction peg$parse(input, options) {\n  options = options !== void 0 ? options : {};\n\n  var peg$FAILED = {},\n\n      peg$startRuleFunctions = { svg_path: peg$parsesvg_path },\n      peg$startRuleFunction  = peg$parsesvg_path,\n\n      peg$c0 = function(data) {\n          if (!data) return [];\n          for (var cmds=[],i=0;i<data.length;i++) cmds=cmds.concat.apply(cmds,data[i]);\n          var first=cmds[0];\n          if (first && first.code=='m'){ // Per spec, first moveto is never relative\n            delete first.relative;\n            first.code = 'M';\n          }\n          return cmds;\n        },\n      peg$c1 = function(first, more) { return merge(first,more) },\n      peg$c2 = /^[Mm]/,\n      peg$c3 = peg$classExpectation([\"M\", \"m\"], false, false),\n      peg$c4 = function(c, first, more) {\n          var move = commands(c,[first]);\n          if (more) move = move.concat(commands(c=='M' ? 'L' : 'l',more[1]));\n          return move;\n        },\n      peg$c5 = /^[Zz]/,\n      peg$c6 = peg$classExpectation([\"Z\", \"z\"], false, false),\n      peg$c7 = function() { return commands('Z') },\n      peg$c8 = /^[Ll]/,\n      peg$c9 = peg$classExpectation([\"L\", \"l\"], false, false),\n      peg$c10 = function(c, args) { return commands(c,args) },\n      peg$c11 = /^[Hh]/,\n      peg$c12 = peg$classExpectation([\"H\", \"h\"], false, false),\n      peg$c13 = function(c, args) { return commands(c,args.map(function(x){ return {x:x}})) },\n      peg$c14 = /^[Vv]/,\n      peg$c15 = peg$classExpectation([\"V\", \"v\"], false, false),\n      peg$c16 = function(c, args) { return commands(c,args.map(function(y){ return {y:y}})) },\n      peg$c17 = /^[Cc]/,\n      peg$c18 = peg$classExpectation([\"C\", \"c\"], false, false),\n      peg$c19 = function(a, b, c) { return { x1:a.x, y1:a.y, x2:b.x, y2:b.y, x:c.x, y:c.y } },\n      peg$c20 = /^[Ss]/,\n      peg$c21 = peg$classExpectation([\"S\", \"s\"], false, false),\n      peg$c22 = function(b, c) { return { x2:b.x, y2:b.y, x:c.x, y:c.y } },\n      peg$c23 = /^[Qq]/,\n      peg$c24 = peg$classExpectation([\"Q\", \"q\"], false, false),\n      peg$c25 = function(a, b) { return { x1:a.x, y1:a.y, x:b.x, y:b.y } },\n      peg$c26 = /^[Tt]/,\n      peg$c27 = peg$classExpectation([\"T\", \"t\"], false, false),\n      peg$c28 = /^[Aa]/,\n      peg$c29 = peg$classExpectation([\"A\", \"a\"], false, false),\n      peg$c30 = function(rx, ry, xrot, large, sweep, xy) { return { rx:rx, ry:ry, xAxisRotation:xrot, largeArc:large, sweep:sweep, x:xy.x, y:xy.y } },\n      peg$c31 = function(x, y) { return { x:x, y:y } },\n      peg$c32 = function(n) { return n*1 },\n      peg$c33 = function(parts) { return parts.join('')*1 },\n      peg$c34 = /^[01]/,\n      peg$c35 = peg$classExpectation([\"0\", \"1\"], false, false),\n      peg$c36 = function(bit) { return bit=='1' },\n      peg$c37 = function() { return '' },\n      peg$c38 = \",\",\n      peg$c39 = peg$literalExpectation(\",\", false),\n      peg$c40 = function(parts) { return parts.join('') },\n      peg$c41 = \".\",\n      peg$c42 = peg$literalExpectation(\".\", false),\n      peg$c43 = /^[eE]/,\n      peg$c44 = peg$classExpectation([\"e\", \"E\"], false, false),\n      peg$c45 = /^[+\\-]/,\n      peg$c46 = peg$classExpectation([\"+\", \"-\"], false, false),\n      peg$c47 = /^[0-9]/,\n      peg$c48 = peg$classExpectation([[\"0\", \"9\"]], false, false),\n      peg$c49 = function(digits) { return digits.join('') },\n      peg$c50 = /^[ \\t\\n\\r]/,\n      peg$c51 = peg$classExpectation([\" \", \"\\t\", \"\\n\", \"\\r\"], false, false),\n\n      peg$currPos          = 0,\n      peg$savedPos         = 0,\n      peg$posDetailsCache  = [{ line: 1, column: 1 }],\n      peg$maxFailPos       = 0,\n      peg$maxFailExpected  = [],\n      peg$silentFails      = 0,\n\n      peg$result;\n\n  if (\"startRule\" in options) {\n    if (!(options.startRule in peg$startRuleFunctions)) {\n      throw new Error(\"Can't start parsing from rule \\\"\" + options.startRule + \"\\\".\");\n    }\n\n    peg$startRuleFunction = peg$startRuleFunctions[options.startRule];\n  }\n\n  function text() {\n    return input.substring(peg$savedPos, peg$currPos);\n  }\n\n  function location() {\n    return peg$computeLocation(peg$savedPos, peg$currPos);\n  }\n\n  function expected(description, location) {\n    location = location !== void 0 ? location : peg$computeLocation(peg$savedPos, peg$currPos)\n\n    throw peg$buildStructuredError(\n      [peg$otherExpectation(description)],\n      input.substring(peg$savedPos, peg$currPos),\n      location\n    );\n  }\n\n  function error(message, location) {\n    location = location !== void 0 ? location : peg$computeLocation(peg$savedPos, peg$currPos)\n\n    throw peg$buildSimpleError(message, location);\n  }\n\n  function peg$literalExpectation(text, ignoreCase) {\n    return { type: \"literal\", text: text, ignoreCase: ignoreCase };\n  }\n\n  function peg$classExpectation(parts, inverted, ignoreCase) {\n    return { type: \"class\", parts: parts, inverted: inverted, ignoreCase: ignoreCase };\n  }\n\n  function peg$anyExpectation() {\n    return { type: \"any\" };\n  }\n\n  function peg$endExpectation() {\n    return { type: \"end\" };\n  }\n\n  function peg$otherExpectation(description) {\n    return { type: \"other\", description: description };\n  }\n\n  function peg$computePosDetails(pos) {\n    var details = peg$posDetailsCache[pos], p;\n\n    if (details) {\n      return details;\n    } else {\n      p = pos - 1;\n      while (!peg$posDetailsCache[p]) {\n        p--;\n      }\n\n      details = peg$posDetailsCache[p];\n      details = {\n        line:   details.line,\n        column: details.column\n      };\n\n      while (p < pos) {\n        if (input.charCodeAt(p) === 10) {\n          details.line++;\n          details.column = 1;\n        } else {\n          details.column++;\n        }\n\n        p++;\n      }\n\n      peg$posDetailsCache[pos] = details;\n      return details;\n    }\n  }\n\n  function peg$computeLocation(startPos, endPos) {\n    var startPosDetails = peg$computePosDetails(startPos),\n        endPosDetails   = peg$computePosDetails(endPos);\n\n    return {\n      start: {\n        offset: startPos,\n        line:   startPosDetails.line,\n        column: startPosDetails.column\n      },\n      end: {\n        offset: endPos,\n        line:   endPosDetails.line,\n        column: endPosDetails.column\n      }\n    };\n  }\n\n  function peg$fail(expected) {\n    if (peg$currPos < peg$maxFailPos) { return; }\n\n    if (peg$currPos > peg$maxFailPos) {\n      peg$maxFailPos = peg$currPos;\n      peg$maxFailExpected = [];\n    }\n\n    peg$maxFailExpected.push(expected);\n  }\n\n  function peg$buildSimpleError(message, location) {\n    return new peg$SyntaxError(message, null, null, location);\n  }\n\n  function peg$buildStructuredError(expected, found, location) {\n    return new peg$SyntaxError(\n      peg$SyntaxError.buildMessage(expected, found),\n      expected,\n      found,\n      location\n    );\n  }\n\n  function peg$parsesvg_path() {\n    var s0, s1, s2, s3, s4;\n\n    s0 = peg$currPos;\n    s1 = [];\n    s2 = peg$parsewsp();\n    while (s2 !== peg$FAILED) {\n      s1.push(s2);\n      s2 = peg$parsewsp();\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsemoveTo_drawTo_commandGroups();\n      if (s2 === peg$FAILED) {\n        s2 = null;\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = [];\n        s4 = peg$parsewsp();\n        while (s4 !== peg$FAILED) {\n          s3.push(s4);\n          s4 = peg$parsewsp();\n        }\n        if (s3 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c0(s2);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsemoveTo_drawTo_commandGroups() {\n    var s0, s1, s2, s3, s4, s5;\n\n    s0 = peg$currPos;\n    s1 = peg$parsemoveTo_drawTo_commandGroup();\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$currPos;\n      s4 = [];\n      s5 = peg$parsewsp();\n      while (s5 !== peg$FAILED) {\n        s4.push(s5);\n        s5 = peg$parsewsp();\n      }\n      if (s4 !== peg$FAILED) {\n        s5 = peg$parsemoveTo_drawTo_commandGroup();\n        if (s5 !== peg$FAILED) {\n          s4 = [s4, s5];\n          s3 = s4;\n        } else {\n          peg$currPos = s3;\n          s3 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s3;\n        s3 = peg$FAILED;\n      }\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$currPos;\n        s4 = [];\n        s5 = peg$parsewsp();\n        while (s5 !== peg$FAILED) {\n          s4.push(s5);\n          s5 = peg$parsewsp();\n        }\n        if (s4 !== peg$FAILED) {\n          s5 = peg$parsemoveTo_drawTo_commandGroup();\n          if (s5 !== peg$FAILED) {\n            s4 = [s4, s5];\n            s3 = s4;\n          } else {\n            peg$currPos = s3;\n            s3 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s3;\n          s3 = peg$FAILED;\n        }\n      }\n      if (s2 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c1(s1, s2);\n        s0 = s1;\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsemoveTo_drawTo_commandGroup() {\n    var s0, s1, s2, s3, s4, s5;\n\n    s0 = peg$currPos;\n    s1 = peg$parsemoveto();\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$currPos;\n      s4 = [];\n      s5 = peg$parsewsp();\n      while (s5 !== peg$FAILED) {\n        s4.push(s5);\n        s5 = peg$parsewsp();\n      }\n      if (s4 !== peg$FAILED) {\n        s5 = peg$parsedrawto_command();\n        if (s5 !== peg$FAILED) {\n          s4 = [s4, s5];\n          s3 = s4;\n        } else {\n          peg$currPos = s3;\n          s3 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s3;\n        s3 = peg$FAILED;\n      }\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$currPos;\n        s4 = [];\n        s5 = peg$parsewsp();\n        while (s5 !== peg$FAILED) {\n          s4.push(s5);\n          s5 = peg$parsewsp();\n        }\n        if (s4 !== peg$FAILED) {\n          s5 = peg$parsedrawto_command();\n          if (s5 !== peg$FAILED) {\n            s4 = [s4, s5];\n            s3 = s4;\n          } else {\n            peg$currPos = s3;\n            s3 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s3;\n          s3 = peg$FAILED;\n        }\n      }\n      if (s2 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c1(s1, s2);\n        s0 = s1;\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsedrawto_command() {\n    var s0;\n\n    s0 = peg$parseclosepath();\n    if (s0 === peg$FAILED) {\n      s0 = peg$parselineto();\n      if (s0 === peg$FAILED) {\n        s0 = peg$parsehorizontal_lineto();\n        if (s0 === peg$FAILED) {\n          s0 = peg$parsevertical_lineto();\n          if (s0 === peg$FAILED) {\n            s0 = peg$parsecurveto();\n            if (s0 === peg$FAILED) {\n              s0 = peg$parsesmooth_curveto();\n              if (s0 === peg$FAILED) {\n                s0 = peg$parsequadratic_bezier_curveto();\n                if (s0 === peg$FAILED) {\n                  s0 = peg$parsesmooth_quadratic_bezier_curveto();\n                  if (s0 === peg$FAILED) {\n                    s0 = peg$parseelliptical_arc();\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n\n    return s0;\n  }\n\n  function peg$parsemoveto() {\n    var s0, s1, s2, s3, s4, s5, s6;\n\n    s0 = peg$currPos;\n    if (peg$c2.test(input.charAt(peg$currPos))) {\n      s1 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c3); }\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$parsewsp();\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$parsewsp();\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsecoordinate_pair();\n        if (s3 !== peg$FAILED) {\n          s4 = peg$currPos;\n          s5 = peg$parsecomma_wsp();\n          if (s5 === peg$FAILED) {\n            s5 = null;\n          }\n          if (s5 !== peg$FAILED) {\n            s6 = peg$parselineto_argument_sequence();\n            if (s6 !== peg$FAILED) {\n              s5 = [s5, s6];\n              s4 = s5;\n            } else {\n              peg$currPos = s4;\n              s4 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s4;\n            s4 = peg$FAILED;\n          }\n          if (s4 === peg$FAILED) {\n            s4 = null;\n          }\n          if (s4 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s1 = peg$c4(s1, s3, s4);\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parseclosepath() {\n    var s0, s1;\n\n    s0 = peg$currPos;\n    if (peg$c5.test(input.charAt(peg$currPos))) {\n      s1 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c6); }\n    }\n    if (s1 !== peg$FAILED) {\n      peg$savedPos = s0;\n      s1 = peg$c7();\n    }\n    s0 = s1;\n\n    return s0;\n  }\n\n  function peg$parselineto() {\n    var s0, s1, s2, s3;\n\n    s0 = peg$currPos;\n    if (peg$c8.test(input.charAt(peg$currPos))) {\n      s1 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c9); }\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$parsewsp();\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$parsewsp();\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parselineto_argument_sequence();\n        if (s3 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c10(s1, s3);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parselineto_argument_sequence() {\n    var s0, s1, s2, s3, s4, s5;\n\n    s0 = peg$currPos;\n    s1 = peg$parsecoordinate_pair();\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$currPos;\n      s4 = peg$parsecomma_wsp();\n      if (s4 === peg$FAILED) {\n        s4 = null;\n      }\n      if (s4 !== peg$FAILED) {\n        s5 = peg$parsecoordinate_pair();\n        if (s5 !== peg$FAILED) {\n          s4 = [s4, s5];\n          s3 = s4;\n        } else {\n          peg$currPos = s3;\n          s3 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s3;\n        s3 = peg$FAILED;\n      }\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$currPos;\n        s4 = peg$parsecomma_wsp();\n        if (s4 === peg$FAILED) {\n          s4 = null;\n        }\n        if (s4 !== peg$FAILED) {\n          s5 = peg$parsecoordinate_pair();\n          if (s5 !== peg$FAILED) {\n            s4 = [s4, s5];\n            s3 = s4;\n          } else {\n            peg$currPos = s3;\n            s3 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s3;\n          s3 = peg$FAILED;\n        }\n      }\n      if (s2 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c1(s1, s2);\n        s0 = s1;\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsehorizontal_lineto() {\n    var s0, s1, s2, s3;\n\n    s0 = peg$currPos;\n    if (peg$c11.test(input.charAt(peg$currPos))) {\n      s1 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c12); }\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$parsewsp();\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$parsewsp();\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsecoordinate_sequence();\n        if (s3 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c13(s1, s3);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsecoordinate_sequence() {\n    var s0, s1, s2, s3, s4, s5;\n\n    s0 = peg$currPos;\n    s1 = peg$parsenumber();\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$currPos;\n      s4 = peg$parsecomma_wsp();\n      if (s4 === peg$FAILED) {\n        s4 = null;\n      }\n      if (s4 !== peg$FAILED) {\n        s5 = peg$parsenumber();\n        if (s5 !== peg$FAILED) {\n          s4 = [s4, s5];\n          s3 = s4;\n        } else {\n          peg$currPos = s3;\n          s3 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s3;\n        s3 = peg$FAILED;\n      }\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$currPos;\n        s4 = peg$parsecomma_wsp();\n        if (s4 === peg$FAILED) {\n          s4 = null;\n        }\n        if (s4 !== peg$FAILED) {\n          s5 = peg$parsenumber();\n          if (s5 !== peg$FAILED) {\n            s4 = [s4, s5];\n            s3 = s4;\n          } else {\n            peg$currPos = s3;\n            s3 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s3;\n          s3 = peg$FAILED;\n        }\n      }\n      if (s2 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c1(s1, s2);\n        s0 = s1;\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsevertical_lineto() {\n    var s0, s1, s2, s3;\n\n    s0 = peg$currPos;\n    if (peg$c14.test(input.charAt(peg$currPos))) {\n      s1 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c15); }\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$parsewsp();\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$parsewsp();\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsecoordinate_sequence();\n        if (s3 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c16(s1, s3);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsecurveto() {\n    var s0, s1, s2, s3;\n\n    s0 = peg$currPos;\n    if (peg$c17.test(input.charAt(peg$currPos))) {\n      s1 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c18); }\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$parsewsp();\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$parsewsp();\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsecurveto_argument_sequence();\n        if (s3 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c10(s1, s3);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsecurveto_argument_sequence() {\n    var s0, s1, s2, s3, s4, s5;\n\n    s0 = peg$currPos;\n    s1 = peg$parsecurveto_argument();\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$currPos;\n      s4 = peg$parsecomma_wsp();\n      if (s4 === peg$FAILED) {\n        s4 = null;\n      }\n      if (s4 !== peg$FAILED) {\n        s5 = peg$parsecurveto_argument();\n        if (s5 !== peg$FAILED) {\n          s4 = [s4, s5];\n          s3 = s4;\n        } else {\n          peg$currPos = s3;\n          s3 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s3;\n        s3 = peg$FAILED;\n      }\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$currPos;\n        s4 = peg$parsecomma_wsp();\n        if (s4 === peg$FAILED) {\n          s4 = null;\n        }\n        if (s4 !== peg$FAILED) {\n          s5 = peg$parsecurveto_argument();\n          if (s5 !== peg$FAILED) {\n            s4 = [s4, s5];\n            s3 = s4;\n          } else {\n            peg$currPos = s3;\n            s3 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s3;\n          s3 = peg$FAILED;\n        }\n      }\n      if (s2 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c1(s1, s2);\n        s0 = s1;\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsecurveto_argument() {\n    var s0, s1, s2, s3, s4, s5;\n\n    s0 = peg$currPos;\n    s1 = peg$parsecoordinate_pair();\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsecomma_wsp();\n      if (s2 === peg$FAILED) {\n        s2 = null;\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsecoordinate_pair();\n        if (s3 !== peg$FAILED) {\n          s4 = peg$parsecomma_wsp();\n          if (s4 === peg$FAILED) {\n            s4 = null;\n          }\n          if (s4 !== peg$FAILED) {\n            s5 = peg$parsecoordinate_pair();\n            if (s5 !== peg$FAILED) {\n              peg$savedPos = s0;\n              s1 = peg$c19(s1, s3, s5);\n              s0 = s1;\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsesmooth_curveto() {\n    var s0, s1, s2, s3;\n\n    s0 = peg$currPos;\n    if (peg$c20.test(input.charAt(peg$currPos))) {\n      s1 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c21); }\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$parsewsp();\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$parsewsp();\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsesmooth_curveto_argument_sequence();\n        if (s3 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c10(s1, s3);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsesmooth_curveto_argument_sequence() {\n    var s0, s1, s2, s3, s4, s5;\n\n    s0 = peg$currPos;\n    s1 = peg$parsesmooth_curveto_argument();\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$currPos;\n      s4 = peg$parsecomma_wsp();\n      if (s4 === peg$FAILED) {\n        s4 = null;\n      }\n      if (s4 !== peg$FAILED) {\n        s5 = peg$parsesmooth_curveto_argument();\n        if (s5 !== peg$FAILED) {\n          s4 = [s4, s5];\n          s3 = s4;\n        } else {\n          peg$currPos = s3;\n          s3 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s3;\n        s3 = peg$FAILED;\n      }\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$currPos;\n        s4 = peg$parsecomma_wsp();\n        if (s4 === peg$FAILED) {\n          s4 = null;\n        }\n        if (s4 !== peg$FAILED) {\n          s5 = peg$parsesmooth_curveto_argument();\n          if (s5 !== peg$FAILED) {\n            s4 = [s4, s5];\n            s3 = s4;\n          } else {\n            peg$currPos = s3;\n            s3 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s3;\n          s3 = peg$FAILED;\n        }\n      }\n      if (s2 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c1(s1, s2);\n        s0 = s1;\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsesmooth_curveto_argument() {\n    var s0, s1, s2, s3;\n\n    s0 = peg$currPos;\n    s1 = peg$parsecoordinate_pair();\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsecomma_wsp();\n      if (s2 === peg$FAILED) {\n        s2 = null;\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsecoordinate_pair();\n        if (s3 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c22(s1, s3);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsequadratic_bezier_curveto() {\n    var s0, s1, s2, s3;\n\n    s0 = peg$currPos;\n    if (peg$c23.test(input.charAt(peg$currPos))) {\n      s1 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c24); }\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$parsewsp();\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$parsewsp();\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsequadratic_bezier_curveto_argument_sequence();\n        if (s3 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c10(s1, s3);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsequadratic_bezier_curveto_argument_sequence() {\n    var s0, s1, s2, s3, s4, s5;\n\n    s0 = peg$currPos;\n    s1 = peg$parsequadratic_bezier_curveto_argument();\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$currPos;\n      s4 = peg$parsecomma_wsp();\n      if (s4 === peg$FAILED) {\n        s4 = null;\n      }\n      if (s4 !== peg$FAILED) {\n        s5 = peg$parsequadratic_bezier_curveto_argument();\n        if (s5 !== peg$FAILED) {\n          s4 = [s4, s5];\n          s3 = s4;\n        } else {\n          peg$currPos = s3;\n          s3 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s3;\n        s3 = peg$FAILED;\n      }\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$currPos;\n        s4 = peg$parsecomma_wsp();\n        if (s4 === peg$FAILED) {\n          s4 = null;\n        }\n        if (s4 !== peg$FAILED) {\n          s5 = peg$parsequadratic_bezier_curveto_argument();\n          if (s5 !== peg$FAILED) {\n            s4 = [s4, s5];\n            s3 = s4;\n          } else {\n            peg$currPos = s3;\n            s3 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s3;\n          s3 = peg$FAILED;\n        }\n      }\n      if (s2 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c1(s1, s2);\n        s0 = s1;\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsequadratic_bezier_curveto_argument() {\n    var s0, s1, s2, s3;\n\n    s0 = peg$currPos;\n    s1 = peg$parsecoordinate_pair();\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsecomma_wsp();\n      if (s2 === peg$FAILED) {\n        s2 = null;\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsecoordinate_pair();\n        if (s3 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c25(s1, s3);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsesmooth_quadratic_bezier_curveto() {\n    var s0, s1, s2, s3;\n\n    s0 = peg$currPos;\n    if (peg$c26.test(input.charAt(peg$currPos))) {\n      s1 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c27); }\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$parsewsp();\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$parsewsp();\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsesmooth_quadratic_bezier_curveto_argument_sequence();\n        if (s3 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c10(s1, s3);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsesmooth_quadratic_bezier_curveto_argument_sequence() {\n    var s0, s1, s2, s3, s4, s5;\n\n    s0 = peg$currPos;\n    s1 = peg$parsecoordinate_pair();\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$currPos;\n      s4 = peg$parsecomma_wsp();\n      if (s4 === peg$FAILED) {\n        s4 = null;\n      }\n      if (s4 !== peg$FAILED) {\n        s5 = peg$parsecoordinate_pair();\n        if (s5 !== peg$FAILED) {\n          s4 = [s4, s5];\n          s3 = s4;\n        } else {\n          peg$currPos = s3;\n          s3 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s3;\n        s3 = peg$FAILED;\n      }\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$currPos;\n        s4 = peg$parsecomma_wsp();\n        if (s4 === peg$FAILED) {\n          s4 = null;\n        }\n        if (s4 !== peg$FAILED) {\n          s5 = peg$parsecoordinate_pair();\n          if (s5 !== peg$FAILED) {\n            s4 = [s4, s5];\n            s3 = s4;\n          } else {\n            peg$currPos = s3;\n            s3 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s3;\n          s3 = peg$FAILED;\n        }\n      }\n      if (s2 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c1(s1, s2);\n        s0 = s1;\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parseelliptical_arc() {\n    var s0, s1, s2, s3;\n\n    s0 = peg$currPos;\n    if (peg$c28.test(input.charAt(peg$currPos))) {\n      s1 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c29); }\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$parsewsp();\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$parsewsp();\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parseelliptical_arc_argument_sequence();\n        if (s3 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c10(s1, s3);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parseelliptical_arc_argument_sequence() {\n    var s0, s1, s2, s3, s4, s5;\n\n    s0 = peg$currPos;\n    s1 = peg$parseelliptical_arc_argument();\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$currPos;\n      s4 = peg$parsecomma_wsp();\n      if (s4 === peg$FAILED) {\n        s4 = null;\n      }\n      if (s4 !== peg$FAILED) {\n        s5 = peg$parseelliptical_arc_argument();\n        if (s5 !== peg$FAILED) {\n          s4 = [s4, s5];\n          s3 = s4;\n        } else {\n          peg$currPos = s3;\n          s3 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s3;\n        s3 = peg$FAILED;\n      }\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$currPos;\n        s4 = peg$parsecomma_wsp();\n        if (s4 === peg$FAILED) {\n          s4 = null;\n        }\n        if (s4 !== peg$FAILED) {\n          s5 = peg$parseelliptical_arc_argument();\n          if (s5 !== peg$FAILED) {\n            s4 = [s4, s5];\n            s3 = s4;\n          } else {\n            peg$currPos = s3;\n            s3 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s3;\n          s3 = peg$FAILED;\n        }\n      }\n      if (s2 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c1(s1, s2);\n        s0 = s1;\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parseelliptical_arc_argument() {\n    var s0, s1, s2, s3, s4, s5, s6, s7, s8, s9, s10, s11;\n\n    s0 = peg$currPos;\n    s1 = peg$parsenonnegative_number();\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsecomma_wsp();\n      if (s2 === peg$FAILED) {\n        s2 = null;\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsenonnegative_number();\n        if (s3 !== peg$FAILED) {\n          s4 = peg$parsecomma_wsp();\n          if (s4 === peg$FAILED) {\n            s4 = null;\n          }\n          if (s4 !== peg$FAILED) {\n            s5 = peg$parsenumber();\n            if (s5 !== peg$FAILED) {\n              s6 = peg$parsecomma_wsp();\n              if (s6 !== peg$FAILED) {\n                s7 = peg$parseflag();\n                if (s7 !== peg$FAILED) {\n                  s8 = peg$parsecomma_wsp();\n                  if (s8 === peg$FAILED) {\n                    s8 = null;\n                  }\n                  if (s8 !== peg$FAILED) {\n                    s9 = peg$parseflag();\n                    if (s9 !== peg$FAILED) {\n                      s10 = peg$parsecomma_wsp();\n                      if (s10 === peg$FAILED) {\n                        s10 = null;\n                      }\n                      if (s10 !== peg$FAILED) {\n                        s11 = peg$parsecoordinate_pair();\n                        if (s11 !== peg$FAILED) {\n                          peg$savedPos = s0;\n                          s1 = peg$c30(s1, s3, s5, s7, s9, s11);\n                          s0 = s1;\n                        } else {\n                          peg$currPos = s0;\n                          s0 = peg$FAILED;\n                        }\n                      } else {\n                        peg$currPos = s0;\n                        s0 = peg$FAILED;\n                      }\n                    } else {\n                      peg$currPos = s0;\n                      s0 = peg$FAILED;\n                    }\n                  } else {\n                    peg$currPos = s0;\n                    s0 = peg$FAILED;\n                  }\n                } else {\n                  peg$currPos = s0;\n                  s0 = peg$FAILED;\n                }\n              } else {\n                peg$currPos = s0;\n                s0 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsecoordinate_pair() {\n    var s0, s1, s2, s3;\n\n    s0 = peg$currPos;\n    s1 = peg$parsenumber();\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsecomma_wsp();\n      if (s2 === peg$FAILED) {\n        s2 = null;\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsenumber();\n        if (s3 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c31(s1, s3);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsenonnegative_number() {\n    var s0, s1;\n\n    s0 = peg$currPos;\n    s1 = peg$parsefloating_point_constant();\n    if (s1 === peg$FAILED) {\n      s1 = peg$parsedigit_sequence();\n    }\n    if (s1 !== peg$FAILED) {\n      peg$savedPos = s0;\n      s1 = peg$c32(s1);\n    }\n    s0 = s1;\n\n    return s0;\n  }\n\n  function peg$parsenumber() {\n    var s0, s1, s2, s3;\n\n    s0 = peg$currPos;\n    s1 = peg$currPos;\n    s2 = peg$parsesign();\n    if (s2 === peg$FAILED) {\n      s2 = null;\n    }\n    if (s2 !== peg$FAILED) {\n      s3 = peg$parsefloating_point_constant();\n      if (s3 !== peg$FAILED) {\n        s2 = [s2, s3];\n        s1 = s2;\n      } else {\n        peg$currPos = s1;\n        s1 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s1;\n      s1 = peg$FAILED;\n    }\n    if (s1 === peg$FAILED) {\n      s1 = peg$currPos;\n      s2 = peg$parsesign();\n      if (s2 === peg$FAILED) {\n        s2 = null;\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsedigit_sequence();\n        if (s3 !== peg$FAILED) {\n          s2 = [s2, s3];\n          s1 = s2;\n        } else {\n          peg$currPos = s1;\n          s1 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s1;\n        s1 = peg$FAILED;\n      }\n    }\n    if (s1 !== peg$FAILED) {\n      peg$savedPos = s0;\n      s1 = peg$c33(s1);\n    }\n    s0 = s1;\n\n    return s0;\n  }\n\n  function peg$parseflag() {\n    var s0, s1;\n\n    s0 = peg$currPos;\n    if (peg$c34.test(input.charAt(peg$currPos))) {\n      s1 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c35); }\n    }\n    if (s1 !== peg$FAILED) {\n      peg$savedPos = s0;\n      s1 = peg$c36(s1);\n    }\n    s0 = s1;\n\n    return s0;\n  }\n\n  function peg$parsecomma_wsp() {\n    var s0, s1, s2, s3, s4;\n\n    s0 = peg$currPos;\n    s1 = [];\n    s2 = peg$parsewsp();\n    if (s2 !== peg$FAILED) {\n      while (s2 !== peg$FAILED) {\n        s1.push(s2);\n        s2 = peg$parsewsp();\n      }\n    } else {\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsecomma();\n      if (s2 === peg$FAILED) {\n        s2 = null;\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = [];\n        s4 = peg$parsewsp();\n        while (s4 !== peg$FAILED) {\n          s3.push(s4);\n          s4 = peg$parsewsp();\n        }\n        if (s3 !== peg$FAILED) {\n          s1 = [s1, s2, s3];\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    if (s0 === peg$FAILED) {\n      s0 = peg$currPos;\n      s1 = peg$currPos;\n      s2 = peg$parsecomma();\n      if (s2 !== peg$FAILED) {\n        s3 = [];\n        s4 = peg$parsewsp();\n        while (s4 !== peg$FAILED) {\n          s3.push(s4);\n          s4 = peg$parsewsp();\n        }\n        if (s3 !== peg$FAILED) {\n          s2 = [s2, s3];\n          s1 = s2;\n        } else {\n          peg$currPos = s1;\n          s1 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s1;\n        s1 = peg$FAILED;\n      }\n      if (s1 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c37();\n      }\n      s0 = s1;\n    }\n\n    return s0;\n  }\n\n  function peg$parsecomma() {\n    var s0;\n\n    if (input.charCodeAt(peg$currPos) === 44) {\n      s0 = peg$c38;\n      peg$currPos++;\n    } else {\n      s0 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c39); }\n    }\n\n    return s0;\n  }\n\n  function peg$parsefloating_point_constant() {\n    var s0, s1, s2, s3;\n\n    s0 = peg$currPos;\n    s1 = peg$currPos;\n    s2 = peg$parsefractional_constant();\n    if (s2 !== peg$FAILED) {\n      s3 = peg$parseexponent();\n      if (s3 === peg$FAILED) {\n        s3 = null;\n      }\n      if (s3 !== peg$FAILED) {\n        s2 = [s2, s3];\n        s1 = s2;\n      } else {\n        peg$currPos = s1;\n        s1 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s1;\n      s1 = peg$FAILED;\n    }\n    if (s1 === peg$FAILED) {\n      s1 = peg$currPos;\n      s2 = peg$parsedigit_sequence();\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parseexponent();\n        if (s3 !== peg$FAILED) {\n          s2 = [s2, s3];\n          s1 = s2;\n        } else {\n          peg$currPos = s1;\n          s1 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s1;\n        s1 = peg$FAILED;\n      }\n    }\n    if (s1 !== peg$FAILED) {\n      peg$savedPos = s0;\n      s1 = peg$c40(s1);\n    }\n    s0 = s1;\n\n    return s0;\n  }\n\n  function peg$parsefractional_constant() {\n    var s0, s1, s2, s3, s4;\n\n    s0 = peg$currPos;\n    s1 = peg$currPos;\n    s2 = peg$parsedigit_sequence();\n    if (s2 === peg$FAILED) {\n      s2 = null;\n    }\n    if (s2 !== peg$FAILED) {\n      if (input.charCodeAt(peg$currPos) === 46) {\n        s3 = peg$c41;\n        peg$currPos++;\n      } else {\n        s3 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c42); }\n      }\n      if (s3 !== peg$FAILED) {\n        s4 = peg$parsedigit_sequence();\n        if (s4 !== peg$FAILED) {\n          s2 = [s2, s3, s4];\n          s1 = s2;\n        } else {\n          peg$currPos = s1;\n          s1 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s1;\n        s1 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s1;\n      s1 = peg$FAILED;\n    }\n    if (s1 === peg$FAILED) {\n      s1 = peg$currPos;\n      s2 = peg$parsedigit_sequence();\n      if (s2 !== peg$FAILED) {\n        if (input.charCodeAt(peg$currPos) === 46) {\n          s3 = peg$c41;\n          peg$currPos++;\n        } else {\n          s3 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c42); }\n        }\n        if (s3 !== peg$FAILED) {\n          s2 = [s2, s3];\n          s1 = s2;\n        } else {\n          peg$currPos = s1;\n          s1 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s1;\n        s1 = peg$FAILED;\n      }\n    }\n    if (s1 !== peg$FAILED) {\n      peg$savedPos = s0;\n      s1 = peg$c40(s1);\n    }\n    s0 = s1;\n\n    return s0;\n  }\n\n  function peg$parseexponent() {\n    var s0, s1, s2, s3, s4;\n\n    s0 = peg$currPos;\n    s1 = peg$currPos;\n    if (peg$c43.test(input.charAt(peg$currPos))) {\n      s2 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s2 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c44); }\n    }\n    if (s2 !== peg$FAILED) {\n      s3 = peg$parsesign();\n      if (s3 === peg$FAILED) {\n        s3 = null;\n      }\n      if (s3 !== peg$FAILED) {\n        s4 = peg$parsedigit_sequence();\n        if (s4 !== peg$FAILED) {\n          s2 = [s2, s3, s4];\n          s1 = s2;\n        } else {\n          peg$currPos = s1;\n          s1 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s1;\n        s1 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s1;\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      peg$savedPos = s0;\n      s1 = peg$c40(s1);\n    }\n    s0 = s1;\n\n    return s0;\n  }\n\n  function peg$parsesign() {\n    var s0;\n\n    if (peg$c45.test(input.charAt(peg$currPos))) {\n      s0 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s0 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c46); }\n    }\n\n    return s0;\n  }\n\n  function peg$parsedigit_sequence() {\n    var s0, s1, s2;\n\n    s0 = peg$currPos;\n    s1 = [];\n    if (peg$c47.test(input.charAt(peg$currPos))) {\n      s2 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s2 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c48); }\n    }\n    if (s2 !== peg$FAILED) {\n      while (s2 !== peg$FAILED) {\n        s1.push(s2);\n        if (peg$c47.test(input.charAt(peg$currPos))) {\n          s2 = input.charAt(peg$currPos);\n          peg$currPos++;\n        } else {\n          s2 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c48); }\n        }\n      }\n    } else {\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      peg$savedPos = s0;\n      s1 = peg$c49(s1);\n    }\n    s0 = s1;\n\n    return s0;\n  }\n\n  function peg$parsewsp() {\n    var s0, s1;\n\n    s0 = peg$currPos;\n    if (peg$c50.test(input.charAt(peg$currPos))) {\n      s1 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c51); }\n    }\n    if (s1 !== peg$FAILED) {\n      peg$savedPos = s0;\n      s1 = peg$c37();\n    }\n    s0 = s1;\n\n    return s0;\n  }\n\n\n    function merge(first,more){\n      if (!more) return [first];\n      for (var a=[first],i=0,l=more.length;i<l;i++) a[i+1]=more[i][1];\n      return a;\n    }\n\n    var cmds = {m:'moveto',l:'lineto',h:'horizontal lineto',v:'vertical lineto',c:'curveto',s:'smooth curveto',q:'quadratic curveto',t:'smooth quadratic curveto',a:'elliptical arc',z:'closepath'};\n    for (var code in cmds) cmds[code.toUpperCase()]=cmds[code];\n    function commands(code,args){\n      if (!args) args=[{}];\n      for (var i=args.length;i--;){\n        var cmd={code:code,command:cmds[code]};\n        if (code==code.toLowerCase()) cmd.relative=true;\n        for (var k in args[i]) cmd[k]=args[i][k];\n        args[i] = cmd;\n      }\n      return args;\n    }\n\n\n  peg$result = peg$startRuleFunction();\n\n  if (peg$result !== peg$FAILED && peg$currPos === input.length) {\n    return peg$result;\n  } else {\n    if (peg$result !== peg$FAILED && peg$currPos < input.length) {\n      peg$fail(peg$endExpectation());\n    }\n\n    throw peg$buildStructuredError(\n      peg$maxFailExpected,\n      peg$maxFailPos < input.length ? input.charAt(peg$maxFailPos) : null,\n      peg$maxFailPos < input.length\n        ? peg$computeLocation(peg$maxFailPos, peg$maxFailPos + 1)\n        : peg$computeLocation(peg$maxFailPos, peg$maxFailPos)\n    );\n  }\n}\n\nmodule.exports = {\n  SyntaxError: peg$SyntaxError,\n  parse:       peg$parse\n};\n", "// v1.0 exported just the parser function. To maintain backwards compatibility,\n// we export additional named features as properties of that function.\nvar parserFunction = require('./parser.js').parse;\nparserFunction.parseSVG = parserFunction;\nparserFunction.makeAbsolute = makeSVGPathCommandsAbsolute;\nmodule.exports = parserFunction;\n\nfunction makeSVGPathCommandsAbsolute(commands) {\n\tvar subpathStart, prevCmd={x:0,y:0};\n\tvar attr = {x:'x0',y:'y0',x1:'x0',y1:'y0',x2:'x0',y2:'y0'};\n\tcommands.forEach(function(cmd) {\n\t\tif (cmd.command==='moveto') subpathStart=cmd;\n\t\tcmd.x0=prevCmd.x; cmd.y0=prevCmd.y;\n\t\tfor (var a in attr) if (a in cmd) cmd[a] += cmd.relative ? cmd[attr[a]] : 0;\n\t\tif (!('x' in cmd)) cmd.x = prevCmd.x; // V\n\t\tif (!('y' in cmd)) cmd.y = prevCmd.y; // X\n\t\tcmd.relative = false;\n\t\tcmd.code = cmd.code.toUpperCase();\n\t\tif (cmd.command=='closepath') {\n\t\t\tcmd.x = subpathStart.x;\n\t\t\tcmd.y = subpathStart.y;\n\t\t}\n\t\tprevCmd = cmd;\n\t});\n\treturn commands;\n}\n", "const isArrayLike = function (value: any): boolean {\n  /**\n   * isArrayLike([1, 2, 3]) => true\n   * isArrayLike(document.body.children) => true\n   * isArrayLike('abc') => true\n   * isArrayLike(Function) => false\n   */\n  return value !== null && typeof value !== 'function' && isFinite(value.length);\n};\n\nexport default isArrayLike;\n", "import isArrayLike from './is-array-like';\n\nconst filter = function <T>(arr: T[], func: (v: T, idx: number) => boolean): T[] {\n  if (!isArrayLike(arr)) {\n    return arr;\n  }\n  const result: T[] = [];\n  for (let index = 0; index < arr.length; index++) {\n    const value = arr[index];\n    if (func(value, index)) {\n      result.push(value);\n    }\n  }\n\n  return result;\n};\n\nexport default filter;\n", "/**\n * \n * @return \n */\nexport default function isFunction(value: unknown): value is Function {\n  return typeof value === 'function';\n}\n", "/**\n *  null  undefined\n * @return  null  undefined\n */\nexport default function isNil(value: unknown): value is null | undefined {\n  return value === null || value === undefined;\n}\n", "/**\n * \n * @return \n */\nexport default function isArray(value: unknown): value is Array<any> {\n  return Array.isArray(value);\n}\n", "export default <T = object>(value: any): value is T => {\n  /**\n   * isObject({}) => true\n   * isObject([1, 2, 3]) => true\n   * isObject(Function) => true\n   * isObject(null) => false\n   */\n  const type = typeof value;\n  return (value !== null && type === 'object') || type === 'function';\n};\n", "const isObjectLike = function (value: any): value is object {\n  /**\n   * isObjectLike({}) => true\n   * isObjectLike([1, 2, 3]) => true\n   * isObjectLike(Function) => false\n   * isObjectLike(null) => false\n   */\n  return typeof value === 'object' && value !== null;\n};\n\nexport default isObjectLike;\n", "const toString = {}.toString;\n\nconst isType = (value: any, type: string): boolean => toString.call(value) === '[object ' + type + ']';\n\nexport default isType;\n", "import isObjectLike from './is-object-like';\nimport isType from './is-type';\n\nconst isPlainObject = function (value: any): value is object {\n  /**\n   * isObjectLike(new Foo) => false\n   * isObjectLike([1, 2, 3]) => false\n   * isObjectLike({ x: 0, y: 0 }) => true\n   * isObjectLike(Object.create(null)) => true\n   */\n  if (!isObjectLike(value) || !isType(value, 'Object')) {\n    return false;\n  }\n  if (Object.getPrototypeOf(value) === null) {\n    return true;\n  }\n  let proto = value;\n  while (Object.getPrototypeOf(proto) !== null) {\n    proto = Object.getPrototypeOf(proto);\n  }\n  return Object.getPrototypeOf(value) === proto;\n};\n\nexport default isPlainObject;\n", "/**\n * \n * @return \n */\nexport default function isString(value: unknown): value is string {\n  return typeof value === 'string';\n}\n", "import isArray from './is-array';\nimport isFunction from './is-function';\n\nconst hasOwnProperty = Object.prototype.hasOwnProperty;\n\nexport interface ObjectType<T> {\n  [key: string]: T[];\n}\n\nfunction groupBy<T>(data: T[], condition: (item: T) => string): ObjectType<T>;\nfunction groupBy<T>(data: T[], condition: string): ObjectType<T>;\nfunction groupBy<T>(data: T[], condition: ((item: T) => string) | string): ObjectType<T> {\n  if (!condition || !isArray(data)) {\n    return {};\n  }\n  const result: ObjectType<T> = {};\n\n  //  \n  const predicate = isFunction(condition) ? condition : (item) => item[condition];\n\n  let key: string;\n  for (let i = 0; i < data.length; i++) {\n    const item = data[i];\n    key = predicate(item);\n    if (hasOwnProperty.call(result, key)) {\n      result[key].push(item);\n    } else {\n      result[key] = [item];\n    }\n  }\n\n  return result;\n}\n\nexport default groupBy;\n", "const clamp = function (a: number, min: number, max: number): number {\n  if (a < min) {\n    return min;\n  } else if (a > max) {\n    return max;\n  }\n  return a;\n};\n\nexport default clamp;\n", "/**\n * \n * @return \n */\nexport default function isNumber(value: unknown): value is number {\n  return typeof value === 'number';\n}\n", "import isNil from './is-nil';\n\nexport default (value: any): string => {\n  if (isNil(value)) return '';\n  return value.toString();\n};\n", "import toString from './to-string';\n\nconst lowerFirst = function (value: string): string {\n  const str = toString(value);\n  return str.charAt(0).toLowerCase() + str.substring(1);\n};\n\nexport default lowerFirst;\n", "import toString from './to-string';\n\nconst upperFirst = function (value: string): string {\n  const str = toString(value);\n  return str.charAt(0).toUpperCase() + str.substring(1);\n};\n\nexport default upperFirst;\n", "/**\n * \n *\n * @param {Object} value \n * @return {Boolean}\n */\nimport isType from './is-type';\n\nconst isBoolean = function (value: any): value is boolean {\n  return isType(value, 'Boolean');\n};\n\nexport default isBoolean;\n", "/**\n *  Date\n * @return  Date\n */\nexport default function isDate(value: unknown): value is Date {\n  return value instanceof Date;\n}\n", "const isUndefined = function (value: any): value is undefined {\n  return value === undefined;\n};\n\nexport default isUndefined;\n", "function debounce(func: Function, wait?: number, immediate?: boolean) {\n  let timeout;\n  return function () {\n    const context = this,\n      args = arguments;\n    const later = function () {\n      timeout = null;\n      if (!immediate) {\n        func.apply(context, args);\n      }\n    };\n    const callNow = immediate && !timeout;\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n    if (callNow) {\n      func.apply(context, args);\n    }\n  };\n}\n\nexport default debounce;\n", "function flru(max: number) {\n  let num, curr, prev;\n  const limit = max || 1;\n\n  function keep(key, value) {\n    if (++num > limit) {\n      prev = curr;\n      reset(1);\n      ++num;\n    }\n    curr[key] = value;\n  }\n\n  function reset(isPartial?: number) {\n    num = 0;\n    curr = Object.create(null);\n    isPartial || (prev = Object.create(null));\n  }\n\n  reset();\n\n  return {\n    clear: reset,\n    has: function (key) {\n      return curr[key] !== void 0 || prev[key] !== void 0;\n    },\n    get: function (key) {\n      var val = curr[key];\n      if (val !== void 0) return val;\n      if ((val = prev[key]) !== void 0) {\n        keep(key, val);\n        return val;\n      }\n    },\n    set: function (key, value) {\n      if (curr[key] !== void 0) {\n        curr[key] = value;\n      } else {\n        keep(key, value);\n      }\n    },\n  };\n}\n\nconst CacheMap = new Map<Function, ReturnType<typeof flru>>();\n\n/**\n * \n * @example\n * _.memoize(calColor);\n * _.memoize(calColor, (...args) => args[0]);\n * @param fn \n * @param resolver  key \n * @param maxSize lru \n */\nexport default function memoize<T extends Function>(fn: T, resolver?: (...args: any[]) => string, maxSize = 128) {\n  const memoized = function (...args) {\n    //  key resolver key\n    const key = resolver ? resolver.apply(this, args) : args[0];\n    if (!CacheMap.has(fn)) CacheMap.set(fn, flru(maxSize));\n    const cache = CacheMap.get(fn);\n\n    if (cache.has(key)) return cache.get(key);\n    const result = fn.apply(this, args);\n    cache.set(key, result);\n    return result;\n  };\n\n  return memoized as unknown as T;\n}\n", "import isArray from './is-array';\nimport isPlainObject from './is-plain-object';\n\nconst MAX_MIX_LEVEL = 5;\n\nfunction hasOwn(object, property) {\n  if ((Object as any).hasOwn) {\n    return (Object as any).hasOwn(object, property);\n  }\n  if (object == null) {\n    throw new TypeError('Cannot convert undefined or null to object');\n  }\n  return Object.prototype.hasOwnProperty.call(Object(object), property);\n}\n\nfunction _deepMix(dist, src, level?, maxLevel?) {\n  level = level || 0;\n  maxLevel = maxLevel || MAX_MIX_LEVEL;\n  for (const key in src) {\n    if (hasOwn(src, key)) {\n      const value = src[key];\n      if (value !== null && isPlainObject(value)) {\n        if (!isPlainObject(dist[key])) {\n          dist[key] = {};\n        }\n        if (level < maxLevel) {\n          _deepMix(dist[key], value, level + 1, maxLevel);\n        } else {\n          dist[key] = src[key];\n        }\n      } else if (isArray(value)) {\n        dist[key] = [];\n        dist[key] = dist[key].concat(value);\n      } else if (value !== undefined) {\n        dist[key] = value;\n      }\n    }\n  }\n}\n\n// todo \nconst deepMix = function (rst: any, ...args: any[]) {\n  for (let i = 0; i < args.length; i += 1) {\n    _deepMix(rst, args[i]);\n  }\n  return rst;\n};\n\nexport default deepMix;\n", "const toString = {}.toString;\n\nconst getType = function (value: any): string {\n  return toString\n    .call(value)\n    .replace(/^\\[object /, '')\n    .replace(/]$/, '');\n};\n\nexport default getType;\n", "const objectProto = Object.prototype;\n\nconst isPrototype = function (value: any): boolean {\n  const Ctor = value && value.constructor;\n  const proto = (typeof Ctor === 'function' && Ctor.prototype) || objectProto;\n  return value === proto;\n};\n\nexport default isPrototype;\n", "import isNil from './is-nil';\nimport isArrayLike from './is-array-like';\nimport getType from './get-type';\nimport isPrototype from './is-prototype';\n\nconst hasOwnProperty = Object.prototype.hasOwnProperty;\n\nfunction isEmpty(value: any): boolean {\n  /**\n   * isEmpty(null) => true\n   * isEmpty() => true\n   * isEmpty(true) => true\n   * isEmpty(1) => true\n   * isEmpty([1, 2, 3]) => false\n   * isEmpty('abc') => false\n   * isEmpty({ a: 1 }) => false\n   */\n  if (isNil(value)) {\n    return true;\n  }\n  if (isArrayLike(value)) {\n    return !value.length;\n  }\n  const type = getType(value);\n  if (type === 'Map' || type === 'Set') {\n    return !value.size;\n  }\n  if (isPrototype(value)) {\n    return !Object.keys(value).length;\n  }\n  for (const key in value) {\n    if (hasOwnProperty.call(value, key)) {\n      return false;\n    }\n  }\n  return true;\n}\n\nexport default isEmpty;\n", "import isObjectLike from './is-object-like';\nimport isArrayLike from './is-array-like';\nimport isString from './is-string';\n\nconst isEqual = (value: any, other: any): boolean => {\n  if (value === other) {\n    return true;\n  }\n  if (!value || !other) {\n    return false;\n  }\n  if (isString(value) || isString(other)) {\n    return false;\n  }\n  if (isArrayLike(value) || isArrayLike(other)) {\n    if (value.length !== other.length) {\n      return false;\n    }\n    let rst = true;\n    for (let i = 0; i < value.length; i++) {\n      rst = isEqual(value[i], other[i]);\n      if (!rst) {\n        break;\n      }\n    }\n    return rst;\n  }\n  if (isObjectLike(value) || isObjectLike(other)) {\n    const valueKeys = Object.keys(value);\n    const otherKeys = Object.keys(other);\n    if (valueKeys.length !== otherKeys.length) {\n      return false;\n    }\n    let rst = true;\n    for (let i = 0; i < valueKeys.length; i++) {\n      rst = isEqual(value[valueKeys[i]], other[valueKeys[i]]);\n      if (!rst) {\n        break;\n      }\n    }\n    return rst;\n  }\n  return false;\n};\n\nexport default isEqual;\n", "import isString from './is-string';\n/**\n * https://github.com/developit/dlv/blob/master/index.js\n * @param obj\n * @param key\n * @param defaultValue\n */\nexport default (obj: any, key: string | any[], defaultValue?: any): any => {\n  let p = 0;\n\n  const keyArr = isString(key) ? key.split('.') : key;\n\n  while (obj && p < keyArr.length) {\n    obj = obj[keyArr[p++]];\n  }\n\n  return obj === undefined || p < keyArr.length ? defaultValue : obj;\n};\n", "import isObject from './is-object';\nimport isString from './is-string';\nimport isNumber from './is-number';\n\n/**\n * https://github.com/developit/dlv/blob/master/index.js\n * @param obj\n * @param path\n * @param value\n */\nexport default (obj: any, path: string | any[], value: any): any => {\n  let o = obj;\n\n  const keyArr = isString(path) ? path.split('.') : path;\n\n  keyArr.forEach((key: string | number, idx: number) => {\n    // \n    if (idx < keyArr.length - 1) {\n      if (!isObject(o[key])) {\n        o[key] = isNumber(keyArr[idx + 1]) ? [] : {};\n      }\n      o = o[key];\n    } else {\n      o[key] = value;\n    }\n  });\n\n  return obj;\n};\n", "import isArray from './is-array';\nimport isObject from './is-object';\n\nfunction each(elements: any[] | object, func: (v: any, k: any) => any): void {\n  if (!elements) {\n    return;\n  }\n  let rst;\n  if (isArray(elements)) {\n    for (let i = 0, len = elements.length; i < len; i++) {\n      rst = func(elements[i], i);\n      if (rst === false) {\n        break;\n      }\n    }\n  } else if (isObject(elements)) {\n    for (const k in elements) {\n      if (elements.hasOwnProperty(k)) {\n        rst = func(elements[k], k);\n        if (rst === false) {\n          break;\n        }\n      }\n    }\n  }\n}\n\nexport default each;\n", "import each from './each';\nimport isPlainObject from './is-plain-object';\n\nconst hasOwnProperty = Object.prototype.hasOwnProperty;\n/**\n * Creates an object composed of the picked `object` properties.\n *\n * @param {Object} object The source object.\n * @param {...(string[])} [paths] The property paths to pick.\n * @returns {Object} Returns the new object.\n * @example\n *\n * var object = { 'a': 1, 'b': '2', 'c': 3 };\n * pick(object, ['a', 'c']);  // => { 'a': 1, 'c': 3 }\n */\n\nexport interface ObjectType<T> {\n  [key: string]: T;\n}\n\nexport default <T>(object: ObjectType<T>, keys: string[]): ObjectType<T> => {\n  if (object === null || !isPlainObject(object)) {\n    return {};\n  }\n  const result: ObjectType<T> = {};\n  each(keys, (key) => {\n    if (hasOwnProperty.call(object, key)) {\n      result[key] = object[key];\n    }\n  });\n  return result;\n};\n", "import each from './each';\nimport isArray from './is-array';\nimport isPlainObject from './is-plain-object';\nimport { ObjectType } from './types';\n\nconst reduce = function <T, G>(arr: G[] | ObjectType<T>, fn: (result: T, data: G, idx: string | number) => T, init: T) {\n  if (!isArray(arr) && !isPlainObject(arr)) {\n    return arr;\n  }\n  let result = init;\n  each(arr, (data, i) => {\n    result = fn(result, data, i);\n  });\n  return result;\n};\n\nexport default reduce;\n", "import reduce from './reduce';\nimport { ObjectType } from './types';\n\nexport default <T>(obj: ObjectType<T>, keys: string[]): ObjectType<T> => {\n  return reduce(\n    obj,\n    (r: ObjectType<T>, curr: T, key: string) => {\n      if (!keys.includes(key)) {\n        r[key] = curr;\n      }\n      return r;\n    },\n    {},\n  );\n};\n", "export interface OptionsType {\n  leading?: boolean;\n  trailing?: boolean;\n}\n\nexport default (func: Function, wait: number, options: OptionsType): Function => {\n  let timeout, context, args, result;\n  let previous = 0;\n  if (!options) options = {};\n\n  const later = function () {\n    previous = options.leading === false ? 0 : Date.now();\n    timeout = null;\n    result = func.apply(context, args);\n    if (!timeout) context = args = null;\n  };\n\n  const throttled = function () {\n    const now = Date.now();\n    if (!previous && options.leading === false) previous = now;\n    const remaining = wait - (now - previous);\n    context = this;\n    args = arguments;\n    if (remaining <= 0 || remaining > wait) {\n      if (timeout) {\n        clearTimeout(timeout);\n        timeout = null;\n      }\n      previous = now;\n      result = func.apply(context, args);\n      if (!timeout) context = args = null;\n    } else if (!timeout && options.trailing !== false) {\n      timeout = setTimeout(later, remaining);\n    }\n    return result;\n  };\n\n  throttled.cancel = function () {\n    clearTimeout(timeout);\n    previous = 0;\n    timeout = context = args = null;\n  };\n\n  return throttled;\n};\n", "const map = {};\n\nexport default (prefix?: string): string => {\n  prefix = prefix || 'g';\n  if (!map[prefix]) {\n    map[prefix] = 1;\n  } else {\n    map[prefix] += 1;\n  }\n  return prefix + map[prefix];\n};\n", "import isArrayLike from './is-array-like';\n\nconst contains = function (arr: any[], value: any): boolean {\n  if (!isArrayLike(arr)) {\n    return false;\n  }\n  return arr.indexOf(value) > -1;\n};\n\nexport default contains;\n", "import filter from './filter';\nimport contains from './contains';\n\n/**\n * Flattens `array` a single level deep.\n *\n * @param {Array} arr The array to inspect.\n * @param {Array} values The values to exclude.\n * @return {Array} Returns the new array of filtered values.\n * @example\n * difference([2, 1], [2, 3]);  // => [1]\n */\nconst difference = function <T>(arr: T[], values: T[] = []): T[] {\n  return filter(arr, (value: any) => !contains(values, value));\n};\n\nexport default difference;\n", "import each from './each';\nimport isFunction from './is-function';\n\nconst keys = Object.keys\n  ? (obj) => Object.keys(obj)\n  : (obj) => {\n      const result = [];\n      each(obj, (value, key) => {\n        if (!(isFunction(obj) && key === 'prototype')) {\n          result.push(key);\n        }\n      });\n      return result;\n    };\n\nexport default keys;\n", "import isNil from './is-nil';\nimport keys from './keys';\n\nfunction isMatch(obj: any, attrs: any): boolean {\n  const _keys = keys(attrs);\n  const length = _keys.length;\n  if (isNil(obj)) return !length;\n  for (let i = 0; i < length; i += 1) {\n    const key = _keys[i];\n    if (attrs[key] !== obj[key] || !(key in obj)) {\n      return false;\n    }\n  }\n  return true;\n}\n\nexport default isMatch;\n", "import isFunction from './is-function';\nimport isMatch from './is-match';\nimport isArray from './is-array';\nimport isPlainObject from './is-plain-object';\n\nfunction find<T>(arr: T[], predicate: Function): T;\nfunction find<T>(arr: T[], predicate: object): T;\n\nfunction find<T>(arr: T[], predicate: Function | object): T {\n  if (!isArray(arr)) return null;\n\n  let _predicate;\n  if (isFunction(predicate)) {\n    _predicate = predicate;\n  }\n  if (isPlainObject(predicate)) {\n    _predicate = (a) => isMatch(a, predicate);\n  }\n  if (_predicate) {\n    for (let i = 0; i < arr.length; i += 1) {\n      if (_predicate(arr[i])) {\n        return arr[i];\n      }\n    }\n  }\n  return null;\n}\n\nexport default find;\n", "import isArray from './is-array';\n\n/**\n * Flattens `array` a single level deep.\n *\n * @param {Array} arr The array to flatten.\n * @return {Array} Returns the new flattened array.\n * @example\n *\n * flatten([1, [2, [3, [4]], 5]]);  // => [1, 2, [3, [4]], 5]\n */\nconst flatten = function <T>(arr: T[]): T[] {\n  if (!isArray(arr)) {\n    return [];\n  }\n  let rst: T[] = [];\n  for (let i = 0; i < arr.length; i++) {\n    rst = rst.concat(arr[i]);\n  }\n  return rst;\n};\n\nexport default flatten;\n", "/**\n * \n * @param arr \n * @return \n */\nexport default function max(arr: number[]): number {\n  if (!Array.isArray(arr)) return -Infinity;\n  const length = arr.length;\n  if (!length) return -Infinity;\n  let max = arr[0];\n  for (let i = 1; i < length; i++) {\n    max = Math.max(max, arr[i]);\n  }\n  return max;\n}\n", "import each from './each';\nimport isArray from './is-array';\n\n/**\n * @param {Array} arr The array to iterate over.\n * @return {*} Returns the minimum value.\n * @example\n *\n * min([1, 2]);\n * // => 1\n *\n * min([]);\n * // => undefined\n *\n * const data = new Array(1250010).fill(1).map((d,idx) => idx);\n *\n * min(data);\n * // => 1250010\n * // Math.min(...data) will encounter \"Maximum call stack size exceeded\" error\n */\nexport default (arr: number[]): number | undefined => {\n  if (!isArray(arr)) {\n    return undefined;\n  }\n  return arr.reduce((prev, curr) => {\n    return Math.min(prev, curr);\n  }, arr[0]);\n};\n", "const arrPrototype = Array.prototype;\nconst splice = arrPrototype.splice;\nconst indexOf = arrPrototype.indexOf;\n\nconst pull = function <T>(arr: T[], ...values: any[]): T[] {\n  for (let i = 0; i < values.length; i++) {\n    const value = values[i];\n    let fromIndex = -1;\n    while ((fromIndex = indexOf.call(arr, value)) > -1) {\n      splice.call(arr, fromIndex, 1);\n    }\n  }\n  return arr;\n};\n\nexport default pull;\n", "import isArrayLike from './is-array-like';\n\nconst splice = Array.prototype.splice;\n\nconst pullAt = function pullAt<T>(arr: T[], indexes: number[]): T[] {\n  if (!isArrayLike(arr)) {\n    return [];\n  }\n  let length = arr ? indexes.length : 0;\n  const last = length - 1;\n\n  while (length--) {\n    let previous;\n    const index = indexes[length];\n    if (length === last || index !== previous) {\n      previous = index;\n      splice.call(arr, index, 1);\n    }\n  }\n  return arr;\n};\n\nexport default pullAt;\n", "export default function uniq(arr: any[], cache = new Map()) {\n  const r = [];\n\n  if (Array.isArray(arr)) {\n    for (let i = 0, len = arr.length; i < len; i++) {\n      const item = arr[i];\n      //  cache\n      if (!cache.has(item)) {\n        r.push(item);\n        cache.set(item, true);\n      }\n    }\n  }\n  return r;\n}\n", "import isArrayLike from './is-array-like';\n\nexport default function head(o: unknown) {\n  if (isArrayLike(o)) {\n    return (<ArrayLike<any>>o)[0];\n  }\n  return undefined;\n}\n", "import isArrayLike from './is-array-like';\n\nexport default function last(o: unknown) {\n  if (isArrayLike(o)) {\n    const arr = o as ArrayLike<any>;\n    return arr[arr.length - 1];\n  }\n  return undefined;\n}\n", "const PRECISION = 0.00001; // numbers less than this is considered as 0\n\n/**\n * \n * @return \n */\nexport default function isNumberEqual(a: number, b: number, precision: number = PRECISION): boolean {\n  return a === b || Math.abs(a - b) < precision;\n}\n", "import each from './each';\nimport isArray from './is-array';\nimport isFunction from './is-function';\n/**\n * @param {Array} arr The array to iterate over.\n * @param {Function} [fn] The iteratee invoked per element.\n * @return {*} Returns the maximum value.\n * @example\n *\n * var objects = [{ 'n': 1 }, { 'n': 2 }];\n *\n * maxBy(objects, function(o) { return o.n; });\n * // => { 'n': 2 }\n *\n * maxBy(objects, 'n');\n * // => { 'n': 2 }\n */\nexport default <T>(arr: T[], fn: ((v: T) => number) | string): T | undefined => {\n  if (!isArray(arr)) {\n    return undefined;\n  }\n\n  let maxItem;\n  let max = -Infinity;\n\n  for (let i = 0; i < arr.length; i++) {\n    const item = arr[i];\n    const v = isFunction(fn) ? fn(item) : item[fn];\n\n    if (v > max) {\n      maxItem = item;\n      max = v;\n    }\n  }\n\n  return maxItem;\n};\n", "import each from './each';\nimport isArray from './is-array';\nimport isFunction from './is-function';\n\n/**\n * @param {Array} arr The array to iterate over.\n * @param {Function} [fn] The iteratee invoked per element.\n * @return {*} Returns the minimum value.\n * @example\n *\n * var objects = [{ 'n': 1 }, { 'n': 2 }];\n *\n * minBy(objects, function(o) { return o.n; });\n * // => { 'n': 1 }\n *\n * minBy(objects, 'n');\n * // => { 'n': 1 }\n */\nexport default <T>(arr: T[], fn: ((v: T) => number) | string): T | undefined => {\n  if (!isArray(arr)) {\n    return undefined;\n  }\n\n  let minItem;\n  let min = Infinity;\n\n  for (let i = 0; i < arr.length; i++) {\n    const item = arr[i];\n    const v = isFunction(fn) ? fn(item) : item[fn];\n\n    if (v < min) {\n      minItem = item;\n      min = v;\n    }\n  }\n\n  return minItem;\n};\n", "const mod = function (n: number, m: number): number {\n  return ((n % m) + m) % m;\n};\n\nexport default mod;\n", "const DEGREE = 180 / Math.PI;\n\nconst toDegree = function (radian: number): number {\n  return DEGREE * radian;\n};\n\nexport default toDegree;\n", "const RADIAN = Math.PI / 180;\n\nconst toRadian = function (degree: number): number {\n  return RADIAN * degree;\n};\n\nexport default toRadian;\n", "export interface ObjectType<T> {\n  [key: string]: T;\n}\n\nfunction substitute<T>(str: string, o: ObjectType<T>) {\n  if (!str || !o) {\n    return str;\n  }\n  return str.replace(/\\\\?\\{([^{}]+)\\}/g, (match, name): any => {\n    if (match.charAt(0) === '\\\\') {\n      return match.slice(1);\n    }\n    return o[name] === undefined ? '' : o[name];\n  });\n}\n\nexport default substitute;\n", "/**\n *  null\n * @return  null\n */\nexport default function isNull(value: unknown): value is null {\n  return value === null;\n}\n", "/**\n *  HTML Element  Document\n * @return  HTML Element  Document\n */\nexport default function isElement(value: unknown): value is Element | Document {\n  return value instanceof Element || value instanceof Document;\n}\n", "// FIXME: Mutable param should be forbidden in static lang.\nfunction _mix<Base, Source>(dist: Base & Source, obj: Source): void {\n  for (const key in obj) {\n    if (obj.hasOwnProperty(key) && key !== 'constructor' && obj[key] !== undefined) {\n      (<any>dist)[key] = obj[key];\n    }\n  }\n}\n\nexport default function mix<Base, A, B, C>(dist: Base & A & B & C, src1?: A, src2?: B, src3?: C): Base & A & B & C {\n  if (src1) _mix(dist, src1);\n  if (src2) _mix(dist, src2);\n  if (src3) _mix(dist, src3);\n  return dist;\n}\n", "import isArray from './is-array';\n\nconst clone = function (obj) {\n  if (typeof obj !== 'object' || obj === null) {\n    return obj;\n  }\n  let rst;\n  if (isArray(obj)) {\n    rst = [];\n    for (let i = 0, l = obj.length; i < l; i++) {\n      if (typeof obj[i] === 'object' && obj[i] != null) {\n        rst[i] = clone(obj[i]);\n      } else {\n        rst[i] = obj[i];\n      }\n    }\n  } else {\n    rst = {};\n    for (const k in obj) {\n      if (typeof obj[k] === 'object' && obj[k] != null) {\n        rst[k] = clone(obj[k]);\n      } else {\n        rst[k] = obj[k];\n      }\n    }\n  }\n\n  return rst;\n};\n\nexport default clone;\n", "import isArrayLike from './is-array-like';\n\nconst indexOf = function <T>(arr: T[], obj: T): number {\n  if (!isArrayLike(arr)) {\n    return -1;\n  }\n  const m = Array.prototype.indexOf;\n  if (m) {\n    return m.call(arr, obj);\n  }\n  let index = -1;\n\n  for (let i = 0; i < arr.length; i++) {\n    if (arr[i] === obj) {\n      index = i;\n      break;\n    }\n  }\n  return index;\n};\n\nexport default indexOf;\n", "import isNil from './is-nil';\nimport isObject from './is-object';\n\nconst identity = <T>(v: T): T => v;\n\ninterface _Type<T> {\n  [key: string]: T;\n}\n\nexport default <T>(\n  object: { [key: string]: T },\n  func: (value: T, key: string) => any = identity,\n): { [key: string]: any } => {\n  const r: _Type<T> = {};\n  if (isObject(object) && !isNil(object)) {\n    Object.keys(object).forEach((key) => {\n      // @ts-ignore\n      r[key] = func(object[key], key);\n    });\n  }\n  return r;\n};\n", "export default () => {};\n", "export default <T>(v: T): T => v;\n", "import isNil from './is-nil';\nimport isArraylike from './is-array-like';\n\nexport default function size(o: unknown) {\n  if (isNil(o)) {\n    return 0;\n  }\n  if (isArraylike(o)) {\n    return (<ArrayLike<any>>o).length;\n  }\n  return Object.keys(<object>o).length;\n}\n", "/**\n * k-v \n */\nexport default class<T> {\n  map: { [key: string]: T } = {};\n\n  has(key: string): boolean {\n    return this.map[key] !== undefined;\n  }\n\n  get(key: string, def?: T): T | undefined {\n    const v = this.map[key];\n    return v === undefined ? def : v;\n  }\n\n  set(key: string, value: T): void {\n    this.map[key] = value;\n  }\n\n  clear() {\n    this.map = {};\n  }\n\n  delete(key: string) {\n    delete this.map[key];\n  }\n\n  size(): number {\n    return Object.keys(this.map).length;\n  }\n}\n", "/**\n * Create DOM from a html string.\n * @param str\n * @returns\n */\nexport function createDOM(str: string): HTMLElement {\n  const container = document.createElement('div');\n  container.innerHTML = str;\n\n  const dom = container.childNodes[0];\n  if (dom && container.contains(dom)) {\n    container.removeChild(dom);\n  }\n  return dom as HTMLElement;\n}\n", "/**\n *  0-255  16 \n * @param value\n * @returns\n */\nexport function toHex(value: number): string {\n  const x16Value = Math.round(value).toString(16);\n\n  return x16Value.length === 1 ? `0${x16Value}` : x16Value;\n}\n\n/**\n * \n * @param arr\n * @returns\n */\nexport function arr2rgb(arr: number[]): string {\n  return `#${toHex(arr[0])}${toHex(arr[1])}${toHex(arr[2])}`;\n}\n", "import { memoize } from '../lodash';\nimport { arr2rgb } from './arr2rgb';\n\nconst RGB_REG = /rgba?\\(([\\s.,0-9]+)\\)/;\n\n/**\n *  tag \n * @returns\n */\nfunction getTmp(): HTMLElement {\n  let i = document.getElementById('antv-web-colour-picker');\n  if (i) {\n    return i;\n  }\n  i = document.createElement('i');\n  i.id = 'antv-web-colour-picker';\n  i.title = 'Web Colour Picker';\n  i.style.display = 'none';\n  document.body.appendChild(i);\n  return i;\n}\n\n/**\n *  rgb \n * @param {color} color \n * @return  '#ffffff' \n */\nfunction toRGBString(color: string): string {\n  //  rgb\n  if (color[0] === '#' && color.length === 7) {\n    return color;\n  }\n\n  const iEl = getTmp();\n\n  iEl.style.color = color;\n\n  let rst = document.defaultView.getComputedStyle(iEl, '').getPropertyValue('color');\n  const matches = RGB_REG.exec(rst) as string[];\n  const cArray: number[] = matches[1].split(/\\s*,\\s*/).map((s) => Number(s));\n\n  rst = arr2rgb(cArray);\n\n  return rst;\n}\n\n/**\n * export with memoize.\n * @param color\n * @returns\n */\nexport const toRGB = memoize(toRGBString, (color) => color, 256);\n", "/**\n * Common utilities\n * @module glMatrix\n */\n\n// Configuration Constants\nexport var EPSILON = 0.000001;\nexport var ARRAY_TYPE = typeof Float32Array !== \"undefined\" ? Float32Array : Array;\nexport var RANDOM = Math.random;\nexport var ANGLE_ORDER = \"zyx\";\n\n/**\n * Symmetric round\n * see https://www.npmjs.com/package/round-half-up-symmetric#user-content-detailed-background\n *\n * @param {Number} a value to round\n */\nexport function round(a) {\n  if (a >= 0) return Math.round(a);\n  return a % 0.5 === 0 ? Math.floor(a) : Math.round(a);\n}\n\n/**\n * Sets the type of array used when creating new vectors and matrices\n *\n * @param {Float32ArrayConstructor | ArrayConstructor} type Array type, such as Float32Array or Array\n */\nexport function setMatrixArrayType(type) {\n  ARRAY_TYPE = type;\n}\nvar degree = Math.PI / 180;\nvar radian = 180 / Math.PI;\n\n/**\n * Convert Degree To Radian\n *\n * @param {Number} a Angle in Degrees\n */\nexport function toRadian(a) {\n  return a * degree;\n}\n\n/**\n * Convert Radian To Degree\n *\n * @param {Number} a Angle in Radians\n */\nexport function toDegree(a) {\n  return a * radian;\n}\n\n/**\n * Tests whether or not the arguments have approximately the same value, within an absolute\n * or relative tolerance of glMatrix.EPSILON (an absolute tolerance is used for values less\n * than or equal to 1.0, and a relative tolerance is used for larger values)\n *\n * @param {Number} a          The first number to test.\n * @param {Number} b          The second number to test.\n * @param {Number} tolerance  Absolute or relative tolerance (default glMatrix.EPSILON)\n * @returns {Boolean} True if the numbers are approximately equal, false otherwise.\n */\nexport function equals(a, b) {\n  var tolerance = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : EPSILON;\n  return Math.abs(a - b) <= tolerance * Math.max(1, Math.abs(a), Math.abs(b));\n}", "import * as glMatrix from \"./common.js\";\n\n/**\n * 3x3 Matrix\n * @module mat3\n */\n\n/**\n * Creates a new identity mat3\n *\n * @returns {mat3} a new 3x3 matrix\n */\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(9);\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[5] = 0;\n    out[6] = 0;\n    out[7] = 0;\n  }\n  out[0] = 1;\n  out[4] = 1;\n  out[8] = 1;\n  return out;\n}\n\n/**\n * Copies the upper-left 3x3 values into the given mat3.\n *\n * @param {mat3} out the receiving 3x3 matrix\n * @param {ReadonlyMat4} a   the source 4x4 matrix\n * @returns {mat3} out\n */\nexport function fromMat4(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[4];\n  out[4] = a[5];\n  out[5] = a[6];\n  out[6] = a[8];\n  out[7] = a[9];\n  out[8] = a[10];\n  return out;\n}\n\n/**\n * Creates a new mat3 initialized with values from an existing matrix\n *\n * @param {ReadonlyMat3} a matrix to clone\n * @returns {mat3} a new 3x3 matrix\n */\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(9);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n\n/**\n * Copy the values from one mat3 to another\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the source matrix\n * @returns {mat3} out\n */\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n\n/**\n * Create a new mat3 with the given values\n *\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m10 Component in column 1, row 0 position (index 3)\n * @param {Number} m11 Component in column 1, row 1 position (index 4)\n * @param {Number} m12 Component in column 1, row 2 position (index 5)\n * @param {Number} m20 Component in column 2, row 0 position (index 6)\n * @param {Number} m21 Component in column 2, row 1 position (index 7)\n * @param {Number} m22 Component in column 2, row 2 position (index 8)\n * @returns {mat3} A new mat3\n */\nexport function fromValues(m00, m01, m02, m10, m11, m12, m20, m21, m22) {\n  var out = new glMatrix.ARRAY_TYPE(9);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m10;\n  out[4] = m11;\n  out[5] = m12;\n  out[6] = m20;\n  out[7] = m21;\n  out[8] = m22;\n  return out;\n}\n\n/**\n * Set the components of a mat3 to the given values\n *\n * @param {mat3} out the receiving matrix\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m10 Component in column 1, row 0 position (index 3)\n * @param {Number} m11 Component in column 1, row 1 position (index 4)\n * @param {Number} m12 Component in column 1, row 2 position (index 5)\n * @param {Number} m20 Component in column 2, row 0 position (index 6)\n * @param {Number} m21 Component in column 2, row 1 position (index 7)\n * @param {Number} m22 Component in column 2, row 2 position (index 8)\n * @returns {mat3} out\n */\nexport function set(out, m00, m01, m02, m10, m11, m12, m20, m21, m22) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m10;\n  out[4] = m11;\n  out[5] = m12;\n  out[6] = m20;\n  out[7] = m21;\n  out[8] = m22;\n  return out;\n}\n\n/**\n * Set a mat3 to the identity matrix\n *\n * @param {mat3} out the receiving matrix\n * @returns {mat3} out\n */\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 1;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n\n/**\n * Transpose the values of a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the source matrix\n * @returns {mat3} out\n */\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n      a02 = a[2],\n      a12 = a[5];\n    out[1] = a[3];\n    out[2] = a[6];\n    out[3] = a01;\n    out[5] = a[7];\n    out[6] = a02;\n    out[7] = a12;\n  } else {\n    out[0] = a[0];\n    out[1] = a[3];\n    out[2] = a[6];\n    out[3] = a[1];\n    out[4] = a[4];\n    out[5] = a[7];\n    out[6] = a[2];\n    out[7] = a[5];\n    out[8] = a[8];\n  }\n  return out;\n}\n\n/**\n * Inverts a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the source matrix\n * @returns {mat3 | null} out, or null if source matrix is not invertible\n */\nexport function invert(out, a) {\n  var a00 = a[0],\n    a01 = a[1],\n    a02 = a[2];\n  var a10 = a[3],\n    a11 = a[4],\n    a12 = a[5];\n  var a20 = a[6],\n    a21 = a[7],\n    a22 = a[8];\n  var b01 = a22 * a11 - a12 * a21;\n  var b11 = -a22 * a10 + a12 * a20;\n  var b21 = a21 * a10 - a11 * a20;\n\n  // Calculate the determinant\n  var det = a00 * b01 + a01 * b11 + a02 * b21;\n  if (!det) {\n    return null;\n  }\n  det = 1.0 / det;\n  out[0] = b01 * det;\n  out[1] = (-a22 * a01 + a02 * a21) * det;\n  out[2] = (a12 * a01 - a02 * a11) * det;\n  out[3] = b11 * det;\n  out[4] = (a22 * a00 - a02 * a20) * det;\n  out[5] = (-a12 * a00 + a02 * a10) * det;\n  out[6] = b21 * det;\n  out[7] = (-a21 * a00 + a01 * a20) * det;\n  out[8] = (a11 * a00 - a01 * a10) * det;\n  return out;\n}\n\n/**\n * Calculates the adjugate of a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the source matrix\n * @returns {mat3} out\n */\nexport function adjoint(out, a) {\n  var a00 = a[0],\n    a01 = a[1],\n    a02 = a[2];\n  var a10 = a[3],\n    a11 = a[4],\n    a12 = a[5];\n  var a20 = a[6],\n    a21 = a[7],\n    a22 = a[8];\n  out[0] = a11 * a22 - a12 * a21;\n  out[1] = a02 * a21 - a01 * a22;\n  out[2] = a01 * a12 - a02 * a11;\n  out[3] = a12 * a20 - a10 * a22;\n  out[4] = a00 * a22 - a02 * a20;\n  out[5] = a02 * a10 - a00 * a12;\n  out[6] = a10 * a21 - a11 * a20;\n  out[7] = a01 * a20 - a00 * a21;\n  out[8] = a00 * a11 - a01 * a10;\n  return out;\n}\n\n/**\n * Calculates the determinant of a mat3\n *\n * @param {ReadonlyMat3} a the source matrix\n * @returns {Number} determinant of a\n */\nexport function determinant(a) {\n  var a00 = a[0],\n    a01 = a[1],\n    a02 = a[2];\n  var a10 = a[3],\n    a11 = a[4],\n    a12 = a[5];\n  var a20 = a[6],\n    a21 = a[7],\n    a22 = a[8];\n  return a00 * (a22 * a11 - a12 * a21) + a01 * (-a22 * a10 + a12 * a20) + a02 * (a21 * a10 - a11 * a20);\n}\n\n/**\n * Multiplies two mat3's\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the first operand\n * @param {ReadonlyMat3} b the second operand\n * @returns {mat3} out\n */\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n    a01 = a[1],\n    a02 = a[2];\n  var a10 = a[3],\n    a11 = a[4],\n    a12 = a[5];\n  var a20 = a[6],\n    a21 = a[7],\n    a22 = a[8];\n  var b00 = b[0],\n    b01 = b[1],\n    b02 = b[2];\n  var b10 = b[3],\n    b11 = b[4],\n    b12 = b[5];\n  var b20 = b[6],\n    b21 = b[7],\n    b22 = b[8];\n  out[0] = b00 * a00 + b01 * a10 + b02 * a20;\n  out[1] = b00 * a01 + b01 * a11 + b02 * a21;\n  out[2] = b00 * a02 + b01 * a12 + b02 * a22;\n  out[3] = b10 * a00 + b11 * a10 + b12 * a20;\n  out[4] = b10 * a01 + b11 * a11 + b12 * a21;\n  out[5] = b10 * a02 + b11 * a12 + b12 * a22;\n  out[6] = b20 * a00 + b21 * a10 + b22 * a20;\n  out[7] = b20 * a01 + b21 * a11 + b22 * a21;\n  out[8] = b20 * a02 + b21 * a12 + b22 * a22;\n  return out;\n}\n\n/**\n * Translate a mat3 by the given vector\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the matrix to translate\n * @param {ReadonlyVec2} v vector to translate by\n * @returns {mat3} out\n */\nexport function translate(out, a, v) {\n  var a00 = a[0],\n    a01 = a[1],\n    a02 = a[2],\n    a10 = a[3],\n    a11 = a[4],\n    a12 = a[5],\n    a20 = a[6],\n    a21 = a[7],\n    a22 = a[8],\n    x = v[0],\n    y = v[1];\n  out[0] = a00;\n  out[1] = a01;\n  out[2] = a02;\n  out[3] = a10;\n  out[4] = a11;\n  out[5] = a12;\n  out[6] = x * a00 + y * a10 + a20;\n  out[7] = x * a01 + y * a11 + a21;\n  out[8] = x * a02 + y * a12 + a22;\n  return out;\n}\n\n/**\n * Rotates a mat3 by the given angle\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat3} out\n */\nexport function rotate(out, a, rad) {\n  var a00 = a[0],\n    a01 = a[1],\n    a02 = a[2],\n    a10 = a[3],\n    a11 = a[4],\n    a12 = a[5],\n    a20 = a[6],\n    a21 = a[7],\n    a22 = a[8],\n    s = Math.sin(rad),\n    c = Math.cos(rad);\n  out[0] = c * a00 + s * a10;\n  out[1] = c * a01 + s * a11;\n  out[2] = c * a02 + s * a12;\n  out[3] = c * a10 - s * a00;\n  out[4] = c * a11 - s * a01;\n  out[5] = c * a12 - s * a02;\n  out[6] = a20;\n  out[7] = a21;\n  out[8] = a22;\n  return out;\n}\n\n/**\n * Scales the mat3 by the dimensions in the given vec2\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the matrix to scale\n * @param {ReadonlyVec2} v the vec2 to scale the matrix by\n * @returns {mat3} out\n **/\nexport function scale(out, a, v) {\n  var x = v[0],\n    y = v[1];\n  out[0] = x * a[0];\n  out[1] = x * a[1];\n  out[2] = x * a[2];\n  out[3] = y * a[3];\n  out[4] = y * a[4];\n  out[5] = y * a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n\n/**\n * Creates a matrix from a vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat3.identity(dest);\n *     mat3.translate(dest, dest, vec);\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {ReadonlyVec2} v Translation vector\n * @returns {mat3} out\n */\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 1;\n  out[5] = 0;\n  out[6] = v[0];\n  out[7] = v[1];\n  out[8] = 1;\n  return out;\n}\n\n/**\n * Creates a matrix from a given angle\n * This is equivalent to (but much faster than):\n *\n *     mat3.identity(dest);\n *     mat3.rotate(dest, dest, rad);\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat3} out\n */\nexport function fromRotation(out, rad) {\n  var s = Math.sin(rad),\n    c = Math.cos(rad);\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = -s;\n  out[4] = c;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n\n/**\n * Creates a matrix from a vector scaling\n * This is equivalent to (but much faster than):\n *\n *     mat3.identity(dest);\n *     mat3.scale(dest, dest, vec);\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {ReadonlyVec2} v Scaling vector\n * @returns {mat3} out\n */\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = v[1];\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n\n/**\n * Copies the values from a mat2d into a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat2d} a the matrix to copy\n * @returns {mat3} out\n **/\nexport function fromMat2d(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = 0;\n  out[3] = a[2];\n  out[4] = a[3];\n  out[5] = 0;\n  out[6] = a[4];\n  out[7] = a[5];\n  out[8] = 1;\n  return out;\n}\n\n/**\n * Calculates a 3x3 matrix from the given quaternion\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {ReadonlyQuat} q Quaternion to create matrix from\n *\n * @returns {mat3} out\n */\nexport function fromQuat(out, q) {\n  var x = q[0],\n    y = q[1],\n    z = q[2],\n    w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[3] = yx - wz;\n  out[6] = zx + wy;\n  out[1] = yx + wz;\n  out[4] = 1 - xx - zz;\n  out[7] = zy - wx;\n  out[2] = zx - wy;\n  out[5] = zy + wx;\n  out[8] = 1 - xx - yy;\n  return out;\n}\n\n/**\n * Calculates a 3x3 normal matrix (transpose inverse) from the 4x4 matrix\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {ReadonlyMat4} a Mat4 to derive the normal matrix from\n *\n * @returns {mat3} out\n */\nexport function normalFromMat4(out, a) {\n  var a00 = a[0],\n    a01 = a[1],\n    a02 = a[2],\n    a03 = a[3];\n  var a10 = a[4],\n    a11 = a[5],\n    a12 = a[6],\n    a13 = a[7];\n  var a20 = a[8],\n    a21 = a[9],\n    a22 = a[10],\n    a23 = a[11];\n  var a30 = a[12],\n    a31 = a[13],\n    a32 = a[14],\n    a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32;\n\n  // Calculate the determinant\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n  if (!det) {\n    return null;\n  }\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[2] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[3] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[4] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[5] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[6] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[7] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[8] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  return out;\n}\n\n/**\n * Generates a 2D projection matrix with the given bounds\n *\n * @param {mat3} out mat3 frustum matrix will be written into\n * @param {number} width Width of your gl context\n * @param {number} height Height of gl context\n * @returns {mat3} out\n */\nexport function projection(out, width, height) {\n  out[0] = 2 / width;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -2 / height;\n  out[5] = 0;\n  out[6] = -1;\n  out[7] = 1;\n  out[8] = 1;\n  return out;\n}\n\n/**\n * Returns a string representation of a mat3\n *\n * @param {ReadonlyMat3} a matrix to represent as a string\n * @returns {String} string representation of the matrix\n */\nexport function str(a) {\n  return \"mat3(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" + a[4] + \", \" + a[5] + \", \" + a[6] + \", \" + a[7] + \", \" + a[8] + \")\";\n}\n\n/**\n * Returns Frobenius norm of a mat3\n *\n * @param {ReadonlyMat3} a the matrix to calculate Frobenius norm of\n * @returns {Number} Frobenius norm\n */\nexport function frob(a) {\n  return Math.sqrt(a[0] * a[0] + a[1] * a[1] + a[2] * a[2] + a[3] * a[3] + a[4] * a[4] + a[5] * a[5] + a[6] * a[6] + a[7] * a[7] + a[8] * a[8]);\n}\n\n/**\n * Adds two mat3's\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the first operand\n * @param {ReadonlyMat3} b the second operand\n * @returns {mat3} out\n */\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  return out;\n}\n\n/**\n * Subtracts matrix b from matrix a\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the first operand\n * @param {ReadonlyMat3} b the second operand\n * @returns {mat3} out\n */\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  return out;\n}\n\n/**\n * Multiply each element of the matrix by a scalar.\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the matrix to scale\n * @param {Number} b amount to scale the matrix's elements by\n * @returns {mat3} out\n */\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  return out;\n}\n\n/**\n * Adds two mat3's after multiplying each element of the second operand by a scalar value.\n *\n * @param {mat3} out the receiving vector\n * @param {ReadonlyMat3} a the first operand\n * @param {ReadonlyMat3} b the second operand\n * @param {Number} scale the amount to scale b's elements by before adding\n * @returns {mat3} out\n */\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  return out;\n}\n\n/**\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyMat3} a The first matrix.\n * @param {ReadonlyMat3} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8];\n}\n\n/**\n * Returns whether or not the matrices have approximately the same elements in the same position.\n *\n * @param {ReadonlyMat3} a The first matrix.\n * @param {ReadonlyMat3} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\nexport function equals(a, b) {\n  var a0 = a[0],\n    a1 = a[1],\n    a2 = a[2],\n    a3 = a[3],\n    a4 = a[4],\n    a5 = a[5],\n    a6 = a[6],\n    a7 = a[7],\n    a8 = a[8];\n  var b0 = b[0],\n    b1 = b[1],\n    b2 = b[2],\n    b3 = b[3],\n    b4 = b[4],\n    b5 = b[5],\n    b6 = b[6],\n    b7 = b[7],\n    b8 = b[8];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8));\n}\n\n/**\n * Alias for {@link mat3.multiply}\n * @function\n */\nexport var mul = multiply;\n\n/**\n * Alias for {@link mat3.subtract}\n * @function\n */\nexport var sub = subtract;", "import * as glMatrix from \"./common.js\";\n\n/**\n * 4x4 Matrix<br>Format: column-major, when typed out it looks like row-major<br>The matrices are being post multiplied.\n * @module mat4\n */\n\n/**\n * Creates a new identity mat4\n *\n * @returns {mat4} a new 4x4 matrix\n */\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n  }\n  out[0] = 1;\n  out[5] = 1;\n  out[10] = 1;\n  out[15] = 1;\n  return out;\n}\n\n/**\n * Creates a new mat4 initialized with values from an existing matrix\n *\n * @param {ReadonlyMat4} a matrix to clone\n * @returns {mat4} a new 4x4 matrix\n */\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n\n/**\n * Copy the values from one mat4 to another\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n\n/**\n * Create a new mat4 with the given values\n *\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\n * @returns {mat4} A new mat4\n */\nexport function fromValues(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n\n/**\n * Set the components of a mat4 to the given values\n *\n * @param {mat4} out the receiving matrix\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\n * @returns {mat4} out\n */\nexport function set(out, m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n\n/**\n * Set a mat4 to the identity matrix\n *\n * @param {mat4} out the receiving matrix\n * @returns {mat4} out\n */\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n\n/**\n * Transpose the values of a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n    var a12 = a[6],\n      a13 = a[7];\n    var a23 = a[11];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a01;\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a02;\n    out[9] = a12;\n    out[11] = a[14];\n    out[12] = a03;\n    out[13] = a13;\n    out[14] = a23;\n  } else {\n    out[0] = a[0];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a[1];\n    out[5] = a[5];\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a[2];\n    out[9] = a[6];\n    out[10] = a[10];\n    out[11] = a[14];\n    out[12] = a[3];\n    out[13] = a[7];\n    out[14] = a[11];\n    out[15] = a[15];\n  }\n  return out;\n}\n\n/**\n * Inverts a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4 | null} out, or null if source matrix is not invertible\n */\nexport function invert(out, a) {\n  var a00 = a[0],\n    a01 = a[1],\n    a02 = a[2],\n    a03 = a[3];\n  var a10 = a[4],\n    a11 = a[5],\n    a12 = a[6],\n    a13 = a[7];\n  var a20 = a[8],\n    a21 = a[9],\n    a22 = a[10],\n    a23 = a[11];\n  var a30 = a[12],\n    a31 = a[13],\n    a32 = a[14],\n    a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32;\n\n  // Calculate the determinant\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n  if (!det) {\n    return null;\n  }\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n  out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n  out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n  out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n  out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n  out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n  out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n  return out;\n}\n\n/**\n * Calculates the adjugate of a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\nexport function adjoint(out, a) {\n  var a00 = a[0],\n    a01 = a[1],\n    a02 = a[2],\n    a03 = a[3];\n  var a10 = a[4],\n    a11 = a[5],\n    a12 = a[6],\n    a13 = a[7];\n  var a20 = a[8],\n    a21 = a[9],\n    a22 = a[10],\n    a23 = a[11];\n  var a30 = a[12],\n    a31 = a[13],\n    a32 = a[14],\n    a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32;\n  out[0] = a11 * b11 - a12 * b10 + a13 * b09;\n  out[1] = a02 * b10 - a01 * b11 - a03 * b09;\n  out[2] = a31 * b05 - a32 * b04 + a33 * b03;\n  out[3] = a22 * b04 - a21 * b05 - a23 * b03;\n  out[4] = a12 * b08 - a10 * b11 - a13 * b07;\n  out[5] = a00 * b11 - a02 * b08 + a03 * b07;\n  out[6] = a32 * b02 - a30 * b05 - a33 * b01;\n  out[7] = a20 * b05 - a22 * b02 + a23 * b01;\n  out[8] = a10 * b10 - a11 * b08 + a13 * b06;\n  out[9] = a01 * b08 - a00 * b10 - a03 * b06;\n  out[10] = a30 * b04 - a31 * b02 + a33 * b00;\n  out[11] = a21 * b02 - a20 * b04 - a23 * b00;\n  out[12] = a11 * b07 - a10 * b09 - a12 * b06;\n  out[13] = a00 * b09 - a01 * b07 + a02 * b06;\n  out[14] = a31 * b01 - a30 * b03 - a32 * b00;\n  out[15] = a20 * b03 - a21 * b01 + a22 * b00;\n  return out;\n}\n\n/**\n * Calculates the determinant of a mat4\n *\n * @param {ReadonlyMat4} a the source matrix\n * @returns {Number} determinant of a\n */\nexport function determinant(a) {\n  var a00 = a[0],\n    a01 = a[1],\n    a02 = a[2],\n    a03 = a[3];\n  var a10 = a[4],\n    a11 = a[5],\n    a12 = a[6],\n    a13 = a[7];\n  var a20 = a[8],\n    a21 = a[9],\n    a22 = a[10],\n    a23 = a[11];\n  var a30 = a[12],\n    a31 = a[13],\n    a32 = a[14],\n    a33 = a[15];\n  var b0 = a00 * a11 - a01 * a10;\n  var b1 = a00 * a12 - a02 * a10;\n  var b2 = a01 * a12 - a02 * a11;\n  var b3 = a20 * a31 - a21 * a30;\n  var b4 = a20 * a32 - a22 * a30;\n  var b5 = a21 * a32 - a22 * a31;\n  var b6 = a00 * b5 - a01 * b4 + a02 * b3;\n  var b7 = a10 * b5 - a11 * b4 + a12 * b3;\n  var b8 = a20 * b2 - a21 * b1 + a22 * b0;\n  var b9 = a30 * b2 - a31 * b1 + a32 * b0;\n\n  // Calculate the determinant\n  return a13 * b6 - a03 * b7 + a33 * b8 - a23 * b9;\n}\n\n/**\n * Multiplies two mat4s\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n    a01 = a[1],\n    a02 = a[2],\n    a03 = a[3];\n  var a10 = a[4],\n    a11 = a[5],\n    a12 = a[6],\n    a13 = a[7];\n  var a20 = a[8],\n    a21 = a[9],\n    a22 = a[10],\n    a23 = a[11];\n  var a30 = a[12],\n    a31 = a[13],\n    a32 = a[14],\n    a33 = a[15];\n\n  // Cache only the current line of the second matrix\n  var b0 = b[0],\n    b1 = b[1],\n    b2 = b[2],\n    b3 = b[3];\n  out[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[4];\n  b1 = b[5];\n  b2 = b[6];\n  b3 = b[7];\n  out[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[8];\n  b1 = b[9];\n  b2 = b[10];\n  b3 = b[11];\n  out[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[12];\n  b1 = b[13];\n  b2 = b[14];\n  b3 = b[15];\n  out[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  return out;\n}\n\n/**\n * Translate a mat4 by the given vector\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to translate\n * @param {ReadonlyVec3} v vector to translate by\n * @returns {mat4} out\n */\nexport function translate(out, a, v) {\n  var x = v[0],\n    y = v[1],\n    z = v[2];\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n  if (a === out) {\n    out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n    out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n    out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n    out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n  } else {\n    a00 = a[0];\n    a01 = a[1];\n    a02 = a[2];\n    a03 = a[3];\n    a10 = a[4];\n    a11 = a[5];\n    a12 = a[6];\n    a13 = a[7];\n    a20 = a[8];\n    a21 = a[9];\n    a22 = a[10];\n    a23 = a[11];\n    out[0] = a00;\n    out[1] = a01;\n    out[2] = a02;\n    out[3] = a03;\n    out[4] = a10;\n    out[5] = a11;\n    out[6] = a12;\n    out[7] = a13;\n    out[8] = a20;\n    out[9] = a21;\n    out[10] = a22;\n    out[11] = a23;\n    out[12] = a00 * x + a10 * y + a20 * z + a[12];\n    out[13] = a01 * x + a11 * y + a21 * z + a[13];\n    out[14] = a02 * x + a12 * y + a22 * z + a[14];\n    out[15] = a03 * x + a13 * y + a23 * z + a[15];\n  }\n  return out;\n}\n\n/**\n * Scales the mat4 by the dimensions in the given vec3 not using vectorization\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to scale\n * @param {ReadonlyVec3} v the vec3 to scale the matrix by\n * @returns {mat4} out\n **/\nexport function scale(out, a, v) {\n  var x = v[0],\n    y = v[1],\n    z = v[2];\n  out[0] = a[0] * x;\n  out[1] = a[1] * x;\n  out[2] = a[2] * x;\n  out[3] = a[3] * x;\n  out[4] = a[4] * y;\n  out[5] = a[5] * y;\n  out[6] = a[6] * y;\n  out[7] = a[7] * y;\n  out[8] = a[8] * z;\n  out[9] = a[9] * z;\n  out[10] = a[10] * z;\n  out[11] = a[11] * z;\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n\n/**\n * Rotates a mat4 by the given angle around the given axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @param {ReadonlyVec3} axis the axis to rotate around\n * @returns {mat4} out\n */\nexport function rotate(out, a, rad, axis) {\n  var x = axis[0],\n    y = axis[1],\n    z = axis[2];\n  var len = Math.sqrt(x * x + y * y + z * z);\n  var s, c, t;\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n  var b00, b01, b02;\n  var b10, b11, b12;\n  var b20, b21, b22;\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c;\n  a00 = a[0];\n  a01 = a[1];\n  a02 = a[2];\n  a03 = a[3];\n  a10 = a[4];\n  a11 = a[5];\n  a12 = a[6];\n  a13 = a[7];\n  a20 = a[8];\n  a21 = a[9];\n  a22 = a[10];\n  a23 = a[11];\n\n  // Construct the elements of the rotation matrix\n  b00 = x * x * t + c;\n  b01 = y * x * t + z * s;\n  b02 = z * x * t - y * s;\n  b10 = x * y * t - z * s;\n  b11 = y * y * t + c;\n  b12 = z * y * t + x * s;\n  b20 = x * z * t + y * s;\n  b21 = y * z * t - x * s;\n  b22 = z * z * t + c;\n\n  // Perform rotation-specific matrix multiplication\n  out[0] = a00 * b00 + a10 * b01 + a20 * b02;\n  out[1] = a01 * b00 + a11 * b01 + a21 * b02;\n  out[2] = a02 * b00 + a12 * b01 + a22 * b02;\n  out[3] = a03 * b00 + a13 * b01 + a23 * b02;\n  out[4] = a00 * b10 + a10 * b11 + a20 * b12;\n  out[5] = a01 * b10 + a11 * b11 + a21 * b12;\n  out[6] = a02 * b10 + a12 * b11 + a22 * b12;\n  out[7] = a03 * b10 + a13 * b11 + a23 * b12;\n  out[8] = a00 * b20 + a10 * b21 + a20 * b22;\n  out[9] = a01 * b20 + a11 * b21 + a21 * b22;\n  out[10] = a02 * b20 + a12 * b21 + a22 * b22;\n  out[11] = a03 * b20 + a13 * b21 + a23 * b22;\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  }\n  return out;\n}\n\n/**\n * Rotates a matrix by the given angle around the X axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\nexport function rotateX(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  }\n\n  // Perform axis-specific matrix multiplication\n  out[4] = a10 * c + a20 * s;\n  out[5] = a11 * c + a21 * s;\n  out[6] = a12 * c + a22 * s;\n  out[7] = a13 * c + a23 * s;\n  out[8] = a20 * c - a10 * s;\n  out[9] = a21 * c - a11 * s;\n  out[10] = a22 * c - a12 * s;\n  out[11] = a23 * c - a13 * s;\n  return out;\n}\n\n/**\n * Rotates a matrix by the given angle around the Y axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\nexport function rotateY(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  }\n\n  // Perform axis-specific matrix multiplication\n  out[0] = a00 * c - a20 * s;\n  out[1] = a01 * c - a21 * s;\n  out[2] = a02 * c - a22 * s;\n  out[3] = a03 * c - a23 * s;\n  out[8] = a00 * s + a20 * c;\n  out[9] = a01 * s + a21 * c;\n  out[10] = a02 * s + a22 * c;\n  out[11] = a03 * s + a23 * c;\n  return out;\n}\n\n/**\n * Rotates a matrix by the given angle around the Z axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\nexport function rotateZ(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  }\n\n  // Perform axis-specific matrix multiplication\n  out[0] = a00 * c + a10 * s;\n  out[1] = a01 * c + a11 * s;\n  out[2] = a02 * c + a12 * s;\n  out[3] = a03 * c + a13 * s;\n  out[4] = a10 * c - a00 * s;\n  out[5] = a11 * c - a01 * s;\n  out[6] = a12 * c - a02 * s;\n  out[7] = a13 * c - a03 * s;\n  return out;\n}\n\n/**\n * Creates a matrix from a vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, dest, vec);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyVec3} v Translation vector\n * @returns {mat4} out\n */\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n\n/**\n * Creates a matrix from a vector scaling\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.scale(dest, dest, vec);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyVec3} v Scaling vector\n * @returns {mat4} out\n */\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = v[1];\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = v[2];\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n\n/**\n * Creates a matrix from a given angle around a given axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotate(dest, dest, rad, axis);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @param {ReadonlyVec3} axis the axis to rotate around\n * @returns {mat4} out\n */\nexport function fromRotation(out, rad, axis) {\n  var x = axis[0],\n    y = axis[1],\n    z = axis[2];\n  var len = Math.sqrt(x * x + y * y + z * z);\n  var s, c, t;\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c;\n\n  // Perform rotation-specific matrix multiplication\n  out[0] = x * x * t + c;\n  out[1] = y * x * t + z * s;\n  out[2] = z * x * t - y * s;\n  out[3] = 0;\n  out[4] = x * y * t - z * s;\n  out[5] = y * y * t + c;\n  out[6] = z * y * t + x * s;\n  out[7] = 0;\n  out[8] = x * z * t + y * s;\n  out[9] = y * z * t - x * s;\n  out[10] = z * z * t + c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n\n/**\n * Creates a matrix from the given angle around the X axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateX(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\nexport function fromXRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n\n  // Perform axis-specific matrix multiplication\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = c;\n  out[6] = s;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = -s;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n\n/**\n * Creates a matrix from the given angle around the Y axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateY(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\nexport function fromYRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n\n  // Perform axis-specific matrix multiplication\n  out[0] = c;\n  out[1] = 0;\n  out[2] = -s;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = s;\n  out[9] = 0;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n\n/**\n * Creates a matrix from the given angle around the Z axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateZ(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\nexport function fromZRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n\n  // Perform axis-specific matrix multiplication\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -s;\n  out[5] = c;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n\n/**\n * Creates a matrix from a quaternion rotation and vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, dest, vec);\n *     let quatMat = mat4.create();\n *     mat4.fromQuat(quatMat, quat);\n *     mat4.multiply(dest, dest, quatMat);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @returns {mat4} out\n */\nexport function fromRotationTranslation(out, q, v) {\n  // Quaternion math\n  var x = q[0],\n    y = q[1],\n    z = q[2],\n    w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - (yy + zz);\n  out[1] = xy + wz;\n  out[2] = xz - wy;\n  out[3] = 0;\n  out[4] = xy - wz;\n  out[5] = 1 - (xx + zz);\n  out[6] = yz + wx;\n  out[7] = 0;\n  out[8] = xz + wy;\n  out[9] = yz - wx;\n  out[10] = 1 - (xx + yy);\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n\n/**\n * Creates a new mat4 from a dual quat.\n *\n * @param {mat4} out Matrix\n * @param {ReadonlyQuat2} a Dual Quaternion\n * @returns {mat4} mat4 receiving operation result\n */\nexport function fromQuat2(out, a) {\n  var translation = new glMatrix.ARRAY_TYPE(3);\n  var bx = -a[0],\n    by = -a[1],\n    bz = -a[2],\n    bw = a[3],\n    ax = a[4],\n    ay = a[5],\n    az = a[6],\n    aw = a[7];\n  var magnitude = bx * bx + by * by + bz * bz + bw * bw;\n  //Only scale if it makes sense\n  if (magnitude > 0) {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2 / magnitude;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2 / magnitude;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2 / magnitude;\n  } else {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;\n  }\n  fromRotationTranslation(out, a, translation);\n  return out;\n}\n\n/**\n * Returns the translation vector component of a transformation\n *  matrix. If a matrix is built with fromRotationTranslation,\n *  the returned vector will be the same as the translation vector\n *  originally supplied.\n * @param  {vec3} out Vector to receive translation component\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {vec3} out\n */\nexport function getTranslation(out, mat) {\n  out[0] = mat[12];\n  out[1] = mat[13];\n  out[2] = mat[14];\n  return out;\n}\n\n/**\n * Returns the scaling factor component of a transformation\n *  matrix. If a matrix is built with fromRotationTranslationScale\n *  with a normalized Quaternion parameter, the returned vector will be\n *  the same as the scaling vector\n *  originally supplied.\n * @param  {vec3} out Vector to receive scaling factor component\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {vec3} out\n */\nexport function getScaling(out, mat) {\n  var m11 = mat[0];\n  var m12 = mat[1];\n  var m13 = mat[2];\n  var m21 = mat[4];\n  var m22 = mat[5];\n  var m23 = mat[6];\n  var m31 = mat[8];\n  var m32 = mat[9];\n  var m33 = mat[10];\n  out[0] = Math.sqrt(m11 * m11 + m12 * m12 + m13 * m13);\n  out[1] = Math.sqrt(m21 * m21 + m22 * m22 + m23 * m23);\n  out[2] = Math.sqrt(m31 * m31 + m32 * m32 + m33 * m33);\n  return out;\n}\n\n/**\n * Returns a quaternion representing the rotational component\n *  of a transformation matrix. If a matrix is built with\n *  fromRotationTranslation, the returned quaternion will be the\n *  same as the quaternion originally supplied.\n * @param {quat} out Quaternion to receive the rotation component\n * @param {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {quat} out\n */\nexport function getRotation(out, mat) {\n  var scaling = new glMatrix.ARRAY_TYPE(3);\n  getScaling(scaling, mat);\n  var is1 = 1 / scaling[0];\n  var is2 = 1 / scaling[1];\n  var is3 = 1 / scaling[2];\n  var sm11 = mat[0] * is1;\n  var sm12 = mat[1] * is2;\n  var sm13 = mat[2] * is3;\n  var sm21 = mat[4] * is1;\n  var sm22 = mat[5] * is2;\n  var sm23 = mat[6] * is3;\n  var sm31 = mat[8] * is1;\n  var sm32 = mat[9] * is2;\n  var sm33 = mat[10] * is3;\n  var trace = sm11 + sm22 + sm33;\n  var S = 0;\n  if (trace > 0) {\n    S = Math.sqrt(trace + 1.0) * 2;\n    out[3] = 0.25 * S;\n    out[0] = (sm23 - sm32) / S;\n    out[1] = (sm31 - sm13) / S;\n    out[2] = (sm12 - sm21) / S;\n  } else if (sm11 > sm22 && sm11 > sm33) {\n    S = Math.sqrt(1.0 + sm11 - sm22 - sm33) * 2;\n    out[3] = (sm23 - sm32) / S;\n    out[0] = 0.25 * S;\n    out[1] = (sm12 + sm21) / S;\n    out[2] = (sm31 + sm13) / S;\n  } else if (sm22 > sm33) {\n    S = Math.sqrt(1.0 + sm22 - sm11 - sm33) * 2;\n    out[3] = (sm31 - sm13) / S;\n    out[0] = (sm12 + sm21) / S;\n    out[1] = 0.25 * S;\n    out[2] = (sm23 + sm32) / S;\n  } else {\n    S = Math.sqrt(1.0 + sm33 - sm11 - sm22) * 2;\n    out[3] = (sm12 - sm21) / S;\n    out[0] = (sm31 + sm13) / S;\n    out[1] = (sm23 + sm32) / S;\n    out[2] = 0.25 * S;\n  }\n  return out;\n}\n\n/**\n * Decomposes a transformation matrix into its rotation, translation\n * and scale components. Returns only the rotation component\n * @param  {quat} out_r Quaternion to receive the rotation component\n * @param  {vec3} out_t Vector to receive the translation vector\n * @param  {vec3} out_s Vector to receive the scaling factor\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @returns {quat} out_r\n */\nexport function decompose(out_r, out_t, out_s, mat) {\n  out_t[0] = mat[12];\n  out_t[1] = mat[13];\n  out_t[2] = mat[14];\n  var m11 = mat[0];\n  var m12 = mat[1];\n  var m13 = mat[2];\n  var m21 = mat[4];\n  var m22 = mat[5];\n  var m23 = mat[6];\n  var m31 = mat[8];\n  var m32 = mat[9];\n  var m33 = mat[10];\n  out_s[0] = Math.sqrt(m11 * m11 + m12 * m12 + m13 * m13);\n  out_s[1] = Math.sqrt(m21 * m21 + m22 * m22 + m23 * m23);\n  out_s[2] = Math.sqrt(m31 * m31 + m32 * m32 + m33 * m33);\n  var is1 = 1 / out_s[0];\n  var is2 = 1 / out_s[1];\n  var is3 = 1 / out_s[2];\n  var sm11 = m11 * is1;\n  var sm12 = m12 * is2;\n  var sm13 = m13 * is3;\n  var sm21 = m21 * is1;\n  var sm22 = m22 * is2;\n  var sm23 = m23 * is3;\n  var sm31 = m31 * is1;\n  var sm32 = m32 * is2;\n  var sm33 = m33 * is3;\n  var trace = sm11 + sm22 + sm33;\n  var S = 0;\n  if (trace > 0) {\n    S = Math.sqrt(trace + 1.0) * 2;\n    out_r[3] = 0.25 * S;\n    out_r[0] = (sm23 - sm32) / S;\n    out_r[1] = (sm31 - sm13) / S;\n    out_r[2] = (sm12 - sm21) / S;\n  } else if (sm11 > sm22 && sm11 > sm33) {\n    S = Math.sqrt(1.0 + sm11 - sm22 - sm33) * 2;\n    out_r[3] = (sm23 - sm32) / S;\n    out_r[0] = 0.25 * S;\n    out_r[1] = (sm12 + sm21) / S;\n    out_r[2] = (sm31 + sm13) / S;\n  } else if (sm22 > sm33) {\n    S = Math.sqrt(1.0 + sm22 - sm11 - sm33) * 2;\n    out_r[3] = (sm31 - sm13) / S;\n    out_r[0] = (sm12 + sm21) / S;\n    out_r[1] = 0.25 * S;\n    out_r[2] = (sm23 + sm32) / S;\n  } else {\n    S = Math.sqrt(1.0 + sm33 - sm11 - sm22) * 2;\n    out_r[3] = (sm12 - sm21) / S;\n    out_r[0] = (sm31 + sm13) / S;\n    out_r[1] = (sm23 + sm32) / S;\n    out_r[2] = 0.25 * S;\n  }\n  return out_r;\n}\n\n/**\n * Creates a matrix from a quaternion rotation, vector translation and vector scale\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, dest, vec);\n *     let quatMat = mat4.create();\n *     mat4.fromQuat(quatMat, quat);\n *     mat4.multiply(dest, dest, quatMat);\n *     mat4.scale(dest, dest, scale)\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @param {ReadonlyVec3} s Scaling vector\n * @returns {mat4} out\n */\nexport function fromRotationTranslationScale(out, q, v, s) {\n  // Quaternion math\n  var x = q[0],\n    y = q[1],\n    z = q[2],\n    w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  out[0] = (1 - (yy + zz)) * sx;\n  out[1] = (xy + wz) * sx;\n  out[2] = (xz - wy) * sx;\n  out[3] = 0;\n  out[4] = (xy - wz) * sy;\n  out[5] = (1 - (xx + zz)) * sy;\n  out[6] = (yz + wx) * sy;\n  out[7] = 0;\n  out[8] = (xz + wy) * sz;\n  out[9] = (yz - wx) * sz;\n  out[10] = (1 - (xx + yy)) * sz;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n\n/**\n * Creates a matrix from a quaternion rotation, vector translation and vector scale, rotating and scaling around the given origin\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, dest, vec);\n *     mat4.translate(dest, dest, origin);\n *     let quatMat = mat4.create();\n *     mat4.fromQuat(quatMat, quat);\n *     mat4.multiply(dest, dest, quatMat);\n *     mat4.scale(dest, dest, scale)\n *     mat4.translate(dest, dest, negativeOrigin);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @param {ReadonlyVec3} s Scaling vector\n * @param {ReadonlyVec3} o The origin vector around which to scale and rotate\n * @returns {mat4} out\n */\nexport function fromRotationTranslationScaleOrigin(out, q, v, s, o) {\n  // Quaternion math\n  var x = q[0],\n    y = q[1],\n    z = q[2],\n    w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  var ox = o[0];\n  var oy = o[1];\n  var oz = o[2];\n  var out0 = (1 - (yy + zz)) * sx;\n  var out1 = (xy + wz) * sx;\n  var out2 = (xz - wy) * sx;\n  var out4 = (xy - wz) * sy;\n  var out5 = (1 - (xx + zz)) * sy;\n  var out6 = (yz + wx) * sy;\n  var out8 = (xz + wy) * sz;\n  var out9 = (yz - wx) * sz;\n  var out10 = (1 - (xx + yy)) * sz;\n  out[0] = out0;\n  out[1] = out1;\n  out[2] = out2;\n  out[3] = 0;\n  out[4] = out4;\n  out[5] = out5;\n  out[6] = out6;\n  out[7] = 0;\n  out[8] = out8;\n  out[9] = out9;\n  out[10] = out10;\n  out[11] = 0;\n  out[12] = v[0] + ox - (out0 * ox + out4 * oy + out8 * oz);\n  out[13] = v[1] + oy - (out1 * ox + out5 * oy + out9 * oz);\n  out[14] = v[2] + oz - (out2 * ox + out6 * oy + out10 * oz);\n  out[15] = 1;\n  return out;\n}\n\n/**\n * Calculates a 4x4 matrix from the given quaternion\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyQuat} q Quaternion to create matrix from\n *\n * @returns {mat4} out\n */\nexport function fromQuat(out, q) {\n  var x = q[0],\n    y = q[1],\n    z = q[2],\n    w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[1] = yx + wz;\n  out[2] = zx - wy;\n  out[3] = 0;\n  out[4] = yx - wz;\n  out[5] = 1 - xx - zz;\n  out[6] = zy + wx;\n  out[7] = 0;\n  out[8] = zx + wy;\n  out[9] = zy - wx;\n  out[10] = 1 - xx - yy;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n\n/**\n * Generates a frustum matrix with the given bounds\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {Number} left Left bound of the frustum\n * @param {Number} right Right bound of the frustum\n * @param {Number} bottom Bottom bound of the frustum\n * @param {Number} top Top bound of the frustum\n * @param {Number} near Near bound of the frustum\n * @param {Number} far Far bound of the frustum\n * @returns {mat4} out\n */\nexport function frustum(out, left, right, bottom, top, near, far) {\n  var rl = 1 / (right - left);\n  var tb = 1 / (top - bottom);\n  var nf = 1 / (near - far);\n  out[0] = near * 2 * rl;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = near * 2 * tb;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = (right + left) * rl;\n  out[9] = (top + bottom) * tb;\n  out[10] = (far + near) * nf;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = far * near * 2 * nf;\n  out[15] = 0;\n  return out;\n}\n\n/**\n * Generates a perspective projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [-1, 1],\n * which matches WebGL/OpenGL's clip volume.\n * Passing null/undefined/no value for far will generate infinite projection matrix.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} fovy Vertical field of view in radians\n * @param {number} aspect Aspect ratio. typically viewport width/height\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum, can be null or Infinity\n * @returns {mat4} out\n */\nexport function perspectiveNO(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2);\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n  if (far != null && far !== Infinity) {\n    var nf = 1 / (near - far);\n    out[10] = (far + near) * nf;\n    out[14] = 2 * far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -2 * near;\n  }\n  return out;\n}\n\n/**\n * Alias for {@link mat4.perspectiveNO}\n * @function\n */\nexport var perspective = perspectiveNO;\n\n/**\n * Generates a perspective projection matrix suitable for WebGPU with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [0, 1],\n * which matches WebGPU/Vulkan/DirectX/Metal's clip volume.\n * Passing null/undefined/no value for far will generate infinite projection matrix.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} fovy Vertical field of view in radians\n * @param {number} aspect Aspect ratio. typically viewport width/height\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum, can be null or Infinity\n * @returns {mat4} out\n */\nexport function perspectiveZO(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2);\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n  if (far != null && far !== Infinity) {\n    var nf = 1 / (near - far);\n    out[10] = far * nf;\n    out[14] = far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -near;\n  }\n  return out;\n}\n\n/**\n * Generates a perspective projection matrix with the given field of view.\n * This is primarily useful for generating projection matrices to be used\n * with the still experiemental WebVR API.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {Object} fov Object containing the following values: upDegrees, downDegrees, leftDegrees, rightDegrees\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\nexport function perspectiveFromFieldOfView(out, fov, near, far) {\n  var upTan = Math.tan(fov.upDegrees * Math.PI / 180.0);\n  var downTan = Math.tan(fov.downDegrees * Math.PI / 180.0);\n  var leftTan = Math.tan(fov.leftDegrees * Math.PI / 180.0);\n  var rightTan = Math.tan(fov.rightDegrees * Math.PI / 180.0);\n  var xScale = 2.0 / (leftTan + rightTan);\n  var yScale = 2.0 / (upTan + downTan);\n  out[0] = xScale;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  out[4] = 0.0;\n  out[5] = yScale;\n  out[6] = 0.0;\n  out[7] = 0.0;\n  out[8] = -((leftTan - rightTan) * xScale * 0.5);\n  out[9] = (upTan - downTan) * yScale * 0.5;\n  out[10] = far / (near - far);\n  out[11] = -1.0;\n  out[12] = 0.0;\n  out[13] = 0.0;\n  out[14] = far * near / (near - far);\n  out[15] = 0.0;\n  return out;\n}\n\n/**\n * Generates a orthogonal projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [-1, 1],\n * which matches WebGL/OpenGL's clip volume.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} left Left bound of the frustum\n * @param {number} right Right bound of the frustum\n * @param {number} bottom Bottom bound of the frustum\n * @param {number} top Top bound of the frustum\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\nexport function orthoNO(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right);\n  var bt = 1 / (bottom - top);\n  var nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 2 * nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = (far + near) * nf;\n  out[15] = 1;\n  return out;\n}\n\n/**\n * Alias for {@link mat4.orthoNO}\n * @function\n */\nexport var ortho = orthoNO;\n\n/**\n * Generates a orthogonal projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [0, 1],\n * which matches WebGPU/Vulkan/DirectX/Metal's clip volume.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} left Left bound of the frustum\n * @param {number} right Right bound of the frustum\n * @param {number} bottom Bottom bound of the frustum\n * @param {number} top Top bound of the frustum\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\nexport function orthoZO(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right);\n  var bt = 1 / (bottom - top);\n  var nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = near * nf;\n  out[15] = 1;\n  return out;\n}\n\n/**\n * Generates a look-at matrix with the given eye position, focal point, and up axis.\n * If you want a matrix that actually makes an object look at another object, you should use targetTo instead.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {ReadonlyVec3} eye Position of the viewer\n * @param {ReadonlyVec3} center Point the viewer is looking at\n * @param {ReadonlyVec3} up vec3 pointing up\n * @returns {mat4} out\n */\nexport function lookAt(out, eye, center, up) {\n  var x0, x1, x2, y0, y1, y2, z0, z1, z2, len;\n  var eyex = eye[0];\n  var eyey = eye[1];\n  var eyez = eye[2];\n  var upx = up[0];\n  var upy = up[1];\n  var upz = up[2];\n  var centerx = center[0];\n  var centery = center[1];\n  var centerz = center[2];\n  if (Math.abs(eyex - centerx) < glMatrix.EPSILON && Math.abs(eyey - centery) < glMatrix.EPSILON && Math.abs(eyez - centerz) < glMatrix.EPSILON) {\n    return identity(out);\n  }\n  z0 = eyex - centerx;\n  z1 = eyey - centery;\n  z2 = eyez - centerz;\n  len = 1 / Math.sqrt(z0 * z0 + z1 * z1 + z2 * z2);\n  z0 *= len;\n  z1 *= len;\n  z2 *= len;\n  x0 = upy * z2 - upz * z1;\n  x1 = upz * z0 - upx * z2;\n  x2 = upx * z1 - upy * z0;\n  len = Math.sqrt(x0 * x0 + x1 * x1 + x2 * x2);\n  if (!len) {\n    x0 = 0;\n    x1 = 0;\n    x2 = 0;\n  } else {\n    len = 1 / len;\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n  y0 = z1 * x2 - z2 * x1;\n  y1 = z2 * x0 - z0 * x2;\n  y2 = z0 * x1 - z1 * x0;\n  len = Math.sqrt(y0 * y0 + y1 * y1 + y2 * y2);\n  if (!len) {\n    y0 = 0;\n    y1 = 0;\n    y2 = 0;\n  } else {\n    len = 1 / len;\n    y0 *= len;\n    y1 *= len;\n    y2 *= len;\n  }\n  out[0] = x0;\n  out[1] = y0;\n  out[2] = z0;\n  out[3] = 0;\n  out[4] = x1;\n  out[5] = y1;\n  out[6] = z1;\n  out[7] = 0;\n  out[8] = x2;\n  out[9] = y2;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);\n  out[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);\n  out[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);\n  out[15] = 1;\n  return out;\n}\n\n/**\n * Generates a matrix that makes something look at something else.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {ReadonlyVec3} eye Position of the viewer\n * @param {ReadonlyVec3} target Point the viewer is looking at\n * @param {ReadonlyVec3} up vec3 pointing up\n * @returns {mat4} out\n */\nexport function targetTo(out, eye, target, up) {\n  var eyex = eye[0],\n    eyey = eye[1],\n    eyez = eye[2],\n    upx = up[0],\n    upy = up[1],\n    upz = up[2];\n  var z0 = eyex - target[0],\n    z1 = eyey - target[1],\n    z2 = eyez - target[2];\n  var len = z0 * z0 + z1 * z1 + z2 * z2;\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    z0 *= len;\n    z1 *= len;\n    z2 *= len;\n  }\n  var x0 = upy * z2 - upz * z1,\n    x1 = upz * z0 - upx * z2,\n    x2 = upx * z1 - upy * z0;\n  len = x0 * x0 + x1 * x1 + x2 * x2;\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n  out[0] = x0;\n  out[1] = x1;\n  out[2] = x2;\n  out[3] = 0;\n  out[4] = z1 * x2 - z2 * x1;\n  out[5] = z2 * x0 - z0 * x2;\n  out[6] = z0 * x1 - z1 * x0;\n  out[7] = 0;\n  out[8] = z0;\n  out[9] = z1;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = eyex;\n  out[13] = eyey;\n  out[14] = eyez;\n  out[15] = 1;\n  return out;\n}\n\n/**\n * Returns a string representation of a mat4\n *\n * @param {ReadonlyMat4} a matrix to represent as a string\n * @returns {String} string representation of the matrix\n */\nexport function str(a) {\n  return \"mat4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" + a[4] + \", \" + a[5] + \", \" + a[6] + \", \" + a[7] + \", \" + a[8] + \", \" + a[9] + \", \" + a[10] + \", \" + a[11] + \", \" + a[12] + \", \" + a[13] + \", \" + a[14] + \", \" + a[15] + \")\";\n}\n\n/**\n * Returns Frobenius norm of a mat4\n *\n * @param {ReadonlyMat4} a the matrix to calculate Frobenius norm of\n * @returns {Number} Frobenius norm\n */\nexport function frob(a) {\n  return Math.sqrt(a[0] * a[0] + a[1] * a[1] + a[2] * a[2] + a[3] * a[3] + a[4] * a[4] + a[5] * a[5] + a[6] * a[6] + a[7] * a[7] + a[8] * a[8] + a[9] * a[9] + a[10] * a[10] + a[11] * a[11] + a[12] * a[12] + a[13] * a[13] + a[14] * a[14] + a[15] * a[15]);\n}\n\n/**\n * Adds two mat4's\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  out[9] = a[9] + b[9];\n  out[10] = a[10] + b[10];\n  out[11] = a[11] + b[11];\n  out[12] = a[12] + b[12];\n  out[13] = a[13] + b[13];\n  out[14] = a[14] + b[14];\n  out[15] = a[15] + b[15];\n  return out;\n}\n\n/**\n * Subtracts matrix b from matrix a\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  out[9] = a[9] - b[9];\n  out[10] = a[10] - b[10];\n  out[11] = a[11] - b[11];\n  out[12] = a[12] - b[12];\n  out[13] = a[13] - b[13];\n  out[14] = a[14] - b[14];\n  out[15] = a[15] - b[15];\n  return out;\n}\n\n/**\n * Multiply each element of the matrix by a scalar.\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to scale\n * @param {Number} b amount to scale the matrix's elements by\n * @returns {mat4} out\n */\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  out[9] = a[9] * b;\n  out[10] = a[10] * b;\n  out[11] = a[11] * b;\n  out[12] = a[12] * b;\n  out[13] = a[13] * b;\n  out[14] = a[14] * b;\n  out[15] = a[15] * b;\n  return out;\n}\n\n/**\n * Adds two mat4's after multiplying each element of the second operand by a scalar value.\n *\n * @param {mat4} out the receiving vector\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @param {Number} scale the amount to scale b's elements by before adding\n * @returns {mat4} out\n */\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  out[9] = a[9] + b[9] * scale;\n  out[10] = a[10] + b[10] * scale;\n  out[11] = a[11] + b[11] * scale;\n  out[12] = a[12] + b[12] * scale;\n  out[13] = a[13] + b[13] * scale;\n  out[14] = a[14] + b[14] * scale;\n  out[15] = a[15] + b[15] * scale;\n  return out;\n}\n\n/**\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyMat4} a The first matrix.\n * @param {ReadonlyMat4} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8] && a[9] === b[9] && a[10] === b[10] && a[11] === b[11] && a[12] === b[12] && a[13] === b[13] && a[14] === b[14] && a[15] === b[15];\n}\n\n/**\n * Returns whether or not the matrices have approximately the same elements in the same position.\n *\n * @param {ReadonlyMat4} a The first matrix.\n * @param {ReadonlyMat4} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\nexport function equals(a, b) {\n  var a0 = a[0],\n    a1 = a[1],\n    a2 = a[2],\n    a3 = a[3];\n  var a4 = a[4],\n    a5 = a[5],\n    a6 = a[6],\n    a7 = a[7];\n  var a8 = a[8],\n    a9 = a[9],\n    a10 = a[10],\n    a11 = a[11];\n  var a12 = a[12],\n    a13 = a[13],\n    a14 = a[14],\n    a15 = a[15];\n  var b0 = b[0],\n    b1 = b[1],\n    b2 = b[2],\n    b3 = b[3];\n  var b4 = b[4],\n    b5 = b[5],\n    b6 = b[6],\n    b7 = b[7];\n  var b8 = b[8],\n    b9 = b[9],\n    b10 = b[10],\n    b11 = b[11];\n  var b12 = b[12],\n    b13 = b[13],\n    b14 = b[14],\n    b15 = b[15];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8)) && Math.abs(a9 - b9) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a9), Math.abs(b9)) && Math.abs(a10 - b10) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a10), Math.abs(b10)) && Math.abs(a11 - b11) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a11), Math.abs(b11)) && Math.abs(a12 - b12) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a12), Math.abs(b12)) && Math.abs(a13 - b13) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a13), Math.abs(b13)) && Math.abs(a14 - b14) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a14), Math.abs(b14)) && Math.abs(a15 - b15) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a15), Math.abs(b15));\n}\n\n/**\n * Alias for {@link mat4.multiply}\n * @function\n */\nexport var mul = multiply;\n\n/**\n * Alias for {@link mat4.subtract}\n * @function\n */\nexport var sub = subtract;", "import * as glMatrix from \"./common.js\";\nimport * as mat3 from \"./mat3.js\";\nimport * as vec3 from \"./vec3.js\";\nimport * as vec4 from \"./vec4.js\";\n\n/**\n * Quaternion in the format XYZW\n * @module quat\n */\n\n/**\n * Creates a new identity quat\n *\n * @returns {quat} a new quaternion\n */\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n  out[3] = 1;\n  return out;\n}\n\n/**\n * Set a quat to the identity quaternion\n *\n * @param {quat} out the receiving quaternion\n * @returns {quat} out\n */\nexport function identity(out) {\n  out[0] = 0;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 1;\n  return out;\n}\n\n/**\n * Sets a quat from the given angle and rotation axis,\n * then returns it.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyVec3} axis the axis around which to rotate\n * @param {Number} rad the angle in radians\n * @returns {quat} out\n **/\nexport function setAxisAngle(out, axis, rad) {\n  rad = rad * 0.5;\n  var s = Math.sin(rad);\n  out[0] = s * axis[0];\n  out[1] = s * axis[1];\n  out[2] = s * axis[2];\n  out[3] = Math.cos(rad);\n  return out;\n}\n\n/**\n * Gets the rotation axis and angle for a given\n *  quaternion. If a quaternion is created with\n *  setAxisAngle, this method will return the same\n *  values as providied in the original parameter list\n *  OR functionally equivalent values.\n * Example: The quaternion formed by axis [0, 0, 1] and\n *  angle -90 is the same as the quaternion formed by\n *  [0, 0, 1] and 270. This method favors the latter.\n * @param  {vec3} out_axis  Vector receiving the axis of rotation\n * @param  {ReadonlyQuat} q     Quaternion to be decomposed\n * @return {Number}     Angle, in radians, of the rotation\n */\nexport function getAxisAngle(out_axis, q) {\n  var rad = Math.acos(q[3]) * 2.0;\n  var s = Math.sin(rad / 2.0);\n  if (s > glMatrix.EPSILON) {\n    out_axis[0] = q[0] / s;\n    out_axis[1] = q[1] / s;\n    out_axis[2] = q[2] / s;\n  } else {\n    // If s is zero, return any axis (no rotation - axis does not matter)\n    out_axis[0] = 1;\n    out_axis[1] = 0;\n    out_axis[2] = 0;\n  }\n  return rad;\n}\n\n/**\n * Gets the angular distance between two unit quaternions\n *\n * @param  {ReadonlyQuat} a     Origin unit quaternion\n * @param  {ReadonlyQuat} b     Destination unit quaternion\n * @return {Number}     Angle, in radians, between the two quaternions\n */\nexport function getAngle(a, b) {\n  var dotproduct = dot(a, b);\n  return Math.acos(2 * dotproduct * dotproduct - 1);\n}\n\n/**\n * Multiplies two quat's\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @returns {quat} out\n */\nexport function multiply(out, a, b) {\n  var ax = a[0],\n    ay = a[1],\n    az = a[2],\n    aw = a[3];\n  var bx = b[0],\n    by = b[1],\n    bz = b[2],\n    bw = b[3];\n  out[0] = ax * bw + aw * bx + ay * bz - az * by;\n  out[1] = ay * bw + aw * by + az * bx - ax * bz;\n  out[2] = az * bw + aw * bz + ax * by - ay * bx;\n  out[3] = aw * bw - ax * bx - ay * by - az * bz;\n  return out;\n}\n\n/**\n * Rotates a quaternion by the given angle about the X axis\n *\n * @param {quat} out quat receiving operation result\n * @param {ReadonlyQuat} a quat to rotate\n * @param {number} rad angle (in radians) to rotate\n * @returns {quat} out\n */\nexport function rotateX(out, a, rad) {\n  rad *= 0.5;\n  var ax = a[0],\n    ay = a[1],\n    az = a[2],\n    aw = a[3];\n  var bx = Math.sin(rad),\n    bw = Math.cos(rad);\n  out[0] = ax * bw + aw * bx;\n  out[1] = ay * bw + az * bx;\n  out[2] = az * bw - ay * bx;\n  out[3] = aw * bw - ax * bx;\n  return out;\n}\n\n/**\n * Rotates a quaternion by the given angle about the Y axis\n *\n * @param {quat} out quat receiving operation result\n * @param {ReadonlyQuat} a quat to rotate\n * @param {number} rad angle (in radians) to rotate\n * @returns {quat} out\n */\nexport function rotateY(out, a, rad) {\n  rad *= 0.5;\n  var ax = a[0],\n    ay = a[1],\n    az = a[2],\n    aw = a[3];\n  var by = Math.sin(rad),\n    bw = Math.cos(rad);\n  out[0] = ax * bw - az * by;\n  out[1] = ay * bw + aw * by;\n  out[2] = az * bw + ax * by;\n  out[3] = aw * bw - ay * by;\n  return out;\n}\n\n/**\n * Rotates a quaternion by the given angle about the Z axis\n *\n * @param {quat} out quat receiving operation result\n * @param {ReadonlyQuat} a quat to rotate\n * @param {number} rad angle (in radians) to rotate\n * @returns {quat} out\n */\nexport function rotateZ(out, a, rad) {\n  rad *= 0.5;\n  var ax = a[0],\n    ay = a[1],\n    az = a[2],\n    aw = a[3];\n  var bz = Math.sin(rad),\n    bw = Math.cos(rad);\n  out[0] = ax * bw + ay * bz;\n  out[1] = ay * bw - ax * bz;\n  out[2] = az * bw + aw * bz;\n  out[3] = aw * bw - az * bz;\n  return out;\n}\n\n/**\n * Calculates the W component of a quat from the X, Y, and Z components.\n * Assumes that quaternion is 1 unit in length.\n * Any existing W component will be ignored.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate W component of\n * @returns {quat} out\n */\nexport function calculateW(out, a) {\n  var x = a[0],\n    y = a[1],\n    z = a[2];\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = Math.sqrt(Math.abs(1.0 - x * x - y * y - z * z));\n  return out;\n}\n\n/**\n * Calculate the exponential of a unit quaternion.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate the exponential of\n * @returns {quat} out\n */\nexport function exp(out, a) {\n  var x = a[0],\n    y = a[1],\n    z = a[2],\n    w = a[3];\n  var r = Math.sqrt(x * x + y * y + z * z);\n  var et = Math.exp(w);\n  var s = r > 0 ? et * Math.sin(r) / r : 0;\n  out[0] = x * s;\n  out[1] = y * s;\n  out[2] = z * s;\n  out[3] = et * Math.cos(r);\n  return out;\n}\n\n/**\n * Calculate the natural logarithm of a unit quaternion.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate the exponential of\n * @returns {quat} out\n */\nexport function ln(out, a) {\n  var x = a[0],\n    y = a[1],\n    z = a[2],\n    w = a[3];\n  var r = Math.sqrt(x * x + y * y + z * z);\n  var t = r > 0 ? Math.atan2(r, w) / r : 0;\n  out[0] = x * t;\n  out[1] = y * t;\n  out[2] = z * t;\n  out[3] = 0.5 * Math.log(x * x + y * y + z * z + w * w);\n  return out;\n}\n\n/**\n * Calculate the scalar power of a unit quaternion.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate the exponential of\n * @param {Number} b amount to scale the quaternion by\n * @returns {quat} out\n */\nexport function pow(out, a, b) {\n  ln(out, a);\n  scale(out, out, b);\n  exp(out, out);\n  return out;\n}\n\n/**\n * Performs a spherical linear interpolation between two quat\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {quat} out\n */\nexport function slerp(out, a, b, t) {\n  // benchmarks:\n  //    http://jsperf.com/quaternion-slerp-implementations\n  var ax = a[0],\n    ay = a[1],\n    az = a[2],\n    aw = a[3];\n  var bx = b[0],\n    by = b[1],\n    bz = b[2],\n    bw = b[3];\n  var omega, cosom, sinom, scale0, scale1;\n\n  // calc cosine\n  cosom = ax * bx + ay * by + az * bz + aw * bw;\n  // adjust signs (if necessary)\n  if (cosom < 0.0) {\n    cosom = -cosom;\n    bx = -bx;\n    by = -by;\n    bz = -bz;\n    bw = -bw;\n  }\n  // calculate coefficients\n  if (1.0 - cosom > glMatrix.EPSILON) {\n    // standard case (slerp)\n    omega = Math.acos(cosom);\n    sinom = Math.sin(omega);\n    scale0 = Math.sin((1.0 - t) * omega) / sinom;\n    scale1 = Math.sin(t * omega) / sinom;\n  } else {\n    // \"from\" and \"to\" quaternions are very close\n    //  ... so we can do a linear interpolation\n    scale0 = 1.0 - t;\n    scale1 = t;\n  }\n  // calculate final values\n  out[0] = scale0 * ax + scale1 * bx;\n  out[1] = scale0 * ay + scale1 * by;\n  out[2] = scale0 * az + scale1 * bz;\n  out[3] = scale0 * aw + scale1 * bw;\n  return out;\n}\n\n/**\n * Generates a random unit quaternion\n *\n * @param {quat} out the receiving quaternion\n * @returns {quat} out\n */\nexport function random(out) {\n  // Implementation of http://planning.cs.uiuc.edu/node198.html\n  // TODO: Calling random 3 times is probably not the fastest solution\n  var u1 = glMatrix.RANDOM();\n  var u2 = glMatrix.RANDOM();\n  var u3 = glMatrix.RANDOM();\n  var sqrt1MinusU1 = Math.sqrt(1 - u1);\n  var sqrtU1 = Math.sqrt(u1);\n  out[0] = sqrt1MinusU1 * Math.sin(2.0 * Math.PI * u2);\n  out[1] = sqrt1MinusU1 * Math.cos(2.0 * Math.PI * u2);\n  out[2] = sqrtU1 * Math.sin(2.0 * Math.PI * u3);\n  out[3] = sqrtU1 * Math.cos(2.0 * Math.PI * u3);\n  return out;\n}\n\n/**\n * Calculates the inverse of a quat\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate inverse of\n * @returns {quat} out\n */\nexport function invert(out, a) {\n  var a0 = a[0],\n    a1 = a[1],\n    a2 = a[2],\n    a3 = a[3];\n  var dot = a0 * a0 + a1 * a1 + a2 * a2 + a3 * a3;\n  var invDot = dot ? 1.0 / dot : 0;\n\n  // TODO: Would be faster to return [0,0,0,0] immediately if dot == 0\n\n  out[0] = -a0 * invDot;\n  out[1] = -a1 * invDot;\n  out[2] = -a2 * invDot;\n  out[3] = a3 * invDot;\n  return out;\n}\n\n/**\n * Calculates the conjugate of a quat\n * If the quaternion is normalized, this function is faster than quat.inverse and produces the same result.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate conjugate of\n * @returns {quat} out\n */\nexport function conjugate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = a[3];\n  return out;\n}\n\n/**\n * Creates a quaternion from the given 3x3 rotation matrix.\n *\n * NOTE: The resultant quaternion is not normalized, so you should be sure\n * to renormalize the quaternion yourself where necessary.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyMat3} m rotation matrix\n * @returns {quat} out\n * @function\n */\nexport function fromMat3(out, m) {\n  // Algorithm in Ken Shoemake's article in 1987 SIGGRAPH course notes\n  // article \"Quaternion Calculus and Fast Animation\".\n  var fTrace = m[0] + m[4] + m[8];\n  var fRoot;\n  if (fTrace > 0.0) {\n    // |w| > 1/2, may as well choose w > 1/2\n    fRoot = Math.sqrt(fTrace + 1.0); // 2w\n    out[3] = 0.5 * fRoot;\n    fRoot = 0.5 / fRoot; // 1/(4w)\n    out[0] = (m[5] - m[7]) * fRoot;\n    out[1] = (m[6] - m[2]) * fRoot;\n    out[2] = (m[1] - m[3]) * fRoot;\n  } else {\n    // |w| <= 1/2\n    var i = 0;\n    if (m[4] > m[0]) i = 1;\n    if (m[8] > m[i * 3 + i]) i = 2;\n    var j = (i + 1) % 3;\n    var k = (i + 2) % 3;\n    fRoot = Math.sqrt(m[i * 3 + i] - m[j * 3 + j] - m[k * 3 + k] + 1.0);\n    out[i] = 0.5 * fRoot;\n    fRoot = 0.5 / fRoot;\n    out[3] = (m[j * 3 + k] - m[k * 3 + j]) * fRoot;\n    out[j] = (m[j * 3 + i] + m[i * 3 + j]) * fRoot;\n    out[k] = (m[k * 3 + i] + m[i * 3 + k]) * fRoot;\n  }\n  return out;\n}\n\n/**\n * Creates a quaternion from the given euler angle x, y, z using the provided intrinsic order for the conversion.\n *\n * @param {quat} out the receiving quaternion\n * @param {Number} x Angle to rotate around X axis in degrees.\n * @param {Number} y Angle to rotate around Y axis in degrees.\n * @param {Number} z Angle to rotate around Z axis in degrees.\n * @param {'xyz'|'xzy'|'yxz'|'yzx'|'zxy'|'zyx'} order Intrinsic order for conversion, default is zyx.\n * @returns {quat} out\n * @function\n */\nexport function fromEuler(out, x, y, z) {\n  var order = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : glMatrix.ANGLE_ORDER;\n  var halfToRad = Math.PI / 360;\n  x *= halfToRad;\n  z *= halfToRad;\n  y *= halfToRad;\n  var sx = Math.sin(x);\n  var cx = Math.cos(x);\n  var sy = Math.sin(y);\n  var cy = Math.cos(y);\n  var sz = Math.sin(z);\n  var cz = Math.cos(z);\n  switch (order) {\n    case \"xyz\":\n      out[0] = sx * cy * cz + cx * sy * sz;\n      out[1] = cx * sy * cz - sx * cy * sz;\n      out[2] = cx * cy * sz + sx * sy * cz;\n      out[3] = cx * cy * cz - sx * sy * sz;\n      break;\n    case \"xzy\":\n      out[0] = sx * cy * cz - cx * sy * sz;\n      out[1] = cx * sy * cz - sx * cy * sz;\n      out[2] = cx * cy * sz + sx * sy * cz;\n      out[3] = cx * cy * cz + sx * sy * sz;\n      break;\n    case \"yxz\":\n      out[0] = sx * cy * cz + cx * sy * sz;\n      out[1] = cx * sy * cz - sx * cy * sz;\n      out[2] = cx * cy * sz - sx * sy * cz;\n      out[3] = cx * cy * cz + sx * sy * sz;\n      break;\n    case \"yzx\":\n      out[0] = sx * cy * cz + cx * sy * sz;\n      out[1] = cx * sy * cz + sx * cy * sz;\n      out[2] = cx * cy * sz - sx * sy * cz;\n      out[3] = cx * cy * cz - sx * sy * sz;\n      break;\n    case \"zxy\":\n      out[0] = sx * cy * cz - cx * sy * sz;\n      out[1] = cx * sy * cz + sx * cy * sz;\n      out[2] = cx * cy * sz + sx * sy * cz;\n      out[3] = cx * cy * cz - sx * sy * sz;\n      break;\n    case \"zyx\":\n      out[0] = sx * cy * cz - cx * sy * sz;\n      out[1] = cx * sy * cz + sx * cy * sz;\n      out[2] = cx * cy * sz - sx * sy * cz;\n      out[3] = cx * cy * cz + sx * sy * sz;\n      break;\n    default:\n      throw new Error('Unknown angle order ' + order);\n  }\n  return out;\n}\n\n/**\n * Returns a string representation of a quaternion\n *\n * @param {ReadonlyQuat} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\nexport function str(a) {\n  return \"quat(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \")\";\n}\n\n/**\n * Creates a new quat initialized with values from an existing quaternion\n *\n * @param {ReadonlyQuat} a quaternion to clone\n * @returns {quat} a new quaternion\n * @function\n */\nexport var clone = vec4.clone;\n\n/**\n * Creates a new quat initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {quat} a new quaternion\n * @function\n */\nexport var fromValues = vec4.fromValues;\n\n/**\n * Copy the values from one quat to another\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the source quaternion\n * @returns {quat} out\n * @function\n */\nexport var copy = vec4.copy;\n\n/**\n * Set the components of a quat to the given values\n *\n * @param {quat} out the receiving quaternion\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {quat} out\n * @function\n */\nexport var set = vec4.set;\n\n/**\n * Adds two quat's\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @returns {quat} out\n * @function\n */\nexport var add = vec4.add;\n\n/**\n * Alias for {@link quat.multiply}\n * @function\n */\nexport var mul = multiply;\n\n/**\n * Scales a quat by a scalar number\n *\n * @param {quat} out the receiving vector\n * @param {ReadonlyQuat} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {quat} out\n * @function\n */\nexport var scale = vec4.scale;\n\n/**\n * Calculates the dot product of two quat's\n *\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @returns {Number} dot product of a and b\n * @function\n */\nexport var dot = vec4.dot;\n\n/**\n * Performs a linear interpolation between two quat's\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {quat} out\n * @function\n */\nexport var lerp = vec4.lerp;\n\n/**\n * Calculates the length of a quat\n *\n * @param {ReadonlyQuat} a vector to calculate length of\n * @returns {Number} length of a\n */\nexport var length = vec4.length;\n\n/**\n * Alias for {@link quat.length}\n * @function\n */\nexport var len = length;\n\n/**\n * Calculates the squared length of a quat\n *\n * @param {ReadonlyQuat} a vector to calculate squared length of\n * @returns {Number} squared length of a\n * @function\n */\nexport var squaredLength = vec4.squaredLength;\n\n/**\n * Alias for {@link quat.squaredLength}\n * @function\n */\nexport var sqrLen = squaredLength;\n\n/**\n * Normalize a quat\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quaternion to normalize\n * @returns {quat} out\n * @function\n */\nexport var normalize = vec4.normalize;\n\n/**\n * Returns whether or not the quaternions have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyQuat} a The first quaternion.\n * @param {ReadonlyQuat} b The second quaternion.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\nexport var exactEquals = vec4.exactEquals;\n\n/**\n * Returns whether or not the quaternions point approximately to the same direction.\n *\n * Both quaternions are assumed to be unit length.\n *\n * @param {ReadonlyQuat} a The first unit quaternion.\n * @param {ReadonlyQuat} b The second unit quaternion.\n * @returns {Boolean} True if the quaternions are equal, false otherwise.\n */\nexport function equals(a, b) {\n  return Math.abs(vec4.dot(a, b)) >= 1 - glMatrix.EPSILON;\n}\n\n/**\n * Sets a quaternion to represent the shortest rotation from one\n * vector to another.\n *\n * Both vectors are assumed to be unit length.\n *\n * @param {quat} out the receiving quaternion.\n * @param {ReadonlyVec3} a the initial vector\n * @param {ReadonlyVec3} b the destination vector\n * @returns {quat} out\n */\nexport var rotationTo = function () {\n  var tmpvec3 = vec3.create();\n  var xUnitVec3 = vec3.fromValues(1, 0, 0);\n  var yUnitVec3 = vec3.fromValues(0, 1, 0);\n  return function (out, a, b) {\n    var dot = vec3.dot(a, b);\n    if (dot < -0.999999) {\n      vec3.cross(tmpvec3, xUnitVec3, a);\n      if (vec3.len(tmpvec3) < 0.000001) vec3.cross(tmpvec3, yUnitVec3, a);\n      vec3.normalize(tmpvec3, tmpvec3);\n      setAxisAngle(out, tmpvec3, Math.PI);\n      return out;\n    } else if (dot > 0.999999) {\n      out[0] = 0;\n      out[1] = 0;\n      out[2] = 0;\n      out[3] = 1;\n      return out;\n    } else {\n      vec3.cross(tmpvec3, a, b);\n      out[0] = tmpvec3[0];\n      out[1] = tmpvec3[1];\n      out[2] = tmpvec3[2];\n      out[3] = 1 + dot;\n      return normalize(out, out);\n    }\n  };\n}();\n\n/**\n * Performs a spherical linear interpolation with two control points\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @param {ReadonlyQuat} c the third operand\n * @param {ReadonlyQuat} d the fourth operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {quat} out\n */\nexport var sqlerp = function () {\n  var temp1 = create();\n  var temp2 = create();\n  return function (out, a, b, c, d, t) {\n    slerp(temp1, a, d, t);\n    slerp(temp2, b, c, t);\n    slerp(out, temp1, temp2, 2 * t * (1 - t));\n    return out;\n  };\n}();\n\n/**\n * Sets the specified quaternion with values corresponding to the given\n * axes. Each axis is a vec3 and is expected to be unit length and\n * perpendicular to all other specified axes.\n *\n * @param {ReadonlyVec3} view  the vector representing the viewing direction\n * @param {ReadonlyVec3} right the vector representing the local \"right\" direction\n * @param {ReadonlyVec3} up    the vector representing the local \"up\" direction\n * @returns {quat} out\n */\nexport var setAxes = function () {\n  var matr = mat3.create();\n  return function (out, view, right, up) {\n    matr[0] = right[0];\n    matr[3] = right[1];\n    matr[6] = right[2];\n    matr[1] = up[0];\n    matr[4] = up[1];\n    matr[7] = up[2];\n    matr[2] = -view[0];\n    matr[5] = -view[1];\n    matr[8] = -view[2];\n    return normalize(out, fromMat3(out, matr));\n  };\n}();", "import * as glMatrix from \"./common.js\";\n\n/**\n * 3 Dimensional Vector\n * @module vec3\n */\n\n/**\n * Creates a new, empty vec3\n *\n * @returns {vec3} a new 3D vector\n */\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n  return out;\n}\n\n/**\n * Creates a new vec3 initialized with values from an existing vector\n *\n * @param {ReadonlyVec3} a vector to clone\n * @returns {vec3} a new 3D vector\n */\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n\n/**\n * Calculates the length of a vec3\n *\n * @param {ReadonlyVec3} a vector to calculate length of\n * @returns {Number} length of a\n */\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return Math.sqrt(x * x + y * y + z * z);\n}\n\n/**\n * Creates a new vec3 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @returns {vec3} a new 3D vector\n */\nexport function fromValues(x, y, z) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n\n/**\n * Copy the values from one vec3 to another\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the source vector\n * @returns {vec3} out\n */\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n\n/**\n * Set the components of a vec3 to the given values\n *\n * @param {vec3} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @returns {vec3} out\n */\nexport function set(out, x, y, z) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n\n/**\n * Adds two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  return out;\n}\n\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  return out;\n}\n\n/**\n * Multiplies two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  return out;\n}\n\n/**\n * Divides two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  return out;\n}\n\n/**\n * Math.ceil the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to ceil\n * @returns {vec3} out\n */\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  return out;\n}\n\n/**\n * Math.floor the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to floor\n * @returns {vec3} out\n */\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  return out;\n}\n\n/**\n * Returns the minimum of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  return out;\n}\n\n/**\n * Returns the maximum of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  return out;\n}\n\n/**\n * symmetric round the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to round\n * @returns {vec3} out\n */\nexport function round(out, a) {\n  out[0] = glMatrix.round(a[0]);\n  out[1] = glMatrix.round(a[1]);\n  out[2] = glMatrix.round(a[2]);\n  return out;\n}\n\n/**\n * Scales a vec3 by a scalar number\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec3} out\n */\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  return out;\n}\n\n/**\n * Adds two vec3's after scaling the second operand by a scalar value\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec3} out\n */\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  return out;\n}\n\n/**\n * Calculates the euclidian distance between two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} distance between a and b\n */\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return Math.sqrt(x * x + y * y + z * z);\n}\n\n/**\n * Calculates the squared euclidian distance between two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} squared distance between a and b\n */\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return x * x + y * y + z * z;\n}\n\n/**\n * Calculates the squared length of a vec3\n *\n * @param {ReadonlyVec3} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return x * x + y * y + z * z;\n}\n\n/**\n * Negates the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to negate\n * @returns {vec3} out\n */\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  return out;\n}\n\n/**\n * Returns the inverse of the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to invert\n * @returns {vec3} out\n */\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  return out;\n}\n\n/**\n * Normalize a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to normalize\n * @returns {vec3} out\n */\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var len = x * x + y * y + z * z;\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  out[2] = a[2] * len;\n  return out;\n}\n\n/**\n * Calculates the dot product of two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} dot product of a and b\n */\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\n\n/**\n * Computes the cross product of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\nexport function cross(out, a, b) {\n  var ax = a[0],\n    ay = a[1],\n    az = a[2];\n  var bx = b[0],\n    by = b[1],\n    bz = b[2];\n  out[0] = ay * bz - az * by;\n  out[1] = az * bx - ax * bz;\n  out[2] = ax * by - ay * bx;\n  return out;\n}\n\n/**\n * Performs a linear interpolation between two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  return out;\n}\n\n/**\n * Performs a spherical linear interpolation between two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\nexport function slerp(out, a, b, t) {\n  var angle = Math.acos(Math.min(Math.max(dot(a, b), -1), 1));\n  var sinTotal = Math.sin(angle);\n  var ratioA = Math.sin((1 - t) * angle) / sinTotal;\n  var ratioB = Math.sin(t * angle) / sinTotal;\n  out[0] = ratioA * a[0] + ratioB * b[0];\n  out[1] = ratioA * a[1] + ratioB * b[1];\n  out[2] = ratioA * a[2] + ratioB * b[2];\n  return out;\n}\n\n/**\n * Performs a hermite interpolation with two control points\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {ReadonlyVec3} c the third operand\n * @param {ReadonlyVec3} d the fourth operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\nexport function hermite(out, a, b, c, d, t) {\n  var factorTimes2 = t * t;\n  var factor1 = factorTimes2 * (2 * t - 3) + 1;\n  var factor2 = factorTimes2 * (t - 2) + t;\n  var factor3 = factorTimes2 * (t - 1);\n  var factor4 = factorTimes2 * (3 - 2 * t);\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n\n/**\n * Performs a bezier interpolation with two control points\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {ReadonlyVec3} c the third operand\n * @param {ReadonlyVec3} d the fourth operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\nexport function bezier(out, a, b, c, d, t) {\n  var inverseFactor = 1 - t;\n  var inverseFactorTimesTwo = inverseFactor * inverseFactor;\n  var factorTimes2 = t * t;\n  var factor1 = inverseFactorTimesTwo * inverseFactor;\n  var factor2 = 3 * t * inverseFactorTimesTwo;\n  var factor3 = 3 * factorTimes2 * inverseFactor;\n  var factor4 = factorTimes2 * t;\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec3} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If omitted, a unit vector will be returned\n * @returns {vec3} out\n */\nexport function random(out, scale) {\n  scale = scale === undefined ? 1.0 : scale;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  var z = glMatrix.RANDOM() * 2.0 - 1.0;\n  var zScale = Math.sqrt(1.0 - z * z) * scale;\n  out[0] = Math.cos(r) * zScale;\n  out[1] = Math.sin(r) * zScale;\n  out[2] = z * scale;\n  return out;\n}\n\n/**\n * Transforms the vec3 with a mat4.\n * 4th vector component is implicitly '1'\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyMat4} m matrix to transform with\n * @returns {vec3} out\n */\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n    y = a[1],\n    z = a[2];\n  var w = m[3] * x + m[7] * y + m[11] * z + m[15];\n  w = w || 1.0;\n  out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;\n  out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;\n  out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;\n  return out;\n}\n\n/**\n * Transforms the vec3 with a mat3.\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyMat3} m the 3x3 matrix to transform with\n * @returns {vec3} out\n */\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n    y = a[1],\n    z = a[2];\n  out[0] = x * m[0] + y * m[3] + z * m[6];\n  out[1] = x * m[1] + y * m[4] + z * m[7];\n  out[2] = x * m[2] + y * m[5] + z * m[8];\n  return out;\n}\n\n/**\n * Transforms the vec3 with a quat\n * Can also be used for dual quaternions. (Multiply it with the real part)\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyQuat} q normalized quaternion to transform with\n * @returns {vec3} out\n */\nexport function transformQuat(out, a, q) {\n  // Fast Vector Rotation using Quaternions by Robert Eisele\n  // https://raw.org/proof/vector-rotation-using-quaternions/\n\n  var qx = q[0],\n    qy = q[1],\n    qz = q[2],\n    qw = q[3];\n  var vx = a[0],\n    vy = a[1],\n    vz = a[2];\n\n  // t = q x v\n  var tx = qy * vz - qz * vy;\n  var ty = qz * vx - qx * vz;\n  var tz = qx * vy - qy * vx;\n\n  // t = 2t\n  tx = tx + tx;\n  ty = ty + ty;\n  tz = tz + tz;\n\n  // v + w t + q x t\n  out[0] = vx + qw * tx + qy * tz - qz * ty;\n  out[1] = vy + qw * ty + qz * tx - qx * tz;\n  out[2] = vz + qw * tz + qx * ty - qy * tx;\n  return out;\n}\n\n/**\n * Rotate a 3D vector around the x-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\nexport function rotateX(out, a, b, rad) {\n  var p = [],\n    r = [];\n  //Translate point to the origin\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2];\n\n  //perform rotation\n  r[0] = p[0];\n  r[1] = p[1] * Math.cos(rad) - p[2] * Math.sin(rad);\n  r[2] = p[1] * Math.sin(rad) + p[2] * Math.cos(rad);\n\n  //translate to correct position\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n\n/**\n * Rotate a 3D vector around the y-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\nexport function rotateY(out, a, b, rad) {\n  var p = [],\n    r = [];\n  //Translate point to the origin\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2];\n\n  //perform rotation\n  r[0] = p[2] * Math.sin(rad) + p[0] * Math.cos(rad);\n  r[1] = p[1];\n  r[2] = p[2] * Math.cos(rad) - p[0] * Math.sin(rad);\n\n  //translate to correct position\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n\n/**\n * Rotate a 3D vector around the z-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\nexport function rotateZ(out, a, b, rad) {\n  var p = [],\n    r = [];\n  //Translate point to the origin\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2];\n\n  //perform rotation\n  r[0] = p[0] * Math.cos(rad) - p[1] * Math.sin(rad);\n  r[1] = p[0] * Math.sin(rad) + p[1] * Math.cos(rad);\n  r[2] = p[2];\n\n  //translate to correct position\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n\n/**\n * Get the angle between two 3D vectors\n * @param {ReadonlyVec3} a The first operand\n * @param {ReadonlyVec3} b The second operand\n * @returns {Number} The angle in radians\n */\nexport function angle(a, b) {\n  var ax = a[0],\n    ay = a[1],\n    az = a[2],\n    bx = b[0],\n    by = b[1],\n    bz = b[2],\n    mag = Math.sqrt((ax * ax + ay * ay + az * az) * (bx * bx + by * by + bz * bz)),\n    cosine = mag && dot(a, b) / mag;\n  return Math.acos(Math.min(Math.max(cosine, -1), 1));\n}\n\n/**\n * Set the components of a vec3 to zero\n *\n * @param {vec3} out the receiving vector\n * @returns {vec3} out\n */\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  return out;\n}\n\n/**\n * Returns a string representation of a vector\n *\n * @param {ReadonlyVec3} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\nexport function str(a) {\n  return \"vec3(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \")\";\n}\n\n/**\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyVec3} a The first vector.\n * @param {ReadonlyVec3} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2];\n}\n\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {ReadonlyVec3} a The first vector.\n * @param {ReadonlyVec3} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\nexport function equals(a, b) {\n  var a0 = a[0],\n    a1 = a[1],\n    a2 = a[2];\n  var b0 = b[0],\n    b1 = b[1],\n    b2 = b[2];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2));\n}\n\n/**\n * Alias for {@link vec3.subtract}\n * @function\n */\nexport var sub = subtract;\n\n/**\n * Alias for {@link vec3.multiply}\n * @function\n */\nexport var mul = multiply;\n\n/**\n * Alias for {@link vec3.divide}\n * @function\n */\nexport var div = divide;\n\n/**\n * Alias for {@link vec3.distance}\n * @function\n */\nexport var dist = distance;\n\n/**\n * Alias for {@link vec3.squaredDistance}\n * @function\n */\nexport var sqrDist = squaredDistance;\n\n/**\n * Alias for {@link vec3.length}\n * @function\n */\nexport var len = length;\n\n/**\n * Alias for {@link vec3.squaredLength}\n * @function\n */\nexport var sqrLen = squaredLength;\n\n/**\n * Perform some operation over an array of vec3s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec3. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec3s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n    if (!stride) {\n      stride = 3;\n    }\n    if (!offset) {\n      offset = 0;\n    }\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n    }\n    return a;\n  };\n}();", "import * as glMatrix from \"./common.js\";\n\n/**\n * 4 Dimensional Vector\n * @module vec4\n */\n\n/**\n * Creates a new, empty vec4\n *\n * @returns {vec4} a new 4D vector\n */\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n  }\n  return out;\n}\n\n/**\n * Creates a new vec4 initialized with values from an existing vector\n *\n * @param {ReadonlyVec4} a vector to clone\n * @returns {vec4} a new 4D vector\n */\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n\n/**\n * Creates a new vec4 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {vec4} a new 4D vector\n */\nexport function fromValues(x, y, z, w) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n\n/**\n * Copy the values from one vec4 to another\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the source vector\n * @returns {vec4} out\n */\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n\n/**\n * Set the components of a vec4 to the given values\n *\n * @param {vec4} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {vec4} out\n */\nexport function set(out, x, y, z, w) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n\n/**\n * Adds two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  return out;\n}\n\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  return out;\n}\n\n/**\n * Multiplies two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  out[3] = a[3] * b[3];\n  return out;\n}\n\n/**\n * Divides two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  out[3] = a[3] / b[3];\n  return out;\n}\n\n/**\n * Math.ceil the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to ceil\n * @returns {vec4} out\n */\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  out[3] = Math.ceil(a[3]);\n  return out;\n}\n\n/**\n * Math.floor the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to floor\n * @returns {vec4} out\n */\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  out[3] = Math.floor(a[3]);\n  return out;\n}\n\n/**\n * Returns the minimum of two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  out[3] = Math.min(a[3], b[3]);\n  return out;\n}\n\n/**\n * Returns the maximum of two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  out[3] = Math.max(a[3], b[3]);\n  return out;\n}\n\n/**\n * symmetric round the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to round\n * @returns {vec4} out\n */\nexport function round(out, a) {\n  out[0] = glMatrix.round(a[0]);\n  out[1] = glMatrix.round(a[1]);\n  out[2] = glMatrix.round(a[2]);\n  out[3] = glMatrix.round(a[3]);\n  return out;\n}\n\n/**\n * Scales a vec4 by a scalar number\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec4} out\n */\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  return out;\n}\n\n/**\n * Adds two vec4's after scaling the second operand by a scalar value\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec4} out\n */\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  return out;\n}\n\n/**\n * Calculates the euclidian distance between two vec4's\n *\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {Number} distance between a and b\n */\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return Math.sqrt(x * x + y * y + z * z + w * w);\n}\n\n/**\n * Calculates the squared euclidian distance between two vec4's\n *\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {Number} squared distance between a and b\n */\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return x * x + y * y + z * z + w * w;\n}\n\n/**\n * Calculates the length of a vec4\n *\n * @param {ReadonlyVec4} a vector to calculate length of\n * @returns {Number} length of a\n */\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return Math.sqrt(x * x + y * y + z * z + w * w);\n}\n\n/**\n * Calculates the squared length of a vec4\n *\n * @param {ReadonlyVec4} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return x * x + y * y + z * z + w * w;\n}\n\n/**\n * Negates the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to negate\n * @returns {vec4} out\n */\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = -a[3];\n  return out;\n}\n\n/**\n * Returns the inverse of the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to invert\n * @returns {vec4} out\n */\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  out[3] = 1.0 / a[3];\n  return out;\n}\n\n/**\n * Normalize a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to normalize\n * @returns {vec4} out\n */\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  var len = x * x + y * y + z * z + w * w;\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n  }\n  out[0] = x * len;\n  out[1] = y * len;\n  out[2] = z * len;\n  out[3] = w * len;\n  return out;\n}\n\n/**\n * Calculates the dot product of two vec4's\n *\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {Number} dot product of a and b\n */\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2] + a[3] * b[3];\n}\n\n/**\n * Returns the cross-product of three vectors in a 4-dimensional space\n *\n * @param {ReadonlyVec4} out the receiving vector\n * @param {ReadonlyVec4} u the first vector\n * @param {ReadonlyVec4} v the second vector\n * @param {ReadonlyVec4} w the third vector\n * @returns {vec4} result\n */\nexport function cross(out, u, v, w) {\n  var A = v[0] * w[1] - v[1] * w[0],\n    B = v[0] * w[2] - v[2] * w[0],\n    C = v[0] * w[3] - v[3] * w[0],\n    D = v[1] * w[2] - v[2] * w[1],\n    E = v[1] * w[3] - v[3] * w[1],\n    F = v[2] * w[3] - v[3] * w[2];\n  var G = u[0];\n  var H = u[1];\n  var I = u[2];\n  var J = u[3];\n  out[0] = H * F - I * E + J * D;\n  out[1] = -(G * F) + I * C - J * B;\n  out[2] = G * E - H * C + J * A;\n  out[3] = -(G * D) + H * B - I * A;\n  return out;\n}\n\n/**\n * Performs a linear interpolation between two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec4} out\n */\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  var aw = a[3];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  out[3] = aw + t * (b[3] - aw);\n  return out;\n}\n\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec4} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If omitted, a unit vector will be returned\n * @returns {vec4} out\n */\nexport function random(out, scale) {\n  scale = scale === undefined ? 1.0 : scale;\n\n  // Marsaglia, George. Choosing a Point from the Surface of a\n  // Sphere. Ann. Math. Statist. 43 (1972), no. 2, 645--646.\n  // http://projecteuclid.org/euclid.aoms/1177692644;\n  var v1, v2, v3, v4;\n  var s1, s2;\n  var rand;\n  rand = glMatrix.RANDOM();\n  v1 = rand * 2 - 1;\n  v2 = (4 * glMatrix.RANDOM() - 2) * Math.sqrt(rand * -rand + rand);\n  s1 = v1 * v1 + v2 * v2;\n  rand = glMatrix.RANDOM();\n  v3 = rand * 2 - 1;\n  v4 = (4 * glMatrix.RANDOM() - 2) * Math.sqrt(rand * -rand + rand);\n  s2 = v3 * v3 + v4 * v4;\n  var d = Math.sqrt((1 - s1) / s2);\n  out[0] = scale * v1;\n  out[1] = scale * v2;\n  out[2] = scale * v3 * d;\n  out[3] = scale * v4 * d;\n  return out;\n}\n\n/**\n * Transforms the vec4 with a mat4.\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the vector to transform\n * @param {ReadonlyMat4} m matrix to transform with\n * @returns {vec4} out\n */\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n    y = a[1],\n    z = a[2],\n    w = a[3];\n  out[0] = m[0] * x + m[4] * y + m[8] * z + m[12] * w;\n  out[1] = m[1] * x + m[5] * y + m[9] * z + m[13] * w;\n  out[2] = m[2] * x + m[6] * y + m[10] * z + m[14] * w;\n  out[3] = m[3] * x + m[7] * y + m[11] * z + m[15] * w;\n  return out;\n}\n\n/**\n * Transforms the vec4 with a quat\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the vector to transform\n * @param {ReadonlyQuat} q normalized quaternion to transform with\n * @returns {vec4} out\n */\nexport function transformQuat(out, a, q) {\n  // Fast Vector Rotation using Quaternions by Robert Eisele\n  // https://raw.org/proof/vector-rotation-using-quaternions/\n\n  var qx = q[0],\n    qy = q[1],\n    qz = q[2],\n    qw = q[3];\n  var vx = a[0],\n    vy = a[1],\n    vz = a[2];\n\n  // t = q x v\n  var tx = qy * vz - qz * vy;\n  var ty = qz * vx - qx * vz;\n  var tz = qx * vy - qy * vx;\n\n  // t = 2t\n  tx = tx + tx;\n  ty = ty + ty;\n  tz = tz + tz;\n\n  // v + w t + q x t\n  out[0] = vx + qw * tx + qy * tz - qz * ty;\n  out[1] = vy + qw * ty + qz * tx - qx * tz;\n  out[2] = vz + qw * tz + qx * ty - qy * tx;\n  out[3] = a[3];\n  return out;\n}\n\n/**\n * Set the components of a vec4 to zero\n *\n * @param {vec4} out the receiving vector\n * @returns {vec4} out\n */\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  return out;\n}\n\n/**\n * Returns a string representation of a vector\n *\n * @param {ReadonlyVec4} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\nexport function str(a) {\n  return \"vec4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \")\";\n}\n\n/**\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyVec4} a The first vector.\n * @param {ReadonlyVec4} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3];\n}\n\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {ReadonlyVec4} a The first vector.\n * @param {ReadonlyVec4} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\nexport function equals(a, b) {\n  var a0 = a[0],\n    a1 = a[1],\n    a2 = a[2],\n    a3 = a[3];\n  var b0 = b[0],\n    b1 = b[1],\n    b2 = b[2],\n    b3 = b[3];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3));\n}\n\n/**\n * Alias for {@link vec4.subtract}\n * @function\n */\nexport var sub = subtract;\n\n/**\n * Alias for {@link vec4.multiply}\n * @function\n */\nexport var mul = multiply;\n\n/**\n * Alias for {@link vec4.divide}\n * @function\n */\nexport var div = divide;\n\n/**\n * Alias for {@link vec4.distance}\n * @function\n */\nexport var dist = distance;\n\n/**\n * Alias for {@link vec4.squaredDistance}\n * @function\n */\nexport var sqrDist = squaredDistance;\n\n/**\n * Alias for {@link vec4.length}\n * @function\n */\nexport var len = length;\n\n/**\n * Alias for {@link vec4.squaredLength}\n * @function\n */\nexport var sqrLen = squaredLength;\n\n/**\n * Perform some operation over an array of vec4s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec4. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec4s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n    if (!stride) {\n      stride = 4;\n    }\n    if (!offset) {\n      offset = 0;\n    }\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      vec[3] = a[i + 3];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n      a[i + 3] = vec[3];\n    }\n    return a;\n  };\n}();", "import * as glMatrix from \"./common.js\";\n\n/**\n * 2 Dimensional Vector\n * @module vec2\n */\n\n/**\n * Creates a new, empty vec2\n *\n * @returns {vec2} a new 2D vector\n */\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(2);\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n  }\n  return out;\n}\n\n/**\n * Creates a new vec2 initialized with values from an existing vector\n *\n * @param {ReadonlyVec2} a vector to clone\n * @returns {vec2} a new 2D vector\n */\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n\n/**\n * Creates a new vec2 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @returns {vec2} a new 2D vector\n */\nexport function fromValues(x, y) {\n  var out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n\n/**\n * Copy the values from one vec2 to another\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the source vector\n * @returns {vec2} out\n */\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n\n/**\n * Set the components of a vec2 to the given values\n *\n * @param {vec2} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @returns {vec2} out\n */\nexport function set(out, x, y) {\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n\n/**\n * Adds two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  return out;\n}\n\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  return out;\n}\n\n/**\n * Multiplies two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  return out;\n}\n\n/**\n * Divides two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  return out;\n}\n\n/**\n * Math.ceil the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to ceil\n * @returns {vec2} out\n */\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  return out;\n}\n\n/**\n * Math.floor the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to floor\n * @returns {vec2} out\n */\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  return out;\n}\n\n/**\n * Returns the minimum of two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  return out;\n}\n\n/**\n * Returns the maximum of two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  return out;\n}\n\n/**\n * symmetric round the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to round\n * @returns {vec2} out\n */\nexport function round(out, a) {\n  out[0] = glMatrix.round(a[0]);\n  out[1] = glMatrix.round(a[1]);\n  return out;\n}\n\n/**\n * Scales a vec2 by a scalar number\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec2} out\n */\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  return out;\n}\n\n/**\n * Adds two vec2's after scaling the second operand by a scalar value\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec2} out\n */\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  return out;\n}\n\n/**\n * Calculates the euclidian distance between two vec2's\n *\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {Number} distance between a and b\n */\nexport function distance(a, b) {\n  var x = b[0] - a[0],\n    y = b[1] - a[1];\n  return Math.sqrt(x * x + y * y);\n}\n\n/**\n * Calculates the squared euclidian distance between two vec2's\n *\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {Number} squared distance between a and b\n */\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0],\n    y = b[1] - a[1];\n  return x * x + y * y;\n}\n\n/**\n * Calculates the length of a vec2\n *\n * @param {ReadonlyVec2} a vector to calculate length of\n * @returns {Number} length of a\n */\nexport function length(a) {\n  var x = a[0],\n    y = a[1];\n  return Math.sqrt(x * x + y * y);\n}\n\n/**\n * Calculates the squared length of a vec2\n *\n * @param {ReadonlyVec2} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\nexport function squaredLength(a) {\n  var x = a[0],\n    y = a[1];\n  return x * x + y * y;\n}\n\n/**\n * Negates the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to negate\n * @returns {vec2} out\n */\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  return out;\n}\n\n/**\n * Returns the inverse of the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to invert\n * @returns {vec2} out\n */\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  return out;\n}\n\n/**\n * Normalize a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to normalize\n * @returns {vec2} out\n */\nexport function normalize(out, a) {\n  var x = a[0],\n    y = a[1];\n  var len = x * x + y * y;\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  return out;\n}\n\n/**\n * Calculates the dot product of two vec2's\n *\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {Number} dot product of a and b\n */\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1];\n}\n\n/**\n * Computes the cross product of two vec2's\n * Note that the cross product must by definition produce a 3D vector\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec3} out\n */\nexport function cross(out, a, b) {\n  var z = a[0] * b[1] - a[1] * b[0];\n  out[0] = out[1] = 0;\n  out[2] = z;\n  return out;\n}\n\n/**\n * Performs a linear interpolation between two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec2} out\n */\nexport function lerp(out, a, b, t) {\n  var ax = a[0],\n    ay = a[1];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  return out;\n}\n\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec2} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If omitted, a unit vector will be returned\n * @returns {vec2} out\n */\nexport function random(out, scale) {\n  scale = scale === undefined ? 1.0 : scale;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  out[0] = Math.cos(r) * scale;\n  out[1] = Math.sin(r) * scale;\n  return out;\n}\n\n/**\n * Transforms the vec2 with a mat2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the vector to transform\n * @param {ReadonlyMat2} m matrix to transform with\n * @returns {vec2} out\n */\nexport function transformMat2(out, a, m) {\n  var x = a[0],\n    y = a[1];\n  out[0] = m[0] * x + m[2] * y;\n  out[1] = m[1] * x + m[3] * y;\n  return out;\n}\n\n/**\n * Transforms the vec2 with a mat2d\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the vector to transform\n * @param {ReadonlyMat2d} m matrix to transform with\n * @returns {vec2} out\n */\nexport function transformMat2d(out, a, m) {\n  var x = a[0],\n    y = a[1];\n  out[0] = m[0] * x + m[2] * y + m[4];\n  out[1] = m[1] * x + m[3] * y + m[5];\n  return out;\n}\n\n/**\n * Transforms the vec2 with a mat3\n * 3rd vector component is implicitly '1'\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the vector to transform\n * @param {ReadonlyMat3} m matrix to transform with\n * @returns {vec2} out\n */\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n    y = a[1];\n  out[0] = m[0] * x + m[3] * y + m[6];\n  out[1] = m[1] * x + m[4] * y + m[7];\n  return out;\n}\n\n/**\n * Transforms the vec2 with a mat4\n * 3rd vector component is implicitly '0'\n * 4th vector component is implicitly '1'\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the vector to transform\n * @param {ReadonlyMat4} m matrix to transform with\n * @returns {vec2} out\n */\nexport function transformMat4(out, a, m) {\n  var x = a[0];\n  var y = a[1];\n  out[0] = m[0] * x + m[4] * y + m[12];\n  out[1] = m[1] * x + m[5] * y + m[13];\n  return out;\n}\n\n/**\n * Rotate a 2D vector\n * @param {vec2} out The receiving vec2\n * @param {ReadonlyVec2} a The vec2 point to rotate\n * @param {ReadonlyVec2} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec2} out\n */\nexport function rotate(out, a, b, rad) {\n  //Translate point to the origin\n  var p0 = a[0] - b[0],\n    p1 = a[1] - b[1],\n    sinC = Math.sin(rad),\n    cosC = Math.cos(rad);\n\n  //perform rotation and translate to correct position\n  out[0] = p0 * cosC - p1 * sinC + b[0];\n  out[1] = p0 * sinC + p1 * cosC + b[1];\n  return out;\n}\n\n/**\n * Get the smallest angle between two 2D vectors\n * @param {ReadonlyVec2} a The first operand\n * @param {ReadonlyVec2} b The second operand\n * @returns {Number} The angle in radians\n */\nexport function angle(a, b) {\n  var ax = a[0],\n    ay = a[1],\n    bx = b[0],\n    by = b[1];\n  return Math.abs(Math.atan2(ay * bx - ax * by, ax * bx + ay * by));\n}\n\n/**\n * Get the signed angle in the interval [-pi,pi] between two 2D vectors (positive if `a` is to the right of `b`)\n * \n * @param {ReadonlyVec2} a The first vector\n * @param {ReadonlyVec2} b The second vector\n * @returns {number} The signed angle in radians\n */\nexport function signedAngle(a, b) {\n  var ax = a[0],\n    ay = a[1],\n    bx = b[0],\n    by = b[1];\n  return Math.atan2(ax * by - ay * bx, ax * bx + ay * by);\n}\n\n/**\n * Set the components of a vec2 to zero\n *\n * @param {vec2} out the receiving vector\n * @returns {vec2} out\n */\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  return out;\n}\n\n/**\n * Returns a string representation of a vector\n *\n * @param {ReadonlyVec2} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\nexport function str(a) {\n  return \"vec2(\" + a[0] + \", \" + a[1] + \")\";\n}\n\n/**\n * Returns whether or not the vectors exactly have the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyVec2} a The first vector.\n * @param {ReadonlyVec2} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1];\n}\n\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {ReadonlyVec2} a The first vector.\n * @param {ReadonlyVec2} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\nexport function equals(a, b) {\n  var a0 = a[0],\n    a1 = a[1];\n  var b0 = b[0],\n    b1 = b[1];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1));\n}\n\n/**\n * Alias for {@link vec2.length}\n * @function\n */\nexport var len = length;\n\n/**\n * Alias for {@link vec2.subtract}\n * @function\n */\nexport var sub = subtract;\n\n/**\n * Alias for {@link vec2.multiply}\n * @function\n */\nexport var mul = multiply;\n\n/**\n * Alias for {@link vec2.divide}\n * @function\n */\nexport var div = divide;\n\n/**\n * Alias for {@link vec2.distance}\n * @function\n */\nexport var dist = distance;\n\n/**\n * Alias for {@link vec2.squaredDistance}\n * @function\n */\nexport var sqrDist = squaredDistance;\n\n/**\n * Alias for {@link vec2.squaredLength}\n * @function\n */\nexport var sqrLen = squaredLength;\n\n/**\n * Perform some operation over an array of vec2s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec2. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec2s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n    if (!stride) {\n      stride = 2;\n    }\n    if (!offset) {\n      offset = 0;\n    }\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n    }\n    return a;\n  };\n}();", "export const paramsParser = {\n  x1: 0,\n  y1: 0,\n  x2: 0,\n  y2: 0,\n  x: 0,\n  y: 0,\n  qx: null,\n  qy: null,\n};\n", "import type { PathArray } from '../types';\n\nexport function fixArc(pathArray: PathArray, allPathCommands: string[], i: number) {\n  if (pathArray[i].length > 7) {\n    pathArray[i].shift();\n    const pi = pathArray[i];\n    // const ni = i + 1;\n    let ni = i;\n    while (pi.length) {\n      // if created multiple C:s, their original seg is saved\n      allPathCommands[i] = 'A';\n      // @ts-ignore\n      pathArray.splice((ni += 1), 0, ['C'].concat(pi.splice(0, 6)));\n    }\n    pathArray.splice(i, 1);\n  }\n}\n", "export const paramsCount = {\n  a: 7,\n  c: 6,\n  h: 1,\n  l: 2,\n  m: 2,\n  r: 4,\n  q: 4,\n  s: 4,\n  t: 2,\n  v: 1,\n  z: 0,\n};\n", "import { paramsCount } from '../parser/params-count';\nimport type { PathArray } from '../types';\n\n/**\n * Iterates an array to check if it's an actual `PathArray`.\n */\nexport function isPathArray(path: string | PathArray): path is PathArray {\n  return (\n    Array.isArray(path) &&\n    path.every((seg) => {\n      const lk = seg[0].toLowerCase();\n      return paramsCount[lk] === seg.length - 1 && 'achlmqstvz'.includes(lk);\n    })\n  );\n}\n", "import type { PathArray, AbsoluteArray } from '../types';\nimport { isPathArray } from './is-path-array';\n\n/**\n * Iterates an array to check if it's a `PathArray`\n * with all absolute values.\n */\nexport function isAbsoluteArray(path: string | PathArray): path is AbsoluteArray {\n  return (\n    isPathArray(path) &&\n    // @ts-ignore -- `isPathArray` also checks if it's `Array`\n    path.every(([x]) => x === x.toUpperCase())\n  );\n}\n", "import type { PathArray } from '../types';\nimport { isAbsoluteArray } from './is-absolute-array';\n\n/**\n * Iterates an array to check if it's a `PathArray`\n * with all segments are in non-shorthand notation\n * with absolute values.\n */\nexport function isNormalizedArray(path: string | PathArray): path is PathArray {\n  return isAbsoluteArray(path) && path.every(([pc]) => 'ACLMQZ'.includes(pc));\n}\n", "import type { PathCommand } from '../types';\nimport { paramsCount } from './params-count';\nimport type { PathParser } from './path-parser';\n\n/**\n * Breaks the parsing of a pathString once a segment is finalized.\n */\nexport function finalizeSegment(path: PathParser) {\n  let pathCommand = path.pathValue[path.segmentStart] as PathCommand;\n  let LK = pathCommand.toLowerCase();\n  const { data } = path;\n\n  while (data.length >= paramsCount[LK]) {\n    // overloaded `moveTo`\n    // https://github.com/rveciana/svg-path-properties/blob/master/src/parse.ts\n    if (LK === 'm' && data.length > 2) {\n      // @ts-ignore\n      path.segments.push([pathCommand].concat(data.splice(0, 2)));\n      LK = 'l';\n      pathCommand = pathCommand === 'm' ? 'l' : 'L';\n    } else {\n      // @ts-ignore\n      path.segments.push([pathCommand].concat(data.splice(0, paramsCount[LK])));\n    }\n\n    if (!paramsCount[LK]) {\n      break;\n    }\n  }\n}\n", "import type { PathParser } from './path-parser';\n\n/**\n * Validates an A (arc-to) specific path command value.\n * Usually a `large-arc-flag` or `sweep-flag`.\n */\nexport function scanFlag(path: PathParser) {\n  const { index, pathValue } = path;\n  const code = pathValue.charCodeAt(index);\n\n  if (code === 0x30 /* 0 */) {\n    path.param = 0;\n    path.index += 1;\n    return;\n  }\n\n  if (code === 0x31 /* 1 */) {\n    path.param = 1;\n    path.index += 1;\n    return;\n  }\n\n  path.err = `[path-util]: invalid Arc flag \"${pathValue[index]}\", expecting 0 or 1 at index ${index}`;\n}\n", "/**\n * Checks if the character is or belongs to a number.\n * [0-9]|+|-|.\n */\nexport function isDigitStart(code: number) {\n  return (\n    (code >= 48 && code <= 57) /* 0..9 */ || code === 0x2b /* + */ || code === 0x2d /* - */ || code === 0x2e\n  ); /* . */\n}\n\nexport function isDigit(code: number) {\n  return code >= 48 && code <= 57; // 0..9\n}\n", "import { isDigit } from './is-digit-start';\nimport type { PathParser } from './path-parser';\n\n/**\n * Validates every character of the path string,\n * every path command, negative numbers or floating point numbers.\n */\nexport function scanParam(path: PathParser) {\n  const { max, pathValue, index: start } = path;\n  let index = start;\n  let zeroFirst = false;\n  let hasCeiling = false;\n  let hasDecimal = false;\n  let hasDot = false;\n  let ch;\n\n  if (index >= max) {\n    // path.err = 'SvgPath: missed param (at pos ' + index + ')';\n    path.err = `[path-util]: Invalid path value at index ${index}, \"pathValue\" is missing param`;\n    return;\n  }\n  ch = pathValue.charCodeAt(index);\n\n  if (ch === 0x2b /* + */ || ch === 0x2d /* - */) {\n    index += 1;\n    // ch = (index < max) ? pathValue.charCodeAt(index) : 0;\n    ch = pathValue.charCodeAt(index);\n  }\n\n  // This logic is shamelessly borrowed from Esprima\n  // https://github.com/ariya/esprimas\n  if (!isDigit(ch) && ch !== 0x2e /* . */) {\n    // path.err = 'SvgPath: param should start with 0..9 or `.` (at pos ' + index + ')';\n    path.err = `[path-util]: Invalid path value at index ${index}, \"${pathValue[index]}\" is not a number`;\n    return;\n  }\n\n  if (ch !== 0x2e /* . */) {\n    zeroFirst = ch === 0x30 /* 0 */;\n    index += 1;\n\n    ch = pathValue.charCodeAt(index);\n\n    if (zeroFirst && index < max) {\n      // decimal number starts with '0' such as '09' is illegal.\n      if (ch && isDigit(ch)) {\n        // path.err = 'SvgPath: numbers started with `0` such as `09`\n        // are illegal (at pos ' + start + ')';\n        path.err = `[path-util]: Invalid path value at index ${start}, \"${pathValue[start]}\" illegal number`;\n        return;\n      }\n    }\n\n    while (index < max && isDigit(pathValue.charCodeAt(index))) {\n      index += 1;\n      hasCeiling = true;\n    }\n\n    ch = pathValue.charCodeAt(index);\n  }\n\n  if (ch === 0x2e /* . */) {\n    hasDot = true;\n    index += 1;\n    while (isDigit(pathValue.charCodeAt(index))) {\n      index += 1;\n      hasDecimal = true;\n    }\n\n    ch = pathValue.charCodeAt(index);\n  }\n\n  if (ch === 0x65 /* e */ || ch === 0x45 /* E */) {\n    if (hasDot && !hasCeiling && !hasDecimal) {\n      path.err = `[path-util]: Invalid path value at index ${index}, \"${pathValue[index]}\" invalid float exponent`;\n      return;\n    }\n\n    index += 1;\n\n    ch = pathValue.charCodeAt(index);\n\n    if (ch === 0x2b /* + */ || ch === 0x2d /* - */) {\n      index += 1;\n    }\n    if (index < max && isDigit(pathValue.charCodeAt(index))) {\n      while (index < max && isDigit(pathValue.charCodeAt(index))) {\n        index += 1;\n      }\n    } else {\n      path.err = `[path-util]: Invalid path value at index ${index}, \"${pathValue[index]}\" invalid integer exponent`;\n      return;\n    }\n  }\n\n  path.index = index;\n  path.param = +path.pathValue.slice(start, index);\n}\n", "/**\n * Checks if the character is a space.\n */\nexport function isSpace(ch: number) {\n  const specialSpaces = [\n    0x1680, 0x180e, 0x2000, 0x2001, 0x2002, 0x2003, 0x2004, 0x2005, 0x2006, 0x2007, 0x2008, 0x2009, 0x200a, 0x202f,\n    0x205f, 0x3000, 0xfeff,\n  ];\n  /* istanbul ignore next */\n  return (\n    ch === 0x0a ||\n    ch === 0x0d ||\n    ch === 0x2028 ||\n    ch === 0x2029 || // Line terminators\n    // White spaces\n    ch === 0x20 ||\n    ch === 0x09 ||\n    ch === 0x0b ||\n    ch === 0x0c ||\n    ch === 0xa0 ||\n    (ch >= 0x1680 && specialSpaces.includes(ch))\n  );\n}\n", "import { isSpace } from './is-space';\nimport type { PathParser } from './path-parser';\n\n/**\n * Points the parser to the next character in the\n * path string every time it encounters any kind of\n * space character.\n */\nexport function skipSpaces(path: PathParser) {\n  const { pathValue, max } = path;\n  while (path.index < max && isSpace(pathValue.charCodeAt(path.index))) {\n    path.index += 1;\n  }\n}\n", "/**\n * Checks if the character is a path command.\n */\nexport function isPathCommand(code: number) {\n  // eslint-disable-next-line no-bitwise -- Impossible to satisfy\n  switch (code | 0x20) {\n    case 0x6d /* m */:\n    case 0x7a /* z */:\n    case 0x6c /* l */:\n    case 0x68 /* h */:\n    case 0x76 /* v */:\n    case 0x63 /* c */:\n    case 0x73 /* s */:\n    case 0x71 /* q */:\n    case 0x74 /* t */:\n    case 0x61 /* a */:\n      // case 0x72/* r */:\n      return true;\n    default:\n      return false;\n  }\n}\n", "/**\n * Checks if the character is an A (arc-to) path command.\n */\nexport function isArcCommand(code: number) {\n  return (code | 0x20) === 0x61;\n}\n", "import { finalizeSegment } from './finalize-segment';\nimport { paramsCount } from './params-count';\nimport { scanFlag } from './scan-flag';\nimport { scanParam } from './scan-param';\nimport { skipSpaces } from './skip-spaces';\nimport { isPathCommand } from './is-path-command';\nimport { isDigitStart } from './is-digit-start';\nimport { isArcCommand } from './is-arc-command';\nimport type { PathParser } from './path-parser';\n\n/**\n * Scans every character in the path string to determine\n * where a segment starts and where it ends.\n */\nexport function scanSegment(path: PathParser) {\n  const { max, pathValue, index } = path;\n  const cmdCode = pathValue.charCodeAt(index);\n  const reqParams = paramsCount[pathValue[index].toLowerCase()];\n\n  path.segmentStart = index;\n\n  if (!isPathCommand(cmdCode)) {\n    path.err = `[path-util]: Invalid path value \"${pathValue[index]}\" is not a path command`;\n    return;\n  }\n\n  path.index += 1;\n  skipSpaces(path);\n\n  path.data = [];\n\n  if (!reqParams) {\n    // Z\n    finalizeSegment(path);\n    return;\n  }\n\n  for (;;) {\n    for (let i = reqParams; i > 0; i -= 1) {\n      if (isArcCommand(cmdCode) && (i === 3 || i === 4)) scanFlag(path);\n      else scanParam(path);\n\n      if (path.err.length) {\n        return;\n      }\n      path.data.push(path.param);\n\n      skipSpaces(path);\n\n      // after ',' param is mandatory\n      if (path.index < max && pathValue.charCodeAt(path.index) === 0x2c /* , */) {\n        path.index += 1;\n        skipSpaces(path);\n      }\n    }\n\n    if (path.index >= path.max) {\n      break;\n    }\n\n    // Stop on next segment\n    if (!isDigitStart(pathValue.charCodeAt(path.index))) {\n      break;\n    }\n  }\n\n  finalizeSegment(path);\n}\n", "import type { PathArray } from '../types';\n\n/**\n * The `PathParser` is used by the `parsePathString` static method\n * to generate a `pathArray`.\n */\nexport class PathParser {\n  pathValue: string;\n\n  segments: PathArray;\n\n  max: number;\n\n  index: number;\n\n  param: number;\n\n  segmentStart: number;\n\n  data: any;\n\n  err: string;\n\n  constructor(pathString: string) {\n    this.pathValue = pathString;\n    // @ts-ignore\n    this.segments = [];\n    this.max = pathString.length;\n    this.index = 0;\n    this.param = 0.0;\n    this.segmentStart = 0;\n    this.data = [];\n    this.err = '';\n  }\n}\n", "import { isPathArray } from '../util/is-path-array';\nimport type { PathArray } from '../types';\nimport { scanSegment } from './scan-segment';\nimport { skipSpaces } from './skip-spaces';\nimport { PathParser } from './path-parser';\n\n/**\n * Parses a path string value and returns an array\n * of segments we like to call `pathArray`.\n */\nexport function parsePathString(pathInput: PathArray | string): PathArray | string {\n  if (isPathArray(pathInput)) {\n    return [].concat(pathInput) as PathArray;\n  }\n\n  const path = new PathParser(pathInput);\n\n  skipSpaces(path);\n\n  while (path.index < path.max && !path.err.length) {\n    scanSegment(path);\n  }\n\n  return path.err ? path.err : path.segments;\n}\n", "import { isAbsoluteArray } from '../util/is-absolute-array';\nimport { parsePathString } from '../parser/parse-path-string';\nimport type { PathArray, AbsoluteArray, AbsoluteSegment } from '../types';\n\n/**\n * Converts a `PathArray` to an `AbsoluteArray`.\n */\nexport function path2Absolute(pathInput: string | PathArray): AbsoluteArray {\n  if (isAbsoluteArray(pathInput)) {\n    return [].concat(pathInput) as AbsoluteArray;\n  }\n\n  const path = parsePathString(pathInput as PathArray) as PathArray;\n\n  // if (!path || !path.length) {\n  //   return [['M', 0, 0]];\n  // }\n  let x = 0;\n  let y = 0;\n  let mx = 0;\n  let my = 0;\n\n  // @ts-ignore\n  return path.map((segment) => {\n    const values = segment.slice(1).map(Number);\n    const [pathCommand] = segment;\n    const absCommand = pathCommand.toUpperCase();\n\n    if (pathCommand === 'M') {\n      [x, y] = values;\n      mx = x;\n      my = y;\n      return ['M', x, y];\n    }\n    let absoluteSegment: AbsoluteSegment;\n\n    if (pathCommand !== absCommand) {\n      switch (absCommand) {\n        case 'A':\n          absoluteSegment = [\n            absCommand,\n            values[0],\n            values[1],\n            values[2],\n            values[3],\n            values[4],\n            values[5] + x,\n            values[6] + y,\n          ];\n          break;\n        case 'V':\n          absoluteSegment = [absCommand, values[0] + y];\n          break;\n        case 'H':\n          absoluteSegment = [absCommand, values[0] + x];\n          break;\n        default: {\n          // use brakets for `eslint: no-case-declaration`\n          // https://stackoverflow.com/a/50753272/803358\n          const absValues = values.map((n, j) => n + (j % 2 ? y : x));\n          // for n, l, c, s, q, t\n          // @ts-ignore\n          absoluteSegment = [absCommand].concat(absValues) as AbsoluteSegment;\n        }\n      }\n    } else {\n      // @ts-ignore\n      absoluteSegment = [absCommand].concat(values) as AbsoluteSegment;\n    }\n\n    const segLength = absoluteSegment.length;\n    switch (absCommand) {\n      case 'Z':\n        x = mx;\n        y = my;\n        break;\n      case 'H':\n        [, x] = absoluteSegment;\n        break;\n      case 'V':\n        [, y] = absoluteSegment;\n        break;\n      default:\n        x = absoluteSegment[segLength - 2] as number;\n        y = absoluteSegment[segLength - 1] as number;\n\n        if (absCommand === 'M') {\n          mx = x;\n          my = y;\n        }\n    }\n    return absoluteSegment;\n  });\n}\n", "import type { PathSegment, NormalSegment, CSegment, QSegment } from '../types';\n\n/**\n * Normalizes a single segment of a `PathArray` object.\n * eg. H/V -> L, T -> Q\n */\nexport function normalizeSegment(segment: PathSegment, params: any): NormalSegment {\n  const [pathCommand] = segment;\n  const { x1: px1, y1: py1, x2: px2, y2: py2 } = params;\n  const values = segment.slice(1).map(Number);\n  let result = segment;\n\n  if (!'TQ'.includes(pathCommand)) {\n    // optional but good to be cautious\n    params.qx = null;\n    params.qy = null;\n  }\n\n  if (pathCommand === 'H') {\n    result = ['L', segment[1], py1];\n  } else if (pathCommand === 'V') {\n    result = ['L', px1, segment[1]];\n  } else if (pathCommand === 'S') {\n    const x1 = px1 * 2 - px2;\n    const y1 = py1 * 2 - py2;\n    params.x1 = x1;\n    params.y1 = y1;\n    result = ['C', x1, y1].concat(values) as CSegment;\n  } else if (pathCommand === 'T') {\n    const qx = px1 * 2 - params.qx;\n    const qy = py1 * 2 - params.qy;\n    params.qx = qx;\n    params.qy = qy;\n    result = ['Q', qx, qy].concat(values) as QSegment;\n  } else if (pathCommand === 'Q') {\n    const [nqx, nqy] = values;\n    params.qx = nqx;\n    params.qy = nqy;\n  }\n\n  return result as NormalSegment;\n}\n", "import { isNormalizedArray } from '../util/is-normalized-array';\nimport { paramsParser } from '../parser/params-parser';\nimport { path2Absolute } from '../convert/path-2-absolute';\nimport type { PathArray, NormalArray } from '../types';\nimport { normalizeSegment } from './normalize-segment';\n\n/**\n * @example\n * const path = 'M0 0 H50';\n * const normalizedPath = SVGPathCommander.normalizePath(path);\n * // result => [['M', 0, 0], ['L', 50, 0]]\n */\nexport function normalizePath(pathInput: string | PathArray): NormalArray {\n  if (isNormalizedArray(pathInput)) {\n    return [].concat(pathInput) as NormalArray;\n  }\n\n  const path = path2Absolute(pathInput);\n  const params = { ...paramsParser };\n\n  for (let i = 0; i < path.length; i += 1) {\n    // Save current path command\n    path[i] = normalizeSegment(path[i], params);\n\n    const segment = path[i];\n    const seglen = segment.length;\n\n    params.x1 = +segment[seglen - 2];\n    params.y1 = +segment[seglen - 1];\n    params.x2 = +segment[seglen - 4] || params.x1;\n    params.y2 = +segment[seglen - 3] || params.y1;\n  }\n\n  return path as NormalArray;\n}\n", "import type { PathArray } from '../types';\nimport { isNormalizedArray } from './is-normalized-array';\n\n/**\n * Iterates an array to check if it's a `PathArray`\n * with all C (cubic bezier) segments.\n *\n * @param {string | PathArray} path the `Array` to be checked\n * @returns {boolean} iteration result\n */\nexport function isCurveArray(path: string | PathArray): path is PathArray {\n  return isNormalizedArray(path) && (path as PathArray).every(([pc]) => 'MC'.includes(pc));\n}\n", "export function rotateVector(x: number, y: number, rad: number) {\n  const X = x * Math.cos(rad) - y * Math.sin(rad);\n  const Y = x * Math.sin(rad) + y * Math.cos(rad);\n  return { x: X, y: Y };\n}\n", "import { rotateVector } from '../util/rotate-vector';\n\n/**\n * Converts A (arc-to) segments to C (cubic-bezier-to).\n *\n * For more information of where this math came from visit:\n * http://www.w3.org/TR/SVG11/implnote.html#ArcImplementationNotes\n */\nexport function arcToCubic(\n  X1: number,\n  Y1: number,\n  RX: number,\n  RY: number,\n  angle: number,\n  LAF: number,\n  SF: number,\n  X2: number,\n  Y2: number,\n  recursive: number[],\n) {\n  let x1 = X1;\n  let y1 = Y1;\n  let rx = RX;\n  let ry = RY;\n  let x2 = X2;\n  let y2 = Y2;\n  // for more information of where this Math came from visit:\n  // http://www.w3.org/TR/SVG11/implnote.html#ArcImplementationNotes\n  const d120 = (Math.PI * 120) / 180;\n\n  const rad = (Math.PI / 180) * (+angle || 0);\n  /** @type {number[]} */\n  let res = [];\n  let xy;\n  let f1;\n  let f2;\n  let cx;\n  let cy;\n\n  if (!recursive) {\n    xy = rotateVector(x1, y1, -rad);\n    x1 = xy.x;\n    y1 = xy.y;\n    xy = rotateVector(x2, y2, -rad);\n    x2 = xy.x;\n    y2 = xy.y;\n\n    const x = (x1 - x2) / 2;\n    const y = (y1 - y2) / 2;\n    let h = (x * x) / (rx * rx) + (y * y) / (ry * ry);\n    if (h > 1) {\n      h = Math.sqrt(h);\n      rx *= h;\n      ry *= h;\n    }\n    const rx2 = rx * rx;\n    const ry2 = ry * ry;\n\n    const k =\n      (LAF === SF ? -1 : 1) *\n      Math.sqrt(Math.abs((rx2 * ry2 - rx2 * y * y - ry2 * x * x) / (rx2 * y * y + ry2 * x * x)));\n\n    cx = (k * rx * y) / ry + (x1 + x2) / 2;\n    cy = (k * -ry * x) / rx + (y1 + y2) / 2;\n    // eslint-disable-next-line no-bitwise -- Impossible to satisfy no-bitwise\n    f1 = Math.asin(((((y1 - cy) / ry) * 10 ** 9) >> 0) / 10 ** 9);\n    // eslint-disable-next-line no-bitwise -- Impossible to satisfy no-bitwise\n    f2 = Math.asin(((((y2 - cy) / ry) * 10 ** 9) >> 0) / 10 ** 9);\n\n    f1 = x1 < cx ? Math.PI - f1 : f1;\n    f2 = x2 < cx ? Math.PI - f2 : f2;\n    if (f1 < 0) f1 = Math.PI * 2 + f1;\n    if (f2 < 0) f2 = Math.PI * 2 + f2;\n    if (SF && f1 > f2) {\n      f1 -= Math.PI * 2;\n    }\n    if (!SF && f2 > f1) {\n      f2 -= Math.PI * 2;\n    }\n  } else {\n    [f1, f2, cx, cy] = recursive;\n  }\n  let df = f2 - f1;\n  if (Math.abs(df) > d120) {\n    const f2old = f2;\n    const x2old = x2;\n    const y2old = y2;\n    f2 = f1 + d120 * (SF && f2 > f1 ? 1 : -1);\n    x2 = cx + rx * Math.cos(f2);\n    y2 = cy + ry * Math.sin(f2);\n    res = arcToCubic(x2, y2, rx, ry, angle, 0, SF, x2old, y2old, [f2, f2old, cx, cy]);\n  }\n  df = f2 - f1;\n  const c1 = Math.cos(f1);\n  const s1 = Math.sin(f1);\n  const c2 = Math.cos(f2);\n  const s2 = Math.sin(f2);\n  const t = Math.tan(df / 4);\n  const hx = (4 / 3) * rx * t;\n  const hy = (4 / 3) * ry * t;\n  const m1 = [x1, y1];\n  const m2 = [x1 + hx * s1, y1 - hy * c1];\n  const m3 = [x2 + hx * s2, y2 - hy * c2];\n  const m4 = [x2, y2];\n  m2[0] = 2 * m1[0] - m2[0];\n  m2[1] = 2 * m1[1] - m2[1];\n  if (recursive) {\n    return m2.concat(m3, m4, res);\n    // return [...m2, ...m3, ...m4, ...res];\n  }\n\n  res = m2.concat(m3, m4, res);\n  // res = [...m2, ...m3, ...m4, ...res];\n  const newres = [];\n  for (let i = 0, ii = res.length; i < ii; i += 1) {\n    newres[i] = i % 2 ? rotateVector(res[i - 1], res[i], rad).y : rotateVector(res[i], res[i + 1], rad).x;\n  }\n  return newres;\n}\n\n// const TAU = Math.PI * 2;\n\n// const mapToEllipse = (\n//   { x, y }: { x: number; y: number },\n//   rx: number,\n//   ry: number,\n//   cosphi: number,\n//   sinphi: number,\n//   centerx: number,\n//   centery: number,\n// ) => {\n//   x *= rx;\n//   y *= ry;\n\n//   const xp = cosphi * x - sinphi * y;\n//   const yp = sinphi * x + cosphi * y;\n\n//   return {\n//     x: xp + centerx,\n//     y: yp + centery,\n//   };\n// };\n\n// const approxUnitArc = (ang1: number, ang2: number) => {\n//   // If 90 degree circular arc, use a constant\n//   // as derived from http://spencermortensen.com/articles/bezier-circle\n//   const a =\n//     ang2 === 1.5707963267948966\n//       ? 0.551915024494\n//       : ang2 === -1.5707963267948966\n//       ? -0.551915024494\n//       : (4 / 3) * Math.tan(ang2 / 4);\n\n//   const x1 = Math.cos(ang1);\n//   const y1 = Math.sin(ang1);\n//   const x2 = Math.cos(ang1 + ang2);\n//   const y2 = Math.sin(ang1 + ang2);\n\n//   return [\n//     {\n//       x: x1 - y1 * a,\n//       y: y1 + x1 * a,\n//     },\n//     {\n//       x: x2 + y2 * a,\n//       y: y2 - x2 * a,\n//     },\n//     {\n//       x: x2,\n//       y: y2,\n//     },\n//   ];\n// };\n\n// const vectorAngle = (ux: number, uy: number, vx: number, vy: number) => {\n//   const sign = ux * vy - uy * vx < 0 ? -1 : 1;\n\n//   let dot = ux * vx + uy * vy;\n\n//   if (dot > 1) {\n//     dot = 1;\n//   }\n\n//   if (dot < -1) {\n//     dot = -1;\n//   }\n\n//   return sign * Math.acos(dot);\n// };\n\n// const getArcCenter = (\n//   px: any,\n//   py: any,\n//   cx: any,\n//   cy: any,\n//   rx: number,\n//   ry: number,\n//   largeArcFlag: number,\n//   sweepFlag: number,\n//   sinphi: number,\n//   cosphi: number,\n//   pxp: number,\n//   pyp: number,\n// ) => {\n//   const rxsq = Math.pow(rx, 2);\n//   const rysq = Math.pow(ry, 2);\n//   const pxpsq = Math.pow(pxp, 2);\n//   const pypsq = Math.pow(pyp, 2);\n\n//   let radicant = rxsq * rysq - rxsq * pypsq - rysq * pxpsq;\n\n//   if (radicant < 0) {\n//     radicant = 0;\n//   }\n\n//   radicant /= rxsq * pypsq + rysq * pxpsq;\n//   radicant = Math.sqrt(radicant) * (largeArcFlag === sweepFlag ? -1 : 1);\n\n//   const centerxp = ((radicant * rx) / ry) * pyp;\n//   const centeryp = ((radicant * -ry) / rx) * pxp;\n\n//   const centerx = cosphi * centerxp - sinphi * centeryp + (px + cx) / 2;\n//   const centery = sinphi * centerxp + cosphi * centeryp + (py + cy) / 2;\n\n//   const vx1 = (pxp - centerxp) / rx;\n//   const vy1 = (pyp - centeryp) / ry;\n//   const vx2 = (-pxp - centerxp) / rx;\n//   const vy2 = (-pyp - centeryp) / ry;\n\n//   const ang1 = vectorAngle(1, 0, vx1, vy1);\n//   let ang2 = vectorAngle(vx1, vy1, vx2, vy2);\n\n//   if (sweepFlag === 0 && ang2 > 0) {\n//     ang2 -= TAU;\n//   }\n\n//   if (sweepFlag === 1 && ang2 < 0) {\n//     ang2 += TAU;\n//   }\n\n//   return [centerx, centery, ang1, ang2];\n// };\n\n// const arcToBezier = ({ px, py, cx, cy, rx, ry, xAxisRotation = 0, largeArcFlag = 0, sweepFlag = 0 }) => {\n//   const curves = [];\n\n//   if (rx === 0 || ry === 0) {\n//     return [{ x1: 0, y1: 0, x2: 0, y2: 0, x: cx, y: cy }];\n//   }\n\n//   const sinphi = Math.sin((xAxisRotation * TAU) / 360);\n//   const cosphi = Math.cos((xAxisRotation * TAU) / 360);\n\n//   const pxp = (cosphi * (px - cx)) / 2 + (sinphi * (py - cy)) / 2;\n//   const pyp = (-sinphi * (px - cx)) / 2 + (cosphi * (py - cy)) / 2;\n\n//   if (pxp === 0 && pyp === 0) {\n//     return [{ x1: 0, y1: 0, x2: 0, y2: 0, x: cx, y: cy }];\n//   }\n\n//   rx = Math.abs(rx);\n//   ry = Math.abs(ry);\n\n//   const lambda = Math.pow(pxp, 2) / Math.pow(rx, 2) + Math.pow(pyp, 2) / Math.pow(ry, 2);\n\n//   if (lambda > 1) {\n//     rx *= Math.sqrt(lambda);\n//     ry *= Math.sqrt(lambda);\n//   }\n\n//   let [centerx, centery, ang1, ang2] = getArcCenter(\n//     px,\n//     py,\n//     cx,\n//     cy,\n//     rx,\n//     ry,\n//     largeArcFlag,\n//     sweepFlag,\n//     sinphi,\n//     cosphi,\n//     pxp,\n//     pyp,\n//   );\n\n//   // If 'ang2' == 90.0000000001, then `ratio` will evaluate to\n//   // 1.0000000001. This causes `segments` to be greater than one, which is an\n//   // unecessary split, and adds extra points to the bezier curve. To alleviate\n//   // this issue, we round to 1.0 when the ratio is close to 1.0.\n//   let ratio = Math.abs(ang2) / (TAU / 4);\n//   if (Math.abs(1.0 - ratio) < 0.0000001) {\n//     ratio = 1.0;\n//   }\n\n//   const segments = Math.max(Math.ceil(ratio), 1);\n\n//   ang2 /= segments;\n\n//   for (let i = 0; i < segments; i++) {\n//     curves.push(approxUnitArc(ang1, ang2));\n//     ang1 += ang2;\n//   }\n\n//   return curves.map((curve) => {\n//     const { x: x1, y: y1 } = mapToEllipse(curve[0], rx, ry, cosphi, sinphi, centerx, centery);\n//     const { x: x2, y: y2 } = mapToEllipse(curve[1], rx, ry, cosphi, sinphi, centerx, centery);\n//     const { x, y } = mapToEllipse(curve[2], rx, ry, cosphi, sinphi, centerx, centery);\n\n//     return { x1, y1, x2, y2, x, y };\n//   });\n// };\n\n// export function arcToCubic(\n//   x1: number,\n//   y1: number,\n//   rx: number,\n//   ry: number,\n//   angle: number,\n//   LAF: number,\n//   SF: number,\n//   x2: number,\n//   y2: number,\n// ) {\n//   const curves = arcToBezier({\n//     px: x1,\n//     py: y1,\n//     cx: x2,\n//     cy: y2,\n//     rx,\n//     ry,\n//     xAxisRotation: angle,\n//     largeArcFlag: LAF,\n//     sweepFlag: SF,\n//   });\n\n//   return curves.reduce((prev, cur) => {\n//     const { x1, y1, x2, y2, x, y } = cur;\n//     prev.push(x1, y1, x2, y2, x, y);\n//     return prev;\n//   }, [] as number[]);\n// }\n", "export function quadToCubic(x1: number, y1: number, qx: number, qy: number, x2: number, y2: number) {\n  const r13 = 1 / 3;\n  const r23 = 2 / 3;\n  return [\n    r13 * x1 + r23 * qx, // cpx1\n    r13 * y1 + r23 * qy, // cpy1\n    r13 * x2 + r23 * qx, // cpx2\n    r13 * y2 + r23 * qy, // cpy2\n    x2,\n    y2, // x,y\n  ];\n}\n", "export function midPoint(a: number[], b: number[], t: number) {\n  const ax = a[0];\n  const ay = a[1];\n  const bx = b[0];\n  const by = b[1];\n  return [ax + (bx - ax) * t, ay + (by - ay) * t];\n}\n", "import { midPoint } from '../util/mid-point';\n\nexport const lineToCubic = (x1: number, y1: number, x2: number, y2: number) => {\n  const t = 0.5;\n  const mid = midPoint([x1, y1], [x2, y2], t);\n  return [...mid, x2, y2, x2, y2];\n};\n", "import type { PathSegment, ParserParams, CSegment, MSegment, CubicSegment } from '../types';\nimport { arcToCubic } from './arc-2-cubic';\nimport { quadToCubic } from './quad-2-cubic';\nimport { lineToCubic } from './line-2-cubic';\n\nexport function segmentToCubic(segment: PathSegment, params: ParserParams): CSegment | MSegment {\n  const [pathCommand] = segment;\n  const values = segment.slice(1).map(Number);\n  const [x, y] = values;\n  let args: any[];\n  const { x1: px1, y1: py1, x: px, y: py } = params;\n\n  if (!'TQ'.includes(pathCommand)) {\n    params.qx = null;\n    params.qy = null;\n  }\n\n  switch (pathCommand) {\n    case 'M':\n      params.x = x;\n      params.y = y;\n      return segment;\n    case 'A':\n      args = [px1, py1].concat(values);\n      // @ts-ignore\n      return ['C'].concat(\n        arcToCubic(args[0], args[1], args[2], args[3], args[4], args[5], args[6], args[7], args[8], args[9]),\n      ) as CubicSegment;\n    case 'Q':\n      params.qx = x;\n      params.qy = y;\n      args = [px1, py1].concat(values);\n      // @ts-ignore\n      return ['C'].concat(quadToCubic(args[0], args[1], args[2], args[3], args[4], args[5])) as CubicSegment;\n    case 'L':\n      // @ts-ignore\n      return ['C'].concat(lineToCubic(px1, py1, x, y)) as CSegment;\n    case 'Z':\n      // prevent NaN from divide 0\n      if (px1 === px && py1 === py) {\n        return ['C', px1, py1, px, py, px, py];\n      }\n\n      // @ts-ignore\n      return ['C'].concat(lineToCubic(px1, py1, px, py)) as CSegment;\n    default:\n  }\n  return segment as CSegment;\n}\n", "import { paramsParser } from '../parser/params-parser';\nimport { fixArc } from '../process/fix-arc';\nimport { normalizePath } from '../process/normalize-path';\nimport { isCurveArray } from '../util/is-curve-array';\nimport { segmentToCubic } from '../process/segment-2-cubic';\nimport type { CurveArray, PathArray } from '../types';\n// import { fixPath } from '../process/fix-path';\n\nexport function path2Curve(\n  pathInput: string | PathArray,\n  needZCommandIndexes = false,\n): CurveArray | [CurveArray, number[]] {\n  if (isCurveArray(pathInput)) {\n    const cloned = [].concat(pathInput) as CurveArray;\n    if (needZCommandIndexes) {\n      return [cloned, []];\n    } else {\n      return cloned;\n    }\n  }\n\n  // fixPath will remove 'Z' command\n  // const path = fixPath(normalizePath(pathInput));\n  const path = normalizePath(pathInput) as CurveArray;\n\n  const params = { ...paramsParser };\n  const allPathCommands = [];\n  let pathCommand = '';\n  let ii = path.length;\n  let segment: any;\n  let seglen: number;\n  const zCommandIndexes: number[] = [];\n\n  for (let i = 0; i < ii; i += 1) {\n    if (path[i]) [pathCommand] = path[i];\n\n    allPathCommands[i] = pathCommand;\n    const curveSegment = segmentToCubic(path[i], params);\n\n    path[i] = curveSegment;\n\n    fixArc(path, allPathCommands, i);\n    ii = path.length; // solves curveArrays ending in Z\n\n    // keep Z command account for lineJoin\n    // @see https://github.com/antvis/util/issues/68\n    if (pathCommand === 'Z') {\n      zCommandIndexes.push(i);\n    }\n\n    segment = path[i];\n    seglen = segment.length;\n\n    params.x1 = +segment[seglen - 2];\n    params.y1 = +segment[seglen - 1];\n    params.x2 = +segment[seglen - 4] || params.x1;\n    params.y2 = +segment[seglen - 3] || params.y1;\n  }\n\n  // validate\n\n  if (needZCommandIndexes) {\n    return [path, zCommandIndexes];\n  } else {\n    return path;\n  }\n}\n", "import type { PathArray, PathSegment } from '../types';\n\nexport function clonePath(path: PathArray | PathSegment): PathArray {\n  return path.map((x) => (Array.isArray(x) ? [].concat(x) : x)) as PathArray;\n}\n", "import type { CurveArray } from '../types';\n\n// reverse CURVE based pathArray segments only\nexport function reverseCurve(pathArray: CurveArray): CurveArray {\n  const rotatedCurve: any = pathArray\n    .slice(1)\n    .map((x, i, curveOnly) =>\n      // @ts-ignore\n      !i ? pathArray[0].slice(1).concat(x.slice(1)) : curveOnly[i - 1].slice(-2).concat(x.slice(1)),\n    )\n    // @ts-ignore\n    .map((x) => x.map((y, i) => x[x.length - i - 2 * (1 - (i % 2))]))\n    .reverse();\n\n  return [['M'].concat(rotatedCurve[0].slice(0, 2))].concat(\n    rotatedCurve.map((x) => ['C'].concat(x.slice(2))),\n  ) as CurveArray;\n}\n", "export function distanceSquareRoot(a: [number, number], b: [number, number]) {\n  return Math.sqrt((a[0] - b[0]) * (a[0] - b[0]) + (a[1] - b[1]) * (a[1] - b[1]));\n}\n", "import type { LengthFactory } from '../types';\nimport { midPoint } from './mid-point';\nimport { distanceSquareRoot } from './distance-square-root';\n\n/**\n * Returns a {x,y} point at a given length, the total length and\n * the minimum and maximum {x,y} coordinates of a line (L,V,H,Z) segment.\n */\nexport function segmentLineFactory(x1: number, y1: number, x2: number, y2: number, distance: number): LengthFactory {\n  const length = distanceSquareRoot([x1, y1], [x2, y2]);\n  let point = { x: 0, y: 0 };\n\n  if (typeof distance === 'number') {\n    if (distance <= 0) {\n      point = { x: x1, y: y1 };\n    } else if (distance >= length) {\n      point = { x: x2, y: y2 };\n    } else {\n      const [x, y] = midPoint([x1, y1], [x2, y2], distance / length);\n      point = { x, y };\n    }\n  }\n\n  return {\n    length,\n    point,\n    min: {\n      x: Math.min(x1, x2),\n      y: Math.min(y1, y2),\n    },\n    max: {\n      x: Math.max(x1, x2),\n      y: Math.max(y1, y2),\n    },\n  };\n}\n", "import type { Point, LengthFactory, PathLengthFactoryOptions } from '../types';\nimport { segmentLineFactory } from './segment-line-factory';\nimport { distanceSquareRoot } from './distance-square-root';\n\nfunction angleBetween(v0: Point, v1: Point) {\n  const { x: v0x, y: v0y } = v0;\n  const { x: v1x, y: v1y } = v1;\n  const p = v0x * v1x + v0y * v1y;\n  const n = Math.sqrt((v0x ** 2 + v0y ** 2) * (v1x ** 2 + v1y ** 2));\n  const sign = v0x * v1y - v0y * v1x < 0 ? -1 : 1;\n  const angle = sign * Math.acos(p / n);\n\n  return angle;\n}\n\n/**\n * Returns a {x,y} point at a given length, the total length and\n * the minimum and maximum {x,y} coordinates of a C (cubic-bezier) segment.\n * @see https://github.com/MadLittleMods/svg-curve-lib/blob/master/src/js/svg-curve-lib.js\n */\nfunction getPointAtArcSegmentLength(\n  x1: number,\n  y1: number,\n  RX: number,\n  RY: number,\n  angle: number,\n  LAF: number,\n  SF: number,\n  x: number,\n  y: number,\n  t: number,\n) {\n  const { abs, sin, cos, sqrt, PI } = Math;\n  let rx = abs(RX);\n  let ry = abs(RY);\n  const xRot = ((angle % 360) + 360) % 360;\n  const xRotRad = xRot * (PI / 180);\n\n  if (x1 === x && y1 === y) {\n    return { x: x1, y: y1 };\n  }\n\n  if (rx === 0 || ry === 0) {\n    return segmentLineFactory(x1, y1, x, y, t).point;\n  }\n\n  const dx = (x1 - x) / 2;\n  const dy = (y1 - y) / 2;\n\n  const transformedPoint = {\n    x: cos(xRotRad) * dx + sin(xRotRad) * dy,\n    y: -sin(xRotRad) * dx + cos(xRotRad) * dy,\n  };\n\n  const radiiCheck = transformedPoint.x ** 2 / rx ** 2 + transformedPoint.y ** 2 / ry ** 2;\n\n  if (radiiCheck > 1) {\n    rx *= sqrt(radiiCheck);\n    ry *= sqrt(radiiCheck);\n  }\n\n  const cSquareNumerator = rx ** 2 * ry ** 2 - rx ** 2 * transformedPoint.y ** 2 - ry ** 2 * transformedPoint.x ** 2;\n\n  const cSquareRootDenom = rx ** 2 * transformedPoint.y ** 2 + ry ** 2 * transformedPoint.x ** 2;\n\n  let cRadicand = cSquareNumerator / cSquareRootDenom;\n  cRadicand = cRadicand < 0 ? 0 : cRadicand;\n  const cCoef = (LAF !== SF ? 1 : -1) * sqrt(cRadicand);\n  const transformedCenter = {\n    x: cCoef * ((rx * transformedPoint.y) / ry),\n    y: cCoef * (-(ry * transformedPoint.x) / rx),\n  };\n\n  const center = {\n    x: cos(xRotRad) * transformedCenter.x - sin(xRotRad) * transformedCenter.y + (x1 + x) / 2,\n    y: sin(xRotRad) * transformedCenter.x + cos(xRotRad) * transformedCenter.y + (y1 + y) / 2,\n  };\n\n  const startVector = {\n    x: (transformedPoint.x - transformedCenter.x) / rx,\n    y: (transformedPoint.y - transformedCenter.y) / ry,\n  };\n\n  const startAngle = angleBetween({ x: 1, y: 0 }, startVector);\n\n  const endVector = {\n    x: (-transformedPoint.x - transformedCenter.x) / rx,\n    y: (-transformedPoint.y - transformedCenter.y) / ry,\n  };\n\n  let sweepAngle = angleBetween(startVector, endVector);\n  if (!SF && sweepAngle > 0) {\n    sweepAngle -= 2 * PI;\n  } else if (SF && sweepAngle < 0) {\n    sweepAngle += 2 * PI;\n  }\n  sweepAngle %= 2 * PI;\n\n  const alpha = startAngle + sweepAngle * t;\n  const ellipseComponentX = rx * cos(alpha);\n  const ellipseComponentY = ry * sin(alpha);\n\n  const point = {\n    x: cos(xRotRad) * ellipseComponentX - sin(xRotRad) * ellipseComponentY + center.x,\n    y: sin(xRotRad) * ellipseComponentX + cos(xRotRad) * ellipseComponentY + center.y,\n  };\n\n  // to be used later\n  // point.ellipticalArcStartAngle = startAngle;\n  // point.ellipticalArcEndAngle = startAngle + sweepAngle;\n  // point.ellipticalArcAngle = alpha;\n\n  // point.ellipticalArcCenter = center;\n  // point.resultantRx = rx;\n  // point.resultantRy = ry;\n\n  return point;\n}\n\n/**\n * Returns a {x,y} point at a given length, the total length and\n * the shape minimum and maximum {x,y} coordinates of an A (arc-to) segment.\n *\n * For better performance, it can skip calculate bbox or length in some scenario.\n */\nexport function segmentArcFactory(\n  X1: number,\n  Y1: number,\n  RX: number,\n  RY: number,\n  angle: number,\n  LAF: number,\n  SF: number,\n  X2: number,\n  Y2: number,\n  distance: number,\n  options: Partial<PathLengthFactoryOptions>,\n): LengthFactory {\n  const { bbox = true, length = true, sampleSize = 30 } = options;\n  const distanceIsNumber = typeof distance === 'number';\n  let x = X1;\n  let y = Y1;\n  let LENGTH = 0;\n  let prev = [x, y, LENGTH];\n  let cur: [number, number] = [x, y];\n  let t = 0;\n  let POINT = { x: 0, y: 0 };\n  const POINTS = [{ x, y }];\n\n  if (distanceIsNumber && distance <= 0) {\n    POINT = { x, y };\n  }\n\n  // bad perf when size > 100\n  for (let j = 0; j <= sampleSize; j += 1) {\n    t = j / sampleSize;\n\n    ({ x, y } = getPointAtArcSegmentLength(X1, Y1, RX, RY, angle, LAF, SF, X2, Y2, t));\n\n    if (bbox) {\n      POINTS.push({ x, y });\n    }\n\n    if (length) {\n      LENGTH += distanceSquareRoot(cur, [x, y]);\n    }\n    cur = [x, y];\n\n    if (distanceIsNumber && LENGTH >= distance && distance > prev[2]) {\n      const dv = (LENGTH - distance) / (LENGTH - prev[2]);\n\n      POINT = {\n        x: cur[0] * (1 - dv) + prev[0] * dv,\n        y: cur[1] * (1 - dv) + prev[1] * dv,\n      };\n    }\n    prev = [x, y, LENGTH];\n  }\n\n  if (distanceIsNumber && distance >= LENGTH) {\n    POINT = { x: X2, y: Y2 };\n  }\n\n  return {\n    length: LENGTH,\n    point: POINT,\n    min: {\n      x: Math.min.apply(\n        null,\n        POINTS.map((n) => n.x),\n      ),\n      y: Math.min.apply(\n        null,\n        POINTS.map((n) => n.y),\n      ),\n    },\n    max: {\n      x: Math.max.apply(\n        null,\n        POINTS.map((n) => n.x),\n      ),\n      y: Math.max.apply(\n        null,\n        POINTS.map((n) => n.y),\n      ),\n    },\n  };\n}\n", "import type { LengthFactory, PathLengthFactoryOptions } from '../types';\nimport { distanceSquareRoot } from './distance-square-root';\n\n/**\n * Returns a {x,y} point at a given length, the total length and\n * the minimum and maximum {x,y} coordinates of a C (cubic-bezier) segment.\n */\nfunction getPointAtCubicSegmentLength(\n  x1: number,\n  y1: number,\n  c1x: number,\n  c1y: number,\n  c2x: number,\n  c2y: number,\n  x2: number,\n  y2: number,\n  t: number,\n) {\n  const t1 = 1 - t;\n  return {\n    x: t1 ** 3 * x1 + 3 * t1 ** 2 * t * c1x + 3 * t1 * t ** 2 * c2x + t ** 3 * x2,\n    y: t1 ** 3 * y1 + 3 * t1 ** 2 * t * c1y + 3 * t1 * t ** 2 * c2y + t ** 3 * y2,\n  };\n}\n\n/**\n * Returns the length of a C (cubic-bezier) segment\n * or an {x,y} point at a given length.\n */\nexport function segmentCubicFactory(\n  x1: number,\n  y1: number,\n  c1x: number,\n  c1y: number,\n  c2x: number,\n  c2y: number,\n  x2: number,\n  y2: number,\n  distance: number,\n  options: Partial<PathLengthFactoryOptions>,\n): LengthFactory {\n  const { bbox = true, length = true, sampleSize = 10 } = options;\n  const distanceIsNumber = typeof distance === 'number';\n  let x = x1;\n  let y = y1;\n  let LENGTH = 0;\n  let prev = [x, y, LENGTH];\n  let cur: [number, number] = [x, y];\n  let t = 0;\n  let POINT = { x: 0, y: 0 };\n  const POINTS = [{ x, y }];\n\n  if (distanceIsNumber && distance <= 0) {\n    POINT = { x, y };\n  }\n\n  // bad perf when size = 300\n  for (let j = 0; j <= sampleSize; j += 1) {\n    t = j / sampleSize;\n\n    ({ x, y } = getPointAtCubicSegmentLength(x1, y1, c1x, c1y, c2x, c2y, x2, y2, t));\n\n    if (bbox) {\n      POINTS.push({ x, y });\n    }\n\n    if (length) {\n      LENGTH += distanceSquareRoot(cur, [x, y]);\n    }\n    cur = [x, y];\n\n    if (distanceIsNumber && LENGTH >= distance && distance > prev[2]) {\n      const dv = (LENGTH - distance) / (LENGTH - prev[2]);\n\n      POINT = {\n        x: cur[0] * (1 - dv) + prev[0] * dv,\n        y: cur[1] * (1 - dv) + prev[1] * dv,\n      };\n    }\n    prev = [x, y, LENGTH];\n  }\n\n  if (distanceIsNumber && distance >= LENGTH) {\n    POINT = { x: x2, y: y2 };\n  }\n\n  return {\n    length: LENGTH,\n    point: POINT,\n    min: {\n      x: Math.min.apply(\n        null,\n        POINTS.map((n) => n.x),\n      ),\n      y: Math.min.apply(\n        null,\n        POINTS.map((n) => n.y),\n      ),\n    },\n    max: {\n      x: Math.max.apply(\n        null,\n        POINTS.map((n) => n.x),\n      ),\n      y: Math.max.apply(\n        null,\n        POINTS.map((n) => n.y),\n      ),\n    },\n  };\n}\n", "import type { LengthFactory, PathLengthFactoryOptions } from '../types';\nimport { distanceSquareRoot } from './distance-square-root';\n\n/**\n * Returns the {x,y} coordinates of a point at a\n * given length of a quadratic-bezier segment.\n *\n * @see https://github.com/substack/point-at-length\n */\nfunction getPointAtQuadSegmentLength(\n  x1: number,\n  y1: number,\n  cx: number,\n  cy: number,\n  x2: number,\n  y2: number,\n  t: number,\n) {\n  const t1 = 1 - t;\n  return {\n    x: t1 ** 2 * x1 + 2 * t1 * t * cx + t ** 2 * x2,\n    y: t1 ** 2 * y1 + 2 * t1 * t * cy + t ** 2 * y2,\n  };\n}\n\n/**\n * Returns a {x,y} point at a given length, the total length and\n * the minimum and maximum {x,y} coordinates of a Q (quadratic-bezier) segment.\n */\nexport function segmentQuadFactory(\n  x1: number,\n  y1: number,\n  qx: number,\n  qy: number,\n  x2: number,\n  y2: number,\n  distance: number,\n  options: Partial<PathLengthFactoryOptions>,\n): LengthFactory {\n  const { bbox = true, length = true, sampleSize = 10 } = options;\n  const distanceIsNumber = typeof distance === 'number';\n  let x = x1;\n  let y = y1;\n  let LENGTH = 0;\n  let prev = [x, y, LENGTH];\n  let cur: [number, number] = [x, y];\n  let t = 0;\n  let POINT = { x: 0, y: 0 };\n  const POINTS = [{ x, y }];\n\n  if (distanceIsNumber && distance <= 0) {\n    POINT = { x, y };\n  }\n\n  for (let j = 0; j <= sampleSize; j += 1) {\n    t = j / sampleSize;\n\n    ({ x, y } = getPointAtQuadSegmentLength(x1, y1, qx, qy, x2, y2, t));\n\n    if (bbox) {\n      POINTS.push({ x, y });\n    }\n\n    if (length) {\n      LENGTH += distanceSquareRoot(cur, [x, y]);\n    }\n    cur = [x, y];\n\n    if (distanceIsNumber && LENGTH >= distance && distance > prev[2]) {\n      const dv = (LENGTH - distance) / (LENGTH - prev[2]);\n\n      POINT = {\n        x: cur[0] * (1 - dv) + prev[0] * dv,\n        y: cur[1] * (1 - dv) + prev[1] * dv,\n      };\n    }\n    prev = [x, y, LENGTH];\n  }\n\n  /* istanbul ignore else */\n  if (distanceIsNumber && distance >= LENGTH) {\n    POINT = { x: x2, y: y2 };\n  }\n\n  return {\n    length: LENGTH,\n    point: POINT,\n    min: {\n      x: Math.min.apply(\n        null,\n        POINTS.map((n) => n.x),\n      ),\n      y: Math.min.apply(\n        null,\n        POINTS.map((n) => n.y),\n      ),\n    },\n    max: {\n      x: Math.max.apply(\n        null,\n        POINTS.map((n) => n.x),\n      ),\n      y: Math.max.apply(\n        null,\n        POINTS.map((n) => n.y),\n      ),\n    },\n  };\n}\n", "import { normalizePath } from '../process/normalize-path';\nimport type { PathCommand, PathArray, LengthFactory, PathLengthFactoryOptions } from '../types';\nimport { segmentLineFactory } from './segment-line-factory';\nimport { segmentArcFactory } from './segment-arc-factory';\nimport { segmentCubicFactory } from './segment-cubic-factory';\nimport { segmentQuadFactory } from './segment-quad-factory';\n\n/**\n * Returns a {x,y} point at a given length\n * of a shape, the shape total length and\n * the shape minimum and maximum {x,y} coordinates.\n */\nexport function pathLengthFactory(\n  pathInput: string | PathArray,\n  distance?: number,\n  options?: Partial<PathLengthFactoryOptions>,\n): LengthFactory {\n  const path = normalizePath(pathInput);\n  const distanceIsNumber = typeof distance === 'number';\n  let isM: boolean;\n  let data: number[] = [];\n  let pathCommand: PathCommand;\n  let x = 0;\n  let y = 0;\n  let mx = 0;\n  let my = 0;\n  let seg;\n  const MIN = [];\n  const MAX = [];\n  let length = 0;\n  let min = { x: 0, y: 0 };\n  let max = min;\n  let point = min;\n  let POINT = min;\n  let LENGTH = 0;\n\n  for (let i = 0, ll = path.length; i < ll; i += 1) {\n    seg = path[i];\n    [pathCommand] = seg;\n    isM = pathCommand === 'M';\n    data = !isM ? [x, y].concat(seg.slice(1)) : data;\n\n    // this segment is always ZERO\n    /* istanbul ignore else */\n    if (isM) {\n      // remember mx, my for Z\n      [, mx, my] = seg;\n      min = { x: mx, y: my };\n      max = min;\n      length = 0;\n\n      if (distanceIsNumber && distance < 0.001) {\n        POINT = min;\n      }\n    } else if (pathCommand === 'L') {\n      ({ length, min, max, point } = segmentLineFactory(data[0], data[1], data[2], data[3], (distance || 0) - LENGTH));\n    } else if (pathCommand === 'A') {\n      ({ length, min, max, point } = segmentArcFactory(\n        data[0],\n        data[1],\n        data[2],\n        data[3],\n        data[4],\n        data[5],\n        data[6],\n        data[7],\n        data[8],\n        (distance || 0) - LENGTH,\n        options || {},\n      ));\n    } else if (pathCommand === 'C') {\n      ({ length, min, max, point } = segmentCubicFactory(\n        data[0],\n        data[1],\n        data[2],\n        data[3],\n        data[4],\n        data[5],\n        data[6],\n        data[7],\n        (distance || 0) - LENGTH,\n        options || {},\n      ));\n    } else if (pathCommand === 'Q') {\n      ({ length, min, max, point } = segmentQuadFactory(\n        data[0],\n        data[1],\n        data[2],\n        data[3],\n        data[4],\n        data[5],\n        (distance || 0) - LENGTH,\n        options || {},\n      ));\n    } else if (pathCommand === 'Z') {\n      data = [x, y, mx, my];\n      ({ length, min, max, point } = segmentLineFactory(data[0], data[1], data[2], data[3], (distance || 0) - LENGTH));\n    }\n\n    if (distanceIsNumber && LENGTH < distance && LENGTH + length >= distance) {\n      POINT = point;\n    }\n\n    MAX.push(max);\n    MIN.push(min);\n    LENGTH += length;\n\n    [x, y] = pathCommand !== 'Z' ? seg.slice(-2) : [mx, my];\n  }\n\n  // native `getPointAtLength` behavior when the given distance\n  // is higher than total length\n  if (distanceIsNumber && distance >= LENGTH) {\n    POINT = { x, y };\n  }\n\n  return {\n    length: LENGTH,\n    point: POINT,\n    min: {\n      x: Math.min.apply(\n        null,\n        MIN.map((n) => n.x),\n      ),\n      y: Math.min.apply(\n        null,\n        MIN.map((n) => n.y),\n      ),\n    },\n    max: {\n      x: Math.max.apply(\n        null,\n        MAX.map((n) => n.x),\n      ),\n      y: Math.max.apply(\n        null,\n        MAX.map((n) => n.y),\n      ),\n    },\n  };\n}\n", "import type { PathArray, PathLengthFactoryOptions } from '../types';\nimport { pathLengthFactory } from './path-length-factory';\n\n/**\n * Returns the shape total length, or the equivalent to `shape.getTotalLength()`.\n *\n * The `normalizePath` version is lighter, faster, more efficient and more accurate\n * with paths that are not `curveArray`.\n */\nexport function getTotalLength(pathInput: string | PathArray, options?: Partial<PathLengthFactoryOptions>) {\n  return pathLengthFactory(pathInput, undefined, { ...options, bbox: false, length: true }).length;\n}\n", "import type { CurveArray } from '../types';\nimport { distanceSquareRoot } from './distance-square-root';\n\nfunction getRotations(a: CurveArray) {\n  const segCount = a.length;\n  const pointCount = segCount - 1;\n\n  return a.map((f, idx) =>\n    a.map((p, i) => {\n      let oldSegIdx = idx + i;\n      let seg;\n\n      if (i === 0 || (a[oldSegIdx] && a[oldSegIdx][0] === 'M')) {\n        seg = a[oldSegIdx];\n        return ['M'].concat(seg.slice(-2));\n      }\n      if (oldSegIdx >= segCount) oldSegIdx -= pointCount;\n      return a[oldSegIdx];\n    }),\n  );\n}\n\nexport function getRotatedCurve(a: CurveArray, b: CurveArray) {\n  const segCount = a.length - 1;\n  const lineLengths: number[] = [];\n  let computedIndex = 0;\n  let sumLensSqrd = 0;\n  const rotations = getRotations(a);\n\n  rotations.forEach((r, i) => {\n    a.slice(1).forEach((s, j) => {\n      // @ts-ignore\n      sumLensSqrd += distanceSquareRoot(a[(i + j) % segCount].slice(-2), b[j % segCount].slice(-2));\n    });\n    lineLengths[i] = sumLensSqrd;\n    sumLensSqrd = 0;\n  });\n\n  computedIndex = lineLengths.indexOf(Math.min.apply(null, lineLengths));\n\n  return rotations[computedIndex];\n}\n", "import type { PathArray } from '../types';\nimport { path2Curve } from '../convert/path-2-curve';\n\n/**\n * Returns the area of a single cubic-bezier segment.\n *\n * http://objectmix.com/graphics/133553-area-closed-bezier-curve.html\n */\nfunction getCubicSegArea(\n  x1: number,\n  y1: number,\n  c1x: number,\n  c1y: number,\n  c2x: number,\n  c2y: number,\n  x2: number,\n  y2: number,\n) {\n  // https://stackoverflow.com/a/15845996\n  return (\n    (3 *\n      ((y2 - y1) * (c1x + c2x) -\n        (x2 - x1) * (c1y + c2y) +\n        c1y * (x1 - c2x) -\n        c1x * (y1 - c2y) +\n        y2 * (c2x + x1 / 3) -\n        x2 * (c2y + y1 / 3))) /\n    20\n  );\n}\n\n/**\n * Returns the area of a shape.\n * @author Jrg Lehni & Jonathan Puckey\n *\n * @see https://github.com/paperjs/paper.js/blob/develop/src/path/Path.js\n */\nexport function getPathArea(path: PathArray) {\n  let x = 0;\n  let y = 0;\n  let len = 0;\n\n  return path2Curve(path)\n    .map((seg) => {\n      switch (seg[0]) {\n        case 'M':\n          [, x, y] = seg;\n          return 0;\n        default:\n          // @ts-ignore\n          const [c1x, c1y, c2x, c2y, x2, y2] = seg.slice(1);\n\n          len = getCubicSegArea(x, y, c1x, c1y, c2x, c2y, x2, y2);\n          [x, y] = seg.slice(-2);\n          return len;\n      }\n    })\n    .reduce((a, b) => a + b, 0);\n}\n\n// export function getPathArea(pathArray: AbsoluteArray) {\n//   let x = 0;\n//   let y = 0;\n//   let mx = 0;\n//   let my = 0;\n//   let len = 0;\n//   return pathArray\n//     .map((seg) => {\n//       switch (seg[0]) {\n//         case 'M':\n//         case 'Z':\n//           mx = seg[0] === 'M' ? seg[1] : mx;\n//           my = seg[0] === 'M' ? seg[2] : my;\n//           x = mx;\n//           y = my;\n//           return 0;\n//         default:\n//           // @ts-ignore\n//           len = getCubicSegArea.apply(0, [x, y].concat(seg.slice(1)));\n//           [x, y] = seg.slice(-2) as [number, number];\n//           return len;\n//       }\n//     })\n//     .reduce((a, b) => a + b, 0);\n// }\n", "import type { PathArray } from '../types';\nimport { getPathArea } from './get-path-area';\n\nexport function getDrawDirection(pathArray: PathArray) {\n  return getPathArea(pathArray) >= 0;\n}\n", "import type { PathArray, PathLengthFactoryOptions } from '../types';\nimport { pathLengthFactory } from './path-length-factory';\n\n/**\n * Returns [x,y] coordinates of a point at a given length of a shape.\n */\nexport function getPointAtLength(\n  pathInput: string | PathArray,\n  distance: number,\n  options?: Partial<PathLengthFactoryOptions>,\n) {\n  return pathLengthFactory(pathInput, distance, { ...options, bbox: false, length: true }).point;\n}\n", "import type { CurveArray, PathArray } from '../types';\nimport { midPoint } from './mid-point';\nimport { segmentCubicFactory } from './segment-cubic-factory';\n\ntype SplitArray = [number, number, number, number, number, number, number, number, number];\n\nconst MAX_RECURSION_DEPTH = 50;\n\nfunction splitCubic(pts: SplitArray, t = 0.5): [CurveArray, CurveArray] {\n  const p0 = pts.slice(0, 2) as [number, number];\n  const p1 = pts.slice(2, 4) as [number, number];\n  const p2 = pts.slice(4, 6) as [number, number];\n  const p3 = pts.slice(6, 8) as [number, number];\n  const p4 = midPoint(p0, p1, t);\n  const p5 = midPoint(p1, p2, t);\n  const p6 = midPoint(p2, p3, t);\n  const p7 = midPoint(p4, p5, t);\n  const p8 = midPoint(p5, p6, t);\n  const p9 = midPoint(p7, p8, t);\n\n  return [\n    // @ts-ignore\n    ['C'].concat(p4, p7, p9),\n    // @ts-ignore\n    ['C'].concat(p8, p6, p3),\n  ];\n}\n\nfunction getCurveArray(segments: PathArray) {\n  return segments.map((segment, i, pathArray) => {\n    // @ts-ignore\n    const segmentData = i && (pathArray[i - 1].slice(-2).concat(segment.slice(1)) as SplitArray);\n\n    // @ts-ignore\n    const curveLength = i\n      ? segmentCubicFactory(\n          segmentData[0],\n          segmentData[1],\n          segmentData[2],\n          segmentData[3],\n          segmentData[4],\n          segmentData[5],\n          segmentData[6],\n          segmentData[7],\n          segmentData[8],\n          { bbox: false },\n        ).length\n      : 0;\n\n    let subsegs;\n    if (i) {\n      // must be [segment,segment]\n      subsegs = curveLength ? splitCubic(segmentData) : [segment, segment];\n    } else {\n      subsegs = [segment];\n    }\n\n    return {\n      s: segment,\n      ss: subsegs,\n      l: curveLength,\n    };\n  });\n}\n\nexport function equalizeSegments(path1: PathArray, path2: PathArray, TL?: number, depth = 0): CurveArray[] {\n  if (depth > MAX_RECURSION_DEPTH) {\n    console.warn('Maximum recursion depth reached in equalizeSegments');\n    return [path1, path2] as CurveArray[];\n  }\n  const c1 = getCurveArray(path1);\n  const c2 = getCurveArray(path2);\n  const L1 = c1.length;\n  const L2 = c2.length;\n  const l1 = c1.filter((x) => x.l).length;\n  const l2 = c2.filter((x) => x.l).length;\n  const m1 = c1.filter((x) => x.l).reduce((a, { l }) => a + l, 0) / l1 || 0;\n  const m2 = c2.filter((x) => x.l).reduce((a, { l }) => a + l, 0) / l2 || 0;\n  const tl = TL || Math.max(L1, L2);\n  const mm = [m1, m2];\n  const dif = [tl - L1, tl - L2];\n  let canSplit: number | boolean = 0;\n  const result = [c1, c2].map((x, i) =>\n    // @ts-ignore\n    x.l === tl\n      ? x.map((y) => y.s)\n      : x\n          .map((y, j) => {\n            canSplit = j && dif[i] && y.l >= mm[i];\n            dif[i] -= canSplit ? 1 : 0;\n            return canSplit ? y.ss : [y.s];\n          })\n          .flat(),\n  ) as CurveArray[];\n\n  return result[0].length === result[1].length ? result : equalizeSegments(result[0], result[1], tl, depth + 1);\n}\n", "import EventEmitter from './index.js'\n\nexport { EventEmitter }\nexport default EventEmitter\n", "import getPrototypeOf from \"./getPrototypeOf.js\";\nfunction _superPropBase(t, o) {\n  for (; !{}.hasOwnProperty.call(t, o) && null !== (t = getPrototypeOf(t)););\n  return t;\n}\nexport { _superPropBase as default };", "import superPropBase from \"./superPropBase.js\";\nfunction _get() {\n  return _get = \"undefined\" != typeof Reflect && Reflect.get ? Reflect.get.bind() : function (e, t, r) {\n    var p = superPropBase(e, t);\n    if (p) {\n      var n = Object.getOwnPropertyDescriptor(p, t);\n      return n.get ? n.get.call(arguments.length < 3 ? e : r) : n.value;\n    }\n  }, _get.apply(null, arguments);\n}\nexport { _get as default };", "import get from \"./get.js\";\nimport getPrototypeOf from \"./getPrototypeOf.js\";\nfunction _superPropGet(t, o, e, r) {\n  var p = get(getPrototypeOf(1 & r ? t.prototype : t), o, e);\n  return 2 & r && \"function\" == typeof p ? function (t) {\n    return p.apply(e, t);\n  } : p;\n}\nexport { _superPropGet as default };", "import type { BBox } from './types';\n\nexport function distance(x1: number, y1: number, x2: number, y2: number) {\n  const dx = x1 - x2;\n  const dy = y1 - y2;\n  return Math.sqrt(dx * dx + dy * dy);\n}\n\nexport function getBBoxByArray(xArr: number[], yArr: number[]): BBox {\n  const minX = Math.min(...xArr);\n  const minY = Math.min(...yArr);\n  const maxX = Math.max(...xArr);\n  const maxY = Math.max(...yArr);\n  return {\n    x: minX,\n    y: minY,\n    width: maxX - minX,\n    height: maxY - minY,\n  };\n}\n\nexport function getBBoxRange(x1: number, y1: number, x2: number, y2: number) {\n  return {\n    minX: Math.min(x1, x2),\n    maxX: Math.max(x1, x2),\n    minY: Math.min(y1, y2),\n    maxY: Math.max(y1, y2),\n  };\n}\n\nexport function piMod(angle: number) {\n  return (angle + Math.PI * 2) % (Math.PI * 2);\n}\n", "import type { BBox, Point } from './types';\nimport { distance, piMod } from './util';\n\nfunction copysign(v1: number, v2: number) {\n  const absv = Math.abs(v1);\n  return v2 > 0 ? absv : absv * -1;\n}\n\nexport function box(x: number, y: number, rx: number, ry: number): BBox {\n  return {\n    x: x - rx,\n    y: y - ry,\n    width: rx * 2,\n    height: ry * 2,\n  };\n}\nexport function length(x: number, y: number, rx: number, ry: number) {\n  return Math.PI * (3 * (rx + ry) - Math.sqrt((3 * rx + ry) * (rx + 3 * ry)));\n}\nexport function nearestPoint(\n  x: number,\n  y: number,\n  rx: number,\n  ry: number,\n  x0: number,\n  y0: number,\n) {\n  const a = rx;\n  const b = ry;\n  // 0\n  if (a === 0 || b === 0) {\n    return {\n      x,\n      y,\n    };\n  }\n  //  0 0 \n  const relativeX = x0 - x;\n  const relativeY = y0 - y;\n  const px = Math.abs(relativeX);\n  const py = Math.abs(relativeY);\n  const squareA = a * a;\n  const squareB = b * b;\n  // const angle0 = Math.atan2(relativeY, relativeX);\n  let t = Math.PI / 4;\n  let nearestX = 0; // \n  let nearestY = 0;\n  //  4 \n  for (let i = 0; i < 4; i++) {\n    nearestX = a * Math.cos(t);\n    nearestY = b * Math.sin(t);\n\n    const ex = ((squareA - squareB) * Math.cos(t) ** 3) / a;\n    const ey = ((squareB - squareA) * Math.sin(t) ** 3) / b;\n    const rx1 = nearestX - ex;\n    const ry1 = nearestY - ey;\n\n    const qx = px - ex;\n    const qy = py - ey;\n    const r = Math.hypot(ry1, rx1);\n    const q = Math.hypot(qy, qx);\n\n    const delta_c = r * Math.asin((rx1 * qy - ry1 * qx) / (r * q));\n    const delta_t =\n      delta_c /\n      Math.sqrt(squareA + squareB - nearestX * nearestX - nearestY * nearestY);\n\n    t += delta_t;\n    t = Math.min(Math.PI / 2, Math.max(0, t));\n  }\n\n  return {\n    x: x + copysign(nearestX, relativeX),\n    y: y + copysign(nearestY, relativeY),\n  };\n}\nexport function pointDistance(\n  x: number,\n  y: number,\n  rx: number,\n  ry: number,\n  x0: number,\n  y0: number,\n) {\n  const np = nearestPoint(x, y, rx, ry, x0, y0);\n  return distance(np.x, np.y, x0, y0);\n}\nexport function pointAt(\n  x: number,\n  y: number,\n  rx: number,\n  ry: number,\n  t: number,\n): Point {\n  const angle = 2 * Math.PI * t; // \n  return {\n    x: x + rx * Math.cos(angle),\n    y: y + ry * Math.sin(angle),\n  };\n}\nexport function tangentAngle(\n  x: number,\n  y: number,\n  rx: number,\n  ry: number,\n  t: number,\n) {\n  const angle = 2 * Math.PI * t; // \n  //  x,y  x' = -rx * sin(t); y' = ry * cos(t);\n  const tangentAngle = Math.atan2(ry * Math.cos(angle), -rx * Math.sin(angle));\n  // \n  // const point = this.pointAt(0, 0, rx, ry, t); // \n  // let tangentAngle = -1 * Math.atan((ry * ry * point.x) / (rx * rx * point.y));\n  // if (angle >= 0 && angle <= Math.PI) {\n  //   tangentAngle += Math.PI;\n  // }\n\n  return piMod(tangentAngle);\n}\n", "import { nearestPoint as ellipseNearestPoint } from './ellipse';\nimport type { BBox, Point } from './types';\nimport { distance, piMod } from './util';\n\n//  x\nfunction derivativeXAt(\n  cx: number,\n  cy: number,\n  rx: number,\n  ry: number,\n  xRotation: number,\n  startAngle: number,\n  endAngle: number,\n  angle: number,\n) {\n  return (\n    -1 * rx * Math.cos(xRotation) * Math.sin(angle) -\n    ry * Math.sin(xRotation) * Math.cos(angle)\n  );\n}\n\n//  y\nfunction derivativeYAt(\n  cx: number,\n  cy: number,\n  rx: number,\n  ry: number,\n  xRotation: number,\n  startAngle: number,\n  endAngle: number,\n  angle: number,\n) {\n  return (\n    -1 * rx * Math.sin(xRotation) * Math.sin(angle) +\n    ry * Math.cos(xRotation) * Math.cos(angle)\n  );\n}\n\n// x \nfunction xExtrema(rx: number, ry: number, xRotation: number) {\n  return Math.atan((-ry / rx) * Math.tan(xRotation));\n}\n\n// y \nfunction yExtrema(rx: number, ry: number, xRotation: number) {\n  return Math.atan(ry / (rx * Math.tan(xRotation)));\n}\n\n//  x \nfunction xAt(\n  cx: number,\n  cy: number,\n  rx: number,\n  ry: number,\n  xRotation: number,\n  angle: number,\n) {\n  return (\n    rx * Math.cos(xRotation) * Math.cos(angle) -\n    ry * Math.sin(xRotation) * Math.sin(angle) +\n    cx\n  );\n}\n\n//  y \nfunction yAt(\n  cx: number,\n  cy: number,\n  rx: number,\n  ry: number,\n  xRotation: number,\n  angle: number,\n) {\n  return (\n    rx * Math.sin(xRotation) * Math.cos(angle) +\n    ry * Math.cos(xRotation) * Math.sin(angle) +\n    cy\n  );\n}\n\n// \nfunction getAngle(rx: number, ry: number, x0: number, y0: number) {\n  const angle = Math.atan2(y0 * rx, x0 * ry);\n  //  0 - 2PI \n  return (angle + Math.PI * 2) % (Math.PI * 2);\n}\n\n// x,y\nfunction getPoint(rx: number, ry: number, angle: number): Point {\n  return {\n    x: rx * Math.cos(angle),\n    y: ry * Math.sin(angle),\n  };\n}\n\n// \nfunction rotate(x: number, y: number, angle: number) {\n  const cos = Math.cos(angle);\n  const sin = Math.sin(angle);\n  return [x * cos - y * sin, x * sin + y * cos];\n}\n\nexport function box(\n  cx: number,\n  cy: number,\n  rx: number,\n  ry: number,\n  xRotation: number,\n  startAngle: number,\n  endAngle: number,\n): BBox {\n  const xDim = xExtrema(rx, ry, xRotation);\n  let minX = Infinity;\n  let maxX = -Infinity;\n  const xs = [startAngle, endAngle];\n  for (let i = -Math.PI * 2; i <= Math.PI * 2; i += Math.PI) {\n    const xAngle = xDim + i;\n    if (startAngle < endAngle) {\n      if (startAngle < xAngle && xAngle < endAngle) {\n        xs.push(xAngle);\n      }\n    } else if (endAngle < xAngle && xAngle < startAngle) {\n      xs.push(xAngle);\n    }\n  }\n\n  for (let i = 0; i < xs.length; i++) {\n    const x = xAt(cx, cy, rx, ry, xRotation, xs[i]);\n    if (x < minX) {\n      minX = x;\n    }\n    if (x > maxX) {\n      maxX = x;\n    }\n  }\n\n  const yDim = yExtrema(rx, ry, xRotation);\n  let minY = Infinity;\n  let maxY = -Infinity;\n  const ys = [startAngle, endAngle];\n  for (let i = -Math.PI * 2; i <= Math.PI * 2; i += Math.PI) {\n    const yAngle = yDim + i;\n    if (startAngle < endAngle) {\n      if (startAngle < yAngle && yAngle < endAngle) {\n        ys.push(yAngle);\n      }\n    } else if (endAngle < yAngle && yAngle < startAngle) {\n      ys.push(yAngle);\n    }\n  }\n\n  for (let i = 0; i < ys.length; i++) {\n    const y = yAt(cx, cy, rx, ry, xRotation, ys[i]);\n    if (y < minY) {\n      minY = y;\n    }\n    if (y > maxY) {\n      maxY = y;\n    }\n  }\n\n  return {\n    x: minX,\n    y: minY,\n    width: maxX - minX,\n    height: maxY - minY,\n  };\n}\n\nexport function nearestPoint(\n  cx: number,\n  cy: number,\n  rx: number,\n  ry: number,\n  xRotation: number,\n  startAngle: number,\n  endAngle: number,\n  x0: number,\n  y0: number,\n) {\n  //  0,0 \n  const relativeVector = rotate(x0 - cx, y0 - cy, -xRotation);\n  const [x1, y1] = relativeVector;\n  // \n  let relativePoint = ellipseNearestPoint(0, 0, rx, ry, x1, y1);\n  // \n  const angle = getAngle(rx, ry, relativePoint.x, relativePoint.y);\n  // \n  if (angle < startAngle) {\n    // \n    relativePoint = getPoint(rx, ry, startAngle);\n  } else if (angle > endAngle) {\n    // \n    relativePoint = getPoint(rx, ry, endAngle);\n  }\n  //  xRotation \n  const vector = rotate(relativePoint.x, relativePoint.y, xRotation);\n  return {\n    x: vector[0] + cx,\n    y: vector[1] + cy,\n  };\n}\n\nexport function pointDistance(\n  cx: number,\n  cy: number,\n  rx: number,\n  ry: number,\n  xRotation: number,\n  startAngle: number,\n  endAngle: number,\n  x0: number,\n  y0: number,\n) {\n  const np = nearestPoint(\n    cx,\n    cy,\n    rx,\n    ry,\n    xRotation,\n    startAngle,\n    endAngle,\n    x0,\n    y0,\n  );\n  return distance(np.x, np.y, x0, y0);\n}\n\nexport function pointAt(\n  cx: number,\n  cy: number,\n  rx: number,\n  ry: number,\n  xRotation: number,\n  startAngle: number,\n  endAngle: number,\n  t: number,\n): Point {\n  const angle = (endAngle - startAngle) * t + startAngle;\n  return {\n    x: xAt(cx, cy, rx, ry, xRotation, angle),\n    y: yAt(cx, cy, rx, ry, xRotation, angle),\n  };\n}\n\nexport function tangentAngle(\n  cx: number,\n  cy: number,\n  rx: number,\n  ry: number,\n  xRotation: number,\n  startAngle: number,\n  endAngle: number,\n  t: number,\n) {\n  const angle = (endAngle - startAngle) * t + startAngle;\n  const dx = derivativeXAt(\n    cx,\n    cy,\n    rx,\n    ry,\n    xRotation,\n    startAngle,\n    endAngle,\n    angle,\n  );\n  const dy = derivativeYAt(\n    cx,\n    cy,\n    rx,\n    ry,\n    xRotation,\n    startAngle,\n    endAngle,\n    angle,\n  );\n  return piMod(Math.atan2(dy, dx));\n}\n", "import { distance } from './util';\nimport type { Point, PointTuple } from './types';\n\nconst EPSILON = 0.0001;\n/**\n * \n * @param {number[]} xArr       x \n * @param {number[]} yArr       y \n * @param {number}   x          x\n * @param {number}   y          y\n * @param {Function} tCallback \n */\nexport function nearestPoint(\n  xArr: number[],\n  yArr: number[],\n  x: number,\n  y: number,\n  tCallback: (...arr: number[]) => number,\n  length?: number,\n): Point {\n  let t = -1;\n  let d = Infinity;\n  const v0: PointTuple = [x, y];\n\n  let segNum = 20;\n  if (length && length > 200) {\n    segNum = length / 10;\n  }\n  const increaseRate = 1 / segNum;\n\n  let interval = increaseRate / 10;\n\n  for (let i = 0; i <= segNum; i++) {\n    const _t = i * increaseRate;\n    const v1: PointTuple = [\n      tCallback(...xArr.concat([_t])),\n      tCallback(...yArr.concat([_t])),\n    ];\n\n    const d1 = distance(v0[0], v0[1], v1[0], v1[1]);\n    if (d1 < d) {\n      t = _t;\n      d = d1;\n    }\n  }\n  // \n  if (t === 0) {\n    return {\n      x: xArr[0],\n      y: yArr[0],\n    };\n  }\n  if (t === 1) {\n    const count = xArr.length;\n    return {\n      x: xArr[count - 1],\n      y: yArr[count - 1],\n    };\n  }\n  d = Infinity;\n\n  for (let i = 0; i < 32; i++) {\n    if (interval < EPSILON) {\n      break;\n    }\n\n    const prev = t - interval;\n    const next = t + interval;\n\n    const v1 = [\n      tCallback(...xArr.concat([prev])),\n      tCallback(...yArr.concat([prev])),\n    ];\n\n    const d1 = distance(v0[0], v0[1], v1[0], v1[1]);\n    if (prev >= 0 && d1 < d) {\n      t = prev;\n      d = d1;\n    } else {\n      const v2 = [\n        tCallback(...xArr.concat([next])),\n        tCallback(...yArr.concat([next])),\n      ];\n      const d2 = distance(v0[0], v0[1], v2[0], v2[1]);\n      if (next <= 1 && d2 < d) {\n        t = next;\n        d = d2;\n      } else {\n        interval *= 0.5;\n      }\n    }\n  }\n\n  return {\n    x: tCallback(...xArr.concat([t])),\n    y: tCallback(...yArr.concat([t])),\n  };\n}\n\n//  https://community.khronos.org/t/3d-cubic-bezier-segment-length/62363/2\nexport function snapLength(xArr: number[], yArr: number[]) {\n  let totalLength = 0;\n  const count = xArr.length;\n  for (let i = 0; i < count; i++) {\n    const x = xArr[i];\n    const y = yArr[i];\n    const nextX = xArr[(i + 1) % count];\n    const nextY = yArr[(i + 1) % count];\n    totalLength += distance(x, y, nextX, nextY);\n  }\n  return totalLength / 2;\n}\n", "import { vec2 } from 'gl-matrix';\nimport type { BBox, Point } from './types';\nimport { distance, getBBoxByArray } from './util';\n\nexport function box(x1: number, y1: number, x2: number, y2: number): BBox {\n  return getBBoxByArray([x1, x2], [y1, y2]);\n}\n\nexport function length(x1: number, y1: number, x2: number, y2: number) {\n  return distance(x1, y1, x2, y2);\n}\n\nexport function pointAt(\n  x1: number,\n  y1: number,\n  x2: number,\n  y2: number,\n  t: number,\n): Point {\n  return {\n    x: (1 - t) * x1 + t * x2,\n    y: (1 - t) * y1 + t * y2,\n  };\n}\n\nexport function pointDistance(\n  x1: number,\n  y1: number,\n  x2: number,\n  y2: number,\n  x: number,\n  y: number,\n): number {\n  //  x1, y1  p, p1, p2  a\n  // p1a = p1p.p1p2/|p1p2| * (p1p )\n  const cross = (x2 - x1) * (x - x1) + (y2 - y1) * (y - y1);\n  if (cross < 0) {\n    return distance(x1, y1, x, y);\n  }\n  const lengthSquare = (x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1);\n  if (cross > lengthSquare) {\n    return distance(x2, y2, x, y);\n  }\n  return pointToLine(x1, y1, x2, y2, x, y);\n}\n\nexport function pointToLine(\n  x1: number,\n  y1: number,\n  x2: number,\n  y2: number,\n  x: number,\n  y: number,\n) {\n  const d: [number, number] = [x2 - x1, y2 - y1];\n  // \n  if (vec2.exactEquals(d, [0, 0])) {\n    return Math.sqrt((x - x1) * (x - x1) + (y - y1) * (y - y1));\n  }\n  const u: [number, number] = [-d[1], d[0]];\n  vec2.normalize(u, u);\n  const a: [number, number] = [x - x1, y - y1];\n  return Math.abs(vec2.dot(a, u));\n}\n\nexport function tangentAngle(x1: number, y1: number, x2: number, y2: number) {\n  return Math.atan2(y2 - y1, x2 - x1);\n}\n", "import { isNumberEqual } from '@antv/util';\nimport { nearestPoint as bezierNearestPoint, snapLength } from './bezier';\nimport { pointAt as linePointAt } from './line';\nimport type { Point } from './types';\nimport { distance, getBBoxByArray, piMod } from './util';\n\nfunction cubicAt(p0: number, p1: number, p2: number, p3: number, t: number) {\n  const onet = 1 - t; // t * t * t  Math.pow(t, 3) \n  return (\n    onet * onet * onet * p0 +\n    3 * p1 * t * onet * onet +\n    3 * p2 * t * t * onet +\n    p3 * t * t * t\n  );\n}\n\nfunction derivativeAt(\n  p0: number,\n  p1: number,\n  p2: number,\n  p3: number,\n  t: number,\n) {\n  const onet = 1 - t;\n  return (\n    3 * (onet * onet * (p1 - p0) + 2 * onet * t * (p2 - p1) + t * t * (p3 - p2))\n  );\n}\n\nfunction extrema(p0: number, p1: number, p2: number, p3: number) {\n  const a = -3 * p0 + 9 * p1 - 9 * p2 + 3 * p3;\n  const b = 6 * p0 - 12 * p1 + 6 * p2;\n  const c = 3 * p1 - 3 * p0;\n  const extremas = [];\n  let t1: number;\n  let t2: number;\n  let discSqrt: number;\n\n  if (isNumberEqual(a, 0)) {\n    if (!isNumberEqual(b, 0)) {\n      t1 = -c / b;\n      if (t1 >= 0 && t1 <= 1) {\n        extremas.push(t1);\n      }\n    }\n  } else {\n    const disc = b * b - 4 * a * c;\n    if (isNumberEqual(disc, 0)) {\n      extremas.push(-b / (2 * a));\n    } else if (disc > 0) {\n      discSqrt = Math.sqrt(disc);\n      t1 = (-b + discSqrt) / (2 * a);\n      t2 = (-b - discSqrt) / (2 * a);\n      if (t1 >= 0 && t1 <= 1) {\n        extremas.push(t1);\n      }\n      if (t2 >= 0 && t2 <= 1) {\n        extremas.push(t2);\n      }\n    }\n  }\n  return extremas;\n}\n\n// \nfunction divideCubic(\n  x1: number,\n  y1: number,\n  x2: number,\n  y2: number,\n  x3: number,\n  y3: number,\n  x4: number,\n  y4: number,\n  t: number,\n): [number, number, number, number, number, number, number, number][] {\n  // \n  const xt = cubicAt(x1, x2, x3, x4, t);\n  const yt = cubicAt(y1, y2, y3, y4, t);\n  // \n  const c1 = linePointAt(x1, y1, x2, y2, t);\n  const c2 = linePointAt(x2, y2, x3, y3, t);\n  const c3 = linePointAt(x3, y3, x4, y4, t);\n  const c12 = linePointAt(c1.x, c1.y, c2.x, c2.y, t);\n  const c23 = linePointAt(c2.x, c2.y, c3.x, c3.y, t);\n  return [\n    [x1, y1, c1.x, c1.y, c12.x, c12.y, xt, yt],\n    [xt, yt, c23.x, c23.y, c3.x, c3.y, x4, y4],\n  ];\n}\n\n// \nfunction cubicLength(\n  x1: number,\n  y1: number,\n  x2: number,\n  y2: number,\n  x3: number,\n  y3: number,\n  x4: number,\n  y4: number,\n  iterationCount: number,\n): number {\n  if (iterationCount === 0) {\n    return snapLength([x1, x2, x3, x4], [y1, y2, y3, y4]);\n  }\n  const cubics = divideCubic(x1, y1, x2, y2, x3, y3, x4, y4, 0.5);\n  const left: [\n    number,\n    number,\n    number,\n    number,\n    number,\n    number,\n    number,\n    number,\n    number,\n  ] = [...cubics[0], iterationCount - 1];\n  const right: [\n    number,\n    number,\n    number,\n    number,\n    number,\n    number,\n    number,\n    number,\n    number,\n  ] = [...cubics[1], iterationCount - 1];\n  return cubicLength(...left) + cubicLength(...right);\n}\n\nexport function box(\n  x1: number,\n  y1: number,\n  x2: number,\n  y2: number,\n  x3: number,\n  y3: number,\n  x4: number,\n  y4: number,\n) {\n  const xArr = [x1, x4];\n  const yArr = [y1, y4];\n  const xExtrema = extrema(x1, x2, x3, x4);\n  const yExtrema = extrema(y1, y2, y3, y4);\n  for (let i = 0; i < xExtrema.length; i++) {\n    xArr.push(cubicAt(x1, x2, x3, x4, xExtrema[i]));\n  }\n  for (let i = 0; i < yExtrema.length; i++) {\n    yArr.push(cubicAt(y1, y2, y3, y4, yExtrema[i]));\n  }\n  return getBBoxByArray(xArr, yArr);\n}\n\nexport function length(\n  x1: number,\n  y1: number,\n  x2: number,\n  y2: number,\n  x3: number,\n  y3: number,\n  x4: number,\n  y4: number,\n) {\n  //  8 \n  return cubicLength(x1, y1, x2, y2, x3, y3, x4, y4, 3);\n}\n\nexport function nearestPoint(\n  x1: number,\n  y1: number,\n  x2: number,\n  y2: number,\n  x3: number,\n  y3: number,\n  x4: number,\n  y4: number,\n  x0: number,\n  y0: number,\n  length?: number,\n) {\n  return bezierNearestPoint(\n    [x1, x2, x3, x4],\n    [y1, y2, y3, y4],\n    x0,\n    y0,\n    cubicAt,\n    length,\n  );\n}\n\nexport function pointDistance(\n  x1: number,\n  y1: number,\n  x2: number,\n  y2: number,\n  x3: number,\n  y3: number,\n  x4: number,\n  y4: number,\n  x0: number,\n  y0: number,\n  length?: number,\n) {\n  const point = nearestPoint(x1, y1, x2, y2, x3, y3, x4, y4, x0, y0, length);\n  return distance(point.x, point.y, x0, y0);\n}\n\nexport function pointAt(\n  x1: number,\n  y1: number,\n  x2: number,\n  y2: number,\n  x3: number,\n  y3: number,\n  x4: number,\n  y4: number,\n  t: number,\n): Point {\n  return {\n    x: cubicAt(x1, x2, x3, x4, t),\n    y: cubicAt(y1, y2, y3, y4, t),\n  };\n}\n\nexport function divide(\n  x1: number,\n  y1: number,\n  x2: number,\n  y2: number,\n  x3: number,\n  y3: number,\n  x4: number,\n  y4: number,\n  t: number,\n) {\n  return divideCubic(x1, y1, x2, y2, x3, y3, x4, y4, t);\n}\n\nexport function tangentAngle(\n  x1: number,\n  y1: number,\n  x2: number,\n  y2: number,\n  x3: number,\n  y3: number,\n  x4: number,\n  y4: number,\n  t: number,\n) {\n  const dx = derivativeAt(x1, x2, x3, x4, t);\n  const dy = derivativeAt(y1, y2, y3, y4, t);\n  return piMod(Math.atan2(dy, dx));\n}\n", "import { pointAt, pointDistance } from './line';\nimport type { Point, PointTuple, Segment } from './types';\nimport { distance } from './util';\n\nfunction analyzePoints(points: PointTuple[]) {\n  // \n  let totalLength = 0;\n  const segments: Segment[] = [];\n  for (let i = 0; i < points.length - 1; i++) {\n    const from = points[i];\n    const to = points[i + 1];\n    const length = distance(from[0], from[1], to[0], to[1]);\n    const seg = {\n      from,\n      to,\n      length,\n    };\n    segments.push(seg);\n    totalLength += length;\n  }\n  return { segments, totalLength };\n}\n\nexport function lengthOfSegment(points: PointTuple[]) {\n  if (points.length < 2) {\n    return 0;\n  }\n  let totalLength = 0;\n  for (let i = 0; i < points.length - 1; i++) {\n    const from = points[i];\n    const to = points[i + 1];\n    totalLength += distance(from[0], from[1], to[0], to[1]);\n  }\n  return totalLength;\n}\n\n/**\n * \n * @param {array} points \n * @param {number} t  0-1\n * @return {object} \n */\nexport function pointAtSegments(points: PointTuple[], t: number): Point | null {\n  // \n  if (t > 1 || t < 0 || points.length < 2) {\n    return null;\n  }\n  const { segments, totalLength } = analyzePoints(points);\n  // \n  if (totalLength === 0) {\n    return {\n      x: points[0][0],\n      y: points[0][1],\n    };\n  }\n  // \n  let startRatio = 0;\n  let point = null;\n  for (let i = 0; i < segments.length; i++) {\n    const seg = segments[i];\n    const { from, to } = seg;\n    const currentRatio = seg.length / totalLength;\n    if (t >= startRatio && t <= startRatio + currentRatio) {\n      const localRatio = (t - startRatio) / currentRatio;\n      point = pointAt(from[0], from[1], to[0], to[1], localRatio);\n      break;\n    }\n    startRatio += currentRatio;\n  }\n  return point;\n}\n\n/**\n * \n * @param {array} points \n * @param {number} t  0-1\n */\nexport function angleAtSegments(points: PointTuple[], t: number) {\n  // \n  if (t > 1 || t < 0 || points.length < 2) {\n    return 0;\n  }\n  const { segments, totalLength } = analyzePoints(points);\n  // \n  let startRatio = 0;\n  let angle = 0;\n  for (let i = 0; i < segments.length; i++) {\n    const seg = segments[i];\n    const { from, to } = seg;\n    const currentRatio = seg.length / totalLength;\n    if (t >= startRatio && t <= startRatio + currentRatio) {\n      angle = Math.atan2(to[1] - from[1], to[0] - from[0]);\n      break;\n    }\n    startRatio += currentRatio;\n  }\n  return angle;\n}\n\nexport function distanceAtSegment(points: PointTuple[], x: number, y: number) {\n  let minDistance = Infinity;\n  for (let i = 0; i < points.length - 1; i++) {\n    const point = points[i];\n    const nextPoint = points[i + 1];\n    const distance = pointDistance(\n      point[0],\n      point[1],\n      nextPoint[0],\n      nextPoint[1],\n      x,\n      y,\n    );\n    if (distance < minDistance) {\n      minDistance = distance;\n    }\n  }\n  return minDistance;\n}\n", "import {\n  angleAtSegments,\n  distanceAtSegment,\n  lengthOfSegment,\n  pointAtSegments,\n} from './segments';\nimport type { BBox, PointTuple } from './types';\nimport { getBBoxByArray } from './util';\n\nexport function box(points: PointTuple[]): BBox {\n  const xArr = [];\n  const yArr = [];\n  for (let i = 0; i < points.length; i++) {\n    const point = points[i];\n    xArr.push(point[0]);\n    yArr.push(point[1]);\n  }\n  return getBBoxByArray(xArr, yArr);\n}\nexport function length(points: PointTuple[]) {\n  return lengthOfSegment(points);\n}\nexport function pointAt(points: PointTuple[], t: number) {\n  return pointAtSegments(points, t);\n}\nexport function pointDistance(points: PointTuple[], x: number, y: number) {\n  return distanceAtSegment(points, x, y);\n}\nexport function tangentAngle(points: PointTuple[], t: number) {\n  return angleAtSegments(points, t);\n}\n", "import { box as polylineBox } from './polyline';\nimport {\n  angleAtSegments,\n  distanceAtSegment,\n  lengthOfSegment,\n  pointAtSegments,\n} from './segments';\nimport type { PointTuple } from './types';\n\nfunction getAllPoints(points: PointTuple[]) {\n  const tmp = points.slice(0);\n  if (points.length) {\n    tmp.push(points[0]);\n  }\n  return tmp;\n}\n\nexport function box(points: PointTuple[]) {\n  return polylineBox(points);\n}\nexport function length(points: PointTuple[]) {\n  return lengthOfSegment(getAllPoints(points));\n}\nexport function pointAt(points: PointTuple[], t: number) {\n  return pointAtSegments(getAllPoints(points), t);\n}\nexport function pointDistance(points: PointTuple[], x: number, y: number) {\n  return distanceAtSegment(getAllPoints(points), x, y);\n}\nexport function tangentAngle(points: PointTuple[], t: number) {\n  return angleAtSegments(getAllPoints(points), t);\n}\n", "import { isNumberEqual } from '@antv/util';\nimport { nearestPoint as nearestPointBezier } from './bezier';\nimport { pointAt as linePointAt } from './line';\nimport type { Point } from './types';\nimport { distance, getBBoxByArray, piMod } from './util';\n\n// \nfunction quadraticAt(p0: number, p1: number, p2: number, t: number) {\n  const onet = 1 - t;\n  return onet * onet * p0 + 2 * t * onet * p1 + t * t * p2;\n}\n\n// \nfunction extrema(p0: number, p1: number, p2: number) {\n  const a = p0 + p2 - 2 * p1;\n  if (isNumberEqual(a, 0)) {\n    return [0.5];\n  }\n  const rst = (p0 - p1) / a;\n  if (rst <= 1 && rst >= 0) {\n    return [rst];\n  }\n  return [];\n}\n\nfunction derivativeAt(p0: number, p1: number, p2: number, t: number) {\n  return 2 * (1 - t) * (p1 - p0) + 2 * t * (p2 - p1);\n}\n\n// \nfunction divideQuadratic(\n  x1: number,\n  y1: number,\n  x2: number,\n  y2: number,\n  x3: number,\n  y3: number,\n  t: number,\n) {\n  // \n  const xt = quadraticAt(x1, x2, x3, t);\n  const yt = quadraticAt(y1, y2, y3, t);\n\n  // \n  const controlPoint1 = linePointAt(x1, y1, x2, y2, t);\n  // \n  const controlPoint2 = linePointAt(x2, y2, x3, y3, t);\n  return [\n    [x1, y1, controlPoint1.x, controlPoint1.y, xt, yt],\n    [xt, yt, controlPoint2.x, controlPoint2.y, x3, y3],\n  ];\n}\n\n// \nfunction quadraticLength(\n  x1: number,\n  y1: number,\n  x2: number,\n  y2: number,\n  x3: number,\n  y3: number,\n  iterationCount: number,\n): number {\n  if (iterationCount === 0) {\n    return (\n      (distance(x1, y1, x2, y2) +\n        distance(x2, y2, x3, y3) +\n        distance(x1, y1, x3, y3)) /\n      2\n    );\n  }\n  const quadratics = divideQuadratic(x1, y1, x2, y2, x3, y3, 0.5);\n  const left = quadratics[0] as [\n    number,\n    number,\n    number,\n    number,\n    number,\n    number,\n    number,\n  ];\n  const right = quadratics[1] as [\n    number,\n    number,\n    number,\n    number,\n    number,\n    number,\n    number,\n  ];\n  left.push(iterationCount - 1);\n  right.push(iterationCount - 1);\n  return quadraticLength(...left) + quadraticLength(...right);\n}\n\nexport function box(\n  x1: number,\n  y1: number,\n  x2: number,\n  y2: number,\n  x3: number,\n  y3: number,\n) {\n  const xExtrema = extrema(x1, x2, x3)[0];\n  const yExtrema = extrema(y1, y2, y3)[0];\n  //  box \n  const xArr = [x1, x3];\n  const yArr = [y1, y3];\n  if (xExtrema !== undefined) {\n    xArr.push(quadraticAt(x1, x2, x3, xExtrema));\n  }\n  if (yExtrema !== undefined) {\n    yArr.push(quadraticAt(y1, y2, y3, yExtrema));\n  }\n  return getBBoxByArray(xArr, yArr);\n}\n\nexport function length(\n  x1: number,\n  y1: number,\n  x2: number,\n  y2: number,\n  x3: number,\n  y3: number,\n) {\n  return quadraticLength(x1, y1, x2, y2, x3, y3, 3);\n}\n\nexport function nearestPoint(\n  x1: number,\n  y1: number,\n  x2: number,\n  y2: number,\n  x3: number,\n  y3: number,\n  x0: number,\n  y0: number,\n) {\n  return nearestPointBezier([x1, x2, x3], [y1, y2, y3], x0, y0, quadraticAt);\n}\n\nexport function pointDistance(\n  x1: number,\n  y1: number,\n  x2: number,\n  y2: number,\n  x3: number,\n  y3: number,\n  x0: number,\n  y0: number,\n) {\n  const point = nearestPoint(x1, y1, x2, y2, x3, y3, x0, y0);\n  return distance(point.x, point.y, x0, y0);\n}\n\n// interpolationAt: quadraticAt,\nexport function pointAt(\n  x1: number,\n  y1: number,\n  x2: number,\n  y2: number,\n  x3: number,\n  y3: number,\n  t: number,\n): Point {\n  return {\n    x: quadraticAt(x1, x2, x3, t),\n    y: quadraticAt(y1, y2, y3, t),\n  };\n}\n\nexport function divide(\n  x1: number,\n  y1: number,\n  x2: number,\n  y2: number,\n  x3: number,\n  y3: number,\n  t: number,\n) {\n  return divideQuadratic(x1, y1, x2, y2, x3, y3, t);\n}\n\nexport function tangentAngle(\n  x1: number,\n  y1: number,\n  x2: number,\n  y2: number,\n  x3: number,\n  y3: number,\n  t: number,\n) {\n  const dx = derivativeAt(x1, x2, x3, t);\n  const dy = derivativeAt(y1, y2, y3, t);\n  const angle = Math.atan2(dy, dx);\n  return piMod(angle);\n}\n", "(function (global, factory) {\ntypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\ntypeof define === 'function' && define.amd ? define(factory) :\n(global = global || self, global.RBush = factory());\n}(this, function () { 'use strict';\n\nfunction quickselect(arr, k, left, right, compare) {\n    quickselectStep(arr, k, left || 0, right || (arr.length - 1), compare || defaultCompare);\n}\n\nfunction quickselectStep(arr, k, left, right, compare) {\n\n    while (right > left) {\n        if (right - left > 600) {\n            var n = right - left + 1;\n            var m = k - left + 1;\n            var z = Math.log(n);\n            var s = 0.5 * Math.exp(2 * z / 3);\n            var sd = 0.5 * Math.sqrt(z * s * (n - s) / n) * (m - n / 2 < 0 ? -1 : 1);\n            var newLeft = Math.max(left, Math.floor(k - m * s / n + sd));\n            var newRight = Math.min(right, Math.floor(k + (n - m) * s / n + sd));\n            quickselectStep(arr, k, newLeft, newRight, compare);\n        }\n\n        var t = arr[k];\n        var i = left;\n        var j = right;\n\n        swap(arr, left, k);\n        if (compare(arr[right], t) > 0) { swap(arr, left, right); }\n\n        while (i < j) {\n            swap(arr, i, j);\n            i++;\n            j--;\n            while (compare(arr[i], t) < 0) { i++; }\n            while (compare(arr[j], t) > 0) { j--; }\n        }\n\n        if (compare(arr[left], t) === 0) { swap(arr, left, j); }\n        else {\n            j++;\n            swap(arr, j, right);\n        }\n\n        if (j <= k) { left = j + 1; }\n        if (k <= j) { right = j - 1; }\n    }\n}\n\nfunction swap(arr, i, j) {\n    var tmp = arr[i];\n    arr[i] = arr[j];\n    arr[j] = tmp;\n}\n\nfunction defaultCompare(a, b) {\n    return a < b ? -1 : a > b ? 1 : 0;\n}\n\nvar RBush = function RBush(maxEntries) {\n    if ( maxEntries === void 0 ) maxEntries = 9;\n\n    // max entries in a node is 9 by default; min node fill is 40% for best performance\n    this._maxEntries = Math.max(4, maxEntries);\n    this._minEntries = Math.max(2, Math.ceil(this._maxEntries * 0.4));\n    this.clear();\n};\n\nRBush.prototype.all = function all () {\n    return this._all(this.data, []);\n};\n\nRBush.prototype.search = function search (bbox) {\n    var node = this.data;\n    var result = [];\n\n    if (!intersects(bbox, node)) { return result; }\n\n    var toBBox = this.toBBox;\n    var nodesToSearch = [];\n\n    while (node) {\n        for (var i = 0; i < node.children.length; i++) {\n            var child = node.children[i];\n            var childBBox = node.leaf ? toBBox(child) : child;\n\n            if (intersects(bbox, childBBox)) {\n                if (node.leaf) { result.push(child); }\n                else if (contains(bbox, childBBox)) { this._all(child, result); }\n                else { nodesToSearch.push(child); }\n            }\n        }\n        node = nodesToSearch.pop();\n    }\n\n    return result;\n};\n\nRBush.prototype.collides = function collides (bbox) {\n    var node = this.data;\n\n    if (!intersects(bbox, node)) { return false; }\n\n    var nodesToSearch = [];\n    while (node) {\n        for (var i = 0; i < node.children.length; i++) {\n            var child = node.children[i];\n            var childBBox = node.leaf ? this.toBBox(child) : child;\n\n            if (intersects(bbox, childBBox)) {\n                if (node.leaf || contains(bbox, childBBox)) { return true; }\n                nodesToSearch.push(child);\n            }\n        }\n        node = nodesToSearch.pop();\n    }\n\n    return false;\n};\n\nRBush.prototype.load = function load (data) {\n    if (!(data && data.length)) { return this; }\n\n    if (data.length < this._minEntries) {\n        for (var i = 0; i < data.length; i++) {\n            this.insert(data[i]);\n        }\n        return this;\n    }\n\n    // recursively build the tree with the given data from scratch using OMT algorithm\n    var node = this._build(data.slice(), 0, data.length - 1, 0);\n\n    if (!this.data.children.length) {\n        // save as is if tree is empty\n        this.data = node;\n\n    } else if (this.data.height === node.height) {\n        // split root if trees have the same height\n        this._splitRoot(this.data, node);\n\n    } else {\n        if (this.data.height < node.height) {\n            // swap trees if inserted one is bigger\n            var tmpNode = this.data;\n            this.data = node;\n            node = tmpNode;\n        }\n\n        // insert the small tree into the large tree at appropriate level\n        this._insert(node, this.data.height - node.height - 1, true);\n    }\n\n    return this;\n};\n\nRBush.prototype.insert = function insert (item) {\n    if (item) { this._insert(item, this.data.height - 1); }\n    return this;\n};\n\nRBush.prototype.clear = function clear () {\n    this.data = createNode([]);\n    return this;\n};\n\nRBush.prototype.remove = function remove (item, equalsFn) {\n    if (!item) { return this; }\n\n    var node = this.data;\n    var bbox = this.toBBox(item);\n    var path = [];\n    var indexes = [];\n    var i, parent, goingUp;\n\n    // depth-first iterative tree traversal\n    while (node || path.length) {\n\n        if (!node) { // go up\n            node = path.pop();\n            parent = path[path.length - 1];\n            i = indexes.pop();\n            goingUp = true;\n        }\n\n        if (node.leaf) { // check current node\n            var index = findItem(item, node.children, equalsFn);\n\n            if (index !== -1) {\n                // item found, remove the item and condense tree upwards\n                node.children.splice(index, 1);\n                path.push(node);\n                this._condense(path);\n                return this;\n            }\n        }\n\n        if (!goingUp && !node.leaf && contains(node, bbox)) { // go down\n            path.push(node);\n            indexes.push(i);\n            i = 0;\n            parent = node;\n            node = node.children[0];\n\n        } else if (parent) { // go right\n            i++;\n            node = parent.children[i];\n            goingUp = false;\n\n        } else { node = null; } // nothing found\n    }\n\n    return this;\n};\n\nRBush.prototype.toBBox = function toBBox (item) { return item; };\n\nRBush.prototype.compareMinX = function compareMinX (a, b) { return a.minX - b.minX; };\nRBush.prototype.compareMinY = function compareMinY (a, b) { return a.minY - b.minY; };\n\nRBush.prototype.toJSON = function toJSON () { return this.data; };\n\nRBush.prototype.fromJSON = function fromJSON (data) {\n    this.data = data;\n    return this;\n};\n\nRBush.prototype._all = function _all (node, result) {\n    var nodesToSearch = [];\n    while (node) {\n        if (node.leaf) { result.push.apply(result, node.children); }\n        else { nodesToSearch.push.apply(nodesToSearch, node.children); }\n\n        node = nodesToSearch.pop();\n    }\n    return result;\n};\n\nRBush.prototype._build = function _build (items, left, right, height) {\n\n    var N = right - left + 1;\n    var M = this._maxEntries;\n    var node;\n\n    if (N <= M) {\n        // reached leaf level; return leaf\n        node = createNode(items.slice(left, right + 1));\n        calcBBox(node, this.toBBox);\n        return node;\n    }\n\n    if (!height) {\n        // target height of the bulk-loaded tree\n        height = Math.ceil(Math.log(N) / Math.log(M));\n\n        // target number of root entries to maximize storage utilization\n        M = Math.ceil(N / Math.pow(M, height - 1));\n    }\n\n    node = createNode([]);\n    node.leaf = false;\n    node.height = height;\n\n    // split the items into M mostly square tiles\n\n    var N2 = Math.ceil(N / M);\n    var N1 = N2 * Math.ceil(Math.sqrt(M));\n\n    multiSelect(items, left, right, N1, this.compareMinX);\n\n    for (var i = left; i <= right; i += N1) {\n\n        var right2 = Math.min(i + N1 - 1, right);\n\n        multiSelect(items, i, right2, N2, this.compareMinY);\n\n        for (var j = i; j <= right2; j += N2) {\n\n            var right3 = Math.min(j + N2 - 1, right2);\n\n            // pack each entry recursively\n            node.children.push(this._build(items, j, right3, height - 1));\n        }\n    }\n\n    calcBBox(node, this.toBBox);\n\n    return node;\n};\n\nRBush.prototype._chooseSubtree = function _chooseSubtree (bbox, node, level, path) {\n    while (true) {\n        path.push(node);\n\n        if (node.leaf || path.length - 1 === level) { break; }\n\n        var minArea = Infinity;\n        var minEnlargement = Infinity;\n        var targetNode = (void 0);\n\n        for (var i = 0; i < node.children.length; i++) {\n            var child = node.children[i];\n            var area = bboxArea(child);\n            var enlargement = enlargedArea(bbox, child) - area;\n\n            // choose entry with the least area enlargement\n            if (enlargement < minEnlargement) {\n                minEnlargement = enlargement;\n                minArea = area < minArea ? area : minArea;\n                targetNode = child;\n\n            } else if (enlargement === minEnlargement) {\n                // otherwise choose one with the smallest area\n                if (area < minArea) {\n                    minArea = area;\n                    targetNode = child;\n                }\n            }\n        }\n\n        node = targetNode || node.children[0];\n    }\n\n    return node;\n};\n\nRBush.prototype._insert = function _insert (item, level, isNode) {\n    var bbox = isNode ? item : this.toBBox(item);\n    var insertPath = [];\n\n    // find the best node for accommodating the item, saving all nodes along the path too\n    var node = this._chooseSubtree(bbox, this.data, level, insertPath);\n\n    // put the item into the node\n    node.children.push(item);\n    extend(node, bbox);\n\n    // split on node overflow; propagate upwards if necessary\n    while (level >= 0) {\n        if (insertPath[level].children.length > this._maxEntries) {\n            this._split(insertPath, level);\n            level--;\n        } else { break; }\n    }\n\n    // adjust bboxes along the insertion path\n    this._adjustParentBBoxes(bbox, insertPath, level);\n};\n\n// split overflowed node into two\nRBush.prototype._split = function _split (insertPath, level) {\n    var node = insertPath[level];\n    var M = node.children.length;\n    var m = this._minEntries;\n\n    this._chooseSplitAxis(node, m, M);\n\n    var splitIndex = this._chooseSplitIndex(node, m, M);\n\n    var newNode = createNode(node.children.splice(splitIndex, node.children.length - splitIndex));\n    newNode.height = node.height;\n    newNode.leaf = node.leaf;\n\n    calcBBox(node, this.toBBox);\n    calcBBox(newNode, this.toBBox);\n\n    if (level) { insertPath[level - 1].children.push(newNode); }\n    else { this._splitRoot(node, newNode); }\n};\n\nRBush.prototype._splitRoot = function _splitRoot (node, newNode) {\n    // split root node\n    this.data = createNode([node, newNode]);\n    this.data.height = node.height + 1;\n    this.data.leaf = false;\n    calcBBox(this.data, this.toBBox);\n};\n\nRBush.prototype._chooseSplitIndex = function _chooseSplitIndex (node, m, M) {\n    var index;\n    var minOverlap = Infinity;\n    var minArea = Infinity;\n\n    for (var i = m; i <= M - m; i++) {\n        var bbox1 = distBBox(node, 0, i, this.toBBox);\n        var bbox2 = distBBox(node, i, M, this.toBBox);\n\n        var overlap = intersectionArea(bbox1, bbox2);\n        var area = bboxArea(bbox1) + bboxArea(bbox2);\n\n        // choose distribution with minimum overlap\n        if (overlap < minOverlap) {\n            minOverlap = overlap;\n            index = i;\n\n            minArea = area < minArea ? area : minArea;\n\n        } else if (overlap === minOverlap) {\n            // otherwise choose distribution with minimum area\n            if (area < minArea) {\n                minArea = area;\n                index = i;\n            }\n        }\n    }\n\n    return index || M - m;\n};\n\n// sorts node children by the best axis for split\nRBush.prototype._chooseSplitAxis = function _chooseSplitAxis (node, m, M) {\n    var compareMinX = node.leaf ? this.compareMinX : compareNodeMinX;\n    var compareMinY = node.leaf ? this.compareMinY : compareNodeMinY;\n    var xMargin = this._allDistMargin(node, m, M, compareMinX);\n    var yMargin = this._allDistMargin(node, m, M, compareMinY);\n\n    // if total distributions margin value is minimal for x, sort by minX,\n    // otherwise it's already sorted by minY\n    if (xMargin < yMargin) { node.children.sort(compareMinX); }\n};\n\n// total margin of all possible split distributions where each node is at least m full\nRBush.prototype._allDistMargin = function _allDistMargin (node, m, M, compare) {\n    node.children.sort(compare);\n\n    var toBBox = this.toBBox;\n    var leftBBox = distBBox(node, 0, m, toBBox);\n    var rightBBox = distBBox(node, M - m, M, toBBox);\n    var margin = bboxMargin(leftBBox) + bboxMargin(rightBBox);\n\n    for (var i = m; i < M - m; i++) {\n        var child = node.children[i];\n        extend(leftBBox, node.leaf ? toBBox(child) : child);\n        margin += bboxMargin(leftBBox);\n    }\n\n    for (var i$1 = M - m - 1; i$1 >= m; i$1--) {\n        var child$1 = node.children[i$1];\n        extend(rightBBox, node.leaf ? toBBox(child$1) : child$1);\n        margin += bboxMargin(rightBBox);\n    }\n\n    return margin;\n};\n\nRBush.prototype._adjustParentBBoxes = function _adjustParentBBoxes (bbox, path, level) {\n    // adjust bboxes along the given tree path\n    for (var i = level; i >= 0; i--) {\n        extend(path[i], bbox);\n    }\n};\n\nRBush.prototype._condense = function _condense (path) {\n    // go through the path, removing empty nodes and updating bboxes\n    for (var i = path.length - 1, siblings = (void 0); i >= 0; i--) {\n        if (path[i].children.length === 0) {\n            if (i > 0) {\n                siblings = path[i - 1].children;\n                siblings.splice(siblings.indexOf(path[i]), 1);\n\n            } else { this.clear(); }\n\n        } else { calcBBox(path[i], this.toBBox); }\n    }\n};\n\nfunction findItem(item, items, equalsFn) {\n    if (!equalsFn) { return items.indexOf(item); }\n\n    for (var i = 0; i < items.length; i++) {\n        if (equalsFn(item, items[i])) { return i; }\n    }\n    return -1;\n}\n\n// calculate node's bbox from bboxes of its children\nfunction calcBBox(node, toBBox) {\n    distBBox(node, 0, node.children.length, toBBox, node);\n}\n\n// min bounding rectangle of node children from k to p-1\nfunction distBBox(node, k, p, toBBox, destNode) {\n    if (!destNode) { destNode = createNode(null); }\n    destNode.minX = Infinity;\n    destNode.minY = Infinity;\n    destNode.maxX = -Infinity;\n    destNode.maxY = -Infinity;\n\n    for (var i = k; i < p; i++) {\n        var child = node.children[i];\n        extend(destNode, node.leaf ? toBBox(child) : child);\n    }\n\n    return destNode;\n}\n\nfunction extend(a, b) {\n    a.minX = Math.min(a.minX, b.minX);\n    a.minY = Math.min(a.minY, b.minY);\n    a.maxX = Math.max(a.maxX, b.maxX);\n    a.maxY = Math.max(a.maxY, b.maxY);\n    return a;\n}\n\nfunction compareNodeMinX(a, b) { return a.minX - b.minX; }\nfunction compareNodeMinY(a, b) { return a.minY - b.minY; }\n\nfunction bboxArea(a)   { return (a.maxX - a.minX) * (a.maxY - a.minY); }\nfunction bboxMargin(a) { return (a.maxX - a.minX) + (a.maxY - a.minY); }\n\nfunction enlargedArea(a, b) {\n    return (Math.max(b.maxX, a.maxX) - Math.min(b.minX, a.minX)) *\n           (Math.max(b.maxY, a.maxY) - Math.min(b.minY, a.minY));\n}\n\nfunction intersectionArea(a, b) {\n    var minX = Math.max(a.minX, b.minX);\n    var minY = Math.max(a.minY, b.minY);\n    var maxX = Math.min(a.maxX, b.maxX);\n    var maxY = Math.min(a.maxY, b.maxY);\n\n    return Math.max(0, maxX - minX) *\n           Math.max(0, maxY - minY);\n}\n\nfunction contains(a, b) {\n    return a.minX <= b.minX &&\n           a.minY <= b.minY &&\n           b.maxX <= a.maxX &&\n           b.maxY <= a.maxY;\n}\n\nfunction intersects(a, b) {\n    return b.minX <= a.maxX &&\n           b.minY <= a.maxY &&\n           b.maxX >= a.minX &&\n           b.maxY >= a.minY;\n}\n\nfunction createNode(children) {\n    return {\n        children: children,\n        height: 1,\n        leaf: true,\n        minX: Infinity,\n        minY: Infinity,\n        maxX: -Infinity,\n        maxY: -Infinity\n    };\n}\n\n// sort an array so that items come in groups of n unsorted items, with groups sorted between each other;\n// combines selection algorithm with binary divide & conquer approach\n\nfunction multiSelect(arr, left, right, n, compare) {\n    var stack = [left, right];\n\n    while (stack.length) {\n        right = stack.pop();\n        left = stack.pop();\n\n        if (right - left <= n) { continue; }\n\n        var mid = left + Math.ceil((right - left) / n / 2) * n;\n        quickselect(arr, mid, left, right, compare);\n\n        stack.push(left, mid, mid, right);\n    }\n}\n\nreturn RBush;\n\n}));\n", "import type { IRenderer } from './AbstractRenderer';\nimport type {\n  CSSGlobalKeywords,\n  CSSGradientValue,\n  CSSRGB,\n  CSSUnitValue,\n} from './css';\nimport type {\n  ParsedFilterStyleProperty,\n  ParsedTransform,\n  Pattern,\n} from './css/parser';\nimport type { DisplayObject } from './display-objects';\nimport type { IWindow } from './dom/interfaces';\n\nexport enum Shape {\n  GROUP = 'g',\n  FRAGMENT = 'fragment',\n  CIRCLE = 'circle',\n  ELLIPSE = 'ellipse',\n  IMAGE = 'image',\n  RECT = 'rect',\n  LINE = 'line',\n  POLYLINE = 'polyline',\n  POLYGON = 'polygon',\n  TEXT = 'text',\n  PATH = 'path',\n  HTML = 'html',\n  MESH = 'mesh',\n}\n\ntype ColorType = string | null;\n\nexport interface EventPosition {\n  clientX: number;\n  clientY: number;\n  viewportX: number;\n  viewportY: number;\n  x: number;\n  y: number;\n}\n\nexport type TransformType =\n  | 'matrix'\n  | 'matrix3d'\n  | 'rotate'\n  | 'rotateX'\n  | 'rotateY'\n  | 'rotateZ'\n  | 'rotate3d'\n  | 'scale'\n  | 'scaleX'\n  | 'scaleY'\n  | 'scaleZ'\n  | 'scale3d'\n  | 'skew'\n  | 'skewX'\n  | 'skewY'\n  | 'translate'\n  | 'translateX'\n  | 'translateY'\n  | 'translateZ'\n  | 'translate3d';\nexport type TransformScale = ['scale', number, number?];\nexport type TransformScaleX = ['scaleX', number];\nexport type TransformScaleY = ['scaleY', number];\nexport type TransformScaleZ = ['scaleZ', number];\nexport type TransformScale3d = ['scale3d', number, number, number];\nexport type TransformTranslate = ['translate', number, number?];\nexport type TransformTranslateX = ['translateX', number];\nexport type TransformTranslateY = ['translateY', number];\nexport type TransformTranslateZ = ['translateZ', number];\nexport type TransformTranslate3d = ['translate3d', number, number, number];\nexport type TransformRotate = ['rotate', number];\nexport type TransformRotateX = ['rotateX', number];\nexport type TransformRotateY = ['rotateY', number];\nexport type TransformRotateZ = ['rotateZ', number];\nexport type TransformRotate3d = ['rotate3d', number, number, number, number?];\nexport type TransformSkew = ['skew', number, number?];\nexport type TransformSkewX = ['skewX', number];\nexport type TransformSkewY = ['skewY', number];\n// prettier-ignore\nexport type TransformMatrix = [\n  'matrix',\n  number, number, // a, b\n  number, number, // c, d\n  number, number, // tx, ty\n];\n// prettier-ignore\nexport type TransformMatrix3d = [\n  'matrix3d',\n  number, number, number, number,\n  number, number, number, number,\n  number, number, number, number,\n  number, number, number, number,\n];\n\nexport type TransformArray = (\n  | TransformScale\n  | TransformScaleX\n  | TransformScaleY\n  | TransformScaleZ\n  | TransformScale3d\n  | TransformTranslate\n  | TransformTranslateX\n  | TransformTranslateY\n  | TransformTranslateZ\n  | TransformTranslate3d\n  | TransformRotate\n  | TransformRotateX\n  | TransformRotateY\n  | TransformRotateZ\n  | TransformRotate3d\n  | TransformSkew\n  | TransformSkewX\n  | TransformSkewY\n  | TransformMatrix\n  | TransformMatrix3d\n)[];\nexport type TextTransform = 'capitalize' | 'uppercase' | 'lowercase' | 'none';\nexport type TextOverflow = 'clip' | 'ellipsis' | string;\nexport type TextDecorationLine = string | 'none';\nexport type TextDecorationStyle =\n  | 'solid'\n  | 'double'\n  | 'dotted'\n  | 'dashed'\n  | 'wavy';\n\nexport interface BaseStyleProps {\n  class?: string;\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/CSS/transform\n   */\n  transform?: string | TransformArray;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/CSS/transform-origin\n   */\n  transformOrigin?: string;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/CSS/visibility\n   */\n  visibility?: 'visible' | 'hidden' | CSSGlobalKeywords;\n\n  /**\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/CSS/pointer-events\n   */\n  pointerEvents?:\n    | 'none'\n    | 'auto'\n    | 'stroke'\n    | 'fill'\n    | 'painted'\n    | 'visible'\n    | 'visiblestroke'\n    | 'visiblefill'\n    | 'visiblepainted'\n    // | 'bounding-box'\n    | 'all'\n    | 'non-transparent-pixel' // valid only for Image\n    | CSSGlobalKeywords;\n\n  /**\n   * z-index in CSS\n   */\n  zIndex?: number;\n\n  /**\n   * the cursor style when the target is active\n   */\n  cursor?: Cursor;\n\n  /**\n   * clip path\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/CSS/clip-path\n   */\n  clipPath?: DisplayObject | null;\n\n  /**\n   * offset path\n   * @see https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Motion_Path\n   */\n  offsetPath?: DisplayObject | null;\n  offsetDistance?: number;\n\n  stroke?: ColorType | Pattern;\n  /**  */\n  strokeOpacity?: number | string;\n  /**  */\n  fill?: ColorType | Pattern;\n  /**  */\n  fillOpacity?: number | string;\n\n  /**\n   * The fill-rule attribute is a presentation attribute defining the algorithm to use to determine the inside part of a shape.\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/SVG/Attribute/fill-rule\n   */\n  fillRule?: 'nonzero' | 'evenodd';\n\n  /**  */\n  opacity?: number | string;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/stroke-width\n   */\n  strokeWidth?: string | number;\n\n  /**\n   * alias if strokeWidth\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/lineWidth\n   */\n  lineWidth?: string | number;\n\n  /**\n   * increased line width when hitting test\n   */\n  increasedLineWidthForHitTesting?: string | number;\n  /**\n   * \n   */\n  hitArea?: DisplayObject | null;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/stroke-linecap\n   */\n  strokeLinecap?: CanvasLineCap;\n\n  /**\n   * alias of strokeLinecap\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/lineCap\n   */\n  lineCap?: CanvasLineCap;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/stroke-linejoin\n   */\n  strokeLinejoin?: CanvasLineJoin;\n\n  /**\n   * alias of strokeLinejoin\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/lineJoin\n   */\n  lineJoin?: CanvasLineJoin;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/stroke-dasharray\n   */\n  strokeDasharray?: string | (string | number)[];\n\n  /**\n   * alias of strokeDasharray\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/getLineDash\n   */\n  lineDash?: number | string | (string | number)[];\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/stroke-dashoffset\n   */\n  strokeDashoffset?: number;\n\n  /**\n   * alias of strokeDashoffset\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/lineDashOffset\n   */\n  lineDashOffset?: number;\n\n  shadowType?: 'inner' | 'outer' | 'both';\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/shadowBlur\n   */\n  shadowBlur?: number;\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/shadowColor\n   */\n  shadowColor?: ColorType;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/shadowOffsetX\n   */\n  shadowOffsetX?: number;\n\n  /**\n   * https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/shadowOffsetY\n   */\n  shadowOffsetY?: number;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/CSS/filter\n   */\n  filter?: string;\n\n  /**\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/CSS/text-transform\n   */\n  textTransform?: TextTransform | '';\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/miterLimit\n   */\n  miterLimit?: number | string;\n\n  display?: string;\n\n  /**\n   * @see https://g-next.antv.vision/zh/docs/plugins/dragndrop#drag\n   */\n  draggable?: boolean;\n\n  /**\n   * @see https://g-next.antv.vision/zh/docs/plugins/dragndrop#drop\n   */\n  droppable?: boolean;\n}\n\nexport interface ParsedBaseStyleProps\n  extends Omit<\n    BaseStyleProps,\n    | 'fill'\n    | 'stroke'\n    | 'lineWidth'\n    | 'increasedLineWidthForHitTesting'\n    | 'lineDash'\n    | 'points'\n    | 'shadowColor'\n    | 'transform'\n    | 'transformOrigin'\n    | 'miterLimit'\n    | 'filter'\n    | 'opacity'\n    | 'fillOpacity'\n    | 'strokeOpacity'\n  > {\n  opacity?: number;\n  fillOpacity?: number;\n  strokeOpacity?: number;\n\n  fill?: CSSRGB | CSSGradientValue[] | Pattern;\n  stroke?: CSSRGB | CSSGradientValue[] | Pattern;\n  lineDash?: [number, number];\n\n  transform: ParsedTransform[];\n  transformOrigin?: [CSSUnitValue, CSSUnitValue, CSSUnitValue];\n\n  lineWidth?: number;\n  increasedLineWidthForHitTesting?: number;\n  /**\n   * offset relative to initial definition\n   */\n  offsetX?: number;\n  offsetY?: number;\n  shadowColor?: CSSRGB;\n  miterLimit?: number;\n  filter?: ParsedFilterStyleProperty[];\n}\n\n// Cursor style\n// See: https://developer.mozilla.org/en-US/docs/Web/CSS/cursor\nexport type Cursor =\n  | 'auto'\n  | 'default'\n  | 'none'\n  | 'context-menu'\n  | 'help'\n  | 'pointer'\n  | 'progress'\n  | 'wait'\n  | 'cell'\n  | 'crosshair'\n  | 'text'\n  | 'vertical-text'\n  | 'alias'\n  | 'copy'\n  | 'move'\n  | 'no-drop'\n  | 'not-allowed'\n  | 'grab'\n  | 'grabbing'\n  | 'all-scroll'\n  | 'col-resize'\n  | 'row-resize'\n  | 'n-resize'\n  | 'e-resize'\n  | 's-resize'\n  | 'w-resize'\n  | 'ne-resize'\n  | 'nw-resize'\n  | 'se-resize'\n  | 'sw-resize'\n  | 'ew-resize'\n  | 'ns-resize'\n  | 'nesw-resize'\n  | 'nwse-resize'\n  | 'zoom-in'\n  | 'zoom-out';\n\nexport enum ClipSpaceNearZ {\n  ZERO,\n  NEGATIVE_ONE,\n}\n\nexport interface RendererConfig {\n  /**\n   * enable dirty check for displayobject\n   */\n  enableDirtyCheck: boolean;\n\n  /**\n   * enable culling\n   */\n  enableCulling: boolean;\n\n  /**\n   * enable dirty rectangle rendering\n   */\n  enableDirtyRectangleRendering: boolean;\n\n  /**\n   * enable debugging dirty rectangle, Canvas will trigger CanvasEvent.DIRTY_RECTANGLE\n   */\n  enableDirtyRectangleRenderingDebug: boolean;\n\n  /**\n   * enable auto rendering\n   */\n  enableAutoRendering: boolean;\n\n  /**\n   * Canvas / SVG / Canvaskit should listen to camera changed events, while WebGL / WebGPU will apply this effect in shader.\n   */\n  enableSizeAttenuation: boolean;\n\n  /**\n   * Enable rendering optimization\n   *\n   * After rendering optimization is enabled, the rendering of each element in each frame will not have\n   * an independent canvas context state, but the state consistency is maintained by caching,\n   * because the save() and restore() of the canvas context state are expensive.\n   *\n   * ! Errors may occur due to manual maintenance of the canvas context state consistency\n   *\n   * @default false\n   */\n  enableRenderingOptimization: boolean;\n\n  // plugins:\n}\n\n/**\n * eg. NodeCanvas, OffscreenCanvas, HTMLCanvasElement\n */\nexport interface CanvasLike extends EventTarget {\n  width: number;\n  height: number;\n\n  getContext: ((\n    contextId: '2d',\n    contextAttributes?: CanvasRenderingContext2DSettings,\n  ) => CanvasRenderingContext2D | null) &\n    ((\n      contextId: 'webgl',\n      contextAttributes?: WebGLContextAttributes,\n    ) => WebGLRenderingContext | null) &\n    ((\n      contextId: 'webgl2',\n      contextAttributes?: WebGLContextAttributes,\n    ) => WebGL2RenderingContext | null);\n\n  addEventListener: (<K extends keyof HTMLElementEventMap>(\n    type: K,\n    listener: (this: HTMLCanvasElement, ev: HTMLElementEventMap[K]) => any,\n    options?: boolean | AddEventListenerOptions,\n  ) => void) &\n    ((\n      type: string,\n      listener: EventListenerOrEventListenerObject,\n      options?: boolean | AddEventListenerOptions,\n    ) => void);\n  removeEventListener: (<K extends keyof HTMLElementEventMap>(\n    type: K,\n    listener: (this: HTMLCanvasElement, ev: HTMLElementEventMap[K]) => any,\n    options?: boolean | EventListenerOptions,\n  ) => void) &\n    ((\n      type: string,\n      listener: EventListenerOrEventListenerObject,\n      options?: boolean | EventListenerOptions,\n    ) => void);\n}\n\nexport interface CanvasConfig extends Partial<Omit<IWindow, 'customElements'>> {\n  /**\n   * When the renderer is initialized, a `<canvas>/<svg>` element is automatically\n   * created inside the container DOM element.\n   */\n  container?: string | HTMLElement;\n  /**\n   * When this parameter is passed, the `container` parameter will be ignored.\n   *\n   * - support OffscreenCanvas\n   */\n  canvas?: CanvasLike;\n  /**\n   * Renderer\n   *\n   * @see https://g.antv.antgroup.com/api/renderer/intro\n   */\n  renderer: IRenderer;\n\n  /**\n   * \n   */\n  width?: number;\n  /**\n   * \n   */\n  height?: number;\n  /**\n   * \n   */\n  background?: ColorType;\n  /**\n   * cursor style\n   */\n  cursor?: Cursor;\n\n  /**\n   * One container can have multiple canvases inside.\n   */\n  supportsMutipleCanvasesInOneContainer?: boolean;\n\n  // #region performance\n  /**\n   * Optimize rendering performance for high-resolution large images\n   */\n  enableLargeImageOptimization?:\n    | boolean\n    | {\n        /**\n         * Downsampling rate threshold, [0.01, 0.5], represents the ratio of reducing the image.\n         * For example, 0.3 means reducing the original image to 0.3 times of the original.\n         *\n         * default 0.5\n         */\n        downSamplingRateThreshold?: number;\n        /**\n         * The maximum size of the downsampled image, with equal width and height.\n         *\n         * default 2048\n         */\n        maxDownSampledImageSize?: number;\n      };\n  /**\n   * Enabling some features for the future.\n   *\n   * ! These are some experimental functional features that are currently unstable.\n   *\n   * future flag, concept referenced from:\n   * - https://remix.run/docs/en/main/guides/api-development-strategy#unstable-apis-and-future-flags,\n   * - https://remix.run/blog/future-flags\n   */\n  future?: {\n    /**\n     * Only implement bubbling propagation for necessary events.\n     * At the same time, some events will skip the process of building event objects and\n     * directly trigger events themselves.\n     */\n    experimentalCancelEventPropagation?: boolean;\n    /**\n     * When enabled, elements are no longer updated in real time, but are updated uniformly before being submitted to the canvas. This is to improve performance and avoid redundant loop logic.\n     */\n    experimentalAttributeUpdateOptimization?: boolean;\n    /**\n     * use RIC to avoid frequent calls syncRTree\n     */\n    experimentalRICSyncRTree?: boolean;\n  };\n  // #endregion performance\n\n  /**\n   * Listen to native click event instead of mocking with pointerup & down events.\n   */\n  useNativeClickEvent?: boolean;\n\n  /**\n   * Pointermove / up / cancel event will get triggered even outside Canvas.\n   */\n  alwaysTriggerPointerEventOnCanvas?: boolean;\n\n  /**\n   * Enable event service\n   */\n  disableHitTesting?: boolean;\n\n  /**\n   * Skip triggering hooks.beforeRender/render/afterRender\n   */\n  disableRenderHooks?: boolean;\n\n  /**\n   * \n   */\n  cleanUpOnDestroy?: boolean;\n\n  /**\n   * used in JSDOM\n   */\n  document?: Document;\n  /**\n   * used in text measurement & texture generation\n   */\n  offscreenCanvas?: CanvasLike;\n  /**\n   * replace `new window.Image()`\n   */\n  createImage?: () => HTMLImageElement;\n  /**\n   * double click speed (ms)\n   *\n   * - default is 200ms\n   */\n  dblClickSpeed?: number;\n}\n\n/**\n * The format to use when defining custom easing functions\n */\nexport type TypeEasingFunction = (\n  t: number,\n  params?: (string | number)[],\n  duration?: number,\n) => number;\n\nexport type InteractivePointerEvent =\n  | PointerEvent\n  | TouchEvent\n  | MouseEvent\n  | WheelEvent;\n\n// @see https://github.com/zhanba/pailye/blob/master/packages/flex/src/types.ts\nexport type Tuple4<T> = [T, T, T, T];\n\nexport type Tuple4Number = Tuple4<number>;\n\nexport type Tuple3<T> = [T, T, T];\n\nexport type Tuple3Number = Tuple3<number>;\n\nexport type ComninedValue<T> = T | [T] | [T, T] | [T, T, T] | Tuple4<T>;\n\nexport type CombinedNumber = ComninedValue<number>;\n\nexport type Length = number;\n\ntype Digit = 0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9;\n\nexport type Percentage = `${Digit}%` | `${Digit}${Digit}%`;\n\nexport type LengthOrPercentage = Length | Percentage;\nexport type LengthOrPercentageOrAuto = Length | Percentage | 'auto';\n", "/* eslint-disable max-classes-per-file */\nimport type { CanvasContext } from './dom';\nimport { GlobalRuntime } from './global-runtime';\nimport type { RenderingPlugin } from './services';\nimport { ClipSpaceNearZ, RendererConfig } from './types';\n\nexport interface RendererPlugin {\n  name: string;\n  context: CanvasContext;\n  init: (runtime: GlobalRuntime) => void;\n  destroy: (runtime: GlobalRuntime) => void;\n}\n\nexport abstract class AbstractRendererPlugin<T = any>\n  implements RendererPlugin\n{\n  context: CanvasContext & T;\n  protected plugins = [];\n\n  protected addRenderingPlugin(plugin: RenderingPlugin) {\n    this.plugins.push(plugin);\n    this.context.renderingPlugins.push(plugin);\n  }\n\n  protected removeAllRenderingPlugins() {\n    this.plugins.forEach((plugin) => {\n      const index = this.context.renderingPlugins.indexOf(plugin);\n      if (index >= 0) {\n        this.context.renderingPlugins.splice(index, 1);\n      }\n    });\n  }\n\n  abstract name: string;\n  abstract init(runtime: GlobalRuntime): void;\n  abstract destroy(runtime: GlobalRuntime): void;\n}\n\nexport interface IRenderer {\n  /**\n   * The near/far clip planes correspond to a normalized device coordinate Z range of [0, 1],\n   * which matches WebGPU/Vulkan/DirectX/Metal's clip volume, while [-1, 1] matches WebGL/OpenGL's clip volume.\n   */\n  clipSpaceNearZ: ClipSpaceNearZ;\n\n  getConfig: () => RendererConfig;\n\n  /**\n   * register plugin at runtime\n   */\n  registerPlugin: (plugin: RendererPlugin) => void;\n\n  /**\n   * unregister plugin at runtime\n   */\n  unregisterPlugin: (plugin: RendererPlugin) => void;\n\n  /**\n   * get plugin by name\n   */\n  getPlugin: (name: string) => RendererPlugin;\n\n  /**\n   * return all registered plugins\n   */\n  getPlugins: () => RendererPlugin[];\n}\n\nexport class AbstractRenderer implements IRenderer {\n  clipSpaceNearZ = ClipSpaceNearZ.NEGATIVE_ONE;\n  private plugins: RendererPlugin[] = [];\n  private config: RendererConfig;\n\n  constructor(config?: Partial<RendererConfig>) {\n    this.config = {\n      /**\n       * only dirty object will cause re-render\n       */\n      enableDirtyCheck: true,\n      enableCulling: false,\n      /**\n       * enable auto rendering by default\n       */\n      enableAutoRendering: true,\n      /**\n       * enable dirty rectangle rendering by default\n       */\n      enableDirtyRectangleRendering: true,\n      enableDirtyRectangleRenderingDebug: false,\n      enableSizeAttenuation: true,\n      enableRenderingOptimization: false,\n      ...config,\n    };\n  }\n\n  registerPlugin(plugin: RendererPlugin) {\n    const index = this.plugins.findIndex((p) => p === plugin);\n    if (index === -1) {\n      this.plugins.push(plugin);\n    }\n  }\n\n  unregisterPlugin(plugin: RendererPlugin) {\n    const index = this.plugins.findIndex((p) => p === plugin);\n    if (index > -1) {\n      this.plugins.splice(index, 1);\n    }\n  }\n\n  getPlugins() {\n    return this.plugins;\n  }\n\n  getPlugin(name: string) {\n    return this.plugins.find((plugin) => plugin.name === name);\n  }\n\n  getConfig() {\n    return this.config;\n  }\n\n  setConfig(config: Partial<RendererConfig>) {\n    Object.assign(this.config, config);\n  }\n}\n", "import type { mat4 } from 'gl-matrix';\nimport { vec3 } from 'gl-matrix';\nimport { Tuple3Number } from '../types';\nimport type { Plane } from './Plane';\n\nconst {\n  add: addVec3,\n  copy: copyVec3,\n  max: maxVec3,\n  min: minVec3,\n  scale: scaleVec3,\n  sub: subVec3,\n} = vec3;\n\n/**\n * Axis-Aligned Bounding Box\n *  Frustum Culling p-vertex  n-vertex\n * @see https://github.com/antvis/GWebGPUEngine/issues/3\n */\nexport class AABB {\n  static isEmpty(aabb: AABB) {\n    return (\n      !aabb ||\n      (aabb.halfExtents[0] === 0 &&\n        aabb.halfExtents[1] === 0 &&\n        aabb.halfExtents[2] === 0)\n    );\n  }\n\n  center: Tuple3Number = [0, 0, 0];\n  halfExtents: Tuple3Number = [0, 0, 0];\n  min: Tuple3Number = [0, 0, 0];\n  max: Tuple3Number = [0, 0, 0];\n\n  update(center: Tuple3Number, halfExtents: Tuple3Number) {\n    copyVec3(this.center, center);\n    copyVec3(this.halfExtents, halfExtents);\n    subVec3(this.min, this.center, this.halfExtents);\n    addVec3(this.max, this.center, this.halfExtents);\n  }\n\n  setMinMax(min: Tuple3Number, max: Tuple3Number) {\n    addVec3(this.center, max, min);\n    scaleVec3(this.center, this.center, 0.5);\n    subVec3(this.halfExtents, max, min);\n    scaleVec3(this.halfExtents, this.halfExtents, 0.5);\n    copyVec3(this.min, min);\n    copyVec3(this.max, max);\n  }\n\n  getMin() {\n    return this.min;\n  }\n\n  getMax() {\n    return this.max;\n  }\n\n  add(aabb: AABB) {\n    if (AABB.isEmpty(aabb)) {\n      return;\n    }\n    if (AABB.isEmpty(this)) {\n      this.setMinMax(aabb.getMin(), aabb.getMax());\n      return;\n    }\n\n    const tc = this.center;\n    const tcx = tc[0];\n    const tcy = tc[1];\n    const tcz = tc[2];\n    const th = this.halfExtents;\n    const thx = th[0];\n    const thy = th[1];\n    const thz = th[2];\n    let tminx = tcx - thx;\n    let tmaxx = tcx + thx;\n    let tminy = tcy - thy;\n    let tmaxy = tcy + thy;\n    let tminz = tcz - thz;\n    let tmaxz = tcz + thz;\n\n    const oc = aabb.center;\n    const ocx = oc[0];\n    const ocy = oc[1];\n    const ocz = oc[2];\n    const oh = aabb.halfExtents;\n    const ohx = oh[0];\n    const ohy = oh[1];\n    const ohz = oh[2];\n    const ominx = ocx - ohx;\n    const omaxx = ocx + ohx;\n    const ominy = ocy - ohy;\n    const omaxy = ocy + ohy;\n    const ominz = ocz - ohz;\n    const omaxz = ocz + ohz;\n\n    if (ominx < tminx) {\n      tminx = ominx;\n    }\n    if (omaxx > tmaxx) {\n      tmaxx = omaxx;\n    }\n    if (ominy < tminy) {\n      tminy = ominy;\n    }\n    if (omaxy > tmaxy) {\n      tmaxy = omaxy;\n    }\n    if (ominz < tminz) {\n      tminz = ominz;\n    }\n    if (omaxz > tmaxz) {\n      tmaxz = omaxz;\n    }\n\n    tc[0] = (tminx + tmaxx) * 0.5;\n    tc[1] = (tminy + tmaxy) * 0.5;\n    tc[2] = (tminz + tmaxz) * 0.5;\n    th[0] = (tmaxx - tminx) * 0.5;\n    th[1] = (tmaxy - tminy) * 0.5;\n    th[2] = (tmaxz - tminz) * 0.5;\n\n    this.min[0] = tminx;\n    this.min[1] = tminy;\n    this.min[2] = tminz;\n    this.max[0] = tmaxx;\n    this.max[1] = tmaxy;\n    this.max[2] = tmaxz;\n  }\n\n  setFromTransformedAABB(aabb: AABB, m: mat4) {\n    const bc = this.center;\n    const br = this.halfExtents;\n    const ac = aabb.center;\n    const ar = aabb.halfExtents;\n\n    const mx0 = m[0];\n    const mx1 = m[4];\n    const mx2 = m[8];\n    const my0 = m[1];\n    const my1 = m[5];\n    const my2 = m[9];\n    const mz0 = m[2];\n    const mz1 = m[6];\n    const mz2 = m[10];\n\n    const mx0a = Math.abs(mx0);\n    const mx1a = Math.abs(mx1);\n    const mx2a = Math.abs(mx2);\n    const my0a = Math.abs(my0);\n    const my1a = Math.abs(my1);\n    const my2a = Math.abs(my2);\n    const mz0a = Math.abs(mz0);\n    const mz1a = Math.abs(mz1);\n    const mz2a = Math.abs(mz2);\n\n    bc[0] = m[12] + mx0 * ac[0] + mx1 * ac[1] + mx2 * ac[2];\n    bc[1] = m[13] + my0 * ac[0] + my1 * ac[1] + my2 * ac[2];\n    bc[2] = m[14] + mz0 * ac[0] + mz1 * ac[1] + mz2 * ac[2];\n\n    // vec3.set(\n    //   bc,\n    //   m[12] + mx0 * ac[0] + mx1 * ac[1] + mx2 * ac[2],\n    //   m[13] + my0 * ac[0] + my1 * ac[1] + my2 * ac[2],\n    //   m[14] + mz0 * ac[0] + mz1 * ac[1] + mz2 * ac[2],\n    // );\n\n    br[0] = mx0a * ar[0] + mx1a * ar[1] + mx2a * ar[2];\n    br[1] = my0a * ar[0] + my1a * ar[1] + my2a * ar[2];\n    br[2] = mz0a * ar[0] + mz1a * ar[1] + mz2a * ar[2];\n\n    // vec3.set(\n    //   br,\n    //   mx0a * ar[0] + mx1a * ar[1] + mx2a * ar[2],\n    //   my0a * ar[0] + my1a * ar[1] + my2a * ar[2],\n    //   mz0a * ar[0] + mz1a * ar[1] + mz2a * ar[2],\n    // );\n\n    // this.min = vec3.sub(this.min, bc, br);\n    // this.max = vec3.add(this.max, bc, br);\n\n    subVec3(this.min, bc, br);\n    addVec3(this.max, bc, br);\n  }\n\n  intersects(aabb: AABB) {\n    const aMax = this.getMax();\n    const aMin = this.getMin();\n    const bMax = aabb.getMax();\n    const bMin = aabb.getMin();\n\n    return (\n      aMin[0] <= bMax[0] &&\n      aMax[0] >= bMin[0] &&\n      aMin[1] <= bMax[1] &&\n      aMax[1] >= bMin[1] &&\n      aMin[2] <= bMax[2] &&\n      aMax[2] >= bMin[2]\n    );\n  }\n\n  intersection(aabb: AABB): AABB | null {\n    if (!this.intersects(aabb)) {\n      return null;\n    }\n\n    const intersection = new AABB();\n    const min = maxVec3(\n      [0, 0, 0],\n      this.getMin(),\n      aabb.getMin(),\n    ) as Tuple3Number;\n    const max = minVec3(\n      [0, 0, 0],\n      this.getMax(),\n      aabb.getMax(),\n    ) as Tuple3Number;\n    intersection.setMinMax(min, max);\n\n    return intersection;\n  }\n\n  /**\n   * get n-vertex\n   * @param plane plane of CullingVolume\n   */\n  getNegativeFarPoint(plane: Plane): Tuple3Number {\n    if (plane.pnVertexFlag === 0x111) {\n      return copyVec3([0, 0, 0], this.min) as Tuple3Number;\n      // return vec3.copy(vec3.create(), this.min);\n    }\n    if (plane.pnVertexFlag === 0x110) {\n      return [this.min[0], this.min[1], this.max[2]];\n      // return vec3.fromValues(this.min[0], this.min[1], this.max[2]);\n    }\n    if (plane.pnVertexFlag === 0x101) {\n      return [this.min[0], this.max[1], this.min[2]];\n      // return vec3.fromValues(this.min[0], this.max[1], this.min[2]);\n    }\n    if (plane.pnVertexFlag === 0x100) {\n      return [this.min[0], this.max[1], this.max[2]];\n      // return vec3.fromValues(this.min[0], this.max[1], this.max[2]);\n    }\n    if (plane.pnVertexFlag === 0x011) {\n      return [this.max[0], this.min[1], this.min[2]];\n      // return vec3.fromValues(this.max[0], this.min[1], this.min[2]);\n    }\n    if (plane.pnVertexFlag === 0x010) {\n      return [this.max[0], this.min[1], this.max[2]];\n      // return vec3.fromValues(this.max[0], this.min[1], this.max[2]);\n    }\n    if (plane.pnVertexFlag === 0x001) {\n      return [this.max[0], this.max[1], this.min[2]];\n      // return vec3.fromValues(this.max[0], this.max[1], this.min[2]);\n    }\n    return [this.max[0], this.max[1], this.max[2]];\n    // return vec3.fromValues(this.max[0], this.max[1], this.max[2]);\n  }\n\n  /**\n   * get p-vertex\n   * @param plane plane of CullingVolume\n   */\n  getPositiveFarPoint(plane: Plane): Tuple3Number {\n    if (plane.pnVertexFlag === 0x111) {\n      return copyVec3([0, 0, 0], this.max) as Tuple3Number;\n      // return vec3.copy(vec3.create(), this.max);\n    }\n    if (plane.pnVertexFlag === 0x110) {\n      return [this.max[0], this.max[1], this.min[2]];\n      // return vec3.fromValues(this.max[0], this.max[1], this.min[2]);\n    }\n    if (plane.pnVertexFlag === 0x101) {\n      return [this.max[0], this.min[1], this.max[2]];\n      // return vec3.fromValues(this.max[0], this.min[1], this.max[2]);\n    }\n    if (plane.pnVertexFlag === 0x100) {\n      return [this.max[0], this.min[1], this.min[2]];\n      // return vec3.fromValues(this.max[0], this.min[1], this.min[2]);\n    }\n    if (plane.pnVertexFlag === 0x011) {\n      return [this.min[0], this.max[1], this.max[2]];\n      // return vec3.fromValues(this.min[0], this.max[1], this.max[2]);\n    }\n    if (plane.pnVertexFlag === 0x010) {\n      return [this.min[0], this.max[1], this.min[2]];\n      // return vec3.fromValues(this.min[0], this.max[1], this.min[2]);\n    }\n    if (plane.pnVertexFlag === 0x001) {\n      return [this.min[0], this.min[1], this.max[2]];\n      // return vec3.fromValues(this.min[0], this.min[1], this.max[2]);\n    }\n    return [this.min[0], this.min[1], this.min[2]];\n    // return vec3.fromValues(this.min[0], this.min[1], this.min[2]);\n  }\n}\n", "import { vec3 } from 'gl-matrix';\n\nexport class Plane {\n  public distance: number;\n  public normal: vec3;\n\n  /**\n   * lookup table for p-vertex & n-vertex when doing frustum culling\n   */\n  public pnVertexFlag: number;\n\n  constructor(distance?: number, normal?: vec3) {\n    this.distance = distance || 0;\n    this.normal = normal || vec3.fromValues(0, 1, 0);\n    this.updatePNVertexFlag();\n  }\n\n  public updatePNVertexFlag() {\n    this.pnVertexFlag =\n      (Number(this.normal[0] >= 0) << 8) +\n      (Number(this.normal[1] >= 0) << 4) +\n      Number(this.normal[2] >= 0);\n  }\n\n  public distanceToPoint(point: vec3) {\n    return vec3.dot(point, this.normal) - this.distance;\n  }\n\n  public normalize() {\n    const invLen = 1 / vec3.len(this.normal);\n    vec3.scale(this.normal, this.normal, invLen);\n    this.distance *= invLen;\n  }\n\n  public intersectsLine(start: vec3, end: vec3, point?: vec3) {\n    const d0 = this.distanceToPoint(start);\n    const d1 = this.distanceToPoint(end);\n    const t = d0 / (d0 - d1);\n    const intersects = t >= 0 && t <= 1;\n    if (intersects && point) {\n      vec3.lerp(point, start, end, t);\n    }\n    return intersects;\n  }\n}\n", "import type { mat4 } from 'gl-matrix';\nimport { vec3 } from 'gl-matrix';\nimport { Plane } from './Plane';\n\nexport enum Mask {\n  OUTSIDE = 0xffffffff,\n  INSIDE = 0x00000000,\n  INDETERMINATE = 0x7fffffff,\n}\n\nexport class Frustum {\n  public planes: Plane[] = [];\n\n  constructor(planes?: Plane[]) {\n    if (planes) {\n      this.planes = planes;\n    } else {\n      for (let i = 0; i < 6; i++) {\n        this.planes.push(new Plane());\n      }\n    }\n  }\n\n  /**\n   * extract 6 planes from projectionMatrix\n   * @see http://www8.cs.umu.se/kurser/5DV051/HT12/lab/plane_extraction.pdf\n   */\n  public extractFromVPMatrix(projectionMatrix: mat4) {\n    // @ts-ignore\n    const [\n      m0,\n      m1,\n      m2,\n      m3,\n      m4,\n      m5,\n      m6,\n      m7,\n      m8,\n      m9,\n      m10,\n      m11,\n      m12,\n      m13,\n      m14,\n      m15,\n    ] = projectionMatrix;\n\n    // right\n    vec3.set(this.planes[0].normal, m3 - m0, m7 - m4, m11 - m8);\n    this.planes[0].distance = m15 - m12;\n\n    // left\n    vec3.set(this.planes[1].normal, m3 + m0, m7 + m4, m11 + m8);\n    this.planes[1].distance = m15 + m12;\n\n    // bottom\n    vec3.set(this.planes[2].normal, m3 + m1, m7 + m5, m11 + m9);\n    this.planes[2].distance = m15 + m13;\n\n    // top\n    vec3.set(this.planes[3].normal, m3 - m1, m7 - m5, m11 - m9);\n    this.planes[3].distance = m15 - m13;\n\n    // far\n    vec3.set(this.planes[4].normal, m3 - m2, m7 - m6, m11 - m10);\n    this.planes[4].distance = m15 - m14;\n\n    // near\n    vec3.set(this.planes[5].normal, m3 + m2, m7 + m6, m11 + m10);\n    this.planes[5].distance = m15 + m14;\n\n    this.planes.forEach((plane) => {\n      plane.normalize();\n      plane.updatePNVertexFlag();\n    });\n  }\n}\n", "export interface PointLike {\n  x: number;\n  y: number;\n}\n\nexport class Point {\n  x = 0;\n  y = 0;\n\n  constructor(x = 0, y = 0) {\n    this.x = x;\n    this.y = y;\n  }\n\n  clone(): Point {\n    return new Point(this.x, this.y);\n  }\n\n  copyFrom(p: Point) {\n    this.x = p.x;\n    this.y = p.y;\n  }\n}\n", "import { mat4, vec4 } from 'gl-matrix';\n\ntype RectangleLike = {\n  x: number;\n  y: number;\n  width: number;\n  height: number;\n};\n\nexport class Rectangle implements DOMRect {\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMRect/fromRect_static\n   */\n  static fromRect(rect: RectangleLike) {\n    return new Rectangle(rect.x, rect.y, rect.width, rect.height);\n  }\n\n  /**\n   * will return a new rect instance\n   */\n  static applyTransform(rect: Rectangle, matrix: mat4) {\n    const topLeft = vec4.fromValues(rect.x, rect.y, 0, 1);\n    const topRight = vec4.fromValues(rect.x + rect.width, rect.y, 0, 1);\n    const bottomLeft = vec4.fromValues(rect.x, rect.y + rect.height, 0, 1);\n    const bottomRight = vec4.fromValues(\n      rect.x + rect.width,\n      rect.y + rect.height,\n      0,\n      1,\n    );\n\n    const transformedTopLeft = vec4.create();\n    const transformedTopRight = vec4.create();\n    const transformedBottomLeft = vec4.create();\n    const transformedBottomRight = vec4.create();\n\n    vec4.transformMat4(transformedTopLeft, topLeft, matrix);\n    vec4.transformMat4(transformedTopRight, topRight, matrix);\n    vec4.transformMat4(transformedBottomLeft, bottomLeft, matrix);\n    vec4.transformMat4(transformedBottomRight, bottomRight, matrix);\n\n    const minX = Math.min(\n      transformedTopLeft[0],\n      transformedTopRight[0],\n      transformedBottomLeft[0],\n      transformedBottomRight[0],\n    );\n    const minY = Math.min(\n      transformedTopLeft[1],\n      transformedTopRight[1],\n      transformedBottomLeft[1],\n      transformedBottomRight[1],\n    );\n    const maxX = Math.max(\n      transformedTopLeft[0],\n      transformedTopRight[0],\n      transformedBottomLeft[0],\n      transformedBottomRight[0],\n    );\n    const maxY = Math.max(\n      transformedTopLeft[1],\n      transformedTopRight[1],\n      transformedBottomLeft[1],\n      transformedBottomRight[1],\n    );\n\n    return Rectangle.fromRect({\n      x: minX,\n      y: minY,\n      width: maxX - minX,\n      height: maxY - minY,\n    });\n  }\n\n  left: number;\n  right: number;\n  top: number;\n  bottom: number;\n  constructor(\n    public x: number,\n    public y: number,\n    public width: number,\n    public height: number,\n  ) {\n    this.left = x;\n    this.right = x + width;\n    this.top = y;\n    this.bottom = y + height;\n  }\n  toJSON() {}\n}\n", "export const ERROR_MSG_METHOD_NOT_IMPLEMENTED = 'Method not implemented.';\nexport const ERROR_MSG_USE_DOCUMENT_ELEMENT =\n  'Use document.documentElement instead.';\nexport const ERROR_MSG_APPEND_DESTROYED_ELEMENT =\n  'Cannot append a destroyed element.';\n", "import { isNumber } from '@antv/util';\nimport type { quat, vec2 } from 'gl-matrix';\nimport { mat3, mat4, vec3, vec4 } from 'gl-matrix';\n\nexport function getAngle(angle?: number) {\n  if (angle === undefined) {\n    return 0;\n  }\n  if (angle > 360 || angle < -360) {\n    return angle % 360;\n  }\n  return angle;\n}\n\nconst $vec3 = vec3.create();\nexport function createVec3(\n  x: number | vec2 | vec3 | vec4,\n  y = 0,\n  z = 0,\n  clone = true,\n) {\n  if (Array.isArray(x) && x.length === 3) {\n    return clone ? vec3.clone(x) : vec3.copy($vec3, x);\n  }\n\n  if (isNumber(x)) {\n    return clone ? vec3.fromValues(x, y, z) : vec3.set($vec3, x, y, z);\n  }\n\n  return clone\n    ? vec3.fromValues(x[0], x[1] || y, x[2] || z)\n    : vec3.set($vec3, x[0], x[1] || y, x[2] || z);\n}\n\nconst DEG_RAD = Math.PI / 180;\nexport function deg2rad(deg: number) {\n  return deg * DEG_RAD;\n}\n\nconst RAD_DEG = 180 / Math.PI;\nexport function rad2deg(rad: number) {\n  return rad * RAD_DEG;\n}\n\nconst GRAD_DEG = 0.9; // 360 / 400;\nexport function grad2deg(grads: number) {\n  grads %= 400;\n  if (grads < 0) {\n    grads += 400;\n  }\n  return grads * GRAD_DEG;\n}\n\nexport function deg2turn(deg: number) {\n  return deg / 360;\n}\n\nexport function turn2deg(turn: number) {\n  return 360 * turn;\n}\n\n/**\n * decompose mat3\n * extract translation/scaling/rotation(in radians)\n *\n * gl-matrix didn't provide them for mat3, but we can\n * @see https://math.stackexchange.com/a/1463487\n * @see https://math.stackexchange.com/a/417813\n */\nexport function getScaling(out: vec2, mat: mat3): vec2 {\n  const m11 = mat[0];\n  const m12 = mat[1];\n  const m21 = mat[3];\n  const m22 = mat[4];\n\n  out[0] = Math.hypot(m11, m12);\n  out[1] = Math.hypot(m21, m22);\n  return out;\n}\nexport function getTranslation(out: vec2, mat: mat3): vec2 {\n  out[0] = mat[6];\n  out[1] = mat[7];\n  return out;\n}\nexport function getRotationInRadians(mat: mat3): number {\n  return Math.atan2(mat[1], mat[4]);\n}\n\nconst HALF_PI = Math.PI / 2;\nfunction getEulerFromQuat(out: vec3, quat: quat) {\n  const x = quat[0];\n  const y = quat[1];\n  const z = quat[2];\n  const w = quat[3];\n  const x2 = x * x;\n  const y2 = y * y;\n  const z2 = z * z;\n  const w2 = w * w;\n  const unit = x2 + y2 + z2 + w2;\n  const test = x * w - y * z;\n  if (test > 0.499995 * unit) {\n    // TODO: Use glmatrix.EPSILON\n    // singularity at the north pole\n    out[0] = HALF_PI;\n    out[1] = 2 * Math.atan2(y, x);\n    out[2] = 0;\n  } else if (test < -0.499995 * unit) {\n    // TODO: Use glmatrix.EPSILON\n    // singularity at the south pole\n    out[0] = -HALF_PI;\n    out[1] = 2 * Math.atan2(y, x);\n    out[2] = 0;\n  } else {\n    out[0] = Math.asin(2 * (x * z - w * y));\n    out[1] = Math.atan2(2 * (x * w + y * z), 1 - 2 * (z2 + w2));\n    out[2] = Math.atan2(2 * (x * y + z * w), 1 - 2 * (y2 + z2));\n  }\n  // TODO: Return them as degrees and not as radians\n  return out;\n}\n\nfunction getEulerFromMat4(out: vec3, m: mat4) {\n  let x: number;\n  let z: number;\n\n  const [sx, sy, sz] = mat4.getScaling(vec3.create(), m);\n\n  const y = Math.asin(-m[2] / sx);\n\n  if (y < HALF_PI) {\n    if (y > -HALF_PI) {\n      x = Math.atan2(m[6] / sy, m[10] / sz);\n      z = Math.atan2(m[1] / sx, m[0] / sx);\n    } else {\n      // Not a unique solution\n      z = 0;\n      x = -Math.atan2(m[4] / sy, m[5] / sy);\n    }\n  } else {\n    // Not a unique solution\n    z = 0;\n    x = Math.atan2(m[4] / sy, m[5] / sy);\n  }\n\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n\n  return out;\n}\n\n/**\n * @see https://github.com/toji/gl-matrix/issues/329\n * @see https://doc.babylonjs.com/divingDeeper/mesh/transforms/center_origin/rotation_conventions\n */\nexport function getEuler(out: vec3, quat: quat | mat4): vec3 {\n  if (quat.length === 16) {\n    return getEulerFromMat4(out, quat as mat4);\n  }\n  return getEulerFromQuat(out, quat as quat);\n}\n\nexport function fromRotationTranslationScale(\n  rotation: number,\n  x: number,\n  y: number,\n  scaleX: number,\n  scaleY: number,\n): mat3 {\n  const cos = Math.cos(rotation);\n  const sin = Math.sin(rotation);\n  return mat3.fromValues(\n    scaleX * cos,\n    scaleY * sin,\n    0,\n    -scaleX * sin,\n    scaleY * cos,\n    0,\n    x,\n    y,\n    1,\n  );\n}\n\nexport function makePerspective(\n  out: mat4,\n  left: number,\n  right: number,\n  top: number,\n  bottom: number,\n  near: number,\n  far: number,\n  zero = false,\n) {\n  const twoNear = 2 * near;\n  const rightMinusLeft = right - left;\n  const topMinusBottom = top - bottom;\n  const x = twoNear / rightMinusLeft;\n  const y = twoNear / topMinusBottom;\n\n  const a = (right + left) / rightMinusLeft;\n  const b = (top + bottom) / topMinusBottom;\n\n  let c: number;\n  let d: number;\n\n  const farMinusNear = far - near;\n  const farMulNear = far * near;\n  if (zero) {\n    c = -far / farMinusNear;\n    d = -farMulNear / farMinusNear;\n  } else {\n    c = -(far + near) / farMinusNear;\n    d = (-2 * farMulNear) / farMinusNear;\n  }\n\n  out[0] = x;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = y;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = a;\n  out[9] = b;\n  out[10] = c;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = d;\n  out[15] = 0;\n  return out;\n}\n\nexport function decompose(mat: mat3) {\n  let row0x = mat[0];\n  let row0y = mat[1];\n  let row1x = mat[3];\n  let row1y = mat[4];\n  // decompose 3x3 matrix\n  // @see https://www.w3.org/TR/css-transforms-1/#decomposing-a-2d-matrix\n  let scalingX = Math.sqrt(row0x * row0x + row0y * row0y);\n  let scalingY = Math.sqrt(row1x * row1x + row1y * row1y);\n\n  // If determinant is negative, one axis was flipped.\n  const determinant = row0x * row1y - row0y * row1x;\n  if (determinant < 0) {\n    // Flip axis with minimum unit vector dot product.\n    if (row0x < row1y) {\n      scalingX = -scalingX;\n    } else {\n      scalingY = -scalingY;\n    }\n  }\n\n  // Renormalize matrix to remove scale.\n  if (scalingX) {\n    const invScalingX = 1 / scalingX;\n    row0x *= invScalingX;\n    row0y *= invScalingX;\n  }\n  if (scalingY) {\n    const invScalingY = 1 / scalingY;\n    row1x *= invScalingY;\n    row1y *= invScalingY;\n  }\n\n  // Compute rotation and renormalize matrix.\n  const rotation = Math.atan2(row0y, row0x);\n\n  const angle = rad2deg(rotation);\n\n  return [mat[6], mat[7], scalingX, scalingY, angle];\n}\n\nconst tmp = mat4.create();\nconst perspectiveMatrix = mat4.create();\nconst tmpVec4 = vec4.create();\nconst row = [vec3.create(), vec3.create(), vec3.create()];\nconst pdum3 = vec3.create();\n\n/*\nInput:  matrix      ; a 4x4 matrix\nOutput: translation ; a 3 component vector\n        scale       ; a 3 component vector\n        skew        ; skew factors XY,XZ,YZ represented as a 3 component vector\n        perspective ; a 4 component vector\n        quaternion  ; a 4 component vector\nReturns false if the matrix cannot be decomposed, true if it can\n\n\nReferences:\nhttps://github.com/kamicane/matrix3d/blob/master/lib/Matrix3d.js\nhttps://github.com/ChromiumWebApps/chromium/blob/master/ui/gfx/transform_util.cc\nhttp://www.w3.org/TR/css3-transforms/#decomposing-a-3d-matrix\n*/\nexport function decomposeMat4(\n  matrix: mat4,\n  translation: vec3,\n  scale: vec3,\n  skew: vec3,\n  perspective: vec4,\n  quaternion: vec4,\n) {\n  // normalize, if not possible then bail out early\n  if (!normalize(tmp, matrix)) return false;\n\n  // perspectiveMatrix is used to solve for perspective, but it also provides\n  // an easy way to test for singularity of the upper 3x3 component.\n  mat4.copy(perspectiveMatrix, tmp);\n\n  perspectiveMatrix[3] = 0;\n  perspectiveMatrix[7] = 0;\n  perspectiveMatrix[11] = 0;\n  perspectiveMatrix[15] = 1;\n\n  // If the perspectiveMatrix is not invertible, we are also unable to\n  // decompose, so we'll bail early. Constant taken from SkMatrix44::invert.\n  if (Math.abs(mat4.determinant(perspectiveMatrix)) < 1e-8) return false;\n\n  const a03 = tmp[3];\n  const a13 = tmp[7];\n  const a23 = tmp[11];\n  const a30 = tmp[12];\n  const a31 = tmp[13];\n  const a32 = tmp[14];\n  const a33 = tmp[15];\n\n  // First, isolate perspective.\n  if (a03 !== 0 || a13 !== 0 || a23 !== 0) {\n    tmpVec4[0] = a03;\n    tmpVec4[1] = a13;\n    tmpVec4[2] = a23;\n    tmpVec4[3] = a33;\n\n    // Solve the equation by inverting perspectiveMatrix and multiplying\n    // rightHandSide by the inverse.\n    // resuing the perspectiveMatrix here since it's no longer needed\n    const ret = mat4.invert(perspectiveMatrix, perspectiveMatrix);\n    if (!ret) return false;\n    mat4.transpose(perspectiveMatrix, perspectiveMatrix);\n\n    // multiply by transposed inverse perspective matrix, into perspective vec4\n    vec4.transformMat4(perspective, tmpVec4, perspectiveMatrix);\n  } else {\n    // no perspective\n    perspective[0] = perspective[1] = perspective[2] = 0;\n    perspective[3] = 1;\n  }\n\n  // Next take care of translation\n  translation[0] = a30;\n  translation[1] = a31;\n  translation[2] = a32;\n\n  // Now get scale and shear. 'row' is a 3 element array of 3 component vectors\n  mat3from4(row as unknown as mat3, tmp);\n\n  // Compute X scale factor and normalize first row.\n  scale[0] = vec3.length(row[0]);\n  vec3.normalize(row[0], row[0]);\n\n  // Compute XY shear factor and make 2nd row orthogonal to 1st.\n  skew[0] = vec3.dot(row[0], row[1]);\n  combine(row[1], row[1], row[0], 1.0, -skew[0]);\n\n  // Now, compute Y scale and normalize 2nd row.\n  scale[1] = vec3.length(row[1]);\n  vec3.normalize(row[1], row[1]);\n  skew[0] /= scale[1];\n\n  // Compute XZ and YZ shears, orthogonalize 3rd row\n  skew[1] = vec3.dot(row[0], row[2]);\n  combine(row[2], row[2], row[0], 1.0, -skew[1]);\n  skew[2] = vec3.dot(row[1], row[2]);\n  combine(row[2], row[2], row[1], 1.0, -skew[2]);\n\n  // Next, get Z scale and normalize 3rd row.\n  scale[2] = vec3.length(row[2]);\n  vec3.normalize(row[2], row[2]);\n  skew[1] /= scale[2];\n  skew[2] /= scale[2];\n\n  // At this point, the matrix (in rows) is orthonormal.\n  // Check for a coordinate system flip.  If the determinant\n  // is -1, then negate the matrix and the scaling factors.\n  vec3.cross(pdum3, row[1], row[2]);\n  if (vec3.dot(row[0], pdum3) < 0) {\n    for (let i = 0; i < 3; i++) {\n      scale[i] *= -1;\n      row[i][0] *= -1;\n      row[i][1] *= -1;\n      row[i][2] *= -1;\n    }\n  }\n\n  // Now, get the rotations out\n  quaternion[0] =\n    0.5 * Math.sqrt(Math.max(1 + row[0][0] - row[1][1] - row[2][2], 0));\n  quaternion[1] =\n    0.5 * Math.sqrt(Math.max(1 - row[0][0] + row[1][1] - row[2][2], 0));\n  quaternion[2] =\n    0.5 * Math.sqrt(Math.max(1 - row[0][0] - row[1][1] + row[2][2], 0));\n  quaternion[3] =\n    0.5 * Math.sqrt(Math.max(1 + row[0][0] + row[1][1] + row[2][2], 0));\n\n  if (row[2][1] > row[1][2]) quaternion[0] = -quaternion[0];\n  if (row[0][2] > row[2][0]) quaternion[1] = -quaternion[1];\n  if (row[1][0] > row[0][1]) quaternion[2] = -quaternion[2];\n  return true;\n}\n\nfunction normalize(out: mat4, mat: mat4) {\n  const m44 = mat[15];\n  // Cannot normalize.\n  if (m44 === 0) return false;\n  const scale = 1 / m44;\n  for (let i = 0; i < 16; i++) out[i] = mat[i] * scale;\n  return true;\n}\n\n// gets upper-left of a 4x4 matrix into a 3x3 of vectors\nfunction mat3from4(out: mat3, mat4x4: mat4) {\n  out[0][0] = mat4x4[0];\n  out[0][1] = mat4x4[1];\n  out[0][2] = mat4x4[2];\n\n  out[1][0] = mat4x4[4];\n  out[1][1] = mat4x4[5];\n  out[1][2] = mat4x4[6];\n\n  out[2][0] = mat4x4[8];\n  out[2][1] = mat4x4[9];\n  out[2][2] = mat4x4[10];\n}\n\nfunction combine(out: vec3, a: vec3, b: vec3, scale1: number, scale2: number) {\n  out[0] = a[0] * scale1 + b[0] * scale2;\n  out[1] = a[1] * scale1 + b[1] * scale2;\n  out[2] = a[2] * scale1 + b[2] * scale2;\n}\n", "import type { EventEmitter } from 'eventemitter3';\nimport type { mat4, vec2, vec3 } from 'gl-matrix';\nimport type { TypeEasingFunction } from '..';\nimport type { ICanvas } from '../dom';\nimport type { Frustum } from '../shapes';\nimport type { Landmark } from './Landmark';\n\n/**\n * Different type of cameras, eg. simple camera used in 2D scene or\n * advanced camera which can do actions & switch between landmarks.\n */\n\nexport enum CameraType {\n  /**\n   * Performs all the rotational operations with the focal point instead of the camera position.\n   * This type of camera is useful in applications(like CAD) where 3D objects are being designed or explored.\n   * Camera cannot orbits over the north & south poles.\n   * @see http://voxelent.com/tutorial-cameras/\n   *\n   * In Three.js it's used in OrbitControls.\n   * @see https://threejs.org/docs/#examples/zh/controls/OrbitControls\n   */\n  ORBITING,\n  /**\n   * It's similar to the ORBITING camera, but it allows the camera to orbit over the north or south poles.\n   *\n   * In Three.js it's used in OrbitControls.\n   * @see https://threejs.org/docs/#examples/en/controls/TrackballControls\n   */\n  EXPLORING,\n  /**\n   * Performs all the rotational operations with the camera position.\n   * It's useful in first person shooting games.\n   * Camera cannot orbits over the north & south poles.\n   *\n   * In Three.js it's used in FirstPersonControls.\n   * @see https://threejs.org/docs/#examples/en/controls/FirstPersonControls\n   */\n  TRACKING,\n}\n\n/**\n * CameraType must be TRACKING\n */\nexport enum CameraTrackingMode {\n  DEFAULT,\n  ROTATIONAL,\n  TRANSLATIONAL,\n  CINEMATIC,\n}\n\nexport enum CameraProjectionMode {\n  ORTHOGRAPHIC,\n  PERSPECTIVE,\n}\n\nexport const CameraEvent = {\n  UPDATED: 'updated',\n};\n\nexport interface ICamera {\n  canvas: ICanvas;\n  eventEmitter: EventEmitter;\n  isOrtho: () => boolean;\n  getProjectionMode: () => CameraProjectionMode;\n  getPerspective: () => mat4;\n  getPerspectiveInverse: () => mat4;\n  getFrustum: () => Frustum;\n  getPosition: () => vec3;\n  getFocalPoint: () => vec3;\n  getDollyingStep: () => number;\n  getNear: () => number;\n  getFar: () => number;\n  getZoom: () => number;\n  getOrthoMatrix: () => mat4;\n  getView: () => {\n    enabled: boolean;\n    fullWidth: number;\n    fullHeight: number;\n    offsetX: number;\n    offsetY: number;\n    width: number;\n    height: number;\n  };\n  setEnableUpdate: (enabled: boolean) => void;\n  setType: (type: CameraType, trackingMode?: CameraTrackingMode) => this;\n  setProjectionMode: (projectionMode: CameraProjectionMode) => this;\n  setTrackingMode: (trackingMode: CameraTrackingMode) => this;\n  /**\n   * If flag is true, it reverses the azimuth and elevation angles.\n   * Subsequent calls to rotate, setAzimuth, setElevation,\n   * changeAzimuth or changeElevation will cause the inverted effect.\n   * setRoll or changeRoll is not affected by this method.\n   *\n   * This inversion is useful when one wants to simulate that the world\n   * is moving, instead of the camera.\n   *\n   * By default the camera angles are not reversed.\n   * @param {Boolean} flag the boolean flag to reverse the angles.\n   */\n  setWorldRotation: (flag: boolean) => this;\n  /**\n   *  MV \n   */\n  getViewTransform: () => mat4;\n  getWorldTransform: () => mat4;\n  jitterProjectionMatrix: (x: number, y: number) => void;\n  clearJitterProjectionMatrix: () => void;\n  /**\n   * \n   */\n  setMatrix: (matrix: mat4) => this;\n  setFov: (fov: number) => this;\n  setAspect: (aspect: number) => this;\n  setNear: (near: number) => this;\n  setFar: (far: number) => this;\n  /**\n   * Sets an offset in a larger frustum, used in PixelPicking\n   */\n  setViewOffset: (\n    fullWidth: number,\n    fullHeight: number,\n    x: number,\n    y: number,\n    width: number,\n    height: number,\n  ) => this;\n  clearViewOffset: () => this;\n  setZoom: (zoom: number) => this;\n  setZoomByViewportPoint: (zoom: number, viewportPoint: vec2) => this;\n  setPerspective: (\n    near: number,\n    far: number,\n    fov: number,\n    aspect: number,\n  ) => this;\n  setOrthographic: (\n    l: number,\n    r: number,\n    t: number,\n    b: number,\n    near: number,\n    far: number,\n  ) => this;\n  /**\n   * Move the camera in world coordinates.\n   * It will keep looking at the current focal point.\n   *\n   * support scalars or vectors.\n   * @example\n   * setPosition(1, 2, 3);\n   * setPosition([1, 2, 3]);\n   */\n  setPosition: (x: number | vec2 | vec3, y?: number, z?: number) => this;\n  /**\n   * Sets the focal point of this camera in world coordinates.\n   *\n   * support scalars or vectors.\n   * @example\n   * setFocalPoint(1, 2, 3);\n   * setFocalPoint([1, 2, 3]);\n   */\n  setFocalPoint: (x: number | vec2 | vec3, y?: number, z?: number) => this;\n  getDistance: () => number;\n  getDistanceVector: () => vec3;\n  /**\n   * Moves the camera towards/from the focal point.\n   */\n  setDistance: (d: number) => this;\n  setMaxDistance: (d: number) => this;\n  setMinDistance: (d: number) => this;\n  /**\n   * \n   * the azimuth in degrees\n   */\n  setAzimuth: (az: number) => this;\n  getAzimuth: () => number;\n  /**\n   * \n   */\n  setElevation: (el: number) => this;\n  getElevation: () => number;\n  /**\n   * \n   */\n  setRoll: (angle: number) => this;\n  getRoll: () => number;\n  /**\n   * Changes the azimuth and elevation with respect to the current camera axes\n   * @param {Number} azimuth the relative azimuth\n   * @param {Number} elevation the relative elevation\n   * @param {Number} roll the relative roll\n   */\n  rotate: (azimuth: number, elevation: number, roll: number) => this;\n  /**\n   * (right) & (up)\n   */\n  pan: (tx: number, ty: number) => this;\n  /**\n   *  n \n   */\n  dolly: (value: number) => this;\n  createLandmark: (\n    name: string,\n    params?: Partial<{\n      position: vec3 | vec2;\n      focalPoint: vec3 | vec2;\n      zoom: number;\n      roll: number;\n    }>,\n  ) => Landmark;\n  gotoLandmark: (\n    name: string | Landmark,\n    options?:\n      | number\n      | Partial<{\n          easing: string;\n          easingFunction: TypeEasingFunction;\n          duration: number;\n          onfinish: () => void;\n        }>,\n  ) => void;\n  /**\n   * Stop camera animation immediately.\n   */\n  cancelLandmarkAnimation: () => void;\n}\n", "import EventEmitter from 'eventemitter3';\nimport type { vec2 } from 'gl-matrix';\nimport { mat3, mat4, quat, vec3, vec4 } from 'gl-matrix';\nimport type { Canvas } from '../Canvas';\nimport { Frustum } from '../shapes';\nimport { ClipSpaceNearZ, TypeEasingFunction } from '../types';\nimport { ERROR_MSG_METHOD_NOT_IMPLEMENTED } from '../utils/error';\nimport {\n  createVec3,\n  deg2rad,\n  getAngle,\n  makePerspective,\n  rad2deg,\n} from '../utils/math';\nimport type { Landmark } from './Landmark';\nimport type { ICamera } from './interfaces';\nimport {\n  CameraEvent,\n  CameraProjectionMode,\n  CameraTrackingMode,\n  CameraType,\n} from './interfaces';\n\nconst MIN_DISTANCE = 0.0002;\n\n/**\n * WebGL Insights - 23.Designing Cameras for WebGL Applications Responsible Camera \n * @see https://github.com/d13g0/nucleo.js/blob/master/source/camera/Camera.js\n *\n * \n * 1. dolly  n \n * 2. pan  u v \n * 3. rotate \n * 4.  Landmark\n */\n\nexport class Camera implements ICamera {\n  canvas: Canvas;\n\n  /**\n   * Clip space near Z, default to range `[-1, 1]`\n   */\n  clipSpaceNearZ = ClipSpaceNearZ.NEGATIVE_ONE;\n\n  eventEmitter = new EventEmitter();\n\n  /**\n   * Matrix of camera\n   */\n  protected matrix = mat4.create();\n\n  /**\n   * u axis +X is right\n   * @see http://learnwebgl.brown37.net/07_cameras/camera_introduction.html#a-camera-definition\n   */\n  protected right = vec3.fromValues(1, 0, 0);\n\n  /**\n   * v axis +Y is up\n   */\n  protected up = vec3.fromValues(0, 1, 0);\n\n  /**\n   * n axis +Z is inside\n   */\n  protected forward = vec3.fromValues(0, 0, 1);\n\n  /**\n   * Position of camera.\n   */\n  protected position = vec3.fromValues(0, 0, 1);\n\n  /**\n   * Position of focal point.\n   */\n  protected focalPoint = vec3.fromValues(0, 0, 0);\n\n  /**\n   * vector from focalPoint to position\n   */\n  protected distanceVector = vec3.fromValues(0, 0, -1);\n\n  /**\n   * length(focalPoint - position)\n   */\n  protected distance = 1;\n\n  /**\n   * @see https://en.wikipedia.org/wiki/Azimuth\n   */\n  protected azimuth = 0;\n  protected elevation = 0;\n  protected roll = 0;\n  protected relAzimuth = 0;\n  protected relElevation = 0;\n  protected relRoll = 0;\n\n  /**\n   *  n \n   */\n  protected dollyingStep = 0;\n  protected maxDistance = Infinity;\n  protected minDistance = -Infinity;\n\n  /**\n   * zoom factor of the camera, default is 1\n   * eg. https://threejs.org/docs/#api/en/cameras/OrthographicCamera.zoom\n   */\n  protected zoom = 1;\n\n  /**\n   * invert the horizontal coordinate system HCS\n   */\n  protected rotateWorld = false;\n\n  /**\n   * \n   */\n\n  /**\n   * field of view [0-360]\n   * @see http://en.wikipedia.org/wiki/Angle_of_view\n   */\n  protected fov = 30;\n  protected near = 0.1;\n  protected far = 1000;\n  protected aspect = 1;\n  protected left: number;\n  protected rright: number;\n  protected top: number;\n  protected bottom: number;\n  protected projectionMatrix = mat4.create();\n  protected projectionMatrixInverse = mat4.create();\n  protected jitteredProjectionMatrix: mat4 | undefined = undefined;\n\n  protected view:\n    | {\n        enabled: boolean;\n        fullWidth: number;\n        fullHeight: number;\n        offsetX: number;\n        offsetY: number;\n        width: number;\n        height: number;\n      }\n    | undefined;\n  protected enableUpdate = true;\n\n  // protected following = undefined;\n\n  protected type = CameraType.EXPLORING;\n  protected trackingMode = CameraTrackingMode.DEFAULT;\n  protected projectionMode = CameraProjectionMode.PERSPECTIVE;\n\n  /**\n   * for culling use\n   */\n  protected frustum: Frustum = new Frustum();\n\n  /**\n   * ortho matrix for Canvas2D & SVG\n   */\n  protected orthoMatrix: mat4 = mat4.create();\n\n  // constructor(type = CameraType.EXPLORING, trackingMode = CameraTrackingMode.DEFAULT) {\n  //   this.setType(type, trackingMode);\n  // }\n\n  isOrtho() {\n    return this.projectionMode === CameraProjectionMode.ORTHOGRAPHIC;\n  }\n\n  getProjectionMode() {\n    return this.projectionMode;\n  }\n\n  getPerspective() {\n    // account for TAA\n    return this.jitteredProjectionMatrix || this.projectionMatrix;\n  }\n\n  getPerspectiveInverse() {\n    return this.projectionMatrixInverse;\n  }\n\n  getFrustum() {\n    return this.frustum;\n  }\n\n  getPosition() {\n    return this.position;\n  }\n\n  getFocalPoint() {\n    return this.focalPoint;\n  }\n\n  getDollyingStep() {\n    return this.dollyingStep;\n  }\n\n  getNear() {\n    return this.near;\n  }\n\n  getFar() {\n    return this.far;\n  }\n\n  getZoom() {\n    return this.zoom;\n  }\n\n  getOrthoMatrix() {\n    return this.orthoMatrix;\n  }\n\n  getView() {\n    return this.view;\n  }\n\n  setEnableUpdate(enabled: boolean) {\n    this.enableUpdate = enabled;\n  }\n\n  setType(type: CameraType, trackingMode?: CameraTrackingMode) {\n    this.type = type;\n    if (this.type === CameraType.EXPLORING) {\n      this.setWorldRotation(true);\n    } else {\n      this.setWorldRotation(false);\n    }\n    this._getAngles();\n\n    if (this.type === CameraType.TRACKING && trackingMode !== undefined) {\n      this.setTrackingMode(trackingMode);\n    }\n    return this;\n  }\n\n  setProjectionMode(projectionMode: CameraProjectionMode) {\n    this.projectionMode = projectionMode;\n    return this;\n  }\n\n  setTrackingMode(trackingMode: CameraTrackingMode) {\n    if (this.type !== CameraType.TRACKING) {\n      throw new Error(\n        'Impossible to set a tracking mode if the camera is not of tracking type',\n      );\n    }\n    this.trackingMode = trackingMode;\n    return this;\n  }\n\n  /**\n   * If flag is true, it reverses the azimuth and elevation angles.\n   * Subsequent calls to rotate, setAzimuth, setElevation,\n   * changeAzimuth or changeElevation will cause the inverted effect.\n   * setRoll or changeRoll is not affected by this method.\n   *\n   * This inversion is useful when one wants to simulate that the world\n   * is moving, instead of the camera.\n   *\n   * By default the camera angles are not reversed.\n   * @param {Boolean} flag the boolean flag to reverse the angles.\n   */\n  setWorldRotation(flag: boolean) {\n    this.rotateWorld = flag;\n    this._getAngles();\n    return this;\n  }\n\n  /**\n   *  MV \n   */\n  getViewTransform(): mat4 {\n    // mat4.scale(this.matrix, this.matrix, vec3.fromValues(1, -1, 1));\n\n    return mat4.invert(mat4.create(), this.matrix);\n  }\n\n  getWorldTransform(): mat4 {\n    return this.matrix;\n  }\n\n  jitterProjectionMatrix(x: number, y: number) {\n    const translation = mat4.fromTranslation(mat4.create(), [x, y, 0]);\n\n    this.jitteredProjectionMatrix = mat4.multiply(\n      mat4.create(),\n      translation,\n      this.projectionMatrix,\n    );\n  }\n\n  clearJitterProjectionMatrix() {\n    this.jitteredProjectionMatrix = undefined;\n  }\n\n  /**\n   * \n   */\n  setMatrix(matrix: mat4) {\n    this.matrix = matrix;\n    this._update();\n    return this;\n  }\n\n  /**\n   * Set projection matrix manually.\n   */\n  setProjectionMatrix(matrix: mat4) {\n    this.projectionMatrix = matrix;\n  }\n\n  setFov(fov: number) {\n    this.setPerspective(this.near, this.far, fov, this.aspect);\n    return this;\n  }\n\n  setAspect(aspect: number) {\n    this.setPerspective(this.near, this.far, this.fov, aspect);\n    return this;\n  }\n\n  setNear(near: number) {\n    if (this.projectionMode === CameraProjectionMode.PERSPECTIVE) {\n      this.setPerspective(near, this.far, this.fov, this.aspect);\n    } else {\n      this.setOrthographic(\n        this.left,\n        this.rright,\n        this.top,\n        this.bottom,\n        near,\n        this.far,\n      );\n    }\n    return this;\n  }\n\n  setFar(far: number) {\n    if (this.projectionMode === CameraProjectionMode.PERSPECTIVE) {\n      this.setPerspective(this.near, far, this.fov, this.aspect);\n    } else {\n      this.setOrthographic(\n        this.left,\n        this.rright,\n        this.top,\n        this.bottom,\n        this.near,\n        far,\n      );\n    }\n    return this;\n  }\n\n  /**\n   * Sets an offset in a larger frustum, used in PixelPicking\n   */\n  setViewOffset(\n    fullWidth: number,\n    fullHeight: number,\n    x: number,\n    y: number,\n    width: number,\n    height: number,\n  ) {\n    this.aspect = fullWidth / fullHeight;\n    if (this.view === undefined) {\n      this.view = {\n        enabled: true,\n        fullWidth: 1,\n        fullHeight: 1,\n        offsetX: 0,\n        offsetY: 0,\n        width: 1,\n        height: 1,\n      };\n    }\n\n    this.view.enabled = true;\n    this.view.fullWidth = fullWidth;\n    this.view.fullHeight = fullHeight;\n    this.view.offsetX = x;\n    this.view.offsetY = y;\n    this.view.width = width;\n    this.view.height = height;\n\n    if (this.projectionMode === CameraProjectionMode.PERSPECTIVE) {\n      this.setPerspective(this.near, this.far, this.fov, this.aspect);\n    } else {\n      this.setOrthographic(\n        this.left,\n        this.rright,\n        this.top,\n        this.bottom,\n        this.near,\n        this.far,\n      );\n    }\n    return this;\n  }\n\n  clearViewOffset() {\n    if (this.view !== undefined) {\n      this.view.enabled = false;\n    }\n\n    if (this.projectionMode === CameraProjectionMode.PERSPECTIVE) {\n      this.setPerspective(this.near, this.far, this.fov, this.aspect);\n    } else {\n      this.setOrthographic(\n        this.left,\n        this.rright,\n        this.top,\n        this.bottom,\n        this.near,\n        this.far,\n      );\n    }\n    return this;\n  }\n\n  setZoom(zoom: number) {\n    this.zoom = zoom;\n    if (this.projectionMode === CameraProjectionMode.ORTHOGRAPHIC) {\n      this.setOrthographic(\n        this.left,\n        this.rright,\n        this.top,\n        this.bottom,\n        this.near,\n        this.far,\n      );\n    } else if (this.projectionMode === CameraProjectionMode.PERSPECTIVE) {\n      this.setPerspective(this.near, this.far, this.fov, this.aspect);\n    }\n    return this;\n  }\n\n  /**\n   * Zoom by specified point in viewport coordinates.\n   */\n  setZoomByViewportPoint(zoom: number, viewportPoint: vec2) {\n    const { x: ox, y: oy } = this.canvas.viewport2Canvas({\n      x: viewportPoint[0],\n      y: viewportPoint[1],\n    });\n\n    const { roll } = this;\n\n    this.rotate(0, 0, -roll);\n    this.setPosition(ox, oy);\n    this.setFocalPoint(ox, oy);\n    this.setZoom(zoom);\n    this.rotate(0, 0, roll);\n\n    const { x: cx, y: cy } = this.canvas.viewport2Canvas({\n      x: viewportPoint[0],\n      y: viewportPoint[1],\n    });\n\n    // project to rotated axis\n    const dvec = vec3.fromValues(cx - ox, cy - oy, 0);\n    const dx = vec3.dot(dvec, this.right) / vec3.length(this.right);\n    const dy = vec3.dot(dvec, this.up) / vec3.length(this.up);\n\n    const [px, py] = this.getPosition();\n    const [fx, fy] = this.getFocalPoint();\n\n    this.setPosition(px - dx, py - dy);\n    this.setFocalPoint(fx - dx, fy - dy);\n\n    return this;\n  }\n\n  setPerspective(near: number, far: number, fov: number, aspect: number) {\n    this.projectionMode = CameraProjectionMode.PERSPECTIVE;\n    this.fov = fov;\n    this.near = near;\n    this.far = far;\n    this.aspect = aspect;\n\n    let top = (this.near * Math.tan(deg2rad(0.5 * this.fov))) / this.zoom;\n    let height = 2 * top;\n    let width = this.aspect * height;\n    let left = -0.5 * width;\n\n    if (this.view?.enabled) {\n      const { fullWidth } = this.view;\n      const { fullHeight } = this.view;\n\n      left += (this.view.offsetX * width) / fullWidth;\n      top -= (this.view.offsetY * height) / fullHeight;\n      width *= this.view.width / fullWidth;\n      height *= this.view.height / fullHeight;\n    }\n\n    makePerspective(\n      this.projectionMatrix,\n      left,\n      left + width,\n      top - height,\n      top,\n      near,\n      this.far,\n      this.clipSpaceNearZ === ClipSpaceNearZ.ZERO,\n    );\n\n    mat4.invert(this.projectionMatrixInverse, this.projectionMatrix);\n\n    this.triggerUpdate();\n    return this;\n  }\n\n  setOrthographic(\n    l: number,\n    r: number,\n    t: number,\n    b: number,\n    near: number,\n    far: number,\n  ) {\n    this.projectionMode = CameraProjectionMode.ORTHOGRAPHIC;\n    this.rright = r;\n    this.left = l;\n    this.top = t;\n    this.bottom = b;\n    this.near = near;\n    this.far = far;\n\n    const dx = (this.rright - this.left) / (2 * this.zoom);\n    const dy = (this.top - this.bottom) / (2 * this.zoom);\n    const cx = (this.rright + this.left) / 2;\n    const cy = (this.top + this.bottom) / 2;\n\n    let left = cx - dx;\n    let right = cx + dx;\n    let top = cy + dy;\n    let bottom = cy - dy;\n\n    if (this.view?.enabled) {\n      const scaleW =\n        (this.rright - this.left) / this.view.fullWidth / this.zoom;\n      const scaleH =\n        (this.top - this.bottom) / this.view.fullHeight / this.zoom;\n\n      left += scaleW * this.view.offsetX;\n      right = left + scaleW * this.view.width;\n      top -= scaleH * this.view.offsetY;\n      bottom = top - scaleH * this.view.height;\n    }\n\n    if (this.clipSpaceNearZ === ClipSpaceNearZ.NEGATIVE_ONE) {\n      // FlipY with switching bottom & top.\n      // @see https://stackoverflow.com/a/4886656\n      mat4.ortho(this.projectionMatrix, left, right, top, bottom, near, far);\n    } else {\n      mat4.orthoZO(this.projectionMatrix, left, right, top, bottom, near, far);\n    }\n\n    mat4.invert(this.projectionMatrixInverse, this.projectionMatrix);\n\n    this._getOrthoMatrix();\n    this.triggerUpdate();\n    return this;\n  }\n\n  /**\n   * Move the camera in world coordinates.\n   * It will keep looking at the current focal point.\n   *\n   * support scalars or vectors.\n   * @example\n   * setPosition(1, 2, 3);\n   * setPosition([1, 2, 3]);\n   */\n  setPosition(\n    x: number | vec2 | vec3,\n    y: number = this.position[1],\n    z: number = this.position[2],\n  ) {\n    const position = createVec3(x, y, z);\n    this._setPosition(position);\n    this.setFocalPoint(this.focalPoint);\n\n    this.triggerUpdate();\n    return this;\n  }\n\n  /**\n   * Sets the focal point of this camera in world coordinates.\n   *\n   * support scalars or vectors.\n   * @example\n   * setFocalPoint(1, 2, 3);\n   * setFocalPoint([1, 2, 3]);\n   */\n  setFocalPoint(\n    x: number | vec2 | vec3,\n    y: number = this.focalPoint[1],\n    z: number = this.focalPoint[2],\n  ) {\n    let up = vec3.fromValues(0, 1, 0);\n    this.focalPoint = createVec3(x, y, z);\n\n    if (this.trackingMode === CameraTrackingMode.CINEMATIC) {\n      const d = vec3.subtract(vec3.create(), this.focalPoint, this.position);\n      x = d[0];\n      y = d[1];\n      z = d[2];\n      const r = vec3.length(d);\n      const el = rad2deg(Math.asin(y / r));\n      const az = 90 + rad2deg(Math.atan2(z, x));\n      const m = mat4.create();\n      mat4.rotateY(m, m, deg2rad(az));\n      mat4.rotateX(m, m, deg2rad(el));\n      up = vec3.transformMat4(vec3.create(), [0, 1, 0], m);\n    }\n\n    mat4.invert(\n      this.matrix,\n      mat4.lookAt(mat4.create(), this.position, this.focalPoint, up),\n    );\n\n    this._getAxes();\n    this._getDistance();\n    this._getAngles();\n    this.triggerUpdate();\n    return this;\n  }\n\n  getDistance() {\n    return this.distance;\n  }\n\n  getDistanceVector() {\n    return this.distanceVector;\n  }\n\n  /**\n   * Moves the camera towards/from the focal point.\n   */\n  setDistance(d: number) {\n    if (this.distance === d || d < 0) {\n      return this;\n    }\n\n    this.distance = d;\n\n    if (this.distance < MIN_DISTANCE) {\n      this.distance = MIN_DISTANCE;\n    }\n    this.dollyingStep = this.distance / 100;\n\n    const pos = vec3.create();\n    d = this.distance;\n    const n = this.forward;\n    const f = this.focalPoint;\n\n    pos[0] = d * n[0] + f[0];\n    pos[1] = d * n[1] + f[1];\n    pos[2] = d * n[2] + f[2];\n\n    this._setPosition(pos);\n    this.triggerUpdate();\n    return this;\n  }\n\n  setMaxDistance(d: number) {\n    this.maxDistance = d;\n    return this;\n  }\n\n  setMinDistance(d: number) {\n    this.minDistance = d;\n    return this;\n  }\n\n  /**\n   * \n   * the azimuth in degrees\n   */\n  setAzimuth(az: number) {\n    this.azimuth = getAngle(az);\n    this.computeMatrix();\n\n    this._getAxes();\n    if (\n      this.type === CameraType.ORBITING ||\n      this.type === CameraType.EXPLORING\n    ) {\n      this._getPosition();\n    } else if (this.type === CameraType.TRACKING) {\n      this._getFocalPoint();\n    }\n\n    this.triggerUpdate();\n    return this;\n  }\n\n  getAzimuth() {\n    return this.azimuth;\n  }\n\n  /**\n   * \n   */\n  setElevation(el: number) {\n    this.elevation = getAngle(el);\n    this.computeMatrix();\n\n    this._getAxes();\n    if (\n      this.type === CameraType.ORBITING ||\n      this.type === CameraType.EXPLORING\n    ) {\n      this._getPosition();\n    } else if (this.type === CameraType.TRACKING) {\n      this._getFocalPoint();\n    }\n\n    this.triggerUpdate();\n    return this;\n  }\n\n  getElevation() {\n    return this.elevation;\n  }\n\n  /**\n   * \n   */\n  setRoll(angle: number) {\n    this.roll = getAngle(angle);\n    this.computeMatrix();\n\n    this._getAxes();\n    if (\n      this.type === CameraType.ORBITING ||\n      this.type === CameraType.EXPLORING\n    ) {\n      this._getPosition();\n    } else if (this.type === CameraType.TRACKING) {\n      this._getFocalPoint();\n    }\n\n    this.triggerUpdate();\n    return this;\n  }\n\n  getRoll() {\n    return this.roll;\n  }\n\n  /**\n   * \n   */\n  protected _update() {\n    this._getAxes();\n    this._getPosition();\n    this._getDistance();\n    this._getAngles();\n    this._getOrthoMatrix();\n\n    this.triggerUpdate();\n  }\n\n  /**\n   * \n   */\n  protected computeMatrix() {\n    //  3D \n    // @see https://xiaoiver.github.io/coding/2018/12/28/Camera-%E8%AE%BE%E8%AE%A1-%E4%B8%80.html\n    const rotZ = quat.setAxisAngle(\n      quat.create(),\n      [0, 0, 1],\n      deg2rad(this.roll),\n    );\n\n    mat4.identity(this.matrix);\n\n    // only consider HCS for EXPLORING and ORBITING cameras\n    const rotX = quat.setAxisAngle(\n      quat.create(),\n      [1, 0, 0],\n      deg2rad(\n        ((this.rotateWorld && this.type !== CameraType.TRACKING) ||\n        this.type === CameraType.TRACKING\n          ? 1\n          : -1) * this.elevation,\n      ),\n    );\n    const rotY = quat.setAxisAngle(\n      quat.create(),\n      [0, 1, 0],\n      deg2rad(\n        ((this.rotateWorld && this.type !== CameraType.TRACKING) ||\n        this.type === CameraType.TRACKING\n          ? 1\n          : -1) * this.azimuth,\n      ),\n    );\n\n    let rotQ = quat.multiply(quat.create(), rotY, rotX);\n    rotQ = quat.multiply(quat.create(), rotQ, rotZ);\n    const rotMatrix = mat4.fromQuat(mat4.create(), rotQ);\n\n    if (\n      this.type === CameraType.ORBITING ||\n      this.type === CameraType.EXPLORING\n    ) {\n      mat4.translate(this.matrix, this.matrix, this.focalPoint);\n      mat4.multiply(this.matrix, this.matrix, rotMatrix);\n      mat4.translate(this.matrix, this.matrix, [0, 0, this.distance]);\n    } else if (this.type === CameraType.TRACKING) {\n      mat4.translate(this.matrix, this.matrix, this.position);\n      mat4.multiply(this.matrix, this.matrix, rotMatrix);\n    }\n  }\n\n  /**\n   * Sets the camera position in the camera matrix\n   */\n  protected _setPosition(x: number | vec3, y?: number, z?: number) {\n    this.position = createVec3(x, y, z);\n    const m = this.matrix;\n    m[12] = this.position[0];\n    m[13] = this.position[1];\n    m[14] = this.position[2];\n    m[15] = 1;\n\n    this._getOrthoMatrix();\n  }\n\n  /**\n   * Recalculates axes based on the current matrix\n   */\n  protected _getAxes() {\n    vec3.copy(\n      this.right,\n      createVec3(vec4.transformMat4(vec4.create(), [1, 0, 0, 0], this.matrix)),\n    );\n    vec3.copy(\n      this.up,\n      createVec3(vec4.transformMat4(vec4.create(), [0, 1, 0, 0], this.matrix)),\n    );\n    vec3.copy(\n      this.forward,\n      createVec3(vec4.transformMat4(vec4.create(), [0, 0, 1, 0], this.matrix)),\n    );\n    vec3.normalize(this.right, this.right);\n    vec3.normalize(this.up, this.up);\n    vec3.normalize(this.forward, this.forward);\n  }\n\n  /**\n   * Recalculates euler angles based on the current state\n   */\n  protected _getAngles() {\n    // Recalculates angles\n    const x = this.distanceVector[0];\n    const y = this.distanceVector[1];\n    const z = this.distanceVector[2];\n    const r = vec3.length(this.distanceVector);\n\n    // FAST FAIL: If there is no distance we cannot compute angles\n    if (r === 0) {\n      this.elevation = 0;\n      this.azimuth = 0;\n      return;\n    }\n\n    if (this.type === CameraType.TRACKING) {\n      this.elevation = rad2deg(Math.asin(y / r));\n      this.azimuth = rad2deg(Math.atan2(-x, -z));\n    } else if (this.rotateWorld) {\n      this.elevation = rad2deg(Math.asin(y / r));\n      this.azimuth = rad2deg(Math.atan2(-x, -z));\n    } else {\n      this.elevation = -rad2deg(Math.asin(y / r));\n      this.azimuth = -rad2deg(Math.atan2(-x, -z));\n    }\n  }\n\n  /**\n   *  ORBITING \n   */\n  protected _getPosition() {\n    vec3.copy(\n      this.position,\n      createVec3(vec4.transformMat4(vec4.create(), [0, 0, 0, 1], this.matrix)),\n    );\n\n    // \n    this._getDistance();\n  }\n\n  /**\n   *  TRACKING \n   */\n  protected _getFocalPoint() {\n    vec3.transformMat3(\n      this.distanceVector,\n      [0, 0, -this.distance],\n      mat3.fromMat4(mat3.create(), this.matrix),\n    );\n    vec3.add(this.focalPoint, this.position, this.distanceVector);\n\n    // \n    this._getDistance();\n  }\n\n  /**\n   * \n   */\n  protected _getDistance() {\n    this.distanceVector = vec3.subtract(\n      vec3.create(),\n      this.focalPoint,\n      this.position,\n    );\n    this.distance = vec3.length(this.distanceVector);\n    this.dollyingStep = this.distance / 100;\n  }\n\n  protected _getOrthoMatrix() {\n    if (this.projectionMode !== CameraProjectionMode.ORTHOGRAPHIC) {\n      return;\n    }\n\n    const { position } = this;\n    const rotZ = quat.setAxisAngle(\n      quat.create(),\n      [0, 0, 1],\n      (-this.roll * Math.PI) / 180,\n    );\n    mat4.fromRotationTranslationScaleOrigin(\n      this.orthoMatrix,\n      rotZ,\n      vec3.fromValues(\n        (this.rright - this.left) / 2 - position[0],\n        (this.top - this.bottom) / 2 - position[1],\n        0,\n      ),\n      vec3.fromValues(this.zoom, this.zoom, 1),\n      position,\n    );\n  }\n\n  protected triggerUpdate() {\n    if (this.enableUpdate) {\n      // update frustum\n      const viewMatrix = this.getViewTransform();\n      const vpMatrix = mat4.multiply(\n        mat4.create(),\n        this.getPerspective(),\n        viewMatrix,\n      );\n      this.getFrustum().extractFromVPMatrix(vpMatrix);\n\n      this.eventEmitter.emit(CameraEvent.UPDATED);\n    }\n  }\n\n  rotate(azimuth: number, elevation: number, roll: number): this {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  }\n  pan(tx: number, ty: number): this {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  }\n  dolly(value: number): this {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  }\n  createLandmark(\n    name: string,\n    params?: Partial<{\n      position: [number, number, number] | Float32Array | [number, number];\n      focalPoint: [number, number, number] | Float32Array | [number, number];\n      zoom: number;\n      roll: number;\n    }>,\n  ): Landmark {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  }\n  gotoLandmark(\n    name: string | Landmark,\n    options?:\n      | number\n      | Partial<{\n          easing: string;\n          easingFunction: TypeEasingFunction;\n          duration: number;\n          onfinish: () => void;\n        }>,\n  ): void {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  }\n  cancelLandmarkAnimation(): void {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  }\n}\n", "/**\n * @see https://doc.babylonjs.com/how_to/optimizing_your_scene#changing-mesh-culling-strategy\n */\nexport enum Strategy {\n  Standard,\n}\n\nexport interface Cullable {\n  strategy: Strategy;\n\n  visibilityPlaneMask: number;\n\n  visible: boolean;\n\n  enable: boolean;\n}\n", "import type { INode } from '../dom/interfaces';\n\nexport enum SortReason {\n  ADDED,\n  REMOVED,\n  Z_INDEX_CHANGED,\n}\n\nexport interface Sortable {\n  /**\n   * need to re-sort\n   */\n  dirty: boolean;\n\n  /**\n   * sorted child entities\n   */\n  sorted: INode[];\n\n  /**\n   * render order in whole scenegraph\n   */\n  renderOrder: number;\n\n  /**\n   * dirty children\n   */\n  dirtyChildren: INode[];\n\n  dirtyReason: SortReason;\n}\n", "import { mat4, quat, vec2, vec3 } from 'gl-matrix';\n\n/**\n * do RTS transformation for 2D/3D\n */\nexport interface Transform {\n  /**\n   * Update flag for the world transformation matrix\n   *\n   * ! This flag should usually not be updated manually, it should be derived from the parent node's `dirtyFlag` and its own `localDirtyFlag`\n   */\n  dirtyFlag: boolean;\n  localDirtyFlag: boolean;\n\n  /**\n   * local space RTS\n   */\n  localPosition: vec3;\n  localRotation: quat;\n  localScale: vec3;\n  localTransform: mat4;\n\n  /**\n   * @see https://www.w3.org/TR/css-transforms-1/#SkewDefined\n   */\n  localSkew: vec2;\n\n  /**\n   * world space RTS\n   */\n  position: vec3;\n  rotation: quat;\n  scaling: vec3;\n  worldTransform: mat4;\n\n  /**\n   * the origin of scaling and rotation\n   */\n  origin: vec3;\n}\n\n/** shared objects */\nconst $vec3 = vec3.create();\n/** shared objects */\nconst $mat4 = mat4.create();\n/** shared objects */\nconst $quat = quat.create();\n\nexport function updateLocalTransform(transform: Transform) {\n  if (!transform.localDirtyFlag) {\n    return;\n  }\n\n  const hasSkew = transform.localSkew[0] !== 0 || transform.localSkew[1] !== 0;\n\n  if (hasSkew) {\n    mat4.fromRotationTranslationScaleOrigin(\n      transform.localTransform,\n      transform.localRotation,\n      transform.localPosition,\n      vec3.fromValues(1, 1, 1),\n      transform.origin,\n    );\n\n    // apply skew2D\n    if (transform.localSkew[0] !== 0 || transform.localSkew[1] !== 0) {\n      mat4.identity($mat4);\n      $mat4[4] = Math.tan(transform.localSkew[0]);\n      $mat4[1] = Math.tan(transform.localSkew[1]);\n      mat4.multiply(transform.localTransform, transform.localTransform, $mat4);\n    }\n\n    const scaling = mat4.fromRotationTranslationScaleOrigin(\n      $mat4,\n      quat.set($quat, 0, 0, 0, 1),\n      vec3.set($vec3, 1, 1, 1),\n      transform.localScale,\n      transform.origin,\n    );\n    mat4.multiply(transform.localTransform, transform.localTransform, scaling);\n  } else {\n    const { localTransform, localPosition, localRotation, localScale, origin } =\n      transform;\n\n    const hasPosition =\n      localPosition[0] !== 0 ||\n      localPosition[1] !== 0 ||\n      localPosition[2] !== 0;\n\n    const hasRotation =\n      localRotation[3] !== 1 ||\n      localRotation[0] !== 0 ||\n      localRotation[1] !== 0 ||\n      localRotation[2] !== 0;\n\n    const hasScale =\n      localScale[0] !== 1 || localScale[1] !== 1 || localScale[2] !== 1;\n\n    const hasOrigin = origin[0] !== 0 || origin[1] !== 0 || origin[2] !== 0;\n\n    if (!hasRotation && !hasScale && !hasOrigin) {\n      if (hasPosition) {\n        mat4.fromTranslation(localTransform, localPosition);\n      } else {\n        mat4.identity(localTransform);\n      }\n    } else {\n      // @see https://github.com/mattdesl/css-mat4/blob/master/index.js\n      mat4.fromRotationTranslationScaleOrigin(\n        localTransform,\n        localRotation,\n        localPosition,\n        localScale,\n        origin,\n      );\n    }\n  }\n\n  transform.localDirtyFlag = false;\n}\n\nexport function updateWorldTransform(\n  transform: Transform,\n  parentTransform: Transform,\n) {\n  if (!transform.dirtyFlag) {\n    return;\n  }\n\n  if (!parentTransform) {\n    mat4.copy(transform.worldTransform, transform.localTransform);\n  } else {\n    // TODO: should we support scale compensation?\n    // @see https://github.com/playcanvas/engine/issues/1077#issuecomment-359765557\n    mat4.multiply(\n      transform.worldTransform,\n      parentTransform.worldTransform,\n      transform.localTransform,\n    );\n  }\n\n  transform.dirtyFlag = false;\n}\n", "import { AbsoluteArray } from '@antv/util';\nimport { Rectangle } from '../shapes';\n\nexport const EMPTY_PARSED_PATH = {\n  absolutePath: [] as unknown as AbsoluteArray,\n  hasArc: false,\n  segments: [],\n  polygons: [],\n  polylines: [],\n  curve: null,\n  totalLength: 0,\n  rect: new Rectangle(0, 0, 0, 0),\n};\n", "import type { BaseStyleProps } from '..';\nimport type { DisplayObject } from '../display-objects';\nimport type { CSSProperty } from './CSSProperty';\n\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/SVG/Content_type\n */\nexport enum PropertySyntax {\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/SVG/Content_type#coordinate\n   */\n  COORDINATE = '<coordinate>',\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/SVG/Content_type#color\n   */\n  COLOR = '<color>',\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/SVG/Content_type#paint\n   */\n  PAINT = '<paint>',\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/SVG/Content_type#number\n   */\n  NUMBER = '<number>',\n  /**\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/CSS/angle\n   */\n  ANGLE = '<angle>',\n  /**\n   * <number> with range 0..1\n   * @see https://developer.mozilla.org/en-US/docs/Web/SVG/Content_type#opacity_value\n   */\n  OPACITY_VALUE = '<opacity-value>',\n  /**\n   * <number> with range 0..Infinity\n   */\n  SHADOW_BLUR = '<shadow-blur>',\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/SVG/Content_type#length\n   */\n  LENGTH = '<length>',\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/SVG/Content_type#percentage\n   */\n  PERCENTAGE = '<percentage>',\n  LENGTH_PERCENTAGE = '<length> | <percentage>',\n\n  LENGTH_PERCENTAGE_12 = '[<length> | <percentage>]{1,2}',\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/CSS/margin#formal_syntax\n   */\n  LENGTH_PERCENTAGE_14 = '[<length> | <percentage>]{1,4}',\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/SVG/Content_type#list-of-ts\n   */\n  LIST_OF_POINTS = '<list-of-points>',\n  PATH = '<path>',\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/CSS/filter#formal_syntax\n   */\n  FILTER = '<filter>',\n  Z_INDEX = '<z-index>',\n  OFFSET_DISTANCE = '<offset-distance>',\n  DEFINED_PATH = '<defined-path>',\n  MARKER = '<marker>',\n  TRANSFORM = '<transform>',\n  TRANSFORM_ORIGIN = '<transform-origin>',\n  TEXT = '<text>',\n  TEXT_TRANSFORM = '<text-transform>',\n}\n\nexport interface PropertyMetadata {\n  n: string;\n\n  /**\n   * The interpolable flag indicates whether a property can be animated smoothly.\n   * Default to `false`.\n   */\n  int?: boolean;\n\n  /**\n   * The property will inherit by default if no value is specified.\n   * Default to `false`.\n   */\n  inh?: boolean;\n\n  /**\n   * This property affects only one field on ComputedStyle, and can be set\n   * directly during inheritance instead of forcing a recalc.\n   */\n  ind?: boolean;\n\n  /**\n   * This specifies the default value for this field.\n   * - for keyword fields, this is the initial keyword\n   * - for other fields, this is a string containg the C++ expression that is used to initialise the field.\n   */\n  d?: string | ((nodeName: string) => string);\n\n  /**\n   * The resolved value used for getComputedStyle() depends on layout for this\n   * property, which means we may need to update layout to return the correct\n   * value from getComputedStyle().\n   */\n  l?: boolean;\n\n  /**\n   * This specifies all valid keyword values for the property.\n   */\n  k?: string[];\n\n  /**\n   * eg. strokeWidth is an alias of lineWidth\n   */\n  a?: string[];\n\n  /**\n   * sort before init attributes according to this priority\n   */\n  p?: number;\n\n  /**\n   * eg. <color> <paint> <number>\n   */\n  syntax?: string;\n}\n\nexport interface PropertyParseOptions {\n  skipUpdateAttribute: boolean;\n  skipParse: boolean;\n  forceUpdateGeometry: boolean;\n  usedAttributes: string[];\n  memoize: boolean;\n}\n\nexport interface StyleValueRegistry {\n  updateSizeAttenuation: (displayObject: DisplayObject, zoom: number) => void;\n  registerMetadata: (metadata: PropertyMetadata) => void;\n  getPropertySyntax: (syntax: string) => CSSProperty<any, any>;\n  processProperties: (\n    object: DisplayObject,\n    attributes: BaseStyleProps,\n    options?: Partial<PropertyParseOptions>,\n  ) => void;\n}\n\nexport interface LayoutRegistry {\n  registerLayout: (name: string, ctor: any) => void;\n  hasLayout: (name: string) => boolean;\n  getLayout: (name: string) => any;\n}\n", "export default function(constructor, factory, prototype) {\n  constructor.prototype = factory.prototype = prototype;\n  prototype.constructor = constructor;\n}\n\nexport function extend(parent, definition) {\n  var prototype = Object.create(parent.prototype);\n  for (var key in definition) prototype[key] = definition[key];\n  return prototype;\n}\n", "import define, {extend} from \"./define.js\";\n\nexport function Color() {}\n\nexport var darker = 0.7;\nexport var brighter = 1 / darker;\n\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?(?:\\\\d*\\\\.)?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?(?:\\\\d*\\\\.)?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex = /^#([0-9a-f]{3,8})$/,\n    reRgbInteger = new RegExp(`^rgb\\\\(${reI},${reI},${reI}\\\\)$`),\n    reRgbPercent = new RegExp(`^rgb\\\\(${reP},${reP},${reP}\\\\)$`),\n    reRgbaInteger = new RegExp(`^rgba\\\\(${reI},${reI},${reI},${reN}\\\\)$`),\n    reRgbaPercent = new RegExp(`^rgba\\\\(${reP},${reP},${reP},${reN}\\\\)$`),\n    reHslPercent = new RegExp(`^hsl\\\\(${reN},${reP},${reP}\\\\)$`),\n    reHslaPercent = new RegExp(`^hsla\\\\(${reN},${reP},${reP},${reN}\\\\)$`);\n\nvar named = {\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkgrey: 0xa9a9a9,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  grey: 0x808080,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightgrey: 0xd3d3d3,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n};\n\ndefine(Color, color, {\n  copy(channels) {\n    return Object.assign(new this.constructor, this, channels);\n  },\n  displayable() {\n    return this.rgb().displayable();\n  },\n  hex: color_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: color_formatHex,\n  formatHex8: color_formatHex8,\n  formatHsl: color_formatHsl,\n  formatRgb: color_formatRgb,\n  toString: color_formatRgb\n});\n\nfunction color_formatHex() {\n  return this.rgb().formatHex();\n}\n\nfunction color_formatHex8() {\n  return this.rgb().formatHex8();\n}\n\nfunction color_formatHsl() {\n  return hslConvert(this).formatHsl();\n}\n\nfunction color_formatRgb() {\n  return this.rgb().formatRgb();\n}\n\nexport default function color(format) {\n  var m, l;\n  format = (format + \"\").trim().toLowerCase();\n  return (m = reHex.exec(format)) ? (l = m[1].length, m = parseInt(m[1], 16), l === 6 ? rgbn(m) // #ff0000\n      : l === 3 ? new Rgb((m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1) // #f00\n      : l === 8 ? rgba(m >> 24 & 0xff, m >> 16 & 0xff, m >> 8 & 0xff, (m & 0xff) / 0xff) // #ff000000\n      : l === 4 ? rgba((m >> 12 & 0xf) | (m >> 8 & 0xf0), (m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), (((m & 0xf) << 4) | (m & 0xf)) / 0xff) // #f000\n      : null) // invalid hex\n      : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n      : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n      : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n      : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n      : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n      : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n      : named.hasOwnProperty(format) ? rgbn(named[format]) // eslint-disable-line no-prototype-builtins\n      : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0)\n      : null;\n}\n\nfunction rgbn(n) {\n  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n}\n\nfunction rgba(r, g, b, a) {\n  if (a <= 0) r = g = b = NaN;\n  return new Rgb(r, g, b, a);\n}\n\nexport function rgbConvert(o) {\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Rgb;\n  o = o.rgb();\n  return new Rgb(o.r, o.g, o.b, o.opacity);\n}\n\nexport function rgb(r, g, b, opacity) {\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n}\n\nexport function Rgb(r, g, b, opacity) {\n  this.r = +r;\n  this.g = +g;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Rgb, rgb, extend(Color, {\n  brighter(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  darker(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  rgb() {\n    return this;\n  },\n  clamp() {\n    return new Rgb(clampi(this.r), clampi(this.g), clampi(this.b), clampa(this.opacity));\n  },\n  displayable() {\n    return (-0.5 <= this.r && this.r < 255.5)\n        && (-0.5 <= this.g && this.g < 255.5)\n        && (-0.5 <= this.b && this.b < 255.5)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  hex: rgb_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: rgb_formatHex,\n  formatHex8: rgb_formatHex8,\n  formatRgb: rgb_formatRgb,\n  toString: rgb_formatRgb\n}));\n\nfunction rgb_formatHex() {\n  return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}`;\n}\n\nfunction rgb_formatHex8() {\n  return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity) ? 1 : this.opacity) * 255)}`;\n}\n\nfunction rgb_formatRgb() {\n  const a = clampa(this.opacity);\n  return `${a === 1 ? \"rgb(\" : \"rgba(\"}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${a === 1 ? \")\" : `, ${a})`}`;\n}\n\nfunction clampa(opacity) {\n  return isNaN(opacity) ? 1 : Math.max(0, Math.min(1, opacity));\n}\n\nfunction clampi(value) {\n  return Math.max(0, Math.min(255, Math.round(value) || 0));\n}\n\nfunction hex(value) {\n  value = clampi(value);\n  return (value < 16 ? \"0\" : \"\") + value.toString(16);\n}\n\nfunction hsla(h, s, l, a) {\n  if (a <= 0) h = s = l = NaN;\n  else if (l <= 0 || l >= 1) h = s = NaN;\n  else if (s <= 0) h = NaN;\n  return new Hsl(h, s, l, a);\n}\n\nexport function hslConvert(o) {\n  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Hsl;\n  if (o instanceof Hsl) return o;\n  o = o.rgb();\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n  if (s) {\n    if (r === max) h = (g - b) / s + (g < b) * 6;\n    else if (g === max) h = (b - r) / s + 2;\n    else h = (r - g) / s + 4;\n    s /= l < 0.5 ? max + min : 2 - max - min;\n    h *= 60;\n  } else {\n    s = l > 0 && l < 1 ? 0 : h;\n  }\n  return new Hsl(h, s, l, o.opacity);\n}\n\nexport function hsl(h, s, l, opacity) {\n  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hsl(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hsl, hsl, extend(Color, {\n  brighter(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb() {\n    var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n    return new Rgb(\n      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),\n      hsl2rgb(h, m1, m2),\n      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),\n      this.opacity\n    );\n  },\n  clamp() {\n    return new Hsl(clamph(this.h), clampt(this.s), clampt(this.l), clampa(this.opacity));\n  },\n  displayable() {\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s))\n        && (0 <= this.l && this.l <= 1)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  formatHsl() {\n    const a = clampa(this.opacity);\n    return `${a === 1 ? \"hsl(\" : \"hsla(\"}${clamph(this.h)}, ${clampt(this.s) * 100}%, ${clampt(this.l) * 100}%${a === 1 ? \")\" : `, ${a})`}`;\n  }\n}));\n\nfunction clamph(value) {\n  value = (value || 0) % 360;\n  return value < 0 ? value + 360 : value;\n}\n\nfunction clampt(value) {\n  return Math.max(0, Math.min(1, value || 0));\n}\n\n/* From FvD 13.37, CSS Color Module Level 3 */\nfunction hsl2rgb(h, m1, m2) {\n  return (h < 60 ? m1 + (m2 - m1) * h / 60\n      : h < 180 ? m2\n      : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60\n      : m1) * 255;\n}\n", "export function memoize<F = (...args: unknown[]) => unknown>(\n  func: F,\n  resolver?: (...args: any[]) => any,\n) {\n  if (\n    typeof func !== 'function' ||\n    (resolver != null && typeof resolver !== 'function')\n  ) {\n    throw new TypeError('Expected a function');\n  }\n\n  const memoized = function (...args) {\n    const key = resolver ? resolver.apply(this, args) : args[0];\n    const { cache } = memoized;\n\n    if (cache.has(key)) {\n      return cache.get(key);\n    }\n    const result = func.apply(this, args);\n    memoized.cache = cache.set(key, result) || cache;\n    return result;\n  };\n  memoized.cache = new (memoize.Cache || Map)();\n  memoize.cacheList.push(memoized.cache);\n\n  return memoized as F;\n}\n\nmemoize.Cache = Map;\nmemoize.cacheList = [];\nmemoize.clearCache = () => {\n  memoize.cacheList.forEach((cache) =>\n    (cache as unknown as Map<unknown, unknown>).clear(),\n  );\n};\n", "// These units are iterated through, so be careful when adding or changing the\n// order.\nexport enum UnitType {\n  kUnknown,\n  kNumber,\n  kPercentage,\n  // Length units\n  kEms,\n  // kExs,\n  kPixels,\n  // kCentimeters,\n  // kMillimeters,\n  // kInches,\n  // kPoints,\n  // kPicas,\n  // kQuarterMillimeters,\n  // https://drafts.csswg.org/css-values-4/#viewport-relative-lengths\n  //\n  // See also IsViewportPercentageLength.\n  // kViewportWidth,\n  // kViewportHeight,\n  // kViewportInlineSize,\n  // kViewportBlockSize,\n  // kViewportMin,\n  // kViewportMax,\n  // kSmallViewportWidth,\n  // kSmallViewportHeight,\n  // kSmallViewportInlineSize,\n  // kSmallViewportBlockSize,\n  // kSmallViewportMin,\n  // kSmallViewportMax,\n  // kLargeViewportWidth,\n  // kLargeViewportHeight,\n  // kLargeViewportInlineSize,\n  // kLargeViewportBlockSize,\n  // kLargeViewportMin,\n  // kLargeViewportMax,\n  // kDynamicViewportWidth,\n  // kDynamicViewportHeight,\n  // kDynamicViewportInlineSize,\n  // kDynamicViewportBlockSize,\n  // kDynamicViewportMin,\n  // kDynamicViewportMax,\n  // https://drafts.csswg.org/css-contain-3/#container-lengths\n  //\n  // See also IsContainerPercentageLength.\n  // kContainerWidth,\n  // kContainerHeight,\n  // kContainerInlineSize,\n  // kContainerBlockSize,\n  // kContainerMin,\n  // kContainerMax,\n  kRems,\n  // kChs,\n  // kUserUnits, // The SVG term for unitless lengths\n  // Angle units\n  kDegrees,\n  kRadians,\n  kGradians,\n  kTurns,\n  // Time units\n  kMilliseconds,\n  kSeconds,\n  // kHertz,\n  // kKilohertz,\n  // Resolution\n  // kDotsPerPixel,\n  // kDotsPerInch,\n  // kDotsPerCentimeter,\n  // Other units\n  // kFraction,\n  kInteger,\n  // This value is used to handle quirky margins in reflow roots (body, td,\n  // and th) like WinIE. The basic idea is that a stylesheet can use the value\n  // __qem (for quirky em) instead of em. When the quirky value is used, if\n  // you're in quirks mode, the margin will collapse away inside a table cell.\n  // This quirk is specified in the HTML spec but our impl is different.\n  // TODO: Remove this. crbug.com/443952\n  // kQuirkyEms,\n}\n\nexport enum UnitCategory {\n  kUNumber,\n  kUPercent,\n  kULength,\n  kUAngle,\n  kUTime,\n  // kUFrequency,\n  // kUResolution,\n  kUOther,\n}\n\nexport enum Nested {\n  kYes,\n  kNo,\n}\nexport enum ParenLess {\n  kYes,\n  kNo,\n}\n", "import { Nested, ParenLess, UnitCategory, UnitType } from './types';\n\n// This file specifies the unit strings used in CSSPrimitiveValues.\nconst data = [\n  {\n    name: 'em',\n    unit_type: UnitType.kEms,\n  },\n  // {\n  //   name: 'ex',\n  //   unit_type: UnitType.kExs,\n  // },\n  {\n    name: 'px',\n    unit_type: UnitType.kPixels,\n  },\n  // {\n  //   name: \"cm\",\n  //   unit_type: UnitType.kCentimeters,\n  // },\n  // {\n  //   name: \"mm\",\n  //   unit_type: UnitType.kMillimeters,\n  // },\n  // {\n  //   name: \"q\",\n  //   unit_type: UnitType.kQuarterMillimeters,\n  // },\n  // {\n  //   name: \"in\",\n  //   unit_type: UnitType.kInches,\n  // },\n  // {\n  //   name: \"pt\",\n  //   unit_type: UnitType.kPoints,\n  // },\n  // {\n  //   name: \"pc\",\n  //   unit_type: UnitType.kPicas,\n  // },\n  {\n    name: 'deg',\n    unit_type: UnitType.kDegrees,\n  },\n  {\n    name: 'rad',\n    unit_type: UnitType.kRadians,\n  },\n  {\n    name: 'grad',\n    unit_type: UnitType.kGradians,\n  },\n  {\n    name: 'ms',\n    unit_type: UnitType.kMilliseconds,\n  },\n  {\n    name: 's',\n    unit_type: UnitType.kSeconds,\n  },\n  // {\n  //   name: \"hz\",\n  //   unit_type: UnitType.kHertz,\n  // },\n  // {\n  //   name: \"khz\",\n  //   unit_type: UnitType.kKilohertz,\n  // },\n  // {\n  //   name: \"dpi\",\n  //   unit_type: \"kDotsPerInch\",\n  // },\n  // {\n  //   name: \"dpcm\",\n  //   unit_type: \"kDotsPerCentimeter\",\n  // },\n  // {\n  //   name: \"dppx\",\n  //   unit_type: \"kDotsPerPixel\",\n  // },\n  // {\n  //   name: \"x\",\n  //   unit_type: \"kDotsPerPixel\",\n  // },\n  // {\n  //   name: \"vw\",\n  //   unit_type: \"kViewportWidth\",\n  // },\n  // {\n  //   name: \"vh\",\n  //   unit_type: \"kViewportHeight\",\n  // },\n  // {\n  //   name: \"vi\",\n  //   unit_type: \"kViewportInlineSize\",\n  // },\n  // {\n  //   name: \"vb\",\n  //   unit_type: \"kViewportBlockSize\",\n  // },\n  // {\n  //   name: \"vmin\",\n  //   unit_type: UnitType.kViewportMin,\n  // },\n  // {\n  //   name: \"vmax\",\n  //   unit_type: UnitType.kViewportMax,\n  // },\n  // {\n  //   name: \"svw\",\n  //   unit_type: \"kSmallViewportWidth\",\n  // },\n  // {\n  //   name: \"svh\",\n  //   unit_type: \"kSmallViewportHeight\",\n  // },\n  // {\n  //   name: \"svi\",\n  //   unit_type: \"kSmallViewportInlineSize\",\n  // },\n  // {\n  //   name: \"svb\",\n  //   unit_type: \"kSmallViewportBlockSize\",\n  // },\n  // {\n  //   name: \"svmin\",\n  //   unit_type: \"kSmallViewportMin\",\n  // },\n  // {\n  //   name: \"svmax\",\n  //   unit_type: \"kSmallViewportMax\",\n  // },\n  // {\n  //   name: \"lvw\",\n  //   unit_type: \"kLargeViewportWidth\",\n  // },\n  // {\n  //   name: \"lvh\",\n  //   unit_type: \"kLargeViewportHeight\",\n  // },\n  // {\n  //   name: \"lvi\",\n  //   unit_type: \"kLargeViewportInlineSize\",\n  // },\n  // {\n  //   name: \"lvb\",\n  //   unit_type: \"kLargeViewportBlockSize\",\n  // },\n  // {\n  //   name: \"lvmin\",\n  //   unit_type: UnitType.kLargeViewportMin,\n  // },\n  // {\n  //   name: \"lvmax\",\n  //   unit_type: UnitType.kLargeViewportMax,\n  // },\n  // {\n  //   name: \"dvw\",\n  //   unit_type: UnitType.kDynamicViewportWidth,\n  // },\n  // {\n  //   name: \"dvh\",\n  //   unit_type: UnitType.kDynamicViewportHeight,\n  // },\n  // {\n  //   name: \"dvi\",\n  //   unit_type: UnitType.kDynamicViewportInlineSize,\n  // },\n  // {\n  //   name: \"dvb\",\n  //   unit_type: UnitType.kDynamicViewportBlockSize,\n  // },\n  // {\n  //   name: \"dvmin\",\n  //   unit_type: UnitType.kDynamicViewportMin,\n  // },\n  // {\n  //   name: \"dvmax\",\n  //   unit_type: UnitType.kDynamicViewportMax,\n  // },\n  // {\n  //   name: \"cqw\",\n  //   unit_type: UnitType.kContainerWidth,\n  // },\n  // {\n  //   name: \"cqh\",\n  //   unit_type: UnitType.kContainerHeight,\n  // },\n  // {\n  //   name: \"cqi\",\n  //   unit_type: UnitType.kContainerInlineSize,\n  // },\n  // {\n  //   name: \"cqb\",\n  //   unit_type: UnitType.kContainerBlockSize,\n  // },\n  // {\n  //   name: \"cqmin\",\n  //   unit_type: UnitType.kContainerMin,\n  // },\n  // {\n  //   name: \"cqmax\",\n  //   unit_type: UnitType.kContainerMax,\n  // },\n  {\n    name: 'rem',\n    unit_type: UnitType.kRems,\n  },\n  // {\n  //   name: 'fr',\n  //   unit_type: UnitType.kFraction,\n  // },\n  {\n    name: 'turn',\n    unit_type: UnitType.kTurns,\n  },\n  // {\n  //   name: 'ch',\n  //   unit_type: UnitType.kChs,\n  // },\n  // {\n  //   name: '__qem',\n  //   unit_type: UnitType.kQuirkyEms,\n  // },\n];\n\nexport enum CSSStyleValueType {\n  kUnknownType,\n  kUnparsedType,\n  kKeywordType,\n  // Start of CSSNumericValue subclasses\n  kUnitType,\n  kSumType,\n  kProductType,\n  kNegateType,\n  kInvertType,\n  kMinType,\n  kMaxType,\n  kClampType,\n  // End of CSSNumericValue subclasses\n  kTransformType,\n  kPositionType,\n  kURLImageType,\n  kColorType,\n  kUnsupportedColorType,\n}\n\n// function parseCSSStyleValue(propertyName: string, value: string): CSSStyleValue[] {\n//   // const propertyId = cssPropertyID(propertyName);\n\n//   // if (propertyId === CSSPropertyID.kInvalid) {\n//   //   return [];\n//   // }\n\n//   // const customPropertyName = propertyId === CSSPropertyID.kVariable ? propertyName : null;\n//   // return fromString(propertyId, customPropertyName, value);\n//   return [];\n// }\n\nconst stringToUnitType = (name: string): UnitType => {\n  return data.find((item) => item.name === name).unit_type;\n};\n\nexport const unitFromName = (name: string) => {\n  if (!name) {\n    return UnitType.kUnknown;\n  }\n  if (name === 'number') {\n    return UnitType.kNumber;\n  }\n  if (name === 'percent' || name === '%') {\n    return UnitType.kPercentage;\n  }\n  return stringToUnitType(name);\n};\n\nexport const unitTypeToUnitCategory = (type: UnitType) => {\n  switch (type) {\n    case UnitType.kNumber:\n    case UnitType.kInteger:\n      return UnitCategory.kUNumber;\n    case UnitType.kPercentage:\n      return UnitCategory.kUPercent;\n    case UnitType.kPixels:\n      // case UnitType.kCentimeters:\n      // case UnitType.kMillimeters:\n      // case UnitType.kQuarterMillimeters:\n      // case UnitType.kInches:\n      // case UnitType.kPoints:\n      // case UnitType.kPicas:\n      // case UnitType.kUserUnits:\n      return UnitCategory.kULength;\n    case UnitType.kMilliseconds:\n    case UnitType.kSeconds:\n      return UnitCategory.kUTime;\n    case UnitType.kDegrees:\n    case UnitType.kRadians:\n    case UnitType.kGradians:\n    case UnitType.kTurns:\n      return UnitCategory.kUAngle;\n    // case UnitType.kHertz:\n    // case UnitType.kKilohertz:\n    //   return UnitCategory.kUFrequency;\n    // case UnitType.kDotsPerPixel:\n    // case UnitType.kDotsPerInch:\n    // case UnitType.kDotsPerCentimeter:\n    //   return UnitCategory.kUResolution;\n    default:\n      return UnitCategory.kUOther;\n  }\n};\n\nexport const canonicalUnitTypeForCategory = (category: UnitCategory) => {\n  // The canonical unit type is chosen according to the way\n  // CSSPropertyParser.ValidUnit() chooses the default unit in each category\n  // (based on unitflags).\n  switch (category) {\n    case UnitCategory.kUNumber:\n      return UnitType.kNumber;\n    case UnitCategory.kULength:\n      return UnitType.kPixels;\n    case UnitCategory.kUPercent:\n      return UnitType.kPercentage;\n    // return UnitType.kUnknown; // Cannot convert between numbers and percent.\n    case UnitCategory.kUTime:\n      return UnitType.kSeconds;\n    case UnitCategory.kUAngle:\n      return UnitType.kDegrees;\n    // case UnitCategory.kUFrequency:\n    //   return UnitType.kHertz;\n    // case UnitCategory.kUResolution:\n    //   return UnitType.kDotsPerPixel;\n    default:\n      return UnitType.kUnknown;\n  }\n};\n\n/**\n * @see https://chromium.googlesource.com/chromium/src/+/refs/heads/main/third_party/blink/renderer/core/css/css_primitive_value.cc#353\n */\nexport const conversionToCanonicalUnitsScaleFactor = (unit_type: UnitType) => {\n  let factor = 1.0;\n  // FIXME: the switch can be replaced by an array of scale factors.\n  switch (unit_type) {\n    // These are \"canonical\" units in their respective categories.\n    case UnitType.kPixels:\n    // case UnitType.kUserUnits:\n    case UnitType.kDegrees:\n    case UnitType.kSeconds:\n      // case UnitType.kHertz:\n      break;\n    case UnitType.kMilliseconds:\n      factor = 0.001;\n      break;\n    // case UnitType.kCentimeters:\n    //   // factor = kCssPixelsPerCentimeter;\n    //   break;\n    // case UnitType.kDotsPerCentimeter:\n    //   // factor = 1 / kCssPixelsPerCentimeter;\n    //   break;\n    // case UnitType.kMillimeters:\n    //   // factor = kCssPixelsPerMillimeter;\n    //   break;\n    // case UnitType.kQuarterMillimeters:\n    //   // factor = kCssPixelsPerQuarterMillimeter;\n    //   break;\n    // case UnitType.kInches:\n    //   // factor = kCssPixelsPerInch;\n    //   break;\n    // case UnitType.kDotsPerInch:\n    //   // factor = 1 / kCssPixelsPerInch;\n    //   break;\n    // case UnitType.kPoints:\n    //   // factor = kCssPixelsPerPoint;\n    //   break;\n    // case UnitType.kPicas:\n    //   // factor = kCssPixelsPerPica;\n    //   break;\n    case UnitType.kRadians:\n      factor = 180 / Math.PI;\n      break;\n    case UnitType.kGradians:\n      factor = 0.9;\n      break;\n    case UnitType.kTurns:\n      factor = 360;\n      break;\n    // case UnitType.kKilohertz:\n    //   factor = 1000;\n    //   break;\n    default:\n      break;\n  }\n  return factor;\n};\n\nexport const unitTypeToString = (type: UnitType) => {\n  switch (type) {\n    case UnitType.kNumber:\n    case UnitType.kInteger:\n      // case UnitType.kUserUnits:\n      return '';\n    case UnitType.kPercentage:\n      return '%';\n    case UnitType.kEms:\n      // case UnitType.kQuirkyEms:\n      return 'em';\n    // case UnitType.kExs:\n    //   return 'ex';\n    case UnitType.kRems:\n      return 'rem';\n    // case UnitType.kChs:\n    //   return 'ch';\n    case UnitType.kPixels:\n      return 'px';\n    // case UnitType.kCentimeters:\n    //   return 'cm';\n    // case UnitType.kDotsPerPixel:\n    //   return 'dppx';\n    // case UnitType.kDotsPerInch:\n    //   return 'dpi';\n    // case UnitType.kDotsPerCentimeter:\n    //   return 'dpcm';\n    // case UnitType.kMillimeters:\n    //   return 'mm';\n    // case UnitType.kQuarterMillimeters:\n    //   return 'q';\n    // case UnitType.kInches:\n    //   return 'in';\n    // case UnitType.kPoints:\n    //   return 'pt';\n    // case UnitType.kPicas:\n    //   return 'pc';\n    case UnitType.kDegrees:\n      return 'deg';\n    case UnitType.kRadians:\n      return 'rad';\n    case UnitType.kGradians:\n      return 'grad';\n    case UnitType.kMilliseconds:\n      return 'ms';\n    case UnitType.kSeconds:\n      return 's';\n    // case UnitType.kHertz:\n    //   return 'hz';\n    // case UnitType.kKilohertz:\n    //   return 'khz';\n    case UnitType.kTurns:\n      return 'turn';\n    // case UnitType.kFraction:\n    //   return 'fr';\n    // case UnitType.kViewportWidth:\n    //   return 'vw';\n    // case UnitType.kViewportHeight:\n    //   return 'vh';\n    // case UnitType.kViewportInlineSize:\n    //   return 'vi';\n    // case UnitType.kViewportBlockSize:\n    //   return 'vb';\n    // case UnitType.kViewportMin:\n    //   return 'vmin';\n    // case UnitType.kViewportMax:\n    //   return 'vmax';\n    // case UnitType.kSmallViewportWidth:\n    //   return 'svw';\n    // case UnitType.kSmallViewportHeight:\n    //   return 'svh';\n    // case UnitType.kSmallViewportInlineSize:\n    //   return 'svi';\n    // case UnitType.kSmallViewportBlockSize:\n    //   return 'svb';\n    // case UnitType.kSmallViewportMin:\n    //   return 'svmin';\n    // case UnitType.kSmallViewportMax:\n    //   return 'svmax';\n    // case UnitType.kLargeViewportWidth:\n    //   return 'lvw';\n    // case UnitType.kLargeViewportHeight:\n    //   return 'lvh';\n    // case UnitType.kLargeViewportInlineSize:\n    //   return 'lvi';\n    // case UnitType.kLargeViewportBlockSize:\n    //   return 'lvb';\n    // case UnitType.kLargeViewportMin:\n    //   return 'lvmin';\n    // case UnitType.kLargeViewportMax:\n    //   return 'lvmax';\n    // case UnitType.kDynamicViewportWidth:\n    //   return 'dvw';\n    // case UnitType.kDynamicViewportHeight:\n    //   return 'dvh';\n    // case UnitType.kDynamicViewportInlineSize:\n    //   return 'dvi';\n    // case UnitType.kDynamicViewportBlockSize:\n    //   return 'dvb';\n    // case UnitType.kDynamicViewportMin:\n    //   return 'dvmin';\n    // case UnitType.kDynamicViewportMax:\n    //   return 'dvmax';\n    // case UnitType.kContainerWidth:\n    //   return 'cqw';\n    // case UnitType.kContainerHeight:\n    //   return 'cqh';\n    // case UnitType.kContainerInlineSize:\n    //   return 'cqi';\n    // case UnitType.kContainerBlockSize:\n    //   return 'cqb';\n    // case UnitType.kContainerMin:\n    //   return 'cqmin';\n    // case UnitType.kContainerMax:\n    //   return 'cqmax';\n    default:\n      break;\n  }\n  return '';\n};\n\n/**\n * CSSStyleValue is the base class for all CSS values accessible from Typed OM.\n * Values that are not yet supported as specific types are also returned as base CSSStyleValues.\n *\n * Spec @see https://drafts.css-houdini.org/css-typed-om/#stylevalue-objects\n * Docs @see https://developer.mozilla.org/en-US/docs/Web/API/CSSStyleValue\n */\nexport abstract class CSSStyleValue {\n  // static parse(propertyName: string, value: string): CSSStyleValue {\n  //   return parseCSSStyleValue(propertyName, value)[0];\n  // }\n\n  // static parseAll(propertyName: string, value: string): CSSStyleValue[] {\n  //   return parseCSSStyleValue(propertyName, value);\n  // }\n\n  static isAngle(unit: UnitType) {\n    return (\n      unit === UnitType.kDegrees ||\n      unit === UnitType.kRadians ||\n      unit === UnitType.kGradians ||\n      unit === UnitType.kTurns\n    );\n  }\n\n  // static isViewportPercentageLength(type: UnitType) {\n  //   return type >= UnitType.kViewportWidth && type <= UnitType.kDynamicViewportMax;\n  // }\n\n  // static isContainerPercentageLength(type: UnitType) {\n  //   return type >= UnitType.kContainerWidth && type <= UnitType.kContainerMax;\n  // }\n\n  static isLength(type: UnitType) {\n    // return (type >= UnitType.kEms && type <= UnitType.kUserUnits) || type == UnitType.kQuirkyEms;\n    return type >= UnitType.kEms && type < UnitType.kDegrees;\n  }\n\n  static isRelativeUnit(type: UnitType) {\n    return (\n      type === UnitType.kPercentage ||\n      type === UnitType.kEms ||\n      // type === UnitType.kExs ||\n      type === UnitType.kRems\n      // type === UnitType.kChs ||\n      // this.isViewportPercentageLength(type) ||\n      // this.isContainerPercentageLength(type)\n    );\n  }\n\n  static isTime(unit: UnitType) {\n    return unit === UnitType.kSeconds || unit === UnitType.kMilliseconds;\n  }\n\n  // static isFrequency(unit: UnitType) {\n  //   return unit == UnitType.kHertz || unit == UnitType.kKilohertz;\n  // }\n\n  // static isResolution(type: UnitType) {\n  //   return type >= UnitType.kDotsPerPixel && type <= UnitType.kDotsPerCentimeter;\n  // }\n\n  // static isFlex(unit: UnitType) {\n  //   return unit === UnitType.kFraction;\n  // }\n\n  protected abstract getType(): CSSStyleValueType;\n\n  abstract buildCSSText(n: Nested, p: ParenLess, result: string): string;\n\n  abstract clone(): CSSStyleValue;\n\n  // protected abstract toCSSValue(): CSSValue;\n\n  toString(): string {\n    return this.buildCSSText(Nested.kNo, ParenLess.kNo, '');\n  }\n\n  isNumericValue() {\n    return (\n      this.getType() >= CSSStyleValueType.kUnitType &&\n      this.getType() <= CSSStyleValueType.kClampType\n    );\n  }\n}\n", "import { CSSStyleValue, CSSStyleValueType } from './CSSStyleValue';\nimport { CSSNumberish } from './CSSNumericValue';\n\n/**\n * @see https://drafts.css-houdini.org/css-typed-om-1/#dom-csscolorvalue-colorspace\n */\nexport type ColorSpace = 'rgb' | 'hsl' | 'hwb' | 'lch' | 'lab';\nexport type CSSColorRGBComp = CSSNumberish | 'none';\nexport type CSSColorPercent = CSSNumberish | 'none';\nexport type CSSColorNumber = CSSNumberish | 'none';\nexport type CSSColorAngle = CSSNumberish | 'none';\n\n/**\n * CSSColorValue is the base class used for the various CSS color interfaces.\n *\n * @see https://drafts.css-houdini.org/css-typed-om-1/#colorvalue-objects\n */\nexport abstract class CSSColorValue extends CSSStyleValue {\n  constructor(public colorSpace: ColorSpace) {\n    super();\n  }\n\n  getType() {\n    return CSSStyleValueType.kColorType;\n  }\n\n  /**\n   * @see https://drafts.css-houdini.org/css-typed-om-1/#dom-csscolorvalue-to\n   */\n  to(colorSpace: ColorSpace): CSSColorValue {\n    return this;\n  }\n}\n", "import type { CSSKeywordValue } from './CSSKeywordValue';\nimport type { CSSUnitValue } from './CSSNumericValue';\nimport { CSSStyleValue, CSSStyleValueType } from './CSSStyleValue';\nimport type { Nested, ParenLess } from './types';\n\nexport interface LinearColorStop {\n  offset: CSSUnitValue;\n  color: string; // use user-defined value instead of parsed CSSRGB\n}\n\nexport interface LinearGradient {\n  angle: CSSUnitValue;\n  steps: LinearColorStop[];\n}\n\nexport interface RadialGradient {\n  cx: CSSUnitValue;\n  cy: CSSUnitValue;\n  size?: CSSUnitValue | CSSKeywordValue;\n  steps: LinearColorStop[];\n}\n\nexport enum GradientType {\n  Constant,\n  LinearGradient,\n  RadialGradient,\n}\n\nexport class CSSGradientValue extends CSSStyleValue {\n  constructor(\n    public type: GradientType,\n    public value: LinearGradient | RadialGradient,\n  ) {\n    super();\n  }\n\n  clone() {\n    return new CSSGradientValue(this.type, this.value);\n  }\n\n  buildCSSText(n: Nested, p: ParenLess, result: string): string {\n    return result;\n  }\n\n  getType() {\n    return CSSStyleValueType.kColorType;\n  }\n}\n", "import { CSSStyleValue, CSSStyleValueType } from './CSSStyleValue';\nimport type { Nested, ParenLess } from './types';\n\n/**\n * CSSKeywordValue represents CSS Values that are specified as keywords\n * eg. 'initial'\n * @see https://developer.mozilla.org/en-US/docs/Web/API/CSSKeywordValue\n * @see https://chromium.googlesource.com/chromium/src/+/refs/heads/main/third_party/blink/renderer/core/css/cssom/css_keyword_value.idl\n */\nexport class CSSKeywordValue extends CSSStyleValue {\n  constructor(public value: string) {\n    super();\n  }\n\n  clone() {\n    return new CSSKeywordValue(this.value);\n  }\n\n  getType() {\n    return CSSStyleValueType.kKeywordType;\n  }\n\n  buildCSSText(n: Nested, p: ParenLess, result: string) {\n    return result + this.value;\n  }\n}\n", "import {\n  canonicalUnitTypeForCategory,\n  conversionToCanonicalUnitsScaleFactor,\n  CSSStyleValue,\n  CSSStyleValueType,\n  unitFromName,\n  unitTypeToString,\n  unitTypeToUnitCategory,\n} from './CSSStyleValue';\nimport { Nested, ParenLess, UnitType } from './types';\n\nexport type CSSNumberish = number;\n\nconst formatInfinityOrNaN = (number: number, suffix = '') => {\n  let result = '';\n  if (!Number.isFinite(number)) {\n    if (number > 0) result = 'infinity';\n    else result = '-infinity';\n  } else {\n    result = 'NaN';\n  }\n  return (result += suffix);\n};\n\nexport const toCanonicalUnit = (unit: UnitType) => {\n  return canonicalUnitTypeForCategory(unitTypeToUnitCategory(unit));\n};\n\n/**\n * CSSNumericValue is the base class for numeric and length typed CSS Values.\n * @see https://drafts.css-houdini.org/css-typed-om/#numeric-objects\n * @see https://developer.mozilla.org/en-US/docs/Web/API/CSSNumericValue\n * @see https://chromium.googlesource.com/chromium/src/+/refs/heads/main/third_party/blink/renderer/core/css/cssom/css_numeric_value.idl\n */\n\n/**\n * Represents numeric values that can be expressed as a single number plus a\n * unit (or a naked number or percentage).\n * @see https://drafts.css-houdini.org/css-typed-om/#cssunitvalue\n */\nexport class CSSUnitValue extends CSSStyleValue {\n  unit: UnitType;\n  value: number;\n\n  constructor(value: number, unitOrName: UnitType | string = UnitType.kNumber) {\n    super();\n\n    let unit: UnitType;\n    if (typeof unitOrName === 'string') {\n      unit = unitFromName(unitOrName);\n    } else {\n      unit = unitOrName;\n    }\n    this.unit = unit;\n    this.value = value;\n  }\n\n  clone() {\n    return new CSSUnitValue(this.value, this.unit);\n  }\n\n  equals(other: CSSUnitValue): boolean {\n    const other_unit_value = other as unknown as CSSUnitValue;\n    return (\n      this.value === other_unit_value.value &&\n      this.unit === other_unit_value.unit\n    );\n  }\n\n  getType() {\n    return CSSStyleValueType.kUnitType;\n  }\n\n  convertTo(target_unit: UnitType): CSSUnitValue {\n    if (this.unit === target_unit) {\n      return new CSSUnitValue(this.value, this.unit);\n    }\n\n    // Instead of defining the scale factors for every unit to every other unit,\n    // we simply convert to the canonical unit and back since we already have\n    // the scale factors for canonical units.\n    const canonical_unit = toCanonicalUnit(this.unit);\n    if (\n      canonical_unit !== toCanonicalUnit(target_unit) ||\n      canonical_unit === UnitType.kUnknown\n    ) {\n      return null;\n    }\n\n    const scale_factor =\n      conversionToCanonicalUnitsScaleFactor(this.unit) /\n      conversionToCanonicalUnitsScaleFactor(target_unit);\n\n    return new CSSUnitValue(this.value * scale_factor, target_unit);\n  }\n\n  buildCSSText(n: Nested, p: ParenLess, result: string) {\n    let text: string;\n    switch (this.unit) {\n      case UnitType.kUnknown:\n        // FIXME\n        break;\n      case UnitType.kInteger:\n        text = Number(this.value).toFixed(0);\n        break;\n      case UnitType.kNumber:\n      case UnitType.kPercentage:\n      case UnitType.kEms:\n      // case UnitType.kQuirkyEms:\n      // case UnitType.kExs:\n      case UnitType.kRems:\n      // case UnitType.kChs:\n      case UnitType.kPixels:\n      // case UnitType.kCentimeters:\n      // case UnitType.kDotsPerPixel:\n      // case UnitType.kDotsPerInch:\n      // case UnitType.kDotsPerCentimeter:\n      // case UnitType.kMillimeters:\n      // case UnitType.kQuarterMillimeters:\n      // case UnitType.kInches:\n      // case UnitType.kPoints:\n      // case UnitType.kPicas:\n      // case UnitType.kUserUnits:\n      case UnitType.kDegrees:\n      case UnitType.kRadians:\n      case UnitType.kGradians:\n      case UnitType.kMilliseconds:\n      case UnitType.kSeconds:\n      // case UnitType.kHertz:\n      // case UnitType.kKilohertz:\n      case UnitType.kTurns: {\n        // case UnitType.kContainerMax: { // case UnitType.kContainerMin: // case UnitType.kContainerBlockSize: // case UnitType.kContainerInlineSize: // case UnitType.kContainerHeight: // case UnitType.kContainerWidth: // case UnitType.kDynamicViewportMax: // case UnitType.kDynamicViewportMin: // case UnitType.kDynamicViewportBlockSize: // case UnitType.kDynamicViewportInlineSize: // case UnitType.kDynamicViewportHeight: // case UnitType.kDynamicViewportWidth: // case UnitType.kLargeViewportMax: // case UnitType.kLargeViewportMin: // case UnitType.kLargeViewportBlockSize: // case UnitType.kLargeViewportInlineSize: // case UnitType.kLargeViewportHeight: // case UnitType.kLargeViewportWidth: // case UnitType.kSmallViewportMax: // case UnitType.kSmallViewportMin: // case UnitType.kSmallViewportBlockSize: // case UnitType.kSmallViewportInlineSize: // case UnitType.kSmallViewportHeight: // case UnitType.kSmallViewportWidth: // case UnitType.kViewportMax: // case UnitType.kViewportMin: // case UnitType.kViewportBlockSize: // case UnitType.kViewportInlineSize: // case UnitType.kViewportHeight: // case UnitType.kViewportWidth: // case UnitType.kFraction:\n        const kMinInteger = -999999;\n        const kMaxInteger = 999999;\n\n        const { value } = this;\n        const unit = unitTypeToString(this.unit);\n        if (value < kMinInteger || value > kMaxInteger) {\n          const unit = unitTypeToString(this.unit);\n          if (!Number.isFinite(value) || Number.isNaN(value)) {\n            text = formatInfinityOrNaN(value, unit);\n          } else {\n            text = value + (unit || '');\n          }\n        } else {\n          text = `${value}${unit}`;\n        }\n      }\n    }\n\n    result += text;\n    return result;\n  }\n}\n\nexport const Opx: CSSUnitValue = new CSSUnitValue(0, 'px');\nexport const Lpx: CSSUnitValue = new CSSUnitValue(1, 'px');\nexport const Odeg: CSSUnitValue = new CSSUnitValue(0, 'deg');\n", "import type { CSSColorPercent, CSSColorRGBComp } from './CSSColorValue';\nimport { CSSColorValue } from './CSSColorValue';\nimport type { Nested, ParenLess } from './types';\n\n/**\n * The CSSRGB class represents the CSS rgb()/rgba() functions.\n *\n * @see https://drafts.css-houdini.org/css-typed-om-1/#cssrgb\n */\nexport class CSSRGB extends CSSColorValue {\n  constructor(\n    public r: CSSColorRGBComp,\n    public g: CSSColorRGBComp,\n    public b: CSSColorRGBComp,\n    public alpha: CSSColorPercent = 1,\n    /**\n     * 'transparent' & 'none' has the same rgba data\n     */\n    public isNone = false,\n  ) {\n    super('rgb');\n  }\n\n  clone() {\n    return new CSSRGB(this.r, this.g, this.b, this.alpha);\n  }\n\n  buildCSSText(n: Nested, p: ParenLess, result: string): string {\n    return `${result}rgba(${this.r},${this.g},${this.b},${this.alpha})`;\n  }\n}\n", "import { memoize } from '../utils/memoize';\nimport { CSSKeywordValue, CSSRGB, CSSUnitValue, UnitType } from './cssom';\n\n/**\n * CSSKeywordValue\n */\nexport const unsetKeywordValue = new CSSKeywordValue('unset');\nexport const initialKeywordValue = new CSSKeywordValue('initial');\nexport const inheritKeywordValue = new CSSKeywordValue('inherit');\nconst keywordCache: Record<string, CSSKeywordValue> = {\n  '': unsetKeywordValue,\n  unset: unsetKeywordValue,\n  initial: initialKeywordValue,\n  inherit: inheritKeywordValue,\n};\nexport const getOrCreateKeyword = (name: string) => {\n  if (!keywordCache[name]) {\n    keywordCache[name] = new CSSKeywordValue(name);\n  }\n\n  return keywordCache[name];\n};\n\n/**\n * CSSColor\n */\nexport const noneColor = new CSSRGB(0, 0, 0, 0, true);\nexport const transparentColor = new CSSRGB(0, 0, 0, 0);\nexport const getOrCreateRGBA = memoize(\n  (r: number, g: number, b: number, a: number) => {\n    return new CSSRGB(r, g, b, a);\n  },\n  (r: number, g: number, b: number, a: number) => {\n    return `rgba(${r},${g},${b},${a})`;\n  },\n);\n\n// export const getOrCreateUnitValue = memoize(\n//   (value: number, unitOrName: UnitType | string = UnitType.kNumber) => {\n//     return new CSSUnitValue(value, unitOrName);\n//   },\n//   (value: number, unitOrName: UnitType | string = UnitType.kNumber) => {\n//     return `${value}${unitOrName}`;\n//   },\n// );\n\nexport const getOrCreateUnitValue = (\n  value: number,\n  unitOrName: UnitType | string = UnitType.kNumber,\n) => {\n  return new CSSUnitValue(value, unitOrName);\n};\nexport const PECENTAGE_50 = new CSSUnitValue(50, '%');\n", "/**\n * borrow from gradient-parser, but we delete some browser compatible prefix such as `-webkit-`\n * @see https://github.com/rafaelcaricio/gradient-parser\n */\n\nimport { distanceSquareRoot } from '@antv/util';\nimport { CSSKeywordValue, CSSUnitValue, UnitType } from '../css/cssom';\nimport { deg2rad } from './math';\n\nexport interface LinearGradientNode {\n  type: 'linear-gradient';\n  orientation?: DirectionalNode | AngularNode | undefined;\n  colorStops: ColorStop[];\n}\n\nexport interface RepeatingLinearGradientNode {\n  type: 'repeating-linear-gradient';\n  orientation?: DirectionalNode | AngularNode | undefined;\n  colorStops: ColorStop[];\n}\n\nexport interface RadialGradientNode {\n  type: 'radial-gradient';\n  orientation?:\n    | (ShapeNode | DefaultRadialNode | ExtentKeywordNode)[]\n    | undefined;\n  colorStops: ColorStop[];\n}\n\nexport interface RepeatingRadialGradientNode {\n  type: 'repeating-radial-gradient';\n  orientation?:\n    | (ShapeNode | DefaultRadialNode | ExtentKeywordNode)[]\n    | undefined;\n  colorStops: ColorStop[];\n}\n\nexport interface DirectionalNode {\n  type: 'directional';\n  value:\n    | 'left'\n    | 'top'\n    | 'bottom'\n    | 'right'\n    | 'left top'\n    | 'top left'\n    | 'left bottom'\n    | 'bottom left'\n    | 'right top'\n    | 'top right'\n    | 'right bottom'\n    | 'bottom right';\n}\n\nexport interface AngularNode {\n  type: 'angular';\n  value: string;\n}\n\nexport interface LiteralNode {\n  type: 'literal';\n  value: string;\n  length?: PxNode | EmNode | PercentNode | undefined;\n}\n\nexport interface HexNode {\n  type: 'hex';\n  value: string;\n  length?: PxNode | EmNode | PercentNode | undefined;\n}\n\nexport interface RgbNode {\n  type: 'rgb';\n  value: [string, string, string];\n  length?: PxNode | EmNode | PercentNode | undefined;\n}\n\nexport interface RgbaNode {\n  type: 'rgba';\n  value: [string, string, string, string?];\n  length?: PxNode | EmNode | PercentNode | undefined;\n}\n\nexport interface ShapeNode {\n  type: 'shape';\n  style?:\n    | ExtentKeywordNode\n    | PxNode\n    | EmNode\n    | PercentNode\n    | PositionKeywordNode\n    | undefined;\n  value: 'ellipse' | 'circle';\n  at?: PositionNode | undefined;\n}\n\nexport interface DefaultRadialNode {\n  type: 'default-radial';\n  at: PositionNode;\n}\n\nexport interface PositionKeywordNode {\n  type: 'position-keyword';\n  value: 'center' | 'left' | 'top' | 'bottom' | 'right';\n}\n\nexport interface PositionNode {\n  type: 'position';\n  value: {\n    x: ExtentKeywordNode | PxNode | EmNode | PercentNode | PositionKeywordNode;\n    y: ExtentKeywordNode | PxNode | EmNode | PercentNode | PositionKeywordNode;\n  };\n}\n\nexport interface ExtentKeywordNode {\n  type: 'extent-keyword';\n  value:\n    | 'closest-side'\n    | 'closest-corner'\n    | 'farthest-side'\n    | 'farthest-corner'\n    | 'contain'\n    | 'cover';\n  at?: PositionNode | undefined;\n}\n\nexport interface PxNode {\n  type: 'px';\n  value: string;\n}\n\nexport interface EmNode {\n  type: 'em';\n  value: string;\n}\n\nexport interface PercentNode {\n  type: '%';\n  value: string;\n}\n\nexport type ColorStop = LiteralNode | HexNode | RgbNode | RgbaNode;\n\nexport type GradientNode =\n  | LinearGradientNode\n  | RepeatingLinearGradientNode\n  | RadialGradientNode\n  | RepeatingRadialGradientNode;\n\nexport function colorStopToString(colorStop: ColorStop) {\n  const { type, value } = colorStop;\n  if (type === 'hex') {\n    return `#${value}`;\n  }\n  if (type === 'literal') {\n    return value;\n  }\n  if (type === 'rgb') {\n    return `rgb(${value.join(',')})`;\n  }\n  return `rgba(${value.join(',')})`;\n}\n\nexport const parseGradient = (function () {\n  const tokens = {\n    linearGradient: /^(linear\\-gradient)/i,\n    repeatingLinearGradient: /^(repeating\\-linear\\-gradient)/i,\n    radialGradient: /^(radial\\-gradient)/i,\n    repeatingRadialGradient: /^(repeating\\-radial\\-gradient)/i,\n    /**\n     * @see https://projects.verou.me/conic-gradient/\n     */\n    conicGradient: /^(conic\\-gradient)/i,\n    sideOrCorner:\n      /^to (left (top|bottom)|right (top|bottom)|top (left|right)|bottom (left|right)|left|right|top|bottom)/i,\n    extentKeywords:\n      /^(closest\\-side|closest\\-corner|farthest\\-side|farthest\\-corner|contain|cover)/,\n    positionKeywords: /^(left|center|right|top|bottom)/i,\n    pixelValue: /^(-?(([0-9]*\\.[0-9]+)|([0-9]+\\.?)))px/,\n    percentageValue: /^(-?(([0-9]*\\.[0-9]+)|([0-9]+\\.?)))\\%/,\n    emValue: /^(-?(([0-9]*\\.[0-9]+)|([0-9]+\\.?)))em/,\n    angleValue: /^(-?(([0-9]*\\.[0-9]+)|([0-9]+\\.?)))deg/,\n    startCall: /^\\(/,\n    endCall: /^\\)/,\n    comma: /^,/,\n    hexColor: /^\\#([0-9a-fA-F]+)/,\n    literalColor: /^([a-zA-Z]+)/,\n    rgbColor: /^rgb/i,\n    rgbaColor: /^rgba/i,\n    number: /^(([0-9]*\\.[0-9]+)|([0-9]+\\.?))/,\n  };\n\n  let input = '';\n\n  function error(msg: string) {\n    throw new Error(`${input}: ${msg}`);\n  }\n\n  function getAST() {\n    const ast = matchListDefinitions();\n\n    if (input.length > 0) {\n      error('Invalid input not EOF');\n    }\n\n    return ast;\n  }\n\n  function matchListDefinitions() {\n    return matchListing(matchDefinition);\n  }\n\n  function matchDefinition() {\n    return (\n      matchGradient(\n        'linear-gradient',\n        tokens.linearGradient,\n        matchLinearOrientation,\n      ) ||\n      matchGradient(\n        'repeating-linear-gradient',\n        tokens.repeatingLinearGradient,\n        matchLinearOrientation,\n      ) ||\n      matchGradient(\n        'radial-gradient',\n        tokens.radialGradient,\n        matchListRadialOrientations,\n      ) ||\n      matchGradient(\n        'repeating-radial-gradient',\n        tokens.repeatingRadialGradient,\n        matchListRadialOrientations,\n      ) ||\n      matchGradient(\n        'conic-gradient',\n        tokens.conicGradient,\n        matchListRadialOrientations,\n      )\n    );\n  }\n\n  function matchGradient(\n    gradientType: string,\n    pattern: RegExp,\n    orientationMatcher,\n  ) {\n    return matchCall(pattern, function (captures) {\n      const orientation = orientationMatcher();\n      if (orientation) {\n        if (!scan(tokens.comma)) {\n          error('Missing comma before color stops');\n        }\n      }\n\n      return {\n        type: gradientType,\n        orientation,\n        colorStops: matchListing(matchColorStop),\n      };\n    });\n  }\n\n  function matchCall(pattern, callback) {\n    const captures = scan(pattern);\n\n    if (captures) {\n      if (!scan(tokens.startCall)) {\n        error('Missing (');\n      }\n\n      const result = callback(captures);\n\n      if (!scan(tokens.endCall)) {\n        error('Missing )');\n      }\n\n      return result;\n    }\n  }\n\n  function matchLinearOrientation() {\n    return matchSideOrCorner() || matchAngle();\n  }\n\n  function matchSideOrCorner() {\n    return match('directional', tokens.sideOrCorner, 1);\n  }\n\n  function matchAngle() {\n    return match('angular', tokens.angleValue, 1);\n  }\n\n  function matchListRadialOrientations() {\n    let radialOrientations;\n    let radialOrientation = matchRadialOrientation();\n    let lookaheadCache;\n\n    if (radialOrientation) {\n      radialOrientations = [];\n      radialOrientations.push(radialOrientation);\n\n      lookaheadCache = input;\n      if (scan(tokens.comma)) {\n        radialOrientation = matchRadialOrientation();\n        if (radialOrientation) {\n          radialOrientations.push(radialOrientation);\n        } else {\n          input = lookaheadCache;\n        }\n      }\n    }\n\n    return radialOrientations;\n  }\n\n  function matchRadialOrientation() {\n    let radialType = matchCircle() || matchEllipse();\n\n    if (radialType) {\n      // @ts-ignore\n      radialType.at = matchAtPosition();\n    } else {\n      const extent = matchExtentKeyword();\n      if (extent) {\n        radialType = extent;\n        const positionAt = matchAtPosition();\n        if (positionAt) {\n          // @ts-ignore\n          radialType.at = positionAt;\n        }\n      } else {\n        const defaultPosition = matchPositioning();\n        if (defaultPosition) {\n          radialType = {\n            type: 'default-radial',\n            // @ts-ignore\n            at: defaultPosition,\n          };\n        }\n      }\n    }\n\n    return radialType;\n  }\n\n  function matchCircle() {\n    const circle = match('shape', /^(circle)/i, 0);\n\n    if (circle) {\n      // @ts-ignore\n      circle.style = matchLength() || matchExtentKeyword();\n    }\n\n    return circle;\n  }\n\n  function matchEllipse() {\n    const ellipse = match('shape', /^(ellipse)/i, 0);\n\n    if (ellipse) {\n      // @ts-ignore\n      ellipse.style = matchDistance() || matchExtentKeyword();\n    }\n\n    return ellipse;\n  }\n\n  function matchExtentKeyword() {\n    return match('extent-keyword', tokens.extentKeywords, 1);\n  }\n\n  function matchAtPosition() {\n    if (match('position', /^at/, 0)) {\n      const positioning = matchPositioning();\n\n      if (!positioning) {\n        error('Missing positioning value');\n      }\n\n      return positioning;\n    }\n  }\n\n  function matchPositioning() {\n    const location = matchCoordinates();\n\n    if (location.x || location.y) {\n      return {\n        type: 'position',\n        value: location,\n      };\n    }\n  }\n\n  function matchCoordinates() {\n    return {\n      x: matchDistance(),\n      y: matchDistance(),\n    };\n  }\n\n  function matchListing(matcher: () => any) {\n    let captures = matcher();\n    const result = [];\n\n    if (captures) {\n      result.push(captures);\n      while (scan(tokens.comma)) {\n        captures = matcher();\n        if (captures) {\n          result.push(captures);\n        } else {\n          error('One extra comma');\n        }\n      }\n    }\n\n    return result;\n  }\n\n  function matchColorStop() {\n    const color = matchColor();\n\n    if (!color) {\n      error('Expected color definition');\n    }\n\n    color.length = matchDistance();\n    return color;\n  }\n\n  function matchColor() {\n    return (\n      matchHexColor() ||\n      matchRGBAColor() ||\n      matchRGBColor() ||\n      matchLiteralColor()\n    );\n  }\n\n  function matchLiteralColor() {\n    return match('literal', tokens.literalColor, 0);\n  }\n\n  function matchHexColor() {\n    return match('hex', tokens.hexColor, 1);\n  }\n\n  function matchRGBColor() {\n    return matchCall(tokens.rgbColor, function () {\n      return {\n        type: 'rgb',\n        value: matchListing(matchNumber),\n      };\n    });\n  }\n\n  function matchRGBAColor() {\n    return matchCall(tokens.rgbaColor, function () {\n      return {\n        type: 'rgba',\n        value: matchListing(matchNumber),\n      };\n    });\n  }\n\n  function matchNumber() {\n    return scan(tokens.number)[1];\n  }\n\n  function matchDistance() {\n    return (\n      match('%', tokens.percentageValue, 1) ||\n      matchPositionKeyword() ||\n      matchLength()\n    );\n  }\n\n  function matchPositionKeyword() {\n    return match('position-keyword', tokens.positionKeywords, 1);\n  }\n\n  function matchLength() {\n    return match('px', tokens.pixelValue, 1) || match('em', tokens.emValue, 1);\n  }\n\n  function match(type: string, pattern, captureIndex: number) {\n    const captures = scan(pattern);\n    if (captures) {\n      return {\n        type,\n        value: captures[captureIndex],\n      };\n    }\n  }\n\n  function scan(regexp) {\n    const blankCaptures = /^[\\n\\r\\t\\s]+/.exec(input);\n    if (blankCaptures) {\n      consume(blankCaptures[0].length);\n    }\n\n    const captures = regexp.exec(input);\n    if (captures) {\n      consume(captures[0].length);\n    }\n\n    return captures;\n  }\n\n  function consume(size: number) {\n    input = input.substring(size);\n  }\n\n  return function (code: string): GradientNode[] {\n    input = code;\n    return getAST();\n  };\n})();\n\nexport function computeLinearGradient(\n  min: [number, number],\n  width: number,\n  height: number,\n  angle: CSSUnitValue,\n) {\n  const rad = deg2rad(angle.value);\n  const rx = 0;\n  const ry = 0;\n  const rcx = rx + width / 2;\n  const rcy = ry + height / 2;\n  // get the length of gradient line\n  // @see https://observablehq.com/@danburzo/css-gradient-line\n  const length =\n    Math.abs(width * Math.cos(rad)) + Math.abs(height * Math.sin(rad));\n  const x1 = min[0] + rcx - (Math.cos(rad) * length) / 2;\n  const y1 = min[1] + rcy - (Math.sin(rad) * length) / 2;\n  const x2 = min[0] + rcx + (Math.cos(rad) * length) / 2;\n  const y2 = min[1] + rcy + (Math.sin(rad) * length) / 2;\n\n  return { x1, y1, x2, y2 };\n}\n\nexport function computeRadialGradient(\n  min: [number, number],\n  width: number,\n  height: number,\n  cx: CSSUnitValue,\n  cy: CSSUnitValue,\n  size?: CSSUnitValue | CSSKeywordValue,\n) {\n  // 'px'\n  let x = cx.value;\n  let y = cy.value;\n\n  // TODO: 'em'\n\n  // '%'\n  if (cx.unit === UnitType.kPercentage) {\n    x = (cx.value / 100) * width;\n  }\n  if (cy.unit === UnitType.kPercentage) {\n    y = (cy.value / 100) * height;\n  }\n\n  // default to farthest-side\n  let r = Math.max(\n    distanceSquareRoot([0, 0], [x, y]),\n    distanceSquareRoot([0, height], [x, y]),\n    distanceSquareRoot([width, height], [x, y]),\n    distanceSquareRoot([width, 0], [x, y]),\n  );\n  if (size) {\n    if (size instanceof CSSUnitValue) {\n      r = size.value;\n    } else if (size instanceof CSSKeywordValue) {\n      // @see https://developer.mozilla.org/zh-CN/docs/Web/CSS/CSS_Images/Using_CSS_gradients#example_closest-side_for_circles\n      if (size.value === 'closest-side') {\n        r = Math.min(x, width - x, y, height - y);\n      } else if (size.value === 'farthest-side') {\n        r = Math.max(x, width - x, y, height - y);\n      } else if (size.value === 'closest-corner') {\n        r = Math.min(\n          distanceSquareRoot([0, 0], [x, y]),\n          distanceSquareRoot([0, height], [x, y]),\n          distanceSquareRoot([width, height], [x, y]),\n          distanceSquareRoot([width, 0], [x, y]),\n        );\n      }\n    }\n  }\n\n  return { x: x + min[0], y: y + min[1], r };\n}\n", "import { isNil, isString } from '@antv/util';\nimport type {\n  AngularNode,\n  ColorStop,\n  DirectionalNode,\n  PositionNode,\n} from '../../utils';\nimport {\n  colorStopToString,\n  parseGradient as parse,\n} from '../../utils/gradient';\nimport { memoize } from '../../utils/memoize';\nimport { getOrCreateKeyword, getOrCreateUnitValue } from '../CSSStyleValuePool';\nimport type {\n  CSSKeywordValue,\n  CSSUnitValue,\n  LinearColorStop,\n  RadialGradient,\n} from '../cssom';\nimport { CSSGradientValue, GradientType, Odeg } from '../cssom';\nimport type { Pattern } from './color';\n\nconst regexLG = /^l\\s*\\(\\s*([\\d.]+)\\s*\\)\\s*(.*)/i;\nconst regexRG = /^r\\s*\\(\\s*([\\d.]+)\\s*,\\s*([\\d.]+)\\s*,\\s*([\\d.]+)\\s*\\)\\s*(.*)/i;\nconst regexPR = /^p\\s*\\(\\s*([axyn])\\s*\\)\\s*(.*)/i;\nconst regexColorStop = /[\\d.]+:(#[^\\s]+|[^\\)]+\\))/gi;\n\nfunction spaceColorStops(colorStops: ColorStop[]) {\n  const { length } = colorStops;\n  colorStops[length - 1].length = colorStops[length - 1].length ?? {\n    type: '%',\n    value: '100',\n  };\n  if (length > 1) {\n    colorStops[0].length = colorStops[0].length ?? {\n      type: '%',\n      value: '0',\n    };\n  }\n\n  let previousIndex = 0;\n  let previousOffset = Number(colorStops[0].length.value);\n  for (let i = 1; i < length; i++) {\n    // support '%' & 'px'\n    const offset = colorStops[i].length?.value;\n    if (!isNil(offset) && !isNil(previousOffset)) {\n      for (let j = 1; j < i - previousIndex; j++)\n        colorStops[previousIndex + j].length = {\n          type: '%',\n          value: `${\n            previousOffset +\n            ((Number(offset) - previousOffset) * j) / (i - previousIndex)\n          }`,\n        };\n      previousIndex = i;\n      previousOffset = Number(offset);\n    }\n  }\n}\n\n// The position of the gradient line's starting point.\n// different from CSS side(to top) @see https://developer.mozilla.org/en-US/docs/Web/CSS/gradient/linear-gradient#values\nconst SideOrCornerToDegMap: Record<DirectionalNode['value'], number> = {\n  left: 270 - 90,\n  top: 0 - 90,\n  bottom: 180 - 90,\n  right: 90 - 90,\n  'left top': 315 - 90,\n  'top left': 315 - 90,\n  'left bottom': 225 - 90,\n  'bottom left': 225 - 90,\n  'right top': 45 - 90,\n  'top right': 45 - 90,\n  'right bottom': 135 - 90,\n  'bottom right': 135 - 90,\n};\n\nconst angleToDeg: (orientation: DirectionalNode | AngularNode) => CSSUnitValue =\n  memoize((orientation: DirectionalNode | AngularNode) => {\n    let angle: number;\n    if (orientation.type === 'angular') {\n      angle = Number(orientation.value);\n    } else {\n      angle = SideOrCornerToDegMap[orientation.value] || 0;\n    }\n    return getOrCreateUnitValue(angle, 'deg');\n  });\n\nconst positonToCSSUnitValue: (position: PositionNode) => {\n  cx: CSSUnitValue;\n  cy: CSSUnitValue;\n} = memoize((position: PositionNode) => {\n  let cx = 50;\n  let cy = 50;\n  let unitX = '%';\n  let unitY = '%';\n  if (position?.type === 'position') {\n    const { x, y } = position.value;\n    if (x?.type === 'position-keyword') {\n      if (x.value === 'left') {\n        cx = 0;\n      } else if (x.value === 'center') {\n        cx = 50;\n      } else if (x.value === 'right') {\n        cx = 100;\n      } else if (x.value === 'top') {\n        cy = 0;\n      } else if (x.value === 'bottom') {\n        cy = 100;\n      }\n    }\n\n    if (y?.type === 'position-keyword') {\n      if (y.value === 'left') {\n        cx = 0;\n      } else if (y.value === 'center') {\n        cy = 50;\n      } else if (y.value === 'right') {\n        cx = 100;\n      } else if (y.value === 'top') {\n        cy = 0;\n      } else if (y.value === 'bottom') {\n        cy = 100;\n      }\n    }\n\n    if (x?.type === 'px' || x?.type === '%' || x?.type === 'em') {\n      unitX = x?.type;\n      cx = Number(x.value);\n    }\n    if (y?.type === 'px' || y?.type === '%' || y?.type === 'em') {\n      unitY = y?.type;\n      cy = Number(y.value);\n    }\n  }\n\n  return {\n    cx: getOrCreateUnitValue(cx, unitX),\n    cy: getOrCreateUnitValue(cy, unitY),\n  };\n});\n\nexport const parseGradient = memoize((colorStr: string) => {\n  if (colorStr.indexOf('linear') > -1 || colorStr.indexOf('radial') > -1) {\n    const ast = parse(colorStr);\n    return ast.map(({ type, orientation, colorStops }) => {\n      spaceColorStops(colorStops);\n      const steps = colorStops.map<LinearColorStop>((colorStop) => {\n        // TODO: only support % for now, should calc percentage of axis length when using px/em\n        return {\n          offset: getOrCreateUnitValue(Number(colorStop.length.value), '%'),\n          color: colorStopToString(colorStop),\n        };\n      });\n      if (type === 'linear-gradient') {\n        return new CSSGradientValue(GradientType.LinearGradient, {\n          angle: orientation\n            ? angleToDeg(orientation as DirectionalNode | AngularNode)\n            : Odeg,\n          steps,\n        });\n      }\n      if (type === 'radial-gradient') {\n        if (!orientation) {\n          orientation = [\n            {\n              type: 'shape',\n              value: 'circle',\n            },\n          ];\n        }\n        if (\n          orientation[0].type === 'shape' &&\n          orientation[0].value === 'circle'\n        ) {\n          const { cx, cy } = positonToCSSUnitValue(orientation[0].at);\n          let size: CSSUnitValue | CSSKeywordValue;\n          if (orientation[0].style) {\n            const { type, value } = orientation[0].style;\n\n            if (type === 'extent-keyword') {\n              size = getOrCreateKeyword(value);\n            } else {\n              size = getOrCreateUnitValue(value, type);\n            }\n          }\n          return new CSSGradientValue(GradientType.RadialGradient, {\n            cx,\n            cy,\n            size,\n            steps,\n          });\n        }\n        // TODO: support ellipse shape\n        // TODO: repeating-linear-gradient & repeating-radial-gradient\n        // } else if (type === 'repeating-linear-gradient') {\n        // } else if (type === 'repeating-radial-gradient') {\n      }\n\n      return undefined;\n    });\n  }\n\n  // legacy format, should be deprecated later\n  const type = colorStr[0];\n  if (colorStr[1] === '(' || colorStr[2] === '(') {\n    if (type === 'l') {\n      const arr = regexLG.exec(colorStr);\n      if (arr) {\n        const steps =\n          arr[2].match(regexColorStop)?.map((stop) => stop.split(':')) || [];\n        return [\n          new CSSGradientValue(GradientType.LinearGradient, {\n            angle: getOrCreateUnitValue(parseFloat(arr[1]), 'deg'),\n            steps: steps.map(([offset, color]) => ({\n              offset: getOrCreateUnitValue(Number(offset) * 100, '%'),\n              color,\n            })),\n          }),\n        ];\n      }\n    } else if (type === 'r') {\n      const parsedRadialGradient = parseRadialGradient(colorStr);\n      if (parsedRadialGradient) {\n        if (isString(parsedRadialGradient)) {\n          colorStr = parsedRadialGradient;\n        } else {\n          return [\n            new CSSGradientValue(\n              GradientType.RadialGradient,\n              parsedRadialGradient,\n            ),\n          ];\n        }\n      }\n    } else if (type === 'p') {\n      return parsePattern(colorStr);\n    }\n  }\n});\n\nfunction parseRadialGradient(\n  gradientStr: string,\n): RadialGradient | string | null {\n  const arr = regexRG.exec(gradientStr);\n  if (arr) {\n    const steps =\n      arr[4].match(regexColorStop)?.map((stop) => stop.split(':')) || [];\n    return {\n      cx: getOrCreateUnitValue(50, '%'),\n      cy: getOrCreateUnitValue(50, '%'),\n      steps: steps.map(([offset, color]) => ({\n        offset: getOrCreateUnitValue(Number(offset) * 100, '%'),\n        color,\n      })),\n    };\n  }\n  return null;\n}\n\nfunction parsePattern(patternStr: string): Pattern | null {\n  const arr = regexPR.exec(patternStr);\n  if (arr) {\n    let repetition = arr[1];\n    const src = arr[2];\n    switch (repetition) {\n      case 'a':\n        repetition = 'repeat';\n        break;\n      case 'x':\n        repetition = 'repeat-x';\n        break;\n      case 'y':\n        repetition = 'repeat-y';\n        break;\n      case 'n':\n        repetition = 'no-repeat';\n        break;\n      default:\n        repetition = 'no-repeat';\n    }\n    return {\n      image: src,\n      // @ts-ignore\n      repetition,\n    };\n  }\n  return null;\n}\n", "import { clamp, isNil } from '@antv/util';\nimport * as d3 from '@antv/vendor/d3-color';\nimport { Rect } from '../..';\nimport { memoize } from '../../utils/memoize';\nimport type { Tuple4Number } from '../../types';\nimport type { CSSGradientValue } from '../cssom';\nimport { CSSRGB } from '../cssom';\nimport {\n  getOrCreateRGBA,\n  noneColor,\n  transparentColor,\n} from '../CSSStyleValuePool';\nimport { parseGradient } from './gradient';\n\n/**\n * @see https://developer.mozilla.org/zh-CN/docs/Web/API/CanvasRenderingContext2D/createPattern\n */\nexport interface Pattern {\n  image: string | CanvasImageSource | Rect;\n  repetition?: 'repeat' | 'repeat-x' | 'repeat-y' | 'no-repeat';\n  transform?: string;\n}\n\nexport function isCSSGradientValue(object: any): object is CSSGradientValue {\n  return (\n    !!(object as CSSGradientValue).type && !!(object as CSSGradientValue).value\n  );\n}\n\nexport function isPattern(object: any): object is Pattern {\n  return object && !!(object as Pattern).image;\n}\n\nexport function isCSSRGB(object: any): object is CSSRGB {\n  return (\n    object &&\n    !isNil((object as CSSRGB).r) &&\n    !isNil((object as CSSRGB).g) &&\n    !isNil((object as CSSRGB).b)\n  );\n}\n\n/**\n * @see https://github.com/WebKit/WebKit/blob/main/Source/WebCore/css/parser/CSSParser.cpp#L97\n */\nexport const parseColor = memoize(\n  (colorStr: string | Pattern): CSSRGB | CSSGradientValue[] | Pattern => {\n    if (isPattern(colorStr)) {\n      return {\n        repetition: 'repeat',\n        ...colorStr,\n      };\n    }\n\n    if (isNil(colorStr)) {\n      colorStr = '';\n    }\n\n    if (colorStr === 'transparent') {\n      // transparent black\n      return transparentColor;\n    }\n    if (colorStr === 'currentColor') {\n      // @see https://github.com/adobe-webplatform/Snap.svg/issues/526\n      colorStr = 'black';\n    } else if (colorStr === 'none') {\n      return noneColor;\n    }\n\n    // support CSS gradient syntax\n    const g = parseGradient(colorStr);\n    if (g) {\n      return g;\n    }\n\n    // constants\n    const color = d3.color(colorStr) as d3.RGBColor;\n    const rgba: Tuple4Number = [0, 0, 0, 0];\n    if (color !== null) {\n      rgba[0] = color.r || 0;\n      rgba[1] = color.g || 0;\n      rgba[2] = color.b || 0;\n      rgba[3] = color.opacity;\n    }\n\n    // return new CSSRGB(...rgba);\n    return getOrCreateRGBA(...rgba);\n  },\n);\n\nexport function mergeColors(\n  left: CSSRGB | CSSGradientValue[] | Pattern,\n  right: CSSRGB | CSSGradientValue[] | Pattern,\n): [number[], number[], (color: number[]) => string] | undefined {\n  // only support constant value, exclude gradient & pattern\n  if (!isCSSRGB(left) || !isCSSRGB(right)) {\n    return;\n  }\n\n  return [\n    [Number(left.r), Number(left.g), Number(left.b), Number(left.alpha)],\n    [Number(right.r), Number(right.g), Number(right.b), Number(right.alpha)],\n    (color: number[]) => {\n      const rgba = color.slice();\n      if (rgba[3]) {\n        for (let i = 0; i < 3; i++)\n          rgba[i] = Math.round(clamp(rgba[i], 0, 255));\n      }\n      rgba[3] = clamp(rgba[3], 0, 1);\n      return `rgba(${rgba.join(',')})`;\n    },\n  ];\n}\n", "import { isNil, isNumber, isString } from '@antv/util';\nimport type { DisplayObject } from '../../display-objects';\nimport type { IElement } from '../../dom';\nimport { Shape } from '../../types';\nimport { rad2deg, turn2deg } from '../../utils/math';\nimport { memoize } from '../../utils/memoize';\nimport { getOrCreateUnitValue } from '../CSSStyleValuePool';\nimport type { CSSStyleValue } from '../cssom';\nimport {\n  CSSUnitValue,\n  UnitType,\n  toCanonicalUnit,\n  unitTypeToString,\n} from '../cssom';\n\ntype LengthUnit = 'px' | '%' | 'em' | 'rem';\ntype AngleUnit = 'deg' | 'rad' | 'turn';\ntype Unit = LengthUnit | AngleUnit | '';\n\nexport function parseDimension(\n  unitRegExp: RegExp,\n  string: string,\n): CSSStyleValue | undefined {\n  if (isNil(string)) {\n    return getOrCreateUnitValue(0, 'px');\n  }\n\n  string = `${string}`.trim().toLowerCase();\n\n  if (isFinite(Number(string))) {\n    if ('px'.search(unitRegExp) >= 0) {\n      return getOrCreateUnitValue(Number(string), 'px');\n    }\n    if ('deg'.search(unitRegExp) >= 0) {\n      return getOrCreateUnitValue(Number(string), 'deg');\n    }\n  }\n\n  const matchedUnits: Unit[] = [];\n  string = string.replace(unitRegExp, (match: string) => {\n    matchedUnits.push(match as Unit);\n    return `U${match}`;\n  });\n  const taggedUnitRegExp = `U(${unitRegExp.source})`;\n\n  return matchedUnits.map((unit) =>\n    getOrCreateUnitValue(\n      Number(\n        string\n          .replace(new RegExp(`U${unit}`, 'g'), '')\n          .replace(new RegExp(taggedUnitRegExp, 'g'), '*0'),\n      ),\n      unit,\n    ),\n  )[0];\n}\n\n/**\n * <length>\n * @see https://developer.mozilla.org/zh-CN/docs/Web/CSS/length\n * length with only absolute unit, eg. 1px\n */\nexport const parseLengthUnmemoize = (css: string) => {\n  return parseDimension(new RegExp('px', 'g'), css);\n};\nexport const parseLength = memoize(parseLengthUnmemoize);\n\n/**\n * <percentage>\n * @see https://developer.mozilla.org/zh-CN/docs/Web/CSS/percentage\n */\nexport const parserPercentageUnmemoize = (css: string) => {\n  return parseDimension(new RegExp('%', 'g'), css);\n};\nexport const parserPercentage = memoize(parserPercentageUnmemoize);\n\n/**\n * length with absolute or relative unit,\n * eg. 1px, 0.7em, 50%, calc(100% - 200px);\n *\n * @see https://developer.mozilla.org/zh-CN/docs/Web/CSS/length-percentage\n */\nexport const parseLengthOrPercentageUnmemoize = (css: string): CSSUnitValue => {\n  if (isNumber(css) || isFinite(Number(css))) {\n    // Number(css) is NaN\n    return getOrCreateUnitValue(Number(css) || 0, 'px');\n    // return Number(css);\n  }\n  return parseDimension(new RegExp('px|%|em|rem', 'g'), css) as CSSUnitValue;\n};\nexport const parseLengthOrPercentage = memoize(\n  parseLengthOrPercentageUnmemoize,\n);\n\nexport const parseAngleUnmemoize = (css: string): CSSUnitValue => {\n  return parseDimension(\n    new RegExp('deg|rad|grad|turn', 'g'),\n    css,\n  ) as CSSUnitValue;\n};\nexport const parseAngle = memoize(parseAngleUnmemoize);\n\n/**\n * merge CSSUnitValue\n *\n * @example\n * 10px + 20px = 30px\n * 10deg + 10rad\n * 10% + 20% = 30%\n */\nexport function mergeDimensions(\n  left: CSSUnitValue,\n  right: CSSUnitValue,\n  target: IElement,\n  nonNegative?: boolean,\n  index = 0,\n): [number, number, (value: number) => string] {\n  let unit = '';\n  let leftValue = left.value || 0;\n  let rightValue = right.value || 0;\n\n  const canonicalUnit = toCanonicalUnit(left.unit);\n  const leftCanonicalUnitValue = left.convertTo(canonicalUnit);\n  const rightCanonicalUnitValue = right.convertTo(canonicalUnit);\n\n  if (leftCanonicalUnitValue && rightCanonicalUnitValue) {\n    leftValue = leftCanonicalUnitValue.value;\n    rightValue = rightCanonicalUnitValue.value;\n    unit = unitTypeToString(left.unit);\n  }\n  // format '%' to 'px'\n  else if (\n    CSSUnitValue.isLength(left.unit) ||\n    CSSUnitValue.isLength(right.unit)\n  ) {\n    leftValue = convertPercentUnit(left, index, target as DisplayObject);\n    rightValue = convertPercentUnit(right, index, target as DisplayObject);\n    unit = 'px';\n  }\n\n  return [\n    leftValue,\n    rightValue,\n    (value: number) => {\n      if (nonNegative) {\n        value = Math.max(value, 0);\n      }\n      return value + unit;\n    },\n  ];\n}\n\nexport function convertAngleUnit(value: CSSUnitValue) {\n  let deg = 0;\n  if (value.unit === UnitType.kDegrees) {\n    deg = value.value;\n  } else if (value.unit === UnitType.kRadians) {\n    deg = rad2deg(Number(value.value));\n  } else if (value.unit === UnitType.kTurns) {\n    deg = turn2deg(Number(value.value));\n  } else if (value.value) {\n    deg = value.value;\n  }\n  return deg;\n}\n\nexport function parseDimensionArrayFormat(\n  string: string | number | (string | number)[],\n  size?: 2 | 4 | 'even',\n): number[] {\n  let parsed: number[];\n\n  if (Array.isArray(string)) {\n    // [1, '2px', 3]\n    parsed = string.map((segment) => Number(segment));\n  } else if (isString(string)) {\n    parsed = string.split(' ').map((segment) => Number(segment));\n  } else if (isNumber(string)) {\n    parsed = [string];\n  }\n\n  if (size === 2) {\n    if (parsed.length === 1) {\n      return [parsed[0], parsed[0]];\n    }\n    return [parsed[0], parsed[1]];\n  }\n  if (size === 4) {\n    if (parsed.length === 1) {\n      return [parsed[0], parsed[0], parsed[0], parsed[0]];\n    }\n    if (parsed.length === 2) {\n      return [parsed[0], parsed[1], parsed[0], parsed[1]];\n    }\n    if (parsed.length === 3) {\n      return [parsed[0], parsed[1], parsed[2], parsed[1]];\n    }\n    return [parsed[0], parsed[1], parsed[2], parsed[3]];\n  }\n  if (size === 'even' && parsed.length % 2 === 1) {\n    return [...parsed, ...parsed];\n  }\n  return parsed;\n}\n\nexport function parseDimensionArray(\n  string: string | (string | number)[],\n): CSSUnitValue[] {\n  if (isString(string)) {\n    // \"1px 2px 3px\"\n    return string.split(' ').map((segment) => parseLengthOrPercentage(segment));\n  }\n  // [1, '2px', 3]\n  return string.map((segment) => parseLengthOrPercentage(segment.toString()));\n}\nexport function parseDimensionArrayUnmemoize(\n  string: string | (string | number)[],\n): CSSUnitValue[] {\n  if (isString(string)) {\n    // \"1px 2px 3px\"\n    return string\n      .split(' ')\n      .map((segment) => parseLengthOrPercentageUnmemoize(segment));\n  }\n  // [1, '2px', 3]\n  return string.map((segment) =>\n    parseLengthOrPercentageUnmemoize(segment.toString()),\n  );\n}\n\n// export function mergeDimensionList(\n//   left: CSSUnitValue[],\n//   right: CSSUnitValue[],\n//   target: IElement | null,\n// ): [number[], number[], (list: number[]) => string] | undefined {\n//   if (left.length !== right.length) {\n//     return;\n//   }\n\n//   const unit = left[0].unit;\n\n//   return [\n//     left.map((l) => l.value),\n//     right.map((l) => l.value),\n//     (values: number[]) => {\n//       return values.map((n) => new CSSUnitValue(n, unit)).join(' ');\n//     },\n//   ];\n// }\n\nexport function convertPercentUnit(\n  valueWithUnit: CSSUnitValue,\n  vec3Index: number,\n  target: DisplayObject,\n  useMin = false,\n): number {\n  if (valueWithUnit.unit === UnitType.kPixels) {\n    return Number(valueWithUnit.value);\n  }\n  if (valueWithUnit.unit === UnitType.kPercentage && target) {\n    const bounds =\n      target.nodeName === Shape.GROUP\n        ? target.getLocalBounds()\n        : target.getGeometryBounds();\n    return (\n      (useMin ? bounds.min[vec3Index] : 0) +\n      (valueWithUnit.value / 100) * bounds.halfExtents[vec3Index] * 2\n    );\n  }\n  return 0;\n}\n", "import type { CSSUnitValue } from '../cssom';\nimport { parseColor } from './color';\nimport { parseDimension } from './dimension';\n\nexport interface ParsedFilterStyleProperty {\n  name: string;\n  params: CSSUnitValue[];\n}\n\nexport const parseParam = (css: string) =>\n  parseDimension(/deg|rad|grad|turn|px|%/g, css);\n\nconst supportedFilters = [\n  'blur',\n  'brightness',\n  'drop-shadow',\n  'contrast',\n  'grayscale',\n  'sepia',\n  'saturate',\n  'hue-rotate',\n  'invert',\n];\n\nexport function parseFilter(filterStr = ''): ParsedFilterStyleProperty[] {\n  filterStr = filterStr.toLowerCase().trim();\n  if (filterStr === 'none') {\n    return [];\n  }\n  const filterRegExp = /\\s*([\\w-]+)\\(([^)]*)\\)/g;\n  const result: ParsedFilterStyleProperty[] = [];\n  let match;\n  let prevLastIndex = 0;\n  while ((match = filterRegExp.exec(filterStr))) {\n    if (match.index !== prevLastIndex) {\n      return [];\n    }\n    prevLastIndex = match.index + match[0].length;\n\n    if (supportedFilters.indexOf(match[1]) > -1) {\n      result.push({\n        name: match[1],\n        params: match[2].split(' ').map((p) => parseParam(p) || parseColor(p)),\n      });\n    }\n\n    if (filterRegExp.lastIndex === filterStr.length) {\n      return result;\n    }\n  }\n\n  return [];\n}\n", "import { clamp, isString } from '@antv/util';\nimport { memoize } from '../../utils/memoize';\nimport type { CSSUnitValue } from '../cssom';\nimport { getOrCreateUnitValue } from '../CSSStyleValuePool';\n\nexport function numberToString(x: number) {\n  // scale(0.00000001) -> scale(0)\n  // return x.toFixed(6).replace(/0+$/, '').replace(/\\.$/, '');\n  return x.toString();\n}\n\n/**\n * parse string or number to CSSUnitValue(numeric)\n *\n * eg.\n * * 0 -> CSSUnitValue(0)\n * * '2' -> CSSUnitValue(2)\n */\nexport const parseNumberUnmemoize = (string: string | number): CSSUnitValue => {\n  if (typeof string === 'number') {\n    return getOrCreateUnitValue(string);\n  }\n  if (/^\\s*[-+]?(\\d*\\.)?\\d+\\s*$/.test(string)) {\n    return getOrCreateUnitValue(Number(string));\n  }\n  return getOrCreateUnitValue(0);\n};\nexport const parseNumber = memoize(parseNumberUnmemoize);\n\n/**\n * separate string to array\n * eg.\n * * [0.5, 0.5] -> [CSSUnitValue, CSSUnitValue]\n */\nexport const parseNumberListUnmemoize = (\n  string: string | number[],\n): CSSUnitValue[] => {\n  if (isString(string)) {\n    return string.split(' ').map(parseNumberUnmemoize);\n  }\n  return string.map(parseNumberUnmemoize);\n};\nexport const parseNumberList = memoize(\n  (string: string | number[]): CSSUnitValue[] => {\n    if (isString(string)) {\n      return string.split(' ').map(parseNumber);\n    }\n    return string.map(parseNumber);\n  },\n);\n\nexport function mergeNumbers(\n  left: number,\n  right: number,\n): [number, number, (n: number) => string] {\n  return [left, right, numberToString];\n}\n\nexport function clampedMergeNumbers(min: number, max: number) {\n  return (\n    left: number,\n    right: number,\n  ): [number, number, (i: number) => string] => [\n    left,\n    right,\n    (x: number) => numberToString(clamp(x, min, max)),\n  ];\n}\n\nexport function mergeNumberLists(\n  left: number[],\n  right: number[],\n): [number[], number[], (numberList: number[]) => number[]] | undefined {\n  if (left.length !== right.length) {\n    return;\n  }\n  return [\n    left,\n    right,\n    (numberList: number[]) => {\n      return numberList;\n    },\n  ];\n}\n", "/**\n * implements morph animation with cubic splitting\n * @see http://thednp.github.io/kute.js/svgCubicMorph.html\n */\nimport { arcBox, cubicBox, polylineLength, quadBox } from '@antv/g-math';\nimport type { AbsoluteArray, ASegment } from '@antv/util';\nimport {\n  clamp,\n  getTotalLength,\n  isNumberEqual,\n  max,\n  min,\n  mod,\n} from '@antv/util';\nimport { mat4, vec3 } from 'gl-matrix';\nimport type {\n  Circle,\n  Ellipse,\n  Line,\n  Path,\n  PathArcParams,\n  PathSegment,\n  PathSegmentBBox,\n  Polygon,\n  Polyline,\n  Rect,\n} from '../display-objects';\nimport type { PointLike } from '../shapes';\nimport { Shape } from '../types';\nimport { deg2rad } from './math';\n\nexport function getOrCalculatePathTotalLength(path: Path) {\n  if (path.parsedStyle.d.totalLength === 0) {\n    path.parsedStyle.d.totalLength = getTotalLength(\n      path.parsedStyle.d.absolutePath,\n    );\n  }\n  return path.parsedStyle.d.totalLength;\n}\n\nexport function getOrCalculatePolylineTotalLength(polyline: Polyline) {\n  if (polyline.parsedStyle.points.totalLength === 0) {\n    polyline.parsedStyle.points.totalLength = polylineLength(\n      polyline.parsedStyle.points.points as [number, number][],\n    );\n  }\n  return polyline.parsedStyle.points.totalLength;\n}\n\nexport function removeRedundantMCommand(path: AbsoluteArray) {\n  for (let i = 0; i < path.length; i++) {\n    const prevSegment = path[i - 1];\n    const segment = path[i];\n    const cmd = segment[0];\n    if (cmd === 'M') {\n      if (prevSegment) {\n        const prevCmd = prevSegment[0];\n        const srcPoint = [segment[1], segment[2]];\n        let destPoint: [number, number];\n\n        if (prevCmd === 'L' || prevCmd === 'M') {\n          destPoint = [prevSegment[1], prevSegment[2]];\n        } else if (prevCmd === 'C' || prevCmd === 'A' || prevCmd === 'Q') {\n          destPoint = [\n            prevSegment[prevSegment.length - 2] as number,\n            prevSegment[prevSegment.length - 1] as number,\n          ];\n        }\n\n        if (destPoint && isSamePoint(srcPoint, destPoint)) {\n          path.splice(i, 1);\n          i--;\n        }\n      }\n    }\n  }\n}\n\nexport function hasArcOrBezier(path: AbsoluteArray) {\n  let hasArc = false;\n  const count = path.length;\n  for (let i = 0; i < count; i++) {\n    const params = path[i];\n    const cmd = params[0];\n    if (cmd === 'C' || cmd === 'A' || cmd === 'Q') {\n      hasArc = true;\n      break;\n    }\n  }\n  return hasArc;\n}\n\nexport function extractPolygons(pathArray: AbsoluteArray) {\n  const polygons: [number, number][][] = [];\n  const polylines: [number, number][][] = [];\n  let points: [number, number][] = []; //  'M'\n  for (let i = 0; i < pathArray.length; i++) {\n    const params = pathArray[i];\n    const cmd = params[0];\n    if (cmd === 'M') {\n      //  'M' \n      if (points.length) {\n        //  'Z'\n        polylines.push(points);\n        points = []; // \n      }\n      points.push([params[1], params[2]]);\n    } else if (cmd === 'Z') {\n      if (points.length) {\n        // \n        polygons.push(points);\n        points = []; // \n      }\n      //  'Z'\n    } else {\n      points.push([params[1], params[2]]);\n    }\n  }\n  //  points  polygons  polyline\n  //  M Z \n  if (points.length > 0) {\n    polylines.push(points);\n  }\n  return {\n    polygons,\n    polylines,\n  };\n}\n\nfunction isSamePoint(point1, point2) {\n  return point1[0] === point2[0] && point1[1] === point2[1];\n}\n\nexport function getPathBBox(segments: any[], lineWidth: number) {\n  let xArr = [];\n  let yArr = [];\n  const segmentsWithAngle = [];\n  for (let i = 0; i < segments.length; i++) {\n    const segment = segments[i];\n    const { currentPoint, params, prePoint } = segment;\n    let box: PathSegmentBBox;\n    switch (segment.command) {\n      case 'Q':\n        box = quadBox(\n          prePoint[0],\n          prePoint[1],\n          params[1],\n          params[2],\n          params[3],\n          params[4],\n        );\n        break;\n      case 'C':\n        box = cubicBox(\n          prePoint[0],\n          prePoint[1],\n          params[1],\n          params[2],\n          params[3],\n          params[4],\n          params[5],\n          params[6],\n        );\n        break;\n      case 'A':\n        const { arcParams } = segment;\n        box = arcBox(\n          arcParams.cx,\n          arcParams.cy,\n          arcParams.rx,\n          arcParams.ry,\n          arcParams.xRotation,\n          arcParams.startAngle,\n          arcParams.endAngle,\n        );\n        break;\n      default:\n        xArr.push(currentPoint[0]);\n        yArr.push(currentPoint[1]);\n        break;\n    }\n    if (box) {\n      segment.box = box;\n      xArr.push(box.x, box.x + box.width);\n      yArr.push(box.y, box.y + box.height);\n    }\n    if (\n      lineWidth &&\n      (segment.command === 'L' || segment.command === 'M') &&\n      segment.prePoint &&\n      segment.nextPoint\n    ) {\n      segmentsWithAngle.push(segment);\n    }\n  }\n  // bbox calculation should ignore NaN for path attribute\n  // ref: https://github.com/antvis/g/issues/210\n  // ref: https://github.com/antvis/G2/issues/3109\n  xArr = xArr.filter(\n    (item) => !Number.isNaN(item) && item !== Infinity && item !== -Infinity,\n  );\n  yArr = yArr.filter(\n    (item) => !Number.isNaN(item) && item !== Infinity && item !== -Infinity,\n  );\n  let minX = min(xArr);\n  let minY = min(yArr);\n  let maxX = max(xArr);\n  let maxY = max(yArr);\n  if (segmentsWithAngle.length === 0) {\n    return {\n      x: minX,\n      y: minY,\n      width: maxX - minX,\n      height: maxY - minY,\n    };\n  }\n  for (let i = 0; i < segmentsWithAngle.length; i++) {\n    const segment = segmentsWithAngle[i];\n    const { currentPoint } = segment;\n    let extra;\n    if (currentPoint[0] === minX) {\n      extra = getExtraFromSegmentWithAngle(segment, lineWidth);\n      minX -= extra.xExtra;\n    } else if (currentPoint[0] === maxX) {\n      extra = getExtraFromSegmentWithAngle(segment, lineWidth);\n      maxX += extra.xExtra;\n    }\n    if (currentPoint[1] === minY) {\n      extra = getExtraFromSegmentWithAngle(segment, lineWidth);\n      minY -= extra.yExtra;\n    } else if (currentPoint[1] === maxY) {\n      extra = getExtraFromSegmentWithAngle(segment, lineWidth);\n      maxY += extra.yExtra;\n    }\n  }\n  return {\n    x: minX,\n    y: minY,\n    width: maxX - minX,\n    height: maxY - minY,\n  };\n}\n\nfunction getExtraFromSegmentWithAngle(segment, lineWidth: number) {\n  const { prePoint, currentPoint, nextPoint } = segment;\n  const currentAndPre =\n    (currentPoint[0] - prePoint[0]) ** 2 + (currentPoint[1] - prePoint[1]) ** 2;\n  const currentAndNext =\n    (currentPoint[0] - nextPoint[0]) ** 2 +\n    (currentPoint[1] - nextPoint[1]) ** 2;\n  const preAndNext =\n    (prePoint[0] - nextPoint[0]) ** 2 + (prePoint[1] - nextPoint[1]) ** 2;\n  //  currentPoint \n  const currentAngle = Math.acos(\n    (currentAndPre + currentAndNext - preAndNext) /\n      (2 * Math.sqrt(currentAndPre) * Math.sqrt(currentAndNext)),\n  );\n  //  0  PI \n  // :  0  0 \n  if (\n    !currentAngle ||\n    Math.sin(currentAngle) === 0 ||\n    isNumberEqual(currentAngle, 0)\n  ) {\n    return {\n      xExtra: 0,\n      yExtra: 0,\n    };\n  }\n  let xAngle = Math.abs(\n    Math.atan2(nextPoint[1] - currentPoint[1], nextPoint[0] - currentPoint[0]),\n  );\n  let yAngle = Math.abs(\n    Math.atan2(nextPoint[0] - currentPoint[0], nextPoint[1] - currentPoint[1]),\n  );\n  // \n  xAngle = xAngle > Math.PI / 2 ? Math.PI - xAngle : xAngle;\n  yAngle = yAngle > Math.PI / 2 ? Math.PI - yAngle : yAngle;\n  // \n  // \n  const extra = {\n    // \n    xExtra:\n      Math.cos(currentAngle / 2 - xAngle) *\n        ((lineWidth / 2) * (1 / Math.sin(currentAngle / 2))) -\n        lineWidth / 2 || 0,\n    // \n    yExtra:\n      Math.cos(yAngle - currentAngle / 2) *\n        ((lineWidth / 2) * (1 / Math.sin(currentAngle / 2))) -\n        lineWidth / 2 || 0,\n  };\n  return extra;\n}\n\n// \nfunction toSymmetry(point: number[], center: number[]) {\n  return [\n    center[0] + (center[0] - point[0]),\n    center[1] + (center[1] - point[1]),\n  ];\n}\n\nconst angleBetween = (v0: PointLike, v1: PointLike) => {\n  const p = v0.x * v1.x + v0.y * v1.y;\n  const n = Math.sqrt((v0.x ** 2 + v0.y ** 2) * (v1.x ** 2 + v1.y ** 2));\n  const sign = v0.x * v1.y - v0.y * v1.x < 0 ? -1 : 1;\n  const angle = sign * Math.acos(p / n);\n\n  return angle;\n};\ninterface PointOnEllipticalArc {\n  x: number;\n  y: number;\n  ellipticalArcAngle: number;\n}\n/**\n * @see https://github.com/rveciana/svg-path-properties/blob/b6bd9a322966f6ef7a311872d80c56e3718de861/src/arc.ts#L121\n */\nconst pointOnEllipticalArc = (\n  p0: PointLike,\n  rx: number,\n  ry: number,\n  xAxisRotation: number,\n  largeArcFlag: boolean,\n  sweepFlag: boolean,\n  p1: PointLike,\n  t: number,\n): PointOnEllipticalArc => {\n  // In accordance to: http://www.w3.org/TR/SVG/implnote.html#ArcOutOfRangeParameters\n  rx = Math.abs(rx);\n  ry = Math.abs(ry);\n  xAxisRotation = mod(xAxisRotation, 360);\n  const xAxisRotationRadians = deg2rad(xAxisRotation);\n  // If the endpoints are identical, then this is equivalent to omitting the elliptical arc segment entirely.\n  if (p0.x === p1.x && p0.y === p1.y) {\n    return { x: p0.x, y: p0.y, ellipticalArcAngle: 0 }; // Check if angle is correct\n  }\n\n  // If rx = 0 or ry = 0 then this arc is treated as a straight line segment joining the endpoints.\n  if (rx === 0 || ry === 0) {\n    // return this.pointOnLine(p0, p1, t);\n    return { x: 0, y: 0, ellipticalArcAngle: 0 }; // Check if angle is correct\n  }\n\n  // Following \"Conversion from endpoint to center parameterization\"\n  // http://www.w3.org/TR/SVG/implnote.html#ArcConversionEndpointToCenter\n\n  // Step #1: Compute transformedPoint\n  const dx = (p0.x - p1.x) / 2;\n  const dy = (p0.y - p1.y) / 2;\n  const transformedPoint = {\n    x:\n      Math.cos(xAxisRotationRadians) * dx + Math.sin(xAxisRotationRadians) * dy,\n    y:\n      -Math.sin(xAxisRotationRadians) * dx +\n      Math.cos(xAxisRotationRadians) * dy,\n  };\n  // Ensure radii are large enough\n  const radiiCheck =\n    transformedPoint.x ** 2 / rx ** 2 + transformedPoint.y ** 2 / ry ** 2;\n  if (radiiCheck > 1) {\n    rx *= Math.sqrt(radiiCheck);\n    ry *= Math.sqrt(radiiCheck);\n  }\n\n  // Step #2: Compute transformedCenter\n  const cSquareNumerator =\n    rx ** 2 * ry ** 2 -\n    rx ** 2 * transformedPoint.y ** 2 -\n    ry ** 2 * transformedPoint.x ** 2;\n  const cSquareRootDenom =\n    rx ** 2 * transformedPoint.y ** 2 + ry ** 2 * transformedPoint.x ** 2;\n  let cRadicand = cSquareNumerator / cSquareRootDenom;\n  // Make sure this never drops below zero because of precision\n  cRadicand = cRadicand < 0 ? 0 : cRadicand;\n  const cCoef = (largeArcFlag !== sweepFlag ? 1 : -1) * Math.sqrt(cRadicand);\n  const transformedCenter = {\n    x: cCoef * ((rx * transformedPoint.y) / ry),\n    y: cCoef * (-(ry * transformedPoint.x) / rx),\n  };\n\n  // Step #3: Compute center\n  const center = {\n    x:\n      Math.cos(xAxisRotationRadians) * transformedCenter.x -\n      Math.sin(xAxisRotationRadians) * transformedCenter.y +\n      (p0.x + p1.x) / 2,\n    y:\n      Math.sin(xAxisRotationRadians) * transformedCenter.x +\n      Math.cos(xAxisRotationRadians) * transformedCenter.y +\n      (p0.y + p1.y) / 2,\n  };\n\n  // Step #4: Compute start/sweep angles\n  // Start angle of the elliptical arc prior to the stretch and rotate operations.\n  // Difference between the start and end angles\n  const startVector = {\n    x: (transformedPoint.x - transformedCenter.x) / rx,\n    y: (transformedPoint.y - transformedCenter.y) / ry,\n  };\n  const startAngle = angleBetween(\n    {\n      x: 1,\n      y: 0,\n    },\n    startVector,\n  );\n\n  const endVector = {\n    x: (-transformedPoint.x - transformedCenter.x) / rx,\n    y: (-transformedPoint.y - transformedCenter.y) / ry,\n  };\n  let sweepAngle = angleBetween(startVector, endVector);\n\n  if (!sweepFlag && sweepAngle > 0) {\n    sweepAngle -= 2 * Math.PI;\n  } else if (sweepFlag && sweepAngle < 0) {\n    sweepAngle += 2 * Math.PI;\n  }\n  // We use % instead of `mod(..)` because we want it to be -360deg to 360deg(but actually in radians)\n  sweepAngle %= 2 * Math.PI;\n\n  // From http://www.w3.org/TR/SVG/implnote.html#ArcParameterizationAlternatives\n  const angle = startAngle + sweepAngle * t;\n  const ellipseComponentX = rx * Math.cos(angle);\n  const ellipseComponentY = ry * Math.sin(angle);\n\n  const point = {\n    x:\n      Math.cos(xAxisRotationRadians) * ellipseComponentX -\n      Math.sin(xAxisRotationRadians) * ellipseComponentY +\n      center.x,\n    y:\n      Math.sin(xAxisRotationRadians) * ellipseComponentX +\n      Math.cos(xAxisRotationRadians) * ellipseComponentY +\n      center.y,\n    ellipticalArcStartAngle: startAngle,\n    ellipticalArcEndAngle: startAngle + sweepAngle,\n    ellipticalArcAngle: angle,\n    ellipticalArcCenter: center,\n    resultantRx: rx,\n    resultantRy: ry,\n  };\n\n  return point;\n};\n\nexport function path2Segments(path: AbsoluteArray): PathSegment[] {\n  const segments = [];\n  let currentPoint = null; // \n  let nextParams = null; //  path \n  let startMovePoint = null; //  M \n  let lastStartMovePointIndex = 0; //  M \n  const count = path.length;\n  for (let i = 0; i < count; i++) {\n    const params = path[i];\n    nextParams = path[i + 1];\n    const command = params[0];\n    // \n    const segment: PathSegment = {\n      command,\n      prePoint: currentPoint,\n      params,\n      startTangent: null,\n      endTangent: null,\n      currentPoint: null,\n      nextPoint: null,\n      arcParams: null,\n      box: null,\n      cubicParams: null,\n    };\n    switch (command) {\n      case 'M':\n        startMovePoint = [params[1], params[2]];\n        lastStartMovePointIndex = i;\n        break;\n      case 'A':\n        const arcParams = getArcParams(currentPoint, params);\n        segment.arcParams = arcParams;\n        break;\n      default:\n        break;\n    }\n    if (command === 'Z') {\n      //  Z  M \n      currentPoint = startMovePoint;\n      //  Z M  M \n      nextParams = path[lastStartMovePointIndex + 1];\n    } else {\n      const len = params.length;\n      currentPoint = [params[len - 2], params[len - 1]];\n    }\n    if (nextParams && nextParams[0] === 'Z') {\n      //  Z M \n      nextParams = path[lastStartMovePointIndex];\n      if (segments[lastStartMovePointIndex]) {\n        //  Z M \n        segments[lastStartMovePointIndex].prePoint = currentPoint;\n      }\n    }\n    segment.currentPoint = currentPoint;\n    //  M  M \n    if (\n      segments[lastStartMovePointIndex] &&\n      isSamePoint(currentPoint, segments[lastStartMovePointIndex].currentPoint)\n    ) {\n      segments[lastStartMovePointIndex].prePoint = segment.prePoint;\n    }\n    const nextPoint = nextParams\n      ? [nextParams[nextParams.length - 2], nextParams[nextParams.length - 1]]\n      : null;\n    segment.nextPoint = nextPoint as [number, number];\n    // Add startTangent and endTangent\n    const { prePoint } = segment;\n    if (['L', 'H', 'V'].includes(command)) {\n      segment.startTangent = [\n        prePoint[0] - currentPoint[0],\n        prePoint[1] - currentPoint[1],\n      ];\n      segment.endTangent = [\n        currentPoint[0] - prePoint[0],\n        currentPoint[1] - prePoint[1],\n      ];\n    } else if (command === 'Q') {\n      // \n      const cp = [params[1], params[2]];\n      //  currentPoint\n      segment.startTangent = [prePoint[0] - cp[0], prePoint[1] - cp[1]];\n      segment.endTangent = [currentPoint[0] - cp[0], currentPoint[1] - cp[1]];\n    } else if (command === 'T') {\n      const preSegment = segments[i - 1];\n      const cp = toSymmetry(preSegment.currentPoint, prePoint);\n      if (preSegment.command === 'Q') {\n        segment.command = 'Q';\n        segment.startTangent = [prePoint[0] - cp[0], prePoint[1] - cp[1]];\n        segment.endTangent = [currentPoint[0] - cp[0], currentPoint[1] - cp[1]];\n      } else {\n        // @ts-ignore\n        segment.command = 'TL';\n        segment.startTangent = [\n          prePoint[0] - currentPoint[0],\n          prePoint[1] - currentPoint[1],\n        ];\n        segment.endTangent = [\n          currentPoint[0] - prePoint[0],\n          currentPoint[1] - prePoint[1],\n        ];\n      }\n    } else if (command === 'C') {\n      // \n      const cp1 = [params[1], params[2]];\n      const cp2 = [params[3], params[4]];\n      segment.startTangent = [prePoint[0] - cp1[0], prePoint[1] - cp1[1]];\n      segment.endTangent = [currentPoint[0] - cp2[0], currentPoint[1] - cp2[1]];\n\n      // horizontal line, eg. ['C', 100, 100, 100, 100, 200, 200]\n      if (segment.startTangent[0] === 0 && segment.startTangent[1] === 0) {\n        segment.startTangent = [cp1[0] - cp2[0], cp1[1] - cp2[1]];\n      }\n      if (segment.endTangent[0] === 0 && segment.endTangent[1] === 0) {\n        segment.endTangent = [cp2[0] - cp1[0], cp2[1] - cp1[1]];\n      }\n    } else if (command === 'S') {\n      const preSegment = segments[i - 1];\n      const cp1 = toSymmetry(preSegment.currentPoint, prePoint);\n      const cp2 = [params[1], params[2]];\n      if (preSegment.command === 'C') {\n        segment.command = 'C'; //  S  C \n        segment.startTangent = [prePoint[0] - cp1[0], prePoint[1] - cp1[1]];\n        segment.endTangent = [\n          currentPoint[0] - cp2[0],\n          currentPoint[1] - cp2[1],\n        ];\n      } else {\n        // @ts-ignore\n        segment.command = 'SQ'; //  S  SQ \n        segment.startTangent = [prePoint[0] - cp2[0], prePoint[1] - cp2[1]];\n        segment.endTangent = [\n          currentPoint[0] - cp2[0],\n          currentPoint[1] - cp2[1],\n        ];\n      }\n    } else if (command === 'A') {\n      const { x: dx1, y: dy1 } = getTangentAtRatio(segment, 0);\n      const { x: dx2, y: dy2 } = getTangentAtRatio(segment, 1, false);\n\n      segment.startTangent = [dx1, dy1];\n      segment.endTangent = [dx2, dy2];\n    }\n    segments.push(segment);\n  }\n  return segments;\n}\n\n/**\n * Use length instead of ratio\n */\nfunction getTangentAtRatio(segment: PathSegment, ratio: number, sign = true) {\n  const { rx = 0, ry = 0, xRotation, arcFlag, sweepFlag } = segment.arcParams;\n  const p1 = pointOnEllipticalArc(\n    { x: segment.prePoint[0], y: segment.prePoint[1] },\n    rx,\n    ry,\n    xRotation,\n    !!arcFlag,\n    !!sweepFlag,\n    { x: segment.currentPoint[0], y: segment.currentPoint[1] },\n    ratio,\n  );\n\n  const p2 = pointOnEllipticalArc(\n    { x: segment.prePoint[0], y: segment.prePoint[1] },\n    rx,\n    ry,\n    xRotation,\n    !!arcFlag,\n    !!sweepFlag,\n    { x: segment.currentPoint[0], y: segment.currentPoint[1] },\n    sign ? ratio + 0.005 : ratio - 0.005,\n  );\n\n  const xDist = p2.x - p1.x;\n  const yDist = p2.y - p1.y;\n\n  const dist = Math.sqrt(xDist * xDist + yDist * yDist);\n  return { x: -xDist / dist, y: -yDist / dist };\n}\n\n// \nfunction vMag(v: number[]) {\n  return Math.sqrt(v[0] * v[0] + v[1] * v[1]);\n}\n\n// u.v/|u||v|\nfunction vRatio(u: number[], v: number[]) {\n  //  0  0 1\n  return vMag(u) * vMag(v)\n    ? (u[0] * v[0] + u[1] * v[1]) / (vMag(u) * vMag(v))\n    : 1;\n}\n\n// \nfunction vAngle(u: number[], v: number[]) {\n  return (u[0] * v[1] < u[1] * v[0] ? -1 : 1) * Math.acos(vRatio(u, v));\n}\n\nfunction getArcParams(\n  startPoint: [number, number],\n  params: ASegment,\n): PathArcParams {\n  let rx = params[1];\n  let ry = params[2];\n  const xRotation = mod(deg2rad(params[3]), Math.PI * 2);\n  const arcFlag = params[4];\n  const sweepFlag = params[5];\n  // \n  const x1 = startPoint[0];\n  const y1 = startPoint[1];\n  // \n  const x2 = params[6];\n  const y2 = params[7];\n  const xp =\n    (Math.cos(xRotation) * (x1 - x2)) / 2.0 +\n    (Math.sin(xRotation) * (y1 - y2)) / 2.0;\n  const yp =\n    (-1 * Math.sin(xRotation) * (x1 - x2)) / 2.0 +\n    (Math.cos(xRotation) * (y1 - y2)) / 2.0;\n  const lambda = (xp * xp) / (rx * rx) + (yp * yp) / (ry * ry);\n\n  if (lambda > 1) {\n    rx *= Math.sqrt(lambda);\n    ry *= Math.sqrt(lambda);\n  }\n  const diff = rx * rx * (yp * yp) + ry * ry * (xp * xp);\n\n  let f = diff ? Math.sqrt((rx * rx * (ry * ry) - diff) / diff) : 1;\n\n  if (arcFlag === sweepFlag) {\n    f *= -1;\n  }\n  if (isNaN(f)) {\n    f = 0;\n  }\n\n  //  0  (0, 0) \n  const cxp = ry ? (f * rx * yp) / ry : 0;\n  const cyp = rx ? (f * -ry * xp) / rx : 0;\n\n  // \n  const cx =\n    (x1 + x2) / 2.0 + Math.cos(xRotation) * cxp - Math.sin(xRotation) * cyp;\n  const cy =\n    (y1 + y2) / 2.0 + Math.sin(xRotation) * cxp + Math.cos(xRotation) * cyp;\n\n  // \n  const u = [(xp - cxp) / rx, (yp - cyp) / ry];\n  // \n  const v = [(-1 * xp - cxp) / rx, (-1 * yp - cyp) / ry];\n  //  x \n  const theta = vAngle([1, 0], u);\n\n  // \n  let dTheta = vAngle(u, v);\n\n  if (vRatio(u, v) <= -1) {\n    dTheta = Math.PI;\n  }\n  if (vRatio(u, v) >= 1) {\n    dTheta = 0;\n  }\n  if (sweepFlag === 0 && dTheta > 0) {\n    dTheta -= 2 * Math.PI;\n  }\n  if (sweepFlag === 1 && dTheta < 0) {\n    dTheta += 2 * Math.PI;\n  }\n  return {\n    cx,\n    cy,\n    //  0 \n    rx: isSamePoint(startPoint, [x2, y2]) ? 0 : rx,\n    ry: isSamePoint(startPoint, [x2, y2]) ? 0 : ry,\n    startAngle: theta,\n    endAngle: theta + dTheta,\n    xRotation,\n    arcFlag,\n    sweepFlag,\n  };\n}\n\nfunction commandsToPathString(\n  commands: AbsoluteArray,\n  object: Circle | Ellipse | Rect | Line | Polyline | Polygon | Path,\n  transform?: mat4,\n) {\n  return commands.reduce((prev, cur) => {\n    let path = '';\n    if (cur[0] === 'M' || cur[0] === 'L') {\n      const p = vec3.fromValues(cur[1], cur[2], 0);\n\n      if (transform) {\n        vec3.transformMat4(p, p, transform);\n      }\n\n      path = `${cur[0]}${p[0]},${p[1]}`;\n    } else if (cur[0] === 'Z') {\n      path = cur[0];\n    } else if (cur[0] === 'C') {\n      const p1 = vec3.fromValues(cur[1], cur[2], 0);\n      const p2 = vec3.fromValues(cur[3], cur[4], 0);\n      const p3 = vec3.fromValues(cur[5], cur[6], 0);\n\n      if (transform) {\n        vec3.transformMat4(p1, p1, transform);\n        vec3.transformMat4(p2, p2, transform);\n        vec3.transformMat4(p3, p3, transform);\n      }\n\n      path = `${cur[0]}${p1[0]},${p1[1]},${p2[0]},${p2[1]},${p3[0]},${p3[1]}`;\n    } else if (cur[0] === 'A') {\n      const c = vec3.fromValues(cur[6], cur[7], 0);\n      if (transform) {\n        vec3.transformMat4(c, c, transform);\n      }\n      path = `${cur[0]}${cur[1]},${cur[2]},${cur[3]},${cur[4]},${cur[5]},${c[0]},${c[1]}`;\n    } else if (cur[0] === 'Q') {\n      const p1 = vec3.fromValues(cur[1], cur[2], 0);\n      const p2 = vec3.fromValues(cur[3], cur[4], 0);\n      if (transform) {\n        vec3.transformMat4(p1, p1, transform);\n        vec3.transformMat4(p2, p2, transform);\n      }\n      path = `${cur[0]}${cur[1]},${cur[2]},${cur[3]},${cur[4]}}`;\n    }\n\n    return (prev += path);\n  }, '');\n}\n\nfunction lineToCommands(\n  x1: number,\n  y1: number,\n  x2: number,\n  y2: number,\n): AbsoluteArray {\n  return [\n    ['M', x1, y1],\n    ['L', x2, y2],\n  ];\n}\n\nfunction ellipseToCommands(\n  rx: number,\n  ry: number,\n  cx: number,\n  cy: number,\n): AbsoluteArray {\n  const factor = ((-1 + Math.sqrt(2)) / 3) * 4;\n  const dx = rx * factor;\n  const dy = ry * factor;\n  const left = cx - rx;\n  const right = cx + rx;\n  const top = cy - ry;\n  const bottom = cy + ry;\n\n  return [\n    ['M', left, cy],\n    ['C', left, cy - dy, cx - dx, top, cx, top],\n    ['C', cx + dx, top, right, cy - dy, right, cy],\n    ['C', right, cy + dy, cx + dx, bottom, cx, bottom],\n    ['C', cx - dx, bottom, left, cy + dy, left, cy],\n    ['Z'],\n  ];\n}\n\nfunction polygonToCommands(\n  points: ([number, number] | [number, number, number])[],\n  closed: boolean,\n): AbsoluteArray {\n  const result = points.map((point, i) => {\n    return [i === 0 ? 'M' : 'L', point[0], point[1]];\n  });\n\n  if (closed) {\n    result.push(['Z']);\n  }\n\n  return result as AbsoluteArray;\n}\n\nfunction rectToCommands(\n  width: number,\n  height: number,\n  x: number,\n  y: number,\n  radius?: [number, number, number, number],\n): AbsoluteArray {\n  // @see https://gist.github.com/danielpquinn/dd966af424030d47e476\n  if (radius) {\n    const [tlr, trr, brr, blr] = radius;\n    const signX = width > 0 ? 1 : -1;\n    const signY = height > 0 ? 1 : -1;\n    // sweep-flag @see https://developer.mozilla.org/zh-CN/docs/Web/SVG/Tutorial/Paths#arcs\n    const sweepFlag = signX + signY !== 0 ? 1 : 0;\n    return [\n      ['M', signX * tlr + x, y],\n      ['L', width - signX * trr + x, y],\n      trr ? ['A', trr, trr, 0, 0, sweepFlag, width + x, signY * trr + y] : null,\n      ['L', width + x, height - signY * brr + y],\n      brr\n        ? ['A', brr, brr, 0, 0, sweepFlag, width + x - signX * brr, height + y]\n        : null,\n      ['L', x + signX * blr, height + y],\n      blr\n        ? ['A', blr, blr, 0, 0, sweepFlag, x, height + y - signY * blr]\n        : null,\n      ['L', x, signY * tlr + y],\n      tlr ? ['A', tlr, tlr, 0, 0, sweepFlag, signX * tlr + x, y] : null,\n      ['Z'],\n    ].filter((command) => command) as AbsoluteArray;\n  }\n\n  return [\n    ['M', x, y],\n    ['L', x + width, y],\n    ['L', x + width, y + height],\n    ['L', x, y + height],\n    ['Z'],\n  ];\n}\n\n/**\n * convert object to path, should account for:\n * * transform & origin\n * * lineWidth\n */\nexport function convertToPath(\n  object: Circle | Ellipse | Rect | Line | Polyline | Polygon | Path,\n  transform: mat4 = object.getLocalTransform(),\n) {\n  let commands: AbsoluteArray = [] as unknown as AbsoluteArray;\n  switch (object.nodeName) {\n    case Shape.LINE:\n      const { x1 = 0, y1 = 0, x2 = 0, y2 = 0 } = (object as Line).parsedStyle;\n      commands = lineToCommands(x1, y1, x2, y2);\n      break;\n    case Shape.CIRCLE: {\n      const { r = 0, cx = 0, cy = 0 } = (object as Circle).parsedStyle;\n      commands = ellipseToCommands(r, r, cx, cy);\n      break;\n    }\n    case Shape.ELLIPSE: {\n      const {\n        rx = 0,\n        ry = 0,\n        cx = 0,\n        cy = 0,\n      } = (object as Ellipse).parsedStyle;\n      commands = ellipseToCommands(rx, ry, cx, cy);\n      break;\n    }\n    case Shape.POLYLINE:\n    case Shape.POLYGON:\n      const { points } = (object as Polyline).parsedStyle;\n      commands = polygonToCommands(\n        points.points,\n        object.nodeName === Shape.POLYGON,\n      );\n      break;\n    case Shape.RECT:\n      const {\n        width = 0,\n        height = 0,\n        x = 0,\n        y = 0,\n        radius,\n      } = (object as Rect).parsedStyle;\n\n      const hasRadius = radius && radius.some((r) => r !== 0);\n      commands = rectToCommands(\n        width,\n        height,\n        x,\n        y,\n        hasRadius &&\n          (radius.map((r) =>\n            clamp(r, 0, Math.min(Math.abs(width) / 2, Math.abs(height) / 2)),\n          ) as [number, number, number, number]),\n      );\n      break;\n    case Shape.PATH:\n      const { absolutePath } = (object as Path).parsedStyle.d;\n      commands = [...absolutePath];\n      break;\n  }\n\n  if (commands.length) {\n    return commandsToPathString(commands, object, transform);\n  }\n}\n\nexport function translatePathToString(\n  absolutePath: AbsoluteArray,\n  startOffsetX = 0,\n  startOffsetY = 0,\n  endOffsetX = 0,\n  endOffsetY = 0,\n) {\n  const newValue = absolutePath\n    .map((params, i) => {\n      const command = params[0];\n      const nextSegment = absolutePath[i + 1];\n      const useStartOffset =\n        i === 0 && (startOffsetX !== 0 || startOffsetY !== 0);\n      const useEndOffset =\n        (i === absolutePath.length - 1 ||\n          (nextSegment &&\n            (nextSegment[0] === 'M' || nextSegment[0] === 'Z'))) &&\n        endOffsetX !== 0 &&\n        endOffsetY !== 0;\n      const [startOffsetXTemp, startOffsetYTemp] = useStartOffset\n        ? [startOffsetX, startOffsetY]\n        : [0, 0];\n      const [endOffsetXTemp, endOffsetYTemp] = useEndOffset\n        ? [endOffsetX, endOffsetY]\n        : [0, 0];\n\n      switch (command) {\n        case 'M':\n          return `M ${params[1] + startOffsetXTemp},${params[2] + startOffsetYTemp}`;\n\n        case 'L':\n          return `L ${params[1] + endOffsetXTemp},${\n            params[2] + endOffsetYTemp\n          }`;\n\n        case 'Q':\n          return `Q ${params[1]} ${params[2]},${params[3] + endOffsetXTemp} ${params[4] + endOffsetYTemp}`;\n\n        case 'C':\n          return `C ${params[1]} ${params[2]},${params[3]} ${params[4]},${params[5] + endOffsetXTemp} ${params[6] + endOffsetYTemp}`;\n\n        case 'A':\n          return `A ${params[1]} ${params[2]} ${params[3]} ${params[4]} ${params[5]} ${params[6]} ${params[7]}${\n            useEndOffset\n              ? ` L ${params[6] + endOffsetX},${params[7] + endOffsetY}`\n              : ''\n          }`;\n\n        case 'Z':\n          return 'Z';\n\n        default:\n          return null;\n      }\n    })\n    .filter((item) => item !== null)\n    .join(' ');\n  if (~newValue.indexOf('NaN')) {\n    return '';\n  }\n  return newValue;\n}\n", "import type { AbsoluteArray, CurveArray, PathArray } from '@antv/util';\nimport {\n  clonePath,\n  equalizeSegments,\n  getDrawDirection,\n  getRotatedCurve,\n  isString,\n  normalizePath,\n  path2Curve,\n  reverseCurve,\n} from '@antv/util';\nimport type { ParsedPathStyleProps } from '../../display-objects';\nimport type { IElement } from '../../dom';\nimport { memoize } from '../../utils/memoize';\nimport {\n  extractPolygons,\n  getPathBBox,\n  hasArcOrBezier,\n  path2Segments,\n  removeRedundantMCommand,\n} from '../../utils/path';\n\nconst internalParsePath = (path: string | PathArray) => {\n  // empty path\n  if (path === '' || (Array.isArray(path) && path.length === 0)) {\n    return {\n      absolutePath: [],\n      hasArc: false,\n      segments: [],\n      polygons: [],\n      polylines: [],\n      curve: null,\n      totalLength: 0,\n      rect: {\n        x: 0,\n        y: 0,\n        width: 0,\n        height: 0,\n      },\n    };\n  }\n\n  let absolutePath: AbsoluteArray;\n  try {\n    absolutePath = normalizePath(path);\n  } catch {\n    absolutePath = normalizePath('');\n    console.error(`[g]: Invalid SVG Path definition: ${path}`);\n  }\n\n  removeRedundantMCommand(absolutePath);\n\n  const hasArc = hasArcOrBezier(absolutePath);\n\n  const { polygons, polylines } = extractPolygons(absolutePath);\n\n  // for later use\n  const segments = path2Segments(absolutePath);\n\n  // Only calculate bbox here since we don't need length now.\n  const { x, y, width, height } = getPathBBox(segments, 0);\n\n  return {\n    absolutePath,\n    hasArc,\n    segments,\n    polygons,\n    polylines,\n    // curve,\n    // Delay the calculation of length.\n    totalLength: 0,\n    rect: {\n      x: Number.isFinite(x) ? x : 0,\n      y: Number.isFinite(y) ? y : 0,\n      width: Number.isFinite(width) ? width : 0,\n      height: Number.isFinite(height) ? height : 0,\n    },\n  };\n};\n\nconst memoizedParsePath = memoize(internalParsePath);\n\nexport function parsePath(path: string | PathArray): ParsedPathStyleProps['d'] {\n  return (\n    isString(path) ? memoizedParsePath(path) : internalParsePath(path)\n  ) as ParsedPathStyleProps['d'];\n}\n\nexport function mergePaths(\n  left: ParsedPathStyleProps['d'],\n  right: ParsedPathStyleProps['d'],\n  object?: IElement,\n): [CurveArray, CurveArray, (b: CurveArray) => CurveArray] {\n  let curve1 = left.curve;\n  let curve2 = right.curve;\n  if (!curve1 || curve1.length === 0) {\n    // convert to curves to do morphing & picking later\n    // @see http://thednp.github.io/kute.js/svgCubicMorph.html\n    curve1 = path2Curve(left.absolutePath, false) as CurveArray;\n    left.curve = curve1;\n  }\n  if (!curve2 || curve2.length === 0) {\n    curve2 = path2Curve(right.absolutePath, false) as CurveArray;\n    right.curve = curve2;\n  }\n\n  let curves = [curve1, curve2];\n  if (curve1.length !== curve2.length) {\n    curves = equalizeSegments(curve1, curve2);\n  }\n\n  const curve0 =\n    getDrawDirection(curves[0]) !== getDrawDirection(curves[1])\n      ? reverseCurve(curves[0])\n      : (clonePath(curves[0]) as CurveArray);\n\n  return [\n    curve0,\n    getRotatedCurve(curves[1], curve0) as CurveArray,\n    (pathArray: CurveArray) => {\n      // need converting to path string?\n      return pathArray;\n    },\n  ];\n}\n", "import { isString } from '@antv/util';\nimport type { DisplayObject } from '../..';\n\n/**\n * @see https://developer.mozilla.org/zh-CN/docs/Web/SVG/Attribute/points\n *\n * @example\n * points=\"100,10 250,150 200,110\"\n */\nexport function parsePoints(\n  pointsOrStr: string | [number, number][],\n  object?: DisplayObject,\n) {\n  let points: [number, number][];\n  if (isString(pointsOrStr)) {\n    points = pointsOrStr.split(' ').map((pointStr) => {\n      const [x, y] = pointStr.split(',');\n      return [Number(x), Number(y)];\n    });\n  } else {\n    points = pointsOrStr;\n  }\n\n  return {\n    points,\n    totalLength: 0,\n    segments: [],\n  };\n}\n\nexport function mergePoints(\n  left,\n  right,\n):\n  | [\n      [number, number][],\n      [number, number][],\n      (numberList: [number, number][]) => [number, number][],\n    ]\n  | undefined {\n  return [\n    left.points,\n    right.points,\n    (points) => {\n      return points;\n    },\n  ];\n}\n", "import { clamp } from '@antv/util';\nimport type { DisplayObject } from '../../display-objects';\nimport { decomposeMat4, deg2rad } from '../../utils/math';\nimport { getOrCreateUnitValue } from '../CSSStyleValuePool';\nimport { CSSUnitValue, Odeg, Opx } from '../cssom';\nimport {\n  convertAngleUnit,\n  convertPercentUnit,\n  mergeDimensions,\n  parseAngle,\n  parseAngleUnmemoize,\n  parseLength,\n  parseLengthUnmemoize,\n  parseLengthOrPercentage,\n  parseLengthOrPercentageUnmemoize,\n} from './dimension';\nimport { parseNumber, parseNumberUnmemoize } from './numeric';\nimport type { TransformArray, TransformType } from '../../types';\n\n// eg. { t: 'scale', d: [CSSUnitValue(1), CSSUnitValue(2)] }\nexport interface ParsedTransform {\n  t: string;\n  d: CSSUnitValue[];\n}\n\ntype PatternElement = string | number | null | CSSUnitValue;\ntype CastFunction =\n  | ((string: string) => string)\n  | ((contents: (number | PatternElement)[]) => PatternElement[]);\n\nconst _ = null;\nconst TRANSFORM_REGEXP = /\\s*(\\w+)\\(([^)]*)\\)/g;\nfunction cast(pattern: PatternElement[]) {\n  return function (contents: PatternElement[]) {\n    let i = 0;\n    return pattern.map((x) => {\n      return x === _ ? contents[i++] : x;\n    });\n  };\n}\n\nfunction id(x: string) {\n  return x;\n}\n\n// type: [argTypes, convertTo3D, convertTo2D]\n// In the argument types string, lowercase characters represent optional arguments\nconst transformFunctions: Record<\n  TransformType,\n  [string] | [string, CastFunction] | [string, CastFunction, CastFunction]\n> = {\n  // @ts-ignore\n  matrix: ['NNNNNN', [_, _, 0, 0, _, _, 0, 0, 0, 0, 1, 0, _, _, 0, 1], id],\n  matrix3d: ['NNNNNNNNNNNNNNNN', id],\n  rotate: ['A'],\n  rotateX: ['A'],\n  rotateY: ['A'],\n  rotateZ: ['A'],\n  rotate3d: ['NNNA'],\n  perspective: ['L'],\n  scale: ['Nn', cast([_, _, new CSSUnitValue(1)]), id],\n  scaleX: [\n    'N',\n    cast([_, new CSSUnitValue(1), new CSSUnitValue(1)]),\n    cast([_, new CSSUnitValue(1)]),\n  ],\n  scaleY: [\n    'N',\n    cast([new CSSUnitValue(1), _, new CSSUnitValue(1)]),\n    cast([new CSSUnitValue(1), _]),\n  ],\n  scaleZ: ['N', cast([new CSSUnitValue(1), new CSSUnitValue(1), _])],\n  scale3d: ['NNN', id],\n  skew: ['Aa', null, id],\n  skewX: ['A', null, cast([_, Odeg])],\n  skewY: ['A', null, cast([Odeg, _])],\n  translate: ['Tt', cast([_, _, Opx]), id],\n  translateX: ['T', cast([_, Opx, Opx]), cast([_, Opx])],\n  translateY: ['T', cast([Opx, _, Opx]), cast([Opx, _])],\n  translateZ: ['L', cast([Opx, Opx, _])],\n  translate3d: ['TTL', id],\n};\n\nfunction parseArrayTransform(transform: TransformArray): ParsedTransform[] {\n  const result: ParsedTransform[] = [];\n  const length = transform.length;\n\n  for (let i = 0; i < length; i++) {\n    const item = transform[i];\n    const name = item[0];\n    const args = item.slice(1) as number[];\n    // infer default value\n    if (name === 'translate' || name === 'skew') {\n      if (args.length === 1) args.push(0);\n    } else if (name === 'scale') {\n      if (args.length === 1) args.push(args[0]);\n    }\n\n    const functionData = transformFunctions[name];\n    if (!functionData) return [];\n    const parsedArgs = args.map((value) => getOrCreateUnitValue(value));\n    result.push({ t: name, d: parsedArgs });\n  }\n\n  return result;\n}\n\n/**\n * none\n * scale(1) scale(1, 2)\n * scaleX(1)\n */\nexport function parseTransform(\n  transform: string | TransformArray,\n): ParsedTransform[] {\n  if (Array.isArray(transform)) {\n    return parseArrayTransform(transform);\n  }\n\n  transform = (transform || 'none').trim();\n  if (transform === 'none') {\n    return [];\n  }\n  const result: ParsedTransform[] = [];\n  let match;\n  let prevLastIndex = 0;\n  TRANSFORM_REGEXP.lastIndex = 0;\n  while ((match = TRANSFORM_REGEXP.exec(transform))) {\n    if (match.index !== prevLastIndex) {\n      return [];\n    }\n    prevLastIndex = match.index + match[0].length;\n    const functionName = match[1] as TransformType; // scale\n    const functionData = transformFunctions[functionName]; // scale(1, 2)\n    if (!functionData) {\n      // invalid, eg. scale()\n      return [];\n    }\n    const args = match[2].split(','); // 1,2\n    const argTypes = functionData[0]; // Nn\n    if (argTypes.length < args.length) {\n      // scale(N, n)\n      return [];\n    }\n\n    const parsedArgs: CSSUnitValue[] = [];\n    for (let i = 0; i < argTypes.length; i++) {\n      const arg = args[i];\n      const type = argTypes[i];\n      let parsedArg;\n      if (!arg) {\n        // @ts-ignore\n        parsedArg = {\n          a: Odeg,\n          n: parsedArgs[0],\n          t: Opx,\n        }[type];\n      } else {\n        // @ts-ignore\n        parsedArg = {\n          A: (s: string) => {\n            return s.trim() === '0' ? Odeg : parseAngle(s);\n          },\n          N: parseNumber,\n          T: parseLengthOrPercentage,\n          L: parseLength,\n        }[type.toUpperCase()](arg);\n      }\n      if (parsedArg === undefined) {\n        return [];\n      }\n      parsedArgs.push(parsedArg);\n    }\n    result.push({ t: functionName, d: parsedArgs }); // { t: scale, d: [1, 2] }\n\n    if (TRANSFORM_REGEXP.lastIndex === transform.length) {\n      return result;\n    }\n  }\n\n  return [];\n}\nexport function parseTransformUnmemoize(\n  transform: string | TransformArray,\n): ParsedTransform[] {\n  if (Array.isArray(transform)) {\n    return parseArrayTransform(transform);\n  }\n\n  transform = (transform || 'none').trim();\n  if (transform === 'none') {\n    return [];\n  }\n  const result: ParsedTransform[] = [];\n  let match;\n  let prevLastIndex = 0;\n  TRANSFORM_REGEXP.lastIndex = 0;\n  while ((match = TRANSFORM_REGEXP.exec(transform))) {\n    if (match.index !== prevLastIndex) {\n      return [];\n    }\n    prevLastIndex = match.index + match[0].length;\n    const functionName = match[1] as TransformType; // scale\n    const functionData = transformFunctions[functionName]; // scale(1, 2)\n    if (!functionData) {\n      // invalid, eg. scale()\n      return [];\n    }\n    const args = match[2].split(','); // 1,2\n    const argTypes = functionData[0]; // Nn\n    if (argTypes.length < args.length) {\n      // scale(N, n)\n      return [];\n    }\n\n    const parsedArgs: CSSUnitValue[] = [];\n    for (let i = 0; i < argTypes.length; i++) {\n      const arg = args[i];\n      const type = argTypes[i];\n      let parsedArg;\n      if (!arg) {\n        // @ts-ignore\n        parsedArg = {\n          a: Odeg,\n          n: parsedArgs[0],\n          t: Opx,\n        }[type];\n      } else {\n        // @ts-ignore\n        parsedArg = {\n          A: (s: string) => {\n            return s.trim() === '0' ? Odeg : parseAngleUnmemoize(s);\n          },\n          N: parseNumberUnmemoize,\n          T: parseLengthOrPercentageUnmemoize,\n          L: parseLengthUnmemoize,\n        }[type.toUpperCase()](arg);\n      }\n      if (parsedArg === undefined) {\n        return [];\n      }\n      parsedArgs.push(parsedArg);\n    }\n    result.push({ t: functionName, d: parsedArgs }); // { t: scale, d: [1, 2] }\n\n    if (TRANSFORM_REGEXP.lastIndex === transform.length) {\n      return result;\n    }\n  }\n\n  return [];\n}\n\nexport function convertItemToMatrix(item: ParsedTransform): number[] {\n  let x: number;\n  let y: number;\n  let z: number;\n  let angle: number;\n  switch (item.t) {\n    case 'rotateX':\n      angle = deg2rad(convertAngleUnit(item.d[0]));\n      return [\n        1,\n        0,\n        0,\n        0,\n        0,\n        Math.cos(angle),\n        Math.sin(angle),\n        0,\n        0,\n        -Math.sin(angle),\n        Math.cos(angle),\n        0,\n        0,\n        0,\n        0,\n        1,\n      ];\n    case 'rotateY':\n      angle = deg2rad(convertAngleUnit(item.d[0]));\n      return [\n        Math.cos(angle),\n        0,\n        -Math.sin(angle),\n        0,\n        0,\n        1,\n        0,\n        0,\n        Math.sin(angle),\n        0,\n        Math.cos(angle),\n        0,\n        0,\n        0,\n        0,\n        1,\n      ];\n    case 'rotate':\n    case 'rotateZ':\n      angle = deg2rad(convertAngleUnit(item.d[0]));\n      return [\n        Math.cos(angle),\n        Math.sin(angle),\n        0,\n        0,\n        -Math.sin(angle),\n        Math.cos(angle),\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        1,\n      ];\n    case 'rotate3d':\n      x = item.d[0].value;\n      y = item.d[1].value;\n      z = item.d[2].value;\n      angle = deg2rad(convertAngleUnit(item.d[3]));\n\n      const sqrLength = x * x + y * y + z * z;\n      if (sqrLength === 0) {\n        x = 1;\n        y = 0;\n        z = 0;\n      } else if (sqrLength !== 1) {\n        const length = Math.sqrt(sqrLength);\n        x /= length;\n        y /= length;\n        z /= length;\n      }\n\n      const s = Math.sin(angle / 2);\n      const sc = s * Math.cos(angle / 2);\n      const sq = s * s;\n      return [\n        1 - 2 * (y * y + z * z) * sq,\n        2 * (x * y * sq + z * sc),\n        2 * (x * z * sq - y * sc),\n        0,\n\n        2 * (x * y * sq - z * sc),\n        1 - 2 * (x * x + z * z) * sq,\n        2 * (y * z * sq + x * sc),\n        0,\n\n        2 * (x * z * sq + y * sc),\n        2 * (y * z * sq - x * sc),\n        1 - 2 * (x * x + y * y) * sq,\n        0,\n\n        0,\n        0,\n        0,\n        1,\n      ];\n    case 'scale':\n      return [\n        item.d[0].value,\n        0,\n        0,\n        0,\n        0,\n        item.d[1].value,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        1,\n      ];\n    case 'scaleX':\n      return [item.d[0].value, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\n    case 'scaleY':\n      return [1, 0, 0, 0, 0, item.d[0].value, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\n    case 'scaleZ':\n      return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, item.d[0].value, 0, 0, 0, 0, 1];\n    case 'scale3d':\n      return [\n        item.d[0].value,\n        0,\n        0,\n        0,\n        0,\n        item.d[1].value,\n        0,\n        0,\n        0,\n        0,\n        item.d[2].value,\n        0,\n        0,\n        0,\n        0,\n        1,\n      ];\n    case 'skew':\n      const xAngle = deg2rad(convertAngleUnit(item.d[0]));\n      const yAngle = deg2rad(convertAngleUnit(item.d[1]));\n      return [\n        1,\n        Math.tan(yAngle),\n        0,\n        0,\n        Math.tan(xAngle),\n        1,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        1,\n      ];\n    case 'skewX':\n      angle = deg2rad(convertAngleUnit(item.d[0]));\n      return [1, 0, 0, 0, Math.tan(angle), 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\n    case 'skewY':\n      angle = deg2rad(convertAngleUnit(item.d[0]));\n      return [1, Math.tan(angle), 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\n    case 'translate':\n      // TODO: pass target\n      x = convertPercentUnit(item.d[0], 0, null) || 0;\n      y = convertPercentUnit(item.d[1], 0, null) || 0;\n      return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, x, y, 0, 1];\n    case 'translateX':\n      x = convertPercentUnit(item.d[0], 0, null) || 0;\n      return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, x, 0, 0, 1];\n    case 'translateY':\n      y = convertPercentUnit(item.d[0], 0, null) || 0;\n      return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, y, 0, 1];\n    case 'translateZ':\n      z = convertPercentUnit(item.d[0], 0, null) || 0;\n      return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, z, 1];\n    case 'translate3d':\n      x = convertPercentUnit(item.d[0], 0, null) || 0;\n      y = convertPercentUnit(item.d[1], 0, null) || 0;\n      z = convertPercentUnit(item.d[2], 0, null) || 0;\n      return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, x, y, z, 1];\n    case 'perspective':\n      const t = convertPercentUnit(item.d[0], 0, null) || 0;\n      const p = t ? -1 / t : 0;\n      return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, p, 0, 0, 0, 1];\n    case 'matrix':\n      return [\n        item.d[0].value,\n        item.d[1].value,\n        0,\n        0,\n        item.d[2].value,\n        item.d[3].value,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        item.d[4].value,\n        item.d[5].value,\n        0,\n        1,\n      ];\n    case 'matrix3d':\n      return item.d.map((d) => d.value);\n    default:\n  }\n}\n\nfunction multiplyMatrices(a: number[], b: number[]) {\n  return [\n    a[0] * b[0] + a[4] * b[1] + a[8] * b[2] + a[12] * b[3],\n    a[1] * b[0] + a[5] * b[1] + a[9] * b[2] + a[13] * b[3],\n    a[2] * b[0] + a[6] * b[1] + a[10] * b[2] + a[14] * b[3],\n    a[3] * b[0] + a[7] * b[1] + a[11] * b[2] + a[15] * b[3],\n\n    a[0] * b[4] + a[4] * b[5] + a[8] * b[6] + a[12] * b[7],\n    a[1] * b[4] + a[5] * b[5] + a[9] * b[6] + a[13] * b[7],\n    a[2] * b[4] + a[6] * b[5] + a[10] * b[6] + a[14] * b[7],\n    a[3] * b[4] + a[7] * b[5] + a[11] * b[6] + a[15] * b[7],\n\n    a[0] * b[8] + a[4] * b[9] + a[8] * b[10] + a[12] * b[11],\n    a[1] * b[8] + a[5] * b[9] + a[9] * b[10] + a[13] * b[11],\n    a[2] * b[8] + a[6] * b[9] + a[10] * b[10] + a[14] * b[11],\n    a[3] * b[8] + a[7] * b[9] + a[11] * b[10] + a[15] * b[11],\n\n    a[0] * b[12] + a[4] * b[13] + a[8] * b[14] + a[12] * b[15],\n    a[1] * b[12] + a[5] * b[13] + a[9] * b[14] + a[13] * b[15],\n    a[2] * b[12] + a[6] * b[13] + a[10] * b[14] + a[14] * b[15],\n    a[3] * b[12] + a[7] * b[13] + a[11] * b[14] + a[15] * b[15],\n  ];\n}\n\nfunction convertToMatrix(transformList: ParsedTransform[]) {\n  if (transformList.length === 0) {\n    return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\n  }\n  return transformList.map(convertItemToMatrix).reduce(multiplyMatrices);\n}\n\nfunction makeMatrixDecomposition(transformList: ParsedTransform[]) {\n  const translate = [0, 0, 0];\n  const scale = [1, 1, 1];\n  const skew = [0, 0, 0];\n  const perspective = [0, 0, 0, 1];\n  const quaternion = [0, 0, 0, 1];\n  decomposeMat4(\n    // @ts-ignore\n    convertToMatrix(transformList),\n    translate,\n    scale,\n    skew,\n    perspective,\n    quaternion,\n  );\n  return [[translate, scale, skew, quaternion, perspective]];\n}\n\nexport const composeMatrix = (function () {\n  function multiply(a, b) {\n    const result = [\n      [0, 0, 0, 0],\n      [0, 0, 0, 0],\n      [0, 0, 0, 0],\n      [0, 0, 0, 0],\n    ];\n    for (let i = 0; i < 4; i++) {\n      for (let j = 0; j < 4; j++) {\n        for (let k = 0; k < 4; k++) {\n          result[i][j] += b[i][k] * a[k][j];\n        }\n      }\n    }\n    return result;\n  }\n\n  function is2D(m) {\n    return (\n      m[0][2] === 0 &&\n      m[0][3] === 0 &&\n      m[1][2] === 0 &&\n      m[1][3] === 0 &&\n      m[2][0] === 0 &&\n      m[2][1] === 0 &&\n      m[2][2] === 1 &&\n      m[2][3] === 0 &&\n      m[3][2] === 0 &&\n      m[3][3] === 1\n    );\n  }\n\n  function composeMatrix(translate, scale, skew, quat, perspective) {\n    let matrix = [\n      [1, 0, 0, 0],\n      [0, 1, 0, 0],\n      [0, 0, 1, 0],\n      [0, 0, 0, 1],\n    ];\n\n    for (let i = 0; i < 4; i++) {\n      matrix[i][3] = perspective[i];\n    }\n\n    for (let i = 0; i < 3; i++) {\n      for (let j = 0; j < 3; j++) {\n        matrix[3][i] += translate[j] * matrix[j][i];\n      }\n    }\n\n    const x = quat[0];\n    const y = quat[1];\n    const z = quat[2];\n    const w = quat[3];\n\n    const rotMatrix = [\n      [1, 0, 0, 0],\n      [0, 1, 0, 0],\n      [0, 0, 1, 0],\n      [0, 0, 0, 1],\n    ];\n\n    rotMatrix[0][0] = 1 - 2 * (y * y + z * z);\n    rotMatrix[0][1] = 2 * (x * y - z * w);\n    rotMatrix[0][2] = 2 * (x * z + y * w);\n    rotMatrix[1][0] = 2 * (x * y + z * w);\n    rotMatrix[1][1] = 1 - 2 * (x * x + z * z);\n    rotMatrix[1][2] = 2 * (y * z - x * w);\n    rotMatrix[2][0] = 2 * (x * z - y * w);\n    rotMatrix[2][1] = 2 * (y * z + x * w);\n    rotMatrix[2][2] = 1 - 2 * (x * x + y * y);\n\n    matrix = multiply(matrix, rotMatrix);\n\n    const temp = [\n      [1, 0, 0, 0],\n      [0, 1, 0, 0],\n      [0, 0, 1, 0],\n      [0, 0, 0, 1],\n    ];\n    if (skew[2]) {\n      temp[2][1] = skew[2];\n      matrix = multiply(matrix, temp);\n    }\n\n    if (skew[1]) {\n      temp[2][1] = 0;\n      temp[2][0] = skew[0];\n      matrix = multiply(matrix, temp);\n    }\n\n    if (skew[0]) {\n      temp[2][0] = 0;\n      temp[1][0] = skew[0];\n      matrix = multiply(matrix, temp);\n    }\n\n    for (let i = 0; i < 3; i++) {\n      for (let j = 0; j < 3; j++) {\n        matrix[i][j] *= scale[i];\n      }\n    }\n\n    if (is2D(matrix)) {\n      return [\n        matrix[0][0],\n        matrix[0][1],\n        matrix[1][0],\n        matrix[1][1],\n        matrix[3][0],\n        matrix[3][1],\n      ];\n    }\n    return matrix[0].concat(matrix[1], matrix[2], matrix[3]);\n  }\n  return composeMatrix;\n})();\n\nfunction numberToLongString(x: number) {\n  return x.toFixed(6).replace('.000000', '');\n}\n\nfunction mergeMatrices(\n  left: ParsedTransform[],\n  right: ParsedTransform[],\n): [number[][], number[][], () => string] {\n  let leftArgs: number[][];\n  let rightArgs: number[][];\n  // @ts-ignore\n  if (left.decompositionPair !== right) {\n    // @ts-ignore\n    left.decompositionPair = right;\n    // @ts-ignore\n    leftArgs = makeMatrixDecomposition(left);\n  }\n  // @ts-ignore\n  if (right.decompositionPair !== left) {\n    // @ts-ignore\n    right.decompositionPair = left;\n    // @ts-ignore\n    rightArgs = makeMatrixDecomposition(right);\n  }\n  if (leftArgs[0] === null || rightArgs[0] === null)\n    return [\n      // @ts-ignore\n      [false],\n      // @ts-ignore\n      [true],\n      // @ts-ignore\n      (x) => {\n        return x ? right[0].d : left[0].d;\n      },\n    ];\n  leftArgs[0].push(0);\n  rightArgs[0].push(1);\n  return [\n    leftArgs,\n    rightArgs,\n    // @ts-ignore\n    (list) => {\n      // @ts-ignore\n      const q = quat(leftArgs[0][3], rightArgs[0][3], list[5]);\n      const mat = composeMatrix(list[0], list[1], list[2], q, list[4]);\n      const stringifiedArgs = mat.map(numberToLongString).join(',');\n      return stringifiedArgs;\n    },\n  ];\n}\n\nfunction dot(v1: number[], v2: number[]) {\n  let result = 0;\n  for (let i = 0; i < v1.length; i++) {\n    result += v1[i] * v2[i];\n  }\n  return result;\n}\n\nfunction quat(fromQ: number[], toQ: number[], f: number): number[] {\n  let product = dot(fromQ, toQ);\n  product = clamp(product, -1.0, 1.0);\n\n  let quat = [];\n  if (product === 1.0) {\n    quat = fromQ;\n  } else {\n    const theta = Math.acos(product);\n    const w = (Math.sin(f * theta) * 1) / Math.sqrt(1 - product * product);\n\n    for (let i = 0; i < 4; i++) {\n      quat.push(fromQ[i] * (Math.cos(f * theta) - product * w) + toQ[i] * w);\n    }\n  }\n  return quat;\n}\n\n// scaleX/Y/Z -> scale\nfunction typeTo2D(type: string) {\n  return type.replace(/[XY]/, '');\n}\n\n// scaleX/Y/Z -> scale3d\nfunction typeTo3D(type: string) {\n  return type.replace(/(X|Y|Z|3d)?$/, '3d');\n}\n\nconst isMatrixOrPerspective = function (lt: string, rt: string) {\n  return (\n    (lt === 'perspective' && rt === 'perspective') ||\n    ((lt === 'matrix' || lt === 'matrix3d') &&\n      (rt === 'matrix' || rt === 'matrix3d'))\n  );\n};\n\nexport function mergeTransforms(\n  left: ParsedTransform[],\n  right: ParsedTransform[],\n  target: DisplayObject | null,\n): [number[][], number[][], (d: number[][]) => string] {\n  let flipResults = false;\n  // padding empty transform, eg. merge 'scale(10)' with 'none' -> scale(1)\n  if (!left.length || !right.length) {\n    if (!left.length) {\n      flipResults = true;\n      left = right;\n      right = [];\n    }\n    for (let i = 0; i < left.length; i++) {\n      const { t: type, d: args } = left[i];\n      // none -> scale(1)/translateX(0)\n      const defaultValue = type.substring(0, 5) === 'scale' ? 1 : 0;\n      right.push({\n        t: type,\n        d: args.map((arg) => {\n          if (typeof arg === 'number') {\n            return getOrCreateUnitValue(defaultValue);\n          }\n          return getOrCreateUnitValue(defaultValue, arg.unit);\n          //   {\n          //     unit: arg.unit,\n          //     value: defaultValue,\n          //   };\n        }),\n      });\n    }\n  }\n\n  let leftResult: number[][] = [];\n  let rightResult: number[][] = [];\n  let types: any = [];\n\n  // merge matrix() with matrix3d()\n  if (left.length !== right.length) {\n    const merged = mergeMatrices(left, right);\n    // @ts-ignore\n    leftResult = [merged[0]];\n    // @ts-ignore\n    rightResult = [merged[1]];\n    types = [['matrix', [merged[2]]]];\n  } else {\n    for (let i = 0; i < left.length; i++) {\n      const leftType = left[i].t as TransformType;\n      const rightType = right[i].t as TransformType;\n      let leftArgs = left[i].d;\n      let rightArgs = right[i].d;\n\n      const leftFunctionData = transformFunctions[leftType];\n      const rightFunctionData = transformFunctions[rightType];\n\n      let type;\n      if (isMatrixOrPerspective(leftType, rightType)) {\n        const merged = mergeMatrices([left[i]], [right[i]]);\n        // @ts-ignore\n        leftResult.push(merged[0]);\n        // @ts-ignore\n        rightResult.push(merged[1]);\n        types.push(['matrix', [merged[2]]]);\n        continue;\n      } else if (leftType === rightType) {\n        type = leftType;\n      } else if (\n        leftFunctionData[2] &&\n        rightFunctionData[2] &&\n        typeTo2D(leftType) === typeTo2D(rightType)\n      ) {\n        type = typeTo2D(leftType);\n        // @ts-ignore\n        leftArgs = leftFunctionData[2](leftArgs);\n        // @ts-ignore\n        rightArgs = rightFunctionData[2](rightArgs);\n      } else if (\n        leftFunctionData[1] &&\n        rightFunctionData[1] &&\n        typeTo3D(leftType) === typeTo3D(rightType)\n      ) {\n        type = typeTo3D(leftType);\n        // @ts-ignore\n        leftArgs = leftFunctionData[1](leftArgs);\n        // @ts-ignore\n        rightArgs = rightFunctionData[1](rightArgs);\n      } else {\n        const merged = mergeMatrices(left, right);\n        // @ts-ignore\n        leftResult = [merged[0]];\n        // @ts-ignore\n        rightResult = [merged[1]];\n        types = [['matrix', [merged[2]]]];\n        break;\n      }\n\n      const leftArgsCopy = [];\n      const rightArgsCopy = [];\n      const stringConversions = [];\n      for (let j = 0; j < leftArgs.length; j++) {\n        // const merge = leftArgs[j].unit === UnitType.kNumber ? mergeDimensions : mergeDimensions;\n        const merged = mergeDimensions(\n          leftArgs[j],\n          rightArgs[j],\n          target,\n          false,\n          j,\n        );\n        leftArgsCopy[j] = merged[0];\n        rightArgsCopy[j] = merged[1];\n        stringConversions.push(merged[2]);\n      }\n      leftResult.push(leftArgsCopy);\n      rightResult.push(rightArgsCopy);\n      types.push([type, stringConversions]);\n    }\n  }\n\n  if (flipResults) {\n    const tmp = leftResult;\n    leftResult = rightResult;\n    rightResult = tmp;\n  }\n\n  return [\n    leftResult,\n    rightResult,\n    (list: number[][]) => {\n      return list\n        .map((args, i: number) => {\n          const stringifiedArgs = args\n            .map((arg, j: number) => {\n              return types[i][1][j](arg);\n            })\n            .join(',');\n          if (\n            types[i][0] === 'matrix' &&\n            stringifiedArgs.split(',').length === 16\n          ) {\n            types[i][0] = 'matrix3d';\n          }\n          if (\n            types[i][0] === 'matrix3d' &&\n            stringifiedArgs.split(',').length === 6\n          ) {\n            types[i][0] = 'matrix';\n          }\n          return `${types[i][0]}(${stringifiedArgs})`;\n        })\n        .join(' ');\n    },\n  ];\n}\n", "import { isString } from '@antv/util';\nimport type { CSSUnitValue } from '../cssom';\nimport { getOrCreateUnitValue } from '../CSSStyleValuePool';\nimport { parseLengthOrPercentage } from './dimension';\nimport { memoize } from '../../utils/memoize';\n\n/**\n * @see https://developer.mozilla.org/zh-CN/docs/Web/CSS/transform-origin\n * eg. 'center' 'top left' '50px 50px'\n */\nexport const parseTransformOrigin = memoize(\n  (value: string | number[]): [CSSUnitValue, CSSUnitValue] => {\n    if (isString(value)) {\n      if (value === 'text-anchor') {\n        return [getOrCreateUnitValue(0, 'px'), getOrCreateUnitValue(0, 'px')];\n      }\n\n      const values = value.split(' ');\n      if (values.length === 1) {\n        if (values[0] === 'top' || values[0] === 'bottom') {\n          // 'top' -> 'center top'\n          values[1] = values[0];\n          values[0] = 'center';\n        } else {\n          // '50px' -> '50px center'\n          values[1] = 'center';\n        }\n      }\n\n      if (values.length !== 2) {\n        return null;\n      }\n\n      // eg. center bottom\n      return [\n        parseLengthOrPercentage(convertKeyword2Percent(values[0])),\n        parseLengthOrPercentage(convertKeyword2Percent(values[1])),\n      ];\n    }\n    return [\n      getOrCreateUnitValue(value[0] || 0, 'px'),\n      getOrCreateUnitValue(value[1] || 0, 'px'),\n    ];\n  },\n);\n\nfunction convertKeyword2Percent(keyword: string) {\n  if (keyword === 'center') {\n    return '50%';\n  }\n  if (keyword === 'left' || keyword === 'top') {\n    return '0%';\n  }\n  if (keyword === 'right' || keyword === 'bottom') {\n    return '100%';\n  }\n  return keyword;\n}\n", "import { isNil, isUndefined } from '@antv/util';\nimport { vec3 } from 'gl-matrix';\nimport type { DisplayObject } from '../display-objects';\nimport { EMPTY_PARSED_PATH } from '../display-objects/constants';\nimport type { GlobalRuntime } from '../global-runtime';\nimport { GeometryAABBUpdater } from '../services';\nimport { AABB } from '../shapes';\nimport type { BaseStyleProps, Tuple3Number } from '../types';\nimport { Shape } from '../types';\nimport type { CSSRGB } from './cssom';\nimport type {\n  PropertyMetadata,\n  PropertyParseOptions,\n  StyleValueRegistry,\n} from './interfaces';\nimport { PropertySyntax } from './interfaces';\nimport {\n  parseColor,\n  parseFilter,\n  parsePath,\n  parsePoints,\n  parseTransform,\n  parseTransformOrigin,\n} from './parser';\nimport {\n  convertPercentUnit,\n  parseDimensionArrayFormat,\n} from './parser/dimension';\n\nexport type CSSGlobalKeywords = 'unset' | 'initial' | 'inherit' | '';\n\n/**\n * Blink used them in code generation(css_properties.json5)\n */\nexport const BUILT_IN_PROPERTIES: PropertyMetadata[] = [\n  {\n    /**\n     * used in CSS Layout API\n     * eg. `display: 'flex'`\n     */\n    n: 'display',\n    k: ['none'],\n  },\n  {\n    /**\n     * range [0.0, 1.0]\n     * @see https://developer.mozilla.org/en-US/docs/Web/CSS/opacity\n     */\n    n: 'opacity',\n    int: true,\n    inh: true,\n    d: '1',\n    syntax: PropertySyntax.OPACITY_VALUE,\n  },\n  {\n    /**\n     * inheritable, range [0.0, 1.0]\n     * @see https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/fill-opacity\n     * @see https://svgwg.org/svg2-draft/painting.html#FillOpacity\n     */\n    n: 'fillOpacity',\n    int: true,\n    inh: true,\n    d: '1',\n    syntax: PropertySyntax.OPACITY_VALUE,\n  },\n  {\n    /**\n     * inheritable, range [0.0, 1.0]\n     * @see https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/stroke-opacity\n     * @see https://svgwg.org/svg2-draft/painting.html#StrokeOpacity\n     */\n    n: 'strokeOpacity',\n    int: true,\n    inh: true,\n    d: '1',\n    syntax: PropertySyntax.OPACITY_VALUE,\n  },\n  {\n    /**\n     * background-color is not inheritable\n     * @see https://developer.mozilla.org/en-US/docs/Web/SVG/Tutorial/Fills_and_Strokes\n     */\n    n: 'fill',\n    int: true,\n    k: ['none'],\n    d: 'none',\n    syntax: PropertySyntax.PAINT,\n  },\n  {\n    n: 'fillRule',\n    k: ['nonzero', 'evenodd'],\n    d: 'nonzero',\n  },\n  /**\n   * default to none\n   * @see https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/stroke#usage_notes\n   */\n  {\n    n: 'stroke',\n    int: true,\n    k: ['none'],\n    d: 'none',\n    syntax: PropertySyntax.PAINT,\n    /**\n     * Stroke 'none' won't affect geometry but others will.\n     */\n    l: true,\n  },\n  {\n    n: 'shadowType',\n    k: ['inner', 'outer', 'both'],\n    d: 'outer',\n    l: true,\n  },\n  {\n    n: 'shadowColor',\n    int: true,\n    syntax: PropertySyntax.COLOR,\n  },\n  {\n    n: 'shadowOffsetX',\n    int: true,\n    l: true,\n    d: '0',\n    syntax: PropertySyntax.LENGTH_PERCENTAGE,\n  },\n  {\n    n: 'shadowOffsetY',\n    int: true,\n    l: true,\n    d: '0',\n    syntax: PropertySyntax.LENGTH_PERCENTAGE,\n  },\n  {\n    n: 'shadowBlur',\n    int: true,\n    l: true,\n    d: '0',\n    syntax: PropertySyntax.SHADOW_BLUR,\n  },\n  {\n    /**\n     * @see https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/stroke-width\n     */\n    n: 'lineWidth',\n    int: true,\n    inh: true,\n    d: '1',\n    l: true,\n    a: ['strokeWidth'],\n    syntax: PropertySyntax.LENGTH_PERCENTAGE,\n  },\n  {\n    n: 'increasedLineWidthForHitTesting',\n    inh: true,\n    d: '0',\n    l: true,\n    syntax: PropertySyntax.LENGTH_PERCENTAGE,\n  },\n  {\n    n: 'lineJoin',\n    inh: true,\n    l: true,\n    a: ['strokeLinejoin'],\n    k: ['miter', 'bevel', 'round'],\n    d: 'miter',\n  },\n  {\n    n: 'lineCap',\n    inh: true,\n    l: true,\n    a: ['strokeLinecap'],\n    k: ['butt', 'round', 'square'],\n    d: 'butt',\n  },\n  {\n    n: 'lineDash',\n    int: true,\n    inh: true,\n    k: ['none'],\n    a: ['strokeDasharray'],\n    syntax: PropertySyntax.LENGTH_PERCENTAGE_12,\n  },\n  {\n    n: 'lineDashOffset',\n    int: true,\n    inh: true,\n    d: '0',\n    a: ['strokeDashoffset'],\n    syntax: PropertySyntax.LENGTH_PERCENTAGE,\n  },\n  {\n    n: 'offsetPath',\n    syntax: PropertySyntax.DEFINED_PATH,\n  },\n  {\n    n: 'offsetDistance',\n    int: true,\n    syntax: PropertySyntax.OFFSET_DISTANCE,\n  },\n  {\n    n: 'dx',\n    int: true,\n    l: true,\n    d: '0',\n    syntax: PropertySyntax.LENGTH_PERCENTAGE,\n  },\n  {\n    n: 'dy',\n    int: true,\n    l: true,\n    d: '0',\n    syntax: PropertySyntax.LENGTH_PERCENTAGE,\n  },\n  {\n    n: 'zIndex',\n    ind: true,\n    int: true,\n    d: '0',\n    k: ['auto'],\n    syntax: PropertySyntax.Z_INDEX,\n  },\n  {\n    n: 'visibility',\n    k: ['visible', 'hidden'],\n    ind: true,\n    inh: true,\n    /**\n     * support interpolation\n     * @see https://developer.mozilla.org/en-US/docs/Web/CSS/visibility#interpolation\n     */\n    int: true,\n    d: 'visible',\n  },\n  {\n    n: 'pointerEvents',\n    inh: true,\n    k: [\n      'none',\n      'auto',\n      'stroke',\n      'fill',\n      'painted',\n      'visible',\n      'visiblestroke',\n      'visiblefill',\n      'visiblepainted',\n      // 'bounding-box',\n      'all',\n    ],\n    d: 'auto',\n  },\n  {\n    n: 'filter',\n    ind: true,\n    l: true,\n    k: ['none'],\n    d: 'none',\n    syntax: PropertySyntax.FILTER,\n  },\n  {\n    n: 'clipPath',\n    syntax: PropertySyntax.DEFINED_PATH,\n  },\n  {\n    n: 'textPath',\n    syntax: PropertySyntax.DEFINED_PATH,\n  },\n  {\n    n: 'textPathSide',\n    k: ['left', 'right'],\n    d: 'left',\n  },\n  {\n    n: 'textPathStartOffset',\n    l: true,\n    d: '0',\n    syntax: PropertySyntax.LENGTH_PERCENTAGE,\n  },\n  {\n    n: 'transform',\n    p: 100,\n    int: true,\n    k: ['none'],\n    d: 'none',\n    syntax: PropertySyntax.TRANSFORM,\n  },\n  {\n    n: 'transformOrigin',\n    p: 100,\n    d: '0 0',\n    // // int: true,\n    // d: (nodeName: string) => {\n    //   if (nodeName === Shape.CIRCLE || nodeName === Shape.ELLIPSE) {\n    //     return 'center';\n    //   }\n    //   if (nodeName === Shape.TEXT) {\n    //     return 'text-anchor';\n    //   }\n    //   return 'left top';\n    // },\n    l: true,\n    syntax: PropertySyntax.TRANSFORM_ORIGIN,\n  },\n  {\n    n: 'cx',\n    int: true,\n    l: true,\n    d: '0',\n    syntax: PropertySyntax.COORDINATE,\n  },\n  {\n    n: 'cy',\n    int: true,\n    l: true,\n    d: '0',\n    syntax: PropertySyntax.COORDINATE,\n  },\n  {\n    n: 'cz',\n    int: true,\n    l: true,\n    d: '0',\n    syntax: PropertySyntax.COORDINATE,\n  },\n  {\n    n: 'r',\n    int: true,\n    l: true,\n    d: '0',\n    syntax: PropertySyntax.LENGTH_PERCENTAGE,\n  },\n  {\n    n: 'rx',\n    int: true,\n    l: true,\n    d: '0',\n    syntax: PropertySyntax.LENGTH_PERCENTAGE,\n  },\n  {\n    n: 'ry',\n    int: true,\n    l: true,\n    d: '0',\n    syntax: PropertySyntax.LENGTH_PERCENTAGE,\n  },\n  // Rect Image Group\n  {\n    // x in local space\n    n: 'x',\n    int: true,\n    l: true,\n    d: '0',\n    syntax: PropertySyntax.COORDINATE,\n  },\n  {\n    // y in local space\n    n: 'y',\n    int: true,\n    l: true,\n    d: '0',\n    syntax: PropertySyntax.COORDINATE,\n  },\n  {\n    // z in local space\n    n: 'z',\n    int: true,\n    l: true,\n    d: '0',\n    syntax: PropertySyntax.COORDINATE,\n  },\n  {\n    n: 'width',\n    int: true,\n    l: true,\n    /**\n     * @see https://developer.mozilla.org/zh-CN/docs/Web/CSS/width\n     */\n    k: ['auto', 'fit-content', 'min-content', 'max-content'],\n    d: '0',\n    syntax: PropertySyntax.LENGTH_PERCENTAGE,\n  },\n  {\n    n: 'height',\n    int: true,\n    l: true,\n    /**\n     * @see https://developer.mozilla.org/zh-CN/docs/Web/CSS/height\n     */\n    k: ['auto', 'fit-content', 'min-content', 'max-content'],\n    d: '0',\n    syntax: PropertySyntax.LENGTH_PERCENTAGE,\n  },\n  {\n    n: 'radius',\n    int: true,\n    l: true,\n    d: '0',\n    syntax: PropertySyntax.LENGTH_PERCENTAGE_14,\n  },\n  // Line\n  {\n    n: 'x1',\n    int: true,\n    l: true,\n    syntax: PropertySyntax.COORDINATE,\n  },\n  {\n    n: 'y1',\n    int: true,\n    l: true,\n    syntax: PropertySyntax.COORDINATE,\n  },\n  {\n    n: 'z1',\n    int: true,\n    l: true,\n    syntax: PropertySyntax.COORDINATE,\n  },\n  {\n    n: 'x2',\n    int: true,\n    l: true,\n    syntax: PropertySyntax.COORDINATE,\n  },\n  {\n    n: 'y2',\n    int: true,\n    l: true,\n    syntax: PropertySyntax.COORDINATE,\n  },\n  {\n    n: 'z2',\n    int: true,\n    l: true,\n    syntax: PropertySyntax.COORDINATE,\n  },\n  // Path\n  {\n    n: 'd',\n    int: true,\n    l: true,\n    d: '',\n    syntax: PropertySyntax.PATH,\n    p: 50,\n  },\n  // Polyline & Polygon\n  {\n    n: 'points',\n    /**\n     * support interpolation\n     */\n    int: true,\n    l: true,\n    syntax: PropertySyntax.LIST_OF_POINTS,\n    p: 50,\n  },\n  // Text\n  {\n    n: 'text',\n    l: true,\n    d: '',\n    syntax: PropertySyntax.TEXT,\n    p: 50,\n  },\n  {\n    n: 'textTransform',\n    l: true,\n    inh: true,\n    k: ['capitalize', 'uppercase', 'lowercase', 'none'],\n    d: 'none',\n    syntax: PropertySyntax.TEXT_TRANSFORM,\n    p: 51, // it must get parsed after text\n  },\n  {\n    n: 'font',\n    l: true,\n  },\n  {\n    n: 'fontSize',\n    int: true,\n    inh: true,\n    /**\n     * @see https://www.w3schools.com/css/css_font_size.asp\n     */\n    d: '16px',\n    l: true,\n    syntax: PropertySyntax.LENGTH_PERCENTAGE,\n  },\n  {\n    n: 'fontFamily',\n    l: true,\n    inh: true,\n    d: 'sans-serif',\n  },\n  {\n    n: 'fontStyle',\n    l: true,\n    inh: true,\n    k: ['normal', 'italic', 'oblique'],\n    d: 'normal',\n  },\n  {\n    n: 'fontWeight',\n    l: true,\n    inh: true,\n    k: ['normal', 'bold', 'bolder', 'lighter'],\n    d: 'normal',\n  },\n  {\n    n: 'fontVariant',\n    l: true,\n    inh: true,\n    k: ['normal', 'small-caps'],\n    d: 'normal',\n  },\n  {\n    n: 'lineHeight',\n    l: true,\n    syntax: PropertySyntax.LENGTH,\n    int: true,\n    d: '0',\n  },\n  {\n    n: 'letterSpacing',\n    l: true,\n    syntax: PropertySyntax.LENGTH,\n    int: true,\n    d: '0',\n  },\n  {\n    n: 'miterLimit',\n    l: true,\n    syntax: PropertySyntax.NUMBER,\n    d: (nodeName: string) => {\n      if (\n        nodeName === Shape.PATH ||\n        nodeName === Shape.POLYGON ||\n        nodeName === Shape.POLYLINE\n      ) {\n        return '4';\n      }\n      return '10';\n    },\n  },\n  {\n    n: 'wordWrap',\n    l: true,\n  },\n  {\n    n: 'wordWrapWidth',\n    l: true,\n  },\n  {\n    n: 'maxLines',\n    l: true,\n  },\n  {\n    n: 'textOverflow',\n    l: true,\n    d: 'clip',\n  },\n  {\n    n: 'leading',\n    l: true,\n  },\n  {\n    n: 'textBaseline',\n    l: true,\n    inh: true,\n    k: ['top', 'hanging', 'middle', 'alphabetic', 'ideographic', 'bottom'],\n    d: 'alphabetic',\n  },\n  {\n    n: 'textAlign',\n    l: true,\n    inh: true,\n    k: ['start', 'center', 'middle', 'end', 'left', 'right'],\n    d: 'start',\n  },\n  // {\n  //   n: 'whiteSpace',\n  //   l: true,\n  // },\n  {\n    n: 'markerStart',\n    syntax: PropertySyntax.MARKER,\n  },\n  {\n    n: 'markerEnd',\n    syntax: PropertySyntax.MARKER,\n  },\n  {\n    n: 'markerMid',\n    syntax: PropertySyntax.MARKER,\n  },\n  {\n    n: 'markerStartOffset',\n    syntax: PropertySyntax.LENGTH,\n    l: true,\n    int: true,\n    d: '0',\n  },\n  {\n    n: 'markerEndOffset',\n    syntax: PropertySyntax.LENGTH,\n    l: true,\n    int: true,\n    d: '0',\n  },\n];\n\nconst GEOMETRY_ATTRIBUTE_NAMES = new Set(\n  BUILT_IN_PROPERTIES.filter((n) => !!n.l).map((n) => n.n),\n);\n\nexport const propertyMetadataCache: Record<string, PropertyMetadata> = {};\n\nexport class DefaultStyleValueRegistry implements StyleValueRegistry {\n  constructor(private runtime: GlobalRuntime) {\n    BUILT_IN_PROPERTIES.forEach((property) => {\n      this.registerMetadata(property);\n    });\n  }\n\n  registerMetadata(metadata: PropertyMetadata) {\n    [metadata.n, ...(metadata.a || [])].forEach((name) => {\n      propertyMetadataCache[name] = metadata;\n    });\n  }\n\n  getPropertySyntax(syntax: string) {\n    return this.runtime.CSSPropertySyntaxFactory[syntax];\n  }\n\n  /**\n   * * parse value, eg.\n   * fill: 'red' => CSSRGB\n   * translateX: '10px' => CSSUnitValue { unit: 'px', value: 10 }\n   * fontSize: '2em' => { unit: 'px', value: 32 }\n   *\n   * * calculate used value\n   * * post process\n   */\n  processProperties(\n    object: DisplayObject,\n    attributes: BaseStyleProps,\n    options: Partial<PropertyParseOptions> = {\n      skipUpdateAttribute: false,\n      skipParse: false,\n      forceUpdateGeometry: false,\n      usedAttributes: [],\n      memoize: true,\n    },\n  ) {\n    Object.assign(object.attributes, attributes);\n\n    // clipPath\n    const oldClipPath = object.parsedStyle.clipPath;\n    const oldOffsetPath = object.parsedStyle.offsetPath;\n\n    assignParsedStyle(object, attributes);\n\n    let needUpdateGeometry = !!options.forceUpdateGeometry;\n    if (!needUpdateGeometry) {\n      for (const i in attributes) {\n        if (GEOMETRY_ATTRIBUTE_NAMES.has(i)) {\n          needUpdateGeometry = true;\n          break;\n        }\n      }\n    }\n\n    const list = getParsedStyleListOf(object);\n\n    if (list.has('fill') && attributes.fill) {\n      object.parsedStyle.fill = parseColor(attributes.fill);\n    }\n    if (list.has('stroke') && attributes.stroke) {\n      object.parsedStyle.stroke = parseColor(attributes.stroke);\n    }\n    if (list.has('shadowColor') && attributes.shadowColor) {\n      object.parsedStyle.shadowColor = parseColor(attributes.shadowColor);\n    }\n    if (list.has('filter') && attributes.filter) {\n      object.parsedStyle.filter = parseFilter(attributes.filter);\n    }\n    // Rect\n    // @ts-ignore\n    if (list.has('radius') && !isNil(attributes.radius)) {\n      // @ts-ignore\n      object.parsedStyle.radius = parseDimensionArrayFormat(\n        // @ts-ignore\n        attributes.radius,\n        4,\n      );\n    }\n    // Polyline\n    if (list.has('lineDash') && !isNil(attributes.lineDash)) {\n      // dom,webgl\n      object.parsedStyle.lineDash = parseDimensionArrayFormat(\n        attributes.lineDash,\n        'even',\n      );\n    }\n    // @ts-ignore\n    if (list.has('points') && attributes.points) {\n      // @ts-ignore\n      object.parsedStyle.points = parsePoints(attributes.points, object);\n    }\n    // Path\n    // @ts-ignore\n    if (list.has('d') && attributes.d === '') {\n      object.parsedStyle.d = {\n        ...EMPTY_PARSED_PATH,\n      };\n    }\n    // @ts-ignore\n    if (list.has('d') && attributes.d) {\n      object.parsedStyle.d = parsePath(\n        // @ts-ignore\n        attributes.d,\n      );\n    }\n    // Text\n    if (list.has('textTransform') && attributes.textTransform) {\n      this.runtime.CSSPropertySyntaxFactory[\n        PropertySyntax.TEXT_TRANSFORM\n      ].calculator(\n        null,\n        null,\n        { value: attributes.textTransform },\n        object,\n        null,\n      );\n    }\n    if (list.has('clipPath') && !isUndefined(attributes.clipPath)) {\n      this.runtime.CSSPropertySyntaxFactory[\n        PropertySyntax.DEFINED_PATH\n      ].calculator(\n        'clipPath',\n        oldClipPath,\n        attributes.clipPath,\n        object,\n        this.runtime,\n      );\n    }\n    if (list.has('offsetPath') && attributes.offsetPath) {\n      this.runtime.CSSPropertySyntaxFactory[\n        PropertySyntax.DEFINED_PATH\n      ].calculator(\n        'offsetPath',\n        oldOffsetPath,\n        attributes.offsetPath,\n        object,\n        this.runtime,\n      );\n    }\n    if (list.has('transform') && attributes.transform) {\n      object.parsedStyle.transform = parseTransform(attributes.transform);\n    }\n    if (list.has('transformOrigin') && attributes.transformOrigin) {\n      object.parsedStyle.transformOrigin = parseTransformOrigin(\n        attributes.transformOrigin,\n      );\n    }\n    // Marker\n    // @ts-ignore\n    if (list.has('markerStart') && attributes.markerStart) {\n      object.parsedStyle.markerStart = this.runtime.CSSPropertySyntaxFactory[\n        PropertySyntax.MARKER\n      ].calculator(\n        null,\n        // @ts-ignore\n        attributes.markerStart,\n        // @ts-ignore\n        attributes.markerStart,\n        null,\n        null,\n      );\n    }\n    // @ts-ignore\n    if (list.has('markerEnd') && attributes.markerEnd) {\n      object.parsedStyle.markerEnd = this.runtime.CSSPropertySyntaxFactory[\n        PropertySyntax.MARKER\n      ].calculator(\n        null,\n        // @ts-ignore\n        attributes.markerEnd,\n        // @ts-ignore\n        attributes.markerEnd,\n        null,\n        null,\n      );\n    }\n    // @ts-ignore\n    if (list.has('markerMid') && attributes.markerMid) {\n      object.parsedStyle.markerMid = this.runtime.CSSPropertySyntaxFactory[\n        PropertySyntax.MARKER\n      ].calculator(\n        '',\n        // @ts-ignore\n        attributes.markerMid,\n        // @ts-ignore\n        attributes.markerMid,\n        null,\n        null,\n      );\n    }\n\n    if (list.has('zIndex') && !isNil(attributes.zIndex)) {\n      this.runtime.CSSPropertySyntaxFactory[\n        PropertySyntax.Z_INDEX\n      ].postProcessor(object);\n    }\n    if (list.has('offsetDistance') && !isNil(attributes.offsetDistance)) {\n      this.runtime.CSSPropertySyntaxFactory[\n        PropertySyntax.OFFSET_DISTANCE\n      ].postProcessor(object);\n    }\n    if (list.has('transform') && attributes.transform) {\n      this.runtime.CSSPropertySyntaxFactory[\n        PropertySyntax.TRANSFORM\n      ].postProcessor(object);\n    }\n    if (list.has('transformOrigin') && attributes.transformOrigin) {\n      this.runtime.CSSPropertySyntaxFactory[\n        PropertySyntax.TRANSFORM_ORIGIN\n      ].postProcessor(object);\n    }\n\n    if (needUpdateGeometry) {\n      object.geometry.dirty = true;\n      object.dirty(true, true);\n\n      if (!options.forceUpdateGeometry) {\n        this.runtime.sceneGraphService.dirtyToRoot(object);\n      }\n    }\n  }\n\n  /**\n   * update geometry when relative props changed,\n   * eg. r of Circle, width/height of Rect\n   */\n  updateGeometry(object: DisplayObject) {\n    const { nodeName } = object;\n    const geometryUpdater = this.runtime.geometryUpdaterFactory[\n      nodeName\n    ] as GeometryAABBUpdater;\n    if (geometryUpdater) {\n      const { geometry } = object;\n      if (!geometry.contentBounds) {\n        geometry.contentBounds = new AABB();\n      }\n      if (!geometry.renderBounds) {\n        geometry.renderBounds = new AABB();\n      }\n      const parsedStyle = object.parsedStyle;\n      const {\n        cx = 0,\n        cy = 0,\n        cz = 0,\n        hwidth = 0,\n        hheight = 0,\n        hdepth = 0,\n      } = geometryUpdater.update(parsedStyle, object);\n      // init with content box\n      const halfExtents: Tuple3Number = [\n        Math.abs(hwidth),\n        Math.abs(hheight),\n        hdepth,\n      ];\n      // anchor is center by default, don't account for lineWidth here\n      const {\n        stroke,\n        lineWidth = 1,\n        // lineCap,\n        // lineJoin,\n        // miterLimit,\n        increasedLineWidthForHitTesting = 0,\n        shadowType = 'outer',\n        shadowColor,\n        filter = [],\n        transformOrigin,\n      } = parsedStyle;\n      const center: Tuple3Number = [cx, cy, cz];\n      // update geometry's AABB\n      geometry.contentBounds.update(center, halfExtents);\n      // @see https://github.molgen.mpg.de/git-mirror/cairo/blob/master/src/cairo-stroke-style.c#L97..L128\n      const expansion =\n        nodeName === Shape.POLYLINE ||\n        nodeName === Shape.POLYGON ||\n        nodeName === Shape.PATH\n          ? Math.SQRT2\n          : 0.5;\n      // append border only if stroke existed\n      const hasStroke = stroke && !(stroke as CSSRGB).isNone;\n      if (hasStroke) {\n        const halfLineWidth =\n          ((lineWidth || 0) + (increasedLineWidthForHitTesting || 0)) *\n          expansion;\n        halfExtents[0] += halfLineWidth;\n        halfExtents[1] += halfLineWidth;\n      }\n      geometry.renderBounds.update(center, halfExtents);\n      // account for shadow, only support constant value now\n      if (shadowColor && shadowType && shadowType !== 'inner') {\n        const { min, max } = geometry.renderBounds;\n        const { shadowBlur, shadowOffsetX, shadowOffsetY } = parsedStyle;\n        const shadowBlurInPixels = shadowBlur || 0;\n        const shadowOffsetXInPixels = shadowOffsetX || 0;\n        const shadowOffsetYInPixels = shadowOffsetY || 0;\n        const shadowLeft = min[0] - shadowBlurInPixels + shadowOffsetXInPixels;\n        const shadowRight = max[0] + shadowBlurInPixels + shadowOffsetXInPixels;\n        const shadowTop = min[1] - shadowBlurInPixels + shadowOffsetYInPixels;\n        const shadowBottom =\n          max[1] + shadowBlurInPixels + shadowOffsetYInPixels;\n        min[0] = Math.min(min[0], shadowLeft);\n        max[0] = Math.max(max[0], shadowRight);\n        min[1] = Math.min(min[1], shadowTop);\n        max[1] = Math.max(max[1], shadowBottom);\n        geometry.renderBounds.setMinMax(min, max);\n      }\n      // account for filter, eg. blur(5px), drop-shadow()\n      filter.forEach(({ name, params }) => {\n        if (name === 'blur') {\n          const blurRadius = params[0].value;\n          geometry.renderBounds.update(\n            geometry.renderBounds.center,\n            vec3.add(\n              geometry.renderBounds.halfExtents,\n              geometry.renderBounds.halfExtents,\n              [blurRadius, blurRadius, 0],\n            ) as Tuple3Number,\n          );\n        } else if (name === 'drop-shadow') {\n          const shadowOffsetX = params[0].value;\n          const shadowOffsetY = params[1].value;\n          const shadowBlur = params[2].value;\n          const { min, max } = geometry.renderBounds;\n          const shadowLeft = min[0] - shadowBlur + shadowOffsetX;\n          const shadowRight = max[0] + shadowBlur + shadowOffsetX;\n          const shadowTop = min[1] - shadowBlur + shadowOffsetY;\n          const shadowBottom = max[1] + shadowBlur + shadowOffsetY;\n          min[0] = Math.min(min[0], shadowLeft);\n          max[0] = Math.max(max[0], shadowRight);\n          min[1] = Math.min(min[1], shadowTop);\n          max[1] = Math.max(max[1], shadowBottom);\n          geometry.renderBounds.setMinMax(min, max);\n        }\n      });\n\n      object.geometry.dirty = false;\n\n      // @see https://github.com/antvis/g/issues/957\n      const flipY = hwidth < 0;\n      const flipX = hheight < 0;\n      // set transform origin\n      const usedOriginXValue =\n        (flipY ? -1 : 1) *\n        (transformOrigin\n          ? convertPercentUnit(transformOrigin[0], 0, object, true)\n          : 0);\n      const usedOriginYValue =\n        (flipX ? -1 : 1) *\n        (transformOrigin\n          ? convertPercentUnit(transformOrigin[1], 1, object, true)\n          : 0);\n\n      if (usedOriginXValue || usedOriginYValue) {\n        object.setOrigin(usedOriginXValue, usedOriginYValue);\n      }\n    }\n  }\n\n  updateSizeAttenuation(node: DisplayObject, zoom: number) {\n    if (node.style.isSizeAttenuation) {\n      if (!node.style.rawLineWidth) {\n        node.style.rawLineWidth = node.style.lineWidth;\n      }\n      node.style.lineWidth = (node.style.rawLineWidth || 1) / zoom;\n\n      if (node.nodeName === Shape.CIRCLE) {\n        if (!node.style.rawR) {\n          node.style.rawR = node.style.r;\n        }\n        node.style.r = (node.style.rawR || 1) / zoom;\n      }\n    } else {\n      if (node.style.rawLineWidth) {\n        node.style.lineWidth = node.style.rawLineWidth;\n        delete node.style.rawLineWidth;\n      }\n      if (node.nodeName === Shape.CIRCLE) {\n        if (node.style.rawR) {\n          node.style.r = node.style.rawR;\n          delete node.style.rawR;\n        }\n      }\n    }\n  }\n}\n\nfunction assignParsedStyle(\n  object: DisplayObject,\n  attributes: Record<string, any>,\n) {\n  const list = getParsedStyleListOf(object);\n  for (const key in attributes) {\n    if (list.has(key)) {\n      object.parsedStyle[key] = attributes[key];\n    }\n  }\n}\n\nfunction getParsedStyleListOf(object: DisplayObject) {\n  return (object.constructor as typeof DisplayObject).PARSED_STYLE_LIST;\n}\n", "import type { DisplayObject } from '../../display-objects';\nimport type { CSSUnitValue } from '../cssom';\nimport type { CSSProperty } from '../CSSProperty';\nimport { mergeNumbers } from '../parser';\nimport { convertAngleUnit } from '../parser/dimension';\n\nexport class CSSPropertyAngle\n  implements Partial<CSSProperty<CSSUnitValue, number>>\n{\n  mixer = mergeNumbers;\n\n  calculator(\n    name: string,\n    oldParsed: CSSUnitValue,\n    parsed: CSSUnitValue,\n    object: DisplayObject,\n  ) {\n    return convertAngleUnit(parsed);\n  }\n}\n", "import type { DisplayObject } from '../../display-objects';\nimport type { GlobalRuntime } from '../../global-runtime';\nimport type { CSSProperty } from '../CSSProperty';\nimport { CSSKeywordValue } from '../cssom';\n\n/**\n * clipPath / textPath / offsetPath\n */\nexport class CSSPropertyClipPath\n  implements Partial<CSSProperty<DisplayObject, DisplayObject>>\n{\n  calculator(\n    name: string,\n    oldPath: DisplayObject,\n    newPath: DisplayObject,\n    object: DisplayObject,\n    runtime: GlobalRuntime,\n  ) {\n    // unset\n    if (newPath instanceof CSSKeywordValue) {\n      newPath = null;\n    }\n\n    runtime.sceneGraphService.updateDisplayObjectDependency(\n      name,\n      oldPath,\n      newPath,\n      object,\n    );\n\n    if (name === 'clipPath') {\n      // should affect children\n      object.forEach((leaf) => {\n        if (leaf.childNodes.length === 0) {\n          runtime.sceneGraphService.dirtyToRoot(leaf);\n        }\n      });\n    }\n\n    return newPath;\n  }\n}\n", "import type { DisplayObject } from '../../display-objects';\nimport type { CSSGradientValue, CSSRGB } from '../cssom';\nimport { CSSKeywordValue } from '../cssom';\nimport type { CSSProperty } from '../CSSProperty';\nimport { noneColor, transparentColor } from '../CSSStyleValuePool';\nimport type { Pattern } from '../parser/color';\nimport { mergeColors, parseColor } from '../parser/color';\n\nexport class CSSPropertyColor\n  implements\n    Partial<\n      CSSProperty<\n        CSSRGB | CSSGradientValue[] | Pattern | CSSKeywordValue,\n        CSSRGB | CSSGradientValue[] | Pattern\n      >\n    >\n{\n  parser = parseColor;\n  calculator(\n    name: string,\n    oldParsed: CSSRGB | CSSGradientValue[] | CSSKeywordValue | Pattern,\n    parsed: CSSRGB | CSSGradientValue[] | CSSKeywordValue | Pattern,\n    object: DisplayObject,\n  ) {\n    if (parsed instanceof CSSKeywordValue) {\n      // 'unset' 'none'\n      return parsed.value === 'none' ? noneColor : transparentColor;\n    }\n    return parsed;\n  }\n\n  mixer = mergeColors;\n}\n", "import { CSSKeywordValue } from '../cssom';\nimport type { CSSProperty } from '../CSSProperty';\nimport type { ParsedFilterStyleProperty } from '../parser';\n\nexport class CSSPropertyFilter\n  implements\n    Partial<\n      CSSProperty<ParsedFilterStyleProperty[], ParsedFilterStyleProperty[]>\n    >\n{\n  calculator(\n    name: string,\n    oldParsed: ParsedFilterStyleProperty[],\n    parsed: ParsedFilterStyleProperty[],\n  ) {\n    // unset or none\n    if (parsed instanceof CSSKeywordValue) {\n      return [];\n    }\n    return parsed;\n  }\n}\n", "import { isNil, isNumber } from '@antv/util';\nimport type {\n  DisplayObject,\n  ParsedTextStyleProps,\n} from '../../display-objects';\nimport type { GlobalRuntime } from '../../global-runtime';\nimport type { CSSProperty } from '../CSSProperty';\nimport { CSSUnitValue, UnitType } from '../cssom';\nimport { mergeNumbers } from '../parser';\n\nfunction getFontSize(object: DisplayObject): number {\n  const { fontSize } = object.parsedStyle as ParsedTextStyleProps;\n  return isNil(fontSize) ? null : fontSize;\n}\n\n/**\n * <length> & <percentage>\n */\nexport class CSSPropertyLengthOrPercentage\n  implements Partial<CSSProperty<CSSUnitValue, number>>\n{\n  mixer = mergeNumbers;\n\n  /**\n   * according to parent's bounds\n   *\n   * @example\n   * CSS.percent(50) -> CSS.px(0.5 * parent.width)\n   */\n  calculator(\n    name: string,\n    oldParsed: CSSUnitValue,\n    computed: CSSUnitValue,\n    object: DisplayObject,\n    runtime: GlobalRuntime,\n  ): number {\n    if (isNumber(computed)) {\n      return computed;\n    }\n\n    if (CSSUnitValue.isRelativeUnit(computed.unit)) {\n      if (computed.unit === UnitType.kPercentage) {\n        // TODO: merge dimensions\n        return 0;\n      }\n      if (computed.unit === UnitType.kEms) {\n        if (object.parentNode) {\n          let fontSize = getFontSize(object.parentNode as DisplayObject);\n          if (fontSize) {\n            fontSize *= computed.value;\n            return fontSize;\n          }\n        }\n        return 0;\n      }\n      if (computed.unit === UnitType.kRems) {\n        if (object?.ownerDocument?.documentElement) {\n          let fontSize = getFontSize(\n            object.ownerDocument.documentElement as DisplayObject,\n          );\n\n          if (fontSize) {\n            fontSize *= computed.value;\n            return fontSize;\n          }\n        }\n        return 0;\n      }\n    } else {\n      // remove listener if exists\n      // registry.unregisterParentGeometryBoundsChangedHandler(object, name);\n\n      // return absolute value\n      return computed.value;\n    }\n  }\n}\n", "import type { CSSUnitValue } from '../cssom';\nimport type { CSSProperty } from '../CSSProperty';\nimport { mergeNumberLists } from '../parser';\n\n/**\n * format to Tuple2<CSSUnitValue>\n *\n * @example\n * rect.style.lineDash = 10;\n * rect.style.lineDash = [10, 10];\n * rect.style.lineDash = '10 10';\n */\nexport class CSSPropertyLengthOrPercentage12\n  implements\n    Partial<CSSProperty<[CSSUnitValue, CSSUnitValue], [number, number]>>\n{\n  calculator(\n    name: string,\n    oldParsed: [CSSUnitValue, CSSUnitValue],\n    computed: [CSSUnitValue, CSSUnitValue],\n  ): [number, number] {\n    return computed.map((c) => c.value) as [number, number];\n  }\n\n  mixer = mergeNumberLists;\n}\n", "import type { CSSUnitValue } from '../cssom';\nimport type { CSSProperty } from '../CSSProperty';\nimport { mergeNumberLists } from '../parser';\n\n/**\n * used in rounded rect\n *\n * @example\n * rect.style.radius = 10;\n * rect.style.radius = '10 10';\n * rect.style.radius = '10 10 10 10';\n */\nexport class CSSPropertyLengthOrPercentage14\n  implements\n    Partial<\n      CSSProperty<\n        [CSSUnitValue, CSSUnitValue, CSSUnitValue, CSSUnitValue],\n        [number, number, number, number]\n      >\n    >\n{\n  calculator(\n    name: string,\n    oldParsed: [CSSUnitValue, CSSUnitValue, CSSUnitValue, CSSUnitValue],\n    computed: [CSSUnitValue, CSSUnitValue, CSSUnitValue, CSSUnitValue],\n  ): [number, number, number, number] {\n    return computed.map((c) => c.value) as [number, number, number, number];\n  }\n\n  mixer = mergeNumberLists;\n}\n", "import type { DisplayObject } from '../../display-objects';\nimport { CSSKeywordValue } from '../cssom';\nimport type { CSSProperty } from '../CSSProperty';\n\nexport class CSSPropertyMarker\n  implements Partial<CSSProperty<DisplayObject, DisplayObject>>\n{\n  calculator(\n    name: string,\n    oldMarker: DisplayObject,\n    newMarker: DisplayObject,\n    object: DisplayObject,\n  ) {\n    // unset\n    if (newMarker instanceof CSSKeywordValue) {\n      newMarker = null;\n    }\n\n    const cloned = newMarker?.cloneNode(true);\n    if (cloned) {\n      // FIXME: SVG should not inherit parent's style, add a flag here\n      cloned.style.isMarker = true;\n    }\n\n    return cloned;\n  }\n}\n", "import type { CSSUnitValue } from '../cssom';\nimport type { CSSProperty } from '../CSSProperty';\nimport { mergeNumbers } from '../parser/numeric';\n\nexport class CSSPropertyNumber\n  implements Partial<CSSProperty<CSSUnitValue, number>>\n{\n  mixer = mergeNumbers;\n  calculator(\n    name: string,\n    oldParsed: CSSUnitValue,\n    computed: CSSUnitValue,\n  ): number {\n    return computed.value;\n  }\n}\n", "import { Shape } from '../../types';\nimport type { DisplayObject } from '../../display-objects';\nimport type { CSSUnitValue } from '../cssom';\nimport type { CSSProperty } from '../CSSProperty';\nimport { clampedMergeNumbers } from '../parser/numeric';\n\nexport class CSSPropertyOffsetDistance\n  implements Partial<CSSProperty<CSSUnitValue, number>>\n{\n  calculator(\n    name: string,\n    oldParsed: CSSUnitValue,\n    computed: CSSUnitValue,\n  ): number {\n    return computed.value;\n  }\n\n  mixer = clampedMergeNumbers(0, 1);\n\n  postProcessor(object: DisplayObject) {\n    const { offsetPath, offsetDistance } = object.parsedStyle;\n    if (!offsetPath) {\n      return;\n    }\n\n    const { nodeName } = offsetPath;\n    if (\n      nodeName === Shape.LINE ||\n      nodeName === Shape.PATH ||\n      nodeName === Shape.POLYLINE\n    ) {\n      // set position in world space\n      const point = offsetPath.getPoint(offsetDistance);\n      if (point) {\n        object.setLocalPosition(point.x, point.y);\n      }\n    }\n  }\n}\n", "import type { CSSUnitValue } from '../cssom';\nimport type { CSSProperty } from '../CSSProperty';\nimport { clampedMergeNumbers } from '../parser/numeric';\n\n/**\n * opacity\n */\nexport class CSSPropertyOpacity\n  implements Partial<CSSProperty<CSSUnitValue, number>>\n{\n  calculator(\n    name: string,\n    oldParsed: CSSUnitValue,\n    computed: CSSUnitValue,\n  ): number {\n    return computed.value;\n  }\n\n  mixer = clampedMergeNumbers(0, 1);\n}\n", "import type { AbsoluteArray } from '@antv/util';\nimport type { ParsedPathStyleProps } from '../../display-objects';\nimport { Rectangle } from '../../shapes';\nimport { CSSKeywordValue } from '../cssom';\nimport type { CSSProperty } from '../CSSProperty';\nimport { mergePaths, parsePath } from '../parser/path';\n\nexport class CSSPropertyPath\n  implements\n    Partial<CSSProperty<ParsedPathStyleProps['d'], ParsedPathStyleProps['d']>>\n{\n  /**\n   * path2Curve\n   */\n  parser = parsePath;\n\n  calculator(\n    name: string,\n    oldParsed: ParsedPathStyleProps['d'],\n    parsed: ParsedPathStyleProps['d'],\n  ) {\n    // unset\n    if (parsed instanceof CSSKeywordValue && parsed.value === 'unset') {\n      return {\n        absolutePath: [] as unknown as AbsoluteArray,\n        hasArc: false,\n        segments: [],\n        polygons: [],\n        polylines: [],\n        curve: null,\n        totalLength: 0,\n        rect: new Rectangle(0, 0, 0, 0),\n      };\n    }\n\n    return parsed;\n  }\n\n  mixer = mergePaths;\n}\n", "import type { CSSProperty } from '../CSSProperty';\nimport { mergePoints } from '../parser/points';\n\nexport class CSSPropertyPoints\n  implements\n    Partial<\n      CSSProperty<\n        {\n          points: [number, number][];\n          totalLength: number;\n          segments: [number, number][];\n        },\n        {\n          points: [number, number][];\n          totalLength: number;\n          segments: [number, number][];\n        }\n      >\n    >\n{\n  mixer = mergePoints;\n}\n", "import { clampedMergeNumbers } from '../parser/numeric';\nimport { CSSPropertyLengthOrPercentage } from './CSSPropertyLengthOrPercentage';\n\nexport class CSSPropertyShadowBlur extends CSSPropertyLengthOrPercentage {\n  mixer = clampedMergeNumbers(0, Infinity);\n}\n", "import type { DisplayObject } from '../../display-objects';\nimport { CSSKeywordValue } from '../cssom';\nimport type { CSSProperty } from '../CSSProperty';\n\nexport class CSSPropertyText\n  implements Partial<CSSProperty<CSSKeywordValue | string, string>>\n{\n  calculator(\n    name: string,\n    oldParsed: CSSKeywordValue | string,\n    parsed: CSSKeywordValue | string,\n    object: DisplayObject,\n  ) {\n    if (parsed instanceof CSSKeywordValue) {\n      if (parsed.value === 'unset') {\n        return '';\n      }\n      return parsed.value;\n    }\n\n    // allow number as valid text content\n    return `${parsed}`;\n  }\n\n  postProcessor(object: DisplayObject) {\n    object.nodeValue = `${object.parsedStyle.text}` || '';\n  }\n}\n", "import type { TextTransform } from '../..';\nimport type { DisplayObject } from '../../display-objects';\nimport type { CSSKeywordValue } from '../cssom';\nimport type { CSSProperty } from '../CSSProperty';\n\n/**\n * it must transform after text get parsed\n * @see https://developer.mozilla.org/zh-CN/docs/Web/CSS/text-transform\n */\nexport class CSSPropertyTextTransform\n  implements Partial<CSSProperty<CSSKeywordValue, TextTransform>>\n{\n  calculator(\n    name: string,\n    oldParsed: CSSKeywordValue,\n    parsed: CSSKeywordValue,\n    object: DisplayObject,\n  ) {\n    const rawText = object.getAttribute('text');\n    if (rawText) {\n      let transformedText = rawText;\n      if (parsed.value === 'capitalize') {\n        transformedText = rawText.charAt(0).toUpperCase() + rawText.slice(1);\n      } else if (parsed.value === 'lowercase') {\n        transformedText = rawText.toLowerCase();\n      } else if (parsed.value === 'uppercase') {\n        transformedText = rawText.toUpperCase();\n      }\n\n      object.parsedStyle.text = transformedText;\n    }\n\n    return parsed.value as TextTransform;\n  }\n}\n", "export const definedProps = (obj: Record<string, unknown>) =>\n  Object.fromEntries(Object.entries(obj).filter(([, v]) => v !== undefined));\n", "import type { Canvas } from '../Canvas';\n\nconst CANVAS_Map = new WeakMap<Element, Canvas>();\n\n/**\n * destroy existed canvas with the same id\n */\nexport function cleanExistedCanvas(\n  container: string | HTMLElement,\n  canvas: Canvas,\n  cleanUp?: boolean,\n) {\n  if (container) {\n    const $dom =\n      typeof container === 'string'\n        ? document.getElementById(container)\n        : container;\n    if (CANVAS_Map.has($dom)) CANVAS_Map.get($dom).destroy(cleanUp);\n    CANVAS_Map.set($dom, canvas);\n  }\n}\n\nexport const isBrowser =\n  typeof window !== 'undefined' && typeof window.document !== 'undefined';\n", "import type { DisplayObject } from '../display-objects';\nimport type { IElement, IEventTarget, INode } from '../dom';\nimport type { CanvasLike } from '../types';\nimport { isBrowser } from './canvas';\n\nexport function isElement(\n  target: IEventTarget | INode | IElement,\n): target is IElement {\n  return !!(target as IElement).getAttribute;\n}\n\nexport function sortedIndex(array: IElement[], value: IElement) {\n  let low = 0;\n  let high = array.length;\n\n  while (low < high) {\n    const mid = (low + high) >>> 1;\n    if (sortByZIndex(array[mid], value) < 0) {\n      low = mid + 1;\n    } else {\n      high = mid;\n    }\n  }\n  return low;\n}\n\nexport function sortByZIndex(o1: IElement, o2: IElement) {\n  const zIndex1 = Number(o1.parsedStyle.zIndex || 0);\n  const zIndex2 = Number(o2.parsedStyle.zIndex || 0);\n  if (zIndex1 === zIndex2) {\n    const parent = o1.parentNode;\n    if (parent) {\n      const children = parent.childNodes || [];\n      return children.indexOf(o1) - children.indexOf(o2);\n    }\n  }\n  return zIndex1 - zIndex2;\n}\n\nexport function findClosestClipPathTarget(\n  object: DisplayObject,\n): DisplayObject {\n  let el = object;\n  do {\n    const clipPath = el.parsedStyle?.clipPath;\n    if (clipPath) return el;\n    el = el.parentElement as DisplayObject;\n  } while (el !== null);\n  return null;\n}\n\nconst PX_SUFFIX = 'px';\nexport function setDOMSize($el: CanvasLike, width: number, height: number) {\n  if (isBrowser && ($el as unknown as HTMLElement).style) {\n    ($el as unknown as HTMLElement).style.width = width + PX_SUFFIX;\n    ($el as unknown as HTMLElement).style.height = height + PX_SUFFIX;\n  }\n}\n\nexport function getStyle($el: HTMLElement | CanvasLike, property: string) {\n  if (isBrowser) {\n    return document.defaultView\n      .getComputedStyle($el as Element, null)\n      .getPropertyValue(property);\n  }\n}\n\nexport function getWidth($el: HTMLElement | CanvasLike) {\n  const width = getStyle($el, 'width');\n  if (width === 'auto') {\n    return ($el as HTMLElement).offsetWidth;\n  }\n  return parseFloat(width);\n}\n\nexport function getHeight($el: HTMLElement | CanvasLike) {\n  const height = getStyle($el, 'height');\n  if (height === 'auto') {\n    return ($el as HTMLElement).offsetHeight;\n  }\n  return parseFloat(height);\n}\n", "// borrow from hammer.js\nexport const MOUSE_POINTER_ID = 1;\nexport const TOUCH_TO_POINTER: Record<string, string> = {\n  touchstart: 'pointerdown',\n  touchend: 'pointerup',\n  touchendoutside: 'pointerupoutside',\n  touchmove: 'pointermove',\n  touchcancel: 'pointercancel',\n};\n\nexport interface FormattedPointerEvent extends PointerEvent {\n  isPrimary: boolean;\n  width: number;\n  height: number;\n  tiltX: number;\n  tiltY: number;\n  pointerType: string;\n  pointerId: number;\n  pressure: number;\n  twist: number;\n  tangentialPressure: number;\n  isNormalized: boolean;\n  type: string;\n}\n\nexport interface FormattedTouch extends Touch {\n  button: number;\n  buttons: number;\n  isPrimary: boolean;\n  width: number;\n  height: number;\n  tiltX: number;\n  tiltY: number;\n  pointerType: string;\n  pointerId: number;\n  pressure: number;\n  twist: number;\n  tangentialPressure: number;\n  layerY: number;\n  offsetX: number;\n  offsetY: number;\n  isNormalized: boolean;\n  type: string;\n}\n\nexport const clock =\n  typeof performance === 'object' && performance.now ? performance : Date;\n", "import { INode } from '../dom';\nimport { Shape } from '../types';\n\nexport function isInFragment(node: INode) {\n  if (node.nodeName === Shape.FRAGMENT) return true;\n  return node.getRootNode().nodeName === Shape.FRAGMENT;\n}\n", "import type { CSSRGB } from '../css';\nimport type { ParsedBaseStyleProps } from '../types';\n\nexport function isFillOrStrokeAffected(\n  pointerEvents: ParsedBaseStyleProps['pointerEvents'] = 'auto',\n  fill: ParsedBaseStyleProps['fill'],\n  stroke: ParsedBaseStyleProps['stroke'],\n): [boolean, boolean] {\n  // account for pointerEvents\n  // @see https://developer.mozilla.org/en-US/docs/Web/CSS/pointer-events\n\n  let hasFill = false;\n  let hasStroke = false;\n  const isFillOtherThanNone = !!fill && !(fill as CSSRGB).isNone;\n  const isStrokeOtherThanNone = !!stroke && !(stroke as CSSRGB).isNone;\n  if (\n    pointerEvents === 'visiblepainted' ||\n    pointerEvents === 'painted' ||\n    pointerEvents === 'auto'\n  ) {\n    hasFill = isFillOtherThanNone;\n    hasStroke = isStrokeOtherThanNone;\n  } else if (pointerEvents === 'visiblefill' || pointerEvents === 'fill') {\n    hasFill = true;\n  } else if (pointerEvents === 'visiblestroke' || pointerEvents === 'stroke') {\n    hasStroke = true;\n  } else if (pointerEvents === 'visible' || pointerEvents === 'all') {\n    // The values of the fill and stroke do not affect event processing.\n    hasFill = true;\n    hasStroke = true;\n  }\n\n  return [hasFill, hasStroke];\n}\n", "/**\n * Thanks for following contributor of codes\n * https://gist.github.com/1866474\n * http://paulirish.com/2011/requestanimationframe-for-smart-animating/\n * http://my.opera.com/emoller/blog/2011/12/20/requestanimationframe-for-smart-er-animating\n * https://github.com/Financial-Times/polyfill-library/blob/master/polyfills/requestAnimationFrame/polyfill.js\n * */\n\nlet uId = 1;\nconst uniqueId = () => uId++;\n\n// We use `self` instead of `window` for `WebWorker` support.\nexport const root: any =\n  // eslint-disable-next-line no-nested-ternary\n  typeof self === 'object' && self.self === self\n    ? self\n    : // @ts-ignore\n      typeof global === 'object' && global.global === global\n      ? // @ts-ignore\n        global\n      : {};\n\nconst nowOffset = Date.now();\n\n// use performance api if exist, otherwise use Date.now.\n// Date.now polyfill required.\nexport const pnow = (): number => {\n  if (root.performance && typeof root.performance.now === 'function') {\n    return root.performance.now();\n  }\n\n  // fallback\n  return Date.now() - nowOffset;\n};\n\ninterface IReservedCBs {\n  [key: string]: (...args: any[]) => any;\n}\nlet reservedCBs: IReservedCBs = {};\n\nlet lastTime = Date.now();\n\nconst polyfillRaf = (callback: (...args: any[]) => any) => {\n  if (typeof callback !== 'function') {\n    throw new TypeError(`${callback} is not a function`);\n  }\n\n  const currentTime = Date.now();\n  const gap = currentTime - lastTime;\n  const delay = gap > 16 ? 0 : 16 - gap;\n\n  const id = uniqueId();\n  reservedCBs[id] = callback;\n\n  // keys(reservedCBs).length > 1   setTimeout   .\n  //  callback     reservedCBs   return\n  if (Object.keys(reservedCBs).length > 1) return id;\n\n  setTimeout(() => {\n    lastTime = currentTime;\n    const copied = reservedCBs;\n    reservedCBs = {};\n\n    Object.keys(copied).forEach((key: string) => copied[key](pnow()));\n  }, delay);\n\n  return id;\n};\n\nconst polyfillCaf = (id: number) => {\n  delete reservedCBs[id];\n};\n\nconst vendorPrefixes = ['', 'webkit', 'moz', 'ms', 'o'];\n\nconst getRequestAnimationFrame = (\n  vp: string | void,\n): typeof requestAnimationFrame => {\n  if (typeof vp !== 'string') return polyfillRaf;\n  if (vp === '') return root.requestAnimationFrame;\n  return root[`${vp}RequestAnimationFrame`];\n};\n\nconst getCancelAnimationFrame = (\n  vp: string | void,\n): typeof cancelAnimationFrame => {\n  if (typeof vp !== 'string') return polyfillCaf;\n  if (vp === '') return root.cancelAnimationFrame;\n  return (\n    root[`${vp}CancelAnimationFrame`] ||\n    root[`${vp}CancelRequestAnimationFrame`]\n  );\n};\n\nconst find = (arr: any[], predicate: (...args: any[]) => any) => {\n  let i = 0;\n  while (arr[i] !== undefined) {\n    if (predicate(arr[i])) return arr[i];\n\n    i += 1;\n  }\n};\n\nconst vp = find(vendorPrefixes, (vp: string) => !!getRequestAnimationFrame(vp));\n\nexport const raf = getRequestAnimationFrame(vp);\nexport const caf = getCancelAnimationFrame(vp);\n\nroot.requestAnimationFrame = raf;\nroot.cancelAnimationFrame = caf;\n", "export class AsyncParallelHook<T> {\n  private callbacks: ((...args: T[]) => Promise<void>)[] = [];\n\n  getCallbacksNum() {\n    return this.callbacks.length;\n  }\n\n  tapPromise(options: string, fn: (...args: T[]) => Promise<void>) {\n    this.callbacks.push(fn);\n  }\n\n  promise(...args: T[]): Promise<void[]> {\n    return Promise.all(\n      this.callbacks.map((callback) => {\n        return callback(...args);\n      }),\n    );\n  }\n}\n", "import type { AsArray } from './Hook';\n\nexport class AsyncSeriesWaterfallHook<T, R> {\n  private callbacks: ((...args: AsArray<T>) => Promise<R>)[] = [];\n\n  tapPromise(options: string, fn: (...args: AsArray<T>) => Promise<R>) {\n    this.callbacks.push(fn);\n  }\n\n  async promise(...args: AsArray<T>): Promise<R> {\n    if (this.callbacks.length) {\n      let result: R = await this.callbacks[0](...args);\n      for (let i = 0; i < this.callbacks.length - 1; i++) {\n        const callback = this.callbacks[i];\n        // @ts-ignore\n        // eslint-disable-next-line no-await-in-loop\n        result = await callback(result);\n      }\n\n      return result;\n    }\n\n    return null;\n  }\n}\n", "import type { AsArray } from './Hook';\n\nexport class SyncHook<T, R = void> {\n  private callbacks: ((...args: AsArray<T>) => R)[] = [];\n\n  tap(options: string, fn: (...args: AsArray<T>) => R) {\n    this.callbacks.push(fn);\n  }\n\n  call(...args: AsArray<T>): void {\n    /* eslint-disable-next-line prefer-rest-params */\n    const argsArr = arguments;\n    this.callbacks.forEach(function (callback) {\n      /* eslint-disable-next-line prefer-spread */\n      callback.apply(undefined, argsArr);\n    });\n  }\n}\n", "import type { AsArray } from './Hook';\n\nexport class SyncWaterfallHook<T, R> {\n  private callbacks: ((...args: AsArray<T>) => R)[] = [];\n\n  tap(options: string, fn: (...args: AsArray<T>) => R) {\n    this.callbacks.push(fn);\n  }\n\n  call(...args: AsArray<T>): R {\n    if (this.callbacks.length) {\n      /* eslint-disable-next-line prefer-rest-params */\n      const argsArr = arguments;\n      /* eslint-disable-next-line prefer-spread */\n      let result: R = this.callbacks[0].apply(undefined, argsArr);\n      for (let i = 0; i < this.callbacks.length - 1; i++) {\n        const callback = this.callbacks[i];\n        // @ts-ignore\n        result = callback(result);\n      }\n\n      return result;\n    }\n\n    return null;\n  }\n}\n", "import { isNumber } from '@antv/util';\nimport type { ParsedTextStyleProps } from '../display-objects/Text';\nimport { memoize } from './memoize';\n\nconst genericFontFamilies = [\n  'serif',\n  'sans-serif',\n  'monospace',\n  'cursive',\n  'fantasy',\n  'system-ui',\n];\nconst stringRegExp = /([\\\"\\'])[^\\'\\\"]+\\1/;\n\nfunction getFontAttr(attributes: Partial<ParsedTextStyleProps>) {\n  const {\n    fontSize = 16,\n    fontFamily = 'sans-serif',\n    fontStyle = 'normal',\n    fontVariant = 'normal',\n    fontWeight = 'normal',\n  } = attributes;\n  return { fontSize, fontFamily, fontStyle, fontVariant, fontWeight };\n}\n\nexport const toFontString = memoize(\n  function toFontStringRaw(attributes: Partial<ParsedTextStyleProps>) {\n    const { fontSize, fontFamily, fontStyle, fontVariant, fontWeight } =\n      getFontAttr(attributes);\n\n    // build canvas api font setting from individual components. Convert a numeric this.fontSize to px\n    // const fontSizeString: string = isNumber(fontSize) ? `${fontSize}px` : fontSize.toString();\n    const fontSizeString: string =\n      (isNumber(fontSize) && `${fontSize}px`) || '16px';\n    // Clean-up fontFamily property by quoting each font name\n    // this will support font names with spaces\n\n    const fontFamilies: string[] = fontFamily.split(',');\n\n    for (let i = fontFamilies.length - 1; i >= 0; i--) {\n      // Trim any extra white-space\n      let fontFamily = fontFamilies[i].trim();\n      // Check if font already contains strings\n      if (\n        !stringRegExp.test(fontFamily) &&\n        genericFontFamilies.indexOf(fontFamily) < 0\n      ) {\n        fontFamily = `\"${fontFamily}\"`;\n      }\n      fontFamilies[i] = fontFamily;\n    }\n    return `${fontStyle} ${fontVariant} ${fontWeight} ${fontSizeString} ${fontFamilies.join(\n      ',',\n    )}`;\n  },\n  (attributes: Partial<ParsedTextStyleProps>) => {\n    const { fontSize, fontFamily, fontStyle, fontVariant, fontWeight } =\n      getFontAttr(attributes);\n    return `${fontStyle}_${fontVariant}_${fontWeight}_${fontSize}_${fontFamily}`;\n  },\n);\n", "import { mat4, vec3 } from 'gl-matrix';\nimport type { CSSUnitValue } from '../css/cssom';\nimport { ParsedTransform, convertAngleUnit } from '../css/parser';\nimport type { DisplayObject } from '../display-objects/DisplayObject';\nimport { runtime } from '../global-runtime';\nimport type { TransformType } from '../types';\nimport { deg2rad } from './math';\n\n/**\n * Minimum scaling limit\n *\n * When `scale` is 0, the matrix will become an irreversible matrix,\n * and `NaN` will appear during matrix calculation and decomposition,\n * causing exceptions\n */\nconst MIN_SCALE = 0.000001;\nconst clampScale = (item: number) => Math.max(item, MIN_SCALE);\n\nfunction createSkewMatrix(skewMatrix: mat4, skewX: number, skewY: number) {\n  // Create an identity matrix\n  mat4.identity(skewMatrix);\n  // Apply skew to the matrix\n  skewMatrix[4] = Math.tan(skewX); // Skew Y axis in X direction\n  skewMatrix[1] = Math.tan(skewY); // Skew X axis in Y direction\n\n  return skewMatrix;\n}\n\nconst $mat4_1 = mat4.create();\nconst $mat4_2 = mat4.create();\n\nconst parser: Record<TransformType, (d: CSSUnitValue[]) => void> = {\n  scale: (d: CSSUnitValue[]) => {\n    mat4.fromScaling(\n      $mat4_1,\n      [d[0].value, d[1].value, 1].map((item) => clampScale(item)) as vec3,\n    );\n  },\n  scaleX: (d: CSSUnitValue[]) => {\n    mat4.fromScaling(\n      $mat4_1,\n      [d[0].value, 1, 1].map((item) => clampScale(item)) as vec3,\n    );\n  },\n  scaleY: (d: CSSUnitValue[]) => {\n    mat4.fromScaling(\n      $mat4_1,\n      [1, d[0].value, 1].map((item) => clampScale(item)) as vec3,\n    );\n  },\n  scaleZ: (d: CSSUnitValue[]) => {\n    mat4.fromScaling(\n      $mat4_1,\n      [1, 1, d[0].value].map((item) => clampScale(item)) as vec3,\n    );\n  },\n  scale3d: (d: CSSUnitValue[]) => {\n    mat4.fromScaling(\n      $mat4_1,\n      [d[0].value, d[1].value, d[2].value].map((item) =>\n        clampScale(item),\n      ) as vec3,\n    );\n  },\n  translate: (d: CSSUnitValue[]) => {\n    mat4.fromTranslation($mat4_1, [d[0].value, d[1].value, 0]);\n  },\n  translateX: (d: CSSUnitValue[]) => {\n    mat4.fromTranslation($mat4_1, [d[0].value, 0, 0]);\n  },\n  translateY: (d: CSSUnitValue[]) => {\n    mat4.fromTranslation($mat4_1, [0, d[0].value, 0]);\n  },\n  translateZ: (d: CSSUnitValue[]) => {\n    mat4.fromTranslation($mat4_1, [0, 0, d[0].value]);\n  },\n  translate3d: (d: CSSUnitValue[]) => {\n    mat4.fromTranslation($mat4_1, [d[0].value, d[1].value, d[2].value]);\n  },\n  rotate: (d: CSSUnitValue[]) => {\n    mat4.fromZRotation($mat4_1, deg2rad(convertAngleUnit(d[0])));\n  },\n  rotateX: (d: CSSUnitValue[]) => {\n    mat4.fromXRotation($mat4_1, deg2rad(convertAngleUnit(d[0])));\n  },\n  rotateY: (d: CSSUnitValue[]) => {\n    mat4.fromYRotation($mat4_1, deg2rad(convertAngleUnit(d[0])));\n  },\n  rotateZ: (d: CSSUnitValue[]) => {\n    mat4.fromZRotation($mat4_1, deg2rad(convertAngleUnit(d[0])));\n  },\n  rotate3d: (d: CSSUnitValue[]) => {\n    mat4.fromRotation($mat4_1, deg2rad(convertAngleUnit(d[3])), [\n      d[0].value,\n      d[1].value,\n      d[2].value,\n    ]);\n  },\n  skew: (d: CSSUnitValue[]) => {\n    createSkewMatrix($mat4_1, deg2rad(d[0].value), deg2rad(d[1].value));\n  },\n  skewX: (d: CSSUnitValue[]) => {\n    createSkewMatrix($mat4_1, deg2rad(d[0].value), 0);\n  },\n  skewY: (d: CSSUnitValue[]) => {\n    createSkewMatrix($mat4_1, 0, deg2rad(d[0].value));\n  },\n  matrix: (d: CSSUnitValue[]) => {\n    // prettier-ignore\n    mat4.set(\n      $mat4_1,\n      d[0].value, d[1].value, 0, 0,\n      d[2].value, d[3].value, 0, 0,\n      0,                   0, 1, 0,\n      d[4].value, d[5].value, 0, 1,\n    );\n  },\n  matrix3d: (d: CSSUnitValue[]) => {\n    // @ts-ignore\n    mat4.set($mat4_1, ...d.map((s) => s.value));\n  },\n};\n\nconst $vec3One = vec3.fromValues(1, 1, 1);\nconst $vec3Zero = vec3.create();\nconst optimizer: {\n  [key in TransformType]?: (object: DisplayObject, d: CSSUnitValue[]) => void;\n} = {\n  translate: (object: DisplayObject, d: CSSUnitValue[]) => {\n    runtime.sceneGraphService.setLocalScale(object, $vec3One, false);\n    runtime.sceneGraphService.setLocalEulerAngles(\n      object,\n      $vec3Zero,\n      undefined,\n      undefined,\n      false,\n    );\n    runtime.sceneGraphService.setLocalPosition(\n      object,\n      [d[0].value, d[1].value, 0],\n      false,\n    );\n    runtime.sceneGraphService.dirtyLocalTransform(object, object.transformable);\n  },\n};\n\nexport function parsedTransformToMat4(\n  transform: ParsedTransform[],\n  object: DisplayObject,\n): mat4 {\n  if (transform.length) {\n    if (transform.length === 1 && optimizer[transform[0].t]) {\n      optimizer[transform[0].t](object, transform[0].d);\n      return;\n    }\n    const m = mat4.identity($mat4_2);\n    for (let i = 0; i < transform.length; i++) {\n      const { t, d } = transform[i];\n      const p = parser[t];\n      if (p) {\n        p(d);\n        mat4.mul(m, m, $mat4_1);\n      }\n    }\n\n    object.setLocalTransform(m);\n  } else {\n    object.resetLocalTransform();\n  }\n\n  return object.getLocalTransform();\n}\n", "import type { DisplayObject } from '../../display-objects';\nimport { parsedTransformToMat4 } from '../../utils';\nimport { CSSKeywordValue } from '../cssom';\nimport type { CSSProperty } from '../CSSProperty';\nimport type { ParsedTransform } from '../parser/transform';\nimport { mergeTransforms, parseTransformUnmemoize } from '../parser/transform';\n\n/**\n * @see /zh/docs/api/animation#\n *\n * support the following formats like CSS Transform:\n *\n * scale\n * * scale(x, y)\n * * scaleX(x)\n * * scaleY(x)\n * * scaleZ(z)\n * * scale3d(x, y, z)\n *\n * translate (unit: none, px, %(relative to its bounds))\n * * translate(x, y) eg. translate(0, 0) translate(0, 30px) translate(100%, 100%)\n * * translateX(0)\n * * translateY(0)\n * * translateZ(0)\n * * translate3d(0, 0, 0)\n *\n * rotate (unit: deg rad turn)\n * * rotate(0.5turn) rotate(30deg) rotate(1rad)\n *\n * none\n *\n * unsupported for now:\n * * calc() eg. translate(calc(100% + 10px))\n * * matrix/matrix3d()\n * * skew/skewX/skewY\n * * perspective\n */\nexport class CSSPropertyTransform\n  implements\n    Partial<CSSProperty<CSSKeywordValue | ParsedTransform[], ParsedTransform[]>>\n{\n  parser = parseTransformUnmemoize;\n\n  calculator(\n    name: string,\n    oldParsed: CSSKeywordValue | ParsedTransform[],\n    parsed: CSSKeywordValue | ParsedTransform[],\n    object: DisplayObject,\n  ): ParsedTransform[] {\n    // 'none'\n    if (parsed instanceof CSSKeywordValue) {\n      return [];\n    }\n    return parsed;\n  }\n\n  mixer = mergeTransforms;\n\n  postProcessor(object: DisplayObject) {\n    parsedTransformToMat4(object.parsedStyle.transform, object);\n  }\n}\n", "import { DisplayObject } from '../../display-objects';\nimport { UnitType, type CSSUnitValue } from '../cssom';\nimport type { CSSProperty } from '../CSSProperty';\n\n/**\n * @see https://developer.mozilla.org/zh-CN/docs/Web/CSS/transform-origin\n * @example\n * [10px, 10px] [10%, 10%]\n */\nexport class CSSPropertyTransformOrigin\n  implements\n    Partial<\n      CSSProperty<[CSSUnitValue, CSSUnitValue], [CSSUnitValue, CSSUnitValue]>\n    >\n{\n  postProcessor(object: DisplayObject) {\n    const { transformOrigin } = object.parsedStyle;\n    if (\n      transformOrigin[0].unit === UnitType.kPixels &&\n      transformOrigin[1].unit === UnitType.kPixels\n    ) {\n      object.setOrigin(transformOrigin[0].value, transformOrigin[1].value);\n    } else {\n      // Relative to geometry bounds, calculate later.\n      object.getGeometryBounds();\n    }\n  }\n}\n", "import { SortReason } from '../../components';\nimport type { DisplayObject } from '../../display-objects';\nimport type { CSSUnitValue } from '../cssom';\nimport type { CSSProperty } from '../CSSProperty';\n\nexport class CSSPropertyZIndex\n  implements Partial<CSSProperty<CSSUnitValue, number>>\n{\n  calculator(\n    name: string,\n    oldParsed: CSSUnitValue,\n    computed: CSSUnitValue,\n    object: DisplayObject,\n  ): number {\n    return computed.value;\n  }\n\n  postProcessor(object: DisplayObject) {\n    if (object.parentNode) {\n      const parentEntity = object.parentNode as DisplayObject;\n      const parentRenderable = parentEntity.renderable;\n      const parentSortable = parentEntity.sortable;\n      if (parentRenderable) {\n        parentEntity.dirty();\n      }\n      // need re-sort on parent\n      if (parentSortable) {\n        parentSortable.dirty = true;\n        parentSortable.dirtyReason = SortReason.Z_INDEX_CHANGED;\n      }\n    }\n  }\n}\n", "import type {\n  Circle,\n  ParsedCircleStyleProps,\n} from '../../display-objects/Circle';\nimport type { GeometryAABBUpdater } from './interfaces';\n\nexport class CircleUpdater\n  implements GeometryAABBUpdater<ParsedCircleStyleProps>\n{\n  update(parsedStyle: ParsedCircleStyleProps, object: Circle) {\n    const { cx = 0, cy = 0, r = 0 } = parsedStyle;\n\n    return {\n      cx,\n      cy,\n      hwidth: r,\n      hheight: r,\n    };\n  }\n}\n", "import type {\n  Ellipse,\n  ParsedEllipseStyleProps,\n} from '../../display-objects/Ellipse';\nimport type { GeometryAABBUpdater } from './interfaces';\n\nexport class EllipseUpdater\n  implements GeometryAABBUpdater<ParsedEllipseStyleProps>\n{\n  update(parsedStyle: ParsedEllipseStyleProps, object: Ellipse) {\n    const { cx = 0, cy = 0, rx = 0, ry = 0 } = parsedStyle;\n\n    return {\n      cx,\n      cy,\n      hwidth: rx,\n      hheight: ry,\n    };\n  }\n}\n", "import type { ParsedLineStyleProps } from '../../display-objects/Line';\nimport type { GeometryAABBUpdater } from './interfaces';\n\nexport class LineUpdater implements GeometryAABBUpdater<ParsedLineStyleProps> {\n  update(parsedStyle: ParsedLineStyleProps) {\n    const { x1, y1, x2, y2 } = parsedStyle;\n\n    const minX = Math.min(x1, x2);\n    const maxX = Math.max(x1, x2);\n    const minY = Math.min(y1, y2);\n    const maxY = Math.max(y1, y2);\n\n    const width = maxX - minX;\n    const height = maxY - minY;\n    const hwidth = width / 2;\n    const hheight = height / 2;\n\n    return {\n      cx: minX + hwidth,\n      cy: minY + hheight,\n      hwidth,\n      hheight,\n    };\n  }\n}\n", "import type { ParsedPathStyleProps } from '../../display-objects';\nimport type { GeometryAABBUpdater } from './interfaces';\n\nexport class PathUpdater implements GeometryAABBUpdater<ParsedPathStyleProps> {\n  update(parsedStyle: ParsedPathStyleProps) {\n    const { d } = parsedStyle;\n\n    const { x, y, width, height } = d.rect;\n    const hwidth = width / 2;\n    const hheight = height / 2;\n\n    return {\n      cx: x + hwidth,\n      cy: y + hheight,\n      hwidth,\n      hheight,\n    };\n  }\n}\n", "import { isArray } from '@antv/util';\nimport type { ParsedPolylineStyleProps } from '../../display-objects';\nimport type { GeometryAABBUpdater } from './interfaces';\n\nexport class PolylineUpdater\n  implements GeometryAABBUpdater<ParsedPolylineStyleProps>\n{\n  update(parsedStyle: ParsedPolylineStyleProps) {\n    if (parsedStyle.points && isArray(parsedStyle.points.points)) {\n      const { points } = parsedStyle.points;\n\n      // FIXME: account for miter lineJoin\n      const minX = Math.min(...points.map((point) => point[0]));\n      const maxX = Math.max(...points.map((point) => point[0]));\n      const minY = Math.min(...points.map((point) => point[1]));\n      const maxY = Math.max(...points.map((point) => point[1]));\n\n      const width = maxX - minX;\n      const height = maxY - minY;\n      const hwidth = width / 2;\n      const hheight = height / 2;\n\n      return {\n        cx: minX + hwidth,\n        cy: minY + hheight,\n        hwidth,\n        hheight,\n      };\n    }\n    return {\n      cx: 0,\n      cy: 0,\n      hwidth: 0,\n      hheight: 0,\n    };\n  }\n}\n", "import { isString } from '@antv/util';\nimport type {\n  Group,\n  Image,\n  ParsedImageStyleProps,\n  Rect,\n} from '../../display-objects';\nimport type { GeometryAABBUpdater } from './interfaces';\n\nexport class RectUpdater implements GeometryAABBUpdater<ParsedImageStyleProps> {\n  update(parsedStyle: ParsedImageStyleProps, object: Image | Rect | Group) {\n    const { x = 0, y = 0, src, width = 0, height = 0 } = parsedStyle;\n\n    let contentWidth = width;\n    let contentHeight = height;\n\n    // resize with HTMLImageElement's size\n    if (src && !isString(src)) {\n      if (!contentWidth) {\n        contentWidth = src.width;\n        parsedStyle.width = contentWidth;\n      }\n      if (!contentHeight) {\n        contentHeight = src.height;\n        parsedStyle.height = contentHeight;\n      }\n    }\n\n    return {\n      cx: x + contentWidth / 2,\n      cy: y + contentHeight / 2,\n      hwidth: contentWidth / 2,\n      hheight: contentHeight / 2,\n    };\n  }\n}\n", "import type {\n  DisplayObject,\n  ParsedTextStyleProps,\n} from '../../display-objects';\nimport { GlobalRuntime } from '../../global-runtime';\nimport type { GeometryAABBUpdater } from './interfaces';\n\nexport class TextUpdater implements GeometryAABBUpdater<ParsedTextStyleProps> {\n  constructor(private globalRuntime: GlobalRuntime) {}\n\n  private isReadyToMeasure(\n    parsedStyle: ParsedTextStyleProps,\n    object: DisplayObject,\n  ) {\n    const { text } = parsedStyle;\n\n    return text;\n  }\n\n  update(parsedStyle: ParsedTextStyleProps, object: DisplayObject) {\n    const {\n      text,\n      textAlign = 'start',\n      lineWidth = 1,\n      textBaseline = 'alphabetic',\n      dx = 0,\n      dy = 0,\n      x = 0,\n      y = 0,\n    } = parsedStyle;\n\n    if (!this.isReadyToMeasure(parsedStyle, object)) {\n      parsedStyle.metrics = {\n        font: '',\n        width: 0,\n        height: 0,\n        lines: [],\n        lineWidths: [],\n        lineHeight: 0,\n        maxLineWidth: 0,\n        fontProperties: {\n          ascent: 0,\n          descent: 0,\n          fontSize: 0,\n        },\n        lineMetrics: [],\n      };\n      return {\n        hwidth: 0,\n        hheight: 0,\n        cx: 0,\n        cy: 0,\n      };\n    }\n\n    const { offscreenCanvas } =\n      object?.ownerDocument?.defaultView?.getConfig() || {};\n    const metrics = this.globalRuntime.textService.measureText(\n      text,\n      parsedStyle,\n      offscreenCanvas,\n    );\n    parsedStyle.metrics = metrics;\n\n    const { width, height } = metrics;\n\n    const hwidth = width / 2;\n    const hheight = height / 2;\n\n    // default 'left'\n    let lineXOffset = x + hwidth;\n    if (textAlign === 'center' || textAlign === 'middle') {\n      lineXOffset += lineWidth / 2 - hwidth;\n    } else if (textAlign === 'right' || textAlign === 'end') {\n      lineXOffset += lineWidth - hwidth * 2;\n    }\n\n    let lineYOffset = y - hheight;\n    if (textBaseline === 'middle') {\n      lineYOffset += hheight;\n    } else if (textBaseline === 'top' || textBaseline === 'hanging') {\n      lineYOffset += hheight * 2;\n    } else if (textBaseline === 'alphabetic') {\n      // alphabetic has been removed in the latest version, will be treated as bottom\n    } else if (textBaseline === 'bottom' || textBaseline === 'ideographic') {\n      lineYOffset += 0;\n    }\n    // TODO: ideographic & bottom\n\n    if (dx) {\n      lineXOffset += dx;\n    }\n    if (dy) {\n      lineYOffset += dy;\n    }\n\n    return {\n      cx: lineXOffset,\n      cy: lineYOffset,\n      hwidth,\n      hheight,\n    };\n  }\n}\n", "import type { Group, ParsedImageStyleProps } from '../../display-objects';\nimport type { GeometryAABBUpdater } from './interfaces';\n\nexport class GroupUpdater\n  implements GeometryAABBUpdater<ParsedImageStyleProps>\n{\n  update(parsedStyle: ParsedImageStyleProps, object: Group) {\n    return {\n      cx: 0,\n      cy: 0,\n      hwidth: 0,\n      hheight: 0,\n    };\n  }\n}\n", "import type { HTML, ParsedHTMLStyleProps } from '../../display-objects/HTML';\nimport type { GeometryAABBUpdater } from './interfaces';\n\nexport class HTMLUpdater implements GeometryAABBUpdater<ParsedHTMLStyleProps> {\n  update(parsedStyle: ParsedHTMLStyleProps, object: HTML) {\n    const { x = 0, y = 0, width = 0, height = 0 } = parsedStyle;\n\n    return {\n      cx: x + width / 2,\n      cy: y + height / 2,\n      hwidth: width / 2,\n      hheight: height / 2,\n    };\n  }\n}\n", "import type { EventService } from '../services';\nimport { Point } from '../shapes/Point';\nimport { ERROR_MSG_METHOD_NOT_IMPLEMENTED } from '../utils';\nimport type { IEventTarget } from './interfaces';\n\nexport function isFederatedEvent(value: any): value is FederatedEvent {\n  return !!(value as FederatedEvent).type;\n}\n\n/**\n * An DOM-compatible synthetic event implementation that is \"forwarded\" on behalf of an original\n * FederatedEvent or native Event.\n */\nexport class FederatedEvent<N extends Event = Event, T = any> {\n  /**\n   * The type of event, supports the following:\n   * * pointerdown\n   * * touchstart\n   * * mousedown\n   * * rightdown\n   * * ...\n   */\n  type: string;\n\n  /**\n   * @deprecated\n   */\n  get name() {\n    return this.type;\n  }\n\n  /**\n   * The propagation phase.\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Event/eventPhase\n   */\n  eventPhase = FederatedEvent.prototype.NONE;\n\n  /**\n   * can be used to implement event delegation\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Event/target\n   */\n  target: IEventTarget | null;\n\n  /**\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Event/bubbles\n   */\n  bubbles = true;\n  /**\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Event/cancelBubble\n   */\n  cancelBubble = true;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Event/cancelable\n   */\n  readonly cancelable = false;\n\n  /** the event target when listeners binded */\n  currentTarget: IEventTarget | null;\n\n  /** Flags whether the default response of the user agent was prevent through this event. */\n  defaultPrevented = false;\n\n  /**\n   * timestamp when the event created\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Event/timeStamp\n   */\n  timeStamp: number;\n\n  /**\n   * the original event.\n   */\n  nativeEvent: N;\n\n  /** The original event that caused this event, if any. */\n  originalEvent: FederatedEvent<N>;\n\n  /** Flags whether propagation was stopped. */\n  propagationStopped = false;\n\n  /** Flags whether propagation was immediately stopped. */\n  propagationImmediatelyStopped = false;\n\n  manager: EventService | null;\n\n  /** Event-specific detail */\n  detail: T;\n\n  /**\n   * The coordinates of the evnet relative to the nearest DOM layer.\n   * This is a non-standard property.\n   */\n  layer: Point = new Point();\n  get layerX(): number {\n    return this.layer.x;\n  }\n  get layerY(): number {\n    return this.layer.y;\n  }\n\n  /**\n   * The coordinates of the event relative to the DOM document.\n   * This is a non-standard property.\n   * relative to the DOM document.\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/MouseEvent/pageX\n   */\n  page: Point = new Point();\n  get pageX(): number {\n    return this.page.x;\n  }\n  get pageY(): number {\n    return this.page.y;\n  }\n\n  /**\n   * relative to Canvas, origin is left-top\n   */\n  canvas: Point = new Point();\n  get x(): number {\n    return this.canvas.x;\n  }\n  get y(): number {\n    return this.canvas.y;\n  }\n  get canvasX(): number {\n    return this.canvas.x;\n  }\n  get canvasY(): number {\n    return this.canvas.y;\n  }\n\n  /**\n   * relative to Viewport, account for Camera\n   */\n  viewport: Point = new Point();\n  get viewportX(): number {\n    return this.viewport.x;\n  }\n  get viewportY(): number {\n    return this.viewport.y;\n  }\n\n  /**\n   * The event boundary which manages this event. Propagation can only occur\n   *  within the boundary's jurisdiction.\n   */\n  constructor(manager: EventService | null) {\n    this.manager = manager;\n  }\n\n  path: IEventTarget[];\n  /**\n   * The propagation path for this event\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Event/composedPath\n   *\n   * So composedPath()[0] represents the original target.\n   * @see https://polymer-library.polymer-project.org/3.0/docs/devguide/events#retargeting\n   */\n  composedPath(): IEventTarget[] {\n    if (this.manager && (!this.path || this.path[0] !== this.target)) {\n      this.path = this.target ? this.manager.propagationPath(this.target) : [];\n    }\n\n    return this.path;\n  }\n  /**\n   * @deprecated\n   */\n  get propagationPath() {\n    return this.composedPath();\n  }\n\n  /**\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Event/preventDefault\n   */\n  preventDefault(): void {\n    if (this.nativeEvent instanceof Event && this.nativeEvent.cancelable) {\n      this.nativeEvent.preventDefault();\n    }\n\n    this.defaultPrevented = true;\n  }\n\n  /**\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Event/stopImmediatePropagation\n   */\n  stopImmediatePropagation(): void {\n    this.propagationImmediatelyStopped = true;\n  }\n\n  /**\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Event/stopPropagation\n   */\n  stopPropagation(): void {\n    this.propagationStopped = true;\n  }\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/UIEvent/view\n   */\n  view: any;\n\n  /**\n   * added for compatibility with DOM Event,\n   * deprecated props and methods\n   */\n  initEvent(): void {}\n  initUIEvent(): void {}\n  which: number;\n  returnValue: boolean;\n  srcElement: IEventTarget;\n  readonly composed = false;\n  isTrusted: boolean;\n\n  clone() {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  }\n\n  NONE = 0;\n  CAPTURING_PHASE = 1;\n  AT_TARGET = 2;\n  BUBBLING_PHASE = 3;\n}\n", "import type { DisplayObject } from '../display-objects/DisplayObject';\nimport { Point } from '../shapes/Point';\nimport { ERROR_MSG_METHOD_NOT_IMPLEMENTED } from '../utils';\nimport { FederatedEvent } from './FederatedEvent';\n\nexport class FederatedMouseEvent\n  extends FederatedEvent<MouseEvent | PointerEvent | TouchEvent>\n  implements MouseEvent\n{\n  /** Whether the \"alt\" key was pressed when this mouse event occurred. */\n  altKey: boolean;\n\n  /** The specific button that was pressed in this mouse event. */\n  button: number;\n\n  /** The button depressed when this event occurred. */\n  buttons: number;\n\n  /** Whether the \"control\" key was pressed when this mouse event occurred. */\n  ctrlKey: boolean;\n\n  /** Whether the \"meta\" key was pressed when this mouse event occurred. */\n  metaKey: boolean;\n\n  /** This is currently not implemented in the Federated Events API. */\n  // @ts-ignore\n  relatedTarget: DisplayObject | null;\n\n  /** Whether the \"shift\" key was pressed when this mouse event occurred. */\n  shiftKey: boolean;\n\n  /**\n   * The coordinates of the mouse event relative to the canvas.\n   */\n  client: Point = new Point();\n  get clientX(): number {\n    return this.client.x;\n  }\n  get clientY(): number {\n    return this.client.y;\n  }\n\n  /**\n   * The movement in this pointer relative to the last `mousemove` event.\n   */\n  movement: Point = new Point();\n  get movementX(): number {\n    return this.movement.x;\n  }\n  get movementY(): number {\n    return this.movement.y;\n  }\n\n  /**\n   * The offset of the pointer coordinates w.r.t. target DisplayObject in world space. This is\n   * not supported at the moment.\n   */\n  offset: Point = new Point();\n  get offsetX(): number {\n    return this.offset.x;\n  }\n  get offsetY(): number {\n    return this.offset.y;\n  }\n\n  /**\n   * The pointer coordinates in world space.\n   */\n  global: Point = new Point();\n  get globalX(): number {\n    return this.global.x;\n  }\n  get globalY(): number {\n    return this.global.y;\n  }\n\n  /**\n   * The pointer coordinates in sceen space.\n   */\n  screen: Point = new Point();\n  get screenX(): number {\n    return this.screen.x;\n  }\n  get screenY(): number {\n    return this.screen.y;\n  }\n\n  getModifierState(key: string): boolean {\n    return (\n      'getModifierState' in this.nativeEvent &&\n      this.nativeEvent.getModifierState(key)\n    );\n  }\n  initMouseEvent(): void {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  }\n}\n", "import { FederatedMouseEvent } from './FederatedMouseEvent';\n\n// @ts-ignore\nexport class FederatedPointerEvent\n  extends FederatedMouseEvent\n  implements PointerEvent\n{\n  /**\n   * The unique identifier of the pointer.\n   *\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/PointerEvent/pointerId\n   */\n  pointerId: number;\n\n  /**\n   * The width of the pointer's contact along the x-axis, measured in CSS pixels.\n   * radiusX of TouchEvents will be represented by this value.\n   *\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/PointerEvent/width\n   */\n  width = 0;\n\n  /**\n   * The height of the pointer's contact along the y-axis, measured in CSS pixels.\n   * radiusY of TouchEvents will be represented by this value.\n   *\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/PointerEvent/height\n   */\n  height = 0;\n\n  /**\n   * Indicates whether or not the pointer device that created the event is the primary pointer.\n   *\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/PointerEvent/isPrimary\n   */\n  isPrimary = false;\n\n  /**\n   * The type of pointer that triggered the event.\n   *\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/PointerEvent/pointerType\n   */\n  pointerType: string;\n\n  /**\n   * Pressure applied by the pointing device during the event.\n   *s\n   * A Touch's force property will be represented by this value.\n   *\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/PointerEvent/pressure\n   */\n  pressure: number;\n\n  /**\n   * Barrel pressure on a stylus pointer.\n   *\n   * @see https://w3c.github.io/pointerevents/#pointerevent-interface\n   */\n  tangentialPressure: number;\n\n  /**\n   * The angle, in degrees, between the pointer device and the screen.\n   *\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/PointerEvent/tiltX\n   */\n  tiltX: number;\n\n  /**\n   * The angle, in degrees, between the pointer device and the screen.\n   *\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/PointerEvent/tiltY\n   */\n  tiltY: number;\n\n  /**\n   * Twist of a stylus pointer.\n   *\n   * @see https://w3c.github.io/pointerevents/#pointerevent-interface\n   */\n  twist: number;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/PointerEvent/getCoalescedEvents\n   */\n  getCoalescedEvents(): PointerEvent[] {\n    if (\n      this.type === 'pointermove' ||\n      this.type === 'mousemove' ||\n      this.type === 'touchmove'\n    ) {\n      // @ts-ignore\n      return [this];\n    }\n    return [];\n  }\n\n  /**\n   * @see https://chromestatus.com/feature/5765569655603200\n   */\n  getPredictedEvents(): PointerEvent[] {\n    throw new Error('getPredictedEvents is not supported!');\n  }\n\n  /**\n   * @see https://github.com/antvis/G/issues/1115\n   * We currently reuses event objects in the event system,\n   * avoiding the creation of a large number of event objects.\n   * Reused objects are only used to carry different data,\n   * such as coordinate information, native event objects,\n   * and therefore the lifecycle is limited to the event handler,\n   * which can lead to unintended consequences if an attempt is made to cache the entire event object.\n   *\n   * Therefore, while keeping the above performance considerations in mind, it is possible to provide a clone method that creates a new object when the user really wants to cache it, e.g.\n   */\n  clone() {\n    return this.manager.clonePointerEvent(this);\n  }\n}\n", "import { FederatedMouseEvent } from './FederatedMouseEvent';\n\n// @ts-ignore\nexport class FederatedWheelEvent\n  extends FederatedMouseEvent\n  implements WheelEvent\n{\n  /**\n   * The units of `deltaX`, `deltaY`, and `deltaZ`. This is one of `DOM_DELTA_LINE`,\n   * `DOM_DELTA_PAGE`, `DOM_DELTA_PIXEL`.\n   */\n  deltaMode: number;\n\n  /** Horizontal scroll amount */\n  deltaX: number;\n\n  /** Vertical scroll amount */\n  deltaY: number;\n\n  /** z-axis scroll amount. */\n  deltaZ: number;\n\n  readonly DOM_DELTA_PIXEL: 0x00;\n  readonly DOM_DELTA_LINE: 0x01;\n  readonly DOM_DELTA_PAGE: 0x02;\n\n  clone() {\n    return this.manager.cloneWheelEvent(this);\n  }\n}\n", "import { FederatedEvent } from './FederatedEvent';\n\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/Events/Creating_and_triggering_events\n *\n * @example\n  const event = new CustomEvent('build', { detail: { prop1: 'xx' } });\n  circle.addEventListener('build', (e) => {\n    e.target; // circle\n    e.detail; // { prop1: 'xx' }\n  });\n\n  circle.dispatchEvent(event);\n */\nexport class CustomEvent extends FederatedEvent {\n  constructor(eventName: string, object?: object) {\n    super(null);\n\n    this.type = eventName;\n    this.detail = object;\n\n    // compatible with G 3.0\n    Object.assign(this, object);\n  }\n}\n", "import { isBoolean, isFunction } from '@antv/util';\nimport EventEmitter from 'eventemitter3';\nimport { CustomEvent } from './CustomEvent';\nimport { FederatedEvent } from './FederatedEvent';\nimport type {\n  EventListenerOrEventListenerObject,\n  ICanvas,\n  IDocument,\n  IEventTarget,\n  INode,\n} from './interfaces';\n\n/**\n * Objects that can receive events and may have listeners for them.\n * eg. Element, Canvas, DisplayObject\n * @see https://developer.mozilla.org/en-US/docs/Web/API/EventTarget\n */\nexport class EventTarget implements IEventTarget {\n  /**\n   * event emitter\n   */\n  emitter = new EventEmitter();\n\n  /**\n   * @deprecated\n   * @alias addEventListener\n   */\n  on(\n    type: string,\n    listener: EventListenerOrEventListenerObject | ((...args: any[]) => void),\n    options?: boolean | AddEventListenerOptions,\n  ) {\n    this.addEventListener(type, listener, options);\n    return this;\n  }\n  /**\n   * support `capture` & `once` in options\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/EventTarget/addEventListener\n   */\n  addEventListener(\n    type: string,\n    listener: EventListenerOrEventListenerObject | ((...args: any[]) => void),\n    options?: boolean | AddEventListenerOptions,\n  ) {\n    let capture = false;\n    let once = false;\n\n    if (isBoolean(options)) capture = options;\n    else if (options) ({ capture = false, once = false } = options);\n\n    if (capture) type += 'capture';\n    // eslint-disable-next-line @typescript-eslint/unbound-method\n    listener = isFunction(listener) ? listener : listener.handleEvent;\n\n    const context = isFunction(listener) ? undefined : listener;\n\n    if (once) this.emitter.once(type, listener, context);\n    else this.emitter.on(type, listener, context);\n\n    return this;\n  }\n  /**\n   * @deprecated\n   * @alias removeEventListener\n   */\n  off(\n    type: string,\n    listener: EventListenerOrEventListenerObject | ((...args: any[]) => void),\n    options?: boolean | AddEventListenerOptions,\n  ) {\n    if (type) {\n      this.removeEventListener(type, listener, options);\n    } else {\n      // remove all listeners\n      this.removeAllEventListeners();\n    }\n    return this;\n  }\n\n  removeAllEventListeners() {\n    this.emitter?.removeAllListeners();\n  }\n\n  removeEventListener(\n    type: string,\n    listener?: EventListenerOrEventListenerObject | ((...args: any[]) => void),\n    options?: boolean | AddEventListenerOptions,\n  ) {\n    if (!this.emitter) return this;\n\n    const capture = isBoolean(options) ? options : options?.capture;\n    if (capture) type += 'capture';\n    // eslint-disable-next-line @typescript-eslint/unbound-method\n    listener = isFunction(listener) ? listener : listener?.handleEvent;\n    const context = isFunction(listener) ? undefined : listener;\n\n    this.emitter.off(type, listener, context);\n    return this;\n  }\n  /**\n   * @deprecated\n   * @alias dispatchEvent\n   */\n  emit(eventName: string, object: object) {\n    this.dispatchEvent(new CustomEvent(eventName, object));\n  }\n\n  dispatchEventToSelf<T extends FederatedEvent>(e: T) {\n    e.target ||= this;\n    e.currentTarget = this;\n    this.emitter.emit(e.type, e);\n  }\n\n  dispatchEvent<T extends FederatedEvent>(\n    e: T,\n    skipPropagate = false,\n    dispatchToSelf?: boolean,\n  ): boolean {\n    if (dispatchToSelf) {\n      this.dispatchEventToSelf(e);\n\n      return true;\n    }\n\n    let canvas: ICanvas;\n\n    if ((this as unknown as ICanvas).document) {\n      canvas = this as unknown as ICanvas;\n    } else if ((this as unknown as IDocument).defaultView) {\n      canvas = (this as unknown as IDocument).defaultView;\n    } else {\n      canvas = (this as unknown as INode).ownerDocument?.defaultView;\n    }\n\n    if (canvas) {\n      e.manager = canvas.getEventService();\n      if (!e.manager) return false;\n\n      e.defaultPrevented = false;\n      if (e.path) {\n        e.path.length = 0;\n      } else {\n        // @ts-ignore\n        e.page = [];\n      }\n\n      if (!skipPropagate) {\n        e.target = this;\n      }\n      e.manager.dispatchEvent(e, e.type, skipPropagate);\n    } else {\n      // HACK Fixed the issue that after an element leaves the DOM tree, there is no associated canvas,\n      // which causes the removed and destroy events to not be triggered\n      this.dispatchEventToSelf(e);\n    }\n\n    return !e.defaultPrevented;\n  }\n}\n", "import { Shape } from '../types';\nimport { ERROR_MSG_METHOD_NOT_IMPLEMENTED } from '../utils';\n// import { Text } from '../display-objects/Text';\nimport { EventTarget } from './EventTarget';\nimport type {\n  IChildNode,\n  IDocument,\n  IElement,\n  IEventTarget,\n  INode,\n  IParentNode,\n} from './interfaces';\n\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/Node\n */\nexport abstract class Node extends EventTarget implements INode {\n  /**\n   * Both nodes are in different documents or different trees in the same document.\n   */\n  static DOCUMENT_POSITION_DISCONNECTED = 1;\n\n  /**\n   * otherNode precedes the node in either a pre-order depth-first traversal\n   * of a tree containing both (e.g., as an ancestor or previous sibling or a descendant of a previous sibling or previous sibling of an ancestor) or (if they are disconnected) in an arbitrary but consistent ordering.\n   */\n  static DOCUMENT_POSITION_PRECEDING = 2;\n\n  /**\n   * otherNode follows the node in either a pre-order depth-first traversal of a tree containing both (e.g., as a descendant or following sibling or a descendant of a following sibling or following sibling of an ancestor) or (if they are disconnected) in an arbitrary but consistent ordering.\n   */\n  static DOCUMENT_POSITION_FOLLOWING = 4;\n\n  /**\n   * otherNode is an ancestor of the node.\n   */\n  static DOCUMENT_POSITION_CONTAINS = 8;\n\n  /**\n   * otherNode is a descendant of the node.\n   */\n  static DOCUMENT_POSITION_CONTAINED_BY = 16;\n\n  /**\n   * The result relies upon arbitrary and/or implementation-specific behavior and is not guaranteed to be portable.\n   */\n  static DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC = 32;\n\n  static isNode(target: IEventTarget | INode): target is INode {\n    return !!(target as INode).childNodes;\n  }\n\n  shadow = false;\n  /**\n   * points to canvas.document\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Node/ownerDocument\n   */\n  ownerDocument: IDocument | null = null;\n\n  /**\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Node/isConnected\n   * @example\n      circle.isConnected; // false\n      canvas.appendChild(circle);\n      circle.isConnected; // true\n   */\n  isConnected = false;\n\n  /**\n   * Returns node's node document's document base URL.\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Node\n   */\n  readonly baseURI: string = '';\n\n  /**\n   * Returns the children.\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Node/childNodes\n   */\n  childNodes: IChildNode[] = [];\n\n  /**\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Node/nodeType\n   */\n  nodeType = 0;\n\n  /**\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Node/nodeName\n   */\n  nodeName = '';\n\n  /**\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Node/nodeValue\n   */\n  nodeValue: string | null = null;\n\n  /**\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Node/textContent\n   */\n  get textContent(): string {\n    let out = '';\n\n    if (this.nodeName === Shape.TEXT) {\n      // @ts-ignore\n      out += this.style.text;\n    }\n\n    for (const child of this.childNodes) {\n      if (child.nodeName === Shape.TEXT) {\n        out += child.nodeValue;\n      } else {\n        out += child.textContent;\n      }\n    }\n\n    return out;\n  }\n\n  set textContent(content: string) {\n    // remove all children\n    this.childNodes.slice().forEach((child) => {\n      this.removeChild(child);\n    });\n\n    if (this.nodeName === Shape.TEXT) {\n      // @ts-ignore\n      this.style.text = `${content}`;\n    } else {\n      // this.appendChild(\n      //   new Text({\n      //     style: {\n      //       text: content,\n      //     },\n      //   }),\n      // );\n    }\n  }\n\n  /**\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Node/getRootNode\n   */\n  getRootNode(opts: { composed?: boolean } = {}): INode {\n    if (this.parentNode) {\n      return this.parentNode.getRootNode(opts);\n    }\n    if (opts.composed && (this as any).host) {\n      return (this as any).host.getRootNode(opts);\n    }\n    return this;\n  }\n  hasChildNodes(): boolean {\n    return this.childNodes.length > 0;\n  }\n\n  isDefaultNamespace(namespace: string | null): boolean {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  }\n\n  lookupNamespaceURI(prefix: string | null): string | null {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  }\n\n  lookupPrefix(namespace: string | null): string | null {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  }\n  normalize(): void {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  }\n\n  /**\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Node/isEqualNode\n   */\n  isEqualNode(otherNode: INode | null): boolean {\n    // TODO: compare 2 nodes, not sameness\n    return this === otherNode;\n  }\n  isSameNode(otherNode: INode | null): boolean {\n    return this.isEqualNode(otherNode);\n  }\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/ParentNode\n   */\n  parentNode: (INode & IParentNode) | null = null;\n\n  /**\n   * @deprecated\n   * @alias parentNode\n   */\n  get parent(): INode | null {\n    return this.parentNode;\n  }\n  get parentElement(): IElement | null {\n    return null;\n  }\n  get nextSibling(): IChildNode | null {\n    return null;\n  }\n  get previousSibling(): IChildNode | null {\n    return null;\n  }\n  get firstChild(): IChildNode | null {\n    return this.childNodes.length > 0 ? this.childNodes[0] : null;\n  }\n  get lastChild(): IChildNode | null {\n    return this.childNodes.length > 0\n      ? this.childNodes[this.childNodes.length - 1]\n      : null;\n  }\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Node/compareDocumentPosition\n   * @see https://github.com/b-fuze/deno-dom/blob/master/src/dom/node.ts#L338\n   */\n  compareDocumentPosition(other: INode): number {\n    if (other === this) {\n      // same node\n      return 0;\n    }\n\n    // if (!(other instanceof Node)) {\n    //   throw new TypeError(\n    //     'Node.compareDocumentPosition: Argument 1 does not implement interface Node.',\n    //   );\n    // }\n\n    let node1Root: INode = other;\n    // eslint-disable-next-line @typescript-eslint/no-this-alias\n    let node2Root: INode = this;\n    const node1Hierarchy: INode[] = [node1Root];\n    const node2Hierarchy: INode[] = [node2Root];\n    while (node1Root.parentNode ?? node2Root.parentNode) {\n      node1Root = node1Root.parentNode\n        ? (node1Hierarchy.push(node1Root.parentNode), node1Root.parentNode)\n        : node1Root;\n      node2Root = node2Root.parentNode\n        ? (node2Hierarchy.push(node2Root.parentNode), node2Root.parentNode)\n        : node2Root;\n    }\n\n    // Check if they don't share the same root node\n    if (node1Root !== node2Root) {\n      return (\n        Node.DOCUMENT_POSITION_DISCONNECTED |\n        Node.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC |\n        Node.DOCUMENT_POSITION_PRECEDING\n      );\n    }\n\n    const longerHierarchy =\n      node1Hierarchy.length > node2Hierarchy.length\n        ? node1Hierarchy\n        : node2Hierarchy;\n    const shorterHierarchy =\n      longerHierarchy === node1Hierarchy ? node2Hierarchy : node1Hierarchy;\n\n    // Check if either is a container of the other\n    if (\n      longerHierarchy[longerHierarchy.length - shorterHierarchy.length] ===\n      shorterHierarchy[0]\n    ) {\n      return longerHierarchy === node1Hierarchy\n        ? // other is a child of this\n          Node.DOCUMENT_POSITION_CONTAINED_BY | Node.DOCUMENT_POSITION_FOLLOWING\n        : // this is a child of other\n          Node.DOCUMENT_POSITION_CONTAINS | Node.DOCUMENT_POSITION_PRECEDING;\n    }\n\n    // Find their first common ancestor and see whether they\n    // are preceding or following\n    const longerStart = longerHierarchy.length - shorterHierarchy.length;\n    for (let i = shorterHierarchy.length - 1; i >= 0; i--) {\n      const shorterHierarchyNode = shorterHierarchy[i];\n      const longerHierarchyNode = longerHierarchy[longerStart + i];\n\n      // We found the first common ancestor\n      if (longerHierarchyNode !== shorterHierarchyNode) {\n        const siblings = shorterHierarchyNode.parentNode.childNodes as INode[];\n\n        if (\n          siblings.indexOf(shorterHierarchyNode) <\n          siblings.indexOf(longerHierarchyNode)\n        ) {\n          // Shorter is before longer\n          if (shorterHierarchy === node1Hierarchy) {\n            // Other is before this\n            return Node.DOCUMENT_POSITION_PRECEDING;\n          }\n          // This is before other\n          return Node.DOCUMENT_POSITION_FOLLOWING;\n        }\n        // Longer is before shorter\n        if (longerHierarchy === node1Hierarchy) {\n          // Other is before this\n          return Node.DOCUMENT_POSITION_PRECEDING;\n        }\n        // Other is after this\n        return Node.DOCUMENT_POSITION_FOLLOWING;\n      }\n    }\n\n    return Node.DOCUMENT_POSITION_FOLLOWING;\n  }\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Node/cloneNode\n   */\n  abstract cloneNode(deep?: boolean): this;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Node/appendChild\n   */\n  abstract appendChild<T extends INode>(newChild: T, index?: number): T;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Node/insertBefore\n   */\n  abstract insertBefore<T extends INode>(\n    newChild: T,\n    refChild: INode | null,\n  ): T;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Node/removeChild\n   */\n  abstract removeChild<T extends INode>(child: T): T;\n\n  /**\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Node/replaceChild\n   */\n  abstract replaceChild<T extends INode>(newChild: INode, oldChild: T): T;\n\n  destroyed = false;\n  abstract destroy(): void;\n\n  /**\n   * @deprecated\n   * @alias contains\n   */\n  contain<T extends INode>(other: T | null) {\n    return this.contains(other);\n  }\n  contains<T extends INode>(other: T | null): boolean {\n    // the node itself, one of its direct children\n    let tmp: INode | null = other;\n    // @see https://developer.mozilla.org/en-US/docs/Web/API/Node/contains\n    while (tmp && this !== tmp) {\n      tmp = tmp.parentNode;\n    }\n    return !!tmp;\n  }\n\n  getAncestor(n: number): INode | null {\n    // eslint-disable-next-line @typescript-eslint/no-this-alias\n    let temp: INode | null = this;\n    while (n > 0 && temp) {\n      temp = temp.parentNode;\n      n--;\n    }\n    return temp;\n  }\n\n  forEach(callback: (o: INode) => void | boolean) {\n    const stack: INode[] = [this];\n\n    while (stack.length > 0) {\n      const node = stack.pop();\n      const result = callback(node);\n      if (result === false) {\n        break;\n      }\n\n      for (let i = node.childNodes.length - 1; i >= 0; i--) {\n        stack.push(node.childNodes[i]);\n      }\n    }\n  }\n}\n", "import { mat4, vec3 } from 'gl-matrix';\nimport type { CanvasContext, GlobalRuntime, InteractivePointerEvent } from '..';\nimport type { HTML } from '../display-objects';\nimport type { FederatedEvent } from '../dom/FederatedEvent';\nimport { FederatedMouseEvent } from '../dom/FederatedMouseEvent';\nimport { FederatedPointerEvent } from '../dom/FederatedPointerEvent';\nimport { FederatedWheelEvent } from '../dom/FederatedWheelEvent';\nimport { Node } from '../dom/Node';\nimport type {\n  ICanvas,\n  IDocument,\n  IEventTarget,\n  INode,\n} from '../dom/interfaces';\nimport type { PointLike } from '../shapes';\nimport { Point } from '../shapes';\nimport type { Cursor, EventPosition } from '../types';\nimport { isElement } from '../utils/dom';\nimport { clock } from '../utils/event';\n\ntype Picker = (position: EventPosition) => IEventTarget | null;\ntype TrackingData = {\n  pressTargetsByButton: Record<number, IEventTarget[]>;\n  clicksByButton: Record<\n    number,\n    {\n      clickCount: number;\n      target: IEventTarget;\n      timeStamp: number;\n    }\n  >;\n  overTargets: IEventTarget[] | null;\n};\nexport type EmitterListeners = Record<\n  string,\n  | { fn: (...args: any[]) => any; context: any; once: boolean }[]\n  | { fn: (...args: any[]) => any; context: any; once: boolean }\n>;\nconst PROPAGATION_LIMIT = 2048;\n\nexport class EventService {\n  constructor(\n    private globalRuntime: GlobalRuntime,\n    private context: CanvasContext,\n  ) {}\n\n  private rootTarget: IEventTarget;\n\n  /**\n   * Store HTML elements in current canvas.\n   */\n  nativeHTMLMap = new WeakMap<HTMLElement, HTML>();\n\n  cursor: Cursor | null = 'default';\n\n  private mappingTable: Record<\n    string,\n    {\n      fn: (e: FederatedEvent) => void;\n      priority: number;\n    }[]\n  > = {};\n  private mappingState: Record<string, any> = {\n    trackingData: {},\n  };\n  private eventPool: Map<typeof FederatedEvent, FederatedEvent[]> = new Map();\n\n  private pickHandler: Picker;\n\n  private tmpMatrix = mat4.create();\n  private tmpVec3 = vec3.create();\n\n  init() {\n    this.rootTarget = this.context.renderingContext.root.parentNode; // document\n    this.addEventMapping('pointerdown', this.onPointerDown);\n    this.addEventMapping('pointerup', this.onPointerUp);\n    this.addEventMapping('pointermove', this.onPointerMove);\n    this.addEventMapping('pointerout', this.onPointerOut);\n    this.addEventMapping('pointerleave', this.onPointerOut);\n    this.addEventMapping('pointercancel', this.onPointerCancel);\n    this.addEventMapping('pointerover', this.onPointerOver);\n    this.addEventMapping('pointerupoutside', this.onPointerUpOutside);\n    this.addEventMapping('wheel', this.onWheel);\n    this.addEventMapping('click', this.onClick);\n  }\n\n  destroy() {\n    this.mappingTable = {};\n    this.mappingState = {};\n    this.eventPool.clear();\n  }\n\n  private getScale() {\n    const bbox = this.context.contextService.getBoundingClientRect();\n    let scaleX = 1;\n    let scaleY = 1;\n    const $el =\n      this.context.contextService.getDomElement() as HTMLCanvasElement;\n    if ($el && bbox) {\n      const { offsetWidth, offsetHeight } = $el;\n      if (offsetWidth && offsetHeight) {\n        scaleX = bbox.width / offsetWidth;\n        scaleY = bbox.height / offsetHeight;\n      }\n    }\n    return {\n      scaleX,\n      scaleY,\n      bbox,\n    };\n  }\n\n  /**\n   * Should account for CSS Transform applied on container.\n   * @see https://github.com/antvis/G/issues/1161\n   * @see https://github.com/antvis/G/issues/1677\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/MouseEvent/offsetX\n   */\n  client2Viewport(client: PointLike): PointLike {\n    const { scaleX, scaleY, bbox } = this.getScale();\n    return new Point(\n      (client.x - (bbox?.left || 0)) / scaleX,\n      (client.y - (bbox?.top || 0)) / scaleY,\n    );\n  }\n\n  viewport2Client(canvas: PointLike): PointLike {\n    const { scaleX, scaleY, bbox } = this.getScale();\n    return new Point(\n      (canvas.x + (bbox?.left || 0)) * scaleX,\n      (canvas.y + (bbox?.top || 0)) * scaleY,\n    );\n  }\n\n  viewport2Canvas({ x, y }: PointLike): PointLike {\n    const canvas = (this.rootTarget as IDocument).defaultView;\n    const camera = canvas.getCamera();\n\n    const { width, height } = this.context.config;\n\n    const projectionMatrixInverse = camera.getPerspectiveInverse();\n    const worldMatrix = camera.getWorldTransform();\n    const vpMatrix = mat4.multiply(\n      this.tmpMatrix,\n      worldMatrix,\n      projectionMatrixInverse,\n    );\n\n    const viewport = vec3.set(\n      this.tmpVec3,\n      (x / width) * 2 - 1,\n      (1 - y / height) * 2 - 1,\n      0,\n    );\n\n    vec3.transformMat4(viewport, viewport, vpMatrix);\n\n    return new Point(viewport[0], viewport[1]);\n  }\n\n  canvas2Viewport(canvasP: PointLike): PointLike {\n    const canvas = (this.rootTarget as IDocument).defaultView;\n    const camera = canvas.getCamera();\n\n    // World -> Clip\n    const projectionMatrix = camera.getPerspective();\n    const viewMatrix = camera.getViewTransform();\n    const vpMatrix = mat4.multiply(\n      this.tmpMatrix,\n      projectionMatrix,\n      viewMatrix,\n    );\n\n    const clip = vec3.set(this.tmpVec3, canvasP.x, canvasP.y, 0);\n    vec3.transformMat4(this.tmpVec3, this.tmpVec3, vpMatrix);\n\n    // Clip -> NDC -> Viewport, flip Y\n    const { width, height } = this.context.config;\n    return new Point(\n      ((clip[0] + 1) / 2) * width,\n      (1 - (clip[1] + 1) / 2) * height,\n    );\n  }\n\n  setPickHandler(pickHandler: Picker) {\n    this.pickHandler = pickHandler;\n  }\n\n  addEventMapping(type: string, fn: (e: FederatedEvent) => void) {\n    if (!this.mappingTable[type]) {\n      this.mappingTable[type] = [];\n    }\n\n    this.mappingTable[type].push({\n      fn,\n      priority: 0,\n    });\n    this.mappingTable[type].sort((a, b) => a.priority - b.priority);\n  }\n\n  mapEvent(e: FederatedEvent) {\n    if (!this.rootTarget) {\n      return;\n    }\n\n    const mappers = this.mappingTable[e.type];\n\n    if (mappers) {\n      for (let i = 0, j = mappers.length; i < j; i++) {\n        mappers[i].fn(e);\n      }\n    } else {\n      console.warn(`[EventService]: Event mapping not defined for ${e.type}`);\n    }\n  }\n\n  onPointerDown = (from: FederatedPointerEvent) => {\n    const e = this.createPointerEvent(from);\n\n    this.dispatchEvent(e, 'pointerdown');\n\n    if (e.pointerType === 'touch') {\n      this.dispatchEvent(e, 'touchstart');\n    } else if (e.pointerType === 'mouse' || e.pointerType === 'pen') {\n      const isRightButton = e.button === 2;\n      this.dispatchEvent(e, isRightButton ? 'rightdown' : 'mousedown');\n    }\n\n    const trackingData = this.trackingData(from.pointerId);\n\n    trackingData.pressTargetsByButton[from.button] = e.composedPath();\n\n    this.freeEvent(e);\n  };\n\n  onPointerUp = (from: FederatedPointerEvent) => {\n    const now = clock.now();\n    const e = this.createPointerEvent(\n      from,\n      undefined,\n      undefined,\n      this.context.config.alwaysTriggerPointerEventOnCanvas\n        ? this.rootTarget\n        : undefined,\n    );\n\n    this.dispatchEvent(e, 'pointerup');\n\n    if (e.pointerType === 'touch') {\n      this.dispatchEvent(e, 'touchend');\n    } else if (e.pointerType === 'mouse' || e.pointerType === 'pen') {\n      const isRightButton = e.button === 2;\n      this.dispatchEvent(e, isRightButton ? 'rightup' : 'mouseup');\n    }\n\n    const trackingData = this.trackingData(from.pointerId);\n    const pressTarget = this.findMountedTarget(\n      trackingData.pressTargetsByButton[from.button],\n    );\n\n    let clickTarget = pressTarget;\n\n    // pointerupoutside only bubbles. It only bubbles upto the parent that doesn't contain\n    // the pointerup location.\n    if (pressTarget && !e.composedPath().includes(pressTarget)) {\n      let currentTarget: IEventTarget | null = pressTarget;\n\n      while (currentTarget && !e.composedPath().includes(currentTarget)) {\n        e.currentTarget = currentTarget;\n\n        this.notifyTarget(e, 'pointerupoutside');\n\n        if (e.pointerType === 'touch') {\n          this.notifyTarget(e, 'touchendoutside');\n        } else if (e.pointerType === 'mouse' || e.pointerType === 'pen') {\n          const isRightButton = e.button === 2;\n\n          this.notifyTarget(\n            e,\n            isRightButton ? 'rightupoutside' : 'mouseupoutside',\n          );\n        }\n\n        if (Node.isNode(currentTarget)) {\n          currentTarget = currentTarget.parentNode;\n        }\n      }\n\n      delete trackingData.pressTargetsByButton[from.button];\n\n      // currentTarget is the most specific ancestor holding both the pointerdown and pointerup\n      // targets. That is - it's our click target!\n      clickTarget = currentTarget;\n    }\n\n    if (clickTarget) {\n      const clickEvent = this.clonePointerEvent(e, 'click');\n\n      clickEvent.target = clickTarget;\n      clickEvent.path = [];\n\n      if (!trackingData.clicksByButton[from.button]) {\n        trackingData.clicksByButton[from.button] = {\n          clickCount: 0,\n          target: clickEvent.target,\n          timeStamp: now,\n        };\n      }\n\n      const canvas =\n        this.context.renderingContext.root.ownerDocument.defaultView;\n      const clickHistory = trackingData.clicksByButton[from.button];\n\n      if (\n        clickHistory.target === clickEvent.target &&\n        now - clickHistory.timeStamp < canvas.getConfig().dblClickSpeed\n      ) {\n        ++clickHistory.clickCount;\n      } else {\n        clickHistory.clickCount = 1;\n      }\n\n      clickHistory.target = clickEvent.target;\n      clickHistory.timeStamp = now;\n\n      clickEvent.detail = clickHistory.clickCount;\n\n      // @see https://github.com/antvis/G/issues/1091\n      if (!e.detail?.preventClick) {\n        if (\n          !this.context.config.useNativeClickEvent &&\n          (clickEvent.pointerType === 'mouse' ||\n            clickEvent.pointerType === 'touch')\n        ) {\n          this.dispatchEvent(clickEvent, 'click');\n        }\n        this.dispatchEvent(clickEvent, 'pointertap');\n      }\n\n      this.freeEvent(clickEvent);\n    }\n\n    this.freeEvent(e);\n  };\n\n  onPointerMove = (from: FederatedPointerEvent) => {\n    const e = this.createPointerEvent(\n      from,\n      undefined,\n      undefined,\n      this.context.config.alwaysTriggerPointerEventOnCanvas\n        ? this.rootTarget\n        : undefined,\n    );\n\n    const isMouse = e.pointerType === 'mouse' || e.pointerType === 'pen';\n    const trackingData = this.trackingData(from.pointerId);\n    const outTarget = this.findMountedTarget(trackingData.overTargets);\n\n    // First pointerout/pointerleave\n    if (trackingData.overTargets && outTarget !== e.target) {\n      // pointerout always occurs on the overTarget when the pointer hovers over another element.\n      const outType = from.type === 'mousemove' ? 'mouseout' : 'pointerout';\n      const outEvent = this.createPointerEvent(\n        from,\n        outType,\n        outTarget || undefined,\n      );\n\n      this.dispatchEvent(outEvent, 'pointerout');\n      if (isMouse) this.dispatchEvent(outEvent, 'mouseout');\n\n      // If the pointer exits overTarget and its descendants, then a pointerleave event is also fired. This event\n      // is dispatched to all ancestors that no longer capture the pointer.\n      if (!e.composedPath().includes(outTarget)) {\n        const leaveEvent = this.createPointerEvent(\n          from,\n          'pointerleave',\n          outTarget || undefined,\n        );\n\n        leaveEvent.eventPhase = leaveEvent.AT_TARGET;\n\n        while (\n          leaveEvent.target &&\n          !e.composedPath().includes(leaveEvent.target)\n        ) {\n          leaveEvent.currentTarget = leaveEvent.target;\n\n          this.notifyTarget(leaveEvent);\n          if (isMouse) {\n            this.notifyTarget(leaveEvent, 'mouseleave');\n          }\n\n          if (Node.isNode(leaveEvent.target)) {\n            leaveEvent.target = leaveEvent.target.parentNode;\n          }\n        }\n\n        this.freeEvent(leaveEvent);\n      }\n\n      this.freeEvent(outEvent);\n    }\n\n    // Then pointerover\n    if (outTarget !== e.target) {\n      // pointerover always occurs on the new overTarget\n      const overType = from.type === 'mousemove' ? 'mouseover' : 'pointerover';\n      const overEvent = this.clonePointerEvent(e, overType); // clone faster\n\n      this.dispatchEvent(overEvent, 'pointerover');\n      if (isMouse) this.dispatchEvent(overEvent, 'mouseover');\n\n      // Probe whether the newly hovered Node is an ancestor of the original overTarget.\n      let overTargetAncestor =\n        outTarget && Node.isNode(outTarget) && outTarget.parentNode;\n\n      while (\n        overTargetAncestor &&\n        overTargetAncestor !==\n          (Node.isNode(this.rootTarget) && this.rootTarget.parentNode)\n      ) {\n        if (overTargetAncestor === e.target) break;\n\n        overTargetAncestor = overTargetAncestor.parentNode;\n      }\n\n      // The pointer has entered a non-ancestor of the original overTarget. This means we need a pointerentered\n      // event.\n      const didPointerEnter =\n        !overTargetAncestor ||\n        overTargetAncestor ===\n          (Node.isNode(this.rootTarget) && this.rootTarget.parentNode);\n\n      if (didPointerEnter) {\n        const enterEvent = this.clonePointerEvent(e, 'pointerenter');\n\n        enterEvent.eventPhase = enterEvent.AT_TARGET;\n\n        while (\n          enterEvent.target &&\n          enterEvent.target !== outTarget &&\n          enterEvent.target !==\n            (Node.isNode(this.rootTarget) && this.rootTarget.parentNode)\n        ) {\n          enterEvent.currentTarget = enterEvent.target;\n\n          this.notifyTarget(enterEvent);\n          if (isMouse) this.notifyTarget(enterEvent, 'mouseenter');\n\n          if (Node.isNode(enterEvent.target)) {\n            enterEvent.target = enterEvent.target.parentNode;\n          }\n        }\n\n        this.freeEvent(enterEvent);\n      }\n\n      this.freeEvent(overEvent);\n    }\n\n    // Then pointermove\n    this.dispatchEvent(e, 'pointermove');\n\n    if (e.pointerType === 'touch') this.dispatchEvent(e, 'touchmove');\n\n    if (isMouse) {\n      this.dispatchEvent(e, 'mousemove');\n      this.cursor = this.getCursor(e.target);\n    }\n\n    trackingData.overTargets = e.composedPath();\n\n    this.freeEvent(e);\n  };\n\n  onPointerOut = (from: FederatedPointerEvent) => {\n    const trackingData = this.trackingData(from.pointerId);\n\n    if (trackingData.overTargets) {\n      const isMouse =\n        from.pointerType === 'mouse' || from.pointerType === 'pen';\n      const outTarget = this.findMountedTarget(trackingData.overTargets);\n\n      // pointerout first\n      const outEvent = this.createPointerEvent(\n        from,\n        'pointerout',\n        outTarget || undefined,\n      );\n\n      this.dispatchEvent(outEvent);\n      if (isMouse) this.dispatchEvent(outEvent, 'mouseout');\n\n      // pointerleave(s) are also dispatched b/c the pointer must've left rootTarget and its descendants to\n      // get an upstream pointerout event (upstream events do not know rootTarget has descendants).\n      const leaveEvent = this.createPointerEvent(\n        from,\n        'pointerleave',\n        outTarget || undefined,\n      );\n\n      leaveEvent.eventPhase = leaveEvent.AT_TARGET;\n\n      while (\n        leaveEvent.target &&\n        leaveEvent.target !==\n          (Node.isNode(this.rootTarget) && this.rootTarget.parentNode)\n      ) {\n        leaveEvent.currentTarget = leaveEvent.target;\n\n        this.notifyTarget(leaveEvent);\n        if (isMouse) {\n          this.notifyTarget(leaveEvent, 'mouseleave');\n        }\n\n        if (Node.isNode(leaveEvent.target)) {\n          leaveEvent.target = leaveEvent.target.parentNode;\n        }\n      }\n\n      trackingData.overTargets = null;\n\n      this.freeEvent(outEvent);\n      this.freeEvent(leaveEvent);\n    }\n\n    this.cursor = null;\n  };\n\n  onPointerOver = (from: FederatedPointerEvent) => {\n    const trackingData = this.trackingData(from.pointerId);\n    const e = this.createPointerEvent(from);\n\n    const isMouse = e.pointerType === 'mouse' || e.pointerType === 'pen';\n\n    this.dispatchEvent(e, 'pointerover');\n    if (isMouse) this.dispatchEvent(e, 'mouseover');\n    if (e.pointerType === 'mouse') this.cursor = this.getCursor(e.target);\n\n    // pointerenter events must be fired since the pointer entered from upstream.\n    const enterEvent = this.clonePointerEvent(e, 'pointerenter');\n\n    enterEvent.eventPhase = enterEvent.AT_TARGET;\n\n    while (\n      enterEvent.target &&\n      enterEvent.target !==\n        (Node.isNode(this.rootTarget) && this.rootTarget.parentNode)\n    ) {\n      enterEvent.currentTarget = enterEvent.target;\n\n      this.notifyTarget(enterEvent);\n      if (isMouse) {\n        // mouseenter should not bubble\n        // @see https://developer.mozilla.org/en-US/docs/Web/API/Element/mouseenter_event#usage_notes\n        this.notifyTarget(enterEvent, 'mouseenter');\n      }\n\n      if (Node.isNode(enterEvent.target)) {\n        enterEvent.target = enterEvent.target.parentNode;\n      }\n    }\n\n    trackingData.overTargets = e.composedPath();\n\n    this.freeEvent(e);\n    this.freeEvent(enterEvent);\n  };\n\n  onPointerUpOutside = (from: FederatedPointerEvent) => {\n    const trackingData = this.trackingData(from.pointerId);\n    const pressTarget = this.findMountedTarget(\n      trackingData.pressTargetsByButton[from.button],\n    );\n    const e = this.createPointerEvent(from);\n\n    if (pressTarget) {\n      let currentTarget: IEventTarget | null = pressTarget;\n\n      while (currentTarget) {\n        e.currentTarget = currentTarget;\n\n        this.notifyTarget(e, 'pointerupoutside');\n\n        if (e.pointerType === 'touch') {\n          // this.notifyTarget(e, 'touchendoutside');\n        } else if (e.pointerType === 'mouse' || e.pointerType === 'pen') {\n          this.notifyTarget(\n            e,\n            e.button === 2 ? 'rightupoutside' : 'mouseupoutside',\n          );\n        }\n\n        if (Node.isNode(currentTarget)) {\n          currentTarget = currentTarget.parentNode;\n        }\n      }\n\n      delete trackingData.pressTargetsByButton[from.button];\n    }\n\n    this.freeEvent(e);\n  };\n\n  onWheel = (from: FederatedWheelEvent) => {\n    const wheelEvent = this.createWheelEvent(from);\n\n    this.dispatchEvent(wheelEvent);\n    this.freeEvent(wheelEvent);\n  };\n\n  onClick = (from: FederatedPointerEvent) => {\n    if (this.context.config.useNativeClickEvent) {\n      const e = this.createPointerEvent(from);\n      this.dispatchEvent(e);\n      this.freeEvent(e);\n    }\n  };\n\n  onPointerCancel = (from: FederatedPointerEvent) => {\n    const e = this.createPointerEvent(\n      from,\n      undefined,\n      undefined,\n      this.context.config.alwaysTriggerPointerEventOnCanvas\n        ? this.rootTarget\n        : undefined,\n    );\n\n    this.dispatchEvent(e);\n    this.freeEvent(e);\n  };\n\n  dispatchEvent(e: FederatedEvent, type?: string, skipPropagate?: boolean) {\n    // Canvas should skip\n    if (!skipPropagate) {\n      e.propagationStopped = false;\n      e.propagationImmediatelyStopped = false;\n      this.propagate(e, type);\n    } else {\n      // target phase\n      e.eventPhase = e.AT_TARGET;\n      const canvas = (this.rootTarget as IDocument).defaultView || null;\n      e.currentTarget = canvas;\n      this.notifyListeners(e, type);\n    }\n  }\n\n  propagate(e: FederatedEvent, type?: string) {\n    if (!e.target) {\n      return;\n    }\n\n    // [target, parent, root, Canvas]\n    const composedPath = e.composedPath();\n\n    // event flow: capture -> target -> bubbling\n\n    // capture phase\n    e.eventPhase = e.CAPTURING_PHASE;\n    for (let i = composedPath.length - 1; i >= 1; i--) {\n      e.currentTarget = composedPath[i];\n      this.notifyTarget(e, type);\n      if (e.propagationStopped || e.propagationImmediatelyStopped) return;\n    }\n\n    // target phase\n    e.eventPhase = e.AT_TARGET;\n    e.currentTarget = e.target;\n    this.notifyTarget(e, type);\n    if (e.propagationStopped || e.propagationImmediatelyStopped) return;\n\n    // find current target in composed path\n    const index = composedPath.indexOf(e.currentTarget);\n\n    // bubbling phase\n    e.eventPhase = e.BUBBLING_PHASE;\n    for (let i = index + 1; i < composedPath.length; i++) {\n      e.currentTarget = composedPath[i];\n      this.notifyTarget(e, type);\n      if (e.propagationStopped || e.propagationImmediatelyStopped) return;\n    }\n  }\n\n  propagationPath(target: IEventTarget): IEventTarget[] {\n    const propagationPath = [target];\n    const canvas = (this.rootTarget as IDocument).defaultView || null;\n\n    if (canvas && canvas === (target as unknown as ICanvas)) {\n      propagationPath.unshift(canvas.document);\n      return propagationPath;\n    }\n\n    for (let i = 0; i < PROPAGATION_LIMIT && target !== this.rootTarget; i++) {\n      // if (Node.isNode(target) && !target.parentNode) {\n      //   throw new Error('Cannot find propagation path to disconnected target');\n      // }\n\n      if (Node.isNode(target) && target.parentNode) {\n        // [target, parent, parent, root]\n        propagationPath.push(target.parentNode);\n        target = target.parentNode;\n      }\n    }\n\n    if (canvas) {\n      // @ts-ignore\n      propagationPath.push(canvas);\n    }\n\n    return propagationPath;\n  }\n\n  hitTest(position: EventPosition): IEventTarget | null {\n    const { viewportX, viewportY } = position;\n    const { width, height, disableHitTesting } = this.context.config;\n    // outside canvas\n    if (\n      viewportX < 0 ||\n      viewportY < 0 ||\n      viewportX > width ||\n      viewportY > height\n    ) {\n      return null;\n    }\n\n    return (\n      (!disableHitTesting && this.pickHandler(position)) ||\n      this.rootTarget || // return Document\n      null\n    );\n  }\n\n  /**\n   * whether the native event trigger came from Canvas,\n   * should account for HTML shape\n   */\n  isNativeEventFromCanvas(\n    $el: HTMLCanvasElement,\n    nativeEvent: InteractivePointerEvent,\n  ) {\n    let target = nativeEvent?.target as Element;\n    // Get event target inside a web component.\n    // @see https://stackoverflow.com/questions/57963312/get-event-target-inside-a-web-component\n    if (target?.shadowRoot) {\n      target = nativeEvent.composedPath()[0] as Element;\n    }\n\n    if (target) {\n      // from <canvas>\n      if (target === $el) {\n        return true;\n      }\n\n      // from <svg>\n      if ($el && ($el as unknown as HTMLCanvasElement).contains) {\n        return ($el as unknown as HTMLCanvasElement).contains(target as any);\n      }\n    }\n\n    if (nativeEvent?.composedPath) {\n      return nativeEvent.composedPath().indexOf($el as EventTarget) > -1;\n    }\n\n    // account for Touch\n    return false;\n  }\n\n  /**\n   * Find HTML from composed path in native UI event.\n   */\n  private getExistedHTML(event: FederatedEvent): HTML {\n    if (event.nativeEvent.composedPath) {\n      for (const eventTarget of event.nativeEvent.composedPath() as HTMLElement[]) {\n        const existed = this.nativeHTMLMap.get(eventTarget);\n        if (existed) {\n          return existed;\n        }\n      }\n    }\n\n    return null;\n  }\n\n  private pickTarget(\n    event: FederatedPointerEvent | FederatedWheelEvent,\n  ): INode {\n    return this.hitTest({\n      clientX: event.clientX,\n      clientY: event.clientY,\n      viewportX: event.viewportX,\n      viewportY: event.viewportY,\n      x: event.canvasX,\n      y: event.canvasY,\n    }) as INode;\n  }\n\n  private createPointerEvent(\n    from: FederatedPointerEvent,\n    type?: string,\n    target?: IEventTarget,\n    fallbackTarget?: IEventTarget,\n  ): FederatedPointerEvent {\n    const event = this.allocateEvent(FederatedPointerEvent);\n\n    this.copyPointerData(from, event);\n    this.copyMouseData(from, event);\n    this.copyData(from, event);\n\n    event.nativeEvent = from.nativeEvent;\n    event.originalEvent = from;\n\n    const existedHTML = this.getExistedHTML(event);\n    const $el =\n      this.context.contextService.getDomElement() as HTMLCanvasElement;\n    event.target =\n      target ??\n      (existedHTML ||\n        (this.isNativeEventFromCanvas($el, event.nativeEvent) &&\n          this.pickTarget(event)) ||\n        fallbackTarget);\n\n    if (typeof type === 'string') {\n      event.type = type;\n    }\n\n    return event;\n  }\n\n  private createWheelEvent(from: FederatedWheelEvent): FederatedWheelEvent {\n    const event = this.allocateEvent(FederatedWheelEvent);\n\n    this.copyWheelData(from, event);\n    this.copyMouseData(from, event);\n    this.copyData(from, event);\n\n    event.nativeEvent = from.nativeEvent;\n    event.originalEvent = from;\n    const existedHTML = this.getExistedHTML(event);\n\n    const $el =\n      this.context.contextService.getDomElement() as HTMLCanvasElement;\n    event.target =\n      existedHTML ||\n      (this.isNativeEventFromCanvas($el, event.nativeEvent) &&\n        this.pickTarget(event));\n    return event;\n  }\n\n  private trackingData(id: number): TrackingData {\n    if (!this.mappingState.trackingData[id]) {\n      this.mappingState.trackingData[id] = {\n        pressTargetsByButton: {},\n        clicksByButton: {},\n        overTarget: null,\n      };\n    }\n\n    return this.mappingState.trackingData[id];\n  }\n\n  cloneWheelEvent(from: FederatedWheelEvent) {\n    const event = this.allocateEvent(FederatedWheelEvent);\n\n    event.nativeEvent = from.nativeEvent;\n    event.originalEvent = from.originalEvent;\n\n    this.copyWheelData(from, event);\n    this.copyMouseData(from, event);\n    this.copyData(from, event);\n\n    event.target = from.target;\n    event.path = from.composedPath().slice();\n    event.type = from.type;\n\n    return event;\n  }\n\n  clonePointerEvent(\n    from: FederatedPointerEvent,\n    type?: string,\n  ): FederatedPointerEvent {\n    const event = this.allocateEvent(FederatedPointerEvent);\n\n    event.nativeEvent = from.nativeEvent;\n    event.originalEvent = from.originalEvent;\n\n    this.copyPointerData(from, event);\n    this.copyMouseData(from, event);\n    this.copyData(from, event);\n\n    event.target = from.target;\n    event.path = from.composedPath().slice();\n    event.type = type ?? event.type;\n\n    return event;\n  }\n\n  private copyPointerData(\n    from: FederatedPointerEvent,\n    to: FederatedPointerEvent,\n  ) {\n    // if (\n    //   !(\n    //     from instanceof FederatedPointerEvent &&\n    //     to instanceof FederatedPointerEvent\n    //   )\n    // )\n    //   return;\n\n    to.pointerId = from.pointerId;\n    to.width = from.width;\n    to.height = from.height;\n    to.isPrimary = from.isPrimary;\n    to.pointerType = from.pointerType;\n    to.pressure = from.pressure;\n    to.tangentialPressure = from.tangentialPressure;\n    to.tiltX = from.tiltX;\n    to.tiltY = from.tiltY;\n    to.twist = from.twist;\n  }\n\n  private copyMouseData(from: FederatedMouseEvent, to: FederatedMouseEvent) {\n    // if (\n    //   !(\n    //     from instanceof FederatedMouseEvent && to instanceof FederatedMouseEvent\n    //   )\n    // )\n    //   return;\n\n    to.altKey = from.altKey;\n    to.button = from.button;\n    to.buttons = from.buttons;\n    to.ctrlKey = from.ctrlKey;\n    to.metaKey = from.metaKey;\n    to.shiftKey = from.shiftKey;\n    to.client.copyFrom(from.client);\n    to.movement.copyFrom(from.movement);\n    to.canvas.copyFrom(from.canvas);\n    to.screen.copyFrom(from.screen);\n    to.global.copyFrom(from.global);\n    to.offset.copyFrom(from.offset);\n  }\n\n  private copyWheelData(from: FederatedWheelEvent, to: FederatedWheelEvent) {\n    to.deltaMode = from.deltaMode;\n    to.deltaX = from.deltaX;\n    to.deltaY = from.deltaY;\n    to.deltaZ = from.deltaZ;\n  }\n\n  private copyData(from: FederatedEvent, to: FederatedEvent) {\n    to.isTrusted = from.isTrusted;\n    to.timeStamp = clock.now();\n    to.type = from.type;\n    to.detail = from.detail;\n    to.view = from.view;\n    to.page.copyFrom(from.page);\n    to.viewport.copyFrom(from.viewport);\n  }\n\n  private allocateEvent<T extends FederatedEvent>(constructor: {\n    new (boundary: EventService): T;\n  }): T {\n    if (!this.eventPool.has(constructor as any)) {\n      this.eventPool.set(constructor as any, []);\n    }\n\n    // @ts-ignore\n    const event =\n      (this.eventPool.get(constructor as any).pop() as T) ||\n      new constructor(this);\n\n    event.eventPhase = event.NONE;\n    event.currentTarget = null;\n    event.path = [];\n    event.target = null;\n\n    return event;\n  }\n\n  private freeEvent<T extends FederatedEvent>(event: T) {\n    if (event.manager !== this)\n      throw new Error(\n        'It is illegal to free an event not managed by this EventBoundary!',\n      );\n\n    const { constructor } = event;\n\n    if (!this.eventPool.has(constructor as any)) {\n      this.eventPool.set(constructor as any, []);\n    }\n\n    // @ts-ignore\n    this.eventPool.get(constructor as any).push(event);\n  }\n\n  private notifyTarget(e: FederatedEvent, type?: string) {\n    type = type ?? e.type;\n    const key =\n      e.eventPhase === e.CAPTURING_PHASE || e.eventPhase === e.AT_TARGET\n        ? `${type}capture`\n        : type;\n\n    this.notifyListeners(e, key);\n\n    if (e.eventPhase === e.AT_TARGET) {\n      this.notifyListeners(e, type);\n    }\n  }\n\n  private notifyListeners(e: FederatedEvent, type: string) {\n    // hack EventEmitter, stops if the `propagationImmediatelyStopped` flag is set\n    const { emitter } = e.currentTarget;\n    // @ts-ignore\n    const listeners = (emitter._events as EmitterListeners)[type];\n\n    if (!listeners) return;\n\n    if ('fn' in listeners) {\n      if (listeners.once) {\n        emitter.removeListener(type, listeners.fn, undefined, true);\n      }\n      listeners.fn.call(e.currentTarget || listeners.context, e);\n      // listeners.fn.call(listeners.context, e);\n    } else {\n      for (\n        let i = 0;\n        i < listeners.length && !e.propagationImmediatelyStopped;\n        i++\n      ) {\n        if (listeners[i].once) {\n          emitter.removeListener(type, listeners[i].fn, undefined, true);\n        }\n        listeners[i].fn.call(e.currentTarget || listeners[i].context, e);\n        // listeners[i].fn.call(listeners[i].context, e);\n      }\n    }\n  }\n\n  /**\n   * some detached nodes may exist in propagation path, need to skip them\n   */\n  private findMountedTarget(\n    propagationPath: IEventTarget[] | null,\n  ): IEventTarget | null {\n    if (!propagationPath) {\n      return null;\n    }\n\n    let currentTarget = propagationPath[propagationPath.length - 1];\n    for (let i = propagationPath.length - 2; i >= 0; i--) {\n      const target = propagationPath[i];\n      if (\n        target === this.rootTarget ||\n        (Node.isNode(target) && target.parentNode === currentTarget)\n      ) {\n        currentTarget = propagationPath[i];\n      } else {\n        break;\n      }\n    }\n\n    return currentTarget;\n  }\n\n  private getCursor(target: IEventTarget | null) {\n    let tmp: IEventTarget | null = target;\n    while (tmp) {\n      const cursor = isElement(tmp) && tmp.getAttribute('cursor');\n      if (cursor) {\n        return cursor;\n      }\n      tmp = Node.isNode(tmp) && tmp.parentNode;\n    }\n  }\n}\n", "import type { CanvasLike } from '..';\nimport { runtime } from '../global-runtime';\n\n/**\n * used in following scenes:\n * - g `ctx.measureText`\n * - g-plugin-canvas-picker `ctx.isPointInPath`\n * - g-plugin-device-renderer `ctx.createLinearGradient` and generate texture\n *\n * @see https://blog.scottlogic.com/2020/03/19/offscreen-canvas.html\n */\nexport class OffscreenCanvasCreator {\n  private canvas: CanvasLike;\n  private context: CanvasRenderingContext2D | OffscreenCanvasRenderingContext2D;\n\n  /**\n   * @returns new canvas instance\n   */\n  static createCanvas(): HTMLCanvasElement | OffscreenCanvas | null {\n    try {\n      return new window.OffscreenCanvas(0, 0);\n    } catch {\n      //\n    }\n\n    try {\n      return document.createElement('canvas');\n    } catch {\n      //\n    }\n\n    return null;\n  }\n\n  getOrCreateCanvas(\n    offscreenCanvas: CanvasLike,\n    contextAttributes?: CanvasRenderingContext2DSettings,\n  ): CanvasLike {\n    if (this.canvas) {\n      return this.canvas;\n    }\n\n    // user-defined offscreen canvas\n    if (offscreenCanvas || runtime.offscreenCanvas) {\n      this.canvas = offscreenCanvas || runtime.offscreenCanvas;\n      this.context = this.canvas.getContext('2d', {\n        willReadFrequently: true,\n        ...contextAttributes,\n      });\n    } else {\n      try {\n        // OffscreenCanvas2D measureText can be up to 40% faster.\n        this.canvas = new window.OffscreenCanvas(0, 0) as unknown as CanvasLike;\n        this.context = this.canvas.getContext('2d', {\n          willReadFrequently: true,\n          ...contextAttributes,\n        });\n        if (!this.context || !this.context.measureText) {\n          this.canvas = document.createElement('canvas');\n          this.context = this.canvas.getContext('2d');\n        }\n      } catch {\n        this.canvas = document.createElement('canvas');\n        this.context = this.canvas.getContext('2d', {\n          willReadFrequently: true,\n          ...contextAttributes,\n        });\n      }\n    }\n\n    this.canvas.width = 10;\n    this.canvas.height = 10;\n\n    return this.canvas;\n  }\n\n  getOrCreateContext(\n    offscreenCanvas: CanvasLike,\n    contextAttributes?: CanvasRenderingContext2DSettings,\n  ) {\n    if (this.context) {\n      return this.context;\n    }\n\n    this.getOrCreateCanvas(offscreenCanvas, contextAttributes);\n    return this.context;\n  }\n}\n", "import type { DisplayObject, Group } from '../display-objects';\n\n/**\n * why we need re-render\n */\nexport enum RenderReason {\n  CAMERA_CHANGED,\n  DISPLAY_OBJECT_CHANGED,\n  NONE,\n}\nexport interface RenderingContext {\n  /**\n   * root of scenegraph\n   */\n  root: Group;\n\n  /**\n   * force rendering at next frame\n   */\n  force: boolean;\n\n  /**\n   * reason of re-render, reset after every renderred frame\n   */\n  renderReasons: Set<RenderReason>;\n\n  renderListCurrentFrame: DisplayObject[];\n\n  unculledEntities: number[];\n\n  dirty: boolean;\n}\n", "import type { ICamera } from '../camera';\nimport { SortReason, Sortable } from '../components';\nimport type { DisplayObject } from '../display-objects';\nimport type { CanvasContext, IChildNode, IElement } from '../dom';\nimport type { GlobalRuntime } from '../global-runtime';\nimport type {\n  CanvasConfig,\n  EventPosition,\n  InteractivePointerEvent,\n} from '../types';\nimport {\n  AsyncParallelHook,\n  AsyncSeriesWaterfallHook,\n  SyncHook,\n  SyncWaterfallHook,\n  sortByZIndex,\n  sortedIndex,\n} from '../utils';\nimport type { RenderingContext } from './RenderingContext';\nimport { RenderReason } from './RenderingContext';\n\nexport type RenderingPluginContext = CanvasContext & GlobalRuntime;\n\nexport interface RenderingPlugin {\n  apply: (context: RenderingPluginContext, runtime: GlobalRuntime) => void;\n}\n\nexport interface PickingResult {\n  /**\n   * position in canvas coordinate\n   */\n  position: EventPosition;\n  picked: DisplayObject[];\n  /**\n   * only return the topmost object if there are multiple objects overlapped\n   */\n  topmost?: boolean;\n}\n\n/**\n * Use frame renderer implemented by `g-canvas/svg/webgl`, in every frame we do followings:\n * * update & merge dirty rectangles\n * * begin frame\n * * filter by visible\n * * sort by z-index in scene graph\n * * culling with strategies registered in `g-canvas/webgl`\n * * end frame\n */\nexport class RenderingService {\n  constructor(\n    private globalRuntime: GlobalRuntime,\n    private context: CanvasContext,\n  ) {}\n\n  private inited = false;\n\n  private stats = {\n    /**\n     * total display objects in scenegraph\n     */\n    total: 0,\n    /**\n     * number of display objects need to render in current frame\n     */\n    rendered: 0,\n  };\n\n  private zIndexCounter = 0;\n\n  hooks = {\n    /**\n     * called before any frame rendered\n     */\n    init: new SyncHook<[]>(),\n    initAsync: new AsyncParallelHook<[]>(),\n    /**\n     * only dirty object which has sth changed will be rendered\n     */\n    dirtycheck: new SyncWaterfallHook<[DisplayObject], DisplayObject>(),\n    /**\n     * do culling\n     */\n    cull: new SyncWaterfallHook<[DisplayObject, ICamera], DisplayObject>(),\n    /**\n     * called at beginning of each frame, won't get called if nothing to re-render\n     */\n    beginFrame: new SyncHook<[XRFrame]>(),\n    /**\n     * called before every dirty object get rendered\n     */\n    beforeRender: new SyncHook<[DisplayObject]>(),\n    /**\n     * called when every dirty object rendering even it's culled\n     */\n    render: new SyncHook<[DisplayObject]>(),\n    /**\n     * called after every dirty object get rendered\n     */\n    afterRender: new SyncHook<[DisplayObject]>(),\n    /**\n     * commit - draw the result on the canvas\n     */\n    endFrame: new SyncHook<[XRFrame]>(),\n    destroy: new SyncHook<[]>(),\n    /**\n     * use async but faster method such as GPU-based picking in `g-plugin-device-renderer`\n     */\n    pick: new AsyncSeriesWaterfallHook<[PickingResult], PickingResult>(),\n\n    /**\n     * Unsafe but sync version of pick.\n     */\n    pickSync: new SyncWaterfallHook<[PickingResult], PickingResult>(),\n    /**\n     * used in event system\n     */\n    pointerDown: new SyncHook<[InteractivePointerEvent]>(),\n    pointerUp: new SyncHook<[InteractivePointerEvent]>(),\n    pointerMove: new SyncHook<[InteractivePointerEvent]>(),\n    pointerOut: new SyncHook<[InteractivePointerEvent]>(),\n    pointerOver: new SyncHook<[InteractivePointerEvent]>(),\n    pointerWheel: new SyncHook<[InteractivePointerEvent]>(),\n    pointerCancel: new SyncHook<[InteractivePointerEvent]>(),\n    click: new SyncHook<[InteractivePointerEvent]>(),\n  };\n\n  init(callback: () => void) {\n    const context = { ...this.globalRuntime, ...this.context };\n\n    // register rendering plugins\n    this.context.renderingPlugins.forEach((plugin) => {\n      plugin.apply(context, this.globalRuntime);\n    });\n    this.hooks.init.call();\n\n    if (this.hooks.initAsync.getCallbacksNum() === 0) {\n      this.inited = true;\n      callback();\n    } else {\n      this.hooks.initAsync\n        .promise()\n        .then(() => {\n          this.inited = true;\n          callback();\n        })\n        .catch((err) => {});\n    }\n  }\n\n  getStats() {\n    return this.stats;\n  }\n\n  /**\n   * Meet the following conditions:\n   * * disable DirtyRectangleRendering\n   * * camera changed\n   */\n  disableDirtyRectangleRendering() {\n    const { renderer } = this.context.config;\n    const { enableDirtyRectangleRendering } = renderer.getConfig();\n    return (\n      !enableDirtyRectangleRendering ||\n      this.context.renderingContext.renderReasons.has(\n        RenderReason.CAMERA_CHANGED,\n      )\n    );\n  }\n\n  render(\n    canvasConfig: Partial<CanvasConfig>,\n    frame: XRFrame,\n    rerenderCallback: () => void,\n  ) {\n    this.stats.total = 0;\n    this.stats.rendered = 0;\n    this.zIndexCounter = 0;\n\n    const { renderingContext } = this.context;\n\n    this.globalRuntime.sceneGraphService.syncHierarchy(renderingContext.root);\n    this.globalRuntime.sceneGraphService.triggerPendingEvents();\n\n    if (renderingContext.renderReasons.size && this.inited) {\n      // @ts-ignore\n      renderingContext.dirtyRectangleRenderingDisabled =\n        this.disableDirtyRectangleRendering();\n\n      const onlyCameraChanged =\n        renderingContext.renderReasons.size === 1 &&\n        renderingContext.renderReasons.has(RenderReason.CAMERA_CHANGED);\n      const shouldTriggerRenderHooks =\n        !canvasConfig.disableRenderHooks || !onlyCameraChanged;\n\n      if (shouldTriggerRenderHooks) {\n        this.renderDisplayObject(\n          renderingContext.root,\n          canvasConfig,\n          renderingContext,\n        );\n      }\n\n      this.hooks.beginFrame.call(frame);\n\n      if (shouldTriggerRenderHooks) {\n        renderingContext.renderListCurrentFrame.forEach((object) => {\n          this.hooks.beforeRender.call(object);\n          this.hooks.render.call(object);\n          this.hooks.afterRender.call(object);\n        });\n      }\n\n      this.hooks.endFrame.call(frame);\n\n      renderingContext.renderListCurrentFrame = [];\n      renderingContext.renderReasons.clear();\n\n      rerenderCallback();\n    }\n  }\n\n  private renderDisplayObject(\n    displayObject: DisplayObject,\n    canvasConfig: Partial<CanvasConfig>,\n    renderingContext: RenderingContext,\n  ) {\n    const self = this;\n    const { enableDirtyCheck, enableCulling } =\n      canvasConfig.renderer.getConfig();\n\n    function internalRenderSingleDisplayObject(object: DisplayObject) {\n      // TODO: relayout\n\n      // dirtycheck first\n      const { renderable, sortable } = object;\n      // eslint-disable-next-line no-nested-ternary\n      const objectChanged = enableDirtyCheck\n        ? // @ts-ignore\n          renderable.dirty || renderingContext.dirtyRectangleRenderingDisabled\n          ? object\n          : null\n        : object;\n      let objectToRender = null as typeof objectChanged;\n\n      if (objectChanged) {\n        objectToRender = enableCulling\n          ? self.hooks.cull.call(objectChanged, self.context.camera)\n          : objectChanged;\n\n        if (objectToRender) {\n          self.stats.rendered += 1;\n          renderingContext.renderListCurrentFrame.push(objectToRender);\n        }\n      }\n\n      object.dirty(false);\n      sortable.renderOrder = self.zIndexCounter;\n\n      self.zIndexCounter += 1;\n      self.stats.total += 1;\n\n      // sort is very expensive, use cached result if possible\n      if (sortable.dirty) {\n        self.sort(object, sortable);\n        sortable.dirty = false;\n        sortable.dirtyChildren = [];\n        sortable.dirtyReason = undefined;\n      }\n    }\n\n    const stack = [displayObject];\n\n    while (stack.length > 0) {\n      const currentObject = stack.pop();\n\n      internalRenderSingleDisplayObject(currentObject);\n\n      // recursive rendering its children\n      const objects =\n        currentObject.sortable?.sorted?.length > 0\n          ? currentObject.sortable.sorted\n          : currentObject.childNodes;\n      for (let i = objects.length - 1; i >= 0; i--) {\n        stack.push(objects[i] as unknown as DisplayObject);\n      }\n    }\n  }\n\n  private sort(displayObject: DisplayObject, sortable: Sortable) {\n    if (\n      sortable?.sorted?.length > 0 &&\n      sortable.dirtyReason !== SortReason.Z_INDEX_CHANGED\n    ) {\n      // avoid re-sorting the whole children list\n      sortable.dirtyChildren.forEach((child) => {\n        // remove from sorted list\n        const sortIndex = sortable.sorted.indexOf(child);\n        if (sortIndex > -1) {\n          sortable.sorted.splice(sortIndex, 1);\n        }\n\n        const index = displayObject.childNodes.indexOf(child as IChildNode);\n        if (index > -1) {\n          if (sortable.sorted.length === 0) {\n            sortable.sorted.push(child);\n          } else {\n            const index = sortedIndex(\n              sortable.sorted as IElement[],\n              child as IElement,\n            );\n            sortable.sorted.splice(index, 0, child);\n          }\n        }\n      });\n    } else {\n      sortable.sorted = displayObject.childNodes.slice().sort(sortByZIndex);\n    }\n\n    // When the child elements are changed and sorted, if there are no more stacked elements in the child elements (i.e. zIndex != 0), clear the sort list\n    if (\n      sortable.sorted?.length > 0 &&\n      displayObject.childNodes.filter(\n        (child: IElement) => child.parsedStyle.zIndex,\n      ).length === 0\n    ) {\n      sortable.sorted = [];\n    }\n  }\n\n  destroy() {\n    this.inited = false;\n    this.hooks.destroy.call();\n    this.globalRuntime.sceneGraphService.clearPendingEvents();\n  }\n\n  dirtify() {\n    // need re-render\n    this.context.renderingContext.renderReasons.add(\n      RenderReason.DISPLAY_OBJECT_CHANGED,\n    );\n  }\n}\n", "import { isNil } from '@antv/util';\nimport type { IElement } from '../dom/interfaces';\n\nexport interface SceneGraphSelector {\n  selectOne: <R extends IElement, T extends IElement>(\n    query: string,\n    root: R,\n  ) => T | null;\n  selectAll: <R extends IElement, T extends IElement>(\n    query: string,\n    root: R,\n  ) => T[];\n  is: <T extends IElement>(query: string, element: T) => boolean;\n}\n\nconst ATTRIBUTE_REGEXP = /\\[\\s*(.*)=(.*)\\s*\\]/;\n\n/**\n * support the following DOM API:\n * * getElementById\n * * getElementsByClassName\n * * getElementsByName\n * * getElementsByTag\n * * querySelector\n * * querySelectorAll\n */\nexport class DefaultSceneGraphSelector implements SceneGraphSelector {\n  selectOne<R extends IElement, T extends IElement>(\n    query: string,\n    root: R,\n  ): T | null {\n    if (query.startsWith('.')) {\n      return root.find((node) => {\n        // return !node.shadow && node.id === query.substring(1);\n        return (\n          (node?.classList || []).indexOf(this.getIdOrClassname(query)) > -1\n        );\n      });\n    }\n    if (query.startsWith('#')) {\n      // getElementById('id')\n      return root.find((node) => {\n        // return !node.shadow && node.id === query.substring(1);\n        return node.id === this.getIdOrClassname(query);\n      });\n    }\n    if (query.startsWith('[')) {\n      const { name, value } = this.getAttribute(query);\n      if (name) {\n        // getElementByName();\n        return root.find(\n          (node) =>\n            (root as unknown as T) !== node &&\n            (name === 'name'\n              ? node.name === value\n              : this.attributeToString(node, name) === value),\n        );\n      }\n      return null;\n    }\n    // getElementsByTag('circle');\n    return root.find(\n      (node) => (root as unknown as T) !== node && node.nodeName === query,\n    );\n  }\n\n  selectAll<R extends IElement, T extends IElement>(\n    query: string,\n    root: R,\n  ): T[] {\n    // only support `[name=\"${name}\"]` `.className` `#id`\n    if (query.startsWith('.')) {\n      // getElementsByClassName('className');\n      // should not include itself\n      return root.findAll(\n        (node) =>\n          (root as unknown as T) !== node &&\n          (node?.classList || []).indexOf(this.getIdOrClassname(query)) > -1,\n      );\n    }\n    if (query.startsWith('#')) {\n      return root.findAll(\n        (node) =>\n          (root as unknown as T) !== node &&\n          node.id === this.getIdOrClassname(query),\n      );\n    }\n    if (query.startsWith('[')) {\n      const { name, value } = this.getAttribute(query);\n      if (name) {\n        // getElementsByName();\n        return root.findAll(\n          (node) =>\n            (root as unknown as T) !== node &&\n            (name === 'name'\n              ? node.name === value\n              : this.attributeToString(node, name) === value),\n        );\n      }\n      return [];\n    }\n    // getElementsByTag('circle');\n    return root.findAll(\n      (node) => (root as unknown as T) !== node && node.nodeName === query,\n    );\n  }\n\n  is<T extends IElement>(query: string, node: T): boolean {\n    // a simple `matches` implementation\n    if (query.startsWith('.')) {\n      return node.className === this.getIdOrClassname(query);\n    }\n    if (query.startsWith('#')) {\n      return node.id === this.getIdOrClassname(query);\n    }\n    if (query.startsWith('[')) {\n      const { name, value } = this.getAttribute(query);\n      return name === 'name'\n        ? node.name === value\n        : this.attributeToString(node, name) === value;\n    }\n    return node.nodeName === query;\n  }\n\n  private getIdOrClassname(query: string): string {\n    return query.substring(1);\n  }\n\n  private getAttribute(query: string): Record<string, string> {\n    const matches = query.match(ATTRIBUTE_REGEXP);\n    let name = '';\n    let value = '';\n    if (matches && matches.length > 2) {\n      name = matches[1].replace(/\"/g, '');\n      value = matches[2].replace(/\"/g, '');\n    }\n    return { name, value };\n  }\n\n  private attributeToString(node: IElement, name: string): string {\n    if (!node.getAttribute) {\n      return '';\n    }\n\n    const value = node.getAttribute(name);\n\n    if (isNil(value)) {\n      return '';\n    }\n\n    if (value.toString) {\n      return value.toString();\n    }\n\n    return '';\n  }\n}\n", "import type RBush from 'rbush';\nimport EventEmitter from 'eventemitter3';\nimport type { GlobalRuntime } from '..';\nimport type { ICamera } from '../camera';\nimport type { RBushNodeAABB } from '../components';\nimport type { DisplayObject } from '../display-objects';\nimport type {\n  ContextService,\n  EventService,\n  RenderingContext,\n  RenderingPlugin,\n  RenderingService,\n} from '../services';\nimport type { AABB, PointLike, Rectangle } from '../shapes';\nimport type {\n  BaseStyleProps,\n  CanvasConfig,\n  InteractivePointerEvent,\n  Shape,\n  TypeEasingFunction,\n} from '../types';\nimport type { CustomElementRegistry } from './CustomElementRegistry';\nimport type { FederatedEvent } from './FederatedEvent';\n\n/**\n * built-in events for element\n * @see https://developer.mozilla.org/en-US/docs/Web/API/MutationEvent\n *\n * TODO: use MutationObserver instead\n * @see https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver\n */\nexport enum ElementEvent {\n  // --- @see https://developer.mozilla.org/en-US/docs/Web/API/MutationEvent\n  /**\n   * @see https://www.w3.org/TR/DOM-Level-3-Events/#event-type-DOMAttrModified\n   */\n  ATTR_MODIFIED = 'DOMAttrModified',\n\n  /**\n   * it has been inserted\n   * @see https://www.w3.org/TR/DOM-Level-3-Events/#event-type-DOMNodeInserted\n   */\n  INSERTED = 'DOMNodeInserted',\n\n  /**\n   * @see https://www.w3.org/TR/DOM-Level-3-Events/#domnodeinsertedintodocument\n   */\n  MOUNTED = 'DOMNodeInsertedIntoDocument',\n\n  /**\n   * it is being removed\n   * @see https://www.w3.org/TR/DOM-Level-3-Events/#event-type-DOMNodeRemoved\n   */\n  REMOVED = 'removed',\n\n  /**\n   * @see https://www.w3.org/TR/DOM-Level-3-Events/#domnoderemovedfromdocument\n   */\n  UNMOUNTED = 'DOMNodeRemovedFromDocument',\n  // ---\n\n  REPARENT = 'reparent',\n\n  DESTROY = 'destroy',\n\n  BOUNDS_CHANGED = 'bounds-changed',\n\n  CULLED = 'culled',\n}\n\n// #region EventTarget\nexport interface IEventTarget {\n  emitter: EventEmitter;\n\n  // on: (\n  //   type: string,\n  //   listener: EventListenerOrEventListenerObject | ((...args: any[]) => void),\n  //   options?: boolean | AddEventListenerOptions,\n  // ) => void;\n  addEventListener: (\n    type: string,\n    listener: EventListenerOrEventListenerObject,\n    options?: boolean | AddEventListenerOptions,\n  ) => void;\n\n  // off: (\n  //   type: string,\n  //   listener: EventListenerOrEventListenerObject | ((...args: any[]) => void),\n  //   options?: boolean | AddEventListenerOptions,\n  // ) => void;\n  removeEventListener: (\n    type: string,\n    listener: EventListenerOrEventListenerObject,\n    options?: boolean | AddEventListenerOptions,\n  ) => void;\n  // removeAllEventListeners: () => void;\n\n  /**\n   * @param skipPropagate - The default value is `false`. If true, the event is only triggered globally (note that the global is not the object itself), skipping the event propagation process. In addition, if the object has been removed from the global, the event is only triggered on the object itself.\n   * @param dispatchToSelf - The default value is `false`. If true, the event will be triggered on the object itself.\n   *\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/dispatchEvent\n   */\n  dispatchEvent: <T extends FederatedEvent>(\n    e: T,\n    skipPropagate?: boolean,\n    dispatchToSelf?: boolean,\n  ) => boolean;\n\n  // emit: (eventName: string, object: object) => void;\n}\n\ninterface EventListener {\n  (evt: FederatedEvent): void;\n}\ninterface EventListenerObject {\n  handleEvent(object: FederatedEvent): void;\n}\n\nexport type EventListenerOrEventListenerObject =\n  | EventListener\n  | EventListenerObject;\n\n// #region Node\nexport interface INode extends IEventTarget {\n  shadow: boolean;\n  /**\n   * Returns node's node document's document base URL.\n   */\n  readonly baseURI: string;\n  /**\n   * Returns the children.\n   */\n  readonly childNodes: IChildNode[];\n  /**\n   * Returns the first child.\n   */\n  readonly firstChild: IChildNode | null;\n  /**\n   * Returns true if node is connected and false otherwise.\n   */\n  isConnected: boolean;\n  /**\n   * Returns the last child.\n   */\n  readonly lastChild: IChildNode | null;\n\n  /**\n   * Returns the next sibling.\n   */\n  readonly nextSibling: IChildNode | null;\n  /**\n   * Returns a string appropriate for the type of node.\n   */\n  readonly nodeName: string;\n  /**\n   * Returns the type of node.\n   */\n  readonly nodeType: number;\n  nodeValue: string | null;\n  /**\n   * Returns the node document. Returns null for documents.\n   */\n  ownerDocument: IDocument | null;\n  /**\n   * Returns the parent element.\n   */\n  readonly parentElement: IElement | null;\n  /**\n   * Returns the parent.\n   */\n  parentNode: (INode & IParentNode) | null;\n  /**\n   * Returns the previous sibling.\n   */\n  readonly previousSibling: IChildNode | null;\n  textContent: string | null;\n  appendChild: <T extends INode>(newChild: T, index?: number) => T;\n  /**\n   * Returns a copy of node. If deep is true, the copy also includes the node's descendants.\n   */\n  cloneNode: (deep?: boolean) => INode;\n  /**\n   * Returns a bitmask indicating the position of other relative to node.\n   */\n  compareDocumentPosition: (other: INode) => number;\n  /**\n   * Returns true if other is an inclusive descendant of node, and false otherwise.\n   */\n  contains: (other: INode | null) => boolean;\n  /**\n   * Returns node's root.\n   */\n  getRootNode: (options?: GetRootNodeOptions) => INode;\n  /**\n   * Returns node's ancestor.\n   */\n  getAncestor: (n: number) => INode | null;\n  /**\n   * iterate current node and its descendants\n   * @param callback - callback to execute for each node, return false to break\n   */\n  forEach: (callback: (o: INode) => void | boolean) => void;\n  /**\n   * Returns whether node has children.\n   */\n  hasChildNodes: () => boolean;\n  insertBefore: <T extends INode>(newChild: T, refChild: INode | null) => T;\n  isDefaultNamespace: (namespace: string | null) => boolean;\n  /**\n   * Returns whether node and otherNode have the same properties.\n   */\n  isEqualNode: (otherNode: INode | null) => boolean;\n  isSameNode: (otherNode: INode | null) => boolean;\n  lookupNamespaceURI: (prefix: string | null) => string | null;\n  lookupPrefix: (namespace: string | null) => string | null;\n  /**\n   * Removes empty exclusive Text nodes and concatenates the data of remaining contiguous exclusive Text nodes into the first of their nodes.\n   */\n  normalize: () => void;\n  removeChild: <T extends INode>(oldChild: T) => T;\n  replaceChild: <T extends INode>(newChild: INode, oldChild: T) => T;\n\n  destroyed: boolean;\n  /**\n   * Destroy itself.\n   */\n  destroy: () => void;\n}\n\nexport interface IParentNode {\n  readonly childElementCount: number;\n  /**\n   * Returns the child elements.\n   */\n  readonly children: IElement[];\n  /**\n   * Returns the first child that is an element, and null otherwise.\n   */\n  readonly firstElementChild: IElement | null;\n  /**\n   * Returns the last child that is an element, and null otherwise.\n   */\n  readonly lastElementChild: IElement | null;\n  /**\n   * Inserts nodes after the last child of node, while replacing strings in nodes with equivalent Text nodes.\n   *\n   * Throws a \"HierarchyRequestError\" DOMException if the constraints of the node tree are violated.\n   */\n  append: (...nodes: INode[]) => void;\n  /**\n   * Inserts nodes before the first child of node, while replacing strings in nodes with equivalent Text nodes.\n   *\n   * Throws a \"HierarchyRequestError\" DOMException if the constraints of the node tree are violated.\n   */\n  prepend: (...nodes: INode[]) => void;\n  /**\n   * Returns the first element that is a descendant of node that matches selectors.\n   */\n  querySelector: <E extends IElement = IElement>(selectors: string) => E | null;\n  /**\n   * Returns all element descendants of node that match selectors.\n   */\n  querySelectorAll: <E extends IElement = IElement>(selectors: string) => E[];\n  /**\n   * Similar to querySelector, use custom filter instead of selectors.\n   */\n  find: <E extends IElement = IElement>(\n    filter: (node: E) => boolean,\n  ) => E | null;\n  /**\n   * Similar to querySelectorAll, use custom filter instead of selectors.\n   */\n  findAll: <E extends IElement = IElement>(filter: (node: E) => boolean) => E[];\n}\n\nexport interface IChildNode extends INode {\n  /**\n   * Inserts nodes just after node, while replacing strings in nodes with equivalent Text nodes.\n   *\n   * Throws a \"HierarchyRequestError\" DOMException if the constraints of the node tree are violated.\n   */\n  after: (...nodes: INode[]) => void;\n  /**\n   * Inserts nodes just before node, while replacing strings in nodes with equivalent Text nodes.\n   *\n   * Throws a \"HierarchyRequestError\" DOMException if the constraints of the node tree are violated.\n   */\n  before: (...nodes: INode[]) => void;\n  /**\n   * Removes node.\n   */\n  remove: () => void;\n  /**\n   * Replaces node with nodes, while replacing strings in nodes with equivalent Text nodes.\n   *\n   * Throws a \"HierarchyRequestError\" DOMException if the constraints of the node tree are violated.\n   */\n  replaceWith: (...nodes: INode[]) => void;\n}\n\nexport interface DisplayObjectConfig<StyleProps> {\n  /**\n   * element's identifier, must be unique in a document.\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/id\n   */\n  id?: string;\n\n  name?: string;\n\n  /**\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Element/className\n   */\n  class?: string;\n  className?: string;\n\n  /**\n   * all styles properties, not read-only\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/style\n   */\n  style?: StyleProps;\n  initialParsedStyle?: any;\n  /**\n   * compatible with G 3.0\n   * @alias style\n   * @deprecated\n   */\n  attrs?: StyleProps;\n\n  type?: Shape | string;\n\n  /**\n   * @deprecated use `style.zIndex` instead\n   */\n  zIndex?: number;\n  /**\n   * @deprecated use `style.visibility = 'visible'` instead\n   */\n  visible?: boolean;\n  /**\n   * compatible with G 3.0\n   * @alias interactive\n   * @deprecated\n   */\n  capture?: boolean;\n\n  /**\n   * enable interaction events for the DisplayObject\n   * @deprecated use `style.pointerEvents = 'auto'` instead\n   */\n  interactive?: boolean;\n}\n\n// #region Element\nexport interface IElement<StyleProps = any, ParsedStyleProps = any>\n  extends INode,\n    IChildNode,\n    IParentNode {\n  /**\n   * Returns the value of element's id content attribute. Can be set to change it.\n   */\n  id: string;\n\n  /**\n   * Returns the qualified name.\n   */\n  tagName: string;\n\n  name: string;\n\n  /**\n   * Returns the value of element's class content attribute. Can be set to change it.\n   */\n  className: string;\n  classList: string[];\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/attributes\n   */\n  attributes: StyleProps;\n\n  /**\n   * compatible with `style`\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/style\n   */\n  style: StyleProps & ICSSStyleDeclaration<StyleProps>;\n  parsedStyle: ParsedStyleProps;\n\n  getElementById: <E extends IElement = IElement>(id: string) => E | null;\n  getElementsByName: <E extends IElement = IElement>(name: string) => E[];\n  getElementsByClassName: <E extends IElement = IElement>(\n    className: string,\n  ) => E[];\n  getElementsByTagName: <E extends IElement = IElement>(tagName: string) => E[];\n\n  scrollLeft: number;\n  scrollTop: number;\n  clientLeft: number;\n  clientTop: number;\n\n  getGeometryBounds(): AABB;\n  getRenderBounds(): AABB;\n  getBounds(): AABB;\n  getLocalBounds(): AABB;\n  getBoundingClientRect(): Rectangle;\n  getClientRects(): Rectangle[];\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/setAttribute\n   */\n  setAttribute: <Key extends keyof StyleProps>(\n    attributeName: Key,\n    value: StyleProps[Key],\n    force?: boolean,\n    memoize?: boolean,\n  ) => void;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/getAttribute\n   */\n  getAttribute: (\n    attributeName: keyof StyleProps,\n  ) => StyleProps[keyof StyleProps] | undefined;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/removeAttribute\n   */\n  removeAttribute: (attributeName: keyof StyleProps) => void;\n\n  hasAttribute: (qualifiedName: string) => boolean;\n}\n\n// #region AnimationTimeline\nexport interface IAnimationTimeline {\n  currentTime: number | null;\n  destroy: () => void;\n  play: (\n    target: IElement,\n    keyframes: Keyframe[] | PropertyIndexedKeyframes | null,\n    options?: number | KeyframeAnimationOptions,\n  ) => IAnimation;\n  restart: () => boolean;\n  getAnimations: () => IAnimation[];\n}\n\nexport interface IAnimation {\n  effect: IKeyframeEffect;\n  timeline: IAnimationTimeline;\n  id: string;\n  pending: boolean;\n  playState: AnimationPlayState;\n  ready: Promise<this>;\n  finished: Promise<this>;\n  onfinish: ((this: this, ev: AnimationPlaybackEvent) => any) | null;\n  oncancel: ((this: this, ev: AnimationPlaybackEvent) => any) | null;\n  onframe: ((this: this, ev: AnimationPlaybackEvent) => any) | null;\n  currentTime: number;\n  startTime: number;\n  playbackRate: number;\n  totalDuration: number;\n  play: () => void;\n  pause: () => void;\n  finish: () => void;\n  cancel: () => void;\n  reverse: () => void;\n  updatePlaybackRate: (playbackRate: number) => void;\n  tick: (timelineTime: number, isAnimationFrame: boolean) => void;\n}\n\nexport interface IAnimationEffectTiming extends EffectTiming {\n  easingFunction: TypeEasingFunction;\n}\n\nexport interface IKeyframeEffect {\n  composite: CompositeOperation;\n  iterationComposite: IterationCompositeOperation;\n  // pseudoElement: string | null;\n  target: IElement | null;\n\n  animation: IAnimation | null;\n\n  timing: IAnimationEffectTiming;\n\n  normalizedKeyframes: ComputedKeyframe[];\n\n  applyInterpolations: () => void;\n\n  update: (localTime: number | null) => boolean;\n\n  getKeyframes: () => ComputedKeyframe[];\n\n  setKeyframes: (\n    keyframes: Keyframe[] | PropertyIndexedKeyframes | null,\n  ) => void;\n\n  getComputedTiming: () => ComputedEffectTiming;\n\n  getTiming: () => EffectTiming;\n\n  updateTiming: (timing?: OptionalEffectTiming) => void;\n}\n\n// #region Document\nexport interface IDocument extends INode, IParentNode {\n  /**\n   * Returns the Window object of the active document.\n   */\n  readonly defaultView: ICanvas | null;\n\n  /**\n   * Gets a reference to the root node of the document.\n   */\n  readonly documentElement: IElement;\n\n  readonly ownerDocument: null;\n  readonly timeline: IAnimationTimeline;\n\n  /**\n   * Creates an instance of the element for the specified tag.\n   */\n  createElement: <\n    T extends DisplayObject<StyleProps>,\n    StyleProps extends BaseStyleProps,\n  >(\n    tagName: string,\n    options: DisplayObjectConfig<StyleProps>,\n  ) => T;\n\n  elementFromPoint: (x: number, y: number) => Promise<DisplayObject>;\n  elementsFromPoint: (x: number, y: number) => Promise<DisplayObject[]>;\n  elementsFromBBox: (\n    minX: number,\n    minY: number,\n    maxX: number,\n    maxY: number,\n  ) => DisplayObject[];\n}\n\n// #region CSSStyleDeclaration\n/**\n * @see https://developer.mozilla.org/zh-CN/docs/Web/API/CSSStyleDeclaration\n */\nexport interface ICSSStyleDeclaration<StyleProps> {\n  setProperty: <Key extends keyof StyleProps>(\n    propertyName: Key,\n    value: StyleProps[Key],\n    priority?: string,\n  ) => void;\n  getPropertyValue: (\n    propertyName: keyof StyleProps,\n  ) => StyleProps[keyof StyleProps] | undefined;\n  removeProperty: (propertyName: keyof StyleProps) => void;\n  item: (index: number) => string;\n}\n\nexport interface CanvasContext {\n  config: CanvasConfig;\n  camera: ICamera;\n\n  /**\n   * ContextServiceContribution\n   */\n  ContextService: new (\n    context: GlobalRuntime & CanvasContext,\n  ) => ContextService<unknown>;\n\n  contextService: ContextService<unknown>;\n  renderingService: RenderingService;\n  eventService: EventService;\n  rBushRoot: RBush<RBushNodeAABB>;\n  renderingContext: RenderingContext;\n  renderingPlugins: RenderingPlugin[];\n}\n\n// #region Canvas\nexport interface IWindow {\n  /** https://developer.mozilla.org/en-US/docs/Web/API/CustomElementRegistry */\n  customElements: CustomElementRegistry;\n  /** https://developer.mozilla.org/en-US/docs/Web/API/Window/devicePixelRatio */\n  devicePixelRatio: number;\n  /** https://developer.mozilla.org/en-US/docs/Web/API/DedicatedWorkerGlobalScope/requestAnimationFrame  */\n  requestAnimationFrame: typeof requestAnimationFrame;\n  /** https://developer.mozilla.org/en-US/docs/Web/API/DedicatedWorkerGlobalScope/cancelAnimationFrame */\n  cancelAnimationFrame: typeof cancelAnimationFrame;\n  /**\n   * replace `new window.Image()`\n   */\n  createImage: () => HTMLImageElement;\n  /**\n   * whether the runtime supports TouchEvent?\n   * if not, the event system won't trigger touch events like `touchstart`\n   */\n  supportsTouchEvents: boolean;\n  /**\n   * whether the runtime supports PointerEvent?\n   * if not, the event system won't trigger pointer events like `pointerdown`\n   */\n  supportsPointerEvents: boolean;\n  /**\n   * is this native event a TouchEvent?\n   */\n\n  isTouchEvent: (event: InteractivePointerEvent) => event is TouchEvent;\n  /**\n   * is this native event a MouseEvent?\n   */\n  isMouseEvent: (event: InteractivePointerEvent) => event is MouseEvent;\n}\n\nexport interface ICanvas extends IWindow, IEventTarget {\n  document: IDocument;\n  context: CanvasContext;\n\n  getConfig: () => Partial<CanvasConfig>;\n  getCamera: () => ICamera;\n  getContextService: () => ContextService<unknown>;\n  getRenderingService: () => RenderingService;\n  getEventService: () => EventService;\n\n  mountChildren: (parent: INode) => void;\n  unmountChildren: (parent: INode) => void;\n  mountFragment: (fragment: INode) => void;\n\n  client2Viewport: (client: PointLike) => PointLike;\n  viewport2Client: (viewport: PointLike) => PointLike;\n  canvas2Viewport: (canvas: PointLike) => PointLike;\n  viewport2Canvas: (viewport: PointLike) => PointLike;\n\n  render: () => void;\n  destroy: (destroyScenegraph?: boolean) => void;\n  resize: (width: number, height: number) => void;\n}\n", "import { FederatedEvent } from './FederatedEvent';\nimport type { ElementEvent, IElement } from './interfaces';\n\nexport class MutationEvent extends FederatedEvent {\n  static readonly ADDITION: number = 2;\n  static readonly MODIFICATION: number = 1;\n  static readonly REMOVAL: number = 3;\n\n  constructor(\n    typeArg: ElementEvent,\n    public relatedNode: IElement,\n    public prevValue: any,\n    public newValue: any,\n    public attrName: string,\n    public attrChange: number,\n    public prevParsedValue: any,\n    public newParsedValue: any,\n  ) {\n    super(null);\n\n    this.type = typeArg;\n  }\n}\n", "import { isNumber } from '@antv/util';\nimport { mat4, quat, vec2, vec3 } from 'gl-matrix';\nimport {\n  SortReason,\n  type Transform,\n  updateLocalTransform,\n  updateWorldTransform,\n} from '../components';\nimport type { CustomElement, DisplayObject } from '../display-objects';\nimport type { Element, IChildNode, IElement, INode, IParentNode } from '../dom';\nimport { CustomEvent } from '../dom/CustomEvent';\nimport { ElementEvent } from '../dom/interfaces';\nimport { MutationEvent } from '../dom/MutationEvent';\nimport { GlobalRuntime, runtime } from '../global-runtime';\nimport { AABB, Rectangle } from '../shapes';\nimport { Shape } from '../types';\nimport { findClosestClipPathTarget, isInFragment } from '../utils';\nimport type { SceneGraphService } from './interfaces';\n\nconst reparentEvent = new MutationEvent(\n  ElementEvent.REPARENT,\n  null,\n  '',\n  '',\n  '',\n  0,\n  '',\n  '',\n);\n\n// Object pooling\n/** do not modify this objects */\nconst $vec2Zero = vec2.create();\n/** do not modify this objects */\nconst $vec3Zero = vec3.create();\n/** do not modify this objects */\nconst $vec3One = vec3.fromValues(1, 1, 1);\n/** do not modify this objects */\nconst $mat4Identity = mat4.create();\n\n/** shared objects */\nconst $vec2 = vec2.create();\n/** shared objects */\nconst $vec3 = vec3.create();\n/** shared objects */\nconst $mat4 = mat4.create();\n/** shared objects */\nconst $quat = quat.create();\n\nconst $setLocalTransform_1 = vec3.create();\nconst $setLocalTransform_2 = quat.create();\nconst $setLocalTransform_3 = vec3.create();\nconst $setLocalPosition = vec3.create();\nconst $setPosition_1 = vec3.create();\nconst $setPosition_ParentInvertMatrix = mat4.create();\nconst $setEulerAngles_InvParentRot = quat.create();\nconst $rotateLocal = quat.create();\nconst $rotate_ParentInvertRotation = quat.create();\n\nconst $triggerPendingEvents_detail = { affectChildren: true };\n\n/**\n * update transform in scene graph\n *\n * @see https://community.khronos.org/t/scene-graphs/50542/7\n */\nexport class DefaultSceneGraphService implements SceneGraphService {\n  // target -> affectChildren\n  private pendingEvents = new Map<DisplayObject, boolean>();\n  private boundsChangedEvent = new CustomEvent(ElementEvent.BOUNDS_CHANGED);\n\n  constructor(private runtime: GlobalRuntime) {}\n\n  matches<T extends IElement>(query: string, root: T) {\n    return this.runtime.sceneGraphSelector.is(query, root);\n  }\n\n  querySelector<R extends IElement, T extends IElement>(\n    query: string,\n    root: R,\n  ): T | null {\n    return this.runtime.sceneGraphSelector.selectOne<R, T>(query, root);\n  }\n\n  querySelectorAll<R extends IElement, T extends IElement>(\n    query: string,\n    root: R,\n  ): T[] {\n    return this.runtime.sceneGraphSelector.selectAll<R, T>(query, root);\n    // .filter((node) => !node.shadow);\n  }\n\n  attach<C extends INode, P extends INode & IParentNode>(\n    child: C,\n    parent: P,\n    index?: number,\n  ) {\n    let detached = false;\n    if (child.parentNode) {\n      detached = child.parentNode !== parent;\n      this.detach(child);\n    }\n\n    const isChildFragment = child.nodeName === Shape.FRAGMENT;\n    const isAttachToFragment = isInFragment(parent);\n\n    child.parentNode = parent;\n\n    const nodes = isChildFragment\n      ? (child.childNodes as DisplayObject[])\n      : [child];\n\n    if (isNumber(index)) {\n      nodes.forEach((node) => {\n        parent.childNodes.splice(index, 0, node);\n        node.parentNode = parent;\n      });\n    } else {\n      nodes.forEach((node) => {\n        parent.childNodes.push(node);\n        node.parentNode = parent;\n      });\n    }\n\n    // parent needs re-sort\n    const { sortable } = parent as unknown as Element;\n    if (\n      sortable?.sorted?.length ||\n      sortable.dirty ||\n      (child as unknown as Element).parsedStyle.zIndex\n    ) {\n      if (sortable.dirtyChildren.indexOf(child) === -1) {\n        sortable.dirtyChildren.push(child);\n      }\n      // if (sortable) {\n      // only child has z-Index\n      sortable.dirty = true;\n      sortable.dirtyReason = SortReason.ADDED;\n    }\n\n    if (isAttachToFragment) return;\n\n    if (isChildFragment) {\n      this.dirtifyFragment(child);\n    } else {\n      const transform = (child as unknown as Element).transformable;\n      if (transform) {\n        this.dirtyWorldTransform(child, transform);\n      }\n    }\n\n    if (detached) {\n      const enableCancelEventPropagation =\n        parent.ownerDocument?.defaultView?.getConfig()?.future\n          ?.experimentalCancelEventPropagation === true;\n\n      child.dispatchEvent(\n        reparentEvent,\n        enableCancelEventPropagation,\n        enableCancelEventPropagation,\n      );\n    }\n  }\n\n  detach<C extends INode>(child: C) {\n    if (!child.parentNode) {\n      return;\n    }\n\n    const transform = (child as unknown as Element).transformable;\n    // if (transform) {\n    //   const worldTransform = this.getWorldTransform(child, transform);\n    //   mat4.getScaling(transform.localScale, worldTransform);\n    //   mat4.getTranslation(transform.localPosition, worldTransform);\n    //   mat4.getRotation(transform.localRotation, worldTransform);\n    //   transform.localDirtyFlag = true;\n    // }\n\n    // parent needs re-sort\n    const { sortable } = child.parentNode as Element;\n    // if (sortable) {\n    if (\n      sortable?.sorted?.length ||\n      (child as unknown as Element).style?.zIndex\n    ) {\n      if (sortable.dirtyChildren.indexOf(child) === -1) {\n        sortable.dirtyChildren.push(child);\n      }\n      sortable.dirty = true;\n      sortable.dirtyReason = SortReason.REMOVED;\n    }\n\n    const index = child.parentNode.childNodes.indexOf(\n      child as unknown as IChildNode & INode,\n    );\n    if (index > -1) {\n      child.parentNode.childNodes.splice(index, 1);\n    }\n\n    if (transform) {\n      this.dirtyWorldTransform(child, transform);\n    }\n    child.parentNode = null;\n  }\n\n  // #region local-transform ----------------------------------------------------------------\n\n  getLocalPosition(element: INode) {\n    return (element as Element).transformable.localPosition;\n  }\n\n  getLocalRotation(element: INode) {\n    return (element as Element).transformable.localRotation;\n  }\n\n  getLocalScale(element: INode) {\n    return (element as Element).transformable.localScale;\n  }\n\n  getLocalSkew(element: INode) {\n    return (element as Element).transformable.localSkew;\n  }\n\n  getLocalTransform(element: INode) {\n    const transform = (element as Element).transformable;\n    updateLocalTransform(transform);\n\n    return transform.localTransform;\n  }\n\n  /**\n   * move to position in local space\n   */\n  setLocalPosition(element: INode, position: vec3 | vec2, dirtify = true) {\n    const transform = (element as Element).transformable;\n\n    $setLocalPosition[0] = position[0];\n    $setLocalPosition[1] = position[1];\n    $setLocalPosition[2] = position[2] ?? 0;\n\n    if (vec3.equals(transform.localPosition, $setLocalPosition)) {\n      return;\n    }\n\n    vec3.copy(transform.localPosition, $setLocalPosition);\n    if (dirtify) {\n      this.dirtyLocalTransform(element, transform);\n    }\n  }\n\n  /**\n   * translate in local space\n   *\n   * @example\n   * ```\n   * translateLocal(x, y, z)\n   * translateLocal(vec3(x, y, z))\n   * ```\n   */\n  translateLocal(element: INode, translation: vec3 | number, y = 0, z = 0) {\n    if (typeof translation === 'number') {\n      translation = vec3.fromValues(translation, y, z);\n    }\n    const transform = (element as Element).transformable;\n    if (vec3.equals(translation, $vec3Zero)) return;\n\n    vec3.transformQuat(translation, translation, transform.localRotation);\n    vec3.add(transform.localPosition, transform.localPosition, translation);\n\n    this.dirtyLocalTransform(element, transform);\n  }\n\n  setLocalRotation(\n    element: INode,\n    rotation: quat | number,\n    y?: number,\n    z?: number,\n    w?: number,\n    dirtify = true,\n  ) {\n    if (typeof rotation === 'number') {\n      rotation = quat.set($quat, rotation, y, z, w);\n    }\n    const transform = (element as Element).transformable;\n    quat.copy(transform.localRotation, rotation);\n    if (dirtify) {\n      this.dirtyLocalTransform(element, transform);\n    }\n  }\n\n  /**\n   * rotate in local space\n   * @see @see https://docs.microsoft.com/en-us/windows/win32/api/directxmath/nf-directxmath-xmquaternionrotationrollpitchyaw\n   */\n  rotateLocal(element: INode, degrees: vec3 | number, y = 0, z = 0) {\n    if (typeof degrees === 'number') {\n      degrees = vec3.fromValues(degrees, y, z);\n    }\n    const transform = (element as Element).transformable;\n    quat.fromEuler($rotateLocal, degrees[0], degrees[1], degrees[2]);\n    quat.mul(transform.localRotation, transform.localRotation, $rotateLocal);\n\n    this.dirtyLocalTransform(element, transform);\n  }\n\n  setLocalScale(element: INode, scaling: vec3 | vec2, dirtify = true) {\n    const transform = (element as Element).transformable;\n\n    vec3.set(\n      $vec3,\n      scaling[0],\n      scaling[1],\n      scaling[2] ?? transform.localScale[2],\n    );\n\n    if (vec3.equals($vec3, transform.localScale)) {\n      return;\n    }\n\n    vec3.copy(transform.localScale, $vec3);\n    if (dirtify) {\n      this.dirtyLocalTransform(element, transform);\n    }\n  }\n\n  /**\n   * scale in local space\n   */\n  scaleLocal(element: INode, scaling: vec3 | vec2) {\n    const transform = (element as Element).transformable;\n    vec3.multiply(\n      transform.localScale,\n      transform.localScale,\n      vec3.set($vec3, scaling[0], scaling[1], scaling[2] ?? 1),\n    );\n    this.dirtyLocalTransform(element, transform);\n  }\n\n  setLocalSkew(\n    element: INode,\n    skew: vec2 | number,\n    y?: number,\n    dirtify = true,\n  ) {\n    if (typeof skew === 'number') {\n      skew = vec2.set($vec2, skew, y);\n    }\n    const transform = (element as Element).transformable;\n    vec2.copy(transform.localSkew, skew);\n    if (dirtify) {\n      this.dirtyLocalTransform(element, transform);\n    }\n  }\n\n  /**\n   * set euler angles(degrees) in local space\n   */\n  setLocalEulerAngles(\n    element: INode,\n    degrees: vec3 | number,\n    y = 0,\n    z = 0,\n    dirtify = true,\n  ) {\n    if (typeof degrees === 'number') {\n      degrees = vec3.fromValues(degrees, y, z);\n    }\n    const transform = (element as Element).transformable;\n    quat.fromEuler(transform.localRotation, degrees[0], degrees[1], degrees[2]);\n    if (dirtify) {\n      this.dirtyLocalTransform(element, transform);\n    }\n  }\n\n  setLocalTransform(element: INode, transform: mat4) {\n    const t = mat4.getTranslation($setLocalTransform_1, transform);\n    const r = mat4.getRotation($setLocalTransform_2, transform);\n    const s = mat4.getScaling($setLocalTransform_3, transform);\n    this.setLocalScale(element, s, false);\n    this.setLocalPosition(element, t, false);\n    this.setLocalRotation(element, r, undefined, undefined, undefined, false);\n\n    this.dirtyLocalTransform(element, (element as Element).transformable);\n  }\n\n  resetLocalTransform(element: INode) {\n    this.setLocalScale(element, $vec3One, false);\n    this.setLocalPosition(element, $vec3Zero, false);\n    this.setLocalEulerAngles(element, $vec3Zero, undefined, undefined, false);\n    this.setLocalSkew(element, $vec2Zero, undefined, false);\n\n    this.dirtyLocalTransform(element, (element as Element).transformable);\n  }\n\n  // #endregion local-transform\n  // #region transform ----------------------------------------------------------------\n\n  getPosition(element: INode) {\n    const transform = (element as Element).transformable;\n    return mat4.getTranslation(\n      transform.position,\n      this.getWorldTransform(element, transform),\n    );\n  }\n\n  getRotation(element: INode) {\n    const transform = (element as Element).transformable;\n    return mat4.getRotation(\n      transform.rotation,\n      this.getWorldTransform(element, transform),\n    );\n  }\n\n  getScale(element: INode) {\n    const transform = (element as Element).transformable;\n    return mat4.getScaling(\n      transform.scaling,\n      this.getWorldTransform(element, transform),\n    );\n  }\n\n  getOrigin(element: INode) {\n    (element as Element).getGeometryBounds();\n    return (element as Element).transformable.origin;\n  }\n\n  getWorldTransform(\n    element: INode,\n    transform: Transform = (element as Element).transformable,\n  ) {\n    if (!transform.localDirtyFlag && !transform.dirtyFlag) {\n      return transform.worldTransform;\n    }\n\n    if (element.parentNode && (element.parentNode as Element).transformable) {\n      this.getWorldTransform(element.parentNode);\n    }\n\n    this.internalUpdateTransform(element as Element);\n\n    return transform.worldTransform;\n  }\n\n  /**\n   * move to position in world space\n   *\n   *  g  move/moveTo\n   * @see https://github.com/antvis/g/blob/master/packages/g-base/src/abstract/element.ts#L684-L689\n   */\n  setPosition(element: INode, position: vec3 | vec2) {\n    const transform = (element as Element).transformable;\n\n    $setPosition_1[0] = position[0];\n    $setPosition_1[1] = position[1];\n    $setPosition_1[2] = position[2] ?? 0;\n\n    if (vec3.equals(this.getPosition(element), $setPosition_1)) {\n      return;\n    }\n\n    vec3.copy(transform.position, $setPosition_1);\n\n    if (\n      element.parentNode === null ||\n      !(element.parentNode as Element).transformable\n    ) {\n      vec3.copy(transform.localPosition, $setPosition_1);\n    } else {\n      const parentTransform = (element.parentNode as Element).transformable;\n      mat4.copy(\n        $setPosition_ParentInvertMatrix,\n        parentTransform.worldTransform,\n      );\n      mat4.invert(\n        $setPosition_ParentInvertMatrix,\n        $setPosition_ParentInvertMatrix,\n      );\n      vec3.transformMat4(\n        transform.localPosition,\n        $setPosition_1,\n        $setPosition_ParentInvertMatrix,\n      );\n    }\n\n    this.dirtyLocalTransform(element, transform);\n  }\n\n  /**\n   * translate in world space\n   *\n   * @example\n   * ```\n   * translate(x, y, z)\n   * translate(vec3(x, y, z))\n   * ```\n   *\n   *  g  translate 2D\n   * @see https://github.com/antvis/g/blob/master/packages/g-base/src/abstract/element.ts#L665-L676\n   */\n  translate(element: INode, translation: vec3 | number, y = 0, z = 0) {\n    if (typeof translation === 'number') {\n      translation = vec3.set($vec3, translation, y, z);\n    }\n    if (vec3.equals(translation, $vec3Zero)) return;\n\n    vec3.add($vec3, this.getPosition(element), translation);\n\n    this.setPosition(element, $vec3);\n  }\n\n  setRotation(\n    element: INode,\n    rotation: quat | number,\n    y?: number,\n    z?: number,\n    w?: number,\n  ) {\n    const transform = (element as Element).transformable;\n    if (typeof rotation === 'number') {\n      rotation = quat.fromValues(rotation, y, z, w);\n    }\n\n    if (\n      element.parentNode === null ||\n      !(element.parentNode as Element).transformable\n    ) {\n      this.setLocalRotation(element, rotation);\n    } else {\n      const parentRot = this.getRotation(element.parentNode);\n\n      quat.copy($quat, parentRot);\n      quat.invert($quat, $quat);\n      quat.multiply(transform.localRotation, $quat, rotation);\n      quat.normalize(transform.localRotation, transform.localRotation);\n\n      this.dirtyLocalTransform(element, transform);\n    }\n  }\n\n  /**\n   * rotate in world space\n   */\n  rotate(element: INode, degrees: vec3 | number, y = 0, z = 0) {\n    if (typeof degrees === 'number') {\n      degrees = vec3.fromValues(degrees, y, z);\n    }\n\n    const transform = (element as Element).transformable;\n\n    if (\n      element.parentNode === null ||\n      !(element.parentNode as Element).transformable\n    ) {\n      this.rotateLocal(element, degrees);\n    } else {\n      const rotation = $quat;\n      quat.fromEuler(rotation, degrees[0], degrees[1], degrees[2]);\n      const rot = this.getRotation(element);\n      const parentRot = this.getRotation(element.parentNode);\n\n      quat.copy($rotate_ParentInvertRotation, parentRot);\n      quat.invert($rotate_ParentInvertRotation, $rotate_ParentInvertRotation);\n      quat.multiply(rotation, $rotate_ParentInvertRotation, rotation);\n      quat.multiply(transform.localRotation, rotation, rot);\n      quat.normalize(transform.localRotation, transform.localRotation);\n\n      this.dirtyLocalTransform(element, transform);\n    }\n  }\n\n  /**\n   * same as pivot in Pixi.js\n   *\n   * @see https://stackoverflow.com/questions/40748452/how-to-change-css-transform-origin-but-preserve-transformation\n   */\n  setOrigin(element: INode, origin: vec3 | number, y = 0, z = 0) {\n    if (typeof origin === 'number') {\n      origin = [origin, y, z];\n    }\n    const transform = (element as Element).transformable;\n    if (\n      origin[0] === transform.origin[0] &&\n      origin[1] === transform.origin[1] &&\n      origin[2] === transform.origin[2]\n    ) {\n      return;\n    }\n\n    const originVec = transform.origin;\n\n    // const delta = vec3.subtract(vec3.create(), origin, originVec);\n    // vec3.add(transform.localPosition, transform.localPosition, delta);\n\n    // update origin\n    originVec[0] = origin[0];\n    originVec[1] = origin[1];\n    originVec[2] = origin[2] || 0;\n    this.dirtyLocalTransform(element, transform);\n  }\n\n  /**\n   * set euler angles(degrees) in world space\n   */\n  setEulerAngles(element: INode, degrees: vec3 | number, y = 0, z = 0) {\n    if (typeof degrees === 'number') {\n      degrees = vec3.fromValues(degrees, y, z);\n    }\n\n    const transform = (element as Element).transformable;\n\n    if (\n      element.parentNode === null ||\n      !(element.parentNode as Element).transformable\n    ) {\n      this.setLocalEulerAngles(element, degrees);\n    } else {\n      quat.fromEuler(\n        transform.localRotation,\n        degrees[0],\n        degrees[1],\n        degrees[2],\n      );\n      const parentRotation = this.getRotation(element.parentNode);\n      quat.copy(\n        $setEulerAngles_InvParentRot,\n        quat.invert($quat, parentRotation),\n      );\n      quat.mul(\n        transform.localRotation,\n        transform.localRotation,\n        $setEulerAngles_InvParentRot,\n      );\n\n      this.dirtyLocalTransform(element, transform);\n    }\n  }\n\n  // #endregion transform\n  // #region bbox ----------------------------------------------------------------\n\n  private getTransformedGeometryBounds(\n    element: INode,\n    render = false,\n    existedAABB?: AABB,\n  ): AABB | null {\n    const bounds = this.getGeometryBounds(element, render);\n    if (!AABB.isEmpty(bounds)) {\n      const aabb = existedAABB || new AABB();\n      aabb.setFromTransformedAABB(bounds, this.getWorldTransform(element));\n      return aabb;\n    }\n    return null;\n  }\n\n  /**\n   * won't account for children\n   */\n  getGeometryBounds(element: INode, render = false): AABB {\n    const { geometry } = element as Element;\n\n    if (geometry.dirty) {\n      runtime.styleValueRegistry.updateGeometry(element as DisplayObject);\n    }\n\n    const bounds = render\n      ? geometry.renderBounds\n      : geometry.contentBounds || null;\n    // return (bounds && new AABB(bounds.center, bounds.halfExtents)) || new AABB();\n    return bounds || new AABB();\n  }\n\n  /**\n   * account for children in world space\n   */\n  getBounds(element: INode, render = false): AABB {\n    const { renderable } = element as Element;\n\n    if (!renderable.boundsDirty && !render && renderable.bounds) {\n      return renderable.bounds;\n    }\n\n    if (!renderable.renderBoundsDirty && render && renderable.renderBounds) {\n      return renderable.renderBounds;\n    }\n\n    // reuse existed if possible\n    const existedAABB = render ? renderable.renderBounds : renderable.bounds;\n\n    // reset with geometry's aabb\n    let aabb: AABB = this.getTransformedGeometryBounds(\n      element,\n      render,\n      existedAABB,\n    );\n\n    // merge children's aabbs\n    const children = element.childNodes as IElement[];\n    children.forEach((child) => {\n      const childBounds = this.getBounds(child, render);\n      if (childBounds) {\n        if (!aabb) {\n          aabb = existedAABB || new AABB();\n          aabb.update(childBounds.center, childBounds.halfExtents);\n        } else {\n          aabb.add(childBounds);\n        }\n      }\n    });\n\n    if (!aabb) {\n      aabb = new AABB();\n    }\n\n    if (render) {\n      // FIXME: account for clip path\n      const clipped = findClosestClipPathTarget(element as DisplayObject);\n      if (clipped) {\n        // use bounds under world space\n        const clipPathBounds = clipped.parsedStyle.clipPath.getBounds(render);\n        if (!aabb) {\n          aabb.update(clipPathBounds.center, clipPathBounds.halfExtents);\n        } else if (clipPathBounds) {\n          aabb = clipPathBounds.intersection(aabb);\n        }\n      }\n    }\n\n    if (render) {\n      renderable.renderBounds = aabb;\n      renderable.renderBoundsDirty = false;\n    } else {\n      renderable.bounds = aabb;\n      renderable.boundsDirty = false;\n    }\n\n    return aabb;\n  }\n\n  /**\n   * account for children in local space\n   */\n  getLocalBounds(element: INode): AABB {\n    if (element.parentNode) {\n      let parentInvert = $mat4Identity;\n\n      if ((element.parentNode as Element).transformable) {\n        parentInvert = mat4.invert(\n          $mat4,\n          this.getWorldTransform(element.parentNode),\n        );\n      }\n\n      const bounds = this.getBounds(element);\n\n      if (!AABB.isEmpty(bounds)) {\n        const localBounds = new AABB();\n        localBounds.setFromTransformedAABB(bounds, parentInvert);\n        return localBounds;\n      }\n    }\n\n    return this.getBounds(element);\n  }\n\n  getBoundingClientRect(element: INode): Rectangle {\n    let aabb: AABB;\n    const bounds = this.getGeometryBounds(element);\n    if (!AABB.isEmpty(bounds)) {\n      aabb = new AABB();\n      // apply transformation to aabb\n      aabb.setFromTransformedAABB(bounds, this.getWorldTransform(element));\n    }\n\n    // calc context's offset\n    const bbox = element.ownerDocument?.defaultView\n      ?.getContextService()\n      .getBoundingClientRect();\n\n    if (aabb) {\n      const [left, top] = aabb.getMin();\n      const [right, bottom] = aabb.getMax();\n\n      return new Rectangle(\n        left + (bbox?.left || 0),\n        top + (bbox?.top || 0),\n        right - left,\n        bottom - top,\n      );\n    }\n\n    return new Rectangle(bbox?.left || 0, bbox?.top || 0, 0, 0);\n  }\n\n  // #endregion bbox\n  // #region other ----------------------------------------------------------------\n\n  private internalUpdateTransform(element: Element) {\n    const parentTransform = (element.parentNode as Element)?.transformable;\n\n    updateLocalTransform(element.transformable);\n    updateWorldTransform(element.transformable, parentTransform);\n  }\n\n  private internalUpdateElement(\n    element: Element,\n    ancestors: {\n      node: INode;\n      transformDirty: boolean;\n      shapeUpdated: boolean;\n    }[],\n  ): boolean {\n    const enableAttributeUpdateOptimization =\n      element.ownerDocument?.defaultView?.getConfig()?.future\n        ?.experimentalAttributeUpdateOptimization === true;\n    const parent = ancestors[ancestors.length - 1];\n    // parent nodes affect child nodes\n    const transformDirty =\n      parent?.transformDirty || element.transformable?.localDirtyFlag;\n    if (element.transformable) {\n      element.transformable.dirtyFlag ||= transformDirty;\n    }\n\n    this.internalUpdateTransform(element);\n\n    if (transformDirty) {\n      element.dirty?.(true, true);\n    }\n    const shapeUpdated =\n      element.renderable?.boundsDirty || element.renderable?.renderBoundsDirty;\n\n    // The transformation matrix of the child node changes,\n    // which will cause the bounding box data of the ancestor node to become outdated.\n    if (\n      (transformDirty || shapeUpdated) &&\n      parent?.shapeUpdated === false &&\n      enableAttributeUpdateOptimization\n    ) {\n      let tempElIndex = ancestors.length - 1;\n      while (tempElIndex >= 0) {\n        const tempEl = ancestors[tempElIndex];\n        if (tempEl.shapeUpdated) {\n          break;\n        }\n\n        (tempEl.node as Element).dirty?.(true, true);\n        tempEl.shapeUpdated = true;\n\n        tempElIndex -= 1;\n      }\n    }\n\n    return transformDirty;\n  }\n\n  syncHierarchy(rootNode: INode) {\n    // console.log('syncHierarchy');\n    const stack: INode[] = [rootNode];\n    const ancestors: {\n      node: INode;\n      transformDirty: boolean;\n      shapeUpdated: boolean;\n    }[] = rootNode.parentNode\n      ? [\n          {\n            node: rootNode.parentNode,\n            transformDirty:\n              (rootNode.parentNode as Element).transformable?.localDirtyFlag ||\n              (rootNode.parentNode as Element).transformable?.dirtyFlag,\n            shapeUpdated: false,\n          },\n        ]\n      : [];\n\n    while (stack.length > 0) {\n      const node = stack.pop();\n      let parent = ancestors[ancestors.length - 1];\n      while (ancestors.length > 0 && node.parentNode !== parent.node) {\n        parent = ancestors.pop();\n      }\n\n      const transformDirty = this.internalUpdateElement(\n        node as Element,\n        ancestors,\n      );\n\n      if (node.childNodes.length > 0) {\n        for (let i = node.childNodes.length - 1; i >= 0; i--) {\n          stack.push(node.childNodes[i]);\n        }\n\n        ancestors.push({\n          node,\n          transformDirty,\n          shapeUpdated: false,\n        });\n      }\n    }\n  }\n\n  dirtyLocalTransform(element: INode, transform: Transform) {\n    if (isInFragment(element)) return;\n\n    if (!transform.localDirtyFlag) {\n      transform.localDirtyFlag = true;\n      if (!transform.dirtyFlag) {\n        this.dirtyWorldTransform(element, transform);\n      }\n    }\n  }\n\n  dirtyWorldTransform(element: INode, transform: Transform) {\n    this.dirtifyWorldInternal(element, transform);\n    this.dirtyToRoot(element, true);\n  }\n\n  private dirtifyWorldInternal(element: INode, transform: Transform) {\n    const enableAttributeUpdateOptimization =\n      element.ownerDocument?.defaultView?.getConfig()?.future\n        ?.experimentalAttributeUpdateOptimization === true;\n\n    if (!transform.dirtyFlag) {\n      transform.dirtyFlag = true;\n      (element as Element).dirty(true, true);\n\n      if (!enableAttributeUpdateOptimization) {\n        element.childNodes.forEach((child) => {\n          const childTransform = (child as Element).transformable;\n\n          this.dirtifyWorldInternal(child as IElement, childTransform);\n        });\n      }\n    }\n  }\n\n  dirtyToRoot(element: INode, affectChildren = false) {\n    let p = element;\n    const enableAttributeUpdateOptimization =\n      element.ownerDocument?.defaultView?.getConfig()?.future\n        ?.experimentalAttributeUpdateOptimization === true;\n\n    while (p) {\n      (p as Element).dirty?.(true, true);\n\n      if (enableAttributeUpdateOptimization) {\n        break;\n      } else {\n        p = p.parentNode;\n      }\n    }\n\n    if (affectChildren) {\n      element.forEach((e: Element) => {\n        e.dirty?.(true, true);\n      });\n    }\n\n    this.informDependentDisplayObjects(element as DisplayObject);\n\n    this.pendingEvents.set(element as DisplayObject, affectChildren);\n  }\n\n  dirtifyFragment(element: INode) {\n    const transform = (element as Element).transformable;\n    if (transform) {\n      transform.dirtyFlag = true;\n      transform.localDirtyFlag = true;\n    }\n    (element as Element).dirty?.(true, true);\n\n    const length = element.childNodes.length;\n    for (let i = 0; i < length; i++) {\n      this.dirtifyFragment(element.childNodes[i]);\n    }\n\n    if (element.nodeName === Shape.FRAGMENT) {\n      this.pendingEvents.set(element as DisplayObject, false);\n    }\n  }\n\n  triggerPendingEvents() {\n    const triggered = new Set<DisplayObject>();\n    let enableCancelEventPropagation: boolean;\n    let enableAttributeUpdateOptimization: boolean;\n\n    const trigger = (element: DisplayObject, detail) => {\n      if (\n        !element.isConnected ||\n        triggered.has(element) ||\n        (element.nodeName as Shape) === Shape.FRAGMENT\n      ) {\n        return;\n      }\n\n      this.boundsChangedEvent.detail = detail;\n      this.boundsChangedEvent.target = element;\n      if (element.isMutationObserved) {\n        element.dispatchEvent(this.boundsChangedEvent);\n      } else {\n        if (enableCancelEventPropagation === undefined) {\n          enableCancelEventPropagation =\n            element.ownerDocument.defaultView?.getConfig()?.future\n              ?.experimentalCancelEventPropagation === true;\n        }\n\n        element.ownerDocument.defaultView.dispatchEvent(\n          this.boundsChangedEvent,\n          true,\n          enableCancelEventPropagation,\n        );\n      }\n\n      triggered.add(element);\n    };\n\n    this.pendingEvents.forEach((affectChildren, element) => {\n      if ((element.nodeName as Shape) === Shape.FRAGMENT) {\n        return;\n      }\n\n      if (enableAttributeUpdateOptimization === undefined) {\n        enableAttributeUpdateOptimization =\n          element.ownerDocument?.defaultView?.getConfig()?.future\n            ?.experimentalAttributeUpdateOptimization === true;\n      }\n\n      $triggerPendingEvents_detail.affectChildren = affectChildren;\n      if (enableAttributeUpdateOptimization) {\n        trigger(element, $triggerPendingEvents_detail);\n      } else {\n        // eslint-disable-next-line no-lonely-if\n        if (affectChildren) {\n          element.forEach((e: DisplayObject) => {\n            trigger(e, $triggerPendingEvents_detail);\n          });\n        } else {\n          trigger(element, $triggerPendingEvents_detail);\n        }\n      }\n    });\n\n    triggered.clear();\n    this.clearPendingEvents();\n  }\n\n  clearPendingEvents() {\n    this.pendingEvents.clear();\n  }\n\n  private displayObjectDependencyMap: WeakMap<\n    DisplayObject,\n    Record<string, DisplayObject[]>\n  > = new WeakMap();\n  updateDisplayObjectDependency(\n    name: string,\n    oldPath: DisplayObject,\n    newPath: DisplayObject,\n    object: DisplayObject,\n  ) {\n    // clear ref to old clip path\n    if (oldPath && oldPath !== newPath) {\n      const oldDependencyMap = this.displayObjectDependencyMap.get(oldPath);\n      if (oldDependencyMap && oldDependencyMap[name]) {\n        const index = oldDependencyMap[name].indexOf(object);\n        oldDependencyMap[name].splice(index, 1);\n      }\n    }\n\n    if (newPath) {\n      let newDependencyMap = this.displayObjectDependencyMap.get(newPath);\n      if (!newDependencyMap) {\n        this.displayObjectDependencyMap.set(newPath, {});\n        newDependencyMap = this.displayObjectDependencyMap.get(newPath);\n      }\n      if (!newDependencyMap[name]) {\n        newDependencyMap[name] = [];\n      }\n      newDependencyMap[name].push(object);\n    }\n  }\n\n  informDependentDisplayObjects(object: DisplayObject) {\n    const dependencyMap = this.displayObjectDependencyMap.get(object);\n    if (!dependencyMap) {\n      return;\n    }\n\n    const enableCancelEventPropagation =\n      object.ownerDocument?.defaultView?.getConfig()?.future\n        ?.experimentalCancelEventPropagation;\n\n    Object.keys(dependencyMap).forEach((name) => {\n      dependencyMap[name].forEach((target) => {\n        this.dirtyToRoot(target, true);\n\n        target.dispatchEvent(\n          new MutationEvent(\n            ElementEvent.ATTR_MODIFIED,\n            target as IElement,\n            this,\n            this,\n            name,\n            MutationEvent.MODIFICATION,\n            this,\n            this,\n          ),\n          enableCancelEventPropagation,\n          enableCancelEventPropagation,\n        );\n\n        if (target.isCustomElement && target.isConnected) {\n          if ((target as CustomElement<any>).attributeChangedCallback) {\n            (target as CustomElement<any>).attributeChangedCallback(\n              name,\n              this,\n              this,\n            );\n          }\n        }\n      });\n    });\n  }\n}\n", "/**\n * A classic LRU (Least Recently Used) cache implementation.\n * It evicts the least recently used item when the cache is full.\n *\n * It uses a Map for O(1) key-based access\n * to maintain the usage order of items.\n *\n *  JavaScript  Map \n */\nexport default class LRU<T> {\n  private readonly capacity: number;\n  private cache: Map<string | number, T>;\n\n  constructor(capacity: number) {\n    if (capacity <= 0) {\n      throw new Error('LRU capacity must be a positive number.');\n    }\n    this.capacity = capacity;\n    // Using a Map directly simplifies the implementation significantly.\n    // A Map in modern JS engines iterates in insertion order, which is exactly what we need.\n    this.cache = new Map<string | number, T>();\n  }\n\n  /**\n   * Retrieves an item from the cache. Marks the item as recently used.\n   * @param key The key of the item to retrieve.\n   * @returns The value of the item, or undefined if not found.\n   */\n  public get(key: string | number): T | undefined {\n    if (!this.cache.has(key)) {\n      return undefined;\n    }\n\n    // Get the value.\n    const value = this.cache.get(key);\n\n    // Mark as recently used by deleting and re-setting the key.\n    // This moves the key to the end of the Map's internal order.\n    this.cache.delete(key);\n    this.cache.set(key, value);\n\n    return value;\n  }\n\n  /**\n   * Adds or updates an item in the cache. Marks the item as recently used.\n   * If the cache is full, it removes the least recently used item.\n   * @param key The key of the item.\n   * @param value The value of the item.\n   */\n  public put(key: string | number, value: T): void {\n    // If the key already exists, delete it first to ensure it's moved to the end.\n    if (this.cache.has(key)) {\n      this.cache.delete(key);\n    }\n\n    // Add the new item. It will be the most recently used.\n    this.cache.set(key, value);\n\n    // Check if the cache has exceeded its capacity.\n    if (this.cache.size > this.capacity) {\n      // Evict the least recently used item, which is the first one in the Map's iteration order.\n      const leastRecentlyUsedKey = this.cache.keys().next().value;\n      this.cache.delete(leastRecentlyUsedKey);\n    }\n  }\n\n  /**\n   * Returns the current number of items in the cache.\n   */\n  public len(): number {\n    return this.cache.size;\n  }\n\n  /**\n   * Clears all items from the cache.\n   */\n  public clear(): void {\n    this.cache.clear();\n  }\n}\n", "import { CanvasLike, GlobalRuntime } from '..';\nimport type { ParsedTextStyleProps } from '../display-objects';\nimport { Rectangle } from '../shapes';\nimport { toFontString } from '../utils';\nimport LRU from '../utils/LRU';\n\nexport interface TextMetrics {\n  font: string;\n  width: number;\n  height: number;\n  lines: string[];\n  lineWidths: number[];\n  lineHeight: number;\n  maxLineWidth: number;\n  fontProperties: IFontMetrics;\n  lineMetrics: Rectangle[];\n}\n\ninterface IFontMetrics {\n  ascent: number;\n  descent: number;\n  fontSize: number;\n}\n\nconst TEXT_METRICS = {\n  MetricsString: '|q',\n  BaselineSymbol: 'M',\n  BaselineMultiplier: 1.4,\n  HeightMultiplier: 2,\n  Newlines: [\n    0x000a, // line feed\n    0x000d, // carriage return\n  ],\n  BreakingSpaces: [\n    0x0009, // character tabulation\n    0x0020, // space\n    0x2000, // en quad\n    0x2001, // em quad\n    0x2002, // en space\n    0x2003, // em space\n    0x2004, // three-per-em space\n    0x2005, // four-per-em space\n    0x2006, // six-per-em space\n    0x2008, // punctuation space\n    0x2009, // thin space\n    0x200a, // hair space\n    0x205f, // medium mathematical space\n    0x3000, // ideographic space\n  ],\n};\n\nconst LATIN_REGEX =\n  /[a-zA-Z0-9\\u00C0-\\u00D6\\u00D8-\\u00f6\\u00f8-\\u00ff!\"#$%&'()*+,-./:;]/;\n\n// Line breaking rules in CJK (Kinsoku Shori)\n// Refer from https://en.wikipedia.org/wiki/Line_breaking_rules_in_East_Asian_languages\nconst regexCannotStartZhCn =\n  /[!%),.:;?\\]}'\"\"]/;\nconst regexCannotEndZhCn = /[$('\"]/;\nconst regexCannotStartZhTw =\n  /[!),.:;?\\]}'\"\"]/;\nconst regexCannotEndZhTw = /[([{'\"]/;\nconst regexCannotStartJaJp =\n  /[)\\]'\"?!:;,.]/;\nconst regexCannotEndJaJp = /[(['\"...]/;\nconst regexCannotStartKoKr =\n  /[!%),.:;?\\]}'\"]/;\nconst regexCannotEndKoKr = /[$([{'\"#]/;\n\nconst regexCannotStart = new RegExp(\n  `${regexCannotStartZhCn.source}|${regexCannotStartZhTw.source}|${regexCannotStartJaJp.source}|${regexCannotStartKoKr.source}`,\n);\nconst regexCannotEnd = new RegExp(\n  `${regexCannotEndZhCn.source}|${regexCannotEndZhTw.source}|${regexCannotEndJaJp.source}|${regexCannotEndKoKr.source}`,\n);\n\n/**\n * Borrow from pixi/packages/text/src/TextMetrics.ts\n */\nexport class TextService {\n  constructor(private runtime: GlobalRuntime) {\n    this.charWidthCache = new LRU<LRU<number>>(100);\n  }\n\n  /**\n   * font metrics cache\n   */\n  private fontMetricsCache: Record<string, IFontMetrics> = {};\n\n  /**\n   * A global cache for character widths, keyed by font string.\n   * e.g. { '16px Arial': { 'a': 8, 'b': 9 } }\n   */\n  private charWidthCache: LRU<LRU<number>>;\n\n  /**\n   * Calculates the ascent, descent and fontSize of a given font-style.\n   */\n  measureFont(font: string, offscreenCanvas: CanvasLike): IFontMetrics {\n    // as this method is used for preparing assets, don't recalculate things if we don't need to\n    if (this.fontMetricsCache[font]) {\n      return this.fontMetricsCache[font];\n    }\n    const properties: IFontMetrics = {\n      ascent: 0,\n      descent: 0,\n      fontSize: 0,\n    };\n\n    const canvas =\n      this.runtime.offscreenCanvasCreator.getOrCreateCanvas(offscreenCanvas);\n    const context = this.runtime.offscreenCanvasCreator.getOrCreateContext(\n      offscreenCanvas,\n      {\n        willReadFrequently: true,\n      },\n    );\n\n    context.font = font;\n    const metricsString =\n      TEXT_METRICS.MetricsString + TEXT_METRICS.BaselineSymbol;\n    const width = Math.ceil(context.measureText(metricsString).width);\n    let baseline = Math.ceil(\n      context.measureText(TEXT_METRICS.BaselineSymbol).width,\n    );\n    const height = TEXT_METRICS.HeightMultiplier * baseline;\n    baseline = (baseline * TEXT_METRICS.BaselineMultiplier) | 0;\n    // @ts-ignore\n    canvas.width = width;\n    // @ts-ignore\n    canvas.height = height;\n    context.fillStyle = '#f00';\n    context.fillRect(0, 0, width, height);\n    context.font = font;\n    context.textBaseline = 'alphabetic';\n    context.fillStyle = '#000';\n    context.fillText(metricsString, 0, baseline);\n    const imagedata = context.getImageData(0, 0, width || 1, height || 1).data;\n    const pixels = imagedata.length;\n    const line = width * 4;\n    let i = 0;\n    let idx = 0;\n    let stop = false;\n    // ascent. scan from top to bottom until we find a non red pixel\n    for (i = 0; i < baseline; ++i) {\n      for (let j = 0; j < line; j += 4) {\n        if (imagedata[idx + j] !== 255) {\n          stop = true;\n          break;\n        }\n      }\n      if (!stop) {\n        idx += line;\n      } else {\n        break;\n      }\n    }\n    properties.ascent = baseline - i;\n    idx = pixels - line;\n    stop = false;\n    // descent. scan from bottom to top until we find a non red pixel\n    for (i = height; i > baseline; --i) {\n      for (let j = 0; j < line; j += 4) {\n        if (imagedata[idx + j] !== 255) {\n          stop = true;\n          break;\n        }\n      }\n      if (!stop) {\n        idx -= line;\n      } else {\n        break;\n      }\n    }\n    properties.descent = i - baseline;\n    properties.fontSize = properties.ascent + properties.descent;\n\n    this.fontMetricsCache[font] = properties;\n    return properties;\n  }\n\n  measureText(\n    text: string,\n    parsedStyle: ParsedTextStyleProps,\n    offscreenCanvas: CanvasLike,\n  ): TextMetrics {\n    const {\n      fontSize = 16,\n      wordWrap = false,\n      lineHeight: strokeHeight,\n      lineWidth = 1,\n      textBaseline = 'alphabetic',\n      textAlign = 'start',\n      letterSpacing = 0,\n      textPath,\n      textPathSide,\n      textPathStartOffset,\n      // dropShadow = 0,\n      // dropShadowDistance = 0,\n      leading = 0,\n    } = parsedStyle;\n\n    const font = toFontString(parsedStyle);\n\n    const fontProperties = this.measureFont(font, offscreenCanvas);\n    // fallback in case UA disallow canvas data extraction\n    if (fontProperties.fontSize === 0) {\n      fontProperties.fontSize = fontSize;\n      fontProperties.ascent = fontSize;\n    }\n\n    const context =\n      this.runtime.offscreenCanvasCreator.getOrCreateContext(offscreenCanvas);\n    context.font = font;\n\n    // no overflowing by default\n    parsedStyle.isOverflowing = false;\n    const outputText = wordWrap\n      ? this.wordWrap(text, parsedStyle, offscreenCanvas)\n      : text;\n\n    const lines = outputText.split(/(?:\\r\\n|\\r|\\n)/);\n    const lineWidths = new Array<number>(lines.length);\n    let maxLineWidth = 0;\n\n    // account for textPath\n    if (textPath) {\n      const totalPathLength = textPath.getTotalLength();\n\n      // const startingPoint = textPath.getPoint(0);\n\n      for (let i = 0; i < lines.length; i++) {\n        let positionInPath: number;\n        const width =\n          context.measureText(lines[i]).width +\n          (lines[i].length - 1) * letterSpacing;\n        const reverse = textPathSide === 'right';\n\n        // TODO: should we support textPathStartOffsetY?\n        switch (textAlign) {\n          case 'left':\n          case 'start':\n            positionInPath = reverse ? totalPathLength - width : 0;\n            break;\n          case 'center':\n          case 'middle':\n            positionInPath = (totalPathLength - width) / 2;\n            break;\n          case 'right':\n          case 'end':\n            positionInPath = reverse ? 0 : totalPathLength - width;\n            break;\n        }\n\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        positionInPath += textPathStartOffset * (reverse ? -1 : 1);\n        // for (\n        //   let i = reverse ? lines[0].length - 1 : 0;\n        //   reverse ? i >= 0 : i < lines[0].length;\n        //   reverse ? i-- : i++\n        // ) {\n        //   graphemeInfo = lineBounds[i];\n        //   if (positionInPath > totalPathLength) {\n        //     positionInPath %= totalPathLength;\n        //   } else if (positionInPath < 0) {\n        //     positionInPath += totalPathLength;\n        //   }\n        //   // it would probably much faster to send all the grapheme position for a line\n        //   // and calculate path position/angle at once.\n        //   this.setGraphemeOnPath(\n        //     positionInPath,\n        //     graphemeInfo,\n        //     startingPoint\n        //   );\n        //   positionInPath += graphemeInfo.kernedWidth;\n        // }\n      }\n    } else {\n      for (let i = 0; i < lines.length; i++) {\n        // char width + letterSpacing\n        const lineWidth =\n          context.measureText(lines[i]).width +\n          (lines[i].length - 1) * letterSpacing;\n        lineWidths[i] = lineWidth;\n        maxLineWidth = Math.max(maxLineWidth, lineWidth);\n      }\n      const width = maxLineWidth + lineWidth;\n\n      // if (dropShadow) {\n      //   width += dropShadowDistance;\n      // }\n      let lineHeight = strokeHeight || fontProperties.fontSize + lineWidth;\n      const height =\n        Math.max(lineHeight, fontProperties.fontSize + lineWidth) +\n        (lines.length - 1) * (lineHeight + leading);\n      // if (dropShadow) {\n      //   height += dropShadowDistance;\n      // }\n      lineHeight += leading;\n\n      // handle vertical text baseline\n      let offsetY = 0;\n      if (textBaseline === 'middle') {\n        offsetY = -height / 2;\n      } else if (\n        textBaseline === 'bottom' ||\n        textBaseline === 'alphabetic' ||\n        textBaseline === 'ideographic'\n      ) {\n        offsetY = -height;\n      } else if (textBaseline === 'top' || textBaseline === 'hanging') {\n        offsetY = 0;\n      }\n\n      return {\n        font,\n        width,\n        height,\n        lines,\n        lineWidths,\n        lineHeight,\n        maxLineWidth,\n        fontProperties,\n        lineMetrics: lineWidths.map((width, i) => {\n          let offsetX = 0;\n          // handle horizontal text align\n          if (textAlign === 'center' || textAlign === 'middle') {\n            offsetX -= width / 2;\n          } else if (textAlign === 'right' || textAlign === 'end') {\n            offsetX -= width;\n          }\n\n          return new Rectangle(\n            offsetX - lineWidth / 2,\n            offsetY + i * lineHeight,\n            width + lineWidth,\n            lineHeight,\n          );\n        }),\n      };\n    }\n  }\n\n  private wordWrap(\n    text: string,\n    parsedStyle: ParsedTextStyleProps,\n    offscreenCanvas: CanvasLike,\n  ): string {\n    const chars = Array.from(text);\n    if (chars.length === 0) {\n      return '';\n    }\n\n    const self = this;\n    const {\n      wordWrapWidth = 0,\n      letterSpacing = 0,\n      maxLines = Infinity,\n      textOverflow,\n    } = parsedStyle;\n    const context =\n      this.runtime.offscreenCanvasCreator.getOrCreateContext(offscreenCanvas);\n    const maxWidth = wordWrapWidth + letterSpacing;\n\n    let ellipsis = '';\n    if (textOverflow === 'ellipsis') {\n      ellipsis = '...';\n    } else if (textOverflow && textOverflow !== 'clip') {\n      ellipsis = textOverflow;\n    }\n\n    let lines: string[] = [''];\n    let currentLineIndex = 0;\n    let currentLineWidth = 0;\n    // @see https://github.com/antvis/G/issues/1932\n    let prevLineLastCharIndex = -1;\n\n    // ---  ---\n    // 1. \n    const font = toFontString(parsedStyle);\n    let charCache = this.charWidthCache.get(font);\n    if (!charCache) {\n      charCache = new LRU<number>(500);\n      this.charWidthCache.put(font, charCache);\n    }\n\n    // 2. calcWidth  charCache\n    const calcWidth = (char: string): number => {\n      return this.getFromCache(\n        char,\n        letterSpacing,\n        charCache,\n        context as CanvasRenderingContext2D,\n      );\n    };\n    const ellipsisWidth = calcWidth(ellipsis);\n\n    /**\n     * Find text fragments that will take up as much of the given line width as possible when rendered.\n     *\n     * @see https://github.com/antvis/G/issues/1833\n     *\n     * @param lineTxt - Current line of text\n     * @param txtLastCharIndex - The index of the last character of the current line in the entire text\n     * @param txtStartCharIndex - The index of the start character of the current line in the entire text\n     */\n    function findCharIndexClosestWidthThreshold(\n      lineTxt: string,\n      txtLastCharIndex: number,\n      txtStartCharIndex: number,\n      widthThreshold: number,\n    ) {\n      while (\n        calcWidth(lineTxt) < widthThreshold &&\n        txtLastCharIndex < chars.length - 1\n      ) {\n        if (self.isNewline(chars[txtLastCharIndex + 1])) {\n          break;\n        }\n        txtLastCharIndex += 1;\n        lineTxt += chars[txtLastCharIndex];\n      }\n\n      while (\n        calcWidth(lineTxt) > widthThreshold &&\n        // @see https://github.com/antvis/G/issues/1932\n        txtLastCharIndex >= txtStartCharIndex\n      ) {\n        txtLastCharIndex -= 1;\n        lineTxt = lineTxt.slice(0, -1);\n      }\n\n      return {\n        lineTxt,\n        txtLastCharIndex,\n      };\n    }\n\n    function appendEllipsis(lineIndex: number, textCharIndex: number) {\n      // If there is not enough space to display the string itself, it is clipped.\n      // @see https://developer.mozilla.org/en-US/docs/Web/CSS/text-overflow#values\n      if (ellipsisWidth <= 0 || ellipsisWidth > maxWidth) {\n        return;\n      }\n\n      if (!lines[lineIndex]) {\n        lines[lineIndex] = ellipsis;\n\n        return;\n      }\n\n      const result = findCharIndexClosestWidthThreshold(\n        lines[lineIndex],\n        textCharIndex,\n        prevLineLastCharIndex + 1,\n        maxWidth - ellipsisWidth,\n      );\n\n      lines[lineIndex] = result.lineTxt + ellipsis;\n    }\n\n    for (let i = 0; i < chars.length; i++) {\n      let char = chars[i];\n      let prevChar = chars[i - 1];\n      let nextChar = chars[i + 1];\n      let charWidth = calcWidth(char);\n\n      if (this.isNewline(char)) {\n        // exceed maxLines, break immediately\n        if (currentLineIndex + 1 >= maxLines) {\n          if (i < chars.length - 1) {\n            appendEllipsis(currentLineIndex, i - 1);\n          }\n          parsedStyle.isOverflowing = true;\n          break;\n        }\n\n        prevLineLastCharIndex = i - 1;\n        currentLineIndex += 1;\n        currentLineWidth = 0;\n        lines[currentLineIndex] = '';\n\n        continue;\n      }\n\n      // If char width exceeds max width, no need to continue\n      if (charWidth > maxWidth) {\n        appendEllipsis(currentLineIndex, i - 1);\n        parsedStyle.isOverflowing = true;\n        break;\n      }\n\n      if (currentLineWidth > 0 && currentLineWidth + charWidth > maxWidth) {\n        const result = findCharIndexClosestWidthThreshold(\n          lines[currentLineIndex],\n          i - 1,\n          prevLineLastCharIndex + 1,\n          maxWidth,\n        );\n        if (result.txtLastCharIndex !== i - 1) {\n          lines[currentLineIndex] = result.lineTxt;\n\n          if (result.txtLastCharIndex === chars.length - 1) {\n            break;\n          }\n\n          i = result.txtLastCharIndex + 1;\n          char = chars[i];\n          prevChar = chars[i - 1];\n          nextChar = chars[i + 1];\n          charWidth = calcWidth(char);\n        }\n\n        if (currentLineIndex + 1 >= maxLines) {\n          appendEllipsis(currentLineIndex, i - 1);\n          parsedStyle.isOverflowing = true;\n          break;\n        }\n\n        prevLineLastCharIndex = i - 1;\n        currentLineIndex += 1;\n        currentLineWidth = 0;\n        lines[currentLineIndex] = '';\n\n        if (this.isBreakingSpace(char)) {\n          continue;\n        }\n\n        if (!this.canBreakInLastChar(char)) {\n          lines = this.trimToBreakable(lines);\n          currentLineWidth = this.sumTextWidthByCache(\n            lines[currentLineIndex] || '',\n            calcWidth,\n          );\n        }\n\n        if (this.shouldBreakByKinsokuShorui(char, nextChar)) {\n          lines = this.trimByKinsokuShorui(lines);\n          currentLineWidth += calcWidth(prevChar || '');\n        }\n      }\n\n      currentLineWidth += charWidth;\n      lines[currentLineIndex] += char;\n    }\n\n    return lines.join('\\n');\n  }\n\n  private isBreakingSpace(char: string): boolean {\n    if (typeof char !== 'string') {\n      return false;\n    }\n    return TEXT_METRICS.BreakingSpaces.indexOf(char.charCodeAt(0)) >= 0;\n  }\n\n  private isNewline(char: string): boolean {\n    if (typeof char !== 'string') {\n      return false;\n    }\n    return TEXT_METRICS.Newlines.indexOf(char.charCodeAt(0)) >= 0;\n  }\n\n  private trimToBreakable(prev: string[]): string[] {\n    const next = [...prev];\n    const prevLine = next[next.length - 2];\n\n    const index = this.findBreakableIndex(prevLine);\n    if (index === -1 || !prevLine) return next;\n\n    const trimmedChar = prevLine.slice(index, index + 1);\n    const isTrimmedWithSpace = this.isBreakingSpace(trimmedChar);\n\n    const trimFrom = index + 1;\n    const trimTo = index + (isTrimmedWithSpace ? 0 : 1);\n    next[next.length - 1] += prevLine.slice(trimFrom, prevLine.length);\n    next[next.length - 2] = prevLine.slice(0, trimTo);\n\n    return next;\n  }\n\n  private shouldBreakByKinsokuShorui = (\n    char: string | undefined,\n    nextChar: string,\n  ): boolean => {\n    if (this.isBreakingSpace(nextChar)) return false;\n\n    if (char) {\n      // Line breaking rules in CJK (Kinsoku Shori)\n      if (regexCannotEnd.exec(nextChar) || regexCannotStart.exec(char)) {\n        return true;\n      }\n    }\n    return false;\n  };\n\n  private trimByKinsokuShorui = (prev: string[]): string[] => {\n    const next = [...prev];\n    const prevLine = next[next.length - 2];\n    if (!prevLine) {\n      return prev;\n    }\n\n    const lastChar = prevLine[prevLine.length - 1];\n\n    next[next.length - 2] = prevLine.slice(0, -1);\n    next[next.length - 1] = lastChar + next[next.length - 1];\n    return next;\n  };\n\n  private canBreakInLastChar(char: string | undefined): boolean {\n    if (char && LATIN_REGEX.test(char)) return false;\n    return true;\n  }\n\n  private sumTextWidthByCache(\n    text: string,\n    calcWidthWithCache: (txt: string) => number,\n  ) {\n    return text.split('').reduce((sum: number, c) => {\n      return sum + calcWidthWithCache(c);\n    }, 0);\n  }\n\n  private findBreakableIndex(line: string): number {\n    for (let i = line.length - 1; i >= 0; i--) {\n      if (!LATIN_REGEX.test(line[i])) return i;\n    }\n    return -1;\n  }\n\n  private getFromCache(\n    key: string,\n    letterSpacing: number,\n    cache: LRU<number>,\n    context: CanvasRenderingContext2D,\n  ): number {\n    let width = cache.get(key);\n    if (typeof width !== 'number') {\n      const spacing = key.length * letterSpacing;\n      const metrics = context.measureText(key);\n\n      width = metrics.width + spacing;\n      cache.put(key, width);\n    }\n    return width;\n  }\n\n  public clearCache() {\n    this.fontMetricsCache = {};\n    this.charWidthCache.clear();\n  }\n}\n", "import { Camera } from './camera';\nimport type { LayoutRegistry } from './css';\nimport type { CSSProperty } from './css/CSSProperty';\nimport { DefaultStyleValueRegistry } from './css/StyleValueRegistry';\nimport { PropertySyntax } from './css/interfaces';\nimport {\n  CSSPropertyAngle,\n  CSSPropertyClipPath,\n  CSSPropertyColor,\n  CSSPropertyFilter,\n  CSSPropertyLengthOrPercentage,\n  CSSPropertyLengthOrPercentage12,\n  CSSPropertyLengthOrPercentage14,\n  CSSPropertyMarker,\n  CSSPropertyNumber,\n  CSSPropertyOffsetDistance,\n  CSSPropertyOpacity,\n  CSSPropertyPath,\n  CSSPropertyPoints,\n  CSSPropertyShadowBlur,\n  CSSPropertyText,\n  CSSPropertyTextTransform,\n  CSSPropertyTransform,\n  CSSPropertyTransformOrigin,\n  CSSPropertyZIndex,\n} from './css/properties';\nimport type {\n  GeometryAABBUpdater,\n  SceneGraphSelector,\n  SceneGraphService,\n} from './services';\nimport {\n  CircleUpdater,\n  DefaultSceneGraphSelector,\n  DefaultSceneGraphService,\n  EllipseUpdater,\n  GroupUpdater,\n  HTMLUpdater,\n  LineUpdater,\n  OffscreenCanvasCreator,\n  PathUpdater,\n  PolylineUpdater,\n  RectUpdater,\n  TextService,\n  TextUpdater,\n} from './services';\nimport { CanvasLike, Shape } from './types';\n\nexport const runtime: GlobalRuntime = {} as GlobalRuntime;\n\nexport interface GlobalRuntime {\n  CameraContribution: new () => Camera;\n  // AnimationTimeline: new (doc: IDocument) => IAnimationTimeline;\n  AnimationTimeline: any;\n  EasingFunction: (...args: any[]) => (t: number) => number;\n  offscreenCanvasCreator: OffscreenCanvasCreator;\n  offscreenCanvas: CanvasLike;\n  sceneGraphSelector: SceneGraphSelector;\n  sceneGraphService: SceneGraphService;\n  textService: TextService;\n  geometryUpdaterFactory: Record<Shape, GeometryAABBUpdater<any>>;\n  styleValueRegistry: DefaultStyleValueRegistry;\n  layoutRegistry: LayoutRegistry;\n  CSSPropertySyntaxFactory: Record<\n    PropertySyntax,\n    Partial<CSSProperty<any, any>>\n  >;\n  globalThis: any;\n\n  /**\n   * circle.style.r = 100;\n   */\n  enableStyleSyntax: boolean;\n\n  enableSizeAttenuation: boolean;\n}\n\n/**\n * Replace with IoC container\n */\nconst geometryUpdaterFactory: Record<Shape, GeometryAABBUpdater<any>> = (() => {\n  const rectUpdater = new RectUpdater();\n  const polylineUpdater = new PolylineUpdater();\n  return {\n    [Shape.FRAGMENT]: null,\n    [Shape.CIRCLE]: new CircleUpdater(),\n    [Shape.ELLIPSE]: new EllipseUpdater(),\n    [Shape.RECT]: rectUpdater,\n    [Shape.IMAGE]: rectUpdater,\n    [Shape.GROUP]: new GroupUpdater(),\n    [Shape.LINE]: new LineUpdater(),\n    [Shape.TEXT]: new TextUpdater(runtime),\n    [Shape.POLYLINE]: polylineUpdater,\n    [Shape.POLYGON]: polylineUpdater,\n    [Shape.PATH]: new PathUpdater(),\n    [Shape.HTML]: new HTMLUpdater(),\n    [Shape.MESH]: null,\n  };\n})();\n\nconst CSSPropertySyntaxFactory: Record<\n  PropertySyntax,\n  Partial<CSSProperty<any, any>>\n> = (() => {\n  const color = new CSSPropertyColor();\n  const length = new CSSPropertyLengthOrPercentage();\n  return {\n    [PropertySyntax.PERCENTAGE]: null,\n    [PropertySyntax.NUMBER]: new CSSPropertyNumber(),\n    [PropertySyntax.ANGLE]: new CSSPropertyAngle(),\n    [PropertySyntax.DEFINED_PATH]: new CSSPropertyClipPath(),\n    [PropertySyntax.PAINT]: color,\n    [PropertySyntax.COLOR]: color,\n    [PropertySyntax.FILTER]: new CSSPropertyFilter(),\n    [PropertySyntax.LENGTH]: length,\n    [PropertySyntax.LENGTH_PERCENTAGE]: length,\n    [PropertySyntax.LENGTH_PERCENTAGE_12]:\n      new CSSPropertyLengthOrPercentage12(),\n    [PropertySyntax.LENGTH_PERCENTAGE_14]:\n      new CSSPropertyLengthOrPercentage14(),\n    [PropertySyntax.COORDINATE]: new CSSPropertyLengthOrPercentage(),\n    [PropertySyntax.OFFSET_DISTANCE]: new CSSPropertyOffsetDistance(),\n    [PropertySyntax.OPACITY_VALUE]: new CSSPropertyOpacity(),\n    [PropertySyntax.PATH]: new CSSPropertyPath(),\n    [PropertySyntax.LIST_OF_POINTS]: new CSSPropertyPoints(),\n    [PropertySyntax.SHADOW_BLUR]: new CSSPropertyShadowBlur(),\n    [PropertySyntax.TEXT]: new CSSPropertyText(),\n    [PropertySyntax.TEXT_TRANSFORM]: new CSSPropertyTextTransform(),\n    [PropertySyntax.TRANSFORM]: new CSSPropertyTransform(),\n    [PropertySyntax.TRANSFORM_ORIGIN]: new CSSPropertyTransformOrigin(),\n    [PropertySyntax.Z_INDEX]: new CSSPropertyZIndex(),\n    [PropertySyntax.MARKER]: new CSSPropertyMarker(),\n  };\n})();\n\nconst getGlobalThis = () => {\n  if (typeof globalThis !== 'undefined') return globalThis;\n  if (typeof self !== 'undefined') return self;\n  if (typeof window !== 'undefined') return window;\n  // @ts-ignore\n  if (typeof global !== 'undefined') return global;\n  return {};\n  // [!] Error: The 'this' keyword is equivalent to 'undefined' at the top level of an ES module, and has been rewritten\n  // @see https://rollupjs.org/troubleshooting/#error-this-is-undefined\n  // if (typeof this !== 'undefined') return this;\n};\n\n/**\n * Camera\n * `g-camera-api` will provide an advanced implementation\n */\nruntime.CameraContribution = Camera;\n\n/**\n * `g-web-animations-api` will provide an AnimationTimeline\n */\nruntime.AnimationTimeline = null;\n\nruntime.EasingFunction = null;\n\nruntime.offscreenCanvasCreator = new OffscreenCanvasCreator();\n\nruntime.sceneGraphSelector = new DefaultSceneGraphSelector();\n\nruntime.sceneGraphService = new DefaultSceneGraphService(runtime);\n\nruntime.textService = new TextService(runtime);\n\nruntime.geometryUpdaterFactory = geometryUpdaterFactory;\n\nruntime.CSSPropertySyntaxFactory = CSSPropertySyntaxFactory;\nruntime.styleValueRegistry = new DefaultStyleValueRegistry(runtime);\nruntime.layoutRegistry = null;\nruntime.globalThis = getGlobalThis();\nruntime.enableStyleSyntax = true;\nruntime.enableSizeAttenuation = false;\n", "import type {\n  Cullable,\n  Geometry,\n  RBushNode,\n  Renderable,\n  Sortable,\n  Transform,\n} from '../components';\nimport { Strategy } from '../components';\nimport { runtime } from '../global-runtime';\nimport type { AABB, Rectangle } from '../shapes';\nimport {\n  Shape,\n  type BaseStyleProps,\n  type ParsedBaseStyleProps,\n} from '../types';\nimport { isInFragment } from '../utils';\nimport {\n  ERROR_MSG_APPEND_DESTROYED_ELEMENT,\n  ERROR_MSG_METHOD_NOT_IMPLEMENTED,\n} from '../utils/error';\nimport { CustomEvent } from './CustomEvent';\nimport { MutationEvent } from './MutationEvent';\nimport { Node } from './Node';\nimport type {\n  ICSSStyleDeclaration,\n  IChildNode,\n  IElement,\n  INode,\n} from './interfaces';\nimport { ElementEvent } from './interfaces';\n\nlet entityCounter = 0;\nexport function resetEntityCounter() {\n  entityCounter = 0;\n}\n\nexport const insertedEvent = new MutationEvent(\n  ElementEvent.INSERTED,\n  null,\n  '',\n  '',\n  '',\n  0,\n  '',\n  '',\n);\nexport const removedEvent = new MutationEvent(\n  ElementEvent.REMOVED,\n  null,\n  '',\n  '',\n  '',\n  0,\n  '',\n  '',\n);\nexport const destroyEvent = new CustomEvent(ElementEvent.DESTROY);\n\n/**\n * Has following capabilities:\n * * Node insert/remove, eg. appendChild, removeChild, remove...\n * * Query eg. querySelector getElementById...\n * * Animation\n */\nexport class Element<\n    StyleProps extends BaseStyleProps = BaseStyleProps,\n    ParsedStyleProps extends ParsedBaseStyleProps = ParsedBaseStyleProps,\n  >\n  extends Node\n  implements IElement<StyleProps, ParsedStyleProps>\n{\n  /**\n   * Unique id.\n   */\n  entity = entityCounter++;\n\n  transformable: Transform = {\n    dirtyFlag: false,\n    localDirtyFlag: false,\n    localPosition: [0, 0, 0],\n    localRotation: [0, 0, 0, 1],\n    localScale: [1, 1, 1],\n    localTransform: [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1],\n    localSkew: [0, 0],\n    position: [0, 0, 0],\n    rotation: [0, 0, 0, 1],\n    scaling: [1, 1, 1],\n    worldTransform: [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1],\n    origin: [0, 0, 0],\n  };\n\n  renderable: Renderable = {\n    bounds: undefined,\n    boundsDirty: true,\n    renderBounds: undefined,\n    renderBoundsDirty: true,\n    dirtyRenderBounds: undefined,\n    dirty: false,\n  };\n\n  /**\n   * @param flag - default `true`, whether the object needs to be updated\n   * @param updateShape - default `false`, whether the bounding box of the object is updated\n   */\n  dirty(flag = true, updateShape = false) {\n    this.renderable.dirty = flag;\n    if (updateShape) {\n      this.renderable.boundsDirty = flag;\n      this.renderable.renderBoundsDirty = flag;\n    }\n  }\n\n  geometry: Geometry = {\n    contentBounds: undefined,\n    renderBounds: undefined,\n    dirty: true,\n  };\n\n  cullable: Cullable = {\n    strategy: Strategy.Standard,\n    visibilityPlaneMask: -1,\n    visible: true,\n    enable: true,\n  };\n\n  sortable: Sortable = {\n    dirty: false,\n    sorted: undefined,\n    renderOrder: 0,\n    dirtyChildren: [],\n    dirtyReason: undefined,\n  };\n\n  rBushNode: RBushNode = {\n    aabb: undefined,\n  };\n\n  /**\n   * used with `getElementById()`\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/id\n   */\n  id: string;\n\n  /**\n   * used in `getElementsByClassName`\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Document/getElementsByClassName\n   */\n  get className() {\n    // @ts-ignore\n    return this.getAttribute('class') || '';\n  }\n\n  set className(className: string) {\n    this.setAttribute('class', className);\n  }\n\n  /**\n   * used in `getElementsByName`\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Document/getElementsByName\n   */\n  name: string;\n\n  /**\n   * https://developer.mozilla.org/zh-CN/docs/Web/API/Element/namespaceURI\n   */\n  namespaceURI = 'g';\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/classList\n   */\n  get classList() {\n    return this.className.split(' ').filter((c) => c !== '');\n  }\n\n  scrollLeft = 0;\n  scrollTop = 0;\n\n  /**\n   * We don't support border now\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/clientTop\n   */\n  clientTop = 0;\n  clientLeft = 0;\n\n  get tagName(): string {\n    return this.nodeName;\n  }\n\n  get children(): IElement[] {\n    return this.childNodes as IElement[];\n  }\n\n  get childElementCount(): number {\n    return this.childNodes.length;\n  }\n  get firstElementChild(): IElement | null {\n    return this.firstChild as IElement;\n  }\n  get lastElementChild(): IElement | null {\n    return this.lastChild as IElement;\n  }\n\n  get parentElement(): IElement | null {\n    return this.parentNode as IElement;\n  }\n\n  get nextSibling(): IElement | null {\n    if (this.parentNode) {\n      const index = this.parentNode.childNodes.indexOf(this);\n      return (this.parentNode.childNodes[index + 1] as IElement) || null;\n    }\n\n    return null;\n  }\n\n  get previousSibling(): IElement | null {\n    if (this.parentNode) {\n      const index = this.parentNode.childNodes.indexOf(this);\n      return (this.parentNode.childNodes[index - 1] as IElement) || null;\n    }\n\n    return null;\n  }\n\n  cloneNode(deep?: boolean): this {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  }\n\n  appendChild<T extends INode>(child: T, index?: number): T {\n    if ((child as unknown as Element).destroyed) {\n      throw new Error(ERROR_MSG_APPEND_DESTROYED_ELEMENT);\n    }\n\n    runtime.sceneGraphService.attach(child, this, index);\n\n    if (this.ownerDocument?.defaultView) {\n      if (!isInFragment(this) && child.nodeName === Shape.FRAGMENT) {\n        this.ownerDocument.defaultView.mountFragment(child);\n      } else {\n        this.ownerDocument.defaultView.mountChildren(child);\n      }\n    }\n\n    // @ts-ignore\n    if (this.isMutationObserved) {\n      insertedEvent.relatedNode = this as IElement;\n      child.dispatchEvent(insertedEvent);\n    }\n\n    return child;\n  }\n\n  insertBefore<T extends INode>(newChild: T, refChild: INode | null): T {\n    if (!refChild) {\n      this.appendChild(newChild);\n    } else {\n      if (newChild.parentElement) {\n        newChild.parentElement.removeChild(newChild);\n      }\n\n      const index = this.childNodes.indexOf(refChild as IChildNode);\n      if (index === -1) {\n        this.appendChild(newChild);\n      } else {\n        this.appendChild(newChild, index);\n      }\n    }\n    return newChild;\n  }\n\n  replaceChild<T extends INode>(newChild: INode, oldChild: T): T {\n    const index = this.childNodes.indexOf(oldChild as unknown as IChildNode);\n    this.removeChild(oldChild);\n    this.appendChild(newChild, index);\n    return oldChild;\n  }\n\n  removeChild<T extends INode>(child: T): T {\n    const enableCancelEventPropagation =\n      this.ownerDocument?.defaultView?.getConfig().future\n        ?.experimentalCancelEventPropagation === true;\n\n    // should emit on itself before detach\n    removedEvent.relatedNode = this as IElement;\n    child.dispatchEvent(\n      removedEvent,\n      enableCancelEventPropagation,\n      enableCancelEventPropagation,\n    );\n\n    if (child.ownerDocument?.defaultView) {\n      child.ownerDocument.defaultView.unmountChildren(child);\n    }\n\n    // remove from scene graph\n    runtime.sceneGraphService.detach(child);\n    return child;\n  }\n\n  /**\n   * Remove all children which can be appended to its original parent later again.\n   */\n  removeChildren() {\n    for (let i = this.childNodes.length - 1; i >= 0; i--) {\n      const child = this.childNodes[i] as this;\n      this.removeChild(child);\n    }\n  }\n\n  /**\n   * Recursively destroy all children which can not be appended to its original parent later again.\n   */\n  destroyChildren() {\n    for (let i = this.childNodes.length - 1; i >= 0; i--) {\n      const child = this.childNodes[i] as this;\n      if (child.childNodes.length > 0) {\n        child.destroyChildren();\n      }\n      child.destroy();\n    }\n  }\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/matches\n   */\n  matches(selector: string): boolean {\n    return runtime.sceneGraphService.matches(selector, this as IElement);\n  }\n  getElementById<E extends IElement = IElement>(id: string): E | null {\n    return runtime.sceneGraphService.querySelector<IElement, E>(\n      `#${id}`,\n      this as IElement,\n    );\n  }\n  getElementsByName<E extends IElement = IElement>(name: string): E[] {\n    return runtime.sceneGraphService.querySelectorAll<IElement, E>(\n      `[name=\"${name}\"]`,\n      this as IElement,\n    );\n  }\n  getElementsByClassName<E extends IElement = IElement>(\n    className: string,\n  ): E[] {\n    return runtime.sceneGraphService.querySelectorAll<IElement, E>(\n      `.${className}`,\n      this as IElement,\n    );\n  }\n  getElementsByTagName<E extends IElement = IElement>(tagName: string): E[] {\n    return runtime.sceneGraphService.querySelectorAll<IElement, E>(\n      tagName,\n      this as IElement,\n    );\n  }\n  querySelector<E extends IElement = IElement>(selectors: string): E | null {\n    return runtime.sceneGraphService.querySelector<IElement, E>(\n      selectors,\n      this as IElement,\n    );\n  }\n  querySelectorAll<E extends IElement = IElement>(selectors: string): E[] {\n    return runtime.sceneGraphService.querySelectorAll<IElement, E>(\n      selectors,\n      this as IElement,\n    );\n  }\n\n  /**\n   * should traverses the element and its parents (heading toward the document root)\n   * until it finds a node that matches the specified CSS selector.\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Element/closest\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/closest#polyfill\n   */\n  closest<E extends IElement = IElement>(selectors: string): E | null {\n    let el = this as unknown as E;\n    do {\n      if (runtime.sceneGraphService.matches(selectors, el)) return el;\n      el = el.parentElement as E;\n    } while (el !== null);\n    return null;\n  }\n\n  /**\n   * search in scene group, but should not include itself\n   */\n  find<E extends IElement = IElement>(filter: (node: E) => boolean): E | null {\n    let target: E | null = null;\n    this.forEach((object) => {\n      if (object !== this && filter(object as E)) {\n        target = object as E;\n        return false;\n      }\n      return true;\n    });\n    return target;\n  }\n  findAll<E extends IElement = IElement>(filter: (node: E) => boolean): E[] {\n    const objects: E[] = [];\n    this.forEach((object) => {\n      if (object !== this && filter(object as E)) {\n        objects.push(object as E);\n      }\n    });\n    return objects;\n  }\n\n  /**\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Element/after\n   */\n  after(...nodes: INode[]) {\n    if (this.parentNode) {\n      const index = this.parentNode.childNodes.indexOf(this);\n      nodes.forEach((node, i) =>\n        this.parentNode?.appendChild(node, index + i + 1),\n      );\n    }\n  }\n\n  /**\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Element/before\n   */\n  before(...nodes: INode[]) {\n    if (this.parentNode) {\n      const index = this.parentNode.childNodes.indexOf(this);\n      const [first, ...rest] = nodes;\n      this.parentNode.appendChild(first, index);\n      (first as IChildNode).after(...rest);\n    }\n  }\n\n  /**\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Element/replaceWith\n   */\n  replaceWith(...nodes: INode[]) {\n    this.after(...nodes);\n    this.remove();\n  }\n\n  /**\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Element/append\n   */\n  append(...nodes: INode[]) {\n    nodes.forEach((node) => this.appendChild(node));\n  }\n\n  /**\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Element/prepend\n   */\n  prepend(...nodes: INode[]) {\n    nodes.forEach((node, i) => this.appendChild(node, i));\n  }\n\n  /**\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Element/replaceChildren\n   */\n  replaceChildren(...nodes: INode[]) {\n    while (this.childNodes.length && this.firstChild) {\n      this.removeChild(this.firstChild);\n    }\n    this.append(...nodes);\n  }\n\n  /**\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Element/remove\n   */\n  remove(): this {\n    if (this.parentNode) {\n      return this.parentNode.removeChild(this);\n    }\n    return this;\n  }\n\n  destroy() {\n    const enableCancelEventPropagation =\n      this.ownerDocument?.defaultView?.getConfig().future\n        ?.experimentalCancelEventPropagation === true;\n\n    // fix https://github.com/antvis/G/issues/1813\n    this.destroyChildren();\n\n    // destroy itself before remove\n    this.dispatchEvent(\n      destroyEvent,\n      enableCancelEventPropagation,\n      enableCancelEventPropagation,\n    );\n\n    // remove from scenegraph first\n    this.remove();\n\n    // remove event listeners\n    this.emitter.removeAllListeners();\n\n    this.destroyed = true;\n  }\n\n  getGeometryBounds(): AABB {\n    return runtime.sceneGraphService.getGeometryBounds(this);\n  }\n\n  getRenderBounds(): AABB {\n    return runtime.sceneGraphService.getBounds(this, true);\n  }\n\n  /**\n   * get bounds in world space, account for children\n   */\n  getBounds(): AABB {\n    return runtime.sceneGraphService.getBounds(this);\n  }\n\n  /**\n   * get bounds in local space, account for children\n   */\n  getLocalBounds(): AABB {\n    return runtime.sceneGraphService.getLocalBounds(this);\n  }\n\n  /**\n   * account for context's bounds in client space,\n   * but not accounting for children\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect\n   */\n  getBoundingClientRect(): Rectangle {\n    return runtime.sceneGraphService.getBoundingClientRect(this);\n  }\n\n  /**\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Element/getClientRects\n   */\n  getClientRects() {\n    return [this.getBoundingClientRect()];\n  }\n\n  /**\n   * compatible with `style`\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/style\n   */\n  style: StyleProps & ICSSStyleDeclaration<StyleProps> = {} as StyleProps &\n    ICSSStyleDeclaration<StyleProps>;\n  computedStyle = {};\n\n  /**\n   * Renderers will use these used values.\n   */\n  parsedStyle: ParsedStyleProps = {\n    // opacity: '',\n    // fillOpacity: '',\n    // strokeOpacity: '',\n    // transformOrigin: '',\n    // visibility: '',\n    // pointerEvents: '',\n    // lineWidth: '',\n    // lineCap: '',\n    // lineJoin: '',\n    // increasedLineWidthForHitTesting: '',\n    // fontSize: '',\n    // fontFamily: '',\n    // fontStyle: '',\n    // fontWeight: '',\n    // fontVariant: '',\n    // textAlign: '',\n    // textBaseline: '',\n    // textTransform: '',\n  } as ParsedStyleProps;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/computedStyleMap\n   * eg. circle.computedStyleMap().get('fill');\n   */\n  computedStyleMap() {\n    return new Map(Object.entries(this.computedStyle));\n  }\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/attributes\n   */\n  readonly attributes: StyleProps = {} as StyleProps;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/getAttributeNames\n   */\n  getAttributeNames(): string[] {\n    return Object.keys(this.attributes);\n  }\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/getAttribute\n   */\n  getAttribute(name: keyof StyleProps) {\n    // @see https://github.com/antvis/G/issues/1267\n    if (typeof name === 'symbol') {\n      return undefined;\n    }\n\n    const value = this.attributes[name];\n    if (value === undefined) {\n      // if the given attribute does not exist, the value returned will either be null or \"\"\n      return value;\n    }\n\n    return value;\n  }\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/hasAttribute\n   */\n  hasAttribute(qualifiedName: string): boolean {\n    return this.getAttributeNames().includes(qualifiedName);\n  }\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/hasAttributes\n   */\n  hasAttributes(): boolean {\n    return !!this.getAttributeNames().length;\n  }\n\n  /**\n   * should use removeAttribute() instead of setting the attribute value to null either directly or using setAttribute(). Many attributes will not behave as expected if you set them to null.\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/removeAttribute\n   */\n  removeAttribute(attributeName: keyof StyleProps) {\n    this.setAttribute(attributeName, null);\n    delete this.attributes[attributeName];\n  }\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/setAttribute\n   */\n  setAttribute<Key extends keyof StyleProps>(\n    attributeName: Key,\n    value: StyleProps[Key],\n    force?: boolean,\n    memoize?: boolean,\n  ) {\n    this.attributes[attributeName] = value;\n  }\n\n  getAttributeNS(namespace: string, localName: string): string {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  }\n\n  getAttributeNode(qualifiedName: string): Attr {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  }\n  getAttributeNodeNS(namespace: string, localName: string): Attr {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  }\n\n  hasAttributeNS(namespace: string, localName: string): boolean {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  }\n\n  removeAttributeNS(namespace: string, localName: string): void {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  }\n  removeAttributeNode(attr: Attr): Attr {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  }\n\n  setAttributeNS(\n    namespace: string,\n    qualifiedName: string,\n    value: string,\n  ): void {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  }\n  setAttributeNode(attr: Attr): Attr {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  }\n  setAttributeNodeNS(attr: Attr): Attr {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  }\n\n  toggleAttribute(qualifiedName: string, force?: boolean): boolean {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  }\n}\n", "import { isNil, isObject, isUndefined } from '@antv/util';\nimport type { mat3, vec2 } from 'gl-matrix';\nimport { mat4, quat, vec3 } from 'gl-matrix';\nimport type { PropertyParseOptions } from '../css';\nimport type {\n  DisplayObjectConfig,\n  IAnimation,\n  ICSSStyleDeclaration,\n  IChildNode,\n  IElement,\n} from '../dom';\nimport { Element } from '../dom/Element';\nimport { MutationEvent } from '../dom/MutationEvent';\nimport { ElementEvent } from '../dom/interfaces';\nimport { runtime } from '../global-runtime';\nimport { Rectangle } from '../shapes';\nimport type { BaseStyleProps, ParsedBaseStyleProps } from '../types';\nimport { Shape } from '../types';\nimport {\n  createVec3,\n  decompose,\n  fromRotationTranslationScale,\n  getEuler,\n  rad2deg,\n} from '../utils';\nimport type { CustomElement } from './CustomElement';\n\nexport function isDisplayObject(value: any): value is DisplayObject {\n  return !!(value as DisplayObject)?.nodeName;\n}\n\nconst Proxy: ProxyConstructor = runtime.globalThis.Proxy\n  ? runtime.globalThis.Proxy\n  : function () {};\n\ntype ConstructorTypeOf<T> = new (...args: any[]) => T;\n\nexport const attrModifiedEvent: MutationEvent = new MutationEvent(\n  ElementEvent.ATTR_MODIFIED,\n  null,\n  null,\n  null,\n  null,\n  MutationEvent.MODIFICATION,\n  null,\n  null,\n);\n\nconst $vec3 = vec3.create();\nconst $quat = quat.create();\n\n/**\n * prototype chains: DisplayObject -> Element -> Node -> EventTarget\n *\n * mixins: Animatable, Transformable, Visible\n * @see https://github.com/tannerntannern/ts-mixer/blob/master/README.md#mixing-generic-classes\n *\n * Provide abilities in scene graph, such as:\n * * transform `translate/rotate/scale`\n * * add/remove child\n * * visibility and z-index\n *\n * Those abilities are implemented with those components: `Transform/Sortable/Visible`.\n *\n * Emit following events:\n * * init\n * * destroy\n * * attributeChanged\n */\nexport class DisplayObject<\n  StyleProps extends BaseStyleProps = any,\n  ParsedStyleProps extends ParsedBaseStyleProps = any,\n> extends Element<StyleProps, ParsedStyleProps> {\n  static PARSED_STYLE_LIST = new Set([\n    'class',\n    'className',\n    'clipPath',\n    'cursor',\n    'display',\n    'draggable',\n    'droppable',\n    'fill',\n    'fillOpacity',\n    'fillRule',\n    'filter',\n    'increasedLineWidthForHitTesting',\n    'lineCap',\n    'lineDash',\n    'lineDashOffset',\n    'lineJoin',\n    'lineWidth',\n    'miterLimit',\n    'hitArea',\n    'offsetDistance',\n    'offsetPath',\n    'offsetX',\n    'offsetY',\n    'opacity',\n    'pointerEvents',\n    'shadowColor',\n    'shadowType',\n    'shadowBlur',\n    'shadowOffsetX',\n    'shadowOffsetY',\n    'stroke',\n    'strokeOpacity',\n    'strokeWidth',\n    'strokeLinecap',\n    'strokeLineJoin',\n    'strokeDasharray',\n    'strokeDashoffset',\n    'transform',\n    'transformOrigin',\n    'textTransform',\n    'visibility',\n    'zIndex',\n  ]);\n\n  /**\n   * contains style props in constructor's params, eg. fill, stroke...\n   */\n  config: DisplayObjectConfig<StyleProps>;\n\n  isCustomElement = false;\n\n  isMutationObserved = false;\n\n  /**\n   * push to active animations after calling `animate()`\n   */\n  private activeAnimations: IAnimation[] = [];\n\n  constructor(config: DisplayObjectConfig<StyleProps>) {\n    super();\n\n    // assign name, id to config\n    // eg. group.get('name')\n    this.config = config;\n\n    // init scene graph node\n    this.id = config.id || '';\n    this.name = config.name || '';\n    if (config.className || config.class) {\n      this.className = config.className || config.class;\n    }\n    this.nodeName = config.type || Shape.GROUP;\n\n    if (config.initialParsedStyle) {\n      Object.assign(this.parsedStyle, config.initialParsedStyle);\n    }\n\n    // start to process attributes\n    this.initAttributes(config.style);\n\n    if (runtime.enableStyleSyntax) {\n      this.style = new Proxy<StyleProps & ICSSStyleDeclaration<StyleProps>>(\n        // @ts-ignore\n        {\n          // ...this.attributes,\n          setProperty: <Key extends keyof StyleProps>(\n            propertyName: Key,\n            value: StyleProps[Key],\n            // priority?: string,\n          ) => {\n            this.setAttribute(propertyName, value);\n          },\n          getPropertyValue: (propertyName: keyof StyleProps) => {\n            return this.getAttribute(propertyName);\n          },\n          removeProperty: (propertyName: keyof StyleProps) => {\n            this.removeAttribute(propertyName);\n          },\n          item: () => {\n            return '';\n          },\n        },\n        {\n          get: (target, name: string) => {\n            if (target[name] !== undefined) {\n              // if (name in target) {\n              return target[name];\n            }\n            return this.getAttribute(name as keyof StyleProps);\n          },\n          set: (_, prop, value) => {\n            this.setAttribute(prop as keyof StyleProps, value);\n            return true;\n          },\n        },\n      );\n    }\n  }\n\n  destroy() {\n    super.destroy();\n\n    // stop all active animations\n    this.getAnimations().forEach((animation) => {\n      animation.cancel();\n    });\n  }\n\n  cloneNode(\n    deep?: boolean,\n    customCloneFunc?: (name: string, attribute: any) => any,\n  ): this {\n    const clonedStyle = { ...this.attributes };\n    for (const attributeName in clonedStyle) {\n      const attribute = clonedStyle[attributeName];\n\n      // @see https://github.com/antvis/G/issues/1095\n      if (\n        isDisplayObject(attribute) &&\n        // share the same clipPath if possible\n        attributeName !== 'clipPath' &&\n        attributeName !== 'offsetPath' &&\n        attributeName !== 'textPath'\n      ) {\n        clonedStyle[attributeName] = attribute.cloneNode(deep);\n      }\n      // TODO: clone other type\n      if (customCloneFunc) {\n        clonedStyle[attributeName] = customCloneFunc(attributeName, attribute);\n      }\n    }\n\n    const cloned = new (this.constructor as ConstructorTypeOf<DisplayObject>)({\n      // copy id & name\n      // @see https://developer.mozilla.org/en-US/docs/Web/API/Node/cloneNode#notes\n      ...this.config,\n      style: clonedStyle,\n    });\n\n    // apply transform\n    cloned.setLocalTransform(this.getLocalTransform());\n\n    if (deep) {\n      this.children.forEach((child) => {\n        // skip marker\n        if (!child.style.isMarker) {\n          const clonedChild = child.cloneNode(deep);\n          cloned.appendChild(clonedChild);\n        }\n      });\n    }\n\n    return cloned as this;\n  }\n\n  private initAttributes(attributes: StyleProps = {} as StyleProps) {\n    const options = {\n      forceUpdateGeometry: true,\n    };\n\n    runtime.styleValueRegistry.processProperties(this, attributes, options);\n\n    // redraw at next frame\n    this.dirty();\n  }\n\n  setAttribute<Key extends keyof StyleProps>(\n    name: Key,\n    value: StyleProps[Key],\n    force = false,\n    memoize = true,\n  ) {\n    // ignore undefined value\n    if (isUndefined(value)) {\n      return;\n    }\n\n    if (force || value !== this.attributes[name]) {\n      this.internalSetAttribute(name, value, { memoize });\n      super.setAttribute(name, value);\n    }\n  }\n\n  /**\n   * called when attributes get changed or initialized\n   */\n  internalSetAttribute<Key extends keyof StyleProps>(\n    name: Key,\n    value: StyleProps[Key],\n    parseOptions: Partial<PropertyParseOptions> = {},\n  ) {\n    const oldValue = this.attributes[name];\n    const oldParsedValue = this.parsedStyle[name as string];\n\n    runtime.styleValueRegistry.processProperties(\n      this as unknown as DisplayObject,\n      {\n        [name]: value,\n      },\n      parseOptions,\n    );\n\n    // redraw at next frame\n    this.dirty();\n\n    // return;\n\n    const newParsedValue = this.parsedStyle[name as string];\n    if (this.isConnected) {\n      attrModifiedEvent.relatedNode = this as IElement;\n      attrModifiedEvent.prevValue = oldValue;\n      attrModifiedEvent.newValue = value;\n      attrModifiedEvent.attrName = name as string;\n      attrModifiedEvent.prevParsedValue = oldParsedValue;\n      attrModifiedEvent.newParsedValue = newParsedValue;\n      if (this.isMutationObserved) {\n        this.dispatchEvent(attrModifiedEvent);\n      } else {\n        const enableCancelEventPropagation =\n          this.ownerDocument.defaultView.getConfig().future\n            ?.experimentalCancelEventPropagation === true;\n\n        attrModifiedEvent.target = this;\n        this.ownerDocument.defaultView.dispatchEvent(\n          attrModifiedEvent,\n          true,\n          enableCancelEventPropagation,\n        );\n      }\n    }\n\n    if ((this.isCustomElement && this.isConnected) || !this.isCustomElement) {\n      (this as unknown as CustomElement<any>).attributeChangedCallback?.(\n        name,\n        oldValue,\n        value,\n        oldParsedValue,\n        newParsedValue,\n      );\n    }\n  }\n\n  // #region transformable\n  /**\n   * returns different values than getBoundingClientRect(), as the latter returns value relative to the viewport\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/SVGGraphicsElement/getBBox\n   *\n   * FIXME: It is worth noting that getBBox responds to original untransformed values of a drawn object.\n   * @see https://www.w3.org/Graphics/SVG/IG/resources/svgprimer.html#getBBox\n   */\n  getBBox(): DOMRect {\n    const aabb = this.getBounds();\n    const [left, top] = aabb.getMin();\n    const [right, bottom] = aabb.getMax();\n    return new Rectangle(left, top, right - left, bottom - top);\n  }\n\n  setOrigin(position: vec3 | vec2 | number, y = 0, z = 0) {\n    runtime.sceneGraphService.setOrigin(\n      this,\n      createVec3(position, y, z, false),\n    );\n    return this;\n  }\n\n  getOrigin(): vec3 {\n    return runtime.sceneGraphService.getOrigin(this);\n  }\n\n  /**\n   * set position in world space\n   */\n  setPosition(position: vec3 | vec2 | number, y = 0, z = 0) {\n    runtime.sceneGraphService.setPosition(\n      this,\n      createVec3(position, y, z, false),\n    );\n    return this;\n  }\n\n  /**\n   * set position in local space\n   */\n  setLocalPosition(position: vec3 | vec2 | number, y = 0, z = 0) {\n    runtime.sceneGraphService.setLocalPosition(\n      this,\n      createVec3(position, y, z, false),\n    );\n    return this;\n  }\n\n  /**\n   * translate in world space\n   */\n  translate(position: vec3 | vec2 | number, y = 0, z = 0) {\n    runtime.sceneGraphService.translate(\n      this,\n      createVec3(position, y, z, false),\n    );\n    return this;\n  }\n\n  /**\n   * translate in local space\n   */\n  translateLocal(position: vec3 | vec2 | number, y = 0, z = 0) {\n    runtime.sceneGraphService.translateLocal(\n      this,\n      createVec3(position, y, z, false),\n    );\n    return this;\n  }\n\n  getPosition(): vec3 {\n    return runtime.sceneGraphService.getPosition(this);\n  }\n\n  getLocalPosition(): vec3 {\n    return runtime.sceneGraphService.getLocalPosition(this);\n  }\n\n  /**\n   * compatible with G 3.0\n   *\n   * scaling in local space\n   * scale(10) = scale(10, 10, 10)\n   *\n   * we can't set scale in world space\n   */\n  scale(scaling: vec3 | vec2 | number, y?: number, z?: number) {\n    return this.scaleLocal(scaling, y, z);\n  }\n  scaleLocal(scaling: vec3 | vec2 | number, y?: number, z?: number) {\n    if (typeof scaling === 'number') {\n      y = y || scaling;\n      z = z || scaling;\n      scaling = createVec3(scaling, y, z, false);\n    }\n    runtime.sceneGraphService.scaleLocal(this, scaling);\n    return this;\n  }\n\n  /**\n   * set scaling in local space\n   */\n  setLocalScale(scaling: vec3 | vec2 | number, y?: number, z?: number) {\n    if (typeof scaling === 'number') {\n      y = y || scaling;\n      z = z || scaling;\n      scaling = createVec3(scaling, y, z, false);\n    }\n\n    runtime.sceneGraphService.setLocalScale(this, scaling);\n    return this;\n  }\n\n  /**\n   * get scaling in local space\n   */\n  getLocalScale(): vec3 {\n    return runtime.sceneGraphService.getLocalScale(this);\n  }\n\n  /**\n   * get scaling in world space\n   */\n  getScale(): vec3 {\n    return runtime.sceneGraphService.getScale(this);\n  }\n\n  /**\n   * only return degrees of Z axis in world space\n   */\n  getEulerAngles() {\n    const [, , ez] = getEuler(\n      $vec3,\n      runtime.sceneGraphService.getWorldTransform(this),\n    );\n    return rad2deg(ez);\n  }\n\n  /**\n   * only return degrees of Z axis in local space\n   */\n  getLocalEulerAngles() {\n    const [, , ez] = getEuler(\n      $vec3,\n      runtime.sceneGraphService.getLocalRotation(this),\n    );\n    return rad2deg(ez);\n  }\n\n  /**\n   * set euler angles(degrees) in world space\n   */\n  setEulerAngles(z: number) {\n    runtime.sceneGraphService.setEulerAngles(this, 0, 0, z);\n    return this;\n  }\n\n  /**\n   * set euler angles(degrees) in local space\n   */\n  setLocalEulerAngles(z: number) {\n    runtime.sceneGraphService.setLocalEulerAngles(this, 0, 0, z);\n    return this;\n  }\n\n  rotateLocal(x: number, y?: number, z?: number) {\n    if (isNil(y) && isNil(z)) {\n      runtime.sceneGraphService.rotateLocal(this, 0, 0, x);\n    } else {\n      runtime.sceneGraphService.rotateLocal(this, x, y, z);\n    }\n\n    return this;\n  }\n\n  rotate(x: number, y?: number, z?: number) {\n    if (isNil(y) && isNil(z)) {\n      runtime.sceneGraphService.rotate(this, 0, 0, x);\n    } else {\n      runtime.sceneGraphService.rotate(this, x, y, z);\n    }\n\n    return this;\n  }\n\n  setRotation(rotation: quat | number, y?: number, z?: number, w?: number) {\n    runtime.sceneGraphService.setRotation(this, rotation, y, z, w);\n    return this;\n  }\n\n  setLocalRotation(\n    rotation: quat | number,\n    y?: number,\n    z?: number,\n    w?: number,\n  ) {\n    runtime.sceneGraphService.setLocalRotation(this, rotation, y, z, w);\n    return this;\n  }\n\n  setLocalSkew(skew: vec2 | number, y?: number) {\n    runtime.sceneGraphService.setLocalSkew(this, skew, y);\n    return this;\n  }\n\n  getRotation(): quat {\n    return runtime.sceneGraphService.getRotation(this);\n  }\n\n  getLocalRotation(): quat {\n    return runtime.sceneGraphService.getLocalRotation(this);\n  }\n\n  getLocalSkew(): vec2 {\n    return runtime.sceneGraphService.getLocalSkew(this);\n  }\n\n  getLocalTransform(): mat4 {\n    return runtime.sceneGraphService.getLocalTransform(this);\n  }\n\n  getWorldTransform(): mat4 {\n    return runtime.sceneGraphService.getWorldTransform(this);\n  }\n\n  setLocalTransform(transform: mat4) {\n    runtime.sceneGraphService.setLocalTransform(this, transform);\n    return this;\n  }\n\n  resetLocalTransform(): void {\n    runtime.sceneGraphService.resetLocalTransform(this);\n  }\n  // #endregion transformable\n\n  // #region animatable\n  /**\n   * returns an array of all Animation objects affecting this element\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Element/getAnimations\n   */\n  getAnimations(): IAnimation[] {\n    return this.activeAnimations;\n  }\n  /**\n   * create an animation with WAAPI\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Element/animate\n   */\n  animate(\n    keyframes: Keyframe[] | PropertyIndexedKeyframes | null,\n    options?: number | KeyframeAnimationOptions,\n  ): IAnimation | null {\n    const timeline = this.ownerDocument?.timeline;\n\n    if (timeline) {\n      return timeline.play(this as IElement, keyframes, options);\n    }\n    return null;\n  }\n  // #endregion animatable\n\n  // #region visible\n  /**\n   * shortcut for Used value of `visibility`\n   */\n  isVisible() {\n    return this.parsedStyle?.visibility !== 'hidden';\n  }\n\n  get interactive() {\n    return this.isInteractive();\n  }\n  set interactive(b: boolean) {\n    this.style.pointerEvents = b ? 'auto' : 'none';\n  }\n\n  isInteractive() {\n    return this.parsedStyle?.pointerEvents !== 'none';\n  }\n\n  isCulled() {\n    return !!(this.cullable && this.cullable.enable && !this.cullable.visible);\n  }\n\n  /**\n   * bring to front in current group\n   */\n  toFront() {\n    if (this.parentNode) {\n      this.style.zIndex =\n        Math.max(\n          ...this.parentNode.children.map((child) =>\n            Number(child.style.zIndex),\n          ),\n        ) + 1;\n    }\n    return this;\n  }\n\n  /**\n   * send to back in current group\n   */\n  toBack() {\n    if (this.parentNode) {\n      this.style.zIndex =\n        Math.min(\n          ...this.parentNode.children.map((child) =>\n            Number(child.style.zIndex),\n          ),\n        ) - 1;\n    }\n    return this;\n  }\n  // #endregion visible\n\n  // #region deprecated\n\n  /**\n   * compatible with G 3.0\n   * @alias object.config\n   * @deprecated\n   */\n  getConfig() {\n    return this.config;\n  }\n\n  /**\n   * @alias style\n   * @example\n   * circle.style.r = 10;\n   * const r = circle.style;\n   * @deprecated\n   */\n  attr(): StyleProps;\n  attr(name: Partial<StyleProps>): DisplayObject<StyleProps>;\n  attr<Key extends keyof StyleProps>(name: Key): StyleProps[Key];\n  attr<Key extends keyof StyleProps>(\n    name: Key,\n    value: StyleProps[Key],\n  ): DisplayObject<StyleProps>;\n  attr(...args: any): any {\n    const [name, value] = args;\n    if (!name) {\n      return this.attributes;\n    }\n    if (isObject(name)) {\n      Object.keys(name).forEach((key) => {\n        this.setAttribute(\n          key as keyof StyleProps,\n          (name as unknown as StyleProps)[key as keyof StyleProps],\n        );\n      });\n      return this;\n    }\n    if (args.length === 2) {\n      this.setAttribute(name, value);\n      return this;\n    }\n    return this.attributes[name as keyof StyleProps];\n  }\n\n  /**\n   * return 3x3 matrix in world space\n   * @deprecated\n   */\n  getMatrix(transformMat4?: mat4): mat3 {\n    const transform = transformMat4 || this.getWorldTransform();\n    const [tx, ty] = mat4.getTranslation($vec3, transform);\n    const [sx, sy] = mat4.getScaling($vec3, transform);\n    const rotation = mat4.getRotation($quat, transform);\n    const [eux, , euz] = getEuler($vec3, rotation);\n    // gimbal lock at 90 degrees\n    return fromRotationTranslationScale(eux || euz, tx, ty, sx, sy);\n  }\n\n  /**\n   * return 3x3 matrix in local space\n   * @deprecated\n   */\n  getLocalMatrix(): mat3 {\n    return this.getMatrix(this.getLocalTransform());\n  }\n\n  /**\n   * set 3x3 matrix in world space\n   * @deprecated\n   */\n  setMatrix(mat: mat3) {\n    const [tx, ty, scalingX, scalingY, angle] = decompose(mat);\n    this.setEulerAngles(angle)\n      .setPosition(tx, ty)\n      .setLocalScale(scalingX, scalingY);\n  }\n\n  /**\n   * set 3x3 matrix in local space\n   * @deprecated\n   */\n  setLocalMatrix(mat: mat3) {\n    const [tx, ty, scalingX, scalingY, angle] = decompose(mat);\n    this.setLocalEulerAngles(angle)\n      .setLocalPosition(tx, ty)\n      .setLocalScale(scalingX, scalingY);\n  }\n\n  /**\n   * Use `visibility: visible` instead.\n   * @deprecated\n   */\n  show() {\n    this.forEach((object: DisplayObject) => {\n      object.style.visibility = 'visible';\n    });\n  }\n\n  /**\n   * Use `visibility: hidden` instead.\n   * @deprecated\n   */\n  hide() {\n    this.forEach((object: DisplayObject) => {\n      object.style.visibility = 'hidden';\n    });\n  }\n\n  /**\n   * Use `childElementCount` instead.\n   * @deprecated\n   */\n  getCount() {\n    return this.childElementCount;\n  }\n\n  /**\n   * Use `parentElement` instead.\n   * @deprecated\n   */\n  getParent(): DisplayObject | null {\n    return this.parentElement as DisplayObject;\n  }\n\n  /**\n   * Use `children` instead.\n   * @deprecated\n   */\n  getChildren(): DisplayObject[] {\n    return this.children as DisplayObject[];\n  }\n\n  /**\n   * Use `firstElementChild` instead.\n   * @deprecated\n   */\n  getFirst(): DisplayObject | null {\n    return this.firstElementChild as DisplayObject;\n  }\n\n  /**\n   * Use `lastElementChild` instead.\n   * @deprecated\n   */\n  getLast(): DisplayObject | null {\n    return this.lastElementChild as DisplayObject;\n  }\n\n  /**\n   * Use `this.children[index]` instead.\n   * @deprecated\n   */\n  getChildByIndex(index: number): DisplayObject | null {\n    return (this.children[index] as DisplayObject) || null;\n  }\n\n  /**\n   * Use `appendChild` instead.\n   * @deprecated\n   */\n  add<T extends IChildNode>(child: T, index?: number): T {\n    return this.appendChild(child, index);\n  }\n\n  /**\n   * @deprecated\n   */\n  set<\n    StyleProps extends BaseStyleProps,\n    Key extends keyof DisplayObjectConfig<StyleProps>,\n  >(name: Key, value: DisplayObjectConfig<StyleProps>[Key]) {\n    // @ts-ignore\n    this.config[name] = value;\n  }\n\n  /**\n   * @deprecated\n   */\n  get<StyleProps extends BaseStyleProps>(\n    name: keyof DisplayObjectConfig<StyleProps>,\n  ) {\n    return this.config[name];\n  }\n\n  /**\n   * Use `setPosition` instead.\n   * @deprecated\n   */\n  moveTo(position: vec3 | vec2 | number, y = 0, z = 0) {\n    (this as unknown as DisplayObject).setPosition(position, y, z);\n    return this;\n  }\n\n  /**\n   * Use `setPosition` instead.\n   * @deprecated\n   */\n  move(position: vec3 | vec2 | number, y = 0, z = 0) {\n    (this as unknown as DisplayObject).setPosition(position, y, z);\n    return this;\n  }\n\n  /**\n   * Use `this.style.zIndex` instead.\n   * @deprecated\n   */\n  setZIndex(zIndex: number) {\n    this.style.zIndex = zIndex;\n    return this;\n  }\n\n  // #endregion deprecated\n}\n", "import type { DisplayObjectConfig } from '../dom/interfaces';\nimport type { BaseStyleProps, ParsedBaseStyleProps } from '../types';\nimport { Shape } from '../types';\nimport { DisplayObject } from './DisplayObject';\n\nexport interface CircleStyleProps extends BaseStyleProps {\n  /**\n   * X coordinate of the center of the circle.\n   */\n  cx?: number | string | null;\n  /**\n   * Y coordinate of the center of the circle.\n   */\n  cy?: number | string | null;\n  /**\n   * Z coordinate of the center of the circle.\n   */\n  cz?: number | string | null;\n  /**\n   * Radius of the circle.\n   */\n  r: number | string | null;\n  /**\n   * Whether the circle is billboard.\n   */\n  isBillboard?: boolean;\n  /**\n   * Whether the circle is size attenuation.\n   */\n  isSizeAttenuation?: boolean;\n}\nexport interface ParsedCircleStyleProps extends ParsedBaseStyleProps {\n  cx: number;\n  cy: number;\n  cz?: number;\n  r: number;\n  isBillboard?: boolean;\n  isSizeAttenuation?: boolean;\n}\nexport class Circle extends DisplayObject<\n  CircleStyleProps,\n  ParsedCircleStyleProps\n> {\n  static PARSED_STYLE_LIST: Set<string> = new Set([\n    ...DisplayObject.PARSED_STYLE_LIST,\n    'cx',\n    'cy',\n    'cz',\n    'r',\n    'isBillboard',\n    'isSizeAttenuation',\n  ]);\n\n  constructor(options: DisplayObjectConfig<CircleStyleProps> = {}) {\n    super({\n      type: Shape.CIRCLE,\n      ...options,\n    });\n  }\n}\n", "import type { DisplayObjectConfig } from '../dom';\nimport type { BaseStyleProps } from '../types';\nimport { DisplayObject } from './DisplayObject';\n\nexport interface BaseCustomElementStyleProps extends BaseStyleProps {}\n\n/**\n * shadow root\n * @see https://yuque.antfin-inc.com/antv/czqvg5/pgqipg\n */\nexport abstract class CustomElement<\n  CustomElementStyleProps,\n> extends DisplayObject<CustomElementStyleProps & BaseCustomElementStyleProps> {\n  static PARSED_STYLE_LIST: Set<string> = new Set([\n    'class',\n    'className',\n    'clipPath',\n    'cursor',\n    'draggable',\n    'droppable',\n    'opacity',\n    'pointerEvents',\n    'transform',\n    'transformOrigin',\n    'zIndex',\n    'visibility',\n  ]);\n\n  isCustomElement = true;\n\n  // private shadowNodes: DisplayObject[] = [];\n\n  constructor({\n    style,\n    ...rest\n  }: DisplayObjectConfig<CustomElementStyleProps> = {}) {\n    super({\n      style,\n      ...rest,\n    });\n  }\n\n  /**\n   * fired after element insert into DOM tree\n   */\n  connectedCallback?(): void;\n\n  /**\n   * fired before element removed from DOM tree\n   */\n  disconnectedCallback?(): void;\n\n  attributeChangedCallback?<Key extends keyof CustomElementStyleProps>(\n    name: Key,\n    oldValue: CustomElementStyleProps[Key],\n    newValue: CustomElementStyleProps[Key],\n    oldParsedValue?: any,\n    newParsedValue?: any,\n  ): void;\n}\n", "import type { DisplayObjectConfig } from '../dom/interfaces';\nimport type { BaseStyleProps, ParsedBaseStyleProps } from '../types';\nimport { Shape } from '../types';\nimport { DisplayObject } from './DisplayObject';\n\nexport interface EllipseStyleProps extends BaseStyleProps {\n  cx?: number | string;\n  cy?: number | string;\n  cz?: number | string;\n  rx: number | string;\n  ry: number | string;\n  isBillboard?: boolean;\n  isSizeAttenuation?: boolean;\n}\nexport interface ParsedEllipseStyleProps extends ParsedBaseStyleProps {\n  cx: number;\n  cy: number;\n  cz?: number;\n  rx: number;\n  ry: number;\n  isBillboard?: boolean;\n  isSizeAttenuation?: boolean;\n}\nexport class Ellipse extends DisplayObject<\n  EllipseStyleProps,\n  ParsedEllipseStyleProps\n> {\n  static PARSED_STYLE_LIST: Set<string> = new Set([\n    ...DisplayObject.PARSED_STYLE_LIST,\n    'cx',\n    'cy',\n    'cz',\n    'rx',\n    'ry',\n    'isBillboard',\n    'isSizeAttenuation',\n  ]);\n\n  constructor(options: DisplayObjectConfig<EllipseStyleProps> = {}) {\n    super({\n      type: Shape.ELLIPSE,\n      ...options,\n    });\n  }\n}\n", "import { Shape } from '../types';\nimport { DisplayObject } from './DisplayObject';\n\n/**\n * \n *\n *   Fragment  Fragment \n *\n *  Fragment  Canvas \n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/DocumentFragment\n */\nexport class Fragment extends DisplayObject {\n  static PARSED_STYLE_LIST = new Set<string>(['class', 'className']);\n\n  constructor() {\n    super({ type: Shape.FRAGMENT });\n  }\n}\n", "import type { CSSUnitValue } from '../css';\nimport type { DisplayObjectConfig } from '../dom';\nimport type { BaseStyleProps, ParsedBaseStyleProps } from '../types';\nimport { Shape } from '../types';\nimport { DisplayObject } from './DisplayObject';\n\nexport interface GroupStyleProps extends BaseStyleProps {\n  width?: number | string;\n  height?: number | string;\n}\n\nexport interface ParsedGroupStyleProps extends ParsedBaseStyleProps {\n  width?: CSSUnitValue;\n  height?: CSSUnitValue;\n}\n\n/**\n * its attributes are inherited by its children.\n * @see https://developer.mozilla.org/zh-CN/docs/Web/SVG/Element/g\n * \n * @example\n * <g fill=\"white\" stroke=\"green\" stroke-width=\"5\">\n    <circle cx=\"40\" cy=\"40\" r=\"25\" />\n    <circle cx=\"60\" cy=\"60\" r=\"25\" />\n  </g>\n */\nexport class Group extends DisplayObject {\n  static PARSED_STYLE_LIST: Set<string> = new Set([\n    'class',\n    'className',\n    'clipPath',\n    'cursor',\n    'draggable',\n    'droppable',\n    'opacity',\n    'pointerEvents',\n    'transform',\n    'transformOrigin',\n    'zIndex',\n    'visibility',\n  ]);\n\n  constructor(options: DisplayObjectConfig<GroupStyleProps> = {}) {\n    super({\n      type: Shape.GROUP,\n      ...options,\n    });\n  }\n}\n", "import { mat4 } from 'gl-matrix';\nimport type { DisplayObjectConfig } from '../dom';\nimport { AABB } from '../shapes';\nimport type { BaseStyleProps, ParsedBaseStyleProps } from '../types';\nimport { Shape } from '../types';\nimport { DisplayObject } from './DisplayObject';\n\nexport interface HTMLStyleProps extends BaseStyleProps {\n  x?: number | string;\n  y?: number | string;\n  innerHTML: string | HTMLElement;\n  width?: number | string;\n  height?: number | string;\n}\n\nexport interface ParsedHTMLStyleProps extends ParsedBaseStyleProps {\n  x: number;\n  y: number;\n  $el: HTMLElement;\n  innerHTML: string | HTMLElement;\n  width: number;\n  height: number;\n}\n\n/**\n * HTML container\n * @see https://github.com/pmndrs/drei#html\n */\nexport class HTML extends DisplayObject<HTMLStyleProps, ParsedHTMLStyleProps> {\n  static PARSED_STYLE_LIST: Set<string> = new Set([\n    ...DisplayObject.PARSED_STYLE_LIST,\n    'x',\n    'y',\n    '$el',\n    'innerHTML',\n    'width',\n    'height',\n  ]);\n\n  constructor({ style, ...rest }: DisplayObjectConfig<HTMLStyleProps> = {}) {\n    super({\n      type: Shape.HTML,\n      style,\n      ...rest,\n    });\n\n    this.cullable.enable = false;\n  }\n\n  /**\n   * return wrapper HTMLElement\n   * * <div> in g-webgl/canvas\n   * * <foreignObject> in g-svg\n   */\n  getDomElement() {\n    return this.parsedStyle.$el;\n  }\n\n  /**\n   * override with $el.getBoundingClientRect\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Element/getBoundingClientRect\n   *\n   * ! The calculation logic of the html element should be consistent with that of the canvas element\n   */\n  // getBoundingClientRect(): Rectangle {\n  //   if (this.parsedStyle.$el) {\n  //     return this.parsedStyle.$el.getBoundingClientRect();\n  //   } else {\n  //     const { x, y, width, height } = this.parsedStyle;\n  //     return new Rectangle(x, y, width, height);\n  //   }\n  // }\n\n  getClientRects() {\n    return [this.getBoundingClientRect()];\n  }\n\n  // getBounds() {\n  //   const clientRect = this.getBoundingClientRect();\n  //   // calc context's offset\n  //   // @ts-ignore\n  //   const canvasRect = this.ownerDocument?.defaultView\n  //     ?.getContextService()\n  //     .getBoundingClientRect();\n\n  //   const aabb = new AABB();\n  //   const minX = clientRect.left - (canvasRect?.left || 0);\n  //   const minY = clientRect.top - (canvasRect?.top || 0);\n  //   aabb.setMinMax(\n  //     [minX, minY, 0],\n  //     [minX + clientRect.width, minY + clientRect.height, 0],\n  //   );\n  //   return aabb;\n  // }\n\n  getLocalBounds() {\n    if (this.parentNode) {\n      const parentInvert = mat4.invert(\n        mat4.create(),\n        (this.parentNode as DisplayObject).getWorldTransform(),\n      );\n      const bounds = this.getBounds();\n\n      if (!AABB.isEmpty(bounds)) {\n        const localBounds = new AABB();\n        localBounds.setFromTransformedAABB(bounds, parentInvert);\n        return localBounds;\n      }\n    }\n\n    return this.getBounds();\n  }\n}\n", "import type { DisplayObjectConfig } from '../dom';\nimport type { BaseStyleProps, ParsedBaseStyleProps } from '../types';\nimport { Shape } from '../types';\nimport { DisplayObject } from './DisplayObject';\n\nexport interface ImageStyleProps extends BaseStyleProps {\n  x?: number | string;\n  y?: number | string;\n  z?: number;\n  src?: string | HTMLImageElement;\n  width?: number | string;\n  height?: number | string;\n  /**\n   * Whether the circle is billboard.\n   */\n  isBillboard?: boolean;\n  /**\n   * When isBillboard enabled, whether the circle is size attenuation.\n   */\n  isSizeAttenuation?: boolean;\n  /**\n   * When isBillboard enabled, the rotation.\n   */\n  billboardRotation?: number;\n  /**\n   * Whether to keep the aspect ratio of the image, under such circumstances, either the width or height can be omitted.\n   */\n  keepAspectRatio?: boolean;\n}\nexport interface ParsedImageStyleProps extends ParsedBaseStyleProps {\n  x: number;\n  y: number;\n  z?: number;\n  src?: string | HTMLImageElement;\n  width?: number;\n  height?: number;\n  isBillboard?: boolean;\n  billboardRotation?: number;\n  isSizeAttenuation?: boolean;\n  keepAspectRatio?: boolean;\n}\nexport class Image extends DisplayObject<\n  ImageStyleProps,\n  ParsedImageStyleProps\n> {\n  static PARSED_STYLE_LIST: Set<string> = new Set([\n    ...DisplayObject.PARSED_STYLE_LIST,\n    'x',\n    'y',\n    'z',\n    'src',\n    'width',\n    'height',\n    'isBillboard',\n    'billboardRotation',\n    'isSizeAttenuation',\n    'keepAspectRatio',\n  ]);\n\n  constructor(options: DisplayObjectConfig<ImageStyleProps> = {}) {\n    super({\n      type: Shape.IMAGE,\n      ...options,\n    });\n  }\n}\n", "import { lineLength, linePointAt } from '@antv/g-math';\nimport { vec3 } from 'gl-matrix';\nimport type { DisplayObjectConfig } from '../dom';\nimport { Point } from '../shapes';\nimport type { BaseStyleProps, ParsedBaseStyleProps } from '../types';\nimport { Shape } from '../types';\nimport { DisplayObject, isDisplayObject } from './DisplayObject';\n\nexport interface LineStyleProps extends BaseStyleProps {\n  /**\n   * X coordinate of the start of the line.\n   */\n  x1: number;\n  /**\n   * Y coordinate of the start of the line.\n   */\n  y1: number;\n  /**\n   * X coordinate of the end of the line.\n   */\n  x2: number;\n  /**\n   * Y coordinate of the end of the line.\n   */\n  y2: number;\n  /**\n   * Z coordinate of the start of the line.\n   */\n  z1?: number;\n  /**\n   * Z coordinate of the end of the line.\n   */\n  z2?: number;\n  /**\n   * Whether the line is billboard.\n   */\n  isBillboard?: boolean;\n  /**\n   * Whether the line is size attenuation.\n   */\n  isSizeAttenuation?: boolean;\n  /**\n   * marker will be positioned at x1/y1\n   */\n  markerStart?: DisplayObject | null;\n\n  /**\n   * marker will be positioned at x2/y2\n   */\n  markerEnd?: DisplayObject | null;\n\n  /**\n   * offset relative to original position\n   */\n  markerStartOffset?: number;\n\n  /**\n   * offset relative to original position\n   */\n  markerEndOffset?: number;\n}\nexport interface ParsedLineStyleProps extends ParsedBaseStyleProps {\n  x1: number;\n  y1: number;\n  x2: number;\n  y2: number;\n  z1?: number;\n  z2?: number;\n  isBillboard?: boolean;\n  isSizeAttenuation?: boolean;\n  markerStart?: DisplayObject | null;\n  markerEnd?: DisplayObject | null;\n  markerStartOffset?: number;\n  markerEndOffset?: number;\n}\n\n/**\n * Create a line connecting two points.\n * @see https://developer.mozilla.org/en-US/docs/Web/SVG/Element/line\n *\n * Also support for using marker.\n */\nexport class Line extends DisplayObject<LineStyleProps, ParsedLineStyleProps> {\n  static PARSED_STYLE_LIST: Set<string> = new Set([\n    ...DisplayObject.PARSED_STYLE_LIST,\n    'x1',\n    'y1',\n    'x2',\n    'y2',\n    'z1',\n    'z2',\n    'isBillboard',\n    'isSizeAttenuation',\n    'markerStart',\n    'markerEnd',\n    'markerStartOffset',\n    'markerEndOffset',\n  ]);\n\n  private markerStartAngle = 0;\n  private markerEndAngle = 0;\n\n  constructor({ style, ...rest }: DisplayObjectConfig<LineStyleProps> = {}) {\n    super({\n      type: Shape.LINE,\n      style: {\n        x1: 0,\n        y1: 0,\n        x2: 0,\n        y2: 0,\n        z1: 0,\n        z2: 0,\n        ...style,\n      },\n      ...rest,\n    });\n\n    const { markerStart, markerEnd } = this.parsedStyle;\n\n    if (markerStart && isDisplayObject(markerStart)) {\n      this.markerStartAngle = markerStart.getLocalEulerAngles();\n      this.appendChild(markerStart);\n    }\n\n    if (markerEnd && isDisplayObject(markerEnd)) {\n      this.markerEndAngle = markerEnd.getLocalEulerAngles();\n      this.appendChild(markerEnd);\n    }\n\n    this.transformMarker(true);\n    this.transformMarker(false);\n  }\n\n  attributeChangedCallback<Key extends keyof LineStyleProps>(\n    attrName: Key,\n    oldValue: LineStyleProps[Key],\n    newValue: LineStyleProps[Key],\n    prevParsedValue: ParsedLineStyleProps[Key],\n    newParsedValue: ParsedLineStyleProps[Key],\n  ) {\n    if (\n      attrName === 'x1' ||\n      attrName === 'y1' ||\n      attrName === 'x2' ||\n      attrName === 'y2' ||\n      attrName === 'markerStartOffset' ||\n      attrName === 'markerEndOffset'\n    ) {\n      this.transformMarker(true);\n      this.transformMarker(false);\n    } else if (attrName === 'markerStart') {\n      if (prevParsedValue && isDisplayObject(prevParsedValue)) {\n        this.markerStartAngle = 0;\n        prevParsedValue.remove();\n      }\n\n      // CSSKeyword 'unset'\n      if (newParsedValue && isDisplayObject(newParsedValue)) {\n        this.markerStartAngle = newParsedValue.getLocalEulerAngles();\n        this.appendChild(newParsedValue);\n        this.transformMarker(true);\n      }\n    } else if (attrName === 'markerEnd') {\n      if (prevParsedValue && isDisplayObject(prevParsedValue)) {\n        this.markerEndAngle = 0;\n        prevParsedValue.remove();\n      }\n\n      if (newParsedValue && isDisplayObject(newParsedValue)) {\n        this.markerEndAngle = newParsedValue.getLocalEulerAngles();\n        this.appendChild(newParsedValue);\n        this.transformMarker(false);\n      }\n    }\n  }\n\n  private transformMarker(isStart: boolean) {\n    const {\n      markerStart,\n      markerEnd,\n      markerStartOffset,\n      markerEndOffset,\n      x1,\n      x2,\n      y1,\n      y2,\n    } = this.parsedStyle;\n    const marker = isStart ? markerStart : markerEnd;\n\n    if (!marker || !isDisplayObject(marker)) {\n      return;\n    }\n\n    let rad = 0;\n    let x: number;\n    let y: number;\n    let ox: number;\n    let oy: number;\n    let offset: number;\n    let originalAngle: number;\n\n    if (isStart) {\n      ox = x1;\n      oy = y1;\n      x = x2 - x1;\n      y = y2 - y1;\n      offset = markerStartOffset || 0;\n      originalAngle = this.markerStartAngle;\n    } else {\n      ox = x2;\n      oy = y2;\n      x = x1 - x2;\n      y = y1 - y2;\n      offset = markerEndOffset || 0;\n      originalAngle = this.markerEndAngle;\n    }\n    rad = Math.atan2(y, x);\n\n    // account for markerOffset\n    marker.setLocalEulerAngles((rad * 180) / Math.PI + originalAngle);\n    marker.setLocalPosition(\n      ox + Math.cos(rad) * offset,\n      oy + Math.sin(rad) * offset,\n    );\n  }\n\n  getPoint(ratio: number, inWorldSpace = false): Point {\n    // TODO: account for z1/z2 in 3D line\n    const { x1, y1, x2, y2 } = this.parsedStyle;\n    const { x, y } = linePointAt(x1, y1, x2, y2, ratio);\n\n    const transformed = vec3.transformMat4(\n      vec3.create(),\n      vec3.fromValues(x, y, 0),\n      inWorldSpace ? this.getWorldTransform() : this.getLocalTransform(),\n    );\n\n    // apply local transformation\n    return new Point(transformed[0], transformed[1]);\n  }\n\n  getPointAtLength(distance: number, inWorldSpace = false): Point {\n    return this.getPoint(distance / this.getTotalLength(), inWorldSpace);\n  }\n\n  getTotalLength() {\n    // TODO: account for z1/z2 in 3D line\n    const { x1, y1, x2, y2 } = this.parsedStyle;\n    return lineLength(x1, y1, x2, y2);\n  }\n}\n", "import type {\n  AbsoluteArray,\n  AbsoluteSegment,\n  CurveArray,\n  PathArray,\n} from '@antv/util';\nimport { getPointAtLength } from '@antv/util';\nimport { vec3 } from 'gl-matrix';\nimport type { DisplayObjectConfig } from '../dom';\nimport { Point } from '../shapes';\nimport { Rectangle } from '../shapes/Rectangle';\nimport type { BaseStyleProps, ParsedBaseStyleProps } from '../types';\nimport { Shape } from '../types';\nimport { getOrCalculatePathTotalLength } from '../utils';\nimport { DisplayObject, isDisplayObject } from './DisplayObject';\nimport { EMPTY_PARSED_PATH } from './constants';\n\nexport interface PathStyleProps extends BaseStyleProps {\n  d?: string | PathArray;\n  /**\n   * marker will be positioned at the first point\n   */\n  markerStart?: DisplayObject | null;\n\n  /**\n   * marker will be positioned at the last point\n   */\n  markerEnd?: DisplayObject | null;\n\n  markerMid?: DisplayObject | null;\n\n  /**\n   * offset relative to original position\n   */\n  markerStartOffset?: number;\n\n  /**\n   * offset relative to original position\n   */\n  markerEndOffset?: number;\n\n  /**\n   * Whether the circle is billboard.\n   */\n  isBillboard?: boolean;\n  /**\n   * Whether the circle is size attenuation.\n   */\n  isSizeAttenuation?: boolean;\n}\n\nexport interface PathSegmentBBox {\n  x: number;\n  y: number;\n  width: number;\n  height: number;\n}\nexport interface PathSegment {\n  command: 'M' | 'L' | 'V' | 'H' | 'C' | 'S' | 'Q' | 'T' | 'A' | 'Z';\n  currentPoint: [number, number];\n  prePoint: [number, number];\n  nextPoint: [number, number];\n  startTangent: [number, number];\n  endTangent: [number, number];\n  params: AbsoluteSegment;\n  arcParams: PathArcParams;\n  /**\n   * Used for hit test.\n   */\n  box: PathSegmentBBox;\n  /**\n   * Convert A to C.\n   */\n  cubicParams: [number, number, number, number, number, number];\n}\n\nexport interface PathArcParams {\n  cx: number;\n  cy: number;\n  //  0 \n  rx: number;\n  ry: number;\n  startAngle: number;\n  endAngle: number;\n  xRotation: number;\n  arcFlag: number;\n  sweepFlag: number;\n}\nexport interface ParsedPathStyleProps extends ParsedBaseStyleProps {\n  d: {\n    absolutePath: AbsoluteArray;\n    hasArc: boolean;\n    segments: PathSegment[];\n    polygons: [number, number][][];\n    polylines: [number, number][][];\n    curve: CurveArray;\n    totalLength: number;\n    rect: Rectangle;\n  };\n  markerStart?: DisplayObject | null;\n  markerMid?: DisplayObject | null;\n  markerEnd?: DisplayObject | null;\n  markerStartOffset?: number;\n  markerEndOffset?: number;\n  isBillboard?: boolean;\n  isSizeAttenuation?: boolean;\n}\nexport class Path extends DisplayObject<PathStyleProps, ParsedPathStyleProps> {\n  static PARSED_STYLE_LIST: Set<string> = new Set([\n    ...DisplayObject.PARSED_STYLE_LIST,\n    'd',\n    'markerStart',\n    'markerMid',\n    'markerEnd',\n    'markerStartOffset',\n    'markerEndOffset',\n    'isBillboard',\n    'isSizeAttenuation',\n  ]);\n\n  private markerStartAngle = 0;\n  private markerEndAngle = 0;\n\n  /**\n   * markers placed at the mid\n   */\n  private markerMidList: DisplayObject[] = [];\n\n  constructor({ style, ...rest }: DisplayObjectConfig<PathStyleProps> = {}) {\n    super({\n      type: Shape.PATH,\n      style,\n      initialParsedStyle: {\n        miterLimit: 4,\n        d: {\n          ...EMPTY_PARSED_PATH,\n        },\n      },\n      ...rest,\n    });\n\n    const { markerStart, markerEnd, markerMid } = this.parsedStyle;\n\n    if (markerStart && isDisplayObject(markerStart)) {\n      this.markerStartAngle = markerStart.getLocalEulerAngles();\n      this.appendChild(markerStart);\n    }\n\n    if (markerMid && isDisplayObject(markerMid)) {\n      this.placeMarkerMid(markerMid);\n    }\n\n    if (markerEnd && isDisplayObject(markerEnd)) {\n      this.markerEndAngle = markerEnd.getLocalEulerAngles();\n      this.appendChild(markerEnd);\n    }\n\n    this.transformMarker(true);\n    this.transformMarker(false);\n  }\n\n  attributeChangedCallback<Key extends keyof PathStyleProps>(\n    attrName: Key,\n    oldValue: PathStyleProps[Key],\n    newValue: PathStyleProps[Key],\n    prevParsedValue: ParsedPathStyleProps[Key],\n    newParsedValue: ParsedPathStyleProps[Key],\n  ) {\n    if (attrName === 'd') {\n      // recalc markers\n      this.transformMarker(true);\n      this.transformMarker(false);\n      this.placeMarkerMid(this.parsedStyle.markerMid);\n    } else if (\n      attrName === 'markerStartOffset' ||\n      attrName === 'markerEndOffset'\n    ) {\n      this.transformMarker(true);\n      this.transformMarker(false);\n    } else if (attrName === 'markerStart') {\n      if (prevParsedValue && isDisplayObject(prevParsedValue)) {\n        this.markerStartAngle = 0;\n        prevParsedValue.remove();\n      }\n\n      // CSSKeyword 'unset'\n      if (newParsedValue && isDisplayObject(newParsedValue)) {\n        this.markerStartAngle = newParsedValue.getLocalEulerAngles();\n        this.appendChild(newParsedValue);\n        this.transformMarker(true);\n      }\n    } else if (attrName === 'markerEnd') {\n      if (prevParsedValue && isDisplayObject(prevParsedValue)) {\n        this.markerEndAngle = 0;\n        prevParsedValue.remove();\n      }\n\n      if (newParsedValue && isDisplayObject(newParsedValue)) {\n        this.markerEndAngle = newParsedValue.getLocalEulerAngles();\n        this.appendChild(newParsedValue);\n        this.transformMarker(false);\n      }\n    } else if (attrName === 'markerMid') {\n      this.placeMarkerMid(newParsedValue as DisplayObject);\n    }\n  }\n\n  private transformMarker(isStart: boolean) {\n    const { markerStart, markerEnd, markerStartOffset, markerEndOffset } =\n      this.parsedStyle;\n    const marker = isStart ? markerStart : markerEnd;\n\n    if (!marker || !isDisplayObject(marker)) {\n      return;\n    }\n\n    let rad = 0;\n    let x: number;\n    let y: number;\n    let ox: number;\n    let oy: number;\n    let offset: number;\n    let originalAngle: number;\n\n    if (isStart) {\n      const [p1, p2] = this.getStartTangent();\n      ox = p2[0];\n      oy = p2[1];\n      x = p1[0] - p2[0];\n      y = p1[1] - p2[1];\n      offset = markerStartOffset || 0;\n      originalAngle = this.markerStartAngle;\n    } else {\n      const [p1, p2] = this.getEndTangent();\n      ox = p2[0];\n      oy = p2[1];\n      x = p1[0] - p2[0];\n      y = p1[1] - p2[1];\n      offset = markerEndOffset || 0;\n      originalAngle = this.markerEndAngle;\n    }\n    rad = Math.atan2(y, x);\n\n    // account for markerOffset\n    marker.setLocalEulerAngles((rad * 180) / Math.PI + originalAngle);\n    marker.setLocalPosition(\n      ox + Math.cos(rad) * offset,\n      oy + Math.sin(rad) * offset,\n    );\n  }\n\n  private placeMarkerMid(marker: DisplayObject) {\n    const {\n      d: { segments },\n    } = this.parsedStyle;\n    // clear all existed markers\n    this.markerMidList.forEach((marker) => {\n      marker.remove();\n    });\n    if (marker && isDisplayObject(marker)) {\n      for (let i = 1; i < segments.length - 1; i++) {\n        const [ox, oy] = segments[i].currentPoint;\n        const cloned = i === 1 ? marker : marker.cloneNode(true);\n        this.markerMidList.push(cloned);\n        this.appendChild(cloned);\n        cloned.setLocalPosition(ox, oy);\n        // TODO: orient of marker\n      }\n    }\n  }\n\n  /**\n   * Returns the total length of the path.\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/SVGGeometryElement/getTotalLength\n   */\n  getTotalLength() {\n    return getOrCalculatePathTotalLength(this);\n  }\n\n  /**\n   * Returns the point at a given distance along the path.\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/SVGGeometryElement/getPointAtLength\n   */\n  getPointAtLength(distance: number, inWorldSpace = false): Point {\n    const {\n      d: { absolutePath },\n    } = this.parsedStyle;\n    const { x, y } = getPointAtLength(absolutePath, distance);\n\n    const transformed = vec3.transformMat4(\n      vec3.create(),\n      vec3.fromValues(x, y, 0),\n      inWorldSpace ? this.getWorldTransform() : this.getLocalTransform(),\n    );\n\n    // apply local transformation\n    return new Point(transformed[0], transformed[1]);\n  }\n\n  /**\n   * Returns the point at a given ratio of the total length in path.\n   */\n  getPoint(ratio: number, inWorldSpace = false): Point {\n    return this.getPointAtLength(\n      ratio * getOrCalculatePathTotalLength(this),\n      inWorldSpace,\n    );\n  }\n\n  /**\n   * Get start tangent vector\n   */\n  getStartTangent(): number[][] {\n    const { segments } = this.parsedStyle.d;\n    let result: number[][] = [];\n    if (segments.length > 1) {\n      const startPoint = segments[0].currentPoint;\n      const endPoint = segments[1].currentPoint;\n      const tangent = segments[1].startTangent;\n      result = [];\n      if (tangent) {\n        result.push([startPoint[0] - tangent[0], startPoint[1] - tangent[1]]);\n        result.push([startPoint[0], startPoint[1]]);\n      } else {\n        result.push([endPoint[0], endPoint[1]]);\n        result.push([startPoint[0], startPoint[1]]);\n      }\n    }\n    return result;\n  }\n\n  /**\n   * Get end tangent vector\n   */\n  getEndTangent(): number[][] {\n    const { segments } = this.parsedStyle.d;\n    const { length } = segments;\n    let result: number[][] = [];\n    if (length > 1) {\n      const startPoint = segments[length - 2].currentPoint;\n      const endPoint = segments[length - 1].currentPoint;\n      const tangent = segments[length - 1].endTangent;\n      result = [];\n      if (tangent) {\n        result.push([endPoint[0] - tangent[0], endPoint[1] - tangent[1]]);\n        result.push([endPoint[0], endPoint[1]]);\n      } else {\n        result.push([startPoint[0], startPoint[1]]);\n        result.push([endPoint[0], endPoint[1]]);\n      }\n    }\n    return result;\n  }\n}\n", "import type { DisplayObjectConfig } from '../dom';\nimport type { BaseStyleProps, ParsedBaseStyleProps } from '../types';\nimport { Shape } from '../types';\nimport { DisplayObject, isDisplayObject } from './DisplayObject';\n\nexport interface PolygonStyleProps extends BaseStyleProps {\n  points: ([number, number] | [number, number, number])[];\n  /**\n   * marker will be positioned at the first point\n   */\n  markerStart?: DisplayObject | null;\n\n  /**\n   * marker will be positioned at the last point\n   */\n  markerEnd?: DisplayObject | null;\n\n  markerMid?: DisplayObject | null;\n\n  /**\n   * offset relative to original position\n   */\n  markerStartOffset?: number;\n\n  /**\n   * offset relative to original position\n   */\n  markerEndOffset?: number;\n  isClosed?: boolean;\n  isBillboard?: boolean;\n  isSizeAttenuation?: boolean;\n}\nexport interface ParsedPolygonStyleProps extends ParsedBaseStyleProps {\n  points: {\n    points: ([number, number] | [number, number, number])[];\n    segments: [number, number][];\n    totalLength: number;\n  };\n  markerStart?: DisplayObject | null;\n  markerMid?: DisplayObject | null;\n  markerEnd?: DisplayObject | null;\n  markerStartOffset?: number;\n  markerEndOffset?: number;\n  isClosed?: boolean;\n  isBillboard?: boolean;\n  isSizeAttenuation?: boolean;\n}\n\nexport class Polygon extends DisplayObject<\n  PolygonStyleProps,\n  ParsedPolygonStyleProps\n> {\n  static PARSED_STYLE_LIST: Set<string> = new Set([\n    ...DisplayObject.PARSED_STYLE_LIST,\n    'points',\n    'markerStart',\n    'markerMid',\n    'markerEnd',\n    'markerStartOffset',\n    'markerEndOffset',\n    'isClosed',\n    'isBillboard',\n    'isSizeAttenuation',\n  ]);\n\n  private markerStartAngle = 0;\n  private markerEndAngle = 0;\n\n  /**\n   * markers placed at the mid\n   */\n  private markerMidList: DisplayObject[] = [];\n\n  constructor({ style, ...rest }: DisplayObjectConfig<PolygonStyleProps> = {}) {\n    super({\n      type: Shape.POLYGON,\n      style,\n      initialParsedStyle: {\n        points: {\n          points: [],\n          totalLength: 0,\n          segments: [],\n        },\n        miterLimit: 4,\n        isClosed: true,\n      },\n      ...rest,\n    });\n\n    const { markerStart, markerEnd, markerMid } = this.parsedStyle;\n\n    if (markerStart && isDisplayObject(markerStart)) {\n      this.markerStartAngle = markerStart.getLocalEulerAngles();\n      this.appendChild(markerStart);\n    }\n\n    if (markerMid && isDisplayObject(markerMid)) {\n      this.placeMarkerMid(markerMid);\n    }\n\n    if (markerEnd && isDisplayObject(markerEnd)) {\n      this.markerEndAngle = markerEnd.getLocalEulerAngles();\n      this.appendChild(markerEnd);\n    }\n\n    this.transformMarker(true);\n    this.transformMarker(false);\n  }\n\n  attributeChangedCallback<Key extends keyof PolygonStyleProps>(\n    attrName: Key,\n    oldValue: PolygonStyleProps[Key],\n    newValue: PolygonStyleProps[Key],\n    prevParsedValue: ParsedPolygonStyleProps[Key],\n    newParsedValue: ParsedPolygonStyleProps[Key],\n  ) {\n    if (attrName === 'points') {\n      // recalc markers\n      this.transformMarker(true);\n      this.transformMarker(false);\n      this.placeMarkerMid(this.parsedStyle.markerMid);\n    } else if (\n      attrName === 'markerStartOffset' ||\n      attrName === 'markerEndOffset'\n    ) {\n      this.transformMarker(true);\n      this.transformMarker(false);\n    } else if (attrName === 'markerStart') {\n      if (prevParsedValue && isDisplayObject(prevParsedValue)) {\n        this.markerStartAngle = 0;\n        prevParsedValue.remove();\n      }\n\n      // CSSKeyword 'unset'\n      if (newParsedValue && isDisplayObject(newParsedValue)) {\n        this.markerStartAngle = newParsedValue.getLocalEulerAngles();\n        this.appendChild(newParsedValue);\n        this.transformMarker(true);\n      }\n    } else if (attrName === 'markerEnd') {\n      if (prevParsedValue && isDisplayObject(prevParsedValue)) {\n        this.markerEndAngle = 0;\n        prevParsedValue.remove();\n      }\n\n      if (newParsedValue && isDisplayObject(newParsedValue)) {\n        this.markerEndAngle = newParsedValue.getLocalEulerAngles();\n        this.appendChild(newParsedValue);\n        this.transformMarker(false);\n      }\n    } else if (attrName === 'markerMid') {\n      this.placeMarkerMid(newParsedValue as DisplayObject);\n    }\n  }\n\n  private transformMarker(isStart: boolean) {\n    const {\n      markerStart,\n      markerEnd,\n      markerStartOffset,\n      markerEndOffset,\n      points: P,\n    } = this.parsedStyle;\n    const { points } = P || {};\n    const marker = isStart ? markerStart : markerEnd;\n\n    if (!marker || !isDisplayObject(marker) || !points) {\n      return;\n    }\n\n    let rad = 0;\n    let x: number;\n    let y: number;\n    let ox: number;\n    let oy: number;\n    let offset: number;\n    let originalAngle: number;\n\n    ox = points[0][0];\n    oy = points[0][1];\n\n    if (isStart) {\n      x = points[1][0] - points[0][0];\n      y = points[1][1] - points[0][1];\n      offset = markerStartOffset || 0;\n      originalAngle = this.markerStartAngle;\n    } else {\n      const { length } = points;\n\n      if (!this.parsedStyle.isClosed) {\n        ox = points[length - 1][0];\n        oy = points[length - 1][1];\n        x = points[length - 2][0] - points[length - 1][0];\n        y = points[length - 2][1] - points[length - 1][1];\n      } else {\n        x = points[length - 1][0] - points[0][0];\n        y = points[length - 1][1] - points[0][1];\n      }\n      offset = markerEndOffset || 0;\n      originalAngle = this.markerEndAngle;\n    }\n    rad = Math.atan2(y, x);\n\n    // account for markerOffset\n    marker.setLocalEulerAngles((rad * 180) / Math.PI + originalAngle);\n    marker.setLocalPosition(\n      ox + Math.cos(rad) * offset,\n      oy + Math.sin(rad) * offset,\n    );\n  }\n\n  private placeMarkerMid(marker: DisplayObject) {\n    const { points: P } = this.parsedStyle;\n    const { points } = P || {};\n\n    // clear all existed markers\n    this.markerMidList.forEach((marker) => {\n      marker.remove();\n    });\n    this.markerMidList = [];\n\n    if (marker && isDisplayObject(marker) && points) {\n      for (\n        let i = 1;\n        i < (this.parsedStyle.isClosed ? points.length : points.length - 1);\n        i++\n      ) {\n        const ox = points[i][0];\n        const oy = points[i][1];\n\n        const cloned = i === 1 ? marker : marker.cloneNode(true);\n        this.markerMidList.push(cloned);\n\n        this.appendChild(cloned);\n        cloned.setLocalPosition(ox, oy);\n\n        // TODO: orient of marker\n      }\n    }\n  }\n}\n", "import { lineLength, linePointAt } from '@antv/g-math';\nimport { vec3 } from 'gl-matrix';\nimport type { DisplayObjectConfig } from '../dom';\nimport { Point } from '../shapes';\nimport type { BaseStyleProps, ParsedBaseStyleProps } from '../types';\nimport { Shape } from '../types';\nimport type { DisplayObject } from './DisplayObject';\nimport { Polygon } from './Polygon';\nimport { getOrCalculatePolylineTotalLength } from '../utils';\n\nexport interface PolylineStyleProps extends BaseStyleProps {\n  points: ([number, number] | [number, number, number])[];\n  /**\n   * marker will be positioned at the first point\n   */\n  markerStart?: DisplayObject | null;\n\n  /**\n   * marker will be positioned at the last point\n   */\n  markerEnd?: DisplayObject | null;\n\n  markerMid?: DisplayObject | null;\n\n  /**\n   * offset relative to original position\n   */\n  markerStartOffset?: number;\n\n  /**\n   * offset relative to original position\n   */\n  markerEndOffset?: number;\n  /**\n   * Whether the circle is billboard.\n   */\n  isBillboard?: boolean;\n  /**\n   * Whether the circle is size attenuation.\n   */\n  isSizeAttenuation?: boolean;\n}\nexport interface ParsedPolylineStyleProps extends ParsedBaseStyleProps {\n  points: {\n    points: ([number, number] | [number, number, number])[];\n    segments: [number, number][];\n    totalLength: number;\n  };\n  markerStart?: DisplayObject | null;\n  markerMid?: DisplayObject | null;\n  markerEnd?: DisplayObject | null;\n  markerStartOffset?: number;\n  markerEndOffset?: number;\n  isBillboard?: boolean;\n}\n\n/**\n * Polyline inherits the marker-related capabilities of Polygon.\n */\nexport class Polyline extends Polygon {\n  static PARSED_STYLE_LIST = new Set([\n    ...Polygon.PARSED_STYLE_LIST,\n    'points',\n    'markerStart',\n    'markerMid',\n    'markerEnd',\n    'markerStartOffset',\n    'markerEndOffset',\n    'isBillboard',\n  ]);\n\n  constructor({\n    style,\n    ...rest\n  }: DisplayObjectConfig<PolylineStyleProps> = {}) {\n    super({\n      type: Shape.POLYLINE,\n      style,\n      initialParsedStyle: {\n        points: {\n          points: [],\n          totalLength: 0,\n          segments: [],\n        },\n        miterLimit: 4,\n        isClosed: false,\n      },\n      ...rest,\n    });\n  }\n\n  getTotalLength() {\n    return getOrCalculatePolylineTotalLength(this);\n  }\n\n  getPointAtLength(distance: number, inWorldSpace = false): Point {\n    return this.getPoint(distance / this.getTotalLength(), inWorldSpace);\n  }\n\n  getPoint(ratio: number, inWorldSpace = false): Point {\n    const {\n      points: { points },\n    } = this.parsedStyle;\n\n    if (this.parsedStyle.points.segments.length === 0) {\n      const segments: [number, number][] = [];\n      let tempLength = 0;\n      let segmentT: [number, number];\n      let segmentL: number;\n\n      const totalLength = this.getTotalLength();\n\n      points.forEach((p, i) => {\n        if (points[i + 1]) {\n          segmentT = [0, 0];\n          segmentT[0] = tempLength / totalLength;\n          segmentL = lineLength(p[0], p[1], points[i + 1][0], points[i + 1][1]);\n          tempLength += segmentL;\n          segmentT[1] = tempLength / totalLength;\n          segments.push(segmentT);\n        }\n      });\n\n      this.parsedStyle.points.segments = segments;\n    }\n\n    let subt = 0;\n    let index = 0;\n    this.parsedStyle.points.segments.forEach((v, i) => {\n      if (ratio >= v[0] && ratio <= v[1]) {\n        subt = (ratio - v[0]) / (v[1] - v[0]);\n        index = i;\n      }\n    });\n\n    const { x, y } = linePointAt(\n      points[index][0],\n      points[index][1],\n      points[index + 1][0],\n      points[index + 1][1],\n      subt,\n    );\n\n    const transformed = vec3.transformMat4(\n      vec3.create(),\n      vec3.fromValues(x, y, 0),\n      inWorldSpace ? this.getWorldTransform() : this.getLocalTransform(),\n    );\n\n    // apply local transformation\n    return new Point(transformed[0], transformed[1]);\n  }\n\n  getStartTangent(): number[][] {\n    const { points } = this.parsedStyle.points;\n    const result = [];\n    result.push([points[1][0], points[1][1]]);\n    result.push([points[0][0], points[0][1]]);\n    return result;\n  }\n\n  getEndTangent(): number[][] {\n    const { points } = this.parsedStyle.points;\n    const l = points.length - 1;\n    const result = [];\n    result.push([points[l - 1][0], points[l - 1][1]]);\n    result.push([points[l][0], points[l][1]]);\n    return result;\n  }\n}\n", "import type { DisplayObjectConfig } from '../dom';\nimport type { BaseStyleProps, ParsedBaseStyleProps } from '../types';\nimport { Shape } from '../types';\nimport { DisplayObject } from './DisplayObject';\n\nexport interface RectStyleProps extends BaseStyleProps {\n  x?: number | string;\n  y?: number | string;\n  z?: number;\n  width: number | string;\n  height: number | string;\n  isBillboard?: boolean;\n  isSizeAttenuation?: boolean;\n  /**\n   * top-left, top-right, bottom-right, bottom-left\n   */\n  radius?: number | string | number[];\n}\n\nexport interface ParsedRectStyleProps extends ParsedBaseStyleProps {\n  x?: number;\n  y?: number;\n  z?: number;\n  width: number;\n  height: number;\n  isBillboard?: boolean;\n  isSizeAttenuation?: boolean;\n  radius?: [number, number, number, number];\n}\n\nexport class Rect extends DisplayObject<RectStyleProps, ParsedRectStyleProps> {\n  static PARSED_STYLE_LIST: Set<string> = new Set([\n    ...DisplayObject.PARSED_STYLE_LIST,\n    'x',\n    'y',\n    'z',\n    'width',\n    'height',\n    'isBillboard',\n    'isSizeAttenuation',\n    'radius',\n  ]);\n\n  constructor(options: DisplayObjectConfig<RectStyleProps> = {}) {\n    super({\n      type: Shape.RECT,\n      ...options,\n    });\n  }\n}\n", "import { CSSGlobalKeywords, CSSRGB } from '../css';\nimport type { DisplayObjectConfig } from '../dom/interfaces';\nimport type { TextMetrics } from '../services';\nimport type {\n  BaseStyleProps,\n  ParsedBaseStyleProps,\n  TextDecorationStyle,\n  TextOverflow,\n  TextDecorationLine,\n} from '../types';\nimport { Shape } from '../types';\nimport { DisplayObject } from './DisplayObject';\nimport type { Path } from './Path';\n\nexport interface TextStyleProps extends BaseStyleProps {\n  x?: number | string;\n  y?: number | string;\n  z?: number | string;\n\n  /**\n   * Always face the camera.\n   */\n  isBillboard?: boolean;\n\n  /**\n   * The rotation of the billboard in radians.\n   */\n  billboardRotation?: number;\n\n  /**\n   * Whether the size of the sprite is attenuated by the camera depth. (Perspective camera only.)\n   */\n  isSizeAttenuation?: boolean;\n\n  text: number | string;\n\n  /**\n   * The text-align property sets the horizontal alignment of the inline-level content.\n   * @see https://developer.mozilla.org/en-US/docs/Web/CSS/text-align\n   */\n  textAlign?:\n    | CSSGlobalKeywords\n    | 'start'\n    | 'center'\n    | 'middle'\n    | 'end'\n    | 'left'\n    | 'right';\n\n  /**\n   * It specifies the current text baseline used when drawing text.\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/textBaseline\n   */\n  textBaseline?:\n    | CSSGlobalKeywords\n    | 'top'\n    | 'hanging'\n    | 'middle'\n    | 'alphabetic'\n    | 'ideographic'\n    | 'bottom';\n\n  /**\n   * The text-overflow property sets how hidden overflow content is signaled to users.\n   * It can be clipped, display an ellipsis (''), or display a custom string.\n   * @see https://developer.mozilla.org/en-US/docs/Web/CSS/text-overflow#values\n   */\n  textOverflow?: TextOverflow;\n\n  /**\n   * Borrow from CanvasKit ParagraphStyle.\n   */\n  maxLines?: number;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/SVG/Element/textPath\n   */\n  textPath?: Path;\n\n  /**\n   * The side attribute determines the side of a path the text is placed on (relative to the path direction).\n   * @see https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/side\n   */\n  textPathSide?: 'left' | 'right';\n\n  /**\n   * The startOffset attribute defines an offset from the start of the path for the initial current text position along the path after converting the path to the \\<textPath\\> element's coordinate system.\n   * @see https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/startOffset\n   */\n  textPathStartOffset?: number | string;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/CSS/text-decoration-line\n   */\n  textDecorationLine?: TextDecorationLine;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/CSS/text-decoration-color\n   */\n  textDecorationColor?: string;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/CSS/text-decoration-style\n   */\n  textDecorationStyle?: TextDecorationStyle;\n\n  /**\n   * The font-style property sets whether a font should be styled with a normal, italic, or oblique face from its font-family.\n   * @see https://developer.mozilla.org/en-US/docs/Web/CSS/font-style\n   */\n  fontStyle?: CSSGlobalKeywords | 'normal' | 'italic' | 'oblique';\n\n  /**\n   * The font-size property sets the size of the font.\n   * @see https://developer.mozilla.org/en-US/docs/Web/CSS/font-size\n   */\n  fontSize?: number | string;\n\n  /**\n   * The font-family property specifies a prioritized list of one or more font family names and/or generic family names for the selected element.\n   * @see https://developer.mozilla.org/en-US/docs/Web/CSS/font-family\n   */\n  fontFamily?: string;\n\n  /**\n   * The font-weight property sets the weight (or boldness) of the font. The weights available depend on the font-family that is currently set.\n   * @see https://developer.mozilla.org/en-US/docs/Web/CSS/font-weight\n   */\n  fontWeight?:\n    | CSSGlobalKeywords\n    | 'normal'\n    | 'bold'\n    | 'bolder'\n    | 'lighter'\n    | number;\n\n  /**\n   * The font-variant shorthand property allows you to set all the font variants for a font.\n   * @see https://developer.mozilla.org/en-US/docs/Web/CSS/font-variant\n   */\n  fontVariant?: CSSGlobalKeywords | 'normal' | 'small-caps' | string;\n\n  /**\n   * The line-height property sets the height of a line box.\n   * @see https://developer.mozilla.org/en-US/docs/Web/CSS/line-height\n   */\n  lineHeight?: number | string;\n\n  /**\n   * It specifies the spacing between letters when drawing text.\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/letterSpacing\n   */\n  letterSpacing?: number | string;\n\n  /**\n   * The white-space property sets how white space inside an element is handled.\n   * @see https://developer.mozilla.org/en-US/docs/Web/CSS/white-space\n   */\n  // whiteSpace?: 'pre';\n\n  /**\n   * There is no \"CSS leading\" property\n   * @see https://css-tricks.com/how-to-tame-line-height-in-css/\n   */\n  leading?: number;\n\n  /**\n   * The overflow-wrap CSS property applies to inline elements,\n   * setting whether the browser should insert line breaks within an otherwise unbreakable string to prevent text from overflowing its line box.\n   *\n   * The overflow-wrap property acts in the same way as the non-standard property word-wrap.\n   * The word-wrap property is now treated by browsers as an alias of the standard property.\n   * @see https://developer.mozilla.org/en-US/docs/Web/CSS/overflow-wrap\n   */\n  wordWrap?: boolean;\n\n  /**\n   * Max width of overflowing box.\n   */\n  wordWrapWidth?: number;\n  // dropShadow?: boolean;\n  // dropShadowDistance?: number;\n\n  /**\n   * The dx attribute indicates a shift along the x-axis on the position of an element or its content.\n   * @see https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/dx\n   */\n  dx?: number | string;\n\n  /**\n   * The dy attribute indicates a shift along the y-axis on the position of an element or its content.\n   * @see https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/dy\n   */\n  dy?: number | string;\n}\nexport interface ParsedTextStyleProps extends ParsedBaseStyleProps {\n  x: number;\n  y: number;\n  z?: number;\n  isBillboard?: boolean;\n  billboardRotation?: number;\n  isSizeAttenuation?: boolean;\n  text: string;\n  textAlign?: 'start' | 'center' | 'middle' | 'end' | 'left' | 'right';\n  textBaseline?:\n    | 'top'\n    | 'hanging'\n    | 'middle'\n    | 'alphabetic'\n    | 'ideographic'\n    | 'bottom';\n  fontStyle?: 'normal' | 'italic' | 'oblique';\n  fontSize?: number;\n  fontFamily?: string;\n  fontWeight?: 'normal' | 'bold' | 'bolder' | 'lighter' | number;\n  fontVariant?: 'normal' | 'small-caps' | string;\n  lineHeight?: number;\n  letterSpacing?: number;\n  leading?: number;\n  wordWrap?: boolean;\n  wordWrapWidth?: number;\n  maxLines?: number;\n  textOverflow?: TextOverflow;\n  isOverflowing?: boolean;\n  textPath?: Path;\n  textDecorationLine?: TextDecorationLine;\n  textDecorationColor?: CSSRGB;\n  textDecorationStyle?: TextDecorationStyle | string;\n  textPathSide?: 'left' | 'right';\n  textPathStartOffset?: number;\n  metrics?: TextMetrics;\n  dx?: number;\n  dy?: number;\n}\n\n/**\n * <text> @see https://developer.mozilla.org/en-US/docs/Web/API/SVGTextElement\n */\nexport class Text extends DisplayObject<TextStyleProps, ParsedTextStyleProps> {\n  static PARSED_STYLE_LIST: Set<string> = new Set([\n    ...DisplayObject.PARSED_STYLE_LIST,\n    'x',\n    'y',\n    'z',\n    'isBillboard',\n    'billboardRotation',\n    'isSizeAttenuation',\n    'text',\n    'textAlign',\n    'textBaseline',\n    'fontStyle',\n    'fontSize',\n    'fontFamily',\n    'fontWeight',\n    'fontVariant',\n    'lineHeight',\n    'letterSpacing',\n    'leading',\n    'wordWrap',\n    'wordWrapWidth',\n    'maxLines',\n    'textOverflow',\n    'isOverflowing',\n    'textPath',\n    'textDecorationLine',\n    'textDecorationColor',\n    'textDecorationStyle',\n    'textPathSide',\n    'textPathStartOffset',\n    'metrics',\n    'dx',\n    'dy',\n  ]);\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/SVGTextContentElement#constants\n   */\n  // LENGTHADJUST_SPACING: number = 1;\n  // LENGTHADJUST_SPACINGANDGLYPHS: number = 2;\n  // LENGTHADJUST_UNKNOWN: number = 0;\n\n  constructor({ style, ...rest }: DisplayObjectConfig<TextStyleProps> = {}) {\n    super({\n      type: Shape.TEXT,\n      style: {\n        fill: 'black',\n        ...style,\n      },\n      ...rest,\n    });\n  }\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/SVGTextContentElement\n   */\n  getComputedTextLength(): number {\n    this.getGeometryBounds();\n    return this.parsedStyle.metrics?.maxLineWidth || 0;\n  }\n\n  getLineBoundingRects() {\n    this.getGeometryBounds();\n    return this.parsedStyle.metrics?.lineMetrics || [];\n  }\n\n  isOverflowing() {\n    this.getGeometryBounds();\n    return !!this.parsedStyle.isOverflowing;\n  }\n}\n", "import type { DisplayObject } from '../display-objects';\nimport {\n  Circle,\n  Ellipse,\n  Group,\n  HTML,\n  Image,\n  Line,\n  Path,\n  Polygon,\n  Polyline,\n  Rect,\n  Text,\n} from '../display-objects';\nimport { Shape } from '../types';\n\n/**\n * canvas.customElements\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/CustomElementRegistry\n */\nexport class CustomElementRegistry {\n  private registry: Record<string, new (...args: any[]) => DisplayObject> = {};\n\n  constructor() {\n    this.define(Shape.CIRCLE, Circle);\n    this.define(Shape.ELLIPSE, Ellipse);\n    this.define(Shape.RECT, Rect);\n    this.define(Shape.IMAGE, Image);\n    this.define(Shape.LINE, Line);\n    this.define(Shape.GROUP, Group);\n    this.define(Shape.PATH, Path);\n    this.define(Shape.POLYGON, Polygon);\n    this.define(Shape.POLYLINE, Polyline);\n    this.define(Shape.TEXT, Text);\n    this.define(Shape.HTML, HTML);\n  }\n\n  define<T extends DisplayObject>(\n    name: string,\n    constructor: new (...args: any[]) => T,\n  ) {\n    this.registry[name] = constructor;\n  }\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/CustomElementRegistry/get\n   */\n  get<T extends DisplayObject>(name: string): new (...args: any[]) => T {\n    return this.registry[name] as new (...args: any[]) => T;\n  }\n}\n", "import { runtime } from '../global-runtime';\nimport { CSSUnitValue } from './cssom';\nimport type { PropertySyntax } from './interfaces';\n\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/CSS/RegisterProperty#parameters\n */\nexport interface PropertyDefinition {\n  name: string;\n  /**\n   * representing the expected syntax of the defined property. Defaults to \"*\".\n   */\n  syntax: PropertySyntax;\n  /**\n   * A boolean value defining whether the defined property should be inherited (true), or not (false). Defaults to false.\n   */\n  inherits?: boolean;\n  interpolable?: boolean;\n  initialValue?: string;\n}\n\n/**\n * holds useful CSS-related methods.\n * @see https://developer.mozilla.org/en-US/docs/Web/API/CSS\n *\n * * CSS Typed OM @see https://developer.mozilla.org/en-US/docs/Web/API/CSS/factory_functions\n * * register property @see https://developer.mozilla.org/en-US/docs/Web/API/CSS/RegisterProperty\n * * CSS Layout API\n */\nexport const CSS = {\n  /**\n   * <number>\n   * @see https://drafts.csswg.org/css-values-4/#number-value\n   */\n  number: (n: number) => {\n    return new CSSUnitValue(n);\n  },\n\n  /**\n   * <percentage>\n   * @see https://drafts.csswg.org/css-values-4/#percentage-value\n   */\n  percent: (n: number) => {\n    return new CSSUnitValue(n, '%');\n  },\n\n  /**\n   * <length>\n   */\n  px: (n: number) => {\n    return new CSSUnitValue(n, 'px');\n  },\n\n  /**\n   * <length>\n   */\n  em: (n: number) => {\n    return new CSSUnitValue(n, 'em');\n  },\n\n  rem: (n: number) => {\n    return new CSSUnitValue(n, 'rem');\n  },\n\n  /**\n   * <angle>\n   */\n  deg: (n: number) => {\n    return new CSSUnitValue(n, 'deg');\n  },\n\n  /**\n   * <angle>\n   */\n  grad: (n: number) => {\n    return new CSSUnitValue(n, 'grad');\n  },\n\n  /**\n   * <angle>\n   */\n  rad: (n: number) => {\n    return new CSSUnitValue(n, 'rad');\n  },\n\n  /**\n   * <angle>\n   */\n  turn: (n: number) => {\n    return new CSSUnitValue(n, 'turn');\n  },\n\n  /**\n   * <time>\n   */\n  s: (n: number) => {\n    return new CSSUnitValue(n, 's');\n  },\n\n  /**\n   * <time>\n   */\n  ms: (n: number) => {\n    return new CSSUnitValue(n, 'ms');\n  },\n\n  /**\n   * CSS Properties & Values API\n   *\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/CSS_Properties_and_Values_API\n   * @see https://drafts.css-houdini.org/css-properties-values-api/#registering-custom-properties\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/CSS/RegisterProperty\n   */\n  registerProperty: (definition: PropertyDefinition) => {\n    const { name, inherits, interpolable, initialValue, syntax } = definition;\n    runtime.styleValueRegistry.registerMetadata({\n      n: name,\n      inh: inherits,\n      int: interpolable,\n      d: initialValue,\n      syntax,\n    });\n  },\n\n  /**\n   * CSS Layout API\n   * register layout\n   *\n   * @see https://github.com/w3c/css-houdini-drafts/blob/main/css-layout-api/EXPLAINER.md\n   * @see https://developer.mozilla.org/en-US/docs/Web/Guide/Houdini#css_layout_api\n   */\n  registerLayout: (name: string, clazz: any) => {\n    runtime.layoutRegistry.registerLayout(name, clazz);\n  },\n};\n", "import { isFunction } from '@antv/util';\nimport { runtime } from '../global-runtime';\nimport { BUILT_IN_PROPERTIES } from '../css';\nimport { Group, Text } from '../display-objects';\nimport type { DisplayObject } from '../display-objects';\nimport type { BaseStyleProps } from '../types';\nimport { Shape } from '../types';\nimport {\n  ERROR_MSG_METHOD_NOT_IMPLEMENTED,\n  ERROR_MSG_USE_DOCUMENT_ELEMENT,\n} from '../utils';\nimport type {\n  DisplayObjectConfig,\n  IAnimationTimeline,\n  ICanvas,\n  IDocument,\n  IElement,\n  INode,\n} from './interfaces';\nimport { Node } from './Node';\n\n/**\n * the entry of DOM tree\n * Document -> Node -> EventTarget\n * @see https://developer.mozilla.org/en-US/docs/Web/API/Document\n */\nexport class Document extends Node implements IDocument {\n  constructor() {\n    super();\n\n    this.nodeName = 'document';\n\n    // create timeline\n    try {\n      this.timeline = new runtime.AnimationTimeline(this);\n    } catch {}\n\n    /**\n     * for inherited properties, the initial value is used on the root element only,\n     * as long as no specified value is supplied.\n     * @see https://developer.mozilla.org/en-US/docs/Web/CSS/initial_value\n     */\n    const initialStyle = {};\n    BUILT_IN_PROPERTIES.forEach(({ n, inh, d }) => {\n      if (inh && d) {\n        initialStyle[n] = isFunction(d) ? d(Shape.GROUP) : d;\n      }\n    });\n\n    // like <html> in DOM tree\n    this.documentElement = new Group({\n      id: 'g-root',\n      style: initialStyle,\n    });\n    this.documentElement.ownerDocument = this;\n    this.documentElement.parentNode = this;\n    this.childNodes = [this.documentElement];\n  }\n\n  get children(): IElement[] {\n    return this.childNodes as IElement[];\n  }\n  get childElementCount(): number {\n    return this.childNodes.length;\n  }\n  get firstElementChild(): IElement | null {\n    return this.firstChild as IElement;\n  }\n  get lastElementChild(): IElement | null {\n    return this.lastChild as IElement;\n  }\n\n  /**\n   * only document has defaultView, points to canvas,\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Document/defaultView\n   */\n  defaultView: ICanvas | null = null;\n\n  /**\n   * the root element of document, eg. <html>\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Document/documentElement\n   */\n  readonly documentElement: Group;\n\n  /**\n   * document.timeline in WAAPI\n   */\n  readonly timeline: IAnimationTimeline;\n\n  readonly ownerDocument = null;\n\n  /**\n   * @example const circle = document.createElement('circle', { style: { r: 10 } });\n   */\n  createElement<\n    T extends DisplayObject<StyleProps>,\n    StyleProps extends BaseStyleProps,\n  >(tagName: string, options: DisplayObjectConfig<StyleProps>): T {\n    // @observablehq/plot will create <svg>\n    if (tagName === 'svg') {\n      return this.documentElement as unknown as T;\n    }\n\n    // d3 will use <tspan>\n    let clazz = this.defaultView.customElements.get(tagName);\n\n    if (!clazz) {\n      console.warn('Unsupported tagName: ', tagName);\n      clazz = tagName === 'tspan' ? Text : Group;\n    }\n\n    const shape = new clazz(options) as unknown as T;\n    shape.ownerDocument = this;\n    return shape;\n  }\n\n  createElementNS<\n    T extends DisplayObject<StyleProps>,\n    StyleProps extends BaseStyleProps,\n  >(\n    namespaceURI: string,\n    tagName: string,\n    options: DisplayObjectConfig<StyleProps>,\n  ): T {\n    return this.createElement(tagName, options);\n  }\n\n  cloneNode(deep?: boolean): this {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  }\n  destroy(): void {\n    try {\n      this.documentElement.destroyChildren();\n      this.timeline.destroy();\n    } catch {}\n  }\n\n  /**\n   * Picking 2D graphics with RBush based on BBox, fast but inaccurate.\n   */\n  elementsFromBBox(\n    minX: number,\n    minY: number,\n    maxX: number,\n    maxY: number,\n  ): DisplayObject[] {\n    const rBush = this.defaultView.context.rBushRoot;\n    const rBushNodes = rBush.search({ minX, minY, maxX, maxY });\n\n    const hitTestList: DisplayObject[] = [];\n    rBushNodes.forEach(({ displayObject }) => {\n      const { pointerEvents = 'auto' } = displayObject.parsedStyle;\n\n      // account for `visibility`\n      // @see https://developer.mozilla.org/en-US/docs/Web/CSS/pointer-events\n      const isVisibilityAffected = [\n        'auto',\n        'visiblepainted',\n        'visiblefill',\n        'visiblestroke',\n        'visible',\n      ].includes(pointerEvents);\n\n      if (\n        (!isVisibilityAffected ||\n          (isVisibilityAffected && displayObject.isVisible())) &&\n        !displayObject.isCulled() &&\n        displayObject.isInteractive()\n      ) {\n        hitTestList.push(displayObject);\n      }\n    });\n    // find group with max z-index\n    hitTestList.sort((a, b) => b.sortable.renderOrder - a.sortable.renderOrder);\n\n    return hitTestList;\n  }\n\n  elementFromPointSync(x: number, y: number): DisplayObject {\n    const { x: viewportX, y: viewportY } = this.defaultView.canvas2Viewport({\n      x,\n      y,\n    });\n    const { width, height } = this.defaultView.getConfig();\n    // outside canvas' viewport\n    if (\n      viewportX < 0 ||\n      viewportY < 0 ||\n      viewportX > width ||\n      viewportY > height\n    ) {\n      return null;\n    }\n\n    const { x: clientX, y: clientY } = this.defaultView.viewport2Client({\n      x: viewportX,\n      y: viewportY,\n    });\n\n    const { picked } = this.defaultView\n      .getRenderingService()\n      .hooks.pickSync.call({\n        topmost: true,\n        position: {\n          x,\n          y,\n          viewportX,\n          viewportY,\n          clientX,\n          clientY,\n        },\n        picked: [],\n      });\n    return (picked && picked[0]) || this.documentElement;\n  }\n\n  /**\n   * Do picking with API instead of triggering interactive events.\n   *\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Document/elementFromPoint\n   */\n  async elementFromPoint(x: number, y: number): Promise<DisplayObject> {\n    const { x: viewportX, y: viewportY } = this.defaultView.canvas2Viewport({\n      x,\n      y,\n    });\n    const { width, height } = this.defaultView.getConfig();\n    // outside canvas' viewport\n    if (\n      viewportX < 0 ||\n      viewportY < 0 ||\n      viewportX > width ||\n      viewportY > height\n    ) {\n      return null;\n    }\n\n    const { x: clientX, y: clientY } = this.defaultView.viewport2Client({\n      x: viewportX,\n      y: viewportY,\n    });\n\n    const { picked } = await this.defaultView\n      .getRenderingService()\n      .hooks.pick.promise({\n        topmost: true,\n        position: {\n          x,\n          y,\n          viewportX,\n          viewportY,\n          clientX,\n          clientY,\n        },\n        picked: [],\n      });\n    return (picked && picked[0]) || this.documentElement;\n  }\n\n  elementsFromPointSync(x: number, y: number): DisplayObject[] {\n    const { x: viewportX, y: viewportY } = this.defaultView.canvas2Viewport({\n      x,\n      y,\n    });\n    const { width, height } = this.defaultView.getConfig();\n    // outside canvas' viewport\n    if (\n      viewportX < 0 ||\n      viewportY < 0 ||\n      viewportX > width ||\n      viewportY > height\n    ) {\n      return [];\n    }\n\n    const { x: clientX, y: clientY } = this.defaultView.viewport2Client({\n      x: viewportX,\n      y: viewportY,\n    });\n\n    const { picked } = this.defaultView\n      .getRenderingService()\n      .hooks.pickSync.call({\n        topmost: false,\n        position: {\n          x,\n          y,\n          viewportX,\n          viewportY,\n          clientX,\n          clientY,\n        },\n        picked: [],\n      });\n\n    if (picked[picked.length - 1] !== this.documentElement) {\n      picked.push(this.documentElement);\n    }\n    return picked;\n  }\n\n  /**\n   * Do picking with API instead of triggering interactive events.\n   *\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Document/elementsFromPoint\n   */\n  async elementsFromPoint(x: number, y: number): Promise<DisplayObject[]> {\n    const { x: viewportX, y: viewportY } = this.defaultView.canvas2Viewport({\n      x,\n      y,\n    });\n    const { width, height } = this.defaultView.getConfig();\n    // outside canvas' viewport\n    if (\n      viewportX < 0 ||\n      viewportY < 0 ||\n      viewportX > width ||\n      viewportY > height\n    ) {\n      return [];\n    }\n\n    const { x: clientX, y: clientY } = this.defaultView.viewport2Client({\n      x: viewportX,\n      y: viewportY,\n    });\n\n    const { picked } = await this.defaultView\n      .getRenderingService()\n      .hooks.pick.promise({\n        topmost: false,\n        position: {\n          x,\n          y,\n          viewportX,\n          viewportY,\n          clientX,\n          clientY,\n        },\n        picked: [],\n      });\n\n    if (picked[picked.length - 1] !== this.documentElement) {\n      picked.push(this.documentElement);\n    }\n    return picked;\n  }\n\n  /**\n   * eg. Uncaught DOMException: Failed to execute 'appendChild' on 'Node': Only one element on document allowed.\n   */\n\n  appendChild<T extends INode>(newChild: T, index?: number): T {\n    throw new Error(ERROR_MSG_USE_DOCUMENT_ELEMENT);\n  }\n\n  insertBefore<T extends INode>(newChild: T, refChild: INode | null): T {\n    throw new Error(ERROR_MSG_USE_DOCUMENT_ELEMENT);\n  }\n\n  removeChild<T extends INode>(oldChild: T, destroy?: boolean): T {\n    throw new Error(ERROR_MSG_USE_DOCUMENT_ELEMENT);\n  }\n\n  replaceChild<T extends INode>(\n    newChild: INode,\n    oldChild: T,\n    destroy?: boolean,\n  ): T {\n    throw new Error(ERROR_MSG_USE_DOCUMENT_ELEMENT);\n  }\n\n  append(...nodes: INode[]): void {\n    throw new Error(ERROR_MSG_USE_DOCUMENT_ELEMENT);\n  }\n\n  prepend(...nodes: INode[]): void {\n    throw new Error(ERROR_MSG_USE_DOCUMENT_ELEMENT);\n  }\n\n  /**\n   * Execute query on documentElement.\n   */\n  getElementById<E extends IElement = IElement>(id: string): E | null {\n    return this.documentElement.getElementById(id);\n  }\n  getElementsByName<E extends IElement = IElement>(name: string): E[] {\n    return this.documentElement.getElementsByName(name);\n  }\n  getElementsByTagName<E extends IElement = IElement>(tagName: string): E[] {\n    return this.documentElement.getElementsByTagName(tagName);\n  }\n  getElementsByClassName<E extends IElement = IElement>(\n    className: string,\n  ): E[] {\n    return this.documentElement.getElementsByClassName(className);\n  }\n  querySelector<E extends IElement = IElement>(selectors: string): E | null {\n    return this.documentElement.querySelector(selectors);\n  }\n  querySelectorAll<E extends IElement = IElement>(selectors: string): E[] {\n    return this.documentElement.querySelectorAll(selectors);\n  }\n  find<E extends IElement = IElement>(filter: (node: E) => boolean): E | null {\n    return this.documentElement.find(filter);\n  }\n  findAll<E extends IElement = IElement>(filter: (node: E) => boolean): E[] {\n    return this.documentElement.findAll(filter);\n  }\n}\n", "import type { ICamera } from '../camera';\nimport type { DisplayObject } from '../display-objects/DisplayObject';\nimport { CustomEvent, ElementEvent } from '../dom';\nimport type {\n  RenderingPlugin,\n  RenderingPluginContext,\n} from '../services/RenderingService';\n\nexport interface CullingStrategyContribution {\n  isVisible: (camera: ICamera, object: DisplayObject) => boolean;\n}\n\n/**\n * apply following rules:\n * 1. `visibility` in scenegraph node\n * 2. other custom culling strategies, eg. frustum culling\n */\nexport class CullingPlugin implements RenderingPlugin {\n  static tag = 'Culling';\n\n  constructor(private strategies: CullingStrategyContribution[]) {}\n\n  apply(context: RenderingPluginContext) {\n    const { config, camera, renderingService, renderingContext } = context;\n    const { strategies } = this;\n\n    renderingService.hooks.cull.tap(\n      CullingPlugin.tag,\n      (object: DisplayObject | null) => {\n        if (object) {\n          const { cullable } = object;\n          // cullable.visible = true;\n          // const renderBounds = object.getRenderBounds();\n          // if (AABB.isEmpty(renderBounds)) {\n          //   cullable.visible = false;\n          // } else {\n          //   const isShape2D = shape2D.indexOf(object.nodeName as Shape) > -1;\n          //   const [p0, p1, p2, p3] = camera.getFrustum().planes;\n          //   tmpAABB.setMinMax([-p1.distance, -p3.distance, 0], [p0.distance, p2.distance, 0]);\n\n          //   cullable.visible = isShape2D ? renderBounds.intersects(tmpAABB) : true;\n          // }\n\n          if (strategies.length === 0) {\n            cullable.visible =\n              renderingContext.unculledEntities.indexOf(object.entity) > -1;\n          } else {\n            // eg. implemented by g-webgl(frustum culling)\n            cullable.visible = strategies.every((strategy) =>\n              strategy.isVisible(camera, object),\n            );\n          }\n\n          if (!object.isCulled() && object.isVisible()) {\n            return object;\n          }\n\n          const enableCancelEventPropagation =\n            config.future?.experimentalCancelEventPropagation === true;\n\n          // if (this.renderingContext.renderListLastFrame.indexOf(object) > -1) {\n          object.dispatchEvent(\n            new CustomEvent(ElementEvent.CULLED),\n            enableCancelEventPropagation,\n            enableCancelEventPropagation,\n          );\n          // }\n\n          return null;\n        }\n\n        return object;\n      },\n    );\n\n    renderingService.hooks.afterRender.tap(\n      CullingPlugin.tag,\n      (object: DisplayObject) => {\n        object.cullable.visibilityPlaneMask = -1;\n      },\n    );\n  }\n}\n", "import { isUndefined } from '@antv/util';\nimport type { FederatedMouseEvent, ICanvas, IEventTarget } from '../dom';\nimport { FederatedPointerEvent } from '../dom/FederatedPointerEvent';\nimport { FederatedWheelEvent } from '../dom/FederatedWheelEvent';\nimport type { RenderingPlugin, RenderingPluginContext } from '../services';\nimport type { Cursor, EventPosition, InteractivePointerEvent } from '../types';\nimport type { FormattedPointerEvent, FormattedTouch } from '../utils/event';\nimport { MOUSE_POINTER_ID, TOUCH_TO_POINTER, clock } from '../utils/event';\n\n/**\n * support mouse & touch events\n * @see https://github.com/pixijs/pixi.js/blob/dev/packages/interaction/README.md\n *\n * also provide some extra events such as `drag`\n */\nexport class EventPlugin implements RenderingPlugin {\n  static tag = 'Event';\n\n  private autoPreventDefault = false;\n  private rootPointerEvent = new FederatedPointerEvent(null);\n  private rootWheelEvent = new FederatedWheelEvent(null);\n\n  private context: RenderingPluginContext;\n\n  apply(context: RenderingPluginContext) {\n    this.context = context;\n    const { renderingService } = context;\n\n    const canvas = this.context.renderingContext.root.ownerDocument.defaultView;\n\n    this.context.eventService.setPickHandler((position: EventPosition) => {\n      const { picked } = this.context.renderingService.hooks.pickSync.call({\n        position,\n        picked: [],\n        topmost: true, // we only concern the topmost element\n      });\n      return picked[0] || null;\n    });\n\n    renderingService.hooks.pointerWheel.tap(\n      EventPlugin.tag,\n      (nativeEvent: InteractivePointerEvent) => {\n        const wheelEvent = this.normalizeWheelEvent(nativeEvent as WheelEvent);\n\n        this.context.eventService.mapEvent(wheelEvent);\n      },\n    );\n\n    renderingService.hooks.pointerDown.tap(\n      EventPlugin.tag,\n      (nativeEvent: InteractivePointerEvent) => {\n        if (\n          canvas.supportsTouchEvents &&\n          (nativeEvent as PointerEvent).pointerType === 'touch'\n        )\n          return;\n\n        const events = this.normalizeToPointerEvent(nativeEvent, canvas);\n\n        if (this.autoPreventDefault && (events[0] as any).isNormalized) {\n          const cancelable =\n            nativeEvent.cancelable || !('cancelable' in nativeEvent);\n\n          if (cancelable) {\n            nativeEvent.preventDefault();\n          }\n        }\n\n        for (const event of events) {\n          const federatedEvent = this.bootstrapEvent(\n            this.rootPointerEvent,\n            event,\n            canvas,\n            nativeEvent,\n          );\n          this.context.eventService.mapEvent(federatedEvent);\n        }\n\n        this.setCursor(this.context.eventService.cursor);\n      },\n    );\n\n    renderingService.hooks.pointerUp.tap(\n      EventPlugin.tag,\n      (nativeEvent: InteractivePointerEvent) => {\n        if (\n          canvas.supportsTouchEvents &&\n          (nativeEvent as PointerEvent).pointerType === 'touch'\n        )\n          return;\n\n        // account for element in SVG\n        const $element =\n          this.context.contextService.getDomElement() as HTMLCanvasElement;\n\n        const isNativeEventFromCanvas =\n          this.context.eventService.isNativeEventFromCanvas(\n            $element,\n            nativeEvent,\n          );\n        const outside = !isNativeEventFromCanvas ? 'outside' : '';\n        const normalizedEvents = this.normalizeToPointerEvent(\n          nativeEvent,\n          canvas,\n        );\n\n        for (const normalizedEvent of normalizedEvents) {\n          const event = this.bootstrapEvent(\n            this.rootPointerEvent,\n            normalizedEvent,\n            canvas,\n            nativeEvent,\n          );\n          event.type += outside;\n          this.context.eventService.mapEvent(event);\n        }\n\n        this.setCursor(this.context.eventService.cursor);\n      },\n    );\n\n    renderingService.hooks.pointerMove.tap(EventPlugin.tag, this.onPointerMove);\n\n    renderingService.hooks.pointerOver.tap(EventPlugin.tag, this.onPointerMove);\n\n    renderingService.hooks.pointerOut.tap(EventPlugin.tag, this.onPointerMove);\n\n    renderingService.hooks.click.tap(EventPlugin.tag, this.onClick);\n\n    renderingService.hooks.pointerCancel.tap(\n      EventPlugin.tag,\n      (nativeEvent: InteractivePointerEvent) => {\n        const normalizedEvents = this.normalizeToPointerEvent(\n          nativeEvent,\n          canvas,\n        );\n\n        for (const normalizedEvent of normalizedEvents) {\n          const event = this.bootstrapEvent(\n            this.rootPointerEvent,\n            normalizedEvent,\n            canvas,\n            nativeEvent,\n          );\n          this.context.eventService.mapEvent(event);\n        }\n        this.setCursor(this.context.eventService.cursor);\n      },\n    );\n  }\n\n  private onPointerMove = (nativeEvent: InteractivePointerEvent) => {\n    const canvas =\n      this.context.renderingContext.root?.ownerDocument?.defaultView;\n    if (\n      canvas.supportsTouchEvents &&\n      (nativeEvent as PointerEvent).pointerType === 'touch'\n    )\n      return;\n\n    const normalizedEvents = this.normalizeToPointerEvent(nativeEvent, canvas);\n\n    for (const normalizedEvent of normalizedEvents) {\n      const event = this.bootstrapEvent(\n        this.rootPointerEvent,\n        normalizedEvent,\n        canvas,\n        nativeEvent,\n      );\n\n      this.context.eventService.mapEvent(event);\n    }\n\n    this.setCursor(this.context.eventService.cursor);\n  };\n\n  private onClick = (nativeEvent: InteractivePointerEvent) => {\n    const canvas =\n      this.context.renderingContext.root?.ownerDocument?.defaultView;\n\n    const normalizedEvents = this.normalizeToPointerEvent(nativeEvent, canvas);\n\n    for (const normalizedEvent of normalizedEvents) {\n      const event = this.bootstrapEvent(\n        this.rootPointerEvent,\n        normalizedEvent,\n        canvas,\n        nativeEvent,\n      );\n\n      this.context.eventService.mapEvent(event);\n    }\n\n    this.setCursor(this.context.eventService.cursor);\n  };\n\n  private bootstrapEvent(\n    event: FederatedPointerEvent,\n    normalizedEvent: PointerEvent,\n    view: ICanvas,\n    nativeEvent: PointerEvent | MouseEvent | TouchEvent,\n  ): FederatedPointerEvent {\n    event.view = view;\n    event.originalEvent = null;\n    event.nativeEvent = nativeEvent;\n\n    event.pointerId = normalizedEvent.pointerId;\n    event.width = normalizedEvent.width;\n    event.height = normalizedEvent.height;\n    event.isPrimary = normalizedEvent.isPrimary;\n    event.pointerType = normalizedEvent.pointerType;\n    event.pressure = normalizedEvent.pressure;\n    event.tangentialPressure = normalizedEvent.tangentialPressure;\n    event.tiltX = normalizedEvent.tiltX;\n    event.tiltY = normalizedEvent.tiltY;\n    event.twist = normalizedEvent.twist;\n    this.transferMouseData(event, normalizedEvent);\n\n    const { x, y } = this.context.eventService.client2Viewport({\n      x: normalizedEvent.clientX,\n      y: normalizedEvent.clientY,\n    });\n    event.viewport.x = x;\n    event.viewport.y = y;\n    const { x: canvasX, y: canvasY } =\n      this.context.eventService.viewport2Canvas(event.viewport);\n    event.canvas.x = canvasX;\n    event.canvas.y = canvasY;\n    event.global.copyFrom(event.canvas);\n    event.offset.copyFrom(event.canvas);\n\n    event.isTrusted = nativeEvent.isTrusted;\n    if (event.type === 'pointerleave') {\n      event.type = 'pointerout';\n    }\n    if (event.type.startsWith('mouse')) {\n      event.type = event.type.replace('mouse', 'pointer');\n    }\n    if (event.type.startsWith('touch')) {\n      event.type = TOUCH_TO_POINTER[event.type] || event.type;\n    }\n    return event;\n  }\n\n  private normalizeWheelEvent(nativeEvent: WheelEvent): FederatedWheelEvent {\n    const event = this.rootWheelEvent;\n\n    this.transferMouseData(event, nativeEvent);\n\n    event.deltaMode = nativeEvent.deltaMode;\n    event.deltaX = nativeEvent.deltaX;\n    event.deltaY = nativeEvent.deltaY;\n    event.deltaZ = nativeEvent.deltaZ;\n\n    const { x, y } = this.context.eventService.client2Viewport({\n      x: nativeEvent.clientX,\n      y: nativeEvent.clientY,\n    });\n    event.viewport.x = x;\n    event.viewport.y = y;\n    const { x: canvasX, y: canvasY } =\n      this.context.eventService.viewport2Canvas(event.viewport);\n    event.canvas.x = canvasX;\n    event.canvas.y = canvasY;\n    event.global.copyFrom(event.canvas);\n    event.offset.copyFrom(event.canvas);\n\n    event.nativeEvent = nativeEvent;\n    event.type = nativeEvent.type;\n\n    return event;\n  }\n\n  /**\n   * Transfers base & mouse event data from the nativeEvent to the federated event.\n   */\n  private transferMouseData(\n    event: FederatedMouseEvent,\n    nativeEvent: MouseEvent,\n  ): void {\n    event.isTrusted = nativeEvent.isTrusted;\n    event.srcElement = nativeEvent.srcElement as IEventTarget;\n    event.timeStamp = clock.now();\n    event.type = nativeEvent.type;\n\n    event.altKey = nativeEvent.altKey;\n    event.metaKey = nativeEvent.metaKey;\n    event.shiftKey = nativeEvent.shiftKey;\n    event.ctrlKey = nativeEvent.ctrlKey;\n    event.button = nativeEvent.button;\n    event.buttons = nativeEvent.buttons;\n    event.client.x = nativeEvent.clientX;\n    event.client.y = nativeEvent.clientY;\n    event.movement.x = nativeEvent.movementX;\n    event.movement.y = nativeEvent.movementY;\n    event.page.x = nativeEvent.pageX;\n    event.page.y = nativeEvent.pageY;\n    event.screen.x = nativeEvent.screenX;\n    event.screen.y = nativeEvent.screenY;\n    event.relatedTarget = null;\n  }\n\n  private setCursor(cursor: Cursor | null) {\n    this.context.contextService.applyCursorStyle(\n      cursor || this.context.config.cursor || 'default',\n    );\n  }\n\n  private normalizeToPointerEvent(\n    event: InteractivePointerEvent,\n    canvas: ICanvas,\n  ): PointerEvent[] {\n    const normalizedEvents = [];\n    if (canvas.isTouchEvent(event)) {\n      for (let i = 0; i < event.changedTouches.length; i++) {\n        const touch = event.changedTouches[i] as FormattedTouch;\n\n        // use changedTouches instead of touches since touchend has no touches\n        // @see https://stackoverflow.com/a/10079076\n        if (isUndefined(touch.button)) touch.button = 0;\n        if (isUndefined(touch.buttons)) touch.buttons = 1;\n        if (isUndefined(touch.isPrimary)) {\n          touch.isPrimary =\n            event.touches.length === 1 && event.type === 'touchstart';\n        }\n        if (isUndefined(touch.width)) touch.width = touch.radiusX || 1;\n        if (isUndefined(touch.height)) touch.height = touch.radiusY || 1;\n        if (isUndefined(touch.tiltX)) touch.tiltX = 0;\n        if (isUndefined(touch.tiltY)) touch.tiltY = 0;\n        if (isUndefined(touch.pointerType)) touch.pointerType = 'touch';\n        // @see https://developer.mozilla.org/zh-CN/docs/Web/API/Touch/identifier\n        if (isUndefined(touch.pointerId))\n          touch.pointerId = touch.identifier || 0;\n        if (isUndefined(touch.pressure)) touch.pressure = touch.force || 0.5;\n        if (isUndefined(touch.twist)) touch.twist = 0;\n        if (isUndefined(touch.tangentialPressure)) touch.tangentialPressure = 0;\n        touch.isNormalized = true;\n        touch.type = event.type;\n\n        normalizedEvents.push(touch);\n      }\n    } else if (canvas.isMouseEvent(event)) {\n      const tempEvent = event as FormattedPointerEvent;\n      if (isUndefined(tempEvent.isPrimary)) tempEvent.isPrimary = true;\n      if (isUndefined(tempEvent.width)) tempEvent.width = 1;\n      if (isUndefined(tempEvent.height)) tempEvent.height = 1;\n      if (isUndefined(tempEvent.tiltX)) tempEvent.tiltX = 0;\n      if (isUndefined(tempEvent.tiltY)) tempEvent.tiltY = 0;\n      if (isUndefined(tempEvent.pointerType)) tempEvent.pointerType = 'mouse';\n      if (isUndefined(tempEvent.pointerId))\n        tempEvent.pointerId = MOUSE_POINTER_ID;\n      if (isUndefined(tempEvent.pressure)) tempEvent.pressure = 0.5;\n      if (isUndefined(tempEvent.twist)) tempEvent.twist = 0;\n      if (isUndefined(tempEvent.tangentialPressure))\n        tempEvent.tangentialPressure = 0;\n      tempEvent.isNormalized = true;\n\n      normalizedEvents.push(tempEvent);\n    } else {\n      normalizedEvents.push(event);\n    }\n\n    return normalizedEvents as PointerEvent[];\n  }\n}\n", "import { vec3 } from 'gl-matrix';\nimport type { ICamera } from '../camera';\nimport type { DisplayObject } from '../display-objects/DisplayObject';\nimport type { Element } from '../dom';\nimport type { Plane } from '../shapes';\nimport { AABB, Mask } from '../shapes';\nimport { Shape } from '../types';\nimport type { CullingStrategyContribution } from './CullingPlugin';\n\n// group is not a 2d shape\nconst shape2D = [\n  Shape.CIRCLE,\n  Shape.ELLIPSE,\n  Shape.IMAGE,\n  Shape.RECT,\n  Shape.LINE,\n  Shape.POLYLINE,\n  Shape.POLYGON,\n  Shape.TEXT,\n  Shape.PATH,\n  Shape.HTML,\n];\n\nexport class FrustumCullingStrategy implements CullingStrategyContribution {\n  isVisible(camera: ICamera, object: DisplayObject) {\n    // return true;\n\n    const { cullable } = object;\n    if (!cullable.enable) {\n      return true;\n    }\n\n    const renderBounds = object.getRenderBounds();\n\n    if (AABB.isEmpty(renderBounds)) {\n      return false;\n    }\n\n    // get VP matrix from camera\n    const frustum = camera.getFrustum();\n\n    const parentVisibilityPlaneMask = (object.parentNode as Element)?.cullable\n      ?.visibilityPlaneMask;\n    cullable.visibilityPlaneMask = this.computeVisibilityWithPlaneMask(\n      object,\n      renderBounds,\n      parentVisibilityPlaneMask || Mask.INDETERMINATE,\n      frustum.planes,\n    );\n\n    cullable.visible = cullable.visibilityPlaneMask !== Mask.OUTSIDE;\n\n    return cullable.visible;\n  }\n\n  /**\n   *\n   * @seeOptimized View Frustum Culling Algorithms for Bounding Boxes\n   * @see https://github.com/antvis/GWebGPUEngine/issues/3\n   *\n   * *  the basic intersection test\n   * *  masking @see https://cesium.com/blog/2015/08/04/fast-hierarchical-culling/\n   * * TODO:  the plane-coherency test\n   * * TODO:  mesh  Babylon.js @see https://doc.babylonjs.com/how_to/optimizing_your_scene#changing-mesh-culling-strategy\n   *\n   * @param aabb aabb\n   * @param parentPlaneMask mask of parent\n   * @param planes planes of frustum\n   */\n  private computeVisibilityWithPlaneMask(\n    object: DisplayObject,\n    aabb: AABB,\n    parentPlaneMask: Mask,\n    planes: Plane[],\n  ) {\n    if (parentPlaneMask === Mask.OUTSIDE || parentPlaneMask === Mask.INSIDE) {\n      // \n      return parentPlaneMask;\n    }\n\n    // Start with MASK_INSIDE (all zeros) so that after the loop, the return value can be compared with MASK_INSIDE.\n    // (Because if there are fewer than 31 planes, the upper bits wont be changed.)\n    let mask = Mask.INSIDE;\n\n    const isShape2D = shape2D.indexOf(object.nodeName as Shape) > -1;\n\n    // Use viewport culling for 2D shapes\n    // @see https://github.com/antvis/g/issues/914\n    for (let k = 0, len = planes.length; k < len; ++k) {\n      // For k greater than 31 (since 31 is the maximum number of INSIDE/INTERSECTING bits we can store), skip the optimization.\n      const flag = 1 << k;\n\n      if ((parentPlaneMask & flag) === 0) {\n        // \n        continue;\n      }\n\n      // skip near & far planes when testing 2D shapes\n      if (isShape2D && (k === 4 || k === 5)) {\n        continue;\n      }\n\n      // p-vertex n-vertex <-|plane p-vertex n-vertex\n      //  p-vertex  n-vertex  aabb \n      const { normal, distance } = planes[k];\n      if (\n        vec3.dot(normal, aabb.getPositiveFarPoint(planes[k])) + distance <\n        0\n      ) {\n        return Mask.OUTSIDE;\n      }\n      if (\n        vec3.dot(normal, aabb.getNegativeFarPoint(planes[k])) + distance <\n        0\n      ) {\n        // 1\n        mask |= flag;\n      }\n    }\n\n    return mask;\n  }\n}\n", "import type RBush from 'rbush';\nimport { runtime } from '../global-runtime';\nimport type { RBushNodeAABB } from '../components';\nimport { DisplayObject } from '../display-objects';\nimport type { FederatedEvent } from '../dom';\nimport { ElementEvent } from '../dom';\nimport type { RenderingPlugin, RenderingPluginContext } from '../services';\nimport { raf } from '../utils';\nimport { AABB } from '../shapes';\n\nexport class PrepareRendererPlugin implements RenderingPlugin {\n  static tag = 'Prepare';\n  private rBush: RBush<RBushNodeAABB>;\n\n  private syncTasks = new Map<DisplayObject, boolean>();\n  private ricSyncRTreeId: number;\n  private isFirstTimeRendering = true;\n  private syncing = false;\n\n  isFirstTimeRenderingFinished = false;\n\n  apply(context: RenderingPluginContext) {\n    const { config, renderingService, renderingContext, rBushRoot } = context;\n    const canvas = renderingContext.root.ownerDocument.defaultView;\n\n    this.rBush = rBushRoot;\n\n    const handleAttributeChanged = (e: FederatedEvent) => {\n      renderingService.dirtify();\n    };\n\n    const handleBoundsChanged = (e: FederatedEvent) => {\n      this.syncTasks.set(e.target as DisplayObject, e.detail.affectChildren);\n\n      renderingService.dirtify();\n    };\n\n    const handleMounted = (e: FederatedEvent) => {\n      const object = e.target as DisplayObject;\n\n      if (runtime.enableSizeAttenuation) {\n        runtime.styleValueRegistry.updateSizeAttenuation(\n          object,\n          canvas.getCamera().getZoom(),\n        );\n      }\n    };\n\n    const handleUnmounted = (e: FederatedEvent) => {\n      const object = e.target as DisplayObject;\n      const { rBushNode } = object;\n\n      if (rBushNode?.aabb) {\n        this.rBush.remove(rBushNode.aabb);\n      }\n\n      this.syncTasks.delete(object);\n\n      runtime.sceneGraphService.dirtyToRoot(object);\n      renderingService.dirtify();\n    };\n\n    renderingService.hooks.init.tap(PrepareRendererPlugin.tag, () => {\n      canvas.addEventListener(ElementEvent.MOUNTED, handleMounted);\n      canvas.addEventListener(ElementEvent.UNMOUNTED, handleUnmounted);\n      canvas.addEventListener(\n        ElementEvent.ATTR_MODIFIED,\n        handleAttributeChanged,\n      );\n      canvas.addEventListener(ElementEvent.BOUNDS_CHANGED, handleBoundsChanged);\n    });\n\n    renderingService.hooks.destroy.tap(PrepareRendererPlugin.tag, () => {\n      canvas.removeEventListener(ElementEvent.MOUNTED, handleMounted);\n      canvas.removeEventListener(ElementEvent.UNMOUNTED, handleUnmounted);\n      canvas.removeEventListener(\n        ElementEvent.ATTR_MODIFIED,\n        handleAttributeChanged,\n      );\n      canvas.removeEventListener(\n        ElementEvent.BOUNDS_CHANGED,\n        handleBoundsChanged,\n      );\n      this.syncTasks.clear();\n    });\n\n    const ric =\n      runtime.globalThis.requestIdleCallback ?? raf.bind(runtime.globalThis);\n    const enableRICSyncRTree = config.future?.experimentalRICSyncRTree === true;\n\n    renderingService.hooks.endFrame.tap(PrepareRendererPlugin.tag, () => {\n      if (this.isFirstTimeRendering) {\n        this.isFirstTimeRendering = false;\n        this.syncing = true;\n        ric(() => {\n          this.syncRTree(true);\n          this.isFirstTimeRenderingFinished = true;\n        });\n      } else if (\n        enableRICSyncRTree &&\n        runtime.globalThis.requestIdleCallback &&\n        runtime.globalThis.cancelIdleCallback\n      ) {\n        runtime.globalThis.cancelIdleCallback(this.ricSyncRTreeId);\n        this.ricSyncRTreeId = runtime.globalThis.requestIdleCallback(() =>\n          this.syncRTree(),\n        );\n      } else {\n        this.syncRTree();\n      }\n    });\n  }\n\n  private syncNode(node: DisplayObject, force = false) {\n    if (!node.isConnected) return;\n\n    const rBushNode = node.rBushNode;\n\n    // clear dirty node\n    if (rBushNode.aabb) this.rBush.remove(rBushNode.aabb);\n\n    const renderBounds = node.getRenderBounds();\n    if (renderBounds) {\n      const renderable = node.renderable;\n\n      if (force) {\n        if (!renderable.dirtyRenderBounds) {\n          renderable.dirtyRenderBounds = new AABB();\n        }\n        // save last dirty aabb\n        renderable.dirtyRenderBounds.update(\n          renderBounds.center,\n          renderBounds.halfExtents,\n        );\n      }\n\n      const [minX, minY] = renderBounds.getMin();\n      const [maxX, maxY] = renderBounds.getMax();\n\n      if (!rBushNode.aabb) {\n        rBushNode.aabb = {} as RBushNodeAABB;\n      }\n      rBushNode.aabb.displayObject = node;\n      rBushNode.aabb.minX = minX;\n      rBushNode.aabb.minY = minY;\n      rBushNode.aabb.maxX = maxX;\n      rBushNode.aabb.maxY = maxY;\n    }\n\n    if (rBushNode.aabb) {\n      // TODO: NaN occurs when width/height of Rect is 0\n      if (\n        !isNaN(rBushNode.aabb.maxX) &&\n        !isNaN(rBushNode.aabb.maxX) &&\n        !isNaN(rBushNode.aabb.minX) &&\n        !isNaN(rBushNode.aabb.minY)\n      ) {\n        return rBushNode.aabb;\n      }\n    }\n  }\n\n  private syncRTree(force = false) {\n    if (!force && (this.syncing || this.syncTasks.size === 0)) {\n      return;\n    }\n\n    this.syncing = true;\n\n    // bounds changed, need re-inserting its children\n    const bulk: RBushNodeAABB[] = [];\n    const synced = new Set<DisplayObject>();\n\n    const sync = (node: DisplayObject) => {\n      if (!synced.has(node) && node.renderable) {\n        const aabb = this.syncNode(node, force);\n        if (aabb) {\n          bulk.push(aabb);\n          synced.add(node);\n        }\n      }\n    };\n\n    this.syncTasks.forEach((affectChildren, node) => {\n      if (affectChildren) {\n        node.forEach(sync);\n      }\n\n      let parent = node;\n      while (parent) {\n        sync(parent);\n        parent = parent.parentElement as DisplayObject;\n      }\n    });\n\n    // use bulk inserting, which is ~2-3 times faster\n    // @see https://github.com/mourner/rbush#bulk-inserting-data\n    this.rBush.load(bulk);\n\n    bulk.length = 0;\n    this.syncing = false;\n  }\n}\n", "// eslint-disable-next-line import/extensions\nimport RBush from 'rbush/rbush.js';\nimport type { IRenderer } from './AbstractRenderer';\nimport {\n  CameraEvent,\n  CameraProjectionMode,\n  CameraTrackingMode,\n  CameraType,\n} from './camera';\nimport type { RBushNodeAABB } from './components';\nimport type { CustomElement } from './display-objects';\nimport type { MutationEvent } from './dom/MutationEvent';\nimport {\n  DisplayObject,\n  attrModifiedEvent as attrModifiedEventCache,\n} from './display-objects/DisplayObject';\nimport {\n  insertedEvent as insertedEventCache,\n  removedEvent as removedEventCache,\n  destroyEvent as destroyEventCache,\n} from './dom/Element';\nimport type { CanvasContext, Element, IChildNode } from './dom';\nimport { CustomEvent, Document, ElementEvent, EventTarget } from './dom';\nimport { CustomElementRegistry } from './dom/CustomElementRegistry';\nimport type { ICanvas } from './dom/interfaces';\nimport { runtime } from './global-runtime';\nimport { CullingPlugin } from './plugins/CullingPlugin';\nimport { EventPlugin } from './plugins/EventPlugin';\nimport { FrustumCullingStrategy } from './plugins/FrustumCullingStrategy';\nimport { PrepareRendererPlugin } from './plugins/PrepareRendererPlugin';\nimport { EventService, RenderReason, RenderingService } from './services';\nimport type { PointLike } from './shapes';\nimport {\n  type CanvasConfig,\n  type ClipSpaceNearZ,\n  type Cursor,\n  type InteractivePointerEvent,\n} from './types';\nimport {\n  caf,\n  cleanExistedCanvas,\n  getHeight,\n  getWidth,\n  isBrowser,\n  isInFragment,\n  raf,\n  memoize,\n} from './utils';\n\nexport function isCanvas(value: any): value is Canvas {\n  return !!(value as Canvas).document;\n}\n\nexport enum CanvasEvent {\n  READY = 'ready',\n  BEFORE_RENDER = 'beforerender',\n  RERENDER = 'rerender',\n  AFTER_RENDER = 'afterrender',\n  BEFORE_DESTROY = 'beforedestroy',\n  AFTER_DESTROY = 'afterdestroy',\n  RESIZE = 'resize',\n  DIRTY_RECTANGLE = 'dirtyrectangle',\n  RENDERER_CHANGED = 'rendererchanged',\n}\n\nconst DEFAULT_CAMERA_Z = 500;\nconst DEFAULT_CAMERA_NEAR = 0.1;\nconst DEFAULT_CAMERA_FAR = 1000;\n\n/**\n * reuse custom event preventing from re-create them in every frame\n */\nconst mountedEvent = new CustomEvent(ElementEvent.MOUNTED);\nconst unmountedEvent = new CustomEvent(ElementEvent.UNMOUNTED);\nconst beforeRenderEvent = new CustomEvent(CanvasEvent.BEFORE_RENDER);\nconst rerenderEvent = new CustomEvent(CanvasEvent.RERENDER);\nconst afterRenderEvent = new CustomEvent(CanvasEvent.AFTER_RENDER);\n\n/**\n * can be treated like Window in DOM\n * provide some extra methods like `window`, such as:\n * * `window.requestAnimationFrame`\n * * `window.devicePixelRatio`\n *\n * prototype chains: Canvas(Window) -> EventTarget\n *\n * @docs https://g.antv.antgroup.com/api/canvas/intro\n */\nexport class Canvas extends EventTarget implements ICanvas {\n  // #region environment\n  customElements: ICanvas['customElements'];\n  devicePixelRatio: ICanvas['devicePixelRatio'];\n  requestAnimationFrame: ICanvas['requestAnimationFrame'];\n  cancelAnimationFrame: ICanvas['cancelAnimationFrame'];\n  createImage: ICanvas['createImage'];\n  supportsTouchEvents: ICanvas['supportsTouchEvents'];\n  supportsPointerEvents: ICanvas['supportsPointerEvents'];\n  isTouchEvent: ICanvas['isTouchEvent'];\n  isMouseEvent: ICanvas['isMouseEvent'];\n\n  /**\n   * window.document\n   */\n  document: Document;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Element\n   */\n  Element = DisplayObject;\n  // #endregion environment\n\n  /**\n   * rAF in auto rendering\n   */\n  private frameId?: number;\n\n  private inited = false;\n  private readyPromise: Promise<any> | undefined;\n  private resolveReadyPromise: () => void;\n\n  context = {} as CanvasContext;\n\n  constructor(config: CanvasConfig) {\n    super();\n\n    const {\n      container,\n      canvas,\n      renderer,\n      width,\n      height,\n      background,\n      cursor,\n      supportsMutipleCanvasesInOneContainer,\n      cleanUpOnDestroy = true,\n      offscreenCanvas,\n      devicePixelRatio,\n      requestAnimationFrame,\n      cancelAnimationFrame,\n      createImage,\n      supportsTouchEvents,\n      supportsPointerEvents,\n      isTouchEvent,\n      isMouseEvent,\n      dblClickSpeed,\n    } = config;\n    let canvasWidth = width;\n    let canvasHeight = height;\n    let dpr = devicePixelRatio || (isBrowser && window.devicePixelRatio) || 1;\n    dpr = dpr >= 1 ? Math.ceil(dpr) : 1;\n\n    // use user-defined <canvas> or OffscreenCanvas\n    if (canvas) {\n      // infer width & height with dpr\n      canvasWidth = width || getWidth(canvas) || canvas.width / dpr;\n      canvasHeight = height || getHeight(canvas) || canvas.height / dpr;\n    }\n\n    /**\n     * implements `Window` interface\n     */\n    this.customElements = new CustomElementRegistry();\n    this.devicePixelRatio = dpr;\n    this.requestAnimationFrame =\n      requestAnimationFrame ?? (raf.bind(runtime.globalThis) as typeof raf);\n    this.cancelAnimationFrame =\n      cancelAnimationFrame ?? (caf.bind(runtime.globalThis) as typeof caf);\n    this.createImage = createImage ?? (() => new window.Image());\n    // the following feature-detect from hammer.js\n    // @see https://github.com/hammerjs/hammer.js/blob/master/src/inputjs/input-consts.js#L5\n    this.supportsTouchEvents =\n      supportsTouchEvents ?? 'ontouchstart' in runtime.globalThis;\n    this.supportsPointerEvents =\n      supportsPointerEvents ?? !!runtime.globalThis.PointerEvent;\n    this.isTouchEvent =\n      isTouchEvent ??\n      ((event: InteractivePointerEvent): event is TouchEvent =>\n        this.supportsTouchEvents &&\n        event instanceof runtime.globalThis.TouchEvent);\n    this.isMouseEvent =\n      isMouseEvent ??\n      ((event: InteractivePointerEvent): event is MouseEvent =>\n        !runtime.globalThis.MouseEvent ||\n        (event instanceof runtime.globalThis.MouseEvent &&\n          (!this.supportsPointerEvents ||\n            !(event instanceof runtime.globalThis.PointerEvent))));\n\n    // override it in runtime\n    if (offscreenCanvas) {\n      runtime.offscreenCanvas = offscreenCanvas;\n    }\n\n    // create document\n    this.document = new Document();\n    this.document.defaultView = this;\n\n    if (!supportsMutipleCanvasesInOneContainer) {\n      cleanExistedCanvas(container, this, cleanUpOnDestroy);\n    }\n\n    this.initRenderingContext({\n      ...config,\n      width: canvasWidth,\n      height: canvasHeight,\n      background: background ?? 'transparent',\n      cursor: cursor ?? ('default' as Cursor),\n      cleanUpOnDestroy,\n      devicePixelRatio: dpr,\n      requestAnimationFrame: this.requestAnimationFrame,\n      cancelAnimationFrame: this.cancelAnimationFrame,\n      createImage: this.createImage,\n      supportsTouchEvents: this.supportsTouchEvents,\n      supportsPointerEvents: this.supportsPointerEvents,\n      isTouchEvent: this.isTouchEvent,\n      isMouseEvent: this.isMouseEvent,\n      dblClickSpeed: dblClickSpeed ?? 200,\n    });\n\n    this.initDefaultCamera(canvasWidth, canvasHeight, renderer.clipSpaceNearZ);\n\n    this.initRenderer(renderer, true);\n  }\n\n  private initRenderingContext(mergedConfig: CanvasConfig) {\n    this.context.config = mergedConfig;\n\n    // bind rendering context, shared by all renderers\n    this.context.renderingContext = {\n      /**\n       * the root node in scene graph\n       */\n      root: this.document.documentElement,\n\n      unculledEntities: [],\n\n      renderListCurrentFrame: [],\n\n      renderReasons: new Set(),\n\n      force: false,\n      dirty: false,\n    };\n  }\n\n  private initDefaultCamera(\n    width: number,\n    height: number,\n    clipSpaceNearZ: ClipSpaceNearZ,\n  ) {\n    // set a default ortho camera\n    const camera = new runtime.CameraContribution();\n    camera.clipSpaceNearZ = clipSpaceNearZ;\n\n    camera\n      .setType(CameraType.EXPLORING, CameraTrackingMode.DEFAULT)\n      .setPosition(width / 2, height / 2, DEFAULT_CAMERA_Z)\n      .setFocalPoint(width / 2, height / 2, 0)\n      .setOrthographic(\n        width / -2,\n        width / 2,\n        height / 2,\n        height / -2,\n        DEFAULT_CAMERA_NEAR,\n        DEFAULT_CAMERA_FAR,\n      );\n\n    // keep ref since it will use raf in camera animation\n    camera.canvas = this;\n\n    // redraw when camera changed\n    camera.eventEmitter.on(CameraEvent.UPDATED, () => {\n      this.context.renderingContext.renderReasons.add(\n        RenderReason.CAMERA_CHANGED,\n      );\n\n      if (\n        runtime.enableSizeAttenuation &&\n        this.getConfig().renderer.getConfig().enableSizeAttenuation\n      ) {\n        this.updateSizeAttenuation();\n      }\n    });\n\n    // bind camera\n    this.context.camera = camera;\n  }\n\n  private updateSizeAttenuation() {\n    const zoom = this.getCamera().getZoom();\n    this.document.documentElement.forEach((node: DisplayObject) => {\n      runtime.styleValueRegistry.updateSizeAttenuation(node, zoom);\n    });\n  }\n\n  getConfig() {\n    return this.context.config;\n  }\n\n  /**\n   * get the root displayObject in scenegraph\n   * @alias this.document.documentElement\n   */\n  getRoot() {\n    return this.document.documentElement;\n  }\n\n  /**\n   * get the camera of canvas\n   */\n  getCamera() {\n    return this.context.camera;\n  }\n\n  getContextService() {\n    return this.context.contextService;\n  }\n\n  getEventService() {\n    return this.context.eventService;\n  }\n\n  getRenderingService() {\n    return this.context.renderingService;\n  }\n\n  getRenderingContext() {\n    return this.context.renderingContext;\n  }\n\n  getStats() {\n    return this.getRenderingService().getStats();\n  }\n\n  // /**\n  //  * @see https://developer.mozilla.org/zh-CN/docs/Web/API/Window/getComputedStyle\n  //  */\n  // getComputedStyle(node: DisplayObject) {\n  //   return node.computedStyle;\n  // }\n\n  get ready() {\n    if (!this.readyPromise) {\n      this.readyPromise = new Promise((resolve) => {\n        this.resolveReadyPromise = () => {\n          resolve(this);\n        };\n      });\n      if (this.inited) {\n        this.resolveReadyPromise();\n      }\n    }\n    return this.readyPromise;\n  }\n\n  /**\n   * @param cleanUp - whether to clean up all the internal services of Canvas\n   * @param skipTriggerEvent - whether to skip trigger destroy event\n   */\n  destroy(cleanUp = true, skipTriggerEvent?: boolean) {\n    memoize.clearCache();\n\n    const enableCancelEventPropagation =\n      this.getConfig().future?.experimentalCancelEventPropagation === true;\n\n    if (!skipTriggerEvent) {\n      this.dispatchEvent(\n        new CustomEvent(CanvasEvent.BEFORE_DESTROY),\n        enableCancelEventPropagation,\n        enableCancelEventPropagation,\n      );\n    }\n    if (this.frameId) {\n      this.cancelAnimationFrame(this.frameId);\n    }\n\n    // unmount all children\n    const root = this.getRoot();\n\n    if (cleanUp) {\n      this.unmountChildren(root);\n      // destroy Document\n      this.document.destroy();\n      this.getEventService().destroy();\n    }\n\n    // destroy services\n    this.getRenderingService().destroy();\n    this.getContextService().destroy();\n\n    // clear root after render service destroyed\n    if (this.context.rBushRoot) {\n      // clear rbush\n      this.context.rBushRoot.clear();\n    }\n\n    if (!skipTriggerEvent) {\n      this.dispatchEvent(\n        new CustomEvent(CanvasEvent.AFTER_DESTROY),\n        enableCancelEventPropagation,\n        enableCancelEventPropagation,\n      );\n    }\n\n    const clearEventRetain = (event: CustomEvent | MutationEvent) => {\n      event.currentTarget = null;\n      event.manager = null;\n      event.target = null;\n      (event as MutationEvent).relatedNode = null;\n    };\n\n    clearEventRetain(mountedEvent);\n    clearEventRetain(unmountedEvent);\n    clearEventRetain(beforeRenderEvent);\n    clearEventRetain(rerenderEvent);\n    clearEventRetain(afterRenderEvent);\n    clearEventRetain(attrModifiedEventCache);\n    clearEventRetain(insertedEventCache);\n    clearEventRetain(removedEventCache);\n    clearEventRetain(destroyEventCache);\n    runtime.textService.clearCache();\n  }\n\n  /**\n   * compatible with G 3.0\n   * @deprecated\n   * @alias resize\n   */\n  changeSize(width: number, height: number) {\n    this.resize(width, height);\n  }\n  resize(width: number, height: number) {\n    // update canvas' config\n    const canvasConfig = this.context.config;\n    canvasConfig.width = width;\n    canvasConfig.height = height;\n\n    // resize context\n    this.getContextService().resize(width, height);\n\n    // resize camera\n    const { camera } = this.context;\n    const projectionMode = camera.getProjectionMode();\n    camera\n      .setPosition(width / 2, height / 2, DEFAULT_CAMERA_Z)\n      .setFocalPoint(width / 2, height / 2, 0);\n    if (projectionMode === CameraProjectionMode.ORTHOGRAPHIC) {\n      camera.setOrthographic(\n        width / -2,\n        width / 2,\n        height / 2,\n        height / -2,\n        camera.getNear(),\n        camera.getFar(),\n      );\n    } else {\n      camera.setAspect(width / height);\n    }\n\n    const enableCancelEventPropagation =\n      canvasConfig.future?.experimentalCancelEventPropagation === true;\n\n    this.dispatchEvent(\n      new CustomEvent(CanvasEvent.RESIZE, { width, height }),\n      enableCancelEventPropagation,\n      enableCancelEventPropagation,\n    );\n  }\n\n  // proxy to document.documentElement\n  appendChild<T extends IChildNode>(child: T, index?: number): T {\n    return this.document.documentElement.appendChild(child, index);\n  }\n  insertBefore<T extends IChildNode, N extends IChildNode>(\n    newChild: T,\n    refChild: N | null,\n  ): T {\n    return this.document.documentElement.insertBefore(newChild, refChild);\n  }\n  removeChild<T extends IChildNode>(child: T): T {\n    return this.document.documentElement.removeChild(child);\n  }\n\n  /**\n   * Remove all children which can be appended to its original parent later again.\n   */\n  removeChildren() {\n    this.document.documentElement.removeChildren();\n  }\n\n  /**\n   * Recursively destroy all children which can not be appended to its original parent later again.\n   * But the canvas remains running which means display objects can be appended later.\n   */\n  destroyChildren() {\n    this.document.documentElement.destroyChildren();\n  }\n\n  render(frame?: XRFrame) {\n    // console.log('render ----------------------');\n    if (frame) {\n      beforeRenderEvent.detail = frame;\n      afterRenderEvent.detail = frame;\n    }\n\n    const enableCancelEventPropagation =\n      this.getConfig().future?.experimentalCancelEventPropagation === true;\n\n    this.dispatchEvent(\n      beforeRenderEvent,\n      enableCancelEventPropagation,\n      enableCancelEventPropagation,\n    );\n\n    const renderingService = this.getRenderingService();\n    renderingService.render(this.getConfig(), frame, () => {\n      // trigger actual rerender event\n      // @see https://github.com/antvis/G/issues/1268\n      this.dispatchEvent(\n        rerenderEvent,\n        enableCancelEventPropagation,\n        enableCancelEventPropagation,\n      );\n    });\n\n    this.dispatchEvent(\n      afterRenderEvent,\n      enableCancelEventPropagation,\n      enableCancelEventPropagation,\n    );\n  }\n\n  private run() {\n    const tick = (time: number, frame?: XRFrame) => {\n      this.render(frame);\n      this.frameId = this.requestAnimationFrame(tick);\n    };\n    tick(0);\n  }\n\n  private initRenderer(renderer: IRenderer, firstContentfullPaint = false) {\n    if (!renderer) {\n      throw new Error('Renderer is required.');\n    }\n\n    // reset\n    this.inited = false;\n    this.readyPromise = undefined;\n\n    // FIXME: should re-create here?\n    this.context.rBushRoot = new RBush<RBushNodeAABB>();\n\n    // reset rendering plugins\n    this.context.renderingPlugins = [];\n    this.context.renderingPlugins.push(\n      new EventPlugin(),\n      new PrepareRendererPlugin(),\n      // new DirtyCheckPlugin(),\n      new CullingPlugin([new FrustumCullingStrategy()]),\n    );\n\n    //\n    this.loadRendererContainerModule(renderer);\n\n    // init context service\n    this.context.contextService = new this.context.ContextService({\n      ...runtime,\n      ...this.context,\n    });\n\n    // init rendering service\n    this.context.renderingService = new RenderingService(runtime, this.context);\n\n    // init event service\n    this.context.eventService = new EventService(runtime, this.context);\n    this.context.eventService.init();\n\n    if (this.context.contextService.init) {\n      this.context.contextService.init();\n      this.initRenderingService(renderer, firstContentfullPaint, true);\n    } else {\n      this.context.contextService\n        .initAsync()\n        .then(() => {\n          this.initRenderingService(renderer, firstContentfullPaint);\n        })\n        .catch((err) => {\n          console.error(err);\n        });\n    }\n  }\n\n  private initRenderingService(\n    renderer: IRenderer,\n    firstContentfullPaint = false,\n    async = false,\n  ) {\n    this.context.renderingService.init(() => {\n      this.inited = true;\n\n      const enableCancelEventPropagation =\n        this.getConfig().future?.experimentalCancelEventPropagation === true;\n\n      if (firstContentfullPaint) {\n        if (async) {\n          this.requestAnimationFrame(() => {\n            this.dispatchEvent(\n              new CustomEvent(CanvasEvent.READY),\n              enableCancelEventPropagation,\n              enableCancelEventPropagation,\n            );\n          });\n        } else {\n          this.dispatchEvent(\n            new CustomEvent(CanvasEvent.READY),\n            enableCancelEventPropagation,\n            enableCancelEventPropagation,\n          );\n        }\n      } else {\n        this.dispatchEvent(\n          new CustomEvent(CanvasEvent.RENDERER_CHANGED),\n          enableCancelEventPropagation,\n          enableCancelEventPropagation,\n        );\n      }\n\n      if (this.readyPromise) {\n        this.resolveReadyPromise();\n      }\n\n      if (!firstContentfullPaint) {\n        this.getRoot().forEach((node) => {\n          (node as Element).dirty?.(true, true);\n        });\n      }\n\n      // keep current scenegraph unchanged, just trigger mounted event\n      this.mountChildren(this.getRoot());\n\n      if (renderer.getConfig().enableAutoRendering) {\n        this.run();\n      }\n    });\n  }\n\n  private loadRendererContainerModule(renderer: IRenderer) {\n    // load other container modules provided by g-canvas/g-svg/g-webgl\n    const plugins = renderer.getPlugins();\n    plugins.forEach((plugin) => {\n      plugin.context = this.context;\n      plugin.init(runtime);\n    });\n  }\n\n  setRenderer(renderer: IRenderer) {\n    // update canvas' config\n    const canvasConfig = this.getConfig();\n    if (canvasConfig.renderer === renderer) {\n      return;\n    }\n\n    const oldRenderer = canvasConfig.renderer;\n    canvasConfig.renderer = renderer;\n\n    // keep all children undestroyed\n    this.destroy(false, true);\n\n    // destroy all plugins, reverse will mutate origin array\n    [...(oldRenderer?.getPlugins() || [])].reverse().forEach((plugin) => {\n      plugin.destroy(runtime);\n    });\n\n    this.initRenderer(renderer);\n  }\n\n  setCursor(cursor: Cursor) {\n    const canvasConfig = this.getConfig();\n    canvasConfig.cursor = cursor;\n    this.getContextService().applyCursorStyle(cursor);\n  }\n\n  unmountChildren(parent: DisplayObject) {\n    // unmountChildren recursively\n    parent.childNodes.forEach((child: DisplayObject) => {\n      this.unmountChildren(child);\n    });\n\n    if (this.inited) {\n      if (parent.isMutationObserved) {\n        parent.dispatchEvent(unmountedEvent);\n      } else {\n        const enableCancelEventPropagation =\n          this.getConfig().future?.experimentalCancelEventPropagation === true;\n\n        unmountedEvent.target = parent;\n        this.dispatchEvent(unmountedEvent, true, enableCancelEventPropagation);\n      }\n\n      // skip document.documentElement\n      if (parent !== this.document.documentElement) {\n        parent.ownerDocument = null;\n      }\n      parent.isConnected = false;\n    }\n\n    // trigger after unmounted\n    if (parent.isCustomElement) {\n      if ((parent as CustomElement<any>).disconnectedCallback) {\n        (parent as CustomElement<any>).disconnectedCallback();\n      }\n    }\n  }\n\n  mountChildren(\n    child: DisplayObject,\n    skipTriggerEvent: boolean = isInFragment(child),\n  ) {\n    if (this.inited) {\n      if (!child.isConnected) {\n        child.ownerDocument = this.document;\n        child.isConnected = true;\n\n        if (!skipTriggerEvent) {\n          if (child.isMutationObserved) {\n            child.dispatchEvent(mountedEvent);\n          } else {\n            const enableCancelEventPropagation =\n              this.getConfig().future?.experimentalCancelEventPropagation ===\n              true;\n\n            mountedEvent.target = child;\n            this.dispatchEvent(\n              mountedEvent,\n              true,\n              enableCancelEventPropagation,\n            );\n          }\n        }\n      }\n    } else {\n      console.warn(\n        \"[g]: You are trying to call `canvas.appendChild` before canvas' initialization finished. You can either await `canvas.ready` or listen to `CanvasEvent.READY` manually.\",\n        'appended child: ',\n        child.nodeName,\n      );\n    }\n\n    // recursively mount children\n    child.childNodes.forEach((c: DisplayObject) => {\n      this.mountChildren(c, skipTriggerEvent);\n    });\n\n    // trigger after mounted\n    if (child.isCustomElement) {\n      if ((child as CustomElement<any>).connectedCallback) {\n        (child as CustomElement<any>).connectedCallback();\n      }\n    }\n  }\n\n  mountFragment(child: DisplayObject) {\n    this.mountChildren(child, false);\n  }\n\n  client2Viewport(client: PointLike): PointLike {\n    return this.getEventService().client2Viewport(client);\n  }\n\n  viewport2Client(canvas: PointLike): PointLike {\n    return this.getEventService().viewport2Client(canvas);\n  }\n\n  viewport2Canvas(viewport: PointLike): PointLike {\n    return this.getEventService().viewport2Canvas(viewport);\n  }\n\n  canvas2Viewport(canvas: PointLike): PointLike {\n    return this.getEventService().canvas2Viewport(canvas);\n  }\n\n  /**\n   * @deprecated\n   * @alias client2Viewport\n   */\n  getPointByClient(clientX: number, clientY: number): PointLike {\n    return this.client2Viewport({ x: clientX, y: clientY });\n  }\n\n  /**\n   * @deprecated\n   * @alias viewport2Client\n   */\n  getClientByPoint(x: number, y: number): PointLike {\n    return this.viewport2Client({ x, y });\n  }\n}\n", "import {\n  Camera,\n  CameraType,\n  getAngle,\n  createVec3,\n  deg2rad,\n  runtime,\n} from '@antv/g-lite';\nimport { isString, isNumber } from '@antv/util';\nimport { mat4, quat, vec3 } from 'gl-matrix';\nimport type { vec2 } from 'gl-matrix';\nimport type { TypeEasingFunction, Landmark } from '@antv/g-lite';\n\n/**\n * Provides camera action & animation.\n */\nexport class AdvancedCamera extends Camera {\n  /**\n   * switch between multiple landmarks\n   */\n  private landmarks: Landmark[] = [];\n  private landmarkAnimationID: number | undefined;\n\n  /**\n   * Changes the azimuth and elevation with respect to the current camera axes\n   * @param {Number} azimuth the relative azimuth\n   * @param {Number} elevation the relative elevation\n   * @param {Number} roll the relative roll\n   */\n  rotate(azimuth: number, elevation: number, roll: number) {\n    this.relElevation = getAngle(elevation);\n    this.relAzimuth = getAngle(azimuth);\n    this.relRoll = getAngle(roll);\n    this.elevation += this.relElevation;\n    this.azimuth += this.relAzimuth;\n    this.roll += this.relRoll;\n\n    if (this.type === CameraType.EXPLORING) {\n      const rotX = quat.setAxisAngle(\n        quat.create(),\n        [1, 0, 0],\n        deg2rad((this.rotateWorld ? 1 : -1) * this.relElevation),\n      );\n      const rotY = quat.setAxisAngle(\n        quat.create(),\n        [0, 1, 0],\n        deg2rad((this.rotateWorld ? 1 : -1) * this.relAzimuth),\n      );\n\n      const rotZ = quat.setAxisAngle(\n        quat.create(),\n        [0, 0, 1],\n        deg2rad(this.relRoll),\n      );\n      let rotQ = quat.multiply(quat.create(), rotY, rotX);\n      rotQ = quat.multiply(quat.create(), rotQ, rotZ);\n      const rotMatrix = mat4.fromQuat(mat4.create(), rotQ);\n      mat4.translate(this.matrix, this.matrix, [0, 0, -this.distance]);\n      mat4.multiply(this.matrix, this.matrix, rotMatrix);\n      mat4.translate(this.matrix, this.matrix, [0, 0, this.distance]);\n    } else {\n      if (Math.abs(this.elevation) > 90) {\n        return this;\n      }\n      this.computeMatrix();\n    }\n\n    this._getAxes();\n    if (\n      this.type === CameraType.ORBITING ||\n      this.type === CameraType.EXPLORING\n    ) {\n      this._getPosition();\n    } else if (this.type === CameraType.TRACKING) {\n      this._getFocalPoint();\n    }\n\n    this._update();\n    return this;\n  }\n\n  /**\n   * (right) & (up)\n   */\n  pan(tx: number, ty: number) {\n    const coords = createVec3(tx, ty, 0);\n    const pos = vec3.clone(this.position);\n\n    vec3.add(pos, pos, vec3.scale(vec3.create(), this.right, coords[0]));\n    vec3.add(pos, pos, vec3.scale(vec3.create(), this.up, coords[1]));\n\n    this._setPosition(pos);\n\n    this.triggerUpdate();\n\n    return this;\n  }\n\n  /**\n   *  n \n   */\n  dolly(value: number) {\n    const n = this.forward;\n    const pos = vec3.clone(this.position);\n    let step = value * this.dollyingStep;\n    const updatedDistance = this.distance + value * this.dollyingStep;\n\n    // \n    step =\n      Math.max(Math.min(updatedDistance, this.maxDistance), this.minDistance) -\n      this.distance;\n    pos[0] += step * n[0];\n    pos[1] += step * n[1];\n    pos[2] += step * n[2];\n\n    this._setPosition(pos);\n    if (\n      this.type === CameraType.ORBITING ||\n      this.type === CameraType.EXPLORING\n    ) {\n      // \n      this._getDistance();\n    } else if (this.type === CameraType.TRACKING) {\n      // \n      vec3.add(this.focalPoint, pos, this.distanceVector);\n    }\n\n    this.triggerUpdate();\n    return this;\n  }\n\n  cancelLandmarkAnimation() {\n    if (this.landmarkAnimationID !== undefined) {\n      this.canvas.cancelAnimationFrame(this.landmarkAnimationID);\n    }\n  }\n\n  createLandmark(\n    name: string,\n    params: Partial<{\n      position: vec3 | vec2;\n      focalPoint: vec3 | vec2;\n      zoom: number;\n      roll: number;\n    }> = {},\n  ): Landmark {\n    const {\n      position = this.position,\n      focalPoint = this.focalPoint,\n      roll,\n      zoom,\n    } = params;\n\n    const camera = new runtime.CameraContribution() as AdvancedCamera;\n    camera.setType(this.type, undefined);\n    camera.setPosition(\n      position[0],\n      position[1] ?? this.position[1],\n      position[2] ?? this.position[2],\n    );\n    camera.setFocalPoint(\n      focalPoint[0],\n      focalPoint[1] ?? this.focalPoint[1],\n      focalPoint[2] ?? this.focalPoint[2],\n    );\n    camera.setRoll(roll ?? this.roll);\n    camera.setZoom(zoom ?? this.zoom);\n\n    const landmark: Landmark = {\n      name,\n      matrix: mat4.clone(camera.getWorldTransform()),\n      right: vec3.clone(camera.right),\n      up: vec3.clone(camera.up),\n      forward: vec3.clone(camera.forward),\n      position: vec3.clone(camera.getPosition()),\n      focalPoint: vec3.clone(camera.getFocalPoint()),\n      distanceVector: vec3.clone(camera.getDistanceVector()),\n      distance: camera.getDistance(),\n      dollyingStep: camera.getDollyingStep(),\n      azimuth: camera.getAzimuth(),\n      elevation: camera.getElevation(),\n      roll: camera.getRoll(),\n      relAzimuth: camera.relAzimuth,\n      relElevation: camera.relElevation,\n      relRoll: camera.relRoll,\n      zoom: camera.getZoom(),\n    };\n\n    this.landmarks.push(landmark);\n    return landmark;\n  }\n\n  gotoLandmark(\n    name: string | Landmark,\n    options:\n      | number\n      | Partial<{\n          easing: string;\n          easingFunction: TypeEasingFunction;\n          duration: number;\n          onframe: (t: number) => void;\n          onfinish: () => void;\n        }> = {},\n  ) {\n    const landmark = isString(name)\n      ? this.landmarks.find((l) => l.name === name)\n      : name;\n    if (landmark) {\n      const {\n        easing = 'linear',\n        duration = 100,\n        easingFunction = undefined,\n        onfinish = undefined,\n        onframe = undefined,\n      } = isNumber(options) ? { duration: options } : options;\n      const epsilon = 0.01;\n\n      // cancel ongoing animation\n      this.cancelLandmarkAnimation();\n\n      const destPosition = landmark.position;\n      const destFocalPoint = landmark.focalPoint;\n      const destZoom = landmark.zoom;\n      const destRoll = landmark.roll;\n\n      const easingFunc = easingFunction || runtime.EasingFunction(easing);\n\n      let timeStart: number | undefined;\n      const end = () => {\n        this.setFocalPoint(destFocalPoint);\n        this.setPosition(destPosition);\n        this.setRoll(destRoll);\n        this.setZoom(destZoom);\n        this.computeMatrix();\n        this.triggerUpdate();\n        onfinish?.();\n      };\n\n      if (duration === 0) return end();\n\n      const animate = (timestamp: number) => {\n        if (timeStart === undefined) {\n          timeStart = timestamp;\n        }\n        const elapsed = timestamp - timeStart;\n\n        if (elapsed >= duration) {\n          end();\n          return;\n        }\n        // use the same ease function in animation system\n        const t = easingFunc(elapsed / duration);\n\n        const interFocalPoint = vec3.create();\n        const interPosition = vec3.create();\n        let interZoom = 1;\n        let interRoll = 0;\n\n        vec3.lerp(interFocalPoint, this.focalPoint, destFocalPoint, t);\n        vec3.lerp(interPosition, this.position, destPosition, t);\n        interRoll = this.roll * (1 - t) + destRoll * t;\n        interZoom = this.zoom * (1 - t) + destZoom * t;\n\n        this.setFocalPoint(interFocalPoint);\n        this.setPosition(interPosition);\n        this.setRoll(interRoll);\n        this.setZoom(interZoom);\n\n        const dist =\n          vec3.dist(interFocalPoint, destFocalPoint) +\n          vec3.dist(interPosition, destPosition);\n        if (\n          dist <= epsilon &&\n          destZoom === undefined &&\n          destRoll === undefined\n        ) {\n          return end();\n        }\n\n        this.computeMatrix();\n        this.triggerUpdate();\n\n        if (elapsed < duration) {\n          onframe?.(t);\n          this.landmarkAnimationID = this.canvas.requestAnimationFrame(animate);\n        }\n      };\n\n      this.canvas.requestAnimationFrame(animate);\n    }\n  }\n\n  /**\n   * Sets the camera to a distance such that the area covered by the bounding box is viewed.\n   */\n  // shot(displayObject: DisplayObject) {\n  //   const aabb = displayObject.getBounds();\n\n  //   if (!AABB.isEmpty(aabb)) {\n  //     this.setElevation(0);\n  //     this.setAzimuth(0);\n  //     this.setRoll(0);\n\n  //     const { halfExtents, center } = aabb;\n  //     const maxDim = Math.max(halfExtents[0] * 2, halfExtents[1] * 2);\n\n  //     const cc = center.map((c: number) => Math.round(c * 1000) / 1000) as [number, number, number];\n\n  //     if (maxDim !== 0) {\n  //       const d = (1.5 * maxDim) / Math.tan(this.fov * DEG_2_RAD);\n  //       this.setPosition([cc[0], cc[1], cc[2] + d]);\n  //     }\n\n  //     this.setFocalPoint(cc);\n  //   }\n  // }\n}\n", "import { runtime } from '@antv/g-lite';\nimport { AdvancedCamera } from './AdvancedCamera';\n\nexport { AdvancedCamera };\n\nruntime.CameraContribution = AdvancedCamera;\n", "import type { IElement } from '@antv/g-lite';\n\nexport class MutationRecord {\n  static copy(original: MutationRecord) {\n    const record = new MutationRecord(original.type, original.target);\n    record.addedNodes = original.addedNodes.slice();\n    record.removedNodes = original.removedNodes.slice();\n    record.previousSibling = original.previousSibling;\n    record.nextSibling = original.nextSibling;\n    record.attributeName = original.attributeName;\n    record.attributeNamespace = original.attributeNamespace;\n    record.oldValue = original.oldValue;\n    return record;\n  }\n\n  addedNodes: IElement[] = [];\n  attributeName: string = null;\n  attributeNamespace: string = null;\n  nextSibling: IElement = null;\n  oldValue: string = null;\n  previousSibling: IElement = null;\n  removedNodes: IElement[] = [];\n  constructor(\n    public type: MutationRecordType,\n    public target: IElement,\n  ) {}\n}\n", "/* eslint-disable max-classes-per-file */\nimport type { DisplayObject, IElement } from '@antv/g-lite';\nimport { ElementEvent, MutationEvent, runtime } from '@antv/g-lite';\nimport { MutationRecord } from './MutationRecord';\n\nlet uidCounter = 0;\nconst registrationsTable = new WeakMap<IElement, Registration[]>();\n\nexport class Registration {\n  private transientObservedNodes = [];\n\n  constructor(\n    public observer: MutationObserver,\n    public target: IElement,\n    public options?: MutationObserverInit,\n  ) {}\n\n  enqueue(record: MutationRecord) {\n    const { records } = this.observer;\n    const { length } = records;\n\n    // There are cases where we replace the last record with the new record.\n    // For example if the record represents the same mutation we need to use\n    // the one with the oldValue. If we get same record (this can happen as we\n    // walk up the tree) we ignore the new record.\n    if (records.length > 0) {\n      const lastRecord = records[length - 1];\n      const recordToReplaceLast = selectRecord(lastRecord, record);\n      if (recordToReplaceLast) {\n        records[length - 1] = recordToReplaceLast;\n        return;\n      }\n    } else {\n      scheduleCallback(this.observer);\n    }\n\n    records[length] = record;\n  }\n\n  addListeners() {\n    this.addListeners_(this.target);\n  }\n\n  private addListeners_(node: IElement) {\n    const { options } = this;\n    if (options.attributes)\n      node.addEventListener(ElementEvent.ATTR_MODIFIED, this, true);\n\n    // if (options.characterData) node.addEventListener('DOMCharacterDataModified', this, true);\n\n    if (options.childList)\n      node.addEventListener(ElementEvent.INSERTED, this, true);\n\n    if (options.childList || options.subtree)\n      node.addEventListener(ElementEvent.REMOVED, this, true);\n  }\n\n  removeListeners() {\n    this.removeListeners_(this.target);\n  }\n\n  removeListeners_(node: IElement) {\n    const { options } = this;\n    if (options.attributes)\n      node.removeEventListener(ElementEvent.ATTR_MODIFIED, this, true);\n\n    // if (options.characterData) node.removeEventListener('DOMCharacterDataModified', this, true);\n\n    if (options.childList)\n      node.removeEventListener(ElementEvent.INSERTED, this, true);\n\n    if (options.childList || options.subtree)\n      node.removeEventListener(ElementEvent.REMOVED, this, true);\n  }\n\n  /**\n   * Adds a transient observer on node. The transient observer gets removed\n   * next time we deliver the change records.\n   */\n  // addTransientObserver(node: IElement) {\n  //   // Don't add transient observers on the target itself. We already have all\n  //   // the required listeners set up on the target.\n  //   if (node === this.target) return;\n\n  //   this.addListeners_(node);\n  //   this.transientObservedNodes.push(node);\n  //   let registrations = registrationsTable.get(node);\n  //   if (!registrations) registrationsTable.set(node, (registrations = []));\n\n  //   // We know that registrations does not contain this because we already\n  //   // checked if node === this.target.\n  //   registrations.push(this);\n  // }\n\n  removeTransientObservers() {\n    const { transientObservedNodes } = this;\n    this.transientObservedNodes = [];\n\n    transientObservedNodes.forEach(function (node) {\n      // Transient observers are never added to the target.\n      this.removeListeners_(node);\n\n      const registrations = registrationsTable.get(node);\n      for (let i = 0; i < registrations.length; i++) {\n        if (registrations[i] === this) {\n          registrations.splice(i, 1);\n          // Each node can only have one registered observer associated with\n          // this observer.\n          break;\n        }\n      }\n    }, this);\n  }\n\n  handleEvent(e: MutationEvent) {\n    // Stop propagation since we are managing the propagation manually.\n    // This means that other mutation events on the page will not work\n    // correctly but that is by design.\n    e.stopImmediatePropagation();\n\n    let record: MutationRecord;\n    let target: IElement;\n\n    switch (e.type) {\n      case ElementEvent.ATTR_MODIFIED:\n        // http://dom.spec.whatwg.org/#concept-mo-queue-attributes\n\n        const name = e.attrName;\n        // @ts-ignore\n        const namespace = e.relatedNode.namespaceURI;\n        target = e.target as IElement;\n\n        // 1.\n        record = getRecord('attributes', target);\n        record.attributeName = name;\n        record.attributeNamespace = namespace;\n\n        // 2.\n        const oldValue =\n          e.attrChange === MutationEvent.ADDITION ? null : e.prevValue;\n\n        forEachAncestorAndObserverEnqueueRecord(target, (options) => {\n          // 3.1, 4.2\n          if (!options.attributes) return;\n\n          // 3.2, 4.3\n          if (\n            options.attributeFilter &&\n            options.attributeFilter.length &&\n            options.attributeFilter.indexOf(name) === -1 &&\n            options.attributeFilter.indexOf(namespace) === -1\n          ) {\n            return;\n          }\n          // 3.3, 4.4\n          if (options.attributeOldValue) return getRecordWithOldValue(oldValue);\n\n          // 3.4, 4.5\n          return record;\n        });\n\n        break;\n\n      // case 'DOMCharacterDataModified':\n      //   // http://dom.spec.whatwg.org/#concept-mo-queue-characterdata\n      //   var target = e.target;\n\n      //   // 1.\n      //   var record = getRecord('characterData', target);\n\n      //   // 2.\n      //   var oldValue = e.prevValue;\n\n      //   forEachAncestorAndObserverEnqueueRecord(target, function(options) {\n      //     // 3.1, 4.2\n      //     if (!options.characterData)\n      //       return;\n\n      //     // 3.2, 4.3\n      //     if (options.characterDataOldValue)\n      //       return getRecordWithOldValue(oldValue);\n\n      //     // 3.3, 4.4\n      //     return record;\n      //   });\n\n      //   break;\n\n      case ElementEvent.REMOVED:\n      // this.addTransientObserver(e.target as IElement);\n      // Fall through.\n      case ElementEvent.INSERTED:\n        // http://dom.spec.whatwg.org/#concept-mo-queue-childlist\n        target = e.relatedNode;\n        const changedNode = e.target as IElement;\n        let addedNodes: IElement[];\n        let removedNodes: IElement[];\n        if (e.type === ElementEvent.INSERTED) {\n          addedNodes = [changedNode];\n          removedNodes = [];\n        } else {\n          addedNodes = [];\n          removedNodes = [changedNode];\n        }\n        const { previousSibling } = changedNode;\n        const { nextSibling } = changedNode;\n\n        // 1.\n        record = getRecord('childList', target);\n        record.addedNodes = addedNodes;\n        record.removedNodes = removedNodes;\n        record.previousSibling = previousSibling as IElement;\n        record.nextSibling = nextSibling as IElement;\n\n        forEachAncestorAndObserverEnqueueRecord(target, function (options) {\n          // 2.1, 3.2\n          if (!options.childList) return;\n\n          // 2.2, 3.3\n          return record;\n        });\n    }\n\n    clearRecords();\n  }\n}\n\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver\n * @see https://github.com/googlearchive/MutationObservers/blob/master/MutationObserver.js\n */\nexport class MutationObserver {\n  nodes: IElement[] = [];\n  records: MutationRecord[] = [];\n  uid = uidCounter++;\n\n  constructor(public callback: MutationCallback) {}\n\n  observe(target: DisplayObject, options?: MutationObserverInit) {\n    // 1.1\n    if (\n      (!options.childList && !options.attributes && !options.characterData) ||\n      // 1.2\n      (options.attributeOldValue && !options.attributes) ||\n      // 1.3\n      (options.attributeFilter &&\n        options.attributeFilter.length &&\n        !options.attributes) ||\n      // 1.4\n      (options.characterDataOldValue && !options.characterData)\n    ) {\n      throw new SyntaxError();\n    }\n\n    let registrations = registrationsTable.get(target);\n    if (!registrations) registrationsTable.set(target, (registrations = []));\n\n    // 2\n    // If target's list of registered observers already includes a registered\n    // observer associated with the context object, replace that registered\n    // observer's options with options.\n    let registration: Registration;\n    for (let i = 0; i < registrations.length; i++) {\n      if (registrations[i].observer === this) {\n        registration = registrations[i];\n        registration.removeListeners();\n        registration.options = options;\n        break;\n      }\n    }\n\n    // 3.\n    // Otherwise, add a new registered observer to target's list of registered\n    // observers with the context object as the observer and options as the\n    // options, and add target to context object's list of nodes on which it\n    // is registered.\n    if (!registration) {\n      registration = new Registration(this, target, options);\n      registrations.push(registration);\n      this.nodes.push(target);\n    }\n\n    registration.addListeners();\n  }\n\n  disconnect() {\n    this.nodes.forEach((node) => {\n      const registrations = registrationsTable.get(node);\n      for (let i = 0; i < registrations.length; i++) {\n        const registration = registrations[i];\n        if (registration.observer === this) {\n          registration.removeListeners();\n          registrations.splice(i, 1);\n          // Each node can only have one registered observer associated with\n          // this observer.\n          break;\n        }\n      }\n    }, this);\n    this.records = [];\n  }\n\n  takeRecords() {\n    const copyOfRecords = this.records;\n    this.records = [];\n    return copyOfRecords;\n  }\n}\n\n// We keep track of the two (possibly one) records used in a single mutation.\nlet currentRecord: MutationRecord;\nlet recordWithOldValue;\n\n/**\n * Creates a record without |oldValue| and caches it as |currentRecord| for\n * later use.\n */\nfunction getRecord(type: MutationRecordType, target: IElement) {\n  return (currentRecord = new MutationRecord(type, target));\n}\n\n/**\n * Gets or creates a record with |oldValue| based in the |currentRecord|\n */\nfunction getRecordWithOldValue(oldValue: any) {\n  if (recordWithOldValue) return recordWithOldValue;\n  recordWithOldValue = MutationRecord.copy(currentRecord);\n  recordWithOldValue.oldValue = oldValue;\n  return recordWithOldValue;\n}\n\nfunction clearRecords() {\n  currentRecord = recordWithOldValue = undefined;\n}\n\n/**\n * Whether the record represents a record from the current\n * mutation event.\n */\nfunction recordRepresentsCurrentMutation(record: MutationRecord) {\n  return record === recordWithOldValue || record === currentRecord;\n}\n\n/**\n * Selects which record, if any, to replace the last record in the queue.\n * This returns |null| if no record should be replaced.\n */\nfunction selectRecord(lastRecord: MutationRecord, newRecord: MutationRecord) {\n  if (lastRecord === newRecord) return lastRecord;\n\n  // Check if the the record we are adding represents the same record. If\n  // so, we keep the one with the oldValue in it.\n  if (recordWithOldValue && recordRepresentsCurrentMutation(lastRecord))\n    return recordWithOldValue;\n\n  return null;\n}\n\nfunction removeTransientObserversFor(observer: MutationObserver) {\n  observer.nodes.forEach((node) => {\n    const registrations = registrationsTable.get(node);\n    if (!registrations) return;\n    registrations.forEach(function (registration) {\n      if (registration.observer === observer)\n        registration.removeTransientObservers();\n    });\n  });\n}\n\n/**\n * This function is used for the \"For each registered observer observer (with\n * observer's options as options) in target's list of registered observers,\n * run these substeps:\" and the \"For each ancestor ancestor of target, and for\n * each registered observer observer (with options options) in ancestor's list\n * of registered observers, run these substeps:\" part of the algorithms. The\n * |options.subtree| is checked to ensure that the callback is called\n * correctly.\n *\n * @param {Node} target\n * @param {function(MutationObserverInit):MutationRecord} callback\n */\nfunction forEachAncestorAndObserverEnqueueRecord(target: IElement, callback) {\n  for (let node = target; node; node = node.parentNode as IElement) {\n    const registrations = registrationsTable.get(node);\n\n    if (registrations) {\n      for (let j = 0; j < registrations.length; j++) {\n        const registration = registrations[j];\n        const { options } = registration;\n\n        // Only target ignores subtree.\n        if (node !== target && !options.subtree) continue;\n\n        const record = callback(options);\n        if (record) registration.enqueue(record);\n      }\n    }\n  }\n}\n\n// This is used to ensure that we never schedule 2 callas to setImmediate\nlet isScheduled = false;\n\n// Keep track of observers that needs to be notified next time.\nlet scheduledObservers: MutationObserver[] = [];\n\n/**\n * Schedules |dispatchCallback| to be called in the future.\n */\nfunction scheduleCallback(observer: MutationObserver) {\n  scheduledObservers.push(observer);\n  if (!isScheduled) {\n    isScheduled = true;\n    // setImmediate(dispatchCallbacks);\n    if (typeof runtime.globalThis !== 'undefined') {\n      runtime.globalThis.setTimeout(dispatchCallbacks);\n    } else {\n      dispatchCallbacks();\n    }\n  }\n}\nfunction dispatchCallbacks() {\n  // http://dom.spec.whatwg.org/#mutation-observers\n\n  isScheduled = false; // Used to allow a new setImmediate call above.\n\n  const observers = scheduledObservers;\n  scheduledObservers = [];\n  // Sort observers based on their creation UID (incremental).\n  observers.sort((o1, o2) => {\n    return o1.uid - o2.uid;\n  });\n\n  let anyNonEmpty = false;\n  observers.forEach(function (observer) {\n    // 2.1, 2.2\n    const queue = observer.takeRecords();\n    // 2.3. Remove all transient registered observers whose observer is mo.\n    removeTransientObserversFor(observer);\n\n    // 2.4\n    if (queue.length) {\n      // @ts-ignore\n      observer.callback(queue, observer);\n      anyNonEmpty = true;\n    }\n  });\n\n  // 3.\n  if (anyNonEmpty) dispatchCallbacks();\n}\n", "import type { EventService } from '@antv/g-lite';\nimport { FederatedEvent } from '@antv/g-lite';\nimport type { Animation } from './Animation';\n\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/AnimationPlaybackEvent\n */\n// @ts-ignore\nexport class AnimationEvent\n  extends FederatedEvent\n  implements AnimationPlaybackEvent\n{\n  constructor(\n    manager: EventService | null,\n    target: Animation,\n    public currentTime: number | null,\n    public timelineTime: number,\n  ) {\n    super(manager);\n\n    // @ts-ignore\n    this.target = target;\n    this.type = 'finish';\n    this.bubbles = false;\n    // @ts-ignore\n    this.currentTarget = target;\n    this.defaultPrevented = false;\n    this.eventPhase = this.AT_TARGET;\n    this.timeStamp = Date.now();\n    this.currentTime = currentTime;\n    this.timelineTime = timelineTime;\n  }\n}\n", "import type { DisplayObject, IAnimation } from '@antv/g-lite';\nimport { ERROR_MSG_METHOD_NOT_IMPLEMENTED } from '@antv/g-lite';\nimport { AnimationEvent } from './AnimationEvent';\nimport type { AnimationTimeline } from './AnimationTimeline';\nimport type { KeyframeEffect } from './KeyframeEffect';\n\nlet sequenceNumber = 0;\n\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/Animation\n */\nexport class Animation implements IAnimation {\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/effect\n   */\n  effect: KeyframeEffect;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/timeline\n   */\n  timeline: AnimationTimeline;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/id\n   */\n  id: string;\n\n  // animation: InternalAnimation | null;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/pending\n   */\n  get pending() {\n    return (\n      (this._startTime === null && !this._paused && this.playbackRate !== 0) ||\n      this.currentTimePending\n    );\n  }\n  private currentTimePending = false;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/playState\n   */\n  // playState: AnimationPlayState;\n  private _idle = true;\n  private _paused = false;\n  private _finishedFlag = true;\n  get playState(): AnimationPlayState {\n    if (this._idle) return 'idle';\n    if (this._isFinished) return 'finished';\n    if (this._paused) return 'paused';\n    return 'running';\n  }\n\n  /**\n   * record previos state\n   */\n  private oldPlayState: AnimationPlayState | 'pending';\n\n  private _holdTime: number;\n\n  private readyPromise: Promise<any> | undefined;\n  private finishedPromise: Promise<any> | undefined;\n  private resolveReadyPromise: Function;\n  private rejectReadyPromise: Function;\n  private resolveFinishedPromise: Function;\n  private rejectFinishedPromise: Function;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/ready\n   * @example\n    animation.pause();\n    animation.ready.then(function() {\n      // Displays 'running'\n      alert(animation.playState);\n    });\n    animation.play();\n   */\n  get ready() {\n    if (!this.readyPromise) {\n      if (this.timeline.animationsWithPromises.indexOf(this) === -1) {\n        this.timeline.animationsWithPromises.push(this);\n      }\n      this.readyPromise = new Promise((resolve, reject) => {\n        this.resolveReadyPromise = () => {\n          resolve(this);\n        };\n        this.rejectReadyPromise = () => {\n          reject(new Error());\n        };\n      });\n      if (!this.pending) {\n        this.resolveReadyPromise();\n      }\n    }\n    return this.readyPromise;\n  }\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/finished\n   * @example\n    Promise.all(\n      elem.getAnimations().map(\n        function(animation) {\n          return animation.finished\n        }\n      )\n    ).then(\n      function() {\n        return elem.remove();\n      }\n    );\n   */\n  get finished() {\n    if (!this.finishedPromise) {\n      if (this.timeline.animationsWithPromises.indexOf(this) === -1) {\n        this.timeline.animationsWithPromises.push(this);\n      }\n      this.finishedPromise = new Promise((resolve, reject) => {\n        this.resolveFinishedPromise = () => {\n          resolve(this);\n        };\n        this.rejectFinishedPromise = () => {\n          reject(new Error());\n        };\n      });\n      if (this.playState === 'finished') {\n        this.resolveFinishedPromise();\n      }\n    }\n    return this.finishedPromise;\n  }\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/onfinish\n   */\n  onfinish: ((this: Animation, ev: AnimationPlaybackEvent) => any) | null;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/oncancel\n   */\n  oncancel: ((this: Animation, ev: AnimationPlaybackEvent) => any) | null;\n\n  /**\n   * get called after each frame when running\n   */\n  onframe: ((this: Animation, ev: AnimationPlaybackEvent) => any) | null;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/currentTime\n   */\n  private _currentTime = 0;\n  get currentTime(): number | null {\n    this.updatePromises();\n    return this._idle || this.currentTimePending ? null : this._currentTime;\n  }\n  set currentTime(newTime: number | null) {\n    newTime = Number(newTime);\n    if (isNaN(newTime)) return;\n    this.timeline.restart();\n    if (!this._paused && this._startTime !== null) {\n      this._startTime =\n        Number(this.timeline?.currentTime) - newTime / this.playbackRate;\n    }\n    this.currentTimePending = false;\n    if (this._currentTime === newTime) {\n      return;\n    }\n    if (this._idle) {\n      this._idle = false;\n      this._paused = true;\n    }\n    this.tickCurrentTime(newTime, true);\n    this.timeline.applyDirtiedAnimation(this);\n  }\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/startTime\n   */\n  private _startTime: number | null;\n  get startTime() {\n    return this._startTime;\n  }\n  set startTime(newTime: number | null) {\n    if (newTime !== null) {\n      this.updatePromises();\n      newTime = Number(newTime);\n      if (isNaN(newTime)) return;\n      if (this._paused || this._idle) return;\n      this._startTime = newTime;\n      this.tickCurrentTime(\n        (Number(this.timeline.currentTime) - this._startTime) *\n          this.playbackRate,\n      );\n      this.timeline.applyDirtiedAnimation(this);\n      this.updatePromises();\n    }\n  }\n\n  private _playbackRate = 1;\n  get playbackRate() {\n    return this._playbackRate;\n  }\n  set playbackRate(value: number) {\n    if (value === this._playbackRate) {\n      return;\n    }\n\n    this.updatePromises();\n    const oldCurrentTime = this.currentTime;\n    this._playbackRate = value;\n    this.startTime = null;\n    if (this.playState !== 'paused' && this.playState !== 'idle') {\n      this._finishedFlag = false;\n      this._idle = false;\n      this.ensureAlive();\n      this.timeline.applyDirtiedAnimation(this);\n    }\n    if (oldCurrentTime !== null) {\n      this.currentTime = oldCurrentTime;\n    }\n    this.updatePromises();\n  }\n\n  get _isFinished() {\n    return (\n      !this._idle &&\n      ((this._playbackRate > 0 &&\n        Number(this._currentTime) >= this._totalDuration) ||\n        (this._playbackRate < 0 && Number(this._currentTime) <= 0))\n    );\n  }\n\n  _totalDuration: number;\n  get totalDuration() {\n    return this._totalDuration;\n  }\n\n  _inEffect: boolean;\n  _inTimeline = true;\n  get _needsTick() {\n    return this.pending || this.playState === 'running' || !this._finishedFlag;\n  }\n\n  constructor(effect: KeyframeEffect, timeline: AnimationTimeline) {\n    this.effect = effect;\n    effect.animation = this;\n    this.timeline = timeline;\n    this.id = `${sequenceNumber++}`;\n\n    this._inEffect = !!this.effect.update(0);\n    this._totalDuration = Number(this.effect?.getComputedTiming().endTime);\n    this._holdTime = 0;\n    this._paused = false;\n    this.oldPlayState = 'idle';\n    this.updatePromises();\n  }\n\n  /**\n   * state machine,\n   * resolve/reject ready/finished Promise according to current state\n   */\n  updatePromises() {\n    if (this.effect.target?.destroyed) {\n      this.readyPromise = undefined;\n      this.finishedPromise = undefined;\n      return false;\n    }\n    const { oldPlayState } = this;\n    const newPlayState = this.pending ? 'pending' : this.playState;\n    if (this.readyPromise && newPlayState !== oldPlayState) {\n      if (newPlayState === 'idle') {\n        this.rejectReadyPromise();\n        this.readyPromise = undefined;\n      } else if (oldPlayState === 'pending') {\n        this.resolveReadyPromise();\n      } else if (newPlayState === 'pending') {\n        this.readyPromise = undefined;\n      }\n    }\n    if (this.finishedPromise && newPlayState !== oldPlayState) {\n      if (newPlayState === 'idle') {\n        this.rejectFinishedPromise();\n        this.finishedPromise = undefined;\n      } else if (newPlayState === 'finished') {\n        this.resolveFinishedPromise();\n      } else if (oldPlayState === 'finished') {\n        this.finishedPromise = undefined;\n      }\n    }\n    this.oldPlayState = newPlayState;\n    return this.readyPromise || this.finishedPromise;\n  }\n\n  play() {\n    this.updatePromises();\n    this._paused = false;\n    if (this._isFinished || this._idle) {\n      this.rewind();\n      this._startTime = null;\n    }\n    this._finishedFlag = false;\n    this._idle = false;\n    this.ensureAlive();\n    this.timeline.applyDirtiedAnimation(this);\n\n    if (this.timeline.animations.indexOf(this) === -1) {\n      this.timeline.animations.push(this);\n    }\n\n    this.updatePromises();\n  }\n\n  pause() {\n    this.updatePromises();\n    if (this.currentTime) {\n      this._holdTime = this.currentTime;\n    }\n\n    if (!this._isFinished && !this._paused && !this._idle) {\n      this.currentTimePending = true;\n    } else if (this._idle) {\n      this.rewind();\n      this._idle = false;\n    }\n    this._startTime = null;\n    this._paused = true;\n\n    this.updatePromises();\n  }\n\n  finish() {\n    this.updatePromises();\n    if (this._idle) return;\n    this.currentTime = this._playbackRate > 0 ? this._totalDuration : 0;\n    this._startTime = this._totalDuration - this.currentTime;\n    this.currentTimePending = false;\n    this.timeline.applyDirtiedAnimation(this);\n\n    this.updatePromises();\n  }\n\n  cancel() {\n    this.updatePromises();\n    if (!this._inEffect) return;\n    this._inEffect = false;\n    this._idle = true;\n    this._paused = false;\n    this._finishedFlag = true;\n    this._currentTime = 0;\n    this._startTime = null;\n    this.effect.update(null);\n    // effects are invalid after cancellation as the animation state\n    // needs to un-apply.\n    this.timeline.applyDirtiedAnimation(this);\n\n    this.updatePromises();\n\n    /**\n     * 1. Reject the current finished promise with a DOMException named \"AbortError\".\n     * 2. Let current finished promise be a new promise\n     * @see https://w3c.github.io/csswg-drafts/web-animations-1/#canceling-an-animation-section\n     */\n    // if (this.finishedPromise) {\n    //   this.rejectFinishedPromise();\n    //   this.finishedPromise = undefined;\n    // }\n\n    if (this.oncancel) {\n      const event = new AnimationEvent(\n        null,\n        this,\n        this.currentTime,\n        null,\n      ) as AnimationPlaybackEvent;\n      setTimeout(() => {\n        this.oncancel(event);\n      });\n    }\n  }\n\n  reverse() {\n    this.updatePromises();\n    const oldCurrentTime = this.currentTime;\n\n    this.playbackRate *= -1;\n    this.play();\n\n    if (oldCurrentTime !== null) {\n      this.currentTime = oldCurrentTime;\n    }\n    this.updatePromises();\n  }\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/Animation/updatePlaybackRate\n   */\n  updatePlaybackRate(playbackRate: number): void {\n    this.playbackRate = playbackRate;\n  }\n\n  targetAnimations() {\n    const target = this.effect?.target as unknown as DisplayObject;\n    return target.getAnimations();\n  }\n  markTarget() {\n    const animations = this.targetAnimations();\n    if (animations.indexOf(this) === -1) {\n      animations.push(this);\n    }\n  }\n  unmarkTarget() {\n    const animations = this.targetAnimations();\n    const index = animations.indexOf(this);\n    if (index !== -1) {\n      animations.splice(index, 1);\n    }\n  }\n\n  tick(timelineTime: number, isAnimationFrame: boolean) {\n    if (!this._idle && !this._paused) {\n      if (this._startTime === null) {\n        if (isAnimationFrame) {\n          this.startTime = timelineTime - this._currentTime / this.playbackRate;\n        }\n      } else if (!this._isFinished) {\n        this.tickCurrentTime(\n          (timelineTime - this._startTime) * this.playbackRate,\n        );\n      }\n    }\n\n    if (isAnimationFrame) {\n      this.currentTimePending = false;\n      this.fireEvents(timelineTime);\n    }\n  }\n\n  private rewind() {\n    if (this.playbackRate >= 0) {\n      this.currentTime = 0;\n    } else if (this._totalDuration < Infinity) {\n      this.currentTime = this._totalDuration;\n    } else {\n      throw new Error(\n        'Unable to rewind negative playback rate animation with infinite duration',\n      );\n    }\n  }\n\n  persist(): void {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  }\n\n  addEventListener<K extends keyof AnimationEventMap>(\n    type: K,\n    listener: (this: Animation, ev: AnimationEventMap[K]) => any,\n    options?: boolean | AddEventListenerOptions,\n  ): void;\n  addEventListener(\n    type: string,\n    listener: EventListenerOrEventListenerObject,\n    options?: boolean | AddEventListenerOptions,\n  ): void;\n\n  addEventListener(type: any, listener: any, options?: any): void {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  }\n  removeEventListener<K extends keyof AnimationEventMap>(\n    type: K,\n    listener: (this: Animation, ev: AnimationEventMap[K]) => any,\n    options?: boolean | EventListenerOptions,\n  ): void;\n  removeEventListener(\n    type: string,\n    listener: EventListenerOrEventListenerObject,\n    options?: boolean | EventListenerOptions,\n  ): void;\n\n  removeEventListener(type: any, listener: any, options?: any): void {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  }\n\n  dispatchEvent(event: Event): boolean {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  }\n  onremove: ((this: Animation, ev: Event) => any) | null;\n  // replaceState: AnimationReplaceState;\n  commitStyles(): void {\n    throw new Error(ERROR_MSG_METHOD_NOT_IMPLEMENTED);\n  }\n\n  private ensureAlive() {\n    // If an animation is playing backwards and is not fill backwards/both\n    // then it should go out of effect when it reaches the start of its\n    // active interval (currentTime === 0).\n    if (this.playbackRate < 0 && this.currentTime === 0) {\n      this._inEffect = !!this.effect?.update(-1);\n    } else {\n      this._inEffect = !!this.effect?.update(this.currentTime);\n    }\n    if (!this._inTimeline && (this._inEffect || !this._finishedFlag)) {\n      this._inTimeline = true;\n      this.timeline.animations.push(this);\n    }\n  }\n\n  private tickCurrentTime(newTime: number, ignoreLimit?: boolean) {\n    if (newTime !== this._currentTime) {\n      this._currentTime = newTime;\n      if (this._isFinished && !ignoreLimit) {\n        this._currentTime = this._playbackRate > 0 ? this._totalDuration : 0;\n      }\n      this.ensureAlive();\n    }\n  }\n\n  private fireEvents(baseTime: number) {\n    if (this._isFinished) {\n      if (!this._finishedFlag) {\n        if (this.onfinish) {\n          const event = new AnimationEvent(\n            null,\n            this,\n            this.currentTime,\n            baseTime,\n          ) as AnimationPlaybackEvent;\n          setTimeout(() => {\n            if (this.onfinish) {\n              this.onfinish(event);\n            }\n          });\n        }\n        this._finishedFlag = true;\n      }\n    } else {\n      if (this.onframe && this.playState === 'running') {\n        const event = new AnimationEvent(\n          null,\n          this,\n          this.currentTime,\n          baseTime,\n        ) as AnimationPlaybackEvent;\n        this.onframe(event);\n      }\n      this._finishedFlag = false;\n    }\n  }\n}\n", "/**\n * https://github.com/gre/bezier-easing\n * BezierEasing - use bezier curve for transition easing function\n * by Gatan Renaudeau 2014 - 2015  MIT License\n */\n\n// These values are established by empiricism with tests (tradeoff: performance VS precision)\nexport const NEWTON_ITERATIONS = 4;\nexport const NEWTON_MIN_SLOPE = 0.001;\nexport const SUBDIVISION_PRECISION = 0.0000001;\nexport const SUBDIVISION_MAX_ITERATIONS = 10;\n\nexport const kSplineTableSize = 11;\nexport const kSampleStepSize = 1.0 / (kSplineTableSize - 1.0);\n\nexport const float32ArraySupported = typeof Float32Array === 'function';\n\nexport const A = (aA1: number, aA2: number) => 1.0 - 3.0 * aA2 + 3.0 * aA1;\nexport const B = (aA1: number, aA2: number) => 3.0 * aA2 - 6.0 * aA1;\nexport const C = (aA1: number) => 3.0 * aA1;\n\n// Returns x(t) given t, x1, and x2, or y(t) given t, y1, and y2.\nexport const calcBezier = (aT: number, aA1: number, aA2: number) =>\n  ((A(aA1, aA2) * aT + B(aA1, aA2)) * aT + C(aA1)) * aT;\n\n// Returns dx/dt given t, x1, and x2, or dy/dt given t, y1, and y2.\nexport const getSlope = (aT: number, aA1: number, aA2: number) =>\n  3.0 * A(aA1, aA2) * aT * aT + 2.0 * B(aA1, aA2) * aT + C(aA1);\nexport const binarySubdivide = (\n  aX: number,\n  aA: number,\n  aB: number,\n  mX1: number,\n  mX2: number,\n) => {\n  let currentX: number;\n  let currentT: number;\n  let i = 0;\n  do {\n    currentT = aA + (aB - aA) / 2.0;\n    currentX = calcBezier(currentT, mX1, mX2) - aX;\n    if (currentX > 0.0) aB = currentT;\n    else aA = currentT;\n  } while (\n    Math.abs(currentX) > SUBDIVISION_PRECISION &&\n    ++i < SUBDIVISION_MAX_ITERATIONS\n  );\n  return currentT;\n};\n\nexport const newtonRaphsonIterate = (\n  aX: number,\n  aGuessT: number,\n  mX1: number,\n  mX2: number,\n) => {\n  for (let i = 0; i < NEWTON_ITERATIONS; ++i) {\n    const currentSlope = getSlope(aGuessT, mX1, mX2);\n    if (currentSlope === 0.0) return aGuessT;\n\n    const currentX = calcBezier(aGuessT, mX1, mX2) - aX;\n    aGuessT -= currentX / currentSlope;\n  }\n\n  return aGuessT;\n};\n\nexport const bezier = (mX1: number, mY1: number, mX2: number, mY2: number) => {\n  if (!(mX1 >= 0 && mX1 <= 1 && mX2 >= 0 && mX2 <= 1))\n    throw new Error('bezier x values must be in [0, 1] range');\n\n  if (mX1 === mY1 && mX2 === mY2) return (t: number) => t;\n\n  // Precompute samples table\n  const sampleValues = float32ArraySupported\n    ? new Float32Array(kSplineTableSize)\n    : new Array(kSplineTableSize);\n  for (let i = 0; i < kSplineTableSize; ++i) {\n    sampleValues[i] = calcBezier(i * kSampleStepSize, mX1, mX2);\n  }\n\n  const getTForX = (aX: number) => {\n    let intervalStart = 0.0;\n    let currentSample = 1;\n    const lastSample = kSplineTableSize - 1;\n\n    for (\n      ;\n      currentSample !== lastSample && sampleValues[currentSample] <= aX;\n      ++currentSample\n    )\n      intervalStart += kSampleStepSize;\n    --currentSample;\n\n    // Interpolate to provide an initial guess for t\n    const dist =\n      (aX - sampleValues[currentSample]) /\n      (sampleValues[currentSample + 1] - sampleValues[currentSample]);\n    const guessForT = intervalStart + dist * kSampleStepSize;\n\n    const initialSlope = getSlope(guessForT, mX1, mX2);\n    if (initialSlope >= NEWTON_MIN_SLOPE)\n      return newtonRaphsonIterate(aX, guessForT, mX1, mX2);\n    if (initialSlope === 0.0) return guessForT;\n\n    return binarySubdivide(\n      aX,\n      intervalStart,\n      intervalStart + kSampleStepSize,\n      mX1,\n      mX2,\n    );\n  };\n\n  return (t: number) => {\n    // Because JavaScript number are imprecise, we should guarantee the extremes are right.\n    if (t === 0 || t === 1) return t;\n    return calcBezier(getTForX(t), mY1, mY2);\n  };\n};\n", "/**\n * ported from https://github.com/okikio/native/blob/master/packages/animate/src/custom-easing.ts\n */\nimport type { TypeEasingFunction } from '@antv/g-lite';\nimport { clamp } from '@antv/util';\nimport { bezier } from './bezier-easing';\n\nexport const convertToDash = (str: string) => {\n  str = str.replace(/([A-Z])/g, (letter) => `-${letter.toLowerCase()}`);\n\n  // Remove first dash\n  return str.charAt(0) === '-' ? str.substring(1) : str;\n};\n\nexport type TypeColor = string | number | (string | number)[];\nexport type TypeRGBAFunction = (color: TypeColor) => number[];\n\n/**\n  Easing Functions from anime.js, they are tried and true, so, its better to use them instead of other alternatives\n*/\nconst Quad: TypeEasingFunction = (t) => t ** 2;\nconst Cubic: TypeEasingFunction = (t) => t ** 3;\nconst Quart: TypeEasingFunction = (t) => t ** 4;\nconst Quint: TypeEasingFunction = (t) => t ** 5;\nconst Expo: TypeEasingFunction = (t) => t ** 6;\nconst Sine: TypeEasingFunction = (t) => 1 - Math.cos((t * Math.PI) / 2);\nconst Circ: TypeEasingFunction = (t) => 1 - Math.sqrt(1 - t * t);\nconst Back: TypeEasingFunction = (t) => t * t * (3 * t - 2);\n\nconst Bounce: TypeEasingFunction = (t) => {\n  let pow2: number;\n  let b = 4;\n  while (t < ((pow2 = 2 ** --b) - 1) / 11) {}\n  return 1 / 4 ** (3 - b) - 7.5625 * ((pow2 * 3 - 2) / 22 - t) ** 2;\n};\n\nconst Elastic: TypeEasingFunction = (t, params: (string | number)[] = []) => {\n  const [amplitude = 1, period = 0.5] = params;\n  const a = clamp(Number(amplitude), 1, 10);\n  const p = clamp(Number(period), 0.1, 2);\n  if (t === 0 || t === 1) return t;\n  return (\n    -a *\n    2 ** (10 * (t - 1)) *\n    Math.sin(\n      ((t - 1 - (p / (Math.PI * 2)) * Math.asin(1 / a)) * (Math.PI * 2)) / p,\n    )\n  );\n};\n\nconst Spring: TypeEasingFunction = (\n  t: number,\n  params: (string | number)[] = [],\n  duration?: number,\n) => {\n  let [mass = 1, stiffness = 100, damping = 10, velocity = 0] = params;\n\n  mass = clamp(mass as number, 0.1, 1000);\n  stiffness = clamp(stiffness as number, 0.1, 1000);\n  damping = clamp(damping as number, 0.1, 1000);\n  velocity = clamp(velocity as number, 0.1, 1000);\n\n  const w0 = Math.sqrt(stiffness / mass);\n  const zeta = damping / (2 * Math.sqrt(stiffness * mass));\n  const wd = zeta < 1 ? w0 * Math.sqrt(1 - zeta * zeta) : 0;\n  const a = 1;\n  const b = zeta < 1 ? (zeta * w0 + -velocity) / wd : -velocity + w0;\n\n  let progress = duration ? (duration * t) / 1000 : t;\n  if (zeta < 1) {\n    progress =\n      Math.exp(-progress * zeta * w0) *\n      (a * Math.cos(wd * progress) + b * Math.sin(wd * progress));\n  } else {\n    progress = (a + b * progress) * Math.exp(-progress * w0);\n  }\n\n  if (t === 0 || t === 1) return t;\n  return 1 - progress;\n};\n\n/**\n * Cache the durations at set easing parameters\n */\n// export const EasingDurationCache: Map<string | TypeEasingFunction, number> = new Map();\n\n/**\n * The threshold for an infinite loop\n */\n// const INTINITE_LOOP_LIMIT = 10000;\n\n/** Convert easing parameters to Array of numbers, e.g. \"spring(2, 500)\" to [2, 500] */\n// export const parseEasingParameters = (str: string) => {\n//   const match = /(\\(|\\s)([^)]+)\\)?/.exec(str);\n//   return match\n//     ? match[2].split(',').map((value) => {\n//         const num = parseFloat(value);\n//         return !Number.isNaN(num) ? num : value.trim();\n//       })\n//     : [];\n// };\n\n/**\n * The spring easing function will only look smooth at certain durations, with certain parameters.\n * This functions returns the optimal duration to create a smooth springy animation based on physics\n *\n * Note: it can also be used to determine the optimal duration of other types of easing function, but be careful of 'in-'\n * easing functions, because of the nature of the function it can sometimes create an infinite loop, I suggest only using\n * `getEasingDuration` for `spring`, specifically 'out-spring' and 'spring'\n */\n// export const getEasingDuration = (easing: string | TypeEasingFunction = 'spring') => {\n//   if (EasingDurationCache.has(easing)) return EasingDurationCache.get(easing);\n\n//   // eslint-disable-next-line @typescript-eslint/no-use-before-define\n//   const easingFunction = typeof easing == 'function' ? easing : getEasingFunction(easing as string);\n//   const params = typeof easing == 'function' ? [] : parseEasingParameters(easing);\n//   const frame = 1 / 6;\n\n//   let elapsed = 0;\n//   let rest = 0;\n//   let count = 0;\n\n//   while (++count < INTINITE_LOOP_LIMIT) {\n//     elapsed += frame;\n//     if (easingFunction(elapsed, params, undefined) === 1) {\n//       rest++;\n//       if (rest >= 16) break;\n//     } else {\n//       rest = 0;\n//     }\n//   }\n\n//   const duration = elapsed * frame * 1000;\n//   EasingDurationCache.set(easing, duration);\n//   return duration;\n// };\n\n/**\n  These Easing Functions are based off of the Sozi Project's easing functions\n  https://github.com/sozi-projects/Sozi/blob/d72e44ebd580dc7579d1e177406ad41e632f961d/src/js/player/Timing.js\n*/\nconst Steps: TypeEasingFunction = (t: number, params = []) => {\n  const [steps = 10, type] = params as [number, string];\n  const trunc = type === 'start' ? Math.ceil : Math.floor;\n  return trunc(clamp(t, 0, 1) * steps) / steps;\n};\n\n// @ts-ignore\nconst Bezier: TypeEasingFunction = (t: number, params: number[] = []) => {\n  const [mX1, mY1, mX2, mY2] = params;\n  return bezier(mX1, mY1, mX2, mY2)(t);\n};\n\n/** The default `ease-in` easing function */\nconst easein: TypeEasingFunction = bezier(0.42, 0.0, 1.0, 1.0);\n\n/** Converts easing functions to their `out`counter parts */\nconst EaseOut = (ease: TypeEasingFunction): TypeEasingFunction => {\n  return (t, params = [], duration?: number) =>\n    1 - ease(1 - t, params, duration);\n};\n\n/** Converts easing functions to their `in-out` counter parts */\nconst EaseInOut = (ease: TypeEasingFunction): TypeEasingFunction => {\n  return (t, params = [], duration?: number) =>\n    t < 0.5\n      ? ease(t * 2, params, duration) / 2\n      : 1 - ease(t * -2 + 2, params, duration) / 2;\n};\n\n/** Converts easing functions to their `out-in` counter parts */\nconst EaseOutIn = (ease: TypeEasingFunction): TypeEasingFunction => {\n  return (t, params = [], duration?: number) => {\n    return t < 0.5\n      ? (1 - ease(1 - t * 2, params, duration)) / 2\n      : (ease(t * 2 - 1, params, duration) + 1) / 2;\n  };\n};\n\n/**\n * The default list of easing functions, do note this is different from {@link EASING}\n */\ntype EasingFunctionType =\n  | 'steps'\n  | 'step-start'\n  | 'step-end'\n  | 'linear'\n  | 'cubic-bezier'\n  | 'ease'\n  | 'in'\n  | 'out'\n  | 'in-out'\n  | 'out-in'\n  | 'in-quad'\n  | 'out-quad'\n  | 'in-out-quad'\n  | 'out-in-quad'\n  | 'in-cubic'\n  | 'out-cubic'\n  | 'in-out-cubic'\n  | 'out-in-cubic'\n  | 'in-quart'\n  | 'out-quart'\n  | 'in-out-quart'\n  | 'out-in-quart'\n  | 'in-quint'\n  | 'out-quint'\n  | 'in-out-quint'\n  | 'out-in-quint'\n  | 'in-expo'\n  | 'out-expo'\n  | 'in-out-expo'\n  | 'out-in-expo'\n  | 'in-sine'\n  | 'out-sine'\n  | 'in-out-sine'\n  | 'out-in-sine'\n  | 'in-circ'\n  | 'out-circ'\n  | 'in-out-circ'\n  | 'out-in-circ'\n  | 'in-back'\n  | 'out-back'\n  | 'in-out-back'\n  | 'out-in-back'\n  | 'in-bounce'\n  | 'out-bounce'\n  | 'in-out-bounce'\n  | 'out-in-bounce'\n  | 'in-elastic'\n  | 'out-elastic'\n  | 'in-out-elastic'\n  | 'out-in-elastic'\n  | 'spring'\n  | 'spring-in'\n  | 'spring-out'\n  | 'spring-in-out'\n  | 'spring-out-in';\nexport const EasingFunctions: Record<EasingFunctionType, TypeEasingFunction> = {\n  steps: Steps,\n  'step-start': (t) => Steps(t, [1, 'start']),\n  'step-end': (t) => Steps(t, [1, 'end']),\n\n  linear: (t) => t,\n  'cubic-bezier': Bezier,\n  ease: (t) => Bezier(t, [0.25, 0.1, 0.25, 1.0]),\n\n  in: easein,\n  out: EaseOut(easein),\n  'in-out': EaseInOut(easein),\n  'out-in': EaseOutIn(easein),\n\n  'in-quad': Quad,\n  'out-quad': EaseOut(Quad),\n  'in-out-quad': EaseInOut(Quad),\n  'out-in-quad': EaseOutIn(Quad),\n\n  'in-cubic': Cubic,\n  'out-cubic': EaseOut(Cubic),\n  'in-out-cubic': EaseInOut(Cubic),\n  'out-in-cubic': EaseOutIn(Cubic),\n\n  'in-quart': Quart,\n  'out-quart': EaseOut(Quart),\n  'in-out-quart': EaseInOut(Quart),\n  'out-in-quart': EaseOutIn(Quart),\n\n  'in-quint': Quint,\n  'out-quint': EaseOut(Quint),\n  'in-out-quint': EaseInOut(Quint),\n  'out-in-quint': EaseOutIn(Quint),\n\n  'in-expo': Expo,\n  'out-expo': EaseOut(Expo),\n  'in-out-expo': EaseInOut(Expo),\n  'out-in-expo': EaseOutIn(Expo),\n\n  'in-sine': Sine,\n  'out-sine': EaseOut(Sine),\n  'in-out-sine': EaseInOut(Sine),\n  'out-in-sine': EaseOutIn(Sine),\n\n  'in-circ': Circ,\n  'out-circ': EaseOut(Circ),\n  'in-out-circ': EaseInOut(Circ),\n  'out-in-circ': EaseOutIn(Circ),\n\n  'in-back': Back,\n  'out-back': EaseOut(Back),\n  'in-out-back': EaseInOut(Back),\n  'out-in-back': EaseOutIn(Back),\n\n  'in-bounce': Bounce,\n  'out-bounce': EaseOut(Bounce),\n  'in-out-bounce': EaseInOut(Bounce),\n  'out-in-bounce': EaseOutIn(Bounce),\n\n  'in-elastic': Elastic,\n  'out-elastic': EaseOut(Elastic),\n  'in-out-elastic': EaseInOut(Elastic),\n  'out-in-elastic': EaseOutIn(Elastic),\n\n  spring: Spring,\n  'spring-in': Spring,\n  'spring-out': EaseOut(Spring),\n  'spring-in-out': EaseInOut(Spring),\n  'spring-out-in': EaseOutIn(Spring),\n};\n\n/**\n * Convert string easing to their proper form\n */\nconst complexEasingSyntax = (ease: string) =>\n  convertToDash(ease)\n    .replace(/^ease-/, '') // Remove the \"ease-\" keyword\n    .replace(/(\\(|\\s).+/, '') // Remove the function brackets and parameters\n    .toLowerCase()\n    .trim();\n\n/** Re-maps a number from one range to another. Numbers outside the range are not clamped to 0 and 1, because out-of-range values are often intentional and useful. */\nexport const getEasingFunction = (ease: string) => {\n  return EasingFunctions[complexEasingSyntax(ease)] || EasingFunctions.linear;\n};\n\n// /**\n//  * Allows you to register new easing functions\n//  */\n// export const registerEasingFunction = (key: string, fn: TypeEasingFunction) => {\n//   Object.assign(EasingFunctions, {\n//     [key]: fn,\n//   });\n// };\n\n// /**\n//  * Allows you to register multiple new easing functions\n//  */\n// export const registerEasingFunctions = (...obj: typeof EasingFunctions[]) => {\n//   Object.assign(EasingFunctions, ...obj);\n// };\n", "import type { AnimationEffectTiming } from '../dom/AnimationEffectTiming';\nimport { bezier } from './bezier-easing';\nimport { convertToDash, getEasingFunction } from './custom-easing';\n\nexport const linear = (x: number) => {\n  return x;\n};\n\nconst Start = 1;\nconst Middle = 0.5;\nconst End = 0;\n\nfunction step(count: number, pos: number) {\n  return function (x: number) {\n    if (x >= 1) {\n      return 1;\n    }\n    const stepSize = 1 / count;\n    x += pos * stepSize;\n    return x - (x % stepSize);\n  };\n}\n\nconst numberString = '\\\\s*(-?\\\\d+\\\\.?\\\\d*|-?\\\\.\\\\d+)\\\\s*';\nconst cubicBezierRe = new RegExp(\n  `cubic-bezier\\\\(${numberString},${numberString},${numberString},${numberString}\\\\)`,\n);\nconst step1Re = /steps\\(\\s*(\\d+)\\s*\\)/;\nconst step2Re = /steps\\(\\s*(\\d+)\\s*,\\s*(start|middle|end)\\s*\\)/;\n\nexport function parseEasingFunction(\n  normalizedEasing: string,\n): (t: number) => number {\n  const cubicData = cubicBezierRe.exec(normalizedEasing);\n  if (cubicData) {\n    // @ts-ignore\n    return bezier(...cubicData.slice(1).map(Number));\n  }\n  const step1Data = step1Re.exec(normalizedEasing);\n  if (step1Data) {\n    return step(Number(step1Data[1]), End);\n  }\n  const step2Data = step2Re.exec(normalizedEasing);\n  if (step2Data) {\n    // @ts-ignore\n    return step(\n      Number(step2Data[1]),\n      { start: Start, middle: Middle, end: End }[step2Data[2]],\n    );\n  }\n  return getEasingFunction(normalizedEasing);\n}\n\nexport function calculateActiveDuration(timing: EffectTiming) {\n  // @ts-ignore\n  return Math.abs(repeatedDuration(timing) / (timing.playbackRate || 1));\n}\n\nfunction repeatedDuration(timing: EffectTiming): number {\n  // https://drafts.csswg.org/web-animations/#calculating-the-active-duration\n  if (timing.duration === 0 || timing.iterations === 0) {\n    return 0;\n  }\n\n  // @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/duration#value\n  // if (timing.duration === 'auto') {\n  //   timing.duration = 0;\n  // }\n\n  return (\n    (timing.duration === 'auto' ? 0 : Number(timing.duration)) *\n    (timing.iterations ?? 1)\n  );\n}\n\nconst PhaseNone = 0;\nconst PhaseBefore = 1;\nconst PhaseAfter = 2;\nconst PhaseActive = 3;\n\nfunction calculatePhase(\n  activeDuration: number,\n  localTime: number | null,\n  timing: AnimationEffectTiming,\n) {\n  // https://drafts.csswg.org/web-animations/#animation-effect-phases-and-states\n  if (localTime === null) {\n    return PhaseNone;\n  }\n\n  const { endTime } = timing;\n  if (localTime < Math.min(timing.delay, endTime)) {\n    return PhaseBefore;\n  }\n  if (\n    localTime >=\n    Math.min(timing.delay + activeDuration + timing.endDelay, endTime)\n  ) {\n    return PhaseAfter;\n  }\n\n  return PhaseActive;\n}\n\nfunction calculateActiveTime(\n  activeDuration: any,\n  fillMode: string,\n  localTime: number,\n  phase: number,\n  delay: number,\n) {\n  // https://drafts.csswg.org/web-animations/#calculating-the-active-time\n  switch (phase) {\n    case PhaseBefore:\n      if (fillMode === 'backwards' || fillMode === 'both') return 0;\n      return null;\n    case PhaseActive:\n      return localTime - delay;\n    case PhaseAfter:\n      if (fillMode === 'forwards' || fillMode === 'both') return activeDuration;\n      return null;\n    case PhaseNone:\n      return null;\n  }\n}\n\nfunction calculateOverallProgress(\n  iterationDuration: number,\n  phase: number,\n  iterations: number,\n  activeTime: number,\n  iterationStart: number,\n) {\n  // https://drafts.csswg.org/web-animations/#calculating-the-overall-progress\n  let overallProgress = iterationStart;\n  if (iterationDuration === 0) {\n    if (phase !== PhaseBefore) {\n      overallProgress += iterations;\n    }\n  } else {\n    overallProgress += activeTime / iterationDuration;\n  }\n  return overallProgress;\n}\n\nfunction calculateSimpleIterationProgress(\n  overallProgress: number,\n  iterationStart: number,\n  phase: number,\n  iterations: number,\n  activeTime: number,\n  iterationDuration: number,\n) {\n  // https://drafts.csswg.org/web-animations/#calculating-the-simple-iteration-progress\n\n  let simpleIterationProgress =\n    overallProgress === Infinity ? iterationStart % 1 : overallProgress % 1;\n  if (\n    simpleIterationProgress === 0 &&\n    phase === PhaseAfter &&\n    iterations !== 0 &&\n    (activeTime !== 0 || iterationDuration === 0)\n  ) {\n    simpleIterationProgress = 1;\n  }\n  return simpleIterationProgress;\n}\n\nfunction calculateCurrentIteration(\n  phase: number,\n  iterations: number,\n  simpleIterationProgress: number,\n  overallProgress: number,\n) {\n  // https://drafts.csswg.org/web-animations/#calculating-the-current-iteration\n  if (phase === PhaseAfter && iterations === Infinity) {\n    return Infinity;\n  }\n  if (simpleIterationProgress === 1) {\n    return Math.floor(overallProgress) - 1;\n  }\n  return Math.floor(overallProgress);\n}\n\nfunction calculateDirectedProgress(\n  playbackDirection: string,\n  currentIteration: number,\n  simpleIterationProgress: number,\n) {\n  // https://drafts.csswg.org/web-animations/#calculating-the-directed-progress\n  let currentDirection = playbackDirection;\n  if (playbackDirection !== 'normal' && playbackDirection !== 'reverse') {\n    let d = currentIteration;\n    if (playbackDirection === 'alternate-reverse') {\n      d += 1;\n    }\n    currentDirection = 'normal';\n    if (d !== Infinity && d % 2 !== 0) {\n      currentDirection = 'reverse';\n    }\n  }\n  if (currentDirection === 'normal') {\n    return simpleIterationProgress;\n  }\n  return 1 - simpleIterationProgress;\n}\n\nexport function calculateIterationProgress(\n  activeDuration: number,\n  localTime: number,\n  timing: AnimationEffectTiming,\n) {\n  const phase = calculatePhase(activeDuration, localTime, timing);\n  const activeTime = calculateActiveTime(\n    activeDuration,\n    timing.fill,\n    localTime,\n    phase,\n    timing.delay,\n  );\n  if (activeTime === null) return null;\n\n  const duration = timing.duration === 'auto' ? 0 : timing.duration;\n  const overallProgress = calculateOverallProgress(\n    duration,\n    phase,\n    timing.iterations,\n    activeTime,\n    timing.iterationStart,\n  );\n  const simpleIterationProgress = calculateSimpleIterationProgress(\n    overallProgress,\n    timing.iterationStart,\n    phase,\n    timing.iterations,\n    activeTime,\n    duration,\n  );\n  const currentIteration = calculateCurrentIteration(\n    phase,\n    timing.iterations,\n    simpleIterationProgress,\n    overallProgress,\n  );\n\n  const directedProgress = calculateDirectedProgress(\n    timing.direction,\n    currentIteration,\n    simpleIterationProgress,\n  );\n\n  timing.currentIteration = currentIteration;\n  timing.progress = directedProgress;\n\n  // https://drafts.csswg.org/web-animations/#calculating-the-transformed-progress\n  // https://drafts.csswg.org/web-animations/#calculating-the-iteration-progress\n  return timing.easingFunction(directedProgress);\n}\n\n/**\n * From: [https://easings.net]\n * Read More about easings on [MDN](https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/easing)\n */\nexport const EASINGS: Record<string, string> = {\n  in: 'ease-in',\n  out: 'ease-out',\n  'in-out': 'ease-in-out',\n\n  // Sine\n  'in-sine': 'cubic-bezier(0.47, 0, 0.745, 0.715)',\n  'out-sine': 'cubic-bezier(0.39, 0.575, 0.565, 1)',\n  'in-out-sine': 'cubic-bezier(0.445, 0.05, 0.55, 0.95)',\n\n  // Quad\n  'in-quad': 'cubic-bezier(0.55, 0.085, 0.68, 0.53)',\n  'out-quad': 'cubic-bezier(0.25, 0.46, 0.45, 0.94)',\n  'in-out-quad': 'cubic-bezier(0.455, 0.03, 0.515, 0.955)',\n\n  // Cubic\n  'in-cubic': 'cubic-bezier(0.55, 0.055, 0.675, 0.19)',\n  'out-cubic': 'cubic-bezier(0.215, 0.61, 0.355, 1)',\n  'in-out-cubic': 'cubic-bezier(0.645, 0.045, 0.355, 1)',\n\n  // Quart\n  'in-quart': 'cubic-bezier(0.895, 0.03, 0.685, 0.22)',\n  'out-quart': 'cubic-bezier(0.165, 0.84, 0.44, 1)',\n  'in-out-quart': 'cubic-bezier(0.77, 0, 0.175, 1)',\n\n  // Quint\n  'in-quint': 'cubic-bezier(0.755, 0.05, 0.855, 0.06)',\n  'out-quint': 'cubic-bezier(0.23, 1, 0.32, 1)',\n  'in-out-quint': 'cubic-bezier(0.86, 0, 0.07, 1)',\n\n  // Expo\n  'in-expo': 'cubic-bezier(0.95, 0.05, 0.795, 0.035)',\n  'out-expo': 'cubic-bezier(0.19, 1, 0.22, 1)',\n  'in-out-expo': 'cubic-bezier(1, 0, 0, 1)',\n\n  // Circ\n  'in-circ': 'cubic-bezier(0.6, 0.04, 0.98, 0.335)',\n  'out-circ': 'cubic-bezier(0.075, 0.82, 0.165, 1)',\n  'in-out-circ': 'cubic-bezier(0.785, 0.135, 0.15, 0.86)',\n\n  // Back\n  'in-back': 'cubic-bezier(0.6, -0.28, 0.735, 0.045)',\n  'out-back': 'cubic-bezier(0.175, 0.885, 0.32, 1.275)',\n  'in-out-back': 'cubic-bezier(0.68, -0.55, 0.265, 1.55)',\n};\nexport const EasingKeys = Object.keys(EASINGS);\n\n/**\n * Converts users input into a usable easing function string\n */\nexport const getEase = (ease: keyof typeof EASINGS = 'ease'): string => {\n  // Convert camelCase strings into dashed strings, then Remove the \"ease-\" keyword\n  const search = convertToDash(ease).replace(/^ease-/, '');\n  return EASINGS[search] || ease;\n};\n", "import type {\n  IAnimationEffectTiming,\n  IElement,\n  Interpolatable,\n  TypeEasingFunction,\n} from '@antv/g-lite';\nimport { propertyMetadataCache, runtime } from '@antv/g-lite';\nimport { isNumber } from '@antv/util';\nimport { parseEasingFunction } from './animation';\n\nexport function convertEffectInput(\n  keyframes: ComputedKeyframe[],\n  timing: IAnimationEffectTiming,\n  target: IElement | null,\n) {\n  const propertySpecificKeyframeGroups = makePropertySpecificKeyframeGroups(\n    keyframes,\n    timing,\n  );\n  const interpolations = makeInterpolations(\n    propertySpecificKeyframeGroups,\n    target,\n  );\n\n  return function (target: IElement, fraction: number) {\n    if (fraction !== null) {\n      interpolations\n        .filter((interpolation) => {\n          return (\n            fraction >= interpolation.applyFrom &&\n            fraction < interpolation.applyTo\n          );\n        })\n        .forEach((interpolation) => {\n          const offsetFraction = fraction - interpolation.startOffset;\n          const localDuration =\n            interpolation.endOffset - interpolation.startOffset;\n          const scaledLocalTime =\n            localDuration === 0 ? 0 : offsetFraction / localDuration;\n          // apply updated attribute\n          target.setAttribute(\n            interpolation.property,\n            interpolation.interpolation(scaledLocalTime),\n            false,\n            false, // disable memoize\n          );\n\n          // if (interpolation.property === 'visibility') {\n          //   console.log(\n          //     scaledLocalTime,\n          //     interpolation.interpolation(scaledLocalTime),\n          //   );\n          // }\n        });\n    } else {\n      for (const property in propertySpecificKeyframeGroups)\n        if (isNotReservedWord(property)) {\n          // clear attribute\n          target.setAttribute(property, null);\n        }\n    }\n  };\n}\n\ninterface PropertySpecificKeyframe {\n  offset: number | null;\n  computedOffset: number;\n  easing: string;\n  easingFunction: TypeEasingFunction;\n  value: any;\n}\n\nfunction isNotReservedWord(member: string) {\n  return (\n    member !== 'offset' &&\n    member !== 'easing' &&\n    member !== 'composite' &&\n    member !== 'computedOffset'\n  );\n}\n\nfunction makePropertySpecificKeyframeGroups(\n  keyframes: ComputedKeyframe[],\n  timing: IAnimationEffectTiming,\n) {\n  const propertySpecificKeyframeGroups: Record<\n    string,\n    PropertySpecificKeyframe[]\n  > = {};\n\n  for (let i = 0; i < keyframes.length; i++) {\n    for (const member in keyframes[i]) {\n      if (isNotReservedWord(member)) {\n        const propertySpecificKeyframe = {\n          offset: keyframes[i].offset,\n          computedOffset: keyframes[i].computedOffset,\n          easing: keyframes[i].easing,\n          easingFunction:\n            parseEasingFunction(keyframes[i].easing) || timing.easingFunction,\n          value: keyframes[i][member],\n        };\n        propertySpecificKeyframeGroups[member] =\n          propertySpecificKeyframeGroups[member] || [];\n        propertySpecificKeyframeGroups[member].push(propertySpecificKeyframe);\n      }\n    }\n  }\n  return propertySpecificKeyframeGroups;\n}\n\nfunction makeInterpolations(\n  propertySpecificKeyframeGroups: Record<string, PropertySpecificKeyframe[]>,\n  target: IElement | null,\n) {\n  const interpolations = [];\n  for (const groupName in propertySpecificKeyframeGroups) {\n    const keyframes = propertySpecificKeyframeGroups[groupName];\n    for (let i = 0; i < keyframes.length - 1; i++) {\n      let startIndex = i;\n      let endIndex = i + 1;\n      const startOffset = keyframes[startIndex].computedOffset;\n      const endOffset = keyframes[endIndex].computedOffset;\n      let applyFrom = startOffset;\n      let applyTo = endOffset;\n\n      if (i === 0) {\n        applyFrom = -Infinity;\n        if (endOffset === 0) {\n          endIndex = startIndex;\n        }\n      }\n      if (i === keyframes.length - 2) {\n        applyTo = Infinity;\n        if (startOffset === 1) {\n          startIndex = endIndex;\n        }\n      }\n\n      interpolations.push({\n        applyFrom,\n        applyTo,\n        startOffset: keyframes[startIndex].computedOffset,\n        endOffset: keyframes[endIndex].computedOffset,\n        easingFunction: keyframes[startIndex].easingFunction,\n        property: groupName,\n        interpolation: propertyInterpolation(\n          groupName,\n          keyframes[startIndex].value,\n          keyframes[endIndex].value,\n          target,\n        ),\n      });\n    }\n  }\n  interpolations.sort((leftInterpolation, rightInterpolation) => {\n    return leftInterpolation.startOffset - rightInterpolation.startOffset;\n  });\n  return interpolations;\n}\n\nconst InterpolationFactory = (\n  from: Interpolatable,\n  to: Interpolatable,\n  convertToString: Function,\n) => {\n  return (f: number) => {\n    const interpolated = interpolate(from, to, f);\n    return isNumber(interpolated)\n      ? interpolated\n      : convertToString(interpolated);\n  };\n};\n\nfunction propertyInterpolation(\n  property: string,\n  left: string | number,\n  right: string | number,\n  target: IElement | null,\n) {\n  const metadata = propertyMetadataCache[property];\n\n  if (metadata && metadata.syntax && metadata.int) {\n    const propertyHandler = runtime.styleValueRegistry.getPropertySyntax(\n      metadata.syntax,\n    );\n\n    if (propertyHandler) {\n      const parser = propertyHandler.parser;\n      const usedLeft = parser ? parser(left, target) : left;\n      const usedRight = parser ? parser(right, target) : right;\n\n      // merger [left, right, n2string()]\n      const interpolationArgs = propertyHandler.mixer(\n        usedLeft,\n        usedRight,\n        target,\n      );\n      if (interpolationArgs) {\n        const interp = InterpolationFactory(\n          // @ts-ignore\n          ...interpolationArgs,\n        );\n        return function (t: number) {\n          if (t === 0) return left;\n          if (t === 1) return right;\n          return interp(t);\n        };\n      }\n    }\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-use-before-define\n  return InterpolationFactory(false, true, function (bool: boolean) {\n    return bool ? right : left;\n  });\n}\n\n/**\n * interpolate with number, boolean, number[], boolean[]\n */\nfunction interpolate(\n  from: Interpolatable,\n  to: Interpolatable,\n  f: number,\n): Interpolatable {\n  if (typeof from === 'number' && typeof to === 'number') {\n    return from * (1 - f) + to * f;\n  }\n  if (\n    (typeof from === 'boolean' && typeof to === 'boolean') ||\n    (typeof from === 'string' && typeof to === 'string') // skip string, eg. path ['M', 10, 10]\n  ) {\n    return f < 0.5 ? from : to;\n  }\n\n  if (Array.isArray(from) && Array.isArray(to)) {\n    // interpolate arrays/matrix\n    const fromLength = from.length;\n    const toLength = to.length;\n    const length = Math.max(fromLength, toLength);\n\n    const r: number[] = [];\n    for (let i = 0; i < length; i++) {\n      r.push(\n        interpolate(\n          from[i < fromLength ? i : fromLength - 1],\n          to[i < toLength ? i : toLength - 1],\n          f,\n        ) as number,\n      );\n    }\n    return r;\n  }\n  throw new Error(`Mismatched interpolation arguments ${from}:${to}`);\n}\n", "import { linear, parseEasingFunction } from '../utils/animation';\nimport type { KeyframeEffect } from './KeyframeEffect';\n\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming\n */\nexport class AnimationEffectTiming implements EffectTiming {\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/delay\n   */\n  delay = 0;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/direction\n   */\n  direction: PlaybackDirection = 'normal';\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/duration\n   */\n  duration: number | 'auto' = 'auto';\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/easing\n   */\n  private _easing = 'linear';\n  easingFunction = linear;\n  get easing() {\n    return this._easing;\n  }\n  set easing(value: string) {\n    this.easingFunction = parseEasingFunction(value);\n    this._easing = value;\n  }\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/endDelay\n   */\n  endDelay = 0;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/fill\n   */\n  fill: FillMode = 'auto';\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/iterationStart\n   */\n  iterationStart = 0;\n\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/EffectTiming/iterations\n   */\n  iterations = 1;\n\n  /**\n   * @deprecated\n   */\n  playbackRate: number;\n\n  /**\n   * ref to effect\n   */\n  effect: KeyframeEffect;\n\n  composite: string;\n\n  /**\n   * ComputedEffectTiming\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/AnimationEffect/getComputedTiming\n   */\n  activeDuration: number;\n\n  endTime: number;\n\n  currentIteration: number | null = null;\n\n  progress: number | null = null;\n}\n", "import { isNil } from '@antv/util';\nimport type { AnimationEffectTiming } from './AnimationEffectTiming';\n\n/**\n * @example\n  {\n    translateY: [200, 300],\n    scale: [1, 10],\n  }\n\n * groups' length can be different, the following config should generate 3 frames:\n  @example\n  {\n    translateY: [200, 300, 400],\n    scale: [1, 10],\n  }\n */\nfunction convertToArrayForm(effectInput: PropertyIndexedKeyframes) {\n  const normalizedEffectInput: Keyframe[] = [];\n\n  for (const property in effectInput) {\n    // skip reserved props\n    if (property in ['easing', 'offset', 'composite']) {\n      continue;\n    }\n\n    // @ts-ignore\n    let values: string[] | (number | null)[] = effectInput[property];\n    if (!Array.isArray(values)) {\n      values = [values];\n    }\n\n    const numKeyframes = values.length;\n    for (let i = 0; i < numKeyframes; i++) {\n      if (!normalizedEffectInput[i]) {\n        const keyframe: Keyframe = {};\n        if ('offset' in effectInput) {\n          keyframe.offset = Number(effectInput.offset);\n        }\n\n        if ('easing' in effectInput) {\n          // @ts-ignore\n          keyframe.easing = effectInput.easing;\n        }\n\n        if ('composite' in effectInput) {\n          // @ts-ignore\n          keyframe.composite = effectInput.composite;\n        }\n        normalizedEffectInput[i] = keyframe;\n      }\n\n      if (values[i] !== undefined && values[i] !== null) {\n        normalizedEffectInput[i][property] = values[i];\n      }\n    }\n  }\n\n  normalizedEffectInput.sort(function (a, b) {\n    return (\n      ((a.computedOffset as number) || 0) - ((b.computedOffset as number) || 0)\n    );\n  });\n  return normalizedEffectInput;\n}\n\nexport function normalizeKeyframes(\n  effectInput: Keyframe[] | PropertyIndexedKeyframes | null,\n  timing?: AnimationEffectTiming,\n): ComputedKeyframe[] {\n  if (effectInput === null) {\n    return [];\n  }\n\n  if (!Array.isArray(effectInput)) {\n    effectInput = convertToArrayForm(effectInput);\n  }\n\n  let keyframes = effectInput.map((originalKeyframe) => {\n    const keyframe: Keyframe = {};\n\n    if (timing?.composite) {\n      // This will be auto if the composite operation specified on the effect is being used.\n      // @see https://developer.mozilla.org/en-US/docs/Web/API/Web_Animations_API/Keyframe_Formats\n      keyframe.composite = 'auto';\n    }\n\n    for (const member in originalKeyframe) {\n      let memberValue = originalKeyframe[member];\n      if (member === 'offset') {\n        if (memberValue !== null) {\n          memberValue = Number(memberValue);\n          if (!isFinite(memberValue))\n            throw new Error('Keyframe offsets must be numbers.');\n          if (memberValue < 0 || memberValue > 1)\n            throw new Error('Keyframe offsets must be between 0 and 1.');\n          keyframe.computedOffset = memberValue;\n        }\n      } else if (member === 'composite') {\n        // TODO: Support add & accumulate in KeyframeEffect.composite\n        // @see https://developer.mozilla.org/en-US/docs/Web/API/KeyframeEffect/composite\n        if (\n          ['replace', 'add', 'accumulate', 'auto'].indexOf(\n            memberValue as string,\n          ) === -1\n        ) {\n          throw new Error(`${memberValue} compositing is not supported`);\n        }\n      } else if (member === 'easing') {\n        // TODO: Validate animation-timing-function\n        // @see https://developer.mozilla.org/en-US/docs/Web/CSS/animation-timing-function\n        // memberValue = memberValue;\n        // } else {\n        //   memberValue = '' + memberValue;\n      }\n\n      // assign to keyframe, no need to parse shorthand value\n      keyframe[member] = memberValue;\n    }\n    if (keyframe.offset === undefined) {\n      keyframe.offset = null;\n    }\n    if (keyframe.easing === undefined) {\n      // override with timing.easing\n      keyframe.easing = timing?.easing || 'linear';\n    }\n    if (keyframe.composite === undefined) {\n      keyframe.composite = 'auto';\n    }\n    return keyframe;\n  });\n\n  let everyFrameHasOffset = true;\n  let previousOffset = -Infinity;\n  for (let i = 0; i < keyframes.length; i++) {\n    const { offset } = keyframes[i];\n    if (!isNil(offset)) {\n      if (offset < previousOffset) {\n        throw new TypeError(\n          'Keyframes are not loosely sorted by offset. Sort or specify offsets.',\n        );\n      }\n      previousOffset = offset;\n    } else {\n      everyFrameHasOffset = false;\n    }\n  }\n\n  keyframes = keyframes.filter((keyframe) => {\n    return Number(keyframe.offset) >= 0 && Number(keyframe.offset) <= 1;\n  });\n\n  function spaceKeyframes() {\n    const { length } = keyframes;\n    keyframes[length - 1].computedOffset = Number(\n      keyframes[length - 1].offset ?? 1,\n    );\n    if (length > 1) {\n      keyframes[0].computedOffset = Number(keyframes[0].offset ?? 0);\n    }\n\n    let previousIndex = 0;\n    let previousOffset = Number(keyframes[0].computedOffset);\n    for (let i = 1; i < length; i++) {\n      const offset = keyframes[i].computedOffset;\n      if (!isNil(offset) && !isNil(previousOffset)) {\n        for (let j = 1; j < i - previousIndex; j++)\n          keyframes[previousIndex + j].computedOffset =\n            previousOffset +\n            ((Number(offset) - previousOffset) * j) / (i - previousIndex);\n        previousIndex = i;\n        previousOffset = Number(offset);\n      }\n    }\n  }\n  if (!everyFrameHasOffset) spaceKeyframes();\n\n  return keyframes as ComputedKeyframe[];\n}\n", "import { IElement, IKeyframeEffect, runtime } from '@antv/g-lite';\nimport {\n  calculateActiveDuration,\n  calculateIterationProgress,\n  convertEffectInput,\n} from '../utils';\nimport type { Animation } from './Animation';\nimport { AnimationEffectTiming } from './AnimationEffectTiming';\nimport { normalizeKeyframes } from './KeyframeList';\n\nconst fills = 'backwards|forwards|both|none'.split('|');\nconst directions = 'reverse|alternate|alternate-reverse'.split('|');\nexport function makeTiming(\n  timingInput: KeyframeEffectOptions,\n  forGroup: boolean,\n) {\n  const timing = new AnimationEffectTiming();\n  if (forGroup) {\n    timing.fill = 'both';\n    timing.duration = 'auto';\n  }\n  if (typeof timingInput === 'number' && !isNaN(timingInput)) {\n    timing.duration = timingInput;\n  } else if (timingInput !== undefined) {\n    (Object.keys(timingInput) as (keyof EffectTiming)[]).forEach((property) => {\n      if (\n        timingInput[property] !== undefined &&\n        timingInput[property] !== null &&\n        timingInput[property] !== 'auto'\n      ) {\n        if (typeof timing[property] === 'number' || property === 'duration') {\n          if (\n            typeof timingInput[property] !== 'number' ||\n            isNaN(timingInput[property])\n          ) {\n            return;\n          }\n        }\n        if (\n          property === 'fill' &&\n          fills.indexOf(timingInput[property]) === -1\n        ) {\n          return;\n        }\n        if (\n          property === 'direction' &&\n          directions.indexOf(timingInput[property]) === -1\n        ) {\n          return;\n        }\n        // @ts-ignore\n        timing[property] = timingInput[property];\n      }\n    });\n  }\n  return timing;\n}\n\nexport function normalizeTimingInput(\n  timingInput: KeyframeEffectOptions | number | undefined,\n  forGroup: boolean,\n) {\n  timingInput = numericTimingToObject(timingInput ?? { duration: 'auto' });\n  return makeTiming(timingInput, forGroup);\n}\n\nexport function numericTimingToObject(\n  timingInput: KeyframeEffectOptions | number,\n) {\n  if (typeof timingInput === 'number') {\n    if (isNaN(timingInput)) {\n      timingInput = { duration: 'auto' };\n    } else {\n      timingInput = { duration: timingInput };\n    }\n  }\n  return timingInput;\n}\n\n/**\n * @see https://developer.mozilla.org/en-US/docs/Web/API/KeyframeEffect\n * @example\n  const circleDownKeyframes = new KeyframeEffect(\n    circle, // element to animate\n    [\n      { transform: 'translateY(0)' }, // keyframe\n      { transform: 'translateY(100)' } // keyframe\n    ],\n    { duration: 3000, fill: 'forwards' } // keyframe options\n  );\n *\n */\nexport class KeyframeEffect implements IKeyframeEffect {\n  composite: CompositeOperation = 'replace';\n  iterationComposite: IterationCompositeOperation = 'replace';\n  // pseudoElement: string | null;\n  target: IElement | null;\n\n  animation: Animation | null;\n\n  timing: AnimationEffectTiming;\n  private computedTiming: ComputedEffectTiming;\n\n  normalizedKeyframes: ComputedKeyframe[];\n\n  private timeFraction: number | null;\n\n  private interpolations: (target: IElement, f: number) => void;\n\n  constructor(\n    target: IElement | null,\n    effectInput: Keyframe[] | PropertyIndexedKeyframes | null,\n    timingInput?: KeyframeEffectOptions | number,\n  ) {\n    this.target = target;\n    this.timing = normalizeTimingInput(timingInput, false);\n    this.timing.effect = this;\n    this.timing.activeDuration = calculateActiveDuration(this.timing);\n    this.timing.endTime = Math.max(\n      0,\n      this.timing.delay + this.timing.activeDuration + this.timing.endDelay,\n    );\n\n    this.normalizedKeyframes = normalizeKeyframes(effectInput, this.timing);\n    this.interpolations = convertEffectInput(\n      this.normalizedKeyframes,\n      this.timing,\n      this.target,\n    );\n\n    //  proxy  this.timing\n    const { Proxy } = runtime.globalThis;\n    this.computedTiming = Proxy\n      ? new Proxy<AnimationEffectTiming>(this.timing, {\n          get: (target, prop) => {\n            if (prop === 'duration') {\n              return target.duration === 'auto' ? 0 : target.duration;\n            }\n            if (prop === 'fill') {\n              return target.fill === 'auto' ? 'none' : target.fill;\n            }\n            if (prop === 'localTime') {\n              return (this.animation && this.animation.currentTime) || null;\n            }\n            if (prop === 'currentIteration') {\n              if (!this.animation || this.animation.playState !== 'running') {\n                return null;\n              }\n              return target.currentIteration || 0;\n            }\n            if (prop === 'progress') {\n              if (!this.animation || this.animation.playState !== 'running') {\n                return null;\n              }\n              return target.progress || 0;\n            }\n            return target[prop];\n          },\n          set: () => {\n            return true;\n          },\n        })\n      : this.timing;\n  }\n\n  applyInterpolations() {\n    this.interpolations(\n      this.target as unknown as IElement,\n      Number(this.timeFraction),\n    );\n  }\n\n  update(localTime: number | null): boolean {\n    if (localTime === null) {\n      return false;\n    }\n    this.timeFraction = calculateIterationProgress(\n      this.timing.activeDuration,\n      localTime,\n      this.timing,\n    );\n    return this.timeFraction !== null;\n  }\n\n  getKeyframes(): ComputedKeyframe[] {\n    return this.normalizedKeyframes;\n  }\n  setKeyframes(keyframes: Keyframe[] | PropertyIndexedKeyframes | null): void {\n    this.normalizedKeyframes = normalizeKeyframes(keyframes);\n  }\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/AnimationEffect/getComputedTiming\n   */\n  getComputedTiming(): ComputedEffectTiming {\n    return this.computedTiming;\n  }\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/AnimationEffect/getTiming\n   */\n  getTiming(): EffectTiming {\n    return this.timing;\n  }\n  /**\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/AnimationEffect/updateTiming\n   */\n  updateTiming(timing?: OptionalEffectTiming): void {\n    Object.keys(timing || {}).forEach((name) => {\n      this.timing[name] = timing[name];\n    });\n  }\n}\n", "import type {\n  IDocument,\n  IAnimationTimeline,\n  IElement,\n  IAnimation,\n} from '@antv/g-lite';\nimport { Animation } from './Animation';\nimport { KeyframeEffect } from './KeyframeEffect';\n\nexport function compareAnimations(\n  leftAnimation: IAnimation,\n  rightAnimation: IAnimation,\n) {\n  return Number(leftAnimation.id) - Number(rightAnimation.id);\n}\n\n/**\n * @see https://github.com/DefinitelyTyped/DefinitelyTyped/blob/master/types/web-animations-js/index.d.ts\n */\nexport class AnimationTimeline implements IAnimationTimeline {\n  /**\n   * all active animations\n   */\n  animations: Animation[] = [];\n\n  private ticking = false;\n\n  private timelineTicking = false;\n\n  private hasRestartedThisFrame = false;\n\n  animationsWithPromises: Animation[] = [];\n\n  private inTick = false;\n\n  private pendingEffects: (KeyframeEffect | null)[] = [];\n\n  currentTime: number | null = null;\n\n  private rafId = 0;\n  private rafCallbacks: [number, (x: number) => void][] = [];\n\n  private frameId: number;\n\n  constructor(private document: IDocument) {}\n\n  getAnimations() {\n    this.discardAnimations();\n    return this.animations.slice();\n  }\n\n  isTicking() {\n    return this.inTick;\n  }\n\n  play(\n    target: IElement,\n    keyframes: Keyframe[] | PropertyIndexedKeyframes | null,\n    options?: number | KeyframeAnimationOptions,\n  ): Animation {\n    const effect = new KeyframeEffect(target, keyframes, options);\n    const animation = new Animation(effect, this);\n    this.animations.push(animation);\n    this.restartWebAnimationsNextTick();\n    animation.updatePromises();\n    animation.play();\n    animation.updatePromises();\n    return animation;\n  }\n\n  // RAF is supposed to be the last script to occur before frame rendering but not\n  // all browsers behave like this. This function is for synchonously updating an\n  // animation's effects whenever its state is mutated by script to work around\n  // incorrect script execution ordering by the browser.\n  applyDirtiedAnimation(animation: Animation) {\n    if (this.inTick) {\n      return;\n    }\n    // update active animations in displayobject\n    animation.markTarget();\n    const animations = animation.targetAnimations();\n    animations.sort(compareAnimations);\n\n    // clear inactive animations\n    const inactiveAnimations = this.tick(\n      Number(this.currentTime),\n      false,\n      animations.slice(),\n    )[1];\n    inactiveAnimations.forEach((animation) => {\n      const index = this.animations.indexOf(animation);\n      if (index !== -1) {\n        this.animations.splice(index, 1);\n      }\n    });\n    this.applyPendingEffects();\n  }\n\n  restart() {\n    if (!this.ticking) {\n      this.ticking = true;\n      this.requestAnimationFrame(() => {});\n      this.hasRestartedThisFrame = true;\n    }\n    return this.hasRestartedThisFrame;\n  }\n\n  destroy() {\n    this.document.defaultView.cancelAnimationFrame(this.frameId);\n  }\n\n  applyPendingEffects() {\n    this.pendingEffects.forEach((effect) => {\n      effect?.applyInterpolations();\n    });\n    this.pendingEffects = [];\n  }\n\n  private updateAnimationsPromises() {\n    this.animationsWithPromises = this.animationsWithPromises.filter(\n      (animation) => {\n        return animation.updatePromises();\n      },\n    );\n  }\n\n  private discardAnimations() {\n    this.updateAnimationsPromises();\n    this.animations = this.animations.filter((animation) => {\n      return (\n        animation.playState !== 'finished' && animation.playState !== 'idle'\n      );\n    });\n  }\n\n  private restartWebAnimationsNextTick() {\n    if (!this.timelineTicking) {\n      this.timelineTicking = true;\n      this.requestAnimationFrame(this.webAnimationsNextTick);\n    }\n  }\n\n  private webAnimationsNextTick = (t: number) => {\n    this.currentTime = t;\n    this.discardAnimations();\n    if (this.animations.length === 0) {\n      this.timelineTicking = false;\n    } else {\n      this.requestAnimationFrame(this.webAnimationsNextTick);\n    }\n  };\n\n  private processRafCallbacks = (t: number) => {\n    const processing = this.rafCallbacks;\n    this.rafCallbacks = [];\n    if (t < Number(this.currentTime)) t = Number(this.currentTime);\n    this.animations.sort(compareAnimations);\n    this.animations = this.tick(t, true, this.animations)[0];\n    processing.forEach((entry) => {\n      entry[1](t);\n    });\n    this.applyPendingEffects();\n  };\n\n  private rAF(f: (x: number) => void) {\n    const id = this.rafId++;\n    if (this.rafCallbacks.length === 0) {\n      this.frameId = this.document.defaultView.requestAnimationFrame(\n        this.processRafCallbacks,\n      );\n    }\n    this.rafCallbacks.push([id, f]);\n    return id;\n  }\n\n  private requestAnimationFrame(f: (ts: number) => void) {\n    return this.rAF((x: number) => {\n      this.updateAnimationsPromises();\n      f(x);\n      this.updateAnimationsPromises();\n    });\n  }\n\n  tick(t: number, isAnimationFrame: boolean, updatingAnimations: IAnimation[]) {\n    this.inTick = true;\n    this.hasRestartedThisFrame = false;\n\n    this.currentTime = t;\n    this.ticking = false;\n\n    const newPendingClears: (KeyframeEffect | null)[] = [];\n    const newPendingEffects: (KeyframeEffect | null)[] = [];\n    const activeAnimations: Animation[] = [];\n    const inactiveAnimations: Animation[] = [];\n\n    (updatingAnimations as unknown as Animation[]).forEach((animation) => {\n      animation.tick(t, isAnimationFrame);\n\n      if (!animation._inEffect) {\n        newPendingClears.push(animation.effect);\n        animation.unmarkTarget();\n      } else {\n        newPendingEffects.push(animation.effect);\n        animation.markTarget();\n      }\n\n      if (animation._needsTick) this.ticking = true;\n\n      const alive = animation._inEffect || animation._needsTick;\n      animation._inTimeline = alive;\n      if (alive) {\n        activeAnimations.push(animation);\n      } else {\n        inactiveAnimations.push(animation);\n      }\n    });\n\n    this.pendingEffects.push(...newPendingClears);\n    this.pendingEffects.push(...newPendingEffects);\n\n    if (this.ticking) this.requestAnimationFrame(() => {});\n\n    this.inTick = false;\n    return [activeAnimations, inactiveAnimations];\n  }\n}\n", "import { runtime } from '@antv/g-lite';\nimport { AnimationTimeline } from './dom/AnimationTimeline';\nimport { parseEasingFunction } from './utils';\n\nexport * from './dom';\nexport { EasingFunctions } from './utils';\n\nruntime.EasingFunction = parseEasingFunction;\nruntime.AnimationTimeline = AnimationTimeline;\n", "import type { ParsedCircleStyleProps } from '@antv/g-lite';\n\nexport function generatePath(\n  context: CanvasRenderingContext2D,\n  parsedStyle: ParsedCircleStyleProps,\n) {\n  const { cx = 0, cy = 0, r } = parsedStyle;\n  context.arc(cx, cy, r, 0, Math.PI * 2, false);\n}\n", "import type { ParsedEllipseStyleProps } from '@antv/g-lite';\n\nexport function generatePath(\n  context: CanvasRenderingContext2D,\n  parsedStyle: ParsedEllipseStyleProps,\n) {\n  const { cx = 0, cy = 0, rx, ry } = parsedStyle;\n\n  // @see https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/ellipse\n  if (context.ellipse) {\n    context.ellipse(cx, cy, rx, ry, 0, 0, Math.PI * 2, false);\n  } else {\n    // \n    const r = rx > ry ? rx : ry;\n    const scaleX = rx > ry ? 1 : rx / ry;\n    const scaleY = rx > ry ? ry / rx : 1;\n    context.save();\n    context.scale(scaleX, scaleY);\n    context.arc(cx, cy, r, 0, Math.PI * 2);\n  }\n}\n", "import type { ParsedLineStyleProps } from '@antv/g-lite';\nimport { isDisplayObject } from '@antv/g-lite';\n\nexport function generatePath(\n  context: CanvasRenderingContext2D,\n  parsedStyle: ParsedLineStyleProps,\n) {\n  const {\n    x1,\n    y1,\n    x2,\n    y2,\n    markerStart,\n    markerEnd,\n    markerStartOffset,\n    markerEndOffset,\n  } = parsedStyle;\n\n  let startOffsetX = 0;\n  let startOffsetY = 0;\n  let endOffsetX = 0;\n  let endOffsetY = 0;\n\n  let rad = 0;\n  let x: number;\n  let y: number;\n\n  if (markerStart && isDisplayObject(markerStart) && markerStartOffset) {\n    x = x2 - x1;\n    y = y2 - y1;\n    rad = Math.atan2(y, x);\n    startOffsetX = Math.cos(rad) * (markerStartOffset || 0);\n    startOffsetY = Math.sin(rad) * (markerStartOffset || 0);\n  }\n\n  if (markerEnd && isDisplayObject(markerEnd) && markerEndOffset) {\n    x = x1 - x2;\n    y = y1 - y2;\n    rad = Math.atan2(y, x);\n    endOffsetX = Math.cos(rad) * (markerEndOffset || 0);\n    endOffsetY = Math.sin(rad) * (markerEndOffset || 0);\n  }\n\n  context.moveTo(x1 + startOffsetX, y1 + startOffsetY);\n  context.lineTo(x2 + endOffsetX, y2 + endOffsetY);\n}\n", "import type { ParsedPathStyleProps, Path } from '@antv/g-lite';\nimport { isDisplayObject } from '@antv/g-lite';\n\nexport function generatePath(\n  context: CanvasRenderingContext2D,\n  parsedStyle: ParsedPathStyleProps,\n) {\n  const { markerStart, markerEnd, markerStartOffset, markerEndOffset } =\n    parsedStyle;\n  const { absolutePath, segments } = parsedStyle.d;\n\n  let startOffsetX = 0;\n  let startOffsetY = 0;\n  let endOffsetX = 0;\n  let endOffsetY = 0;\n\n  let rad = 0;\n  let x: number;\n  let y: number;\n\n  if (markerStart && isDisplayObject(markerStart) && markerStartOffset) {\n    const [p1, p2] = (markerStart.parentNode as Path).getStartTangent();\n    x = p1[0] - p2[0];\n    y = p1[1] - p2[1];\n\n    rad = Math.atan2(y, x);\n    startOffsetX = Math.cos(rad) * (markerStartOffset || 0);\n    startOffsetY = Math.sin(rad) * (markerStartOffset || 0);\n  }\n\n  if (markerEnd && isDisplayObject(markerEnd) && markerEndOffset) {\n    const [p1, p2] = (markerEnd.parentNode as Path).getEndTangent();\n    x = p1[0] - p2[0];\n    y = p1[1] - p2[1];\n    rad = Math.atan2(y, x);\n    endOffsetX = Math.cos(rad) * (markerEndOffset || 0);\n    endOffsetY = Math.sin(rad) * (markerEndOffset || 0);\n  }\n\n  for (let i = 0; i < absolutePath.length; i++) {\n    const params = absolutePath[i];\n    const command = params[0];\n    const nextSegment = absolutePath[i + 1];\n    const useStartOffset =\n      i === 0 && (startOffsetX !== 0 || startOffsetY !== 0);\n    const useEndOffset =\n      (i === absolutePath.length - 1 ||\n        (nextSegment && (nextSegment[0] === 'M' || nextSegment[0] === 'Z'))) &&\n      endOffsetX !== 0 &&\n      endOffsetY !== 0;\n    const [startOffsetXTemp, startOffsetYTemp] = useStartOffset\n      ? [startOffsetX, startOffsetY]\n      : [0, 0];\n    const [endOffsetXTemp, endOffsetYTemp] = useEndOffset\n      ? [endOffsetX, endOffsetY]\n      : [0, 0];\n\n    switch (command) {\n      case 'M':\n        // Use start marker offset\n        context.moveTo(\n          params[1] + startOffsetXTemp,\n          params[2] + startOffsetYTemp,\n        );\n        break;\n      case 'L':\n        context.lineTo(params[1] + endOffsetXTemp, params[2] + endOffsetYTemp);\n        break;\n      case 'Q':\n        context.quadraticCurveTo(\n          params[1],\n          params[2],\n          params[3] + endOffsetXTemp,\n          params[4] + endOffsetYTemp,\n        );\n        break;\n      case 'C':\n        context.bezierCurveTo(\n          params[1],\n          params[2],\n          params[3],\n          params[4],\n          params[5] + endOffsetXTemp,\n          params[6] + endOffsetYTemp,\n        );\n        break;\n      case 'A': {\n        // FIXME startOffset / endOffset\n        const { arcParams } = segments[i];\n        const { cx, cy, rx, ry, startAngle, endAngle, xRotation, sweepFlag } =\n          arcParams;\n        // @see https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/ellipse\n        if (context.ellipse) {\n          context.ellipse(\n            cx,\n            cy,\n            rx,\n            ry,\n            xRotation,\n            startAngle,\n            endAngle,\n            !!(1 - sweepFlag),\n          );\n        } else {\n          // @see https://stackoverflow.com/a/47494351\n          const r = rx > ry ? rx : ry;\n          const scaleX = rx > ry ? 1 : rx / ry;\n          const scaleY = rx > ry ? ry / rx : 1;\n          context.translate(cx, cy);\n          context.rotate(xRotation);\n          context.scale(scaleX, scaleY);\n          context.arc(0, 0, r, startAngle, endAngle, !!(1 - sweepFlag));\n          context.scale(1 / scaleX, 1 / scaleY);\n          context.rotate(-xRotation);\n          context.translate(-cx, -cy);\n        }\n\n        if (useEndOffset) {\n          context.lineTo(params[6] + endOffsetX, params[7] + endOffsetY);\n        }\n        break;\n      }\n      case 'Z':\n        context.closePath();\n        break;\n      default:\n        break;\n    }\n  }\n}\n", "import type { ParsedPolygonStyleProps } from '@antv/g-lite';\nimport { isDisplayObject } from '@antv/g-lite';\n\nexport function generatePath(\n  context: CanvasRenderingContext2D,\n  parsedStyle: ParsedPolygonStyleProps,\n) {\n  const { markerStart, markerEnd, markerStartOffset, markerEndOffset } =\n    parsedStyle;\n  const { points } = parsedStyle.points;\n  const { length } = points;\n\n  const x1 = points[0][0];\n  const y1 = points[0][1];\n  const x2 = points[length - 1][0];\n  const y2 = points[length - 1][1];\n\n  let startOffsetX = 0;\n  let startOffsetY = 0;\n  let endOffsetX = 0;\n  let endOffsetY = 0;\n\n  let rad = 0;\n  let x: number;\n  let y: number;\n\n  if (markerStart && isDisplayObject(markerStart) && markerStartOffset) {\n    x = points[1][0] - points[0][0];\n    y = points[1][1] - points[0][1];\n    rad = Math.atan2(y, x);\n    startOffsetX = Math.cos(rad) * (markerStartOffset || 0);\n    startOffsetY = Math.sin(rad) * (markerStartOffset || 0);\n  }\n\n  if (markerEnd && isDisplayObject(markerEnd) && markerEndOffset) {\n    x = points[length - 1][0] - points[0][0];\n    y = points[length - 1][1] - points[0][1];\n    rad = Math.atan2(y, x);\n    endOffsetX = Math.cos(rad) * (markerEndOffset || 0);\n    endOffsetY = Math.sin(rad) * (markerEndOffset || 0);\n  }\n\n  context.moveTo(\n    x1 + (startOffsetX || endOffsetX),\n    y1 + (startOffsetY || endOffsetY),\n  );\n  for (let i = 1; i < length - 1; i++) {\n    const point = points[i];\n    context.lineTo(point[0], point[1]);\n  }\n  context.lineTo(x2, y2);\n}\n", "import type { ParsedPolylineStyleProps } from '@antv/g-lite';\nimport { isDisplayObject } from '@antv/g-lite';\n\nexport function generatePath(\n  context: CanvasRenderingContext2D,\n  parsedStyle: ParsedPolylineStyleProps,\n) {\n  const { markerStart, markerEnd, markerStartOffset, markerEndOffset } =\n    parsedStyle;\n  const { points } = parsedStyle.points;\n  const { length } = points;\n\n  const x1 = points[0][0];\n  const y1 = points[0][1];\n  const x2 = points[length - 1][0];\n  const y2 = points[length - 1][1];\n\n  let startOffsetX = 0;\n  let startOffsetY = 0;\n  let endOffsetX = 0;\n  let endOffsetY = 0;\n\n  let rad = 0;\n  let x: number;\n  let y: number;\n\n  if (markerStart && isDisplayObject(markerStart) && markerStartOffset) {\n    x = points[1][0] - points[0][0];\n    y = points[1][1] - points[0][1];\n    rad = Math.atan2(y, x);\n    startOffsetX = Math.cos(rad) * (markerStartOffset || 0);\n    startOffsetY = Math.sin(rad) * (markerStartOffset || 0);\n  }\n\n  if (markerEnd && isDisplayObject(markerEnd) && markerEndOffset) {\n    x = points[length - 2][0] - points[length - 1][0];\n    y = points[length - 2][1] - points[length - 1][1];\n    rad = Math.atan2(y, x);\n    endOffsetX = Math.cos(rad) * (markerEndOffset || 0);\n    endOffsetY = Math.sin(rad) * (markerEndOffset || 0);\n  }\n\n  context.moveTo(x1 + startOffsetX, y1 + startOffsetY);\n  for (let i = 1; i < length - 1; i++) {\n    const point = points[i];\n    context.lineTo(point[0], point[1]);\n  }\n  context.lineTo(x2 + endOffsetX, y2 + endOffsetY);\n}\n", "import type { ParsedRectStyleProps } from '@antv/g-lite';\nimport { clamp } from '@antv/util';\n\nexport function generatePath(\n  context: CanvasRenderingContext2D,\n  parsedStyle: ParsedRectStyleProps,\n) {\n  const { x = 0, y = 0, radius, width, height } = parsedStyle;\n\n  const w = width;\n  const h = height;\n  const hasRadius = radius && radius.some((r) => r !== 0);\n\n  if (!hasRadius) {\n    // Canvas support negative width/height of rect\n    context.rect(x, y, w, h);\n  } else {\n    const signX = width > 0 ? 1 : -1;\n    const signY = height > 0 ? 1 : -1;\n    const sweepFlag = signX + signY === 0;\n    const [tlr, trr, brr, blr] = radius.map((r) =>\n      clamp(r, 0, Math.min(Math.abs(w) / 2, Math.abs(h) / 2)),\n    );\n\n    context.moveTo(signX * tlr + x, y);\n    context.lineTo(w - signX * trr + x, y);\n    if (trr !== 0) {\n      context.arc(\n        w - signX * trr + x,\n        signY * trr + y,\n        trr,\n        (-signY * Math.PI) / 2,\n        signX > 0 ? 0 : Math.PI,\n        sweepFlag,\n      );\n    }\n    context.lineTo(w + x, h - signY * brr + y);\n    if (brr !== 0) {\n      context.arc(\n        w - signX * brr + x,\n        h - signY * brr + y,\n        brr,\n        signX > 0 ? 0 : Math.PI,\n        signY > 0 ? Math.PI / 2 : 1.5 * Math.PI,\n        sweepFlag,\n      );\n    }\n    context.lineTo(signX * blr + x, h + y);\n    if (blr !== 0) {\n      context.arc(\n        signX * blr + x,\n        h - signY * blr + y,\n        blr,\n        signY > 0 ? Math.PI / 2 : -Math.PI / 2,\n        signX > 0 ? Math.PI : 0,\n        sweepFlag,\n      );\n    }\n    context.lineTo(x, signY * tlr + y);\n    if (tlr !== 0) {\n      context.arc(\n        signX * tlr + x,\n        signY * tlr + y,\n        tlr,\n        signX > 0 ? Math.PI : 0,\n        signY > 0 ? Math.PI * 1.5 : Math.PI / 2,\n        sweepFlag,\n      );\n    }\n  }\n}\n", "import { AbstractRendererPlugin, Shape } from '@antv/g-lite';\nimport type { PathGenerator } from './interfaces';\nimport {\n  CirclePath,\n  EllipsePath,\n  LinePath,\n  PathPath,\n  PolygonPath,\n  PolylinePath,\n  RectPath,\n} from './paths';\n\nexport class Plugin extends AbstractRendererPlugin<{\n  pathGeneratorFactory: Record<Shape, PathGenerator<any>>;\n}> {\n  name = 'canvas-path-generator';\n  init(): void {\n    const pathGeneratorFactory: Record<Shape, PathGenerator<any>> = {\n      [Shape.CIRCLE]: CirclePath,\n      [Shape.ELLIPSE]: EllipsePath,\n      [Shape.RECT]: RectPath,\n      [Shape.LINE]: LinePath,\n      [Shape.POLYLINE]: PolylinePath,\n      [Shape.POLYGON]: PolygonPath,\n      [Shape.PATH]: PathPath,\n      [Shape.TEXT]: undefined,\n      [Shape.GROUP]: undefined,\n      [Shape.IMAGE]: undefined,\n      [Shape.HTML]: undefined,\n      [Shape.MESH]: undefined,\n      [Shape.FRAGMENT]: undefined,\n    };\n\n    // @ts-ignore\n    this.context.pathGeneratorFactory = pathGeneratorFactory;\n  }\n  destroy(): void {\n    // @ts-ignore\n    delete this.context.pathGeneratorFactory;\n  }\n}\n\nexport * from './interfaces';\n", "import type {\n  BaseStyleProps,\n  DisplayObject,\n  PickingResult,\n  RenderingPlugin,\n  Shape,\n  IDocument,\n  RenderingPluginContext,\n  GlobalRuntime,\n} from '@antv/g-lite';\nimport { findClosestClipPathTarget, Point } from '@antv/g-lite';\nimport type { PathGenerator } from '@antv/g-plugin-canvas-path-generator';\nimport { mat4, vec3 } from 'gl-matrix';\n\nexport type PointInPathPicker<T extends BaseStyleProps> = (\n  displayObject: DisplayObject<T>,\n  point: Point,\n  isClipPath: boolean,\n  isPointInPath: (displayObject: DisplayObject<T>, point: Point) => boolean,\n  context: RenderingPluginContext,\n  runtime: GlobalRuntime,\n) => boolean;\n\nconst tmpVec3a = vec3.create();\nconst tmpVec3b = vec3.create();\nconst tmpVec3c = vec3.create();\nconst tmpMat4 = mat4.create();\n\ninterface Extended {\n  pathGeneratorFactory: Record<Shape, PathGenerator<any>>;\n  pointInPathPickerFactory: Record<Shape, PointInPathPicker<any>>;\n}\n\n/**\n * pick shape(s) with Mouse/Touch event\n *\n * 1. find AABB with r-tree\n * 2. do math calculation with geometry in an accurate way\n */\nexport class CanvasPickerPlugin implements RenderingPlugin {\n  static tag = 'CanvasPicker';\n\n  private context: RenderingPluginContext & Extended;\n  private runtime: GlobalRuntime;\n\n  apply(context: RenderingPluginContext, runtime: GlobalRuntime) {\n    const { renderingService, renderingContext } = context;\n    this.context = context as RenderingPluginContext & Extended;\n    this.runtime = runtime;\n\n    const document = renderingContext.root?.ownerDocument;\n\n    renderingService.hooks.pick.tapPromise(\n      CanvasPickerPlugin.tag,\n      async (result: PickingResult) => {\n        return this.pick(document, result);\n      },\n    );\n\n    renderingService.hooks.pickSync.tap(\n      CanvasPickerPlugin.tag,\n      (result: PickingResult) => {\n        return this.pick(document, result);\n      },\n    );\n  }\n\n  private pick(document: IDocument, result: PickingResult) {\n    const {\n      topmost,\n      position: { x, y },\n    } = result;\n\n    // position in world space\n    const position = vec3.set(tmpVec3a, x, y, 0);\n\n    // query by AABB first with spatial index(r-tree)\n    const hitTestList = document.elementsFromBBox(\n      position[0],\n      position[1],\n      position[0],\n      position[1],\n    );\n\n    // test with clip path & origin shape\n    // @see https://github.com/antvis/g/issues/1064\n    const pickedDisplayObjects: DisplayObject[] = [];\n    for (const displayObject of hitTestList) {\n      const worldTransform = displayObject.getWorldTransform();\n      const isHitOriginShape = this.isHit(\n        displayObject,\n        position,\n        worldTransform,\n        false,\n      );\n      if (isHitOriginShape) {\n        // should look up in the ancestor node\n        const clipped = findClosestClipPathTarget(displayObject);\n        if (clipped) {\n          const { clipPath } = clipped.parsedStyle;\n          const isHitClipPath = this.isHit(\n            clipPath,\n            position,\n            clipPath.getWorldTransform(),\n            true,\n          );\n          if (isHitClipPath) {\n            if (topmost) {\n              result.picked = [displayObject];\n              return result;\n            }\n            pickedDisplayObjects.push(displayObject);\n          }\n        } else {\n          if (topmost) {\n            result.picked = [displayObject];\n            return result;\n          }\n          pickedDisplayObjects.push(displayObject);\n        }\n      }\n    }\n\n    result.picked = pickedDisplayObjects;\n    return result;\n  }\n\n  private isHit = (\n    displayObject: DisplayObject,\n    position: vec3,\n    worldTransform: mat4,\n    isClipPath: boolean,\n  ) => {\n    // use picker for current shape's type\n    const pick =\n      this.context.pointInPathPickerFactory[displayObject.nodeName as Shape];\n    if (pick) {\n      // invert with world matrix\n      const invertWorldMat = mat4.invert(tmpMat4, worldTransform);\n\n      // transform client position to local space, do picking in local space\n      const localPosition = vec3.transformMat4(\n        tmpVec3b,\n        vec3.set(tmpVec3c, position[0], position[1], 0),\n        invertWorldMat,\n      );\n\n      if (\n        pick(\n          displayObject,\n          new Point(localPosition[0], localPosition[1]),\n          isClipPath,\n          this.isPointInPath,\n          this.context,\n          this.runtime,\n        )\n      ) {\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  /**\n   * use native picking method\n   * @see https://developer.mozilla.org/zh-CN/docs/Web/API/CanvasRenderingContext2D/isPointInPath\n   */\n  private isPointInPath = (displayObject: DisplayObject, position: Point) => {\n    const context = this.runtime.offscreenCanvasCreator.getOrCreateContext(\n      this.context.config.offscreenCanvas,\n    ) as CanvasRenderingContext2D;\n\n    const generatePath =\n      this.context.pathGeneratorFactory[displayObject.nodeName];\n    if (generatePath) {\n      context.beginPath();\n      generatePath(context, displayObject.parsedStyle);\n      context.closePath();\n    }\n\n    return context.isPointInPath(position.x, position.y);\n  };\n}\n", "import type {\n  CircleStyleProps,\n  DisplayObject,\n  ParsedCircleStyleProps,\n  Point,\n} from '@antv/g-lite';\nimport { isFillOrStrokeAffected } from '@antv/g-lite';\nimport { distance } from '@antv/g-math';\n\nexport function isPointInPath(\n  displayObject: DisplayObject<CircleStyleProps>,\n  position: Point,\n  isClipPath: boolean,\n): boolean {\n  const {\n    cx = 0,\n    cy = 0,\n    r,\n    fill,\n    stroke,\n    lineWidth = 1,\n    increasedLineWidthForHitTesting = 0,\n    pointerEvents = 'auto',\n  } = displayObject.parsedStyle as ParsedCircleStyleProps;\n  const halfLineWidth = (lineWidth + increasedLineWidthForHitTesting) / 2;\n  const absDistance = distance(cx, cy, position.x, position.y);\n\n  const [hasFill, hasStroke] = isFillOrStrokeAffected(\n    pointerEvents,\n    fill,\n    stroke,\n  );\n\n  if ((hasFill && hasStroke) || isClipPath) {\n    return absDistance <= r + halfLineWidth;\n  }\n  if (hasFill) {\n    return absDistance <= r;\n  }\n  if (hasStroke) {\n    return absDistance >= r - halfLineWidth && absDistance <= r + halfLineWidth;\n  }\n  return false;\n}\n", "import type {\n  DisplayObject,\n  EllipseStyleProps,\n  ParsedEllipseStyleProps,\n  Point,\n} from '@antv/g-lite';\nimport { isFillOrStrokeAffected } from '@antv/g-lite';\n\nfunction ellipseDistance(\n  squareX: number,\n  squareY: number,\n  rx: number,\n  ry: number,\n) {\n  return squareX / (rx * rx) + squareY / (ry * ry);\n}\n\nexport function isPointInPath(\n  displayObject: DisplayObject<EllipseStyleProps>,\n  position: Point,\n  isClipPath: boolean,\n): boolean {\n  const {\n    cx = 0,\n    cy = 0,\n    rx,\n    ry,\n    fill,\n    stroke,\n    lineWidth = 1,\n    increasedLineWidthForHitTesting = 0,\n    pointerEvents = 'auto',\n  } = displayObject.parsedStyle as ParsedEllipseStyleProps;\n\n  const { x, y } = position;\n  const [hasFill, hasStroke] = isFillOrStrokeAffected(\n    pointerEvents,\n    fill,\n    stroke,\n  );\n\n  const halfLineWith = (lineWidth + increasedLineWidthForHitTesting) / 2;\n  const squareX = (x - cx) * (x - cx);\n  const squareY = (y - cy) * (y - cy);\n  //  x*x/rx*rx + y*y/ry*ry = 1;\n  if ((hasFill && hasStroke) || isClipPath) {\n    return (\n      ellipseDistance(squareX, squareY, rx + halfLineWith, ry + halfLineWith) <=\n      1\n    );\n  }\n  if (hasFill) {\n    return ellipseDistance(squareX, squareY, rx, ry) <= 1;\n  }\n  if (hasStroke) {\n    return (\n      ellipseDistance(squareX, squareY, rx - halfLineWith, ry - halfLineWith) >=\n        1 &&\n      ellipseDistance(squareX, squareY, rx + halfLineWith, ry + halfLineWith) <=\n        1\n    );\n  }\n  return false;\n}\n", "import { distance, linePointToLine } from '@antv/g-math';\n\nexport function inBox(\n  minX: number,\n  minY: number,\n  width: number,\n  height: number,\n  x: number,\n  y: number,\n) {\n  return x >= minX && x <= minX + width && y >= minY && y <= minY + height;\n}\n\nexport function inRect(\n  minX: number,\n  minY: number,\n  width: number,\n  height: number,\n  lineWidth: number,\n  x: number,\n  y: number,\n) {\n  const halfWidth = lineWidth / 2;\n  // \n  return (\n    inBox(minX - halfWidth, minY - halfWidth, width, lineWidth, x, y) || // \n    inBox(\n      minX + width - halfWidth,\n      minY - halfWidth,\n      lineWidth,\n      height,\n      x,\n      y,\n    ) || // \n    inBox(\n      minX + halfWidth,\n      minY + height - halfWidth,\n      width,\n      lineWidth,\n      x,\n      y,\n    ) || // \n    inBox(minX - halfWidth, minY + halfWidth, lineWidth, height, x, y)\n  ); // \n}\n\nexport function inArc(\n  cx: number,\n  cy: number,\n  r: number,\n  startAngle: number,\n  endAngle: number,\n  lineWidth: number,\n  x: number,\n  y: number,\n) {\n  const angle = (Math.atan2(y - cy, x - cx) + Math.PI * 2) % (Math.PI * 2); //  0 - 2 * Math.PI \n  // if (angle < startAngle || angle > endAngle) {\n  //   return false;\n  // }\n  const point = {\n    x: cx + r * Math.cos(angle),\n    y: cy + r * Math.sin(angle),\n  };\n\n  return distance(point.x, point.y, x, y) <= lineWidth / 2;\n}\n\nexport function inLine(\n  x1: number,\n  y1: number,\n  x2: number,\n  y2: number,\n  lineWidth: number,\n  x: number,\n  y: number,\n) {\n  const minX = Math.min(x1, x2);\n  const maxX = Math.max(x1, x2);\n  const minY = Math.min(y1, y2);\n  const maxY = Math.max(y1, y2);\n  const halfWidth = lineWidth / 2;\n  // \n  //  lineWidth \n  if (\n    !(\n      x >= minX - halfWidth &&\n      x <= maxX + halfWidth &&\n      y >= minY - halfWidth &&\n      y <= maxY + halfWidth\n    )\n  ) {\n    return false;\n  }\n  // \n  return linePointToLine(x1, y1, x2, y2, x, y) <= lineWidth / 2;\n}\n\nexport function inPolyline(\n  points: any[],\n  lineWidth: number,\n  x: number,\n  y: number,\n  isClose: boolean,\n) {\n  const count = points.length;\n  if (count < 2) {\n    return false;\n  }\n  for (let i = 0; i < count - 1; i++) {\n    const x1 = points[i][0];\n    const y1 = points[i][1];\n    const x2 = points[i + 1][0];\n    const y2 = points[i + 1][1];\n\n    if (inLine(x1, y1, x2, y2, lineWidth, x, y)) {\n      return true;\n    }\n  }\n\n  // \n  if (isClose) {\n    const first = points[0];\n    const last = points[count - 1];\n    if (inLine(first[0], first[1], last[0], last[1], lineWidth, x, y)) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\n// https://blog.csdn.net/WilliamSun0122/article/details/77994526\nconst tolerance = 1e-6;\n// doubleeps\nfunction dcmp(x: number) {\n  if (Math.abs(x) < tolerance) {\n    return 0;\n  }\n\n  return x < 0 ? -1 : 1;\n}\n\n// Qp1p2\nfunction onSegment(p1: any, p2: any, q: any) {\n  if (\n    (q[0] - p1[0]) * (p2[1] - p1[1]) === (p2[0] - p1[0]) * (q[1] - p1[1]) &&\n    Math.min(p1[0], p2[0]) <= q[0] &&\n    q[0] <= Math.max(p1[0], p2[0]) &&\n    Math.min(p1[1], p2[1]) <= q[1] &&\n    q[1] <= Math.max(p1[1], p2[1])\n  ) {\n    return true;\n  }\n  return false;\n}\n\n// P-\nexport function inPolygon(points: any[], x: number, y: number) {\n  let isHit = false;\n  const n = points.length;\n  if (n <= 2) {\n    // svg  3 \n    return false;\n  }\n  for (let i = 0; i < n; i++) {\n    const p1 = points[i];\n    const p2 = points[(i + 1) % n];\n    if (onSegment(p1, p2, [x, y])) {\n      // \n      return true;\n    }\n    // min(p1[1],p2[1])<P.y<=max(p1[1],p2[1])\n    //    \n    if (\n      dcmp(p1[1] - y) > 0 !== dcmp(p2[1] - y) > 0 &&\n      dcmp(x - ((y - p1[1]) * (p1[0] - p2[0])) / (p1[1] - p2[1]) - p1[0]) < 0\n    ) {\n      isHit = !isHit;\n    }\n  }\n  return isHit;\n}\nexport function inPolygons(polygons: any[], x: number, y: number): boolean {\n  let isHit = false;\n  for (let i = 0; i < polygons.length; i++) {\n    const points = polygons[i];\n    isHit = inPolygon(points, x, y);\n    if (isHit) {\n      break;\n    }\n  }\n  return isHit;\n}\n", "import type {\n  DisplayObject,\n  LineStyleProps,\n  ParsedLineStyleProps,\n  Point,\n} from '@antv/g-lite';\nimport { isFillOrStrokeAffected } from '@antv/g-lite';\nimport { inLine } from './utils/math';\n\nexport function isPointInPath(\n  displayObject: DisplayObject<LineStyleProps>,\n  position: Point,\n  isClipPath: boolean,\n): boolean {\n  const {\n    x1,\n    y1,\n    x2,\n    y2,\n    lineWidth = 1,\n    increasedLineWidthForHitTesting = 0,\n    pointerEvents = 'auto',\n    fill,\n    stroke,\n  } = displayObject.parsedStyle as ParsedLineStyleProps;\n\n  const [, hasStroke] = isFillOrStrokeAffected(pointerEvents, fill, stroke);\n\n  if ((!hasStroke && !isClipPath) || !lineWidth) {\n    return false;\n  }\n\n  return inLine(\n    x1,\n    y1,\n    x2,\n    y2,\n    lineWidth + increasedLineWidthForHitTesting,\n    position.x,\n    position.y,\n  );\n}\n", "import type {\n  DisplayObject,\n  GlobalRuntime,\n  ParsedPathStyleProps,\n  Path,\n  PathSegment,\n  PathStyleProps,\n  Point,\n  RenderingPluginContext,\n} from '@antv/g-lite';\nimport {\n  getOrCalculatePathTotalLength,\n  isFillOrStrokeAffected,\n} from '@antv/g-lite';\nimport { cubicPointDistance, quadPointDistance } from '@antv/g-math';\nimport { arcToCubic } from '@antv/util';\nimport { inBox, inLine, inPolygons } from './utils/math';\n\n// TODO: replace it with method in @antv/util\nfunction isPointInStroke(\n  segments: PathSegment[],\n  lineWidth: number,\n  px: number,\n  py: number,\n  length: number,\n) {\n  let isHit = false;\n  const halfWidth = lineWidth / 2;\n  for (let i = 0; i < segments.length; i++) {\n    const segment = segments[i];\n    const { currentPoint, params, prePoint, box } = segment;\n    // \n    if (\n      box &&\n      !inBox(\n        box.x - halfWidth,\n        box.y - halfWidth,\n        box.width + lineWidth,\n        box.height + lineWidth,\n        px,\n        py,\n      )\n    ) {\n      continue;\n    }\n    switch (segment.command) {\n      // L  Z  M \n      case 'L':\n      case 'Z':\n        isHit = inLine(\n          prePoint[0],\n          prePoint[1],\n          currentPoint[0],\n          currentPoint[1],\n          lineWidth,\n          px,\n          py,\n        );\n        if (isHit) {\n          return true;\n        }\n        break;\n      case 'Q':\n        const qDistance = quadPointDistance(\n          prePoint[0],\n          prePoint[1],\n          params[1],\n          params[2],\n          params[3],\n          params[4],\n          px,\n          py,\n        );\n        isHit = qDistance <= lineWidth / 2;\n        if (isHit) {\n          return true;\n        }\n        break;\n      case 'C':\n        const cDistance = cubicPointDistance(\n          prePoint[0], // ,  C \n          prePoint[1],\n          params[1], // 'C' 12 34 56 \n          params[2],\n          params[3],\n          params[4],\n          params[5],\n          params[6],\n          px,\n          py,\n          length,\n        );\n        isHit = cDistance <= lineWidth / 2;\n        if (isHit) {\n          return true;\n        }\n        break;\n      case 'A':\n        // cache conversion result\n        if (!segment.cubicParams) {\n          segment.cubicParams = arcToCubic(\n            prePoint[0],\n            prePoint[1],\n            params[1],\n            params[2],\n            params[3],\n            params[4],\n            params[5],\n            params[6],\n            params[7],\n            undefined,\n          ) as [number, number, number, number, number, number];\n        }\n\n        const args = segment.cubicParams;\n\n        // fixArc\n        let prePointInCubic = prePoint;\n        for (let i = 0; i < args.length; i += 6) {\n          const cDistance = cubicPointDistance(\n            prePointInCubic[0], // ,  C \n            prePointInCubic[1],\n            args[i],\n            args[i + 1],\n            args[i + 2],\n            args[i + 3],\n            args[i + 4],\n            args[i + 5],\n            px,\n            py,\n            length,\n          );\n          prePointInCubic = [args[i + 4], args[i + 5]];\n          isHit = cDistance <= lineWidth / 2;\n\n          if (isHit) {\n            return true;\n          }\n        }\n        break;\n      default:\n        break;\n    }\n  }\n  return isHit;\n}\n\nexport function isPointInPath(\n  displayObject: DisplayObject<PathStyleProps>,\n  position: Point,\n  isClipPath: boolean,\n  isPointInPath: (\n    displayObject: DisplayObject<PathStyleProps>,\n    position: Point,\n  ) => boolean,\n  renderingPluginContext: RenderingPluginContext,\n  runtime: GlobalRuntime,\n): boolean {\n  const {\n    lineWidth = 1,\n    increasedLineWidthForHitTesting = 0,\n    stroke,\n    fill,\n    d,\n    pointerEvents = 'auto',\n  } = displayObject.parsedStyle as ParsedPathStyleProps;\n\n  const { segments, hasArc, polylines, polygons } = d;\n  const [hasFill, hasStroke] = isFillOrStrokeAffected(\n    pointerEvents,\n    // Only a closed path can be filled.\n    polygons?.length && fill,\n    stroke,\n  );\n\n  const totalLength = getOrCalculatePathTotalLength(displayObject as Path);\n\n  let isHit = false;\n\n  if (hasFill || isClipPath) {\n    if (hasArc) {\n      //  canvas  api \n      isHit = isPointInPath(displayObject, position);\n    } else {\n      // \n      isHit =\n        inPolygons(polygons, position.x, position.y) ||\n        inPolygons(polylines, position.x, position.y);\n    }\n    return isHit;\n  }\n  if (hasStroke || isClipPath) {\n    isHit = isPointInStroke(\n      segments,\n      lineWidth + increasedLineWidthForHitTesting,\n      position.x,\n      position.y,\n      totalLength,\n    );\n  }\n\n  return isHit;\n}\n", "import type {\n  DisplayObject,\n  ParsedPolygonStyleProps,\n  Point,\n  PolylineStyleProps,\n} from '@antv/g-lite';\nimport { isFillOrStrokeAffected } from '@antv/g-lite';\nimport { inPolygon, inPolyline } from './utils/math';\n\nexport function isPointInPath(\n  displayObject: DisplayObject<PolylineStyleProps>,\n  position: Point,\n  isClipPath: boolean,\n): boolean {\n  const {\n    stroke,\n    fill,\n    lineWidth = 1,\n    increasedLineWidthForHitTesting = 0,\n    points,\n    pointerEvents = 'auto',\n  } = displayObject.parsedStyle as ParsedPolygonStyleProps;\n  const [hasFill, hasStroke] = isFillOrStrokeAffected(\n    pointerEvents,\n    fill,\n    stroke,\n  );\n\n  let isHit = false;\n  if (hasStroke || isClipPath) {\n    isHit = inPolyline(\n      points.points,\n      lineWidth + increasedLineWidthForHitTesting,\n      position.x,\n      position.y,\n      true,\n    );\n  }\n  if (!isHit && (hasFill || isClipPath)) {\n    isHit = inPolygon(points.points, position.x, position.y);\n  }\n  return isHit;\n}\n", "import type {\n  DisplayObject,\n  ParsedPolylineStyleProps,\n  Point,\n  PolylineStyleProps,\n} from '@antv/g-lite';\nimport { isFillOrStrokeAffected } from '@antv/g-lite';\nimport { inPolyline } from './utils/math';\n\nexport function isPointInPath(\n  displayObject: DisplayObject<PolylineStyleProps>,\n  position: Point,\n  isClipPath: boolean,\n): boolean {\n  const {\n    lineWidth = 1,\n    increasedLineWidthForHitTesting = 0,\n    points,\n    pointerEvents = 'auto',\n    fill,\n    stroke,\n  } = displayObject.parsedStyle as ParsedPolylineStyleProps;\n  const [, hasStroke] = isFillOrStrokeAffected(pointerEvents, fill, stroke);\n\n  if ((!hasStroke && !isClipPath) || !lineWidth) {\n    return false;\n  }\n\n  return inPolyline(\n    points.points,\n    lineWidth + increasedLineWidthForHitTesting,\n    position.x,\n    position.y,\n    false,\n  );\n}\n", "import type {\n  DisplayObject,\n  ParsedRectStyleProps,\n  Point,\n  RectStyleProps,\n} from '@antv/g-lite';\nimport { GlobalRuntime, isFillOrStrokeAffected } from '@antv/g-lite';\nimport { clamp } from '@antv/util';\nimport { inArc, inBox, inLine, inRect } from './utils/math';\n\nexport function isPointInPath(\n  displayObject: DisplayObject<RectStyleProps>,\n  position: Point,\n  isClipPath: boolean,\n  isPointInPath: (\n    displayObject: DisplayObject<RectStyleProps>,\n    position: Point,\n  ) => boolean,\n  runtime: GlobalRuntime,\n): boolean {\n  const {\n    radius,\n    fill,\n    stroke,\n    lineWidth = 1,\n    increasedLineWidthForHitTesting = 0,\n    x = 0,\n    y = 0,\n    width,\n    height,\n    pointerEvents = 'auto',\n  } = displayObject.parsedStyle as ParsedRectStyleProps;\n\n  const [hasFill, hasStroke] = isFillOrStrokeAffected(\n    pointerEvents,\n    fill,\n    stroke,\n  );\n\n  const hasRadius = radius && radius.some((r) => r !== 0);\n\n  const lineWidthForHitTesting = lineWidth + increasedLineWidthForHitTesting;\n\n  // \n  if (!hasRadius) {\n    const halfWidth = lineWidthForHitTesting / 2;\n    // \n    if ((hasFill && hasStroke) || isClipPath) {\n      return inBox(\n        x - halfWidth,\n        y - halfWidth,\n        width + halfWidth,\n        height + halfWidth,\n        position.x,\n        position.y,\n      );\n    }\n    // \n    if (hasFill) {\n      return inBox(x, y, width, height, position.x, position.y);\n    }\n    if (hasStroke) {\n      return inRect(\n        x,\n        y,\n        width,\n        height,\n        lineWidthForHitTesting,\n        position.x,\n        position.y,\n      );\n    }\n  } else {\n    let isHit = false;\n    if (hasStroke || isClipPath) {\n      isHit = inRectWithRadius(\n        x,\n        y,\n        width,\n        height,\n        radius.map((r) =>\n          clamp(r, 0, Math.min(Math.abs(width) / 2, Math.abs(height) / 2)),\n        ) as [number, number, number, number],\n        lineWidthForHitTesting,\n        position.x,\n        position.y,\n      );\n    }\n    // \n    // \n    if (!isHit && (hasFill || isClipPath)) {\n      isHit = isPointInPath(displayObject, position);\n    }\n    return isHit;\n  }\n\n  return false;\n}\n\nfunction inRectWithRadius(\n  minX: number,\n  minY: number,\n  width: number,\n  height: number,\n  radiusArray: [number, number, number, number],\n  lineWidth: number,\n  x: number,\n  y: number,\n) {\n  const [tlr, trr, brr, blr] = radiusArray;\n  return (\n    inLine(minX + tlr, minY, minX + width - trr, minY, lineWidth, x, y) ||\n    inLine(\n      minX + width,\n      minY + trr,\n      minX + width,\n      minY + height - brr,\n      lineWidth,\n      x,\n      y,\n    ) ||\n    inLine(\n      minX + width - brr,\n      minY + height,\n      minX + blr,\n      minY + height,\n      lineWidth,\n      x,\n      y,\n    ) ||\n    inLine(minX, minY + height - blr, minX, minY + tlr, lineWidth, x, y) ||\n    inArc(\n      minX + width - trr,\n      minY + trr,\n      trr,\n      1.5 * Math.PI,\n      2 * Math.PI,\n      lineWidth,\n      x,\n      y,\n    ) ||\n    inArc(\n      minX + width - brr,\n      minY + height - brr,\n      brr,\n      0,\n      0.5 * Math.PI,\n      lineWidth,\n      x,\n      y,\n    ) ||\n    inArc(\n      minX + blr,\n      minY + height - blr,\n      blr,\n      0.5 * Math.PI,\n      Math.PI,\n      lineWidth,\n      x,\n      y,\n    ) ||\n    inArc(minX + tlr, minY + tlr, tlr, Math.PI, 1.5 * Math.PI, lineWidth, x, y)\n  );\n}\n", "import {\n  DisplayObject,\n  ParsedImageStyleProps,\n  Point,\n  ImageStyleProps,\n  Shape,\n  RenderingPluginContext,\n  GlobalRuntime,\n} from '@antv/g-lite';\nimport { StyleRenderer } from '@antv/g-plugin-canvas-renderer';\n\nexport function isPointInPath(\n  displayObject: DisplayObject<ImageStyleProps>,\n  position: Point,\n  isClipPath: boolean,\n  isPointInPath: (\n    displayObject: DisplayObject<ImageStyleProps>,\n    position: Point,\n  ) => boolean,\n  renderingPluginContext: RenderingPluginContext,\n  runtime: GlobalRuntime,\n): boolean {\n  const {\n    pointerEvents = 'auto',\n    x = 0,\n    y = 0,\n    width,\n    height,\n  } = displayObject.parsedStyle as ParsedImageStyleProps;\n\n  if (pointerEvents === 'non-transparent-pixel') {\n    const { offscreenCanvas } = renderingPluginContext.config;\n    const canvas =\n      runtime.offscreenCanvasCreator.getOrCreateCanvas(offscreenCanvas);\n    const context = runtime.offscreenCanvasCreator.getOrCreateContext(\n      offscreenCanvas,\n      {\n        willReadFrequently: true,\n      },\n    ) as CanvasRenderingContext2D;\n    canvas.width = width;\n    canvas.height = height;\n\n    (\n      (renderingPluginContext as any).defaultStyleRendererFactory as Record<\n        Shape,\n        StyleRenderer\n      >\n    )[Shape.IMAGE].render(\n      context,\n      { ...displayObject.parsedStyle, x: 0, y: 0 },\n      displayObject,\n      undefined,\n      undefined,\n      undefined,\n    );\n\n    const imagedata = context.getImageData(\n      position.x - x,\n      position.y - y,\n      1,\n      1,\n    ).data;\n    return imagedata.every((component) => component !== 0);\n  }\n\n  return true;\n}\n", "import type { DisplayObject, Point, TextStyleProps } from '@antv/g-lite';\n\nexport function isPointInPath(\n  displayObject: DisplayObject<TextStyleProps>,\n  position: Point,\n  isClipPath: boolean,\n  isPointInPath: (\n    displayObject: DisplayObject<TextStyleProps>,\n    position: Point,\n  ) => boolean,\n): boolean {\n  const bounds = displayObject.getGeometryBounds();\n\n  // @see https://stackoverflow.com/questions/28706989/how-do-i-check-if-a-mouse-click-is-inside-a-rotated-text-on-the-html5-canvas-in\n  return (\n    position.x >= bounds.min[0] &&\n    position.y >= bounds.min[1] &&\n    position.x <= bounds.max[0] &&\n    position.y <= bounds.max[1]\n  );\n}\n", "import { AbstractRendererPlugin, Shape } from '@antv/g-lite';\nimport type { PointInPathPicker } from './CanvasPickerPlugin';\nimport { CanvasPickerPlugin } from './CanvasPickerPlugin';\nimport { isPointInPath as CirclePicker } from './Circle';\nimport { isPointInPath as EllipsePicker } from './Ellipse';\nimport { isPointInPath as LinePicker } from './Line';\nimport { isPointInPath as PathPicker } from './Path';\nimport { isPointInPath as PolygonPicker } from './Polygon';\nimport { isPointInPath as PolylinePicker } from './Polyline';\nimport { isPointInPath as RectPicker } from './Rect';\nimport { isPointInPath as ImagePicker } from './Image';\nimport { isPointInPath as TextPicker } from './Text';\n\nexport class Plugin extends AbstractRendererPlugin {\n  name = 'canvas-picker';\n  init(): void {\n    const pointInPathPickerFactory: Record<Shape, PointInPathPicker<any>> = {\n      [Shape.CIRCLE]: CirclePicker,\n      [Shape.ELLIPSE]: EllipsePicker,\n      [Shape.RECT]: RectPicker,\n      [Shape.LINE]: LinePicker,\n      [Shape.POLYLINE]: PolylinePicker,\n      [Shape.POLYGON]: PolygonPicker,\n      [Shape.PATH]: PathPicker,\n      [Shape.TEXT]: TextPicker,\n      [Shape.GROUP]: null,\n      [Shape.IMAGE]: ImagePicker,\n      [Shape.HTML]: null,\n      [Shape.MESH]: null,\n    };\n\n    // @ts-ignore\n    this.context.pointInPathPickerFactory = pointInPathPickerFactory;\n\n    this.addRenderingPlugin(new CanvasPickerPlugin());\n  }\n  destroy(): void {\n    // @ts-ignore\n    delete this.context.pointInPathPickerFactory;\n    this.removeAllRenderingPlugins();\n  }\n}\n", "function _classPrivateFieldBase(e, t) {\n  if (!{}.hasOwnProperty.call(e, t)) throw new TypeError(\"attempted to use private field on non-instance\");\n  return e;\n}\nexport { _classPrivateFieldBase as default };", "var id = 0;\nfunction _classPrivateFieldKey(e) {\n  return \"__private_\" + id++ + \"_\" + e;\n}\nexport { _classPrivateFieldKey as default };", "import { DisplayObject } from '@antv/g-lite';\n\nexport class RefCountCache<CacheValue> {\n  private cacheStore = new Map<\n    string,\n    { value: CacheValue; counter: Set<number> }\n  >();\n\n  onRefAdded(ref: DisplayObject) {}\n\n  has(key: string) {\n    return this.cacheStore.has(key);\n  }\n\n  put(key: string, item: CacheValue, ref: DisplayObject) {\n    if (this.cacheStore.has(key)) {\n      return false;\n    }\n\n    this.cacheStore.set(key, {\n      value: item,\n      counter: new Set([ref.entity]),\n    });\n    this.onRefAdded(ref);\n\n    return true;\n  }\n\n  get(key: string, ref: DisplayObject) {\n    const cacheItem = this.cacheStore.get(key);\n    if (!cacheItem) {\n      return null;\n    }\n\n    if (!cacheItem.counter.has(ref.entity)) {\n      cacheItem.counter.add(ref.entity);\n      this.onRefAdded(ref);\n    }\n\n    return cacheItem.value;\n  }\n\n  update(key: string, value: CacheValue, ref: DisplayObject) {\n    const cacheItem = this.cacheStore.get(key);\n    if (!cacheItem) {\n      return false;\n    }\n\n    cacheItem.value = { ...cacheItem.value, ...value };\n    if (!cacheItem.counter.has(ref.entity)) {\n      cacheItem.counter.add(ref.entity);\n      this.onRefAdded(ref);\n    }\n\n    return true;\n  }\n\n  release(key: string, ref: DisplayObject) {\n    const cacheItem = this.cacheStore.get(key);\n    if (!cacheItem) {\n      return false;\n    }\n\n    cacheItem.counter.delete(ref.entity);\n\n    if (cacheItem.counter.size <= 0) {\n      this.cacheStore.delete(key);\n    }\n\n    return true;\n  }\n\n  releaseRef(ref: DisplayObject) {\n    Array.from(this.cacheStore.keys()).forEach((key) => {\n      this.release(key, ref);\n    });\n  }\n\n  getSize() {\n    return this.cacheStore.size;\n  }\n\n  clear() {\n    this.cacheStore.clear();\n  }\n}\n", "const tasks: (() => void)[] = [];\nlet nextFrameTasks: (() => void)[] = [];\n\ninterface API {\n  requestAnimationFrame: typeof requestAnimationFrame;\n  cancelAnimationFrame: typeof cancelAnimationFrame;\n  createCanvas: () => HTMLCanvasElement | OffscreenCanvas;\n}\n\nexport interface SliceResult {\n  tileSize: [number, number];\n  /** [rows, cols] */\n  gridSize: [number, number];\n  /**\n   * @example\n   * ```\n   * [\n   *  // tileY=0\n   *  [tileX=0, tileX=1, ...],\n   *  // tileY=1\n   *  [tileX=0, tileX=1, ...],\n   * ]\n   * ```\n   */\n  tiles: (null | {\n    x: number;\n    y: number;\n    tileX: number;\n    tileY: number;\n    data: HTMLCanvasElement | OffscreenCanvas;\n  })[][];\n}\n\nexport class ImageSlicer {\n  static api: API;\n  static TASK_NUM_PER_FRAME = 10;\n  static rafId: ReturnType<typeof requestAnimationFrame>;\n\n  static stop(api = ImageSlicer.api) {\n    if (ImageSlicer.rafId) {\n      api.cancelAnimationFrame(ImageSlicer.rafId);\n      ImageSlicer.rafId = null;\n    }\n  }\n\n  static executeTask(api = ImageSlicer.api) {\n    if (tasks.length <= 0 && nextFrameTasks.length <= 0) {\n      return;\n    }\n\n    nextFrameTasks.forEach((task) => task());\n    nextFrameTasks = tasks.splice(0, ImageSlicer.TASK_NUM_PER_FRAME);\n\n    ImageSlicer.rafId = api.requestAnimationFrame(() => {\n      ImageSlicer.executeTask(api);\n    });\n  }\n\n  static sliceImage(\n    image: HTMLImageElement,\n    sliceWidth: number,\n    sliceHeight: number,\n    rerender: () => void,\n    overlap = 0,\n    api = ImageSlicer.api,\n  ) {\n    const imageWidth = image.naturalWidth || image.width;\n    const imageHeight = image.naturalHeight || image.height;\n\n    // ()\n    const strideW = sliceWidth - overlap;\n    const strideH = sliceHeight - overlap;\n\n    // \n    const gridCols = Math.ceil(imageWidth / strideW);\n    const gridRows = Math.ceil(imageHeight / strideH);\n\n    const result: SliceResult = {\n      tileSize: [sliceWidth, sliceHeight],\n      gridSize: [gridRows, gridCols],\n      tiles: Array(gridRows)\n        .fill(null)\n        .map(() => Array(gridCols).fill(null) as SliceResult['tiles'][number]),\n    };\n\n    // \n    for (let row = 0; row < gridRows; row++) {\n      for (let col = 0; col < gridCols; col++) {\n        tasks.push(() => {\n          // \n          const startX = col * strideW;\n          const startY = row * strideH;\n\n          // /\n          const [tempSliceWidth, tempSliceHeight] = [\n            Math.min(sliceWidth, imageWidth - startX),\n            Math.min(sliceHeight, imageHeight - startY),\n          ];\n\n          // canvas\n          const sliceCanvas = api.createCanvas();\n          sliceCanvas.width = sliceWidth;\n          sliceCanvas.height = sliceHeight;\n          const sliceCtx = sliceCanvas.getContext('2d');\n\n          // canvas\n          sliceCtx.drawImage(\n            image,\n            startX,\n            startY,\n            tempSliceWidth,\n            tempSliceHeight,\n            0,\n            0,\n            tempSliceWidth,\n            tempSliceHeight,\n          );\n\n          // \n          result.tiles[row][col] = {\n            x: startX,\n            y: startY,\n            tileX: col,\n            tileY: row,\n            data: sliceCanvas,\n          };\n\n          rerender();\n        });\n      }\n    }\n\n    ImageSlicer.stop();\n    ImageSlicer.executeTask();\n\n    return result;\n  }\n}\n", "import {\n  DisplayObject,\n  GradientType,\n  LinearGradient,\n  Pattern,\n  RadialGradient,\n  Rect,\n  Tuple3Number,\n  UnitType,\n  computeLinearGradient,\n  computeRadialGradient,\n  parseTransform,\n  parsedTransformToMat4,\n  Image,\n  OffscreenCanvasCreator,\n  ElementEvent,\n  type CanvasContext,\n  type GlobalRuntime,\n} from '@antv/g-lite';\nimport { isString } from '@antv/util';\nimport { mat4 } from 'gl-matrix';\nimport { RefCountCache } from './RefCountCache';\nimport { type SliceResult, ImageSlicer } from './ImageSlicer';\n\nexport interface ImageCache extends Partial<SliceResult> {\n  img: HTMLImageElement;\n  /** [width, height] */\n  size: [number, number];\n  downSampled?: ImageBitmap | HTMLImageElement;\n  downSamplingRate?: number;\n}\n\nconst IMAGE_CACHE = new RefCountCache<ImageCache>();\nIMAGE_CACHE.onRefAdded = function onRefAdded(\n  this: RefCountCache<ImageCache>,\n  ref,\n) {\n  ref.addEventListener(\n    ElementEvent.DESTROY,\n    () => {\n      this.releaseRef(ref);\n    },\n    { once: true },\n  );\n};\n\nexport type GradientParams = (LinearGradient & RadialGradient) & {\n  width: number;\n  height: number;\n  /**\n   * Top-left corner\n   */\n  min: [number, number];\n  type: GradientType;\n};\n\nexport class ImagePool {\n  static isSupportTile = !!OffscreenCanvasCreator.createCanvas();\n  private gradientCache: Record<string, CanvasGradient> = {};\n  private patternCache: Record<string, CanvasPattern> = {};\n\n  constructor(\n    public context: CanvasContext,\n    private runtime: GlobalRuntime,\n  ) {}\n\n  getImageSync(\n    src: Image['attributes']['src'],\n    ref: DisplayObject,\n    callback?: (cache: ImageCache) => void,\n  ): ImageCache | null {\n    const imageSource = isString(src) ? src : src.src;\n\n    if (IMAGE_CACHE.has(imageSource)) {\n      const imageCache = IMAGE_CACHE.get(imageSource, ref);\n\n      if (imageCache.img.complete) {\n        callback?.(imageCache);\n\n        return imageCache;\n      }\n    }\n\n    this.getOrCreateImage(src, ref)\n      .then((cache) => {\n        callback?.(cache);\n      })\n      .catch((reason) => {\n        console.error(reason);\n      });\n\n    return null;\n  }\n\n  getOrCreateImage(\n    src: Image['attributes']['src'],\n    ref: DisplayObject,\n  ): Promise<ImageCache> {\n    const imageSource = isString(src) ? src : src.src;\n\n    if (!isString(src) && !IMAGE_CACHE.has(imageSource)) {\n      const imageCache: ImageCache = {\n        img: src,\n        size: [src.naturalWidth || src.width, src.naturalHeight || src.height],\n        tileSize: calculateImageTileSize(src),\n      };\n\n      IMAGE_CACHE.put(imageSource, imageCache, ref);\n    }\n\n    if (IMAGE_CACHE.has(imageSource)) {\n      const imageCache = IMAGE_CACHE.get(imageSource, ref);\n\n      if (imageCache.img.complete) {\n        return Promise.resolve(imageCache);\n      }\n\n      return new Promise((resolve, reject) => {\n        imageCache.img.addEventListener('load', () => {\n          imageCache.size = [\n            imageCache.img.naturalWidth || imageCache.img.width,\n            imageCache.img.naturalHeight || imageCache.img.height,\n          ];\n          imageCache.tileSize = calculateImageTileSize(imageCache.img);\n          resolve(imageCache);\n        });\n\n        imageCache.img.addEventListener('error', (ev) => {\n          reject(ev);\n        });\n      });\n    }\n\n    return new Promise((resolve, reject) => {\n      // @see https://github.com/antvis/g/issues/938\n      const image = this.context.config.createImage();\n\n      if (image) {\n        const imageCache: ImageCache = {\n          img: image,\n          size: [0, 0],\n          tileSize: calculateImageTileSize(image),\n        };\n\n        IMAGE_CACHE.put(imageSource, imageCache, ref);\n\n        image.onload = () => {\n          imageCache.size = [\n            image.naturalWidth || image.width,\n            image.naturalHeight || image.height,\n          ];\n          imageCache.tileSize = calculateImageTileSize(imageCache.img);\n          resolve(imageCache);\n        };\n        image.onerror = (ev) => {\n          reject(ev);\n        };\n        image.crossOrigin = 'Anonymous';\n        image.src = imageSource;\n      }\n    });\n  }\n\n  async createDownSampledImage(\n    src: Image['attributes']['src'],\n    ref: DisplayObject,\n  ): Promise<ImageCache> {\n    const imageCache = await this.getOrCreateImage(src, ref);\n    if (typeof imageCache.downSamplingRate !== 'undefined') {\n      return imageCache;\n    }\n\n    const { enableLargeImageOptimization } = this.context.config;\n    const { maxDownSampledImageSize = 2048, downSamplingRateThreshold = 0.5 } =\n      typeof enableLargeImageOptimization === 'boolean'\n        ? {}\n        : enableLargeImageOptimization;\n    const createImageBitmapFunc = this.runtime.globalThis\n      .createImageBitmap as typeof createImageBitmap;\n    const [originWidth, originHeight] = imageCache.size;\n    let resizedImage: ImageCache['downSampled'] = imageCache.img;\n    let downSamplingRate = Math.min(\n      (maxDownSampledImageSize + maxDownSampledImageSize) /\n        (originWidth + originHeight),\n      Math.max(0.01, Math.min(downSamplingRateThreshold, 0.5)),\n    );\n\n    let updateCache: ImageCache = {\n      ...imageCache,\n      downSamplingRate,\n    };\n\n    IMAGE_CACHE.update(imageCache.img.src, updateCache, ref);\n\n    if (createImageBitmapFunc) {\n      try {\n        resizedImage = await createImageBitmapFunc(imageCache.img, {\n          resizeWidth: originWidth * downSamplingRate,\n          resizeHeight: originHeight * downSamplingRate,\n        });\n      } catch {\n        downSamplingRate = 1;\n      }\n    } else {\n      downSamplingRate = 1;\n    }\n\n    updateCache = {\n      ...this.getImageSync(src, ref),\n      downSampled: resizedImage,\n      downSamplingRate,\n    };\n\n    IMAGE_CACHE.update(imageCache.img.src, updateCache, ref);\n\n    return updateCache;\n  }\n\n  async createImageTiles(\n    src: Image['attributes']['src'],\n    tiles: [number, number][],\n    rerender: () => void,\n    ref: DisplayObject,\n  ): Promise<ImageCache> {\n    const imageCache = await this.getOrCreateImage(src, ref);\n    const { requestAnimationFrame, cancelAnimationFrame } =\n      ref.ownerDocument.defaultView;\n\n    ImageSlicer.api = {\n      requestAnimationFrame,\n      cancelAnimationFrame,\n      createCanvas: () => OffscreenCanvasCreator.createCanvas(),\n    };\n\n    const updateCache: ImageCache = {\n      ...imageCache,\n      ...ImageSlicer.sliceImage(\n        imageCache.img,\n        imageCache.tileSize[0],\n        imageCache.tileSize[0],\n        rerender,\n      ),\n    };\n\n    IMAGE_CACHE.update(imageCache.img.src, updateCache, ref);\n\n    return updateCache;\n  }\n\n  releaseImage(src: Image['attributes']['src'], ref: DisplayObject) {\n    IMAGE_CACHE.release(isString(src) ? src : src.src, ref);\n  }\n\n  releaseImageRef(ref: DisplayObject) {\n    IMAGE_CACHE.releaseRef(ref);\n  }\n\n  getOrCreatePatternSync(\n    object: DisplayObject,\n    pattern: Pattern,\n    context: CanvasRenderingContext2D,\n    $offscreenCanvas: HTMLCanvasElement,\n    dpr: number,\n    min: Tuple3Number,\n    callback: () => void,\n  ) {\n    const patternKey = this.generatePatternKey(pattern);\n    if (patternKey && this.patternCache[patternKey]) {\n      return this.patternCache[patternKey];\n    }\n\n    const { image, repetition, transform } = pattern;\n    let src: CanvasImageSource;\n    let needScaleWithDPR = false;\n    // Image URL\n    if (isString(image)) {\n      const imageCache = this.getImageSync(image, object, callback);\n      src = imageCache?.img;\n    } else if ($offscreenCanvas) {\n      src = $offscreenCanvas;\n      needScaleWithDPR = true;\n    } else {\n      src = image as CanvasImageSource;\n    }\n\n    // @see https://developer.mozilla.org/zh-CN/docs/Web/API/CanvasRenderingContext2D/createPattern\n    const canvasPattern = src && context.createPattern(src, repetition);\n\n    if (canvasPattern) {\n      let mat: mat4;\n      // @see https://developer.mozilla.org/en-US/docs/Web/API/CanvasPattern/setTransform\n      if (transform) {\n        mat = parsedTransformToMat4(\n          parseTransform(transform),\n          new DisplayObject({}),\n        );\n      } else {\n        mat = mat4.identity(mat4.create());\n      }\n\n      if (needScaleWithDPR) {\n        mat4.scale(mat, mat, [1 / dpr, 1 / dpr, 1]);\n      }\n\n      canvasPattern.setTransform({\n        a: mat[0],\n        b: mat[1],\n        c: mat[4],\n        d: mat[5],\n        e: mat[12] + min[0],\n        f: mat[13] + min[1],\n      });\n    }\n\n    if (patternKey && canvasPattern) {\n      this.patternCache[patternKey] = canvasPattern;\n    }\n\n    return canvasPattern;\n  }\n\n  getOrCreateGradient(\n    params: GradientParams,\n    context: CanvasRenderingContext2D,\n  ) {\n    const key = this.generateGradientKey(params);\n    const { type, steps, min, width, height, angle, cx, cy, size } = params;\n\n    if (this.gradientCache[key]) {\n      return this.gradientCache[key];\n    }\n\n    let gradient: CanvasGradient | null = null;\n    if (type === GradientType.LinearGradient) {\n      const { x1, y1, x2, y2 } = computeLinearGradient(\n        min,\n        width,\n        height,\n        angle,\n      );\n      // @see https://developer.mozilla.org/zh-CN/docs/Web/API/CanvasRenderingContext2D/createLinearGradient\n      gradient = context.createLinearGradient(x1, y1, x2, y2);\n    } else if (type === GradientType.RadialGradient) {\n      const { x, y, r } = computeRadialGradient(\n        min,\n        width,\n        height,\n        cx,\n        cy,\n        size,\n      );\n      // @see https://developer.mozilla.org/zh-CN/docs/Web/API/CanvasRenderingContext2D/createRadialGradient\n      gradient = context.createRadialGradient(x, y, 0, x, y, r);\n    }\n\n    if (gradient) {\n      steps.forEach(({ offset, color }) => {\n        if (offset.unit === UnitType.kPercentage) {\n          gradient?.addColorStop(offset.value / 100, color.toString());\n        }\n      });\n\n      this.gradientCache[key] = gradient;\n    }\n\n    return this.gradientCache[key];\n  }\n\n  private generateGradientKey(params: GradientParams): string {\n    const { type, min, width, height, steps, angle, cx, cy, size } = params;\n    return `gradient-${type}-${angle?.toString() || 0}-${cx?.toString() || 0}-${\n      cy?.toString() || 0\n    }-${size?.toString() || 0}-${min[0]}-${min[1]}-${width}-${height}-${steps\n      .map(({ offset, color }) => `${offset}${color}`)\n      .join('-')}`;\n  }\n\n  private generatePatternKey(pattern: Pattern) {\n    const { image, repetition } = pattern;\n    // only generate cache for Image\n    if (isString(image)) {\n      return `pattern-${image}-${repetition}`;\n    }\n    if ((image as Rect).nodeName === 'rect') {\n      return `pattern-${(image as Rect).entity}-${repetition}`;\n    }\n  }\n}\n\nfunction calculateImageTileSize(img: HTMLImageElement): [number, number] {\n  if (!img.complete) {\n    return [0, 0];\n  }\n\n  const [width, height] = [\n    img.naturalWidth || img.width,\n    img.naturalHeight || img.height,\n  ];\n\n  let tileSize = 256;\n\n  [256, 512].forEach((size) => {\n    const rows = Math.ceil(height / size);\n    const cols = Math.ceil(width / size);\n\n    if (rows * cols < 1e3) {\n      tileSize = size;\n    }\n  });\n\n  return [tileSize, tileSize];\n}\n", "import type {\n  FederatedEvent,\n  Image,\n  MutationEvent,\n  RenderingPlugin,\n  RenderingPluginContext,\n  DisplayObject,\n} from '@antv/g-lite';\nimport { ElementEvent, Shape } from '@antv/g-lite';\nimport { isString } from '@antv/util';\nimport { ImagePool } from './ImagePool';\n\nexport class LoadImagePlugin implements RenderingPlugin {\n  static tag = 'LoadImage';\n\n  apply(context: RenderingPluginContext & { imagePool: ImagePool }) {\n    const { renderingService, renderingContext, imagePool } = context;\n    const canvas = renderingContext.root.ownerDocument.defaultView;\n\n    const calculateWithAspectRatio = (\n      object: Image,\n      imageWidth: number,\n      imageHeight: number,\n    ) => {\n      const { width, height } = object.parsedStyle;\n      if (width && !height) {\n        object.setAttribute('height', (imageHeight / imageWidth) * width);\n      } else if (!width && height) {\n        object.setAttribute('width', (imageWidth / imageHeight) * height);\n      }\n    };\n\n    const handleMounted = (e: FederatedEvent) => {\n      const object = e.target as Image;\n      const { nodeName, attributes } = object;\n      if (nodeName === Shape.IMAGE) {\n        const { src, keepAspectRatio } = attributes;\n\n        imagePool.getImageSync(\n          src,\n          object as DisplayObject,\n          ({ img: { width, height } }) => {\n            if (keepAspectRatio) {\n              calculateWithAspectRatio(object, width, height);\n            }\n\n            // set dirty rectangle flag\n            object.renderable.dirty = true;\n            renderingService.dirtify();\n          },\n        );\n      }\n    };\n\n    const handleAttributeChanged = (e: MutationEvent) => {\n      const object = e.target as Image;\n      const { attrName, prevValue, newValue } = e;\n\n      if (object.nodeName !== Shape.IMAGE || attrName !== 'src') {\n        return;\n      }\n\n      if (prevValue !== newValue) {\n        imagePool.releaseImage(\n          prevValue as Image['attributes']['src'],\n          object as DisplayObject,\n        );\n      }\n\n      if (isString(newValue)) {\n        imagePool\n          .getOrCreateImage(newValue, object as DisplayObject)\n          .then(({ img: { width, height } }) => {\n            if (object.attributes.keepAspectRatio) {\n              calculateWithAspectRatio(object, width, height);\n            }\n\n            // set dirty rectangle flag\n            object.renderable.dirty = true;\n            renderingService.dirtify();\n          })\n          .catch(() => {\n            //\n          });\n      }\n    };\n\n    renderingService.hooks.init.tap(LoadImagePlugin.tag, () => {\n      canvas.addEventListener(ElementEvent.MOUNTED, handleMounted);\n      canvas.addEventListener(\n        ElementEvent.ATTR_MODIFIED,\n        handleAttributeChanged,\n      );\n    });\n\n    renderingService.hooks.destroy.tap(LoadImagePlugin.tag, () => {\n      canvas.removeEventListener(ElementEvent.MOUNTED, handleMounted);\n      canvas.removeEventListener(\n        ElementEvent.ATTR_MODIFIED,\n        handleAttributeChanged,\n      );\n    });\n  }\n}\n", "import { AbstractRendererPlugin, type GlobalRuntime } from '@antv/g-lite';\nimport { ImagePool, type ImageCache } from './ImagePool';\nimport { LoadImagePlugin } from './LoadImagePlugin';\n\nexport { ImagePool, type ImageCache };\n\nexport class Plugin extends AbstractRendererPlugin {\n  name = 'image-loader';\n  init(runtime: GlobalRuntime): void {\n    // @ts-ignore\n    this.context.imagePool = new ImagePool(this.context, runtime);\n    this.addRenderingPlugin(new LoadImagePlugin());\n  }\n  destroy(): void {\n    this.removeAllRenderingPlugins();\n  }\n}\n", "import type {\n  DisplayObject,\n  FederatedEvent,\n  RBushNodeAABB,\n  RenderingPlugin,\n  RBush,\n  RenderingPluginContext,\n  ContextService,\n  CanvasContext,\n  GlobalRuntime,\n  ParsedBaseStyleProps,\n  CSSRGB,\n} from '@antv/g-lite';\nimport {\n  AABB,\n  CanvasEvent,\n  CustomEvent,\n  ElementEvent,\n  Shape,\n  Node,\n} from '@antv/g-lite';\nimport { mat4, vec3 } from 'gl-matrix';\nimport { isNil } from '@antv/util';\nimport type { CanvasRendererPluginOptions } from './interfaces';\nimport type { Plugin } from '.';\n\ninterface Rect {\n  x: number;\n  y: number;\n  width: number;\n  height: number;\n}\n\nexport interface RenderState {\n  restoreStack: DisplayObject[];\n  prevObject: DisplayObject;\n  currentContext: Map<keyof CanvasRenderingContext2D | 'lineDash', unknown>;\n}\n\n/**\n * support 2 modes in rendering:\n * * immediate\n * * delayed: render at the end of frame with dirty-rectangle\n */\nexport class CanvasRendererPlugin implements RenderingPlugin {\n  static tag = 'CanvasRenderer';\n\n  private context: Plugin['context'];\n\n  private pathGeneratorFactory: Plugin['context']['pathGeneratorFactory'];\n\n  /**\n   * RBush used in dirty rectangle rendering\n   */\n  private rBush: RBush<RBushNodeAABB>;\n\n  constructor(\n    private canvasRendererPluginOptions: CanvasRendererPluginOptions, // private styleRendererFactory: Record<Shape, StyleRenderer>,\n  ) {}\n\n  private removedRBushNodeAABBs: RBushNodeAABB[] = [];\n\n  private renderQueue: DisplayObject[] = [];\n\n  #renderState: RenderState = {\n    restoreStack: [],\n    prevObject: null,\n    currentContext: new Map(),\n  };\n\n  private clearFullScreenLastFrame = false;\n  private clearFullScreen = false;\n\n  /**\n   * view projection matrix\n   */\n  private vpMatrix = mat4.create();\n  private dprMatrix = mat4.create();\n  private tmpMat4 = mat4.create();\n  private vec3a = vec3.create();\n  private vec3b = vec3.create();\n  private vec3c = vec3.create();\n  private vec3d = vec3.create();\n\n  apply(context: RenderingPluginContext, runtime: GlobalRuntime) {\n    this.context = context as unknown as Plugin['context'];\n\n    const {\n      config,\n      camera,\n      renderingService,\n      renderingContext,\n      rBushRoot,\n      // @ts-ignore\n      pathGeneratorFactory,\n    } = this.context;\n    let enableRenderingOptimization =\n      config.renderer.getConfig().enableRenderingOptimization;\n\n    config.renderer.getConfig().enableDirtyCheck = false;\n    config.renderer.getConfig().enableDirtyRectangleRendering = false;\n\n    this.rBush = rBushRoot;\n    this.pathGeneratorFactory = pathGeneratorFactory;\n\n    const contextService =\n      context.contextService as ContextService<CanvasRenderingContext2D>;\n\n    const canvas = renderingContext.root.ownerDocument.defaultView;\n\n    const handleUnmounted = (e: FederatedEvent) => {\n      const object = e.target as DisplayObject;\n\n      // remove r-bush node\n      // @ts-ignore\n      const { rBushNode } = object;\n\n      if (rBushNode?.aabb) {\n        // save removed aabbs for dirty-rectangle rendering later\n        this.removedRBushNodeAABBs.push(rBushNode.aabb);\n      }\n    };\n\n    const handleCulled = (e: FederatedEvent) => {\n      const object = e.target as DisplayObject;\n      // @ts-ignore\n      const { rBushNode } = object;\n\n      if (rBushNode.aabb) {\n        // save removed aabbs for dirty-rectangle rendering later\n        this.removedRBushNodeAABBs.push(rBushNode.aabb);\n      }\n    };\n\n    renderingService.hooks.init.tap(CanvasRendererPlugin.tag, () => {\n      canvas.addEventListener(ElementEvent.UNMOUNTED, handleUnmounted);\n      canvas.addEventListener(ElementEvent.CULLED, handleCulled);\n\n      // clear fullscreen\n      const dpr = contextService.getDPR();\n      const { width, height } = config;\n      const context = contextService.getContext();\n      this.clearRect(\n        context,\n        0,\n        0,\n        width * dpr,\n        height * dpr,\n        config.background,\n      );\n    });\n\n    renderingService.hooks.destroy.tap(CanvasRendererPlugin.tag, () => {\n      canvas.removeEventListener(ElementEvent.UNMOUNTED, handleUnmounted);\n      canvas.removeEventListener(ElementEvent.CULLED, handleCulled);\n      this.renderQueue = [];\n      this.removedRBushNodeAABBs = [];\n      this.#renderState = {\n        restoreStack: [],\n        prevObject: null,\n        currentContext: null,\n      };\n    });\n\n    const beforeDraw = () => {\n      const context = contextService.getContext();\n      const dpr = contextService.getDPR();\n      const { width, height } = config;\n      const { dirtyObjectNumThreshold, dirtyObjectRatioThreshold } =\n        this.canvasRendererPluginOptions;\n\n      // some heuristic conditions such as 80% object changed\n      const { total, rendered } = renderingService.getStats();\n      const ratio = rendered / total;\n\n      this.clearFullScreen =\n        this.clearFullScreenLastFrame ||\n        // @ts-ignore\n        !canvas.context.renderingPlugins[1]?.isFirstTimeRenderingFinished ||\n        renderingService.disableDirtyRectangleRendering() ||\n        (rendered > dirtyObjectNumThreshold &&\n          ratio > dirtyObjectRatioThreshold);\n\n      if (!context) {\n        return;\n      }\n\n      if (typeof context.resetTransform === 'function') {\n        context.resetTransform();\n      } else {\n        context.setTransform(1, 0, 0, 1, 0, 0);\n      }\n\n      if (this.clearFullScreen) {\n        this.clearRect(\n          context,\n          0,\n          0,\n          width * dpr,\n          height * dpr,\n          config.background,\n        );\n      }\n    };\n\n    /**\n     * render objects by z-index\n     *\n     * - The level of the child node will be affected by the level of the parent node\n     */\n    const renderByZIndex = (\n      object: DisplayObject,\n      context: CanvasRenderingContext2D,\n    ) => {\n      const stack = [object];\n\n      while (stack.length > 0) {\n        const currentObject = stack.pop();\n\n        if (currentObject.isVisible() && !currentObject.isCulled()) {\n          if (enableRenderingOptimization) {\n            this.renderDisplayObjectOptimized(\n              currentObject,\n              context,\n              this.context,\n              this.#renderState,\n              runtime,\n            );\n          } else {\n            this.renderDisplayObject(\n              currentObject,\n              context,\n              this.context,\n              this.#renderState,\n              runtime,\n            );\n          }\n        }\n\n        const objects =\n          currentObject.sortable?.sorted?.length > 0\n            ? currentObject.sortable.sorted\n            : currentObject.childNodes;\n        // should account for z-index\n        for (let i = objects.length - 1; i >= 0; i--) {\n          stack.push(objects[i] as unknown as DisplayObject);\n        }\n      }\n    };\n\n    // render at the end of frame\n    renderingService.hooks.endFrame.tap(CanvasRendererPlugin.tag, () => {\n      beforeDraw();\n\n      // Skip rendering.\n      if (renderingContext.root.childNodes.length === 0) {\n        this.clearFullScreenLastFrame = true;\n        return;\n      }\n\n      enableRenderingOptimization =\n        config.renderer.getConfig().enableRenderingOptimization;\n\n      // init\n      this.#renderState = {\n        restoreStack: [],\n        prevObject: null,\n        currentContext: this.#renderState.currentContext,\n      };\n      this.#renderState.currentContext.clear();\n      this.clearFullScreenLastFrame = false;\n\n      const context = contextService.getContext();\n      // clear & clip dirty rectangle\n      const dpr = contextService.getDPR();\n      mat4.fromScaling(this.dprMatrix, [dpr, dpr, 1]);\n      mat4.multiply(this.vpMatrix, this.dprMatrix, camera.getOrthoMatrix());\n\n      if (this.clearFullScreen) {\n        // console.time('renderByZIndex');\n        if (enableRenderingOptimization) {\n          context.save();\n          renderByZIndex(renderingContext.root, context);\n          context.restore();\n        } else {\n          renderByZIndex(renderingContext.root, context);\n        }\n        // console.timeEnd('renderByZIndex');\n\n        this.removedRBushNodeAABBs = [];\n      } else {\n        // console.log('canvas renderer next...', this.renderQueue);\n        // merge removed AABB\n        const dirtyRenderBounds = this.safeMergeAABB(\n          this.mergeDirtyAABBs(this.renderQueue),\n          ...this.removedRBushNodeAABBs.map(({ minX, minY, maxX, maxY }) => {\n            const aabb = new AABB();\n            aabb.setMinMax(\n              // vec3.fromValues(minX, minY, 0),\n              // vec3.fromValues(maxX, maxY, 0),\n              [minX, minY, 0],\n              [maxX, maxY, 0],\n            );\n            return aabb;\n          }),\n        );\n        this.removedRBushNodeAABBs = [];\n\n        if (AABB.isEmpty(dirtyRenderBounds)) {\n          this.renderQueue = [];\n          return;\n        }\n\n        const dirtyRect = this.convertAABB2Rect(dirtyRenderBounds);\n        const { x, y, width, height } = dirtyRect;\n\n        const tl = vec3.transformMat4(this.vec3a, [x, y, 0], this.vpMatrix);\n        const tr = vec3.transformMat4(\n          this.vec3b,\n          [x + width, y, 0],\n          this.vpMatrix,\n        );\n        const bl = vec3.transformMat4(\n          this.vec3c,\n          [x, y + height, 0],\n          this.vpMatrix,\n        );\n        const br = vec3.transformMat4(\n          this.vec3d,\n          [x + width, y + height, 0],\n          this.vpMatrix,\n        );\n\n        const minx = Math.min(tl[0], tr[0], br[0], bl[0]);\n        const miny = Math.min(tl[1], tr[1], br[1], bl[1]);\n        const maxx = Math.max(tl[0], tr[0], br[0], bl[0]);\n        const maxy = Math.max(tl[1], tr[1], br[1], bl[1]);\n\n        const ix = Math.floor(minx);\n        const iy = Math.floor(miny);\n        const iwidth = Math.ceil(maxx - minx);\n        const iheight = Math.ceil(maxy - miny);\n\n        context.save();\n        this.clearRect(context, ix, iy, iwidth, iheight, config.background);\n        context.beginPath();\n        context.rect(ix, iy, iwidth, iheight);\n        context.clip();\n\n        // @see https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API/Tutorial/Transformations\n        context.setTransform(\n          this.vpMatrix[0],\n          this.vpMatrix[1],\n          this.vpMatrix[4],\n          this.vpMatrix[5],\n          this.vpMatrix[12],\n          this.vpMatrix[13],\n        );\n\n        // draw dirty rectangle\n        const { enableDirtyRectangleRenderingDebug } =\n          config.renderer.getConfig();\n        if (enableDirtyRectangleRenderingDebug) {\n          canvas.dispatchEvent(\n            new CustomEvent(CanvasEvent.DIRTY_RECTANGLE, {\n              dirtyRect: {\n                x: ix,\n                y: iy,\n                width: iwidth,\n                height: iheight,\n              },\n            }),\n          );\n        }\n\n        // search objects intersect with dirty rectangle\n        const dirtyObjects = this.searchDirtyObjects(dirtyRenderBounds);\n\n        // do rendering\n        dirtyObjects\n          // sort by z-index\n          .sort((a, b) => a.sortable.renderOrder - b.sortable.renderOrder)\n          .forEach((object) => {\n            // culled object should not be rendered\n            if (object && object.isVisible() && !object.isCulled()) {\n              this.renderDisplayObject(\n                object,\n                context,\n                this.context,\n                this.#renderState,\n                runtime,\n              );\n            }\n          });\n\n        context.restore();\n\n        // save dirty AABBs in last frame\n        this.renderQueue.forEach((object) => {\n          this.saveDirtyAABB(object);\n        });\n\n        // clear queue\n        this.renderQueue = [];\n      }\n\n      // pop restore stack, eg. root -> parent -> child\n      this.#renderState.restoreStack.forEach(() => {\n        context.restore();\n      });\n      // clear restore stack\n      this.#renderState.restoreStack = [];\n    });\n\n    renderingService.hooks.render.tap(\n      CanvasRendererPlugin.tag,\n      (object: DisplayObject) => {\n        if (!this.clearFullScreen) {\n          // render at the end of frame\n          this.renderQueue.push(object);\n        }\n      },\n    );\n  }\n\n  private clearRect(\n    context: CanvasRenderingContext2D,\n    x: number,\n    y: number,\n    width: number,\n    height: number,\n    background: string,\n  ) {\n    // clearRect is faster than fillRect @see https://stackoverflow.com/a/30830253\n    context.clearRect(x, y, width, height);\n    if (background) {\n      context.fillStyle = background;\n      context.fillRect(x, y, width, height);\n    }\n  }\n\n  renderDisplayObjectOptimized(\n    object: DisplayObject,\n    context: CanvasRenderingContext2D,\n    canvasContext: CanvasContext,\n    renderState: RenderState,\n    runtime: GlobalRuntime,\n  ) {\n    const nodeName = object.nodeName as Shape;\n    let updateTransform = false;\n    let clipDraw = false;\n\n    // @ts-ignore\n    const styleRenderer = this.context.styleRendererFactory[nodeName];\n    const generatePath = this.pathGeneratorFactory[nodeName];\n\n    // clip path\n    const { clipPath } = object.parsedStyle;\n    if (clipPath) {\n      updateTransform =\n        !renderState.prevObject ||\n        !mat4.exactEquals(\n          clipPath.getWorldTransform(),\n          renderState.prevObject.getWorldTransform(),\n        );\n\n      if (updateTransform) {\n        this.applyWorldTransform(context, clipPath);\n        renderState.prevObject = null;\n      }\n\n      // generate path in local space\n      const generatePath =\n        this.pathGeneratorFactory[clipPath.nodeName as Shape];\n      if (generatePath) {\n        context.save();\n        clipDraw = true;\n\n        context.beginPath();\n        generatePath(context, clipPath.parsedStyle);\n        context.closePath();\n        context.clip();\n      }\n    }\n\n    // fill & stroke\n\n    if (styleRenderer) {\n      updateTransform =\n        !renderState.prevObject ||\n        !mat4.exactEquals(\n          object.getWorldTransform(),\n          renderState.prevObject.getWorldTransform(),\n        );\n\n      if (updateTransform) {\n        this.applyWorldTransform(context, object);\n      }\n\n      let forceUpdateStyle = !renderState.prevObject;\n      if (!forceUpdateStyle) {\n        const prevNodeName = renderState.prevObject.nodeName as Shape;\n\n        if (nodeName === Shape.TEXT) {\n          forceUpdateStyle = prevNodeName !== Shape.TEXT;\n        } else if (nodeName === Shape.IMAGE) {\n          forceUpdateStyle = prevNodeName !== Shape.IMAGE;\n        } else {\n          forceUpdateStyle =\n            prevNodeName === Shape.TEXT || prevNodeName === Shape.IMAGE;\n        }\n      }\n\n      styleRenderer.applyStyleToContext(\n        context,\n        object,\n        forceUpdateStyle,\n        renderState,\n      );\n\n      renderState.prevObject = object;\n    }\n\n    if (generatePath) {\n      context.beginPath();\n      generatePath(context, object.parsedStyle);\n      if (\n        nodeName !== Shape.LINE &&\n        nodeName !== Shape.PATH &&\n        nodeName !== Shape.POLYLINE\n      ) {\n        context.closePath();\n      }\n    }\n\n    // fill & stroke\n    if (styleRenderer) {\n      styleRenderer.drawToContext(\n        context,\n        object,\n        this.#renderState,\n        this,\n        runtime,\n      );\n    }\n\n    if (clipDraw) {\n      context.restore();\n    }\n\n    // finish rendering, clear dirty flag\n    object.dirty(false);\n  }\n\n  renderDisplayObject(\n    object: DisplayObject,\n    context: CanvasRenderingContext2D,\n    canvasContext: CanvasContext,\n    renderState: RenderState,\n    runtime: GlobalRuntime,\n  ) {\n    const nodeName = object.nodeName as Shape;\n\n    // restore to its ancestor\n\n    const parent =\n      renderState.restoreStack[renderState.restoreStack.length - 1];\n    if (\n      parent &&\n      !(\n        object.compareDocumentPosition(parent) & Node.DOCUMENT_POSITION_CONTAINS\n      )\n    ) {\n      context.restore();\n      renderState.restoreStack.pop();\n    }\n\n    // @ts-ignore\n    const styleRenderer = this.context.styleRendererFactory[nodeName];\n    const generatePath = this.pathGeneratorFactory[nodeName];\n\n    // clip path\n    const { clipPath } = object.parsedStyle;\n    if (clipPath) {\n      this.applyWorldTransform(context, clipPath);\n\n      // generate path in local space\n      const generatePath =\n        this.pathGeneratorFactory[clipPath.nodeName as Shape];\n      if (generatePath) {\n        context.save();\n\n        // save clip\n        renderState.restoreStack.push(object);\n\n        context.beginPath();\n        generatePath(context, clipPath.parsedStyle);\n        context.closePath();\n        context.clip();\n      }\n    }\n\n    // fill & stroke\n\n    if (styleRenderer) {\n      this.applyWorldTransform(context, object);\n\n      context.save();\n\n      // apply attributes to context\n      this.applyAttributesToContext(context, object);\n    }\n\n    if (generatePath) {\n      context.beginPath();\n      generatePath(context, object.parsedStyle);\n      if (\n        nodeName !== Shape.LINE &&\n        nodeName !== Shape.PATH &&\n        nodeName !== Shape.POLYLINE\n      ) {\n        context.closePath();\n      }\n    }\n\n    // fill & stroke\n    if (styleRenderer) {\n      styleRenderer.render(\n        context,\n        object.parsedStyle,\n        object,\n        canvasContext,\n        this,\n        runtime,\n      );\n\n      // restore applied attributes, eg. shadowBlur shadowColor...\n      context.restore();\n    }\n\n    // finish rendering, clear dirty flag\n    object.dirty(false);\n  }\n\n  private applyAttributesToContext(\n    context: CanvasRenderingContext2D,\n    object: DisplayObject,\n  ) {\n    const { stroke, fill, opacity, lineDash, lineDashOffset } =\n      object.parsedStyle as ParsedBaseStyleProps;\n    // @see https://developer.mozilla.org/zh-CN/docs/Web/API/CanvasRenderingContext2D/setLineDash\n    if (lineDash) {\n      context.setLineDash(lineDash);\n    }\n\n    // @see https://developer.mozilla.org/zh-CN/docs/Web/API/CanvasRenderingContext2D/lineDashOffset\n    if (!isNil(lineDashOffset)) {\n      context.lineDashOffset = lineDashOffset;\n    }\n\n    if (!isNil(opacity)) {\n      context.globalAlpha *= opacity;\n    }\n\n    if (\n      !isNil(stroke) &&\n      !Array.isArray(stroke) &&\n      !(stroke as CSSRGB).isNone\n    ) {\n      context.strokeStyle = object.attributes.stroke as string;\n    }\n\n    if (!isNil(fill) && !Array.isArray(fill) && !(fill as CSSRGB).isNone) {\n      context.fillStyle = object.attributes.fill as string;\n    }\n  }\n\n  private convertAABB2Rect(aabb: AABB): Rect {\n    const min = aabb.getMin();\n    const max = aabb.getMax();\n    // expand the rectangle a bit to avoid artifacts\n    // @see https://www.yuque.com/antv/ou292n/bi8nix#ExvCu\n    const minX = Math.floor(min[0]);\n    const minY = Math.floor(min[1]);\n    const maxX = Math.ceil(max[0]);\n    const maxY = Math.ceil(max[1]);\n    const width = maxX - minX;\n    const height = maxY - minY;\n\n    return { x: minX, y: minY, width, height };\n  }\n\n  /**\n   * TODO: merge dirty rectangles with some strategies.\n   * For now, we just simply merge all the rectangles into one.\n   * @see https://idom.me/articles/841.html\n   */\n  private mergeDirtyAABBs(dirtyObjects: DisplayObject[]): AABB {\n    // merge into a big AABB\n    // TODO: skip descendant if ancestor is caculated, but compareNodePosition is really slow\n    const aabb = new AABB();\n    dirtyObjects.forEach((object) => {\n      const renderBounds = object.getRenderBounds();\n      aabb.add(renderBounds);\n\n      const { dirtyRenderBounds } = object.renderable;\n      if (dirtyRenderBounds) {\n        aabb.add(dirtyRenderBounds);\n      }\n    });\n\n    return aabb;\n  }\n\n  private searchDirtyObjects(dirtyRectangle: AABB): DisplayObject[] {\n    // search in r-tree, get all affected nodes\n    const [minX, minY] = dirtyRectangle.getMin();\n    const [maxX, maxY] = dirtyRectangle.getMax();\n    const rBushNodes = this.rBush.search({\n      minX,\n      minY,\n      maxX,\n      maxY,\n    });\n\n    return rBushNodes.map(({ displayObject }) => displayObject);\n  }\n\n  private saveDirtyAABB(object: DisplayObject) {\n    const { renderable } = object;\n    if (!renderable.dirtyRenderBounds) {\n      renderable.dirtyRenderBounds = new AABB();\n    }\n    const renderBounds = object.getRenderBounds();\n    if (renderBounds) {\n      // save last dirty aabb\n      renderable.dirtyRenderBounds.update(\n        renderBounds.center,\n        renderBounds.halfExtents,\n      );\n    }\n  }\n\n  private applyWorldTransform(\n    context: CanvasRenderingContext2D,\n    object: DisplayObject,\n    matrix?: mat4,\n  ) {\n    // apply clip shape's RTS\n    if (matrix) {\n      mat4.copy(this.tmpMat4, object.getLocalTransform());\n      mat4.multiply(this.tmpMat4, matrix, this.tmpMat4);\n      mat4.multiply(this.tmpMat4, this.vpMatrix, this.tmpMat4);\n    } else {\n      // apply RTS transformation in world space\n      mat4.copy(this.tmpMat4, object.getWorldTransform());\n      mat4.multiply(this.tmpMat4, this.vpMatrix, this.tmpMat4);\n    }\n\n    // @see https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API/Tutorial/Transformations\n    context.setTransform(\n      this.tmpMat4[0],\n      this.tmpMat4[1],\n      this.tmpMat4[4],\n      this.tmpMat4[5],\n      this.tmpMat4[12],\n      this.tmpMat4[13],\n    );\n  }\n\n  private safeMergeAABB(...aabbs: AABB[]): AABB {\n    const merged = new AABB();\n    aabbs.forEach((aabb) => {\n      merged.add(aabb);\n    });\n    return merged;\n  }\n}\n", "import {\n  CanvasContext,\n  CSSGradientValue,\n  DisplayObject,\n  GlobalRuntime,\n  LinearGradient,\n  Pattern,\n  RadialGradient,\n  Rect,\n  GradientType,\n} from '@antv/g-lite';\nimport type { ImagePool } from '@antv/g-plugin-image-loader';\nimport {\n  CanvasRendererPlugin,\n  type RenderState,\n} from '../../CanvasRendererPlugin';\n\nexport function getPattern(\n  pattern: Pattern,\n  object: DisplayObject,\n  context: CanvasRenderingContext2D,\n  canvasContext: CanvasContext,\n  plugin: CanvasRendererPlugin,\n  runtime: GlobalRuntime,\n  imagePool: ImagePool,\n): CanvasPattern {\n  let $offscreenCanvas: HTMLCanvasElement;\n  let dpr: number;\n  if ((pattern.image as Rect).nodeName === 'rect') {\n    const { width, height } = (pattern.image as Rect).parsedStyle;\n    dpr = canvasContext.contextService.getDPR();\n    const { offscreenCanvas } = canvasContext.config;\n    $offscreenCanvas = runtime.offscreenCanvasCreator.getOrCreateCanvas(\n      offscreenCanvas,\n    ) as HTMLCanvasElement;\n\n    $offscreenCanvas.width = width * dpr;\n    $offscreenCanvas.height = height * dpr;\n\n    const offscreenCanvasContext =\n      runtime.offscreenCanvasCreator.getOrCreateContext(\n        offscreenCanvas,\n      ) as CanvasRenderingContext2D;\n\n    const renderState: RenderState = {\n      restoreStack: [],\n      prevObject: null,\n      currentContext: new Map(),\n    };\n\n    // offscreenCanvasContext.scale(1 / dpr, 1 / dpr);\n\n    (pattern.image as Rect).forEach((object: DisplayObject) => {\n      plugin.renderDisplayObject(\n        object,\n        offscreenCanvasContext,\n        canvasContext,\n        renderState,\n        runtime,\n      );\n    });\n\n    renderState.restoreStack.forEach(() => {\n      offscreenCanvasContext.restore();\n    });\n  }\n\n  const canvasPattern = imagePool.getOrCreatePatternSync(\n    object,\n    pattern,\n    context,\n    $offscreenCanvas,\n    dpr,\n    object.getGeometryBounds().min,\n    () => {\n      // set dirty rectangle flag\n      object.dirty();\n      canvasContext.renderingService.dirtify();\n    },\n  );\n\n  return canvasPattern;\n}\n\nexport function getColor(\n  parsedColor: CSSGradientValue,\n  object: DisplayObject,\n  context: CanvasRenderingContext2D,\n  imagePool: ImagePool,\n) {\n  let color: CanvasGradient | string;\n\n  if (\n    parsedColor.type === GradientType.LinearGradient ||\n    parsedColor.type === GradientType.RadialGradient\n  ) {\n    const bounds = object.getGeometryBounds();\n    const width = (bounds && bounds.halfExtents[0] * 2) || 1;\n    const height = (bounds && bounds.halfExtents[1] * 2) || 1;\n    const min = (bounds && bounds.min) || [0, 0];\n    color = imagePool.getOrCreateGradient(\n      {\n        type: parsedColor.type,\n        ...(parsedColor.value as LinearGradient & RadialGradient),\n        min: min as [number, number],\n        width,\n        height,\n      },\n      context,\n    );\n  }\n\n  return color;\n}\n", "import {\n  CanvasContext,\n  CSSRGB,\n  DisplayObject,\n  GlobalRuntime,\n  ParsedBaseStyleProps,\n  isPattern,\n  Shape,\n} from '@antv/g-lite';\nimport type { ImagePool } from '@antv/g-plugin-image-loader';\nimport { isNil } from '@antv/util';\nimport {\n  CanvasRendererPlugin,\n  type RenderState,\n} from '../../CanvasRendererPlugin';\nimport type { StyleRenderer } from './interfaces';\nimport { getColor, getPattern } from './helper';\n\nconst SHADOW_NUMBER_STYLE = [\n  'shadowBlur',\n  'shadowOffsetX',\n  'shadowOffsetY',\n] as const;\nconst STROKE_STYLE = ['lineCap', 'lineJoin', 'miterLimit'] as const;\nexport const DEFAULT_STYLE = {\n  // common\n  globalAlpha: 1,\n  shadowBlur: 0,\n  shadowOffsetX: 0,\n  shadowOffsetY: 0,\n  shadowColor: '#000',\n  filter: 'none' as const,\n  globalCompositeOperation: 'source-over' as const,\n\n  // stroke/fill\n  strokeStyle: '#000',\n  strokeOpacity: 1,\n  lineWidth: 1,\n  lineDash: [],\n  lineDashOffset: 0,\n  lineCap: 'butt' as const,\n  lineJoin: 'miter' as const,\n  miterLimit: 10,\n  fillStyle: '#000',\n  fillOpacity: 1,\n\n  // image\n};\n\nconst defaultParsedStyle = {} as ParsedBaseStyleProps;\n\n/**\n * Updating the canvas context is an expensive operation. The state of the context is cached and the actual update operation is performed only when the cache is not hit.\n *\n * In any case, the previous value is returned, which is convenient for temporarily updating the context and restoring it later.\n */\nfunction updateContextIfNotHitCache<\n  K extends keyof CanvasRenderingContext2D | 'lineDash',\n  V = unknown,\n>(context: CanvasRenderingContext2D, key: K, value: V, cache: Map<K, unknown>) {\n  const prevValue = (\n    cache.has(key)\n      ? cache.get(key)\n      : DEFAULT_STYLE[key as keyof typeof DEFAULT_STYLE]\n  ) as V;\n\n  if (prevValue !== value) {\n    // console.log('not hit cache', key, value, prevValue, cache);\n    if (key === 'lineDash') {\n      context.setLineDash(value as number[]);\n    } else {\n      // @ts-ignore\n      context[key] = value;\n    }\n    cache.set(key, value);\n  }\n\n  return prevValue;\n}\n\nexport class OptimizedDefaultRenderer implements StyleRenderer {\n  constructor(public imagePool: ImagePool) {}\n\n  applyAttributesToContext(\n    context: CanvasRenderingContext2D,\n    object: DisplayObject,\n  ) {}\n\n  render(\n    context: CanvasRenderingContext2D,\n    parsedStyle: ParsedBaseStyleProps,\n    object: DisplayObject,\n    canvasContext: CanvasContext,\n    plugin: CanvasRendererPlugin,\n    runtime: GlobalRuntime,\n  ) {}\n\n  // #region common style\n  private applyCommonStyleToContext(\n    context: CanvasRenderingContext2D,\n    object: DisplayObject,\n    forceUpdate: boolean,\n    renderState: RenderState,\n  ) {\n    // const dpr = object.ownerDocument.defaultView.getContextService().getDPR();\n    const prevStyle = forceUpdate\n      ? defaultParsedStyle\n      : renderState.prevObject.parsedStyle;\n    const style = object.parsedStyle;\n\n    if (forceUpdate || style.opacity !== prevStyle.opacity) {\n      updateContextIfNotHitCache(\n        context,\n        'globalAlpha',\n        !isNil(style.opacity) ? style.opacity : DEFAULT_STYLE.globalAlpha,\n        renderState.currentContext,\n      );\n    }\n\n    // TODO blend prop\n    // @ts-ignore\n    if (forceUpdate || style.blend !== prevStyle.blend) {\n      updateContextIfNotHitCache(\n        context,\n        'globalCompositeOperation',\n        // @ts-ignore\n        !isNil(style.blend)\n          ? // @ts-ignore\n            style.blend\n          : DEFAULT_STYLE.globalCompositeOperation,\n        renderState.currentContext,\n      );\n    }\n  }\n  // #endregion common style\n\n  // #region stroke/fill style\n  private applyStrokeFillStyleToContext(\n    context: CanvasRenderingContext2D,\n    object: DisplayObject,\n    forceUpdate: boolean,\n    renderState: RenderState,\n  ) {\n    const prevStyle = forceUpdate\n      ? defaultParsedStyle\n      : renderState.prevObject.parsedStyle;\n    const style = object.parsedStyle;\n    const { lineWidth = DEFAULT_STYLE.lineWidth } = style;\n    const hasFill = style.fill && !(style.fill as CSSRGB).isNone;\n    const hasStroke =\n      style.stroke && !(style.stroke as CSSRGB).isNone && lineWidth > 0;\n\n    if (hasStroke) {\n      if (\n        forceUpdate ||\n        object.attributes.stroke !== renderState.prevObject.attributes.stroke\n      ) {\n        const value =\n          !isNil(style.stroke) &&\n          !Array.isArray(style.stroke) &&\n          !(style.stroke as CSSRGB).isNone\n            ? object.attributes.stroke\n            : DEFAULT_STYLE.strokeStyle;\n\n        updateContextIfNotHitCache(\n          context,\n          'strokeStyle',\n          value,\n          renderState.currentContext,\n        );\n      }\n\n      if (forceUpdate || style.lineWidth !== prevStyle.lineWidth) {\n        updateContextIfNotHitCache(\n          context,\n          'lineWidth',\n          !isNil(style.lineWidth) ? style.lineWidth : DEFAULT_STYLE.lineWidth,\n          renderState.currentContext,\n        );\n      }\n\n      if (forceUpdate || style.lineDash !== prevStyle.lineDash) {\n        updateContextIfNotHitCache(\n          context,\n          'lineDash',\n          style.lineDash || DEFAULT_STYLE.lineDash,\n          renderState.currentContext,\n        );\n      }\n\n      if (forceUpdate || style.lineDashOffset !== prevStyle.lineDashOffset) {\n        updateContextIfNotHitCache(\n          context,\n          'lineDashOffset',\n          !isNil(style.lineDashOffset)\n            ? style.lineDashOffset\n            : DEFAULT_STYLE.lineDashOffset,\n          renderState.currentContext,\n        );\n      }\n\n      for (let i = 0; i < STROKE_STYLE.length; i++) {\n        const styleName = STROKE_STYLE[i];\n        if (forceUpdate || style[styleName] !== prevStyle[styleName]) {\n          updateContextIfNotHitCache(\n            context,\n            styleName,\n            !isNil(style[styleName])\n              ? style[styleName]\n              : DEFAULT_STYLE[styleName],\n            renderState.currentContext,\n          );\n        }\n      }\n    }\n\n    if (\n      hasFill &&\n      (forceUpdate ||\n        object.attributes.fill !== renderState.prevObject.attributes.fill)\n    ) {\n      const value =\n        !isNil(style.fill) &&\n        !Array.isArray(style.fill) &&\n        !(style.fill as CSSRGB).isNone\n          ? object.attributes.fill\n          : DEFAULT_STYLE.fillStyle;\n\n      updateContextIfNotHitCache(\n        context,\n        'fillStyle',\n        value,\n        renderState.currentContext,\n      );\n    }\n  }\n  // #endregion stroke/fill style\n\n  applyStyleToContext(\n    context: CanvasRenderingContext2D,\n    object: DisplayObject,\n    forceUpdate: boolean,\n    renderState: RenderState,\n  ) {\n    const nodeName = object.nodeName as Shape;\n\n    this.applyCommonStyleToContext(context, object, forceUpdate, renderState);\n\n    if (nodeName === Shape.IMAGE) {\n      //\n    } else {\n      this.applyStrokeFillStyleToContext(\n        context,\n        object,\n        forceUpdate,\n        renderState,\n      );\n    }\n  }\n\n  applyShadowAndFilterStyleToContext(\n    context: CanvasRenderingContext2D,\n    object: DisplayObject,\n    hasShadow: boolean,\n    renderState: RenderState,\n  ) {\n    const style = object.parsedStyle;\n\n    if (hasShadow) {\n      updateContextIfNotHitCache(\n        context,\n        'shadowColor',\n        style.shadowColor.toString(),\n        renderState.currentContext,\n      );\n      for (let i = 0; i < SHADOW_NUMBER_STYLE.length; i++) {\n        const styleName = SHADOW_NUMBER_STYLE[i];\n        updateContextIfNotHitCache(\n          context,\n          styleName,\n          style[styleName] || DEFAULT_STYLE[styleName],\n          renderState.currentContext,\n        );\n      }\n    }\n\n    if (style.filter && style.filter.length) {\n      updateContextIfNotHitCache(\n        context,\n        'filter',\n        // use raw filter string\n        object.attributes.filter,\n        renderState.currentContext,\n      );\n    }\n  }\n\n  clearShadowAndFilterStyleForContext(\n    context: CanvasRenderingContext2D,\n    hasShadow: boolean,\n    hasFilter: boolean,\n    renderState: RenderState,\n    onlyClearShadowFilter = false,\n  ) {\n    if (hasShadow) {\n      updateContextIfNotHitCache(\n        context,\n        'shadowColor',\n        DEFAULT_STYLE.shadowColor,\n        renderState.currentContext,\n      );\n      for (let i = 0; i < SHADOW_NUMBER_STYLE.length; i++) {\n        const styleName = SHADOW_NUMBER_STYLE[i];\n        updateContextIfNotHitCache(\n          context,\n          styleName,\n          DEFAULT_STYLE[styleName],\n          renderState.currentContext,\n        );\n      }\n    }\n\n    if (hasFilter) {\n      if (hasShadow && onlyClearShadowFilter) {\n        // save drop-shadow filter\n        const oldFilter = context.filter;\n        if (!isNil(oldFilter) && oldFilter.indexOf('drop-shadow') > -1) {\n          updateContextIfNotHitCache(\n            context,\n            'filter',\n            oldFilter.replace(/drop-shadow\\([^)]*\\)/, '').trim() ||\n              DEFAULT_STYLE.filter,\n            renderState.currentContext,\n          );\n        }\n      } else {\n        updateContextIfNotHitCache(\n          context,\n          'filter',\n          DEFAULT_STYLE.filter,\n          renderState.currentContext,\n        );\n      }\n    }\n  }\n\n  fillToContext(\n    context: CanvasRenderingContext2D,\n    object: DisplayObject,\n    renderState: RenderState,\n    plugin: CanvasRendererPlugin,\n    runtime: GlobalRuntime,\n  ) {\n    const { fill, fillRule } = object.parsedStyle;\n    let resetStyle = null as unknown;\n\n    if (Array.isArray(fill) && fill.length > 0) {\n      fill.forEach((gradient) => {\n        const prevStyle = updateContextIfNotHitCache(\n          context,\n          'fillStyle',\n          getColor(gradient, object, context, this.imagePool),\n          renderState.currentContext,\n        );\n        resetStyle = resetStyle ?? prevStyle;\n\n        if (fillRule) {\n          context.fill(fillRule);\n        } else {\n          context.fill();\n        }\n      });\n    } else {\n      if (isPattern(fill)) {\n        const pattern = getPattern(\n          fill,\n          object,\n          context,\n          object.ownerDocument.defaultView.context,\n          plugin,\n          runtime,\n          this.imagePool,\n        );\n        if (pattern) {\n          context.fillStyle = pattern;\n          resetStyle = true;\n        }\n      }\n\n      if (fillRule) {\n        context.fill(fillRule);\n      } else {\n        context.fill();\n      }\n    }\n\n    if (resetStyle !== null) {\n      updateContextIfNotHitCache(\n        context,\n        'fillStyle',\n        resetStyle,\n        renderState.currentContext,\n      );\n    }\n  }\n\n  strokeToContext(\n    context: CanvasRenderingContext2D,\n    object: DisplayObject,\n    renderState: RenderState,\n    plugin: CanvasRendererPlugin,\n    runtime: GlobalRuntime,\n  ) {\n    const { stroke } = object.parsedStyle;\n    let resetStyle = null as unknown;\n\n    if (Array.isArray(stroke) && stroke.length > 0) {\n      stroke.forEach((gradient) => {\n        const prevStyle = updateContextIfNotHitCache(\n          context,\n          'strokeStyle',\n          getColor(gradient, object, context, this.imagePool),\n          renderState.currentContext,\n        );\n        resetStyle = resetStyle ?? prevStyle;\n\n        context.stroke();\n      });\n    } else {\n      if (isPattern(stroke)) {\n        const pattern = getPattern(\n          stroke,\n          object,\n          context,\n          object.ownerDocument.defaultView.context,\n          plugin,\n          runtime,\n          this.imagePool,\n        );\n        if (pattern) {\n          const prevStyle = updateContextIfNotHitCache(\n            context,\n            'strokeStyle',\n            pattern,\n            renderState.currentContext,\n          );\n          resetStyle = resetStyle ?? prevStyle;\n        }\n      }\n\n      context.stroke();\n    }\n\n    if (resetStyle !== null) {\n      updateContextIfNotHitCache(\n        context,\n        'strokeStyle',\n        resetStyle,\n        renderState.currentContext,\n      );\n    }\n  }\n\n  drawToContext(\n    context: CanvasRenderingContext2D,\n    object: DisplayObject,\n    renderState: RenderState,\n    plugin: CanvasRendererPlugin,\n    runtime: GlobalRuntime,\n  ) {\n    const nodeName = object.nodeName as Shape;\n    const style = object.parsedStyle;\n    const {\n      opacity = DEFAULT_STYLE.globalAlpha,\n      fillOpacity = DEFAULT_STYLE.fillOpacity,\n      strokeOpacity = DEFAULT_STYLE.strokeOpacity,\n      lineWidth = DEFAULT_STYLE.lineWidth,\n    } = style;\n\n    const hasFill = style.fill && !(style.fill as CSSRGB).isNone;\n    const hasStroke =\n      style.stroke && !(style.stroke as CSSRGB).isNone && lineWidth > 0;\n\n    if (!hasFill && !hasStroke) {\n      return;\n    }\n\n    const hasShadow = !isNil(style.shadowColor) && style.shadowBlur > 0;\n    const isInnerShadow = style.shadowType === 'inner';\n    const isFillTransparent = (style.fill as CSSRGB)?.alpha === 0;\n    const hasFilter = !!(style.filter && style.filter.length);\n    // Shadows can only be applied to fill() or stroke(), the default is fill()\n    const shouldDrawShadowWithStroke =\n      hasShadow &&\n      hasStroke &&\n      (nodeName === Shape.PATH ||\n        nodeName === Shape.LINE ||\n        nodeName === Shape.POLYLINE ||\n        isFillTransparent ||\n        isInnerShadow);\n\n    // TODO https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/paint-order\n\n    let originGlobalAlpha: number | null = null;\n\n    if (hasFill) {\n      if (!shouldDrawShadowWithStroke) {\n        this.applyShadowAndFilterStyleToContext(\n          context,\n          object,\n          hasShadow,\n          renderState,\n        );\n      }\n\n      const updateOpacity = opacity * fillOpacity;\n\n      originGlobalAlpha = updateContextIfNotHitCache(\n        context,\n        'globalAlpha',\n        updateOpacity,\n        renderState.currentContext,\n      );\n\n      this.fillToContext(context, object, renderState, plugin, runtime);\n\n      if (!shouldDrawShadowWithStroke) {\n        this.clearShadowAndFilterStyleForContext(\n          context,\n          hasShadow,\n          hasFilter,\n          renderState,\n        );\n      }\n    }\n    if (hasStroke) {\n      let clearShadowAndFilter = false;\n      const updateOpacity = opacity * strokeOpacity;\n      const prevOpacity = updateContextIfNotHitCache(\n        context,\n        'globalAlpha',\n        updateOpacity,\n        renderState.currentContext,\n      );\n      originGlobalAlpha = hasFill ? originGlobalAlpha : prevOpacity;\n\n      if (shouldDrawShadowWithStroke) {\n        this.applyShadowAndFilterStyleToContext(\n          context,\n          object,\n          hasShadow,\n          renderState,\n        );\n        clearShadowAndFilter = true;\n\n        if (isInnerShadow) {\n          const originBlend = context.globalCompositeOperation;\n          context.globalCompositeOperation = 'source-atop';\n\n          this.strokeToContext(context, object, renderState, plugin, runtime);\n\n          context.globalCompositeOperation = originBlend;\n          this.clearShadowAndFilterStyleForContext(\n            context,\n            hasShadow,\n            hasFilter,\n            renderState,\n            true,\n          );\n        }\n      }\n\n      this.strokeToContext(context, object, renderState, plugin, runtime);\n\n      if (clearShadowAndFilter) {\n        this.clearShadowAndFilterStyleForContext(\n          context,\n          hasShadow,\n          hasFilter,\n          renderState,\n        );\n      }\n    }\n\n    // clear\n    if (originGlobalAlpha !== null) {\n      updateContextIfNotHitCache(\n        context,\n        'globalAlpha',\n        originGlobalAlpha,\n        renderState.currentContext,\n      );\n    }\n  }\n}\n", "import {\n  CanvasContext,\n  CSSGradientValue,\n  CSSRGB,\n  DisplayObject,\n  GlobalRuntime,\n  ParsedBaseStyleProps,\n  Pattern,\n  isPattern,\n  Shape,\n} from '@antv/g-lite';\nimport type { ImagePool } from '@antv/g-plugin-image-loader';\nimport { isNil } from '@antv/util';\nimport { CanvasRendererPlugin } from '../../CanvasRendererPlugin';\nimport { OptimizedDefaultRenderer, DEFAULT_STYLE } from './OptimizedDefault';\nimport { getColor, getPattern } from './helper';\n\nexport class DefaultRenderer extends OptimizedDefaultRenderer {\n  render(\n    context: CanvasRenderingContext2D,\n    parsedStyle: ParsedBaseStyleProps,\n    object: DisplayObject,\n    canvasContext: CanvasContext,\n    plugin: CanvasRendererPlugin,\n    runtime: GlobalRuntime,\n  ) {\n    const {\n      fill,\n      fillRule,\n      opacity = 1,\n      fillOpacity = 1,\n      stroke,\n      strokeOpacity = 1,\n      lineWidth = 1,\n      lineCap,\n      lineJoin,\n      shadowType,\n      shadowColor,\n      shadowBlur,\n      filter,\n      miterLimit,\n    } = parsedStyle;\n    const hasFill = fill && !(fill as CSSRGB).isNone;\n    const hasStroke = stroke && !(stroke as CSSRGB).isNone && lineWidth > 0;\n\n    const isFillTransparent = (fill as CSSRGB)?.alpha === 0;\n    const hasFilter = !!(filter && filter.length);\n    const hasShadow = !isNil(shadowColor) && shadowBlur > 0;\n    const nodeName = object.nodeName as Shape;\n    const isInnerShadow = shadowType === 'inner';\n    const shouldDrawShadowWithStroke =\n      hasStroke &&\n      hasShadow &&\n      (nodeName === Shape.PATH ||\n        nodeName === Shape.LINE ||\n        nodeName === Shape.POLYLINE ||\n        isFillTransparent ||\n        isInnerShadow);\n\n    if (hasFill) {\n      context.globalAlpha = opacity * fillOpacity;\n\n      if (!shouldDrawShadowWithStroke) {\n        setShadowAndFilter(object, context, hasShadow);\n      }\n\n      applyFill(\n        context,\n        object,\n        fill,\n        fillRule,\n        canvasContext,\n        plugin,\n        runtime,\n        this.imagePool,\n      );\n\n      if (!shouldDrawShadowWithStroke) {\n        this.clearShadowAndFilter(context, hasFilter, hasShadow);\n      }\n    }\n\n    if (hasStroke) {\n      context.globalAlpha = opacity * strokeOpacity;\n      context.lineWidth = lineWidth;\n      if (!isNil(miterLimit)) {\n        context.miterLimit = miterLimit;\n      }\n\n      if (!isNil(lineCap)) {\n        context.lineCap = lineCap;\n      }\n\n      if (!isNil(lineJoin)) {\n        context.lineJoin = lineJoin;\n      }\n\n      if (shouldDrawShadowWithStroke) {\n        if (isInnerShadow) {\n          context.globalCompositeOperation = 'source-atop';\n        }\n        setShadowAndFilter(object, context, true);\n\n        if (isInnerShadow) {\n          applyStroke(\n            context,\n            object,\n            stroke,\n            canvasContext,\n            plugin,\n            runtime,\n            this.imagePool,\n          );\n          context.globalCompositeOperation =\n            DEFAULT_STYLE.globalCompositeOperation;\n          this.clearShadowAndFilter(context, hasFilter, true);\n        }\n      }\n\n      applyStroke(\n        context,\n        object,\n        stroke,\n        canvasContext,\n        plugin,\n        runtime,\n        this.imagePool,\n      );\n    }\n  }\n\n  private clearShadowAndFilter(\n    context: CanvasRenderingContext2D,\n    hasFilter: boolean,\n    hasShadow: boolean,\n  ) {\n    if (hasShadow) {\n      context.shadowColor = 'transparent';\n      context.shadowBlur = 0;\n    }\n\n    if (hasFilter) {\n      // save drop-shadow filter\n      const oldFilter = context.filter;\n      if (!isNil(oldFilter) && oldFilter.indexOf('drop-shadow') > -1) {\n        context.filter =\n          oldFilter.replace(/drop-shadow\\([^)]*\\)/, '').trim() || 'none';\n      }\n    }\n  }\n}\n\n/**\n * apply before fill and stroke but only once\n */\nexport function setShadowAndFilter(\n  object: DisplayObject,\n  context: CanvasRenderingContext2D,\n  hasShadow: boolean,\n) {\n  const { filter, shadowColor, shadowBlur, shadowOffsetX, shadowOffsetY } =\n    object.parsedStyle;\n\n  if (filter && filter.length) {\n    // use raw filter string\n    context.filter = object.style.filter;\n  }\n\n  if (hasShadow) {\n    context.shadowColor = shadowColor.toString();\n    context.shadowBlur = shadowBlur || 0;\n    context.shadowOffsetX = shadowOffsetX || 0;\n    context.shadowOffsetY = shadowOffsetY || 0;\n  }\n}\n\nexport function applyFill(\n  context: CanvasRenderingContext2D,\n  object: DisplayObject,\n  fill: CSSRGB | CSSGradientValue[] | Pattern,\n  fillRule: 'nonzero' | 'evenodd',\n  canvasContext: CanvasContext,\n  plugin: CanvasRendererPlugin,\n  runtime: GlobalRuntime,\n  imagePool: ImagePool,\n  skipFill = false,\n) {\n  if (Array.isArray(fill)) {\n    fill.forEach((gradient) => {\n      context.fillStyle = getColor(gradient, object, context, imagePool);\n      if (!skipFill) {\n        fillRule ? context.fill(fillRule) : context.fill();\n      }\n    });\n  } else {\n    if (isPattern(fill)) {\n      context.fillStyle = getPattern(\n        fill,\n        object,\n        context,\n        canvasContext,\n        plugin,\n        runtime,\n        imagePool,\n      );\n    }\n    if (!skipFill) {\n      fillRule ? context.fill(fillRule) : context.fill();\n    }\n  }\n}\n\nexport function applyStroke(\n  context: CanvasRenderingContext2D,\n  object: DisplayObject,\n  stroke: CSSRGB | CSSGradientValue[] | Pattern,\n  canvasContext: CanvasContext,\n  plugin: CanvasRendererPlugin,\n  runtime: GlobalRuntime,\n  imagePool: ImagePool,\n  skipStroke = false,\n) {\n  if (Array.isArray(stroke)) {\n    stroke.forEach((gradient) => {\n      context.strokeStyle = getColor(gradient, object, context, imagePool);\n      if (!skipStroke) {\n        context.stroke();\n      }\n    });\n  } else {\n    if (isPattern(stroke)) {\n      context.strokeStyle = getPattern(\n        stroke,\n        object,\n        context,\n        canvasContext,\n        plugin,\n        runtime,\n        imagePool,\n      );\n    }\n    if (!skipStroke) {\n      context.stroke();\n    }\n  }\n}\n", "import { vec3, mat4 } from 'gl-matrix';\n\n/**\n *  [x, y]\n */\nexport function isSamePoint(\n  point1: [number, number],\n  point2: [number, number],\n) {\n  return point1[0] === point2[0] && point1[1] === point2[1];\n}\n\nexport function calculateOverlapRect<\n  Rect extends [number, number, number, number],\n>(rect1: Rect, rect2: Rect): null | Rect {\n  const [x1, y1, w1, h1] = rect1;\n  const [x2, y2, w2, h2] = rect2;\n\n  // \n  const overlapLeft = Math.max(x1, x2);\n  const overlapTop = Math.max(y1, y2);\n  const overlapRight = Math.min(x1 + w1, x2 + w2);\n  const overlapBottom = Math.min(y1 + h1, y2 + h2);\n\n  if (overlapRight <= overlapLeft || overlapBottom <= overlapTop) {\n    return null;\n  }\n\n  return [\n    overlapLeft,\n    overlapTop,\n    overlapRight - overlapLeft,\n    overlapBottom - overlapTop,\n  ] as Rect;\n}\n\nexport function transformRect<Rect extends [number, number, number, number]>(\n  rect: Rect,\n  matrix: mat4,\n): Rect {\n  const tl = vec3.transformMat4(vec3.create(), [rect[0], rect[1], 0], matrix);\n  const tr = vec3.transformMat4(\n    vec3.create(),\n    [rect[0] + rect[2], rect[1], 0],\n    matrix,\n  );\n  const bl = vec3.transformMat4(\n    vec3.create(),\n    [rect[0], rect[1] + rect[3], 0],\n    matrix,\n  );\n  const br = vec3.transformMat4(\n    vec3.create(),\n    [rect[0] + rect[2], rect[1] + rect[3], 0],\n    matrix,\n  );\n\n  return [\n    Math.min(tl[0], tr[0], bl[0], br[0]),\n    Math.min(tl[1], tr[1], bl[1], br[1]),\n    Math.max(tl[0], tr[0], bl[0], br[0]) - Math.min(tl[0], tr[0], bl[0], br[0]),\n    Math.max(tl[1], tr[1], bl[1], br[1]) - Math.min(tl[1], tr[1], bl[1], br[1]),\n  ] as Rect;\n}\n", "import type {\n  DisplayObject,\n  ParsedImageStyleProps,\n  GlobalRuntime,\n} from '@antv/g-lite';\nimport { ImagePool, type ImageCache } from '@antv/g-plugin-image-loader';\nimport { isNil } from '@antv/util';\nimport { mat4 } from 'gl-matrix';\nimport { transformRect, calculateOverlapRect } from '../../utils/math';\nimport { DefaultRenderer, setShadowAndFilter } from './Default';\nimport {\n  CanvasRendererPlugin,\n  type RenderState,\n} from '../../CanvasRendererPlugin';\n\nexport class ImageRenderer extends DefaultRenderer {\n  static renderFull(\n    context: CanvasRenderingContext2D,\n    parsedStyle: ParsedImageStyleProps,\n    object: DisplayObject,\n    data: {\n      image: HTMLImageElement;\n      drawRect: [number, number, number, number];\n    },\n  ) {\n    context.drawImage(\n      data.image,\n      Math.floor(data.drawRect[0]),\n      Math.floor(data.drawRect[1]),\n      Math.ceil(data.drawRect[2]),\n      Math.ceil(data.drawRect[3]),\n    );\n  }\n\n  private renderDownSampled(\n    context: CanvasRenderingContext2D,\n    parsedStyle: ParsedImageStyleProps,\n    object: DisplayObject,\n    data: {\n      src: string | HTMLImageElement;\n      imageCache: ImageCache;\n      drawRect: [number, number, number, number];\n    },\n  ) {\n    const { src, imageCache } = data;\n\n    if (!imageCache.downSampled) {\n      this.imagePool\n        .createDownSampledImage(src, object)\n        .then(() => {\n          // be removed from dom tree\n          if (!object.ownerDocument) {\n            return;\n          }\n\n          // rerender\n          object.dirty();\n          object.ownerDocument.defaultView.context.renderingService.dirtify();\n        })\n        .catch((reason) => {\n          console.error(reason);\n        });\n\n      return;\n    }\n\n    context.drawImage(\n      imageCache.downSampled,\n      Math.floor(data.drawRect[0]),\n      Math.floor(data.drawRect[1]),\n      Math.ceil(data.drawRect[2]),\n      Math.ceil(data.drawRect[3]),\n    );\n  }\n\n  renderTile(\n    context: CanvasRenderingContext2D,\n    parsedStyle: ParsedImageStyleProps,\n    object: DisplayObject,\n    data: {\n      src: string | HTMLImageElement;\n      imageCache: ImageCache;\n      imageRect: [number, number, number, number];\n      drawRect: [number, number, number, number];\n    },\n  ) {\n    const { src, imageCache, imageRect, drawRect } = data;\n    const { size: originalSize } = imageCache;\n    const { a, b, c, d, e, f } = context.getTransform();\n\n    context.resetTransform();\n\n    if (!imageCache?.gridSize) {\n      this.imagePool\n        .createImageTiles(\n          src,\n          [],\n          () => {\n            // be removed from dom tree\n            if (!object.ownerDocument) {\n              return;\n            }\n\n            // rerender\n            object.dirty();\n            object.ownerDocument.defaultView.context.renderingService.dirtify();\n          },\n          object,\n        )\n        .catch((reason) => {\n          console.error(reason);\n        });\n\n      return;\n    }\n\n    const scaleToOrigin = [\n      originalSize[0] / imageRect[2],\n      originalSize[1] / imageRect[3],\n    ];\n    const scaledTileSize = [\n      imageCache.tileSize[0] / scaleToOrigin[0],\n      imageCache.tileSize[1] / scaleToOrigin[1],\n    ];\n    const [startTileX, endTileX] = [\n      Math.floor((drawRect[0] - imageRect[0]) / scaledTileSize[0]),\n      Math.ceil((drawRect[0] + drawRect[2] - imageRect[0]) / scaledTileSize[0]),\n    ];\n    const [startTileY, endTileY] = [\n      Math.floor((drawRect[1] - imageRect[1]) / scaledTileSize[1]),\n      Math.ceil((drawRect[1] + drawRect[3] - imageRect[1]) / scaledTileSize[1]),\n    ];\n\n    for (let tileY = startTileY; tileY <= endTileY; tileY++) {\n      for (let tileX = startTileX; tileX <= endTileX; tileX++) {\n        const item = imageCache.tiles[tileY][tileX];\n\n        if (item) {\n          const tileRect = [\n            Math.floor(imageRect[0] + item.tileX * scaledTileSize[0]),\n            Math.floor(imageRect[1] + item.tileY * scaledTileSize[1]),\n            Math.ceil(scaledTileSize[0]),\n            Math.ceil(scaledTileSize[1]),\n          ];\n\n          context.drawImage(\n            item.data,\n            tileRect[0],\n            tileRect[1],\n            tileRect[2],\n            tileRect[3],\n          );\n        }\n      }\n    }\n\n    context.setTransform(a, b, c, d, e, f);\n  }\n\n  render(\n    context: CanvasRenderingContext2D,\n    parsedStyle: ParsedImageStyleProps,\n    object: DisplayObject,\n  ) {\n    const {\n      x = 0,\n      y = 0,\n      width,\n      height,\n      src,\n      shadowColor,\n      shadowBlur,\n    } = parsedStyle;\n\n    const imageCache = this.imagePool.getImageSync(src, object);\n    const image = imageCache?.img;\n    let iw = width;\n    let ih = height;\n\n    if (!image) {\n      return;\n    }\n\n    iw ||= image.width;\n    ih ||= image.height;\n\n    const hasShadow = !isNil(shadowColor) && shadowBlur > 0;\n    setShadowAndFilter(object, context, hasShadow);\n\n    // node-canvas will throw the following err:\n    // Error: Image given has not completed loading\n    try {\n      const { width: viewWidth, height: viewHeight } =\n        object.ownerDocument.defaultView.getContextService().getDomElement();\n\n      const currentTransform = context.getTransform();\n      const { a, b, c, d, e, f } = currentTransform;\n      //  mat4 \n      // prettier-ignore\n      const transformMatrix = mat4.fromValues(\n          a, c, 0, 0,\n          b, d, 0, 0,\n          0, 0, 1, 0,\n          e, f, 0, 1,\n        );\n      const imageRect = transformRect([x, y, iw, ih], transformMatrix);\n      const drawRect = calculateOverlapRect(\n        [0, 0, viewWidth, viewHeight],\n        imageRect,\n      );\n\n      if (!drawRect) {\n        return;\n      }\n\n      if (\n        !object.ownerDocument.defaultView.getConfig()\n          .enableLargeImageOptimization\n      ) {\n        ImageRenderer.renderFull(context, parsedStyle, object, {\n          image,\n          drawRect: [x, y, iw, ih],\n        });\n\n        return;\n      }\n\n      const sizeOfOrigin = imageRect[2] / imageCache.size[0];\n\n      if (sizeOfOrigin < (imageCache.downSamplingRate || 0.5)) {\n        this.renderDownSampled(context, parsedStyle, object, {\n          src,\n          imageCache,\n          drawRect: [x, y, iw, ih],\n        });\n\n        return;\n      }\n\n      if (!ImagePool.isSupportTile) {\n        ImageRenderer.renderFull(context, parsedStyle, object, {\n          image,\n          drawRect: [x, y, iw, ih],\n        });\n\n        return;\n      }\n\n      this.renderTile(context, parsedStyle, object, {\n        src,\n        imageCache,\n        imageRect,\n        drawRect,\n      });\n    } catch {\n      // expected error\n    }\n  }\n\n  // ---\n\n  drawToContext(\n    context: CanvasRenderingContext2D,\n    object: DisplayObject,\n    renderState: RenderState,\n    plugin: CanvasRendererPlugin,\n    runtime: GlobalRuntime,\n  ) {\n    this.render(context, object.parsedStyle as ParsedImageStyleProps, object);\n  }\n}\n", "import {\n  type CSSRGB,\n  type CanvasContext,\n  type DisplayObject,\n  type GlobalRuntime,\n  type ParsedTextStyleProps,\n  type Rectangle,\n  CSSGradientValue,\n  Pattern,\n} from '@antv/g-lite';\nimport { isNil } from '@antv/util';\nimport {\n  DefaultRenderer,\n  applyFill,\n  applyStroke,\n  setShadowAndFilter,\n} from './Default';\nimport {\n  CanvasRendererPlugin,\n  type RenderState,\n} from '../../CanvasRendererPlugin';\n\nexport class TextRenderer extends DefaultRenderer {\n  render(\n    context: CanvasRenderingContext2D,\n    parsedStyle: ParsedTextStyleProps,\n    object: DisplayObject,\n    canvasContext: CanvasContext,\n    plugin: CanvasRendererPlugin,\n    runtime: GlobalRuntime,\n  ) {\n    // Trigger text geometry calculation.\n    object.getBounds();\n    const {\n      lineWidth = 1,\n      textAlign = 'start',\n      textBaseline = 'alphabetic',\n      lineJoin = 'miter',\n      miterLimit = 10,\n      letterSpacing = 0,\n      stroke,\n      fill,\n      fillRule,\n      fillOpacity = 1,\n      strokeOpacity = 1,\n      opacity = 1,\n      metrics,\n      x = 0,\n      y = 0,\n      dx,\n      dy,\n      shadowColor,\n      shadowBlur,\n    } = parsedStyle;\n\n    const { font, lines, height, lineHeight, lineMetrics } = metrics;\n\n    context.font = font;\n    context.lineWidth = lineWidth;\n    context.textAlign = textAlign === 'middle' ? 'center' : textAlign;\n\n    let formattedTextBaseline = textBaseline;\n    if (formattedTextBaseline === 'alphabetic') {\n      formattedTextBaseline = 'bottom';\n    }\n\n    context.lineJoin = lineJoin;\n    if (!isNil(miterLimit)) {\n      context.miterLimit = miterLimit;\n    }\n\n    let linePositionY = y;\n    // handle vertical text baseline\n    if (textBaseline === 'middle') {\n      linePositionY += -height / 2 - lineHeight / 2;\n    } else if (\n      textBaseline === 'bottom' ||\n      textBaseline === 'alphabetic' ||\n      textBaseline === 'ideographic'\n    ) {\n      linePositionY += -height;\n    } else if (textBaseline === 'top' || textBaseline === 'hanging') {\n      linePositionY += -lineHeight;\n    }\n\n    // account for dx & dy\n    const offsetX = x + (dx || 0);\n    linePositionY += dy || 0;\n\n    if (lines.length === 1) {\n      if (formattedTextBaseline === 'bottom') {\n        formattedTextBaseline = 'middle';\n        linePositionY -= 0.5 * height;\n      } else if (formattedTextBaseline === 'top') {\n        formattedTextBaseline = 'middle';\n        linePositionY += 0.5 * height;\n      }\n    }\n    context.textBaseline = formattedTextBaseline;\n\n    const hasShadow = !isNil(shadowColor) && shadowBlur > 0;\n    setShadowAndFilter(object, context, hasShadow);\n\n    // draw lines line by line\n    for (let i = 0; i < lines.length; i++) {\n      const linePositionX = lineWidth / 2 + offsetX;\n      linePositionY += lineHeight;\n\n      // no need to re-position X, cause we already set text align\n      // @see https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/textAlign\n      if (!isNil(stroke) && !(stroke as CSSRGB).isNone && lineWidth) {\n        this.drawLetterSpacing(\n          context,\n          object,\n          lines[i],\n          lineMetrics[i],\n          textAlign,\n          linePositionX,\n          linePositionY,\n          letterSpacing,\n          fill,\n          fillRule,\n          fillOpacity,\n          stroke,\n          strokeOpacity,\n          opacity,\n          true,\n          canvasContext,\n          plugin,\n          runtime,\n        );\n      }\n      if (!isNil(fill)) {\n        this.drawLetterSpacing(\n          context,\n          object,\n          lines[i],\n          lineMetrics[i],\n          textAlign,\n          linePositionX,\n          linePositionY,\n          letterSpacing,\n          fill,\n          fillRule,\n          fillOpacity,\n          stroke,\n          strokeOpacity,\n          opacity,\n          false,\n          canvasContext,\n          plugin,\n          runtime,\n        );\n      }\n    }\n  }\n\n  private drawLetterSpacing(\n    context: CanvasRenderingContext2D,\n    object: DisplayObject,\n    text: string,\n    lineMetrics: Rectangle,\n    textAlign: CanvasTextAlign | 'middle',\n    x: number,\n    y: number,\n    letterSpacing: number,\n    fill: CSSRGB | CSSGradientValue[] | Pattern,\n    fillRule: 'nonzero' | 'evenodd',\n    fillOpacity: number | undefined,\n    stroke: CSSRGB | CSSGradientValue[] | Pattern,\n    strokeOpacity: number | undefined,\n    opacity: number | undefined,\n    isStroke: boolean,\n    canvasContext: CanvasContext,\n    plugin: CanvasRendererPlugin,\n    runtime: GlobalRuntime,\n  ): void {\n    // letterSpacing of 0 means normal, render all texts directly\n    if (letterSpacing === 0) {\n      if (isStroke) {\n        this.strokeText(\n          context,\n          object,\n          text,\n          x,\n          y,\n          stroke,\n          strokeOpacity,\n          canvasContext,\n          plugin,\n          runtime,\n        );\n      } else {\n        this.fillText(\n          context,\n          object,\n          text,\n          x,\n          y,\n          fill,\n          fillRule,\n          fillOpacity,\n          opacity,\n          canvasContext,\n          plugin,\n          runtime,\n        );\n      }\n      return;\n    }\n\n    // draw text using left align\n    const currentTextAlign = context.textAlign;\n    context.textAlign = 'left';\n\n    let currentPosition = x;\n    if (textAlign === 'center' || textAlign === 'middle') {\n      currentPosition = x - lineMetrics.width / 2;\n    } else if (textAlign === 'right' || textAlign === 'end') {\n      currentPosition = x - lineMetrics.width;\n    }\n\n    const stringArray = Array.from(text);\n    let previousWidth = context.measureText(text).width;\n    let currentWidth = 0;\n    for (let i = 0; i < stringArray.length; ++i) {\n      const currentChar = stringArray[i];\n      if (isStroke) {\n        this.strokeText(\n          context,\n          object,\n          currentChar,\n          currentPosition,\n          y,\n          stroke,\n          strokeOpacity,\n          canvasContext,\n          plugin,\n          runtime,\n        );\n      } else {\n        this.fillText(\n          context,\n          object,\n          currentChar,\n          currentPosition,\n          y,\n          fill,\n          fillRule,\n          fillOpacity,\n          opacity,\n          canvasContext,\n          plugin,\n          runtime,\n        );\n      }\n      currentWidth = context.measureText(text.substring(i + 1)).width;\n      currentPosition += previousWidth - currentWidth + letterSpacing;\n      previousWidth = currentWidth;\n    }\n\n    context.textAlign = currentTextAlign;\n  }\n\n  private fillText(\n    context: CanvasRenderingContext2D,\n    object: DisplayObject,\n    text: string,\n    x: number,\n    y: number,\n    fill: CSSRGB | CSSGradientValue[] | Pattern,\n    fillRule: 'nonzero' | 'evenodd',\n    fillOpacity: number | undefined,\n    opacity: number | undefined,\n    canvasContext: CanvasContext,\n    plugin: CanvasRendererPlugin,\n    runtime: GlobalRuntime,\n  ) {\n    applyFill(\n      context,\n      object,\n      fill,\n      fillRule,\n      canvasContext,\n      plugin,\n      runtime,\n      this.imagePool,\n      true,\n    );\n\n    let currentGlobalAlpha: number;\n    const applyOpacity = !isNil(fillOpacity) && fillOpacity !== 1;\n    if (applyOpacity) {\n      currentGlobalAlpha = context.globalAlpha;\n      context.globalAlpha = fillOpacity * opacity;\n    }\n    context.fillText(text, x, y);\n    if (applyOpacity) {\n      context.globalAlpha = currentGlobalAlpha;\n    }\n  }\n\n  private strokeText(\n    context: CanvasRenderingContext2D,\n    object: DisplayObject,\n    text: string,\n    x: number,\n    y: number,\n    stroke: CSSRGB | CSSGradientValue[] | Pattern,\n    strokeOpacity: number | undefined,\n    canvasContext: CanvasContext,\n    plugin: CanvasRendererPlugin,\n    runtime: GlobalRuntime,\n  ) {\n    applyStroke(\n      context,\n      object,\n      stroke,\n      canvasContext,\n      plugin,\n      runtime,\n      this.imagePool,\n      true,\n    );\n\n    let currentGlobalAlpha: number;\n    const applyOpacity = !isNil(strokeOpacity) && strokeOpacity !== 1;\n    if (applyOpacity) {\n      currentGlobalAlpha = context.globalAlpha;\n      context.globalAlpha = strokeOpacity!;\n    }\n    context.strokeText(text, x, y);\n    if (applyOpacity) {\n      context.globalAlpha = currentGlobalAlpha;\n    }\n  }\n\n  // ---\n\n  drawToContext(\n    context: CanvasRenderingContext2D,\n    object: DisplayObject,\n    renderState: RenderState,\n    plugin: CanvasRendererPlugin,\n    runtime: GlobalRuntime,\n  ) {\n    this.render(\n      context,\n      object.parsedStyle as ParsedTextStyleProps,\n      object,\n      object.ownerDocument.defaultView.context,\n      plugin,\n      runtime,\n    );\n  }\n}\n", "import { AbstractRendererPlugin, Shape } from '@antv/g-lite';\nimport type { PathGenerator } from '@antv/g-plugin-canvas-path-generator';\nimport { CanvasRendererPlugin } from './CanvasRendererPlugin';\nimport {\n  type StyleRenderer,\n  DefaultRenderer,\n  TextRenderer,\n  ImageRenderer,\n} from './shapes/styles';\nimport type { CanvasRendererPluginOptions } from './interfaces';\n\nexport * from './shapes/styles';\n\nexport class Plugin extends AbstractRendererPlugin<{\n  defaultStyleRendererFactory: Record<Shape, StyleRenderer>;\n  styleRendererFactory: Record<Shape, StyleRenderer>;\n  pathGeneratorFactory: Record<Shape, PathGenerator<any>>;\n}> {\n  name = 'canvas-renderer';\n\n  constructor(private options: Partial<CanvasRendererPluginOptions> = {}) {\n    super();\n  }\n\n  init(): void {\n    const canvasRendererPluginOptions: CanvasRendererPluginOptions = {\n      dirtyObjectNumThreshold: 500,\n      dirtyObjectRatioThreshold: 0.8,\n      ...this.options,\n    };\n\n    // @ts-ignore\n    const { imagePool } = this.context;\n\n    const defaultRenderer = new DefaultRenderer(imagePool);\n\n    const defaultStyleRendererFactory: Record<Shape, StyleRenderer> = {\n      [Shape.CIRCLE]: defaultRenderer,\n      [Shape.ELLIPSE]: defaultRenderer,\n      [Shape.RECT]: defaultRenderer,\n      [Shape.IMAGE]: new ImageRenderer(imagePool),\n      [Shape.TEXT]: new TextRenderer(imagePool),\n      [Shape.LINE]: defaultRenderer,\n      [Shape.POLYLINE]: defaultRenderer,\n      [Shape.POLYGON]: defaultRenderer,\n      [Shape.PATH]: defaultRenderer,\n      [Shape.GROUP]: undefined,\n      [Shape.HTML]: undefined,\n      [Shape.MESH]: undefined,\n      [Shape.FRAGMENT]: undefined,\n    };\n\n    this.context.defaultStyleRendererFactory = defaultStyleRendererFactory;\n    this.context.styleRendererFactory = defaultStyleRendererFactory;\n\n    this.addRenderingPlugin(\n      new CanvasRendererPlugin(canvasRendererPluginOptions),\n    );\n  }\n  destroy(): void {\n    this.removeAllRenderingPlugins();\n\n    delete this.context.defaultStyleRendererFactory;\n    delete this.context.styleRendererFactory;\n  }\n}\n", "import type {\n  GlobalRuntime,\n  InteractivePointerEvent,\n  RenderingPlugin,\n  RenderingPluginContext,\n} from '@antv/g-lite';\n\n// const MOBILE_REGEX = /mobile|tablet|ip(ad|hone|od)|android/i;\n\n/**\n * listen to mouse/touch/pointer events on DOM wrapper, trigger pointer events\n */\nexport class DOMInteractionPlugin implements RenderingPlugin {\n  static tag = 'DOMInteraction';\n\n  private context: RenderingPluginContext;\n\n  apply(context: RenderingPluginContext, runtime: GlobalRuntime) {\n    const { renderingService, renderingContext, config } = context;\n    this.context = context;\n\n    const canvas = renderingContext.root.ownerDocument.defaultView;\n    // const SUPPORT_ONLY_TOUCH = canvas.supportsTouchEvents && MOBILE_REGEX.test(navigator.userAgent);\n\n    const onPointerMove = (ev: InteractivePointerEvent) => {\n      renderingService.hooks.pointerMove.call(ev);\n    };\n\n    const onPointerUp = (ev: InteractivePointerEvent) => {\n      renderingService.hooks.pointerUp.call(ev);\n    };\n\n    const onPointerDown = (ev: InteractivePointerEvent) => {\n      renderingService.hooks.pointerDown.call(ev);\n    };\n\n    const onPointerOver = (ev: InteractivePointerEvent) => {\n      renderingService.hooks.pointerOver.call(ev);\n    };\n\n    const onPointerOut = (ev: InteractivePointerEvent) => {\n      renderingService.hooks.pointerOut.call(ev);\n    };\n\n    const onPointerCancel = (ev: InteractivePointerEvent) => {\n      renderingService.hooks.pointerCancel.call(ev);\n    };\n\n    const onPointerWheel = (ev: InteractivePointerEvent) => {\n      renderingService.hooks.pointerWheel.call(ev);\n    };\n\n    const onClick = (ev: InteractivePointerEvent) => {\n      renderingService.hooks.click.call(ev);\n    };\n\n    const addPointerEventListener = ($el: HTMLElement) => {\n      runtime.globalThis.document.addEventListener(\n        'pointermove',\n        onPointerMove,\n        true,\n      );\n      $el.addEventListener('pointerdown', onPointerDown, true);\n      $el.addEventListener('pointerleave', onPointerOut, true);\n      $el.addEventListener('pointerover', onPointerOver, true);\n      runtime.globalThis.addEventListener('pointerup', onPointerUp, true);\n      runtime.globalThis.addEventListener(\n        'pointercancel',\n        onPointerCancel,\n        true,\n      );\n    };\n\n    const addTouchEventListener = ($el: HTMLElement) => {\n      $el.addEventListener('touchstart', onPointerDown, true);\n      $el.addEventListener('touchend', onPointerUp, true);\n      $el.addEventListener('touchmove', onPointerMove, true);\n      $el.addEventListener('touchcancel', onPointerCancel, true);\n    };\n\n    const addMouseEventListener = ($el: HTMLElement) => {\n      runtime.globalThis.document.addEventListener(\n        'mousemove',\n        onPointerMove,\n        true,\n      );\n      $el.addEventListener('mousedown', onPointerDown, true);\n      $el.addEventListener('mouseout', onPointerOut, true);\n      $el.addEventListener('mouseover', onPointerOver, true);\n      runtime.globalThis.addEventListener('mouseup', onPointerUp, true);\n    };\n\n    const removePointerEventListener = ($el: HTMLElement) => {\n      runtime.globalThis.document.removeEventListener(\n        'pointermove',\n        onPointerMove,\n        true,\n      );\n      $el.removeEventListener('pointerdown', onPointerDown, true);\n      $el.removeEventListener('pointerleave', onPointerOut, true);\n      $el.removeEventListener('pointerover', onPointerOver, true);\n      runtime.globalThis.removeEventListener('pointerup', onPointerUp, true);\n      runtime.globalThis.removeEventListener(\n        'pointercancel',\n        onPointerCancel,\n        true,\n      );\n    };\n\n    const removeTouchEventListener = ($el: HTMLElement) => {\n      $el.removeEventListener('touchstart', onPointerDown, true);\n      $el.removeEventListener('touchend', onPointerUp, true);\n      $el.removeEventListener('touchmove', onPointerMove, true);\n      $el.removeEventListener('touchcancel', onPointerCancel, true);\n    };\n\n    const removeMouseEventListener = ($el: HTMLElement) => {\n      runtime.globalThis.document.removeEventListener(\n        'mousemove',\n        onPointerMove,\n        true,\n      );\n      $el.removeEventListener('mousedown', onPointerDown, true);\n      $el.removeEventListener('mouseout', onPointerOut, true);\n      $el.removeEventListener('mouseover', onPointerOver, true);\n      runtime.globalThis.removeEventListener('mouseup', onPointerUp, true);\n    };\n\n    renderingService.hooks.init.tap(DOMInteractionPlugin.tag, () => {\n      const $el =\n        this.context.contextService.getDomElement() as unknown as HTMLElement;\n\n      // @ts-ignore\n      if (runtime.globalThis.navigator.msPointerEnabled) {\n        // @ts-ignore\n        $el.style.msContentZooming = 'none';\n        // @ts-ignore\n        $el.style.msTouchAction = 'none';\n      } else if (canvas.supportsPointerEvents) {\n        $el.style.touchAction = 'none';\n      }\n\n      if (canvas.supportsPointerEvents) {\n        addPointerEventListener($el);\n      } else {\n        addMouseEventListener($el);\n      }\n\n      if (canvas.supportsTouchEvents) {\n        addTouchEventListener($el);\n      }\n\n      if (config.useNativeClickEvent) {\n        $el.addEventListener('click', onClick, true);\n      }\n\n      // use passive event listeners\n      // @see https://zhuanlan.zhihu.com/p/24555031\n      $el.addEventListener('wheel', onPointerWheel, {\n        passive: true,\n        capture: true,\n      });\n    });\n\n    renderingService.hooks.destroy.tap(DOMInteractionPlugin.tag, () => {\n      const $el =\n        this.context.contextService.getDomElement() as unknown as HTMLElement;\n\n      // @ts-ignore\n      if (runtime.globalThis.navigator.msPointerEnabled) {\n        // @ts-ignore\n        $el.style.msContentZooming = '';\n        // @ts-ignore\n        $el.style.msTouchAction = '';\n      } else if (canvas.supportsPointerEvents) {\n        $el.style.touchAction = '';\n      }\n\n      if (canvas.supportsPointerEvents) {\n        removePointerEventListener($el);\n      } else {\n        removeMouseEventListener($el);\n      }\n\n      if (canvas.supportsTouchEvents) {\n        removeTouchEventListener($el);\n      }\n\n      if (config.useNativeClickEvent) {\n        $el.removeEventListener('click', onClick, true);\n      }\n\n      $el.removeEventListener('wheel', onPointerWheel, true);\n    });\n  }\n}\n", "import { AbstractRendererPlugin } from '@antv/g-lite';\nimport { DOMInteractionPlugin } from './DOMInteractionPlugin';\n\nexport class Plugin extends AbstractRendererPlugin {\n  name = 'dom-interaction';\n\n  init(): void {\n    this.addRenderingPlugin(new DOMInteractionPlugin());\n  }\n  destroy(): void {\n    this.removeAllRenderingPlugins();\n  }\n}\n", "import {\n  DisplayObject,\n  FederatedEvent,\n  GlobalRuntime,\n  HTML,\n  ICamera,\n  MutationEvent,\n  RenderingPlugin,\n  RenderingPluginContext,\n  CanvasEvent,\n  RenderReason,\n  isCSSRGB,\n  ElementEvent,\n  isPattern,\n  Shape,\n} from '@antv/g-lite';\nimport { isNil, isNumber, isString } from '@antv/util';\nimport type { mat4, vec3 } from 'gl-matrix';\n\nconst CANVAS_CAMERA_ID = 'g-canvas-camera';\n\nexport class HTMLRenderingPlugin implements RenderingPlugin {\n  static tag = 'HTMLRendering';\n\n  private context: RenderingPluginContext;\n\n  /**\n   * wrapper for camera\n   */\n  private $camera: HTMLDivElement;\n\n  private displayObjectHTMLElementMap = new WeakMap<\n    DisplayObject,\n    HTMLElement\n  >();\n\n  /**\n   * ! The reason for adding `offset` is that the `transform-origin` coordinate system of DOM is the local coordinate system of the element, while the `transform-origin` coordinate system of canvas drawing is the local coordinate system of the element's parent element. At the same time, the `transform` attribute value of the DOM element does not include `transform-origin`.\n   */\n  private joinTransformMatrix(matrix: mat4, offset: vec3 = [0, 0, 0]) {\n    return `matrix(${[\n      matrix[0],\n      matrix[1],\n      matrix[4],\n      matrix[5],\n      matrix[12] + offset[0],\n      matrix[13] + offset[1],\n    ].join(',')})`;\n  }\n\n  apply(context: RenderingPluginContext, runtime: GlobalRuntime) {\n    const { camera, renderingContext, renderingService } = context;\n    this.context = context;\n    const canvas = renderingContext.root.ownerDocument.defaultView;\n    const { nativeHTMLMap } = canvas.context.eventService;\n\n    const setTransform = (object: HTML, $el: HTMLElement) => {\n      $el.style.transform = this.joinTransformMatrix(\n        object.getWorldTransform(),\n        object.getOrigin(),\n      );\n    };\n\n    const handleMounted = (e: FederatedEvent) => {\n      const object = e.target as HTML;\n      if (object.nodeName === Shape.HTML) {\n        if (!this.$camera) {\n          this.$camera = this.createCamera(camera);\n        }\n\n        // create DOM element\n        const $el = this.getOrCreateEl(object);\n        this.$camera.appendChild($el);\n\n        Object.keys(object.attributes).forEach((name) => {\n          this.updateAttribute(name, object);\n        });\n\n        setTransform(object, $el);\n\n        nativeHTMLMap.set($el, object);\n      }\n    };\n\n    const handleUnmounted = (e: FederatedEvent) => {\n      const object = e.target as HTML;\n      if (object.nodeName === Shape.HTML && this.$camera) {\n        const $el = this.getOrCreateEl(object);\n        if ($el) {\n          $el.remove();\n          nativeHTMLMap.delete($el);\n        }\n      }\n    };\n\n    const handleAttributeChanged = (e: MutationEvent) => {\n      const object = e.target as HTML;\n      if (object.nodeName === Shape.HTML) {\n        const { attrName } = e;\n        this.updateAttribute(attrName, object);\n      }\n    };\n\n    const handleBoundsChanged = (e: MutationEvent) => {\n      const object = e.target as HTML;\n      const nodes =\n        object.nodeName === Shape.FRAGMENT ? object.childNodes : [object];\n\n      nodes.forEach((node: HTML) => {\n        if (node.nodeName === Shape.HTML) {\n          const $el = this.getOrCreateEl(node);\n          setTransform(node, $el);\n        }\n      });\n    };\n\n    const handleCanvasResize = () => {\n      if (this.$camera) {\n        const { width, height } = this.context.config;\n        this.$camera.parentElement.style.width = `${width || 0}px`;\n        this.$camera.parentElement.style.height = `${height || 0}px`;\n      }\n    };\n\n    renderingService.hooks.init.tap(HTMLRenderingPlugin.tag, () => {\n      canvas.addEventListener(CanvasEvent.RESIZE, handleCanvasResize);\n      canvas.addEventListener(ElementEvent.MOUNTED, handleMounted);\n      canvas.addEventListener(ElementEvent.UNMOUNTED, handleUnmounted);\n      canvas.addEventListener(\n        ElementEvent.ATTR_MODIFIED,\n        handleAttributeChanged,\n      );\n      canvas.addEventListener(ElementEvent.BOUNDS_CHANGED, handleBoundsChanged);\n    });\n\n    renderingService.hooks.endFrame.tap(HTMLRenderingPlugin.tag, () => {\n      if (\n        this.$camera &&\n        renderingContext.renderReasons.has(RenderReason.CAMERA_CHANGED)\n      ) {\n        this.$camera.style.transform = this.joinTransformMatrix(\n          camera.getOrthoMatrix(),\n        );\n      }\n    });\n\n    renderingService.hooks.destroy.tap(HTMLRenderingPlugin.tag, () => {\n      // remove camera\n      if (this.$camera) {\n        this.$camera.remove();\n      }\n\n      canvas.removeEventListener(CanvasEvent.RESIZE, handleCanvasResize);\n      canvas.removeEventListener(ElementEvent.MOUNTED, handleMounted);\n      canvas.removeEventListener(ElementEvent.UNMOUNTED, handleUnmounted);\n      canvas.removeEventListener(\n        ElementEvent.ATTR_MODIFIED,\n        handleAttributeChanged,\n      );\n      canvas.removeEventListener(\n        ElementEvent.BOUNDS_CHANGED,\n        handleBoundsChanged,\n      );\n    });\n  }\n\n  private createCamera(camera: ICamera) {\n    const { document: doc, width, height } = this.context.config;\n    const $canvas =\n      this.context.contextService.getDomElement() as unknown as HTMLElement;\n    const $container = $canvas.parentNode;\n    if ($container) {\n      const cameraId = CANVAS_CAMERA_ID;\n      let $existedCamera = $container.querySelector<HTMLDivElement>(\n        `#${cameraId}`,\n      );\n      if (!$existedCamera) {\n        // fix @see https://github.com/antvis/G/issues/1702\n        const $cameraContainer = (doc || document).createElement('div');\n        // HTML elements should not overflow with canvas @see https://github.com/antvis/G/issues/1163\n        $cameraContainer.style.overflow = 'hidden';\n        $cameraContainer.style.pointerEvents = 'none';\n        $cameraContainer.style.position = 'absolute';\n        $cameraContainer.style.left = `0px`;\n        $cameraContainer.style.top = `0px`;\n        $cameraContainer.style.width = `${width || 0}px`;\n        $cameraContainer.style.height = `${height || 0}px`;\n\n        const $camera = (doc || document).createElement('div');\n        $existedCamera = $camera;\n        $camera.id = cameraId;\n        // use absolute position\n        $camera.style.position = 'absolute';\n        // account for DOM element's offset @see https://github.com/antvis/G/issues/1150\n        $camera.style.left = `${$canvas.offsetLeft || 0}px`;\n        $camera.style.top = `${$canvas.offsetTop || 0}px`;\n        $camera.style.transformOrigin = 'left top';\n        $camera.style.transform = this.joinTransformMatrix(\n          camera.getOrthoMatrix(),\n        );\n        $camera.style.pointerEvents = 'none';\n        $camera.style.width = `100%`;\n        $camera.style.height = `100%`;\n\n        $cameraContainer.appendChild($camera);\n        $container.appendChild($cameraContainer);\n      }\n\n      return $existedCamera;\n    }\n    return null;\n  }\n\n  private getOrCreateEl(object: DisplayObject) {\n    const { document: doc } = this.context.config;\n    let $existedElement: HTMLElement | null =\n      this.displayObjectHTMLElementMap.get(object);\n\n    if (!$existedElement) {\n      $existedElement = (doc || document).createElement('div');\n      object.parsedStyle.$el = $existedElement;\n      this.displayObjectHTMLElementMap.set(object, $existedElement);\n      if (object.id) {\n        $existedElement.id = object.id;\n      }\n      if (object.name) {\n        $existedElement.setAttribute('name', object.name);\n      }\n      if (object.className) {\n        $existedElement.className = object.className;\n      }\n\n      // use absolute position\n      $existedElement.style.position = 'absolute';\n      // @see https://github.com/antvis/G/issues/1150\n      $existedElement.style['will-change'] = 'transform';\n      $existedElement.style.transform = this.joinTransformMatrix(\n        object.getWorldTransform(),\n        object.getOrigin(),\n      );\n    }\n\n    return $existedElement;\n  }\n\n  private updateAttribute(name: string, object: HTML) {\n    const $el = this.getOrCreateEl(object);\n    switch (name) {\n      case 'innerHTML':\n        const { innerHTML } = object.parsedStyle;\n        if (isString(innerHTML)) {\n          $el.innerHTML = innerHTML;\n        } else {\n          $el.innerHTML = '';\n          $el.appendChild(innerHTML);\n        }\n        break;\n      case 'x':\n        $el.style.left = `${object.parsedStyle.x}px`;\n        break;\n      case 'y':\n        $el.style.top = `${object.parsedStyle.y}px`;\n        break;\n      case 'transformOrigin':\n        const { transformOrigin } = object.parsedStyle;\n        $el.style['transform-origin'] = `${transformOrigin[0].buildCSSText(\n          null,\n          null,\n          '',\n        )} ${transformOrigin[1].buildCSSText(null, null, '')}`;\n        break;\n      case 'width':\n        const { width } = object.parsedStyle;\n        $el.style.width = isNumber(width)\n          ? `${width}px`\n          : (width as string).toString();\n        break;\n      case 'height':\n        const { height } = object.parsedStyle;\n        $el.style.height = isNumber(height)\n          ? `${height}px`\n          : (height as string).toString();\n        break;\n      case 'zIndex':\n        const { zIndex } = object.parsedStyle;\n        $el.style['z-index'] = `${zIndex}`;\n        break;\n      case 'visibility':\n        const { visibility } = object.parsedStyle;\n        $el.style.visibility = visibility;\n        break;\n      case 'pointerEvents':\n        const { pointerEvents = 'auto' } = object.parsedStyle;\n        $el.style.pointerEvents = pointerEvents;\n        break;\n      case 'opacity':\n        const { opacity } = object.parsedStyle;\n        $el.style.opacity = `${opacity}`;\n        break;\n      case 'fill':\n        const { fill } = object.parsedStyle;\n        let color = '';\n        if (isCSSRGB(fill)) {\n          if (fill.isNone) {\n            color = 'transparent';\n          } else {\n            color = object.getAttribute('fill') as string;\n          }\n        } else if (Array.isArray(fill)) {\n          color = object.getAttribute('fill') as string;\n        } else if (isPattern(fill)) {\n          // TODO: pattern, use background?\n        }\n        $el.style.background = color;\n        break;\n      case 'stroke':\n        const { stroke } = object.parsedStyle;\n        let borderColor = '';\n        if (isCSSRGB(stroke)) {\n          if (stroke.isNone) {\n            borderColor = 'transparent';\n          } else {\n            borderColor = object.getAttribute('stroke') as string;\n          }\n        } else if (Array.isArray(stroke)) {\n          borderColor = object.getAttribute('stroke') as string;\n        } else if (isPattern(stroke)) {\n          // TODO: pattern, use background?\n        }\n\n        $el.style['border-color'] = borderColor;\n        $el.style['border-style'] = 'solid';\n        break;\n      case 'lineWidth':\n        const { lineWidth } = object.parsedStyle;\n        $el.style['border-width'] = `${lineWidth || 0}px`;\n        break;\n      case 'lineDash':\n        $el.style['border-style'] = 'dashed';\n        break;\n      case 'filter':\n        const { filter } = object.style;\n        $el.style.filter = filter;\n        break;\n      default:\n        if (!isNil(object.style[name]) && object.style[name] !== '') {\n          $el.style[name] = object.style[name];\n        }\n    }\n  }\n}\n", "import { AbstractRendererPlugin } from '@antv/g-lite';\nimport { HTMLRenderingPlugin } from './HTMLRenderingPlugin';\n\nexport class Plugin extends AbstractRendererPlugin {\n  name = 'html-renderer';\n  init(): void {\n    this.addRenderingPlugin(new HTMLRenderingPlugin());\n  }\n  destroy(): void {\n    this.removeAllRenderingPlugins();\n  }\n}\n", "import type {\n  RenderingContext,\n  CanvasContext,\n  CanvasLike,\n  DataURLOptions,\n  GlobalRuntime,\n  CanvasConfig,\n  ContextService,\n} from '@antv/g-lite';\nimport { RenderReason, setDOMSize } from '@antv/g-lite';\nimport { isString } from '@antv/util';\n\nexport class Canvas2DContextService\n  implements ContextService<CanvasRenderingContext2D>\n{\n  private $container: HTMLElement | null;\n  private $canvas: CanvasLike | null;\n  private dpr: number;\n  private context:\n    | CanvasRenderingContext2D\n    | OffscreenCanvasRenderingContext2D\n    | null;\n  private canvasConfig: Partial<CanvasConfig>;\n  private renderingContext: RenderingContext;\n\n  constructor(context: GlobalRuntime & CanvasContext) {\n    this.renderingContext = context.renderingContext;\n    this.canvasConfig = context.config;\n  }\n\n  init() {\n    const { container, canvas } = this.canvasConfig;\n\n    if (canvas) {\n      this.$canvas = canvas;\n\n      if (\n        container &&\n        (canvas as HTMLCanvasElement).parentElement !== container\n      ) {\n        (container as HTMLElement).appendChild(canvas as HTMLCanvasElement);\n      }\n\n      this.$container = (canvas as HTMLCanvasElement).parentElement;\n      this.canvasConfig.container = this.$container;\n    } else if (container) {\n      // create container\n      this.$container = isString(container)\n        ? document.getElementById(container)\n        : container;\n      if (this.$container) {\n        // create canvas\n        const $canvas = document.createElement('canvas');\n\n        this.$container.appendChild($canvas);\n        if (!this.$container.style.position) {\n          this.$container.style.position = 'relative';\n        }\n        this.$canvas = $canvas;\n      }\n    }\n\n    this.context = this.$canvas.getContext('2d');\n    this.resize(this.canvasConfig.width, this.canvasConfig.height);\n  }\n\n  getContext() {\n    return this.context as CanvasRenderingContext2D;\n  }\n\n  getDomElement() {\n    return this.$canvas;\n  }\n\n  getDPR() {\n    return this.dpr;\n  }\n\n  getBoundingClientRect() {\n    if ((this.$canvas as HTMLCanvasElement).getBoundingClientRect) {\n      return (this.$canvas as HTMLCanvasElement).getBoundingClientRect();\n    }\n  }\n\n  destroy() {\n    // @ts-ignore\n    if (this.$container && this.$canvas && this.$canvas.parentNode) {\n      // destroy context\n      // @ts-ignore\n      this.$container.removeChild(this.$canvas);\n    }\n  }\n\n  resize(width: number, height: number) {\n    const { devicePixelRatio: dpr } = this.canvasConfig;\n    this.dpr = dpr;\n\n    if (this.$canvas) {\n      // set canvas width & height\n      this.$canvas.width = this.dpr * width;\n      this.$canvas.height = this.dpr * height;\n\n      // set CSS style width & height\n      setDOMSize(this.$canvas, width, height);\n\n      // const dpr = this.getDPR();\n      // scale all drawing operations by the dpr\n      // @see https://www.html5rocks.com/en/tutorials/canvas/hidpi/\n      // this.context.scale(dpr, dpr);\n    }\n\n    this.renderingContext.renderReasons.add(RenderReason.CAMERA_CHANGED);\n  }\n\n  applyCursorStyle(cursor: string) {\n    if (this.$container && this.$container.style) {\n      this.$container.style.cursor = cursor;\n    }\n  }\n\n  async toDataURL(options: Partial<DataURLOptions> = {}) {\n    const { type, encoderOptions } = options;\n    return (this.context.canvas as HTMLCanvasElement).toDataURL(\n      type,\n      encoderOptions,\n    );\n  }\n}\n", "import { AbstractRendererPlugin } from '@antv/g-lite';\nimport { Canvas2DContextService } from './Canvas2DContextService';\n\nexport class ContextRegisterPlugin extends AbstractRendererPlugin {\n  name = 'canvas-context-register';\n  init(): void {\n    this.context.ContextService = Canvas2DContextService;\n  }\n  destroy(): void {\n    delete this.context.ContextService;\n  }\n}\n", "import type { RendererConfig } from '@antv/g-lite';\nimport { AbstractRenderer } from '@antv/g-lite';\nimport * as CanvasPathGenerator from '@antv/g-plugin-canvas-path-generator';\nimport * as CanvasPicker from '@antv/g-plugin-canvas-picker';\nimport * as CanvasRenderer from '@antv/g-plugin-canvas-renderer';\nimport * as DomInteraction from '@antv/g-plugin-dom-interaction';\nimport * as HTMLRenderer from '@antv/g-plugin-html-renderer';\nimport * as ImageLoader from '@antv/g-plugin-image-loader';\nimport { ContextRegisterPlugin } from './ContextRegisterPlugin';\n\nexport {\n  CanvasPathGenerator,\n  CanvasPicker,\n  CanvasRenderer,\n  DomInteraction,\n  HTMLRenderer,\n  ImageLoader,\n};\n\nexport class Renderer extends AbstractRenderer {\n  constructor(config?: Partial<RendererConfig>) {\n    super(config);\n\n    // register Canvas2DContext\n    this.registerPlugin(new ContextRegisterPlugin());\n    this.registerPlugin(new ImageLoader.Plugin());\n    this.registerPlugin(new CanvasPathGenerator.Plugin());\n    // enable rendering with Canvas2D API\n    this.registerPlugin(new CanvasRenderer.Plugin());\n    this.registerPlugin(new DomInteraction.Plugin());\n    // enable picking with Canvas2D API\n    this.registerPlugin(new CanvasPicker.Plugin());\n\n    // render HTML component\n    this.registerPlugin(new HTMLRenderer.Plugin());\n  }\n}\n", "interface EventType {\n  readonly callback: Function;\n  readonly once: boolean;\n}\n\ntype EventsType = Record<string, EventType[]>;\n\nconst WILDCARD = '*';\n\n/* event-emitter */\nexport default class EventEmitter {\n  private _events: EventsType = {};\n\n  /**\n   * \n   * @param evt\n   * @param callback\n   * @param once\n   */\n  on(evt: string, callback: Function, once?: boolean) {\n    if (!this._events[evt]) {\n      this._events[evt] = [];\n    }\n    this._events[evt].push({\n      callback,\n      once: !!once,\n    });\n    return this;\n  }\n\n  /**\n   * \n   * @param evt\n   * @param callback\n   */\n  once(evt: string, callback: Function) {\n    return this.on(evt, callback, true);\n  }\n\n  /**\n   * \n   * @param evt\n   * @param args\n   */\n  emit(evt: string, ...args: any[]) {\n    const events = this._events[evt] || [];\n    const wildcardEvents = this._events[WILDCARD] || [];\n\n    //  emit \n    const doEmit = (es: EventType[]) => {\n      let length = es.length;\n      for (let i = 0; i < length; i++) {\n        if (!es[i]) {\n          continue;\n        }\n        const { callback, once } = es[i];\n\n        if (once) {\n          es.splice(i, 1);\n\n          if (es.length === 0) {\n            delete this._events[evt];\n          }\n\n          length--;\n          i--;\n        }\n\n        callback.apply(this, args);\n      }\n    };\n\n    doEmit(events);\n    doEmit(wildcardEvents);\n  }\n\n  /**\n   * channel\n   * @param evt\n   * @param callback\n   */\n  off(evt?: string, callback?: Function) {\n    if (!evt) {\n      // evt \n      this._events = {};\n    } else {\n      if (!callback) {\n        // evt callback \n        delete this._events[evt];\n      } else {\n        // evt callback \n        const events = this._events[evt] || [];\n\n        let length = events.length;\n        for (let i = 0; i < length; i++) {\n          if (events[i].callback === callback) {\n            events.splice(i, 1);\n            length--;\n            i--;\n          }\n        }\n\n        if (events.length === 0) {\n          delete this._events[evt];\n        }\n      }\n    }\n\n    return this;\n  }\n\n  /*  */\n  getEvents() {\n    return this._events;\n  }\n}\n", "export default function(x, y) {\n  var nodes, strength = 1;\n\n  if (x == null) x = 0;\n  if (y == null) y = 0;\n\n  function force() {\n    var i,\n        n = nodes.length,\n        node,\n        sx = 0,\n        sy = 0;\n\n    for (i = 0; i < n; ++i) {\n      node = nodes[i], sx += node.x, sy += node.y;\n    }\n\n    for (sx = (sx / n - x) * strength, sy = (sy / n - y) * strength, i = 0; i < n; ++i) {\n      node = nodes[i], node.x -= sx, node.y -= sy;\n    }\n  }\n\n  force.initialize = function(_) {\n    nodes = _;\n  };\n\n  force.x = function(_) {\n    return arguments.length ? (x = +_, force) : x;\n  };\n\n  force.y = function(_) {\n    return arguments.length ? (y = +_, force) : y;\n  };\n\n  force.strength = function(_) {\n    return arguments.length ? (strength = +_, force) : strength;\n  };\n\n  return force;\n}\n", "export default function(d) {\n  const x = +this._x.call(null, d),\n      y = +this._y.call(null, d);\n  return add(this.cover(x, y), x, y, d);\n}\n\nfunction add(tree, x, y, d) {\n  if (isNaN(x) || isNaN(y)) return tree; // ignore invalid points\n\n  var parent,\n      node = tree._root,\n      leaf = {data: d},\n      x0 = tree._x0,\n      y0 = tree._y0,\n      x1 = tree._x1,\n      y1 = tree._y1,\n      xm,\n      ym,\n      xp,\n      yp,\n      right,\n      bottom,\n      i,\n      j;\n\n  // If the tree is empty, initialize the root as a leaf.\n  if (!node) return tree._root = leaf, tree;\n\n  // Find the existing leaf for the new point, or add it.\n  while (node.length) {\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm; else x1 = xm;\n    if (bottom = y >= (ym = (y0 + y1) / 2)) y0 = ym; else y1 = ym;\n    if (parent = node, !(node = node[i = bottom << 1 | right])) return parent[i] = leaf, tree;\n  }\n\n  // Is the new point is exactly coincident with the existing point?\n  xp = +tree._x.call(null, node.data);\n  yp = +tree._y.call(null, node.data);\n  if (x === xp && y === yp) return leaf.next = node, parent ? parent[i] = leaf : tree._root = leaf, tree;\n\n  // Otherwise, split the leaf node until the old and new point are separated.\n  do {\n    parent = parent ? parent[i] = new Array(4) : tree._root = new Array(4);\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm; else x1 = xm;\n    if (bottom = y >= (ym = (y0 + y1) / 2)) y0 = ym; else y1 = ym;\n  } while ((i = bottom << 1 | right) === (j = (yp >= ym) << 1 | (xp >= xm)));\n  return parent[j] = node, parent[i] = leaf, tree;\n}\n\nexport function addAll(data) {\n  var d, i, n = data.length,\n      x,\n      y,\n      xz = new Array(n),\n      yz = new Array(n),\n      x0 = Infinity,\n      y0 = Infinity,\n      x1 = -Infinity,\n      y1 = -Infinity;\n\n  // Compute the points and their extent.\n  for (i = 0; i < n; ++i) {\n    if (isNaN(x = +this._x.call(null, d = data[i])) || isNaN(y = +this._y.call(null, d))) continue;\n    xz[i] = x;\n    yz[i] = y;\n    if (x < x0) x0 = x;\n    if (x > x1) x1 = x;\n    if (y < y0) y0 = y;\n    if (y > y1) y1 = y;\n  }\n\n  // If there were no (valid) points, abort.\n  if (x0 > x1 || y0 > y1) return this;\n\n  // Expand the tree to cover the new points.\n  this.cover(x0, y0).cover(x1, y1);\n\n  // Add the new points.\n  for (i = 0; i < n; ++i) {\n    add(this, xz[i], yz[i], data[i]);\n  }\n\n  return this;\n}\n", "export default function(x, y) {\n  if (isNaN(x = +x) || isNaN(y = +y)) return this; // ignore invalid points\n\n  var x0 = this._x0,\n      y0 = this._y0,\n      x1 = this._x1,\n      y1 = this._y1;\n\n  // If the quadtree has no extent, initialize them.\n  // Integer extent are necessary so that if we later double the extent,\n  // the existing quadrant boundaries dont change due to floating point error!\n  if (isNaN(x0)) {\n    x1 = (x0 = Math.floor(x)) + 1;\n    y1 = (y0 = Math.floor(y)) + 1;\n  }\n\n  // Otherwise, double repeatedly to cover.\n  else {\n    var z = x1 - x0 || 1,\n        node = this._root,\n        parent,\n        i;\n\n    while (x0 > x || x >= x1 || y0 > y || y >= y1) {\n      i = (y < y0) << 1 | (x < x0);\n      parent = new Array(4), parent[i] = node, node = parent, z *= 2;\n      switch (i) {\n        case 0: x1 = x0 + z, y1 = y0 + z; break;\n        case 1: x0 = x1 - z, y1 = y0 + z; break;\n        case 2: x1 = x0 + z, y0 = y1 - z; break;\n        case 3: x0 = x1 - z, y0 = y1 - z; break;\n      }\n    }\n\n    if (this._root && this._root.length) this._root = node;\n  }\n\n  this._x0 = x0;\n  this._y0 = y0;\n  this._x1 = x1;\n  this._y1 = y1;\n  return this;\n}\n", "export default function() {\n  var data = [];\n  this.visit(function(node) {\n    if (!node.length) do data.push(node.data); while (node = node.next)\n  });\n  return data;\n}\n", "export default function(_) {\n  return arguments.length\n      ? this.cover(+_[0][0], +_[0][1]).cover(+_[1][0], +_[1][1])\n      : isNaN(this._x0) ? undefined : [[this._x0, this._y0], [this._x1, this._y1]];\n}\n", "export default function(node, x0, y0, x1, y1) {\n  this.node = node;\n  this.x0 = x0;\n  this.y0 = y0;\n  this.x1 = x1;\n  this.y1 = y1;\n}\n", "import Quad from \"./quad.js\";\n\nexport default function(x, y, radius) {\n  var data,\n      x0 = this._x0,\n      y0 = this._y0,\n      x1,\n      y1,\n      x2,\n      y2,\n      x3 = this._x1,\n      y3 = this._y1,\n      quads = [],\n      node = this._root,\n      q,\n      i;\n\n  if (node) quads.push(new Quad(node, x0, y0, x3, y3));\n  if (radius == null) radius = Infinity;\n  else {\n    x0 = x - radius, y0 = y - radius;\n    x3 = x + radius, y3 = y + radius;\n    radius *= radius;\n  }\n\n  while (q = quads.pop()) {\n\n    // Stop searching if this quadrant cant contain a closer node.\n    if (!(node = q.node)\n        || (x1 = q.x0) > x3\n        || (y1 = q.y0) > y3\n        || (x2 = q.x1) < x0\n        || (y2 = q.y1) < y0) continue;\n\n    // Bisect the current quadrant.\n    if (node.length) {\n      var xm = (x1 + x2) / 2,\n          ym = (y1 + y2) / 2;\n\n      quads.push(\n        new Quad(node[3], xm, ym, x2, y2),\n        new Quad(node[2], x1, ym, xm, y2),\n        new Quad(node[1], xm, y1, x2, ym),\n        new Quad(node[0], x1, y1, xm, ym)\n      );\n\n      // Visit the closest quadrant first.\n      if (i = (y >= ym) << 1 | (x >= xm)) {\n        q = quads[quads.length - 1];\n        quads[quads.length - 1] = quads[quads.length - 1 - i];\n        quads[quads.length - 1 - i] = q;\n      }\n    }\n\n    // Visit this point. (Visiting coincident points isnt necessary!)\n    else {\n      var dx = x - +this._x.call(null, node.data),\n          dy = y - +this._y.call(null, node.data),\n          d2 = dx * dx + dy * dy;\n      if (d2 < radius) {\n        var d = Math.sqrt(radius = d2);\n        x0 = x - d, y0 = y - d;\n        x3 = x + d, y3 = y + d;\n        data = node.data;\n      }\n    }\n  }\n\n  return data;\n}\n", "export default function(d) {\n  if (isNaN(x = +this._x.call(null, d)) || isNaN(y = +this._y.call(null, d))) return this; // ignore invalid points\n\n  var parent,\n      node = this._root,\n      retainer,\n      previous,\n      next,\n      x0 = this._x0,\n      y0 = this._y0,\n      x1 = this._x1,\n      y1 = this._y1,\n      x,\n      y,\n      xm,\n      ym,\n      right,\n      bottom,\n      i,\n      j;\n\n  // If the tree is empty, initialize the root as a leaf.\n  if (!node) return this;\n\n  // Find the leaf node for the point.\n  // While descending, also retain the deepest parent with a non-removed sibling.\n  if (node.length) while (true) {\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm; else x1 = xm;\n    if (bottom = y >= (ym = (y0 + y1) / 2)) y0 = ym; else y1 = ym;\n    if (!(parent = node, node = node[i = bottom << 1 | right])) return this;\n    if (!node.length) break;\n    if (parent[(i + 1) & 3] || parent[(i + 2) & 3] || parent[(i + 3) & 3]) retainer = parent, j = i;\n  }\n\n  // Find the point to remove.\n  while (node.data !== d) if (!(previous = node, node = node.next)) return this;\n  if (next = node.next) delete node.next;\n\n  // If there are multiple coincident points, remove just the point.\n  if (previous) return (next ? previous.next = next : delete previous.next), this;\n\n  // If this is the root point, remove it.\n  if (!parent) return this._root = next, this;\n\n  // Remove this leaf.\n  next ? parent[i] = next : delete parent[i];\n\n  // If the parent now contains exactly one leaf, collapse superfluous parents.\n  if ((node = parent[0] || parent[1] || parent[2] || parent[3])\n      && node === (parent[3] || parent[2] || parent[1] || parent[0])\n      && !node.length) {\n    if (retainer) retainer[j] = node;\n    else this._root = node;\n  }\n\n  return this;\n}\n\nexport function removeAll(data) {\n  for (var i = 0, n = data.length; i < n; ++i) this.remove(data[i]);\n  return this;\n}\n", "export default function() {\n  return this._root;\n}\n", "export default function() {\n  var size = 0;\n  this.visit(function(node) {\n    if (!node.length) do ++size; while (node = node.next)\n  });\n  return size;\n}\n", "import Quad from \"./quad.js\";\n\nexport default function(callback) {\n  var quads = [], q, node = this._root, child, x0, y0, x1, y1;\n  if (node) quads.push(new Quad(node, this._x0, this._y0, this._x1, this._y1));\n  while (q = quads.pop()) {\n    if (!callback(node = q.node, x0 = q.x0, y0 = q.y0, x1 = q.x1, y1 = q.y1) && node.length) {\n      var xm = (x0 + x1) / 2, ym = (y0 + y1) / 2;\n      if (child = node[3]) quads.push(new Quad(child, xm, ym, x1, y1));\n      if (child = node[2]) quads.push(new Quad(child, x0, ym, xm, y1));\n      if (child = node[1]) quads.push(new Quad(child, xm, y0, x1, ym));\n      if (child = node[0]) quads.push(new Quad(child, x0, y0, xm, ym));\n    }\n  }\n  return this;\n}\n", "import Quad from \"./quad.js\";\n\nexport default function(callback) {\n  var quads = [], next = [], q;\n  if (this._root) quads.push(new Quad(this._root, this._x0, this._y0, this._x1, this._y1));\n  while (q = quads.pop()) {\n    var node = q.node;\n    if (node.length) {\n      var child, x0 = q.x0, y0 = q.y0, x1 = q.x1, y1 = q.y1, xm = (x0 + x1) / 2, ym = (y0 + y1) / 2;\n      if (child = node[0]) quads.push(new Quad(child, x0, y0, xm, ym));\n      if (child = node[1]) quads.push(new Quad(child, xm, y0, x1, ym));\n      if (child = node[2]) quads.push(new Quad(child, x0, ym, xm, y1));\n      if (child = node[3]) quads.push(new Quad(child, xm, ym, x1, y1));\n    }\n    next.push(q);\n  }\n  while (q = next.pop()) {\n    callback(q.node, q.x0, q.y0, q.x1, q.y1);\n  }\n  return this;\n}\n", "export function defaultX(d) {\n  return d[0];\n}\n\nexport default function(_) {\n  return arguments.length ? (this._x = _, this) : this._x;\n}\n", "export function defaultY(d) {\n  return d[1];\n}\n\nexport default function(_) {\n  return arguments.length ? (this._y = _, this) : this._y;\n}\n", "import tree_add, {addAll as tree_addAll} from \"./add.js\";\nimport tree_cover from \"./cover.js\";\nimport tree_data from \"./data.js\";\nimport tree_extent from \"./extent.js\";\nimport tree_find from \"./find.js\";\nimport tree_remove, {removeAll as tree_removeAll} from \"./remove.js\";\nimport tree_root from \"./root.js\";\nimport tree_size from \"./size.js\";\nimport tree_visit from \"./visit.js\";\nimport tree_visitAfter from \"./visitAfter.js\";\nimport tree_x, {defaultX} from \"./x.js\";\nimport tree_y, {defaultY} from \"./y.js\";\n\nexport default function quadtree(nodes, x, y) {\n  var tree = new Quadtree(x == null ? defaultX : x, y == null ? defaultY : y, NaN, NaN, NaN, NaN);\n  return nodes == null ? tree : tree.addAll(nodes);\n}\n\nfunction Quadtree(x, y, x0, y0, x1, y1) {\n  this._x = x;\n  this._y = y;\n  this._x0 = x0;\n  this._y0 = y0;\n  this._x1 = x1;\n  this._y1 = y1;\n  this._root = undefined;\n}\n\nfunction leaf_copy(leaf) {\n  var copy = {data: leaf.data}, next = copy;\n  while (leaf = leaf.next) next = next.next = {data: leaf.data};\n  return copy;\n}\n\nvar treeProto = quadtree.prototype = Quadtree.prototype;\n\ntreeProto.copy = function() {\n  var copy = new Quadtree(this._x, this._y, this._x0, this._y0, this._x1, this._y1),\n      node = this._root,\n      nodes,\n      child;\n\n  if (!node) return copy;\n\n  if (!node.length) return copy._root = leaf_copy(node), copy;\n\n  nodes = [{source: node, target: copy._root = new Array(4)}];\n  while (node = nodes.pop()) {\n    for (var i = 0; i < 4; ++i) {\n      if (child = node.source[i]) {\n        if (child.length) nodes.push({source: child, target: node.target[i] = new Array(4)});\n        else node.target[i] = leaf_copy(child);\n      }\n    }\n  }\n\n  return copy;\n};\n\ntreeProto.add = tree_add;\ntreeProto.addAll = tree_addAll;\ntreeProto.cover = tree_cover;\ntreeProto.data = tree_data;\ntreeProto.extent = tree_extent;\ntreeProto.find = tree_find;\ntreeProto.remove = tree_remove;\ntreeProto.removeAll = tree_removeAll;\ntreeProto.root = tree_root;\ntreeProto.size = tree_size;\ntreeProto.visit = tree_visit;\ntreeProto.visitAfter = tree_visitAfter;\ntreeProto.x = tree_x;\ntreeProto.y = tree_y;\n", "export default function(x) {\n  return function() {\n    return x;\n  };\n}\n", "export default function(random) {\n  return (random() - 0.5) * 1e-6;\n}\n", "import {quadtree} from \"d3-quadtree\";\nimport constant from \"./constant.js\";\nimport jiggle from \"./jiggle.js\";\n\nfunction x(d) {\n  return d.x + d.vx;\n}\n\nfunction y(d) {\n  return d.y + d.vy;\n}\n\nexport default function(radius) {\n  var nodes,\n      radii,\n      random,\n      strength = 1,\n      iterations = 1;\n\n  if (typeof radius !== \"function\") radius = constant(radius == null ? 1 : +radius);\n\n  function force() {\n    var i, n = nodes.length,\n        tree,\n        node,\n        xi,\n        yi,\n        ri,\n        ri2;\n\n    for (var k = 0; k < iterations; ++k) {\n      tree = quadtree(nodes, x, y).visitAfter(prepare);\n      for (i = 0; i < n; ++i) {\n        node = nodes[i];\n        ri = radii[node.index], ri2 = ri * ri;\n        xi = node.x + node.vx;\n        yi = node.y + node.vy;\n        tree.visit(apply);\n      }\n    }\n\n    function apply(quad, x0, y0, x1, y1) {\n      var data = quad.data, rj = quad.r, r = ri + rj;\n      if (data) {\n        if (data.index > node.index) {\n          var x = xi - data.x - data.vx,\n              y = yi - data.y - data.vy,\n              l = x * x + y * y;\n          if (l < r * r) {\n            if (x === 0) x = jiggle(random), l += x * x;\n            if (y === 0) y = jiggle(random), l += y * y;\n            l = (r - (l = Math.sqrt(l))) / l * strength;\n            node.vx += (x *= l) * (r = (rj *= rj) / (ri2 + rj));\n            node.vy += (y *= l) * r;\n            data.vx -= x * (r = 1 - r);\n            data.vy -= y * r;\n          }\n        }\n        return;\n      }\n      return x0 > xi + r || x1 < xi - r || y0 > yi + r || y1 < yi - r;\n    }\n  }\n\n  function prepare(quad) {\n    if (quad.data) return quad.r = radii[quad.data.index];\n    for (var i = quad.r = 0; i < 4; ++i) {\n      if (quad[i] && quad[i].r > quad.r) {\n        quad.r = quad[i].r;\n      }\n    }\n  }\n\n  function initialize() {\n    if (!nodes) return;\n    var i, n = nodes.length, node;\n    radii = new Array(n);\n    for (i = 0; i < n; ++i) node = nodes[i], radii[node.index] = +radius(node, i, nodes);\n  }\n\n  force.initialize = function(_nodes, _random) {\n    nodes = _nodes;\n    random = _random;\n    initialize();\n  };\n\n  force.iterations = function(_) {\n    return arguments.length ? (iterations = +_, force) : iterations;\n  };\n\n  force.strength = function(_) {\n    return arguments.length ? (strength = +_, force) : strength;\n  };\n\n  force.radius = function(_) {\n    return arguments.length ? (radius = typeof _ === \"function\" ? _ : constant(+_), initialize(), force) : radius;\n  };\n\n  return force;\n}\n", "import constant from \"./constant.js\";\nimport jiggle from \"./jiggle.js\";\n\nfunction index(d) {\n  return d.index;\n}\n\nfunction find(nodeById, nodeId) {\n  var node = nodeById.get(nodeId);\n  if (!node) throw new Error(\"node not found: \" + nodeId);\n  return node;\n}\n\nexport default function(links) {\n  var id = index,\n      strength = defaultStrength,\n      strengths,\n      distance = constant(30),\n      distances,\n      nodes,\n      count,\n      bias,\n      random,\n      iterations = 1;\n\n  if (links == null) links = [];\n\n  function defaultStrength(link) {\n    return 1 / Math.min(count[link.source.index], count[link.target.index]);\n  }\n\n  function force(alpha) {\n    for (var k = 0, n = links.length; k < iterations; ++k) {\n      for (var i = 0, link, source, target, x, y, l, b; i < n; ++i) {\n        link = links[i], source = link.source, target = link.target;\n        x = target.x + target.vx - source.x - source.vx || jiggle(random);\n        y = target.y + target.vy - source.y - source.vy || jiggle(random);\n        l = Math.sqrt(x * x + y * y);\n        l = (l - distances[i]) / l * alpha * strengths[i];\n        x *= l, y *= l;\n        target.vx -= x * (b = bias[i]);\n        target.vy -= y * b;\n        source.vx += x * (b = 1 - b);\n        source.vy += y * b;\n      }\n    }\n  }\n\n  function initialize() {\n    if (!nodes) return;\n\n    var i,\n        n = nodes.length,\n        m = links.length,\n        nodeById = new Map(nodes.map((d, i) => [id(d, i, nodes), d])),\n        link;\n\n    for (i = 0, count = new Array(n); i < m; ++i) {\n      link = links[i], link.index = i;\n      if (typeof link.source !== \"object\") link.source = find(nodeById, link.source);\n      if (typeof link.target !== \"object\") link.target = find(nodeById, link.target);\n      count[link.source.index] = (count[link.source.index] || 0) + 1;\n      count[link.target.index] = (count[link.target.index] || 0) + 1;\n    }\n\n    for (i = 0, bias = new Array(m); i < m; ++i) {\n      link = links[i], bias[i] = count[link.source.index] / (count[link.source.index] + count[link.target.index]);\n    }\n\n    strengths = new Array(m), initializeStrength();\n    distances = new Array(m), initializeDistance();\n  }\n\n  function initializeStrength() {\n    if (!nodes) return;\n\n    for (var i = 0, n = links.length; i < n; ++i) {\n      strengths[i] = +strength(links[i], i, links);\n    }\n  }\n\n  function initializeDistance() {\n    if (!nodes) return;\n\n    for (var i = 0, n = links.length; i < n; ++i) {\n      distances[i] = +distance(links[i], i, links);\n    }\n  }\n\n  force.initialize = function(_nodes, _random) {\n    nodes = _nodes;\n    random = _random;\n    initialize();\n  };\n\n  force.links = function(_) {\n    return arguments.length ? (links = _, initialize(), force) : links;\n  };\n\n  force.id = function(_) {\n    return arguments.length ? (id = _, force) : id;\n  };\n\n  force.iterations = function(_) {\n    return arguments.length ? (iterations = +_, force) : iterations;\n  };\n\n  force.strength = function(_) {\n    return arguments.length ? (strength = typeof _ === \"function\" ? _ : constant(+_), initializeStrength(), force) : strength;\n  };\n\n  force.distance = function(_) {\n    return arguments.length ? (distance = typeof _ === \"function\" ? _ : constant(+_), initializeDistance(), force) : distance;\n  };\n\n  return force;\n}\n", "// https://en.wikipedia.org/wiki/Linear_congruential_generator#Parameters_in_common_use\nconst a = 1664525;\nconst c = 1013904223;\nconst m = 4294967296; // 2^32\n\nexport default function() {\n  let s = 1;\n  return () => (s = (a * s + c) % m) / m;\n}\n", "import {dispatch} from \"d3-dispatch\";\nimport {timer} from \"d3-timer\";\nimport lcg from \"./lcg.js\";\n\nexport function x(d) {\n  return d.x;\n}\n\nexport function y(d) {\n  return d.y;\n}\n\nvar initialRadius = 10,\n    initialAngle = Math.PI * (3 - Math.sqrt(5));\n\nexport default function(nodes) {\n  var simulation,\n      alpha = 1,\n      alphaMin = 0.001,\n      alphaDecay = 1 - Math.pow(alphaMin, 1 / 300),\n      alphaTarget = 0,\n      velocityDecay = 0.6,\n      forces = new Map(),\n      stepper = timer(step),\n      event = dispatch(\"tick\", \"end\"),\n      random = lcg();\n\n  if (nodes == null) nodes = [];\n\n  function step() {\n    tick();\n    event.call(\"tick\", simulation);\n    if (alpha < alphaMin) {\n      stepper.stop();\n      event.call(\"end\", simulation);\n    }\n  }\n\n  function tick(iterations) {\n    var i, n = nodes.length, node;\n\n    if (iterations === undefined) iterations = 1;\n\n    for (var k = 0; k < iterations; ++k) {\n      alpha += (alphaTarget - alpha) * alphaDecay;\n\n      forces.forEach(function(force) {\n        force(alpha);\n      });\n\n      for (i = 0; i < n; ++i) {\n        node = nodes[i];\n        if (node.fx == null) node.x += node.vx *= velocityDecay;\n        else node.x = node.fx, node.vx = 0;\n        if (node.fy == null) node.y += node.vy *= velocityDecay;\n        else node.y = node.fy, node.vy = 0;\n      }\n    }\n\n    return simulation;\n  }\n\n  function initializeNodes() {\n    for (var i = 0, n = nodes.length, node; i < n; ++i) {\n      node = nodes[i], node.index = i;\n      if (node.fx != null) node.x = node.fx;\n      if (node.fy != null) node.y = node.fy;\n      if (isNaN(node.x) || isNaN(node.y)) {\n        var radius = initialRadius * Math.sqrt(0.5 + i), angle = i * initialAngle;\n        node.x = radius * Math.cos(angle);\n        node.y = radius * Math.sin(angle);\n      }\n      if (isNaN(node.vx) || isNaN(node.vy)) {\n        node.vx = node.vy = 0;\n      }\n    }\n  }\n\n  function initializeForce(force) {\n    if (force.initialize) force.initialize(nodes, random);\n    return force;\n  }\n\n  initializeNodes();\n\n  return simulation = {\n    tick: tick,\n\n    restart: function() {\n      return stepper.restart(step), simulation;\n    },\n\n    stop: function() {\n      return stepper.stop(), simulation;\n    },\n\n    nodes: function(_) {\n      return arguments.length ? (nodes = _, initializeNodes(), forces.forEach(initializeForce), simulation) : nodes;\n    },\n\n    alpha: function(_) {\n      return arguments.length ? (alpha = +_, simulation) : alpha;\n    },\n\n    alphaMin: function(_) {\n      return arguments.length ? (alphaMin = +_, simulation) : alphaMin;\n    },\n\n    alphaDecay: function(_) {\n      return arguments.length ? (alphaDecay = +_, simulation) : +alphaDecay;\n    },\n\n    alphaTarget: function(_) {\n      return arguments.length ? (alphaTarget = +_, simulation) : alphaTarget;\n    },\n\n    velocityDecay: function(_) {\n      return arguments.length ? (velocityDecay = 1 - _, simulation) : 1 - velocityDecay;\n    },\n\n    randomSource: function(_) {\n      return arguments.length ? (random = _, forces.forEach(initializeForce), simulation) : random;\n    },\n\n    force: function(name, _) {\n      return arguments.length > 1 ? ((_ == null ? forces.delete(name) : forces.set(name, initializeForce(_))), simulation) : forces.get(name);\n    },\n\n    find: function(x, y, radius) {\n      var i = 0,\n          n = nodes.length,\n          dx,\n          dy,\n          d2,\n          node,\n          closest;\n\n      if (radius == null) radius = Infinity;\n      else radius *= radius;\n\n      for (i = 0; i < n; ++i) {\n        node = nodes[i];\n        dx = x - node.x;\n        dy = y - node.y;\n        d2 = dx * dx + dy * dy;\n        if (d2 < radius) closest = node, radius = d2;\n      }\n\n      return closest;\n    },\n\n    on: function(name, _) {\n      return arguments.length > 1 ? (event.on(name, _), simulation) : event.on(name);\n    }\n  };\n}\n", "import {quadtree} from \"d3-quadtree\";\nimport constant from \"./constant.js\";\nimport jiggle from \"./jiggle.js\";\nimport {x, y} from \"./simulation.js\";\n\nexport default function() {\n  var nodes,\n      node,\n      random,\n      alpha,\n      strength = constant(-30),\n      strengths,\n      distanceMin2 = 1,\n      distanceMax2 = Infinity,\n      theta2 = 0.81;\n\n  function force(_) {\n    var i, n = nodes.length, tree = quadtree(nodes, x, y).visitAfter(accumulate);\n    for (alpha = _, i = 0; i < n; ++i) node = nodes[i], tree.visit(apply);\n  }\n\n  function initialize() {\n    if (!nodes) return;\n    var i, n = nodes.length, node;\n    strengths = new Array(n);\n    for (i = 0; i < n; ++i) node = nodes[i], strengths[node.index] = +strength(node, i, nodes);\n  }\n\n  function accumulate(quad) {\n    var strength = 0, q, c, weight = 0, x, y, i;\n\n    // For internal nodes, accumulate forces from child quadrants.\n    if (quad.length) {\n      for (x = y = i = 0; i < 4; ++i) {\n        if ((q = quad[i]) && (c = Math.abs(q.value))) {\n          strength += q.value, weight += c, x += c * q.x, y += c * q.y;\n        }\n      }\n      quad.x = x / weight;\n      quad.y = y / weight;\n    }\n\n    // For leaf nodes, accumulate forces from coincident quadrants.\n    else {\n      q = quad;\n      q.x = q.data.x;\n      q.y = q.data.y;\n      do strength += strengths[q.data.index];\n      while (q = q.next);\n    }\n\n    quad.value = strength;\n  }\n\n  function apply(quad, x1, _, x2) {\n    if (!quad.value) return true;\n\n    var x = quad.x - node.x,\n        y = quad.y - node.y,\n        w = x2 - x1,\n        l = x * x + y * y;\n\n    // Apply the Barnes-Hut approximation if possible.\n    // Limit forces for very close nodes; randomize direction if coincident.\n    if (w * w / theta2 < l) {\n      if (l < distanceMax2) {\n        if (x === 0) x = jiggle(random), l += x * x;\n        if (y === 0) y = jiggle(random), l += y * y;\n        if (l < distanceMin2) l = Math.sqrt(distanceMin2 * l);\n        node.vx += x * quad.value * alpha / l;\n        node.vy += y * quad.value * alpha / l;\n      }\n      return true;\n    }\n\n    // Otherwise, process points directly.\n    else if (quad.length || l >= distanceMax2) return;\n\n    // Limit forces for very close nodes; randomize direction if coincident.\n    if (quad.data !== node || quad.next) {\n      if (x === 0) x = jiggle(random), l += x * x;\n      if (y === 0) y = jiggle(random), l += y * y;\n      if (l < distanceMin2) l = Math.sqrt(distanceMin2 * l);\n    }\n\n    do if (quad.data !== node) {\n      w = strengths[quad.data.index] * alpha / l;\n      node.vx += x * w;\n      node.vy += y * w;\n    } while (quad = quad.next);\n  }\n\n  force.initialize = function(_nodes, _random) {\n    nodes = _nodes;\n    random = _random;\n    initialize();\n  };\n\n  force.strength = function(_) {\n    return arguments.length ? (strength = typeof _ === \"function\" ? _ : constant(+_), initialize(), force) : strength;\n  };\n\n  force.distanceMin = function(_) {\n    return arguments.length ? (distanceMin2 = _ * _, force) : Math.sqrt(distanceMin2);\n  };\n\n  force.distanceMax = function(_) {\n    return arguments.length ? (distanceMax2 = _ * _, force) : Math.sqrt(distanceMax2);\n  };\n\n  force.theta = function(_) {\n    return arguments.length ? (theta2 = _ * _, force) : Math.sqrt(theta2);\n  };\n\n  return force;\n}\n", "import constant from \"./constant.js\";\n\nexport default function(radius, x, y) {\n  var nodes,\n      strength = constant(0.1),\n      strengths,\n      radiuses;\n\n  if (typeof radius !== \"function\") radius = constant(+radius);\n  if (x == null) x = 0;\n  if (y == null) y = 0;\n\n  function force(alpha) {\n    for (var i = 0, n = nodes.length; i < n; ++i) {\n      var node = nodes[i],\n          dx = node.x - x || 1e-6,\n          dy = node.y - y || 1e-6,\n          r = Math.sqrt(dx * dx + dy * dy),\n          k = (radiuses[i] - r) * strengths[i] * alpha / r;\n      node.vx += dx * k;\n      node.vy += dy * k;\n    }\n  }\n\n  function initialize() {\n    if (!nodes) return;\n    var i, n = nodes.length;\n    strengths = new Array(n);\n    radiuses = new Array(n);\n    for (i = 0; i < n; ++i) {\n      radiuses[i] = +radius(nodes[i], i, nodes);\n      strengths[i] = isNaN(radiuses[i]) ? 0 : +strength(nodes[i], i, nodes);\n    }\n  }\n\n  force.initialize = function(_) {\n    nodes = _, initialize();\n  };\n\n  force.strength = function(_) {\n    return arguments.length ? (strength = typeof _ === \"function\" ? _ : constant(+_), initialize(), force) : strength;\n  };\n\n  force.radius = function(_) {\n    return arguments.length ? (radius = typeof _ === \"function\" ? _ : constant(+_), initialize(), force) : radius;\n  };\n\n  force.x = function(_) {\n    return arguments.length ? (x = +_, force) : x;\n  };\n\n  force.y = function(_) {\n    return arguments.length ? (y = +_, force) : y;\n  };\n\n  return force;\n}\n", "import constant from \"./constant.js\";\n\nexport default function(x) {\n  var strength = constant(0.1),\n      nodes,\n      strengths,\n      xz;\n\n  if (typeof x !== \"function\") x = constant(x == null ? 0 : +x);\n\n  function force(alpha) {\n    for (var i = 0, n = nodes.length, node; i < n; ++i) {\n      node = nodes[i], node.vx += (xz[i] - node.x) * strengths[i] * alpha;\n    }\n  }\n\n  function initialize() {\n    if (!nodes) return;\n    var i, n = nodes.length;\n    strengths = new Array(n);\n    xz = new Array(n);\n    for (i = 0; i < n; ++i) {\n      strengths[i] = isNaN(xz[i] = +x(nodes[i], i, nodes)) ? 0 : +strength(nodes[i], i, nodes);\n    }\n  }\n\n  force.initialize = function(_) {\n    nodes = _;\n    initialize();\n  };\n\n  force.strength = function(_) {\n    return arguments.length ? (strength = typeof _ === \"function\" ? _ : constant(+_), initialize(), force) : strength;\n  };\n\n  force.x = function(_) {\n    return arguments.length ? (x = typeof _ === \"function\" ? _ : constant(+_), initialize(), force) : x;\n  };\n\n  return force;\n}\n", "import constant from \"./constant.js\";\n\nexport default function(y) {\n  var strength = constant(0.1),\n      nodes,\n      strengths,\n      yz;\n\n  if (typeof y !== \"function\") y = constant(y == null ? 0 : +y);\n\n  function force(alpha) {\n    for (var i = 0, n = nodes.length, node; i < n; ++i) {\n      node = nodes[i], node.vy += (yz[i] - node.y) * strengths[i] * alpha;\n    }\n  }\n\n  function initialize() {\n    if (!nodes) return;\n    var i, n = nodes.length;\n    strengths = new Array(n);\n    yz = new Array(n);\n    for (i = 0; i < n; ++i) {\n      strengths[i] = isNaN(yz[i] = +y(nodes[i], i, nodes)) ? 0 : +strength(nodes[i], i, nodes);\n    }\n  }\n\n  force.initialize = function(_) {\n    nodes = _;\n    initialize();\n  };\n\n  force.strength = function(_) {\n    return arguments.length ? (strength = typeof _ === \"function\" ? _ : constant(+_), initialize(), force) : strength;\n  };\n\n  force.y = function(_) {\n    return arguments.length ? (y = typeof _ === \"function\" ? _ : constant(+_), initialize(), force) : y;\n  };\n\n  return force;\n}\n", "export function degToRad(deg: number) {\n  return (deg * Math.PI) / 180;\n}\n\nexport function radToDeg(rad: number) {\n  return Number(((rad * 180) / Math.PI).toPrecision(5));\n}\n", "import type { DisplayObject } from '../shapes';\n\nexport class BBox {\n  public x = 0;\n\n  public y = 0;\n\n  public width = 0;\n\n  public height = 0;\n\n  public get bottom() {\n    return this.y + this.height;\n  }\n\n  public get left() {\n    return this.x;\n  }\n\n  public get right() {\n    return this.x + this.width;\n  }\n\n  public get top() {\n    return this.y;\n  }\n\n  constructor(x = 0, y = 0, width = 0, height = 0) {\n    this.x = x;\n    this.y = y;\n    this.width = width;\n    this.height = height;\n  }\n\n  static fromRect(other: DOMRect) {\n    return new BBox(other.x, other.y, other.width, other.height);\n  }\n\n  toJSON() {\n    return {\n      x: this.x,\n      y: this.y,\n      width: this.width,\n      height: this.height,\n      top: this.top,\n      right: this.right,\n      bottom: this.bottom,\n      left: this.left,\n    };\n  }\n\n  /**\n   *  bbox \n   * @param p\n   */\n  public isPointIn(x: number, y: number) {\n    return x >= this.left && x <= this.right && y >= this.top && y <= this.bottom;\n  }\n}\n\nexport function getRenderBBox(element: DisplayObject) {\n  const {\n    min: [minX, minY],\n    max: [maxX, maxY],\n  } = element.getRenderBounds();\n  const width = maxX - minX;\n  const height = maxY - minY;\n  return new BBox(minX, minY, width, height);\n}\n", "import { isFunction } from '@antv/util';\n\nexport function getCallbackValue<T = any>(value: any, params: any[]): T {\n  return isFunction(value) ? value(...params) : value;\n}\n", "export const classNames = <T extends { [key: string]: any }>(cls: T, prefix: string) => {\n  const PREFIX = (str: string) => `${prefix}-${str}`;\n  const obj = Object.fromEntries(\n    Object.entries(cls).map(([k, v]) => {\n      const name = PREFIX(v);\n      return [\n        k,\n        {\n          name,\n          class: `.${name}`,\n          id: `#${name}`,\n          toString() {\n            return name;\n          },\n        },\n      ];\n    })\n  );\n  Object.assign(obj, { prefix: PREFIX });\n  return obj as {\n    [K in keyof T]: {\n      name: string;\n      class: string;\n      id: string;\n    };\n  };\n};\n", "import { isPlainObject, isArray } from '@antv/util';\n\nconst MAX_MIX_LEVEL = 5;\n\nconst deep = (\n  dist: { [key: string]: any },\n  src: { [key: string]: any },\n  level: number = 0,\n  maxLevel: number = MAX_MIX_LEVEL\n) => {\n  Object.entries(src).forEach(([key, value]: [string, any]) => {\n    const res = dist;\n    if (Object.prototype.hasOwnProperty.call(src, key)) {\n      if (!value) {\n        // null  undefined \n        res[key] = value;\n      } else if (isPlainObject(value)) {\n        if (!isPlainObject(dist[key])) {\n          res[key] = {};\n        }\n        if (level < maxLevel) {\n          deep(dist[key], value, level + 1, maxLevel);\n        } else {\n          // \n          res[key] = src[key];\n        }\n      } else if (isArray(value)) {\n        res[key] = [];\n        res[key] = res[key].concat(value);\n      } else {\n        res[key] = value;\n      }\n    }\n  });\n};\n\nexport const deepAssign = (rst: any, ...args: object[]) => {\n  for (let i = 0; i < args.length; i += 1) {\n    deep(rst, args[i]);\n  }\n  return rst;\n};\n", "export const defined = (x: any) => x !== undefined && x != null && !Number.isNaN(x);\n", "import { runtime } from '@antv/g';\nimport { memoize } from '@antv/util';\nimport type { DisplayObject, Text } from '../shapes';\n\nlet ctx: CanvasRenderingContext2D;\nlet mockMeasureTextWidth: ((text: string, fontSize: number) => number) | undefined;\n\nexport function setMockMeasureTextWidth(mock: (text: string, fontSize: number) => number) {\n  mockMeasureTextWidth = mock;\n}\n\n/**\n * \n */\nexport const measureTextWidth = memoize(\n  (text: string, font: any): number => {\n    const { fontSize, fontFamily, fontWeight, fontStyle, fontVariant } = font;\n\n    if (mockMeasureTextWidth) {\n      return mockMeasureTextWidth(text, fontSize);\n    }\n\n    if (!ctx) {\n      // @ts-ignore\n      ctx = runtime.offscreenCanvasCreator.getOrCreateContext(undefined) as CanvasRenderingContext2D;\n    }\n    ctx!.font = [fontStyle, fontVariant, fontWeight, `${fontSize}px`, fontFamily].join(' ');\n    return ctx!.measureText(text).width;\n  },\n  (text: any, font?: any) => [text, Object.values(font || getFont(text as Text)).join()].join(''),\n  4096\n);\n\nexport const getFont = (textShape: Text) => {\n  const fontFamily = textShape.style.fontFamily || 'sans-serif';\n  const fontWeight = textShape.style.fontWeight || 'normal';\n  const fontStyle = textShape.style.fontStyle || 'normal';\n  const fontVariant = textShape.style.fontVariant;\n  let fontSize = textShape.style.fontSize as any;\n  fontSize = typeof fontSize === 'object' ? fontSize.value : fontSize;\n  return { fontSize: fontSize as number, fontFamily, fontWeight, fontStyle, fontVariant };\n};\n\nexport function textOf(node: DisplayObject): Text | null {\n  if (node.nodeName === 'text') {\n    return node as Text;\n  }\n  if (node.nodeName === 'g' && node.children.length === 1 && node.children[0].nodeName === 'text') {\n    return node.children[0] as Text;\n  }\n  return null;\n}\n\nexport function applyToText(node: DisplayObject, style: Record<string, any>) {\n  const text = textOf(node);\n  if (text!) text.attr(style);\n}\n", "import { Text } from '../shapes';\nimport { applyToText } from './text';\n\nexport function ellipsisIt(node: Text, w: number, suffix = '...') {\n  applyToText(node, { wordWrap: true, wordWrapWidth: w, maxLines: 1, textOverflow: suffix });\n}\n", "import type { Text } from '../shapes';\nimport { applyToText } from './text';\n\nexport function wrapIt(node: Text, wordWrapWidth: number, maxLines = 2, textBaseline: string = 'top') {\n  applyToText(node, { wordWrap: true, wordWrapWidth, maxLines, textBaseline });\n}\n", "/**\n * \n */\nexport function getEventPos(e: any): [number, number] {\n  const { canvas, touches, offsetX, offsetY } = e;\n  if (canvas) {\n    const { x, y } = canvas;\n    return [x, y];\n  }\n  if (touches) {\n    const { clientX, clientY } = touches[0];\n    return [clientX, clientY];\n  }\n  if (offsetX && offsetY) return [offsetX, offsetY];\n  return [0, 0];\n}\n\n/**\n *  viewport \n */\nexport function getEventViewportPos(e: any): [number, number] {\n  const { nativeEvent, touches, clientX, clientY } = e;\n  if (nativeEvent) {\n    return [nativeEvent.clientX, nativeEvent.clientY];\n  }\n  if (touches) {\n    const { clientX, clientY } = touches[0];\n    return [clientX, clientY];\n  }\n  if (typeof clientX === 'number' && typeof clientY === 'number') return [clientX, clientY];\n  return [0, 0];\n}\n", "import { DisplayObject } from '../shapes/DisplayObject';\n\nexport function traverse(element: DisplayObject, callback: (node: DisplayObject) => void) {\n  callback(element);\n  if (element.children) {\n    element.children.forEach((child) => {\n      if (child) traverse(child as DisplayObject, callback);\n    });\n  }\n}\n", "import { DisplayObject } from '../shapes/DisplayObject';\nimport { traverse } from './traverse';\n\nexport function show(element: DisplayObject) {\n  visibility(element, true);\n}\n\nexport function hide(element: DisplayObject) {\n  visibility(element, false);\n}\n\nexport function visibility(element: DisplayObject, visible: boolean) {\n  const value = visible ? 'visible' : 'hidden';\n  traverse(element, (node) => {\n    node.attr('visibility', value);\n  });\n}\n", "import { ElementEvent } from '@antv/g';\nimport { Group } from '../shapes/Group';\nimport type { DisplayObject } from '../shapes/DisplayObject';\nimport { hide } from './visibility';\n\nclass OffscreenGroup extends Group {\n  constructor(...args: any[]) {\n    super(...args);\n    this.isMutationObserved = true;\n    this.addEventListener(ElementEvent.INSERTED, () => {\n      hide(this);\n    });\n  }\n}\n\nexport function createOffscreenGroup(container: DisplayObject) {\n  const group = container.appendChild(\n    new OffscreenGroup({\n      class: 'offscreen',\n    })\n  );\n  hide(group);\n  return group;\n}\n\nexport function isInOffscreenGroup(group: Group) {\n  let ancestor: any = group;\n  while (ancestor) {\n    if (ancestor.className === 'offscreen') {\n      return true;\n    }\n    ancestor = ancestor.parent;\n  }\n  return false;\n}\n", "import type { DisplayObjectConfig, TextStyleProps as GTextStyleProps } from '@antv/g';\nimport { Group, Text as GText } from '@antv/g';\nimport { createOffscreenGroup } from '../util/offscreen';\nimport { OmitConflictStyleProps } from './types';\n\nexport type TextStyleProps = OmitConflictStyleProps<GTextStyleProps>;\n\nexport class Text extends GText {\n  private _offscreen!: Group;\n\n  protected get offscreenGroup() {\n    if (!this._offscreen) this._offscreen = createOffscreenGroup(this);\n    return this._offscreen;\n  }\n\n  disconnectedCallback(): void {\n    this._offscreen?.destroy();\n  }\n\n  constructor({ style, ...restOptions }: DisplayObjectConfig<TextStyleProps> = {}) {\n    super({\n      style: {\n        text: '',\n        fill: 'black',\n        fontFamily: 'sans-serif',\n        fontSize: 16,\n        fontStyle: 'normal',\n        fontVariant: 'normal',\n        fontWeight: 'normal',\n        lineWidth: 1,\n        textAlign: 'start',\n        textBaseline: 'middle',\n        ...style,\n      },\n      ...restOptions,\n    });\n  }\n}\n", "import { isNumber, isString } from '@antv/util';\nimport type { HTMLStyleProps } from '@antv/g';\nimport type { DisplayObject } from '../shapes';\nimport { Text, HTML } from '../shapes';\nimport type { ExtendDisplayObject } from '../types';\n\nexport function renderExtDo(el: ExtendDisplayObject): DisplayObject {\n  if (typeof el === 'function') return el();\n  return isString(el) || isNumber(el) ? new Text({ style: { text: String(el) } }) : el;\n}\n\nexport function renderHtmlExtDo(el: ExtendDisplayObject, style: Partial<HTMLStyleProps>): DisplayObject {\n  if (typeof el === 'function') return el();\n  return isString(el) || isNumber(el)\n    ? new HTML({\n        style: {\n          pointerEvents: 'auto',\n          ...style,\n          innerHTML: el as string | HTMLElement,\n        },\n      })\n    : el;\n}\n", "import type { Point } from '../../types';\n\nfunction inside(x1: number, x2: number, y1: number, y2: number, xk: number, yk: number) {\n  return (\n    (x1 === x2 || (Math.min(x1, x2) <= xk && xk <= Math.max(x1, x2))) &&\n    (y1 === y2 || (Math.min(y1, y2) <= yk && yk <= Math.max(y1, y2)))\n  );\n}\nfunction update(ans: number[], x: number, y: number) {\n  const out = ans;\n  if (!ans.length || x < ans[0] || (x === ans[0] && y < ans[1])) {\n    out[0] = x;\n    out[1] = y;\n  }\n}\n\n/**\n * \n * https://leetcode-cn.com/problems/intersection-lcci/solution/jiao-dian-by-leetcode-solution/\n */\nexport function intersection([x1, y1]: Point, [x2, y2]: Point, [x3, y3]: Point, [x4, y4]: Point) {\n  const ans: number[] = [];\n  // \n  if ((y4 - y3) * (x2 - x1) === (y2 - y1) * (x4 - x3)) {\n    // \n    if ((y2 - y1) * (x3 - x1) === (y3 - y1) * (x2 - x1)) {\n      // \n      if (inside(x1, x2, y1, y2, x3, y3)) {\n        update(ans, x3, y3);\n      }\n      if (inside(x1, x2, y1, y2, x4, y4)) {\n        update(ans, x4, y4);\n      }\n      if (inside(x3, x4, y3, y4, x1, y1)) {\n        update(ans, x1, y1);\n      }\n      if (inside(x3, x4, y3, y4, x2, y2)) {\n        update(ans, x2, y2);\n      }\n    }\n  } else {\n    //  t1  t2 \n    const t1 =\n      (x3 * (y4 - y3) + y1 * (x4 - x3) - y3 * (x4 - x3) - x1 * (y4 - y3)) /\n      ((x2 - x1) * (y4 - y3) - (x4 - x3) * (y2 - y1));\n    const t2 =\n      (x1 * (y2 - y1) + y3 * (x2 - x1) - y1 * (x2 - x1) - x3 * (y2 - y1)) /\n      ((x4 - x3) * (y2 - y1) - (x2 - x1) * (y4 - y3));\n    //  t1  t2  [0, 1] \n    if (t1 >= 0.0 && t1 <= 1.0 && t2 >= 0.0 && t2 <= 1.0) {\n      ans[0] = x1 + t1 * (x2 - x1);\n      ans[1] = y1 + t1 * (y2 - y1);\n    }\n  }\n  return ans;\n}\n", "import type { Point } from '../../types';\n\n/**\n * \n */\nexport function lineLen([x1, y1]: Point, [x2, y2]: Point) {\n  return ((x1 - x2) ** 2 + (y1 - y2) ** 2) ** 0.5;\n}\n", "export function groupBy<T extends { [key: string]: any }>(source: T[], by: keyof T) {\n  return source.reduce((acc, curr) => {\n    (acc[curr[by]] = acc[curr[by]] || []).push(curr);\n    return acc;\n  }, {} as { [key in T[keyof T]]: T[] });\n}\n", "import { Selection } from './selection';\n\nexport function ifShow<T extends Selection, R = any>(\n  show: boolean,\n  container: T,\n  creator: (group: T) => R,\n  removeChildren: boolean = true,\n  removeHandler: (group: T) => any = (g) => {\n    g.node().removeChildren();\n  }\n): null | R {\n  if (show) {\n    return creator(container);\n  }\n  if (removeChildren) removeHandler(container);\n  return null;\n}\n", "export function inRange(\n  n: number,\n  start: number,\n  end: number,\n  includeLeft: boolean = true,\n  includeRight: boolean = false\n) {\n  if ((includeLeft && n === start) || (includeRight && n === end)) return true;\n  return n > start && n < end;\n}\n", "type PrimitiveInterpolatable = number;\n\nexport type Interpolatable = number | { [key: string]: PrimitiveInterpolatable } | PrimitiveInterpolatable[];\n\nexport type Interpolate<T extends Interpolatable = any> = (t: number) => T;\n\nexport type Interpolator<T extends Interpolatable = any> = (from: T, to: T) => Interpolate<T>;\n\nexport const numberInterpolate: Interpolator<number> = function (from, to) {\n  return function (t: number) {\n    return from * (1 - t) + to * t;\n  };\n};\n\nexport function arrayInterpolate(\n  from: PrimitiveInterpolatable[],\n  to: PrimitiveInterpolatable[]\n): Interpolate<PrimitiveInterpolatable[]> {\n  const nb = to ? to.length : 0;\n  const na = from ? Math.min(nb, from.length) : 0;\n\n  return function (t) {\n    const x = new Array(na);\n    const c = new Array(nb);\n\n    let i = 0;\n    for (i = 0; i < na; ++i) x[i] = interpolate(from[i], to[i]);\n    for (; i < nb; ++i) c[i] = to[i];\n    for (i = 0; i < na; ++i) c[i] = x[i](t);\n    return c;\n  };\n}\n\nexport function objectInterpolate(\n  from: { [keys: string]: PrimitiveInterpolatable } = {},\n  to: { [keys: string]: PrimitiveInterpolatable } = {}\n) {\n  const i: { [keys: string]: Interpolate } = {};\n  const c: { [keys: string]: PrimitiveInterpolatable } = {};\n  Object.entries(to).forEach(([k, v]) => {\n    if (k in from) i[k] = interpolate(from[k], v);\n    else c[k] = v;\n  });\n  return function (t: PrimitiveInterpolatable) {\n    Object.entries(i).forEach(([k, v]) => (c[k] = v(t)));\n    return c;\n  };\n}\n\nexport function interpolate<T extends Interpolatable>(from: T, to: T): Interpolate<T> {\n  if (typeof from === 'number' && typeof to === 'number') {\n    // @ts-ignore\n    return numberInterpolate(from, to);\n  }\n  if (Array.isArray(from) && Array.isArray(to)) {\n    // @ts-ignore\n    return arrayInterpolate(from, to);\n  }\n  if (typeof from === 'object' && typeof to === 'object') {\n    // @ts-ignore\n    return objectInterpolate(\n      from as { [keys: string]: PrimitiveInterpolatable },\n      to as { [keys: string]: PrimitiveInterpolatable }\n    );\n  }\n  return ((t: T) => from) as Interpolate<T>;\n}\n", "import type { GenericAnimation } from '../animation';\nimport type { DisplayObject } from '../shapes';\nimport type { Interpolatable } from './interpolate';\nimport { interpolate } from './interpolate';\n\nexport function keyframeInterpolate<T extends Interpolatable>(\n  element: DisplayObject,\n  from: T,\n  to: T,\n  options: GenericAnimation\n) {\n  if (!options) {\n    element.attr('__keyframe_data__', to);\n    return null;\n  }\n  const { duration = 0 } = options;\n  const int = interpolate(from, to);\n  const count = Math.ceil(+duration / 16);\n  const keyframes = new Array(count)\n    .fill(0)\n    .map((datum, index, array) => ({ __keyframe_data__: int(index / (array.length - 1)) }));\n  // @ts-ignore\n  return element.animate(keyframes, { fill: 'both', ...options });\n}\n", "import type { LayoutItem } from '../types';\nimport { BBox } from '../../bbox';\n\nexport function getItemsBBox(items: LayoutItem[]) {\n  let minX = Infinity;\n  let minY = Infinity;\n  let maxX = -Infinity;\n  let maxY = -Infinity;\n\n  for (let i = 0; i < items.length; i++) {\n    const { x, y, width, height } = items[i];\n    const [X, Y] = [x + width, y + height];\n    if (x < minX) minX = x;\n    if (y < minY) minY = y;\n    if (X > maxX) maxX = X;\n    if (Y > maxY) maxY = Y;\n  }\n  return new BBox(minX, minY, maxX - minX, maxY - minY);\n}\n", "import type { LayoutExecuter } from '../types';\nimport { getItemsBBox } from '../utils';\nimport type { FlexLayoutConfig } from './types';\nimport { BBox } from '../../bbox';\n\nexport const flex: LayoutExecuter<FlexLayoutConfig> = function (container, children, config) {\n  const { width, height } = container;\n  const {\n    flexDirection = 'row',\n    flexWrap = 'nowrap',\n    justifyContent = 'flex-start',\n    alignContent = 'flex-start',\n    alignItems = 'flex-start',\n  } = config;\n\n  const isHorizontalFlow = flexDirection === 'row'; // || flexDirection === 'row-reverse';\n  const isLeftToRightFlow = flexDirection === 'row' || flexDirection === 'column';\n\n  // implement default layout;\n  // flex direction\n  const direction = isHorizontalFlow ? (isLeftToRightFlow ? [1, 0] : [-1, 0]) : isLeftToRightFlow ? [0, 1] : [0, -1];\n\n  let [offsetX, offsetY] = [0, 0];\n  const itemsFromDirection = children.map((child) => {\n    const { width, height } = child;\n    const [x, y] = [offsetX, offsetY];\n    [offsetX, offsetY] = [offsetX + width * direction[0], offsetY + height * direction[1]];\n    return new BBox(x, y, width, height);\n  });\n\n  // flex wrap\n  // todo\n\n  // justify content\n  // flex-start, flex-end, center\n  const itemsForJustifyContentBBox = getItemsBBox(itemsFromDirection);\n  const justifyContentOffset = {\n    'flex-start': 0,\n    'flex-end': isHorizontalFlow\n      ? width - itemsForJustifyContentBBox.width\n      : height - itemsForJustifyContentBBox.height,\n    center: isHorizontalFlow\n      ? (width - itemsForJustifyContentBBox.width) / 2\n      : (height - itemsForJustifyContentBBox.height) / 2,\n  };\n  const itemsFromJustifyContent = itemsFromDirection.map((item) => {\n    const { x, y } = item;\n    const itemBox = BBox.fromRect(item);\n    itemBox.x = isHorizontalFlow ? x + justifyContentOffset[justifyContent] : x;\n    itemBox.y = isHorizontalFlow ? y : y + justifyContentOffset[justifyContent];\n    return itemBox;\n  });\n\n  // align items\n  // flex-start, flex-end, center\n  const itemsForAlignItemsBBox = getItemsBBox(itemsFromJustifyContent);\n\n  const calcAlignItemsOffset = (box: DOMRect) => {\n    const [key, size] = isHorizontalFlow ? ['height', height] : ['width', width];\n\n    switch (alignItems) {\n      case 'flex-start':\n        return 0;\n      case 'flex-end':\n        return size - box[key as 'width' | 'height'];\n      case 'center':\n        return size / 2 - box[key as 'width' | 'height'] / 2;\n      default:\n        return 0;\n    }\n  };\n\n  const itemsFromAlignItems = itemsFromJustifyContent.map((item) => {\n    const { x, y } = item;\n    const itemBox = BBox.fromRect(item);\n    itemBox.x = isHorizontalFlow ? x : x + calcAlignItemsOffset(itemBox);\n    itemBox.y = isHorizontalFlow ? y + calcAlignItemsOffset(itemBox) : y;\n    return itemBox;\n  });\n\n  const finalItems = itemsFromAlignItems.map((item) => {\n    const itemBox = BBox.fromRect(item);\n    itemBox.x += container.x ?? 0;\n    itemBox.y += container.y ?? 0;\n    return itemBox;\n  });\n\n  return finalItems;\n};\n", "import type { LayoutExecuter } from '../types';\nimport type { GridLayoutConfig } from './types';\n\nexport const grid: LayoutExecuter<GridLayoutConfig> = function (container, children, config) {\n  // todo\n  return [];\n};\n", "import { flex } from './flex';\nimport { grid } from './grid';\nimport type { LayoutConfig, LayoutItem } from './types';\n\nexport default (container: LayoutItem, children: LayoutItem[], config: LayoutConfig) => {\n  if (children.length === 0) return [];\n  const callers = { flex, grid };\n  const caller = config.display in callers ? callers[config.display] : null;\n  // @ts-ignore\n  return caller?.call(null, container, children, config) || [];\n};\n", "import type { Point, Vector2 } from '../types';\n\n/**\n * @param vec\n * @param s\n */\nexport function scale(vec: Vector2, s: number): Vector2 {\n  return [vec[0] * s, vec[1] * s];\n}\n\nexport function add(vec1: Vector2, vec2: Vector2): Vector2 {\n  return [vec1[0] + vec2[0], vec1[1] + vec2[1]];\n}\n\nexport function sub(vec1: Vector2, vec2: Vector2): Vector2 {\n  return [vec1[0] - vec2[0], vec1[1] - vec2[1]];\n}\n\nexport function min(vec1: Vector2, vec2: Vector2): Vector2 {\n  return [Math.min(vec1[0], vec2[0]), Math.min(vec1[1], vec2[1])];\n}\n\nexport function max(vec1: Vector2, vec2: Vector2): Vector2 {\n  return [Math.max(vec1[0], vec2[0]), Math.max(vec1[1], vec2[1])];\n}\n\nexport function distance(vec1: Vector2, vec2: Vector2): number {\n  return Math.sqrt((vec1[0] - vec2[0]) ** 2 + (vec1[1] - vec2[1]) ** 2);\n}\n\nexport function normalize(vec: Vector2): Vector2 {\n  if (vec[0] === 0 && vec[1] === 0) return [0, 0];\n  const len = Math.sqrt(vec[0] ** 2 + vec[1] ** 2);\n  return [vec[0] / len, vec[1] / len];\n}\n\n/**\n * \n * @param vec\n * @param origin \n * @param angle \n */\nexport function rotate(vec: Vector2, origin: Point, angle: number) {\n  const [x, y] = vec;\n  const [ox, oy] = origin;\n  const dx = x - ox;\n  const dy = y - oy;\n  const sin = Math.sin(angle);\n  const cos = Math.cos(angle);\n  return [dx * cos - dy * sin + ox, dx * sin + dy * cos + oy];\n}\n\nexport function vertical(vec: Vector2, flag: boolean): Vector2 {\n  return flag ? [vec[1], -vec[0]] : [-vec[1], vec[0]];\n}\n", "/**\n * x\n */\nexport function toPrecision(num: number, precision: number) {\n  return +num.toPrecision(precision);\n}\n\n/**\n * \n * 100000 -> 10,000\n */\nexport function toThousands(num: number) {\n  return num.toLocaleString();\n}\n\n/**\n * \n * 1000000 = 1e6\n */\nexport function toScientificNotation(num: number) {\n  return num.toExponential();\n}\n\n/**\n * k\n * 1234 -> 1K\n * 12345 -> 12K\n */\nexport function toKNotation(num: number, precision: number = 0) {\n  if (Math.abs(num) < 1000) return String(num);\n  return `${toPrecision(num / 1000, precision).toLocaleString()}K`;\n}\n\n// Condition if x is smaller than zero.\nexport const ifNegative = <T extends keyof any>(x: any, a: T, b?: T) => (x < 0 && Number.isFinite(x) ? a : b);\n// Condition if x is greater than zero.\nexport const ifPositive = <T extends keyof any>(x: any, a: T, b?: T) => (x > 0 && Number.isFinite(x) ? a : b);\n// Calculate the result of  a * b.\nexport const multi = (a: number, b: number) => a * b;\n// Calculate the result of  (a + b) / 2.\nexport const mid = (a: number, b?: number) => a / 2 + (b || 0) / 2;\n", "export function omit(obj: Record<string, any>, keys: string | string[]) {\n  const res: Record<string, any> = {};\n  const innerKeys = Array.isArray(keys) ? keys : [keys];\n  for (const key in obj) {\n    if (!innerKeys.includes(key)) {\n      res[key] = obj[key];\n    }\n  }\n  return res;\n}\n", "import { add, sub, min as _min, max as _max, scale, distance } from './matrix';\nimport type { Vector2, Point } from '../types';\n\ntype A = ['a' | 'A', number, number, number, number, number, number, number];\ntype C = ['c' | 'C', number, number, number, number, number, number];\ntype O = ['o' | 'O', number, number];\ntype H = ['h' | 'H', number];\ntype L = ['l' | 'L', number, number];\ntype M = ['m' | 'M', number, number];\ntype R = ['r' | 'R', number, number, number, number];\ntype Q = ['q' | 'Q', number, number, number, number];\ntype S = ['s' | 'S', number, number, number, number, number, number, number];\ntype T = ['t' | 'T', number, number];\ntype V = ['v' | 'V', number];\ntype U = ['u' | 'U', number, number, number];\ntype Z = ['z' | 'Z'];\n\nexport type PathCommand = A | C | O | H | L | M | R | Q | S | T | V | U | Z;\n\nfunction smoothBezier(points: Point[], smooth: number, isLoop: boolean, constraint: Point[]) {\n  const cps: Vector2[] = [];\n  const hasConstraint = !!constraint;\n\n  let prevPoint: Point;\n  let nextPoint: Point;\n  let min: Vector2 = [Infinity, Infinity];\n  let max: Vector2 = [-Infinity, -Infinity];\n  let nextCp0: Vector2;\n  let cp1: Vector2;\n  let cp0: Vector2;\n\n  if (hasConstraint) {\n    [min, max] = constraint;\n    for (let i = 0, l = points.length; i < l; i += 1) {\n      const point = points[i];\n      min = _min(min, point);\n      max = _max(max, point);\n    }\n  }\n\n  for (let i = 0, len = points.length; i < len; i += 1) {\n    const point = points[i];\n    if (i === 0 && !isLoop) {\n      cp0 = point;\n    } else if (i === len - 1 && !isLoop) {\n      cp1 = point;\n      cps.push(cp0!);\n      cps.push(cp1);\n    } else {\n      const prevIdx = [i ? i - 1 : len - 1, i - 1][isLoop ? 0 : 1];\n      prevPoint = points[prevIdx];\n      nextPoint = points[isLoop ? (i + 1) % len : i + 1];\n\n      let v: Vector2 = [0, 0];\n      v = sub(nextPoint, prevPoint);\n      v = scale(v, smooth);\n\n      let d0 = distance(point, prevPoint);\n      let d1 = distance(point, nextPoint);\n\n      const sum = d0 + d1;\n      if (sum !== 0) {\n        d0 /= sum;\n        d1 /= sum;\n      }\n\n      let v1 = scale(v, -d0);\n      let v2 = scale(v, d1);\n\n      cp1 = add(point, v1);\n      nextCp0 = add(point, v2);\n\n      // \n      nextCp0 = _min(nextCp0, _max(nextPoint, point));\n      nextCp0 = _max(nextCp0, _min(nextPoint, point));\n\n      //  cp1 \n      v1 = sub(nextCp0, point);\n      v1 = scale(v1, -d0 / d1);\n      cp1 = add(point, v1);\n\n      // \n      cp1 = _min(cp1, _max(prevPoint, point));\n      cp1 = _max(cp1, _min(prevPoint, point));\n\n      //  nextCp0 \n      v2 = sub(point, cp1);\n      v2 = scale(v2, d1 / d0);\n      nextCp0 = add(point, v2);\n\n      if (hasConstraint) {\n        cp1 = _max(cp1, min);\n        cp1 = _min(cp1, max);\n        nextCp0 = _max(nextCp0, min);\n        nextCp0 = _min(nextCp0, max);\n      }\n\n      cps.push(cp0!);\n      cps.push(cp1);\n      cp0 = nextCp0;\n    }\n  }\n\n  if (isLoop) {\n    cps.push(cps.shift()!);\n  }\n\n  return cps;\n}\n\n/**\n * create bezier spline from catmull rom spline\n * @param {Array} crp Catmull Rom Points\n * @param {boolean} z Spline is loop\n * @param {Array} constraint Constraint\n */\nexport function catmullRom2Bezier(\n  crp: number[],\n  z: boolean = false,\n  constraint: Point[] = [\n    [0, 0],\n    [1, 1],\n  ]\n): PathCommand[] {\n  const isLoop = !!z;\n  const pointList: Point[] = [];\n  for (let i = 0, l = crp.length; i < l; i += 2) {\n    pointList.push([crp[i], crp[i + 1]]);\n  }\n\n  const controlPointList = smoothBezier(pointList, 0.4, isLoop, constraint);\n  const len = pointList.length;\n  const d1: PathCommand[] = [];\n\n  let cp1: Vector2;\n  let cp2: Vector2;\n  let p: Point;\n\n  for (let i = 0; i < len - 1; i += 1) {\n    cp1 = controlPointList[i * 2];\n    cp2 = controlPointList[i * 2 + 1];\n    p = pointList[i + 1];\n\n    d1.push(['C', cp1[0], cp1[1], cp2[0], cp2[1], p[0], p[1]]);\n  }\n\n  if (isLoop) {\n    cp1 = controlPointList[len];\n    cp2 = controlPointList[len + 1];\n    [p] = pointList;\n\n    d1.push(['C', cp1[0], cp1[1], cp2[0], cp2[1], p[0], p[1]]);\n  }\n  return d1;\n}\n", "export const PRIMILTIVE_ATTRIBUTES = [\n  '$el',\n  'cx',\n  'cy',\n  'd',\n  'dx',\n  'dy',\n  'fill',\n  'fillOpacity',\n  'filter',\n  'fontFamily',\n  'fontSize',\n  'fontStyle',\n  'fontVariant',\n  'fontWeight',\n  'height',\n  'img',\n  'increasedLineWidthForHitTesting',\n  'innerHTML',\n  'isBillboard',\n  'billboardRotation',\n  'isSizeAttenuation',\n  'isClosed',\n  'isOverflowing',\n  'leading',\n  'letterSpacing',\n  'lineDash',\n  'lineHeight',\n  'lineWidth',\n  'markerEnd',\n  'markerEndOffset',\n  'markerMid',\n  'markerStart',\n  'markerStartOffset',\n  'maxLines',\n  'metrics',\n  'miterLimit',\n  'offsetX',\n  'offsetY',\n  'opacity',\n  'path',\n  'points',\n  'r',\n  'radius',\n  'rx',\n  'ry',\n  'shadowColor',\n  'src',\n  'stroke',\n  'strokeOpacity',\n  'text',\n  'textAlign',\n  'textBaseline',\n  'textDecorationColor',\n  'textDecorationLine',\n  'textDecorationStyle',\n  'textOverflow',\n  'textPath',\n  'textPathSide',\n  'textPathStartOffset',\n  'transform',\n  'transformOrigin',\n  'visibility',\n  'width',\n  'wordWrap',\n  'wordWrapWidth',\n  'x',\n  'x1',\n  'x2',\n  'y',\n  'y1',\n  'y2',\n  'z1',\n  'z2',\n  'zIndex',\n];\n\nexport function isPrimitiveAttribute(key: string) {\n  return PRIMILTIVE_ATTRIBUTES.includes(key);\n}\n\nexport function getPrimitiveAttributes(attributes: Record<string, any>) {\n  const object: typeof attributes = {};\n  for (const key in attributes) {\n    if (isPrimitiveAttribute(key)) object[key] = attributes[key];\n  }\n  return object;\n}\n", "export function sampling<T extends any[]>(data: T, size: number): T {\n  if (data.length <= size) return data;\n  const step = Math.floor(data.length / size);\n  const result: T = [] as any;\n  for (let i = 0; i < data.length; i += step) {\n    result.push(data[i]);\n  }\n  return result;\n}\n", "import type { DisplayObject } from '../shapes';\n\n/**\n * scale a shape to a given size\n */\nexport function scaleToPixel(el: DisplayObject, size: number, applyScale = false) {\n  const { width, height } = el.getBBox();\n  const scale = size / Math.max(width, height);\n  if (applyScale) {\n    el.style.transform = `scale(${scale})`;\n  }\n  return scale;\n}\n", "export function group(array: any[], keyFunc: Function) {\n  const grouped = new Map();\n\n  array.forEach((item) => {\n    const key = keyFunc(item);\n    if (!grouped.has(key)) {\n      grouped.set(key, []);\n    }\n    grouped.get(key).push(item);\n  });\n\n  return grouped;\n}\n", "// @ts-nocheck\nimport type { IAnimation, IDocument } from '@antv/g';\nimport { flatten } from '@antv/util';\nimport type { AnimationResult } from '../animation';\nimport type { BaseStyleProps as BP, DisplayObject } from '../shapes';\nimport { Circle, Ellipse, Group, HTML, Image, Line, Path, Polygon, Polyline, Rect, Text } from '../shapes';\nimport { group } from './group';\n\nexport type _Element = DisplayObject & {\n  // Data for this element.\n  __data__?: any;\n  // An Array of data to be splitted to.\n  __toData__?: any[];\n  // An Array of elements to be merged from.\n  __fromElements__?: DisplayObject[];\n  // Whether to update parent if it in update selection.\n  __facet__?: boolean;\n};\n\nfunction error(msg: string) {\n  throw new Error(msg);\n}\n\n/**\n * A simple implementation of d3-selection for @antv/g.\n * It has the core features of d3-selection and extended ability.\n * Every methods of selection returns new selection if elements\n * are mutated(e.g. append, remove), otherwise return the selection itself(e.g. attr, style).\n * @see https://github.com/d3/d3-selection\n * @see https://github.com/antvis/g\n * @todo Nested selections.\n * @todo More useful functor.\n */\nexport class Selection<T = any> {\n  static registry: Record<string, new () => _Element> = {\n    g: Group,\n    rect: Rect,\n    circle: Circle,\n    path: Path,\n    text: Text,\n    ellipse: Ellipse,\n    image: Image,\n    line: Line,\n    polygon: Polygon,\n    polyline: Polyline,\n    html: HTML,\n  };\n\n  private _elements: _Element[];\n\n  private _parent: _Element;\n\n  private _data: T[] | [T, _Element[]][];\n\n  private _enter: Selection;\n\n  private _exit: Selection;\n\n  private _update: Selection;\n\n  private _merge: Selection;\n\n  private _split: Selection;\n\n  private _document: IDocument;\n\n  private _transitions: AnimationResult[];\n\n  private _facetElements: _Element[];\n\n  constructor(\n    elements: Iterable<_Element> = null,\n    data: T[] | [T, _Element[]][] = null,\n    parent: _Element = null,\n    document: IDocument | null = null,\n    selections: [Selection, Selection, Selection, Selection, Selection] = [null, null, null, null, null],\n    transitions: Promise<void>[] = [],\n    updateElements: _Element[] = []\n  ) {\n    this._elements = Array.from(elements);\n    this._data = data;\n    this._parent = parent;\n    this._document = document;\n    this._enter = selections[0];\n    this._update = selections[1];\n    this._exit = selections[2];\n    this._merge = selections[3];\n    this._split = selections[4];\n    this._transitions = transitions;\n    this._facetElements = updateElements;\n  }\n\n  selectAll(selector: string | _Element[]): Selection<T> {\n    const elements = typeof selector === 'string' ? this._parent.querySelectorAll<_Element>(selector) : selector;\n    return new Selection<T>(elements, null, this._elements[0], this._document);\n  }\n\n  selectFacetAll(selector: string | _Element[]): Selection<T> {\n    const elements = typeof selector === 'string' ? this._parent.querySelectorAll<_Element>(selector) : selector;\n    return new Selection<T>(this._elements, null, this._parent, this._document, undefined, undefined, elements);\n  }\n\n  /**\n   * @todo Replace with querySelector which has bug now.\n   */\n  select(selector: string | _Element): Selection<T> {\n    const element =\n      typeof selector === 'string' ? this._parent.querySelectorAll<_Element>(selector)[0] || null : selector;\n    return new Selection<T>([element], null, element, this._document);\n  }\n\n  append(node: string | ((data: T, i: number) => _Element)): Selection<T> {\n    const callback = typeof node === 'function' ? node : () => this.createElement(node);\n\n    const elements = [];\n    if (this._data !== null) {\n      // For empty selection, append new element to parent.\n      // Each element is bind with datum.\n      for (let i = 0; i < this._data.length; i++) {\n        const d = this._data[i];\n        const [datum, from] = Array.isArray(d) ? d : [d, null];\n        const newElement = callback(datum, i);\n        newElement.__data__ = datum;\n        if (from !== null) newElement.__fromElements__ = from;\n        this._parent.appendChild(newElement);\n        elements.push(newElement);\n      }\n      return new Selection(elements, null, this._parent, this._document);\n    }\n    // For non-empty selection, append new element to\n    // selected element and return new selection.\n    for (let i = 0; i < this._elements.length; i++) {\n      const element = this._elements[i];\n      const datum = element.__data__;\n      const newElement = callback(datum, i);\n      element.appendChild(newElement);\n      elements.push(newElement);\n    }\n    return new Selection(elements, null, elements[0], this._document);\n  }\n\n  #maybeAppend<T extends DisplayObject>(selector: string, node: string | (() => _Element)): Selection<T> {\n    const element = this._elements[0];\n    const child = element.querySelector<_Element>(selector);\n    if (child) return new Selection([child], null, this._parent, this._document);\n    const newChild = typeof node === 'string' ? this.createElement(node) : node();\n    element.appendChild(newChild);\n    return new Selection([newChild], null, this._parent, this._document);\n  }\n\n  maybeAppend<T = DisplayObject>(id: string, node: string | (() => _Element)) {\n    const element = this.#maybeAppend<T>(id[0] === '#' ? id : `#${id}`, node);\n    element.attr('id', id);\n    return element;\n  }\n\n  maybeAppendByClassName<T = DisplayObject>(className: any, node: string | (() => _Element)) {\n    const cls: string = className.toString();\n    const element = this.#maybeAppend<T>(cls[0] === '.' ? cls : `.${cls}`, node);\n    element.attr('className', cls);\n    return element;\n  }\n\n  maybeAppendByName<T = DisplayObject>(name: string, node: string | (() => _Element)) {\n    const element = this.#maybeAppend<T>(`[name=\"${name}\"]`, node);\n    element.attr('name', name);\n    return element;\n  }\n\n  /**\n   * Bind data to elements, and produce three selection:\n   * Enter: Selection with empty elements and data to be bind to elements.\n   * Update: Selection with elements to be updated.\n   * Exit: Selection with elements to be removed.\n   */\n  data<T = any>(\n    data: T[],\n    id: (d: T, index?: number) => any = (d) => d,\n    groupId: (d: T, index?: number) => any = () => null\n  ): Selection<T> {\n    // An Array of new data.\n    const enter: T[] = [];\n\n    // An Array of elements to be updated.\n    const update: _Element[] = [];\n\n    // A Set of elements to be removed.\n    const exit = new Set<_Element>(this._elements);\n\n    // An Array of data to be merged into one element.\n    const merge: [T, _Element[]][] = [];\n\n    // A Set of elements to be split into multiple datum.\n    const split = new Set<_Element>();\n\n    // A Map from key to each element.\n    const keyElement = new Map<string, _Element>(this._elements.map((d, i) => [id(d.__data__, i), d]));\n\n    // A Map from key to exist element. The Update Selection\n    // can get element from this map, this is for diff among\n    // facets.\n    const keyUpdateElement = new Map<string, _Element>(this._facetElements.map((d, i) => [id(d.__data__, i), d]));\n\n    // A Map from groupKey to a group of elements.\n    const groupKeyElements = group(this._elements, (d) => groupId(d.__data__));\n\n    // Diff data with selection(elements with data).\n    // !!! Note\n    // The switch is strictly ordered, not not change the order of them.\n    for (let i = 0; i < data.length; i++) {\n      const datum = data[i];\n      const key = id(datum, i);\n      const groupKey = groupId(datum, i);\n      // Append element to update selection if incoming data has\n      // exactly the same key with elements.\n      if (keyElement.has(key)) {\n        const element = keyElement.get(key);\n        element.__data__ = datum;\n        element.__facet__ = false;\n        update.push(element);\n        exit.delete(element);\n        keyElement.delete(key);\n        // Append element to update selection if incoming data has\n        // exactly the same key with updateElements.\n      } else if (keyUpdateElement.has(key)) {\n        const element = keyUpdateElement.get(key);\n        element.__data__ = datum;\n        // Flag this element should update its parentNode.\n        element.__facet__ = true;\n        update.push(element);\n        keyUpdateElement.delete(key);\n        // Append datum to merge selection if existed elements has\n        // its key as groupKey.\n      } else if (groupKeyElements.has(key)) {\n        const group = groupKeyElements.get(key);\n        merge.push([datum, group]);\n        for (const element of group) exit.delete(element);\n        groupKeyElements.delete(key);\n        // Append element to split selection if incoming data has\n        // groupKey as its key, and bind to datum for it.\n      } else if (keyElement.has(groupKey)) {\n        const element = keyElement.get(groupKey);\n        if (element.__toData__) element.__toData__.push(datum);\n        else element.__toData__ = [datum];\n        split.add(element);\n        exit.delete(element);\n      } else {\n        enter.push(datum);\n      }\n    }\n\n    // Create new selection with enter, update and exit.\n    const S: [Selection<T>, Selection<T>, Selection<T>, Selection<T>, Selection<T>] = [\n      new Selection<T>([], enter, this._parent, this._document),\n      new Selection<T>(update, null, this._parent, this._document),\n      new Selection<T>(exit, null, this._parent, this._document),\n      new Selection<T>([], merge, this._parent, this._document),\n      new Selection<T>(split, null, this._parent, this._document),\n    ];\n\n    return new Selection<T>(this._elements, null, this._parent, this._document, S);\n  }\n\n  merge(other: Selection<T>): Selection<T> {\n    const elements = [...this._elements, ...other._elements];\n    const transitions = [...this._transitions, ...other._transitions];\n    return new Selection<T>(elements, null, this._parent, this._document, undefined, transitions);\n  }\n\n  createElement(type: string): _Element {\n    if (this._document) {\n      return this._document.createElement<_Element, BP>(type, {});\n    }\n    const Ctor = Selection.registry[type];\n    if (Ctor) return new Ctor();\n    return error(`Unknown node type: ${type}`);\n  }\n\n  /**\n   * Apply callback for each selection(enter, update, exit)\n   * and merge them into one selection.\n   */\n  join(\n    enter: (selection: Selection<T>) => any = (d) => d,\n    update: (selection: Selection<T>) => any = (d) => d,\n    exit: (selection: Selection<T>) => any = (d) => d.remove(),\n    merge: (selection: Selection<T>) => any = (d) => d,\n    split: (selection: Selection<T>) => any = (d) => d.remove()\n  ): Selection<T> {\n    const newEnter = enter(this._enter);\n    const newUpdate = update(this._update);\n    const newExit = exit(this._exit);\n    const newMerge = merge(this._merge);\n    const newSplit = split(this._split);\n    return newUpdate.merge(newEnter).merge(newExit).merge(newMerge).merge(newSplit);\n  }\n\n  remove(): Selection<T> {\n    // Remove node immediately if there is no transition,\n    // otherwise wait until transition finished.\n    for (let i = 0; i < this._elements.length; i++) {\n      const element = this._elements[i];\n      const transition = this._transitions[i];\n      if (transition) {\n        transition.then(() => element.remove());\n      } else {\n        element.remove();\n      }\n    }\n    return new Selection<T>([], null, this._parent, this._document, undefined, this._transitions);\n  }\n\n  each(callback: (datum: T, index: number) => any): Selection<T> {\n    for (let i = 0; i < this._elements.length; i++) {\n      const element = this._elements[i];\n      const datum = element.__data__;\n      callback.call(element, datum, i);\n    }\n    return this;\n  }\n\n  attr(key: string, value: any): Selection<T> {\n    const callback = typeof value !== 'function' ? () => value : value;\n    return this.each(function (d, i) {\n      if (value !== undefined) this[key] = callback.call(this, d, i);\n    });\n  }\n\n  style(key: string, value: any, callable: boolean = true): Selection<T> {\n    const callback = typeof value !== 'function' || !callable ? () => value : value;\n    return this.each(function (d, i) {\n      if (value !== undefined) this.style[key] = callback.call(this, d, i);\n    });\n  }\n\n  styles(style: Record<string, any> = {}, callable: boolean = true): Selection<T> {\n    return this.each(function (d, i) {\n      Object.entries(style).forEach(([key, value]) => {\n        const callback = typeof value !== 'function' || !callable ? () => value : value;\n        if (value !== undefined) this.attr(key, callback.call(this, d, i));\n      });\n    });\n  }\n\n  update(option: any, callable: boolean = true): Selection<T> {\n    const callback = typeof option !== 'function' || !callable ? () => option : option;\n    return this.each(function (d, i) {\n      if (option && this.update) this.update(callback.call(this, d, i));\n    });\n  }\n\n  /** if current stage is maybeAppend, skip update stage */\n  maybeUpdate(option: any, callable: boolean = true): Selection<T> {\n    const callback = typeof option !== 'function' || !callable ? () => option : option;\n    return this.each(function (d, i) {\n      if (option && this.update) this.update(callback.call(this, d, i));\n    });\n  }\n\n  transition(callback?: (datum: T, index: number) => AnimationResult | AnimationResult[]): Selection<T> {\n    const { _transitions: T } = this;\n    const newTransitions = new Array<ReturnType<Exclude<typeof callback, undefined>>>(this._elements.length);\n    this.each(function (d, i) {\n      newTransitions[i] = callback.call(this, d, i);\n    });\n    this._transitions = flatten(newTransitions);\n    return this;\n  }\n\n  on(event: string, handler: any) {\n    this.each(function () {\n      this.addEventListener(event, handler);\n    });\n    return this;\n  }\n\n  call(callback: (selection: Selection<T>, ...args: any[]) => any, ...args: any[]): Selection<T> {\n    callback.call(this._parent, this, ...args);\n    return this;\n  }\n\n  node<T extends _Element = _Element>(): T {\n    return this._elements[0];\n  }\n\n  nodes(): _Element[] {\n    return this._elements;\n  }\n\n  transitions() {\n    return this._transitions.filter((t) => !!t);\n  }\n\n  parent(): DisplayObject {\n    return this._parent;\n  }\n}\n\nexport function select<T = any>(node: DisplayObject) {\n  return new Selection<T>([node], null, node, node.ownerDocument);\n}\n\nexport function maybeAppend<T>(\n  parent: Group,\n  selector: string,\n  node: string | ((data: T, i: number) => _Element)\n): Selection<T> {\n  if (!parent.querySelector(selector)) {\n    return select(parent).append(node);\n  }\n  return select(parent).select(selector);\n}\n", "import { isNumber, isArray } from '@antv/util';\n\nexport type SeriesAttr = number | number[];\n\nexport type StandardSeriesAttr = [number, number, number, number];\n\n/**\n * padding\n */\nexport function parseSeriesAttr(series?: SeriesAttr): StandardSeriesAttr {\n  if (isNumber(series)) {\n    return [series, series, series, series];\n  }\n  if (isArray(series)) {\n    const len = (series as number[]).length;\n\n    if (len === 1) {\n      return [series[0], series[0], series[0], series[0]];\n    }\n    if (len === 2) {\n      return [series[0], series[1], series[0], series[1]];\n    }\n    if (len === 3) {\n      return [series[0], series[1], series[2], series[1]];\n    }\n    if (len === 4) {\n      return series as StandardSeriesAttr;\n    }\n  }\n  return [0, 0, 0, 0];\n}\n", "import type { DisplayObject, Text, TextStyleProps } from '../shapes';\nimport { Point } from '../types';\nimport { select } from './selection';\n\n/**\n * xywidthheight\n */\nexport function getShapeSpace(shape: DisplayObject) {\n  const bounds = shape && shape.getRenderBounds();\n  if (!bounds)\n    return {\n      width: 0,\n      height: 0,\n    };\n  const max = bounds.getMax();\n  const min = bounds.getMin();\n  return {\n    width: max[0] - min[0],\n    height: max[1] - min[1],\n  };\n}\n\nexport function getLocalBBox(shape: DisplayObject) {\n  const { min, max } = shape.getLocalBounds();\n  const [[x1, y1], [x2, y2]] = [min, max];\n  return { x: x1, y: y1, width: x2 - x1, height: y2 - y1, left: x1, bottom: y2, top: y1, right: x2 };\n}\n\nexport function createTempText(group: DisplayObject, attrs: TextStyleProps): Text {\n  const textNode = select(group).append('text').node() as Text;\n  textNode.attr({ ...attrs, visibility: 'hidden' });\n\n  return textNode;\n}\n\nexport function isHorizontal(p1: Point, p2: Point): boolean {\n  const [x1, y1] = p1;\n  const [x2, y2] = p2;\n  return x1 !== x2 && y1 === y2;\n}\n\nexport function isVertical(p1: Point, p2: Point): boolean {\n  const [x1, y1] = p1;\n  const [x2, y2] = p2;\n  return x1 === x2 && y1 !== y2;\n}\n\nexport function copyAttributes(target: DisplayObject, source: DisplayObject) {\n  const { attributes } = source;\n  for (const [key, value] of Object.entries(attributes)) {\n    if (key !== 'id' && key !== 'className') target.attr(key, value);\n  }\n}\n", "export function toUppercaseFirstLetter(string: string) {\n  return string.toString().charAt(0).toUpperCase() + string.toString().slice(1);\n}\n\nexport function toLowercaseFirstLetter(string: string) {\n  return string.toString().charAt(0).toLowerCase() + string.toString().slice(1);\n}\n\nexport function addPrefix(string: string, prefix: string) {\n  return `${prefix}${toUppercaseFirstLetter(string)}`;\n}\n\nexport function removePrefix(string: string, prefix?: string, lowercaseFirstLetter: boolean = true) {\n  const inferPrefix = prefix || string.match(/^([a-z][a-z0-9]+)/)?.[0] || '';\n  const withoutPrefix = string.replace(new RegExp(`^(${inferPrefix})`), '');\n  return lowercaseFirstLetter ? toLowercaseFirstLetter(withoutPrefix) : withoutPrefix;\n}\n", "import type { PrefixStyleProps } from '../core';\nimport { addPrefix, removePrefix, toUppercaseFirstLetter } from './string';\n\n/**\n * HTML\n * @param style {[key: string]: Object}\n * \n * {\n *  '.selector': {\n *   'attrName': 'attr',\n *   'padding': '0 0 0 0',\n *   'background-color': 'red'\n *  }\n * }\n */\nexport function applyStyleSheet(element: HTMLElement, style: { [key: string]: Object }): void {\n  Object.entries(style).forEach(([selector, styleString]) => {\n    // apply styles to element and children\n    [element, ...element.querySelectorAll(selector)]\n      .filter((el) => el.matches(selector))\n      .forEach((target) => {\n        if (!target) return;\n        const temp = target as HTMLElement;\n        temp.style.cssText += Object.entries(styleString).reduce((total, currVal) => {\n          return `${total}${currVal.join(':')};`;\n        }, '');\n      });\n  });\n}\n\nconst startsWith = (text: string, prefix: string) => {\n  if (!text?.startsWith(prefix)) return false;\n  const nextChart = text[prefix.length];\n  return nextChart >= 'A' && nextChart <= 'Z';\n};\n\nexport function subStyleProps<T = Record<string, any>>(\n  style: Record<string, any>,\n  prefix: string,\n  invert: boolean = false\n) {\n  const result: Record<string, any> = {};\n  Object.entries(style).forEach(([key, value]) => {\n    // never transfer class property\n    if (key === 'className' || key === 'class') {\n      // do nothing\n    }\n    // @example showHandle -> showHandle, showHandleLabel -> showLabel\n    else if (startsWith(key, 'show') && startsWith(removePrefix(key, 'show'), prefix) !== invert) {\n      if (key === addPrefix(prefix, 'show')) result[key] = value;\n      else result[key.replace(new RegExp(toUppercaseFirstLetter(prefix)), '')] = value;\n    }\n    // @example navFormatter -> formatter\n    else if (!startsWith(key, 'show') && startsWith(key, prefix) !== invert) {\n      const name = removePrefix(key, prefix);\n      // don't transfer filter if it represents \n      if (name === 'filter' && typeof value === 'function') {\n        // do nothing\n      } else result[name] = value;\n    }\n  });\n  return result as T;\n}\n\nexport function superStyleProps<T extends Record<string, any>, P extends string>(\n  style: T,\n  prefix: P\n): PrefixStyleProps<T, P> {\n  return Object.entries(style).reduce((acc, [key, value]) => {\n    if (key.startsWith('show')) acc[`show${prefix}${key.slice(4)}`] = value;\n    else acc[`${prefix}${toUppercaseFirstLetter(key)}`] = value;\n    return acc;\n  }, {} as any);\n}\n\n/**\n * extract group style from mixin style\n * @param style\n * @param ignoreStyleDict style will be ignore from style\n * @returns shape style and rest style\n */\nexport function splitStyle(\n  style: { [keys: string]: any },\n  ignoreStyleDict: string[] = ['x', 'y', 'class', 'className']\n) {\n  const groupStyleDict: string[] = [\n    'transform',\n    'transformOrigin',\n    'anchor',\n    'visibility',\n    'pointerEvents',\n    'zIndex',\n    'cursor',\n    'clipPath',\n    'clipPathTargets',\n    'offsetPath',\n    'offsetPathTargets',\n    'offsetDistance',\n    'draggable',\n    'droppable',\n  ];\n  const output: typeof style = {};\n  const groupStyle: typeof style = {};\n  Object.entries(style).forEach(([key, val]) => {\n    if (ignoreStyleDict.includes(key)) {\n      // do nothing\n    } else if (groupStyleDict.indexOf(key) !== -1) groupStyle[key] = val;\n    else output[key] = val;\n  });\n  return [output, groupStyle];\n}\n", "/**\n * from: https://github.com/zqlu/svg2marker\n * translate svg string to G.Marker\n */\nimport svgPathParser from 'svg-path-parser';\n\ntype IPointPair = [number | undefined, number | undefined];\n\ntype ISVGPathCmd = {\n  code: string;\n  command: string;\n  relative?: boolean;\n  x?: number;\n  y?: number;\n  x1?: number;\n  y1?: number;\n  x2?: number;\n  y2?: number;\n};\n\n/**\n *  Return function to register a Marker Symbol for give SVG Path\n *\n * @param svgPath SVG Path string\n * @param viewBoxWidth SVG view box width, default to 1024\n * @param viewBoxHeight SVG view box height, default to 1024\n */\nexport function path2marker(\n  svgPath: string,\n  viewBoxWidth: number = 1024,\n  viewBoxHeight: number = 1014\n): (x: number, y: number, r: number) => (string | number)[][] {\n  return (x: number, y: number, r: number): (string | number)[][] => {\n    // @ts-ignore\n    const paths: ISVGPathCmd[] = svgPathParser(svgPath);\n\n    return paths.map((path: ISVGPathCmd) => {\n      const arr: (string | number)[] = [];\n      arr.push(path.relative === true ? path.code.toLowerCase() : path.code.toUpperCase());\n      const pairs: IPointPair[] = [\n        [path.x1, path.y1],\n        [path.x2, path.y2],\n        [path.x, path.y],\n      ];\n      pairs.forEach((pair: IPointPair) => {\n        const [px, py] = pair;\n        if (px !== undefined) {\n          arr.push(path.relative === true ? (px / viewBoxWidth) * 2 * r : x - r + r * 2 * (px / viewBoxWidth));\n        }\n        if (py !== undefined) {\n          arr.push(path.relative === true ? (py / viewBoxHeight) * 2 * r : y - r + r * 2 * (py / viewBoxHeight));\n        }\n      });\n\n      return arr;\n    });\n  };\n}\n\n/**\n * Return function to register a Marker symbol for give svg file\n *\n * @param icon SVG file content\n */\nexport function svg2marker(icon: string): (x: number, y: number, r: number) => (string | number)[][] {\n  const pathMatch: RegExpMatchArray | null = /<path\\s+d=\"(.*?)\"/i.exec(icon);\n  const viewBoxMatch: RegExpExecArray | null = /viewBox=\"\\d+\\s+\\d+\\s+(\\d+)\\s+(\\d+)\"/i.exec(icon);\n  if (pathMatch === null || pathMatch.length < 2) {\n    return (): (string | number)[][] => [];\n  }\n  let width: number = 1024;\n  let height: number = 1024;\n  if (viewBoxMatch !== null && viewBoxMatch.length >= 3) {\n    if (!Number.isNaN(parseInt(viewBoxMatch[1], 10))) {\n      width = parseInt(viewBoxMatch[1], 10);\n    }\n    if (!Number.isNaN(parseInt(viewBoxMatch[2], 10))) {\n      height = parseInt(viewBoxMatch[2], 10);\n    }\n  }\n\n  return path2marker(pathMatch[1], width, height);\n}\n", "const scale = ['year', 'month', 'day', 'hour', 'minute', 'second'] as const;\nconst masks = ['YYYY', 'MM', 'DD', 'hh', 'mm', 'ss'];\ntype TimeScale = (typeof scale)[number];\n\nexport function parseDate(date: Date | string) {\n  return date instanceof Date ? date : new Date(date);\n}\n\n/**\n * \n * @param maxUnit \n * @param minUnit \n */\nexport function getMask([maxUnit, minUnit]: [TimeScale, TimeScale]) {\n  const startIndex = scale.indexOf(maxUnit);\n  const endIndex = scale.indexOf(minUnit);\n  let format = '';\n  for (let i = startIndex; i <= endIndex; i += 1) {\n    format += masks[i];\n    if (i < endIndex) {\n      let connect = '-';\n      if (i === 2) connect = ' ';\n      else if (i > 2) connect = ':';\n      format += connect;\n    }\n  }\n  return format;\n}\n\n/**\n * \n */\nexport function formatTime(date: Date, mask: string) {\n  type TimeMapKeys = 'YYYY' | 'MM' | 'DD' | 'HH' | 'mm' | 'ss';\n  const timeMap: {\n    [keys in TimeMapKeys]: number;\n  } = {\n    YYYY: date.getFullYear(),\n    MM: date.getMonth() + 1,\n    DD: date.getDate(),\n    HH: date.getHours(),\n    mm: date.getMinutes(),\n    ss: date.getSeconds(),\n  };\n\n  let strftime = mask;\n  (Object.keys(timeMap) as TimeMapKeys[]).forEach((key) => {\n    const val = timeMap[key];\n    strftime = strftime.replace(key, key === 'YYYY' ? `${val}` : `${val}`.padStart(2, '0'));\n  });\n  return strftime;\n}\n\n/**\n * \n */\nexport function getTimeDiff(a: Date | string, b: Date | string) {\n  return parseDate(a).getTime() - parseDate(b).getTime();\n}\n\n/**\n * \n */\nexport function getTimeScale(a: Date | string, b: Date | string): TimeScale {\n  const [ma, mb] = [parseDate(a), parseDate(b)];\n  if (ma.getFullYear() !== mb.getFullYear()) return 'year';\n  if (ma.getMonth() !== mb.getMonth()) return 'month';\n  if (ma.getDay() !== mb.getDay()) return 'day';\n  if (ma.getHours() !== mb.getHours()) return 'hour';\n  if (ma.getMinutes() !== mb.getMinutes()) return 'minute';\n  return 'second';\n}\n\n/**\n * \n */\nexport function getTimeStart(date: Date, scale: TimeScale) {\n  const result = new Date(date);\n  const timeMap = {\n    year: (d: Date) => {\n      d.setMonth(0);\n      d.setHours(0, 0, 0, 0);\n    },\n    month: (d: Date) => {\n      d.setDate(1);\n      d.setHours(0, 0, 0, 0);\n    },\n    day: (d: Date) => d.setHours(0, 0, 0, 0),\n    hour: (d: Date) => d.setMinutes(0, 0, 0),\n    minute: (d: Date) => d.setSeconds(0, 0),\n    second: (d: Date) => d.setMilliseconds(0),\n  };\n  timeMap[scale](result);\n  return formatTime(result, getMask(['year', scale]));\n}\n", "import { DisplayObject } from '../shapes';\n\nexport function getTranslate(node: DisplayObject, x: string, y: string) {\n  const { width, height } = node.getBBox();\n  const [tx, ty] = [x, y].map((v, i) => {\n    return v.includes('%')\n      ? (parseFloat(v.match(/[+-]?([0-9]*[.])?[0-9]+/)?.[0] || '0') / 100) * (i === 0 ? width : height)\n      : v;\n  });\n  return [tx, ty];\n}\n\n/**\n * transform that support translate percent value\n */\nexport function percentTransform(node: DisplayObject, val: string) {\n  if (!val) return;\n  try {\n    const reg = /translate\\(([+-]*[\\d]+[%]*),[ ]*([+-]*[\\d]+[%]*)\\)/g;\n\n    const computedVal = val.replace(reg, (match, x, y) => `translate(${getTranslate(node, x, y)})`);\n    node.attr('transform', computedVal);\n  } catch (e) {\n    // do nothing\n  }\n}\n", "export function transpose(m: number[][]) {\n  return m[0]?.map((x, i) => m.map((x) => x[i])) || [];\n}\n", "export const replaceChildren = (el: HTMLElement, content: string | HTMLElement | HTMLElement[]) => {\n  if (content == null) {\n    el.innerHTML = '';\n    return;\n  }\n  if (el.replaceChildren) {\n    if (Array.isArray(content)) {\n      el.replaceChildren(...content);\n    } else {\n      el.replaceChildren(content);\n    }\n  } else {\n    el.innerHTML = '';\n    if (Array.isArray(content)) {\n      content.forEach((child) => el.appendChild(child));\n    } else {\n      el.appendChild(content as HTMLElement);\n    }\n  }\n};\n", "/**\n * @example\n * lt -> ['l', 't']\n * left-top -> ['l', 't']\n * inner -> i\n */\nexport function parsePosition(position: string): string[] {\n  if (!/\\S+-\\S+/g.test(position)) return position.length > 2 ? [position[0]] : position.split('');\n  return position.split('-').map((str) => {\n    return str[0];\n  });\n}\n", "// Utility to parse height from an HTML string, limited: `box-sizing: border-box`\nexport const parseHeightFromHTML = (html: string): number => {\n  const parser = new DOMParser();\n  const doc = parser.parseFromString(html, 'text/html');\n  const el = doc.body.firstElementChild;\n  console.log(el?.getClientRects(), 11);\n\n  if (!el) return 0;\n\n  const style = el.getAttribute('style') || '';\n  const rules = Object.fromEntries(\n    style\n      .split(';')\n      .map((r) => r.trim())\n      .filter((r) => r.includes(':'))\n      .map((r) => {\n        const [key, value] = r.split(':').map((s) => s.trim());\n        return [key.toLowerCase(), value];\n      })\n  );\n\n  const parsePx = (v: string): number => {\n    if (!v) return 0;\n    const match = v.match(/([\\d.]+)px/);\n    return match ? parseFloat(match[1]) : 0;\n  };\n\n  if (rules.height) {\n    return parsePx(rules.height);\n  }\n\n  const fontSize = parsePx(rules['font-size']) || 16;\n\n  // line-height\n  const lineHeight = rules['line-height'];\n  let baseHeight;\n  if (!lineHeight || lineHeight === 'normal') {\n    baseHeight = 1.2 * fontSize; //  normal  1.2\n  } else if (lineHeight.endsWith('px')) {\n    baseHeight = parsePx(lineHeight);\n  } else if (/^[\\d.]+$/.test(lineHeight)) {\n    baseHeight = parseFloat(lineHeight) * fontSize;\n  } else {\n    baseHeight = fontSize; // fallback\n  }\n\n  let paddingTop = parsePx(rules['padding-top']);\n  let paddingBottom = parsePx(rules['padding-bottom']);\n\n  if (rules.padding) {\n    const parts = rules.padding.split(/\\s+/).map(parsePx);\n    if (parts.length === 1) {\n      paddingTop = parts[0];\n      paddingBottom = parts[0];\n    } else if (parts.length === 2) {\n      paddingTop = parts[0];\n      paddingBottom = parts[0];\n    } else if (parts.length === 3) {\n      paddingTop = parts[0];\n      paddingBottom = parts[2];\n    } else if (parts.length === 4) {\n      paddingTop = parts[0];\n      paddingBottom = parts[2];\n    }\n  }\n\n  let borderTop = parsePx(rules['border-top-width']);\n  let borderBottom = parsePx(rules['border-bottom-width']);\n  if (rules.border) {\n    const match = rules.border.match(/([\\d.]+)px/);\n    if (match) {\n      borderTop = parseFloat(match[1]);\n      borderBottom = parseFloat(match[1]);\n    }\n  }\n  if (rules['border-width']) {\n    const parts = rules['border-width'].split(/\\s+/).map(parsePx);\n    if (parts.length === 1) {\n      borderTop = parts[0];\n      borderBottom = parts[0];\n    } else if (parts.length === 2) {\n      borderTop = parts[0];\n      borderBottom = parts[0];\n    } else if (parts.length === 3) {\n      borderTop = parts[0];\n      borderBottom = parts[2];\n    } else if (parts.length === 4) {\n      borderTop = parts[0];\n      borderBottom = parts[2];\n    }\n  }\n\n  return baseHeight + paddingTop + paddingBottom + borderTop + borderBottom;\n};\n", "/* global Keyframe */\nimport { isNil } from '@antv/util';\nimport type { DisplayObject } from '../shapes';\nimport type { Component } from '../core';\nimport { show, hide } from '../util';\nimport type { AnimationOption, AnimationResult, GenericAnimation, StandardAnimationOption } from './types';\n\nfunction isStandardAnimationOption(option: AnimationOption): option is StandardAnimationOption {\n  if (typeof option === 'boolean') return false;\n  return 'enter' in option && 'update' in option && 'exit' in option;\n}\n\nexport function parseAnimationOption(option: AnimationOption): StandardAnimationOption {\n  // option is false => all animation is false\n  // option is { enter: {}, update: {}, exit: {}, ...baseOption } =>\n  //    { enter: { ...enter, ...baseOption }, update: { ...update, ...baseOption }, exit: { ...exit, ...baseOption } }\n  // option is { enter: {}, update: {}, exit: {} } => option\n\n  if (!option) return { enter: false, update: false, exit: false };\n\n  const keys = ['enter', 'update', 'exit'] as const;\n  const baseOption = Object.fromEntries(Object.entries(option).filter(([k]) => !keys.includes(k as any)));\n\n  return Object.fromEntries(\n    keys.map((k) => {\n      if (isStandardAnimationOption(option)) {\n        if (option[k] === false) return [k, false];\n        return [k, { ...option[k], ...baseOption }];\n      }\n      return [k, baseOption];\n    })\n  );\n}\n\nexport function onAnimateFinished(animation: AnimationResult, callback: () => void) {\n  if (!animation) callback();\n  else animation.finished.then(callback);\n}\n\nexport function onAnimatesFinished(animations: AnimationResult[], callback: () => void) {\n  if (animations.length === 0) callback();\n  else Promise.all(animations.map((a) => a?.finished)).then(callback);\n}\n\nfunction attr(target: DisplayObject | Component<any>, value: Record<string, any>) {\n  if ('update' in target) target.update(value);\n  else target.attr(value);\n}\n\nexport function animate(target: DisplayObject | Component<any>, keyframes: Keyframe[], options: GenericAnimation) {\n  if (keyframes.length === 0) return null;\n  if (!options) {\n    const state = keyframes.slice(-1)[0];\n    attr(target, { style: state });\n    return null;\n  }\n  return target.animate(keyframes, options);\n}\n\nfunction identicalTextNode(source: DisplayObject, target: DisplayObject): boolean {\n  if (source.nodeName !== 'text' || target.nodeName !== 'text') return false;\n  if (source.attributes.text !== target.attributes.text) return false;\n  return true;\n}\n\n/**\n * transition source shape to target shape\n * @param source\n * @param target\n * @param options\n * @param after destroy or hide source shape after transition\n */\nexport function transitionShape(\n  source: DisplayObject,\n  target: DisplayObject,\n  options: GenericAnimation,\n  after: 'destroy' | 'hide' = 'destroy'\n) {\n  // If source and target are both text node and with same text,\n  // do not apply shape animation.\n  if (identicalTextNode(source, target)) {\n    source.remove();\n    return [null];\n  }\n\n  const afterTransition = () => {\n    if (after === 'destroy') source.destroy();\n    else if (after === 'hide') hide(source);\n    if (target.isVisible()) show(target);\n  };\n  if (!options) {\n    afterTransition();\n    return [null];\n  }\n  const { duration = 0, delay = 0 } = options;\n  const middle = Math.ceil(+duration / 2);\n  const offset = +duration / 4;\n\n  const {\n    center: [sx, sy],\n  } = source.getGeometryBounds();\n  const {\n    center: [ex, ey],\n  } = target.getGeometryBounds();\n  const [mx, my] = [(sx + ex) / 2 - sx, (sy + ey) / 2 - sy];\n\n  const { opacity: so = 1 } = source.style;\n  const { opacity: to = 1 } = target.style;\n\n  const st = source.style.transform || '';\n  const tt = target.style.transform || '';\n  // const st = source.style._transform || '';\n  // const tt = target.style._transform || '';\n\n  const sourceAnimation = source.animate(\n    [\n      { opacity: so, transform: `translate(0, 0) ${st}` },\n      { opacity: 0, transform: `translate(${mx}, ${my}) ${st}` },\n    ],\n    {\n      fill: 'both',\n      ...options,\n      duration: delay + middle + offset,\n    }\n  );\n  const targetAnimation = target.animate(\n    [\n      { opacity: 0, transform: `translate(${-mx}, ${-my}) ${tt}`, offset: 0.01 },\n      { opacity: to, transform: `translate(0, 0) ${tt}` },\n    ],\n    {\n      fill: 'both',\n      ...options,\n      duration: middle + offset,\n      delay: delay + middle - offset,\n    }\n  );\n\n  onAnimateFinished(targetAnimation, afterTransition);\n  return [sourceAnimation, targetAnimation];\n}\n\n/**\n * execute transition animation on element\n * @description in the current stage, only support the following properties:\n * x, y, width, height, opacity, fill, stroke, lineWidth, radius\n * @param target element to be animated\n * @param state target properties or element\n * @param options transition options\n * @param animate whether to animate\n * @returns transition instance\n */\nexport function transition(\n  target: DisplayObject | Component<any>,\n  state: Record<string, any> | (DisplayObject | Component<any>),\n  options: GenericAnimation\n) {\n  const from: typeof state = {};\n  const to: typeof state = {};\n  Object.entries(state).forEach(([key, tarStyle]) => {\n    if (!isNil(tarStyle)) {\n      //  CSS attr / getAttribute \n      //  x/y 0 \n      const currStyle = target.style[key] || target.parsedStyle[key] || 0; // x/y\n      if (currStyle !== tarStyle) {\n        from[key] = currStyle;\n        to[key] = tarStyle;\n      }\n    }\n  });\n\n  if (!options) {\n    attr(target, to);\n    return null;\n  }\n\n  return animate(target, [from, to], { fill: 'both', ...options });\n}\n", "import type { DisplayObject } from '../shapes';\nimport { transition } from './utils';\nimport type { GenericAnimation } from '.';\n\nexport default function (element: DisplayObject, options: GenericAnimation) {\n  if (!element.style.opacity) element.style.opacity = 1;\n  return transition(element, { opacity: 0 }, options);\n}\n", "import { CustomElement, Group } from '../shapes';\nimport type { GenericAnimation, AnimationResult } from '../animation';\nimport { createOffscreenGroup, deepAssign, visibility } from '../util';\nimport type { ComponentOptions } from './types';\n\nfunction applyVisibility() {\n  visibility(this, this.attributes.visibility !== 'hidden');\n}\n\nexport abstract class Component<T extends Record<string, any>> extends CustomElement<Required<T>> {\n  protected _defaultOptions: Partial<T>;\n\n  private _offscreen!: Group;\n\n  protected get offscreenGroup() {\n    if (!this._offscreen) this._offscreen = createOffscreenGroup(this);\n    return this._offscreen;\n  }\n\n  public initialized = false;\n\n  public get defaultOptions() {\n    return this._defaultOptions;\n  }\n\n  constructor(options: ComponentOptions<Partial<T>>, defaultStyleProps: Partial<T> = {}) {\n    super(deepAssign({}, { style: defaultStyleProps }, options));\n    this._defaultOptions = defaultStyleProps;\n  }\n\n  connectedCallback() {\n    this.render(this.attributes as Required<T>, this);\n    this.bindEvents(this.attributes, this);\n    this.initialized = true;\n  }\n\n  disconnectedCallback(): void {\n    this._offscreen?.destroy();\n  }\n\n  attributeChangedCallback<Key extends keyof T>(name: Key): void {\n    if (name === 'visibility') {\n      applyVisibility.call(this);\n    }\n  }\n\n  public update(attr?: Partial<T>, animate?: GenericAnimation) {\n    this.attr(deepAssign({}, this.attributes, attr || {}));\n    return this.render?.(this.attributes as Required<T>, this, animate);\n  }\n\n  public clear() {\n    this.removeChildren();\n  }\n\n  public abstract render(\n    attributes: Required<T>,\n    container: Group,\n    animate?: GenericAnimation\n  ): void | AnimationResult[];\n\n  public bindEvents(attributes: T, container: Group): void {}\n\n  protected getSubShapeStyle(attributes: T): T {\n    const { x, y, transform, transformOrigin, class: _class, className, zIndex, ...style } = attributes;\n    return style as T;\n  }\n}\n", "export const CLASSNAME_SUFFIX_MAP = {\n  // group\n  gridGroup: 'grid-group',\n  mainGroup: 'main-group',\n  lineGroup: 'line-group',\n  tickGroup: 'tick-group',\n  labelGroup: 'label-group',\n  titleGroup: 'title-group',\n\n  // content\n  grid: 'grid',\n  line: 'line',\n  lineFirst: 'line-first',\n  lineSecond: 'line-second',\n  tick: 'tick',\n  tickItem: 'tick-item',\n  label: 'label',\n  labelItem: 'label-item',\n  title: 'title',\n} as const;\n\nexport type ClassNameSuffix = keyof typeof CLASSNAME_SUFFIX_MAP;\n", "import { deepMix } from '@antv/util';\nimport { Path } from '../../shapes';\nimport { classNames } from '../../util';\nimport type { AxisBaseStyleProps } from './types';\n\nimport { CLASSNAME_SUFFIX_MAP } from './classname-map';\n\nexport const AXIS_BASE_DEFAULT_ATTR: Partial<AxisBaseStyleProps> = {\n  data: [],\n  animate: {\n    enter: false,\n    update: {\n      duration: 100,\n      easing: 'ease-in-out-sine',\n      fill: 'both',\n    },\n    exit: {\n      duration: 100,\n      fill: 'both',\n    },\n  },\n  showArrow: true,\n  showGrid: true,\n  showLabel: true,\n  showLine: true,\n  showTick: true,\n  showTitle: true,\n  showTrunc: false,\n  dataThreshold: 100,\n  lineLineWidth: 1,\n  lineStroke: 'black',\n  crossPadding: 10,\n  titleFill: 'black',\n  titleFontSize: 12,\n  titlePosition: 'lb',\n  titleSpacing: 0,\n  titleTextAlign: 'center',\n  titleTextBaseline: 'middle',\n  lineArrow: () =>\n    new Path({\n      style: {\n        d: [['M', 10, 10], ['L', -10, 0], ['L', 10, -10], ['L', 0, 0], ['L', 10, 10], ['Z']],\n        fill: 'black',\n        transformOrigin: 'center',\n      },\n    }),\n  labelAlign: 'parallel',\n  labelDirection: 'positive',\n  labelFontSize: 12,\n  labelSpacing: 0,\n  gridConnect: 'line',\n  gridControlAngles: [],\n  gridDirection: 'positive',\n  gridLength: 0,\n  gridType: 'segment',\n  lineArrowOffset: 15,\n  lineArrowSize: 10,\n  tickDirection: 'positive',\n  tickLength: 5,\n  tickLineWidth: 1,\n  tickStroke: 'black',\n  labelOverlap: [\n    // { type: 'rotate', optionalAngles: [0, 45, 90] },\n    // { type: 'ellipsis', suffix: '...', minLength: 14, maxLength: 160 },\n    // { type: 'hide' },\n  ],\n};\n\nexport const ARC_DEFAULT_OPTIONS = deepMix({}, AXIS_BASE_DEFAULT_ATTR, {\n  style: {\n    type: 'arc',\n  },\n});\n\nexport const HELIX_DEFAULT_OPTIONS = deepMix({}, AXIS_BASE_DEFAULT_ATTR, {\n  style: {},\n});\n\nexport const CLASS_NAMES = classNames(\n  {\n    mainGroup: CLASSNAME_SUFFIX_MAP.mainGroup,\n    gridGroup: CLASSNAME_SUFFIX_MAP.gridGroup,\n    grid: CLASSNAME_SUFFIX_MAP.grid,\n    lineGroup: CLASSNAME_SUFFIX_MAP.lineGroup,\n    line: CLASSNAME_SUFFIX_MAP.line,\n    tickGroup: CLASSNAME_SUFFIX_MAP.tickGroup,\n    tick: CLASSNAME_SUFFIX_MAP.tick,\n    tickItem: CLASSNAME_SUFFIX_MAP.tickItem,\n    labelGroup: CLASSNAME_SUFFIX_MAP.labelGroup,\n    label: CLASSNAME_SUFFIX_MAP.label,\n    labelItem: CLASSNAME_SUFFIX_MAP.labelItem,\n    titleGroup: CLASSNAME_SUFFIX_MAP.titleGroup,\n    title: CLASSNAME_SUFFIX_MAP.title,\n    lineFirst: CLASSNAME_SUFFIX_MAP.lineFirst,\n    lineSecond: CLASSNAME_SUFFIX_MAP.lineSecond,\n  },\n  'axis'\n);\n", "import { fadeOut, onAnimateFinished, transition } from '../../animation';\nimport { Component } from '../../core';\nimport type { Group } from '../../shapes';\nimport type { Point } from '../../types';\nimport type { PathCommand, Selection } from '../../util';\nimport { classNames, distance, getCallbackValue, getPrimitiveAttributes, select } from '../../util';\nimport type { GridOptions, GridStyle, GridStyleProps } from './types';\n\nexport type { GridOptions, GridStyleProps };\n\nconst CLASS_NAMES = classNames(\n  {\n    lineGroup: 'line-group',\n    line: 'line',\n    regionGroup: 'region-group',\n    region: 'region',\n  },\n  'grid'\n);\n\nfunction getStraightPath(points: Point[]) {\n  return points.reduce((acc, curr, idx) => {\n    acc.push([idx === 0 ? 'M' : 'L', ...curr]);\n    return acc;\n  }, [] as PathCommand[]);\n}\n\nfunction getSurroundPath(points: Point[], attr: GridStyleProps, reversed?: boolean) {\n  const { connect = 'line', center } = attr;\n  if (connect === 'line') return getStraightPath(points);\n  if (!center) return [];\n  const radius = distance(points[0], center);\n  const sweepFlag = reversed ? 0 : 1;\n  return points.reduce((r, p, idx) => {\n    if (idx === 0) r.push(['M', ...p]);\n    else r.push(['A', radius, radius, 0, 0, sweepFlag, ...p]);\n    return r;\n  }, [] as PathCommand[]);\n}\n\nfunction getLinePath(points: Point[], cfg: GridStyleProps, reversed?: boolean) {\n  if (cfg.type === 'surround') return getSurroundPath(points, cfg, reversed);\n  return getStraightPath(points);\n}\n\nfunction connectPaths(from: Point[], to: Point[], cfg: GridStyleProps) {\n  const { type, connect, center, closed } = cfg;\n  const closeFlag: PathCommand[] = closed ? [['Z']] : [];\n  const [path1, path2] = [getLinePath(from, cfg), getLinePath(to.slice().reverse(), cfg, true)];\n  const [startOfFrom, endOfTo] = [from[0], to.slice(-1)[0]];\n  const createPath = (insertA: PathCommand[], insertB: PathCommand[]): PathCommand[] =>\n    [path1, insertA, path2, insertB, closeFlag].flat();\n\n  if (connect === 'line' || type === 'surround') {\n    return createPath([['L', ...endOfTo]], [['L', ...startOfFrom]]);\n  }\n  if (!center) throw new Error('Arc grid need to specified center');\n\n  const [raduis1, radius2] = [distance(endOfTo, center), distance(startOfFrom, center)];\n  return createPath(\n    [\n      ['A', raduis1, raduis1, 0, 0, 1, ...endOfTo],\n      ['L', ...endOfTo],\n    ],\n    [\n      ['A', radius2, radius2, 0, 0, 0, ...startOfFrom],\n      ['L', ...startOfFrom],\n    ]\n  );\n}\n\nfunction renderGridLine(\n  container: Selection<Group>,\n  data: GridStyleProps['data'],\n  attr: GridStyleProps,\n  style: GridStyle\n) {\n  const { animate, isBillboard } = attr;\n  const lines = data.map((item, idx) => {\n    return {\n      id: item.id || `grid-line-${idx}`,\n      d: getLinePath(item.points, attr),\n    };\n  });\n  return container\n    .selectAll(CLASS_NAMES.line.class)\n    .data(lines, (d) => d.id)\n    .join(\n      (enter) =>\n        enter.append('path').each(function (datum, index) {\n          const lineStyle = getCallbackValue(\n            getPrimitiveAttributes({\n              d: datum.d,\n              ...style,\n            }),\n            [datum, index, lines]\n          );\n          this.attr({\n            class: CLASS_NAMES.line.name,\n            stroke: '#D9D9D9',\n            lineWidth: 1,\n            lineDash: [4, 4],\n            isBillboard,\n            ...lineStyle,\n          });\n        }),\n      (update) =>\n        update.transition(function (datum, index) {\n          const lineStyle = getCallbackValue(\n            getPrimitiveAttributes({\n              d: datum.d,\n              ...style,\n            }),\n            [datum, index, lines]\n          );\n          return transition(this, lineStyle, animate.update);\n        }),\n      (exit) =>\n        exit.transition(function () {\n          const animation = fadeOut(this, animate.exit);\n          onAnimateFinished(animation, () => this.remove());\n          return animation;\n        })\n    )\n    .transitions();\n}\n\nfunction renderAlternateRegion(container: Selection<Group>, data: GridStyleProps['data'], style: GridStyleProps) {\n  const { animate, connect, areaFill } = style;\n  if (data.length < 2 || !areaFill || !connect) return [];\n  const colors: string[] = Array.isArray(areaFill) ? areaFill : [areaFill, 'transparent'];\n  const getColor = (idx: number) => colors[idx % colors.length];\n  const regions: any[] = [];\n  for (let idx = 0; idx < data.length - 1; idx++) {\n    const [prev, curr] = [data[idx].points, data[idx + 1].points];\n    const path = connectPaths(prev, curr, style);\n    regions.push({ d: path, fill: getColor(idx) });\n  }\n\n  return container\n    .selectAll(CLASS_NAMES.region.class)\n    .data(regions, (_, i) => i)\n    .join(\n      (enter) =>\n        enter\n          .append('path')\n          .each(function (datum, index) {\n            const regionStyle = getCallbackValue(datum, [datum, index, regions]);\n            this.attr(regionStyle);\n          })\n          .attr('className', CLASS_NAMES.region.name),\n      (update) =>\n        update.transition(function (datum, index) {\n          const regionStyle = getCallbackValue(datum, [datum, index, regions]);\n          return transition(this, regionStyle, animate.update);\n        }),\n      (exit) =>\n        exit.transition(function () {\n          const animation = fadeOut(this, animate.exit);\n          onAnimateFinished(animation, () => this.remove());\n          return animation;\n        })\n    )\n    .transitions();\n}\n\nfunction getData(attr: GridStyleProps) {\n  const { data = [], closed } = attr;\n  if (!closed) return data;\n  return data.map((datum) => {\n    const { points } = datum;\n    const [start] = points;\n    return { ...datum, points: [...points, start] };\n  });\n}\n\nexport class Grid extends Component<GridStyleProps> {\n  render(attributes: GridStyleProps, container: Group) {\n    // @ts-ignore do no passBy className\n    const { type, center, areaFill, closed, ...style } = attributes;\n    const data = getData(attributes);\n    const lineGroup = select(container).maybeAppendByClassName(CLASS_NAMES.lineGroup, 'g');\n    const regionGroup = select(container).maybeAppendByClassName(CLASS_NAMES.regionGroup, 'g');\n    const lineTransitions = renderGridLine(lineGroup, data, attributes, style);\n    const reigionTransitions = renderAlternateRegion(regionGroup, data, attributes);\n    return [...lineTransitions, ...reigionTransitions];\n  }\n}\n", "import { isFunction } from '@antv/util';\nimport type { CallableObject, Vector2 } from '../../../types';\nimport { degToRad, getCallbackValue, normalize, vertical } from '../../../util';\nimport type {\n  AxisDatumCP,\n  AxisStyleProps,\n  Direction,\n  RequiredArcAxisStyleProps,\n  RequiredAxisStyleProps,\n} from '../types';\n\nexport function getCallbackStyle<T extends { [keys: string]: any }, P extends Array<any> = []>(\n  style: CallableObject<T, AxisDatumCP<P>>,\n  params: AxisDatumCP<P>\n) {\n  return Object.fromEntries(\n    Object.entries(style).map(([key, val]) => {\n      return [key, getCallbackValue(val as any, params)];\n    })\n  );\n}\n\nexport function baseDependencies(attr: Required<AxisStyleProps>): any[] {\n  if (attr.type === 'linear') {\n    const { startPos, endPos } = attr;\n    return [...startPos, ...endPos];\n  }\n  const { startAngle, endAngle, center, radius } = attr;\n  return [startAngle, endAngle, ...center, radius];\n}\n\nexport function filterExec<T>(data: T[], filter?: (...args: any) => boolean): T[] {\n  return !!filter && isFunction(filter) ? data.filter(filter) : data;\n}\n\n/** ---- to avoid cycle dependency */\n\nexport function getLineAngle(value: number, attr: RequiredArcAxisStyleProps) {\n  const { startAngle, endAngle } = attr;\n  return (endAngle - startAngle) * value + startAngle;\n}\n\nexport function getLineTangentVector(value: number, attr: RequiredAxisStyleProps) {\n  if (attr.type === 'linear') {\n    const {\n      startPos: [startX, startY],\n      endPos: [endX, endY],\n    } = attr;\n    const [dx, dy] = [endX - startX, endY - startY];\n    return normalize([dx, dy]);\n  }\n  const angle = degToRad(getLineAngle(value, attr));\n  return [-Math.sin(angle), Math.cos(angle)] as Vector2;\n}\n\nexport function getDirectionVector(value: number, direction: Direction, attr: RequiredAxisStyleProps): Vector2 {\n  const tangentVector = getLineTangentVector(value, attr);\n  return vertical(tangentVector, direction !== 'positive') as Vector2;\n}\n\nexport function getLabelVector(value: number, attr: Required<AxisStyleProps>) {\n  return getDirectionVector(value, attr.labelDirection, attr);\n}\n", "/**\n * Generate axis className with optional prefix\n * @param baseClassName Base className (e.g., 'axis-line')\n * @param suffix Suffix (e.g., 'line')\n * @param classNamePrefix User-defined prefix (e.g., 'g2-')\n * @returns Concatenated className\n *\n * @example\n * getAxisClassName('axis-line', 'line', 'g2-')\n * // => 'axis-line g2-axis-line'\n *\n * getAxisClassName('axis-line', 'line', undefined)\n * // => 'axis-line'\n */\nexport function getAxisClassName(baseClassName: string, suffix: string, classNamePrefix?: string): string {\n  if (!classNamePrefix) return baseClassName;\n  return `${baseClassName} ${classNamePrefix}axis-${suffix}`;\n}\n\n/**\n * Extract className from component attributes\n * @param attributes Component attributes\n * @param baseClassName Base className object\n * @param suffix Suffix string\n * @returns Concatenated className\n */\nexport function getClassNameFromAttrs(\n  attributes: { classNamePrefix?: string },\n  baseClassName: { name: string },\n  suffix: string\n): string {\n  const { classNamePrefix = '' } = attributes;\n  return getAxisClassName(baseClassName.name, suffix, classNamePrefix);\n}\n\n/**\n * Apply full className (with prefix) to a selection element\n * This is a helper to implement the two-step pattern:\n * 1. Create element with base className\n * 2. Apply full className with prefix\n *\n * @param selection The selection to apply className to\n * @param baseClassName Base className object from CLASS_NAMES\n * @param suffix Suffix from CLASSNAME_SUFFIX_MAP\n * @param classNamePrefix Optional user-defined prefix\n * @returns The selection for chaining\n *\n * @example\n * const element = container.maybeAppendByClassName(CLASS_NAMES.grid, 'g');\n * applyClassName(element, CLASS_NAMES.grid, CLASSNAME_SUFFIX_MAP.grid, classNamePrefix);\n */\nexport function applyClassName(\n  selection: any,\n  baseClassName: { name: string },\n  suffix: string,\n  classNamePrefix?: string\n): any {\n  if (classNamePrefix) {\n    selection.attr('className', getAxisClassName(baseClassName.name, suffix, classNamePrefix));\n  }\n  return selection;\n}\n", "import { get } from '@antv/util';\nimport type { AnimationResult, StandardAnimationOption } from '../../../animation';\nimport { transition } from '../../../animation';\nimport type { DisplayObject, Line } from '../../../shapes';\nimport type { Point, Vector2 } from '../../../types';\nimport {\n  Selection,\n  degToRad,\n  keyframeInterpolate,\n  omit,\n  renderExtDo,\n  scaleToPixel,\n  subStyleProps,\n} from '../../../util';\nimport { CLASS_NAMES } from '../constant';\nimport type { RequiredArcAxisStyleProps, RequiredAxisStyleProps, RequiredLinearAxisStyleProps } from '../types';\nimport { getLineAngle, getLineTangentVector } from './utils';\nimport { applyClassName, getAxisClassName } from '../utils/classname';\nimport { CLASSNAME_SUFFIX_MAP } from '../classname-map';\n\ntype LineDatum = {\n  line: [Vector2, Vector2];\n  className: string;\n};\n\nexport function getLinearValuePos(value: number, attr: RequiredLinearAxisStyleProps): Vector2 {\n  const {\n    startPos: [sx, sy],\n    endPos: [ex, ey],\n  } = attr;\n  const [dx, dy] = [ex - sx, ey - sy];\n  return [sx + dx * value, sy + dy * value];\n}\n\nexport function getArcValuePos(value: number, attr: RequiredArcAxisStyleProps): Vector2 {\n  const {\n    radius,\n    center: [cx, cy],\n  } = attr;\n  const angle = degToRad(getLineAngle(value, attr));\n  return [cx + radius * Math.cos(angle), cy + radius * Math.sin(angle)];\n}\n\nexport function getValuePos(value: number, attr: RequiredAxisStyleProps) {\n  if (attr.type === 'linear') return getLinearValuePos(value, attr);\n  return getArcValuePos(value, attr);\n}\n\nexport function isAxisHorizontal(attr: RequiredLinearAxisStyleProps): boolean {\n  return getLineTangentVector(0, attr)[1] === 0;\n}\n\nexport function isAxisVertical(attr: RequiredLinearAxisStyleProps): boolean {\n  return getLineTangentVector(0, attr)[0] === 0;\n}\n\nfunction isCircle(startAngle: number, endAngle: number) {\n  return endAngle - startAngle === 360;\n}\n\nfunction getArcPath(startAngle: number, endAngle: number, cx: number, cy: number, radius: number) {\n  const diffAngle = endAngle - startAngle;\n  const [rx, ry] = [radius, radius];\n  const [startAngleRadians, endAngleRadians] = [degToRad(startAngle), degToRad(endAngle)];\n  const getPosByAngle = (angle: number) => [cx + radius * Math.cos(angle), cy + radius * Math.sin(angle)];\n\n  const [x1, y1] = getPosByAngle(startAngleRadians);\n  const [x2, y2] = getPosByAngle(endAngleRadians);\n\n  if (isCircle(startAngle, endAngle)) {\n    const middleAngleRadians = (endAngleRadians + startAngleRadians) / 2;\n    const [xm, ym] = getPosByAngle(middleAngleRadians);\n    return [\n      ['M', x1, y1],\n      ['A', rx, ry, 0, 1, 0, xm, ym],\n      ['A', rx, ry, 0, 1, 0, x2, y2],\n    ];\n  }\n\n  // \n  const large = diffAngle > 180 ? 1 : 0;\n  // 1- 0-\n  const sweep = startAngle > endAngle ? 0 : 1;\n  const isClosePath = false;\n\n  return isClosePath\n    ? `M${cx},${cy},L${x1},${y1},A${rx},${ry},0,${large},${sweep},${x2},${y2},L${cx},${cy}`\n    : `M${x1},${y1},A${rx},${ry},0,${large},${sweep},${x2},${y2}`;\n}\n\nfunction getArcAttr(arc: DisplayObject) {\n  const { startAngle, endAngle, center, radius } = arc.attributes;\n  return [startAngle, endAngle, ...center, radius];\n}\n\nfunction renderArc(\n  container: Selection,\n  attr: RequiredArcAxisStyleProps,\n  style: RequiredArcAxisStyleProps,\n  animate: StandardAnimationOption\n) {\n  const { startAngle, endAngle, center, radius, classNamePrefix } = attr;\n\n  return container\n    .selectAll(CLASS_NAMES.line.class)\n    .data([{ d: getArcPath(startAngle, endAngle, ...center, radius) }], (d, i) => i)\n    .join(\n      (enter) => {\n        const line = enter\n          .append('path')\n          .attr('className', CLASS_NAMES.line.name)\n          .styles(attr)\n          .styles({ d: (d: any) => d.d });\n        applyClassName(line, CLASS_NAMES.line, CLASSNAME_SUFFIX_MAP.line, classNamePrefix);\n        return line;\n      },\n      (update) =>\n        update\n          .transition(function () {\n            const animation = keyframeInterpolate(\n              this,\n              getArcAttr(this),\n              [startAngle, endAngle, ...center, radius],\n              animate.update\n            );\n            if (animation) {\n              const layout = () => {\n                const data = get(this.attributes, '__keyframe_data__') as Parameters<typeof getArcPath>;\n                this.style.d = getArcPath(...data);\n              };\n              animation.onframe = layout;\n              animation.onfinish = layout;\n            }\n            return animation;\n          })\n          .styles(attr),\n      (exit) => exit.remove()\n    )\n    .styles(style)\n    .transitions();\n}\n\nfunction renderTruncation<T>(container: Selection, { truncRange, truncShape, lineExtension }: RequiredAxisStyleProps) {\n  // TODO\n}\n\nfunction extendLine(startPos: Point, endPos: Point, range: [number, number] = [0, 0]) {\n  const [[x1, y1], [x2, y2], [l1, l2]] = [startPos, endPos, range];\n  const [x, y] = [x2 - x1, y2 - y1];\n  const L = Math.sqrt(x ** 2 + y ** 2);\n  const [s1, s2] = [-l1 / L, l2 / L];\n  return [s1 * x, s1 * y, s2 * x, s2 * y];\n}\n\nfunction getLinePath(points: [Vector2, Vector2]) {\n  const [[x1, y1], [x2, y2]] = points;\n  return { x1, y1, x2, y2 };\n}\n\nfunction renderLinear(\n  container: Selection,\n  attr: RequiredLinearAxisStyleProps,\n  style: RequiredLinearAxisStyleProps,\n  animate: StandardAnimationOption\n) {\n  const { showTrunc, startPos, endPos, truncRange, lineExtension, classNamePrefix } = attr;\n  const [[x1, y1], [x2, y2]] = [startPos, endPos];\n  const [ox1, oy1, ox2, oy2] = lineExtension ? extendLine(startPos, endPos, lineExtension) : new Array(4).fill(0);\n  const renderLine = (data: LineDatum[]) => {\n    return container\n      .selectAll(CLASS_NAMES.line.class)\n      .data(data, (d, i) => i)\n      .join(\n        (enter) => {\n          const lines = enter\n            .append('line')\n            .styles(style)\n            .transition(function (d: LineDatum) {\n              return transition(this, getLinePath(d.line), false);\n            });\n          // Set className with appropriate logic for line elements\n          lines.attr('className', (d: LineDatum) => {\n            if (!classNamePrefix) {\n              return `${CLASS_NAMES.line.name} ${d.className}`;\n            }\n            const baseLineClassName = getAxisClassName(\n              CLASS_NAMES.line.name,\n              CLASSNAME_SUFFIX_MAP.line,\n              classNamePrefix\n            );\n            if (d.className === CLASS_NAMES.lineFirst.name) {\n              const specificClassName = getAxisClassName(\n                CLASS_NAMES.lineFirst.name,\n                CLASSNAME_SUFFIX_MAP.lineFirst,\n                classNamePrefix\n              );\n              return `${baseLineClassName} ${specificClassName}`;\n            }\n            if (d.className === CLASS_NAMES.lineSecond.name) {\n              const specificClassName = getAxisClassName(\n                CLASS_NAMES.lineSecond.name,\n                CLASSNAME_SUFFIX_MAP.lineSecond,\n                classNamePrefix\n              );\n              return `${baseLineClassName} ${specificClassName}`;\n            }\n            return baseLineClassName;\n          });\n          return lines;\n        },\n        (update) =>\n          update.styles(style).transition(function ({ line }: LineDatum) {\n            return transition(this, getLinePath(line), animate.update);\n          }),\n        (exit) => exit.remove()\n      )\n      .transitions();\n  };\n\n  if (!showTrunc || !truncRange) {\n    return renderLine([\n      {\n        line: [\n          [x1 + ox1, y1 + oy1],\n          [x2 + ox2, y2 + oy2],\n        ],\n        className: CLASS_NAMES.line.name,\n      },\n    ]);\n  }\n  const [r1, r2] = truncRange;\n  const dx = x2 - x1;\n  const dy = y2 - y1;\n  const [x3, y3] = [x1 + dx * r1, y1 + dy * r1];\n  const [x4, y4] = [x1 + dx * r2, y1 + dy * r2];\n  const animation = renderLine([\n    {\n      line: [\n        [x1 + ox1, y1 + oy1],\n        [x3, y3],\n      ],\n      className: CLASS_NAMES.lineFirst.name,\n    },\n    {\n      line: [\n        [x4, y4],\n        [x2 + ox2, y2 + oy2],\n      ],\n      className: CLASS_NAMES.lineSecond.name,\n    },\n  ]);\n  renderTruncation(container, attr);\n  return animation;\n}\n\nfunction renderAxisArrow(\n  container: Selection,\n  type: 'linear' | 'arc',\n  attr: RequiredAxisStyleProps,\n  style: RequiredAxisStyleProps\n) {\n  const { showArrow, showTrunc, lineArrow, lineArrowOffset, lineArrowSize } = attr;\n\n  let shapeToAddArrow: Selection;\n  if (type === 'arc') {\n    shapeToAddArrow = container.select(CLASS_NAMES.line.class);\n  } else if (showTrunc) {\n    shapeToAddArrow = container.select(CLASS_NAMES.lineSecond.class);\n  } else {\n    shapeToAddArrow = container.select(CLASS_NAMES.line.class);\n  }\n  if (!showArrow || !lineArrow || (attr.type === 'arc' && isCircle(attr.startAngle, attr.endAngle))) {\n    const node = shapeToAddArrow.node<Line>();\n    if (node) node.style.markerEnd = undefined;\n    return;\n  }\n  const arrow = renderExtDo(lineArrow);\n  arrow.attr(style);\n  scaleToPixel(arrow, lineArrowSize!, true);\n  shapeToAddArrow.style('markerEnd', arrow).style('markerEndOffset', -lineArrowOffset);\n}\n\nexport function renderAxisLine(container: Selection, attr: RequiredAxisStyleProps, animate: StandardAnimationOption) {\n  const { type } = attr;\n  let animation: AnimationResult[];\n  const style = subStyleProps<RequiredAxisStyleProps>(attr, 'line');\n\n  if (type === 'linear')\n    animation = renderLinear(\n      container,\n      attr as RequiredLinearAxisStyleProps,\n      omit(style, 'arrow') as RequiredLinearAxisStyleProps,\n      animate\n    );\n  else\n    animation = renderArc(\n      container,\n      attr as RequiredArcAxisStyleProps,\n      omit(style, 'arrow') as RequiredArcAxisStyleProps,\n      animate\n    );\n  renderAxisArrow(container, type, attr, style);\n  return animation;\n}\n", "import { isFunction } from '@antv/util';\nimport { StandardAnimationOption } from '../../../animation';\nimport type { Point } from '../../../types';\nimport { degToRad, getCallbackValue, scale, Selection, subStyleProps } from '../../../util';\nimport { Grid, GridStyleProps } from '../../grid';\nimport { CLASS_NAMES } from '../constant';\nimport type { AxisDatum, AxisGridStyleProps, AxisStyleProps } from '../types';\nimport { getValuePos } from './line';\nimport { filterExec, getDirectionVector } from './utils';\nimport { applyClassName } from '../utils/classname';\nimport { CLASSNAME_SUFFIX_MAP } from '../classname-map';\n\nfunction getGridVector(value: number, attr: Required<AxisStyleProps>) {\n  return getDirectionVector(value, attr.gridDirection, attr);\n}\n\nfunction getGridCenter(attr: Required<AxisStyleProps>) {\n  const { type, gridCenter } = attr;\n  if (type === 'linear') return gridCenter;\n  return gridCenter || attr.center;\n}\n\nfunction renderStraight(data: AxisDatum[], attr: Required<AxisStyleProps>) {\n  const { gridLength } = attr;\n  return data.map(({ value }, index) => {\n    const [x, y] = getValuePos(value, attr);\n    const [dx, dy] = scale(getGridVector(value, attr), gridLength);\n    return {\n      id: index,\n      points: [\n        [x, y],\n        [x + dx, y + dy],\n      ] as Point[],\n    };\n  });\n}\n\nfunction renderSurround(data: AxisDatum[], attr: Required<AxisStyleProps>) {\n  const controlAngles = attr.gridControlAngles;\n  const center = getGridCenter(attr);\n  if (!center) throw new Error('grid center is not provide');\n  if (data.length < 2) throw new Error('Invalid grid data');\n  if (!controlAngles || controlAngles.length === 0) throw new Error('Invalid gridControlAngles');\n\n  const [cx, cy] = center;\n  return data.map(({ value }, index) => {\n    const [sx, sy] = getValuePos(value, attr);\n    const [dx, dy] = [sx - cx, sy - cy];\n    const points: Point[] = [];\n    controlAngles.forEach((angle: number) => {\n      const angleInRad = degToRad(angle);\n      const [cosa, sina] = [Math.cos(angleInRad), Math.sin(angleInRad)];\n      const x = dx * cosa - dy * sina + cx;\n      const y = dx * sina + dy * cosa + cy;\n      points.push([x, y]);\n    });\n\n    return { points, id: index };\n  });\n}\n\nexport function renderGrid(\n  container: Selection,\n  data: AxisDatum[],\n  attr: Required<AxisStyleProps>,\n  animate: StandardAnimationOption\n) {\n  const { classNamePrefix } = attr;\n  const gridAttr = subStyleProps<Required<AxisGridStyleProps>>(attr, 'grid');\n  const { type, areaFill } = gridAttr;\n  const center = getGridCenter(attr);\n  const finalData = filterExec(data, attr.gridFilter);\n  const gridItems = type === 'segment' ? renderStraight(finalData, attr) : renderSurround(finalData, attr);\n\n  const style: Required<GridStyleProps> = {\n    ...gridAttr,\n    center,\n    areaFill: isFunction(areaFill)\n      ? finalData.map((datum, index) => getCallbackValue(areaFill, [datum, index, finalData]))\n      : areaFill,\n    animate,\n    data: gridItems,\n  };\n\n  return container\n    .selectAll(CLASS_NAMES.grid.class)\n    .data([1])\n    .join(\n      (enter) => {\n        const grid = enter.append(() => new Grid({ style })).attr('className', CLASS_NAMES.grid.name);\n        applyClassName(grid, CLASS_NAMES.grid, CLASSNAME_SUFFIX_MAP.grid, classNamePrefix);\n        return grid;\n      },\n      (update) =>\n        update.transition(function () {\n          return this.update(style);\n        }),\n      (exit) => exit.remove()\n    )\n    .transitions();\n}\n", "import type { DisplayObject } from '../../../shapes';\nimport type { Point } from '../../../types';\nimport type { SeriesAttr } from '../../../util';\nimport { degToRad, parseSeriesAttr, textOf } from '../../../util';\n\nexport class Bounds {\n  public x1!: number;\n\n  public y1!: number;\n\n  public x2!: number;\n\n  public y2!: number;\n\n  constructor(x1: number, y1: number, x2: number, y2: number) {\n    this.set(x1, y1, x2, y2);\n  }\n\n  public get left() {\n    return this.x1;\n  }\n\n  public get top() {\n    return this.y1;\n  }\n\n  public get right() {\n    return this.x2;\n  }\n\n  public get bottom() {\n    return this.y2;\n  }\n\n  public get width() {\n    return this.defined('x2') && this.defined('x1') ? this.x2 - this.x1 : undefined;\n  }\n\n  public get height() {\n    return this.defined('y2') && this.defined('y1') ? this.y2 - this.y1 : undefined;\n  }\n\n  rotatedPoints(radian: number, x: number, y: number) {\n    const { x1, y1, x2, y2 } = this;\n    const cos = Math.cos(radian);\n    const sin = Math.sin(radian);\n    const cx = x - x * cos + y * sin;\n    const cy = y - x * sin - y * cos;\n    const points: Point[] = [\n      [cos * x1 - sin * y2 + cx, sin * x1 + cos * y2 + cy],\n      [cos * x2 - sin * y2 + cx, sin * x2 + cos * y2 + cy],\n      [cos * x1 - sin * y1 + cx, sin * x1 + cos * y1 + cy],\n      [cos * x2 - sin * y1 + cx, sin * x2 + cos * y1 + cy],\n    ];\n    return points;\n  }\n\n  set(x1: number, y1: number, x2: number, y2: number) {\n    if (x2 < x1) {\n      this.x2 = x1;\n      this.x1 = x2;\n    } else {\n      this.x1 = x1;\n      this.x2 = x2;\n    }\n    if (y2 < y1) {\n      this.y2 = y1;\n      this.y1 = y2;\n    } else {\n      this.y1 = y1;\n      this.y2 = y2;\n    }\n    return this;\n  }\n\n  defined(key: 'left' | 'right' | 'top' | 'bottom' | 'x1' | 'x2' | 'y1' | 'y2') {\n    return this[key] !== Number.MAX_VALUE && this[key] !== -Number.MAX_VALUE;\n  }\n}\n\n/**\n * Can't use getBounds directly since we should not use AABB here.\n */\nexport function getBounds(item: DisplayObject<any>, margin?: SeriesAttr) {\n  const angle = item.getEulerAngles() || 0;\n  item.setEulerAngles(0);\n  // get dimensions\n  const {\n    min: [x, y],\n    max: [right, bottom],\n  } = item.getBounds();\n  const { width: w, height: h } = item.getBBox();\n\n  let height = h;\n  let dx = 0;\n  let dy = 0;\n  let anchorX = x;\n  let anchorY = y;\n\n  const text = textOf(item);\n\n  if (text) {\n    // [to fix]  G  bbox \n    height -= 1.5;\n    const a = text.style.textAlign;\n    const b = text.style.textBaseline;\n\n    // horizontal alignment\n    if (a === 'center') {\n      anchorX = (x + right) / 2;\n    } else if (a === 'right' || a === 'end') {\n      anchorX = right;\n    } else {\n      // left by default, do nothing\n    }\n\n    // vertical alignment\n    if (b === 'middle') {\n      anchorY = (y + bottom) / 2;\n    } else if (b === 'bottom') {\n      anchorY = bottom;\n    }\n  }\n\n  const [t = 0, r = 0, b = t, l = r] = parseSeriesAttr(margin);\n  const bounds = new Bounds((dx += x) - l, (dy += y) - t, dx + w + r, dy + height + b);\n  item.setEulerAngles(angle);\n\n  return bounds.rotatedPoints(degToRad(angle), anchorX, anchorY);\n}\n", "import type { DisplayObject } from '../../../shapes';\nimport type { Point } from '../../../types';\nimport type { SeriesAttr } from '../../../util';\nimport { Bounds, getBounds } from './bounds';\n\ntype Line = [Point, Point];\n\nfunction onLine(line: Line, point: Point): boolean {\n  return (\n    point[0] <= Math.max(line[0][0], line[1][0]) &&\n    point[0] <= Math.min(line[0][0], line[1][0]) &&\n    point[1] <= Math.max(line[0][1], line[1][1]) &&\n    point[1] <= Math.min(line[0][1], line[1][1])\n  );\n}\n\nfunction direction(a: Point, b: Point, c: Point): number {\n  const val = (b[1] - a[1]) * (c[0] - b[0]) - (b[0] - a[0]) * (c[1] - b[1]);\n  if (val === 0) return 0;\n  return val < 0 ? 2 : 1;\n}\n\nfunction isIntersect(line1: Line, line2: Line): boolean {\n  const dir1 = direction(line1[0], line1[1], line2[0]);\n  const dir2 = direction(line1[0], line1[1], line2[1]);\n  const dir3 = direction(line2[0], line2[1], line1[0]);\n  const dir4 = direction(line2[0], line2[1], line1[1]);\n\n  if (dir1 !== dir2 && dir3 !== dir4) return true;\n  if (dir1 === 0 && onLine(line1, line2[0])) return true;\n  if (dir2 === 0 && onLine(line1, line2[1])) return true;\n  if (dir3 === 0 && onLine(line2, line1[0])) return true;\n  if (dir4 === 0 && onLine(line2, line1[1])) return true;\n\n  return false;\n}\n\nexport function isPointInsideRectangle(polygon: Point[], point: Point): boolean {\n  const n = polygon.length;\n  if (n < 3) return false;\n\n  const lineToInfinity: Line = [point, [9999, point[1]]];\n  let count = 0;\n  let i = 0;\n  do {\n    const side: Line = [polygon[i], polygon[(i + 1) % n]];\n    if (isIntersect(side, lineToInfinity)) {\n      if (direction(side[0], point, side[1]) === 0) return onLine(side, point);\n      count++;\n    }\n    i = (i + 1) % n;\n  } while (i !== 0);\n\n  return !!(count & 1);\n}\n\nexport function isRectangleBInsideA(rectA: Point[], rectB: Point[]) {\n  return rectB.every((point) => isPointInsideRectangle(rectA, point));\n}\n\n/**\n *  child  container \n */\nexport function contain(container: Bounds, child: DisplayObject<any>, margin?: SeriesAttr) {\n  const { x1, x2, y1, y2 } = container;\n  const parent: Point[] = [\n    [x1, y1],\n    [x2, y1],\n    [x2, y2],\n    [x1, y2],\n  ];\n\n  const element = getBounds(child, margin);\n\n  return isRectangleBInsideA(parent, element);\n}\n", "import type { DisplayObject } from '../../../shapes';\nimport { getBounds } from './bounds';\n\n/**\n * Detect whether line-line collision.\n * From: https://stackoverflow.com/questions/563198/how-do-you-detect-where-two-line-segments-intersect\n */\nfunction lineToLine(line1: number[], line2: number[]) {\n  const [x0, y0, x1, y1] = line1;\n  const [x2, y2, x3, y3] = line2;\n  const s10x = x1 - x0;\n  const s10y = y1 - y0;\n  const s32x = x3 - x2;\n  const s32y = y3 - y2;\n\n  const denom = s10x * s32y - s32x * s10y;\n  if (denom === 0) return false;\n  const denomPositive = denom > 0;\n\n  const s02x = x0 - x2;\n  const s02y = y0 - y2;\n  const sNum = s10x * s02y - s10y * s02x;\n  if (sNum < 0 === denomPositive) return false;\n\n  const tNum = s32x * s02y - s32y * s02x;\n  if (tNum < 0 === denomPositive) return false;\n\n  if (sNum > denom === denomPositive || tNum > denom === denomPositive) return false;\n\n  return true;\n}\n\nfunction intersectBoxLine(box: number[] /**  */, line: number[]): boolean {\n  const lines = [\n    [box[0], box[1], box[2], box[3]],\n    [box[2], box[3], box[4], box[5]],\n    [box[4], box[5], box[6], box[7]],\n    [box[6], box[7], box[0], box[1]],\n  ];\n\n  return lines.some((boxLine) => lineToLine(line, boxLine));\n}\n\nexport const IntersectUtils = { lineToLine, intersectBoxLine, getBounds };\n\n/**\n *  DisplayObject \n */\nexport function intersect(a: DisplayObject<any>, b: DisplayObject<any>, margin?: number[]) {\n  const p = getBounds(a, margin).flat(1);\n  const q = getBounds(b, margin).flat(1);\n\n  const linesP = [\n    [p[0], p[1], p[2], p[3]],\n    [p[0], p[1], p[4], p[5]],\n    [p[4], p[5], p[6], p[7]],\n    [p[2], p[3], p[6], p[7]],\n  ];\n\n  for (const line of linesP) {\n    if (intersectBoxLine(q, line)) return true;\n  }\n\n  return false;\n}\n", "import type { DisplayObject } from '../../../shapes';\nimport type { SeriesAttr } from '../../../util';\nimport { parseSeriesAttr, scale } from '../../../util';\nimport { getLabelVector } from '../guides/utils';\nimport { isAxisVertical } from '../guides/line';\nimport type { AxisStyleProps, LinearAxisStyleProps } from '../types';\nimport { Bounds } from './bounds';\nimport { contain } from './contain';\nimport { intersect } from './intersect';\n\n/**\n * \n * @returns return false if no crossSize, else croseBBox\n */\nfunction createCrossBBox(attr: AxisStyleProps, padding: number) {\n  const { type, labelDirection, crossSize } = attr;\n  if (!crossSize) return false;\n\n  if (type === 'arc') {\n    const { center, radius } = attr;\n    const [cx, cy] = center;\n    const size = labelDirection === 'negative' ? 0 : crossSize;\n    const dMin = -radius - size;\n    const dMax = radius + size;\n    const [top, right, bottom, left] = parseSeriesAttr(padding);\n    // \n    return new Bounds(cx + dMin - left, cy + dMin - top, cx + dMax + right, cy + dMax + bottom);\n  }\n  const {\n    startPos: [sx, sy],\n    endPos: [ex, ey],\n  } = attr;\n  // \n  const [top, right, bottom, left] = isAxisVertical(attr as Required<LinearAxisStyleProps>)\n    ? [-padding, 0, padding, 0]\n    : [0, padding, 0, -padding];\n\n  const labelVector = getLabelVector(0, attr as Required<AxisStyleProps>);\n  const diff = scale(labelVector, crossSize);\n  const bbox = new Bounds(sx, sy, ex, ey);\n  bbox.x1 += left;\n  bbox.y1 += top;\n  bbox.x2 += right + diff[0];\n  bbox.y2 += bottom + diff[1];\n  return bbox;\n}\n\nexport function boundTest<T extends DisplayObject>(items: T[], attr: AxisStyleProps, margin?: SeriesAttr): T[] {\n  const { crossPadding } = attr;\n  const resultSet = new Set<T>();\n  let prev: T | null = null;\n\n  const crossBBox = createCrossBBox(attr, crossPadding!);\n  const testContain = (item: T) => {\n    if (crossBBox) return contain(crossBBox, item);\n    return true;\n  };\n\n  const testIntersect = (prevItem: T, currItem: T) => {\n    if (!prevItem || !prevItem.firstChild) return true;\n    // Get the first child of the item(Text).\n    // @ts-ignore\n    return !intersect(prevItem.firstChild, currItem.firstChild, parseSeriesAttr(margin));\n  };\n\n  for (const curr of items) {\n    if (!testContain(curr)) {\n      resultSet.add(curr);\n    } else if (!prev || testIntersect(prev, curr)) {\n      prev = curr;\n    } else {\n      resultSet.add(prev);\n      resultSet.add(curr);\n    }\n  }\n\n  return Array.from(resultSet);\n}\n", "import { isNil } from '@antv/util';\nimport type { DisplayObject } from '../../../shapes';\nimport { Text } from '../../../shapes';\nimport { getFont, measureTextWidth } from '../../../util';\nimport { AxisStyleProps, EllipsisOverlapCfg } from '../types';\nimport { boundTest } from '../utils/test';\n\nexport type Utils = {\n  ellipsis: (text: Text, len: number, suffix?: string) => void;\n  getTextShape: (el: DisplayObject) => Text;\n};\n\nfunction parseLengthString(str: number | string, font = {}): number {\n  if (isNil(str)) return 0;\n  if (typeof str === 'number') return str;\n  return Math.floor(measureTextWidth(str, font));\n}\n\nexport default function ellipseLabels(\n  labels: DisplayObject[],\n  overlapCfg: EllipsisOverlapCfg,\n  attr: AxisStyleProps,\n  utils: Utils\n) {\n  if (labels.length <= 0) return;\n  const {\n    suffix = '...',\n    minLength,\n    maxLength = Infinity,\n    step: ellipsisStep = ' ',\n    margin = [0, 0, 0, 0],\n  } = overlapCfg;\n\n  const font = getFont(utils.getTextShape(labels[0]));\n  const step = parseLengthString(ellipsisStep, font);\n  const min = minLength ? parseLengthString(minLength, font) : step;\n  let max = parseLengthString(maxLength, font);\n  // Enable to ellipsis label when overlap.\n  if (isNil(max) || max === Infinity) {\n    max = Math.max.apply(\n      null,\n      labels.map((d) => d.getBBox().width)\n    );\n  }\n  // Generally, 100 ticks cost less than 300ms. If cost time exceed, means ticks count is too large to see.\n  let source = labels.slice();\n  const [top = 0, right = 0, bottom = top, left = right] = margin as number[];\n  for (let allowedLength = max; allowedLength > min + step; allowedLength -= step) {\n    source.forEach((label) => {\n      utils.ellipsis(utils.getTextShape(label), allowedLength, suffix);\n    });\n\n    source = boundTest(labels, attr, margin);\n    // \n    if (source.length < 1) return;\n  }\n}\n", "import type { DisplayObject } from '../../../shapes';\nimport { defined, getLocalBBox, hide } from '../../../util';\nimport { isAxisHorizontal, isAxisVertical } from '../guides/line';\nimport type { AxisStyleProps, HideOverlapCfg } from '../types';\nimport { boundTest } from '../utils/test';\n\ntype Hide = (item: DisplayObject) => void;\ntype Show = (item: DisplayObject) => void;\nexport type Utils = { hide: Hide; show: Show };\n\nconst methods: Record<string, (items: DisplayObject[], args: any) => DisplayObject[]> = {\n  parity: (items: DisplayObject[], { seq = 2 }) => items.filter((item, i) => (i % seq ? (hide(item), false) : true)),\n};\n\nconst filterDefined = (arr: any[]) => arr.filter(defined);\n\nexport default function hideLabels(\n  labels: DisplayObject[],\n  overlapCfg: HideOverlapCfg,\n  attr: Required<AxisStyleProps>,\n  utils: Utils\n) {\n  const count = labels.length;\n  const { keepHeader, keepTail } = overlapCfg;\n\n  if (count <= 1 || (count === 2 && keepHeader && keepTail)) return;\n\n  const parityHide = methods.parity;\n  const reset = (els: DisplayObject[]) => (els.forEach(utils.show), els);\n  let seq = 2;\n  const source = labels.slice();\n  let target = labels.slice();\n\n  const minLabelWidth = Math.min(1, ...labels.map((d) => d.getBBox().width));\n\n  if (attr.type === 'linear' && (isAxisHorizontal(attr) || isAxisVertical(attr))) {\n    const minX = getLocalBBox(labels[0]).left;\n    const maxX = getLocalBBox(labels[count - 1]).right;\n    const distance = Math.abs(maxX - minX) || 1;\n    seq = Math.max(Math.floor((count * minLabelWidth) / distance), seq);\n  }\n\n  let first: DisplayObject | undefined;\n  let last: DisplayObject | undefined;\n\n  if (keepHeader) first = source.splice(0, 1)[0];\n  if (keepTail) {\n    last = source.splice(-1, 1)[0];\n    source.reverse();\n  }\n\n  reset(source);\n\n  while (\n    seq < labels.length &&\n    boundTest(filterDefined(last ? [last, ...target, first] : [first, ...target]), attr, overlapCfg?.margin).length\n  ) {\n    //  ( first)\n    if (last && !first && seq % 2 === 0) {\n      const rest = source.splice(0, 1);\n      rest.forEach(utils.hide);\n    } else if (last && first) {\n      //  first \n      const rest = source.splice(0, 1);\n      rest.forEach(utils.hide);\n    }\n\n    target = parityHide(reset(source), { seq });\n    seq++;\n  }\n}\n", "import type { DisplayObject } from '../../../shapes';\nimport { AxisStyleProps, RotateOverlapCfg } from '../types';\nimport { boundTest } from '../utils/test';\n\nexport type Utils = {\n  rotate: (label: DisplayObject, rotate: number | string) => void;\n};\n\ntype RotateType = Parameters<Utils['rotate']>[1];\n\nexport default function rotateLabels(\n  labels: DisplayObject[],\n  overlapCfg: RotateOverlapCfg,\n  attr: AxisStyleProps,\n  utils: Utils\n) {\n  const { optionalAngles = [0, 45, 90], margin, recoverWhenFailed = true } = overlapCfg;\n\n  const defaultAngles = labels.map((label) => label.getLocalEulerAngles());\n\n  const runAndPassed = () => boundTest(labels, attr, margin).length < 1;\n\n  const setLabelsRotate = (angle: RotateType | RotateType[]) =>\n    labels.forEach((label, index) => {\n      const rotate = Array.isArray(angle) ? angle[index] : angle;\n      utils.rotate(label, +rotate);\n    });\n\n  for (const angle of optionalAngles) {\n    setLabelsRotate(angle);\n    if (runAndPassed()) return;\n  }\n\n  if (recoverWhenFailed) {\n    setLabelsRotate(defaultAngles);\n  }\n}\n", "import { getCallbackValue } from '../../../util';\nimport type { DisplayObject, Text } from '../../../shapes';\nimport { isAxisHorizontal } from '../guides/line';\nimport { AxisStyleProps, LinearAxisStyleProps, WrapOverlapCfg } from '../types';\nimport { boundTest } from '../utils/test';\n\nexport type Utils = {\n  wrap: (label: Text, wordWrapWidth: number, maxLines?: number, textBaseline?: string) => void;\n};\n\ntype WrapType = Parameters<Utils['wrap']>[1];\n\nfunction inferTextBaseline(attr: AxisStyleProps) {\n  const { type, labelDirection } = attr;\n  if (type === 'linear' && isAxisHorizontal(attr as Required<LinearAxisStyleProps>)) {\n    return labelDirection === 'negative' ? 'bottom' : 'top';\n  }\n  return 'middle';\n}\n\nexport default function wrapLabels(\n  labels: Text[],\n  overlapCfg: WrapOverlapCfg,\n  attr: AxisStyleProps,\n  utils: Utils,\n  main: DisplayObject\n) {\n  const { maxLines = 3, recoverWhenFailed = true, margin = [0, 0, 0, 0] } = overlapCfg;\n  const wordWrapWidth = getCallbackValue(overlapCfg.wordWrapWidth ?? 50, [main]);\n  const defaultLines = labels.map((label) => label.attr('maxLines') || 1);\n\n  const minLines = Math.min(...defaultLines);\n\n  const runAndPassed = () => boundTest(labels, attr, margin).length < 1;\n\n  const textBaseline = inferTextBaseline(attr);\n\n  const setLabelsWrap = (lines: WrapType | WrapType[]) =>\n    labels.forEach((label, index) => {\n      const maxLines = Array.isArray(lines) ? lines[index] : lines;\n      utils.wrap(label, wordWrapWidth, maxLines, textBaseline);\n    });\n\n  if (minLines > maxLines) return;\n\n  if (attr.type === 'linear' && isAxisHorizontal(attr as Required<LinearAxisStyleProps>)) {\n    setLabelsWrap(maxLines);\n    if (runAndPassed()) {\n      return;\n    }\n  } else {\n    for (let lines = minLines; lines <= maxLines; lines++) {\n      setLabelsWrap(lines);\n      if (runAndPassed()) return;\n    }\n  }\n\n  if (recoverWhenFailed) {\n    setLabelsWrap(defaultLines);\n  }\n}\n", "import type { DisplayObject } from '../../../shapes';\nimport { Text } from '../../../shapes';\nimport { isInOffscreenGroup } from '../../../util';\nimport type { AxisStyleProps, LabelOverlapCfg } from '../types';\nimport type { Utils as EllipsisUtils } from './autoEllipsis';\nimport ellipsis from './autoEllipsis';\nimport type { Utils as HideUtils } from './autoHide';\nimport hide from './autoHide';\nimport type { Utils as RotateUtils } from './autoRotate';\nimport rotate from './autoRotate';\nimport type { Utils as WrapUtils } from './autoWrap';\nimport wrap from './autoWrap';\n\nexport type OverlapCallback = (labels: Text[], overlapCfg: any, cfg: AxisStyleProps, utils: any) => any;\n\nexport type OverlapUtilsType = EllipsisUtils & HideUtils & RotateUtils & WrapUtils;\n\nexport const OverlapUtils = new Map<string, any>([\n  ['hide', hide],\n  ['rotate', rotate],\n  ['ellipsis', ellipsis],\n  ['wrap', wrap],\n]);\n\nexport function canProcessOverlap(\n  labels: DisplayObject[],\n  attr: Required<AxisStyleProps>,\n  type: LabelOverlapCfg['type']\n) {\n  if (attr.labelOverlap.length < 1) return false;\n  if (type === 'hide') return !isInOffscreenGroup(labels[0]);\n  if (type === 'rotate') return !labels.some((label) => !!label.attr('transform')?.includes('rotate'));\n  if (type === 'ellipsis' || type === 'wrap') return labels.filter((item) => item.querySelector('text')).length >= 1;\n  return true;\n}\n\nexport function processOverlap(\n  labels: DisplayObject[],\n  attr: Required<AxisStyleProps>,\n  main: DisplayObject,\n  utils: OverlapUtilsType\n) {\n  const { labelOverlap = [] } = attr;\n  if (!labelOverlap.length) return;\n  labelOverlap.forEach((overlapCfg) => {\n    const { type } = overlapCfg;\n    const util = OverlapUtils.get(type);\n    if (canProcessOverlap(labels, attr, type)) util?.(labels as any[], overlapCfg, attr, utils, main);\n  });\n}\n", "import type { VerticalFactor, Direction } from '../types';\n\nexport * from './test';\nexport * from './classname';\n\nexport function getFactor(...args: Direction[]): VerticalFactor {\n  const fn = (str: (typeof args)[number]): VerticalFactor => (str === 'positive' ? -1 : 1);\n  return args.reduce((acc, cur) => acc * fn(cur), 1) as unknown as VerticalFactor;\n}\n", "import { get, isFunction } from '@antv/util';\nimport type { StandardAnimationOption } from '../../../animation';\nimport { fadeOut, onAnimateFinished, onAnimatesFinished, transition, transitionShape } from '../../../animation';\nimport type { DisplayObject, TextStyleProps } from '../../../shapes';\nimport { Text } from '../../../shapes';\nimport type { Vector2 } from '../../../types';\nimport type { Selection, _Element } from '../../../util';\nimport {\n  add,\n  defined,\n  ellipsisIt,\n  getCallbackValue,\n  hide,\n  inRange,\n  percentTransform,\n  radToDeg,\n  renderExtDo,\n  scale,\n  select,\n  show,\n  splitStyle,\n  subStyleProps,\n  wrapIt,\n  renderHtmlExtDo,\n  parseHeightFromHTML,\n  omit,\n} from '../../../util';\nimport { CLASS_NAMES } from '../constant';\nimport { processOverlap } from '../overlap';\nimport type { AxisDatum, AxisLabelStyleProps, AxisStyleProps } from '../types';\nimport { getFactor } from '../utils';\nimport { getValuePos } from './line';\nimport { filterExec, getCallbackStyle, getLabelVector, getLineTangentVector } from './utils';\nimport { applyClassName } from '../utils/classname';\nimport { CLASSNAME_SUFFIX_MAP } from '../classname-map';\n\nfunction angleNormalizer(angle: number) {\n  let normalizedAngle = angle;\n  while (normalizedAngle < 0) normalizedAngle += 360;\n  return Math.round(normalizedAngle % 360);\n}\n\nfunction getAngle(v1: Vector2, v2: Vector2) {\n  const [x1, y1] = v1;\n  const [x2, y2] = v2;\n  const [dot, det] = [x1 * x2 + y1 * y2, x1 * y2 - y1 * x2];\n  return Math.atan2(det, dot);\n}\n\n/** to correct label rotation to avoid inverted character */\nfunction correctLabelRotation(_rotate: number) {\n  let rotate = (_rotate + 360) % 180;\n  if (!inRange(rotate, -90, 90)) rotate += 180;\n  return rotate;\n}\n\n/** get rotation from preset or layout */\nfunction getLabelRotation(datum: AxisDatum, label: DisplayObject, attr: Required<AxisStyleProps>) {\n  const { labelAlign } = attr;\n  // if label rotate is set, use it\n  const customRotate = label.style.transform?.includes('rotate');\n  if (customRotate) return label.getLocalEulerAngles();\n  let rotate = 0;\n  const labelVector = getLabelVector(datum.value, attr);\n  const tangentVector = getLineTangentVector(datum.value, attr);\n  if (labelAlign === 'horizontal') return 0;\n  if (labelAlign === 'perpendicular') rotate = getAngle([1, 0], labelVector);\n  else rotate = getAngle([tangentVector[0] < 0 ? -1 : 1, 0], tangentVector);\n  return correctLabelRotation(radToDeg(rotate));\n}\n\n/** get the label align according to its tick and label angle  */\nfunction getLabelStyle(\n  value: number,\n  rotate: number,\n  attr: Required<AxisStyleProps>\n): Pick<TextStyleProps, 'textAlign' | 'textBaseline'> {\n  const { type, labelAlign } = attr;\n  const labelVector = getLabelVector(value, attr);\n  const labelAngle = angleNormalizer(rotate);\n  const tickAngle = angleNormalizer(radToDeg(getAngle([1, 0], labelVector)));\n\n  let textAlign: TextStyleProps['textAlign'] = 'center';\n  let textBaseline: TextStyleProps['textBaseline'] = 'middle';\n  if (type === 'linear') {\n    // tick  label \n    if ([90, 270].includes(tickAngle) && labelAngle === 0) {\n      textAlign = 'center';\n      textBaseline = labelVector[1] === 1 ? 'top' : 'bottom';\n    } else if (!(tickAngle % 180) && [90, 270].includes(labelAngle)) {\n      textAlign = 'center';\n    }\n    //  tick  label  label \n    else if (tickAngle === 0) {\n      if (inRange(labelAngle, 0, 90, false, true)) {\n        textAlign = 'start';\n      } else if (inRange(labelAngle, 0, 90) || inRange(labelAngle, 270, 360)) {\n        textAlign = 'start';\n      }\n    } else if (tickAngle === 90) {\n      if (inRange(labelAngle, 0, 90, false, true)) {\n        textAlign = 'start';\n      } else if (inRange(labelAngle, 90, 180) || inRange(labelAngle, 270, 360)) {\n        textAlign = 'end';\n      }\n    } else if (tickAngle === 270) {\n      if (inRange(labelAngle, 0, 90, false, true)) {\n        textAlign = 'end';\n      } else if (inRange(labelAngle, 90, 180) || inRange(labelAngle, 270, 360)) {\n        textAlign = 'start';\n      }\n    } else if (tickAngle === 180) {\n      if (labelAngle === 90) {\n        textAlign = 'start';\n      } else if (inRange(labelAngle, 0, 90) || inRange(labelAngle, 270, 360)) {\n        textAlign = 'end';\n      }\n    }\n    /**\n     * todo tick \n     */\n  } else {\n    //  label \n    if (labelAlign === 'parallel') {\n      if (inRange(tickAngle, 0, 180, true)) {\n        textBaseline = 'top';\n      } else {\n        textBaseline = 'bottom';\n      }\n    } else if (labelAlign === 'horizontal') {\n      if (inRange(tickAngle, 90, 270, false)) {\n        textAlign = 'end';\n      } else if (inRange(tickAngle, 270, 360, false) || inRange(tickAngle, 0, 90)) {\n        textAlign = 'start';\n      }\n    } else if (labelAlign === 'perpendicular') {\n      if (inRange(tickAngle, 90, 270)) {\n        textAlign = 'end';\n      } else {\n        textAlign = 'start';\n      }\n    }\n  }\n  return { textAlign, textBaseline };\n}\n\nfunction setRotateAndAdjustLabelAlign(rotate: number, group: _Element, attr: Required<AxisStyleProps>) {\n  group.setLocalEulerAngles(rotate);\n  const { value } = group.__data__;\n  const textStyle = getLabelStyle(value, rotate, attr);\n  const label = group.querySelector<DisplayObject>(CLASS_NAMES.labelItem.class);\n  if (label) applyTextStyle(label, textStyle);\n}\n\nfunction getLabelPos(datum: AxisDatum, data: AxisDatum[], attr: Required<AxisStyleProps>) {\n  const { showTick, tickLength, tickDirection, labelDirection, labelSpacing } = attr;\n  const index = data.indexOf(datum);\n  const finalLabelSpacing = getCallbackValue<number>(labelSpacing, [datum, index, data]);\n  const [labelVector, unionFactor] = [getLabelVector(datum.value, attr), getFactor(labelDirection!, tickDirection!)];\n  const extraLength = unionFactor === 1 ? getCallbackValue<number>(showTick ? tickLength : 0, [datum, index, data]) : 0;\n  const [x, y] = add(scale(labelVector, finalLabelSpacing + extraLength), getValuePos(datum.value, attr));\n  return { x, y };\n}\n\nfunction formatter(datum: AxisDatum, index: number, data: AxisDatum[], attr: Required<AxisStyleProps>) {\n  const { labelFormatter } = attr;\n  const element = isFunction(labelFormatter)\n    ? () => renderExtDo(getCallbackValue(labelFormatter, [datum, index, data, getLabelVector(datum.value, attr)]))\n    : () => renderExtDo(datum.label || '');\n  return element;\n}\n\nfunction renderHTMLLabel(datum: AxisDatum, index: number, data: AxisDatum[], attr: Required<AxisStyleProps>) {\n  const { labelRender } = attr;\n  const elementWidth = (get(attr, 'endPos.0', 400) - get(attr, 'startPos.0', 0)) / data.length;\n  const elStr = isFunction(labelRender)\n    ? getCallbackValue(labelRender, [datum, index, data, getLabelVector(datum.value, attr)])\n    : datum.label || '';\n  const elementHeight = parseHeightFromHTML(elStr) || 30;\n  return () =>\n    renderHtmlExtDo(elStr, {\n      width: elementWidth,\n      height: elementHeight,\n    });\n}\n\nconst STYLE_OMIT_MAP = {\n  html: ['fill'],\n  text: [],\n};\n\nfunction applyTextStyle(node: DisplayObject, style: Partial<TextStyleProps>) {\n  if (['text', 'html'].includes(node.nodeName))\n    node.attr(omit(style, STYLE_OMIT_MAP[node.nodeName as keyof typeof STYLE_OMIT_MAP]));\n}\n\nfunction overlapHandler(attr: Required<AxisStyleProps>, main: DisplayObject) {\n  processOverlap(this.node().childNodes as DisplayObject[], attr, main, {\n    hide,\n    show,\n    rotate: (label, angle) => {\n      setRotateAndAdjustLabelAlign(+angle, label, attr);\n    },\n    ellipsis: (label, len, suffix) => {\n      label && ellipsisIt(label, len || Infinity, suffix);\n    },\n    wrap: (label, width, lines) => {\n      label && wrapIt(label, width, lines);\n    },\n    getTextShape: (label) => {\n      return label.querySelector<DisplayObject>(CLASS_NAMES.labelItem.class) as Text;\n    },\n  });\n}\n\nfunction renderLabel(\n  container: DisplayObject,\n  datum: any,\n  data: any[],\n  style: any,\n  attr: Required<AxisStyleProps>\n): DisplayObject {\n  const index = data.indexOf(datum);\n  const { labelRender, classNamePrefix } = attr;\n\n  const label = select(container)\n    .append(labelRender ? renderHTMLLabel(datum, index, data, attr) : formatter(datum, index, data, attr))\n    .attr('className', CLASS_NAMES.labelItem.name)\n    .node();\n  applyClassName(select(label), CLASS_NAMES.labelItem, CLASSNAME_SUFFIX_MAP.labelItem, classNamePrefix);\n  const [labelStyle, { transform, ...groupStyle }] = splitStyle(getCallbackStyle(style, [datum, index, data]));\n\n  percentTransform(label, transform);\n  const rotate = getLabelRotation(datum, label, attr);\n  if (!label.getLocalEulerAngles()) {\n    label.setLocalEulerAngles(rotate);\n  }\n\n  applyTextStyle(label, {\n    ...getLabelStyle(datum.value, rotate, attr),\n    ...labelStyle,\n  });\n\n  // For HTML labels, adjust x position to center align.\n  if (label.nodeName === 'html') {\n    const bbox = label.getBBox();\n    const currentX = label.style.x || 0;\n    label.attr('x', currentX - bbox.width / 2);\n  }\n\n  container.attr(groupStyle);\n  return label;\n}\n\nexport function renderLabels(\n  container: Selection,\n  data: AxisDatum[],\n  attr: Required<AxisStyleProps>,\n  animate: StandardAnimationOption,\n  main: DisplayObject\n) {\n  const { classNamePrefix } = attr;\n  const finalData = filterExec(data, attr.labelFilter);\n  const style = subStyleProps<AxisLabelStyleProps>(attr, 'label');\n\n  let _exit!: Selection<AxisDatum>;\n  const transitions = container\n    .selectAll(CLASS_NAMES.label.class)\n    .data(finalData, (d, i) => i)\n    .join(\n      (enter) => {\n        const labels = enter\n          .append('g')\n          .attr('className', CLASS_NAMES.label.name)\n          .transition(function (datum) {\n            renderLabel(this, datum, data, style, attr);\n            const { x, y } = getLabelPos(datum, data, attr);\n            this.style.transform = `translate(${x}, ${y})`;\n            return null;\n          });\n        applyClassName(labels, CLASS_NAMES.label, CLASSNAME_SUFFIX_MAP.label, classNamePrefix);\n        return labels;\n      },\n      (update) =>\n        update.transition(function (datum) {\n          const prevLabel = this.querySelector(CLASS_NAMES.labelItem.class);\n          const label = renderLabel(this, datum, data, style, attr);\n          const shapeAnimation = transitionShape(prevLabel, label, animate.update);\n          const { x, y } = getLabelPos(datum, data, attr);\n          const animation = transition(this, { transform: `translate(${x}, ${y})` }, animate.update);\n          return [...shapeAnimation, animation];\n          // return [animation];\n        }),\n      (exit) => {\n        _exit = exit;\n        exit.transition(function () {\n          const animation = fadeOut(this.childNodes[0], animate.exit);\n          onAnimateFinished(animation, () => select(this).remove());\n          return animation;\n        });\n        return _exit;\n      }\n    )\n    .transitions();\n  // handle overlapping after transitions finished\n  onAnimatesFinished(transitions, () => {\n    overlapHandler.call(container, attr, main);\n  });\n  return transitions;\n}\n", "import { isFunction } from '@antv/util';\nimport type { GenericAnimation, StandardAnimationOption } from '../../../animation';\nimport { fadeOut, onAnimateFinished, transition } from '../../../animation';\nimport type { Group } from '../../../shapes';\nimport type { Vector2 } from '../../../types';\nimport { Selection, getCallbackValue, select, splitStyle, subStyleProps } from '../../../util';\nimport { CLASS_NAMES } from '../constant';\nimport type { AxisDatum, AxisTickStyleProps, RequiredAxisStyleProps } from '../types';\nimport { getValuePos } from './line';\nimport { filterExec, getCallbackStyle, getDirectionVector } from './utils';\nimport { applyClassName } from '../utils/classname';\nimport { CLASSNAME_SUFFIX_MAP } from '../classname-map';\n\ntype RequiredAxisTickStyleProps = Required<AxisTickStyleProps>;\n\nexport function getTickVector(value: number, attr: RequiredAxisStyleProps): Vector2 {\n  return getDirectionVector(value, attr.tickDirection, attr);\n}\n\nexport function getTickPoints(unitVector: Vector2, tickLength: number) {\n  const [dx, dy] = unitVector;\n  return [\n    [0, 0],\n    [dx * tickLength, dy * tickLength],\n  ];\n}\n\nfunction getTickLineLayout(\n  datum: AxisDatum,\n  index: number,\n  data: AxisDatum[],\n  tickVector: Vector2,\n  attr: RequiredAxisStyleProps\n) {\n  const { tickLength } = attr;\n  const [[x1, y1], [x2, y2]] = getTickPoints(tickVector, getCallbackValue(tickLength, [datum, index, data]));\n  return { x1, x2, y1, y2 };\n}\n\nfunction createTickEl(\n  container: Selection,\n  datum: AxisDatum,\n  index: number,\n  data: AxisDatum[],\n  attr: RequiredAxisStyleProps\n) {\n  const { tickFormatter: formatter, classNamePrefix } = attr;\n  const tickVector = getTickVector(datum.value, attr);\n  let el: any = 'line';\n  if (isFunction(formatter)) el = () => getCallbackValue(formatter, [datum, index, data, tickVector]);\n\n  const tick = container.append(el).attr('className', CLASS_NAMES.tickItem.name);\n  applyClassName(tick, CLASS_NAMES.tickItem, CLASSNAME_SUFFIX_MAP.tickItem, classNamePrefix);\n  return tick;\n}\n\nfunction applyTickStyle(\n  datum: AxisDatum,\n  index: number,\n  data: AxisDatum[],\n  tick: Selection,\n  group: Group,\n  attr: RequiredAxisStyleProps,\n  style: AxisTickStyleProps\n) {\n  const tickVector = getTickVector(datum.value, attr);\n  const { x1, x2, y1, y2 } = getTickLineLayout(datum, index, data, tickVector, attr);\n  const [tickStyle, groupStyle] = splitStyle(getCallbackStyle(style, [datum, index, data, tickVector]));\n  tick.node().nodeName === 'line' && tick.styles({ x1, x2, y1, y2, ...tickStyle });\n  group.attr(groupStyle);\n  tick.styles(tickStyle);\n}\n\nfunction createTick(\n  datum: AxisDatum,\n  index: number,\n  data: AxisDatum[],\n  attr: RequiredAxisStyleProps,\n  tickAttr: RequiredAxisTickStyleProps,\n  animate: GenericAnimation\n) {\n  const tick = createTickEl(select(this), datum, index, data, attr);\n  applyTickStyle(datum, index, data, tick, this, attr, tickAttr);\n  const [x, y] = getValuePos(datum.value, attr);\n  return transition(this, { transform: `translate(${x}, ${y})` }, animate);\n}\n\nexport function renderTicks(\n  container: Selection,\n  axisData: AxisDatum[],\n  attr: RequiredAxisStyleProps,\n  animate: StandardAnimationOption\n) {\n  const { classNamePrefix } = attr;\n  const finalData = filterExec(axisData, attr.tickFilter);\n  const tickAttr = subStyleProps<RequiredAxisTickStyleProps>(attr, 'tick');\n\n  return container\n    .selectAll(CLASS_NAMES.tick.class)\n    .data(finalData, (d) => d.id || d.label)\n    .join(\n      (enter) => {\n        const ticks = enter\n          .append('g')\n          .attr('className', CLASS_NAMES.tick.name)\n          .transition(function (datum: AxisDatum, index: number) {\n            return createTick.call(this, datum, index, finalData, attr, tickAttr, false);\n          });\n        applyClassName(ticks, CLASS_NAMES.tick, CLASSNAME_SUFFIX_MAP.tick, classNamePrefix);\n        return ticks;\n      },\n      (update) =>\n        update.transition(function (datum: AxisDatum, index: number) {\n          this.removeChildren();\n          return createTick.call(this, datum, index, finalData, attr, tickAttr, animate.update);\n        }),\n      (exit) =>\n        exit.transition(function () {\n          const animation = fadeOut(this.childNodes[0], animate.exit);\n          onAnimateFinished(animation, () => this.remove());\n          return animation;\n        })\n    )\n    .transitions();\n}\n", "import type { GenericAnimation, StandardAnimationOption } from '../../../animation';\nimport { transition } from '../../../animation';\nimport type { DisplayObject } from '../../../shapes';\nimport type { Selection } from '../../../util';\nimport {\n  normalize,\n  parsePosition,\n  parseSeriesAttr,\n  percentTransform,\n  renderExtDo,\n  scale,\n  select,\n  splitStyle,\n  subStyleProps,\n} from '../../../util';\nimport { CLASS_NAMES } from '../constant';\nimport type { RequiredAxisStyleProps } from '../types';\nimport { applyClassName } from '../utils/classname';\nimport { CLASSNAME_SUFFIX_MAP } from '../classname-map';\n\nfunction getTitlePosition(\n  mainGroup: Selection,\n  titleGroup: Selection,\n  attr: RequiredAxisStyleProps\n): {\n  x: number;\n  y: number;\n} {\n  const { titlePosition: position = 'lb', titleSpacing: spacing } = attr;\n  const pos = parsePosition(position);\n\n  const {\n    min: [mainX, mainY],\n    halfExtents: [mainHalfWidth, mainHalfHeight],\n  } = mainGroup.node().getLocalBounds();\n\n  const {\n    halfExtents: [titleHalfWidth, titleHalfHeight],\n  } = titleGroup.node().getLocalBounds();\n\n  let [x, y] = [mainX + mainHalfWidth, mainY + mainHalfHeight];\n\n  const [spacingTop, spacingRight, spacingBottom, spacingLeft] = parseSeriesAttr(spacing);\n\n  if (['start', 'end'].includes(position) && attr.type === 'linear') {\n    const { startPos, endPos } = attr;\n    // todo did not consider the truncate case\n    const [from, to] = position === 'start' ? [startPos, endPos] : [endPos, startPos];\n    const direction = normalize([-to[0] + from[0], -to[1] + from[1]]);\n    const [dx, dy] = scale(direction, spacingTop);\n    return { x: from[0] + dx, y: from[1] + dy };\n  }\n\n  if (pos.includes('t')) y -= mainHalfHeight + titleHalfHeight + spacingTop;\n  if (pos.includes('r')) x += mainHalfWidth + titleHalfWidth + spacingRight;\n  if (pos.includes('l')) x -= mainHalfWidth + titleHalfWidth + spacingLeft;\n  if (pos.includes('b')) y += mainHalfHeight + titleHalfHeight + spacingBottom;\n\n  return { x, y };\n}\n\nfunction inferTransform(n: DisplayObject, direction: string, position: string): string {\n  const { halfExtents } = n.getGeometryBounds();\n  const height = halfExtents[1] * 2;\n\n  if (direction === 'vertical') {\n    if (position === 'left') return `rotate(-90) translate(0, ${height / 2})`;\n    if (position === 'right') return `rotate(-90) translate(0, -${height / 2})`;\n  }\n  return '';\n}\n\nfunction applyTitleStyle(\n  title: Selection,\n  group: Selection,\n  axis: DisplayObject,\n  attr: RequiredAxisStyleProps,\n  animate: GenericAnimation\n) {\n  const style = subStyleProps(attr, 'title');\n  const [titleStyle, { transform: specified, transformOrigin, ...groupStyle }] = splitStyle(style);\n\n  group.styles(groupStyle);\n\n  const transform = specified || inferTransform(title.node(), titleStyle.direction, titleStyle.position);\n  title.styles({ ...titleStyle, transformOrigin });\n  percentTransform(title.node(), transform);\n\n  const { x, y } = getTitlePosition(\n    // @ts-ignore\n    select(axis._offscreen || axis.querySelector(CLASS_NAMES.mainGroup.class)),\n    group,\n    attr\n  );\n\n  const animation = transition(group.node(), { transform: `translate(${x}, ${y})` }, animate);\n  return animation;\n}\n\nexport function renderTitle(\n  container: Selection,\n  axis: DisplayObject,\n  attr: RequiredAxisStyleProps,\n  animate: StandardAnimationOption\n) {\n  const { titleText, classNamePrefix } = attr;\n\n  return container\n    .selectAll(CLASS_NAMES.title.class)\n    .data(\n      [{ title: titleText }].filter((d) => !!d.title),\n      (d, i) => d.title\n    )\n    .join(\n      (enter) => {\n        const titles = enter\n          .append(() => renderExtDo(titleText))\n          .attr('className', CLASS_NAMES.title.name)\n          .transition(function () {\n            return applyTitleStyle(select(this), container, axis, attr, animate.enter);\n          });\n        applyClassName(titles, CLASS_NAMES.title, CLASSNAME_SUFFIX_MAP.title, classNamePrefix);\n        return titles;\n      },\n      (update) =>\n        update.transition(function () {\n          return applyTitleStyle(select(this), container, axis, attr, animate.update);\n        }),\n      (exit) => exit.remove()\n    )\n    .transitions();\n}\n", "import type { GenericAnimation, StandardAnimationOption } from '../../animation';\nimport { parseAnimationOption } from '../../animation';\nimport { Component } from '../../core';\nimport { Group } from '../../shapes';\nimport type { Selection } from '../../util';\nimport { ifShow, sampling, select } from '../../util';\nimport { AXIS_BASE_DEFAULT_ATTR, CLASS_NAMES } from './constant';\nimport { renderGrid } from './guides/grid';\nimport { renderLabels } from './guides/labels';\nimport { renderAxisLine } from './guides/line';\nimport { renderTicks } from './guides/ticks';\nimport { renderTitle } from './guides/title';\nimport type { AxisDatum, AxisOptions, AxisStyleProps, RequiredAxisStyleProps } from './types';\nimport { applyClassName, getAxisClassName } from './utils/classname';\nimport { CLASSNAME_SUFFIX_MAP } from './classname-map';\n\nexport type {\n  ArcAxisOptions,\n  ArcAxisStyleProps,\n  AxisOptions,\n  AxisStyleProps,\n  LinearAxisOptions,\n  LinearAxisStyleProps,\n} from './types';\n\nfunction renderAxisMain(\n  attributes: RequiredAxisStyleProps,\n  container: Selection,\n  data: AxisDatum[],\n  animation: StandardAnimationOption\n) {\n  const { showLine, showTick, showLabel, classNamePrefix } = attributes;\n  /** line */\n  const lineGroup = container.maybeAppendByClassName(CLASS_NAMES.lineGroup, 'g');\n  applyClassName(lineGroup, CLASS_NAMES.lineGroup, CLASSNAME_SUFFIX_MAP.lineGroup, classNamePrefix);\n  const lineTransitions =\n    ifShow(showLine!, lineGroup, (group) => {\n      return renderAxisLine(group, attributes, animation);\n    }) || [];\n\n  /** tick */\n  const tickGroup = container.maybeAppendByClassName(CLASS_NAMES.tickGroup, 'g');\n  applyClassName(tickGroup, CLASS_NAMES.tickGroup, CLASSNAME_SUFFIX_MAP.tickGroup, classNamePrefix);\n  const tickTransitions =\n    ifShow(showTick!, tickGroup, (group) => {\n      return renderTicks(group, data, attributes, animation);\n    }) || [];\n\n  /** label */\n  const labelGroup = container.maybeAppendByClassName(CLASS_NAMES.labelGroup, 'g');\n  applyClassName(labelGroup, CLASS_NAMES.labelGroup, CLASSNAME_SUFFIX_MAP.labelGroup, classNamePrefix);\n  const labelTransitions =\n    ifShow(showLabel!, labelGroup, (group) => {\n      return renderLabels(group, data, attributes, animation, container.node());\n    }) || [];\n\n  return [...lineTransitions, ...tickTransitions, ...labelTransitions].filter((t) => !!t);\n}\n\nexport class Axis extends Component<AxisStyleProps> {\n  constructor(options: AxisOptions) {\n    super(options, AXIS_BASE_DEFAULT_ATTR);\n  }\n\n  render(attributes: RequiredAxisStyleProps, container: Group, specificAnimation?: GenericAnimation) {\n    const { titleText, data, animate, showTitle, showGrid, dataThreshold, truncRange, classNamePrefix } = attributes;\n\n    // Set root container className\n    const baseClassName = container.className || 'axis';\n    if (classNamePrefix) {\n      container.attr('className', `${baseClassName} ${classNamePrefix}axis`);\n    } else if (!container.className) {\n      container.attr('className', 'axis');\n    }\n\n    const sampledData = sampling(data, dataThreshold).filter(({ value }) => {\n      if (truncRange && value > truncRange[0] && value < truncRange[1]) return false;\n      return true;\n    });\n\n    const finalAnimation = parseAnimationOption(specificAnimation === undefined ? animate : specificAnimation);\n\n    /** grid */\n    const gridGroup = select(container).maybeAppendByClassName(CLASS_NAMES.gridGroup, 'g');\n    applyClassName(gridGroup, CLASS_NAMES.gridGroup, CLASSNAME_SUFFIX_MAP.gridGroup, classNamePrefix);\n    const gridTransitions =\n      ifShow(showGrid!, gridGroup, (group) => renderGrid(group, sampledData, attributes, finalAnimation)) || [];\n\n    /** main group */\n    const mainGroup = select(container).maybeAppendByClassName(CLASS_NAMES.mainGroup, 'g');\n    applyClassName(mainGroup, CLASS_NAMES.mainGroup, CLASSNAME_SUFFIX_MAP.mainGroup, classNamePrefix);\n\n    if (titleText && ((!this.initialized && finalAnimation.enter) || (this.initialized && finalAnimation.update))) {\n      renderAxisMain(attributes, select(this.offscreenGroup), sampledData, parseAnimationOption(false));\n    }\n    // render\n    const mainTransitions = renderAxisMain(attributes, select(mainGroup.node()), sampledData, finalAnimation);\n    /** title */\n    const titleGroup = select(container).maybeAppendByClassName(CLASS_NAMES.titleGroup, 'g');\n    applyClassName(titleGroup, CLASS_NAMES.titleGroup, CLASSNAME_SUFFIX_MAP.titleGroup, classNamePrefix);\n    const titleTransitions =\n      ifShow(showTitle, titleGroup, (group) => {\n        return renderTitle(group, this, attributes, finalAnimation);\n      }) || [];\n    return [...gridTransitions, ...mainTransitions, ...titleTransitions].flat().filter((t) => !!t);\n  }\n}\n", "/**\n * Legend className utility functions\n */\n\n/**\n * Generate legend className with optional prefix\n * @param baseClassName - Base className, e.g., 'title-text'\n * @param suffix - Suffix for prefixed className, e.g., 'title' -> '{prefix}legend-title'\n * @param classNamePrefix - Optional className prefix, e.g., 'g2-'\n * @returns Complete className, e.g., 'title-text g2-legend-title'\n *\n * @example\n * getLegendClassName('title-text', 'title', 'g2-')\n * // Returns: 'title-text g2-legend-title'\n */\nexport function getLegendClassName(baseClassName: string, suffix: string, classNamePrefix?: string): string {\n  if (!classNamePrefix) return baseClassName;\n  return `${baseClassName} ${classNamePrefix}legend-${suffix}`;\n}\n\n/**\n * Generate className from component attributes\n * @param attributes - Component attributes with classNamePrefix\n * @param baseClassName - CLASS_NAMES object, e.g., CLASS_NAMES.text\n * @param suffix - Suffix key from CLASSNAME_SUFFIX_MAP\n * @returns Complete className\n *\n * @example\n * getClassNameFromAttrs(this.attributes, CLASS_NAMES.text, 'title')\n * // Returns: 'title-text g2-legend-title' (if classNamePrefix = 'g2-')\n */\nexport function getClassNameFromAttrs(\n  attributes: { classNamePrefix?: string },\n  baseClassName: { name: string },\n  suffix: string\n): string {\n  const { classNamePrefix = '' } = attributes;\n  return getLegendClassName(baseClassName.name, suffix, classNamePrefix);\n}\n", "import type { PathArray } from '@antv/util';\n/** -- Closable path ------------------------------------------------------------------------------- */\ntype SymbolFactor = (x: number, y: number, r: number) => PathArray;\n/**\n * \n */\nexport const circle: SymbolFactor = (x, y, r) => {\n  return [['M', x - r, y], ['A', r, r, 0, 1, 0, x + r, y], ['A', r, r, 0, 1, 0, x - r, y], ['Z']];\n};\n\n/**\n * Cname circle to point.\n */\nexport const point = circle;\n\n/**\n * \n */\nexport const square: SymbolFactor = (x, y, r) => {\n  return [['M', x - r, y - r], ['L', x + r, y - r], ['L', x + r, y + r], ['L', x - r, y + r], ['Z']];\n};\n\n/**\n * \n */\nexport const diamond: SymbolFactor = (x, y, r) => {\n  return [['M', x - r, y], ['L', x, y - r], ['L', x + r, y], ['L', x, y + r], ['Z']];\n};\n\n/**\n * \n */\nexport const triangle: SymbolFactor = (x, y, r) => {\n  const diffY = r * Math.sin((1 / 3) * Math.PI);\n  return [['M', x - r, y + diffY], ['L', x, y - diffY], ['L', x + r, y + diffY], ['Z']];\n};\n\n/**\n * \n */\nexport const triangleDown: SymbolFactor = (x, y, r) => {\n  const diffY = r * Math.sin((1 / 3) * Math.PI);\n  return [['M', x - r, y - diffY], ['L', x + r, y - diffY], ['L', x, y + diffY], ['Z']];\n};\n\n/**\n * \n */\nexport const hexagon: SymbolFactor = (x, y, r) => {\n  const diffX = (r / 2) * Math.sqrt(3);\n  return [\n    ['M', x, y - r],\n    ['L', x + diffX, y - r / 2],\n    ['L', x + diffX, y + r / 2],\n    ['L', x, y + r],\n    ['L', x - diffX, y + r / 2],\n    ['L', x - diffX, y - r / 2],\n    ['Z'],\n  ];\n};\n\n/**\n * \n */\nexport const bowtie: SymbolFactor = (x, y, r) => {\n  const diffY = r - 1.5;\n  return [['M', x - r, y - diffY], ['L', x + r, y + diffY], ['L', x + r, y - diffY], ['L', x - r, y + diffY], ['Z']];\n};\n\n/** --  ------------------------------------------------------------------------------- */\n\n/**\n * |\n */\nexport const line: SymbolFactor = (x, y, r) => {\n  return [\n    ['M', x, y + r],\n    ['L', x, y - r],\n  ];\n};\n\n/**\n * \n */\nexport const cross: SymbolFactor = (x, y, r) => {\n  return [\n    ['M', x - r, y - r],\n    ['L', x + r, y + r],\n    ['M', x + r, y - r],\n    ['L', x - r, y + r],\n  ];\n};\n\n/**\n * \n */\nexport const tick: SymbolFactor = (x, y, r) => {\n  return [\n    ['M', x - r / 2, y - r],\n    ['L', x + r / 2, y - r],\n    ['M', x, y - r],\n    ['L', x, y + r],\n    ['M', x - r / 2, y + r],\n    ['L', x + r / 2, y + r],\n  ];\n};\n\n/**\n * +\n */\nexport const plus: SymbolFactor = (x, y, r) => {\n  return [\n    ['M', x - r, y],\n    ['L', x + r, y],\n    ['M', x, y - r],\n    ['L', x, y + r],\n  ];\n};\n\n/**\n * -\n */\nexport const hyphen: SymbolFactor = (x, y, r) => {\n  return [\n    ['M', x - r, y],\n    ['L', x + r, y],\n  ];\n};\n\n/** --  marker ------------------------------------------------------------------------------- */\n\n/**\n * ---\n */\nexport const dot: SymbolFactor = (x, y, r) => {\n  return [\n    ['M', x - r, y],\n    ['L', x + r, y],\n  ];\n};\n\nexport const dash = dot;\n\nexport const smooth: SymbolFactor = (x, y, r) => {\n  return [\n    ['M', x - r, y],\n    ['A', r / 2, r / 2, 0, 1, 1, x, y],\n    ['A', r / 2, r / 2, 0, 1, 0, x + r, y],\n  ];\n};\n\nexport const hv: SymbolFactor = (x, y, r) => {\n  return [\n    ['M', x - r - 1, y - 2.5],\n    ['L', x, y - 2.5],\n    ['L', x, y + 2.5],\n    ['L', x + r + 1, y + 2.5],\n  ];\n};\n\nexport const vh: SymbolFactor = (x, y, r) => {\n  return [\n    ['M', x - r - 1, y + 2.5],\n    ['L', x, y + 2.5],\n    ['L', x, y - 2.5],\n    ['L', x + r + 1, y - 2.5],\n  ];\n};\n\nexport const hvh: SymbolFactor = (x, y, r) => {\n  return [\n    ['M', x - (r + 1), y + 2.5],\n    ['L', x - r / 2, y + 2.5],\n    ['L', x - r / 2, y - 2.5],\n    ['L', x + r / 2, y - 2.5],\n    ['L', x + r / 2, y + 2.5],\n    ['L', x + r + 1, y + 2.5],\n  ];\n};\n\nexport function vhv(x: number, y: number) {\n  //  13px 8px\n  return [\n    ['M', x - 5, y + 2.5],\n    ['L', x - 5, y],\n    ['L', x, y],\n    ['L', x, y - 3],\n    ['L', x, y + 3],\n    ['L', x + 6.5, y + 3],\n  ];\n}\n\n/** --------------------------------------------------------------------------------- */\n\nexport const button: SymbolFactor = (x, y, r) => {\n  return [['M', x - r, y - r], ['L', x + r, y], ['L', x - r, y + r], ['Z']];\n};\n\nexport const focus: SymbolFactor = (x, y, r) => {\n  const outerRadius = r;\n  const innerRadius = r * 0.2;\n  const crossLength = r * 0.7;\n\n  return [\n    // \n    ['M', x - outerRadius, y],\n    ['A', outerRadius, outerRadius, 0, 1, 0, x + outerRadius, y],\n    ['A', outerRadius, outerRadius, 0, 1, 0, x - outerRadius, y],\n    ['Z'],\n    //  ()\n    ['M', x - crossLength, y],\n    ['L', x - innerRadius, y],\n    ['M', x + innerRadius, y],\n    ['L', x + crossLength, y],\n    //  ()\n    ['M', x, y - crossLength],\n    ['L', x, y - innerRadius],\n    ['M', x, y + innerRadius],\n    ['L', x, y + crossLength],\n  ];\n};\n", "import { isObject, isString, isFunction } from '@antv/util';\nimport type { MarkerStyleProps } from './types';\n/**\n * marker\n */\nexport function parseMarker(icon: MarkerStyleProps['symbol'] | string) {\n  let type = 'default';\n  if (isObject(icon) && icon instanceof Image) type = 'image';\n  else if (isFunction(icon)) type = 'symbol';\n  else if (isString(icon)) {\n    const dataURLsPattern = new RegExp('data:(image|text)');\n    if (icon.match(dataURLsPattern)) {\n      type = 'base64';\n    } else if (/^(https?:\\/\\/(([a-zA-Z0-9]+-?)+[a-zA-Z0-9]+\\.)+[a-zA-Z]+)(:\\d+)?(\\/.*)?(\\?.*)?(#.*)?$/.test(icon)) {\n      type = 'url';\n    } else {\n      // symbol string \n      type = 'symbol';\n    }\n  }\n  return type;\n}\n", "import { isFunction } from '@antv/util';\nimport { Component } from '../../core';\nimport { Group } from '../../shapes';\nimport { ifShow, select } from '../../util';\nimport {\n  bowtie,\n  circle,\n  cross,\n  dash,\n  diamond,\n  dot,\n  hexagon,\n  hv,\n  hvh,\n  focus,\n  hyphen,\n  line,\n  plus,\n  point,\n  smooth,\n  square,\n  tick,\n  triangle,\n  triangleDown,\n  vh,\n  vhv,\n} from './symbol';\nimport type { FunctionalSymbol, MarkerOptions, MarkerStyleProps } from './types';\nimport { parseMarker } from './utils';\n\nexport type { MarkerStyleProps, MarkerOptions, FunctionalSymbol };\n\nfunction getType(symbol: MarkerStyleProps['symbol']): string | null {\n  const markerType = parseMarker(symbol);\n\n  if (['base64', 'url', 'image'].includes(markerType)) {\n    return 'image';\n  }\n  if (symbol && markerType === 'symbol') {\n    return 'path';\n  }\n\n  return null;\n}\n\nexport class Marker extends Component<MarkerStyleProps> {\n  public render(attributes: Required<MarkerStyleProps>, container: Group) {\n    const { x = 0, y = 0 } = attributes;\n    const { symbol, size = 16, ...style } = this.getSubShapeStyle(attributes);\n\n    const type = getType(symbol);\n    ifShow(!!type, select(container), (group) => {\n      group\n        .maybeAppendByClassName(`marker`, type!)\n        .attr('className', `marker ${type}-marker`)\n        .call((selection) => {\n          if (type === 'image') {\n            // todo  path symbol \n            const r = (size as number) * 2;\n            selection.styles({\n              img: symbol,\n              width: r,\n              height: r,\n              x: x - size,\n              y: y - size,\n            });\n          } else {\n            const r = (size as number) / 2;\n            const symbolFn = isFunction(symbol) ? symbol : Marker.getSymbol(symbol);\n            selection.styles({ d: symbolFn?.(x, y, r), ...style });\n          }\n        });\n    });\n  }\n\n  private static MARKER_SYMBOL_MAP = new Map<string, FunctionalSymbol>();\n\n  /**\n   *  icon \n   * @param type\n   * @param path\n   */\n  public static registerSymbol = (type: string, symbol: FunctionalSymbol) => {\n    Marker.MARKER_SYMBOL_MAP.set(type, symbol);\n  };\n\n  /**\n   *  icon  path\n   */\n  public static getSymbol = (type: string): FunctionalSymbol | undefined => {\n    return Marker.MARKER_SYMBOL_MAP.get(type);\n  };\n\n  /**\n   * @returns  icon \n   */\n  public static getSymbols = () => {\n    return Array.from(Marker.MARKER_SYMBOL_MAP.keys());\n  };\n}\n\n/** Shapes for Point Geometry */\nMarker.registerSymbol('cross', cross);\nMarker.registerSymbol('hyphen', hyphen);\nMarker.registerSymbol('line', line);\nMarker.registerSymbol('plus', plus);\nMarker.registerSymbol('tick', tick);\n\nMarker.registerSymbol('circle', circle);\nMarker.registerSymbol('point', point);\nMarker.registerSymbol('bowtie', bowtie);\nMarker.registerSymbol('hexagon', hexagon);\nMarker.registerSymbol('square', square);\nMarker.registerSymbol('diamond', diamond);\nMarker.registerSymbol('triangle', triangle);\nMarker.registerSymbol('triangle-down', triangleDown);\n/** LineSymbols */\nMarker.registerSymbol('line', line);\nMarker.registerSymbol('dot', dot);\nMarker.registerSymbol('dash', dash);\nMarker.registerSymbol('smooth', smooth);\nMarker.registerSymbol('hv', hv);\nMarker.registerSymbol('vh', vh);\nMarker.registerSymbol('hvh', hvh);\nMarker.registerSymbol('vhv', vhv);\nMarker.registerSymbol('focus', focus);\n", "import { Marker } from '../marker';\n\n/**\n * tick\n */\nexport function getStepValueByValue(value: number, step: number, min: number) {\n  const count = Math.round((value - min) / step);\n  return min + count * step;\n}\n\nexport function hiddenHandle(x: number, y: number, r: number) {\n  // \n  const ratio = 1.4;\n  const diffY = ratio * r;\n  return [['M', x - r, y - diffY], ['L', x + r, y - diffY], ['L', x + r, y + diffY], ['L', x - r, y + diffY], ['Z']];\n}\n\n// \nconst HANDLE_HEIGHT_RATIO = 1.4;\nconst HANDLE_TRIANGLE_RATIO = 0.4;\n\n// \nexport function verticalHandle(x: number, y: number, r: number) {\n  const width = r;\n  const height = width * HANDLE_HEIGHT_RATIO;\n  const halfWidth = width / 2;\n  const oneSixthWidth = width / 6;\n  const triangleX = x + height * HANDLE_TRIANGLE_RATIO;\n  return [\n    ['M', x, y],\n    ['L', triangleX, y + halfWidth],\n    ['L', x + height, y + halfWidth],\n    ['L', x + height, y - halfWidth],\n    ['L', triangleX, y - halfWidth],\n    ['Z'],\n    // \n    ['M', triangleX, y + oneSixthWidth],\n    ['L', x + height - 2, y + oneSixthWidth],\n    ['M', triangleX, y - oneSixthWidth],\n    ['L', x + height - 2, y - oneSixthWidth],\n  ];\n}\n\n// \nexport function horizontalHandle(x: number, y: number, r: number) {\n  const width = r;\n  const height = width * HANDLE_HEIGHT_RATIO;\n  const halfWidth = width / 2;\n  const oneSixthWidth = width / 6;\n  const triangleY = y + height * HANDLE_TRIANGLE_RATIO;\n  return [\n    ['M', x, y],\n    ['L', x - halfWidth, triangleY],\n    ['L', x - halfWidth, y + height],\n    ['L', x + halfWidth, y + height],\n    ['L', x + halfWidth, triangleY],\n    ['Z'],\n    // \n    ['M', x - oneSixthWidth, triangleY],\n    ['L', x - oneSixthWidth, y + height - 2],\n    ['M', x + oneSixthWidth, triangleY],\n    ['L', x + oneSixthWidth, y + height - 2],\n  ];\n}\n\nMarker.registerSymbol('hiddenHandle', hiddenHandle);\nMarker.registerSymbol('verticalHandle', verticalHandle);\nMarker.registerSymbol('horizontalHandle', horizontalHandle);\n\nexport const ifH = (orientation = 'horizontal', a: any, b: any) => (orientation === 'horizontal' ? a : b);\n\n// @chushen\nexport function getSafetySelections(\n  domain: [number, number],\n  newSelection: [number, number],\n  oldSelection: [number, number],\n  precision: number = 4\n) {\n  const [min, max] = domain;\n  const [start, end] = newSelection;\n  const [prevStart, prevEnd] = oldSelection;\n  let [startVal, endVal] = [start, end];\n  const range = endVal - startVal;\n  // startVal endVal\n  if (startVal > endVal) {\n    [startVal, endVal] = [endVal, startVal];\n  }\n  // \n  if (range > max - min) {\n    return [min, max];\n  }\n\n  if (startVal < min) {\n    if (prevStart === min && prevEnd === endVal) {\n      return [min, endVal];\n    }\n    return [min, range + min];\n  }\n  if (endVal > max) {\n    if (prevEnd === max && prevStart === startVal) {\n      return [startVal, max];\n    }\n    return [max - range, max];\n  }\n\n  // \n  return [startVal, endVal];\n}\n\nexport function ifHorizontal<T>(orientation: string = 'horizontal', a: T, b: T): T {\n  return orientation === 'horizontal' ? a : b;\n}\n", "/**\n * className suffix mapping for legend elements\n * Used to generate prefixed classNames, e.g., classNamePrefix='g2-' generates 'g2-legend-{suffix}'\n *\n * @example\n * import { CLASSNAME_SUFFIX_MAP, getLegendClassName } from './utils';\n *\n * const titleClassName = getLegendClassName(\n *   CLASS_NAMES.text.name,\n *   CLASSNAME_SUFFIX_MAP.title,\n *   'g2-'\n * );\n * // Returns: 'title-text g2-legend-title'\n */\nexport const CLASSNAME_SUFFIX_MAP = {\n  // Common elements\n  title: 'title',\n\n  // Category legend elements\n  item: 'item',\n  marker: 'marker',\n  label: 'label',\n  value: 'value',\n  focusIcon: 'focus-icon',\n  background: 'background',\n\n  // Continuous legend elements\n  ribbon: 'ribbon',\n  track: 'track',\n  selection: 'selection',\n  handle: 'handle',\n  handleMarker: 'handle-marker',\n  handleLabel: 'handle-label',\n  indicator: 'indicator',\n\n  // Navigator elements (reserved)\n  prevBtn: 'prev-btn',\n  nextBtn: 'next-btn',\n  pageInfo: 'page-info',\n} as const;\n\n/**\n * className suffix type\n */\nexport type ClassNameSuffix = keyof typeof CLASSNAME_SUFFIX_MAP;\n", "import type { ComponentOptions, PrefixStyleProps } from '../../../core';\nimport { Component } from '../../../core';\nimport type { GroupStyleProps, TextStyleProps } from '../../../shapes';\nimport { Group } from '../../../shapes';\nimport type { PrefixObject } from '../../../types';\nimport type { Selection } from '../../../util';\nimport { classNames, ifShow, select, subStyleProps } from '../../../util';\nimport { Marker, MarkerStyleProps } from '../../marker';\nimport { ifHorizontal } from '../utils';\nimport { getLegendClassName } from '../utils/classname';\nimport { CLASSNAME_SUFFIX_MAP } from '../classname-map';\n\nexport type HandleStyleProps<T = any> = GroupStyleProps &\n  PrefixObject<TextStyleProps, 'label'> &\n  PrefixStyleProps<Omit<MarkerStyleProps, 'x' | 'y'>, 'marker'> & {\n    showLabel?: boolean;\n    formatter?: (val: T) => string;\n    orientation: 'vertical' | 'horizontal';\n    /** spacing between marker and label */\n    spacing?: number;\n    shape?: 'basic' | 'slider';\n    classNamePrefix?: string;\n  };\n\nexport type HandleOptions = ComponentOptions<HandleStyleProps>;\n\nexport type HandleType = 'start' | 'end';\n\nconst CLASS_NAMES = classNames(\n  {\n    markerGroup: 'marker-group',\n    marker: 'marker',\n    labelGroup: 'label-group',\n    label: 'label',\n  } as const,\n  'handle'\n);\n\n// todo @xiaoiver,  TEXT_INHERITABLE_PROPS \nexport const DEFAULT_HANDLE_CFG: Partial<HandleStyleProps> = {\n  showLabel: true,\n  formatter: (val: any) => val.toString(),\n  markerSize: 25,\n  markerStroke: '#c5c5c5',\n  markerFill: '#fff',\n  markerLineWidth: 1,\n  labelFontSize: 12,\n  labelFill: '#c5c5c5',\n  labelText: '',\n  orientation: 'vertical',\n  spacing: 0,\n};\n\nexport class Handle extends Component<HandleStyleProps> {\n  constructor(options: HandleOptions) {\n    super(options, DEFAULT_HANDLE_CFG);\n  }\n\n  private marker!: Selection;\n\n  render(attributes: Required<HandleStyleProps>, container: Group) {\n    const markerGroup = select(container).maybeAppendByClassName(CLASS_NAMES.markerGroup, 'g');\n    this.renderMarker(markerGroup);\n\n    const labelGroup = select(container).maybeAppendByClassName(CLASS_NAMES.labelGroup, 'g');\n    this.renderLabel(labelGroup);\n  }\n\n  private renderMarker(container: Selection) {\n    const {\n      orientation,\n      classNamePrefix,\n      markerSymbol = ifHorizontal(orientation, 'horizontalHandle', 'verticalHandle'),\n    } = this.attributes;\n\n    ifShow(!!markerSymbol, container, (group) => {\n      const handleStyle = subStyleProps(this.attributes, 'marker');\n      const markerStyle = { symbol: markerSymbol, ...handleStyle };\n      const markerClassName = getLegendClassName(\n        CLASS_NAMES.marker.name,\n        CLASSNAME_SUFFIX_MAP.handleMarker,\n        classNamePrefix\n      );\n\n      this.marker = group\n        .maybeAppendByClassName(\n          CLASS_NAMES.marker,\n          () =>\n            new Marker({\n              style: markerStyle,\n              className: markerClassName,\n            })\n        )\n        .update(markerStyle);\n\n      // Update Marker's child element className (Marker component overrides className internally)\n      if (classNamePrefix) {\n        const markerElement = this.marker.node().querySelector('.marker');\n        if (markerElement) {\n          const currentClass = markerElement.getAttribute('class') || '';\n          const baseClass = currentClass.split(' ')[0]; // e.g., 'marker'\n          const legendClassName = getLegendClassName(baseClass, CLASSNAME_SUFFIX_MAP.handleMarker, classNamePrefix);\n          markerElement.setAttribute('class', legendClassName);\n        }\n      }\n    });\n  }\n\n  private renderLabel(container: Selection) {\n    const { showLabel, orientation, spacing = 0, formatter, classNamePrefix } = this.attributes;\n\n    ifShow(showLabel, container, (group) => {\n      const { text, ...labelStyle } = subStyleProps(this.attributes, 'label');\n\n      // adjust layout\n      const { width = 0, height = 0 } = group.select(CLASS_NAMES.marker.class)?.node().getBBox() || {};\n      const [x, y, textAlign, textBaseline] = ifHorizontal(\n        orientation,\n        [0, height + spacing, 'center', 'top'],\n        [width + spacing, 0, 'start', 'middle']\n      );\n\n      const labelClassName = getLegendClassName(\n        CLASS_NAMES.label.name,\n        CLASSNAME_SUFFIX_MAP.handleLabel,\n        classNamePrefix\n      );\n\n      group\n        .maybeAppendByClassName(CLASS_NAMES.label, 'text')\n        .attr('className', labelClassName)\n        .styles({ ...labelStyle, x, y, text: formatter(text).toString(), textAlign, textBaseline });\n    });\n  }\n}\n", "import { classNames, deepAssign, superStyleProps } from '../../util';\nimport { DEFAULT_HANDLE_CFG } from './continuous/handle';\nimport type { LegendBaseStyleProps } from './types';\n\nexport { CLASSNAME_SUFFIX_MAP, type ClassNameSuffix } from './classname-map';\n\nexport const LEGEND_BASE_DEFAULT_OPTIONS: Partial<LegendBaseStyleProps> = {\n  showTitle: true,\n  padding: 0,\n  orientation: 'horizontal',\n  backgroundFill: 'transparent',\n  titleText: '',\n  titleSpacing: 4,\n  titlePosition: 'top-left',\n  titleFill: '#2C3542',\n  titleFontWeight: 'bold',\n  titleFontFamily: 'sans-serif',\n  titleFontSize: 12,\n};\n\nexport const CATEGORY_DEFAULT_OPTIONS = deepAssign({}, LEGEND_BASE_DEFAULT_OPTIONS, {});\n\nexport const CONTINUOUS_DEFAULT_OPTIONS = deepAssign(\n  {},\n  LEGEND_BASE_DEFAULT_OPTIONS,\n  superStyleProps(DEFAULT_HANDLE_CFG, 'handle'),\n  {\n    color: [\n      '#d0e3fa',\n      '#acc7f6',\n      '#8daaf2',\n      '#6d8eea',\n      '#4d73cd',\n      '#325bb1',\n      '#5a3e75',\n      '#8c3c79',\n      '#e23455',\n      '#e7655b',\n    ],\n    indicatorBackgroundFill: '#262626',\n    indicatorLabelFill: 'white',\n    indicatorLabelFontSize: 12,\n    indicatorVisibility: 'hidden',\n    labelAlign: 'value',\n    labelDirection: 'positive',\n    labelSpacing: 5,\n    showHandle: true,\n    showIndicator: true,\n    showLabel: true,\n    slidable: true,\n    titleText: '',\n    type: 'continuous',\n  }\n);\n\n// \nexport const STEP_RATIO = 0.01;\n\n// namevalue\nexport const NAME_VALUE_RATIO = 0.5;\n\nexport const CLASS_NAMES = classNames(\n  {\n    title: 'title',\n    html: 'html',\n    titleGroup: 'title-group',\n    items: 'items',\n    itemsGroup: 'items-group',\n    contentGroup: 'content-group',\n    ribbonGroup: 'ribbon-group',\n    ribbon: 'ribbon',\n    handlesGroup: 'handles-group',\n    handle: 'handle',\n    startHandle: 'start-handle',\n    endHandle: 'end-handle',\n    labelGroup: 'label-group',\n    label: 'label',\n    indicator: 'indicator',\n  },\n  'legend'\n);\n", "import { Component } from '../../../core';\nimport type { Group } from '../../../shapes';\nimport { DisplayObject, Text } from '../../../shapes';\nimport { BBox, Selection, classNames, ifShow, parsePosition, parseSeriesAttr, select, splitStyle } from '../../../util';\nimport { getLegendClassName } from '../utils/classname';\nimport { CLASSNAME_SUFFIX_MAP } from '../constant';\nimport type { TitleOptions, TitleStyleProps } from './types';\n\nexport type { TitleOptions, TitleStyleProps };\n\nconst CLASS_NAMES = classNames(\n  {\n    text: 'text',\n  },\n  'title'\n);\n\n/**\n * calculate the actual bbox of the element with title\n * @example a legend with width x, height y, but the real bbox is x1 < x, y1 < y\n */\nexport function getBBox(title: Title, content: DisplayObject): DOMRect {\n  const { position, spacing, inset, text } = title.attributes as Required<TitleStyleProps>;\n  const titleBBox = title.getBBox();\n  const contentBBox = content.getBBox();\n  const pos = parsePosition(position);\n  const [spacingTop, spacingRight, spacingBottom, spacingLeft] = parseSeriesAttr(text ? spacing : 0);\n  const [insetTop, insetRight, insetBottom, insetLeft] = parseSeriesAttr(inset);\n  const [spacingWidth, spacingHeight] = [spacingLeft + spacingRight, spacingTop + spacingBottom];\n  const [insetWidth, insetHeight] = [insetLeft + insetRight, insetTop + insetBottom];\n\n  //  pos \n  // \n  if (pos[0] === 'l') {\n    return new BBox(\n      titleBBox.x,\n      titleBBox.y,\n      contentBBox.width + titleBBox.width + spacingWidth + insetWidth,\n      Math.max(contentBBox.height + insetHeight, titleBBox.height)\n    );\n  }\n  if (pos[0] === 't') {\n    return new BBox(\n      titleBBox.x,\n      titleBBox.y,\n      Math.max(contentBBox.width + insetWidth, titleBBox.width),\n      contentBBox.height + titleBBox.height + spacingHeight + insetHeight\n    );\n  }\n  //  content.width, content.height \n\n  const [contentWidth, contentHeight] = [\n    content.attributes.width || contentBBox.width,\n    content.attributes.height || contentBBox.height,\n  ];\n  return new BBox(\n    contentBBox.x,\n    contentBBox.y,\n    contentWidth + titleBBox.width + spacingWidth + insetWidth,\n    contentHeight + titleBBox.height + spacingHeight + insetHeight\n  );\n}\n\nfunction mayApplyStyle(el: Selection, style: any) {\n  const finalStyle = Object.entries(style).reduce((acc, [key, value]) => {\n    const currAttr = el.node().attr(key);\n    if (!currAttr) acc[key] = value;\n    return acc;\n  }, {} as Record<string, any>);\n\n  el.styles(finalStyle);\n}\n\nfunction getTitleLayout(cfg: TitleStyleProps) {\n  const { width, height, position } = cfg as Required<TitleStyleProps>;\n  const [hW, hH] = [+width / 2, +height / 2];\n  let [x, y, textAlign, textBaseline] = [+hW, +hH, 'center', 'middle'];\n  const pos = parsePosition(position);\n\n  if (pos.includes('l')) [x, textAlign] = [0, 'start'];\n  if (pos.includes('r')) [x, textAlign] = [+width, 'end'];\n  if (pos.includes('t')) [y, textBaseline] = [0, 'top'];\n  if (pos.includes('b')) [y, textBaseline] = [+height, 'bottom'];\n\n  return { x, y, textAlign, textBaseline };\n}\n\nexport class Title extends Component<TitleStyleProps> {\n  private title!: Text;\n\n  constructor(options: TitleOptions) {\n    super(options, {\n      text: '',\n      width: 0,\n      height: 0,\n      fill: '#4a505a',\n      fontWeight: 'bold',\n      fontSize: 12,\n      fontFamily: 'sans-serif',\n      inset: 0,\n      spacing: 0,\n      position: 'top-left',\n    });\n  }\n\n  public getAvailableSpace(): DOMRect {\n    const container = this;\n    const {\n      width: containerWidth,\n      height: containerHeight,\n      position,\n      spacing,\n      inset,\n    } = this.attributes as Required<TitleStyleProps>;\n    const title = container.querySelector<DisplayObject>(CLASS_NAMES.text.class);\n    if (!title) return new BBox(0, 0, +containerWidth, +containerHeight);\n    const { width: titleWidth, height: titleHeight } = title.getBBox();\n    const [spacingTop, spacingRight, spacingBottom, spacingLeft] = parseSeriesAttr(spacing);\n\n    let [x, y, width, height] = [0, 0, +containerWidth, +containerHeight];\n    const pos = parsePosition(position);\n\n    if (pos.includes('i')) return new BBox(x, y, width, height);\n\n    pos.forEach((p, i) => {\n      if (p === 't')\n        [y, height] =\n          i === 0\n            ? [titleHeight + spacingBottom, +containerHeight - titleHeight - spacingBottom]\n            : [0, +containerHeight];\n      if (p === 'r') [width] = [+containerWidth - titleWidth - spacingLeft];\n      if (p === 'b') [height] = [+containerHeight - titleHeight - spacingTop];\n      if (p === 'l')\n        [x, width] =\n          i === 0 ? [titleWidth + spacingRight, +containerWidth - titleWidth - spacingRight] : [0, +containerWidth];\n    });\n\n    const [insetTop, insetRight, insetBottom, insetLeft] = parseSeriesAttr(inset);\n    const [insetWidth, insetHeight] = [insetLeft + insetRight, insetTop + insetBottom];\n    return new BBox(x + insetLeft, y + insetTop, width - insetWidth, height - insetHeight);\n  }\n\n  public getBBox(): DOMRect {\n    if (this.title) return this.title.getBBox();\n    return new BBox(0, 0, 0, 0);\n  }\n\n  public render(attributes: Required<TitleStyleProps>, container: Group) {\n    const { width, height, position, spacing, classNamePrefix, ...restStyle } = attributes;\n\n    const [titleStyle] = splitStyle(restStyle);\n    const { x, y, textAlign, textBaseline } = getTitleLayout(attributes);\n\n    ifShow(!!restStyle.text, select(container), (group) => {\n      const titleClassName = getLegendClassName(CLASS_NAMES.text.name, CLASSNAME_SUFFIX_MAP.title, classNamePrefix);\n      this.title = group\n        .maybeAppendByClassName(CLASS_NAMES.text, 'text')\n        .attr('className', titleClassName)\n        .styles(titleStyle)\n        .call(mayApplyStyle, { x, y, textAlign, textBaseline })\n        .node();\n    });\n  }\n}\n", "import { ElementEvent } from '@antv/g';\nimport { clamp, debounce } from '@antv/util';\nimport { animate, onAnimateFinished } from '../../animation';\nimport { Component } from '../../core';\nimport { Group, Rect, Text } from '../../shapes';\nimport type { Vector2 } from '../../types';\nimport type { Selection } from '../../util';\nimport {\n  BBox,\n  classNames,\n  hide,\n  scaleToPixel,\n  select,\n  show,\n  splitStyle,\n  subStyleProps,\n  transpose,\n  visibility,\n} from '../../util';\nimport { button } from '../marker/symbol';\nimport type { NavigatorOptions, NavigatorStyleProps } from './types';\nimport { CLASSNAME_SUFFIX_MAP } from '../legend/classname-map';\nimport { getLegendClassName } from '../legend/utils/classname';\n\nexport type { NavigatorOptions, NavigatorStyleProps };\n\nconst CLASS_NAMES = classNames(\n  {\n    prevBtnGroup: 'prev-btn-group',\n    prevBtn: 'prev-btn',\n    nextBtnGroup: 'next-btn-group',\n    nextBtn: 'next-btn',\n    pageInfoGroup: 'page-info-group',\n    pageInfo: 'page-info',\n    playWindow: 'play-window',\n    contentGroup: 'content-group',\n    controller: 'controller',\n    clipPath: 'clip-path',\n  },\n  'navigator'\n);\n\nexport class Navigator extends Component<NavigatorStyleProps> {\n  constructor(options: NavigatorOptions) {\n    super(options, {\n      x: 0,\n      y: 0,\n      animate: {\n        easing: 'linear',\n        duration: 200,\n        fill: 'both',\n      },\n      buttonCursor: 'pointer',\n      buttonFill: 'black',\n      buttonD: button(0, 0, 6),\n      buttonSize: 12,\n      controllerPadding: 5,\n      controllerSpacing: 5,\n      formatter: (curr, total) => `${curr}/${total}`,\n      defaultPage: 0,\n      loop: false,\n      orientation: 'horizontal',\n      pageNumFill: 'black',\n      pageNumFontSize: 12,\n      pageNumTextAlign: 'start',\n      pageNumTextBaseline: 'middle',\n    });\n  }\n\n  private playState: 'idle' | 'running' = 'idle';\n\n  private contentGroup = this.appendChild(new Group({ class: CLASS_NAMES.contentGroup.name }));\n\n  private playWindow = this.contentGroup.appendChild(new Group({ class: CLASS_NAMES.playWindow.name }));\n\n  private get defaultPage() {\n    const { defaultPage } = this.attributes;\n    return clamp(defaultPage, 0, Math.max(this.pageViews.length - 1, 0));\n  }\n\n  private innerCurrPage: number = this.defaultPage;\n\n  private clipPath!: Selection<Rect>;\n\n  private prevBtnGroup!: Group;\n\n  private nextBtnGroup!: Group;\n\n  private pageInfoGroup!: Group;\n\n  private get pageViews() {\n    return this.playWindow.children as Group[];\n  }\n\n  // todo fixme\n  private get controllerShape() {\n    return this.totalPages > 1 ? { width: 55, height: 0 } : { width: 0, height: 0 };\n  }\n\n  private get pageShape() {\n    const { pageViews } = this;\n    const [maxWidth, maxHeight] = transpose(\n      pageViews.map((pageView) => {\n        const { width, height } = pageView.getBBox();\n        return [width, height];\n      })\n    ).map((arr) => Math.max(...arr));\n\n    const { pageWidth = maxWidth, pageHeight = maxHeight } = this.attributes;\n\n    return { pageWidth, pageHeight };\n  }\n\n  public getContainer() {\n    return this.playWindow;\n  }\n\n  public get totalPages() {\n    return this.pageViews.length;\n  }\n\n  public get currPage() {\n    return this.innerCurrPage;\n  }\n\n  public getBBox(): DOMRect {\n    const { x, y } = super.getBBox();\n    const controllerShape = this.controllerShape;\n    const { pageWidth, pageHeight } = this.pageShape;\n    return new BBox(x, y, pageWidth + controllerShape.width, pageHeight);\n  }\n\n  public goTo(pageNum: number) {\n    const { animate: animateOptions } = this.attributes;\n    const { currPage, playState, playWindow, pageViews } = this;\n    if (playState !== 'idle' || pageNum < 0 || pageViews.length <= 0 || pageNum >= pageViews.length) return null;\n    pageViews[currPage].setLocalPosition(0, 0);\n    this.prepareFollowingPage(pageNum);\n    const [dx, dy] = this.getFollowingPageDiff(pageNum);\n    this.playState = 'running';\n\n    const animation = animate(\n      playWindow,\n      [{ transform: `translate(0, 0)` }, { transform: `translate(${-dx}, ${-dy})` }],\n      animateOptions\n    );\n\n    onAnimateFinished(animation, () => {\n      this.innerCurrPage = pageNum;\n      this.playState = 'idle';\n      this.setVisiblePages([pageNum]);\n      this.updatePageInfo();\n    });\n\n    return animation;\n  }\n\n  public prev() {\n    const { loop } = this.attributes;\n    const pages = this.pageViews.length;\n    const page = this.currPage;\n    if (!loop && page <= 0) return null;\n    const following = loop ? (page - 1 + pages) % pages : clamp(page - 1, 0, pages);\n    return this.goTo(following);\n  }\n\n  public next() {\n    const { loop } = this.attributes;\n    const pages = this.pageViews.length;\n    const page = this.currPage;\n    if (!loop && page >= pages - 1) return null;\n    const following = loop ? (page + 1) % pages : clamp(page + 1, 0, pages);\n    return this.goTo(following);\n  }\n\n  private renderClipPath(container: Selection) {\n    const { pageWidth, pageHeight } = this.pageShape;\n    if (!pageWidth || !pageHeight) {\n      this.contentGroup.style.clipPath = undefined;\n      return;\n    }\n    this.clipPath = container.maybeAppendByClassName(CLASS_NAMES.clipPath, 'rect').styles({\n      width: pageWidth,\n      height: pageHeight,\n    });\n\n    this.contentGroup.attr('clipPath', this.clipPath.node());\n  }\n\n  private setVisiblePages(pages: number[]) {\n    (this.playWindow.children as Group[]).forEach((page, index) => {\n      if (pages.includes(index)) show(page);\n      else hide(page);\n    });\n  }\n\n  private adjustControllerLayout() {\n    const { prevBtnGroup: prevBtn, nextBtnGroup: nextBtn, pageInfoGroup: pageNum } = this;\n    const { orientation, controllerPadding: padding } = this.attributes;\n    const { width: pW, height: pH } = pageNum.getBBox();\n\n    const [r1, r2] = orientation === 'horizontal' ? [-180, 0] : [-90, 90];\n    prevBtn.setLocalEulerAngles(r1);\n    nextBtn.setLocalEulerAngles(r2);\n\n    const { width: bpW, height: bpH } = prevBtn.getBBox();\n    const { width: bnW, height: bnH } = nextBtn.getBBox();\n\n    const maxWidth = Math.max(bpW, pW, bnW);\n\n    const {\n      offset: [[o1x, o1y], [o2x, o2y], [o3x, o3y]],\n      textAlign,\n    }: {\n      offset: [Vector2, Vector2, Vector2];\n      textAlign: string;\n    } =\n      orientation === 'horizontal'\n        ? {\n            offset: [\n              [0, 0],\n              [bpW / 2 + padding, 0],\n              [bpW + pW + padding * 2, 0],\n            ],\n            textAlign: 'start',\n          }\n        : {\n            offset: [\n              [maxWidth / 2, -bpH - padding],\n              [maxWidth / 2, 0],\n              [maxWidth / 2, bnH + padding],\n            ],\n            textAlign: 'center',\n          };\n\n    const pageNumText = pageNum.querySelector('text');\n    pageNumText && (pageNumText.style.textAlign = textAlign);\n\n    prevBtn.setLocalPosition(o1x, o1y);\n    pageNum.setLocalPosition(o2x, o2y);\n    nextBtn.setLocalPosition(o3x, o3y);\n  }\n\n  private updatePageInfo() {\n    const {\n      currPage,\n      pageViews,\n      attributes: { formatter },\n    } = this;\n    if (pageViews.length < 2) return;\n    (this.pageInfoGroup.querySelector(CLASS_NAMES.pageInfo.class) as Text)?.attr(\n      'text',\n      formatter!(currPage + 1, pageViews.length)\n    );\n    this.adjustControllerLayout();\n  }\n\n  private getFollowingPageDiff(pageNum: number) {\n    const { currPage } = this;\n    if (currPage === pageNum) return [0, 0];\n    const { orientation } = this.attributes;\n    const { pageWidth, pageHeight } = this.pageShape;\n    const sign = pageNum < currPage ? -1 : 1;\n    return orientation === 'horizontal' ? [sign * pageWidth, 0] : [0, sign * pageHeight];\n  }\n\n  private prepareFollowingPage(pageNum: number) {\n    const { currPage, pageViews } = this;\n    this.setVisiblePages([pageNum, currPage]);\n    if (pageNum !== currPage) {\n      const [dx, dy] = this.getFollowingPageDiff(pageNum);\n      pageViews[pageNum].setLocalPosition(dx, dy);\n    }\n  }\n\n  private renderController(container: Selection) {\n    const { controllerSpacing: spacing, classNamePrefix = '' } = this.attributes;\n    const { pageWidth, pageHeight } = this.pageShape;\n    const visible = this.pageViews.length >= 2;\n\n    const group = container.maybeAppendByClassName(CLASS_NAMES.controller, 'g');\n    visibility(group.node(), visible);\n\n    if (!visible) return;\n\n    const style = subStyleProps(this.attributes, 'button');\n    const textStyle = subStyleProps(this.attributes, 'pageNum');\n    const [{ size, ...pathStyle }, groupStyle] = splitStyle(style);\n\n    const whetherToAddEventListener = !group.select(CLASS_NAMES.prevBtnGroup.class).node();\n\n    const prevBtnGroup = group.maybeAppendByClassName(CLASS_NAMES.prevBtnGroup, 'g').styles(groupStyle);\n    this.prevBtnGroup = prevBtnGroup.node();\n    const prevBtn = prevBtnGroup.maybeAppendByClassName(CLASS_NAMES.prevBtn, 'path');\n\n    if (classNamePrefix) {\n      const prevBtnClassName = getLegendClassName(\n        CLASS_NAMES.prevBtn.name,\n        CLASSNAME_SUFFIX_MAP.prevBtn,\n        classNamePrefix\n      );\n      prevBtn.node().setAttribute('class', prevBtnClassName);\n    }\n\n    const nextBtnGroup = group.maybeAppendByClassName(CLASS_NAMES.nextBtnGroup, 'g').styles(groupStyle);\n    this.nextBtnGroup = nextBtnGroup.node();\n    const nextBtn = nextBtnGroup.maybeAppendByClassName(CLASS_NAMES.nextBtn, 'path');\n\n    if (classNamePrefix) {\n      const nextBtnClassName = getLegendClassName(\n        CLASS_NAMES.nextBtn.name,\n        CLASSNAME_SUFFIX_MAP.nextBtn,\n        classNamePrefix\n      );\n      nextBtn.node().setAttribute('class', nextBtnClassName);\n    }\n\n    [prevBtn, nextBtn].forEach((btn) => {\n      btn.styles({ ...pathStyle, transformOrigin: 'center' });\n      scaleToPixel(btn.node(), size, true);\n    });\n\n    const pageInfoGroup = group.maybeAppendByClassName(CLASS_NAMES.pageInfoGroup, 'g');\n    this.pageInfoGroup = pageInfoGroup.node();\n\n    const pageInfoElement = pageInfoGroup.maybeAppendByClassName(CLASS_NAMES.pageInfo, 'text');\n    pageInfoElement.styles(textStyle);\n\n    if (classNamePrefix) {\n      const pageInfoClassName = getLegendClassName(\n        CLASS_NAMES.pageInfo.name,\n        CLASSNAME_SUFFIX_MAP.pageInfo,\n        classNamePrefix\n      );\n      pageInfoElement.node().setAttribute('class', pageInfoClassName);\n    }\n\n    this.updatePageInfo();\n\n    // group.node().style.transform = `translate(${pageWidth + spacing}, ${pageHeight / 2})`;\n\n    // put it on the right side of the container\n    group.node().setLocalPosition(pageWidth + spacing, pageHeight / 2);\n    if (whetherToAddEventListener) {\n      this.prevBtnGroup.addEventListener('click', () => {\n        this.prev();\n      });\n      this.nextBtnGroup.addEventListener('click', () => {\n        this.next();\n      });\n    }\n  }\n\n  render(attributes: NavigatorStyleProps, container: Group) {\n    const { x = 0, y = 0 } = attributes;\n    this.attr('transform', `translate(${x}, ${y})`);\n\n    /**\n     * container\n     *  |- contentGroup (with clip path)\n     *    |- playWindow (with animation)\n     *      |- pages\n     *  |- clipPath\n     */\n    const containerSelection = select(container);\n    this.renderClipPath(containerSelection);\n    this.renderController(containerSelection);\n    this.setVisiblePages([this.defaultPage]);\n    this.goTo(this.defaultPage);\n  }\n\n  public bindEvents() {\n    const render = debounce(() => this.render(this.attributes, this), 50);\n    this.playWindow.addEventListener(ElementEvent.INSERTED, render);\n    this.playWindow.addEventListener(ElementEvent.REMOVED, render);\n  }\n}\n", "export const POPTIP_ID = 'component-poptip';\n\n/**\n * \n */\nexport const CLASS_NAME = {\n  CONTAINER: 'component-poptip',\n  ARROW: 'component-poptip-arrow',\n  TEXT: 'component-poptip-text',\n};\n\n/**\n *  style\n */\nexport const POPTIP_STYLE = {\n  //   style\n  [`.${CLASS_NAME.CONTAINER}`]: {\n    visibility: 'visible',\n    position: 'absolute',\n    'background-color': 'rgba(0, 0, 0)',\n    'box-shadow': '0px 0px 10px #aeaeae',\n    'border-radius': '3px',\n    color: '#fff',\n    opacity: 0.8,\n    'font-size': '12px',\n    padding: '4px 6px',\n    display: 'flex',\n    'justify-content': 'center',\n    'align-items': 'center',\n    'z-index': 8,\n    transition: 'visibility 50ms',\n  },\n  //   style\n  [`.${CLASS_NAME.TEXT}`]: {\n    'text-align': 'center',\n  },\n  [`.${CLASS_NAME.CONTAINER}[data-position='top']`]: {\n    transform: `translate(-50%, -100%)`,\n  },\n  [`.${CLASS_NAME.CONTAINER}[data-position='left']`]: {\n    transform: `translate(-100%, -50%)`,\n  },\n  [`.${CLASS_NAME.CONTAINER}[data-position='right']`]: {\n    transform: `translate(0, -50%)`,\n  },\n  [`.${CLASS_NAME.CONTAINER}[data-position='bottom']`]: {\n    transform: `translate(-50%, 0)`,\n  },\n  [`.${CLASS_NAME.CONTAINER}[data-position='top-left']`]: {\n    transform: `translate(0,-100%)`,\n  },\n  [`.${CLASS_NAME.CONTAINER}[data-position='top-right']`]: {\n    transform: `translate(-100%,-100%)`,\n  },\n  [`.${CLASS_NAME.CONTAINER}[data-position='left-top']`]: {\n    transform: `translate(-100%, 0)`,\n  },\n  [`.${CLASS_NAME.CONTAINER}[data-position='left-bottom']`]: {\n    transform: `translate(-100%, -100%)`,\n  },\n  [`.${CLASS_NAME.CONTAINER}[data-position='right-top']`]: {\n    transform: `translate(0, 0)`,\n  },\n  [`.${CLASS_NAME.CONTAINER}[data-position='right-bottom']`]: {\n    transform: `translate(0, -100%)`,\n  },\n  [`.${CLASS_NAME.CONTAINER}[data-position='bottom-left']`]: {\n    transform: `translate(0, 0)`,\n  },\n  [`.${CLASS_NAME.CONTAINER}[data-position='bottom-right']`]: {\n    transform: `translate(-100%, 0)`,\n  },\n  [`.${CLASS_NAME.ARROW}`]: {\n    width: '4px',\n    height: '4px',\n    transform: 'rotate(45deg)',\n    'background-color': 'rgba(0, 0, 0)',\n    position: 'absolute',\n    'z-index': -1,\n  },\n  [`.${CLASS_NAME.CONTAINER}[data-position='top']`]: {\n    transform: `translate(-50%, calc(-100% - 5px))`,\n  },\n  [`[data-position='top'] .${CLASS_NAME.ARROW}`]: {\n    bottom: '-2px',\n  },\n  [`.${CLASS_NAME.CONTAINER}[data-position='left']`]: {\n    transform: `translate(calc(-100% - 5px), -50%)`,\n  },\n  [`[data-position='left'] .${CLASS_NAME.ARROW}`]: {\n    right: '-2px',\n  },\n  [`.${CLASS_NAME.CONTAINER}[data-position='right']`]: {\n    transform: `translate(5px, -50%)`,\n  },\n  [`[data-position='right'] .${CLASS_NAME.ARROW}`]: {\n    left: '-2px',\n  },\n  [`.${CLASS_NAME.CONTAINER}[data-position='bottom']`]: {\n    transform: `translate(-50%, 5px)`,\n  },\n  [`[data-position='bottom'] .${CLASS_NAME.ARROW}`]: {\n    top: '-2px',\n  },\n  [`.${CLASS_NAME.CONTAINER}[data-position='top-left']`]: {\n    transform: `translate(0, calc(-100% - 5px))`,\n  },\n  [`[data-position='top-left'] .${CLASS_NAME.ARROW}`]: {\n    left: '10px',\n    bottom: '-2px',\n  },\n  [`.${CLASS_NAME.CONTAINER}[data-position='top-right']`]: {\n    transform: `translate(-100%, calc(-100% - 5px))`,\n  },\n  [`[data-position='top-right'] .${CLASS_NAME.ARROW}`]: {\n    right: '10px',\n    bottom: '-2px',\n  },\n  [`.${CLASS_NAME.CONTAINER}[data-position='left-top']`]: {\n    transform: `translate(calc(-100% - 5px), 0)`,\n  },\n  [`[data-position='left-top'] .${CLASS_NAME.ARROW}`]: {\n    right: '-2px',\n    top: '8px',\n  },\n  [`.${CLASS_NAME.CONTAINER}[data-position='left-bottom']`]: {\n    transform: `translate(calc(-100% - 5px), -100%)`,\n  },\n  [`[data-position='left-bottom'] .${CLASS_NAME.ARROW}`]: {\n    right: '-2px',\n    bottom: '8px',\n  },\n  [`.${CLASS_NAME.CONTAINER}[data-position='right-top']`]: {\n    transform: `translate(5px, 0)`,\n  },\n  [`[data-position='right-top'] .${CLASS_NAME.ARROW}`]: {\n    left: '-2px',\n    top: '8px',\n  },\n  [`.${CLASS_NAME.CONTAINER}[data-position='right-bottom']`]: {\n    transform: `translate(5px, -100%)`,\n  },\n  [`[data-position='right-bottom'] .${CLASS_NAME.ARROW}`]: {\n    left: '-2px',\n    bottom: '8px',\n  },\n  [`.${CLASS_NAME.CONTAINER}[data-position='bottom-left']`]: {\n    transform: `translate(0, 5px)`,\n  },\n  [`[data-position='bottom-left'] .${CLASS_NAME.ARROW}`]: {\n    top: '-2px',\n    left: '8px',\n  },\n  [`.${CLASS_NAME.CONTAINER}[data-position='bottom-right']`]: {\n    transform: `translate(-100%, 5px)`,\n  },\n  [`[data-position='bottom-right'] .${CLASS_NAME.ARROW}`]: {\n    top: '-2px',\n    right: '8px',\n  },\n};\n", "import { DisplayObject } from '../../shapes';\nimport type { PoptipPosition } from './types';\n\n/**\n *  poptip  POPTIP_STYLE  \n * @param position PoptipPosition\n * @returns { x: number, y: number }\n */\nexport function getPositionXY(\n  clientX: number,\n  clientY: number,\n  target: HTMLElement | DisplayObject,\n  position: PoptipPosition,\n  arrowPointAtCenter: boolean = false,\n  follow: boolean = false\n): [number, number] {\n  if (follow) return [clientX, clientY];\n  // @ts-ignore\n  const { x, y, width, height } = target.getBoundingClientRect();\n  switch (position) {\n    case 'top':\n      return arrowPointAtCenter ? [x + width / 2, y] : [clientX, y];\n    case 'left':\n      return arrowPointAtCenter ? [x, y + height / 2] : [x, clientY];\n    case 'bottom':\n      return arrowPointAtCenter ? [x + width / 2, y + height] : [clientX, y + height];\n    case 'right':\n      return arrowPointAtCenter ? [x + width, y + height / 2] : [x + width, clientY];\n    case 'top-right':\n    case 'right-top':\n      return [x + width, y];\n    case 'left-bottom':\n    case 'bottom-left':\n      return [x, y + height];\n    case 'right-bottom':\n    case 'bottom-right':\n      return [x + width, y + height];\n    case 'top-left':\n    case 'left-top':\n    default:\n      return [x, y];\n  }\n}\n\nconst getSingleTon = <T, P>(fn: (...args: P[]) => T) => {\n  let instance: T;\n  return (...args: P[]) => {\n    if (!instance) instance = fn.apply(this, args);\n    return instance;\n  };\n};\n\nfunction createElement(id: string) {\n  let div = id && document.getElementById(id);\n  if (!div) {\n    div = document.createElement('div');\n    div.setAttribute('id', id);\n    document.body.appendChild(div);\n  }\n  return div;\n}\n\n/**\n *  dom \n */\nexport function getSingleTonElement(id: string): HTMLElement {\n  const element = getSingleTon(createElement)(id);\n  return element;\n}\n", "import { deepMix, isString, isElement, assign, get } from '@antv/util';\nimport { DisplayObject, Group } from '../../shapes';\nimport { Component } from '../../core';\nimport { deepAssign } from '../../util';\nimport { CLASS_NAME, POPTIP_ID, POPTIP_STYLE } from './constant';\nimport { getPositionXY, getSingleTonElement } from './utils';\n\nimport type { PoptipStyleProps, PoptipOptions } from './types';\n\nexport type { PoptipStyleProps as PoptipCfg, PoptipOptions };\n\n// \nexport { getPositionXY } from './utils';\n\ntype PoptipCallbackOptions = {\n  html?: string;\n  target?: HTMLElement | DisplayObject | false;\n} & Pick<PoptipStyleProps, 'position' | 'arrowPointAtCenter' | 'follow' | 'offset'>;\n\nexport class Poptip extends Component<PoptipStyleProps> {\n  public static tag = 'poptip';\n\n  public get visible(): boolean {\n    return this.visibility === 'visible';\n  }\n\n  private static defaultOptions = {\n    style: {\n      x: 0,\n      y: 0,\n      width: 0,\n      height: 0,\n      target: null,\n      visibility: 'hidden',\n      text: '',\n      position: 'top',\n      follow: false,\n      offset: [0, 0],\n      domStyles: POPTIP_STYLE,\n      template: `<div class=\"${CLASS_NAME.TEXT}\"></div>`,\n    },\n  };\n\n  /**  HTML  */\n  private container!: HTMLElement;\n\n  /**  */\n  private visibility: 'visible' | 'hidden' = 'visible';\n\n  /**  */\n  private map: Map<HTMLElement | DisplayObject, any[]> = new Map();\n\n  /**  */\n  private domStyles: string = '';\n\n  constructor(options: PoptipOptions) {\n    super(deepMix({ style: { id: POPTIP_ID } }, Poptip.defaultOptions, options));\n    this.initShape();\n    this.render(this.attributes, this);\n  }\n\n  public render(attributes: PoptipStyleProps, container: Group) {\n    this.visibility = this.style.visibility;\n    this.updatePoptipElement();\n  }\n\n  /**\n   * poptip \n   */\n  public update(cfg?: Partial<PoptipStyleProps>) {\n    this.attr(deepMix({}, this.style, cfg));\n    this.render(this.attributes, this);\n  }\n\n  /**\n   * \n   */\n  public bind(\n    element: HTMLElement | DisplayObject,\n    callback?: PoptipCallbackOptions | ((e: any) => PoptipCallbackOptions)\n  ): void {\n    if (!element) return;\n\n    const { text: defaultText } = this.style;\n\n    const onmousemove = (e: any) => {\n      let target: PoptipCallbackOptions['target'] = element;\n      let options = this.style;\n      let text = defaultText;\n      if (callback) {\n        const {\n          html,\n          target: ele,\n          ...restOptions\n        } = typeof callback === 'function' ? callback.call(null, e) : callback;\n        options = assign({} as any, this.style, restOptions);\n        if (ele || ele === false) target = ele;\n        if (typeof html === 'string') text = html;\n      }\n\n      const { position, arrowPointAtCenter, follow, offset } = options;\n\n      if (target) {\n        const { clientX, clientY } = e as MouseEvent;\n        const [x, y] = getPositionXY(clientX, clientY, target, position, arrowPointAtCenter, follow);\n        this.showTip(x, y, { text, position, offset });\n      } else {\n        //  \n        this.hideTip();\n      }\n    };\n\n    const onmouseleave = () => {\n      this.hideTip();\n    };\n\n    element.addEventListener('mousemove', onmousemove);\n    element.addEventListener('mouseleave', onmouseleave);\n    // \n    this.map.set(element, [onmousemove, onmouseleave]);\n  }\n\n  public unbind(element: HTMLElement | DisplayObject): void {\n    if (this.map.has(element)) {\n      const [listener1, listener2] = this.map.get(element) || [];\n      listener1 && element.removeEventListener('mousemove', listener1);\n      listener2 && element.removeEventListener('mouseleave', listener2);\n      this.map.delete(element);\n    }\n  }\n\n  /**\n   * \n   */\n  public clear() {\n    this.container.innerHTML = '';\n  }\n\n  /**\n   * \n   */\n  public destroy() {\n    [...this.map.keys()].forEach((ele) => this.unbind(ele));\n\n    this.container?.remove();\n    super.destroy();\n  }\n\n  /**\n   *  + \n   * @param x   x \n   * @param y   y \n   * @param text \n   */\n  public showTip(x?: number, y?: number, options?: Pick<PoptipStyleProps, 'text' | 'position' | 'offset'>) {\n    const text = get(options, 'text');\n    if (text && typeof text !== 'string') return;\n\n    this.applyStyles();\n    //   x y\n    if (x && y && options) {\n      const { offset, position } = options;\n      position && this.container.setAttribute('data-position', position);\n\n      this.setOffsetPosition(x, y, offset);\n      if (typeof text === 'string') {\n        // do something\n        const textElement = this.container.querySelector(`.${CLASS_NAME.TEXT}`);\n        if (textElement) {\n          (textElement as HTMLDivElement).innerHTML = text;\n        }\n      }\n\n      this.visibility = 'visible';\n      this.container.style.visibility = 'visible';\n    }\n  }\n\n  /**\n   * \n   */\n  public hideTip() {\n    this.visibility = 'hidden';\n    this.container.style.visibility = 'hidden';\n  }\n\n  /**\n   *  HTMLElement\n   * @returns this.element:HTMLElement;\n   */\n  public getContainer(): HTMLElement {\n    return this.container;\n  }\n\n  public getClassName(): string {\n    const { containerClassName } = this.style;\n    return `${CLASS_NAME.CONTAINER}${containerClassName ? ` ${containerClassName}` : ''}`;\n  }\n\n  /**\n   * \n   */\n  private initShape() {\n    const { id } = this.style;\n\n    this.container = getSingleTonElement(id);\n    this.container.className = this.getClassName();\n\n    // \n    this.container.addEventListener('mousemove', () => this.showTip());\n    this.container.addEventListener('mouseleave', () => this.hideTip());\n  }\n\n  /**\n   *  HTML \n   */\n  private updatePoptipElement() {\n    const { container } = this;\n\n    this.clear();\n    const { id, template, text } = this.style;\n\n    this.container.setAttribute('id', id);\n    this.container.className = this.getClassName();\n\n    //  arrow \n    const arrowNode = `<span class=\"${CLASS_NAME.ARROW}\"></span>`;\n    container.innerHTML = arrowNode;\n\n    //  text \n    if (isString(template)) {\n      container.innerHTML += template;\n    } else if (template && isElement(template)) {\n      container.appendChild(template);\n    }\n\n    //  text\n    if (text) {\n      container.getElementsByClassName(CLASS_NAME.TEXT)[0]!.textContent = text;\n    }\n\n    this.applyStyles();\n\n    this.container.style.visibility = this.visibility;\n  }\n\n  /**\n   * \n   */\n  private applyStyles() {\n    const styles = deepAssign({}, POPTIP_STYLE, this.style.domStyles) as object;\n\n    const styleStr = Object.entries(styles).reduce((r, [key, value]) => {\n      const styleStr = Object.entries(value).reduce((r, [k, v]) => `${r}${k}: ${v};`, '');\n      return `${r}${key}{${styleStr}}`;\n    }, '');\n\n    if (this.domStyles !== styleStr) {\n      this.domStyles = styleStr;\n      let styleDOM = this.container.querySelector('style') as HTMLStyleElement;\n      if (styleDOM) this.container.removeChild(styleDOM);\n      styleDOM = document.createElement('style');\n      styleDOM.innerHTML = styleStr;\n      this.container.appendChild(styleDOM);\n    }\n  }\n\n  /**\n   * dom\n   * @param x  x \n   * @param y  y \n   */\n  private setOffsetPosition(x: number, y: number, offset: number[] = this.style.offset): void {\n    const [offsetX = 0, offsetY = 0] = offset;\n\n    this.container.style.left = `${x + offsetX}px`;\n    this.container.style.top = `${y + offsetY}px`;\n  }\n}\n", "import {\n  BaseStyleProps,\n  Circle,\n  DisplayObject,\n  Group,\n  GroupStyleProps,\n  PathStyleProps,\n  RectStyleProps,\n  TextStyleProps,\n} from '@antv/g';\nimport { isUndefined } from '@antv/util';\nimport { Marker } from '../../marker';\nimport type { ComponentOptions } from '../../../core';\nimport { Component } from '../../../core';\nimport { ExtendDisplayObject, PrefixObject } from '../../../types';\nimport {\n  Selection,\n  SeriesAttr,\n  classNames,\n  copyAttributes,\n  ellipsisIt,\n  ifShow,\n  parseSeriesAttr,\n  renderExtDo,\n  scaleToPixel,\n  select,\n  subStyleProps,\n  deepAssign,\n} from '../../../util';\nimport { Poptip } from '../../poptip';\nimport type { PoptipStyleProps } from '../../poptip/types';\nimport type { PoptipRender } from './items';\nimport { getLegendClassName } from '../utils/classname';\nimport { CLASSNAME_SUFFIX_MAP } from '../constant';\n\ntype ItemMarkerStyle = { size?: number } & PathStyleProps;\ntype ItemTextStyle = Omit<TextStyleProps, 'text'>;\ntype ItemBackgroundStyle = Omit<RectStyleProps, 'width' | 'height'>;\n\nexport type CategoryItemStyleProps = GroupStyleProps &\n  PrefixObject<ItemMarkerStyle, 'marker'> &\n  PrefixObject<ItemTextStyle, 'label'> &\n  PrefixObject<ItemTextStyle, 'value'> &\n  PrefixObject<ItemBackgroundStyle, 'background'> & {\n    labelText?: ExtendDisplayObject;\n    marker?: string | (() => DisplayObject);\n    /** spacing between marker, label and value */\n    spacing?: SeriesAttr;\n    span?: SeriesAttr;\n    valueText?: ExtendDisplayObject;\n    // if width and height not specific, set it to actual space occurred\n    width?: number;\n    x?: number;\n    y?: number;\n    poptip?: PoptipStyleProps & PoptipRender;\n    focus?: boolean;\n    focusMarkerSize?: number;\n    classNamePrefix?: string;\n  };\n\nexport type CategoryItemOptions = ComponentOptions<CategoryItemStyleProps>;\n\nconst CLASS_NAMES = classNames(\n  {\n    layout: 'flex',\n    markerGroup: 'marker-group',\n    marker: 'marker',\n    labelGroup: 'label-group',\n    label: 'label',\n    valueGroup: 'value-group',\n    focusGroup: 'focus-group',\n    focus: 'focus',\n    value: 'value',\n    backgroundGroup: 'background-group',\n    background: 'background',\n  },\n  'legend-category-item'\n);\n\nconst DEFAULT_POPTIP_PROPS: PoptipStyleProps = {\n  offset: [0, 20],\n  domStyles: {\n    '.component-poptip': {\n      opacity: '1',\n      padding: '8px 12px',\n      background: '#fff',\n      boxShadow: '0 2px 8px rgba(0, 0, 0, 0.15)',\n    },\n    '.component-poptip-arrow': {\n      display: 'none',\n    },\n    '.component-poptip-text': {\n      color: '#000',\n      lineHeight: '20px',\n    },\n  },\n};\n\nfunction styleOfMarker(group: Group): BaseStyleProps {\n  const marker = group.querySelector(CLASS_NAMES.marker.class);\n  if (marker) return marker.style;\n  return {};\n}\n\nexport class CategoryItem extends Component<CategoryItemStyleProps> {\n  // Key fields, used to pass extra info like id, index for poptip rendering\n  public keyFields: object = {};\n\n  constructor(options: CategoryItemOptions, keyFields?: Omit<CategoryItemOptions, 'style'>) {\n    super(options, {\n      span: [1, 1],\n      marker: () => new Circle({ style: { r: 6 } }),\n      markerSize: 10,\n      labelFill: '#646464',\n      valueFill: '#646464',\n      labelFontSize: 12,\n      valueFontSize: 12,\n      labelTextBaseline: 'middle',\n      valueTextBaseline: 'middle',\n    });\n    this.keyFields = keyFields || {};\n  }\n\n  private poptipGroup!: Poptip;\n\n  private focusGroup!: Selection<Group>;\n\n  private markerGroup!: Selection<Group>;\n\n  private labelGroup!: Selection<Group>;\n\n  private valueGroup!: Selection<Group>;\n\n  private background!: Selection<Group>;\n\n  private get showValue() {\n    const { valueText } = this.attributes;\n    if (!valueText) return false;\n    if (typeof valueText === 'string' || typeof valueText === 'number') return valueText !== '';\n    if (typeof valueText === 'function') return true;\n    return valueText.attr('text') !== '';\n  }\n\n  private get actualSpace() {\n    const label = this.labelGroup;\n    const value = this.valueGroup;\n    const { markerSize, focus, focusMarkerSize } = this.attributes;\n    const { width: labelWidth, height: labelHeight } = label.node().getBBox();\n    const { width: valueWidth, height: valueHeight } = value.node().getBBox();\n\n    const focusWidth = focus ? focusMarkerSize ?? 12 : 0;\n\n    return {\n      markerWidth: markerSize,\n      labelWidth,\n      valueWidth,\n      focusWidth,\n      height: Math.max(markerSize, labelHeight, valueHeight),\n    };\n  }\n\n  private get span() {\n    const { span } = this.attributes;\n    if (!span) return [1, 1];\n    const [span1, innerSpan] = parseSeriesAttr(span!);\n    const span2 = this.showValue ? innerSpan : 0;\n    const basis = span1 + span2;\n    return [span1 / basis, span2 / basis];\n  }\n\n  setAttribute(n: any, v: any) {\n    super.setAttribute(n, v);\n  }\n\n  private get shape() {\n    const { markerSize, width: fullWidth } = this.attributes;\n    const actualSpace = this.actualSpace;\n    const { markerWidth, focusWidth, height } = actualSpace;\n    let { labelWidth, valueWidth } = this.actualSpace;\n    const [spacing1, spacing2, spacing3] = this.spacing;\n\n    if (fullWidth) {\n      const width = fullWidth - markerSize - spacing1 - spacing2 - focusWidth - spacing3;\n      const [span1, span2] = this.span;\n      [labelWidth, valueWidth] = [span1 * width, span2 * width];\n    }\n\n    const width = markerWidth + labelWidth + valueWidth + spacing1 + spacing2 + focusWidth + spacing3;\n    return { width, height, markerWidth, labelWidth, valueWidth, focusWidth };\n  }\n\n  private get spacing() {\n    const { spacing, focus } = this.attributes;\n    if (!spacing) return [0, 0, 0];\n    const [spacing1, spacing2, spacing3] = parseSeriesAttr(spacing);\n    return [spacing1, this.showValue ? spacing2 : 0, focus ? spacing3 : 0];\n  }\n\n  private get layout() {\n    const { markerWidth, labelWidth, valueWidth, focusWidth, width, height } = this.shape;\n    const [spacing1, spacing2, spacing3] = this.spacing;\n    return {\n      height,\n      width,\n      markerWidth,\n      labelWidth,\n      valueWidth,\n      focusWidth,\n      position: [\n        markerWidth / 2,\n        markerWidth + spacing1,\n        markerWidth + labelWidth + spacing1 + spacing2,\n        markerWidth + labelWidth + valueWidth + spacing1 + spacing2 + spacing3 + focusWidth / 2,\n      ],\n    };\n  }\n\n  private get scaleSize() {\n    const markerShapeStyle = styleOfMarker(this.markerGroup.node());\n    const {\n      markerSize,\n      markerStrokeWidth = markerShapeStyle.strokeWidth,\n      markerLineWidth = markerShapeStyle.lineWidth,\n      markerStroke = markerShapeStyle.stroke,\n    } = this.attributes;\n    // empirical value\n    const strokeWidth = +(markerStrokeWidth || markerLineWidth || (markerStroke ? 1 : 0)) * Math.sqrt(2);\n    const { width, height } = this.markerGroup.node().getBBox();\n    return (1 - strokeWidth / Math.max(width, height)) * markerSize;\n  }\n\n  private renderMarker(container: Selection) {\n    const { marker, classNamePrefix } = this.attributes;\n    const style = subStyleProps(this.attributes, 'marker');\n    this.markerGroup = container.maybeAppendByClassName(CLASS_NAMES.markerGroup, 'g').style('zIndex', 0);\n    ifShow(!!marker, this.markerGroup, () => {\n      const parent = this.markerGroup.node();\n      const oldMarker = parent.childNodes?.[0] as DisplayObject | undefined;\n      const markerClassName = getLegendClassName(CLASS_NAMES.marker.name, CLASSNAME_SUFFIX_MAP.marker, classNamePrefix);\n      const newMarker =\n        typeof marker === 'string' ? new Marker({ style: { symbol: marker }, className: markerClassName }) : marker();\n\n      if (!oldMarker) {\n        if (!(newMarker instanceof Marker)) {\n          const markerClassName = getLegendClassName(\n            CLASS_NAMES.marker.name,\n            CLASSNAME_SUFFIX_MAP.marker,\n            classNamePrefix\n          );\n          (newMarker as any).className = markerClassName;\n          select(newMarker).styles(style);\n        }\n        parent.appendChild(newMarker);\n      } else if (newMarker.nodeName === oldMarker.nodeName) {\n        if (oldMarker instanceof Marker) oldMarker.update({ ...style, symbol: marker });\n        else {\n          copyAttributes(oldMarker, newMarker);\n          select(oldMarker).styles(style);\n        }\n      } else {\n        oldMarker.remove();\n        if (!(newMarker instanceof Marker)) {\n          const markerClassName = getLegendClassName(\n            CLASS_NAMES.marker.name,\n            CLASSNAME_SUFFIX_MAP.marker,\n            classNamePrefix\n          );\n          (newMarker as any).className = markerClassName;\n        }\n        select(newMarker).styles(style);\n        parent.appendChild(newMarker);\n      }\n\n      // record the scale of marker\n      this.markerGroup.node().scale(1 / this.markerGroup.node().getScale()[0]);\n      const scale = scaleToPixel(this.markerGroup.node(), this.scaleSize, true);\n      this.markerGroup.node().style._transform = `scale(${scale})`;\n    });\n  }\n\n  private renderLabel(container: Selection) {\n    const { text: label, ...style } = subStyleProps(this.attributes, 'label');\n    const { classNamePrefix } = this.attributes;\n    this.labelGroup = container.maybeAppendByClassName<Group>(CLASS_NAMES.labelGroup, 'g').style('zIndex', 0);\n    const labelClassName = getLegendClassName(CLASS_NAMES.label.name, CLASSNAME_SUFFIX_MAP.label, classNamePrefix);\n    const labelElement = this.labelGroup.maybeAppendByClassName(CLASS_NAMES.label, () => renderExtDo(label));\n    labelElement.node().setAttribute('class', labelClassName);\n    labelElement.styles(style);\n  }\n\n  private renderValue(container: Selection) {\n    const { text: value, ...style } = subStyleProps(this.attributes, 'value');\n    const { classNamePrefix } = this.attributes;\n    this.valueGroup = container.maybeAppendByClassName(CLASS_NAMES.valueGroup, 'g').style('zIndex', 0);\n    ifShow(this.showValue, this.valueGroup, () => {\n      const valueClassName = getLegendClassName(CLASS_NAMES.value.name, CLASSNAME_SUFFIX_MAP.value, classNamePrefix);\n      const valueElement = this.valueGroup.maybeAppendByClassName(CLASS_NAMES.value, () => renderExtDo(value));\n      valueElement.node().setAttribute('class', valueClassName);\n      valueElement.styles(style);\n    });\n  }\n\n  private createPoptip() {\n    const { poptip } = this.attributes;\n    const { render, ...poptipStyle } = poptip || {};\n    const poptipGroup = new Poptip({ style: deepAssign(DEFAULT_POPTIP_PROPS, poptipStyle) });\n    this.poptipGroup = poptipGroup;\n    return poptipGroup;\n  }\n\n  private bindPoptip(node: DisplayObject) {\n    const { poptip } = this.attributes;\n    if (!poptip) return;\n    const poptipGroup = this.poptipGroup || this.createPoptip();\n    poptipGroup.bind(node, () => {\n      const { labelText, valueText, markerFill } = this.attributes;\n      const label = typeof labelText === 'string' ? labelText : (labelText as DisplayObject)?.attr('text');\n      const value = typeof valueText === 'string' ? valueText : (valueText as DisplayObject)?.attr('text');\n      if (typeof poptip.render === 'function') {\n        return { html: poptip.render({ ...this.keyFields, label, value, color: markerFill as string }) };\n      }\n      let html = '';\n      if (typeof label === 'string' || typeof label === 'number') {\n        html += `<div class=\"component-poptip-label\">${label}</div>`;\n      }\n      if (typeof value === 'string' || typeof value === 'number') {\n        html += `<div class=\"component-poptip-value\">${value}</div>`;\n      }\n      return { html };\n    });\n  }\n\n  private renderFocus(ctn: Selection) {\n    const { focus, focusMarkerSize, classNamePrefix } = this.attributes;\n    const defaultOptions = {\n      x: 0,\n      y: 0,\n      size: focusMarkerSize,\n      opacity: 0.6,\n      symbol: 'focus',\n      stroke: '#aaaaaa',\n      lineWidth: 1,\n    };\n\n    if (isUndefined(focus)) return;\n\n    this.focusGroup = ctn.maybeAppendByClassName<Group>(CLASS_NAMES.focusGroup, 'g').style('zIndex', 0);\n    ifShow(focus, this.focusGroup, () => {\n      const focusClassName = getLegendClassName(\n        CLASS_NAMES.focus.name,\n        CLASSNAME_SUFFIX_MAP.focusIcon,\n        classNamePrefix\n      );\n      const marker = new Marker({\n        style: {\n          ...defaultOptions,\n          symbol: 'focus',\n        },\n        className: focusClassName,\n      });\n      const interactiveCircle = new Circle({\n        style: {\n          r: defaultOptions.size / 2,\n          fill: 'transparent',\n        },\n      });\n\n      const container = this.focusGroup.node();\n      container.appendChild(interactiveCircle);\n      container.appendChild(marker);\n      marker.update({ opacity: 0 });\n\n      ctn.node().addEventListener('pointerenter', () => {\n        marker.update({ opacity: 1 });\n      });\n      ctn.node().addEventListener('pointerleave', () => {\n        marker.update({ opacity: 0 });\n      });\n    });\n  }\n\n  private renderPoptip(ctn: Selection) {\n    const { poptip } = this.attributes;\n    if (!poptip) return;\n    const valueNode = ctn.maybeAppendByClassName(CLASS_NAMES.value, 'g').node();\n    const labelNode = ctn.maybeAppendByClassName(CLASS_NAMES.label, 'g').node();\n    [valueNode, labelNode].forEach((node) => {\n      if (node) {\n        this.bindPoptip(node);\n      }\n    });\n  }\n\n  private renderBackground(container: Selection) {\n    const { width, height } = this.shape;\n    const style = subStyleProps(this.attributes, 'background');\n    this.background = container.maybeAppendByClassName(CLASS_NAMES.backgroundGroup, 'g').style('zIndex', -1);\n    const backgroundElement = this.background.maybeAppendByClassName(CLASS_NAMES.background, 'rect');\n    backgroundElement.styles({ width, height, ...style });\n\n    const { classNamePrefix = '' } = this.attributes;\n    if (classNamePrefix) {\n      const backgroundClassName = getLegendClassName(\n        CLASS_NAMES.background.name,\n        CLASSNAME_SUFFIX_MAP.background,\n        classNamePrefix\n      );\n      backgroundElement.node().setAttribute('class', backgroundClassName);\n    }\n  }\n\n  private adjustLayout() {\n    const {\n      layout: {\n        labelWidth,\n        valueWidth,\n        height,\n        position: [markerX, labelX, valueX, focusX],\n      },\n    } = this;\n    const halfHeight = height / 2;\n\n    // console.log(this.markerGroup.node().style._transform);\n\n    this.markerGroup.styles({\n      transform: `translate(${markerX}, ${halfHeight})${this.markerGroup.node().style._transform}`,\n    });\n    this.labelGroup.styles({ transform: `translate(${labelX}, ${halfHeight})` });\n    if (this.focusGroup) this.focusGroup.styles({ transform: `translate(${focusX}, ${halfHeight})` });\n\n    ellipsisIt(this.labelGroup.select(CLASS_NAMES.label.class).node(), Math.ceil(labelWidth));\n    if (this.showValue) {\n      this.valueGroup.styles({ transform: `translate(${valueX}, ${halfHeight})` });\n      ellipsisIt(this.valueGroup.select(CLASS_NAMES.value.class).node(), Math.ceil(valueWidth));\n    }\n  }\n\n  public render(attributes: CategoryItemStyleProps, container: Group) {\n    const ctn = select(container);\n    const { x = 0, y = 0 } = attributes;\n    ctn.styles({ transform: `translate(${x}, ${y})` });\n    this.renderMarker(ctn);\n    this.renderLabel(ctn);\n    this.renderValue(ctn);\n    this.renderBackground(ctn);\n    this.renderPoptip(ctn);\n    this.renderFocus(ctn);\n    this.adjustLayout();\n  }\n}\n", "import { CustomEvent } from '@antv/g';\nimport { noop, set } from '@antv/util';\nimport type { CallableStyleProps, ComponentOptions, PrefixStyleProps } from '../../../core';\nimport { Component } from '../../../core';\nimport type { GroupStyleProps } from '../../../shapes';\nimport { Group } from '../../../shapes';\nimport type { CallbackParameter } from '../../../types';\nimport {\n  Selection,\n  SeriesAttr,\n  classNames,\n  deepAssign,\n  getCallbackValue,\n  groupBy,\n  select,\n  subStyleProps,\n} from '../../../util';\nimport type { NavigatorStyleProps } from '../../navigator';\nimport { Navigator } from '../../navigator';\nimport { ifHorizontal } from '../utils';\nimport type { CategoryItemStyleProps } from './item';\nimport { CategoryItem } from './item';\nimport type { PoptipStyleProps } from '../../poptip/types';\nimport { getLegendClassName } from '../utils/classname';\nimport { CLASSNAME_SUFFIX_MAP } from '../constant';\n\ninterface CategoryItemsDatum {\n  [keys: string]: any;\n}\n\ntype CallableItemStyle = CallableStyleProps<\n  Omit<CategoryItemStyleProps, 'width' | 'height'>,\n  CallbackParameter<CategoryItemsDatum>\n>;\n\nexport type PoptipRender = {\n  render?: (params: {\n    label: string | number;\n    value: string | number;\n    color?: string;\n    [key: string]: unknown;\n  }) => string;\n};\n\nexport type CategoryItemsStyleProps = GroupStyleProps &\n  PrefixStyleProps<CallableItemStyle, 'item'> &\n  PrefixStyleProps<NavigatorStyleProps, 'nav'> & {\n    data: CategoryItemsDatum[];\n    orientation?: 'horizontal' | 'vertical';\n    layout?: 'flex' | 'grid';\n    x?: number;\n    y?: number;\n    width?: number;\n    height?: number;\n    gridRow?: number;\n    gridCol?: number;\n    // maxItemWidth?: number;\n    padding?: SeriesAttr;\n    rowPadding?: number;\n    colPadding?: number;\n    click?: (el: Selection) => void;\n    mouseenter?: (el: Selection) => void;\n    mouseleave?: (el: Selection) => void;\n    poptip?: PoptipStyleProps & PoptipRender;\n    focus?: boolean;\n    focusMarkerSize?: number;\n    classNamePrefix?: string;\n    render?: (data: CategoryItemsDatum[]) => string | HTMLElement;\n  };\n\nexport type CategoryItemsOptions = ComponentOptions<CategoryItemsStyleProps>;\n\ntype ItemLayout = {\n  page: number;\n  index: number;\n  pageIndex: number;\n  row: number;\n  col: number;\n  x: number;\n  y: number;\n  [keys: string]: any;\n};\n\nconst CLASS_NAMES = classNames(\n  {\n    page: 'item-page',\n    navigator: 'navigator',\n    item: 'item',\n  },\n  'items'\n);\n\n/**\n * if value exists, it need to follow rule, otherwise, return default value\n * @param value\n * @param rule\n * @param defaultValue\n * @returns\n */\nconst ifSatisfied = <T>(value: T, rule: (val: T) => boolean, defaultValue = true) => {\n  if (value) {\n    return rule(value);\n  }\n  return defaultValue;\n};\n\nexport class CategoryItems extends Component<CategoryItemsStyleProps> {\n  constructor(options: CategoryItemsOptions) {\n    super(options, {\n      data: [],\n      gridRow: Infinity,\n      gridCol: undefined,\n      padding: 0,\n      width: 1000,\n      height: 100,\n      rowPadding: 0,\n      colPadding: 0,\n      layout: 'flex',\n      orientation: 'horizontal',\n      click: noop,\n      mouseenter: noop,\n      mouseleave: noop,\n    });\n  }\n\n  private navigator!: Navigator;\n\n  private navigatorShape: [number, number] = [0, 0];\n\n  private get pageViews() {\n    return this.navigator.getContainer();\n  }\n\n  private get grid(): [number, number] {\n    const { gridRow, gridCol, data } = this.attributes;\n    if (!gridRow && !gridCol) throw new Error('gridRow and gridCol can not be set null at the same time');\n    if (!!gridRow && !!gridCol) return [gridRow, gridCol];\n    if (gridRow) return [gridRow, data.length];\n    return [data.length, gridCol!]; // !!gridCol\n  }\n\n  private get renderData() {\n    const { data, layout, poptip, focus, focusMarkerSize, classNamePrefix } = this.attributes;\n    const style = subStyleProps<CategoryItemStyleProps>(this.attributes, 'item');\n\n    const d = data.map((datum, index) => {\n      const { id = index as number, label: labelText, value: valueText } = datum;\n      return {\n        id: `${id}`,\n        index,\n        style: {\n          layout,\n          labelText,\n          valueText,\n          poptip,\n          focus,\n          focusMarkerSize,\n          classNamePrefix,\n          ...Object.fromEntries(\n            Object.entries(style).map(([key, val]) => [key, getCallbackValue(val, [datum, index, data])])\n          ),\n        } as CategoryItemStyleProps,\n      };\n    });\n    return d;\n  }\n\n  private getGridLayout() {\n    const { orientation, width, rowPadding, colPadding } = this.attributes;\n    const [navWidth] = this.navigatorShape;\n    const [gridRow, gridCol] = this.grid;\n    const pageSize = gridCol * gridRow;\n\n    let prevOffset = 0;\n    return (this.pageViews.children as CategoryItem[]).map((item, index) => {\n      // calc page, row and column\n      const page = Math.floor(index / pageSize);\n      const pageIndex = index % pageSize;\n      const dir = this.ifHorizontal(gridCol, gridRow);\n      const pos = [Math.floor(pageIndex / dir), pageIndex % dir];\n      if (orientation === 'vertical') pos.reverse();\n      const [row, col] = pos;\n\n      // calc x, y and shape\n      const colWidth = (width - navWidth - (gridCol - 1) * colPadding) / gridCol;\n      // const rowHeight = getRenderBBox(item).height;\n      const rowHeight = item.getBBox().height;\n\n      let [x, y] = [0, 0];\n      if (orientation === 'horizontal') {\n        [x, y] = [prevOffset, row * (rowHeight + rowPadding)];\n        prevOffset = col === gridCol - 1 ? 0 : prevOffset + colWidth + colPadding;\n      } else {\n        [x, y] = [col * (colWidth + colPadding), prevOffset];\n        prevOffset = row === gridRow - 1 ? 0 : prevOffset + rowHeight + rowPadding;\n      }\n\n      return { page, index, row, col, pageIndex, width: colWidth, height: rowHeight, x, y } as ItemLayout;\n    });\n  }\n\n  private getFlexLayout(): ItemLayout[] {\n    const { width: maxWidth, height: maxHeight, rowPadding, colPadding: cP } = this.attributes;\n    const [navWidth] = this.navigatorShape;\n    const [gridRow, gridCol] = this.grid;\n\n    const [limitWidth, limitHeight] = [maxWidth - navWidth, maxHeight];\n    let [x, y, page, pageIndex, col, row, prevWidth, prevHeight] = [0, 0, 0, 0, 0, 0, 0, 0];\n    return (this.pageViews.children as CategoryItem[]).map((item, index) => {\n      // const { width, height } = getRenderBBox(item);\n      const { width, height } = item.getBBox();\n      const colPadding = prevWidth === 0 ? 0 : cP;\n      // assume that every item has the same height\n      const nextWidth = prevWidth + colPadding + width;\n      // inline\n      if (nextWidth <= limitWidth && ifSatisfied(col, (c) => c < gridCol)) {\n        [x, y, prevWidth] = [prevWidth + colPadding, prevHeight, nextWidth];\n        return { width, height, x, y, page, index, pageIndex: pageIndex++, row, col: col++ };\n      }\n\n      // wrap\n      [row, col, prevWidth, prevHeight] = [row + 1, 0, 0, prevHeight + height + rowPadding];\n      const nextHeight = prevHeight + height;\n      if (nextHeight <= limitHeight && ifSatisfied(row, (r) => r < gridRow)) {\n        [x, y, prevWidth] = [prevWidth, prevHeight, width];\n        return { width, height, x, y, page, index, pageIndex: pageIndex++, row, col: col++ };\n      }\n\n      // paging\n      [x, y, prevWidth, prevHeight, page, pageIndex, row, col] = [0, 0, width, 0, page + 1, 0, 0, 0];\n      return { width, height, x, y, page, index, pageIndex: pageIndex++, row, col: col++ };\n    });\n  }\n\n  private get itemsLayout() {\n    this.navigatorShape = [0, 0];\n    const cb = this.attributes.layout === 'grid' ? this.getGridLayout : this.getFlexLayout;\n    const layout = cb.call(this);\n    // re layout\n    if (layout.slice(-1)[0].page > 0) {\n      this.navigatorShape = [55, 0];\n      return cb.call(this);\n    }\n    return layout;\n  }\n\n  private ifHorizontal<T>(a: T, b: T): T {\n    const { orientation } = this.attributes;\n    return ifHorizontal(orientation, a, b);\n  }\n\n  private flattenPage(container: Group) {\n    container.querySelectorAll(CLASS_NAMES.item.class).forEach((item) => {\n      container.appendChild(item);\n    });\n    container.querySelectorAll(CLASS_NAMES.page.class).forEach((page) => {\n      const removedPage = container.removeChild(page);\n      removedPage.destroy();\n    });\n  }\n\n  private renderItems(container: Group) {\n    const { click, mouseenter, mouseleave, classNamePrefix } = this.attributes;\n    this.flattenPage(container);\n    const dispatchCustomEvent = this.dispatchCustomEvent.bind(this);\n    const itemClassName = getLegendClassName(CLASS_NAMES.item.name, CLASSNAME_SUFFIX_MAP.item, classNamePrefix);\n    select(container)\n      .selectAll(CLASS_NAMES.item.class)\n      .data(this.renderData, (d) => d.id)\n      .join(\n        (enter) =>\n          enter\n            .append(({ style, ...rest }) => new CategoryItem({ style }, rest))\n            .attr('className', itemClassName)\n            .on('click', function () {\n              click?.(this);\n              dispatchCustomEvent('itemClick', { item: this });\n            })\n            .on('pointerenter', function () {\n              mouseenter?.(this);\n              dispatchCustomEvent('itemMouseenter', { item: this });\n            })\n            .on('pointerleave', function () {\n              mouseleave?.(this);\n              dispatchCustomEvent('itemMouseleave', { item: this });\n            }),\n        (update) =>\n          update.each(function ({ style }) {\n            this.update(style);\n          }),\n        (exit) => exit.remove()\n      );\n  }\n\n  private relayoutNavigator() {\n    const { layout, width } = this.attributes;\n    const height = (this.pageViews.children[0] as Group)?.getBBox().height || 0;\n    const [navWidth, navHeight] = this.navigatorShape;\n\n    this.navigator.update(layout === 'grid' ? { pageWidth: width! - navWidth, pageHeight: height - navHeight } : {});\n  }\n\n  private adjustLayout() {\n    const itemsLayouts = Object.entries(groupBy(this.itemsLayout, 'page')).map(([page, layouts]) => ({\n      page,\n      layouts,\n    }));\n    const categoryItems = [...this.navigator.getContainer().children] as CategoryItem[];\n\n    itemsLayouts.forEach(({ layouts }) => {\n      const page = this.pageViews.appendChild(new Group({ className: CLASS_NAMES.page.name }));\n      layouts.forEach((layout) => {\n        const { x, y, index, width, height } = layout;\n        const item = categoryItems[index];\n        // @ts-ignore\n        page.appendChild(item);\n        set(item, '__layout__', layout);\n        item.update({ x, y, width, height });\n      });\n    });\n    this.relayoutNavigator();\n  }\n\n  private renderNavigator(container: Selection) {\n    const { orientation, classNamePrefix } = this.attributes;\n    const navStyle = subStyleProps(this.attributes, 'nav');\n    const style = deepAssign({ orientation, classNamePrefix }, navStyle);\n    const that = this;\n    container\n      .selectAll(CLASS_NAMES.navigator.class)\n      .data(['nav'])\n      .join(\n        (enter) =>\n          enter\n            .append(() => new Navigator({ style }))\n            .attr('className', CLASS_NAMES.navigator.name)\n            .each(function () {\n              that.navigator = this;\n            }),\n        (update) =>\n          update.each(function () {\n            this.update(style);\n          }),\n        (exit) => exit.remove()\n      );\n\n    return this.navigator;\n  }\n\n  public getBBox(): DOMRect {\n    return this.navigator.getBBox();\n  }\n\n  render(attributes: Required<CategoryItemsStyleProps>, container: Group) {\n    const { data } = this.attributes;\n    if (!data || data.length === 0) return;\n    /**\n     * 1. render items\n     * 2. paging\n     * 3. layout\n     */\n    const navigator = this.renderNavigator(select(container));\n\n    this.renderItems(navigator.getContainer());\n    this.adjustLayout();\n  }\n\n  private dispatchCustomEvent(type: string, payload: any) {\n    const evt = new CustomEvent(type, {\n      detail: payload,\n    });\n    this.dispatchEvent(evt as any);\n  }\n}\n", "import { Component } from '../../core';\nimport { HTML, type Group } from '../../shapes';\nimport { BBox, select, Selection, splitStyle, subStyleProps } from '../../util';\nimport type { TitleStyleProps } from './title';\nimport { getBBox, Title } from './title';\nimport { CategoryItems } from './category/items';\nimport { CATEGORY_DEFAULT_OPTIONS, CLASS_NAMES } from './constant';\nimport type { CategoryOptions, CategoryStyleProps } from './types';\n\nexport type { CategoryOptions, CategoryStyleProps };\n\nclass HtmlLegend extends HTML {\n  update(options: any) {\n    this.attr(options);\n  }\n}\n\nexport class Category extends Component<CategoryStyleProps> {\n  constructor(options: CategoryOptions) {\n    super(options, CATEGORY_DEFAULT_OPTIONS);\n  }\n\n  private titleGroup!: Selection;\n\n  private title!: Selection<Title>;\n\n  private itemsGroup!: Selection;\n\n  private items!: Selection<CategoryItems>;\n\n  private renderTitle(container: Selection, width: number, height: number) {\n    const { showTitle, titleText, classNamePrefix } = this.attributes;\n    const style = subStyleProps<TitleStyleProps>(this.attributes, 'title');\n    const [titleStyle, groupStyle] = splitStyle(style);\n\n    this.titleGroup = container.maybeAppendByClassName<Group>(CLASS_NAMES.titleGroup, 'g').styles(groupStyle);\n\n    const finalTitleStyle = { width, height, ...titleStyle, text: showTitle ? titleText : '', classNamePrefix };\n    this.title = this.titleGroup\n      .maybeAppendByClassName(CLASS_NAMES.title, () => new Title({ style: finalTitleStyle as TitleStyleProps }))\n      .update(finalTitleStyle) as Selection<Title>;\n  }\n\n  private renderCustom(container: Selection) {\n    const { data } = this.attributes;\n\n    const style = {\n      innerHTML: this.attributes.render(data),\n      pointerEvents: 'auto' as const,\n    };\n\n    container\n      .maybeAppendByClassName(\n        CLASS_NAMES.html,\n        () =>\n          new HtmlLegend({\n            className: CLASS_NAMES.html.name,\n            style,\n          })\n      )\n      .update(style);\n  }\n\n  private renderItems(container: Selection, bbox: DOMRect) {\n    const { x, y, width, height } = bbox;\n    const style = subStyleProps(this.attributes, 'title', true);\n    const [partialItemStyle, groupStyle] = splitStyle(style);\n    // overwrite width and height to available space\n    // overwrite x and y to 0\n    const itemStyle = { ...partialItemStyle, width, height, x: 0, y: 0 } as CategoryStyleProps;\n    this.itemsGroup = container\n      .maybeAppendByClassName<Group>(CLASS_NAMES.itemsGroup, 'g')\n      .styles({ ...groupStyle, transform: `translate(${x}, ${y})` });\n    const that = this;\n    this.itemsGroup\n      .selectAll(CLASS_NAMES.items.class)\n      .data(['items'])\n      .join(\n        (enter) =>\n          enter\n            .append(() => new CategoryItems({ style: itemStyle }))\n            .attr('className', CLASS_NAMES.items.name)\n            .each(function () {\n              that.items = select(this);\n            }),\n        (update) => update.update(itemStyle),\n        (exit) => exit.remove()\n      );\n  }\n\n  private adjustLayout() {\n    const { showTitle } = this.attributes;\n    if (showTitle) {\n      const { x, y } = this.title.node<Title>().getAvailableSpace();\n      this.itemsGroup.node().style.transform = `translate(${x}, ${y})`;\n    }\n  }\n\n  private get availableSpace(): DOMRect {\n    const { showTitle, width, height } = this.attributes;\n    if (!showTitle) return new BBox(0, 0, width!, height!);\n    return (this.title.node() as Title).getAvailableSpace();\n  }\n\n  public getBBox(): DOMRect {\n    const title: Title = this.title?.node();\n    const items = this.items?.node();\n    if (!title || !items) return super.getBBox();\n    return getBBox(title, items);\n  }\n\n  render(attributes: Required<CategoryStyleProps>, container: Group) {\n    const { width, height, x = 0, y = 0, classNamePrefix, render } = this.attributes;\n    const ctn = select(container);\n\n    // Set root container className\n    const baseClassName = container.className || 'legend-category';\n    if (classNamePrefix) {\n      container.attr('className', `${baseClassName} ${classNamePrefix}legend`);\n    } else if (!container.className) {\n      container.attr('className', 'legend-category');\n    }\n\n    container.style.transform = `translate(${x}, ${y})`;\n\n    if (render as CategoryStyleProps['render']) {\n      this.renderCustom(ctn);\n    } else {\n      this.renderTitle(ctn, width!, height!);\n\n      this.renderItems(ctn, this.availableSpace);\n\n      this.adjustLayout();\n    }\n  }\n}\n", null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, "const token = /d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\\1?|[aA]|\"[^\"]*\"|'[^']*'/g;\nconst twoDigitsOptional = \"\\\\d\\\\d?\";\nconst twoDigits = \"\\\\d\\\\d\";\nconst threeDigits = \"\\\\d{3}\";\nconst fourDigits = \"\\\\d{4}\";\nconst word = \"[^\\\\s]+\";\nconst literal = /\\[([^]*?)\\]/gm;\n\ntype DateInfo = {\n  year: number;\n  month: number;\n  day: number;\n  hour: number;\n  minute: number;\n  second: number;\n  millisecond: number;\n  isPm: number | null;\n  timezoneOffset: number | null;\n};\n\nexport type I18nSettings = {\n  amPm: [string, string];\n  dayNames: Days;\n  dayNamesShort: Days;\n  monthNames: Months;\n  monthNamesShort: Months;\n  DoFn(dayOfMonth: number): string;\n};\n\nexport type I18nSettingsOptional = Partial<I18nSettings>;\n\nexport type Days = [string, string, string, string, string, string, string];\nexport type Months = [\n  string,\n  string,\n  string,\n  string,\n  string,\n  string,\n  string,\n  string,\n  string,\n  string,\n  string,\n  string\n];\n\nfunction shorten<T extends string[]>(arr: T, sLen: number): string[] {\n  const newArr: string[] = [];\n  for (let i = 0, len = arr.length; i < len; i++) {\n    newArr.push(arr[i].substr(0, sLen));\n  }\n  return newArr;\n}\n\nconst monthUpdate = (\n  arrName: \"monthNames\" | \"monthNamesShort\" | \"dayNames\" | \"dayNamesShort\"\n) => (v: string, i18n: I18nSettings): number | null => {\n  const lowerCaseArr = i18n[arrName].map(v => v.toLowerCase());\n  const index = lowerCaseArr.indexOf(v.toLowerCase());\n  if (index > -1) {\n    return index;\n  }\n  return null;\n};\n\nexport function assign<A>(a: A): A;\nexport function assign<A, B>(a: A, b: B): A & B;\nexport function assign<A, B, C>(a: A, b: B, c: C): A & B & C;\nexport function assign<A, B, C, D>(a: A, b: B, c: C, d: D): A & B & C & D;\nexport function assign(origObj: any, ...args: any[]): any {\n  for (const obj of args) {\n    for (const key in obj) {\n      // @ts-ignore ex\n      origObj[key] = obj[key];\n    }\n  }\n  return origObj;\n}\n\nconst dayNames: Days = [\n  \"Sunday\",\n  \"Monday\",\n  \"Tuesday\",\n  \"Wednesday\",\n  \"Thursday\",\n  \"Friday\",\n  \"Saturday\"\n];\nconst monthNames: Months = [\n  \"January\",\n  \"February\",\n  \"March\",\n  \"April\",\n  \"May\",\n  \"June\",\n  \"July\",\n  \"August\",\n  \"September\",\n  \"October\",\n  \"November\",\n  \"December\"\n];\n\nconst monthNamesShort: Months = shorten(monthNames, 3) as Months;\nconst dayNamesShort: Days = shorten(dayNames, 3) as Days;\n\nconst defaultI18n: I18nSettings = {\n  dayNamesShort,\n  dayNames,\n  monthNamesShort,\n  monthNames,\n  amPm: [\"am\", \"pm\"],\n  DoFn(dayOfMonth: number) {\n    return (\n      dayOfMonth +\n      [\"th\", \"st\", \"nd\", \"rd\"][\n        dayOfMonth % 10 > 3\n          ? 0\n          : ((dayOfMonth - (dayOfMonth % 10) !== 10 ? 1 : 0) * dayOfMonth) % 10\n      ]\n    );\n  }\n};\nlet globalI18n = assign({}, defaultI18n);\nconst setGlobalDateI18n = (i18n: I18nSettingsOptional): I18nSettings =>\n  (globalI18n = assign(globalI18n, i18n));\n\nconst regexEscape = (str: string): string =>\n  str.replace(/[|\\\\{()[^$+*?.-]/g, \"\\\\$&\");\n\nconst pad = (val: string | number, len = 2): string => {\n  val = String(val);\n  while (val.length < len) {\n    val = \"0\" + val;\n  }\n  return val;\n};\n\nconst formatFlags: Record<\n  string,\n  (dateObj: Date, i18n: I18nSettings) => string\n> = {\n  D: (dateObj: Date): string => String(dateObj.getDate()),\n  DD: (dateObj: Date): string => pad(dateObj.getDate()),\n  Do: (dateObj: Date, i18n: I18nSettings): string =>\n    i18n.DoFn(dateObj.getDate()),\n  d: (dateObj: Date): string => String(dateObj.getDay()),\n  dd: (dateObj: Date): string => pad(dateObj.getDay()),\n  ddd: (dateObj: Date, i18n: I18nSettings): string =>\n    i18n.dayNamesShort[dateObj.getDay()],\n  dddd: (dateObj: Date, i18n: I18nSettings): string =>\n    i18n.dayNames[dateObj.getDay()],\n  M: (dateObj: Date): string => String(dateObj.getMonth() + 1),\n  MM: (dateObj: Date): string => pad(dateObj.getMonth() + 1),\n  MMM: (dateObj: Date, i18n: I18nSettings): string =>\n    i18n.monthNamesShort[dateObj.getMonth()],\n  MMMM: (dateObj: Date, i18n: I18nSettings): string =>\n    i18n.monthNames[dateObj.getMonth()],\n  YY: (dateObj: Date): string =>\n    pad(String(dateObj.getFullYear()), 4).substr(2),\n  YYYY: (dateObj: Date): string => pad(dateObj.getFullYear(), 4),\n  h: (dateObj: Date): string => String(dateObj.getHours() % 12 || 12),\n  hh: (dateObj: Date): string => pad(dateObj.getHours() % 12 || 12),\n  H: (dateObj: Date): string => String(dateObj.getHours()),\n  HH: (dateObj: Date): string => pad(dateObj.getHours()),\n  m: (dateObj: Date): string => String(dateObj.getMinutes()),\n  mm: (dateObj: Date): string => pad(dateObj.getMinutes()),\n  s: (dateObj: Date): string => String(dateObj.getSeconds()),\n  ss: (dateObj: Date): string => pad(dateObj.getSeconds()),\n  S: (dateObj: Date): string =>\n    String(Math.round(dateObj.getMilliseconds() / 100)),\n  SS: (dateObj: Date): string =>\n    pad(Math.round(dateObj.getMilliseconds() / 10), 2),\n  SSS: (dateObj: Date): string => pad(dateObj.getMilliseconds(), 3),\n  a: (dateObj: Date, i18n: I18nSettings): string =>\n    dateObj.getHours() < 12 ? i18n.amPm[0] : i18n.amPm[1],\n  A: (dateObj: Date, i18n: I18nSettings): string =>\n    dateObj.getHours() < 12\n      ? i18n.amPm[0].toUpperCase()\n      : i18n.amPm[1].toUpperCase(),\n  ZZ(dateObj: Date): string {\n    const offset = dateObj.getTimezoneOffset();\n    return (\n      (offset > 0 ? \"-\" : \"+\") +\n      pad(Math.floor(Math.abs(offset) / 60) * 100 + (Math.abs(offset) % 60), 4)\n    );\n  },\n  Z(dateObj: Date): string {\n    const offset = dateObj.getTimezoneOffset();\n    return (\n      (offset > 0 ? \"-\" : \"+\") +\n      pad(Math.floor(Math.abs(offset) / 60), 2) +\n      \":\" +\n      pad(Math.abs(offset) % 60, 2)\n    );\n  }\n};\n\ntype ParseInfo = [\n  keyof DateInfo,\n  string,\n  ((v: string, i18n: I18nSettings) => number | null)?,\n  string?\n];\nconst monthParse = (v: string): number => +v - 1;\nconst emptyDigits: ParseInfo = [null, twoDigitsOptional];\nconst emptyWord: ParseInfo = [null, word];\nconst amPm: ParseInfo = [\n  \"isPm\",\n  word,\n  (v: string, i18n: I18nSettings): number | null => {\n    const val = v.toLowerCase();\n    if (val === i18n.amPm[0]) {\n      return 0;\n    } else if (val === i18n.amPm[1]) {\n      return 1;\n    }\n    return null;\n  }\n];\nconst timezoneOffset: ParseInfo = [\n  \"timezoneOffset\",\n  \"[^\\\\s]*?[\\\\+\\\\-]\\\\d\\\\d:?\\\\d\\\\d|[^\\\\s]*?Z?\",\n  (v: string): number | null => {\n    const parts = (v + \"\").match(/([+-]|\\d\\d)/gi);\n\n    if (parts) {\n      const minutes = +parts[1] * 60 + parseInt(parts[2], 10);\n      return parts[0] === \"+\" ? minutes : -minutes;\n    }\n\n    return 0;\n  }\n];\nconst parseFlags: Record<string, ParseInfo> = {\n  D: [\"day\", twoDigitsOptional],\n  DD: [\"day\", twoDigits],\n  Do: [\"day\", twoDigitsOptional + word, (v: string): number => parseInt(v, 10)],\n  M: [\"month\", twoDigitsOptional, monthParse],\n  MM: [\"month\", twoDigits, monthParse],\n  YY: [\n    \"year\",\n    twoDigits,\n    (v: string): number => {\n      const now = new Date();\n      const cent = +(\"\" + now.getFullYear()).substr(0, 2);\n      return +(\"\" + (+v > 68 ? cent - 1 : cent) + v);\n    }\n  ],\n  h: [\"hour\", twoDigitsOptional, undefined, \"isPm\"],\n  hh: [\"hour\", twoDigits, undefined, \"isPm\"],\n  H: [\"hour\", twoDigitsOptional],\n  HH: [\"hour\", twoDigits],\n  m: [\"minute\", twoDigitsOptional],\n  mm: [\"minute\", twoDigits],\n  s: [\"second\", twoDigitsOptional],\n  ss: [\"second\", twoDigits],\n  YYYY: [\"year\", fourDigits],\n  S: [\"millisecond\", \"\\\\d\", (v: string): number => +v * 100],\n  SS: [\"millisecond\", twoDigits, (v: string): number => +v * 10],\n  SSS: [\"millisecond\", threeDigits],\n  d: emptyDigits,\n  dd: emptyDigits,\n  ddd: emptyWord,\n  dddd: emptyWord,\n  MMM: [\"month\", word, monthUpdate(\"monthNamesShort\")],\n  MMMM: [\"month\", word, monthUpdate(\"monthNames\")],\n  a: amPm,\n  A: amPm,\n  ZZ: timezoneOffset,\n  Z: timezoneOffset\n};\n\n// Some common format strings\nconst globalMasks: { [key: string]: string } = {\n  default: \"ddd MMM DD YYYY HH:mm:ss\",\n  shortDate: \"M/D/YY\",\n  mediumDate: \"MMM D, YYYY\",\n  longDate: \"MMMM D, YYYY\",\n  fullDate: \"dddd, MMMM D, YYYY\",\n  isoDate: \"YYYY-MM-DD\",\n  isoDateTime: \"YYYY-MM-DDTHH:mm:ssZ\",\n  shortTime: \"HH:mm\",\n  mediumTime: \"HH:mm:ss\",\n  longTime: \"HH:mm:ss.SSS\"\n};\nconst setGlobalDateMasks = (masks: {\n  [key: string]: string;\n}): { [key: string]: string } => assign(globalMasks, masks);\n\n/***\n * Format a date\n * @method format\n * @param {Date|number} dateObj\n * @param {string} mask Format of the date, i.e. 'mm-dd-yy' or 'shortDate'\n * @returns {string} Formatted date string\n */\nconst format = (\n  dateObj: Date,\n  mask: string = globalMasks[\"default\"],\n  i18n: I18nSettingsOptional = {}\n): string => {\n  if (typeof dateObj === \"number\") {\n    dateObj = new Date(dateObj);\n  }\n\n  if (\n    Object.prototype.toString.call(dateObj) !== \"[object Date]\" ||\n    isNaN(dateObj.getTime())\n  ) {\n    throw new Error(\"Invalid Date pass to format\");\n  }\n\n  mask = globalMasks[mask] || mask;\n\n  const literals: string[] = [];\n\n  // Make literals inactive by replacing them with @@@\n  mask = mask.replace(literal, function($0, $1) {\n    literals.push($1);\n    return \"@@@\";\n  });\n\n  const combinedI18nSettings: I18nSettings = assign(\n    assign({}, globalI18n),\n    i18n\n  );\n  // Apply formatting rules\n  mask = mask.replace(token, $0 =>\n    formatFlags[$0](dateObj, combinedI18nSettings)\n  );\n  // Inline literal values back into the formatted value\n  return mask.replace(/@@@/g, () => literals.shift());\n};\n\n/**\n * Parse a date string into a Javascript Date object /\n * @method parse\n * @param {string} dateStr Date string\n * @param {string} format Date parse format\n * @param {i18n} I18nSettingsOptional Full or subset of I18N settings\n * @returns {Date|null} Returns Date object. Returns null what date string is invalid or doesn't match format\n */\nfunction parse(\n  dateStr: string,\n  format: string,\n  i18n: I18nSettingsOptional = {}\n): Date | null {\n  if (typeof format !== \"string\") {\n    throw new Error(\"Invalid format in fecha parse\");\n  }\n\n  // Check to see if the format is actually a mask\n  format = globalMasks[format] || format;\n\n  // Avoid regular expression denial of service, fail early for really long strings\n  // https://www.owasp.org/index.php/Regular_expression_Denial_of_Service_-_ReDoS\n  if (dateStr.length > 1000) {\n    return null;\n  }\n\n  // Default to the beginning of the year.\n  const today = new Date();\n  const dateInfo: DateInfo = {\n    year: today.getFullYear(),\n    month: 0,\n    day: 1,\n    hour: 0,\n    minute: 0,\n    second: 0,\n    millisecond: 0,\n    isPm: null,\n    timezoneOffset: null\n  };\n  const parseInfo: ParseInfo[] = [];\n  const literals: string[] = [];\n\n  // Replace all the literals with @@@. Hopefully a string that won't exist in the format\n  let newFormat = format.replace(literal, ($0, $1) => {\n    literals.push(regexEscape($1));\n    return \"@@@\";\n  });\n  const specifiedFields: { [field: string]: boolean } = {};\n  const requiredFields: { [field: string]: boolean } = {};\n\n  // Change every token that we find into the correct regex\n  newFormat = regexEscape(newFormat).replace(token, $0 => {\n    const info = parseFlags[$0];\n    const [field, regex, , requiredField] = info;\n\n    // Check if the person has specified the same field twice. This will lead to confusing results.\n    if (specifiedFields[field]) {\n      throw new Error(`Invalid format. ${field} specified twice in format`);\n    }\n\n    specifiedFields[field] = true;\n\n    // Check if there are any required fields. For instance, 12 hour time requires AM/PM specified\n    if (requiredField) {\n      requiredFields[requiredField] = true;\n    }\n\n    parseInfo.push(info);\n    return \"(\" + regex + \")\";\n  });\n\n  // Check all the required fields are present\n  Object.keys(requiredFields).forEach(field => {\n    if (!specifiedFields[field]) {\n      throw new Error(\n        `Invalid format. ${field} is required in specified format`\n      );\n    }\n  });\n\n  // Add back all the literals after\n  newFormat = newFormat.replace(/@@@/g, () => literals.shift());\n\n  // Check if the date string matches the format. If it doesn't return null\n  const matches = dateStr.match(new RegExp(newFormat, \"i\"));\n  if (!matches) {\n    return null;\n  }\n\n  const combinedI18nSettings: I18nSettings = assign(\n    assign({}, globalI18n),\n    i18n\n  );\n\n  // For each match, call the parser function for that date part\n  for (let i = 1; i < matches.length; i++) {\n    const [field, , parser] = parseInfo[i - 1];\n    const value = parser\n      ? parser(matches[i], combinedI18nSettings)\n      : +matches[i];\n\n    // If the parser can't make sense of the value, return null\n    if (value == null) {\n      return null;\n    }\n\n    dateInfo[field] = value;\n  }\n\n  if (dateInfo.isPm === 1 && dateInfo.hour != null && +dateInfo.hour !== 12) {\n    dateInfo.hour = +dateInfo.hour + 12;\n  } else if (dateInfo.isPm === 0 && +dateInfo.hour === 12) {\n    dateInfo.hour = 0;\n  }\n\n  let dateTZ: Date;\n  if (dateInfo.timezoneOffset == null) {\n    dateTZ = new Date(\n      dateInfo.year,\n      dateInfo.month,\n      dateInfo.day,\n      dateInfo.hour,\n      dateInfo.minute,\n      dateInfo.second,\n      dateInfo.millisecond\n    );\n    const validateFields: [\n      \"month\" | \"day\" | \"hour\" | \"minute\" | \"second\",\n      \"getMonth\" | \"getDate\" | \"getHours\" | \"getMinutes\" | \"getSeconds\"\n    ][] = [\n      [\"month\", \"getMonth\"],\n      [\"day\", \"getDate\"],\n      [\"hour\", \"getHours\"],\n      [\"minute\", \"getMinutes\"],\n      [\"second\", \"getSeconds\"]\n    ];\n    for (let i = 0, len = validateFields.length; i < len; i++) {\n      // Check to make sure the date field is within the allowed range. Javascript dates allows values\n      // outside the allowed range. If the values don't match the value was invalid\n      if (\n        specifiedFields[validateFields[i][0]] &&\n        dateInfo[validateFields[i][0]] !== dateTZ[validateFields[i][1]]()\n      ) {\n        return null;\n      }\n    }\n  } else {\n    dateTZ = new Date(\n      Date.UTC(\n        dateInfo.year,\n        dateInfo.month,\n        dateInfo.day,\n        dateInfo.hour,\n        dateInfo.minute - dateInfo.timezoneOffset,\n        dateInfo.second,\n        dateInfo.millisecond\n      )\n    );\n\n    // We can't validate dates in another timezone unfortunately. Do a basic check instead\n    if (\n      dateInfo.month > 11 ||\n      dateInfo.month < 0 ||\n      dateInfo.day > 31 ||\n      dateInfo.day < 1 ||\n      dateInfo.hour > 23 ||\n      dateInfo.hour < 0 ||\n      dateInfo.minute > 59 ||\n      dateInfo.minute < 0 ||\n      dateInfo.second > 59 ||\n      dateInfo.second < 0\n    ) {\n      return null;\n    }\n  }\n\n  // Don't allow invalid dates\n\n  return dateTZ;\n}\nexport default {\n  format,\n  parse,\n  defaultI18n,\n  setGlobalDateI18n,\n  setGlobalDateMasks\n};\nexport { format, parse, defaultI18n, setGlobalDateI18n, setGlobalDateMasks };\n", null, null, "import type { IndicatorStyleProps } from './types';\n\nexport const DEFAULT_INDICATOR_STYLE_PROPS: Partial<IndicatorStyleProps> = {\n  backgroundFill: '#262626',\n  backgroundLineCap: 'round',\n  backgroundLineWidth: 1,\n  backgroundStroke: '#333',\n  backgroundZIndex: -1,\n  formatter: (val) => val.toString(),\n  labelFill: '#fff',\n  labelFontSize: 12,\n  labelTextBaseline: 'middle',\n  padding: [2, 4],\n  position: 'right',\n  radius: 0,\n  zIndex: 999,\n};\n", "import { ElementEvent } from '@antv/g';\nimport type { PathArray } from '@antv/util';\nimport { Component } from '../../core';\nimport { Group } from '../../shapes';\nimport type { Point } from '../../types';\nimport {\n  BBox,\n  Selection,\n  classNames,\n  hide,\n  isHorizontal,\n  parseSeriesAttr,\n  renderExtDo,\n  select,\n  show,\n  splitStyle,\n  subStyleProps,\n} from '../../util';\nimport { DEFAULT_INDICATOR_STYLE_PROPS } from './constant';\nimport type { IndicatorOptions, IndicatorStyleProps, Position } from './types';\n\nexport type { IndicatorOptions, IndicatorStyleProps };\n\ntype Edge = [Point, Point];\n\nconst CLASS_NAMES = classNames(\n  {\n    background: 'background',\n    labelGroup: 'label-group',\n    label: 'label',\n  },\n  'indicator'\n);\nexport class Indicator extends Component<IndicatorStyleProps> {\n  constructor(options: IndicatorOptions) {\n    super(options, DEFAULT_INDICATOR_STYLE_PROPS);\n    this.group = this.appendChild(new Group({}));\n    this.isMutationObserved = true;\n  }\n\n  private group: Group;\n\n  private background!: Selection;\n\n  private label!: Selection;\n\n  private point: Point = [0, 0];\n\n  private renderBackground() {\n    if (!this.label) return;\n    const { position, padding } = this.attributes;\n    const [t, r, b, l] = parseSeriesAttr(padding);\n    const { min, max } = this.label.node().getLocalBounds();\n    const bbox: BBox = new BBox(min[0] - l, min[1] - t, max[0] + r - min[0] + l, max[1] + b - min[1] + t);\n    const path = this.getPath(position, bbox);\n\n    const style = subStyleProps(this.attributes, 'background');\n\n    this.background = select(this.group)\n      .maybeAppendByClassName(CLASS_NAMES.background, 'path')\n      .styles({ ...style, d: path });\n    this.group.appendChild(this.label.node());\n  }\n\n  private renderLabel() {\n    const { formatter, labelText } = this.attributes;\n\n    const style = subStyleProps(this.attributes, 'label');\n    const [{ text: rawText, ...textStyle }, groupStyle] = splitStyle(style);\n\n    this.label = select(this.group).maybeAppendByClassName(CLASS_NAMES.labelGroup, 'g').styles(groupStyle);\n    if (!labelText) return;\n    const text = this.label\n      .maybeAppendByClassName(CLASS_NAMES.label, () => renderExtDo(formatter(labelText)))\n      .style('text', formatter(labelText).toString());\n    text.selectAll('text').styles(textStyle);\n  }\n\n  private adjustLayout() {\n    const [dx, dy] = this.point;\n    const { x, y } = this.attributes;\n    this.group.attr('transform', `translate(${x - dx}, ${y - dy})`);\n  }\n\n  private getPath(position: Position, bbox: BBox) {\n    const { radius: r } = this.attributes;\n    const { x, y, width, height } = bbox;\n\n    const pathArray: PathArray = [\n      // 0 \n      ['M', x + r, y],\n      // 1 \n      ['L', x + width - r, y],\n      // 2 \n      ['A', r, r, 0, 0, 1, x + width, y + r],\n      // 3 \n      ['L', x + width, y + height - r],\n      // 4 \n      ['A', r, r, 0, 0, 1, x + width - r, y + height],\n      // 5 \n      ['L', x + r, y + height],\n      // 6 \n      ['A', r, r, 0, 0, 1, x, y + height - r],\n      // 7 \n      ['L', x, y + r],\n      // 8 \n      ['A', r, r, 0, 0, 1, x + r, y],\n      // 9 \n      ['Z'],\n    ];\n\n    //  position \n    const revertPositionMap = { top: 4, right: 6, bottom: 0, left: 2 };\n    const index = revertPositionMap[position];\n    const newPath: any = this.createCorner([pathArray[index].slice(-2) as any, pathArray[index + 1].slice(-2) as any]);\n    // \n    pathArray.splice(index + 1, 1, ...newPath);\n    pathArray[0][0] = 'M';\n    return pathArray;\n  }\n\n  private createCorner(edge: Edge, size: number = 10) {\n    // intrinsic parameter\n    const cornerScale = 0.8;\n    const isH = isHorizontal(...edge);\n    const [[x0, y0], [x1, y1]] = edge;\n    const [len, [b0, b1]] = isH ? [x1 - x0, [x0, x1]] : [y1 - y0, [y0, y1]];\n    const hL = len / 2;\n    const sign = len / Math.abs(len);\n    const cL = size * sign;\n    const hCL = cL / 2;\n    const cS = ((cL * Math.sqrt(3)) / 2) * cornerScale;\n    const [a0, a1, a2, a3, a4] = [b0, b0 + hL - hCL, b0 + hL, b0 + hL + hCL, b1];\n\n    if (isH) {\n      this.point = [a2, y0 - cS];\n      return [\n        ['L', a0, y0],\n        ['L', a1, y0],\n        ['L', a2, y0 - cS],\n        ['L', a3, y0],\n        ['L', a4, y0],\n      ];\n    }\n    this.point = [x0 + cS, a2];\n    return [\n      ['L', x0, a0],\n      ['L', x0, a1],\n      ['L', x0 + cS, a2],\n      ['L', x0, a3],\n      ['L', x0, a4],\n    ];\n  }\n\n  private applyVisibility() {\n    const { visibility } = this.attributes;\n    if (visibility === 'hidden') hide(this);\n    else show(this);\n  }\n\n  public bindEvents() {\n    this.label.on(ElementEvent.BOUNDS_CHANGED, this.renderBackground);\n  }\n\n  public render() {\n    this.renderLabel();\n    this.renderBackground();\n    this.adjustLayout();\n    this.applyVisibility();\n  }\n}\n", "import { classNames } from '../../util';\n\nexport const HANDLE_ICON_DEFAULT_CFG = {\n  fill: '#fff',\n  lineWidth: 1,\n  radius: 2,\n  size: 10,\n  stroke: '#bfbfbf',\n  strokeOpacity: 1,\n  zIndex: 0,\n} as const;\n\nexport const HANDLE_LABEL_DEFAULT_CFG = {\n  fill: '#000',\n  fillOpacity: 0.45,\n  fontSize: 12,\n  textAlign: 'center',\n  textBaseline: 'middle',\n  zIndex: 1,\n} as const;\n\nexport const HANDLE_DEFAULT_CFG = {\n  x: 0,\n  y: 0,\n  orientation: 'horizontal',\n  showLabel: true,\n  type: 'start',\n} as const;\n\nexport const CLASS_NAMES = classNames(\n  {\n    foreground: 'foreground',\n    handle: 'handle',\n    selection: 'selection',\n    sparkline: 'sparkline',\n    sparklineGroup: 'sparkline-group',\n    track: 'track',\n    brushArea: 'brush-area',\n  },\n  'slider'\n);\n", "import { ComponentOptions, Component, PrefixStyleProps } from '../../core';\nimport type { DisplayObject, GroupStyleProps, PathStyleProps, TextStyleProps } from '../../shapes';\nimport { Group } from '../../shapes';\nimport type { Selection } from '../../util';\nimport { classNames, ifShow, select, splitStyle, subStyleProps } from '../../util';\nimport { HANDLE_DEFAULT_CFG, HANDLE_ICON_DEFAULT_CFG, HANDLE_LABEL_DEFAULT_CFG } from './constant';\n\nexport type HandleType = 'start' | 'end';\n\nexport type IconStyleProps = PathStyleProps & {\n  x?: number;\n  y?: number;\n  size?: number;\n  radius?: number;\n  shape?: string | ((type: HandleType) => DisplayObject);\n  orientation?: 'horizontal' | 'vertical';\n  classNamePrefix?: string;\n};\n\nexport type LabelStyleProps = Partial<TextStyleProps>;\n\nexport type HandleStyleProps = GroupStyleProps &\n  PrefixStyleProps<LabelStyleProps, 'label'> &\n  PrefixStyleProps<IconStyleProps, 'icon'> & {\n    x?: number;\n    y?: number;\n    orientation?: IconStyleProps['orientation'];\n    showLabel?: boolean;\n    spacing?: number;\n    type?: HandleType;\n    classNamePrefix?: string;\n  };\n\nexport type HandleOptions = ComponentOptions<HandleStyleProps>;\n\nconst CLASS_NAMES = classNames(\n  {\n    labelGroup: 'label-group',\n    label: 'label',\n    iconGroup: 'icon-group',\n    icon: 'icon',\n    iconRect: 'icon-rect',\n    iconLine: 'icon-line',\n  },\n  'handle'\n);\n\nclass HandleIcon extends Component<IconStyleProps> {\n  render(attributes: Required<IconStyleProps>, container: DisplayObject) {\n    const { x, y, size = 10, radius = size / 4, orientation, classNamePrefix, ...iconStyle } = attributes;\n    // default handle\n    const width = size!;\n    const height = width * 2.4;\n\n    const rectClassName = classNamePrefix\n      ? `${CLASS_NAMES.iconRect.name} ${classNamePrefix}handle-icon-rect`\n      : CLASS_NAMES.iconRect.name;\n\n    const lineClassName = (index: number) =>\n      classNamePrefix\n        ? `${CLASS_NAMES.iconLine}-${index} ${classNamePrefix}handle-icon-line`\n        : `${CLASS_NAMES.iconLine}-${index}`;\n\n    const rect = select(container)\n      .maybeAppendByClassName(CLASS_NAMES.iconRect, 'rect')\n      .attr('className', rectClassName)\n      .styles({\n        ...iconStyle,\n        width,\n        height,\n        radius,\n        x: x - width / 2,\n        y: y - height / 2,\n        transformOrigin: 'center',\n      });\n\n    const x1 = x + (1 / 3) * width - width / 2;\n    const x2 = x + (2 / 3) * width - width / 2;\n    const y1 = y + (1 / 4) * height - height / 2;\n    const y2 = y + (3 / 4) * height - height / 2;\n\n    rect\n      .maybeAppendByClassName(`${CLASS_NAMES.iconLine}-1`, 'line')\n      .attr('className', lineClassName(1))\n      .styles({\n        x1,\n        x2: x1,\n        y1,\n        y2,\n        ...iconStyle,\n      });\n\n    rect\n      .maybeAppendByClassName(`${CLASS_NAMES.iconLine}-2`, 'line')\n      .attr('className', lineClassName(2))\n      .styles({\n        x1: x2,\n        x2,\n        y1,\n        y2,\n        ...iconStyle,\n      });\n\n    if (orientation === 'vertical') rect.node().style.transform = 'rotate(90)';\n  }\n}\n\nexport class Handle extends Component<HandleStyleProps> {\n  private label!: Selection;\n\n  private icon!: Selection;\n\n  constructor(options: HandleOptions) {\n    super(options, HANDLE_DEFAULT_CFG);\n  }\n\n  private renderLabel(container: Group) {\n    const { x, y, showLabel } = this.attributes;\n    const {\n      x: labelX = 0,\n      y: labelY = 0,\n      transform,\n      transformOrigin,\n      ...style\n    } = subStyleProps(this.attributes, 'label');\n    const [labelStyle, groupStyle] = splitStyle(style, []);\n\n    const labelGroup = select(container).maybeAppendByClassName(CLASS_NAMES.labelGroup, 'g').styles(groupStyle);\n\n    // @ts-ignore\n    const { text, ...rest } = { ...HANDLE_LABEL_DEFAULT_CFG, ...labelStyle };\n    ifShow(!!showLabel, labelGroup, (group) => {\n      this.label = group.maybeAppendByClassName(CLASS_NAMES.label, 'text').styles({\n        ...rest,\n        x: x + labelX,\n        y: y + labelY,\n        transform,\n        transformOrigin,\n        text: `${text}`,\n      });\n\n      /** avoid trigger event on label */\n      this.label.on('mousedown', (e: MouseEvent) => {\n        e.stopPropagation();\n      });\n      this.label.on('touchstart', (e: MouseEvent) => {\n        e.stopPropagation();\n      });\n    });\n  }\n\n  private renderIcon(container: Group) {\n    const { x, y, orientation, type, classNamePrefix } = this.attributes;\n    const iconStyle = {\n      x,\n      y,\n      orientation,\n      classNamePrefix,\n      ...HANDLE_ICON_DEFAULT_CFG,\n      ...subStyleProps(this.attributes, 'icon'),\n    };\n    const { iconShape = () => new HandleIcon({ style: iconStyle }) } = this.attributes;\n    const iconGroup = select(container).maybeAppendByClassName(CLASS_NAMES.iconGroup, 'g');\n    iconGroup\n      .selectAll(CLASS_NAMES.icon.class)\n      .data([iconShape])\n      .join(\n        (enter) =>\n          enter\n            .append(typeof iconShape === 'string' ? iconShape : () => iconShape(type))\n            .attr('className', CLASS_NAMES.icon.name),\n        (update) => update.update(iconStyle),\n        (exit) => exit.remove()\n      );\n  }\n\n  public render(attributes: HandleStyleProps, container: Group) {\n    this.renderIcon(container);\n    this.renderLabel(container);\n  }\n}\n", "function search(array: number[], value: number) {\n  for (let i = 1; i < array.length; i += 1) {\n    const st = array[i - 1];\n    const end = array[i];\n    if (value >= st && value <= end) {\n      return [st, end];\n    }\n  }\n  return [value, value];\n}\n\nexport function getBlockColor(partition: number[], color: string[], orientation: string) {\n  const colors = Array.from(color);\n  const count = partition.length;\n\n  return new Array(count).fill(0).reduce((r, v, idx) => {\n    const c = colors[idx % colors.length];\n    return (r += ` ${partition[idx]}:${c}${idx < count - 1 ? ` ${partition[idx + 1]}:${c}` : ''}`);\n  }, `l(${orientation === 'horizontal' ? '0' : '270'})`);\n}\n\nexport function getNextTickValue(ticks: number[], value: number) {\n  const [v1, v2] = search(ticks, value);\n  return { tick: value > (v1 + v2) / 2 ? v2 : v1, range: [v1, v2] };\n}\n", "import { parseColor } from '@antv/g';\nimport { isFunction } from '@antv/util';\nimport type { ComponentOptions, PrefixStyleProps } from '../../../core';\nimport { Component } from '../../../core';\nimport type { GroupStyleProps, PathStyleProps, RectStyleProps } from '../../../shapes';\nimport { Group } from '../../../shapes';\nimport { classNames, select, Selection, subStyleProps } from '../../../util';\nimport { CLASSNAME_SUFFIX_MAP } from '../constant';\nimport { getLegendClassName } from '../utils/classname';\nimport { ifHorizontal } from '../utils';\nimport { getBlockColor } from './utils';\n\nexport type Interpolate<T = string> = (val: number) => T;\n\nexport type RibbonStyleProps = GroupStyleProps &\n  PrefixStyleProps<PathStyleProps, 'selection'> &\n  PrefixStyleProps<RectStyleProps, 'track'> & {\n    block?: boolean;\n    color: string[] | Interpolate;\n    length: number;\n    orientation?: 'horizontal' | 'vertical';\n    /** partition of the block ,the length of it is the block count */\n    partition?: number[];\n    /** select area, 0~1 */\n    range?: [number, number];\n    size: number;\n    type?: 'size' | 'color';\n    classNamePrefix?: string;\n  };\n\nexport type RibbonOptions = ComponentOptions<RibbonStyleProps>;\n\ntype RequiredRibbonStyleProps = Required<RibbonStyleProps>;\n\nconst CLASS_NAMES = classNames(\n  {\n    trackGroup: 'background-group',\n    track: 'background',\n    selectionGroup: 'ribbon-group',\n    selection: 'ribbon',\n    clipPath: 'clip-path',\n  },\n  'ribbon'\n);\n\nfunction getShape(attr: RequiredRibbonStyleProps) {\n  const { orientation, size, length } = attr;\n\n  return ifHorizontal(orientation, [length, size], [size, length]);\n}\n\nfunction getTrackPath(attr: RequiredRibbonStyleProps) {\n  const { type } = attr;\n  const [cw, ch] = getShape(attr);\n\n  if (type === 'size') {\n    return [['M', 0, ch], ['L', 0 + cw, 0], ['L', 0 + cw, ch], ['Z']] as any[];\n  }\n  return [['M', 0, ch], ['L', 0, 0], ['L', 0 + cw, 0], ['L', 0 + cw, ch], ['Z']] as any[];\n}\n\nfunction getSelectionPath(attr: RequiredRibbonStyleProps) {\n  return getTrackPath(attr);\n}\n\nfunction getColor(attr: RequiredRibbonStyleProps) {\n  const { orientation, color, block, partition } = attr;\n  let colors: string[];\n  if (isFunction(color)) {\n    const len = 20;\n    colors = new Array(len).fill(0).map((_, index, arr) => color(index / (arr.length - 1)));\n  } else colors = color;\n\n  const count = colors.length;\n  const genericColor = colors.map((c) => parseColor(c).toString());\n  if (!count) return '';\n  if (count === 1) return genericColor[0];\n  if (block) return getBlockColor(partition, genericColor, orientation);\n  return genericColor.reduce(\n    (r, c, idx) => (r += ` ${idx / (count - 1)}:${c}`),\n    `l(${ifHorizontal(orientation, '0', '270')})`\n  );\n}\n\nfunction getClipPath(attr: RequiredRibbonStyleProps): any[] {\n  const { orientation, range } = attr;\n  if (!range) return [];\n  const [width, height] = getShape(attr);\n  const [st, et] = range;\n  const x = ifHorizontal(orientation, st * width, 0);\n  const y = ifHorizontal(orientation, 0, st * height);\n  const w = ifHorizontal(orientation, et * width, width);\n  const h = ifHorizontal(orientation, height, et * height);\n  return [['M', x, y], ['L', x, h], ['L', w, h], ['L', w, y], ['Z']];\n}\n\nfunction renderTrack(container: Selection, attr: RequiredRibbonStyleProps) {\n  const style = subStyleProps(attr, 'track');\n  const { classNamePrefix } = attr;\n  const trackClassName = getLegendClassName(CLASS_NAMES.track.name, CLASSNAME_SUFFIX_MAP.track, classNamePrefix);\n\n  container\n    .maybeAppendByClassName(CLASS_NAMES.track, 'path')\n    .attr('className', trackClassName)\n    .styles({ d: getTrackPath(attr), ...style });\n}\n\nfunction renderSelection(container: Selection, attr: RequiredRibbonStyleProps) {\n  const style = subStyleProps(attr, 'selection');\n  const fill = getColor(attr);\n  const { classNamePrefix } = attr;\n  const selectionClassName = getLegendClassName(\n    CLASS_NAMES.selection.name,\n    CLASSNAME_SUFFIX_MAP.selection,\n    classNamePrefix\n  );\n\n  const ribbon = container\n    .maybeAppendByClassName(CLASS_NAMES.selection, 'path')\n    .attr('className', selectionClassName)\n    .styles({ d: getSelectionPath(attr), fill, ...style });\n  const clipPath = ribbon\n    .maybeAppendByClassName(CLASS_NAMES.clipPath, 'path')\n    .styles({ d: getClipPath(attr) })\n    .node();\n  ribbon.style('clipPath', clipPath);\n}\n\nexport class Ribbon extends Component<RibbonStyleProps> {\n  constructor(options: RibbonOptions) {\n    super(options, {\n      type: 'color',\n      orientation: 'horizontal',\n      size: 30,\n      range: [0, 1],\n      length: 200,\n      block: false,\n      partition: [],\n      color: ['#fff', '#000'],\n      trackFill: '#e5e5e5',\n    });\n  }\n\n  render(attribute: RequiredRibbonStyleProps, container: Group) {\n    const trackGroup = select(container).maybeAppendByClassName(CLASS_NAMES.trackGroup, 'g');\n    renderTrack(trackGroup, attribute);\n\n    /**\n     * - ribbon group\n     *  |- ribbon\n     * - clip path\n     */\n    const ribbonGroup = select(container).maybeAppendByClassName(CLASS_NAMES.selectionGroup, 'g');\n    renderSelection(ribbonGroup, attribute);\n  }\n}\n", "import { CustomEvent } from '@antv/g';\nimport { Linear } from '@antv/scale';\nimport { clamp, isUndefined } from '@antv/util';\nimport { Component } from '../../core';\nimport type { DisplayObject, TextStyleProps } from '../../shapes';\nimport { Group } from '../../shapes';\nimport { Point } from '../../types';\nimport {\n  BBox,\n  Selection,\n  deepAssign,\n  getEventPos,\n  hide,\n  ifShow,\n  select,\n  show,\n  subStyleProps,\n  superStyleProps,\n  toPrecision,\n} from '../../util';\nimport type { LinearAxisStyleProps } from '../axis';\nimport { Axis } from '../axis';\nimport { CLASS_NAMES as AXIS_CLASS_NAMES } from '../axis/constant';\nimport type { IndicatorStyleProps } from '../indicator';\nimport { Indicator } from '../indicator';\nimport { Handle as SliderHandle } from '../slider/handle';\nimport { Title } from './title';\nimport { CLASS_NAMES, CLASSNAME_SUFFIX_MAP, CONTINUOUS_DEFAULT_OPTIONS, STEP_RATIO } from './constant';\nimport { getLegendClassName } from './utils/classname';\nimport type { HandleStyleProps, HandleType } from './continuous/handle';\nimport { Handle } from './continuous/handle';\nimport type { RibbonStyleProps } from './continuous/ribbon';\nimport { Ribbon } from './continuous/ribbon';\nimport { getNextTickValue } from './continuous/utils';\nimport { ContinuousDatum, ContinuousOptions, ContinuousStyleProps } from './types';\nimport { getSafetySelections, getStepValueByValue, ifHorizontal } from './utils';\n\nexport type { ContinuousOptions, ContinuousStyleProps };\n\nfunction getMinMax(data: ContinuousDatum[]) {\n  return {\n    min: Math.min(...data.map((d) => d.value)),\n    max: Math.max(...data.map((d) => d.value)),\n  };\n}\n\nexport class Continuous extends Component<ContinuousStyleProps> {\n  constructor(options: ContinuousOptions) {\n    super(options, CONTINUOUS_DEFAULT_OPTIONS);\n  }\n\n  protected eventToOffsetScale = new Linear({});\n\n  protected innerRibbonScale = new Linear({});\n\n  protected title?: Title;\n\n  protected label!: Axis;\n\n  protected ribbon!: Selection;\n\n  protected indicator!: Selection;\n\n  protected get handleOffsetRatio() {\n    return this.ifHorizontal(0.5, 0.5);\n  }\n\n  protected handlesGroup!: Selection;\n\n  protected startHandle?: Handle;\n\n  protected endHandle?: Handle;\n\n  public getBBox(): DOMRect {\n    const { width, height } = this.attributes;\n    return new BBox(0, 0, width, height);\n  }\n\n  public render(attributes: Required<ContinuousStyleProps>, container: Group) {\n    // Set root container className\n    const { classNamePrefix } = attributes;\n    const baseClassName = container.className || 'legend-continuous';\n    if (classNamePrefix) {\n      container.attr('className', `${baseClassName} ${classNamePrefix}legend`);\n    } else if (!container.className) {\n      container.attr('className', 'legend-continuous');\n    }\n\n    // \n    // 1.  title, \n    // 2.  label, handle\n    // 3. labelhandle  ribbon \n    // 4.  ribbon\n    // 5.  labelhandle \n    const { showLabel } = attributes;\n\n    /** title */\n    this.renderTitle(select(container));\n\n    const { x, y } = this.availableSpace;\n\n    /** label */\n\n    /** content */\n    const contentGroup = select(container)\n      .maybeAppendByClassName(CLASS_NAMES.contentGroup, 'g')\n      .styles({ transform: `translate(${x}, ${y})` });\n\n    const labelGroup = contentGroup.maybeAppendByClassName(CLASS_NAMES.labelGroup, 'g').styles({ zIndex: 1 });\n    ifShow(!!showLabel, labelGroup, (group) => {\n      this.renderLabel(group);\n    });\n\n    const ribbonGroup = contentGroup.maybeAppendByClassName(CLASS_NAMES.ribbonGroup, 'g').styles({ zIndex: 0 });\n\n    /** handle */\n    this.handlesGroup = contentGroup.maybeAppendByClassName(CLASS_NAMES.handlesGroup, 'g').styles({ zIndex: 2 });\n    this.renderHandles();\n\n    /** ribbon */\n    this.renderRibbon(ribbonGroup);\n\n    this.renderIndicator(contentGroup);\n\n    /** adjust */\n    this.adjustLabel();\n    this.adjustHandles();\n    // this.adjustTitle();\n  }\n\n  private get range() {\n    const { data, domain } = this.attributes;\n    return domain ? { min: domain[0], max: domain[1] } : getMinMax(data);\n  }\n\n  private get ribbonScale() {\n    const { min, max } = this.range;\n    this.innerRibbonScale.update({\n      domain: [min, max],\n      range: [0, 1],\n    });\n    return this.innerRibbonScale;\n  }\n\n  private get ribbonRange() {\n    const [min, max] = this.selection;\n    const scale = this.ribbonScale;\n    return [scale.map(min), scale.map(max)];\n  }\n\n  public get selection() {\n    const { min, max } = this.range;\n    const { defaultValue: [start, end] = [min, max] } = this.attributes;\n    return [start, end] as [number, number];\n  }\n\n  protected ifHorizontal<T>(a: T, b: T): T {\n    return ifHorizontal(\n      this.attributes.orientation,\n      typeof a === 'function' ? a() : a,\n      typeof b === 'function' ? b() : b\n    );\n  }\n\n  private renderTitle(container: Selection) {\n    const { showTitle, titleText, width, height, classNamePrefix } = this.attributes;\n    const style = subStyleProps<TextStyleProps>(this.attributes, 'title');\n    const finalTitleStyle = { ...style, width, height, text: titleText, classNamePrefix };\n    const that = this;\n    container\n      .selectAll(CLASS_NAMES.title.class)\n      .data(showTitle ? [titleText] : [])\n      .join(\n        (enter) =>\n          enter\n            .append(() => new Title({ style: finalTitleStyle }))\n            .attr('className', CLASS_NAMES.title.name)\n            .each(function () {\n              that.title = this;\n            }),\n        (update) => update.update(finalTitleStyle),\n        (exit) =>\n          exit\n            .each(() => {\n              that.title = undefined;\n            })\n            .remove()\n      );\n  }\n\n  private get availableSpace() {\n    if (this.title) return this.title.getAvailableSpace();\n    const { width, height } = this.attributes;\n    return new BBox(0, 0, width, height);\n  }\n\n  private get labelFixedSpacing() {\n    const { showTick } = this.attributes;\n    return showTick ? 5 : 0;\n  }\n\n  private get labelPosition() {\n    const { orientation, labelDirection } = this.attributes;\n    const positions = {\n      vertical: { positive: 'right', negative: 'left' },\n      horizontal: { positive: 'bottom', negative: 'top' },\n    } as const;\n    return positions[orientation][labelDirection];\n  }\n\n  private cacheLabelBBox: DOMRect | null = null;\n\n  private get labelBBox() {\n    const { showLabel } = this.attributes;\n    if (!showLabel) return new BBox(0, 0, 0, 0);\n    if (this.cacheLabelBBox) return this.cacheLabelBBox;\n    const { width, height } = (\n      this.label.querySelector(AXIS_CLASS_NAMES.labelGroup.class)?.children.slice(-1)[0] as DisplayObject\n    ).getBBox();\n    this.cacheLabelBBox = new BBox(0, 0, width, height);\n    return this.cacheLabelBBox;\n  }\n\n  private get labelShape() {\n    const { showLabel, labelSpacing = 0 } = this.attributes;\n    if (!showLabel) return { width: 0, height: 0, size: 0, length: 0 };\n    const { width, height } = this.labelBBox;\n    const size = this.ifHorizontal(height, width) + labelSpacing + this.labelFixedSpacing;\n    const length = this.ifHorizontal(width, height);\n    return { width, height, size, length };\n  }\n\n  private get ribbonBBox(): DOMRect {\n    const { showHandle, ribbonSize: userDefinedRibbonSize } = this.attributes;\n    const { width: availableWidth, height: availableHeight } = this.availableSpace;\n\n    const { size: labelSize, length: labelLength } = this.labelShape;\n\n    const [availableSize, availableLength] = this.ifHorizontal(\n      [availableHeight, availableWidth],\n      [availableWidth, availableHeight]\n    );\n    const { size: handleSize, length: handleLength } = showHandle ? this.handleShape : { size: 0, length: 0 };\n    const handleRatio = this.handleOffsetRatio;\n\n    let ribbonSize = 0;\n    const labelPosition = this.labelPosition;\n    if (userDefinedRibbonSize) {\n      ribbonSize = userDefinedRibbonSize;\n    } else if (['bottom', 'right'].includes(labelPosition)) {\n      ribbonSize = Math.min(availableSize - labelSize, (availableSize - handleSize) / handleRatio);\n    } else if (availableSize * (1 - handleRatio) > handleSize) {\n      ribbonSize = Math.max(availableSize - labelSize, 0);\n    } else ribbonSize = Math.max((availableSize - labelSize - handleSize) / handleRatio, 0);\n\n    const edgeLength = Math.max(handleLength, labelLength);\n    const ribbonLength = availableLength - edgeLength;\n\n    const [width, height] = this.ifHorizontal([ribbonLength, ribbonSize], [ribbonSize, ribbonLength]);\n\n    //  handle \n    // todo  handle  ribbon handle size \n    const finalLabelOccupy = ['top', 'left'].includes(labelPosition) ? labelSize : 0;\n\n    const [x, y] = this.ifHorizontal([edgeLength / 2, finalLabelOccupy], [finalLabelOccupy, edgeLength / 2]);\n\n    return new BBox(x, y, width, height);\n  }\n\n  private get ribbonShape() {\n    const { width, height } = this.ribbonBBox;\n    return this.ifHorizontal({ size: height, length: width }, { size: width, length: height });\n  }\n\n  private renderRibbon(container: Selection) {\n    const { data, type, orientation, color, block, classNamePrefix } = this.attributes;\n    const ribbonStyle = subStyleProps(this.attributes, 'ribbon');\n    const { min, max } = this.range;\n    const { x, y } = this.ribbonBBox;\n    const { length, size } = this.ribbonShape;\n    const style: Required<RibbonStyleProps> = deepAssign(\n      {\n        transform: `translate(${x}, ${y})`,\n        length,\n        size,\n        type,\n        orientation,\n        color,\n        block,\n        partition: data.map((d) => (d.value - min) / (max - min)),\n        range: this.ribbonRange,\n        classNamePrefix,\n      },\n      ribbonStyle\n    );\n\n    const ribbonClassName = getLegendClassName(CLASS_NAMES.ribbon.name, CLASSNAME_SUFFIX_MAP.ribbon, classNamePrefix);\n    this.ribbon = container\n      .maybeAppendByClassName(\n        CLASS_NAMES.ribbon,\n        () =>\n          new Ribbon({\n            style,\n            className: ribbonClassName,\n          })\n      )\n      .update(style);\n  }\n\n  private getHandleClassName(type: HandleType) {\n    // @ts-ignore\n    return `${CLASS_NAMES.prefix(`${type}-handle`)}`;\n  }\n\n  private renderHandles() {\n    const { showHandle, orientation, classNamePrefix } = this.attributes;\n    const handleStyle = subStyleProps<HandleStyleProps>(this.attributes, 'handle');\n    const [min, max] = this.selection;\n    const style = { ...handleStyle, orientation, classNamePrefix };\n    const { shape = 'slider' } = handleStyle;\n    const HandleCtor = shape === 'basic' ? Handle : SliderHandle;\n\n    const that = this;\n    const baseHandleClassName = getLegendClassName(\n      CLASS_NAMES.handle.name,\n      CLASSNAME_SUFFIX_MAP.handle,\n      classNamePrefix\n    );\n    this.handlesGroup\n      .selectAll(CLASS_NAMES.handle.class)\n      .data(\n        showHandle\n          ? [\n              { value: min, type: 'start' },\n              { value: max, type: 'end' },\n            ]\n          : [],\n        (d) => d.type\n      )\n      .join(\n        (enter) =>\n          enter\n            .append(() => new HandleCtor({ style, className: baseHandleClassName }))\n            .attr(\n              'className',\n              ({ type }: any) => `${baseHandleClassName} ${that.getHandleClassName(type as HandleType)}`\n            )\n            .each(function ({ type, value: labelText }) {\n              this.update({ labelText });\n              const name = `${type}Handle` as `${HandleType}Handle`;\n              that[name] = this;\n              this.addEventListener('pointerdown', that.onDragStart(type));\n            }),\n        (update) =>\n          update.update(style).each(function ({ value: labelText }) {\n            this.update({ labelText });\n          }),\n        (exit) =>\n          exit\n            .each(({ type }) => {\n              const name = `${type}Handle` as `${HandleType}Handle`;\n              that[name] = undefined;\n            })\n            .remove()\n      );\n  }\n\n  private adjustHandles() {\n    const [min, max] = this.selection;\n    this.setHandlePosition('start', min);\n    this.setHandlePosition('end', max);\n\n    // Update SliderHandle sub-elements className after rendering\n    const { classNamePrefix, showHandle } = this.attributes;\n    const { shape = 'slider' } = subStyleProps<HandleStyleProps>(this.attributes, 'handle');\n    if (showHandle && shape === 'slider' && classNamePrefix) {\n      if (this.startHandle) this.updateSliderHandleClassNames(this.startHandle, classNamePrefix);\n      if (this.endHandle) this.updateSliderHandleClassNames(this.endHandle, classNamePrefix);\n    }\n  }\n\n  /**\n   * Update SliderHandle sub-elements className to use legend prefix\n   * SliderHandle generates: handle-icon-rect, handle-icon-line, handle-label\n   * Should add legend className: g2-legend-handle-marker, g2-legend-handle-label\n   */\n  private updateSliderHandleClassNames(handle: any, classNamePrefix: string) {\n    // Get the actual DOM node from the component\n    const container = handle.container || handle;\n\n    // Update icon elements (rect and lines) to use handleMarker suffix\n    const iconRect = container.querySelector('.handle-icon-rect');\n    if (iconRect) {\n      const markerClassName = getLegendClassName(\n        'handle-icon-rect',\n        CLASSNAME_SUFFIX_MAP.handleMarker,\n        classNamePrefix\n      );\n      iconRect.setAttribute('class', markerClassName);\n\n      // Line elements are children of rect element\n      const iconLines = iconRect.querySelectorAll('line');\n      iconLines.forEach((line: any) => {\n        const currentClass = line.getAttribute('class') || '';\n        const baseClass = currentClass.split(' ')[0]; // e.g., 'handle-icon-line-1'\n        const markerClassName = getLegendClassName(baseClass, CLASSNAME_SUFFIX_MAP.handleMarker, classNamePrefix);\n        line.setAttribute('class', markerClassName);\n      });\n    }\n\n    // Update label element to use handleLabel suffix\n    const label = container.querySelector('.handle-label');\n    if (label) {\n      const labelClassName = getLegendClassName('handle-label', CLASSNAME_SUFFIX_MAP.handleLabel, classNamePrefix);\n      label.setAttribute('class', labelClassName);\n    }\n  }\n\n  private cacheHandleBBox: DOMRect | null = null;\n\n  private get handleBBox() {\n    if (this.cacheHandleBBox) return this.cacheHandleBBox;\n    if (!this.attributes.showHandle) return new BBox(0, 0, 0, 0);\n    const { width: startHandleWidth, height: startHandleHeight } = this.startHandle!.getBBox();\n    const { width: endHandleWidth, height: endHandleHeight } = this.endHandle!.getBBox();\n    const [width, height] = [Math.max(startHandleWidth, endHandleWidth), Math.max(startHandleHeight, endHandleHeight)];\n    this.cacheHandleBBox = new BBox(0, 0, width, height);\n    return this.cacheHandleBBox;\n  }\n\n  /**\n   *   handle label  handle bbox  bbox\n   */\n  private get handleShape() {\n    const { width, height } = this.handleBBox;\n    const [size, length] = this.ifHorizontal([height, width], [width, height]);\n    return { width, height, size, length };\n  }\n\n  private setHandlePosition(type: HandleType, value: number) {\n    const { handleFormatter } = this.attributes;\n    const { x: ribbonX, y: ribbonY } = this.ribbonBBox;\n    const { size: ribbonSize } = this.ribbonShape;\n    const offset = this.getOffset(value);\n    const [x, y] = this.ifHorizontal(\n      [ribbonX + offset, ribbonY + ribbonSize * this.handleOffsetRatio],\n      [ribbonX + ribbonSize * this.handleOffsetRatio, ribbonY + offset]\n    );\n    const handle: Handle = this.handlesGroup.select(`.${this.getHandleClassName(type)}`).node();\n    handle?.update({ transform: `translate(${x}, ${y})`, formatter: handleFormatter });\n  }\n\n  private renderIndicator(container: Selection) {\n    const { classNamePrefix } = this.attributes;\n    const style = subStyleProps<IndicatorStyleProps>(this.attributes, 'indicator');\n    const indicatorClassName = getLegendClassName(\n      CLASS_NAMES.indicator.name,\n      CLASSNAME_SUFFIX_MAP.indicator,\n      classNamePrefix\n    );\n    this.indicator = container\n      .maybeAppendByClassName(\n        CLASS_NAMES.indicator,\n        () =>\n          new Indicator({\n            style,\n            className: indicatorClassName,\n          })\n      )\n      .update(style);\n    // this.hideIndicator();\n  }\n\n  private get labelData(): ContinuousDatum[] {\n    const { data } = this.attributes;\n    return data.reduce((acc, curr, index, arr) => {\n      const id = curr?.id ?? index.toString();\n      acc.push({\n        ...curr,\n        id,\n        index,\n        type: 'value',\n        label: curr?.label ?? curr.value.toString(),\n        value: this.ribbonScale.map(curr.value),\n      });\n      if (index < arr.length - 1) {\n        const next = arr[index + 1];\n        const [cr, nx] = [curr.value, next.value];\n        const midVal = (cr + nx) / 2;\n        acc.push({\n          ...curr,\n          id,\n          index,\n          type: 'range',\n          range: [cr, nx],\n          label: [cr, nx].join('~'),\n          value: this.ribbonScale.map(midVal),\n        });\n      }\n      return acc;\n    }, [] as ContinuousDatum[]);\n  }\n\n  private get labelStyle() {\n    let [labelTextAlign, labelTextBaseline] = ['center', 'middle'];\n\n    const labelPosition = this.labelPosition;\n    if (labelPosition === 'top') labelTextBaseline = 'bottom';\n    else if (labelPosition === 'bottom') labelTextBaseline = 'top';\n    else if (labelPosition === 'left') labelTextAlign = 'end';\n    else if (labelPosition === 'right') labelTextAlign = 'start';\n\n    return {\n      labelTextAlign,\n      labelTextBaseline,\n    };\n  }\n\n  private renderLabel(container: Selection) {\n    const { showTick = false, labelFilter, labelFormatter } = this.attributes;\n    const tickStyle = subStyleProps(this.attributes, 'tick');\n    const labelStyle = subStyleProps(this.attributes, 'label');\n    const { align } = labelStyle;\n\n    const style = deepAssign(\n      {\n        showLine: false,\n        showGrid: false,\n        showTick,\n        type: 'linear',\n        startPos: [0, 0],\n        endPos: [0, 0],\n        tickDirection: 'negative',\n        labelTransform: 'rotate(0)',\n        ...this.labelStyle,\n      },\n      superStyleProps(tickStyle, 'tick'),\n      superStyleProps(labelStyle, 'label'),\n      { data: this.labelData }\n    ) as LinearAxisStyleProps;\n\n    const functionStyle = {\n      tickFilter: (datum: ContinuousDatum, index: number, data: ContinuousDatum[]) => {\n        if (datum?.type !== 'value') return false;\n        if (labelFilter)\n          return labelFilter(\n            datum,\n            datum.index,\n            data.filter((d) => d.type !== 'value')\n          );\n        return true;\n      },\n      labelFilter: (datum: ContinuousDatum, index: number, data: ContinuousDatum[]) => {\n        if (datum?.type !== align) return false;\n        if (labelFilter)\n          return labelFilter(\n            datum,\n            datum.index,\n            data.filter((d) => d.type === align)\n          );\n        return true;\n      },\n      labelFormatter,\n    };\n\n    const finalLabelStyle = { ...style, ...functionStyle, labelOverlap: [{ type: 'hide' }] } as LinearAxisStyleProps;\n\n    this.label = container.maybeAppendByClassName(CLASS_NAMES.label, () => new Axis({ style: finalLabelStyle })).node();\n    this.label.update(finalLabelStyle, false);\n  }\n\n  private get labelAxisStyle() {\n    // @ts-ignore\n    const { showTick, labelDirection, labelSpacing, tickLength: definedTickLength } = this.attributes;\n\n    const { size: ribbonSize } = this.ribbonShape;\n    const labelPosition = this.labelPosition;\n    const labelFixedSpacing = this.labelFixedSpacing;\n    let [offset, spacing, tickLength] = [0, 0, 0];\n\n    const internalVal = definedTickLength ?? ribbonSize;\n\n    if (showTick) {\n      tickLength = internalVal;\n      spacing = labelFixedSpacing;\n      if (labelDirection === 'positive') {\n        if (labelPosition === 'right') {\n          offset = internalVal;\n          tickLength = internalVal;\n        } else if (labelPosition === 'bottom') offset = tickLength;\n      } else if (labelDirection === 'negative') {\n        if (labelPosition === 'top') offset = ribbonSize;\n        else if (labelPosition === 'left') offset = ribbonSize;\n      }\n    } else if (labelDirection === 'positive') {\n      if (labelPosition === 'right') spacing = internalVal;\n      else if (labelPosition === 'bottom') {\n        offset = ribbonSize + labelFixedSpacing;\n        spacing = labelSpacing;\n      }\n    } else if (labelDirection === 'negative') {\n      if (labelPosition === 'left') spacing = labelSpacing;\n      else if (labelPosition === 'top') spacing = labelSpacing;\n    }\n\n    return { offset, spacing, tickLength };\n  }\n\n  private adjustLabel() {\n    const { showLabel } = this.attributes as Required<ContinuousStyleProps>;\n    if (!showLabel) return;\n    const { x, y, width, height } = this.ribbonBBox;\n    const { offset: axisOffset, spacing: axisSpacing, tickLength: axisTickLength } = this.labelAxisStyle;\n    const [startPos, endPos]: [[number, number], [number, number]] = this.ifHorizontal(\n      [\n        [x, y + axisOffset],\n        [x + width, y + axisOffset],\n      ],\n      [\n        [x + axisOffset, y + height],\n        [x + axisOffset, y],\n      ]\n    );\n\n    this.label.update(\n      {\n        startPos,\n        endPos,\n        tickLength: axisTickLength,\n        labelSpacing: axisSpacing,\n      },\n      false\n    );\n  }\n\n  /**  */\n  private target!: string | undefined;\n\n  /**  */\n  private prevValue!: number;\n\n  public bindEvents() {\n    this.style.cursor = 'pointer';\n    //  drag \n    this.ribbon.on('pointerdown', this.onDragStart('ribbon'));\n    this.ribbon.on('pointermove', this.onHovering);\n    this.addEventListener('pointerout', this.hideIndicator);\n  }\n\n  private onHovering = (e: any) => {\n    const { data, block } = this.attributes;\n    e.stopPropagation();\n    const value = this.getValueByCanvasPoint(e);\n    if (block) {\n      const { range } = getNextTickValue(\n        data.map(({ value }) => value),\n        value\n      );\n\n      const selection = this.getRealSelection(range);\n      this.showIndicator((range[0] + range[1]) / 2, `${selection[0]}-${selection[1]}`);\n      this.dispatchIndicated(value, range);\n    } else {\n      const safetyValue = this.getTickValue(value);\n      this.showIndicator(safetyValue, `${this.getRealValue(safetyValue)}`);\n      this.dispatchIndicated(safetyValue);\n    }\n  };\n\n  public showIndicator(value: number, text = `${value}`) {\n    const { showIndicator } = this.attributes;\n    if (!showIndicator || typeof value !== 'number') {\n      this.hideIndicator();\n      return;\n    }\n    const { min, max } = this.range;\n    const { x, y } = this.ribbonBBox;\n    const safeValue = clamp(value, min, max);\n    const offset = this.getOffset(safeValue);\n    const pos: Point = this.ifHorizontal([offset + x, y], [x, offset + y]);\n\n    this.indicator.update({\n      x: pos[0],\n      y: pos[1],\n      position: this.ifHorizontal('top', 'left'),\n      labelText: text,\n    });\n    show(this.indicator.node());\n  }\n\n  private hideIndicator() {\n    hide(this.indicator.node());\n  }\n\n  private onDragStart = (target: string) => (e: any) => {\n    e.stopPropagation();\n\n    // \n    if (!this.attributes.slidable) return;\n    this.target = target;\n\n    this.prevValue = this.getTickValue(this.getValueByCanvasPoint(e));\n    document.addEventListener('mousemove', this.onDragging);\n    document.addEventListener('touchmove', this.onDragging);\n    document.addEventListener('mouseleave', this.onDragEnd);\n    document.addEventListener('mouseup', this.onDragEnd);\n    document.addEventListener('mouseup', this.onDragEnd);\n    document.addEventListener('touchend', this.onDragEnd);\n  };\n\n  private onDragging = (e: any) => {\n    const { target } = this;\n    this.updateMouse();\n    const [start, end] = this.selection;\n    const currValue = this.getTickValue(this.getValueByCanvasPoint(e));\n    const diffValue = currValue - this.prevValue;\n\n    if (target === 'start') start !== currValue && this.updateSelection(currValue, end);\n    else if (target === 'end') end !== currValue && this.updateSelection(start, currValue);\n    else if (target === 'ribbon' && diffValue !== 0) {\n      this.prevValue = currValue;\n      this.updateSelection(diffValue, diffValue, true);\n    }\n  };\n\n  private onDragEnd = () => {\n    this.style.cursor = 'pointer';\n    document.removeEventListener('mousemove', this.onDragging);\n    document.removeEventListener('touchmove', this.onDragging);\n    document.removeEventListener('mouseup', this.onDragEnd);\n    document.removeEventListener('touchend', this.onDragEnd);\n  };\n\n  private updateMouse() {\n    if (this.attributes.slidable) this.style.cursor = 'grabbing';\n  }\n\n  public setSelection(start: number, end: number) {\n    this.updateSelection(start, end);\n  }\n\n  private updateSelection(stVal: number, endVal: number, isOffset: boolean = false) {\n    const [currSt, currEnd] = this.selection;\n\n    let [start, end] = [stVal, endVal];\n    if (isOffset) {\n      // \n      start += currSt;\n      end += currEnd;\n    }\n    // \n    const { min, max } = this.range;\n    [start, end] = getSafetySelections([min, max], [start, end], this.selection);\n    this.update({ defaultValue: [start, end] });\n    this.dispatchSelection();\n  }\n\n  private get step(): number {\n    const { step = 1 } = this.attributes;\n    const { min, max } = this.range;\n    if (isUndefined(step)) return toPrecision((max - min) * STEP_RATIO, 0);\n    return step;\n  }\n\n  private getTickValue(value: number): number {\n    const { data, block } = this.attributes;\n    const { min } = this.range;\n    if (block)\n      return getNextTickValue(\n        data.map(({ value }) => value),\n        value\n      ).tick;\n    return getStepValueByValue(value, this.step, min);\n  }\n\n  /**\n   * value\n   */\n  private getValueByCanvasPoint(e: any) {\n    const { min, max } = this.range;\n    const [x, y] = this.ribbon.node().getPosition();\n    const startPos = this.ifHorizontal(x, y);\n    const currValue = this.ifHorizontal(...getEventPos(e));\n    const offset = currValue - startPos;\n    const value = clamp(this.getOffset(offset, true), min, max);\n    return value;\n  }\n\n  /** reverse:  ->  */\n  private getOffset(value: number, reverse = false) {\n    const { min, max } = this.range;\n    const { length: ribbonLen } = this.ribbonShape;\n    const scale = this.eventToOffsetScale;\n    scale.update({ domain: [min, max], range: [0, ribbonLen] });\n    if (reverse) return scale.invert(value);\n    return scale.map(value);\n  }\n\n  private getRealSelection(range: number[]) {\n    const { max } = this.range;\n    const [start, end] = range;\n\n    return this.ifHorizontal([start, end], [max - end, max - start]);\n  }\n\n  private getRealValue(value: number) {\n    const { max } = this.range;\n\n    return this.ifHorizontal(value, max - value);\n  }\n\n  private dispatchSelection() {\n    const selection = this.getRealSelection(this.selection);\n\n    const evt = new CustomEvent('valuechange', {\n      detail: {\n        value: selection,\n      },\n    });\n    this.dispatchEvent(evt as any);\n  }\n\n  private dispatchIndicated(value: number, range?: number[]) {\n    const { max } = this.range;\n\n    const detail = this.ifHorizontal(\n      () => {\n        return {\n          value,\n          range,\n        };\n      },\n      () => {\n        return {\n          value: max - value,\n          range: range ? this.getRealSelection(range) : undefined,\n        };\n      }\n    );\n\n    const evt = new CustomEvent('indicate', {\n      detail,\n    });\n    this.dispatchEvent(evt as any);\n  }\n}\n", "export function getClassNames(prefixCls: string = '') {\n  return {\n    CONTAINER: `${prefixCls}tooltip`,\n    TITLE: `${prefixCls}tooltip-title`,\n    LIST: `${prefixCls}tooltip-list`,\n    LIST_ITEM: `${prefixCls}tooltip-list-item`,\n    NAME: `${prefixCls}tooltip-list-item-name`,\n    MARKER: `${prefixCls}tooltip-list-item-marker`,\n    NAME_LABEL: `${prefixCls}tooltip-list-item-name-label`,\n    VALUE: `${prefixCls}tooltip-list-item-value`,\n    CROSSHAIR_X: `${prefixCls}tooltip-crosshair-x`,\n    CROSSHAIR_Y: `${prefixCls}tooltip-crosshair-y`,\n  };\n}\n\nconst TEXT_OVERFLOW_STYLE = {\n  overflow: 'hidden',\n  'white-space': 'nowrap',\n  'text-overflow': 'ellipsis',\n};\n\nexport function getDefaultTooltipStyle(prefixCls: string = '') {\n  const CLASS_NAME = getClassNames(prefixCls);\n  return {\n    [`.${CLASS_NAME.CONTAINER}`]: {\n      position: 'absolute',\n      visibility: 'visible',\n      // 'white-space': 'nowrap',\n      'z-index': 8,\n      transition:\n        'visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), ' +\n        'left 0.4s cubic-bezier(0.23, 1, 0.32, 1), ' +\n        'top 0.4s cubic-bezier(0.23, 1, 0.32, 1)',\n      'background-color': 'rgba(255, 255, 255, 0.96)',\n      'box-shadow': '0 6px 12px 0 rgba(0, 0, 0, 0.12)',\n      'border-radius': '4px',\n      color: 'rgba(0, 0, 0, 0.65)',\n      'font-size': '12px',\n      // 'font-family': ,\n      'line-height': '20px',\n      padding: '12px',\n      'min-width': '120px',\n      'max-width': '360px',\n      'font-family': 'Roboto-Regular',\n    },\n    [`.${CLASS_NAME.TITLE}`]: {\n      color: 'rgba(0, 0, 0, 0.45)',\n    },\n    [`.${CLASS_NAME.LIST}`]: {\n      margin: '0px',\n      'list-style-type': 'none',\n      padding: '0px',\n    },\n    [`.${CLASS_NAME.LIST_ITEM}`]: {\n      'list-style-type': 'none',\n      display: 'flex',\n      'line-height': '2em',\n      'align-items': 'center',\n      'justify-content': 'space-between',\n      'white-space': 'nowrap',\n    },\n    [`.${CLASS_NAME.MARKER}`]: {\n      width: '8px',\n      height: '8px',\n      'border-radius': '50%',\n      display: 'inline-block',\n      'margin-right': '4px',\n    },\n    [`.${CLASS_NAME.NAME}`]: {\n      display: 'flex',\n      'align-items': 'center',\n      'max-width': '216px',\n    },\n    [`.${CLASS_NAME.NAME_LABEL}`]: {\n      flex: 1,\n      ...TEXT_OVERFLOW_STYLE,\n    },\n    [`.${CLASS_NAME.VALUE}`]: {\n      display: 'inline-block',\n      float: 'right',\n      flex: 1,\n      'text-align': 'right',\n      'min-width': '28px',\n      'margin-left': '30px',\n      color: 'rgba(0, 0, 0, 0.85)',\n      ...TEXT_OVERFLOW_STYLE,\n    },\n    [`.${CLASS_NAME.CROSSHAIR_X}`]: {\n      position: 'absolute',\n      width: '1px',\n      'background-color': 'rgba(0, 0, 0, 0.25)',\n    },\n    [`.${CLASS_NAME.CROSSHAIR_Y}`]: {\n      position: 'absolute',\n      height: '1px',\n      'background-color': 'rgba(0, 0, 0, 0.25)',\n    },\n  };\n}\n", "import { substitute, createDOM } from '@antv/util';\nimport { Component } from '../../core';\nimport { Group } from '../../shapes';\nimport { BBox, applyStyleSheet, replaceChildren } from '../../util';\nimport { getClassNames, getDefaultTooltipStyle } from './constant';\nimport type { TooltipOptions, TooltipPosition, TooltipStyleProps } from './types';\n\nexport type { TooltipStyleProps, TooltipOptions };\n\nexport class Tooltip extends Component<TooltipStyleProps> {\n  public static tag = 'tooltip';\n\n  private timestamp = -1;\n\n  public get HTMLTooltipElement() {\n    return this.element;\n  }\n\n  public getContainer() {\n    return this.element;\n  }\n\n  private get elementSize() {\n    const width = this.element.offsetWidth;\n    const height = this.element.offsetHeight;\n    return { width, height };\n  }\n\n  private get HTMLTooltipItemsElements() {\n    const { data, template } = this.attributes;\n    return data.map(({ name = '', color = 'black', index, ...rest }, idx) => {\n      const datum = { name, color, index: index ?? idx, ...rest };\n      return createDOM(substitute(template.item!, datum)) as HTMLElement;\n    });\n  }\n\n  private element!: HTMLElement;\n\n  constructor(options: TooltipOptions) {\n    const prefixCls = options.style?.template?.prefixCls;\n    const CLASS_NAME = getClassNames(prefixCls);\n    super(options, {\n      data: [],\n      x: 0,\n      y: 0,\n      visibility: 'visible',\n      title: '',\n      position: 'bottom-right',\n      offset: [5, 5],\n      enterable: false,\n      container: {\n        x: 0,\n        y: 0,\n      },\n      bounding: null,\n      template: {\n        prefixCls: '',\n        container: `<div class=\"${CLASS_NAME.CONTAINER}\"></div>`,\n        title: `<div class=\"${CLASS_NAME.TITLE}\"></div>`,\n        item: `<li class=\"${CLASS_NAME.LIST_ITEM}\" data-index={index}>\n        <span class=\"${CLASS_NAME.NAME}\">\n          <span class=\"${CLASS_NAME.MARKER}\" style=\"background:{color}\"></span>\n          <span class=\"${CLASS_NAME.NAME_LABEL}\" title=\"{name}\">{name}</span>\n        </span>\n        <span class=\"${CLASS_NAME.VALUE}\" title=\"{value}\">{value}</span>\n      </li>`,\n      },\n      style: getDefaultTooltipStyle(prefixCls),\n    });\n    this.initShape();\n    this.render(this.attributes, this);\n  }\n\n  public render(attributes: TooltipStyleProps, container: Group) {\n    this.renderHTMLTooltipElement();\n    this.updatePosition();\n  }\n\n  public destroy() {\n    this.element?.remove();\n    super.destroy();\n  }\n\n  /**\n   * \n   */\n  public show(x?: number, y?: number) {\n    if (x !== undefined && y !== undefined) {\n      const isToggle = this.element.style.visibility === 'hidden';\n      const setPosition = () => {\n        this.attributes.x = x ?? this.attributes.x;\n        this.attributes.y = y ?? this.attributes.y;\n        this.updatePosition();\n      };\n      //  hidden  visible \n      isToggle ? this.closeTransition(setPosition) : setPosition();\n    }\n    this.element.style.visibility = 'visible';\n  }\n\n  /**\n   *  hide  tooltip \n   *  enterable = true  x y x y\n   * @param x\n   * @param y\n   * @returns\n   */\n  public hide(x = 0, y = 0) {\n    const { enterable } = this.attributes;\n\n    //  tooltip \n    if (enterable && this.isCursorEntered(x, y)) return;\n\n    this.element.style.visibility = 'hidden';\n  }\n\n  /**\n   * \n   */\n  private initShape() {\n    const { template } = this.attributes;\n    this.element = createDOM(template.container!) as HTMLElement;\n    if (this.id) this.element.setAttribute('id', this.id);\n  }\n\n  private prevCustomContentKey = this.attributes.contentKey;\n\n  private renderCustomContent() {\n    if (this.prevCustomContentKey !== undefined && this.prevCustomContentKey === this.attributes.contentKey) return;\n    this.prevCustomContentKey = this.attributes.contentKey;\n    const { content } = this.attributes;\n    if (!content) return;\n    if (typeof content === 'string') this.element.innerHTML = content;\n    else replaceChildren(this.element, content);\n  }\n\n  /**\n   *  HTML \n   */\n  private renderHTMLTooltipElement() {\n    const { template, title, enterable, style, content } = this.attributes;\n    const CLASS_NAME = getClassNames(template.prefixCls);\n    const container = this.element;\n    this.element.style.pointerEvents = enterable ? 'auto' : 'none';\n    if (content) this.renderCustomContent();\n    else {\n      if (title) {\n        container.innerHTML = template.title!;\n        container.getElementsByClassName(CLASS_NAME.TITLE)[0].innerHTML = title;\n      } else container.getElementsByClassName(CLASS_NAME.TITLE)?.[0]?.remove();\n      const itemsElements = this.HTMLTooltipItemsElements;\n      const ul = document.createElement('ul');\n      ul.className = CLASS_NAME.LIST;\n      replaceChildren(ul, itemsElements);\n      const list = this.element.querySelector(`.${CLASS_NAME.LIST}`);\n      if (list) list.replaceWith(ul);\n      else container.appendChild(ul);\n    }\n\n    applyStyleSheet(container, style);\n  }\n\n  /**\n   *  position  tooltip \n   * @param assignPosition {TooltipPosition} tooltip\n   */\n  private getRelativeOffsetFromCursor(assignPosition?: TooltipPosition) {\n    const { position, offset } = this.attributes;\n    const interPosition = assignPosition || position;\n    const finalPosition = interPosition.split('-') as ('top' | 'bottom' | 'left' | 'right')[];\n    const positionScore = { left: [-1, 0], right: [1, 0], top: [0, -1], bottom: [0, 1] };\n    const { width, height } = this.elementSize;\n    let absolutelyOffset = [-width / 2, -height / 2];\n    finalPosition.forEach((pos) => {\n      const [abs1, abs2] = absolutelyOffset;\n      const [pos1, pos2] = positionScore[pos];\n      absolutelyOffset = [abs1 + (width / 2 + offset[0]) * pos1, abs2 + (height / 2 + offset[1]) * pos2];\n    });\n    return absolutelyOffset as [number, number];\n  }\n\n  /**\n   * dom\n   */\n  private setOffsetPosition([offsetX, offsetY]: [number, number]) {\n    const {\n      x = 0,\n      y = 0,\n      container: { x: cx, y: cy },\n    } = this.attributes;\n    this.element.style.left = `${+x + cx + offsetX}px`;\n    this.element.style.top = `${+y + cy + offsetY}px`;\n  }\n\n  /**\n   * tooltip\n   */\n  private updatePosition() {\n    const { showDelay = 60 } = this.attributes;\n\n    const currentTimestamp = Date.now();\n    if (this.timestamp > 0 && currentTimestamp - this.timestamp < showDelay) return;\n\n    this.timestamp = currentTimestamp;\n    //  position \n    //  position\n    /**\n     * \n     *    \n     * \n     *    \n     * \n     */\n    this.setOffsetPosition(this.autoPosition(this.getRelativeOffsetFromCursor()));\n  }\n\n  /**\n   * \n   * @param offsetX position\n   * @param offsetY position\n   */\n  private autoPosition([offsetX, offsetY]: [number, number]): [number, number] {\n    const { x: cursorX, y: cursorY, bounding, position } = this.attributes;\n    //  bounds\n    if (!bounding) return [offsetX, offsetY];\n    // \n    const { offsetWidth, offsetHeight } = this.element;\n    // \n    const [expectLeft, expectTop] = [+cursorX + offsetX, +cursorY + offsetY];\n\n    // \n    const inversion = {\n      left: 'right',\n      right: 'left',\n      top: 'bottom',\n      bottom: 'top',\n    };\n    // \n    const { x: boundingX, y: boundingY, width: boundingWidth, height: boundingHeight } = bounding;\n    const edgeCompare = {\n      left: expectLeft < boundingX,\n      right: expectLeft + offsetWidth > boundingX + boundingWidth,\n      top: expectTop < boundingY,\n      bottom: expectTop + offsetHeight > boundingY + boundingHeight,\n    };\n    // \n    const correctivePosition: string[] = [];\n    // \n    (position.split('-') as ('top' | 'bottom' | 'left' | 'right')[]).forEach((pos) => {\n      // \n      if (edgeCompare[pos]) correctivePosition.push(inversion[pos]);\n      else correctivePosition.push(pos);\n    });\n\n    const correctedPositionString = correctivePosition.join('-');\n    return this.getRelativeOffsetFromCursor(correctedPositionString as TooltipPosition);\n  }\n\n  private isCursorEntered(clientX: number, clientY: number) {\n    //  tooltip dom \n    if (this.element) {\n      const { x, y, width, height } = this.element.getBoundingClientRect();\n      // const { container } = this.attributes;\n      // const { x: cx, y: cy } = container;\n\n      // console.log(1113, [clientX, clientY], [x, y, width, height], [cx, cy], new BBox(x - cx, y - cy, width, height).isPointIn(cursorX, cursorY));\n\n      return new BBox(x, y, width, height).isPointIn(clientX, clientY);\n    }\n    return false;\n  }\n\n  private closeTransition(callback: () => void) {\n    const transition = this.element.style.transition;\n    this.element.style.transition = 'none';\n\n    callback();\n\n    setTimeout(() => {\n      this.element.style.transition = transition;\n    }, 10);\n  }\n}\n", "import { deepMix } from '@antv/util';\nimport { BaseStyleProps, DisplayObject, Group, GroupStyleProps } from '../../shapes';\nimport { deepAssign, select } from '../../util';\n\nexport type ColumnStyleProps = GroupStyleProps;\n\nexport interface ColumnsStyleProps extends BaseStyleProps {\n  x?: number;\n  y?: number;\n  columns: ColumnStyleProps[][];\n}\n\nexport class Columns extends DisplayObject<ColumnsStyleProps> {\n  columnsGroup: Group;\n\n  constructor({ style, ...rest }: Partial<DisplayObject<ColumnsStyleProps>>) {\n    super(deepMix({}, { type: 'column' }, { style, ...rest }));\n    this.columnsGroup = new Group({ name: 'columns' });\n    this.appendChild(this.columnsGroup);\n    this.render();\n  }\n\n  public render(): void {\n    const { columns, x, y } = this.attributes;\n    this.columnsGroup.style.transform = `translate(${x}, ${y})`;\n\n    select(this.columnsGroup)\n      .selectAll('.column')\n      .data(columns.flat())\n      .join(\n        (enter) =>\n          enter\n            .append('rect')\n            .attr('className', 'column')\n            .each(function (style) {\n              this.attr(style);\n            }),\n        (update) =>\n          update.each(function (style) {\n            this.attr(style);\n          }),\n        (exit) => exit.remove()\n      );\n  }\n\n  public update(attr: Partial<ColumnsStyleProps>): void {\n    this.attr(deepAssign({}, this.attributes, attr));\n    this.render();\n  }\n\n  public clear(): void {\n    this.removeChildren();\n  }\n}\n", "import { deepMix } from '@antv/util';\nimport type { BaseStyleProps, PathStyleProps } from '../../shapes';\nimport { DisplayObject, Group } from '../../shapes';\nimport { deepAssign, select } from '../../util';\n\nexport interface LinesStyleProps extends BaseStyleProps {\n  x?: number;\n  y?: number;\n  lines: PathStyleProps[];\n  areas: PathStyleProps[];\n}\n\nexport class Lines extends DisplayObject<LinesStyleProps> {\n  private linesGroup = this.appendChild(new Group());\n\n  private areasGroup = this.appendChild(new Group());\n\n  constructor({ style, ...rest }: Partial<DisplayObject<LinesStyleProps>>) {\n    super(deepMix({}, { type: 'lines' }, { style, ...rest }));\n    this.render();\n  }\n\n  public render(): void {\n    const { lines, areas, x, y } = this.attributes;\n    this.style.transform = `translate(${x}, ${y})`;\n    if (lines) this.renderLines(lines);\n    if (areas) this.renderAreas(areas);\n  }\n\n  public clear(): void {\n    this.linesGroup.removeChildren();\n    this.areasGroup.removeChildren();\n  }\n\n  public update(attr: Partial<LinesStyleProps>) {\n    this.attr(deepAssign({}, this.attributes, attr));\n    this.render();\n  }\n\n  private renderLines(lines: LinesStyleProps['lines']) {\n    select(this.linesGroup)\n      .selectAll('.line')\n      .data(lines)\n      .join(\n        (enter) =>\n          enter\n            .append('path')\n            .attr('className', 'line')\n            .each(function (style) {\n              this.attr(style);\n            }),\n        (update) =>\n          update.each(function (style) {\n            this.attr(style);\n          }),\n        (exit) => exit.remove()\n      );\n  }\n\n  private renderAreas(areas: LinesStyleProps['areas']) {\n    select(this.linesGroup)\n      .selectAll('.area')\n      .data(areas)\n      .join(\n        (enter) =>\n          enter\n            .append('path')\n            .attr('className', 'area')\n            .each(function (style) {\n              this.attr(style);\n            }),\n        (update) =>\n          update.each(function (style) {\n            this.style(style);\n          }),\n        (exit) => exit.remove()\n      );\n  }\n}\n", "import { clone, isEqual, clamp } from '@antv/util';\nimport { catmullRom2Bezier } from '../../util';\nimport type { Data, Line, Point, Scales } from './types';\n\n/**\n * xy\n */\nexport function dataToLines(data: Data, scales: Scales): Line[] {\n  const { x, y } = scales;\n\n  let [max, min] = (y.getOptions().range || [0, 0]) as [number, number];\n  if (min > max) [min, max] = [max, min];\n\n  return data.map((points) => {\n    const lines = points.map((val: number, idx: number) => {\n      return [x.map(idx), clamp(y.map(val), min, max)] as Point;\n    });\n    return lines;\n  });\n}\n\n/**\n * path\n */\nexport function lineToLinePath(line: Line, reverse = false) {\n  const M = reverse ? line.length - 1 : 0;\n  const linePath = line.map((point: Point, idx: number) => [idx === M ? 'M' : 'L', ...point]) as any[];\n  return reverse ? linePath.reverse() : linePath;\n}\n\n/**\n * path\n * @param points \n * @param reverse \n */\nexport function lineToCurvePath(line: Line, reverse = false) {\n  if (line.length <= 2) {\n    return lineToLinePath(line);\n  }\n  const data = [];\n  const len = line.length;\n  for (let idx = 0; idx < len; idx += 1) {\n    const point = reverse ? line[len - idx - 1] : line[idx];\n    if (!isEqual(point, data.slice(-2))) {\n      data.push(...point);\n    }\n  }\n  const path = catmullRom2Bezier(data, false);\n  if (reverse) {\n    path.unshift(['M', ...line[len - 1]]);\n  } else {\n    path.unshift(['M', ...line[0]]);\n  }\n  return path as any[];\n}\n\n/**\n * baselinepath\n */\nexport function closePathByBaseLine(path: any[], width: number, baseline: number) {\n  const closedPath = clone(path);\n  closedPath.push(['L', width, baseline], ['L', 0, baseline], ['Z']);\n  return closedPath;\n}\n\n/**\n * path\n * \n */\nexport function linesToAreaPaths(lines: Line[], smooth: boolean, width: number, baseline: number) {\n  return lines.map((line) => {\n    return closePathByBaseLine(smooth ? lineToCurvePath(line) : lineToLinePath(line), width, baseline);\n  });\n}\n\n/**\n * \n */\nexport function linesToStackAreaPaths(lines: Line[], width: number, baseline: number) {\n  const paths: any[][] = [];\n  for (let idx = lines.length - 1; idx >= 0; idx -= 1) {\n    const currLine = lines[idx];\n    const currCurvePath = lineToLinePath(currLine);\n    let path: any[];\n    if (idx === 0) {\n      // y=0\n      path = closePathByBaseLine(currCurvePath, width, baseline);\n    } else {\n      // \n      const belowLine = lines[idx - 1];\n      const belowCurvePath = lineToLinePath(belowLine, true);\n      belowCurvePath[0][0] = 'L';\n\n      // \n      path = [...currCurvePath, ...belowCurvePath, ['Z']];\n    }\n    paths.push(path);\n  }\n\n  return paths;\n}\n\n/**\n * \n */\nexport function linesToStackCurveAreaPaths(lines: Line[], width: number, baseline: number) {\n  const paths: any[][] = [];\n  for (let idx = lines.length - 1; idx >= 0; idx -= 1) {\n    const currLine = lines[idx];\n    const currCurvePath = lineToCurvePath(currLine);\n    let path: any[];\n    if (idx === 0) {\n      // y=0\n      path = closePathByBaseLine(currCurvePath, width, baseline);\n    } else {\n      // \n      const belowLine = lines[idx - 1];\n      const belowCurvePath = lineToCurvePath(belowLine, true);\n\n      /**\n       * \n       *  M C C C C C\n       *  A  ->  B\n       *          \n       *  D  <-  C\n       *  C C C C C M\n       *\n       */\n      const A = currLine[0];\n      // const B = currLine[currLine.length - 1];\n      // const C = belowLine[belowLine.length - 1];\n      // const D = belowLine[0];\n\n      //  M X Y  L X Y\n      belowCurvePath[0][0] = 'L';\n      // \n      path = [...currCurvePath, ...belowCurvePath, ['M', ...A], ['Z']];\n    }\n    paths.push(path);\n  }\n  return paths;\n}\n", "import { clone, min, minBy, max, maxBy } from '@antv/util';\nimport type { Data } from './types';\n\n/**\n * \n */\nexport function getRange(data: Data): [number, number] {\n  if (data.length === 0) return [0, 0];\n  return [\n    min(minBy(data, (arr) => min(arr) || 0) as number[]),\n    max(maxBy(data, (arr) => max(arr) || 0) as number[]),\n  ] as [number, number];\n}\n\n/**\n * \n */\nexport function getStackedData(_: Data): Data {\n  const data = clone(_);\n  // \n  const datumLen = data[0].length;\n  // \n  const [positivePrev, negativePrev] = [Array(datumLen).fill(0), Array(datumLen).fill(0)];\n  for (let i = 0; i < data.length; i += 1) {\n    const datum = data[i];\n    for (let j = 0; j < datumLen; j += 1) {\n      if (datum[j] >= 0) {\n        datum[j] += positivePrev[j];\n        positivePrev[j] = datum[j];\n      } else {\n        datum[j] += negativePrev[j];\n        negativePrev[j] = datum[j];\n      }\n    }\n  }\n  return data;\n}\n", "import { Band, Linear } from '@antv/scale';\nimport { clone, isArray, isFunction, isNumber } from '@antv/util';\nimport { Component } from '../../core';\nimport { Group } from '../../shapes';\nimport { maybeAppend, select, subStyleProps } from '../../util';\nimport type { ColumnStyleProps, ColumnsStyleProps } from './columns';\nimport { Columns } from './columns';\nimport type { LinesStyleProps } from './lines';\nimport { Lines } from './lines';\nimport {\n  dataToLines,\n  lineToCurvePath,\n  lineToLinePath,\n  linesToAreaPaths,\n  linesToStackAreaPaths,\n  linesToStackCurveAreaPaths,\n} from './path';\nimport type { Data, SparklineOptions, SparklineStyleProps } from './types';\nimport { getRange, getStackedData } from './utils';\n\nexport type { SparklineOptions, SparklineStyleProps };\n\nexport class Sparkline extends Component<SparklineStyleProps> {\n  public static tag = 'sparkline';\n\n  /**\n   * data\n   * \n   */\n  private get rawData(): Data {\n    const { data: rawData } = this.attributes;\n    if (!rawData || rawData?.length === 0) return [[]];\n    const data = clone(rawData);\n    // number[] -> number[][]\n    return isNumber(data[0]) ? [data] : data;\n  }\n\n  private get data(): Data {\n    if (this.attributes.isStack) return getStackedData(this.rawData);\n    return this.rawData;\n  }\n\n  private get scales(): { x: Linear | Band; y: Linear } {\n    return this.createScales(this.data);\n  }\n\n  /**\n   *  0\n   */\n  private get baseline(): number {\n    const { y } = this.scales;\n    const [y1, y2] = y.getOptions().domain || [0, 0];\n    if (y2 < 0) {\n      return y.map(y2);\n    }\n\n    return y.map(y1 < 0 ? 0 : y1);\n  }\n\n  private get containerShape() {\n    const { width, height } = this.attributes;\n    return { width, height } as { width: number; height: number };\n  }\n\n  private get linesStyle(): LinesStyleProps {\n    const { type, isStack, smooth } = this.attributes;\n    if (type !== 'line') throw new Error('linesStyle can only be used in line type');\n    const areaStyle = subStyleProps(this.attributes, 'area');\n    const lineStyle = subStyleProps(this.attributes, 'line');\n    const { width } = this.containerShape;\n    const { data } = this;\n    if (data[0].length === 0) return { lines: [], areas: [] };\n    const { x, y } = this.scales as { x: Linear; y: Linear };\n    // Path\n    const lines = dataToLines(data, { type: 'line', x, y });\n\n    // path\n    let areas: any[] = [];\n    if (areaStyle) {\n      const { baseline } = this;\n      if (isStack) {\n        areas = smooth\n          ? linesToStackCurveAreaPaths(lines, width, baseline)\n          : linesToStackAreaPaths(lines, width, baseline);\n      } else {\n        areas = linesToAreaPaths(lines, smooth!, width, baseline);\n      }\n    }\n    return {\n      lines: lines.map((line, idx) => {\n        return {\n          stroke: this.getColor(idx),\n          d: smooth ? lineToCurvePath(line) : lineToLinePath(line),\n          ...lineStyle,\n        };\n      }) as any,\n      areas: areas.map((path, idx) => {\n        return {\n          d: path,\n          fill: this.getColor(idx),\n          ...areaStyle,\n        };\n      }),\n    };\n  }\n\n  private get columnsStyle(): ColumnsStyleProps {\n    const columnStyle = subStyleProps(this.attributes, 'column');\n    const { isStack, type, scale } = this.attributes;\n    if (type !== 'column') throw new Error('columnsStyle can only be used in column type');\n    const { height } = this.containerShape;\n    let { rawData: data } = this;\n    if (!data) return { columns: [] };\n    if (isStack) data = getStackedData(data);\n    const { x, y } = this.createScales(data) as { x: Band; y: Linear };\n    const [minVal, maxVal] = getRange(data);\n    const heightScale = new Linear({\n      domain: [0, maxVal - (minVal > 0 ? 0 : minVal)],\n      range: [0, height * scale],\n    });\n\n    const bandWidth = x.getBandWidth();\n    const { rawData } = this;\n    return {\n      columns: data.map((column, i) => {\n        return column.map((val, j) => {\n          const barWidth = bandWidth / data.length;\n          const getShape = () => {\n            return {\n              x: x.map(j) + barWidth * i,\n              y: val >= 0 ? y.map(val) : y.map(0),\n              width: barWidth,\n              height: heightScale.map(Math.abs(val)),\n            };\n          };\n          const getStackShape = () => {\n            return {\n              x: x.map(j),\n              y: y.map(val),\n              width: bandWidth,\n              height: heightScale.map(rawData[i][j]),\n            };\n          };\n\n          return {\n            fill: this.getColor(i),\n            ...columnStyle,\n            ...(isStack ? getStackShape() : getShape()),\n          } as ColumnStyleProps;\n        });\n      }),\n    };\n  }\n\n  constructor(options: SparklineOptions) {\n    super(options, {\n      type: 'line',\n      x: 0,\n      y: 0,\n      width: 200,\n      height: 20,\n      isStack: false,\n      color: ['#83daad', '#edbf45', '#d2cef9', '#e290b3', '#6f63f4'],\n      smooth: true,\n      lineLineWidth: 1,\n      areaOpacity: 0,\n      isGroup: false,\n      columnLineWidth: 1,\n      columnStroke: '#fff',\n      scale: 1,\n      spacing: 0,\n    });\n  }\n\n  public render(attributes: Required<SparklineStyleProps>, container: Group) {\n    maybeAppend(container, '.container', 'rect').attr('className', 'container').node();\n\n    const { type, x, y } = attributes;\n    const className = `spark${type}`;\n    const style: any = {\n      x,\n      y,\n      ...(type === 'line' ? this.linesStyle : this.columnsStyle),\n    };\n\n    select(container)\n      .selectAll('.spark')\n      .data([type])\n      .join(\n        (enter) =>\n          enter\n            .append((type) => {\n              if (type === 'line') return new Lines({ className, style });\n              return new Columns({ className, style });\n            })\n            .attr('className', `spark ${className}`),\n        (update) => update.update(style),\n        (exit) => exit.remove()\n      );\n  }\n\n  /**\n   * color\n   */\n  private getColor(index: number) {\n    const { color } = this.attributes;\n    if (isArray(color)) {\n      return color[index % color.length];\n    }\n    if (isFunction(color)) {\n      return color.call(null, index);\n    }\n    return color;\n  }\n\n  /**\n   * scale\n   */\n  private createScales(data: number[][]) {\n    const { type, scale, range = [], spacing } = this.attributes;\n    const { width, height } = this.containerShape;\n    const [minVal, maxVal] = getRange(data);\n\n    const yScale = new Linear({\n      domain: [range[0] ?? minVal, range[1] ?? maxVal],\n      range: [height, height * (1 - scale)],\n    });\n\n    if (type === 'line') {\n      return {\n        type,\n        x: new Linear({\n          domain: [0, data[0].length - 1],\n          range: [0, width],\n        }),\n        y: yScale,\n      };\n    }\n\n    return {\n      type,\n      x: new Band({\n        domain: data[0].map((val, idx) => idx),\n        range: [0, width],\n        paddingInner: spacing,\n        paddingOuter: spacing / 2,\n        align: 0.5,\n      }),\n      y: yScale,\n    };\n  }\n}\n", "import type { Cursor } from '@antv/g';\nimport { CustomEvent } from '@antv/g';\nimport { clamp } from '@antv/util';\nimport type { GenericAnimation } from '../../animation';\nimport { transition } from '../../animation';\nimport { Component } from '../../core';\nimport { Group, Rect, Text } from '../../shapes';\nimport type { Selection } from '../../util';\nimport {\n  getEventViewportPos,\n  ifShow,\n  parseSeriesAttr,\n  select,\n  subStyleProps,\n  superStyleProps,\n  toPrecision,\n} from '../../util';\nimport type { SparklineStyleProps } from '../sparkline';\nimport { Sparkline } from '../sparkline';\nimport { CLASS_NAMES, HANDLE_DEFAULT_CFG, HANDLE_ICON_DEFAULT_CFG, HANDLE_LABEL_DEFAULT_CFG } from './constant';\nimport type { HandleType, IconStyleProps, LabelStyleProps } from './handle';\nimport { Handle, HandleStyleProps } from './handle';\nimport type { SliderOptions, SliderStyleProps } from './types';\n\nexport type { SliderOptions, SliderStyleProps };\n\nexport class Slider extends Component<SliderStyleProps> {\n  public static tag = 'slider';\n\n  private range = [0, 1];\n\n  public get values(): [number, number] {\n    return this.attributes.values as [number, number];\n  }\n\n  public set values(values: Required<SliderStyleProps>['values']) {\n    this.attributes.values = this.clampValues(values);\n  }\n\n  /**  */\n  private trackShape!: Selection<Rect>;\n\n  /**  */\n  private brushArea!: Selection<Rect>;\n\n  private foregroundGroup!: Selection<Group>;\n\n  /**  */\n  private selectionShape?: Selection<Rect>;\n\n  /**  */\n  private startHandle?: Handle;\n\n  /**  */\n  private endHandle?: Handle;\n\n  /**\n   * \n   */\n  private selectionStartPos: number;\n\n  /**\n   * \n   */\n  private selectionWidth: number;\n\n  /**\n   * \n   */\n  private prevPos: number;\n\n  /**\n   * drag\n   */\n  private target: string;\n\n  private get sparklineStyle() {\n    const { orientation } = this.attributes;\n    if (orientation !== 'horizontal') return null;\n    const attr = subStyleProps<SparklineStyleProps>(this.attributes, 'sparkline');\n    return { zIndex: 0, ...this.availableSpace, ...attr };\n  }\n\n  private get shape() {\n    const { trackLength, trackSize } = this.attributes;\n    const [width, height] = this.getOrientVal([\n      [trackLength, trackSize],\n      [trackSize, trackLength],\n    ]);\n    return { width, height };\n  }\n\n  private get availableSpace() {\n    const { x, y, padding } = this.attributes;\n    const [top, right, bottom, left] = parseSeriesAttr(padding!);\n    const { width, height } = this.shape;\n    return {\n      x: left,\n      y: top,\n      width: width! - (left + right),\n      height: height! - (top + bottom),\n    };\n  }\n\n  constructor(options: SliderOptions) {\n    super(options, {\n      x: 0,\n      y: 0,\n      animate: { duration: 100, fill: 'both' },\n      brushable: true,\n      formatter: (val: any) => val.toString(),\n      handleSpacing: 2,\n      orientation: 'horizontal',\n      padding: 0,\n      autoFitLabel: true,\n      scrollable: true,\n      selectionFill: '#5B8FF9',\n      selectionFillOpacity: 0.45,\n      selectionZIndex: 2,\n      showHandle: true,\n      showLabel: true,\n      slidable: true,\n      trackFill: '#416180',\n      trackLength: 200,\n      trackOpacity: 0.05,\n      trackSize: 20,\n      trackZIndex: -1,\n      values: [0, 1],\n      type: 'range',\n      selectionType: 'select',\n      handleIconOffset: 0,\n      ...superStyleProps(HANDLE_DEFAULT_CFG, 'handle'),\n      ...superStyleProps(HANDLE_ICON_DEFAULT_CFG, 'handleIcon'),\n      ...superStyleProps(HANDLE_LABEL_DEFAULT_CFG, 'handleLabel'),\n    });\n\n    this.selectionStartPos = 0;\n    this.selectionWidth = 0;\n    this.prevPos = 0;\n    this.target = '';\n  }\n\n  public getValues() {\n    return this.values as [number, number];\n  }\n\n  /**  */\n  public setValues(values: Required<SliderStyleProps>['values'] = [0, 0], animate: boolean = false) {\n    this.attributes.values = values;\n    const animation = animate === false ? false : this.attributes.animate;\n\n    this.updateSelectionArea(animation);\n    this.updateHandlesPosition(animation);\n  }\n\n  private updateSelectionArea(animation: GenericAnimation) {\n    const newSelectionArea = this.calcSelectionArea();\n    this.foregroundGroup.selectAll(CLASS_NAMES.selection.class).each(function (datum, index) {\n      transition(this, newSelectionArea[index], animation);\n    });\n  }\n\n  private updateHandlesPosition(animation: GenericAnimation) {\n    if (!this.attributes.showHandle) return;\n    this.startHandle && transition(this.startHandle, this.getHandleStyle('start'), animation);\n    this.endHandle && transition(this.endHandle, this.getHandleStyle('end'), animation);\n  }\n\n  private innerSetValues(values: Required<SliderStyleProps>['values'] = [0, 0], trigger: boolean = false) {\n    const oldValues = this.values;\n    const newValues = this.clampValues(values);\n    this.attributes.values = newValues;\n    this.setValues(newValues);\n    if (trigger) {\n      this.onValueChange(oldValues);\n    }\n  }\n\n  private renderTrack(container: Group) {\n    const { x, y } = this.attributes;\n    const style = subStyleProps(this.attributes, 'track');\n\n    this.trackShape = select(container)\n      .maybeAppendByClassName(CLASS_NAMES.track, 'rect')\n      .styles({ x, y, ...this.shape, ...style });\n  }\n\n  private renderBrushArea(container: Group) {\n    const { x, y, brushable } = this.attributes;\n    this.brushArea = select(container)\n      .maybeAppendByClassName(CLASS_NAMES.brushArea, 'rect')\n      .styles({\n        x,\n        y,\n        fill: 'transparent',\n        cursor: brushable ? 'crosshair' : 'default',\n        ...this.shape,\n      });\n  }\n\n  private renderSparkline(container: Group) {\n    const { x, y, orientation } = this.attributes;\n    const sparklineGroup = select(container).maybeAppendByClassName(CLASS_NAMES.sparklineGroup, 'g');\n\n    ifShow(orientation === 'horizontal', sparklineGroup, (group) => {\n      const style = { ...this.sparklineStyle!, x, y };\n      group.maybeAppendByClassName(CLASS_NAMES.sparkline, () => new Sparkline({ style })).update(style);\n    });\n  }\n\n  private renderHandles() {\n    const { showHandle, type } = this.attributes;\n    const availableHandle: HandleType[] = type === 'range' ? ['start', 'end'] : ['end'];\n    const data = showHandle ? availableHandle : [];\n    const that = this;\n\n    this.foregroundGroup\n      ?.selectAll(CLASS_NAMES.handle.class)\n      .data(\n        data.map((type) => ({ type })),\n        (d) => d.type\n      )\n      .join(\n        (enter) =>\n          enter\n            .append(({ type }) => new Handle({ style: this.getHandleStyle(type) }))\n            .each(function ({ type }) {\n              this.attr('class', `${CLASS_NAMES.handle.name} ${type}-handle`);\n              const name = `${type}Handle` as `${HandleType}Handle`;\n              that[name] = this;\n              this.addEventListener('pointerdown', that.onDragStart(type));\n            }),\n        (update) =>\n          update.each(function ({ type }) {\n            this.update(that.getHandleStyle(type));\n          }),\n        (exit) =>\n          exit\n            .each(({ type }) => {\n              const name = `${type}Handle` as `${HandleType}Handle`;\n              that[name] = undefined;\n            })\n            .remove()\n      );\n  }\n\n  private renderSelection(container: Group) {\n    const { x, y, type, selectionType } = this.attributes;\n    this.foregroundGroup = select(container).maybeAppendByClassName(CLASS_NAMES.foreground, 'g');\n\n    // value  slider \n    const selectionStyle = subStyleProps(this.attributes, 'selection');\n    const applyStyle = (selection: Selection) => {\n      return selection\n        .style('visibility', (d: any) => (d.show ? 'visible' : 'hidden'))\n        .style('cursor', (d: any) => {\n          if (selectionType === 'select') return 'grab';\n          if (selectionType === 'invert') return 'crosshair';\n          return 'default';\n        })\n        .styles({\n          ...selectionStyle,\n          transform: `translate(${x}, ${y})`,\n        });\n    };\n\n    const that = this;\n    this.foregroundGroup\n      .selectAll(CLASS_NAMES.selection.class)\n      .data(\n        type === 'value'\n          ? []\n          : this.calcSelectionArea().map((area, index) => ({\n              style: {\n                ...area,\n              },\n              index,\n              // \n              show: selectionType === 'select' ? index === 1 : index !== 1,\n            })),\n        (d) => d.index\n      )\n      .join(\n        (enter) =>\n          enter\n            .append('rect')\n            .attr('className', CLASS_NAMES.selection.name)\n            .call(applyStyle)\n            .each(function (datum, index) {\n              if (index === 1) {\n                that.selectionShape = select(this);\n                // drag\n                this.on('pointerdown', (e: any) => {\n                  this.attr('cursor', 'grabbing');\n                  that.onDragStart('selection')(e);\n                });\n                // hover\n                that.dispatchCustomEvent(this, 'pointerenter', 'selectionMouseenter');\n                that.dispatchCustomEvent(this, 'pointerleave', 'selectionMouseleave');\n                that.dispatchCustomEvent(this, 'click', 'selectionClick');\n\n                // \n                this.addEventListener('pointerdown', () => {\n                  this.attr('cursor', 'grabbing');\n                });\n                this.addEventListener('pointerup', () => {\n                  this.attr('cursor', 'pointer');\n                });\n                this.addEventListener('pointerover', () => {\n                  this.attr('cursor', 'pointer');\n                });\n              } else {\n                this.on('pointerdown', that.onDragStart('track'));\n              }\n            }),\n        (update) => update.call(applyStyle),\n        (exit) => exit.remove()\n      );\n    this.updateSelectionArea(false);\n    this.renderHandles();\n  }\n\n  public render(attributes: SliderStyleProps, container: Group) {\n    this.renderTrack(container);\n    this.renderSparkline(container);\n    this.renderBrushArea(container);\n    this.renderSelection(container);\n  }\n\n  private clampValues(values?: Required<SliderStyleProps>['values'], precision = 4): [number, number] {\n    const [min, max] = this.range;\n    const [prevStart, prevEnd] = this.getValues().map((num) => toPrecision(num, precision));\n    const internalValues = Array.isArray(values) ? values : [prevStart, values ?? prevEnd];\n    let [startVal, endVal] = (internalValues || [prevStart, prevEnd]).map((num) => toPrecision(num, precision));\n\n    if (this.attributes.type === 'value') return [0, clamp(endVal, min, max)];\n\n    // startVal endVal\n    if (startVal > endVal) {\n      [startVal, endVal] = [endVal, startVal];\n    }\n    const range = endVal - startVal;\n    // \n    if (range > max - min) return [min, max];\n\n    if (startVal < min) {\n      if (prevStart === min && prevEnd === endVal) return [min, endVal];\n      return [min, range + min];\n    }\n    if (endVal > max) {\n      if (prevEnd === max && prevStart === startVal) return [startVal, max];\n      return [max - range, max];\n    }\n\n    // \n    return [startVal, endVal];\n  }\n\n  /**\n   * \n   * \n   */\n  private calcSelectionArea(values?: [number, number]) {\n    const [start, end] = this.clampValues(values);\n    const { x, y, width, height } = this.availableSpace;\n\n    // \n    return this.getOrientVal([\n      [\n        { y, height, x, width: start * width },\n        { y, height, x: start * width + x, width: (end - start) * width },\n        { y, height, x: end * width, width: (1 - end) * width },\n      ],\n      [\n        { x, width, y, height: start * height },\n        { x, width, y: start * height + y, height: (end - start) * height },\n        { x, width, y: end * height, height: (1 - end) * height },\n      ],\n    ]);\n  }\n\n  /**\n   * x y\n   */\n  private calcHandlePosition(handleType: HandleType) {\n    const { handleIconOffset } = this.attributes;\n    const { x, y, width, height } = this.availableSpace;\n    const [stVal, endVal] = this.clampValues();\n    const offset = handleType === 'start' ? -handleIconOffset : handleIconOffset;\n    const L = (handleType === 'start' ? stVal : endVal) * this.getOrientVal([width, height]) + offset;\n    return {\n      x: x + this.getOrientVal([L, width / 2]),\n      y: y + this.getOrientVal([height / 2, L]),\n    };\n  }\n\n  private inferTextStyle(handleType: HandleType): Record<string, any> {\n    const { orientation } = this.attributes;\n    if (orientation === 'horizontal') return {};\n    if (handleType === 'start') return { transformOrigin: 'left center', transform: 'rotate(90)', textAlign: 'start' };\n    if (handleType === 'end') return { transformOrigin: 'right center', transform: 'rotate(90)', textAlign: 'end' };\n    return {};\n  }\n\n  /**\n   * \n   * @param handleType startend\n   * @returns\n   */\n  private calcHandleText(handleType: HandleType) {\n    const { type, orientation, formatter, autoFitLabel } = this.attributes;\n    const handleStyle = subStyleProps(this.attributes, 'handle');\n    const labelStyle = subStyleProps(handleStyle, 'label');\n    const { spacing } = handleStyle;\n    const size = this.getHandleSize();\n    const values = this.clampValues();\n\n    const value = handleType === 'start' ? values[0] : values[1];\n    const text = formatter(value);\n\n    const temp = new Text({\n      style: {\n        ...labelStyle,\n        ...this.inferTextStyle(handleType),\n        text,\n      },\n    });\n    // \n    const { width: textWidth, height: textHeight } = temp.getBBox();\n    temp.destroy();\n\n    if (!autoFitLabel) {\n      if (type === 'value') return { text, x: 0, y: -textHeight - spacing };\n      const finaleWidth = spacing + size + (orientation === 'horizontal' ? textWidth / 2 : 0);\n      return { text, [orientation === 'horizontal' ? 'x' : 'y']: handleType === 'start' ? -finaleWidth : finaleWidth };\n    }\n\n    let x = 0;\n    let y = 0;\n    // \n    const { width: iW, height: iH } = this.availableSpace;\n    const { x: fX, y: fY, width: fW, height: fH } = this.calcSelectionArea()[1];\n    const totalSpacing = spacing + size;\n    if (orientation === 'horizontal') {\n      const finalWidth = totalSpacing + textWidth / 2;\n      if (handleType === 'start') {\n        const left = fX - totalSpacing - textWidth;\n        x = left > 0 ? -finalWidth : finalWidth;\n      } else {\n        const sign = iW - fX - fW - totalSpacing > textWidth;\n        x = sign ? finalWidth : -finalWidth;\n      }\n    } else {\n      const positiveSize = totalSpacing;\n      const negativeSize = textHeight + totalSpacing;\n      if (handleType === 'start') {\n        y = fY - size > textHeight ? -negativeSize : positiveSize;\n      } else {\n        y = iH - (fY + fH) - size > textHeight ? negativeSize : -positiveSize;\n      }\n    }\n    return { x, y, text };\n  }\n\n  private getHandleLabelStyle(handleType: HandleType): LabelStyleProps {\n    const style = subStyleProps(this.attributes, 'handleLabel');\n    return {\n      ...style,\n      ...this.calcHandleText(handleType),\n      ...this.inferTextStyle(handleType),\n    };\n  }\n\n  private getHandleIconStyle(): IconStyleProps {\n    const { handleIconShape: shape } = this.attributes;\n    const style = subStyleProps(this.attributes, 'handleIcon');\n    const cursor = this.getOrientVal(['ew-resize', 'ns-resize']) as Cursor;\n    const size = this.getHandleSize();\n\n    return {\n      cursor,\n      shape,\n      size,\n      ...style,\n    };\n  }\n\n  private getHandleStyle(handleType: HandleType): HandleStyleProps {\n    const { x: ox, y: oy, showLabel, showLabelOnInteraction, orientation } = this.attributes;\n    const { x, y } = this.calcHandlePosition(handleType);\n    const textStyle = this.calcHandleText(handleType);\n\n    let internalShowLabel = showLabel;\n    if (!showLabel && showLabelOnInteraction) {\n      if (this.target) internalShowLabel = true;\n      else internalShowLabel = false;\n    }\n\n    return {\n      ...superStyleProps(this.getHandleIconStyle(), 'icon'),\n      ...superStyleProps({ ...this.getHandleLabelStyle(handleType), ...textStyle }, 'label'),\n      transform: `translate(${x + ox}, ${y + oy})`,\n      orientation,\n      showLabel: internalShowLabel,\n      type: handleType,\n      zIndex: 3,\n    } as const;\n  }\n\n  private getHandleSize() {\n    const { handleIconSize: size, width, height } = this.attributes;\n    if (size) return size;\n    //  size  height + 4  1/ 2.4\n    return Math.floor((this.getOrientVal([+height!, +width!]) + 4) / 2.4);\n  }\n\n  private getOrientVal<T>([x, y]: [T, T]): T {\n    const { orientation } = this.attributes;\n    return orientation === 'horizontal' ? x : y;\n  }\n\n  private setValuesOffset(stOffset: number, endOffset: number = 0) {\n    const { type } = this.attributes;\n    const [oldStartVal, oldEndVal] = this.getValues();\n    const internalStartOffset = type === 'range' ? stOffset : 0;\n    const values = [oldStartVal + internalStartOffset, oldEndVal + endOffset].sort() as [number, number];\n    this.innerSetValues(values, true);\n  }\n\n  private getRatio(val: number) {\n    const { width, height } = this.availableSpace;\n    return val / this.getOrientVal([width, height]);\n  }\n\n  private dispatchCustomEvent(target: Selection, event: string, name: string) {\n    target.on(event, (e: MouseEvent) => {\n      e.stopPropagation();\n      this.dispatchEvent(new CustomEvent(name, { detail: e }));\n    });\n  }\n\n  public bindEvents() {\n    // scroll \n    this.addEventListener('wheel', this.onScroll);\n    const brushArea = this.brushArea;\n    this.dispatchCustomEvent(brushArea, 'click', 'trackClick');\n    this.dispatchCustomEvent(brushArea, 'pointerenter', 'trackMouseenter');\n    this.dispatchCustomEvent(brushArea, 'pointerleave', 'trackMouseleave');\n    // Drag and brush\n    brushArea.on('pointerdown', this.onDragStart('track'));\n  }\n\n  private onScroll(event: WheelEvent) {\n    const { scrollable } = this.attributes;\n    if (scrollable) {\n      const { deltaX, deltaY } = event;\n      const offset = deltaY || deltaX;\n      const deltaVal = this.getRatio(offset);\n\n      this.setValuesOffset(deltaVal, deltaVal);\n    }\n  }\n\n  private onDragStart = (target: string) => (e: any) => {\n    e.stopPropagation();\n    this.target = target;\n    this.prevPos = this.getOrientVal(getEventViewportPos(e));\n    const { x, y } = this.availableSpace;\n    const { x: X, y: Y } = this.getBBox();\n    this.selectionStartPos = this.getRatio(this.prevPos - this.getOrientVal([x, y]) - this.getOrientVal([+X!, +Y!]));\n    this.selectionWidth = 0;\n    document.addEventListener('pointermove', this.onDragging);\n    document.addEventListener('pointerup', this.onDragEnd);\n  };\n\n  private onDragging = (e: PointerEvent) => {\n    const { slidable, brushable, type } = this.attributes;\n    e.stopPropagation();\n\n    const currPos = this.getOrientVal(getEventViewportPos(e));\n    const diffPos = currPos - this.prevPos;\n\n    if (!diffPos) return;\n    const deltaVal = this.getRatio(diffPos);\n\n    switch (this.target) {\n      case 'start':\n        if (slidable) this.setValuesOffset(deltaVal);\n        break;\n      case 'end':\n        if (slidable) this.setValuesOffset(0, deltaVal);\n        break;\n      case 'selection':\n        if (slidable) this.setValuesOffset(deltaVal, deltaVal);\n        break;\n      case 'track':\n        if (!brushable) return;\n        // \n        this.selectionWidth += deltaVal;\n        if (type === 'range') {\n          this.innerSetValues(\n            [this.selectionStartPos, this.selectionStartPos + this.selectionWidth].sort() as [number, number],\n            true\n          );\n        } else this.innerSetValues([0, this.selectionStartPos + this.selectionWidth], true);\n\n        break;\n      default:\n        break;\n    }\n\n    this.prevPos = currPos;\n  };\n\n  private onDragEnd = () => {\n    document.removeEventListener('pointermove', this.onDragging);\n    document.removeEventListener('pointermove', this.onDragging);\n    document.removeEventListener('pointerup', this.onDragEnd);\n    this.target = '';\n    //  handle \n    this.updateHandlesPosition(false);\n  };\n\n  private onValueChange = (oldValue: [number, number]) => {\n    const { onChange, type } = this.attributes;\n    const internalOldValue = type === 'range' ? oldValue : oldValue[1];\n    const value = type === 'range' ? this.getValues() : this.getValues()[1];\n    const evt = new CustomEvent('valuechange', {\n      detail: { oldValue: internalOldValue, value },\n    });\n    this.dispatchEvent(evt);\n    onChange?.(value);\n  };\n}\n", "import { Component } from '../../core';\nimport { Group, Rect } from '../../shapes';\nimport { parseSeriesAttr, renderExtDo, select, subStyleProps } from '../../util';\nimport { deepAssign } from '../../util/deep-assign';\nimport type { OptionOptions, OptionStyleProps } from './types';\n\nexport class Option extends Component<OptionStyleProps> {\n  static defaultOptions: OptionOptions = {\n    style: {\n      value: '',\n      label: '',\n      cursor: 'pointer',\n    },\n  };\n\n  private hoverColor = '#f5f5f5';\n\n  private selectedColor = '#e6f7ff';\n\n  private background = this.appendChild(new Rect({}));\n\n  private label = this.background.appendChild(new Group({}));\n\n  private get padding() {\n    return parseSeriesAttr(this.style.padding);\n  }\n\n  private renderLabel() {\n    const { label, value } = this.style;\n    const labelStyle = subStyleProps(this.attributes, 'label');\n    select(this.label)\n      .maybeAppend('.label', () => renderExtDo(label))\n      .attr('className', 'label')\n      .styles(labelStyle);\n    // bind data to label\n    this.label.attr('__data__', value);\n  }\n\n  private renderBackground() {\n    const labelBBox = this.label.getBBox();\n    const [top, right, bottom, left] = this.padding;\n    const { width: labelWidth, height: labelHeight } = labelBBox;\n    const backgroundWidth = labelWidth + left + right;\n    const backgroundHeight = labelHeight + top + bottom;\n    const backgroundStyle = subStyleProps(this.attributes, 'background');\n    const { width: styleWidth = 0, height: styleHeight = 0, selected } = this.style;\n\n    this.background.attr({\n      ...backgroundStyle,\n      width: Math.max(backgroundWidth, styleWidth),\n      height: Math.max(backgroundHeight, styleHeight),\n      fill: selected ? this.selectedColor : '#fff',\n    });\n    // place label\n    this.label.attr({ transform: `translate(${left}, ${(backgroundHeight - labelHeight) / 2})` });\n  }\n\n  constructor(options: OptionOptions) {\n    super(deepAssign({}, Option.defaultOptions, options));\n  }\n\n  render() {\n    this.renderLabel();\n    this.renderBackground();\n  }\n\n  public bindEvents() {\n    this.addEventListener('pointerenter', () => {\n      if (this.style.selected) return;\n      this.background.attr('fill', this.hoverColor);\n    });\n    this.addEventListener('pointerleave', () => {\n      if (this.style.selected) return;\n      this.background.attr('fill', this.style.backgroundFill);\n    });\n\n    const item = this as unknown as typeof Option;\n    this.addEventListener('click', () => {\n      const { label, value, onClick } = this.style;\n      onClick?.(value, { label, value }, item);\n    });\n  }\n}\n", "import { CustomEvent } from '@antv/g';\nimport { Component } from '../../core';\nimport { DisplayObject, Rect } from '../../shapes';\nimport { hide, parseSeriesAttr, renderExtDo, select, show, subStyleProps } from '../../util';\nimport { deepAssign } from '../../util/deep-assign';\nimport { Option } from './option';\nimport type { SelectOptions, SelectStyleProps } from './types';\n\nexport class Select extends Component<SelectStyleProps> {\n  static defaultOptions: SelectOptions = {\n    style: {\n      x: 0,\n      y: 0,\n      width: 140,\n      height: 32,\n      options: [],\n      bordered: true,\n      defaultValue: '',\n      selectRadius: 8,\n      selectStroke: '#d9d9d9',\n      showDropdownIcon: true,\n      placeholderText: '',\n      placeholderFontSize: 12,\n      placeholderTextBaseline: 'top',\n      placeholderFill: '#c2c2c2',\n      dropdownFill: '#fff',\n      dropdownStroke: '#d9d9d9',\n      dropdownRadius: 8,\n      dropdownShadowBlur: 4,\n      dropdownShadowColor: 'rgba(0, 0, 0, 0.08)',\n      dropdownPadding: 8,\n      dropdownSpacing: 10,\n      optionPadding: [8, 12],\n      optionFontSize: 12,\n      optionTextBaseline: 'top',\n      optionBackgroundFill: '#fff',\n      optionBackgroundRadius: 4,\n      optionLabelFontSize: 12,\n      optionLabelTextBaseline: 'top',\n    },\n  };\n\n  /**  value */\n  private currentValue: string | number = Select.defaultOptions.style?.defaultValue!;\n\n  private isPointerInSelect = false;\n\n  public setValue(value: string | number) {\n    this.currentValue = value;\n    this.render();\n  }\n\n  public getValue() {\n    return this.currentValue;\n  }\n\n  private get dropdownPadding() {\n    return parseSeriesAttr(this.style.dropdownPadding);\n  }\n\n  private select = this.appendChild(\n    new Rect({\n      className: 'select',\n      style: {\n        cursor: 'pointer',\n        width: 0,\n        height: 0,\n      },\n    })\n  );\n\n  private dropdown = this.appendChild(\n    new Rect({\n      className: 'dropdown',\n    })\n  );\n\n  private renderSelect() {\n    const { x, y, width, height, bordered, showDropdownIcon } = this.style;\n    const selectStyle = subStyleProps(this.attributes, 'select');\n    const placeholderStyle = subStyleProps(this.attributes, 'placeholder');\n    this.select.attr({ x, y, width, height, ...selectStyle, fill: '#fff', strokeWidth: bordered ? 1 : 0 });\n    const padding = this.dropdownPadding;\n    // dropdown icon\n    const iconSize = 10;\n    if (showDropdownIcon) {\n      select(this.select)\n        .maybeAppend('.dropdown-icon', 'path')\n        .style('d', 'M-5,-3.5 L0,3.5 L5,-3.5')\n        .style('transform', `translate(${x + width - iconSize - padding[1] - padding[3]}, ${y + height / 2})`)\n        .style('lineWidth', 1)\n        .style('stroke', this.select.style.stroke);\n    }\n\n    const currentOption = this.style.options?.find((option) => option.value === this.currentValue);\n    // placeholder\n    const finalPlaceholderStyle = {\n      x: x + padding[3],\n      ...placeholderStyle,\n    };\n    select(this.select)\n      .selectAll('.placeholder')\n      .data(!currentOption ? [1] : [])\n      .join(\n        (enter) =>\n          enter\n            .append('text')\n            .attr('className', 'placeholder')\n            .styles(finalPlaceholderStyle)\n            .style('y', function () {\n              const bbox = this.getBBox();\n              return y + (height - bbox.height) / 2;\n            }),\n        (update) => update.styles(finalPlaceholderStyle),\n        (exit) => exit.remove()\n      );\n\n    // value\n    const labelStyle = subStyleProps(this.attributes, 'optionLabel');\n    const finalValueStyle = {\n      x: x + padding[3],\n      ...labelStyle,\n    };\n\n    select(this.select)\n      .selectAll('.value')\n      .data(currentOption ? [currentOption] : [])\n      .join(\n        (enter) =>\n          enter\n            .append((datum) => renderExtDo(datum.label))\n            .attr('className', 'value')\n            .styles(finalValueStyle)\n            .style('y', function () {\n              const bbox = this.getBBox();\n              return y + (height - bbox.height) / 2;\n            }),\n        (update) => update.styles(finalValueStyle),\n        (exit) => exit.remove()\n      );\n  }\n\n  private renderDropdown() {\n    const { x, y, width, height, options, onSelect, open } = this.style;\n    const dropdownStyle = subStyleProps(this.attributes, 'dropdown');\n    const optionStyle = subStyleProps(this.attributes, 'option');\n    const padding = this.dropdownPadding;\n    select(this.dropdown)\n      .maybeAppend('.dropdown-container', 'g')\n      .attr('className', 'dropdown-container')\n      .selectAll('.dropdown-item')\n      .data(options, (datum) => datum.value)\n      .join(\n        (enter) =>\n          enter\n            .append(\n              (datum) =>\n                new Option({\n                  className: 'dropdown-item',\n                  style: {\n                    ...datum,\n                    ...optionStyle,\n                    width: width - padding[1] - padding[3],\n                    selected: datum.value === this.currentValue,\n                    onClick: (value, option, item) => {\n                      this.setValue(value);\n                      onSelect?.(value, option, item);\n                      this.dispatchEvent(new CustomEvent('change', { detail: { value, option, item } }));\n                      hide(this.dropdown);\n                    },\n                  },\n                })\n            )\n            .each(function (datum, i) {\n              const nodes = this.parentNode?.children as DisplayObject[];\n              const accHeight = nodes.reduce((acc, curr, index) => {\n                if (index < i) {\n                  acc += curr.getBBox().height;\n                }\n                return acc;\n              }, 0);\n\n              // \n              this.attr('transform', `translate(${padding[3]}, ${padding[0] + accHeight})`);\n            }),\n        (update) =>\n          update.update((datum: any) => {\n            return { selected: datum.value === this.currentValue };\n          }),\n        (exit) => exit.remove()\n      );\n\n    const bbox = (this.dropdown.getElementsByClassName('dropdown-container')?.[0] as any)?.getBBox();\n\n    const { spacing } = dropdownStyle;\n\n    this.dropdown.attr({\n      transform: `translate(${x}, ${y + height + spacing})`,\n      width: bbox.width + padding[1] + padding[3],\n      height: bbox.height + padding[0] + padding[2],\n      ...dropdownStyle,\n    });\n    // \n    !open && hide(this.dropdown);\n  }\n\n  constructor(options: SelectOptions) {\n    super(deepAssign({}, Select.defaultOptions, options));\n    const { defaultValue } = this.style;\n    if (defaultValue && this.style.options?.some((option) => option.value === defaultValue)) {\n      this.currentValue = defaultValue;\n    }\n  }\n\n  render() {\n    this.renderSelect();\n    this.renderDropdown();\n  }\n\n  bindEvents() {\n    this.addEventListener('click', (e: Event) => {\n      e.stopPropagation();\n    });\n\n    this.select.addEventListener('click', () => {\n      if (this.dropdown.style.visibility === 'visible') hide(this.dropdown);\n      else {\n        show(this.dropdown);\n      }\n    });\n\n    // mock blur\n    this.addEventListener('pointerenter', () => {\n      this.isPointerInSelect = true;\n    });\n\n    this.addEventListener('pointerleave', () => {\n      this.isPointerInSelect = false;\n    });\n\n    document?.addEventListener('click', () => {\n      if (!this.isPointerInSelect) {\n        hide(this.dropdown);\n      }\n    });\n  }\n}\n", "import type { Canvas } from '@antv/g';\nimport { clamp, omit } from '@antv/util';\nimport { ComponentOptions, Component } from '../../core';\nimport type { GroupStyleProps, PolygonStyleProps, RectStyleProps } from '../../shapes';\nimport { Group, Path, Rect } from '../../shapes';\nimport { PrefixObject } from '../../types';\nimport { deepAssign, parseSeriesAttr, select, subStyleProps } from '../../util';\nimport { Indicator } from '../indicator';\nimport type { SelectStyleProps } from '../select';\nimport { Select } from '../select';\n\ntype IconBaseStyleProps = GroupStyleProps &\n  PrefixObject<RectStyleProps, 'background'> & {\n    x?: number;\n    y?: number;\n    size?: number;\n    color?: string;\n    onClick?: (e: IconBase) => void;\n  };\ntype IconBaseOptions = ComponentOptions<IconBaseStyleProps>;\nexport abstract class IconBase<T extends Record<string, any> = {}> extends Component<T & IconBaseStyleProps> {\n  public static tag = 'IconBase';\n\n  static defaultOptions: IconBaseOptions = {\n    style: {\n      x: 0,\n      y: 0,\n      size: 10,\n      color: '#565758',\n      backgroundRadius: 4,\n      backgroundFill: '#e2e2e2',\n    },\n  };\n\n  private static backgroundOpacities = {\n    default: 0,\n    hover: 0.8,\n    active: 1,\n  };\n\n  /** hover  */\n  protected showBackground = true;\n\n  protected get label() {\n    return 'BaseIcon';\n  }\n\n  protected indicator!: Indicator;\n\n  protected background = this.appendChild(new Rect({}));\n\n  protected icon = this.appendChild(new Group({}));\n\n  get lineWidth() {\n    return Math.log10(this.attributes.size);\n  }\n\n  protected get padding() {\n    return parseSeriesAttr(this.attributes.size / 5);\n  }\n\n  protected get iconSize() {\n    const { size } = this.attributes;\n    const [top, right, bottom, left] = this.padding;\n    return Math.max(size - Math.max(left + right, top + bottom), this.lineWidth * 2 + 1);\n  }\n\n  protected renderBackground() {\n    const { x, y, size } = this.attributes;\n    const halfSize = size / 2;\n    const backgroundStyle = subStyleProps(this.attributes, 'background');\n    this.background.attr({ x: x - halfSize, y: y - halfSize, width: size, height: size, ...backgroundStyle });\n  }\n\n  protected showIndicator() {\n    if (!this.label) return;\n    const { size } = this.attributes;\n    const { x, y } = this.background.getBBox();\n    this.indicator.update({ x: x + size / 2, y: y - 5, labelText: this.label, visibility: 'visible' });\n  }\n\n  protected hideIndicator() {\n    this.indicator.update({ visibility: 'hidden' });\n  }\n\n  constructor(options: IconBaseOptions) {\n    super(\n      deepAssign(\n        {},\n        { style: { backgroundOpacity: IconBase.backgroundOpacities.default } },\n        IconBase.defaultOptions,\n        options\n      )\n    );\n  }\n\n  connectedCallback(): void {\n    super.connectedCallback();\n    // indicator  canvas\n    const { size } = this.attributes;\n    const { x, y } = this.background.getBBox();\n    const canvas = this.ownerDocument?.defaultView;\n\n    if (canvas) {\n      this.indicator = (canvas as unknown as Canvas).appendChild(\n        new Indicator({\n          style: {\n            x: x + size / 2,\n            y: y - size / 2,\n            visibility: 'hidden',\n            position: 'top',\n            radius: 3,\n            zIndex: 100,\n          },\n        })\n      );\n    }\n  }\n\n  disconnectedCallback() {\n    this.indicator.destroy();\n  }\n\n  render() {\n    this.renderIcon();\n    if (this.showBackground) this.renderBackground();\n  }\n\n  abstract renderIcon(): void;\n\n  public bindEvents(): void {\n    const { onClick } = this.attributes;\n    this.addEventListener('click', () => {\n      onClick?.(this);\n    });\n\n    if (this.showBackground) {\n      const resetBackground = () => this.background.attr({ opacity: IconBase.backgroundOpacities.default });\n      const hoverBackground = () => this.background.attr({ opacity: IconBase.backgroundOpacities.hover });\n      const activeBackground = () => this.background.attr({ opacity: IconBase.backgroundOpacities.active });\n\n      this.addEventListener('pointerenter', () => {\n        hoverBackground();\n        this.showIndicator();\n      });\n      this.addEventListener('pointerleave', () => {\n        resetBackground();\n        this.hideIndicator();\n      });\n      this.addEventListener('pointerdown', () => {\n        activeBackground();\n      });\n      this.addEventListener('pointerup', () => {\n        resetBackground();\n      });\n    }\n  }\n}\n\nconst arrow = (size: number, color: string = '#565758') => {\n  return new Path({\n    style: {\n      fill: color,\n      d: `M ${size},${size} L -${size},0 L ${size},-${size} Z`,\n      transformOrigin: 'center',\n    },\n  });\n};\n\n/**  */\nexport class Reset extends IconBase {\n  private arcPath(cx: number, cy: number, radius: number) {\n    const [rx, ry] = [radius, radius];\n    const getPosByAngle = (angle: number) => [cx + radius * Math.cos(angle), cy + radius * Math.sin(angle)];\n    const [x1, y1] = getPosByAngle((-5 / 4) * Math.PI);\n    const [x2, y2] = getPosByAngle((1 / 4) * Math.PI);\n    return `M${x1},${y1},A${rx},${ry},0,1,1,${x2},${y2}`;\n  }\n\n  protected get label() {\n    return '';\n  }\n\n  renderIcon() {\n    const { x, y, color } = this.attributes;\n    const size = this.iconSize;\n    const { lineWidth } = this;\n    const arrowSize = lineWidth + 0.5;\n\n    select(this.icon)\n      .maybeAppend('.reset', 'path')\n      .styles({\n        stroke: color,\n        lineWidth,\n        d: this.arcPath(x, y, size / 2 - lineWidth),\n        markerStart: arrow(arrowSize, color),\n      });\n  }\n}\n\n/**  */\nexport class Backward extends IconBase {\n  protected get label() {\n    return '';\n  }\n\n  renderIcon() {\n    const { x, y, color } = this.attributes;\n    const size = this.iconSize;\n    const deltaX = size / 2;\n    const deltaY = size / 2 / 3 ** 0.5;\n    const points: PolygonStyleProps['points'] = [\n      [x, y],\n      [x, y - deltaY],\n      [x - deltaX, y],\n      [x, y + deltaY],\n      [x, y],\n      [x + deltaX, y - deltaY],\n      [x + deltaX, y + deltaY],\n      [x, y],\n    ];\n    select(this.icon).maybeAppend('.backward', 'polygon').styles({\n      points,\n      fill: color,\n    });\n  }\n}\n\n/**  */\nexport class Forward extends IconBase {\n  protected get label() {\n    return '';\n  }\n\n  renderIcon() {\n    const { x, y, color } = this.attributes;\n    const size = this.iconSize;\n    const deltaX = size / 2;\n    const deltaY = size / 2 / 3 ** 0.5;\n    const points: PolygonStyleProps['points'] = [\n      [x, y],\n      [x, y - deltaY],\n      [x + deltaX, y],\n      [x, y + deltaY],\n      [x, y],\n      [x - deltaX, y - deltaY],\n      [x - deltaX, y + deltaY],\n      [x, y],\n    ];\n    select(this.icon).maybeAppend('.forward', 'polygon').styles({\n      points,\n      fill: color,\n    });\n  }\n}\n\nexport class Play extends IconBase {\n  protected get label() {\n    return '';\n  }\n\n  renderIcon() {\n    const { x, y, color } = this.attributes;\n    const size = this.iconSize;\n    const deltaX = (size / 3) * 3 ** 0.5 * 0.8;\n    const points: PolygonStyleProps['points'] = [\n      [x + deltaX, y],\n      [x - deltaX / 2, y - (size / 2) * 0.8],\n      [x - deltaX / 2, y + (size / 2) * 0.8],\n      [x + deltaX, y],\n    ];\n    select(this.icon).maybeAppend('.play', 'polygon').styles({\n      points,\n      fill: color,\n    });\n  }\n}\n\nexport class Pause extends IconBase {\n  protected get label() {\n    return '';\n  }\n\n  renderIcon() {\n    const { x, y, color } = this.attributes;\n    const size = this.iconSize;\n    const deltaX = size / 3;\n    const points: PolygonStyleProps['points'] = [\n      [x - deltaX, y - size / 2],\n      [x - deltaX, y + size / 2],\n      [x - deltaX / 2, y + size / 2],\n      [x - deltaX / 2, y - size / 2],\n      [x - deltaX, y - size / 2],\n      [x + deltaX / 2, y - size / 2],\n      [x + deltaX / 2, y + size / 2],\n      [x + deltaX, y + size / 2],\n      [x + deltaX, y - size / 2],\n    ];\n    select(this.icon).maybeAppend('.pause', 'polygon').styles({\n      points,\n      fill: color,\n    });\n  }\n}\n\n/**  */\nexport class Range extends IconBase {\n  protected get label() {\n    return '';\n  }\n\n  renderIcon() {\n    const { x, y, color } = this.attributes;\n    const { iconSize: size, lineWidth } = this;\n    const gap = lineWidth;\n\n    select(this.icon)\n      .maybeAppend('.left-line', 'line')\n      .styles({\n        x1: x - size / 2,\n        y1: y - size / 2,\n        x2: x - size / 2,\n        y2: y + size / 2,\n        stroke: color,\n        lineWidth,\n      });\n\n    select(this.icon)\n      .maybeAppend('.right-line', 'line')\n      .styles({\n        x1: x + size / 2,\n        y1: y - size / 2,\n        x2: x + size / 2,\n        y2: y + size / 2,\n        stroke: color,\n        lineWidth,\n      });\n\n    select(this.icon)\n      .maybeAppend('.left-arrow', 'line')\n      .styles({\n        x1: x,\n        y1: y,\n        x2: x - size / 2 + gap * 2,\n        y2: y,\n        stroke: color,\n        lineWidth,\n        markerEnd: arrow(lineWidth * 2, color),\n      });\n\n    select(this.icon)\n      .maybeAppend('.right-arrow', 'line')\n      .styles({\n        x1: x,\n        y1: y,\n        x2: x + size / 2 - gap * 2,\n        y2: y,\n        stroke: color,\n        lineWidth,\n        markerEnd: arrow(lineWidth * 2, color),\n      });\n  }\n}\n\n/**  */\nexport class Value extends IconBase {\n  protected get label() {\n    return '';\n  }\n\n  renderIcon() {\n    const { x, y, color } = this.attributes;\n    const { iconSize: size, lineWidth } = this;\n\n    select(this.icon)\n      .maybeAppend('.line', 'line')\n      .styles({\n        x1: x,\n        y1: y - size / 2,\n        x2: x,\n        y2: y + size / 2,\n        stroke: color,\n        lineWidth,\n      });\n\n    const gap = lineWidth;\n\n    select(this.icon)\n      .maybeAppend('.left-arrow', 'line')\n      .styles({\n        x1: x - size / 2 - gap * 2,\n        y1: y,\n        x2: x - gap * 2,\n        y2: y,\n        stroke: color,\n        lineWidth,\n        markerEnd: arrow(lineWidth * 2, color),\n      });\n\n    select(this.icon)\n      .maybeAppend('.right-arrow', 'line')\n      .styles({\n        x1: x + size / 2 + gap * 2,\n        y1: y,\n        x2: x + gap * 2,\n        y2: y,\n        stroke: color,\n        lineWidth,\n        markerEnd: arrow(lineWidth * 2, color),\n      });\n  }\n}\n\nconst getCoordinatePoints = (size: number) => {\n  return [\n    [-size / 2, -size / 2],\n    [-size / 2, size / 2],\n    [size / 2, size / 2],\n  ];\n};\n\nexport class LineChart extends IconBase {\n  protected get label() {\n    return '';\n  }\n\n  renderIcon() {\n    const { x, y, color } = this.attributes;\n    const { iconSize: size, lineWidth } = this;\n\n    const gap = lineWidth;\n    const deltaX = (size - gap * 2 - lineWidth) / 4;\n    const deltaY = (size - gap * 2 - lineWidth) / 2;\n    const [ox, oy] = [x - size / 2 + gap, y + size / 2 - gap * 2];\n\n    select(this.icon)\n      .maybeAppend('.coordinate', 'polyline')\n      .styles({\n        points: getCoordinatePoints(size).map(([px, py]) => [px + x, py + y]),\n        stroke: color,\n        lineWidth,\n      });\n\n    select(this.icon)\n      .maybeAppend('.line', 'polyline')\n      .styles({\n        points: [\n          [ox, oy],\n          [ox + deltaX, oy - deltaY],\n          [ox + deltaX * 2, oy],\n          [ox + deltaX * 4, oy - deltaY * 2],\n        ],\n        stroke: color,\n        lineWidth,\n      });\n  }\n}\n\nexport class BarChart extends IconBase {\n  protected get label() {\n    return '';\n  }\n\n  get data() {\n    return [1, 4, 2, 4, 3];\n  }\n\n  renderIcon() {\n    const { data } = this;\n    const { x, y, color } = this.attributes;\n    const { iconSize: size, lineWidth } = this;\n\n    const gap = lineWidth;\n    const deltaX = (size - gap) / data.length;\n    const deltaY = (size - gap * 2) / 4;\n    const [ox, oy] = [x - size / 2 + gap * 2, y + size / 2 - gap];\n\n    select(this.icon)\n      .maybeAppend('.coordinate', 'polyline')\n      .styles({\n        points: getCoordinatePoints(size).map(([px, py]) => [px + x, py + y]),\n        stroke: color,\n        lineWidth,\n      });\n\n    select(this.icon)\n      .maybeAppend('.bars', 'g')\n      .selectAll('.column')\n      .data(this.data.map((value, index) => ({ value, index })))\n      .join((enter) =>\n        enter\n          .append('line')\n          .attr('className', 'column')\n          .style('x1', ({ index }: any) => ox + deltaX * index)\n          .style('y1', oy)\n          .style('x2', ({ index }: any) => ox + deltaX * index)\n          .style('y2', ({ value }: any) => oy - deltaY * value)\n          .styles({\n            y1: oy,\n            stroke: color,\n            lineWidth,\n          })\n      );\n  }\n}\n\n/**  */\nexport class Split extends IconBase {\n  protected showBackground = false;\n\n  constructor(options: IconBaseOptions) {\n    super(deepAssign({}, { style: { color: '#d8d9d9' } }, options));\n  }\n\n  renderIcon() {\n    const { x, y, color } = this.attributes;\n    const { iconSize: size, lineWidth } = this;\n    select(this.icon)\n      .maybeAppend('.split', 'line')\n      .styles({\n        x1: x,\n        y1: y - size / 2,\n        x2: x,\n        y2: y + size / 2,\n        stroke: color,\n        lineWidth,\n      });\n  }\n}\n\nexport class SpeedSelect extends IconBase<{ speed?: number; onSelect: SelectStyleProps['onSelect'] }> {\n  public static tag = 'SpeedSelect';\n\n  protected showBackground = false;\n\n  protected get padding() {\n    return parseSeriesAttr(0);\n  }\n\n  renderIcon() {\n    const { iconSize } = this;\n    const { x, y, speed = 1 } = this.attributes;\n    const inheritStyle = omit(this.attributes as any, [\n      'x',\n      'y',\n      'transform',\n      'transformOrigin',\n      'width',\n      'height',\n      'size',\n      'color',\n      'speed',\n    ]);\n    const width = clamp(iconSize, 20, Infinity);\n    const height = 20;\n    const style: SelectStyleProps = {\n      ...inheritStyle,\n      x: x - width / 2,\n      y: y - height / 2,\n      width,\n      height,\n      defaultValue: speed,\n      bordered: false,\n      showDropdownIcon: false,\n      selectRadius: 2,\n      dropdownPadding: this.padding,\n      dropdownRadius: 2,\n      dropdownSpacing: iconSize / 5,\n      placeholderFontSize: iconSize / 2,\n      optionPadding: 0,\n      optionLabelFontSize: iconSize / 2,\n      optionBackgroundRadius: 1,\n      options: [\n        { label: '1x', value: 1 },\n        { label: '1.5x', value: 1.5 },\n        { label: '2x', value: 2 },\n      ],\n    };\n\n    select(this.icon)\n      .maybeAppend('.speed', () => new Select({ style }))\n      .attr('className', 'speed')\n      .each(function () {\n        this.update(style);\n      });\n  }\n}\n\ntype ToggleIconStyleProps<T extends string> = IconBaseStyleProps & {\n  type: T;\n  onChange?: (type: T) => void;\n};\ntype ToggleIconOptions<T extends string> = ComponentOptions<ToggleIconStyleProps<T>>;\nexport abstract class ToggleIcon<T extends string> extends Component<ToggleIconStyleProps<T>> {\n  abstract toggles: Array<\n    [T, typeof Play | typeof Pause | typeof Range | typeof Value | typeof LineChart | typeof BarChart]\n  >;\n\n  public static tag = 'ToggleIcon';\n\n  private icon = this.appendChild(new Group({}));\n\n  private currentType: T;\n\n  public getType() {\n    return this.currentType;\n  }\n\n  constructor(options: ToggleIconOptions<T>) {\n    super(options);\n    this.currentType = this.attributes.type;\n  }\n\n  render() {\n    const { onChange, ...restStyles } = this.attributes;\n    select(this.icon)\n      .selectAll('.icon')\n      .data([this.currentType])\n      .join(\n        (enter) =>\n          enter\n            .append((type) => {\n              const Ctor = this.toggles.find(([key]) => key === type)?.[1];\n              if (!Ctor) throw new Error(`Invalid type: ${type}`);\n              return new Ctor({});\n            })\n            .attr('className', 'icon')\n            .styles(restStyles, false)\n            .update({}),\n        (update) => update.styles({ restStyles }).update({}),\n        (exit) => exit.remove()\n      );\n  }\n\n  bindEvents() {\n    const { onChange } = this.attributes;\n    this.addEventListener('click', (e: Event) => {\n      e.preventDefault();\n      e.stopPropagation();\n      const nextIndex = (this.toggles.findIndex(([key]) => key === this.currentType) + 1) % this.toggles.length;\n      const nextType = this.toggles[nextIndex][0];\n      onChange?.(this.currentType);\n      this.currentType = nextType;\n      this.render();\n    });\n  }\n}\n\nexport class PlayPause extends ToggleIcon<'play' | 'pause'> {\n  toggles: ['play' | 'pause', typeof Play | typeof Pause][] = [\n    ['play', Play],\n    ['pause', Pause],\n  ];\n\n  constructor(options: ToggleIconOptions<'play' | 'pause'>) {\n    super(deepAssign({}, { style: { type: 'play' } }, options));\n  }\n}\n\nexport class SelectionType extends ToggleIcon<'range' | 'value'> {\n  toggles: ['range' | 'value', typeof Range | typeof Value][] = [\n    ['range', Range],\n    ['value', Value],\n  ];\n\n  constructor(options: ToggleIconOptions<'range' | 'value'>) {\n    super(deepAssign({}, { style: { type: 'range' } }, options));\n  }\n}\n\nexport class ChartType extends ToggleIcon<'line' | 'column'> {\n  toggles: ['line' | 'column', typeof LineChart | typeof BarChart][] = [\n    ['line', LineChart],\n    ['column', BarChart],\n  ];\n\n  constructor(options: ToggleIconOptions<'line' | 'column'>) {\n    super(deepAssign({}, { style: { type: 'column' } }, options));\n  }\n}\n", "import type { Canvas } from '@antv/g';\nimport { Component } from '../../core';\nimport { DisplayObject, Group, Rect } from '../../shapes';\nimport { deepAssign, parseSeriesAttr, subStyleProps } from '../../util';\nimport { Backward, ChartType, Forward, PlayPause, Reset, SelectionType, SpeedSelect, Split } from './icons';\nimport type { ControllerOptions, ControllerStyleProps, Functions } from './types';\n\nconst componentsMap: Record<Functions | 'split', { new (...args: any): DisplayObject }> = {\n  reset: Reset,\n  speed: SpeedSelect,\n  backward: Backward,\n  playPause: PlayPause,\n  forward: Forward,\n  selectionType: SelectionType,\n  chartType: ChartType,\n  split: Split,\n} as const;\n\nexport class Controller extends Component<ControllerStyleProps> {\n  static defaultOptions: ControllerOptions = {\n    style: {\n      x: 0,\n      y: 0,\n      width: 300,\n      height: 40,\n      padding: 0,\n      align: 'center',\n      iconSize: 25,\n      iconSpacing: 0,\n      speed: 1,\n      state: 'pause',\n      chartType: 'line',\n      selectionType: 'range',\n      backgroundFill: '#fbfdff',\n      backgroundStroke: '#ebedf0',\n      functions: [\n        ['reset', 'speed'],\n        ['backward', 'playPause', 'forward'],\n        ['selectionType', 'chartType'],\n      ],\n    },\n  };\n\n  private background = this.appendChild(new Rect({}));\n\n  private functions = this.appendChild(new Group({}));\n\n  private speedSelect!: SpeedSelect;\n\n  private get padding() {\n    return parseSeriesAttr(this.attributes.padding);\n  }\n\n  private renderBackground() {\n    const { x, y, width, height } = this.style;\n    const backgroundStyle = subStyleProps(this.attributes, 'background');\n    this.background.attr({ x, y, width, height, ...backgroundStyle });\n  }\n\n  private renderFunctions() {\n    const { functions, iconSize, iconSpacing, x, y, width, height, align } = this.attributes;\n\n    const {\n      padding: [, right, , left],\n    } = this;\n\n    const components = functions.reduce((prev, curr) => {\n      if (prev.length && curr.length) {\n        return prev.concat('split', ...curr);\n      }\n      return prev.concat(...curr);\n    }, [] as (keyof typeof componentsMap)[]);\n\n    const componentsWidth = components.length * (iconSize + iconSpacing) - iconSpacing;\n    const xOffset =\n      {\n        left: left + iconSize / 2,\n        center: (width - componentsWidth) / 2 + iconSize / 2,\n        right: width - componentsWidth - left - right + iconSize / 2,\n      }[align] || 0;\n\n    this.speedSelect?.destroy();\n    this.functions.removeChildren();\n    components.forEach((name, index) => {\n      const Ctor = componentsMap[name];\n      const style: Record<string, any> = {\n        x: x + index * (iconSize + iconSpacing) + xOffset,\n        y: y + height / 2,\n        size: iconSize,\n      };\n\n      if (Ctor === SpeedSelect) {\n        style.speed = this.attributes.speed;\n        style.onSelect = (value: any) => this.handleFunctionChange(name, { value });\n      } else if (([PlayPause, SelectionType, ChartType] as any).includes(Ctor)) {\n        style.onChange = (value: any) => this.handleFunctionChange(name, { value });\n        if (Ctor === PlayPause) style.type = this.attributes.state === 'play' ? 'pause' : 'play';\n        if (Ctor === SelectionType) style.type = this.attributes.selectionType === 'range' ? 'value' : 'range';\n        if (Ctor === ChartType) style.type = this.attributes.chartType === 'line' ? 'column' : 'line';\n      } else {\n        // IconBase\n        style.onClick = () => this.handleFunctionChange(name, { value: name });\n      }\n\n      if (Ctor === SpeedSelect) {\n        // SpeedSelect  canvas\n        const canvas = this.ownerDocument?.defaultView;\n        if (canvas) {\n          this.speedSelect = new Ctor({ style: { ...style, zIndex: 100 } }) as SpeedSelect;\n          (canvas as unknown as Canvas).appendChild(this.speedSelect);\n        }\n      } else {\n        this.functions.appendChild(new Ctor({ style }));\n      }\n    });\n  }\n\n  constructor(options: ControllerOptions) {\n    super(deepAssign({}, Controller.defaultOptions, options));\n  }\n\n  disconnectedCallback(): void {\n    super.disconnectedCallback();\n    this.speedSelect?.destroy();\n  }\n\n  render() {\n    this.renderBackground();\n    this.renderFunctions();\n  }\n\n  handleFunctionChange(name: string, value: any) {\n    const { onChange } = this.attributes;\n    onChange?.(name as Functions, value);\n  }\n}\n", "import { ComponentOptions, Component } from '../../core';\nimport type { GroupStyleProps, LineStyleProps, RectStyleProps, CircleStyleProps } from '../../shapes';\nimport { Circle } from '../../shapes';\nimport { PrefixObject } from '../../types';\nimport { select, subStyleProps } from '../../util';\nimport { deepAssign } from '../../util/deep-assign';\nimport type { HandleType } from '../slider/handle';\n\ntype TimeModeHandleOptions = ComponentOptions<Partial<CircleStyleProps>>;\n\nexport class TimeModeHandle extends Circle {\n  static defaultOptions = {\n    style: {\n      r: 5,\n      fill: '#3f7cf7',\n      lineWidth: 0,\n      stroke: '#3f7cf7',\n      strokeOpacity: 0.5,\n      cursor: 'pointer',\n    },\n  };\n\n  constructor(options: TimeModeHandleOptions) {\n    super(deepAssign({}, TimeModeHandle.defaultOptions, options));\n    this.bindEvents();\n  }\n\n  bindEvents() {\n    this.addEventListener('mouseenter', () => {\n      this.attr('lineWidth', Math.ceil(+(this.style.r || 0) / 2));\n    });\n\n    this.addEventListener('mouseleave', () => {\n      this.attr('lineWidth', 0);\n    });\n  }\n}\n\ntype ChartModeHandleStyleProps = GroupStyleProps &\n  PrefixObject<Omit<RectStyleProps, 'x' | 'y' | 'width' | 'height'>, 'background'> &\n  PrefixObject<Omit<LineStyleProps, 'x1' | 'y1' | 'x2' | 'y2'>, 'icon'> &\n  PrefixObject<Omit<LineStyleProps, 'x1' | 'y1' | 'x2' | 'y2'>, 'border'> & {\n    x?: number;\n    y?: number;\n    width?: number;\n    height?: number;\n    /**  */\n    iconSize?: number;\n    type: HandleType;\n  };\ntype ChartModeHandleOptions = ComponentOptions<ChartModeHandleStyleProps>;\nexport class ChartModeHandle extends Component<ChartModeHandleStyleProps> {\n  static defaultOptions: ChartModeHandleOptions = {\n    style: {\n      x: 0,\n      y: 0,\n      width: 10,\n      height: 50,\n      iconSize: 10,\n      type: 'start',\n      backgroundFill: '#fff',\n      backgroundFillOpacity: 0.5,\n      iconStroke: '#9a9a9a',\n      iconLineWidth: 1,\n      borderStroke: '#e8e8e8',\n      borderLineWidth: 1,\n    },\n  };\n\n  private renderBackground() {\n    const { x, y, width, height } = this.attributes;\n    const style = subStyleProps(this.attributes, 'background');\n    select(this)\n      .maybeAppend('background', 'rect')\n      .attr('className', 'background')\n      .styles({ x: x - width / 2, y: y - height / 2, width, height, ...style });\n  }\n\n  private renderIcon() {\n    const { x, y, iconSize } = this.attributes;\n    const style = subStyleProps(this.attributes, 'icon');\n    const diffX = 1;\n    const diffY = iconSize / 2;\n    select(this)\n      .maybeAppend('icon-left-line', 'line')\n      .attr('className', 'icon-left-line')\n      .styles({ x1: x - diffX, y1: y - diffY, x2: x - diffX, y2: y + diffY, ...style });\n    select(this)\n      .maybeAppend('icon-right-line', 'line')\n      .attr('className', 'icon-right-line')\n      .styles({ x1: x + diffX, y1: y - diffY, x2: x + diffX, y2: y + diffY, ...style });\n  }\n\n  private renderBorder() {\n    const { x: xx, y, width, height, type } = this.attributes;\n    const style = subStyleProps(this.attributes, 'border');\n    const x = type === 'start' ? +width / 2 : -width / 2;\n    select(this)\n      .maybeAppend('border', 'line')\n      .attr('className', 'border')\n      .styles({\n        x1: x + xx,\n        y1: y - height / 2,\n        x2: x + xx,\n        y2: y + height / 2,\n        ...style,\n      });\n  }\n\n  render() {\n    this.renderBackground();\n    this.renderIcon();\n    this.renderBorder();\n  }\n\n  constructor(options: ChartModeHandleOptions) {\n    super(deepAssign({}, ChartModeHandle.defaultOptions, options));\n  }\n}\n", "import type { Interval } from './types';\nimport { formatTime } from '../../util/time';\n// TODO  \n/**\n *  Date \n * @param time\n * @param interval \n * @returns\n */\nexport function labelFormatter(time: number): string;\nexport function labelFormatter(time: Date, interval: Interval): string;\nexport function labelFormatter(time: number | Date, interval?: Interval) {\n  if (typeof time === 'number') {\n    return parseBySeries(time);\n  }\n  return parseByTime(time, interval!);\n}\n\nexport function parseByTime(time: Date, interval: Interval) {\n  const date = new Date(time);\n\n  switch (interval) {\n    case 'half-hour':\n    case 'hour':\n    case 'four-hour':\n      if ([0, 6, 12, 18].includes(date.getHours()) && date.getMinutes() === 0) {\n        // HH:mm\\nYYYY-MM-DD\n        return formatTime(date, 'HH:mm\\nYYYY-MM-DD');\n      }\n      // HH:mm\n      return formatTime(date, 'HH:mm');\n    case 'half-day':\n      // A\\nYYYY-MM-DD\n      if (date.getHours() < 12) {\n        return `AM\\n${formatTime(date, 'YYYY-MM-DD')}`;\n      }\n      // A\n      return 'PM';\n    case 'day':\n      if ([1, 10, 20].includes(date.getDate())) {\n        // DD\\nYYYY-MM\n        return formatTime(date, 'DD\\nYYYY-MM');\n      }\n      // DD\n      return formatTime(date, 'DD');\n    case 'week':\n      if (date.getDate() <= 7) {\n        // DD\\nYYYY-MM\n        return formatTime(date, 'DD\\nYYYY-MM');\n      }\n      // DD\n      return formatTime(date, 'DD');\n    case 'month':\n      if ([0, 6].includes(date.getMonth())) {\n        // MM\\nYYYY\n        return formatTime(date, 'MM\\nYYYY');\n      }\n      // MM\n      return formatTime(date, 'MM');\n    case 'season':\n      if ([0].includes(date.getMonth())) {\n        // MM\\nYYYY\n        return formatTime(date, 'MM\\nYYYY');\n      }\n      // MM\n      return formatTime(date, 'MM');\n    case 'year':\n      // YYYY\n      return formatTime(date, 'YYYY');\n    default:\n      // YYYY-MM-DD HH:mm\n      return formatTime(date, 'YYYY-MM-DD HH:mm');\n  }\n}\n\n/**\n *  1, 2, 3 \n * @param time\n * @param interval\n */\nexport function parseBySeries(time: number) {\n  const hours = String(Math.floor(time / 3600)).padStart(2, '0');\n  const minutes = String(Math.floor((time % 3600) / 60)).padStart(2, '0');\n  const seconds = String(Math.floor(time % 60)).padStart(2, '0');\n  if (time < 3600) {\n    // mm:ss\n    return `${minutes}:${seconds}`;\n  }\n  return `${hours}:${minutes}:${seconds}`;\n}\n", "import { clamp } from '@antv/util';\nimport { Component } from '../../core';\nimport { Line } from '../../shapes';\nimport { BBox, deepAssign, subStyleProps, formatTime } from '../../util';\nimport { Axis } from '../axis';\nimport type { LinearAxisStyleProps } from '../axis/types';\nimport type { SliderStyleProps } from '../slider';\nimport { Slider } from '../slider';\nimport { Controller } from './controller';\nimport { ChartModeHandle, TimeModeHandle } from './handle';\nimport type { ControllerStyleProps, TimebarOptions, TimebarStyleProps, Datum } from './types';\nimport { labelFormatter, parseBySeries } from './utils';\n\ntype States = Pick<TimebarStyleProps, 'speed' | 'selectionType' | 'chartType' | 'state' | 'playMode'> & {\n  values?: [number, number] | [Date, Date] | [number | Date, typeof Infinity];\n};\n\nexport class Timebar extends Component<TimebarStyleProps> {\n  static defaultOptions: TimebarOptions = {\n    style: {\n      x: 0,\n      y: 0,\n      axisLabelFill: '#6e6e6e',\n      axisLabelTextAlign: 'left',\n      axisLabelTextBaseline: 'top',\n      axisLabelTransform: 'translate(5, -12)',\n      axisLineLineWidth: 1,\n      axisLineStroke: '#cacdd1',\n      axisTickLength: 15,\n      axisTickLineWidth: 1,\n      axisTickStroke: '#cacdd1',\n      chartShowLabel: false,\n      chartType: 'line',\n      controllerAlign: 'center',\n      controllerHeight: 40,\n      data: [],\n      interval: 'day',\n      loop: false,\n      playMode: 'acc',\n      selectionType: 'range',\n      type: 'time',\n    },\n  };\n\n  private axis = this.appendChild(\n    new Axis({\n      style: { type: 'linear', startPos: [0, 0], endPos: [0, 0], data: [], showArrow: false, animate: false },\n    })\n  );\n\n  /**  group timeline  chart */\n  private timeline = this.appendChild(\n    new Slider({\n      style: {\n        onChange: (values) => {\n          this.handleSliderChange(values);\n        },\n      },\n    })\n  );\n\n  private controller = this.appendChild(new Controller({}));\n\n  private states: States = {};\n\n  private playInterval?: number;\n\n  private get data() {\n    const { data } = this.attributes;\n    const compareFn = (a: Datum, b: Datum) => {\n      if (a.time < b.time) return -1;\n      if (a.time > b.time) return 1;\n      return 0;\n    };\n    return data.sort(compareFn);\n  }\n\n  /**  */\n  private get space() {\n    const { x, y, width, height, type, controllerHeight } = this.attributes;\n\n    const availableTimelineHeight = clamp(+height - controllerHeight, 0, +height);\n    const controllerBBox = new BBox(x, y + +height - controllerHeight, +width, controllerHeight);\n\n    // chart \n    let axisBBox: BBox;\n    let axisHeight = 0;\n    if (type === 'chart') {\n      // axis  35\n      axisHeight = 35;\n      axisBBox = new BBox(x, y + availableTimelineHeight - axisHeight, +width, axisHeight);\n    } else axisBBox = new BBox();\n\n    const timelineHeight = type === 'time' ? 10 : availableTimelineHeight;\n    const timelineBBox = new BBox(\n      x,\n      y + (type === 'time' ? availableTimelineHeight : availableTimelineHeight - timelineHeight),\n      +width,\n      timelineHeight - axisHeight\n    );\n\n    return { axisBBox, controllerBBox, timelineBBox };\n  }\n\n  private setBySliderValues(val: number | number[]) {\n    const { data } = this;\n    const [startRatio, endRatio] = Array.isArray(val) ? val : [0, val];\n    const length = data.length;\n    const startDatum = data[Math.floor(startRatio * length)];\n    const endDatum = data[Math.ceil(endRatio * length) - (Array.isArray(val) ? 0 : 1)];\n    //  endDatum \n    this.states.values = [startDatum?.time ?? data[0].time, endDatum?.time ?? Infinity] as any;\n  }\n\n  private setByTimebarValues(val: TimebarStyleProps['values']) {\n    const { data } = this;\n    const [start, end] = Array.isArray(val) ? val : [undefined, val];\n    const startDatum = data.find(({ time }) => time === start);\n    const endDatum = data.find(({ time }) => time === end);\n    this.states.values = [startDatum?.time ?? data[0]?.time, endDatum?.time ?? Infinity] as any;\n  }\n\n  private setByIndex(index: [number, number]) {\n    const { data } = this;\n    const [startIndex, endIndex] = index;\n    this.states.values = [data[startIndex]?.time ?? data[0].time, this.data[endIndex]?.time ?? Infinity] as any;\n  }\n\n  /**\n   *  timebar  values\n   */\n  private get sliderValues(): [number, number] {\n    const { values, selectionType } = this.states;\n    const [start, end] = Array.isArray(values) ? values : [undefined, values];\n\n    const { data } = this;\n    const length = data.length;\n    const isValue = selectionType === 'value';\n\n    const getStartValue = () => {\n      const startDatumIndex = data.findIndex(({ time }) => time === start);\n      if (isValue) return 0;\n      if (startDatumIndex > -1) return startDatumIndex / length;\n      // value  0\n      return 0;\n    };\n\n    const getEndValue = () => {\n      if (end === Infinity) return 1;\n      const endDatumIndex = data.findIndex(({ time }) => time === end);\n      if (endDatumIndex > -1) return endDatumIndex / length;\n      // range  1value  0.5\n      if (isValue) return 0.5;\n      return 1;\n    };\n\n    return [getStartValue(), getEndValue()];\n  }\n\n  public get values() {\n    const { values, selectionType } = this.states;\n    const [start, end] = Array.isArray(values) ? values : [this.data[0].time, values];\n    if (selectionType === 'value') return end as number | Date;\n    return [start, end] as [number, number] | [Date, Date];\n  }\n\n  private getDatumByRatio(ratio: number) {\n    const { data } = this;\n    const length = data.length;\n    const index = Math.floor(ratio * (length - 1));\n    return data[index];\n  }\n\n  private get chartHandleIconShape() {\n    const { selectionType } = this.states;\n    const {\n      timelineBBox: { height },\n    } = this.space;\n    if (selectionType === 'range')\n      return (type: any) => new ChartModeHandle({ style: { type, height, iconSize: height / 6 } });\n\n    return () =>\n      new Line({ style: { x1: 0, y1: -height / 2, x2: 0, y2: height / 2, lineWidth: 2, stroke: '#c8c8c8' } });\n  }\n\n  private getChartStyle(bbox: BBox): SliderStyleProps {\n    const { x, y, width, height } = bbox;\n    const { selectionType, chartType } = this.states;\n    const { data } = this;\n    const { type, labelFormatter: userDefinedLabelFormatter } = this.attributes;\n    const { type: ignoreType, ...userDefinedChartStyle } = subStyleProps(this.attributes, 'chart');\n    const isRange = selectionType === 'range';\n    if (type === 'time') {\n      return {\n        handleIconShape: () => new TimeModeHandle({}),\n        selectionFill: '#2e7ff8',\n        selectionFillOpacity: 1,\n        showLabelOnInteraction: true,\n        handleLabelDy: isRange ? -15 : 0,\n        autoFitLabel: isRange,\n        handleSpacing: isRange ? -15 : 0,\n        trackFill: '#edeeef',\n        trackLength: width,\n        trackOpacity: 0.5,\n        trackRadius: height / 2,\n        trackSize: height / 2,\n        type: selectionType,\n        values: this.sliderValues,\n        formatter: (value) => {\n          if (userDefinedLabelFormatter) return userDefinedLabelFormatter(value);\n          const time = this.getDatumByRatio(value).time;\n          if (typeof time === 'number') return parseBySeries(time);\n          return formatTime(time, 'YYYY-MM-DD HH:mm:ss');\n        },\n        transform: `translate(${x}, ${y})`,\n        // x,\n        // y,\n        zIndex: 1,\n        ...userDefinedChartStyle,\n      };\n    }\n    // type === 'chart'\n    const handleIconOffset = selectionType === 'range' ? 5 : 0;\n    const sparklineData = data.map(({ value }) => value);\n    return {\n      handleIconOffset,\n      handleIconShape: this.chartHandleIconShape,\n      selectionFill: '#fff',\n      selectionFillOpacity: 0.5,\n      selectionType: 'invert',\n      sparklineSpacing: 0.1,\n      sparklineColumnLineWidth: 0,\n      sparklineColor: '#d4e5fd',\n      sparklineAreaOpacity: 1,\n      sparklineAreaLineWidth: 0,\n      sparklineData,\n      sparklineType: chartType,\n      sparklineScale: 0.8,\n      trackLength: width,\n      trackSize: height,\n      type: selectionType,\n      values: this.sliderValues,\n      // x,\n      // y,\n      transform: `translate(${x}, ${y})`,\n      zIndex: 1,\n      ...userDefinedChartStyle,\n    };\n  }\n\n  private renderChart(bbox: BBox = this.space.timelineBBox) {\n    this.timeline.update(this.getChartStyle(bbox));\n  }\n\n  private updateSelection() {\n    this.timeline.setValues(this.sliderValues, true);\n    this.handleSliderChange(this.sliderValues);\n  }\n\n  private getAxisStyle(bbox: BBox) {\n    const { data } = this;\n    const { interval, labelFormatter: userDefinedLabelFormatter } = this.attributes;\n    const userDefinedAxisStyle = subStyleProps(this.attributes, 'axis');\n\n    const { x, y, width } = bbox;\n    // \n    const axisData = [...data, { time: 0 }].map(({ time }, index, arr) => ({\n      label: `${time}`,\n      value: index / (arr.length - 1),\n      time,\n    }));\n    const style: Partial<LinearAxisStyleProps> = {\n      startPos: [x, y],\n      endPos: [x + width, y],\n      data: axisData,\n      // hide last label\n      labelFilter: (_datum, index) => index < axisData.length - 1,\n      labelFormatter: ({ time }) =>\n        userDefinedLabelFormatter ? userDefinedLabelFormatter(time) : labelFormatter(time, interval),\n      ...userDefinedAxisStyle,\n    };\n    return style;\n  }\n\n  private renderAxis(bbox: BBox = this.space.axisBBox) {\n    const { type } = this.attributes;\n    if (type !== 'chart') return;\n    this.axis.update(this.getAxisStyle(bbox));\n  }\n\n  private renderController(bbox: BBox = this.space.controllerBBox) {\n    const { type } = this.attributes;\n    const { state, speed, selectionType, chartType } = this.states;\n    const userDefinedControllerStyle = subStyleProps(this.attributes, 'controller');\n\n    const that = this;\n\n    const style: ControllerStyleProps = {\n      ...bbox,\n      iconSize: 20,\n      speed,\n      state,\n      selectionType,\n      chartType,\n      onChange(type, { value }) {\n        switch (type) {\n          case 'reset':\n            that.internalReset();\n            break;\n          case 'speed':\n            that.handleSpeedChange(value);\n            break;\n          case 'backward':\n            that.internalBackward();\n            break;\n          case 'playPause':\n            if (value === 'play') that.internalPlay();\n            else that.internalPause();\n            break;\n          case 'forward':\n            that.internalForward();\n            break;\n          case 'selectionType':\n            that.handleSelectionTypeChange(value);\n            break;\n          case 'chartType':\n            that.handleChartTypeChange(value);\n            break;\n          default:\n            break;\n        }\n      },\n      ...userDefinedControllerStyle,\n    };\n\n    if (type === 'time') {\n      style.functions = [['reset', 'speed'], ['backward', 'playPause', 'forward'], ['selectionType']];\n    }\n\n    this.controller.update(style);\n  }\n\n  private dispatchOnChange(prevValues?: any) {\n    const { data } = this;\n    const { onChange } = this.attributes;\n    const { values, selectionType } = this.states;\n    const [start, end] = values as any;\n    const endTime = end === Infinity ? data.at(-1)!.time : end;\n    const newValues = selectionType === 'range' ? [start, endTime] : endTime;\n\n    const isEqual = (val1: TimebarStyleProps['values'], val2: TimebarStyleProps['values']) => {\n      if (Array.isArray(val1)) {\n        if (!Array.isArray(val2)) return false;\n        if (val1[0] === val2[0]) {\n          if (val1[1] === val2[1]) return true;\n          if (val1[1] === Infinity || val2[1] === Infinity) return true;\n        }\n        return false;\n      }\n      if (Array.isArray(val2)) return false;\n      return val1 === val2;\n    };\n    // \n    if (!prevValues || !isEqual(prevValues, newValues)) {\n      onChange?.(selectionType === 'range' ? [start, endTime] : endTime);\n    }\n  }\n\n  private handleSliderChange = (values: SliderStyleProps['values']) => {\n    const prevValues: any = (() => {\n      const val = this.states.values;\n      if (Array.isArray(val)) return [...val];\n      return val;\n    })();\n\n    this.setBySliderValues(values!);\n    this.dispatchOnChange(prevValues);\n  };\n\n  private internalReset(preventEvent?: boolean) {\n    const { selectionType } = this.states;\n    this.internalPause();\n    this.setBySliderValues(selectionType === 'range' ? [0, 1] : [0, 0]);\n    this.renderController();\n    this.updateSelection();\n    if (!preventEvent) {\n      this.attributes?.onReset?.();\n      this.dispatchOnChange();\n    }\n  }\n\n  public reset() {\n    this.internalReset();\n  }\n\n  private moveSelection(direction: 'forward' | 'backward', preventEvent?: boolean) {\n    const { data } = this;\n    const length = data.length;\n    const { values, selectionType, playMode } = this.states;\n    const [startTime, endTime] = values!;\n    const startIndex = data.findIndex(({ time }) => time === startTime);\n    let endIndex = data.findIndex(({ time }) => time === endTime);\n    if (endIndex === -1) endIndex = length;\n    const diff = direction === 'backward' ? -1 : 1;\n    let currentIndexes: [number, number];\n    if (selectionType === 'range') {\n      // end \n      if (playMode === 'acc') {\n        currentIndexes = [startIndex, endIndex + diff];\n        // start  end  end  length\n        if (diff === -1 && startIndex === endIndex) {\n          currentIndexes = [startIndex, length];\n        }\n      }\n      // start, end \n      else currentIndexes = [startIndex + diff, endIndex + diff];\n    }\n    // end \n    else currentIndexes = [startIndex, endIndex + diff];\n\n    const normalizeIndexes = (indexes: [number, number]): [number, number] => {\n      // \n      const [start, end] = indexes.sort((a, b) => a - b);\n      //  index  [0, length]\n      const clampIndex = (index: number) => clamp(index, 0, length);\n      //  end \n      if (end > length) {\n        // value  0\n        if (selectionType === 'value') return [0, 0];\n        //  start\n        if (playMode === 'acc') return [clampIndex(start), clampIndex(start)];\n        // \n        return [0, clampIndex(end - start)];\n      }\n      // \n      if (start < 0) {\n        if (playMode === 'acc') return [0, clampIndex(end)];\n        return [clampIndex(start + length - end), length];\n      }\n      return [clampIndex(start), clampIndex(end)];\n    };\n\n    const normalizedIndexes = normalizeIndexes(currentIndexes);\n\n    this.setByIndex(normalizedIndexes);\n    this.updateSelection();\n    return normalizedIndexes;\n  }\n\n  private internalBackward(preventEvent?: boolean) {\n    const indexes = this.moveSelection('backward', preventEvent);\n    if (!preventEvent) {\n      this.attributes?.onBackward?.();\n      this.dispatchOnChange();\n    }\n\n    return indexes;\n  }\n\n  public backward() {\n    this.internalBackward();\n  }\n\n  private internalPlay(preventEvent?: boolean) {\n    const { data } = this;\n    const { loop } = this.attributes;\n    const { speed = 1 } = this.states;\n    this.playInterval = window.setInterval(() => {\n      const indexes = this.internalForward();\n      // \n      if (indexes[1] === data.length && !loop) {\n        // \n        this.internalPause();\n        this.renderController();\n      }\n    }, 1000 / speed);\n    this.states.state = 'play';\n    !preventEvent && this.attributes?.onPlay?.();\n  }\n\n  public play() {\n    this.internalPlay();\n  }\n\n  private internalPause(preventEvent?: boolean) {\n    clearInterval(this.playInterval);\n    this.states.state = 'pause';\n    !preventEvent && this.attributes?.onPause?.();\n  }\n\n  public pause() {\n    this.internalPause();\n  }\n\n  private internalForward(preventEvent?: boolean) {\n    const indexes = this.moveSelection('forward', preventEvent);\n    if (!preventEvent) {\n      this.attributes?.onForward?.();\n      this.dispatchOnChange();\n    }\n    return indexes;\n  }\n\n  public forward() {\n    this.internalForward();\n  }\n\n  private handleSpeedChange(value: number) {\n    this.states.speed = value;\n    const { state } = this.states;\n    if (state === 'play') {\n      //  interval\n      this.internalPause(true);\n      this.internalPlay(true);\n    }\n    this.attributes?.onSpeedChange?.(value);\n  }\n\n  private handleSelectionTypeChange(type: TimebarStyleProps['selectionType']) {\n    this.states.selectionType = type;\n    this.renderChart();\n    this.attributes?.onSelectionTypeChange?.(type);\n  }\n\n  private handleChartTypeChange(type: TimebarStyleProps['chartType']) {\n    this.states.chartType = type;\n    this.renderChart();\n    this.attributes?.onChartTypeChange?.(type);\n  }\n\n  constructor(options: TimebarOptions) {\n    super(deepAssign({}, Timebar.defaultOptions, options));\n    const { selectionType, chartType, speed, state, playMode, values } = this.attributes;\n    this.states = { chartType, playMode, selectionType, speed, state };\n    this.setByTimebarValues(values);\n  }\n\n  render() {\n    const { axisBBox, controllerBBox, timelineBBox } = this.space;\n    this.renderController(controllerBBox);\n    this.renderAxis(axisBBox);\n    this.renderChart(timelineBBox);\n\n    if (this.states.state === 'play') this.internalPlay();\n  }\n\n  destroy(): void {\n    super.destroy();\n    this.internalPause(true);\n  }\n}\n", "import { isNil } from '@antv/util';\nimport { Component } from '../../core';\nimport { Group, Text } from '../../shapes';\nimport { maybeAppend, parseSeriesAttr, select, subStyleProps } from '../../util';\nimport { Marker } from '../marker';\nimport type { TagOptions, TagStyleProps } from './types';\n\nexport type { TagStyleProps, TagOptions };\n\nfunction adjust(container: Group, paddingLeft: number, paddingTop: number, align: string, baseline: string) {\n  const bounds = container.getLocalBounds();\n\n  let x = 0;\n  let y = 0;\n  if (align === 'start') x = paddingLeft;\n  if (align === 'center') x = -bounds.halfExtents[0];\n  if (align === 'end') x = -paddingLeft - bounds.halfExtents[0] * 2;\n  if (baseline === 'top') y = paddingTop + bounds.halfExtents[1];\n  if (baseline === 'middle') y = 0;\n  if (baseline === 'bottom') y = paddingTop - bounds.halfExtents[1] * 2;\n\n  container.setLocalPosition([x, y]);\n}\n\nfunction getTextPosition(markerShape: Marker, spacing?: number) {\n  // @ts-ignore\n  const bounds = markerShape.getLocalBounds();\n\n  return {\n    x: bounds.halfExtents[0] ? bounds.max[0] + (spacing || 0) : (markerShape.style.x as number),\n    y: bounds.halfExtents[1] ? (bounds.min[1] + bounds.max[1]) / 2 : (markerShape.style.y as number),\n  };\n}\n\n/**\n *  Tag  iconfont \n *\n * Marker + Text + BackgroundRect\n */\nexport class Tag extends Component<TagStyleProps> {\n  /**\n   * \n   */\n  public static tag = 'tag';\n\n  constructor(options: TagOptions) {\n    super(options, {\n      padding: 4,\n      spacing: 4,\n    });\n  }\n\n  public render(attributes: Required<TagStyleProps>, container: Group) {\n    const { padding = 0, marker, text, radius, spacing, align, verticalAlign } = attributes;\n    const labelStyle = subStyleProps(attributes, 'label');\n    const backgroundStyle = subStyleProps(attributes, 'background');\n    const [pt, pr, pb, pl] = parseSeriesAttr(padding);\n\n    const group = maybeAppend(container, '.tag-content', 'g')\n      .attr('className', 'tag-content')\n      .style('zIndex', 0)\n      .node();\n    const markerStyle = marker || { symbol: 'triangle', size: 0 };\n    const markerShape = maybeAppend(group, '.tag-marker', () => new Marker({ style: markerStyle }))\n      .attr('className', 'tag-marker')\n      .update(markerStyle)\n      .node() as Marker;\n    const { x, y } = getTextPosition(markerShape, spacing);\n\n    select(group)\n      .maybeAppendByClassName('tag-text', () => new Text())\n      .styles({\n        fontSize: 12,\n        text: isNil(text) ? '' : `${text}`,\n        x,\n        y,\n        ...labelStyle,\n        textBaseline: 'middle',\n      })\n      .call((selection) => {\n        // text  false  textShape \n        if (!text) selection.remove();\n      });\n\n    adjust(group, pl, pt, align || 'start', verticalAlign || 'top');\n\n    const bounds = group.getLocalBounds();\n    select(container)\n      .maybeAppendByClassName('tag-background', 'rect')\n      .styles({\n        zIndex: -1,\n        y: bounds.min[1] - pt,\n        x: bounds.min[0] - pl,\n        width: backgroundStyle !== null ? pl + pr + bounds.halfExtents[0] * 2 : 0,\n        height: backgroundStyle !== null ? pt + pb + bounds.halfExtents[1] * 2 : 0,\n        radius: radius ?? 2,\n        fill: '#fafafa',\n        stroke: '#d9d9d9',\n        lineWidth: 1,\n        ...backgroundStyle,\n      });\n  }\n}\n", "/**\n * \n */\nexport const SIZE_STYLE = {\n  small: {\n    textFontSize: 10,\n    buttonWidth: 40,\n    buttonHeight: 20,\n    markerSize: 8,\n  },\n  middle: {\n    textFontSize: 12,\n    buttonWidth: 60,\n    buttonHeight: 30,\n    markerSize: 12,\n  },\n  large: {\n    textFontSize: 16,\n    buttonWidth: 80,\n    buttonHeight: 40,\n    markerSize: 16,\n  },\n};\n\n/**\n * \n */\nexport const TYPE_STYLE = {\n  primary: {\n    default: { textFill: '#fff', buttonFill: '#1890ff', buttonLineWidth: 0, markerFill: '#1890ff' },\n    active: {\n      buttonFill: '#40a9ff',\n      markerFill: '#40a9ff',\n    },\n    disabled: {},\n  },\n  dashed: {\n    default: {\n      buttonFill: 'transparent',\n      buttonStroke: '#bbb',\n      buttonLineDash: [5, 5],\n    },\n    active: {},\n    disabled: {},\n  },\n  link: {\n    default: { textFill: '#1890ff', buttonFill: 'transparent', buttonLineWidth: 0, markerFill: '#1890ff' },\n    active: {},\n    disabled: {},\n  },\n  text: {\n    default: { textFill: '#000', buttonFill: 'transparent', buttonLineWidth: 0, markerFill: '#000' },\n    active: {},\n    disabled: {},\n  },\n  default: {\n    default: { textFill: '#000', buttonFill: 'transparent', buttonStroke: '#bbb', markerFill: '#bbb' },\n    active: { textFill: '#1890ff', buttonStroke: '#1890ff', markerStroke: '#1890ff' },\n    disabled: {},\n  },\n};\n\n/**\n * disabled style\n */\nexport const DISABLED_STYLE = {\n  // \n  strict: {\n    textFill: '#b8b8b8',\n  },\n  buttonStroke: '#d9d9d9',\n  buttonFill: '#f5f5f5',\n  markerStroke: '#d9d9d9',\n};\n", "import { deepMix, isUndefined } from '@antv/util';\nimport { Component } from '../../core';\nimport { Group, RectStyleProps, Text } from '../../shapes';\nimport { maybeAppend, parseSeriesAttr, select, subStyleProps } from '../../util';\nimport { Marker } from '../marker';\nimport { DISABLED_STYLE, SIZE_STYLE, TYPE_STYLE } from './constant';\nimport type { ButtonOptions, ButtonStyleProps } from './types';\n\nexport type { ButtonStyleProps, ButtonOptions };\n\nexport class Button extends Component<ButtonStyleProps> {\n  /**\n   * \n   */\n  public static tag = 'button';\n\n  /**\n   * \n   */\n  private textShape!: Text;\n\n  private state: 'default' | 'active' | 'disabled' = 'default';\n\n  private get markerSize(): number {\n    const { markerSymbol } = this.attributes;\n    const markerStyle = this.getStyle('marker');\n    const markerSize = !markerSymbol ? 0 : markerStyle?.size || 2;\n    return markerSize;\n  }\n\n  /*  */\n  private get textAvailableWidth(): number {\n    const { markerSymbol, padding, ellipsis, width: bWidth, markerSpacing: spacing } = this.attributes;\n    if (!ellipsis) return Infinity;\n    /*  */\n    const width = (isUndefined(bWidth) ? (this.getStyle('button') as RectStyleProps).width : bWidth) as number;\n    if (markerSymbol) return width - padding! * 2 - spacing! - this.markerSize;\n    return width - padding! * 2;\n  }\n\n  private get buttonHeight(): number {\n    const { height } = this.attributes;\n    if (height) return +height;\n    return +this.getStyle('button').height;\n  }\n\n  constructor(options: ButtonOptions) {\n    super(options, {\n      cursor: 'pointer',\n      padding: 10,\n      size: 'middle',\n      type: 'default',\n      text: '',\n      state: 'default',\n      markerAlign: 'left',\n      markerSpacing: 5,\n      default: {\n        buttonLineWidth: 1,\n        buttonRadius: 5,\n      },\n      active: {},\n    });\n  }\n\n  /**\n   * sizetype\n   */\n  private getStyle(name: string) {\n    const { size, type } = this.attributes;\n    const { state } = this;\n    const mixedStyle = deepMix(\n      {},\n      SIZE_STYLE[size],\n      TYPE_STYLE[type][state],\n      this.attributes.default,\n      this.attributes[state]\n    );\n\n    if (state === 'disabled') {\n      // DISABLED_STYLEpickpick mixedStylestyle\n      Object.keys(mixedStyle).forEach((key) => {\n        if (key in DISABLED_STYLE) {\n          // @ts-ignore\n          mixedStyle[key] = DISABLED_STYLE[key];\n        }\n      });\n      Object.keys(DISABLED_STYLE.strict).forEach((key) => {\n        // @ts-ignore\n        mixedStyle[key] = DISABLED_STYLE.strict[key];\n      });\n      deepMix(mixedStyle, this.attributes.disabled || {});\n    }\n    return subStyleProps(mixedStyle, name);\n  }\n\n  // @todo  markerAlign='right' . : left marker & right marker  shape, \n  public render(attributes: Required<ButtonStyleProps>, container: Group) {\n    const { text = '', padding = 0, markerSymbol, markerSpacing = 0, x = 0, y = 0 } = attributes;\n    container.attr({\n      cursor: this.state === 'disabled' ? 'not-allowed' : 'pointer',\n    });\n    const [pt, pr, pb, pl] = parseSeriesAttr(padding);\n    const height = this.buttonHeight;\n\n    const markerStyle = this.getStyle('marker');\n\n    const { markerSize } = this;\n    const style = {\n      ...markerStyle,\n      symbol: markerSymbol,\n      x: x + pl + markerSize / 2,\n      y: y + height / 2,\n      size: markerSize,\n    };\n    const markerShape = maybeAppend(container, '.marker', () => new Marker({ className: 'marker', style }))\n      .update({ style })\n      .node() as Marker;\n\n    const bounds = markerShape.getLocalBounds();\n\n    const textStyle = this.getStyle('text');\n    this.textShape = maybeAppend(container, '.text', 'text')\n      .attr('className', 'text')\n      .styles({\n        x: x + (markerSize ? bounds.max[0] + markerSpacing : pl),\n        y: y + height / 2,\n        ...textStyle,\n        text,\n        textAlign: 'left',\n        textBaseline: 'middle',\n        wordWrap: true,\n        wordWrapWidth: this.textAvailableWidth,\n        maxLines: 1,\n        textOverflow: '...',\n      })\n      .node() as Text;\n\n    const textBounds = this.textShape.getLocalBounds();\n    const buttonStyle = this.getStyle('button') as RectStyleProps;\n\n    select(container)\n      .maybeAppendByClassName('.background', 'rect')\n      .styles({\n        zIndex: -1,\n        ...buttonStyle,\n        x,\n        y,\n        height,\n        width: pl + (markerSize ? markerSize + markerSpacing : 0) + textBounds.halfExtents[0] * 2 + pr,\n      });\n  }\n\n  /**\n   * \n   */\n  public update(attr: Partial<ButtonStyleProps> = {}) {\n    this.attr(deepMix({}, this.attributes, attr));\n    const { state } = this.attributes;\n    // \n    this.state = state;\n    this.render(this.attributes, this);\n  }\n\n  /**  ( update) */\n  public setState(state: 'disabled' | 'active' | 'default') {\n    this.update({ state });\n  }\n\n  public hide() {\n    // @ts-ignore\n    this.style.visibility = 'hidden';\n  }\n\n  public show() {\n    // @ts-ignore\n    this.style.visibility = 'visible';\n  }\n\n  private clickEvents = () => {\n    const { onClick, state } = this.attributes;\n    // \n    if (state !== 'disabled') onClick?.call(this, this);\n  };\n\n  private mouseenterEvent = () => {\n    const { state } = this.attributes;\n    if (state !== 'disabled') {\n      this.state = 'active';\n      this.render(this.attributes, this);\n    }\n  };\n\n  private mouseleaveEvent = () => {\n    const { state } = this.attributes;\n    this.state = state;\n    this.render(this.attributes, this);\n  };\n\n  public bindEvents(): void {\n    this.addEventListener('click', this.clickEvents);\n    this.addEventListener('mouseenter', this.mouseenterEvent);\n    this.addEventListener('mouseleave', this.mouseleaveEvent);\n  }\n}\n", "import { deepMix, isNil, pick } from '@antv/util';\nimport { Component } from '../../core';\nimport { Group, Text } from '../../shapes';\nimport { maybeAppend, parseSeriesAttr, subStyleProps } from '../../util';\nimport { Tag, TagStyleProps } from '../tag';\nimport type { BreadcrumbStyleProps, BreadcrumbItem, BreadcrumbOptions } from './type';\n\nexport type { BreadcrumbStyleProps as BreadcrumbCfg, BreadcrumbOptions };\n\nexport class Breadcrumb extends Component<BreadcrumbStyleProps> {\n  /**\n   * \n   */\n  public static tag = 'breadcrumb';\n\n  /**\n   * \n   */\n  private static defaultOptions = {\n    style: {\n      separator: {\n        text: '/',\n        style: {\n          fontSize: 14,\n          fill: 'rgba(0, 0, 0, 0.45)',\n        },\n        spacing: 8,\n      },\n      textStyle: {\n        default: {\n          fontSize: 14,\n          fill: 'rgba(0, 0, 0, 0.45)',\n        },\n        active: {\n          fill: '#5468ff',\n          cursor: 'pointer',\n        },\n      },\n      padding: [8, 8, 8, 8],\n    },\n  };\n\n  /**\n   *\n   * @param options\n   */\n  constructor(options: BreadcrumbOptions) {\n    super(deepMix({}, Breadcrumb.defaultOptions, options));\n  }\n\n  public render(attributes: BreadcrumbStyleProps, container: Group) {\n    const { x, y, items, textStyle, padding = 0, width, separator } = attributes;\n    const [top, right, left] = parseSeriesAttr(padding);\n\n    const tagStyle = subStyleProps<TagStyleProps>(attributes, 'tag');\n\n    const selection = maybeAppend(container, '.container', 'g').styles({\n      className: 'container',\n      x: x + left,\n      y: y + top,\n    });\n\n    let cursorX = 0;\n    let cursorY = 0;\n\n    selection.node().removeChildren();\n    for (let i = 0; i < items.length; i++) {\n      const datum = items[i];\n      const shape = new Tag({\n        className: 'breadcrumb-item',\n        style: {\n          transform: `translate(${cursorX}, ${cursorY})`,\n          ...tagStyle,\n          text: isNil(datum.text) ? datum.id : datum.text,\n          ...pick(datum, ['marker']),\n          // \n          padding: 0,\n        },\n      });\n      selection.append(() => shape);\n\n      const bounds = shape.getLocalBounds();\n      const shapeW = bounds.halfExtents[0] * 2;\n      const shapeH = bounds.halfExtents[1] * 2;\n      cursorX += shapeW;\n      // todo  \n      if (!isNil(width)) {\n        const avaliableWidth = width! - right;\n        if (cursorX > avaliableWidth) {\n          shape.attr({ transform: `translateY(${cursorY + shapeH})` });\n          // \n          cursorX = shapeW;\n          cursorY += shapeH;\n        }\n      }\n\n      // \n      this.bindInnerEvents(shape, datum);\n\n      const { spacing = 0, text = '/', style } = separator || {};\n      // \n      if (i !== items.length - 1) {\n        const shape = new Text({\n          className: `${Breadcrumb.tag}-separator`,\n          id: `${Breadcrumb.tag}-separator-${i}`,\n          style: {\n            x: cursorX + spacing!,\n            y: cursorY + shapeH / 2,\n            ...style,\n            text,\n            textAlign: 'end',\n            textBaseline: 'middle',\n          },\n        });\n        selection.append(() => shape);\n        const bounds = shape.getLocalBounds();\n        cursorX += bounds.halfExtents[0] * 2 + spacing!;\n      }\n    }\n  }\n\n  /**\n   * \n   * @param cfg\n   */\n  public update(cfg: Partial<BreadcrumbStyleProps>): void {\n    this.attr(deepMix({}, this.attributes, cfg));\n    this.render(this.attributes, this);\n  }\n\n  /**\n   * \n   * @param shape\n   * @param item\n   */\n  private bindInnerEvents(shape: Tag, item: BreadcrumbItem) {\n    const { items, onClick } = this.attributes;\n\n    if (onClick) {\n      shape.addEventListener('click', () => {\n        onClick.call(shape, item.id, item, items);\n      });\n    }\n  }\n}\n", "import { CustomEvent } from '@antv/g';\nimport { clamp } from '@antv/util';\nimport { Component } from '../../core';\nimport type { Group, RectStyleProps } from '../../shapes';\nimport { getEventPos, parseSeriesAttr, select, subStyleProps, superStyleProps } from '../../util';\nimport type { SliderStyleProps } from '../slider';\nimport { Slider } from '../slider';\nimport type { ScrollbarOptions, ScrollbarStyleProps } from './types';\n\nexport type { ScrollbarOptions, ScrollbarStyleProps };\n\nexport class Scrollbar extends Component<ScrollbarStyleProps> {\n  public static tag = 'scrollbar';\n\n  private slider!: Slider;\n\n  private range: [number, number] = [0, 1];\n\n  private get padding(): [number, number, number, number] {\n    const { padding } = this.attributes;\n    return parseSeriesAttr(padding);\n  }\n\n  constructor(options: ScrollbarOptions) {\n    super(options, {\n      x: 0,\n      y: 0,\n      isRound: true,\n      orientation: 'vertical',\n      padding: [2, 2, 2, 2],\n      scrollable: true,\n      slidable: true,\n      thumbCursor: 'default',\n      trackSize: 10,\n      value: 0,\n    });\n  }\n\n  private get value() {\n    const { value } = this.attributes;\n    const [min, max] = this.range;\n    return clamp(value, min, max);\n  }\n\n  private get trackLength() {\n    const { viewportLength, trackLength = viewportLength } = this.attributes;\n    return trackLength;\n  }\n\n  private get availableSpace() {\n    const { trackSize } = this.attributes;\n    const trackLength = this.trackLength;\n    const [top, right, bottom, left] = this.padding;\n    const [width, height] = this.getOrientVal([\n      [trackLength, trackSize],\n      [trackSize, trackLength],\n    ]);\n    return {\n      x: left,\n      y: top,\n      width: +width - (left + right),\n      height: +height - (top + bottom),\n    };\n  }\n\n  private get trackRadius() {\n    const { isRound, trackSize } = this.attributes;\n    if (!isRound) return 0;\n    return trackSize / 2;\n  }\n\n  private get thumbRadius() {\n    const { isRound, thumbRadius } = this.attributes;\n    if (!isRound) return 0;\n    const { width, height } = this.availableSpace;\n    return thumbRadius || this.getOrientVal([height, width]) / 2;\n  }\n\n  /**\n   * accord to thumbLen and value, calculate the values of slider\n   */\n  private getValues(value = this.value): [number, number] {\n    const { viewportLength, contentLength } = this.attributes;\n    const unit = viewportLength / contentLength;\n    const [min, max] = this.range;\n    const start = value * (max - min - unit);\n    return [start, start + unit];\n  }\n\n  public getValue() {\n    return this.value;\n  }\n\n  private renderSlider(container: Group) {\n    const { x, y, orientation, trackSize, padding, slidable } = this.attributes;\n    const trackStyle = subStyleProps<RectStyleProps>(this.attributes, 'track');\n    const selectionStyle = subStyleProps<RectStyleProps>(this.attributes, 'thumb');\n\n    const style: SliderStyleProps = {\n      x,\n      y,\n      brushable: false,\n      orientation,\n      padding,\n      selectionRadius: this.thumbRadius,\n      showHandle: false,\n      slidable,\n      trackLength: this.trackLength,\n      trackRadius: this.trackRadius,\n      trackSize,\n      values: this.getValues(),\n      ...superStyleProps(trackStyle, 'track'),\n      ...superStyleProps(selectionStyle, 'selection'),\n    };\n\n    this.slider = select(container)\n      .maybeAppendByClassName('scrollbar', () => new Slider({ style }))\n      .update(style)\n      .node();\n  }\n\n  public render(attributes: ScrollbarStyleProps, container: Group) {\n    this.renderSlider(container);\n  }\n\n  /**\n   * value\n   * @param value \n   */\n  public setValue(value: number, animate: boolean = false) {\n    const { value: oldValue } = this.attributes;\n    const [min, max] = this.range;\n    this.slider.setValues(this.getValues(clamp(value, min, max)), animate);\n    // valueChange\n    // todo  setValue  valuechange\n    this.onValueChange(oldValue);\n  }\n\n  /**\n   * \n   */\n  private onValueChange = (oldValue: any) => {\n    const { value: newValue } = this.attributes;\n    if (oldValue === newValue) return;\n    const evtVal = {\n      detail: {\n        oldValue,\n        value: newValue,\n      },\n    };\n    this.dispatchEvent(new CustomEvent('scroll', evtVal));\n    this.dispatchEvent(new CustomEvent('valuechange', evtVal));\n  };\n\n  public bindEvents() {\n    this.slider.addEventListener('trackClick', (e: CustomEvent) => {\n      e.stopPropagation();\n      this.onTrackClick(e.detail);\n    });\n    this.onHover();\n  }\n\n  /**\n   * orient\n   * orient\n   */\n  private getOrientVal<T>(values: [T, T]) {\n    const { orientation } = this.attributes;\n    return orientation === 'horizontal' ? values[0] : values[1];\n  }\n\n  /**\n   * \n   */\n  private onTrackClick = (e: any) => {\n    const { slidable } = this.attributes;\n    if (!slidable) return;\n    const [x, y] = this.getLocalPosition();\n    const [top, , , left] = this.padding;\n    const basePos = this.getOrientVal([(x as number) + left, (y as number) + top]);\n    const clickPos = this.getOrientVal(getEventPos(e));\n    const value = (clickPos - basePos) / this.trackLength;\n    this.setValue(value, true);\n  };\n\n  /**\n   * \n   */\n  private onHover() {\n    this.slider.addEventListener('selectionMouseenter', this.onThumbMouseenter);\n    this.slider.addEventListener('trackMouseenter', this.onTrackMouseenter);\n    this.slider.addEventListener('selectionMouseleave', this.onThumbMouseleave);\n    this.slider.addEventListener('trackMouseleave', this.onTrackMouseleave);\n  }\n\n  private onThumbMouseenter = (e: CustomEvent) => {\n    this.dispatchEvent(new CustomEvent('thumbMouseenter', { detail: e.detail }));\n  };\n\n  private onTrackMouseenter = (e: CustomEvent) => {\n    this.dispatchEvent(new CustomEvent('trackMouseenter', { detail: e.detail }));\n  };\n\n  private onThumbMouseleave = (e: CustomEvent) => {\n    this.dispatchEvent(new CustomEvent('thumbMouseleave', { detail: e.detail }));\n  };\n\n  private onTrackMouseleave = (e: CustomEvent) => {\n    this.dispatchEvent(new CustomEvent('trackMouseleave', { detail: e.detail }));\n  };\n}\n", "/**\n * \n */\nexport const SIZE_STYLE = {\n  default: {\n    sizeStyle: {\n      width: 44,\n      height: 22,\n      radius: 11,\n    },\n    tagStyle: {\n      textStyle: {\n        fontSize: 12,\n        lineHeight: 16,\n        fill: '#fff',\n      },\n      padding: 0,\n    },\n    markerStyle: {\n      size: 11,\n    },\n  },\n  small: {\n    sizeStyle: {\n      width: 28,\n      height: 16,\n      radius: 8,\n    },\n    tagStyle: {\n      textStyle: {\n        fontSize: 10,\n        lineHeight: 14,\n        fill: '#fff',\n      },\n      padding: 0,\n    },\n    markerStyle: {\n      size: 8,\n    },\n  },\n  mini: {\n    sizeStyle: {\n      width: 20,\n      height: 14,\n      radius: 7,\n    },\n    tagStyle: {\n      textStyle: {\n        fontSize: 7,\n        lineHeight: 10,\n        fill: '#fff',\n      },\n      padding: 0,\n    },\n    markerStyle: {\n      size: 7,\n    },\n  },\n};\n", "import { get, isEqual } from '@antv/util';\nimport { Component } from '../../core';\nimport type { Group, Rect } from '../../shapes';\nimport { select } from '../../util';\nimport { Tag } from '../tag';\nimport { SIZE_STYLE } from './constant';\nimport type { SwitchOptions, SwitchStyleProps } from './types';\n\nexport type { SwitchStyleProps, SwitchOptions };\n\n//  \nconst OPTION_COLOR = '#1890FF';\n//  \nconst CLOSE_COLOR = '#00000040';\n\nfunction getHandleShapeStyle(shape: Rect, spacing: number = 0, checked: boolean = true) {\n  const size = Number(shape.style.height) - spacing * 2;\n\n  return {\n    x: checked ? Number(shape.style.width) + Number(shape.style.x) - spacing - size : Number(shape.style.x) + spacing,\n    y: Number(shape.style.y) + spacing,\n    width: size,\n    height: size,\n    radius: size / 2,\n  };\n}\n\nfunction getTagShapeStyle(\n  backgroundStyle: any,\n  { width, height }: { width: number; height: number },\n  spacing: number = 0,\n  checked: boolean = true\n) {\n  return {\n    x: checked\n      ? Number(backgroundStyle.x) + spacing\n      : Number(backgroundStyle.width) + Number(backgroundStyle.x) - width,\n    y: Number(backgroundStyle.y) + (Number(backgroundStyle.height) - height) / 2,\n  };\n}\n\nexport class Switch extends Component<SwitchStyleProps> {\n  /**\n   *  switch\n   */\n  public static tag = 'switch';\n\n  /**\n   * \n   */\n  private checked!: boolean;\n\n  constructor(options: SwitchOptions) {\n    super(options, {\n      x: 0,\n      y: 0,\n      size: 'default',\n      spacing: 2,\n      checked: true,\n      disabled: false,\n    });\n  }\n\n  public render(attributes: Required<SwitchStyleProps>, container: Group) {\n    const { size, spacing, disabled, checked, unCheckedChildren, checkedChildren } = attributes;\n    const group = select(container).maybeAppendByClassName('switch-content', 'g').node();\n    const bounds = group.getLocalBounds();\n\n    const { sizeStyle, tagStyle } = get(SIZE_STYLE, size, SIZE_STYLE.default);\n\n    // \n    const cursor = disabled ? 'no-drop' : 'pointer';\n    const color = checked ? OPTION_COLOR : CLOSE_COLOR;\n\n    // \n    let backgroundStyle = sizeStyle;\n\n    // Tag , \n    const tagCfg = checked ? checkedChildren : unCheckedChildren;\n    if (checkedChildren || unCheckedChildren) {\n      select(group)\n        .maybeAppendByClassName('switch-tag', () => new Tag({}))\n        .call((selection) => {\n          const tagShape = selection.node() as Tag;\n          tagShape.update({\n            cursor,\n            backgroundStyle: null,\n            text: false,\n            marker: false,\n            ...tagStyle,\n            ...tagCfg,\n          });\n\n          //    tag  width  width  x \n          // @ts-ignore\n          const { max, min } = tagShape?.getLocalBounds() || {};\n          const width = max[0] - min[0] + sizeStyle.radius;\n          const height = max[1] - min[1];\n\n          // \n          const backgroundWidth = Math.max(width + sizeStyle.height + 2, sizeStyle.width);\n\n          backgroundStyle = {\n            ...sizeStyle,\n            width: backgroundWidth,\n          };\n\n          tagShape.update(\n            getTagShapeStyle(\n              {\n                x: bounds.min[0],\n                y: bounds.min[1],\n                width: backgroundWidth,\n                height: backgroundStyle.height,\n              },\n              { width, height },\n              backgroundStyle.radius,\n              checked\n            )\n          );\n        });\n    }\n\n    //  \n    const backgroundShape = select(group)\n      .maybeAppendByClassName('switch-background', 'rect')\n      .styles({\n        zIndex: (group.style.zIndex || 0) - 1,\n        x: bounds.min[0],\n        y: bounds.min[1],\n        fill: color,\n        cursor,\n        fillOpacity: disabled ? 0.4 : 1,\n        ...backgroundStyle,\n      })\n      .node() as Rect;\n\n    //  \n    const backgroundStrokeShape = select(group)\n      .maybeAppendByClassName('switch-background-stroke', 'rect')\n      .styles({\n        zIndex: (group.style.zIndex || 0) - 2,\n        x: bounds.min[0],\n        y: bounds.min[1],\n        stroke: color,\n        lineWidth: 0,\n        ...backgroundStyle,\n      })\n      .node() as Rect;\n\n    //  \n    select(group)\n      .maybeAppendByClassName('switch-handle', 'rect')\n      .styles({\n        fill: '#fff',\n        cursor,\n      })\n      .call((selection) => {\n        const handleShape = selection.node() as Rect;\n\n        //      x \n        const newHandleShapeStyle = getHandleShapeStyle(backgroundShape as any, spacing, checked);\n        const oldHandleShapeStyle = getHandleShapeStyle(backgroundShape as any, spacing, !checked);\n        if (handleShape.attr('x') && !isEqual(newHandleShapeStyle, oldHandleShapeStyle) && this.checked !== checked) {\n          //   tag \n          handleShape.attr(oldHandleShapeStyle);\n\n          // \n          handleShape.getAnimations()[0]?.cancel();\n          backgroundStrokeShape.getAnimations()[0]?.cancel();\n\n          //    x ->  x\n          handleShape.animate([{ x: oldHandleShapeStyle.x }, { x: newHandleShapeStyle.x }], {\n            duration: 120,\n            fill: 'both',\n          });\n\n          //    \n          backgroundStrokeShape.animate(\n            [\n              { lineWidth: 0, strokeOpacity: 0.5 },\n              { lineWidth: 14, strokeOpacity: 0 },\n            ],\n            {\n              duration: 400,\n              easing: 'ease-on',\n            }\n          );\n        } else {\n          handleShape.attr(newHandleShapeStyle);\n        }\n      });\n\n    this.checked = !!checked;\n  }\n}\n", "import { deepAssign } from '../../util';\nimport type {\n  CrosshairBaseStyleProps,\n  LineCrosshairStyleProps,\n  CircleCrosshairStyleProps,\n  PolygonCrosshairStyleProps,\n} from './types';\n\nexport const CROSSHAIR_BASE_DEFAULT_STYLE: Partial<CrosshairBaseStyleProps> = {\n  tagText: '',\n  lineStroke: '#416180',\n  lineStrokeOpacity: 0.45,\n  lineLineWidth: 1,\n  lineLineDash: [5, 5],\n};\n\nexport const LINE_CROSSHAIR_DEFAULT_STYLE: Partial<LineCrosshairStyleProps> = deepAssign(\n  {},\n  CROSSHAIR_BASE_DEFAULT_STYLE,\n  {\n    type: 'line',\n    tagPosition: 'start',\n    tagAlign: 'center',\n    tagVerticalAlign: 'bottom',\n  }\n);\n\nexport const CIRCLE_CROSSHAIR_DEFAULT_STYLE: Partial<CircleCrosshairStyleProps> = deepAssign(\n  {},\n  CROSSHAIR_BASE_DEFAULT_STYLE,\n  {\n    type: 'circle',\n    defaultRadius: 0,\n  }\n);\n\nexport const POLYGON_CROSSHAIR_DEFAULT_STYLE: Partial<PolygonCrosshairStyleProps> = deepAssign(\n  {},\n  CROSSHAIR_BASE_DEFAULT_STYLE,\n  {\n    type: 'polygon',\n    defaultRadius: 0,\n    startAngle: 0,\n  }\n);\n", "import { Component } from '../../core';\nimport { Group, Path } from '../../shapes';\nimport type { Point } from '../../types';\nimport { select, subStyleProps } from '../../util';\nimport { Tag } from '../tag';\nimport { CROSSHAIR_BASE_DEFAULT_STYLE } from './constant';\nimport type { CrosshairBaseStyleProps, CrosshairBaseOptions } from './types';\n\nexport abstract class CrosshairBase<T extends CrosshairBaseStyleProps> extends Component<T> {\n  public static tag = 'crosshair-base';\n\n  /**\n   * \n   */\n  protected pointer!: Point;\n\n  protected shapesGroup!: Group;\n\n  protected tagShape!: Tag;\n\n  protected crosshairShape!: Path;\n\n  /**\n   *  pointer \n   */\n  protected get localPointer() {\n    const [bx, by] = this.getPosition();\n    const [x, y] = this.pointer;\n    return [x - bx, y - by];\n  }\n\n  /**\n   *  crosshair  path\n   */\n  protected abstract get crosshairPath(): any[];\n\n  private get tagStyle() {\n    const style = subStyleProps(this.attributes, 'tag');\n    return style;\n  }\n\n  private get crosshairStyle() {\n    const style = subStyleProps(this.attributes, 'line');\n    return {\n      ...style,\n      d: this.crosshairPath,\n    };\n  }\n\n  constructor(options: CrosshairBaseOptions) {\n    // @ts-ignore\n    super(options, CROSSHAIR_BASE_DEFAULT_STYLE);\n  }\n\n  public render(attributes: CrosshairBaseStyleProps, container: Group) {\n    const group = select(container).maybeAppendByClassName('.crosshair-group', 'g').node();\n    this.shapesGroup = group;\n\n    const tagStyle = this.tagStyle;\n    const crosshairStyle = this.crosshairStyle;\n    this.tagShape = select(group)\n      .maybeAppendByClassName('crosshair-tag', () => new Tag({ style: tagStyle }))\n      .styles(tagStyle)\n      .node();\n    this.crosshairShape = select(group).maybeAppendByClassName('.crosshair-path', 'path').styles(crosshairStyle).node();\n\n    this.adjustLayout();\n  }\n\n  /**\n   * \n   * 1.  \n   * 2. circle  polygon  path\n   */\n  public setPointer(pointer: Point) {\n    this.pointer = pointer;\n  }\n\n  /**\n   * tag\n   */\n  protected abstract adjustLayout(): void;\n}\n", "import type { Point } from '../../types';\nimport { deepAssign, getShapeSpace, hide, show } from '../../util';\nimport { CrosshairBase } from './base';\nimport { LINE_CROSSHAIR_DEFAULT_STYLE } from './constant';\nimport type { LineCrosshairOptions, LineCrosshairStyleProps } from './types';\n\nexport type { LineCrosshairStyleProps, LineCrosshairOptions };\n\nexport class LineCrosshair extends CrosshairBase<Required<LineCrosshairStyleProps>> {\n  static tag = 'line-crosshair';\n\n  protected static defaultOptions = {\n    style: LINE_CROSSHAIR_DEFAULT_STYLE,\n  };\n\n  protected get crosshairPath() {\n    const {\n      startPos: [sx, sy],\n      endPos: [ex, ey],\n    } = this.attributes;\n    const path = [['M', 0, 0], ['L', ex - sx, ey - sy], ['Z']] as any[];\n    return path;\n  }\n\n  /**\n   *  pointer \n   */\n  protected get localPointer() {\n    if (!this.pointer) return this.attributes.startPos;\n    const [bx, by] = this.getPosition();\n    const [x, y] = this.pointer;\n    return [x - bx, y - by];\n  }\n\n  private get isVertical() {\n    const {\n      startPos: [x1, y1],\n      endPos: [x2, y2],\n    } = this.attributes;\n    return x1 === x2 && y1 !== y2;\n  }\n\n  private get tagShapeSpace() {\n    const { width, height } = getShapeSpace(this.tagShape);\n    return { width, height };\n  }\n\n  constructor(options: LineCrosshairOptions) {\n    super(deepAssign({}, LineCrosshair.defaultOptions, options));\n  }\n\n  public update(cfg: Partial<LineCrosshairStyleProps>) {\n    super.update(cfg);\n  }\n\n  /**\n   * \n   */\n  public setPointer(pointer: Point) {\n    super.setPointer(pointer);\n    this.adjustPosition();\n  }\n\n  public setText(text: string) {\n    this.tagShape.update({ text });\n    this.adjustTag();\n  }\n\n  protected adjustLayout() {\n    this.adjustPosition();\n    this.adjustTag();\n  }\n\n  /**\n   * this\n   */\n  private adjustPosition() {\n    const [lx, ly] = this.localPointer;\n    const {\n      startPos: [sx, sy],\n    } = this.attributes;\n    const targetPos = this.getOrientVal<[number, number]>([sx, ly], [lx, sy]);\n    this.shapesGroup.setLocalPosition(targetPos);\n  }\n\n  /**\n   * tag\n   */\n  private adjustTag() {\n    const {\n      tagText,\n      tagPosition,\n      startPos: [x1, y1],\n      endPos: [x2, y2],\n    } = this.attributes;\n\n    if (!tagText || tagText === '') {\n      hide(this.tagShape);\n      return;\n    }\n    show(this.tagShape);\n\n    const { width, height } = this.tagShapeSpace;\n    // \n    const [xOffset, yOffset] = this.getOrientVal(\n      {\n        start: [-width / 2, height / 2],\n        end: [x2 - x1 + width / 2, height / 2],\n      },\n      {\n        start: [0, 0],\n        end: [0, y2 - y1 + height],\n      }\n    )[tagPosition];\n    this.tagShape.setLocalPosition(xOffset, yOffset);\n  }\n\n  private getOrientVal<T>(v1: T, v2: T): T {\n    return this.isVertical ? v2 : v1;\n  }\n}\n", "import type { Point } from '../../types';\nimport { deepAssign, hide } from '../../util';\nimport { circle } from '../marker/symbol';\nimport { CrosshairBase } from './base';\nimport { CIRCLE_CROSSHAIR_DEFAULT_STYLE } from './constant';\nimport { CircleCrosshairOptions, CircleCrosshairStyleProps } from './types';\n\nexport type { CircleCrosshairStyleProps, CircleCrosshairOptions };\n\nexport class CircleCrosshair extends CrosshairBase<Required<CircleCrosshairStyleProps>> {\n  public static tag = 'circle-crosshair';\n\n  protected static defaultOptions = {\n    style: CIRCLE_CROSSHAIR_DEFAULT_STYLE,\n  };\n\n  protected get crosshairPath() {\n    return this.createCirclePath();\n  }\n\n  constructor(options: CircleCrosshairOptions) {\n    super(deepAssign({}, CircleCrosshair.defaultOptions, options));\n  }\n\n  public update(cfg: CircleCrosshairStyleProps) {\n    super.update(cfg);\n  }\n\n  public setPointer([x, y]: Point) {\n    super.setPointer([x, y]);\n    const [lx, ly] = this.localPointer;\n    const {\n      center: [cx, cy],\n    } = this.attributes;\n\n    const path = this.createCirclePath(((lx - cx) ** 2 + (ly - cy) ** 2) ** 0.5) as any;\n    this.crosshairShape.attr({ d: path });\n  }\n\n  protected adjustLayout() {\n    hide(this.tagShape);\n  }\n\n  private createCirclePath(radius?: number) {\n    const {\n      center: [x, y],\n      defaultRadius,\n    } = this.attributes;\n    return circle(x, y, radius || defaultRadius) as any[];\n  }\n}\n", "import type { Point } from '../../types';\nimport { deepAssign, hide, intersection, lineLen, rotate, scale } from '../../util';\nimport { CrosshairBase } from './base';\nimport { POLYGON_CROSSHAIR_DEFAULT_STYLE } from './constant';\nimport { PolygonCrosshairOptions, PolygonCrosshairStyleProps } from './types';\n\nexport type { PolygonCrosshairStyleProps, PolygonCrosshairOptions };\n\nexport class PolygonCrosshair extends CrosshairBase<Required<PolygonCrosshairStyleProps>> {\n  public static tag = 'polygon-crosshair';\n\n  protected static defaultOptions = {\n    style: POLYGON_CROSSHAIR_DEFAULT_STYLE,\n  };\n\n  protected get crosshairPath() {\n    return this.createPolygonPath();\n  }\n\n  constructor(options: PolygonCrosshairOptions) {\n    super(deepAssign({}, PolygonCrosshair.defaultOptions, options));\n  }\n\n  public update(cfg: Partial<PolygonCrosshairStyleProps>) {\n    super.update(cfg);\n  }\n\n  /**\n   * \n   */\n  private get points() {\n    const { startAngle, sides } = this.attributes;\n    const a = (Math.PI * 2) / sides;\n    // \n    const unit: [number, number] = [1, 0];\n    const points = [];\n    for (let i = 0; i < sides; i += 1) {\n      points.push(rotate(unit, [0, 0], (startAngle / 180) * Math.PI + a * i));\n    }\n    return points as Point[];\n  }\n\n  /**\n   * 1. point\n   * 2. point\n   * 3. \n   */\n  public setPointer([x, y]: Point) {\n    super.setPointer([x, y]);\n    const [lx, ly] = this.localPointer;\n    const { center } = this.attributes;\n    // \n    const [ix, iy] = this.intersection([lx, ly]);\n    if (!ix || !iy) return;\n    const equivalentRadius = lineLen(center, [lx, ly]) / lineLen(center, [ix, iy]);\n    const path = this.createPolygonPath(equivalentRadius) as any;\n    this.crosshairShape.attr({ d: path });\n  }\n\n  protected adjustLayout() {\n    hide(this.tagShape);\n  }\n\n  private createPolygonPath(radius?: number) {\n    const {\n      defaultRadius,\n      center: [cx, cy],\n    } = this.attributes;\n    const path = this.points.map(([x, y], index) => {\n      const [tx, ty] = scale([x, y], radius || defaultRadius);\n      return [index === 0 ? 'M' : 'L', cx + tx, cy + ty];\n    });\n    path.push(['Z']);\n    return path as any[];\n  }\n\n  /**\n   * \n   */\n  private intersection([x, y]: Point) {\n    const { points } = this;\n    const {\n      center: [cx, cy],\n    } = this.attributes;\n    let ix: number;\n    let iy: number;\n    // \n    for (let i = 1; i <= points.length; i += 1) {\n      const [sx, sy] = points[i - 1];\n      const [ex, ey] = points[i % points.length];\n      const inter = intersection([x, y], [cx, cy], [sx + cx, sy + cy], [ex + cx, ey + cy]);\n      if (inter.length !== 0) {\n        // \n        [ix, iy] = inter as Point;\n      }\n    }\n    return [ix!, iy!];\n  }\n}\n", "import { RectStyleProps } from '../../shapes';\n\nimport { superStyleProps } from '../../util';\n\n// \nexport const LABEL_TEXT_STYLE = superStyleProps(\n  {\n    fill: 'rgba(0,0,0,0.45)',\n    fontSize: 10,\n    textAlign: 'start',\n    textBaseline: 'middle',\n    overflow: 'clip',\n  } as const,\n  'label'\n);\n\nexport const CHECKBOX_RECT_STYLE = {\n  default: {\n    width: 12,\n    height: 12,\n    radius: 2,\n    stroke: '#dadada',\n    lineWidth: 1,\n    fill: '#ffffff',\n    cursor: 'pointer',\n  } as RectStyleProps,\n  selected: {\n    width: 12,\n    height: 12,\n    radius: 2,\n    stroke: '#3471F9',\n    lineWidth: 1,\n    fill: '#3471F9',\n    cursor: 'pointer',\n  } as RectStyleProps,\n};\n\nconst CHECKED_SHAPE_PATH = [\n  ['M', 3, 6],\n  ['L', '5', '8.5'],\n  ['L', '8.5', '4'],\n] as any;\n\nexport const CHECKED_SHAPE_STYLE = {\n  d: CHECKED_SHAPE_PATH,\n  lineWidth: 1,\n  cursor: 'pointer',\n};\n", "import { Component } from '../../core';\nimport type { Group, Rect } from '../../shapes';\nimport { maybeAppend, subStyleProps } from '../../util';\nimport type { CheckboxOptions, CheckboxStyleProps } from './types';\n\nimport { CHECKBOX_RECT_STYLE, CHECKED_SHAPE_STYLE, LABEL_TEXT_STYLE } from './constant';\n\nexport type { CheckboxStyleProps, CheckboxOptions };\n\nfunction getLablePosition(shape: Rect, spacing?: number) {\n  const bounds = shape.getLocalBounds();\n\n  return {\n    x: bounds.halfExtents[0] ? bounds.max[0] + (spacing || 0) : (shape.style.x as number),\n    y: bounds.halfExtents[1] ? (bounds.min[1] + bounds.max[1]) / 2 : (shape.style.y as number),\n  };\n}\n\nexport class Checkbox extends Component<CheckboxStyleProps> {\n  /**\n   *  checkbox\n   */\n  public static tag = 'checkbox';\n\n  /**  checkbox  */\n  private checkboxBoxShape!: Rect;\n\n  /**  */\n  private checked!: boolean;\n\n  constructor(options: CheckboxOptions) {\n    super(options, {\n      labelText: '',\n      spacing: 4,\n      checked: false,\n      ...LABEL_TEXT_STYLE,\n    });\n  }\n\n  public render(attributes: Required<CheckboxStyleProps>, container: Group) {\n    const { checked, spacing } = attributes;\n    this.checked = !!checked;\n    const group = maybeAppend(container, '.checkbox-content', 'g').attr('className', 'checkbox-content').node();\n    const boxStyle = subStyleProps(attributes, 'box');\n    const checkedStyle = subStyleProps(attributes, 'checked');\n    const labelStyle = subStyleProps(attributes, 'label');\n    const checkboxStyle = {\n      ...(this.checked ? CHECKBOX_RECT_STYLE.selected : CHECKBOX_RECT_STYLE.default),\n      ...boxStyle,\n    };\n    const checkboxBoxCheckedStyle = { ...CHECKED_SHAPE_STYLE, ...checkedStyle };\n\n    this.checkboxBoxShape = maybeAppend(group, '.checkbox-box', 'rect')\n      .styles({\n        className: 'checkbox-box',\n        zIndex: (group.style.zIndex || 0) - 1,\n        ...checkboxStyle,\n      })\n      .node();\n\n    maybeAppend(this.checkboxBoxShape, '.checkbox-checked', 'path').styles({\n      className: 'checkbox-box-checked',\n      stroke: '#fff',\n      ...checkboxBoxCheckedStyle,\n    });\n\n    const { x, y } = getLablePosition(this.checkboxBoxShape, Number(spacing));\n\n    maybeAppend(group, '.checkbox-label', 'text').styles({\n      className: 'checkbox-label',\n      x,\n      y,\n      ...labelStyle,\n    });\n  }\n}\n", "import type { FederatedEvent, INode } from '@antv/g';\nimport { ElementEvent } from '@antv/g';\nimport type { DisplayObject } from '../../shapes';\nimport { Group } from '../../shapes';\nimport { BBox } from '../../util';\nimport { calcLayout } from '../../util/layout';\nimport type { SeriesAttr, StandardSeriesAttr } from '../../util/series';\nimport { parseSeriesAttr } from '../../util/series';\nimport type { LayoutOptions, LayoutStyleProps } from './types';\n\nexport type { LayoutOptions, LayoutStyleProps };\n\nexport class Layout extends Group {\n  private layoutEvents: ElementEvent[] = [ElementEvent.BOUNDS_CHANGED, ElementEvent.INSERTED, ElementEvent.REMOVED];\n\n  private $margin: StandardSeriesAttr = parseSeriesAttr(0);\n\n  private $padding: StandardSeriesAttr = parseSeriesAttr(0);\n\n  public set margin(value: SeriesAttr) {\n    this.$margin = parseSeriesAttr(value);\n  }\n\n  public get margin() {\n    return this.$margin;\n  }\n\n  public set padding(value: SeriesAttr) {\n    this.$padding = parseSeriesAttr(value);\n  }\n\n  public get padding() {\n    return this.$padding;\n  }\n\n  public getBBox() {\n    const { x = 0, y = 0, width, height } = this.attributes;\n    const [marginTop, marginRight, marginBottom, marginLeft] = this.$margin;\n    return new BBox(x - marginLeft, y - marginTop, width + marginLeft + marginRight, height + marginTop + marginBottom);\n  }\n\n  public appendChild<T extends INode>(child: T, index?: number): T {\n    (child as unknown as DisplayObject).isMutationObserved = true;\n    super.appendChild(child, index);\n    return child;\n  }\n\n  public getAvailableSpace() {\n    const { width, height } = this.attributes;\n    const [paddingTop, paddingRight, paddingBottom, paddingLeft] = this.$padding;\n    const [marginTop, , , marginLeft] = this.$margin;\n    return new BBox(\n      paddingLeft + marginLeft,\n      paddingTop + marginTop,\n      width - paddingLeft - paddingRight,\n      height - paddingTop - paddingBottom\n    );\n  }\n\n  constructor(options: LayoutOptions) {\n    super(options);\n    const { margin = 0, padding = 0 } = options.style || {};\n    this.margin = margin;\n    this.padding = padding;\n\n    this.isMutationObserved = true;\n    this.bindEvents();\n  }\n\n  layout() {\n    if (!this.attributes.display || !this.isConnected) return;\n    if (this.children.some((child) => !child.isConnected)) return;\n    try {\n      const { x, y } = this.attributes;\n      this.style.transform = `translate(${x}, ${y})`;\n\n      const bboxes = calcLayout(\n        this.getAvailableSpace(),\n        this.children.map((child) => (child as DisplayObject).getBBox()),\n        this.attributes\n      );\n\n      this.children.forEach((child, index) => {\n        const { x, y } = bboxes[index];\n        child.style.transform = `translate(${x}, ${y})`;\n      });\n    } catch (e) {\n      // do nothing\n    }\n  }\n\n  bindEvents() {\n    this.layoutEvents.forEach((event) => {\n      this.addEventListener(event, (e: FederatedEvent) => {\n        if (!e.target) return;\n        (e.target as DisplayObject).isMutationObserved = true;\n        this.layout();\n      });\n    });\n  }\n\n  attributeChangedCallback(name: string, oldValue: any, newValue: any) {\n    if (name === 'margin') this.margin = newValue;\n    else if (name === 'padding') this.padding = newValue;\n    this.layout();\n  }\n}\n", "import type {\n  DisplayObject,\n  FederatedPointerEvent,\n  IDocument,\n  RenderingPlugin,\n  RenderingPluginContext,\n} from '@antv/g-lite';\nimport { distanceSquareRoot } from '@antv/util';\nimport type { DragndropPluginOptions } from './interfaces';\n\nexport class DragndropPlugin implements RenderingPlugin {\n  static tag = 'Dragndrop';\n\n  constructor(public dragndropPluginOptions: DragndropPluginOptions) {}\n\n  apply(context: RenderingPluginContext) {\n    const { renderingService, renderingContext } = context;\n    const document = renderingContext.root.ownerDocument;\n\n    // TODO: should we add an option like `draggable` to Canvas\n    const canvas = document.defaultView;\n\n    const handlePointerdown = (event: FederatedPointerEvent) => {\n      const target = event.target as DisplayObject;\n      const isDocument = (target as unknown as IDocument) === document;\n\n      const draggableEventTarget =\n        isDocument && this.dragndropPluginOptions.isDocumentDraggable\n          ? document\n          : target.closest && target.closest('[draggable=true]');\n\n      // `draggable` may be set on ancestor nodes:\n      // @see https://github.com/antvis/G/issues/1088\n      if (draggableEventTarget) {\n        // delay triggering dragstart event\n        let dragstartTriggered = false;\n        const dragstartTimeStamp = event.timeStamp;\n        const dragstartClientCoordinates: [number, number] = [\n          event.clientX,\n          event.clientY,\n        ];\n\n        let currentDroppable = null;\n        let lastDragClientCoordinates = [event.clientX, event.clientY];\n        // @ts-ignore\n        // eslint-disable-next-line no-inner-declarations\n        const handlePointermove = async (event: FederatedPointerEvent) => {\n          if (!dragstartTriggered) {\n            const timeElapsed = event.timeStamp - dragstartTimeStamp;\n            const distanceMoved = distanceSquareRoot(\n              [event.clientX, event.clientY],\n              dragstartClientCoordinates,\n            );\n            // check thresholds\n            if (\n              timeElapsed <=\n                this.dragndropPluginOptions.dragstartTimeThreshold ||\n              distanceMoved <=\n                this.dragndropPluginOptions.dragstartDistanceThreshold\n            ) {\n              return;\n            }\n\n            // @see https://developer.mozilla.org/zh-CN/docs/Web/API/Document/dragstart_event\n            event.type = 'dragstart';\n\n            draggableEventTarget.dispatchEvent(event);\n            dragstartTriggered = true;\n          }\n\n          // @see https://developer.mozilla.org/zh-CN/docs/Web/API/Document/drag_event\n          event.type = 'drag';\n          // @ts-ignore\n          event.dx = event.clientX - lastDragClientCoordinates[0];\n          // @ts-ignore\n          event.dy = event.clientY - lastDragClientCoordinates[1];\n          draggableEventTarget.dispatchEvent(event);\n          lastDragClientCoordinates = [event.clientX, event.clientY];\n\n          if (!isDocument) {\n            const point =\n              this.dragndropPluginOptions.overlap === 'pointer'\n                ? [event.canvasX, event.canvasY]\n                : target.getBounds().center;\n            const elementsBelow = await document.elementsFromPoint(\n              point[0],\n              point[1],\n            );\n\n            // prevent from picking the dragging element\n            const elementBelow =\n              elementsBelow[elementsBelow.indexOf(target) + 1];\n\n            const droppableBelow =\n              elementBelow?.closest('[droppable=true]') ||\n              (this.dragndropPluginOptions.isDocumentDroppable\n                ? document\n                : null);\n            if (currentDroppable !== droppableBelow) {\n              if (currentDroppable) {\n                // null when we were not over a droppable before this event\n                // @see https://developer.mozilla.org/zh-CN/docs/Web/API/Document/dragleave_event\n                event.type = 'dragleave';\n                event.target = currentDroppable;\n                currentDroppable.dispatchEvent(event);\n              }\n\n              if (droppableBelow) {\n                // @see https://developer.mozilla.org/zh-CN/docs/Web/API/Document/dragleave_event\n                event.type = 'dragenter';\n                event.target = droppableBelow;\n                droppableBelow.dispatchEvent(event);\n              }\n\n              currentDroppable = droppableBelow;\n              if (currentDroppable) {\n                // null if we're not coming over a droppable now\n                // @see https://developer.mozilla.org/zh-CN/docs/Web/API/Document/dragover_event\n                event.type = 'dragover';\n                event.target = currentDroppable;\n                currentDroppable.dispatchEvent(event);\n              }\n            }\n          }\n        };\n\n        canvas.addEventListener('pointermove', handlePointermove);\n\n        const stopDragging = function (\n          originalPointerUpEvent: FederatedPointerEvent,\n        ) {\n          if (dragstartTriggered) {\n            // prevent click event being triggerd\n            // @see https://github.com/antvis/G/issues/1091\n            originalPointerUpEvent.detail = {\n              preventClick: true,\n            };\n\n            // clone event first\n            const event = originalPointerUpEvent.clone();\n\n            // drop should fire before dragend\n            // @see https://javascript.tutorialink.com/is-there-a-defined-ordering-between-dragend-and-drop-events/\n\n            if (currentDroppable) {\n              // @see https://developer.mozilla.org/zh-CN/docs/Web/API/Document/drop_event\n              event.type = 'drop';\n              event.target = currentDroppable;\n              currentDroppable.dispatchEvent(event);\n            }\n\n            // @see https://developer.mozilla.org/zh-CN/docs/Web/API/Document/dragend_event\n            event.type = 'dragend';\n            draggableEventTarget.dispatchEvent(event);\n\n            dragstartTriggered = false;\n          }\n\n          canvas.removeEventListener('pointermove', handlePointermove);\n        };\n\n        target.addEventListener('pointerup', stopDragging, { once: true });\n        target.addEventListener('pointerupoutside', stopDragging, {\n          once: true,\n        });\n      }\n    };\n\n    renderingService.hooks.init.tap(DragndropPlugin.tag, () => {\n      canvas.addEventListener('pointerdown', handlePointerdown);\n    });\n\n    renderingService.hooks.destroy.tap(DragndropPlugin.tag, () => {\n      canvas.removeEventListener('pointerdown', handlePointerdown);\n    });\n  }\n}\n", "import { AbstractRendererPlugin } from '@antv/g-lite';\nimport { DragndropPlugin } from './DragndropPlugin';\nimport type { DragndropPluginOptions } from './interfaces';\n\nexport class Plugin extends AbstractRendererPlugin {\n  name = 'dragndrop';\n\n  constructor(private options: Partial<DragndropPluginOptions> = {}) {\n    super();\n  }\n\n  init(): void {\n    this.addRenderingPlugin(\n      new DragndropPlugin({\n        overlap: 'pointer',\n        isDocumentDraggable: false,\n        isDocumentDroppable: false,\n        dragstartDistanceThreshold: 0,\n        dragstartTimeThreshold: 0,\n        ...this.options,\n      }),\n    );\n  }\n  destroy(): void {\n    this.removeAllRenderingPlugins();\n  }\n  setOptions(options: Partial<DragndropPluginOptions>): void {\n    Object.assign(\n      (this.plugins[0] as DragndropPlugin).dragndropPluginOptions,\n      options,\n    );\n  }\n}\n"],
  "mappings": "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AU;AAAA,QAAK,KAAU;AAAA,QAAK,KAAU;AAAA,QACxD,KAAU;AAAA,QAAM,KAAU;AAAA,QAAK,KAAU;AAAA,QAAK,KAAU;AAAA,QAAK,KAAU;AAAA,QACvE,KAAU;AAAA,QAAM,KAAU;AAAA,QAAK,KAAU;AAAA,QAAK,KAAU;AAAA,QAAK,KAAU;AAAA,QACvE,KAAU;AAAA,QAAM,KAAU;AAAA,QAC1B,KAAU;AAAA,QAAM,KAAU;AAAA,QAAK,KAAU;AAAA,QACzC,KAAU;AAAA,QAAM,KAAU;AAAA,QAAK,KAAU;AAAA,QAAK,KAAU;AAAA,QAAK,KAAU;AAAA,QACvE,KAAU;AAAA,QAAM,KAAU;AAAA,QAAK,KAAU;AAAA,QAAK,KAAU;AAAA,QAAK,KAAU;AAAA,QACvE,KAAU;AAAA,QAAM,KAAU;AAAA,QAAK,KAAU;AAAA,QAAK,KAAU;AAAA,QACxD,KAAU;AAAA,QAAM,KAAU;AAAA,QAAK,KAAU;AAAA,QAAK,KAAU;AAAA,QACxD,KAAU;AAAA,QAAM,KAAU;AAAA,QAAK,KAAU;AAAA,QACzC,KAAU;AAAA,QAAM,KAAU;AAAA,QAAK,KAAU;AAAA,QACzC,KAAU;AAAA,QAAM,KAAU;AAAA,QAAK,KAAU;AAAA,QACzC,KAAU;AAAA,QAAM,KAAU;AAAA,QAAK,KAAU;AAAA,QACzC,KAAU;AAAA,QAAM,KAAU;AAAA,QAAK,KAAU;AAAA,QAAK,KAAU;AAAA,QACxD,KAAU;AAAA,QAAM,KAAU;AAAA,QAAK,KAAU;AAAA,QAAK,KAAU;AAAA,QACxD,KAAU;AAAA,QAAM,KAAU;AAAA,QAAK,KAAU;AAAA,QACzC,KAAU;AAAA,QAAM,KAAU;AAAA,QAAK,KAAU;AAAA,QACzC,KAAU;AAAA,QAAM,KAAU;AAAA,QAAK,KAAU;AAAA,QAAK,KAAU;AAAA,QAAK,KAAU;AAAA,QAAK,KAAU;AAAA,QACtF,KAAU;AAAA,QAAM,KAAU;AAAA,QAAK,KAAU;AAAA,QAAK,KAAU;AAAA,QAAK,KAAU;AAAA,QAAK,KAAU;AAAA,QACtF,KAAU;AAAA,QAAM,KAAU;AAAA,QAC1B,KAAU;AAAA,QAAM,KAAU;AAAA,QAAK,KAAU;AAAA,QA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",
  "names": ["undefined", "root", "index", "length", "collection", "data", "map", "transform", "set", "runInContext", "_", "Array", "Date", "Error", "Function", "Math", "Object", "RegExp", "String", "TypeError", "objectProto", "hasOwnProperty", "Symbol", "splice", "Map", "Promise", "Set", "WeakMap", "isObjectLike", "isArray", "result", "iteratee", "size", "values", "isType", "keys", "number", "key", "setTimeout", "includes", "isFunction", "object", "last", "identity", "isPrototype", "isArrayLike", "isPlainObject", "indexOf", "step", "toString", "clearTimeout", "id", "getData", "ary", "othValue", "flatten", "memoize", "difference", "head", "intersection", "sortedIndex", "uniq", "group", "parent", "clone", "filter", "find", "forEach", "groupBy", "isString", "reduce", "negate", "debounce", "isBoolean", "isDate", "isElement", "isEmpty", "isEqual", "isFinite", "isInteger", "isMatch", "isNaN", "isNumber", "isNull", "isNil", "isUndefined", "assign", "create", "invert", "omit", "update", "clamp", "inRange", "random", "word", "upperFirst", "lowerFirst", "pad", "parseInt", "startsWith", "interpolate", "chain", "uniqueId", "add", "ceil", "divide", "floor", "max", "min", "multiply", "round", "subtract", "value", "EventEmitter", "len", "length", "hex", "s", "expected", "found", "data", "cmds", "c", "x", "y", "a", "location", "error", "text", "code", "attr", "a", "index", "data", "item", "a", "min", "max", "str", "str", "max", "dist", "toString", "hasOwnProperty", "len", "hasOwnProperty", "keys", "data", "keys", "length", "a", "length", "max", "splice", "len", "a", "max", "min", "m", "str", "dist", "indexOf", "m", "index", "default_1", "str", "color", "s", "a", "clone", "identity", "a", "clone", "identity", "x", "y", "rad", "s", "c", "x2", "y2", "scale", "a2", "add", "adjoint", "clone", "copy", "create", "determinant", "equals", "exactEquals", "frob", "fromQuat", "fromRotation", "fromScaling", "fromTranslation", "fromValues", "identity", "invert", "mul", "multiply", "multiplyScalar", "multiplyScalarAndAdd", "rotate", "scale", "set", "str", "sub", "subtract", "translate", "transpose", "create", "clone", "a", "copy", "fromValues", "set", "identity", "transpose", "invert", "adjoint", "determinant", "multiply", "translate", "x", "y", "scale", "rotate", "rad", "len", "s", "c", "fromTranslation", "fromScaling", "fromRotation", "x2", "y2", "fromQuat", "str", "frob", "add", "subtract", "multiplyScalar", "multiplyScalarAndAdd", "exactEquals", "equals", "a2", "mul", "sub", "add", "clone", "copy", "create", "dot", "equals", "exactEquals", "fromValues", "identity", "invert", "len", "length", "lerp", "mul", "multiply", "normalize", "random", "rotateX", "rotateY", "rotateZ", "scale", "set", "slerp", "sqrLen", "squaredLength", "str", "add", "clone", "copy", "create", "equals", "exactEquals", "fromValues", "max", "mul", "multiply", "rotateX", "rotateY", "rotateZ", "round", "scale", "set", "str", "sub", "subtract", "create", "clone", "a", "x", "y", "fromValues", "copy", "set", "add", "subtract", "multiply", "max", "round", "scale", "len", "angle", "c", "d", "m", "rotateX", "rad", "rotateY", "rotateZ", "str", "exactEquals", "equals", "a2", "sub", "mul", "add", "ceil", "clone", "copy", "create", "cross", "dist", "distance", "div", "divide", "dot", "equals", "exactEquals", "floor", "forEach", "fromValues", "inverse", "len", "length", "lerp", "max", "min", "mul", "multiply", "negate", "normalize", "random", "round", "scale", "scaleAndAdd", "set", "sqrDist", "sqrLen", "squaredDistance", "squaredLength", "str", "sub", "subtract", "transformMat4", "transformQuat", "zero", "create", "clone", "a", "fromValues", "x", "y", "copy", "set", "add", "subtract", "multiply", "divide", "ceil", "floor", "min", "max", "round", "scale", "scaleAndAdd", "distance", "squaredDistance", "length", "squaredLength", "negate", "inverse", "normalize", "len", "dot", "cross", "A", "B", "C", "lerp", "random", "d", "transformMat4", "m", "transformQuat", "zero", "str", "exactEquals", "equals", "a2", "sub", "mul", "div", "dist", "sqrDist", "sqrLen", "forEach", "create", "identity", "rad", "s", "a", "dot", "multiply", "rotateX", "rotateY", "rotateZ", "x", "y", "scale", "slerp", "random", "invert", "a2", "m", "str", "clone", "fromValues", "copy", "set", "add", "mul", "lerp", "length", "len", "squaredLength", "sqrLen", "normalize", "exactEquals", "equals", "c", "d", "add", "angle", "ceil", "clone", "copy", "create", "cross", "dist", "distance", "div", "divide", "dot", "equals", "exactEquals", "floor", "forEach", "fromValues", "inverse", "len", "length", "lerp", "max", "min", "mul", "multiply", "negate", "normalize", "random", "rotate", "round", "scale", "scaleAndAdd", "set", "sqrDist", "sqrLen", "squaredDistance", "squaredLength", "str", "sub", "subtract", "transformMat3", "transformMat4", "zero", "create", "clone", "a", "fromValues", "x", "y", "copy", "set", "add", "subtract", "multiply", "divide", "ceil", "floor", "min", "max", "round", "scale", "scaleAndAdd", "distance", "squaredDistance", "length", "squaredLength", "negate", "inverse", "normalize", "len", "dot", "cross", "lerp", "random", "m", "transformMat3", "transformMat4", "rotate", "rad", "angle", "zero", "str", "exactEquals", "equals", "sub", "mul", "div", "dist", "sqrDist", "sqrLen", "forEach", "_a", "x", "_a", "data", "index", "max", "index", "max", "max", "index", "PathParser", "x", "y", "_a", "x", "y", "rad", "angle", "x2", "y2", "rad", "x", "y", "x2", "y2", "a", "x2", "y2", "x", "y", "px", "x", "x", "y", "a", "x2", "y2", "distance", "length", "point", "_a", "x", "y", "angle", "x", "y", "point", "distance", "length", "_a", "x2", "y2", "distance", "length", "x", "y", "_a", "x2", "y2", "distance", "length", "x", "y", "_a", "distance", "data", "x", "y", "length", "min", "max", "point", "_a", "a", "s", "x2", "y2", "x", "y", "len", "_a", "a", "distance", "x", "a", "_a", "y", "EventEmitter", "t", "distance", "x1", "y1", "x2", "y2", "dx", "dy", "Math", "sqrt", "getBBoxByArray", "xArr", "yArr", "minX", "min", "apply", "_toConsumableArray", "minY", "maxX", "max", "maxY", "x", "y", "width", "height", "xExtrema", "rx", "ry", "xRotation", "Math", "atan", "tan", "yExtrema", "xAt", "cx", "cy", "angle", "cos", "sin", "yAt", "box", "cx", "cy", "rx", "ry", "xRotation", "startAngle", "endAngle", "xDim", "xExtrema", "minX", "Infinity", "maxX", "xs", "i", "Math", "PI", "xAngle", "push", "length", "x", "xAt", "yDim", "yExtrema", "minY", "maxY", "ys", "yAngle", "y", "yAt", "width", "height", "EPSILON", "nearestPoint", "xArr", "yArr", "x", "y", "tCallback", "length", "t", "d", "Infinity", "v0", "segNum", "increaseRate", "interval", "i", "_t", "v1", "apply", "_toConsumableArray", "concat", "d1", "distance", "count", "prev", "next", "v2", "d2", "length", "x1", "y1", "x2", "y2", "distance", "pointAt", "t", "x", "y", "pointToLine", "x1", "y1", "x2", "y2", "x", "y", "d", "vec2", "exactEquals", "Math", "sqrt", "u", "normalize", "a", "abs", "dot", "cubicAt", "p0", "p1", "p2", "p3", "t", "onet", "extrema", "p0", "p1", "p2", "p3", "a", "b", "c", "extremas", "t1", "t2", "discSqrt", "isNumberEqual", "push", "disc", "Math", "sqrt", "box", "x1", "y1", "x2", "y2", "x3", "y3", "x4", "y4", "xArr", "yArr", "xExtrema", "extrema", "yExtrema", "i", "length", "push", "cubicAt", "getBBoxByArray", "nearestPoint", "x1", "y1", "x2", "y2", "x3", "y3", "x4", "y4", "x0", "y0", "length", "bezierNearestPoint", "cubicAt", "pointDistance", "point", "distance", "x", "y", "lengthOfSegment", "points", "length", "totalLength", "i", "from", "to", "distance", "length", "points", "lengthOfSegment", "quadraticAt", "p0", "p1", "p2", "t", "onet", "extrema", "a", "isNumberEqual", "rst", "box", "x1", "y1", "x2", "y2", "x3", "y3", "xExtrema", "extrema", "yExtrema", "xArr", "yArr", "undefined", "push", "quadraticAt", "getBBoxByArray", "nearestPoint", "x1", "y1", "x2", "y2", "x3", "y3", "x0", "y0", "nearestPointBezier", "quadraticAt", "pointDistance", "point", "distance", "x", "y", "global", "this", "m", "s", "tmp", "a", "RBush", "search", "contains", "data", "index", "extend", "Shape", "ClipSpaceNearZ", "AbstractRendererPlugin", "_classCallCheck", "plugins", "_createClass", "key", "value", "addRenderingPlugin", "plugin", "push", "context", "renderingPlugins", "removeAllRenderingPlugins", "_this", "forEach", "indexOf", "splice", "AbstractRenderer", "config", "clipSpaceNearZ", "NEGATIVE_ONE", "_objectSpread", "enableDirtyCheck", "enableCulling", "enableAutoRendering", "enableDirtyRectangleRendering", "enableDirtyRectangleRenderingDebug", "enableSizeAttenuation", "enableRenderingOptimization", "registerPlugin", "findIndex", "p", "unregisterPlugin", "getPlugins", "getPlugin", "name", "find", "getConfig", "setConfig", "Object", "assign", "addVec3", "vec3", "add", "copyVec3", "copy", "maxVec3", "max", "minVec3", "min", "scaleVec3", "scale", "subVec3", "sub", "AABB", "center", "halfExtents", "update", "setMinMax", "getMin", "getMax", "aabb", "isEmpty", "tc", "tcx", "tcy", "tcz", "th", "thx", "thy", "thz", "tminx", "tmaxx", "tminy", "tmaxy", "tminz", "tmaxz", "oc", "ocx", "ocy", "ocz", "oh", "ohx", "ohy", "ohz", "ominx", "omaxx", "ominy", "omaxy", "ominz", "omaxz", "setFromTransformedAABB", "bc", "br", "ac", "ar", "mx0", "mx1", "mx2", "my0", "my1", "my2", "mz0", "mz1", "mz2", "mx0a", "Math", "abs", "mx1a", "mx2a", "my0a", "my1a", "my2a", "mz0a", "mz1a", "mz2a", "intersects", "aMax", "aMin", "bMax", "bMin", "intersection", "getNegativeFarPoint", "plane", "pnVertexFlag", "getPositiveFarPoint", "Plane", "distance", "normal", "fromValues", "updatePNVertexFlag", "Number", "distanceToPoint", "point", "dot", "normalize", "invLen", "len", "intersectsLine", "start", "end", "d0", "d1", "t", "lerp", "Mask", "Frustum", "planes", "i", "extractFromVPMatrix", "projectionMatrix", "_projectionMatrix", "_slicedToArray", "m0", "m1", "m2", "m3", "m4", "m5", "m6", "m7", "m8", "m9", "m10", "m11", "m12", "m13", "m14", "m15", "set", "Point", "x", "arguments", "length", "undefined", "y", "clone", "copyFrom", "Rectangle", "width", "height", "left", "right", "top", "bottom", "toJSON", "fromRect", "rect", "applyTransform", "matrix", "topLeft", "vec4", "topRight", "bottomLeft", "bottomRight", "transformedTopLeft", "create", "transformedTopRight", "transformedBottomLeft", "transformedBottomRight", "transformMat4", "minX", "minY", "maxX", "maxY", "ERROR_MSG_METHOD_NOT_IMPLEMENTED", "ERROR_MSG_USE_DOCUMENT_ELEMENT", "ERROR_MSG_APPEND_DESTROYED_ELEMENT", "getAngle", "angle", "$vec3", "createVec3", "z", "Array", "isArray", "isNumber", "DEG_RAD", "PI", "deg2rad", "deg", "RAD_DEG", "rad2deg", "rad", "turn2deg", "turn", "HALF_PI", "Math", "PI", "getEulerFromQuat", "out", "quat", "x", "y", "z", "w", "x2", "y2", "z2", "w2", "unit", "test", "atan2", "asin", "getEulerFromMat4", "m", "_mat4$getScaling", "mat4", "getScaling", "vec3", "create", "_mat4$getScaling2", "_slicedToArray", "sx", "sy", "sz", "getEuler", "length", "fromRotationTranslationScale", "rotation", "scaleX", "scaleY", "cos", "sin", "mat3", "fromValues", "makePerspective", "left", "right", "top", "bottom", "near", "far", "zero", "arguments", "undefined", "twoNear", "rightMinusLeft", "topMinusBottom", "a", "b", "c", "d", "farMinusNear", "farMulNear", "decompose", "mat", "row0x", "row0y", "row1x", "row1y", "scalingX", "sqrt", "scalingY", "determinant", "invScalingX", "invScalingY", "angle", "rad2deg", "tmp", "perspectiveMatrix", "tmpVec4", "vec4", "row", "pdum3", "decomposeMat4", "matrix", "translation", "scale", "skew", "perspective", "quaternion", "normalize", "copy", "abs", "a03", "a13", "a23", "a30", "a31", "a32", "a33", "ret", "invert", "transpose", "transformMat4", "mat3from4", "dot", "combine", "cross", "i", "max", "m44", "mat4x4", "scale1", "scale2", "CameraType", "CameraTrackingMode", "CameraProjectionMode", "CameraEvent", "UPDATED", "MIN_DISTANCE", "Camera", "_classCallCheck", "clipSpaceNearZ", "ClipSpaceNearZ", "NEGATIVE_ONE", "eventEmitter", "EventEmitter", "up", "forward", "position", "focalPoint", "distanceVector", "distance", "azimuth", "elevation", "roll", "relAzimuth", "relElevation", "relRoll", "dollyingStep", "maxDistance", "Infinity", "minDistance", "zoom", "rotateWorld", "fov", "aspect", "projectionMatrix", "projectionMatrixInverse", "jitteredProjectionMatrix", "enableUpdate", "type", "EXPLORING", "trackingMode", "DEFAULT", "projectionMode", "PERSPECTIVE", "frustum", "Frustum", "orthoMatrix", "_createClass", "key", "value", "isOrtho", "ORTHOGRAPHIC", "getProjectionMode", "getPerspective", "getPerspectiveInverse", "getFrustum", "getPosition", "getFocalPoint", "getDollyingStep", "getNear", "getFar", "getZoom", "getOrthoMatrix", "getView", "view", "setEnableUpdate", "enabled", "setType", "setWorldRotation", "_getAngles", "TRACKING", "setTrackingMode", "setProjectionMode", "Error", "flag", "getViewTransform", "getWorldTransform", "jitterProjectionMatrix", "fromTranslation", "multiply", "clearJitterProjectionMatrix", "setMatrix", "_update", "setProjectionMatrix", "setFov", "setPerspective", "setAspect", "setNear", "setOrthographic", "rright", "setFar", "setViewOffset", "fullWidth", "fullHeight", "width", "height", "offsetX", "offsetY", "clearViewOffset", "setZoom", "setZoomByViewportPoint", "viewportPoint", "_this$canvas$viewport", "canvas", "viewport2Canvas", "ox", "oy", "rotate", "setPosition", "setFocalPoint", "_this$canvas$viewport2", "cx", "cy", "dvec", "dx", "dy", "_this$getPosition", "_this$getPosition2", "px", "py", "_this$getFocalPoint", "_this$getFocalPoint2", "fx", "fy", "_this$view", "tan", "deg2rad", "ZERO", "triggerUpdate", "l", "r", "t", "_this$view2", "scaleW", "scaleH", "ortho", "orthoZO", "_getOrthoMatrix", "createVec3", "_setPosition", "CINEMATIC", "subtract", "el", "az", "rotateY", "rotateX", "lookAt", "_getAxes", "_getDistance", "getDistance", "getDistanceVector", "setDistance", "pos", "n", "f", "setMaxDistance", "setMinDistance", "setAzimuth", "getAngle", "computeMatrix", "ORBITING", "_getPosition", "_getFocalPoint", "getAzimuth", "setElevation", "getElevation", "setRoll", "getRoll", "rotZ", "setAxisAngle", "identity", "rotX", "rotY", "rotQ", "rotMatrix", "fromQuat", "translate", "transformMat3", "fromMat4", "add", "fromRotationTranslationScaleOrigin", "viewMatrix", "vpMatrix", "extractFromVPMatrix", "emit", "ERROR_MSG_METHOD_NOT_IMPLEMENTED", "pan", "tx", "ty", "dolly", "createLandmark", "name", "params", "gotoLandmark", "options", "cancelLandmarkAnimation", "Strategy", "SortReason", "$vec3", "$mat4", "$quat", "updateLocalTransform", "transform", "localDirtyFlag", "hasSkew", "localSkew", "localTransform", "localRotation", "localPosition", "origin", "scaling", "set", "localScale", "hasPosition", "hasRotation", "hasScale", "hasOrigin", "updateWorldTransform", "parentTransform", "dirtyFlag", "worldTransform", "EMPTY_PARSED_PATH", "absolutePath", "hasArc", "segments", "polygons", "polylines", "curve", "totalLength", "rect", "Rectangle", "PropertySyntax", "define", "format", "s", "min", "memoize", "func", "resolver", "TypeError", "memoized", "_len", "args", "Array", "_key", "apply", "cache", "has", "get", "result", "Cache", "Map", "cacheList", "push", "clearCache", "forEach", "clear", "UnitType", "UnitCategory", "Nested", "ParenLess", "data", "unit_type", "kEms", "kPixels", "kDegrees", "kRadians", "kGradians", "kMilliseconds", "kSeconds", "kRems", "kTurns", "CSSStyleValueType", "stringToUnitType", "find", "item", "unitFromName", "kUnknown", "kNumber", "kPercentage", "unitTypeToUnitCategory", "kInteger", "kUNumber", "kUPercent", "kULength", "kUTime", "kUAngle", "kUOther", "canonicalUnitTypeForCategory", "category", "conversionToCanonicalUnitsScaleFactor", "factor", "unitTypeToString", "CSSStyleValue", "toString", "buildCSSText", "kNo", "isNumericValue", "getType", "kUnitType", "kClampType", "isAngle", "isLength", "isRelativeUnit", "isTime", "CSSColorValue", "_CSSStyleValue", "colorSpace", "_this", "_callSuper", "_inherits", "kColorType", "to", "GradientType", "CSSGradientValue", "clone", "p", "CSSKeywordValue", "kKeywordType", "formatInfinityOrNaN", "number", "suffix", "Number", "isFinite", "toCanonicalUnit", "CSSUnitValue", "unitOrName", "equals", "other", "other_unit_value", "convertTo", "target_unit", "canonical_unit", "scale_factor", "text", "toFixed", "kMinInteger", "kMaxInteger", "isNaN", "concat", "Opx", "Odeg", "CSSRGB", "_CSSColorValue", "g", "alpha", "isNone", "unsetKeywordValue", "initialKeywordValue", "inheritKeywordValue", "keywordCache", "unset", "initial", "inherit", "getOrCreateKeyword", "noneColor", "transparentColor", "getOrCreateRGBA", "getOrCreateUnitValue", "colorStopToString", "colorStop", "join", "parseGradient", "tokens", "linearGradient", "repeatingLinearGradient", "radialGradient", "repeatingRadialGradient", "conicGradient", "sideOrCorner", "extentKeywords", "positionKeywords", "pixelValue", "percentageValue", "emValue", "angleValue", "startCall", "endCall", "comma", "hexColor", "literalColor", "rgbColor", "rgbaColor", "input", "error", "msg", "getAST", "ast", "matchListDefinitions", "matchListing", "matchDefinition", "matchGradient", "matchLinearOrientation", "matchListRadialOrientations", "gradientType", "pattern", "orientationMatcher", "matchCall", "captures", "orientation", "scan", "colorStops", "matchColorStop", "callback", "matchSideOrCorner", "matchAngle", "match", "radialOrientations", "radialOrientation", "matchRadialOrientation", "lookaheadCache", "radialType", "matchCircle", "matchEllipse", "at", "matchAtPosition", "extent", "matchExtentKeyword", "positionAt", "defaultPosition", "matchPositioning", "circle", "style", "matchLength", "ellipse", "matchDistance", "positioning", "location", "matchCoordinates", "matcher", "color", "matchColor", "matchHexColor", "matchRGBAColor", "matchRGBColor", "matchLiteralColor", "matchNumber", "matchPositionKeyword", "captureIndex", "regexp", "blankCaptures", "exec", "consume", "size", "substring", "code", "computeLinearGradient", "rad", "rx", "ry", "rcx", "rcy", "x1", "y1", "computeRadialGradient", "distanceSquareRoot", "regexLG", "regexRG", "regexPR", "regexColorStop", "spaceColorStops", "_colorStops$length", "_colorStops$0$length", "previousIndex", "previousOffset", "_colorStops$i$length", "offset", "isNil", "j", "SideOrCornerToDegMap", "angleToDeg", "positonToCSSUnitValue", "unitX", "unitY", "_position$value", "colorStr", "indexOf", "parse", "map", "_ref", "steps", "LinearGradient", "_positonToCSSUnitValu", "_orientation$0$style", "RadialGradient", "arr", "_arr$2$match", "stop", "split", "parseFloat", "_ref2", "_ref3", "parsedRadialGradient", "parseRadialGradient", "isString", "parsePattern", "gradientStr", "_arr$4$match", "_ref4", "_ref5", "patternStr", "repetition", "src", "image", "isPattern", "object", "image", "isCSSRGB", "isNil", "r", "g", "b", "parseColor", "memoize", "colorStr", "_objectSpread", "repetition", "transparentColor", "noneColor", "parseGradient", "color", "d3", "rgba", "opacity", "getOrCreateRGBA", "apply", "mergeColors", "left", "right", "Number", "alpha", "slice", "i", "Math", "round", "clamp", "concat", "join", "parseDimension", "unitRegExp", "string", "getOrCreateUnitValue", "trim", "toLowerCase", "isFinite", "search", "matchedUnits", "replace", "match", "push", "taggedUnitRegExp", "source", "map", "unit", "RegExp", "parseLengthUnmemoize", "css", "parseLength", "parserPercentageUnmemoize", "parseLengthOrPercentageUnmemoize", "isNumber", "parseLengthOrPercentage", "parseAngleUnmemoize", "parseAngle", "mergeDimensions", "target", "nonNegative", "index", "arguments", "length", "undefined", "leftValue", "value", "rightValue", "canonicalUnit", "toCanonicalUnit", "leftCanonicalUnitValue", "convertTo", "rightCanonicalUnitValue", "unitTypeToString", "CSSUnitValue", "isLength", "convertPercentUnit", "max", "convertAngleUnit", "deg", "UnitType", "kDegrees", "kRadians", "rad2deg", "kTurns", "turn2deg", "parseDimensionArrayFormat", "size", "parsed", "Array", "isArray", "segment", "isString", "split", "_toConsumableArray", "valueWithUnit", "vec3Index", "useMin", "kPixels", "kPercentage", "bounds", "nodeName", "Shape", "GROUP", "getLocalBounds", "getGeometryBounds", "min", "halfExtents", "parseParam", "supportedFilters", "parseFilter", "filterStr", "filterRegExp", "result", "prevLastIndex", "exec", "indexOf", "name", "params", "p", "lastIndex", "numberToString", "x", "toString", "parseNumberUnmemoize", "test", "parseNumber", "mergeNumbers", "clampedMergeNumbers", "mergeNumberLists", "numberList", "getOrCalculatePathTotalLength", "path", "parsedStyle", "d", "totalLength", "getTotalLength", "absolutePath", "getOrCalculatePolylineTotalLength", "polyline", "points", "polylineLength", "removeRedundantMCommand", "prevSegment", "cmd", "prevCmd", "srcPoint", "destPoint", "isSamePoint", "splice", "hasArcOrBezier", "hasArc", "count", "extractPolygons", "pathArray", "polygons", "polylines", "point1", "point2", "getPathBBox", "segments", "lineWidth", "xArr", "yArr", "segmentsWithAngle", "currentPoint", "prePoint", "box", "command", "quadBox", "cubicBox", "arcParams", "arcBox", "cx", "cy", "rx", "ry", "xRotation", "startAngle", "endAngle", "width", "y", "height", "nextPoint", "filter", "item", "isNaN", "Infinity", "minX", "minY", "maxX", "maxY", "extra", "getExtraFromSegmentWithAngle", "xExtra", "yExtra", "currentAndPre", "pow", "currentAndNext", "preAndNext", "currentAngle", "acos", "sqrt", "sin", "isNumberEqual", "xAngle", "abs", "atan2", "yAngle", "PI", "cos", "toSymmetry", "point", "center", "angleBetween", "v0", "v1", "n", "sign", "angle", "pointOnEllipticalArc", "p0", "xAxisRotation", "largeArcFlag", "sweepFlag", "p1", "t", "mod", "xAxisRotationRadians", "deg2rad", "ellipticalArcAngle", "dx", "dy", "transformedPoint", "radiiCheck", "cSquareNumerator", "cSquareRootDenom", "cRadicand", "cCoef", "transformedCenter", "startVector", "endVector", "sweepAngle", "ellipseComponentX", "ellipseComponentY", "ellipticalArcStartAngle", "ellipticalArcEndAngle", "ellipticalArcCenter", "resultantRx", "resultantRy", "path2Segments", "nextParams", "startMovePoint", "lastStartMovePointIndex", "startTangent", "endTangent", "cubicParams", "getArcParams", "len", "includes", "cp", "preSegment", "cp1", "cp2", "_getTangentAtRatio", "getTangentAtRatio", "dx1", "dy1", "_getTangentAtRatio2", "dx2", "dy2", "ratio", "_segment$arcParams", "_segment$arcParams$rx", "_segment$arcParams$ry", "arcFlag", "p2", "xDist", "yDist", "dist", "vMag", "v", "vRatio", "u", "vAngle", "startPoint", "x1", "y1", "x2", "y2", "xp", "yp", "lambda", "diff", "f", "cxp", "cyp", "theta", "dTheta", "commandsToPathString", "commands", "transform", "reduce", "prev", "cur", "vec3", "fromValues", "transformMat4", "p3", "c", "lineToCommands", "ellipseToCommands", "factor", "top", "bottom", "polygonToCommands", "closed", "rectToCommands", "radius", "_radius", "_slicedToArray", "tlr", "trr", "brr", "blr", "signX", "signY", "convertToPath", "getLocalTransform", "LINE", "_parsedStyle", "_parsedStyle$x", "_parsedStyle$y", "_parsedStyle$x2", "_parsedStyle$y2", "CIRCLE", "_parsedStyle2", "_parsedStyle2$r", "_parsedStyle2$cx", "_parsedStyle2$cy", "ELLIPSE", "_parsedStyle3", "_parsedStyle3$rx", "_parsedStyle3$ry", "_parsedStyle3$cx", "_parsedStyle3$cy", "POLYLINE", "POLYGON", "RECT", "_parsedStyle4", "_parsedStyle4$width", "_parsedStyle4$height", "_parsedStyle4$x", "_parsedStyle4$y", "hasRadius", "some", "PATH", "internalParsePath", "path", "Array", "isArray", "length", "absolutePath", "hasArc", "segments", "polygons", "polylines", "curve", "totalLength", "rect", "x", "y", "width", "height", "normalizePath", "_unused", "console", "error", "concat", "removeRedundantMCommand", "hasArcOrBezier", "_extractPolygons", "extractPolygons", "path2Segments", "_getPathBBox", "getPathBBox", "Number", "isFinite", "memoizedParsePath", "memoize", "parsePath", "isString", "mergePaths", "left", "right", "object", "curve1", "curve2", "path2Curve", "curves", "equalizeSegments", "curve0", "getDrawDirection", "reverseCurve", "clonePath", "getRotatedCurve", "pathArray", "parsePoints", "pointsOrStr", "points", "split", "map", "pointStr", "_pointStr$split", "_pointStr$split2", "_slicedToArray", "mergePoints", "_", "TRANSFORM_REGEXP", "cast", "pattern", "contents", "i", "id", "transformFunctions", "matrix", "matrix3d", "rotate", "rotateX", "rotateY", "rotateZ", "rotate3d", "perspective", "scale", "CSSUnitValue", "scaleX", "scaleY", "scaleZ", "scale3d", "skew", "skewX", "Odeg", "skewY", "translate", "Opx", "translateX", "translateY", "translateZ", "translate3d", "parseArrayTransform", "transform", "result", "item", "name", "args", "slice", "push", "functionData", "parsedArgs", "value", "getOrCreateUnitValue", "t", "d", "parseTransform", "trim", "match", "prevLastIndex", "lastIndex", "exec", "index", "functionName", "argTypes", "arg", "type", "parsedArg", "a", "n", "A", "s", "parseAngle", "N", "parseNumber", "T", "parseLengthOrPercentage", "L", "parseLength", "toUpperCase", "undefined", "parseTransformUnmemoize", "parseAngleUnmemoize", "parseNumberUnmemoize", "parseLengthOrPercentageUnmemoize", "parseLengthUnmemoize", "convertItemToMatrix", "z", "angle", "deg2rad", "convertAngleUnit", "Math", "cos", "sin", "sqrLength", "sqrt", "sc", "sq", "xAngle", "yAngle", "tan", "convertPercentUnit", "p", "multiplyMatrices", "b", "convertToMatrix", "transformList", "reduce", "makeMatrixDecomposition", "quaternion", "decomposeMat4", "composeMatrix", "multiply", "j", "k", "is2D", "m", "quat", "w", "rotMatrix", "temp", "numberToLongString", "toFixed", "replace", "mergeMatrices", "leftArgs", "rightArgs", "decompositionPair", "list", "q", "mat", "stringifiedArgs", "join", "dot", "v1", "v2", "fromQ", "toQ", "f", "product", "clamp", "theta", "acos", "typeTo2D", "typeTo3D", "isMatrixOrPerspective", "lt", "rt", "mergeTransforms", "target", "flipResults", "_loop", "_left$i", "defaultValue", "substring", "unit", "leftResult", "rightResult", "types", "merged", "leftType", "rightType", "leftFunctionData", "rightFunctionData", "leftArgsCopy", "rightArgsCopy", "stringConversions", "mergeDimensions", "tmp", "parseTransformOrigin", "values", "convertKeyword2Percent", "keyword", "BUILT_IN_PROPERTIES", "inh", "syntax", "PropertySyntax", "OPACITY_VALUE", "PAINT", "l", "COLOR", "LENGTH_PERCENTAGE", "SHADOW_BLUR", "LENGTH_PERCENTAGE_12", "DEFINED_PATH", "OFFSET_DISTANCE", "ind", "Z_INDEX", "FILTER", "TRANSFORM", "TRANSFORM_ORIGIN", "COORDINATE", "LENGTH_PERCENTAGE_14", "PATH", "LIST_OF_POINTS", "TEXT", "TEXT_TRANSFORM", "LENGTH", "NUMBER", "nodeName", "Shape", "POLYGON", "POLYLINE", "MARKER", "GEOMETRY_ATTRIBUTE_NAMES", "Set", "filter", "propertyMetadataCache", "DefaultStyleValueRegistry", "runtime", "_this", "_classCallCheck", "forEach", "property", "registerMetadata", "_createClass", "key", "metadata", "_toConsumableArray", "getPropertySyntax", "CSSPropertySyntaxFactory", "processProperties", "attributes", "options", "arguments", "skipUpdateAttribute", "skipParse", "forceUpdateGeometry", "usedAttributes", "Object", "assign", "oldClipPath", "parsedStyle", "clipPath", "oldOffsetPath", "offsetPath", "assignParsedStyle", "needUpdateGeometry", "has", "getParsedStyleListOf", "fill", "parseColor", "stroke", "shadowColor", "parseFilter", "isNil", "radius", "parseDimensionArrayFormat", "lineDash", "_objectSpread", "EMPTY_PARSED_PATH", "textTransform", "calculator", "isUndefined", "transformOrigin", "markerStart", "markerEnd", "markerMid", "zIndex", "postProcessor", "offsetDistance", "geometry", "dirty", "sceneGraphService", "dirtyToRoot", "updateGeometry", "geometryUpdater", "geometryUpdaterFactory", "contentBounds", "AABB", "renderBounds", "_geometryUpdater$upda", "update", "_geometryUpdater$upda2", "cx", "_geometryUpdater$upda3", "cy", "_geometryUpdater$upda4", "cz", "_geometryUpdater$upda5", "hwidth", "_geometryUpdater$upda6", "hheight", "_geometryUpdater$upda7", "hdepth", "halfExtents", "abs", "_parsedStyle$lineWidt", "lineWidth", "_parsedStyle$increase", "increasedLineWidthForHitTesting", "_parsedStyle$shadowTy", "shadowType", "_parsedStyle$filter", "center", "expansion", "SQRT2", "hasStroke", "isNone", "halfLineWidth", "_geometry$renderBound", "min", "max", "shadowBlur", "shadowOffsetX", "shadowOffsetY", "shadowBlurInPixels", "shadowOffsetXInPixels", "shadowOffsetYInPixels", "shadowLeft", "shadowRight", "shadowTop", "shadowBottom", "setMinMax", "_ref", "params", "blurRadius", "vec3", "add", "_geometry$renderBound2", "flipY", "flipX", "usedOriginXValue", "usedOriginYValue", "setOrigin", "updateSizeAttenuation", "node", "zoom", "style", "isSizeAttenuation", "rawLineWidth", "CIRCLE", "rawR", "r", "constructor", "PARSED_STYLE_LIST", "CSSPropertyAngle", "mixer", "mergeNumbers", "oldParsed", "parsed", "CSSPropertyClipPath", "oldPath", "newPath", "CSSKeywordValue", "updateDisplayObjectDependency", "leaf", "childNodes", "CSSPropertyColor", "parser", "mergeColors", "noneColor", "transparentColor", "CSSPropertyFilter", "getFontSize", "fontSize", "CSSPropertyLengthOrPercentage", "computed", "isNumber", "isRelativeUnit", "UnitType", "kPercentage", "kEms", "parentNode", "kRems", "_object$ownerDocument", "ownerDocument", "documentElement", "CSSPropertyLengthOrPercentage12", "mergeNumberLists", "c", "CSSPropertyLengthOrPercentage14", "CSSPropertyMarker", "oldMarker", "newMarker", "_newMarker", "cloned", "cloneNode", "isMarker", "CSSPropertyNumber", "CSSPropertyOffsetDistance", "clampedMergeNumbers", "_object$parsedStyle", "LINE", "point", "getPoint", "setLocalPosition", "CSSPropertyOpacity", "CSSPropertyPath", "Rectangle", "CSSPropertyPoints", "CSSPropertyShadowBlur", "_CSSPropertyLengthOrP", "_len", "_key", "_callSuper", "Infinity", "_inherits", "CSSPropertyText", "nodeValue", "text", "CSSPropertyTextTransform", "rawText", "getAttribute", "transformedText", "charAt", "toLowerCase", "CANVAS_Map", "WeakMap", "cleanExistedCanvas", "container", "canvas", "cleanUp", "$dom", "document", "getElementById", "has", "get", "destroy", "set", "isBrowser", "window", "isElement", "target", "getAttribute", "sortedIndex", "array", "value", "low", "high", "length", "mid", "sortByZIndex", "o1", "o2", "zIndex1", "Number", "parsedStyle", "zIndex", "zIndex2", "parent", "parentNode", "children", "childNodes", "indexOf", "findClosestClipPathTarget", "object", "el", "_el$parsedStyle", "clipPath", "parentElement", "PX_SUFFIX", "setDOMSize", "$el", "width", "height", "style", "getStyle", "property", "defaultView", "getComputedStyle", "getPropertyValue", "getWidth", "offsetWidth", "parseFloat", "getHeight", "offsetHeight", "MOUSE_POINTER_ID", "TOUCH_TO_POINTER", "touchstart", "touchend", "touchendoutside", "touchmove", "touchcancel", "clock", "performance", "now", "Date", "isInFragment", "node", "nodeName", "Shape", "FRAGMENT", "getRootNode", "isFillOrStrokeAffected", "pointerEvents", "arguments", "undefined", "fill", "stroke", "hasFill", "hasStroke", "isFillOtherThanNone", "isNone", "isStrokeOtherThanNone", "uId", "uniqueId", "root", "self", "global", "nowOffset", "pnow", "reservedCBs", "lastTime", "polyfillRaf", "callback", "TypeError", "concat", "currentTime", "gap", "delay", "id", "Object", "keys", "setTimeout", "copied", "forEach", "key", "polyfillCaf", "vendorPrefixes", "getRequestAnimationFrame", "vp", "requestAnimationFrame", "getCancelAnimationFrame", "cancelAnimationFrame", "find", "arr", "predicate", "i", "raf", "caf", "AsyncParallelHook", "_classCallCheck", "callbacks", "_createClass", "getCallbacksNum", "tapPromise", "options", "fn", "push", "promise", "_len", "args", "Array", "_key", "Promise", "all", "map", "apply", "AsyncSeriesWaterfallHook", "_promise", "_asyncToGenerator", "_regeneratorRuntime", "mark", "_callee", "_this$callbacks", "result", "_args", "wrap", "_context", "prev", "next", "sent", "abrupt", "stop", "SyncHook", "tap", "call", "argsArr", "SyncWaterfallHook", "genericFontFamilies", "stringRegExp", "getFontAttr", "attributes", "_attributes$fontSize", "fontSize", "_attributes$fontFamil", "fontFamily", "_attributes$fontStyle", "fontStyle", "_attributes$fontVaria", "fontVariant", "_attributes$fontWeigh", "fontWeight", "toFontString", "memoize", "toFontStringRaw", "_getFontAttr", "fontSizeString", "isNumber", "fontFamilies", "split", "trim", "test", "join", "_getFontAttr2", "MIN_SCALE", "clampScale", "item", "Math", "max", "createSkewMatrix", "skewMatrix", "skewX", "skewY", "mat4", "identity", "tan", "$mat4_1", "create", "$mat4_2", "parser", "scale", "d", "fromScaling", "scaleX", "scaleY", "scaleZ", "scale3d", "translate", "fromTranslation", "translateX", "translateY", "translateZ", "translate3d", "rotate", "fromZRotation", "deg2rad", "convertAngleUnit", "rotateX", "fromXRotation", "rotateY", "fromYRotation", "rotateZ", "rotate3d", "fromRotation", "skew", "matrix", "matrix3d", "_toConsumableArray", "s", "$vec3One", "vec3", "fromValues", "$vec3Zero", "optimizer", "runtime", "sceneGraphService", "setLocalScale", "setLocalEulerAngles", "setLocalPosition", "dirtyLocalTransform", "transformable", "parsedTransformToMat4", "transform", "t", "m", "_transform$i", "p", "mul", "setLocalTransform", "resetLocalTransform", "getLocalTransform", "CSSPropertyTransform", "parseTransformUnmemoize", "mixer", "mergeTransforms", "calculator", "name", "oldParsed", "parsed", "CSSKeywordValue", "postProcessor", "CSSPropertyTransformOrigin", "transformOrigin", "unit", "UnitType", "kPixels", "setOrigin", "getGeometryBounds", "CSSPropertyZIndex", "computed", "parentEntity", "parentRenderable", "renderable", "parentSortable", "sortable", "dirty", "dirtyReason", "SortReason", "Z_INDEX_CHANGED", "CircleUpdater", "update", "_parsedStyle$cx", "cx", "_parsedStyle$cy", "cy", "_parsedStyle$r", "r", "hwidth", "hheight", "EllipseUpdater", "_parsedStyle$rx", "rx", "_parsedStyle$ry", "ry", "LineUpdater", "x1", "y1", "x2", "y2", "minX", "min", "maxX", "minY", "maxY", "PathUpdater", "_d$rect", "rect", "x", "y", "PolylineUpdater", "points", "isArray", "point", "RectUpdater", "_parsedStyle$x", "_parsedStyle$y", "src", "_parsedStyle$width", "_parsedStyle$height", "contentWidth", "contentHeight", "isString", "TextUpdater", "globalRuntime", "isReadyToMeasure", "text", "_object$ownerDocument", "_parsedStyle$textAlig", "textAlign", "_parsedStyle$lineWidt", "lineWidth", "_parsedStyle$textBase", "textBaseline", "_parsedStyle$dx", "dx", "_parsedStyle$dy", "dy", "metrics", "font", "lines", "lineWidths", "lineHeight", "maxLineWidth", "fontProperties", "ascent", "descent", "lineMetrics", "_ref", "ownerDocument", "getConfig", "offscreenCanvas", "textService", "measureText", "lineXOffset", "lineYOffset", "GroupUpdater", "HTMLUpdater", "FederatedEvent", "manager", "_classCallCheck", "eventPhase", "prototype", "NONE", "bubbles", "cancelBubble", "cancelable", "defaultPrevented", "propagationStopped", "propagationImmediatelyStopped", "layer", "Point", "page", "canvas", "viewport", "composed", "CAPTURING_PHASE", "AT_TARGET", "BUBBLING_PHASE", "_createClass", "key", "get", "type", "x", "y", "value", "composedPath", "path", "target", "propagationPath", "preventDefault", "nativeEvent", "Event", "stopImmediatePropagation", "stopPropagation", "initEvent", "initUIEvent", "clone", "Error", "ERROR_MSG_METHOD_NOT_IMPLEMENTED", "FederatedMouseEvent", "_ref", "_this", "_len", "arguments", "length", "args", "Array", "_key", "_callSuper", "concat", "client", "movement", "offset", "global", "screen", "_inherits", "getModifierState", "initMouseEvent", "FederatedPointerEvent", "_FederatedMouseEvent", "width", "height", "isPrimary", "getCoalescedEvents", "getPredictedEvents", "clonePointerEvent", "FederatedWheelEvent", "cloneWheelEvent", "CustomEvent", "_FederatedEvent", "eventName", "object", "detail", "Object", "assign", "EventTarget", "emitter", "EventEmitter", "on", "listener", "options", "addEventListener", "capture", "once", "isBoolean", "_options$capture", "_options$once", "isFunction", "handleEvent", "context", "undefined", "off", "removeEventListener", "removeAllEventListeners", "_this$emitter", "removeAllListeners", "_listener", "emit", "dispatchEvent", "dispatchEventToSelf", "e", "currentTarget", "skipPropagate", "dispatchToSelf", "document", "defaultView", "_ownerDocument", "ownerDocument", "getEventService", "Node", "_EventTarget", "shadow", "isConnected", "baseURI", "childNodes", "nodeType", "nodeName", "nodeValue", "parentNode", "destroyed", "out", "Shape", "TEXT", "style", "text", "_iterator", "_createForOfIteratorHelper", "_step", "s", "n", "done", "child", "textContent", "err", "f", "set", "content", "_this2", "slice", "forEach", "removeChild", "getRootNode", "opts", "host", "hasChildNodes", "isDefaultNamespace", "namespace", "lookupNamespaceURI", "prefix", "lookupPrefix", "normalize", "isEqualNode", "otherNode", "isSameNode", "compareDocumentPosition", "other", "node1Root", "node2Root", "node1Hierarchy", "node2Hierarchy", "_node1Root$parentNode", "push", "DOCUMENT_POSITION_DISCONNECTED", "DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC", "DOCUMENT_POSITION_PRECEDING", "longerHierarchy", "shorterHierarchy", "DOCUMENT_POSITION_CONTAINED_BY", "DOCUMENT_POSITION_FOLLOWING", "DOCUMENT_POSITION_CONTAINS", "longerStart", "i", "shorterHierarchyNode", "longerHierarchyNode", "siblings", "indexOf", "contain", "contains", "tmp", "getAncestor", "temp", "callback", "stack", "node", "pop", "result", "isNode", "PROPAGATION_LIMIT", "EventService", "globalRuntime", "nativeHTMLMap", "WeakMap", "cursor", "mappingTable", "mappingState", "trackingData", "eventPool", "Map", "tmpMatrix", "mat4", "create", "tmpVec3", "vec3", "onPointerDown", "from", "createPointerEvent", "pointerType", "isRightButton", "button", "pointerId", "pressTargetsByButton", "freeEvent", "onPointerUp", "now", "clock", "config", "alwaysTriggerPointerEventOnCanvas", "rootTarget", "pressTarget", "findMountedTarget", "clickTarget", "includes", "notifyTarget", "_e$detail", "clickEvent", "clicksByButton", "clickCount", "timeStamp", "renderingContext", "root", "clickHistory", "getConfig", "dblClickSpeed", "preventClick", "useNativeClickEvent", "onPointerMove", "isMouse", "outTarget", "overTargets", "outType", "outEvent", "leaveEvent", "overType", "overEvent", "overTargetAncestor", "didPointerEnter", "enterEvent", "getCursor", "onPointerOut", "onPointerOver", "onPointerUpOutside", "onWheel", "wheelEvent", "createWheelEvent", "onClick", "onPointerCancel", "init", "addEventMapping", "destroy", "clear", "getScale", "bbox", "contextService", "getBoundingClientRect", "scaleX", "scaleY", "$el", "getDomElement", "offsetWidth", "offsetHeight", "client2Viewport", "_this$getScale", "left", "top", "viewport2Client", "_this$getScale2", "viewport2Canvas", "camera", "getCamera", "_this$context$config", "projectionMatrixInverse", "getPerspectiveInverse", "worldMatrix", "getWorldTransform", "vpMatrix", "multiply", "transformMat4", "canvas2Viewport", "canvasP", "projectionMatrix", "getPerspective", "viewMatrix", "getViewTransform", "clip", "_this$context$config2", "setPickHandler", "pickHandler", "fn", "priority", "sort", "a", "b", "mapEvent", "mappers", "j", "console", "warn", "propagate", "notifyListeners", "index", "unshift", "hitTest", "position", "viewportX", "viewportY", "_this$context$config3", "disableHitTesting", "isNativeEventFromCanvas", "_target", "shadowRoot", "getExistedHTML", "event", "_i2", "_arr", "eventTarget", "existed", "pickTarget", "clientX", "clientY", "canvasX", "canvasY", "fallbackTarget", "allocateEvent", "copyPointerData", "copyMouseData", "copyData", "originalEvent", "existedHTML", "copyWheelData", "id", "overTarget", "to", "pressure", "tangentialPressure", "tiltX", "tiltY", "twist", "altKey", "buttons", "ctrlKey", "metaKey", "shiftKey", "copyFrom", "deltaMode", "deltaX", "deltaY", "deltaZ", "isTrusted", "view", "constructor", "has", "listeners", "_events", "removeListener", "call", "isElement", "getAttribute", "OffscreenCanvasCreator", "getOrCreateCanvas", "offscreenCanvas", "contextAttributes", "runtime", "getContext", "_objectSpread", "willReadFrequently", "window", "OffscreenCanvas", "measureText", "createElement", "_unused", "getOrCreateContext", "createCanvas", "_unused2", "_unused3", "RenderReason", "RenderingService", "inited", "stats", "total", "rendered", "zIndexCounter", "hooks", "SyncHook", "initAsync", "AsyncParallelHook", "dirtycheck", "SyncWaterfallHook", "cull", "beginFrame", "beforeRender", "render", "afterRender", "endFrame", "pick", "AsyncSeriesWaterfallHook", "pickSync", "pointerDown", "pointerUp", "pointerMove", "pointerOut", "pointerOver", "pointerWheel", "pointerCancel", "click", "renderingPlugins", "plugin", "apply", "getCallbacksNum", "promise", "then", "getStats", "disableDirtyRectangleRendering", "renderer", "_renderer$getConfig", "enableDirtyRectangleRendering", "renderReasons", "CAMERA_CHANGED", "canvasConfig", "frame", "rerenderCallback", "sceneGraphService", "syncHierarchy", "triggerPendingEvents", "size", "dirtyRectangleRenderingDisabled", "onlyCameraChanged", "shouldTriggerRenderHooks", "disableRenderHooks", "renderDisplayObject", "renderListCurrentFrame", "displayObject", "self", "_canvasConfig$rendere", "enableDirtyCheck", "enableCulling", "internalRenderSingleDisplayObject", "renderable", "sortable", "objectChanged", "dirty", "objectToRender", "renderOrder", "dirtyChildren", "dirtyReason", "_currentObject$sortab", "currentObject", "objects", "sorted", "_sortable$sorted", "_sortable$sorted2", "SortReason", "Z_INDEX_CHANGED", "sortIndex", "splice", "sortedIndex", "sortByZIndex", "filter", "parsedStyle", "zIndex", "clearPendingEvents", "dirtify", "add", "DISPLAY_OBJECT_CHANGED", "ATTRIBUTE_REGEXP", "DefaultSceneGraphSelector", "selectOne", "query", "startsWith", "find", "classList", "getIdOrClassname", "_this$getAttribute", "name", "attributeToString", "selectAll", "findAll", "_this$getAttribute2", "is", "className", "_this$getAttribute3", "substring", "matches", "match", "replace", "isNil", "toString", "ElementEvent", "MutationEvent", "typeArg", "relatedNode", "prevValue", "newValue", "attrName", "attrChange", "prevParsedValue", "newParsedValue", "ADDITION", "MODIFICATION", "REMOVAL", "reparentEvent", "REPARENT", "$vec2Zero", "vec2", "$vec3Zero", "$vec3One", "fromValues", "$mat4Identity", "$vec2", "$vec3", "$mat4", "$quat", "quat", "$setLocalTransform_1", "$setLocalTransform_2", "$setLocalTransform_3", "$setLocalPosition", "$setPosition_1", "$setPosition_ParentInvertMatrix", "$setEulerAngles_InvParentRot", "$rotateLocal", "$rotate_ParentInvertRotation", "$triggerPendingEvents_detail", "affectChildren", "DefaultSceneGraphService", "pendingEvents", "boundsChangedEvent", "BOUNDS_CHANGED", "displayObjectDependencyMap", "sceneGraphSelector", "querySelector", "querySelectorAll", "attach", "parent", "detached", "detach", "isChildFragment", "FRAGMENT", "isAttachToFragment", "isInFragment", "nodes", "isNumber", "ADDED", "dirtifyFragment", "transform", "transformable", "dirtyWorldTransform", "_parent$ownerDocument", "enableCancelEventPropagation", "future", "experimentalCancelEventPropagation", "_style", "_ref2", "REMOVED", "getLocalPosition", "element", "localPosition", "getLocalRotation", "localRotation", "getLocalScale", "localScale", "getLocalSkew", "localSkew", "getLocalTransform", "updateLocalTransform", "localTransform", "setLocalPosition", "_position$", "equals", "copy", "dirtyLocalTransform", "translateLocal", "translation", "z", "transformQuat", "setLocalRotation", "rotation", "w", "rotateLocal", "degrees", "fromEuler", "mul", "setLocalScale", "scaling", "_scaling$", "scaleLocal", "_scaling$2", "setLocalSkew", "skew", "setLocalEulerAngles", "setLocalTransform", "t", "getTranslation", "r", "getRotation", "getScaling", "resetLocalTransform", "getPosition", "getOrigin", "getGeometryBounds", "origin", "localDirtyFlag", "dirtyFlag", "worldTransform", "internalUpdateTransform", "setPosition", "_position$2", "parentTransform", "invert", "translate", "setRotation", "parentRot", "rotate", "rot", "setOrigin", "originVec", "setEulerAngles", "parentRotation", "getTransformedGeometryBounds", "existedAABB", "bounds", "AABB", "isEmpty", "aabb", "setFromTransformedAABB", "_ref3", "geometry", "styleValueRegistry", "updateGeometry", "renderBounds", "contentBounds", "getBounds", "_ref4", "boundsDirty", "renderBoundsDirty", "children", "childBounds", "update", "center", "halfExtents", "clipped", "findClosestClipPathTarget", "clipPathBounds", "clipPath", "intersection", "getLocalBounds", "parentInvert", "localBounds", "_element$ownerDocumen", "getContextService", "_aabb$getMin", "getMin", "_aabb$getMin2", "_slicedToArray", "_aabb$getMax", "getMax", "_aabb$getMax2", "right", "bottom", "Rectangle", "_element$parentNode", "updateWorldTransform", "internalUpdateElement", "ancestors", "_element$ownerDocumen2", "_element$transformabl", "_element$renderable", "_element$renderable2", "enableAttributeUpdateOptimization", "experimentalAttributeUpdateOptimization", "transformDirty", "_element$transformabl2", "_element$dirty", "shapeUpdated", "tempElIndex", "_dirty", "_ref5", "tempEl", "rootNode", "_transformable", "_transformable2", "dirtifyWorldInternal", "dirtyToRoot", "_element$ownerDocumen3", "childTransform", "_element$ownerDocumen4", "p", "_dirty2", "_ref6", "_e$dirty", "informDependentDisplayObjects", "_dirty3", "_ref7", "_this3", "triggered", "Set", "trigger", "isMutationObserved", "_element$ownerDocumen5", "_element$ownerDocumen6", "updateDisplayObjectDependency", "oldPath", "newPath", "oldDependencyMap", "newDependencyMap", "_object$ownerDocument", "_this4", "dependencyMap", "keys", "ATTR_MODIFIED", "isCustomElement", "attributeChangedCallback", "LRU", "capacity", "cache", "put", "leastRecentlyUsedKey", "next", "len", "TEXT_METRICS", "MetricsString", "BaselineSymbol", "BaselineMultiplier", "HeightMultiplier", "Newlines", "BreakingSpaces", "LATIN_REGEX", "regexCannotStartZhCn", "regexCannotEndZhCn", "regexCannotStartZhTw", "regexCannotEndZhTw", "regexCannotStartJaJp", "regexCannotEndJaJp", "regexCannotStartKoKr", "regexCannotEndKoKr", "regexCannotStart", "RegExp", "source", "regexCannotEnd", "TextService", "fontMetricsCache", "shouldBreakByKinsokuShorui", "char", "nextChar", "isBreakingSpace", "exec", "trimByKinsokuShorui", "prev", "_toConsumableArray", "prevLine", "lastChar", "charWidthCache", "measureFont", "font", "properties", "ascent", "descent", "fontSize", "offscreenCanvasCreator", "metricsString", "Math", "ceil", "baseline", "fillStyle", "fillRect", "textBaseline", "fillText", "imagedata", "getImageData", "data", "pixels", "line", "idx", "stop", "_parsedStyle$fontSize", "_parsedStyle$wordWrap", "wordWrap", "strokeHeight", "lineHeight", "_parsedStyle$lineWidt", "lineWidth", "_parsedStyle$textBase", "_parsedStyle$textAlig", "textAlign", "_parsedStyle$letterSp", "letterSpacing", "textPath", "textPathSide", "textPathStartOffset", "_parsedStyle$leading", "leading", "toFontString", "fontProperties", "isOverflowing", "outputText", "lines", "split", "lineWidths", "maxLineWidth", "getTotalLength", "max", "offsetY", "lineMetrics", "map", "offsetX", "chars", "_parsedStyle$wordWrap2", "wordWrapWidth", "_parsedStyle$letterSp2", "_parsedStyle$maxLines", "maxLines", "Infinity", "textOverflow", "maxWidth", "ellipsis", "currentLineIndex", "currentLineWidth", "prevLineLastCharIndex", "charCache", "calcWidth", "getFromCache", "ellipsisWidth", "findCharIndexClosestWidthThreshold", "lineTxt", "txtLastCharIndex", "txtStartCharIndex", "widthThreshold", "isNewline", "appendEllipsis", "lineIndex", "textCharIndex", "prevChar", "charWidth", "canBreakInLastChar", "trimToBreakable", "sumTextWidthByCache", "join", "charCodeAt", "findBreakableIndex", "trimmedChar", "isTrimmedWithSpace", "trimFrom", "trimTo", "test", "calcWidthWithCache", "reduce", "sum", "c", "spacing", "metrics", "clearCache", "geometryUpdaterFactory", "rectUpdater", "RectUpdater", "polylineUpdater", "PolylineUpdater", "_defineProperty", "CIRCLE", "CircleUpdater", "ELLIPSE", "EllipseUpdater", "RECT", "IMAGE", "GROUP", "GroupUpdater", "LINE", "LineUpdater", "TextUpdater", "POLYLINE", "POLYGON", "PATH", "PathUpdater", "HTML", "HTMLUpdater", "MESH", "CSSPropertySyntaxFactory", "color", "CSSPropertyColor", "CSSPropertyLengthOrPercentage", "PropertySyntax", "PERCENTAGE", "NUMBER", "CSSPropertyNumber", "ANGLE", "CSSPropertyAngle", "DEFINED_PATH", "CSSPropertyClipPath", "PAINT", "COLOR", "FILTER", "CSSPropertyFilter", "LENGTH", "LENGTH_PERCENTAGE", "LENGTH_PERCENTAGE_12", "CSSPropertyLengthOrPercentage12", "LENGTH_PERCENTAGE_14", "CSSPropertyLengthOrPercentage14", "COORDINATE", "OFFSET_DISTANCE", "CSSPropertyOffsetDistance", "OPACITY_VALUE", "CSSPropertyOpacity", "CSSPropertyPath", "LIST_OF_POINTS", "CSSPropertyPoints", "SHADOW_BLUR", "CSSPropertyShadowBlur", "CSSPropertyText", "TEXT_TRANSFORM", "CSSPropertyTextTransform", "TRANSFORM", "CSSPropertyTransform", "TRANSFORM_ORIGIN", "CSSPropertyTransformOrigin", "Z_INDEX", "CSSPropertyZIndex", "MARKER", "CSSPropertyMarker", "getGlobalThis", "globalThis", "CameraContribution", "Camera", "AnimationTimeline", "EasingFunction", "textService", "DefaultStyleValueRegistry", "layoutRegistry", "enableStyleSyntax", "enableSizeAttenuation", "entityCounter", "insertedEvent", "MutationEvent", "ElementEvent", "INSERTED", "removedEvent", "REMOVED", "destroyEvent", "CustomEvent", "DESTROY", "Element", "_Node", "_this", "_classCallCheck", "_len", "arguments", "length", "args", "Array", "_key", "_callSuper", "concat", "entity", "entityCounter", "transformable", "dirtyFlag", "localDirtyFlag", "localPosition", "localRotation", "localScale", "localTransform", "localSkew", "position", "rotation", "scaling", "worldTransform", "origin", "renderable", "bounds", "undefined", "boundsDirty", "renderBounds", "renderBoundsDirty", "dirtyRenderBounds", "dirty", "geometry", "contentBounds", "cullable", "strategy", "Strategy", "Standard", "visibilityPlaneMask", "visible", "enable", "sortable", "sorted", "renderOrder", "dirtyChildren", "dirtyReason", "rBushNode", "aabb", "namespaceURI", "scrollLeft", "scrollTop", "clientTop", "clientLeft", "style", "computedStyle", "parsedStyle", "attributes", "_inherits", "_createClass", "key", "value", "flag", "updateShape", "get", "getAttribute", "set", "className", "setAttribute", "split", "filter", "c", "nodeName", "childNodes", "firstChild", "lastChild", "parentNode", "index", "indexOf", "cloneNode", "deep", "Error", "ERROR_MSG_METHOD_NOT_IMPLEMENTED", "appendChild", "child", "_this$ownerDocument", "destroyed", "ERROR_MSG_APPEND_DESTROYED_ELEMENT", "runtime", "sceneGraphService", "attach", "ownerDocument", "defaultView", "isInFragment", "Shape", "FRAGMENT", "mountFragment", "mountChildren", "isMutationObserved", "relatedNode", "dispatchEvent", "insertBefore", "newChild", "refChild", "parentElement", "removeChild", "replaceChild", "oldChild", "_this$ownerDocument2", "_child$ownerDocument", "enableCancelEventPropagation", "getConfig", "future", "experimentalCancelEventPropagation", "unmountChildren", "detach", "removeChildren", "i", "destroyChildren", "destroy", "matches", "selector", "getElementById", "id", "querySelector", "getElementsByName", "name", "querySelectorAll", "getElementsByClassName", "getElementsByTagName", "tagName", "selectors", "closest", "el", "find", "_this2", "target", "forEach", "object", "findAll", "_this3", "objects", "push", "after", "_this4", "_len2", "nodes", "_key2", "node", "_this4$parentNode", "before", "_ref", "_len3", "_key3", "first", "rest", "slice", "apply", "_toConsumableArray", "replaceWith", "remove", "append", "_this5", "_len4", "_key4", "prepend", "_this6", "_len5", "_key5", "replaceChildren", "_this$ownerDocument3", "emitter", "removeAllListeners", "getGeometryBounds", "getRenderBounds", "getBounds", "getLocalBounds", "getBoundingClientRect", "getClientRects", "computedStyleMap", "Map", "Object", "entries", "getAttributeNames", "keys", "hasAttribute", "qualifiedName", "includes", "hasAttributes", "removeAttribute", "attributeName", "force", "memoize", "getAttributeNS", "namespace", "localName", "getAttributeNode", "getAttributeNodeNS", "hasAttributeNS", "removeAttributeNS", "removeAttributeNode", "attr", "setAttributeNS", "setAttributeNode", "setAttributeNodeNS", "toggleAttribute", "Node", "isDisplayObject", "Proxy", "globalThis", "attrModifiedEvent", "ATTR_MODIFIED", "MODIFICATION", "$vec3", "vec3", "create", "$quat", "quat", "DisplayObject", "_Element", "config", "isCustomElement", "activeAnimations", "type", "GROUP", "initialParsedStyle", "assign", "initAttributes", "enableStyleSyntax", "setProperty", "propertyName", "getPropertyValue", "removeProperty", "item", "_", "prop", "_superPropGet", "getAnimations", "animation", "cancel", "customCloneFunc", "clonedStyle", "_objectSpread", "attribute", "cloned", "constructor", "setLocalTransform", "getLocalTransform", "children", "isMarker", "clonedChild", "options", "forceUpdateGeometry", "styleValueRegistry", "processProperties", "isUndefined", "internalSetAttribute", "parseOptions", "oldValue", "oldParsedValue", "_defineProperty", "newParsedValue", "isConnected", "prevValue", "newValue", "attrName", "prevParsedValue", "_this$ownerDocument$d", "_attributeChangedCall", "attributeChangedCallback", "call", "getBBox", "_aabb$getMin", "getMin", "_aabb$getMin2", "_slicedToArray", "left", "top", "_aabb$getMax", "getMax", "_aabb$getMax2", "right", "bottom", "Rectangle", "setOrigin", "y", "z", "createVec3", "getOrigin", "setPosition", "setLocalPosition", "translate", "translateLocal", "getPosition", "getLocalPosition", "scale", "scaleLocal", "setLocalScale", "getLocalScale", "getScale", "getEulerAngles", "_getEuler", "getEuler", "getWorldTransform", "_getEuler2", "ez", "rad2deg", "getLocalEulerAngles", "_getEuler3", "getLocalRotation", "_getEuler4", "setEulerAngles", "setLocalEulerAngles", "rotateLocal", "x", "isNil", "rotate", "setRotation", "w", "setLocalRotation", "setLocalSkew", "skew", "getRotation", "getLocalSkew", "transform", "resetLocalTransform", "animate", "keyframes", "timeline", "play", "isVisible", "_this$parsedStyle", "visibility", "isInteractive", "b", "pointerEvents", "_this$parsedStyle2", "isCulled", "toFront", "zIndex", "Math", "max", "map", "Number", "toBack", "min", "isObject", "getMatrix", "transformMat4", "_mat4$getTranslation", "mat4", "getTranslation", "_mat4$getTranslation2", "tx", "ty", "_mat4$getScaling", "getScaling", "_mat4$getScaling2", "sx", "sy", "_getEuler5", "_getEuler6", "eux", "euz", "fromRotationTranslationScale", "getLocalMatrix", "setMatrix", "mat", "_decompose", "decompose", "_decompose2", "scalingX", "scalingY", "angle", "setLocalMatrix", "_decompose3", "_decompose4", "show", "hide", "getCount", "childElementCount", "getParent", "getChildren", "getFirst", "firstElementChild", "getLast", "lastElementChild", "getChildByIndex", "add", "moveTo", "move", "setZIndex", "PARSED_STYLE_LIST", "Set", "Circle", "_DisplayObject", "CIRCLE", "CustomElement", "_objectWithoutProperties", "_excluded", "Ellipse", "ELLIPSE", "Fragment", "Group", "HTML", "getDomElement", "$el", "parentInvert", "invert", "AABB", "isEmpty", "localBounds", "setFromTransformedAABB", "Image", "IMAGE", "Line", "LINE", "x1", "y1", "x2", "y2", "z1", "z2", "markerStartAngle", "markerEndAngle", "markerStart", "markerEnd", "transformMarker", "isStart", "markerStartOffset", "markerEndOffset", "marker", "rad", "ox", "oy", "offset", "originalAngle", "atan2", "PI", "cos", "sin", "getPoint", "ratio", "inWorldSpace", "_this$parsedStyle3", "_linePointAt", "linePointAt", "transformed", "fromValues", "Point", "getPointAtLength", "distance", "getTotalLength", "_this$parsedStyle4", "lineLength", "Path", "PATH", "miterLimit", "d", "EMPTY_PARSED_PATH", "markerMidList", "markerMid", "placeMarkerMid", "_this$getStartTangent", "getStartTangent", "_this$getStartTangent2", "p1", "p2", "_this$getEndTangent", "getEndTangent", "_this$getEndTangent2", "segments", "_segments$i$currentPo", "currentPoint", "getOrCalculatePathTotalLength", "absolutePath", "_getPointAtLength2", "result", "startPoint", "endPoint", "tangent", "startTangent", "endTangent", "Polygon", "POLYGON", "points", "totalLength", "isClosed", "P", "_ref2", "_ref3", "Polyline", "_Polygon", "POLYLINE", "getOrCalculatePolylineTotalLength", "tempLength", "segmentT", "segmentL", "p", "subt", "v", "l", "Rect", "RECT", "Text", "TEXT", "fill", "getComputedTextLength", "_this$parsedStyle$met", "metrics", "maxLineWidth", "getLineBoundingRects", "_this$parsedStyle$met2", "lineMetrics", "isOverflowing", "CustomElementRegistry", "registry", "define", "CSS", "number", "n", "CSSUnitValue", "percent", "px", "em", "rem", "deg", "grad", "turn", "s", "ms", "registerProperty", "definition", "inherits", "interpolable", "initialValue", "syntax", "registerMetadata", "inh", "registerLayout", "clazz", "layoutRegistry", "Document", "AnimationTimeline", "_unused", "initialStyle", "BUILT_IN_PROPERTIES", "isFunction", "documentElement", "createElement", "customElements", "console", "warn", "shape", "createElementNS", "_unused2", "elementsFromBBox", "minX", "minY", "maxX", "maxY", "rBush", "context", "rBushRoot", "rBushNodes", "search", "hitTestList", "displayObject", "_displayObject$parsed", "isVisibilityAffected", "sort", "a", "elementFromPointSync", "_this$defaultView$can", "canvas2Viewport", "viewportX", "viewportY", "_this$defaultView$get", "width", "height", "_this$defaultView$vie", "viewport2Client", "clientX", "clientY", "_this$defaultView$get2", "getRenderingService", "hooks", "pickSync", "topmost", "picked", "_elementFromPoint", "_asyncToGenerator", "_regeneratorRuntime", "mark", "_callee", "_this$defaultView$can2", "_this$defaultView$get3", "_this$defaultView$vie2", "_yield$this$defaultVi", "wrap", "_context", "prev", "next", "abrupt", "pick", "promise", "sent", "stop", "elementFromPoint", "_x", "_x2", "elementsFromPointSync", "_this$defaultView$can3", "_this$defaultView$get4", "_this$defaultView$vie3", "_this$defaultView$get5", "_elementsFromPoint", "_callee2", "_this$defaultView$can4", "_this$defaultView$get6", "_this$defaultView$vie4", "_yield$this$defaultVi2", "_context2", "elementsFromPoint", "_x3", "_x4", "ERROR_MSG_USE_DOCUMENT_ELEMENT", "CullingPlugin", "strategies", "camera", "renderingService", "renderingContext", "cull", "tap", "tag", "_config$future", "unculledEntities", "every", "CULLED", "afterRender", "EventPlugin", "autoPreventDefault", "rootPointerEvent", "FederatedPointerEvent", "rootWheelEvent", "FederatedWheelEvent", "onPointerMove", "nativeEvent", "_this$context$renderi", "canvas", "root", "supportsTouchEvents", "pointerType", "normalizedEvents", "normalizeToPointerEvent", "_iterator", "_createForOfIteratorHelper", "_step", "done", "normalizedEvent", "event", "bootstrapEvent", "eventService", "mapEvent", "err", "e", "f", "setCursor", "cursor", "onClick", "_this$context$renderi2", "_iterator2", "_step2", "setPickHandler", "_this2$context$render", "pointerWheel", "wheelEvent", "normalizeWheelEvent", "pointerDown", "events", "isNormalized", "cancelable", "preventDefault", "_iterator3", "_step3", "federatedEvent", "pointerUp", "$element", "contextService", "isNativeEventFromCanvas", "outside", "_iterator4", "_step4", "pointerMove", "pointerOver", "pointerOut", "click", "pointerCancel", "_iterator5", "_step5", "view", "originalEvent", "pointerId", "isPrimary", "pressure", "tangentialPressure", "tiltX", "tiltY", "twist", "transferMouseData", "_this$context$eventSe", "client2Viewport", "viewport", "_this$context$eventSe2", "viewport2Canvas", "canvasX", "canvasY", "global", "copyFrom", "isTrusted", "startsWith", "replace", "TOUCH_TO_POINTER", "deltaMode", "deltaX", "deltaY", "deltaZ", "_this$context$eventSe3", "_this$context$eventSe4", "srcElement", "timeStamp", "clock", "now", "altKey", "metaKey", "shiftKey", "ctrlKey", "button", "buttons", "client", "movement", "movementX", "movementY", "page", "pageX", "pageY", "screen", "screenX", "screenY", "relatedTarget", "applyCursorStyle", "isTouchEvent", "changedTouches", "touch", "touches", "radiusX", "radiusY", "identifier", "isMouseEvent", "tempEvent", "MOUSE_POINTER_ID", "shape2D", "FrustumCullingStrategy", "_object$parentNode", "frustum", "getFrustum", "parentVisibilityPlaneMask", "computeVisibilityWithPlaneMask", "Mask", "INDETERMINATE", "planes", "OUTSIDE", "parentPlaneMask", "INSIDE", "mask", "isShape2D", "k", "len", "_planes$k", "normal", "dot", "getPositiveFarPoint", "getNegativeFarPoint", "PrepareRendererPlugin", "syncTasks", "isFirstTimeRendering", "syncing", "isFirstTimeRenderingFinished", "_runtime$globalThis$r", "handleAttributeChanged", "dirtify", "handleBoundsChanged", "detail", "affectChildren", "handleMounted", "enableSizeAttenuation", "updateSizeAttenuation", "getCamera", "getZoom", "handleUnmounted", "dirtyToRoot", "init", "addEventListener", "MOUNTED", "UNMOUNTED", "BOUNDS_CHANGED", "removeEventListener", "clear", "ric", "requestIdleCallback", "raf", "bind", "enableRICSyncRTree", "experimentalRICSyncRTree", "endFrame", "syncRTree", "cancelIdleCallback", "ricSyncRTreeId", "syncNode", "update", "center", "halfExtents", "_renderBounds$getMin", "_renderBounds$getMin2", "_renderBounds$getMax", "_renderBounds$getMax2", "isNaN", "size", "bulk", "synced", "sync", "has", "parent", "load", "CanvasEvent", "DEFAULT_CAMERA_Z", "DEFAULT_CAMERA_NEAR", "DEFAULT_CAMERA_FAR", "mountedEvent", "CustomEvent", "ElementEvent", "MOUNTED", "unmountedEvent", "UNMOUNTED", "beforeRenderEvent", "BEFORE_RENDER", "rerenderEvent", "RERENDER", "afterRenderEvent", "AFTER_RENDER", "Canvas", "_EventTarget", "config", "_this", "_classCallCheck", "_callSuper", "Element", "DisplayObject", "inited", "context", "container", "canvas", "renderer", "width", "height", "background", "cursor", "supportsMutipleCanvasesInOneContainer", "_config$cleanUpOnDest", "cleanUpOnDestroy", "offscreenCanvas", "devicePixelRatio", "requestAnimationFrame", "cancelAnimationFrame", "createImage", "supportsTouchEvents", "supportsPointerEvents", "isTouchEvent", "isMouseEvent", "dblClickSpeed", "canvasWidth", "canvasHeight", "dpr", "isBrowser", "window", "Math", "ceil", "getWidth", "getHeight", "customElements", "CustomElementRegistry", "raf", "bind", "runtime", "globalThis", "caf", "Image", "PointerEvent", "event", "TouchEvent", "MouseEvent", "document", "Document", "defaultView", "cleanExistedCanvas", "initRenderingContext", "_objectSpread", "initDefaultCamera", "clipSpaceNearZ", "initRenderer", "_inherits", "_createClass", "key", "value", "mergedConfig", "renderingContext", "root", "documentElement", "unculledEntities", "renderListCurrentFrame", "renderReasons", "Set", "force", "dirty", "_this2", "camera", "CameraContribution", "setType", "CameraType", "EXPLORING", "CameraTrackingMode", "DEFAULT", "setPosition", "setFocalPoint", "setOrthographic", "eventEmitter", "on", "CameraEvent", "UPDATED", "add", "RenderReason", "CAMERA_CHANGED", "enableSizeAttenuation", "getConfig", "updateSizeAttenuation", "zoom", "getCamera", "getZoom", "forEach", "node", "styleValueRegistry", "getRoot", "getContextService", "contextService", "getEventService", "eventService", "getRenderingService", "renderingService", "getRenderingContext", "getStats", "get", "_this3", "readyPromise", "Promise", "resolve", "resolveReadyPromise", "destroy", "_this$getConfig$futur", "cleanUp", "arguments", "length", "undefined", "skipTriggerEvent", "memoize", "clearCache", "enableCancelEventPropagation", "future", "experimentalCancelEventPropagation", "dispatchEvent", "BEFORE_DESTROY", "frameId", "unmountChildren", "rBushRoot", "clear", "AFTER_DESTROY", "clearEventRetain", "currentTarget", "manager", "target", "relatedNode", "attrModifiedEventCache", "insertedEventCache", "removedEventCache", "destroyEventCache", "textService", "changeSize", "resize", "_canvasConfig$future", "canvasConfig", "projectionMode", "getProjectionMode", "CameraProjectionMode", "ORTHOGRAPHIC", "getNear", "getFar", "setAspect", "RESIZE", "appendChild", "child", "index", "insertBefore", "newChild", "refChild", "removeChild", "removeChildren", "destroyChildren", "render", "frame", "_this$getConfig$futur2", "_this4", "detail", "run", "_this5", "tick", "time", "_this6", "firstContentfullPaint", "Error", "RBush", "renderingPlugins", "push", "EventPlugin", "PrepareRendererPlugin", "CullingPlugin", "FrustumCullingStrategy", "loadRendererContainerModule", "ContextService", "RenderingService", "EventService", "init", "initRenderingService", "initAsync", "then", "err", "console", "error", "_this7", "async", "_this7$getConfig$futu", "READY", "RENDERER_CHANGED", "_dirty", "_ref", "call", "mountChildren", "enableAutoRendering", "_this8", "plugins", "getPlugins", "plugin", "setRenderer", "oldRenderer", "_toConsumableArray", "reverse", "setCursor", "applyCursorStyle", "parent", "_this9", "childNodes", "isMutationObserved", "_this$getConfig$futur3", "ownerDocument", "isConnected", "isCustomElement", "disconnectedCallback", "_this0", "isInFragment", "_this$getConfig$futur4", "warn", "nodeName", "c", "connectedCallback", "mountFragment", "client2Viewport", "client", "viewport2Client", "viewport2Canvas", "viewport", "canvas2Viewport", "getPointByClient", "clientX", "clientY", "x", "y", "getClientByPoint", "EventTarget", "AdvancedCamera", "_Camera", "_this", "_classCallCheck", "_len", "arguments", "length", "args", "Array", "_key", "_callSuper", "concat", "landmarks", "_inherits", "_createClass", "key", "value", "rotate", "azimuth", "elevation", "roll", "relElevation", "getAngle", "relAzimuth", "relRoll", "type", "CameraType", "EXPLORING", "rotX", "quat", "setAxisAngle", "create", "deg2rad", "rotateWorld", "rotY", "rotZ", "rotQ", "multiply", "rotMatrix", "mat4", "fromQuat", "translate", "matrix", "distance", "Math", "abs", "computeMatrix", "_getAxes", "ORBITING", "_getPosition", "TRACKING", "_getFocalPoint", "_update", "pan", "tx", "ty", "coords", "createVec3", "pos", "vec3", "clone", "position", "add", "scale", "right", "up", "_setPosition", "triggerUpdate", "dolly", "n", "forward", "step", "dollyingStep", "updatedDistance", "max", "min", "maxDistance", "minDistance", "_getDistance", "focalPoint", "distanceVector", "cancelLandmarkAnimation", "landmarkAnimationID", "undefined", "canvas", "cancelAnimationFrame", "createLandmark", "name", "_position$", "_position$2", "_focalPoint$", "_focalPoint$2", "params", "_params$position", "_params$focalPoint", "zoom", "camera", "runtime", "CameraContribution", "setType", "setPosition", "setFocalPoint", "setRoll", "setZoom", "landmark", "getWorldTransform", "getPosition", "getFocalPoint", "getDistanceVector", "getDistance", "getDollyingStep", "getAzimuth", "getElevation", "getRoll", "getZoom", "push", "gotoLandmark", "_this2", "options", "isString", "find", "l", "_ref", "isNumber", "duration", "_ref$easing", "easing", "_ref$duration", "_ref$easingFunction", "easingFunction", "_ref$onfinish", "onfinish", "_ref$onframe", "onframe", "epsilon", "destPosition", "destFocalPoint", "destZoom", "destRoll", "easingFunc", "EasingFunction", "timeStart", "end", "animate", "timestamp", "elapsed", "t", "interFocalPoint", "interPosition", "interZoom", "interRoll", "lerp", "dist", "requestAnimationFrame", "Camera", "MutationRecord", "type", "target", "_classCallCheck", "addedNodes", "attributeName", "attributeNamespace", "nextSibling", "oldValue", "previousSibling", "removedNodes", "_createClass", "key", "value", "copy", "original", "record", "slice", "uidCounter", "registrationsTable", "WeakMap", "Registration", "observer", "options", "transientObservedNodes", "enqueue", "records", "length", "lastRecord", "recordToReplaceLast", "selectRecord", "scheduleCallback", "addListeners", "addListeners_", "node", "attributes", "addEventListener", "ElementEvent", "ATTR_MODIFIED", "childList", "INSERTED", "subtree", "REMOVED", "removeListeners", "removeListeners_", "removeEventListener", "removeTransientObservers", "forEach", "registrations", "get", "i", "splice", "handleEvent", "e", "stopImmediatePropagation", "name", "attrName", "namespace", "relatedNode", "namespaceURI", "getRecord", "attrChange", "MutationEvent", "ADDITION", "prevValue", "forEachAncestorAndObserverEnqueueRecord", "attributeFilter", "indexOf", "attributeOldValue", "getRecordWithOldValue", "changedNode", "clearRecords", "MutationObserver", "callback", "nodes", "uid", "observe", "characterData", "characterDataOldValue", "SyntaxError", "set", "registration", "push", "disconnect", "_this", "takeRecords", "copyOfRecords", "currentRecord", "recordWithOldValue", "undefined", "recordRepresentsCurrentMutation", "newRecord", "removeTransientObserversFor", "parentNode", "j", "isScheduled", "scheduledObservers", "runtime", "globalThis", "setTimeout", "dispatchCallbacks", "observers", "sort", "o1", "o2", "anyNonEmpty", "queue", "AnimationEvent", "_FederatedEvent", "manager", "target", "currentTime", "timelineTime", "_this", "_classCallCheck", "_callSuper", "type", "bubbles", "currentTarget", "defaultPrevented", "eventPhase", "AT_TARGET", "timeStamp", "Date", "now", "_inherits", "_createClass", "FederatedEvent", "sequenceNumber", "Animation", "effect", "timeline", "_this$effect", "currentTimePending", "_idle", "_paused", "_finishedFlag", "_currentTime", "_playbackRate", "_inTimeline", "animation", "id", "concat", "_inEffect", "update", "_totalDuration", "Number", "getComputedTiming", "endTime", "_holdTime", "oldPlayState", "updatePromises", "key", "get", "_startTime", "playbackRate", "_isFinished", "readyPromise", "animationsWithPromises", "indexOf", "push", "Promise", "resolve", "reject", "resolveReadyPromise", "rejectReadyPromise", "Error", "pending", "_this2", "finishedPromise", "resolveFinishedPromise", "rejectFinishedPromise", "playState", "set", "newTime", "isNaN", "restart", "_this$timeline", "tickCurrentTime", "applyDirtiedAnimation", "value", "oldCurrentTime", "startTime", "ensureAlive", "_this$effect$target", "destroyed", "undefined", "newPlayState", "play", "rewind", "animations", "pause", "finish", "cancel", "_this3", "oncancel", "event", "setTimeout", "reverse", "updatePlaybackRate", "targetAnimations", "_this$effect2", "getAnimations", "markTarget", "unmarkTarget", "index", "splice", "tick", "isAnimationFrame", "fireEvents", "Infinity", "persist", "ERROR_MSG_METHOD_NOT_IMPLEMENTED", "addEventListener", "listener", "options", "removeEventListener", "dispatchEvent", "commitStyles", "_this$effect3", "_this$effect4", "ignoreLimit", "baseTime", "_this4", "onfinish", "onframe", "NEWTON_ITERATIONS", "NEWTON_MIN_SLOPE", "SUBDIVISION_PRECISION", "SUBDIVISION_MAX_ITERATIONS", "kSplineTableSize", "kSampleStepSize", "float32ArraySupported", "Float32Array", "A", "aA1", "aA2", "B", "C", "calcBezier", "aT", "getSlope", "binarySubdivide", "aX", "aA", "aB", "mX1", "mX2", "currentX", "currentT", "i", "Math", "abs", "newtonRaphsonIterate", "aGuessT", "currentSlope", "bezier", "mY1", "mY2", "t", "sampleValues", "Array", "getTForX", "intervalStart", "currentSample", "lastSample", "dist", "guessForT", "initialSlope", "convertToDash", "str", "replace", "letter", "toLowerCase", "charAt", "substring", "Quad", "pow", "Cubic", "Quart", "Quint", "Expo", "Sine", "cos", "PI", "Circ", "sqrt", "Back", "Bounce", "pow2", "b", "Elastic", "params", "arguments", "length", "_params", "_slicedToArray", "_params$", "amplitude", "_params$2", "period", "a", "clamp", "p", "sin", "asin", "Spring", "duration", "_params2", "_params2$", "mass", "_params2$2", "stiffness", "_params2$3", "damping", "_params2$4", "velocity", "w0", "zeta", "wd", "progress", "exp", "Steps", "_ref", "_ref2", "_ref2$", "steps", "trunc", "ceil", "floor", "Bezier", "_params3", "easein", "EaseOut", "ease", "EaseInOut", "EaseOutIn", "EasingFunctions", "stepStart", "stepEnd", "linear", "out", "spring", "complexEasingSyntax", "trim", "getEasingFunction", "x", "Start", "Middle", "End", "step", "count", "pos", "stepSize", "numberString", "cubicBezierRe", "RegExp", "step1Re", "step2Re", "parseEasingFunction", "normalizedEasing", "cubicData", "exec", "apply", "_toConsumableArray", "slice", "map", "step1Data", "step2Data", "start", "middle", "end", "calculateActiveDuration", "timing", "repeatedDuration", "_timing$iterations", "iterations", "PhaseNone", "PhaseBefore", "PhaseAfter", "PhaseActive", "calculatePhase", "activeDuration", "localTime", "min", "delay", "endDelay", "calculateActiveTime", "fillMode", "phase", "calculateOverallProgress", "iterationDuration", "activeTime", "iterationStart", "overallProgress", "calculateSimpleIterationProgress", "simpleIterationProgress", "calculateCurrentIteration", "calculateDirectedProgress", "playbackDirection", "currentIteration", "currentDirection", "d", "calculateIterationProgress", "fill", "directedProgress", "direction", "easingFunction", "convertEffectInput", "keyframes", "propertySpecificKeyframeGroups", "makePropertySpecificKeyframeGroups", "interpolations", "makeInterpolations", "fraction", "filter", "interpolation", "applyFrom", "applyTo", "forEach", "offsetFraction", "startOffset", "localDuration", "endOffset", "scaledLocalTime", "setAttribute", "property", "isNotReservedWord", "member", "propertySpecificKeyframe", "offset", "computedOffset", "easing", "groupName", "startIndex", "endIndex", "propertyInterpolation", "sort", "leftInterpolation", "rightInterpolation", "InterpolationFactory", "from", "to", "convertToString", "f", "interpolated", "interpolate", "isNumber", "left", "right", "metadata", "propertyMetadataCache", "syntax", "propertyHandler", "runtime", "styleValueRegistry", "getPropertySyntax", "parser", "usedLeft", "usedRight", "interpolationArgs", "mixer", "interp", "bool", "isArray", "fromLength", "toLength", "max", "r", "AnimationEffectTiming", "_easing", "convertToArrayForm", "effectInput", "normalizedEffectInput", "values", "numKeyframes", "keyframe", "composite", "normalizeKeyframes", "originalKeyframe", "memberValue", "isFinite", "everyFrameHasOffset", "previousOffset", "isNil", "TypeError", "spaceKeyframes", "_keyframes$offset", "_keyframes", "_keyframes$0$offset", "previousIndex", "j", "fills", "split", "directions", "makeTiming", "timingInput", "forGroup", "Object", "keys", "normalizeTimingInput", "numericTimingToObject", "KeyframeEffect", "iterationComposite", "normalizedKeyframes", "Proxy", "globalThis", "computedTiming", "prop", "applyInterpolations", "timeFraction", "getKeyframes", "setKeyframes", "getTiming", "updateTiming", "name", "compareAnimations", "leftAnimation", "rightAnimation", "AnimationTimeline", "document", "ticking", "timelineTicking", "hasRestartedThisFrame", "inTick", "pendingEffects", "rafId", "rafCallbacks", "webAnimationsNextTick", "discardAnimations", "requestAnimationFrame", "processRafCallbacks", "processing", "entry", "applyPendingEffects", "isTicking", "restartWebAnimationsNextTick", "inactiveAnimations", "destroy", "defaultView", "cancelAnimationFrame", "frameId", "updateAnimationsPromises", "rAF", "updatingAnimations", "_this$pendingEffects", "_this$pendingEffects2", "newPendingClears", "newPendingEffects", "activeAnimations", "_needsTick", "alive", "EasingFunction", "generatePath", "context", "parsedStyle", "_parsedStyle$cx", "cx", "_parsedStyle$cy", "cy", "r", "arc", "Math", "PI", "rx", "ry", "ellipse", "scaleX", "scaleY", "save", "scale", "x1", "y1", "x2", "y2", "markerStart", "markerEnd", "markerStartOffset", "markerEndOffset", "startOffsetX", "startOffsetY", "endOffsetX", "endOffsetY", "rad", "x", "y", "isDisplayObject", "atan2", "cos", "sin", "moveTo", "lineTo", "_parsedStyle$d", "d", "absolutePath", "segments", "_getStartTangent", "parentNode", "getStartTangent", "_getStartTangent2", "_slicedToArray", "p1", "p2", "_getEndTangent", "getEndTangent", "_getEndTangent2", "i", "length", "params", "command", "nextSegment", "useStartOffset", "useEndOffset", "_ref", "_ref2", "startOffsetXTemp", "startOffsetYTemp", "_ref3", "_ref4", "endOffsetXTemp", "endOffsetYTemp", "quadraticCurveTo", "bezierCurveTo", "arcParams", "startAngle", "endAngle", "xRotation", "sweepFlag", "translate", "rotate", "closePath", "points", "point", "_parsedStyle$x", "_parsedStyle$y", "radius", "width", "height", "w", "h", "hasRadius", "some", "rect", "signX", "signY", "_radius$map", "map", "clamp", "min", "abs", "_radius$map2", "tlr", "trr", "brr", "blr", "Plugin", "_AbstractRendererPlug", "_this", "_classCallCheck", "_len", "arguments", "args", "Array", "_key", "_callSuper", "concat", "name", "_inherits", "_createClass", "key", "value", "init", "_pathGeneratorFactory", "pathGeneratorFactory", "_defineProperty", "Shape", "CIRCLE", "CirclePath", "ELLIPSE", "EllipsePath", "RECT", "RectPath", "LINE", "LinePath", "POLYLINE", "PolylinePath", "POLYGON", "PolygonPath", "PATH", "PathPath", "TEXT", "undefined", "GROUP", "IMAGE", "HTML", "MESH", "FRAGMENT", "destroy", "AbstractRendererPlugin", "tmpVec3a", "vec3", "create", "tmpVec3b", "tmpVec3c", "tmpMat4", "mat4", "CanvasPickerPlugin", "_this", "_classCallCheck", "isHit", "displayObject", "position", "worldTransform", "isClipPath", "pick", "context", "pointInPathPickerFactory", "nodeName", "invertWorldMat", "invert", "localPosition", "transformMat4", "set", "Point", "isPointInPath", "runtime", "offscreenCanvasCreator", "getOrCreateContext", "config", "offscreenCanvas", "generatePath", "pathGeneratorFactory", "beginPath", "parsedStyle", "closePath", "x", "y", "_createClass", "key", "value", "apply", "_renderingContext$roo", "_this2", "renderingService", "renderingContext", "document", "root", "ownerDocument", "hooks", "tapPromise", "tag", "_ref", "_asyncToGenerator", "_regeneratorRuntime", "mark", "_callee", "result", "wrap", "_context", "prev", "next", "abrupt", "stop", "_x", "arguments", "pickSync", "tap", "topmost", "_result$position", "hitTestList", "elementsFromBBox", "pickedDisplayObjects", "_iterator", "_createForOfIteratorHelper", "_step", "s", "n", "done", "getWorldTransform", "isHitOriginShape", "clipped", "findClosestClipPathTarget", "clipPath", "isHitClipPath", "picked", "push", "err", "e", "f", "_ref$cx", "cx", "_ref$cy", "cy", "r", "fill", "stroke", "_ref$lineWidth", "lineWidth", "_ref$increasedLineWid", "increasedLineWidthForHitTesting", "_ref$pointerEvents", "pointerEvents", "halfLineWidth", "absDistance", "distance", "_isFillOrStrokeAffect", "isFillOrStrokeAffected", "_isFillOrStrokeAffect2", "_slicedToArray", "hasFill", "hasStroke", "ellipseDistance", "squareX", "squareY", "rx", "ry", "halfLineWith", "inBox", "minX", "minY", "width", "height", "inRect", "halfWidth", "inArc", "startAngle", "endAngle", "angle", "Math", "atan2", "PI", "point", "cos", "sin", "inLine", "x1", "y1", "x2", "y2", "min", "maxX", "max", "maxY", "linePointToLine", "inPolyline", "points", "isClose", "count", "length", "i", "first", "last", "tolerance", "dcmp", "abs", "onSegment", "p1", "p2", "q", "inPolygon", "inPolygons", "polygons", "isPointInStroke", "segments", "px", "py", "segment", "currentPoint", "params", "prePoint", "box", "command", "qDistance", "quadPointDistance", "cDistance", "cubicPointDistance", "cubicParams", "arcToCubic", "undefined", "args", "prePointInCubic", "renderingPluginContext", "d", "hasArc", "polylines", "totalLength", "getOrCalculatePathTotalLength", "radius", "_ref$x", "_ref$y", "hasRadius", "some", "lineWidthForHitTesting", "inRectWithRadius", "map", "clamp", "radiusArray", "_radiusArray", "tlr", "trr", "brr", "blr", "canvas", "getOrCreateCanvas", "willReadFrequently", "defaultStyleRendererFactory", "Shape", "IMAGE", "render", "_objectSpread", "imagedata", "getImageData", "data", "every", "component", "bounds", "getGeometryBounds", "Plugin", "_AbstractRendererPlug", "_len", "Array", "_key", "_callSuper", "concat", "name", "_inherits", "init", "_pointInPathPickerFac", "_defineProperty", "CIRCLE", "CirclePicker", "ELLIPSE", "EllipsePicker", "RECT", "RectPicker", "LINE", "LinePicker", "POLYLINE", "PolylinePicker", "POLYGON", "PolygonPicker", "PATH", "PathPicker", "TEXT", "TextPicker", "GROUP", "ImagePicker", "HTML", "MESH", "addRenderingPlugin", "destroy", "removeAllRenderingPlugins", "AbstractRendererPlugin", "id", "RefCountCache", "_classCallCheck", "cacheStore", "Map", "_createClass", "key", "value", "onRefAdded", "ref", "has", "put", "item", "set", "counter", "Set", "entity", "get", "cacheItem", "add", "update", "_objectSpread", "release", "size", "releaseRef", "_this", "Array", "from", "keys", "forEach", "getSize", "clear", "tasks", "nextFrameTasks", "ImageSlicer", "stop", "api", "arguments", "length", "undefined", "rafId", "cancelAnimationFrame", "executeTask", "task", "splice", "TASK_NUM_PER_FRAME", "requestAnimationFrame", "sliceImage", "image", "sliceWidth", "sliceHeight", "rerender", "overlap", "imageWidth", "naturalWidth", "width", "imageHeight", "naturalHeight", "height", "strideW", "strideH", "gridCols", "Math", "ceil", "gridRows", "result", "tileSize", "gridSize", "tiles", "fill", "map", "_loop", "row", "_loop2", "col", "push", "startX", "startY", "_ref", "min", "tempSliceWidth", "tempSliceHeight", "sliceCanvas", "createCanvas", "sliceCtx", "getContext", "drawImage", "x", "y", "tileX", "tileY", "data", "IMAGE_CACHE", "addEventListener", "ElementEvent", "DESTROY", "once", "ImagePool", "context", "runtime", "gradientCache", "patternCache", "getImageSync", "src", "callback", "imageSource", "isString", "imageCache", "img", "complete", "getOrCreateImage", "then", "cache", "reason", "console", "error", "_this2", "calculateImageTileSize", "Promise", "resolve", "reject", "ev", "config", "createImage", "onload", "onerror", "crossOrigin", "_createDownSampledImage", "_asyncToGenerator", "_regeneratorRuntime", "mark", "_callee", "enableLargeImageOptimization", "_ref$maxDownSampledIm", "maxDownSampledImageSize", "_ref$downSamplingRate", "downSamplingRateThreshold", "createImageBitmapFunc", "_imageCache$size", "originWidth", "originHeight", "resizedImage", "downSamplingRate", "updateCache", "wrap", "_context", "prev", "next", "sent", "abrupt", "globalThis", "createImageBitmap", "_slicedToArray", "max", "resizeWidth", "resizeHeight", "downSampled", "createDownSampledImage", "_x", "_x2", "apply", "_createImageTiles", "_callee2", "_ref$ownerDocument$de", "_context2", "ownerDocument", "defaultView", "OffscreenCanvasCreator", "createImageTiles", "_x3", "_x4", "_x5", "_x6", "releaseImage", "releaseImageRef", "getOrCreatePatternSync", "object", "pattern", "$offscreenCanvas", "dpr", "patternKey", "generatePatternKey", "repetition", "transform", "needScaleWithDPR", "canvasPattern", "createPattern", "mat", "parsedTransformToMat4", "parseTransform", "DisplayObject", "mat4", "identity", "create", "scale", "setTransform", "a", "b", "c", "d", "e", "f", "getOrCreateGradient", "params", "generateGradientKey", "type", "steps", "angle", "cx", "cy", "gradient", "GradientType", "LinearGradient", "_computeLinearGradien", "computeLinearGradient", "x1", "y1", "x2", "y2", "createLinearGradient", "RadialGradient", "_computeRadialGradien", "computeRadialGradient", "r", "createRadialGradient", "_ref2", "offset", "color", "unit", "UnitType", "kPercentage", "_gradient", "addColorStop", "toString", "concat", "_ref3", "join", "nodeName", "isSupportTile", "rows", "cols", "LoadImagePlugin", "renderingService", "renderingContext", "imagePool", "canvas", "root", "calculateWithAspectRatio", "_object$parsedStyle", "parsedStyle", "setAttribute", "handleMounted", "target", "attributes", "Shape", "IMAGE", "keepAspectRatio", "_ref$img", "renderable", "dirty", "dirtify", "handleAttributeChanged", "attrName", "prevValue", "newValue", "_ref2$img", "hooks", "init", "tap", "tag", "MOUNTED", "ATTR_MODIFIED", "destroy", "removeEventListener", "Plugin", "_AbstractRendererPlug", "_len", "args", "_key", "_callSuper", "name", "_inherits", "addRenderingPlugin", "removeAllRenderingPlugins", "AbstractRendererPlugin", "_renderState", "_classPrivateFieldLooseKey", "CanvasRendererPlugin", "canvasRendererPluginOptions", "_classCallCheck", "removedRBushNodeAABBs", "renderQueue", "Object", "defineProperty", "writable", "value", "restoreStack", "prevObject", "currentContext", "Map", "clearFullScreenLastFrame", "clearFullScreen", "vpMatrix", "mat4", "create", "dprMatrix", "tmpMat4", "vec3a", "vec3", "vec3b", "vec3c", "vec3d", "_createClass", "key", "apply", "context", "runtime", "_this", "_this$context", "config", "camera", "renderingService", "renderingContext", "rBushRoot", "pathGeneratorFactory", "enableRenderingOptimization", "renderer", "getConfig", "enableDirtyCheck", "enableDirtyRectangleRendering", "rBush", "contextService", "canvas", "root", "ownerDocument", "defaultView", "handleUnmounted", "e", "object", "target", "rBushNode", "aabb", "push", "handleCulled", "hooks", "init", "tap", "tag", "addEventListener", "ElementEvent", "UNMOUNTED", "CULLED", "dpr", "getDPR", "width", "height", "getContext", "clearRect", "background", "destroy", "removeEventListener", "_classPrivateFieldLooseBase", "beforeDraw", "_canvas$context$rende", "_this$canvasRendererP", "dirtyObjectNumThreshold", "dirtyObjectRatioThreshold", "_renderingService$get", "getStats", "total", "rendered", "ratio", "renderingPlugins", "isFirstTimeRenderingFinished", "disableDirtyRectangleRendering", "resetTransform", "setTransform", "renderByZIndex", "stack", "length", "_currentObject$sortab", "currentObject", "pop", "isVisible", "isCulled", "renderDisplayObjectOptimized", "renderDisplayObject", "objects", "sortable", "sorted", "childNodes", "i", "endFrame", "clear", "fromScaling", "multiply", "getOrthoMatrix", "save", "restore", "dirtyRenderBounds", "safeMergeAABB", "mergeDirtyAABBs", "concat", "_toConsumableArray", "map", "_ref", "minX", "minY", "maxX", "maxY", "AABB", "setMinMax", "isEmpty", "dirtyRect", "convertAABB2Rect", "x", "y", "tl", "transformMat4", "tr", "bl", "br", "minx", "Math", "min", "miny", "maxx", "max", "maxy", "ix", "floor", "iy", "iwidth", "ceil", "iheight", "beginPath", "rect", "clip", "_config$renderer$getC", "enableDirtyRectangleRenderingDebug", "dispatchEvent", "CustomEvent", "CanvasEvent", "DIRTY_RECTANGLE", "dirtyObjects", "searchDirtyObjects", "sort", "a", "b", "renderOrder", "forEach", "saveDirtyAABB", "render", "fillStyle", "fillRect", "canvasContext", "renderState", "nodeName", "updateTransform", "clipDraw", "styleRenderer", "styleRendererFactory", "generatePath", "clipPath", "parsedStyle", "exactEquals", "getWorldTransform", "applyWorldTransform", "closePath", "forceUpdateStyle", "prevNodeName", "Shape", "TEXT", "IMAGE", "applyStyleToContext", "LINE", "PATH", "POLYLINE", "drawToContext", "dirty", "parent", "compareDocumentPosition", "Node", "DOCUMENT_POSITION_CONTAINS", "applyAttributesToContext", "_ref2", "stroke", "fill", "opacity", "lineDash", "lineDashOffset", "setLineDash", "isNil", "globalAlpha", "Array", "isArray", "isNone", "strokeStyle", "attributes", "getMin", "getMax", "renderBounds", "getRenderBounds", "add", "renderable", "dirtyRectangle", "_dirtyRectangle$getMi", "_dirtyRectangle$getMi2", "_slicedToArray", "_dirtyRectangle$getMa", "_dirtyRectangle$getMa2", "rBushNodes", "search", "_ref3", "displayObject", "update", "center", "halfExtents", "matrix", "copy", "getLocalTransform", "merged", "_len", "arguments", "aabbs", "_key", "getPattern", "pattern", "plugin", "imagePool", "$offscreenCanvas", "image", "_parsedStyle", "offscreenCanvas", "offscreenCanvasCreator", "getOrCreateCanvas", "offscreenCanvasContext", "getOrCreateContext", "canvasPattern", "getOrCreatePatternSync", "getGeometryBounds", "dirtify", "getColor", "parsedColor", "color", "type", "GradientType", "LinearGradient", "RadialGradient", "bounds", "getOrCreateGradient", "_objectSpread", "SHADOW_NUMBER_STYLE", "STROKE_STYLE", "DEFAULT_STYLE", "shadowBlur", "shadowOffsetX", "shadowOffsetY", "shadowColor", "filter", "globalCompositeOperation", "strokeOpacity", "lineWidth", "lineCap", "lineJoin", "miterLimit", "fillOpacity", "defaultParsedStyle", "updateContextIfNotHitCache", "cache", "prevValue", "has", "get", "set", "OptimizedDefaultRenderer", "applyCommonStyleToContext", "forceUpdate", "prevStyle", "style", "blend", "applyStrokeFillStyleToContext", "_style$lineWidth", "hasFill", "hasStroke", "styleName", "applyShadowAndFilterStyleToContext", "hasShadow", "toString", "clearShadowAndFilterStyleForContext", "hasFilter", "onlyClearShadowFilter", "undefined", "oldFilter", "indexOf", "replace", "trim", "fillToContext", "_object$parsedStyle", "fillRule", "resetStyle", "gradient", "isPattern", "strokeToContext", "_this2", "_style$fill", "_style$opacity", "_style$fillOpacity", "_style$strokeOpacity", "_style$lineWidth2", "isInnerShadow", "shadowType", "isFillTransparent", "alpha", "shouldDrawShadowWithStroke", "originGlobalAlpha", "updateOpacity", "clearShadowAndFilter", "prevOpacity", "originBlend", "DefaultRenderer", "_OptimizedDefaultRend", "_callSuper", "_inherits", "_parsedStyle$opacity", "_parsedStyle$fillOpac", "_parsedStyle$strokeOp", "_parsedStyle$lineWidt", "setShadowAndFilter", "applyFill", "applyStroke", "skipFill", "skipStroke", "calculateOverlapRect", "rect1", "rect2", "_rect", "x1", "y1", "w1", "h1", "_rect2", "x2", "y2", "w2", "h2", "overlapLeft", "overlapTop", "overlapRight", "overlapBottom", "transformRect", "ImageRenderer", "_DefaultRenderer", "renderDownSampled", "data", "src", "imageCache", "downSampled", "createDownSampledImage", "then", "reason", "console", "error", "drawImage", "drawRect", "renderTile", "imageRect", "originalSize", "size", "_context$getTransform", "getTransform", "c", "d", "f", "gridSize", "createImageTiles", "scaleToOrigin", "scaledTileSize", "tileSize", "startTileX", "endTileX", "startTileY", "endTileY", "tileY", "tileX", "item", "tiles", "tileRect", "_parsedStyle$x", "_parsedStyle$y", "getImageSync", "img", "iw", "ih", "_object$ownerDocument", "getContextService", "getDomElement", "viewWidth", "viewHeight", "currentTransform", "transformMatrix", "fromValues", "enableLargeImageOptimization", "renderFull", "sizeOfOrigin", "downSamplingRate", "ImagePool", "isSupportTile", "_unused", "TextRenderer", "getBounds", "_parsedStyle$textAlig", "textAlign", "_parsedStyle$textBase", "textBaseline", "_parsedStyle$lineJoin", "_parsedStyle$miterLim", "_parsedStyle$letterSp", "letterSpacing", "metrics", "dx", "dy", "font", "lines", "lineHeight", "lineMetrics", "formattedTextBaseline", "linePositionY", "offsetX", "linePositionX", "drawLetterSpacing", "text", "isStroke", "strokeText", "fillText", "currentTextAlign", "currentPosition", "stringArray", "from", "previousWidth", "measureText", "currentWidth", "currentChar", "substring", "currentGlobalAlpha", "applyOpacity", "Plugin", "_AbstractRendererPlug", "options", "name", "_defaultStyleRenderer", "defaultRenderer", "defaultStyleRendererFactory", "_defineProperty", "CIRCLE", "ELLIPSE", "RECT", "POLYGON", "GROUP", "HTML", "MESH", "FRAGMENT", "addRenderingPlugin", "removeAllRenderingPlugins", "AbstractRendererPlugin", "DOMInteractionPlugin", "_classCallCheck", "_createClass", "key", "value", "apply", "context", "runtime", "_this", "renderingService", "renderingContext", "config", "canvas", "root", "ownerDocument", "defaultView", "onPointerMove", "ev", "hooks", "pointerMove", "call", "onPointerUp", "pointerUp", "onPointerDown", "pointerDown", "onPointerOver", "pointerOver", "onPointerOut", "pointerOut", "onPointerCancel", "pointerCancel", "onPointerWheel", "pointerWheel", "onClick", "click", "addPointerEventListener", "$el", "globalThis", "document", "addEventListener", "addTouchEventListener", "addMouseEventListener", "removePointerEventListener", "removeEventListener", "removeTouchEventListener", "removeMouseEventListener", "init", "tap", "tag", "contextService", "getDomElement", "navigator", "msPointerEnabled", "style", "msContentZooming", "msTouchAction", "supportsPointerEvents", "touchAction", "supportsTouchEvents", "useNativeClickEvent", "passive", "capture", "destroy", "Plugin", "_AbstractRendererPlug", "_len", "arguments", "length", "args", "Array", "_key", "_callSuper", "concat", "name", "_inherits", "addRenderingPlugin", "removeAllRenderingPlugins", "AbstractRendererPlugin", "CANVAS_CAMERA_ID", "HTMLRenderingPlugin", "_classCallCheck", "displayObjectHTMLElementMap", "WeakMap", "_createClass", "key", "value", "joinTransformMatrix", "matrix", "offset", "arguments", "length", "undefined", "concat", "join", "apply", "context", "runtime", "_this", "camera", "renderingContext", "renderingService", "canvas", "root", "ownerDocument", "defaultView", "nativeHTMLMap", "eventService", "setTransform", "object", "$el", "style", "transform", "getWorldTransform", "getOrigin", "handleMounted", "e", "target", "nodeName", "Shape", "HTML", "$camera", "createCamera", "getOrCreateEl", "appendChild", "Object", "keys", "attributes", "forEach", "name", "updateAttribute", "set", "handleUnmounted", "remove", "handleAttributeChanged", "attrName", "handleBoundsChanged", "nodes", "FRAGMENT", "childNodes", "node", "handleCanvasResize", "_this$context$config", "config", "width", "height", "parentElement", "hooks", "init", "tap", "tag", "addEventListener", "CanvasEvent", "RESIZE", "ElementEvent", "MOUNTED", "UNMOUNTED", "ATTR_MODIFIED", "BOUNDS_CHANGED", "endFrame", "renderReasons", "has", "RenderReason", "CAMERA_CHANGED", "getOrthoMatrix", "destroy", "removeEventListener", "_this$context$config2", "doc", "document", "$canvas", "contextService", "getDomElement", "$container", "parentNode", "cameraId", "$existedCamera", "querySelector", "$cameraContainer", "createElement", "overflow", "pointerEvents", "position", "left", "top", "id", "offsetLeft", "offsetTop", "transformOrigin", "$existedElement", "get", "parsedStyle", "setAttribute", "className", "innerHTML", "isString", "x", "y", "buildCSSText", "isNumber", "toString", "zIndex", "visibility", "_object$parsedStyle$p", "opacity", "fill", "color", "isCSSRGB", "isNone", "getAttribute", "Array", "isArray", "isPattern", "background", "stroke", "borderColor", "lineWidth", "filter", "isNil", "Plugin", "_AbstractRendererPlug", "_len", "args", "_key", "_callSuper", "_inherits", "addRenderingPlugin", "removeAllRenderingPlugins", "AbstractRendererPlugin", "Canvas2DContextService", "context", "_classCallCheck", "renderingContext", "canvasConfig", "config", "_createClass", "key", "value", "init", "_this$canvasConfig", "container", "canvas", "$canvas", "parentElement", "appendChild", "$container", "isString", "document", "getElementById", "createElement", "style", "position", "getContext", "resize", "width", "height", "getDomElement", "getDPR", "dpr", "getBoundingClientRect", "destroy", "parentNode", "removeChild", "devicePixelRatio", "setDOMSize", "renderReasons", "add", "RenderReason", "CAMERA_CHANGED", "applyCursorStyle", "cursor", "_toDataURL", "_asyncToGenerator", "_regeneratorRuntime", "mark", "_callee", "options", "type", "encoderOptions", "_args", "arguments", "wrap", "_context", "prev", "next", "length", "undefined", "abrupt", "toDataURL", "stop", "apply", "ContextRegisterPlugin", "_AbstractRendererPlug", "_this", "_len", "args", "Array", "_key", "_callSuper", "concat", "name", "_inherits", "ContextService", "AbstractRendererPlugin", "Renderer", "_AbstractRenderer", "registerPlugin", "Plugin", "AbstractRenderer", "EventEmitter", "_this", "length", "_a", "x", "y", "_", "d", "x", "y", "add", "data", "x", "y", "data", "_", "find_default", "x", "y", "data", "x2", "y2", "x3", "y3", "d", "remove_default", "d", "x", "y", "data", "size", "d", "_", "d", "_", "x", "y", "copy", "find_default", "remove_default", "x", "random", "d", "random", "data", "x", "y", "_", "d", "find", "id", "distance", "random", "x", "y", "m", "i", "_", "s", "x", "d", "y", "step", "random", "tick", "angle", "_", "random", "_", "x", "y", "node", "strength", "c", "x2", "x", "y", "_", "x_default", "x", "_", "y_default", "y", "_", "deg", "rad", "BBox", "x", "y", "str", "_a", "MAX_MIX_LEVEL", "dist", "_a", "x", "x", "y", "_a", "OffscreenGroup", "_this", "group", "Text", "_a", "Text", "x2", "y2", "x", "y", "_a", "_a", "x2", "y2", "groupBy", "show", "x", "c", "interpolate", "_a", "_a", "interpolate", "index", "_a", "x", "y", "_a", "direction", "width", "height", "_b", "x", "y", "box", "size", "scale", "s", "add", "sub", "min", "max", "distance", "normalize", "len", "rotate", "angle", "_a", "x", "y", "vertical", "keys", "smooth", "min", "max", "_a", "point", "len", "sub", "scale", "distance", "add", "data", "size", "step", "size", "_a", "scale", "Selection", "data", "document", "_a", "_this", "d", "id", "update", "i", "transition", "Text", "Image", "len", "max", "min", "_a", "x2", "y2", "_a", "x2", "y2", "_a", "_a", "invert", "x", "y", "_a", "transpose", "m", "_a", "x", "str", "parser", "_a", "s", "match", "keys", "_a", "a", "Component", "_this", "_a", "attr", "animate", "x", "y", "transform", "CLASS_NAMES", "attr", "_a", "distance", "data", "animate", "d", "index", "update", "_this", "getColor", "idx", "_", "Grid", "_a", "data", "filter", "attr", "_a", "normalize", "angle", "direction", "vertical", "attr", "_a", "angle", "x2", "y2", "animate", "d", "line", "update", "_this", "data", "x", "y", "getLinePath", "arrow", "attr", "data", "_a", "index", "x", "y", "scale", "angle", "animate", "grid", "update", "Bounds", "x2", "y2", "radian", "x", "y", "_a", "angle", "_a", "x", "y", "a", "line", "point", "direction", "a", "c", "x2", "y2", "_a", "x2", "y2", "box", "line", "a", "line", "attr", "_a", "size", "scale", "str", "attr", "_a", "step", "min", "max", "d", "allowedLength", "_a", "attr", "d", "distance", "last", "attr", "angle", "index", "rotate", "attr", "_a", "lines", "index", "maxLines", "attr", "_a", "str", "angle", "getAngle", "_a", "x2", "y2", "dot", "rotate", "attr", "group", "data", "index", "add", "scale", "x", "y", "labelFormatter", "len", "transform", "animate", "d", "update", "_this", "attr", "_a", "index", "data", "x2", "y2", "formatter", "tick", "group", "animate", "x", "y", "d", "update", "_this", "attr", "_a", "x", "y", "direction", "normalize", "scale", "group", "animate", "transform", "d", "update", "data", "group", "Axis", "_this", "animate", "_a", "x", "y", "cross", "dot", "getType", "Marker", "_a", "x", "y", "size", "group", "cross", "dot", "step", "min", "x", "y", "min", "max", "_a", "a", "CLASSNAME_SUFFIX_MAP", "CLASS_NAMES", "Handle", "_this", "_a", "group", "CLASSNAME_SUFFIX_MAP", "formatter", "_b", "x", "y", "CLASS_NAMES", "CLASS_NAMES", "_a", "x", "y", "Title", "_b", "_c", "_d", "_this", "group", "CLASSNAME_SUFFIX_MAP", "CLASS_NAMES", "Navigator", "_this", "_a", "transpose", "x", "y", "index", "formatter", "group", "size", "CLASSNAME_SUFFIX_MAP", "_a", "x", "y", "id", "div", "Poptip", "_this", "_a", "x", "y", "id", "styleStr", "r", "_b", "CLASS_NAMES", "group", "CategoryItem", "_this", "_a", "focus", "CLASSNAME_SUFFIX_MAP", "scale", "x", "y", "CLASS_NAMES", "CategoryItems", "_this", "_a", "data", "focus", "d", "index", "id", "_c", "row", "x", "y", "_b", "_e", "c", "_d", "a", "CLASSNAME_SUFFIX_MAP", "update", "groupBy", "HtmlLegend", "Category", "_a", "CLASS_NAMES", "data", "x", "y", "update", "x", "a", "_", "a", "x", "x", "step", "error", "min", "max", "d", "step", "adjust", "step", "date", "floor", "d", "ceil", "month", "year", "step", "month", "year", "x", "rangeOf", "normalizeDomain", "transform", "clamp", "round", "normalize", "interpolate", "m", "hsl", "s", "a", "color", "colorString", "a", "b", "map", "d", "x", "y", "normalize", "min", "d", "splice", "round", "flex", "step", "_a", "_", "x", "step", "normalize", "interpolate", "len", "x", "min", "max", "transform", "clamp", "round", "len", "v", "index", "_a", "len", "normalize", "Sequential", "rangeOf", "normalizeDomain", "x", "Diverging", "__decorate", "CLASS_NAMES", "Indicator", "_this", "_a", "min", "max", "formatter", "x", "y", "index", "size", "len", "visibility", "CLASS_NAMES", "CLASS_NAMES", "HandleIcon", "x", "y", "_a", "size", "index", "x2", "y2", "Handle", "_this", "transform", "group", "update", "color", "c", "_a", "CLASS_NAMES", "attr", "size", "length", "_a", "getColor", "color", "len", "_", "index", "c", "x", "y", "CLASSNAME_SUFFIX_MAP", "Ribbon", "data", "d", "Continuous", "_this", "_a", "value", "x", "y", "CLASS_NAMES", "group", "min", "max", "scale", "a", "update", "size", "length", "color", "CLASSNAME_SUFFIX_MAP", "Handle", "line", "markerClassName", "index", "id", "labelFormatter", "step", "CLASS_NAME", "_a", "Tooltip", "_this", "_a", "CLASS_NAME", "data", "color", "index", "x", "y", "_b", "transition", "Columns", "_a", "_this", "x", "y", "update", "attr", "Lines", "_a", "_this", "x", "y", "attr", "update", "data", "x", "y", "max", "min", "_a", "line", "point", "len", "smooth", "A", "data", "_", "_a", "Sparkline", "data", "y", "_a", "y2", "_this", "smooth", "x", "line", "scale", "getShape", "type", "update", "index", "color", "Slider", "_this", "_a", "x", "y", "attr", "animate", "CLASS_NAMES", "index", "group", "data", "type", "d", "Handle", "update", "min", "max", "formatter", "size", "Text", "Option", "_this", "_a", "Select", "_this", "_a", "x", "y", "update", "index", "IconBase", "_this", "size", "_a", "x", "y", "size", "color", "Reset", "_a", "angle", "x2", "y2", "x", "y", "Backward", "_a", "x", "y", "color", "size", "Forward", "_a", "x", "y", "color", "size", "Play", "_a", "x", "y", "color", "size", "Pause", "_a", "x", "y", "color", "size", "Range", "_a", "x", "y", "color", "size", "Value", "_a", "x", "y", "color", "size", "size", "LineChart", "_a", "x", "y", "color", "_b", "px", "BarChart", "data", "_a", "x", "y", "color", "size", "_b", "px", "index", "Split", "_this", "_a", "x", "y", "color", "size", "SpeedSelect", "_this", "_a", "x", "y", "ToggleIcon", "_this", "_a", "update", "PlayPause", "_this", "SelectionType", "_this", "ChartType", "_this", "Controller", "_this", "_a", "x", "y", "index", "TimeModeHandle", "_this", "ChartModeHandle", "_a", "x", "y", "Timebar", "_this", "values", "_a", "data", "a", "x", "y", "length", "index", "type", "isEqual", "direction", "x", "y", "Tag", "_a", "group", "Text", "Button", "_this", "_a", "size", "x", "y", "attr", "Breadcrumb", "x", "y", "_a", "i", "Text", "Scrollbar", "_this", "_a", "x", "y", "min", "max", "animate", "SIZE_STYLE", "size", "_a", "Switch", "_this", "group", "SIZE_STYLE", "color", "max", "min", "CrosshairBase", "_a", "x", "y", "group", "LineCrosshair", "_a", "x", "y", "x2", "y2", "CircleCrosshair", "_a", "x", "y", "PolygonCrosshair", "_a", "a", "rotate", "x", "y", "index", "_b", "scale", "Checkbox", "group", "_a", "x", "y", "Layout", "_this", "_a", "x", "y", "index", "DragndropPlugin", "dragndropPluginOptions", "_classCallCheck", "_createClass", "key", "value", "apply", "context", "_this", "renderingService", "renderingContext", "document", "root", "ownerDocument", "canvas", "defaultView", "handlePointerdown", "event", "target", "isDocument", "draggableEventTarget", "isDocumentDraggable", "closest", "dragstartTriggered", "dragstartTimeStamp", "timeStamp", "dragstartClientCoordinates", "clientX", "clientY", "currentDroppable", "lastDragClientCoordinates", "handlePointermove", "_ref", "_asyncToGenerator", "_regeneratorRuntime", "mark", "_callee", "timeElapsed", "distanceMoved", "point", "elementsBelow", "elementBelow", "droppableBelow", "wrap", "_context", "prev", "next", "distanceSquareRoot", "dragstartTimeThreshold", "dragstartDistanceThreshold", "abrupt", "type", "dispatchEvent", "dx", "dy", "overlap", "canvasX", "canvasY", "getBounds", "center", "elementsFromPoint", "sent", "indexOf", "isDocumentDroppable", "stop", "_x", "arguments", "addEventListener", "stopDragging", "originalPointerUpEvent", "detail", "preventClick", "clone", "removeEventListener", "once", "hooks", "init", "tap", "tag", "destroy", "Plugin", "_AbstractRendererPlug", "options", "length", "undefined", "_callSuper", "name", "_inherits", "addRenderingPlugin", "_objectSpread", "removeAllRenderingPlugins", "setOptions", "Object", "assign", "plugins", "AbstractRendererPlugin"]
}
