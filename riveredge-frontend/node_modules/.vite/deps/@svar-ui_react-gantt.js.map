{
  "version": 3,
  "sources": ["../../@svar-ui/lib-dom/src/locate.ts", "../../@svar-ui/lib-dom/src/env.ts", "../../@svar-ui/lib-dom/src/delegateClick.ts", "../../@svar-ui/lib-dom/src/array.ts", "../../@svar-ui/lib-dom/src/clickOutside.ts", "../../@svar-ui/lib-dom/src/positioning.ts", "../../@svar-ui/lib-dom/src/common.ts", "../../@svar-ui/lib-dom/src/hotkeys.ts", "../../@svar-ui/lib-dom/src/dates.ts", "../../@svar-ui/lib-dom/src/locale.ts", "../../@svar-ui/lib-dom/src/salesforce.ts", "../../@svar-ui/lib-react/src/hooks.ts", "../../@svar-ui/lib-react/src/helpers.ts", "../../@svar-ui/lib-react/src/writable.ts", "../../@svar-ui/lib-react/src/dom.ts", "../../@svar-ui/core-locales/locales/en.js", "../../@svar-ui/react-core/src/context.js", "../../@svar-ui/react-core/src/components/helpers/getInputId.js", "../../@svar-ui/react-core/src/components/TextArea.jsx", "../../@svar-ui/react-core/src/components/Button.jsx", "../../@svar-ui/react-core/src/components/Checkbox.jsx", "../../@svar-ui/react-core/src/components/CheckboxGroup.jsx", "../../@svar-ui/react-core/src/components/Dropdown.jsx", "../../@svar-ui/react-core/src/components/ColorSelect.jsx", "../../@svar-ui/react-core/src/components/helpers/sliderMove.js", "../../@svar-ui/react-core/src/components/helpers/colorTransformator.js", "../../@svar-ui/react-core/src/components/helpers/colorValidation.js", "../../@svar-ui/react-core/src/components/helpers/locale.js", "../../@svar-ui/react-core/src/components/ColorBoard.jsx", "../../@svar-ui/react-core/src/components/ColorPicker.jsx", "../../@svar-ui/react-core/src/components/helpers/listnav.js", "../../@svar-ui/react-core/src/components/helpers/SuggestDropdown.jsx", "../../@svar-ui/react-core/src/components/Combo.jsx", "../../@svar-ui/react-core/src/components/Text.jsx", "../../@svar-ui/react-core/src/components/calendar/Header.jsx", "../../@svar-ui/react-core/src/components/calendar/Button.jsx", "../../@svar-ui/react-core/src/components/calendar/Month.jsx", "../../@svar-ui/react-core/src/components/calendar/Year.jsx", "../../@svar-ui/react-core/src/components/calendar/Duodecade.jsx", "../../@svar-ui/react-core/src/components/calendar/helpers.js", "../../@svar-ui/react-core/src/components/calendar/Panel.jsx", "../../@svar-ui/react-core/src/Locale.jsx", "../../@svar-ui/react-core/src/components/Calendar.jsx", "../../@svar-ui/react-core/src/components/DatePicker.jsx", "../../@svar-ui/react-core/src/components/RangeCalendar.jsx", "../../@svar-ui/react-core/src/components/DateRangePicker.jsx", "../../@svar-ui/react-core/src/components/Fullscreen.jsx", "../../@svar-ui/react-core/src/components/Icon.jsx", "../../@svar-ui/react-core/src/components/MultiCombo.jsx", "../../@svar-ui/react-core/src/components/Popup.jsx", "../../@svar-ui/react-core/src/components/Pager.jsx", "../../@svar-ui/react-core/src/components/RadioButton.jsx", "../../@svar-ui/react-core/src/components/RadioButtonGroup.jsx", "../../@svar-ui/react-core/src/components/RichSelect.jsx", "../../@svar-ui/react-core/src/components/Segmented.jsx", "../../@svar-ui/react-core/src/components/Select.jsx", "../../@svar-ui/react-core/src/components/Slider.jsx", "../../@svar-ui/react-core/src/components/Switch.jsx", "../../@svar-ui/react-core/src/components/Tabs.jsx", "../../@svar-ui/react-core/src/components/Counter.jsx", "../../@svar-ui/react-core/src/components/Notice.jsx", "../../@svar-ui/react-core/src/components/Notices.jsx", "../../@svar-ui/react-core/src/components/Modal.jsx", "../../@svar-ui/react-core/src/components/Globals.jsx", "../../@svar-ui/react-core/src/Globals.jsx", "../../@svar-ui/react-core/src/components/Field.jsx", "../../@svar-ui/react-core/src/components/TwoState.jsx", "../../@svar-ui/react-core/src/components/TimePicker.jsx", "../../@svar-ui/react-core/src/components/ModalArea.jsx", "../../@svar-ui/react-core/src/components/SideArea.jsx", "../../@svar-ui/react-core/src/components/Portal.jsx", "../../@svar-ui/react-core/src/themes/FonttRoboto.jsx", "../../@svar-ui/react-core/src/themes/Material.jsx", "../../@svar-ui/react-core/src/themes/FontOpenSans.jsx", "../../@svar-ui/react-core/src/themes/Willow.jsx", "../../@svar-ui/react-core/src/themes/WillowDark.jsx", "../../@svar-ui/react-core/src/components/helpers/popup.js", "../../@svar-ui/react-core/src/index.js", "../../@svar-ui/gantt-locales/locales/en.js", "../../@svar-ui/lib-state/src/helpers.ts", "../../@svar-ui/lib-state/src/DataArray.ts", "../../@svar-ui/lib-state/src/DataTree.ts", "../../@svar-ui/lib-state/src/Store.ts", "../../@svar-ui/lib-state/src/DataRouter.ts", "../../@svar-ui/lib-state/src/EventBus.ts", "../../@svar-ui/lib-state/src/EventResolver.ts", "../../@svar-ui/lib-state/src/EventBusRouter.ts", "../../@svar-ui/gantt-store/dist/index.js", "../../@svar-ui/grid-store/dist/index.js", "../../@svar-ui/grid-locales/locales/en.js", "../../@svar-ui/react-menu/src/helpers/index.js", "../../@svar-ui/react-menu/src/components/MenuOption.jsx", "../../@svar-ui/react-menu/src/components/Menu.jsx", "../../@svar-ui/react-menu/src/components/ActionMenu.jsx", "../../@svar-ui/react-menu/src/components/MenuBar.jsx", "../../@svar-ui/react-menu/src/components/DropDownMenu.jsx", "../../@svar-ui/react-menu/src/components/ContextMenu.jsx", "../../@svar-ui/react-toolbar/src/helpers.js", "../../@svar-ui/react-toolbar/src/buttons/Separator.jsx", "../../@svar-ui/react-toolbar/src/buttons/Spacer.jsx", "../../@svar-ui/react-toolbar/src/components/BarComponent.jsx", "../../@svar-ui/react-toolbar/src/components/Group.jsx", "../../@svar-ui/react-toolbar/src/components/Menu.jsx", "../../@svar-ui/react-toolbar/src/components/Toolbar.jsx", "../../@svar-ui/react-toolbar/src/buttons/Button.jsx", "../../@svar-ui/react-toolbar/src/buttons/Label.jsx", "../../@svar-ui/react-toolbar/src/buttons/Icon.jsx", "../../@svar-ui/react-toolbar/src/buttons/Item.jsx", "../../@svar-ui/react-toolbar/src/index.js", "../../@svar-ui/react-grid/src/context.js", "../../@svar-ui/react-grid/src/helpers/actions/onresize.js", "../../@svar-ui/react-grid/src/helpers/actions/reorder.js", "../../@svar-ui/react-grid/src/helpers/actions/dragscroll.js", "../../@svar-ui/react-grid/src/helpers/columnWidth.js", "../../@svar-ui/react-grid/src/components/Cell.jsx", "../../@svar-ui/react-grid/src/helpers/actions/resize.js", "../../@svar-ui/react-grid/src/components/inlineFilters/Text.jsx", "../../@svar-ui/react-grid/src/components/inlineFilters/Richselect.jsx", "../../@svar-ui/react-grid/src/components/inlineFilters/filters.js", "../../@svar-ui/react-grid/src/components/inlineFilters/Filter.jsx", "../../@svar-ui/react-grid/src/components/HeaderCell.jsx", "../../@svar-ui/react-grid/src/components/FooterCell.jsx", "../../@svar-ui/react-grid/src/components/HeaderFooter.jsx", "../../@svar-ui/react-grid/src/components/Overlay.jsx", "../../@svar-ui/react-grid/src/components/inlineEditors/Text.jsx", "../../@svar-ui/react-grid/src/components/inlineEditors/Combo.jsx", "../../@svar-ui/react-grid/src/components/inlineEditors/Datepicker.jsx", "../../@svar-ui/react-grid/src/components/inlineEditors/Richselect.jsx", "../../@svar-ui/react-grid/src/components/inlineEditors/editors.js", "../../@svar-ui/react-grid/src/components/inlineEditors/Editor.jsx", "../../@svar-ui/react-grid/src/components/print/HeaderFooter.jsx", "../../@svar-ui/react-grid/src/components/print/Grid.jsx", "../../@svar-ui/react-grid/src/components/print/Print.jsx", "../../@svar-ui/react-grid/src/components/Layout.jsx", "../../@svar-ui/react-grid/src/components/Grid.jsx", "../../@svar-ui/react-grid/src/components/menus/HeaderMenuItem.jsx", "../../@svar-ui/react-grid/src/components/menus/HeaderMenu.jsx", "../../@svar-ui/react-grid/src/components/Tooltip.jsx", "../../@svar-ui/react-grid/src/components/menus/ContextMenu.jsx", "../../@svar-ui/react-grid/src/components/Toolbar.jsx", "../../@svar-ui/react-grid/src/themes/Material.jsx", "../../@svar-ui/react-grid/src/themes/Willow.jsx", "../../@svar-ui/react-grid/src/themes/WillowDark.jsx", "../../@svar-ui/react-grid/src/index.js", "../../@svar-ui/react-editor/src/helpers.js", "../../@svar-ui/react-editor/src/en.js", "../../@svar-ui/react-editor/src/components/FormEditor.jsx", "../../@svar-ui/react-editor/src/editor.js", "../../@svar-ui/react-editor/src/components/Values.jsx", "../../@svar-ui/react-editor/src/components/Form.jsx", "../../@svar-ui/react-editor/src/components/Columns.jsx", "../../@svar-ui/react-editor/src/components/buttons/Toolbar.jsx", "../../@svar-ui/react-editor/src/components/buttons/buttons.js", "../../@svar-ui/react-editor/src/components/Panel.jsx", "../../@svar-ui/react-editor/src/components/Layout.jsx", "../../@svar-ui/react-editor/src/components/Editor.jsx", "../../@svar-ui/react-editor/src/themes/Material.jsx", "../../@svar-ui/react-editor/src/themes/Willow.jsx", "../../@svar-ui/react-editor/src/themes/WillowDark.jsx", "../../@svar-ui/react-editor/src/components/sections/ReadOnly.jsx", "../../@svar-ui/react-editor/src/components/sections/Section.jsx", "../../@svar-ui/react-editor/src/index.js", "../../@svar-ui/react-gantt/src/context.js", "../../@svar-ui/react-gantt/src/helpers/locate.js", "../../@svar-ui/react-gantt/src/helpers/reorder.js", "../../@svar-ui/react-gantt/src/components/grid/TextCell.jsx", "../../@svar-ui/react-gantt/src/components/grid/ActionCell.jsx", "../../@svar-ui/react-gantt/src/components/grid/Grid.jsx", "../../@svar-ui/react-gantt/src/components/chart/CellGrid.jsx", "../../@svar-ui/react-gantt/src/components/chart/Links.jsx", "../../@svar-ui/react-gantt/src/components/chart/BarSegments.jsx", "../../@svar-ui/react-gantt/src/components/chart/Bars.jsx", "../../@svar-ui/react-gantt/src/components/chart/TimeScale.jsx", "../../@svar-ui/react-gantt/src/helpers/debug.js", "../../@svar-ui/react-gantt/src/components/chart/Chart.jsx", "../../@svar-ui/react-gantt/src/components/Resizer.jsx", "../../@svar-ui/react-gantt/src/helpers/modeResizeObserver.js", "../../@svar-ui/react-gantt/src/components/Layout.jsx", "../../@svar-ui/react-gantt/src/helpers/prepareConfig.js", "../../@svar-ui/react-gantt/src/components/Gantt.jsx", "../../@svar-ui/react-gantt/src/components/Toolbar.jsx", "../../@svar-ui/react-gantt/src/components/ContextMenu.jsx", "../../@svar-ui/react-gantt/src/components/editor/Links.jsx", "../../@svar-ui/react-gantt/src/components/editor/DateTimePicker.jsx", "../../@svar-ui/react-gantt/src/components/Editor.jsx", "../../@svar-ui/react-gantt/src/components/grid/HeaderMenu.jsx", "../../@svar-ui/react-gantt/src/widgets/Tooltip.jsx", "../../@svar-ui/react-gantt/src/themes/Material.jsx", "../../@svar-ui/react-gantt/src/themes/Willow.jsx", "../../@svar-ui/react-gantt/src/themes/WillowDark.jsx", "../../@svar-ui/react-gantt/src/index.js"],
  "sourcesContent": ["export function locate(el: Element | Event, attr = \"data-id\"): HTMLElement {\n\tlet node = el as HTMLElement;\n\tif (!node.tagName && (el as Event).target)\n\t\tnode = (el as Event).target as HTMLElement;\n\n\twhile (node) {\n\t\tif (node.getAttribute) {\n\t\t\tconst id = node.getAttribute(attr);\n\t\t\tif (id) return node;\n\t\t}\n\n\t\tnode = node.parentNode as HTMLElement;\n\t}\n\n\treturn null;\n}\nexport function locateAttr(el: Element | Event, attr = \"data-id\"): string {\n\tconst node = locate(el, attr);\n\tif (node) return node.getAttribute(attr);\n\n\treturn null;\n}\nexport function locateID(\n\tel: Element | Event,\n\tattr = \"data-id\"\n): string | number {\n\tconst node = locate(el, attr);\n\n\tif (node) {\n\t\treturn id(node.getAttribute(attr));\n\t}\n\n\treturn null;\n}\n\nexport function locateNode(el: Element, node: Element): boolean {\n\tlet n = el;\n\twhile (n) {\n\t\tif (n === node) {\n\t\t\treturn true;\n\t\t}\n\t\tn = n?.parentNode as Element;\n\t}\n\n\treturn null;\n}\n\nexport function id(value: string | number): string | number {\n\tif (typeof value === \"string\") {\n\t\tconst t = (value as undefined as number) * 1;\n\t\tif (!isNaN(t)) return t;\n\t}\n\n\treturn value;\n}\n", "export interface Env {\n\tdetect: () => boolean;\n\taddEvent: (\n\t\tnode: HTMLElement,\n\t\tevent: string,\n\t\thandler: EventListenerOrEventListenerObject\n\t) => RemoveEventListener;\n\taddGlobalEvent: (\n\t\tevent: string,\n\t\thandler: EventListenerOrEventListenerObject,\n\t\trel: HTMLElement\n\t) => RemoveEventListener;\n\tgetTopNode: (rel: HTMLElement) => HTMLElement;\n}\n\nexport type RemoveEventListener = () => void;\n\nfunction getEnv(): Env {\n\treturn {\n\t\tdetect: () => true,\n\t\taddEvent: function (\n\t\t\tnode: Node,\n\t\t\tevent: string,\n\t\t\thandler: EventListenerOrEventListenerObject\n\t\t): RemoveEventListener {\n\t\t\tnode.addEventListener(event, handler);\n\t\t\treturn () => node.removeEventListener(event, handler);\n\t\t},\n\t\taddGlobalEvent: function (\n\t\t\tevent: string,\n\t\t\thandler: EventListenerOrEventListenerObject\n\t\t): RemoveEventListener {\n\t\t\tdocument.addEventListener(event, handler);\n\t\t\treturn () => document.removeEventListener(event, handler);\n\t\t},\n\t\tgetTopNode: function (): HTMLElement {\n\t\t\treturn window.document.body as HTMLElement;\n\t\t},\n\t};\n}\n\nexport const env = getEnv();\n\nexport function setEnv(update: Partial<Env>): void {\n\tObject.assign(env, update);\n}\n", "import type { ActionReturn } from \"./common\";\nimport { locate, id as parseId } from \"./locate\";\n\nexport type IHandlersHash = { [key: string]: CallableFunction };\nimport { env } from \"./env\";\n\nexport function delegateEvent(\n\tnode: HTMLElement,\n\thandlers: IHandlersHash | CallableFunction,\n\tevent: string\n): ActionReturn {\n\tfunction handleEvent(ev: Event) {\n\t\tconst node = locate(ev);\n\t\tif (!node) return;\n\t\tconst id = parseId(node.dataset.id);\n\n\t\tif (typeof handlers === \"function\") return handlers(id, ev);\n\n\t\tlet action;\n\t\tlet test = ev.target as HTMLElement;\n\t\twhile (test != node) {\n\t\t\taction = test.dataset ? test.dataset.action : null;\n\t\t\tif (action) {\n\t\t\t\tif (handlers[action]) {\n\t\t\t\t\thandlers[action](id, ev);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\ttest = test.parentNode as HTMLElement;\n\t\t}\n\t\tif (handlers[event]) handlers[event](id, ev);\n\t}\n\n\tenv.addEvent(node, event, handleEvent);\n}\n\nexport function delegateClick(\n\tnode: HTMLElement,\n\thandlers: IHandlersHash\n): ActionReturn {\n\tdelegateEvent(node, handlers, \"click\");\n\tif (handlers.dblclick) delegateEvent(node, handlers.dblclick, \"dblclick\");\n}\n", "export function remove<T>(items: T[], node: T): void {\n\tfor (let i = items.length - 1; i >= 0; i--) {\n\t\tif (items[i] === node) {\n\t\t\titems.splice(i, 1);\n\t\t\tbreak;\n\t\t}\n\t}\n}\n", "import { remove } from \"./array\";\nimport { env, RemoveEventListener } from \"./env\";\nimport type { ActionReturn } from \"./common\";\n\ntype OutsideListener = {\n\tnode: HTMLElement;\n\tdate: Date;\n\tprops?: OutsideListenerProps;\n};\n\ntype OutsideListenerProps = {\n\tcallback: CallableFunction;\n\tmodal?: boolean;\n};\n\nlet activationDate: Date = new Date();\nlet skipNext = false;\n\nlet outsideHandlers: RemoveEventListener[] = [];\nconst outsideListners: OutsideListener[] = [];\nconst handleOutsideClick: EventListener = (event: Event) => {\n\t// activation was inside of the elements, ignoring\n\tif (skipNext) {\n\t\tskipNext = false;\n\t\treturn;\n\t}\n\n\t// for each area check if event was outside of the element\n\tfor (let i = outsideListners.length - 1; i >= 0; i--) {\n\t\t// if event was already handled, we can skip the rest\n\t\t// it is used by menu and alike, where we want to close only one\n\t\t//if (event.defaultPrevented) return;\n\n\t\tconst { node, date, props } = outsideListners[i];\n\t\t// if element was opened after click event - ignore it\n\t\tif (date > activationDate) continue;\n\n\t\tif (!node.contains(event.target as Node) && node !== event.target) {\n\t\t\tif (props.callback) props.callback(event);\n\t\t\t// in case of modal we want to close only one\n\t\t\t// also we want to close only one if event was already handled\n\t\t\tif (props.modal || event.defaultPrevented) break;\n\t\t}\n\t}\n};\n\n// we are tracking mousedown for two reasons:\n// 1. to be sure that mouse action was started inside the element\n// 2. to ignore click event that was issued before new listener was added\n// this is important for popups, because they are usually added after click event\n// and we don't want to close them immediately\nconst handleMouseDown: EventListener = (event: Event) => {\n\tactivationDate = new Date();\n\tskipNext = true;\n\n\tfor (let i = outsideListners.length - 1; i >= 0; i--) {\n\t\tconst { node } = outsideListners[i];\n\t\tif (!node.contains(event.target as Node) && node !== event.target) {\n\t\t\t// activation outside of the elements\n\t\t\tskipNext = false;\n\t\t\tbreak;\n\t\t}\n\t}\n};\n\nexport function clickOutside(\n\tnode: HTMLElement,\n\tprops: CallableFunction | OutsideListenerProps\n): ActionReturn {\n\t// set handler only once\n\tif (!outsideHandlers.length) {\n\t\toutsideHandlers = [\n\t\t\tenv.addGlobalEvent(\"click\", handleOutsideClick, node),\n\t\t\tenv.addGlobalEvent(\"contextmenu\", handleOutsideClick, node),\n\t\t\tenv.addGlobalEvent(\"mousedown\", handleMouseDown, node),\n\t\t];\n\t}\n\n\tif (typeof props !== \"object\") {\n\t\tprops = { callback: props };\n\t}\n\tconst pack = { node, date: new Date(), props };\n\toutsideListners.push(pack);\n\n\treturn {\n\t\tdestroy() {\n\t\t\tremove(outsideListners, pack);\n\t\t\tif (!outsideListners.length) {\n\t\t\t\toutsideHandlers.forEach(e => e());\n\t\t\t\toutsideHandlers = [];\n\t\t\t}\n\t\t},\n\t};\n}\n", "import { env } from \"./env\";\n\ntype positionResult = {\n\tx: number;\n\ty: number;\n\tz: number;\n\twidth: string;\n};\n\nexport type TPosition =\n\t| \"point\"\n\t| \"bottom\"\n\t| \"top\"\n\t| \"left\"\n\t| \"right\"\n\t| \"center\"\n\t| \"bottom-fit\"\n\t| \"top-fit\"\n\t| \"center-fit\"\n\t| \"bottom-right\"\n\t| \"bottom-left\"\n\t| \"bottom-start\"\n\t| \"bottom-center\"\n\t| \"bottom-end\"\n\t| \"top-right\"\n\t| \"top-left\"\n\t| \"top-start\"\n\t| \"top-center\"\n\t| \"top-end\"\n\t| \"left-start\"\n\t| \"left-center\"\n\t| \"left-end\"\n\t| \"right-start\"\n\t| \"right-center\"\n\t| \"right-end\";\n\nconst isBottom = (mode: string) => mode.indexOf(\"bottom\") !== -1;\nconst isLeft = (mode: string) => mode.indexOf(\"left\") !== -1;\nconst isRight = (mode: string) => mode.indexOf(\"right\") !== -1;\nconst isTop = (mode: string) => mode.indexOf(\"top\") !== -1;\nconst isFit = (mode: string) => mode.indexOf(\"fit\") !== -1;\nconst isOverlap = (mode: string) => mode.indexOf(\"overlap\") !== -1;\nconst isCenter = (mode: string) => {\n\treturn mode.split(\"-\").every(v => [\"center\", \"fit\"].indexOf(v) > -1);\n};\nconst getAlign = (mode: string) => {\n\tconst match = mode.match(/(start|center|end)/);\n\treturn match ? match[0] : null;\n};\n\nfunction getMaxIndex(p: HTMLElement, ap: HTMLElement): number {\n\tlet zi = 0;\n\tconst top = env.getTopNode(p);\n\n\twhile (p) {\n\t\tif (p === top) break;\n\t\tconst pos = getComputedStyle(p)[\"position\"];\n\t\tif (pos === \"absolute\" || pos === \"relative\" || pos === \"fixed\") {\n\t\t\tzi = parseInt(getComputedStyle(p)[\"zIndex\"]) || 0;\n\t\t}\n\t\tp = p.parentNode as HTMLElement;\n\t\tif (p === ap) break;\n\t}\n\n\treturn zi;\n}\n\nlet x: number,\n\ty: number,\n\twidth: string,\n\tpos: {\n\t\tleft: number;\n\t\tright: number;\n\t\ttop: number;\n\t\tbottom: number;\n\t\twidth?: number;\n\t\theight?: number;\n\t};\n\nexport function calculatePosition(\n\tself: HTMLElement,\n\tparent: HTMLElement,\n\tat: TPosition = \"bottom\",\n\tleft: number = 0,\n\ttop: number = 0\n): positionResult {\n\tif (!self) return null;\n\n\tx = left;\n\ty = top;\n\twidth = \"auto\";\n\tlet z = 0;\n\tlet fixLeft = 0;\n\n\tconst body = getAbsParent(self);\n\tconst cont = isOverlap(at) ? env.getTopNode(self) : body;\n\n\tif (!body) return null;\n\n\tconst bodyRect = body.getBoundingClientRect();\n\tconst selfRect = self.getBoundingClientRect();\n\tconst contRect = cont.getBoundingClientRect();\n\n\tconst contStyle = window.getComputedStyle(cont);\n\tconst border: { [key: string]: number } = {\n\t\tleft: 0,\n\t\ttop: 0,\n\t\tbottom: 0,\n\t\tright: 0,\n\t};\n\tfor (const key in border) {\n\t\tconst style = `border-${key}-width`;\n\t\tborder[key] = parseFloat(contStyle.getPropertyValue(style));\n\t}\n\n\t// correct z-index\n\tif (parent) {\n\t\tconst zi = getMaxIndex(parent, body);\n\t\tz = Math.max(zi + 1, 20);\n\t}\n\n\t// set position\n\tif (parent) {\n\t\tpos = parent.getBoundingClientRect();\n\t\tif (isFit(at)) width = pos.width + \"px\";\n\t\tif (at !== \"point\") {\n\t\t\tif (isCenter(at)) {\n\t\t\t\tif (isFit(at)) {\n\t\t\t\t\tx = 0;\n\t\t\t\t} else {\n\t\t\t\t\tx = contRect.width / 2;\n\t\t\t\t\tfixLeft = 1;\n\t\t\t\t}\n\t\t\t\ty = (contRect.height - selfRect.height) / 2;\n\t\t\t} else {\n\t\t\t\tconst fix = isOverlap(at) ? 0 : 1;\n\t\t\t\tx = isRight(at) ? pos.right + fix : pos.left - fix;\n\t\t\t\ty = isBottom(at) ? pos.bottom + 1 : pos.top;\n\t\t\t\t// correct x|y depending on align\n\t\t\t\tconst align = getAlign(at);\n\t\t\t\tif (align) {\n\t\t\t\t\tif (isRight(at) || isLeft(at)) {\n\t\t\t\t\t\tif (align === \"center\") y -= (selfRect.height - pos.height) / 2;\n\t\t\t\t\t\telse if (align === \"end\") y -= selfRect.height - pos.height;\n\t\t\t\t\t} else if (isBottom(at) || isTop(at)) {\n\t\t\t\t\t\tif (align === \"center\") x -= (selfRect.width - pos.width) / 2;\n\t\t\t\t\t\telse if (align === \"end\") x -= selfRect.width - pos.width;\n\t\t\t\t\t\tif (!isOverlap(at)) x += 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t} else pos = { left: left, right: left, top: top, bottom: top };\n\n\tconst isCorner = (isLeft(at) || isRight(at)) && (isBottom(at) || isTop(at));\n\n\t/* horizontal positioning */\n\n\tif (isLeft(at)) {\n\t\tfixLeft = 2;\n\t}\n\n\tconst dxL = x - selfRect.width - contRect.left;\n\n\tif (parent && isLeft(at) && !isCorner && dxL < 0) {\n\t\t// swap to right if \"left\" / \"left-[align]\" does not fit\n\t\tx = pos.right;\n\t\tfixLeft = 0;\n\t}\n\n\tconst dxR = x + selfRect.width * (1 - fixLeft / 2) - contRect.right;\n\n\tif (dxR > 0) {\n\t\tif (!isRight(at)) {\n\t\t\tx = contRect.right - border.right - selfRect.width;\n\t\t} else {\n\t\t\tconst dx = pos.left - contRect.x - selfRect.width;\n\t\t\tif (parent && !isOverlap(at) && !isCorner && dx >= 0) {\n\t\t\t\t// change position to \"left\"\n\t\t\t\tx = pos.left - selfRect.width;\n\t\t\t} else {\n\t\t\t\tx -= dxR + border.right;\n\t\t\t}\n\t\t}\n\t}\n\n\tif (fixLeft) {\n\t\t// apply \"left\" / \"center\" position\n\t\tx = Math.round(x - (selfRect.width * fixLeft) / 2);\n\t}\n\n\t/* vertical positioning*/\n\n\tconst needSwap = dxL < 0 || dxR > 0 || !isCorner;\n\n\tif (isTop(at)) {\n\t\ty = pos.top - selfRect.height;\n\t\tif (parent && y < contRect.y && needSwap) {\n\t\t\t// change position to \"bottom\"\n\t\t\ty = pos.bottom;\n\t\t}\n\t}\n\n\tconst dy = y + selfRect.height - contRect.bottom;\n\n\tif (dy > 0) {\n\t\tif (parent && isBottom(at) && needSwap) {\n\t\t\t// change position to \"top\"\n\t\t\ty -= selfRect.height + pos.height + 1;\n\t\t} else {\n\t\t\ty -= dy + border.bottom;\n\t\t}\n\t}\n\n\tx -= bodyRect.left + border.left;\n\ty -= bodyRect.top + border.top;\n\tx = Math.max(x, 0) + cont.scrollLeft;\n\ty = Math.max(y, 0) + cont.scrollTop;\n\twidth = width || \"auto\";\n\n\treturn { x, y, z, width };\n}\n\nexport function getAbsParent(el: HTMLElement): HTMLElement | null {\n\tconst top = env.getTopNode(el);\n\tif (el) el = el.parentElement;\n\twhile (el) {\n\t\tconst pos = getComputedStyle(el)[\"position\"];\n\t\tif (\n\t\t\tel === top ||\n\t\t\tpos === \"relative\" ||\n\t\t\tpos === \"absolute\" ||\n\t\t\tpos === \"fixed\"\n\t\t)\n\t\t\treturn el;\n\n\t\tel = el.parentNode as HTMLElement;\n\t}\n\treturn null;\n}\n", "export type ActionReturn = void | {\n    destroy: () => void;\n};\n\nlet id = new Date().valueOf();\n\nexport function uid(): number {\n\tid += 1;\n\treturn id;\n}\n", "type Handler = (ev?: KeyboardEvent, keys?: { key: string, evKey: string }) => void;\n\nclass ScreenKeys {\n\tstore: Map<string, Handler>;\n\tnode: Node;\n\tconstructor() {\n\t\tthis.store = new Map();\n\t}\n\n\tconfigure(hotkeys: { [key: string]: Handler | false }, node: Node) {\n\t\tthis.node = node;\n\t\tfor (const hotkey in hotkeys) {\n\t\t\tif (hotkeys[hotkey]) {\n\t\t\t\tconst hotkeyFormatted = hotkey.toLowerCase().replace(/[ ]/g, \"\");\n\t\t\t\tconst handler = hotkeys[hotkey];\n\t\t\t\tthis.store.set(hotkeyFormatted, handler);\n\t\t\t}\n\t\t}\n\t}\n}\n\nconst chain: ScreenKeys[] = [];\nexport const hotkeys = {\n\tsubscribe: (v: (t: ScreenKeys) => void) => {\n\t\tinit_once();\n\n\t\tconst t = new ScreenKeys();\n\t\tchain.push(t);\n\t\tv(t);\n\n\t\treturn () => {\n\t\t\tconst ind = chain.findIndex(a => a === t);\n\t\t\tif (ind >= 0) chain.splice(ind, 1);\n\t\t};\n\t},\n};\n\nvar ready = false;\nfunction init_once() {\n\tif (ready) return;\n\tready = true;\n\n\tdocument.addEventListener(\"keydown\", ev => {\n\t\tif (\n\t\t\tchain.length &&\n\t\t\t(ev.ctrlKey ||\n\t\t\t\tev.altKey ||\n\t\t\t\tev.metaKey ||\n\t\t\t\tev.shiftKey ||\n\t\t\t\tev.key.length > 1 ||\n\t\t\t\tev.key === \" \")\n\t\t) {\n\t\t\tconst code = [];\n\t\t\tif (ev.ctrlKey) code.push(\"ctrl\");\n\t\t\tif (ev.altKey) code.push(\"alt\");\n\t\t\tif (ev.metaKey) code.push(\"meta\");\n\t\t\tif (ev.shiftKey) code.push(\"shift\");\n\t\t\tlet evKey = ev.code.replace(\"Key\", \"\").toLocaleLowerCase();\n\t\t\tif (ev.key === \" \") {\n\t\t\t\tevKey = \"space\";\n\t\t\t}\n\t\t\tcode.push(evKey);\n\n\t\t\tconst key = code.join(\"+\");\n\n\t\t\tfor (let i = chain.length - 1; i >= 0; i--) {\n\t\t\t\tconst target = chain[i];\n\t\t\t\tconst handler =\n\t\t\t\t\ttarget.store.get(key) || target.store.get(evKey);\n\t\t\t\tif (handler && target.node.contains(ev.target as Node)) {\n\t\t\t\t\thandler(ev, { key, evKey });\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n}\n", "export interface ILocale {\n\tdayShort: string[];\n\tdayFull: string[];\n\tmonthShort: string[];\n\tmonthFull: string[];\n\n\tweekStart?: number;\n\n\tam?: string[];\n\tpm?: string[];\n}\n\nfunction toFixed(num: number): string {\n\tif (num < 10) return \"0\" + num;\n\treturn num.toString();\n}\nfunction toFixedMs(num: number): string {\n\tconst temp = toFixed(num);\n\treturn temp.length == 2 ? \"0\" + temp : temp;\n}\n\nexport function getDuodecade(year: number): { start: number; end: number } {\n\tconst start = Math.floor(year / 11) * 11;\n\treturn {\n\t\tstart,\n\t\tend: start + 11,\n\t};\n}\n\n// returns the number of the week by given date, by default with ISO week start as Monday\nfunction getWeekNumber(ndate: Date, weekStart: number = 1): number {\n\tlet nday = ndate.getDay();\n\tif (nday === 0) {\n\t\tnday = 7; // normalizing to ISO format\n\t}\n\n\tnday = (nday - weekStart + 7) % 7; // rotate week to make weekStart day 0\n\n\tconst first_thursday = new Date(ndate.valueOf());\n\tfirst_thursday.setDate(ndate.getDate() + (3 - nday));\n\tconst year_number = first_thursday.getFullYear(); // year of the first Thursday\n\tconst ordinal_date = Math.floor(\n\t\t(first_thursday.getTime() - new Date(year_number, 0, 1).getTime()) /\n\t\t\t86400000\n\t); //ordinal date of the first Thursday - 1 (so not really ordinal date)\n\n\treturn 1 + Math.floor(ordinal_date / 7);\n}\n\nconst emptyAmPm = [\"\", \"\"];\nfunction date2str(mask: string, date: Date, locale: ILocale): number | string {\n\tswitch (mask) {\n\t\tcase \"%d\":\n\t\t\treturn toFixed(date.getDate());\n\t\tcase \"%m\":\n\t\t\treturn toFixed(date.getMonth() + 1);\n\t\tcase \"%j\":\n\t\t\treturn date.getDate();\n\t\tcase \"%n\":\n\t\t\treturn date.getMonth() + 1;\n\t\tcase \"%y\":\n\t\t\treturn toFixed(date.getFullYear() % 100);\n\t\tcase \"%Y\":\n\t\t\treturn date.getFullYear();\n\t\tcase \"%D\":\n\t\t\treturn locale.dayShort[date.getDay()];\n\t\tcase \"%l\":\n\t\t\treturn locale.dayFull[date.getDay()];\n\t\tcase \"%M\":\n\t\t\treturn locale.monthShort[date.getMonth()];\n\t\tcase \"%F\":\n\t\t\treturn locale.monthFull[date.getMonth()];\n\t\tcase \"%h\":\n\t\t\treturn toFixed(((date.getHours() + 11) % 12) + 1);\n\t\tcase \"%g\":\n\t\t\treturn ((date.getHours() + 11) % 12) + 1;\n\t\tcase \"%G\":\n\t\t\treturn date.getHours();\n\t\tcase \"%H\":\n\t\t\treturn toFixed(date.getHours());\n\t\tcase \"%i\":\n\t\t\treturn toFixed(date.getMinutes());\n\t\tcase \"%a\":\n\t\t\treturn ((date.getHours() > 11 ? locale.pm : locale.am) || emptyAmPm)[0];\n\t\tcase \"%A\":\n\t\t\treturn ((date.getHours() > 11 ? locale.pm : locale.am) || emptyAmPm)[1];\n\t\tcase \"%s\":\n\t\t\treturn toFixed(date.getSeconds());\n\t\tcase \"%S\":\n\t\t\treturn toFixedMs(date.getMilliseconds());\n\t\tcase \"%W\":\n\t\t\treturn toFixed(getWeekNumber(date));\n\t\tcase \"%w\":\n\t\t\treturn toFixed(getWeekNumber(date, locale.weekStart ?? 1));\n\t\tcase \"%c\": {\n\t\t\tlet str = date.getFullYear() + \"\";\n\t\t\tstr += \"-\" + toFixed(date.getMonth() + 1);\n\t\t\tstr += \"-\" + toFixed(date.getDate());\n\t\t\tstr += \"T\";\n\t\t\tstr += toFixed(date.getHours());\n\t\t\tstr += \":\" + toFixed(date.getMinutes());\n\t\t\tstr += \":\" + toFixed(date.getSeconds());\n\t\t\treturn str;\n\t\t}\n\t\tcase \"%Q\":\n\t\t\treturn Math.floor(date.getMonth() / 3) + 1;\n\t\tdefault:\n\t\t\treturn mask;\n\t}\n}\n\nconst formatFlags = /%[a-zA-Z]/g;\ntype DateFormatter = (date: Date) => string;\n\nexport function dateToString(format: string, locale: ILocale): DateFormatter {\n\tif (typeof format == \"function\") return format;\n\n\treturn function (date: Date): string {\n\t\tif (!date) return \"\";\n\t\tif (!date.getMonth) date = new Date(date);\n\n\t\treturn format.replace(\n\t\t\tformatFlags,\n\t\t\ts => date2str(s, date, locale) as string\n\t\t);\n\t};\n}\n", "type Dictionary = (key: string) => string;\ntype IHash<T> = { [key: string]: T };\ntype Group<T> = IHash<IHash<T> | T>;\nexport type Terms = Group<string>;\n\nexport interface ILocale {\n\tgetGroup(group: string): Dictionary;\n\tgetRaw(): Terms;\n\textend(values: Terms, optional: boolean): ILocale;\n}\n\nfunction isObject(a: string | IHash<string>) {\n\treturn a && typeof a === \"object\" && !Array.isArray(a);\n}\n\nfunction extend(a: Terms, b: Terms): Terms {\n\tfor (const key in b) {\n\t\tconst from = b[key];\n\t\tif (isObject(a[key]) && isObject(from)) {\n\t\t\ta[key] = extend(\n\t\t\t\t{ ...(a[key] as IHash<string>) },\n\t\t\t\tb[key] as IHash<string>\n\t\t\t) as IHash<string>;\n\t\t} else {\n\t\t\ta[key] = b[key];\n\t\t}\n\t}\n\n\treturn a;\n}\n\nexport function locale(words: Terms): ILocale {\n\treturn {\n\t\tgetGroup(group: string): Dictionary {\n\t\t\tconst block = words[group] as IHash<string>;\n\t\t\treturn (key: string) => {\n\t\t\t\treturn block ? block[key] || key : key;\n\t\t\t};\n\t\t},\n\t\tgetRaw(): Terms {\n\t\t\treturn words;\n\t\t},\n\t\textend(values: Terms, optional: boolean): ILocale {\n\t\t\tif (!values) return this;\n\n\t\t\tlet data: Terms;\n\t\t\tif (optional) {\n\t\t\t\tdata = extend({ ...values }, words);\n\t\t\t} else {\n\t\t\t\tdata = extend({ ...words }, values);\n\t\t\t}\n\n\t\t\treturn locale(data);\n\t\t},\n\t};\n}\n", "import type { Env, RemoveEventListener } from \"./env\";\n\nexport const salesForceEnv: Partial<Env> = {\n\tdetect() {\n\t\tif (typeof window === \"undefined\") return false;\n\t\treturn (\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-explicit-any\n\t\t\t!!(window as any)[\"Sfdc\"] ||\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-explicit-any\n\t\t\t!!(window as any)[\"$A\"] ||\n\t\t\t// eslint-disable-next-line @typescript-eslint/no-explicit-any\n\t\t\t!!(window as any)[\"Aura\"] ||\n\t\t\t\"$shadowResolver$\" in document.body\n\t\t);\n\t},\n\taddGlobalEvent: function (\n\t\tevent: string,\n\t\thandler: EventListenerOrEventListenerObject,\n\t\trel: HTMLElement\n\t): RemoveEventListener {\n\t\tconst d = salesForceEnv.getTopNode(rel);\n\t\td.addEventListener(event, handler);\n\t\treturn () => d.removeEventListener(event, handler);\n\t},\n\tgetTopNode: function (rel: HTMLElement): HTMLElement {\n\t\treturn rel.closest('[data-wx-root=\"true\"]') as HTMLElement;\n\t},\n};\n", "import { useEffect, useState, useRef } from \"react\";\nimport { hotkeys } from \"@svar-ui/lib-dom\";\nimport { Writable } from \"./writable\";\n\nexport type Store<T> = {\n\tgetState: () => Record<string, T>;\n\tgetReactiveState: () => Record<string, Writable<T>>;\n};\n\nexport function useWritableProp<T>(propValue: T): [T, (value: T) => void] {\n\tconst [value, setValue] = useState<T>(propValue);\n\tconst prevPropRef = useRef(propValue);\n\n\t// Use useEffect to handle prop changes\n\tuseEffect(() => {\n\t\t// Only update if the prop has actually changed\n\t\tif (prevPropRef.current !== propValue) {\n\t\t\tif (\n\t\t\t\tArray.isArray(prevPropRef.current) &&\n\t\t\t\tArray.isArray(propValue) &&\n\t\t\t\tprevPropRef.current.length === 0 &&\n\t\t\t\tpropValue.length === 0\n\t\t\t)\n\t\t\t\treturn;\n\n\t\t\tprevPropRef.current = propValue;\n\t\t\tsetValue(propValue);\n\t\t}\n\t}, [propValue]);\n\n\treturn [value, setValue];\n}\n\nexport function useWritable<T>(\n\twritable: Writable<T>,\n\tinitialValue: T,\n\tname: string\n): T {\n\tconst [state, setState] = useState(() => initialValue);\n\t// FIXME - `dynamic` property not set, so use ?.\n\tif (!writable) console.warn(`Writable ${name} is not defined`);\n\tuseEffect(() => {\n\t\tif (!writable) return;\n\n\t\tconst unsubscribe = writable.subscribe(newValue => {\n\t\t\t// console.log(\"useWritable\", name, newValue);\n\t\t\tsetState(() => newValue);\n\t\t});\n\n\t\treturn unsubscribe;\n\t}, [writable]);\n\treturn state;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function useStore<T>(store: Store<any>, name: string): T {\n\tconst s = store.getState();\n\tconst r = store.getReactiveState();\n\treturn useWritable(r[name] as Writable<T>, s[name] as T, name);\n}\n\nexport function useStoreLater<T>(\n\tstore: Store<any> | undefined,\n\tname: string\n): T {\n\tconst [state, setState] = useState((): T | null => null);\n\tuseEffect(() => {\n\t\tif (!store) return;\n\t\tconst r = store.getReactiveState();\n\t\tconst wr = r ? r[name] : null;\n\t\tif (!wr) return;\n\n\t\tconst unsubscribe = wr.subscribe((newValue: T) => setState(() => newValue));\n\t\treturn unsubscribe;\n\t}, [store, name]);\n\treturn state;\n}\n\nexport function useWritableWithCounter<T>(\n\twritable: Writable<T>,\n\tinitialValue: T\n): [T, number] {\n\tconst state = useRef<T>(initialValue);\n\tstate.current = initialValue;\n\tconst [counter, setCounter] = useState(1);\n\n\tuseEffect(() => {\n\t\tconst unsubscribe = writable.subscribe(newValue => {\n\t\t\tstate.current = newValue;\n\t\t\tsetCounter(v => v + 1);\n\t\t});\n\n\t\treturn unsubscribe;\n\t}, [writable]);\n\treturn [state.current, counter];\n}\n\nexport function useStoreWithCounter<T>(\n\t// eslint-disable-next-line @typescript-eslint/no-explicit-any\n\tstore: Store<any>,\n\tname: string\n): [T, number] {\n\tconst s = store.getState();\n\tconst r = store.getReactiveState();\n\n\treturn useWritableWithCounter(r[name] as Writable<T>, s[name] as T);\n}\n\ntype Handler = (\n\tev?: KeyboardEvent,\n\tkeys?: { key: string; evKey: string }\n) => void;\ntype HotkeysMap = Record<string, Handler | false>;\ntype HotkeysManager = {\n\tconfigure: (keys: HotkeysMap, node: Node) => void;\n};\n\nexport function useHotkeys(keys: HotkeysMap, nodeRef: React.RefObject<Node>) {\n\tuseEffect(() => {\n\t\tconst node = nodeRef.current;\n\t\tif (!node) return;\n\t\treturn hotkeys.subscribe((sk: HotkeysManager) => {\n\t\t\tsk.configure(keys, node);\n\t\t});\n\t}, [hotkeys, nodeRef]);\n}\n", "type DirectiveResult = {\n\tdestroy: () => void;\n};\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any, @typescript-eslint/explicit-module-boundary-types\nexport function snippet(name: any, arg: any): any {\n\tif (typeof name === \"function\") {\n\t\tif (typeof arg === \"object\") {\n\t\t\treturn name(arg);\n\t\t} else {\n\t\t\treturn name();\n\t\t}\n\t}\n\treturn name;\n}\n\nexport function directive(\n\tresult: DirectiveResult | undefined\n): () => void | undefined {\n\tif (\n\t\tresult &&\n\t\ttypeof result === \"object\" &&\n\t\ttypeof result.destroy === \"function\"\n\t) {\n\t\treturn result.destroy;\n\t}\n}\n\nexport function styleObject(text: string): Record<string, string> {\n\tconst out: Record<string, string> = {};\n\ttext.split(\";\").forEach(x => {\n\t\tconst [k, v] = x.split(\":\");\n\t\tif (v) {\n\t\t\tlet n = k.trim();\n\t\t\tif (n.indexOf(\"-\")) n = n.replace(/-([a-z])/g, (_, c) => c.toUpperCase());\n\t\t\tout[n] = v.trim();\n\t\t}\n\t});\n\treturn out;\n}\n\nexport function tick(): Promise<void> {\n\treturn new Promise(resolve => {\n\t\trequestAnimationFrame(() => {\n\t\t\tsetTimeout(resolve, 0);\n\t\t});\n\t});\n}\n", "export type Writable<T> = {\n\tsubscribe: (cb: (value: T) => void) => void;\n\tunsubscribe: (cb: (value: T) => void) => void;\n\tset: (value: T) => void;\n\tupdate: (cb: (value: T) => T) => void;\n};\n\nexport type Subscribe<T> = (value: T) => void;\nexport type Update<T> = (value: T) => T;\n\nexport function writable<T>(value: T): Writable<T> {\n\tlet _value = value;\n\tlet listeners: Subscribe<T>[] = [];\n\n\tconst subscribe = (cb: Subscribe<T>) => {\n\t\tlisteners.push(cb);\n\t\tcb(_value);\n\t};\n\n\tconst unsubscribe = (cb: Subscribe<T>) => {\n\t\tlisteners = listeners.filter(l => l !== cb);\n\t};\n\n\tconst update = (cb: Update<T>) => {\n\t\t_value = cb(_value);\n\t\tlisteners.forEach(l => l(_value));\n\t};\n\n\tconst set = (v: T) => {\n\t\t_value = v;\n\t\tlisteners.forEach(l => l(_value));\n\t};\n\n\treturn {\n\t\tsubscribe,\n\t\tunsubscribe,\n\t\tset,\n\t\tupdate,\n\t};\n}\n", "import { locate, id as parseId, env } from \"@svar-ui/lib-dom\";\n\ntype Unsubscribe = () => void;\ntype EventHandler = (id: string | number, ev: Event) => void;\n\nexport function delegateEvent(\n\tnode: HTMLElement,\n\thandlers: Record<string, EventHandler> | EventHandler,\n\tevent: string\n): Unsubscribe {\n\tfunction handleEvent(ev: Event) {\n\t\tconst node = locate(ev);\n\t\tif (!node) return;\n\t\tconst id = parseId(node.dataset.id);\n\n\t\tif (typeof handlers === \"function\") return handlers(id, ev);\n\n\t\tlet action;\n\t\tlet test = ev.target as HTMLElement;\n\t\twhile (test != node) {\n\t\t\taction = test.dataset ? test.dataset.action : null;\n\t\t\tif (action) {\n\t\t\t\tif (handlers[action]) {\n\t\t\t\t\thandlers[action](id, ev);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\ttest = test.parentNode as HTMLElement;\n\t\t}\n\t\tif (handlers[event]) handlers[event](id, ev);\n\t}\n\n\treturn env.addEvent(node, event, handleEvent);\n}\n\nexport function delegateClick(\n\tnode: HTMLElement,\n\thandlers: Record<string, EventHandler>\n) {\n\tconst result = [delegateEvent(node, handlers, \"click\")];\n\tif (handlers.dblclick)\n\t\tresult.push(delegateEvent(node, handlers.dblclick, \"dblclick\"));\n\n\treturn (): void => {\n\t\tresult.forEach(r => r());\n\t};\n}\n", "const lang = \"en-US\";\n\nconst calendar = {\n\tmonthFull: [\n\t\t\"January\",\n\t\t\"February\",\n\t\t\"March\",\n\t\t\"April\",\n\t\t\"May\",\n\t\t\"June\",\n\t\t\"July\",\n\t\t\"August\",\n\t\t\"September\",\n\t\t\"October\",\n\t\t\"November\",\n\t\t\"December\",\n\t],\n\tmonthShort: [\n\t\t\"Jan\",\n\t\t\"Feb\",\n\t\t\"Mar\",\n\t\t\"Apr\",\n\t\t\"May\",\n\t\t\"Jun\",\n\t\t\"Jul\",\n\t\t\"Aug\",\n\t\t\"Sep\",\n\t\t\"Oct\",\n\t\t\"Nov\",\n\t\t\"Dec\",\n\t],\n\tdayFull: [\n\t\t\"Sunday\",\n\t\t\"Monday\",\n\t\t\"Tuesday\",\n\t\t\"Wednesday\",\n\t\t\"Thursday\",\n\t\t\"Friday\",\n\t\t\"Saturday\",\n\t],\n\tdayShort: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"],\n\thours: \"Hours\",\n\tminutes: \"Minutes\",\n\tdone: \"Done\",\n\tclear: \"Clear\",\n\ttoday: \"Today\",\n\tam: [\"am\", \"AM\"],\n\tpm: [\"pm\", \"PM\"],\n\n\tweekStart: 0,\n\tclockFormat: 24,\n};\n\nconst core = {\n\tok: \"OK\",\n\tcancel: \"Cancel\",\n\tselect: \"Select\",\n\t\"No data\": \"No data\",\n\t\"Rows per page\": \"Rows per page\",\n\t\"Total pages\": \"Total pages\",\n};\n\nconst formats = {\n\ttimeFormat: \"%H:%i\",\n\tdateFormat: \"%m/%d/%Y\",\n\tmonthYearFormat: \"%F %Y\",\n\tyearFormat: \"%Y\",\n};\n\nconst data = {\n\tcore,\n\tcalendar,\n\tformats,\n\tlang,\n};\n\nexport default data;\n", "import { createContext } from 'react';\n\nexport const theme = createContext('willow');\nexport const helpers = createContext({});\nexport const i18n = createContext(null);\nexport const fieldId = createContext(null);\n", "import { useContext, useState } from 'react';\nimport { fieldId } from '../../context';\nimport { uid } from '@svar-ui/lib-dom';\n\nexport function useInputId(id) {\n  const register = useContext(fieldId);\n\n  const [inputId] = useState(() => id || (register && register()) || uid());\n\n  return inputId;\n}\n", "import { useCallback, useEffect, useRef } from 'react';\nimport { useWritableProp } from '@svar-ui/lib-react';\nimport { useInputId } from './helpers/getInputId.js';\n\nimport './TextArea.css';\n\nexport default function TextArea({\n  value: propValue = '',\n  id,\n  placeholder = '',\n  title = '',\n  disabled = false,\n  error = false,\n  readonly = false,\n  onChange,\n}) {\n  const inputId = useInputId(id);\n  const [value, setValue] = useWritableProp(propValue);\n\n  const handleInput = useCallback(\n    (e) => {\n      const newValue = e.target.value;\n      setValue(newValue);\n      if (onChange) {\n        onChange({ value: newValue, input: true });\n      }\n    },\n    [onChange],\n  );\n\n  const ontextchange = useCallback(\n    (e) => {\n      const newValue = e.target.value;\n      setValue(newValue);\n      if (onChange) {\n        onChange({ value: newValue });\n      }\n    },\n    [onChange],\n  );\n\n  const inputRef = useRef(null);\n  useEffect(() => {\n    const handler = ontextchange;\n    const node = inputRef.current;\n    node.addEventListener('change', handler);\n    return () => {\n      if (node) {\n        node.removeEventListener('change', handler);\n      }\n    };\n  }, [ontextchange]);\n\n  return (\n    <textarea\n      className={'wx-3yFVAC' + ` wx-textarea ${error ? 'wx-error' : ''}`}\n      id={inputId}\n      disabled={disabled}\n      placeholder={placeholder}\n      readOnly={readonly}\n      title={title}\n      value={value}\n      onInput={handleInput}\n      ref={inputRef}\n    />\n  );\n}\n", "import { useMemo } from 'react';\nimport './Button.css';\n\nexport default function Button({\n  type = '',\n  css = '',\n  icon = '',\n  disabled = false,\n  title = '',\n  text = '',\n  children,\n  onClick,\n}) {\n  const buttonCss = useMemo(() => {\n    let cssType = type\n      ? type\n          .split(' ')\n          .filter((a) => a !== '')\n          .map((x) => 'wx-' + x)\n          .join(' ')\n      : '';\n    return css + (css ? ' ' : '') + cssType;\n  }, [type, css]);\n\n  const handleClick = (ev) => {\n    onClick && onClick(ev);\n  };\n\n  return (\n    <button\n      title={title}\n      className={`wx-2ZWgb4 wx-button ${buttonCss} ${icon && !children ? 'wx-icon' : ''}`}\n      disabled={disabled}\n      onClick={handleClick}\n    >\n      {icon && <i className={'wx-2ZWgb4 ' + icon}></i>}\n      {children ? children : text || ' '}\n    </button>\n  );\n}\n", "import { useWritableProp } from '@svar-ui/lib-react';\nimport { useInputId } from './helpers/getInputId.js';\nimport './Checkbox.css';\n\nexport default function Checkbox({\n  id,\n  label = '',\n  inputValue = '',\n  value: valueProp = false,\n  onChange,\n  disabled = false,\n}) {\n\n  const inputId = useInputId(id);\n  const [value, setValue] = useWritableProp(valueProp);\n\n  const handlerChange = ({ target }) => {\n    const newValue = target.checked;\n    setValue(newValue);\n    onChange && onChange({ value: newValue, inputValue });\n  };\n\n  return (\n    <div className=\"wx-2IvefP wx-checkbox\">\n      <input\n        type=\"checkbox\"\n        id={inputId}\n        disabled={disabled}\n        className=\"wx-2IvefP wx-check\"\n        checked={value}\n        value={inputValue}\n        onChange={handlerChange}\n      />\n      <label htmlFor={inputId} className=\"wx-2IvefP wx-label\">\n        <span className=\"wx-2IvefP wx-before\"></span>\n        {label && <span className=\"wx-2IvefP wx-after\">{label}</span>}\n      </label>\n    </div>\n  );\n}\n", "import { useCallback } from 'react';\nimport Checkbox from './Checkbox.jsx';\nimport './CheckboxGroup.css';\nimport { fieldId } from \"../context\";\n\nexport default function CheckboxGroup({\n  options = [],\n  value = [],\n  type = '',\n  onChange,\n}) {\n  // Handle both onchange and onChange props for compatibility\n  const handleChange = useCallback(\n    (obj) => {\n      let newValue;\n      if (obj.value) newValue = [...value, obj.inputValue];\n      else newValue = value.filter((a) => a !== obj.inputValue);\n\n      if (onChange) onChange({ value: newValue });\n    },\n    [value, onChange],\n  );\n\n  return (\n    <fieldId.Provider value={null}>\n      <div className={`wx-q8xwRD wx-checkboxgroup ${type && `wx-${type}`}`}>\n        {options.map((option) => (\n          <div key={option.id} className=\"wx-q8xwRD wx-item\">\n            <Checkbox\n              label={option.label}\n              inputValue={option.id}\n              value={value.includes(option.id)}\n              onChange={handleChange}\n            />\n          </div>\n        ))}\n      </div>\n    </fieldId.Provider>\n  );\n}\n", "import { useEffect, useRef } from 'react';\nimport { clickOutside, env } from '@svar-ui/lib-dom';\nimport { useWritableProp } from '@svar-ui/lib-react';\nimport './Dropdown.css';\n\nfunction Dropdown({\n  position = 'bottom',\n  align = 'start',\n  autoFit = true,\n  onCancel,\n  width = '100%',\n  children,\n}) {\n  const nodeRef = useRef(null);\n\n  const [positionState, setPosition] = useWritableProp(position);\n  const [alignState, setAlign] = useWritableProp(align);\n\n  useEffect(() => {\n    if (autoFit) {\n      const node = nodeRef.current;\n      if (node) {\n        const nodeCoords = node.getBoundingClientRect();\n        const bodyCoords = env.getTopNode(node).getBoundingClientRect();\n\n        if (nodeCoords.right >= bodyCoords.right) {\n          setAlign('end');\n        }\n\n        if (nodeCoords.bottom >= bodyCoords.bottom) {\n          setPosition('top');\n        }\n      }\n    }\n  }, [autoFit]);\n\n  useEffect(() => {\n    if (nodeRef.current) {\n      const down = (e) => {\n        onCancel && onCancel(e);\n      };\n      return clickOutside(nodeRef.current, down).destroy;\n    }\n  }, [onCancel]);\n\n  return (\n    <div\n      ref={nodeRef}\n      className={'wx-32GZ52' + ` wx-dropdown wx-${positionState}-${alignState}`}\n      style={{ width: width }}\n    >\n      {children}\n    </div>\n  );\n}\n\nexport default Dropdown;\n", "import { useState, useCallback } from 'react';\nimport { useInputId } from './helpers/getInputId.js';\nimport Dropdown from './Dropdown.jsx';\nimport './ColorSelect.css';\n\nconst defaultColors = [\n  '#00a037',\n  '#37a9ef',\n  '#f5a623',\n  '#ff4c3b',\n  '#a0a0a0',\n  '#000000',\n  '#ffffff',\n];\n\nexport default function ColorSelect({\n  colors = defaultColors,\n  value = '',\n  onChange,\n  id,\n  clear = false,\n  placeholder = '',\n  title = '',\n  disabled = false,\n  error = false,\n}) {\n  const inputId = useInputId(id);\n  const [currentValue, setCurrentValue] = useState(value);\n  const [popup, setPopup] = useState(false);\n\n  const selectColor = useCallback(\n    (ev, color) => {\n      ev.stopPropagation();\n      setCurrentValue(color);\n      setPopup(false);\n      onChange && onChange({ value: color });\n    },\n    [onChange],\n  );\n\n  const unselectColor = useCallback(\n    (ev) => {\n      ev.stopPropagation();\n      setCurrentValue('');\n      onChange && onChange({ value: '' });\n    },\n    [onChange],\n  );\n\n  const handlePopup = useCallback(() => {\n    if (disabled) return false;\n    setPopup(true);\n  }, [disabled]);\n\n  return (\n    <div className=\"wx-121TgJ wx-colorselect\" onClick={handlePopup}>\n      <input\n        className={\n          'wx-121TgJ wx-input' +\n          (error ? ' wx-error' : '') +\n          (popup ? ' wx-focus' : '')\n        }\n        title={title}\n        value={currentValue}\n        readOnly\n        id={inputId}\n        placeholder={placeholder}\n        disabled={disabled}\n      />\n\n      {clear && currentValue && !disabled && (\n        <i className=\"wx-121TgJ wx-clear wxi-close\" onClick={unselectColor}></i>\n      )}\n\n      {currentValue ? (\n        <div\n          className=\"wx-121TgJ wx-color wx-selected\"\n          style={{ backgroundColor: currentValue || '#00a037' }}\n        ></div>\n      ) : (\n        <div className=\"wx-121TgJ wx-empty wx-selected\"></div>\n      )}\n\n      {popup && (\n        <Dropdown onCancel={() => setPopup(false)}>\n          <div className=\"wx-121TgJ wx-colors\">\n            <div\n              className=\"wx-121TgJ wx-empty\"\n              onClick={(ev) => selectColor(ev, '')}\n            ></div>\n            {colors.map((color, index) => (\n              <div\n                key={index}\n                className=\"wx-121TgJ wx-color\"\n                style={{ backgroundColor: color }}\n                onClick={(ev) => selectColor(ev, color)}\n              ></div>\n            ))}\n          </div>\n        </Dropdown>\n      )}\n    </div>\n  );\n}\n", "export function sliderMove(node, config) {\n  const slider = node.firstChild;\n  const { moveBlockSlider, moveLineSlider } = config || {};\n\n  function down(ev) {\n    move(ev);\n\n    slider.focus();\n\n    window.addEventListener('mousemove', move);\n    window.addEventListener('mouseup', up);\n  }\n\n  function move(ev) {\n    let x, y, dx, dy;\n\n    const coords = node.getBoundingClientRect();\n    x = coords.left;\n    y = coords.top;\n\n    dx = ev.clientX - x;\n    dy = ev.clientY - y;\n\n    if (moveBlockSlider) config.moveBlockSlider(dx, dy);\n    if (moveLineSlider) config.moveLineSlider(dx);\n  }\n\n  function up() {\n    slider.blur();\n\n    window.removeEventListener('mousemove', move);\n    window.removeEventListener('mouseup', up);\n  }\n\n  node.addEventListener('mousedown', down);\n\n  return {\n    destroy() {\n      node.removeEventListener('mousedown', down);\n    },\n  };\n}\n", "const colorTransformator = {\n  _toHex: [\n    '0',\n    '1',\n    '2',\n    '3',\n    '4',\n    '5',\n    '6',\n    '7',\n    '8',\n    '9',\n    'A',\n    'B',\n    'C',\n    'D',\n    'E',\n    'F',\n  ],\n  toHex(number, length) {\n    number = parseInt(number, 10);\n    let str = '';\n    while (number > 0) {\n      str = this._toHex[number % 16] + str;\n      number = Math.floor(number / 16);\n    }\n    while (str.length < length) str = `0${str}`;\n    return str;\n  },\n  rgbToHex(rgb) {\n    let arr = [];\n    if (typeof rgb === 'string')\n      rgb.replace(/[\\d+.]+/g, (v) => arr.push(parseFloat(v)));\n    else if (Array.isArray(rgb)) arr = rgb;\n\n    //transparent\n    if (arr[3] === 0) return '';\n\n    return arr\n      .slice(0, 3)\n      .map((n) => {\n        return this.toHex(Math.floor(n), 2);\n      })\n      .join('');\n  },\n  hexToDec(hex) {\n    return parseInt(hex, 16);\n  },\n  // only handles the six-digit hex color format\n  hexToRgb(hex) {\n    hex = hex.charAt(0) === '#' ? hex.slice(1) : hex;\n    const rgbPairs = hex.match(/.{1,2}/g);\n\n    let [r, g, b] = rgbPairs;\n\n    r = this.hexToDec(r);\n    g = this.hexToDec(g);\n    b = this.hexToDec(b);\n\n    return [r, g, b];\n  },\n  hsvToRgb(h, s, v) {\n    let hi, f, p, q, t, r, g, b;\n    hi = Math.floor(h / 60) % 6;\n    f = h / 60 - hi;\n    p = v * (1 - s);\n    q = v * (1 - f * s);\n    t = v * (1 - (1 - f) * s);\n    r = 0;\n    g = 0;\n    b = 0;\n    switch (hi) {\n      case 0:\n        r = v;\n        g = t;\n        b = p;\n        break;\n      case 1:\n        r = q;\n        g = v;\n        b = p;\n        break;\n      case 2:\n        r = p;\n        g = v;\n        b = t;\n        break;\n      case 3:\n        r = p;\n        g = q;\n        b = v;\n        break;\n      case 4:\n        r = t;\n        g = p;\n        b = v;\n        break;\n      case 5:\n        r = v;\n        g = p;\n        b = q;\n        break;\n      default:\n        break;\n    }\n    r = Math.floor(r * 255);\n    g = Math.floor(g * 255);\n    b = Math.floor(b * 255);\n\n    return [r, g, b];\n  },\n  rgbToHsv(r, g, b) {\n    let s, h, v;\n    r /= 255;\n    g /= 255;\n    b /= 255;\n    let min = Math.min(r, g, b);\n    let max = Math.max(r, g, b);\n    h = 0;\n    s = max === 0 ? 0 : 1 - min / max;\n    v = max;\n    if (max === min) {\n      h = 0;\n    } else if (max === r && g >= b) {\n      h = (60 * (g - b)) / (max - min) + 0;\n    } else if (max === r && g < b) {\n      h = (60 * (g - b)) / (max - min) + 360;\n    } else if (max === g) {\n      h = (60 * (b - r)) / (max - min) + 120;\n    } else if (max === b) {\n      h = (60 * (r - g)) / (max - min) + 240;\n    }\n\n    return [h, s, v];\n  },\n  hexToHvs(hex) {\n    const rgb = this.hexToRgb(hex);\n    return this.rgbToHsv(...rgb);\n  },\n  hvsToHex(h, v, s) {\n    const rgb = this.hsvToRgb(h, v, s);\n    return '#' + this.rgbToHex(rgb).toUpperCase();\n  },\n};\n\nexport default colorTransformator;\n", "const hexValidation = (str) => /^([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/.test(str);\n\nexport function parseColor(value) {\n  if (!value) return null;\n\n  value = value.toString(16);\n\n  if (value.charAt(0) === '#') value = value.slice(1);\n\n  if (hexValidation(value)) {\n    if (value.length === 3) {\n      value = value\n        .slice(0, 3)\n        .split('')\n        .reduce((a, b) => a + b + b, '');\n    }\n    return `#${value.toUpperCase()}`;\n  }\n\n  return null;\n}\n", "import { locale } from '@svar-ui/lib-dom';\nimport { en } from '@svar-ui/core-locales';\n\nexport function defaultLocale() {\n  return locale(en);\n}\n", "import {\n  useState,\n  useEffect,\n  useRef,\n  useCallback,\n  useContext,\n  useMemo,\n} from 'react';\nimport Button from './Button.jsx';\nimport { sliderMove } from './helpers/sliderMove.js';\nimport colorTransformator from './helpers/colorTransformator.js';\nimport { parseColor } from './helpers/colorValidation.js';\nimport { i18n } from '../context.js';\nimport { useWritableProp } from '@svar-ui/lib-react';\nimport './ColorBoard.css';\nimport { defaultLocale } from './helpers/locale.js';\n\nconst BLOCK = 'Block';\nconst LINE = 'Line';\n\nfunction ColorBoard({\n  value: propertyValue = '#65D3B3',\n  button = false,\n  onChange,\n}) {\n  const _ = (useContext(i18n) || defaultLocale()).getGroup('core');\n\n  const blockRef = useRef(null);\n  const colorLineRef = useRef(null);\n\n  const [blockTop, setBlockTop] = useState();\n  const [blockLeft, setBlockLeft] = useState();\n  const [hueColor, setHueColor] = useState();\n  const [lineLeft, setLineLeft] = useState();\n\n  const [value, setValue] = useWritableProp(propertyValue);\n\n  const color = useMemo(() => parseColor(value) || '#65D3B3', [value]);\n  const blockColor = useMemo(\n    () => colorTransformator.hvsToHex(hueColor || 0, 1, 1),\n    [hueColor],\n  );\n\n  const moveBlockSlider = useCallback(\n    (dx, dy) => {\n      const { width, height } = blockRef.current.getBoundingClientRect();\n\n      if (dy < 0) dy = 0;\n      else if (dy > height) dy = height;\n\n      if (dx < 0) dx = 0;\n      else if (dx > width) dx = width;\n\n      setBlockTop(dy);\n      setBlockLeft(dx);\n\n      // Call setCurrentColor\n      let _sValue, _vValue;\n\n      const [, ,] = colorTransformator.hexToHvs(color);\n      const pxX = width / 100;\n      const pxY = height / 100;\n\n      _sValue = Math.ceil(dx / pxX) / 100;\n      _vValue = Math.ceil(Math.abs(dy / pxY - 100)) / 100;\n\n      const newValue = colorTransformator.hvsToHex(\n        hueColor || 0,\n        _sValue,\n        _vValue,\n      );\n      setValue(newValue);\n      onChange && onChange({ value: newValue, input: true });\n    },\n    [color, hueColor, onChange],\n  );\n\n  const moveLineSlider = useCallback(\n    (dx) => {\n      const width = colorLineRef.current.getBoundingClientRect().width;\n\n      if (dx < 0) dx = 0;\n      else if (dx > width) dx = width;\n\n      const h = Math.round((dx * 359) / width);\n      const newHue = Math.max(Math.min(h, 359), 0);\n      setHueColor(newHue);\n      setLineLeft(dx);\n\n      // Call setCurrentColor with lineSliderMove=true\n      let _sValue, _vValue;\n      [, _sValue, _vValue] = colorTransformator.hexToHvs(color);\n      const newValue = colorTransformator.hvsToHex(newHue, _sValue, _vValue);\n      setValue(newValue);\n      onChange && onChange({ value: newValue, input: true });\n    },\n    [color, onChange],\n  );\n\n  const setSlidersPosition = useCallback(() => {\n    const [h, s, v] = colorTransformator.hexToHvs(color);\n    setHueColor(h);\n\n    if (blockRef.current) {\n      const { width, height } = blockRef.current.getBoundingClientRect();\n\n      if (colorLineRef.current) {\n        setLineLeft(\n          (h * colorLineRef.current.getBoundingClientRect().width) / 359,\n        );\n      }\n      setBlockLeft(s * width);\n      setBlockTop(Math.abs(height * (v - 1)));\n    }\n  }, [color]);\n\n  const handleChange = useCallback(\n    ({ target }) => {\n      const newColor = parseColor(target.value);\n      setValue(newColor);\n      onChange && onChange({ value: newColor, input: true });\n      if (newColor) {\n        setSlidersPosition();\n      }\n    },\n    [onChange, setSlidersPosition],\n  );\n\n  const handleSelect = useCallback(\n    (ev) => {\n      ev.stopPropagation();\n      onChange && onChange({ value: color });\n    },\n    [color, onChange],\n  );\n\n  const keydown = useCallback(\n    (ev) => {\n      const slider = ev.target;\n      const isSliderBlock = slider.getAttribute('data-slider') === BLOCK;\n      const isSliderLine = slider.getAttribute('data-slider') === LINE;\n\n      let css = window.getComputedStyle(slider);\n      let left = parseFloat(css.left);\n      let top = parseFloat(css.top);\n      const code = ev.code;\n\n      if (isSliderBlock) {\n        switch (code) {\n          case 'ArrowLeft': {\n            left--;\n            break;\n          }\n          case 'ArrowRight': {\n            left++;\n            break;\n          }\n          case 'ArrowDown': {\n            top++;\n            break;\n          }\n          case 'ArrowUp': {\n            top--;\n            break;\n          }\n          default:\n            return;\n        }\n\n        moveBlockSlider(left, top);\n      }\n\n      if (isSliderLine) {\n        if (code === 'ArrowLeft' || code === 'ArrowDown') left--;\n        else if (code === 'ArrowRight' || code === 'ArrowUp') left++;\n        else return;\n        moveLineSlider(left);\n      }\n\n      ev.preventDefault();\n    },\n    [moveBlockSlider, moveLineSlider],\n  );\n\n  useEffect(() => {\n    setSlidersPosition();\n  }, [setSlidersPosition]);\n\n  useEffect(() => {\n    if (value !== value) {\n      setValue(value);\n      setSlidersPosition();\n    }\n  }, [value, value, setSlidersPosition]);\n\n  useEffect(() => {\n    if (blockRef.current) {\n      sliderMove(blockRef.current, { moveBlockSlider });\n    }\n    if (colorLineRef.current) {\n      sliderMove(colorLineRef.current, { moveLineSlider });\n    }\n  }, [moveBlockSlider, moveLineSlider]);\n\n  useEffect(() => {\n    if (value !== value) {\n      onChange && onChange({ value: value, input: true });\n    }\n  }, [value, onChange]);\n\n  useEffect(() => {\n    if (color && blockRef.current) {\n      setSlidersPosition();\n    }\n  }, [color, setSlidersPosition]);\n\n  const cssScope = 'wx-1yoKzq';\n\n  return (\n    <div className={cssScope + ' wx-colorboard'}>\n      <div\n        className={cssScope + ' wx-color-block'}\n        style={{ background: blockColor }}\n        ref={blockRef}\n      >\n        <div\n          className={cssScope + ' wx-color-block-slider wx-slider'}\n          style={{\n            background: color,\n            top: blockTop + 'px',\n            left: blockLeft + 'px',\n          }}\n          tabIndex={0}\n          data-slider={BLOCK}\n          onKeyDown={keydown}\n        ></div>\n      </div>\n      <div className={cssScope + ' wx-color-line'} ref={colorLineRef}>\n        <div\n          className={cssScope + ' wx-color-line-slider wx-slider'}\n          style={{ background: blockColor, left: lineLeft + 'px' }}\n          tabIndex={0}\n          data-slider={LINE}\n          onKeyDown={keydown}\n        ></div>\n      </div>\n      <div className={cssScope + ' wx-color-controls'}>\n        <div\n          className={cssScope + ' wx-color'}\n          style={{ background: color }}\n        ></div>\n        <input\n          type=\"text\"\n          className={cssScope + ' wx-text'}\n          value={value}\n          onChange={handleChange}\n        />\n      </div>\n      {button && (\n        <Button onClick={handleSelect} type=\"secondary\">\n          {_('select')}\n        </Button>\n      )}\n    </div>\n  );\n}\n\nexport default ColorBoard;\n", "import { useState } from 'react';\nimport Dropdown from './Dropdown.jsx';\nimport ColorBoard from './ColorBoard.jsx';\nimport { useWritableProp } from '@svar-ui/lib-react';\nimport { useInputId } from './helpers/getInputId.js';\n\nimport './ColorPicker.css';\n\nexport default function ColorPicker({\n  value: propertyValue = '',\n  id,\n  placeholder = '',\n  title = '',\n  disabled = false,\n  error = false,\n  clear = false,\n  onChange,\n}) {\n  const inputId = useInputId(id);\n  let [value, setValue] = useWritableProp(propertyValue);\n  const [popup, setPopup] = useState(false);\n\n  function handlePopup() {\n    if (disabled) return false;\n    setPopup(true);\n  }\n\n  function selectColor(ev) {\n    if (ev.input) return;\n\n    setPopup(false);\n    const newValue = ev.value;\n    setValue(newValue);\n    if (onChange) onChange({ value: newValue });\n  }\n\n  function unselectColor(ev) {\n    ev.stopPropagation();\n    setValue('');\n    if (onChange) onChange({ value: '' });\n  }\n\n  return (\n    <div className=\"wx-mmT8WH wx-colorpicker\" onClick={handlePopup}>\n      <input\n        className={\n          'wx-mmT8WH wx-input' +\n          (error ? ' wx-error' : '') +\n          (popup ? ' wx-focus' : '')\n        }\n        title={title}\n        value={value}\n        readOnly\n        id={inputId}\n        placeholder={placeholder}\n        disabled={disabled}\n      />\n      <div className=\"wx-mmT8WH wx-color\" style={{ background: value }}></div>\n\n      {clear && !disabled && value && (\n        <i className=\"wx-mmT8WH wxi-close\" onClick={unselectColor}></i>\n      )}\n\n      {popup && (\n        <Dropdown onCancel={() => setPopup(false)}>\n          <ColorBoard value={value} button=\"true\" onChange={selectColor} />\n        </Dropdown>\n      )}\n    </div>\n  );\n}\n", "import { locateID } from '@svar-ui/lib-dom';\n\nexport function getListHandlers() {\n  let navIndex = null;\n  let isVisible = false;\n\n  let list, options, navCallback, selectCallback;\n  const init = (l, o, n, c) => {\n    list = l;\n    options = o;\n    navCallback = n;\n    selectCallback = c;\n  };\n\n  const setNav = (index) => {\n    navIndex = index;\n    isVisible = navIndex !== null;\n    navCallback(navIndex);\n  };\n\n  const scrollTo = (navIndex, ev) => {\n    if (navIndex !== null && list) {\n      const next = list.querySelectorAll(`.wx-list > .wx-item`)[navIndex];\n      if (next) {\n        next.scrollIntoView({ block: 'nearest' });\n        if (ev) ev.preventDefault();\n      }\n    }\n  };\n\n  const navigate = (dir, ev) => {\n    const index =\n      dir === null\n        ? null\n        : Math.max(0, Math.min(navIndex + dir, options.length - 1));\n    if (index === navIndex) return;\n    setNav(index);\n\n    if (list) scrollTo(index, ev);\n    else requestAnimationFrame(() => scrollTo(index, ev));\n  };\n\n  const move = (ev) => {\n    const id = locateID(ev);\n    // if we have id:\"1\", the locateID will return 1 as number\n    // so using non-strict comparison\n    const index = options.findIndex((a) => a.id == id);\n\n    if (index !== navIndex) {\n      setNav(index);\n    }\n  };\n\n  const keydown = (ev, position) => {\n    switch (ev.code) {\n      case 'Enter':\n        if (isVisible) selectCallback();\n        else setNav(0);\n        break;\n\n      case 'Space':\n        if (!isVisible) setNav(0);\n        break;\n\n      case 'Escape':\n        navCallback((navIndex = null));\n        break;\n\n      case 'Tab':\n        navCallback((navIndex = null));\n        break;\n\n      case 'ArrowDown':\n        navigate(isVisible ? 1 : position || 0, ev);\n        break;\n\n      case 'ArrowUp':\n        navigate(isVisible ? -1 : position || 0, ev);\n        break;\n\n      default:\n        break;\n    }\n  };\n\n  return { move, keydown, init, navigate };\n}\n", "import { useEffect, useState, useRef, useCallback } from 'react';\nimport { useContext } from 'react';\nimport { snippet } from '@svar-ui/lib-react';\nimport { getListHandlers } from './listnav';\nimport Dropdown from '../Dropdown.jsx';\nimport { i18n } from '../../context.js';\nimport './SuggestDropdown.css';\nimport { defaultLocale } from './locale.js';\n\nexport default function SuggestDropdown({\n  items = [],\n  children,\n  onSelect,\n  onReady,\n}) {\n  const list = useRef();\n  const helpers = useRef(getListHandlers());\n\n  const [navIndex, setNavIndex] = useState(null);\n  const navIndexRef = useRef(navIndex);\n\n  const _ = (useContext(i18n) || defaultLocale()).getGroup('core');\n\n  const selectItem = (ev) => {\n    if (ev) ev.stopPropagation();\n    onSelect && onSelect({ id: items[navIndexRef.current]?.id });\n  };\n\n  useEffect(() => {\n    helpers.current.init(\n      list.current,\n      items,\n      (i) => {\n        setNavIndex(i);\n        navIndexRef.current = i;\n      },\n      selectItem,\n    );\n  }, [items, list.current]);\n\n  useEffect(() => {\n    onReady && onReady(helpers.current);\n  }, []);\n\n  const onCancel = useCallback(() => {\n    helpers.current.navigate(null);\n  }, [helpers]);\n\n  if (navIndex === null) return null;\n\n  return (\n    <Dropdown onCancel={onCancel}>\n      <div\n        className=\"wx-233fr7 wx-list\"\n        ref={list}\n        onClick={selectItem}\n        onMouseMove={helpers.current.move}\n      >\n        {items.length ? (\n          items.map((data, index) => (\n            <div\n              key={data.id}\n              className={`wx-233fr7 wx-item ${index === navIndex ? 'wx-focus' : ''}`}\n              data-id={data.id}\n            >\n              {children ? snippet(children, { option: data }) : data.label}\n            </div>\n          ))\n        ) : (\n          <div className=\"wx-233fr7 wx-no-data\">{_('No data')}</div>\n        )}\n      </div>\n    </Dropdown>\n  );\n}\n", "import { useState, useRef, useMemo, useCallback } from 'react';\nimport List from './helpers/SuggestDropdown.jsx';\nimport { useWritableProp } from '@svar-ui/lib-react';\nimport { useInputId } from './helpers/getInputId.js';\nimport './Combo.css';\n\nexport default function Combo({\n  value: valueProp = '',\n  id,\n  options = [],\n  textOptions = null,\n  textField = 'label',\n  placeholder = '',\n  title = '',\n  disabled = false,\n  error = false,\n  clear = false,\n  children: kids,\n  onChange,\n}) {\n  const inputId = useInputId(id);\n  const navigate = useRef(null);\n  const keydown = useRef(null);\n\n  const [value, setValue] = useWritableProp(valueProp);\n  const [filterActive, setFilterActive] = useState(false);\n  const [textInput, setTextInput] = useState('');\n\n  const inputElement = useRef(null);\n  const hasFocus = useRef(false);\n\n  // calculate the derived values\n  const text = useMemo(() => {\n    if (filterActive) return textInput;\n    if (value || value === 0) {\n      const option = (textOptions || options).find((a) => a.id === value);\n      if (option) return option[textField];\n    }\n    return '';\n  }, [filterActive, textInput, value, textOptions, options, textField]);\n\n  const filteredOptions = useMemo(() => {\n    if (!text || !filterActive) return options;\n\n    return options.filter((i) =>\n      i[textField].toLowerCase().includes(text.toLowerCase()),\n    );\n  }, [text, filterActive, options, textField]);\n\n  const index = useCallback(\n    () => filteredOptions.findIndex((a) => a.id === value),\n    [filteredOptions, value],\n  );\n\n  const ready = useCallback((ev) => {\n    navigate.current = ev.navigate;\n    keydown.current = ev.keydown;\n  }, []);\n\n  const doSelect = useCallback(\n    (id, effects) => {\n      if (id || id === 0) {\n        let selected = options.find((a) => a.id === id);\n        setFilterActive(false);\n\n        if (effects) navigate.current(null);\n\n        if (selected && value !== selected.id) {\n          const newValue = selected.id;\n          setValue(newValue);\n          onChange && onChange({ value: newValue });\n        }\n      }\n\n      if (!hasFocus.current && effects) inputElement.current.focus();\n    },\n    [options, value, onChange],\n  );\n\n  const selectByEvent = useCallback(\n    ({ id }) => {\n      doSelect(id, true);\n    },\n    [doSelect],\n  );\n\n  const doUnselect = useCallback(\n    (ev) => {\n      if (ev) ev.stopPropagation();\n\n      setValue('');\n      setFilterActive(false);\n      onChange && onChange({ value: '' });\n    },\n    [onChange],\n  );\n\n  const selectByText = useCallback(\n    (chunk) => {\n      if (!options.length) return;\n      if (chunk === '' && clear) {\n        doUnselect();\n        return;\n      }\n\n      let res = options.find((i) => i[textField] === chunk);\n      if (!res) {\n        res = options.find((i) =>\n          i[textField].toLowerCase().includes(chunk.toLowerCase()),\n        );\n      }\n\n      const id = res ? res.id : value || options[0].id;\n      doSelect(id, false);\n    },\n    [options, textField, clear, value, doSelect, doUnselect],\n  );\n\n  const handleInput = useCallback(() => {\n    setTextInput(inputElement.current.value);\n    setFilterActive(true);\n\n    if (filteredOptions.length) navigate.current(0);\n    else navigate.current(null);\n  }, [filteredOptions.length, navigate]);\n\n  const handleFocus = useCallback(() => {\n    hasFocus.current = true;\n  }, []);\n\n  const handleBlur = useCallback(() => {\n    hasFocus.current = false;\n    setTimeout(() => {\n      if (!hasFocus.current) selectByText(text);\n    }, 200);\n  }, [selectByText, text]);\n\n  return (\n    <div\n      className=\"wx-1j11Jk wx-combo\"\n      onClick={() => navigate.current(index())}\n      onKeyDown={(ev) => keydown.current(ev, index())}\n      title={title}\n    >\n      <input\n        className={'wx-1j11Jk wx-input ' + (error ? 'wx-error' : '')}\n        id={inputId}\n        ref={inputElement}\n        value={text}\n        disabled={disabled}\n        placeholder={placeholder}\n        onFocus={handleFocus}\n        onBlur={handleBlur}\n        onInput={handleInput}\n      />\n\n      {clear && !disabled && value ? (\n        <i className=\"wx-1j11Jk wx-icon wxi-close\" onClick={doUnselect}></i>\n      ) : (\n        <i className=\"wx-1j11Jk wx-icon wxi-angle-down\"></i>\n      )}\n\n      {!disabled && (\n        <List items={filteredOptions} onReady={ready} onSelect={selectByEvent}>\n          {({ option }) => <>{kids ? kids({ option }) : option[textField]}</>}\n        </List>\n      )}\n    </div>\n  );\n}\n", "import { useCallback, useEffect, useRef, useMemo } from 'react';\nimport { useWritableProp } from '@svar-ui/lib-react';\nimport { useInputId } from './helpers/getInputId.js';\nimport './Text.css';\n\nexport default function Text({\n  value: propsValue = '',\n  id,\n  readonly = false,\n  focus = false,\n  select = false,\n  type = 'text',\n  placeholder = '',\n  disabled = false,\n  error = false,\n  inputStyle = {},\n  title = '',\n  css = '',\n  icon = '',\n  clear = false,\n  onChange,\n}) {\n  const inputId = useInputId(id);\n  const [value, setValue] = useWritableProp(propsValue);\n  const inputRef = useRef(null);\n\n  const cssString = useMemo(\n    () =>\n      icon && css.indexOf('wx-icon-left') === -1 ? 'wx-icon-right ' + css : css,\n    [icon, css],\n  );\n\n  const hasLeftIcon = useMemo(\n    () => icon && css.indexOf('wx-icon-left') !== -1,\n    [icon, css],\n  );\n\n  useEffect(() => {\n    const timer = setTimeout(() => {\n      if (focus && inputRef.current) inputRef.current.focus();\n      if (select && inputRef.current) inputRef.current.select();\n    }, 1);\n\n    return () => clearTimeout(timer);\n  }, [focus, select]);\n\n  const oninput = useCallback(\n    (e) => {\n      const newValue = e.target.value;\n      setValue(newValue);\n      onChange && onChange({ value: newValue, input: true });\n    },\n    [onChange],\n  );\n\n  const ontextchange = useCallback(\n    (ev) => onChange && onChange({ value: ev.target.value }),\n    [onChange],\n  );\n\n  function clearValue(ev) {\n    ev.stopPropagation();\n    setValue('');\n    onChange && onChange({ value: '' });\n  }\n\n  let inputType = type;\n  if (type !== 'password' && type !== 'number') {\n    inputType = 'text';\n  }\n\n  // MK :: EXTRACT\n  useEffect(() => {\n    const handler = ontextchange;\n    const node = inputRef.current;\n    node.addEventListener('change', handler);\n    return () => {\n      if (node) {\n        node.removeEventListener('change', handler);\n      }\n    };\n  }, [ontextchange]);\n\n  return (\n    <div\n      className={`wx-hQ64J4 wx-text ${cssString} ${error ? 'wx-error' : ''} ${\n        disabled ? 'wx-disabled' : ''\n      } ${clear ? 'wx-clear' : ''}`}\n    >\n      <input\n        className=\"wx-hQ64J4 wx-input\"\n        ref={inputRef}\n        id={inputId}\n        readOnly={readonly}\n        disabled={disabled}\n        placeholder={placeholder}\n        type={inputType}\n        style={inputStyle}\n        title={title}\n        value={value}\n        onInput={oninput}\n      />\n\n      {clear && !disabled && value ? (\n        <>\n          <i className=\"wx-hQ64J4 wx-icon wxi-close\" onClick={clearValue}></i>\n          {hasLeftIcon && <i className={`wx-hQ64J4 wx-icon ${icon}`}></i>}\n        </>\n      ) : icon ? (\n        <i className={`wx-hQ64J4 wx-icon ${icon}`}></i>\n      ) : null}\n    </div>\n  );\n}\n", "import { useContext, useMemo } from 'react';\nimport { dateToString, getDuodecade } from '@svar-ui/lib-dom';\nimport { i18n } from '../../context.js';\n\nfunction Header({ date, type, part, onShift }) {\n  const { calendar, formats } = useContext(i18n).getRaw();\n\n  const year = date.getFullYear();\n\n  const label = useMemo(() => {\n    switch (type) {\n      case 'month':\n        return dateToString(formats.monthYearFormat, calendar)(date);\n      case 'year':\n        return dateToString(formats.yearFormat, calendar)(date);\n      case 'duodecade': {\n        const { start, end } = getDuodecade(year);\n        const yearFormat = dateToString(formats.yearFormat, calendar);\n        return `${yearFormat(new Date(start, 0, 1))} - ${yearFormat(new Date(end, 11, 31))}`;\n      }\n      default:\n        return '';\n    }\n  }, [date, type, year, calendar, formats]);\n\n  function changeType() {\n    onShift && onShift({ diff: 0, type });\n  }\n\n  return (\n    <div className=\"wx-8HQVQV wx-header\">\n      {part !== 'right' ? (\n        <i\n          className=\"wx-8HQVQV wx-pager wxi-angle-left\"\n          onClick={() => onShift && onShift({ diff: -1, type })}\n        />\n      ) : (\n        <span className=\"wx-8HQVQV wx-spacer\" />\n      )}\n\n      <span className=\"wx-8HQVQV wx-label\" onClick={changeType}>\n        {label}\n      </span>\n\n      {part !== 'left' ? (\n        <i\n          className=\"wx-8HQVQV wx-pager wxi-angle-right\"\n          onClick={() => onShift && onShift({ diff: 1, type })}\n        />\n      ) : (\n        <span className=\"wx-8HQVQV wx-spacer\" />\n      )}\n    </div>\n  );\n}\n\nimport './Header.css';\n\nexport default Header;\n", "import './Button.css';\n\nexport default function Button({ onClick, children }) {\n  return (\n    <button className=\"wx-3s8W4d wx-button\" onClick={onClick}>\n      {children}\n    </button>\n  );\n}\n", "import { useContext, useMemo, useEffect, useRef } from 'react';\nimport { delegateClick } from '@svar-ui/lib-dom';\nimport { i18n } from '../../context.js';\nimport './Month.css';\nimport { defaultLocale } from '../helpers/locale.js';\n\nexport default function Month({\n  value,\n  current,\n  part = '',\n  markers = null,\n  onCancel,\n  onChange,\n}) {\n  const locale = (useContext(i18n) || defaultLocale()).getRaw().calendar;\n  const weekStart = (locale.weekStart || 7) % 7;\n  const weekdays = locale.dayShort\n    .slice(weekStart)\n    .concat(locale.dayShort.slice(0, weekStart));\n\n  const dv = (d, dm, dd) =>\n    new Date(\n      d.getFullYear(),\n      d.getMonth() + (dm || 0),\n      d.getDate() + (dd || 0),\n    );\n  let ranges = part !== 'normal';\n\n  function isWeekEnd(date) {\n    const d = date.getDay();\n    return d === 0 || d === 6;\n  }\n\n  function getStart() {\n    const start = dv(current, 0, 1 - current.getDate());\n    start.setDate(start.getDate() - ((start.getDay() - (weekStart - 7)) % 7));\n    return start;\n  }\n  function getEnd() {\n    const end = dv(current, 1, -current.getDate());\n    end.setDate(end.getDate() + ((6 - end.getDay() + weekStart) % 7));\n    return end;\n  }\n\n  //MK : HACK\n  const lastTime = useRef(0);\n  function selectDate(date, e) {\n    if (e.timeStamp === lastTime.current) return;\n    lastTime.current = e.timeStamp;\n\n    e.stopPropagation();\n    if (onChange) onChange(new Date(new Date(date)));\n    if (onCancel) onCancel();\n  }\n\n  const date = useMemo(() => {\n    if (part == 'normal') return [value ? dv(value).valueOf() : 0];\n    return value\n      ? [\n          value.start ? dv(value.start).valueOf() : 0,\n          value.end ? dv(value.end).valueOf() : 0,\n        ]\n      : [0, 0];\n  }, [part, value]);\n\n  const days = useMemo(() => {\n    const start = getStart();\n    const end = getEnd();\n    const curMonth = current.getMonth();\n\n    let days = [];\n    for (let d = start; d <= end; d.setDate(d.getDate() + 1)) {\n      const day = {\n        day: d.getDate(),\n        in: d.getMonth() === curMonth,\n        date: d.valueOf(),\n      };\n\n      let css = '';\n      css += !day.in ? ' wx-inactive' : '';\n      css += date.indexOf(day.date) > -1 ? ' wx-selected' : '';\n\n      if (ranges) {\n        const s = day.date == date[0];\n        const e = day.date == date[1];\n        if (s && !e) css += ' wx-left';\n        else if (e && !s) css += ' wx-right';\n\n        if (day.date > date[0] && day.date < date[1]) css += ' wx-inrange';\n      }\n\n      css += isWeekEnd(d) ? ' wx-weekend' : '';\n      if (markers) {\n        const mark = markers(d);\n        if (mark) css += ' ' + mark;\n      }\n\n      days.push({ ...day, css });\n    }\n    return days;\n  }, [current, date, ranges, markers]);\n\n  const delegateRef = useRef(null);\n  let delegateHandler = useRef({});\n  delegateHandler.current.click = selectDate;\n\n  useEffect(() => {\n    delegateClick(delegateRef.current, delegateHandler.current);\n  }, []);\n\n  return (\n    <div>\n      <div className=\"wx-398RBS wx-weekdays\">\n        {weekdays.map((day) => (\n          <div key={day} className=\"wx-398RBS wx-weekday\">\n            {day}\n          </div>\n        ))}\n      </div>\n      <div className=\"wx-398RBS wx-days\" ref={delegateRef}>\n        {days.map((day) => (\n          <div\n            key={day.date}\n            className={`wx-398RBS wx-day ${day.css} ${!day.in ? 'wx-out' : ''}`}\n            data-id={day.date}\n          >\n            {day.day}\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n", "import { useContext, useMemo, useCallback } from 'react';\nimport Button from './Button.jsx';\nimport { getPartValue } from './helpers';\nimport { i18n } from '../../context.js';\nimport './Year.css';\nimport { useWritableProp } from '@svar-ui/lib-react';\n\nexport default function Year({\n  value: valueProp,\n  current: currentProp,\n  part,\n  onCancel,\n  onChange,\n  onShift,\n}) {\n  const [value, setValue] = useWritableProp(valueProp || new Date());\n  const [current, setCurrent] = useWritableProp(currentProp || new Date());\n\n  const locale = useContext(i18n).getRaw().calendar;\n  const months = locale.monthShort || [];\n\n  const monthNum = useMemo(() => {\n    return current.getMonth();\n  }, [current]);\n\n  const selectMonth = useCallback(\n    (month, e) => {\n      if (month !== null && month !== undefined) {\n        e.stopPropagation();\n        const newCurrent = new Date(current);\n        newCurrent.setMonth(month);\n        setCurrent(newCurrent);\n\n        onShift && onShift({ current: newCurrent });\n      }\n\n      if (part === 'normal') setValue(new Date(current));\n\n      onCancel && onCancel();\n    },\n    [current, part, onShift, onCancel],\n  );\n\n  const done = useCallback(() => {\n    const date = new Date(getPartValue(value, part) || current);\n\n    date.setMonth(current.getMonth());\n    date.setFullYear(current.getFullYear());\n\n    onChange && onChange(date);\n  }, [value, current, part, onChange]);\n\n  const handleMonthClick = useCallback(\n    (e) => {\n      const target = e.target.closest('[data-id]');\n      if (target) {\n        const month = parseInt(target.getAttribute('data-id'), 10);\n        selectMonth(month, e);\n      }\n    },\n    [selectMonth],\n  );\n\n  return (\n    <>\n      <div className={'wx-34U8T8 wx-months'} onClick={handleMonthClick}>\n        {months.map((month, i) => (\n          <div\n            key={i}\n            className={\n              'wx-34U8T8 wx-month' + (monthNum === i ? ' wx-current' : '')\n            }\n            data-id={i}\n          >\n            {month}\n          </div>\n        ))}\n      </div>\n      <div className={'wx-34U8T8 wx-buttons'}>\n        <Button onClick={done}>{locale.done}</Button>\n      </div>\n    </>\n  );\n}\n", "import { useContext, useMemo, useRef, useEffect } from 'react';\nimport { useWritableProp } from '@svar-ui/lib-react';\nimport { delegateClick, getDuodecade } from '@svar-ui/lib-dom';\nimport Button from './Button.jsx';\nimport { getPartValue } from './helpers';\nimport { i18n } from '../../context.js';\nimport './Duodecade.css';\n\nconst cssScope = 'wx-1XEF33';\n\nconst Duodecade = ({ value, current, onCancel, onChange, onShift, part }) => {\n  const _ = useContext(i18n).getRaw().calendar;\n\n  const [currentState, setCurrent] = useWritableProp(current);\n  const [valueState, setValue] = useWritableProp(value);\n\n  const year = useMemo(() => currentState.getFullYear(), [currentState]);\n\n  const years = useMemo(() => {\n    const { start, end } = getDuodecade(year);\n    const years = [];\n    for (let y = start; y <= end; ++y) {\n      years.push(y);\n    }\n    return years;\n  }, [year]);\n\n  const selectYears = {\n    click: selectYear,\n  };\n\n  function selectYear(yearVal, e) {\n    if (yearVal) {\n      e.stopPropagation();\n      const newCurrent = new Date(currentState);\n      newCurrent.setFullYear(yearVal);\n      setCurrent(newCurrent);\n\n      onShift && onShift({ current: newCurrent });\n    }\n\n    if (part === 'normal') {\n      setValue(new Date(currentState));\n    }\n\n    onCancel && onCancel();\n  }\n\n  function done() {\n    const date = new Date(getPartValue(valueState, part) || currentState);\n\n    date.setFullYear(currentState.getFullYear());\n\n    onChange && onChange(date);\n  }\n\n  const containerRef = useRef(null);\n\n  useEffect(() => {\n    if (containerRef.current) {\n      delegateClick(containerRef.current, selectYears);\n    }\n  }, []);\n\n  return (\n    <>\n      <div className={cssScope + ' wx-years'} ref={containerRef}>\n        {years.map((y, i) => (\n          <div\n            key={i}\n            className={\n              cssScope +\n              ` wx-year ${year == y ? 'wx-current' : ''} ${i === 0 ? 'wx-prev-decade' : ''} ${i === 11 ? 'wx-next-decade' : ''}`\n            }\n            data-id={y}\n          >\n            {y}\n          </div>\n        ))}\n      </div>\n      <div className={cssScope + ' wx-buttons'}>\n        <Button onClick={done}>{_.done}</Button>\n      </div>\n    </>\n  );\n};\n\nexport default Duodecade;\n", "import Month from './Month.jsx';\nimport Year from './Year.jsx';\nimport Duodecade from './Duodecade.jsx';\n\nexport const configs = {\n  month: {\n    component: Month,\n    next: nextMonth,\n    prev: prevMonth,\n  },\n  year: {\n    component: Year,\n    next: nextYear,\n    prev: prevYear,\n  },\n  duodecade: {\n    component: Duodecade,\n    next: nextDuodecade,\n    prev: prevDuodecade,\n  },\n};\n\nfunction prevMonth(current) {\n  current = new Date(current);\n  current.setMonth(current.getMonth() - 1);\n  return current;\n}\nfunction nextMonth(current) {\n  current = new Date(current);\n  current.setMonth(current.getMonth() + 1);\n  return current;\n}\nfunction prevYear(current) {\n  current = new Date(current);\n  current.setFullYear(current.getFullYear() - 1);\n  return current;\n}\nfunction nextYear(current) {\n  current = new Date(current);\n  current.setFullYear(current.getFullYear() + 1);\n  return current;\n}\nfunction prevDuodecade(current) {\n  current = new Date(current);\n  current.setFullYear(current.getFullYear() - 10);\n  return current;\n}\nfunction nextDuodecade(current) {\n  current = new Date(current);\n  current.setFullYear(current.getFullYear() + 10);\n  return current;\n}\n\nexport function getPartValue(value, part) {\n  let date;\n  if (part === 'normal') date = value;\n  else {\n    const { start, end } = value;\n    if (part === 'left') date = start;\n    else if (part == 'right') date = end;\n    else date = start ? end : start;\n  }\n\n  return date;\n}\n", "import { useContext, useState, useMemo } from 'react';\nimport Header from './Header.jsx';\nimport Button from './Button.jsx';\nimport { configs } from './helpers';\nimport { i18n } from '../../context.js';\nimport './Panel.css';\n\nconst defaultButtons = ['clear', 'today'];\n\nfunction getButtonValue(btn) {\n  if (btn === 'done') return -1;\n  if (btn === 'clear') return null;\n  if (btn === 'today') return new Date();\n}\n\nfunction Panel({\n  value,\n  current,\n  onCurrentChange,\n  part = 'normal',\n  markers = null,\n  buttons,\n  onShift,\n  onChange,\n}) {\n  const _ = useContext(i18n).getGroup('calendar');\n\n  const [type, setType] = useState('month');\n\n  const buttonsList = Array.isArray(buttons)\n    ? buttons\n    : buttons\n      ? defaultButtons\n      : [];\n\n  const selectDate = (ev, date) => {\n    ev.preventDefault();\n    onChange && onChange({ value: date });\n  };\n\n  const oncancel = () => {\n    if (type === 'duodecade') setType('year');\n    else if (type === 'year') setType('month');\n  };\n\n  const onShiftLocal = (ev) => {\n    const { diff, current: newCurrent } = ev;\n\n    if (diff === 0) {\n      if (type === 'month') setType('year');\n      else if (type === 'year') setType('duodecade');\n      return;\n    }\n    if (diff) {\n      const obj = configs[type];\n      onCurrentChange(diff > 0 ? obj.next(current) : obj.prev(current));\n    } else if (newCurrent) {\n      onCurrentChange(newCurrent);\n    }\n\n    onShift && onShift();\n  };\n\n  const onChangeLocal = (value) => {\n    setType('month');\n    onChange && onChange({ select: true, value });\n  };\n\n  const CalendarView = useMemo(() => configs[type].component, [type]);\n\n  return (\n    <div\n      className={`wx-2Gr4AS wx-calendar ${part !== 'normal' && part !== 'both' ? 'wx-part' : ''}`}\n    >\n      <div className=\"wx-2Gr4AS wx-wrap\">\n        <Header date={current} part={part} type={type} onShift={onShiftLocal} />\n        <div>\n          <CalendarView\n            value={value}\n            current={current}\n            onCurrentChange={onCurrentChange}\n            part={part}\n            markers={markers}\n            onCancel={oncancel}\n            onChange={onChangeLocal}\n            onShift={onShiftLocal}\n          />\n          {type === 'month' && buttonsList.length > 0 && (\n            <div className=\"wx-2Gr4AS wx-buttons\">\n              {buttonsList.map((button) => (\n                <div key={button} className=\"wx-2Gr4AS wx-button-item\">\n                  <Button\n                    onClick={(e) => selectDate(e, getButtonValue(button))}\n                  >\n                    {_(button)}\n                  </Button>\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default Panel;\n", "import { useContext, useMemo } from 'react';\nimport { i18n } from './context';\nimport { locale } from '@svar-ui/lib-dom';\nimport { en } from '@svar-ui/core-locales';\n\nexport default function Component(props) {\n  let { words = null, optional = false, children } = props;\n\n  let l = useContext(i18n);\n  const v = useMemo(() => {\n    let t = l;\n    if (!t || !t.extend) t = locale(en);\n    if (words !== null) t = t.extend(words, optional);\n    return t;\n  }, [words, optional, l]);\n\n  return <i18n.Provider value={v}>{children}</i18n.Provider>;\n}\n", "import { useEffect, useCallback } from 'react';\nimport Panel from './calendar/Panel.jsx';\nimport { useWritableProp } from '@svar-ui/lib-react';\nimport Locale from '../Locale.jsx';\n\nfunction fixCurrent(current, value, setCurrent, force) {\n  if (!current || force) {\n    const newCurrent = value ? new Date(value) : new Date();\n    newCurrent.setDate(1);\n    setCurrent(newCurrent);\n  } else {\n    if (current.getDate() !== 1) {\n      const newCurrent = new Date(current);\n      newCurrent.setDate(1);\n      setCurrent(newCurrent);\n    }\n  }\n}\n\nconst defaultButtons = ['clear', 'today'];\n\nexport default function Calendar({\n  value: valueProp,\n  current: currentProp,\n  markers = null,\n  buttons = defaultButtons,\n  onChange,\n}) {\n  const [value, setValue] = useWritableProp(valueProp);\n  const [current, setCurrent] = useWritableProp(currentProp);\n\n  useEffect(() => {\n    fixCurrent(current, value, setCurrent, false);\n  }, [value, current]);\n\n  const onChangeLocal = useCallback(\n    (v) => {\n      const x = v.value;\n      if (x) {\n        setValue(new Date(x));\n        fixCurrent(current, new Date(x), setCurrent, true);\n      } else {\n        setValue(null);\n      }\n\n      onChange && onChange({ value: x ? new Date(x) : null });\n    },\n    [onChange, current],\n  );\n\n  const onCurrentChangeLocal = useCallback(\n    (v) => {\n      setCurrent(v);\n    },\n    [setCurrent],\n  );\n\n  if (!current) return null;\n\n  return (\n    <Locale>\n      <Panel\n        value={value}\n        current={current}\n        markers={markers}\n        buttons={buttons}\n        onChange={onChangeLocal}\n        onCurrentChange={onCurrentChangeLocal}\n      />\n    </Locale>\n  );\n}\n", "import { useState, useEffect, useMemo, useContext } from 'react';\nimport { dateToString } from '@svar-ui/lib-dom';\nimport { i18n } from '../context.js';\n\nimport Text from './Text.jsx';\nimport Dropdown from './Dropdown.jsx';\nimport Calendar from './Calendar.jsx';\nimport './DatePicker.css';\nimport { defaultLocale } from './helpers/locale.js';\n\nconst defaultButtons = ['clear', 'today'];\n\nexport default function DatePicker({\n  value: propValue,\n  id,\n  disabled = false,\n  error = false,\n  width = 'unset',\n  align = 'start',\n  placeholder = '',\n  format = '',\n  buttons = defaultButtons,\n  css = '',\n  title = '',\n  editable = false,\n  clear = false,\n  onChange,\n}) {\n  const { calendar: calendarLocale, formats } = (\n    useContext(i18n) || defaultLocale()\n  ).getRaw();\n  const f = format || formats?.dateFormat;\n  let dateFormat =\n    typeof f === 'function' ? f : dateToString(f, calendarLocale);\n\n  const [value, setValue] = useState(propValue);\n  const [popup, setPopup] = useState(false);\n\n  // Update local value when prop value changes\n  useEffect(() => {\n    setValue(propValue);\n  }, [propValue]);\n\n  function oncancel() {\n    setPopup(false);\n  }\n\n  function doChange(v) {\n    // skip \"select\" event if the same value\n    // or different objects with the same value\n    // or different objects with the same value\n    const skipEvent =\n      v === value ||\n      (v && value && v.valueOf() === value.valueOf()) ||\n      (!v && !value);\n\n    setValue(v);\n    if (!skipEvent) {\n      onChange && onChange({ value: v });\n    }\n\n    // fire after on-click finished\n    setTimeout(oncancel, 1);\n  }\n\n  const formattedValue = useMemo(\n    () => (value ? dateFormat(value) : ''),\n    [value, dateFormat],\n  );\n\n  function onchangeHandler({ value: v, input }) {\n    if (!editable && !clear) return;\n    if (input) return;\n\n    // convert to date, but ignore empty string input\n    let date =\n      typeof editable === 'function' ? editable(v) : v ? new Date(v) : null;\n\n    // if date is invalid ( incorrect text input ) then use old value\n    // else use the entered date\n    // in any case fallback to null, to prevent undefined as value\n    date = isNaN(date) ? value || null : date || null;\n    doChange(date);\n  }\n\n  // Handle scroll event on window\n  useEffect(() => {\n    const handleScroll = oncancel;\n    window.addEventListener('scroll', handleScroll);\n    return () => window.removeEventListener('scroll', handleScroll);\n  }, []);\n\n  return (\n    <div className=\"wx-1lKOFG wx-datepicker\" onClick={() => setPopup(true)}>\n      <Text\n        css={css}\n        title={title}\n        value={formattedValue}\n        id={id}\n        readonly={!editable}\n        disabled={disabled}\n        error={error}\n        placeholder={placeholder}\n        onInput={oncancel}\n        onChange={onchangeHandler}\n        icon=\"wxi-calendar\"\n        inputStyle={{\n          cursor: 'pointer',\n          width: '100%',\n          paddingRight:\n            'calc(var(--wx-input-icon-size) + var(--wx-input-icon-indent) * 2)',\n        }}\n        clear={clear}\n      />\n\n      {popup && !disabled && (\n        <Dropdown\n          onCancel={oncancel}\n          width={width}\n          align={align}\n          autoFit={!!align}\n        >\n          <Calendar\n            buttons={buttons}\n            value={value}\n            onChange={(e) => doChange(e.value)}\n          />\n        </Dropdown>\n      )}\n    </div>\n  );\n}\n", "import { useState, useEffect, useCallback } from 'react';\nimport Panel from './calendar/Panel';\nimport { useWritableProp } from '@svar-ui/lib-react';\nimport './RangeCalendar.css';\nimport Locale from '../Locale.jsx';\n\nconst defaultButtons = ['clear', 'today'];\n\nconst RangeCalendar = ({\n  start: startProp,\n  end: endProp,\n  current,\n  months = 2,\n  markers = null,\n  buttons = defaultButtons,\n  onChange,\n}) => {\n  const [start, setStart] = useWritableProp(startProp);\n  const [end, setEnd] = useWritableProp(endProp);\n  const [leftCurrent, setLeftCurrent] = useState();\n  const [rightCurrent, setRightCurrent] = useState();\n\n  const addMonth = useCallback((l, diff, rPrev) => {\n    const r = new Date(l);\n    r.setMonth(r.getMonth() + diff);\n    if (rPrev && r.valueOf() === rPrev.valueOf()) return rPrev;\n    return r;\n  }, []);\n\n  const onLeft = useCallback(\n    (v) => {\n      setLeftCurrent(() => {\n        const newLeft = new Date(v);\n        newLeft.setDate(1);\n        setRightCurrent(addMonth(newLeft, 1));\n        return newLeft;\n      });\n    },\n    [addMonth],\n  );\n\n  const onRight = useCallback(\n    (v) => {\n      setRightCurrent(() => {\n        const newRight = new Date(v);\n        newRight.setDate(1);\n        setLeftCurrent(addMonth(newRight, -1));\n        return newRight;\n      });\n    },\n    [addMonth],\n  );\n\n  // Effect for initializing leftCurrent based on start/current\n  useEffect(() => {\n    const startVal = start;\n    const currentVal = current;\n\n    if (!leftCurrent) {\n      onLeft(startVal ? new Date(startVal) : currentVal || new Date());\n    }\n  }, [start, current, leftCurrent, onLeft]);\n\n  const selectChange = useCallback(\n    (ev) => {\n      const v = ev.value;\n      let s = start,\n        e = end;\n      const final = v === -1;\n      if (!final) {\n        if (ev.select) {\n          if (!start || end) {\n            setStart((s = v));\n            setEnd((e = null));\n          } else {\n            if (start > v) {\n              setEnd((e = start));\n              setStart((s = v));\n            } else {\n              setEnd((e = v));\n            }\n          }\n        } else {\n          if (!v) {\n            setStart((s = null));\n            setEnd((e = null));\n          } else {\n            setStart((s = new Date(v)));\n            setEnd((e = new Date(v)));\n          }\n        }\n      }\n\n      if (final || !buttons.includes('done'))\n        onChange && onChange({ start: s, end: e });\n      return [s, e];\n    },\n    [start, end, buttons, onChange],\n  );\n\n  const doChangeStart = useCallback(\n    (v) => {\n      const [s] = selectChange(v);\n      if (s) onLeft(new Date(s));\n    },\n    [onLeft, start, end],\n  );\n\n  const doChangeEnd = useCallback(\n    (v) => {\n      const [, e] = selectChange(v);\n      if (e) onRight(new Date(e));\n    },\n    [onRight, start, end],\n  );\n\n  if (!leftCurrent || !rightCurrent) return null;\n\n  if (months === 1) {\n    return (\n      <Locale>\n        <Panel\n          value={{ start, end }}\n          current={leftCurrent}\n          setCurrent={onLeft}\n          markers={markers}\n          buttons={buttons}\n          part=\"both\"\n          onChange={doChangeStart}\n        />\n      </Locale>\n    );\n  } else {\n    return (\n      <Locale>\n        <div className=\"wx-p2jCaW wx-rangecalendar\">\n          <div className=\"wx-p2jCaW wx-half\">\n            <Panel\n              value={{ start, end }}\n              current={leftCurrent}\n              setCurrent={onLeft}\n              markers={markers}\n              buttons={false}\n              part=\"left\"\n              onChange={doChangeStart}\n              onCurrentChange={(v) => onLeft(v)}\n            />\n          </div>\n          <div className=\"wx-p2jCaW wx-half\">\n            <Panel\n              value={{ start, end }}\n              current={rightCurrent}\n              setCurrent={onRight}\n              markers={markers}\n              buttons={buttons}\n              part=\"right\"\n              onChange={doChangeEnd}\n              onCurrentChange={(v) => onRight(v)}\n            />\n          </div>\n        </div>\n      </Locale>\n    );\n  }\n};\n\nexport default RangeCalendar;\n", "import { useState, useEffect, useMemo, useContext, useCallback } from 'react';\nimport { dateToString } from '@svar-ui/lib-dom';\nimport { useWritableProp } from '@svar-ui/lib-react';\nimport { i18n } from '../context.js';\n\nimport Text from './Text.jsx';\nimport Dropdown from './Dropdown.jsx';\nimport RangeCalendar from './RangeCalendar.jsx';\nimport { defaultLocale } from './helpers/locale.js';\n\nconst defaultButtons = ['clear', 'today'];\n\nconst DateRangePicker = ({\n  value: valueProp,\n  onChange,\n  id,\n  disabled = false,\n  error = false,\n  width = 'unset',\n  align = 'start',\n  placeholder = '',\n  css = '',\n  title = '',\n  format = '',\n  months = 2,\n  buttons = defaultButtons,\n  editable = false,\n  clear = false,\n}) => {\n  const [value, setValue] = useWritableProp(valueProp);\n  const { calendar: calendarLocale, formats } = (\n    useContext(i18n) || defaultLocale()\n  ).getRaw();\n\n  const f = format || formats?.dateFormat;\n  const dateFormat =\n    typeof f === 'function' ? f : dateToString(f, calendarLocale);\n\n  const [popup, setPopup] = useState(false);\n\n  const onCancel = useCallback(() => {\n    setPopup(false);\n  }, []);\n\n  const formattedValue = useMemo(() => {\n    return value\n      ? value.start\n        ? dateFormat(value.start) +\n          (value.end ? ` - ${dateFormat(value.end)}` : '')\n        : dateFormat(value)\n      : '';\n  }, [value, dateFormat]);\n\n  const start = useMemo(() => {\n    return value ? value.start || null : null;\n  }, [value]);\n\n  const end = useMemo(() => {\n    return value ? value.end || null : null;\n  }, [value]);\n\n  const doChange = useCallback(\n    (d) => {\n      const newValue = d.start || d.end ? { start: d.start, end: d.end } : null;\n\n      // Handle both cases: either external setValue or onChange prop\n      if (setValue) {\n        setValue(newValue);\n      } else {\n        // Parent must handle value prop update via onChange\n      }\n\n      // fire after on-click finished\n      if ((d.start && d.end) || (!d.start && !d.end)) {\n        // FIXME - select event will trigger even if the same value\n        if (onChange) {\n          onChange({ value: newValue });\n        }\n        setTimeout(onCancel, 1);\n      }\n    },\n    [onChange, onCancel, setValue],\n  );\n\n  const doInputChange = useCallback(\n    (ev) => {\n      if (!editable && !clear) return;\n\n      const { value: v, input } = ev;\n      if (input) return;\n\n      const [s, e] = v.split(' -').map((a, i) => {\n        const av = a.trim();\n        let date =\n          typeof editable === 'function'\n            ? editable(av)\n            : av\n              ? new Date(av)\n              : null;\n\n        // if date is invalid ( incorrect text input ) then use old value\n        // else use the entered date\n        // in any case fallback to null, to prevent undefined as value\n        let val = i === 0 ? start : end;\n        return isNaN(date) ? (val ? val : null) : date || null;\n      });\n\n      doChange({ start: s, end: e });\n    },\n    [editable, clear, start, end, doChange],\n  );\n\n  useEffect(() => {\n    const handleScroll = () => {\n      onCancel();\n    };\n\n    window.addEventListener('scroll', handleScroll);\n    return () => {\n      window.removeEventListener('scroll', handleScroll);\n    };\n  }, [onCancel]);\n\n  return (\n    <div\n      className={`wx-1b0WDQ wx-daterangepicker ${disabled ? 'wx-disabled' : ''} ${error ? 'wx-error' : ''}`}\n      onClick={() => setPopup(true)}\n    >\n      <Text\n        css={css}\n        title={title}\n        value={formattedValue}\n        id={id}\n        readonly={!editable}\n        disabled={disabled}\n        placeholder={placeholder}\n        error={error}\n        onChange={doInputChange}\n        icon=\"wxi-calendar\"\n        inputStyle={{\n          cursor: 'pointer',\n          width: '100%',\n          paddingRight:\n            'calc(var(--wx-input-icon-size) + var(--wx-input-icon-indent) * 2)',\n        }}\n        clear={clear}\n      />\n\n      {popup && !disabled && (\n        <Dropdown\n          onCancel={onCancel}\n          width={width}\n          align={align}\n          autoFit={!!align}\n        >\n          <RangeCalendar\n            onCancel={onCancel}\n            buttons={buttons}\n            start={start}\n            end={end}\n            months={months}\n            onChange={doChange}\n          />\n        </Dropdown>\n      )}\n    </div>\n  );\n};\n\nexport default DateRangePicker;\n\nimport './DateRangePicker.css';\n", "import { useEffect, useRef, useState, useMemo } from 'react';\nimport { useHotkeys } from '@svar-ui/lib-react';\nimport Button from './Button.jsx';\nimport './Fullscreen.css';\n\nexport default function Fullscreen({\n  hotkey = null,\n  toggleButton,\n  children,\n}) {\n  const nodeRef = useRef(null);\n  const [inFullscreen, setInFullscreen] = useState(false);\n\n  const icon = useMemo(\n    () => `wxi-${inFullscreen ? 'collapse' : 'expand'}`,\n    [inFullscreen],\n  );\n\n  const toggleFullscreen = useRef(null);\n  toggleFullscreen.current = () => {\n    const node = nodeRef.current;\n    if (!inFullscreen && node) {\n      node.requestFullscreen();\n    } else if (inFullscreen) {\n      document.exitFullscreen();\n    }\n    setInFullscreen((prev) => !prev);\n  };\n\n  useHotkeys({ [hotkey]: () => toggleFullscreen.current() }, nodeRef);\n\n  useEffect(() => {\n    const setFullscreenState = () => {\n      setInFullscreen(document.fullscreenElement === nodeRef.current);\n    };\n\n    document.addEventListener('fullscreenchange', setFullscreenState);\n    return () => {\n      document.removeEventListener('fullscreenchange', setFullscreenState);\n    };\n  }, []);\n\n  return (\n    <div className=\"wx-13aa5W wx-fullscreen\" ref={nodeRef} tabIndex={-1}>\n      {children}\n      {toggleButton ? (\n        toggleButton(toggleFullscreen.current, inFullscreen)\n      ) : (\n        <Button css=\"wx-13aa5W wx-fullscreen-button\" onClick={toggleFullscreen.current}>\n          <i className={`wx-13aa5W ${icon} wx-fullscreen-icon`}> </i>\n        </Button>\n      )}\n    </div>\n  );\n}\n", "import './Icon.css';\n\nexport default function Icon({ css = '', title = '', children, onClick }) {\n  if (children) {\n    return (\n      <i\n        title={title}\n        role=\"img\"\n        className={`wx-mdnST1 wx-icon ${css}`}\n        onClick={onClick}\n      >\n        {children}\n      </i>\n    );\n  } else {\n    return (\n      <i\n        title={title}\n        className={`wx-mdnST1 wx-icon ${css}`}\n        onClick={onClick}\n      />\n    );\n  }\n}\n", "import { useState, useMemo, useRef, useCallback } from 'react';\nimport { useWritableProp, snippet } from '@svar-ui/lib-react';\nimport { useInputId } from './helpers/getInputId.js';\nimport List from './helpers/SuggestDropdown.jsx';\nimport Checkbox from './Checkbox.jsx';\nimport './MultiCombo.css';\n\nconst defaultValue = [];\n\nexport default function MultiCombo({\n  id,\n  value: valueProp = defaultValue,\n  options = [],\n  textOptions = null,\n  textField = 'label',\n  placeholder = '',\n  title = '',\n  disabled = false,\n  error = false,\n  checkboxes = false,\n  onChange,\n  children,\n}) {\n  const inputId = useInputId(id);\n  const navigate = useRef(null);\n  const keydown = useRef(null);\n\n  const [value, setValue] = useWritableProp(valueProp);\n\n  const [text, setText] = useState('');\n  const [focus, setFocus] = useState(false);\n  const inputElement = useRef(null);\n\n  const selected = useMemo(() => {\n    return value\n      ? (textOptions || options).filter((i) => value.includes(i.id))\n      : [];\n  }, [value, textOptions, options]);\n\n  const filterOptions = useMemo(() => {\n    const o = options;\n    return text\n      ? o.filter((i) => i[textField].toLowerCase().includes(text.toLowerCase()))\n      : o;\n  }, [text, options, textField]);\n\n  const onready = useCallback((ev) => {\n    navigate.current = ev.navigate;\n    keydown.current = ev.keydown;\n  }, []);\n\n  const input = useCallback(() => {\n    if (filterOptions.length) navigate.current(0);\n    else navigate.current(null);\n  }, [filterOptions]);\n\n  const onselect = useCallback(\n    (ev) => {\n      const { id } = ev;\n\n      if (id) {\n        let next;\n        if (value) {\n          if (value.includes(id)) {\n            next = value.filter((i) => i !== id);\n          } else {\n            next = [...value, id];\n          }\n        } else {\n          next = [id];\n        }\n\n        setValue(next);\n        onChange && onChange({ value: next });\n\n        inputElement.current.focus();\n      }\n    },\n    [value, onChange],\n  );\n\n  const remove = useCallback(\n    (id, ev) => {\n      if (ev) ev.stopPropagation();\n\n      const next = value.filter((i) => i !== id);\n      setValue(next);\n      onChange && onChange({ value: next });\n    },\n    [value, onChange],\n  );\n\n  const index = useCallback(\n    () =>\n      value && value.length\n        ? filterOptions.findIndex((i) => i.id === value[0])\n        : 0,\n    [value, filterOptions],\n  );\n\n  const onClickHandler = useCallback(() => {\n    if (!disabled) {\n      inputElement.current.focus();\n      navigate.current(index());\n    }\n  }, [disabled, index]);\n\n  return (\n    <div\n      title={title}\n      className={\n        'wx-12Wj21 wx-multicombo ' +\n        `${error ? 'wx-error' : ''} ${disabled ? 'wx-disabled' : ''} ${selected.length ? 'wx-not-empty' : ''} ${focus && !disabled ? 'wx-focus' : ''}`\n      }\n      onClick={onClickHandler}\n      onKeyDown={(ev) => keydown.current(ev, index())}\n    >\n      <div className=\"wx-12Wj21 wx-wrapper\">\n        <div className=\"wx-12Wj21 wx-tags\">\n          {selected.map((tag) => (\n            <div key={tag.id} className=\"wx-12Wj21 wx-tag\">\n              {children ? snippet(children, { option: tag }) : tag[textField]}\n              {!disabled && (\n                <i\n                  className=\"wx-12Wj21 wx-icon wxi-close\"\n                  onClick={(ev) => remove(tag.id, ev)}\n                ></i>\n              )}\n            </div>\n          ))}\n        </div>\n        <div className=\"wx-12Wj21 wx-select\">\n          <input\n            className=\"wx-12Wj21 wx-input\"\n            id={inputId}\n            type=\"text\"\n            value={text}\n            onChange={(ev) => setText(ev.target.value)}\n            onInput={input}\n            placeholder={placeholder}\n            disabled={disabled}\n            onFocus={() => setFocus(true)}\n            onBlur={() => setFocus(false)}\n            ref={inputElement}\n          />\n          <i className=\"wx-12Wj21 wx-icon wxi-angle-down\"></i>\n        </div>\n      </div>\n\n      {!disabled && (\n        <List items={filterOptions} onReady={onready} onSelect={onselect}>\n          {({ option }) => (\n            <>\n              {checkboxes && (\n                <Checkbox\n                  style={{ marginRight: '8px', pointerEvents: 'none' }}\n                  name={option.id}\n                  value={value && value.includes(option.id)}\n                />\n              )}\n              {children ? snippet(children, { option }) : option[textField]}\n            </>\n          )}\n        </List>\n      )}\n    </div>\n  );\n}\n", "import { useState, useEffect, useRef, useCallback } from 'react';\nimport { clickOutside, calculatePosition } from '@svar-ui/lib-dom';\nimport './Popup.css';\n\nexport function Popup({\n  left = 0,\n  top = 0,\n  at = 'bottom',\n  parent = null,\n  onCancel,\n  children,\n}) {\n  const [x, setX] = useState(0);\n  const [y, setY] = useState(0);\n  const [width, setWidth] = useState('auto');\n  const [visible, setVisible] = useState(false);\n\n  const self = useRef(null);\n\n  const updatePosition = useCallback(() => {\n    if (!self.current) return;\n\n    const result = calculatePosition(self.current, parent, at, left, top);\n    if (result) {\n      setX(result.x);\n      setY(result.y);\n      setWidth(result.width);\n      setVisible(true);\n    }\n  }, [self, parent, at, left, top]);\n\n  useEffect(() => {\n    requestAnimationFrame(updatePosition);\n  }, []);\n\n  useEffect(() => {\n    updatePosition(parent);\n  }, [parent, at, left, top]);\n\n  useEffect(() => {\n    const down = (e) => {\n      onCancel && onCancel(e);\n    };\n    if (self.current) {\n      return clickOutside(self.current, down).destroy;\n    }\n  }, [onCancel]);\n\n  return (\n    <div\n      ref={self}\n      className=\"wx-37M6Fj wx-popup\"\n      style={{\n        position: 'absolute',\n        visibility: visible ? 'visible' : 'hidden',\n        top: y + 'px',\n        left: x + 'px',\n        width: width,\n      }}\n    >\n      {children}\n    </div>\n  );\n}\n\nexport default Popup;\n", "import { useContext } from 'react';\nimport { useWritableProp } from '@svar-ui/lib-react';\nimport { i18n } from '../context.js';\nimport './Pager.css';\nimport { defaultLocale } from './helpers/locale.js';\n\nconst Pager = ({\n  total = 0,\n  pageSize: initialPageSize = 20,\n  value: initialValue = 1,\n  onChange,\n}) => {\n  const [pageSize, setPageSize] = useWritableProp(initialPageSize);\n  const [value, setValue] = useWritableProp(initialValue);\n\n  const _ = (useContext(i18n) || defaultLocale()).getGroup('core');\n\n  const pageCount = Math.ceil(total / pageSize);\n  const from = (value - 1) * pageSize;\n  const to = Math.min(value * pageSize, total);\n\n  const setInnerValue = (v, final) => {\n    if (Number.isNaN(v)) return;\n\n    if (!final) setValue(v);\n    v = Math.max(1, Math.min(v, pageCount));\n    if (final) setValue(v);\n\n    if (v === value) return;\n    setTimeout(() => {\n      onChange &&\n        onChange({\n          value: v,\n          from: (v - 1) * pageSize,\n          to: Math.min(v * pageSize, total),\n          pageSize: pageSize,\n        });\n    });\n  };\n\n  function setActivePage(id) {\n    switch (id) {\n      case 'first':\n        setInnerValue(1);\n        break;\n\n      case 'prev':\n        setInnerValue(value - 1);\n        break;\n\n      case 'next':\n        setInnerValue(value + 1);\n        break;\n\n      case 'last':\n        setInnerValue(pageCount);\n        break;\n\n      default:\n        break;\n    }\n  }\n\n  const onPageSizeInput = (e) => {\n    const newValue = e.target.value * 1;\n    if (Number.isNaN(newValue)) {\n      return;\n    }\n\n    setPageSize(newValue);\n    onChange && onChange({ value, from, to, pageSize: newValue });\n  };\n\n  return (\n    <div className=\"wx-35Np0p wx-pager\">\n      <div className=\"wx-35Np0p wx-left\">\n        <span>{_('Rows per page')}: </span>\n        <input\n          type=\"number\"\n          min={1}\n          className=\"wx-35Np0p wx-input\"\n          value={pageSize}\n          onChange={onPageSizeInput}\n        />\n      </div>\n\n      <div className=\"wx-35Np0p wx-center\">\n        <i\n          className={\n            'wx-35Np0p wx-icon wxi-angle-dbl-left' +\n            (value === 1 ? ' wx-disabled' : '')\n          }\n          onClick={() => setActivePage('first')}\n        ></i>\n        <i\n          className={\n            'wx-35Np0p wx-icon wxi-angle-left' +\n            (value === 1 ? ' wx-disabled' : '')\n          }\n          onClick={() => setActivePage('prev')}\n        ></i>\n        <input\n          type=\"text\"\n          value={value}\n          className=\"wx-35Np0p wx-input\"\n          onChange={(e) => setInnerValue(e.target.value * 1)}\n          onBlur={(e) => setInnerValue(e.target.value * 1, true)}\n        />\n        <i\n          className={\n            'wx-35Np0p wx-icon wxi-angle-right' +\n            (value === pageCount ? ' wx-disabled' : '')\n          }\n          onClick={() => setActivePage('next')}\n        ></i>\n        <i\n          className={\n            'wx-35Np0p wx-icon wxi-angle-dbl-right' +\n            (value === pageCount ? ' wx-disabled' : '')\n          }\n          onClick={() => setActivePage('last')}\n        ></i>\n      </div>\n\n      <div className=\"wx-35Np0p wx-right\">\n        {_('Total pages')}: {pageCount}\n      </div>\n    </div>\n  );\n};\n\nexport default Pager;\n", "import { useState } from 'react';\nimport { useInputId } from './helpers/getInputId.js';\nimport { useId } from 'react';\nimport './RadioButton.css';\n\nexport default function RadioButton({\n  id,\n  label = '',\n  value: externalValue,\n  name = '',\n  inputValue = '',\n  disabled = false,\n  onChange,\n}) {\n  const fallbackId = useId();\n  const inputId = useInputId(id) || fallbackId;\n  // Internal state for uncontrolled behavior\n  const [internalValue, setInternalValue] = useState(false);\n\n  // Determine which value to use (controlled vs uncontrolled)\n  // For React, we need to handle both cases\n  const isControlled = externalValue !== undefined;\n  const currentValue = isControlled ? externalValue : internalValue;\n\n  function handlerChange(ev) {\n    const newValue = ev.target.checked;\n\n    if (!isControlled) {\n      setInternalValue(newValue);\n    }\n\n    if (newValue && onChange) {\n      onChange({ value: true, inputValue });\n    }\n  }\n\n  return (\n    <div className=\"wx-3lDF1s wx-radio\">\n      <input\n        type=\"radio\"\n        className=\"wx-3lDF1s wx-input\"\n        id={inputId}\n        disabled={disabled}\n        name={name}\n        value={inputValue}\n        checked={currentValue}\n        onChange={handlerChange}\n      />\n      <label htmlFor={inputId} className=\"wx-3lDF1s wx-label\">\n        <span className=\"wx-3lDF1s wx-circle\"></span>\n        {label && <span className=\"wx-3lDF1s wx-radio-text\">{label}</span>}\n      </label>\n    </div>\n  );\n}\n", "import { uid } from '@svar-ui/lib-dom';\nimport { useState, useEffect } from 'react';\nimport RadioButton from './RadioButton.jsx';\nimport { fieldId } from \"../context\";\nimport './RadioButtonGroup.css';\n\n\nexport default function RadioButtonGroup({\n  options = [{}],\n  value = '',\n  onChange,\n  type = '',\n}) {\n  const name = uid();\n\n  const [currentValue, setCurrentValue] = useState(value);\n\n  useEffect(() => {\n    setCurrentValue(value);\n  }, [value]);\n\n  function handleChange(ev) {\n    const newValue = ev.inputValue;\n    setCurrentValue(newValue);\n    if (onChange) {\n      onChange({ value: newValue });\n    }\n  }\n\n  return (\n    <fieldId.Provider value={null}>\n      <div className={`wx-38w70j wx-radiogroup ${type && `wx-${type}`}`}>\n        {options.map((option) => (\n          <div key={option.id} className=\"wx-38w70j wx-item\">\n            <RadioButton\n              label={option.label}\n              inputValue={option.id}\n              value={currentValue === option.id}\n              name={name}\n              onChange={handleChange}\n            />\n          </div>\n        ))}\n      </div>\n    </fieldId.Provider>\n  );\n}\n", "import { useRef, useCallback, useMemo } from 'react';\nimport List from './helpers/SuggestDropdown.jsx';\nimport { useWritableProp } from '@svar-ui/lib-react';\nimport './RichSelect.css';\n\nexport default function RichSelect({\n  value: propertyValue = '',\n  options = [],\n  textOptions = null,\n  placeholder = '',\n  disabled = false,\n  error = false,\n  title = '',\n  textField = 'label',\n  clear = false,\n  children: kids,\n  onChange,\n}) {\n  const navigate = useRef(null);\n  const keydown = useRef(null);\n  let [value, setValue] = useWritableProp(propertyValue);\n\n  function ready(ev) {\n    navigate.current = ev.navigate;\n    keydown.current = ev.keydown;\n  }\n\n  const selected = useMemo(() => {\n    return value || value === 0\n      ? (textOptions || options).find((a) => a.id === value)\n      : null;\n  }, [value, textOptions, options]);\n\n  const select = useCallback(\n    ({ id }) => {\n      if (id || id === 0) {\n        setValue(id);\n        navigate.current(null);\n        onChange && onChange({ value: id });\n      }\n    },\n    [setValue, onChange],\n  );\n\n  const unselect = useCallback(\n    (ev) => {\n      ev.stopPropagation();\n      setValue('');\n      onChange && onChange({ value: '' });\n    },\n    [setValue, onChange],\n  );\n\n  const index = useCallback(() => {\n    return options.findIndex((a) => a.id === value);\n  }, [options, value]);\n\n  return (\n    <div\n      className={`wx-2YgblL wx-richselect ${error ? 'wx-2YgblL wx-error' : ''} ${disabled ? 'wx-2YgblL wx-disabled' : ''} ${!kids ? 'wx-2YgblL wx-nowrap' : ''}`}\n      title={title}\n      onClick={() => navigate.current(index())}\n      onKeyDown={(ev) => keydown.current(ev, index())}\n      tabIndex={0}\n    >\n      <div className=\"wx-2YgblL wx-label\">\n        {selected ? (\n          kids ? (\n            kids(selected)\n          ) : (\n            selected[textField]\n          )\n        ) : placeholder ? (\n          <span className=\"wx-2YgblL wx-placeholder\">{placeholder}</span>\n        ) : (\n          '\\u00A0'\n        )}\n      </div>\n\n      {clear && !disabled && value ? (\n        <i className=\"wx-2YgblL wx-icon wxi-close\" onClick={unselect} />\n      ) : (\n        <i className=\"wx-2YgblL wx-icon wxi-angle-down\" />\n      )}\n\n      {!disabled && (\n        <List items={options} onReady={ready} onSelect={select}>\n          {({ option }) => (kids ? kids(option) : option[textField])}\n        </List>\n      )}\n    </div>\n  );\n}\n", "import { useState, useEffect } from 'react';\nimport { snippet } from '@svar-ui/lib-react';\nimport './Segmented.css';\n\nconst Segmented = ({\n  options = [],\n  value = '',\n  css = '',\n  children,\n  onChange,\n}) => {\n  // Note: Using additional state for controlled/uncontrolled handling since React doesn't allow direct prop mutation\n  const [internalValue, setInternalValue] = useState(value);\n\n  const handleClick = (id) => {\n    setInternalValue(id);\n    if (onChange) {\n      onChange({ value: id });\n    }\n  };\n\n  // Ensure internal value stays in sync with external value changes\n  useEffect(() => {\n    setInternalValue(value);\n  }, [value]);\n\n  return (\n    <div className={'wx-0hMO7P' + ` wx-segmented ${css}`}>\n      {options.map((option) => (\n        <button\n          key={option.id}\n          className={\n            'wx-0hMO7P' +\n            ` wx-segment ${option.css} ${option.id === internalValue ? 'wx-selected' : ''}`\n          }\n          title={option.title}\n          onClick={() => handleClick(option.id)}\n        >\n          {children ? (\n            snippet(children, { option })\n          ) : (\n            <>\n              {option.icon && (\n                <i\n                  className={\n                    'wx-0hMO7P' +\n                    ` wx-icon ${option.icon} ${!option.label ? 'wx-only' : ''}`\n                  }\n                ></i>\n              )}\n              {option.label && (\n                <span className=\"wx-0hMO7P wx-label\">{option.label}</span>\n              )}\n            </>\n          )}\n        </button>\n      ))}\n    </div>\n  );\n};\n\nexport default Segmented;\n", "import { useState, useCallback } from 'react';\nimport { useInputId } from './helpers/getInputId.js';\nimport './Select.css';\n\nexport default function Select({\n  value: valueProp,\n  options = [],\n  placeholder = '',\n  title = '',\n  disabled = false,\n  error = false,\n  textField = 'label',\n  clear = false,\n  id,\n  onChange,\n}) {\n  const inputId = useInputId(id);\n  const [value, setValue] = useState(valueProp || '');\n\n  const handleChange = useCallback(\n    (event) => {\n      const newValue = event.target.value;\n      setValue(newValue);\n      if (onChange) onChange({ value: newValue });\n    },\n    [onChange],\n  );\n\n  const unselect = useCallback(() => {\n    setValue('');\n    if (onChange) onChange({ value: '' });\n  }, [onChange]);\n\n  return (\n    <div className=\"wx-2yx1Fo wx-select-box\">\n      <select\n        id={inputId}\n        value={value}\n        disabled={disabled}\n        className={`wx-2yx1Fo wx-select ${error ? 'wx-2yx1Fo wx-error' : ''}`}\n        title={title}\n        onChange={handleChange}\n      >\n        <option value=\"\">{placeholder}</option>\n        {options.map((option) => (\n          <option key={option.id} value={option.id}>\n            {option[textField]}\n          </option>\n        ))}\n      </select>\n\n      {clear && !disabled && value ? (\n        <i className=\"wx-2yx1Fo wx-icon wxi-close\" onClick={unselect}></i>\n      ) : (\n        <i className=\"wx-2yx1Fo wx-icon wxi-angle-down\"></i>\n      )}\n    </div>\n  );\n}\n", "import { useEffect, useMemo, useRef } from 'react';\nimport { useWritableProp } from '@svar-ui/lib-react';\nimport { useInputId } from './helpers/getInputId.js';\nimport './Slider.css';\n\nexport default function Slider({\n  id,\n  label = '',\n  css = '',\n  min = 0,\n  max = 100,\n  value: initialValue = 0,\n  step = 1,\n  title = '',\n  disabled = false,\n  onChange,\n}) {\n  const inputId = useInputId(id);\n  const [value, setValue] = useWritableProp(initialValue);\n  const previous = useRef({ value: value, input: value });\n\n  const progress = useMemo(\n    () => ((value - min) / (max - min)) * 100 + '%',\n    [value, min, max],\n  );\n\n  const bgStyle = useMemo(() => {\n    return disabled\n      ? ''\n      : `linear-gradient(90deg, var(--wx-slider-primary) 0% ${progress}, var(--wx-slider-background) ${progress} 100%)`;\n  }, [disabled, progress]);\n\n  function oninput({ target }) {\n    const newValue = target.value * 1;\n    setValue(newValue);\n    onChange &&\n      onChange({\n        value: newValue,\n        previous: previous.current.input,\n        input: true,\n      });\n    previous.current.input = newValue;\n  }\n\n  function onslider({ target }) {\n    const newValue = target.value * 1;\n    setValue(newValue);\n    onChange && onChange({ value: newValue, previous: previous.current.value });\n    previous.current.value = newValue;\n  }\n\n  // Sync if props.value changes externally\n  useEffect(() => {\n    setValue(initialValue);\n  }, [initialValue]);\n\n  const inputRef = useRef(null);\n  useEffect(() => {\n    if (inputRef.current) {\n      inputRef.current.addEventListener('change', onslider);\n      return () => {\n        if (inputRef.current) {\n          inputRef.current.removeEventListener('change', onslider);\n        }\n      };\n    }\n  }, [inputRef, onslider]);\n\n  return (\n    <div className={`wx-2EDJ8G wx-slider ${css}`} title={title}>\n      {label && (\n        <label className=\"wx-2EDJ8G wx-label\" htmlFor={inputId}>\n          {label}\n        </label>\n      )}\n      <div className=\"wx-2EDJ8G wx-inner\">\n        <input\n          id={inputId}\n          className=\"wx-2EDJ8G wx-input\"\n          type=\"range\"\n          min={min}\n          max={max}\n          step={step}\n          disabled={disabled}\n          value={value}\n          onInput={oninput}\n          style={{ background: bgStyle }}\n          ref={inputRef}\n        />\n      </div>\n    </div>\n  );\n}\n", "import { useCallback } from 'react';\nimport { useWritableProp } from '@svar-ui/lib-react';\nimport { useInputId } from './helpers/getInputId.js';\nimport './Switch.css';\n\nexport default function Switch({\n  id,\n  value: initialValue = false,\n  disabled = false,\n  onChange,\n}) {\n  const inputId = useInputId(id);\n  const [value, setValue] = useWritableProp(initialValue);\n\n  const handleChange = useCallback(\n    (event) => {\n      const newValue = event.target.checked;\n      setValue(newValue);\n      onChange && onChange({ value: newValue });\n    },\n    [onChange],\n  );\n\n  return (\n    <label className=\"wx-2dAR5c wx-switch\">\n      <input\n        className=\"wx-2dAR5c wx-input\"\n        type=\"checkbox\"\n        checked={value}\n        onChange={handleChange}\n        disabled={disabled}\n        id={inputId}\n      />\n      <span className=\"wx-2dAR5c wx-box\" />\n    </label>\n  );\n}\n", "import { useWritableProp } from '@svar-ui/lib-react';\nimport './Tabs.css';\n\nconst Tabs = ({\n  options = [],\n  value: propValue = '',\n  type = 'top',\n  css = '',\n  onChange,\n}) => {\n  const [value, setValue] = useWritableProp(propValue);\n\n  const handleClick = (optionId) => {\n    setValue(optionId);\n    if (onChange) {\n      onChange({ value: optionId });\n    }\n  };\n\n  return (\n    <div className={'wx-138fWJ ' + `wx-tabs wx-${type} ${css}`}>\n      {options.map((option) => (\n        <button\n          key={option.id}\n          className={\n            'wx-138fWJ ' +\n            `wx-tab ${option.css} ${option.id === value ? 'wx-active' : ''}`\n          }\n          title={option.title}\n          onClick={() => handleClick(option.id)}\n        >\n          {option.icon && (\n            <i\n              className={\n                'wx-138fWJ ' +\n                `wx-icon ${option.icon} ${!option.label ? 'wx-only' : ''}`\n              }\n            ></i>\n          )}\n          {option.label && (\n            <span className=\"wx-138fWJ wx-label\">{option.label}</span>\n          )}\n        </button>\n      ))}\n    </div>\n  );\n};\n\nexport default Tabs;\n", "import { useCallback } from 'react';\nimport { useWritableProp } from '@svar-ui/lib-react';\nimport { useInputId } from './helpers/getInputId.js';\nimport './Counter.css';\n\nconst Counter = ({\n  id,\n  value: initialValue = 0,\n  step = 1,\n  min = 0,\n  max = Infinity,\n  error = false,\n  disabled = false,\n  readonly = false,\n  onChange,\n}) => {\n  const inputId = useInputId(id);\n  const [value, setValue] = useWritableProp(initialValue);\n\n  const dec = useCallback(() => {\n    if (readonly || value <= min) return;\n    const newValue = value - step;\n    setValue(newValue);\n    onChange && onChange({ value: newValue });\n  }, [value, readonly, min, step, onChange]);\n\n  const inc = useCallback(() => {\n    if (readonly || value >= max) return;\n    const newValue = value + step;\n    setValue(newValue);\n    onChange && onChange({ value: newValue });\n  }, [value, readonly, max, step, onChange]);\n\n  const blur = useCallback(() => {\n    if (!readonly) {\n      const tValue =\n        Math.round(Math.min(max, Math.max(value, min)) / step) * step;\n      const newValue = isNaN(tValue) ? Math.max(min, 0) : tValue;\n      setValue(newValue);\n      onChange && onChange({ value: newValue });\n    }\n  }, [readonly, value, max, min, step, onChange]);\n\n  const input = useCallback(\n    (e) => {\n      const newValue = e.target.value * 1;\n      setValue(newValue);\n      onChange && onChange({ value: newValue, input: true });\n    },\n    [onChange],\n  );\n\n  return (\n    <div\n      className={\n        'wx-22t21n ' +\n        `wx-counter ${disabled ? 'wx-disabled' : ''} ${readonly ? 'wx-readonly' : ''} ${error ? 'wx-error' : ''}`\n      }\n    >\n      <button\n        aria-label=\"-\"\n        className={'wx-22t21n ' + 'wx-btn wx-btn-dec'}\n        disabled={disabled}\n        onClick={dec}\n      >\n        <svg\n          className={'wx-22t21n ' + 'wx-dec'}\n          width=\"12\"\n          height=\"2\"\n          viewBox=\"0 0 12 2\"\n          fill=\"none\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n        >\n          <path d=\"M11.2501 1.74994H0.750092V0.249939H11.2501V1.74994Z\" />\n        </svg>\n      </button>\n      <input\n        id={inputId}\n        type=\"text\"\n        className={'wx-22t21n ' + 'wx-input'}\n        disabled={disabled}\n        readOnly={readonly}\n        required\n        value={value}\n        onBlur={blur}\n        onInput={input}\n      />\n      <button\n        aria-label=\"-\"\n        className={'wx-22t21n ' + 'wx-btn wx-btn-inc'}\n        disabled={disabled}\n        onClick={inc}\n      >\n        <svg\n          className={'wx-22t21n ' + 'wx-inc'}\n          width=\"12\"\n          height=\"12\"\n          viewBox=\"0 0 12 12\"\n          fill=\"none\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n        >\n          <path\n            d=\"M11.2501\n\t\t\t\t\t\t\t\t6.74994H6.75009V11.2499H5.25009V6.74994H0.750092V5.24994H5.25009V0.749939H6.75009V5.24994H11.2501V6.74994Z\"\n          />\n        </svg>\n      </button>\n    </div>\n  );\n};\n\nexport default Counter;\n", "import './Notice.css';\n\nexport default function Notice({ notice = {} }) {\n  function onRemove() {\n    if (notice.remove) notice.remove();\n  }\n\n  return (\n    <div\n      className={`wx-11sNg5 wx-notice wx-${notice.type ? notice.type : ''}`}\n      role=\"status\"\n      aria-live=\"polite\"\n    >\n      <div className=\"wx-11sNg5 wx-text\">{notice.text}</div>\n      <div className=\"wx-11sNg5 wx-button\">\n        <i className=\"wx-11sNg5 wxi-close\" onClick={onRemove} />\n      </div>\n    </div>\n  );\n}\n", "import Notice from './Notice.jsx';\nimport './Notices.css';\n\nexport default function Notices({ data = [] }) {\n  return (\n    <div className=\"wx-3nwoO9 wx-notices\">\n      {data.map((notice) => (\n        <Notice key={notice.id} notice={notice} />\n      ))}\n    </div>\n  );\n}\n", "import { useRef, useEffect, useContext } from 'react';\nimport Button from './Button.jsx';\nimport { i18n } from '../context.js';\nimport './Modal.css';\nimport { defaultLocale } from './helpers/locale.js';\n\nexport default function Modal({\n  title = '',\n  buttons = ['cancel', 'ok'],\n  header,\n  children,\n  footer,\n  onConfirm,\n  onCancel,\n}) {\n  const _ = (useContext(i18n) || defaultLocale()).getGroup('core');\n  const modal = useRef(null);\n\n  useEffect(() => {\n    modal.current?.focus();\n  }, []);\n\n  function keydown(ev) {\n    switch (ev.code) {\n      case 'Enter': {\n        const from = ev.target.tagName;\n        if (from === 'TEXTAREA' || from === 'BUTTON') return;\n        onConfirm && onConfirm({ event: ev });\n        break;\n      }\n      case 'Escape':\n        onCancel && onCancel({ event: ev });\n        break;\n    }\n  }\n\n  function onclick(ev, button) {\n    const pack = { event: ev, button };\n    if (button === 'cancel') {\n      onCancel && onCancel(pack);\n    } else {\n      onConfirm && onConfirm(pack);\n    }\n  }\n\n  return (\n    <div\n      className=\"wx-1FxkZa wx-modal\"\n      ref={modal}\n      tabIndex={0}\n      onKeyDown={keydown}\n    >\n      <div className=\"wx-1FxkZa wx-window\">\n        {header ? (\n          header\n        ) : title ? (\n          <div className=\"wx-1FxkZa wx-header\">{title}</div>\n        ) : null}\n\n        <div>{children}</div>\n\n        {footer\n          ? footer\n          : buttons && (\n              <div className=\"wx-1FxkZa wx-buttons\">\n                {buttons.map((button) => (\n                  <div key={button} className=\"wx-1FxkZa wx-button\">\n                    <Button\n                      type={`block ${button === 'ok' ? 'primary' : 'secondary'}`}\n                      onClick={(ev) => onclick(ev, button)}\n                    >\n                      {_(button)}\n                    </Button>\n                  </div>\n                ))}\n              </div>\n            )}\n      </div>\n    </div>\n  );\n}\n", "import { useState, useImperativeHandle, forwardRef } from 'react';\nimport Notices from './Notices.jsx';\nimport Modal from './Modal.jsx';\n\nimport { uid } from '@svar-ui/lib-dom';\n\nfunction Globals({ children }, apiRef) {\n  const [modal, setModal] = useState(null);\n  const [notices, setNotices] = useState([]);\n\n  useImperativeHandle(\n    apiRef,\n    () => ({\n      showModal: (msg) => {\n        const modalObj = { ...msg };\n        setModal(modalObj);\n        return new Promise((res, rej) => {\n          modalObj.resolve = (v) => {\n            setModal(null);\n            res(v);\n          };\n          modalObj.reject = (v) => {\n            setModal(null);\n            rej(v);\n          };\n        });\n      },\n      showNotice: (msg) => {\n        msg = { ...msg };\n        msg.id = msg.id || uid();\n        msg.remove = () =>\n          setNotices((prev) => prev.filter((a) => a.id !== msg.id));\n\n        if (msg.expire != -1) {\n          setTimeout(msg.remove, msg.expire || 5100);\n        }\n        setNotices((prev) => [...prev, msg]);\n      },\n    }),\n    [],\n  );\n\n  return (\n    <>\n      {children}\n      {modal && (\n        <Modal\n          title={modal.title}\n          buttons={modal.buttons}\n          onConfirm={modal.resolve}\n          onCancel={modal.reject}\n        >\n          {modal.message}\n        </Modal>\n      )}\n      <Notices data={notices} />\n    </>\n  );\n}\n\nconst GlobalsComponentWithRef = forwardRef(Globals);\nexport default GlobalsComponentWithRef;\n", "import { useMemo, useRef } from 'react';\nimport { helpers } from './context';\nimport Globals from './components/Globals.jsx';\n\nexport default function Component(props) {\n  let { children } = props;\n  let api = useRef();\n\n  const l = useMemo(() => {\n    return {\n      showNotice: (msg) => api.current.showNotice(msg),\n      showModal: (msg) => api.current.showModal(msg),\n    };\n  }, []);\n\n  return (\n    <helpers.Provider value={l}>\n      <Globals ref={api}>{children}</Globals>\n    </helpers.Provider>\n  );\n}\n", "import { useCallback, useRef } from 'react';\nimport { uid } from '@svar-ui/lib-dom';\nimport { fieldId } from \"../context\";\nimport './Field.css';\n\nexport default function Field({\n  label = '',\n  position = '',\n  css = '',\n  error = false,\n  type = '',\n  required = false,\n  children,\n}) {\n  const firstInputId = useRef(null);\n  const registerInput = useCallback(() => {\n    if (firstInputId.current) return firstInputId.current;\n    const id = uid();\n    firstInputId.current = id;\n    return id;\n  }, []);\n\n  return (\n    <fieldId.Provider value={registerInput}>\n      <div\n        className={`wx-2oVUvC wx-field wx-${position} ${css} ${error ? 'wx-error' : ''} ${required ? 'wx-required' : ''}`.trim()}\n      >\n        {label && (\n          <label className=\"wx-2oVUvC wx-label\" htmlFor={firstInputId.current}>\n            {label}\n          </label>\n        )}\n        <div className={`wx-2oVUvC wx-field-control wx-${type}`}>\n          {children}\n        </div>\n      </div>\n    </fieldId.Provider>\n  );\n}\n", "import { useCallback, useMemo } from 'react';\nimport { snippet, useWritableProp } from '@svar-ui/lib-react';\nimport Button from './Button.jsx';\n\nconst TwoState = ({\n  value: initialValue = false,\n  type = '',\n  icon = '',\n  disabled = false,\n  iconActive = '',\n  onClick,\n  title = '',\n  css = '',\n  text = '',\n  textActive = '',\n  children,\n  active,\n  onChange,\n}) => {\n  const [value, setValue] = useWritableProp(initialValue);\n\n  const typeStr = useMemo(() => {\n    return (value ? 'pressed' : '') + (type ? ' ' + type : '');\n  }, [value, type]);\n\n  const handleClick = useCallback(\n    (ev) => {\n      let next = !value;\n      if (onClick) onClick(ev);\n      if (!ev.defaultPrevented) {\n        setValue(next);\n        onChange && onChange({ value: next });\n      }\n    },\n    [value, onClick, onChange],\n  );\n\n  if (value && active) {\n    return (\n      <Button\n        title={title}\n        text={(value && textActive) || text}\n        css={css}\n        type={typeStr}\n        icon={(value && iconActive) || icon}\n        onClick={handleClick}\n        disabled={disabled}\n      >\n        {snippet(active, { value })}\n      </Button>\n    );\n  } else if (children) {\n    return (\n      <Button\n        title={title}\n        text={(value && textActive) || text}\n        css={css}\n        type={typeStr}\n        icon={(value && iconActive) || icon}\n        onClick={handleClick}\n        disabled={disabled}\n      >\n        {children}\n      </Button>\n    );\n  } else {\n    return (\n      <Button\n        title={title}\n        text={(value && textActive) || text}\n        css={css}\n        type={typeStr}\n        icon={(value && iconActive) || icon}\n        onClick={handleClick}\n        disabled={disabled}\n      />\n    );\n  }\n};\n\nexport default TwoState;\n", "import { useState, useMemo, useContext, useCallback } from 'react';\nimport Field from './Field.jsx';\nimport Text from './Text.jsx';\nimport Dropdown from './Dropdown.jsx';\nimport Slider from './Slider.jsx';\nimport TwoState from './TwoState.jsx';\nimport { i18n } from '../context.js';\nimport { useWritableProp } from '@svar-ui/lib-react';\nimport { dateToString } from '@svar-ui/lib-dom';\nimport './TimePicker.css';\nimport { defaultLocale } from './helpers/locale.js';\n\nconst defValue = new Date(0, 0, 0, 0, 0);\n\nexport default function TimePicker({\n  value: propertyValue = defValue,\n  id,\n  title = '',\n  css = '',\n  disabled = false,\n  error = false,\n  format = '',\n  onChange,\n}) {\n  let [value, setValue] = useWritableProp(propertyValue);\n\n  const { calendar: calendarLocale, formats } = (\n    useContext(i18n) || defaultLocale()\n  ).getRaw();\n  const h12 = calendarLocale.clockFormat == 12;\n\n  const maxH = 23;\n  const maxM = 59;\n\n  const timeFormat = useMemo(() => {\n    const f = format || formats?.timeFormat;\n    return typeof f === 'function' ? f : dateToString(f, calendarLocale);\n  }, [format, formats, calendarLocale]);\n\n  const zeroBased = useMemo(() => {\n    return timeFormat(new Date(0, 0, 0, 1)).indexOf('01') != -1;\n  }, [timeFormat]);\n\n  const formatTime = (v, zeroBased) => {\n    return (v < 10 && zeroBased ? `0${v}` : `${v}`).slice(-2);\n  };\n\n  const formatM = (v) => {\n    return formatTime(v, true);\n  };\n\n  const getNumber = (v) => {\n    return `${v}`.replace(/[^\\d]/g, '') || 0;\n  };\n  const formatH = (v) => {\n    if (h12) {\n      v = v % 12;\n      if (v === 0) return '12';\n    }\n    return formatTime(v, zeroBased);\n  };\n\n  const update = useCallback((v, max) => {\n    v = getNumber(v);\n    return Math.min(v, max);\n  }, []);\n\n  const [popup, setPopup] = useState(null);\n\n  const safeValue = value || defValue;\n\n  const h = update(safeValue.getHours(), maxH);\n  const m = update(safeValue.getMinutes(), maxM);\n\n  const pm = h > 12;\n\n  const hText = formatH(h);\n  const mText = formatM(m);\n  const textValue = useMemo(\n    () => timeFormat(new Date(0, 0, 0, h, m)),\n    [h, m, timeFormat],\n  );\n\n  const click = useCallback(() => {\n    setPopup(true);\n  }, []);\n\n  const togglePM = useCallback(() => {\n    const next = new Date(safeValue);\n    next.setHours(next.getHours() + (pm ? -12 : 12));\n    setValue(next);\n    if (onChange) onChange({ value: next });\n  }, [safeValue, pm, onChange]);\n\n  const setHours = useCallback(\n    ({ value: v }) => {\n      if (safeValue.getHours() === v) return;\n\n      const next = new Date(safeValue);\n      next.setHours(v);\n      setValue(next);\n      if (onChange) onChange({ value: next });\n    },\n    [safeValue, onChange],\n  );\n\n  const setMinutes = useCallback(\n    ({ value: v }) => {\n      if (safeValue.getMinutes() === v) return;\n\n      const next = new Date(safeValue);\n      next.setMinutes(v);\n      setValue(next);\n      if (onChange) onChange({ value: next });\n    },\n    [safeValue, onChange],\n  );\n\n  const updateH = useCallback(\n    (v) => {\n      v = update(v, maxH);\n      if (h12) {\n        v = v * 1;\n        if (v === 12) v = 0;\n        if (pm) v += 12;\n      }\n      return v;\n    },\n    [update, h12, pm],\n  );\n\n  const oncancel = useCallback(() => {\n    setPopup(null);\n  }, []);\n\n  return (\n    <div\n      className={`wx-7f497i wx-timepicker ${error ? 'wx-7f497i wx-error' : ''} ${disabled ? 'wx-7f497i wx-disabled' : ''}`}\n      onClick={disabled ? undefined : click}\n      style={{ cursor: disabled ? 'default' : 'pointer' }}\n    >\n      <Text\n        id={id}\n        css={css}\n        title={title}\n        value={textValue}\n        readonly={true}\n        disabled={disabled}\n        error={error}\n        icon=\"wxi-clock\"\n        inputStyle={{\n          cursor: 'pointer',\n          width: '100%',\n          paddingRight:\n            'calc(var(--wx-input-icon-size) + var(--wx-input-icon-indent) * 2)',\n        }}\n      />\n\n      {popup && !disabled && (\n        <Dropdown onCancel={oncancel} width=\"unset\">\n          <div className=\"wx-7f497i wx-wrapper\">\n            <div className=\"wx-7f497i wx-timer\">\n              <input\n                className=\"wx-7f497i wx-digit\"\n                value={hText}\n                onChange={(ev) => {\n                  const val = updateH(ev.target.value);\n                  setHours({ value: val });\n                }}\n              />\n              <div className=\"wx-7f497i wx-separator\">:</div>\n              <input\n                className=\"wx-7f497i wx-digit\"\n                value={mText}\n                onChange={(ev) => {\n                  const val = update(ev.target.value, maxM);\n                  setMinutes({ value: val });\n                }}\n              />\n              {h12 && (\n                <TwoState\n                  value={pm}\n                  onClick={togglePM}\n                  active={() => <span>pm</span>}\n                >\n                  <span>am</span>\n                </TwoState>\n              )}\n            </div>\n            <Field width=\"unset\">\n              <Slider\n                label={calendarLocale.hours}\n                value={h}\n                onChange={setHours}\n                max={maxH}\n              />\n            </Field>\n            <Field width=\"unset\">\n              <Slider\n                label={calendarLocale.minutes}\n                value={m}\n                onChange={setMinutes}\n                max={maxM}\n              />\n            </Field>\n          </div>\n        </Dropdown>\n      )}\n    </div>\n  );\n}\n", "import './ModalArea.css';\n\nexport default function ModalArea({ children }) {\n  return (\n    <div className=\"wx-KgpO9N wx-modal\">\n      <div className=\"wx-KgpO9N wx-window\">{children}</div>\n    </div>\n  );\n}\n", "import { useRef, useEffect } from 'react';\nimport { clickOutside } from '@svar-ui/lib-dom';\nimport './SideArea.css';\n\nexport default function SideArea({ position = 'right', children, onCancel }) {\n  const divRef = useRef(null);\n\n  useEffect(() => {\n    return clickOutside(divRef.current, onCancel).destroy;\n  }, []);\n\n  return (\n    <div ref={divRef} className={`wx-2L733M wx-sidearea wx-pos-${position}`}>\n      {children}\n    </div>\n  );\n}\n", "import { useContext, useRef, useEffect, useState } from 'react';\nimport { theme as themeContext } from '../context.js';\nimport { env } from '@svar-ui/lib-dom';\nimport { createPortal } from 'react-dom';\n\nfunction Portal({ theme: initialTheme = '', target, children }) {\n  const portalRef = useRef(null);\n  const componentRef = useRef(null);\n  const [targetRef, setTargetRef] = useState(null);\n\n  if (!portalRef.current) {\n    portalRef.current = document.createElement('div');\n  }\n\n  const contextTheme = useContext(themeContext);\n\n  useEffect(() => {\n    setTargetRef(\n      target ||\n        getParentRoot(componentRef.current) ||\n        env.getTopNode(componentRef.current),\n    );\n  }, [componentRef.current]);\n\n  return (\n    <>\n      <span ref={componentRef} style={{ display: 'none' }} />\n      {componentRef.current && targetRef\n        ? createPortal(\n            <div\n              className={`wx-3ZWsT0 wx-${initialTheme || contextTheme}-theme`}\n            >\n              {children}\n            </div>,\n            targetRef,\n          )\n        : null}\n    </>\n  );\n}\n\nexport default Portal;\n\nfunction getParentRoot(p) {\n  const root = env.getTopNode(p);\n  while (p && p !== root && !p.getAttribute('data-wx-portal-root')) {\n    p = p.parentNode;\n  }\n  return p;\n}\n", "import './FonttRoboto.css';\nexport default function render() {\n  return <></>;\n}\n", "import { theme } from '../context';\nimport RobotoFont from './FonttRoboto';\nimport './Material.css';\nexport default function render(props) {\n  const { fonts = true, children } = props;\n\n  return (\n    <theme.Provider value=\"material\">\n      <>\n        {children && <div className=\"wx-theme wx-material-theme\">{children}</div>}\n\n        {fonts && (\n          <>\n            <link\n              rel=\"preconnect\"\n              href=\"https://cdn.svar.dev\"\n              crossOrigin=\"true\"\n            />\n            <RobotoFont />\n            <link\n              rel=\"stylesheet\"\n              href=\"https://cdn.svar.dev/fonts/wxi/wx-icons.css\"\n            />\n          </>\n        )}\n      </>\n    </theme.Provider>\n  );\n}\n", "import './FontOpenSans.css';\nexport default function render() {\n  return <></>;\n}\n", "import { theme } from '../context';\nimport FontOpenSans from './FontOpenSans';\nimport './Willow.css';\nexport default function render(props) {\n  const { fonts = true, children } = props;\n\n  return (\n    <theme.Provider value=\"willow\">\n      <>\n        {children && children && (\n          <div className=\"wx-theme wx-willow-theme\">{children}</div>\n        )}\n\n        {fonts && (\n          <>\n            <link\n              rel=\"preconnect\"\n              href=\"https://cdn.svar.dev\"\n              crossOrigin=\"true\"\n            />\n            <FontOpenSans />\n            <link\n              rel=\"stylesheet\"\n              href=\"https://cdn.svar.dev/fonts/wxi/wx-icons.css\"\n            />\n          </>\n        )}\n      </>\n    </theme.Provider>\n  );\n}\n", "import { theme } from '../context';\nimport FontOpenSans from './FontOpenSans';\nimport './WillowDark.css';\nexport default function render(props) {\n  const { fonts = true, children } = props;\n\n  return (\n    <theme.Provider value=\"willow-dark\">\n      <>\n        {children && children && (\n          <div className=\"wx-theme wx-willow-dark-theme\">{children}</div>\n        )}\n\n        {fonts && (\n          <>\n            <link\n              rel=\"preconnect\"\n              href=\"https://cdn.svar.dev\"\n              crossOrigin=\"true\"\n            />\n            <FontOpenSans />\n            <link\n              rel=\"stylesheet\"\n              href=\"https://cdn.svar.dev/fonts/wxi/wx-icons.css\"\n            />\n          </>\n        )}\n      </>\n    </theme.Provider>\n  );\n}\n", "import { uid } from '@svar-ui/lib-dom';\n\nexport function popupContainer(node) {\n  const id = uid();\n  node.setAttribute('data-wx-portal-root', id);\n}\n", "export { default as TextArea } from './components/TextArea.jsx';\nexport { default as Button } from './components/Button.jsx';\nexport { default as Checkbox } from './components/Checkbox.jsx';\nexport { default as CheckboxGroup } from './components/CheckboxGroup.jsx';\nexport { default as ColorSelect } from './components/ColorSelect.jsx';\nexport { default as ColorBoard } from './components/ColorBoard.jsx';\nexport { default as ColorPicker } from './components/ColorPicker.jsx';\nexport { default as Combo } from './components/Combo.jsx';\nexport { default as DatePicker } from './components/DatePicker.jsx';\nexport { default as DateRangePicker } from './components/DateRangePicker.jsx';\nexport { default as Fullscreen } from './components/Fullscreen.jsx';\nexport { default as Icon } from './components/Icon.jsx';\nexport { default as MultiCombo } from './components/MultiCombo.jsx';\nexport { default as Popup } from './components/Popup.jsx';\nexport { default as Dropdown } from './components/Dropdown.jsx';\nexport { default as Pager } from './components/Pager.jsx';\nexport { default as RadioButton } from './components/RadioButton.jsx';\nexport { default as RadioButtonGroup } from './components/RadioButtonGroup.jsx';\nexport { default as RichSelect } from './components/RichSelect.jsx';\nexport { default as Segmented } from './components/Segmented.jsx';\nexport { default as Select } from './components/Select.jsx';\nexport { default as Slider } from './components/Slider.jsx';\nexport { default as Switch } from './components/Switch.jsx';\nexport { default as Tabs } from './components/Tabs.jsx';\nexport { default as Text } from './components/Text.jsx';\nexport { default as Counter } from './components/Counter.jsx';\nexport { default as Globals } from './Globals.jsx';\nexport { default as Field } from './components/Field.jsx';\nexport { default as Calendar } from './components/Calendar.jsx';\nexport { default as Month } from './components/calendar/Month.jsx';\nexport { default as RangeCalendar } from './components/RangeCalendar.jsx';\nexport { default as TimePicker } from './components/TimePicker.jsx';\nexport { default as TwoState } from './components/TwoState.jsx';\nexport { default as Modal } from './components/Modal.jsx';\nexport { default as ModalArea } from './components/ModalArea.jsx';\nexport { default as SideArea } from './components/SideArea.jsx';\nexport { default as Portal } from './components/Portal.jsx';\n\nexport { default as Material } from './themes/Material.jsx';\nexport { default as Willow } from './themes/Willow.jsx';\nexport { default as WillowDark } from './themes/WillowDark.jsx';\n\nexport { default as Locale } from './Locale.jsx';\nexport { locale } from '@svar-ui/lib-dom';\n\nexport { popupContainer } from './components/helpers/popup';\nexport { default as SuggestDropdown } from './components/helpers/SuggestDropdown.jsx';\n\nexport { en } from '@svar-ui/core-locales';\nexport * as context from './context.js';\n\nimport { env, setEnv } from '@svar-ui/lib-dom';\nsetEnv(env);\n", "export default {\n\tgantt: {\n\t\t// Header / sidebar\n\t\t\"Task name\": \"Task name\",\n\t\t\"Start date\": \"Start date\",\n\t\t\"Add task\": \"Add task\",\n\t\tDuration: \"Duration\",\n\t\tTask: \"Task\",\n\t\tMilestone: \"Milestone\",\n\t\t\"Summary task\": \"Summary task\",\n\n\t\t// Sidebar\n\t\tSave: \"Save\",\n\t\tDelete: \"Delete\",\n\t\tName: \"Name\",\n\t\tDescription: \"Description\",\n\t\t\"Select type\": \"Select type\",\n\t\tType: \"Type\",\n\t\t\"End date\": \"End date\",\n\t\tProgress: \"Progress\",\n\t\tPredecessors: \"Predecessors\",\n\t\tSuccessors: \"Successors\",\n\t\t\"Add task name\": \"Add task name\",\n\t\t\"Add description\": \"Add description\",\n\t\t\"Select link type\": \"Select link type\",\n\t\t\"End-to-start\": \"End-to-start\",\n\t\t\"Start-to-start\": \"Start-to-start\",\n\t\t\"End-to-end\": \"End-to-end\",\n\t\t\"Start-to-end\": \"Start-to-end\",\n\n\t\t// Context menu / toolbar\n\t\tAdd: \"Add\",\n\t\t\"Child task\": \"Child task\",\n\t\t\"Task above\": \"Task above\",\n\t\t\"Task below\": \"Task below\",\n\t\t\"Convert to\": \"Convert to\",\n\t\tEdit: \"Edit\",\n\t\tCut: \"Cut\",\n\t\tCopy: \"Copy\",\n\t\tPaste: \"Paste\",\n\t\tMove: \"Move\",\n\t\tUp: \"Up\",\n\t\tDown: \"Down\",\n\t\tIndent: \"Indent\",\n\t\tOutdent: \"Outdent\",\n\t\t\"Split task\": \"Split task\",\n\t\tSegment: \"Segment\",\n\n\t\t// Toolbar\n\t\t\"New task\": \"New task\",\n\t\t\"Move up\": \"Move up\",\n\t\t\"Move down\": \"Move down\",\n\t\tUndo: \"Undo\",\n\t\tRedo: \"Redo\",\n\n\t\t// Formats\n\t\tWeek: \"Week\",\n\t\tQ: \"Quarter\",\n\t},\n};\n", "let iid = new Date().valueOf();\nexport const uid = ():number => iid++;\n\nexport function tempID(): string {\n\treturn \"temp://\" + iid++;\n}\n\nexport function isTempID(v: string | number): boolean {\n\treturn (\n\t\ttypeof v === \"string\" && v.length === 20 && parseInt(v.substr(7)) > 1e12\n\t);\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction isSameObject(left: any, right: any): boolean {\n\tif (Object.keys(left).length !== Object.keys(right).length) return false;\n\t\n\tfor (const key in right) {\n\t\tconst v = left[key];\n\t\tconst nv = right[key];\n\n\t\tif (!isSame(v, nv)) return false;\n\t}\n\treturn true;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any, @typescript-eslint/explicit-module-boundary-types\nexport function isSame(v: any, nv: any): boolean {\n\tconst primitiveValue =\n\t\ttypeof v === \"number\" ||\n\t\ttypeof v === \"string\" ||\n\t\ttypeof v === \"boolean\" ||\n\t\tv === null;\n\tif (primitiveValue) return v === nv;\n\n\t// different types of data\n\tif (typeof v !== typeof nv) return false;\n\t// data vs null\n\tif ((v === null || nv === null) && v !== nv) return false;\n\t// dates\n\tif (v instanceof Date && nv instanceof Date && v.getTime() !== nv.getTime())\n\t\treturn false;\n\t// arrays and objects\n\tif (typeof v === \"object\") {\n\t\tif (Array.isArray(v) && Array.isArray(nv)) {\n\t\t\tif (v.length !== nv.length) return false;\n\t\t\tfor (let i = v.length - 1; i >= 0; i--) {\n\t\t\t\tif (!isSame(v[i], nv[i])) return false;\n\t\t\t}\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn isSameObject(v, nv);\n\t\t}\n\t}\n\n\treturn v === nv;\n}\n\nexport function deepCopy<T>(obj: T): T {\n\tif (typeof obj !== \"object\") return obj;\n\tif (obj === null) return obj;\n\tif (obj instanceof Date) return new Date(obj) as T;\n\tif (obj instanceof Array) return obj.map(deepCopy) as T;\n\n\tconst out: T = {} as T;\n\tfor (const key in obj) {\n\t\tout[key] = deepCopy(obj[key]);\n\t}\n\treturn out;\n}\n", "import { uid } from \"./helpers\";\nimport type { IHasID, TID } from \"./types\";\n\nexport default class _DataArray<T extends IHasID> {\n\tprivate _pool: Map<TID, T>;\n\tprivate _data: T[];\n\tconstructor(raw: T[]) {\n\t\tthis._data = raw;\n\t\tthis._pool = new Map();\n\t\tfor (let i = 0; i < raw.length; i++) {\n\t\t\tconst obj = raw[i];\n\t\t\tthis._pool.set(obj.id, obj);\n\t\t}\n\t}\n\tadd(raw: T):void {\n\t\traw = { id: uid(), ...raw };\n\t\tthis._data.push(raw);\n\t\tthis._pool.set(raw.id, raw);\n\t}\n\tupdate(id: TID, raw: T):void {\n\t\tconst index = this._data.findIndex(link => link.id == id);\n\t\tconst old = this._data[index];\n\t\tconst updated = { ...old, ...raw };\n\t\tthis._data[index] = updated;\n\t\tthis._pool.set(updated.id, updated);\n\t}\n\tremove(id: TID):void {\n\t\tthis._data = this._data.filter(a => a.id != id);\n\t\tthis._pool.delete(id);\n\t}\n\tfilter(cb: (value: T) => boolean): void {\n\t\tthis._data = this._data.filter(x => {\n\t\t\tconst check = cb(x);\n\t\t\tif (!check) this._pool.delete(x.id);\n\t\t\treturn check;\n\t\t});\n\t}\n\tbyId(id: TID): T {\n\t\treturn this._pool.get(id);\n\t}\n\tmap<D>(cb: (value: T, index: number, array: T[]) => D): D[] {\n\t\treturn this._data.map(cb);\n\t}\n\tforEach(cb: (value: T, index: number, array: T[]) => void): void {\n\t\tthis._data.forEach(cb);\n\t}\n}\n", "import type { IHasIDAndParent, TID } from \"./types\";\n\nexport default class DataTree<T extends IHasIDAndParent> {\n\tpublic _pool: Map<TID, T>;\n\n\tconstructor(raw?: T[]) {\n\t\tconst top: IHasIDAndParent = {\n\t\t\tid: 0,\n\t\t\t$level: 0,\n\t\t\tdata: [],\n\t\t\tparent: null,\n\t\t};\n\t\tconst items: Map<TID, T> = new Map();\n\t\titems.set(0, top as T);\n\t\tthis._pool = items;\n\n\t\tif (raw && raw.length) this.parse(raw, 0);\n\t}\n\tparse(raw: T[], parent: TID): void {\n\t\tconst items = this._pool;\n\n\t\tfor (let i = 0; i < raw.length; i++) {\n\t\t\tconst obj = raw[i];\n\t\t\tobj.parent = obj.parent || parent;\n\t\t\tobj.data = null;\n\t\t\titems.set(obj.id, obj);\n\t\t}\n\n\t\tfor (let i = 0; i < raw.length; i++) {\n\t\t\tconst obj = raw[i];\n\t\t\tconst temp = items.get(obj.parent);\n\t\t\tif (temp) {\n\t\t\t\tif (!temp.data) temp.data = [];\n\t\t\t\t// we are not recreating the array, as setLevel will do it anyway\n\t\t\t\ttemp.data.push(obj);\n\t\t\t}\n\t\t}\n\n\t\tconst top = items.get(parent);\n\t\tthis.setLevel(top, top.$level + 1, false);\n\t}\n\tadd(raw: T, index: number): void {\n\t\tconst parent = this._pool.get(raw.parent || 0);\n\t\traw.$level = parent.$level + 1;\n\t\tthis._pool.set(raw.id, raw);\n\n\t\tif (parent.data) {\n\t\t\tif (index === -1) parent.data = [...parent.data, raw];\n\t\t\telse insertElement(parent, index, raw);\n\t\t} else parent.data = [raw];\n\t}\n\taddAfter(raw: T, after: TID): void {\n\t\tif (!after) {\n\t\t\treturn this.add(raw, -1);\n\t\t}\n\n\t\tconst node = this.byId(after);\n\t\tconst parent = this.byId(node.parent);\n\t\tconst index = indexById(parent, node.id) + 1;\n\n\t\traw.parent = parent.id;\n\t\traw.$level = parent.$level + 1;\n\t\tthis.add(raw, index);\n\t}\n\tremove(id: TID): void {\n\t\tconst obj = this._pool.get(id);\n\t\tthis._remove(obj);\n\t\tconst parent = this._pool.get(obj.parent);\n\t\tparent.data = parent.data.filter(a => a.id != id);\n\t\tthis._clearBranch(parent);\n\t}\n\t_remove(obj: T): void {\n\t\tif (obj.data) {\n\t\t\tobj.data.forEach(i => this._remove(i as T));\n\t\t}\n\t\tthis._pool.delete(obj.id);\n\t}\n\tupdate<Data>(id: TID, values: Data): void {\n\t\tlet obj = this._pool.get(id);\n\t\tconst branch = this._pool.get(obj.parent);\n\t\tconst index = indexById(branch, obj.id);\n\n\t\tobj = { ...obj, ...values };\n\n\t\tif (branch && index >= 0) {\n\t\t\tbranch.data[index] = obj;\n\t\t\tbranch.data = [...branch.data];\n\t\t}\n\t\tthis._pool.set(obj.id, obj);\n\t}\n\tmove(id: TID, mode: string, target: TID): void {\n\t\tconst now = this._pool.get(id);\n\t\tconst dropChild = mode === \"child\";\n\t\tconst tobj = this._pool.get(target);\n\t\tconst tLevel = tobj.$level + (dropChild ? 1 : 0);\n\t\tif (!now || !tobj) return;\n\n\t\tconst parent = this._pool.get(now.parent);\n\t\tconst newParent = dropChild ? tobj : this._pool.get(tobj.parent);\n\t\tif (!newParent.data) newParent.data = [];\n\n\t\tconst index = indexById(parent, now.id);\n\t\tdeleteElement(parent, index);\n\t\tconst newIndex = dropChild\n\t\t\t? newParent.data.length\n\t\t\t: indexById(newParent, tobj.id) + (mode === \"after\" ? 1 : 0);\n\t\tinsertElement(newParent, newIndex, now);\n\n\t\tif (parent.id === newParent.id && index === newIndex) return null;\n\n\t\tnow.parent = newParent.id;\n\n\t\tif (now.$level !== tLevel) {\n\t\t\tnow.$level = tLevel;\n\t\t\tthis.setLevel(now, tLevel + 1, true);\n\t\t}\n\n\t\tthis.update(now.id, now);\n\t\tthis._clearBranch(parent);\n\t}\n\n\tprivate _clearBranch(obj: T): void {\n\t\tif (obj.data && !obj.data.length) {\n\t\t\tif (obj.open) delete obj.open;\n\t\t\tthis.update(obj.id, { data: null });\n\t\t}\n\t}\n\n\ttoArray(): T[] {\n\t\tconst out: T[] = [];\n\t\tconst kids = this._pool.get(0).data;\n\t\tif (kids) toArray(kids, out);\n\t\treturn out;\n\t}\n\tbyId(id: TID): T {\n\t\treturn this._pool.get(id);\n\t}\n\n\tgetBranch(id: TID): T[] {\n\t\treturn this._pool.get(id).data as T[];\n\t}\n\n\tforEach(cb: (value: T) => void): void {\n\t\tthis._pool.forEach((value, key) => {\n\t\t\tif (key !== 0) cb(value);\n\t\t});\n\t}\n\n\teachChild(cb: (value: T, index: number) => void, parent: TID): void {\n\t\tconst p = this.byId(parent);\n\t\tif (!p || !p.data) return;\n\t\tp.data.forEach((child, index) => {\n\t\t\tcb(this.byId(child.id), index);\n\t\t\tthis.eachChild(cb, child.id);\n\t\t});\n\t}\n\n\tsetLevel(root: IHasIDAndParent, level: number, copy: boolean): void {\n\t\tif (!root.data) return;\n\n\t\troot.data = root.data.map(child => {\n\t\t\tif (copy) {\n\t\t\t\tchild = { ...child };\n\t\t\t\tthis._pool.set(child.id, child as T);\n\t\t\t}\n\t\t\tchild.$level = level;\n\t\t\tif (child.data) this.setLevel(child, level + 1, copy);\n\t\t\treturn child;\n\t\t});\n\t}\n}\n\nfunction toArray<T extends IHasIDAndParent>(line: T[], out: T[]): void {\n\tline.forEach(a => {\n\t\tout.push(a);\n\t\tif (a.open === true) {\n\t\t\ttoArray(a.data, out);\n\t\t}\n\t});\n}\n\nfunction deleteElement(obj: IHasIDAndParent, index: number) {\n\tconst newData = [...obj.data];\n\tnewData.splice(index, 1);\n\tobj.data = newData;\n}\n\nfunction insertElement(\n\tobj: IHasIDAndParent,\n\tindex: number,\n\titem: IHasIDAndParent\n) {\n\tconst newData = [...obj.data];\n\tnewData.splice(index, 0, item);\n\tobj.data = newData;\n}\n\nfunction indexById(parentNode: IHasIDAndParent, id: TID) {\n\treturn parentNode?.data.findIndex(\n\t\t(child: IHasIDAndParent) => child.id === id\n\t);\n}\n", "import type {\n\tDataHash,\n\tIPublicWritable,\n\tTAsyncSignals,\n\tTStateMode,\n\tTDataConfig,\n\tTWritableCreator,\n} from \"./types\";\n\n// export const STORE_SET_DEFAULT:TStateMode = 1;\nexport const STORE_SET_SILENT: TStateMode = 2;\n\ntype TState<Type> = {\n\t[Property in keyof Type]: IPublicWritable<Type[Property]>;\n};\n\ntype StoreConfig = {\n\twritable: TWritableCreator;\n\tasync: boolean;\n}\n\nexport default class Store<T extends DataHash> {\n\tprivate _state: TState<T>;\n\tprivate _values: T;\n\tprivate _writable: TWritableCreator;\n\tprivate _async: boolean;\n\n\tconstructor(config: StoreConfig) {\n\t\tif (config) {\n\t\t\tthis._writable = config.writable;\n\t\t\tthis._async = config.async;\n\t\t}\n\n\t\tthis._values = {} as T;\n\t\tthis._state = {} as TState<T>;\n\t}\n\tsetState(\n\t\tdata: Partial<T>,\n\t\tmode: TStateMode | TDataConfig = 0\n\t): TAsyncSignals {\n\t\tconst signals = {} as TAsyncSignals;\n\t\tthis._wrapProperties(\n\t\t\tdata,\n\t\t\tthis._state,\n\t\t\tthis._values,\n\t\t\t\"\",\n\t\t\tsignals,\n\t\t\tmode as TStateMode\n\t\t);\n\t\treturn signals;\n\t}\n\tgetState(): T {\n\t\treturn this._values;\n\t}\n\tgetReactive(): TState<T> {\n\t\treturn this._state;\n\t}\n\tprivate _wrapProperties(\n\t\tdata: any, // eslint-disable-line @typescript-eslint/no-explicit-any\n\t\tstate: any, // eslint-disable-line @typescript-eslint/no-explicit-any\n\t\tvalues: any, // eslint-disable-line @typescript-eslint/no-explicit-any\n\t\tparent: string,\n\t\tsignals: TAsyncSignals,\n\t\tmode: TStateMode\n\t) {\n\t\tfor (const key in data) {\n\t\t\tconst os = state[key];\n\t\t\tconst ov = values[key];\n\t\t\tconst nv = data[key];\n\n\t\t\tif (os) {\n\t\t\t\t// same value\n\t\t\t\tif (ov === nv && typeof nv !== \"object\") continue;\n\t\t\t\t// so maybe we have two dates\n\t\t\t\tif (nv instanceof Date) {\n\t\t\t\t\tif (ov instanceof Date && ov.getTime() === nv.getTime()) continue;\n\t\t\t\t} else {\n\t\t\t\t\t// we have two pointers to the same array of or same object\n\t\t\t\t\t// assume that they are different\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst fullKey = parent + (parent ? \".\" : \"\") + key;\n\n\t\t\tif (os) {\n\t\t\t\tif (os.__parse(nv, fullKey, signals, mode)) values[key] = nv;\n\n\t\t\t\t// eslint-disable-next-line no-bitwise\n\t\t\t\tif (mode & STORE_SET_SILENT) signals[fullKey] = os.__trigger;\n\t\t\t\telse os.__trigger();\n\t\t\t} else {\n\t\t\t\tif (nv && nv.__reactive) {\n\t\t\t\t\tstate[key] = this._wrapNested(nv, nv, fullKey, signals);\n\t\t\t\t} else {\n\t\t\t\t\tstate[key] = this._wrapWritable(nv);\n\t\t\t\t}\n\t\t\t\tvalues[key] = nv;\n\t\t\t}\n\t\t\tsignals[fullKey] = signals[fullKey] || null;\n\t\t}\n\t}\n\tprivate _wrapNested(\n\t\tdata: any, // eslint-disable-line @typescript-eslint/no-explicit-any\n\t\tvalues: any, // eslint-disable-line @typescript-eslint/no-explicit-any\n\t\tfullKey: string,\n\t\tsignals: TAsyncSignals\n\t) {\n\t\tconst state = this._wrapWritable(data);\n\t\tthis._wrapProperties(data, state, values, fullKey, signals, 0);\n\n\t\tstate.__parse = (\n\t\t\tv: any, // eslint-disable-line @typescript-eslint/no-explicit-any\n\t\t\tfullKey: string,\n\t\t\tsignals: TAsyncSignals,\n\t\t\tmode: TStateMode\n\t\t) => {\n\t\t\tthis._wrapProperties(v, state, values, fullKey, signals, mode);\n\t\t\treturn false;\n\t\t};\n\t\treturn state;\n\t}\n\t// eslint-disable-next-line @typescript-eslint/no-explicit-any\n\tprivate _wrapWritable(val: any): IPublicWritable<any> {\n\t\tconst ss = [] as ((v: typeof val) => void)[];\n\n\t\tconst __triggerSync = function () {\n\t\t\tfor (let i = 0; i < ss.length; i++) {\n\t\t\t\tss[i](val);\n\t\t\t}\n\t\t};\n\t\tconst __trigger = () => {\n\t\t\tif (ss.length) {\n\t\t\t\tif (this._async) setTimeout(__triggerSync, 1);\n\t\t\t\telse __triggerSync();\n\t\t\t}\n\t\t};\n\t\tconst subscribe = (fn: (v: typeof val) => void) => {\n\t\t\tss.push(fn);\n\n\t\t\tif (this._async) setTimeout(fn, 1, val);\n\t\t\telse fn(val);\n\n\t\t\treturn () => {\n\t\t\t\tconst i = ss.indexOf(fn);\n\t\t\t\tif (i >= 0) ss.splice(i, 1);\n\t\t\t};\n\t\t};\n\t\tconst __parse = function (v: typeof val) {\n\t\t\tval = v;\n\t\t\treturn true;\n\t\t};\n\n\t\treturn {\n\t\t\tsubscribe,\n\t\t\t__trigger,\n\t\t\t__parse,\n\t\t};\n\t}\n}\n\nexport function markReactive<T>(t: T, nested?: boolean): T {\n\tObject.defineProperty(t, \"__reactive\", {\n\t\tvalue: true,\n\t\tenumerable: false,\n\t\twritable: false,\n\t});\n\tif (nested === true) {\n\t\tfor (const key in t) {\n\t\t\tconst sub = t[key];\n\t\t\tif (typeof sub === \"object\" && sub !== null) {\n\t\t\t\tmarkReactive(sub, true);\n\t\t\t}\n\t\t}\n\t}\n\treturn t;\n}\n", "import type {\n\tTDataConfig,\n\tTDataBlock,\n\tTParserHash,\n\tIStringHash,\n\tTAsyncSignals,\n\tTStateMode,\n} from \"./types\";\nimport type EventBus from \"./EventBus\";\nimport { STORE_SET_SILENT } from \"./Store\";\n\ntype TSetter<T> = (data: Partial<T>, mode?: TStateMode) => TAsyncSignals;\ntype TStoreLike<T> = {\n\tsetState: TSetter<T>;\n};\n\ntype AsyncUpdate = {\n\ttimer: number;\n\tsignals: TAsyncSignals;\n};\n\nexport default class DataRouter<T, D, E> {\n\tprivate _setter: TSetter<T>;\n\tprivate _routes: TDataConfig;\n\tprivate _triggers: Map<string, TDataBlock[]>;\n\tprivate _sources: Map<string, IStringHash<boolean>>;\n\tprivate _prev: Partial<D>;\n\tprivate _parsers: TParserHash;\n\tprivate _bus: EventBus<E, keyof E> | undefined;\n\tprivate _async: AsyncUpdate | null;\n\n\tconstructor(\n\t\ts: TSetter<T> | TStoreLike<T>,\n\t\tr: TDataConfig,\n\t\tp: TParserHash,\n\t\tb?: EventBus<E, keyof E>\n\t) {\n\t\tif (typeof s === \"function\") this._setter = s;\n\t\telse this._setter = s.setState.bind(s);\n\n\t\tthis._routes = r;\n\t\tthis._parsers = p;\n\t\tthis._prev = {};\n\n\t\tthis._triggers = new Map();\n\t\tthis._sources = new Map();\n\t\tthis._routes.forEach(a => {\n\t\t\ta.in.forEach(k => {\n\t\t\t\tconst arr = this._triggers.get(k) || [];\n\t\t\t\tarr.push(a);\n\t\t\t\tthis._triggers.set(k, arr);\n\t\t\t});\n\t\t\ta.out.forEach(k => {\n\t\t\t\tconst h: IStringHash<boolean> = this._sources.get(k) || {};\n\t\t\t\ta.in.forEach(i => (h[i] = true));\n\t\t\t\tthis._sources.set(k, h);\n\t\t\t});\n\t\t});\n\n\t\tthis._routes.forEach(a => {\n\t\t\ta.length = Math.max(\n\t\t\t\t...a.in.map(key => _calckSize(key, this._sources, 1))\n\t\t\t);\n\t\t});\n\n\t\tthis._bus = b;\n\t}\n\tinit(cfg: Partial<D>):void {\n\t\tconst next: Partial<T> = {};\n\t\tfor (const key in cfg) {\n\t\t\tif (this._prev[key] !== cfg[key]) {\n\t\t\t\tconst parser = this._parsers[key];\n\t\t\t\tnext[key as unknown as keyof T] = parser ? parser(cfg[key]) : cfg[key];\n\t\t\t}\n\t\t}\n\n\t\tthis._prev = this._prev ? { ...this._prev, ...cfg } : { ...cfg };\n\t\tthis.setState(next);\n\n\t\t// eslint-disable-next-line @typescript-eslint/no-explicit-any\n\t\tif (this._bus) this._bus.exec(\"init-state\" as any, next as any);\n\t}\n\tsetStateAsync(updates: Partial<T>): TAsyncSignals {\n\t\tconst signals = this._setter(updates, STORE_SET_SILENT);\n\t\tif (this._async) {\n\t\t\tObject.assign(this._async.signals, signals);\n\t\t} else {\n\t\t\tthis._async = {\n\t\t\t\tsignals,\n\t\t\t\ttimer: setTimeout(this._applyState.bind(this), 1) as unknown as number,\n\t\t\t};\n\t\t}\n\n\t\treturn signals;\n\t}\n\t_applyState():void {\n\t\tconst obj = this._async;\n\t\tif (!obj) return;\n\t\tthis._async = null;\n\n\t\t// trigger dynamic values calculation\n\t\tthis._triggerUpdates(obj.signals, []);\n\t\t// trigger external subscription\n\t\tfor (const key in obj.signals) {\n\t\t\tconst h = obj.signals[key];\n\t\t\tif (h) h();\n\t\t}\n\t}\n\tsetState(updates: Partial<T>, ctx: TDataConfig = []): TAsyncSignals {\n\t\tconst signals = this._setter(updates);\n\t\tthis._triggerUpdates(signals, ctx);\n\t\treturn signals;\n\t}\n\tprivate _triggerUpdates(signals: TAsyncSignals, ctx: TDataConfig) {\n\t\tconst keys = Object.keys(signals);\n\t\tconst needExec = !ctx.length;\n\t\tctx = ctx || [];\n\n\t\tfor (let i = 0; i < keys.length; i++) {\n\t\t\tconst key = keys[i];\n\t\t\tconst trgs = this._triggers.get(key);\n\t\t\tif (trgs) {\n\t\t\t\ttrgs.forEach(a => {\n\t\t\t\t\tif (ctx.indexOf(a) == -1) {\n\t\t\t\t\t\tctx.push(a);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tif (needExec) {\n\t\t\tthis._execNext(ctx);\n\t\t}\n\t}\n\tprivate _execNext(ctx: TDataConfig) {\n\t\twhile (ctx.length) {\n\t\t\tctx.sort((a, b) => (a.length! < b.length! ? 1 : -1));\n\n\t\t\tconst next = ctx[ctx.length - 1];\n\t\t\tctx.splice(ctx.length - 1);\n\t\t\tnext.exec(ctx);\n\t\t}\n\t}\n}\n\nfunction _calckSize(\n\tkey: string,\n\tsources: Map<string, IStringHash<boolean>>,\n\tprev: number\n): number {\n\tconst next = sources.get(key);\n\tif (!next) return prev;\n\n\tconst sizes = Object.keys(next).map(a => _calckSize(a, sources, prev + 1));\n\treturn Math.max(...sizes);\n}\n", "import type { IEventConfig, IEventBus } from \"./types\";\n\nexport default class EventBus<T, A extends keyof T> {\n\tprivate _handlers: {\n\t\t[key in A]: { (v: T[A]): void | boolean | Promise<boolean> }[];\n\t};\n\tprotected _nextHandler: IEventBus<T>;\n\tprotected _tag: WeakMap<\n\t\t{ (v: T[A]): void | boolean | Promise<boolean> },\n\t\tnumber | string | symbol\n\t>;\n\n\tconstructor() {\n\t\tthis._nextHandler = null;\n\t\tthis._handlers = {} as {\n\t\t\t[key in A]: { (v: T[A]): void | boolean | Promise<boolean> }[];\n\t\t};\n\t\tthis._tag = new WeakMap();\n\n\t\tthis.exec = this.exec.bind(this);\n\t}\n\ton(\n\t\tname: A,\n\t\thandler: (v: T[A]) => void | boolean | Promise<boolean>,\n\t\tconfig?: IEventConfig\n\t):void {\n\t\tlet prev = this._handlers[name];\n\t\tif (!prev) {\n\t\t\tprev = this._handlers[name] = [handler];\n\t\t} else {\n\t\t\tif (config && config.intercept) prev.unshift(handler);\n\t\t\telse prev.push(handler);\n\t\t}\n\n\t\tif (config && config.tag) this._tag.set(handler, config.tag);\n\t}\n\tintercept(\n\t\tname: A,\n\t\thandler: (v: T[A]) => void | boolean | Promise<boolean>,\n\t\tconfig?: IEventConfig\n\t):void {\n\t\tthis.on(name, handler, { ...config, intercept: true });\n\t}\n\tdetach(tag: number | string | symbol):void {\n\t\tfor (const key in this._handlers) {\n\t\t\tconst stack = this._handlers[key];\n\t\t\tfor (let i = stack.length - 1; i >= 0; i--) {\n\t\t\t\tif (this._tag.get(stack[i]) === tag) {\n\t\t\t\t\tstack.splice(i, 1);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tasync exec(name: A, ev: T[A]): Promise<T[A]> {\n\t\tconst stack = this._handlers[name];\n\t\tif (stack) {\n\t\t\tfor (let i = 0; i < stack.length; i++) {\n\t\t\t\tconst res = stack[i](ev);\n\t\t\t\tif (res === false) return;\n\t\t\t\tif (res && (res as Promise<boolean>).then) {\n\t\t\t\t\tconst res2 = await (res as Promise<boolean>);\n\t\t\t\t\tif (res2 === false) return;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (this._nextHandler) await this._nextHandler.exec(name, ev);\n\n\t\treturn ev;\n\t}\n\tsetNext(next: IEventBus<T>): IEventBus<T> {\n\t\treturn (this._nextHandler = next);\n\t}\n}\n", "import type { IEventBus, CommonEvent } from \"./types\";\n\nexport default class EventResolver<T> implements IEventBus<T> {\n\tprivate _key: string;\n\tprotected _nextHandler: IEventBus<T>;\n\n\tconstructor(key: string) {\n\t\tthis._key = key;\n\t\tthis._nextHandler = null;\n\n\t\tthis.exec = this.exec.bind(this);\n\t}\n\tasync exec(name: keyof T, ev: CommonEvent): Promise<T[keyof T]> {\n\t\tif (ev && ev[this._key]) await ev[this._key](ev);\n\t\tif (this._nextHandler) {\n\t\t\tawait this._nextHandler.exec(name, ev as T[keyof T]);\n\t\t}\n\n\t\treturn ev as T[keyof T];\n\t}\n\tsetNext(next: IEventBus<T>): IEventBus<T> {\n\t\treturn (this._nextHandler = next);\n\t}\n}\n", "import type { IEventBus, TDispatch, CommonEvent } from \"./types\";\n\nexport default class EventBusRouter<T> implements IEventBus<T> {\n\tprivate _dispatch: TDispatch<T>;\n\tprotected _nextHandler: IEventBus<T>;\n\n\tconstructor(dispatch: TDispatch<T>) {\n\t\tthis._nextHandler = null;\n\t\tthis._dispatch = dispatch;\n\t\tthis.exec = this.exec.bind(this);\n\t}\n\tasync exec(name: keyof T, ev: CommonEvent): Promise<T[keyof T]> {\n\t\tthis._dispatch(name, ev as T[keyof T]);\n\t\tif (this._nextHandler) await this._nextHandler.exec(name, ev as T[keyof T]);\n\t\treturn ev as T[keyof T];\n\t}\n\tsetNext(next: IEventBus<T>): IEventBus<T> {\n\t\treturn (this._nextHandler = next);\n\t}\n}\n", "var Tt=new Date().valueOf(),ve=()=>Tt++;function nt(){return\"temp://\"+Tt++}var Wt=class{constructor(t){this._data=t,this._pool=new Map;for(let e=0;e<t.length;e++){const n=t[e];this._pool.set(n.id,n)}}add(t){t={id:ve(),...t},this._data.push(t),this._pool.set(t.id,t)}update(t,e){const n=this._data.findIndex(s=>s.id==t),a={...this._data[n],...e};this._data[n]=a,this._pool.set(a.id,a)}remove(t){this._data=this._data.filter(e=>e.id!=t),this._pool.delete(t)}filter(t){this._data=this._data.filter(e=>{const n=t(e);return n||this._pool.delete(e.id),n})}byId(t){return this._pool.get(t)}map(t){return this._data.map(t)}forEach(t){this._data.forEach(t)}},Se=class{constructor(t){const e={id:0,$level:0,data:[],parent:null},n=new Map;n.set(0,e),this._pool=n,t&&t.length&&this.parse(t,0)}parse(t,e){const n=this._pool;for(let s=0;s<t.length;s++){const r=t[s];r.parent=r.parent||e,r.data=null,n.set(r.id,r)}for(let s=0;s<t.length;s++){const r=t[s],i=n.get(r.parent);i&&(i.data||(i.data=[]),i.data.push(r))}const a=n.get(e);this.setLevel(a,a.$level+1,!1)}add(t,e){const n=this._pool.get(t.parent||0);t.$level=n.$level+1,this._pool.set(t.id,t),n.data?e===-1?n.data=[...n.data,t]:It(n,e,t):n.data=[t]}addAfter(t,e){if(!e)return this.add(t,-1);const n=this.byId(e),a=this.byId(n.parent),s=G(a,n.id)+1;t.parent=a.id,t.$level=a.$level+1,this.add(t,s)}remove(t){const e=this._pool.get(t);this._remove(e);const n=this._pool.get(e.parent);n.data=n.data.filter(a=>a.id!=t),this._clearBranch(n)}_remove(t){t.data&&t.data.forEach(e=>this._remove(e)),this._pool.delete(t.id)}update(t,e){let n=this._pool.get(t);const a=this._pool.get(n.parent),s=G(a,n.id);n={...n,...e},a&&s>=0&&(a.data[s]=n,a.data=[...a.data]),this._pool.set(n.id,n)}move(t,e,n){const a=this._pool.get(t),s=e===\"child\",r=this._pool.get(n),i=r.$level+(s?1:0);if(!a||!r)return;const o=this._pool.get(a.parent),c=s?r:this._pool.get(r.parent);c.data||(c.data=[]);const d=G(o,a.id);Me(o,d);const u=s?c.data.length:G(c,r.id)+(e===\"after\"?1:0);if(It(c,u,a),o.id===c.id&&d===u)return null;a.parent=c.id,a.$level!==i&&(a.$level=i,this.setLevel(a,i+1,!0)),this.update(a.id,a),this._clearBranch(o)}_clearBranch(t){t.data&&!t.data.length&&(t.open&&delete t.open,this.update(t.id,{data:null}))}toArray(){const t=[],e=this._pool.get(0).data;return e&&$t(e,t),t}byId(t){return this._pool.get(t)}getBranch(t){return this._pool.get(t).data}forEach(t){this._pool.forEach((e,n)=>{n!==0&&t(e)})}eachChild(t,e){const n=this.byId(e);!n||!n.data||n.data.forEach((a,s)=>{t(this.byId(a.id),s),this.eachChild(t,a.id)})}setLevel(t,e,n){t.data&&(t.data=t.data.map(a=>(n&&(a={...a},this._pool.set(a.id,a)),a.$level=e,a.data&&this.setLevel(a,e+1,n),a)))}};function $t(t,e){t.forEach(n=>{e.push(n),n.open===!0&&$t(n.data,e)})}function Me(t,e){const n=[...t.data];n.splice(e,1),t.data=n}function It(t,e,n){const a=[...t.data];a.splice(e,0,n),t.data=a}function G(t,e){return t?.data.findIndex(n=>n.id===e)}var Pt=2,De=class{constructor(t){t&&(this._writable=t.writable,this._async=t.async),this._values={},this._state={}}setState(t,e=0){const n={};return this._wrapProperties(t,this._state,this._values,\"\",n,e),n}getState(){return this._values}getReactive(){return this._state}_wrapProperties(t,e,n,a,s,r){for(const i in t){const o=e[i],c=n[i],d=t[i];if(o&&(c===d&&typeof d!=\"object\"||d instanceof Date&&c instanceof Date&&c.getTime()===d.getTime()))continue;const u=a+(a?\".\":\"\")+i;o?(o.__parse(d,u,s,r)&&(n[i]=d),r&Pt?s[u]=o.__trigger:o.__trigger()):(d&&d.__reactive?e[i]=this._wrapNested(d,d,u,s):e[i]=this._wrapWritable(d),n[i]=d),s[u]=s[u]||null}}_wrapNested(t,e,n,a){const s=this._wrapWritable(t);return this._wrapProperties(t,s,e,n,a,0),s.__parse=(r,i,o,c)=>(this._wrapProperties(r,s,e,i,o,c),!1),s}_wrapWritable(t){const e=[],n=function(){for(let a=0;a<e.length;a++)e[a](t)};return{subscribe:a=>(e.push(a),this._async?setTimeout(a,1,t):a(t),()=>{const s=e.indexOf(a);s>=0&&e.splice(s,1)}),__trigger:()=>{e.length&&(this._async?setTimeout(n,1):n())},__parse:function(a){return t=a,!0}}}},Te=class{constructor(t,e,n,a){typeof t==\"function\"?this._setter=t:this._setter=t.setState.bind(t),this._routes=e,this._parsers=n,this._prev={},this._triggers=new Map,this._sources=new Map,this._routes.forEach(s=>{s.in.forEach(r=>{const i=this._triggers.get(r)||[];i.push(s),this._triggers.set(r,i)}),s.out.forEach(r=>{const i=this._sources.get(r)||{};s.in.forEach(o=>i[o]=!0),this._sources.set(r,i)})}),this._routes.forEach(s=>{s.length=Math.max(...s.in.map(r=>Ct(r,this._sources,1)))}),this._bus=a}init(t){const e={};for(const n in t)if(this._prev[n]!==t[n]){const a=this._parsers[n];e[n]=a?a(t[n]):t[n]}this._prev=this._prev?{...this._prev,...t}:{...t},this.setState(e),this._bus&&this._bus.exec(\"init-state\",e)}setStateAsync(t){const e=this._setter(t,Pt);return this._async?Object.assign(this._async.signals,e):this._async={signals:e,timer:setTimeout(this._applyState.bind(this),1)},e}_applyState(){const t=this._async;if(t){this._async=null,this._triggerUpdates(t.signals,[]);for(const e in t.signals){const n=t.signals[e];n&&n()}}}setState(t,e=[]){const n=this._setter(t);return this._triggerUpdates(n,e),n}_triggerUpdates(t,e){const n=Object.keys(t),a=!e.length;e=e||[];for(let s=0;s<n.length;s++){const r=n[s],i=this._triggers.get(r);i&&i.forEach(o=>{e.indexOf(o)==-1&&e.push(o)})}a&&this._execNext(e)}_execNext(t){for(;t.length;){t.sort((n,a)=>n.length<a.length?1:-1);const e=t[t.length-1];t.splice(t.length-1),e.exec(t)}}};function Ct(t,e,n){const a=e.get(t);if(!a)return n;const s=Object.keys(a).map(r=>Ct(r,e,n+1));return Math.max(...s)}var We=class{constructor(){this._nextHandler=null,this._handlers={},this._tag=new WeakMap,this.exec=this.exec.bind(this)}on(t,e,n){let a=this._handlers[t];a?n&&n.intercept?a.unshift(e):a.push(e):a=this._handlers[t]=[e],n&&n.tag&&this._tag.set(e,n.tag)}intercept(t,e,n){this.on(t,e,{...n,intercept:!0})}detach(t){for(const e in this._handlers){const n=this._handlers[e];for(let a=n.length-1;a>=0;a--)this._tag.get(n[a])===t&&n.splice(a,1)}}async exec(t,e){const n=this._handlers[t];if(n)for(let a=0;a<n.length;a++){const s=n[a](e);if(s===!1||s&&s.then&&await s===!1)return}return this._nextHandler&&await this._nextHandler.exec(t,e),e}setNext(t){return this._nextHandler=t}};function $e(t,e){return typeof t==\"string\"?t.localeCompare(e,void 0,{numeric:!0}):typeof t==\"object\"?t.getTime()-e.getTime():(t??0)-(e??0)}function Ie(t,e){return typeof t==\"string\"?-t.localeCompare(e,void 0,{numeric:!0}):typeof e==\"object\"?e.getTime()-t.getTime():(e??0)-(t??0)}function Pe({key:t,order:e}){const n=e===\"asc\"?$e:Ie;return(a,s)=>n(a[t],s[t])}function Ce(t){if(!t||!t.length)return;const e=t.map(n=>Pe(n));return t.length===1?e[0]:function(n,a){for(let s=0;s<e.length;s++){const r=e[s](n,a);if(r!==0)return r}return 0}}function Ee(t,e){return t.sort(Ce(e))}class Oe extends Se{_sort;constructor(e){super(),this.parse(e,0)}parse(e,n){if(!e||!e.length)return;const a=e.map(s=>this.normalizeTask(s));super.parse(a,n),this._sort&&this.sortBranch(this._sort,n)}getBranch(e){const n=this._pool.get(e);return this._pool.get(n.parent||0).data}contains(e,n){const a=this._pool.get(e).data;let s=!1;if(a)for(let r=0;r<a.length;r++){if(a[r].id===n){s=!0;break}if(a[r].data&&(s=this.contains(a[r].id,n),s))break}return s}getIndexById(e){return this.getBranch(e).findIndex(n=>n.id===e)}add(e,n){const a=this.normalizeTask(e);return super.add(a,n),a}copy(e,n,a){const s=this.add({...e,id:null,data:null,parent:n},a);let r=[[e.id,s.id]];return e.data?.forEach((i,o)=>{const c=this.copy(i,s.id,o);r=r.concat(c)}),r}normalizeTask(e){const n=e.id||nt(),a=e.parent||0,s=e.text||\"\",r=e.type||\"task\",i=e.progress||0,o=e.details||\"\",c={...e,id:n,text:s,parent:a,progress:i,type:r,details:o};return e.segments&&(c.segments=e.segments.map(d=>({...d}))),e.segments&&(c.segments=e.segments.map(d=>({...d}))),c}getSummaryId(e,n=!1){const a=this._pool.get(e);if(!a.parent)return null;const s=this._pool.get(a.parent);if(n){let r=e,i=this.getSummaryId(r);const o=[];for(;i;)r=i,o.push(i),i=this.getSummaryId(r);return o}return s.type===\"summary\"?s.id:this.getSummaryId(s.id)}sort(e){this._sort=e,e&&this.sortBranch(e,0)}sortBranch(e,n){const a=this._pool.get(n||0).data;a&&(Ee(a,e),a.forEach(s=>{this.sortBranch(e,s.id)}))}serialize(){const e=[],n=this._pool.get(0).data;return n&&Et(n,e),e}clear(){this.forEach(e=>{this.remove(e.id)})}}function Et(t,e){t.forEach(n=>{e.push(n),n.data&&Et(n.data,e)})}function b(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t==\"object\"&&e===\"[object Date]\"?new t.constructor(+t):typeof t==\"number\"||e===\"[object Number]\"||typeof t==\"string\"||e===\"[object String]\"?new Date(t):new Date(NaN)}function D(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function R(t,e){const n=b(t);return isNaN(e)?D(t,NaN):(e&&n.setDate(n.getDate()+e),n)}function at(t,e){const n=b(t);if(isNaN(e))return D(t,NaN);if(!e)return n;const a=n.getDate(),s=D(t,n.getTime());s.setMonth(n.getMonth()+e+1,0);const r=s.getDate();return a>=r?s:(n.setFullYear(s.getFullYear(),s.getMonth(),a),n)}function Ot(t,e){const n=+b(t);return D(t,n+e)}const J=6048e5,He=864e5,Ht=6e4,Nt=36e5;function Ne(t,e){return Ot(t,e*Nt)}let Ye={};function F(){return Ye}function I(t,e){const n=F(),a=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,s=b(t),r=s.getDay(),i=(r<a?7:0)+r-a;return s.setDate(s.getDate()-i),s.setHours(0,0,0,0),s}function N(t){return I(t,{weekStartsOn:1})}function Yt(t){const e=b(t),n=e.getFullYear(),a=D(t,0);a.setFullYear(n+1,0,4),a.setHours(0,0,0,0);const s=N(a),r=D(t,0);r.setFullYear(n,0,4),r.setHours(0,0,0,0);const i=N(r);return e.getTime()>=s.getTime()?n+1:e.getTime()>=i.getTime()?n:n-1}function C(t){const e=b(t);return e.setHours(0,0,0,0),e}function V(t){const e=b(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function st(t,e){const n=C(t),a=C(e),s=+n-V(n),r=+a-V(a);return Math.round((s-r)/He)}function rt(t){const e=Yt(t),n=D(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),N(n)}function ze(t,e){return Ot(t,e*Ht)}function Ae(t,e){const n=e*3;return at(t,n)}function zt(t,e){const n=e*7;return R(t,n)}function Be(t,e){return at(t,e*12)}function q(t,e){const n=b(t),a=b(e),s=n.getTime()-a.getTime();return s<0?-1:s>0?1:s}function Fe(t,e){const n=C(t),a=C(e);return+n==+a}function qe(t){return t instanceof Date||typeof t==\"object\"&&Object.prototype.toString.call(t)===\"[object Date]\"}function Ue(t){if(!qe(t)&&typeof t!=\"number\")return!1;const e=b(t);return!isNaN(Number(e))}function it(t,e){const n=N(t),a=N(e),s=+n-V(n),r=+a-V(a);return Math.round((s-r)/J)}function je(t,e){const n=b(t),a=b(e),s=n.getFullYear()-a.getFullYear(),r=n.getMonth()-a.getMonth();return s*12+r}function Le(t,e){const n=b(t),a=b(e);return n.getFullYear()-a.getFullYear()}function ot(t){return e=>{const n=(t?Math[t]:Math.trunc)(e);return n===0?0:n}}function At(t,e){return+b(t)-+b(e)}function Xe(t,e,n){const a=At(t,e)/Nt;return ot(n?.roundingMethod)(a)}function Qe(t,e,n){const a=At(t,e)/Ht;return ot(n?.roundingMethod)(a)}function Bt(t){const e=b(t);return e.setHours(23,59,59,999),e}function ct(t){const e=b(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function Ge(t){const e=b(t);return+Bt(e)==+ct(e)}function Ft(t,e){const n=b(t),a=b(e),s=q(n,a),r=Math.abs(je(n,a));let i;if(r<1)i=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-s*r);let o=q(n,a)===-s;Ge(b(t))&&r===1&&q(t,a)===1&&(o=!1),i=s*(r-Number(o))}return i===0?0:i}function Re(t,e,n){const a=Ft(t,e)/3;return ot(n?.roundingMethod)(a)}function Je(t,e){const n=b(t),a=b(e),s=q(n,a),r=Math.abs(Le(n,a));n.setFullYear(1584),a.setFullYear(1584);const i=q(n,a)===-s,o=s*(r-+i);return o===0?0:o}function U(t){const e=b(t),n=e.getMonth(),a=n-n%3;return e.setMonth(a,1),e.setHours(0,0,0,0),e}function qt(t){const e=b(t);return e.setDate(1),e.setHours(0,0,0,0),e}function Ve(t){const e=b(t),n=e.getFullYear();return e.setFullYear(n+1,0,0),e.setHours(23,59,59,999),e}function Ut(t){const e=b(t),n=D(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}function Ke(t){const e=b(t);return e.setMinutes(59,59,999),e}function Ze(t,e){const n=F(),a=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,s=b(t),r=s.getDay(),i=(r<a?-7:0)+6-(r-a);return s.setDate(s.getDate()+i),s.setHours(23,59,59,999),s}function dt(t){const e=b(t),n=e.getMonth(),a=n-n%3+3;return e.setMonth(a,0),e.setHours(23,59,59,999),e}const tn={lessThanXSeconds:{one:\"less than a second\",other:\"less than {{count}} seconds\"},xSeconds:{one:\"1 second\",other:\"{{count}} seconds\"},halfAMinute:\"half a minute\",lessThanXMinutes:{one:\"less than a minute\",other:\"less than {{count}} minutes\"},xMinutes:{one:\"1 minute\",other:\"{{count}} minutes\"},aboutXHours:{one:\"about 1 hour\",other:\"about {{count}} hours\"},xHours:{one:\"1 hour\",other:\"{{count}} hours\"},xDays:{one:\"1 day\",other:\"{{count}} days\"},aboutXWeeks:{one:\"about 1 week\",other:\"about {{count}} weeks\"},xWeeks:{one:\"1 week\",other:\"{{count}} weeks\"},aboutXMonths:{one:\"about 1 month\",other:\"about {{count}} months\"},xMonths:{one:\"1 month\",other:\"{{count}} months\"},aboutXYears:{one:\"about 1 year\",other:\"about {{count}} years\"},xYears:{one:\"1 year\",other:\"{{count}} years\"},overXYears:{one:\"over 1 year\",other:\"over {{count}} years\"},almostXYears:{one:\"almost 1 year\",other:\"almost {{count}} years\"}},en=(t,e,n)=>{let a;const s=tn[t];return typeof s==\"string\"?a=s:e===1?a=s.one:a=s.other.replace(\"{{count}}\",e.toString()),n?.addSuffix?n.comparison&&n.comparison>0?\"in \"+a:a+\" ago\":a};function ut(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const nn={full:\"EEEE, MMMM do, y\",long:\"MMMM do, y\",medium:\"MMM d, y\",short:\"MM/dd/yyyy\"},an={full:\"h:mm:ss a zzzz\",long:\"h:mm:ss a z\",medium:\"h:mm:ss a\",short:\"h:mm a\"},sn={full:\"{{date}} 'at' {{time}}\",long:\"{{date}} 'at' {{time}}\",medium:\"{{date}}, {{time}}\",short:\"{{date}}, {{time}}\"},rn={date:ut({formats:nn,defaultWidth:\"full\"}),time:ut({formats:an,defaultWidth:\"full\"}),dateTime:ut({formats:sn,defaultWidth:\"full\"})},on={lastWeek:\"'last' eeee 'at' p\",yesterday:\"'yesterday at' p\",today:\"'today at' p\",tomorrow:\"'tomorrow at' p\",nextWeek:\"eeee 'at' p\",other:\"P\"},cn=(t,e,n,a)=>on[t];function j(t){return(e,n)=>{const a=n?.context?String(n.context):\"standalone\";let s;if(a===\"formatting\"&&t.formattingValues){const i=t.defaultFormattingWidth||t.defaultWidth,o=n?.width?String(n.width):i;s=t.formattingValues[o]||t.formattingValues[i]}else{const i=t.defaultWidth,o=n?.width?String(n.width):t.defaultWidth;s=t.values[o]||t.values[i]}const r=t.argumentCallback?t.argumentCallback(e):e;return s[r]}}const dn={narrow:[\"B\",\"A\"],abbreviated:[\"BC\",\"AD\"],wide:[\"Before Christ\",\"Anno Domini\"]},un={narrow:[\"1\",\"2\",\"3\",\"4\"],abbreviated:[\"Q1\",\"Q2\",\"Q3\",\"Q4\"],wide:[\"1st quarter\",\"2nd quarter\",\"3rd quarter\",\"4th quarter\"]},ln={narrow:[\"J\",\"F\",\"M\",\"A\",\"M\",\"J\",\"J\",\"A\",\"S\",\"O\",\"N\",\"D\"],abbreviated:[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"],wide:[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"]},hn={narrow:[\"S\",\"M\",\"T\",\"W\",\"T\",\"F\",\"S\"],short:[\"Su\",\"Mo\",\"Tu\",\"We\",\"Th\",\"Fr\",\"Sa\"],abbreviated:[\"Sun\",\"Mon\",\"Tue\",\"Wed\",\"Thu\",\"Fri\",\"Sat\"],wide:[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"]},fn={narrow:{am:\"a\",pm:\"p\",midnight:\"mi\",noon:\"n\",morning:\"morning\",afternoon:\"afternoon\",evening:\"evening\",night:\"night\"},abbreviated:{am:\"AM\",pm:\"PM\",midnight:\"midnight\",noon:\"noon\",morning:\"morning\",afternoon:\"afternoon\",evening:\"evening\",night:\"night\"},wide:{am:\"a.m.\",pm:\"p.m.\",midnight:\"midnight\",noon:\"noon\",morning:\"morning\",afternoon:\"afternoon\",evening:\"evening\",night:\"night\"}},mn={narrow:{am:\"a\",pm:\"p\",midnight:\"mi\",noon:\"n\",morning:\"in the morning\",afternoon:\"in the afternoon\",evening:\"in the evening\",night:\"at night\"},abbreviated:{am:\"AM\",pm:\"PM\",midnight:\"midnight\",noon:\"noon\",morning:\"in the morning\",afternoon:\"in the afternoon\",evening:\"in the evening\",night:\"at night\"},wide:{am:\"a.m.\",pm:\"p.m.\",midnight:\"midnight\",noon:\"noon\",morning:\"in the morning\",afternoon:\"in the afternoon\",evening:\"in the evening\",night:\"at night\"}},gn=(t,e)=>{const n=Number(t),a=n%100;if(a>20||a<10)switch(a%10){case 1:return n+\"st\";case 2:return n+\"nd\";case 3:return n+\"rd\"}return n+\"th\"},pn={ordinalNumber:gn,era:j({values:dn,defaultWidth:\"wide\"}),quarter:j({values:un,defaultWidth:\"wide\",argumentCallback:t=>t-1}),month:j({values:ln,defaultWidth:\"wide\"}),day:j({values:hn,defaultWidth:\"wide\"}),dayPeriod:j({values:fn,defaultWidth:\"wide\",formattingValues:mn,defaultFormattingWidth:\"wide\"})};function L(t){return(e,n={})=>{const a=n.width,s=a&&t.matchPatterns[a]||t.matchPatterns[t.defaultMatchWidth],r=e.match(s);if(!r)return null;const i=r[0],o=a&&t.parsePatterns[a]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(o)?kn(o,h=>h.test(i)):yn(o,h=>h.test(i));let d;d=t.valueCallback?t.valueCallback(c):c,d=n.valueCallback?n.valueCallback(d):d;const u=e.slice(i.length);return{value:d,rest:u}}}function yn(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function kn(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function wn(t){return(e,n={})=>{const a=e.match(t.matchPattern);if(!a)return null;const s=a[0],r=e.match(t.parsePattern);if(!r)return null;let i=t.valueCallback?t.valueCallback(r[0]):r[0];i=n.valueCallback?n.valueCallback(i):i;const o=e.slice(s.length);return{value:i,rest:o}}}const bn=/^(\\d+)(th|st|nd|rd)?/i,xn=/\\d+/i,_n={narrow:/^(b|a)/i,abbreviated:/^(b\\.?\\s?c\\.?|b\\.?\\s?c\\.?\\s?e\\.?|a\\.?\\s?d\\.?|c\\.?\\s?e\\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},vn={any:[/^b/i,/^(a|c)/i]},Sn={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Mn={any:[/1/i,/2/i,/3/i,/4/i]},Dn={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Tn={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Wn={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},$n={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},In={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\\.?\\s?m\\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Pn={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Cn={ordinalNumber:wn({matchPattern:bn,parsePattern:xn,valueCallback:t=>parseInt(t,10)}),era:L({matchPatterns:_n,defaultMatchWidth:\"wide\",parsePatterns:vn,defaultParseWidth:\"any\"}),quarter:L({matchPatterns:Sn,defaultMatchWidth:\"wide\",parsePatterns:Mn,defaultParseWidth:\"any\",valueCallback:t=>t+1}),month:L({matchPatterns:Dn,defaultMatchWidth:\"wide\",parsePatterns:Tn,defaultParseWidth:\"any\"}),day:L({matchPatterns:Wn,defaultMatchWidth:\"wide\",parsePatterns:$n,defaultParseWidth:\"any\"}),dayPeriod:L({matchPatterns:In,defaultMatchWidth:\"any\",parsePatterns:Pn,defaultParseWidth:\"any\"})},En={code:\"en-US\",formatDistance:en,formatLong:rn,formatRelative:cn,localize:pn,match:Cn,options:{weekStartsOn:0,firstWeekContainsDate:1}};function On(t){const e=b(t);return st(e,Ut(e))+1}function Hn(t){const e=b(t),n=+N(e)-+rt(e);return Math.round(n/J)+1}function jt(t,e){const n=b(t),a=n.getFullYear(),s=F(),r=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,i=D(t,0);i.setFullYear(a+1,0,r),i.setHours(0,0,0,0);const o=I(i,e),c=D(t,0);c.setFullYear(a,0,r),c.setHours(0,0,0,0);const d=I(c,e);return n.getTime()>=o.getTime()?a+1:n.getTime()>=d.getTime()?a:a-1}function Nn(t,e){const n=F(),a=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,s=jt(t,e),r=D(t,0);return r.setFullYear(s,0,a),r.setHours(0,0,0,0),I(r,e)}function Yn(t,e){const n=b(t),a=+I(n,e)-+Nn(n,e);return Math.round(a/J)+1}function x(t,e){const n=t<0?\"-\":\"\",a=Math.abs(t).toString().padStart(e,\"0\");return n+a}const P={y(t,e){const n=t.getFullYear(),a=n>0?n:1-n;return x(e===\"yy\"?a%100:a,e.length)},M(t,e){const n=t.getMonth();return e===\"M\"?String(n+1):x(n+1,2)},d(t,e){return x(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?\"pm\":\"am\";switch(e){case\"a\":case\"aa\":return n.toUpperCase();case\"aaa\":return n;case\"aaaaa\":return n[0];case\"aaaa\":default:return n===\"am\"?\"a.m.\":\"p.m.\"}},h(t,e){return x(t.getHours()%12||12,e.length)},H(t,e){return x(t.getHours(),e.length)},m(t,e){return x(t.getMinutes(),e.length)},s(t,e){return x(t.getSeconds(),e.length)},S(t,e){const n=e.length,a=t.getMilliseconds(),s=Math.trunc(a*Math.pow(10,n-3));return x(s,e.length)}},Y={midnight:\"midnight\",noon:\"noon\",morning:\"morning\",afternoon:\"afternoon\",evening:\"evening\",night:\"night\"},Lt={G:function(t,e,n){const a=t.getFullYear()>0?1:0;switch(e){case\"G\":case\"GG\":case\"GGG\":return n.era(a,{width:\"abbreviated\"});case\"GGGGG\":return n.era(a,{width:\"narrow\"});case\"GGGG\":default:return n.era(a,{width:\"wide\"})}},y:function(t,e,n){if(e===\"yo\"){const a=t.getFullYear(),s=a>0?a:1-a;return n.ordinalNumber(s,{unit:\"year\"})}return P.y(t,e)},Y:function(t,e,n,a){const s=jt(t,a),r=s>0?s:1-s;if(e===\"YY\"){const i=r%100;return x(i,2)}return e===\"Yo\"?n.ordinalNumber(r,{unit:\"year\"}):x(r,e.length)},R:function(t,e){const n=Yt(t);return x(n,e.length)},u:function(t,e){const n=t.getFullYear();return x(n,e.length)},Q:function(t,e,n){const a=Math.ceil((t.getMonth()+1)/3);switch(e){case\"Q\":return String(a);case\"QQ\":return x(a,2);case\"Qo\":return n.ordinalNumber(a,{unit:\"quarter\"});case\"QQQ\":return n.quarter(a,{width:\"abbreviated\",context:\"formatting\"});case\"QQQQQ\":return n.quarter(a,{width:\"narrow\",context:\"formatting\"});case\"QQQQ\":default:return n.quarter(a,{width:\"wide\",context:\"formatting\"})}},q:function(t,e,n){const a=Math.ceil((t.getMonth()+1)/3);switch(e){case\"q\":return String(a);case\"qq\":return x(a,2);case\"qo\":return n.ordinalNumber(a,{unit:\"quarter\"});case\"qqq\":return n.quarter(a,{width:\"abbreviated\",context:\"standalone\"});case\"qqqqq\":return n.quarter(a,{width:\"narrow\",context:\"standalone\"});case\"qqqq\":default:return n.quarter(a,{width:\"wide\",context:\"standalone\"})}},M:function(t,e,n){const a=t.getMonth();switch(e){case\"M\":case\"MM\":return P.M(t,e);case\"Mo\":return n.ordinalNumber(a+1,{unit:\"month\"});case\"MMM\":return n.month(a,{width:\"abbreviated\",context:\"formatting\"});case\"MMMMM\":return n.month(a,{width:\"narrow\",context:\"formatting\"});case\"MMMM\":default:return n.month(a,{width:\"wide\",context:\"formatting\"})}},L:function(t,e,n){const a=t.getMonth();switch(e){case\"L\":return String(a+1);case\"LL\":return x(a+1,2);case\"Lo\":return n.ordinalNumber(a+1,{unit:\"month\"});case\"LLL\":return n.month(a,{width:\"abbreviated\",context:\"standalone\"});case\"LLLLL\":return n.month(a,{width:\"narrow\",context:\"standalone\"});case\"LLLL\":default:return n.month(a,{width:\"wide\",context:\"standalone\"})}},w:function(t,e,n,a){const s=Yn(t,a);return e===\"wo\"?n.ordinalNumber(s,{unit:\"week\"}):x(s,e.length)},I:function(t,e,n){const a=Hn(t);return e===\"Io\"?n.ordinalNumber(a,{unit:\"week\"}):x(a,e.length)},d:function(t,e,n){return e===\"do\"?n.ordinalNumber(t.getDate(),{unit:\"date\"}):P.d(t,e)},D:function(t,e,n){const a=On(t);return e===\"Do\"?n.ordinalNumber(a,{unit:\"dayOfYear\"}):x(a,e.length)},E:function(t,e,n){const a=t.getDay();switch(e){case\"E\":case\"EE\":case\"EEE\":return n.day(a,{width:\"abbreviated\",context:\"formatting\"});case\"EEEEE\":return n.day(a,{width:\"narrow\",context:\"formatting\"});case\"EEEEEE\":return n.day(a,{width:\"short\",context:\"formatting\"});case\"EEEE\":default:return n.day(a,{width:\"wide\",context:\"formatting\"})}},e:function(t,e,n,a){const s=t.getDay(),r=(s-a.weekStartsOn+8)%7||7;switch(e){case\"e\":return String(r);case\"ee\":return x(r,2);case\"eo\":return n.ordinalNumber(r,{unit:\"day\"});case\"eee\":return n.day(s,{width:\"abbreviated\",context:\"formatting\"});case\"eeeee\":return n.day(s,{width:\"narrow\",context:\"formatting\"});case\"eeeeee\":return n.day(s,{width:\"short\",context:\"formatting\"});case\"eeee\":default:return n.day(s,{width:\"wide\",context:\"formatting\"})}},c:function(t,e,n,a){const s=t.getDay(),r=(s-a.weekStartsOn+8)%7||7;switch(e){case\"c\":return String(r);case\"cc\":return x(r,e.length);case\"co\":return n.ordinalNumber(r,{unit:\"day\"});case\"ccc\":return n.day(s,{width:\"abbreviated\",context:\"standalone\"});case\"ccccc\":return n.day(s,{width:\"narrow\",context:\"standalone\"});case\"cccccc\":return n.day(s,{width:\"short\",context:\"standalone\"});case\"cccc\":default:return n.day(s,{width:\"wide\",context:\"standalone\"})}},i:function(t,e,n){const a=t.getDay(),s=a===0?7:a;switch(e){case\"i\":return String(s);case\"ii\":return x(s,e.length);case\"io\":return n.ordinalNumber(s,{unit:\"day\"});case\"iii\":return n.day(a,{width:\"abbreviated\",context:\"formatting\"});case\"iiiii\":return n.day(a,{width:\"narrow\",context:\"formatting\"});case\"iiiiii\":return n.day(a,{width:\"short\",context:\"formatting\"});case\"iiii\":default:return n.day(a,{width:\"wide\",context:\"formatting\"})}},a:function(t,e,n){const a=t.getHours()/12>=1?\"pm\":\"am\";switch(e){case\"a\":case\"aa\":return n.dayPeriod(a,{width:\"abbreviated\",context:\"formatting\"});case\"aaa\":return n.dayPeriod(a,{width:\"abbreviated\",context:\"formatting\"}).toLowerCase();case\"aaaaa\":return n.dayPeriod(a,{width:\"narrow\",context:\"formatting\"});case\"aaaa\":default:return n.dayPeriod(a,{width:\"wide\",context:\"formatting\"})}},b:function(t,e,n){const a=t.getHours();let s;switch(a===12?s=Y.noon:a===0?s=Y.midnight:s=a/12>=1?\"pm\":\"am\",e){case\"b\":case\"bb\":return n.dayPeriod(s,{width:\"abbreviated\",context:\"formatting\"});case\"bbb\":return n.dayPeriod(s,{width:\"abbreviated\",context:\"formatting\"}).toLowerCase();case\"bbbbb\":return n.dayPeriod(s,{width:\"narrow\",context:\"formatting\"});case\"bbbb\":default:return n.dayPeriod(s,{width:\"wide\",context:\"formatting\"})}},B:function(t,e,n){const a=t.getHours();let s;switch(a>=17?s=Y.evening:a>=12?s=Y.afternoon:a>=4?s=Y.morning:s=Y.night,e){case\"B\":case\"BB\":case\"BBB\":return n.dayPeriod(s,{width:\"abbreviated\",context:\"formatting\"});case\"BBBBB\":return n.dayPeriod(s,{width:\"narrow\",context:\"formatting\"});case\"BBBB\":default:return n.dayPeriod(s,{width:\"wide\",context:\"formatting\"})}},h:function(t,e,n){if(e===\"ho\"){let a=t.getHours()%12;return a===0&&(a=12),n.ordinalNumber(a,{unit:\"hour\"})}return P.h(t,e)},H:function(t,e,n){return e===\"Ho\"?n.ordinalNumber(t.getHours(),{unit:\"hour\"}):P.H(t,e)},K:function(t,e,n){const a=t.getHours()%12;return e===\"Ko\"?n.ordinalNumber(a,{unit:\"hour\"}):x(a,e.length)},k:function(t,e,n){let a=t.getHours();return a===0&&(a=24),e===\"ko\"?n.ordinalNumber(a,{unit:\"hour\"}):x(a,e.length)},m:function(t,e,n){return e===\"mo\"?n.ordinalNumber(t.getMinutes(),{unit:\"minute\"}):P.m(t,e)},s:function(t,e,n){return e===\"so\"?n.ordinalNumber(t.getSeconds(),{unit:\"second\"}):P.s(t,e)},S:function(t,e){return P.S(t,e)},X:function(t,e,n){const a=t.getTimezoneOffset();if(a===0)return\"Z\";switch(e){case\"X\":return Qt(a);case\"XXXX\":case\"XX\":return E(a);case\"XXXXX\":case\"XXX\":default:return E(a,\":\")}},x:function(t,e,n){const a=t.getTimezoneOffset();switch(e){case\"x\":return Qt(a);case\"xxxx\":case\"xx\":return E(a);case\"xxxxx\":case\"xxx\":default:return E(a,\":\")}},O:function(t,e,n){const a=t.getTimezoneOffset();switch(e){case\"O\":case\"OO\":case\"OOO\":return\"GMT\"+Xt(a,\":\");case\"OOOO\":default:return\"GMT\"+E(a,\":\")}},z:function(t,e,n){const a=t.getTimezoneOffset();switch(e){case\"z\":case\"zz\":case\"zzz\":return\"GMT\"+Xt(a,\":\");case\"zzzz\":default:return\"GMT\"+E(a,\":\")}},t:function(t,e,n){const a=Math.trunc(t.getTime()/1e3);return x(a,e.length)},T:function(t,e,n){const a=t.getTime();return x(a,e.length)}};function Xt(t,e=\"\"){const n=t>0?\"-\":\"+\",a=Math.abs(t),s=Math.trunc(a/60),r=a%60;return r===0?n+String(s):n+String(s)+e+x(r,2)}function Qt(t,e){return t%60===0?(t>0?\"-\":\"+\")+x(Math.abs(t)/60,2):E(t,e)}function E(t,e=\"\"){const n=t>0?\"-\":\"+\",a=Math.abs(t),s=x(Math.trunc(a/60),2),r=x(a%60,2);return n+s+e+r}const Gt=(t,e)=>{switch(t){case\"P\":return e.date({width:\"short\"});case\"PP\":return e.date({width:\"medium\"});case\"PPP\":return e.date({width:\"long\"});case\"PPPP\":default:return e.date({width:\"full\"})}},Rt=(t,e)=>{switch(t){case\"p\":return e.time({width:\"short\"});case\"pp\":return e.time({width:\"medium\"});case\"ppp\":return e.time({width:\"long\"});case\"pppp\":default:return e.time({width:\"full\"})}},zn=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],a=n[1],s=n[2];if(!s)return Gt(t,e);let r;switch(a){case\"P\":r=e.dateTime({width:\"short\"});break;case\"PP\":r=e.dateTime({width:\"medium\"});break;case\"PPP\":r=e.dateTime({width:\"long\"});break;case\"PPPP\":default:r=e.dateTime({width:\"full\"});break}return r.replace(\"{{date}}\",Gt(a,e)).replace(\"{{time}}\",Rt(s,e))},An={p:Rt,P:zn},Bn=/^D+$/,Fn=/^Y+$/,qn=[\"D\",\"DD\",\"YY\",\"YYYY\"];function Un(t){return Bn.test(t)}function jn(t){return Fn.test(t)}function Ln(t,e,n){const a=Xn(t,e,n);if(console.warn(a),qn.includes(t))throw new RangeError(a)}function Xn(t,e,n){const a=t[0]===\"Y\"?\"years\":\"days of the month\";return`Use \\`${t.toLowerCase()}\\` instead of \\`${t}\\` (in \\`${e}\\`) for formatting ${a} to the input \\`${n}\\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Qn=/[yYQqMLwIdDecihHKkms]o|(\\w)\\1*|''|'(''|[^'])+('|$)|./g,Gn=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Rn=/^'([^]*?)'?$/,Jn=/''/g,Vn=/[a-zA-Z]/;function Kn(t,e,n){const a=F(),s=n?.locale??a.locale??En,r=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??a.firstWeekContainsDate??a.locale?.options?.firstWeekContainsDate??1,i=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??a.weekStartsOn??a.locale?.options?.weekStartsOn??0,o=b(t);if(!Ue(o))throw new RangeError(\"Invalid time value\");let c=e.match(Gn).map(u=>{const h=u[0];if(h===\"p\"||h===\"P\"){const l=An[h];return l(u,s.formatLong)}return u}).join(\"\").match(Qn).map(u=>{if(u===\"''\")return{isToken:!1,value:\"'\"};const h=u[0];if(h===\"'\")return{isToken:!1,value:Zn(u)};if(Lt[h])return{isToken:!0,value:u};if(h.match(Vn))throw new RangeError(\"Format string contains an unescaped latin alphabet character `\"+h+\"`\");return{isToken:!1,value:u}});s.localize.preprocessor&&(c=s.localize.preprocessor(o,c));const d={firstWeekContainsDate:r,weekStartsOn:i,locale:s};return c.map(u=>{if(!u.isToken)return u.value;const h=u.value;(!n?.useAdditionalWeekYearTokens&&jn(h)||!n?.useAdditionalDayOfYearTokens&&Un(h))&&Ln(h,e,String(t));const l=Lt[h[0]];return l(o,h,s.localize,d)}).join(\"\")}function Zn(t){const e=t.match(Rn);return e?e[1].replace(Jn,\"'\"):t}function Jt(t){const e=b(t),n=e.getFullYear(),a=e.getMonth(),s=D(t,0);return s.setFullYear(n,a+1,0),s.setHours(0,0,0,0),s.getDate()}function ta(t){const e=b(t).getFullYear();return e%400===0||e%4===0&&e%100!==0}function Vt(t){const e=b(t);return String(new Date(e))===\"Invalid Date\"?NaN:ta(e)?366:365}function ea(t){const e=rt(t),n=+rt(zt(e,60))-+e;return Math.round(n/J)}function z(t,e){const n=b(t),a=b(e);return+n==+a}function na(t){const e=b(t);return e.setMinutes(0,0,0),e}function aa(t,e,n){const a=I(t,n),s=I(e,n);return+a==+s}function sa(t,e){const n=b(t),a=b(e);return n.getFullYear()===a.getFullYear()&&n.getMonth()===a.getMonth()}function ra(t,e){const n=U(t),a=U(e);return+n==+a}function ia(t,e){const n=b(t),a=b(e);return n.getFullYear()===a.getFullYear()}const lt={year:Je,quarter:Re,month:Ft,week:it,day:st,hour:Xe,minute:Qe},O={year:{quarter:4,month:12,week:ea,day:oa,hour:ca},quarter:{month:3,week:da,day:Kt,hour:ua},month:{week:la,day:ha,hour:fa},week:{day:7,hour:24*7},day:{hour:24},hour:{minute:60}};function oa(t){return t?Vt(t):365}function ca(t){return Vt(t)*24}function da(t){const e=U(t),n=R(C(dt(t)),1);return it(n,e)}function Kt(t){if(t){const e=U(t),n=dt(t);return st(n,e)+1}return 91}function ua(t){return Kt(t)*24}function la(t){if(t){const e=qt(t),n=R(C(ct(t)),1);return it(n,e)}return 5}function ha(t){return t?Jt(t):30}function fa(t){return Jt(t)*24}function K(t,e,n){const a=O[t][e];return a?typeof a==\"number\"?a:a(n):1}function ma(t,e){return t===e||!!(O[t]&&O[t][e])}const Z={year:Be,quarter:Ae,month:at,week:zt,day:R,hour:Ne,minute:ze};function tt(t,e,n){if(e){if(t===\"day\")return(a,s)=>e.getWorkingDays(s,a,!0);if(t===\"hour\")return(a,s)=>e.getWorkingHours(s,a,!0)}return(a,s,r,i)=>{const o=O[t]?.[r];return!o||typeof o==\"number\"||ee(t,a,s,n)?X(t,a,s,r,i,n):ga(a,s,t,r,i,n)}}function X(t,e,n,a,s,r){const i=a||t;let o=n,c=e;if(s&&(o=$(i,n,r),c=$(i,e,r),c<e&&(c=T(i)(c,1))),t!==i){const d=lt[i](c,o),u=K(t,i,n);return d/u}else return lt[i](c,o)}function ga(t,e,n,a,s,r){let i=0;const o=$(n,e,r);if(e>o){const d=Z[n](o,1);i=X(n,d,e,a,void 0,r),e=d}let c=0;return ee(n,e,t,r)||(c=X(n,$(n,t,r),e,void 0,void 0,r),e=Z[n](e,c)),c+=i+X(n,t,e,a,void 0,r),!c&&s&&(c=X(n,t,e,a,s,r)),c}function T(t,e){if(e){if(t===\"day\")return(n,a)=>e.addWorkingDays(n,a,!0);if(t===\"hour\")return(n,a)=>e.addWorkingHours(n,a)}return Z[t]}const Zt={year:Ut,quarter:U,month:qt,week:(t,e)=>I(t,{weekStartsOn:e}),day:C,hour:na};function $(t,e,n){const a=Zt[t];return a?a(e,n):new Date(e)}const pa={year:Ve,quarter:dt,month:ct,week:(t,e)=>Ze(t,{weekStartsOn:e}),day:Bt,hour:Ke},te={year:ia,quarter:ra,month:sa,week:(t,e,n)=>aa(t,e,{weekStartsOn:n}),day:Fe};function ee(t,e,n,a){const s=te[t];return s?s(e,n,a):!1}const ya={start:Zt,end:pa,add:Z,isSame:te,diff:lt,smallerCount:O},ne=t=>typeof t==\"function\"?t(new Date):t;function ka(t,e){for(const n in e){if(n===\"smallerCount\"){const a=Object.keys(e[n]).sort((o,c)=>W.indexOf(o)-W.indexOf(c)).shift();let s=W.indexOf(a);const r=e[n][a],i=ne(r);for(let o=s-1;o>=0;o--){const c=W[o],d=ne(O[c][a]);if(i<=d)break;s=o}W.splice(s,0,t)}if(n===\"biggerCount\")for(const a in e[n])O[a][t]=e[n][a];else ya[n][t]=e[n]}}function ht(t,e=1,n){return n.isWorkingDay(t)||(t=e>0?n.getNextWorkingDay(t):n.getPreviousWorkingDay(t)),t}function wa(t){return(e,n)=>{if(n>0)for(let a=0;a<n;a++)e=t.getNextWorkingDay(e);if(n<0)for(let a=0;a>n;a--)e=t.getPreviousWorkingDay(e);return e}}function A(t){const e=new Date;return t.map(n=>({item:n,len:T(n.unit)(e,1)})).sort((n,a)=>n.len<a.len?-1:1)[0].item}const W=[\"year\",\"quarter\",\"month\",\"week\",\"day\",\"hour\"],ft=50,mt=300;function ba(t,e,n,a,s,r){const i=!t||n,o=!e||n;let c=t,d=e,u=!1,h=!1;(i||o)&&(s?.forEach(f=>{i&&(!c||f.start<=c)&&(c=f.start,u=!0);const g=f.type===\"milestone\"?f.start:f.end;o&&(!d||g>=d)&&(d=g,h=!0)}),r?.forEach(f=>{i&&(!c||f.start<=c)&&(c=f.start,u=!0),o&&(!d||f.start>=d)&&(d=f.start,h=!0)}));const l=T(a||\"day\");return c?u&&(c=l(c,-1)):d?c=l(d,-30):c=new Date,d?h&&(d=l(d,1)):d=l(c,30),{_start:c,_end:d}}function xa(t,e,n,a,s,r,i){const o=A(i).unit,c=tt(o,void 0,r),d=c(e,t,\"\",!0),u=$(o,e,r);t=$(o,t,r),e=u<e?T(o)(u,1):u;const h=d*a,l=s*i.length,f=i.map(m=>{const y=[],p=T(m.unit);let k=$(m.unit,t,r);for(;k<e;){const w=p(k,m.step),_=k<t?t:k,v=w>e?e:w,S=c(v,_,\"\",!0)*a,M=typeof m.format==\"function\"?m.format(k,w):m.format;let B=\"\";m.css&&(B+=typeof m.css==\"function\"?m.css(k):m.css),y.push({width:S,value:M,date:_,css:B,unit:m.unit}),k=w}return{cells:y,add:p,height:s}});let g=a;return o!==n&&(g=g/K(o,n)),{rows:f,width:h,height:l,diff:c,start:t,end:e,lengthUnit:n,minUnit:o,lengthUnitWidth:g}}function _a(t,e,n,a){const s=typeof t==\"boolean\"?{}:t,r=W.indexOf(A(n).unit);if(typeof s.level>\"u\"&&(s.level=r),s.levels)s.levels.forEach(c=>{c.minCellWidth||(c.minCellWidth=et(s.minCellWidth,ft)),c.maxCellWidth||(c.maxCellWidth=et(s.maxCellWidth,mt))});else{const c=[],d=n.length||1,u=et(s.minCellWidth,ft),h=et(s.maxCellWidth,mt);n.forEach(l=>{l.format&&!e[l.unit]&&(e[l.unit]=l.format)}),W.forEach((l,f)=>{if(f===r)c.push({minCellWidth:u,maxCellWidth:h,scales:n});else{const g=[];if(f)for(let m=d-1;m>0;m--){const y=W[f-m];y&&g.push({unit:y,step:1,format:e[y]})}g.push({unit:l,step:1,format:e[l]}),c.push({minCellWidth:u,maxCellWidth:h,scales:g})}}),s.levels=c}s.levels[s.level]||(s.level=0);const i=s.levels[s.level],o=Math.min(Math.max(a,i.minCellWidth),i.maxCellWidth);return{zoom:s,scales:i.scales,cellWidth:o}}function va(t,e,n,a,s,r,i){t.level=n;let o;const c=a.scales||a,d=A(c).unit,u=Sa(d,s);if(e===-1){const f=K(d,s);o=i*f}else{const f=K(A(r).unit,d);o=Math.round(i/f)}const h=a.minCellWidth??ft,l=a.maxCellWidth??mt;return{scales:c,cellWidth:Math.min(l,Math.max(h,o)),lengthUnit:u,zoom:t}}function Sa(t,e){const n=W.indexOf(t),a=W.indexOf(e);return a>=n?t===\"hour\"?\"hour\":\"day\":W[a]}function et(t,e){return t??e}const gt=8,ae=4,Ma=3,se=7,Da=gt+ae;function re(t,e,n){(t.open||t.type!=\"summary\")&&t.data?.forEach(a=>{typeof a.$x>\"u\"&&oe(a,n),a.$x+=e,re(a,e,n)})}function pt(t,e,n,a){const s=t.getSummaryId(e.id);if(s){const r=t.byId(s),i={xMin:1/0,xMax:0};a&&de(r,n),ie(r,i,n),r.$x=i.xMin,r.$w=i.xMax-i.xMin,pt(t,r,n)}}function ie(t,e,n){t.data?.forEach(a=>{if(!a.unscheduled){typeof a.$x>\"u\"&&oe(a,n);const s=a.type===\"milestone\"&&a.$h?a.$h/2:0;e.xMin>a.$x+s&&(e.xMin=a.$x+s);const r=a.$x+a.$w-s;e.xMax<r&&(e.xMax=r)}a.type!==\"summary\"&&ie(a,e,n)})}function oe(t,e){const{_scales:n,cellWidth:a}=e;t.$x=Math.round(n.diff(t.start,n.start,n.lengthUnit)*a),t.$w=Math.round(n.diff(t.end,t.start,n.lengthUnit,!0)*a)}function yt(t,e){let n;e&&(n=e.filter(s=>s.parent==t.id));const a={data:n,...t};if(a.data?.length)a.data.forEach(s=>{if(s.unscheduled&&!s.data)return;(e||s.type!=\"summary\"&&s.data)&&(s.unscheduled&&(s={...s,start:void 0,end:void 0}),s=yt(s,e)),s.start&&(!a.start||a.start>s.start)&&(a.start=new Date(s.start));const r=s.end||s.start;r&&(!a.end||a.end<r)&&(a.end=new Date(r))});else if(t.type===\"summary\")throw Error(\"Summary tasks must have start and end dates if they have no subtasks\");return a}function ce(t,e,n){return kt(t,e,n,!1),n.splitTasks&&t.segments?.forEach(a=>{ce(a,e,{...n,baselines:!1}),a.$x-=t.$x}),n.baselines&&kt(t,e,n,!0),t}function kt(t,e,n,a){const{cellWidth:s,cellHeight:r,_scales:i,baselines:o}=n,{start:c,end:d,lengthUnit:u,diff:h}=i,l=(a?\"base_\":\"\")+\"start\",f=(a?\"base_\":\"\")+\"end\",g=\"$x\"+(a?\"_base\":\"\"),m=\"$y\"+(a?\"_base\":\"\"),y=\"$w\"+(a?\"_base\":\"\"),p=\"$h\"+(a?\"_base\":\"\"),k=\"$skip\"+(a?\"_baseline\":\"\");let w=t[l],_=t[f];if(a&&!w){t[k]=!0;return}t[l]<c&&(t[f]<c||z(t[f],c))?w=_=c:t[l]>d&&(w=_=d),t[g]=Math.round(h(w,c,u)*s),t[y]=Math.round(h(_,w,u,!0)*s),e!==null&&(t[m]=a?t.$y+t.$h+ae:r*e+Ma),t[p]=a?gt:o?r-se-Da:r-se,t.type===\"milestone\"&&(t[g]=t[g]-t.$h/2,t[y]=t.$h,a&&(t[m]=t.$y+gt,t[y]=t[p]=t.$h)),n.unscheduledTasks&&t.unscheduled&&!a?t.$skip=!0:t[k]=z(w,_)}function de(t,e,n){t.data&&!t.$skip&&(n=n||!t.open,t.data.forEach(a=>{n&&kt(a,null,e,!1),de(a,e,n)}))}function Ta(t,e){return!1}function Wa(t,e){}const wt=20,$a=function(t,e,n,a,s){const r=Math.round(a/2)-3;if(!e||!n||!e.$y||!n.$y||e.$skip||n.$skip)return t.$p=\"\",t.$pl=0,t;let i=!1,o=!1;switch(t.type){case\"e2s\":o=!0;break;case\"s2s\":i=!0,o=!0;break;case\"s2e\":i=!0;break}const c=i?e.$x:e.$x+e.$w,d=s?e.$y-7:e.$y,u=o?n.$x:n.$x+n.$w,h=s?n.$y-7:n.$y;if(c!==u||d!==h){const l=Pa(c,d+r,u,h+r,i,o,a/2,s),f=Ca(u,h+r,o);t.$p=`${l},${f}`,t.$pl=Ia(t.$p)}return t};function Ia(t){const e=t.split(\",\").map(Number),n=[];for(let s=0;s<e.length;s+=2)s+1<e.length&&n.push([e[s],e[s+1]]);let a=0;for(let s=0;s<n.length-1;s++){const[r,i]=n[s],[o,c]=n[s+1];a+=Math.hypot(o-r,c-i)}return a}function Pa(t,e,n,a,s,r,i,o){const c=wt*(s?-1:1),d=wt*(r?-1:1),u=t+c,h=n+d,l=[t,e,u,e,0,0,0,0,h,a,n,a],f=h-u;let g=a-e;const m=r===s;return m||(h<=t+wt-2&&r||h>t&&!r)&&(g=o?g-i+6:g-i),m&&r&&u>h||m&&!r&&u<h?(l[4]=l[2]+f,l[5]=l[3],l[6]=l[4],l[7]=l[5]+g):(l[4]=l[2],l[5]=l[3]+g,l[6]=l[4]+f,l[7]=l[5]),l.join(\",\")}function Ca(t,e,n){return n?`${t-5},${e-3},${t-5},${e+3},${t},${e}`:`${t+5},${e+3},${t+5},${e-3},${t},${e}`}function Ea(t,e,n){if(e&&n){const a=n.x-e.x,s=n.y-e.y,r=(a>0?e.x:n.x)-t.left,i=(s>0?e.y:n.y)-t.top,o=`${a>0?0:-a},${s>0?0:-s},${a>0?a:0},${s>0?s:0}`;return{width:Math.abs(a),height:Math.abs(s),left:r,top:i,p:o}}else return null}function ue(t){return t.map(e=>{const n=e.id||nt();return{...e,id:n}})}const le=[\"start\",\"end\",\"duration\"];function Oa(t,e){const{type:n,unscheduled:a}=t;return a||n===\"summary\"?!le.includes(e):n===\"milestone\"?![\"end\",\"duration\"].includes(e):!0}function Ha(t,e){return typeof e==\"function\"?e:le.includes(t)?(typeof e==\"string\"&&(e={type:e,config:{}}),e.config||(e.config={}),e.type===\"datepicker\"&&(e.config.buttons=[\"today\"]),(n,a)=>Oa(n,a.id)?e:null):e}function Na(t){return!t||!t.length?[]:t.map(e=>{const n=e.align||\"left\",a=e.id===\"add-task\",s=!a&&e.flexgrow?e.flexgrow:null,r=s?1:e.width||(a?50:120),i=e.editor&&Ha(e.id,e.editor);return{width:r,align:n,header:e.header,id:e.id,template:e.template,_template:e._template,...s&&{flexgrow:s},cell:e.cell,resize:e.resize??!0,sort:e.sort??!a,...i&&{editor:i},...e.options&&{options:e.options}}})}const Ya=[{id:\"text\",header:\"Task name\",flexgrow:1,sort:!0},{id:\"start\",header:\"Start date\",align:\"center\",sort:!0},{id:\"duration\",header:\"Duration\",width:100,align:\"center\",sort:!0},{id:\"add-task\",header:\"Add task\",width:50,align:\"center\",sort:!1,resize:!1}];function Q(t,e,n,a){const{selected:s,tasks:r}=t.getState(),i=s.length,o=[\"edit-task\",\"paste-task\",\"edit-task:task\",\"edit-task:segment\"],c=[\"copy-task\",\"cut-task\"],d=[\"copy-task\",\"cut-task\",\"delete-task\",\"indent-task:remove\",\"move-task:down\"],u=[\"add-task\",\"undo\",\"redo\"],h=[\"indent-task:add\",\"move-task:down\",\"move-task:up\"],l={\"indent-task:remove\":2},f=!i&&u.includes(e),g={parent:h.includes(e),level:l[e]};if(n=n||(i?s[s.length-1]:null),!(!n&&!f)){if(e!==\"paste-task\"&&(t._temp=null),o.includes(e)||f||s.length===1)he(t,e,n,a);else if(i){const m=c.includes(e)?s:za(s,r,g);d.includes(e)&&m.reverse();const y=t.getHistory();y&&y.startBatch(),m.forEach((p,k)=>he(t,e,p,a,k)),y&&y.endBatch()}}}function za(t,e,n){let a=t.map(s=>{const r=e.byId(s);return{id:s,level:r.$level,parent:r.parent,index:e.getIndexById(s)}});return(n.parent||n.level)&&(a=a.filter(s=>n.level&&s.level<=n.level||!t.includes(s.parent))),a.sort((s,r)=>s.level-r.level||s.index-r.index),a.map(s=>s.id)}function he(t,e,n,a,s){const r=t.exec?t.exec:t.in.exec;let i=e.split(\":\")[0],o=e.split(\":\")[1];const c=n?.id||n;let d={id:c},u={},h=!1;if(i==\"copy-task\"||i==\"cut-task\"){t._temp||(t._temp=[]),t._temp.push({id:c,cut:i==\"cut-task\"});return}else if(i==\"paste-task\"){if(t._temp&&t._temp.length){const l=t.getHistory();l&&l.startBatch();const f=new Map;if(t._temp.forEach(g=>{const m={id:g.id,target:c,mode:\"after\"};r(g.cut?\"move-task\":\"copy-task\",m),f.set(g.id,m.id)}),!t._temp[0].cut){const{links:g}=t.getState(),m=t._temp.map(p=>p.id),y=[];g.forEach(p=>{m.includes(p.source)&&m.includes(p.target)&&y.push(p)}),y.forEach(p=>{r(\"add-link\",{link:{source:f.get(p.source),target:f.get(p.target),type:p.type}})}),t._temp.forEach((p,k)=>{r(\"select-task\",{id:f.get(p.id),toggle:!!k})})}l&&l.endBatch(),t._temp=null}return}else i===\"add-task\"?(u={task:{type:\"task\",text:a(\"New Task\")},target:c,show:!0,select:!1},d={},h=!0):i===\"edit-task\"?(i=\"show-editor\",o===\"segment\"&&typeof n==\"object\"&&(u=n)):i===\"convert-task\"?(i=\"update-task\",u={task:{type:o}},o=void 0):i===\"indent-task\"&&(o=o===\"add\");if(i===\"split-task\"&&typeof n==\"object\")u=n;else if(i===\"delete-task\"&&o===\"segment\"&&typeof n==\"object\"){const l=t.getTask(c),{segmentIndex:f}=n,g=l.segments.filter((m,y)=>y!==f);r(\"update-task\",{id:c,task:{segments:g}});return}typeof o<\"u\"&&(u={mode:o,...u}),d={...d,...u},r(i,d),h&&r(\"select-task\",{id:d.id,toggle:!!s})}function fe(t,e){return t.some(n=>n.data?fe(n.data,e):n.id===e)}const me=(t,e)=>T(t,e),Aa=(t,e)=>tt(t,e);function ge(t,e){Array.isArray(t)&&(t.forEach(n=>H(n,e)),t.forEach(n=>{if(n.type===\"summary\"&&!(n.start&&n.end)){const{start:a,end:s}=yt(n,t);n.start=a,n.end=s,H(n,e)}}))}function H(t,e){t.unscheduled||pe(t,e,!1),t.base_start&&pe(t,e,!0)}function pe(t,e,n){const{calendar:a,durationUnit:s}=e,r=s||\"day\",[i,o,c]=ye(n);t.type===\"milestone\"?(t[c]=0,t[o]=void 0):t[i]&&(t[c]?t[o]=me(r,a)(t[i],t[c]):t[o]?t[c]=Aa(r,a)(t[o],t[i]):(t[o]=me(r,a)(t[i],1),t[c]=1))}function ye(t){return t?[\"base_start\",\"base_end\",\"base_duration\"]:[\"start\",\"end\",\"duration\"]}function ke(t,e,n){const[a,s,r]=ye(n);(e===r||e===a)&&(t[s]=null),e===s&&(t[r]=0,t[a]&&t[a]>=t[s]&&(t[s]=null,t[r]=1))}function Ba(t,e,n){ke(t,n,!1),t.base_start&&ke(t,n,!0),H(t,e)}class Fa extends De{in;_router;_modules=new Map;constructor(e){super({writable:e,async:!1}),this._router=new Te(super.setState.bind(this),[{in:[\"tasks\",\"start\",\"end\",\"scales\",\"autoScale\",\"markers\"],out:[\"_start\",\"_end\"],exec:s=>{const{_end:r,_start:i,start:o,end:c,tasks:d,scales:u,autoScale:h,markers:l}=this.getState();if(!o||!c||h){const f=A(u).unit,g=ba(o,c,h,f,d,l);(g._end!=r||g._start!=i)&&this.setState(g,s)}else this.setState({_start:o,_end:c},s)}},{in:[\"_start\",\"_end\",\"cellWidth\",\"scaleHeight\",\"scales\",\"lengthUnit\",\"_weekStart\"],out:[\"_scales\"],exec:s=>{const r=this.getState();let{lengthUnit:i}=r;const{_start:o,_end:c,cellWidth:d,scaleHeight:u,scales:h,_weekStart:l}=r,f=A(h).unit;ma(f,i)||(i=f);const g=xa(o,c,i,d,u,l,h);this.setState({_scales:g},s)}},{in:[\"_scales\",\"tasks\",\"cellHeight\",\"baselines\",\"unscheduledTasks\"],out:[\"_tasks\"],exec:s=>{const{cellWidth:r,cellHeight:i,tasks:o,_scales:c,baselines:d,splitTasks:u,unscheduledTasks:h}=this.getState(),l=o.toArray().map((f,g)=>ce(f,g,{cellWidth:r,cellHeight:i,_scales:c,baselines:d,splitTasks:u,unscheduledTasks:h}));this.setState({_tasks:l},s)}},{in:[\"_tasks\",\"links\",\"cellHeight\"],out:[\"_links\"],exec:s=>{const{tasks:r,links:i,cellHeight:o,baselines:c,criticalPath:d}=this.getState(),u=i.map(h=>{const l=r.byId(h.source),f=r.byId(h.target);return $a(h,l,f,o,c)}).toSorted((h,l)=>d?!!h.$critical==!!l.$critical?l.$pl-h.$pl:h.$critical?1:-1:l.$pl-h.$pl).filter(h=>h!==null);this.setState({_links:u},s)}},{in:[\"tasks\",\"activeTask\"],out:[\"_activeTask\"],exec:s=>{const r=this.getState();let{activeTask:i}=r;i&&typeof i==\"object\"&&(i=i.id);const o=r.tasks.byId(i);this.setState({_activeTask:o||null},s)}},{in:[\"tasks\",\"selected\"],out:[\"_selected\"],exec:s=>{const{tasks:r,selected:i}=this.getState(),o=i.map(c=>r.byId(c)).filter(c=>!!c);this.setState({_selected:o},s)}},{in:[\"start\",\"end\"],out:[\"cellWidth\"],exec:s=>{const{_cellWidth:r,cellWidth:i}=this.getState();r!=i&&this.setState({cellWidth:r},s)}}],{tasks:s=>new Oe(s),links:s=>new Wt(s),columns:s=>Na(s)});const n=this.in=new We;n.on(\"show-editor\",s=>{const{splitTasks:r}=this.getState();if(r){const{id:i,segmentIndex:o}=s;if(i&&(o||o===0)){this.setStateAsync({activeTask:{id:i,segmentIndex:o}});return}}this.setStateAsync({activeTask:s.id})}),n.on(\"select-task\",({id:s,toggle:r,range:i,show:o,segmentIndex:c})=>{const{selected:d,_tasks:u,activeTask:h,splitTasks:l}=this.getState();let f=!1,g;if(d.length&&(r||i)){const y=[...d];if(i){const p=y[y.length-1],k=u.findIndex(M=>M.id==p),w=u.findIndex(M=>M.id==s),_=Math.min(k,w),v=Math.max(k,w)+1,S=u.slice(_,v).map(M=>M.id);k>w&&S.reverse(),S.forEach(M=>{y.includes(M)||y.push(M)})}else if(r){const p=y.findIndex(k=>k==s);p===-1?y.push(s):(f=!0,y.splice(p,1))}g=y}else g=[s];const m={selected:g};o&&g.length&&(m._scrollTask={id:g[0],mode:o}),this.setStateAsync(m),!f&&h&&(h!==s||l)&&n.exec(\"show-editor\",{id:s,...l&&{segmentIndex:c}})}),n.on(\"delete-link\",({id:s})=>{const{links:r}=this.getState();r.remove(s),this.setStateAsync({links:r})}),n.on(\"update-link\",s=>{const{links:r}=this.getState(),i=s.id;let o=s.link;r.update(i,o),o=r.byId(i),!o.lag&&o.lag!==0&&delete o.lag,this.setStateAsync({links:r}),s.link=o}),n.on(\"add-link\",s=>{const{link:r}=s,{links:i}=this.getState();!r.source||!r.target||(r.type||(r.type=\"e2s\"),r.id=r.id||nt(),i.add(r),this.setStateAsync({links:i}),s.id=r.id,s.link=i.byId(r.id))});let a=null;n.on(\"move-task\",s=>{const{tasks:r}=this.getState();let{mode:i,target:o}=s;const{id:c,inProgress:d}=s,u=r.byId(c);if(typeof d>\"u\"?s.source=u.parent:s.source=a=a??u.parent,d===!1){r.update(u.id,{$reorder:!1}),this.setState({tasks:r}),a=null;return}if(o===c||r.contains(c,o)){s.skipProvider=!0;return}if(i===\"up\"||i===\"down\"){const h=r.getBranch(c);let l=r.getIndexById(c);if(i===\"up\"){const f=u.parent===0;if(l===0&&f){s.skipProvider=!0;return}l-=1,i=\"before\"}else if(i===\"down\"){const f=l===h.length-1,g=u.parent===0;if(f&&g){s.skipProvider=!0;return}l+=1,i=\"after\"}if(o=h[l]&&h[l].id||u.parent,o){const f=r.getBranch(o);let g=r.getIndexById(o),m=f[g];if(m.data){if(i===\"before\"){if(m.parent===u.parent){for(;m.data;)m.open||n.exec(\"open-task\",{id:m.id,mode:!0}),m=m.data[m.data.length-1];o=m.id}}else if(i===\"after\"){let k;m.parent===u.parent?(k=m,m=m.data[0],o=m.id,i=\"before\"):f.length-1!==g&&(k=m,g+=1,m=f[g],u.$level>m.$level&&m.data?(k=m,m=m.data[0],o=m.id,i=\"before\"):o=m.id),k&&!k.open&&n.exec(\"open-task\",{id:k.id,mode:!0})}}const y=r.getSummaryId(u.id);r.move(c,i,o);const p=r.getSummaryId(c);y!=p&&(y&&this.resetSummaryDates(y,\"move-task\"),p&&this.resetSummaryDates(p,\"move-task\"))}}else{const h=r.byId(o);let l=h,f=!1;for(;l.$level>u.$level;)l=r.byId(l.parent),l.id===c&&(f=!0);if(f)return;const g=r.getSummaryId(u.id);if(r.move(c,i,o),i==\"child\"){let y=h;for(;y.id!==0&&!y.open;)n.exec(\"open-task\",{id:y.id,mode:!0}),y=r.byId(y.parent)}const m=r.getSummaryId(c);g!=m&&(g&&this.resetSummaryDates(g,\"move-task\"),m&&this.resetSummaryDates(m,\"move-task\"))}d?this.setState({tasks:r}):this.setStateAsync({tasks:r}),s.target=o,s.mode=i}),n.on(\"drag-task\",s=>{const r=this.getState(),{tasks:i,_tasks:o,_selected:c,_scales:d,cellWidth:u,cellHeight:h}=r,l=i.byId(s.id),{left:f,top:g,width:m,start:y,inProgress:p}=s,k={_tasks:o,_selected:c};if(typeof m<\"u\"&&(l.$w=m,pt(i,l,{_scales:d,cellWidth:u})),typeof f<\"u\"){if(l.type===\"summary\"){const w=f-l.$x;re(l,w,{_scales:d,cellWidth:u})}l.$x=f,pt(i,l,{_scales:d,cellWidth:u,cellHeight:h},!y)}typeof g<\"u\"&&(l.$y=g+4,l.$reorder=p),this.setState(k)}),n.on(\"update-task\",s=>{const{id:r,segmentIndex:i,diff:o,eventSource:c}=s;let{task:d}=s;const{tasks:u,_scales:h,durationUnit:l,splitTasks:f,calendar:g}=this.getState(),m=u.byId(r),y={durationUnit:l,calendar:g};if(c===\"add-task\"||c===\"copy-task\"||c===\"move-task\"||c===\"update-task\"||c===\"delete-task\"||c===\"provide-data\"){H(d,y),u.update(r,d);return}const p=h.lengthUnit;let k=T(p);const w=tt(l,g);if(o&&(d.start&&(d.start=k(d.start,o)),!i&&i!==0&&(d.start&&d.end?d.duration=m.duration:(d.start?d.end=m.end:(d.end=k(d.end,o),d.start=m.start,d.duration=w(d.end,d.start)),w(d.end,d.start)||(d.duration=1)))),d.type=d.type??m.type,g&&d.start&&(d.start=ht(d.start,o,g)),d.start&&d.end&&(!z(d.start,m.start)||!z(d.end,m.end))&&d.type===\"summary\"&&m.data?.length){let v=o||w(d.start,m.start);g&&(v=d.start>m.start?w(d.start,m.start):-w(m.start,d.start),k=wa(g)),this.moveSummaryKids(m,S=>(S=k(S,v),g?ht(S,o,g):S),\"update-task\")}d.start||(d.start=m.start),!d.end&&!d.duration&&(d.duration=m.duration),H(d,y),u.update(r,d),(g&&d.type===\"summary\"||d.type===\"summary\"&&m.type!==\"summary\")&&this.resetSummaryDates(r,\"update-task\",!0);const _=u.getSummaryId(r);_&&this.resetSummaryDates(_,\"update-task\"),this.setStateAsync({tasks:u}),s.task=u.byId(r)}),n.on(\"add-task\",s=>{const{tasks:r,_scales:i,unscheduledTasks:o,durationUnit:c,splitTasks:d,calendar:u}=this.getState(),{target:h,mode:l,task:f,show:g,select:m=!0}=s;!s.eventSource&&o&&(f.unscheduled=!0);let y=-1,p,k;if(h?(k=r.byId(h),l==\"child\"?(p=k,f.parent=p.id):(k.parent!==null&&(p=r.byId(k.parent),f.parent=p.id),y=r.getIndexById(h),l==\"after\"&&(y+=1))):f.parent&&(p=r.byId(f.parent)),!f.start){if(p?.start)f.start=new Date(p.start.valueOf());else if(k)f.start=new Date(k.start.valueOf());else{const S=r.getBranch(0);let M;if(S?.length){const B=S[S.length-1];if(!B.$skip){const Dt=new Date(B.start.valueOf());i.start<=Dt&&(M=Dt)}}f.start=M||T(c,u)(i.start,1)}f.duration=1}u&&(f.start=ht(f.start,1,u)),this.getState().baselines&&(f.base_start=f.start,f.base_duration=f.duration),H(f,{durationUnit:c,calendar:u});const w=r.add(f,y),_={tasks:r};if(p&&g){for(;p&&p.id;)n.exec(\"open-task\",{id:p.id,mode:!0}),p=r.byId(p.parent);_._scrollTask={id:w.id,mode:g}}s.id=w.id;const v=r.getSummaryId(w.id);v&&this.resetSummaryDates(v,\"add-task\"),this.setStateAsync(_),s.id=w.id,s.task=w,m&&n.exec(\"select-task\",{id:w.id})}),n.on(\"delete-task\",s=>{const{id:r}=s,{tasks:i,links:o,selected:c}=this.getState();s.source=i.byId(r).parent;const d=i.getSummaryId(r),u=[r];i.eachChild(l=>u.push(l.id),r),o.filter(l=>!(u.includes(l.source)||u.includes(l.target)));const h={tasks:i,links:o};c.includes(r)&&(h.selected=c.filter(l=>l!==r)),i.remove(r),d&&this.resetSummaryDates(d,\"delete-task\"),this.setStateAsync(h)}),n.on(\"indent-task\",({id:s,mode:r})=>{const{tasks:i}=this.getState();if(r){const o=i.getBranch(s)[i.getIndexById(s)-1];o&&n.exec(\"move-task\",{id:s,mode:\"child\",target:o.id})}else{const o=i.byId(s),c=i.byId(o.parent);c&&c.parent!==null&&n.exec(\"move-task\",{id:s,mode:\"after\",target:o.parent})}}),n.on(\"copy-task\",s=>{const{id:r,target:i,mode:o,eventSource:c}=s;if(c===\"copy-task\")return;const{tasks:d,links:u}=this.getState();if(d.contains(r,i)){s.skipProvider=!0;return}const h=d.getSummaryId(r),l=d.getSummaryId(i);let f=d.getIndexById(i);o==\"before\"&&(f-=1);const g=d.byId(r),m=d.copy(g,d.byId(i).parent,f+1);s.source=s.id,s.id=m[0][1],g.lazy&&(s.lazy=!0),h!=l&&l&&this.resetSummaryDates(l,\"copy-task\");let y=[];for(let p=1;p<m.length;p++){const[k,w]=m[p];u.forEach(_=>{if(_.source===k){const v={..._};delete v.target,y.push({...v,source:w})}else if(_.target===k){const v={..._};delete v.source,y.push({...v,target:w})}})}y=y.reduce((p,k)=>{const w=p.findIndex(_=>_.id===k.id);return w>-1?p[w]={...p[w],...k}:p.push(k),p},[]);for(let p=1;p<m.length;p++){const[k,w]=m[p],_=d.byId(w);n.exec(\"copy-task\",{source:k,id:w,lazy:!!_.lazy,eventSource:\"copy-task\",target:_.parent,mode:\"child\",skipUndo:!0})}y.forEach(p=>{n.exec(\"add-link\",{link:{source:p.source,target:p.target,type:p.type},eventSource:\"copy-task\",skipUndo:!0})}),this.setStateAsync({tasks:d})}),n.on(\"open-task\",({id:s,mode:r})=>{const{tasks:i}=this.getState(),o=i.byId(s);o.lazy?n.exec(\"request-data\",{id:o.id}):(i.toArray().forEach(c=>c.$y=0),i.update(s,{open:r}),this.setState({tasks:i}))}),n.on(\"scroll-chart\",({left:s,top:r})=>{if(!isNaN(s)){const i=this.calcScaleDate(s);this.setState({scrollLeft:s,_scaleDate:i})}isNaN(r)||this.setState({scrollTop:r})}),n.on(\"render-data\",s=>{this.setState({area:s})}),n.on(\"provide-data\",s=>{const{tasks:r,links:i,durationUnit:o,calendar:c,splitTasks:d}=this.getState(),u=r.byId(s.id);u.lazy?(u.lazy=!1,u.open=!0):u.data=[],ge(s.data.tasks,{durationUnit:o,calendar:c}),r.parse(s.data.tasks,s.id),u.type==\"summary\"&&this.resetSummaryDates(u.id,\"provide-data\"),this.setStateAsync({tasks:r,links:new Wt(i.map(h=>h).concat(ue(s.data.links)))})}),n.on(\"zoom-scale\",({dir:s,offset:r})=>{const{zoom:i,cellWidth:o,_cellWidth:c,scrollLeft:d}=this.getState(),u=r+d,h=this.calcScaleDate(u);let l=o;s<0&&(l=c||o);const f=l+s*50,g=i.levels[i.level],m=s<0&&o>g.maxCellWidth;if(f<g.minCellWidth||f>g.maxCellWidth||m){if(!this.changeScale(i,s))return}else this.setState({cellWidth:f,_cellWidth:f});const{_scales:y,_start:p,cellWidth:k,_weekStart:w}=this.getState(),_=$(y.minUnit,p,w),v=y.diff(h,_,\"hour\");typeof r>\"u\"&&(r=k);let S=Math.round(v*k)-r;S<0&&(S=0),this.setState({scrollLeft:S,_scaleDate:h,_zoomOffset:r})}),n.on(\"expand-scale\",({minWidth:s})=>{const{_start:r,_scales:i,start:o,end:c,_end:d,cellWidth:u,_scaleDate:h,_zoomOffset:l}=this.getState(),f=T(i.minUnit);let g=i.width;if(o&&c){if(g<s&&g){const w=s/g;this.setState({cellWidth:u*w})}return!0}let m=0;for(;g<s;)g+=u,m++;const y=m&&c?-m:0,p=o||f(r,y);let k=0;if(h){const w=i.diff(h,p,\"hour\");k=Math.max(0,Math.round(w*u)-(l||0))}this.setState({_start:p,_end:c||f(d,m),scrollLeft:k})}),n.on(\"sort-tasks\",({key:s,order:r,add:i})=>{const o=this.getState(),{tasks:c}=o;let d=o._sort;const u={key:s,order:r};let h=d?.length||0;h&&i?(d.forEach((l,f)=>{l.key===s&&(h=f)}),d[h]=u):d=[u],c.sort(d),this.setState({_sort:d,tasks:c})}),n.on(\"hotkey\",({key:s,event:r,eventSource:i})=>{switch(s){case\"arrowup\":case\"arrowdown\":{const{selected:o,_tasks:c}=this.getState();r.preventDefault();const d=o.length;let u;if(s===\"arrowup\"?u=d?this.getPrevRow(o[d-1])?.id:c[c.length-1]?.id:u=d?this.getNextRow(o[d-1])?.id:c[0]?.id,u){const h=i===\"chart\"?\"xy\":!0;this.in.exec(\"select-task\",{id:u,show:h})}break}case\"ctrl+c\":{Q(this,\"copy-task\",null,null);break}case\"ctrl+x\":{Q(this,\"cut-task\",null,null);break}case\"ctrl+v\":{Q(this,\"paste-task\",null,null);break}case\"ctrl+d\":case\"backspace\":{r.preventDefault(),Q(this,\"delete-task\",null,null);break}case\"ctrl+z\":{this.in.exec(\"undo\",{});break}case\"ctrl+y\":{this.in.exec(\"redo\",{});break}}})}init(e){const n=this.getState().area?{}:{scrollLeft:0,scrollTop:0,area:{from:0,start:0,end:0}};e.cellWidth&&(e._cellWidth=e.cellWidth),e._sort=null,e.unscheduledTasks=!1,e.baselines=!1,e.markers=[],e._markers=[],e.undo=!1,e.schedule={},e.criticalPath=null,e.splitTasks=!1,e.summary={},Array.isArray(e.tasks)&&this.getHistory()?.resetHistory(),this._router.init({_scrollTask:null,selected:[],markers:[],autoScale:!0,durationUnit:\"day\",...n,...e})}setState(e,n){return this._router.setState(e,n)}setStateAsync(e){this._router.setStateAsync(e)}getTask(e){const{tasks:n}=this.getState();return n.byId(e)}getHistory(){return this.getState().undo?this._modules.get(\"historyManager\"):null}serialize(){return this.getState().tasks.serialize()}changeScale(e,n){const a=e.level+n,s=e.levels[a];if(s){const{cellWidth:r,scales:i,_scales:o}=this.getState(),c=va(e,n,a,s,o.lengthUnit,i,r);return c._cellWidth=c.cellWidth,this.setState(c),!0}return!1}isScheduled(e){return this.getState().unscheduledTasks?e.some(n=>!n.unscheduled||n.data&&this.isScheduled(n.data)):!0}resetSummaryDates(e,n,a){const{tasks:s,durationUnit:r,splitTasks:i,calendar:o}=this.getState(),c=s.byId(e),d=c.data;if(d?.length&&this.isScheduled(d)){const u=yt({...c,start:void 0,end:void 0,duration:void 0});if(!z(c.start,u.start)||!z(c.end,u.end)){a?(H(u,{durationUnit:r,calendar:o}),s.update(e,u)):this.in.exec(\"update-task\",{id:e,task:u,eventSource:n,skipUndo:!0});const h=s.getSummaryId(e);h&&this.resetSummaryDates(h,n)}}}moveSummaryKids(e,n,a){const{tasks:s}=this.getState();e.data.forEach(r=>{const i={...s.byId(r.id),start:n(r.start)};delete i.end,delete i.id,this.in.exec(\"update-task\",{id:r.id,task:i,eventSource:a,skipUndo:!0}),r.data?.length&&this.moveSummaryKids(r,n,a)})}calcScaleDate(e){const{_scales:n,_start:a,_weekStart:s}=this.getState(),r=n.lengthUnit===\"day\"?n.lengthUnitWidth/24:n.lengthUnitWidth;return T(\"hour\")($(n.minUnit,a,s),Math.floor(e/r))}getNextRow(e){const n=this.getState()._tasks,a=n.findIndex(s=>s.id==e);return n[a+1]}getPrevRow(e){const n=this.getState()._tasks,a=n.findIndex(s=>s.id==e);return n[a-1]}}function qa(t,e,n,a){if(typeof document>\"u\")return\"\";const s=document.createElement(\"canvas\");{const r=Ua(s,t,e,1,n);ja(r,a,0,t,0,e)}return s.toDataURL()}function Ua(t,e,n,a,s){t.setAttribute(\"width\",(e*a).toString()),t.setAttribute(\"height\",(n*a).toString());const r=t.getContext(\"2d\");return r.translate(-.5,-.5),r.strokeStyle=s,r}function ja(t,e,n,a,s,r){t.beginPath(),t.moveTo(a,s),t.lineTo(a,r),e===\"full\"&&t.lineTo(n,r),t.stroke()}const bt=[{id:\"task\",label:\"Task\"},{id:\"summary\",label:\"Summary task\"},{id:\"milestone\",label:\"Milestone\"}];function La(t){let e=[...be];const n=t?.taskTypes||bt,a=e.find(s=>s.id==\"convert-task\");return a.data=[],n.forEach(s=>{(!t?.summary?.autoConvert||s.id!==\"summary\")&&a.data.push(a.dataFactory(s))}),e}function xt(t){return t.map(e=>{switch(e.data&&xt(e.data),e.id){case\"add-task:before\":case\"move-task:up\":e.isDisabled=(n,a)=>Qa(n,a);break;case\"move-task:down\":e.isDisabled=(n,a)=>Ga(n,a);break;case\"indent-task:add\":e.isDisabled=(n,a)=>Ra(n,a)===n.parent;break;case\"indent-task:remove\":e.isDisabled=n=>Xa(n);break}return e})}function Xa(t){return t.parent===0}function Qa(t,e){const{_tasks:n}=e;return n[0]?.id===t.id}function Ga(t,e){const{_tasks:n}=e;return n[n.length-1]?.id===t.id}function Ra(t,e){const{_tasks:n}=e,a=n.findIndex(s=>s.id===t.id);return n[a-1]?.id??t.parent}function we(t){return t&&typeof t==\"object\"}function Ja(t){return!t.selected||t.selected.length<2}const Va=t=>e=>e.type===t,be=xt([{id:\"add-task\",text:\"Add\",icon:\"wxi-plus\",data:[{id:\"add-task:child\",text:\"Child task\"},{id:\"add-task:before\",text:\"Task above\"},{id:\"add-task:after\",text:\"Task below\"}]},{type:\"separator\"},{id:\"convert-task\",text:\"Convert to\",icon:\"wxi-swap-horizontal\",dataFactory:t=>({id:`convert-task:${t.id}`,text:`${t.label}`,isDisabled:Va(t.id)})},{id:\"edit-task\",text:\"Edit\",icon:\"wxi-edit\",isHidden:(t,e,n)=>we(n)},{type:\"separator\"},{id:\"cut-task\",text:\"Cut\",icon:\"wxi-content-cut\",subtext:\"Ctrl+X\"},{id:\"copy-task\",text:\"Copy\",icon:\"wxi-content-copy\",subtext:\"Ctrl+C\"},{id:\"paste-task\",text:\"Paste\",icon:\"wxi-content-paste\",subtext:\"Ctrl+V\"},{id:\"move-task\",text:\"Move\",icon:\"wxi-swap-vertical\",data:[{id:\"move-task:up\",text:\"Up\"},{id:\"move-task:down\",text:\"Down\"}]},{type:\"separator\"},{id:\"indent-task:add\",text:\"Indent\",icon:\"wxi-indent\"},{id:\"indent-task:remove\",text:\"Outdent\",icon:\"wxi-unindent\"},{type:\"separator\"},{id:\"delete-task\",icon:\"wxi-delete\",text:\"Delete\",subtext:\"Ctrl+D / BS\",isHidden:(t,e,n)=>Ja(e)&&we(n)}]);function Ka(t){return[...xe]}const xe=xt([{id:\"add-task\",comp:\"button\",icon:\"wxi-plus\",text:\"New task\",type:\"primary\"},{id:\"edit-task\",comp:\"icon\",icon:\"wxi-edit\",menuText:\"Edit\",text:\"Ctrl+E\"},{id:\"delete-task\",comp:\"icon\",icon:\"wxi-delete\",menuText:\"Delete\",text:\"Ctrl+D, Backspace\"},{comp:\"separator\"},{id:\"move-task:up\",comp:\"icon\",icon:\"wxi-angle-up\",menuText:\"Move up\"},{id:\"move-task:down\",comp:\"icon\",icon:\"wxi-angle-down\",menuText:\"Move down\"},{comp:\"separator\"},{id:\"copy-task\",comp:\"icon\",icon:\"wxi-content-copy\",menuText:\"Copy\",text:\"Ctrl+V\"},{id:\"cut-task\",comp:\"icon\",icon:\"wxi-content-cut\",menuText:\"Cut\",text:\"Ctrl+X\"},{id:\"paste-task\",comp:\"icon\",icon:\"wxi-content-paste\",menuText:\"Paste\",text:\"Ctrl+V\"},{comp:\"separator\"},{id:\"indent-task:add\",comp:\"icon\",icon:\"wxi-indent\",menuText:\"Indent\"},{id:\"indent-task:remove\",comp:\"icon\",icon:\"wxi-unindent\",menuText:\"Outdent\"}]);function _t(t){return t.type===\"summary\"}function vt(t){return t.type===\"milestone\"}function St(t){return typeof t.parent>\"u\"}function Mt(t,e){return e.unscheduledTasks&&t.unscheduled}function Za(t){const e=_e.map(a=>({...a})),n=e.find(a=>a.key==\"type\");return n.options=t?.taskTypes||bt,e}const _e=[{key:\"text\",comp:\"text\",label:\"Name\",config:{placeholder:\"Add task name\"}},{key:\"details\",comp:\"textarea\",label:\"Description\",config:{placeholder:\"Add description\"}},{key:\"type\",comp:\"select\",label:\"Type\",isHidden:t=>St(t)},{key:\"start\",comp:\"date\",label:\"Start date\",isHidden:t=>_t(t),isDisabled:Mt},{key:\"end\",comp:\"date\",label:\"End date\",isHidden:t=>_t(t)||vt(t),isDisabled:Mt},{key:\"duration\",comp:\"counter\",label:\"Duration\",config:{min:1},isHidden:t=>_t(t)||vt(t),isDisabled:Mt},{key:\"progress\",comp:\"slider\",label:\"Progress\",config:{min:1,max:100},isHidden:t=>vt(t)||St(t)},{key:\"links\",comp:\"links\",label:\"\",isHidden:t=>St(t)}];export{Fa as DataStore,Ya as defaultColumns,_e as defaultEditorItems,be as defaultMenuOptions,bt as defaultTaskTypes,xe as defaultToolbarButtons,Wa as extendDragOptions,Kn as format,T as getAdder,tt as getDiffer,Za as getEditorItems,La as getMenuOptions,Ka as getToolbarButtons,$ as getUnitStart,qa as grid,Q as handleAction,fe as isHandledAction,Ta as isSegmentMoveAllowed,ue as normalizeLinks,_a as normalizeZoom,ge as parseTaskDates,Ea as placeLink,Ba as prepareEditTask,ka as registerScaleUnit};\n", "var F=new Date().valueOf(),W=()=>F++;function U(r,e){if(Object.keys(r).length!==Object.keys(e).length)return!1;for(const o in e){const t=r[o],i=e[o];if(!k(t,i))return!1}return!0}function k(r,e){if(typeof r==\"number\"||typeof r==\"string\"||typeof r==\"boolean\"||r===null)return r===e;if(typeof r!=typeof e||(r===null||e===null)&&r!==e||r instanceof Date&&e instanceof Date&&r.getTime()!==e.getTime())return!1;if(typeof r==\"object\")if(Array.isArray(r)&&Array.isArray(e)){if(r.length!==e.length)return!1;for(let o=r.length-1;o>=0;o--)if(!k(r[o],e[o]))return!1;return!0}else return U(r,e);return r===e}function I(r){if(typeof r!=\"object\"||r===null)return r;if(r instanceof Date)return new Date(r);if(r instanceof Array)return r.map(I);const e={};for(const o in r)e[o]=I(r[o]);return e}var D=2,K=class{constructor(r){r&&(this._writable=r.writable,this._async=r.async),this._values={},this._state={}}setState(r,e=0){const o={};return this._wrapProperties(r,this._state,this._values,\"\",o,e),o}getState(){return this._values}getReactive(){return this._state}_wrapProperties(r,e,o,t,i,s){for(const a in r){const n=e[a],l=o[a],c=r[a];if(n&&(l===c&&typeof c!=\"object\"||c instanceof Date&&l instanceof Date&&l.getTime()===c.getTime()))continue;const d=t+(t?\".\":\"\")+a;n?(n.__parse(c,d,i,s)&&(o[a]=c),s&D?i[d]=n.__trigger:n.__trigger()):(c&&c.__reactive?e[a]=this._wrapNested(c,c,d,i):e[a]=this._wrapWritable(c),o[a]=c),i[d]=i[d]||null}}_wrapNested(r,e,o,t){const i=this._wrapWritable(r);return this._wrapProperties(r,i,e,o,t,0),i.__parse=(s,a,n,l)=>(this._wrapProperties(s,i,e,a,n,l),!1),i}_wrapWritable(r){const e=[],o=function(){for(let t=0;t<e.length;t++)e[t](r)};return{subscribe:t=>(e.push(t),this._async?setTimeout(t,1,r):t(r),()=>{const i=e.indexOf(t);i>=0&&e.splice(i,1)}),__trigger:()=>{e.length&&(this._async?setTimeout(o,1):o())},__parse:function(t){return r=t,!0}}}},B=class{constructor(r,e,o,t){typeof r==\"function\"?this._setter=r:this._setter=r.setState.bind(r),this._routes=e,this._parsers=o,this._prev={},this._triggers=new Map,this._sources=new Map,this._routes.forEach(i=>{i.in.forEach(s=>{const a=this._triggers.get(s)||[];a.push(i),this._triggers.set(s,a)}),i.out.forEach(s=>{const a=this._sources.get(s)||{};i.in.forEach(n=>a[n]=!0),this._sources.set(s,a)})}),this._routes.forEach(i=>{i.length=Math.max(...i.in.map(s=>H(s,this._sources,1)))}),this._bus=t}init(r){const e={};for(const o in r)if(this._prev[o]!==r[o]){const t=this._parsers[o];e[o]=t?t(r[o]):r[o]}this._prev=this._prev?{...this._prev,...r}:{...r},this.setState(e),this._bus&&this._bus.exec(\"init-state\",e)}setStateAsync(r){const e=this._setter(r,D);return this._async?Object.assign(this._async.signals,e):this._async={signals:e,timer:setTimeout(this._applyState.bind(this),1)},e}_applyState(){const r=this._async;if(r){this._async=null,this._triggerUpdates(r.signals,[]);for(const e in r.signals){const o=r.signals[e];o&&o()}}}setState(r,e=[]){const o=this._setter(r);return this._triggerUpdates(o,e),o}_triggerUpdates(r,e){const o=Object.keys(r),t=!e.length;e=e||[];for(let i=0;i<o.length;i++){const s=o[i],a=this._triggers.get(s);a&&a.forEach(n=>{e.indexOf(n)==-1&&e.push(n)})}t&&this._execNext(e)}_execNext(r){for(;r.length;){r.sort((o,t)=>o.length<t.length?1:-1);const e=r[r.length-1];r.splice(r.length-1),e.exec(r)}}};function H(r,e,o){const t=e.get(r);if(!t)return o;const i=Object.keys(t).map(s=>H(s,e,o+1));return Math.max(...i)}var X=class{constructor(){this._nextHandler=null,this._handlers={},this._tag=new WeakMap,this.exec=this.exec.bind(this)}on(r,e,o){let t=this._handlers[r];t?o&&o.intercept?t.unshift(e):t.push(e):t=this._handlers[r]=[e],o&&o.tag&&this._tag.set(e,o.tag)}intercept(r,e,o){this.on(r,e,{...o,intercept:!0})}detach(r){for(const e in this._handlers){const o=this._handlers[e];for(let t=o.length-1;t>=0;t--)this._tag.get(o[t])===r&&o.splice(t,1)}}async exec(r,e){const o=this._handlers[r];if(o)for(let t=0;t<o.length;t++){const i=o[t](e);if(i===!1||i&&i.then&&await i===!1)return}return this._nextHandler&&await this._nextHandler.exec(r,e),e}setNext(r){return this._nextHandler=r}};function q(r){return e=>e[r]}function Y(r){return(e,o)=>e[r]=o}function S(r,e){return(e.getter||q(e.id))(r)}function M(r,e,o){return(e.setter||Y(e.id))(r,o)}function Z(r){return r.filter(e=>!!e.editor).map(e=>{let o={key:e.id||W(),label:e.header};e.options&&(o.options=e.options);let t=e.editor;return typeof t==\"function\"&&(t=t()),typeof t==\"object\"?(o={...o,...t},o.comp=t.type):o.comp=t,o})}function P(r,e){const o=document.createElement(\"a\");o.href=URL.createObjectURL(r),o.download=e,document.body.appendChild(o),o.click(),document.body.removeChild(o)}function b(r,e){let o=S(r,e)??\"\";return e.template&&(o=e.template(o,r,e)),e.optionsMap&&(Array.isArray(o)?o=o.map(t=>e.optionsMap.get(t)):o=e.optionsMap.get(o)),typeof o>\"u\"?\"\":o+\"\"}function G(r,e){const o=/\\n|\"|;|,/;let t=\"\";const i=e.rows||`\n`,s=e.cols||\"\t\",a=r._columns,n=r.flatData;e.header!==!1&&a[0].header&&(t=z(\"header\",a,t,s,i));for(let l=0;l<n.length;l++){const c=[];for(let d=0;d<a.length;d++){let h=b(n[l],a[d]);o.test(h)&&(h='\"'+h.replace(/\"/g,'\"\"')+'\"'),c.push(h)}t+=(t?i:\"\")+c.join(s)}return e.footer!==!1&&a[0].footer&&(t=z(\"footer\",a,t,s,i)),t}function z(r,e,o,t,i){const s=/\\n|\"|;|,/;for(let a=0;a<e[0][r].length;a++){const n=[];for(let l=0;l<e.length;l++){let c=(e[l][r][a].text||\"\")+\"\";s.test(c)&&(c='\"'+c.replace(/\"/g,'\"\"')+'\"'),n.push(c)}o+=(o?i:\"\")+n.join(t)}return o}function J(r,e,o){const t=[],i=[],s=[];let a=[];const n=r._columns,l=r.flatData,c=r._sizes;for(const h of n)s.push({width:h.flexgrow?c.columnWidth:h.width});let d=0;e.header!==!1&&n[0].header&&(A(\"header\",n,t,i,d,e,o),a=a.concat(c.headerRowHeights.map(h=>({height:h}))),d+=n[0].header.length);for(let h=0;h<l.length;h++){const u=[];for(let f=0;f<n.length;f++){const p=l[h],g=n[f],w=S(p,g)??\"\";let x=b(p,g),m;e.cellStyle&&(m=e.cellStyle(w,p,g)),e.cellTemplate&&(x=e.cellTemplate(w,p,g)??x);const y=L(x,2,m,o);u.push(y)}t.push(u),a.push({height:c.rowHeight})}return d+=l.length,e.footer!==!1&&n[0].footer&&(A(\"footer\",n,t,i,d,e,o),a=a.concat(c.footerRowHeights.map(h=>({height:h})))),{cells:t,merged:i,rowSizes:a,colSizes:s,styles:o}}function A(r,e,o,t,i,s,a){for(let n=0;n<e[0][r].length;n++){const l=[];for(let c=0;c<e.length;c++){const d=e[c][r][n],h=d.colspan?d.colspan-1:0,u=d.rowspan?d.rowspan-1:0;(h||u)&&t.push({from:{row:n+i,column:c},to:{row:n+i+u,column:c+h}});let f=d.text??\"\",p;s.headerCellStyle&&(p=s.headerCellStyle(f,d,e[c],r)),s.headerCellTemplate&&(f=s.headerCellTemplate(f,d,e[c],r)??f);let g;r==\"header\"?n==e[0][r].length-1?g=1:g=0:n?g=4:g=3;const w=L(f,g,p,a);l.push(w)}o.push(l)}}function L(r,e,o,t){let i=e;if(r&&r instanceof Date&&(r=ee(r),o=o||{},o.format=o.format||\"dd/mm/yyyy\"),o){o={...t[e],...o};const s=t.findIndex(a=>k(a,o));s<0?(t.push(o),i=t.length-1):i=s}return{v:r+\"\",s:i}}function Q(r){const e={material:\"#000000\",willow:\"#000000\",\"willow-dark\":\"#ffffff\"},o={material:\"none\",willow:\"none\",\"willow-dark\":\"#2a2b2d\"},t={material:\"#fafafb\",willow:\"#f2f3f7\",\"willow-dark\":\"#20262b\"},i={material:\"0.5px solid #dfdfdf\",willow:\"0.5px solid #e6e6e6\",\"willow-dark\":\"0.5px solid #384047\"},s={material:\"#dfdfdf\",willow:\"#e6e6e6\",\"willow-dark\":\"#384047\"},a=e[r],n=\"0.5px solid \"+s[r],l={verticalAlign:\"center\",align:\"left\"},c={fontWeight:\"bold\",color:a,background:t[r],...l,borderBottom:n,borderRight:n};return{cell:{color:a,background:o[r],borderBottom:i[r],borderRight:i[r],...l},header:{...c},footer:{...c}}}function ee(r){return r?25569+(r.getTime()-r.getTimezoneOffset()*6e4)/(86400*1e3):null}const te=\"portrait\",oe=100,ie=\"a4\",se={a3:{width:11.7,height:16.5},a4:{width:8.27,height:11.7},letter:{width:8.5,height:11}};function re(r,e){const o=[];let t=[],i=0;const s=r.filter(n=>!n.hidden),a=ae(e);return s.forEach((n,l)=>{i+n.width<=a?(i+=n.width,t.push(n)):(t.length&&o.push(t),t=[n],i=n.width),l===s.length-1&&t.length&&o.push(t)}),o}function ne(r,e,o){const t=[];return r.forEach((i,s)=>{const a=i[e];for(let n=0;n<o.length;n++){t[n]||(t[n]=[]);const l={...a[n]};if(t[n][s]!==null){if(!s&&!l.rowspan&&!l.colspan){let c=1,d=r[s+c][e][n],h=l.width;for(;!d.rowspan&&!d.colspan;)c++,d=r[s+c][e][n],h+=d.width;l.colspan=c,l.width=h,l.height=o[n]}if(t[n].push(l),!l.collapsed&&l.colspan>1){let c=l.colspan-1;if(l.colspan+s>r.length){const d=l.colspan-(l.colspan+s-r.length);l.colspan=d,l.width=r.slice(s,s+c+1).reduce((h,u)=>h+u.width,0),d>1&&(c=d-1)}for(let d=0;d<c;d++)t[n].push(null)}if(l.rowspan>1){const c=l.rowspan;for(let d=1;d<c;d++)t[n+d]||(t[n+d]=[]),t[n+d].push(null)}}}if(i.collapsed)for(let n=0;n<t.length;n++){const l=t[n],c=l[s];if(c&&c.collapsed){if(l[s]=null,!n)break}else{const d=c||l.findLast(h=>h?.colspan>=1);d&&(d.colspan=d.colspan-1,d.width=d.width-i.width)}}}),t.map(i=>i.filter(s=>s&&s.colspan!==0))}function ae(r){const{mode:e,ppi:o,paper:t}=r,{width:i,height:s}=se[t];return le(e===\"portrait\"?i:s,o)}function le(r,e){return r*e}function ce(r={}){const{mode:e,ppi:o,paper:t}=r;return{mode:e||te,ppi:o||oe,paper:t||ie}}function de(r,e){return r.flexgrow?`min-width:${e}px;width:auto`:`width:${r.width}px; max-width:${r.width}px; height:${r.height}px`}function he(r,e,o){let t=r[o.id];if(o.filter.type===\"richselect\"&&t){const i=o.filter.config?.options||e.find(({id:s})=>s==o.id).options;i&&(t=i.find(({id:s})=>s==t).label)}return t??\"\"}const N=[\"resize-column\",\"hide-column\",\"update-cell\"],ue=[\"delete-row\",\"update-row\",\"update-cell\"],fe=[\"move-item\"],ge=[\"resize-column\",\"move-item\"];class pe{undo=[];redo=[];progress={};in;getState;setState;_previousValues={};constructor(e,o,t){this.in=e,this.getState=o,this.setState=t,this.setHandlers(),this.resetStateHistory()}getHandlers(){return{\"add-row\":{handler:e=>({action:\"delete-row\",data:{id:e.id},source:{action:\"add-row\",data:e}})},\"delete-row\":{handler:e=>{const{id:o}=e,{data:t}=this.getPrev(),i=t.findIndex(s=>s.id==o);return{action:\"add-row\",data:{id:o,row:t[i],before:i<t.length-1?t[i+1].id:void 0},source:{action:\"delete-row\",data:e}}}},\"update-cell\":{handler:e=>{const{id:o,column:t}=e,i=this.getRow(o),s=this.getColumn(t),a=S(i,s);return k(a,e.value)?null:{action:\"update-cell\",data:{id:o,column:t,value:a},source:{action:\"update-cell\",data:e}}}},\"update-row\":{handler:e=>{const{id:o,row:t}=e,i=this.getRow(o);for(const s in t)Object.keys(i).includes(s)||(i[s]=void 0);return{action:\"update-row\",data:{id:o,row:i},source:{action:\"update-row\",data:e}}}},\"copy-row\":{handler:e=>{const{id:o}=e,{data:t}=this.getState(),i=t.findIndex(a=>a.id==o),s=t[i];return{action:\"delete-row\",data:{id:o},source:{action:\"add-row\",data:{id:o,row:s,before:i<t.length-1?t[i+1].id:void 0}}}}},\"resize-column\":{handler:e=>{const{id:o,width:t}=e,i=this.getColumn(o),{_sizes:s}=this.getState();return{action:\"resize-column\",data:{id:o,width:i.width??s.columnWidth},source:{action:\"resize-column\",data:{id:o,width:t}}}}},\"hide-column\":{handler:e=>{const{id:o}=e,t=this.getColumn(o);return{action:\"hide-column\",data:{id:o,mode:t.hidden},source:{action:\"hide-column\",data:e}}}},\"collapse-column\":{handler:e=>{const{id:o,row:t,mode:i}=e;return{action:\"collapse-column\",data:{id:o,row:t,mode:typeof i==\"boolean\"?!i:i},source:{action:\"collapse-column\",data:e}}}},\"move-item\":{handler:e=>{const{id:o,target:t,mode:i}=e,{flatData:s}=this.getPrev(),a=s.findIndex(n=>n.id==o);return{action:\"move-item\",data:{id:o,target:s[a+(a?-1:1)].id,mode:a?\"after\":\"before\"},source:{action:\"move-item\",data:{id:o,target:t,mode:i}}}}},\"open-row\":{handler:e=>{const{id:o,nested:t}=e;return{action:\"close-row\",data:{id:o,nested:t},source:{action:\"open-row\",data:e}}}},\"close-row\":{handler:e=>{const{id:o,nested:t}=e;return{action:\"open-row\",data:{id:o,nested:t},source:{action:\"close-row\",data:e}}}}}}resetHistory(){this.undo=[],this.redo=[],this.progress={},this.resetStateHistory()}getPrev(){return this._previousValues}setHandlers(){const e=this.getHandlers();for(const o in e)this.in.intercept(o,t=>{if(!(t.eventSource===\"undo\"||t.eventSource===\"redo\"||t.skipUndo)){if(ge.includes(o)){(t.inProgress&&!this.progress[o]||typeof t.inProgress!=\"boolean\")&&(fe.includes(o)&&this.setPrev(\"flatData\"),N.includes(o)&&this.setPrev(\"columns\")),this.progress[o]=t.inProgress;return}ue.includes(o)&&this.setPrev(\"data\"),N.includes(o)&&this.setPrev(\"columns\")}}),this.in.on(o,t=>{if(t.eventSource===\"undo\"||t.eventSource===\"redo\"||t.skipUndo||t.inProgress)return;const i=e[o].handler(t);i&&this.addToHistory(i)})}setPrev(e){this._previousValues[e]=I(this.getState()[e])}addToHistory(e){this.undo.push(e),this.redo=[],this.setStateHistory()}handleUndo(){if(!this.undo.length)return;const e=this.undo.pop();this.redo.push({...e.source,source:e}),this.in.exec(e.action,{...e.data,eventSource:\"undo\"}),this.setStateHistory()}handleRedo(){if(!this.redo.length)return;const e=this.redo.pop();this.undo.push({...e.source,source:e}),this.in.exec(e.action,{...e.data,eventSource:\"redo\"}),this.setStateHistory()}resetStateHistory(){this.setState({history:{undo:0,redo:0}})}setStateHistory(){this.setState({history:{undo:this.undo.length,redo:this.redo.length}})}getRow(e){const{data:o}=this.getPrev();return this.getState().tree?this.getTreeRow(o,e):o.find(t=>t.id==e)}getTreeRow(e,o){for(let t=0;t<e.length;t++){if(e[t].id==o)return e[t];if(e[t].data){const i=this.getTreeRow(e[t].data,o);if(i)return i}}return null}getColumn(e){const{columns:o}=this.getPrev();return o.find(t=>t.id==e)}}function we(){return{gen:1}}function O(){let r=!0;return r=!1,r}function $(r,e){return typeof r>\"u\"||r===null?-1:typeof e>\"u\"||e===null?1:r===e?0:r>e?1:-1}function me(r,e){return-$(r,e)}function xe(r,e){if(typeof e.sort==\"function\")return function(t,i){const s=e.sort(t,i);return r===\"asc\"?s:-s};const o=r===\"asc\"?$:me;return function(t,i){return o(S(t,e),S(i,e))}}function ye(r,e){if(!r||!r.length)return;const o=r.map(t=>{const i=e.find(s=>s.id==t.key);return xe(t.order,i)});return r.length===1?o[0]:function(t,i){for(let s=0;s<o.length;s++){const a=o[s](t,i);if(a!==0)return a}return 0}}const C=28,_e=20;function Se(){if(typeof document>\"u\")return\"willow\";const r=document.querySelector('[class^=\"wx\"][class$=\"theme\"]');return r?r.className.substring(3,r.className.length-6):\"willow\"}function R(r,e,o,t,i){const s=document.createElement(\"div\"),a=document.createElement(\"div\"),n=document.body;i=i?`${i}px`:\"auto\";let l,c;a.className=e,s.classList.add(`wx-${o}-theme`),s.style.cssText=`height:auto;position:absolute;top:0px;left:100px;overflow:hidden;width=${i};white-space:nowrap;`,s.appendChild(a),n.appendChild(s),typeof r!=\"object\"&&(r=[r]);for(let d=0;d<r.length;d++){a.innerText=r[d]+\"\";const h=s.getBoundingClientRect(),u=Math.ceil(h.width)+(t&&t.length?t[d]:0),f=Math.ceil(h.height);l=Math.max(l||0,u),c=Math.max(c||0,f)}return s.remove(),{width:l,height:c}}function j(r,e,o,t,i){const s=[];for(let a=0;a<r.length;a++){const n=r[a][e],l=n.length;for(let c=0;c<l;c++){const{text:d,vertical:h,collapsed:u,rowspan:f,css:p}=n[c];if(!d){s[c]=Math.max(s[c]||0,t);continue}let g=0;if(h&&!u){let w=`wx-measure-cell-${e}`;if(w+=p?` ${p}`:\"\",g=R(d,w,i).width,(f>1||!n[c+1])&&o>c+1){const x=f||o-c,m=s.slice(c,c+x).reduce((y,_)=>y+_,0);if(m<g){const y=Math.ceil((g-m)/x);for(let _=c;_<c+x;_++)s[_]=(s[_]||t)+y}continue}}s[c]=Math.max(s[c]||t,g)}}return s}function be(r,e,o){const t=[],i=[];let s=\"wx-measure-cell-body\";s+=r.css?` ${r.css}`:\"\";for(let a=0;a<e.length;a++){const n=e[a],l=b(n,r);l&&(t.push(l),r.treetoggle?i.push(e[a].$level*C+(e[a].$count?C:0)+(r.draggable?C:0)):r.draggable&&i.push(C))}return R(t,s,o,i).width}function ve(r,e){const o=\"wx-measure-cell-header\",t=r.sort?_e:0;let i=r.header;if(typeof i==\"string\")return R(i,o,e).width+t;let s;Array.isArray(i)||(i=[i]);for(let a=0;a<i.length;a++){const n=i[a],l=typeof n==\"string\"?n:n.text,c=o+(typeof n==\"string\"?\"\":` ${n.css}`);let d=R(l,c,e).width;a===i.length-1&&(d+=t),s=Math.max(s||0,d)}return s}const ke={text:(r,e)=>r?r.toString().toLowerCase().indexOf(e.toLowerCase())!==-1:!e,richselect:(r,e)=>typeof e!=\"number\"&&!e?!0:r==e};function Ce(r){return ke[r]}class Re extends K{in;_router;_branches;_xlsxWorker;_historyManager;constructor(e){super({writable:e,async:!1});const o={rowHeight:37,columnWidth:160,headerHeight:36,footerHeight:36};this._router=new B(super.setState.bind(this),[{in:[\"columns\",\"sizes\",\"_skin\"],out:[\"_columns\",\"_sizes\"],exec:i=>{const{columns:s,sizes:a,_skin:n}=this.getState(),l=this.copyColumns(s),c=l.reduce((u,f)=>Math.max(f.header.length,u),0),d=l.reduce((u,f)=>Math.max(f.footer.length,u),0);l.forEach(this.setCollapsibleColumns);const h=this.normalizeSizes(l,a,c,d,n);for(let u=0;u<l.length;u++)this.normalizeColumns(l,u,\"header\",c,h),this.normalizeColumns(l,u,\"footer\",d,h);this.setState({_columns:l,_sizes:h},i)}},{in:[\"data\",\"tree\",\"_filterIds\"],out:[\"flatData\",\"_rowHeightFromData\"],exec:i=>{const{data:s,tree:a,dynamic:n,_filterIds:l}=this.getState(),c=l&&new Set(l),d=a?this.flattenRows(s,[],l):c?s.filter(u=>c.has(u.id)):s,h=!n&&d.some(u=>u.rowHeight);this.setState({flatData:d,_rowHeightFromData:h},i)}}],{sizes:i=>({...o,...i})});const t=this.in=new X;t.on(\"close-editor\",({ignore:i})=>{const{editor:s}=this.getState();s&&(i||t.exec(\"update-cell\",s),this.setState({editor:null}))}),t.on(\"open-editor\",({id:i,column:s})=>{let a=this.getState().editor;a&&t.exec(\"close-editor\",{});const n=this.getRow(i),l=s?this.getColumn(s):this.getNextEditor(n);if(l?.editor){let c=l.editor;if(typeof c==\"function\"&&(c=c(n,l)),!c)return;a={column:l.id,id:i,value:S(n,l)??\"\",renderedValue:b(n,l)},typeof c==\"object\"&&c.config&&(a.config=c.config,c.config.options&&(a.options=c.config.options)),l.options&&!a.options&&(a.options=l.options),this.setState({editor:a})}}),t.on(\"editor\",({value:i})=>{const s=this.getState().editor;s&&(s.value=i,this.setState({editor:s}))}),t.on(\"add-row\",i=>{const s=this.getState();let{data:a}=s;const{select:n,_filterIds:l}=s,{row:c,before:d,after:h,select:u}=i;if(i.id=c.id=i.id||c.id||E(),d||h){const p=d||h,g=a.findIndex(w=>w.id===p);a=[...a],a.splice(g+(h?1:0),0,i.row)}else a=[...a,i.row];const f={data:a};l&&(f._filterIds=[...l,i.id]),this.setState(f),!(typeof u==\"boolean\"&&!u)&&(u||n)&&t.exec(\"select-row\",{id:c.id,show:!0})}),t.on(\"delete-row\",i=>{const{data:s,selectedRows:a,focusCell:n,editor:l}=this.getState(),{id:c}=i,d={data:s.filter(h=>h.id!==c)};this.isSelected(c)&&(d.selectedRows=a.filter(h=>h!==c)),l?.id==c&&(d.editor=null),this.setState(d),n?.row===c&&this.in.exec(\"focus-cell\",{eventSource:\"delete-row\"})}),t.on(\"update-cell\",i=>{const s=this.getState();let{data:a}=s;a=[...a];const{tree:n}=s,{id:l,column:c,value:d}=i,h=this.getColumn(c);if(n){const u={...this._branches[l]};M(u,h,d);const f=this.updateTreeRow(u);u.$parent===0&&(a=f)}else{const u=a.findIndex(p=>p.id==l),f={...a[u]};M(f,h,d),a[u]=f}this.setState({data:a})}),t.on(\"update-row\",i=>{let{data:s}=this.getState();const{id:a,row:n}=i,l=s.findIndex(c=>c.id==a);s=[...s],s[l]={...s[l],...n},this.setState({data:s})}),t.on(\"select-row\",({id:i,toggle:s,range:a,mode:n,show:l,column:c})=>{const d=this.getState(),{focusCell:h}=d;let{selectedRows:u}=d;if(u.length||(a=s=!1),a){const{data:f}=this.getState();let p=f.findIndex(w=>w.id==u[u.length-1]),g=f.findIndex(w=>w.id==i);p>g&&([p,g]=[g,p]),f.slice(p,g+1).forEach(w=>{u.indexOf(w.id)===-1&&u.push(w.id)})}else if(s&&this.isSelected(i)){if(n===!0)return;u=u.filter(f=>f!==i)}else if(s){if(n===!1)return;u.push(i)}else u=[i];this.setState({selectedRows:[...u]}),h?.row!==i&&this.in.exec(\"focus-cell\",{eventSource:\"select-row\"}),l&&this.in.exec(\"scroll\",{row:i,column:c})}),this.in.on(\"focus-cell\",i=>{const{row:s,column:a,eventSource:n}=i,{_columns:l,split:c}=this.getState();s&&a?(this.setState({focusCell:{row:s,column:a}}),n!==\"click\"&&((!c.left||l.findIndex(d=>d.id==i.column)>=c.left)&&(!c.right||l.findIndex(d=>d.id==i.column)<l.length-c.right)?this.in.exec(\"scroll\",{row:s,column:a}):this.in.exec(\"scroll\",{row:s}))):this.setState({focusCell:null})}),t.on(\"resize-column\",i=>{const{id:s,auto:a,maxRows:n,inProgress:l}=i;if(l===!1)return;let c=i.width||0;const d=[...this.getState().columns],h=d.find(u=>u.id==s);if(a){if(a==\"data\"||a===!0){const{flatData:u,_skin:f}=this.getState();let p=u.length;n&&(p=Math.min(n,p));const g=u.slice(0,p);c=be(h,g,f)}if(a==\"header\"||a===!0){const{_skin:u}=this.getState();c=Math.max(ve(h,u),c)}}h.width=Math.max(17,c),delete h.flexgrow,this.setState({columns:d})}),t.on(\"hide-column\",i=>{const{id:s,mode:a}=i,n=[...this.getState().columns],l=n.find(d=>d.id==s),c=n.reduce((d,h)=>d+(h.hidden?0:1),0);!a||c>1?(l.hidden=!l.hidden,this.setState({columns:n})):i.skipUndo=!0}),t.on(\"sort-rows\",i=>{const{key:s,add:a,sort:n}=i,l=this.getState(),{columns:c,data:d,tree:h}=l;if(n){const m=[...d];m.sort(n),this.setState({data:m});return}const{order:u=\"asc\"}=i;let f=l.sortMarks;const p=Object.keys(f),g=p.length;!a||!g||g===1&&f[s]?f={[s]:{order:u}}:(g===1&&(f[p[0]]={...f[p[0]],index:0}),f={...f,[s]:{order:u,index:typeof a==\"number\"?a:f[s]?.index??g}});const w=Object.keys(f).sort((m,y)=>f[m].index-f[y].index).map(m=>({key:m,order:f[m].order}));this.setState({sortMarks:f});const x=ye(w,c);if(x){const m=[...d];h?this.sortTree(m,x):m.sort(x),this.setState({data:m})}}),t.on(\"filter-rows\",i=>{const{value:s,key:a,filter:n}=i;if(!Object.keys(i).length){this.setState({filterValues:{},_filterIds:null});return}const l=this.getState(),{data:c,tree:d}=l;let h=l.filterValues;const u={};a&&(h={...h,[a]:s},u.filterValues=h);const f=n??this.createFilter(h);let p=[];d?p=this.filterTree(c,f,p):c.forEach(g=>{f(g)&&p.push(g.id)}),u._filterIds=p,this.setState(u)}),t.on(\"collapse-column\",i=>{const{id:s,row:a,mode:n}=i,l=[...this.getState().columns],c=this.getColumn(s).header,d=Array.isArray(c)?c[a]:c;typeof d==\"object\"&&(d.collapsed=n??!d.collapsed,this.setState({columns:l}))}),t.on(\"move-item\",i=>{const{id:s,inProgress:a}=i;let{target:n,mode:l=\"after\"}=i;const{data:c,flatData:d,tree:h}=this.getState(),u=d.findIndex(g=>g.id==s);let f;if(l===\"up\"||l===\"down\"){if(l===\"up\"){if(u===0)return;f=u-1,l=\"before\"}else if(l===\"down\"){if(u===d.length-1)return;f=u+1,l=\"after\"}n=d[f]&&d[f].id}else f=d.findIndex(g=>g.id==n);if(u===-1||f===-1||a===!1)return;let p;h?p=this.moveItem(s,n,c,l):p=this.moveItem(s,n,c,l),this.setState({data:h?this.normalizeTreeRows(p):p})}),t.on(\"copy-row\",i=>{const{id:s,target:a,mode:n=\"after\"}=i,l=this.getState(),{flatData:c,_filterIds:d}=l;let{data:h}=l;const u=this.getRow(s);if(!u)return;const f={...u,id:E()};i.id=f.id;const p=c.findIndex(w=>w.id==a);if(p===-1)return;h.splice(p+(n===\"after\"?1:0),0,f),h=[...h];const g={data:h};d&&(g._filterIds=[...d,f.id]),this.setState(g)}),t.on(\"open-row\",i=>{const{id:s,nested:a}=i;this.toggleBranch(s,!0,a)}),t.on(\"close-row\",i=>{const{id:s,nested:a}=i;this.toggleBranch(s,!1,a)}),t.on(\"export-data\",i=>new Promise((s,a)=>{const n=i.format||\"csv\",l=`${i.fileName||\"data\"}.${n}`;if(n==\"csv\"){const c=G(this.getState(),i.csv||{});i.download!==!1?P(new Blob([\"\\uFEFF\"+c],{type:\"text/csv\"}),l):i.result=c,s(!0)}else if(n==\"xlsx\"){let c=i.excel?.styles;!c&&c!==!1&&(c=Q(this.getState()._skin));const d=c,h=d?[{...d.header},{...d.lastHeaderCell||d.header},{...d.cell},{...d.firstFooterCell||d.footer},{...d.footer}]:Array(5).fill({}),{cells:u,merged:f,rowSizes:p,colSizes:g,styles:w}=J(this.getState(),i.excel||{},h),x=i.cdn||\"https://cdn.dhtmlx.com/libs/json2excel/1.3.2/worker.js\";this.getXlsxWorker(x).then(m=>{m.onmessage=y=>{if(y.data.type==\"ready\"){const _=y.data.blob;i.download!==!1?P(_,l):i.result=_,s(!0)}},m.postMessage({type:\"convert\",data:{data:[{name:i.sheetName||\"data\",cells:u,cols:g,rows:p,merged:f}],styles:w}})})}else a()})),t.on(\"search-rows\",i=>{const{search:s,columns:a}=i,n=this.searchRows(s,a);this.setState({search:{value:s,rows:n}})}),t.on(\"hotkey\",({key:i,event:s,isInput:a})=>{switch(i){case\"arrowup\":{const{flatData:n,focusCell:l,select:c}=this.getState();if(s.preventDefault(),a)return;const d=l?l.column:this._getFirstVisibleColumn()?.id,h=l?this.getPrevRow(l.row)?.id:n[n.length-1]?.id;d&&h&&(this.in.exec(\"focus-cell\",{row:h,column:d,eventSource:\"key\"}),c&&this.in.exec(\"select-row\",{id:h}));break}case\"arrowdown\":{const{flatData:n,focusCell:l,select:c}=this.getState();if(s.preventDefault(),a)return;const d=l?l.column:this._getFirstVisibleColumn()?.id,h=l?this.getNextRow(l.row)?.id:n[0]?.id;d&&h&&(this.in.exec(\"focus-cell\",{row:h,column:d,eventSource:\"key\"}),c&&this.in.exec(\"select-row\",{id:h}));break}case\"arrowright\":{const{focusCell:n}=this.getState();if(a)return;if(s.preventDefault(),n){const l=this.getNextColumn(n.column,!0)?.id;l&&this.in.exec(\"focus-cell\",{row:n.row,column:l,eventSource:\"key\"})}break}case\"arrowleft\":{const{focusCell:n}=this.getState();if(a)return;if(s.preventDefault(),n){const l=this.getPrevColumn(n.column,!0)?.id;l&&this.in.exec(\"focus-cell\",{row:n.row,column:l,eventSource:\"key\"})}break}case\"tab\":{const{editor:n,focusCell:l,select:c}=this.getState();if(n){s.preventDefault();const d=n.column;let h=n.id,u=this.getNextEditor(this.getRow(h),this.getColumn(d));if(!u){const f=this.getNextRow(h);f&&(h=f.id,u=this.getNextEditor(f))}u&&(this.in.exec(\"open-editor\",{id:h,column:u.id}),this.in.exec(\"focus-cell\",{row:h,column:u.id,eventSource:\"key\"}),c&&!this.isSelected(h)&&this.in.exec(\"select-row\",{id:h}))}else l&&this.in.exec(\"focus-cell\",{eventSource:\"key\"});break}case\"shift+tab\":{const{editor:n,focusCell:l,select:c}=this.getState();if(n){s.preventDefault();const d=n.column;let h=n.id,u=this.getPrevEditor(this.getRow(h),this.getColumn(d));if(!u){const f=this.getPrevRow(h);f&&(h=f.id,u=this.getPrevEditor(f))}u&&(this.in.exec(\"open-editor\",{id:h,column:u.id}),this.in.exec(\"focus-cell\",{row:h,column:u.id,eventSource:\"key\"}),c&&!this.isSelected(h)&&this.in.exec(\"select-row\",{id:h}))}else l&&this.in.exec(\"focus-cell\",{eventSource:\"key\"});break}case\"escape\":{const{editor:n}=this.getState();n&&(this.in.exec(\"close-editor\",{ignore:!0}),this.in.exec(\"focus-cell\",{row:n.id,column:n.column,eventSource:\"key\"}));break}case\"f2\":{const{editor:n,focusCell:l}=this.getState();!n&&l&&this.in.exec(\"open-editor\",{id:l.row,column:l.column});break}case\"enter\":{const{focusCell:n,tree:l}=this.getState();if(!a&&l&&n&&this.getColumn(n.column).treetoggle){const c=this.getRow(n.row);if(!c.data)return;this.in.exec(c.open?\"close-row\":\"open-row\",{id:n.row,nested:!0})}break}case\"home\":{const{editor:n,focusCell:l}=this.getState();if(!n&&l){s.preventDefault();const c=this._getFirstVisibleColumn()?.id;this.in.exec(\"focus-cell\",{row:l.row,column:c,eventSource:\"key\"})}break}case\"ctrl+home\":{const{editor:n,focusCell:l,flatData:c,select:d}=this.getState();if(!n&&l){s.preventDefault();const h=c[0]?.id,u=this._getFirstVisibleColumn()?.id;h&&u&&(this.in.exec(\"focus-cell\",{row:h,column:u,eventSource:\"key\"}),d&&!this.isSelected(h)&&this.in.exec(\"select-row\",{id:h}))}break}case\"end\":{const{editor:n,focusCell:l}=this.getState();if(!n&&l){s.preventDefault();const c=this._getLastVisibleColumn()?.id,d=l.row;this.in.exec(\"focus-cell\",{row:d,column:c,eventSource:\"key\"})}break}case\"ctrl+end\":{const{editor:n,focusCell:l,flatData:c,select:d}=this.getState();if(!n&&l){s.preventDefault();const h=c.at(-1).id,u=this._getLastVisibleColumn()?.id;h&&u&&(this.in.exec(\"focus-cell\",{row:h,column:u,eventSource:\"key\"}),d&&!this.isSelected(h)&&this.in.exec(\"select-row\",{id:h}))}break}case\"ctrl+z\":{this.in.exec(\"undo\",{});break}case\"ctrl+y\":{this.in.exec(\"redo\",{});break}}}),t.on(\"scroll\",i=>{const{_columns:s,split:a,_sizes:n,flatData:l,dynamic:c,_rowHeightFromData:d}=this.getState();let h=-1,u=-1,f=0,p=0;if(i.column){h=0;const g=s.findIndex(w=>w.id==i.column);f=s[g].width;for(let w=a.left??0;w<g;w++){const x=s[w];x.hidden||(h+=x.width)}}if(i.row&&!c){const g=l.findIndex(w=>w.id==i.row);g>=0&&(d?(u=l.slice(0,g).reduce((w,x)=>w+(x.rowHeight||n.rowHeight),0),p=l[g].rowHeight):u=n.rowHeight*g)}this.setState({scroll:{top:u,left:h,width:f,height:p||n.rowHeight}})}),t.on(\"print\",i=>{const s=ce(i);this.setState({_print:s}),this.setStateAsync({_print:null})}),t.on(\"undo\",()=>{this._historyManager?.handleUndo()}),t.on(\"redo\",()=>{this._historyManager?.handleRedo()}),this.initOnce()}getXlsxWorker(e){if(!this._xlsxWorker){const o=window.URL.createObjectURL(new Blob([`importScripts('${e}');`],{type:\"text/javascript\"}));this._xlsxWorker=new Promise(t=>{const i=new Worker(o);i.addEventListener(\"message\",s=>{s.data.type===\"init\"&&t(i)})})}return this._xlsxWorker}initOnce(){const e={sortMarks:{},_filterIds:null,data:[],filterValues:{},scroll:null,editor:null,focusCell:null,_print:null,history:{undo:0,redo:0},search:null};this._router.init(e)}init(e){e.hasOwnProperty(\"_skin\")&&!e._skin&&(e._skin=Se()),e.columns&&e.columns.forEach(o=>{o.options&&(o.optionsMap=new Map(o.options.map(t=>[t.id,t.label])))}),k(this.getState().data,e.data)||(e.tree?(this._branches={0:{data:e.data}},e.data=this.normalizeTreeRows(e.data)):e.data=this.normalizeRows(e.data),this.setState({_filterIds:null,filterValues:{},sortMarks:{},search:null}),this._historyManager&&this._historyManager.resetHistory()),O()&&(e.tree&&(e.undo=!1,e.reorder=!1),e.split?.right&&(e.split.right=0)),e.undo&&!this._historyManager&&(this._historyManager=new pe(this.in,this.getState.bind(this),this.setState.bind(this))),this._router.init({...e})}setState(e,o){return this._router.setState(e,o)}setStateAsync(e){this._router.setStateAsync(e)}getRow(e){const{tree:o}=this.getState();return o?this._branches[e]:this.getState().data.find(t=>t.id==e)}getRowIndex(e,o){return o||(o=this.getState().flatData),o.findIndex(t=>t.id==e)}getNextRow(e){const o=this.getState().flatData,t=this.getRowIndex(e,o);return o[t+1]}getPrevRow(e){const o=this.getState().flatData,t=this.getRowIndex(e,o);return o[t-1]}getColumn(e){return this.getState().columns.find(o=>o.id==e)}getNextColumn(e,o){const t=this.getState()._columns,i=t.findIndex(s=>s.id==e);return o?this._getFirstVisibleColumn(i+1):t[i+1]}getPrevColumn(e,o){const t=this.getState()._columns,i=t.findIndex(s=>s.id==e);return o?this._getLastVisibleColumn(i-1):t[i-1]}_getFirstVisibleColumn(e){const o=this.getState()._columns;let t=e??0;for(;t<o.length&&(o[t]?.hidden||o[t]?.collapsed);)t++;return o[t]}_getLastVisibleColumn(e){const o=this.getState()._columns;let t=e??o.length-1;for(;t<o.length&&(o[t]?.hidden||o[t]?.collapsed);)t--;return o[t]}isCellEditable(e,o){const{editor:t,hidden:i}=o;return!t||i?!1:typeof t==\"function\"?t(e,o):!0}getNextEditor(e,o){let t=this.getState().columns;if(o){const i=t.findIndex(s=>s.id==o.id);t=t.slice(i+1)}return t.find(i=>this.isCellEditable(e,i))}getPrevEditor(e,o){let t=this.getState().columns;if(o){const i=t.findLastIndex(s=>s.id==o.id);t=t.slice(0,i)}return t.findLast(i=>this.isCellEditable(e,i))}toggleBranch(e,o,t){let i=this._branches[e],{data:s}=this.getState();if(s=[...s],e!==0){i={...i,open:o};const a=this.updateTreeRow(i);i.$parent===0&&(s=a)}t&&i.data?.length&&i.data.forEach(a=>{const n=this.toggleKids(a,o,t);e===0&&(s=n)}),this.setState({data:s})}toggleKids(e,o,t){e={...e,open:o};const i=this.updateTreeRow(e);return t&&e.data?.length&&e.data.forEach(s=>{this.toggleKids(s,o,t)}),i}updateTreeRow(e){const o=e.id;this._branches[o]=e;const t=this._branches[e.$parent],i=t.data.findIndex(s=>s.id==o);return t.data=[...t.data],t.data[i]=e,t.data}isSelected(e){return this.getState().selectedRows.indexOf(e)!==-1}findAndRemove(e,o){for(let t=0;t<e.length;t++){if(e[t].id==o)return e.splice(t,1)[0];if(e[t].data){const i=[...e[t].data],s=this.findAndRemove(i,o);if(s)return e[t]={...e[t],data:i},s}}return null}insertItem(e,o,t,i){for(let s=0;s<e.length;s++){if(e[s].id==o){const a=e[s],n=i===\"before\"?s:s+1;if(a.data){if(i===\"before\"){const l=s>0?e[s-1]:null;return l?.data&&l.open?e[s-1]={...l,data:[...l.data,t]}:e.splice(n,0,t),!0}else if(a.open)return e[s]={...a,data:[t,...a.data]},!0}return e.splice(n,0,t),!0}if(e[s].data&&(e[s]={...e[s],data:[...e[s].data]},this.insertItem(e[s].data,o,t,i)))return!0}return!1}moveItem(e,o,t,i){const s=[...t],a=this.findAndRemove(s,e);return this.insertItem(s,o,a,i),s}copyColumns(e){const o=[];for(let t=0;t<e.length;t++){const i={...e[t]};this.copyHeaderFooter(i,\"header\"),this.copyHeaderFooter(i,\"footer\"),o[t]=i}return o}copyHeaderFooter(e,o){let t=e[o];t=Array.isArray(t)?[...t]:[t],t.forEach((i,s)=>{t[s]=typeof i==\"string\"?{text:i}:{...i}}),e[o]=t}setCollapsibleColumns(e,o,t){let i=e.header;for(let s=0;s<i.length;s++){const a=i[s];if(a.collapsible&&a.collapsed){if(a.collapsible!==\"first\"){e.collapsed=!0,e.width=36,a.vertical=!0;const l=i.length-s;i=i.slice(0,s+1),i[s].rowspan=l}const n=a.colspan;if(n){const l=i[s+1];let c=1;l&&l.colspan&&!l.collapsed&&(c=l.colspan);for(let d=c;d<n;d++){const h=t[o+d];h&&(h.hidden=!0)}}}}}normalizeColumns(e,o,t,i,s){const a=e[o];a.width||(a.width=a.flexgrow?17:s.columnWidth),a._colindex=o+1;const n=a[t],l=s[`${t}RowHeights`];for(let c=0;c<i;c++){const d=n[c];d.id=a.id,c===n.length-1&&(d.rowspan=d.rowspan?Math.min(d.rowspan,i-c):i-c);for(let h=1;h<d.rowspan;h++){n.splice(c+h,0,{_hidden:!0});for(let u=1;u<d.colspan;u++)e[o+u][t].splice(c+h,0,{})}if(d.rowspan){const h=(d.rowspan===i?l:l.slice(c,d.rowspan+c)).reduce((u,f)=>u+f,0);d.height=h,c+d.rowspan!=i&&d.height--}if(d.colspan){let h=a.width,u=a.flexgrow||0;const f=d.colspan;for(let p=1;p<f;p++){const g=e[o+p];g&&(g.hidden?d.colspan-=1:g.flexgrow?u+=g.flexgrow:h+=g.width||s.columnWidth),u?d.flexgrow=u:d.width=h}}else d.width=a.width,d.flexgrow=a.flexgrow;t===\"header\"&&d.filter&&typeof d.filter==\"string\"&&(d.filter={type:d.filter})}n.length>i&&(n.length=i),a[t]=n}normalizeRows(e){for(let o=0;o<e.length;o++)e[o].id||(e[o].id=E());return e}normalizeTreeRows(e,o,t){return e.forEach(i=>{i.id||(i.id=E()),i.$level=o||0,i.$parent=t||0,this._branches[i.id]=i,i.data&&(i.data.length?(i.$count=i.data.length,this.normalizeTreeRows(i.data,i.$level+1,i.id)):(delete i.data,delete i.$count,delete i.open))}),e}sortTree(e,o){e.sort(o),e.forEach(t=>{t.data&&this.sortTree(t.data,o)})}filterTree(e,o,t){return e.forEach(i=>{o(i)&&t.push(i.id),i.data&&this.filterTree(i.data,o,t)}),t}flattenRows(e,o,t){const i=o;return e.forEach(s=>{(!t||t.includes(s.id))&&i.push(s),s.data?.length&&s.open!==!1&&this.flattenRows(s.data,i,t)}),i}createFilter(e){const{_columns:o}=this.getState(),t=[];for(const i in e){const{config:s,type:a}=o.find(l=>l.id==i).header.find(l=>l.filter).filter,n=e[i];t.push(l=>s?.handler?s.handler(l[i],n):Ce(a)(l[i],n))}return i=>{for(let s=0;s<t.length;s++)if(!t[s](i))return!1;return!0}}searchRows(e,o){e=e.trim().toLowerCase();const t={};if(!e)return t;const{flatData:i,columns:s}=this.getState(),a=o?s.filter(n=>o[n.id]):s;return i.forEach(n=>{const l={};a.forEach(c=>{const d=b(n,c);String(d).toLowerCase().includes(e)&&(l[c.id]=!0)}),Object.keys(l).length&&(t[n.id]=l)}),t}normalizeSizes(e,o,t,i,s){const a=j(e,\"header\",t,o.headerHeight,s),n=j(e,\"footer\",i,o.footerHeight,s),l=a.reduce((d,h)=>d+h,0),c=n.reduce((d,h)=>d+h,0);return{...o,headerRowHeights:a,footerRowHeights:n,headerHeight:l,footerHeight:c}}}let Ee=new Date().valueOf();function E(){return\"temp://\"+Ee++}function Ie(r,e=\"data-id\"){let o=r;for(!o.tagName&&r.target&&(o=r.target);o;){if(o.getAttribute&&o.getAttribute(e))return o;o=o.parentNode}return null}new Date().valueOf();var Te=class{constructor(){this.store=new Map}configure(r,e){this.node=e;for(const o in r)if(r[o]){const t=o.toLowerCase().replace(/[ ]/g,\"\"),i=r[o];this.store.set(t,i)}}},v=[],De={subscribe:r=>{He();const e=new Te;return v.push(e),r(e),()=>{const o=v.findIndex(t=>t===e);o>=0&&v.splice(o,1)}}},V=!1;function He(){V||(V=!0,document.addEventListener(\"keydown\",r=>{if(v.length&&(r.ctrlKey||r.altKey||r.metaKey||r.shiftKey||r.key.length>1||r.key===\" \")){const e=[];r.ctrlKey&&e.push(\"ctrl\"),r.altKey&&e.push(\"alt\"),r.metaKey&&e.push(\"meta\"),r.shiftKey&&e.push(\"shift\");let o=r.code.replace(\"Key\",\"\").toLocaleLowerCase();r.key===\" \"&&(o=\"space\"),e.push(o);const t=e.join(\"+\");for(let i=v.length-1;i>=0;i--){const s=v[i],a=s.store.get(t)||s.store.get(o);a&&s.node.contains(r.target)&&a(r,{key:t,evKey:o})}}}))}const Me={tab:!0,\"shift+tab\":!0,arrowup:!0,arrowdown:!0,arrowright:!0,arrowleft:!0,enter:!0,escape:!0,f2:!0,home:!0,end:!0,\"ctrl+home\":!0,\"ctrl+end\":!0,\"ctrl+z\":!0,\"ctrl+y\":!0};function Pe(r,{keys:e,exec:o}){if(!e)return;function t(a){const n=a.target;return n.tagName===\"INPUT\"||n.tagName===\"TEXTAREA\"||Ie(n,\"data-header-id\")?.classList.contains(\"wx-filter\")||!!n.closest(\".wx-cell.wx-editor\")}const i={};for(const a in e){const n=e[a];typeof n<\"u\"&&(typeof n==\"function\"?i[a]=n:n&&(i[a]=l=>{const c=t(l);o({key:a,event:l,isInput:c})}))}const s=De.subscribe(a=>{a.configure(i,r)});return{destroy:()=>{s()}}}function ze(r,e){let o=null;e.scroll.subscribe(t=>{if(!t||t===o)return;o=t;const{left:i,top:s,height:a,width:n}=t,l=e.getHeight(),c=e.getWidth(),d=e.getScrollMargin();if(s>=0){const h=r.scrollTop;s<h?r.scrollTop=s:s+a>h+l&&(r.scrollTop=s-l+a)}if(i>=0){const h=r.scrollLeft;i<h?r.scrollLeft=i:i+n>h+c-d&&(r.scrollLeft=i-c+n+d)}})}function T(r){return r.map(e=>{switch(e={...e},e.data&&(e.data=T(e.data)),e.items&&(e.data=T(e.items)),e.id){case\"move-item:up\":e.isDisabled=(o,t)=>Ae(o,t);break;case\"move-item:down\":e.isDisabled=(o,t)=>Le(o,t);break;case\"undo\":e.isDisabled=o=>!o.undo;break;case\"redo\":e.isDisabled=o=>!o.redo;break;case\"paste-row\":e.isDisabled=o=>!o._temp?.length;break}return e})}function Ae(r,e){return r.some(o=>e[0]?.id==o)}function Le(r,e){return r.some(o=>e[e.length-1]?.id==o)}const Ne=[{id:\"add-row\",comp:\"button\",icon:\"wxi-plus\",text:\"New row\",type:\"primary\"},{id:\"open-editor\",comp:\"icon\",icon:\"wxi-edit\",menuText:\"Edit\",text:\"Edit\"},{id:\"delete-row\",comp:\"icon\",icon:\"wxi-delete\",menuText:\"Delete\",text:\"Delete\"},{id:\"copy-row\",comp:\"icon\",icon:\"wxi-content-copy\",menuText:\"Copy\",text:\"Copy\"},{id:\"cut-row\",comp:\"icon\",icon:\"wxi-content-cut\",menuText:\"Cut\",text:\"Cut\"},{id:\"paste-row\",comp:\"icon\",icon:\"wxi-content-paste\",menuText:\"Paste\",text:\"Paste\"},{id:\"move-item:up\",comp:\"icon\",icon:\"wxi-angle-up\",menuText:\"Move up\",text:\"Move up\"},{id:\"move-item:down\",comp:\"icon\",icon:\"wxi-angle-down\",menuText:\"Move down\",text:\"Move down\"},{comp:\"separator\"},{id:\"undo\",comp:\"icon\",icon:\"wxi-undo\",menuText:\"Undo\",text:\"Ctrl+Z\"},{id:\"redo\",comp:\"icon\",icon:\"wxi-redo\",menuText:\"Redo\",text:\"Ctrl+Y\"}],Oe=[{id:\"add-row:before\",text:\"Add before\",icon:\"wxi-table-row-plus-before\"},{id:\"add-row:after\",text:\"Add after\",icon:\"wxi-table-row-plus-after\"},{id:\"copy-row\",text:\"Copy\",icon:\"wxi-content-copy\"},{id:\"cut-row\",text:\"Cut\",icon:\"wxi-content-cut\"},{id:\"paste-row\",text:\"Paste\",icon:\"wxi-content-paste\"},{id:\"move-item:up\",text:\"Move up\",icon:\"wxi-angle-up\"},{id:\"move-item:down\",text:\"Move down\",icon:\"wxi-angle-down\"},{comp:\"separator\"},{id:\"delete-row\",text:\"Delete\",icon:\"wxi-delete-outline\"}];function $e(r,e){const{selectedRows:o,data:t,focusCell:i}=r.getState();switch(e!==\"paste-row\"&&(r._temp=null),e){case\"add-row\":{o.length?o.forEach(s=>r.exec(\"add-row\",{row:{},after:s})):r.exec(\"add-row\",{row:{}});break}case\"add-row:before\":{o.forEach(s=>r.exec(\"add-row\",{row:{},before:s}));break}case\"add-row:after\":{o.forEach(s=>r.exec(\"add-row\",{row:{},after:s}));break}case\"open-editor\":{if(i&&o.includes(i.row)){const s=r.getColumn(i.column);r.exec(\"open-editor\",{id:i.row,column:s.editor?i.column:void 0})}else r.exec(\"open-editor\",{id:o[0]});break}case\"copy-row\":{o.forEach(s=>{r._temp||(r._temp=[]),r._temp.push({id:s,cut:!1})});break}case\"cut-row\":{o.forEach(s=>{r._temp||(r._temp=[]),r._temp.push({id:s,cut:!0})});break}case\"paste-row\":{r._temp?.length&&[...r._temp].sort((s,a)=>t.findIndex(n=>n.id==a.id)-t.findIndex(n=>n.id==s.id)).forEach((s,a)=>{o.forEach((n,l)=>{const c={id:s.id,target:n,mode:\"after\"};r.exec(s.cut?\"move-item\":\"copy-row\",c),s.cut||r.exec(\"select-row\",{id:c.id,toggle:!!a||!!l})})});break}case\"delete-row\":o.forEach(s=>r.exec(\"delete-row\",{id:s}));break;case\"move-item:up\":{[...o].sort((s,a)=>t.findIndex(n=>n.id==s)-t.findIndex(n=>n.id==a)).forEach(s=>{r.exec(\"move-item\",{id:s,mode:\"up\"})});break}case\"move-item:down\":{[...o].sort((s,a)=>t.findIndex(n=>n.id==a)-t.findIndex(n=>n.id==s)).forEach(s=>{r.exec(\"move-item\",{id:s,mode:\"down\"})});break}case\"undo\":r.exec(\"undo\");break;case\"redo\":r.exec(\"redo\");break}}export{Re as DataStore,T as assignChecks,Me as defaultHotkeys,Oe as defaultMenuOptions,Ne as defaultToolbarButtons,Z as getEditorConfig,ne as getHeaderFooterPrintColumns,de as getPrintCellStyle,re as getPrintColumns,he as getPrintFilterValue,b as getRenderValue,we as getStamp,S as getValue,$e as handleAction,Pe as hotkeys,O as isCommunity,ze as scrollTo};\n", "export default {\n\tgrid: {\n\t\t\"Add before\": \"Add before\",\n\t\t\"Add after\": \"Add after\",\n\t\tCopy: \"Copy\",\n\t\tCut: \"Cut\",\n\t\tPaste: \"Paste\",\n\t\tDelete: \"Delete\",\n\t\t\"New row\": \"New row\",\n\t\t\"Move up\": \"Move up\",\n\t\t\"Move down\": \"Move down\",\n\t\tUndo: \"Undo\",\n\t\tRedo: \"Redo\",\n\t},\n};\n", "export function walkData(data, cb) {\n  data.forEach((a) => {\n    cb(a);\n    if (a.data && a.data.length) walkData(a.data, cb);\n  });\n}\n\nexport function mapData(data, cb) {\n  return data.map((a) => {\n    const out = cb(a);\n    if (a.data && a.data.length) out.data = mapData(a.data, cb);\n    return out;\n  });\n}\n\nexport function filterMenu(data, cb) {\n  const out = [];\n  data.forEach((a) => {\n    if (a.data) {\n      const sub = filterMenu(a.data, cb);\n      if (sub.length) out.push({ ...a, data: sub });\n    } else {\n      if (cb(a)) out.push(a);\n    }\n  });\n\n  return out;\n}\n\nlet uid = 1;\nexport function prepareMenuData(data) {\n  return mapData(data, (a) => {\n    // [deprecated] option.type to be deprecated in 3.0\n    const opt = { ...a, id: a.id || uid++ };\n    if (opt.type) opt.comp = opt.type;\n    return opt;\n  });\n}\n\nconst handlers = {};\nexport function getItemHandler(type) {\n  return handlers[type] || type;\n}\nexport function registerMenuItem(type, handler) {\n  handlers[type] = handler;\n}\n", "import { useMemo, useRef, useCallback } from 'react';\nimport { getItemHandler } from '../helpers';\nimport './MenuOption.css';\n\nfunction MenuOption({ onClick, onShow, option }) {\n  const element = useRef(null);\n\n  const onHover = useCallback(() => {\n    onShow(option.data ? option.id : false, element.current);\n  }, [onShow, option]);\n\n  const SubComponent = useMemo(() => {\n    return option && option.comp ? getItemHandler(option.comp) : null;\n  }, [option]);\n\n  return (\n    <div\n      ref={element}\n      className={`wx-cDCz9rZQ wx-option ${option.css || ''} ${option.disabled ? 'wx-disabled' : ''}`}\n      data-id={option.id}\n      onMouseEnter={onHover}\n      onClick={onClick}\n    >\n      {option.icon ? (\n        <i className={`wx-cDCz9rZQ wx-icon ${option.icon}`}></i>\n      ) : null}\n      {option.comp ? (\n        SubComponent ? (\n          <SubComponent item={option} option={option} />\n        ) : null\n      ) : (\n        <span className=\"wx-cDCz9rZQ wx-value\"> {option.text} </span>\n      )}\n      {option.subtext ? (\n        <span className=\"wx-cDCz9rZQ wx-subtext\">{option.subtext}</span>\n      ) : null}\n      {option.data ? (\n        <i className=\"wx-cDCz9rZQ wx-sub-icon wxi-angle-right\"></i>\n      ) : null}\n    </div>\n  );\n}\n\nexport default MenuOption;\n", "import {\n  Fragment,\n  useState,\n  useEffect,\n  useMemo,\n  useRef,\n  useCallback,\n} from 'react';\nimport { clickOutside, calculatePosition } from '@svar-ui/lib-dom';\nimport MenuOption from './MenuOption.jsx';\nimport { prepareMenuData } from '../helpers';\nimport './Menu.css';\n\nfunction Menu({\n  options,\n  left = 0,\n  top = 0,\n  at = 'bottom',\n  parent = null,\n  mount = null,\n  context = null,\n  css = '',\n  onClick,\n}) {\n  const [x, setX] = useState(-10000);\n  const [y, setY] = useState(-10000);\n  const [z, setZ] = useState(20);\n  const [width, setWidth] = useState();\n\n  const selfRef = useRef(null);\n  const [showSub, setShowSub] = useState(false);\n  const [activeOption, setActiveOption] = useState(null);\n\n  const updatePosition = useCallback(() => {\n    const result = calculatePosition(selfRef.current, parent, at, left, top);\n    if (result) {\n      setX(result.x);\n      setY(result.y);\n      setZ(result.z);\n      setWidth(result.width);\n    }\n  }, [parent, at, left, top]);\n\n  useEffect(() => {\n    if (mount) mount(updatePosition);\n  }, []);\n\n  const onLeave = useCallback(() => {\n    setShowSub(false);\n  }, []);\n\n  const cancel = useCallback(() => {\n    // [deprecated] action will be deprecated in 3.0\n    onClick && onClick({ action: null, option: null });\n  }, [onClick]);\n\n  const onShow = useCallback((id, el) => {\n    setShowSub(id);\n    setActiveOption(el);\n  }, []);\n\n  const finalOptions = useMemo(() => prepareMenuData(options), [options]);\n\n  useEffect(() => {\n    updatePosition();\n  }, [parent, updatePosition]);\n\n  useEffect(() => {\n    if (!selfRef.current) return;\n    return clickOutside(selfRef.current, { callback: cancel, modal: true })\n      .destroy;\n  }, [cancel]);\n\n  return (\n    <div\n      ref={selfRef}\n      data-wx-menu=\"true\"\n      className={`wx-XMmAGqVx wx-menu ${css}`}\n      style={{\n        position: 'absolute',\n        top: y + 'px',\n        left: x + 'px',\n        width: width,\n        zIndex: z,\n      }}\n      onMouseLeave={onLeave}\n    >\n      {finalOptions.map((option) => (\n        <Fragment key={option.id}>\n          {option.comp === 'separator' ? (\n            <div className=\"wx-XMmAGqVx wx-separator\"></div>\n          ) : (\n            <MenuOption\n              option={option}\n              onShow={onShow}\n              onClick={(ev) => {\n                if (!option.data && !ev.defaultPrevented) {\n                  // [deprecated] action will be deprecated in 3.0\n                  const pack = { context, action: option, option, event: ev };\n                  if (option.handler) option.handler(pack);\n                  onClick && onClick(pack);\n                  ev.stopPropagation();\n                }\n              }}\n            />\n          )}\n          {option.data && showSub === option.id ? (\n            <Menu\n              css={css}\n              options={option.data}\n              at=\"right-overlap\"\n              parent={activeOption}\n              context={context}\n              onClick={onClick}\n            />\n          ) : null}\n        </Fragment>\n      ))}\n    </div>\n  );\n}\n\nexport default Menu;\n", "import {\n  forwardRef,\n  useCallback,\n  useImperativeHandle,\n  useMemo,\n  useState,\n} from 'react';\nimport { Portal } from '@svar-ui/react-core';\nimport { id } from '@svar-ui/lib-dom';\nimport Menu from './Menu.jsx';\nimport { filterMenu } from '../helpers';\n\nconst ActionMenu = forwardRef(function ActionMenu(props, ref) {\n  const {\n    options,\n    at = 'bottom',\n    resolver = null,\n    dataKey = 'contextId',\n    filter = null,\n    css = '',\n    children,\n    onClick,\n  } = props;\n\n  const [item, setItem] = useState(null);\n  const [parent, setParent] = useState(null);\n  const [left, setLeft] = useState(0);\n  const [top, setTop] = useState(0);\n\n  const filteredOptions = useMemo(() => {\n    if (item !== null && filter) {\n      return filterMenu(options, (v) => filter(v, item));\n    }\n    return options;\n  }, [item, filter, options]);\n\n  const handleClick = useCallback(\n    (ev) => {\n      setParent(null);\n      if (onClick) onClick(ev);\n    },\n    [onClick],\n  );\n\n  const getDataAttr = useCallback((node, name) => {\n    let v = null;\n    while (node && node.dataset && !v) {\n      v = node.dataset[name];\n      node = node.parentNode;\n    }\n    return v ? id(v) : null;\n  }, []);\n\n  const show = useCallback(\n    (ev, obj) => {\n      if (!ev) {\n        setParent(null);\n        return;\n      }\n\n      if (ev.defaultPrevented) return;\n\n      const target = ev.target;\n      if (target && target.dataset && target.dataset.menuIgnore) return;\n\n      setLeft(ev.clientX + 1);\n      setTop(ev.clientY + 1);\n\n      let nextItem =\n        typeof obj !== 'undefined' ? obj : getDataAttr(target, dataKey);\n      if (resolver) {\n        nextItem = resolver(nextItem, ev);\n        if (!nextItem) return;\n      }\n\n      setItem(nextItem);\n      setParent(target);\n\n      ev.preventDefault();\n    },\n    [dataKey, getDataAttr, resolver],\n  );\n\n  useImperativeHandle(ref, () => ({ show }), [show]);\n\n  return (\n    <>\n      {children ? (\n        <span onClick={show} data-menu-ignore=\"true\">\n          {typeof children === 'function' ? children() : children}\n        </span>\n      ) : null}\n\n      {parent ? (\n        <Portal>\n          <Menu\n            key={parent}\n            css={css}\n            at={at}\n            top={top}\n            left={left}\n            parent={parent}\n            context={item}\n            onClick={handleClick}\n            options={filteredOptions}\n          />\n        </Portal>\n      ) : null}\n    </>\n  );\n});\n\nexport default ActionMenu;\n", "import { useMemo, useState, useRef } from 'react';\nimport ActionMenu from './ActionMenu.jsx';\nimport { prepareMenuData } from '../helpers';\nimport './MenuBar.css';\n\nfunction MenuBar(props) {\n  const { css = '', menuCss = '', options, onClick } = props;\n\n  const finalOptions = useMemo(() => prepareMenuData(options), [options]);\n\n  const [active, setActive] = useState(false);\n  const [menuOptions, setMenuOptions] = useState([]);\n\n  const menu = useRef(null);\n\n  function doClick(ev) {\n    setActive(null);\n    onClick && onClick(ev);\n  }\n\n  function setMenu(ev, option, trigger) {\n    // if the option has a submenu, show it and enable hover mode\n    if (option.data && option.data.length) {\n      if (active && trigger) {\n        // second click on option with submenu disables hover mode\n        setActive(null);\n      } else {\n        setMenuOptions(option.data);\n        setActive(option.id);\n        menu.current.show(ev, option);\n      }\n    } else {\n      // hide the submenu\n      menu.current.show(null);\n      // if it was the click action, dispatch it and end hover mode\n      if (trigger) {\n        // [deprecated] action will be deprecated in 3.0\n        onClick && onClick({ action: option, option });\n        setActive(null);\n      } else {\n        // do not remove active flag, to preserve the hover mode\n        setActive(-1);\n      }\n    }\n  }\n\n  function onHover(ev, option) {\n    if (active) setMenu(ev, option);\n  }\n\n  return (\n    <>\n      <div className={`wx-UfhPCLL4 wx-menubar ${css}`}>\n        {finalOptions.map((option) => (\n          <button\n            key={option.id}\n            className={`wx-UfhPCLL4 wx-option ${active === option.id ? 'wx-active' : ''} ${option.disabled ? 'wx-disabled' : ''}`}\n            onMouseEnter={(ev) => onHover(ev, option)}\n            onClick={(ev) => setMenu(ev, option, true)}\n          >\n            {option.text}\n          </button>\n        ))}\n      </div>\n\n      <ActionMenu\n        css={menuCss}\n        onClick={doClick}\n        options={menuOptions}\n        ref={menu}\n      />\n    </>\n  );\n}\n\nexport default MenuBar;\n", "import {\n  forwardRef,\n  useCallback,\n  useEffect,\n  useImperativeHandle,\n  useRef,\n  useState,\n} from 'react';\nimport { Portal } from '@svar-ui/react-core';\nimport Menu from './Menu.jsx';\n\nconst DropDownMenu = forwardRef(function DropDownMenu(props, ref) {\n  const { options, at = 'bottom', css = '', children, onClick } = props;\n\n  const [parent, setParent] = useState(null);\n\n  function handleClick(ev) {\n    setParent(null);\n    onClick && onClick(ev);\n  }\n\n  const show = useCallback((ev) => {\n    setParent(ev.target);\n    ev.preventDefault();\n  }, []);\n\n  useImperativeHandle(ref, () => ({ show }), [show]);\n\n  function showAt(ev) {\n    let target = ev.target;\n    while (!target.dataset.menuIgnore) {\n      setParent(target);\n      target = target.parentNode;\n    }\n  }\n\n  const parentKeyRef = useRef(0);\n  const lastParentRef = useRef(parent);\n  useEffect(() => {\n    if (lastParentRef.current !== parent) {\n      parentKeyRef.current += 1;\n      lastParentRef.current = parent;\n    }\n  }, [parent]);\n\n  return (\n    <>\n      <span onClick={showAt} data-menu-ignore=\"true\">\n        {children}\n      </span>\n      {parent ? (\n        <Portal>\n          <Menu\n            key={parentKeyRef.current}\n            css={css}\n            at={at}\n            parent={parent}\n            options={options}\n            onClick={handleClick}\n          />\n        </Portal>\n      ) : null}\n    </>\n  );\n});\n\nexport default DropDownMenu;\n", "import { forwardRef, useRef, useCallback, useImperativeHandle } from 'react';\nimport ActionMenu from './ActionMenu.jsx';\n\nconst ContextMenu = forwardRef(function ContextMenu(props, ref) {\n  const {\n    options,\n    at = 'bottom',\n    resolver = null,\n    dataKey = 'contextId',\n    filter = null,\n    css = '',\n    children,\n    onClick,\n  } = props;\n\n  const menu = useRef(null);\n\n  const show = useCallback((ev, obj) => {\n    menu.current.show(ev, obj);\n  }, []);\n\n  useImperativeHandle(\n    ref,\n    () => ({\n      show,\n    }),\n    [show],\n  );\n\n  return (\n    <>\n      {children ? (\n        <span onContextMenu={show} data-menu-ignore=\"true\">\n          {children}\n        </span>\n      ) : null}\n\n      <ActionMenu\n        css={css}\n        at={at}\n        options={options}\n        resolver={resolver}\n        dataKey={dataKey}\n        filter={filter}\n        ref={menu}\n        onClick={onClick}\n      />\n    </>\n  );\n});\n\nexport default ContextMenu;\n", "const handlers = {};\nexport function getItemHandler(type) {\n  return handlers[type] || type;\n}\nexport function registerToolbarItem(type, handler) {\n  handlers[type] = handler;\n}\n", "import './Separator.css';\n\nexport default function Separator({ menu = false }) {\n  return (\n    <div className={`wx-z1qpqrvg wx-separator${menu ? '-menu' : ''}`}>\n      &nbsp;\n    </div>\n  );\n}\n", "import './Spacer.css';\n\nfunction Spacer() {\n  return <div className=\"wx-1IhFzpJV wx-spacer\"></div>;\n}\n\nexport default Spacer;\n", "import { useMemo, useCallback } from 'react';\nimport { getItemHandler } from '../helpers';\nimport Separator from '../buttons/Separator.jsx';\nimport Spacer from '../buttons/Spacer.jsx';\nimport './BarComponent.css';\n\n// eslint-disable-next-line no-unused-vars\nconst omitKey = ({ key, text, ...rest }) => rest;\n\nfunction BarComponent(props) {\n  const { item = {}, menu = false, values, onClick, onChange } = props;\n\n  const itemComponent = useMemo(\n    () => getItemHandler(item.comp || 'label'),\n    [item],\n  );\n\n  const handleClick = useCallback(() => {\n    if (item && item.handler) item.handler(item);\n    if (onClick) onClick({ item });\n  }, [item, onClick]);\n\n  const value = useMemo(() => {\n    return item && item.key\n      ? values\n        ? values[item.key]\n        : undefined\n      : undefined;\n  }, [item, values]);\n\n  const detectChange = useCallback(\n    ({ value }) => {\n      if (item && item.handler) item.handler(item, value);\n      if (onChange) onChange({ value, item });\n    },\n    [item, onChange],\n  );\n\n  const text = useMemo(() => {\n    return menu\n      ? item\n        ? item.menuText || item.text\n        : undefined\n      : item\n        ? item.text\n        : undefined;\n  }, [menu, item]);\n\n  if (item && item.comp == 'spacer') {\n    return <Spacer />;\n  } else if (item && item.comp == 'separator') {\n    return <Separator menu={menu} />;\n  } else {\n    const ReactComponent = itemComponent;\n    const className = [\n      'wx-tb-element',\n      item && item.css ? item.css : '',\n      item && item.spacer ? 'wx-spacer' : '',\n      menu ? 'wx-menu' : '',\n    ]\n      .filter(Boolean)\n      .join(' ');\n\n    return (\n      <div\n        className={'wx-KVAsgMam ' + className}\n        data-id={item ? item.id : undefined}\n      >\n        <ReactComponent\n          value={value}\n          onChange={detectChange}\n          onClick={handleClick}\n          text={text}\n          menu={menu}\n          {...omitKey(item)}\n        />\n      </div>\n    );\n  }\n}\n\nexport default BarComponent;\n", "import { useState } from 'react';\nimport BarComponent from './BarComponent.jsx';\nimport { Dropdown } from '@svar-ui/react-core';\nimport './Group.css';\n\nexport default function Group({\n  item,\n  values = null,\n  menu = false,\n  onChange,\n  onClick,\n}) {\n  const [collapsedState, setCollapsedState] = useState(true);\n\n  const oncancel = () => setCollapsedState(true);\n  const show = () => setCollapsedState(false);\n\n  const handleClick = (ev) => {\n    oncancel();\n    onClick && onClick(ev);\n  };\n\n  const rootClassName = [\n    'wx-wSVFAGym',\n    'wx-tb-group',\n    item.css || '',\n    item.layout == 'column' ? 'wx-column' : '',\n    item.collapsed && !menu ? 'wx-group-collapsed' : '',\n  ]\n    .filter(Boolean)\n    .join(' ');\n\n  return (\n    <div className={rootClassName}>\n      {item.collapsed && !menu ? (\n        <>\n          <div className=\"wx-wSVFAGym wx-collapsed\" onClick={show}>\n            {item.icon ? (\n              <i className={`wx-wSVFAGym icon ${item.icon}`}></i>\n            ) : null}\n            {item.text ? (\n              <div className=\"wx-wSVFAGym wx-label-text\">{item.text}</div>\n            ) : null}\n            {item.text && !item.icon ? (\n              <i className=\"wx-wSVFAGym wx-label-arrow wxi-angle-down\"></i>\n            ) : null}\n          </div>\n          {!collapsedState ? (\n            <Dropdown width=\"\" oncancel={oncancel}>\n              <div className=\"wx-wSVFAGym wx-drop-group\">\n                <Group\n                  item={{ ...item, text: '', collapsed: false }}\n                  values={values}\n                  menu={menu}\n                  onChange={onChange}\n                  onClick={handleClick}\n                />\n              </div>\n            </Dropdown>\n          ) : null}\n        </>\n      ) : (\n        <>\n          <div className=\"wx-wSVFAGym wx-tb-body\">\n            {item.items.map((sub, index) =>\n              sub.items ? (\n                <Group\n                  key={sub.id || index}\n                  item={sub}\n                  values={values}\n                  onClick={handleClick}\n                  onChange={onChange}\n                />\n              ) : (\n                <BarComponent\n                  key={sub.id || index}\n                  item={sub}\n                  values={values}\n                  onClick={handleClick}\n                  onChange={onChange}\n                />\n              ),\n            )}\n          </div>\n          {item.text ? (\n            <div className=\"wx-wSVFAGym wx-label\">{item.text}</div>\n          ) : null}\n        </>\n      )}\n    </div>\n  );\n}\n", "import { useState, useRef } from 'react';\nimport BarComponent from './BarComponent.jsx';\nimport Group from './Group.jsx';\nimport { Dropdown, Button } from '@svar-ui/react-core';\nimport './Menu.css';\n\nfunction Menu({ items = [], css, values, width, onClick, onChange }) {\n  const [popup, setPopup] = useState(undefined);\n  const div = useRef(null);\n\n  function onCancel() {\n    setPopup(null);\n  }\n  function showMenu() {\n    setPopup(true);\n  }\n  function menuClick(ev) {\n    onCancel();\n    onClick && onClick(ev);\n  }\n\n  return (\n    <div\n      className={`wx-Yo6BuX0p wx-menu ${css || ''}`}\n      ref={div}\n      data-id=\"$menu\"\n    >\n      <Button icon=\"wxi-dots-h\" onClick={showMenu} />\n      {popup ? (\n        <Dropdown width={`${width}px`} onCancel={onCancel}>\n          <div className=\"wx-Yo6BuX0p wx-drop-menu\">\n            {items.map((item, index) =>\n              item.items ? (\n                <Group\n                  key={item.id || index}\n                  item={item}\n                  values={values}\n                  menu={true}\n                  onClick={menuClick}\n                  onChange={onChange}\n                />\n              ) : (\n                <BarComponent\n                  key={item.id || index}\n                  item={item}\n                  values={values}\n                  menu={true}\n                  onClick={menuClick}\n                  onChange={onChange}\n                />\n              ),\n            )}\n          </div>\n        </Dropdown>\n      ) : null}\n    </div>\n  );\n}\n\nexport default Menu;\n", "import { useState, useEffect, useMemo, useRef } from 'react';\nimport Menu from './Menu.jsx';\nimport Group from './Group.jsx';\nimport BarComponent from './BarComponent.jsx';\n\nimport { uid } from '@svar-ui/lib-dom';\nimport { useWritableProp } from '@svar-ui/lib-react';\nimport './Toolbar.css';\n\nfunction normalize(list) {\n  list.forEach((item) => {\n    if (!item.id) item.id = uid();\n  });\n  return list;\n}\n\nfunction Toolbar(props) {\n  const {\n    items: itemsProp,\n    menuCss = '',\n    css = '',\n    values: valuesProp,\n    overflow = 'menu',\n    onClick,\n    onChange,\n  } = props;\n\n  const [items, setItems] = useWritableProp(itemsProp || []);\n  const [values, setValues] = useWritableProp(valuesProp || null);\n\n  const visibleItems = useMemo(() => normalize(items), [items]);\n\n  const divRef = useRef(null);\n  const lastToolbarStateRef = useRef(-1);\n\n  const [menuItems, setMenuItems] = useState([]);\n\n  // refs to keep latest values for callbacks created once\n  const itemsRef = useRef(visibleItems);\n  useEffect(() => {\n    itemsRef.current = visibleItems;\n  }, [items]);\n\n  const overflowRef = useRef(overflow);\n  useEffect(() => {\n    overflowRef.current = overflow;\n  }, [overflow]);\n\n  const menuItemsRef = useRef(menuItems);\n  useEffect(() => {\n    menuItemsRef.current = menuItems;\n  }, [menuItems]);\n\n  const scheduleOverflowCheckRef = useRef(false);\n\n  function handleChange(ev) {\n    if (values) {\n      values[ev.item.key] = ev.value;\n      // trigger update similar to `values = values;`\n      setValues({ ...values });\n    }\n    onChange && onChange(ev);\n  }\n\n  function getTotalWidth() {\n    const div = divRef.current;\n    if (!div) return 0;\n    const nodes = div.children;\n    const it = itemsRef.current || [];\n    let sum = 0;\n    for (let i = 0; i < it.length; i++) {\n      if (it[i].comp !== 'spacer') {\n        sum += nodes[i].clientWidth;\n        if (it[i].comp === 'separator') sum += 8;\n      }\n    }\n    return sum;\n  }\n\n  function collapseGroups() {\n    const div = divRef.current;\n    const it = itemsRef.current || [];\n    if (!div) return;\n\n    for (let i = it.length - 1; i >= 0; i--) {\n      if (it[i].items && !it[i].collapsed) {\n        it[i].collapsed = true;\n        it[i].$width = div.children[i].offsetWidth;\n        // schedule after DOM update\n        scheduleOverflowCheckRef.current = true;\n\n        // trigger update similar to `items = [...items];`\n        setItems([...it]);\n        return;\n      }\n    }\n  }\n\n  function expandGroups(freeSpace) {\n    const div = divRef.current;\n    const it = itemsRef.current || [];\n    if (!div) return;\n\n    for (let i = 0; i < it.length; i++) {\n      if (it[i].collapsed && it[i].$width) {\n        if (it[i].$width - div.children[i].offsetWidth < freeSpace + 10) {\n          it[i].collapsed = false;\n          // schedule after DOM update\n          scheduleOverflowCheckRef.current = true;\n        }\n\n        setItems([...it]);\n        return;\n      }\n    }\n  }\n\n  function processOverflow() {\n    const div = divRef.current;\n    if (!div) return;\n    const it = itemsRef.current || [];\n    const ov = overflowRef.current;\n\n    if (ov === 'wrap') return;\n\n    const visibleWidth = div.clientWidth;\n    const fullWidth = div.scrollWidth;\n    const needMenu = fullWidth > visibleWidth;\n\n    if (needMenu) {\n      if (ov === 'collapse') return collapseGroups(visibleWidth);\n      const nodes = div.children;\n      let sum = 0;\n\n      for (let i = 0; i < it.length; i++) {\n        sum += nodes[i].clientWidth;\n        if (it[i].comp === 'separator') sum += 8;\n        if (sum > visibleWidth - 40) {\n          if (lastToolbarStateRef.current === i) return;\n          lastToolbarStateRef.current = i;\n\n          const newMenuItems = [];\n          for (let j = i; j < it.length; j++) {\n            newMenuItems.push(it[j]);\n            nodes[j].style.visibility = 'hidden';\n          }\n          if (i > 0 && it[i - 1].comp === 'separator') {\n            nodes[i - 1].style.visibility = 'hidden';\n          }\n          setMenuItems(newMenuItems);\n          break;\n        }\n        nodes[i].style.visibility = '';\n      }\n    } else {\n      const freeWidth = visibleWidth - getTotalWidth();\n      if (freeWidth <= 0) return;\n      if (ov === 'collapse') return expandGroups(freeWidth);\n\n      if ((menuItemsRef.current || []).length) {\n        lastToolbarStateRef.current = null;\n        const nodes = div.children;\n        for (let i = 0; i < it.length; i++) {\n          nodes[i].style.visibility = '';\n        }\n        setMenuItems([]);\n      }\n    }\n  }\n\n  // run processOverflow after DOM updates triggered by collapse/expand\n  useEffect(() => {\n    if (scheduleOverflowCheckRef.current) {\n      scheduleOverflowCheckRef.current = false;\n      processOverflow();\n    }\n  }, [items]);\n\n  useEffect(() => {\n    const ro = new ResizeObserver(() => processOverflow());\n    if (divRef.current) ro.observe(divRef.current);\n\n    return () => {\n      ro.disconnect();\n    };\n  }, []);\n\n  return (\n    <div\n      className={`wx-VdPSJj8y wx-toolbar ${css || ''} ${overflow === 'wrap' ? 'wx-wrap' : ''}`}\n      ref={divRef}\n    >\n      {visibleItems.map((item) =>\n        item.items ? (\n          <Group\n            key={item.id}\n            item={item}\n            values={values}\n            onClick={onClick}\n            onChange={handleChange}\n          />\n        ) : (\n          <BarComponent\n            key={item.id}\n            item={item}\n            values={values}\n            onClick={onClick}\n            onChange={handleChange}\n          />\n        ),\n      )}\n      {!!menuItems.length && (\n        <Menu\n          items={menuItems}\n          css={menuCss}\n          values={values}\n          onClick={onClick}\n          onChange={handleChange}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default Toolbar;\n", "import { Button as CoreButton } from '@svar-ui/react-core';\nimport './Button.css';\n\nfunction Button(props) {\n  const { icon, text = '', css, type, disabled, menu, onClick } = props;\n\n  if (menu) {\n    return (\n      <div className=\"wx-HXpG4gnx wx-item\" onClick={onClick}>\n        <i className={`wx-HXpG4gnx ${icon || 'wxi-empty'} ${css || ''}`} />\n        {text}\n      </div>\n    );\n  }\n\n  return (\n    <CoreButton\n      icon={icon}\n      type={type}\n      css={css}\n      text={text}\n      disabled={disabled}\n      onClick={onClick}\n    />\n  );\n}\n\nexport default Button;\n", "import './Label.css';\n\nexport default function Label(props) {\n  const { text, value, children } = props;\n\n  if (children) {\n    return <div className=\"wx-PTEZGYcj wx-label\">{children()}</div>;\n  } else {\n    return <div className=\"wx-PTEZGYcj wx-label\">{value || text}</div>;\n  }\n}\n", "import { Button } from '@svar-ui/react-core';\nimport './Icon.css';\n\nexport default function Icon(props) {\n  const { icon, text, css, type, disabled, menu, onClick } = props;\n\n  if (menu) {\n    return (\n      <div className=\"wx-3cuSqONJ wx-item\" onClick={onClick}>\n        {icon ? (\n          <i className={`wx-3cuSqONJ ${icon || ''} ${css || ''}`}></i>\n        ) : null}\n        {text}\n      </div>\n    );\n  }\n\n  return (\n    <Button\n      icon={icon}\n      type={type}\n      css={css}\n      title={text}\n      disabled={disabled}\n      onClick={onClick}\n    />\n  );\n}\n", "import './Item.css';\n\nfunction Item({ id = '', text = '', css = '', icon = '', onClick }) {\n  function handleClick() {\n    onClick && onClick({ id });\n  }\n\n  return (\n    <div className={`wx-U0Bx7pIR wx-label ${css}`} onClick={handleClick}>\n      {icon ? <i className={'wx-U0Bx7pIR ' + icon}></i> : null}\n      {text}\n    </div>\n  );\n}\n\nexport default Item;\n", "import Toolbar from './components/Toolbar.jsx';\nimport { registerToolbarItem } from './helpers.js';\n\nimport Separator from './buttons/Separator.jsx';\nimport Spacer from './buttons/Spacer.jsx';\nimport Button from './buttons/Button.jsx';\nimport Label from './buttons/Label.jsx';\nimport Icon from './buttons/Icon.jsx';\nimport Item from './buttons/Item.jsx';\n\nregisterToolbarItem('button', Button);\nregisterToolbarItem('separator', Separator);\nregisterToolbarItem('spacer', Spacer);\nregisterToolbarItem('label', Label);\nregisterToolbarItem('item', Item);\nregisterToolbarItem('icon', Icon);\n\nexport { Toolbar, registerToolbarItem };\n", "import { createContext } from 'react';\n\nconst store = createContext(null);\nexport default store;\n", "export function onresize(node, handler) {\n  const ro = new ResizeObserver((data) => {\n    requestAnimationFrame(() => handler(data[0].contentRect));\n  });\n\n  ro.observe(node.parentNode);\n\n  return {\n    destroy() {\n      ro.disconnect();\n    },\n  };\n}\n", "import { locate, id } from '@svar-ui/lib-dom';\n\nconst SHIFT = 5;\nconst LONG_TOUCH_DELAY = 700;\n\nfunction getID(node) {\n  return id(node.getAttribute('data-id'));\n}\n\nexport function getOffset(node) {\n  const box = node.getBoundingClientRect();\n  const body = document.body;\n  const top = box.top + body.scrollTop - body.clientTop || 0;\n  const left = box.left + body.scrollLeft - body.clientLeft || 0;\n  return {\n    y: Math.round(top),\n    x: Math.round(left),\n    width: node.offsetWidth,\n    height: node.offsetHeight,\n  };\n}\n\nexport function getPos(ev, node) {\n  const offset = getOffset(node);\n  return { x: ev.clientX - offset.x, y: ev.clientY - offset.y };\n}\n\nexport function reorder(node, config) {\n  const cfg = config.current;\n  let context = null;\n  let touchTimer, startPos;\n  let started = false,\n    touched = false;\n  const container = document.createElement('DIV');\n  container.className = 'wx-drag-zone';\n  container.setAttribute('tabindex', -1);\n\n  function resetTimer() {\n    clearTimeout(touchTimer);\n    touchTimer = null;\n  }\n\n  function down(ev) {\n    const source = locate(ev);\n    if (!source) return;\n\n    context = {\n      container,\n      sourceNode: ev.target,\n      from: getID(source),\n      pos: getPos(ev, node),\n    };\n    startPos = context.pos;\n    move(ev);\n  }\n\n  function move(ev) {\n    if (!context) return;\n    const p = (context.pos = getPos(ev, node));\n\n    if (!started) {\n      if (\n        !touched &&\n        !ev?.target?.getAttribute('draggable-data') &&\n        Math.abs(startPos.x - p.x) < SHIFT &&\n        Math.abs(startPos.y - p.y) < SHIFT\n      )\n        return;\n      else {\n        if (start(ev) === false) return end();\n      }\n    }\n\n    if (touched) {\n      const scrollLeft =\n        window.scrollX ||\n        document.documentElement.scrollLeft ||\n        document.body.scrollLeft;\n      const scrollTop =\n        window.scrollY ||\n        document.documentElement.scrollTop ||\n        document.body.scrollTop;\n\n      context.targetNode = document.elementFromPoint(\n        ev.pageX - scrollLeft,\n        ev.pageY - scrollTop,\n      );\n    } else context.targetNode = ev.target;\n\n    if (cfg.move) cfg.move(ev, context);\n\n    container.style.left = -(context.offset ? context.offset.x : 0) + 'px';\n    container.style.top =\n      context.pos.y + (context.offset ? context.offset.y : 0) + 'px';\n  }\n\n  function up(ev) {\n    if (container.parentNode) container.parentNode.removeChild(container);\n    container.innerHTML = '';\n\n    if (started && cfg.end) cfg.end(ev, context);\n    context = startPos = null;\n\n    end();\n  }\n\n  function handleMouseDown(ev) {\n    if (cfg.getReorder && !cfg.getReorder()) return;\n    if (ev.button !== 0) return;\n\n    // native dragscroll prevention\n    preventUserSelect(ev);\n\n    window.addEventListener('mousemove', handleMouseMove);\n    window.addEventListener('mouseup', handleMouseUp);\n\n    down(ev);\n  }\n\n  function handleMouseMove(ev) {\n    move(ev);\n  }\n\n  function handleMouseUp(ev) {\n    up(ev);\n  }\n\n  function handleTouchStart(ev) {\n    if (cfg.getReorder && !cfg.getReorder()) return;\n\n    touchTimer = setTimeout(() => {\n      touched = true;\n      down(ev.touches[0]);\n    }, LONG_TOUCH_DELAY);\n\n    // prevent user selection on touch (pre-drag)\n    preventUserSelect(ev);\n\n    function handleTouchEnd() {\n      if (touchTimer) resetTimer();\n\n      // removed elements will still have touch events pointed at them, and these events won't necessarily bubble up\n      // this creates an issue where the touchmove/touchend events are no longer called if we attach them directly to the parent node, and the event target is removed from DOM\n      // best practice suggests attaching event handlers directly to the touch event target\n      // in this case, touch events will continue to fire normally\n      // https://developer.mozilla.org/en-US/docs/Web/API/Touch/target\n\n      ev.target.removeEventListener('touchmove', handleTouchMove);\n      ev.target.removeEventListener('touchend', handleTouchEnd);\n\n      up(ev);\n    }\n\n    ev.target.addEventListener('touchmove', handleTouchMove);\n    ev.target.addEventListener('touchend', handleTouchEnd);\n    node.addEventListener('contextmenu', handleContext);\n  }\n\n  function handleTouchMove(ev) {\n    if (started) {\n      ev.preventDefault();\n      move(ev.touches[0]);\n    } else if (touchTimer) resetTimer();\n  }\n\n  function handleContext(ev) {\n    if (started || touchTimer) {\n      ev.preventDefault();\n      return false;\n    }\n  }\n\n  function preventDefault(ev) {\n    ev.preventDefault();\n  }\n\n  function preventUserSelect(ev) {\n    if (!cfg.getDraggableInfo) return;\n    const { hasDraggable } = cfg.getDraggableInfo();\n\n    if (!hasDraggable || ev.target.getAttribute('draggable-data')) {\n      document.body.style.userSelect = 'none';\n      document.body.style.webkitUserSelect = 'none';\n    }\n  }\n\n  function start(ev) {\n    started = true;\n\n    if (cfg.start) {\n      if (cfg.start(ev, context) === false) return false;\n      else {\n        node.appendChild(container);\n        document.body.style.cursor = 'move';\n      }\n    }\n  }\n\n  function end(full) {\n    started = touched = false;\n    document.body.style.cursor = '';\n    document.body.style.userSelect = '';\n    document.body.style.webkitUserSelect = '';\n\n    window.removeEventListener('mousemove', handleMouseMove);\n    window.removeEventListener('mouseup', handleMouseUp);\n\n    if (full) {\n      node.removeEventListener('mousedown', handleMouseDown);\n      node.removeEventListener('touchstart', handleTouchStart);\n      node.removeEventListener('dragstart', preventDefault);\n    }\n  }\n\n  node.addEventListener('mousedown', handleMouseDown);\n  node.addEventListener('touchstart', handleTouchStart);\n  node.addEventListener('dragstart', preventDefault);\n\n  return {\n    destroy() {\n      end(true);\n    },\n  };\n}\n", "import { getPos } from './reorder';\n\nconst SCROLL_SPEED_DELTA = 0.004;\n\nfunction initScrollState() {\n  return {\n    dirX: 0,\n    dirY: 0,\n    scrollSpeedFactor: 1,\n  };\n}\n\nexport function tryAutoScroll(ev, box, context, dragScrollConfig) {\n  const { node, left, top, bottom, sense, xScroll, yScroll } = dragScrollConfig;\n  const rPos = getPos(ev, node);\n\n  if (!context.scrollState) context.scrollState = initScrollState();\n\n  let newDirX = 0;\n  let newDirY = 0;\n\n  if (rPos.x < left + sense) {\n    newDirX = -1;\n  } else if (rPos.x > box.width - sense) {\n    newDirX = 1;\n  }\n\n  if (rPos.y < top + Math.round(sense / 2)) {\n    newDirY = -1;\n  } else if (rPos.y > box.height - bottom - Math.round(sense / 2)) {\n    newDirY = 1;\n  }\n\n  if (\n    context.scrollState.dirX !== newDirX ||\n    context.scrollState.dirY !== newDirY\n  ) {\n    resetAutoScroll(context);\n    context.scrollState.dirX = newDirX;\n    context.scrollState.dirY = newDirY;\n  }\n\n  if (\n    (xScroll && context.scrollState.dirX !== 0) ||\n    (yScroll && context.scrollState.dirY !== 0)\n  ) {\n    startAutoScroll(context, dragScrollConfig, {\n      x: context.scrollState.dirX,\n      y: context.scrollState.dirY,\n    });\n  }\n}\n\nexport function startAutoScroll(context, config, dir) {\n  if (context.autoScrollTimer) return;\n\n  context.autoScrollTimer = setTimeout(() => {\n    context.activeAutoScroll = setInterval(\n      autoScroll,\n      15,\n      context,\n      config,\n      dir,\n    );\n  }, 250);\n}\n\nexport function resetAutoScroll(context) {\n  context.scrollSpeedFactor = 1;\n  if (context.autoScrollTimer) {\n    context.autoScrollTimer = clearTimeout(context.autoScrollTimer);\n    context.activeAutoScroll = clearInterval(context.activeAutoScroll);\n  }\n}\n\nfunction autoScroll(context, config, dir) {\n  const { x, y } = dir;\n\n  context.scrollSpeedFactor += SCROLL_SPEED_DELTA;\n\n  if (x !== 0) autoXScroll(context, config, x);\n  if (y !== 0) autoYScroll(context, config, y);\n}\n\nfunction autoYScroll(context, config, dir) {\n  const scroll = config.node.scrollTop;\n\n  autoScrollTo(\n    scroll + Math.round(config.sense / 3) * context.scrollSpeedFactor * dir,\n    'scrollTop',\n    config,\n  );\n}\n\nfunction autoXScroll(context, config, dir) {\n  const scroll = config.node.scrollLeft;\n\n  autoScrollTo(\n    scroll + Math.round(config.sense / 3) * context.scrollSpeedFactor * dir,\n    'scrollLeft',\n    config,\n  );\n}\n\nfunction autoScrollTo(value, mode, config) {\n  config.node[mode] = value;\n}\n", "export function getStyle(width, flexgrow, fixed, left, right, height) {\n  const style = {};\n\n  if (width) {\n    style.width = `${width}px`;\n    style.minWidth = `${width}px`;\n  }\n\n  if (flexgrow) {\n    style.flexGrow = flexgrow;\n  }\n\n  if (height) {\n    style.height = `${height}px`;\n  }\n\n  if (fixed) {\n    style.position = 'sticky';\n    if (fixed.left) {\n      style.left = `${left}px`;\n    }\n    if (fixed.right) {\n      style.right = `${right}px`;\n    }\n  }\n\n  return style;\n}\n\nexport function getCssName(column, cell, columnStyle) {\n  let css = '';\n\n  if (column.fixed) {\n    for (const pos in column.fixed) {\n      css += column.fixed[pos] === -1 ? 'wx-shadow ' : 'wx-fixed ';\n    }\n  }\n  css += cell.rowspan > 1 ? 'wx-rowspan ' : '';\n  css += cell.colspan > 1 ? 'wx-colspan ' : '';\n  css += cell.vertical ? 'wx-vertical ' : '';\n  css += columnStyle ? columnStyle(column) + ' ' : '';\n  return css;\n}\n", "import { useEffect, useMemo, useRef, useContext, useCallback } from 'react';\nimport storeContext from '../context';\nimport { useStore } from '@svar-ui/lib-react';\nimport { useWritableProp } from '@svar-ui/lib-react';\nimport { getStyle } from '../helpers/columnWidth';\nimport { getRenderValue } from '@svar-ui/grid-store';\nimport './Cell.css';\n\nexport default function Cell(props) {\n  const {\n    row,\n    column,\n    cellStyle = null,\n    columnStyle = null,\n    children,\n  } = props;\n\n  const [focusable, setFocusable] = useWritableProp(props.focusable);\n\n  const api = useContext(storeContext);\n  const focusCell = useStore(api, 'focusCell');\n  const search = useStore(api, 'search');\n  const reorder = useStore(api, 'reorder');\n\n  const shouldHighlight = useMemo(\n    () => search?.rows[row.id] && search.rows[row.id][column.id],\n    [search, row.id, column.id],\n  );\n\n  const style = useMemo(\n    () =>\n      getStyle(\n        column.width,\n        column.flexgrow,\n        column.fixed,\n        column.left,\n        column.right,\n      ),\n    [column.width, column.flexgrow, column.fixed, column.left, column.right],\n  );\n\n  function buildCellCss(columnStyleFn, cellStyleFn) {\n    let css = 'wx-cell';\n    css += column.fixed\n      ? ' ' + (column.fixed === -1 ? 'wx-shadow' : 'wx-fixed')\n      : '';\n    css += columnStyleFn ? ' ' + columnStyleFn(column) : '';\n    css += cellStyleFn ? ' ' + cellStyleFn(row, column) : '';\n    css += column.treetoggle ? ' wx-tree-cell' : '';\n    return css;\n  }\n\n  const css = useMemo(\n    () => buildCellCss(columnStyle, cellStyle),\n    [columnStyle, cellStyle, column, row],\n  );\n\n  const isDraggable = useMemo(() => {\n    return typeof column.draggable === 'function'\n      ? column.draggable(row, column) !== false\n      : column.draggable;\n  }, [column, row]);\n\n  const cellElRef = useRef(null);\n\n  useEffect(() => {\n    if (cellElRef.current && focusable) {\n      const needFocus =\n        focusCell?.row === row.id && focusCell?.column === column.id;\n      if (needFocus) cellElRef.current.focus();\n    }\n  }, [focusCell, focusable, row.id, column.id]);\n\n  const toggleFocusAction = useCallback(() => {\n    if (focusable && !focusCell) {\n      api.exec('focus-cell', {\n        row: row.id,\n        column: column.id,\n        eventSource: 'focus',\n      });\n    }\n  }, [api, focusable, focusCell, row.id, column.id]);\n\n  useEffect(() => {\n    return () => {\n      if (focusable && focusCell) {\n        api.exec('focus-cell', { eventSource: 'destroy' });\n        setFocusable(false);\n      }\n    };\n  }, [api, setFocusable]);\n\n  function highlightText(text) {\n    const regex = new RegExp(`(${search.value.trim()})`, 'gi');\n    const parts = String(text).split(regex);\n\n    return parts.map((text) => ({ text, highlight: regex.test(text) }));\n  }\n\n  const className = useMemo(() => {\n    const shadowToggle =\n      (column.fixed && column.fixed.left === -1) || column.fixed.right === -1;\n    const fixedRightToggle = column.fixed && column.fixed.right;\n    return [\n      css,\n      shadowToggle ? 'wx-shadow' : '',\n      fixedRightToggle ? 'wx-fixed-right' : '',\n    ]\n      .filter(Boolean)\n      .join(' ');\n  }, [css, column]);\n\n  const CellComponent = column.cell;\n\n  return (\n    <div\n      className={'wx-TSCaXsGV ' + className}\n      ref={cellElRef}\n      onFocus={toggleFocusAction}\n      style={style}\n      data-row-id={row.id}\n      data-col-id={column.id}\n      tabIndex={focusable ? '0' : '-1'}\n      role={'gridcell'}\n      aria-colindex={column._colindex}\n      aria-readonly={!column.editor ? true : undefined}\n    >\n      {reorder && column.draggable ? (\n        isDraggable ? (\n          <i\n            // eslint-disable-next-line react/no-unknown-property\n            draggable-data=\"true\"\n            className=\"wx-TSCaXsGV wx-draggable wxi-drag\"\n          ></i>\n        ) : (\n          <i className=\"wx-TSCaXsGV wx-draggable-stub\"></i>\n        )\n      ) : null}\n\n      {column.treetoggle ? (\n        <>\n          <span style={{ marginLeft: `${row.$level * 28}px` }}></span>\n          {row.$count ? (\n            <i\n              data-action=\"toggle-row\"\n              className={`wx-TSCaXsGV wx-table-tree-toggle wxi-menu-${\n                row.open !== false ? 'down' : 'right'\n              }`}\n            ></i>\n          ) : null}\n        </>\n      ) : null}\n\n      {CellComponent ? (\n        <CellComponent\n          api={api}\n          row={row}\n          column={column}\n          onAction={({ action, data }) => api.exec(action, data)}\n        />\n      ) : children ? (\n        children()\n      ) : shouldHighlight ? (\n        <span>\n          {highlightText(getRenderValue(row, column)).map(\n            ({ highlight, text }, index) =>\n              highlight ? (\n                <mark key={index} className=\"wx-TSCaXsGV wx-search\">\n                  {text}\n                </mark>\n              ) : (\n                <span key={index}>{text}</span>\n              ),\n          )}\n        </span>\n      ) : (\n        getRenderValue(row, column)\n      )}\n    </div>\n  );\n}\n", "export function resize(node, config) {\n  let x, dx;\n\n  function down(ev) {\n    x = ev.clientX;\n\n    node.style.opacity = 1;\n\n    document.body.style.cursor = 'ew-resize';\n    document.body.style.userSelect = 'none';\n\n    window.addEventListener('mousemove', move);\n    window.addEventListener('mouseup', up);\n\n    if (config && config.down) config.down(node);\n  }\n\n  function move(ev) {\n    dx = ev.clientX - x;\n\n    if (config && config.move) config.move(dx);\n  }\n\n  function up() {\n    node.style.opacity = '';\n\n    document.body.style.cursor = '';\n    document.body.style.userSelect = '';\n\n    if (config && config.up) config.up(dx);\n\n    window.removeEventListener('mousemove', move);\n    window.removeEventListener('mouseup', up);\n  }\n\n  node.addEventListener('mousedown', down);\n\n  return {\n    destroy() {\n      node.removeEventListener('mousedown', down);\n    },\n  };\n}\n", "import { Text } from '@svar-ui/react-core';\nimport './Text.css';\n\nexport default function Component({ filter, column, action, filterValue }) {\n  function filterRows({ value }) {\n    action({ value, key: column.id });\n  }\n\n  return (\n    <Text\n      {...(filter.config ?? {})}\n      value={filterValue}\n      onChange={filterRows}\n    />\n  );\n}\n", "import { useMemo, useContext } from 'react';\nimport { RichSelect } from '@svar-ui/react-core';\nimport { getValue } from '@svar-ui/grid-store';\nimport storeContext from '../../context';\nimport { useStore } from '@svar-ui/lib-react';\nimport './Richselect.css';\n\nexport default function Richselect({ filter, column, action, filterValue }) {\n  const api = useContext(storeContext);\n  const data = useStore(api, 'flatData');\n\n  const options = useMemo(\n    () => filter?.config?.options || column?.options || getOptions(data),\n    [filter, column, data],\n  );\n\n  const template = useMemo(() => filter?.config?.template, [filter]);\n\n  function getOptions() {\n    const options = [];\n    data.forEach((d) => {\n      const value = getValue(d, column);\n      if (!options.includes(value)) options.push(value);\n    });\n    return options.map((opt) => ({ id: opt, label: opt }));\n  }\n\n  function filterRows({ value }) {\n    action({ value, key: column.id });\n  }\n\n  function handleKeyDown(ev) {\n    if (ev.key !== 'Tab') ev.preventDefault();\n  }\n\n  return (\n    <div style={{ width: '100%' }} onKeyDown={handleKeyDown}>\n      <RichSelect\n        placeholder={''}\n        clear={true}\n        {...(filter?.config ?? {})}\n        options={options}\n        value={filterValue}\n        onChange={filterRows}\n      >\n        {(option) => (template ? template(option) : option.label)}\n      </RichSelect>\n    </div>\n  );\n}\n", "import Text from './Text.jsx';\nimport Richselect from './Richselect.jsx';\n\nexport const filters = {\n  text: Text,\n  richselect: Richselect,\n};\n", "import { useContext, useMemo } from 'react';\nimport storeContext from '../../context';\nimport { filters } from './filters';\nimport { useStore } from '@svar-ui/lib-react';\n\nexport default function Filter({ filter, column }) {\n  const api = useContext(storeContext);\n  const filterValues = useStore(api, 'filterValues');\n\n  function filterRows(data) {\n    api.exec('filter-rows', data);\n  }\n\n  const Component = useMemo(() => filters[filter.type], [filter.type]);\n\n  return (\n    <Component\n      filter={filter}\n      column={column}\n      action={filterRows}\n      filterValue={filterValues[column.id]}\n    />\n  );\n}\n", "import { useEffect, useMemo, useCallback, useRef, useContext } from 'react';\nimport storeContext from '../context';\nimport { useStore } from '@svar-ui/lib-react';\nimport { resize } from '../helpers/actions/resize';\nimport { getCssName, getStyle } from '../helpers/columnWidth';\nimport Filter from './inlineFilters/Filter.jsx';\nimport './HeaderCell.css';\n\nexport default function HeaderCell(props) {\n  const {\n    cell,\n    column,\n    row,\n    lastRow,\n    sortRow,\n    columnStyle,\n    bodyHeight,\n    hasSplit,\n  } = props;\n\n  const api = useContext(storeContext);\n  const sortMarksValue = useStore(api, 'sortMarks');\n\n  const sortMark = useMemo(() => {\n    return sortMarksValue ? sortMarksValue[column.id] : undefined;\n  }, [sortMarksValue, column.id]);\n\n  const startRef = useRef();\n\n  const down = useCallback(\n    (node) => {\n      startRef.current = cell.flexgrow\n        ? node.parentNode.clientWidth\n        : cell.width;\n    },\n    [cell.flexgrow, cell.width],\n  );\n\n  const resizeColumn = useCallback(\n    (dx, inProgress) => {\n      api.exec('resize-column', {\n        id: cell.id,\n        width: Math.max(1, (startRef.current || 0) + dx),\n        inProgress,\n      });\n    },\n    [api, cell.id],\n  );\n\n  const move = useCallback((dx) => resizeColumn(dx, true), [resizeColumn]);\n  const up = useCallback((dx) => resizeColumn(dx, false), [resizeColumn]);\n\n  const sort = useCallback(\n    (ev) => {\n      if (!column.sort || cell.filter) return;\n      let order = sortMark?.order;\n      if (order) {\n        order = order === 'asc' ? 'desc' : 'asc';\n      }\n      api.exec('sort-rows', { key: cell.id, add: ev.ctrlKey, order });\n    },\n    [api, cell.id, cell.filter, column.sort, sortMark?.order],\n  );\n\n  const collapse = useCallback(\n    (ev) => {\n      if (ev) ev.stopPropagation();\n      api.exec('collapse-column', { id: cell.id, row });\n    },\n    [api, cell.id, row],\n  );\n\n  const toggleCollapseColumn = useCallback(\n    (ev) => {\n      if (ev.key === 'Enter') collapse();\n    },\n    [collapse],\n  );\n\n  const toggleSortColumn = useCallback(\n    (ev) => {\n      if (ev.key === 'Enter' && !cell.filter) sort(ev);\n    },\n    [sort, cell.filter],\n  );\n\n  const isCollapsed = useMemo(\n    () => cell.collapsed && column.collapsed,\n    [cell.collapsed, column.collapsed],\n  );\n  const overlay = useMemo(\n    () => isCollapsed && !hasSplit && cell.collapsible !== 'header',\n    [isCollapsed, hasSplit, cell.collapsible],\n  );\n  const collapsedTextStyle = useMemo(\n    () => (overlay ? { top: -bodyHeight / 2, position: 'absolute' } : {}),\n    [overlay, bodyHeight],\n  );\n\n  const cellStyle = useMemo(\n    () =>\n      getStyle(\n        cell.width,\n        cell.flexgrow,\n        column.fixed,\n        column.left,\n        cell.right ?? column.right,\n        cell.height + (isCollapsed && overlay ? bodyHeight : 0),\n      ),\n    [\n      cell.width,\n      cell.flexgrow,\n      column.fixed,\n      column.left,\n      cell.right,\n      column.right,\n      cell.height,\n      isCollapsed,\n      overlay,\n      bodyHeight,\n    ],\n  );\n\n  const css = useMemo(\n    () => getCssName(column, cell, columnStyle),\n    [column, cell, columnStyle],\n  );\n\n  const getCell = useCallback(() => {\n    return Object.fromEntries(\n      Object.entries(cell).filter(([key]) => key !== 'cell'),\n    );\n  }, [cell]);\n\n  const collapsedClassName = `wx-cell ${css} ${cell.css || ''} wx-collapsed`;\n  const normalClassName = [\n    'wx-cell',\n    css,\n    cell.css || '',\n    cell.filter ? 'wx-filter' : '',\n    column.fixed && column.fixed.right ? 'wx-fixed-right' : '',\n  ]\n    .filter(Boolean)\n    .join(' ');\n\n  const gripRef = useRef(null);\n  useEffect(() => {\n    const node = gripRef.current;\n    if (!node) return;\n    const cleanup = resize(node, { down, move, up });\n    return () => {\n      if (typeof cleanup === 'function') cleanup();\n    };\n  }, [down, move, up, resize]);\n\n  if (isCollapsed) {\n    return (\n      <div\n        className={'wx-RsQD74qC ' + collapsedClassName}\n        style={cellStyle}\n        role=\"button\"\n        aria-label={`Expand column ${cell.text || ''}`}\n        aria-expanded={!cell.collapsed}\n        tabIndex={0}\n        onKeyDown={toggleCollapseColumn}\n        onClick={collapse}\n        data-header-id={column.id}\n      >\n        <div className=\"wx-RsQD74qC wx-text\" style={collapsedTextStyle}>\n          {cell.text || ''}\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div\n      className={'wx-RsQD74qC ' + normalClassName}\n      style={cellStyle}\n      onClick={sort}\n      data-header-id={column.id}\n      tabIndex={!cell._hidden && column.sort && !cell.filter ? 0 : undefined}\n      role=\"columnheader\"\n      aria-colindex={cell._colindex}\n      aria-colspan={cell.colspan > 1 ? cell.colspan : undefined}\n      aria-rowspan={cell.rowspan > 1 ? cell.rowspan : undefined}\n      aria-sort={\n        !sortMark?.order || cell.filter\n          ? 'none'\n          : sortMark?.order === 'asc'\n            ? 'ascending'\n            : 'descending'\n      }\n      onKeyDown={toggleSortColumn}\n    >\n      {cell.collapsible ? (\n        <div\n          className=\"wx-RsQD74qC wx-collapse\"\n          role=\"button\"\n          aria-label={cell.collapsed ? 'Expand column' : 'Collapse column'}\n          aria-expanded={!cell.collapsed}\n          tabIndex={0}\n          onKeyDown={toggleCollapseColumn}\n          onClick={collapse}\n        >\n          <i\n            className={`wx-RsQD74qC wxi-angle-${cell.collapsed ? 'down' : 'right'}`}\n          ></i>\n        </div>\n      ) : null}\n\n      {cell.cell ? (\n        (() => {\n          const CellComponent = cell.cell;\n          return (\n            <CellComponent\n              api={api}\n              cell={getCell()}\n              column={column}\n              row={row}\n              onAction={({ action, data }) => api.exec(action, data)}\n            />\n          );\n        })()\n      ) : cell.filter ? (\n        <Filter filter={cell.filter} column={column} />\n      ) : (\n        <div className=\"wx-RsQD74qC wx-text\">{cell.text || ''}</div>\n      )}\n\n      {column.resize && lastRow && !cell._hidden ? (\n        <div\n          className=\"wx-RsQD74qC wx-grip\"\n          role=\"presentation\"\n          aria-label=\"Resize column\"\n          ref={gripRef}\n          onClick={(ev) => ev.stopPropagation()}\n        >\n          <div></div>\n        </div>\n      ) : null}\n\n      {sortRow ? (\n        <div className=\"wx-RsQD74qC wx-sort\">\n          {sortMark ? (\n            <>\n              {typeof sortMark.index !== 'undefined' ? (\n                <div className=\"wx-RsQD74qC wx-order\">{sortMark.index + 1}</div>\n              ) : null}\n              <i\n                className={`wx-RsQD74qC wxi-arrow-${sortMark.order === 'asc' ? 'up' : 'down'}`}\n              ></i>\n            </>\n          ) : null}\n        </div>\n      ) : null}\n    </div>\n  );\n}\n", "import React, { useMemo, useContext, useCallback } from 'react';\nimport storeContext from '../context';\nimport { getStyle, getCssName } from '../helpers/columnWidth';\nimport './FooterCell.css';\n\nfunction FooterCell({ cell, column, row, columnStyle }) {\n  const api = useContext(storeContext);\n\n  const style = useMemo(\n    () =>\n      getStyle(\n        cell?.width,\n        cell?.flexgrow,\n        column?.fixed,\n        column?.left,\n        cell?.right ?? column?.right,\n        cell?.height,\n      ),\n    [\n      cell?.width,\n      cell?.flexgrow,\n      column?.fixed,\n      column?.left,\n      cell?.right,\n      column?.right,\n      cell?.height,\n    ],\n  );\n\n  const css = useMemo(\n    () => getCssName(column, cell, columnStyle),\n    [column, cell, columnStyle],\n  );\n\n  const getCell = useCallback(() => {\n    return Object.fromEntries(\n      Object.entries(cell || {}).filter(([key]) => key !== 'cell'),\n    );\n  }, [cell]);\n\n  const className =\n    `wx-6Sdi3Dfd wx-cell ${css || ''} ${cell?.css || ''}` +\n    (column?.fixed && column?.fixed.right ? ' wx-fixed-right' : '');\n\n  return (\n    <div className={className} style={style}>\n      {!column?.collapsed && !cell?.collapsed ? (\n        cell?.cell ? (\n          React.createElement(cell.cell, {\n            api,\n            cell: getCell(),\n            column,\n            row,\n            onAction: ({ action, data }) => api.exec(action, data),\n          })\n        ) : (\n          <div className=\"wx-6Sdi3Dfd wx-text\">{cell?.text || ''}</div>\n        )\n      ) : null}\n    </div>\n  );\n}\n\nexport default FooterCell;\n", "import { useMemo, useContext } from 'react';\nimport HeaderCell from './HeaderCell.jsx';\nimport FooterCell from './FooterCell.jsx';\nimport { isCommunity } from '@svar-ui/grid-store';\nimport storeContext from '../context';\nimport './HeaderFooter.css';\nimport { useStore } from '@svar-ui/lib-react';\n\nfunction HeaderFooter({\n  deltaLeft,\n  contentWidth,\n  columns,\n  type = 'header',\n  columnStyle,\n  bodyHeight,\n}) {\n  const api = useContext(storeContext);\n  const sizes = useStore(api, '_sizes');\n  const split = useStore(api, 'split');\n\n  const rowHeights = useMemo(() => {\n    return sizes?.[`${type}RowHeights`];\n  }, [sizes, type]);\n\n  const renderedHeader = useMemo(() => {\n    let res = [];\n    if (columns && columns.length) {\n      const rowsCount = columns[0][type].length;\n      for (let ri = 0; ri < rowsCount; ri++) {\n        let inSpan = 0;\n        res.push([]);\n        columns.forEach((col, ci) => {\n          const cell = { ...col[type][ri] };\n          if (!inSpan) {\n            res[ri].push(cell);\n          }\n\n          if (cell.colspan > 1) {\n            inSpan = cell.colspan - 1;\n\n            if (!isCommunity()) {\n              if (col.right) {\n                // if column is fixed on the right and have colspan we need to recalculate right position\n                let right = col.right;\n                for (let i = 1; i < cell.colspan; i++) {\n                  right -= columns[ci + i].width;\n                }\n                cell.right = right;\n              }\n            }\n          } else if (inSpan) {\n            inSpan--;\n          }\n        });\n      }\n    }\n    return res;\n  }, [columns, type]);\n\n  const hasSplit = useMemo(() => {\n    return split?.left || split?.right;\n  }, [split]);\n\n  function getColumn(id) {\n    return columns.find((c) => c.id === id);\n  }\n\n  function isLast(cell, ind) {\n    let idx = ind;\n    if (cell.rowspan) idx += cell.rowspan - 1;\n    return idx === renderedHeader.length - 1;\n  }\n\n  function isSort(cell, ind, column) {\n    if (!column.sort) return false;\n    for (let i = renderedHeader.length - 1; i >= 0; i--) {\n      const cell = column.header[i];\n      if (!cell.filter && !cell._hidden) return ind === i;\n    }\n    return isLast(cell, ind);\n  }\n\n  return (\n    <div\n      className={`wx-sAsPVaUK wx-${type}`}\n      style={{ paddingLeft: `${deltaLeft}px`, width: `${contentWidth}px` }}\n      role=\"rowgroup\"\n    >\n      {renderedHeader.map((row, i) => (\n        <div\n          key={i}\n          className={\n            type === 'header' ? 'wx-sAsPVaUK wx-h-row' : 'wx-sAsPVaUK wx-f-row'\n          }\n          style={{ height: `${rowHeights?.[i]}px`, display: 'flex' }}\n          role=\"row\"\n        >\n          {row.map((cell) => {\n            const column = getColumn(cell.id);\n            return type === 'header' ? (\n              <HeaderCell\n                key={cell.id}\n                cell={cell}\n                columnStyle={columnStyle}\n                column={column}\n                row={i}\n                lastRow={isLast(cell, i)}\n                bodyHeight={bodyHeight}\n                sortRow={isSort(cell, i, column)}\n                hasSplit={hasSplit}\n              />\n            ) : (\n              <FooterCell\n                key={cell.id}\n                cell={cell}\n                columnStyle={columnStyle}\n                column={getColumn(cell.id)}\n                row={i}\n              />\n            );\n          })}\n        </div>\n      ))}\n    </div>\n  );\n}\n\nexport default HeaderFooter;\n", "import { useContext } from 'react';\nimport storeContext from '../context';\nimport './Overlay.css';\n\nexport default function Overlay({ overlay }) {\n  const api = useContext(storeContext);\n\n  function isComponent(prop) {\n    return typeof prop === 'function';\n  }\n\n  const Component = overlay;\n\n  return (\n    <div className=\"wx-1ty666CQ wx-overlay\">\n      {isComponent(overlay) ? (\n        <Component onAction={({ action, data }) => api.exec(action, data)} />\n      ) : (\n        overlay\n      )}\n    </div>\n  );\n}\n", "import { useEffect, useRef, useState } from 'react';\nimport './Text.css';\n\nfunction Text(props) {\n  const { actions, editor } = props;\n\n  const [value, setValue] = useState(editor?.value || '');\n\n  const node = useRef(null);\n  useEffect(() => {\n    if (node.current) node.current.focus();\n  }, []);\n\n  function updateValue() {\n    if (!node.current) return;\n    setValue(node.current.value);\n    actions.updateValue(node.current.value);\n  }\n\n  function closeAndSave({ key }) {\n    if (key === 'Enter') actions.save();\n  }\n\n  return (\n    <input\n      className=\"wx-e7Ao5ejY wx-text\"\n      onInput={updateValue}\n      onKeyDown={closeAndSave}\n      ref={node}\n      type=\"text\"\n      value={value}\n    />\n  );\n}\n\nexport default Text;\n", "import { useState, useEffect, useMemo, useRef, useCallback } from 'react';\nimport { SuggestDropdown } from '@svar-ui/react-core';\nimport './Combo.css';\n\nfunction Combo({ actions, editor, onAction }) {\n  const [value, setValue] = useState(editor?.value);\n  const [text, setText] = useState(editor?.renderedValue);\n  const [filterOptions, setFilterOptions] = useState(editor?.options || []);\n  const template = useMemo(() => editor?.config?.template, [editor]);\n  const cell = useMemo(() => editor?.config?.cell, [editor]);\n\n  const index = useMemo(() => {\n    return (filterOptions || []).findIndex((a) => a.id === value);\n  }, [filterOptions, value]);\n\n  const navigate = useRef(null);\n  const keydown = useRef(null);\n\n  const ready = useCallback(\n    (ev) => {\n      navigate.current = ev.navigate;\n      keydown.current = ev.keydown;\n      navigate.current(index);\n    },\n    [index, navigate],\n  );\n\n  const handleChange = useCallback(\n    (e) => {\n      const nextText = e?.target?.value ?? '';\n      setText(nextText);\n\n      const options = nextText\n        ? (editor?.options || []).filter((i) =>\n            (i.label || '').toLowerCase().includes(nextText.toLowerCase()),\n          )\n        : editor?.options || [];\n      setFilterOptions(options);\n\n      if (options.length) navigate.current(-Infinity);\n      else navigate.current(null);\n    },\n    [editor],\n  );\n\n  const inputRef = useRef(null);\n  useEffect(() => {\n    if (inputRef.current) {\n      inputRef.current.focus();\n    }\n  }, []);\n\n  useEffect(() => {\n    setValue(editor?.value);\n    setText(editor?.renderedValue);\n    setFilterOptions(editor?.options || []);\n  }, [editor]);\n\n  const updateValue = useCallback(\n    ({ id }) => {\n      actions.updateValue(id);\n      actions.save();\n    },\n    [actions],\n  );\n\n  return (\n    <>\n      <input\n        className=\"wx-0UYfSd1x wx-input\"\n        ref={inputRef}\n        value={text ?? ''}\n        onChange={handleChange}\n        onKeyDown={(e) =>\n          keydown.current ? keydown.current(e, index) : undefined\n        }\n      />\n      <SuggestDropdown\n        items={filterOptions}\n        onReady={ready}\n        onSelect={updateValue}\n      >\n        {({ option }) => {\n          if (template) {\n            return template(option);\n          } else if (cell) {\n            const Component = cell;\n            return <Component data={option} onAction={onAction} />;\n          } else {\n            return option.label;\n          }\n        }}\n      </SuggestDropdown>\n    </>\n  );\n}\n\nexport default Combo;\n", "import { useEffect, useRef, useState } from 'react';\nimport { Calendar, Dropdown } from '@svar-ui/react-core';\nimport './Datepicker.css';\n\nexport default function Datepicker({ actions, editor, onAction }) {\n  const [value] = useState(() => editor.value || new Date());\n  const [template] = useState(() => editor.config?.template);\n  const [cell] = useState(() => editor.config?.cell);\n\n  function updateValue({ value }) {\n    actions.updateValue(value);\n    actions.save();\n  }\n\n  const nodeRef = useRef(null);\n\n  useEffect(() => {\n    if (nodeRef.current) {\n      nodeRef.current.focus();\n    }\n    if (typeof window !== 'undefined' && window.getSelection) {\n      window.getSelection().removeAllRanges();\n    }\n  }, []);\n\n  return (\n    <>\n      <div\n        className=\"wx-lNWNYUb6 wx-value\"\n        ref={nodeRef}\n        tabIndex={0}\n        onClick={() => actions.cancel()}\n        onKeyDown={(ev) => ev.preventDefault()}\n      >\n        {template ? (\n          template(value)\n        ) : cell ? (\n          (() => {\n            const Component = cell;\n            return <Component data={editor.value} onAction={onAction} />;\n          })()\n        ) : (\n          <span className=\"wx-lNWNYUb6 wx-text\">{editor.renderedValue}</span>\n        )}\n      </div>\n      <Dropdown width={'auto'}>\n        <Calendar\n          value={value}\n          onChange={updateValue}\n          buttons={editor.config?.buttons}\n        />\n      </Dropdown>\n    </>\n  );\n}\n", "import { useEffect, useMemo, useRef, useState } from 'react';\nimport { SuggestDropdown } from '@svar-ui/react-core';\nimport './Richselect.css';\n\nexport default function Richselect(props) {\n  const { actions, editor } = props;\n  const onAction = props.onAction ?? props.onaction;\n\n  const config = editor.config || {};\n\n  const [data] = useState(\n    editor.options.find((opt) => opt.id === editor.value),\n  );\n  const [value] = useState(editor.value);\n  const [options] = useState(editor.options);\n\n  const index = useMemo(\n    () => options.findIndex((a) => a.id === value),\n    [options, value],\n  );\n\n  function updateValue({ id }) {\n    actions.updateValue(id);\n    actions.save();\n  }\n\n  let navigate;\n  const [keydown, setKeydown] = useState();\n\n  function ready(ev) {\n    navigate = ev.navigate;\n    setKeydown(() => ev.keydown);\n    navigate(index);\n  }\n\n  const node = useRef(null);\n  useEffect(() => {\n    if (node.current) {\n      node.current.focus();\n    }\n    if (typeof window !== 'undefined' && window.getSelection) {\n      window.getSelection().removeAllRanges();\n    }\n  }, []);\n\n  return (\n    <>\n      <div\n        ref={node}\n        className=\"wx-ywGRk611 wx-value\"\n        tabIndex={0}\n        onClick={() => actions.cancel()}\n        onKeyDown={(ev) => {\n          keydown(ev, index);\n          ev.preventDefault();\n        }}\n      >\n        {config.template ? (\n          config.template(data)\n        ) : config.cell ? (\n          (() => {\n            const Component = config.cell;\n            return <Component data={data} onAction={onAction} />;\n          })()\n        ) : (\n          <span className=\"wx-ywGRk611 wx-text\">{editor.renderedValue}</span>\n        )}\n      </div>\n      <SuggestDropdown items={options} onReady={ready} onSelect={updateValue}>\n        {({ option }) =>\n          config.template\n            ? config.template(option)\n            : config.cell\n              ? (() => {\n                  const Component = config.cell;\n                  return <Component data={option} onAction={onAction} />;\n                })()\n              : option.label\n        }\n      </SuggestDropdown>\n    </>\n  );\n}\n", "import Text from './Text.jsx';\nimport Combo from './Combo.jsx';\nimport Datepicker from './Datepicker.jsx';\nimport Richselect from './Richselect.jsx';\n\nexport const editors = {\n  text: Text,\n  combo: Combo,\n  datepicker: Datepicker,\n  richselect: Richselect,\n};\n", "import { useCallback, useContext, useEffect, useMemo, useRef } from 'react';\nimport storeContext from '../../context';\nimport { useStore } from '@svar-ui/lib-react';\nimport { getStyle } from '../../helpers/columnWidth';\nimport { clickOutside } from '@svar-ui/lib-dom';\nimport { editors } from './editors';\nimport './Editor.css';\n\nexport default function Editor({ column, row }) {\n  const api = useContext(storeContext);\n  const editor = useStore(api, 'editor');\n\n  const closeEditor = useCallback(\n    (ignore, cell) => {\n      api.exec('close-editor', { ignore });\n      if (cell) {\n        api.exec('focus-cell', {\n          ...cell,\n          eventSource: 'click',\n        });\n      }\n    },\n    [api],\n  );\n\n  const save = useCallback(\n    (ignoreFocus) => {\n      const cell = ignoreFocus\n        ? null\n        : { row: editor?.id, column: editor?.column };\n      closeEditor(false, cell);\n    },\n    [editor, closeEditor],\n  );\n\n  const cancel = useCallback(() => {\n    closeEditor(true, { row: editor?.id, column: editor?.column });\n  }, [editor, closeEditor]);\n\n  const updateValue = useCallback(\n    (value) => {\n      api.exec('editor', { value });\n    },\n    [api],\n  );\n\n  const keyHandler = useCallback(\n    (ev) => {\n      if (ev.key === 'Enter' && editor) cancel();\n    },\n    [editor, cancel],\n  );\n\n  const computedStyle = useMemo(\n    () =>\n      getStyle(\n        column.width,\n        column.flexgrow,\n        column.fixed,\n        column.left,\n        column.right,\n      ),\n    [column.width, column.flexgrow, column.fixed, column.left, column.right],\n  );\n\n  const Component = useMemo(() => {\n    let ed = column.editor;\n    if (typeof ed === 'function') ed = ed(row, column);\n    let type = typeof ed === 'string' ? ed : ed.type;\n    return editors[type];\n  }, [column, row]);\n\n  const rootRef = useRef(null);\n\n  useEffect(() => {\n    if (!rootRef.current) return;\n    const destroy = clickOutside(rootRef.current, () => save(true));\n    return () => {\n      if (typeof destroy === 'function') destroy();\n    };\n  }, [save]);\n\n  useEffect(() => {\n    if (!rootRef.current) return;\n    if (typeof computedStyle === 'string') {\n      rootRef.current.setAttribute('style', computedStyle);\n    }\n  }, [computedStyle]);\n\n  const role = typeof row.$parent !== 'undefined' ? 'gridcell' : 'cell';\n  const ariaReadonly =\n    typeof row.$parent !== 'undefined'\n      ? column.editor\n        ? false\n        : true\n      : undefined;\n\n  return (\n    <div\n      className=\"wx-8l724t2g wx-cell wx-editor\"\n      ref={rootRef}\n      style={\n        typeof computedStyle === 'object' && computedStyle !== null\n          ? computedStyle\n          : undefined\n      }\n      role={role}\n      aria-readonly={ariaReadonly}\n      tabIndex={-1}\n      onClick={(ev) => ev.stopPropagation()}\n      onDoubleClick={(ev) => ev.stopPropagation()}\n      onKeyDown={keyHandler}\n    >\n      {Component ? (\n        <Component\n          editor={editor}\n          actions={{ save, cancel, updateValue }}\n          onAction={({ action, data }) => api.exec(action, data)}\n        />\n      ) : null}\n    </div>\n  );\n}\n", "import { useContext } from 'react';\nimport { getPrintCellStyle, getPrintFilterValue } from '@svar-ui/grid-store';\nimport storeContext from '../../context';\nimport { styleObject } from '@svar-ui/lib-react';\nimport './HeaderFooter.css';\n\nexport default function HeaderFooter(props) {\n  const { columns, type, columnStyle } = props;\n\n  const api = useContext(storeContext);\n  const { filterValues, _columns, _sizes: sizes } = api.getState();\n\n  function getColumnCss(column) {\n    return columnStyle ? ' ' + columnStyle(column) : '';\n  }\n\n  return (\n    <>\n      {columns.map((row, i) => (\n        <tr key={i}>\n          {row.map((cell) => {\n            const column = _columns.find((c) => c.id == cell.id);\n            const className =\n              `wx-print-cell-${type}` +\n              `${getColumnCss(column)}` +\n              `${cell.filter ? ' wx-print-cell-filter' : ''}` +\n              `${cell.vertical ? ' wx-vertical' : ''}`;\n\n            const CellComp = cell.cell;\n\n            return (\n              <th\n                key={cell.id}\n                style={styleObject(getPrintCellStyle(cell, sizes.columnWidth))}\n                className={'wx-Gy81xq2u ' + className}\n                rowSpan={cell.rowspan}\n                colSpan={cell.colspan}\n              >\n                {CellComp ? (\n                  <CellComp\n                    api={api}\n                    cell={Object.fromEntries(\n                      Object.entries(cell).filter(([key]) => key !== 'cell'),\n                    )}\n                    column={column}\n                    row={i}\n                  />\n                ) : cell.filter ? (\n                  <div className=\"wx-Gy81xq2u wx-print-filter\">\n                    {getPrintFilterValue(filterValues, _columns, cell)}\n                  </div>\n                ) : (\n                  <div className=\"wx-Gy81xq2u wx-text\">{cell.text ?? ''}</div>\n                )}\n              </th>\n            );\n          })}\n        </tr>\n      ))}\n    </>\n  );\n}\n", "import { useContext } from 'react';\nimport storeContext from '../../context';\nimport {\n  getRenderValue,\n  getHeaderFooterPrintColumns,\n  getPrintCellStyle,\n} from '@svar-ui/grid-store';\nimport HeaderFooter from './HeaderFooter.jsx';\nimport './Grid.css';\nimport { styleObject } from '@svar-ui/lib-react';\n\nexport default function Grid(props) {\n  const { columns, rowStyle, columnStyle, cellStyle, header, footer, reorder } =\n    props;\n\n  const api = useContext(storeContext);\n  const { flatData: data, _sizes: sizes } = api.getState();\n\n  const headerColumns =\n    header &&\n    getHeaderFooterPrintColumns(columns, 'header', sizes.headerRowHeights);\n  const footerColumns =\n    footer &&\n    getHeaderFooterPrintColumns(columns, 'footer', sizes.footerRowHeights);\n\n  function buildCellCss(row, column) {\n    let css = '';\n    css += columnStyle ? ' ' + columnStyle(column) : '';\n    css += cellStyle ? ' ' + cellStyle(row, column) : '';\n    return css;\n  }\n\n  function isDraggableIcon(row, column) {\n    return typeof column.draggable === 'function'\n      ? column.draggable(row, column) !== false\n      : column.draggable;\n  }\n\n  return (\n    <table\n      className={`wx-8NTMLH0z wx-print-grid ${columns.some((c) => c.flexgrow) ? 'wx-flex-columns' : ''}`}\n    >\n      {header ? (\n        <thead>\n          <HeaderFooter\n            columns={headerColumns}\n            type={'header'}\n            columnStyle={columnStyle}\n          />\n        </thead>\n      ) : null}\n\n      <tbody>\n        {data.map((row, rowIndex) => (\n          <tr\n            key={rowIndex}\n            className={\n              'wx-8NTMLH0z wx-row' + (rowStyle ? ' ' + rowStyle(row) : '')\n            }\n            style={{ height: `${row.rowHeight || sizes.rowHeight}px` }}\n          >\n            {columns.map((column) =>\n              !column.collapsed ? (\n                <td\n                  key={column.id}\n                  className={`wx-8NTMLH0z wx-print-cell wx-cell ${buildCellCss(row, column)}`}\n                  style={styleObject(\n                    getPrintCellStyle(column, sizes.columnWidth),\n                  )}\n                >\n                  {reorder && column.draggable ? (\n                    <span className=\"wx-8NTMLH0z wx-print-draggable\">\n                      {isDraggableIcon(row, column) ? (\n                        <i className=\"wx-8NTMLH0z wxi-drag\"></i>\n                      ) : null}\n                    </span>\n                  ) : null}\n                  {column.treetoggle ? (\n                    <>\n                      <span\n                        style={{ marginLeft: row.$level * 28 + 'px' }}\n                      ></span>\n                      {row.$count ? (\n                        <i\n                          className={\n                            'wx-8NTMLH0z wx-print-grid-tree-toggle ' +\n                            `wxi-menu-${row.open !== false ? 'down' : 'right'}`\n                          }\n                        ></i>\n                      ) : null}\n                    </>\n                  ) : null}\n                  {column.cell ? (\n                    (() => {\n                      const CellComp = column.cell;\n                      return <CellComp api={api} row={row} column={column} />;\n                    })()\n                  ) : (\n                    <span>{getRenderValue(row, column)}</span>\n                  )}\n                </td>\n              ) : null,\n            )}\n          </tr>\n        ))}\n      </tbody>\n\n      {footer ? (\n        <tfoot>\n          <HeaderFooter\n            columns={footerColumns}\n            type={'footer'}\n            columnStyle={columnStyle}\n          />\n        </tfoot>\n      ) : null}\n    </table>\n  );\n}\n", "import { useContext, useEffect, useMemo, useRef } from 'react';\nimport Grid from './Grid.jsx';\nimport { getPrintColumns } from '@svar-ui/grid-store';\nimport storeContext from '../../context';\nimport './Print.css';\n\nexport default function Print(props) {\n  const { config, ...restProps } = props;\n\n  const api = useContext(storeContext);\n  const { _skin: skin, _columns: columns } = api.getState();\n\n  const grids = useMemo(() => getPrintColumns(columns, config), []);\n  const nodeRef = useRef(null);\n\n  useEffect(() => {\n    const target = document.body;\n    target.classList.add('wx-print');\n\n    const node = nodeRef.current;\n    if (!node) return;\n\n    const cloned = node.cloneNode(true);\n    target.appendChild(cloned);\n\n    const rule = `@media print { @page { size: ${config.paper} ${config.mode}; }`;\n    const style = document.createElement('style');\n    style.setAttribute('type', 'text/css');\n    style.setAttribute('media', 'print');\n    document.getElementsByTagName('head')[0].appendChild(style);\n    style.appendChild(document.createTextNode(rule));\n\n    window.print();\n\n    style.remove();\n    target.classList.remove('wx-print');\n\n    cloned.remove();\n  }, []);\n\n  return (\n    <div\n      className={`wx-4zwCKA7C wx-${skin}-theme wx-print-container`}\n      ref={nodeRef}\n    >\n      {grids.map((cols, i) => (\n        <div className=\"wx-4zwCKA7C wx-print-grid-wrapper\" key={i}>\n          <Grid columns={cols} {...restProps} />\n        </div>\n      ))}\n    </div>\n  );\n}\n", "import {\n  useState,\n  useEffect,\n  useMemo,\n  useRef,\n  useContext,\n  useCallback,\n} from 'react';\nimport storeContext from '../context';\nimport { onresize } from '../helpers/actions/onresize';\nimport { reorder as drag, getOffset } from '../helpers/actions/reorder';\nimport { resetAutoScroll, tryAutoScroll } from '../helpers/actions/dragscroll';\nimport { clickOutside, locateAttr, locate, id as toId } from '@svar-ui/lib-dom';\nimport { hotkeys, defaultHotkeys } from '@svar-ui/grid-store';\nimport { scrollTo } from '@svar-ui/grid-store';\nimport { useStore, delegateClick, useStoreWithCounter } from '@svar-ui/lib-react';\n\nimport Cell from './Cell.jsx';\nimport HeaderFooter from './HeaderFooter.jsx';\nimport Overlay from './Overlay.jsx';\nimport Editor from './inlineEditors/Editor.jsx';\nimport Print from './print/Print.jsx';\nimport './Layout.css';\n\nfunction Layout(props) {\n  const {\n    header,\n    footer,\n    overlay,\n    multiselect,\n    onreorder: onReorder,\n    rowStyle,\n    columnStyle,\n    cellStyle,\n    autoRowHeight,\n    resize,\n    clientWidth,\n    clientHeight,\n    responsiveLevel,\n    hotkeys: hotkeysConfig,\n  } = props;\n\n  const api = useContext(storeContext);\n\n  // subscribe to reactive state from api\n  const dynamic = useStore(api, 'dynamic');\n  const columns = useStore(api, '_columns');\n  const data = useStore(api, 'flatData');\n  const split = useStore(api, 'split');\n  const sizes = useStore(api, '_sizes');\n  const [selectedRows, selectionChanged] = useStoreWithCounter(api, 'selectedRows');\n  const selectState = useStore(api, 'select');\n  const editorState = useStore(api, 'editor');\n  const tree = useStore(api, 'tree');\n  const focusCell = useStore(api, 'focusCell');\n  const printConfig = useStore(api, '_print');\n  const undoState = useStore(api, 'undo');\n  const reorder = useStore(api, 'reorder');\n  const rowHeightFromData = useStore(api, '_rowHeightFromData');\n\n  // will be calculated once, after rendering\n  const [SCROLLSIZE, setSCROLLSIZE] = useState(0);\n  useEffect(() => {\n    setSCROLLSIZE(getScrollSize());\n  }, []);\n\n  const [scrollLeft, setScrollLeft] = useState(0);\n  const [scrollTop, setScrollTop] = useState(0);\n\n  const hasAny = useMemo(() => {\n    return (columns || []).some((col) => !col.hidden && col.flexgrow);\n  }, [columns]);\n\n  const defaultRowHeight = useMemo(() => sizes?.rowHeight || 0, [sizes]);\n\n  const tableNodeRef = useRef(null);\n\n  // reorder\n  const [dragItem, setDragItem] = useState(null);\n  const [dragNode, setDragNode] = useState(null);\n\n  const leftColumns = useMemo(() => {\n    let cols = [];\n    let width = 0;\n\n    if (split && split.left) {\n      cols = (columns || [])\n        .slice(0, split.left)\n        .filter((c) => !c.hidden)\n        .map((a) => ({ ...a }));\n      cols.forEach((a) => {\n        a.fixed = { left: 1 };\n        a.left = width;\n        width += a.width;\n      });\n      if (cols.length) cols[cols.length - 1].fixed = { left: -1 };\n    }\n\n    return { columns: cols, width };\n  }, [split, columns]);\n\n  const rightColumns = useMemo(() => {\n    let cols = [];\n    let width = 0;\n\n    if (split && split.right) {\n      cols = (columns || [])\n        .slice(split.right * -1)\n        .filter((c) => !c.hidden)\n        .map((a) => ({ ...a }));\n      for (let i = cols.length - 1; i >= 0; i--) {\n        const col = cols[i];\n        col.fixed = { right: 1 };\n        col.right = width;\n        width += col.width;\n      }\n      if (cols.length) cols[0].fixed = { right: -1 };\n    }\n\n    return { columns: cols, width };\n  }, [split, columns]);\n\n  const centerColumns = useMemo(() => {\n    const center = (columns || [])\n      .slice(split?.left || 0, (columns || []).length - (split?.right ?? 0))\n      .filter((c) => !c.hidden);\n    center.forEach((a) => {\n      a.fixed = 0;\n    });\n    return center;\n  }, [columns, split]);\n\n  const fullWidth = useMemo(() => {\n    return (columns || []).reduce((acc, col) => {\n      if (!col.hidden) {\n        acc += col.width;\n      }\n      return acc;\n    }, 0);\n  }, [columns]);\n\n  const EXTRACOLUMNS = 1;\n\n  function getHeaderPosition(start, deltaLeft, type) {\n    let delta = deltaLeft;\n    let index = start;\n\n    if (centerColumns.length) {\n      let spanStartInd = centerColumns.length; // max value to compare with\n      for (let i = start; i >= 0; i--) {\n        const colHeader = centerColumns[i][type];\n        colHeader.forEach((h) => {\n          if (h.colspan > 1 && i > start - h.colspan && i < spanStartInd) {\n            spanStartInd = i;\n          }\n        });\n      }\n\n      if (spanStartInd !== centerColumns.length && spanStartInd < start) {\n        for (let i = spanStartInd; i < start; i++) {\n          delta -= centerColumns[i].width;\n        }\n        index = spanStartInd;\n      }\n    }\n\n    return { index, delta };\n  }\n\n  const renderColumns = useMemo(() => {\n    let dataCols, headerCols, footerCols;\n\n    const left = scrollLeft;\n    const right = scrollLeft + (clientWidth || 0);\n\n    let start = 0;\n    let end = 0;\n    let sum = 0;\n\n    let d = 0;\n    centerColumns.forEach((col, index) => {\n      if (left > sum) {\n        start = index;\n        d = sum;\n      }\n      sum = sum + col.width;\n\n      if (right > sum) end = index + EXTRACOLUMNS;\n    });\n\n    const rightSpanDelta = { header: 0, footer: 0 };\n    for (let i = end; i >= start; i--) {\n      ['header', 'footer'].forEach((key) => {\n        if (centerColumns[i])\n          centerColumns[i][key].forEach((hCell) => {\n            const colspan = hCell.colspan;\n            if (colspan && colspan > 1) {\n              const diff = colspan - (end - i + 1);\n              if (diff > 0) {\n                rightSpanDelta[key] = Math.max(rightSpanDelta[key], diff);\n              }\n            }\n          });\n      });\n    }\n\n    const headerPos = getHeaderPosition(start, d, 'header');\n    const footerPos = getHeaderPosition(start, d, 'footer');\n\n    const dh = headerPos.delta;\n    const csH = headerPos.index;\n\n    const df = footerPos.delta;\n    const csF = footerPos.index;\n\n    if (hasAny && fullWidth > (clientWidth || 0)) {\n      dataCols =\n        headerCols =\n        footerCols =\n          [...leftColumns.columns, ...centerColumns, ...rightColumns.columns];\n    } else {\n      dataCols = [\n        ...leftColumns.columns,\n        ...centerColumns.slice(start, end + 1),\n        ...rightColumns.columns,\n      ];\n      headerCols = [\n        ...leftColumns.columns,\n        ...centerColumns.slice(csH, end + rightSpanDelta.header + 1),\n        ...rightColumns.columns,\n      ];\n      footerCols = [\n        ...leftColumns.columns,\n        ...centerColumns.slice(csF, end + rightSpanDelta.footer + 1),\n        ...rightColumns.columns,\n      ];\n    }\n\n    return {\n      data: dataCols || [],\n      header: headerCols || [],\n      footer: footerCols || [],\n      d,\n      df,\n      dh,\n    };\n  }, [\n    centerColumns,\n    leftColumns,\n    rightColumns,\n    scrollLeft,\n    clientWidth,\n    hasAny,\n    fullWidth,\n  ]);\n\n  const headerHeight = useMemo(\n    () => (header ? sizes?.headerHeight || 0 : 0),\n    [header, sizes],\n  );\n  const footerHeight = useMemo(\n    () => (footer ? sizes?.footerHeight || 0 : 0),\n    [footer, sizes],\n  );\n\n  const hasHScroll = useMemo(() => {\n    return clientWidth && clientHeight ? fullWidth >= clientWidth : false;\n  }, [clientWidth, clientHeight, fullWidth]);\n\n  const visibleRowsHeight = useMemo(() => {\n    return (\n      (clientHeight || 0) -\n      headerHeight -\n      footerHeight -\n      (hasHScroll ? SCROLLSIZE : 0)\n    );\n  }, [clientHeight, headerHeight, footerHeight, hasHScroll, SCROLLSIZE]);\n\n  const visibleRows = useMemo(() => {\n    return Math.ceil((visibleRowsHeight || 0) / (defaultRowHeight || 1)) + 1;\n  }, [visibleRowsHeight, defaultRowHeight]);\n\n  const rowHeightsRef = useRef([]);\n  const [renderedHeight, setRenderedHeight] = useState(0);\n  const [renderEnd, setRenderEnd] = useState(undefined);\n\n  const renderRows = useMemo(() => {\n    let start = 0;\n    let deltaTop = 0;\n    const EXTRAROWS = 2;\n\n    if (autoRowHeight) {\n      let st = scrollTop;\n      while (st > 0) {\n        st -= rowHeightsRef.current[start] || defaultRowHeight;\n        start++;\n      }\n\n      deltaTop = scrollTop - st;\n      for (let i = Math.max(0, start - EXTRAROWS - 1); i < start; i++)\n        deltaTop -= rowHeightsRef.current[start - i] || defaultRowHeight;\n\n      start = Math.max(0, start - EXTRAROWS);\n    } else {\n      if (rowHeightFromData) {\n        let startInd = 0;\n        let topHeight = 0;\n        for (let i = 0; i < (data || []).length; i++) {\n          const height = data[i].rowHeight || defaultRowHeight;\n          if (topHeight + height > scrollTop) {\n            startInd = i;\n            break;\n          }\n          topHeight += height;\n        }\n        start = Math.max(0, startInd - EXTRAROWS);\n\n        for (let i = 0; i < start; i++) {\n          deltaTop += data[i].rowHeight || defaultRowHeight;\n        }\n\n        let visibleRowsCount = 0;\n        let currentHeight = 0;\n        for (let i = startInd + 1; i < (data || []).length; i++) {\n          const height = data[i].rowHeight || defaultRowHeight;\n          visibleRowsCount++;\n          if (currentHeight + height > visibleRowsHeight) {\n            break;\n          }\n          currentHeight += height;\n        }\n\n        const end = Math.min(\n          dynamic ? dynamic.rowCount : (data || []).length,\n          startInd + visibleRowsCount + EXTRAROWS,\n        );\n\n        return { d: deltaTop, start, end };\n      }\n\n      start = Math.floor(scrollTop / (defaultRowHeight || 1));\n      start = Math.max(0, start - EXTRAROWS);\n      deltaTop = start * (defaultRowHeight || 0);\n    }\n\n    const totalCount = dynamic ? dynamic.rowCount : (data || []).length;\n    const end = Math.min(totalCount, start + (visibleRows || 0) + EXTRAROWS);\n\n    return { d: deltaTop, start, end };\n  }, [autoRowHeight, rowHeightFromData, scrollTop, defaultRowHeight, dynamic, data, visibleRows, visibleRowsHeight]);\n\n  const fullHeight = useMemo(() => {\n    const count = dynamic ? dynamic.rowCount : (data || []).length;\n\n    if (autoRowHeight) {\n      return (\n        renderedHeight +\n        renderRows.d +\n        (count - (renderEnd || 0)) * (defaultRowHeight || 0)\n      );\n    }\n    if (!rowHeightFromData) {\n      return count * (defaultRowHeight || 0);\n    }\n\n    let totalHeight = 0;\n    for (let i = 0; i < count; i++)\n      totalHeight += (data[i]?.rowHeight || defaultRowHeight);\n\n    return totalHeight;\n  }, [\n    dynamic,\n    data,\n    defaultRowHeight,\n    autoRowHeight,\n    rowHeightFromData,\n    renderedHeight,\n    renderRows.d,\n    renderEnd,\n  ]);\n\n  const hasVScroll = useMemo(() => {\n    return clientWidth && clientHeight\n      ? fullHeight + headerHeight + footerHeight >=\n          clientHeight - (fullWidth >= (clientWidth || 0) ? SCROLLSIZE : 0)\n      : false;\n  }, [\n    clientWidth,\n    clientHeight,\n    fullHeight,\n    headerHeight,\n    footerHeight,\n    fullWidth,\n    SCROLLSIZE,\n  ]);\n\n  const contentWidth = useMemo(() => {\n    return hasAny && fullWidth <= (clientWidth || 0)\n      ? (clientWidth || 0) -\n          (hasHScroll ? 0 : 0) -\n          (hasVScroll ? SCROLLSIZE : 0) // hasHScroll doesn't affect width here; keep logic as in Svelte\n      : fullWidth;\n  }, [hasAny, fullWidth, clientWidth, hasVScroll, SCROLLSIZE, hasHScroll]);\n\n  const globalWidth = useMemo(() => {\n    return hasAny && fullWidth <= (clientWidth || 0)\n      ? clientWidth || 0\n      : contentWidth < (clientWidth || 0)\n        ? fullWidth + (hasVScroll ? SCROLLSIZE : 0)\n        : -1;\n  }, [hasAny, fullWidth, clientWidth, contentWidth, hasVScroll, SCROLLSIZE]);\n\n  const lastCallRef = useRef({});\n  useEffect(() => {\n    if (\n      dynamic &&\n      (lastCallRef.current.start !== renderRows.start ||\n        lastCallRef.current.end !== renderRows.end)\n    ) {\n      const { start, end } = renderRows;\n      lastCallRef.current = { start, end };\n      api && api.exec && api.exec('request-data', { row: { start, end } });\n    }\n  }, [dynamic, renderRows, api]);\n\n  const dataRows = useMemo(() => {\n    if (dynamic) return data || [];\n    return (data || []).slice(renderRows.start, renderRows.end);\n  }, [dynamic, data, renderRows]);\n\n  const visibleSelection = useMemo(() => {\n    return (selectedRows || []).filter((s) =>\n      (dataRows || []).some((r) => r.id === s),\n    );\n  }, [selectionChanged, dataRows]);\n\n  const renderStart = useMemo(() => renderRows.start, [renderRows.start]);\n\n  const onScroll = useCallback((ev) => {\n    setScrollTop(ev.target.scrollTop);\n    setScrollLeft(ev.target.scrollLeft);\n  }, []);\n\n  const lockSelection = useCallback((ev) => {\n    if (ev.shiftKey) ev.preventDefault();\n    tableNodeRef.current &&\n      tableNodeRef.current.focus &&\n      tableNodeRef.current.focus();\n  }, []);\n\n  const checkDraggable = useCallback(() => {\n    return !!(columns || []).find((c) => !!c.draggable);\n  }, [columns]);\n\n  const postDragRef = useRef(null);\n  const movementYRef = useRef(null);\n\n  const bodyClickHandlers = useRef({\n    dblclick: (rowId, ev) => {\n      const data = { id: rowId, column: locateAttr(ev, 'data-col-id') };\n      api.exec('open-editor', data);\n    },\n    click: (rowId, ev) => {\n      if (postDragRef.current) return;\n      const column = locateAttr(ev, 'data-col-id');\n      if (focusCell?.id !== rowId)\n        api.exec('focus-cell', {\n          row: rowId,\n          column,\n          eventSource: 'click',\n        });\n\n      if (selectState === false) return;\n\n      const toggle = multiselect && ev.ctrlKey;\n      const range = multiselect && ev.shiftKey;\n\n      if (\n        toggle ||\n        selectedRows.length > 1 ||\n        !selectedRows.includes(rowId)\n      ) {\n        api.exec('select-row', { id: rowId, toggle, range });\n      }\n    },\n    'toggle-row': (rowId) => {\n      const row = api.getRow(rowId);\n      api.exec(row.open !== false ? 'close-row' : 'open-row', { id: rowId });\n    },\n    'ignore-click': () => {\n      return false;\n    },\n  });\n\n  const dragScrollConfig = useMemo(() => {\n    return {\n      top: headerHeight,\n      bottom: footerHeight,\n      left: leftColumns.width,\n      xScroll: hasHScroll,\n      yScroll: hasVScroll,\n      sense:\n        autoRowHeight && dragNode\n          ? dragNode.offsetHeight\n          : Math.max(sizes?.rowHeight || 0, 40),\n      node: tableNodeRef.current && tableNodeRef.current.firstElementChild,\n    };\n  }, [\n    headerHeight,\n    footerHeight,\n    leftColumns.width,\n    hasHScroll,\n    hasVScroll,\n    autoRowHeight,\n    dragNode,\n    sizes,\n  ]);\n\n  function startDrag(ev, context) {\n    const { container, sourceNode, from } = context;\n    const hasDraggable = checkDraggable();\n\n    if (hasDraggable && !sourceNode.getAttribute('draggable-data'))\n      return false;\n\n    setDragItem(from);\n\n    if (api.getRow(from).open)\n      api.exec('close-row', { id: from, nested: true });\n\n    const itemNode = locate(sourceNode, 'data-id');\n    const cloned = itemNode.cloneNode(true);\n    cloned.classList.remove('wx-selected');\n    cloned\n      .querySelectorAll('[tabindex]')\n      .forEach((element) => element.setAttribute('tabindex', '-1'));\n    container.appendChild(cloned);\n    setDragNode(cloned);\n\n    const offsetX = scrollLeft - renderColumns.d;\n    const vScrollSize = hasVScroll ? SCROLLSIZE : 0;\n\n    container.style.width =\n      Math.min(\n        (clientWidth || 0) - vScrollSize,\n        hasAny && fullWidth <= (clientWidth || 0)\n          ? contentWidth\n          : contentWidth - vScrollSize,\n      ) +\n      offsetX +\n      'px';\n\n    const itemPos = getOffset(itemNode);\n    context.offset = {\n      x: offsetX,\n      y: -Math.round(itemPos.height / 2),\n    };\n\n    if (!movementYRef.current) movementYRef.current = ev.clientY;\n  }\n\n  function moveDrag(ev, context) {\n    const { from } = context;\n    const pos = context.pos;\n    const box = getOffset(tableNodeRef.current);\n\n    pos.x = box.x;\n\n    const min = dragScrollConfig.top;\n    if (pos.y < min) pos.y = min;\n    else {\n      const max =\n        box.height -\n        (hasHScroll && SCROLLSIZE > 0\n          ? SCROLLSIZE\n          : Math.round(dragScrollConfig.sense / 2)) -\n        dragScrollConfig.bottom;\n      if (pos.y > max) pos.y = max;\n    }\n\n    if (tableNodeRef.current.contains(context.targetNode)) {\n      const targetRow = locate(context.targetNode, 'data-id');\n      const to = toId(targetRow?.getAttribute('data-id'));\n\n      if (to && to !== from) {\n        context.to = to;\n\n        const rowHeight = autoRowHeight\n          ? dragNode?.offsetHeight\n          : sizes?.rowHeight;\n\n        if (dragNode && (scrollTop === 0 || pos.y > min + rowHeight - 1)) {\n          const targetRect = targetRow.getBoundingClientRect();\n          const dragNodeOffset = getOffset(dragNode);\n\n          const dragNodePos = dragNodeOffset.y;\n          const targetNodePos = targetRect.y;\n\n          const dir = dragNodePos > targetNodePos ? -1 : 1;\n          const initialMode = dir === 1 ? 'after' : 'before';\n          const diff = Math.abs(api.getRowIndex(from) - api.getRowIndex(to));\n\n          const mode =\n            diff !== 1\n              ? initialMode === 'before'\n                ? 'after'\n                : 'before'\n              : initialMode;\n\n          if (diff === 1) {\n            if (dir === -1 && ev.clientY > movementYRef.current) return;\n            if (dir === 1 && ev.clientY < movementYRef.current) return;\n          }\n\n          movementYRef.current = ev.clientY;\n\n          api.exec('move-item', {\n            id: from,\n            target: to,\n            mode,\n            inProgress: true,\n          });\n        }\n      }\n\n      onReorder && onReorder({ event: ev, context });\n    }\n\n    tryAutoScroll(ev, box, context, dragScrollConfig);\n  }\n\n  function endDrag(ev, context) {\n    const { from, to } = context;\n\n    api.exec('move-item', {\n      id: from,\n      target: to,\n      inProgress: false,\n    });\n\n    postDragRef.current = setTimeout(() => {\n      postDragRef.current = 0;\n    }, 1);\n\n    setDragItem(null);\n    setDragNode(null);\n    movementYRef.current = null;\n    resetAutoScroll(context);\n  }\n\n  function getScrollSize() {\n    const div = document.createElement('div');\n    div.style.cssText =\n      'position:absolute;left:-1000px;width:100px;padding:0px;margin:0px;min-height:100px;overflow-y:scroll;';\n    document.body.appendChild(div);\n    const width = div.offsetWidth - div.clientWidth;\n    document.body.removeChild(div);\n    return width;\n  }\n\n  const styleWidth = useMemo(() => {\n    return globalWidth > 0 ? { width: `${globalWidth}px` } : undefined;\n  }, [globalWidth]);\n\n  const dataElRef = useRef(null);\n  function adjustHeight() {\n    Promise.resolve().then(() => {\n      let rh = 0;\n      let re = renderStart;\n      const container = dataElRef.current;\n      if (!container) return;\n      Array.from(container.children).forEach((row, i) => {\n        rowHeightsRef.current[renderStart + i] = row.offsetHeight;\n        rh += row.offsetHeight;\n        re++;\n      });\n\n      setRenderedHeight(rh);\n      setRenderEnd(re);\n    });\n  }\n\n  useEffect(() => {\n    if (dataRows && autoRowHeight) adjustHeight();\n  }, [dataRows, autoRowHeight, renderStart]);\n\n  let [focus, setFocus] = useState();\n\n  useEffect(() => {\n    if (\n      focusCell &&\n      (!selectState ||\n        !visibleSelection.length ||\n        visibleSelection.includes(focusCell.row))\n    ) {\n      setFocus({ ...focusCell });\n    } else if (dataRows.length && renderColumns.data.length) {\n      if (\n        !focus ||\n        (visibleSelection.length && !visibleSelection.includes(focus.row)) ||\n        dataRows.findIndex((r) => r.id == focus.row) === -1 ||\n        renderColumns.data.findIndex(\n          (c) => c.id == focus.column && !c.collapsed,\n        ) === -1\n      ) {\n        const row = visibleSelection[0] || dataRows[0].id;\n        const cind = renderColumns.data.findIndex((c) => !c.collapsed);\n        if (cind !== -1) setFocus({ row, column: renderColumns.data[cind].id });\n        else setFocus(null);\n      }\n    } else setFocus(null);\n  }, [focusCell]);\n\n  // actions effects\n  const scrollRef = useRef(null);\n  useEffect(() => {\n    const node = tableNodeRef.current;\n    if (!node) return;\n    const cleanup = onresize(node, resize);\n    return () => {\n      if (typeof cleanup === 'function') cleanup();\n    };\n  }, [resize]);\n\n  const dragState = useRef({});\n  Object.assign(dragState.current, {\n    start: startDrag,\n    move: moveDrag,\n    end: endDrag,\n    getReorder: () => reorder,\n    getDraggableInfo: () => ({ hasDraggable: checkDraggable() }),\n  });\n\n  useEffect(() => {\n    const node = tableNodeRef.current;\n    if (!node) return;\n    const cleanup = drag(node, dragState);\n    return cleanup.destroy;\n  }, [reorder, tableNodeRef.current]);\n\n  useEffect(() => {\n    const node = tableNodeRef.current;\n    if (!node) return;\n    const cleanup = hotkeys(node, {\n      keys: hotkeysConfig !== false && {\n        ...defaultHotkeys,\n        'ctrl+z': undoState,\n        'ctrl+y': undoState,\n        ...hotkeysConfig,\n      },\n      exec: (v) => api.exec('hotkey', v),\n    });\n    return cleanup.destroy;\n  }, [api, undoState, hotkeysConfig]);\n\n  const scrollConfig = useRef({\n    scroll: api.getReactiveState().scroll,\n  });\n  scrollConfig.current.getWidth = () =>\n    (clientWidth || 0) - (hasVScroll ? SCROLLSIZE : 0);\n  scrollConfig.current.getHeight = () => visibleRowsHeight;\n  scrollConfig.current.getScrollMargin = () =>\n    leftColumns.width + rightColumns.width;\n\n  useEffect(() => {\n    scrollTo(scrollRef.current, scrollConfig.current);\n  }, []);\n\n  const bodyRef = useRef(null);\n  useEffect(() => {\n    const node = bodyRef.current;\n    if (!node) return;\n\n    const result = [];\n    result.push(\n      clickOutside(node, () => api.exec('focus-cell', { eventSource: 'click' }))\n        .destroy,\n    );\n    result.push(delegateClick(node, bodyClickHandlers.current));\n\n    return () => result.forEach((r) => r());\n  }, []);\n\n  const gridClassName = `wx-grid ${responsiveLevel ? `wx-responsive-${responsiveLevel}` : ''}`;\n\n  return (\n    <>\n      <div\n        className={'wx-4VuBwK2D ' + gridClassName}\n        style={{\n          ['--header-height']: `${headerHeight}px`,\n          ['--footer-height']: `${footerHeight}px`,\n          ['--split-left-width']: `${leftColumns.width}px`,\n          ['--split-right-width']: `${rightColumns.width}px`,\n        }}\n      >\n        <div\n          ref={tableNodeRef}\n          className=\"wx-4VuBwK2D wx-table-box\"\n          style={styleWidth}\n          role={tree ? 'treegrid' : 'grid'}\n          aria-colcount={renderColumns.data.length}\n          aria-rowcount={dataRows.length}\n          aria-multiselectable={tree && multiselect ? true : undefined}\n          tabIndex={-1}\n        >\n          <div\n            ref={scrollRef}\n            className=\"wx-4VuBwK2D wx-scroll\"\n            style={{\n              overflowX: hasHScroll ? 'scroll' : 'hidden',\n              overflowY: hasVScroll ? 'scroll' : 'hidden',\n            }}\n            onScroll={onScroll}\n          >\n            {header ? (\n              <div className=\"wx-4VuBwK2D wx-header-wrapper\">\n                <HeaderFooter\n                  contentWidth={contentWidth}\n                  deltaLeft={renderColumns.dh}\n                  columns={renderColumns.header}\n                  columnStyle={columnStyle}\n                  bodyHeight={visibleRowsHeight - +footer}\n                />\n              </div>\n            ) : null}\n            <div\n              ref={bodyRef}\n              className=\"wx-4VuBwK2D wx-body\"\n              style={{ width: `${contentWidth}px`, height: `${fullHeight}px` }}\n              onMouseDown={(ev) => lockSelection(ev)}\n            >\n              {overlay ? <Overlay overlay={overlay} /> : null}\n              <div\n                ref={dataElRef}\n                className=\"wx-4VuBwK2D wx-data\"\n                style={{\n                  paddingTop: `${renderRows.d}px`,\n                  paddingLeft: `${renderColumns.d}px`,\n                }}\n              >\n                {dataRows.map((row, rIndex) => {\n                  const isSelected = selectedRows.indexOf(row.id) !== -1;\n                  const isInactive = dragItem === row.id;\n                  const rowClass =\n                    'wx-row' +\n                    (autoRowHeight ? ' wx-autoheight' : '') +\n                    (rowStyle ? ' ' + rowStyle(row) : '') +\n                    (isSelected ? ' wx-selected' : '') +\n                    (isInactive ? ' wx-inactive' : '');\n                  const rowStyleProp = autoRowHeight\n                    ? { minHeight: `${row.rowHeight || defaultRowHeight}px` }\n                    : { height: `${row.rowHeight || defaultRowHeight}px` };\n                  return (\n                    <div\n                      key={row.id}\n                      className={'wx-4VuBwK2D ' + rowClass}\n                      data-id={row.id}\n                      data-context-id={row.id}\n                      style={rowStyleProp}\n                      role=\"row\"\n                      aria-rowindex={rIndex}\n                      aria-expanded={row.open}\n                      aria-level={tree ? row.$level + 1 : undefined}\n                      aria-selected={tree ? isSelected : undefined}\n                      tabIndex={-1}\n                    >\n                      {renderColumns.data.map((column) => {\n                        if (column.collapsed) {\n                          return (\n                            <div\n                              key={column.id}\n                              className=\"wx-4VuBwK2D wx-cell wx-collapsed\"\n                            ></div>\n                          );\n                        } else if (\n                          editorState?.id === row.id &&\n                          editorState.column == column.id\n                        ) {\n                          return (\n                            <Editor key={column.id} row={row} column={column} />\n                          );\n                        } else {\n                          return (\n                            <Cell\n                              key={column.id}\n                              row={row}\n                              column={column}\n                              columnStyle={columnStyle}\n                              cellStyle={cellStyle}\n                              reorder={reorder}\n                              focusable={\n                                focus?.row === row.id &&\n                                focus?.column == column.id\n                              }\n                            />\n                          );\n                        }\n                      })}\n                    </div>\n                  );\n                })}\n              </div>\n            </div>\n            {footer && (data || []).length ? (\n              <HeaderFooter\n                type={'footer'}\n                contentWidth={contentWidth}\n                deltaLeft={renderColumns.df}\n                columns={renderColumns.footer}\n                columnStyle={columnStyle}\n              />\n            ) : null}\n          </div>\n        </div>\n      </div>\n      {printConfig ? (\n        <Print\n          config={printConfig}\n          rowStyle={rowStyle}\n          columnStyle={columnStyle}\n          cellStyle={cellStyle}\n          header={header}\n          footer={footer}\n          reorder={reorder}\n        />\n      ) : null}\n    </>\n  );\n}\n\nexport default Layout;\n", "import {\n  useState,\n  useMemo,\n  useEffect,\n  useRef,\n  useCallback,\n  useContext,\n  forwardRef,\n  useImperativeHandle,\n} from 'react';\n\n// core widgets lib\nimport { Locale } from '@svar-ui/react-core';\nimport { en } from '@svar-ui/grid-locales';\n\n// stores\nimport { EventBusRouter } from '@svar-ui/lib-state';\nimport { DataStore } from '@svar-ui/grid-store';\n\n// context\nimport { context } from '@svar-ui/react-core';\nimport StoreContext from '../context';\n\n// svelte store factory (used by DataStore)\nimport { writable } from '@svar-ui/lib-react';\n\n// ui\nimport Layout from './Layout.jsx';\n\nconst camelize = (s) =>\n  s\n    .split('-')\n    .map((part) => (part ? part.charAt(0).toUpperCase() + part.slice(1) : ''))\n    .join('');\n\nconst Grid = forwardRef(function Grid(\n  {\n    data = [],\n    columns = [],\n    rowStyle = null,\n    columnStyle = null,\n    cellStyle = null,\n    selectedRows,\n    select = true,\n    multiselect = false,\n    header = true,\n    footer = false,\n    dynamic = null,\n    overlay = null,\n    reorder = false,\n    onReorder = null,\n    autoRowHeight = false,\n    sizes,\n    split,\n    tree = false,\n    autoConfig = false,\n    init = null,\n    responsive = null,\n    sortMarks,\n    undo = false,\n    hotkeys = null,\n    ...restProps\n  },\n  ref,\n) {\n  // keep latest rest props for event routing\n  const restPropsRef = useRef();\n  restPropsRef.current = restProps;\n\n  // init stores\n  const dataStore = useMemo(() => new DataStore(writable), []);\n  const firstInRoute = useMemo(() => dataStore.in, [dataStore]);\n\n  const lastInRouteRef = useRef(null);\n  if (lastInRouteRef.current === null) {\n    lastInRouteRef.current = new EventBusRouter((a, b) => {\n      const name = 'on' + camelize(a);\n      if (restPropsRef.current && restPropsRef.current[name]) {\n        restPropsRef.current[name](b);\n      }\n    });\n    firstInRoute.setNext(lastInRouteRef.current);\n  }\n\n  // public API\n  const api = useMemo(\n    () => ({\n      getState: dataStore.getState.bind(dataStore),\n      getReactiveState: dataStore.getReactive.bind(dataStore),\n      getStores: () => ({ data: dataStore }),\n      exec: firstInRoute.exec,\n      setNext: (ev) => {\n        lastInRouteRef.current = lastInRouteRef.current.setNext(ev);\n        return lastInRouteRef.current;\n      },\n      intercept: firstInRoute.intercept.bind(firstInRoute),\n      on: firstInRoute.on.bind(firstInRoute),\n      detach: firstInRoute.detach.bind(firstInRoute),\n      getRow: dataStore.getRow.bind(dataStore),\n      getRowIndex: dataStore.getRowIndex.bind(dataStore),\n      getColumn: dataStore.getColumn.bind(dataStore),\n    }),\n    [dataStore, firstInRoute],\n  );\n\n  const [clientWidth, setClientWidth] = useState(0);\n  const [clientHeight, setClientHeight] = useState(0);\n  const [responsiveLevel, setResponsiveLevel] = useState(null);\n  const [responsiveConfig, setResponsiveConfig] = useState(null);\n\n  // auto config columns\n  const finalColumns = useMemo(() => {\n    if (autoConfig && !columns.length && data.length) {\n      const test = data[0];\n      const autoCols = [];\n\n      for (let key in test) {\n        if (key !== 'id' && key[0] !== '$') {\n          let col = {\n            id: key,\n            header: key[0].toUpperCase() + key.slice(1),\n          };\n\n          if (typeof autoConfig === 'object') {\n            col = { ...col, ...autoConfig };\n          }\n          autoCols.push(col);\n        }\n      }\n\n      return autoCols;\n    }\n\n    return (responsiveConfig && responsiveConfig.columns) ?? columns;\n  }, [autoConfig, columns, data, responsiveConfig]);\n\n  const finalSizes = useMemo(\n    () => (responsiveConfig && responsiveConfig.sizes) ?? sizes,\n    [responsiveConfig, sizes],\n  );\n\n  const resize = useCallback(\n    (rect) => {\n      setClientWidth(rect.width);\n      setClientHeight(rect.height);\n\n      if (responsive) {\n        const levels = Object.keys(responsive)\n          .map(Number)\n          .sort((a, b) => a - b);\n\n        const newLevel = levels.find((level) => rect.width <= level) ?? null;\n\n        if (newLevel !== responsiveLevel) {\n          setResponsiveConfig(responsive[newLevel]);\n          setResponsiveLevel(newLevel);\n        }\n      }\n    },\n    [responsive, responsiveLevel],\n  );\n\n\n  const _skin = useContext(context.theme);\n\n  const initOnceRef = useRef(0);\n  useEffect(() => {\n    if (!initOnceRef.current) {\n      if (init) init(api);\n    } else {\n      const prev = dataStore.getState();\n      dataStore.init({\n        data,\n        columns: finalColumns,\n        split: split || prev.split,\n        sizes: finalSizes || prev.sizes,\n        selectedRows: selectedRows || prev.selectedRows,\n        dynamic,\n        tree,\n        sortMarks: sortMarks || prev.sortMarks,\n        undo,\n        reorder,\n        _skin,\n        _select: select,\n      });\n    }\n    initOnceRef.current++;\n  }, [\n    dataStore,\n    data,\n    finalColumns,\n    split,\n    finalSizes,\n    selectedRows,\n    dynamic,\n    tree,\n    sortMarks,\n    undo,\n    reorder,\n    _skin,\n    select,\n    init,\n    api,\n  ]);\n\n  if (initOnceRef.current === 0) {\n    dataStore.init({\n      data,\n      columns: finalColumns,\n      split: split || { left: 0 },\n      sizes: finalSizes || {},\n      selectedRows: selectedRows || [],\n      dynamic,\n      tree,\n      sortMarks: sortMarks || {},\n      undo,\n      reorder,\n      _skin,\n      select,\n    });\n  }\n\n  // expose API via ref\n  useImperativeHandle(\n    ref,\n    () => ({\n      ...api,\n    }),\n    [api],\n  );\n\n  return (\n    <StoreContext.Provider value={api}>\n      <Locale words={en} optional={true}>\n        <Layout\n          header={header}\n          footer={footer}\n          overlay={overlay}\n          rowStyle={rowStyle}\n          columnStyle={columnStyle}\n          cellStyle={cellStyle}\n          onReorder={onReorder}\n          multiselect={multiselect}\n          autoRowHeight={autoRowHeight}\n          clientWidth={clientWidth}\n          clientHeight={clientHeight}\n          responsiveLevel={responsiveLevel}\n          resize={resize}\n          hotkeys={hotkeys}\n        />\n      </Locale>\n    </StoreContext.Provider>\n  );\n});\n\nexport default Grid;\n", "import './HeaderMenuItem.css';\n\nfunction HeaderMenuItem({ item }) {\n  return (\n    <div\n      tabIndex={-1}\n      role=\"menuitem\"\n      aria-label={\n        item.hidden ? `Show ${item.text} column` : `Hide ${item.text} column`\n      }\n    >\n      <div\n        className={'wx-v13lZxja wx-icon' + (item.hidden ? ' wx-hidden' : '')}\n      >\n        <i className=\"wx-v13lZxja wxi-eye\"></i>\n      </div>\n      <span>{item.text}</span>\n    </div>\n  );\n}\n\nexport default HeaderMenuItem;\n", "import { useEffect, useMemo } from 'react';\nimport { ContextMenu, registerMenuItem } from '@svar-ui/react-menu';\nimport HeaderMenuItem from './HeaderMenuItem.jsx';\nimport { useStoreLater } from '@svar-ui/lib-react';\n\nexport default function HeaderMenu({ columns = null, api, children }) {\n  useEffect(() => {\n    registerMenuItem('table-header', HeaderMenuItem);\n  }, []);\n\n  function getLabel(col) {\n    for (let i = col.header.length - 1; i >= 0; i--) {\n      const text = col.header[i].text;\n      if (text) return text;\n    }\n    return col.id;\n  }\n\n  function headerMenuClick(e) {\n    const col = e.action;\n    if (col) {\n      api.exec('hide-column', { id: col.id, mode: !col.hidden });\n    }\n  }\n\n  function open(id) {\n    return id;\n  }\n\n  const rColumns = useStoreLater(api, '_columns');\n\n  const headerMenuOptions = useMemo(() => {\n    if (api) {\n      const source = Array.isArray(rColumns) ? rColumns : [];\n      const included = columns ? source.filter((c) => columns[c.id]) : source;\n\n      return included.map((c) => {\n        const text = getLabel(c);\n        return {\n          id: c.id,\n          text,\n          type: 'table-header',\n          hidden: c.hidden,\n        };\n      });\n    } else {\n      return [];\n    }\n  }, [api, columns, rColumns]);\n\n  return (\n    <ContextMenu\n      dataKey=\"headerId\"\n      options={headerMenuOptions}\n      onClick={headerMenuClick}\n      at=\"point\"\n      resolver={open}\n    >\n      {typeof children === 'function' ? children() : children}\n    </ContextMenu>\n  );\n}\n", "import { useEffect, useRef, useState } from 'react';\nimport { getRenderValue } from '@svar-ui/grid-store';\nimport './Tooltip.css';\n\nfunction Tooltip(props) {\n  const { content: Content = null, api, children } = props;\n\n  const areaRef = useRef(null);\n  const tooltipRef = useRef(null);\n\n  const [areaCoords, setAreaCoords] = useState();\n  const [tooltipData, setTooltipData] = useState();\n  const [pos, setPos] = useState();\n\n  function findAttribute(node) {\n    while (node) {\n      if (node.getAttribute) {\n        const id = node.getAttribute('data-row-id');\n        const colId = node.getAttribute('data-col-id');\n        if (id && api && colId) {\n          const col = api.getColumn(colId);\n          return { id, col, target: node };\n        }\n      }\n      node = node.parentNode;\n    }\n    return { id: null, col: null, target: null };\n  }\n\n  useEffect(() => {\n    const node = tooltipRef.current;\n    if (node && areaCoords && pos) {\n      let tooltipCoords = node.getBoundingClientRect();\n      let newLeft = pos.left;\n      let newTop = pos.top;\n      if (tooltipCoords.right >= areaCoords.right) {\n        newLeft = areaCoords.width - tooltipCoords.width - 5;\n      }\n      if (tooltipCoords.bottom >= areaCoords.bottom) {\n        newTop = pos.top - (tooltipCoords.bottom - areaCoords.bottom + 2);\n      }\n      if (newLeft !== pos.left || newTop !== pos.top) {\n        setPos({ ...pos, left: newLeft, top: newTop });\n      }\n    }\n  }, [areaCoords, pos]);\n\n  const timerRef = useRef();\n  const TIMEOUT = 300;\n\n  const debounce = (code) => {\n    clearTimeout(timerRef.current);\n    timerRef.current = setTimeout(() => {\n      code();\n    }, TIMEOUT);\n  };\n\n  function move(e) {\n    const { id, target, col } = findAttribute(e.target);\n    setPos(null);\n    if (!id) {\n      clearTimeout(timerRef.current);\n      return;\n    }\n    const clientX = e.clientX;\n\n    debounce(() => {\n      let text = '';\n      if (id) {\n        const data = getTooltipData(id);\n        setTooltipData(data);\n        text = getTooltipText(col, data);\n      }\n      const targetCoords = target.getBoundingClientRect();\n      const areaEl = areaRef.current;\n      if (!areaEl) return;\n      const areaRect = areaEl.getBoundingClientRect();\n      setAreaCoords(areaRect);\n      const top = targetCoords.top + targetCoords.height - areaRect.top;\n      const left = clientX - areaRect.left;\n      setPos({ top, left, col, text });\n    });\n  }\n\n  function getTooltipData(id) {\n    return api.getRow(id);\n  }\n\n  function getTooltipText(col, data) {\n    data = data || tooltipData;\n    if (typeof col.tooltip === 'function') return col.tooltip(data);\n    return getRenderValue(data, col) || '';\n  }\n\n  return (\n    <div className=\"wx-RYccULtD wx-area\" ref={areaRef} onMouseMove={move}>\n      {pos && pos.col.tooltip !== false && (Content || pos.text) ? (\n        <div\n          className=\"wx-RYccULtD tooltip\"\n          role=\"alert\"\n          tabIndex={0}\n          ref={tooltipRef}\n          style={{ top: pos.top + 'px', left: pos.left + 'px' }}\n        >\n          {Content ? <Content data={tooltipData} /> : pos.text}\n        </div>\n      ) : null}\n      {children}\n    </div>\n  );\n}\n\nexport default Tooltip;\n", "import { useContext, useMemo } from 'react';\nimport { ContextMenu as WxContextMenu } from '@svar-ui/react-menu';\nimport { context } from '@svar-ui/react-core';\nimport { useStoreLater } from '@svar-ui/lib-react';\n\nimport {\n  defaultMenuOptions,\n  assignChecks,\n  handleAction,\n} from '@svar-ui/grid-store';\nimport { locale } from \"@svar-ui/lib-dom\";\nimport { en } from \"@svar-ui/grid-locales\";\nimport './ContextMenu.css';\n\nfunction ContextMenu({\n  api,\n  options = [...defaultMenuOptions],\n  at = 'point',\n  resolver,\n  dataKey,\n  filter,\n  css,\n  children,\n  handler,\n  onClick,\n}) {\n  const i18n = useContext(context.i18n);\n  const _ = useMemo(() => i18n ? i18n.getGroup('grid') : locale(en).getGroup('grid'), [i18n]);\n\n  const selectedRows = useStoreLater(api, 'selectedRows');\n  const data = useStoreLater(api, 'data');\n  const reorder = useStoreLater(api, 'reorder');\n\n  const normalizedOptions = useMemo(() => {\n    const filtered = filterItems(options);\n    const normalized = assignChecks(filtered);\n    applyLocale(normalized);\n    return normalized;\n  }, [options, reorder, data]);\n\n  function applyLocale(options) {\n    options.forEach(op => {\n      if (op.text) op.text = _(op.text);\n      if (op.subtext) op.subtext = _(op.subtext);\n      if (op.data) op.data = applyLocale(op.data);\n    });\n  }\n\n  const finalOptions = useMemo(() => {\n    const opts = [];\n    normalizedOptions.forEach(item => {\n      switch (item.id) {\n        case 'move-item:up':\n        case 'move-item:down':\n        case 'paste-row': {\n          if (!item.isDisabled || !api) {\n            opts.push(item);\n            return;\n          }\n          \n          const disabled = item.isDisabled(\n            item.id === 'paste-row' ? api : selectedRows,\n            data\n          );\n\n          opts.push({\n            ...item,\n            disabled,\n          });\n          break;\n        }\n        default: {\n          opts.push(item);\n          break;\n        }\n      }\n    });\n    return opts;\n  }, [normalizedOptions, selectedRows, data, api]);\n\n  function getItem(id) {\n    if (!selectedRows.includes(id)) {\n      api.exec('select-row', { id });\n    }\n    return id;\n  }\n\n  const handleClicks = (ev) => {\n    const option = ev.action;\n    if (option) handleAction(api, option.id);\n    onClick && onClick(ev);\n  };\n\n  function filterItems(items) {\n    if (reorder) return items;\n    return items.filter(({ id }) => {\n      return !(id === 'move-item:up' || id === 'move-item:down');\n    });\n  }\n\n  const resolverProp = resolver !== undefined ? resolver : getItem;\n\n  return (\n    <WxContextMenu\n      css={`wx-KKGLK8TH wx-table-menu ${css}`}\n      at={at}\n      dataKey={dataKey}\n      handler={handler}\n      options={finalOptions}\n      resolver={resolverProp}\n      filter={filter}\n      onClick={handleClicks}\n    >\n      {children}\n    </WxContextMenu>\n  );\n}\n\nexport default ContextMenu;\n", "import { useMemo, useContext } from 'react';\nimport { Toolbar } from '@svar-ui/react-toolbar';\nimport {\n\tdefaultToolbarButtons,\n\tassignChecks,\n\thandleAction,\n} from '@svar-ui/grid-store';\nimport { locale } from '@svar-ui/lib-dom';\nimport { en } from '@svar-ui/grid-locales';\nimport { context } from '@svar-ui/react-core';\nimport { useStoreLater } from '@svar-ui/lib-react';\n\nexport default function ToolbarComponent({\n\tapi,\n\titems = [...defaultToolbarButtons],\n\tonClick,\n\t...restProps\n}) {\n\tconst i18nContext = useContext(context.i18n);\n\tconst _ =\n\t\ti18nContext?.getGroup('grid') || locale(en).getGroup('grid');\n\n\tconst selectedRows = useStoreLater(api, 'selectedRows');\n\tconst data = useStoreLater(api, 'data');\n\tconst history = useStoreLater(api, 'history');\n\tconst reorder = useStoreLater(api, 'reorder');\n\tconst undo = useStoreLater(api, 'undo');\n\n\tconst rowActions = [\n\t\t'open-editor',\n\t\t'delete-row',\n\t\t'copy-row',\n\t\t'cut-row',\n\t\t'paste-row',\n\t\t'move-item:up',\n\t\t'move-item:down',\n\t];\n\tconst historyActions = ['undo', 'redo'];\n\n\tconst normalizedItems = useMemo(() => {\n\t\tconst filtered = filterItems(items);\n\t\tconst normalized = assignChecks(filtered);\n\t\tapplyLocale(normalized);\n\t\treturn normalized;\n\n\t\tfunction filterItems(items) {\n\t\t\tif (undo && reorder) return items;\n\t\t\treturn items.filter(({ id }) => {\n\t\t\t\treturn !(\n\t\t\t\t\t(!undo && (id === 'undo' || id === 'redo')) ||\n\t\t\t\t\t(!reorder &&\n\t\t\t\t\t\t(id === 'move-item:up' || id === 'move-item:down'))\n\t\t\t\t);\n\t\t\t});\n\t\t}\n\n\t\tfunction applyLocale(options) {\n\t\t\toptions.forEach(op => {\n\t\t\t\tif (op.text) op.text = _(op.text);\n\t\t\t\tif (op.menuText) op.menuText = _(op.menuText);\n\t\t\t\tif (op.items) op.items = applyLocale(op.items);\n\t\t\t});\n\t\t}\n\t}, [items, undo, reorder, _]);\n\n\tconst buttons = useMemo(() => {\n\t\tconst finalButtons = [];\n\t\tconst selected = selectedRows?.length;\n\t\tnormalizedItems.forEach(item => {\n\t\t\tconst action = item.id;\n\t\t\tif (action === 'add-row') {\n\t\t\t\tfinalButtons.push(item);\n\t\t\t} else if (rowActions.includes(action)) {\n\t\t\t\tif (!selected) return;\n\t\t\t\tfinalButtons.push({\n\t\t\t\t\t...item,\n\t\t\t\t\tdisabled:\n\t\t\t\t\t\titem.isDisabled &&\n\t\t\t\t\t\titem.isDisabled(\n\t\t\t\t\t\t\taction === 'paste-row' ? api : selectedRows,\n\t\t\t\t\t\t\tdata\n\t\t\t\t\t\t),\n\t\t\t\t});\n\t\t\t} else if (historyActions.includes(action)) {\n\t\t\t\tfinalButtons.push({\n\t\t\t\t\t...item,\n\t\t\t\t\tdisabled: item.isDisabled(history),\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tfinalButtons.push(item);\n\t\t\t}\n\t\t});\n\t\treturn finalButtons;\n\t}, [normalizedItems, selectedRows, data, history, api, rowActions, historyActions]);\n\n\tconst handleClicks = ev => {\n\t\tconst option = ev.item;\n\t\tif (option) handleAction(api, option.id);\n\t\tonClick && onClick(ev);\n\t};\n\n\treturn <Toolbar items={buttons} onClick={handleClicks} {...restProps} />;\n}\n", "import { Material as CoreMaterial } from '@svar-ui/react-core';\nimport './Material.css';\n\nfunction Material({ fonts = true, children }) {\n  if (children) {\n    return <CoreMaterial fonts={fonts}>{children}</CoreMaterial>;\n  } else {\n    return <CoreMaterial fonts={fonts} />;\n  }\n}\n\nexport default Material;\n", "import { Willow as WillowCore } from '@svar-ui/react-core';\nimport './Willow.css';\n\nfunction Willow({ fonts = true, children }) {\n  if (children) {\n    return <WillowCore fonts={fonts}>{children}</WillowCore>;\n  } else {\n    return <WillowCore fonts={fonts} />;\n  }\n}\n\nexport default Willow;\n", "import { WillowDark as WillowDarkCore } from '@svar-ui/react-core';\nimport './WillowDark.css';\n\nfunction WillowDark({ fonts = true, children }) {\n  if (children) {\n    return <WillowDarkCore fonts={fonts}>{children}</WillowDarkCore>;\n  } else {\n    return <WillowDarkCore fonts={fonts} />;\n  }\n}\n\nexport default WillowDark;\n", "import Grid from './components/Grid.jsx';\nimport HeaderMenu from './components/menus/HeaderMenu.jsx';\nimport Tooltip from './components/Tooltip.jsx';\nimport ContextMenu from './components/menus/ContextMenu.jsx';\nimport Toolbar from './components/Toolbar.jsx';\n\nimport Material from './themes/Material.jsx';\nimport Willow from './themes/Willow.jsx';\nimport WillowDark from './themes/WillowDark.jsx';\n\nexport {\n  getEditorConfig,\n  defaultMenuOptions,\n  defaultToolbarButtons,\n} from '@svar-ui/grid-store';\n\nimport { setEnv, env } from '@svar-ui/lib-dom';\nsetEnv(env);\n\nexport {\n  Grid,\n  HeaderMenu,\n  Tooltip,\n  ContextMenu,\n  Material,\n  Willow,\n  WillowDark,\n  Toolbar,\n};\n", "const handlers = {};\nexport function getItemHandler(type) {\n  return typeof type !== 'undefined'\n    ? handlers[type] || type\n    : handlers['text'];\n}\nexport function registerEditorItem(type, handler) {\n  handlers[type] = handler;\n}\n", "export default {\n  editor: {},\n};\n", "import { useEffect, useMemo, useRef, useContext } from 'react';\nimport { Field } from '@svar-ui/react-core';\nimport { context } from '@svar-ui/react-core';\nimport { getItemHandler } from '../helpers';\nimport './FormEditor.css';\n\nexport default function FormEditor(props) {\n  const {\n    editors,\n    data,\n    css = '',\n    errors,\n    focus = false,\n    onClick,\n    children,\n    onChange,\n  } = props;\n\n  const root = useRef(null);\n\n  useEffect(() => {\n    if (focus) {\n      const focused = document.activeElement;\n      if (focused && root.current && root.current.contains(focused)) return;\n\n      const input = root.current\n        ? root.current.querySelector(\n            'input:not([disabled]), textarea:not([disabled]), select:not([disabled])',\n          )\n        : null;\n\n      if (input) {\n        setTimeout(() => {\n          if (typeof input.select === 'function') {\n            input.select();\n          }\n          if (typeof input.focus === 'function') {\n            input.focus();\n          }\n        }, 300);\n      }\n    }\n  }, []);\n\n  const i18n = useContext(context.i18n);\n  const _ = useMemo(() => i18n.getGroup('editor'), [i18n]);\n\n  const overlay = useMemo(\n    () =>\n      editors.config[0].comp === 'readonly' &&\n      editors.config.every((editor) => !Object.keys(data).includes(editor.key)),\n    [editors, data],\n  );\n\n  return (\n    <div className={'wx-s2aE1xdZ wx-sections ' + css} ref={root}>\n      {children}\n      {overlay ? (\n        <div className=\"wx-s2aE1xdZ wx-overlay\">{_('No data')}</div>\n      ) : null}\n      {editors.config.map((editor) => {\n        if (!editor.hidden) {\n          const { key, onChange: onChangeEditor, ...otherProps } = editor;\n          if (editor.comp === 'readonly' || editor.comp === 'section') {\n            const Component = getItemHandler(editor.comp);\n            return (\n              <Component\n                key={key}\n                fieldKey={key}\n                label={editor.label}\n                value={data[key]}\n                {...otherProps}\n                onClick={onClick}\n              />\n            );\n          } else {\n            const Component2 = getItemHandler(editor.comp);\n            return (\n              <div key={key}>\n                <Field\n                  label={\n                    editor.labelTemplate\n                      ? editor.labelTemplate(data[key])\n                      : (editor.label ?? '')\n                  }\n                  required={editor.required}\n                >\n                    <Component2\n                      key={key}\n                      fieldKey={key}\n                      {...otherProps}\n                      onChange={\n                        onChangeEditor ||\n                        ((ev) => {\n                          onChange &&\n                            onChange({\n                              value: ev.value,\n                              key,\n                              input: ev.input,\n                            });\n                        })\n                      }\n                      label={undefined}\n                      error={errors && errors[key]}\n                      value={data[key]}\n                    />\n                </Field>\n                {errors && errors[key] && editor.validationMessage ? (\n                  <div className=\"wx-s2aE1xdZ wx-message\">\n                    {editor.validationMessage}\n                  </div>\n                ) : null}\n              </div>\n            );\n          }\n        }\n        return null;\n      })}\n    </div>\n  );\n}\n", "import { uid, isSame } from '@svar-ui/lib-state';\n\nfunction rawGetter(key) {\n  if (typeof key === 'string' && key.includes('.')) {\n    const parts = key.split('.');\n    return (obj) => {\n      let out = obj;\n      parts.forEach((p) => {\n        out = out[p];\n      });\n      return out;\n    };\n  }\n\n  return (obj) => obj[key];\n}\nfunction rawSetter(key) {\n  if (typeof key === 'string' && key.includes('.')) {\n    const parts = key.split('.');\n    return (obj, v) => {\n      let out = obj;\n      parts.forEach((p, i) => {\n        if (i === parts.length - 1) out[p] = v;\n        else out = out[p];\n      });\n    };\n  }\n\n  return (obj, v) => (obj[key] = v);\n}\n\nexport function itemsToEditors(sections) {\n  const config = sections.map((s) => {\n    const obj = { ...s };\n    if (s.config) Object.assign(obj, s.config);\n\n    obj.key = s.key || uid();\n    obj.setter = s.setter || rawSetter(s.key);\n    obj.getter = s.getter || rawGetter(s.key);\n    return obj;\n  });\n\n  const getValues = (raw) => {\n    const out = {};\n    config.forEach((ed) => {\n      if (ed.comp === 'section') return;\n      if (ed.getter) out[ed.key] = ed.getter(raw);\n      else out[ed.key] = raw[ed.key];\n    });\n    return out;\n  };\n\n  const setValues = (out, values, changes) => {\n    const fields = changes.length\n      ? changes.map((key) => config.find((a) => a.key === key))\n      : config;\n    fields.forEach((ed) => {\n      if (ed.setter) ed.setter(out, values[ed.key]);\n      else out[ed.key] = values[ed.key];\n    });\n\n    return out;\n  };\n\n  const diff = (raw, values) => {\n    const initial = getValues(raw);\n    const changes = [];\n    config.forEach((ed) => {\n      const a = initial[ed.key];\n      const b = values[ed.key];\n      // we can have a situation when initial value is undefined\n      // but empty editor will return empty value instead of undefined\n      // this behavior is correct, but we need to ignore this case\n      if (!isSame(a, b) && (a !== undefined || !!b)) {\n        changes.push(ed.key);\n      }\n    });\n\n    return changes;\n  };\n\n  const validateValues = (values, changes, _) => {\n    let any = 0;\n    const errors = {};\n\n    const fields = changes?.length\n      ? changes.map((key) => config.find((a) => a.key === key))\n      : config;\n\n    fields.forEach((ed) => {\n      if (ed.required && !values[ed.key]) {\n        errors[ed.key] = {\n          errorType: 'required',\n        };\n        ed.validationMessage =\n          ed.validationMessage ?? _('This field is required');\n        any++;\n      } else if (ed.validation && !ed.validation(values[ed.key])) {\n        errors[ed.key] = {\n          errorType: 'validation',\n        };\n        ed.validationMessage = ed.validationMessage ?? _('Invalid value');\n        any++;\n      }\n    });\n\n    return any > 0 ? errors : null;\n  };\n\n  return {\n    config: config.filter((x) => x.comp !== 'hidden'),\n    getValues,\n    setValues,\n    diff,\n    validateValues,\n  };\n}\n", "import { useState, useEffect, useMemo, useContext } from 'react';\nimport { itemsToEditors } from '../editor';\nimport { deepCopy, isSame } from '@svar-ui/lib-state';\nimport { useWritableProp } from '@svar-ui/lib-react';\nimport { context } from '@svar-ui/react-core';\n\nexport default function Values({\n  values: valuesProp,\n  items,\n  css,\n  activeBatch,\n  autoSave,\n  focus,\n  readonly,\n  topBar = true,\n  bottomBar = true,\n  layout = 'default',\n  placement = 'inline',\n  view: View,\n  children,\n  onChange,\n  onSave,\n  onAction,\n  onValidation,\n  hotkeys,\n}) {\n  const i18n = useContext(context.i18n);\n  const _ = i18n.getGroup('editor');\n\n  const [values, setValues] = useWritableProp(valuesProp);\n\n  const [activatedSection, setActivatedSection] = useState(null);\n\n  const editors = useMemo(() => {\n    const editorsObj = itemsToEditors(items);\n\n    if (activatedSection) {\n      editorsObj.config.forEach((x) => {\n        if (x.comp === 'section') {\n          if (x.key === activatedSection) {\n            if (x.sectionMode === 'accordion') {\n              if (!x.activeSection) {\n                editorsObj.config.forEach((y) => {\n                  if (y.comp === 'section' && y.key !== x.key) {\n                    y.activeSection = false;\n                  }\n                });\n                x.activeSection = true;\n              }\n            } else {\n              x.activeSection = !x.activeSection;\n            }\n          }\n        }\n      });\n    }\n\n    let sections = new Set();\n    let exclusive = null;\n\n    editorsObj.config.forEach((x) => {\n      if (x.sectionMode === 'exclusive' && x.activeSection) exclusive = x.key;\n      if (x.activeSection) sections.add(x.key);\n    });\n\n    editorsObj.config.forEach((x) => {\n      x.hidden =\n        x.hidden ||\n        (activeBatch && activeBatch !== x.batch) ||\n        (exclusive && x.key != exclusive && x.section !== exclusive) ||\n        (x.section && !sections.has(x.section));\n    });\n\n    if (readonly) {\n      return {\n        ...editorsObj,\n        config: editorsObj.config.map((s) => ({ ...s, comp: 'readonly' })),\n        diff: () => [],\n      };\n    }\n    return editorsObj;\n  }, [items, activatedSection, activeBatch, readonly]);\n\n  const [actualValues, setActualValues] = useState({});\n  const [data, setData] = useState({});\n\n  const d = values;\n\n  useEffect(() => {\n    if (values !== undefined) {\n      setActualValues(deepCopy(values));\n      setData(deepCopy(values));\n      if (d.errors) {\n        d.errors = runValidation();\n      }\n    }\n  }, [values]);\n\n  const [notSaved, setNotSaved] = useState([]);\n  useEffect(() => {\n    if (values) setNotSaved([]);\n  }, [values]);\n\n  function getUniqueFields(arr) {\n    return [...new Set(arr)];\n  }\n\n  function runValidation(changes) {\n    const check = editors.validateValues(actualValues, changes, _);\n\n    if (!isSame(check, d.errors)) {\n      onValidation && onValidation({ errors: check, values: actualValues });\n    }\n\n    return check;\n  }\n\n  function handleUpdate(changes, updateData) {\n    if (autoSave && !d.errors) {\n      const updated = editors.setValues(values, updateData ?? data, changes);\n      // Ensure the writable prop reflects the updated values\n      setValues(updated);\n      onSave && onSave({ changes, values: updated });\n    } else {\n      setNotSaved(changes);\n    }\n  }\n\n  function handleChanges({ value, key, input }) {\n    let newData = { ...(data || {}), [key]: value };\n    const event = {\n      key,\n      value,\n      update: newData,\n    };\n    if (input) event.input = input;\n    onChange && onChange(event);\n\n    if (!values) return;\n\n    newData = event.update;\n    setData(newData);\n\n    const changes = editors.diff(values, newData);\n\n    const newActualValues = editors.setValues(\n      { ...(actualValues || {}) },\n      newData,\n      getUniqueFields([...changes, key]),\n    );\n    setActualValues(newActualValues);\n\n    if (changes.length) {\n      const fieldsToValidate = autoSave\n        ? []\n        : getUniqueFields([...changes, ...Object.keys(d.errors ?? {}), key]);\n      d.errors = runValidation(fieldsToValidate);\n      handleUpdate(changes, newData);\n    } else {\n      const errorsFields = Object.keys(d.errors ?? {});\n      if (errorsFields.length) d.errors = runValidation(errorsFields);\n      setNotSaved([]);\n    }\n  }\n\n  function saveAction() {\n    if (!notSaved.length) return;\n    if (!autoSave) d.errors = runValidation();\n    if (!d.errors) {\n      onSave &&\n        onSave({\n          changes: notSaved,\n          values: actualValues,\n        });\n      const updated = editors.setValues(values, data, notSaved);\n      setValues(updated);\n      setNotSaved([]);\n\n      setValues({ ...actualValues });\n    }\n  }\n\n  function handleAction({ item }) {\n    if (item.id === 'save') {\n      saveAction();\n    } else if (item.id === 'toggle-section') {\n      setActivatedSection(item.key);\n    }\n    onAction && onAction({ item, values: actualValues, changes: notSaved });\n  }\n\n  return (\n    <View\n      topBar={topBar}\n      bottomBar={bottomBar}\n      placement={placement}\n      layout={layout}\n      readonly={readonly}\n      autoSave={autoSave}\n      css={css}\n      data={data}\n      editors={editors}\n      focus={focus}\n      hotkeys={hotkeys}\n      errors={d.errors}\n      onClick={handleAction}\n      onKeyDown={handleAction}\n      onChange={handleChanges}\n    >\n      {children}\n    </View>\n  );\n}\n", "import { Locale } from '@svar-ui/react-core';\nimport en from '../en.js';\n\nimport Editor from './FormEditor.jsx';\nimport Values from './Values.jsx';\nimport './Form.css';\n\nfunction Form({\n  values = {},\n  items = [],\n  css = '',\n  activeBatch = null,\n  focus = false,\n  autoSave = true,\n  readonly = false,\n  children,\n  ...restProps\n}) {\n  const processedRestProps = {};\n  for (const key in restProps) {\n    if (/^on[a-z]/.test(key)) {\n      const newKey = 'on' + key.charAt(2).toUpperCase() + key.slice(3);\n      // If a camelCase version already exists on restProps, prefer that and skip the lower-case variant\n      if (newKey in restProps) {\n        continue;\n      }\n      processedRestProps[newKey] = restProps[key];\n      continue;\n    }\n    processedRestProps[key] = restProps[key];\n  }\n\n  return (\n    <Locale words={en} optional={true}>\n      <div className=\"wx-H902AF2Y wx-content\">\n        <Values\n          view={Editor}\n          values={values}\n          items={items}\n          css={css}\n          focus={focus}\n          activeBatch={activeBatch}\n          autoSave={autoSave}\n          readonly={readonly}\n          {...processedRestProps}\n        >\n          {children}\n        </Values>\n      </div>\n    </Locale>\n  );\n}\n\nexport default Form;\n", "import { useMemo } from 'react';\nimport Editor from './FormEditor.jsx';\nimport './Columns.css';\n\nfunction Columns(props) {\n  const { editors, data, layout, errors, focus, onClick, onChange } = props;\n\n  const columns = useMemo(() => {\n    let cols = [];\n    if (layout === 'columns') {\n      cols = [\n        { ...editors, config: [] },\n        { ...editors, config: [] },\n      ];\n      editors.config.forEach((field) => {\n        const index = field.column === 'left' ? 0 : 1;\n        cols[index].config.push(field);\n      });\n\n      if (cols[0].config.length) {\n        const obj = cols[0].config[0];\n        if (obj.comp === 'text') {\n          cols[0][0] = {\n            ...obj,\n            css: 'title',\n            label: '',\n          };\n        }\n      }\n    }\n    return cols;\n  }, [layout, editors]);\n\n  if (layout === 'columns') {\n    return (\n      <div className=\"wx-bNrSbszs wx-cols\">\n        <div className=\"wx-bNrSbszs wx-left\">\n          <Editor\n            editors={columns[0]}\n            data={data}\n            errors={errors}\n            onClick={onClick}\n            onChange={onChange}\n          />\n        </div>\n        <div className=\"wx-bNrSbszs wx-right\">\n          <Editor\n            editors={columns[1]}\n            data={data}\n            focus={focus}\n            errors={errors}\n            onClick={onClick}\n            onChange={onChange}\n          />\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <Editor\n      editors={editors}\n      data={data}\n      focus={focus}\n      errors={errors}\n      onClick={onClick}\n      onChange={onChange}\n    />\n  );\n}\n\nexport default Columns;\n", "import { useCallback } from 'react';\nimport { Toolbar as WxToolbar } from '@svar-ui/react-toolbar';\nimport './Toolbar.css';\n\nfunction Toolbar({\n  items,\n  values = null,\n  top = true,\n  onClick,\n  onChange: onChangeForm,\n}) {\n  const onChange = useCallback(\n    ({ item, value }) => {\n      onChangeForm && onChangeForm({ key: item.key, value });\n    },\n    [onChangeForm],\n  );\n\n  return items.length ? (\n    <div\n      className={`wx-66OW1j0R wx-editor-toolbar ${top ? 'wx-topbar' : 'wx-bottom'}`}\n    >\n      <WxToolbar\n        items={items}\n        values={values}\n        onClick={onClick}\n        onChange={onChange}\n      />\n    </div>\n  ) : null;\n}\n\nexport default Toolbar;\n", "export const Spacer = () => ({ comp: 'spacer' });\nexport const CancelButton = (_) => ({\n  comp: 'button',\n  text: _('Cancel'),\n  id: 'cancel',\n});\nexport const SaveButton = (_) => ({\n  type: 'primary',\n  comp: 'button',\n  text: _('Save'),\n  id: 'save',\n});\nexport const CloseIcon = () => ({\n  comp: 'icon',\n  icon: 'wxi-close',\n  id: 'close',\n});\n", "import { useContext, useMemo, useRef } from 'react';\nimport { context } from '@svar-ui/react-core';\nimport { useHotkeys } from '@svar-ui/lib-react';\n\nimport Columns from './Columns.jsx';\nimport Toolbar from './buttons/Toolbar.jsx';\n\nimport {\n  SaveButton,\n  CancelButton,\n  CloseIcon,\n  Spacer,\n} from './buttons/buttons.js';\n\nimport './Panel.css';\n\nexport default function Panel(props) {\n  const {\n    data,\n    editors,\n    focus,\n    css,\n    topBar,\n    bottomBar,\n    layout,\n    placement,\n    errors,\n    readonly,\n    autoSave,\n    children,\n    onClick,\n    onKeyDown,\n    onChange,\n    hotkeys,\n  } = props;\n\n  const i18n = useContext(context.i18n);\n  const _ = useMemo(() => i18n.getGroup('editor'), [i18n]);\n\n  const autoBars = useMemo(\n    () => topBar === true && bottomBar === true,\n    [topBar, bottomBar],\n  );\n\n  const tbar = useMemo(() => {\n    let bar = topBar && topBar.items ? topBar.items.map((b) => ({ ...b })) : [];\n\n    if (autoBars) {\n      if (!readonly) {\n        if (autoSave) bar = [Spacer(), CloseIcon()];\n        else if (placement !== 'modal')\n          bar = [Spacer(), CancelButton(_), SaveButton(_)];\n\n        if (layout === 'columns' && !bar.length)\n          bar = [Spacer(), SaveButton(_), CancelButton(_)];\n      } else {\n        bar = [Spacer(), CloseIcon()];\n      }\n    }\n\n    return bar;\n  }, [topBar, autoBars, readonly, autoSave, placement, layout, _]);\n\n  const bbar = useMemo(() => {\n    let bar =\n      bottomBar && bottomBar.items\n        ? bottomBar.items.map((b) => ({ ...b }))\n        : [];\n\n    if (autoBars) {\n      if (!readonly) {\n        if (placement === 'modal' && !autoSave)\n          bar = [Spacer(), SaveButton(_), CancelButton(_)];\n        if (layout === 'columns' && tbar.length) bar = [];\n      }\n    }\n\n    return bar;\n  }, [bottomBar, autoBars, readonly, placement, autoSave, layout, tbar, _]);\n\n  const buttons = useMemo(() => [...tbar, ...bbar], [tbar, bbar]);\n\n  const rootRef = useRef(null);\n  const getHotkeyRef = useRef(null);\n  getHotkeyRef.current = (event, ...args) => {\n    const bi = buttons.findIndex(b => args.includes(b.id));\n    if (bi === -1) return false;\n  \n    const target = event.target;\n    const item = buttons[bi];\n\n    if (\n      event.key == \"Escape\" &&\n      (target.closest(\".wx-combo\") ||\n        target.closest(\".wx-multicombo\") ||\n        target.closest(\".wx-richselect\"))\n    )\n    return;\n\n    if (\n      event.key == \"Delete\" &&\n      (target.tagName === \"INPUT\" || target.tagName === \"TEXTAREA\")\n    )\n    return;\n\n    event.preventDefault();\n    onKeyDown && onKeyDown({ item });    \n  };\n  \n\n  const hotkeysConfig = useMemo(() => {\n    if (hotkeys === false) return {};\n\n    return { \n      'ctrl+s': ev => getHotkeyRef.current(ev, 'save'),\n      'escape': ev => getHotkeyRef.current(ev, 'cancel', 'close'),\n      'ctrl+d': ev => getHotkeyRef.current(ev, 'delete'),\n      ...(hotkeys || {}),\n    };\n  }, [hotkeys]);\n  useHotkeys(hotkeysConfig, rootRef);\n\n  return (\n    <div className={css ? 'wx-85HDaNoA ' + css : 'wx-85HDaNoA'} ref={rootRef}>\n      <Toolbar\n        {...(topBar && typeof topBar === 'object' ? topBar : {})}\n        items={tbar}\n        values={data}\n        onClick={onClick}\n        onChange={onChange}\n      />\n      <div\n        className={`wx-85HDaNoA wx-content${layout === 'columns' ? ' wx-layout-columns' : ''}`}\n      >\n        {children}\n        <Columns\n          editors={editors}\n          layout={layout}\n          data={data}\n          focus={focus}\n          errors={errors}\n          onClick={onClick}\n          onChange={onChange}\n        />\n        <Toolbar\n          {...(bottomBar && typeof bottomBar === 'object' ? bottomBar : {})}\n          items={bbar}\n          values={data}\n          top={false}\n          onClick={onClick}\n          onChange={onChange}\n        />\n      </div>\n    </div>\n  );\n}\n", "import { ModalArea, SideArea } from '@svar-ui/react-core';\nimport Panel from './Panel.jsx';\nimport './Layout.css';\n\nexport default function Layout(props) {\n  const { css, onClick, placement, ...restProps } = props;\n\n  function handleClose() {\n    onClick && onClick({ item: { id: 'close' } });\n  }\n\n  if (placement === 'modal') {\n    return (\n      <ModalArea>\n        <Panel\n          css={`wx-panel ${css}`}\n          onClick={onClick}\n          placement={placement}\n          {...restProps}\n        />\n      </ModalArea>\n    );\n  } else if (placement === 'sidebar') {\n    return (\n      <SideArea onCancel={handleClose}>\n        <Panel\n          css={`wx-panel ${css}`}\n          onClick={onClick}\n          placement={placement}\n          {...restProps}\n        />\n      </SideArea>\n    );\n  } else {\n    return (\n      <Panel\n        css={`wx-inline-form ${css}`}\n        onClick={onClick}\n        placement={placement}\n        {...restProps}\n      />\n    );\n  }\n}\n", "import { Locale } from '@svar-ui/react-core';\nimport en from '../en.js';\n\nimport Layout from './Layout.jsx';\nimport Values from './Values.jsx';\n\nexport default function Editor(props) {\n  const {\n    values = {},\n    items = [],\n    css = '',\n    activeBatch = null,\n    topBar = true,\n    bottomBar = true,\n    focus = false,\n    autoSave = false,\n    layout = 'default',\n    readonly = false,\n    placement = 'inline',\n    children,\n    ...restProps\n  } = props;\n\n  const normalizedRestProps = Object.keys(restProps).reduce((acc, key) => {\n    if (/^on[a-z]/.test(key)) {\n      const newKey = 'on' + key.charAt(2).toUpperCase() + key.slice(3);\n      if (newKey in restProps) {\n        // Prefer existing camelCase prop if present; keep original key as-is to avoid overwriting\n        acc[key] = restProps[key];\n      } else {\n        acc[newKey] = restProps[key];\n      }\n    } else {\n      acc[key] = restProps[key];\n    }\n    return acc;\n  }, {});\n\n  return (\n    <Locale words={en} optional={true}>\n      <Values\n        view={Layout}\n        values={values}\n        items={items}\n        css={css}\n        activeBatch={activeBatch}\n        topBar={topBar}\n        bottomBar={bottomBar}\n        focus={focus}\n        autoSave={autoSave}\n        layout={layout}\n        readonly={readonly}\n        placement={placement}\n        {...normalizedRestProps}\n      >\n        {children}\n      </Values>\n    </Locale>\n  );\n}\n", "import { Material as CoreMaterial } from '@svar-ui/react-core';\nimport './Material.css';\n\nexport default function Material({ fonts = true, children }) {\n  if (children) {\n    return <CoreMaterial fonts={fonts}>{children}</CoreMaterial>;\n  } else {\n    return <CoreMaterial fonts={fonts} />;\n  }\n}\n", "import { Willow as CoreWillow } from '@svar-ui/react-core';\nimport './Willow.css';\n\nfunction Willow({ fonts = true, children }) {\n  return children ? (\n    <CoreWillow fonts={fonts}>{children}</CoreWillow>\n  ) : (\n    <CoreWillow fonts={fonts} />\n  );\n}\n\nexport default Willow;\n", "import { WillowDark as WillowDarkInner } from '@svar-ui/react-core';\nimport './WillowDark.css';\n\nfunction WillowDark(props) {\n  const { fonts = true, children } = props;\n\n  if (children) {\n    return <WillowDarkInner fonts={fonts}>{children}</WillowDarkInner>;\n  }\n\n  return <WillowDarkInner fonts={fonts} />;\n}\n\nexport default WillowDark;\n", "import { useMemo, useContext } from 'react';\nimport { Field } from '@svar-ui/react-core';\nimport { context } from '@svar-ui/react-core';\n\nfunction ReadOnly({ value, options, label }) {\n  const i18n = useContext(context.i18n);\n  const _ = i18n.getGroup('editor');\n\n  const text = useMemo(() => {\n    let t = value;\n    if (typeof value === 'boolean') {\n      t = value ? _('Yes') : _('No');\n    }\n\n    if (options) {\n      const option = options.find((o) => o.id === value);\n      if (option) {\n        t = option.label;\n      }\n    }\n\n    return t;\n  }, [value, options, _]);\n\n  if (text || text === 0) {\n    return <Field label={label}>{text}</Field>;\n  }\n\n  return null;\n}\n\nexport default ReadOnly;\n", "import './Section.css';\n\nfunction Section({ fieldKey, label, activeSection, onClick }) {\n  return (\n    <div\n      className={`wx-OmgQq65I wx-section${activeSection ? ' wx-section-active' : ''}`}\n      onClick={() =>\n        onClick &&\n        onClick({\n          item: { id: 'toggle-section', key: activeSection ? null : fieldKey },\n        })\n      }\n    >\n      <h3>{label}</h3>\n      <i\n        className={`wx-OmgQq65I wxi-angle-${activeSection ? 'down' : 'right'} wx-icon`}\n      ></i>\n    </div>\n  );\n}\n\nexport default Section;\n", "import { registerEditorItem } from './helpers';\nimport Form from './components/Form.jsx';\nimport Editor from './components/Editor.jsx';\n\nimport Material from './themes/Material.jsx';\nimport Willow from './themes/Willow.jsx';\nimport WillowDark from './themes/WillowDark.jsx';\n\nimport ReadOnly from './components/sections/ReadOnly.jsx';\nimport Section from './components/sections/Section.jsx';\nimport { Text } from '@svar-ui/react-core';\nimport { TextArea } from '@svar-ui/react-core';\nimport { Checkbox } from '@svar-ui/react-core';\n\nregisterEditorItem('text', Text);\nregisterEditorItem('textarea', TextArea);\nregisterEditorItem('checkbox', Checkbox);\n\nregisterEditorItem('readonly', ReadOnly);\nregisterEditorItem('section', Section);\n\nimport { env, setEnv } from '@svar-ui/lib-dom';\nsetEnv(env);\n\nexport { registerEditorItem, Form, Editor, Material, Willow, WillowDark };\n", "import { createContext } from 'react';\n\nconst store = createContext(null);\nexport default store;\n", "export function getID(node) {\n  const id = node.getAttribute('data-id');\n  const numId = parseInt(id);\n  return isNaN(numId) || numId.toString() != id ? id : numId;\n}\n", "import { getID } from './locate';\nimport { locate } from '@svar-ui/lib-dom';\n\nfunction getOffset(node, relative, ev) {\n  const box = node.getBoundingClientRect();\n  const base = relative.querySelector('.wx-body').getBoundingClientRect();\n\n  return {\n    top: box.top - base.top,\n    left: box.left - base.left,\n    dt: box.bottom - ev.clientY,\n    db: ev.clientY - box.top,\n  };\n}\n\nfunction checkSource(node) {\n  return node && node.getAttribute('data-context-id');\n}\n\nconst SHIFT = 5;\n\nexport function reorder(node, config) {\n  let source, clone, sid;\n  let x, y, base, detail;\n  let touched, touchTimer;\n\n  function down(event) {\n    x = event.clientX;\n    y = event.clientY;\n    base = {\n      ...getOffset(source, node, event),\n      y: config.getTask(sid).$y,\n    };\n\n    document.body.style.userSelect = 'none';\n  }\n\n  function handleTouchstart(event) {\n    source = locate(event);\n    if (!checkSource(source)) return;\n\n    sid = getID(source);\n\n    touchTimer = setTimeout(() => {\n      touched = true;\n      if (config && config.touchStart) config.touchStart();\n      down(event.touches[0]);\n    }, 500);\n\n    node.addEventListener('touchmove', handleTouchmove);\n    node.addEventListener('contextmenu', handleContext);\n    window.addEventListener('touchend', handleTouchend);\n  }\n\n  function handleContext(event) {\n    if (touched || touchTimer) {\n      event.preventDefault();\n      return false;\n    }\n  }\n\n  function handleMousedown(event) {\n    if (event.which !== 1) return;\n\n    source = locate(event);\n    if (!checkSource(source)) return;\n\n    sid = getID(source);\n\n    node.addEventListener('mousemove', handleMousemove);\n    window.addEventListener('mouseup', handleMouseup);\n\n    down(event);\n  }\n\n  function end(full) {\n    node.removeEventListener('mousemove', handleMousemove);\n    node.removeEventListener('touchmove', handleTouchmove);\n    document.body.removeEventListener('mouseup', handleMouseup);\n    document.body.removeEventListener('touchend', handleTouchend);\n    document.body.style.userSelect = '';\n\n    if (full) {\n      node.removeEventListener('mousedown', handleMousedown);\n      node.removeEventListener('touchstart', handleTouchstart);\n    }\n  }\n\n  function move(event) {\n    const dx = event.clientX - x;\n    const dy = event.clientY - y;\n    if (!clone) {\n      if (Math.abs(dx) < SHIFT && Math.abs(dy) < SHIFT) return;\n      if (config && config.start) {\n        if (config.start({ id: sid, e: event }) === false) return;\n      }\n\n      clone = source.cloneNode(true);\n      clone.style.pointerEvents = 'none';\n      clone.classList.add('wx-reorder-task');\n      clone.style.position = 'absolute';\n      clone.style.left = base.left + 'px';\n      clone.style.top = base.top + 'px';\n\n      source.style.visibility = 'hidden';\n      source.parentNode.insertBefore(clone, source);\n    }\n\n    if (clone) {\n      const top = Math.round(Math.max(0, base.top + dy));\n\n      if (config && config.move) {\n        if (config.move({ id: sid, top, detail }) === false) return;\n      }\n\n      const task = config.getTask(sid);\n      const y = task.$y;\n      //dnd may be blocked\n      if (!base.start && base.y == y) return up();\n\n      base.start = true;\n      base.y = task.$y - 4;\n      clone.style.top = top + 'px'; //task.$y - scroll\n\n      const targetNode = document.elementFromPoint(\n        event.clientX,\n        event.clientY,\n      );\n      const target = locate(targetNode);\n\n      if (target && target !== source) {\n        const tid = getID(target);\n        const box = target.getBoundingClientRect();\n        const line = box.top + box.height / 2;\n\n        const after =\n          event.clientY + base.db > line &&\n          target.nextElementSibling !== source;\n        const before =\n          event.clientY - base.dt < line &&\n          target.previousElementSibling !== source;\n\n        if (detail?.after == tid || detail?.before == tid) {\n          // avoid duplicate calls\n          detail = null;\n        } else if (after) {\n          // move down\n          detail = { id: sid, after: tid };\n        } else if (before) {\n          // move up\n          detail = { id: sid, before: tid };\n        }\n      }\n    }\n  }\n\n  function handleMousemove(event) {\n    move(event);\n  }\n\n  function handleTouchmove(event) {\n    if (touched) {\n      event.preventDefault();\n      move(event.touches[0]);\n    } else if (touchTimer) {\n      clearTimeout(touchTimer);\n      touchTimer = null;\n    }\n  }\n\n  function handleTouchend() {\n    touched = null;\n    if (touchTimer) {\n      clearTimeout(touchTimer);\n      touchTimer = null;\n    }\n    up();\n  }\n\n  function handleMouseup() {\n    up();\n  }\n\n  function up() {\n    if (source) {\n      source.style.visibility = '';\n    }\n    if (clone) {\n      clone.parentNode.removeChild(clone);\n      if (config && config.end) config.end({ id: sid, top: base.top });\n    }\n\n    sid = source = clone = base = detail = null;\n    end();\n  }\n\n  if (node.style.position !== 'absolute') node.style.position = 'relative';\n\n  node.addEventListener('mousedown', handleMousedown);\n  node.addEventListener('touchstart', handleTouchstart);\n\n  return {\n    destroy() {\n      end(true);\n    },\n  };\n}\n", "import './TextCell.css';\n\nfunction TextCell({ row, column }) {\n  function getStyle(row, col) {\n    return {\n      justifyContent: col.align,\n      paddingLeft: `${(row.$level - 1) * 20}px`,\n    };\n  }\n\n  const CellComponent = column && column._cell;\n\n  return (\n    <div className=\"wx-pqc08MHU wx-content\" style={getStyle(row, column)}>\n      {row.data || row.lazy ? (\n        <i\n          className={`wx-pqc08MHU wx-toggle-icon wxi-menu-${row.open ? 'down' : 'right'}`}\n          data-action=\"open-task\"\n        />\n      ) : (\n        <i className=\"wx-pqc08MHU wx-toggle-placeholder\" />\n      )}\n      <div className=\"wx-pqc08MHU wx-text\">\n        {CellComponent ? <CellComponent row={row} column={column} /> : row.text}\n      </div>\n    </div>\n  );\n}\n\nexport default TextCell;\n", "import { useMemo } from 'react';\nimport './ActionCell.css';\n\nfunction ActionCell({ column, cell }) {\n  const action = useMemo(() => column.id, [column?.id]);\n\n  return cell || column.id == 'add-task' ? (\n    <div style={{ textAlign: column.align }}>\n      <i\n        className=\"wx-9DAESAHW wx-action-icon wxi-plus\"\n        data-action={action}\n      ></i>\n    </div>\n  ) : null;\n}\n\nexport default ActionCell;\n", "import {\n  useCallback,\n  useContext,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from 'react';\nimport { context } from '@svar-ui/react-core';\nimport { locateID, locateAttr } from '@svar-ui/lib-dom';\nimport { reorder } from '../../helpers/reorder';\nimport { prepareEditTask } from '@svar-ui/gantt-store';\nimport { Grid as WxGrid } from '@svar-ui/react-grid';\nimport TextCell from './TextCell.jsx';\nimport ActionCell from './ActionCell.jsx';\nimport { useWritableProp, useStore } from '@svar-ui/lib-react';\nimport storeContext from '../../context';\nimport './Grid.css';\n\nexport default function Grid(props) {\n  const {\n    readonly,\n    compactMode,\n    width = 0,\n    display = 'all',\n    columnWidth: columnWidthProp = 0,\n    onTableAPIChange,\n  } = props;\n  const [columnWidth, setColumnWidthProp] = useWritableProp(columnWidthProp);\n  const [tableAPI, setTableAPI] = useState();\n\n  const i18n = useContext(context.i18n);\n  const _ = useMemo(() => i18n.getGroup('gantt'), [i18n]);\n  const api = useContext(storeContext);\n\n  const scrollTopVal = useStore(api, 'scrollTop');\n  const cellHeightVal = useStore(api, 'cellHeight');\n  const scrollTask = useStore(api, '_scrollTask');\n  const selectedVal = useStore(api, '_selected');\n  const areaVal = useStore(api, 'area');\n  const rTasksVal = useStore(api, '_tasks');\n  const scalesVal = useStore(api, '_scales');\n  const columnsVal = useStore(api, 'columns');\n  const sortVal = useStore(api, '_sort');\n  const calendarVal = useStore(api, 'calendar');\n  const durationUnitVal = useStore(api, 'durationUnit');\n  const splitTasksVal = useStore(api, 'splitTasks');\n\n  const [dragTask, setDragTask] = useState(null);\n\n  const tasks = useMemo(() => {\n    if (!rTasksVal || !areaVal) return [];\n    return rTasksVal.slice(areaVal.start, areaVal.end);\n  }, [rTasksVal, areaVal]);\n\n  const execAction = useCallback(\n    (id, action) => {\n      if (action === 'add-task') {\n        api.exec(action, {\n          target: id,\n          task: { text: _('New Task') },\n          mode: 'child',\n          show: true,\n        });\n      } else if (action === 'open-task') {\n        const task = tasks.find((a) => a.id === id);\n        if (task?.data || task?.lazy)\n          api.exec(action, { id, mode: !task.open });\n      }\n    },\n    [tasks],\n  );\n\n  const onClick = useCallback(\n    (e) => {\n      const id = locateID(e);\n      const action = e.target.dataset.action;\n      if (action) e.preventDefault();\n      if (id) {\n        if (action === 'add-task' || action === 'open-task') {\n          execAction(id, action);\n        } else {\n          api.exec('select-task', {\n            id,\n            toggle: e.ctrlKey || e.metaKey,\n            range: e.shiftKey,\n            show: true,\n          });\n        }\n      } else if (action === 'add-task') {\n        execAction(null, action);\n      }\n    },\n    [api, execAction],\n  );\n\n  const tableRef = useRef(null);\n  const tableContainerRef = useRef(null);\n  const [gridWidth, setGridWidth] = useState(0);\n  const [updateFlex, setUpdateFlex] = useState(false);\n\n  useEffect(() => {\n    const node = tableContainerRef.current;\n    if (!node || typeof ResizeObserver === 'undefined') return;\n    const update = () => setGridWidth(node.clientWidth);\n    update();\n    const ro = new ResizeObserver(update);\n    ro.observe(node);\n    return () => ro.disconnect();\n  }, []);\n\n  const lastDetailRef = useRef(null);\n\n  const reorderTasks = useCallback(\n    (detail) => {\n      const id = detail.id;\n      const { before, after } = detail;\n      const inProgress = detail.onMove;\n\n      let target = before || after;\n      let mode = before ? 'before' : 'after';\n\n      if (inProgress) {\n        if (mode === 'after') {\n          const task = api.getTask(target);\n          if (task.data?.length && task.open) {\n            mode = 'before';\n            target = task.data[0].id;\n          }\n        }\n        lastDetailRef.current = { id, [mode]: target };\n      } else lastDetailRef.current = null;\n\n      api.exec('move-task', {\n        id,\n        mode,\n        target,\n        inProgress,\n      });\n    },\n    [api],\n  );\n\n  const scrollDelta = useMemo(() => areaVal?.from ?? 0, [areaVal]);\n  const headerHeight = useMemo(() => scalesVal?.height ?? 0, [scalesVal]);\n\n  const scrollX = useMemo(() => {\n    if (!compactMode && display !== 'grid') {\n      return (columnWidth ?? 0) > (width ?? 0);\n    } else {\n      return (columnWidth ?? 0) > (gridWidth ?? 0);\n    }\n  }, [compactMode, display, columnWidth, width, gridWidth]);\n\n  const tableStyle = useMemo(() => {\n    const style = {};\n    if ((scrollX && display === 'all') || (display === 'grid' && scrollX)) {\n      style.width = columnWidth;\n    } else if (display === 'grid') {\n      style.width = '100%';\n    }\n    return style;\n  }, [scrollX, display, columnWidth]);\n\n  const allTasks = useMemo(() => {\n    if (dragTask && !tasks.find((t) => t.id === dragTask.id)) {\n      return [...tasks, dragTask];\n    }\n    return tasks;\n  }, [tasks, dragTask]);\n\n  const cols = useMemo(() => {\n    let cols = (columnsVal || []).map((col) => {\n      col = { ...col };\n      const header = col.header;\n      if (typeof header === 'object') {\n        const text = header.text && _(header.text);\n        col.header = { ...header, text };\n      } else col.header = _(header);\n      return col;\n    });\n    const ti = cols.findIndex((c) => c.id === 'text');\n    const ai = cols.findIndex((c) => c.id === 'add-task');\n\n    if (ti !== -1) {\n      if (cols[ti].cell) cols[ti]._cell = cols[ti].cell;\n      cols[ti].cell = TextCell;\n    }\n    if (ai !== -1) {\n      cols[ai].cell = cols[ai].cell || ActionCell;\n\n      const header = cols[ai].header;\n      if (typeof header !== 'object') cols[ai].header = { text: header };\n      cols[ai].header.cell = header.cell || ActionCell;\n\n      if (readonly) {\n        cols.splice(ai, 1);\n      } else {\n        if (compactMode) {\n          const [actionCol] = cols.splice(ai, 1);\n          cols.unshift(actionCol);\n        }\n      }\n    }\n\n    if (cols.length > 0) cols[cols.length - 1].resize = false;\n    return cols;\n  }, [columnsVal, _, readonly, compactMode]);\n\n  const basis = useMemo(() => {\n    if (display === 'all') return `${width}px`;\n    if (display === 'grid') return 'calc(100% - 4px)';\n    return cols.find((c) => c.id === 'add-task') ? '50px' : '0';\n  }, [display, width, cols]);\n\n  const sortMarks = useMemo(() => {\n    if (allTasks && sortVal?.length) {\n      const marks = {};\n      sortVal.forEach(({ key, order }, index) => {\n        marks[key] = {\n          order,\n          ...(sortVal.length > 1 && { index }),\n        };\n      });\n      return marks;\n    }\n    return {};\n  }, [allTasks, sortVal]);\n\n  const checkFlex = useCallback(() => {\n    return cols.some((c) => c.flexgrow && !c.hidden);\n  }, []); // cols defined later; will use latest value when invoked\n\n  const hasFlexCol = useMemo(() => {\n    // updateFlex is used to trigger re-evaluation\n    void updateFlex;\n    return checkFlex();\n  }, [checkFlex, updateFlex]);\n\n  const fitColumns = useMemo(() => {\n    let filteredColumns =\n      display === 'chart' ? cols.filter((c) => c.id === 'add-task') : cols;\n\n    const containerWidth = display === 'all' ? width : gridWidth;\n    if (!hasFlexCol) {\n      let baseColumnWidth = columnWidth;\n      let forceReset = false;\n      if (cols.some((c) => c.$width)) {\n        let actualWidth = 0;\n        baseColumnWidth = cols.reduce((acc, col) => {\n          if (!col.hidden) {\n            actualWidth += col.width;\n            acc += col.$width || col.width;\n          }\n          return acc;\n        }, 0);\n\n        if (actualWidth > baseColumnWidth && baseColumnWidth > containerWidth)\n          forceReset = true;\n      }\n\n      if (forceReset || baseColumnWidth < containerWidth) {\n        let k = 1;\n        if (!forceReset)\n          k = (containerWidth - 50) / (baseColumnWidth - 50 || 1);\n        return filteredColumns.map((c) => {\n          if (c.id !== 'add-task' && !c.hidden) {\n            if (!c.$width) c.$width = c.width;\n            c.width = c.$width * k;\n          }\n          return c;\n        });\n      }\n    }\n    return filteredColumns;\n  }, [display, cols, hasFlexCol, columnWidth, width, gridWidth]);\n\n  const setColumnWidth = useCallback(\n    (resized) => {\n      if (!checkFlex()) {\n        const newColumnWidth = fitColumns.reduce((acc, col) => {\n          if (resized && col.$width) col.$width = col.width;\n          return acc + (col.hidden ? 0 : col.width);\n        }, 0);\n        if (newColumnWidth !== columnWidth) setColumnWidthProp(newColumnWidth);\n      }\n      setUpdateFlex(true);\n      setUpdateFlex(false);\n    },\n    [checkFlex, fitColumns, columnWidth, setColumnWidthProp],\n  );\n\n  const adjustColumns = useCallback(() => {\n    const flexCols = cols.filter((c) => c.flexgrow && !c.hidden);\n    if (flexCols.length === 1)\n      cols.forEach((c) => {\n        if (c.$width && !c.flexgrow && !c.hidden) c.width = c.$width;\n      });\n  }, []); // cols defined later; will use latest\n\n  const onDblClick = useCallback(\n    (e) => {\n      if (!readonly) {\n        const id = locateID(e);\n        const column = locateAttr(e, 'data-col-id');\n        const columnObj = column && cols.find((c) => c.id == column);\n        if (!columnObj?.editor && id) api.exec('show-editor', { id });\n      }\n    },\n    [api, readonly], // cols is defined later; relies on latest value at call time\n  );\n\n  const sel = useMemo(\n    () => (Array.isArray(selectedVal) ? selectedVal.map((o) => o.id) : []),\n    [selectedVal],\n  );\n\n  const setScrollOffset = useCallback(() => {\n    if (tableRef.current && allTasks !== null) {\n      const body = tableRef.current.querySelector('.wx-body');\n      if (body)\n        body.style.top = -((scrollTopVal ?? 0) - (scrollDelta ?? 0)) + 'px';\n    }\n    if (tableContainerRef.current) tableContainerRef.current.scrollTop = 0;\n  }, [allTasks, scrollTopVal, scrollDelta]);\n\n  useEffect(() => {\n    if (tableRef.current) {\n      setScrollOffset();\n    }\n  }, [scrollTopVal, scrollDelta, setScrollOffset]);\n\n  useEffect(() => {\n    const tableEl = tableRef.current;\n    if (!tableEl) return;\n    const bodyEl = tableEl.querySelector('.wx-table-box .wx-body');\n    if (!bodyEl || typeof ResizeObserver === 'undefined') return;\n    const ro = new ResizeObserver(() => {\n      setScrollOffset();\n    });\n    ro.observe(bodyEl);\n    return () => {\n      ro.disconnect();\n    };\n  }, [fitColumns, tableStyle, display, basis, allTasks, setScrollOffset]);\n\n  useEffect(() => {\n    if (!scrollTask || !tableAPI) return;\n\n    const { id } = scrollTask;\n    const focusCell = tableAPI.getState().focusCell;\n    if (\n      focusCell &&\n      focusCell.row !== id &&\n      tableRef.current &&\n      tableRef.current.contains(document.activeElement)\n    ) {\n      tableAPI.exec('focus-cell', {\n        row: id,\n        column: focusCell.column,\n      });\n    }\n  }, [scrollTask, tableAPI]);\n\n  const startReorder = useCallback(\n    ({ id }) => {\n      if (readonly) return false;\n\n      if (api.getTask(id).open) api.exec('open-task', { id, mode: false });\n\n      const t = api.getState()._tasks.find((t) => t.id === id);\n      setDragTask(t || null);\n      if (!t) return false;\n    },\n    [api, readonly],\n  );\n\n  const endReorder = useCallback(\n    ({ id, top }) => {\n      if (lastDetailRef.current) {\n        reorderTasks({ ...lastDetailRef.current, onMove: false });\n      } else {\n        api.exec('drag-task', {\n          id,\n          top: top + (scrollDelta ?? 0),\n          inProgress: false,\n        });\n      }\n      setDragTask(null);\n    },\n    [api, reorderTasks, scrollDelta],\n  );\n\n  const moveReorder = useCallback(\n    ({ id, top, detail }) => {\n      if (detail) {\n        reorderTasks({ ...detail, onMove: true });\n      }\n      api.exec('drag-task', {\n        id,\n        top: top + (scrollDelta ?? 0),\n        inProgress: true,\n      });\n    },\n    [api, reorderTasks, scrollDelta],\n  );\n\n  useEffect(() => {\n    const node = tableRef.current;\n    if (!node) return;\n    const action = reorder(node, {\n      start: startReorder,\n      end: endReorder,\n      move: moveReorder,\n      getTask: api.getTask,\n    });\n    return action.destroy;\n  }, [api, startReorder, endReorder, moveReorder]);\n\n  const handleHotkey = useCallback(\n    (ev) => {\n      const { key, isInput } = ev;\n      if (!isInput && (key === 'arrowup' || key === 'arrowdown')) {\n        ev.eventSource = 'grid';\n        api.exec('hotkey', ev);\n        return false;\n      } else if (key === 'enter') {\n        const focusCell = tableAPI?.getState().focusCell;\n        if (focusCell) {\n          const { row, column } = focusCell;\n          if (column === 'add-task') {\n            execAction(row, 'add-task');\n          } else if (column === 'text') {\n            execAction(row, 'open-task');\n          }\n        }\n      }\n    },\n    [api, execAction, tableAPI],\n  );\n\n  // FIXME - temporary hack to provide fresh values to grid's handlers\n  const handlersStateRef = useRef(null);\n  const setHandlersState = () => {\n    handlersStateRef.current = {\n      setTableAPI,\n      handleHotkey,\n      sortVal,\n      api,\n      adjustColumns,\n      setColumnWidth,\n      tasks,\n      calendarVal,\n      durationUnitVal,\n      splitTasksVal,\n      onTableAPIChange,\n    };\n  };\n  setHandlersState();\n  useEffect(() => {\n    setHandlersState();\n  }, [\n    setTableAPI,\n    handleHotkey,\n    sortVal,\n    api,\n    adjustColumns,\n    setColumnWidth,\n    tasks,\n    calendarVal,\n    durationUnitVal,\n    splitTasksVal,\n    onTableAPIChange,\n  ]);\n\n  const init = useCallback((tapi) => {\n    setTableAPI(tapi);\n    tapi.intercept('hotkey', (ev) => handlersStateRef.current.handleHotkey(ev));\n    tapi.intercept('scroll', () => false);\n    tapi.intercept('select-row', () => false);\n    tapi.intercept('sort-rows', (e) => {\n      const sortVal = handlersStateRef.current.sortVal;\n      const { key, add } = e;\n      const keySort = sortVal ? sortVal.find((s) => s.key === key) : null;\n      let order = 'asc';\n      if (keySort) order = !keySort || keySort.order === 'asc' ? 'desc' : 'asc';\n\n      api.exec('sort-tasks', {\n        key,\n        order,\n        add,\n      });\n      return false;\n    });\n\n    tapi.on('resize-column', () => {\n      handlersStateRef.current.setColumnWidth(true);\n    });\n\n    tapi.on('hide-column', (ev) => {\n      if (!ev.mode) handlersStateRef.current.adjustColumns();\n      handlersStateRef.current.setColumnWidth();\n    });\n\n    tapi.intercept('update-cell', (e) => {\n      const { id, column, value } = e;\n      const task = handlersStateRef.current.tasks.find((t) => t.id === id);\n\n      if (task) {\n        const update = { ...task };\n        let v = value;\n        if (v && !isNaN(v) && !(v instanceof Date)) v *= 1;\n        update[column] = v;\n\n        prepareEditTask(\n          update,\n          {\n            calendar: handlersStateRef.current.calendarVal,\n            durationUnit: handlersStateRef.current.durationUnitVal,\n            splitTasks: handlersStateRef.current.splitTasksVal,\n          },\n          column,\n        );\n\n        api.exec('update-task', {\n          id: id,\n          task: update,\n        });\n      }\n      return false;\n    });\n\n    onTableAPIChange && onTableAPIChange(tapi);\n  }, []);\n\n  return (\n    <div\n      className=\"wx-rHj6070p wx-table-container\"\n      style={{ flex: `0 0 ${basis}` }}\n      ref={tableContainerRef}\n    >\n      <div\n        ref={tableRef}\n        style={tableStyle}\n        className=\"wx-rHj6070p wx-table\"\n        onClick={onClick}\n        onDoubleClick={onDblClick}\n      >\n        <WxGrid\n          init={init}\n          sizes={{\n            rowHeight: cellHeightVal,\n            headerHeight: (headerHeight ?? 0) - 1,\n          }}\n          rowStyle={(row) =>\n            row.$reorder ? 'wx-rHj6070p wx-reorder-task' : 'wx-rHj6070p'\n          }\n          columnStyle={(col) =>\n            `wx-rHj6070p wx-text-${col.align}${col.id === 'add-task' ? ' wx-action' : ''}`\n          }\n          data={allTasks}\n          columns={fitColumns}\n          selectedRows={[...sel]}\n          sortMarks={sortMarks}\n        />\n      </div>\n    </div>\n  );\n}\n", "import { useContext, useEffect, useRef, useState } from 'react';\nimport storeContext from '../../context';\nimport { grid } from '@svar-ui/gantt-store';\nimport { useStore } from '@svar-ui/lib-react';\n\nfunction CellGrid({ borders = '' }) {\n  const api = useContext(storeContext);\n  const cellWidth = useStore(api, 'cellWidth');\n  const cellHeight = useStore(api, 'cellHeight');\n\n  const nodeRef = useRef(null);\n  const [color, setColor] = useState('#e4e4e4');\n\n  useEffect(() => {\n    if (typeof getComputedStyle !== 'undefined' && nodeRef.current) {\n      const border = getComputedStyle(nodeRef.current).getPropertyValue(\n        '--wx-gantt-border',\n      );\n      setColor(border ? border.substring(border.indexOf('#')) : '#1d1e261a');\n    }\n  }, []);\n\n  const style = {\n    width: '100%',\n    height: '100%',\n    background:\n      cellWidth != null && cellHeight != null\n        ? `url(${grid(cellWidth, cellHeight, color, borders)})`\n        : undefined,\n    position: 'absolute',\n  };\n\n  return <div ref={nodeRef} style={style} />;\n}\n\nexport default CellGrid;\n", "import { useCallback, useContext, useEffect, useRef } from 'react';\nimport storeContext from '../../context';\nimport { useStore } from '@svar-ui/lib-react';\nimport './Links.css';\n\nexport default function Links({ onSelectLink, selectedLink, readonly }) {\n  const api = useContext(storeContext);\n  const links = useStore(api, '_links');\n  const criticalPath = useStore(api, 'criticalPath');\n\n  const selectedLineRef = useRef(null);\n\n  const onClickOutside = useCallback(\n    (event) => {\n      const css = event?.target?.classList;\n      if (!css?.contains('wx-line') && !css?.contains('wx-delete-button')) {\n        onSelectLink(null);\n      }\n    },\n    [onSelectLink],\n  );\n\n  useEffect(() => {\n    if (!readonly && selectedLink && selectedLineRef.current) {\n      const handler = (event) => {\n        if (\n          selectedLineRef.current &&\n          !selectedLineRef.current.contains(event.target)\n        ) {\n          onClickOutside(event);\n        }\n      };\n      document.addEventListener('click', handler);\n      return () => {\n        document.removeEventListener('click', handler);\n      };\n    }\n  }, [readonly, selectedLink, onClickOutside]);\n\n  return (\n    <svg className=\"wx-dkx3NwEn wx-links\">\n      {(links || []).map((link) => {\n        const className =\n          'wx-dkx3NwEn wx-line' +\n          (criticalPath && link.$critical ? ' wx-critical' : '') +\n          (!readonly ? ' wx-line-selectable' : '');\n        return (\n          <polyline\n            className={className}\n            points={link.$p}\n            key={link.id}\n            onClick={() => !readonly && onSelectLink(link.id)}\n            data-link-id={link.id}\n          />\n        );\n      })}\n      {!readonly && selectedLink && (\n        <polyline\n          ref={selectedLineRef}\n          className=\"wx-dkx3NwEn wx-line wx-line-selected wx-line-selectable wx-delete-link\"\n          points={selectedLink.$p}\n        />\n      )}\n    </svg>\n  );\n}\n", "import './BarSegments.css';\n\nfunction BarSegments(props) {\n  const { task, type } = props;\n\n  function segmentStyle(i) {\n    const s = task.segments[i];\n    return {\n      left: `${s.$x}px`,\n      top: '0px',\n      width: `${s.$w}px`,\n      height: '100%',\n    };\n  }\n\n  function getSegProgress(segmentIndex) {\n    if (!task.progress) return 0;\n\n    const progress = (task.duration * task.progress) / 100;\n    const segments = task.segments;\n    let duration = 0,\n      i = 0,\n      result = null;\n    do {\n      const s = segments[i];\n      if (i === segmentIndex) {\n        if (duration > progress) result = 0;\n        else result = Math.min((progress - duration) / s.duration, 1) * 100;\n      }\n      duration += s.duration;\n      i++;\n    } while (result === null && i < segments.length);\n    return result || 0;\n  }\n\n  return (\n    <div className=\"wx-segments wx-GKbcLEGA\">\n      {task.segments.map((seg, i) => (\n        <div\n          key={i}\n          className={`wx-segment wx-bar wx-${type} wx-GKbcLEGA`}\n          data-segment={i}\n          style={segmentStyle(i)}\n        >\n          {task.progress ? (\n            <div className=\"wx-progress-wrapper\">\n              <div\n                className=\"wx-progress-percent wx-GKbcLEGA\"\n                style={{ width: `${getSegProgress(i)}%` }}\n              ></div>\n            </div>\n          ) : null}\n          <div className=\"wx-content\">{seg.text || ''}</div>\n        </div>\n      ))}\n    </div>\n  );\n}\n\nexport default BarSegments;\n", "import {\n  Fragment,\n  useCallback,\n  useContext,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from 'react';\nimport { locate, locateID } from '@svar-ui/lib-dom';\nimport { getID } from '../../helpers/locate';\nimport storeContext from '../../context';\nimport { useStore, useStoreWithCounter } from '@svar-ui/lib-react';\nimport { isSegmentMoveAllowed, extendDragOptions } from '@svar-ui/gantt-store';\nimport { Button } from '@svar-ui/react-core';\nimport Links from './Links.jsx';\nimport BarSegments from './BarSegments.jsx';\nimport './Bars.css';\n\nfunction Bars(props) {\n  const { readonly, taskTemplate: TaskTemplate } = props;\n\n  const api = useContext(storeContext);\n\n  const [rTasksValue, rTasksCounter] = useStoreWithCounter(api, '_tasks');\n  const [rLinksValue, rLinksCounter] = useStoreWithCounter(api, '_links');\n  const areaValue = useStore(api, 'area');\n  const scalesValue = useStore(api, '_scales');\n  const taskTypesValue = useStore(api, 'taskTypes');\n  const baselinesValue = useStore(api, 'baselines');\n  const selectedValue = useStore(api, '_selected');\n  const scrollTaskStore = useStore(api, '_scrollTask');\n  const criticalPath = useStore(api, 'criticalPath');\n  const tree = useStore(api, 'tasks');\n  const schedule = useStore(api, 'schedule');\n  const splitTasks = useStore(api, 'splitTasks');\n  const summary = useStore(api, 'summary');\n\n  const tasks = useMemo(() => {\n    if (!areaValue || !Array.isArray(rTasksValue)) return [];\n    const start = areaValue.start ?? 0;\n    const end = areaValue.end ?? 0;\n    return rTasksValue.slice(start, end).map((a) => ({ ...a }));\n  }, [rTasksCounter, areaValue]);\n\n  const lengthUnitWidth = useMemo(\n    () => scalesValue.lengthUnitWidth,\n    [scalesValue],\n  );\n\n  const ignoreNextClickRef = useRef(false);\n\n  const [linkFrom, setLinkFrom] = useState(undefined);\n  const [taskMove, setTaskMove] = useState(null);\n  const progressFromRef = useRef(null);\n\n  const [selectedLinkId, setSelectedLinkId] = useState(null);\n\n  const selectedLink = useMemo(() => {\n    return (\n      selectedLinkId && {\n        ...rLinksValue.find((link) => link.id === selectedLinkId),\n      }\n    );\n  }, [selectedLinkId, rLinksCounter]);\n\n  const [touched, setTouched] = useState(undefined);\n  const touchTimerRef = useRef(null);\n\n  const [totalWidth, setTotalWidth] = useState(0);\n\n  const containerRef = useRef(null);\n\n  const hasFocus = useMemo(() => {\n    const el = containerRef.current;\n    return !!(\n      selectedValue.length &&\n      el &&\n      el.contains(document.activeElement)\n    );\n  }, [selectedValue, containerRef.current]);\n\n  const focused = useMemo(() => {\n    return hasFocus && selectedValue[selectedValue.length - 1]?.id;\n  }, [hasFocus, selectedValue]);\n\n  useEffect(() => {\n    if (!scrollTaskStore) return;\n    if (hasFocus && scrollTaskStore) {\n      const { id } = scrollTaskStore;\n      const node = containerRef.current?.querySelector(\n        `.wx-bar[data-id='${id}']`,\n      );\n      if (node) node.focus({ preventScroll: true });\n    }\n  }, [scrollTaskStore]);\n\n  useEffect(() => {\n    const el = containerRef.current;\n    if (!el) return;\n    setTotalWidth(el.offsetWidth || 0);\n    if (typeof ResizeObserver !== 'undefined') {\n      const ro = new ResizeObserver((entries) => {\n        if (entries[0]) {\n          setTotalWidth(entries[0].contentRect.width);\n        }\n      });\n      ro.observe(el);\n      return () => ro.disconnect();\n    }\n  }, [containerRef.current]);\n\n  const startDrag = useCallback(() => {\n    document.body.style.userSelect = 'none';\n  }, []);\n\n  const endDrag = useCallback(() => {\n    document.body.style.userSelect = '';\n  }, []);\n\n  const getMoveMode = useCallback(\n    (node, e, task) => {\n      if (e.target.classList.contains('wx-line')) return '';\n      if (!task) task = api.getTask(getID(node));\n      if (task.type === 'milestone' || task.type === 'summary') return '';\n\n      const segmentNode = locate(e, 'data-segment');\n      if (segmentNode) node = segmentNode;\n\n      const { left, width } = node.getBoundingClientRect();\n      const p = (e.clientX - left) / width;\n      let delta = 0.2 / (width > 200 ? width / 200 : 1);\n      if (p < delta) return 'start';\n      if (p > 1 - delta) return 'end';\n      return '';\n    },\n    [api],\n  );\n\n  const down = useCallback(\n    (node, point) => {\n      const { clientX } = point;\n      const id = getID(node);\n      const task = api.getTask(id);\n      const css = point.target.classList;\n      if (point.target.closest('.wx-delete-button')) return;\n      if (!readonly) {\n        if (css.contains('wx-progress-marker')) {\n          const { progress } = api.getTask(id);\n          progressFromRef.current = {\n            id,\n            x: clientX,\n            progress,\n            dx: 0,\n            node,\n            marker: point.target,\n          };\n          point.target.classList.add('wx-progress-in-drag');\n        } else {\n          const mode = getMoveMode(node, point, task) || 'move';\n\n          const newTaskMove = {\n            id,\n            mode,\n            x: clientX,\n            dx: 0,\n            l: task.$x,\n            w: task.$w,\n          };\n\n          if (splitTasks && task.segments?.length) {\n            const segNode = locate(point, 'data-segment');\n            if (segNode) {\n              newTaskMove.segmentIndex = segNode.dataset['segment'] * 1;\n              extendDragOptions(task, newTaskMove);\n            }\n          }\n\n          setTaskMove(newTaskMove);\n        }\n        startDrag();\n      }\n    },\n    [api, readonly, getMoveMode, startDrag, splitTasks],\n  );\n\n  const mousedown = useCallback(\n    (e) => {\n      if (e.button !== 0) return;\n\n      const node = locate(e);\n      if (!node) return;\n\n      down(node, e);\n    },\n    [down],\n  );\n\n  const touchstart = useCallback(\n    (e) => {\n      const node = locate(e);\n      if (node) {\n        touchTimerRef.current = setTimeout(() => {\n          setTouched(true);\n          down(node, e.touches[0]);\n        }, 300);\n      }\n    },\n    [down],\n  );\n\n  const onSelectLink = useCallback((id) => {\n    setSelectedLinkId(id);\n  }, []);\n\n  const up = useCallback(() => {\n    if (progressFromRef.current) {\n      const { dx, id, marker, value } = progressFromRef.current;\n      progressFromRef.current = null;\n      if (typeof value != 'undefined' && dx)\n        api.exec('update-task', {\n          id,\n          task: { progress: value },\n          inProgress: false,\n        });\n      marker.classList.remove('wx-progress-in-drag');\n\n      ignoreNextClickRef.current = true;\n      endDrag();\n    } else if (taskMove) {\n      const { id, mode, dx, l, w, start, segment, index } = taskMove;\n      setTaskMove(null);\n      if (start) {\n        const diff = Math.round(dx / lengthUnitWidth);\n\n        if (!diff) {\n          api.exec('drag-task', {\n            id,\n            width: w,\n            left: l,\n            inProgress: false,\n            ...(segment && { segmentIndex: index }),\n          });\n        } else {\n          let update = {};\n          let task = api.getTask(id);\n          if (segment) task = task.segments[index];\n\n          if (mode === 'move') {\n            update.start = task.start;\n            update.end = task.end;\n          } else update[mode] = task[mode];\n\n          api.exec('update-task', {\n            id,\n            diff,\n            task: update,\n            ...(segment && { segmentIndex: index }),\n          });\n        }\n        ignoreNextClickRef.current = true;\n      }\n\n      endDrag();\n    }\n  }, [api, endDrag, taskMove, lengthUnitWidth]);\n\n  const move = useCallback(\n    (e, point) => {\n      const { clientX } = point;\n\n      if (!readonly) {\n        if (progressFromRef.current) {\n          const { node, x, id } = progressFromRef.current;\n          const dx = (progressFromRef.current.dx = clientX - x);\n\n          const diff = Math.round((dx / node.offsetWidth) * 100);\n          let progress = progressFromRef.current.progress + diff;\n          progressFromRef.current.value = progress = Math.min(\n            Math.max(0, progress),\n            100,\n          );\n\n          api.exec('update-task', {\n            id,\n            task: { progress },\n            inProgress: true,\n          });\n        } else if (taskMove) {\n          onSelectLink(null);\n          const { mode, l, w, x, id, start, segment, index } = taskMove;\n          const task = api.getTask(id);\n          const dx = clientX - x;\n          const minWidth = Math.round(lengthUnitWidth) || 1; \n          if (\n            (!start && Math.abs(dx) < 20) ||\n            (mode === \"start\" && w - dx < minWidth) ||\n            (mode === \"end\" && w + dx < minWidth) || \n            (mode === 'move' &&\n              ((dx < 0 && l + dx < 0) ||\n                (dx > 0 && l + w + dx > totalWidth))) ||\n            (taskMove.segment && !isSegmentMoveAllowed(task, taskMove))\n          )\n            return;\n\n          const nextTaskMove = { ...taskMove, dx };\n\n          let left, width;\n          if (mode === 'start') {\n            left = l + dx;\n            width = w - dx;\n          } else if (mode === 'end') {\n            left = l;\n            width = w + dx;\n          } else if (mode === 'move') {\n            left = l + dx;\n            width = w;\n          }\n\n          api.exec('drag-task', {\n            id,\n            width: width,\n            left: left,\n            inProgress: true,\n            start,\n            ...(segment && { segmentIndex: index }),\n          });\n\n          if (\n            !nextTaskMove.start &&\n            ((mode === 'move' && task.$x == l) ||\n              (mode !== 'move' && task.$w == w))\n          ) {\n            ignoreNextClickRef.current = true;\n            up();\n            return;\n          }\n          nextTaskMove.start = true;\n          setTaskMove(nextTaskMove);\n        } else {\n          const taskNode = locate(e);\n          if (taskNode) {\n            const task = api.getTask(getID(taskNode));\n            const segNode = locate(e, 'data-segment');\n            const barNode = segNode || taskNode;\n            const mode = getMoveMode(barNode, point, task);\n            barNode.style.cursor = mode && !readonly ? 'col-resize' : 'pointer';\n          }\n        }\n      }\n    },\n    [\n      api,\n      readonly,\n      taskMove,\n      lengthUnitWidth,\n      totalWidth,\n      getMoveMode,\n      onSelectLink,\n      up,\n    ],\n  );\n\n  const mousemove = useCallback(\n    (e) => {\n      move(e, e);\n    },\n    [move],\n  );\n\n  const touchmove = useCallback(\n    (e) => {\n      if (touched) {\n        e.preventDefault();\n        move(e, e.touches[0]);\n      } else if (touchTimerRef.current) {\n        clearTimeout(touchTimerRef.current);\n        touchTimerRef.current = null;\n      }\n    },\n    [touched, move],\n  );\n\n  const mouseup = useCallback(() => {\n    up();\n  }, [up]);\n\n  const touchend = useCallback(() => {\n    setTouched(null);\n    if (touchTimerRef.current) {\n      clearTimeout(touchTimerRef.current);\n      touchTimerRef.current = null;\n    }\n    up();\n  }, [up]);\n\n  useEffect(() => {\n    window.addEventListener('mouseup', mouseup);\n    return () => {\n      window.removeEventListener('mouseup', mouseup);\n    };\n  }, [mouseup]);\n\n  const onDblClick = useCallback(\n    (e) => {\n      if (!readonly) {\n        const id = locateID(e.target);\n        if (id && !e.target.classList.contains('wx-link')) {\n          const segmentIndex = locateID(e.target, 'data-segment');\n          api.exec('show-editor', {\n            id,\n            ...(segmentIndex !== null && { segmentIndex }),\n          });\n        }\n      }\n    },\n    [api, readonly],\n  );\n\n  const types = ['e2s', 's2s', 'e2e', 's2e'];\n  const getLinkType = useCallback((fromStart, toStart) => {\n    return types[(fromStart ? 1 : 0) + (toStart ? 0 : 2)];\n  }, []);\n\n  const alreadyLinked = useCallback(\n    (target, toStart) => {\n      const source = linkFrom.id;\n      const fromStart = linkFrom.start;\n\n      if (target === source) return true;\n\n      return !!rLinksValue.find((l) => {\n        return (\n          l.target == target &&\n          l.source == source &&\n          l.type === getLinkType(fromStart, toStart)\n        );\n      });\n    },\n    [linkFrom, rLinksCounter, getLinkType],\n  );\n\n  const removeLinkMarker = useCallback(() => {\n    if (linkFrom) {\n      setLinkFrom(null);\n    }\n  }, [linkFrom]);\n\n  const onClick = useCallback(\n    (e) => {\n      if (ignoreNextClickRef.current) {\n        ignoreNextClickRef.current = false;\n        return;\n      }\n\n      const id = locateID(e.target);\n      if (id) {\n        const css = e.target.classList;\n        if (css.contains('wx-link')) {\n          const toStart = css.contains('wx-left');\n          if (!linkFrom) {\n            setLinkFrom({ id, start: toStart });\n            return;\n          }\n\n          if (linkFrom.id !== id && !alreadyLinked(id, toStart)) {\n            api.exec('add-link', {\n              link: {\n                source: linkFrom.id,\n                target: id,\n                type: getLinkType(linkFrom.start, toStart),\n              },\n            });\n          }\n        } else if (css.contains('wx-delete-button-icon')) {\n          api.exec('delete-link', { id: selectedLinkId });\n          setSelectedLinkId(null);\n        } else {\n          let segmentIndex;\n          const segmentNode = locate(e, 'data-segment');\n          if (segmentNode) segmentIndex = segmentNode.dataset.segment * 1;\n          api.exec('select-task', {\n            id,\n            toggle: e.ctrlKey || e.metaKey,\n            range: e.shiftKey,\n            segmentIndex,\n          });\n        }\n      }\n      removeLinkMarker();\n    },\n    [\n      api,\n      linkFrom,\n      rLinksCounter,\n      selectedLink,\n      alreadyLinked,\n      getLinkType,\n      removeLinkMarker,\n    ],\n  );\n\n  const taskStyle = useCallback((task) => {\n    return {\n      left: `${task.$x}px`,\n      top: `${task.$y}px`,\n      width: `${task.$w}px`,\n      height: `${task.$h}px`,\n    };\n  }, []);\n\n  const baselineStyle = useCallback((task) => {\n    return {\n      left: `${task.$x_base}px`,\n      top: `${task.$y_base}px`,\n      width: `${task.$w_base}px`,\n      height: `${task.$h_base}px`,\n    };\n  }, []);\n\n  const contextmenu = useCallback(\n    (ev) => {\n      if (touched || touchTimerRef.current) {\n        ev.preventDefault();\n        return false;\n      }\n    },\n    [touched],\n  );\n\n  const taskTypeIds = useMemo(\n    () => taskTypesValue.map((t) => t.id),\n    [taskTypesValue],\n  );\n\n  const taskTypeCss = useCallback(\n    (type) => {\n      let css = taskTypeIds.includes(type) ? type : 'task';\n      if (!['task', 'milestone', 'summary'].includes(type)) {\n        css = `task ${css}`;\n      }\n      return css;\n    },\n    [taskTypeIds],\n  );\n\n  const forward = useCallback(\n    (ev) => {\n      api.exec(ev.action, ev.data);\n    },\n    [api],\n  );\n\n  const isTaskCritical = useCallback(\n    (taskId) => {\n      return criticalPath && tree.byId(taskId).$critical;\n    },\n    [criticalPath, tree],\n  );\n\n  const isLinkMarkerVisible = useCallback(\n    (id) => {\n      if (schedule?.auto) {\n        const summaryIds = tree.getSummaryId(id, true);\n        const linkFromSummaryIds = tree.getSummaryId(linkFrom.id, true);\n        return (\n          linkFrom?.id &&\n          !(Array.isArray(summaryIds) ? summaryIds : [summaryIds]).includes(\n            linkFrom.id,\n          ) &&\n          !(\n            Array.isArray(linkFromSummaryIds)\n              ? linkFromSummaryIds\n              : [linkFromSummaryIds]\n          ).includes(id)\n        );\n      }\n      return linkFrom;\n    },\n    [schedule, tree, linkFrom],\n  );\n\n  return (\n    <div\n      className=\"wx-GKbcLEGA wx-bars\"\n      style={{ lineHeight: `${tasks.length ? tasks[0].$h : 0}px` }}\n      ref={containerRef}\n      onContextMenu={contextmenu}\n      onMouseDown={mousedown}\n      onMouseMove={mousemove}\n      onTouchStart={touchstart}\n      onTouchMove={touchmove}\n      onTouchEnd={touchend}\n      onClick={onClick}\n      onDoubleClick={onDblClick}\n      onDragStart={(e) => {\n        e.preventDefault();\n        return false;\n      }}\n    >\n      <Links\n        onSelectLink={onSelectLink}\n        selectedLink={selectedLink}\n        readonly={readonly}\n      />\n      {tasks.map((task) => {\n        if (task.$skip && task.$skip_baseline) return null;\n        const barClass =\n          `wx-bar wx-${taskTypeCss(task.type)}` +\n          (touched && taskMove && task.id === taskMove.id ? ' wx-touch' : '') +\n          (linkFrom && linkFrom.id === task.id ? ' wx-selected' : '') +\n          (isTaskCritical(task.id) ? ' wx-critical' : '') +\n          (task.$reorder ? ' wx-reorder-task' : '') +\n          (splitTasks && task.segments ? ' wx-split' : '');\n        const leftLinkClass =\n          'wx-link wx-left' +\n          (linkFrom ? ' wx-visible' : '') +\n          (!linkFrom ||\n            (!alreadyLinked(task.id, true) && isLinkMarkerVisible(task.id))\n            ? ' wx-target'\n            : '') +\n          (linkFrom && linkFrom.id === task.id && linkFrom.start\n            ? ' wx-selected'\n            : '') +\n          (isTaskCritical(task.id) ? ' wx-critical' : '');\n        const rightLinkClass =\n          'wx-link wx-right' +\n          (linkFrom ? ' wx-visible' : '') +\n          (!linkFrom ||\n            (!alreadyLinked(task.id, false) && isLinkMarkerVisible(task.id))\n            ? ' wx-target'\n            : '') +\n          (linkFrom && linkFrom.id === task.id && !linkFrom.start\n            ? ' wx-selected'\n            : '') +\n          (isTaskCritical(task.id) ? ' wx-critical' : '');\n        return (\n          <Fragment key={task.id}>\n            {!task.$skip && (\n              <div\n                className={'wx-GKbcLEGA ' + barClass}\n                style={taskStyle(task)}\n                data-tooltip-id={task.id}\n                data-id={task.id}\n                tabIndex={focused === task.id ? 0 : -1}\n              >\n                {!readonly ? (\n                  task.id === selectedLink?.target &&\n                    selectedLink?.type[2] === 's' ? (\n                    <Button\n                      type=\"danger\"\n                      css=\"wx-left wx-delete-button wx-delete-link\"\n                    >\n                      <i className=\"wxi-close wx-delete-button-icon\"></i>\n                    </Button>\n                  ) : (\n                    <div className={'wx-GKbcLEGA ' + leftLinkClass}>\n                      <div className=\"wx-GKbcLEGA wx-inner\"></div>\n                    </div>\n                  )\n                ) : null}\n\n                {task.type !== 'milestone' ? (\n                  <>\n                    {task.progress && !(splitTasks && task.segments) ? (\n                      <div className=\"wx-GKbcLEGA wx-progress-wrapper\">\n                        <div\n                          className=\"wx-GKbcLEGA wx-progress-percent\"\n                          style={{ width: `${task.progress}%` }}\n                        ></div>\n                      </div>\n                    ) : null}\n                    {!readonly &&\n                      !(splitTasks && task.segments) &&\n                      !(task.type == 'summary' && summary?.autoProgress) ? (\n                      <div\n                        className=\"wx-GKbcLEGA wx-progress-marker\"\n                        style={{ left: `calc(${task.progress}% - 10px)` }}\n                      >\n                        {task.progress}\n                      </div>\n                    ) : null}\n                    {TaskTemplate ? (\n                      <TaskTemplate data={task} api={api} onAction={forward} />\n                    ) : splitTasks && task.segments ? (\n                      <BarSegments task={task} type={taskTypeCss(task.type)} />\n                    ) : (\n                      <div className=\"wx-GKbcLEGA wx-content\">\n                        {task.text || ''}\n                      </div>\n                    )}\n                  </>\n                ) : (\n                  <>\n                    <div className=\"wx-GKbcLEGA wx-content\"></div>\n                    {TaskTemplate ? (\n                      <TaskTemplate data={task} api={api} onAction={forward} />\n                    ) : (\n                      <div className=\"wx-GKbcLEGA wx-text-out\">{task.text}</div>\n                    )}\n                  </>\n                )}\n\n                {!readonly ? (\n                  task.id === selectedLink?.target &&\n                    selectedLink?.type[2] === 'e' ? (\n                    <Button\n                      type=\"danger\"\n                      css=\"wx-right wx-delete-button wx-delete-link\"\n                    >\n                      <i className=\"wxi-close wx-delete-button-icon\"></i>\n                    </Button>\n                  ) : (\n                    <div className={'wx-GKbcLEGA ' + rightLinkClass}>\n                      <div className=\"wx-GKbcLEGA wx-inner\"></div>\n                    </div>\n                  )\n                ) : null}\n              </div>\n            )}\n            {baselinesValue && !task.$skip_baseline ? (\n              <div\n                className={\n                  'wx-GKbcLEGA wx-baseline' +\n                  (task.type === 'milestone' ? ' wx-milestone' : '')\n                }\n                style={baselineStyle(task)}\n              ></div>\n            ) : null}\n          </Fragment>\n        );\n      })}\n    </div>\n  );\n}\n\nexport default Bars;\n", "import { useContext } from 'react';\nimport storeContext from '../../context';\nimport { useStore } from '@svar-ui/lib-react';\nimport './TimeScale.css';\n\nfunction TimeScale(props) {\n  const { highlightTime } = props;\n\n  const api = useContext(storeContext);\n  const scales = useStore(api, '_scales');\n\n  return (\n    <div className=\"wx-ZkvhDKir wx-scale\" style={{ width: scales.width }}>\n      {(scales?.rows || []).map((row, rowIdx) => (\n        <div\n          className=\"wx-ZkvhDKir wx-row\"\n          style={{ height: `${row.height}px` }}\n          key={rowIdx}\n        >\n          {(row.cells || []).map((cell, cellIdx) => {\n            const extraClass = highlightTime\n              ? highlightTime(cell.date, cell.unit)\n              : '';\n            const className =\n              'wx-cell ' + (cell.css || '') + ' ' + (extraClass || '');\n            return (\n              <div\n                className={'wx-ZkvhDKir ' + className}\n                style={{ width: `${cell.width}px` }}\n                key={cellIdx}\n              >\n                {cell.value}\n              </div>\n            );\n          })}\n        </div>\n      ))}\n    </div>\n  );\n}\n\nexport default TimeScale;\n", "import { useRef, useEffect } from 'react';\n\nconst renderMetrics = new Map();\n\nexport function useRenderTime(label) {\n  const startTime = useRef(null);\n  const renderCount = useRef(0);\n  const rafRef = useRef(null);\n\n  const enabled =\n    typeof window !== 'undefined' && window.__RENDER_METRICS_ENABLED__;\n\n  if (startTime.current === null) {\n    startTime.current = performance.now();\n  }\n  renderCount.current++;\n\n  useEffect(() => {\n    if (!enabled) return;\n\n    cancelAnimationFrame(rafRef.current);\n\n    rafRef.current = requestAnimationFrame(() => {\n      const metric = {\n        label,\n        time: performance.now() - startTime.current,\n        renders: renderCount.current,\n        timestamp: Date.now(),\n      };\n\n      renderMetrics.set(label, metric);\n\n      window.dispatchEvent(\n        new CustomEvent('render-metric', { detail: metric }),\n      );\n    });\n\n    return () => cancelAnimationFrame(rafRef.current);\n  });\n}\n", "import {\n  useState,\n  useEffect,\n  useMemo,\n  useRef,\n  useContext,\n  useCallback,\n} from 'react';\nimport CellGrid from './CellGrid.jsx';\nimport Bars from './Bars.jsx';\nimport { hotkeys } from '@svar-ui/grid-store';\nimport storeContext from '../../context';\nimport { useStore, useStoreWithCounter } from '@svar-ui/lib-react';\nimport './Chart.css';\nimport TimeScales from './TimeScale.jsx';\nimport { useRenderTime } from '../../helpers/debug.js';\n\nfunction Chart(props) {\n  const {\n    readonly,\n    fullWidth,\n    fullHeight,\n    taskTemplate,\n    cellBorders,\n    highlightTime,\n  } = props;\n\n  const api = useContext(storeContext);\n\n  const [selected, selectedCounter] = useStoreWithCounter(api, '_selected');\n  const rScrollTop = useStore(api, 'scrollTop');\n  const cellHeight = useStore(api, 'cellHeight');\n  const cellWidth = useStore(api, 'cellWidth');\n  const scales = useStore(api, '_scales');\n  const markers = useStore(api, '_markers');\n  const rScrollTask = useStore(api, '_scrollTask');\n  const zoom = useStore(api, 'zoom');\n\n  const [chartHeight, setChartHeight] = useState();\n  const chartRef = useRef(null);\n\n  const extraRows = 1 + (scales?.rows?.length || 0);\n  const selectStyle = useMemo(() => {\n    const t = [];\n    if (selected && selected.length && cellHeight) {\n      selected.forEach((obj) => {\n        t.push({ height: `${cellHeight}px`, top: `${obj.$y - 3}px` });\n      });\n    }\n    return t;\n  }, [selectedCounter, cellHeight]);\n\n  const chartGridHeight = useMemo(\n    () => Math.max(chartHeight || 0, fullHeight),\n    [chartHeight, fullHeight],\n  );\n\n  useEffect(() => {\n    const el = chartRef.current;\n    if (!el) return;\n\n    if (typeof rScrollTop === 'number') {\n      el.scrollTop = rScrollTop;\n    }\n  }, [rScrollTop]);\n\n  const onScroll = () => {\n    const scroll = { left: true };\n    setScroll(scroll);\n  };\n\n  function setScroll(scroll) {\n    const el = chartRef.current;\n    if (!el) return;\n    const pos = {};\n    if (scroll.left) pos.left = el.scrollLeft;\n    api.exec('scroll-chart', pos);\n  }\n\n  function dataRequest() {\n    const el = chartRef.current;\n    const clientHeightLocal = chartHeight || 0;\n    const num = Math.ceil(clientHeightLocal / (cellHeight || 1)) + 1;\n    const pos = Math.floor(((el && el.scrollTop) || 0) / (cellHeight || 1));\n    const start = Math.max(0, pos - extraRows);\n    const end = pos + num + extraRows;\n    const from = start * (cellHeight || 0);\n    api.exec('render-data', {\n      start,\n      end,\n      from,\n    });\n  }\n\n  useEffect(() => {\n    dataRequest();\n  }, [chartHeight, rScrollTop]);\n\n  const showTask = useCallback(\n    (value) => {\n      if (!value) return;\n\n      const { id, mode } = value;\n\n      if (mode.toString().indexOf('x') < 0) return;\n      const el = chartRef.current;\n      if (!el) return;\n      const { clientWidth } = el;\n      const task = api.getTask(id);\n      if (task.$x + task.$w < el.scrollLeft) {\n        api.exec('scroll-chart', { left: task.$x - (cellWidth || 0) });\n        el.scrollLeft = task.$x - (cellWidth || 0);\n      } else if (task.$x >= clientWidth + el.scrollLeft) {\n        const width = clientWidth < task.$w ? cellWidth || 0 : task.$w;\n        api.exec('scroll-chart', { left: task.$x - clientWidth + width });\n        el.scrollLeft = task.$x - clientWidth + width;\n      }\n    },\n    [api, cellWidth],\n  );\n\n  useEffect(() => {\n    showTask(rScrollTask);\n  }, [rScrollTask]);\n\n  function onWheel(e) {\n    if (zoom && (e.ctrlKey || e.metaKey)) {\n      e.preventDefault();\n      const el = chartRef.current;\n      const dir = -Math.sign(e.deltaY);\n      const offset = e.clientX - (el ? el.getBoundingClientRect().left : 0);\n      api.exec('zoom-scale', {\n        dir,\n        offset,\n      });\n    }\n  }\n\n  function getHoliday(cell) {\n    const style = highlightTime(cell.date, cell.unit);\n    if (style)\n      return {\n        css: style,\n        width: cell.width,\n      };\n    return null;\n  }\n\n  const holidays = useMemo(() => {\n    return scales &&\n      (scales.minUnit === 'hour' || scales.minUnit === 'day') &&\n      highlightTime\n      ? scales.rows[scales.rows.length - 1].cells.map(getHoliday)\n      : null;\n  }, [scales, highlightTime]);\n\n  const handleHotkey = useCallback(\n    (ev) => {\n      ev.eventSource = 'chart';\n      api.exec('hotkey', ev);\n    },\n    [api],\n  );\n\n  useEffect(() => {\n    const el = chartRef.current;\n    if (!el) return;\n    const update = () => setChartHeight(el.clientHeight);\n    update();\n    const ro = new ResizeObserver(() => update());\n    ro.observe(el);\n    return () => {\n      ro.disconnect();\n    };\n  }, [chartRef.current]);\n\n  const cleanupRef = useRef(null);\n\n  useEffect(() => {\n    const el = chartRef.current;\n    if (!el) return;\n    if (cleanupRef.current) return;\n    cleanupRef.current = hotkeys(el, {\n      keys: {\n        arrowup: true,\n        arrowdown: true,\n      },\n      exec: (v) => handleHotkey(v),\n    });\n    return () => {\n      cleanupRef.current?.destroy();\n      cleanupRef.current = null;\n    };\n  }, []);\n\n  useEffect(() => {\n    const node = chartRef.current;\n    if (!node) return;\n\n    const handler = onWheel;\n    node.addEventListener('wheel', handler);\n    return () => {\n      node.removeEventListener('wheel', handler);\n    };\n  }, [onWheel]);\n\n  useRenderTime(\"chart\");\n  \n  return (\n    <div\n      className=\"wx-mR7v2Xag wx-chart\"\n      tabIndex={-1}\n      ref={chartRef}\n      onScroll={onScroll}\n    >\n      <TimeScales highlightTime={highlightTime} scales={scales} />\n      {markers && markers.length ? (\n        <div\n          className=\"wx-mR7v2Xag wx-markers\"\n          style={{ height: `${chartGridHeight}px` }}\n        >\n          {markers.map((marker, i) => (\n            <div\n              key={i}\n              className={`wx-mR7v2Xag wx-marker ${marker.css || ''}`}\n              style={{ left: `${marker.left}px` }}\n            >\n              <div className=\"wx-mR7v2Xag wx-content\">{marker.text}</div>\n            </div>\n          ))}\n        </div>\n      ) : null}\n\n      <div\n        className=\"wx-mR7v2Xag wx-area\"\n        style={{ width: `${fullWidth}px`, height: `${chartGridHeight}px` }}\n      >\n        {holidays ? (\n          <div\n            className=\"wx-mR7v2Xag wx-gantt-holidays\"\n            style={{ height: '100%' }}\n          >\n            {holidays.map((holiday, i) =>\n              holiday ? (\n                <div\n                  key={i}\n                  className={'wx-mR7v2Xag ' + holiday.css}\n                  style={{\n                    width: `${holiday.width}px`,\n                    left: `${i * holiday.width}px`,\n                  }}\n                />\n              ) : null,\n            )}\n          </div>\n        ) : null}\n\n        <CellGrid borders={cellBorders} />\n\n        {selected && selected.length\n          ? selected.map((obj, index) =>\n              obj.$y ? (\n                <div\n                  key={obj.id}\n                  className=\"wx-mR7v2Xag wx-selected\"\n                  data-id={obj.id}\n                  style={selectStyle[index]}\n                ></div>\n              ) : null,\n            )\n          : null}\n\n        <Bars readonly={readonly} taskTemplate={taskTemplate} />\n      </div>\n    </div>\n  );\n}\n\nexport default Chart;\n", "import { useState, useMemo, useRef, useCallback, useEffect } from 'react';\nimport { useWritableProp } from '@svar-ui/lib-react';\nimport './Resizer.css';\n\nfunction Resizer(props) {\n  const {\n    position = 'after',\n    size = 4,\n    dir = 'x',\n    onMove,\n    onDisplayChange,\n    compactMode,\n    containerWidth = 0,\n    leftThreshold = 50,\n    rightThreshold = 50,\n  } = props;\n\n  const [value, setValue] = useWritableProp(props.value ?? 0);\n  const [display, setDisplay] = useWritableProp(props.display ?? 'all');\n\n  function getBox(val) {\n    let offset = 0;\n    if (position == 'center') offset = size / 2;\n    else if (position == 'before') offset = size;\n\n    const box = {\n      size: [size + 'px', 'auto'],\n      p: [val - offset + 'px', '0px'],\n      p2: ['auto', '0px'],\n    };\n\n    if (dir != 'x') {\n      for (let name in box) box[name] = box[name].reverse();\n    }\n    return box;\n  }\n\n  const [active, setActive] = useState(false);\n  const [initialPosition, setInitialPosition] = useState(null);\n\n  const startRef = useRef(0);\n  const posRef = useRef();\n  const timeoutRef = useRef();\n  const displayRef = useRef(display);\n\n  useEffect(() => {\n    displayRef.current = display;\n  }, [display]);\n\n  useEffect(() => {\n    if (initialPosition === null && value > 0) {\n      setInitialPosition(value);\n    }\n  }, [initialPosition, value]);\n\n  function getEventPos(ev) {\n    return dir == 'x' ? ev.clientX : ev.clientY;\n  }\n\n  const move = useCallback(\n    (ev) => {\n      const newPos = posRef.current + getEventPos(ev) - startRef.current;\n\n      setValue(newPos);\n      let nextDisplay;\n\n      if (newPos <= leftThreshold) {\n        nextDisplay = 'chart';\n      } else if (containerWidth - newPos <= rightThreshold) {\n        nextDisplay = 'grid';\n      } else {\n        nextDisplay = 'all';\n      }\n\n      if (displayRef.current !== nextDisplay) {\n        setDisplay(nextDisplay);\n        displayRef.current = nextDisplay;\n      }\n\n      if (timeoutRef.current) clearTimeout(timeoutRef.current);\n      timeoutRef.current = setTimeout(() => onMove && onMove(newPos), 100);\n    },\n    [containerWidth, leftThreshold, rightThreshold, onMove],\n  );\n\n  const up = useCallback(() => {\n    document.body.style.cursor = '';\n    document.body.style.userSelect = '';\n    setActive(false);\n    window.removeEventListener('mousemove', move);\n    window.removeEventListener('mouseup', up);\n  }, [move]);\n\n  const cursor = useMemo(\n    () => (display !== 'all' ? 'auto' : dir == 'x' ? 'ew-resize' : 'ns-resize'),\n    [display, dir],\n  );\n\n  const down = useCallback(\n    (ev) => {\n      // Prevent dragging when in normal mode and only one view is visible\n      if (!compactMode && (display === 'grid' || display === 'chart')) {\n        return;\n      }\n\n      startRef.current = getEventPos(ev);\n\n      posRef.current = value;\n      setActive(true);\n\n      document.body.style.cursor = cursor;\n      document.body.style.userSelect = 'none';\n\n      window.addEventListener('mousemove', move);\n      window.addEventListener('mouseup', up);\n    },\n    [cursor, move, up, value, compactMode, display],\n  );\n\n  function resetToInitial() {\n    setDisplay('all');\n    if (initialPosition !== null) {\n      setValue(initialPosition);\n      if (onMove) onMove(initialPosition);\n    }\n  }\n\n  function handleExpand(direction) {\n    if (compactMode) {\n      const newDisplay = display === 'chart' ? 'grid' : 'chart';\n      setDisplay(newDisplay);\n      onDisplayChange(newDisplay);\n    } else {\n      if (display === 'grid' || display === 'chart') {\n        resetToInitial();\n        onDisplayChange('all');\n      } else {\n        const newDisplay = direction === 'left' ? 'chart' : 'grid';\n        setDisplay(newDisplay);\n        onDisplayChange(newDisplay);\n      }\n    }\n  }\n\n  function handleExpandLeft() {\n    handleExpand('left');\n  }\n\n  function handleExpandRight() {\n    handleExpand('right');\n  }\n\n  const b = useMemo(() => getBox(value), [value, position, size, dir]);\n\n  const rootClassName = [\n    'wx-resizer',\n    `wx-resizer-${dir}`,\n    `wx-resizer-display-${display}`,\n    active ? 'wx-resizer-active' : '',\n  ]\n    .filter(Boolean)\n    .join(' ');\n\n  return (\n    <div\n      className={'wx-pFykzMlT ' + rootClassName}\n      onMouseDown={down}\n      style={{ width: b.size[0], height: b.size[1], cursor }}\n    >\n      <div className=\"wx-pFykzMlT wx-button-expand-box\">\n        <div className=\"wx-pFykzMlT wx-button-expand-content wx-button-expand-left\">\n          <i\n            className=\"wx-pFykzMlT wxi-menu-left\"\n            onClick={handleExpandLeft}\n          ></i>\n        </div>\n        <div className=\"wx-pFykzMlT wx-button-expand-content wx-button-expand-right\">\n          <i\n            className=\"wx-pFykzMlT wxi-menu-right\"\n            onClick={handleExpandRight}\n          ></i>\n        </div>\n      </div>\n      <div className=\"wx-pFykzMlT wx-resizer-line\"></div>\n    </div>\n  );\n}\n\nexport default Resizer;\n", "const COMPACT_WIDTH = 650;\n\nexport function modeObserver(callback) {\n  let observer;\n\n  function observe() {\n    observer = new ResizeObserver((entries) => {\n      for (let obj of entries) {\n        if (obj.target === document.body) {\n          let mode = obj.contentRect.width <= COMPACT_WIDTH;\n          callback(mode);\n        }\n      }\n    });\n\n    observer.observe(document.body);\n  }\n\n  function disconnect() {\n    if (observer) {\n      observer.disconnect();\n      observer = null;\n    }\n  }\n\n  return {\n    observe,\n    disconnect,\n  };\n}\n", "import {\n  useState,\n  useEffect,\n  useMemo,\n  useRef,\n  useCallback,\n  useContext,\n} from 'react';\nimport { hotkeys } from '@svar-ui/grid-store';\nimport Grid from './grid/Grid.jsx';\nimport Chart from './chart/Chart.jsx';\nimport Resizer from './Resizer.jsx';\nimport { modeObserver } from '../helpers/modeResizeObserver';\nimport storeContext from '../context';\nimport { useStore } from '@svar-ui/lib-react';\nimport './Layout.css';\nimport { flushSync } from 'react-dom'\n\nfunction Layout(props) {\n  const {\n    taskTemplate,\n    readonly,\n    cellBorders,\n    highlightTime,\n    onTableAPIChange,\n  } = props;\n\n  const api = useContext(storeContext);\n\n  const rTasks = useStore(api, '_tasks');\n  const rScales = useStore(api, '_scales');\n  const rCellHeight = useStore(api, 'cellHeight');\n  const rColumns = useStore(api, 'columns');\n  const rScrollTask = useStore(api, '_scrollTask');\n  const undo = useStore(api, 'undo');\n  const [compactMode, setCompactMode] = useState(false);\n  let [gridWidth, setGridWidth] = useState(0);\n  const [ganttWidth, setGanttWidth] = useState(0);\n  const [ganttHeight, setGanttHeight] = useState(0);\n  const [innerWidth, setInnerWidth] = useState(undefined);\n  const [display, setDisplay] = useState('all');\n\n  const lastDisplay = useRef(null);\n\n  const handleResize = useCallback(\n    (mode) => {\n      setCompactMode((prev) => {\n        if (mode !== prev) {\n          if (mode) {\n            lastDisplay.current = display;\n            if (display === 'all') setDisplay('grid');\n          } else if (!lastDisplay.current || lastDisplay.current === 'all') {\n            setDisplay('all');\n          }\n        }\n        return mode;\n      });\n    },\n    [display],\n  );\n\n  useEffect(() => {\n    const ro = modeObserver(handleResize);\n    ro.observe();\n    return () => {\n      ro.disconnect();\n    };\n  }, [handleResize]);\n\n  const gridColumnWidth = useMemo(() => {\n    let w;\n    if (rColumns.every((c) => c.width && !c.flexgrow)) {\n      w = rColumns.reduce((acc, c) => acc + parseInt(c.width), 0);\n    } else {\n      if (compactMode && display === 'chart') {\n        w = parseInt(rColumns.find((c) => c.id === 'action')?.width) || 50;\n      } else {\n        w = 440;\n      }\n    }\n    gridWidth = w;\n    return w;\n  }, [rColumns, compactMode, display]);\n\n  useEffect(() => {\n    setGridWidth(gridColumnWidth);\n  }, [gridColumnWidth]);\n\n  const scrollSize = useMemo(\n    () => (ganttWidth ?? 0) - (innerWidth ?? 0),\n    [ganttWidth, innerWidth],\n  );\n  const fullWidth = useMemo(() => rScales.width, [rScales]);\n  const fullHeight = useMemo(\n    () => rTasks.length * rCellHeight,\n    [rTasks, rCellHeight],\n  );\n  const scrollHeight = useMemo(\n    () => rScales.height + fullHeight + scrollSize,\n    [rScales, fullHeight, scrollSize],\n  );\n  const totalWidth = useMemo(\n    () => gridWidth + fullWidth,\n    [gridWidth, fullWidth],\n  );\n\n  const chartRef = useRef(null);\n  const expandScale = useCallback(() => {\n    Promise.resolve().then(() => {\n      if ((ganttWidth ?? 0) > (totalWidth ?? 0)) {\n        const minWidth = (ganttWidth ?? 0) - gridWidth;\n        api.exec('expand-scale', { minWidth });\n      }\n    });\n  }, [ganttWidth, totalWidth, gridWidth, api]);\n\n  useEffect(() => {\n    let ro;\n    if (chartRef.current) {\n      ro = new ResizeObserver(expandScale);\n      ro.observe(chartRef.current);\n    }\n    return () => {\n      if (ro) ro.disconnect();\n    };\n  }, [chartRef.current, expandScale]);\n\n  useEffect(() => {\n    expandScale();\n  }, [fullWidth]);\n\n  const ganttDivRef = useRef(null);\n  const pseudoRowsRef = useRef(null);\n\n  const onScroll = useCallback(() => {\n    const el = ganttDivRef.current;\n    if (el) {\n      api.exec('scroll-chart', {\n        top: el.scrollTop,\n      });\n    }\n  }, [api]);\n\n  const latest = useRef({\n    rTasks: [],\n    rScales: { height: 0 },\n    rCellHeight: 0,\n    scrollSize: 0,\n    ganttDiv: null,\n    ganttHeight: 0,\n  });\n\n  useEffect(() => {\n    latest.current = {\n      rTasks,\n      rScales,\n      rCellHeight,\n      scrollSize,\n      ganttDiv: ganttDivRef.current,\n      ganttHeight: ganttHeight ?? 0,\n    };\n  }, [rTasks, rScales, rCellHeight, scrollSize, ganttHeight]);\n\n  const scrollToTask = useCallback(\n    (value) => {\n      if (!value) return;\n      const {\n        rTasks: t,\n        rScales: sc,\n        rCellHeight: ch,\n        scrollSize: ss,\n        ganttDiv: el,\n        ganttHeight: gh,\n      } = latest.current;\n      if (!el) return;\n      const { id } = value;\n      const index = t.findIndex((tt) => tt.id === id);\n      if (index > -1) {\n        const height = gh - sc.height;\n        const scrollY = index * ch;\n        const now = el.scrollTop;\n        let top = null;\n        if (scrollY < now) {\n          top = scrollY;\n        } else if (scrollY + ch > now + height) {\n          top = scrollY - height + ch + ss;\n        }\n        if (top !== null) {\n          api.exec('scroll-chart', { top: Math.max(top, 0) });\n          ganttDivRef.current.scrollTop = Math.max(top, 0);\n        }\n      }\n    },\n    [api],\n  );\n\n  useEffect(() => {\n    scrollToTask(rScrollTask);\n  }, [rScrollTask]);\n\n  useEffect(() => {\n    const ganttDiv = ganttDivRef.current;\n    const pseudoRows = pseudoRowsRef.current;\n    if (!ganttDiv || !pseudoRows) return;\n    const update = () => {\n      flushSync(() => {\n        setGanttHeight(ganttDiv.offsetHeight);\n        setGanttWidth(ganttDiv.offsetWidth);\n        setInnerWidth(pseudoRows.offsetWidth);\n      });\n    };\n    const ro = new ResizeObserver(update);\n    ro.observe(ganttDiv);\n    return () => ro.disconnect();\n  }, [ganttDivRef.current]);\n\n  const layoutRef = useRef(null);\n  const cleanupRef = useRef(null);\n\n  useEffect(() => {\n    if (cleanupRef.current) {\n      cleanupRef.current.destroy();\n      cleanupRef.current = null;\n    }\n    const node = layoutRef.current;\n    if (!node) return;\n\n    cleanupRef.current = hotkeys(node, {\n      keys: {\n        'ctrl+c': true,\n        'ctrl+v': true,\n        'ctrl+x': true,\n        'ctrl+d': true,\n        backspace: true,\n        'ctrl+z': undo,\n        'ctrl+y': undo,\n      },\n      exec: (ev) => {\n        if (!ev.isInput) api.exec('hotkey', ev);\n      },\n    });\n\n    return () => {\n      cleanupRef.current?.destroy();\n      cleanupRef.current = null;\n    };\n  }, [undo]);\n\n  return (\n    <div className=\"wx-jlbQoHOz wx-gantt\" ref={ganttDivRef} onScroll={onScroll}>\n      <div\n        className=\"wx-jlbQoHOz wx-pseudo-rows\"\n        style={{ height: scrollHeight, width: '100%' }}\n        ref={pseudoRowsRef}\n      >\n        <div\n          className=\"wx-jlbQoHOz wx-stuck\"\n          style={{\n            height: ganttHeight,\n            width: innerWidth,\n          }}\n        >\n          <div tabIndex={0} className=\"wx-jlbQoHOz wx-layout\" ref={layoutRef}>\n            {rColumns.length ? (\n              <>\n                <Grid\n                  display={display}\n                  compactMode={compactMode}\n                  columnWidth={gridColumnWidth}\n                  width={gridWidth}\n                  readonly={readonly}\n                  fullHeight={fullHeight}\n                  onTableAPIChange={onTableAPIChange}\n                />\n                <Resizer\n                  value={gridWidth}\n                  display={display}\n                  compactMode={compactMode}\n                  containerWidth={ganttWidth}\n                  onMove={(value) => setGridWidth(value)}\n                  onDisplayChange={(display) => setDisplay(display)}\n                />\n              </>\n            ) : null}\n\n            <div className=\"wx-jlbQoHOz wx-content\" ref={chartRef}>\n              <Chart\n                readonly={readonly}\n                fullWidth={fullWidth}\n                fullHeight={fullHeight}\n                taskTemplate={taskTemplate}\n                cellBorders={cellBorders}\n                highlightTime={highlightTime}\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default Layout;\n", "import { dateToString } from '@svar-ui/lib-dom';\n\nexport function getUnitFormats(_) {\n  return {\n    year: '%Y',\n    quarter: `${_('Q')} %Q`,\n    month: '%M',\n    week: `${_('Week')} %w`,\n    day: '%M %j',\n    hour: '%H:%i',\n  };\n}\n\nfunction normalizeFormatter(value, calendarLocale) {\n  return typeof value === 'function'\n    ? value\n    : dateToString(value, calendarLocale);\n}\n\nexport function prepareScales(scales, calendarLocale) {\n  return scales.map(({ format, ...scale }) => ({\n    ...scale,\n    format: normalizeFormatter(format, calendarLocale),\n  }));\n}\n\nexport function prepareFormats(calendarLocale, _) {\n  const formats = getUnitFormats(_);\n  for (let unit in formats) {\n    formats[unit] = dateToString(formats[unit], calendarLocale);\n  }\n  return formats;\n}\n\nexport function prepareColumns(columns, calendarLocale) {\n  if (!columns || !columns.length) return columns;\n  const format = dateToString('%d-%m-%Y', calendarLocale);\n\n  return columns.map((col) => {\n    if (col.template) return col;\n\n    if (col.id === 'start' || col.id == 'end') {\n      return {\n        ...col,\n        //store locale template for unscheduled tasks\n        _template: (b) => format(b),\n        template: (b) => format(b),\n      };\n    }\n    if (col.id === 'duration') {\n      return {\n        ...col,\n        _template: (b) => b,\n        template: (b) => b,\n      };\n    }\n    return col;\n  });\n}\n\nexport function prepareZoom(zoom, calendarLocale) {\n  if (!zoom.levels) {\n    return zoom;\n  }\n\n  return {\n    ...zoom,\n    levels: zoom.levels.map((level) => ({\n      ...level,\n      scales: prepareScales(level.scales, calendarLocale),\n    })),\n  };\n}\n", "import {\n  forwardRef,\n  useEffect,\n  useMemo,\n  useRef,\n  useImperativeHandle,\n  useState,\n  useContext,\n} from 'react';\n\n// core widgets lib\nimport { context } from '@svar-ui/react-core';\n\n// locales\nimport { locale as l } from '@svar-ui/lib-dom';\nimport { en } from '@svar-ui/gantt-locales';\nimport { en as coreEn } from '@svar-ui/core-locales';\n\n// stores\nimport { EventBusRouter } from '@svar-ui/lib-state';\nimport {\n  DataStore,\n  defaultColumns,\n  defaultTaskTypes,\n  parseTaskDates,\n  normalizeZoom,\n  normalizeLinks,\n} from '@svar-ui/gantt-store';\n\n// context\nimport StoreContext from '../context';\n\n// store factory\nimport { writable } from '@svar-ui/lib-react';\n\n// ui\nimport Layout from './Layout.jsx';\n\n// helpers\nimport {\n  prepareScales,\n  prepareFormats,\n  prepareColumns,\n  prepareZoom,\n} from '../helpers/prepareConfig.js';\n\nconst camelize = (s) =>\n  s\n    .split('-')\n    .map((part) => (part ? part.charAt(0).toUpperCase() + part.slice(1) : ''))\n    .join('');\n\nconst defaultScales = [\n  { unit: 'month', step: 1, format: '%F %Y' },\n  { unit: 'day', step: 1, format: '%j' },\n];\n\nconst Gantt = forwardRef(function Gantt(\n  {\n    taskTemplate = null,\n    markers = [],\n    taskTypes = defaultTaskTypes,\n    tasks = [],\n    selected = [],\n    activeTask = null,\n    links = [],\n    scales = defaultScales,\n    columns = defaultColumns,\n    start = null,\n    end = null,\n    lengthUnit = 'day',\n    durationUnit = 'day',\n    cellWidth = 100,\n    cellHeight = 38,\n    scaleHeight = 36,\n    readonly = false,\n    cellBorders = 'full',\n    zoom = false,\n    baselines = false,\n    highlightTime: highlightTimeProp = null,\n    init = null,\n    autoScale = true,\n    unscheduledTasks = false,\n    criticalPath = null,\n    schedule = { type: 'forward' },\n    projectStart = null,\n    projectEnd = null,\n    calendar = null,\n    undo = false,\n    splitTasks = false,\n    summary = null,\n    _export = false,\n    ...restProps\n  },\n  ref,\n) {\n  // keep latest rest props for event routing\n  const restPropsRef = useRef();\n  restPropsRef.current = restProps;\n\n  // init stores\n  const dataStore = useMemo(() => new DataStore(writable), []);\n\n  // locale and formats\n  // uses same logic as the Locale component\n  const words = useMemo(() => ({ ...coreEn, ...en }), []);\n  const i18nCtx = useContext(context.i18n);\n  const locale = useMemo(() => {\n    if (!i18nCtx) return l(words);\n    return i18nCtx.extend(words, true);\n  }, [i18nCtx, words]);\n\n  // prepare configuration objects\n  const lCalendar = useMemo(() => locale.getRaw().calendar, [locale]);\n\n  const normalizedConfig = useMemo(() => {\n    let config = {\n      zoom: prepareZoom(zoom, lCalendar),\n      scales: prepareScales(scales, lCalendar),\n      columns: prepareColumns(columns, lCalendar),\n      links: normalizeLinks(links),\n      cellWidth,\n    };\n    if (config.zoom) {\n      config = {\n        ...config,\n        ...normalizeZoom(\n          config.zoom,\n          prepareFormats(lCalendar, locale.getGroup('gantt')),\n          config.scales,\n          cellWidth,\n        ),\n      };\n    }\n    return config;\n  }, [zoom, scales, columns, links, cellWidth, lCalendar, locale]);\n\n  // parse task dates effect\n  const parsedTasksRef = useRef(null);\n  if (parsedTasksRef.current !== tasks) {\n    if (!_export) {\n      parseTaskDates(tasks, { durationUnit, splitTasks, calendar });\n    }\n    parsedTasksRef.current = tasks;\n  }\n  useEffect(() => {\n    if (!_export) {\n      parseTaskDates(tasks, { durationUnit, splitTasks, calendar });\n    }\n  }, [tasks, durationUnit, calendar, splitTasks, _export]);\n\n  const firstInRoute = useMemo(() => dataStore.in, [dataStore]);\n\n  const lastInRouteRef = useRef(null);\n  if (lastInRouteRef.current === null) {\n    lastInRouteRef.current = new EventBusRouter((a, b) => {\n      const name = 'on' + camelize(a);\n      if (restPropsRef.current && restPropsRef.current[name]) {\n        restPropsRef.current[name](b);\n      }\n    });\n    firstInRoute.setNext(lastInRouteRef.current);\n  }\n\n  // writable prop for two-way binding tableAPI\n  const [tableAPI, setTableAPI] = useState(null);\n  const tableAPIRef = useRef(null);\n  tableAPIRef.current = tableAPI;\n\n  // public API\n  const api = useMemo(\n    () => ({\n      getState: dataStore.getState.bind(dataStore),\n      getReactiveState: dataStore.getReactive.bind(dataStore),\n      getStores: () => ({ data: dataStore }),\n      exec: firstInRoute.exec,\n      setNext: (ev) => {\n        lastInRouteRef.current = lastInRouteRef.current.setNext(ev);\n        return lastInRouteRef.current;\n      },\n      intercept: firstInRoute.intercept.bind(firstInRoute),\n      on: firstInRoute.on.bind(firstInRoute),\n      detach: firstInRoute.detach.bind(firstInRoute),\n      getTask: dataStore.getTask.bind(dataStore),\n      serialize: () => dataStore.serialize(),\n      getTable: (waitRender) =>\n        waitRender\n          ? new Promise((res) => setTimeout(() => res(tableAPIRef.current), 1))\n          : tableAPIRef.current,\n      getHistory: () => dataStore.getHistory(),\n    }),\n    [dataStore, firstInRoute],\n  );\n\n  // expose API via ref\n  useImperativeHandle(\n    ref,\n    () => ({\n      ...api,\n    }),\n    [api],\n  );\n\n  const initOnceRef = useRef(0);\n  useEffect(() => {\n    if (!initOnceRef.current) {\n      if (init) init(api);\n    } else {\n      // const prev = dataStore.getState();\n      dataStore.init({\n        tasks,\n        links: normalizedConfig.links,\n        start,\n        columns: normalizedConfig.columns,\n        end,\n        lengthUnit,\n        cellWidth: normalizedConfig.cellWidth,\n        cellHeight,\n        scaleHeight,\n        scales: normalizedConfig.scales,\n        taskTypes,\n        zoom: normalizedConfig.zoom,\n        selected,\n        activeTask,\n        baselines,\n        autoScale,\n        unscheduledTasks,\n        markers,\n        durationUnit,\n        criticalPath,\n        schedule,\n        projectStart,\n        projectEnd,\n        calendar,\n        undo,\n        _weekStart: lCalendar.weekStart,\n        splitTasks,\n        summary,\n      });\n    }\n    initOnceRef.current++;\n  }, [\n    api,\n    init,\n    tasks,\n    normalizedConfig,\n    start,\n    end,\n    lengthUnit,\n    cellHeight,\n    scaleHeight,\n    taskTypes,\n    selected,\n    activeTask,\n    baselines,\n    autoScale,\n    unscheduledTasks,\n    markers,\n    durationUnit,\n    criticalPath,\n    schedule,\n    projectStart,\n    projectEnd,\n    calendar,\n    undo,\n    lCalendar,\n    splitTasks,\n    summary,\n    dataStore,\n  ]);\n\n  if (initOnceRef.current === 0) {\n    dataStore.init({\n      tasks,\n      links: normalizedConfig.links,\n      start,\n      columns: normalizedConfig.columns,\n      end,\n      lengthUnit,\n      cellWidth: normalizedConfig.cellWidth,\n      cellHeight,\n      scaleHeight,\n      scales: normalizedConfig.scales,\n      taskTypes,\n      zoom: normalizedConfig.zoom,\n      selected,\n      activeTask,\n      baselines,\n      autoScale,\n      unscheduledTasks,\n      markers,\n      durationUnit,\n      criticalPath,\n      schedule,\n      projectStart,\n      projectEnd,\n      calendar,\n      undo,\n      _weekStart: lCalendar.weekStart,\n      splitTasks,\n      summary,\n    });\n  }\n\n  // highlightTime from calendar\n  const highlightTime = useMemo(() => {\n    if (calendar) {\n      return (day, unit) => {\n        if (unit == 'day' && !calendar.getDayHours(day)) return 'wx-weekend';\n        if (unit == 'hour' && !calendar.getDayHours(day)) return 'wx-weekend';\n        return '';\n      };\n    }\n    return highlightTimeProp;\n  }, [calendar, highlightTimeProp]);\n\n  return (\n    <context.i18n.Provider value={locale}>\n      <StoreContext.Provider value={api}>\n        <Layout\n          taskTemplate={taskTemplate}\n          readonly={readonly}\n          cellBorders={cellBorders}\n          highlightTime={highlightTime}\n          onTableAPIChange={setTableAPI}\n        />\n      </StoreContext.Provider>\n    </context.i18n.Provider>\n  );\n});\n\nexport default Gantt;\n", "import { useContext, useMemo } from 'react';\nimport { Toolbar as WxToolbar } from '@svar-ui/react-toolbar';\nimport { useStoreLater } from '@svar-ui/lib-react';\nimport {\n  handleAction,\n  getToolbarButtons,\n  isHandledAction,\n} from '@svar-ui/gantt-store';\nimport { locale } from '@svar-ui/lib-dom';\nimport { en } from '@svar-ui/gantt-locales';\nimport { context } from '@svar-ui/react-core';\n\nexport default function Toolbar({ api = null, items = [] }) {\n  const i18nCtx = useContext(context.i18n);\n  const i18nLocal = useMemo(() => (i18nCtx ? i18nCtx : locale(en)), [i18nCtx]);\n  const _ = useMemo(() => i18nLocal.getGroup('gantt'), [i18nLocal]);\n\n  const _selected = useStoreLater(api, '_selected');\n  const undo = useStoreLater(api, 'undo');\n  const history = useStoreLater(api, 'history');\n  const splitTasks = useStoreLater(api, 'splitTasks');\n\n  const historyActions = ['undo', 'redo'];\n\n  const finalItems = useMemo(() => {\n    const fullButtons = getToolbarButtons({ undo: true, splitTasks: true });\n    const buttons = items.length\n      ? items\n      : getToolbarButtons({\n          undo,\n          splitTasks,\n        });\n    return buttons.map((b) => {\n      let item = { ...b, disabled: false };\n      item.handler = isHandledAction(fullButtons, item.id)\n        ? (it) => handleAction(api, it.id, null, _)\n        : item.handler;\n      if (item.text) item.text = _(item.text);\n      if (item.menuText) item.menuText = _(item.menuText);\n      return item;\n    });\n  }, [items, api, _, undo, splitTasks]);\n\n  const buttons = useMemo(() => {\n    const finalButtons = [];\n    finalItems.forEach((item) => {\n      const action = item.id;\n      if (action === 'add-task') {\n        finalButtons.push(item);\n      } else if (!historyActions.includes(action)) {\n        if (!_selected?.length || !api) return;\n        finalButtons.push({\n          ...item,\n          disabled:\n            item.isDisabled &&\n            _selected.some((task) => item.isDisabled(task, api.getState())),\n        });\n      } else if (historyActions.includes(action)) {\n        finalButtons.push({\n          ...item,\n          disabled: item.isDisabled(history),\n        });\n      }\n    });\n    // filter out consecutive separators\n    return finalButtons.filter((button, index) => {\n      if (api && button.isHidden)\n        return !_selected.some((task) => button.isHidden(task, api.getState()));\n      if (button.comp === 'separator') {\n        const nextButton = finalButtons[index + 1];\n        if (!nextButton || nextButton.comp === 'separator') return false;\n      }\n      return true;\n    });\n  }, [api, _selected, history, finalItems]);\n\n  if (!i18nCtx) {\n    return (\n      <context.i18n.Provider value={i18nLocal}>\n        <WxToolbar items={buttons} />\n      </context.i18n.Provider>\n    );\n  }\n\n  return <WxToolbar items={buttons} />;\n}\n", "import {\n  useEffect,\n  useMemo,\n  useRef,\n  useCallback,\n  useContext,\n  forwardRef,\n  useImperativeHandle,\n} from 'react';\nimport { ContextMenu as WxContextMenu } from '@svar-ui/react-menu';\nimport { handleAction, getMenuOptions, isHandledAction } from '@svar-ui/gantt-store';\nimport { locale, locateID } from '@svar-ui/lib-dom';\nimport { en } from '@svar-ui/gantt-locales';\nimport { en as coreEn } from '@svar-ui/core-locales';\nimport { context } from '@svar-ui/react-core';\nimport { useStoreLater } from '@svar-ui/lib-react';\nimport './ContextMenu.css';\n\nconst ContextMenu = forwardRef(function ContextMenu(\n  {\n    options: optionsInit = [],\n    api = null,\n    resolver = null,\n    filter = null,\n    at = 'point',\n    children,\n    onClick,\n    css,\n  },\n  ref,\n) {\n  const menuRef = useRef(null);\n  const activeIdRef = useRef(null);\n\n  // i18n context\n  const i18nCtx = useContext(context.i18n);\n  const l = useMemo(() => i18nCtx || locale({ ...en, ...coreEn }), [i18nCtx]);\n  const _ = useMemo(() => l.getGroup('gantt'), [l]);\n\n  const taskTypesVal = useStoreLater(api, 'taskTypes');\n  const selectedVal = useStoreLater(api, 'selected');\n  const selectedTasksVal = useStoreLater(api, '_selected');\n  const splitTasksVal = useStoreLater(api, 'splitTasks');\n  const summaryVal = useStoreLater(api, 'summary');\n\n  const config = useMemo(\n    () => ({\n      splitTasks: splitTasksVal,\n      taskTypes: taskTypesVal,\n      summary: summaryVal,\n    }),\n    [splitTasksVal, taskTypesVal, summaryVal],\n  );\n\n  const fullOptions = useMemo(() => getMenuOptions(config), [config]);\n\n  useEffect(() => {\n    if (!api) return;\n\n    api.on('scroll-chart', () => {\n      if (menuRef.current && menuRef.current.show) menuRef.current.show();\n    });\n    api.on('drag-task', () => {\n      if (menuRef.current && menuRef.current.show) menuRef.current.show();\n    });\n  }, [api]);\n\n  function applyLocaleFn(opts) {\n    return opts.map((op) => {\n      op = { ...op };\n      if (op.text) op.text = _(op.text);\n      if (op.subtext) op.subtext = _(op.subtext);\n      if (op.data) op.data = applyLocaleFn(op.data);\n      return op;\n    });\n  }\n\n  function getOptions() {\n    const finalOptions = optionsInit.length\n      ? optionsInit\n      : getMenuOptions(config);\n\n    return applyLocaleFn(finalOptions);\n  }\n\n  const cOptions = useMemo(() => {\n    return getOptions();\n  }, [api, optionsInit, config, _]);\n\n  const selectedTasks = useMemo(\n    () => (selectedTasksVal && selectedTasksVal.length ? selectedTasksVal : []),\n    [selectedTasksVal],\n  );\n\n  const itemResolver = useCallback(\n    (id, ev) => {\n      let task = id ? api?.getTask(id) : null;\n      if (resolver) {\n        const result = resolver(id, ev);\n        task = result === true ? task : result;\n      }\n      if (task) {\n        const segmentIndex = locateID(ev.target, 'data-segment');\n        if (segmentIndex !== null)\n          activeIdRef.current = { id: task.id, segmentIndex };\n        else activeIdRef.current = task.id;\n\n        if (!Array.isArray(selectedVal) || !selectedVal.includes(task.id)) {\n          api && api.exec && api.exec('select-task', { id: task.id });\n        }\n      }\n      return task;\n    },\n    [api, resolver, selectedVal],\n  );\n\n  const menuAction = useCallback(\n    (ev) => {\n      const action = ev.action;\n      if (action) {\n        const isAction = isHandledAction(fullOptions, action.id);\n        if (isAction) handleAction(api, action.id, activeIdRef.current, _);\n        onClick && onClick(ev);\n      }\n    },\n    [api, _, onClick, fullOptions],\n  );\n\n  const filterMenu = useCallback(\n    (item, task) => {\n      // for single selection from resolver _selected are empty\n      // due to setAsyncState causing _selected to lag\n      const tasks = selectedTasks.length ? selectedTasks : task ? [task] : [];\n\n      let result = filter ? tasks.every((t) => filter(item, t)) : true;\n\n      if (result) {\n        if (item.isHidden)\n          result = !tasks.some((t) =>\n            item.isHidden(t, api.getState(), activeIdRef.current),\n          );\n        if (item.isDisabled) {\n          const disabled = tasks.some((t) =>\n            item.isDisabled(t, api.getState(), activeIdRef.current),\n          );\n          item.disabled = disabled;\n        }\n      }\n      return result;\n    },\n    [filter, selectedTasks, api],\n  );\n\n  useImperativeHandle(ref, () => ({\n    show: (ev, obj) => {\n      if (menuRef.current && menuRef.current.show) {\n        menuRef.current.show(ev, obj);\n      }\n    },\n  }));\n\n  const onContextMenu = useCallback((e) => {\n    if (menuRef.current && menuRef.current.show) {\n      menuRef.current.show(e);\n    }\n  }, []);\n\n  const content = (\n    <>\n      <WxContextMenu\n        filter={filterMenu}\n        options={cOptions}\n        dataKey={'id'}\n        resolver={itemResolver}\n        onClick={menuAction}\n        at={at}\n        ref={menuRef}\n        css={css}\n      />\n      <span onContextMenu={onContextMenu} data-menu-ignore=\"true\">\n        {typeof children === 'function' ? children() : children}\n      </span>\n    </>\n  );\n\n  if (!i18nCtx && context.i18n?.Provider) {\n    const Provider = context.i18n.Provider;\n    return <Provider value={l}>{content}</Provider>;\n  }\n\n  return content;\n});\n\nexport default ContextMenu;\n", "import { useState, useEffect, useMemo, useContext } from 'react';\nimport { Field, Combo, Text } from '@svar-ui/react-core';\nimport { context } from '@svar-ui/react-core';\nimport { useStore } from '@svar-ui/lib-react';\nimport './Links.css';\n\nexport default function Links({ api, autoSave, onLinksChange }) {\n  const i18n = useContext(context.i18n);\n  const _ = i18n.getGroup('gantt');\n\n  const activeTask = useStore(api, 'activeTask');\n  const _activeTask = useStore(api, '_activeTask');\n  const links = useStore(api, '_links');\n  const schedule = useStore(api, 'schedule');\n  const unscheduledTasks = useStore(api, 'unscheduledTasks');\n\n  const [linksData, setLinksData] = useState();\n\n  function getLinksData() {\n    if (activeTask) {\n      const inLinks = links\n        .filter((a) => a.target == activeTask)\n        .map((link) => ({ link, task: api.getTask(link.source) }));\n\n      const outLinks = links\n        .filter((a) => a.source == activeTask)\n        .map((link) => ({ link, task: api.getTask(link.target) }));\n\n      return [\n        { title: _('Predecessors'), data: inLinks },\n        { title: _('Successors'), data: outLinks },\n      ];\n    }\n  }\n\n  useEffect(() => {\n    setLinksData(getLinksData());\n  }, [activeTask, links]);\n\n  const list = useMemo(\n    () => [\n      { id: 'e2s', label: _('End-to-start') },\n      { id: 's2s', label: _('Start-to-start') },\n      { id: 'e2e', label: _('End-to-end') },\n      { id: 's2e', label: _('Start-to-end') },\n    ],\n    [_],\n  );\n\n  function deleteLink(id) {\n    if (autoSave) {\n      api.exec('delete-link', { id });\n    } else {\n      setLinksData((prev) =>\n        (prev || []).map((group) => ({\n          ...group,\n          data: group.data.filter((item) => item.link.id !== id),\n        })),\n      );\n      onLinksChange &&\n        onLinksChange({\n          id,\n          action: 'delete-link',\n          data: { id },\n        });\n    }\n  }\n\n  function handleChange(id, update) {\n    if (autoSave) {\n      api.exec('update-link', {\n        id,\n        link: update,\n      });\n    } else {\n      setLinksData((prev) =>\n        (prev || []).map((group) => ({\n          ...group,\n          data: group.data.map((item) =>\n            item.link.id === id\n              ? { ...item, link: { ...item.link, ...update } }\n              : item,\n          ),\n        })),\n      );\n      onLinksChange &&\n        onLinksChange({\n          id,\n          action: 'update-link',\n          data: {\n            id,\n            link: update,\n          },\n        });\n    }\n  }\n\n  return (\n    <>\n      {(linksData || []).map((group, idx) =>\n        group.data.length ? (\n          <div className=\"wx-j93aYGQf wx-links\" key={idx}>\n            <context.fieldId.Provider value={null}>\n              <Field label={group.title} position=\"top\">\n                <table>\n                  <tbody>\n                    {group.data.map((obj) => (\n                      <tr key={obj.link.id}>\n                        <td className=\"wx-j93aYGQf wx-cell\">\n                          <div className=\"wx-j93aYGQf wx-task-name\">\n                            {obj.task.text || ''}\n                          </div>\n                        </td>\n                        {schedule?.auto && obj.link.type === 'e2s' ? (\n                          <td className=\"wx-j93aYGQf wx-cell wx-link-lag\">\n                            <Text\n                              type=\"number\"\n                              placeholder={_('Lag')}\n                              value={obj.link.lag}\n                              disabled={\n                                unscheduledTasks && _activeTask?.unscheduled\n                              }\n                              onChange={(ev) => {\n                                if (!ev.input)\n                                  handleChange(obj.link.id, { lag: ev.value });\n                              }}\n                            />\n                          </td>\n                        ) : null}\n                        <td className=\"wx-j93aYGQf wx-cell\">\n                          <div className=\"wx-j93aYGQf wx-wrapper\">\n                            <Combo\n                              value={obj.link.type}\n                              placeholder={_('Select link type')}\n                              options={list}\n                              onChange={(ev) =>\n                                handleChange(obj.link.id, { type: ev.value })\n                              }\n                            >\n                              {({ option }) => option.label}\n                            </Combo>\n                          </div>\n                        </td>\n\n                        <td className=\"wx-j93aYGQf wx-cell\">\n                          <i\n                            className=\"wx-j93aYGQf wxi-delete wx-delete-icon\"\n                            onClick={() => deleteLink(obj.link.id)}\n                            role=\"button\"\n                          ></i>\n                        </td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n              </Field>\n            </context.fieldId.Provider>\n          </div>\n        ) : null,\n      )}\n    </>\n  );\n}\n", "import { DatePicker, TimePicker } from '@svar-ui/react-core';\nimport './DateTimePicker.css';\n\nexport default function DateTimePicker(props) {\n  const { value, time, format, onchange, onChange, ...restProps } = props;\n  const onChangeHandler = onChange ?? onchange;\n\n  function handleDateChange(ev) {\n    const current = new Date(ev.value);\n    current.setHours(value.getHours());\n    current.setMinutes(value.getMinutes());\n\n    onChangeHandler && onChangeHandler({ value: current });\n  }\n\n  return (\n    <div className=\"wx-hFsbgDln date-time-controll\">\n      <DatePicker\n        {...restProps}\n        value={value}\n        onChange={handleDateChange}\n        format={format}\n        buttons={['today']}\n        clear={false}\n      />\n      {time ? (\n        <TimePicker value={value} onChange={onChangeHandler} format={format} />\n      ) : null}\n    </div>\n  );\n}\n", "import { useState, useEffect, useMemo, useCallback, useContext } from 'react';\nimport { Editor as WxEditor, registerEditorItem } from '@svar-ui/react-editor';\nimport { Locale, RichSelect, Slider, Counter, TwoState } from '@svar-ui/react-core';\nimport { getEditorItems, prepareEditTask } from '@svar-ui/gantt-store';\nimport { dateToString, locale } from '@svar-ui/lib-dom';\nimport { en } from '@svar-ui/gantt-locales';\nimport { en as coreEn } from '@svar-ui/core-locales';\nimport { context } from '@svar-ui/react-core';\n\nimport Links from './editor/Links.jsx';\nimport DateTimePicker from './editor/DateTimePicker.jsx';\nimport { useStore } from '@svar-ui/lib-react';\n\n// helpers\nimport { modeObserver } from '../helpers/modeResizeObserver';\n\nimport './Editor.css';\n\nregisterEditorItem('select', RichSelect);\nregisterEditorItem('date', DateTimePicker);\nregisterEditorItem('twostate', TwoState);\nregisterEditorItem('slider', Slider);\nregisterEditorItem('counter', Counter);\nregisterEditorItem('links', Links);\n\nfunction Editor({\n  api,\n  items = [],\n  css = '',\n  layout = 'default',\n  readonly = false,\n  placement = 'sidebar',\n  bottomBar = true,\n  topBar = true,\n  autoSave = true,\n  focus = false,\n  hotkeys = {},\n}) {\n  const lFromCtx = useContext(context.i18n);\n  const l = useMemo(() => lFromCtx || locale({ ...en, ...coreEn }), [lFromCtx]);\n  const _ = useMemo(() => l.getGroup('gantt'), [l]);\n  const i18nData = l.getRaw();\n  const dateFormat = useMemo(() => {\n    const f = i18nData.gantt?.dateFormat || i18nData.formats?.dateFormat;\n    return dateToString(f, i18nData.calendar);\n  }, [i18nData]);\n\n  const normalizedTopBar = useMemo(() => {\n    if (topBar === true && !readonly) {\n      const buttons = [\n        { comp: 'icon', icon: 'wxi-close', id: 'close' },\n        { comp: 'spacer' },\n        {\n          comp: 'button',\n          type: 'danger',\n          text: _('Delete'),\n          id: 'delete',\n        },\n      ];\n      if (autoSave) return { items: buttons };\n      return {\n        items: [\n          ...buttons,\n          {\n            comp: 'button',\n            type: 'primary',\n            text: _('Save'),\n            id: 'save',\n          },\n        ],\n      };\n    }\n    return topBar;\n  }, [topBar, readonly, autoSave, _]);\n\n  // resize\n  const [compactMode, setCompactMode] = useState(false);\n  const styleCss = useMemo(\n    () => (compactMode ? 'wx-full-screen' : ''),\n    [compactMode],\n  );\n\n  const handleResize = useCallback((mode) => {\n    setCompactMode(mode);\n  }, []);\n\n  useEffect(() => {\n    const ro = modeObserver(handleResize);\n    ro.observe();\n    return () => {\n      ro.disconnect();\n    };\n  }, [handleResize]);\n\n  const activeTask = useStore(api, '_activeTask');\n  const taskId = useStore(api, 'activeTask');\n  const unscheduledTasks = useStore(api, 'unscheduledTasks');\n  const summary = useStore(api, 'summary');\n  const links = useStore(api, 'links');\n  const splitTasks = useStore(api, 'splitTasks');\n  const segmentIndex = useMemo(\n    () => splitTasks && taskId?.segmentIndex,\n    [splitTasks, taskId],\n  );\n  const isSegment = useMemo(\n    () => segmentIndex || segmentIndex === 0,\n    [segmentIndex],\n  );\n  const taskTypes = useStore(api, 'taskTypes');\n  const baseItems = useMemo(\n    () => getEditorItems({ unscheduledTasks, summary, taskTypes }),\n    [unscheduledTasks, summary, taskTypes],\n  );\n  const undo = useStore(api, 'undo');\n\n  const [linksActionsMap, setLinksActionsMap] = useState({});\n  const [inProgress, setInProgress] = useState(null);\n  const [editorValues, setEditorValues] = useState();\n  const [editorErrors, setEditorErrors] = useState(null);\n\n  const task = useMemo(() => {\n    if (!activeTask) return null;\n    let data;\n    if (isSegment && activeTask.segments)\n      data = { ...activeTask.segments[segmentIndex] };\n    else data = { ...activeTask };\n\n    if (readonly) {\n      // preserve parent to differentiate between segment and task\n      let values = { parent: data.parent };\n      baseItems.forEach(({ key, comp }) => {\n        if (comp !== 'links') {\n          const value = data[key];\n          if (comp === 'date' && value instanceof Date) {\n            values[key] = dateFormat(value);\n          } else if (comp === 'slider' && key === 'progress') {\n            values[key] = `${value}%`;\n          } else {\n            values[key] = value;\n          }\n        }\n      });\n      return values;\n    }\n    return data || null;\n  }, [activeTask, isSegment, segmentIndex, readonly, baseItems, dateFormat]);\n\n  useEffect(() => {\n    setEditorValues(task);\n  }, [task]);\n\n  useEffect(() => {\n    setLinksActionsMap({});\n    setEditorErrors(null);\n    setInProgress(null);\n  }, [taskId]);\n\n  function prepareEditorItems(localItems, taskData) {\n    return localItems.map((a) => {\n      const item = { ...a };\n      if (a.config) item.config = { ...item.config };\n      if (item.comp === 'links' && api) {\n        item.api = api;\n        item.autoSave = autoSave;\n        item.onLinksChange = handleLinksChange;\n      }\n      if (item.comp === 'select' && item.key === 'type') {\n        const options = item.options ?? [];\n        item.options = options.map((t) => ({\n          ...t,\n          label: _(t.label),\n        }));\n      }\n\n      if (item.comp === 'slider' && item.key === 'progress') {\n        item.labelTemplate = (value) => `${_(item.label)} ${value}%`;\n      }\n\n      if (item.label) item.label = _(item.label);\n      if (item.config?.placeholder)\n        item.config.placeholder = _(item.config.placeholder);\n\n      if (taskData) {\n        if (item.isDisabled && item.isDisabled(taskData, api.getState())) {\n          item.disabled = true;\n        } else delete item.disabled;\n      }\n      return item;\n    });\n  }\n\n  const editorItems = useMemo(() => {\n    let eItems = items.length ? items : baseItems;\n    eItems = prepareEditorItems(eItems, editorValues);\n    if (!editorValues) return eItems;\n    return eItems.filter(\n      (item) => !item.isHidden || !item.isHidden(editorValues, api.getState()),\n    );\n  }, [items, baseItems, editorValues, _, api, autoSave]);\n\n  const editorKeys = useMemo(\n    () => editorItems.map((i) => i.key),\n    [editorItems],\n  );\n\n  function handleLinksChange({ id, action, data }) {\n    setLinksActionsMap((prev) => ({\n      ...prev,\n      [id]: { action, data },\n    }));\n  }\n\n  const saveLinks = useCallback(() => {\n    for (let link in linksActionsMap) {\n      if (links.byId(link)) {\n        const { action, data } = linksActionsMap[link];\n        api.exec(action, data);\n      }\n    }\n  }, [api, linksActionsMap, links]);\n\n  const deleteTask = useCallback(() => {\n    const id = taskId?.id || taskId;\n    if (isSegment) {\n      if (activeTask?.segments) {\n        const segments = activeTask.segments.filter(\n          (s, index) => index !== segmentIndex,\n        );\n        api.exec('update-task', {\n          id,\n          task: { segments },\n        });\n      }\n    } else {\n      api.exec('delete-task', { id });\n    }\n  }, [api, taskId, isSegment, activeTask, segmentIndex]);\n\n  const hide = useCallback(() => {\n    api.exec('show-editor', { id: null });\n  }, [api]);\n\n  const handleAction = useCallback(\n    (ev) => {\n      const { item, changes } = ev;\n      if (item.id === 'delete') {\n        deleteTask();\n      }\n      if (item.id === 'save') {\n        if (!changes.length) saveLinks();\n        else hide();\n      }\n      if (item.comp) hide();\n    },\n    [api, taskId, autoSave, saveLinks, deleteTask, hide],\n  );\n\n  const normalizeTask = useCallback(\n    (t, key, input) => {\n      if (unscheduledTasks && t.type === 'summary') t.unscheduled = false;\n\n      prepareEditTask(t, api.getState(), key);\n      if (!input) setInProgress(false);\n      return t;\n    },\n    [unscheduledTasks, api],\n  );\n\n  const save = useCallback(\n    (values) => {\n      values = {\n        ...values,\n        unscheduled:\n          unscheduledTasks && values.unscheduled && values.type !== 'summary',\n      };\n      delete values.links;\n      delete values.data;\n\n      if (\n        editorKeys.indexOf('duration') === -1 ||\n        (values.segments && !values.duration)\n      )\n        delete values.duration;\n\n      const data = {\n        id: taskId?.id || taskId,\n        task: values,\n        ...(isSegment && { segmentIndex }),\n      };\n      if (autoSave && inProgress) data.inProgress = inProgress;\n\n      api.exec('update-task', data);\n\n      if (!autoSave) saveLinks();\n    },\n    [\n      api,\n      taskId,\n      unscheduledTasks,\n      autoSave,\n      saveLinks,\n      editorKeys,\n      isSegment,\n      segmentIndex,\n      inProgress,\n    ],\n  );\n\n  const handleChange = useCallback(\n    (ev) => {\n      let { update, key, input } = ev;\n\n      if (input) setInProgress(true);\n\n      ev.update = normalizeTask({ ...update }, key, input);\n\n      if (!autoSave) setEditorValues(ev.update);\n      else if (!editorErrors && !input) {\n        const item = editorItems.find((i) => i.key === key);\n        const v = update[key];\n        const isValid = !item.validation || item.validation(v);\n        if (isValid && (!item.required || v)) save(ev.update);\n      }\n    },\n    [autoSave, normalizeTask, editorErrors, editorItems, save],\n  );\n\n  const handleSave = useCallback(\n    (ev) => {\n      if (!autoSave) save(ev.values);\n    },\n    [autoSave, save],\n  );\n\n  const handleValidation = useCallback((check) => {\n    // get all errors after onchange action\n    setEditorErrors(check.errors);\n  }, []);\n\n  const defaultHotkeys = useMemo(\n    () =>\n      undo\n        ? {\n            'ctrl+z': (ev) => {\n              ev.preventDefault();\n              api.exec('undo');\n            },\n            'ctrl+y': (ev) => {\n              ev.preventDefault();\n              api.exec('redo');\n            },\n          }\n        : {},\n    [undo, api],\n  );\n\n  return task ? (\n    <Locale>\n      <WxEditor\n        css={`wx-XkvqDXuw wx-gantt-editor ${styleCss} ${css}`}\n        items={editorItems}\n        values={task}\n        topBar={normalizedTopBar}\n        bottomBar={bottomBar}\n        placement={placement}\n        layout={layout}\n        readonly={readonly}\n        autoSave={autoSave}\n        focus={focus}\n        onAction={handleAction}\n        onSave={handleSave}\n        onValidation={handleValidation}\n        onChange={handleChange}\n        hotkeys={hotkeys && { ...defaultHotkeys, ...hotkeys }}\n      />\n    </Locale>\n  ) : null;\n}\n\nexport default Editor;\n", "import { useState, useEffect } from 'react';\nimport { HeaderMenu as HeaderMenuInner } from '@svar-ui/react-grid';\n\nconst HeaderMenu = ({ children, columns = null, api }) => {\n  const [tableAPI, setTableAPI] = useState(null);\n  useEffect(() => {\n    if (!api) return;\n    api.getTable(true).then(setTableAPI);\n  }, [api]);\n\n  return (\n    <HeaderMenuInner api={tableAPI} columns={columns}>\n      {children}\n    </HeaderMenuInner>\n  );\n};\n\nexport default HeaderMenu;\n", "import { useState, useEffect, useRef } from 'react';\nimport './Tooltip.css';\n\nfunction Tooltip(props) {\n  const { api, content: Content, children } = props;\n\n  const areaRef = useRef(null);\n  const tooltipNodeRef = useRef(null);\n\n  const [areaCoords, setAreaCoords] = useState({});\n  const [tooltipData, setTooltipData] = useState(null);\n  const [pos, setPos] = useState({});\n\n  function findAttribute(node) {\n    while (node) {\n      if (node.getAttribute) {\n        const id = node.getAttribute('data-tooltip-id');\n        const at = node.getAttribute('data-tooltip-at');\n        const tooltip = node.getAttribute('data-tooltip');\n        if (id || tooltip) return { id, tooltip, target: node, at };\n      }\n      node = node.parentNode;\n    }\n\n    return { id: null, tooltip: null, target: null, at: null };\n  }\n\n  useEffect(() => {\n    const tooltipNode = tooltipNodeRef.current;\n    if (tooltipNode && pos && (pos.text || Content)) {\n      const tooltipCoords = tooltipNode.getBoundingClientRect();\n\n      let updated = false;\n      let newLeft = pos.left;\n      let newTop = pos.top;\n\n      if (tooltipCoords.right >= areaCoords.right) {\n        newLeft = areaCoords.width - tooltipCoords.width - 5;\n        updated = true;\n      }\n      if (tooltipCoords.bottom >= areaCoords.bottom) {\n        newTop = pos.top - (tooltipCoords.bottom - areaCoords.bottom + 2);\n        updated = true;\n      }\n\n      if (updated) {\n        setPos((prev) => {\n          if (!prev) return prev;\n          return { ...prev, left: newLeft, top: newTop };\n        });\n      }\n    }\n  }, [pos, areaCoords, Content]);\n\n  const timerRef = useRef(null);\n  const TIMEOUT = 300;\n  const debounce = (code) => {\n    clearTimeout(timerRef.current);\n    timerRef.current = setTimeout(() => {\n      code();\n    }, TIMEOUT);\n  };\n\n  function move(e) {\n    let { id, tooltip, target, at } = findAttribute(e.target);\n    setPos(null);\n    setTooltipData(null);\n\n    if (!tooltip) {\n      if (!id) {\n        clearTimeout(timerRef.current);\n        return;\n      } else {\n        tooltip = getTaskText(id);\n      }\n    }\n\n    const clientX = e.clientX;\n\n    debounce(() => {\n      if (id) {\n        setTooltipData(getTaskObj(prepareId(id)));\n      }\n\n      const targetCoords = target.getBoundingClientRect();\n      const areaEl = areaRef.current;\n      const areaRect = areaEl\n        ? areaEl.getBoundingClientRect()\n        : { top: 0, left: 0, right: 0, bottom: 0, width: 0, height: 0 };\n\n      let top, left;\n      if (at === 'left') {\n        top = targetCoords.top + 5 - areaRect.top;\n        left = targetCoords.right + 5 - areaRect.left;\n      } else {\n        top = targetCoords.top + targetCoords.height - areaRect.top;\n        left = clientX - areaRect.left;\n      }\n\n      setAreaCoords(areaRect);\n      setPos({ top, left, text: tooltip });\n    });\n  }\n\n  function getTaskObj(id) {\n    return api?.getTask(prepareId(id)) || null;\n  }\n\n  function getTaskText(id) {\n    return getTaskObj(id)?.text || '';\n  }\n\n  function prepareId(id) {\n    const numId = parseInt(id);\n    return isNaN(numId) ? id : numId;\n  }\n\n  return (\n    <div\n      className=\"wx-KG0Lwsqo wx-tooltip-area\"\n      ref={areaRef}\n      onMouseMove={move}\n    >\n      {pos && (pos.text || Content) ? (\n        <div\n          className=\"wx-KG0Lwsqo wx-gantt-tooltip\"\n          ref={tooltipNodeRef}\n          style={{ top: `${pos.top}px`, left: `${pos.left}px` }}\n        >\n          {Content ? (\n            <Content data={tooltipData} />\n          ) : pos.text ? (\n            <div className=\"wx-KG0Lwsqo wx-gantt-tooltip-text\">{pos.text}</div>\n          ) : null}\n        </div>\n      ) : null}\n\n      {children}\n    </div>\n  );\n}\n\nexport default Tooltip;\n", "import { Material as CoreMaterial } from '@svar-ui/react-core';\nimport './Material.css';\n\nfunction Material({ fonts = true, children }) {\n  if (children) {\n    return <CoreMaterial fonts={fonts}>{children()}</CoreMaterial>;\n  } else {\n    return <CoreMaterial fonts={fonts} />;\n  }\n}\n\nexport default Material;\n", "import { Willow as CoreWillow } from '@svar-ui/react-core';\nimport './Willow.css';\n\nfunction Willow({ fonts = true, children }) {\n  return children ? (\n    <CoreWillow fonts={fonts}>{children}</CoreWillow>\n  ) : (\n    <CoreWillow fonts={fonts} />\n  );\n}\n\nexport default Willow;\n", "import { WillowDark as WillowDarkCore } from '@svar-ui/react-core';\nimport './WillowDark.css';\n\nexport default function WillowDark({ fonts = true, children }) {\n  if (children) {\n    return <WillowDarkCore fonts={fonts}>{children}</WillowDarkCore>;\n  } else {\n    return <WillowDarkCore fonts={fonts} />;\n  }\n}\n", "import Gantt from './components/Gantt.jsx';\nimport Toolbar from './components/Toolbar.jsx';\nimport ContextMenu from './components/ContextMenu.jsx';\nimport Editor from './components/Editor.jsx';\nimport HeaderMenu from './components/grid/HeaderMenu.jsx';\n\nimport Tooltip from './widgets/Tooltip.jsx';\n\nimport Material from './themes/Material.jsx';\nimport Willow from './themes/Willow.jsx';\nimport WillowDark from './themes/WillowDark.jsx';\n\nimport pkg from '../package.json' with { type: 'json' };\n\nexport {\n  defaultEditorItems,\n  defaultToolbarButtons,\n  defaultMenuOptions,\n  defaultColumns,\n  defaultTaskTypes,\n  getEditorItems,\n  getToolbarButtons,\n  getMenuOptions,\n  registerScaleUnit,\n} from '@svar-ui/gantt-store';\n\nexport { registerEditorItem } from '@svar-ui/react-editor';\n\nexport const version = pkg.version;\n\nexport {\n  Gantt,\n  ContextMenu,\n  HeaderMenu,\n  Toolbar,\n  Tooltip,\n  Editor,\n  Material,\n  Willow,\n  WillowDark,\n};\n"],
  "mappings": "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",
  "names": ["id", "t", "node", "id", "v", "p", "pos", "at", "z", "hotkeys", "a", "locale", "b", "data", "writable", "v", "x", "k", "v", "_", "c", "l", "v", "delegateEvent", "node", "id", "parseId", "delegateClick", "theme", "createContext", "helpers", "i18n", "fieldId", "useInputId", "id", "register", "useContext", "inputId", "useState", "uid", "TextArea", "propValue", "placeholder", "title", "disabled", "error", "readonly", "onChange", "value", "setValue", "useWritableProp", "handleInput", "useCallback", "e", "newValue", "ontextchange", "inputRef", "useRef", "useEffect", "handler", "node", "jsx", "Button", "type", "css", "icon", "text", "children", "onClick", "buttonCss", "useMemo", "cssType", "a", "x", "handleClick", "ev", "jsxs", "Checkbox", "label", "inputValue", "valueProp", "target", "Dropdown", "position", "align", "autoFit", "onCancel", "width", "children", "nodeRef", "useRef", "positionState", "setPosition", "useWritableProp", "alignState", "setAlign", "useEffect", "node", "nodeCoords", "bodyCoords", "env", "down", "e", "clickOutside", "jsx", "defaultLocale", "locale", "en", "getListHandlers", "navIndex", "isVisible", "list", "options", "navCallback", "selectCallback", "init", "l", "o", "n", "c", "setNav", "index", "scrollTo", "ev", "next", "navigate", "dir", "id", "locateID", "a", "position", "SuggestDropdown", "items", "children", "onSelect", "onReady", "useRef", "helpers", "setNavIndex", "useState", "navIndexRef", "_", "useContext", "i18n", "defaultLocale", "selectItem", "useEffect", "i", "onCancel", "useCallback", "jsx", "Dropdown", "data", "snippet", "Combo", "valueProp", "textOptions", "textField", "placeholder", "title", "disabled", "error", "clear", "kids", "onChange", "inputId", "useInputId", "keydown", "value", "setValue", "useWritableProp", "filterActive", "setFilterActive", "textInput", "setTextInput", "inputElement", "hasFocus", "text", "useMemo", "option", "filteredOptions", "ready", "doSelect", "effects", "selected", "newValue", "selectByEvent", "doUnselect", "selectByText", "chunk", "res", "handleInput", "handleFocus", "handleBlur", "jsxs", "List", "Fragment", "Text", "propsValue", "readonly", "focus", "select", "type", "inputStyle", "css", "icon", "inputRef", "cssString", "hasLeftIcon", "timer", "oninput", "e", "ontextchange", "clearValue", "inputType", "handler", "node", "Header", "date", "part", "onShift", "calendar", "formats", "year", "label", "dateToString", "start", "end", "getDuodecade", "yearFormat", "changeType", "Button", "onClick", "Month", "current", "markers", "locale", "weekStart", "weekdays", "dv", "d", "dm", "dd", "ranges", "isWeekEnd", "getStart", "getEnd", "lastTime", "selectDate", "days", "curMonth", "day", "s", "mark", "delegateRef", "delegateHandler", "delegateClick", "$", "Year", "currentProp", "setCurrent", "months", "monthNum", "selectMonth", "month", "newCurrent", "done", "getPartValue", "handleMonthClick", "target", "cssScope", "Duodecade", "currentState", "valueState", "years", "y", "selectYears", "selectYear", "yearVal", "containerRef", "configs", "nextMonth", "prevMonth", "nextYear", "prevYear", "nextDuodecade", "prevDuodecade", "defaultButtons", "getButtonValue", "btn", "Panel", "onCurrentChange", "buttons", "setType", "buttonsList", "oncancel", "onShiftLocal", "diff", "obj", "onChangeLocal", "CalendarView", "button", "Component", "props", "words", "optional", "v", "t", "en", "fixCurrent", "force", "Calendar", "x", "onCurrentChangeLocal", "Locale", "DatePicker", "propValue", "width", "align", "format", "editable", "calendarLocale", "f", "dateFormat", "popup", "setPopup", "doChange", "skipEvent", "formattedValue", "onchangeHandler", "input", "handleScroll", "RichSelect", "propertyValue", "options", "textOptions", "placeholder", "disabled", "error", "title", "textField", "clear", "kids", "onChange", "navigate", "useRef", "keydown", "value", "setValue", "useWritableProp", "ready", "ev", "selected", "useMemo", "a", "select", "useCallback", "id", "unselect", "index", "jsxs", "jsx", "List", "option", "Slider", "id", "label", "css", "min", "max", "initialValue", "step", "title", "disabled", "onChange", "inputId", "useInputId", "value", "setValue", "useWritableProp", "previous", "useRef", "progress", "useMemo", "bgStyle", "oninput", "target", "newValue", "onslider", "useEffect", "inputRef", "$", "jsx", "Counter", "id", "initialValue", "step", "min", "max", "error", "disabled", "readonly", "onChange", "inputId", "useInputId", "value", "setValue", "useWritableProp", "dec", "useCallback", "newValue", "inc", "blur", "tValue", "input", "e", "jsxs", "jsx", "Notice", "notice", "onRemove", "Notices", "data", "Modal", "title", "buttons", "header", "children", "footer", "onConfirm", "onCancel", "_", "useContext", "i18n", "defaultLocale", "modal", "useRef", "useEffect", "keydown", "ev", "from", "onclick", "button", "pack", "Button", "Globals", "apiRef", "setModal", "useState", "notices", "setNotices", "useImperativeHandle", "msg", "modalObj", "res", "rej", "v", "uid", "prev", "a", "Fragment", "GlobalsComponentWithRef", "forwardRef", "Field", "label", "position", "css", "error", "type", "required", "children", "firstInputId", "useRef", "registerInput", "useCallback", "id", "uid", "jsx", "fieldId", "jsxs", "l", "TwoState", "initialValue", "icon", "disabled", "iconActive", "onClick", "title", "text", "textActive", "active", "onChange", "value", "setValue", "useWritableProp", "typeStr", "useMemo", "handleClick", "ev", "next", "Button", "snippet", "defValue", "TimePicker", "propertyValue", "format", "calendarLocale", "formats", "useContext", "i18n", "defaultLocale", "h12", "maxH", "maxM", "timeFormat", "f", "dateToString", "zeroBased", "formatTime", "v", "formatM", "getNumber", "formatH", "update", "max", "popup", "setPopup", "useState", "safeValue", "h", "m", "pm", "hText", "mText", "textValue", "click", "togglePM", "setHours", "setMinutes", "updateH", "oncancel", "Text", "Dropdown", "val", "Slider", "ModalArea", "SideArea", "onCancel", "divRef", "useEffect", "clickOutside", "Portal", "initialTheme", "target", "portalRef", "componentRef", "targetRef", "setTargetRef", "contextTheme", "themeContext", "getParentRoot", "env", "Fragment", "createPortal", "p", "root", "render", "props", "fonts", "theme", "RobotoFont", "FontOpenSans", "setEnv", "env", "en_default", "uid", "v", "nt", "t", "a", "Se", "It", "G", "o", "c", "d", "Me", "Ie", "Ce", "_a", "Et", "J", "Ne", "_e", "rt", "ze", "Ae", "zt", "Fe", "t", "a", "J", "je", "Le", "Xe", "Qe", "Ge", "o", "Re", "Je", "Ut", "Ke", "Ze", "_a", "_e", "dt", "ut", "t", "t", "a", "o", "c", "d", "t", "a", "Vt", "rt", "zt", "J", "z", "lt", "Je", "Re", "Xe", "Qe", "Kt", "dt", "Z", "Ae", "Ne", "ze", "tt", "_a", "o", "ee", "c", "$", "d", "Zt", "Ut", "Ze", "Ke", "te", "Fe", "ht", "ft", "mt", "l", "y", "p", "k", "_", "v", "S", "M", "B", "et", "ae", "se", "re", "pt", "ie", "ce", "wt", "ue", "t", "nt", "a", "_a", "Q", "o", "c", "d", "l", "y", "p", "k", "fe", "tt", "ge", "H", "ye", "ke", "ce", "M", "_", "v", "S", "pt", "re", "ht", "z", "B", "Dt", "$", "be", "xt", "we", "xe", "_t", "_e", "F", "U", "o", "t", "I", "D", "K", "a", "l", "c", "d", "B", "H", "X", "q", "P", "o", "b", "_a", "t", "G", "a", "z", "l", "c", "d", "J", "A", "p", "x", "y", "L", "ee", "Q", "te", "oe", "ie", "se", "re", "ae", "ne", "le", "ce", "de", "he", "N", "ue", "fe", "ge", "pe", "I", "O", "$", "me", "xe", "t", "o", "ye", "a", "C", "_e", "Se", "R", "l", "c", "d", "j", "p", "x", "y", "_", "be", "b", "ve", "ke", "Ce", "Re", "K", "B", "X", "_a", "E", "G", "P", "Q", "J", "ce", "pe", "Ee", "Ie", "Te", "De", "He", "V", "Me", "Pe", "ze", "en_default", "mapData", "data", "cb", "a", "out", "filterMenu", "sub", "uid", "prepareMenuData", "opt", "handlers", "getItemHandler", "type", "registerMenuItem", "handler", "MenuOption", "onClick", "onShow", "option", "element", "useRef", "onHover", "useCallback", "SubComponent", "useMemo", "jsxs", "o", "jsx", "Menu", "options", "left", "top", "at", "parent", "mount", "context", "css", "x", "setX", "useState", "y", "setY", "z", "setZ", "width", "setWidth", "selfRef", "showSub", "setShowSub", "activeOption", "setActiveOption", "updatePosition", "result", "calculatePosition", "useEffect", "onLeave", "cancel", "id", "el", "finalOptions", "clickOutside", "Fragment", "ev", "pack", "ActionMenu", "forwardRef", "props", "ref", "resolver", "dataKey", "filter", "children", "item", "setItem", "setParent", "setLeft", "setTop", "filteredOptions", "v", "handleClick", "getDataAttr", "node", "name", "show", "obj", "target", "nextItem", "useImperativeHandle", "Portal", "DropDownMenu", "forwardRef", "props", "ref", "options", "at", "css", "children", "onClick", "parent", "setParent", "useState", "handleClick", "ev", "show", "useCallback", "useImperativeHandle", "showAt", "target", "parentKeyRef", "useRef", "lastParentRef", "useEffect", "jsxs", "Fragment", "jsx", "Portal", "Menu", "ContextMenu", "resolver", "dataKey", "filter", "menu", "obj", "ActionMenu", "handlers", "getItemHandler", "type", "registerToolbarItem", "handler", "Separator", "menu", "jsx", "Spacer", "omitKey", "_a", "rest", "key", "text", "BarComponent", "props", "item", "values", "onClick", "onChange", "itemComponent", "useMemo", "handleClick", "useCallback", "value", "detectChange", "t", "ReactComponent", "className", "Group", "collapsedState", "setCollapsedState", "useState", "oncancel", "show", "ev", "rootClassName", "jsxs", "Fragment", "Dropdown", "sub", "index", "Menu", "items", "css", "width", "popup", "setPopup", "div", "useRef", "onCancel", "showMenu", "menuClick", "Button", "normalize", "list", "uid", "Toolbar", "itemsProp", "menuCss", "valuesProp", "overflow", "setItems", "useWritableProp", "setValues", "visibleItems", "divRef", "lastToolbarStateRef", "menuItems", "setMenuItems", "itemsRef", "useEffect", "overflowRef", "menuItemsRef", "scheduleOverflowCheckRef", "handleChange", "getTotalWidth", "nodes", "it", "sum", "i", "collapseGroups", "expandGroups", "freeSpace", "processOverflow", "ov", "visibleWidth", "newMenuItems", "j", "freeWidth", "ro", "icon", "disabled", "CoreButton", "Label", "children", "c", "Icon", "Item", "id", "b", "store", "createContext", "onresize", "node", "handler", "ro", "data", "SHIFT", "LONG_TOUCH_DELAY", "getID", "id", "getOffset", "box", "body", "top", "left", "getPos", "ev", "offset", "reorder", "config", "cfg", "context", "touchTimer", "startPos", "started", "touched", "container", "resetTimer", "down", "source", "locate", "move", "p", "start", "end", "scrollLeft", "scrollTop", "up", "handleMouseDown", "preventUserSelect", "handleMouseMove", "handleMouseUp", "handleTouchStart", "handleTouchEnd", "handleTouchMove", "handleContext", "preventDefault", "hasDraggable", "full", "SCROLL_SPEED_DELTA", "initScrollState", "tryAutoScroll", "dragScrollConfig", "bottom", "sense", "xScroll", "yScroll", "rPos", "newDirX", "newDirY", "resetAutoScroll", "startAutoScroll", "dir", "autoScroll", "x", "y", "autoXScroll", "autoYScroll", "scroll", "autoScrollTo", "value", "mode", "getStyle", "width", "flexgrow", "fixed", "right", "height", "style", "getCssName", "column", "cell", "columnStyle", "css", "pos", "Cell", "props", "row", "cellStyle", "children", "focusable", "setFocusable", "useWritableProp", "api", "useContext", "storeContext", "focusCell", "useStore", "search", "shouldHighlight", "useMemo", "buildCellCss", "columnStyleFn", "cellStyleFn", "isDraggable", "cellElRef", "useRef", "useEffect", "toggleFocusAction", "useCallback", "highlightText", "text", "regex", "className", "shadowToggle", "fixedRightToggle", "CellComponent", "jsxs", "jsx", "Fragment", "action", "getRenderValue", "highlight", "index", "resize", "dx", "Component", "filter", "filterValue", "filterRows", "Text", "Richselect", "options", "getOptions", "template", "d", "getValue", "opt", "handleKeyDown", "RichSelect", "option", "filters", "Filter", "filterValues", "HeaderCell", "lastRow", "sortRow", "bodyHeight", "hasSplit", "sortMarksValue", "sortMark", "startRef", "resizeColumn", "inProgress", "sort", "order", "collapse", "toggleCollapseColumn", "toggleSortColumn", "isCollapsed", "overlay", "collapsedTextStyle", "getCell", "key", "collapsedClassName", "normalClassName", "gripRef", "cleanup", "c", "FooterCell", "React", "HeaderFooter", "deltaLeft", "contentWidth", "columns", "type", "sizes", "split", "rowHeights", "renderedHeader", "res", "rowsCount", "ri", "inSpan", "col", "ci", "isCommunity", "getColumn", "isLast", "ind", "idx", "isSort", "i", "Overlay", "isComponent", "prop", "t", "actions", "editor", "setValue", "useState", "updateValue", "closeAndSave", "Combo", "onAction", "setText", "filterOptions", "setFilterOptions", "a", "navigate", "keydown", "ready", "handleChange", "e", "nextText", "inputRef", "SuggestDropdown", "Datepicker", "nodeRef", "Dropdown", "Calendar", "setKeydown", "editors", "Editor", "closeEditor", "ignore", "save", "ignoreFocus", "cancel", "keyHandler", "computedStyle", "ed", "rootRef", "destroy", "clickOutside", "role", "ariaReadonly", "_columns", "getColumnCss", "CellComp", "styleObject", "getPrintCellStyle", "getPrintFilterValue", "Grid", "rowStyle", "header", "footer", "headerColumns", "getHeaderFooterPrintColumns", "footerColumns", "isDraggableIcon", "rowIndex", "Print", "restProps", "skin", "grids", "getPrintColumns", "target", "cloned", "rule", "cols", "Layout", "multiselect", "onReorder", "autoRowHeight", "clientWidth", "clientHeight", "responsiveLevel", "hotkeysConfig", "dynamic", "selectedRows", "selectionChanged", "useStoreWithCounter", "selectState", "editorState", "tree", "printConfig", "undoState", "rowHeightFromData", "SCROLLSIZE", "setSCROLLSIZE", "getScrollSize", "setScrollLeft", "setScrollTop", "hasAny", "defaultRowHeight", "tableNodeRef", "dragItem", "setDragItem", "dragNode", "setDragNode", "leftColumns", "rightColumns", "centerColumns", "center", "fullWidth", "acc", "EXTRACOLUMNS", "getHeaderPosition", "delta", "spanStartInd", "h", "renderColumns", "dataCols", "headerCols", "footerCols", "sum", "rightSpanDelta", "hCell", "colspan", "diff", "headerPos", "footerPos", "dh", "csH", "df", "csF", "headerHeight", "footerHeight", "hasHScroll", "visibleRowsHeight", "visibleRows", "rowHeightsRef", "renderedHeight", "setRenderedHeight", "renderEnd", "setRenderEnd", "renderRows", "deltaTop", "EXTRAROWS", "st", "startInd", "topHeight", "visibleRowsCount", "currentHeight", "totalCount", "fullHeight", "count", "totalHeight", "hasVScroll", "globalWidth", "lastCallRef", "dataRows", "visibleSelection", "s", "r", "renderStart", "onScroll", "lockSelection", "checkDraggable", "postDragRef", "movementYRef", "bodyClickHandlers", "rowId", "locateAttr", "toggle", "range", "startDrag", "sourceNode", "from", "itemNode", "element", "offsetX", "vScrollSize", "itemPos", "moveDrag", "min", "max", "targetRow", "to", "toId", "rowHeight", "targetRect", "dragNodePos", "targetNodePos", "initialMode", "endDrag", "div", "styleWidth", "dataElRef", "adjustHeight", "rh", "re", "focus", "setFocus", "cind", "Ie", "scrollRef", "dragState", "drag", "hotkeys", "defaultHotkeys", "v", "scrollConfig", "scrollTo", "bodyRef", "result", "delegateClick", "gridClassName", "rIndex", "isSelected", "isInactive", "rowClass", "rowStyleProp", "camelize", "part", "forwardRef", "_a", "ref", "select", "autoConfig", "init", "responsive", "sortMarks", "undo", "restPropsRef", "dataStore", "DataStore", "writable", "firstInRoute", "lastInRouteRef", "EventBusRouter", "b", "name", "setClientWidth", "setClientHeight", "setResponsiveLevel", "responsiveConfig", "setResponsiveConfig", "finalColumns", "test", "autoCols", "finalSizes", "rect", "newLevel", "level", "_skin", "initOnceRef", "prev", "useImperativeHandle", "StoreContext", "Locale", "en", "HeaderMenuItem", "item", "HeaderMenu", "registerMenuItem", "getLabel", "headerMenuClick", "open", "rColumns", "useStoreLater", "headerMenuOptions", "ContextMenu", "setEnv", "env", "handlers", "getItemHandler", "type", "registerEditorItem", "handler", "en", "FormEditor", "props", "editors", "data", "css", "errors", "focus", "onClick", "children", "onChange", "root", "useRef", "useEffect", "focused", "input", "i18n", "useContext", "context", "_", "useMemo", "overlay", "editor", "R", "key", "onChangeEditor", "otherProps", "Component", "jsx", "Component2", "Field", "ev", "rawGetter", "parts", "obj", "out", "p", "rawSetter", "v", "i", "itemsToEditors", "sections", "config", "s", "uid", "getValues", "raw", "ed", "setValues", "values", "changes", "a", "diff", "initial", "b", "isSame", "validateValues", "any", "x", "Values", "valuesProp", "items", "activeBatch", "autoSave", "readonly", "topBar", "bottomBar", "layout", "placement", "View", "onSave", "onAction", "onValidation", "hotkeys", "useWritableProp", "activatedSection", "setActivatedSection", "useState", "editorsObj", "y", "exclusive", "j", "actualValues", "setActualValues", "setData", "d", "deepCopy", "runValidation", "notSaved", "setNotSaved", "getUniqueFields", "arr", "check", "handleUpdate", "updateData", "updated", "handleChanges", "value", "newData", "event", "newActualValues", "fieldsToValidate", "errorsFields", "saveAction", "handleAction", "item", "Columns", "props", "editors", "data", "layout", "errors", "focus", "onClick", "onChange", "columns", "useMemo", "cols", "field", "index", "obj", "jsxs", "jsx", "Editor", "Toolbar", "items", "values", "top", "onChangeForm", "useCallback", "item", "value", "WxToolbar", "Spacer", "CancelButton", "_", "SaveButton", "CloseIcon", "Panel", "css", "topBar", "bottomBar", "placement", "readonly", "autoSave", "children", "onKeyDown", "hotkeys", "i18n", "useContext", "context", "autoBars", "tbar", "bar", "b", "bbar", "buttons", "rootRef", "useRef", "getHotkeyRef", "event", "args", "bi", "target", "hotkeysConfig", "ev", "useHotkeys", "Layout", "restProps", "handleClose", "a", "ModalArea", "SideArea", "activeBatch", "normalizedRestProps", "acc", "key", "newKey", "Locale", "en", "Values", "ReadOnly", "value", "options", "label", "_", "useContext", "context", "text", "useMemo", "t", "option", "o", "jsx", "Field", "Section", "fieldKey", "activeSection", "onClick", "jsxs", "registerEditorItem", "Text", "TextArea", "Checkbox", "setEnv", "env", "store", "createContext", "getID", "node", "id", "numId", "getOffset", "relative", "ev", "box", "base", "checkSource", "SHIFT", "reorder", "config", "source", "clone", "sid", "x", "y", "detail", "touched", "touchTimer", "down", "event", "handleTouchstart", "locate", "handleTouchmove", "handleContext", "handleTouchend", "handleMousedown", "handleMousemove", "handleMouseup", "end", "full", "move", "dx", "dy", "top", "task", "up", "targetNode", "target", "tid", "line", "after", "before", "TextCell", "row", "column", "getStyle", "col", "CellComponent", "jsxs", "jsx", "ActionCell", "cell", "action", "useMemo", "Grid", "props", "readonly", "compactMode", "width", "display", "columnWidthProp", "onTableAPIChange", "columnWidth", "setColumnWidthProp", "useWritableProp", "tableAPI", "setTableAPI", "useState", "i18n", "useContext", "context", "_", "api", "storeContext", "scrollTopVal", "useStore", "cellHeightVal", "scrollTask", "selectedVal", "areaVal", "rTasksVal", "scalesVal", "columnsVal", "sortVal", "calendarVal", "durationUnitVal", "splitTasksVal", "dragTask", "setDragTask", "tasks", "execAction", "useCallback", "a", "onClick", "e", "locateID", "tableRef", "useRef", "tableContainerRef", "gridWidth", "setGridWidth", "updateFlex", "setUpdateFlex", "useEffect", "update", "ro", "lastDetailRef", "reorderTasks", "inProgress", "mode", "F", "scrollDelta", "headerHeight", "scrollX", "tableStyle", "style", "allTasks", "t", "cols", "header", "text", "ti", "c", "ai", "actionCol", "basis", "sortMarks", "marks", "key", "order", "index", "checkFlex", "hasFlexCol", "fitColumns", "filteredColumns", "containerWidth", "baseColumnWidth", "forceReset", "actualWidth", "acc", "k", "setColumnWidth", "resized", "newColumnWidth", "adjustColumns", "onDblClick", "locateAttr", "sel", "o", "setScrollOffset", "body", "tableEl", "bodyEl", "focusCell", "startReorder", "endReorder", "moveReorder", "handleHotkey", "isInput", "handlersStateRef", "setHandlersState", "init", "tapi", "add", "keySort", "s", "value", "v", "prepareEditTask", "WxGrid", "CellGrid", "borders", "cellWidth", "cellHeight", "nodeRef", "color", "setColor", "border", "grid", "Links", "onSelectLink", "selectedLink", "links", "criticalPath", "selectedLineRef", "onClickOutside", "css", "handler", "link", "className", "BarSegments", "type", "segmentStyle", "i", "getSegProgress", "segmentIndex", "progress", "segments", "duration", "result", "seg", "d", "Bars", "TaskTemplate", "rTasksValue", "rTasksCounter", "useStoreWithCounter", "rLinksValue", "rLinksCounter", "areaValue", "scalesValue", "taskTypesValue", "baselinesValue", "selectedValue", "scrollTaskStore", "tree", "schedule", "splitTasks", "summary", "start", "lengthUnitWidth", "ignoreNextClickRef", "linkFrom", "setLinkFrom", "taskMove", "setTaskMove", "progressFromRef", "selectedLinkId", "setSelectedLinkId", "setTouched", "touchTimerRef", "totalWidth", "setTotalWidth", "containerRef", "hasFocus", "el", "focused", "entries", "startDrag", "endDrag", "getMoveMode", "segmentNode", "left", "p", "delta", "point", "clientX", "newTaskMove", "segNode", "extendDragOptions", "mousedown", "touchstart", "marker", "l", "w", "segment", "diff", "minWidth", "isSegmentMoveAllowed", "nextTaskMove", "taskNode", "barNode", "mousemove", "touchmove", "mouseup", "touchend", "types", "getLinkType", "fromStart", "toStart", "alreadyLinked", "removeLinkMarker", "taskStyle", "baselineStyle", "contextmenu", "taskTypeIds", "taskTypeCss", "forward", "isTaskCritical", "taskId", "isLinkMarkerVisible", "summaryIds", "linkFromSummaryIds", "barClass", "leftLinkClass", "rightLinkClass", "Fragment", "Button", "TimeScale", "highlightTime", "scales", "rowIdx", "cellIdx", "extraClass", "renderMetrics", "useRenderTime", "label", "startTime", "renderCount", "rafRef", "enabled", "metric", "Chart", "fullWidth", "fullHeight", "taskTemplate", "cellBorders", "selected", "selectedCounter", "rScrollTop", "markers", "rScrollTask", "zoom", "chartHeight", "setChartHeight", "chartRef", "extraRows", "selectStyle", "obj", "chartGridHeight", "onScroll", "setScroll", "scroll", "pos", "dataRequest", "num", "from", "showTask", "clientWidth", "onWheel", "dir", "offset", "getHoliday", "holidays", "cleanupRef", "hotkeys", "TimeScales", "holiday", "Resizer", "position", "size", "onMove", "onDisplayChange", "leftThreshold", "rightThreshold", "setValue", "setDisplay", "getBox", "val", "name", "active", "setActive", "initialPosition", "setInitialPosition", "startRef", "posRef", "timeoutRef", "displayRef", "getEventPos", "newPos", "nextDisplay", "cursor", "resetToInitial", "handleExpand", "direction", "newDisplay", "handleExpandLeft", "handleExpandRight", "b", "rootClassName", "COMPACT_WIDTH", "modeObserver", "callback", "observer", "observe", "disconnect", "Layout", "rTasks", "rScales", "rCellHeight", "rColumns", "undo", "setCompactMode", "ganttWidth", "setGanttWidth", "ganttHeight", "setGanttHeight", "innerWidth", "setInnerWidth", "lastDisplay", "handleResize", "prev", "gridColumnWidth", "scrollSize", "scrollHeight", "expandScale", "ganttDivRef", "pseudoRowsRef", "latest", "scrollToTask", "sc", "ch", "ss", "gh", "tt", "height", "scrollY", "now", "ganttDiv", "pseudoRows", "flushSync", "layoutRef", "we", "getUnitFormats", "normalizeFormatter", "calendarLocale", "dateToString", "prepareScales", "_a", "format", "scale", "prepareFormats", "formats", "unit", "prepareColumns", "columns", "prepareZoom", "level", "camelize", "part", "defaultScales", "Gantt", "forwardRef", "ref", "taskTypes", "defaultTaskTypes", "activeTask", "defaultColumns", "lengthUnit", "durationUnit", "scaleHeight", "baselines", "highlightTimeProp", "autoScale", "unscheduledTasks", "projectStart", "projectEnd", "calendar", "_export", "restProps", "restPropsRef", "dataStore", "DataStore", "writable", "words", "coreEn", "en", "i18nCtx", "locale", "lCalendar", "normalizedConfig", "normalizeLinks", "normalizeZoom", "parsedTasksRef", "parseTaskDates", "firstInRoute", "lastInRouteRef", "EventBusRouter", "tableAPIRef", "waitRender", "res", "useImperativeHandle", "initOnceRef", "day", "StoreContext", "Toolbar", "items", "i18nLocal", "_selected", "useStoreLater", "history", "historyActions", "finalItems", "fullButtons", "getToolbarButtons", "item", "isHandledAction", "it", "handleAction", "buttons", "finalButtons", "button", "nextButton", "WxToolbar", "ContextMenu", "optionsInit", "resolver", "filter", "at", "children", "menuRef", "activeIdRef", "taskTypesVal", "selectedTasksVal", "summaryVal", "fullOptions", "getMenuOptions", "applyLocaleFn", "opts", "op", "getOptions", "finalOptions", "cOptions", "selectedTasks", "itemResolver", "menuAction", "filterMenu", "disabled", "onContextMenu", "content", "WxContextMenu", "Provider", "autoSave", "onLinksChange", "_activeTask", "linksData", "setLinksData", "getLinksData", "inLinks", "outLinks", "list", "deleteLink", "group", "handleChange", "idx", "Field", "Text", "Combo", "option", "DateTimePicker", "time", "onchange", "onChange", "onChangeHandler", "handleDateChange", "current", "DatePicker", "TimePicker", "registerEditorItem", "RichSelect", "TwoState", "Slider", "Counter", "Editor", "layout", "placement", "bottomBar", "topBar", "focus", "lFromCtx", "i18nData", "dateFormat", "f", "normalizedTopBar", "styleCss", "isSegment", "baseItems", "getEditorItems", "linksActionsMap", "setLinksActionsMap", "setInProgress", "editorValues", "setEditorValues", "editorErrors", "setEditorErrors", "data", "values", "comp", "prepareEditorItems", "localItems", "taskData", "handleLinksChange", "options", "editorItems", "eItems", "editorKeys", "saveLinks", "deleteTask", "hide", "changes", "normalizeTask", "input", "save", "handleSave", "handleValidation", "check", "defaultHotkeys", "Locale", "WxEditor", "HeaderMenu", "HeaderMenuInner", "Tooltip", "Content", "areaRef", "tooltipNodeRef", "areaCoords", "setAreaCoords", "tooltipData", "setTooltipData", "setPos", "findAttribute", "tooltip", "tooltipNode", "tooltipCoords", "updated", "newLeft", "newTop", "timerRef", "TIMEOUT", "debounce", "code", "getTaskText", "getTaskObj", "prepareId", "targetCoords", "areaEl", "areaRect", "Material", "fonts", "CoreMaterial", "Willow", "CoreWillow", "WillowDark", "WillowDarkCore", "version", "pkg"]
}
