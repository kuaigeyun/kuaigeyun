{
  "version": 3,
  "sources": ["../../is-any-array/src/index.ts", "../../ml-array-max/lib-es6/index.js", "../../ml-array-min/lib-es6/index.js", "../../ml-array-rescale/lib-es6/index.js", "../../ml-matrix/matrix.js", "../../lodash/clone.js", "../../lodash/_baseFilter.js", "../../lodash/filter.js", "../../lodash/_baseHas.js", "../../lodash/has.js", "../../lodash/isEmpty.js", "../../lodash/isUndefined.js", "../../lodash/_arrayReduce.js", "../../lodash/_baseReduce.js", "../../lodash/reduce.js", "../../lodash/_asciiSize.js", "../../lodash/_hasUnicode.js", "../../lodash/_unicodeSize.js", "../../lodash/_stringSize.js", "../../lodash/size.js", "../../lodash/transform.js", "../../lodash/_isFlattenable.js", "../../lodash/_baseFlatten.js", "../../lodash/_baseFindIndex.js", "../../lodash/_baseIsNaN.js", "../../lodash/_strictIndexOf.js", "../../lodash/_baseIndexOf.js", "../../lodash/_arrayIncludes.js", "../../lodash/_arrayIncludesWith.js", "../../lodash/noop.js", "../../lodash/_createSet.js", "../../lodash/_baseUniq.js", "../../lodash/union.js", "../../lodash/_baseValues.js", "../../lodash/values.js", "../../graphlib/lib/lodash.js", "../../graphlib/lib/graph.js", "../../graphlib/lib/version.js", "../../graphlib/lib/index.js", "../../graphlib/lib/json.js", "../../graphlib/lib/alg/components.js", "../../graphlib/lib/data/priority-queue.js", "../../graphlib/lib/alg/dijkstra.js", "../../graphlib/lib/alg/dijkstra-all.js", "../../graphlib/lib/alg/tarjan.js", "../../graphlib/lib/alg/find-cycles.js", "../../graphlib/lib/alg/floyd-warshall.js", "../../graphlib/lib/alg/topsort.js", "../../graphlib/lib/alg/is-acyclic.js", "../../graphlib/lib/alg/dfs.js", "../../graphlib/lib/alg/postorder.js", "../../graphlib/lib/alg/preorder.js", "../../graphlib/lib/alg/prim.js", "../../graphlib/lib/alg/index.js", "../../graphlib/index.js", "../../dagre/lib/graphlib.js", "../../lodash/defaults.js", "../../lodash/_createFind.js", "../../lodash/toFinite.js", "../../lodash/toInteger.js", "../../lodash/findIndex.js", "../../lodash/find.js", "../../lodash/flatten.js", "../../lodash/forIn.js", "../../lodash/last.js", "../../lodash/mapValues.js", "../../lodash/_baseExtremum.js", "../../lodash/_baseGt.js", "../../lodash/max.js", "../../lodash/_baseLt.js", "../../lodash/min.js", "../../lodash/minBy.js", "../../lodash/_baseSet.js", "../../lodash/_basePickBy.js", "../../lodash/_basePick.js", "../../lodash/_flatRest.js", "../../lodash/pick.js", "../../lodash/_baseRange.js", "../../lodash/_createRange.js", "../../lodash/range.js", "../../lodash/_baseSortBy.js", "../../lodash/_compareAscending.js", "../../lodash/_compareMultiple.js", "../../lodash/_baseOrderBy.js", "../../lodash/sortBy.js", "../../lodash/uniqueId.js", "../../lodash/_baseZipObject.js", "../../lodash/zipObject.js", "../../dagre/lib/lodash.js", "../../dagre/lib/data/list.js", "../../dagre/lib/greedy-fas.js", "../../dagre/lib/acyclic.js", "../../dagre/lib/util.js", "../../dagre/lib/normalize.js", "../../dagre/lib/rank/util.js", "../../dagre/lib/rank/feasible-tree.js", "../../dagre/lib/rank/network-simplex.js", "../../dagre/lib/rank/index.js", "../../dagre/lib/parent-dummy-chains.js", "../../dagre/lib/nesting-graph.js", "../../dagre/lib/add-border-segments.js", "../../dagre/lib/coordinate-system.js", "../../dagre/lib/order/init-order.js", "../../dagre/lib/order/cross-count.js", "../../dagre/lib/order/barycenter.js", "../../dagre/lib/order/resolve-conflicts.js", "../../dagre/lib/order/sort.js", "../../dagre/lib/order/sort-subgraph.js", "../../dagre/lib/order/build-layer-graph.js", "../../dagre/lib/order/add-subgraph-constraints.js", "../../dagre/lib/order/index.js", "../../dagre/lib/position/bk.js", "../../dagre/lib/position/index.js", "../../dagre/lib/layout.js", "../../dagre/lib/debug.js", "../../dagre/lib/version.js", "../../dagre/index.js", "../../@antv/g6/src/index.ts", "../../@antv/g6/src/constants/animation.ts", "../../@antv/g6/src/constants/change.ts", "../../@antv/g6/src/constants/events/animation.ts", "../../@antv/g6/src/constants/events/canvas.ts", "../../@antv/g6/src/constants/events/combo.ts", "../../@antv/g6/src/constants/events/common.ts", "../../@antv/g6/src/constants/events/container.ts", "../../@antv/g6/src/constants/events/edge.ts", "../../@antv/g6/src/constants/events/graph.ts", "../../@antv/g6/src/constants/events/history.ts", "../../@antv/g6/src/constants/events/node.ts", "../../@antv/g6/src/constants/graphlib.ts", "../../@antv/g6/src/constants/registry.ts", "../../@antv/g6/src/registry/store.ts", "../../@antv/g6/src/registry/get.ts", "../../@antv/g6/src/version.ts", "../../@antv/g6/src/utils/print.ts", "../../@antv/g6/src/utils/theme.ts", "../../@antv/g6/src/utils/animation.ts", "../../@antv/g6/src/utils/transform.ts", "../../@antv/g6/src/animations/executor.ts", "../../@antv/g6/src/animations/index.ts", "../../@antv/g6/src/utils/is.ts", "../../@antv/g6/src/utils/math.ts", "../../@antv/g6/src/utils/padding.ts", "../../@antv/g6/src/utils/bbox.ts", "../../@antv/algorithm/es/structs/linked-list.js", "../../@antv/algorithm/es/structs/queue.js", "../../@antv/algorithm/es/util.js", "../../@antv/algorithm/es/degree.js", "../../@antv/algorithm/node_modules/@antv/util/src/is-type.ts", "../../@antv/algorithm/node_modules/@antv/util/src/is-function.ts", "../../@antv/algorithm/node_modules/@antv/util/src/is-array.ts", "../../@antv/algorithm/node_modules/@antv/util/src/is-object.ts", "../../@antv/algorithm/node_modules/@antv/util/src/each.ts", "../../@antv/algorithm/node_modules/@antv/util/src/pull.ts", "../../@antv/algorithm/node_modules/@antv/util/src/pull-at.ts", "../../@antv/algorithm/node_modules/@antv/util/src/is-string.ts", "../../@antv/algorithm/node_modules/@antv/util/src/is-number.ts", "../../@antv/algorithm/node_modules/@antv/util/src/is-integer.ts", "../../@antv/algorithm/node_modules/@antv/util/src/to-degree.ts", "../../@antv/algorithm/node_modules/@antv/util/src/to-radian.ts", "../../@antv/algorithm/node_modules/@antv/util/src/values.ts", "../../@antv/algorithm/node_modules/@antv/util/src/get-type.ts", "../../@antv/algorithm/node_modules/@antv/util/src/is-prototype.ts", "../../@antv/algorithm/node_modules/@antv/util/src/clone.ts", "../../@antv/algorithm/node_modules/@antv/util/src/memoize.ts", "../../@antv/algorithm/node_modules/@antv/util/src/measure-text-width.ts", "../../@antv/algorithm/node_modules/@antv/util/src/cache.ts", "../../@antv/algorithm/es/dijkstra.js", "../../@antv/algorithm/es/find-path.js", "../../@antv/algorithm/es/utils/vector.js", "../../@antv/algorithm/es/types.js", "../../@antv/algorithm/es/structs/union-find.js", "../../@antv/algorithm/es/structs/binary-heap.js", "../../@antv/algorithm/es/pageRank.js", "../../@antv/algorithm/es/gSpan/struct.js", "../../@antv/algorithm/es/gSpan/gSpan.js", "../../@antv/algorithm/es/structs/stack.js", "../../@antv/g6/src/utils/id.ts", "../../@antv/g6/src/utils/centrality.ts", "../../@antv/g6/src/utils/diff.ts", "../../@antv/g6/src/utils/visibility.ts", "../../@antv/g6/src/utils/extension.ts", "../../@antv/g6/src/registry/extension/index.ts", "../../@antv/g6/src/behaviors/base-behavior.ts", "../../@antv/g6/src/behaviors/auto-adapt-label.ts", "../../@antv/g6/src/utils/vector.ts", "../../@antv/g6/src/utils/line.ts", "../../@antv/g6/src/utils/placement.ts", "../../@antv/g6/src/utils/position.ts", "../../@antv/g6/src/utils/point.ts", "../../@antv/g6/src/utils/pinch.ts", "../../@antv/g6/src/utils/shortcut.ts", "../../@antv/g6/src/behaviors/brush-select.ts", "../../@antv/g6/src/constants/element.ts", "../../@antv/g6/src/utils/traverse.ts", "../../@antv/g6/src/utils/relation.ts", "../../@antv/g6/src/utils/state.ts", "../../@antv/g6/src/behaviors/click-select.ts", "../../@antv/g6/src/utils/collapsibility.ts", "../../@antv/g6/src/utils/prefix.ts", "../../@antv/g6/src/utils/size.ts", "../../@antv/g6/src/utils/style.ts", "../../@antv/g6/src/utils/node.ts", "../../@antv/g6/src/utils/palette.ts", "../../@antv/g6/src/utils/text.ts", "../../@antv/g6/src/elements/shapes/base-shape.ts", "../../@antv/g6/src/elements/shapes/label.ts", "../../@antv/g6/src/elements/shapes/badge.ts", "../../@antv/g6/src/utils/path.ts", "../../@antv/g6/src/utils/polygon.ts", "../../@antv/g6/src/elements/shapes/contour.ts", "../../@antv/g6/src/utils/shape.ts", "../../@antv/g6/src/elements/shapes/image.ts", "../../@antv/g6/src/elements/shapes/icon.ts", "../../@antv/g6/src/elements/base-element.ts", "../../@antv/g6/src/elements/nodes/base-node.ts", "../../@antv/g6/src/elements/nodes/circle.ts", "../../@antv/g6/src/elements/shapes/polygon.ts", "../../@antv/g6/src/elements/nodes/diamond.ts", "../../@antv/g6/src/elements/nodes/donut.ts", "../../@antv/g6/src/elements/nodes/ellipse.ts", "../../@antv/g6/src/elements/nodes/hexagon.ts", "../../@antv/g6/src/elements/nodes/html.ts", "../../@antv/g6/src/elements/nodes/image.ts", "../../@antv/g6/src/elements/nodes/rect.ts", "../../@antv/g6/src/elements/nodes/star.ts", "../../@antv/g6/src/elements/nodes/triangle.ts", "../../@antv/g6/src/elements/combos/base-combo.ts", "../../@antv/g6/src/elements/combos/circle.ts", "../../@antv/g6/src/elements/combos/rect.ts", "../../@antv/g6/src/utils/router/orth.ts", "../../@antv/g6/src/utils/edge.ts", "../../@antv/g6/src/utils/symbol.ts", "../../@antv/g6/src/elements/edges/base-edge.ts", "../../@antv/g6/src/elements/edges/cubic.ts", "../../@antv/g6/src/elements/edges/cubic-horizontal.ts", "../../@antv/g6/src/elements/edges/cubic-radial.ts", "../../@antv/g6/src/elements/edges/cubic-vertical.ts", "../../@antv/g6/src/elements/edges/line.ts", "../../@antv/g6/src/utils/router/shortest-path.ts", "../../@antv/g6/src/elements/edges/polyline.ts", "../../@antv/g6/src/elements/edges/quadratic.ts", "../../@antv/g6/src/utils/element.ts", "../../@antv/g6/src/behaviors/collapse-expand.ts", "../../@antv/g6/src/utils/data.ts", "../../@antv/g6/src/behaviors/create-edge.ts", "../../@antv/g6/src/behaviors/drag-canvas.ts", "../../@antv/g6/src/behaviors/drag-element.ts", "../../@antv/graphlib/src/utils/traverse.ts", "../../@antv/graphlib/src/graphView.ts", "../../@antv/graphlib/src/graph.ts", "../../@antv/g6/src/layouts/base-layout.ts", "../../@antv/g6/src/utils/layout.ts", "../../@antv/g6/src/behaviors/drag-element-force.ts", "../../@antv/g6/src/behaviors/fix-element-size.ts", "../../@antv/g6/src/behaviors/focus-element.ts", "../../@antv/g6/src/behaviors/hover-activate.ts", "../../@antv/g6/src/behaviors/lasso-select.ts", "../../@antv/g6/src/behaviors/optimize-viewport-transform.ts", "../../@antv/g6/src/behaviors/scroll-canvas.ts", "../../@antv/g6/src/behaviors/zoom-canvas.ts", "../../@antv/hierarchy/src/util.ts", "../../@antv/hierarchy/src/layout/hierarchy.ts", "../../@antv/hierarchy/src/layout/base.ts", "../../@antv/hierarchy/src/layout/non-layered-tidy.ts", "../../@antv/hierarchy/src/layout/separate-root.ts", "../../@antv/hierarchy/src/layout/do-layout.ts", "../../@antv/hierarchy/src/compact-box.ts", "../../@antv/hierarchy/src/layout/dendrogram.ts", "../../@antv/hierarchy/src/dendrogram.ts", "../../@antv/hierarchy/src/layout/indented.ts", "../../@antv/hierarchy/src/indented.ts", "../../@antv/hierarchy/src/layout/mindmap.ts", "../../@antv/hierarchy/src/mindmap.ts", "../../@antv/hierarchy/src/index.ts", "../../@antv/layout/src/antv-dagre/data/list.ts", "../../@antv/layout/src/antv-dagre/greedy-fas.ts", "../../@antv/layout/src/antv-dagre/acyclic.ts", "../../@antv/layout/src/antv-dagre/util.ts", "../../@antv/layout/src/antv-dagre/add-border-segments.ts", "../../@antv/layout/src/antv-dagre/coordinate-system.ts", "../../@antv/layout/src/antv-dagre/nesting-graph.ts", "../../@antv/layout/src/antv-dagre/normalize.ts", "../../@antv/layout/src/antv-dagre/order/add-subgraph-constraints.ts", "../../@antv/layout/src/antv-dagre/order/build-layer-graph.ts", "../../@antv/layout/src/antv-dagre/order/cross-count.ts", "../../@antv/layout/src/antv-dagre/order/init-order.ts", "../../@antv/layout/src/antv-dagre/order/barycenter.ts", "../../@antv/layout/src/antv-dagre/order/resolve-conflicts.ts", "../../@antv/layout/src/antv-dagre/order/sort.ts", "../../@antv/layout/src/antv-dagre/order/sort-subgraph.ts", "../../@antv/layout/src/antv-dagre/order/index.ts", "../../@antv/layout/src/antv-dagre/order/init-data-order.ts", "../../@antv/layout/src/antv-dagre/parent-dummy-chains.ts", "../../@antv/layout/src/antv-dagre/position/bk.ts", "../../@antv/layout/src/antv-dagre/position/index.ts", "../../@antv/layout/src/antv-dagre/rank/util.ts", "../../@antv/layout/src/antv-dagre/rank/feasible-tree.ts", "../../@antv/layout/src/antv-dagre/rank/network-simplex.ts", "../../@antv/layout/src/antv-dagre/rank/index.ts", "../../@antv/layout/src/antv-dagre/layout.ts", "../../@antv/layout/src/util/array.ts", "../../@antv/layout/src/util/math.ts", "../../@antv/layout/src/util/object.ts", "../../@antv/layout/src/util/size.ts", "../../@antv/layout/src/util/function.ts", "../../@antv/layout/src/antv-dagre.ts", "../../@antv/layout/src/util/common.ts", "../../@antv/layout/src/circular.ts", "../../@antv/layout/src/concentric.ts", "../../d3-octree/src/add.js", "../../d3-octree/src/cover.js", "../../d3-octree/src/data.js", "../../d3-octree/src/extent.js", "../../d3-octree/src/octant.js", "../../d3-octree/src/find.js", "../../d3-octree/src/findAll.js", "../../d3-octree/src/remove.js", "../../d3-octree/src/root.js", "../../d3-octree/src/size.js", "../../d3-octree/src/visit.js", "../../d3-octree/src/visitAfter.js", "../../d3-octree/src/x.js", "../../d3-octree/src/y.js", "../../d3-octree/src/z.js", "../../d3-octree/src/octree.js", "../../@antv/layout/src/force/force-n-body.ts", "../../@antv/layout/src/force/index.ts", "../../ml-matrix/matrix.mjs", "../../@antv/layout/src/mds.ts", "../../@antv/layout/src/types.ts", "../../@antv/layout/src/combo-combined.ts", "../../@antv/layout/src/d3-force/index.ts", "../../d3-binarytree/src/add.js", "../../d3-binarytree/src/cover.js", "../../d3-binarytree/src/data.js", "../../d3-binarytree/src/extent.js", "../../d3-binarytree/src/half.js", "../../d3-binarytree/src/find.js", "../../d3-binarytree/src/remove.js", "../../d3-binarytree/src/root.js", "../../d3-binarytree/src/size.js", "../../d3-binarytree/src/visit.js", "../../d3-binarytree/src/visitAfter.js", "../../d3-binarytree/src/x.js", "../../d3-binarytree/src/binarytree.js", "../../d3-force-3d/src/simulation.js", "../../@antv/layout/src/dagre.ts", "../../@antv/layout/src/force-atlas2/body.ts", "../../@antv/layout/src/force-atlas2/quad.ts", "../../@antv/layout/src/force-atlas2/quad-tree.ts", "../../@antv/layout/src/force-atlas2/index.ts", "../../@antv/layout/src/fruchterman.ts", "../../@antv/layout/src/grid.ts", "../../@antv/layout/src/radial/mds.ts", "../../@antv/layout/src/radial/radial-nonoverlap-force.ts", "../../@antv/layout/src/radial/index.ts", "../../@antv/layout/src/random.ts", "../../comlink/src/comlink.ts", "../../@antv/layout/src/supervisor.ts", "../../@antv/g6/src/layouts/fishbone.ts", "../../@antv/g6/src/layouts/snake.ts", "../../@antv/g6/src/palettes/index.ts", "../../@antv/g6/src/plugins/base-plugin.ts", "../../@antv/g6/src/plugins/utils/dom.ts", "../../@antv/g6/src/plugins/background/index.ts", "../../bubblesets-js/src/utils.ts", "../../bubblesets-js/src/model/Line.ts", "../../bubblesets-js/src/Intersection.ts", "../../bubblesets-js/src/model/Rectangle.ts", "../../bubblesets-js/src/model/Circle.ts", "../../bubblesets-js/src/model/Area.ts", "../../bubblesets-js/src/padding.ts", "../../bubblesets-js/src/potentialAreas.ts", "../../bubblesets-js/src/interfaces.ts", "../../bubblesets-js/src/routing.ts", "../../bubblesets-js/src/simplifiers/ShapeSimplifier.ts", "../../bubblesets-js/src/simplifiers/BSplineShapeGenerator.ts", "../../bubblesets-js/src/simplifiers/Sample.ts", "../../bubblesets-js/src/PointPath.ts", "../../bubblesets-js/src/model/PointList.ts", "../../bubblesets-js/src/MarchingSquares.ts", "../../bubblesets-js/src/BubbleSets.ts", "../../@antv/g6/src/plugins/bubble-sets.ts", "../../@antv/g6/src/plugins/camera-setting.ts", "../../@antv/g6/src/plugins/contextmenu/util.ts", "../../@antv/g6/src/plugins/contextmenu/index.ts", "../../@antv/g6/src/plugins/edge-bundling/index.ts", "../../@antv/g6/src/plugins/edge-filter-lens/index.ts", "../../@antv/g6/src/plugins/fisheye/index.ts", "../../@antv/g6/src/plugins/fullscreen/index.ts", "../../@antv/g6/src/plugins/grid-line.ts", "../../@antv/g6/src/utils/change.ts", "../../@antv/g6/src/plugins/history/util.ts", "../../@antv/g6/src/plugins/history/index.ts", "../../@antv/g6/src/plugins/hull/hull/format.ts", "../../@antv/g6/src/plugins/hull/hull/grid_handle.ts", "../../@antv/g6/src/plugins/hull/hull/two-product.ts", "../../@antv/g6/src/plugins/hull/hull/two-sum.ts", "../../@antv/g6/src/plugins/hull/hull/robust-scale.ts", "../../@antv/g6/src/plugins/hull/hull/robust-subtract.ts", "../../@antv/g6/src/plugins/hull/hull/robust-sum.ts", "../../@antv/g6/src/plugins/hull/hull/robust-orientation.ts", "../../@antv/g6/src/plugins/hull/hull/monotone-convex-hull-2d.ts", "../../@antv/g6/src/plugins/hull/hull/robust-segment-intersect.ts", "../../@antv/g6/src/plugins/hull/hull/index.ts", "../../@antv/g6/src/plugins/hull/util.ts", "../../@antv/g6/src/plugins/hull/index.ts", "../../@antv/g6/src/plugins/utils/canvas.ts", "../../@antv/g6/src/plugins/legend.ts", "../../@antv/g6/src/plugins/minimap/index.ts", "../../@antv/g6/src/plugins/snapline/index.ts", "../../@antv/g6/src/plugins/timebar.ts", "../../@antv/g6/src/plugins/title/index.ts", "../../@antv/g6/src/plugins/toolbar/util.ts", "../../@antv/g6/src/plugins/toolbar/index.ts", "../../@antv/g6/src/plugins/tooltip.ts", "../../@antv/g6/src/plugins/watermark/util.ts", "../../@antv/g6/src/plugins/watermark/index.ts", "../../@antv/g6/src/themes/base.ts", "../../@antv/g6/src/themes/dark.ts", "../../@antv/g6/src/themes/light.ts", "../../@antv/g6/src/transforms/base-transform.ts", "../../@antv/g6/src/transforms/arrange-draw-order.ts", "../../@antv/g6/src/transforms/utils.ts", "../../@antv/g6/src/transforms/collapse-expand-combo.ts", "../../@antv/g6/src/transforms/collapse-expand-node.ts", "../../@antv/g6/src/elements/effect.ts", "../../@antv/g6/src/registry/register.ts", "../../@antv/g6/src/runtime/canvas.ts", "../../@antv/g6/src/utils/dom.ts", "../../@antv/g6/src/utils/event/events.ts", "../../@antv/g6/src/utils/event/index.ts", "../../@antv/g6/src/utils/z-index.ts", "../../@antv/g6/src/utils/cache.ts", "../../@antv/g6/src/runtime/animation.ts", "../../@antv/g6/src/runtime/batch.ts", "../../@antv/g6/src/runtime/behavior.ts", "../../@antv/g6/src/utils/graphlib.ts", "../../@antv/g6/src/runtime/data.ts", "../../@antv/g6/src/runtime/element.ts", "../../@antv/g6/src/runtime/layout.ts", "../../@antv/g6/src/runtime/options.ts", "../../@antv/g6/src/runtime/plugin.ts", "../../@antv/g6/src/runtime/transform.ts", "../../@antv/g6/src/runtime/viewport.ts", "../../@antv/g6/src/runtime/graph.ts", "../../@antv/g6/src/utils/tree.ts", "../../@antv/g6/src/transforms/get-edge-actual-ends.ts", "../../@antv/g6/src/utils/scale.ts", "../../@antv/g6/src/transforms/map-node-size.ts", "../../@antv/g6/src/transforms/place-radial-labels.ts", "../../@antv/g6/src/transforms/process-parallel-edges.ts", "../../@antv/g6/src/transforms/update-related-edge.ts", "../../@antv/g6/src/registry/build-in.ts", "../../@antv/g6/src/preset.ts", "../../@antv/g6-extension-react/src/react-node/render.ts", "../../@antv/g6-extension-react/src/react-node/node.tsx", "../../@ant-design/graphs/es/core/behaviors/hover-activate-chain.js", "../../@ant-design/graphs/es/core/behaviors/hover-activate-neighbors.js", "../../@ant-design/graphs/es/core/edges/indented-edge.js", "../../@ant-design/graphs/es/core/transform/arrange-edge-z-index.js", "../../@ant-design/graphs/es/core/transform/assign-color-by-branch.js", "../../@ant-design/graphs/es/core/transform/collapse-expand-react-node.js", "../../@ant-design/graphs/es/core/base/collapse-expand-icon/index.js", "../../@ant-design/graphs/es/core/base/collapse-expand-icon/arrow-count-icon.js", "../../styled-components/node_modules/@emotion/unitless/dist/emotion-unitless.esm.js", "../../styled-components/src/constants.ts", "../../styled-components/src/utils/checkDynamicCreation.ts", "../../styled-components/src/utils/empties.ts", "../../styled-components/src/utils/determineTheme.ts", "../../styled-components/src/utils/domElements.ts", "../../styled-components/src/utils/escape.ts", "../../styled-components/src/utils/generateAlphabeticName.ts", "../../styled-components/src/utils/hash.ts", "../../styled-components/src/utils/generateComponentId.ts", "../../styled-components/src/utils/getComponentName.ts", "../../styled-components/src/utils/isTag.ts", "../../styled-components/src/utils/hoist.ts", "../../styled-components/src/utils/isFunction.ts", "../../styled-components/src/utils/isStyledComponent.ts", "../../styled-components/src/utils/joinStrings.ts", "../../styled-components/src/utils/isPlainObject.ts", "../../styled-components/src/utils/mixinDeep.ts", "../../styled-components/src/utils/setToString.ts", "../../styled-components/src/utils/errors.ts", "../../styled-components/src/utils/error.ts", "../../styled-components/src/sheet/GroupedTag.ts", "../../styled-components/src/sheet/GroupIDAllocator.ts", "../../styled-components/src/sheet/Rehydration.ts", "../../styled-components/src/utils/nonce.ts", "../../styled-components/src/sheet/dom.ts", "../../styled-components/src/sheet/Tag.ts", "../../styled-components/src/sheet/Sheet.ts", "../../styled-components/src/utils/stylis.ts", "../../styled-components/src/models/StyleSheetManager.tsx", "../../styled-components/src/models/Keyframes.ts", "../../styled-components/src/utils/addUnitIfNeeded.ts", "../../styled-components/src/utils/hyphenateStyleName.ts", "../../styled-components/src/utils/flatten.ts", "../../styled-components/src/utils/isStatelessFunction.ts", "../../styled-components/src/utils/isStaticRules.ts", "../../styled-components/src/models/ComponentStyle.ts", "../../styled-components/src/models/ThemeProvider.tsx", "../../styled-components/src/models/StyledComponent.ts", "../../styled-components/src/utils/generateDisplayName.ts", "../../styled-components/src/utils/createWarnTooManyClasses.ts", "../../styled-components/src/utils/interleave.ts", "../../styled-components/src/constructors/css.ts", "../../styled-components/src/constructors/constructWithOptions.ts", "../../styled-components/src/constructors/styled.tsx", "../../styled-components/src/models/GlobalStyle.ts", "../../styled-components/src/constructors/createGlobalStyle.ts", "../../styled-components/src/constructors/keyframes.ts", "../../styled-components/src/hoc/withTheme.tsx", "../../styled-components/src/models/ServerStyleSheet.tsx", "../../styled-components/src/secretInternals.ts", "../../styled-components/src/base.ts", "../../@ant-design/graphs/es/core/base/collapse-expand-icon/plus-minus-icon.js", "../../@ant-design/graphs/es/core/base/node/index.js", "../../@ant-design/graphs/es/core/base/node/organization-chart-node.js", "../../@ant-design/graphs/node_modules/@ant-design/charts-util/es/react/render.js", "../../@ant-design/graphs/node_modules/@ant-design/charts-util/es/rc/create-node.js", "../../@ant-design/graphs/node_modules/@ant-design/charts-util/es/rc/chart-loading.js", "../../@ant-design/graphs/node_modules/@ant-design/charts-util/es/rc/error-boundary.js", "../../@ant-design/graphs/node_modules/@ant-design/charts-util/es/utils/measure-text.js", "../../@ant-design/graphs/node_modules/@ant-design/charts-util/es/utils/context.js", "../../@ant-design/graphs/es/core/base/node/text-node.js", "../../@ant-design/graphs/es/core/utils/color.js", "../../@ant-design/graphs/es/core/hoc/with-collapsible-node.js", "../../@ant-design/graphs/es/core/utils/data.js", "../../@ant-design/graphs/es/core/utils/scale.js", "../../@ant-design/graphs/es/core/transform/map-edge-line-width.js", "../../@ant-design/graphs/es/core/transform/translate-react-node-origin.js", "../../@ant-design/graphs/es/core/registry/build-in.js", "../../@ant-design/graphs/es/core/registry/register.js", "../../@ant-design/graphs/es/preset.js", "../../@ant-design/graphs/es/components/dendrogram/index.js", "../../@antv/graphin/es/context/index.js", "../../@antv/graphin/es/Graphin.js", "../../@antv/graphin/es/hooks/useGraph.js", "../../@ant-design/graphs/es/core/base-graph.js", "../../@ant-design/graphs/es/core/constants/options.js", "../../@ant-design/graphs/es/core/utils/options.js", "../../@ant-design/graphs/es/components/dendrogram/options.js", "../../@ant-design/graphs/es/components/fishbone/index.js", "../../@ant-design/graphs/es/components/fishbone/options.js", "../../@ant-design/graphs/es/core/utils/label.js", "../../@ant-design/graphs/es/core/utils/measure-text.js", "../../@ant-design/graphs/es/components/flow-direction-graph/index.js", "../../@ant-design/graphs/es/components/flow-direction-graph/options.js", "../../@ant-design/graphs/es/components/flow-graph/index.js", "../../@ant-design/graphs/es/components/flow-graph/options.js", "../../@ant-design/graphs/es/components/indented-tree/index.js", "../../@ant-design/graphs/es/components/indented-tree/options.js", "../../@ant-design/graphs/es/core/utils/node.js", "../../@ant-design/graphs/es/core/utils/tree.js", "../../@ant-design/graphs/es/components/mind-map/index.js", "../../@ant-design/graphs/es/components/mind-map/options.js", "../../@ant-design/graphs/es/components/network-graph/index.js", "../../@ant-design/graphs/es/components/network-graph/options.js", "../../@ant-design/graphs/es/components/organization-chart/index.js", "../../@ant-design/graphs/es/components/organization-chart/options.js"],
  "sourcesContent": ["// eslint-disable-next-line @typescript-eslint/unbound-method\nconst toString = Object.prototype.toString;\n\nexport type AnyArray =\n  | any[] // eslint-disable-line @typescript-eslint/no-explicit-any\n  | Int8Array\n  | Uint8Array\n  | Uint8ClampedArray\n  | Int16Array\n  | Uint16Array\n  | Int32Array\n  | Uint32Array\n  | Float32Array\n  | Float64Array;\n\n/**\n * Checks if an object is an instance of an Array (array or typed array, except those that contain bigint values).\n *\n * @param value - Object to check.\n * @returns True if the object is an array or a typed array.\n */\nexport function isAnyArray(value: unknown): value is AnyArray {\n  const tag = toString.call(value);\n  return tag.endsWith('Array]') && !tag.includes('Big');\n}\n", "import { isAnyArray } from 'is-any-array';\n\nfunction max(input) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  if (!isAnyArray(input)) {\n    throw new TypeError('input must be an array');\n  }\n\n  if (input.length === 0) {\n    throw new TypeError('input must not be empty');\n  }\n\n  var _options$fromIndex = options.fromIndex,\n      fromIndex = _options$fromIndex === void 0 ? 0 : _options$fromIndex,\n      _options$toIndex = options.toIndex,\n      toIndex = _options$toIndex === void 0 ? input.length : _options$toIndex;\n\n  if (fromIndex < 0 || fromIndex >= input.length || !Number.isInteger(fromIndex)) {\n    throw new Error('fromIndex must be a positive integer smaller than length');\n  }\n\n  if (toIndex <= fromIndex || toIndex > input.length || !Number.isInteger(toIndex)) {\n    throw new Error('toIndex must be an integer greater than fromIndex and at most equal to length');\n  }\n\n  var maxValue = input[fromIndex];\n\n  for (var i = fromIndex + 1; i < toIndex; i++) {\n    if (input[i] > maxValue) maxValue = input[i];\n  }\n\n  return maxValue;\n}\n\nexport { max as default };\n", "import { isAnyArray } from 'is-any-array';\n\nfunction min(input) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  if (!isAnyArray(input)) {\n    throw new TypeError('input must be an array');\n  }\n\n  if (input.length === 0) {\n    throw new TypeError('input must not be empty');\n  }\n\n  var _options$fromIndex = options.fromIndex,\n      fromIndex = _options$fromIndex === void 0 ? 0 : _options$fromIndex,\n      _options$toIndex = options.toIndex,\n      toIndex = _options$toIndex === void 0 ? input.length : _options$toIndex;\n\n  if (fromIndex < 0 || fromIndex >= input.length || !Number.isInteger(fromIndex)) {\n    throw new Error('fromIndex must be a positive integer smaller than length');\n  }\n\n  if (toIndex <= fromIndex || toIndex > input.length || !Number.isInteger(toIndex)) {\n    throw new Error('toIndex must be an integer greater than fromIndex and at most equal to length');\n  }\n\n  var minValue = input[fromIndex];\n\n  for (var i = fromIndex + 1; i < toIndex; i++) {\n    if (input[i] < minValue) minValue = input[i];\n  }\n\n  return minValue;\n}\n\nexport { min as default };\n", "import { isAnyArray } from 'is-any-array';\nimport max from 'ml-array-max';\nimport min from 'ml-array-min';\n\nfunction rescale(input) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  if (!isAnyArray(input)) {\n    throw new TypeError('input must be an array');\n  } else if (input.length === 0) {\n    throw new TypeError('input must not be empty');\n  }\n\n  var output;\n\n  if (options.output !== undefined) {\n    if (!isAnyArray(options.output)) {\n      throw new TypeError('output option must be an array if specified');\n    }\n\n    output = options.output;\n  } else {\n    output = new Array(input.length);\n  }\n\n  var currentMin = min(input);\n  var currentMax = max(input);\n\n  if (currentMin === currentMax) {\n    throw new RangeError('minimum and maximum input values are equal. Cannot rescale a constant array');\n  }\n\n  var _options$min = options.min,\n      minValue = _options$min === void 0 ? options.autoMinMax ? currentMin : 0 : _options$min,\n      _options$max = options.max,\n      maxValue = _options$max === void 0 ? options.autoMinMax ? currentMax : 1 : _options$max;\n\n  if (minValue >= maxValue) {\n    throw new RangeError('min option must be smaller than max option');\n  }\n\n  var factor = (maxValue - minValue) / (currentMax - currentMin);\n\n  for (var i = 0; i < input.length; i++) {\n    output[i] = (input[i] - currentMin) * factor + minValue;\n  }\n\n  return output;\n}\n\nexport { rescale as default };\n", "'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nvar isAnyArray = require('is-any-array');\nvar rescale = require('ml-array-rescale');\n\nconst indent = ' '.repeat(2);\nconst indentData = ' '.repeat(4);\n\n/**\n * @this {Matrix}\n * @returns {string}\n */\nfunction inspectMatrix() {\n  return inspectMatrixWithOptions(this);\n}\n\nfunction inspectMatrixWithOptions(matrix, options = {}) {\n  const {\n    maxRows = 15,\n    maxColumns = 10,\n    maxNumSize = 8,\n    padMinus = 'auto',\n  } = options;\n  return `${matrix.constructor.name} {\n${indent}[\n${indentData}${inspectData(matrix, maxRows, maxColumns, maxNumSize, padMinus)}\n${indent}]\n${indent}rows: ${matrix.rows}\n${indent}columns: ${matrix.columns}\n}`;\n}\n\nfunction inspectData(matrix, maxRows, maxColumns, maxNumSize, padMinus) {\n  const { rows, columns } = matrix;\n  const maxI = Math.min(rows, maxRows);\n  const maxJ = Math.min(columns, maxColumns);\n  const result = [];\n\n  if (padMinus === 'auto') {\n    padMinus = false;\n    loop: for (let i = 0; i < maxI; i++) {\n      for (let j = 0; j < maxJ; j++) {\n        if (matrix.get(i, j) < 0) {\n          padMinus = true;\n          break loop;\n        }\n      }\n    }\n  }\n\n  for (let i = 0; i < maxI; i++) {\n    let line = [];\n    for (let j = 0; j < maxJ; j++) {\n      line.push(formatNumber(matrix.get(i, j), maxNumSize, padMinus));\n    }\n    result.push(`${line.join(' ')}`);\n  }\n  if (maxJ !== columns) {\n    result[result.length - 1] += ` ... ${columns - maxColumns} more columns`;\n  }\n  if (maxI !== rows) {\n    result.push(`... ${rows - maxRows} more rows`);\n  }\n  return result.join(`\\n${indentData}`);\n}\n\nfunction formatNumber(num, maxNumSize, padMinus) {\n  return (\n    num >= 0 && padMinus\n      ? ` ${formatNumber2(num, maxNumSize - 1)}`\n      : formatNumber2(num, maxNumSize)\n  ).padEnd(maxNumSize);\n}\n\nfunction formatNumber2(num, len) {\n  // small.length numbers should be as is\n  let str = num.toString();\n  if (str.length <= len) return str;\n\n  // (7)'0.00123' is better then (7)'1.23e-2'\n  // (8)'0.000123' is worse then (7)'1.23e-3',\n  let fix = num.toFixed(len);\n  if (fix.length > len) {\n    fix = num.toFixed(Math.max(0, len - (fix.length - len)));\n  }\n  if (\n    fix.length <= len &&\n    !fix.startsWith('0.000') &&\n    !fix.startsWith('-0.000')\n  ) {\n    return fix;\n  }\n\n  // well, if it's still too long the user should've used longer numbers\n  let exp = num.toExponential(len);\n  if (exp.length > len) {\n    exp = num.toExponential(Math.max(0, len - (exp.length - len)));\n  }\n  return exp.slice(0);\n}\n\nfunction installMathOperations(AbstractMatrix, Matrix) {\n  AbstractMatrix.prototype.add = function add(value) {\n    if (typeof value === 'number') return this.addS(value);\n    return this.addM(value);\n  };\n\n  AbstractMatrix.prototype.addS = function addS(value) {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) + value);\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.prototype.addM = function addM(matrix) {\n    matrix = Matrix.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n      this.columns !== matrix.columns) {\n      throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) + matrix.get(i, j));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.add = function add(matrix, value) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.add(value);\n  };\n\n  AbstractMatrix.prototype.sub = function sub(value) {\n    if (typeof value === 'number') return this.subS(value);\n    return this.subM(value);\n  };\n\n  AbstractMatrix.prototype.subS = function subS(value) {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) - value);\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.prototype.subM = function subM(matrix) {\n    matrix = Matrix.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n      this.columns !== matrix.columns) {\n      throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) - matrix.get(i, j));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.sub = function sub(matrix, value) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.sub(value);\n  };\n  AbstractMatrix.prototype.subtract = AbstractMatrix.prototype.sub;\n  AbstractMatrix.prototype.subtractS = AbstractMatrix.prototype.subS;\n  AbstractMatrix.prototype.subtractM = AbstractMatrix.prototype.subM;\n  AbstractMatrix.subtract = AbstractMatrix.sub;\n\n  AbstractMatrix.prototype.mul = function mul(value) {\n    if (typeof value === 'number') return this.mulS(value);\n    return this.mulM(value);\n  };\n\n  AbstractMatrix.prototype.mulS = function mulS(value) {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) * value);\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.prototype.mulM = function mulM(matrix) {\n    matrix = Matrix.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n      this.columns !== matrix.columns) {\n      throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) * matrix.get(i, j));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.mul = function mul(matrix, value) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.mul(value);\n  };\n  AbstractMatrix.prototype.multiply = AbstractMatrix.prototype.mul;\n  AbstractMatrix.prototype.multiplyS = AbstractMatrix.prototype.mulS;\n  AbstractMatrix.prototype.multiplyM = AbstractMatrix.prototype.mulM;\n  AbstractMatrix.multiply = AbstractMatrix.mul;\n\n  AbstractMatrix.prototype.div = function div(value) {\n    if (typeof value === 'number') return this.divS(value);\n    return this.divM(value);\n  };\n\n  AbstractMatrix.prototype.divS = function divS(value) {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) / value);\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.prototype.divM = function divM(matrix) {\n    matrix = Matrix.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n      this.columns !== matrix.columns) {\n      throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) / matrix.get(i, j));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.div = function div(matrix, value) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.div(value);\n  };\n  AbstractMatrix.prototype.divide = AbstractMatrix.prototype.div;\n  AbstractMatrix.prototype.divideS = AbstractMatrix.prototype.divS;\n  AbstractMatrix.prototype.divideM = AbstractMatrix.prototype.divM;\n  AbstractMatrix.divide = AbstractMatrix.div;\n\n  AbstractMatrix.prototype.mod = function mod(value) {\n    if (typeof value === 'number') return this.modS(value);\n    return this.modM(value);\n  };\n\n  AbstractMatrix.prototype.modS = function modS(value) {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) % value);\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.prototype.modM = function modM(matrix) {\n    matrix = Matrix.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n      this.columns !== matrix.columns) {\n      throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) % matrix.get(i, j));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.mod = function mod(matrix, value) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.mod(value);\n  };\n  AbstractMatrix.prototype.modulus = AbstractMatrix.prototype.mod;\n  AbstractMatrix.prototype.modulusS = AbstractMatrix.prototype.modS;\n  AbstractMatrix.prototype.modulusM = AbstractMatrix.prototype.modM;\n  AbstractMatrix.modulus = AbstractMatrix.mod;\n\n  AbstractMatrix.prototype.and = function and(value) {\n    if (typeof value === 'number') return this.andS(value);\n    return this.andM(value);\n  };\n\n  AbstractMatrix.prototype.andS = function andS(value) {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) & value);\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.prototype.andM = function andM(matrix) {\n    matrix = Matrix.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n      this.columns !== matrix.columns) {\n      throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) & matrix.get(i, j));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.and = function and(matrix, value) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.and(value);\n  };\n\n  AbstractMatrix.prototype.or = function or(value) {\n    if (typeof value === 'number') return this.orS(value);\n    return this.orM(value);\n  };\n\n  AbstractMatrix.prototype.orS = function orS(value) {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) | value);\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.prototype.orM = function orM(matrix) {\n    matrix = Matrix.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n      this.columns !== matrix.columns) {\n      throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) | matrix.get(i, j));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.or = function or(matrix, value) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.or(value);\n  };\n\n  AbstractMatrix.prototype.xor = function xor(value) {\n    if (typeof value === 'number') return this.xorS(value);\n    return this.xorM(value);\n  };\n\n  AbstractMatrix.prototype.xorS = function xorS(value) {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) ^ value);\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.prototype.xorM = function xorM(matrix) {\n    matrix = Matrix.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n      this.columns !== matrix.columns) {\n      throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) ^ matrix.get(i, j));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.xor = function xor(matrix, value) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.xor(value);\n  };\n\n  AbstractMatrix.prototype.leftShift = function leftShift(value) {\n    if (typeof value === 'number') return this.leftShiftS(value);\n    return this.leftShiftM(value);\n  };\n\n  AbstractMatrix.prototype.leftShiftS = function leftShiftS(value) {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) << value);\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.prototype.leftShiftM = function leftShiftM(matrix) {\n    matrix = Matrix.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n      this.columns !== matrix.columns) {\n      throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) << matrix.get(i, j));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.leftShift = function leftShift(matrix, value) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.leftShift(value);\n  };\n\n  AbstractMatrix.prototype.signPropagatingRightShift = function signPropagatingRightShift(value) {\n    if (typeof value === 'number') return this.signPropagatingRightShiftS(value);\n    return this.signPropagatingRightShiftM(value);\n  };\n\n  AbstractMatrix.prototype.signPropagatingRightShiftS = function signPropagatingRightShiftS(value) {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) >> value);\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.prototype.signPropagatingRightShiftM = function signPropagatingRightShiftM(matrix) {\n    matrix = Matrix.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n      this.columns !== matrix.columns) {\n      throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) >> matrix.get(i, j));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.signPropagatingRightShift = function signPropagatingRightShift(matrix, value) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.signPropagatingRightShift(value);\n  };\n\n  AbstractMatrix.prototype.rightShift = function rightShift(value) {\n    if (typeof value === 'number') return this.rightShiftS(value);\n    return this.rightShiftM(value);\n  };\n\n  AbstractMatrix.prototype.rightShiftS = function rightShiftS(value) {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) >>> value);\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.prototype.rightShiftM = function rightShiftM(matrix) {\n    matrix = Matrix.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n      this.columns !== matrix.columns) {\n      throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) >>> matrix.get(i, j));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.rightShift = function rightShift(matrix, value) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.rightShift(value);\n  };\n  AbstractMatrix.prototype.zeroFillRightShift = AbstractMatrix.prototype.rightShift;\n  AbstractMatrix.prototype.zeroFillRightShiftS = AbstractMatrix.prototype.rightShiftS;\n  AbstractMatrix.prototype.zeroFillRightShiftM = AbstractMatrix.prototype.rightShiftM;\n  AbstractMatrix.zeroFillRightShift = AbstractMatrix.rightShift;\n\n  AbstractMatrix.prototype.not = function not() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, ~(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.not = function not(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.not();\n  };\n\n  AbstractMatrix.prototype.abs = function abs() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.abs(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.abs = function abs(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.abs();\n  };\n\n  AbstractMatrix.prototype.acos = function acos() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.acos(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.acos = function acos(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.acos();\n  };\n\n  AbstractMatrix.prototype.acosh = function acosh() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.acosh(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.acosh = function acosh(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.acosh();\n  };\n\n  AbstractMatrix.prototype.asin = function asin() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.asin(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.asin = function asin(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.asin();\n  };\n\n  AbstractMatrix.prototype.asinh = function asinh() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.asinh(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.asinh = function asinh(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.asinh();\n  };\n\n  AbstractMatrix.prototype.atan = function atan() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.atan(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.atan = function atan(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.atan();\n  };\n\n  AbstractMatrix.prototype.atanh = function atanh() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.atanh(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.atanh = function atanh(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.atanh();\n  };\n\n  AbstractMatrix.prototype.cbrt = function cbrt() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.cbrt(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.cbrt = function cbrt(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.cbrt();\n  };\n\n  AbstractMatrix.prototype.ceil = function ceil() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.ceil(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.ceil = function ceil(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.ceil();\n  };\n\n  AbstractMatrix.prototype.clz32 = function clz32() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.clz32(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.clz32 = function clz32(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.clz32();\n  };\n\n  AbstractMatrix.prototype.cos = function cos() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.cos(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.cos = function cos(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.cos();\n  };\n\n  AbstractMatrix.prototype.cosh = function cosh() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.cosh(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.cosh = function cosh(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.cosh();\n  };\n\n  AbstractMatrix.prototype.exp = function exp() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.exp(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.exp = function exp(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.exp();\n  };\n\n  AbstractMatrix.prototype.expm1 = function expm1() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.expm1(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.expm1 = function expm1(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.expm1();\n  };\n\n  AbstractMatrix.prototype.floor = function floor() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.floor(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.floor = function floor(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.floor();\n  };\n\n  AbstractMatrix.prototype.fround = function fround() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.fround(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.fround = function fround(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.fround();\n  };\n\n  AbstractMatrix.prototype.log = function log() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.log(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.log = function log(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.log();\n  };\n\n  AbstractMatrix.prototype.log1p = function log1p() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.log1p(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.log1p = function log1p(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.log1p();\n  };\n\n  AbstractMatrix.prototype.log10 = function log10() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.log10(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.log10 = function log10(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.log10();\n  };\n\n  AbstractMatrix.prototype.log2 = function log2() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.log2(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.log2 = function log2(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.log2();\n  };\n\n  AbstractMatrix.prototype.round = function round() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.round(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.round = function round(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.round();\n  };\n\n  AbstractMatrix.prototype.sign = function sign() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.sign(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.sign = function sign(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.sign();\n  };\n\n  AbstractMatrix.prototype.sin = function sin() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.sin(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.sin = function sin(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.sin();\n  };\n\n  AbstractMatrix.prototype.sinh = function sinh() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.sinh(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.sinh = function sinh(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.sinh();\n  };\n\n  AbstractMatrix.prototype.sqrt = function sqrt() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.sqrt(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.sqrt = function sqrt(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.sqrt();\n  };\n\n  AbstractMatrix.prototype.tan = function tan() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.tan(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.tan = function tan(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.tan();\n  };\n\n  AbstractMatrix.prototype.tanh = function tanh() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.tanh(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.tanh = function tanh(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.tanh();\n  };\n\n  AbstractMatrix.prototype.trunc = function trunc() {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, Math.trunc(this.get(i, j)));\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.trunc = function trunc(matrix) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.trunc();\n  };\n\n  AbstractMatrix.pow = function pow(matrix, arg0) {\n    const newMatrix = new Matrix(matrix);\n    return newMatrix.pow(arg0);\n  };\n\n  AbstractMatrix.prototype.pow = function pow(value) {\n    if (typeof value === 'number') return this.powS(value);\n    return this.powM(value);\n  };\n\n  AbstractMatrix.prototype.powS = function powS(value) {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) ** value);\n      }\n    }\n    return this;\n  };\n\n  AbstractMatrix.prototype.powM = function powM(matrix) {\n    matrix = Matrix.checkMatrix(matrix);\n    if (this.rows !== matrix.rows ||\n      this.columns !== matrix.columns) {\n      throw new RangeError('Matrices dimensions must be equal');\n    }\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) ** matrix.get(i, j));\n      }\n    }\n    return this;\n  };\n}\n\n/**\n * @private\n * Check that a row index is not out of bounds\n * @param {Matrix} matrix\n * @param {number} index\n * @param {boolean} [outer]\n */\nfunction checkRowIndex(matrix, index, outer) {\n  let max = outer ? matrix.rows : matrix.rows - 1;\n  if (index < 0 || index > max) {\n    throw new RangeError('Row index out of range');\n  }\n}\n\n/**\n * @private\n * Check that a column index is not out of bounds\n * @param {Matrix} matrix\n * @param {number} index\n * @param {boolean} [outer]\n */\nfunction checkColumnIndex(matrix, index, outer) {\n  let max = outer ? matrix.columns : matrix.columns - 1;\n  if (index < 0 || index > max) {\n    throw new RangeError('Column index out of range');\n  }\n}\n\n/**\n * @private\n * Check that the provided vector is an array with the right length\n * @param {Matrix} matrix\n * @param {Array|Matrix} vector\n * @return {Array}\n * @throws {RangeError}\n */\nfunction checkRowVector(matrix, vector) {\n  if (vector.to1DArray) {\n    vector = vector.to1DArray();\n  }\n  if (vector.length !== matrix.columns) {\n    throw new RangeError(\n      'vector size must be the same as the number of columns',\n    );\n  }\n  return vector;\n}\n\n/**\n * @private\n * Check that the provided vector is an array with the right length\n * @param {Matrix} matrix\n * @param {Array|Matrix} vector\n * @return {Array}\n * @throws {RangeError}\n */\nfunction checkColumnVector(matrix, vector) {\n  if (vector.to1DArray) {\n    vector = vector.to1DArray();\n  }\n  if (vector.length !== matrix.rows) {\n    throw new RangeError('vector size must be the same as the number of rows');\n  }\n  return vector;\n}\n\nfunction checkRowIndices(matrix, rowIndices) {\n  if (!isAnyArray.isAnyArray(rowIndices)) {\n    throw new TypeError('row indices must be an array');\n  }\n\n  for (let i = 0; i < rowIndices.length; i++) {\n    if (rowIndices[i] < 0 || rowIndices[i] >= matrix.rows) {\n      throw new RangeError('row indices are out of range');\n    }\n  }\n}\n\nfunction checkColumnIndices(matrix, columnIndices) {\n  if (!isAnyArray.isAnyArray(columnIndices)) {\n    throw new TypeError('column indices must be an array');\n  }\n\n  for (let i = 0; i < columnIndices.length; i++) {\n    if (columnIndices[i] < 0 || columnIndices[i] >= matrix.columns) {\n      throw new RangeError('column indices are out of range');\n    }\n  }\n}\n\nfunction checkRange(matrix, startRow, endRow, startColumn, endColumn) {\n  if (arguments.length !== 5) {\n    throw new RangeError('expected 4 arguments');\n  }\n  checkNumber('startRow', startRow);\n  checkNumber('endRow', endRow);\n  checkNumber('startColumn', startColumn);\n  checkNumber('endColumn', endColumn);\n  if (\n    startRow > endRow ||\n    startColumn > endColumn ||\n    startRow < 0 ||\n    startRow >= matrix.rows ||\n    endRow < 0 ||\n    endRow >= matrix.rows ||\n    startColumn < 0 ||\n    startColumn >= matrix.columns ||\n    endColumn < 0 ||\n    endColumn >= matrix.columns\n  ) {\n    throw new RangeError('Submatrix indices are out of range');\n  }\n}\n\nfunction newArray(length, value = 0) {\n  let array = [];\n  for (let i = 0; i < length; i++) {\n    array.push(value);\n  }\n  return array;\n}\n\nfunction checkNumber(name, value) {\n  if (typeof value !== 'number') {\n    throw new TypeError(`${name} must be a number`);\n  }\n}\n\nfunction checkNonEmpty(matrix) {\n  if (matrix.isEmpty()) {\n    throw new Error('Empty matrix has no elements to index');\n  }\n}\n\nfunction sumByRow(matrix) {\n  let sum = newArray(matrix.rows);\n  for (let i = 0; i < matrix.rows; ++i) {\n    for (let j = 0; j < matrix.columns; ++j) {\n      sum[i] += matrix.get(i, j);\n    }\n  }\n  return sum;\n}\n\nfunction sumByColumn(matrix) {\n  let sum = newArray(matrix.columns);\n  for (let i = 0; i < matrix.rows; ++i) {\n    for (let j = 0; j < matrix.columns; ++j) {\n      sum[j] += matrix.get(i, j);\n    }\n  }\n  return sum;\n}\n\nfunction sumAll(matrix) {\n  let v = 0;\n  for (let i = 0; i < matrix.rows; i++) {\n    for (let j = 0; j < matrix.columns; j++) {\n      v += matrix.get(i, j);\n    }\n  }\n  return v;\n}\n\nfunction productByRow(matrix) {\n  let sum = newArray(matrix.rows, 1);\n  for (let i = 0; i < matrix.rows; ++i) {\n    for (let j = 0; j < matrix.columns; ++j) {\n      sum[i] *= matrix.get(i, j);\n    }\n  }\n  return sum;\n}\n\nfunction productByColumn(matrix) {\n  let sum = newArray(matrix.columns, 1);\n  for (let i = 0; i < matrix.rows; ++i) {\n    for (let j = 0; j < matrix.columns; ++j) {\n      sum[j] *= matrix.get(i, j);\n    }\n  }\n  return sum;\n}\n\nfunction productAll(matrix) {\n  let v = 1;\n  for (let i = 0; i < matrix.rows; i++) {\n    for (let j = 0; j < matrix.columns; j++) {\n      v *= matrix.get(i, j);\n    }\n  }\n  return v;\n}\n\nfunction varianceByRow(matrix, unbiased, mean) {\n  const rows = matrix.rows;\n  const cols = matrix.columns;\n  const variance = [];\n\n  for (let i = 0; i < rows; i++) {\n    let sum1 = 0;\n    let sum2 = 0;\n    let x = 0;\n    for (let j = 0; j < cols; j++) {\n      x = matrix.get(i, j) - mean[i];\n      sum1 += x;\n      sum2 += x * x;\n    }\n    if (unbiased) {\n      variance.push((sum2 - (sum1 * sum1) / cols) / (cols - 1));\n    } else {\n      variance.push((sum2 - (sum1 * sum1) / cols) / cols);\n    }\n  }\n  return variance;\n}\n\nfunction varianceByColumn(matrix, unbiased, mean) {\n  const rows = matrix.rows;\n  const cols = matrix.columns;\n  const variance = [];\n\n  for (let j = 0; j < cols; j++) {\n    let sum1 = 0;\n    let sum2 = 0;\n    let x = 0;\n    for (let i = 0; i < rows; i++) {\n      x = matrix.get(i, j) - mean[j];\n      sum1 += x;\n      sum2 += x * x;\n    }\n    if (unbiased) {\n      variance.push((sum2 - (sum1 * sum1) / rows) / (rows - 1));\n    } else {\n      variance.push((sum2 - (sum1 * sum1) / rows) / rows);\n    }\n  }\n  return variance;\n}\n\nfunction varianceAll(matrix, unbiased, mean) {\n  const rows = matrix.rows;\n  const cols = matrix.columns;\n  const size = rows * cols;\n\n  let sum1 = 0;\n  let sum2 = 0;\n  let x = 0;\n  for (let i = 0; i < rows; i++) {\n    for (let j = 0; j < cols; j++) {\n      x = matrix.get(i, j) - mean;\n      sum1 += x;\n      sum2 += x * x;\n    }\n  }\n  if (unbiased) {\n    return (sum2 - (sum1 * sum1) / size) / (size - 1);\n  } else {\n    return (sum2 - (sum1 * sum1) / size) / size;\n  }\n}\n\nfunction centerByRow(matrix, mean) {\n  for (let i = 0; i < matrix.rows; i++) {\n    for (let j = 0; j < matrix.columns; j++) {\n      matrix.set(i, j, matrix.get(i, j) - mean[i]);\n    }\n  }\n}\n\nfunction centerByColumn(matrix, mean) {\n  for (let i = 0; i < matrix.rows; i++) {\n    for (let j = 0; j < matrix.columns; j++) {\n      matrix.set(i, j, matrix.get(i, j) - mean[j]);\n    }\n  }\n}\n\nfunction centerAll(matrix, mean) {\n  for (let i = 0; i < matrix.rows; i++) {\n    for (let j = 0; j < matrix.columns; j++) {\n      matrix.set(i, j, matrix.get(i, j) - mean);\n    }\n  }\n}\n\nfunction getScaleByRow(matrix) {\n  const scale = [];\n  for (let i = 0; i < matrix.rows; i++) {\n    let sum = 0;\n    for (let j = 0; j < matrix.columns; j++) {\n      sum += matrix.get(i, j) ** 2 / (matrix.columns - 1);\n    }\n    scale.push(Math.sqrt(sum));\n  }\n  return scale;\n}\n\nfunction scaleByRow(matrix, scale) {\n  for (let i = 0; i < matrix.rows; i++) {\n    for (let j = 0; j < matrix.columns; j++) {\n      matrix.set(i, j, matrix.get(i, j) / scale[i]);\n    }\n  }\n}\n\nfunction getScaleByColumn(matrix) {\n  const scale = [];\n  for (let j = 0; j < matrix.columns; j++) {\n    let sum = 0;\n    for (let i = 0; i < matrix.rows; i++) {\n      sum += matrix.get(i, j) ** 2 / (matrix.rows - 1);\n    }\n    scale.push(Math.sqrt(sum));\n  }\n  return scale;\n}\n\nfunction scaleByColumn(matrix, scale) {\n  for (let i = 0; i < matrix.rows; i++) {\n    for (let j = 0; j < matrix.columns; j++) {\n      matrix.set(i, j, matrix.get(i, j) / scale[j]);\n    }\n  }\n}\n\nfunction getScaleAll(matrix) {\n  const divider = matrix.size - 1;\n  let sum = 0;\n  for (let j = 0; j < matrix.columns; j++) {\n    for (let i = 0; i < matrix.rows; i++) {\n      sum += matrix.get(i, j) ** 2 / divider;\n    }\n  }\n  return Math.sqrt(sum);\n}\n\nfunction scaleAll(matrix, scale) {\n  for (let i = 0; i < matrix.rows; i++) {\n    for (let j = 0; j < matrix.columns; j++) {\n      matrix.set(i, j, matrix.get(i, j) / scale);\n    }\n  }\n}\n\nclass AbstractMatrix {\n  static from1DArray(newRows, newColumns, newData) {\n    let length = newRows * newColumns;\n    if (length !== newData.length) {\n      throw new RangeError('data length does not match given dimensions');\n    }\n    let newMatrix = new Matrix(newRows, newColumns);\n    for (let row = 0; row < newRows; row++) {\n      for (let column = 0; column < newColumns; column++) {\n        newMatrix.set(row, column, newData[row * newColumns + column]);\n      }\n    }\n    return newMatrix;\n  }\n\n  static rowVector(newData) {\n    let vector = new Matrix(1, newData.length);\n    for (let i = 0; i < newData.length; i++) {\n      vector.set(0, i, newData[i]);\n    }\n    return vector;\n  }\n\n  static columnVector(newData) {\n    let vector = new Matrix(newData.length, 1);\n    for (let i = 0; i < newData.length; i++) {\n      vector.set(i, 0, newData[i]);\n    }\n    return vector;\n  }\n\n  static zeros(rows, columns) {\n    return new Matrix(rows, columns);\n  }\n\n  static ones(rows, columns) {\n    return new Matrix(rows, columns).fill(1);\n  }\n\n  static rand(rows, columns, options = {}) {\n    if (typeof options !== 'object') {\n      throw new TypeError('options must be an object');\n    }\n    const { random = Math.random } = options;\n    let matrix = new Matrix(rows, columns);\n    for (let i = 0; i < rows; i++) {\n      for (let j = 0; j < columns; j++) {\n        matrix.set(i, j, random());\n      }\n    }\n    return matrix;\n  }\n\n  static randInt(rows, columns, options = {}) {\n    if (typeof options !== 'object') {\n      throw new TypeError('options must be an object');\n    }\n    const { min = 0, max = 1000, random = Math.random } = options;\n    if (!Number.isInteger(min)) throw new TypeError('min must be an integer');\n    if (!Number.isInteger(max)) throw new TypeError('max must be an integer');\n    if (min >= max) throw new RangeError('min must be smaller than max');\n    let interval = max - min;\n    let matrix = new Matrix(rows, columns);\n    for (let i = 0; i < rows; i++) {\n      for (let j = 0; j < columns; j++) {\n        let value = min + Math.round(random() * interval);\n        matrix.set(i, j, value);\n      }\n    }\n    return matrix;\n  }\n\n  static eye(rows, columns, value) {\n    if (columns === undefined) columns = rows;\n    if (value === undefined) value = 1;\n    let min = Math.min(rows, columns);\n    let matrix = this.zeros(rows, columns);\n    for (let i = 0; i < min; i++) {\n      matrix.set(i, i, value);\n    }\n    return matrix;\n  }\n\n  static diag(data, rows, columns) {\n    let l = data.length;\n    if (rows === undefined) rows = l;\n    if (columns === undefined) columns = rows;\n    let min = Math.min(l, rows, columns);\n    let matrix = this.zeros(rows, columns);\n    for (let i = 0; i < min; i++) {\n      matrix.set(i, i, data[i]);\n    }\n    return matrix;\n  }\n\n  static min(matrix1, matrix2) {\n    matrix1 = this.checkMatrix(matrix1);\n    matrix2 = this.checkMatrix(matrix2);\n    let rows = matrix1.rows;\n    let columns = matrix1.columns;\n    let result = new Matrix(rows, columns);\n    for (let i = 0; i < rows; i++) {\n      for (let j = 0; j < columns; j++) {\n        result.set(i, j, Math.min(matrix1.get(i, j), matrix2.get(i, j)));\n      }\n    }\n    return result;\n  }\n\n  static max(matrix1, matrix2) {\n    matrix1 = this.checkMatrix(matrix1);\n    matrix2 = this.checkMatrix(matrix2);\n    let rows = matrix1.rows;\n    let columns = matrix1.columns;\n    let result = new this(rows, columns);\n    for (let i = 0; i < rows; i++) {\n      for (let j = 0; j < columns; j++) {\n        result.set(i, j, Math.max(matrix1.get(i, j), matrix2.get(i, j)));\n      }\n    }\n    return result;\n  }\n\n  static checkMatrix(value) {\n    return AbstractMatrix.isMatrix(value) ? value : new Matrix(value);\n  }\n\n  static isMatrix(value) {\n    return value != null && value.klass === 'Matrix';\n  }\n\n  get size() {\n    return this.rows * this.columns;\n  }\n\n  apply(callback) {\n    if (typeof callback !== 'function') {\n      throw new TypeError('callback must be a function');\n    }\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        callback.call(this, i, j);\n      }\n    }\n    return this;\n  }\n\n  to1DArray() {\n    let array = [];\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        array.push(this.get(i, j));\n      }\n    }\n    return array;\n  }\n\n  to2DArray() {\n    let copy = [];\n    for (let i = 0; i < this.rows; i++) {\n      copy.push([]);\n      for (let j = 0; j < this.columns; j++) {\n        copy[i].push(this.get(i, j));\n      }\n    }\n    return copy;\n  }\n\n  toJSON() {\n    return this.to2DArray();\n  }\n\n  isRowVector() {\n    return this.rows === 1;\n  }\n\n  isColumnVector() {\n    return this.columns === 1;\n  }\n\n  isVector() {\n    return this.rows === 1 || this.columns === 1;\n  }\n\n  isSquare() {\n    return this.rows === this.columns;\n  }\n\n  isEmpty() {\n    return this.rows === 0 || this.columns === 0;\n  }\n\n  isSymmetric() {\n    if (this.isSquare()) {\n      for (let i = 0; i < this.rows; i++) {\n        for (let j = 0; j <= i; j++) {\n          if (this.get(i, j) !== this.get(j, i)) {\n            return false;\n          }\n        }\n      }\n      return true;\n    }\n    return false;\n  }\n\n  isDistance() {\n    if (!this.isSymmetric()) return false;\n\n    for (let i = 0; i < this.rows; i++) {\n      if (this.get(i, i) !== 0) return false;\n    }\n\n    return true;\n  }\n\n  isEchelonForm() {\n    let i = 0;\n    let j = 0;\n    let previousColumn = -1;\n    let isEchelonForm = true;\n    let checked = false;\n    while (i < this.rows && isEchelonForm) {\n      j = 0;\n      checked = false;\n      while (j < this.columns && checked === false) {\n        if (this.get(i, j) === 0) {\n          j++;\n        } else if (this.get(i, j) === 1 && j > previousColumn) {\n          checked = true;\n          previousColumn = j;\n        } else {\n          isEchelonForm = false;\n          checked = true;\n        }\n      }\n      i++;\n    }\n    return isEchelonForm;\n  }\n\n  isReducedEchelonForm() {\n    let i = 0;\n    let j = 0;\n    let previousColumn = -1;\n    let isReducedEchelonForm = true;\n    let checked = false;\n    while (i < this.rows && isReducedEchelonForm) {\n      j = 0;\n      checked = false;\n      while (j < this.columns && checked === false) {\n        if (this.get(i, j) === 0) {\n          j++;\n        } else if (this.get(i, j) === 1 && j > previousColumn) {\n          checked = true;\n          previousColumn = j;\n        } else {\n          isReducedEchelonForm = false;\n          checked = true;\n        }\n      }\n      for (let k = j + 1; k < this.rows; k++) {\n        if (this.get(i, k) !== 0) {\n          isReducedEchelonForm = false;\n        }\n      }\n      i++;\n    }\n    return isReducedEchelonForm;\n  }\n\n  echelonForm() {\n    let result = this.clone();\n    let h = 0;\n    let k = 0;\n    while (h < result.rows && k < result.columns) {\n      let iMax = h;\n      for (let i = h; i < result.rows; i++) {\n        if (result.get(i, k) > result.get(iMax, k)) {\n          iMax = i;\n        }\n      }\n      if (result.get(iMax, k) === 0) {\n        k++;\n      } else {\n        result.swapRows(h, iMax);\n        let tmp = result.get(h, k);\n        for (let j = k; j < result.columns; j++) {\n          result.set(h, j, result.get(h, j) / tmp);\n        }\n        for (let i = h + 1; i < result.rows; i++) {\n          let factor = result.get(i, k) / result.get(h, k);\n          result.set(i, k, 0);\n          for (let j = k + 1; j < result.columns; j++) {\n            result.set(i, j, result.get(i, j) - result.get(h, j) * factor);\n          }\n        }\n        h++;\n        k++;\n      }\n    }\n    return result;\n  }\n\n  reducedEchelonForm() {\n    let result = this.echelonForm();\n    let m = result.columns;\n    let n = result.rows;\n    let h = n - 1;\n    while (h >= 0) {\n      if (result.maxRow(h) === 0) {\n        h--;\n      } else {\n        let p = 0;\n        let pivot = false;\n        while (p < n && pivot === false) {\n          if (result.get(h, p) === 1) {\n            pivot = true;\n          } else {\n            p++;\n          }\n        }\n        for (let i = 0; i < h; i++) {\n          let factor = result.get(i, p);\n          for (let j = p; j < m; j++) {\n            let tmp = result.get(i, j) - factor * result.get(h, j);\n            result.set(i, j, tmp);\n          }\n        }\n        h--;\n      }\n    }\n    return result;\n  }\n\n  set() {\n    throw new Error('set method is unimplemented');\n  }\n\n  get() {\n    throw new Error('get method is unimplemented');\n  }\n\n  repeat(options = {}) {\n    if (typeof options !== 'object') {\n      throw new TypeError('options must be an object');\n    }\n    const { rows = 1, columns = 1 } = options;\n    if (!Number.isInteger(rows) || rows <= 0) {\n      throw new TypeError('rows must be a positive integer');\n    }\n    if (!Number.isInteger(columns) || columns <= 0) {\n      throw new TypeError('columns must be a positive integer');\n    }\n    let matrix = new Matrix(this.rows * rows, this.columns * columns);\n    for (let i = 0; i < rows; i++) {\n      for (let j = 0; j < columns; j++) {\n        matrix.setSubMatrix(this, this.rows * i, this.columns * j);\n      }\n    }\n    return matrix;\n  }\n\n  fill(value) {\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, value);\n      }\n    }\n    return this;\n  }\n\n  neg() {\n    return this.mulS(-1);\n  }\n\n  getRow(index) {\n    checkRowIndex(this, index);\n    let row = [];\n    for (let i = 0; i < this.columns; i++) {\n      row.push(this.get(index, i));\n    }\n    return row;\n  }\n\n  getRowVector(index) {\n    return Matrix.rowVector(this.getRow(index));\n  }\n\n  setRow(index, array) {\n    checkRowIndex(this, index);\n    array = checkRowVector(this, array);\n    for (let i = 0; i < this.columns; i++) {\n      this.set(index, i, array[i]);\n    }\n    return this;\n  }\n\n  swapRows(row1, row2) {\n    checkRowIndex(this, row1);\n    checkRowIndex(this, row2);\n    for (let i = 0; i < this.columns; i++) {\n      let temp = this.get(row1, i);\n      this.set(row1, i, this.get(row2, i));\n      this.set(row2, i, temp);\n    }\n    return this;\n  }\n\n  getColumn(index) {\n    checkColumnIndex(this, index);\n    let column = [];\n    for (let i = 0; i < this.rows; i++) {\n      column.push(this.get(i, index));\n    }\n    return column;\n  }\n\n  getColumnVector(index) {\n    return Matrix.columnVector(this.getColumn(index));\n  }\n\n  setColumn(index, array) {\n    checkColumnIndex(this, index);\n    array = checkColumnVector(this, array);\n    for (let i = 0; i < this.rows; i++) {\n      this.set(i, index, array[i]);\n    }\n    return this;\n  }\n\n  swapColumns(column1, column2) {\n    checkColumnIndex(this, column1);\n    checkColumnIndex(this, column2);\n    for (let i = 0; i < this.rows; i++) {\n      let temp = this.get(i, column1);\n      this.set(i, column1, this.get(i, column2));\n      this.set(i, column2, temp);\n    }\n    return this;\n  }\n\n  addRowVector(vector) {\n    vector = checkRowVector(this, vector);\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) + vector[j]);\n      }\n    }\n    return this;\n  }\n\n  subRowVector(vector) {\n    vector = checkRowVector(this, vector);\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) - vector[j]);\n      }\n    }\n    return this;\n  }\n\n  mulRowVector(vector) {\n    vector = checkRowVector(this, vector);\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) * vector[j]);\n      }\n    }\n    return this;\n  }\n\n  divRowVector(vector) {\n    vector = checkRowVector(this, vector);\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) / vector[j]);\n      }\n    }\n    return this;\n  }\n\n  addColumnVector(vector) {\n    vector = checkColumnVector(this, vector);\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) + vector[i]);\n      }\n    }\n    return this;\n  }\n\n  subColumnVector(vector) {\n    vector = checkColumnVector(this, vector);\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) - vector[i]);\n      }\n    }\n    return this;\n  }\n\n  mulColumnVector(vector) {\n    vector = checkColumnVector(this, vector);\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) * vector[i]);\n      }\n    }\n    return this;\n  }\n\n  divColumnVector(vector) {\n    vector = checkColumnVector(this, vector);\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        this.set(i, j, this.get(i, j) / vector[i]);\n      }\n    }\n    return this;\n  }\n\n  mulRow(index, value) {\n    checkRowIndex(this, index);\n    for (let i = 0; i < this.columns; i++) {\n      this.set(index, i, this.get(index, i) * value);\n    }\n    return this;\n  }\n\n  mulColumn(index, value) {\n    checkColumnIndex(this, index);\n    for (let i = 0; i < this.rows; i++) {\n      this.set(i, index, this.get(i, index) * value);\n    }\n    return this;\n  }\n\n  max(by) {\n    if (this.isEmpty()) {\n      return NaN;\n    }\n    switch (by) {\n      case 'row': {\n        const max = new Array(this.rows).fill(Number.NEGATIVE_INFINITY);\n        for (let row = 0; row < this.rows; row++) {\n          for (let column = 0; column < this.columns; column++) {\n            if (this.get(row, column) > max[row]) {\n              max[row] = this.get(row, column);\n            }\n          }\n        }\n        return max;\n      }\n      case 'column': {\n        const max = new Array(this.columns).fill(Number.NEGATIVE_INFINITY);\n        for (let row = 0; row < this.rows; row++) {\n          for (let column = 0; column < this.columns; column++) {\n            if (this.get(row, column) > max[column]) {\n              max[column] = this.get(row, column);\n            }\n          }\n        }\n        return max;\n      }\n      case undefined: {\n        let max = this.get(0, 0);\n        for (let row = 0; row < this.rows; row++) {\n          for (let column = 0; column < this.columns; column++) {\n            if (this.get(row, column) > max) {\n              max = this.get(row, column);\n            }\n          }\n        }\n        return max;\n      }\n      default:\n        throw new Error(`invalid option: ${by}`);\n    }\n  }\n\n  maxIndex() {\n    checkNonEmpty(this);\n    let v = this.get(0, 0);\n    let idx = [0, 0];\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        if (this.get(i, j) > v) {\n          v = this.get(i, j);\n          idx[0] = i;\n          idx[1] = j;\n        }\n      }\n    }\n    return idx;\n  }\n\n  min(by) {\n    if (this.isEmpty()) {\n      return NaN;\n    }\n\n    switch (by) {\n      case 'row': {\n        const min = new Array(this.rows).fill(Number.POSITIVE_INFINITY);\n        for (let row = 0; row < this.rows; row++) {\n          for (let column = 0; column < this.columns; column++) {\n            if (this.get(row, column) < min[row]) {\n              min[row] = this.get(row, column);\n            }\n          }\n        }\n        return min;\n      }\n      case 'column': {\n        const min = new Array(this.columns).fill(Number.POSITIVE_INFINITY);\n        for (let row = 0; row < this.rows; row++) {\n          for (let column = 0; column < this.columns; column++) {\n            if (this.get(row, column) < min[column]) {\n              min[column] = this.get(row, column);\n            }\n          }\n        }\n        return min;\n      }\n      case undefined: {\n        let min = this.get(0, 0);\n        for (let row = 0; row < this.rows; row++) {\n          for (let column = 0; column < this.columns; column++) {\n            if (this.get(row, column) < min) {\n              min = this.get(row, column);\n            }\n          }\n        }\n        return min;\n      }\n      default:\n        throw new Error(`invalid option: ${by}`);\n    }\n  }\n\n  minIndex() {\n    checkNonEmpty(this);\n    let v = this.get(0, 0);\n    let idx = [0, 0];\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        if (this.get(i, j) < v) {\n          v = this.get(i, j);\n          idx[0] = i;\n          idx[1] = j;\n        }\n      }\n    }\n    return idx;\n  }\n\n  maxRow(row) {\n    checkRowIndex(this, row);\n    if (this.isEmpty()) {\n      return NaN;\n    }\n    let v = this.get(row, 0);\n    for (let i = 1; i < this.columns; i++) {\n      if (this.get(row, i) > v) {\n        v = this.get(row, i);\n      }\n    }\n    return v;\n  }\n\n  maxRowIndex(row) {\n    checkRowIndex(this, row);\n    checkNonEmpty(this);\n    let v = this.get(row, 0);\n    let idx = [row, 0];\n    for (let i = 1; i < this.columns; i++) {\n      if (this.get(row, i) > v) {\n        v = this.get(row, i);\n        idx[1] = i;\n      }\n    }\n    return idx;\n  }\n\n  minRow(row) {\n    checkRowIndex(this, row);\n    if (this.isEmpty()) {\n      return NaN;\n    }\n    let v = this.get(row, 0);\n    for (let i = 1; i < this.columns; i++) {\n      if (this.get(row, i) < v) {\n        v = this.get(row, i);\n      }\n    }\n    return v;\n  }\n\n  minRowIndex(row) {\n    checkRowIndex(this, row);\n    checkNonEmpty(this);\n    let v = this.get(row, 0);\n    let idx = [row, 0];\n    for (let i = 1; i < this.columns; i++) {\n      if (this.get(row, i) < v) {\n        v = this.get(row, i);\n        idx[1] = i;\n      }\n    }\n    return idx;\n  }\n\n  maxColumn(column) {\n    checkColumnIndex(this, column);\n    if (this.isEmpty()) {\n      return NaN;\n    }\n    let v = this.get(0, column);\n    for (let i = 1; i < this.rows; i++) {\n      if (this.get(i, column) > v) {\n        v = this.get(i, column);\n      }\n    }\n    return v;\n  }\n\n  maxColumnIndex(column) {\n    checkColumnIndex(this, column);\n    checkNonEmpty(this);\n    let v = this.get(0, column);\n    let idx = [0, column];\n    for (let i = 1; i < this.rows; i++) {\n      if (this.get(i, column) > v) {\n        v = this.get(i, column);\n        idx[0] = i;\n      }\n    }\n    return idx;\n  }\n\n  minColumn(column) {\n    checkColumnIndex(this, column);\n    if (this.isEmpty()) {\n      return NaN;\n    }\n    let v = this.get(0, column);\n    for (let i = 1; i < this.rows; i++) {\n      if (this.get(i, column) < v) {\n        v = this.get(i, column);\n      }\n    }\n    return v;\n  }\n\n  minColumnIndex(column) {\n    checkColumnIndex(this, column);\n    checkNonEmpty(this);\n    let v = this.get(0, column);\n    let idx = [0, column];\n    for (let i = 1; i < this.rows; i++) {\n      if (this.get(i, column) < v) {\n        v = this.get(i, column);\n        idx[0] = i;\n      }\n    }\n    return idx;\n  }\n\n  diag() {\n    let min = Math.min(this.rows, this.columns);\n    let diag = [];\n    for (let i = 0; i < min; i++) {\n      diag.push(this.get(i, i));\n    }\n    return diag;\n  }\n\n  norm(type = 'frobenius') {\n    switch (type) {\n      case 'max':\n        return this.max();\n      case 'frobenius':\n        return Math.sqrt(this.dot(this));\n      default:\n        throw new RangeError(`unknown norm type: ${type}`);\n    }\n  }\n\n  cumulativeSum() {\n    let sum = 0;\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        sum += this.get(i, j);\n        this.set(i, j, sum);\n      }\n    }\n    return this;\n  }\n\n  dot(vector2) {\n    if (AbstractMatrix.isMatrix(vector2)) vector2 = vector2.to1DArray();\n    let vector1 = this.to1DArray();\n    if (vector1.length !== vector2.length) {\n      throw new RangeError('vectors do not have the same size');\n    }\n    let dot = 0;\n    for (let i = 0; i < vector1.length; i++) {\n      dot += vector1[i] * vector2[i];\n    }\n    return dot;\n  }\n\n  mmul(other) {\n    other = Matrix.checkMatrix(other);\n\n    let m = this.rows;\n    let n = this.columns;\n    let p = other.columns;\n\n    let result = new Matrix(m, p);\n\n    let Bcolj = new Float64Array(n);\n    for (let j = 0; j < p; j++) {\n      for (let k = 0; k < n; k++) {\n        Bcolj[k] = other.get(k, j);\n      }\n\n      for (let i = 0; i < m; i++) {\n        let s = 0;\n        for (let k = 0; k < n; k++) {\n          s += this.get(i, k) * Bcolj[k];\n        }\n\n        result.set(i, j, s);\n      }\n    }\n    return result;\n  }\n\n  mpow(scalar) {\n    if (!this.isSquare()) {\n      throw new RangeError('Matrix must be square');\n    }\n    if (!Number.isInteger(scalar) || scalar < 0) {\n      throw new RangeError('Exponent must be a non-negative integer');\n    }\n    // Russian Peasant exponentiation, i.e. exponentiation by squaring\n    let result = Matrix.eye(this.rows);\n    let bb = this;\n    // Note: Don't bit shift. In JS, that would truncate at 32 bits\n    for (let e = scalar; e >= 1; e /= 2) {\n      if ((e & 1) !== 0) {\n        result = result.mmul(bb);\n      }\n      bb = bb.mmul(bb);\n    }\n    return result;\n  }\n\n  strassen2x2(other) {\n    other = Matrix.checkMatrix(other);\n    let result = new Matrix(2, 2);\n    const a11 = this.get(0, 0);\n    const b11 = other.get(0, 0);\n    const a12 = this.get(0, 1);\n    const b12 = other.get(0, 1);\n    const a21 = this.get(1, 0);\n    const b21 = other.get(1, 0);\n    const a22 = this.get(1, 1);\n    const b22 = other.get(1, 1);\n\n    // Compute intermediate values.\n    const m1 = (a11 + a22) * (b11 + b22);\n    const m2 = (a21 + a22) * b11;\n    const m3 = a11 * (b12 - b22);\n    const m4 = a22 * (b21 - b11);\n    const m5 = (a11 + a12) * b22;\n    const m6 = (a21 - a11) * (b11 + b12);\n    const m7 = (a12 - a22) * (b21 + b22);\n\n    // Combine intermediate values into the output.\n    const c00 = m1 + m4 - m5 + m7;\n    const c01 = m3 + m5;\n    const c10 = m2 + m4;\n    const c11 = m1 - m2 + m3 + m6;\n\n    result.set(0, 0, c00);\n    result.set(0, 1, c01);\n    result.set(1, 0, c10);\n    result.set(1, 1, c11);\n    return result;\n  }\n\n  strassen3x3(other) {\n    other = Matrix.checkMatrix(other);\n    let result = new Matrix(3, 3);\n\n    const a00 = this.get(0, 0);\n    const a01 = this.get(0, 1);\n    const a02 = this.get(0, 2);\n    const a10 = this.get(1, 0);\n    const a11 = this.get(1, 1);\n    const a12 = this.get(1, 2);\n    const a20 = this.get(2, 0);\n    const a21 = this.get(2, 1);\n    const a22 = this.get(2, 2);\n\n    const b00 = other.get(0, 0);\n    const b01 = other.get(0, 1);\n    const b02 = other.get(0, 2);\n    const b10 = other.get(1, 0);\n    const b11 = other.get(1, 1);\n    const b12 = other.get(1, 2);\n    const b20 = other.get(2, 0);\n    const b21 = other.get(2, 1);\n    const b22 = other.get(2, 2);\n\n    const m1 = (a00 + a01 + a02 - a10 - a11 - a21 - a22) * b11;\n    const m2 = (a00 - a10) * (-b01 + b11);\n    const m3 = a11 * (-b00 + b01 + b10 - b11 - b12 - b20 + b22);\n    const m4 = (-a00 + a10 + a11) * (b00 - b01 + b11);\n    const m5 = (a10 + a11) * (-b00 + b01);\n    const m6 = a00 * b00;\n    const m7 = (-a00 + a20 + a21) * (b00 - b02 + b12);\n    const m8 = (-a00 + a20) * (b02 - b12);\n    const m9 = (a20 + a21) * (-b00 + b02);\n    const m10 = (a00 + a01 + a02 - a11 - a12 - a20 - a21) * b12;\n    const m11 = a21 * (-b00 + b02 + b10 - b11 - b12 - b20 + b21);\n    const m12 = (-a02 + a21 + a22) * (b11 + b20 - b21);\n    const m13 = (a02 - a22) * (b11 - b21);\n    const m14 = a02 * b20;\n    const m15 = (a21 + a22) * (-b20 + b21);\n    const m16 = (-a02 + a11 + a12) * (b12 + b20 - b22);\n    const m17 = (a02 - a12) * (b12 - b22);\n    const m18 = (a11 + a12) * (-b20 + b22);\n    const m19 = a01 * b10;\n    const m20 = a12 * b21;\n    const m21 = a10 * b02;\n    const m22 = a20 * b01;\n    const m23 = a22 * b22;\n\n    const c00 = m6 + m14 + m19;\n    const c01 = m1 + m4 + m5 + m6 + m12 + m14 + m15;\n    const c02 = m6 + m7 + m9 + m10 + m14 + m16 + m18;\n    const c10 = m2 + m3 + m4 + m6 + m14 + m16 + m17;\n    const c11 = m2 + m4 + m5 + m6 + m20;\n    const c12 = m14 + m16 + m17 + m18 + m21;\n    const c20 = m6 + m7 + m8 + m11 + m12 + m13 + m14;\n    const c21 = m12 + m13 + m14 + m15 + m22;\n    const c22 = m6 + m7 + m8 + m9 + m23;\n\n    result.set(0, 0, c00);\n    result.set(0, 1, c01);\n    result.set(0, 2, c02);\n    result.set(1, 0, c10);\n    result.set(1, 1, c11);\n    result.set(1, 2, c12);\n    result.set(2, 0, c20);\n    result.set(2, 1, c21);\n    result.set(2, 2, c22);\n    return result;\n  }\n\n  mmulStrassen(y) {\n    y = Matrix.checkMatrix(y);\n    let x = this.clone();\n    let r1 = x.rows;\n    let c1 = x.columns;\n    let r2 = y.rows;\n    let c2 = y.columns;\n    if (c1 !== r2) {\n      // eslint-disable-next-line no-console\n      console.warn(\n        `Multiplying ${r1} x ${c1} and ${r2} x ${c2} matrix: dimensions do not match.`,\n      );\n    }\n\n    // Put a matrix into the top left of a matrix of zeros.\n    // `rows` and `cols` are the dimensions of the output matrix.\n    function embed(mat, rows, cols) {\n      let r = mat.rows;\n      let c = mat.columns;\n      if (r === rows && c === cols) {\n        return mat;\n      } else {\n        let resultat = AbstractMatrix.zeros(rows, cols);\n        resultat = resultat.setSubMatrix(mat, 0, 0);\n        return resultat;\n      }\n    }\n\n    // Make sure both matrices are the same size.\n    // This is exclusively for simplicity:\n    // this algorithm can be implemented with matrices of different sizes.\n\n    let r = Math.max(r1, r2);\n    let c = Math.max(c1, c2);\n    x = embed(x, r, c);\n    y = embed(y, r, c);\n\n    // Our recursive multiplication function.\n    function blockMult(a, b, rows, cols) {\n      // For small matrices, resort to naive multiplication.\n      if (rows <= 512 || cols <= 512) {\n        return a.mmul(b); // a is equivalent to this\n      }\n\n      // Apply dynamic padding.\n      if (rows % 2 === 1 && cols % 2 === 1) {\n        a = embed(a, rows + 1, cols + 1);\n        b = embed(b, rows + 1, cols + 1);\n      } else if (rows % 2 === 1) {\n        a = embed(a, rows + 1, cols);\n        b = embed(b, rows + 1, cols);\n      } else if (cols % 2 === 1) {\n        a = embed(a, rows, cols + 1);\n        b = embed(b, rows, cols + 1);\n      }\n\n      let halfRows = parseInt(a.rows / 2, 10);\n      let halfCols = parseInt(a.columns / 2, 10);\n      // Subdivide input matrices.\n      let a11 = a.subMatrix(0, halfRows - 1, 0, halfCols - 1);\n      let b11 = b.subMatrix(0, halfRows - 1, 0, halfCols - 1);\n\n      let a12 = a.subMatrix(0, halfRows - 1, halfCols, a.columns - 1);\n      let b12 = b.subMatrix(0, halfRows - 1, halfCols, b.columns - 1);\n\n      let a21 = a.subMatrix(halfRows, a.rows - 1, 0, halfCols - 1);\n      let b21 = b.subMatrix(halfRows, b.rows - 1, 0, halfCols - 1);\n\n      let a22 = a.subMatrix(halfRows, a.rows - 1, halfCols, a.columns - 1);\n      let b22 = b.subMatrix(halfRows, b.rows - 1, halfCols, b.columns - 1);\n\n      // Compute intermediate values.\n      let m1 = blockMult(\n        AbstractMatrix.add(a11, a22),\n        AbstractMatrix.add(b11, b22),\n        halfRows,\n        halfCols,\n      );\n      let m2 = blockMult(AbstractMatrix.add(a21, a22), b11, halfRows, halfCols);\n      let m3 = blockMult(a11, AbstractMatrix.sub(b12, b22), halfRows, halfCols);\n      let m4 = blockMult(a22, AbstractMatrix.sub(b21, b11), halfRows, halfCols);\n      let m5 = blockMult(AbstractMatrix.add(a11, a12), b22, halfRows, halfCols);\n      let m6 = blockMult(\n        AbstractMatrix.sub(a21, a11),\n        AbstractMatrix.add(b11, b12),\n        halfRows,\n        halfCols,\n      );\n      let m7 = blockMult(\n        AbstractMatrix.sub(a12, a22),\n        AbstractMatrix.add(b21, b22),\n        halfRows,\n        halfCols,\n      );\n\n      // Combine intermediate values into the output.\n      let c11 = AbstractMatrix.add(m1, m4);\n      c11.sub(m5);\n      c11.add(m7);\n      let c12 = AbstractMatrix.add(m3, m5);\n      let c21 = AbstractMatrix.add(m2, m4);\n      let c22 = AbstractMatrix.sub(m1, m2);\n      c22.add(m3);\n      c22.add(m6);\n\n      // Crop output to the desired size (undo dynamic padding).\n      let result = AbstractMatrix.zeros(2 * c11.rows, 2 * c11.columns);\n      result = result.setSubMatrix(c11, 0, 0);\n      result = result.setSubMatrix(c12, c11.rows, 0);\n      result = result.setSubMatrix(c21, 0, c11.columns);\n      result = result.setSubMatrix(c22, c11.rows, c11.columns);\n      return result.subMatrix(0, rows - 1, 0, cols - 1);\n    }\n\n    return blockMult(x, y, r, c);\n  }\n\n  scaleRows(options = {}) {\n    if (typeof options !== 'object') {\n      throw new TypeError('options must be an object');\n    }\n    const { min = 0, max = 1 } = options;\n    if (!Number.isFinite(min)) throw new TypeError('min must be a number');\n    if (!Number.isFinite(max)) throw new TypeError('max must be a number');\n    if (min >= max) throw new RangeError('min must be smaller than max');\n    let newMatrix = new Matrix(this.rows, this.columns);\n    for (let i = 0; i < this.rows; i++) {\n      const row = this.getRow(i);\n      if (row.length > 0) {\n        rescale(row, { min, max, output: row });\n      }\n      newMatrix.setRow(i, row);\n    }\n    return newMatrix;\n  }\n\n  scaleColumns(options = {}) {\n    if (typeof options !== 'object') {\n      throw new TypeError('options must be an object');\n    }\n    const { min = 0, max = 1 } = options;\n    if (!Number.isFinite(min)) throw new TypeError('min must be a number');\n    if (!Number.isFinite(max)) throw new TypeError('max must be a number');\n    if (min >= max) throw new RangeError('min must be smaller than max');\n    let newMatrix = new Matrix(this.rows, this.columns);\n    for (let i = 0; i < this.columns; i++) {\n      const column = this.getColumn(i);\n      if (column.length) {\n        rescale(column, {\n          min,\n          max,\n          output: column,\n        });\n      }\n      newMatrix.setColumn(i, column);\n    }\n    return newMatrix;\n  }\n\n  flipRows() {\n    const middle = Math.ceil(this.columns / 2);\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < middle; j++) {\n        let first = this.get(i, j);\n        let last = this.get(i, this.columns - 1 - j);\n        this.set(i, j, last);\n        this.set(i, this.columns - 1 - j, first);\n      }\n    }\n    return this;\n  }\n\n  flipColumns() {\n    const middle = Math.ceil(this.rows / 2);\n    for (let j = 0; j < this.columns; j++) {\n      for (let i = 0; i < middle; i++) {\n        let first = this.get(i, j);\n        let last = this.get(this.rows - 1 - i, j);\n        this.set(i, j, last);\n        this.set(this.rows - 1 - i, j, first);\n      }\n    }\n    return this;\n  }\n\n  kroneckerProduct(other) {\n    other = Matrix.checkMatrix(other);\n\n    let m = this.rows;\n    let n = this.columns;\n    let p = other.rows;\n    let q = other.columns;\n\n    let result = new Matrix(m * p, n * q);\n    for (let i = 0; i < m; i++) {\n      for (let j = 0; j < n; j++) {\n        for (let k = 0; k < p; k++) {\n          for (let l = 0; l < q; l++) {\n            result.set(p * i + k, q * j + l, this.get(i, j) * other.get(k, l));\n          }\n        }\n      }\n    }\n    return result;\n  }\n\n  kroneckerSum(other) {\n    other = Matrix.checkMatrix(other);\n    if (!this.isSquare() || !other.isSquare()) {\n      throw new Error('Kronecker Sum needs two Square Matrices');\n    }\n    let m = this.rows;\n    let n = other.rows;\n    let AxI = this.kroneckerProduct(Matrix.eye(n, n));\n    let IxB = Matrix.eye(m, m).kroneckerProduct(other);\n    return AxI.add(IxB);\n  }\n\n  transpose() {\n    let result = new Matrix(this.columns, this.rows);\n    for (let i = 0; i < this.rows; i++) {\n      for (let j = 0; j < this.columns; j++) {\n        result.set(j, i, this.get(i, j));\n      }\n    }\n    return result;\n  }\n\n  sortRows(compareFunction = compareNumbers) {\n    for (let i = 0; i < this.rows; i++) {\n      this.setRow(i, this.getRow(i).sort(compareFunction));\n    }\n    return this;\n  }\n\n  sortColumns(compareFunction = compareNumbers) {\n    for (let i = 0; i < this.columns; i++) {\n      this.setColumn(i, this.getColumn(i).sort(compareFunction));\n    }\n    return this;\n  }\n\n  subMatrix(startRow, endRow, startColumn, endColumn) {\n    checkRange(this, startRow, endRow, startColumn, endColumn);\n    let newMatrix = new Matrix(\n      endRow - startRow + 1,\n      endColumn - startColumn + 1,\n    );\n    for (let i = startRow; i <= endRow; i++) {\n      for (let j = startColumn; j <= endColumn; j++) {\n        newMatrix.set(i - startRow, j - startColumn, this.get(i, j));\n      }\n    }\n    return newMatrix;\n  }\n\n  subMatrixRow(indices, startColumn, endColumn) {\n    if (startColumn === undefined) startColumn = 0;\n    if (endColumn === undefined) endColumn = this.columns - 1;\n    if (\n      startColumn > endColumn ||\n      startColumn < 0 ||\n      startColumn >= this.columns ||\n      endColumn < 0 ||\n      endColumn >= this.columns\n    ) {\n      throw new RangeError('Argument out of range');\n    }\n\n    let newMatrix = new Matrix(indices.length, endColumn - startColumn + 1);\n    for (let i = 0; i < indices.length; i++) {\n      for (let j = startColumn; j <= endColumn; j++) {\n        if (indices[i] < 0 || indices[i] >= this.rows) {\n          throw new RangeError(`Row index out of range: ${indices[i]}`);\n        }\n        newMatrix.set(i, j - startColumn, this.get(indices[i], j));\n      }\n    }\n    return newMatrix;\n  }\n\n  subMatrixColumn(indices, startRow, endRow) {\n    if (startRow === undefined) startRow = 0;\n    if (endRow === undefined) endRow = this.rows - 1;\n    if (\n      startRow > endRow ||\n      startRow < 0 ||\n      startRow >= this.rows ||\n      endRow < 0 ||\n      endRow >= this.rows\n    ) {\n      throw new RangeError('Argument out of range');\n    }\n\n    let newMatrix = new Matrix(endRow - startRow + 1, indices.length);\n    for (let i = 0; i < indices.length; i++) {\n      for (let j = startRow; j <= endRow; j++) {\n        if (indices[i] < 0 || indices[i] >= this.columns) {\n          throw new RangeError(`Column index out of range: ${indices[i]}`);\n        }\n        newMatrix.set(j - startRow, i, this.get(j, indices[i]));\n      }\n    }\n    return newMatrix;\n  }\n\n  setSubMatrix(matrix, startRow, startColumn) {\n    matrix = Matrix.checkMatrix(matrix);\n    if (matrix.isEmpty()) {\n      return this;\n    }\n    let endRow = startRow + matrix.rows - 1;\n    let endColumn = startColumn + matrix.columns - 1;\n    checkRange(this, startRow, endRow, startColumn, endColumn);\n    for (let i = 0; i < matrix.rows; i++) {\n      for (let j = 0; j < matrix.columns; j++) {\n        this.set(startRow + i, startColumn + j, matrix.get(i, j));\n      }\n    }\n    return this;\n  }\n\n  selection(rowIndices, columnIndices) {\n    checkRowIndices(this, rowIndices);\n    checkColumnIndices(this, columnIndices);\n    let newMatrix = new Matrix(rowIndices.length, columnIndices.length);\n    for (let i = 0; i < rowIndices.length; i++) {\n      let rowIndex = rowIndices[i];\n      for (let j = 0; j < columnIndices.length; j++) {\n        let columnIndex = columnIndices[j];\n        newMatrix.set(i, j, this.get(rowIndex, columnIndex));\n      }\n    }\n    return newMatrix;\n  }\n\n  trace() {\n    let min = Math.min(this.rows, this.columns);\n    let trace = 0;\n    for (let i = 0; i < min; i++) {\n      trace += this.get(i, i);\n    }\n    return trace;\n  }\n\n  clone() {\n    return this.constructor.copy(this, new Matrix(this.rows, this.columns));\n  }\n\n  /**\n   * @template {AbstractMatrix} M\n   * @param {AbstractMatrix} from\n   * @param {M} to\n   * @return {M}\n   */\n  static copy(from, to) {\n    for (const [row, column, value] of from.entries()) {\n      to.set(row, column, value);\n    }\n\n    return to;\n  }\n\n  sum(by) {\n    switch (by) {\n      case 'row':\n        return sumByRow(this);\n      case 'column':\n        return sumByColumn(this);\n      case undefined:\n        return sumAll(this);\n      default:\n        throw new Error(`invalid option: ${by}`);\n    }\n  }\n\n  product(by) {\n    switch (by) {\n      case 'row':\n        return productByRow(this);\n      case 'column':\n        return productByColumn(this);\n      case undefined:\n        return productAll(this);\n      default:\n        throw new Error(`invalid option: ${by}`);\n    }\n  }\n\n  mean(by) {\n    const sum = this.sum(by);\n    switch (by) {\n      case 'row': {\n        for (let i = 0; i < this.rows; i++) {\n          sum[i] /= this.columns;\n        }\n        return sum;\n      }\n      case 'column': {\n        for (let i = 0; i < this.columns; i++) {\n          sum[i] /= this.rows;\n        }\n        return sum;\n      }\n      case undefined:\n        return sum / this.size;\n      default:\n        throw new Error(`invalid option: ${by}`);\n    }\n  }\n\n  variance(by, options = {}) {\n    if (typeof by === 'object') {\n      options = by;\n      by = undefined;\n    }\n    if (typeof options !== 'object') {\n      throw new TypeError('options must be an object');\n    }\n    const { unbiased = true, mean = this.mean(by) } = options;\n    if (typeof unbiased !== 'boolean') {\n      throw new TypeError('unbiased must be a boolean');\n    }\n    switch (by) {\n      case 'row': {\n        if (!isAnyArray.isAnyArray(mean)) {\n          throw new TypeError('mean must be an array');\n        }\n        return varianceByRow(this, unbiased, mean);\n      }\n      case 'column': {\n        if (!isAnyArray.isAnyArray(mean)) {\n          throw new TypeError('mean must be an array');\n        }\n        return varianceByColumn(this, unbiased, mean);\n      }\n      case undefined: {\n        if (typeof mean !== 'number') {\n          throw new TypeError('mean must be a number');\n        }\n        return varianceAll(this, unbiased, mean);\n      }\n      default:\n        throw new Error(`invalid option: ${by}`);\n    }\n  }\n\n  standardDeviation(by, options) {\n    if (typeof by === 'object') {\n      options = by;\n      by = undefined;\n    }\n    const variance = this.variance(by, options);\n    if (by === undefined) {\n      return Math.sqrt(variance);\n    } else {\n      for (let i = 0; i < variance.length; i++) {\n        variance[i] = Math.sqrt(variance[i]);\n      }\n      return variance;\n    }\n  }\n\n  center(by, options = {}) {\n    if (typeof by === 'object') {\n      options = by;\n      by = undefined;\n    }\n    if (typeof options !== 'object') {\n      throw new TypeError('options must be an object');\n    }\n    const { center = this.mean(by) } = options;\n    switch (by) {\n      case 'row': {\n        if (!isAnyArray.isAnyArray(center)) {\n          throw new TypeError('center must be an array');\n        }\n        centerByRow(this, center);\n        return this;\n      }\n      case 'column': {\n        if (!isAnyArray.isAnyArray(center)) {\n          throw new TypeError('center must be an array');\n        }\n        centerByColumn(this, center);\n        return this;\n      }\n      case undefined: {\n        if (typeof center !== 'number') {\n          throw new TypeError('center must be a number');\n        }\n        centerAll(this, center);\n        return this;\n      }\n      default:\n        throw new Error(`invalid option: ${by}`);\n    }\n  }\n\n  scale(by, options = {}) {\n    if (typeof by === 'object') {\n      options = by;\n      by = undefined;\n    }\n    if (typeof options !== 'object') {\n      throw new TypeError('options must be an object');\n    }\n    let scale = options.scale;\n    switch (by) {\n      case 'row': {\n        if (scale === undefined) {\n          scale = getScaleByRow(this);\n        } else if (!isAnyArray.isAnyArray(scale)) {\n          throw new TypeError('scale must be an array');\n        }\n        scaleByRow(this, scale);\n        return this;\n      }\n      case 'column': {\n        if (scale === undefined) {\n          scale = getScaleByColumn(this);\n        } else if (!isAnyArray.isAnyArray(scale)) {\n          throw new TypeError('scale must be an array');\n        }\n        scaleByColumn(this, scale);\n        return this;\n      }\n      case undefined: {\n        if (scale === undefined) {\n          scale = getScaleAll(this);\n        } else if (typeof scale !== 'number') {\n          throw new TypeError('scale must be a number');\n        }\n        scaleAll(this, scale);\n        return this;\n      }\n      default:\n        throw new Error(`invalid option: ${by}`);\n    }\n  }\n\n  toString(options) {\n    return inspectMatrixWithOptions(this, options);\n  }\n\n  [Symbol.iterator]() {\n    return this.entries();\n  }\n\n  /**\n   * iterator from left to right, from top to bottom\n   * yield [row, column, value]\n   * @returns {Generator<[number, number, number], void, void>}\n   */\n  *entries() {\n    for (let row = 0; row < this.rows; row++) {\n      for (let col = 0; col < this.columns; col++) {\n        yield [row, col, this.get(row, col)];\n      }\n    }\n  }\n\n  /**\n   * iterator from left to right, from top to bottom\n   * yield value\n   * @returns {Generator<number, void, void>}\n   */\n  *values() {\n    for (let row = 0; row < this.rows; row++) {\n      for (let col = 0; col < this.columns; col++) {\n        yield this.get(row, col);\n      }\n    }\n  }\n}\n\nAbstractMatrix.prototype.klass = 'Matrix';\nif (typeof Symbol !== 'undefined') {\n  AbstractMatrix.prototype[Symbol.for('nodejs.util.inspect.custom')] =\n    inspectMatrix;\n}\n\nfunction compareNumbers(a, b) {\n  return a - b;\n}\n\nfunction isArrayOfNumbers(array) {\n  return array.every((element) => {\n    return typeof element === 'number';\n  });\n}\n\n// Synonyms\nAbstractMatrix.random = AbstractMatrix.rand;\nAbstractMatrix.randomInt = AbstractMatrix.randInt;\nAbstractMatrix.diagonal = AbstractMatrix.diag;\nAbstractMatrix.prototype.diagonal = AbstractMatrix.prototype.diag;\nAbstractMatrix.identity = AbstractMatrix.eye;\nAbstractMatrix.prototype.negate = AbstractMatrix.prototype.neg;\nAbstractMatrix.prototype.tensorProduct =\n  AbstractMatrix.prototype.kroneckerProduct;\n\nclass Matrix extends AbstractMatrix {\n  /**\n   * @type {Float64Array[]}\n   */\n  data;\n\n  /**\n   * Init an empty matrix\n   * @param {number} nRows\n   * @param {number} nColumns\n   */\n  #initData(nRows, nColumns) {\n    this.data = [];\n\n    if (Number.isInteger(nColumns) && nColumns >= 0) {\n      for (let i = 0; i < nRows; i++) {\n        this.data.push(new Float64Array(nColumns));\n      }\n    } else {\n      throw new TypeError('nColumns must be a positive integer');\n    }\n\n    this.rows = nRows;\n    this.columns = nColumns;\n  }\n\n  constructor(nRows, nColumns) {\n    super();\n    if (Matrix.isMatrix(nRows)) {\n      this.#initData(nRows.rows, nRows.columns);\n      Matrix.copy(nRows, this);\n    } else if (Number.isInteger(nRows) && nRows >= 0) {\n      this.#initData(nRows, nColumns);\n    } else if (isAnyArray.isAnyArray(nRows)) {\n      // Copy the values from the 2D array\n      const arrayData = nRows;\n      nRows = arrayData.length;\n      nColumns = nRows ? arrayData[0].length : 0;\n      if (typeof nColumns !== 'number') {\n        throw new TypeError(\n          'Data must be a 2D array with at least one element',\n        );\n      }\n      this.data = [];\n\n      for (let i = 0; i < nRows; i++) {\n        if (arrayData[i].length !== nColumns) {\n          throw new RangeError('Inconsistent array dimensions');\n        }\n        if (!isArrayOfNumbers(arrayData[i])) {\n          throw new TypeError('Input data contains non-numeric values');\n        }\n        this.data.push(Float64Array.from(arrayData[i]));\n      }\n\n      this.rows = nRows;\n      this.columns = nColumns;\n    } else {\n      throw new TypeError(\n        'First argument must be a positive number or an array',\n      );\n    }\n  }\n\n  set(rowIndex, columnIndex, value) {\n    this.data[rowIndex][columnIndex] = value;\n    return this;\n  }\n\n  get(rowIndex, columnIndex) {\n    return this.data[rowIndex][columnIndex];\n  }\n\n  removeRow(index) {\n    checkRowIndex(this, index);\n    this.data.splice(index, 1);\n    this.rows -= 1;\n    return this;\n  }\n\n  addRow(index, array) {\n    if (array === undefined) {\n      array = index;\n      index = this.rows;\n    }\n    checkRowIndex(this, index, true);\n    array = Float64Array.from(checkRowVector(this, array));\n    this.data.splice(index, 0, array);\n    this.rows += 1;\n    return this;\n  }\n\n  removeColumn(index) {\n    checkColumnIndex(this, index);\n    for (let i = 0; i < this.rows; i++) {\n      const newRow = new Float64Array(this.columns - 1);\n      for (let j = 0; j < index; j++) {\n        newRow[j] = this.data[i][j];\n      }\n      for (let j = index + 1; j < this.columns; j++) {\n        newRow[j - 1] = this.data[i][j];\n      }\n      this.data[i] = newRow;\n    }\n    this.columns -= 1;\n    return this;\n  }\n\n  addColumn(index, array) {\n    if (typeof array === 'undefined') {\n      array = index;\n      index = this.columns;\n    }\n    checkColumnIndex(this, index, true);\n    array = checkColumnVector(this, array);\n    for (let i = 0; i < this.rows; i++) {\n      const newRow = new Float64Array(this.columns + 1);\n      let j = 0;\n      for (; j < index; j++) {\n        newRow[j] = this.data[i][j];\n      }\n      newRow[j++] = array[i];\n      for (; j < this.columns + 1; j++) {\n        newRow[j] = this.data[i][j - 1];\n      }\n      this.data[i] = newRow;\n    }\n    this.columns += 1;\n    return this;\n  }\n}\n\ninstallMathOperations(AbstractMatrix, Matrix);\n\n/**\n * @typedef {0 | 1 | number | boolean} Mask\n */\n\nclass SymmetricMatrix extends AbstractMatrix {\n  /** @type {Matrix} */\n  #matrix;\n\n  get size() {\n    return this.#matrix.size;\n  }\n\n  get rows() {\n    return this.#matrix.rows;\n  }\n\n  get columns() {\n    return this.#matrix.columns;\n  }\n\n  get diagonalSize() {\n    return this.rows;\n  }\n\n  /**\n   * not the same as matrix.isSymmetric()\n   * Here is to check if it's instanceof SymmetricMatrix without bundling issues\n   *\n   * @param value\n   * @returns {boolean}\n   */\n  static isSymmetricMatrix(value) {\n    return Matrix.isMatrix(value) && value.klassType === 'SymmetricMatrix';\n  }\n\n  /**\n   * @param diagonalSize\n   * @return {SymmetricMatrix}\n   */\n  static zeros(diagonalSize) {\n    return new this(diagonalSize);\n  }\n\n  /**\n   * @param diagonalSize\n   * @return {SymmetricMatrix}\n   */\n  static ones(diagonalSize) {\n    return new this(diagonalSize).fill(1);\n  }\n\n  /**\n   * @param {number | AbstractMatrix | ArrayLike<ArrayLike<number>>} diagonalSize\n   * @return {this}\n   */\n  constructor(diagonalSize) {\n    super();\n\n    if (Matrix.isMatrix(diagonalSize)) {\n      if (!diagonalSize.isSymmetric()) {\n        throw new TypeError('not symmetric data');\n      }\n\n      this.#matrix = Matrix.copy(\n        diagonalSize,\n        new Matrix(diagonalSize.rows, diagonalSize.rows),\n      );\n    } else if (Number.isInteger(diagonalSize) && diagonalSize >= 0) {\n      this.#matrix = new Matrix(diagonalSize, diagonalSize);\n    } else {\n      this.#matrix = new Matrix(diagonalSize);\n\n      if (!this.isSymmetric()) {\n        throw new TypeError('not symmetric data');\n      }\n    }\n  }\n\n  clone() {\n    const matrix = new SymmetricMatrix(this.diagonalSize);\n\n    for (const [row, col, value] of this.upperRightEntries()) {\n      matrix.set(row, col, value);\n    }\n\n    return matrix;\n  }\n\n  toMatrix() {\n    return new Matrix(this);\n  }\n\n  get(rowIndex, columnIndex) {\n    return this.#matrix.get(rowIndex, columnIndex);\n  }\n  set(rowIndex, columnIndex, value) {\n    // symmetric set\n    this.#matrix.set(rowIndex, columnIndex, value);\n    this.#matrix.set(columnIndex, rowIndex, value);\n\n    return this;\n  }\n\n  removeCross(index) {\n    // symmetric remove side\n    this.#matrix.removeRow(index);\n    this.#matrix.removeColumn(index);\n\n    return this;\n  }\n\n  addCross(index, array) {\n    if (array === undefined) {\n      array = index;\n      index = this.diagonalSize;\n    }\n\n    const row = array.slice();\n    row.splice(index, 1);\n\n    this.#matrix.addRow(index, row);\n    this.#matrix.addColumn(index, array);\n\n    return this;\n  }\n\n  /**\n   * @param {Mask[]} mask\n   */\n  applyMask(mask) {\n    if (mask.length !== this.diagonalSize) {\n      throw new RangeError('Mask size do not match with matrix size');\n    }\n\n    // prepare sides to remove from matrix from mask\n    /** @type {number[]} */\n    const sidesToRemove = [];\n    for (const [index, passthroughs] of mask.entries()) {\n      if (passthroughs) continue;\n      sidesToRemove.push(index);\n    }\n    // to remove from highest to lowest for no mutation shifting\n    sidesToRemove.reverse();\n\n    // remove sides\n    for (const sideIndex of sidesToRemove) {\n      this.removeCross(sideIndex);\n    }\n\n    return this;\n  }\n\n  /**\n   * Compact format upper-right corner of matrix\n   * iterate from left to right, from top to bottom.\n   *\n   * ```\n   *   A B C D\n   * A 1 2 3 4\n   * B 2 5 6 7\n   * C 3 6 8 9\n   * D 4 7 9 10\n   * ```\n   *\n   * will return compact 1D array `[1, 2, 3, 4, 5, 6, 7, 8, 9, 10]`\n   *\n   * length is S(i=0, n=sideSize) => 10 for a 4 sideSized matrix\n   *\n   * @returns {number[]}\n   */\n  toCompact() {\n    const { diagonalSize } = this;\n\n    /** @type {number[]} */\n    const compact = new Array((diagonalSize * (diagonalSize + 1)) / 2);\n    for (let col = 0, row = 0, index = 0; index < compact.length; index++) {\n      compact[index] = this.get(row, col);\n\n      if (++col >= diagonalSize) col = ++row;\n    }\n\n    return compact;\n  }\n\n  /**\n   * @param {number[]} compact\n   * @return {SymmetricMatrix}\n   */\n  static fromCompact(compact) {\n    const compactSize = compact.length;\n    // compactSize = (sideSize * (sideSize + 1)) / 2\n    // https://mathsolver.microsoft.com/fr/solve-problem/y%20%3D%20%20x%20%60cdot%20%20%20%60frac%7B%20%20%60left(%20x%2B1%20%20%60right)%20%20%20%20%7D%7B%202%20%20%7D\n    // sideSize = (Sqrt(8  compactSize + 1) - 1) / 2\n    const diagonalSize = (Math.sqrt(8 * compactSize + 1) - 1) / 2;\n\n    if (!Number.isInteger(diagonalSize)) {\n      throw new TypeError(\n        `This array is not a compact representation of a Symmetric Matrix, ${JSON.stringify(\n          compact,\n        )}`,\n      );\n    }\n\n    const matrix = new SymmetricMatrix(diagonalSize);\n    for (let col = 0, row = 0, index = 0; index < compactSize; index++) {\n      matrix.set(col, row, compact[index]);\n      if (++col >= diagonalSize) col = ++row;\n    }\n\n    return matrix;\n  }\n\n  /**\n   * half iterator upper-right-corner from left to right, from top to bottom\n   * yield [row, column, value]\n   *\n   * @returns {Generator<[number, number, number], void, void>}\n   */\n  *upperRightEntries() {\n    for (let row = 0, col = 0; row < this.diagonalSize; void 0) {\n      const value = this.get(row, col);\n\n      yield [row, col, value];\n\n      // at the end of row, move cursor to next row at diagonal position\n      if (++col >= this.diagonalSize) col = ++row;\n    }\n  }\n\n  /**\n   * half iterator upper-right-corner from left to right, from top to bottom\n   * yield value\n   *\n   * @returns {Generator<[number, number, number], void, void>}\n   */\n  *upperRightValues() {\n    for (let row = 0, col = 0; row < this.diagonalSize; void 0) {\n      const value = this.get(row, col);\n\n      yield value;\n\n      // at the end of row, move cursor to next row at diagonal position\n      if (++col >= this.diagonalSize) col = ++row;\n    }\n  }\n}\nSymmetricMatrix.prototype.klassType = 'SymmetricMatrix';\n\nclass DistanceMatrix extends SymmetricMatrix {\n  /**\n   * not the same as matrix.isSymmetric()\n   * Here is to check if it's instanceof SymmetricMatrix without bundling issues\n   *\n   * @param value\n   * @returns {boolean}\n   */\n  static isDistanceMatrix(value) {\n    return (\n      SymmetricMatrix.isSymmetricMatrix(value) &&\n      value.klassSubType === 'DistanceMatrix'\n    );\n  }\n\n  constructor(sideSize) {\n    super(sideSize);\n\n    if (!this.isDistance()) {\n      throw new TypeError('Provided arguments do no produce a distance matrix');\n    }\n  }\n\n  set(rowIndex, columnIndex, value) {\n    // distance matrix diagonal is 0\n    if (rowIndex === columnIndex) value = 0;\n\n    return super.set(rowIndex, columnIndex, value);\n  }\n\n  addCross(index, array) {\n    if (array === undefined) {\n      array = index;\n      index = this.diagonalSize;\n    }\n\n    // ensure distance\n    array = array.slice();\n    array[index] = 0;\n\n    return super.addCross(index, array);\n  }\n\n  toSymmetricMatrix() {\n    return new SymmetricMatrix(this);\n  }\n\n  clone() {\n    const matrix = new DistanceMatrix(this.diagonalSize);\n\n    for (const [row, col, value] of this.upperRightEntries()) {\n      if (row === col) continue;\n      matrix.set(row, col, value);\n    }\n\n    return matrix;\n  }\n\n  /**\n   * Compact format upper-right corner of matrix\n   * no diagonal (only zeros)\n   * iterable from left to right, from top to bottom.\n   *\n   * ```\n   *   A B C D\n   * A 0 1 2 3\n   * B 1 0 4 5\n   * C 2 4 0 6\n   * D 3 5 6 0\n   * ```\n   *\n   * will return compact 1D array `[1, 2, 3, 4, 5, 6]`\n   *\n   * length is S(i=0, n=sideSize-1) => 6 for a 4 side sized matrix\n   *\n   * @returns {number[]}\n   */\n  toCompact() {\n    const { diagonalSize } = this;\n    const compactLength = ((diagonalSize - 1) * diagonalSize) / 2;\n\n    /** @type {number[]} */\n    const compact = new Array(compactLength);\n    for (let col = 1, row = 0, index = 0; index < compact.length; index++) {\n      compact[index] = this.get(row, col);\n\n      if (++col >= diagonalSize) col = ++row + 1;\n    }\n\n    return compact;\n  }\n\n  /**\n   * @param {number[]} compact\n   */\n  static fromCompact(compact) {\n    const compactSize = compact.length;\n\n    if (compactSize === 0) {\n      return new this(0);\n    }\n\n    // compactSize in Natural integer range ]0;]\n    // compactSize = (sideSize * (sideSize - 1)) / 2\n    // sideSize = (Sqrt(8  compactSize + 1) + 1) / 2\n    const diagonalSize = (Math.sqrt(8 * compactSize + 1) + 1) / 2;\n\n    if (!Number.isInteger(diagonalSize)) {\n      throw new TypeError(\n        `This array is not a compact representation of a DistanceMatrix, ${JSON.stringify(\n          compact,\n        )}`,\n      );\n    }\n\n    const matrix = new this(diagonalSize);\n    for (let col = 1, row = 0, index = 0; index < compactSize; index++) {\n      matrix.set(col, row, compact[index]);\n      if (++col >= diagonalSize) col = ++row + 1;\n    }\n\n    return matrix;\n  }\n}\nDistanceMatrix.prototype.klassSubType = 'DistanceMatrix';\n\nclass BaseView extends AbstractMatrix {\n  constructor(matrix, rows, columns) {\n    super();\n    this.matrix = matrix;\n    this.rows = rows;\n    this.columns = columns;\n  }\n}\n\nclass MatrixColumnView extends BaseView {\n  constructor(matrix, column) {\n    checkColumnIndex(matrix, column);\n    super(matrix, matrix.rows, 1);\n    this.column = column;\n  }\n\n  set(rowIndex, columnIndex, value) {\n    this.matrix.set(rowIndex, this.column, value);\n    return this;\n  }\n\n  get(rowIndex) {\n    return this.matrix.get(rowIndex, this.column);\n  }\n}\n\nclass MatrixColumnSelectionView extends BaseView {\n  constructor(matrix, columnIndices) {\n    checkColumnIndices(matrix, columnIndices);\n    super(matrix, matrix.rows, columnIndices.length);\n    this.columnIndices = columnIndices;\n  }\n\n  set(rowIndex, columnIndex, value) {\n    this.matrix.set(rowIndex, this.columnIndices[columnIndex], value);\n    return this;\n  }\n\n  get(rowIndex, columnIndex) {\n    return this.matrix.get(rowIndex, this.columnIndices[columnIndex]);\n  }\n}\n\nclass MatrixFlipColumnView extends BaseView {\n  constructor(matrix) {\n    super(matrix, matrix.rows, matrix.columns);\n  }\n\n  set(rowIndex, columnIndex, value) {\n    this.matrix.set(rowIndex, this.columns - columnIndex - 1, value);\n    return this;\n  }\n\n  get(rowIndex, columnIndex) {\n    return this.matrix.get(rowIndex, this.columns - columnIndex - 1);\n  }\n}\n\nclass MatrixFlipRowView extends BaseView {\n  constructor(matrix) {\n    super(matrix, matrix.rows, matrix.columns);\n  }\n\n  set(rowIndex, columnIndex, value) {\n    this.matrix.set(this.rows - rowIndex - 1, columnIndex, value);\n    return this;\n  }\n\n  get(rowIndex, columnIndex) {\n    return this.matrix.get(this.rows - rowIndex - 1, columnIndex);\n  }\n}\n\nclass MatrixRowView extends BaseView {\n  constructor(matrix, row) {\n    checkRowIndex(matrix, row);\n    super(matrix, 1, matrix.columns);\n    this.row = row;\n  }\n\n  set(rowIndex, columnIndex, value) {\n    this.matrix.set(this.row, columnIndex, value);\n    return this;\n  }\n\n  get(rowIndex, columnIndex) {\n    return this.matrix.get(this.row, columnIndex);\n  }\n}\n\nclass MatrixRowSelectionView extends BaseView {\n  constructor(matrix, rowIndices) {\n    checkRowIndices(matrix, rowIndices);\n    super(matrix, rowIndices.length, matrix.columns);\n    this.rowIndices = rowIndices;\n  }\n\n  set(rowIndex, columnIndex, value) {\n    this.matrix.set(this.rowIndices[rowIndex], columnIndex, value);\n    return this;\n  }\n\n  get(rowIndex, columnIndex) {\n    return this.matrix.get(this.rowIndices[rowIndex], columnIndex);\n  }\n}\n\nclass MatrixSelectionView extends BaseView {\n  constructor(matrix, rowIndices, columnIndices) {\n    checkRowIndices(matrix, rowIndices);\n    checkColumnIndices(matrix, columnIndices);\n    super(matrix, rowIndices.length, columnIndices.length);\n    this.rowIndices = rowIndices;\n    this.columnIndices = columnIndices;\n  }\n\n  set(rowIndex, columnIndex, value) {\n    this.matrix.set(\n      this.rowIndices[rowIndex],\n      this.columnIndices[columnIndex],\n      value,\n    );\n    return this;\n  }\n\n  get(rowIndex, columnIndex) {\n    return this.matrix.get(\n      this.rowIndices[rowIndex],\n      this.columnIndices[columnIndex],\n    );\n  }\n}\n\nclass MatrixSubView extends BaseView {\n  constructor(matrix, startRow, endRow, startColumn, endColumn) {\n    checkRange(matrix, startRow, endRow, startColumn, endColumn);\n    super(matrix, endRow - startRow + 1, endColumn - startColumn + 1);\n    this.startRow = startRow;\n    this.startColumn = startColumn;\n  }\n\n  set(rowIndex, columnIndex, value) {\n    this.matrix.set(\n      this.startRow + rowIndex,\n      this.startColumn + columnIndex,\n      value,\n    );\n    return this;\n  }\n\n  get(rowIndex, columnIndex) {\n    return this.matrix.get(\n      this.startRow + rowIndex,\n      this.startColumn + columnIndex,\n    );\n  }\n}\n\nclass MatrixTransposeView extends BaseView {\n  constructor(matrix) {\n    super(matrix, matrix.columns, matrix.rows);\n  }\n\n  set(rowIndex, columnIndex, value) {\n    this.matrix.set(columnIndex, rowIndex, value);\n    return this;\n  }\n\n  get(rowIndex, columnIndex) {\n    return this.matrix.get(columnIndex, rowIndex);\n  }\n}\n\nclass WrapperMatrix1D extends AbstractMatrix {\n  constructor(data, options = {}) {\n    const { rows = 1 } = options;\n\n    if (data.length % rows !== 0) {\n      throw new Error('the data length is not divisible by the number of rows');\n    }\n    super();\n    this.rows = rows;\n    this.columns = data.length / rows;\n    this.data = data;\n  }\n\n  set(rowIndex, columnIndex, value) {\n    let index = this._calculateIndex(rowIndex, columnIndex);\n    this.data[index] = value;\n    return this;\n  }\n\n  get(rowIndex, columnIndex) {\n    let index = this._calculateIndex(rowIndex, columnIndex);\n    return this.data[index];\n  }\n\n  _calculateIndex(row, column) {\n    return row * this.columns + column;\n  }\n}\n\nclass WrapperMatrix2D extends AbstractMatrix {\n  constructor(data) {\n    super();\n    this.data = data;\n    this.rows = data.length;\n    this.columns = data[0].length;\n  }\n\n  set(rowIndex, columnIndex, value) {\n    this.data[rowIndex][columnIndex] = value;\n    return this;\n  }\n\n  get(rowIndex, columnIndex) {\n    return this.data[rowIndex][columnIndex];\n  }\n}\n\nfunction wrap(array, options) {\n  if (isAnyArray.isAnyArray(array)) {\n    if (array[0] && isAnyArray.isAnyArray(array[0])) {\n      return new WrapperMatrix2D(array);\n    } else {\n      return new WrapperMatrix1D(array, options);\n    }\n  } else {\n    throw new Error('the argument is not an array');\n  }\n}\n\nclass LuDecomposition {\n  constructor(matrix) {\n    matrix = WrapperMatrix2D.checkMatrix(matrix);\n\n    let lu = matrix.clone();\n    let rows = lu.rows;\n    let columns = lu.columns;\n    let pivotVector = new Float64Array(rows);\n    let pivotSign = 1;\n    let i, j, k, p, s, t, v;\n    let LUcolj, kmax;\n\n    for (i = 0; i < rows; i++) {\n      pivotVector[i] = i;\n    }\n\n    LUcolj = new Float64Array(rows);\n\n    for (j = 0; j < columns; j++) {\n      for (i = 0; i < rows; i++) {\n        LUcolj[i] = lu.get(i, j);\n      }\n\n      for (i = 0; i < rows; i++) {\n        kmax = Math.min(i, j);\n        s = 0;\n        for (k = 0; k < kmax; k++) {\n          s += lu.get(i, k) * LUcolj[k];\n        }\n        LUcolj[i] -= s;\n        lu.set(i, j, LUcolj[i]);\n      }\n\n      p = j;\n      for (i = j + 1; i < rows; i++) {\n        if (Math.abs(LUcolj[i]) > Math.abs(LUcolj[p])) {\n          p = i;\n        }\n      }\n\n      if (p !== j) {\n        for (k = 0; k < columns; k++) {\n          t = lu.get(p, k);\n          lu.set(p, k, lu.get(j, k));\n          lu.set(j, k, t);\n        }\n\n        v = pivotVector[p];\n        pivotVector[p] = pivotVector[j];\n        pivotVector[j] = v;\n\n        pivotSign = -pivotSign;\n      }\n\n      if (j < rows && lu.get(j, j) !== 0) {\n        for (i = j + 1; i < rows; i++) {\n          lu.set(i, j, lu.get(i, j) / lu.get(j, j));\n        }\n      }\n    }\n\n    this.LU = lu;\n    this.pivotVector = pivotVector;\n    this.pivotSign = pivotSign;\n  }\n\n  isSingular() {\n    let data = this.LU;\n    let col = data.columns;\n    for (let j = 0; j < col; j++) {\n      if (data.get(j, j) === 0) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  solve(value) {\n    value = Matrix.checkMatrix(value);\n\n    let lu = this.LU;\n    let rows = lu.rows;\n\n    if (rows !== value.rows) {\n      throw new Error('Invalid matrix dimensions');\n    }\n    if (this.isSingular()) {\n      throw new Error('LU matrix is singular');\n    }\n\n    let count = value.columns;\n    let X = value.subMatrixRow(this.pivotVector, 0, count - 1);\n    let columns = lu.columns;\n    let i, j, k;\n\n    for (k = 0; k < columns; k++) {\n      for (i = k + 1; i < columns; i++) {\n        for (j = 0; j < count; j++) {\n          X.set(i, j, X.get(i, j) - X.get(k, j) * lu.get(i, k));\n        }\n      }\n    }\n    for (k = columns - 1; k >= 0; k--) {\n      for (j = 0; j < count; j++) {\n        X.set(k, j, X.get(k, j) / lu.get(k, k));\n      }\n      for (i = 0; i < k; i++) {\n        for (j = 0; j < count; j++) {\n          X.set(i, j, X.get(i, j) - X.get(k, j) * lu.get(i, k));\n        }\n      }\n    }\n    return X;\n  }\n\n  get determinant() {\n    let data = this.LU;\n    if (!data.isSquare()) {\n      throw new Error('Matrix must be square');\n    }\n    let determinant = this.pivotSign;\n    let col = data.columns;\n    for (let j = 0; j < col; j++) {\n      determinant *= data.get(j, j);\n    }\n    return determinant;\n  }\n\n  get lowerTriangularMatrix() {\n    let data = this.LU;\n    let rows = data.rows;\n    let columns = data.columns;\n    let X = new Matrix(rows, columns);\n    for (let i = 0; i < rows; i++) {\n      for (let j = 0; j < columns; j++) {\n        if (i > j) {\n          X.set(i, j, data.get(i, j));\n        } else if (i === j) {\n          X.set(i, j, 1);\n        } else {\n          X.set(i, j, 0);\n        }\n      }\n    }\n    return X;\n  }\n\n  get upperTriangularMatrix() {\n    let data = this.LU;\n    let rows = data.rows;\n    let columns = data.columns;\n    let X = new Matrix(rows, columns);\n    for (let i = 0; i < rows; i++) {\n      for (let j = 0; j < columns; j++) {\n        if (i <= j) {\n          X.set(i, j, data.get(i, j));\n        } else {\n          X.set(i, j, 0);\n        }\n      }\n    }\n    return X;\n  }\n\n  get pivotPermutationVector() {\n    return Array.from(this.pivotVector);\n  }\n}\n\nfunction hypotenuse(a, b) {\n  let r = 0;\n  if (Math.abs(a) > Math.abs(b)) {\n    r = b / a;\n    return Math.abs(a) * Math.sqrt(1 + r * r);\n  }\n  if (b !== 0) {\n    r = a / b;\n    return Math.abs(b) * Math.sqrt(1 + r * r);\n  }\n  return 0;\n}\n\nclass QrDecomposition {\n  constructor(value) {\n    value = WrapperMatrix2D.checkMatrix(value);\n\n    let qr = value.clone();\n    let m = value.rows;\n    let n = value.columns;\n    let rdiag = new Float64Array(n);\n    let i, j, k, s;\n\n    for (k = 0; k < n; k++) {\n      let nrm = 0;\n      for (i = k; i < m; i++) {\n        nrm = hypotenuse(nrm, qr.get(i, k));\n      }\n      if (nrm !== 0) {\n        if (qr.get(k, k) < 0) {\n          nrm = -nrm;\n        }\n        for (i = k; i < m; i++) {\n          qr.set(i, k, qr.get(i, k) / nrm);\n        }\n        qr.set(k, k, qr.get(k, k) + 1);\n        for (j = k + 1; j < n; j++) {\n          s = 0;\n          for (i = k; i < m; i++) {\n            s += qr.get(i, k) * qr.get(i, j);\n          }\n          s = -s / qr.get(k, k);\n          for (i = k; i < m; i++) {\n            qr.set(i, j, qr.get(i, j) + s * qr.get(i, k));\n          }\n        }\n      }\n      rdiag[k] = -nrm;\n    }\n\n    this.QR = qr;\n    this.Rdiag = rdiag;\n  }\n\n  solve(value) {\n    value = Matrix.checkMatrix(value);\n\n    let qr = this.QR;\n    let m = qr.rows;\n\n    if (value.rows !== m) {\n      throw new Error('Matrix row dimensions must agree');\n    }\n    if (!this.isFullRank()) {\n      throw new Error('Matrix is rank deficient');\n    }\n\n    let count = value.columns;\n    let X = value.clone();\n    let n = qr.columns;\n    let i, j, k, s;\n\n    for (k = 0; k < n; k++) {\n      for (j = 0; j < count; j++) {\n        s = 0;\n        for (i = k; i < m; i++) {\n          s += qr.get(i, k) * X.get(i, j);\n        }\n        s = -s / qr.get(k, k);\n        for (i = k; i < m; i++) {\n          X.set(i, j, X.get(i, j) + s * qr.get(i, k));\n        }\n      }\n    }\n    for (k = n - 1; k >= 0; k--) {\n      for (j = 0; j < count; j++) {\n        X.set(k, j, X.get(k, j) / this.Rdiag[k]);\n      }\n      for (i = 0; i < k; i++) {\n        for (j = 0; j < count; j++) {\n          X.set(i, j, X.get(i, j) - X.get(k, j) * qr.get(i, k));\n        }\n      }\n    }\n\n    return X.subMatrix(0, n - 1, 0, count - 1);\n  }\n\n  isFullRank() {\n    let columns = this.QR.columns;\n    for (let i = 0; i < columns; i++) {\n      if (this.Rdiag[i] === 0) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  get upperTriangularMatrix() {\n    let qr = this.QR;\n    let n = qr.columns;\n    let X = new Matrix(n, n);\n    let i, j;\n    for (i = 0; i < n; i++) {\n      for (j = 0; j < n; j++) {\n        if (i < j) {\n          X.set(i, j, qr.get(i, j));\n        } else if (i === j) {\n          X.set(i, j, this.Rdiag[i]);\n        } else {\n          X.set(i, j, 0);\n        }\n      }\n    }\n    return X;\n  }\n\n  get orthogonalMatrix() {\n    let qr = this.QR;\n    let rows = qr.rows;\n    let columns = qr.columns;\n    let X = new Matrix(rows, columns);\n    let i, j, k, s;\n\n    for (k = columns - 1; k >= 0; k--) {\n      for (i = 0; i < rows; i++) {\n        X.set(i, k, 0);\n      }\n      X.set(k, k, 1);\n      for (j = k; j < columns; j++) {\n        if (qr.get(k, k) !== 0) {\n          s = 0;\n          for (i = k; i < rows; i++) {\n            s += qr.get(i, k) * X.get(i, j);\n          }\n\n          s = -s / qr.get(k, k);\n\n          for (i = k; i < rows; i++) {\n            X.set(i, j, X.get(i, j) + s * qr.get(i, k));\n          }\n        }\n      }\n    }\n    return X;\n  }\n}\n\nclass SingularValueDecomposition {\n  constructor(value, options = {}) {\n    value = WrapperMatrix2D.checkMatrix(value);\n\n    if (value.isEmpty()) {\n      throw new Error('Matrix must be non-empty');\n    }\n\n    let m = value.rows;\n    let n = value.columns;\n\n    const {\n      computeLeftSingularVectors = true,\n      computeRightSingularVectors = true,\n      autoTranspose = false,\n    } = options;\n\n    let wantu = Boolean(computeLeftSingularVectors);\n    let wantv = Boolean(computeRightSingularVectors);\n\n    let swapped = false;\n    let a;\n    if (m < n) {\n      if (!autoTranspose) {\n        a = value.clone();\n        // eslint-disable-next-line no-console\n        console.warn(\n          'Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose',\n        );\n      } else {\n        a = value.transpose();\n        m = a.rows;\n        n = a.columns;\n        swapped = true;\n        let aux = wantu;\n        wantu = wantv;\n        wantv = aux;\n      }\n    } else {\n      a = value.clone();\n    }\n\n    let nu = Math.min(m, n);\n    let ni = Math.min(m + 1, n);\n    let s = new Float64Array(ni);\n    let U = new Matrix(m, nu);\n    let V = new Matrix(n, n);\n\n    let e = new Float64Array(n);\n    let work = new Float64Array(m);\n\n    let si = new Float64Array(ni);\n    for (let i = 0; i < ni; i++) si[i] = i;\n\n    let nct = Math.min(m - 1, n);\n    let nrt = Math.max(0, Math.min(n - 2, m));\n    let mrc = Math.max(nct, nrt);\n\n    for (let k = 0; k < mrc; k++) {\n      if (k < nct) {\n        s[k] = 0;\n        for (let i = k; i < m; i++) {\n          s[k] = hypotenuse(s[k], a.get(i, k));\n        }\n        if (s[k] !== 0) {\n          if (a.get(k, k) < 0) {\n            s[k] = -s[k];\n          }\n          for (let i = k; i < m; i++) {\n            a.set(i, k, a.get(i, k) / s[k]);\n          }\n          a.set(k, k, a.get(k, k) + 1);\n        }\n        s[k] = -s[k];\n      }\n\n      for (let j = k + 1; j < n; j++) {\n        if (k < nct && s[k] !== 0) {\n          let t = 0;\n          for (let i = k; i < m; i++) {\n            t += a.get(i, k) * a.get(i, j);\n          }\n          t = -t / a.get(k, k);\n          for (let i = k; i < m; i++) {\n            a.set(i, j, a.get(i, j) + t * a.get(i, k));\n          }\n        }\n        e[j] = a.get(k, j);\n      }\n\n      if (wantu && k < nct) {\n        for (let i = k; i < m; i++) {\n          U.set(i, k, a.get(i, k));\n        }\n      }\n\n      if (k < nrt) {\n        e[k] = 0;\n        for (let i = k + 1; i < n; i++) {\n          e[k] = hypotenuse(e[k], e[i]);\n        }\n        if (e[k] !== 0) {\n          if (e[k + 1] < 0) {\n            e[k] = 0 - e[k];\n          }\n          for (let i = k + 1; i < n; i++) {\n            e[i] /= e[k];\n          }\n          e[k + 1] += 1;\n        }\n        e[k] = -e[k];\n        if (k + 1 < m && e[k] !== 0) {\n          for (let i = k + 1; i < m; i++) {\n            work[i] = 0;\n          }\n          for (let i = k + 1; i < m; i++) {\n            for (let j = k + 1; j < n; j++) {\n              work[i] += e[j] * a.get(i, j);\n            }\n          }\n          for (let j = k + 1; j < n; j++) {\n            let t = -e[j] / e[k + 1];\n            for (let i = k + 1; i < m; i++) {\n              a.set(i, j, a.get(i, j) + t * work[i]);\n            }\n          }\n        }\n        if (wantv) {\n          for (let i = k + 1; i < n; i++) {\n            V.set(i, k, e[i]);\n          }\n        }\n      }\n    }\n\n    let p = Math.min(n, m + 1);\n    if (nct < n) {\n      s[nct] = a.get(nct, nct);\n    }\n    if (m < p) {\n      s[p - 1] = 0;\n    }\n    if (nrt + 1 < p) {\n      e[nrt] = a.get(nrt, p - 1);\n    }\n    e[p - 1] = 0;\n\n    if (wantu) {\n      for (let j = nct; j < nu; j++) {\n        for (let i = 0; i < m; i++) {\n          U.set(i, j, 0);\n        }\n        U.set(j, j, 1);\n      }\n      for (let k = nct - 1; k >= 0; k--) {\n        if (s[k] !== 0) {\n          for (let j = k + 1; j < nu; j++) {\n            let t = 0;\n            for (let i = k; i < m; i++) {\n              t += U.get(i, k) * U.get(i, j);\n            }\n            t = -t / U.get(k, k);\n            for (let i = k; i < m; i++) {\n              U.set(i, j, U.get(i, j) + t * U.get(i, k));\n            }\n          }\n          for (let i = k; i < m; i++) {\n            U.set(i, k, -U.get(i, k));\n          }\n          U.set(k, k, 1 + U.get(k, k));\n          for (let i = 0; i < k - 1; i++) {\n            U.set(i, k, 0);\n          }\n        } else {\n          for (let i = 0; i < m; i++) {\n            U.set(i, k, 0);\n          }\n          U.set(k, k, 1);\n        }\n      }\n    }\n\n    if (wantv) {\n      for (let k = n - 1; k >= 0; k--) {\n        if (k < nrt && e[k] !== 0) {\n          for (let j = k + 1; j < n; j++) {\n            let t = 0;\n            for (let i = k + 1; i < n; i++) {\n              t += V.get(i, k) * V.get(i, j);\n            }\n            t = -t / V.get(k + 1, k);\n            for (let i = k + 1; i < n; i++) {\n              V.set(i, j, V.get(i, j) + t * V.get(i, k));\n            }\n          }\n        }\n        for (let i = 0; i < n; i++) {\n          V.set(i, k, 0);\n        }\n        V.set(k, k, 1);\n      }\n    }\n\n    let pp = p - 1;\n    let eps = Number.EPSILON;\n    while (p > 0) {\n      let k, kase;\n      for (k = p - 2; k >= -1; k--) {\n        if (k === -1) {\n          break;\n        }\n        const alpha =\n          Number.MIN_VALUE + eps * Math.abs(s[k] + Math.abs(s[k + 1]));\n        if (Math.abs(e[k]) <= alpha || Number.isNaN(e[k])) {\n          e[k] = 0;\n          break;\n        }\n      }\n      if (k === p - 2) {\n        kase = 4;\n      } else {\n        let ks;\n        for (ks = p - 1; ks >= k; ks--) {\n          if (ks === k) {\n            break;\n          }\n          let t =\n            (ks !== p ? Math.abs(e[ks]) : 0) +\n            (ks !== k + 1 ? Math.abs(e[ks - 1]) : 0);\n          if (Math.abs(s[ks]) <= eps * t) {\n            s[ks] = 0;\n            break;\n          }\n        }\n        if (ks === k) {\n          kase = 3;\n        } else if (ks === p - 1) {\n          kase = 1;\n        } else {\n          kase = 2;\n          k = ks;\n        }\n      }\n\n      k++;\n\n      switch (kase) {\n        case 1: {\n          let f = e[p - 2];\n          e[p - 2] = 0;\n          for (let j = p - 2; j >= k; j--) {\n            let t = hypotenuse(s[j], f);\n            let cs = s[j] / t;\n            let sn = f / t;\n            s[j] = t;\n            if (j !== k) {\n              f = -sn * e[j - 1];\n              e[j - 1] = cs * e[j - 1];\n            }\n            if (wantv) {\n              for (let i = 0; i < n; i++) {\n                t = cs * V.get(i, j) + sn * V.get(i, p - 1);\n                V.set(i, p - 1, -sn * V.get(i, j) + cs * V.get(i, p - 1));\n                V.set(i, j, t);\n              }\n            }\n          }\n          break;\n        }\n        case 2: {\n          let f = e[k - 1];\n          e[k - 1] = 0;\n          for (let j = k; j < p; j++) {\n            let t = hypotenuse(s[j], f);\n            let cs = s[j] / t;\n            let sn = f / t;\n            s[j] = t;\n            f = -sn * e[j];\n            e[j] = cs * e[j];\n            if (wantu) {\n              for (let i = 0; i < m; i++) {\n                t = cs * U.get(i, j) + sn * U.get(i, k - 1);\n                U.set(i, k - 1, -sn * U.get(i, j) + cs * U.get(i, k - 1));\n                U.set(i, j, t);\n              }\n            }\n          }\n          break;\n        }\n        case 3: {\n          const scale = Math.max(\n            Math.abs(s[p - 1]),\n            Math.abs(s[p - 2]),\n            Math.abs(e[p - 2]),\n            Math.abs(s[k]),\n            Math.abs(e[k]),\n          );\n          const sp = s[p - 1] / scale;\n          const spm1 = s[p - 2] / scale;\n          const epm1 = e[p - 2] / scale;\n          const sk = s[k] / scale;\n          const ek = e[k] / scale;\n          const b = ((spm1 + sp) * (spm1 - sp) + epm1 * epm1) / 2;\n          const c = sp * epm1 * (sp * epm1);\n          let shift = 0;\n          if (b !== 0 || c !== 0) {\n            if (b < 0) {\n              shift = 0 - Math.sqrt(b * b + c);\n            } else {\n              shift = Math.sqrt(b * b + c);\n            }\n            shift = c / (b + shift);\n          }\n          let f = (sk + sp) * (sk - sp) + shift;\n          let g = sk * ek;\n          for (let j = k; j < p - 1; j++) {\n            let t = hypotenuse(f, g);\n            if (t === 0) t = Number.MIN_VALUE;\n            let cs = f / t;\n            let sn = g / t;\n            if (j !== k) {\n              e[j - 1] = t;\n            }\n            f = cs * s[j] + sn * e[j];\n            e[j] = cs * e[j] - sn * s[j];\n            g = sn * s[j + 1];\n            s[j + 1] = cs * s[j + 1];\n            if (wantv) {\n              for (let i = 0; i < n; i++) {\n                t = cs * V.get(i, j) + sn * V.get(i, j + 1);\n                V.set(i, j + 1, -sn * V.get(i, j) + cs * V.get(i, j + 1));\n                V.set(i, j, t);\n              }\n            }\n            t = hypotenuse(f, g);\n            if (t === 0) t = Number.MIN_VALUE;\n            cs = f / t;\n            sn = g / t;\n            s[j] = t;\n            f = cs * e[j] + sn * s[j + 1];\n            s[j + 1] = -sn * e[j] + cs * s[j + 1];\n            g = sn * e[j + 1];\n            e[j + 1] = cs * e[j + 1];\n            if (wantu && j < m - 1) {\n              for (let i = 0; i < m; i++) {\n                t = cs * U.get(i, j) + sn * U.get(i, j + 1);\n                U.set(i, j + 1, -sn * U.get(i, j) + cs * U.get(i, j + 1));\n                U.set(i, j, t);\n              }\n            }\n          }\n          e[p - 2] = f;\n          break;\n        }\n        case 4: {\n          if (s[k] <= 0) {\n            s[k] = s[k] < 0 ? -s[k] : 0;\n            if (wantv) {\n              for (let i = 0; i <= pp; i++) {\n                V.set(i, k, -V.get(i, k));\n              }\n            }\n          }\n          while (k < pp) {\n            if (s[k] >= s[k + 1]) {\n              break;\n            }\n            let t = s[k];\n            s[k] = s[k + 1];\n            s[k + 1] = t;\n            if (wantv && k < n - 1) {\n              for (let i = 0; i < n; i++) {\n                t = V.get(i, k + 1);\n                V.set(i, k + 1, V.get(i, k));\n                V.set(i, k, t);\n              }\n            }\n            if (wantu && k < m - 1) {\n              for (let i = 0; i < m; i++) {\n                t = U.get(i, k + 1);\n                U.set(i, k + 1, U.get(i, k));\n                U.set(i, k, t);\n              }\n            }\n            k++;\n          }\n          p--;\n          break;\n        }\n        // no default\n      }\n    }\n\n    if (swapped) {\n      let tmp = V;\n      V = U;\n      U = tmp;\n    }\n\n    this.m = m;\n    this.n = n;\n    this.s = s;\n    this.U = U;\n    this.V = V;\n  }\n\n  solve(value) {\n    let Y = value;\n    let e = this.threshold;\n    let scols = this.s.length;\n    let Ls = Matrix.zeros(scols, scols);\n\n    for (let i = 0; i < scols; i++) {\n      if (Math.abs(this.s[i]) <= e) {\n        Ls.set(i, i, 0);\n      } else {\n        Ls.set(i, i, 1 / this.s[i]);\n      }\n    }\n\n    let U = this.U;\n    let V = this.rightSingularVectors;\n\n    let VL = V.mmul(Ls);\n    let vrows = V.rows;\n    let urows = U.rows;\n    let VLU = Matrix.zeros(vrows, urows);\n\n    for (let i = 0; i < vrows; i++) {\n      for (let j = 0; j < urows; j++) {\n        let sum = 0;\n        for (let k = 0; k < scols; k++) {\n          sum += VL.get(i, k) * U.get(j, k);\n        }\n        VLU.set(i, j, sum);\n      }\n    }\n\n    return VLU.mmul(Y);\n  }\n\n  solveForDiagonal(value) {\n    return this.solve(Matrix.diag(value));\n  }\n\n  inverse() {\n    let V = this.V;\n    let e = this.threshold;\n    let vrows = V.rows;\n    let vcols = V.columns;\n    let X = new Matrix(vrows, this.s.length);\n\n    for (let i = 0; i < vrows; i++) {\n      for (let j = 0; j < vcols; j++) {\n        if (Math.abs(this.s[j]) > e) {\n          X.set(i, j, V.get(i, j) / this.s[j]);\n        }\n      }\n    }\n\n    let U = this.U;\n\n    let urows = U.rows;\n    let ucols = U.columns;\n    let Y = new Matrix(vrows, urows);\n\n    for (let i = 0; i < vrows; i++) {\n      for (let j = 0; j < urows; j++) {\n        let sum = 0;\n        for (let k = 0; k < ucols; k++) {\n          sum += X.get(i, k) * U.get(j, k);\n        }\n        Y.set(i, j, sum);\n      }\n    }\n\n    return Y;\n  }\n\n  get condition() {\n    return this.s[0] / this.s[Math.min(this.m, this.n) - 1];\n  }\n\n  get norm2() {\n    return this.s[0];\n  }\n\n  get rank() {\n    let tol = Math.max(this.m, this.n) * this.s[0] * Number.EPSILON;\n    let r = 0;\n    let s = this.s;\n    for (let i = 0, ii = s.length; i < ii; i++) {\n      if (s[i] > tol) {\n        r++;\n      }\n    }\n    return r;\n  }\n\n  get diagonal() {\n    return Array.from(this.s);\n  }\n\n  get threshold() {\n    return (Number.EPSILON / 2) * Math.max(this.m, this.n) * this.s[0];\n  }\n\n  get leftSingularVectors() {\n    return this.U;\n  }\n\n  get rightSingularVectors() {\n    return this.V;\n  }\n\n  get diagonalMatrix() {\n    return Matrix.diag(this.s);\n  }\n}\n\nfunction inverse(matrix, useSVD = false) {\n  matrix = WrapperMatrix2D.checkMatrix(matrix);\n  if (useSVD) {\n    return new SingularValueDecomposition(matrix).inverse();\n  } else {\n    return solve(matrix, Matrix.eye(matrix.rows));\n  }\n}\n\nfunction solve(leftHandSide, rightHandSide, useSVD = false) {\n  leftHandSide = WrapperMatrix2D.checkMatrix(leftHandSide);\n  rightHandSide = WrapperMatrix2D.checkMatrix(rightHandSide);\n  if (useSVD) {\n    return new SingularValueDecomposition(leftHandSide).solve(rightHandSide);\n  } else {\n    return leftHandSide.isSquare()\n      ? new LuDecomposition(leftHandSide).solve(rightHandSide)\n      : new QrDecomposition(leftHandSide).solve(rightHandSide);\n  }\n}\n\nfunction determinant(matrix) {\n  matrix = Matrix.checkMatrix(matrix);\n  if (matrix.isSquare()) {\n    if (matrix.columns === 0) {\n      return 1;\n    }\n\n    let a, b, c, d;\n    if (matrix.columns === 2) {\n      // 2 x 2 matrix\n      a = matrix.get(0, 0);\n      b = matrix.get(0, 1);\n      c = matrix.get(1, 0);\n      d = matrix.get(1, 1);\n\n      return a * d - b * c;\n    } else if (matrix.columns === 3) {\n      // 3 x 3 matrix\n      let subMatrix0, subMatrix1, subMatrix2;\n      subMatrix0 = new MatrixSelectionView(matrix, [1, 2], [1, 2]);\n      subMatrix1 = new MatrixSelectionView(matrix, [1, 2], [0, 2]);\n      subMatrix2 = new MatrixSelectionView(matrix, [1, 2], [0, 1]);\n      a = matrix.get(0, 0);\n      b = matrix.get(0, 1);\n      c = matrix.get(0, 2);\n\n      return (\n        a * determinant(subMatrix0) -\n        b * determinant(subMatrix1) +\n        c * determinant(subMatrix2)\n      );\n    } else {\n      // general purpose determinant using the LU decomposition\n      return new LuDecomposition(matrix).determinant;\n    }\n  } else {\n    throw Error('determinant can only be calculated for a square matrix');\n  }\n}\n\nfunction xrange(n, exception) {\n  let range = [];\n  for (let i = 0; i < n; i++) {\n    if (i !== exception) {\n      range.push(i);\n    }\n  }\n  return range;\n}\n\nfunction dependenciesOneRow(\n  error,\n  matrix,\n  index,\n  thresholdValue = 10e-10,\n  thresholdError = 10e-10,\n) {\n  if (error > thresholdError) {\n    return new Array(matrix.rows + 1).fill(0);\n  } else {\n    let returnArray = matrix.addRow(index, [0]);\n    for (let i = 0; i < returnArray.rows; i++) {\n      if (Math.abs(returnArray.get(i, 0)) < thresholdValue) {\n        returnArray.set(i, 0, 0);\n      }\n    }\n    return returnArray.to1DArray();\n  }\n}\n\nfunction linearDependencies(matrix, options = {}) {\n  const { thresholdValue = 10e-10, thresholdError = 10e-10 } = options;\n  matrix = Matrix.checkMatrix(matrix);\n\n  let n = matrix.rows;\n  let results = new Matrix(n, n);\n\n  for (let i = 0; i < n; i++) {\n    let b = Matrix.columnVector(matrix.getRow(i));\n    let Abis = matrix.subMatrixRow(xrange(n, i)).transpose();\n    let svd = new SingularValueDecomposition(Abis);\n    let x = svd.solve(b);\n    let error = Matrix.sub(b, Abis.mmul(x)).abs().max();\n    results.setRow(\n      i,\n      dependenciesOneRow(error, x, i, thresholdValue, thresholdError),\n    );\n  }\n  return results;\n}\n\nfunction pseudoInverse(matrix, threshold = Number.EPSILON) {\n  matrix = Matrix.checkMatrix(matrix);\n  if (matrix.isEmpty()) {\n    // with a zero dimension, the pseudo-inverse is the transpose, since all 0xn and nx0 matrices are singular\n    // (0xn)*(nx0)*(0xn) = 0xn\n    // (nx0)*(0xn)*(nx0) = nx0\n    return matrix.transpose();\n  }\n  let svdSolution = new SingularValueDecomposition(matrix, { autoTranspose: true });\n\n  let U = svdSolution.leftSingularVectors;\n  let V = svdSolution.rightSingularVectors;\n  let s = svdSolution.diagonal;\n\n  for (let i = 0; i < s.length; i++) {\n    if (Math.abs(s[i]) > threshold) {\n      s[i] = 1.0 / s[i];\n    } else {\n      s[i] = 0.0;\n    }\n  }\n\n  return V.mmul(Matrix.diag(s).mmul(U.transpose()));\n}\n\nfunction covariance(xMatrix, yMatrix = xMatrix, options = {}) {\n  xMatrix = new Matrix(xMatrix);\n  let yIsSame = false;\n  if (\n    typeof yMatrix === 'object' &&\n    !Matrix.isMatrix(yMatrix) &&\n    !isAnyArray.isAnyArray(yMatrix)\n  ) {\n    options = yMatrix;\n    yMatrix = xMatrix;\n    yIsSame = true;\n  } else {\n    yMatrix = new Matrix(yMatrix);\n  }\n  if (xMatrix.rows !== yMatrix.rows) {\n    throw new TypeError('Both matrices must have the same number of rows');\n  }\n  const { center = true } = options;\n  if (center) {\n    xMatrix = xMatrix.center('column');\n    if (!yIsSame) {\n      yMatrix = yMatrix.center('column');\n    }\n  }\n  const cov = xMatrix.transpose().mmul(yMatrix);\n  for (let i = 0; i < cov.rows; i++) {\n    for (let j = 0; j < cov.columns; j++) {\n      cov.set(i, j, cov.get(i, j) * (1 / (xMatrix.rows - 1)));\n    }\n  }\n  return cov;\n}\n\nfunction correlation(xMatrix, yMatrix = xMatrix, options = {}) {\n  xMatrix = new Matrix(xMatrix);\n  let yIsSame = false;\n  if (\n    typeof yMatrix === 'object' &&\n    !Matrix.isMatrix(yMatrix) &&\n    !isAnyArray.isAnyArray(yMatrix)\n  ) {\n    options = yMatrix;\n    yMatrix = xMatrix;\n    yIsSame = true;\n  } else {\n    yMatrix = new Matrix(yMatrix);\n  }\n  if (xMatrix.rows !== yMatrix.rows) {\n    throw new TypeError('Both matrices must have the same number of rows');\n  }\n\n  const { center = true, scale = true } = options;\n  if (center) {\n    xMatrix.center('column');\n    if (!yIsSame) {\n      yMatrix.center('column');\n    }\n  }\n  if (scale) {\n    xMatrix.scale('column');\n    if (!yIsSame) {\n      yMatrix.scale('column');\n    }\n  }\n\n  const sdx = xMatrix.standardDeviation('column', { unbiased: true });\n  const sdy = yIsSame\n    ? sdx\n    : yMatrix.standardDeviation('column', { unbiased: true });\n\n  const corr = xMatrix.transpose().mmul(yMatrix);\n  for (let i = 0; i < corr.rows; i++) {\n    for (let j = 0; j < corr.columns; j++) {\n      corr.set(\n        i,\n        j,\n        corr.get(i, j) * (1 / (sdx[i] * sdy[j])) * (1 / (xMatrix.rows - 1)),\n      );\n    }\n  }\n  return corr;\n}\n\nclass EigenvalueDecomposition {\n  constructor(matrix, options = {}) {\n    const { assumeSymmetric = false } = options;\n\n    matrix = WrapperMatrix2D.checkMatrix(matrix);\n    if (!matrix.isSquare()) {\n      throw new Error('Matrix is not a square matrix');\n    }\n\n    if (matrix.isEmpty()) {\n      throw new Error('Matrix must be non-empty');\n    }\n\n    let n = matrix.columns;\n    let V = new Matrix(n, n);\n    let d = new Float64Array(n);\n    let e = new Float64Array(n);\n    let value = matrix;\n    let i, j;\n\n    let isSymmetric = false;\n    if (assumeSymmetric) {\n      isSymmetric = true;\n    } else {\n      isSymmetric = matrix.isSymmetric();\n    }\n\n    if (isSymmetric) {\n      for (i = 0; i < n; i++) {\n        for (j = 0; j < n; j++) {\n          V.set(i, j, value.get(i, j));\n        }\n      }\n      tred2(n, e, d, V);\n      tql2(n, e, d, V);\n    } else {\n      let H = new Matrix(n, n);\n      let ort = new Float64Array(n);\n      for (j = 0; j < n; j++) {\n        for (i = 0; i < n; i++) {\n          H.set(i, j, value.get(i, j));\n        }\n      }\n      orthes(n, H, ort, V);\n      hqr2(n, e, d, V, H);\n    }\n\n    this.n = n;\n    this.e = e;\n    this.d = d;\n    this.V = V;\n  }\n\n  get realEigenvalues() {\n    return Array.from(this.d);\n  }\n\n  get imaginaryEigenvalues() {\n    return Array.from(this.e);\n  }\n\n  get eigenvectorMatrix() {\n    return this.V;\n  }\n\n  get diagonalMatrix() {\n    let n = this.n;\n    let e = this.e;\n    let d = this.d;\n    let X = new Matrix(n, n);\n    let i, j;\n    for (i = 0; i < n; i++) {\n      for (j = 0; j < n; j++) {\n        X.set(i, j, 0);\n      }\n      X.set(i, i, d[i]);\n      if (e[i] > 0) {\n        X.set(i, i + 1, e[i]);\n      } else if (e[i] < 0) {\n        X.set(i, i - 1, e[i]);\n      }\n    }\n    return X;\n  }\n}\n\nfunction tred2(n, e, d, V) {\n  let f, g, h, i, j, k, hh, scale;\n\n  for (j = 0; j < n; j++) {\n    d[j] = V.get(n - 1, j);\n  }\n\n  for (i = n - 1; i > 0; i--) {\n    scale = 0;\n    h = 0;\n    for (k = 0; k < i; k++) {\n      scale = scale + Math.abs(d[k]);\n    }\n\n    if (scale === 0) {\n      e[i] = d[i - 1];\n      for (j = 0; j < i; j++) {\n        d[j] = V.get(i - 1, j);\n        V.set(i, j, 0);\n        V.set(j, i, 0);\n      }\n    } else {\n      for (k = 0; k < i; k++) {\n        d[k] /= scale;\n        h += d[k] * d[k];\n      }\n\n      f = d[i - 1];\n      g = Math.sqrt(h);\n      if (f > 0) {\n        g = -g;\n      }\n\n      e[i] = scale * g;\n      h = h - f * g;\n      d[i - 1] = f - g;\n      for (j = 0; j < i; j++) {\n        e[j] = 0;\n      }\n\n      for (j = 0; j < i; j++) {\n        f = d[j];\n        V.set(j, i, f);\n        g = e[j] + V.get(j, j) * f;\n        for (k = j + 1; k <= i - 1; k++) {\n          g += V.get(k, j) * d[k];\n          e[k] += V.get(k, j) * f;\n        }\n        e[j] = g;\n      }\n\n      f = 0;\n      for (j = 0; j < i; j++) {\n        e[j] /= h;\n        f += e[j] * d[j];\n      }\n\n      hh = f / (h + h);\n      for (j = 0; j < i; j++) {\n        e[j] -= hh * d[j];\n      }\n\n      for (j = 0; j < i; j++) {\n        f = d[j];\n        g = e[j];\n        for (k = j; k <= i - 1; k++) {\n          V.set(k, j, V.get(k, j) - (f * e[k] + g * d[k]));\n        }\n        d[j] = V.get(i - 1, j);\n        V.set(i, j, 0);\n      }\n    }\n    d[i] = h;\n  }\n\n  for (i = 0; i < n - 1; i++) {\n    V.set(n - 1, i, V.get(i, i));\n    V.set(i, i, 1);\n    h = d[i + 1];\n    if (h !== 0) {\n      for (k = 0; k <= i; k++) {\n        d[k] = V.get(k, i + 1) / h;\n      }\n\n      for (j = 0; j <= i; j++) {\n        g = 0;\n        for (k = 0; k <= i; k++) {\n          g += V.get(k, i + 1) * V.get(k, j);\n        }\n        for (k = 0; k <= i; k++) {\n          V.set(k, j, V.get(k, j) - g * d[k]);\n        }\n      }\n    }\n\n    for (k = 0; k <= i; k++) {\n      V.set(k, i + 1, 0);\n    }\n  }\n\n  for (j = 0; j < n; j++) {\n    d[j] = V.get(n - 1, j);\n    V.set(n - 1, j, 0);\n  }\n\n  V.set(n - 1, n - 1, 1);\n  e[0] = 0;\n}\n\nfunction tql2(n, e, d, V) {\n  let g, h, i, j, k, l, m, p, r, dl1, c, c2, c3, el1, s, s2;\n\n  for (i = 1; i < n; i++) {\n    e[i - 1] = e[i];\n  }\n\n  e[n - 1] = 0;\n\n  let f = 0;\n  let tst1 = 0;\n  let eps = Number.EPSILON;\n\n  for (l = 0; l < n; l++) {\n    tst1 = Math.max(tst1, Math.abs(d[l]) + Math.abs(e[l]));\n    m = l;\n    while (m < n) {\n      if (Math.abs(e[m]) <= eps * tst1) {\n        break;\n      }\n      m++;\n    }\n\n    if (m > l) {\n      do {\n\n        g = d[l];\n        p = (d[l + 1] - g) / (2 * e[l]);\n        r = hypotenuse(p, 1);\n        if (p < 0) {\n          r = -r;\n        }\n\n        d[l] = e[l] / (p + r);\n        d[l + 1] = e[l] * (p + r);\n        dl1 = d[l + 1];\n        h = g - d[l];\n        for (i = l + 2; i < n; i++) {\n          d[i] -= h;\n        }\n\n        f = f + h;\n\n        p = d[m];\n        c = 1;\n        c2 = c;\n        c3 = c;\n        el1 = e[l + 1];\n        s = 0;\n        s2 = 0;\n        for (i = m - 1; i >= l; i--) {\n          c3 = c2;\n          c2 = c;\n          s2 = s;\n          g = c * e[i];\n          h = c * p;\n          r = hypotenuse(p, e[i]);\n          e[i + 1] = s * r;\n          s = e[i] / r;\n          c = p / r;\n          p = c * d[i] - s * g;\n          d[i + 1] = h + s * (c * g + s * d[i]);\n\n          for (k = 0; k < n; k++) {\n            h = V.get(k, i + 1);\n            V.set(k, i + 1, s * V.get(k, i) + c * h);\n            V.set(k, i, c * V.get(k, i) - s * h);\n          }\n        }\n\n        p = (-s * s2 * c3 * el1 * e[l]) / dl1;\n        e[l] = s * p;\n        d[l] = c * p;\n      } while (Math.abs(e[l]) > eps * tst1);\n    }\n    d[l] = d[l] + f;\n    e[l] = 0;\n  }\n\n  for (i = 0; i < n - 1; i++) {\n    k = i;\n    p = d[i];\n    for (j = i + 1; j < n; j++) {\n      if (d[j] < p) {\n        k = j;\n        p = d[j];\n      }\n    }\n\n    if (k !== i) {\n      d[k] = d[i];\n      d[i] = p;\n      for (j = 0; j < n; j++) {\n        p = V.get(j, i);\n        V.set(j, i, V.get(j, k));\n        V.set(j, k, p);\n      }\n    }\n  }\n}\n\nfunction orthes(n, H, ort, V) {\n  let low = 0;\n  let high = n - 1;\n  let f, g, h, i, j, m;\n  let scale;\n\n  for (m = low + 1; m <= high - 1; m++) {\n    scale = 0;\n    for (i = m; i <= high; i++) {\n      scale = scale + Math.abs(H.get(i, m - 1));\n    }\n\n    if (scale !== 0) {\n      h = 0;\n      for (i = high; i >= m; i--) {\n        ort[i] = H.get(i, m - 1) / scale;\n        h += ort[i] * ort[i];\n      }\n\n      g = Math.sqrt(h);\n      if (ort[m] > 0) {\n        g = -g;\n      }\n\n      h = h - ort[m] * g;\n      ort[m] = ort[m] - g;\n\n      for (j = m; j < n; j++) {\n        f = 0;\n        for (i = high; i >= m; i--) {\n          f += ort[i] * H.get(i, j);\n        }\n\n        f = f / h;\n        for (i = m; i <= high; i++) {\n          H.set(i, j, H.get(i, j) - f * ort[i]);\n        }\n      }\n\n      for (i = 0; i <= high; i++) {\n        f = 0;\n        for (j = high; j >= m; j--) {\n          f += ort[j] * H.get(i, j);\n        }\n\n        f = f / h;\n        for (j = m; j <= high; j++) {\n          H.set(i, j, H.get(i, j) - f * ort[j]);\n        }\n      }\n\n      ort[m] = scale * ort[m];\n      H.set(m, m - 1, scale * g);\n    }\n  }\n\n  for (i = 0; i < n; i++) {\n    for (j = 0; j < n; j++) {\n      V.set(i, j, i === j ? 1 : 0);\n    }\n  }\n\n  for (m = high - 1; m >= low + 1; m--) {\n    if (H.get(m, m - 1) !== 0) {\n      for (i = m + 1; i <= high; i++) {\n        ort[i] = H.get(i, m - 1);\n      }\n\n      for (j = m; j <= high; j++) {\n        g = 0;\n        for (i = m; i <= high; i++) {\n          g += ort[i] * V.get(i, j);\n        }\n\n        g = g / ort[m] / H.get(m, m - 1);\n        for (i = m; i <= high; i++) {\n          V.set(i, j, V.get(i, j) + g * ort[i]);\n        }\n      }\n    }\n  }\n}\n\nfunction hqr2(nn, e, d, V, H) {\n  let n = nn - 1;\n  let low = 0;\n  let high = nn - 1;\n  let eps = Number.EPSILON;\n  let exshift = 0;\n  let norm = 0;\n  let p = 0;\n  let q = 0;\n  let r = 0;\n  let s = 0;\n  let z = 0;\n  let iter = 0;\n  let i, j, k, l, m, t, w, x, y;\n  let ra, sa, vr, vi;\n  let notlast, cdivres;\n\n  for (i = 0; i < nn; i++) {\n    if (i < low || i > high) {\n      d[i] = H.get(i, i);\n      e[i] = 0;\n    }\n\n    for (j = Math.max(i - 1, 0); j < nn; j++) {\n      norm = norm + Math.abs(H.get(i, j));\n    }\n  }\n\n  while (n >= low) {\n    l = n;\n    while (l > low) {\n      s = Math.abs(H.get(l - 1, l - 1)) + Math.abs(H.get(l, l));\n      if (s === 0) {\n        s = norm;\n      }\n      if (Math.abs(H.get(l, l - 1)) < eps * s) {\n        break;\n      }\n      l--;\n    }\n\n    if (l === n) {\n      H.set(n, n, H.get(n, n) + exshift);\n      d[n] = H.get(n, n);\n      e[n] = 0;\n      n--;\n      iter = 0;\n    } else if (l === n - 1) {\n      w = H.get(n, n - 1) * H.get(n - 1, n);\n      p = (H.get(n - 1, n - 1) - H.get(n, n)) / 2;\n      q = p * p + w;\n      z = Math.sqrt(Math.abs(q));\n      H.set(n, n, H.get(n, n) + exshift);\n      H.set(n - 1, n - 1, H.get(n - 1, n - 1) + exshift);\n      x = H.get(n, n);\n\n      if (q >= 0) {\n        z = p >= 0 ? p + z : p - z;\n        d[n - 1] = x + z;\n        d[n] = d[n - 1];\n        if (z !== 0) {\n          d[n] = x - w / z;\n        }\n        e[n - 1] = 0;\n        e[n] = 0;\n        x = H.get(n, n - 1);\n        s = Math.abs(x) + Math.abs(z);\n        p = x / s;\n        q = z / s;\n        r = Math.sqrt(p * p + q * q);\n        p = p / r;\n        q = q / r;\n\n        for (j = n - 1; j < nn; j++) {\n          z = H.get(n - 1, j);\n          H.set(n - 1, j, q * z + p * H.get(n, j));\n          H.set(n, j, q * H.get(n, j) - p * z);\n        }\n\n        for (i = 0; i <= n; i++) {\n          z = H.get(i, n - 1);\n          H.set(i, n - 1, q * z + p * H.get(i, n));\n          H.set(i, n, q * H.get(i, n) - p * z);\n        }\n\n        for (i = low; i <= high; i++) {\n          z = V.get(i, n - 1);\n          V.set(i, n - 1, q * z + p * V.get(i, n));\n          V.set(i, n, q * V.get(i, n) - p * z);\n        }\n      } else {\n        d[n - 1] = x + p;\n        d[n] = x + p;\n        e[n - 1] = z;\n        e[n] = -z;\n      }\n\n      n = n - 2;\n      iter = 0;\n    } else {\n      x = H.get(n, n);\n      y = 0;\n      w = 0;\n      if (l < n) {\n        y = H.get(n - 1, n - 1);\n        w = H.get(n, n - 1) * H.get(n - 1, n);\n      }\n\n      if (iter === 10) {\n        exshift += x;\n        for (i = low; i <= n; i++) {\n          H.set(i, i, H.get(i, i) - x);\n        }\n        s = Math.abs(H.get(n, n - 1)) + Math.abs(H.get(n - 1, n - 2));\n        // eslint-disable-next-line no-multi-assign\n        x = y = 0.75 * s;\n        w = -0.4375 * s * s;\n      }\n\n      if (iter === 30) {\n        s = (y - x) / 2;\n        s = s * s + w;\n        if (s > 0) {\n          s = Math.sqrt(s);\n          if (y < x) {\n            s = -s;\n          }\n          s = x - w / ((y - x) / 2 + s);\n          for (i = low; i <= n; i++) {\n            H.set(i, i, H.get(i, i) - s);\n          }\n          exshift += s;\n          // eslint-disable-next-line no-multi-assign\n          x = y = w = 0.964;\n        }\n      }\n\n      iter = iter + 1;\n\n      m = n - 2;\n      while (m >= l) {\n        z = H.get(m, m);\n        r = x - z;\n        s = y - z;\n        p = (r * s - w) / H.get(m + 1, m) + H.get(m, m + 1);\n        q = H.get(m + 1, m + 1) - z - r - s;\n        r = H.get(m + 2, m + 1);\n        s = Math.abs(p) + Math.abs(q) + Math.abs(r);\n        p = p / s;\n        q = q / s;\n        r = r / s;\n        if (m === l) {\n          break;\n        }\n        if (\n          Math.abs(H.get(m, m - 1)) * (Math.abs(q) + Math.abs(r)) <\n          eps *\n            (Math.abs(p) *\n              (Math.abs(H.get(m - 1, m - 1)) +\n                Math.abs(z) +\n                Math.abs(H.get(m + 1, m + 1))))\n        ) {\n          break;\n        }\n        m--;\n      }\n\n      for (i = m + 2; i <= n; i++) {\n        H.set(i, i - 2, 0);\n        if (i > m + 2) {\n          H.set(i, i - 3, 0);\n        }\n      }\n\n      for (k = m; k <= n - 1; k++) {\n        notlast = k !== n - 1;\n        if (k !== m) {\n          p = H.get(k, k - 1);\n          q = H.get(k + 1, k - 1);\n          r = notlast ? H.get(k + 2, k - 1) : 0;\n          x = Math.abs(p) + Math.abs(q) + Math.abs(r);\n          if (x !== 0) {\n            p = p / x;\n            q = q / x;\n            r = r / x;\n          }\n        }\n\n        if (x === 0) {\n          break;\n        }\n\n        s = Math.sqrt(p * p + q * q + r * r);\n        if (p < 0) {\n          s = -s;\n        }\n\n        if (s !== 0) {\n          if (k !== m) {\n            H.set(k, k - 1, -s * x);\n          } else if (l !== m) {\n            H.set(k, k - 1, -H.get(k, k - 1));\n          }\n\n          p = p + s;\n          x = p / s;\n          y = q / s;\n          z = r / s;\n          q = q / p;\n          r = r / p;\n\n          for (j = k; j < nn; j++) {\n            p = H.get(k, j) + q * H.get(k + 1, j);\n            if (notlast) {\n              p = p + r * H.get(k + 2, j);\n              H.set(k + 2, j, H.get(k + 2, j) - p * z);\n            }\n\n            H.set(k, j, H.get(k, j) - p * x);\n            H.set(k + 1, j, H.get(k + 1, j) - p * y);\n          }\n\n          for (i = 0; i <= Math.min(n, k + 3); i++) {\n            p = x * H.get(i, k) + y * H.get(i, k + 1);\n            if (notlast) {\n              p = p + z * H.get(i, k + 2);\n              H.set(i, k + 2, H.get(i, k + 2) - p * r);\n            }\n\n            H.set(i, k, H.get(i, k) - p);\n            H.set(i, k + 1, H.get(i, k + 1) - p * q);\n          }\n\n          for (i = low; i <= high; i++) {\n            p = x * V.get(i, k) + y * V.get(i, k + 1);\n            if (notlast) {\n              p = p + z * V.get(i, k + 2);\n              V.set(i, k + 2, V.get(i, k + 2) - p * r);\n            }\n\n            V.set(i, k, V.get(i, k) - p);\n            V.set(i, k + 1, V.get(i, k + 1) - p * q);\n          }\n        }\n      }\n    }\n  }\n\n  if (norm === 0) {\n    return;\n  }\n\n  for (n = nn - 1; n >= 0; n--) {\n    p = d[n];\n    q = e[n];\n\n    if (q === 0) {\n      l = n;\n      H.set(n, n, 1);\n      for (i = n - 1; i >= 0; i--) {\n        w = H.get(i, i) - p;\n        r = 0;\n        for (j = l; j <= n; j++) {\n          r = r + H.get(i, j) * H.get(j, n);\n        }\n\n        if (e[i] < 0) {\n          z = w;\n          s = r;\n        } else {\n          l = i;\n          if (e[i] === 0) {\n            H.set(i, n, w !== 0 ? -r / w : -r / (eps * norm));\n          } else {\n            x = H.get(i, i + 1);\n            y = H.get(i + 1, i);\n            q = (d[i] - p) * (d[i] - p) + e[i] * e[i];\n            t = (x * s - z * r) / q;\n            H.set(i, n, t);\n            H.set(\n              i + 1,\n              n,\n              Math.abs(x) > Math.abs(z) ? (-r - w * t) / x : (-s - y * t) / z,\n            );\n          }\n\n          t = Math.abs(H.get(i, n));\n          if (eps * t * t > 1) {\n            for (j = i; j <= n; j++) {\n              H.set(j, n, H.get(j, n) / t);\n            }\n          }\n        }\n      }\n    } else if (q < 0) {\n      l = n - 1;\n\n      if (Math.abs(H.get(n, n - 1)) > Math.abs(H.get(n - 1, n))) {\n        H.set(n - 1, n - 1, q / H.get(n, n - 1));\n        H.set(n - 1, n, -(H.get(n, n) - p) / H.get(n, n - 1));\n      } else {\n        cdivres = cdiv(0, -H.get(n - 1, n), H.get(n - 1, n - 1) - p, q);\n        H.set(n - 1, n - 1, cdivres[0]);\n        H.set(n - 1, n, cdivres[1]);\n      }\n\n      H.set(n, n - 1, 0);\n      H.set(n, n, 1);\n      for (i = n - 2; i >= 0; i--) {\n        ra = 0;\n        sa = 0;\n        for (j = l; j <= n; j++) {\n          ra = ra + H.get(i, j) * H.get(j, n - 1);\n          sa = sa + H.get(i, j) * H.get(j, n);\n        }\n\n        w = H.get(i, i) - p;\n\n        if (e[i] < 0) {\n          z = w;\n          r = ra;\n          s = sa;\n        } else {\n          l = i;\n          if (e[i] === 0) {\n            cdivres = cdiv(-ra, -sa, w, q);\n            H.set(i, n - 1, cdivres[0]);\n            H.set(i, n, cdivres[1]);\n          } else {\n            x = H.get(i, i + 1);\n            y = H.get(i + 1, i);\n            vr = (d[i] - p) * (d[i] - p) + e[i] * e[i] - q * q;\n            vi = (d[i] - p) * 2 * q;\n            if (vr === 0 && vi === 0) {\n              vr =\n                eps *\n                norm *\n                (Math.abs(w) +\n                  Math.abs(q) +\n                  Math.abs(x) +\n                  Math.abs(y) +\n                  Math.abs(z));\n            }\n            cdivres = cdiv(\n              x * r - z * ra + q * sa,\n              x * s - z * sa - q * ra,\n              vr,\n              vi,\n            );\n            H.set(i, n - 1, cdivres[0]);\n            H.set(i, n, cdivres[1]);\n            if (Math.abs(x) > Math.abs(z) + Math.abs(q)) {\n              H.set(\n                i + 1,\n                n - 1,\n                (-ra - w * H.get(i, n - 1) + q * H.get(i, n)) / x,\n              );\n              H.set(\n                i + 1,\n                n,\n                (-sa - w * H.get(i, n) - q * H.get(i, n - 1)) / x,\n              );\n            } else {\n              cdivres = cdiv(\n                -r - y * H.get(i, n - 1),\n                -s - y * H.get(i, n),\n                z,\n                q,\n              );\n              H.set(i + 1, n - 1, cdivres[0]);\n              H.set(i + 1, n, cdivres[1]);\n            }\n          }\n\n          t = Math.max(Math.abs(H.get(i, n - 1)), Math.abs(H.get(i, n)));\n          if (eps * t * t > 1) {\n            for (j = i; j <= n; j++) {\n              H.set(j, n - 1, H.get(j, n - 1) / t);\n              H.set(j, n, H.get(j, n) / t);\n            }\n          }\n        }\n      }\n    }\n  }\n\n  for (i = 0; i < nn; i++) {\n    if (i < low || i > high) {\n      for (j = i; j < nn; j++) {\n        V.set(i, j, H.get(i, j));\n      }\n    }\n  }\n\n  for (j = nn - 1; j >= low; j--) {\n    for (i = low; i <= high; i++) {\n      z = 0;\n      for (k = low; k <= Math.min(j, high); k++) {\n        z = z + V.get(i, k) * H.get(k, j);\n      }\n      V.set(i, j, z);\n    }\n  }\n}\n\nfunction cdiv(xr, xi, yr, yi) {\n  let r, d;\n  if (Math.abs(yr) > Math.abs(yi)) {\n    r = yi / yr;\n    d = yr + r * yi;\n    return [(xr + r * xi) / d, (xi - r * xr) / d];\n  } else {\n    r = yr / yi;\n    d = yi + r * yr;\n    return [(r * xr + xi) / d, (r * xi - xr) / d];\n  }\n}\n\nclass CholeskyDecomposition {\n  constructor(value) {\n    value = WrapperMatrix2D.checkMatrix(value);\n    if (!value.isSymmetric()) {\n      throw new Error('Matrix is not symmetric');\n    }\n\n    let a = value;\n    let dimension = a.rows;\n    let l = new Matrix(dimension, dimension);\n    let positiveDefinite = true;\n    let i, j, k;\n\n    for (j = 0; j < dimension; j++) {\n      let d = 0;\n      for (k = 0; k < j; k++) {\n        let s = 0;\n        for (i = 0; i < k; i++) {\n          s += l.get(k, i) * l.get(j, i);\n        }\n        s = (a.get(j, k) - s) / l.get(k, k);\n        l.set(j, k, s);\n        d = d + s * s;\n      }\n\n      d = a.get(j, j) - d;\n\n      positiveDefinite &&= d > 0;\n      l.set(j, j, Math.sqrt(Math.max(d, 0)));\n      for (k = j + 1; k < dimension; k++) {\n        l.set(j, k, 0);\n      }\n    }\n\n    this.L = l;\n    this.positiveDefinite = positiveDefinite;\n  }\n\n  isPositiveDefinite() {\n    return this.positiveDefinite;\n  }\n\n  solve(value) {\n    value = WrapperMatrix2D.checkMatrix(value);\n\n    let l = this.L;\n    let dimension = l.rows;\n\n    if (value.rows !== dimension) {\n      throw new Error('Matrix dimensions do not match');\n    }\n    if (this.isPositiveDefinite() === false) {\n      throw new Error('Matrix is not positive definite');\n    }\n\n    let count = value.columns;\n    let B = value.clone();\n    let i, j, k;\n\n    for (k = 0; k < dimension; k++) {\n      for (j = 0; j < count; j++) {\n        for (i = 0; i < k; i++) {\n          B.set(k, j, B.get(k, j) - B.get(i, j) * l.get(k, i));\n        }\n        B.set(k, j, B.get(k, j) / l.get(k, k));\n      }\n    }\n\n    for (k = dimension - 1; k >= 0; k--) {\n      for (j = 0; j < count; j++) {\n        for (i = k + 1; i < dimension; i++) {\n          B.set(k, j, B.get(k, j) - B.get(i, j) * l.get(i, k));\n        }\n        B.set(k, j, B.get(k, j) / l.get(k, k));\n      }\n    }\n\n    return B;\n  }\n\n  get lowerTriangularMatrix() {\n    return this.L;\n  }\n}\n\nclass nipals {\n  constructor(X, options = {}) {\n    X = WrapperMatrix2D.checkMatrix(X);\n    let { Y } = options;\n    const {\n      scaleScores = false,\n      maxIterations = 1000,\n      terminationCriteria = 1e-10,\n    } = options;\n\n    let u;\n    if (Y) {\n      if (isAnyArray.isAnyArray(Y) && typeof Y[0] === 'number') {\n        Y = Matrix.columnVector(Y);\n      } else {\n        Y = WrapperMatrix2D.checkMatrix(Y);\n      }\n      if (Y.rows !== X.rows) {\n        throw new Error('Y should have the same number of rows as X');\n      }\n      u = Y.getColumnVector(0);\n    } else {\n      u = X.getColumnVector(0);\n    }\n\n    let diff = 1;\n    let t, q, w, tOld;\n\n    for (\n      let counter = 0;\n      counter < maxIterations && diff > terminationCriteria;\n      counter++\n    ) {\n      w = X.transpose().mmul(u).div(u.transpose().mmul(u).get(0, 0));\n      w = w.div(w.norm());\n\n      t = X.mmul(w).div(w.transpose().mmul(w).get(0, 0));\n\n      if (counter > 0) {\n        diff = t.clone().sub(tOld).pow(2).sum();\n      }\n      tOld = t.clone();\n\n      if (Y) {\n        q = Y.transpose().mmul(t).div(t.transpose().mmul(t).get(0, 0));\n        q = q.div(q.norm());\n\n        u = Y.mmul(q).div(q.transpose().mmul(q).get(0, 0));\n      } else {\n        u = t;\n      }\n    }\n\n    if (Y) {\n      let p = X.transpose().mmul(t).div(t.transpose().mmul(t).get(0, 0));\n      p = p.div(p.norm());\n      let xResidual = X.clone().sub(t.clone().mmul(p.transpose()));\n      let residual = u.transpose().mmul(t).div(t.transpose().mmul(t).get(0, 0));\n      let yResidual = Y.clone().sub(\n        t.clone().mulS(residual.get(0, 0)).mmul(q.transpose()),\n      );\n\n      this.t = t;\n      this.p = p.transpose();\n      this.w = w.transpose();\n      this.q = q;\n      this.u = u;\n      this.s = t.transpose().mmul(t);\n      this.xResidual = xResidual;\n      this.yResidual = yResidual;\n      this.betas = residual;\n    } else {\n      this.w = w.transpose();\n      this.s = t.transpose().mmul(t).sqrt();\n      if (scaleScores) {\n        this.t = t.clone().div(this.s.get(0, 0));\n      } else {\n        this.t = t;\n      }\n      this.xResidual = X.sub(t.mmul(w.transpose()));\n    }\n  }\n}\n\nexports.AbstractMatrix = AbstractMatrix;\nexports.CHO = CholeskyDecomposition;\nexports.CholeskyDecomposition = CholeskyDecomposition;\nexports.DistanceMatrix = DistanceMatrix;\nexports.EVD = EigenvalueDecomposition;\nexports.EigenvalueDecomposition = EigenvalueDecomposition;\nexports.LU = LuDecomposition;\nexports.LuDecomposition = LuDecomposition;\nexports.Matrix = Matrix;\nexports.MatrixColumnSelectionView = MatrixColumnSelectionView;\nexports.MatrixColumnView = MatrixColumnView;\nexports.MatrixFlipColumnView = MatrixFlipColumnView;\nexports.MatrixFlipRowView = MatrixFlipRowView;\nexports.MatrixRowSelectionView = MatrixRowSelectionView;\nexports.MatrixRowView = MatrixRowView;\nexports.MatrixSelectionView = MatrixSelectionView;\nexports.MatrixSubView = MatrixSubView;\nexports.MatrixTransposeView = MatrixTransposeView;\nexports.NIPALS = nipals;\nexports.Nipals = nipals;\nexports.QR = QrDecomposition;\nexports.QrDecomposition = QrDecomposition;\nexports.SVD = SingularValueDecomposition;\nexports.SingularValueDecomposition = SingularValueDecomposition;\nexports.SymmetricMatrix = SymmetricMatrix;\nexports.WrapperMatrix1D = WrapperMatrix1D;\nexports.WrapperMatrix2D = WrapperMatrix2D;\nexports.correlation = correlation;\nexports.covariance = covariance;\nexports.default = Matrix;\nexports.determinant = determinant;\nexports.inverse = inverse;\nexports.linearDependencies = linearDependencies;\nexports.pseudoInverse = pseudoInverse;\nexports.solve = solve;\nexports.wrap = wrap;\n", "var baseClone = require('./_baseClone');\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_SYMBOLS_FLAG = 4;\n\n/**\n * Creates a shallow clone of `value`.\n *\n * **Note:** This method is loosely based on the\n * [structured clone algorithm](https://mdn.io/Structured_clone_algorithm)\n * and supports cloning arrays, array buffers, booleans, date objects, maps,\n * numbers, `Object` objects, regexes, sets, strings, symbols, and typed\n * arrays. The own enumerable properties of `arguments` objects are cloned\n * as plain objects. An empty object is returned for uncloneable values such\n * as error objects, functions, DOM nodes, and WeakMaps.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to clone.\n * @returns {*} Returns the cloned value.\n * @see _.cloneDeep\n * @example\n *\n * var objects = [{ 'a': 1 }, { 'b': 2 }];\n *\n * var shallow = _.clone(objects);\n * console.log(shallow[0] === objects[0]);\n * // => true\n */\nfunction clone(value) {\n  return baseClone(value, CLONE_SYMBOLS_FLAG);\n}\n\nmodule.exports = clone;\n", "var baseEach = require('./_baseEach');\n\n/**\n * The base implementation of `_.filter` without support for iteratee shorthands.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nfunction baseFilter(collection, predicate) {\n  var result = [];\n  baseEach(collection, function(value, index, collection) {\n    if (predicate(value, index, collection)) {\n      result.push(value);\n    }\n  });\n  return result;\n}\n\nmodule.exports = baseFilter;\n", "var arrayFilter = require('./_arrayFilter'),\n    baseFilter = require('./_baseFilter'),\n    baseIteratee = require('./_baseIteratee'),\n    isArray = require('./isArray');\n\n/**\n * Iterates over elements of `collection`, returning an array of all elements\n * `predicate` returns truthy for. The predicate is invoked with three\n * arguments: (value, index|key, collection).\n *\n * **Note:** Unlike `_.remove`, this method returns a new array.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [predicate=_.identity] The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n * @see _.reject\n * @example\n *\n * var users = [\n *   { 'user': 'barney', 'age': 36, 'active': true },\n *   { 'user': 'fred',   'age': 40, 'active': false }\n * ];\n *\n * _.filter(users, function(o) { return !o.active; });\n * // => objects for ['fred']\n *\n * // The `_.matches` iteratee shorthand.\n * _.filter(users, { 'age': 36, 'active': true });\n * // => objects for ['barney']\n *\n * // The `_.matchesProperty` iteratee shorthand.\n * _.filter(users, ['active', false]);\n * // => objects for ['fred']\n *\n * // The `_.property` iteratee shorthand.\n * _.filter(users, 'active');\n * // => objects for ['barney']\n *\n * // Combining several predicates using `_.overEvery` or `_.overSome`.\n * _.filter(users, _.overSome([{ 'age': 36 }, ['age', 40]]));\n * // => objects for ['fred', 'barney']\n */\nfunction filter(collection, predicate) {\n  var func = isArray(collection) ? arrayFilter : baseFilter;\n  return func(collection, baseIteratee(predicate, 3));\n}\n\nmodule.exports = filter;\n", "/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.has` without support for deep paths.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {Array|string} key The key to check.\n * @returns {boolean} Returns `true` if `key` exists, else `false`.\n */\nfunction baseHas(object, key) {\n  return object != null && hasOwnProperty.call(object, key);\n}\n\nmodule.exports = baseHas;\n", "var baseHas = require('./_baseHas'),\n    hasPath = require('./_hasPath');\n\n/**\n * Checks if `path` is a direct property of `object`.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n * @example\n *\n * var object = { 'a': { 'b': 2 } };\n * var other = _.create({ 'a': _.create({ 'b': 2 }) });\n *\n * _.has(object, 'a');\n * // => true\n *\n * _.has(object, 'a.b');\n * // => true\n *\n * _.has(object, ['a', 'b']);\n * // => true\n *\n * _.has(other, 'a');\n * // => false\n */\nfunction has(object, path) {\n  return object != null && hasPath(object, path, baseHas);\n}\n\nmodule.exports = has;\n", "var baseKeys = require('./_baseKeys'),\n    getTag = require('./_getTag'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isArrayLike = require('./isArrayLike'),\n    isBuffer = require('./isBuffer'),\n    isPrototype = require('./_isPrototype'),\n    isTypedArray = require('./isTypedArray');\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]',\n    setTag = '[object Set]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Checks if `value` is an empty object, collection, map, or set.\n *\n * Objects are considered empty if they have no own enumerable string keyed\n * properties.\n *\n * Array-like values such as `arguments` objects, arrays, buffers, strings, or\n * jQuery-like collections are considered empty if they have a `length` of `0`.\n * Similarly, maps and sets are considered empty if they have a `size` of `0`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is empty, else `false`.\n * @example\n *\n * _.isEmpty(null);\n * // => true\n *\n * _.isEmpty(true);\n * // => true\n *\n * _.isEmpty(1);\n * // => true\n *\n * _.isEmpty([1, 2, 3]);\n * // => false\n *\n * _.isEmpty({ 'a': 1 });\n * // => false\n */\nfunction isEmpty(value) {\n  if (value == null) {\n    return true;\n  }\n  if (isArrayLike(value) &&\n      (isArray(value) || typeof value == 'string' || typeof value.splice == 'function' ||\n        isBuffer(value) || isTypedArray(value) || isArguments(value))) {\n    return !value.length;\n  }\n  var tag = getTag(value);\n  if (tag == mapTag || tag == setTag) {\n    return !value.size;\n  }\n  if (isPrototype(value)) {\n    return !baseKeys(value).length;\n  }\n  for (var key in value) {\n    if (hasOwnProperty.call(value, key)) {\n      return false;\n    }\n  }\n  return true;\n}\n\nmodule.exports = isEmpty;\n", "/**\n * Checks if `value` is `undefined`.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is `undefined`, else `false`.\n * @example\n *\n * _.isUndefined(void 0);\n * // => true\n *\n * _.isUndefined(null);\n * // => false\n */\nfunction isUndefined(value) {\n  return value === undefined;\n}\n\nmodule.exports = isUndefined;\n", "/**\n * A specialized version of `_.reduce` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {*} [accumulator] The initial value.\n * @param {boolean} [initAccum] Specify using the first element of `array` as\n *  the initial value.\n * @returns {*} Returns the accumulated value.\n */\nfunction arrayReduce(array, iteratee, accumulator, initAccum) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  if (initAccum && length) {\n    accumulator = array[++index];\n  }\n  while (++index < length) {\n    accumulator = iteratee(accumulator, array[index], index, array);\n  }\n  return accumulator;\n}\n\nmodule.exports = arrayReduce;\n", "/**\n * The base implementation of `_.reduce` and `_.reduceRight`, without support\n * for iteratee shorthands, which iterates over `collection` using `eachFunc`.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {*} accumulator The initial value.\n * @param {boolean} initAccum Specify using the first or last element of\n *  `collection` as the initial value.\n * @param {Function} eachFunc The function to iterate over `collection`.\n * @returns {*} Returns the accumulated value.\n */\nfunction baseReduce(collection, iteratee, accumulator, initAccum, eachFunc) {\n  eachFunc(collection, function(value, index, collection) {\n    accumulator = initAccum\n      ? (initAccum = false, value)\n      : iteratee(accumulator, value, index, collection);\n  });\n  return accumulator;\n}\n\nmodule.exports = baseReduce;\n", "var arrayReduce = require('./_arrayReduce'),\n    baseEach = require('./_baseEach'),\n    baseIteratee = require('./_baseIteratee'),\n    baseReduce = require('./_baseReduce'),\n    isArray = require('./isArray');\n\n/**\n * Reduces `collection` to a value which is the accumulated result of running\n * each element in `collection` thru `iteratee`, where each successive\n * invocation is supplied the return value of the previous. If `accumulator`\n * is not given, the first element of `collection` is used as the initial\n * value. The iteratee is invoked with four arguments:\n * (accumulator, value, index|key, collection).\n *\n * Many lodash methods are guarded to work as iteratees for methods like\n * `_.reduce`, `_.reduceRight`, and `_.transform`.\n *\n * The guarded methods are:\n * `assign`, `defaults`, `defaultsDeep`, `includes`, `merge`, `orderBy`,\n * and `sortBy`\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @param {*} [accumulator] The initial value.\n * @returns {*} Returns the accumulated value.\n * @see _.reduceRight\n * @example\n *\n * _.reduce([1, 2], function(sum, n) {\n *   return sum + n;\n * }, 0);\n * // => 3\n *\n * _.reduce({ 'a': 1, 'b': 2, 'c': 1 }, function(result, value, key) {\n *   (result[value] || (result[value] = [])).push(key);\n *   return result;\n * }, {});\n * // => { '1': ['a', 'c'], '2': ['b'] } (iteration order is not guaranteed)\n */\nfunction reduce(collection, iteratee, accumulator) {\n  var func = isArray(collection) ? arrayReduce : baseReduce,\n      initAccum = arguments.length < 3;\n\n  return func(collection, baseIteratee(iteratee, 4), accumulator, initAccum, baseEach);\n}\n\nmodule.exports = reduce;\n", "var baseProperty = require('./_baseProperty');\n\n/**\n * Gets the size of an ASCII `string`.\n *\n * @private\n * @param {string} string The string inspect.\n * @returns {number} Returns the string size.\n */\nvar asciiSize = baseProperty('length');\n\nmodule.exports = asciiSize;\n", "/** Used to compose unicode character classes. */\nvar rsAstralRange = '\\\\ud800-\\\\udfff',\n    rsComboMarksRange = '\\\\u0300-\\\\u036f',\n    reComboHalfMarksRange = '\\\\ufe20-\\\\ufe2f',\n    rsComboSymbolsRange = '\\\\u20d0-\\\\u20ff',\n    rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange,\n    rsVarRange = '\\\\ufe0e\\\\ufe0f';\n\n/** Used to compose unicode capture groups. */\nvar rsZWJ = '\\\\u200d';\n\n/** Used to detect strings with [zero-width joiners or code points from the astral planes](http://eev.ee/blog/2015/09/12/dark-corners-of-unicode/). */\nvar reHasUnicode = RegExp('[' + rsZWJ + rsAstralRange  + rsComboRange + rsVarRange + ']');\n\n/**\n * Checks if `string` contains Unicode symbols.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {boolean} Returns `true` if a symbol is found, else `false`.\n */\nfunction hasUnicode(string) {\n  return reHasUnicode.test(string);\n}\n\nmodule.exports = hasUnicode;\n", "/** Used to compose unicode character classes. */\nvar rsAstralRange = '\\\\ud800-\\\\udfff',\n    rsComboMarksRange = '\\\\u0300-\\\\u036f',\n    reComboHalfMarksRange = '\\\\ufe20-\\\\ufe2f',\n    rsComboSymbolsRange = '\\\\u20d0-\\\\u20ff',\n    rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange,\n    rsVarRange = '\\\\ufe0e\\\\ufe0f';\n\n/** Used to compose unicode capture groups. */\nvar rsAstral = '[' + rsAstralRange + ']',\n    rsCombo = '[' + rsComboRange + ']',\n    rsFitz = '\\\\ud83c[\\\\udffb-\\\\udfff]',\n    rsModifier = '(?:' + rsCombo + '|' + rsFitz + ')',\n    rsNonAstral = '[^' + rsAstralRange + ']',\n    rsRegional = '(?:\\\\ud83c[\\\\udde6-\\\\uddff]){2}',\n    rsSurrPair = '[\\\\ud800-\\\\udbff][\\\\udc00-\\\\udfff]',\n    rsZWJ = '\\\\u200d';\n\n/** Used to compose unicode regexes. */\nvar reOptMod = rsModifier + '?',\n    rsOptVar = '[' + rsVarRange + ']?',\n    rsOptJoin = '(?:' + rsZWJ + '(?:' + [rsNonAstral, rsRegional, rsSurrPair].join('|') + ')' + rsOptVar + reOptMod + ')*',\n    rsSeq = rsOptVar + reOptMod + rsOptJoin,\n    rsSymbol = '(?:' + [rsNonAstral + rsCombo + '?', rsCombo, rsRegional, rsSurrPair, rsAstral].join('|') + ')';\n\n/** Used to match [string symbols](https://mathiasbynens.be/notes/javascript-unicode). */\nvar reUnicode = RegExp(rsFitz + '(?=' + rsFitz + ')|' + rsSymbol + rsSeq, 'g');\n\n/**\n * Gets the size of a Unicode `string`.\n *\n * @private\n * @param {string} string The string inspect.\n * @returns {number} Returns the string size.\n */\nfunction unicodeSize(string) {\n  var result = reUnicode.lastIndex = 0;\n  while (reUnicode.test(string)) {\n    ++result;\n  }\n  return result;\n}\n\nmodule.exports = unicodeSize;\n", "var asciiSize = require('./_asciiSize'),\n    hasUnicode = require('./_hasUnicode'),\n    unicodeSize = require('./_unicodeSize');\n\n/**\n * Gets the number of symbols in `string`.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {number} Returns the string size.\n */\nfunction stringSize(string) {\n  return hasUnicode(string)\n    ? unicodeSize(string)\n    : asciiSize(string);\n}\n\nmodule.exports = stringSize;\n", "var baseKeys = require('./_baseKeys'),\n    getTag = require('./_getTag'),\n    isArrayLike = require('./isArrayLike'),\n    isString = require('./isString'),\n    stringSize = require('./_stringSize');\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]',\n    setTag = '[object Set]';\n\n/**\n * Gets the size of `collection` by returning its length for array-like\n * values or the number of own enumerable string keyed properties for objects.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object|string} collection The collection to inspect.\n * @returns {number} Returns the collection size.\n * @example\n *\n * _.size([1, 2, 3]);\n * // => 3\n *\n * _.size({ 'a': 1, 'b': 2 });\n * // => 2\n *\n * _.size('pebbles');\n * // => 7\n */\nfunction size(collection) {\n  if (collection == null) {\n    return 0;\n  }\n  if (isArrayLike(collection)) {\n    return isString(collection) ? stringSize(collection) : collection.length;\n  }\n  var tag = getTag(collection);\n  if (tag == mapTag || tag == setTag) {\n    return collection.size;\n  }\n  return baseKeys(collection).length;\n}\n\nmodule.exports = size;\n", "var arrayEach = require('./_arrayEach'),\n    baseCreate = require('./_baseCreate'),\n    baseForOwn = require('./_baseForOwn'),\n    baseIteratee = require('./_baseIteratee'),\n    getPrototype = require('./_getPrototype'),\n    isArray = require('./isArray'),\n    isBuffer = require('./isBuffer'),\n    isFunction = require('./isFunction'),\n    isObject = require('./isObject'),\n    isTypedArray = require('./isTypedArray');\n\n/**\n * An alternative to `_.reduce`; this method transforms `object` to a new\n * `accumulator` object which is the result of running each of its own\n * enumerable string keyed properties thru `iteratee`, with each invocation\n * potentially mutating the `accumulator` object. If `accumulator` is not\n * provided, a new object with the same `[[Prototype]]` will be used. The\n * iteratee is invoked with four arguments: (accumulator, value, key, object).\n * Iteratee functions may exit iteration early by explicitly returning `false`.\n *\n * @static\n * @memberOf _\n * @since 1.3.0\n * @category Object\n * @param {Object} object The object to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @param {*} [accumulator] The custom accumulator value.\n * @returns {*} Returns the accumulated value.\n * @example\n *\n * _.transform([2, 3, 4], function(result, n) {\n *   result.push(n *= n);\n *   return n % 2 == 0;\n * }, []);\n * // => [4, 9]\n *\n * _.transform({ 'a': 1, 'b': 2, 'c': 1 }, function(result, value, key) {\n *   (result[value] || (result[value] = [])).push(key);\n * }, {});\n * // => { '1': ['a', 'c'], '2': ['b'] }\n */\nfunction transform(object, iteratee, accumulator) {\n  var isArr = isArray(object),\n      isArrLike = isArr || isBuffer(object) || isTypedArray(object);\n\n  iteratee = baseIteratee(iteratee, 4);\n  if (accumulator == null) {\n    var Ctor = object && object.constructor;\n    if (isArrLike) {\n      accumulator = isArr ? new Ctor : [];\n    }\n    else if (isObject(object)) {\n      accumulator = isFunction(Ctor) ? baseCreate(getPrototype(object)) : {};\n    }\n    else {\n      accumulator = {};\n    }\n  }\n  (isArrLike ? arrayEach : baseForOwn)(object, function(value, index, object) {\n    return iteratee(accumulator, value, index, object);\n  });\n  return accumulator;\n}\n\nmodule.exports = transform;\n", "var Symbol = require('./_Symbol'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray');\n\n/** Built-in value references. */\nvar spreadableSymbol = Symbol ? Symbol.isConcatSpreadable : undefined;\n\n/**\n * Checks if `value` is a flattenable `arguments` object or array.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is flattenable, else `false`.\n */\nfunction isFlattenable(value) {\n  return isArray(value) || isArguments(value) ||\n    !!(spreadableSymbol && value && value[spreadableSymbol]);\n}\n\nmodule.exports = isFlattenable;\n", "var arrayPush = require('./_arrayPush'),\n    isFlattenable = require('./_isFlattenable');\n\n/**\n * The base implementation of `_.flatten` with support for restricting flattening.\n *\n * @private\n * @param {Array} array The array to flatten.\n * @param {number} depth The maximum recursion depth.\n * @param {boolean} [predicate=isFlattenable] The function invoked per iteration.\n * @param {boolean} [isStrict] Restrict to values that pass `predicate` checks.\n * @param {Array} [result=[]] The initial result value.\n * @returns {Array} Returns the new flattened array.\n */\nfunction baseFlatten(array, depth, predicate, isStrict, result) {\n  var index = -1,\n      length = array.length;\n\n  predicate || (predicate = isFlattenable);\n  result || (result = []);\n\n  while (++index < length) {\n    var value = array[index];\n    if (depth > 0 && predicate(value)) {\n      if (depth > 1) {\n        // Recursively flatten arrays (susceptible to call stack limits).\n        baseFlatten(value, depth - 1, predicate, isStrict, result);\n      } else {\n        arrayPush(result, value);\n      }\n    } else if (!isStrict) {\n      result[result.length] = value;\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseFlatten;\n", "/**\n * The base implementation of `_.findIndex` and `_.findLastIndex` without\n * support for iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Function} predicate The function invoked per iteration.\n * @param {number} fromIndex The index to search from.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseFindIndex(array, predicate, fromIndex, fromRight) {\n  var length = array.length,\n      index = fromIndex + (fromRight ? 1 : -1);\n\n  while ((fromRight ? index-- : ++index < length)) {\n    if (predicate(array[index], index, array)) {\n      return index;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = baseFindIndex;\n", "/**\n * The base implementation of `_.isNaN` without support for number objects.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is `NaN`, else `false`.\n */\nfunction baseIsNaN(value) {\n  return value !== value;\n}\n\nmodule.exports = baseIsNaN;\n", "/**\n * A specialized version of `_.indexOf` which performs strict equality\n * comparisons of values, i.e. `===`.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @param {number} fromIndex The index to search from.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction strictIndexOf(array, value, fromIndex) {\n  var index = fromIndex - 1,\n      length = array.length;\n\n  while (++index < length) {\n    if (array[index] === value) {\n      return index;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = strictIndexOf;\n", "var baseFindIndex = require('./_baseFindIndex'),\n    baseIsNaN = require('./_baseIsNaN'),\n    strictIndexOf = require('./_strictIndexOf');\n\n/**\n * The base implementation of `_.indexOf` without `fromIndex` bounds checks.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @param {number} fromIndex The index to search from.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseIndexOf(array, value, fromIndex) {\n  return value === value\n    ? strictIndexOf(array, value, fromIndex)\n    : baseFindIndex(array, baseIsNaN, fromIndex);\n}\n\nmodule.exports = baseIndexOf;\n", "var baseIndexOf = require('./_baseIndexOf');\n\n/**\n * A specialized version of `_.includes` for arrays without support for\n * specifying an index to search from.\n *\n * @private\n * @param {Array} [array] The array to inspect.\n * @param {*} target The value to search for.\n * @returns {boolean} Returns `true` if `target` is found, else `false`.\n */\nfunction arrayIncludes(array, value) {\n  var length = array == null ? 0 : array.length;\n  return !!length && baseIndexOf(array, value, 0) > -1;\n}\n\nmodule.exports = arrayIncludes;\n", "/**\n * This function is like `arrayIncludes` except that it accepts a comparator.\n *\n * @private\n * @param {Array} [array] The array to inspect.\n * @param {*} target The value to search for.\n * @param {Function} comparator The comparator invoked per element.\n * @returns {boolean} Returns `true` if `target` is found, else `false`.\n */\nfunction arrayIncludesWith(array, value, comparator) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (comparator(value, array[index])) {\n      return true;\n    }\n  }\n  return false;\n}\n\nmodule.exports = arrayIncludesWith;\n", "/**\n * This method returns `undefined`.\n *\n * @static\n * @memberOf _\n * @since 2.3.0\n * @category Util\n * @example\n *\n * _.times(2, _.noop);\n * // => [undefined, undefined]\n */\nfunction noop() {\n  // No operation performed.\n}\n\nmodule.exports = noop;\n", "var Set = require('./_Set'),\n    noop = require('./noop'),\n    setToArray = require('./_setToArray');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/**\n * Creates a set object of `values`.\n *\n * @private\n * @param {Array} values The values to add to the set.\n * @returns {Object} Returns the new set.\n */\nvar createSet = !(Set && (1 / setToArray(new Set([,-0]))[1]) == INFINITY) ? noop : function(values) {\n  return new Set(values);\n};\n\nmodule.exports = createSet;\n", "var SetCache = require('./_SetCache'),\n    arrayIncludes = require('./_arrayIncludes'),\n    arrayIncludesWith = require('./_arrayIncludesWith'),\n    cacheHas = require('./_cacheHas'),\n    createSet = require('./_createSet'),\n    setToArray = require('./_setToArray');\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * The base implementation of `_.uniqBy` without support for iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Function} [iteratee] The iteratee invoked per element.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns the new duplicate free array.\n */\nfunction baseUniq(array, iteratee, comparator) {\n  var index = -1,\n      includes = arrayIncludes,\n      length = array.length,\n      isCommon = true,\n      result = [],\n      seen = result;\n\n  if (comparator) {\n    isCommon = false;\n    includes = arrayIncludesWith;\n  }\n  else if (length >= LARGE_ARRAY_SIZE) {\n    var set = iteratee ? null : createSet(array);\n    if (set) {\n      return setToArray(set);\n    }\n    isCommon = false;\n    includes = cacheHas;\n    seen = new SetCache;\n  }\n  else {\n    seen = iteratee ? [] : result;\n  }\n  outer:\n  while (++index < length) {\n    var value = array[index],\n        computed = iteratee ? iteratee(value) : value;\n\n    value = (comparator || value !== 0) ? value : 0;\n    if (isCommon && computed === computed) {\n      var seenIndex = seen.length;\n      while (seenIndex--) {\n        if (seen[seenIndex] === computed) {\n          continue outer;\n        }\n      }\n      if (iteratee) {\n        seen.push(computed);\n      }\n      result.push(value);\n    }\n    else if (!includes(seen, computed, comparator)) {\n      if (seen !== result) {\n        seen.push(computed);\n      }\n      result.push(value);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseUniq;\n", "var baseFlatten = require('./_baseFlatten'),\n    baseRest = require('./_baseRest'),\n    baseUniq = require('./_baseUniq'),\n    isArrayLikeObject = require('./isArrayLikeObject');\n\n/**\n * Creates an array of unique values, in order, from all given arrays using\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {...Array} [arrays] The arrays to inspect.\n * @returns {Array} Returns the new array of combined values.\n * @example\n *\n * _.union([2], [1, 2]);\n * // => [2, 1]\n */\nvar union = baseRest(function(arrays) {\n  return baseUniq(baseFlatten(arrays, 1, isArrayLikeObject, true));\n});\n\nmodule.exports = union;\n", "var arrayMap = require('./_arrayMap');\n\n/**\n * The base implementation of `_.values` and `_.valuesIn` which creates an\n * array of `object` property values corresponding to the property names\n * of `props`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array} props The property names to get values for.\n * @returns {Object} Returns the array of property values.\n */\nfunction baseValues(object, props) {\n  return arrayMap(props, function(key) {\n    return object[key];\n  });\n}\n\nmodule.exports = baseValues;\n", "var baseValues = require('./_baseValues'),\n    keys = require('./keys');\n\n/**\n * Creates an array of the own enumerable string keyed property values of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property values.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.values(new Foo);\n * // => [1, 2] (iteration order is not guaranteed)\n *\n * _.values('hi');\n * // => ['h', 'i']\n */\nfunction values(object) {\n  return object == null ? [] : baseValues(object, keys(object));\n}\n\nmodule.exports = values;\n", "/* global window */\n\nvar lodash;\n\nif (typeof require === \"function\") {\n  try {\n    lodash = {\n      clone: require(\"lodash/clone\"),\n      constant: require(\"lodash/constant\"),\n      each: require(\"lodash/each\"),\n      filter: require(\"lodash/filter\"),\n      has:  require(\"lodash/has\"),\n      isArray: require(\"lodash/isArray\"),\n      isEmpty: require(\"lodash/isEmpty\"),\n      isFunction: require(\"lodash/isFunction\"),\n      isUndefined: require(\"lodash/isUndefined\"),\n      keys: require(\"lodash/keys\"),\n      map: require(\"lodash/map\"),\n      reduce: require(\"lodash/reduce\"),\n      size: require(\"lodash/size\"),\n      transform: require(\"lodash/transform\"),\n      union: require(\"lodash/union\"),\n      values: require(\"lodash/values\")\n    };\n  } catch (e) {\n    // continue regardless of error\n  }\n}\n\nif (!lodash) {\n  lodash = window._;\n}\n\nmodule.exports = lodash;\n", "\"use strict\";\n\nvar _ = require(\"./lodash\");\n\nmodule.exports = Graph;\n\nvar DEFAULT_EDGE_NAME = \"\\x00\";\nvar GRAPH_NODE = \"\\x00\";\nvar EDGE_KEY_DELIM = \"\\x01\";\n\n// Implementation notes:\n//\n//  * Node id query functions should return string ids for the nodes\n//  * Edge id query functions should return an \"edgeObj\", edge object, that is\n//    composed of enough information to uniquely identify an edge: {v, w, name}.\n//  * Internally we use an \"edgeId\", a stringified form of the edgeObj, to\n//    reference edges. This is because we need a performant way to look these\n//    edges up and, object properties, which have string keys, are the closest\n//    we're going to get to a performant hashtable in JavaScript.\n\nfunction Graph(opts) {\n  this._isDirected = _.has(opts, \"directed\") ? opts.directed : true;\n  this._isMultigraph = _.has(opts, \"multigraph\") ? opts.multigraph : false;\n  this._isCompound = _.has(opts, \"compound\") ? opts.compound : false;\n\n  // Label for the graph itself\n  this._label = undefined;\n\n  // Defaults to be set when creating a new node\n  this._defaultNodeLabelFn = _.constant(undefined);\n\n  // Defaults to be set when creating a new edge\n  this._defaultEdgeLabelFn = _.constant(undefined);\n\n  // v -> label\n  this._nodes = {};\n\n  if (this._isCompound) {\n    // v -> parent\n    this._parent = {};\n\n    // v -> children\n    this._children = {};\n    this._children[GRAPH_NODE] = {};\n  }\n\n  // v -> edgeObj\n  this._in = {};\n\n  // u -> v -> Number\n  this._preds = {};\n\n  // v -> edgeObj\n  this._out = {};\n\n  // v -> w -> Number\n  this._sucs = {};\n\n  // e -> edgeObj\n  this._edgeObjs = {};\n\n  // e -> label\n  this._edgeLabels = {};\n}\n\n/* Number of nodes in the graph. Should only be changed by the implementation. */\nGraph.prototype._nodeCount = 0;\n\n/* Number of edges in the graph. Should only be changed by the implementation. */\nGraph.prototype._edgeCount = 0;\n\n\n/* === Graph functions ========= */\n\nGraph.prototype.isDirected = function() {\n  return this._isDirected;\n};\n\nGraph.prototype.isMultigraph = function() {\n  return this._isMultigraph;\n};\n\nGraph.prototype.isCompound = function() {\n  return this._isCompound;\n};\n\nGraph.prototype.setGraph = function(label) {\n  this._label = label;\n  return this;\n};\n\nGraph.prototype.graph = function() {\n  return this._label;\n};\n\n\n/* === Node functions ========== */\n\nGraph.prototype.setDefaultNodeLabel = function(newDefault) {\n  if (!_.isFunction(newDefault)) {\n    newDefault = _.constant(newDefault);\n  }\n  this._defaultNodeLabelFn = newDefault;\n  return this;\n};\n\nGraph.prototype.nodeCount = function() {\n  return this._nodeCount;\n};\n\nGraph.prototype.nodes = function() {\n  return _.keys(this._nodes);\n};\n\nGraph.prototype.sources = function() {\n  var self = this;\n  return _.filter(this.nodes(), function(v) {\n    return _.isEmpty(self._in[v]);\n  });\n};\n\nGraph.prototype.sinks = function() {\n  var self = this;\n  return _.filter(this.nodes(), function(v) {\n    return _.isEmpty(self._out[v]);\n  });\n};\n\nGraph.prototype.setNodes = function(vs, value) {\n  var args = arguments;\n  var self = this;\n  _.each(vs, function(v) {\n    if (args.length > 1) {\n      self.setNode(v, value);\n    } else {\n      self.setNode(v);\n    }\n  });\n  return this;\n};\n\nGraph.prototype.setNode = function(v, value) {\n  if (_.has(this._nodes, v)) {\n    if (arguments.length > 1) {\n      this._nodes[v] = value;\n    }\n    return this;\n  }\n\n  this._nodes[v] = arguments.length > 1 ? value : this._defaultNodeLabelFn(v);\n  if (this._isCompound) {\n    this._parent[v] = GRAPH_NODE;\n    this._children[v] = {};\n    this._children[GRAPH_NODE][v] = true;\n  }\n  this._in[v] = {};\n  this._preds[v] = {};\n  this._out[v] = {};\n  this._sucs[v] = {};\n  ++this._nodeCount;\n  return this;\n};\n\nGraph.prototype.node = function(v) {\n  return this._nodes[v];\n};\n\nGraph.prototype.hasNode = function(v) {\n  return _.has(this._nodes, v);\n};\n\nGraph.prototype.removeNode =  function(v) {\n  var self = this;\n  if (_.has(this._nodes, v)) {\n    var removeEdge = function(e) { self.removeEdge(self._edgeObjs[e]); };\n    delete this._nodes[v];\n    if (this._isCompound) {\n      this._removeFromParentsChildList(v);\n      delete this._parent[v];\n      _.each(this.children(v), function(child) {\n        self.setParent(child);\n      });\n      delete this._children[v];\n    }\n    _.each(_.keys(this._in[v]), removeEdge);\n    delete this._in[v];\n    delete this._preds[v];\n    _.each(_.keys(this._out[v]), removeEdge);\n    delete this._out[v];\n    delete this._sucs[v];\n    --this._nodeCount;\n  }\n  return this;\n};\n\nGraph.prototype.setParent = function(v, parent) {\n  if (!this._isCompound) {\n    throw new Error(\"Cannot set parent in a non-compound graph\");\n  }\n\n  if (_.isUndefined(parent)) {\n    parent = GRAPH_NODE;\n  } else {\n    // Coerce parent to string\n    parent += \"\";\n    for (var ancestor = parent;\n      !_.isUndefined(ancestor);\n      ancestor = this.parent(ancestor)) {\n      if (ancestor === v) {\n        throw new Error(\"Setting \" + parent+ \" as parent of \" + v +\n                        \" would create a cycle\");\n      }\n    }\n\n    this.setNode(parent);\n  }\n\n  this.setNode(v);\n  this._removeFromParentsChildList(v);\n  this._parent[v] = parent;\n  this._children[parent][v] = true;\n  return this;\n};\n\nGraph.prototype._removeFromParentsChildList = function(v) {\n  delete this._children[this._parent[v]][v];\n};\n\nGraph.prototype.parent = function(v) {\n  if (this._isCompound) {\n    var parent = this._parent[v];\n    if (parent !== GRAPH_NODE) {\n      return parent;\n    }\n  }\n};\n\nGraph.prototype.children = function(v) {\n  if (_.isUndefined(v)) {\n    v = GRAPH_NODE;\n  }\n\n  if (this._isCompound) {\n    var children = this._children[v];\n    if (children) {\n      return _.keys(children);\n    }\n  } else if (v === GRAPH_NODE) {\n    return this.nodes();\n  } else if (this.hasNode(v)) {\n    return [];\n  }\n};\n\nGraph.prototype.predecessors = function(v) {\n  var predsV = this._preds[v];\n  if (predsV) {\n    return _.keys(predsV);\n  }\n};\n\nGraph.prototype.successors = function(v) {\n  var sucsV = this._sucs[v];\n  if (sucsV) {\n    return _.keys(sucsV);\n  }\n};\n\nGraph.prototype.neighbors = function(v) {\n  var preds = this.predecessors(v);\n  if (preds) {\n    return _.union(preds, this.successors(v));\n  }\n};\n\nGraph.prototype.isLeaf = function (v) {\n  var neighbors;\n  if (this.isDirected()) {\n    neighbors = this.successors(v);\n  } else {\n    neighbors = this.neighbors(v);\n  }\n  return neighbors.length === 0;\n};\n\nGraph.prototype.filterNodes = function(filter) {\n  var copy = new this.constructor({\n    directed: this._isDirected,\n    multigraph: this._isMultigraph,\n    compound: this._isCompound\n  });\n\n  copy.setGraph(this.graph());\n\n  var self = this;\n  _.each(this._nodes, function(value, v) {\n    if (filter(v)) {\n      copy.setNode(v, value);\n    }\n  });\n\n  _.each(this._edgeObjs, function(e) {\n    if (copy.hasNode(e.v) && copy.hasNode(e.w)) {\n      copy.setEdge(e, self.edge(e));\n    }\n  });\n\n  var parents = {};\n  function findParent(v) {\n    var parent = self.parent(v);\n    if (parent === undefined || copy.hasNode(parent)) {\n      parents[v] = parent;\n      return parent;\n    } else if (parent in parents) {\n      return parents[parent];\n    } else {\n      return findParent(parent);\n    }\n  }\n\n  if (this._isCompound) {\n    _.each(copy.nodes(), function(v) {\n      copy.setParent(v, findParent(v));\n    });\n  }\n\n  return copy;\n};\n\n/* === Edge functions ========== */\n\nGraph.prototype.setDefaultEdgeLabel = function(newDefault) {\n  if (!_.isFunction(newDefault)) {\n    newDefault = _.constant(newDefault);\n  }\n  this._defaultEdgeLabelFn = newDefault;\n  return this;\n};\n\nGraph.prototype.edgeCount = function() {\n  return this._edgeCount;\n};\n\nGraph.prototype.edges = function() {\n  return _.values(this._edgeObjs);\n};\n\nGraph.prototype.setPath = function(vs, value) {\n  var self = this;\n  var args = arguments;\n  _.reduce(vs, function(v, w) {\n    if (args.length > 1) {\n      self.setEdge(v, w, value);\n    } else {\n      self.setEdge(v, w);\n    }\n    return w;\n  });\n  return this;\n};\n\n/*\n * setEdge(v, w, [value, [name]])\n * setEdge({ v, w, [name] }, [value])\n */\nGraph.prototype.setEdge = function() {\n  var v, w, name, value;\n  var valueSpecified = false;\n  var arg0 = arguments[0];\n\n  if (typeof arg0 === \"object\" && arg0 !== null && \"v\" in arg0) {\n    v = arg0.v;\n    w = arg0.w;\n    name = arg0.name;\n    if (arguments.length === 2) {\n      value = arguments[1];\n      valueSpecified = true;\n    }\n  } else {\n    v = arg0;\n    w = arguments[1];\n    name = arguments[3];\n    if (arguments.length > 2) {\n      value = arguments[2];\n      valueSpecified = true;\n    }\n  }\n\n  v = \"\" + v;\n  w = \"\" + w;\n  if (!_.isUndefined(name)) {\n    name = \"\" + name;\n  }\n\n  var e = edgeArgsToId(this._isDirected, v, w, name);\n  if (_.has(this._edgeLabels, e)) {\n    if (valueSpecified) {\n      this._edgeLabels[e] = value;\n    }\n    return this;\n  }\n\n  if (!_.isUndefined(name) && !this._isMultigraph) {\n    throw new Error(\"Cannot set a named edge when isMultigraph = false\");\n  }\n\n  // It didn't exist, so we need to create it.\n  // First ensure the nodes exist.\n  this.setNode(v);\n  this.setNode(w);\n\n  this._edgeLabels[e] = valueSpecified ? value : this._defaultEdgeLabelFn(v, w, name);\n\n  var edgeObj = edgeArgsToObj(this._isDirected, v, w, name);\n  // Ensure we add undirected edges in a consistent way.\n  v = edgeObj.v;\n  w = edgeObj.w;\n\n  Object.freeze(edgeObj);\n  this._edgeObjs[e] = edgeObj;\n  incrementOrInitEntry(this._preds[w], v);\n  incrementOrInitEntry(this._sucs[v], w);\n  this._in[w][e] = edgeObj;\n  this._out[v][e] = edgeObj;\n  this._edgeCount++;\n  return this;\n};\n\nGraph.prototype.edge = function(v, w, name) {\n  var e = (arguments.length === 1\n    ? edgeObjToId(this._isDirected, arguments[0])\n    : edgeArgsToId(this._isDirected, v, w, name));\n  return this._edgeLabels[e];\n};\n\nGraph.prototype.hasEdge = function(v, w, name) {\n  var e = (arguments.length === 1\n    ? edgeObjToId(this._isDirected, arguments[0])\n    : edgeArgsToId(this._isDirected, v, w, name));\n  return _.has(this._edgeLabels, e);\n};\n\nGraph.prototype.removeEdge = function(v, w, name) {\n  var e = (arguments.length === 1\n    ? edgeObjToId(this._isDirected, arguments[0])\n    : edgeArgsToId(this._isDirected, v, w, name));\n  var edge = this._edgeObjs[e];\n  if (edge) {\n    v = edge.v;\n    w = edge.w;\n    delete this._edgeLabels[e];\n    delete this._edgeObjs[e];\n    decrementOrRemoveEntry(this._preds[w], v);\n    decrementOrRemoveEntry(this._sucs[v], w);\n    delete this._in[w][e];\n    delete this._out[v][e];\n    this._edgeCount--;\n  }\n  return this;\n};\n\nGraph.prototype.inEdges = function(v, u) {\n  var inV = this._in[v];\n  if (inV) {\n    var edges = _.values(inV);\n    if (!u) {\n      return edges;\n    }\n    return _.filter(edges, function(edge) { return edge.v === u; });\n  }\n};\n\nGraph.prototype.outEdges = function(v, w) {\n  var outV = this._out[v];\n  if (outV) {\n    var edges = _.values(outV);\n    if (!w) {\n      return edges;\n    }\n    return _.filter(edges, function(edge) { return edge.w === w; });\n  }\n};\n\nGraph.prototype.nodeEdges = function(v, w) {\n  var inEdges = this.inEdges(v, w);\n  if (inEdges) {\n    return inEdges.concat(this.outEdges(v, w));\n  }\n};\n\nfunction incrementOrInitEntry(map, k) {\n  if (map[k]) {\n    map[k]++;\n  } else {\n    map[k] = 1;\n  }\n}\n\nfunction decrementOrRemoveEntry(map, k) {\n  if (!--map[k]) { delete map[k]; }\n}\n\nfunction edgeArgsToId(isDirected, v_, w_, name) {\n  var v = \"\" + v_;\n  var w = \"\" + w_;\n  if (!isDirected && v > w) {\n    var tmp = v;\n    v = w;\n    w = tmp;\n  }\n  return v + EDGE_KEY_DELIM + w + EDGE_KEY_DELIM +\n             (_.isUndefined(name) ? DEFAULT_EDGE_NAME : name);\n}\n\nfunction edgeArgsToObj(isDirected, v_, w_, name) {\n  var v = \"\" + v_;\n  var w = \"\" + w_;\n  if (!isDirected && v > w) {\n    var tmp = v;\n    v = w;\n    w = tmp;\n  }\n  var edgeObj =  { v: v, w: w };\n  if (name) {\n    edgeObj.name = name;\n  }\n  return edgeObj;\n}\n\nfunction edgeObjToId(isDirected, edgeObj) {\n  return edgeArgsToId(isDirected, edgeObj.v, edgeObj.w, edgeObj.name);\n}\n", "module.exports = '2.1.8';\n", "// Includes only the \"core\" of graphlib\nmodule.exports = {\n  Graph: require(\"./graph\"),\n  version: require(\"./version\")\n};\n", "var _ = require(\"./lodash\");\nvar Graph = require(\"./graph\");\n\nmodule.exports = {\n  write: write,\n  read: read\n};\n\nfunction write(g) {\n  var json = {\n    options: {\n      directed: g.isDirected(),\n      multigraph: g.isMultigraph(),\n      compound: g.isCompound()\n    },\n    nodes: writeNodes(g),\n    edges: writeEdges(g)\n  };\n  if (!_.isUndefined(g.graph())) {\n    json.value = _.clone(g.graph());\n  }\n  return json;\n}\n\nfunction writeNodes(g) {\n  return _.map(g.nodes(), function(v) {\n    var nodeValue = g.node(v);\n    var parent = g.parent(v);\n    var node = { v: v };\n    if (!_.isUndefined(nodeValue)) {\n      node.value = nodeValue;\n    }\n    if (!_.isUndefined(parent)) {\n      node.parent = parent;\n    }\n    return node;\n  });\n}\n\nfunction writeEdges(g) {\n  return _.map(g.edges(), function(e) {\n    var edgeValue = g.edge(e);\n    var edge = { v: e.v, w: e.w };\n    if (!_.isUndefined(e.name)) {\n      edge.name = e.name;\n    }\n    if (!_.isUndefined(edgeValue)) {\n      edge.value = edgeValue;\n    }\n    return edge;\n  });\n}\n\nfunction read(json) {\n  var g = new Graph(json.options).setGraph(json.value);\n  _.each(json.nodes, function(entry) {\n    g.setNode(entry.v, entry.value);\n    if (entry.parent) {\n      g.setParent(entry.v, entry.parent);\n    }\n  });\n  _.each(json.edges, function(entry) {\n    g.setEdge({ v: entry.v, w: entry.w, name: entry.name }, entry.value);\n  });\n  return g;\n}\n", "var _ = require(\"../lodash\");\n\nmodule.exports = components;\n\nfunction components(g) {\n  var visited = {};\n  var cmpts = [];\n  var cmpt;\n\n  function dfs(v) {\n    if (_.has(visited, v)) return;\n    visited[v] = true;\n    cmpt.push(v);\n    _.each(g.successors(v), dfs);\n    _.each(g.predecessors(v), dfs);\n  }\n\n  _.each(g.nodes(), function(v) {\n    cmpt = [];\n    dfs(v);\n    if (cmpt.length) {\n      cmpts.push(cmpt);\n    }\n  });\n\n  return cmpts;\n}\n", "var _ = require(\"../lodash\");\n\nmodule.exports = PriorityQueue;\n\n/**\n * A min-priority queue data structure. This algorithm is derived from Cormen,\n * et al., \"Introduction to Algorithms\". The basic idea of a min-priority\n * queue is that you can efficiently (in O(1) time) get the smallest key in\n * the queue. Adding and removing elements takes O(log n) time. A key can\n * have its priority decreased in O(log n) time.\n */\nfunction PriorityQueue() {\n  this._arr = [];\n  this._keyIndices = {};\n}\n\n/**\n * Returns the number of elements in the queue. Takes `O(1)` time.\n */\nPriorityQueue.prototype.size = function() {\n  return this._arr.length;\n};\n\n/**\n * Returns the keys that are in the queue. Takes `O(n)` time.\n */\nPriorityQueue.prototype.keys = function() {\n  return this._arr.map(function(x) { return x.key; });\n};\n\n/**\n * Returns `true` if **key** is in the queue and `false` if not.\n */\nPriorityQueue.prototype.has = function(key) {\n  return _.has(this._keyIndices, key);\n};\n\n/**\n * Returns the priority for **key**. If **key** is not present in the queue\n * then this function returns `undefined`. Takes `O(1)` time.\n *\n * @param {Object} key\n */\nPriorityQueue.prototype.priority = function(key) {\n  var index = this._keyIndices[key];\n  if (index !== undefined) {\n    return this._arr[index].priority;\n  }\n};\n\n/**\n * Returns the key for the minimum element in this queue. If the queue is\n * empty this function throws an Error. Takes `O(1)` time.\n */\nPriorityQueue.prototype.min = function() {\n  if (this.size() === 0) {\n    throw new Error(\"Queue underflow\");\n  }\n  return this._arr[0].key;\n};\n\n/**\n * Inserts a new key into the priority queue. If the key already exists in\n * the queue this function returns `false`; otherwise it will return `true`.\n * Takes `O(n)` time.\n *\n * @param {Object} key the key to add\n * @param {Number} priority the initial priority for the key\n */\nPriorityQueue.prototype.add = function(key, priority) {\n  var keyIndices = this._keyIndices;\n  key = String(key);\n  if (!_.has(keyIndices, key)) {\n    var arr = this._arr;\n    var index = arr.length;\n    keyIndices[key] = index;\n    arr.push({key: key, priority: priority});\n    this._decrease(index);\n    return true;\n  }\n  return false;\n};\n\n/**\n * Removes and returns the smallest key in the queue. Takes `O(log n)` time.\n */\nPriorityQueue.prototype.removeMin = function() {\n  this._swap(0, this._arr.length - 1);\n  var min = this._arr.pop();\n  delete this._keyIndices[min.key];\n  this._heapify(0);\n  return min.key;\n};\n\n/**\n * Decreases the priority for **key** to **priority**. If the new priority is\n * greater than the previous priority, this function will throw an Error.\n *\n * @param {Object} key the key for which to raise priority\n * @param {Number} priority the new priority for the key\n */\nPriorityQueue.prototype.decrease = function(key, priority) {\n  var index = this._keyIndices[key];\n  if (priority > this._arr[index].priority) {\n    throw new Error(\"New priority is greater than current priority. \" +\n        \"Key: \" + key + \" Old: \" + this._arr[index].priority + \" New: \" + priority);\n  }\n  this._arr[index].priority = priority;\n  this._decrease(index);\n};\n\nPriorityQueue.prototype._heapify = function(i) {\n  var arr = this._arr;\n  var l = 2 * i;\n  var r = l + 1;\n  var largest = i;\n  if (l < arr.length) {\n    largest = arr[l].priority < arr[largest].priority ? l : largest;\n    if (r < arr.length) {\n      largest = arr[r].priority < arr[largest].priority ? r : largest;\n    }\n    if (largest !== i) {\n      this._swap(i, largest);\n      this._heapify(largest);\n    }\n  }\n};\n\nPriorityQueue.prototype._decrease = function(index) {\n  var arr = this._arr;\n  var priority = arr[index].priority;\n  var parent;\n  while (index !== 0) {\n    parent = index >> 1;\n    if (arr[parent].priority < priority) {\n      break;\n    }\n    this._swap(index, parent);\n    index = parent;\n  }\n};\n\nPriorityQueue.prototype._swap = function(i, j) {\n  var arr = this._arr;\n  var keyIndices = this._keyIndices;\n  var origArrI = arr[i];\n  var origArrJ = arr[j];\n  arr[i] = origArrJ;\n  arr[j] = origArrI;\n  keyIndices[origArrJ.key] = i;\n  keyIndices[origArrI.key] = j;\n};\n", "var _ = require(\"../lodash\");\nvar PriorityQueue = require(\"../data/priority-queue\");\n\nmodule.exports = dijkstra;\n\nvar DEFAULT_WEIGHT_FUNC = _.constant(1);\n\nfunction dijkstra(g, source, weightFn, edgeFn) {\n  return runDijkstra(g, String(source),\n    weightFn || DEFAULT_WEIGHT_FUNC,\n    edgeFn || function(v) { return g.outEdges(v); });\n}\n\nfunction runDijkstra(g, source, weightFn, edgeFn) {\n  var results = {};\n  var pq = new PriorityQueue();\n  var v, vEntry;\n\n  var updateNeighbors = function(edge) {\n    var w = edge.v !== v ? edge.v : edge.w;\n    var wEntry = results[w];\n    var weight = weightFn(edge);\n    var distance = vEntry.distance + weight;\n\n    if (weight < 0) {\n      throw new Error(\"dijkstra does not allow negative edge weights. \" +\n                      \"Bad edge: \" + edge + \" Weight: \" + weight);\n    }\n\n    if (distance < wEntry.distance) {\n      wEntry.distance = distance;\n      wEntry.predecessor = v;\n      pq.decrease(w, distance);\n    }\n  };\n\n  g.nodes().forEach(function(v) {\n    var distance = v === source ? 0 : Number.POSITIVE_INFINITY;\n    results[v] = { distance: distance };\n    pq.add(v, distance);\n  });\n\n  while (pq.size() > 0) {\n    v = pq.removeMin();\n    vEntry = results[v];\n    if (vEntry.distance === Number.POSITIVE_INFINITY) {\n      break;\n    }\n\n    edgeFn(v).forEach(updateNeighbors);\n  }\n\n  return results;\n}\n", "var dijkstra = require(\"./dijkstra\");\nvar _ = require(\"../lodash\");\n\nmodule.exports = dijkstraAll;\n\nfunction dijkstraAll(g, weightFunc, edgeFunc) {\n  return _.transform(g.nodes(), function(acc, v) {\n    acc[v] = dijkstra(g, v, weightFunc, edgeFunc);\n  }, {});\n}\n", "var _ = require(\"../lodash\");\n\nmodule.exports = tarjan;\n\nfunction tarjan(g) {\n  var index = 0;\n  var stack = [];\n  var visited = {}; // node id -> { onStack, lowlink, index }\n  var results = [];\n\n  function dfs(v) {\n    var entry = visited[v] = {\n      onStack: true,\n      lowlink: index,\n      index: index++\n    };\n    stack.push(v);\n\n    g.successors(v).forEach(function(w) {\n      if (!_.has(visited, w)) {\n        dfs(w);\n        entry.lowlink = Math.min(entry.lowlink, visited[w].lowlink);\n      } else if (visited[w].onStack) {\n        entry.lowlink = Math.min(entry.lowlink, visited[w].index);\n      }\n    });\n\n    if (entry.lowlink === entry.index) {\n      var cmpt = [];\n      var w;\n      do {\n        w = stack.pop();\n        visited[w].onStack = false;\n        cmpt.push(w);\n      } while (v !== w);\n      results.push(cmpt);\n    }\n  }\n\n  g.nodes().forEach(function(v) {\n    if (!_.has(visited, v)) {\n      dfs(v);\n    }\n  });\n\n  return results;\n}\n", "var _ = require(\"../lodash\");\nvar tarjan = require(\"./tarjan\");\n\nmodule.exports = findCycles;\n\nfunction findCycles(g) {\n  return _.filter(tarjan(g), function(cmpt) {\n    return cmpt.length > 1 || (cmpt.length === 1 && g.hasEdge(cmpt[0], cmpt[0]));\n  });\n}\n", "var _ = require(\"../lodash\");\n\nmodule.exports = floydWarshall;\n\nvar DEFAULT_WEIGHT_FUNC = _.constant(1);\n\nfunction floydWarshall(g, weightFn, edgeFn) {\n  return runFloydWarshall(g,\n    weightFn || DEFAULT_WEIGHT_FUNC,\n    edgeFn || function(v) { return g.outEdges(v); });\n}\n\nfunction runFloydWarshall(g, weightFn, edgeFn) {\n  var results = {};\n  var nodes = g.nodes();\n\n  nodes.forEach(function(v) {\n    results[v] = {};\n    results[v][v] = { distance: 0 };\n    nodes.forEach(function(w) {\n      if (v !== w) {\n        results[v][w] = { distance: Number.POSITIVE_INFINITY };\n      }\n    });\n    edgeFn(v).forEach(function(edge) {\n      var w = edge.v === v ? edge.w : edge.v;\n      var d = weightFn(edge);\n      results[v][w] = { distance: d, predecessor: v };\n    });\n  });\n\n  nodes.forEach(function(k) {\n    var rowK = results[k];\n    nodes.forEach(function(i) {\n      var rowI = results[i];\n      nodes.forEach(function(j) {\n        var ik = rowI[k];\n        var kj = rowK[j];\n        var ij = rowI[j];\n        var altDistance = ik.distance + kj.distance;\n        if (altDistance < ij.distance) {\n          ij.distance = altDistance;\n          ij.predecessor = kj.predecessor;\n        }\n      });\n    });\n  });\n\n  return results;\n}\n", "var _ = require(\"../lodash\");\n\nmodule.exports = topsort;\ntopsort.CycleException = CycleException;\n\nfunction topsort(g) {\n  var visited = {};\n  var stack = {};\n  var results = [];\n\n  function visit(node) {\n    if (_.has(stack, node)) {\n      throw new CycleException();\n    }\n\n    if (!_.has(visited, node)) {\n      stack[node] = true;\n      visited[node] = true;\n      _.each(g.predecessors(node), visit);\n      delete stack[node];\n      results.push(node);\n    }\n  }\n\n  _.each(g.sinks(), visit);\n\n  if (_.size(visited) !== g.nodeCount()) {\n    throw new CycleException();\n  }\n\n  return results;\n}\n\nfunction CycleException() {}\nCycleException.prototype = new Error(); // must be an instance of Error to pass testing", "var topsort = require(\"./topsort\");\n\nmodule.exports = isAcyclic;\n\nfunction isAcyclic(g) {\n  try {\n    topsort(g);\n  } catch (e) {\n    if (e instanceof topsort.CycleException) {\n      return false;\n    }\n    throw e;\n  }\n  return true;\n}\n", "var _ = require(\"../lodash\");\n\nmodule.exports = dfs;\n\n/*\n * A helper that preforms a pre- or post-order traversal on the input graph\n * and returns the nodes in the order they were visited. If the graph is\n * undirected then this algorithm will navigate using neighbors. If the graph\n * is directed then this algorithm will navigate using successors.\n *\n * Order must be one of \"pre\" or \"post\".\n */\nfunction dfs(g, vs, order) {\n  if (!_.isArray(vs)) {\n    vs = [vs];\n  }\n\n  var navigation = (g.isDirected() ? g.successors : g.neighbors).bind(g);\n\n  var acc = [];\n  var visited = {};\n  _.each(vs, function(v) {\n    if (!g.hasNode(v)) {\n      throw new Error(\"Graph does not have node: \" + v);\n    }\n\n    doDfs(g, v, order === \"post\", visited, navigation, acc);\n  });\n  return acc;\n}\n\nfunction doDfs(g, v, postorder, visited, navigation, acc) {\n  if (!_.has(visited, v)) {\n    visited[v] = true;\n\n    if (!postorder) { acc.push(v); }\n    _.each(navigation(v), function(w) {\n      doDfs(g, w, postorder, visited, navigation, acc);\n    });\n    if (postorder) { acc.push(v); }\n  }\n}\n", "var dfs = require(\"./dfs\");\n\nmodule.exports = postorder;\n\nfunction postorder(g, vs) {\n  return dfs(g, vs, \"post\");\n}\n", "var dfs = require(\"./dfs\");\n\nmodule.exports = preorder;\n\nfunction preorder(g, vs) {\n  return dfs(g, vs, \"pre\");\n}\n", "var _ = require(\"../lodash\");\nvar Graph = require(\"../graph\");\nvar PriorityQueue = require(\"../data/priority-queue\");\n\nmodule.exports = prim;\n\nfunction prim(g, weightFunc) {\n  var result = new Graph();\n  var parents = {};\n  var pq = new PriorityQueue();\n  var v;\n\n  function updateNeighbors(edge) {\n    var w = edge.v === v ? edge.w : edge.v;\n    var pri = pq.priority(w);\n    if (pri !== undefined) {\n      var edgeWeight = weightFunc(edge);\n      if (edgeWeight < pri) {\n        parents[w] = v;\n        pq.decrease(w, edgeWeight);\n      }\n    }\n  }\n\n  if (g.nodeCount() === 0) {\n    return result;\n  }\n\n  _.each(g.nodes(), function(v) {\n    pq.add(v, Number.POSITIVE_INFINITY);\n    result.setNode(v);\n  });\n\n  // Start from an arbitrary node\n  pq.decrease(g.nodes()[0], 0);\n\n  var init = false;\n  while (pq.size() > 0) {\n    v = pq.removeMin();\n    if (_.has(parents, v)) {\n      result.setEdge(v, parents[v]);\n    } else if (init) {\n      throw new Error(\"Input graph is not connected: \" + g);\n    } else {\n      init = true;\n    }\n\n    g.nodeEdges(v).forEach(updateNeighbors);\n  }\n\n  return result;\n}\n", "module.exports = {\n  components: require(\"./components\"),\n  dijkstra: require(\"./dijkstra\"),\n  dijkstraAll: require(\"./dijkstra-all\"),\n  findCycles: require(\"./find-cycles\"),\n  floydWarshall: require(\"./floyd-warshall\"),\n  isAcyclic: require(\"./is-acyclic\"),\n  postorder: require(\"./postorder\"),\n  preorder: require(\"./preorder\"),\n  prim: require(\"./prim\"),\n  tarjan: require(\"./tarjan\"),\n  topsort: require(\"./topsort\")\n};\n", "/**\n * Copyright (c) 2014, Chris Pettitt\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n * list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n * this list of conditions and the following disclaimer in the documentation\n * and/or other materials provided with the distribution.\n *\n * 3. Neither the name of the copyright holder nor the names of its contributors\n * may be used to endorse or promote products derived from this software without\n * specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nvar lib = require(\"./lib\");\n\nmodule.exports = {\n  Graph: lib.Graph,\n  json: require(\"./lib/json\"),\n  alg: require(\"./lib/alg\"),\n  version: lib.version\n};\n", "/* global window */\n\nvar graphlib;\n\nif (typeof require === \"function\") {\n  try {\n    graphlib = require(\"graphlib\");\n  } catch (e) {\n    // continue regardless of error\n  }\n}\n\nif (!graphlib) {\n  graphlib = window.graphlib;\n}\n\nmodule.exports = graphlib;\n", "var baseRest = require('./_baseRest'),\n    eq = require('./eq'),\n    isIterateeCall = require('./_isIterateeCall'),\n    keysIn = require('./keysIn');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Assigns own and inherited enumerable string keyed properties of source\n * objects to the destination object for all destination properties that\n * resolve to `undefined`. Source objects are applied from left to right.\n * Once a property is set, additional values of the same property are ignored.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @see _.defaultsDeep\n * @example\n *\n * _.defaults({ 'a': 1 }, { 'b': 2 }, { 'a': 3 });\n * // => { 'a': 1, 'b': 2 }\n */\nvar defaults = baseRest(function(object, sources) {\n  object = Object(object);\n\n  var index = -1;\n  var length = sources.length;\n  var guard = length > 2 ? sources[2] : undefined;\n\n  if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n    length = 1;\n  }\n\n  while (++index < length) {\n    var source = sources[index];\n    var props = keysIn(source);\n    var propsIndex = -1;\n    var propsLength = props.length;\n\n    while (++propsIndex < propsLength) {\n      var key = props[propsIndex];\n      var value = object[key];\n\n      if (value === undefined ||\n          (eq(value, objectProto[key]) && !hasOwnProperty.call(object, key))) {\n        object[key] = source[key];\n      }\n    }\n  }\n\n  return object;\n});\n\nmodule.exports = defaults;\n", "var baseIteratee = require('./_baseIteratee'),\n    isArrayLike = require('./isArrayLike'),\n    keys = require('./keys');\n\n/**\n * Creates a `_.find` or `_.findLast` function.\n *\n * @private\n * @param {Function} findIndexFunc The function to find the collection index.\n * @returns {Function} Returns the new find function.\n */\nfunction createFind(findIndexFunc) {\n  return function(collection, predicate, fromIndex) {\n    var iterable = Object(collection);\n    if (!isArrayLike(collection)) {\n      var iteratee = baseIteratee(predicate, 3);\n      collection = keys(collection);\n      predicate = function(key) { return iteratee(iterable[key], key, iterable); };\n    }\n    var index = findIndexFunc(collection, predicate, fromIndex);\n    return index > -1 ? iterable[iteratee ? collection[index] : index] : undefined;\n  };\n}\n\nmodule.exports = createFind;\n", "var toNumber = require('./toNumber');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0,\n    MAX_INTEGER = 1.7976931348623157e+308;\n\n/**\n * Converts `value` to a finite number.\n *\n * @static\n * @memberOf _\n * @since 4.12.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted number.\n * @example\n *\n * _.toFinite(3.2);\n * // => 3.2\n *\n * _.toFinite(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toFinite(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toFinite('3.2');\n * // => 3.2\n */\nfunction toFinite(value) {\n  if (!value) {\n    return value === 0 ? value : 0;\n  }\n  value = toNumber(value);\n  if (value === INFINITY || value === -INFINITY) {\n    var sign = (value < 0 ? -1 : 1);\n    return sign * MAX_INTEGER;\n  }\n  return value === value ? value : 0;\n}\n\nmodule.exports = toFinite;\n", "var toFinite = require('./toFinite');\n\n/**\n * Converts `value` to an integer.\n *\n * **Note:** This method is loosely based on\n * [`ToInteger`](http://www.ecma-international.org/ecma-262/7.0/#sec-tointeger).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted integer.\n * @example\n *\n * _.toInteger(3.2);\n * // => 3\n *\n * _.toInteger(Number.MIN_VALUE);\n * // => 0\n *\n * _.toInteger(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toInteger('3.2');\n * // => 3\n */\nfunction toInteger(value) {\n  var result = toFinite(value),\n      remainder = result % 1;\n\n  return result === result ? (remainder ? result - remainder : result) : 0;\n}\n\nmodule.exports = toInteger;\n", "var baseFindIndex = require('./_baseFindIndex'),\n    baseIteratee = require('./_baseIteratee'),\n    toInteger = require('./toInteger');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * This method is like `_.find` except that it returns the index of the first\n * element `predicate` returns truthy for instead of the element itself.\n *\n * @static\n * @memberOf _\n * @since 1.1.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @param {Function} [predicate=_.identity] The function invoked per iteration.\n * @param {number} [fromIndex=0] The index to search from.\n * @returns {number} Returns the index of the found element, else `-1`.\n * @example\n *\n * var users = [\n *   { 'user': 'barney',  'active': false },\n *   { 'user': 'fred',    'active': false },\n *   { 'user': 'pebbles', 'active': true }\n * ];\n *\n * _.findIndex(users, function(o) { return o.user == 'barney'; });\n * // => 0\n *\n * // The `_.matches` iteratee shorthand.\n * _.findIndex(users, { 'user': 'fred', 'active': false });\n * // => 1\n *\n * // The `_.matchesProperty` iteratee shorthand.\n * _.findIndex(users, ['active', false]);\n * // => 0\n *\n * // The `_.property` iteratee shorthand.\n * _.findIndex(users, 'active');\n * // => 2\n */\nfunction findIndex(array, predicate, fromIndex) {\n  var length = array == null ? 0 : array.length;\n  if (!length) {\n    return -1;\n  }\n  var index = fromIndex == null ? 0 : toInteger(fromIndex);\n  if (index < 0) {\n    index = nativeMax(length + index, 0);\n  }\n  return baseFindIndex(array, baseIteratee(predicate, 3), index);\n}\n\nmodule.exports = findIndex;\n", "var createFind = require('./_createFind'),\n    findIndex = require('./findIndex');\n\n/**\n * Iterates over elements of `collection`, returning the first element\n * `predicate` returns truthy for. The predicate is invoked with three\n * arguments: (value, index|key, collection).\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to inspect.\n * @param {Function} [predicate=_.identity] The function invoked per iteration.\n * @param {number} [fromIndex=0] The index to search from.\n * @returns {*} Returns the matched element, else `undefined`.\n * @example\n *\n * var users = [\n *   { 'user': 'barney',  'age': 36, 'active': true },\n *   { 'user': 'fred',    'age': 40, 'active': false },\n *   { 'user': 'pebbles', 'age': 1,  'active': true }\n * ];\n *\n * _.find(users, function(o) { return o.age < 40; });\n * // => object for 'barney'\n *\n * // The `_.matches` iteratee shorthand.\n * _.find(users, { 'age': 1, 'active': true });\n * // => object for 'pebbles'\n *\n * // The `_.matchesProperty` iteratee shorthand.\n * _.find(users, ['active', false]);\n * // => object for 'fred'\n *\n * // The `_.property` iteratee shorthand.\n * _.find(users, 'active');\n * // => object for 'barney'\n */\nvar find = createFind(findIndex);\n\nmodule.exports = find;\n", "var baseFlatten = require('./_baseFlatten');\n\n/**\n * Flattens `array` a single level deep.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to flatten.\n * @returns {Array} Returns the new flattened array.\n * @example\n *\n * _.flatten([1, [2, [3, [4]], 5]]);\n * // => [1, 2, [3, [4]], 5]\n */\nfunction flatten(array) {\n  var length = array == null ? 0 : array.length;\n  return length ? baseFlatten(array, 1) : [];\n}\n\nmodule.exports = flatten;\n", "var baseFor = require('./_baseFor'),\n    castFunction = require('./_castFunction'),\n    keysIn = require('./keysIn');\n\n/**\n * Iterates over own and inherited enumerable string keyed properties of an\n * object and invokes `iteratee` for each property. The iteratee is invoked\n * with three arguments: (value, key, object). Iteratee functions may exit\n * iteration early by explicitly returning `false`.\n *\n * @static\n * @memberOf _\n * @since 0.3.0\n * @category Object\n * @param {Object} object The object to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Object} Returns `object`.\n * @see _.forInRight\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.forIn(new Foo, function(value, key) {\n *   console.log(key);\n * });\n * // => Logs 'a', 'b', then 'c' (iteration order is not guaranteed).\n */\nfunction forIn(object, iteratee) {\n  return object == null\n    ? object\n    : baseFor(object, castFunction(iteratee), keysIn);\n}\n\nmodule.exports = forIn;\n", "/**\n * Gets the last element of `array`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to query.\n * @returns {*} Returns the last element of `array`.\n * @example\n *\n * _.last([1, 2, 3]);\n * // => 3\n */\nfunction last(array) {\n  var length = array == null ? 0 : array.length;\n  return length ? array[length - 1] : undefined;\n}\n\nmodule.exports = last;\n", "var baseAssignValue = require('./_baseAssignValue'),\n    baseForOwn = require('./_baseForOwn'),\n    baseIteratee = require('./_baseIteratee');\n\n/**\n * Creates an object with the same keys as `object` and values generated\n * by running each own enumerable string keyed property of `object` thru\n * `iteratee`. The iteratee is invoked with three arguments:\n * (value, key, object).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Object\n * @param {Object} object The object to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Object} Returns the new mapped object.\n * @see _.mapKeys\n * @example\n *\n * var users = {\n *   'fred':    { 'user': 'fred',    'age': 40 },\n *   'pebbles': { 'user': 'pebbles', 'age': 1 }\n * };\n *\n * _.mapValues(users, function(o) { return o.age; });\n * // => { 'fred': 40, 'pebbles': 1 } (iteration order is not guaranteed)\n *\n * // The `_.property` iteratee shorthand.\n * _.mapValues(users, 'age');\n * // => { 'fred': 40, 'pebbles': 1 } (iteration order is not guaranteed)\n */\nfunction mapValues(object, iteratee) {\n  var result = {};\n  iteratee = baseIteratee(iteratee, 3);\n\n  baseForOwn(object, function(value, key, object) {\n    baseAssignValue(result, key, iteratee(value, key, object));\n  });\n  return result;\n}\n\nmodule.exports = mapValues;\n", "var isSymbol = require('./isSymbol');\n\n/**\n * The base implementation of methods like `_.max` and `_.min` which accepts a\n * `comparator` to determine the extremum value.\n *\n * @private\n * @param {Array} array The array to iterate over.\n * @param {Function} iteratee The iteratee invoked per iteration.\n * @param {Function} comparator The comparator used to compare values.\n * @returns {*} Returns the extremum value.\n */\nfunction baseExtremum(array, iteratee, comparator) {\n  var index = -1,\n      length = array.length;\n\n  while (++index < length) {\n    var value = array[index],\n        current = iteratee(value);\n\n    if (current != null && (computed === undefined\n          ? (current === current && !isSymbol(current))\n          : comparator(current, computed)\n        )) {\n      var computed = current,\n          result = value;\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseExtremum;\n", "/**\n * The base implementation of `_.gt` which doesn't coerce arguments.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if `value` is greater than `other`,\n *  else `false`.\n */\nfunction baseGt(value, other) {\n  return value > other;\n}\n\nmodule.exports = baseGt;\n", "var baseExtremum = require('./_baseExtremum'),\n    baseGt = require('./_baseGt'),\n    identity = require('./identity');\n\n/**\n * Computes the maximum value of `array`. If `array` is empty or falsey,\n * `undefined` is returned.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Math\n * @param {Array} array The array to iterate over.\n * @returns {*} Returns the maximum value.\n * @example\n *\n * _.max([4, 2, 8, 6]);\n * // => 8\n *\n * _.max([]);\n * // => undefined\n */\nfunction max(array) {\n  return (array && array.length)\n    ? baseExtremum(array, identity, baseGt)\n    : undefined;\n}\n\nmodule.exports = max;\n", "/**\n * The base implementation of `_.lt` which doesn't coerce arguments.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if `value` is less than `other`,\n *  else `false`.\n */\nfunction baseLt(value, other) {\n  return value < other;\n}\n\nmodule.exports = baseLt;\n", "var baseExtremum = require('./_baseExtremum'),\n    baseLt = require('./_baseLt'),\n    identity = require('./identity');\n\n/**\n * Computes the minimum value of `array`. If `array` is empty or falsey,\n * `undefined` is returned.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Math\n * @param {Array} array The array to iterate over.\n * @returns {*} Returns the minimum value.\n * @example\n *\n * _.min([4, 2, 8, 6]);\n * // => 2\n *\n * _.min([]);\n * // => undefined\n */\nfunction min(array) {\n  return (array && array.length)\n    ? baseExtremum(array, identity, baseLt)\n    : undefined;\n}\n\nmodule.exports = min;\n", "var baseExtremum = require('./_baseExtremum'),\n    baseIteratee = require('./_baseIteratee'),\n    baseLt = require('./_baseLt');\n\n/**\n * This method is like `_.min` except that it accepts `iteratee` which is\n * invoked for each element in `array` to generate the criterion by which\n * the value is ranked. The iteratee is invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Math\n * @param {Array} array The array to iterate over.\n * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n * @returns {*} Returns the minimum value.\n * @example\n *\n * var objects = [{ 'n': 1 }, { 'n': 2 }];\n *\n * _.minBy(objects, function(o) { return o.n; });\n * // => { 'n': 1 }\n *\n * // The `_.property` iteratee shorthand.\n * _.minBy(objects, 'n');\n * // => { 'n': 1 }\n */\nfunction minBy(array, iteratee) {\n  return (array && array.length)\n    ? baseExtremum(array, baseIteratee(iteratee, 2), baseLt)\n    : undefined;\n}\n\nmodule.exports = minBy;\n", "var assignValue = require('./_assignValue'),\n    castPath = require('./_castPath'),\n    isIndex = require('./_isIndex'),\n    isObject = require('./isObject'),\n    toKey = require('./_toKey');\n\n/**\n * The base implementation of `_.set`.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {Array|string} path The path of the property to set.\n * @param {*} value The value to set.\n * @param {Function} [customizer] The function to customize path creation.\n * @returns {Object} Returns `object`.\n */\nfunction baseSet(object, path, value, customizer) {\n  if (!isObject(object)) {\n    return object;\n  }\n  path = castPath(path, object);\n\n  var index = -1,\n      length = path.length,\n      lastIndex = length - 1,\n      nested = object;\n\n  while (nested != null && ++index < length) {\n    var key = toKey(path[index]),\n        newValue = value;\n\n    if (key === '__proto__' || key === 'constructor' || key === 'prototype') {\n      return object;\n    }\n\n    if (index != lastIndex) {\n      var objValue = nested[key];\n      newValue = customizer ? customizer(objValue, key, nested) : undefined;\n      if (newValue === undefined) {\n        newValue = isObject(objValue)\n          ? objValue\n          : (isIndex(path[index + 1]) ? [] : {});\n      }\n    }\n    assignValue(nested, key, newValue);\n    nested = nested[key];\n  }\n  return object;\n}\n\nmodule.exports = baseSet;\n", "var baseGet = require('./_baseGet'),\n    baseSet = require('./_baseSet'),\n    castPath = require('./_castPath');\n\n/**\n * The base implementation of  `_.pickBy` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The source object.\n * @param {string[]} paths The property paths to pick.\n * @param {Function} predicate The function invoked per property.\n * @returns {Object} Returns the new object.\n */\nfunction basePickBy(object, paths, predicate) {\n  var index = -1,\n      length = paths.length,\n      result = {};\n\n  while (++index < length) {\n    var path = paths[index],\n        value = baseGet(object, path);\n\n    if (predicate(value, path)) {\n      baseSet(result, castPath(path, object), value);\n    }\n  }\n  return result;\n}\n\nmodule.exports = basePickBy;\n", "var basePickBy = require('./_basePickBy'),\n    hasIn = require('./hasIn');\n\n/**\n * The base implementation of `_.pick` without support for individual\n * property identifiers.\n *\n * @private\n * @param {Object} object The source object.\n * @param {string[]} paths The property paths to pick.\n * @returns {Object} Returns the new object.\n */\nfunction basePick(object, paths) {\n  return basePickBy(object, paths, function(value, path) {\n    return hasIn(object, path);\n  });\n}\n\nmodule.exports = basePick;\n", "var flatten = require('./flatten'),\n    overRest = require('./_overRest'),\n    setToString = require('./_setToString');\n\n/**\n * A specialized version of `baseRest` which flattens the rest array.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @returns {Function} Returns the new function.\n */\nfunction flatRest(func) {\n  return setToString(overRest(func, undefined, flatten), func + '');\n}\n\nmodule.exports = flatRest;\n", "var basePick = require('./_basePick'),\n    flatRest = require('./_flatRest');\n\n/**\n * Creates an object composed of the picked `object` properties.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The source object.\n * @param {...(string|string[])} [paths] The property paths to pick.\n * @returns {Object} Returns the new object.\n * @example\n *\n * var object = { 'a': 1, 'b': '2', 'c': 3 };\n *\n * _.pick(object, ['a', 'c']);\n * // => { 'a': 1, 'c': 3 }\n */\nvar pick = flatRest(function(object, paths) {\n  return object == null ? {} : basePick(object, paths);\n});\n\nmodule.exports = pick;\n", "/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeCeil = Math.ceil,\n    nativeMax = Math.max;\n\n/**\n * The base implementation of `_.range` and `_.rangeRight` which doesn't\n * coerce arguments.\n *\n * @private\n * @param {number} start The start of the range.\n * @param {number} end The end of the range.\n * @param {number} step The value to increment or decrement by.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Array} Returns the range of numbers.\n */\nfunction baseRange(start, end, step, fromRight) {\n  var index = -1,\n      length = nativeMax(nativeCeil((end - start) / (step || 1)), 0),\n      result = Array(length);\n\n  while (length--) {\n    result[fromRight ? length : ++index] = start;\n    start += step;\n  }\n  return result;\n}\n\nmodule.exports = baseRange;\n", "var baseRange = require('./_baseRange'),\n    isIterateeCall = require('./_isIterateeCall'),\n    toFinite = require('./toFinite');\n\n/**\n * Creates a `_.range` or `_.rangeRight` function.\n *\n * @private\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new range function.\n */\nfunction createRange(fromRight) {\n  return function(start, end, step) {\n    if (step && typeof step != 'number' && isIterateeCall(start, end, step)) {\n      end = step = undefined;\n    }\n    // Ensure the sign of `-0` is preserved.\n    start = toFinite(start);\n    if (end === undefined) {\n      end = start;\n      start = 0;\n    } else {\n      end = toFinite(end);\n    }\n    step = step === undefined ? (start < end ? 1 : -1) : toFinite(step);\n    return baseRange(start, end, step, fromRight);\n  };\n}\n\nmodule.exports = createRange;\n", "var createRange = require('./_createRange');\n\n/**\n * Creates an array of numbers (positive and/or negative) progressing from\n * `start` up to, but not including, `end`. A step of `-1` is used if a negative\n * `start` is specified without an `end` or `step`. If `end` is not specified,\n * it's set to `start` with `start` then set to `0`.\n *\n * **Note:** JavaScript follows the IEEE-754 standard for resolving\n * floating-point values which can produce unexpected results.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {number} [start=0] The start of the range.\n * @param {number} end The end of the range.\n * @param {number} [step=1] The value to increment or decrement by.\n * @returns {Array} Returns the range of numbers.\n * @see _.inRange, _.rangeRight\n * @example\n *\n * _.range(4);\n * // => [0, 1, 2, 3]\n *\n * _.range(-4);\n * // => [0, -1, -2, -3]\n *\n * _.range(1, 5);\n * // => [1, 2, 3, 4]\n *\n * _.range(0, 20, 5);\n * // => [0, 5, 10, 15]\n *\n * _.range(0, -4, -1);\n * // => [0, -1, -2, -3]\n *\n * _.range(1, 4, 0);\n * // => [1, 1, 1]\n *\n * _.range(0);\n * // => []\n */\nvar range = createRange();\n\nmodule.exports = range;\n", "/**\n * The base implementation of `_.sortBy` which uses `comparer` to define the\n * sort order of `array` and replaces criteria objects with their corresponding\n * values.\n *\n * @private\n * @param {Array} array The array to sort.\n * @param {Function} comparer The function to define sort order.\n * @returns {Array} Returns `array`.\n */\nfunction baseSortBy(array, comparer) {\n  var length = array.length;\n\n  array.sort(comparer);\n  while (length--) {\n    array[length] = array[length].value;\n  }\n  return array;\n}\n\nmodule.exports = baseSortBy;\n", "var isSymbol = require('./isSymbol');\n\n/**\n * Compares values to sort them in ascending order.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {number} Returns the sort order indicator for `value`.\n */\nfunction compareAscending(value, other) {\n  if (value !== other) {\n    var valIsDefined = value !== undefined,\n        valIsNull = value === null,\n        valIsReflexive = value === value,\n        valIsSymbol = isSymbol(value);\n\n    var othIsDefined = other !== undefined,\n        othIsNull = other === null,\n        othIsReflexive = other === other,\n        othIsSymbol = isSymbol(other);\n\n    if ((!othIsNull && !othIsSymbol && !valIsSymbol && value > other) ||\n        (valIsSymbol && othIsDefined && othIsReflexive && !othIsNull && !othIsSymbol) ||\n        (valIsNull && othIsDefined && othIsReflexive) ||\n        (!valIsDefined && othIsReflexive) ||\n        !valIsReflexive) {\n      return 1;\n    }\n    if ((!valIsNull && !valIsSymbol && !othIsSymbol && value < other) ||\n        (othIsSymbol && valIsDefined && valIsReflexive && !valIsNull && !valIsSymbol) ||\n        (othIsNull && valIsDefined && valIsReflexive) ||\n        (!othIsDefined && valIsReflexive) ||\n        !othIsReflexive) {\n      return -1;\n    }\n  }\n  return 0;\n}\n\nmodule.exports = compareAscending;\n", "var compareAscending = require('./_compareAscending');\n\n/**\n * Used by `_.orderBy` to compare multiple properties of a value to another\n * and stable sort them.\n *\n * If `orders` is unspecified, all values are sorted in ascending order. Otherwise,\n * specify an order of \"desc\" for descending or \"asc\" for ascending sort order\n * of corresponding values.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {boolean[]|string[]} orders The order to sort by for each property.\n * @returns {number} Returns the sort order indicator for `object`.\n */\nfunction compareMultiple(object, other, orders) {\n  var index = -1,\n      objCriteria = object.criteria,\n      othCriteria = other.criteria,\n      length = objCriteria.length,\n      ordersLength = orders.length;\n\n  while (++index < length) {\n    var result = compareAscending(objCriteria[index], othCriteria[index]);\n    if (result) {\n      if (index >= ordersLength) {\n        return result;\n      }\n      var order = orders[index];\n      return result * (order == 'desc' ? -1 : 1);\n    }\n  }\n  // Fixes an `Array#sort` bug in the JS engine embedded in Adobe applications\n  // that causes it, under certain circumstances, to provide the same value for\n  // `object` and `other`. See https://github.com/jashkenas/underscore/pull/1247\n  // for more details.\n  //\n  // This also ensures a stable sort in V8 and other engines.\n  // See https://bugs.chromium.org/p/v8/issues/detail?id=90 for more details.\n  return object.index - other.index;\n}\n\nmodule.exports = compareMultiple;\n", "var arrayMap = require('./_arrayMap'),\n    baseGet = require('./_baseGet'),\n    baseIteratee = require('./_baseIteratee'),\n    baseMap = require('./_baseMap'),\n    baseSortBy = require('./_baseSortBy'),\n    baseUnary = require('./_baseUnary'),\n    compareMultiple = require('./_compareMultiple'),\n    identity = require('./identity'),\n    isArray = require('./isArray');\n\n/**\n * The base implementation of `_.orderBy` without param guards.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function[]|Object[]|string[]} iteratees The iteratees to sort by.\n * @param {string[]} orders The sort orders of `iteratees`.\n * @returns {Array} Returns the new sorted array.\n */\nfunction baseOrderBy(collection, iteratees, orders) {\n  if (iteratees.length) {\n    iteratees = arrayMap(iteratees, function(iteratee) {\n      if (isArray(iteratee)) {\n        return function(value) {\n          return baseGet(value, iteratee.length === 1 ? iteratee[0] : iteratee);\n        }\n      }\n      return iteratee;\n    });\n  } else {\n    iteratees = [identity];\n  }\n\n  var index = -1;\n  iteratees = arrayMap(iteratees, baseUnary(baseIteratee));\n\n  var result = baseMap(collection, function(value, key, collection) {\n    var criteria = arrayMap(iteratees, function(iteratee) {\n      return iteratee(value);\n    });\n    return { 'criteria': criteria, 'index': ++index, 'value': value };\n  });\n\n  return baseSortBy(result, function(object, other) {\n    return compareMultiple(object, other, orders);\n  });\n}\n\nmodule.exports = baseOrderBy;\n", "var baseFlatten = require('./_baseFlatten'),\n    baseOrderBy = require('./_baseOrderBy'),\n    baseRest = require('./_baseRest'),\n    isIterateeCall = require('./_isIterateeCall');\n\n/**\n * Creates an array of elements, sorted in ascending order by the results of\n * running each element in a collection thru each iteratee. This method\n * performs a stable sort, that is, it preserves the original sort order of\n * equal elements. The iteratees are invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {...(Function|Function[])} [iteratees=[_.identity]]\n *  The iteratees to sort by.\n * @returns {Array} Returns the new sorted array.\n * @example\n *\n * var users = [\n *   { 'user': 'fred',   'age': 48 },\n *   { 'user': 'barney', 'age': 36 },\n *   { 'user': 'fred',   'age': 30 },\n *   { 'user': 'barney', 'age': 34 }\n * ];\n *\n * _.sortBy(users, [function(o) { return o.user; }]);\n * // => objects for [['barney', 36], ['barney', 34], ['fred', 48], ['fred', 30]]\n *\n * _.sortBy(users, ['user', 'age']);\n * // => objects for [['barney', 34], ['barney', 36], ['fred', 30], ['fred', 48]]\n */\nvar sortBy = baseRest(function(collection, iteratees) {\n  if (collection == null) {\n    return [];\n  }\n  var length = iteratees.length;\n  if (length > 1 && isIterateeCall(collection, iteratees[0], iteratees[1])) {\n    iteratees = [];\n  } else if (length > 2 && isIterateeCall(iteratees[0], iteratees[1], iteratees[2])) {\n    iteratees = [iteratees[0]];\n  }\n  return baseOrderBy(collection, baseFlatten(iteratees, 1), []);\n});\n\nmodule.exports = sortBy;\n", "var toString = require('./toString');\n\n/** Used to generate unique IDs. */\nvar idCounter = 0;\n\n/**\n * Generates a unique ID. If `prefix` is given, the ID is appended to it.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {string} [prefix=''] The value to prefix the ID with.\n * @returns {string} Returns the unique ID.\n * @example\n *\n * _.uniqueId('contact_');\n * // => 'contact_104'\n *\n * _.uniqueId();\n * // => '105'\n */\nfunction uniqueId(prefix) {\n  var id = ++idCounter;\n  return toString(prefix) + id;\n}\n\nmodule.exports = uniqueId;\n", "/**\n * This base implementation of `_.zipObject` which assigns values using `assignFunc`.\n *\n * @private\n * @param {Array} props The property identifiers.\n * @param {Array} values The property values.\n * @param {Function} assignFunc The function to assign values.\n * @returns {Object} Returns the new object.\n */\nfunction baseZipObject(props, values, assignFunc) {\n  var index = -1,\n      length = props.length,\n      valsLength = values.length,\n      result = {};\n\n  while (++index < length) {\n    var value = index < valsLength ? values[index] : undefined;\n    assignFunc(result, props[index], value);\n  }\n  return result;\n}\n\nmodule.exports = baseZipObject;\n", "var assignValue = require('./_assignValue'),\n    baseZipObject = require('./_baseZipObject');\n\n/**\n * This method is like `_.fromPairs` except that it accepts two arrays,\n * one of property identifiers and one of corresponding values.\n *\n * @static\n * @memberOf _\n * @since 0.4.0\n * @category Array\n * @param {Array} [props=[]] The property identifiers.\n * @param {Array} [values=[]] The property values.\n * @returns {Object} Returns the new object.\n * @example\n *\n * _.zipObject(['a', 'b'], [1, 2]);\n * // => { 'a': 1, 'b': 2 }\n */\nfunction zipObject(props, values) {\n  return baseZipObject(props || [], values || [], assignValue);\n}\n\nmodule.exports = zipObject;\n", "/* global window */\n\nvar lodash;\n\nif (typeof require === \"function\") {\n  try {\n    lodash = {\n      cloneDeep: require(\"lodash/cloneDeep\"),\n      constant: require(\"lodash/constant\"),\n      defaults: require(\"lodash/defaults\"),\n      each: require(\"lodash/each\"),\n      filter: require(\"lodash/filter\"),\n      find: require(\"lodash/find\"),\n      flatten: require(\"lodash/flatten\"),\n      forEach: require(\"lodash/forEach\"),\n      forIn: require(\"lodash/forIn\"),\n      has:  require(\"lodash/has\"),\n      isUndefined: require(\"lodash/isUndefined\"),\n      last: require(\"lodash/last\"),\n      map: require(\"lodash/map\"),\n      mapValues: require(\"lodash/mapValues\"),\n      max: require(\"lodash/max\"),\n      merge: require(\"lodash/merge\"),\n      min: require(\"lodash/min\"),\n      minBy: require(\"lodash/minBy\"),\n      now: require(\"lodash/now\"),\n      pick: require(\"lodash/pick\"),\n      range: require(\"lodash/range\"),\n      reduce: require(\"lodash/reduce\"),\n      sortBy: require(\"lodash/sortBy\"),\n      uniqueId: require(\"lodash/uniqueId\"),\n      values: require(\"lodash/values\"),\n      zipObject: require(\"lodash/zipObject\"),\n    };\n  } catch (e) {\n    // continue regardless of error\n  }\n}\n\nif (!lodash) {\n  lodash = window._;\n}\n\nmodule.exports = lodash;\n", "/*\n * Simple doubly linked list implementation derived from Cormen, et al.,\n * \"Introduction to Algorithms\".\n */\n\nmodule.exports = List;\n\nfunction List() {\n  var sentinel = {};\n  sentinel._next = sentinel._prev = sentinel;\n  this._sentinel = sentinel;\n}\n\nList.prototype.dequeue = function() {\n  var sentinel = this._sentinel;\n  var entry = sentinel._prev;\n  if (entry !== sentinel) {\n    unlink(entry);\n    return entry;\n  }\n};\n\nList.prototype.enqueue = function(entry) {\n  var sentinel = this._sentinel;\n  if (entry._prev && entry._next) {\n    unlink(entry);\n  }\n  entry._next = sentinel._next;\n  sentinel._next._prev = entry;\n  sentinel._next = entry;\n  entry._prev = sentinel;\n};\n\nList.prototype.toString = function() {\n  var strs = [];\n  var sentinel = this._sentinel;\n  var curr = sentinel._prev;\n  while (curr !== sentinel) {\n    strs.push(JSON.stringify(curr, filterOutLinks));\n    curr = curr._prev;\n  }\n  return \"[\" + strs.join(\", \") + \"]\";\n};\n\nfunction unlink(entry) {\n  entry._prev._next = entry._next;\n  entry._next._prev = entry._prev;\n  delete entry._next;\n  delete entry._prev;\n}\n\nfunction filterOutLinks(k, v) {\n  if (k !== \"_next\" && k !== \"_prev\") {\n    return v;\n  }\n}\n", "var _ = require(\"./lodash\");\nvar Graph = require(\"./graphlib\").Graph;\nvar List = require(\"./data/list\");\n\n/*\n * A greedy heuristic for finding a feedback arc set for a graph. A feedback\n * arc set is a set of edges that can be removed to make a graph acyclic.\n * The algorithm comes from: P. Eades, X. Lin, and W. F. Smyth, \"A fast and\n * effective heuristic for the feedback arc set problem.\" This implementation\n * adjusts that from the paper to allow for weighted edges.\n */\nmodule.exports = greedyFAS;\n\nvar DEFAULT_WEIGHT_FN = _.constant(1);\n\nfunction greedyFAS(g, weightFn) {\n  if (g.nodeCount() <= 1) {\n    return [];\n  }\n  var state = buildState(g, weightFn || DEFAULT_WEIGHT_FN);\n  var results = doGreedyFAS(state.graph, state.buckets, state.zeroIdx);\n\n  // Expand multi-edges\n  return _.flatten(_.map(results, function(e) {\n    return g.outEdges(e.v, e.w);\n  }), true);\n}\n\nfunction doGreedyFAS(g, buckets, zeroIdx) {\n  var results = [];\n  var sources = buckets[buckets.length - 1];\n  var sinks = buckets[0];\n\n  var entry;\n  while (g.nodeCount()) {\n    while ((entry = sinks.dequeue()))   { removeNode(g, buckets, zeroIdx, entry); }\n    while ((entry = sources.dequeue())) { removeNode(g, buckets, zeroIdx, entry); }\n    if (g.nodeCount()) {\n      for (var i = buckets.length - 2; i > 0; --i) {\n        entry = buckets[i].dequeue();\n        if (entry) {\n          results = results.concat(removeNode(g, buckets, zeroIdx, entry, true));\n          break;\n        }\n      }\n    }\n  }\n\n  return results;\n}\n\nfunction removeNode(g, buckets, zeroIdx, entry, collectPredecessors) {\n  var results = collectPredecessors ? [] : undefined;\n\n  _.forEach(g.inEdges(entry.v), function(edge) {\n    var weight = g.edge(edge);\n    var uEntry = g.node(edge.v);\n\n    if (collectPredecessors) {\n      results.push({ v: edge.v, w: edge.w });\n    }\n\n    uEntry.out -= weight;\n    assignBucket(buckets, zeroIdx, uEntry);\n  });\n\n  _.forEach(g.outEdges(entry.v), function(edge) {\n    var weight = g.edge(edge);\n    var w = edge.w;\n    var wEntry = g.node(w);\n    wEntry[\"in\"] -= weight;\n    assignBucket(buckets, zeroIdx, wEntry);\n  });\n\n  g.removeNode(entry.v);\n\n  return results;\n}\n\nfunction buildState(g, weightFn) {\n  var fasGraph = new Graph();\n  var maxIn = 0;\n  var maxOut = 0;\n\n  _.forEach(g.nodes(), function(v) {\n    fasGraph.setNode(v, { v: v, \"in\": 0, out: 0 });\n  });\n\n  // Aggregate weights on nodes, but also sum the weights across multi-edges\n  // into a single edge for the fasGraph.\n  _.forEach(g.edges(), function(e) {\n    var prevWeight = fasGraph.edge(e.v, e.w) || 0;\n    var weight = weightFn(e);\n    var edgeWeight = prevWeight + weight;\n    fasGraph.setEdge(e.v, e.w, edgeWeight);\n    maxOut = Math.max(maxOut, fasGraph.node(e.v).out += weight);\n    maxIn  = Math.max(maxIn,  fasGraph.node(e.w)[\"in\"]  += weight);\n  });\n\n  var buckets = _.range(maxOut + maxIn + 3).map(function() { return new List(); });\n  var zeroIdx = maxIn + 1;\n\n  _.forEach(fasGraph.nodes(), function(v) {\n    assignBucket(buckets, zeroIdx, fasGraph.node(v));\n  });\n\n  return { graph: fasGraph, buckets: buckets, zeroIdx: zeroIdx };\n}\n\nfunction assignBucket(buckets, zeroIdx, entry) {\n  if (!entry.out) {\n    buckets[0].enqueue(entry);\n  } else if (!entry[\"in\"]) {\n    buckets[buckets.length - 1].enqueue(entry);\n  } else {\n    buckets[entry.out - entry[\"in\"] + zeroIdx].enqueue(entry);\n  }\n}\n", "\"use strict\";\n\nvar _ = require(\"./lodash\");\nvar greedyFAS = require(\"./greedy-fas\");\n\nmodule.exports = {\n  run: run,\n  undo: undo\n};\n\nfunction run(g) {\n  var fas = (g.graph().acyclicer === \"greedy\"\n    ? greedyFAS(g, weightFn(g))\n    : dfsFAS(g));\n  _.forEach(fas, function(e) {\n    var label = g.edge(e);\n    g.removeEdge(e);\n    label.forwardName = e.name;\n    label.reversed = true;\n    g.setEdge(e.w, e.v, label, _.uniqueId(\"rev\"));\n  });\n\n  function weightFn(g) {\n    return function(e) {\n      return g.edge(e).weight;\n    };\n  }\n}\n\nfunction dfsFAS(g) {\n  var fas = [];\n  var stack = {};\n  var visited = {};\n\n  function dfs(v) {\n    if (_.has(visited, v)) {\n      return;\n    }\n    visited[v] = true;\n    stack[v] = true;\n    _.forEach(g.outEdges(v), function(e) {\n      if (_.has(stack, e.w)) {\n        fas.push(e);\n      } else {\n        dfs(e.w);\n      }\n    });\n    delete stack[v];\n  }\n\n  _.forEach(g.nodes(), dfs);\n  return fas;\n}\n\nfunction undo(g) {\n  _.forEach(g.edges(), function(e) {\n    var label = g.edge(e);\n    if (label.reversed) {\n      g.removeEdge(e);\n\n      var forwardName = label.forwardName;\n      delete label.reversed;\n      delete label.forwardName;\n      g.setEdge(e.w, e.v, label, forwardName);\n    }\n  });\n}\n", "/* eslint \"no-console\": off */\n\n\"use strict\";\n\nvar _ = require(\"./lodash\");\nvar Graph = require(\"./graphlib\").Graph;\n\nmodule.exports = {\n  addDummyNode: addDummyNode,\n  simplify: simplify,\n  asNonCompoundGraph: asNonCompoundGraph,\n  successorWeights: successorWeights,\n  predecessorWeights: predecessorWeights,\n  intersectRect: intersectRect,\n  buildLayerMatrix: buildLayerMatrix,\n  normalizeRanks: normalizeRanks,\n  removeEmptyRanks: removeEmptyRanks,\n  addBorderNode: addBorderNode,\n  maxRank: maxRank,\n  partition: partition,\n  time: time,\n  notime: notime\n};\n\n/*\n * Adds a dummy node to the graph and return v.\n */\nfunction addDummyNode(g, type, attrs, name) {\n  var v;\n  do {\n    v = _.uniqueId(name);\n  } while (g.hasNode(v));\n\n  attrs.dummy = type;\n  g.setNode(v, attrs);\n  return v;\n}\n\n/*\n * Returns a new graph with only simple edges. Handles aggregation of data\n * associated with multi-edges.\n */\nfunction simplify(g) {\n  var simplified = new Graph().setGraph(g.graph());\n  _.forEach(g.nodes(), function(v) { simplified.setNode(v, g.node(v)); });\n  _.forEach(g.edges(), function(e) {\n    var simpleLabel = simplified.edge(e.v, e.w) || { weight: 0, minlen: 1 };\n    var label = g.edge(e);\n    simplified.setEdge(e.v, e.w, {\n      weight: simpleLabel.weight + label.weight,\n      minlen: Math.max(simpleLabel.minlen, label.minlen)\n    });\n  });\n  return simplified;\n}\n\nfunction asNonCompoundGraph(g) {\n  var simplified = new Graph({ multigraph: g.isMultigraph() }).setGraph(g.graph());\n  _.forEach(g.nodes(), function(v) {\n    if (!g.children(v).length) {\n      simplified.setNode(v, g.node(v));\n    }\n  });\n  _.forEach(g.edges(), function(e) {\n    simplified.setEdge(e, g.edge(e));\n  });\n  return simplified;\n}\n\nfunction successorWeights(g) {\n  var weightMap = _.map(g.nodes(), function(v) {\n    var sucs = {};\n    _.forEach(g.outEdges(v), function(e) {\n      sucs[e.w] = (sucs[e.w] || 0) + g.edge(e).weight;\n    });\n    return sucs;\n  });\n  return _.zipObject(g.nodes(), weightMap);\n}\n\nfunction predecessorWeights(g) {\n  var weightMap = _.map(g.nodes(), function(v) {\n    var preds = {};\n    _.forEach(g.inEdges(v), function(e) {\n      preds[e.v] = (preds[e.v] || 0) + g.edge(e).weight;\n    });\n    return preds;\n  });\n  return _.zipObject(g.nodes(), weightMap);\n}\n\n/*\n * Finds where a line starting at point ({x, y}) would intersect a rectangle\n * ({x, y, width, height}) if it were pointing at the rectangle's center.\n */\nfunction intersectRect(rect, point) {\n  var x = rect.x;\n  var y = rect.y;\n\n  // Rectangle intersection algorithm from:\n  // http://math.stackexchange.com/questions/108113/find-edge-between-two-boxes\n  var dx = point.x - x;\n  var dy = point.y - y;\n  var w = rect.width / 2;\n  var h = rect.height / 2;\n\n  if (!dx && !dy) {\n    throw new Error(\"Not possible to find intersection inside of the rectangle\");\n  }\n\n  var sx, sy;\n  if (Math.abs(dy) * w > Math.abs(dx) * h) {\n    // Intersection is top or bottom of rect.\n    if (dy < 0) {\n      h = -h;\n    }\n    sx = h * dx / dy;\n    sy = h;\n  } else {\n    // Intersection is left or right of rect.\n    if (dx < 0) {\n      w = -w;\n    }\n    sx = w;\n    sy = w * dy / dx;\n  }\n\n  return { x: x + sx, y: y + sy };\n}\n\n/*\n * Given a DAG with each node assigned \"rank\" and \"order\" properties, this\n * function will produce a matrix with the ids of each node.\n */\nfunction buildLayerMatrix(g) {\n  var layering = _.map(_.range(maxRank(g) + 1), function() { return []; });\n  _.forEach(g.nodes(), function(v) {\n    var node = g.node(v);\n    var rank = node.rank;\n    if (!_.isUndefined(rank)) {\n      layering[rank][node.order] = v;\n    }\n  });\n  return layering;\n}\n\n/*\n * Adjusts the ranks for all nodes in the graph such that all nodes v have\n * rank(v) >= 0 and at least one node w has rank(w) = 0.\n */\nfunction normalizeRanks(g) {\n  var min = _.min(_.map(g.nodes(), function(v) { return g.node(v).rank; }));\n  _.forEach(g.nodes(), function(v) {\n    var node = g.node(v);\n    if (_.has(node, \"rank\")) {\n      node.rank -= min;\n    }\n  });\n}\n\nfunction removeEmptyRanks(g) {\n  // Ranks may not start at 0, so we need to offset them\n  var offset = _.min(_.map(g.nodes(), function(v) { return g.node(v).rank; }));\n\n  var layers = [];\n  _.forEach(g.nodes(), function(v) {\n    var rank = g.node(v).rank - offset;\n    if (!layers[rank]) {\n      layers[rank] = [];\n    }\n    layers[rank].push(v);\n  });\n\n  var delta = 0;\n  var nodeRankFactor = g.graph().nodeRankFactor;\n  _.forEach(layers, function(vs, i) {\n    if (_.isUndefined(vs) && i % nodeRankFactor !== 0) {\n      --delta;\n    } else if (delta) {\n      _.forEach(vs, function(v) { g.node(v).rank += delta; });\n    }\n  });\n}\n\nfunction addBorderNode(g, prefix, rank, order) {\n  var node = {\n    width: 0,\n    height: 0\n  };\n  if (arguments.length >= 4) {\n    node.rank = rank;\n    node.order = order;\n  }\n  return addDummyNode(g, \"border\", node, prefix);\n}\n\nfunction maxRank(g) {\n  return _.max(_.map(g.nodes(), function(v) {\n    var rank = g.node(v).rank;\n    if (!_.isUndefined(rank)) {\n      return rank;\n    }\n  }));\n}\n\n/*\n * Partition a collection into two groups: `lhs` and `rhs`. If the supplied\n * function returns true for an entry it goes into `lhs`. Otherwise it goes\n * into `rhs.\n */\nfunction partition(collection, fn) {\n  var result = { lhs: [], rhs: [] };\n  _.forEach(collection, function(value) {\n    if (fn(value)) {\n      result.lhs.push(value);\n    } else {\n      result.rhs.push(value);\n    }\n  });\n  return result;\n}\n\n/*\n * Returns a new function that wraps `fn` with a timer. The wrapper logs the\n * time it takes to execute the function.\n */\nfunction time(name, fn) {\n  var start = _.now();\n  try {\n    return fn();\n  } finally {\n    console.log(name + \" time: \" + (_.now() - start) + \"ms\");\n  }\n}\n\nfunction notime(name, fn) {\n  return fn();\n}\n", "\"use strict\";\n\nvar _ = require(\"./lodash\");\nvar util = require(\"./util\");\n\nmodule.exports = {\n  run: run,\n  undo: undo\n};\n\n/*\n * Breaks any long edges in the graph into short segments that span 1 layer\n * each. This operation is undoable with the denormalize function.\n *\n * Pre-conditions:\n *\n *    1. The input graph is a DAG.\n *    2. Each node in the graph has a \"rank\" property.\n *\n * Post-condition:\n *\n *    1. All edges in the graph have a length of 1.\n *    2. Dummy nodes are added where edges have been split into segments.\n *    3. The graph is augmented with a \"dummyChains\" attribute which contains\n *       the first dummy in each chain of dummy nodes produced.\n */\nfunction run(g) {\n  g.graph().dummyChains = [];\n  _.forEach(g.edges(), function(edge) { normalizeEdge(g, edge); });\n}\n\nfunction normalizeEdge(g, e) {\n  var v = e.v;\n  var vRank = g.node(v).rank;\n  var w = e.w;\n  var wRank = g.node(w).rank;\n  var name = e.name;\n  var edgeLabel = g.edge(e);\n  var labelRank = edgeLabel.labelRank;\n\n  if (wRank === vRank + 1) return;\n\n  g.removeEdge(e);\n\n  var dummy, attrs, i;\n  for (i = 0, ++vRank; vRank < wRank; ++i, ++vRank) {\n    edgeLabel.points = [];\n    attrs = {\n      width: 0, height: 0,\n      edgeLabel: edgeLabel, edgeObj: e,\n      rank: vRank\n    };\n    dummy = util.addDummyNode(g, \"edge\", attrs, \"_d\");\n    if (vRank === labelRank) {\n      attrs.width = edgeLabel.width;\n      attrs.height = edgeLabel.height;\n      attrs.dummy = \"edge-label\";\n      attrs.labelpos = edgeLabel.labelpos;\n    }\n    g.setEdge(v, dummy, { weight: edgeLabel.weight }, name);\n    if (i === 0) {\n      g.graph().dummyChains.push(dummy);\n    }\n    v = dummy;\n  }\n\n  g.setEdge(v, w, { weight: edgeLabel.weight }, name);\n}\n\nfunction undo(g) {\n  _.forEach(g.graph().dummyChains, function(v) {\n    var node = g.node(v);\n    var origLabel = node.edgeLabel;\n    var w;\n    g.setEdge(node.edgeObj, origLabel);\n    while (node.dummy) {\n      w = g.successors(v)[0];\n      g.removeNode(v);\n      origLabel.points.push({ x: node.x, y: node.y });\n      if (node.dummy === \"edge-label\") {\n        origLabel.x = node.x;\n        origLabel.y = node.y;\n        origLabel.width = node.width;\n        origLabel.height = node.height;\n      }\n      v = w;\n      node = g.node(v);\n    }\n  });\n}\n", "\"use strict\";\n\nvar _ = require(\"../lodash\");\n\nmodule.exports = {\n  longestPath: longestPath,\n  slack: slack\n};\n\n/*\n * Initializes ranks for the input graph using the longest path algorithm. This\n * algorithm scales well and is fast in practice, it yields rather poor\n * solutions. Nodes are pushed to the lowest layer possible, leaving the bottom\n * ranks wide and leaving edges longer than necessary. However, due to its\n * speed, this algorithm is good for getting an initial ranking that can be fed\n * into other algorithms.\n *\n * This algorithm does not normalize layers because it will be used by other\n * algorithms in most cases. If using this algorithm directly, be sure to\n * run normalize at the end.\n *\n * Pre-conditions:\n *\n *    1. Input graph is a DAG.\n *    2. Input graph node labels can be assigned properties.\n *\n * Post-conditions:\n *\n *    1. Each node will be assign an (unnormalized) \"rank\" property.\n */\nfunction longestPath(g) {\n  var visited = {};\n\n  function dfs(v) {\n    var label = g.node(v);\n    if (_.has(visited, v)) {\n      return label.rank;\n    }\n    visited[v] = true;\n\n    var rank = _.min(_.map(g.outEdges(v), function(e) {\n      return dfs(e.w) - g.edge(e).minlen;\n    }));\n\n    if (rank === Number.POSITIVE_INFINITY || // return value of _.map([]) for Lodash 3\n        rank === undefined || // return value of _.map([]) for Lodash 4\n        rank === null) { // return value of _.map([null])\n      rank = 0;\n    }\n\n    return (label.rank = rank);\n  }\n\n  _.forEach(g.sources(), dfs);\n}\n\n/*\n * Returns the amount of slack for the given edge. The slack is defined as the\n * difference between the length of the edge and its minimum length.\n */\nfunction slack(g, e) {\n  return g.node(e.w).rank - g.node(e.v).rank - g.edge(e).minlen;\n}\n", "\"use strict\";\n\nvar _ = require(\"../lodash\");\nvar Graph = require(\"../graphlib\").Graph;\nvar slack = require(\"./util\").slack;\n\nmodule.exports = feasibleTree;\n\n/*\n * Constructs a spanning tree with tight edges and adjusted the input node's\n * ranks to achieve this. A tight edge is one that is has a length that matches\n * its \"minlen\" attribute.\n *\n * The basic structure for this function is derived from Gansner, et al., \"A\n * Technique for Drawing Directed Graphs.\"\n *\n * Pre-conditions:\n *\n *    1. Graph must be a DAG.\n *    2. Graph must be connected.\n *    3. Graph must have at least one node.\n *    5. Graph nodes must have been previously assigned a \"rank\" property that\n *       respects the \"minlen\" property of incident edges.\n *    6. Graph edges must have a \"minlen\" property.\n *\n * Post-conditions:\n *\n *    - Graph nodes will have their rank adjusted to ensure that all edges are\n *      tight.\n *\n * Returns a tree (undirected graph) that is constructed using only \"tight\"\n * edges.\n */\nfunction feasibleTree(g) {\n  var t = new Graph({ directed: false });\n\n  // Choose arbitrary node from which to start our tree\n  var start = g.nodes()[0];\n  var size = g.nodeCount();\n  t.setNode(start, {});\n\n  var edge, delta;\n  while (tightTree(t, g) < size) {\n    edge = findMinSlackEdge(t, g);\n    delta = t.hasNode(edge.v) ? slack(g, edge) : -slack(g, edge);\n    shiftRanks(t, g, delta);\n  }\n\n  return t;\n}\n\n/*\n * Finds a maximal tree of tight edges and returns the number of nodes in the\n * tree.\n */\nfunction tightTree(t, g) {\n  function dfs(v) {\n    _.forEach(g.nodeEdges(v), function(e) {\n      var edgeV = e.v,\n        w = (v === edgeV) ? e.w : edgeV;\n      if (!t.hasNode(w) && !slack(g, e)) {\n        t.setNode(w, {});\n        t.setEdge(v, w, {});\n        dfs(w);\n      }\n    });\n  }\n\n  _.forEach(t.nodes(), dfs);\n  return t.nodeCount();\n}\n\n/*\n * Finds the edge with the smallest slack that is incident on tree and returns\n * it.\n */\nfunction findMinSlackEdge(t, g) {\n  return _.minBy(g.edges(), function(e) {\n    if (t.hasNode(e.v) !== t.hasNode(e.w)) {\n      return slack(g, e);\n    }\n  });\n}\n\nfunction shiftRanks(t, g, delta) {\n  _.forEach(t.nodes(), function(v) {\n    g.node(v).rank += delta;\n  });\n}\n", "\"use strict\";\n\nvar _ = require(\"../lodash\");\nvar feasibleTree = require(\"./feasible-tree\");\nvar slack = require(\"./util\").slack;\nvar initRank = require(\"./util\").longestPath;\nvar preorder = require(\"../graphlib\").alg.preorder;\nvar postorder = require(\"../graphlib\").alg.postorder;\nvar simplify = require(\"../util\").simplify;\n\nmodule.exports = networkSimplex;\n\n// Expose some internals for testing purposes\nnetworkSimplex.initLowLimValues = initLowLimValues;\nnetworkSimplex.initCutValues = initCutValues;\nnetworkSimplex.calcCutValue = calcCutValue;\nnetworkSimplex.leaveEdge = leaveEdge;\nnetworkSimplex.enterEdge = enterEdge;\nnetworkSimplex.exchangeEdges = exchangeEdges;\n\n/*\n * The network simplex algorithm assigns ranks to each node in the input graph\n * and iteratively improves the ranking to reduce the length of edges.\n *\n * Preconditions:\n *\n *    1. The input graph must be a DAG.\n *    2. All nodes in the graph must have an object value.\n *    3. All edges in the graph must have \"minlen\" and \"weight\" attributes.\n *\n * Postconditions:\n *\n *    1. All nodes in the graph will have an assigned \"rank\" attribute that has\n *       been optimized by the network simplex algorithm. Ranks start at 0.\n *\n *\n * A rough sketch of the algorithm is as follows:\n *\n *    1. Assign initial ranks to each node. We use the longest path algorithm,\n *       which assigns ranks to the lowest position possible. In general this\n *       leads to very wide bottom ranks and unnecessarily long edges.\n *    2. Construct a feasible tight tree. A tight tree is one such that all\n *       edges in the tree have no slack (difference between length of edge\n *       and minlen for the edge). This by itself greatly improves the assigned\n *       rankings by shorting edges.\n *    3. Iteratively find edges that have negative cut values. Generally a\n *       negative cut value indicates that the edge could be removed and a new\n *       tree edge could be added to produce a more compact graph.\n *\n * Much of the algorithms here are derived from Gansner, et al., \"A Technique\n * for Drawing Directed Graphs.\" The structure of the file roughly follows the\n * structure of the overall algorithm.\n */\nfunction networkSimplex(g) {\n  g = simplify(g);\n  initRank(g);\n  var t = feasibleTree(g);\n  initLowLimValues(t);\n  initCutValues(t, g);\n\n  var e, f;\n  while ((e = leaveEdge(t))) {\n    f = enterEdge(t, g, e);\n    exchangeEdges(t, g, e, f);\n  }\n}\n\n/*\n * Initializes cut values for all edges in the tree.\n */\nfunction initCutValues(t, g) {\n  var vs = postorder(t, t.nodes());\n  vs = vs.slice(0, vs.length - 1);\n  _.forEach(vs, function(v) {\n    assignCutValue(t, g, v);\n  });\n}\n\nfunction assignCutValue(t, g, child) {\n  var childLab = t.node(child);\n  var parent = childLab.parent;\n  t.edge(child, parent).cutvalue = calcCutValue(t, g, child);\n}\n\n/*\n * Given the tight tree, its graph, and a child in the graph calculate and\n * return the cut value for the edge between the child and its parent.\n */\nfunction calcCutValue(t, g, child) {\n  var childLab = t.node(child);\n  var parent = childLab.parent;\n  // True if the child is on the tail end of the edge in the directed graph\n  var childIsTail = true;\n  // The graph's view of the tree edge we're inspecting\n  var graphEdge = g.edge(child, parent);\n  // The accumulated cut value for the edge between this node and its parent\n  var cutValue = 0;\n\n  if (!graphEdge) {\n    childIsTail = false;\n    graphEdge = g.edge(parent, child);\n  }\n\n  cutValue = graphEdge.weight;\n\n  _.forEach(g.nodeEdges(child), function(e) {\n    var isOutEdge = e.v === child,\n      other = isOutEdge ? e.w : e.v;\n\n    if (other !== parent) {\n      var pointsToHead = isOutEdge === childIsTail,\n        otherWeight = g.edge(e).weight;\n\n      cutValue += pointsToHead ? otherWeight : -otherWeight;\n      if (isTreeEdge(t, child, other)) {\n        var otherCutValue = t.edge(child, other).cutvalue;\n        cutValue += pointsToHead ? -otherCutValue : otherCutValue;\n      }\n    }\n  });\n\n  return cutValue;\n}\n\nfunction initLowLimValues(tree, root) {\n  if (arguments.length < 2) {\n    root = tree.nodes()[0];\n  }\n  dfsAssignLowLim(tree, {}, 1, root);\n}\n\nfunction dfsAssignLowLim(tree, visited, nextLim, v, parent) {\n  var low = nextLim;\n  var label = tree.node(v);\n\n  visited[v] = true;\n  _.forEach(tree.neighbors(v), function(w) {\n    if (!_.has(visited, w)) {\n      nextLim = dfsAssignLowLim(tree, visited, nextLim, w, v);\n    }\n  });\n\n  label.low = low;\n  label.lim = nextLim++;\n  if (parent) {\n    label.parent = parent;\n  } else {\n    // TODO should be able to remove this when we incrementally update low lim\n    delete label.parent;\n  }\n\n  return nextLim;\n}\n\nfunction leaveEdge(tree) {\n  return _.find(tree.edges(), function(e) {\n    return tree.edge(e).cutvalue < 0;\n  });\n}\n\nfunction enterEdge(t, g, edge) {\n  var v = edge.v;\n  var w = edge.w;\n\n  // For the rest of this function we assume that v is the tail and w is the\n  // head, so if we don't have this edge in the graph we should flip it to\n  // match the correct orientation.\n  if (!g.hasEdge(v, w)) {\n    v = edge.w;\n    w = edge.v;\n  }\n\n  var vLabel = t.node(v);\n  var wLabel = t.node(w);\n  var tailLabel = vLabel;\n  var flip = false;\n\n  // If the root is in the tail of the edge then we need to flip the logic that\n  // checks for the head and tail nodes in the candidates function below.\n  if (vLabel.lim > wLabel.lim) {\n    tailLabel = wLabel;\n    flip = true;\n  }\n\n  var candidates = _.filter(g.edges(), function(edge) {\n    return flip === isDescendant(t, t.node(edge.v), tailLabel) &&\n           flip !== isDescendant(t, t.node(edge.w), tailLabel);\n  });\n\n  return _.minBy(candidates, function(edge) { return slack(g, edge); });\n}\n\nfunction exchangeEdges(t, g, e, f) {\n  var v = e.v;\n  var w = e.w;\n  t.removeEdge(v, w);\n  t.setEdge(f.v, f.w, {});\n  initLowLimValues(t);\n  initCutValues(t, g);\n  updateRanks(t, g);\n}\n\nfunction updateRanks(t, g) {\n  var root = _.find(t.nodes(), function(v) { return !g.node(v).parent; });\n  var vs = preorder(t, root);\n  vs = vs.slice(1);\n  _.forEach(vs, function(v) {\n    var parent = t.node(v).parent,\n      edge = g.edge(v, parent),\n      flipped = false;\n\n    if (!edge) {\n      edge = g.edge(parent, v);\n      flipped = true;\n    }\n\n    g.node(v).rank = g.node(parent).rank + (flipped ? edge.minlen : -edge.minlen);\n  });\n}\n\n/*\n * Returns true if the edge is in the tree.\n */\nfunction isTreeEdge(tree, u, v) {\n  return tree.hasEdge(u, v);\n}\n\n/*\n * Returns true if the specified node is descendant of the root node per the\n * assigned low and lim attributes in the tree.\n */\nfunction isDescendant(tree, vLabel, rootLabel) {\n  return rootLabel.low <= vLabel.lim && vLabel.lim <= rootLabel.lim;\n}\n", "\"use strict\";\n\nvar rankUtil = require(\"./util\");\nvar longestPath = rankUtil.longestPath;\nvar feasibleTree = require(\"./feasible-tree\");\nvar networkSimplex = require(\"./network-simplex\");\n\nmodule.exports = rank;\n\n/*\n * Assigns a rank to each node in the input graph that respects the \"minlen\"\n * constraint specified on edges between nodes.\n *\n * This basic structure is derived from Gansner, et al., \"A Technique for\n * Drawing Directed Graphs.\"\n *\n * Pre-conditions:\n *\n *    1. Graph must be a connected DAG\n *    2. Graph nodes must be objects\n *    3. Graph edges must have \"weight\" and \"minlen\" attributes\n *\n * Post-conditions:\n *\n *    1. Graph nodes will have a \"rank\" attribute based on the results of the\n *       algorithm. Ranks can start at any index (including negative), we'll\n *       fix them up later.\n */\nfunction rank(g) {\n  switch(g.graph().ranker) {\n  case \"network-simplex\": networkSimplexRanker(g); break;\n  case \"tight-tree\": tightTreeRanker(g); break;\n  case \"longest-path\": longestPathRanker(g); break;\n  default: networkSimplexRanker(g);\n  }\n}\n\n// A fast and simple ranker, but results are far from optimal.\nvar longestPathRanker = longestPath;\n\nfunction tightTreeRanker(g) {\n  longestPath(g);\n  feasibleTree(g);\n}\n\nfunction networkSimplexRanker(g) {\n  networkSimplex(g);\n}\n", "var _ = require(\"./lodash\");\n\nmodule.exports = parentDummyChains;\n\nfunction parentDummyChains(g) {\n  var postorderNums = postorder(g);\n\n  _.forEach(g.graph().dummyChains, function(v) {\n    var node = g.node(v);\n    var edgeObj = node.edgeObj;\n    var pathData = findPath(g, postorderNums, edgeObj.v, edgeObj.w);\n    var path = pathData.path;\n    var lca = pathData.lca;\n    var pathIdx = 0;\n    var pathV = path[pathIdx];\n    var ascending = true;\n\n    while (v !== edgeObj.w) {\n      node = g.node(v);\n\n      if (ascending) {\n        while ((pathV = path[pathIdx]) !== lca &&\n               g.node(pathV).maxRank < node.rank) {\n          pathIdx++;\n        }\n\n        if (pathV === lca) {\n          ascending = false;\n        }\n      }\n\n      if (!ascending) {\n        while (pathIdx < path.length - 1 &&\n               g.node(pathV = path[pathIdx + 1]).minRank <= node.rank) {\n          pathIdx++;\n        }\n        pathV = path[pathIdx];\n      }\n\n      g.setParent(v, pathV);\n      v = g.successors(v)[0];\n    }\n  });\n}\n\n// Find a path from v to w through the lowest common ancestor (LCA). Return the\n// full path and the LCA.\nfunction findPath(g, postorderNums, v, w) {\n  var vPath = [];\n  var wPath = [];\n  var low = Math.min(postorderNums[v].low, postorderNums[w].low);\n  var lim = Math.max(postorderNums[v].lim, postorderNums[w].lim);\n  var parent;\n  var lca;\n\n  // Traverse up from v to find the LCA\n  parent = v;\n  do {\n    parent = g.parent(parent);\n    vPath.push(parent);\n  } while (parent &&\n           (postorderNums[parent].low > low || lim > postorderNums[parent].lim));\n  lca = parent;\n\n  // Traverse from w to LCA\n  parent = w;\n  while ((parent = g.parent(parent)) !== lca) {\n    wPath.push(parent);\n  }\n\n  return { path: vPath.concat(wPath.reverse()), lca: lca };\n}\n\nfunction postorder(g) {\n  var result = {};\n  var lim = 0;\n\n  function dfs(v) {\n    var low = lim;\n    _.forEach(g.children(v), dfs);\n    result[v] = { low: low, lim: lim++ };\n  }\n  _.forEach(g.children(), dfs);\n\n  return result;\n}\n", "var _ = require(\"./lodash\");\nvar util = require(\"./util\");\n\nmodule.exports = {\n  run: run,\n  cleanup: cleanup\n};\n\n/*\n * A nesting graph creates dummy nodes for the tops and bottoms of subgraphs,\n * adds appropriate edges to ensure that all cluster nodes are placed between\n * these boundries, and ensures that the graph is connected.\n *\n * In addition we ensure, through the use of the minlen property, that nodes\n * and subgraph border nodes to not end up on the same rank.\n *\n * Preconditions:\n *\n *    1. Input graph is a DAG\n *    2. Nodes in the input graph has a minlen attribute\n *\n * Postconditions:\n *\n *    1. Input graph is connected.\n *    2. Dummy nodes are added for the tops and bottoms of subgraphs.\n *    3. The minlen attribute for nodes is adjusted to ensure nodes do not\n *       get placed on the same rank as subgraph border nodes.\n *\n * The nesting graph idea comes from Sander, \"Layout of Compound Directed\n * Graphs.\"\n */\nfunction run(g) {\n  var root = util.addDummyNode(g, \"root\", {}, \"_root\");\n  var depths = treeDepths(g);\n  var height = _.max(_.values(depths)) - 1; // Note: depths is an Object not an array\n  var nodeSep = 2 * height + 1;\n\n  g.graph().nestingRoot = root;\n\n  // Multiply minlen by nodeSep to align nodes on non-border ranks.\n  _.forEach(g.edges(), function(e) { g.edge(e).minlen *= nodeSep; });\n\n  // Calculate a weight that is sufficient to keep subgraphs vertically compact\n  var weight = sumWeights(g) + 1;\n\n  // Create border nodes and link them up\n  _.forEach(g.children(), function(child) {\n    dfs(g, root, nodeSep, weight, height, depths, child);\n  });\n\n  // Save the multiplier for node layers for later removal of empty border\n  // layers.\n  g.graph().nodeRankFactor = nodeSep;\n}\n\nfunction dfs(g, root, nodeSep, weight, height, depths, v) {\n  var children = g.children(v);\n  if (!children.length) {\n    if (v !== root) {\n      g.setEdge(root, v, { weight: 0, minlen: nodeSep });\n    }\n    return;\n  }\n\n  var top = util.addBorderNode(g, \"_bt\");\n  var bottom = util.addBorderNode(g, \"_bb\");\n  var label = g.node(v);\n\n  g.setParent(top, v);\n  label.borderTop = top;\n  g.setParent(bottom, v);\n  label.borderBottom = bottom;\n\n  _.forEach(children, function(child) {\n    dfs(g, root, nodeSep, weight, height, depths, child);\n\n    var childNode = g.node(child);\n    var childTop = childNode.borderTop ? childNode.borderTop : child;\n    var childBottom = childNode.borderBottom ? childNode.borderBottom : child;\n    var thisWeight = childNode.borderTop ? weight : 2 * weight;\n    var minlen = childTop !== childBottom ? 1 : height - depths[v] + 1;\n\n    g.setEdge(top, childTop, {\n      weight: thisWeight,\n      minlen: minlen,\n      nestingEdge: true\n    });\n\n    g.setEdge(childBottom, bottom, {\n      weight: thisWeight,\n      minlen: minlen,\n      nestingEdge: true\n    });\n  });\n\n  if (!g.parent(v)) {\n    g.setEdge(root, top, { weight: 0, minlen: height + depths[v] });\n  }\n}\n\nfunction treeDepths(g) {\n  var depths = {};\n  function dfs(v, depth) {\n    var children = g.children(v);\n    if (children && children.length) {\n      _.forEach(children, function(child) {\n        dfs(child, depth + 1);\n      });\n    }\n    depths[v] = depth;\n  }\n  _.forEach(g.children(), function(v) { dfs(v, 1); });\n  return depths;\n}\n\nfunction sumWeights(g) {\n  return _.reduce(g.edges(), function(acc, e) {\n    return acc + g.edge(e).weight;\n  }, 0);\n}\n\nfunction cleanup(g) {\n  var graphLabel = g.graph();\n  g.removeNode(graphLabel.nestingRoot);\n  delete graphLabel.nestingRoot;\n  _.forEach(g.edges(), function(e) {\n    var edge = g.edge(e);\n    if (edge.nestingEdge) {\n      g.removeEdge(e);\n    }\n  });\n}\n", "var _ = require(\"./lodash\");\nvar util = require(\"./util\");\n\nmodule.exports = addBorderSegments;\n\nfunction addBorderSegments(g) {\n  function dfs(v) {\n    var children = g.children(v);\n    var node = g.node(v);\n    if (children.length) {\n      _.forEach(children, dfs);\n    }\n\n    if (_.has(node, \"minRank\")) {\n      node.borderLeft = [];\n      node.borderRight = [];\n      for (var rank = node.minRank, maxRank = node.maxRank + 1;\n        rank < maxRank;\n        ++rank) {\n        addBorderNode(g, \"borderLeft\", \"_bl\", v, node, rank);\n        addBorderNode(g, \"borderRight\", \"_br\", v, node, rank);\n      }\n    }\n  }\n\n  _.forEach(g.children(), dfs);\n}\n\nfunction addBorderNode(g, prop, prefix, sg, sgNode, rank) {\n  var label = { width: 0, height: 0, rank: rank, borderType: prop };\n  var prev = sgNode[prop][rank - 1];\n  var curr = util.addDummyNode(g, \"border\", label, prefix);\n  sgNode[prop][rank] = curr;\n  g.setParent(curr, sg);\n  if (prev) {\n    g.setEdge(prev, curr, { weight: 1 });\n  }\n}\n", "\"use strict\";\n\nvar _ = require(\"./lodash\");\n\nmodule.exports = {\n  adjust: adjust,\n  undo: undo\n};\n\nfunction adjust(g) {\n  var rankDir = g.graph().rankdir.toLowerCase();\n  if (rankDir === \"lr\" || rankDir === \"rl\") {\n    swapWidthHeight(g);\n  }\n}\n\nfunction undo(g) {\n  var rankDir = g.graph().rankdir.toLowerCase();\n  if (rankDir === \"bt\" || rankDir === \"rl\") {\n    reverseY(g);\n  }\n\n  if (rankDir === \"lr\" || rankDir === \"rl\") {\n    swapXY(g);\n    swapWidthHeight(g);\n  }\n}\n\nfunction swapWidthHeight(g) {\n  _.forEach(g.nodes(), function(v) { swapWidthHeightOne(g.node(v)); });\n  _.forEach(g.edges(), function(e) { swapWidthHeightOne(g.edge(e)); });\n}\n\nfunction swapWidthHeightOne(attrs) {\n  var w = attrs.width;\n  attrs.width = attrs.height;\n  attrs.height = w;\n}\n\nfunction reverseY(g) {\n  _.forEach(g.nodes(), function(v) { reverseYOne(g.node(v)); });\n\n  _.forEach(g.edges(), function(e) {\n    var edge = g.edge(e);\n    _.forEach(edge.points, reverseYOne);\n    if (_.has(edge, \"y\")) {\n      reverseYOne(edge);\n    }\n  });\n}\n\nfunction reverseYOne(attrs) {\n  attrs.y = -attrs.y;\n}\n\nfunction swapXY(g) {\n  _.forEach(g.nodes(), function(v) { swapXYOne(g.node(v)); });\n\n  _.forEach(g.edges(), function(e) {\n    var edge = g.edge(e);\n    _.forEach(edge.points, swapXYOne);\n    if (_.has(edge, \"x\")) {\n      swapXYOne(edge);\n    }\n  });\n}\n\nfunction swapXYOne(attrs) {\n  var x = attrs.x;\n  attrs.x = attrs.y;\n  attrs.y = x;\n}\n", "\"use strict\";\n\nvar _ = require(\"../lodash\");\n\nmodule.exports = initOrder;\n\n/*\n * Assigns an initial order value for each node by performing a DFS search\n * starting from nodes in the first rank. Nodes are assigned an order in their\n * rank as they are first visited.\n *\n * This approach comes from Gansner, et al., \"A Technique for Drawing Directed\n * Graphs.\"\n *\n * Returns a layering matrix with an array per layer and each layer sorted by\n * the order of its nodes.\n */\nfunction initOrder(g) {\n  var visited = {};\n  var simpleNodes = _.filter(g.nodes(), function(v) {\n    return !g.children(v).length;\n  });\n  var maxRank = _.max(_.map(simpleNodes, function(v) { return g.node(v).rank; }));\n  var layers = _.map(_.range(maxRank + 1), function() { return []; });\n\n  function dfs(v) {\n    if (_.has(visited, v)) return;\n    visited[v] = true;\n    var node = g.node(v);\n    layers[node.rank].push(v);\n    _.forEach(g.successors(v), dfs);\n  }\n\n  var orderedVs = _.sortBy(simpleNodes, function(v) { return g.node(v).rank; });\n  _.forEach(orderedVs, dfs);\n\n  return layers;\n}\n", "\"use strict\";\n\nvar _ = require(\"../lodash\");\n\nmodule.exports = crossCount;\n\n/*\n * A function that takes a layering (an array of layers, each with an array of\n * ordererd nodes) and a graph and returns a weighted crossing count.\n *\n * Pre-conditions:\n *\n *    1. Input graph must be simple (not a multigraph), directed, and include\n *       only simple edges.\n *    2. Edges in the input graph must have assigned weights.\n *\n * Post-conditions:\n *\n *    1. The graph and layering matrix are left unchanged.\n *\n * This algorithm is derived from Barth, et al., \"Bilayer Cross Counting.\"\n */\nfunction crossCount(g, layering) {\n  var cc = 0;\n  for (var i = 1; i < layering.length; ++i) {\n    cc += twoLayerCrossCount(g, layering[i-1], layering[i]);\n  }\n  return cc;\n}\n\nfunction twoLayerCrossCount(g, northLayer, southLayer) {\n  // Sort all of the edges between the north and south layers by their position\n  // in the north layer and then the south. Map these edges to the position of\n  // their head in the south layer.\n  var southPos = _.zipObject(southLayer,\n    _.map(southLayer, function (v, i) { return i; }));\n  var southEntries = _.flatten(_.map(northLayer, function(v) {\n    return _.sortBy(_.map(g.outEdges(v), function(e) {\n      return { pos: southPos[e.w], weight: g.edge(e).weight };\n    }), \"pos\");\n  }), true);\n\n  // Build the accumulator tree\n  var firstIndex = 1;\n  while (firstIndex < southLayer.length) firstIndex <<= 1;\n  var treeSize = 2 * firstIndex - 1;\n  firstIndex -= 1;\n  var tree = _.map(new Array(treeSize), function() { return 0; });\n\n  // Calculate the weighted crossings\n  var cc = 0;\n  _.forEach(southEntries.forEach(function(entry) {\n    var index = entry.pos + firstIndex;\n    tree[index] += entry.weight;\n    var weightSum = 0;\n    while (index > 0) {\n      if (index % 2) {\n        weightSum += tree[index + 1];\n      }\n      index = (index - 1) >> 1;\n      tree[index] += entry.weight;\n    }\n    cc += entry.weight * weightSum;\n  }));\n\n  return cc;\n}\n", "var _ = require(\"../lodash\");\n\nmodule.exports = barycenter;\n\nfunction barycenter(g, movable) {\n  return _.map(movable, function(v) {\n    var inV = g.inEdges(v);\n    if (!inV.length) {\n      return { v: v };\n    } else {\n      var result = _.reduce(inV, function(acc, e) {\n        var edge = g.edge(e),\n          nodeU = g.node(e.v);\n        return {\n          sum: acc.sum + (edge.weight * nodeU.order),\n          weight: acc.weight + edge.weight\n        };\n      }, { sum: 0, weight: 0 });\n\n      return {\n        v: v,\n        barycenter: result.sum / result.weight,\n        weight: result.weight\n      };\n    }\n  });\n}\n\n", "\"use strict\";\n\nvar _ = require(\"../lodash\");\n\nmodule.exports = resolveConflicts;\n\n/*\n * Given a list of entries of the form {v, barycenter, weight} and a\n * constraint graph this function will resolve any conflicts between the\n * constraint graph and the barycenters for the entries. If the barycenters for\n * an entry would violate a constraint in the constraint graph then we coalesce\n * the nodes in the conflict into a new node that respects the contraint and\n * aggregates barycenter and weight information.\n *\n * This implementation is based on the description in Forster, \"A Fast and\n * Simple Hueristic for Constrained Two-Level Crossing Reduction,\" thought it\n * differs in some specific details.\n *\n * Pre-conditions:\n *\n *    1. Each entry has the form {v, barycenter, weight}, or if the node has\n *       no barycenter, then {v}.\n *\n * Returns:\n *\n *    A new list of entries of the form {vs, i, barycenter, weight}. The list\n *    `vs` may either be a singleton or it may be an aggregation of nodes\n *    ordered such that they do not violate constraints from the constraint\n *    graph. The property `i` is the lowest original index of any of the\n *    elements in `vs`.\n */\nfunction resolveConflicts(entries, cg) {\n  var mappedEntries = {};\n  _.forEach(entries, function(entry, i) {\n    var tmp = mappedEntries[entry.v] = {\n      indegree: 0,\n      \"in\": [],\n      out: [],\n      vs: [entry.v],\n      i: i\n    };\n    if (!_.isUndefined(entry.barycenter)) {\n      tmp.barycenter = entry.barycenter;\n      tmp.weight = entry.weight;\n    }\n  });\n\n  _.forEach(cg.edges(), function(e) {\n    var entryV = mappedEntries[e.v];\n    var entryW = mappedEntries[e.w];\n    if (!_.isUndefined(entryV) && !_.isUndefined(entryW)) {\n      entryW.indegree++;\n      entryV.out.push(mappedEntries[e.w]);\n    }\n  });\n\n  var sourceSet = _.filter(mappedEntries, function(entry) {\n    return !entry.indegree;\n  });\n\n  return doResolveConflicts(sourceSet);\n}\n\nfunction doResolveConflicts(sourceSet) {\n  var entries = [];\n\n  function handleIn(vEntry) {\n    return function(uEntry) {\n      if (uEntry.merged) {\n        return;\n      }\n      if (_.isUndefined(uEntry.barycenter) ||\n          _.isUndefined(vEntry.barycenter) ||\n          uEntry.barycenter >= vEntry.barycenter) {\n        mergeEntries(vEntry, uEntry);\n      }\n    };\n  }\n\n  function handleOut(vEntry) {\n    return function(wEntry) {\n      wEntry[\"in\"].push(vEntry);\n      if (--wEntry.indegree === 0) {\n        sourceSet.push(wEntry);\n      }\n    };\n  }\n\n  while (sourceSet.length) {\n    var entry = sourceSet.pop();\n    entries.push(entry);\n    _.forEach(entry[\"in\"].reverse(), handleIn(entry));\n    _.forEach(entry.out, handleOut(entry));\n  }\n\n  return _.map(_.filter(entries, function(entry) { return !entry.merged; }),\n    function(entry) {\n      return _.pick(entry, [\"vs\", \"i\", \"barycenter\", \"weight\"]);\n    });\n\n}\n\nfunction mergeEntries(target, source) {\n  var sum = 0;\n  var weight = 0;\n\n  if (target.weight) {\n    sum += target.barycenter * target.weight;\n    weight += target.weight;\n  }\n\n  if (source.weight) {\n    sum += source.barycenter * source.weight;\n    weight += source.weight;\n  }\n\n  target.vs = source.vs.concat(target.vs);\n  target.barycenter = sum / weight;\n  target.weight = weight;\n  target.i = Math.min(source.i, target.i);\n  source.merged = true;\n}\n", "var _ = require(\"../lodash\");\nvar util = require(\"../util\");\n\nmodule.exports = sort;\n\nfunction sort(entries, biasRight) {\n  var parts = util.partition(entries, function(entry) {\n    return _.has(entry, \"barycenter\");\n  });\n  var sortable = parts.lhs,\n    unsortable = _.sortBy(parts.rhs, function(entry) { return -entry.i; }),\n    vs = [],\n    sum = 0,\n    weight = 0,\n    vsIndex = 0;\n\n  sortable.sort(compareWithBias(!!biasRight));\n\n  vsIndex = consumeUnsortable(vs, unsortable, vsIndex);\n\n  _.forEach(sortable, function (entry) {\n    vsIndex += entry.vs.length;\n    vs.push(entry.vs);\n    sum += entry.barycenter * entry.weight;\n    weight += entry.weight;\n    vsIndex = consumeUnsortable(vs, unsortable, vsIndex);\n  });\n\n  var result = { vs: _.flatten(vs, true) };\n  if (weight) {\n    result.barycenter = sum / weight;\n    result.weight = weight;\n  }\n  return result;\n}\n\nfunction consumeUnsortable(vs, unsortable, index) {\n  var last;\n  while (unsortable.length && (last = _.last(unsortable)).i <= index) {\n    unsortable.pop();\n    vs.push(last.vs);\n    index++;\n  }\n  return index;\n}\n\nfunction compareWithBias(bias) {\n  return function(entryV, entryW) {\n    if (entryV.barycenter < entryW.barycenter) {\n      return -1;\n    } else if (entryV.barycenter > entryW.barycenter) {\n      return 1;\n    }\n\n    return !bias ? entryV.i - entryW.i : entryW.i - entryV.i;\n  };\n}\n", "var _ = require(\"../lodash\");\nvar barycenter = require(\"./barycenter\");\nvar resolveConflicts = require(\"./resolve-conflicts\");\nvar sort = require(\"./sort\");\n\nmodule.exports = sortSubgraph;\n\nfunction sortSubgraph(g, v, cg, biasRight) {\n  var movable = g.children(v);\n  var node = g.node(v);\n  var bl = node ? node.borderLeft : undefined;\n  var br = node ? node.borderRight: undefined;\n  var subgraphs = {};\n\n  if (bl) {\n    movable = _.filter(movable, function(w) {\n      return w !== bl && w !== br;\n    });\n  }\n\n  var barycenters = barycenter(g, movable);\n  _.forEach(barycenters, function(entry) {\n    if (g.children(entry.v).length) {\n      var subgraphResult = sortSubgraph(g, entry.v, cg, biasRight);\n      subgraphs[entry.v] = subgraphResult;\n      if (_.has(subgraphResult, \"barycenter\")) {\n        mergeBarycenters(entry, subgraphResult);\n      }\n    }\n  });\n\n  var entries = resolveConflicts(barycenters, cg);\n  expandSubgraphs(entries, subgraphs);\n\n  var result = sort(entries, biasRight);\n\n  if (bl) {\n    result.vs = _.flatten([bl, result.vs, br], true);\n    if (g.predecessors(bl).length) {\n      var blPred = g.node(g.predecessors(bl)[0]),\n        brPred = g.node(g.predecessors(br)[0]);\n      if (!_.has(result, \"barycenter\")) {\n        result.barycenter = 0;\n        result.weight = 0;\n      }\n      result.barycenter = (result.barycenter * result.weight +\n                           blPred.order + brPred.order) / (result.weight + 2);\n      result.weight += 2;\n    }\n  }\n\n  return result;\n}\n\nfunction expandSubgraphs(entries, subgraphs) {\n  _.forEach(entries, function(entry) {\n    entry.vs = _.flatten(entry.vs.map(function(v) {\n      if (subgraphs[v]) {\n        return subgraphs[v].vs;\n      }\n      return v;\n    }), true);\n  });\n}\n\nfunction mergeBarycenters(target, other) {\n  if (!_.isUndefined(target.barycenter)) {\n    target.barycenter = (target.barycenter * target.weight +\n                         other.barycenter * other.weight) /\n                        (target.weight + other.weight);\n    target.weight += other.weight;\n  } else {\n    target.barycenter = other.barycenter;\n    target.weight = other.weight;\n  }\n}\n", "var _ = require(\"../lodash\");\nvar Graph = require(\"../graphlib\").Graph;\n\nmodule.exports = buildLayerGraph;\n\n/*\n * Constructs a graph that can be used to sort a layer of nodes. The graph will\n * contain all base and subgraph nodes from the request layer in their original\n * hierarchy and any edges that are incident on these nodes and are of the type\n * requested by the \"relationship\" parameter.\n *\n * Nodes from the requested rank that do not have parents are assigned a root\n * node in the output graph, which is set in the root graph attribute. This\n * makes it easy to walk the hierarchy of movable nodes during ordering.\n *\n * Pre-conditions:\n *\n *    1. Input graph is a DAG\n *    2. Base nodes in the input graph have a rank attribute\n *    3. Subgraph nodes in the input graph has minRank and maxRank attributes\n *    4. Edges have an assigned weight\n *\n * Post-conditions:\n *\n *    1. Output graph has all nodes in the movable rank with preserved\n *       hierarchy.\n *    2. Root nodes in the movable layer are made children of the node\n *       indicated by the root attribute of the graph.\n *    3. Non-movable nodes incident on movable nodes, selected by the\n *       relationship parameter, are included in the graph (without hierarchy).\n *    4. Edges incident on movable nodes, selected by the relationship\n *       parameter, are added to the output graph.\n *    5. The weights for copied edges are aggregated as need, since the output\n *       graph is not a multi-graph.\n */\nfunction buildLayerGraph(g, rank, relationship) {\n  var root = createRootNode(g),\n    result = new Graph({ compound: true }).setGraph({ root: root })\n      .setDefaultNodeLabel(function(v) { return g.node(v); });\n\n  _.forEach(g.nodes(), function(v) {\n    var node = g.node(v),\n      parent = g.parent(v);\n\n    if (node.rank === rank || node.minRank <= rank && rank <= node.maxRank) {\n      result.setNode(v);\n      result.setParent(v, parent || root);\n\n      // This assumes we have only short edges!\n      _.forEach(g[relationship](v), function(e) {\n        var u = e.v === v ? e.w : e.v,\n          edge = result.edge(u, v),\n          weight = !_.isUndefined(edge) ? edge.weight : 0;\n        result.setEdge(u, v, { weight: g.edge(e).weight + weight });\n      });\n\n      if (_.has(node, \"minRank\")) {\n        result.setNode(v, {\n          borderLeft: node.borderLeft[rank],\n          borderRight: node.borderRight[rank]\n        });\n      }\n    }\n  });\n\n  return result;\n}\n\nfunction createRootNode(g) {\n  var v;\n  while (g.hasNode((v = _.uniqueId(\"_root\"))));\n  return v;\n}\n", "var _ = require(\"../lodash\");\n\nmodule.exports = addSubgraphConstraints;\n\nfunction addSubgraphConstraints(g, cg, vs) {\n  var prev = {},\n    rootPrev;\n\n  _.forEach(vs, function(v) {\n    var child = g.parent(v),\n      parent,\n      prevChild;\n    while (child) {\n      parent = g.parent(child);\n      if (parent) {\n        prevChild = prev[parent];\n        prev[parent] = child;\n      } else {\n        prevChild = rootPrev;\n        rootPrev = child;\n      }\n      if (prevChild && prevChild !== child) {\n        cg.setEdge(prevChild, child);\n        return;\n      }\n      child = parent;\n    }\n  });\n\n  /*\n  function dfs(v) {\n    var children = v ? g.children(v) : g.children();\n    if (children.length) {\n      var min = Number.POSITIVE_INFINITY,\n          subgraphs = [];\n      _.each(children, function(child) {\n        var childMin = dfs(child);\n        if (g.children(child).length) {\n          subgraphs.push({ v: child, order: childMin });\n        }\n        min = Math.min(min, childMin);\n      });\n      _.reduce(_.sortBy(subgraphs, \"order\"), function(prev, curr) {\n        cg.setEdge(prev.v, curr.v);\n        return curr;\n      });\n      return min;\n    }\n    return g.node(v).order;\n  }\n  dfs(undefined);\n  */\n}\n", "\"use strict\";\n\nvar _ = require(\"../lodash\");\nvar initOrder = require(\"./init-order\");\nvar crossCount = require(\"./cross-count\");\nvar sortSubgraph = require(\"./sort-subgraph\");\nvar buildLayerGraph = require(\"./build-layer-graph\");\nvar addSubgraphConstraints = require(\"./add-subgraph-constraints\");\nvar Graph = require(\"../graphlib\").Graph;\nvar util = require(\"../util\");\n\nmodule.exports = order;\n\n/*\n * Applies heuristics to minimize edge crossings in the graph and sets the best\n * order solution as an order attribute on each node.\n *\n * Pre-conditions:\n *\n *    1. Graph must be DAG\n *    2. Graph nodes must be objects with a \"rank\" attribute\n *    3. Graph edges must have the \"weight\" attribute\n *\n * Post-conditions:\n *\n *    1. Graph nodes will have an \"order\" attribute based on the results of the\n *       algorithm.\n */\nfunction order(g) {\n  var maxRank = util.maxRank(g),\n    downLayerGraphs = buildLayerGraphs(g, _.range(1, maxRank + 1), \"inEdges\"),\n    upLayerGraphs = buildLayerGraphs(g, _.range(maxRank - 1, -1, -1), \"outEdges\");\n\n  var layering = initOrder(g);\n  assignOrder(g, layering);\n\n  var bestCC = Number.POSITIVE_INFINITY,\n    best;\n\n  for (var i = 0, lastBest = 0; lastBest < 4; ++i, ++lastBest) {\n    sweepLayerGraphs(i % 2 ? downLayerGraphs : upLayerGraphs, i % 4 >= 2);\n\n    layering = util.buildLayerMatrix(g);\n    var cc = crossCount(g, layering);\n    if (cc < bestCC) {\n      lastBest = 0;\n      best = _.cloneDeep(layering);\n      bestCC = cc;\n    }\n  }\n\n  assignOrder(g, best);\n}\n\nfunction buildLayerGraphs(g, ranks, relationship) {\n  return _.map(ranks, function(rank) {\n    return buildLayerGraph(g, rank, relationship);\n  });\n}\n\nfunction sweepLayerGraphs(layerGraphs, biasRight) {\n  var cg = new Graph();\n  _.forEach(layerGraphs, function(lg) {\n    var root = lg.graph().root;\n    var sorted = sortSubgraph(lg, root, cg, biasRight);\n    _.forEach(sorted.vs, function(v, i) {\n      lg.node(v).order = i;\n    });\n    addSubgraphConstraints(lg, cg, sorted.vs);\n  });\n}\n\nfunction assignOrder(g, layering) {\n  _.forEach(layering, function(layer) {\n    _.forEach(layer, function(v, i) {\n      g.node(v).order = i;\n    });\n  });\n}\n", "\"use strict\";\n\nvar _ = require(\"../lodash\");\nvar Graph = require(\"../graphlib\").Graph;\nvar util = require(\"../util\");\n\n/*\n * This module provides coordinate assignment based on Brandes and Kpf, \"Fast\n * and Simple Horizontal Coordinate Assignment.\"\n */\n\nmodule.exports = {\n  positionX: positionX,\n  findType1Conflicts: findType1Conflicts,\n  findType2Conflicts: findType2Conflicts,\n  addConflict: addConflict,\n  hasConflict: hasConflict,\n  verticalAlignment: verticalAlignment,\n  horizontalCompaction: horizontalCompaction,\n  alignCoordinates: alignCoordinates,\n  findSmallestWidthAlignment: findSmallestWidthAlignment,\n  balance: balance\n};\n\n/*\n * Marks all edges in the graph with a type-1 conflict with the \"type1Conflict\"\n * property. A type-1 conflict is one where a non-inner segment crosses an\n * inner segment. An inner segment is an edge with both incident nodes marked\n * with the \"dummy\" property.\n *\n * This algorithm scans layer by layer, starting with the second, for type-1\n * conflicts between the current layer and the previous layer. For each layer\n * it scans the nodes from left to right until it reaches one that is incident\n * on an inner segment. It then scans predecessors to determine if they have\n * edges that cross that inner segment. At the end a final scan is done for all\n * nodes on the current rank to see if they cross the last visited inner\n * segment.\n *\n * This algorithm (safely) assumes that a dummy node will only be incident on a\n * single node in the layers being scanned.\n */\nfunction findType1Conflicts(g, layering) {\n  var conflicts = {};\n\n  function visitLayer(prevLayer, layer) {\n    var\n      // last visited node in the previous layer that is incident on an inner\n      // segment.\n      k0 = 0,\n      // Tracks the last node in this layer scanned for crossings with a type-1\n      // segment.\n      scanPos = 0,\n      prevLayerLength = prevLayer.length,\n      lastNode = _.last(layer);\n\n    _.forEach(layer, function(v, i) {\n      var w = findOtherInnerSegmentNode(g, v),\n        k1 = w ? g.node(w).order : prevLayerLength;\n\n      if (w || v === lastNode) {\n        _.forEach(layer.slice(scanPos, i +1), function(scanNode) {\n          _.forEach(g.predecessors(scanNode), function(u) {\n            var uLabel = g.node(u),\n              uPos = uLabel.order;\n            if ((uPos < k0 || k1 < uPos) &&\n                !(uLabel.dummy && g.node(scanNode).dummy)) {\n              addConflict(conflicts, u, scanNode);\n            }\n          });\n        });\n        scanPos = i + 1;\n        k0 = k1;\n      }\n    });\n\n    return layer;\n  }\n\n  _.reduce(layering, visitLayer);\n  return conflicts;\n}\n\nfunction findType2Conflicts(g, layering) {\n  var conflicts = {};\n\n  function scan(south, southPos, southEnd, prevNorthBorder, nextNorthBorder) {\n    var v;\n    _.forEach(_.range(southPos, southEnd), function(i) {\n      v = south[i];\n      if (g.node(v).dummy) {\n        _.forEach(g.predecessors(v), function(u) {\n          var uNode = g.node(u);\n          if (uNode.dummy &&\n              (uNode.order < prevNorthBorder || uNode.order > nextNorthBorder)) {\n            addConflict(conflicts, u, v);\n          }\n        });\n      }\n    });\n  }\n\n\n  function visitLayer(north, south) {\n    var prevNorthPos = -1,\n      nextNorthPos,\n      southPos = 0;\n\n    _.forEach(south, function(v, southLookahead) {\n      if (g.node(v).dummy === \"border\") {\n        var predecessors = g.predecessors(v);\n        if (predecessors.length) {\n          nextNorthPos = g.node(predecessors[0]).order;\n          scan(south, southPos, southLookahead, prevNorthPos, nextNorthPos);\n          southPos = southLookahead;\n          prevNorthPos = nextNorthPos;\n        }\n      }\n      scan(south, southPos, south.length, nextNorthPos, north.length);\n    });\n\n    return south;\n  }\n\n  _.reduce(layering, visitLayer);\n  return conflicts;\n}\n\nfunction findOtherInnerSegmentNode(g, v) {\n  if (g.node(v).dummy) {\n    return _.find(g.predecessors(v), function(u) {\n      return g.node(u).dummy;\n    });\n  }\n}\n\nfunction addConflict(conflicts, v, w) {\n  if (v > w) {\n    var tmp = v;\n    v = w;\n    w = tmp;\n  }\n\n  var conflictsV = conflicts[v];\n  if (!conflictsV) {\n    conflicts[v] = conflictsV = {};\n  }\n  conflictsV[w] = true;\n}\n\nfunction hasConflict(conflicts, v, w) {\n  if (v > w) {\n    var tmp = v;\n    v = w;\n    w = tmp;\n  }\n  return _.has(conflicts[v], w);\n}\n\n/*\n * Try to align nodes into vertical \"blocks\" where possible. This algorithm\n * attempts to align a node with one of its median neighbors. If the edge\n * connecting a neighbor is a type-1 conflict then we ignore that possibility.\n * If a previous node has already formed a block with a node after the node\n * we're trying to form a block with, we also ignore that possibility - our\n * blocks would be split in that scenario.\n */\nfunction verticalAlignment(g, layering, conflicts, neighborFn) {\n  var root = {},\n    align = {},\n    pos = {};\n\n  // We cache the position here based on the layering because the graph and\n  // layering may be out of sync. The layering matrix is manipulated to\n  // generate different extreme alignments.\n  _.forEach(layering, function(layer) {\n    _.forEach(layer, function(v, order) {\n      root[v] = v;\n      align[v] = v;\n      pos[v] = order;\n    });\n  });\n\n  _.forEach(layering, function(layer) {\n    var prevIdx = -1;\n    _.forEach(layer, function(v) {\n      var ws = neighborFn(v);\n      if (ws.length) {\n        ws = _.sortBy(ws, function(w) { return pos[w]; });\n        var mp = (ws.length - 1) / 2;\n        for (var i = Math.floor(mp), il = Math.ceil(mp); i <= il; ++i) {\n          var w = ws[i];\n          if (align[v] === v &&\n              prevIdx < pos[w] &&\n              !hasConflict(conflicts, v, w)) {\n            align[w] = v;\n            align[v] = root[v] = root[w];\n            prevIdx = pos[w];\n          }\n        }\n      }\n    });\n  });\n\n  return { root: root, align: align };\n}\n\nfunction horizontalCompaction(g, layering, root, align, reverseSep) {\n  // This portion of the algorithm differs from BK due to a number of problems.\n  // Instead of their algorithm we construct a new block graph and do two\n  // sweeps. The first sweep places blocks with the smallest possible\n  // coordinates. The second sweep removes unused space by moving blocks to the\n  // greatest coordinates without violating separation.\n  var xs = {},\n    blockG = buildBlockGraph(g, layering, root, reverseSep),\n    borderType = reverseSep ? \"borderLeft\" : \"borderRight\";\n\n  function iterate(setXsFunc, nextNodesFunc) {\n    var stack = blockG.nodes();\n    var elem = stack.pop();\n    var visited = {};\n    while (elem) {\n      if (visited[elem]) {\n        setXsFunc(elem);\n      } else {\n        visited[elem] = true;\n        stack.push(elem);\n        stack = stack.concat(nextNodesFunc(elem));\n      }\n\n      elem = stack.pop();\n    }\n  }\n\n  // First pass, assign smallest coordinates\n  function pass1(elem) {\n    xs[elem] = blockG.inEdges(elem).reduce(function(acc, e) {\n      return Math.max(acc, xs[e.v] + blockG.edge(e));\n    }, 0);\n  }\n\n  // Second pass, assign greatest coordinates\n  function pass2(elem) {\n    var min = blockG.outEdges(elem).reduce(function(acc, e) {\n      return Math.min(acc, xs[e.w] - blockG.edge(e));\n    }, Number.POSITIVE_INFINITY);\n\n    var node = g.node(elem);\n    if (min !== Number.POSITIVE_INFINITY && node.borderType !== borderType) {\n      xs[elem] = Math.max(xs[elem], min);\n    }\n  }\n\n  iterate(pass1, blockG.predecessors.bind(blockG));\n  iterate(pass2, blockG.successors.bind(blockG));\n\n  // Assign x coordinates to all nodes\n  _.forEach(align, function(v) {\n    xs[v] = xs[root[v]];\n  });\n\n  return xs;\n}\n\n\nfunction buildBlockGraph(g, layering, root, reverseSep) {\n  var blockGraph = new Graph(),\n    graphLabel = g.graph(),\n    sepFn = sep(graphLabel.nodesep, graphLabel.edgesep, reverseSep);\n\n  _.forEach(layering, function(layer) {\n    var u;\n    _.forEach(layer, function(v) {\n      var vRoot = root[v];\n      blockGraph.setNode(vRoot);\n      if (u) {\n        var uRoot = root[u],\n          prevMax = blockGraph.edge(uRoot, vRoot);\n        blockGraph.setEdge(uRoot, vRoot, Math.max(sepFn(g, v, u), prevMax || 0));\n      }\n      u = v;\n    });\n  });\n\n  return blockGraph;\n}\n\n/*\n * Returns the alignment that has the smallest width of the given alignments.\n */\nfunction findSmallestWidthAlignment(g, xss) {\n  return _.minBy(_.values(xss), function (xs) {\n    var max = Number.NEGATIVE_INFINITY;\n    var min = Number.POSITIVE_INFINITY;\n\n    _.forIn(xs, function (x, v) {\n      var halfWidth = width(g, v) / 2;\n\n      max = Math.max(x + halfWidth, max);\n      min = Math.min(x - halfWidth, min);\n    });\n\n    return max - min;\n  });\n}\n\n/*\n * Align the coordinates of each of the layout alignments such that\n * left-biased alignments have their minimum coordinate at the same point as\n * the minimum coordinate of the smallest width alignment and right-biased\n * alignments have their maximum coordinate at the same point as the maximum\n * coordinate of the smallest width alignment.\n */\nfunction alignCoordinates(xss, alignTo) {\n  var alignToVals = _.values(alignTo),\n    alignToMin = _.min(alignToVals),\n    alignToMax = _.max(alignToVals);\n\n  _.forEach([\"u\", \"d\"], function(vert) {\n    _.forEach([\"l\", \"r\"], function(horiz) {\n      var alignment = vert + horiz,\n        xs = xss[alignment],\n        delta;\n      if (xs === alignTo) return;\n\n      var xsVals = _.values(xs);\n      delta = horiz === \"l\" ? alignToMin - _.min(xsVals) : alignToMax - _.max(xsVals);\n\n      if (delta) {\n        xss[alignment] = _.mapValues(xs, function(x) { return x + delta; });\n      }\n    });\n  });\n}\n\nfunction balance(xss, align) {\n  return _.mapValues(xss.ul, function(ignore, v) {\n    if (align) {\n      return xss[align.toLowerCase()][v];\n    } else {\n      var xs = _.sortBy(_.map(xss, v));\n      return (xs[1] + xs[2]) / 2;\n    }\n  });\n}\n\nfunction positionX(g) {\n  var layering = util.buildLayerMatrix(g);\n  var conflicts = _.merge(\n    findType1Conflicts(g, layering),\n    findType2Conflicts(g, layering));\n\n  var xss = {};\n  var adjustedLayering;\n  _.forEach([\"u\", \"d\"], function(vert) {\n    adjustedLayering = vert === \"u\" ? layering : _.values(layering).reverse();\n    _.forEach([\"l\", \"r\"], function(horiz) {\n      if (horiz === \"r\") {\n        adjustedLayering = _.map(adjustedLayering, function(inner) {\n          return _.values(inner).reverse();\n        });\n      }\n\n      var neighborFn = (vert === \"u\" ? g.predecessors : g.successors).bind(g);\n      var align = verticalAlignment(g, adjustedLayering, conflicts, neighborFn);\n      var xs = horizontalCompaction(g, adjustedLayering,\n        align.root, align.align, horiz === \"r\");\n      if (horiz === \"r\") {\n        xs = _.mapValues(xs, function(x) { return -x; });\n      }\n      xss[vert + horiz] = xs;\n    });\n  });\n\n  var smallestWidth = findSmallestWidthAlignment(g, xss);\n  alignCoordinates(xss, smallestWidth);\n  return balance(xss, g.graph().align);\n}\n\nfunction sep(nodeSep, edgeSep, reverseSep) {\n  return function(g, v, w) {\n    var vLabel = g.node(v);\n    var wLabel = g.node(w);\n    var sum = 0;\n    var delta;\n\n    sum += vLabel.width / 2;\n    if (_.has(vLabel, \"labelpos\")) {\n      switch (vLabel.labelpos.toLowerCase()) {\n      case \"l\": delta = -vLabel.width / 2; break;\n      case \"r\": delta = vLabel.width / 2; break;\n      }\n    }\n    if (delta) {\n      sum += reverseSep ? delta : -delta;\n    }\n    delta = 0;\n\n    sum += (vLabel.dummy ? edgeSep : nodeSep) / 2;\n    sum += (wLabel.dummy ? edgeSep : nodeSep) / 2;\n\n    sum += wLabel.width / 2;\n    if (_.has(wLabel, \"labelpos\")) {\n      switch (wLabel.labelpos.toLowerCase()) {\n      case \"l\": delta = wLabel.width / 2; break;\n      case \"r\": delta = -wLabel.width / 2; break;\n      }\n    }\n    if (delta) {\n      sum += reverseSep ? delta : -delta;\n    }\n    delta = 0;\n\n    return sum;\n  };\n}\n\nfunction width(g, v) {\n  return g.node(v).width;\n}\n", "\"use strict\";\n\nvar _ = require(\"../lodash\");\nvar util = require(\"../util\");\nvar positionX = require(\"./bk\").positionX;\n\nmodule.exports = position;\n\nfunction position(g) {\n  g = util.asNonCompoundGraph(g);\n\n  positionY(g);\n  _.forEach(positionX(g), function(x, v) {\n    g.node(v).x = x;\n  });\n}\n\nfunction positionY(g) {\n  var layering = util.buildLayerMatrix(g);\n  var rankSep = g.graph().ranksep;\n  var prevY = 0;\n  _.forEach(layering, function(layer) {\n    var maxHeight = _.max(_.map(layer, function(v) { return g.node(v).height; }));\n    _.forEach(layer, function(v) {\n      g.node(v).y = prevY + maxHeight / 2;\n    });\n    prevY += maxHeight + rankSep;\n  });\n}\n\n", "\"use strict\";\n\nvar _ = require(\"./lodash\");\nvar acyclic = require(\"./acyclic\");\nvar normalize = require(\"./normalize\");\nvar rank = require(\"./rank\");\nvar normalizeRanks = require(\"./util\").normalizeRanks;\nvar parentDummyChains = require(\"./parent-dummy-chains\");\nvar removeEmptyRanks = require(\"./util\").removeEmptyRanks;\nvar nestingGraph = require(\"./nesting-graph\");\nvar addBorderSegments = require(\"./add-border-segments\");\nvar coordinateSystem = require(\"./coordinate-system\");\nvar order = require(\"./order\");\nvar position = require(\"./position\");\nvar util = require(\"./util\");\nvar Graph = require(\"./graphlib\").Graph;\n\nmodule.exports = layout;\n\nfunction layout(g, opts) {\n  var time = opts && opts.debugTiming ? util.time : util.notime;\n  time(\"layout\", function() {\n    var layoutGraph = \n      time(\"  buildLayoutGraph\", function() { return buildLayoutGraph(g); });\n    time(\"  runLayout\",        function() { runLayout(layoutGraph, time); });\n    time(\"  updateInputGraph\", function() { updateInputGraph(g, layoutGraph); });\n  });\n}\n\nfunction runLayout(g, time) {\n  time(\"    makeSpaceForEdgeLabels\", function() { makeSpaceForEdgeLabels(g); });\n  time(\"    removeSelfEdges\",        function() { removeSelfEdges(g); });\n  time(\"    acyclic\",                function() { acyclic.run(g); });\n  time(\"    nestingGraph.run\",       function() { nestingGraph.run(g); });\n  time(\"    rank\",                   function() { rank(util.asNonCompoundGraph(g)); });\n  time(\"    injectEdgeLabelProxies\", function() { injectEdgeLabelProxies(g); });\n  time(\"    removeEmptyRanks\",       function() { removeEmptyRanks(g); });\n  time(\"    nestingGraph.cleanup\",   function() { nestingGraph.cleanup(g); });\n  time(\"    normalizeRanks\",         function() { normalizeRanks(g); });\n  time(\"    assignRankMinMax\",       function() { assignRankMinMax(g); });\n  time(\"    removeEdgeLabelProxies\", function() { removeEdgeLabelProxies(g); });\n  time(\"    normalize.run\",          function() { normalize.run(g); });\n  time(\"    parentDummyChains\",      function() { parentDummyChains(g); });\n  time(\"    addBorderSegments\",      function() { addBorderSegments(g); });\n  time(\"    order\",                  function() { order(g); });\n  time(\"    insertSelfEdges\",        function() { insertSelfEdges(g); });\n  time(\"    adjustCoordinateSystem\", function() { coordinateSystem.adjust(g); });\n  time(\"    position\",               function() { position(g); });\n  time(\"    positionSelfEdges\",      function() { positionSelfEdges(g); });\n  time(\"    removeBorderNodes\",      function() { removeBorderNodes(g); });\n  time(\"    normalize.undo\",         function() { normalize.undo(g); });\n  time(\"    fixupEdgeLabelCoords\",   function() { fixupEdgeLabelCoords(g); });\n  time(\"    undoCoordinateSystem\",   function() { coordinateSystem.undo(g); });\n  time(\"    translateGraph\",         function() { translateGraph(g); });\n  time(\"    assignNodeIntersects\",   function() { assignNodeIntersects(g); });\n  time(\"    reversePoints\",          function() { reversePointsForReversedEdges(g); });\n  time(\"    acyclic.undo\",           function() { acyclic.undo(g); });\n}\n\n/*\n * Copies final layout information from the layout graph back to the input\n * graph. This process only copies whitelisted attributes from the layout graph\n * to the input graph, so it serves as a good place to determine what\n * attributes can influence layout.\n */\nfunction updateInputGraph(inputGraph, layoutGraph) {\n  _.forEach(inputGraph.nodes(), function(v) {\n    var inputLabel = inputGraph.node(v);\n    var layoutLabel = layoutGraph.node(v);\n\n    if (inputLabel) {\n      inputLabel.x = layoutLabel.x;\n      inputLabel.y = layoutLabel.y;\n\n      if (layoutGraph.children(v).length) {\n        inputLabel.width = layoutLabel.width;\n        inputLabel.height = layoutLabel.height;\n      }\n    }\n  });\n\n  _.forEach(inputGraph.edges(), function(e) {\n    var inputLabel = inputGraph.edge(e);\n    var layoutLabel = layoutGraph.edge(e);\n\n    inputLabel.points = layoutLabel.points;\n    if (_.has(layoutLabel, \"x\")) {\n      inputLabel.x = layoutLabel.x;\n      inputLabel.y = layoutLabel.y;\n    }\n  });\n\n  inputGraph.graph().width = layoutGraph.graph().width;\n  inputGraph.graph().height = layoutGraph.graph().height;\n}\n\nvar graphNumAttrs = [\"nodesep\", \"edgesep\", \"ranksep\", \"marginx\", \"marginy\"];\nvar graphDefaults = { ranksep: 50, edgesep: 20, nodesep: 50, rankdir: \"tb\" };\nvar graphAttrs = [\"acyclicer\", \"ranker\", \"rankdir\", \"align\"];\nvar nodeNumAttrs = [\"width\", \"height\"];\nvar nodeDefaults = { width: 0, height: 0 };\nvar edgeNumAttrs = [\"minlen\", \"weight\", \"width\", \"height\", \"labeloffset\"];\nvar edgeDefaults = {\n  minlen: 1, weight: 1, width: 0, height: 0,\n  labeloffset: 10, labelpos: \"r\"\n};\nvar edgeAttrs = [\"labelpos\"];\n\n/*\n * Constructs a new graph from the input graph, which can be used for layout.\n * This process copies only whitelisted attributes from the input graph to the\n * layout graph. Thus this function serves as a good place to determine what\n * attributes can influence layout.\n */\nfunction buildLayoutGraph(inputGraph) {\n  var g = new Graph({ multigraph: true, compound: true });\n  var graph = canonicalize(inputGraph.graph());\n\n  g.setGraph(_.merge({},\n    graphDefaults,\n    selectNumberAttrs(graph, graphNumAttrs),\n    _.pick(graph, graphAttrs)));\n\n  _.forEach(inputGraph.nodes(), function(v) {\n    var node = canonicalize(inputGraph.node(v));\n    g.setNode(v, _.defaults(selectNumberAttrs(node, nodeNumAttrs), nodeDefaults));\n    g.setParent(v, inputGraph.parent(v));\n  });\n\n  _.forEach(inputGraph.edges(), function(e) {\n    var edge = canonicalize(inputGraph.edge(e));\n    g.setEdge(e, _.merge({},\n      edgeDefaults,\n      selectNumberAttrs(edge, edgeNumAttrs),\n      _.pick(edge, edgeAttrs)));\n  });\n\n  return g;\n}\n\n/*\n * This idea comes from the Gansner paper: to account for edge labels in our\n * layout we split each rank in half by doubling minlen and halving ranksep.\n * Then we can place labels at these mid-points between nodes.\n *\n * We also add some minimal padding to the width to push the label for the edge\n * away from the edge itself a bit.\n */\nfunction makeSpaceForEdgeLabels(g) {\n  var graph = g.graph();\n  graph.ranksep /= 2;\n  _.forEach(g.edges(), function(e) {\n    var edge = g.edge(e);\n    edge.minlen *= 2;\n    if (edge.labelpos.toLowerCase() !== \"c\") {\n      if (graph.rankdir === \"TB\" || graph.rankdir === \"BT\") {\n        edge.width += edge.labeloffset;\n      } else {\n        edge.height += edge.labeloffset;\n      }\n    }\n  });\n}\n\n/*\n * Creates temporary dummy nodes that capture the rank in which each edge's\n * label is going to, if it has one of non-zero width and height. We do this\n * so that we can safely remove empty ranks while preserving balance for the\n * label's position.\n */\nfunction injectEdgeLabelProxies(g) {\n  _.forEach(g.edges(), function(e) {\n    var edge = g.edge(e);\n    if (edge.width && edge.height) {\n      var v = g.node(e.v);\n      var w = g.node(e.w);\n      var label = { rank: (w.rank - v.rank) / 2 + v.rank, e: e };\n      util.addDummyNode(g, \"edge-proxy\", label, \"_ep\");\n    }\n  });\n}\n\nfunction assignRankMinMax(g) {\n  var maxRank = 0;\n  _.forEach(g.nodes(), function(v) {\n    var node = g.node(v);\n    if (node.borderTop) {\n      node.minRank = g.node(node.borderTop).rank;\n      node.maxRank = g.node(node.borderBottom).rank;\n      maxRank = _.max(maxRank, node.maxRank);\n    }\n  });\n  g.graph().maxRank = maxRank;\n}\n\nfunction removeEdgeLabelProxies(g) {\n  _.forEach(g.nodes(), function(v) {\n    var node = g.node(v);\n    if (node.dummy === \"edge-proxy\") {\n      g.edge(node.e).labelRank = node.rank;\n      g.removeNode(v);\n    }\n  });\n}\n\nfunction translateGraph(g) {\n  var minX = Number.POSITIVE_INFINITY;\n  var maxX = 0;\n  var minY = Number.POSITIVE_INFINITY;\n  var maxY = 0;\n  var graphLabel = g.graph();\n  var marginX = graphLabel.marginx || 0;\n  var marginY = graphLabel.marginy || 0;\n\n  function getExtremes(attrs) {\n    var x = attrs.x;\n    var y = attrs.y;\n    var w = attrs.width;\n    var h = attrs.height;\n    minX = Math.min(minX, x - w / 2);\n    maxX = Math.max(maxX, x + w / 2);\n    minY = Math.min(minY, y - h / 2);\n    maxY = Math.max(maxY, y + h / 2);\n  }\n\n  _.forEach(g.nodes(), function(v) { getExtremes(g.node(v)); });\n  _.forEach(g.edges(), function(e) {\n    var edge = g.edge(e);\n    if (_.has(edge, \"x\")) {\n      getExtremes(edge);\n    }\n  });\n\n  minX -= marginX;\n  minY -= marginY;\n\n  _.forEach(g.nodes(), function(v) {\n    var node = g.node(v);\n    node.x -= minX;\n    node.y -= minY;\n  });\n\n  _.forEach(g.edges(), function(e) {\n    var edge = g.edge(e);\n    _.forEach(edge.points, function(p) {\n      p.x -= minX;\n      p.y -= minY;\n    });\n    if (_.has(edge, \"x\")) { edge.x -= minX; }\n    if (_.has(edge, \"y\")) { edge.y -= minY; }\n  });\n\n  graphLabel.width = maxX - minX + marginX;\n  graphLabel.height = maxY - minY + marginY;\n}\n\nfunction assignNodeIntersects(g) {\n  _.forEach(g.edges(), function(e) {\n    var edge = g.edge(e);\n    var nodeV = g.node(e.v);\n    var nodeW = g.node(e.w);\n    var p1, p2;\n    if (!edge.points) {\n      edge.points = [];\n      p1 = nodeW;\n      p2 = nodeV;\n    } else {\n      p1 = edge.points[0];\n      p2 = edge.points[edge.points.length - 1];\n    }\n    edge.points.unshift(util.intersectRect(nodeV, p1));\n    edge.points.push(util.intersectRect(nodeW, p2));\n  });\n}\n\nfunction fixupEdgeLabelCoords(g) {\n  _.forEach(g.edges(), function(e) {\n    var edge = g.edge(e);\n    if (_.has(edge, \"x\")) {\n      if (edge.labelpos === \"l\" || edge.labelpos === \"r\") {\n        edge.width -= edge.labeloffset;\n      }\n      switch (edge.labelpos) {\n      case \"l\": edge.x -= edge.width / 2 + edge.labeloffset; break;\n      case \"r\": edge.x += edge.width / 2 + edge.labeloffset; break;\n      }\n    }\n  });\n}\n\nfunction reversePointsForReversedEdges(g) {\n  _.forEach(g.edges(), function(e) {\n    var edge = g.edge(e);\n    if (edge.reversed) {\n      edge.points.reverse();\n    }\n  });\n}\n\nfunction removeBorderNodes(g) {\n  _.forEach(g.nodes(), function(v) {\n    if (g.children(v).length) {\n      var node = g.node(v);\n      var t = g.node(node.borderTop);\n      var b = g.node(node.borderBottom);\n      var l = g.node(_.last(node.borderLeft));\n      var r = g.node(_.last(node.borderRight));\n\n      node.width = Math.abs(r.x - l.x);\n      node.height = Math.abs(b.y - t.y);\n      node.x = l.x + node.width / 2;\n      node.y = t.y + node.height / 2;\n    }\n  });\n\n  _.forEach(g.nodes(), function(v) {\n    if (g.node(v).dummy === \"border\") {\n      g.removeNode(v);\n    }\n  });\n}\n\nfunction removeSelfEdges(g) {\n  _.forEach(g.edges(), function(e) {\n    if (e.v === e.w) {\n      var node = g.node(e.v);\n      if (!node.selfEdges) {\n        node.selfEdges = [];\n      }\n      node.selfEdges.push({ e: e, label: g.edge(e) });\n      g.removeEdge(e);\n    }\n  });\n}\n\nfunction insertSelfEdges(g) {\n  var layers = util.buildLayerMatrix(g);\n  _.forEach(layers, function(layer) {\n    var orderShift = 0;\n    _.forEach(layer, function(v, i) {\n      var node = g.node(v);\n      node.order = i + orderShift;\n      _.forEach(node.selfEdges, function(selfEdge) {\n        util.addDummyNode(g, \"selfedge\", {\n          width: selfEdge.label.width,\n          height: selfEdge.label.height,\n          rank: node.rank,\n          order: i + (++orderShift),\n          e: selfEdge.e,\n          label: selfEdge.label\n        }, \"_se\");\n      });\n      delete node.selfEdges;\n    });\n  });\n}\n\nfunction positionSelfEdges(g) {\n  _.forEach(g.nodes(), function(v) {\n    var node = g.node(v);\n    if (node.dummy === \"selfedge\") {\n      var selfNode = g.node(node.e.v);\n      var x = selfNode.x + selfNode.width / 2;\n      var y = selfNode.y;\n      var dx = node.x - x;\n      var dy = selfNode.height / 2;\n      g.setEdge(node.e, node.label);\n      g.removeNode(v);\n      node.label.points = [\n        { x: x + 2 * dx / 3, y: y - dy },\n        { x: x + 5 * dx / 6, y: y - dy },\n        { x: x +     dx    , y: y },\n        { x: x + 5 * dx / 6, y: y + dy },\n        { x: x + 2 * dx / 3, y: y + dy }\n      ];\n      node.label.x = node.x;\n      node.label.y = node.y;\n    }\n  });\n}\n\nfunction selectNumberAttrs(obj, attrs) {\n  return _.mapValues(_.pick(obj, attrs), Number);\n}\n\nfunction canonicalize(attrs) {\n  var newAttrs = {};\n  _.forEach(attrs, function(v, k) {\n    newAttrs[k.toLowerCase()] = v;\n  });\n  return newAttrs;\n}\n", "var _ = require(\"./lodash\");\nvar util = require(\"./util\");\nvar Graph = require(\"./graphlib\").Graph;\n\nmodule.exports = {\n  debugOrdering: debugOrdering\n};\n\n/* istanbul ignore next */\nfunction debugOrdering(g) {\n  var layerMatrix = util.buildLayerMatrix(g);\n\n  var h = new Graph({ compound: true, multigraph: true }).setGraph({});\n\n  _.forEach(g.nodes(), function(v) {\n    h.setNode(v, { label: v });\n    h.setParent(v, \"layer\" + g.node(v).rank);\n  });\n\n  _.forEach(g.edges(), function(e) {\n    h.setEdge(e.v, e.w, {}, e.name);\n  });\n\n  _.forEach(layerMatrix, function(layer, i) {\n    var layerV = \"layer\" + i;\n    h.setNode(layerV, { rank: \"same\" });\n    _.reduce(layer, function(u, v) {\n      h.setEdge(u, v, { style: \"invis\" });\n      return v;\n    });\n  });\n\n  return h;\n}\n", "module.exports = \"0.8.5\";\n", "/*\nCopyright (c) 2012-2014 Chris Pettitt\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE.\n*/\n\nmodule.exports = {\n  graphlib: require(\"./lib/graphlib\"),\n\n  layout: require(\"./lib/layout\"),\n  debug: require(\"./lib/debug\"),\n  util: {\n    time: require(\"./lib/util\").time,\n    notime: require(\"./lib/util\").notime\n  },\n  version: require(\"./lib/version\")\n};\n", "import './preset';\n\nexport * from './exports';\n\nexport { version } from './version';\nexport const iconfont = {\n  css: '//at.alicdn.com/t/a/font_470089_8hnbbf8n4u8.css',\n  js: '//at.alicdn.com/t/a/font_470089_8hnbbf8n4u8.js',\n};\n", "import type { AnimationEffectTiming } from '../animations/types';\n\nexport const DEFAULT_ANIMATION_OPTIONS: AnimationEffectTiming = {\n  duration: 500,\n};\n\nexport const DEFAULT_ELEMENTS_ANIMATION_OPTIONS: AnimationEffectTiming = {\n  duration: 1000,\n  easing: 'cubic-bezier(0.250, 0.460, 0.450, 0.940)',\n  iterations: 1,\n  fill: 'both',\n};\n", "export const ChangeEvent = {\n  /**\n   * <zh/> \n   *\n   * <en/> Data changes\n   */\n  CHANGE: 'change',\n};\n\nexport const enum ChangeType {\n  /**\n   * <zh/> \n   *\n   * <en/> Node added\n   */\n  'NodeAdded' = 'NodeAdded',\n  /**\n   * <zh/> \n   *\n   * <en/> Node updated\n   */\n  'NodeUpdated' = 'NodeUpdated',\n  /**\n   * <zh/> \n   *\n   * <en/> Node removed\n   */\n  'NodeRemoved' = 'NodeRemoved',\n  /**\n   * <zh/> \n   *\n   * <en/> Edge added\n   */\n  'EdgeAdded' = 'EdgeAdded',\n  /**\n   * <zh/> \n   *\n   * <en/> Edge updated\n   */\n  'EdgeUpdated' = 'EdgeUpdated',\n  /**\n   * <zh/> \n   *\n   * <en/> Edge removed\n   */\n  'EdgeRemoved' = 'EdgeRemoved',\n  /**\n   * <zh/> Combo\n   *\n   * <en/> Combo added\n   */\n  'ComboAdded' = 'ComboAdded',\n  /**\n   * <zh/> Combo\n   *\n   * <en/> Combo updated\n   */\n  'ComboUpdated' = 'ComboUpdated',\n  /**\n   * <zh/> Combo\n   *\n   * <en/> Combo removed\n   */\n  'ComboRemoved' = 'ComboRemoved',\n}\n", "export enum AnimationType {\n  DRAW = 'draw',\n  COLLAPSE = 'collapse',\n  EXPAND = 'expand',\n  TRANSFORM = 'transform',\n}\n", "/**\n * <zh/> \n *\n * <en/> Canvas event\n */\nexport enum CanvasEvent {\n  /**\n   * <zh/> \n   *\n   * <en/> Triggered when click\n   */\n  CLICK = 'canvas:click',\n  /**\n   * <zh/> \n   *\n   * <en/> Triggered when double click\n   */\n  DBLCLICK = 'canvas:dblclick',\n  /**\n   * <zh/> \n   *\n   * <en/> Triggered when the pointer enters\n   */\n  POINTER_OVER = 'canvas:pointerover',\n  /**\n   * <zh/> \n   *\n   * <en/> Triggered when the pointer leaves\n   */\n  POINTER_LEAVE = 'canvas:pointerleave',\n  /**\n   * <zh/> \n   *\n   * <en/> Triggered when the pointer enters or enters a child element (does not bubble)\n   */\n  POINTER_ENTER = 'canvas:pointerenter',\n  /**\n   * <zh/> \n   *\n   * <en/> Triggered when the pointer moves\n   */\n  POINTER_MOVE = 'canvas:pointermove',\n  /**\n   * <zh/> \n   *\n   * <en/> Triggered when the pointer leaves\n   */\n  POINTER_OUT = 'canvas:pointerout',\n  /**\n   * <zh/> \n   *\n   * <en/> Triggered when the pointer is pressed\n   */\n  POINTER_DOWN = 'canvas:pointerdown',\n  /**\n   * <zh/> \n   *\n   * <en/> Triggered when the pointer is lifted\n   */\n  POINTER_UP = 'canvas:pointerup',\n  /**\n   * <zh/> \n   *\n   * <en/> Triggered when the context menu is opened\n   */\n  CONTEXT_MENU = 'canvas:contextmenu',\n  /**\n   * <zh/> \n   *\n   * <en/> Triggered when dragging starts\n   */\n  DRAG_START = 'canvas:dragstart',\n  /**\n   * <zh/> \n   *\n   * <en/> Triggered when dragging\n   */\n  DRAG = 'canvas:drag',\n  /**\n   * <zh/> \n   *\n   * <en/> Triggered when dragging ends\n   */\n  DRAG_END = 'canvas:dragend',\n  /**\n   * <zh/> \n   *\n   * <en/> Triggered when dragging enters\n   */\n  DRAG_ENTER = 'canvas:dragenter',\n  /**\n   * <zh/> \n   *\n   * <en/> Triggered when dragging passes\n   */\n  DRAG_OVER = 'canvas:dragover',\n  /**\n   * <zh/> \n   *\n   * <en/> Triggered when dragging leaves\n   */\n  DRAG_LEAVE = 'canvas:dragleave',\n  /**\n   * <zh/> \n   *\n   * <en/> Triggered when dragging is dropped\n   */\n  DROP = 'canvas:drop',\n  /**\n   * <zh/> \n   *\n   * <en/> Triggered when scrolling\n   */\n  WHEEL = 'canvas:wheel',\n}\n", "/**\n * <zh/> \n *\n * <en/> Combo event\n */\nexport enum ComboEvent {\n  /**\n   * <zh/> \n   *\n   * <en/> Triggered when click\n   */\n  CLICK = 'combo:click',\n  /**\n   * <zh/> \n   *\n   * <en/> Triggered when double click\n   */\n  DBLCLICK = 'combo:dblclick',\n  /**\n   * <zh/> \n   *\n   * <en/> Triggered when the pointer enters\n   */\n  POINTER_OVER = 'combo:pointerover',\n  /**\n   * <zh/> \n   *\n   * <en/> Triggered when the pointer leaves\n   */\n  POINTER_LEAVE = 'combo:pointerleave',\n  /**\n   * <zh/> \n   *\n   * <en/> Triggered when the pointer enters or enters a child element (does not bubble)\n   */\n  POINTER_ENTER = 'combo:pointerenter',\n  /**\n   * <zh/> \n   *\n   * <en/> Triggered when the pointer moves\n   */\n  POINTER_MOVE = 'combo:pointermove',\n  /**\n   * <zh/> \n   *\n   * <en/> Triggered when the pointer leaves\n   */\n  POINTER_OUT = 'combo:pointerout',\n  /**\n   * <zh/> \n   *\n   * <en/> Triggered when the pointer is pressed\n   */\n  POINTER_DOWN = 'combo:pointerdown',\n  /**\n   * <zh/> \n   *\n   * <en/> Triggered when the pointer is lifted\n   */\n  POINTER_UP = 'combo:pointerup',\n  /**\n   * <zh/> \n   *\n   * <en/> Triggered when the context menu is opened\n   */\n  CONTEXT_MENU = 'combo:contextmenu',\n  /**\n   * <zh/> \n   *\n   * <en/> Triggered when dragging starts\n   */\n  DRAG_START = 'combo:dragstart',\n  /**\n   * <zh/> \n   *\n   * <en/> Triggered when dragging\n   */\n  DRAG = 'combo:drag',\n  /**\n   * <zh/> \n   *\n   * <en/> Triggered when dragging ends\n   */\n  DRAG_END = 'combo:dragend',\n  /**\n   * <zh/> \n   *\n   * <en/> Triggered when dragging enters\n   */\n  DRAG_ENTER = 'combo:dragenter',\n  /**\n   * <zh/> \n   *\n   * <en/> Triggered when dragging passes\n   */\n  DRAG_OVER = 'combo:dragover',\n  /**\n   * <zh/> \n   *\n   * <en/> Triggered when dragging leaves\n   */\n  DRAG_LEAVE = 'combo:dragleave',\n  /**\n   * <zh/> \n   *\n   * <en/> Triggered when dragging is dropped\n   */\n  DROP = 'combo:drop',\n}\n", "export enum CommonEvent {\n  /**\n   * <zh/> \n   *\n   * <en/> Triggered when click\n   */\n  CLICK = 'click',\n  /**\n   * <zh/> \n   *\n   * <en/> Triggered when double click\n   */\n  DBLCLICK = 'dblclick',\n  /**\n   * <zh/> \n   *\n   * <en/> Triggered when the pointer enters\n   */\n  POINTER_OVER = 'pointerover',\n  /**\n   * <zh/> \n   *\n   * <en/> Triggered when the pointer leaves\n   */\n  POINTER_LEAVE = 'pointerleave',\n  /**\n   * <zh/> \n   *\n   * <en/> Triggered when the pointer enters or enters a child element (does not bubble)\n   */\n  POINTER_ENTER = 'pointerenter',\n  /**\n   * <zh/> \n   *\n   * <en/> Triggered when the pointer moves\n   */\n  POINTER_MOVE = 'pointermove',\n  /**\n   * <zh/> \n   *\n   * <en/> Triggered when the pointer leaves\n   */\n  POINTER_OUT = 'pointerout',\n  /**\n   * <zh/> \n   *\n   * <en/> Triggered when the pointer is pressed\n   */\n  POINTER_DOWN = 'pointerdown',\n  /**\n   * <zh/> \n   *\n   * <en/> Triggered when the pointer is lifted\n   */\n  POINTER_UP = 'pointerup',\n  /**\n   * <zh/> \n   *\n   * <en/> Triggered when the context menu is opened\n   */\n  CONTEXT_MENU = 'contextmenu',\n  /**\n   * <zh/> \n   *\n   * <en/> Triggered when dragging starts\n   */\n  DRAG_START = 'dragstart',\n  /**\n   * <zh/> \n   *\n   * <en/> Triggered when dragging\n   */\n  DRAG = 'drag',\n  /**\n   * <zh/> \n   *\n   * <en/> Triggered when dragging ends\n   */\n  DRAG_END = 'dragend',\n  /**\n   * <zh/> \n   *\n   * <en/> Triggered when dragging enters\n   */\n  DRAG_ENTER = 'dragenter',\n  /**\n   * <zh/> \n   *\n   * <en/> Triggered when dragging passes\n   */\n  DRAG_OVER = 'dragover',\n  /**\n   * <zh/> \n   *\n   * <en/> Triggered when dragging leaves\n   */\n  DRAG_LEAVE = 'dragleave',\n  /**\n   * <zh/> \n   *\n   * <en/> Triggered when dragging is dropped\n   */\n  DROP = 'drop',\n  /**\n   * <zh/> \n   *\n   * <en/> Triggered when the keyboard is pressed\n   */\n  KEY_DOWN = 'keydown',\n  /**\n   * <zh/> \n   *\n   * <en/> Triggered when the keyboard is lifted\n   */\n  KEY_UP = 'keyup',\n  /**\n   * <zh/> \n   *\n   * <en/> Triggered when scrolling\n   */\n  WHEEL = 'wheel',\n  /**\n   * <zh/> \n   *\n   * <en/> Triggered when pinch in and pinch out\n   */\n  PINCH = 'pinch',\n}\n", "export enum ContainerEvent {\n  /**\n   * <zh/> \n   *\n   * <en/> Triggered when the keyboard is pressed\n   */\n  KEY_DOWN = 'keydown',\n  /**\n   * <zh/> \n   *\n   * <en/> Triggered when the keyboard is lifted\n   */\n  KEY_UP = 'keyup',\n}\n", "/**\n * <zh/> \n *\n * <en/> Edge event\n */\nexport enum EdgeEvent {\n  /**\n   * <zh/> \n   *\n   * <en/> Triggered when click\n   */\n  CLICK = 'edge:click',\n  /**\n   * <zh/> \n   *\n   * <en/> Triggered when double click\n   */\n  DBLCLICK = 'edge:dblclick',\n  /**\n   * <zh/> \n   *\n   * <en/> Triggered when the pointer enters\n   */\n  POINTER_OVER = 'edge:pointerover',\n  /**\n   * <zh/> \n   *\n   * <en/> Triggered when the pointer leaves\n   */\n  POINTER_LEAVE = 'edge:pointerleave',\n  /**\n   * <zh/> \n   *\n   * <en/> Triggered when the pointer enters or enters a child element (does not bubble)\n   */\n  POINTER_ENTER = 'edge:pointerenter',\n  /**\n   * <zh/> \n   *\n   * <en/> Triggered when the pointer moves\n   */\n  POINTER_MOVE = 'edge:pointermove',\n  /**\n   * <zh/> \n   *\n   * <en/> Triggered when the pointer leaves\n   */\n  POINTER_OUT = 'edge:pointerout',\n  /**\n   * <zh/> \n   *\n   * <en/> Triggered when the pointer is pressed\n   */\n  POINTER_DOWN = 'edge:pointerdown',\n  /**\n   * <zh/> \n   *\n   * <en/> Triggered when the pointer is lifted\n   */\n  POINTER_UP = 'edge:pointerup',\n  /**\n   * <zh/> \n   *\n   * <en/> Triggered when the context menu is opened\n   */\n  CONTEXT_MENU = 'edge:contextmenu',\n  /**\n   * <zh/> \n   *\n   * <en/> Triggered when dragging enters\n   */\n  DRAG_ENTER = 'edge:dragenter',\n  /**\n   * <zh/> \n   *\n   * <en/> Triggered when dragging passes\n   */\n  DRAG_OVER = 'edge:dragover',\n  /**\n   * <zh/> \n   *\n   * <en/> Triggered when dragging leaves\n   */\n  DRAG_LEAVE = 'edge:dragleave',\n  /**\n   * <zh/> \n   *\n   * <en/> Triggered when dragging is dropped\n   */\n  DROP = 'edge:drop',\n}\n", "export enum GraphEvent {\n  /**\n   * <zh/> \n   *\n   * <en/> Before the canvas is initialized\n   */\n  BEFORE_CANVAS_INIT = 'beforecanvasinit',\n  /**\n   * <zh/> \n   *\n   * <en/> After the canvas is initialized\n   */\n  AFTER_CANVAS_INIT = 'aftercanvasinit',\n  /**\n   * <zh/> \n   *\n   * <en/> Before the viewport size changes\n   */\n  BEFORE_SIZE_CHANGE = 'beforesizechange',\n  /**\n   * <zh/> \n   *\n   * <en/> After the viewport size changes\n   */\n  AFTER_SIZE_CHANGE = 'aftersizechange',\n  /**\n   * <zh/> \n   *\n   * <en/> Before creating element\n   */\n  BEFORE_ELEMENT_CREATE = 'beforeelementcreate',\n  /**\n   * <zh/> \n   *\n   * <en/> After creating element\n   */\n  AFTER_ELEMENT_CREATE = 'afterelementcreate',\n  /**\n   * <zh/> \n   *\n   * <en/> Before updating element\n   */\n  BEFORE_ELEMENT_UPDATE = 'beforeelementupdate',\n  /**\n   * <zh/> \n   *\n   * <en/> After updating element\n   */\n  AFTER_ELEMENT_UPDATE = 'afterelementupdate',\n  /**\n   * <zh/> \n   *\n   * <en/> Before destroying element\n   */\n  BEFORE_ELEMENT_DESTROY = 'beforeelementdestroy',\n  /**\n   * <zh/> \n   *\n   * <en/> After destroying element\n   */\n  AFTER_ELEMENT_DESTROY = 'afterelementdestroy',\n  /**\n   * <zh/> \n   *\n   * <en/> Before element translation\n   */\n  BEFORE_ELEMENT_TRANSLATE = 'beforeelementtranslate',\n  /**\n   * <zh/> \n   *\n   * <en/> After element translation\n   */\n  AFTER_ELEMENT_TRANSLATE = 'afterelementtranslate',\n  /**\n   * <zh/> \n   *\n   * <en/> Before drawing\n   */\n  BEFORE_DRAW = 'beforedraw',\n  /**\n   * <zh/> \n   *\n   * <en/> After drawing\n   */\n  AFTER_DRAW = 'afterdraw',\n  /**\n   * <zh/> \n   *\n   * <en/> Before rendering\n   */\n  BEFORE_RENDER = 'beforerender',\n  /**\n   * <zh/> \n   *\n   * <en/> After rendering\n   */\n  AFTER_RENDER = 'afterrender',\n  /**\n   * <zh/> \n   *\n   * <en/> Before animation\n   */\n  BEFORE_ANIMATE = 'beforeanimate',\n  /**\n   * <zh/> \n   *\n   * <en/> After animation\n   */\n  AFTER_ANIMATE = 'afteranimate',\n  /**\n   * <zh/> \n   *\n   * <en/> Before layout\n   */\n  BEFORE_LAYOUT = 'beforelayout',\n  /**\n   * <zh/> \n   *\n   * <en/> After layout\n   */\n  AFTER_LAYOUT = 'afterlayout',\n  /**\n   * <zh/> \n   *\n   * <en/> Before the layout process, used to get the current layout being executed in the pipeline layout process\n   */\n  BEFORE_STAGE_LAYOUT = 'beforestagelayout',\n  /**\n   * <zh/> \n   *\n   * <en/> After the layout process, used to get the current layout being executed in the pipeline layout process\n   */\n  AFTER_STAGE_LAYOUT = 'afterstagelayout',\n  /**\n   * <zh/> \n   *\n   * <en/> Before the visible area changes\n   */\n  BEFORE_TRANSFORM = 'beforetransform',\n  /**\n   * <zh/> \n   *\n   * <en/> After the visible area changes\n   */\n  AFTER_TRANSFORM = 'aftertransform',\n  /**\n   * <zh/> \n   *\n   * <en/> Batch processing starts\n   */\n  BATCH_START = 'batchstart',\n  /**\n   * <zh/> \n   *\n   * <en/> Batch processing ends\n   */\n  BATCH_END = 'batchend',\n  /**\n   * <zh/> \n   *\n   * <en/> Before destruction\n   */\n  BEFORE_DESTROY = 'beforedestroy',\n  /**\n   * <zh/> \n   *\n   * <en/> After destruction\n   */\n  AFTER_DESTROY = 'afterdestroy',\n  /**\n   * <zh/> \n   *\n   * <en/> Before the renderer changes\n   */\n  BEFORE_RENDERER_CHANGE = 'beforerendererchange',\n  /**\n   * <zh/> \n   *\n   * <en/> After the renderer changes\n   */\n  AFTER_RENDERER_CHANGE = 'afterrendererchange',\n}\n", "export enum HistoryEvent {\n  /**\n   * <zh/> \n   *\n   * <en/> When the command is undone\n   */\n  UNDO = 'undo',\n  /**\n   * <zh/> \n   *\n   * <en/> When the command is redone\n   */\n  REDO = 'redo',\n  /**\n   * <zh/> \n   *\n   * <en/> When the command is canceled\n   */\n  CANCEL = 'cancel',\n  /**\n   *  <zh/> \n   *\n   *  <en/> When the command is added\n   */\n  ADD = 'add',\n  /**\n   * <zh/> \n   *\n   *  <en/> When the command queue is cleared\n   */\n  CLEAR = 'clear',\n  /**\n   * <zh/> \n   *\n   * <en/> When the command queue changes\n   */\n  CHANGE = 'change',\n}\n", "/**\n * <zh/> \n *\n * <en/> Node event\n */\nexport enum NodeEvent {\n  /**\n   * <zh/> \n   *\n   * <en/> Triggered when click\n   */\n  CLICK = 'node:click',\n  /**\n   * <zh/> \n   *\n   * <en/> Triggered when double click\n   */\n  DBLCLICK = 'node:dblclick',\n  /**\n   * <zh/> \n   *\n   * <en/> Triggered when the pointer enters\n   */\n  POINTER_OVER = 'node:pointerover',\n  /**\n   * <zh/> \n   *\n   * <en/> Triggered when the pointer leaves\n   */\n  POINTER_LEAVE = 'node:pointerleave',\n  /**\n   * <zh/> \n   *\n   * <en/> Triggered when the pointer enters or enters a child element (does not bubble)\n   */\n  POINTER_ENTER = 'node:pointerenter',\n  /**\n   * <zh/> \n   *\n   * <en/> Triggered when the pointer moves\n   */\n  POINTER_MOVE = 'node:pointermove',\n  /**\n   * <zh/> \n   *\n   * <en/> Triggered when the pointer leaves\n   */\n  POINTER_OUT = 'node:pointerout',\n  /**\n   * <zh/> \n   *\n   * <en/> Triggered when the pointer is pressed\n   */\n  POINTER_DOWN = 'node:pointerdown',\n  /**\n   * <zh/> \n   *\n   * <en/> Triggered when the pointer is lifted\n   */\n  POINTER_UP = 'node:pointerup',\n  /**\n   * <zh/> \n   *\n   * <en/> Triggered when the context menu is opened\n   */\n  CONTEXT_MENU = 'node:contextmenu',\n  /**\n   * <zh/> \n   *\n   * <en/> Triggered when dragging starts\n   */\n  DRAG_START = 'node:dragstart',\n  /**\n   * <zh/> \n   *\n   * <en/> Triggered when dragging\n   */\n  DRAG = 'node:drag',\n  /**\n   * <zh/> \n   *\n   * <en/> Triggered when dragging ends\n   */\n  DRAG_END = 'node:dragend',\n  /**\n   * <zh/> \n   *\n   * <en/> Triggered when dragging enters\n   */\n  DRAG_ENTER = 'node:dragenter',\n  /**\n   * <zh/> \n   *\n   * <en/> Triggered when dragging passes\n   */\n  DRAG_OVER = 'node:dragover',\n  /**\n   * <zh/> \n   *\n   * <en/> Triggered when dragging leaves\n   */\n  DRAG_LEAVE = 'node:dragleave',\n  /**\n   * <zh/> \n   *\n   * <en/> Triggered when dragging is dropped\n   */\n  DROP = 'node:drop',\n}\n", "export const COMBO_KEY = 'combo';\n\nexport const TREE_KEY = 'tree';\n", "export enum ExtensionCategory {\n  /**\n   * <zh/> \n   *\n   * <en/> Node element\n   */\n  NODE = 'node',\n  /**\n   * <zh/> \n   *\n   * <en/> Edge element\n   */\n  EDGE = 'edge',\n  /**\n   * <zh/> \n   *\n   * <en/> Combination element\n   */\n  COMBO = 'combo',\n  /**\n   * <zh/> \n   *\n   * <en/> Theme\n   */\n  THEME = 'theme',\n  /**\n   * <zh/> \n   *\n   * <en/> Palette\n   */\n  PALETTE = 'palette',\n  /**\n   * <zh/> \n   *\n   * <en/> Layout\n   */\n  LAYOUT = 'layout',\n  /**\n   * <zh/> \n   *\n   * <en/> Behavior\n   */\n  BEHAVIOR = 'behavior',\n  /**\n   * <zh/> \n   *\n   * <en/> Plugin\n   */\n  PLUGIN = 'plugin',\n  /**\n   * <zh/> \n   *\n   * <en/> Animation\n   */\n  ANIMATION = 'animation',\n  /**\n   * <zh/> \n   *\n   * <en/> Data transform\n   */\n  TRANSFORM = 'transform',\n  /**\n   * <zh/> \n   *\n   * <en/> Shape\n   */\n  SHAPE = 'shape',\n}\n", "import type { ExtensionRegistry } from './types';\n\n/**\n * <zh/> \n *\n * <en/> Extension registry\n */\nexport const EXTENSION_REGISTRY: ExtensionRegistry = {\n  animation: {},\n  behavior: {},\n  combo: {},\n  edge: {},\n  layout: {},\n  node: {},\n  palette: {},\n  theme: {},\n  plugin: {},\n  transform: {},\n  shape: {},\n};\n", "import { ExtensionCategory } from '../constants';\nimport type { Loosen } from '../types';\nimport { EXTENSION_REGISTRY } from './store';\nimport type { ExtensionRegistry } from './types';\n\n/**\n * <zh/> \n *\n * <en/> Get the extension by category and type\n * @param category - <zh/>  | <en/> Extension category\n * @param type - <zh/>  | <en/> Extension type\n * @returns <zh/>  | <en/> Registered extension\n * @internal\n */\nexport function getExtension<T extends ExtensionCategory>(\n  category: Loosen<T>,\n  type: string,\n): ExtensionRegistry[T][string] | undefined {\n  const extension = EXTENSION_REGISTRY[category]?.[type];\n\n  if (extension) {\n    return extension as ExtensionRegistry[T][string];\n  }\n  return undefined;\n}\n\n/**\n * <zh/> \n *\n * <en/> Get the extension by category and type\n * @param category - <zh/>  | <en/> Extension category\n * @returns <zh/>  | <en/> Registered extension\n * @internal\n */\nexport function getExtensions<T extends Loosen<ExtensionCategory>>(category: T): ExtensionRegistry[T] {\n  return EXTENSION_REGISTRY[category];\n}\n", "export const version = '5.0.51';\n", "/* global console */\n/* eslint no-console: \"off\" */\nimport { version } from '../version';\n\nconst BRAND = 'G6';\n\n/**\n * <zh/> \n *\n * <en/> Format print\n * @param message - <zh/>  | <en/> Message\n * @returns <zh/>  | <en/> Formatted message\n */\nexport function format(message: string) {\n  return `[${BRAND} v${version}] ${message}`;\n}\n\nexport const print = {\n  mute: false,\n  debug: (message: string): void => {\n    !print.mute && console.debug(format(message));\n  },\n  info: (message: string): void => {\n    !print.mute && console.info(format(message));\n  },\n  warn: (message: string): void => {\n    !print.mute && console.warn(format(message));\n  },\n  error: (message: string): void => {\n    !print.mute && console.error(format(message));\n  },\n};\n", "import { ExtensionCategory } from '../constants';\nimport { getExtension } from '../registry/get';\nimport type { GraphOptions } from '../spec';\nimport { print } from './print';\n\n/**\n * <zh/> \n *\n * <en/> Get theme options\n * @param options - <zh/>  <en/> graph options\n * @returns <zh/>  <en/> theme options\n */\nexport function themeOf(options: GraphOptions) {\n  const { theme } = options;\n  if (!theme) return {};\n\n  const themeOptions = getExtension(ExtensionCategory.THEME, theme);\n\n  if (themeOptions) return themeOptions;\n\n  print.warn(`The theme of ${theme} is not registered.`);\n  return {};\n}\n", "import type { IAnimation } from '@antv/g';\nimport { isEqual, isNil, isObject } from '@antv/util';\nimport type { AnimationEffectTiming, AnimationOptions, STDAnimation } from '../animations/types';\nimport { DEFAULT_ANIMATION_OPTIONS, DEFAULT_ELEMENTS_ANIMATION_OPTIONS, ExtensionCategory } from '../constants';\nimport { getExtension } from '../registry/get';\nimport type { GraphOptions } from '../spec';\nimport type { AnimationStage } from '../spec/element/animation';\nimport type { ElementType, Keyframe } from '../types';\nimport { print } from './print';\nimport { themeOf } from './theme';\n\nexport function createAnimationsProxy(animations: IAnimation[]): IAnimation | null;\nexport function createAnimationsProxy(sourceAnimation: IAnimation, targetAnimations: IAnimation[]): IAnimation;\n/**\n * <zh/> \n *\n * <en/> create animation proxy, synchronize animation to multiple animation instances\n * @param args1 - <zh/>  | <en/> source animation instance\n * @param args2 - <zh/>  | <en/> target animation instance\n * @returns <zh/>  | <en/> animation proxy\n */\nexport function createAnimationsProxy(args1: IAnimation | IAnimation[], args2?: IAnimation[]): IAnimation | null {\n  if (Array.isArray(args1) && args1.length === 0) return null;\n\n  const sourceAnimation = Array.isArray(args1) ? args1[0] : args1;\n  const targetAnimations = Array.isArray(args1) ? args1.slice(1) : args2 || [];\n\n  return new Proxy(sourceAnimation, {\n    get(target, propKey: keyof IAnimation) {\n      if (typeof target[propKey] === 'function' && !['onframe', 'onfinish'].includes(propKey)) {\n        return (...args: unknown[]) => {\n          (target[propKey] as any)(...args);\n          targetAnimations.forEach((animation) => (animation[propKey] as any)?.(...args));\n        };\n      }\n      if (propKey === 'finished') {\n        return Promise.all([sourceAnimation.finished, ...targetAnimations.map((animation) => animation.finished)]);\n      }\n      return Reflect.get(target, propKey);\n    },\n    set(target, propKey: keyof IAnimation, value) {\n      // onframe  onfinish \n      // onframe and onfinish are specially processed and do not need to be synchronized to all animation instances\n      if (!['onframe', 'onfinish'].includes(propKey)) {\n        targetAnimations.forEach((animation) => {\n          (animation[propKey] as any) = value;\n        });\n      }\n      return Reflect.set(target, propKey, value);\n    },\n  });\n}\n\n/**\n * <zh/> \n *\n * <en/> Preprocess keyframes, filter out the properties of useless animations\n * @param keyframes - <zh/>  | <en/> keyframes\n * @returns <zh/>  | <en/> keyframes\n */\nexport function preprocessKeyframes(keyframes: Keyframe[]): Keyframe[] {\n  //  PropertyIndexedKeyframes \n  // convert to PropertyIndexedKeyframes format for subsequent processing\n  const propertyIndexedKeyframes: Record<string, any[]> = keyframes.reduce((acc, kf) => {\n    Object.entries(kf).forEach(([key, value]) => {\n      if (acc[key] === undefined) acc[key] = [value];\n      else acc[key].push(value);\n    });\n    return acc;\n  }, {});\n\n  //  undefined\n  // filter out useless animation properties (property value is undefined, or value is exactly the same)\n  Object.entries(propertyIndexedKeyframes).forEach(([key, values]) => {\n    if (\n      //  / property value must exist in every frame\n      values.length !== keyframes.length ||\n      //  / property value cannot be empty\n      values.some((value) => isNil(value)) ||\n      //  / property value must not be exactly the same\n      //  / property value can be the reserved property\n      values.every((value) => !['sourceNode', 'targetNode', 'childrenNode'].includes(key) && isEqual(value, values[0]))\n    ) {\n      delete propertyIndexedKeyframes[key];\n    }\n  });\n\n  //  PropertyIndexedKeyframes  Keyframe \n  // convert PropertyIndexedKeyframes to Keyframe format\n  const output = Object.entries(propertyIndexedKeyframes).reduce((acc, [key, values]) => {\n    values.forEach((value, index) => {\n      if (!acc[index]) acc[index] = { [key]: value };\n      else acc[index][key] = value;\n    });\n    return acc;\n  }, [] as Keyframe[]);\n\n  // \n  // If all properties are filtered out after processing, add a property that has no actual effect to trigger the animation\n  if (keyframes.length !== 0 && output.length === 0) output.push(...[{ _: 0 }, { _: 0 }]);\n\n  return output;\n}\n\n/**\n * <zh/> \n *\n * <en/> Get default value of attribute\n * @param name - <zh/>  | <en/> Attribute name\n * @returns <zh/>  | <en/> Attribute default value\n * @remarks\n * <zh/>  G \n *\n * <en/> During the animation, some attributes do not explicitly specify the attribute value, but in fact there is an attribute value in G, so use this method to get the actual default value\n */\nexport function inferDefaultValue(name: string) {\n  switch (name) {\n    case 'opacity':\n      return 1;\n    case 'x':\n    case 'y':\n    case 'z':\n    case 'zIndex':\n      return 0;\n    case 'visibility':\n      return 'visible';\n    case 'collapsed':\n      return false;\n    case 'states':\n      return [];\n    default:\n      return undefined;\n  }\n}\n\n/**\n * <zh/> \n *\n * <en/> Get global animation configuration\n * @param options - <zh/> G6  | <en/> G6 configuration(used to get global animation configuration)\n * @param localAnimation - <zh/>  | <en/> local animation configuration\n * @returns <zh/>  | <en/> animation configuration\n */\nexport function getAnimationOptions(\n  options: GraphOptions,\n  localAnimation: boolean | AnimationEffectTiming | undefined,\n): false | AnimationEffectTiming {\n  const { animation } = options;\n  if (animation === false || localAnimation === false) return false;\n\n  const effectTiming: AnimationEffectTiming = { ...DEFAULT_ANIMATION_OPTIONS };\n  if (isObject(animation)) Object.assign(effectTiming, animation);\n  if (isObject(localAnimation)) Object.assign(effectTiming, localAnimation);\n  return effectTiming;\n}\n\n/**\n * <zh/> \n *\n * <en/> Get animation configuration\n * @param options - <zh/>  | <en/> animation configuration\n * @returns <zh/>  | <en/> animation configuration\n */\nfunction animationOf(options: string | AnimationOptions[]): STDAnimation {\n  if (typeof options === 'string') {\n    const animation = getExtension(ExtensionCategory.ANIMATION, options);\n    if (animation) return animation;\n\n    print.warn(`The animation of ${options} is not registered.`);\n    return [];\n  }\n  return options;\n}\n\n/**\n * <zh/> \n *\n * <en/> Get element animation\n * @param options - <zh/> G6  | <en/> G6 configuration\n * @param elementType - <zh/>  | <en/> element type\n * @param stage - <zh/>  | <en/> animation stage\n * @param localAnimation - <zh/>  | <en/> local animation configuration\n * @returns <zh/>  | <en/> animation timing configuration\n */\nexport function getElementAnimationOptions(\n  options: GraphOptions,\n  elementType: ElementType,\n  stage: AnimationStage,\n  localAnimation?: AnimationEffectTiming | boolean,\n): STDAnimation {\n  const { animation: globalAnimation } = options;\n  if (globalAnimation === false || localAnimation === false) return [];\n\n  const userElementAnimation = options?.[elementType]?.animation;\n  if (userElementAnimation === false) return [];\n  const useElementStageAnimation = userElementAnimation?.[stage];\n  if (useElementStageAnimation === false) return [];\n\n  //  >  >  >  > \n  // Priority: user local animation configuration > user animation configuration > global animation configuration > theme animation configuration > default animation configuration\n\n  const themeElementAnimation = themeOf(options)[elementType]?.animation;\n\n  const combine = (_: string | AnimationOptions[] = []) =>\n    animationOf(_).map((animation) => ({\n      ...DEFAULT_ELEMENTS_ANIMATION_OPTIONS,\n      ...(isObject(globalAnimation) && globalAnimation),\n      ...animation,\n      ...(isObject(localAnimation) && localAnimation),\n    }));\n\n  if (useElementStageAnimation) return combine(useElementStageAnimation);\n\n  if (!themeElementAnimation) return [];\n\n  // \n  // At this time, it depends on the theme animation configuration\n  const themeElementStageAnimation = themeElementAnimation[stage];\n  if (themeElementStageAnimation === false) return [];\n  return combine(themeElementStageAnimation);\n}\n", "import type { TransformArray } from '@antv/g';\nimport { isNumber } from '@antv/util';\n\n/**\n * <zh/>  transform  translate \n *\n * <en/> replace the translate part from the transform string\n * @param x - <zh/> x | <en/> x\n * @param y - <zh/> y | <en/> y\n * @param z - <zh/> z | <en/> z\n * @param transform - <zh/> transform  | <en/> transform string\n * @returns <zh/>  transform  null  | <en/> the replaced transform string, return null means no need to replace\n */\nexport function replaceTranslateInTransform(\n  x: number,\n  y: number,\n  z?: number,\n  transform: string | TransformArray = [],\n): string | TransformArray | null {\n  if (!transform && x === 0 && y === 0 && z === 0) return null;\n\n  if (Array.isArray(transform)) {\n    let translateIndex = -1;\n    const newTransform: TransformArray = [];\n\n    for (let i = 0; i < transform.length; i++) {\n      const t = transform[i];\n      if (t[0] === 'translate') {\n        if (t[1] === x && t[2] === y) return null;\n        translateIndex = i;\n        newTransform.push(['translate', x, y]);\n      } else if (t[0] === 'translate3d') {\n        if (t[1] === x && t[2] === y && t[3] === z) return null;\n        translateIndex = i;\n        newTransform.push(['translate3d', x, y, z ?? 0]);\n      } else {\n        newTransform.push(t);\n      }\n    }\n\n    if (translateIndex === -1) {\n      newTransform.splice(0, 0, isNumber(z) ? ['translate3d', x, y, z ?? 0] : ['translate', x, y]);\n    }\n    if (newTransform.length === 0) return null;\n    return newTransform;\n  }\n\n  const removedTranslate = transform ? transform.replace(/translate(3d)?\\([^)]*\\)/g, '') : '';\n  if (z === 0) {\n    return `translate(${x}, ${y})${removedTranslate}`;\n  } else {\n    return `translate3d(${x}, ${y}, ${z})${removedTranslate}`;\n  }\n}\n", "import type { DisplayObject, IAnimation } from '@antv/g';\nimport { upperFirst } from '@antv/util';\nimport { createAnimationsProxy, inferDefaultValue, preprocessKeyframes } from '../utils/animation';\nimport { replaceTranslateInTransform } from '../utils/transform';\nimport type { AnimationExecutor } from './types';\n\n/**\n * <zh/> \n *\n * <en/> Animation syntax executor\n * @param element - <zh/>  | <en/> shape to execute animation\n * @param keyframes - <zh/>  | <en/> animation keyframes\n * @param options - <zh/>  | <en/> animation syntax\n * @returns <zh/>  | <en/> animation instance\n */\nexport const executor: AnimationExecutor = (element, keyframes, options) => {\n  if (!options.length) return null;\n\n  const [originalStyle, modifiedStyle] = keyframes;\n  /**\n   * <zh/> \n   *\n   * <en/> Get the keyframe style of the shape\n   * @param shapeID - <zh/>  ID | <en/> shape ID\n   * @returns <zh/>  | <en/> keyframe style of the shape\n   */\n  const getKeyframeStyle = (\n    shapeID?: string,\n  ): { shape: DisplayObject; fromStyle: Record<string, any>; toStyle: Record<string, any> } | null => {\n    if (shapeID) {\n      const shape = element.getShape(shapeID);\n      if (!shape) return null;\n\n      const name = `get${upperFirst(shapeID)}Style` as keyof typeof element;\n\n      const styler: (attrs?: Record<string, unknown>) => Record<string, unknown> =\n        element?.[name]?.bind(element) || ((attrs) => attrs);\n\n      const fromStyle = styler?.(originalStyle) || {};\n      const toStyle = styler?.(modifiedStyle) || {};\n\n      return { shape, fromStyle, toStyle };\n    } else {\n      const shape = element;\n      return { shape, fromStyle: originalStyle, toStyle: modifiedStyle };\n    }\n  };\n\n  let mainResult: IAnimation;\n\n  const subResults = options\n    .map(({ fields, shape: shapeID, states: enabledStates, ...effectTiming }) => {\n      const keyframeStyle = getKeyframeStyle(shapeID);\n      if (!keyframeStyle) return null;\n\n      const { shape, fromStyle, toStyle } = keyframeStyle;\n\n      const keyframes: Keyframe[] = [{}, {}];\n\n      fields.forEach((attr) => {\n        Object.assign(keyframes[0], { [attr]: fromStyle[attr] ?? inferDefaultValue(attr) });\n        Object.assign(keyframes[1], { [attr]: toStyle[attr] ?? inferDefaultValue(attr) });\n      });\n\n      // x/y -> translate\n      if (keyframes.some((keyframe) => Object.keys(keyframe).some((attr) => ['x', 'y', 'z'].includes(attr)))) {\n        const { x = 0, y = 0, z, transform = '' } = shape.attributes || {};\n        keyframes.forEach((keyframe) => {\n          // @ts-expect-error ignore type error\n          keyframe.transform = replaceTranslateInTransform(\n            (keyframe.x as number) ?? (x as number),\n            (keyframe.y as number) ?? (y as number),\n            (keyframe.z as number) ?? (z as number),\n            transform,\n          );\n        });\n      }\n\n      const result = shape.animate(preprocessKeyframes(keyframes), effectTiming);\n\n      if (shapeID === undefined) mainResult = result!;\n\n      return result;\n    })\n    .filter(Boolean) as IAnimation[];\n\n  const result = mainResult! || subResults?.[0];\n\n  if (!result) return null;\n\n  return createAnimationsProxy(\n    result,\n    subResults.filter((result) => result !== result),\n  );\n};\n", "/**\n * <zh/> \n * <en/> Built-in animations.\n */\nexport { executor } from './executor';\n\nexport const Fade = [{ fields: ['opacity'] }];\n\nexport const Translate = [{ fields: ['x', 'y'] }];\n\nexport const NodeCollapse = [{ fields: ['x', 'y'] }];\n\nexport const NodeExpand = NodeCollapse;\n\nexport const PathIn = [{ fields: ['sourceNode', 'targetNode'] }];\n\nexport const PathOut = PathIn;\n\nexport const ComboCollapse = [{ fields: ['childrenNode', 'x', 'y'] }];\n\nexport const ComboExpand = ComboCollapse;\n\nexport const ComboCollapseExpand = [{ fields: ['childrenNode', 'x', 'y'] }];\n", "import type { EdgeData } from '../spec';\nimport type { ElementDatum, Point, Vector2, Vector3 } from '../types';\n\n/**\n * <zh/> \n *\n * <en/> judge whether the data is edge data\n * @param data - <zh/>  | <en/> element data\n * @returns - <zh/>  | <en/> whether the data is edge data\n */\nexport function isEdgeData(data: Partial<ElementDatum>): data is EdgeData {\n  if ('source' in data && 'target' in data) return true;\n  return false;\n}\n\n/**\n * <zh/> \n *\n * <en/> Judge whether the vector is 2d\n * @param vector - <zh/>  | <en/> vector\n * @returns <zh/>  | <en/> whether the vector is 2d\n */\nexport function isVector2(vector: Point): vector is Vector2 {\n  return vector.length === 2;\n}\n\n/**\n * <zh/> \n *\n * <en/> Judge whether the vector is 3d\n * @param vector - <zh/>  | <en/> vector\n * @returns <zh/>  | <en/> whether the vector is 3d\n */\nexport function isVector3(vector: Point): vector is Vector3 {\n  return vector.length === 3;\n}\n\n/**\n * <zh/> \n *\n * <en/> Judge whether the point is valid\n * @param p - <zh/>  | <en/> point\n * @returns <zh/>  | <en/> whether the point is valid\n */\nexport function isPoint(p: any): p is Point {\n  if (p instanceof Float32Array) return true;\n\n  if (Array.isArray(p) && (p.length === 2 || p.length === 3)) {\n    return p.every((elem) => typeof elem === 'number');\n  }\n\n  return false;\n}\n", "/**\n * <zh/> \n *\n * <en/> Judge whether the value is in the interval\n * @param value - <zh/>  | <en/> value\n * @param min - <zh/>  | <en/> minimum value\n * @param max - <zh/>  | <en/> maximum value\n * @returns <zh/>  | <en/> whether in the interval\n */\nexport function isBetween(value: number, min: number, max: number): boolean {\n  return value >= min && value <= max;\n}\n", "import type { Padding, STDPadding } from '../types/padding';\n\n/**\n * <zh/>  padding\n *\n * <en/> parse padding\n * @param padding - <zh/> padding | <en/> padding\n * @returns <zh/>  padding | <en/> standard padding\n */\nexport function parsePadding(padding: Padding = 0): STDPadding {\n  if (Array.isArray(padding)) {\n    const [top = 0, right = top, bottom = top, left = right] = padding;\n    return [top, right, bottom, left];\n  }\n  return [padding, padding, padding, padding];\n}\n\n/**\n * <zh/>  padding\n *\n * <en/> get vertical padding\n * @param padding - <zh/> padding | <en/> padding\n * @returns <zh/>  padding | <en/> vertical padding\n */\nexport function getVerticalPadding(padding: Padding = 0): number {\n  const parsedPadding = parsePadding(padding);\n  return parsedPadding[0] + parsedPadding[2];\n}\n\n/**\n * <zh/>  padding\n *\n * <en/> get horizontal padding\n * @param padding - <zh/> padding | <en/> padding\n * @returns <zh/>  padding | <en/> horizontal padding\n */\nexport function getHorizontalPadding(padding: Padding = 0): number {\n  const parsedPadding = parsePadding(padding);\n  return parsedPadding[1] + parsedPadding[3];\n}\n", "import { AABB } from '@antv/g';\nimport { clone } from '@antv/util';\nimport type { Node, Padding, Point, TriangleDirection } from '../types';\nimport { isPoint } from './is';\nimport { isBetween } from './math';\nimport { parsePadding } from './padding';\n\n/**\n * <zh/> \n *\n * <en/> Retrieves the width of a bounding box\n * @param bbox - <zh/>  | <en/> Bounding box\n * @returns <zh/>  | <en/> Width of box\n */\nexport function getBBoxWidth(bbox: AABB): number {\n  return bbox.max[0] - bbox.min[0];\n}\n\n/**\n * <zh/> \n *\n * <en/> Retrieve the height of a bounding box\n * @param bbox - <zh/>  | <en/> Bounding box\n * @returns <zh/>  | <en/> Height of box\n */\nexport function getBBoxHeight(bbox: AABB): number {\n  return bbox.max[1] - bbox.min[1];\n}\n\n/**\n * <zh/> \n * @param bbox - <zh/>  | <en/> Bounding box\n * @returns <zh/>  | <en/> Size of box\n */\nexport function getBBoxSize(bbox: AABB): [number, number] {\n  return [getBBoxWidth(bbox), getBBoxHeight(bbox)];\n}\n\n/**\n * <zh/> \n *\n * <en/> Get the bounding box of the node, compatible with the case where the node is a point\n * @param node - <zh/>  | <en/> node or point\n * @param padding - <zh/>  | <en/> padding\n * @returns <zh/>  | <en/> bounding box\n */\nexport function getNodeBBox(node: Point | Node, padding?: Padding): AABB {\n  const bbox = isPoint(node) ? getPointBBox(node) : node.getShape('key').getBounds();\n  return padding ? getExpandedBBox(bbox, padding) : bbox;\n}\n\n/**\n * <zh/> \n *\n * <en/> Get the bounding box of a single point\n * @param point - <zh/>  | <en/> Point\n * @returns <zh/>  | <en/> Bounding box\n */\nexport function getPointBBox(point: Point): AABB {\n  const [x, y, z = 0] = point;\n  const bbox = new AABB();\n  bbox.setMinMax([x, y, z], [x, y, z]);\n  return bbox;\n}\n\n/**\n * <zh/> \n *\n * <en/> Get the expanded bounding box\n * @param bbox - <zh/>  | <en/> Bounding box\n * @param padding - <zh/>  | <en/> Padding\n * @returns <zh/>  | <en/> The expanded bounding box\n */\nexport function getExpandedBBox(bbox: AABB, padding: Padding): AABB {\n  const [top, right, bottom, left] = parsePadding(padding);\n  const [minX, minY, minZ] = bbox.min;\n  const [maxX, maxY, maxZ] = bbox.max;\n  const eBbox = new AABB();\n  eBbox.setMinMax([minX - left, minY - top, minZ], [maxX + right, maxY + bottom, maxZ]);\n  return eBbox;\n}\n\n/**\n * <zh/> \n *\n * <en/> Calculate the overall bounding box\n * @param bboxes - <zh/>  | <en/> List of bounding boxes\n * @returns <zh/>  | <en/> Overall bounding box\n */\nexport function getCombinedBBox(bboxes: AABB[]): AABB {\n  if (bboxes.length === 0) return new AABB();\n  if (bboxes.length === 1) return bboxes[0];\n\n  const bbox = new AABB();\n  bbox.setMinMax(bboxes[0].min, bboxes[0].max);\n\n  for (let i = 1; i < bboxes.length; i++) {\n    const b2 = bboxes[i];\n    bbox.setMinMax(\n      [Math.min(bbox.min[0], b2.min[0]), Math.min(bbox.min[1], b2.min[1]), Math.min(bbox.min[2], b2.min[2])],\n      [Math.max(bbox.max[0], b2.max[0]), Math.max(bbox.max[1], b2.max[1]), Math.max(bbox.max[2], b2.max[2])],\n    );\n  }\n\n  return bbox;\n}\n\n/**\n * <zh/>  bbox1  bbox2 \n *\n * <en/> Determine whether bbox1 is completely contained in bbox2\n * @param bbox1 - <zh/>  | <en/> Target bounding box\n * @param bbox2 - <zh/>  | <en/> Reference bounding box\n * @returns <zh/>  bbox1  bbox2  true false | <en/> Returns true if bbox1 is completely contained in bbox2, false otherwise\n */\nexport function isBBoxInside(bbox1: AABB, bbox2: AABB): boolean {\n  const [minX1, minY1] = bbox1.min;\n  const [maxX1, maxY1] = bbox1.max;\n  const [minX2, minY2] = bbox2.min;\n  const [maxX2, maxY2] = bbox2.max;\n\n  return minX1 >= minX2 && maxX1 <= maxX2 && minY1 >= minY2 && maxY1 <= maxY2;\n}\n\n/**\n * <zh/> \n *\n * <en/> Whether the point is contained in the given box\n * @param point - <zh/>  | <en/> Point\n * @param bbox - <zh/>  | <en/> Bounding box\n * @returns  <zh/>  true false | <en/> Returns true if the point is inside the bounding box, false otherwise\n */\nexport function isPointInBBox(point: Point, bbox: AABB) {\n  return isBetween(point[0], bbox.min[0], bbox.max[0]) && isBetween(point[1], bbox.min[1], bbox.max[1]);\n}\n\n/**\n * <zh/> \n *\n * <en/> Whether the point is on the boundary or extension line of the given box\n * @param point - <zh/>  | <en/> Point\n * @param bbox - <zh/>  | <en/> Bounding box\n * @param extended - <zh/>  | <en/> Whether to judge the extension line of the boundary\n * @returns <zh/>  true false | <en/> Returns true if the point is on the boundary or extension line of the bounding box, false otherwise\n */\nexport function isPointOnBBoxBoundary(point: Point, bbox: AABB, extended = false): boolean {\n  const {\n    min: [minX, minY],\n    max: [maxX, maxY],\n  } = bbox;\n\n  const onTopOrBottomLine = (point[1] === minY || point[1] === maxY) && (extended || isBetween(point[0], minX, maxX));\n  const onLeftOrRightLine = (point[0] === minX || point[0] === maxX) && (extended || isBetween(point[1], minY, maxY));\n\n  return onTopOrBottomLine || onLeftOrRightLine;\n}\n\n/**\n * <zh/> \n *\n * <en/> Whether the point is outside the given box\n * @param point - <zh/>  | <en/> Point\n * @param bbox - <zh/>  | <en/> Bounding box\n * @returns <zh/>  true false | <en/> Returns true if the point is outside the bounding box, false otherwise\n */\nexport function isPointOutsideBBox(point: Point, bbox: AABB) {\n  return !isPointInBBox(point, bbox);\n}\n\n/**\n * <zh/> \n *\n * <en/> When the point is at the center of the bounding box\n * @param point - <zh/>  | <en/> Point\n * @param bbox - <zh/>  | <en/> Bounding box\n * @returns <zh/>  true false | <en/> Returns true if the point is at the center of the bounding box, false otherwise\n */\nexport function isPointBBoxCenter(point: Point, bbox: AABB) {\n  const { center } = bbox;\n  return point[0] === center[0] && point[1] === center[1];\n}\n\n/**\n * <zh/>  `p` \n *\n * <en/> Get a side of the boundary which is nearest to the point `p`\n * @param bbox - <zh/>  | <en/> Bounding box\n * @param p - <zh/>  | <en/> Point\n * @returns <zh/>  `p`  | <en/> The side nearest to the point `p`\n */\nexport function getNearestBoundarySide(p: Point, bbox: AABB): 'left' | 'right' | 'top' | 'bottom' {\n  const [x, y] = p;\n  const [minX, minY] = bbox.min;\n  const [maxX, maxY] = bbox.max;\n  const left = x - minX;\n  const right = maxX - x;\n  const top = y - minY;\n  const bottom = maxY - y;\n  const min = Math.min(left, right, top, bottom);\n  return min === left ? 'left' : min === right ? 'right' : min === top ? 'top' : min === bottom ? 'bottom' : 'left';\n}\n\n/**\n * <zh/>  `p` \n *\n * <en/> Get a point on the boundary nearest to the point `p`\n * @param bbox - <zh/>  | <en/> Bounding box\n * @param p - <zh/>  | <en/> Point\n * @returns <zh/>  `p`  | <en/> The point nearest to the point `p`\n */\nexport function getNearestBoundaryPoint(p: Point, bbox: AABB): Point {\n  const ref = clone(p);\n  if (isPointInBBox(p, bbox)) {\n    const side = getNearestBoundarySide(p, bbox);\n    switch (side) {\n      case 'left':\n        ref[0] = bbox.min[0];\n        break;\n      case 'right':\n        ref[0] = bbox.max[0];\n        break;\n      case 'top':\n        ref[1] = bbox.min[1];\n        break;\n      case 'bottom':\n        ref[1] = bbox.max[1];\n        break;\n    }\n  } else {\n    const [x, y] = p;\n    const [minX, minY] = bbox.min;\n    const [maxX, maxY] = bbox.max;\n    ref[0] = isBetween(x, minX, maxX) ? x : x < minX ? minX : maxX;\n    ref[1] = isBetween(y, minY, maxY) ? y : y < minY ? minY : maxY;\n  }\n  return ref;\n}\n\n/**\n * The triangle center point of the bounding box\n * @param bbox - bounding box\n * @param direction - direction\n * @returns Point\n */\nexport function getTriangleCenter(bbox: AABB, direction: TriangleDirection): Point {\n  // todo \n  const { center } = bbox;\n  const [width, height] = getBBoxSize(bbox);\n\n  const x =\n    direction === 'up' || direction === 'down'\n      ? center[0]\n      : direction === 'right'\n        ? center[0] - width / 6\n        : center[0] + width / 6;\n  const y =\n    direction === 'left' || direction === 'right'\n      ? center[1]\n      : direction === 'down'\n        ? center[1] - height / 6\n        : center[1] + height / 6;\n\n  return [x, y];\n}\n\n/**\n * Get incircle radius\n * @param bbox - bounding box\n * @param direction - direction\n * @returns number\n */\nexport function getIncircleRadius(bbox: AABB, direction: TriangleDirection): number {\n  let [w, h] = getBBoxSize(bbox);\n\n  [w, h] = direction === 'up' || direction === 'down' ? [w, h] : [h, w];\n\n  // \n  return (h ** 2 - (Math.sqrt((w / 2) ** 2 + h ** 2) - w / 2) ** 2) / (2 * h);\n}\n\n/**\n * <zh/> \n *\n * <en/> Get the four segments of the bounding box, in order from top, right, bottom, left\n * @param bbox - <zh/>  | <en/> Bounding box\n * @returns <zh/>  | <en/> The four segments of the bounding box\n */\nexport function getBBoxSegments(bbox: AABB): [Point, Point][] {\n  const {\n    min: [minX, minY],\n    max: [maxX, maxY],\n  } = bbox;\n  const topLeftCorner: Point = [minX, maxY];\n  const topRightCorner: Point = [maxX, maxY];\n  const bottomRightCorner: Point = [maxX, minY];\n  const bottomLeftCorner: Point = [minX, minY];\n\n  const top = [topLeftCorner, topRightCorner];\n  const right = [topRightCorner, bottomRightCorner];\n  const bottom = [bottomRightCorner, bottomLeftCorner];\n  const left = [bottomLeftCorner, topLeftCorner];\n  return [top, right, bottom, left] as [Point, Point][];\n}\n", "var defaultComparator = function defaultComparator(a, b) {\n  if (a === b) {\n    return true;\n  }\n  return false;\n};\n/**\n * \n */\nvar LinkedListNode = /** @class */function () {\n  function LinkedListNode(value, next) {\n    if (next === void 0) {\n      next = null;\n    }\n    this.value = value;\n    this.next = next;\n  }\n  LinkedListNode.prototype.toString = function (callback) {\n    return callback ? callback(this.value) : \"\".concat(this.value);\n  };\n  return LinkedListNode;\n}();\nexport { LinkedListNode };\nvar LinkedList = /** @class */function () {\n  function LinkedList(comparator) {\n    if (comparator === void 0) {\n      comparator = defaultComparator;\n    }\n    this.head = null;\n    this.tail = null;\n    this.compare = comparator;\n  }\n  /**\n   * \n   * @param value\n   */\n  LinkedList.prototype.prepend = function (value) {\n    // \n    var newNode = new LinkedListNode(value, this.head);\n    this.head = newNode;\n    if (!this.tail) {\n      this.tail = newNode;\n    }\n    return this;\n  };\n  /**\n   * \n   * @param value\n   */\n  LinkedList.prototype.append = function (value) {\n    var newNode = new LinkedListNode(value);\n    // \n    if (!this.head) {\n      this.head = newNode;\n      this.tail = newNode;\n      return this;\n    }\n    // \n    this.tail.next = newNode;\n    this.tail = newNode;\n    return this;\n  };\n  /**\n   * \n   * @param value \n   */\n  LinkedList.prototype.delete = function (value) {\n    if (!this.head) {\n      return null;\n    }\n    var deleteNode = null;\n    // next\n    while (this.head && this.compare(this.head.value, value)) {\n      deleteNode = this.head;\n      this.head = this.head.next;\n    }\n    var currentNode = this.head;\n    if (currentNode !== null) {\n      // next\n      while (currentNode.next) {\n        if (this.compare(currentNode.next.value, value)) {\n          deleteNode = currentNode.next;\n          currentNode.next = currentNode.next.next;\n        } else {\n          currentNode = currentNode.next;\n        }\n      }\n    }\n    // \n    if (this.compare(this.tail.value, value)) {\n      this.tail = currentNode;\n    }\n    return deleteNode;\n  };\n  /**\n   * \n   * @param param0\n   */\n  LinkedList.prototype.find = function (_a) {\n    var _b = _a.value,\n      value = _b === void 0 ? undefined : _b,\n      _c = _a.callback,\n      callback = _c === void 0 ? undefined : _c;\n    if (!this.head) {\n      return null;\n    }\n    var currentNode = this.head;\n    while (currentNode) {\n      //  callback callback \n      if (callback && callback(currentNode.value)) {\n        return currentNode;\n      }\n      //  value value \n      if (value !== undefined && this.compare(currentNode.value, value)) {\n        return currentNode;\n      }\n      currentNode = currentNode.next;\n    }\n    return null;\n  };\n  /**\n   * \n   */\n  LinkedList.prototype.deleteTail = function () {\n    var deletedTail = this.tail;\n    if (this.head === this.tail) {\n      // \n      this.head = null;\n      this.tail = null;\n      return deletedTail;\n    }\n    var currentNode = this.head;\n    while (currentNode.next) {\n      if (!currentNode.next.next) {\n        currentNode.next = null;\n      } else {\n        currentNode = currentNode.next;\n      }\n    }\n    this.tail = currentNode;\n    return deletedTail;\n  };\n  /**\n   * \n   */\n  LinkedList.prototype.deleteHead = function () {\n    if (!this.head) {\n      return null;\n    }\n    var deletedHead = this.head;\n    if (this.head.next) {\n      this.head = this.head.next;\n    } else {\n      this.head = null;\n      this.tail = null;\n    }\n    return deletedHead;\n  };\n  /**\n   * \n   * @param values \n   */\n  LinkedList.prototype.fromArray = function (values) {\n    var _this = this;\n    values.forEach(function (value) {\n      return _this.append(value);\n    });\n    return this;\n  };\n  /**\n   * \n   */\n  LinkedList.prototype.toArray = function () {\n    var nodes = [];\n    var currentNode = this.head;\n    while (currentNode) {\n      nodes.push(currentNode);\n      currentNode = currentNode.next;\n    }\n    return nodes;\n  };\n  /**\n   * \n   */\n  LinkedList.prototype.reverse = function () {\n    var currentNode = this.head;\n    var prevNode = null;\n    var nextNode = null;\n    while (currentNode) {\n      // \n      nextNode = currentNode.next;\n      // \n      currentNode.next = prevNode;\n      //  prevNode  currentNode \n      prevNode = currentNode;\n      currentNode = nextNode;\n    }\n    this.tail = this.head;\n    this.head = prevNode;\n  };\n  LinkedList.prototype.toString = function (callback) {\n    if (callback === void 0) {\n      callback = undefined;\n    }\n    return this.toArray().map(function (node) {\n      return node.toString(callback);\n    }).toString();\n  };\n  return LinkedList;\n}();\nexport default LinkedList;", "import LinkedList from './linked-list';\nvar Queue = /** @class */function () {\n  function Queue() {\n    this.linkedList = new LinkedList();\n  }\n  /**\n   * \n   */\n  Queue.prototype.isEmpty = function () {\n    return !this.linkedList.head;\n  };\n  /**\n   *  \n   */\n  Queue.prototype.peek = function () {\n    if (!this.linkedList.head) {\n      return null;\n    }\n    return this.linkedList.head.value;\n  };\n  /**\n   * \n   * @param value\n   */\n  Queue.prototype.enqueue = function (value) {\n    this.linkedList.append(value);\n  };\n  /**\n   *  null\n   */\n  Queue.prototype.dequeue = function () {\n    var removeHead = this.linkedList.deleteHead();\n    return removeHead ? removeHead.value : null;\n  };\n  Queue.prototype.toString = function (callback) {\n    return this.linkedList.toString(callback);\n  };\n  return Queue;\n}();\nexport default Queue;", "/**\n * \n * @param nodeId  ID\n * @param edges \n * @param type \n */\nexport var getNeighbors = function getNeighbors(nodeId, edges, type) {\n  if (edges === void 0) {\n    edges = [];\n  }\n  var currentEdges = edges.filter(function (edge) {\n    return edge.source === nodeId || edge.target === nodeId;\n  });\n  if (type === 'target') {\n    //  source\n    var neighhborsConverter_1 = function neighhborsConverter_1(edge) {\n      return edge.source === nodeId;\n    };\n    return currentEdges.filter(neighhborsConverter_1).map(function (edge) {\n      return edge.target;\n    });\n  }\n  if (type === 'source') {\n    //  target\n    var neighhborsConverter_2 = function neighhborsConverter_2(edge) {\n      return edge.target === nodeId;\n    };\n    return currentEdges.filter(neighhborsConverter_2).map(function (edge) {\n      return edge.source;\n    });\n  }\n  //  type \n  var neighhborsConverter = function neighhborsConverter(edge) {\n    return edge.source === nodeId ? edge.target : edge.source;\n  };\n  return currentEdges.map(neighhborsConverter);\n};\n/**\n * \n * @param nodeId  ID\n * @param edges \n */\nexport var getOutEdgesNodeId = function getOutEdgesNodeId(nodeId, edges) {\n  return edges.filter(function (edge) {\n    return edge.source === nodeId;\n  });\n};\n/**\n * \n * @param nodeId  ID\n * @param edges \n */\nexport var getEdgesByNodeId = function getEdgesByNodeId(nodeId, edges) {\n  return edges.filter(function (edge) {\n    return edge.source === nodeId || edge.target === nodeId;\n  });\n};\n/**\n *  ID + \n * @param index \n */\nexport var uniqueId = function uniqueId(index) {\n  if (index === void 0) {\n    index = 0;\n  }\n  var random1 = \"\".concat(Math.random()).split('.')[1].substr(0, 5);\n  var random2 = \"\".concat(Math.random()).split('.')[1].substr(0, 5);\n  return \"\".concat(index, \"-\").concat(random1).concat(random2);\n};", "var degree = function degree(graphData) {\n  var degrees = {};\n  var _a = graphData.nodes,\n    nodes = _a === void 0 ? [] : _a,\n    _b = graphData.edges,\n    edges = _b === void 0 ? [] : _b;\n  nodes.forEach(function (node) {\n    degrees[node.id] = {\n      degree: 0,\n      inDegree: 0,\n      outDegree: 0\n    };\n  });\n  edges.forEach(function (edge) {\n    degrees[edge.source].degree++;\n    degrees[edge.source].outDegree++;\n    degrees[edge.target].degree++;\n    degrees[edge.target].inDegree++;\n  });\n  return degrees;\n};\nexport default degree;\n/**\n * \n * @param graphData \n * @param nodeId ID\n */\nexport var getInDegree = function getInDegree(graphData, nodeId) {\n  var nodeDegree = degree(graphData);\n  if (nodeDegree[nodeId]) {\n    return degree(graphData)[nodeId].inDegree;\n  }\n  return 0;\n};\n/**\n * \n * @param graphData \n * @param nodeId ID\n */\nexport var getOutDegree = function getOutDegree(graphData, nodeId) {\n  var nodeDegree = degree(graphData);\n  if (nodeDegree[nodeId]) {\n    return degree(graphData)[nodeId].outDegree;\n  }\n  return 0;\n};", "const toString = {}.toString;\n\nconst isType = (value: any, type: string): boolean => toString.call(value) === '[object ' + type + ']';\n\nexport default isType;\n", "/**\n * \n * @param  {*} fn \n * @return {Boolean}  \n */\nimport isType from './is-type';\n\nexport default (value: any): value is Function => {\n  return isType(value, 'Function');\n};\n", "import isType from './is-type';\n\nexport default (value: any): value is Array<any> => {\n  return Array.isArray ?\n    Array.isArray(value) :\n    isType(value, 'Array');\n}\n", "export default <T = object>(value: any): value is T => {\n    /**\n     * isObject({}) => true\n     * isObject([1, 2, 3]) => true\n     * isObject(Function) => true\n     * isObject(null) => false\n     */\n  const type = typeof value;\n  return value !== null && type === 'object' || type === 'function';\n};\n", "import isArray from './is-array';\nimport isObject from './is-object';\n\nfunction each (elements: any[] | object, func: (v: any, k: any) => any): void {\n  if (!elements) {\n    return;\n  }\n  let rst;\n  if (isArray(elements)) {\n    for (let i = 0, len = elements.length; i < len; i++) {\n      rst = func(elements[i], i);\n      if (rst === false) {\n        break;\n      }\n    }\n  } else if (isObject(elements)) {\n    for (const k in elements) {\n      if (elements.hasOwnProperty(k)) {\n        rst = func(elements[k], k);\n        if (rst === false) {\n          break;\n        }\n      }\n    }\n  }\n}\n\nexport default each;\n", "const arrPrototype = Array.prototype;\nconst splice = arrPrototype.splice;\nconst indexOf = arrPrototype.indexOf;\n\nconst pull = function<T>(arr: T[], ...values: any[]): T[] {\n  for (let i = 0; i < values.length; i++) {\n    const value = values[i];\n    let fromIndex = -1;\n    while ((fromIndex = indexOf.call(arr, value)) > -1) {\n      splice.call(arr, fromIndex, 1);\n    }\n  }\n  return arr;\n};\n\nexport default pull;\n", "import isArrayLike from './is-array-like';\n\nconst splice = Array.prototype.splice;\n\nconst pullAt = function pullAt <T>(arr: T[], indexes: number[]): T[] {\n  if (!isArrayLike(arr)) {\n    return [];\n  }\n  let length = arr ? indexes.length : 0;\n  const last = length - 1;\n\n  while (length--) {\n    let previous;\n    const index = indexes[length];\n    if (length === last || index !== previous) {\n      previous = index;\n      splice.call(arr, index, 1);\n    }\n  }\n  return arr;\n};\n\nexport default pullAt;\n", "import isType from './is-type';\n\nexport default (str: any): str is string => {\n  return isType(str, 'String');\n}\n", "/**\n * \n * @return {Boolean} \n */\nimport isType from './is-type';\n\nconst isNumber = function(value: any): value is number {\n  return isType(value, 'Number');\n};\nexport default isNumber;\n", "import isNumber from './is-number';\n\nconst isInteger = Number.isInteger ? Number.isInteger : function(num: any): boolean {\n  return isNumber(num) && num % 1 === 0;\n};\n\nexport default isInteger;\n", "const DEGREE = 180 / Math.PI;\n\nconst toDegree = function(radian: number): number {\n  return DEGREE * radian;\n};\n\nexport default toDegree;\n", "const RADIAN = Math.PI / 180;\n\nconst toRadian = function(degree: number): number {\n  return RADIAN * degree;\n};\n\nexport default toRadian;\n", "import each from './each';\nimport isFunction from './is-function';\n\n// @ts-ignore\nconst values = Object.values ? obj => Object.values(obj) : obj => {\n  const result = [];\n  each(obj, (value, key) => {\n    if (!(isFunction(obj) && key === 'prototype')) {\n      result.push(value);\n    }\n  });\n  return result;\n};\n\nexport default values;\n", "const toString = {}.toString;\n\nconst getType = function(value: any): string {\n  return toString.call(value).replace(/^\\[object /, '').replace(/]$/, '');\n};\n\nexport default getType;\n", "const objectProto = Object.prototype;\n\nconst isPrototype = function(value: any): boolean {\n  const Ctor = value && value.constructor;\n  const proto = (typeof Ctor === 'function' && Ctor.prototype) || objectProto;\n  return value === proto;\n};\n\nexport default isPrototype;\n", "import isArray from './is-array';\n\nconst clone = function(obj) {\n  if (typeof obj !== 'object' || obj === null) {\n    return obj;\n  }\n  let rst;\n  if (isArray(obj)) {\n    rst = [];\n    for (let i = 0, l = obj.length; i < l; i++) {\n      if (typeof obj[i] === 'object' && obj[i] != null) {\n        rst[i] = clone(obj[i]);\n      } else {\n        rst[i] = obj[i];\n      }\n    }\n  } else {\n    rst = {};\n    for (const k in obj) {\n      if (typeof obj[k] === 'object' && obj[k] != null) {\n        rst[k] = clone(obj[k]);\n      } else {\n        rst[k] = obj[k];\n      }\n    }\n  }\n\n  return rst;\n};\n\nexport default clone;\n", "import isFunction from './is-function';\n\n/**\n * _.memoize(calColor);\n * _.memoize(calColor, (...args) => args[0]);\n * @param f\n * @param resolver\n */\nexport default (f: Function, resolver?: (...args: any[]) => string) => {\n  if (!isFunction(f)) {\n    throw new TypeError('Expected a function')\n  }\n\n  const memoized = function(...args) {\n    //  key resolver key\n    const key = resolver ? resolver.apply(this, args) : args[0];\n    const cache = memoized.cache;\n\n    if (cache.has(key)) {\n      return cache.get(key)\n    }\n    const result = f.apply(this, args);\n    // \n    cache.set(key, result);\n    return result\n  };\n\n  memoized.cache = new Map();\n\n  return memoized\n}\n", "import values from './values';\nimport memoize from './memoize';\nimport isString from './is-string';\nimport type { Properties } from 'csstype';\n\nexport type Font = Pick<Properties, 'fontFamily' | 'fontWeight' | 'fontStyle' | 'fontVariant'> & {\n  fontSize?: number;\n};\n\nlet ctx: CanvasRenderingContext2D;\n\n/**\n * \n */\nexport default memoize(\n  (text: any, font: Font = {}): number => {\n    const { fontSize, fontFamily, fontWeight, fontStyle, fontVariant } = font;\n    if (!ctx) {\n      ctx = document.createElement('canvas').getContext('2d') as CanvasRenderingContext2D;\n    }\n    ctx!.font = [fontStyle, fontVariant, fontWeight, `${fontSize}px`, fontFamily].join(' ');\n    return ctx!.measureText(isString(text) ? text : '').width;\n  },\n  (text: any, font: Font = {}) => [text, ...values(font)].join('')\n);\n", "/**\n * k-v \n */\nexport default class <T> {\n  map: { [key: string]: T } = {};\n\n  has(key: string): boolean {\n    return this.map[key] !== undefined;\n  }\n\n  get(key: string, def?: T): T | undefined {\n    const v = this.map[key];\n    return v === undefined ? def : v;\n  }\n\n  set(key: string, value: T): void {\n    this.map[key] = value;\n  }\n\n  clear() {\n    this.map = {};\n  }\n\n  delete(key: string) {\n    delete this.map[key];\n  }\n\n  size(): number {\n    return Object.keys(this.map).length;\n  }\n}\n", "import { __spreadArray } from \"tslib\";\nimport { isArray } from '@antv/util';\nimport { getOutEdgesNodeId, getEdgesByNodeId } from './util';\nvar minVertex = function minVertex(D, nodes, marks) {\n  // \n  var minDis = Infinity;\n  var minNode;\n  for (var i = 0; i < nodes.length; i++) {\n    var nodeId = nodes[i].id;\n    if (!marks[nodeId] && D[nodeId] <= minDis) {\n      minDis = D[nodeId];\n      minNode = nodes[i];\n    }\n  }\n  return minNode;\n};\nvar dijkstra = function dijkstra(graphData, source, directed, weightPropertyName) {\n  var _a = graphData.nodes,\n    nodes = _a === void 0 ? [] : _a,\n    _b = graphData.edges,\n    edges = _b === void 0 ? [] : _b;\n  var nodeIds = [];\n  var marks = {};\n  var D = {};\n  var prevs = {}; // key: , value: \n  nodes.forEach(function (node, i) {\n    var id = node.id;\n    nodeIds.push(id);\n    D[id] = Infinity;\n    if (id === source) D[id] = 0;\n  });\n  var nodeNum = nodes.length;\n  var _loop_1 = function _loop_1(i) {\n    // Process the vertices\n    var minNode = minVertex(D, nodes, marks);\n    var minNodeId = minNode.id;\n    marks[minNodeId] = true;\n    if (D[minNodeId] === Infinity) return \"continue\"; // Unreachable vertices cannot be the intermediate point\n    var relatedEdges = [];\n    if (directed) relatedEdges = getOutEdgesNodeId(minNodeId, edges);else relatedEdges = getEdgesByNodeId(minNodeId, edges);\n    relatedEdges.forEach(function (edge) {\n      var edgeTarget = edge.target;\n      var edgeSource = edge.source;\n      var w = edgeTarget === minNodeId ? edgeSource : edgeTarget;\n      var weight = weightPropertyName && edge[weightPropertyName] ? edge[weightPropertyName] : 1;\n      if (D[w] > D[minNode.id] + weight) {\n        D[w] = D[minNode.id] + weight;\n        prevs[w] = [minNode.id];\n      } else if (D[w] === D[minNode.id] + weight) {\n        prevs[w].push(minNode.id);\n      }\n    });\n  };\n  for (var i = 0; i < nodeNum; i++) {\n    _loop_1(i);\n  }\n  prevs[source] = [source];\n  // \n  var paths = {};\n  for (var target in D) {\n    if (D[target] !== Infinity) {\n      findAllPaths(source, target, prevs, paths);\n    }\n  }\n  // \n  var path = {};\n  for (var target in paths) {\n    path[target] = paths[target][0];\n  }\n  return {\n    length: D,\n    path: path,\n    allPath: paths\n  };\n};\nexport default dijkstra;\nfunction findAllPaths(source, target, prevs, foundPaths) {\n  if (source === target) {\n    return [source];\n  }\n  if (foundPaths[target]) {\n    return foundPaths[target];\n  }\n  var paths = [];\n  for (var _i = 0, _a = prevs[target]; _i < _a.length; _i++) {\n    var prev = _a[_i];\n    var prevPaths = findAllPaths(source, prev, prevs, foundPaths);\n    if (!prevPaths) return;\n    for (var _b = 0, prevPaths_1 = prevPaths; _b < prevPaths_1.length; _b++) {\n      var prePath = prevPaths_1[_b];\n      if (isArray(prePath)) paths.push(__spreadArray(__spreadArray([], prePath, true), [target], false));else paths.push([prePath, target]);\n    }\n  }\n  foundPaths[target] = paths;\n  return foundPaths[target];\n}", "import dijkstra from './dijkstra';\nimport { getNeighbors } from './util';\nexport var findShortestPath = function findShortestPath(graphData, start, end, directed, weightPropertyName) {\n  var _a = dijkstra(graphData, start, directed, weightPropertyName),\n    length = _a.length,\n    path = _a.path,\n    allPath = _a.allPath;\n  return {\n    length: length[end],\n    path: path[end],\n    allPath: allPath[end]\n  };\n};\nexport var findAllPath = function findAllPath(graphData, start, end, directed) {\n  var _a;\n  if (start === end) return [[start]];\n  var _b = graphData.edges,\n    edges = _b === void 0 ? [] : _b;\n  var visited = [start];\n  var isVisited = (_a = {}, _a[start] = true, _a);\n  var stack = []; // \n  var allPath = [];\n  var neighbors = directed ? getNeighbors(start, edges, 'target') : getNeighbors(start, edges);\n  stack.push(neighbors);\n  while (visited.length > 0 && stack.length > 0) {\n    var children = stack[stack.length - 1];\n    if (children.length) {\n      var child = children.shift();\n      if (child) {\n        visited.push(child);\n        isVisited[child] = true;\n        neighbors = directed ? getNeighbors(child, edges, 'target') : getNeighbors(child, edges);\n        stack.push(neighbors.filter(function (neighbor) {\n          return !isVisited[neighbor];\n        }));\n      }\n    } else {\n      var node = visited.pop();\n      isVisited[node] = false;\n      stack.pop();\n      continue;\n    }\n    if (visited[visited.length - 1] === end) {\n      var path = visited.map(function (node) {\n        return node;\n      });\n      allPath.push(path);\n      var node = visited.pop();\n      isVisited[node] = false;\n      stack.pop();\n    }\n  }\n  return allPath;\n};", "/**\n * \n */\nimport { clone } from '@antv/util';\nvar Vector = /** @class */function () {\n  function Vector(arr) {\n    this.arr = arr;\n  }\n  Vector.prototype.getArr = function () {\n    return this.arr || [];\n  };\n  Vector.prototype.add = function (otherVector) {\n    var _a;\n    var otherArr = otherVector.arr;\n    if (!((_a = this.arr) === null || _a === void 0 ? void 0 : _a.length)) {\n      return new Vector(otherArr);\n    }\n    if (!(otherArr === null || otherArr === void 0 ? void 0 : otherArr.length)) {\n      return new Vector(this.arr);\n    }\n    if (this.arr.length === otherArr.length) {\n      var res = [];\n      for (var index in this.arr) {\n        res[index] = this.arr[index] + otherArr[index];\n      }\n      return new Vector(res);\n    }\n  };\n  Vector.prototype.subtract = function (otherVector) {\n    var _a;\n    var otherArr = otherVector.arr;\n    if (!((_a = this.arr) === null || _a === void 0 ? void 0 : _a.length)) {\n      return new Vector(otherArr);\n    }\n    if (!(otherArr === null || otherArr === void 0 ? void 0 : otherArr.length)) {\n      return new Vector(this.arr);\n    }\n    if (this.arr.length === otherArr.length) {\n      var res = [];\n      for (var index in this.arr) {\n        res[index] = this.arr[index] - otherArr[index];\n      }\n      return new Vector(res);\n    }\n  };\n  Vector.prototype.avg = function (length) {\n    var res = [];\n    if (length !== 0) {\n      for (var index in this.arr) {\n        res[index] = this.arr[index] / length;\n      }\n    }\n    return new Vector(res);\n  };\n  Vector.prototype.negate = function () {\n    var res = [];\n    for (var index in this.arr) {\n      res[index] = -this.arr[index];\n    }\n    return new Vector(res);\n  };\n  // \n  Vector.prototype.squareEuclideanDistance = function (otherVector) {\n    var _a;\n    var otherArr = otherVector.arr;\n    if (!((_a = this.arr) === null || _a === void 0 ? void 0 : _a.length) || !(otherArr === null || otherArr === void 0 ? void 0 : otherArr.length)) {\n      return 0;\n    }\n    if (this.arr.length === otherArr.length) {\n      var res = 0;\n      for (var index in this.arr) {\n        res += Math.pow(this.arr[index] - otherVector.arr[index], 2);\n      }\n      return res;\n    }\n  };\n  // \n  Vector.prototype.euclideanDistance = function (otherVector) {\n    var _a;\n    var otherArr = otherVector.arr;\n    if (!((_a = this.arr) === null || _a === void 0 ? void 0 : _a.length) || !(otherArr === null || otherArr === void 0 ? void 0 : otherArr.length)) {\n      return 0;\n    }\n    if (this.arr.length === otherArr.length) {\n      var res = 0;\n      for (var index in this.arr) {\n        res += Math.pow(this.arr[index] - otherVector.arr[index], 2);\n      }\n      return Math.sqrt(res);\n    } else {\n      console.error('The two vectors are unequal in length.');\n    }\n  };\n  // \n  Vector.prototype.normalize = function () {\n    var res = [];\n    var cloneArr = clone(this.arr);\n    cloneArr.sort(function (a, b) {\n      return a - b;\n    });\n    var max = cloneArr[cloneArr.length - 1];\n    var min = cloneArr[0];\n    for (var index in this.arr) {\n      res[index] = (this.arr[index] - min) / (max - min);\n    }\n    return new Vector(res);\n  };\n  // 2 or \n  Vector.prototype.norm2 = function () {\n    var _a;\n    if (!((_a = this.arr) === null || _a === void 0 ? void 0 : _a.length)) {\n      return 0;\n    }\n    var res = 0;\n    for (var index in this.arr) {\n      res += Math.pow(this.arr[index], 2);\n    }\n    return Math.sqrt(res);\n  };\n  // \n  Vector.prototype.dot = function (otherVector) {\n    var _a;\n    var otherArr = otherVector.arr;\n    if (!((_a = this.arr) === null || _a === void 0 ? void 0 : _a.length) || !(otherArr === null || otherArr === void 0 ? void 0 : otherArr.length)) {\n      return 0;\n    }\n    if (this.arr.length === otherArr.length) {\n      var res = 0;\n      for (var index in this.arr) {\n        res += this.arr[index] * otherVector.arr[index];\n      }\n      return res;\n    } else {\n      console.error('The two vectors are unequal in length.');\n    }\n  };\n  // \n  Vector.prototype.equal = function (otherVector) {\n    var _a;\n    var otherArr = otherVector.arr;\n    if (((_a = this.arr) === null || _a === void 0 ? void 0 : _a.length) !== (otherArr === null || otherArr === void 0 ? void 0 : otherArr.length)) {\n      return false;\n    }\n    for (var index in this.arr) {\n      if (this.arr[index] !== otherArr[index]) {\n        return false;\n      }\n    }\n    return true;\n  };\n  return Vector;\n}();\nexport default Vector;", "export var DistanceType;\n(function (DistanceType) {\n  DistanceType[\"EuclideanDistance\"] = \"euclideanDistance\";\n})(DistanceType || (DistanceType = {}));", "/**\n *  Disjoint set to support quick union\n */\nvar UnionFind = /** @class */function () {\n  function UnionFind(items) {\n    this.count = items.length;\n    this.parent = {};\n    for (var _i = 0, items_1 = items; _i < items_1.length; _i++) {\n      var i = items_1[_i];\n      this.parent[i] = i;\n    }\n  }\n  // find the root of the item\n  UnionFind.prototype.find = function (item) {\n    while (this.parent[item] !== item) {\n      item = this.parent[item];\n    }\n    return item;\n  };\n  UnionFind.prototype.union = function (a, b) {\n    var rootA = this.find(a);\n    var rootB = this.find(b);\n    if (rootA === rootB) return;\n    // make the element with smaller root the parent\n    if (rootA < rootB) {\n      if (this.parent[b] !== b) this.union(this.parent[b], a);\n      this.parent[b] = this.parent[a];\n    } else {\n      if (this.parent[a] !== a) this.union(this.parent[a], b);\n      this.parent[a] = this.parent[b];\n    }\n  };\n  // whether a and b are connected, i.e. a and b have the same root\n  UnionFind.prototype.connected = function (a, b) {\n    return this.find(a) === this.find(b);\n  };\n  return UnionFind;\n}();\nexport default UnionFind;", "var defaultCompare = function defaultCompare(a, b) {\n  return a - b;\n};\nvar MinBinaryHeap = /** @class */function () {\n  function MinBinaryHeap(compareFn) {\n    if (compareFn === void 0) {\n      compareFn = defaultCompare;\n    }\n    this.compareFn = compareFn;\n    this.list = [];\n  }\n  MinBinaryHeap.prototype.getLeft = function (index) {\n    return 2 * index + 1;\n  };\n  MinBinaryHeap.prototype.getRight = function (index) {\n    return 2 * index + 2;\n  };\n  MinBinaryHeap.prototype.getParent = function (index) {\n    if (index === 0) {\n      return null;\n    }\n    return Math.floor((index - 1) / 2);\n  };\n  MinBinaryHeap.prototype.isEmpty = function () {\n    return this.list.length <= 0;\n  };\n  MinBinaryHeap.prototype.top = function () {\n    return this.isEmpty() ? undefined : this.list[0];\n  };\n  MinBinaryHeap.prototype.delMin = function () {\n    var top = this.top();\n    var bottom = this.list.pop();\n    if (this.list.length > 0) {\n      this.list[0] = bottom;\n      this.moveDown(0);\n    }\n    return top;\n  };\n  MinBinaryHeap.prototype.insert = function (value) {\n    if (value !== null) {\n      this.list.push(value);\n      var index = this.list.length - 1;\n      this.moveUp(index);\n      return true;\n    }\n    return false;\n  };\n  MinBinaryHeap.prototype.moveUp = function (index) {\n    var parent = this.getParent(index);\n    while (index && index > 0 && this.compareFn(this.list[parent], this.list[index]) > 0) {\n      // swap\n      var tmp = this.list[parent];\n      this.list[parent] = this.list[index];\n      this.list[index] = tmp;\n      // [this.list[index], this.list[parent]] = [this.list[parent], this.list[index]]\n      index = parent;\n      parent = this.getParent(index);\n    }\n  };\n  MinBinaryHeap.prototype.moveDown = function (index) {\n    var _a;\n    var element = index;\n    var left = this.getLeft(index);\n    var right = this.getRight(index);\n    var size = this.list.length;\n    if (left !== null && left < size && this.compareFn(this.list[element], this.list[left]) > 0) {\n      element = left;\n    } else if (right !== null && right < size && this.compareFn(this.list[element], this.list[right]) > 0) {\n      element = right;\n    }\n    if (index !== element) {\n      _a = [this.list[element], this.list[index]], this.list[index] = _a[0], this.list[element] = _a[1];\n      this.moveDown(element);\n    }\n  };\n  return MinBinaryHeap;\n}();\nexport default MinBinaryHeap;", "import degree from './degree';\nimport { getNeighbors } from \"./util\";\n/**\n * PageRank https://en.wikipedia.org/wiki/PageRank\n * refer: https://github.com/anvaka/ngraph.pagerank\n * @param graph\n * @param epsilon  0.000001\n * @param linkProb dumping factor 0.85\n */\nvar pageRank = function pageRank(graphData, epsilon, linkProb) {\n  if (typeof epsilon !== 'number') epsilon = 0.000001;\n  if (typeof linkProb !== 'number') linkProb = 0.85;\n  var distance = 1;\n  var leakedRank = 0;\n  var maxIterations = 1000;\n  var _a = graphData.nodes,\n    nodes = _a === void 0 ? [] : _a,\n    _b = graphData.edges,\n    edges = _b === void 0 ? [] : _b;\n  var nodesCount = nodes.length;\n  var currentRank;\n  var curRanks = {};\n  var prevRanks = {};\n  // Initialize pageranks \n  for (var j = 0; j < nodesCount; ++j) {\n    var node = nodes[j];\n    var nodeId = node.id;\n    curRanks[nodeId] = 1 / nodesCount;\n    prevRanks[nodeId] = 1 / nodesCount;\n  }\n  var nodeDegree = degree(graphData);\n  while (maxIterations > 0 && distance > epsilon) {\n    leakedRank = 0;\n    for (var j = 0; j < nodesCount; ++j) {\n      var node = nodes[j];\n      var nodeId = node.id;\n      currentRank = 0;\n      if (nodeDegree[node.id].inDegree === 0) {\n        curRanks[nodeId] = 0;\n      } else {\n        var neighbors = getNeighbors(nodeId, edges, 'source');\n        for (var i = 0; i < neighbors.length; ++i) {\n          var neighbor = neighbors[i];\n          var outDegree = nodeDegree[neighbor].outDegree;\n          if (outDegree > 0) currentRank += prevRanks[neighbor] / outDegree;\n        }\n        curRanks[nodeId] = linkProb * currentRank;\n        leakedRank += curRanks[nodeId];\n      }\n    }\n    leakedRank = (1 - leakedRank) / nodesCount;\n    distance = 0;\n    for (var j = 0; j < nodesCount; ++j) {\n      var node = nodes[j];\n      var nodeId = node.id;\n      currentRank = curRanks[nodeId] + leakedRank;\n      distance += Math.abs(currentRank - prevRanks[nodeId]);\n      prevRanks[nodeId] = currentRank;\n    }\n    maxIterations -= 1;\n  }\n  return prevRanks;\n};\nexport default pageRank;", "export var VACANT_EDGE_ID = -1;\nexport var VACANT_NODE_ID = -1;\nexport var VACANT_EDGE_LABEL = \"-1\";\nexport var VACANT_NODE_LABEL = \"-1\";\nexport var VACANT_GRAPH_ID = -1;\nexport var AUTO_EDGE_ID = \"-1\";\nvar Edge = /** @class */function () {\n  function Edge(id, from, to, label) {\n    if (id === void 0) {\n      id = VACANT_EDGE_ID;\n    }\n    if (from === void 0) {\n      from = VACANT_NODE_ID;\n    }\n    if (to === void 0) {\n      to = VACANT_NODE_ID;\n    }\n    if (label === void 0) {\n      label = VACANT_EDGE_LABEL;\n    }\n    this.id = id;\n    this.from = from;\n    this.to = to;\n    this.label = label;\n  }\n  return Edge;\n}();\nexport { Edge };\nvar Node = /** @class */function () {\n  function Node(id, label) {\n    if (id === void 0) {\n      id = VACANT_NODE_ID;\n    }\n    if (label === void 0) {\n      label = VACANT_NODE_LABEL;\n    }\n    this.id = id;\n    this.label = label;\n    this.edges = [];\n    this.edgeMap = {};\n  }\n  Node.prototype.addEdge = function (edge) {\n    this.edges.push(edge);\n    this.edgeMap[edge.id] = edge;\n  };\n  return Node;\n}();\nexport { Node };\nvar Graph = /** @class */function () {\n  function Graph(id, edgeIdAutoIncrease, directed) {\n    if (id === void 0) {\n      id = VACANT_NODE_ID;\n    }\n    if (edgeIdAutoIncrease === void 0) {\n      edgeIdAutoIncrease = true;\n    }\n    if (directed === void 0) {\n      directed = false;\n    }\n    this.id = id;\n    this.edgeIdAutoIncrease = edgeIdAutoIncrease;\n    this.edges = [];\n    this.nodes = [];\n    this.nodeMap = {};\n    this.edgeMap = {};\n    this.nodeLabelMap = {};\n    this.edgeLabelMap = {};\n    this.counter = 0;\n    this.directed = directed;\n  }\n  Graph.prototype.getNodeNum = function () {\n    return this.nodes.length;\n  };\n  Graph.prototype.addNode = function (id, label) {\n    if (this.nodeMap[id]) return;\n    var node = new Node(id, label);\n    this.nodes.push(node);\n    this.nodeMap[id] = node;\n    if (!this.nodeLabelMap[label]) this.nodeLabelMap[label] = [];\n    this.nodeLabelMap[label].push(id);\n  };\n  Graph.prototype.addEdge = function (id, from, to, label) {\n    if (this.edgeIdAutoIncrease || id === undefined) id = this.counter++;\n    if (this.nodeMap[from] && this.nodeMap[to] && this.nodeMap[to].edgeMap[id]) return;\n    var edge = new Edge(id, from, to, label);\n    this.edges.push(edge);\n    this.edgeMap[id] = edge;\n    this.nodeMap[from].addEdge(edge);\n    if (!this.edgeLabelMap[label]) this.edgeLabelMap[label] = [];\n    this.edgeLabelMap[label].push(edge);\n    if (!this.directed) {\n      var rEdge = new Edge(id, to, from, label);\n      this.nodeMap[to].addEdge(rEdge);\n      this.edgeLabelMap[label].push(rEdge);\n    }\n  };\n  return Graph;\n}();\nexport { Graph };", "import { clone } from \"@antv/util\";\nimport { Graph, VACANT_NODE_LABEL, VACANT_GRAPH_ID, VACANT_EDGE_LABEL } from \"./struct\";\nvar DFSedge = /** @class */function () {\n  function DFSedge(fromNode, toNode, fromNodeLabel, edgeLabel, toNodeLabel) {\n    this.fromNode = fromNode;\n    this.toNode = toNode;\n    this.nodeEdgeNodeLabel = {\n      nodeLabel1: fromNodeLabel || VACANT_NODE_LABEL,\n      edgeLabel: edgeLabel || VACANT_EDGE_LABEL,\n      nodeLabel2: toNodeLabel || VACANT_NODE_LABEL\n    };\n  }\n  DFSedge.prototype.equalTo = function (other) {\n    return this.fromNode === other.formNode && this.toNode === other.toNode && this.nodeEdgeNodeLabel === other.nodeEdgeNodeLabel;\n  };\n  DFSedge.prototype.notEqualTo = function (other) {\n    return !this.equalTo(other);\n  };\n  return DFSedge;\n}();\n// DFScode  DESedge \nvar DFScode = /** @class */function () {\n  function DFScode() {\n    this.rmpath = [];\n    this.dfsEdgeList = [];\n  }\n  DFScode.prototype.equalTo = function (other) {\n    var aLength = this.dfsEdgeList.length;\n    var bLength = other.length;\n    if (aLength !== bLength) return false;\n    for (var i = 0; i < aLength; i++) {\n      if (this.dfsEdgeList[i] !== other[i]) return false;\n    }\n    return true;\n  };\n  DFScode.prototype.notEqualTo = function (other) {\n    return !this.equalTo(other);\n  };\n  /**  edge  DFScode */\n  DFScode.prototype.pushBack = function (fromNode, toNode, fromNodeLabel, edgeLabel, toNodeLabel) {\n    this.dfsEdgeList.push(new DFSedge(fromNode, toNode, fromNodeLabel, edgeLabel, toNodeLabel));\n    return this.dfsEdgeList;\n  };\n  /**  dfs  */\n  DFScode.prototype.toGraph = function (graphId, directed) {\n    if (graphId === void 0) {\n      graphId = VACANT_GRAPH_ID;\n    }\n    if (directed === void 0) {\n      directed = false;\n    }\n    var graph = new Graph(graphId, true, directed);\n    this.dfsEdgeList.forEach(function (dfsEdge) {\n      var fromNodeId = dfsEdge.fromNode;\n      var toNodeId = dfsEdge.toNode;\n      var _a = dfsEdge.nodeEdgeNodeLabel,\n        nodeLabel1 = _a.nodeLabel1,\n        edgeLabel = _a.edgeLabel,\n        nodeLabel2 = _a.nodeLabel2;\n      if (nodeLabel1 !== VACANT_NODE_LABEL) graph.addNode(fromNodeId, nodeLabel1);\n      if (nodeLabel2 !== VACANT_NODE_LABEL) graph.addNode(toNodeId, nodeLabel2);\n      if (nodeLabel1 !== VACANT_NODE_LABEL && nodeLabel2 !== nodeLabel1) graph.addEdge(undefined, fromNodeId, toNodeId, edgeLabel);\n    });\n    return graph;\n  };\n  //  rightmost path\n  DFScode.prototype.buildRmpath = function () {\n    this.rmpath = [];\n    var oldFrom = undefined;\n    var selfLength = this.dfsEdgeList.length;\n    for (var i = selfLength - 1; i >= 0; i--) {\n      var dfsEdge = this.dfsEdgeList[i];\n      var fromNodeIdx = dfsEdge.fromNode;\n      var toNodeIdx = dfsEdge.toNode;\n      if (fromNodeIdx < toNodeIdx && (oldFrom === undefined || toNodeIdx === oldFrom)) {\n        this.rmpath.push(i);\n        oldFrom = fromNodeIdx;\n      }\n    }\n    return this.rmpath;\n  };\n  DFScode.prototype.getNodeNum = function () {\n    var nodeMap = {};\n    this.dfsEdgeList.forEach(function (dfsEdge) {\n      if (!nodeMap[dfsEdge.fromNode]) nodeMap[dfsEdge.fromNode] = true;\n      if (!nodeMap[dfsEdge.toNode]) nodeMap[dfsEdge.toNode] = true;\n    });\n    return Object.keys(nodeMap).length;\n  };\n  return DFScode;\n}();\nvar History = /** @class */function () {\n  function History(pdfs) {\n    this.his = {};\n    this.nodesUsed = {};\n    this.edgesUsed = {};\n    this.edges = [];\n    if (!pdfs) return;\n    while (pdfs) {\n      var e = pdfs.edge;\n      this.edges.push(e);\n      this.nodesUsed[e.from] = 1;\n      this.nodesUsed[e.to] = 1;\n      this.edgesUsed[e.id] = 1;\n      pdfs = pdfs.preNode;\n    }\n    // \n    this.edges = this.edges.reverse();\n  }\n  History.prototype.hasNode = function (node) {\n    return this.nodesUsed[node.id] === 1;\n  };\n  History.prototype.hasEdge = function (edge) {\n    return this.edgesUsed[edge.id] === 1;\n  };\n  return History;\n}();\nvar GSpan = /** @class */function () {\n  function GSpan(_a) {\n    var graphs = _a.graphs,\n      _b = _a.minSupport,\n      minSupport = _b === void 0 ? 2 : _b,\n      _c = _a.minNodeNum,\n      minNodeNum = _c === void 0 ? 1 : _c,\n      _d = _a.maxNodeNum,\n      maxNodeNum = _d === void 0 ? 4 : _d,\n      _e = _a.top,\n      top = _e === void 0 ? 10 : _e,\n      _f = _a.directed,\n      directed = _f === void 0 ? false : _f,\n      _g = _a.verbose,\n      verbose = _g === void 0 ? false : _g;\n    // -------- -------\n    this.graphs = graphs;\n    this.dfsCode = new DFScode();\n    this.support = 0;\n    this.frequentSize1Subgraphs = [];\n    this.frequentSubgraphs = [];\n    this.minSupport = minSupport;\n    this.top = top;\n    this.directed = directed;\n    this.counter = 0;\n    // TODO? timestamp = {}\n    this.maxNodeNum = maxNodeNum;\n    this.minNodeNum = minNodeNum;\n    this.verbose = verbose;\n    if (this.maxNodeNum < this.minNodeNum) this.maxNodeNum = this.minNodeNum;\n    this.reportDF = []; // matrix\n  }\n  // Line 352\n  GSpan.prototype.findForwardRootEdges = function (graph, fromNode) {\n    var _this = this;\n    var result = [];\n    var nodeMap = graph.nodeMap;\n    fromNode.edges.forEach(function (edge) {\n      if (_this.directed || fromNode.label <= nodeMap[edge.to].label) result.push(edge);\n    });\n    return result;\n  };\n  GSpan.prototype.findBackwardEdge = function (graph, edge1, edge2, history) {\n    if (!this.directed && edge1 === edge2) return null;\n    var nodeMap = graph.nodeMap;\n    var edge2To = nodeMap[edge2.to];\n    var edge2ToEdges = edge2To.edges;\n    var edgeLength = edge2ToEdges.length;\n    for (var i = 0; i < edgeLength; i++) {\n      var edge = edge2ToEdges[i];\n      if (history.hasEdge(edge) || edge.to !== edge1.from) continue;\n      if (!this.directed) {\n        if (edge1.label < edge.label || edge1.label === edge.label && nodeMap[edge1.to].label <= nodeMap[edge2.to].label) {\n          return edge;\n        }\n      } else {\n        if (nodeMap[edge1.from].label < nodeMap[edge2.to].label || nodeMap[edge1.from].label === nodeMap[edge2.to].label && edge1.label <= edge.label) {\n          return edge;\n        }\n      }\n    }\n    return null;\n  };\n  GSpan.prototype.findForwardPureEdges = function (graph, rightmostEdge, minNodeLabel, history) {\n    var result = [];\n    var rightmostEdgeToId = rightmostEdge.to;\n    var edges = graph.nodeMap[rightmostEdgeToId].edges;\n    var edgeLength = edges.length;\n    for (var i = 0; i < edgeLength; i++) {\n      var edge = edges[i];\n      var toNode = graph.nodeMap[edge.to];\n      if (minNodeLabel <= toNode.label && !history.hasNode(toNode)) {\n        result.push(edge);\n      }\n    }\n    return result;\n  };\n  GSpan.prototype.findForwardRmpathEdges = function (graph, rightmostEdge, minNodeLabel, history) {\n    var result = [];\n    var nodeMap = graph.nodeMap;\n    var toNodeLabel = nodeMap[rightmostEdge.to].label;\n    var fromNode = nodeMap[rightmostEdge.from];\n    var edges = fromNode.edges;\n    var edgeLength = edges.length;\n    for (var i = 0; i < edgeLength; i++) {\n      var edge = edges[i];\n      var newToNodeLabel = nodeMap[edge.to].label;\n      if (rightmostEdge.to === edge.to || minNodeLabel > newToNodeLabel || history.hasNode(nodeMap[edge.to])) {\n        continue;\n      }\n      if (rightmostEdge.label < edge.label || rightmostEdge.label === edge.label && toNodeLabel <= newToNodeLabel) {\n        result.push(edge);\n      }\n    }\n    return result;\n  };\n  GSpan.prototype.getSupport = function (projected) {\n    var graphMap = {};\n    projected.forEach(function (pro) {\n      if (!graphMap[pro.graphId]) graphMap[pro.graphId] = true;\n    });\n    return Object.keys(graphMap).length;\n  };\n  GSpan.prototype.findMinLabel = function (obj) {\n    var minLabel = undefined;\n    Object.keys(obj).forEach(function (nodeEdgeNodeLabel) {\n      var _a = obj[nodeEdgeNodeLabel],\n        nodeLabel1 = _a.nodeLabel1,\n        edgeLabel = _a.edgeLabel,\n        nodeLabel2 = _a.nodeLabel2;\n      if (!minLabel) {\n        minLabel = {\n          nodeLabel1: nodeLabel1,\n          edgeLabel: edgeLabel,\n          nodeLabel2: nodeLabel2\n        };\n        return;\n      }\n      if (nodeLabel1 < minLabel.nodeLabel1 || nodeLabel1 === minLabel.nodeLabel1 && edgeLabel < minLabel.edgeLabel || nodeLabel1 === minLabel.nodeLabel1 && edgeLabel === minLabel.edgeLabel && nodeLabel2 < minLabel.nodeLabel2) {\n        minLabel = {\n          nodeLabel1: nodeLabel1,\n          edgeLabel: edgeLabel,\n          nodeLabel2: nodeLabel2\n        };\n      }\n    });\n    return minLabel;\n  };\n  GSpan.prototype.isMin = function () {\n    var _this = this;\n    var dfsCode = this.dfsCode;\n    if (this.verbose) console.log(\"isMin checking\", dfsCode);\n    if (dfsCode.dfsEdgeList.length === 1) return true;\n    var directed = this.directed;\n    var graph = dfsCode.toGraph(VACANT_GRAPH_ID, directed);\n    var nodeMap = graph.nodeMap;\n    var dfsCodeMin = new DFScode();\n    var root = {};\n    graph.nodes.forEach(function (node) {\n      var forwardEdges = _this.findForwardRootEdges(graph, node);\n      forwardEdges.forEach(function (edge) {\n        var otherNode = nodeMap[edge.to];\n        var nodeEdgeNodeLabel = \"\".concat(node.label, \"-\").concat(edge.label, \"-\").concat(otherNode.label);\n        if (!root[nodeEdgeNodeLabel]) root[nodeEdgeNodeLabel] = {\n          projected: [],\n          nodeLabel1: node.label,\n          edgeLabel: edge.label,\n          nodeLabel2: otherNode.label\n        };\n        var pdfs = {\n          graphId: graph.id,\n          edge: edge,\n          preNode: null\n        };\n        root[nodeEdgeNodeLabel].projected.push(pdfs);\n      });\n    });\n    //  root  nodeEdgeNodeLabel  nodeLabel1edgeLabenodeLabel2 \n    var minLabel = this.findMinLabel(root); // line 419\n    if (!minLabel) return;\n    dfsCodeMin.dfsEdgeList.push(new DFSedge(0, 1, minLabel.nodeLabel1, minLabel.edgeLabel, minLabel.nodeLabel2));\n    // line 423\n    var projectIsMin = function projectIsMin(projected) {\n      // right most path\n      var rmpath = dfsCodeMin.buildRmpath();\n      var minNodeLabel = dfsCodeMin.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1;\n      var maxToC = dfsCodeMin.dfsEdgeList[rmpath[0]].toNode; // node id\n      var backwardRoot = {};\n      var flag = false,\n        newTo = 0;\n      var end = directed ? -1 : 0; //  1  0\n      var _loop_1 = function _loop_1(i) {\n        if (flag) return \"break\";\n        // line 435\n        projected.forEach(function (p) {\n          var history = new History(p);\n          var backwardEdge = _this.findBackwardEdge(graph, history.edges[rmpath[i]], history.edges[rmpath[0]], history);\n          if (backwardEdge) {\n            // Line 441\n            if (!backwardRoot[backwardEdge.label]) {\n              backwardRoot[backwardEdge.label] = {\n                projected: [],\n                edgeLabel: backwardEdge.label\n              };\n            }\n            backwardRoot[backwardEdge.label].projected.push({\n              graphId: graph.id,\n              edge: backwardRoot,\n              preNode: p\n            });\n            newTo = dfsCodeMin.dfsEdgeList[rmpath[i]].fromNode;\n            flag = true;\n          }\n        });\n      };\n      for (var i = rmpath.length - 1; i > end; i--) {\n        var state_1 = _loop_1(i);\n        if (state_1 === \"break\") break;\n      }\n      if (flag) {\n        var minBackwardEdgeLabel = _this.findMinLabel(backwardRoot);\n        dfsCodeMin.dfsEdgeList.push(new DFSedge(maxToC, newTo, VACANT_NODE_LABEL, minBackwardEdgeLabel.edgeLabel, VACANT_NODE_LABEL));\n        var idx_1 = dfsCodeMin.dfsEdgeList.length - 1;\n        if (_this.dfsCode.dfsEdgeList[idx_1] !== dfsCodeMin.dfsEdgeList[idx_1]) return false;\n        return projectIsMin(backwardRoot[minBackwardEdgeLabel.edgeLabel].projected);\n      }\n      var forwardRoot = {};\n      flag = false;\n      var newFrom = 0;\n      projected.forEach(function (p) {\n        var history = new History(p);\n        var forwardPureEdges = _this.findForwardPureEdges(graph, history.edges[rmpath[0]], minNodeLabel, history);\n        if (forwardPureEdges.length > 0) {\n          flag = true;\n          newFrom = maxToC;\n          forwardPureEdges.forEach(function (edge) {\n            var key = \"\".concat(edge.label, \"-\").concat(nodeMap[edge.to].label);\n            if (!forwardRoot[key]) forwardRoot[key] = {\n              projected: [],\n              edgeLabel: edge.label,\n              nodeLabel2: nodeMap[edge.to].label\n            };\n            forwardRoot[key].projected.push({\n              graphId: graph.id,\n              edge: edge,\n              preNode: p\n            });\n          });\n        }\n      });\n      var pathLength = rmpath.length;\n      var _loop_2 = function _loop_2(i) {\n        if (flag) return \"break\";\n        var value = rmpath[i];\n        projected.forEach(function (p) {\n          var history = new History(p);\n          var forwardRmpathEdges = _this.findForwardRmpathEdges(graph, history.edges[value], minNodeLabel, history);\n          if (forwardRmpathEdges.length > 0) {\n            flag = true;\n            newFrom = dfsCodeMin.dfsEdgeList[value].fromNode;\n            forwardRmpathEdges.forEach(function (edge) {\n              var key = \"\".concat(edge.label, \"-\").concat(nodeMap[edge.to].label);\n              if (!forwardRoot[key]) forwardRoot[key] = {\n                projected: [],\n                edgeLabel: edge.label,\n                nodeLabel2: nodeMap[edge.to].label\n              };\n              forwardRoot[key].projected.push({\n                graphId: graph.id,\n                edge: edge,\n                preNode: p\n              });\n            });\n          }\n        });\n      };\n      for (var i = 0; i < pathLength; i++) {\n        var state_2 = _loop_2(i);\n        if (state_2 === \"break\") break;\n      }\n      if (!flag) return true;\n      var forwardMinEdgeNodeLabel = _this.findMinLabel(forwardRoot);\n      dfsCodeMin.dfsEdgeList.push(new DFSedge(newFrom, maxToC + 1, VACANT_NODE_LABEL, forwardMinEdgeNodeLabel.edgeLabel, forwardMinEdgeNodeLabel.nodeLabel2));\n      var idx = dfsCodeMin.dfsEdgeList.length - 1;\n      if (dfsCode.dfsEdgeList[idx] !== dfsCodeMin.dfsEdgeList[idx]) return false;\n      return projectIsMin(forwardRoot[\"\".concat(forwardMinEdgeNodeLabel.edgeLabel, \"-\").concat(forwardMinEdgeNodeLabel.nodeLabel2)].projected);\n    };\n    var key = \"\".concat(minLabel.nodeLabel1, \"-\").concat(minLabel.edgeLabel, \"-\").concat(minLabel.nodeLabel2);\n    return projectIsMin(root[key].projected);\n  };\n  GSpan.prototype.report = function () {\n    if (this.dfsCode.getNodeNum() < this.minNodeNum) return;\n    this.counter++;\n    var graph = this.dfsCode.toGraph(this.counter, this.directed);\n    this.frequentSubgraphs.push(clone(graph));\n  };\n  GSpan.prototype.subGraphMining = function (projected) {\n    var _this = this;\n    var support = this.getSupport(projected);\n    if (support < this.minSupport) return;\n    if (!this.isMin()) return;\n    this.report();\n    var nodeNum = this.dfsCode.getNodeNum();\n    var rmpath = this.dfsCode.buildRmpath();\n    var maxToC = this.dfsCode.dfsEdgeList[rmpath[0]].toNode;\n    var minNodeLabel = this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1;\n    var forwardRoot = {};\n    var backwardRoot = {};\n    projected.forEach(function (p) {\n      var graph = _this.graphs[p.graphId];\n      var nodeMap = graph.nodeMap;\n      var history = new History(p);\n      // backward Line 526\n      for (var i = rmpath.length - 1; i >= 0; i--) {\n        var backwardEdge = _this.findBackwardEdge(graph, history.edges[rmpath[i]], history.edges[rmpath[0]], history);\n        if (backwardEdge) {\n          var key = \"\".concat(_this.dfsCode.dfsEdgeList[rmpath[i]].fromNode, \"-\").concat(backwardEdge.label);\n          if (!backwardRoot[key]) backwardRoot[key] = {\n            projected: [],\n            toNodeId: _this.dfsCode.dfsEdgeList[rmpath[i]].fromNode,\n            edgeLabel: backwardEdge.label\n          };\n          backwardRoot[key].projected.push({\n            graphId: p.graphId,\n            edge: backwardEdge,\n            preNode: p\n          });\n        }\n      }\n      // pure forward\n      if (nodeNum >= _this.maxNodeNum) return;\n      var forwardPureEdges = _this.findForwardPureEdges(graph, history.edges[rmpath[0]], minNodeLabel, history);\n      forwardPureEdges.forEach(function (edge) {\n        var key = \"\".concat(maxToC, \"-\").concat(edge.label, \"-\").concat(nodeMap[edge.to].label);\n        if (!forwardRoot[key]) forwardRoot[key] = {\n          projected: [],\n          fromNodeId: maxToC,\n          edgeLabel: edge.label,\n          nodeLabel2: nodeMap[edge.to].label\n        };\n        forwardRoot[key].projected.push({\n          graphId: p.graphId,\n          edge: edge,\n          preNode: p\n        });\n      });\n      var _loop_3 = function _loop_3(i) {\n        var forwardRmpathEdges = _this.findForwardRmpathEdges(graph, history.edges[rmpath[i]], minNodeLabel, history);\n        forwardRmpathEdges.forEach(function (edge) {\n          var key = \"\".concat(_this.dfsCode.dfsEdgeList[rmpath[i]].fromNode, \"-\").concat(edge.label, \"-\").concat(nodeMap[edge.to].label);\n          if (!forwardRoot[key]) forwardRoot[key] = {\n            projected: [],\n            fromNodeId: _this.dfsCode.dfsEdgeList[rmpath[i]].fromNode,\n            edgeLabel: edge.label,\n            nodeLabel2: nodeMap[edge.to].label\n          };\n          forwardRoot[key].projected.push({\n            graphId: p.graphId,\n            edge: edge,\n            preNode: p\n          });\n        });\n      };\n      // rmpath forward\n      for (var i = 0; i < rmpath.length; i++) {\n        _loop_3(i);\n      }\n    });\n    // backward\n    Object.keys(backwardRoot).forEach(function (key) {\n      var _a = backwardRoot[key],\n        toNodeId = _a.toNodeId,\n        edgeLabel = _a.edgeLabel;\n      _this.dfsCode.dfsEdgeList.push(new DFSedge(maxToC, toNodeId, \"-1\", edgeLabel, \"-1\"));\n      _this.subGraphMining(backwardRoot[key].projected);\n      _this.dfsCode.dfsEdgeList.pop();\n    });\n    // forward\n    Object.keys(forwardRoot).forEach(function (key) {\n      var _a = forwardRoot[key],\n        fromNodeId = _a.fromNodeId,\n        edgeLabel = _a.edgeLabel,\n        nodeLabel2 = _a.nodeLabel2;\n      _this.dfsCode.dfsEdgeList.push(new DFSedge(fromNodeId, maxToC + 1, VACANT_NODE_LABEL, edgeLabel, nodeLabel2));\n      _this.subGraphMining(forwardRoot[key].projected);\n      _this.dfsCode.dfsEdgeList.pop();\n    });\n  };\n  GSpan.prototype.generate1EdgeFrequentSubGraphs = function () {\n    var graphs = this.graphs;\n    var directed = this.directed;\n    var minSupport = this.minSupport;\n    var frequentSize1Subgraphs = this.frequentSize1Subgraphs;\n    var nodeLabelCounter = {},\n      nodeEdgeNodeCounter = {};\n    //  mapkey  graphKey-node\n    var nodeLableCounted = {};\n    //  mapkey  graphKey-fromNode-edge-toNode\n    var nodeEdgeNodeLabelCounted = {};\n    Object.keys(graphs).forEach(function (key) {\n      // Line 271\n      var graph = graphs[key];\n      var nodeMap = graph.nodeMap;\n      //    label  nodeLableCounted\n      graph.nodes.forEach(function (node, i) {\n        // Line 272\n        var nodeLabel = node.label;\n        var graphNodeKey = \"\".concat(key, \"-\").concat(nodeLabel);\n        if (!nodeLableCounted[graphNodeKey]) {\n          var counter = nodeLabelCounter[nodeLabel] || 0;\n          counter++;\n          nodeLabelCounter[nodeLabel] = counter;\n        }\n        nodeLableCounted[graphNodeKey] = {\n          graphKey: key,\n          label: nodeLabel\n        };\n        //  nodeEdgeNodeLabelCounted. Line 276\n        node.edges.forEach(function (edge) {\n          var nodeLabel1 = nodeLabel;\n          var nodeLabel2 = nodeMap[edge.to].label;\n          if (!directed && nodeLabel1 > nodeLabel2) {\n            var tmp = nodeLabel2;\n            nodeLabel2 = nodeLabel1;\n            nodeLabel1 = tmp;\n          }\n          var edgeLabel = edge.label;\n          var graphNodeEdgeNodeKey = \"\".concat(key, \"-\").concat(nodeLabel1, \"-\").concat(edgeLabel, \"-\").concat(nodeLabel2);\n          var nodeEdgeNodeKey = \"\".concat(nodeLabel1, \"-\").concat(edgeLabel, \"-\").concat(nodeLabel2);\n          if (!nodeEdgeNodeCounter[nodeEdgeNodeKey]) {\n            var counter = nodeEdgeNodeCounter[nodeEdgeNodeKey] || 0;\n            counter++;\n            nodeEdgeNodeCounter[nodeEdgeNodeKey] = counter; // Line281\n          }\n\n          nodeEdgeNodeLabelCounted[graphNodeEdgeNodeKey] = {\n            graphId: key,\n            nodeLabel1: nodeLabel1,\n            edgeLabel: edgeLabel,\n            nodeLabel2: nodeLabel2\n          };\n        });\n      });\n    });\n    // \n    Object.keys(nodeLabelCounter).forEach(function (label) {\n      var count = nodeLabelCounter[label];\n      if (count < minSupport) return;\n      var g = {\n        nodes: [],\n        edges: []\n      };\n      g.nodes.push({\n        id: \"0\",\n        label: label\n      });\n      frequentSize1Subgraphs.push(g);\n      // if (minNodeNum <= 1) reportSize1 TODO\n    });\n\n    return frequentSize1Subgraphs;\n  };\n  GSpan.prototype.run = function () {\n    var _this = this;\n    // -------- , _generate_1edge_frequent_subgraphs-------\n    this.frequentSize1Subgraphs = this.generate1EdgeFrequentSubGraphs();\n    if (this.maxNodeNum < 2) return;\n    var graphs = this.graphs;\n    var directed = this.directed;\n    // PDFS  map Line 304\n    var root = {};\n    Object.keys(graphs).forEach(function (graphId) {\n      var graph = graphs[graphId];\n      var nodeMap = graph.nodeMap;\n      // Line 306\n      graph.nodes.forEach(function (node) {\n        var forwardRootEdges = _this.findForwardRootEdges(graph, node);\n        // Line 308\n        forwardRootEdges.forEach(function (edge) {\n          var toNode = nodeMap[edge.to];\n          var nodeEdgeNodeLabel = \"\".concat(node.label, \"-\").concat(edge.label, \"-\").concat(toNode.label);\n          if (!root[nodeEdgeNodeLabel]) root[nodeEdgeNodeLabel] = {\n            projected: [],\n            nodeLabel1: node.label,\n            edgeLabel: edge.label,\n            nodeLabel2: toNode.label\n          };\n          var pdfs = {\n            graphId: graphId,\n            edge: edge,\n            preNode: null\n          };\n          root[nodeEdgeNodeLabel].projected.push(pdfs);\n        });\n      });\n    });\n    // Line 313\n    Object.keys(root).forEach(function (nodeEdgeNodeLabel) {\n      var _a = root[nodeEdgeNodeLabel],\n        projected = _a.projected,\n        nodeLabel1 = _a.nodeLabel1,\n        edgeLabel = _a.edgeLabel,\n        nodeLabel2 = _a.nodeLabel2;\n      _this.dfsCode.dfsEdgeList.push(new DFSedge(0, 1, nodeLabel1, edgeLabel, nodeLabel2));\n      _this.subGraphMining(projected);\n      _this.dfsCode.dfsEdgeList.pop();\n    });\n  };\n  return GSpan;\n}();\nvar formatGraphs = function formatGraphs(graphs, directed, nodeLabelProp, edgeLabelProp) {\n  var result = {};\n  Object.keys(graphs).forEach(function (key, i) {\n    var graph = graphs[key];\n    var fGraph = new Graph(i, true, directed);\n    var nodeIdxMap = {};\n    graph.nodes.forEach(function (node, j) {\n      fGraph.addNode(j, node[nodeLabelProp]);\n      nodeIdxMap[node.id] = j;\n    });\n    graph.edges.forEach(function (edge, k) {\n      var sourceIdx = nodeIdxMap[edge.source];\n      var targetIdx = nodeIdxMap[edge.target];\n      fGraph.addEdge(-1, sourceIdx, targetIdx, edge[edgeLabelProp]);\n    });\n    if (fGraph && fGraph.getNodeNum()) result[fGraph.id] = fGraph;\n  });\n  return result;\n};\nvar toGraphDatas = function toGraphDatas(graphs, nodeLabelProp, edgeLabelProp) {\n  var result = [];\n  graphs.forEach(function (graph) {\n    var graphData = {\n      nodes: [],\n      edges: []\n    };\n    graph.nodes.forEach(function (node) {\n      var _a;\n      graphData.nodes.push((_a = {\n        id: \"\".concat(node.id)\n      }, _a[nodeLabelProp] = node.label, _a));\n    });\n    graph.edges.forEach(function (edge) {\n      var _a;\n      graphData.edges.push((_a = {\n        source: \"\".concat(edge.from),\n        target: \"\".concat(edge.to)\n      }, _a[edgeLabelProp] = edge.label, _a));\n    });\n    result.push(graphData);\n  });\n  return result;\n};\nvar DEFAULT_LABEL_NAME = \"cluster\";\n/**\n * gSpan frequent graph mining\n * @param params \n */\nvar gSpan = function gSpan(params) {\n  // -------  GraphData  map  -------\n  var graphs = params.graphs,\n    _a = params.directed,\n    directed = _a === void 0 ? false : _a,\n    _b = params.nodeLabelProp,\n    nodeLabelProp = _b === void 0 ? DEFAULT_LABEL_NAME : _b,\n    _c = params.edgeLabelProp,\n    edgeLabelProp = _c === void 0 ? DEFAULT_LABEL_NAME : _c;\n  var formattedGraphs = formatGraphs(graphs, directed, nodeLabelProp, edgeLabelProp);\n  var minSupport = params.minSupport,\n    maxNodeNum = params.maxNodeNum,\n    minNodeNum = params.minNodeNum,\n    verbose = params.verbose,\n    top = params.top;\n  // -------  -------\n  var algoParams = {\n    graphs: formattedGraphs,\n    minSupport: minSupport,\n    maxNodeNum: maxNodeNum,\n    minNodeNum: minNodeNum,\n    top: top,\n    verbose: verbose,\n    directed: directed\n  };\n  var calculator = new GSpan(algoParams);\n  calculator.run();\n  var result = toGraphDatas(calculator.frequentSubgraphs, nodeLabelProp, edgeLabelProp);\n  return result;\n};\nexport default gSpan;", "import LinkedList from './linked-list';\nvar Stack = /** @class */function () {\n  function Stack(maxStep) {\n    if (maxStep === void 0) {\n      maxStep = 10;\n    }\n    this.linkedList = new LinkedList();\n    this.maxStep = maxStep;\n  }\n  Object.defineProperty(Stack.prototype, \"length\", {\n    get: function get() {\n      return this.linkedList.toArray().length;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  /**\n   * \n   */\n  Stack.prototype.isEmpty = function () {\n    return !this.linkedList.head;\n  };\n  /**\n   * \n   */\n  Stack.prototype.isMaxStack = function () {\n    return this.toArray().length >= this.maxStep;\n  };\n  /**\n   * \n   */\n  Stack.prototype.peek = function () {\n    if (this.isEmpty()) {\n      return null;\n    }\n    // \n    return this.linkedList.head.value;\n  };\n  Stack.prototype.push = function (value) {\n    this.linkedList.prepend(value);\n    if (this.length > this.maxStep) {\n      this.linkedList.deleteTail();\n    }\n  };\n  Stack.prototype.pop = function () {\n    var removeHead = this.linkedList.deleteHead();\n    return removeHead ? removeHead.value : null;\n  };\n  Stack.prototype.toArray = function () {\n    return this.linkedList.toArray().map(function (node) {\n      return node.value;\n    });\n  };\n  Stack.prototype.clear = function () {\n    while (!this.isEmpty()) {\n      this.pop();\n    }\n  };\n  return Stack;\n}();\nexport default Stack;", "import type { ComboData, EdgeData, GraphData, NodeData } from '../spec';\nimport type { DataID, ID } from '../types';\nimport { format } from './print';\n\n/**\n * <zh/> //Combo  ID\n *\n * <en/> get the id of node/edge/combo\n * @param data - <zh/> //Combo  | <en/> data of node/edge/combo\n * @returns <zh/> //Combo  ID | <en/> ID of node/edge/combo\n */\nexport function idOf(data: Partial<NodeData | EdgeData | ComboData>): ID {\n  if (data.id !== undefined) return data.id;\n  if (data.source !== undefined && data.target !== undefined) return `${data.source}-${data.target}`;\n\n  throw new Error(format('The datum does not have available id.'));\n}\n\n/**\n * <zh/> /Combo  ID\n *\n * <en/> get the parent id of node/combo\n * @param data - <zh/> /Combo  | <en/> data of node/combo\n * @returns <zh/> /Combo  ID | <en/> parent id of node/combo\n */\nexport function parentIdOf(data: Partial<NodeData | ComboData>) {\n  return data.combo;\n}\n\nexport function idsOf(data: GraphData, flat: true): ID[];\nexport function idsOf(data: GraphData, flat: false): DataID;\n/**\n * <zh/> //Combo  ID\n *\n * <en/> Get the IDs of all nodes/edges/combos in the graph data\n * @param data - <zh/>  | <en/> graph data\n * @param flat - <zh/>  | <en/> Whether to return flat\n * @returns - <zh/>  ID  | <en/> Returns an array of element IDs\n */\nexport function idsOf(data: GraphData, flat: boolean): ID[] | DataID {\n  const ids = {\n    nodes: (data.nodes || []).map(idOf),\n    edges: (data.edges || []).map(idOf),\n    combos: (data.combos || []).map(idOf),\n  };\n  return flat ? Object.values(ids).flat() : ids;\n}\n", "import { findShortestPath, pageRank } from '@antv/algorithm';\nimport type { EdgeData, GraphData } from '../spec';\nimport type { EdgeDirection, ID, NodeCentralityOptions } from '../types';\nimport { idOf } from './id';\n\nexport type CentralityResult = Map<ID, number>;\n\nexport const getNodeCentralities = (\n  graphData: GraphData,\n  getRelatedEdgesData: (id: ID, direction?: EdgeDirection) => EdgeData[],\n  centrality: NodeCentralityOptions,\n) => {\n  switch (centrality.type) {\n    case 'degree': {\n      const centralityResult = new Map<ID, number>();\n      graphData.nodes?.forEach((node) => {\n        const degree = getRelatedEdgesData(idOf(node), centrality.direction).length;\n        centralityResult.set(idOf(node), degree);\n      });\n      return centralityResult;\n    }\n    case 'betweenness':\n      return computeNodeBetweennessCentrality(graphData, centrality.directed, centrality.weightPropertyName);\n    case 'closeness':\n      return computeNodeClosenessCentrality(graphData, centrality.directed, centrality.weightPropertyName);\n    case 'eigenvector':\n      return computeNodeEigenvectorCentrality(graphData, centrality.directed);\n    case 'pagerank':\n      return computeNodePageRankCentrality(graphData, centrality.epsilon, centrality.linkProb);\n    default:\n      return initCentralityResult(graphData);\n  }\n};\n\nexport const initCentralityResult = (graphData: GraphData): CentralityResult => {\n  const centralityResult = new Map<ID, number>();\n  graphData.nodes?.forEach((node) => {\n    centralityResult.set(idOf(node), 0);\n  });\n  return centralityResult;\n};\n\n/**\n * <zh/> \n *\n * <en/> Calculate the betweenness centrality for each node in the graph\n * @param graphData - <zh/>  | <en/>Graph data\n * @param directed - <zh/>  | <en/>Whether the graph is directed\n * @param weightPropertyName - <zh/>  | <en/>The weight property name of the edge\n * @returns <zh/>  | <en/>The betweenness centrality for each node\n */\nexport const computeNodeBetweennessCentrality = (\n  graphData: GraphData,\n  directed?: boolean,\n  weightPropertyName?: string,\n): CentralityResult => {\n  const centralityResult = initCentralityResult(graphData);\n  const { nodes = [] } = graphData;\n  nodes.forEach((source) => {\n    nodes.forEach((target) => {\n      if (source !== target) {\n        const { allPath } = findShortestPath(graphData, idOf(source), idOf(target), directed, weightPropertyName);\n        const pathCount = allPath.length;\n        (allPath as ID[][]).flat().forEach((nodeId) => {\n          if (nodeId !== idOf(source) && nodeId !== idOf(target)) {\n            centralityResult.set(nodeId, centralityResult.get(nodeId)! + 1 / pathCount);\n          }\n        });\n      }\n    });\n  });\n  return centralityResult;\n};\n\n/**\n * <zh/> \n *\n * <en/> Calculate the closeness centrality for each node in the graph\n * @param graphData - <zh/>  | <en/>Graph data\n * @param directed - <zh/>  | <en/>Whether the graph is directed\n * @param weightPropertyName - <zh/>  | <en/>The weight property name of the edge\n * @returns <zh/>  | <en/>The closeness centrality for each node\n */\nexport const computeNodeClosenessCentrality = (\n  graphData: GraphData,\n  directed?: boolean,\n  weightPropertyName?: string,\n): CentralityResult => {\n  const centralityResult = new Map<ID, number>();\n  const { nodes = [] } = graphData;\n  nodes.forEach((source) => {\n    const totalLength = nodes.reduce((acc, target) => {\n      if (source !== target) {\n        const { length } = findShortestPath(graphData, idOf(source), idOf(target), directed, weightPropertyName);\n        acc += length;\n      }\n      return acc;\n    }, 0);\n    centralityResult.set(idOf(source), 1 / totalLength);\n  });\n  return centralityResult;\n};\n\n/**\n * <zh/>  PageRank \n *\n * <en/> Calculate the PageRank centrality for each node in the graph\n * @param graphData - <zh/>  | <en/>Graph data\n * @param epsilon - <zh/> PageRank  | <en/>The convergence tolerance of the PageRank algorithm\n * @param linkProb - <zh/> PageRank  0.85 | <en/>The damping factor of the PageRank algorithm, which refers to the probability that a user will continue to visit the next node linked to a node at any time, with an empirical value of 0.85\n * @returns <zh/>  PageRank  | <en/>The PageRank centrality for each node\n */\nexport const computeNodePageRankCentrality = (\n  graphData: GraphData,\n  epsilon?: number,\n  linkProb?: number,\n): CentralityResult => {\n  const centralityResult = new Map<ID, number>();\n  const data = pageRank(graphData, epsilon, linkProb);\n  graphData.nodes?.forEach((node) => {\n    centralityResult.set(idOf(node), data[idOf(node)]);\n  });\n  return centralityResult;\n};\n\n/**\n * <zh/> \n *\n * <en/> Calculate the eigenvector centrality for each node in the graph.\n * @param graphData - <zh/>  | <en/>Graph data\n * @param directed - <zh/>  | <en/>Whether the graph is directed\n * @returns  The eigenvector centrality for each node.\n */\nexport const computeNodeEigenvectorCentrality = (graphData: GraphData, directed?: boolean): CentralityResult => {\n  const { nodes = [] } = graphData;\n  const adjacencyMatrix = createAdjacencyMatrix(graphData, directed);\n  const eigenvector = powerIteration(adjacencyMatrix, nodes.length);\n\n  const centralityResult = new Map<ID, number>();\n  nodes.forEach((node, index) => {\n    centralityResult.set(idOf(node), eigenvector[index]);\n  });\n\n  return centralityResult;\n};\n\n/**\n * <zh/> \n *\n * <en/> Create the adjacency matrix for the graph.\n * @param graphData - <zh/>  | <en/>Graph data\n * @param directed - <zh/>  | <en/>Whether the graph is directed\n * @returns <zh/>  | <en/>The adjacency matrix\n */\nexport const createAdjacencyMatrix = (graphData: GraphData, directed?: boolean): number[][] => {\n  const { nodes = [], edges = [] } = graphData;\n  const matrix: number[][] = Array(nodes.length)\n    .fill(null)\n    .map(() => Array(nodes.length).fill(0));\n\n  edges.forEach(({ source, target }) => {\n    const uIndex = nodes.findIndex((node) => idOf(node) === source);\n    const vIndex = nodes.findIndex((node) => idOf(node) === target);\n    if (directed) {\n      matrix[uIndex][vIndex] = 1;\n    } else {\n      matrix[uIndex][vIndex] = 1;\n      matrix[vIndex][uIndex] = 1;\n    }\n  });\n\n  return matrix;\n};\n\n/**\n * <zh/> \n *\n * <en/> Calculate the principal eigenvector using the power iteration method\n * @see https://en.wikipedia.org/wiki/Eigenvalues_and_eigenvectors\n * @param matrix - <zh/>  | <en/> The adjacency matrix\n * @param numNodes - <zh/>  | <en/> The number of nodes\n * @param maxIterations - <zh/>  | <en/> The maximum number of iterations\n * @param tolerance - <zh/>  | <en/> The convergence tolerance\n * @returns <zh/>  | <en/> The principal eigenvector\n */\nconst powerIteration = (matrix: number[][], numNodes: number, maxIterations = 100, tolerance = 1e-6): number[] => {\n  let eigenvector = Array(numNodes).fill(1);\n  let diff = Infinity;\n\n  for (let iter = 0; iter < maxIterations && diff > tolerance; iter++) {\n    const newEigenvector = Array(numNodes).fill(0);\n\n    for (let i = 0; i < numNodes; i++) {\n      for (let j = 0; j < numNodes; j++) {\n        newEigenvector[i] += matrix[i][j] * eigenvector[j];\n      }\n    }\n\n    const norm = Math.sqrt(newEigenvector.reduce((sum, val) => sum + val * val, 0));\n    for (let i = 0; i < numNodes; i++) {\n      newEigenvector[i] /= norm;\n    }\n\n    diff = Math.sqrt(newEigenvector.reduce((sum, val, index) => sum + (val - eigenvector[index]) * val, 0));\n    eigenvector = newEigenvector;\n  }\n\n  return eigenvector;\n};\n", "import { isEqual } from '@antv/util';\n\n/**\n * <zh/> \n *\n * <en/> compare the difference between two arrays\n * @param original - <zh/>  | <en/> original array\n * @param modified - <zh/>  | <en/> modified array\n * @param key - <zh/>  key | <en/> key to compare\n * @param comparator - <zh/>  | <en/> compare function\n * @returns <zh/>  | <en/> array diff\n */\nexport function arrayDiff<T>(\n  original: T[],\n  modified: T[],\n  key: (d: T) => string | number,\n  comparator: (a?: T, b?: T) => boolean = isEqual,\n) {\n  const originalMap = new Map(original.map((d) => [key(d), d]));\n  const modifiedMap = new Map(modified.map((d) => [key(d), d]));\n\n  const originalSet = new Set(originalMap.keys());\n  const modifiedSet = new Set(modifiedMap.keys());\n\n  const enter: T[] = [];\n  const update: T[] = [];\n  const exit: T[] = [];\n  const keep: T[] = [];\n\n  modifiedSet.forEach((key) => {\n    if (originalSet.has(key)) {\n      if (!comparator(originalMap.get(key), modifiedMap.get(key))) {\n        update.push(modifiedMap.get(key)!);\n      } else {\n        keep.push(modifiedMap.get(key)!);\n      }\n    } else {\n      enter.push(modifiedMap.get(key)!);\n    }\n  });\n\n  originalSet.forEach((key) => {\n    if (!modifiedSet.has(key)) {\n      exit.push(originalMap.get(key)!);\n    }\n  });\n\n  return { enter, exit, keep, update };\n}\n", "import type { BaseStyleProps, DisplayObject } from '@antv/g';\n\n/**\n * <zh/> \n *\n * <en/> Set the visibility of the shape instance\n * @param shape - <zh/>  | <en/> shape instance\n * @param value - <zh/>  | <en/> visibility\n * @param filter - <zh/>  | <en/> Filter out the shapes that need to set visibility\n * @remarks\n * <zh/>  enableCSSParsing  false \n *\n * <en/> After setting enableCSSParsing to false, the compound shape cannot inherit the parent attribute, so the same visibility needs to be applied to all child shapes\n */\nexport function setVisibility(\n  shape: DisplayObject,\n  value: BaseStyleProps['visibility'],\n  filter?: (shape: DisplayObject) => boolean,\n) {\n  const callback = (node: DisplayObject) => {\n    if (filter && !filter(node)) return;\n    node.style.visibility = value;\n  };\n\n  shape.forEach((node) => {\n    callback(node as DisplayObject);\n  });\n}\n", "import type { STDExtensionOption } from '../registry/extension/types';\nimport type { Graph } from '../runtime/graph';\nimport type { TransformOptions } from '../spec/transform';\n\n/**\n * <zh/> \n *\n * <en/> Convert extension options to standard format\n * @param graph - <zh/>  <en/> graph instance\n * @param category - <zh/>  <en/> extension type\n * @param extensions - <zh/>  <en/> extension options\n * @returns <zh/>  <en/> Standard extension options\n */\nexport function parseExtensions(graph: Graph, category: string, extensions: TransformOptions): STDExtensionOption[] {\n  const counter: Record<string, number> = {};\n\n  const getKey = (type: string) => {\n    if (!(type in counter)) counter[type] = 0;\n    return `${category}-${type}-${counter[type]++}`;\n  };\n\n  return extensions.map((extension) => {\n    if (typeof extension === 'string') {\n      return { type: extension, key: getKey(extension) };\n    }\n    if (typeof extension === 'function') {\n      return extension.call(graph);\n    }\n\n    if (extension.key) return extension;\n    return { ...extension, key: getKey(extension.type!) };\n  }) as STDExtensionOption[];\n}\n", "import type EventEmitter from '@antv/event-emitter';\nimport type { Graph } from '../../runtime/graph';\nimport type { RuntimeContext } from '../../runtime/types';\nimport type { IEvent } from '../../types';\nimport { arrayDiff } from '../../utils/diff';\nimport { parseExtensions } from '../../utils/extension';\nimport { print } from '../../utils/print';\nimport { getExtension } from '../get';\nimport type { STDExtensionOption } from './types';\n\nexport abstract class ExtensionController<E extends BaseExtension<any>> {\n  protected context: RuntimeContext;\n\n  protected extensions: STDExtensionOption[] = [];\n\n  protected extensionMap: Record<string, E> = {};\n\n  public abstract category: 'plugin' | 'behavior' | 'transform';\n\n  constructor(context: RuntimeContext) {\n    this.context = context;\n  }\n\n  public setExtensions(\n    extensions: (\n      | string\n      | { type: string; [keys: string]: unknown }\n      | ((this: Graph) => { type: string; [keys: string]: unknown })\n    )[],\n  ) {\n    const stdExtensions = parseExtensions(this.context.graph, this.category, extensions) as STDExtensionOption[];\n    const { enter, update, exit, keep } = arrayDiff(this.extensions, stdExtensions, (extension) => extension.key);\n\n    this.createExtensions(enter);\n    this.updateExtensions([...update, ...keep]);\n    this.destroyExtensions(exit);\n\n    this.extensions = stdExtensions;\n  }\n\n  protected createExtension(extension: STDExtensionOption) {\n    const { category } = this;\n\n    const { key, type } = extension;\n    const Ctor = getExtension(category, type);\n    if (!Ctor) return print.warn(`The extension ${type} of ${category} is not registered.`);\n\n    const instance = new Ctor(this.context, extension);\n    instance.initialized = true;\n    this.extensionMap[key] = instance as E;\n  }\n\n  protected createExtensions(extensions: STDExtensionOption[]) {\n    extensions.forEach((extension) => this.createExtension(extension));\n  }\n\n  protected updateExtension(extension: STDExtensionOption) {\n    const { key } = extension;\n    const instance = this.extensionMap[key];\n    if (instance) {\n      instance.update(extension);\n    }\n  }\n\n  protected updateExtensions(extensions: STDExtensionOption[]) {\n    extensions.forEach((extension) => this.updateExtension(extension));\n  }\n\n  protected destroyExtension(key: string) {\n    const instance = this.extensionMap[key];\n\n    if (!instance) return;\n    if (instance.initialized && !instance.destroyed) {\n      instance.destroy();\n    }\n\n    delete this.extensionMap[key];\n  }\n\n  protected destroyExtensions(extensions: STDExtensionOption[]) {\n    extensions.forEach(({ key }) => this.destroyExtension(key));\n  }\n\n  public destroy() {\n    this.destroyExtensions(this.extensions);\n    // @ts-expect-error force delete\n    this.context = {};\n    this.extensions = [];\n    this.extensionMap = {};\n  }\n}\n\n/**\n * <zh/> \n *\n * <en/> Base class for extension instance\n */\nexport class BaseExtension<T extends { type: string; key?: string; [key: string]: unknown }> {\n  protected context: RuntimeContext;\n\n  protected options: Required<T>;\n\n  protected events: [EventEmitter | HTMLElement, string, (event: IEvent) => void][] = [];\n\n  public initialized = false;\n\n  public destroyed = false;\n\n  constructor(context: RuntimeContext, options: Partial<T>) {\n    this.context = context;\n    this.options = options as Required<T>;\n  }\n\n  public update(options: Partial<T>) {\n    this.options = Object.assign(this.options, options);\n  }\n\n  public destroy() {\n    // @ts-expect-error force delete\n    this.context = {};\n    // @ts-expect-error force delete\n    this.options = {};\n\n    this.destroyed = true;\n  }\n}\n", "import { BaseExtension } from '../registry/extension';\nimport type { CustomBehaviorOption } from '../spec/behavior';\n\n/**\n * <zh/> \n *\n * <en/> Base options for behaviors\n */\nexport interface BaseBehaviorOptions extends CustomBehaviorOption {}\n\n/**\n * <zh/> \n *\n * <en/> Base class for behaviors\n */\nexport abstract class BaseBehavior<T extends BaseBehaviorOptions = BaseBehaviorOptions> extends BaseExtension<T> {}\n", "import { AABB } from '@antv/g';\nimport { groupBy, isFunction, throttle } from '@antv/util';\nimport { GraphEvent } from '../constants';\nimport type { RuntimeContext } from '../runtime/types';\nimport type { ComboData, EdgeData, NodeData } from '../spec';\nimport type { Element, ElementDatum, ID, IEvent, Node, NodeCentralityOptions, Padding } from '../types';\nimport { getExpandedBBox } from '../utils/bbox';\nimport { getNodeCentralities } from '../utils/centrality';\nimport { arrayDiff } from '../utils/diff';\nimport { setVisibility } from '../utils/visibility';\nimport type { BaseBehaviorOptions } from './base-behavior';\nimport { BaseBehavior } from './base-behavior';\n\n/**\n * <zh/> \n *\n * <en/> Auto Adapt Label Options\n */\nexport interface AutoAdaptLabelOptions extends BaseBehaviorOptions {\n  /**\n   * <zh/> \n   *\n   * <en/> Whether to enable\n   * @defaultValue `true`\n   */\n  enable?: boolean | ((event: IEvent) => boolean);\n  /**\n   * <zh/>  combo > node > edge\n   *\n   * <en/> Sort elements by their importance in descending order; elements with higher importance have higher label display priority; usually combo > node > edge\n   */\n  sort?: (elementA: ElementDatum, elementB: ElementDatum) => -1 | 0 | 1;\n  /**\n   * <zh/>  `sort` `sortNode` \n   *\n   * <en/> Sort nodes by importance in descending order; nodes with higher importance have higher label display priority. Several centrality algorithms are built in, and custom sorting functions can also be defined. It should be noted that if `sort` is set, `sortNode` will not take effect\n   * @defaultValue { type: 'degree' }\n   */\n  sortNode?: NodeCentralityOptions | ((nodeA: NodeData, nodeB: NodeData) => -1 | 0 | 1);\n  /**\n   * <zh/>  `sort` `sortEdge` \n   *\n   * <en/> Sort edges by importance in descending order; edges with higher importance have higher label display priority. By default, they are sorted according to the data. It should be noted that if `sort` is set, `sortEdge` will not take effect\n   */\n  sortEdge?: (edgeA: EdgeData, edgeB: EdgeData) => -1 | 0 | 1;\n  /**\n   * <zh/>  `sort` `sortCombo` \n   *\n   * <en/> Sort combos by importance in descending order; combos with higher importance have higher label display priority. By default, they are sorted according to the data. It should be noted that if `sort` is set, `sortCombo` will not take effect\n   */\n  sortCombo?: (comboA: ComboData, comboB: ComboData) => -1 | 0 | 1;\n  /**\n   * <zh/> \n   *\n   * <en/> Set the padding of the label to determine whether the label overlaps to avoid the label being displayed too densely\n   * @defaultValue 0\n   */\n  padding?: Padding;\n  /**\n   * <zh/> \n   *\n   * <en/> Throttle time\n   * @defaultValue 32\n   */\n  throttle?: number;\n}\n\n/**\n * <zh/> \n *\n * <en/> Auto Adapt Label\n * @remarks\n * <zh/> \n *\n * <en/ >Label Adaptive Display is a dynamic label management strategy designed to intelligently adjust which labels should be shown or hidden based on factors such as the spatial allocation of the current viewport and node importance. By analyzing the visible area in real-time, it ensures that users receive the most relevant and clear information display in various interactive scenarios, while avoiding visual overload and information redundancy.\n */\nexport class AutoAdaptLabel extends BaseBehavior<AutoAdaptLabelOptions> {\n  static defaultOptions: Partial<AutoAdaptLabelOptions> = {\n    enable: true,\n    throttle: 100,\n    padding: 0,\n    sortNode: { type: 'degree' },\n  };\n\n  constructor(context: RuntimeContext, options: AutoAdaptLabelOptions) {\n    super(context, Object.assign({}, AutoAdaptLabel.defaultOptions, options));\n    this.bindEvents();\n  }\n\n  public update(options: Partial<AutoAdaptLabelOptions>): void {\n    this.unbindEvents();\n    super.update(options);\n    this.bindEvents();\n    this.onToggleVisibility({} as IEvent);\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Check whether the current bounding box has enough space to display; if it overlaps with the displayed bounding box, it will not be displayed\n   * @param bbox - bbox\n   * @param bboxes - occupied bboxes which are already shown\n   * @returns whether the bbox is overlapping with the bboxes or outside the viewpointBounds\n   */\n  private isOverlapping = (bbox: AABB, bboxes: AABB[]) => {\n    return bboxes.some((b) => bbox.intersects(b));\n  };\n\n  private occupiedBounds: AABB[] = [];\n\n  private detectLabelCollision = (elements: Element[]): { show: Element[]; hide: Element[] } => {\n    const viewport = this.context.viewport!;\n    const res: { show: Element[]; hide: Element[] } = { show: [], hide: [] };\n    this.occupiedBounds = [];\n\n    elements.forEach((element) => {\n      const labelBounds = element.getShape('label').getRenderBounds();\n      if (viewport.isInViewport(labelBounds, true) && !this.isOverlapping(labelBounds, this.occupiedBounds)) {\n        res.show.push(element);\n        this.occupiedBounds.push(getExpandedBBox(labelBounds, this.options.padding));\n      } else {\n        res.hide.push(element);\n      }\n    });\n    return res;\n  };\n\n  private getLabelElements(): Element[] {\n    // @ts-expect-error access private property\n    const { elementMap } = this.context.element;\n    const elements: Element[] = [];\n\n    for (const key in elementMap) {\n      const element = elementMap[key];\n      if (element.isVisible() && element.getShape('label')) {\n        elements.push(element);\n      }\n    }\n\n    return elements;\n  }\n\n  private getLabelElementsInView(): Element[] {\n    const viewport = this.context.viewport!;\n    return this.getLabelElements().filter((node) => viewport.isInViewport(node.getShape('key').getRenderBounds()));\n  }\n\n  private hideLabelIfExceedViewport = (prevElementsInView: Element[], currentElementsInView: Element[]) => {\n    const { exit } = arrayDiff<Element>(prevElementsInView, currentElementsInView, (d) => d.id);\n    exit?.forEach(this.hideLabel);\n  };\n\n  private nodeCentralities: Map<ID, number> = new Map();\n\n  private sortNodesByCentrality = (nodes: Node[], centrality: NodeCentralityOptions) => {\n    const { model } = this.context;\n    const graphData = model.getData();\n    const getRelatedEdgesData = model.getRelatedEdgesData.bind(model);\n\n    const nodesWithCentrality = nodes.map((node) => {\n      if (!this.nodeCentralities.has(node.id)) {\n        this.nodeCentralities = getNodeCentralities(graphData, getRelatedEdgesData, centrality);\n      }\n      return { node, centrality: this.nodeCentralities.get(node.id)! };\n    });\n    return nodesWithCentrality.sort((a, b) => b.centrality - a.centrality).map((item) => item.node);\n  };\n\n  protected sortLabelElementsInView = (labelElements: Element[]): Element[] => {\n    const { sort, sortNode, sortCombo, sortEdge } = this.options;\n    const { model } = this.context;\n\n    if (isFunction(sort))\n      return labelElements.sort((a, b) => sort(model.getElementDataById(a.id), model.getElementDataById(b.id)));\n\n    const { node: nodes = [], edge: edges = [], combo: combos = [] } = groupBy(labelElements, (el) => (el as any).type);\n\n    const sortedCombos = isFunction(sortCombo)\n      ? combos.sort((a, b) => sortCombo(...(model.getComboData([a.id, b.id]) as [ComboData, ComboData])))\n      : combos;\n\n    const sortedNodes = isFunction(sortNode)\n      ? nodes.sort((a, b) => sortNode(...(model.getNodeData([a.id, b.id]) as [NodeData, NodeData])))\n      : this.sortNodesByCentrality(nodes as Node[], sortNode);\n\n    const sortedEdges = isFunction(sortEdge)\n      ? edges.sort((a, b) => sortEdge(...(model.getEdgeData([a.id, b.id]) as [EdgeData, EdgeData])))\n      : edges;\n\n    return [...sortedCombos, ...sortedNodes, ...sortedEdges];\n  };\n\n  private labelElementsInView: Element[] = [];\n\n  private isFirstRender = true;\n\n  protected onToggleVisibility = (event: IEvent) => {\n    // @ts-expect-error missing type\n    if (event.data?.stage === 'zIndex') return;\n\n    if (!this.validate(event)) {\n      if (this.hiddenElements.size > 0) {\n        this.hiddenElements.forEach(this.showLabel);\n        this.hiddenElements.clear();\n      }\n      return;\n    }\n\n    const labelElementsInView = this.isFirstRender ? this.getLabelElements() : this.getLabelElementsInView();\n    this.hideLabelIfExceedViewport(this.labelElementsInView, labelElementsInView);\n    this.labelElementsInView = labelElementsInView;\n\n    //  combo > node > edge\n    // Sort elements by their importance in descending order; elements with higher importance have higher label display priority; usually combo > node > edge\n    const sortedElements = this.sortLabelElementsInView(this.labelElementsInView);\n    const { show, hide } = this.detectLabelCollision(sortedElements);\n\n    for (let i = show.length - 1; i >= 0; i--) {\n      this.showLabel(show[i]);\n    }\n    hide.forEach(this.hideLabel);\n  };\n\n  private hiddenElements: Map<ID, Element> = new Map();\n\n  private hideLabel = (element: Element) => {\n    const label = element.getShape('label');\n    if (label) setVisibility(label, 'hidden');\n    this.hiddenElements.set(element.id, element);\n  };\n\n  private showLabel = (element: Element) => {\n    const label = element.getShape('label');\n    if (label) setVisibility(label, 'visible');\n    element.toFront();\n    this.hiddenElements.delete(element.id);\n  };\n\n  protected onTransform = throttle(this.onToggleVisibility, this.options.throttle, { leading: true }) as () => void;\n\n  private enableToggle = true;\n\n  private toggle = (event: IEvent) => {\n    if (!this.enableToggle) return;\n    this.onToggleVisibility(event);\n  };\n\n  private onBeforeRender = () => {\n    this.enableToggle = false;\n  };\n\n  private onAfterRender = (event: IEvent) => {\n    this.onToggleVisibility(event);\n    this.enableToggle = true;\n  };\n\n  private bindEvents() {\n    const { graph } = this.context;\n    graph.on(GraphEvent.BEFORE_RENDER, this.onBeforeRender);\n    graph.on(GraphEvent.AFTER_RENDER, this.onAfterRender);\n    graph.on(GraphEvent.AFTER_DRAW, this.toggle);\n    graph.on(GraphEvent.AFTER_LAYOUT, this.toggle);\n    graph.on(GraphEvent.AFTER_TRANSFORM, this.onTransform);\n  }\n\n  private unbindEvents() {\n    const { graph } = this.context;\n    graph.off(GraphEvent.BEFORE_RENDER, this.onBeforeRender);\n    graph.off(GraphEvent.AFTER_RENDER, this.onAfterRender);\n    graph.off(GraphEvent.AFTER_DRAW, this.toggle);\n    graph.off(GraphEvent.AFTER_LAYOUT, this.toggle);\n    graph.off(GraphEvent.AFTER_TRANSFORM, this.onTransform);\n  }\n\n  private validate(event: IEvent): boolean {\n    if (this.destroyed) return false;\n    const { enable } = this.options;\n    if (isFunction(enable)) return enable(event);\n    return !!enable;\n  }\n\n  public destroy(): void {\n    this.unbindEvents();\n    super.destroy();\n  }\n}\n", "import type { Vector2, Vector3 } from '../types';\nimport { isVector2 } from './is';\n\nconst VECTOR_ZERO: Vector3 = [0, 0, 0];\n\n/**\n * <zh/> \n *\n * <en/> Adds two vectors\n * @param a - <zh/>  | <en/> The first vector\n * @param b - <zh/>  | <en/> The second vector\n * @returns <zh/>  | <en/> The sum of the two vectors\n */\nexport function add(a: Vector2 | Vector3, b: Vector2 | Vector3): Vector2 | Vector3 {\n  return a.map((v, i) => v + b[i]) as Vector2 | Vector3;\n}\n\n/**\n * <zh/> \n *\n * <en/> Subtracts two vectors\n * @param a - <zh/>  | <en/> The first vector\n * @param b - <zh/>  | <en/> The second vector\n * @returns <zh/>  | <en/> The difference of the two vectors\n */\nexport function subtract(a: Vector2 | Vector3, b: Vector2 | Vector3): Vector2 | Vector3 {\n  return a.map((v, i) => v - b[i]) as Vector2 | Vector3;\n}\n\n/**\n * <zh/> \n *\n * <en/> Multiplies two vectors or a vector and a scalar\n * @param a - <zh/>  | <en/> The vector\n * @param b - <zh/>  | <en/> The vector or scalar\n * @returns <zh/>  | <en/> The product of the two vectors or the product of the vector and scalar\n */\nexport function multiply(a: Vector2 | Vector3, b: number | Vector2 | Vector3): Vector2 | Vector3 {\n  if (typeof b === 'number') return a.map((v) => v * b) as Vector2 | Vector3;\n  return a.map((v, i) => v * b[i]) as Vector2 | Vector3;\n}\n\n/**\n * <zh/> \n *\n * <en/> Divides two vectors or a vector and a scalar\n * @param a - <zh/>  | <en/> The vector\n * @param b - <zh/>  | <en/> The vector or scalar\n * @returns <zh/>  | <en/> The quotient of the two vectors or the quotient of the vector and scalar\n */\nexport function divide(a: Vector2 | Vector3, b: number | Vector2 | Vector3): Vector2 | Vector3 {\n  if (typeof b === 'number') return a.map((v) => v / b) as Vector2 | Vector3;\n  return a.map((v, i) => v / b[i]) as Vector2 | Vector3;\n}\n\n/**\n * <zh/> \n *\n * <en/> Calculates the dot product of two vectors\n * @param a - <zh/>  | <en/> The first vector\n * @param b - <zh/>  | <en/> The second vector\n * @returns <zh/>  | <en/> The dot product of the two vectors\n */\nexport function dot(a: Vector2 | Vector3, b: Vector2 | Vector3): number {\n  return (a as number[]).reduce((sum, v, i) => sum + v * b[i], 0);\n}\n\n/**\n * <zh/> \n *\n * <en/> Calculates the cross product of two vectors in three-dimensional Euclidean space\n * @param a - <zh/>  | <en/> The first vector\n * @param b - <zh/>  | <en/> The second vector\n * @returns <zh/>  | <en/> The cross product of the two vectors\n */\nexport function cross(a: Vector2 | Vector3, b: Vector2 | Vector3): Vector3 {\n  const a2 = toVector3(a);\n  const b2 = toVector3(b);\n  return [a2[1] * b2[2] - a2[2] * b2[1], a2[2] * b2[0] - a2[0] * b2[2], a2[0] * b2[1] - a2[1] * b2[0]];\n}\n\n/**\n * <zh/> \n *\n * <en/> Scales a vector by a scalar number\n * @param a  - <zh/>  | <en/> The vector to scale\n * @param s - <zh/>  | <en/> Scale factor\n * @returns <zh/>  | <en/> The scaled vector\n */\nexport function scale(a: Vector2 | Vector3, s: number): Vector2 | Vector3 {\n  return a.map((v) => v * s) as Vector2 | Vector3;\n}\n\n/**\n * <zh/> \n *\n * <en/> Calculates the Euclidean distance between two vectors\n * @param a - <zh/>  | <en/> The first vector\n * @param b - <zh/>  | <en/> The second vector\n * @returns <zh/>  | <en/> The distance between the two vectors\n */\nexport function distance(a: Vector2 | Vector3, b: Vector2 | Vector3): number {\n  return Math.sqrt((a as number[]).reduce((sum, v, i) => sum + (v - b[i] || 0) ** 2, 0));\n}\n\n/**\n * <zh/> \n *\n * <en/> Calculates the Manhattan distance between two vectors\n * @param a - <zh/>  | <en/> The first vector\n * @param b - <zh/>  | <en/> The second vector\n * @returns <zh/>  | <en/> The distance between the two vectors\n */\nexport function manhattanDistance(a: Vector2 | Vector3, b: Vector2 | Vector3): number {\n  return (a as number[]).reduce((sum, v, i) => sum + Math.abs(v - b[i]), 0);\n}\n\n/**\n * <zh/>  1\n *\n * <en/> Normalizes a vector (making its length 1)\n * @param a - <zh/>  | <en/> The vector to normalize\n * @returns <zh/>  | <en/> The normalized vector\n */\nexport function normalize(a: Vector2 | Vector3): Vector2 | Vector3 {\n  const length = (a as number[]).reduce((sum, v) => sum + v ** 2, 0);\n  return a.map((v) => v / Math.sqrt(length)) as Vector2 | Vector3;\n}\n\n/**\n * <zh/> \n *\n * <en/> Get the angle between two vectors\n * @param a - <zh/>  | <en/> The first vector\n * @param b - <zh/>  | <en/> The second vector\n * @param clockwise - <zh/>  | <en/> Whether to calculate the angle in a clockwise direction\n * @returns  <zh/>  | <en/> The angle in radians\n */\nexport function angle(a: Vector2 | Vector3, b: Vector2 | Vector3, clockwise = false): number {\n  const determinant = a[0] * b[1] - a[1] * b[0];\n  let angle = Math.acos(\n    (multiply(a, b) as number[]).reduce((sum: number, v: number) => sum + v, 0) /\n      (distance(a, VECTOR_ZERO) * distance(b, VECTOR_ZERO)),\n  );\n  // If clockwise is true and determinant is negative, adjust the angle\n  if (clockwise && determinant < 0) {\n    angle = 2 * Math.PI - angle;\n  }\n  return angle;\n}\n\n/**\n * <zh/>  === \n *\n * <en/> Returns whether or not the vectors exactly have the same elements in the same position (when compared with ===)\n * @param a - <zh/>  | <en/> The first vector\n * @param b - <zh/>  | <en/> The second vector\n * @returns  - <zh/>  | <en/> Whether or not the vectors are equal\n */\nexport function exactEquals(a: Vector2 | Vector3, b: Vector2 | Vector3): boolean {\n  return (a as number[]).every((v, i) => v === b[i]);\n}\n\n/**\n * <zh/> \n *\n * <en/> Calculates the perpendicular vector to a given vector\n * @param a - <zh/>  | <en/> The original vector\n * @param clockwise - <zh/>  | <en/> Whether to calculate the perpendicular vector in a clockwise direction\n * @returns <zh/>  | <en/> The perpendicular vector to the original vector\n */\nexport function perpendicular(a: Vector2, clockwise = true): Vector2 {\n  return clockwise ? [-a[1], a[0]] : [a[1], -a[0]];\n}\n\n/**\n * <zh/> \n *\n * <en/> Calculates the modulus of a vector\n * @param a - <zh/>  | <en/> The original vector\n * @param b - <zh/>  | <en/> The modulus\n * @returns - <zh/>  | <en/> The modulus of the vector\n */\nexport function mod(a: Vector2 | Vector3, b: number): Vector2 | Vector3 {\n  return a.map((v) => v % b) as Vector2 | Vector3;\n}\n\n/**\n * <zh/> \n *\n * <en/> Force vector to be two-dimensional\n * @param a - <zh/>  | <en/> The original vector\n * @returns <zh/>  | <en/> Two-dimensional vector\n */\nexport function toVector2(a: Vector2 | Vector3): Vector2 {\n  return [a[0], a[1]];\n}\n\n/**\n * <zh/> \n *\n * <en/> Force vector to be three-dimensional\n * @param a - <zh/>  | <en/> The original vector\n * @returns  - <zh/>  | <en/> Three-dimensional vector\n */\nexport function toVector3(a: Vector2 | Vector3): Vector3 {\n  return isVector2(a) ? [a[0], a[1], 0] : a;\n}\n\n/**\n * <zh/>  x \n *\n * <en/> The angle between the vector and the positive direction of the x-axis (radians)\n * @param a - <zh/>  | <en/> The vector\n * @returns <zh/>  | <en/> The angle in radians\n */\nexport function rad(a: Vector2 | Vector3): number {\n  const [x, y] = a;\n  if (!x && !y) return 0;\n  return Math.atan2(y, x);\n}\n\n/**\n * <zh/> \n *\n * <en/> Rotational vector (Angle system)\n * @param a - <zh/>  | <en/> The vector\n * @param angle - <zh/>  | <en/> The rotation angle\n * @returns <zh/>  | <en/> The vector\n */\nexport function rotate(a: Vector2, angle: number): Vector2 {\n  const [dx, dy] = a;\n  if (angle % 360 === 0) return [dx, dy];\n  const rad = (angle * Math.PI) / 180;\n  const cos = Math.cos(rad);\n  const sin = Math.sin(rad);\n  return [dx * cos - dy * sin, dx * sin + dy * cos];\n}\n", "import type { Point } from '../types';\nimport { isBetween } from './math';\nimport { cross, subtract } from './vector';\n\nexport type LineSegment = [Point, Point];\n\n/**\n * <zh/> \n *\n * <en/> Judge whether two line segments are parallel\n * @param l1 - <zh/>  | <en/> the first line segment\n * @param l2 - <zh/>  | <en/> the second line segment\n * @returns <zh/>  | <en/> whether parallel or not\n */\nexport function isLinesParallel(l1: LineSegment, l2: LineSegment): boolean {\n  const [p1, p2] = l1;\n  const [p3, p4] = l2;\n  const v1 = subtract(p1, p2);\n  const v2 = subtract(p3, p4);\n  return cross(v1, v2).every((v) => v === 0);\n}\n\n/**\n * <zh/> \n *\n * <en/> Get the intersection of two line segments\n * @param l1 - <zh/>  | <en/> the first line segment\n * @param l2 - <zh/>  | <en/> the second line segment\n * @param extended - <zh/>  | <en/> whether to include the intersection on the extension line\n * @returns <zh/>  | <en/> intersection\n */\nexport function getLinesIntersection(l1: LineSegment, l2: LineSegment, extended = false): Point | undefined {\n  if (isLinesParallel(l1, l2)) return undefined;\n\n  const [p1, p2] = l1;\n  const [p3, p4] = l2;\n\n  const t =\n    ((p1[0] - p3[0]) * (p3[1] - p4[1]) - (p1[1] - p3[1]) * (p3[0] - p4[0])) /\n    ((p1[0] - p2[0]) * (p3[1] - p4[1]) - (p1[1] - p2[1]) * (p3[0] - p4[0]));\n\n  const u =\n    p4[0] - p3[0]\n      ? (p1[0] - p3[0] + t * (p2[0] - p1[0])) / (p4[0] - p3[0])\n      : (p1[1] - p3[1] + t * (p2[1] - p1[1])) / (p4[1] - p3[1]);\n\n  if (!extended && (!isBetween(t, 0, 1) || !isBetween(u, 0, 1))) return undefined;\n\n  return [p1[0] + t * (p2[0] - p1[0]), p1[1] + t * (p2[1] - p1[1])];\n}\n", "import type { Placement, RelativePlacement } from '../types';\nimport { isBetween } from './math';\n\n/**\n * <zh/> \n *\n * <en/> Parse position\n * @param placement - <zh/>  | <en/> placement\n * @returns <zh/>  | <en/> relative placement\n */\nexport function parsePlacement(placement: Placement): RelativePlacement {\n  if (Array.isArray(placement)) {\n    return isBetween(placement[0], 0, 1) && isBetween(placement[1], 0, 1) ? placement : [0.5, 0.5];\n  }\n  const direction = placement.split('-');\n  const x = direction.includes('left') ? 0 : direction.includes('right') ? 1 : 0.5;\n  const y = direction.includes('top') ? 0 : direction.includes('bottom') ? 1 : 0.5;\n  return [x, y];\n}\n", "import type { AABB } from '@antv/g';\nimport type { Anchor, NodeLikeData, Placement, Point, RelativePlacement } from '../types';\nimport { parseAnchor } from './anchor';\nimport { parsePlacement } from './placement';\n\n/**\n * <zh/> / combo \n *\n * <en/> Get the position of node/combo\n * @param datum - <zh/> / combo  | <en/> data of node/combo\n * @returns - <zh/>  | <en/> position\n */\nexport function positionOf(datum: NodeLikeData): Point {\n  const { x = 0, y = 0, z = 0 } = datum.style || {};\n  return [+x, +y, +z];\n}\n\n/**\n * <zh/> \n *\n * <en/> Check if the data has a position coordinate\n * @param datum - <zh/> / combo  | <en/> data of node/combo\n * @returns - <zh/>  | <en/> Whether there is a position coordinate\n */\nexport function hasPosition(datum: NodeLikeData): boolean {\n  const { x, y, z } = datum.style || {};\n  return x !== undefined || y !== undefined || z !== undefined;\n}\n\n/**\n * <zh/> \n *\n * <en/> Get position by relative placement\n * @param bbox - <zh/>  | <en/> element bounding box\n * @param placement - <zh/>  | <en/> Point relative to element\n * @returns - <zh/>  | <en/> position\n */\nexport function getXYByRelativePlacement(bbox: AABB, placement: RelativePlacement): Point {\n  const [x, y] = placement;\n  const { min, max } = bbox;\n  return [min[0] + x * (max[0] - min[0]), min[1] + y * (max[1] - min[1])];\n}\n\n/**\n * <zh/> \n *\n * <en/> Get position by placement\n * @param bbox - <zh/>  | <en/> element bounding box\n * @param placement - <zh/>  | <en/> Point relative to element\n * @returns - <zh/>  | <en/> position\n */\nexport function getXYByPlacement(bbox: AABB, placement: Placement = 'center'): Point {\n  const relativePlacement = parsePlacement(placement);\n  return getXYByRelativePlacement(bbox, relativePlacement);\n}\n\n/**\n * <zh/> \n *\n * <en/> Get anchor position\n * @param bbox - <zh/>  | <en/> element bounding box\n * @param anchor - <zh/>  | <en/> Anchor\n * @returns - <zh/>  | <en/> position\n */\nexport function getXYByAnchor(bbox: AABB, anchor: Anchor): Point {\n  const parsedAnchor = parseAnchor(anchor);\n  return getXYByRelativePlacement(bbox, parsedAnchor as RelativePlacement);\n}\n\n/**\n * <zh/>  rect points  position .\n *\n * <en/> The rect points command is used to obtain the position and orientation configuration.\n * @param points Points\n * @returns `{ left: number; right: number; top: number; bottom: number }`\n */\nexport const getPositionByRectPoints = (points: Point[]) => {\n  const [p1, p2] = points;\n  return {\n    left: Math.min(p1[0], p2[0]),\n    right: Math.max(p1[0], p2[0]),\n    top: Math.min(p1[1], p2[1]),\n    bottom: Math.max(p1[1], p2[1]),\n  };\n};\n", "import type { AABB } from '@antv/g';\nimport { isEqual } from '@antv/util';\nimport type { Point, PointObject } from '../types';\nimport { getBBoxHeight, getBBoxWidth } from './bbox';\nimport type { LineSegment } from './line';\nimport { getLinesIntersection, isLinesParallel } from './line';\nimport { getXYByPlacement } from './position';\nimport { add, distance, divide, normalize, subtract, toVector2 } from './vector';\n\n/**\n * <zh/> \n * <en/> Convert object coordinates to array coordinates\n * @param point - <zh/>  | <en/> object coordinates\n * @returns <zh/>  | <en/> array coordinates\n */\nexport function parsePoint(point: PointObject): Point {\n  return [point.x, point.y, point.z ?? 0];\n}\n\n/**\n * <zh/> \n *\n * <en/> Convert array coordinates to object coordinates\n * @param point - <zh/>  | <en/> array coordinates\n * @returns <zh/>  | <en/> object coordinates\n */\nexport function toPointObject(point: Point): PointObject {\n  return { x: point[0], y: point[1], z: point[2] ?? 0 };\n}\n\n/**\n * <zh/>  X \n * <en/> Sort by X-axis coordinates\n * @param points - <zh/>  | <en/> point set\n * @returns <zh/>  | <en/> sorted point set\n */\nexport function sortByX(points: Point[]): Point[] {\n  return points.sort((a, b) => a[0] - b[0] || a[1] - b[1]);\n}\n\n/**\n * <zh/> \n *\n * <en/> Deduplicate point set\n * @param points - <zh/>  | <en/> pointset\n * @returns <zh/>  | <en/> deduplicated pointset\n */\nexport function deduplicate(points: Point[]): Point[] {\n  const set = new Set<string>();\n  return points.filter((p) => {\n    const key = p.join(',');\n    if (set.has(key)) return false;\n    set.add(key);\n    return true;\n  });\n}\n\n/**\n * <zh/>  `digits` \n *\n * <en/> Round the point to the given precision\n * @param point - <zh/>  | <en/> the point to round\n * @param digits - <zh/>  | <en/> the number of digits after the decimal point\n * @returns <zh/>  | <en/> the rounded point\n */\nexport function round(point: Point, digits = 0): Point {\n  return point.map((p) => parseFloat(p.toFixed(digits))) as Point;\n}\n\n/**\n * <zh/> \n *\n * <en/> Move `p` point along the line starting from `ref` to this point by a certain `distance`\n * @param p - <zh/>  | <en/> the point to move\n * @param ref - <zh/>  | <en/> the reference point\n * @param distance - <zh/>  | <en/> the distance to move\n * @param reverse\n * @returns <zh/>  | <en/> the moved point\n */\nexport function moveTo(p: Point, ref: Point, distance: number, reverse = false): Point {\n  if (isEqual(p, ref)) return p;\n  const direction = reverse ? subtract(p, ref) : subtract(ref, p);\n  const normalizedDirection = normalize(direction);\n  const moveVector: Point = [normalizedDirection[0] * distance, normalizedDirection[1] * distance];\n  return add(toVector2(p), moveVector);\n}\n\n/**\n * <zh/> \n *\n * <en/> whether two points are on the same horizontal line\n * @param p1 - <zh/>  | <en/> the first point\n * @param p2 - <zh/>  | <en/> the second point\n * @returns <zh/>  | <en/> is horizontal or not\n */\nexport function isHorizontal(p1: Point, p2: Point): boolean {\n  return p1[1] === p2[1];\n}\n\n/**\n * <zh/> \n *\n * <en/> whether two points are on the same vertical line\n * @param p1 - <zh/>  | <en/> the first point\n * @param p2 - <zh/>  | <en/> the second point\n * @returns <zh/>  | <en/> is vertical or not\n */\nexport function isVertical(p1: Point, p2: Point): boolean {\n  return p1[0] === p2[0];\n}\n\n/**\n * <zh/> \n *\n * <en/> Judges whether two points are orthogonal, that is, whether they are on the same horizontal or vertical line\n * @param p1 - <zh/>  | <en/> the first point\n * @param p2 - <zh/>  | <en/> the second point\n * @returns <zh/>  | <en/> whether orthogonal or not\n */\nexport function isOrthogonal(p1: Point, p2: Point): boolean {\n  return isHorizontal(p1, p2) || isVertical(p1, p2);\n}\n\n/**\n * <zh/> \n *\n * <en/> Judge whether three points are collinear\n * @param p1 - <zh/>  | <en/> the first point\n * @param p2 - <zh/>  | <en/> the second point\n * @param p3 - <zh/>  | <en/> the third point\n * @returns <zh/>  | <en/> whether three points are collinear\n */\nexport function isCollinear(p1: Point, p2: Point, p3: Point): boolean {\n  return isLinesParallel([p1, p2], [p2, p3]);\n}\n\n/**\n * <zh/> \n *\n * <en/> Calculate the center symmetric point of a point relative to another point\n * @param p - <zh/>  | <en/> the point to calculate\n * @param center - <zh/>  | <en/> the center point\n * @returns <zh/>  | <en/> the center symmetric point\n */\nexport function getSymmetricPoint(p: Point, center: Point): Point {\n  return [2 * center[0] - p[0], 2 * center[1] - p[1]];\n}\n\n/**\n * <zh/> \n *\n * <en/> Gets the intersection point between the line from the center of a polygon to a given point and the polygon's edge\n * @param p - <zh/>  | <en/> The point outside the polygon from which the line to the polygon's center is drawn\n * @param center - <zh/>  | <en/> the center of the polygon\n * @param points - <zh/>  | <en/> the vertices of the polygon\n * @param isRelativePos - <zh/>  | <en/> whether the vertex coordinates are relative to the center point\n * @param useExtendedLine - <zh/>  | <en/> whether to use the extended line\n * @returns <zh/>  | <en/> intersection and intersecting line segment\n */\nexport function getPolygonIntersectPoint(\n  p: Point,\n  center: Point,\n  points: Point[],\n  isRelativePos = true,\n  useExtendedLine = false,\n): { point: Point; line?: LineSegment } {\n  for (let i = 0; i < points.length; i++) {\n    let start = points[i];\n    let end = points[(i + 1) % points.length];\n\n    if (isRelativePos) {\n      start = add(center, start);\n      end = add(center, end);\n    }\n\n    const refP = useExtendedLine ? getSymmetricPoint(p, center) : p;\n    const intersect = getLinesIntersection([center, refP], [start, end]);\n    if (intersect) {\n      return {\n        point: intersect,\n        line: [start, end],\n      };\n    }\n  }\n  return {\n    point: center,\n    line: undefined,\n  };\n}\n\n/**\n * <zh/> \n *\n * <en/> Whether point is inside the polygon (ray algo)\n * @param point - <zh/>  | <en/> point\n * @param points - <zh/>  | <en/> polygon vertices\n * @param start - <zh/>  | <en/> start index\n * @param end - <zh/>  | <en/> end index\n * @returns <zh/>  | <en/> whether inside the polygon\n */\nexport function isPointInPolygon(point: Point, points: Point[], start?: number, end?: number): boolean {\n  const x = point[0];\n  const y = point[1];\n  let inside = false;\n  if (start === undefined) start = 0;\n  if (end === undefined) end = points.length;\n  const len = end - start;\n  for (let i = 0, j = len - 1; i < len; j = i++) {\n    const xi = points[i + start][0];\n    const yi = points[i + start][1];\n    const xj = points[j + start][0];\n    const yj = points[j + start][1];\n    const intersect = yi > y !== yj > y && x < ((xj - xi) * (y - yi)) / (yj - yi) + xi;\n    if (intersect) inside = !inside;\n  }\n  return inside;\n}\n\n/**\n * <zh/> \n *\n * <en/> Gets the intersection point between the line from the center of a rectangle to a given point and the rectangle's edge\n * @param p - <zh/>  | <en/> The point outside the rectangle from which the line to the rectangle's center is drawn\n * @param bbox - <zh/>  | <en/> the bounding box of the rectangle\n * @param useExtendedLine - <zh/>  | <en/> whether to use the extended line\n * @returns <zh/>  | <en/> intersection\n */\nexport function getRectIntersectPoint(p: Point, bbox: AABB, useExtendedLine = false): Point {\n  const center = getXYByPlacement(bbox, 'center');\n  const corners = [\n    getXYByPlacement(bbox, 'left-top'),\n    getXYByPlacement(bbox, 'right-top'),\n    getXYByPlacement(bbox, 'right-bottom'),\n    getXYByPlacement(bbox, 'left-bottom'),\n  ];\n  return getPolygonIntersectPoint(p, center, corners, false, useExtendedLine).point;\n}\n\n/**\n * <zh/> \n *\n * <en/> Gets the intersection point between the line from the center of an ellipse to a given point and the ellipse's edge\n * @param p - <zh/>  | <en/> The point outside the ellipse from which the line to the ellipse's center is drawn\n * The point outside the ellipse from which the line to the ellipse's center is drawn.\n * @param bbox - <zh/>  | <en/> the bounding box of the ellipse\n * @param useExtendedLine - <zh/>  | <en/> whether to use the extended line\n * @returns <zh/>  | <en/> intersection\n */\nexport function getEllipseIntersectPoint(p: Point, bbox: AABB, useExtendedLine = false): Point {\n  const center = bbox.center;\n  const refP = useExtendedLine ? getSymmetricPoint(p, center) : p;\n  const vec = subtract(refP, bbox.center);\n  const angle = Math.atan2(vec[1], vec[0]);\n  if (isNaN(angle)) return center;\n\n  const rx = getBBoxWidth(bbox) / 2;\n  const ry = getBBoxHeight(bbox) / 2;\n  const intersectX = center[0] + rx * Math.cos(angle);\n  const intersectY = center[1] + ry * Math.sin(angle);\n\n  return [intersectX, intersectY];\n}\n\n/**\n * <zh/> \n * @param group1 - <zh/>  | <en/> the first group of points\n * @param group2 - <zh/>  | <en/> the second group of points\n * @returns <zh/>  | <en/> the nearest two points\n */\nexport function findNearestPoints(group1: Point[], group2: Point[]): [Point, Point] {\n  let minDistance = Infinity;\n  let nearestPoints: [Point, Point] = [group1[0], group2[0]];\n  group1.forEach((p1) => {\n    group2.forEach((p2) => {\n      const dist = distance(p1, p2);\n      if (dist < minDistance) {\n        minDistance = dist;\n        nearestPoints = [p1, p2];\n      }\n    });\n  });\n  return nearestPoints;\n}\n\n/**\n * <zh/> \n *\n * <en/> Find the line segment closest to the given point from a group of line segments\n * @param point - <zh/>  | <en/> the given point\n * @param lines - <zh/>  | <en/> a group of line segments\n * @returns <zh/>  | <en/> the nearest line segment\n */\nexport function findNearestLine(point: Point, lines: LineSegment[]) {\n  let minDistance = Infinity;\n  let nearestLine: [Point, Point] = [\n    [0, 0],\n    [0, 0],\n  ];\n  lines.forEach((line) => {\n    const distance = getDistanceToLine(point, line);\n    if (distance < minDistance) {\n      minDistance = distance;\n      nearestLine = line;\n    }\n  });\n  return nearestLine;\n}\n\n/**\n * <zh/> \n *\n * <en/> Get the distance from a point to a line segment\n * @param point - <zh/>  | <en/> the point\n * @param line - <zh/>  | <en/> the line segment\n * @returns <zh/>  | <en/> the distance from the point to the line segment\n */\nexport function getDistanceToLine(point: Point, line: LineSegment) {\n  const nearestPoint = findNearestPointOnLine(point, line);\n  return distance(point, nearestPoint);\n}\n\n/**\n * <zh/> \n *\n * <en/> Get the point on the line segment closest to the given point\n * @param point - <zh/>  | <en/> the given point\n * @param line - <zh/>  | <en/> the line segment\n * @returns <zh/>  | <en/> the point on the line segment closest to the given point\n */\nexport function findNearestPointOnLine(point: Point, line: LineSegment): Point {\n  const [x1, y1] = line[0];\n  const [x2, y2] = line[1];\n  const [x3, y3] = point;\n\n  const px = x2 - x1;\n  const py = y2 - y1;\n\n  //  | If the line segment is actually a point\n  if (px === 0 && py === 0) {\n    return [x1, y1];\n  }\n\n  let u = ((x3 - x1) * px + (y3 - y1) * py) / (px * px + py * py);\n\n  if (u > 1) {\n    u = 1;\n  } else if (u < 0) {\n    u = 0;\n  }\n\n  const x = x1 + u * px;\n  const y = y1 + u * py;\n\n  return [x, y];\n}\n\n/**\n * <zh/> \n *\n * <en/> Get the center point of a set of points\n * @param points - <zh/>  | <en/> point set\n * @returns <zh/>  | <en/> center point\n */\nexport function centerOf(points: Point[]): Point {\n  const totalPosition = points.reduce((acc, p) => add(acc, p), [0, 0]);\n  return divide(totalPosition, points.length);\n}\n\n/**\n * <zh/> \n *\n * <en/> Sort the point set in a clockwise or counterclockwise direction\n * @param points - <zh/>  | <en/> point set\n * @param clockwise - <zh/>  | <en/> whether clockwise\n * @returns <zh/>  | <en/> sorted point set\n */\nexport function sortByClockwise(points: Point[], clockwise = true): Point[] {\n  const center = centerOf(points);\n  return points.sort(([x1, y1], [x2, y2]) => {\n    const angle1 = Math.atan2(y1 - center[1], x1 - center[0]);\n    const angle2 = Math.atan2(y2 - center[1], x2 - center[0]);\n    return clockwise ? angle2 - angle1 : angle1 - angle2;\n  });\n}\n\n/**\n * <zh/> \n * @param start - <zh/>  | <en/> start point\n * @param end - <zh/>  | <en/> end point\n * @returns <zh/>  | <en/> an array consisting of these two points and their diagonal points\n */\nexport function getBoundingPoints(start: Point, end: Point): Point[] {\n  return [start, [start[0], end[1]], end, [end[0], start[1]]];\n}\n", "import EventEmitter from '@antv/event-emitter';\nimport { CommonEvent } from '../constants';\nimport { IPointerEvent } from '../types';\n\n/**\n * <zh/> \n *\n * <en/> Represents the coordinates of a pointer position\n */\nexport interface PointerPoint {\n  x: number;\n  y: number;\n  pointerId: number;\n}\n\n/**\n * <zh/> \n *\n * <en/> Pinch event parameters\n * @remarks\n * <zh/> \n *\n * <en/> Contains parameters related to pinch gestures, currently supports scale factor,\n * can be extended with center coordinates, rotation angle etc. in the future\n */\nexport interface PinchEventOptions {\n  /**\n   * <zh/> >1 <1 \n   *\n   * <en/> Scaling factor, >1 indicates zoom in, <1 indicates zoom out\n   */\n  scale: number;\n}\n\n/**\n * <zh/> \n * <en/> Pinch gesture phase type\n * @remarks\n * <zh/> \n * - start: \n * - move: \n * - end: \n *\n * <en/> Contains three gesture phases:\n * - pinchstart: Gesture started\n * - pinchmove: Gesture in progress\n * - pinchend: Gesture ended\n */\nexport type PinchEvent = 'pinchstart' | 'pinchmove' | 'pinchend';\n\n/**\n * <zh/> \n *\n * <en/> Pinch gesture callback function type\n * @param event - <zh/>  | <en/> Original pointer event object\n * @param options - <zh/>  | <en/> Pinch event parameters object\n */\nexport type PinchCallback = (event: IPointerEvent, options: PinchEventOptions) => void;\n\n/**\n * <zh/> \n *\n * <en/> Pinch gesture handler\n * @remarks\n * <zh/> \n *\n * <en/> Handles two-finger touch events, calculates zoom ratio and triggers callbacks. Tracks position changes of two touch points to determine zoom ratio based on distance variation.\n */\nexport class PinchHandler {\n  /**\n   * <zh/>  Pinch \n   *\n   * <en/> Whether it is in the Pinch stage\n   */\n  public static isPinching: boolean = false;\n\n  /**\n   * <zh/> \n   *\n   * <en/> Currently tracked touch points collection\n   */\n  private pointerByTouch: PointerPoint[] = [];\n\n  /**\n   * <zh/> \n   *\n   * <en/> Initial distance between two points\n   */\n  private initialDistance: number | null = null;\n\n  private emitter: EventEmitter;\n  private static instance: PinchHandler | null = null;\n  private static callbacks: {\n    pinchstart: PinchCallback[];\n    pinchmove: PinchCallback[];\n    pinchend: PinchCallback[];\n  } = { pinchstart: [], pinchmove: [], pinchend: [] };\n\n  constructor(\n    emitter: EventEmitter,\n    private phase: PinchEvent,\n    callback: PinchCallback,\n  ) {\n    this.emitter = emitter;\n    if (PinchHandler.instance) {\n      PinchHandler.callbacks[this.phase].push(callback);\n      return PinchHandler.instance;\n    }\n    this.onPointerDown = this.onPointerDown.bind(this);\n    this.onPointerMove = this.onPointerMove.bind(this);\n    this.onPointerUp = this.onPointerUp.bind(this);\n    this.bindEvents();\n    PinchHandler.instance = this;\n    PinchHandler.callbacks[this.phase].push(callback);\n  }\n\n  private bindEvents() {\n    const { emitter } = this;\n    emitter.on(CommonEvent.POINTER_DOWN, this.onPointerDown);\n    emitter.on(CommonEvent.POINTER_MOVE, this.onPointerMove);\n    emitter.on(CommonEvent.POINTER_UP, this.onPointerUp);\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Update position of specified pointer\n   * @param pointerId - <zh/>  | <en/> Pointer unique identifier<sup>1</sup>\n   * @param x - <zh/> X | <en/> New X coordinate\n   * @param y - <zh/> Y | <en/> New Y coordinate\n   */\n  private updatePointerPosition(pointerId: number, x: number, y: number) {\n    const index = this.pointerByTouch.findIndex((p) => p.pointerId === pointerId);\n    if (index >= 0) {\n      this.pointerByTouch[index] = { x, y, pointerId };\n    }\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Handle pointer down event\n   * @param event - <zh/>  | <en/> Pointer event object\n   * @remarks\n   * <zh/> \n   *\n   * <en/> Record initial distance when detecting two touch points\n   */\n  onPointerDown(event: IPointerEvent) {\n    const { x, y } = event.client || {};\n    if (x === undefined || y === undefined) return;\n    this.pointerByTouch.push({ x, y, pointerId: event.pointerId });\n\n    if (event.pointerType === 'touch' && this.pointerByTouch.length === 2) {\n      PinchHandler.isPinching = true;\n      const dx = this.pointerByTouch[0].x - this.pointerByTouch[1].x;\n      const dy = this.pointerByTouch[0].y - this.pointerByTouch[1].y;\n      this.initialDistance = Math.sqrt(dx * dx + dy * dy);\n      PinchHandler.callbacks.pinchstart.forEach((cb) => cb(event, { scale: 0 }));\n    }\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Handle pointer move event\n   * @param event - <zh/>  | <en/> Pointer event object\n   * @remarks\n   * <zh/> \n   *\n   * <en/> Calculate zoom ratio when two valid touch points exist\n   */\n  onPointerMove(event: IPointerEvent) {\n    if (this.pointerByTouch.length !== 2 || this.initialDistance === null) return;\n    const { x, y } = event.client || {};\n    if (x === undefined || y === undefined) return;\n    this.updatePointerPosition(event.pointerId, x, y);\n    const dx = this.pointerByTouch[0].x - this.pointerByTouch[1].x;\n    const dy = this.pointerByTouch[0].y - this.pointerByTouch[1].y;\n    const currentDistance = Math.sqrt(dx * dx + dy * dy);\n    const ratio = currentDistance / this.initialDistance;\n\n    PinchHandler.callbacks.pinchmove.forEach((cb) => cb(event, { scale: (ratio - 1) * 5 }));\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Handle pointer up event\n   * @param event\n   * @remarks\n   * <zh/> \n   *\n   * <en/> Reset touch state and initial distance\n   */\n  onPointerUp(event: IPointerEvent) {\n    PinchHandler.callbacks.pinchend.forEach((cb) => cb(event, { scale: 0 }));\n    PinchHandler.isPinching = false;\n    this.initialDistance = null;\n    this.pointerByTouch = [];\n    PinchHandler.instance?.tryDestroy();\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Destroy pinch gesture listeners\n   * @remarks\n   * <zh/> \n   *\n   * <en/> Remove listeners for pointer down, move, and up events\n   */\n  public destroy() {\n    this.emitter.off(CommonEvent.POINTER_DOWN, this.onPointerDown);\n    this.emitter.off(CommonEvent.POINTER_MOVE, this.onPointerMove);\n    this.emitter.off(CommonEvent.POINTER_UP, this.onPointerUp);\n    PinchHandler.instance = null;\n  }\n\n  /**\n   * <zh/> \n   * <en/> Unregister gesture callback for specific phase\n   * @param phase - <zh/> (pinchstart)/(pinchmove)/(pinchend) | <en/> Gesture phase: start/move/end\n   * @param callback - <zh/>  | <en/> Callback function to unregister\n   * @remarks\n   * <zh/> \n   * <en/> Remove specific callback from the phase's callback list, auto-destroy event listeners when all callbacks are unregistered\n   */\n  public off(phase: PinchEvent, callback: PinchCallback) {\n    const index = PinchHandler.callbacks[phase].indexOf(callback);\n    if (index > -1) PinchHandler.callbacks[phase].splice(index, 1);\n    this.tryDestroy();\n  }\n\n  /**\n   * <zh/> \n   * <en/> Attempt to destroy the gesture handler\n   * @remarks\n   * <zh/> //\n   * <en/> Perform actual destruction when all phase (pinchstart/pinchmove/pinchend) callback lists are empty\n   * <zh/> \n   * <en/> Automatically remove event listeners and reset singleton instance\n   */\n  private tryDestroy() {\n    if (Object.values(PinchHandler.callbacks).every((arr) => arr.length === 0)) {\n      this.destroy();\n    }\n  }\n}\n", "import EventEmitter from '@antv/event-emitter';\nimport type { FederatedMouseEvent } from '@antv/g';\nimport { isEqual, isString } from '@antv/util';\nimport { CommonEvent } from '../constants';\nimport type { PinchCallback } from './pinch';\nimport { PinchHandler } from './pinch';\n\nexport interface ShortcutOptions {}\n\nexport type ShortcutKey = string[];\n\ntype Handler = (event: any) => void;\n\nconst lowerCaseKeys = (keys: ShortcutKey) => keys.map((key) => (isString(key) ? key.toLocaleLowerCase() : key));\n\nexport class Shortcut {\n  private map: Map<ShortcutKey, Handler> = new Map();\n  public pinchHandler: PinchHandler | undefined;\n  private boundHandlePinch: PinchCallback = () => {};\n\n  private emitter: EventEmitter;\n\n  private recordKey = new Set<string>();\n\n  constructor(emitter: EventEmitter) {\n    this.emitter = emitter;\n    this.bindEvents();\n  }\n\n  public bind(key: ShortcutKey, handler: Handler) {\n    if (key.length === 0) return;\n    if (key.includes(CommonEvent.PINCH) && !this.pinchHandler) {\n      this.boundHandlePinch = this.handlePinch.bind(this);\n      this.pinchHandler = new PinchHandler(this.emitter, 'pinchmove', this.boundHandlePinch);\n    }\n    this.map.set(key, handler);\n  }\n\n  public unbind(key: ShortcutKey, handler?: Handler) {\n    this.map.forEach((h, k) => {\n      if (isEqual(k, key)) {\n        if (!handler || handler === h) this.map.delete(k);\n      }\n    });\n  }\n\n  public unbindAll() {\n    this.map.clear();\n  }\n\n  public match(key: ShortcutKey) {\n    // \n    const recordKeyList = lowerCaseKeys(Array.from(this.recordKey)).sort();\n    const keyList = lowerCaseKeys(key).sort();\n    return isEqual(recordKeyList, keyList);\n  }\n\n  private bindEvents() {\n    const { emitter } = this;\n\n    emitter.on(CommonEvent.KEY_DOWN, this.onKeyDown);\n    emitter.on(CommonEvent.KEY_UP, this.onKeyUp);\n    emitter.on(CommonEvent.WHEEL, this.onWheel);\n    emitter.on(CommonEvent.DRAG, this.onDrag);\n\n    // \n    // Clear the keys when the window regains focus to avoid abnormal key states\n    globalThis.addEventListener?.('focus', this.onFocus);\n  }\n\n  private onKeyDown = (event: KeyboardEvent) => {\n    if (!event?.key) return;\n    this.recordKey.add(event.key);\n    this.trigger(event);\n  };\n\n  private onKeyUp = (event: KeyboardEvent) => {\n    if (!event?.key) return;\n    this.recordKey.delete(event.key);\n  };\n\n  private trigger(event: KeyboardEvent) {\n    this.map.forEach((handler, key) => {\n      if (this.match(key)) handler(event);\n    });\n  }\n\n  /**\n   * <zh/>  wheel, drag \n   *\n   * <en/> Extend wheel, drag operations\n   * @param eventType - event name\n   * @param event - event\n   */\n  private triggerExtendKey(eventType: CommonEvent, event: unknown) {\n    this.map.forEach((handler, key) => {\n      if (key.includes(eventType)) {\n        if (\n          isEqual(\n            Array.from(this.recordKey),\n            key.filter((k) => k !== eventType),\n          )\n        ) {\n          handler(event);\n        }\n      }\n    });\n  }\n\n  private onWheel = (event: WheelEvent) => {\n    this.triggerExtendKey(CommonEvent.WHEEL, event);\n  };\n\n  private onDrag = (event: FederatedMouseEvent) => {\n    this.triggerExtendKey(CommonEvent.DRAG, event);\n  };\n\n  private handlePinch: PinchCallback = (event, options) => {\n    this.triggerExtendKey(CommonEvent.PINCH, { ...event, ...options });\n  };\n\n  private onFocus = () => {\n    this.recordKey.clear();\n  };\n\n  public destroy() {\n    this.unbindAll();\n    this.emitter.off(CommonEvent.KEY_DOWN, this.onKeyDown);\n    this.emitter.off(CommonEvent.KEY_UP, this.onKeyUp);\n    this.emitter.off(CommonEvent.WHEEL, this.onWheel);\n    this.emitter.off(CommonEvent.DRAG, this.onDrag);\n    this.pinchHandler?.off('pinchmove', this.boundHandlePinch);\n    globalThis.removeEventListener?.('focus', this.onFocus);\n  }\n}\n", "import type { RectStyleProps } from '@antv/g';\nimport { Rect } from '@antv/g';\nimport { deepMix, isFunction } from '@antv/util';\nimport { CanvasEvent, CommonEvent } from '../constants';\nimport type { Graph } from '../runtime/graph';\nimport type { RuntimeContext } from '../runtime/types';\nimport type { ElementDatum, ElementType, ID, IPointerEvent, Point, State } from '../types';\nimport { idOf } from '../utils/id';\nimport { getBoundingPoints, isPointInPolygon } from '../utils/point';\nimport type { ShortcutKey } from '../utils/shortcut';\nimport { Shortcut } from '../utils/shortcut';\nimport type { BaseBehaviorOptions } from './base-behavior';\nimport { BaseBehavior } from './base-behavior';\n\n/**\n * <zh/> \n *\n * <en/> Brush select options\n */\nexport interface BrushSelectOptions extends BaseBehaviorOptions {\n  /**\n   * <zh/> \n   *\n   * <en/> Whether to enable animation.\n   * @defaultValue false\n   */\n  animation?: boolean;\n  /**\n   * <zh/> \n   *\n   * <en/> Whether to enable Brush select element function.\n   * @defaultValue true\n   */\n  enable?: boolean | ((event: IPointerEvent) => boolean);\n  /**\n   * <zh/> \n   *\n   * <en/> Enable Elements type.\n   * @defaultValue ['node', 'combo', 'edge']\n   */\n  enableElements?: ElementType[];\n  /**\n   * <zh/> \n   *\n   * <en/> Press this shortcut key to apply brush select with mouse click.\n   * @remarks\n   * <zh/> `trigger`  `['drag']`  `drag-canvas` \n   *\n   * <en/> Note that setting `trigger` to `['drag']` will cause the `drag-canvas` behavior to fail. The two cannot be configured at the same time.\n   * @defaultValue ['shift']\n   */\n  trigger?: ShortcutKey;\n  /**\n   * <zh/> \n   *\n   * <en/> The state to switch to when selected.\n   * @defaultValue 'selected'\n   */\n  state?: State;\n  /**\n   * <zh/> \n   * - `'union'` state \n   * - `'intersect'` state \n   * - `'diff'` state \n   * - `'default'` state \n   *\n   * <en/> Brush select mode\n   * - `'union'`: Keep the current state of the selected elements and add the specified state.\n   * - `'intersect'`: If the selected elements already have the specified state, keep it; otherwise, clearBrush it.\n   * - `'diff'`: Perform a negation operation on the specified state of the selected elements.\n   * - `'default'`: Clear the current state of the selected elements and add the specified state.\n   * @defaultValue 'default'\n   */\n  mode?: 'union' | 'intersect' | 'diff' | 'default';\n  /**\n   * <zh/> ,  `default` \n   *\n   * <en/> Whether to brush select immediately, only valid when the brush select mode is `default`\n   * @defaultValue false\n   */\n  immediately?: boolean;\n  /**\n   * <zh/>  \n   *\n   * <en/> Timely screening.\n   */\n  style?: RectStyleProps;\n  /**\n   * <zh/> \n   *\n   * <en/> Callback when brush select elements.\n   * @param states - \n   */\n  onSelect?: (states: Record<ID, State | State[]>) => void;\n}\n/**\n * <zh/> \n *\n * <en/> Brush select elements\n */\nexport class BrushSelect extends BaseBehavior<BrushSelectOptions> {\n  static defaultOptions: Partial<BrushSelectOptions> = {\n    animation: false,\n    enable: true,\n    enableElements: ['node', 'combo', 'edge'],\n    immediately: false,\n    mode: 'default',\n    state: 'selected',\n    trigger: ['shift'],\n    style: {\n      width: 0,\n      height: 0,\n      lineWidth: 1,\n      fill: '#1677FF',\n      stroke: '#1677FF',\n      fillOpacity: 0.1,\n      zIndex: 2,\n      pointerEvents: 'none',\n    },\n  };\n\n  private startPoint?: Point;\n  private endPoint?: Point;\n  private rectShape?: Rect;\n  private shortcut?: Shortcut;\n\n  constructor(context: RuntimeContext, options: BrushSelectOptions) {\n    super(context, deepMix({}, BrushSelect.defaultOptions, options));\n    this.shortcut = new Shortcut(context.graph);\n\n    this.onPointerDown = this.onPointerDown.bind(this);\n    this.onPointerMove = this.onPointerMove.bind(this);\n    this.onPointerUp = this.onPointerUp.bind(this);\n    this.clearStates = this.clearStates.bind(this);\n\n    this.bindEvents();\n  }\n\n  /**\n   * Triggered when the pointer is pressed\n   * @param event - Pointer event\n   * @internal\n   */\n  protected onPointerDown(event: IPointerEvent) {\n    if (!this.validate(event) || !this.isKeydown() || this.startPoint) return;\n    const { canvas, graph } = this.context;\n    const style = { ...this.options.style };\n\n    //  lineWidth\n    // Adjust lineWidth according to the zoom ratio\n    if (this.options.style.lineWidth) {\n      style.lineWidth = +this.options.style.lineWidth / graph.getZoom();\n    }\n\n    this.rectShape = new Rect({ id: 'g6-brush-select', style });\n    canvas.appendChild(this.rectShape);\n\n    this.startPoint = [event.canvas.x, event.canvas.y];\n  }\n\n  /**\n   * Triggered when the pointer is moved\n   * @param event - Pointer event\n   * @internal\n   */\n  protected onPointerMove(event: IPointerEvent) {\n    if (!this.startPoint) return;\n    const { immediately, mode } = this.options;\n\n    this.endPoint = getCursorPoint(event, this.context.graph);\n\n    this.rectShape?.attr({\n      x: Math.min(this.endPoint[0], this.startPoint[0]),\n      y: Math.min(this.endPoint[1], this.startPoint[1]),\n      width: Math.abs(this.endPoint[0] - this.startPoint[0]),\n      height: Math.abs(this.endPoint[1] - this.startPoint[1]),\n    });\n\n    if (immediately && mode === 'default') this.updateElementsStates(getBoundingPoints(this.startPoint, this.endPoint));\n  }\n\n  /**\n   * Triggered when the pointer is released\n   * @param event - Pointer event\n   * @internal\n   */\n  protected onPointerUp(event: IPointerEvent) {\n    if (!this.startPoint) return;\n    if (!this.endPoint) {\n      this.clearBrush();\n      return;\n    }\n\n    this.endPoint = getCursorPoint(event, this.context.graph);\n    this.updateElementsStates(getBoundingPoints(this.startPoint, this.endPoint));\n\n    this.clearBrush();\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Clear state\n   * @internal\n   */\n  protected clearStates() {\n    if (this.endPoint) return;\n\n    this.clearElementsStates();\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Clear the state of all elements on the canvas\n   * @internal\n   */\n  protected clearElementsStates() {\n    const { graph } = this.context;\n    const states = Object.values(graph.getData()).reduce((acc, data) => {\n      return Object.assign(\n        {},\n        acc,\n        data.reduce((acc: Record<ID, State[]>, datum: ElementDatum) => {\n          const restStates = (datum.states || [])?.filter((state) => state !== this.options.state);\n          acc[idOf(datum)] = restStates;\n          return acc;\n        }, {}),\n      );\n    }, {});\n\n    graph.setElementState(states, this.options.animation);\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Update the state of the selected elements\n   * @param points - <zh/>  | <en/> The vertex of the selection area\n   * @internal\n   */\n  protected updateElementsStates(points: Point[]) {\n    const { graph } = this.context;\n    const { enableElements, state, mode, onSelect } = this.options;\n\n    const selectedIds = this.selector(graph, points, enableElements);\n\n    const states: Record<ID, State | State[]> = {};\n\n    switch (mode) {\n      case 'union':\n        selectedIds.forEach((id) => {\n          states[id] = [...graph.getElementState(id), state];\n        });\n        break;\n      case 'diff':\n        selectedIds.forEach((id) => {\n          const prevStates = graph.getElementState(id);\n          states[id] = prevStates.includes(state) ? prevStates.filter((s) => s !== state) : [...prevStates, state];\n        });\n        break;\n      case 'intersect':\n        selectedIds.forEach((id) => {\n          const prevStates = graph.getElementState(id);\n          states[id] = prevStates.includes(state) ? [state] : [];\n        });\n        break;\n      case 'default':\n      default:\n        selectedIds.forEach((id) => {\n          states[id] = [state];\n        });\n        break;\n    }\n\n    if (isFunction(onSelect)) onSelect(states);\n\n    graph.setElementState(states, this.options.animation);\n  }\n\n  /**\n   * <zh/>  combo combo \n   *\n   * <en/> Find the elements displayed in the specified area on the canvas. A node is selected if the center of its bbox is inside the rect; An edge is selected if both end nodes are inside the rect ;A combo is selected if the center of its bbox is inside the rect.\n   * @param graph - <zh/>  | <en/> Graph instance\n   * @param points - <zh/>  | <en/> The vertex of the selection area\n   * @param itemTypes - <zh/>  | <en/> Element type\n   * @returns <zh/>  ID  | <en/> Selected element ID array\n   * @internal\n   */\n  protected selector(graph: Graph, points: Point[], itemTypes: ElementType[]): ID[] {\n    if (!itemTypes || itemTypes.length === 0) return [];\n\n    const elements: ID[] = [];\n\n    const graphData = graph.getData();\n    itemTypes.forEach((itemType) => {\n      graphData[`${itemType}s`].forEach((datum) => {\n        const id = idOf(datum);\n        if (graph.getElementVisibility(id) !== 'hidden' && isPointInPolygon(graph.getElementPosition(id), points)) {\n          elements.push(id);\n        }\n      });\n    });\n\n    //  | If source node and target node are within the selection range, that edge is also selected\n    if (itemTypes.includes('edge')) {\n      const edges = graphData.edges;\n      edges?.forEach((edge) => {\n        const { source, target } = edge;\n        if (elements.includes(source) && elements.includes(target)) {\n          elements.push(idOf(edge));\n        }\n      });\n    }\n\n    return elements;\n  }\n\n  private clearBrush() {\n    this.rectShape?.remove();\n    this.rectShape = undefined;\n    this.startPoint = undefined;\n    this.endPoint = undefined;\n  }\n\n  /**\n   * <zh/>  trigger \n   *\n   * <en/> Is the current key consistent with the trigger configuration\n   * @returns <zh/>  | <en/> Is consistent\n   * @internal\n   */\n  protected isKeydown(): boolean {\n    const { trigger } = this.options;\n    const keys = (Array.isArray(trigger) ? trigger : [trigger]) as string[];\n    return this.shortcut!.match(keys.filter((key) => key !== 'drag'));\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Verify whether brush select is enabled\n   * @param event - <zh/>  | <en/> Event\n   * @returns <zh/>  | <en/> Whether to enable\n   * @internal\n   */\n  protected validate(event: IPointerEvent) {\n    if (this.destroyed) return false;\n    const { enable } = this.options;\n    if (isFunction(enable)) return enable(event);\n    return !!enable;\n  }\n\n  private bindEvents() {\n    const { graph } = this.context;\n\n    graph.on(CommonEvent.POINTER_DOWN, this.onPointerDown);\n    graph.on(CommonEvent.POINTER_MOVE, this.onPointerMove);\n    graph.on(CommonEvent.POINTER_UP, this.onPointerUp);\n    graph.on(CanvasEvent.CLICK, this.clearStates);\n  }\n\n  private unbindEvents() {\n    const { graph } = this.context;\n\n    graph.off(CommonEvent.POINTER_DOWN, this.onPointerDown);\n    graph.off(CommonEvent.POINTER_MOVE, this.onPointerMove);\n    graph.off(CommonEvent.POINTER_UP, this.onPointerUp);\n    graph.off(CanvasEvent.CLICK, this.clearStates);\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Update configuration\n   * @param options - <zh/>  | <en/> Options\n   * @internal\n   */\n  public update(options: Partial<BrushSelectOptions>) {\n    this.unbindEvents();\n    this.options = deepMix(this.options, options);\n    this.bindEvents();\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Destroy\n   * @internal\n   */\n  public destroy() {\n    this.unbindEvents();\n    super.destroy();\n  }\n}\n\nexport const getCursorPoint = (event: IPointerEvent, graph: Graph): Point => {\n  // Fixed #7182:  html  html  canvas \n  // nativeEvent.target  canvas  html \n  // Fixed #7182: Handles brush selection on HTML nodes by converting client coordinates to canvas coordinates.\n  // An HTML node is identified if the event's targetType is 'node' but the nativeEvent.target is not the canvas element.\n  if (\n    (event.targetType === 'node' || event.targetType === 'combo') &&\n    !(event.nativeEvent.target instanceof HTMLCanvasElement)\n  ) {\n    const [x, y] = graph.getCanvasByClient([event.client.x, event.client.y]);\n    return [x, y];\n  }\n  return [event.canvas.x, event.canvas.y];\n};\n", "/**\n * <zh/>  node icon \n *\n * <en/> According to the different nodes, the size of the icon is automatically calculated, and then multiplied by the following scaling factor to prevent it from being too close\n */\nexport const ICON_SIZE_RATIO = 0.8;\n\nexport const ELEMENT_TYPES = ['node', 'edge', 'combo'] as const;\n", "export type HierarchyStructure<T> = T & {\n  children?: HierarchyStructure<T>[];\n};\n\n/**\n * <zh/> \n *\n * <en/> perform depth first traversal\n * @param node - <zh/>  | <en/> start node\n * @param visitor - <zh/>  | <en/> visitor function\n * @param navigator - <zh/>  | <en/> get children function\n * @param mode - <zh/> BT: TB:  | <en/> traverse mode, BT: bottom to top, TB: top to bottom\n * @param depth - <zh/>  | <en/> current depth\n */\nexport function dfs<N>(\n  node: N,\n  visitor: (node: N, depth: number) => void,\n  navigator: (node: N) => N[] | undefined,\n  mode: 'BT' | 'TB',\n  depth: number = 0,\n) {\n  if (mode === 'TB') visitor(node, depth);\n\n  const children = navigator(node);\n\n  if (children) {\n    for (const child of children) {\n      dfs(child, visitor, navigator, mode, depth + 1);\n    }\n  }\n\n  if (mode === 'BT') visitor(node, depth);\n}\n\n/**\n * <zh/> \n *\n * <en/> perform breadth first traversal\n * @param node - <zh/>  | <en/> start node\n * @param visitor - <zh/>  | <en/> visitor function\n * @param navigator - <zh/>  | <en/> get children function\n */\nexport function bfs<N>(node: N, visitor: (node: N, depth: number) => void, navigator: (node: N) => N[] | undefined) {\n  const queue: [N, number][] = [[node, 0]];\n\n  while (queue.length) {\n    const [current, depth] = queue.shift()!;\n\n    visitor(current, depth);\n\n    const children = navigator(current);\n\n    if (children) {\n      for (const child of children) {\n        queue.push([child, depth + 1]);\n      }\n    }\n  }\n}\n", "import type { Graph } from '../runtime/graph';\nimport type { EdgeDirection, ElementType, ID } from '../types';\nimport { idOf } from './id';\nimport { bfs } from './traverse';\n\n/**\n * <zh/>  n  ID\n *\n * <en/> Get the IDs of all elements within an n-degree relationship from the specified element\n * @remarks\n * <zh/> 0 1 \n * 0 1 \n *\n * <en/> For a node, 0-degree relationship includes the node itself; 1-degree relationship includes the node's direct neighbors and their connecting edges, etc.\n * For an edge, 0-degree relationship includes the edge itself; 1-degree relationship includes the edge and its two endpoints, etc\n * @param graph - <zh/>  | <en/> graph instance\n * @param elementType - <zh/>  | <en/> element type\n * @param elementId - <zh/>  ID | <en/> start element ID\n * @param degree - <zh/>  | <en/> the specified degree\n * @param direction - <zh/>  | <en/> edge direction\n * @returns - <zh/>  ID  | <en/> Returns an array of node and edge IDs\n */\nexport function getElementNthDegreeIds(\n  graph: Graph,\n  elementType: ElementType,\n  elementId: ID,\n  degree: number,\n  direction: EdgeDirection = 'both',\n): ID[] {\n  if (elementType === 'combo' || elementType === 'node') {\n    return getNodeNthDegreeIds(graph, elementId, degree, direction);\n  }\n\n  const edgeData = graph.getEdgeData(elementId);\n  if (!edgeData) return [];\n\n  const sourceRelations = getNodeNthDegreeIds(graph, edgeData.source, degree - 1, direction);\n  const targetRelations = getNodeNthDegreeIds(graph, edgeData.target, degree - 1, direction);\n\n  return Array.from(new Set<ID>([...sourceRelations, ...targetRelations, elementId]));\n}\n\n/**\n * <zh/>  n  ID\n *\n * <en/> Get all elements IDs within n-degree relationship of the specified node\n * @remarks\n * <zh/>  0 1 \n * @param direction\n * <en/> 0-degree relationship of a node is the node itself; 1-degree relationship is the node's neighboring nodes and related edges, etc\n * @param graph - <zh/>  | <en/> graph instance\n * @param startNodeId - <zh/>  ID | <en/> The ID of the starting node\n * @param degree - <zh/>  | <en/> The specified degree\n * @param direction - <zh/>  | <en/> The direction of the edge\n * @returns - <zh/>  ID  | <en/> Returns an array of node and edge IDs\n */\nexport function getNodeNthDegreeIds(\n  graph: Graph,\n  startNodeId: ID,\n  degree: number,\n  direction: EdgeDirection = 'both',\n): ID[] {\n  const visitedNodes = new Set<ID>();\n  const visitedEdges = new Set<ID>();\n  const relations = new Set<ID>();\n\n  bfs(\n    startNodeId,\n    (nodeId: ID, depth: number) => {\n      if (depth > degree) return;\n      relations.add(nodeId);\n\n      graph.getRelatedEdgesData(nodeId, direction).forEach((edge) => {\n        const edgeId = idOf(edge);\n        if (!visitedEdges.has(edgeId) && depth < degree) {\n          relations.add(edgeId);\n          visitedEdges.add(edgeId);\n        }\n      });\n    },\n    (nodeId: ID) => {\n      return graph\n        .getRelatedEdgesData(nodeId, direction)\n        .map((edge) => (edge.source === nodeId ? edge.target : edge.source))\n        .filter((neighborNodeId) => {\n          if (!visitedNodes.has(neighborNodeId)) {\n            visitedNodes.add(neighborNodeId);\n            return true;\n          }\n          return false;\n        });\n    },\n  );\n\n  return Array.from(relations);\n}\n", "import type { ElementDatum } from '../types';\n\n/**\n * <zh/> \n *\n * <en/> Get the state of the element\n * @param datum - <zh/>  <en/> Element data\n * @returns <zh/>  <en/> State list\n */\nexport function statesOf(datum: ElementDatum) {\n  return datum.states || [];\n}\n", "import { isFunction } from '@antv/util';\nimport { CanvasEvent, CommonEvent } from '../constants';\nimport { ELEMENT_TYPES } from '../constants/element';\nimport type { RuntimeContext } from '../runtime/types';\nimport type { Element, ElementType, ID, IPointerEvent, State } from '../types';\nimport { idOf } from '../utils/id';\nimport { getElementNthDegreeIds } from '../utils/relation';\nimport type { ShortcutKey } from '../utils/shortcut';\nimport { Shortcut } from '../utils/shortcut';\nimport { statesOf } from '../utils/state';\nimport type { BaseBehaviorOptions } from './base-behavior';\nimport { BaseBehavior } from './base-behavior';\n\n/**\n * <zh/> \n *\n * <en/> Click element behavior options\n */\nexport interface ClickSelectOptions extends BaseBehaviorOptions {\n  /**\n   * <zh/> \n   *\n   * <en/> Whether to enable animation\n   * @defaultValue true\n   */\n  animation?: boolean;\n  /**\n   * <zh/> \n   *\n   * <en/> Whether to enable the function of clicking the element\n   * @defaultValue true\n   * @remarks\n   * <zh/> \n   *\n   * <en/> Whether to enable can be dynamically controlled by functions, such as only when nodes are selected.\n   *\n   * ```json\n   * { enable: event => event.targetType === 'node'}\n   * ```\n   */\n  enable?: boolean | ((event: IPointerEvent) => boolean);\n  /**\n   * <zh/> \n   *\n   * <en/> Whether to allow multiple selection\n   * @defaultValue false\n   */\n  multiple?: boolean;\n  /**\n   * <zh/> \n   *\n   * <en/> Press this shortcut key to apply multiple selection with mouse click\n   * @defaultValue ['shift']\n   */\n  trigger?: ShortcutKey;\n  /**\n   * <zh/> \n   *\n   * <en/> The state to be applied when an element is selected\n   * @defaultValue 'selected'\n   */\n  state?: State;\n  /**\n   * <zh/>  n n  degree  degree  1 \n   *\n   * <en/> The state to be applied to the neighboring elements within n degrees when an element is selected. The value of n is controlled by the degree property, for instance, a degree of 1 indicates direct neighbors\n   * @defaultValue 'selected'\n   */\n  neighborState?: State;\n  /**\n   * <zh/> \n   *\n   * <en/> The state to be applied to all unselected elements when some elements are selected, excluding the selected element and its affected neighbors\n   */\n  unselectedState?: State;\n  /**\n   * <zh/> \n   *\n   * <en/> The degree to determine the scope of influence\n   * @defaultValue 0\n   * @remarks\n   * <zh/> `0` `1` \n   *\n   * <zh/> `0` `1` \n   *\n   * <en/> For nodes, `0` means only the current node is selected, `1` means the current node and its directly adjacent nodes and edges are selected, etc.\n   *\n   * <en/> For edges, `0 `means only the current edge is selected,`1` means the current edge and its directly adjacent nodes are selected, etc.\n   */\n  degree?: number | ((event: IPointerEvent) => number);\n  /**\n   * <zh/> \n   *\n   * <en/> Callback when the element is clicked\n   * @param event - <zh/>  | <en/> click event\n   */\n  onClick?: (event: IPointerEvent) => void;\n}\n\n/**\n * <zh/> \n *\n * <en/> Click Element\n * @remarks\n * <zh/>  degree  `1` \n *\n * <en/> When the mouse clicks on an element, you can activate the state of the element, such as selecting nodes or edges. When the degree is 1, clicking on a node will highlight the current node and its directly adjacent nodes and edges.\n */\nexport class ClickSelect extends BaseBehavior<ClickSelectOptions> {\n  private shortcut: Shortcut;\n\n  static defaultOptions: Partial<ClickSelectOptions> = {\n    animation: true,\n    enable: true,\n    multiple: false,\n    trigger: ['shift'],\n    state: 'selected',\n    neighborState: 'selected',\n    unselectedState: undefined,\n    degree: 0,\n  };\n\n  constructor(context: RuntimeContext, options: ClickSelectOptions) {\n    super(context, Object.assign({}, ClickSelect.defaultOptions, options));\n    this.shortcut = new Shortcut(context.graph);\n    this.bindEvents();\n  }\n\n  private bindEvents() {\n    const { graph } = this.context;\n    this.unbindEvents();\n    ELEMENT_TYPES.forEach((type) => {\n      graph.on(`${type}:${CommonEvent.CLICK}`, this.onClickSelect);\n    });\n    graph.on(CanvasEvent.CLICK, this.onClickCanvas);\n  }\n\n  private onClickSelect = async (event: IPointerEvent<Element>) => {\n    if (!this.validate(event)) return;\n    await this.updateState(event);\n    this.options.onClick?.(event);\n  };\n\n  private onClickCanvas = async (event: IPointerEvent) => {\n    if (!this.validate(event)) return;\n    await this.clearState();\n    this.options.onClick?.(event);\n  };\n\n  private get isMultipleSelect() {\n    const { multiple, trigger } = this.options;\n    return multiple && this.shortcut.match(trigger);\n  }\n\n  protected getNeighborIds(event: IPointerEvent<Element>) {\n    const { target, targetType } = event;\n    const { graph } = this.context;\n    const { degree } = this.options;\n    return getElementNthDegreeIds(\n      graph,\n      targetType as ElementType,\n      target.id,\n      typeof degree === 'function' ? degree(event) : degree,\n    ).filter((id) => id !== target.id);\n  }\n\n  private async updateState(event: IPointerEvent<Element>) {\n    const { state: selectState, unselectedState, neighborState, animation } = this.options;\n    if (!selectState && !neighborState && !unselectedState) return;\n\n    const { target } = event;\n    const { graph } = this.context;\n\n    const datum = graph.getElementData(target.id);\n\n    const type = statesOf(datum).includes(selectState) ? 'unselect' : 'select';\n\n    const states: Record<ID, State[]> = {};\n\n    const isMultipleSelect = this.isMultipleSelect;\n\n    const click = [target.id];\n    const neighbor = this.getNeighborIds(event);\n\n    if (!isMultipleSelect) {\n      if (type === 'select') {\n        Object.assign(states, this.getClearStates(!!unselectedState));\n        const addState = (list: ID[], state: State) => {\n          list.forEach((id) => {\n            if (!states[id]) states[id] = graph.getElementState(id);\n            states[id].push(state);\n          });\n        };\n        addState(click, selectState);\n        addState(neighbor, neighborState);\n        if (unselectedState) {\n          Object.keys(states).forEach((id) => {\n            if (!click.includes(id) && !neighbor.includes(id)) states[id].push(unselectedState);\n          });\n        }\n      } else Object.assign(states, this.getClearStates());\n    } else {\n      Object.assign(states, this.getDataStates());\n\n      if (type === 'select') {\n        const addState = (list: ID[], state: State) => {\n          list.forEach((id) => {\n            const dataStatesSet = new Set(graph.getElementState(id));\n            dataStatesSet.add(state);\n            dataStatesSet.delete(unselectedState);\n            states[id] = Array.from(dataStatesSet);\n          });\n        };\n\n        addState(click, selectState);\n        addState(neighbor, neighborState);\n        if (unselectedState) {\n          Object.keys(states).forEach((id) => {\n            const _states = states[id];\n            if (\n              !_states.includes(selectState) &&\n              !_states.includes(neighborState) &&\n              !_states.includes(unselectedState)\n            ) {\n              states[id].push(unselectedState);\n            }\n          });\n        }\n      } else {\n        const targetState = states[target.id];\n        states[target.id] = targetState.filter((s) => s !== selectState && s !== neighborState);\n        if (!targetState.includes(unselectedState)) states[target.id].push(unselectedState);\n        neighbor.forEach((id) => {\n          states[id] = states[id].filter((s) => s !== neighborState);\n          if (!states[id].includes(selectState)) states[id].push(unselectedState);\n        });\n      }\n    }\n\n    await graph.setElementState(states, animation);\n  }\n\n  private getDataStates() {\n    const { graph } = this.context;\n    const { nodes, edges, combos } = graph.getData();\n\n    const states: Record<ID, State[]> = {};\n    [...nodes, ...edges, ...combos].forEach((data) => {\n      states[idOf(data)] = statesOf(data);\n    });\n\n    return states;\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Get the states that need to be cleared\n   * @param complete - <zh/>  | <en/> Whether to return all states\n   * @returns - <zh/>  | <en/> States that need to be cleared\n   */\n  private getClearStates(complete = false) {\n    const { graph } = this.context;\n    const { state, unselectedState, neighborState } = this.options;\n    const statesToClear = new Set([state, unselectedState, neighborState]);\n    const { nodes, edges, combos } = graph.getData();\n\n    const states: Record<ID, State[]> = {};\n    [...nodes, ...edges, ...combos].forEach((data) => {\n      const datumStates = statesOf(data);\n      const newStates = datumStates.filter((s) => !statesToClear.has(s));\n      if (complete) states[idOf(data)] = newStates;\n      else if (newStates.length !== datumStates.length) states[idOf(data)] = newStates;\n    });\n\n    return states;\n  }\n\n  private async clearState() {\n    const { graph } = this.context;\n    await graph.setElementState(this.getClearStates(), this.options.animation);\n  }\n\n  private validate(event: IPointerEvent) {\n    if (this.destroyed) return false;\n    const { enable } = this.options;\n    if (isFunction(enable)) return enable(event);\n    return !!enable;\n  }\n\n  private unbindEvents() {\n    const { graph } = this.context;\n\n    ELEMENT_TYPES.forEach((type) => {\n      graph.off(`${type}:${CommonEvent.CLICK}`, this.onClickSelect);\n    });\n    graph.off(CanvasEvent.CLICK, this.onClickCanvas);\n  }\n\n  public destroy() {\n    this.unbindEvents();\n    super.destroy();\n  }\n}\n", "import type { NodeLikeData } from '../types';\n\n/**\n * <zh/> /\n *\n * <en/> Determine whether the node/combo is collapsed\n * @param nodeLike - <zh/>/ | <en/>Node/Combo data\n * @returns <zh/> | <en/>Whether it is collapsed\n */\nexport function isCollapsed(nodeLike: NodeLikeData) {\n  return !!nodeLike.style?.collapsed;\n}\n", "import { lowerFirst, upperFirst } from '@antv/util';\nimport type { ReplacePrefix } from '../types';\n\n/**\n * <zh/> \n *\n * <en/> Whether starts with prefix\n * @param str - <zh/>  | <en/> string\n * @param prefix - <zh/>  | <en/> prefix\n * @returns <zh/>  | <en/> whether starts with prefix\n */\nexport function startsWith(str: string, prefix: string) {\n  if (!str.startsWith(prefix)) return false;\n  const nextChart = str[prefix.length];\n  return nextChart >= 'A' && nextChart <= 'Z';\n}\n\n/**\n * <zh/> \n *\n * <en/> Add prefix\n * @param str - <zh/>  | <en/> string\n * @param prefix - <zh/>  | <en/> prefix\n * @returns <zh/>  | <en/> string with prefix\n */\nexport function addPrefix(str: string, prefix: string): string {\n  return `${prefix}${upperFirst(str)}`;\n}\n\n/**\n * <zh/> \n *\n * <en/> Remove prefix\n * @param string - <zh/>  | <en/> string\n * @param prefix - <zh/>  | <en/> prefix\n * @param lowercaseFirstLetter - <zh/>  | <en/> whether lowercase first letter\n * @returns <zh/>  | <en/> string without prefix\n */\nexport function removePrefix(string: string, prefix?: string, lowercaseFirstLetter: boolean = true) {\n  if (!prefix) return string;\n  if (!startsWith(string, prefix)) return string;\n  const str = string.slice(prefix.length);\n  return lowercaseFirstLetter ? lowerFirst(str) : str;\n}\n\n/**\n * <zh/> \n *\n * <en/> Extract sub style from style\n * @param style - <zh/>  | <en/> style\n * @param prefix - <zh/>  | <en/> sub style prefix\n * @returns <zh/>  | <en/> sub style\n */\nexport function subStyleProps<T extends Record<string, any>>(style: object, prefix: string) {\n  const subStyle = Object.entries(style).reduce((acc, [key, value]) => {\n    if (key === 'className' || key === 'class') return acc;\n    if (startsWith(key, prefix)) {\n      Object.assign(acc, { [removePrefix(key, prefix)]: value });\n    }\n    return acc;\n  }, {} as T);\n\n  // \n  // Pass down opacity, but avoid overwriting the opacity property in the sub-style\n  if ('opacity' in style) {\n    const subOpacityKey = addPrefix('opacity', prefix) as keyof typeof style;\n    const opacity = style.opacity as number;\n\n    if (subOpacityKey in style) {\n      const subOpacity = style[subOpacityKey] as number;\n      Object.assign(subStyle, { opacity: opacity * subOpacity });\n    } else Object.assign(subStyle, { opacity });\n  }\n\n  return subStyle;\n}\n\n/**\n * <zh/> \n *\n * <en/> Extract properties with the specified prefix from the object and remove the prefix\n * @param obj - <zh/>  | <en/> object\n * @param prefix - <zh/>  | <en/> prefix\n * @returns <zh/>  | <en/> new object\n */\nexport function subObject(obj: Record<string, any>, prefix: string): Record<string, any> {\n  const prefixLength = prefix.length;\n\n  return Object.keys(obj).reduce(\n    (acc, key) => {\n      if (key.startsWith(prefix)) {\n        const newKey = key.slice(prefixLength);\n        acc[newKey] = obj[key];\n      }\n      return acc;\n    },\n    {} as Record<string, any>,\n  );\n}\n\n/**\n * <zh/> \n *\n * <en/> Omit sub style from style\n * @param style - <zh/>  | <en/> style\n * @param prefix - <zh/>  | <en/> sub style prefix\n * @returns <zh/>  | <en/> style without sub style\n */\nexport function omitStyleProps<T extends Record<string, any>>(style: Record<string, any>, prefix: string | string[]) {\n  const prefixArray = typeof prefix === 'string' ? [prefix] : prefix;\n  const omitStyle: Record<string, any> = {};\n  Object.keys(style).forEach((key) => {\n    if (!prefixArray.find((p) => key.startsWith(p))) {\n      omitStyle[key] = style[key];\n    }\n  });\n  return omitStyle as T;\n}\n\n/**\n * <zh/> \n *\n * <en/> Replace prefix\n * @param style - <zh/>  | <en/> style\n * @param oldPrefix - <zh/>  | <en/> old prefix\n * @param newPrefix - <zh/>  | <en/> new prefix\n * @returns <zh/>  | <en/> style with replaced prefix\n */\nexport function replacePrefix<T extends object>(style: T, oldPrefix: string, newPrefix: string) {\n  return Object.entries(style).reduce(\n    (acc, [key, value]) => {\n      if (startsWith(key, oldPrefix)) {\n        acc[addPrefix(removePrefix(key, oldPrefix, false), newPrefix) as keyof typeof acc] = value;\n      } else {\n        acc[key as keyof typeof acc] = value;\n      }\n      return acc;\n    },\n    {} as ReplacePrefix<T, typeof oldPrefix, typeof newPrefix>,\n  );\n}\n", "import type { STDSize, Size } from '../types';\n\n/**\n * <zh/> \n *\n * <en/> Parse size configuration\n * @param size - <zh/>  | <en/> size configuration\n * @returns <zh/>  | <en/> standard size format\n */\nexport function parseSize(size: Size = 0): STDSize {\n  if (typeof size === 'number') return [size, size, size] as STDSize;\n  const [x, y = x, z = x] = size;\n  return [x, y, z];\n}\n", "import type { DisplayObjectConfig } from '@antv/g';\nimport type { Graph } from '../runtime/graph';\nimport type { ElementDatum, StyleIterationContext } from '../types';\n\n/**\n * <zh/> \n *\n * <en/> compute dynamic style that supports callback\n * @param callableStyle - <zh/>  | <en/> dynamic style\n * @param context - <zh/>  | <en/> style iteration context\n * @returns <zh/>  | <en/> static style\n */\nexport function computeElementCallbackStyle(\n  callableStyle:\n    | Record<string, unknown>\n    | ((this: Graph, datum: ElementDatum) => Record<string, unknown>)\n    | {\n        [key: string]: (this: Graph, datum: ElementDatum) => unknown;\n      },\n  context: StyleIterationContext,\n) {\n  const { datum, graph } = context;\n\n  if (typeof callableStyle === 'function') return callableStyle.call(graph, datum);\n\n  return Object.fromEntries(\n    Object.entries(callableStyle).map(([key, style]) => {\n      if (typeof style === 'function') return [key, style.call(graph, datum)];\n      return [key, style];\n    }),\n  );\n}\n\n/**\n * <zh/> \n *\n * <en/> Merge shape configuration\n * @param defaultOptions - <zh/> 1 | <en/> configuration 1\n * @param modifiedOptions - <zh/> 2 | <en/> configuration 2\n * @returns <zh/>  | <en/> merged configuration\n */\nexport function mergeOptions(\n  defaultOptions: DisplayObjectConfig<any>,\n  modifiedOptions: DisplayObjectConfig<any>,\n): DisplayObjectConfig<any> {\n  const s1 = defaultOptions?.style || {};\n  const s2 = modifiedOptions?.style || {};\n  for (const key in s1) {\n    if (!(key in s2)) s2[key] = s1[key];\n  }\n\n  return Object.assign({}, defaultOptions, modifiedOptions, {\n    style: s2,\n  });\n}\n\n/**\n * <zh/> \n *\n * <en/> Get the style of the sub-shape of the shape\n * @param style - <zh/>  | <en/> shape style\n * @returns <zh/>  | <en/> sub-shape style\n * @remarks\n * <zh/> \n *\n * <en/> Extracts the shape styles from a given attribute object.\n * Removes specific styles like position, transformation, and class name.\n */\nexport function getSubShapeStyle<T extends Record<string, any>>(\n  style: T,\n): Omit<T, 'x' | 'y' | 'z' | 'transform' | 'transformOrigin' | 'className' | 'class' | 'zIndex' | 'visibility'> {\n  const { x, y, z, class: cls, className, transform, transformOrigin, zIndex, visibility, ...rest } = style;\n  return rest;\n}\n", "import type { IconStyleProps } from '../elements/shapes';\nimport type { Size } from '../types';\nimport { parseSize } from './size';\n\n/**\n * <zh/> \n *\n * <en/> Infer the icon size according to key size if icon size is not manually specified\n * @param size - <zh/>  | <en/> Key size\n * @param iconStyle - <zh/>  | <en/> Icon style\n * @returns <zh/>  | <en/> Icon style\n */\nexport function inferIconStyle(size: Size, iconStyle: IconStyleProps): IconStyleProps {\n  const stdSize = parseSize(size);\n  let style = {};\n\n  if (iconStyle.text && !iconStyle.fontSize) style = { fontSize: Math.min(...stdSize) * 0.5 };\n\n  if (iconStyle.src && (!iconStyle.width || !iconStyle.height))\n    style = { width: stdSize[0] * 0.5, height: stdSize[1] * 0.5 };\n\n  return style;\n}\n", "import { groupBy } from '@antv/util';\nimport type { CategoricalPalette } from '../palettes/types';\nimport { getExtension } from '../registry/get';\nimport type { PaletteOptions, STDPaletteOptions } from '../spec/element/palette';\nimport type { ID } from '../types';\nimport type { ElementData, ElementDatum } from '../types/data';\nimport { idOf } from './id';\nimport { format } from './print';\n\n/**\n * <zh/> \n *\n * <en/> Parse palette options\n * @param palette - <zh/>  | <en/> PaletteOptions options\n * @returns <zh/>  | <en/> Standard palette options\n */\nexport function parsePalette(palette?: PaletteOptions): STDPaletteOptions | undefined {\n  if (!palette) return undefined;\n\n  if (\n    //  palette name\n    typeof palette === 'string' ||\n    //  interpolate function\n    typeof palette === 'function' ||\n    //  color array\n    Array.isArray(palette)\n  ) {\n    // \n    // Default to discrete palette, default group field is id\n    return {\n      type: 'group',\n      field: (d: any) => d.id,\n      color: palette,\n      invert: false,\n    };\n  }\n  return palette;\n}\n\n/**\n * <zh/> \n *\n * <en/> Assign colors according to the palette\n * @param data - <zh/>  | <en/> Element data\n * @param palette - <zh/>  | <en/> PaletteOptions options\n * @returns <zh/>  | <en/> Element color\n * @remarks\n * <zh/>  id  key value \n *\n * <en/> The return value is an object with element id as key and color value as value\n */\nexport function assignColorByPalette(data: ElementData, palette?: STDPaletteOptions) {\n  if (!palette) return {};\n\n  const { type, color: colorPalette, field, invert } = palette;\n\n  const assignColor = (args: [ID, number][]): Record<ID, string> => {\n    const palette = typeof colorPalette === 'string' ? getExtension('palette', colorPalette) : colorPalette;\n\n    if (typeof palette === 'function') {\n      // assign by continuous\n      const result: Record<ID, string> = {};\n      args.forEach(([id, value]) => {\n        result[id] = palette(invert ? 1 - value : value);\n      });\n      return result;\n    } else if (Array.isArray(palette)) {\n      // assign by discrete\n      const colors = invert ? [...palette].reverse() : palette;\n      const result: Record<ID, string> = {};\n      args.forEach(([id, index]) => {\n        result[id] = colors[index % palette.length];\n      });\n      return result;\n    }\n    return {};\n  };\n\n  const parseField = (field: STDPaletteOptions['field'], datum: ElementDatum) =>\n    typeof field === 'string' ? datum.data?.[field] : field?.(datum);\n\n  if (type === 'group') {\n    const groupData = groupBy<ElementDatum>(data, (datum) => {\n      if (!field) return 'default';\n      const key = parseField(field, datum);\n      return key ? String(key) : 'default';\n    });\n\n    const groupKeys = Object.keys(groupData);\n    const assignResult = assignColor(groupKeys.map((key, index) => [key, index]));\n\n    const result: Record<ID, string> = {};\n    Object.entries(groupData).forEach(([groupKey, groupData]) => {\n      groupData.forEach((datum) => {\n        result[idOf(datum)] = assignResult[groupKey];\n      });\n    });\n    return result;\n  } else if (type === 'value') {\n    const [min, max] = data.reduce(\n      ([min, max], datum) => {\n        const value = parseField(field, datum);\n        if (typeof value !== 'number') throw new Error(format(`Palette field ${field} is not a number`));\n        return [Math.min(min, value), Math.max(max, value)];\n      },\n      [Infinity, -Infinity],\n    );\n    const range = max - min;\n\n    return assignColor(\n      data.map((datum) => [datum.id, ((parseField(field, datum) as number) - min) / range]) as [ID, number][],\n    );\n  }\n}\n\n/**\n * <zh/> \n *\n * <en/> Get discrete palette colors\n * @param colorPalette - <zh/>  | <en/> Palette name or color array\n * @returns <zh/>  | <en/> Specific color on the palette\n */\nexport function getPaletteColors(colorPalette?: string | CategoricalPalette): CategoricalPalette | undefined {\n  const palette = typeof colorPalette === 'string' ? getExtension('palette', colorPalette) : colorPalette;\n  if (typeof palette === 'function') return undefined;\n  return palette;\n}\n", "import { AABB } from '@antv/g';\nimport type { Point } from '../types';\nimport { distance } from './vector';\n\n/**\n * Get WordWrapWidth for a text according the the length of the label and 'maxWidth'.\n * @param length  - length\n * @param maxWidth - maxWidth\n * @returns wordWrapWidth\n */\nexport function getWordWrapWidthWithBase(length: number, maxWidth: string | number): number {\n  let wordWrapWidth = 2 * length;\n  if (typeof maxWidth === 'string') {\n    wordWrapWidth = (length * Number(maxWidth.replace('%', ''))) / 100;\n  } else if (typeof maxWidth === 'number') {\n    wordWrapWidth = maxWidth;\n  }\n  if (isNaN(wordWrapWidth)) wordWrapWidth = 2 * length;\n  return wordWrapWidth;\n}\n\n/**\n * Get the proper wordWrapWidth for a labelShape according the the 'maxWidth' of keyShape.\n * @param keyShapeBox - keyShapeBox\n * @param maxWidth - maxWidth\n * @param zoom - zoom\n * @param enableBalanceShape - enableBalanceShape\n * @returns Get WordWrapWidth by bbox\n */\nexport function getWordWrapWidthByBox(\n  keyShapeBox: AABB,\n  maxWidth: string | number,\n  zoom = 1,\n  enableBalanceShape = false,\n): number {\n  const balanceZoom = enableBalanceShape ? zoom : 1;\n  const keyShapeWidth = (keyShapeBox.max[0] - keyShapeBox.min[0]) * balanceZoom;\n  return getWordWrapWidthWithBase(keyShapeWidth, maxWidth);\n}\n\n/**\n * Get the proper wordWrapWidth for a labelShape according the the distance between two end points and 'maxWidth'.\n * @param points - points\n * @param maxWidth - maxWidth\n * @param zoom - zoom\n * @returns - wordWrapWidth for text\n */\nexport function getWordWrapWidthByEnds(points: [Point, Point], maxWidth: string | number, zoom = 1): number {\n  const dist = distance(points[0], points[1]) * zoom;\n  return getWordWrapWidthWithBase(dist, maxWidth);\n}\n", "import type { BaseStyleProps, DisplayObject, DisplayObjectConfig, Group, IAnimation } from '@antv/g';\nimport { CustomElement } from '@antv/g';\nimport { isEmpty, isFunction, upperFirst } from '@antv/util';\nimport { ExtensionCategory } from '../../constants';\nimport type { Keyframe } from '../../types';\nimport { createAnimationsProxy, preprocessKeyframes } from '../../utils/animation';\nimport { setAttributes, updateStyle } from '../../utils/element';\nimport { subObject } from '../../utils/prefix';\nimport { format } from '../../utils/print';\nimport { getSubShapeStyle } from '../../utils/style';\nimport { replaceTranslateInTransform } from '../../utils/transform';\nimport { setVisibility } from '../../utils/visibility';\nimport { getExtension } from './../../registry/get';\n\nexport interface BaseShapeStyleProps extends BaseStyleProps {}\n\n/**\n * <zh/> \n *\n * <en/> Base class for shapes\n */\nexport abstract class BaseShape<StyleProps extends BaseShapeStyleProps> extends CustomElement<StyleProps> {\n  constructor(options: DisplayObjectConfig<StyleProps>) {\n    applyTransform(options.style);\n    super(options);\n    this.render(this.attributes as Required<StyleProps>, this);\n    this.setVisibility();\n    this.bindEvents();\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> parsed attributes\n   * @returns <zh/>  | <en/> parsed attributes\n   * @internal\n   */\n  protected get parsedAttributes() {\n    return this.attributes as Required<StyleProps>;\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> shape instance map\n   * @internal\n   */\n  protected shapeMap: Record<string, DisplayObject> = {};\n\n  /**\n   * <zh/> \n   *\n   * <en/> animation instance map\n   * @internal\n   */\n  protected animateMap: Record<string, IAnimation> = {};\n\n  /**\n   * <zh/> \n   *\n   * <en/> create, update or remove shape\n   * @param className - <zh/>  | <en/> shape name\n   * @param Ctor - <zh/>  | <en/> shape type\n   * @param style - <zh/>  false | <en/> shape style. Pass false to remove the shape\n   * @param container - <zh/>  | <en/> container\n   * @param hooks - <zh/>  | <en/> hooks\n   * @returns <zh/>  | <en/> shape instance\n   */\n  protected upsert<T extends DisplayObject>(\n    className: string,\n    Ctor: string | { new (...args: any[]): T },\n    style: T['attributes'] | false,\n    container: DisplayObject,\n    hooks?: UpsertHooks,\n  ): T | undefined {\n    const target = this.shapeMap[className] as T | undefined;\n    // remove\n    //  style  false / remove shape if style is false\n    if (style === false) {\n      if (target) {\n        hooks?.beforeDestroy?.(target);\n        container.removeChild(target);\n        delete this.shapeMap[className];\n        hooks?.afterDestroy?.(target);\n      }\n      return;\n    }\n\n    const _Ctor = typeof Ctor === 'string' ? getExtension(ExtensionCategory.SHAPE, Ctor) : Ctor;\n\n    if (!_Ctor) {\n      throw new Error(format(`Shape ${Ctor} not found`));\n    }\n\n    // create\n    if (!target || target.destroyed || !(target instanceof _Ctor)) {\n      if (target) {\n        hooks?.beforeDestroy?.(target);\n        target?.destroy();\n        hooks?.afterDestroy?.(target);\n      }\n\n      hooks?.beforeCreate?.();\n      const instance = new _Ctor({ className, style });\n      container.appendChild(instance);\n      this.shapeMap[className] = instance;\n      hooks?.afterCreate?.(instance);\n      return instance as T;\n    }\n\n    // update\n    hooks?.beforeUpdate?.(target);\n    updateStyle(target, style);\n    hooks?.afterUpdate?.(target);\n\n    return target;\n  }\n\n  public update(attr: Partial<StyleProps> = {}): void {\n    const attributes = Object.assign({}, this.attributes, attr) as Required<StyleProps>;\n    applyTransform(attributes);\n    setAttributes(this, attributes);\n    this.render(attributes, this);\n    this.setVisibility();\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> will be called automatically when initializing\n   * @param attributes\n   * @param container\n   */\n  public abstract render(attributes: Required<StyleProps>, container: Group): void;\n\n  public bindEvents() {}\n\n  /**\n   * <zh/> \n   *\n   * <en/> Extracts the shape styles from a given attribute object.\n   * Removes specific styles like position, transformation, and class name.\n   * @param style - <zh/>  | <en/> attribute object\n   * @returns <zh/>  | <en/> An object containing only the style properties.\n   */\n  public getGraphicStyle<T extends Record<string, any>>(\n    style: T,\n  ): Omit<T, 'x' | 'y' | 'z' | 'transform' | 'transformOrigin' | 'className' | 'class' | 'zIndex' | 'visibility'> {\n    return getSubShapeStyle(style);\n  }\n\n  /**\n   * Get the prefix pairs for composite shapes used to handle animation\n   * @returns tuples array where each tuple contains a key corresponding to a method `get${key}Style` and its shape prefix\n   * @internal\n   */\n  protected get compositeShapes(): [string, string][] {\n    return [\n      ['badges', 'badge-'],\n      ['ports', 'port-'],\n    ];\n  }\n\n  public animate(keyframes: Keyframe[], options?: number | KeyframeAnimationOptions): IAnimation | null {\n    if (keyframes.length === 0) return null;\n    const animationMap: IAnimation[] = [];\n\n    //  keyframes  x/y/z  transform\n    // if x/y/z exists in keyframes, replace them with transform\n    if (keyframes[0].x !== undefined || keyframes[0].y !== undefined || keyframes[0].z !== undefined) {\n      const { x: _x = 0, y: _y = 0, z: _z = 0 } = this.attributes as Record<string, any>;\n      keyframes.forEach((keyframe) => {\n        const { x = _x, y = _y, z = _z } = keyframe;\n        Object.assign(keyframe, { transform: z ? [['translate3d', x, y, z]] : [['translate', x, y]] });\n      });\n    }\n\n    const result = super.animate(keyframes, options);\n    if (result) {\n      releaseAnimation(this, result);\n      animationMap.push(result);\n    }\n\n    if (Array.isArray(keyframes) && keyframes.length > 0) {\n      //  keyframes  skippedAttrs \n      // if only skippedAttrs exist in keyframes, only update parent element attributes (skip child shapes)\n      const skippedAttrs = ['transform', 'transformOrigin', 'x', 'y', 'z', 'zIndex'];\n      if (Object.keys(keyframes[0]).some((attr) => !skippedAttrs.includes(attr))) {\n        Object.entries(this.shapeMap).forEach(([key, shape]) => {\n          //  `get${key}Style` \n          // if there is a method named `get${key}Style`, use this method to get style and automatically create animation for the shape instance\n          const methodName = `get${upperFirst(key)}Style` as keyof this;\n          const method = this[methodName];\n\n          if (isFunction(method)) {\n            const subKeyframes: Keyframe[] = keyframes.map((style) =>\n              method.call(this, { ...this.attributes, ...style }),\n            );\n            const result = shape.animate(preprocessKeyframes(subKeyframes), options);\n            if (result) {\n              releaseAnimation(shape, result);\n              animationMap.push(result);\n            }\n          }\n        });\n\n        const handleCompositeShapeAnimation = (shapeSet: Record<string, DisplayObject>, name: string) => {\n          if (!isEmpty(shapeSet)) {\n            const methodName = `get${upperFirst(name)}Style` as keyof this;\n            const method = this[methodName];\n            if (isFunction(method)) {\n              const itemsKeyframes = keyframes.map((style) => method.call(this, { ...this.attributes, ...style }));\n              Object.entries(itemsKeyframes[0]).map(([key]) => {\n                const subKeyframes = itemsKeyframes.map((styles) => styles[key]);\n                const shape = shapeSet[key];\n                if (shape) {\n                  const result = shape.animate(preprocessKeyframes(subKeyframes), options);\n                  if (result) {\n                    releaseAnimation(shape, result);\n                    animationMap.push(result);\n                  }\n                }\n              });\n            }\n          }\n        };\n\n        this.compositeShapes.forEach(([key, prefix]) => {\n          const shapeSet = subObject(this.shapeMap, prefix);\n          handleCompositeShapeAnimation(shapeSet, key);\n        });\n      }\n    }\n\n    return createAnimationsProxy(animationMap);\n  }\n\n  public getShape<T extends DisplayObject>(name: string): T {\n    return this.shapeMap[name] as T;\n  }\n\n  private setVisibility() {\n    const { visibility } = this.attributes;\n    setVisibility(this, visibility);\n  }\n\n  public destroy(): void {\n    this.shapeMap = {};\n    this.animateMap = {};\n    super.destroy();\n  }\n}\n\n/**\n * <zh/> \n *\n * <en/> Release animation\n * @param target - <zh/>  | <en/> target object\n * @param animation - <zh/>  | <en/> animation instance\n * @description see: https://github.com/antvis/G/issues/1731\n */\nfunction releaseAnimation(target: DisplayObject, animation: IAnimation) {\n  animation?.finished.then(() => {\n    // @ts-expect-error private property\n    const index = target.activeAnimations.findIndex((_) => _ === animation);\n    // @ts-expect-error private property\n    if (index > -1) target.activeAnimations.splice(index, 1);\n  });\n}\n\n/**\n * <zh/>  upsert \n *\n * <en/> Shape upsert method lifecycle hooks\n */\nexport interface UpsertHooks {\n  /**\n   * <zh/> \n   *\n   * <en/> Before creating the shape\n   */\n  beforeCreate?: () => void;\n  /**\n   * <zh/> \n   *\n   * <en/> After creating the shape\n   * @param instance - <zh/>  | <en/> shape instance\n   */\n  afterCreate?: (instance: DisplayObject) => void;\n  /**\n   * <zh/> \n   *\n   * <en/> Before updating the shape\n   * @param instance - <zh/>  | <en/> shape instance\n   */\n  beforeUpdate?: (instance: DisplayObject) => void;\n  /**\n   * <zh/> \n   *\n   * <en/> After updating the shape\n   * @param instance - <zh/>  | <en/> shape instance\n   */\n  afterUpdate?: (instance: DisplayObject) => void;\n  /**\n   * <zh/> \n   *\n   * <en/> Before destroying the shape\n   * @param instance - <zh/>  | <en/> shape instance\n   */\n  beforeDestroy?: (instance: DisplayObject) => void;\n  /**\n   * <zh/> \n   *\n   * <en/> After destroying the shape\n   * @param instance - <zh/>  | <en/> shape instance\n   */\n  afterDestroy?: (instance: DisplayObject) => void;\n}\n\n/**\n * <zh/>  transform\n *\n * <en/> Apply transform\n * @param style - <zh/>  | <en/> style\n * @returns <zh/>  | <en/> style\n */\nfunction applyTransform(style?: BaseShapeStyleProps) {\n  if (!style) return {};\n  if ('x' in style || 'y' in style || 'z' in style) {\n    const { x = 0, y = 0, z, transform } = style as any;\n    const newTransform = replaceTranslateInTransform(x, y, z, transform);\n    if (newTransform) style.transform = newTransform;\n  }\n  return style;\n}\n", "import { DisplayObjectConfig, Group, Rect, RectStyleProps, Text, TextStyleProps } from '@antv/g';\nimport type { Padding } from '../../types/padding';\nimport type { Prefix } from '../../types/prefix';\nimport { parsePadding } from '../../utils/padding';\nimport { omitStyleProps, startsWith, subStyleProps } from '../../utils/prefix';\nimport { mergeOptions } from '../../utils/style';\nimport { BaseShape } from './base-shape';\n\n/**\n * <zh/> \n *\n * <en/> Label style\n */\nexport interface LabelStyleProps extends TextStyleProps, Prefix<'background', RectStyleProps> {\n  /**\n   * <zh/> \n   *\n   * <en/> Whether to show background\n   */\n  background?: boolean;\n  /**\n   * <zh/> \n   *\n   * <en/> Label padding\n   * @defaultValue 0\n   */\n  padding?: Padding;\n}\n\n/**\n * <zh/> \n *\n * <en/> Label\n * @remarks\n * <zh/> \n *\n * <en/> Label is a text shape with background.\n */\nexport class Label extends BaseShape<LabelStyleProps> {\n  static defaultStyleProps: Partial<LabelStyleProps> = {\n    padding: 0,\n    fontSize: 12,\n    fontFamily: 'system-ui, sans-serif',\n    wordWrap: true,\n    maxLines: 1,\n    wordWrapWidth: 128,\n    textOverflow: '...',\n    textBaseline: 'middle',\n    backgroundOpacity: 0.75,\n    backgroundZIndex: -1,\n    backgroundLineWidth: 0,\n  };\n\n  constructor(options: DisplayObjectConfig<LabelStyleProps>) {\n    super(mergeOptions({ style: Label.defaultStyleProps }, options));\n  }\n\n  protected isTextStyle(key: string) {\n    return startsWith(key, 'label');\n  }\n\n  protected isBackgroundStyle(key: string) {\n    return startsWith(key, 'background');\n  }\n\n  protected getTextStyle(attributes: Required<LabelStyleProps>) {\n    const { padding, ...style } = this.getGraphicStyle(attributes);\n    return omitStyleProps<TextStyleProps>(style, 'background');\n  }\n\n  protected getBackgroundStyle(attributes: Required<LabelStyleProps>) {\n    if (attributes.background === false) return false;\n\n    const style = this.getGraphicStyle(attributes);\n    const { wordWrap, wordWrapWidth, padding } = style;\n    const backgroundStyle = subStyleProps<RectStyleProps>(style, 'background');\n\n    const {\n      min: [minX, minY],\n      center: [centerX, centerY],\n      halfExtents: [halfWidth, halfHeight],\n    } = this.shapeMap.text.getGeometryBounds();\n\n    const [top, right, bottom, left] = parsePadding(padding);\n    const totalWidth = halfWidth * 2 + left + right;\n\n    const { width, height } = backgroundStyle;\n    if (width && height) {\n      Object.assign(backgroundStyle, { x: centerX - Number(width) / 2, y: centerY - Number(height) / 2 });\n    } else {\n      Object.assign(backgroundStyle, {\n        x: minX - left,\n        y: minY - top,\n        width: wordWrap ? Math.min(totalWidth, wordWrapWidth + left + right) : totalWidth,\n        height: halfHeight * 2 + top + bottom,\n      });\n    }\n\n    // parse percentage radius\n    const { radius } = backgroundStyle;\n    // if radius look like '10%', convert it to number\n    if (typeof radius === 'string' && radius.endsWith('%')) {\n      const percentage = Number(radius.replace('%', '')) / 100;\n      backgroundStyle.radius = Math.min(+backgroundStyle.width, +backgroundStyle.height) * percentage;\n    }\n\n    return backgroundStyle;\n  }\n\n  public render(attributes: Required<LabelStyleProps> = this.parsedAttributes, container: Group = this): void {\n    this.upsert('text', Text, this.getTextStyle(attributes), container);\n    this.upsert('background', Rect, this.getBackgroundStyle(attributes), container);\n  }\n\n  public getGeometryBounds() {\n    const shape = this.getShape('background') || this.getShape('text');\n    return shape.getGeometryBounds();\n  }\n}\n", "import type { DisplayObjectConfig, Group } from '@antv/g';\nimport { mergeOptions } from '../../utils/style';\nimport { BaseShape } from './base-shape';\nimport type { LabelStyleProps } from './label';\nimport { Label } from './label';\n\n/**\n * <zh/> \n *\n * <en/> Badge style\n */\nexport interface BadgeStyleProps extends LabelStyleProps {}\n\n/**\n * <zh/> \n *\n * <en/> Badge\n * @remarks\n * <zh/> \n *\n * <en/> Badge is a special label, usually used to display quantity or status information.\n */\nexport class Badge extends BaseShape<BadgeStyleProps> {\n  static defaultStyleProps: Partial<BadgeStyleProps> = {\n    padding: [2, 4, 2, 4],\n    fontSize: 10,\n    wordWrap: false,\n    backgroundRadius: '50%',\n    backgroundOpacity: 1,\n  };\n\n  constructor(options: DisplayObjectConfig<BadgeStyleProps>) {\n    super(mergeOptions({ style: Badge.defaultStyleProps }, options));\n  }\n\n  protected getBadgeStyle(attributes: Required<BadgeStyleProps>) {\n    return this.getGraphicStyle(attributes);\n  }\n\n  public render(attributes: Required<BadgeStyleProps> = this.parsedAttributes, container: Group = this) {\n    this.upsert('label', Label, this.getBadgeStyle(attributes), container);\n  }\n\n  public getGeometryBounds() {\n    const labelShape = this.getShape<BaseShape<LabelStyleProps>>('label');\n    const shape = labelShape.getShape('background') || labelShape.getShape('text');\n    return shape.getGeometryBounds();\n  }\n}\n", "import type { PathArray, PathCommand } from '@antv/util';\nimport type { Point } from '../types';\n\n/**\n * <zh/> points  path \n *\n * <en/> points transform path.\n * @param points Point[]\n * @param isClose boolean\n * @returns path string[][]\n */\nexport function pointsToPath(points: Point[], isClose = true): PathArray {\n  const path = [];\n\n  points.forEach((point, index) => {\n    path.push([index === 0 ? 'M' : 'L', ...point]);\n  });\n\n  if (isClose) {\n    path.push(['Z']);\n  }\n  return path as PathArray;\n}\n\nconst PATH_COMMANDS: Record<PathCommand, string[]> = {\n  M: ['x', 'y'],\n  m: ['dx', 'dy'],\n  H: ['x'],\n  h: ['dx'],\n  V: ['y'],\n  v: ['dy'],\n  L: ['x', 'y'],\n  l: ['dx', 'dy'],\n  Z: [],\n  z: [],\n  C: ['x1', 'y1', 'x2', 'y2', 'x', 'y'],\n  c: ['dx1', 'dy1', 'dx2', 'dy2', 'dx', 'dy'],\n  S: ['x2', 'y2', 'x', 'y'],\n  s: ['dx2', 'dy2', 'dx', 'dy'],\n  Q: ['x1', 'y1', 'x', 'y'],\n  q: ['dx1', 'dy1', 'dx', 'dy'],\n  T: ['x', 'y'],\n  t: ['dx', 'dy'],\n  A: ['rx', 'ry', 'rotation', 'large-arc', 'sweep', 'x', 'y'],\n  a: ['rx', 'ry', 'rotation', 'large-arc', 'sweep', 'dx', 'dy'],\n};\n\n/**\n * <zh/> \n *\n * <en/> Convert a path string to an array of path segments.\n * @param path - <zh/>  | <en/> path string\n * @returns <zh/>  | <en/> path segment array\n */\nexport function parsePath(path: string): PathArray {\n  const items = path\n    .replace(/[\\n\\r]/g, '')\n    .replace(/-/g, ' -')\n    .replace(/(\\d*\\.)(\\d+)(?=\\.)/g, '$1$2 ')\n    .trim()\n    .split(/\\s*,|\\s+/);\n  const segments = [];\n  let currentCommand = '' as PathCommand;\n  let currentElement: Record<string, any> = {};\n  while (items.length > 0) {\n    let it = items.shift()!;\n    if (it in PATH_COMMANDS) {\n      currentCommand = it as PathCommand;\n    } else {\n      items.unshift(it);\n    }\n    currentElement = { type: currentCommand };\n    PATH_COMMANDS[currentCommand].forEach((prop) => {\n      it = items.shift()!; // TODO sanity check\n      currentElement[prop] = it;\n    });\n    if (currentCommand === 'M') {\n      currentCommand = 'L';\n    } else if (currentCommand === 'm') {\n      currentCommand = 'l';\n    }\n    const [type, ...values] = Object.values(currentElement);\n    segments.push([type, ...values.map(Number)]);\n  }\n  return segments as unknown as PathArray;\n}\n\n/**\n * <zh/> \n *\n * <en/> Convert path to points array\n * @param path - <zh/>  <en/> path array\n * @returns\n */\nexport function pathToPoints(path: string | PathArray): Point[] {\n  const points: Point[] = [];\n  const segments = typeof path === 'string' ? parsePath(path) : path;\n\n  segments.forEach((seg) => {\n    const command = seg[0];\n    if (command === 'Z') {\n      points.push(points[0]);\n      return;\n    }\n    if (command !== 'A') {\n      for (let i = 1; i < seg.length; i = i + 2) {\n        points.push([seg[i] as number, seg[i + 1] as number, 0]);\n      }\n    } else {\n      const length = seg.length;\n      points.push([seg[length - 2] as number, seg[length - 1] as number, 0]);\n    }\n  });\n  return points;\n}\n\n/**\n * <zh/> \n *\n * <en/> Generate smooth closed curves\n * @param points - <zh/>  | <en/> points\n * @returns <zh/>  | <en/> smooth closed curves\n */\nexport const getClosedSpline = (points: Point[]): PathArray => {\n  if (points.length < 2)\n    return [\n      ['M', 0, 0],\n      ['L', 0, 0],\n    ];\n  const first = points[0];\n  const second = points[1];\n  const last = points[points.length - 1];\n  const lastSecond = points[points.length - 2];\n\n  points.unshift(lastSecond, last);\n  points.push(first, second);\n\n  const closedPath = [['M', last[0], last[1]]];\n  for (let i = 1; i < points.length - 2; i += 1) {\n    const [x0, y0] = points[i - 1];\n    const [x1, y1] = points[i];\n    const [x2, y2] = points[i + 1];\n    const [x3, y3] = i !== points.length - 2 ? points[i + 2] : [x2, y2];\n\n    const cp1x = x1 + (x2 - x0) / 6;\n    const cp1y = y1 + (y2 - y0) / 6;\n    const cp2x = x2 - (x3 - x1) / 6;\n    const cp2y = y2 - (y3 - y1) / 6;\n    closedPath.push(['C', cp1x, cp1y, cp2x, cp2y, x2, y2]);\n  }\n\n  return closedPath as PathArray;\n};\n", "import type { AABB, TextStyleProps } from '@antv/g';\nimport type { PathArray } from '@antv/util';\nimport { isEqual } from '@antv/util';\nimport type { CardinalPlacement, Point } from '../types';\nimport { pathToPoints } from './path';\nimport { findNearestLine, findNearestPointOnLine } from './point';\nimport { getXYByPlacement } from './position';\n\n/**\n * <zh/> \n *\n * <en/> Calculate text position style\n * @param bounds - <zh/>  | <en/> contour bounds\n * @param placement - <zh/>  | <en/> placement\n * @param offsetX - <zh/> x | <en/> x-axis offset\n * @param offsetY - <zh/> y | <en/> y-axis offset\n * @param closeToContour - <zh/>  | <en/> whether the label position is close to the contour\n * @param path - <zh/>  | <en/> path\n * @param autoRotate - <zh/>  | <en/> whether to rotate with the contour\n * @returns <zh/>  | <en/> text style\n */\nexport function getPolygonTextStyleByPlacement(\n  bounds: AABB,\n  placement: CardinalPlacement | 'center',\n  offsetX: number,\n  offsetY: number,\n  closeToContour: boolean,\n  path: PathArray | string,\n  autoRotate: boolean,\n) {\n  const [x, y] = getXYByPlacement(bounds, placement);\n  const style: Partial<TextStyleProps> = {\n    textAlign: placement === 'left' ? 'right' : placement === 'right' ? 'left' : 'center',\n    textBaseline: placement === 'top' ? 'bottom' : placement === 'bottom' ? 'top' : 'middle',\n    transform: [['translate', x + offsetX, y + offsetY]],\n  };\n  if (placement === 'center' || !closeToContour) return style;\n\n  const points = pathToPoints(path);\n\n  if (!points || points.length <= 3) return style;\n\n  const lines = points\n    .map((point, index) => {\n      const p1 = point;\n      const p2 = points[(index + 1) % points.length];\n      if (isEqual(p1, p2)) return null;\n      return [p1, p2];\n    })\n    .filter(Boolean) as [Point, Point][];\n  const line = findNearestLine([x, y], lines);\n  const intersection = findNearestPointOnLine([x, y], line);\n  if (intersection && line) {\n    style.transform = [['translate', intersection[0] + offsetX, intersection[1] + offsetY]];\n    if (autoRotate) {\n      const angle = Math.atan((line[0][1] - line[1][1]) / (line[0][0] - line[1][0]));\n      style.transform.push(['rotate', (angle / Math.PI) * 180]);\n      style.textAlign = 'center';\n      if (placement === 'right' || placement === 'left') {\n        if (angle > 0) {\n          style.textBaseline = placement === 'right' ? 'bottom' : 'top';\n        } else {\n          style.textBaseline = placement === 'right' ? 'top' : 'bottom';\n        }\n      }\n    }\n  }\n  return style;\n}\n", "import type { DisplayObjectConfig, Group, PathStyleProps } from '@antv/g';\nimport { Path } from '@antv/g';\nimport type { CardinalPlacement, Prefix } from '../../types';\nimport { getPolygonTextStyleByPlacement } from '../../utils/polygon';\nimport { subStyleProps } from '../../utils/prefix';\nimport { mergeOptions } from '../../utils/style';\nimport { getWordWrapWidthByBox } from '../../utils/text';\nimport type { LabelStyleProps } from '../shapes';\nimport { BaseShape } from './base-shape';\nimport { Label } from './label';\n\nexport interface ContourLabelStyleProps extends LabelStyleProps {\n  /**\n   * <zh/> \n   *\n   * <en/> Label position\n   * @defaultValue 'bottom'\n   */\n  placement?: CardinalPlacement | 'center';\n  /**\n   * <zh/> \n   *\n   * <en/> Whether the label is close to the contour\n   * @defaultValue true\n   */\n  closeToPath?: boolean;\n  /**\n   * <zh/>  closeToPath  true \n   *\n   * <en/> Whether the label rotates with the contour. Only effective when closeToPath is true\n   * @defaultValue true\n   */\n  autoRotate?: boolean;\n  /**\n   * <zh/> x \n   *\n   * <en/> Label x-axis offset\n   * @defaultValue 0\n   */\n  offsetX?: number;\n  /**\n   * <zh/> y \n   *\n   * <en/> Label y-axis offset\n   * @defaultValue 0\n   */\n  offsetY?: number;\n  /**\n   * <zh/> \n   *\n   * <en/> The maximum width of the text, which will be automatically ellipsis if exceeded\n   */\n  maxWidth?: number;\n}\n\nexport interface ContourStyleProps extends PathStyleProps, Prefix<'label', ContourLabelStyleProps> {\n  /**\n   * <zh/> \n   *\n   * <en/> Whether to display the label\n   * @defaultValue true\n   */\n  label?: boolean;\n}\ntype ParsedContourStyleProps = Required<ContourStyleProps>;\ntype ContourOptions = DisplayObjectConfig<ContourStyleProps>;\n\nexport class Contour extends BaseShape<ContourStyleProps> {\n  static defaultStyleProps: Partial<ContourStyleProps> = {\n    label: true,\n    labelPlacement: 'bottom',\n    labelCloseToPath: true,\n    labelAutoRotate: true,\n    labelOffsetX: 0,\n    labelOffsetY: 0,\n  };\n\n  constructor(options: ContourOptions) {\n    super(mergeOptions({ style: Contour.defaultStyleProps }, options));\n  }\n\n  protected getLabelStyle(attributes: ParsedContourStyleProps): LabelStyleProps | false {\n    if (!attributes.label || !attributes.d || attributes.d.length === 0) return false;\n    const { maxWidth, offsetX, offsetY, autoRotate, placement, closeToPath, ...labelStyle } = subStyleProps<\n      Required<ContourLabelStyleProps>\n    >(this.getGraphicStyle(attributes), 'label');\n\n    const key = this.shapeMap.key;\n    const keyBounds = key?.getRenderBounds();\n\n    return Object.assign(\n      getPolygonTextStyleByPlacement(keyBounds, placement, offsetX, offsetY, closeToPath, attributes.d, autoRotate),\n      { wordWrapWidth: getWordWrapWidthByBox(keyBounds, maxWidth) },\n      labelStyle,\n    );\n  }\n\n  protected getKeyStyle(attributes: ParsedContourStyleProps): PathStyleProps {\n    return this.getGraphicStyle(attributes);\n  }\n\n  public render(attributes: ParsedContourStyleProps, container: Group): void {\n    this.upsert('key', Path, this.getKeyStyle(attributes), container);\n    this.upsert('label', Label, this.getLabelStyle(attributes), container);\n  }\n}\n", "import type { DisplayObject } from '@antv/g';\n\n/**\n * <zh/> \n *\n * <en/> Get all the child elements of the shape\n * @param shape - <zh/>  | <en/> shape\n * @returns <zh/>  | <en/> child elements array\n */\nexport function getDescendantShapes<T extends DisplayObject>(shape: T) {\n  const succeeds: DisplayObject[] = [];\n\n  // \n  const traverse = (shape: DisplayObject) => {\n    if (shape?.children.length) {\n      (shape.children as DisplayObject[]).forEach((child) => {\n        succeeds.push(child);\n        traverse(child);\n      });\n    }\n  };\n\n  traverse(shape);\n\n  return succeeds;\n}\n\n/**\n * <zh/> \n *\n * <en/> Get all the ancestor elements of the shape\n * @param shape - <zh/>  | <en/> shape\n * @returns <zh/>  | <en/> ancestor elements array\n */\nexport function getAncestorShapes<T extends DisplayObject>(shape: T) {\n  const ancestors: DisplayObject[] = [];\n  let currentNode = shape.parentNode as DisplayObject;\n  while (currentNode) {\n    ancestors.push(currentNode);\n    currentNode = currentNode.parentNode as DisplayObject;\n  }\n  return ancestors;\n}\n", "import type { DisplayObject, DisplayObjectConfig, ImageStyleProps as GImageStyleProps } from '@antv/g';\nimport { ElementEvent, Image as GImage, Rect as GRect } from '@antv/g';\nimport { getAncestorShapes } from '../../utils/shape';\n\nexport interface ImageStyleProps extends GImageStyleProps {\n  /**\n   * <zh/> \n   *\n   * <en/> Radius of the rounded corner\n   */\n  radius?: number | number[];\n}\n\nexport class Image extends GImage {\n  constructor(options: DisplayObjectConfig<ImageStyleProps>) {\n    super(options);\n    current = this;\n    this.isMutationObserved = true;\n    this.addEventListener(ElementEvent.MOUNTED, this.onMounted);\n    this.addEventListener(ElementEvent.ATTR_MODIFIED, this.onAttrModified);\n  }\n\n  private onMounted = () => {\n    this.handleRadius();\n  };\n\n  private onAttrModified = () => {\n    this.handleRadius();\n  };\n\n  public handleRadius() {\n    const { radius, clipPath, width = 0, height = 0 } = this.attributes as ImageStyleProps;\n\n    if (radius && width && height) {\n      const [x, y] = this.getBounds().min;\n      const clipPathStyle = { x, y, radius, width, height };\n\n      if (clipPath) {\n        Object.assign(this.parsedStyle.clipPath!.style, clipPathStyle);\n      } else {\n        const rect = new GRect({ style: clipPathStyle });\n        this.style.clipPath = rect;\n      }\n    } else {\n      if (clipPath) this.style.clipPath = null;\n    }\n  }\n}\n\nconst ImagesWeakMap = new WeakMap<DisplayObject, Image[]>();\n\nlet current: Image | null = null;\n\n/**\n * <zh/>  g clipPath  Image  clipPath\n *\n *  connectImage  dispatchPositionChange \n *\n *   g \n *\n * <en/> Since g clipPath does not support relative positions, when the position of the affected element changes, the Image needs to be notified to update the clipPath.\n *\n * Use connectImage to create an association between the shape and the image, and combine it with the dispatchPositionChange method to trigger the update.\n *\n *  This is a temporary, black-box solution, and if g supports relative positions in the future, this method will be removed.\n * @param target - <zh/>  <en/> Target element\n */\nexport const connectImage = (target: DisplayObject) => {\n  if (current && getAncestorShapes(current).includes(target)) {\n    const images = ImagesWeakMap.get(target);\n    if (images) {\n      if (!images.includes(current)) images.push(current);\n    } else ImagesWeakMap.set(target, [current]);\n  }\n};\n\n/**\n * <zh/> \n *\n * <en/> Trigger the associated image to update its position\n * @param target - <zh/>  <en/> Target element\n */\nexport const dispatchPositionChange = (target: DisplayObject) => {\n  const image = ImagesWeakMap.get(target);\n  if (image) {\n    image.forEach((i) => i.handleRadius());\n  }\n};\n", "import { DisplayObjectConfig, Text as GText, Group, TextStyleProps } from '@antv/g';\nimport type { BaseShapeStyleProps } from './base-shape';\nimport { BaseShape } from './base-shape';\nimport type { ImageStyleProps } from './image';\nimport { Image as GImage } from './image';\n\n/**\n * <zh/> \n *\n * <en/> Icon style\n */\nexport interface IconStyleProps extends BaseShapeStyleProps, Partial<TextStyleProps>, Omit<ImageStyleProps, 'z'> {}\n\n/**\n * <zh/> \n *\n * <en/> Icon\n * @remarks\n * <zh/>  src  text \n *\n * <en/> Icon is a special shape, which can be an image or text. When the src attribute is passed in, an image will be rendered; when the text attribute is passed in, text will be rendered.\n */\nexport class Icon extends BaseShape<IconStyleProps> {\n  constructor(options: DisplayObjectConfig<IconStyleProps>) {\n    super(options);\n  }\n\n  private isImage() {\n    const { src } = this.attributes;\n    return !!src;\n  }\n\n  protected getIconStyle(attributes: IconStyleProps = this.attributes): IconStyleProps {\n    const { width = 0, height = 0 } = attributes;\n    const style = this.getGraphicStyle(attributes);\n    if (this.isImage()) {\n      return {\n        x: -width / 2,\n        y: -height / 2,\n        ...style,\n      };\n    }\n    return {\n      textBaseline: 'middle',\n      textAlign: 'center',\n      ...style,\n    };\n  }\n\n  public render(attributes = this.attributes, container: Group = this): void {\n    this.upsert('icon', (this.isImage() ? GImage : GText) as any, this.getIconStyle(attributes), container);\n  }\n}\n", "import type { IAnimation } from '@antv/g';\nimport type { RuntimeContext } from '../runtime/types';\nimport type { Keyframe } from '../types';\nimport type { BaseShapeStyleProps } from './shapes';\nimport { BaseShape } from './shapes';\n\nexport abstract class BaseElement<T extends BaseShapeStyleProps> extends BaseShape<T> {\n  protected get context(): RuntimeContext {\n    // @ts-expect-error skip type-check\n    return this.config.context;\n  }\n\n  protected get parsedAttributes() {\n    return this.attributes as Required<T>;\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Animation frame execution function\n   */\n  protected onframe() {}\n\n  public animate(keyframes: Keyframe[], options?: number | KeyframeAnimationOptions | undefined): IAnimation | null {\n    const animation = super.animate(keyframes, options);\n\n    if (animation) {\n      animation.onframe = () => this.onframe();\n      animation.finished.then(() => this.onframe());\n    }\n\n    return animation;\n  }\n}\n", "import type { BaseStyleProps, CircleStyleProps, DisplayObject, DisplayObjectConfig, Group } from '@antv/g';\nimport { Circle as GCircle } from '@antv/g';\nimport type { CategoricalPalette } from '../../palettes/types';\nimport type { RuntimeContext } from '../../runtime/types';\nimport type { NodeData } from '../../spec';\nimport type {\n  ID,\n  Node,\n  NodeBadgeStyleProps,\n  NodeLabelStyleProps,\n  NodePortStyleProps,\n  Point,\n  Port,\n  PortPlacement,\n  PortStyleProps,\n  Prefix,\n  Size,\n} from '../../types';\nimport { getPortXYByPlacement, getTextStyleByPlacement, isSimplePort } from '../../utils/element';\nimport { inferIconStyle } from '../../utils/node';\nimport { getPaletteColors } from '../../utils/palette';\nimport { getRectIntersectPoint } from '../../utils/point';\nimport { omitStyleProps, subObject, subStyleProps } from '../../utils/prefix';\nimport { parseSize } from '../../utils/size';\nimport { mergeOptions } from '../../utils/style';\nimport { getWordWrapWidthByBox } from '../../utils/text';\nimport { setVisibility } from '../../utils/visibility';\nimport { BaseElement } from '../base-element';\nimport type { BadgeStyleProps, BaseShapeStyleProps, IconStyleProps, LabelStyleProps } from '../shapes';\nimport { Badge, Icon, Label } from '../shapes';\nimport { connectImage, dispatchPositionChange } from '../shapes/image';\n\n/**\n * <zh/> \n *\n * <en/> Base node style props\n */\nexport interface BaseNodeStyleProps\n  extends\n    BaseShapeStyleProps,\n    Prefix<'label', NodeLabelStyleProps>,\n    Prefix<'halo', BaseStyleProps>,\n    Prefix<'icon', IconStyleProps>,\n    Prefix<'badge', BadgeStyleProps>,\n    Prefix<'port', PortStyleProps> {\n  /**\n   * <zh/> x \n   *\n   * <en/> The x-coordinate of node\n   */\n  x?: number;\n  /**\n   * <zh/> y \n   *\n   * <en/> The y-coordinate of node\n   */\n  y?: number;\n  /**\n   * <zh/> z \n   *\n   * <en/> The z-coordinate of node\n   */\n  z?: number;\n  /**\n   * <zh/> \n   * - \n   * - \n   *\n   * <en/> The size of node, which is a shortcut to set the width and height of node\n   * - If the value is a number, it means the width, height, and depth of the node are the same as the specified value\n   * - If the value is an array, it means the width, height, and depth of the node are represented by the array elements in turn\n   */\n  size?: Size;\n  /**\n   * <zh/> /\n   *\n   * <en/> Whether the current node/combo is expanded\n   */\n  collapsed?: boolean;\n  /**\n   * <zh/> \n   *\n   * <en/> The instance of the child node\n   * @remarks\n   * <zh/> \n   *\n   * <en/> Only valid in the tree graph\n   * @ignore\n   */\n  childrenNode?: ID[];\n  /**\n   * <zh/> \n   *\n   * <en/> The data of the child node\n   * @remarks\n   * <zh/> children  childrenData \n   *\n   * <en/> Only valid in the tree graph. If the current node is collapsed, children may be empty, and the complete child element data can be obtained through childrenData\n   * @ignore\n   */\n  childrenData?: NodeData[];\n  /**\n   * <zh/> \n   *\n   * <en/> Whether to show the node label\n   * @defaultValue true\n   */\n  label?: boolean;\n  /**\n   * <zh/> \n   *\n   * <en/> Whether to show the node halo\n   * @defaultValue false\n   */\n  halo?: boolean;\n  /**\n   * <zh/> \n   *\n   * <en/> Whether to show the node icon\n   * @defaultValue true\n   */\n  icon?: boolean;\n  /**\n   * <zh/> \n   *\n   * <en/> Whether to show the node badge\n   * @defaultValue true\n   */\n  badge?: boolean;\n  /**\n   * <zh/> \n   *\n   * <en/> Whether to show the node port\n   * @defaultValue true\n   */\n  port?: boolean;\n  /**\n   * <zh/> \n   *\n   * <en/> Port configuration, supports configuring multiple ports\n   * @example\n   * ```json\n   * {\n   *    port: true,\n   *    ports: [\n   *      { key: 'top', placement: [0.5, 0], r: 4, stroke: '#31d0c6', fill: '#fff' },\n   *      { key: 'bottom', placement: [0.5, 1], r: 4, stroke: '#31d0c6', fill: '#fff' },\n   *    ],\n   * }\n   * ```\n   */\n  ports?: NodePortStyleProps[];\n  /**\n   * <zh/> \n   *\n   * <en/> Badge\n   * @example\n   * ```json\n   * {\n   *    badge: true,\n   *    badges: [\n   *      { text: 'A', placement: 'right-top'},\n   *      { text: 'Important', placement: 'right' },\n   *      { text: 'Notice', placement: 'right-bottom' },\n   *    ],\n   *    badgePalette: ['#7E92B5', '#F4664A', '#FFBE3A'],\n   * }\n   * ```\n   */\n  badges?: NodeBadgeStyleProps[];\n  /**\n   * <zh/> \n   *\n   * <en/> Badge background color palette\n   */\n  badgePalette?: CategoricalPalette;\n}\n\n/**\n * <zh/> \n *\n * <en/> Base node class\n * @remarks\n * <zh/>  keyShape \n *\n * <zh/> https://www.yuque.com/antv/g6/gl1iof1xpzg6ed98\n *\n * <en/> When customizing a node, it is recommended to use this class as the base class. This way, you can directly focus on how to implement the drawing logic of keyShape\n *\n * <en/> Design document: https://www.yuque.com/antv/g6/gl1iof1xpzg6ed98\n */\nexport abstract class BaseNode<S extends BaseNodeStyleProps = BaseNodeStyleProps>\n  extends BaseElement<S>\n  implements Node\n{\n  public type = 'node';\n\n  static defaultStyleProps: Partial<BaseNodeStyleProps> = {\n    x: 0,\n    y: 0,\n    size: 32,\n    droppable: true,\n    draggable: true,\n    port: true,\n    ports: [],\n    portZIndex: 2,\n    portLinkToCenter: false,\n    badge: true,\n    badges: [],\n    badgeZIndex: 3,\n    halo: false,\n    haloDroppable: false,\n    haloLineDash: 0,\n    haloLineWidth: 12,\n    haloStrokeOpacity: 0.25,\n    haloPointerEvents: 'none',\n    haloZIndex: -1,\n    icon: true,\n    iconZIndex: 1,\n    label: true,\n    labelIsBillboard: true,\n    labelMaxWidth: '200%',\n    labelPlacement: 'bottom',\n    labelWordWrap: false,\n    labelZIndex: 0,\n  };\n\n  constructor(options: DisplayObjectConfig<S>) {\n    super(mergeOptions({ style: BaseNode.defaultStyleProps }, options));\n  }\n\n  protected getSize(attributes = this.attributes) {\n    const { size } = attributes;\n    return parseSize(size);\n  }\n\n  protected getKeyStyle(attributes: Required<S>) {\n    const style = this.getGraphicStyle(attributes);\n\n    return Object.assign(omitStyleProps(style, ['label', 'halo', 'icon', 'badge', 'port'])) as any;\n  }\n\n  protected getLabelStyle(attributes: Required<S>): false | LabelStyleProps {\n    if (attributes.label === false || !attributes.labelText) return false;\n\n    const { placement, maxWidth, offsetX, offsetY, ...labelStyle } = subStyleProps<Required<NodeLabelStyleProps>>(\n      this.getGraphicStyle(attributes),\n      'label',\n    );\n    const keyBounds = this.getShape('key').getLocalBounds();\n\n    return Object.assign(\n      getTextStyleByPlacement(keyBounds, placement, offsetX, offsetY),\n      { wordWrapWidth: getWordWrapWidthByBox(keyBounds, maxWidth) },\n      labelStyle,\n    );\n  }\n\n  protected getHaloStyle(attributes: Required<S>) {\n    if (attributes.halo === false) return false;\n\n    const { fill, ...keyStyle } = this.getKeyStyle(attributes);\n    const haloStyle = subStyleProps(this.getGraphicStyle(attributes), 'halo');\n\n    return { ...keyStyle, stroke: fill, ...haloStyle } as any;\n  }\n\n  protected getIconStyle(attributes: Required<S>): false | IconStyleProps {\n    if (attributes.icon === false || (!attributes.iconText && !attributes.iconSrc)) return false;\n\n    const iconStyle = subStyleProps(this.getGraphicStyle(attributes), 'icon');\n\n    return Object.assign(inferIconStyle(attributes.size!, iconStyle), iconStyle);\n  }\n\n  protected getBadgesStyle(attributes: Required<S>): Record<string, NodeBadgeStyleProps | false> {\n    const badges = subObject(this.shapeMap, 'badge-');\n    const badgesShapeStyle: Record<string, NodeBadgeStyleProps | false> = {};\n\n    Object.keys(badges).forEach((key) => {\n      badgesShapeStyle[key] = false;\n    });\n    if (attributes.badge === false || !attributes.badges?.length) return badgesShapeStyle;\n\n    const { badges: badgeOptions = [], badgePalette, opacity = 1, ...restAttributes } = attributes;\n    const colors = getPaletteColors(badgePalette);\n    const badgeStyle = subStyleProps<BadgeStyleProps>(this.getGraphicStyle(restAttributes), 'badge');\n\n    badgeOptions.forEach((option, i) => {\n      badgesShapeStyle[i] = {\n        backgroundFill: colors ? colors[i % colors?.length] : undefined,\n        opacity,\n        ...badgeStyle,\n        ...this.getBadgeStyle(option),\n      };\n    });\n\n    return badgesShapeStyle;\n  }\n\n  protected getBadgeStyle(style: NodeBadgeStyleProps): NodeBadgeStyleProps {\n    const keyShape = this.getShape('key');\n    const { placement = 'top', offsetX, offsetY, ...restStyle } = style;\n    const textStyle = getTextStyleByPlacement(keyShape.getLocalBounds(), placement, offsetX, offsetY, true);\n    return { ...textStyle, ...restStyle };\n  }\n\n  protected getPortsStyle(attributes: Required<S>): Record<string, PortStyleProps | false> {\n    const ports = this.getPorts();\n    const portsShapeStyle: Record<string, PortStyleProps | false> = {};\n\n    Object.keys(ports).forEach((key) => {\n      portsShapeStyle[key] = false;\n    });\n\n    if (attributes.port === false || !attributes.ports?.length) return portsShapeStyle;\n\n    const portStyle = subStyleProps<PortStyleProps>(this.getGraphicStyle(attributes), 'port');\n    const { ports: portOptions = [] } = attributes;\n    portOptions.forEach((option, index) => {\n      const key = option.key || index;\n      const mergedStyle = { ...portStyle, ...option };\n      if (isSimplePort(mergedStyle)) {\n        portsShapeStyle[key] = false;\n      } else {\n        const [x, y] = this.getPortXY(attributes, option);\n        portsShapeStyle[key] = { transform: [['translate', x, y]], ...mergedStyle };\n      }\n    });\n    return portsShapeStyle;\n  }\n\n  protected getPortXY(attributes: Required<S>, style: NodePortStyleProps): Point {\n    const { placement = 'left' } = style;\n    const keyShape = this.getShape('key');\n    return getPortXYByPlacement(getBoundsInOffscreen(this.context, keyShape), placement as PortPlacement);\n  }\n\n  /**\n   * Get the ports for the node.\n   * @returns Ports shape map.\n   */\n  public getPorts(): Record<string, Port> {\n    return subObject(this.shapeMap, 'port-');\n  }\n\n  /**\n   * Get the center point of the node.\n   * @returns The center point of the node.\n   */\n  public getCenter(): Point {\n    return this.getShape('key').getBounds().center;\n  }\n\n  /**\n   * Get the point on the outer contour of the node that is the intersection with a line starting in the center the ending in the point `p`.\n   * @param point - The point to intersect with the node.\n   * @param useExtendedLine - Whether to use the extended line.\n   * @returns The intersection point.\n   */\n  public getIntersectPoint(point: Point, useExtendedLine = false): Point {\n    const keyShapeBounds = this.getShape('key').getBounds();\n    return getRectIntersectPoint(point, keyShapeBounds, useExtendedLine);\n  }\n\n  protected drawHaloShape(attributes: Required<S>, container: Group): void {\n    const style = this.getHaloStyle(attributes);\n    const keyShape = this.getShape('key');\n    this.upsert('halo', keyShape.constructor as new (...args: unknown[]) => DisplayObject, style, container);\n  }\n\n  protected drawIconShape(attributes: Required<S>, container: Group): void {\n    const style = this.getIconStyle(attributes);\n    this.upsert('icon', Icon, style, container);\n    connectImage(this);\n  }\n\n  protected drawBadgeShapes(attributes: Required<S>, container: Group): void {\n    const badgesStyle = this.getBadgesStyle(attributes);\n    Object.keys(badgesStyle).forEach((key) => {\n      const style = badgesStyle[key];\n      this.upsert(`badge-${key}`, Badge, style, container);\n    });\n  }\n\n  protected drawPortShapes(attributes: Required<S>, container: Group): void {\n    const portsStyle = this.getPortsStyle(attributes);\n\n    Object.keys(portsStyle).forEach((key) => {\n      const style = portsStyle[key] as CircleStyleProps;\n      const shapeKey = `port-${key}`;\n      this.upsert(shapeKey, GCircle, style, container);\n    });\n  }\n\n  protected drawLabelShape(attributes: Required<S>, container: Group): void {\n    const style = this.getLabelStyle(attributes);\n    this.upsert('label', Label, style, container);\n  }\n\n  protected abstract drawKeyShape(attributes: Required<S>, container: Group): DisplayObject | undefined;\n\n  //  / Used to decorate abstract methods\n  private _drawKeyShape(attributes: Required<S>, container: Group) {\n    return this.drawKeyShape(attributes, container);\n  }\n\n  public render(attributes = this.parsedAttributes, container: Group = this) {\n    // 1. key shape\n    this._drawKeyShape(attributes, container);\n    if (!this.getShape('key')) return;\n\n    // 2. halo, use shape same with keyShape\n    this.drawHaloShape(attributes, container);\n\n    // 3. icon\n    this.drawIconShape(attributes, container);\n\n    // 4. badges\n    this.drawBadgeShapes(attributes, container);\n\n    // 5. label\n    this.drawLabelShape(attributes, container);\n\n    // 6. ports\n    this.drawPortShapes(attributes, container);\n  }\n\n  public update(attr?: Partial<S>): void {\n    super.update(attr);\n    if (attr && ('x' in attr || 'y' in attr || 'z' in attr)) {\n      dispatchPositionChange(this);\n    }\n  }\n\n  protected onframe() {\n    this.drawBadgeShapes(this.parsedAttributes, this);\n    this.drawLabelShape(this.parsedAttributes, this);\n  }\n}\n\n/**\n * <zh/> \n *\n * <en/> Get the bounding box of the shape in the off-screen canvas\n * @param context - <zh/>  <en/> Runtime context\n * @param shape - <zh/>  <en/> Graphic instance\n * @returns <zh/>  <en/> Graphic bounding box\n */\nfunction getBoundsInOffscreen(context: RuntimeContext, shape: DisplayObject) {\n  if (!context) return shape.getLocalBounds();\n\n  //  transform \n  //  G \n  // Move the main shape to the global space to avoid being affected by the parent transform\n  // The reasonable operation should be moved to the off-screen canvas, but there is a problem with G at present\n  const canvas = context.canvas.getLayer();\n  const substitute = shape.cloneNode();\n  setVisibility(substitute, 'hidden');\n  canvas.appendChild(substitute);\n  const bounds = substitute.getLocalBounds();\n  substitute.destroy();\n\n  return bounds;\n}\n", "import type { DisplayObjectConfig, CircleStyleProps as GCircleStyleProps, Group } from '@antv/g';\nimport { Circle as GCircle } from '@antv/g';\nimport { ICON_SIZE_RATIO } from '../../constants/element';\nimport type { Point } from '../../types';\nimport { getEllipseIntersectPoint } from '../../utils/point';\nimport { mergeOptions } from '../../utils/style';\nimport type { IconStyleProps } from '../shapes';\nimport type { BaseNodeStyleProps } from './base-node';\nimport { BaseNode } from './base-node';\n\n/**\n * <zh/> \n *\n * <en/> Circle node style props\n */\nexport interface CircleStyleProps extends BaseNodeStyleProps {}\n\n/**\n * <zh/> \n *\n * <en/> Circle node\n */\nexport class Circle extends BaseNode {\n  static defaultStyleProps: Partial<CircleStyleProps> = {\n    size: 32,\n  };\n\n  constructor(options: DisplayObjectConfig<CircleStyleProps>) {\n    super(mergeOptions({ style: Circle.defaultStyleProps }, options));\n  }\n\n  protected drawKeyShape(attributes: Required<CircleStyleProps>, container: Group) {\n    return this.upsert('key', GCircle, this.getKeyStyle(attributes), container);\n  }\n\n  protected getKeyStyle(attributes: Required<CircleStyleProps>): GCircleStyleProps {\n    const keyStyle = super.getKeyStyle(attributes);\n    return { ...keyStyle, r: Math.min(...this.getSize(attributes)) / 2 };\n  }\n\n  protected getIconStyle(attributes: Required<CircleStyleProps>): false | IconStyleProps {\n    const style = super.getIconStyle(attributes);\n    const { r } = this.getShape<GCircle>('key').attributes;\n    const size = (r as number) * 2 * ICON_SIZE_RATIO;\n    return style ? ({ width: size, height: size, ...style } as IconStyleProps) : false;\n  }\n\n  public getIntersectPoint(point: Point, useExtendedLine = false): Point {\n    const keyShapeBounds = this.getShape('key').getBounds();\n    return getEllipseIntersectPoint(point, keyShapeBounds, useExtendedLine);\n  }\n}\n", "import type { DisplayObjectConfig, PolygonStyleProps as GPolygonStyleProps, Group } from '@antv/g';\nimport { Polygon as GPolygon } from '@antv/g';\nimport type { Point } from '../../types';\nimport { getPolygonIntersectPoint } from '../../utils/point';\nimport type { BaseNodeStyleProps } from '../nodes/base-node';\nimport { BaseNode } from '../nodes/base-node';\n\n/**\n * <zh/> \n *\n * <en/> Polygon node style props\n */\nexport interface PolygonStyleProps extends BaseNodeStyleProps {\n  /**\n   * <zh/> \n   *\n   * <en/> The vertex coordinates of the polygon\n   * @internal\n   */\n  points?: ([number, number] | [number, number, number])[];\n}\n\n/**\n * Abstract class for polygon nodes,i.e triangle, diamond, hexagon, etc.\n */\nexport abstract class Polygon<T extends PolygonStyleProps = PolygonStyleProps> extends BaseNode<T> {\n  constructor(options: DisplayObjectConfig<T>) {\n    super(options);\n  }\n\n  public get parsedAttributes() {\n    return this.attributes as unknown as Required<T>;\n  }\n\n  protected drawKeyShape(attributes: Required<T>, container: Group) {\n    return this.upsert('key', GPolygon, this.getKeyStyle(attributes), container);\n  }\n\n  protected getKeyStyle(attributes: Required<T>): GPolygonStyleProps {\n    const keyStyle = super.getKeyStyle(attributes);\n    return { ...keyStyle, points: this.getPoints(attributes) };\n  }\n\n  protected abstract getPoints(attributes: Required<T>): Point[];\n\n  public getIntersectPoint(point: Point, useExtendedLine = false): Point {\n    const { points } = this.getShape<GPolygon>('key').attributes;\n    const center: Point = [+(this.attributes?.x || 0), +(this.attributes?.y || 0)];\n    return getPolygonIntersectPoint(point, center, points!, true, useExtendedLine).point;\n  }\n}\n", "import type { DisplayObjectConfig } from '@antv/g';\nimport type { Point } from '../../types';\nimport { getDiamondPoints } from '../../utils/element';\nimport type { PolygonStyleProps } from '../shapes';\nimport { Polygon } from '../shapes/polygon';\n\n/**\n * <zh/> \n *\n * <en/> Diamond node style props\n */\nexport interface DiamondStyleProps extends PolygonStyleProps {}\n\n/**\n * <zh/> \n *\n * <en/> Diamond node\n */\nexport class Diamond extends Polygon {\n  constructor(options: DisplayObjectConfig<DiamondStyleProps>) {\n    super(options);\n  }\n\n  protected getPoints(attributes: Required<DiamondStyleProps>): Point[] {\n    const [width, height] = this.getSize(attributes);\n    return getDiamondPoints(width, height);\n  }\n}\n", "import { Path } from '@antv/g';\nimport { isNumber, isString } from '@antv/util';\nimport { getPaletteColors } from '../../utils/palette';\nimport { subStyleProps } from '../../utils/prefix';\nimport { parseSize } from '../../utils/size';\nimport { mergeOptions } from '../../utils/style';\nimport { Circle } from './circle';\n\nimport type { BaseStyleProps, DisplayObjectConfig, Group } from '@antv/g';\nimport type { PathArray } from '@antv/util';\nimport type { CategoricalPalette } from '../../palettes/types';\nimport type { DonutRound, Prefix } from '../../types';\nimport type { CircleStyleProps } from './circle';\n\n/**\n * <zh/> \n *\n * <en/> Donut node style props\n */\nexport interface DonutStyleProps extends CircleStyleProps, Prefix<'donut', BaseStyleProps> {\n  /**\n   * <zh/> \n   *\n   * <en/> Inner ring radius, using percentage or pixel value.\n   * @defaultValue '50%'\n   */\n  innerR?: string | number;\n  /**\n   * <zh/> \n   *\n   * <en/> Donut data.\n   */\n  donuts?: number[] | DonutRound[];\n  /**\n   * <zh/> \n   *\n   * <en/> Color or palette.\n   * @defaultValue 'tableau'\n   */\n  donutPalette?: string | CategoricalPalette;\n}\n\n/**\n * <zh/> \n *\n * <en/> Donut node\n */\nexport class Donut extends Circle {\n  static defaultStyleProps: Partial<DonutStyleProps> = {\n    innerR: '50%',\n    donuts: [],\n    donutPalette: 'tableau',\n  };\n\n  constructor(options: DisplayObjectConfig<DonutStyleProps>) {\n    super(mergeOptions({ style: Donut.defaultStyleProps }, options));\n  }\n\n  private parseOuterR() {\n    const { size } = this.parsedAttributes as Required<DonutStyleProps>;\n    return Math.min(...parseSize(size)) / 2;\n  }\n\n  private parseInnerR() {\n    const { innerR } = this.parsedAttributes as Required<DonutStyleProps>;\n    return isString(innerR) ? (parseInt(innerR) / 100) * this.parseOuterR() : innerR;\n  }\n\n  protected drawDonutShape(attributes: Required<DonutStyleProps>, container: Group): void {\n    const { donuts } = attributes;\n    if (!donuts?.length) return;\n\n    const parsedDonuts = donuts.map((round) => (isNumber(round) ? { value: round } : round) as DonutRound);\n\n    const style = subStyleProps<BaseStyleProps>(this.getGraphicStyle(attributes), 'donut');\n\n    const colors = getPaletteColors(attributes.donutPalette);\n    if (!colors) return;\n\n    const sum = parsedDonuts.reduce((acc, cur) => acc + (cur.value ?? 0), 0);\n    const outerR = this.parseOuterR();\n    const innerR = this.parseInnerR();\n\n    let start = 0;\n    parsedDonuts.forEach((round, index) => {\n      const { value = 0, color = colors[index % colors.length], ...roundStyle } = round;\n      const angle = (sum === 0 ? 1 / parsedDonuts.length : value / sum) * 360;\n\n      this.upsert(\n        `round${index}`,\n        Path,\n        {\n          ...style,\n          d: arc(outerR, innerR, start, start + angle),\n          fill: color,\n          ...roundStyle,\n        },\n        container,\n      );\n\n      start += angle;\n    });\n  }\n\n  public render(attributes: Required<DonutStyleProps>, container: Group = this) {\n    super.render(attributes, container);\n    this.drawDonutShape(attributes, container);\n  }\n}\n\nconst point = (x: number, y: number, r: number, angel: number) => [x + Math.sin(angel) * r, y - Math.cos(angel) * r];\n\nconst full = (x: number, y: number, R: number, r: number): PathArray => {\n  if (r <= 0 || R <= r) {\n    return [['M', x - R, y], ['A', R, R, 0, 1, 1, x + R, y], ['A', R, R, 0, 1, 1, x - R, y], ['Z']];\n  }\n  return [\n    ['M', x - R, y],\n    ['A', R, R, 0, 1, 1, x + R, y],\n    ['A', R, R, 0, 1, 1, x - R, y],\n    ['Z'],\n    ['M', x + r, y],\n    ['A', r, r, 0, 1, 0, x - r, y],\n    ['A', r, r, 0, 1, 0, x + r, y],\n    ['Z'],\n  ];\n};\n\nconst part = (x: number, y: number, R: number, r: number, start: number, end: number): PathArray => {\n  const [s, e] = [(start / 360) * 2 * Math.PI, (end / 360) * 2 * Math.PI];\n  const P = [point(x, y, r, s), point(x, y, R, s), point(x, y, R, e), point(x, y, r, e)];\n  const flag = e - s > Math.PI ? 1 : 0;\n  return [\n    ['M', P[0][0], P[0][1]],\n    ['L', P[1][0], P[1][1]],\n    ['A', R, R, 0, flag, 1, P[2][0], P[2][1]],\n    ['L', P[3][0], P[3][1]],\n    ['A', r, r, 0, flag, 0, P[0][0], P[0][1]],\n    ['Z'],\n  ];\n};\n\nconst arc = (R = 0, r = 0, start: number, end: number): PathArray => {\n  const [x, y] = [0, 0];\n  if (Math.abs(start - end) % 360 < 0.000001) return full(x, y, R, r);\n  return part(x, y, R, r, start, end);\n};\n", "import type { DisplayObjectConfig, EllipseStyleProps as GEllipseStyleProps, Group } from '@antv/g';\nimport { Ellipse as GEllipse } from '@antv/g';\nimport { ICON_SIZE_RATIO } from '../../constants/element';\nimport type { Point } from '../../types';\nimport { getEllipseIntersectPoint } from '../../utils/point';\nimport { mergeOptions } from '../../utils/style';\nimport type { IconStyleProps } from '../shapes';\nimport type { BaseNodeStyleProps } from './base-node';\nimport { BaseNode } from './base-node';\n\n/**\n * <zh/> \n *\n * <en/> Ellipse node style props\n */\nexport interface EllipseStyleProps extends BaseNodeStyleProps {}\n\n/**\n * <zh/> \n *\n * <en/> Ellipse node\n */\nexport class Ellipse extends BaseNode {\n  static defaultStyleProps: Partial<EllipseStyleProps> = {\n    size: [45, 35],\n  };\n\n  constructor(options: DisplayObjectConfig<EllipseStyleProps>) {\n    super(mergeOptions({ style: Ellipse.defaultStyleProps }, options));\n  }\n\n  protected drawKeyShape(attributes: Required<EllipseStyleProps>, container: Group) {\n    return this.upsert('key', GEllipse, this.getKeyStyle(attributes), container);\n  }\n\n  protected getKeyStyle(attributes: Required<EllipseStyleProps>): GEllipseStyleProps {\n    const keyStyle = super.getKeyStyle(attributes);\n    const [majorAxis, minorAxis] = this.getSize(attributes);\n    return {\n      ...keyStyle,\n      rx: majorAxis / 2,\n      ry: minorAxis / 2,\n    };\n  }\n\n  protected getIconStyle(attributes: Required<EllipseStyleProps>): false | IconStyleProps {\n    const style = super.getIconStyle(attributes);\n    const { rx, ry } = this.getShape<GEllipse>('key').attributes;\n    const size = Math.min(+rx, +ry) * 2 * ICON_SIZE_RATIO;\n\n    return style ? ({ width: size, height: size, ...style } as IconStyleProps) : false;\n  }\n\n  public getIntersectPoint(point: Point, useExtendedLine = false): Point {\n    const keyShapeBounds = this.getShape('key').getBounds();\n    return getEllipseIntersectPoint(point, keyShapeBounds, useExtendedLine);\n  }\n}\n", "import type { DisplayObjectConfig } from '@antv/g';\nimport { ICON_SIZE_RATIO } from '../../constants/element';\nimport type { Point } from '../../types';\nimport { getHexagonPoints } from '../../utils/element';\nimport type { IconStyleProps, PolygonStyleProps } from '../shapes';\nimport { Polygon } from '../shapes/polygon';\n\n/**\n * <zh/> \n *\n * <en/> Hexagon node style props\n */\nexport interface HexagonStyleProps extends PolygonStyleProps {\n  /**\n   * <zh/> \n   *\n   * <en/> outer radius, default is half of the minimum value of width and height\n   */\n  outerR?: number;\n}\n\n/**\n * <zh/> \n *\n * <en/> Hexagon node\n */\nexport class Hexagon extends Polygon<HexagonStyleProps> {\n  constructor(options: DisplayObjectConfig<HexagonStyleProps>) {\n    super(options);\n  }\n\n  private getOuterR(attributes: Required<HexagonStyleProps>): number {\n    return attributes.outerR || Math.min(...this.getSize(attributes)) / 2;\n  }\n\n  protected getPoints(attributes: Required<HexagonStyleProps>): Point[] {\n    return getHexagonPoints(this.getOuterR(attributes));\n  }\n\n  protected getIconStyle(attributes: Required<HexagonStyleProps>): false | IconStyleProps {\n    const style = super.getIconStyle(attributes);\n    const size = this.getOuterR(attributes) * ICON_SIZE_RATIO;\n    return style ? ({ width: size, height: size, ...style } as IconStyleProps) : false;\n  }\n}\n", "import {\n  DisplayObjectConfig,\n  FederatedMouseEvent,\n  FederatedPointerEvent,\n  HTML as GHTML,\n  HTMLStyleProps as GHTMLStyleProps,\n  Group,\n  ICanvas,\n  IEventTarget,\n  Rect,\n} from '@antv/g';\nimport { Renderer } from '@antv/g-canvas';\nimport { isNil, isUndefined, pick, set } from '@antv/util';\nimport { CommonEvent } from '../../constants';\nimport type { BaseNodeStyleProps } from './base-node';\nimport { BaseNode } from './base-node';\n\n/**\n * <zh/> HTML \n *\n * <en/> HTML node style props\n */\nexport interface HTMLStyleProps extends BaseNodeStyleProps {\n  /**\n   * <zh/> HTML  `HTMLElement`\n   *\n   * <en/> HTML content, can be a string or `HTMLElement`\n   */\n  innerHTML: string | HTMLElement;\n  /**\n   * <zh/> HTML  dx \n   *\n   * <en/> Horizontal offset. The HTML container defaults to the upper left corner as the origin, and the horizontal offset is performed through dx\n   * @defaultValue 0\n   */\n  dx?: number;\n  /**\n   * <zh/> HTML  dy \n   *\n   * <en/> Vertical offset. The HTML container defaults to the upper left corner as the origin, and the vertical offset is performed through dy\n   * @defaultValue 0\n   */\n  dy?: number;\n}\n\n/**\n * <zh/> HTML \n *\n * <en/> HTML node\n * @see https://github.com/antvis/G/blob/next/packages/g/src/plugins/EventPlugin.ts\n */\nexport class HTML extends BaseNode<HTMLStyleProps> {\n  static defaultStyleProps: Partial<HTMLStyleProps> = {\n    size: [160, 80],\n    halo: false,\n    icon: false,\n    label: false,\n    pointerEvents: 'auto',\n  };\n\n  constructor(options: DisplayObjectConfig<HTMLStyleProps>) {\n    super({ ...options, style: Object.assign({}, HTML.defaultStyleProps, options.style) });\n  }\n\n  private rootPointerEvent = new FederatedPointerEvent(null);\n\n  private get eventService() {\n    return this.context.canvas.context.eventService;\n  }\n\n  private get events() {\n    return [\n      CommonEvent.CLICK,\n      CommonEvent.POINTER_DOWN,\n      CommonEvent.POINTER_MOVE,\n      CommonEvent.POINTER_UP,\n      CommonEvent.POINTER_OVER,\n      CommonEvent.POINTER_LEAVE,\n    ];\n  }\n\n  protected getDomElement() {\n    return this.getShape<GHTML>('key').getDomElement();\n  }\n\n  /**\n   * @override\n   */\n  public render(attributes: Required<HTMLStyleProps> = this.parsedAttributes, container: Group = this): void {\n    this.drawKeyShape(attributes, container);\n\n    this.drawPortShapes(attributes, container);\n  }\n\n  protected getKeyStyle(attributes: Required<HTMLStyleProps>): GHTMLStyleProps {\n    const {\n      dx = 0,\n      dy = 0,\n      ...style\n    } = pick(attributes, ['dx', 'dy', 'innerHTML', 'pointerEvents', 'cursor']) as unknown as HTMLStyleProps;\n    const [width, height] = this.getSize(attributes);\n    return { x: dx, y: dy, ...style, width, height };\n  }\n\n  protected drawKeyShape(attributes: Required<HTMLStyleProps>, container: Group) {\n    const style = this.getKeyStyle(attributes);\n    const { x, y, width = 0, height = 0 } = style;\n    const bounds = this.upsert('key-container', Rect, { x, y, width, height, opacity: 0 }, container)!;\n    return this.upsert('key', GHTML, style, bounds);\n  }\n\n  public connectedCallback() {\n    // only enable in canvas renderer\n    const renderer = this.context.canvas.getRenderer('main');\n    const isCanvasRenderer = renderer instanceof Renderer;\n    if (!isCanvasRenderer) return;\n\n    const element = this.getDomElement();\n    this.events.forEach((eventName) => {\n      // @ts-expect-error assert event is PointerEvent\n      element.addEventListener(eventName, this.forwardEvents);\n    });\n  }\n\n  public attributeChangedCallback(name: any, oldValue: any, newValue: any) {\n    if (name === 'zIndex' && oldValue !== newValue) {\n      this.getDomElement().style.zIndex = newValue;\n    }\n  }\n\n  public destroy() {\n    const element = this.getDomElement();\n    this.events.forEach((eventName) => {\n      // @ts-expect-error assert event is PointerEvent\n      element.removeEventListener(eventName, this.forwardEvents);\n    });\n    super.destroy();\n  }\n\n  private forwardEvents = (nativeEvent: PointerEvent) => {\n    const canvas = this.context.canvas;\n    const iCanvas = canvas.context.renderingContext.root!.ownerDocument!.defaultView!;\n\n    const normalizedEvents = this.normalizeToPointerEvent(nativeEvent, iCanvas);\n\n    normalizedEvents.forEach((normalizedEvent) => {\n      const event = this.bootstrapEvent(this.rootPointerEvent, normalizedEvent, iCanvas, nativeEvent);\n      //  html  pointerupoutside \n      // When clicking on the html element, avoid triggering the pointerupoutside event\n      set(canvas.context.eventService, 'mappingTable.pointerupoutside', []);\n      canvas.context.eventService.mapEvent(event);\n    });\n  };\n\n  private normalizeToPointerEvent(event: PointerEvent, canvas: ICanvas): PointerEvent[] {\n    const normalizedEvents = [];\n    if (canvas.isTouchEvent(event)) {\n      for (let i = 0; i < event.changedTouches.length; i++) {\n        const touch = event.changedTouches[i] as any;\n\n        // use changedTouches instead of touches since touchend has no touches\n        // @see https://stackoverflow.com/a/10079076\n        if (isUndefined(touch.button)) touch.button = 0;\n        if (isUndefined(touch.buttons)) touch.buttons = 1;\n        if (isUndefined(touch.isPrimary)) {\n          touch.isPrimary = event.touches.length === 1 && event.type === 'touchstart';\n        }\n        if (isUndefined(touch.width)) touch.width = touch.radiusX || 1;\n        if (isUndefined(touch.height)) touch.height = touch.radiusY || 1;\n        if (isUndefined(touch.tiltX)) touch.tiltX = 0;\n        if (isUndefined(touch.tiltY)) touch.tiltY = 0;\n        if (isUndefined(touch.pointerType)) touch.pointerType = 'touch';\n        // @see https://developer.mozilla.org/zh-CN/docs/Web/API/Touch/identifier\n        if (isUndefined(touch.pointerId)) touch.pointerId = touch.identifier || 0;\n        if (isUndefined(touch.pressure)) touch.pressure = touch.force || 0.5;\n        if (isUndefined(touch.twist)) touch.twist = 0;\n        if (isUndefined(touch.tangentialPressure)) touch.tangentialPressure = 0;\n        touch.isNormalized = true;\n        touch.type = event.type;\n\n        normalizedEvents.push(touch);\n      }\n    } else if (canvas.isMouseEvent(event)) {\n      const tempEvent = event as any;\n      if (isUndefined(tempEvent.isPrimary)) tempEvent.isPrimary = true;\n      if (isUndefined(tempEvent.width)) tempEvent.width = 1;\n      if (isUndefined(tempEvent.height)) tempEvent.height = 1;\n      if (isUndefined(tempEvent.tiltX)) tempEvent.tiltX = 0;\n      if (isUndefined(tempEvent.tiltY)) tempEvent.tiltY = 0;\n      if (isUndefined(tempEvent.pointerType)) tempEvent.pointerType = 'mouse';\n      if (isUndefined(tempEvent.pointerId)) tempEvent.pointerId = 1;\n      if (isUndefined(tempEvent.pressure)) tempEvent.pressure = 0.5;\n      if (isUndefined(tempEvent.twist)) tempEvent.twist = 0;\n      if (isUndefined(tempEvent.tangentialPressure)) tempEvent.tangentialPressure = 0;\n      tempEvent.isNormalized = true;\n\n      normalizedEvents.push(tempEvent);\n    } else {\n      normalizedEvents.push(event);\n    }\n\n    return normalizedEvents as PointerEvent[];\n  }\n\n  private transferMouseData(event: FederatedMouseEvent, nativeEvent: MouseEvent): void {\n    event.isTrusted = nativeEvent.isTrusted;\n    event.srcElement = nativeEvent.srcElement as IEventTarget;\n    event.timeStamp = performance.now();\n    event.type = nativeEvent.type;\n\n    event.altKey = nativeEvent.altKey;\n    event.metaKey = nativeEvent.metaKey;\n    event.shiftKey = nativeEvent.shiftKey;\n    event.ctrlKey = nativeEvent.ctrlKey;\n    event.button = nativeEvent.button;\n    event.buttons = nativeEvent.buttons;\n    event.client.x = nativeEvent.clientX;\n    event.client.y = nativeEvent.clientY;\n    event.movement.x = nativeEvent.movementX;\n    event.movement.y = nativeEvent.movementY;\n    event.page.x = nativeEvent.pageX;\n    event.page.y = nativeEvent.pageY;\n    event.screen.x = nativeEvent.screenX;\n    event.screen.y = nativeEvent.screenY;\n    event.relatedTarget = null;\n  }\n\n  private bootstrapEvent(\n    event: FederatedPointerEvent,\n    normalizedEvent: PointerEvent,\n    view: ICanvas,\n    nativeEvent: PointerEvent | MouseEvent | TouchEvent,\n  ): FederatedPointerEvent {\n    event.view = view;\n    // @ts-ignore\n    event.originalEvent = null;\n    event.nativeEvent = nativeEvent;\n\n    event.pointerId = normalizedEvent.pointerId;\n    event.width = normalizedEvent.width;\n    event.height = normalizedEvent.height;\n    event.isPrimary = normalizedEvent.isPrimary;\n    event.pointerType = normalizedEvent.pointerType;\n    event.pressure = normalizedEvent.pressure;\n    event.tangentialPressure = normalizedEvent.tangentialPressure;\n    event.tiltX = normalizedEvent.tiltX;\n    event.tiltY = normalizedEvent.tiltY;\n    event.twist = normalizedEvent.twist;\n    this.transferMouseData(event, normalizedEvent);\n\n    const { x, y } = this.getViewportXY(normalizedEvent);\n    event.viewport.x = x;\n    event.viewport.y = y;\n    const [canvasX, canvasY] = this.context.canvas.getCanvasByViewport([x, y]);\n    event.canvas.x = canvasX;\n    event.canvas.y = canvasY;\n    event.global.copyFrom(event.canvas);\n    event.offset.copyFrom(event.canvas);\n\n    event.isTrusted = nativeEvent.isTrusted;\n    if (event.type === 'pointerleave') {\n      event.type = 'pointerout';\n    }\n    return event;\n  }\n\n  private getViewportXY(nativeEvent: PointerEvent | WheelEvent) {\n    let x: number;\n    let y: number;\n    const { offsetX, offsetY, clientX, clientY } = nativeEvent;\n    if (!isNil(offsetX) && !isNil(offsetY)) {\n      x = offsetX;\n      y = offsetY;\n    } else {\n      const point = this.eventService.client2Viewport({ x: clientX, y: clientY });\n      x = point.x;\n      y = point.y;\n    }\n    return { x, y };\n  }\n\n  protected onframe(): void {\n    super.onframe();\n    // sync opacity\n    const { opacity } = this.attributes;\n    this.getDomElement().style.opacity = `${opacity}`;\n  }\n}\n", "import type { DisplayObjectConfig, RectStyleProps as GRectStyleProps, Group } from '@antv/g';\nimport { ImageStyleProps as GImageStyleProps, Rect as GRect } from '@antv/g';\nimport { ICON_SIZE_RATIO } from '../../constants/element';\nimport { subStyleProps } from '../../utils/prefix';\nimport { mergeOptions } from '../../utils/style';\nimport { add } from '../../utils/vector';\nimport type { IconStyleProps } from '../shapes';\nimport { Image as ImageShape } from '../shapes';\nimport { connectImage, dispatchPositionChange } from '../shapes/image';\nimport type { BaseNodeStyleProps } from './base-node';\nimport { BaseNode } from './base-node';\n\n/**\n * <zh/> \n *\n * <en/> Image node style props\n */\nexport interface ImageStyleProps extends BaseNodeStyleProps {\n  /**\n   * <zh/> \n   *\n   * <en/> Image source, i.e. image address string\n   */\n  img?: string | HTMLImageElement;\n  /**\n   * <zh/>  img \n   *\n   * <en/> This property is an alias for img\n   */\n  src?: string | HTMLImageElement;\n}\n\n/**\n * <zh/> \n *\n * <en/> Image node\n */\nexport class Image extends BaseNode<ImageStyleProps> {\n  static defaultStyleProps: Partial<ImageStyleProps> = {\n    size: 32,\n  };\n\n  constructor(options: DisplayObjectConfig<ImageStyleProps>) {\n    super(mergeOptions({ style: Image.defaultStyleProps }, options));\n  }\n\n  protected getKeyStyle(attributes: Required<ImageStyleProps>): GImageStyleProps {\n    const [width, height] = this.getSize(attributes);\n    const { fillOpacity, opacity = fillOpacity, ...keyStyle } = super.getKeyStyle(attributes);\n\n    return {\n      opacity,\n      ...keyStyle,\n      width,\n      height,\n      x: -width / 2,\n      y: -height / 2,\n    };\n  }\n\n  public getBounds() {\n    return this.getShape('key').getBounds();\n  }\n\n  protected getHaloStyle(attributes: Required<ImageStyleProps>): false | GRectStyleProps {\n    if (attributes.halo === false) return false;\n    const { fill: keyStyleFill, stroke: keyStyleStroke, ...keyStyle } = this.getShape<GRect>('key').attributes;\n    const haloStyle = subStyleProps(this.getGraphicStyle(attributes), 'halo');\n    const haloLineWidth = Number(haloStyle.lineWidth);\n    const [width, height] = add(this.getSize(attributes), [haloLineWidth, haloLineWidth]);\n    const { lineWidth } = haloStyle;\n    const recalculate = {\n      fill: 'transparent',\n      lineWidth: lineWidth / 2,\n      width: width - lineWidth / 2,\n      height: height - lineWidth / 2,\n      x: -(width - lineWidth / 2) / 2,\n      y: -(height - lineWidth / 2) / 2,\n    };\n    return { ...haloStyle, ...recalculate };\n  }\n\n  protected getIconStyle(attributes: Required<ImageStyleProps>): false | IconStyleProps {\n    const style = super.getIconStyle(attributes);\n    const [width, height] = this.getSize(attributes);\n\n    return style\n      ? ({\n          width: width * ICON_SIZE_RATIO,\n          height: height * ICON_SIZE_RATIO,\n          ...style,\n        } as IconStyleProps)\n      : false;\n  }\n\n  protected drawKeyShape(attributes: Required<ImageStyleProps>, container: Group): ImageShape | undefined {\n    const image = this.upsert('key', ImageShape, this.getKeyStyle(attributes), container);\n    connectImage(this);\n    return image;\n  }\n\n  protected drawHaloShape(attributes: Required<ImageStyleProps>, container: Group): void {\n    this.upsert('halo', GRect, this.getHaloStyle(attributes), container);\n  }\n\n  public update(attr?: Partial<ImageStyleProps>): void {\n    super.update(attr);\n    if (attr && ('x' in attr || 'y' in attr || 'z' in attr)) {\n      dispatchPositionChange(this);\n    }\n  }\n}\n", "import type { DisplayObjectConfig, RectStyleProps as GRectStyleProps, Group } from '@antv/g';\nimport { Rect as GRect } from '@antv/g';\nimport { ICON_SIZE_RATIO } from '../../constants/element';\nimport type { IconStyleProps } from '../shapes';\nimport type { BaseNodeStyleProps } from './base-node';\nimport { BaseNode } from './base-node';\n\n/**\n * <zh/> \n *\n * <en/> Rect node style props\n */\nexport interface RectStyleProps extends BaseNodeStyleProps {}\ntype ParsedRectStyleProps = Required<RectStyleProps>;\n\n/**\n * <zh/> \n *\n * <en/> Rect node\n */\nexport class Rect extends BaseNode<RectStyleProps> {\n  constructor(options: DisplayObjectConfig<RectStyleProps>) {\n    super(options);\n  }\n\n  protected getKeyStyle(attributes: ParsedRectStyleProps): GRectStyleProps {\n    const [width, height] = this.getSize(attributes);\n    return {\n      ...super.getKeyStyle(attributes),\n      width,\n      height,\n      x: -width / 2,\n      y: -height / 2,\n    };\n  }\n\n  protected getIconStyle(attributes: ParsedRectStyleProps): false | IconStyleProps {\n    const style = super.getIconStyle(attributes);\n    const { width, height } = this.getShape<GRect>('key').attributes;\n\n    return style\n      ? ({\n          width: (width as number) * ICON_SIZE_RATIO,\n          height: (height as number) * ICON_SIZE_RATIO,\n          ...style,\n        } as IconStyleProps)\n      : false;\n  }\n\n  protected drawKeyShape(attributes: ParsedRectStyleProps, container: Group): GRect | undefined {\n    return this.upsert('key', GRect, this.getKeyStyle(attributes), container);\n  }\n}\n", "import type { DisplayObjectConfig } from '@antv/g';\nimport { ICON_SIZE_RATIO } from '../../constants/element';\nimport type { NodePortStyleProps, Point, StarPortPlacement } from '../../types';\nimport { getPortXYByPlacement, getStarPoints, getStarPorts } from '../../utils/element';\nimport type { IconStyleProps, PolygonStyleProps } from '../shapes';\nimport { Polygon } from '../shapes/polygon';\n\n/**\n * <zh/> \n *\n * <en/> Star node style props\n */\nexport interface StarStyleProps extends PolygonStyleProps {\n  /**\n   * <zh/>  3/8\n   *\n   * <en/> Inner radius, default is 3/8 of the outer radius\n   */\n  innerR?: number;\n}\n\n/**\n * <zh/> \n *\n * <en/> Star node\n */\nexport class Star extends Polygon<StarStyleProps> {\n  constructor(options: DisplayObjectConfig<StarStyleProps>) {\n    super(options);\n  }\n\n  private getInnerR(attributes: Required<StarStyleProps>): number {\n    return attributes.innerR || (this.getOuterR(attributes) * 3) / 8;\n  }\n\n  private getOuterR(attributes: Required<StarStyleProps>): number {\n    return Math.min(...this.getSize(attributes)) / 2;\n  }\n\n  protected getPoints(attributes: Required<StarStyleProps>): Point[] {\n    return getStarPoints(this.getOuterR(attributes), this.getInnerR(attributes));\n  }\n\n  protected getIconStyle(attributes: Required<StarStyleProps>): false | IconStyleProps {\n    const style = super.getIconStyle(attributes);\n    const size = this.getInnerR(attributes) * 2 * ICON_SIZE_RATIO;\n    return style ? ({ width: size, height: size, ...style } as IconStyleProps) : false;\n  }\n\n  protected getPortXY(attributes: Required<StarStyleProps>, style: NodePortStyleProps): Point {\n    const { placement = 'top' } = style;\n    const bbox = this.getShape('key').getLocalBounds();\n    const ports = getStarPorts(this.getOuterR(attributes), this.getInnerR(attributes));\n    return getPortXYByPlacement(bbox, placement as StarPortPlacement, ports, false);\n  }\n}\n", "import type { DisplayObjectConfig } from '@antv/g';\nimport { isEmpty } from '@antv/util';\nimport { ICON_SIZE_RATIO } from '../../constants/element';\nimport type { NodePortStyleProps, Point, TriangleDirection, TrianglePortPlacement } from '../../types';\nimport { getIncircleRadius, getTriangleCenter } from '../../utils/bbox';\nimport { getPortXYByPlacement, getTrianglePoints, getTrianglePorts } from '../../utils/element';\nimport { subStyleProps } from '../../utils/prefix';\nimport { mergeOptions } from '../../utils/style';\nimport type { PolygonStyleProps } from '../shapes';\nimport { IconStyleProps } from '../shapes';\nimport { Polygon } from '../shapes/polygon';\n\n/**\n * <zh/> \n *\n * <en/> Triangle node style props\n */\nexport interface TriangleStyleProps extends PolygonStyleProps {\n  /**\n   * <zh/> \n   *\n   * <en/> The direction of the triangle\n   * @defaultValue 'up'\n   */\n  direction?: TriangleDirection;\n}\n\n/**\n * <zh/> \n *\n * <en/> Triangle node\n */\nexport class Triangle extends Polygon<TriangleStyleProps> {\n  static defaultStyleProps: Partial<TriangleStyleProps> = {\n    size: 40,\n    direction: 'up',\n  };\n\n  constructor(options: DisplayObjectConfig<TriangleStyleProps>) {\n    super(mergeOptions({ style: Triangle.defaultStyleProps }, options));\n  }\n\n  protected getPoints(attributes: Required<TriangleStyleProps>): Point[] {\n    const { direction } = attributes;\n    const [width, height] = this.getSize(attributes);\n    return getTrianglePoints(width, height, direction);\n  }\n\n  protected getPortXY(attributes: Required<TriangleStyleProps>, style: NodePortStyleProps): Point {\n    const { direction } = attributes;\n    const { placement = 'top' } = style;\n    const bbox = this.getShape('key').getLocalBounds();\n    const [width, height] = this.getSize(attributes);\n    const ports = getTrianglePorts(width, height, direction);\n    return getPortXYByPlacement(bbox, placement as TrianglePortPlacement, ports, false);\n  }\n\n  // icon \n  // icon is at the centroid of the triangle\n  protected getIconStyle(attributes: Required<TriangleStyleProps>): false | IconStyleProps {\n    const { icon, iconText, iconSrc, direction } = attributes;\n\n    if (icon === false || isEmpty(iconText || iconSrc)) return false;\n\n    const iconStyle = subStyleProps<IconStyleProps>(this.getGraphicStyle(attributes), 'icon');\n    const bbox = this.getShape('key').getLocalBounds();\n    const [x, y] = getTriangleCenter(bbox, direction);\n    const size = getIncircleRadius(bbox, direction) * 2 * ICON_SIZE_RATIO;\n\n    return {\n      x,\n      y,\n      width: size,\n      height: size,\n      ...iconStyle,\n    };\n  }\n}\n", "import { AABB, BaseStyleProps, DisplayObject, DisplayObjectConfig, Group } from '@antv/g';\nimport { isFunction } from '@antv/util';\nimport type {\n  CollapsedMarkerStyleProps,\n  Combo,\n  ID,\n  NodeLikeData,\n  Padding,\n  Point,\n  Prefix,\n  STDSize,\n  Size,\n} from '../../types';\nimport { getBBoxHeight, getBBoxWidth, getCombinedBBox, getExpandedBBox } from '../../utils/bbox';\nimport { idOf } from '../../utils/id';\nimport { parsePadding } from '../../utils/padding';\nimport { getXYByPlacement, hasPosition, positionOf } from '../../utils/position';\nimport { subStyleProps } from '../../utils/prefix';\nimport { parseSize } from '../../utils/size';\nimport { mergeOptions } from '../../utils/style';\nimport { add, divide } from '../../utils/vector';\nimport type { BaseNodeStyleProps } from '../nodes';\nimport { BaseNode } from '../nodes';\nimport { Icon, IconStyleProps } from '../shapes';\nimport { connectImage, dispatchPositionChange } from '../shapes/image';\n\n/**\n * <zh/> \n *\n * <en/> Common style props for combo\n */\nexport interface BaseComboStyleProps\n  extends\n    BaseNodeStyleProps,\n    Prefix<'collapsed', BaseStyleProps>,\n    Prefix<'collapsedMarker', CollapsedMarkerStyleProps> {\n  /**\n   * <zh/> \n   *\n   * <en/> The default size of combo when expanded\n   */\n  size?: Size;\n  /**\n   * <zh/> \n   *\n   * <en/> The default size of combo when collapsed\n   */\n  collapsedSize?: Size;\n  /**\n   * <zh/> \n   *\n   * <en/> The children of combo, which can be nodes or combos\n   */\n  childrenNode?: ID[];\n  /**\n   * <zh/> \n   *\n   * <en/> The data of the children of combo\n   * @remarks\n   * <zh/> children  childrenData \n   *\n   * <en/> If the combo is collapsed, children may be empty, and the complete child element data can be obtained through childrenData\n   */\n  childrenData?: NodeLikeData[];\n  /**\n   * <zh/> \n   *\n   * <en/> The padding of combo, only effective when expanded\n   */\n  padding?: Padding;\n  /**\n   * <zh/> \n   *\n   * <en/> Whether to show the marker when the combo is collapsed\n   */\n  collapsedMarker?: boolean;\n}\n\n/**\n * <zh/> \n *\n * <en/> Base class of combo\n * @remarks\n * <zh/>  keyShape \n *\n * <en/> When customizing a combo, it is recommended to use this class as the base class. In this way, users only need to focus on the logic of drawing keyShape\n */\nexport abstract class BaseCombo<S extends BaseComboStyleProps = BaseComboStyleProps>\n  extends BaseNode<S>\n  implements Combo\n{\n  public type = 'combo';\n\n  static defaultStyleProps: Partial<BaseComboStyleProps> = {\n    childrenNode: [],\n    droppable: true,\n    draggable: true,\n    collapsed: false,\n    collapsedSize: 32,\n    collapsedMarker: true,\n    collapsedMarkerZIndex: 1,\n    collapsedMarkerFontSize: 12,\n    collapsedMarkerTextAlign: 'center',\n    collapsedMarkerTextBaseline: 'middle',\n    collapsedMarkerType: 'child-count',\n  };\n  constructor(options: DisplayObjectConfig<BaseComboStyleProps>) {\n    super(mergeOptions({ style: BaseCombo.defaultStyleProps }, options));\n    this.updateComboPosition(this.parsedAttributes);\n  }\n\n  /**\n   * Draw the key shape of combo\n   */\n  protected abstract drawKeyShape(attributes: Required<S>, container: Group): DisplayObject | undefined;\n\n  protected getKeySize(attributes: Required<S>): STDSize {\n    const { collapsed, childrenNode = [] } = attributes;\n    if (childrenNode.length === 0) return this.getEmptyKeySize(attributes);\n    return collapsed ? this.getCollapsedKeySize(attributes) : this.getExpandedKeySize(attributes);\n  }\n\n  protected getEmptyKeySize(attributes: Required<S>): STDSize {\n    const { padding, collapsedSize } = attributes;\n    const [top, right, bottom, left] = parsePadding(padding);\n    return add(parseSize(collapsedSize), [left + right, top + bottom, 0]) as STDSize;\n  }\n\n  protected getCollapsedKeySize(attributes: Required<S>): STDSize {\n    return parseSize(attributes.collapsedSize);\n  }\n\n  protected getExpandedKeySize(attributes: Required<S>): STDSize {\n    const contentBBox = this.getContentBBox(attributes);\n    return [getBBoxWidth(contentBBox), getBBoxHeight(contentBBox), 0];\n  }\n\n  protected getContentBBox(attributes: Required<S>): AABB {\n    const { childrenNode = [], padding } = attributes;\n    const children = childrenNode.map((id) => this.context!.element!.getElement(id)).filter(Boolean);\n    if (children.length === 0) {\n      const bbox = new AABB();\n      const { x = 0, y = 0, size } = attributes;\n      const [width, height] = parseSize(size);\n      bbox.setMinMax([x - width / 2, y - height / 2, 0], [x + width / 2, y + height / 2, 0]);\n      return bbox;\n    }\n\n    const childrenBBox = getCombinedBBox(children.map((child) => child!.getBounds()));\n\n    if (!padding) return childrenBBox;\n\n    return getExpandedBBox(childrenBBox, padding);\n  }\n\n  protected drawCollapsedMarkerShape(attributes: Required<S>, container: Group): void {\n    const style = this.getCollapsedMarkerStyle(attributes);\n    this.upsert('collapsed-marker', Icon, style, container);\n    connectImage(this);\n  }\n\n  protected getCollapsedMarkerStyle(attributes: Required<S>): IconStyleProps | false {\n    if (!attributes.collapsed || !attributes.collapsedMarker) return false;\n\n    const { type, ...collapsedMarkerStyle } = subStyleProps<CollapsedMarkerStyleProps>(\n      this.getGraphicStyle(attributes),\n      'collapsedMarker',\n    );\n    const keyShape = this.getShape('key');\n    const [x, y] = getXYByPlacement(keyShape.getLocalBounds(), 'center');\n\n    const style = { ...collapsedMarkerStyle, x, y };\n\n    if (type) {\n      const text = this.getCollapsedMarkerText(type, attributes);\n      Object.assign(style, { text });\n    }\n\n    return style;\n  }\n\n  protected getCollapsedMarkerText(type: CollapsedMarkerStyleProps['type'], attributes: Required<S>): string {\n    const { childrenData = [] } = attributes;\n    const { model } = this.context;\n\n    if (type === 'descendant-count') return model.getDescendantsData(this.id).length.toString();\n    if (type === 'child-count') return childrenData.length.toString();\n    if (type === 'node-count')\n      return model\n        .getDescendantsData(this.id)\n        .filter((datum) => model.getElementType(idOf(datum)) === 'node')\n        .length.toString();\n    if (isFunction(type)) return type(childrenData);\n    return '';\n  }\n\n  public getComboPosition(attributes: Required<S>): Point {\n    const { x = 0, y = 0, collapsed, childrenData = [] } = attributes;\n\n    if (childrenData.length === 0) return [+x, +y, 0];\n\n    if (collapsed) {\n      const { model } = this.context;\n      const descendants = model.getDescendantsData(this.id).filter((datum) => !model.isCombo(idOf(datum)));\n\n      if (descendants.length > 0 && descendants.some(hasPosition)) {\n        // combo  / combo is collapsed, return the average center position\n        const totalPosition = descendants.reduce((acc, datum) => add(acc, positionOf(datum)), [0, 0, 0] as Point);\n        return divide(totalPosition, descendants.length);\n      }\n      // empty combo\n      return [+x, +y, 0];\n    }\n\n    return this.getContentBBox(attributes).center;\n  }\n\n  protected getComboStyle(attributes: Required<S>) {\n    const [x, y] = this.getComboPosition(attributes);\n    // x/y will be used to calculate position later.\n    return { x, y, transform: [['translate', x, y]] };\n  }\n\n  protected updateComboPosition(attributes: Required<S>) {\n    const comboStyle = this.getComboStyle(attributes);\n    Object.assign(this.style, comboStyle);\n    // Sync combo position to model\n    const { x, y } = comboStyle;\n    this.context.model.syncNodeLikeDatum({ id: this.id, style: { x, y } });\n    dispatchPositionChange(this);\n  }\n\n  public render(attributes: Required<S>, container: Group = this) {\n    super.render(attributes, container);\n\n    // collapsed marker\n    this.drawCollapsedMarkerShape(attributes, container);\n  }\n\n  public update(attr: Partial<S> = {}): void {\n    super.update(attr);\n    this.updateComboPosition(this.parsedAttributes);\n  }\n\n  protected onframe() {\n    super.onframe();\n    // \n    // Update position through animation in collapsed state\n    if (!this.attributes.collapsed) this.updateComboPosition(this.parsedAttributes);\n    this.drawKeyShape(this.parsedAttributes, this);\n  }\n\n  public animate(keyframes: Keyframe[], options?: number | KeyframeAnimationOptions) {\n    const animation = super.animate(\n      this.attributes.collapsed\n        ? keyframes\n        : //  combo  x, y, z, transform \n          // If the current combo is in the expanded state, the animation is not affected by x, y, z, transform, and the position is determined only by the child elements\n          keyframes.map(({ x, y, z, transform, ...keyframe }: any) => keyframe),\n      options,\n    );\n\n    if (!animation) return animation;\n\n    return new Proxy(animation, {\n      set: (target, propKey, value) => {\n        if (propKey === 'currentTime') Promise.resolve().then(() => this.onframe());\n        return Reflect.set(target, propKey, value);\n      },\n    });\n  }\n}\n", "import type { DisplayObjectConfig, CircleStyleProps as GCircleStyleProps } from '@antv/g';\nimport { Circle as GCircle, Group } from '@antv/g';\nimport type { Point, STDSize } from '../../types';\nimport { getBBoxSize } from '../../utils/bbox';\nimport { getEllipseIntersectPoint } from '../../utils/point';\nimport { subStyleProps } from '../../utils/prefix';\nimport { parseSize } from '../../utils/size';\nimport type { BaseComboStyleProps } from './base-combo';\nimport { BaseCombo } from './base-combo';\n\n/**\n * <zh/> \n *\n * <en/> Circle combo style props\n */\nexport interface CircleComboStyleProps extends BaseComboStyleProps {}\n\n/**\n * <zh/> \n *\n * <en/> Circle combo\n */\nexport class CircleCombo extends BaseCombo<CircleComboStyleProps> {\n  constructor(options: DisplayObjectConfig<CircleComboStyleProps>) {\n    super(options);\n  }\n\n  protected drawKeyShape(attributes: Required<CircleComboStyleProps>, container: Group): GCircle | undefined {\n    return this.upsert('key', GCircle, this.getKeyStyle(attributes), container);\n  }\n\n  protected getKeyStyle(attributes: Required<CircleComboStyleProps>): GCircleStyleProps {\n    const { collapsed } = attributes;\n    const keyStyle = super.getKeyStyle(attributes);\n\n    const [width] = this.getKeySize(attributes);\n    return {\n      ...keyStyle,\n      ...(collapsed && subStyleProps(keyStyle, 'collapsed')),\n      r: width / 2,\n    };\n  }\n\n  protected getCollapsedKeySize(attributes: Required<CircleComboStyleProps>): STDSize {\n    const [collapsedWidth, collapsedHeight] = parseSize(attributes.collapsedSize);\n    const collapsedR = Math.max(collapsedWidth, collapsedHeight) / 2;\n    return [collapsedR * 2, collapsedR * 2, 0];\n  }\n\n  protected getExpandedKeySize(attributes: Required<CircleComboStyleProps>): STDSize {\n    const contentBBox = this.getContentBBox(attributes);\n    const [width, height] = getBBoxSize(contentBBox);\n    const expandedR = Math.sqrt(width ** 2 + height ** 2) / 2;\n    return [expandedR * 2, expandedR * 2, 0];\n  }\n\n  public getIntersectPoint(point: Point, useExtendedLine = false): Point {\n    const keyShapeBounds = this.getShape('key').getBounds();\n    return getEllipseIntersectPoint(point, keyShapeBounds, useExtendedLine);\n  }\n}\n", "import type { DisplayObjectConfig, RectStyleProps as GRectStyleProps } from '@antv/g';\nimport { Rect as GRect, Group } from '@antv/g';\nimport { subStyleProps } from '../../utils/prefix';\nimport type { BaseComboStyleProps } from './base-combo';\nimport { BaseCombo } from './base-combo';\n\n/**\n * <zh/> \n *\n * <en/> Rect combo style props\n */\nexport interface RectComboStyleProps extends BaseComboStyleProps {}\n\n/**\n * <zh/> \n *\n * <en/> Rect combo\n */\nexport class RectCombo extends BaseCombo<RectComboStyleProps> {\n  constructor(options: DisplayObjectConfig<RectComboStyleProps>) {\n    super(options);\n  }\n\n  protected drawKeyShape(attributes: Required<RectComboStyleProps>, container: Group): GRect | undefined {\n    return this.upsert('key', GRect, this.getKeyStyle(attributes), container);\n  }\n\n  protected getKeyStyle(attributes: Required<RectComboStyleProps>): GRectStyleProps {\n    const keyStyle = super.getKeyStyle(attributes);\n\n    const [width, height] = this.getKeySize(attributes);\n    return {\n      ...keyStyle,\n      ...(attributes.collapsed && subStyleProps(keyStyle, 'collapsed')),\n      width,\n      height,\n      x: -width / 2,\n      y: -height / 2,\n    };\n  }\n}\n", "import type { AABB } from '@antv/g';\nimport { difference, isEqual } from '@antv/util';\nimport type { Node, OrthRouterOptions, Point } from '../../types';\nimport {\n  getBBoxHeight,\n  getBBoxWidth,\n  getCombinedBBox,\n  getNearestBoundaryPoint,\n  getNearestBoundarySide,\n  getNodeBBox,\n  isPointBBoxCenter,\n  isPointInBBox,\n  isPointOnBBoxBoundary,\n  isPointOutsideBBox,\n} from '../bbox';\nimport { isOrthogonal, moveTo, round } from '../point';\nimport { angle, distance, subtract, toVector2, toVector3 } from '../vector';\n\nexport type Direction = 'N' | 'S' | 'W' | 'E' | null;\n\ntype Route = {\n  points: Point[];\n  direction: Direction;\n};\n\nconst defaultOptions: OrthRouterOptions = {\n  padding: 10,\n};\n\n/**\n * <zh/> \n *\n * <en/> Get orthogonal line segments between two points\n * @param sourcePoint - <zh/>  | <en/> start point\n * @param targetPoint - <zh/>  | <en/> end point\n * @param sourceNode - <zh/>  | <en/> source node\n * @param targetNode - <zh/>  | <en/> target node\n * @param controlPoints - <zh/>  | <en/> control points\n * @param options - <zh/>  | <en/> options\n * @returns <zh/>  | <en/> vertices\n */\nexport function orth(\n  sourcePoint: Point,\n  targetPoint: Point,\n  sourceNode: Node,\n  targetNode: Node,\n  controlPoints: Point[],\n  options: OrthRouterOptions,\n) {\n  const { padding } = Object.assign(defaultOptions, options);\n\n  const sourceBBox = getNodeBBox(sourceNode, padding);\n  const targetBBox = getNodeBBox(targetNode, padding);\n\n  const points: Point[] = [sourcePoint, ...controlPoints, targetPoint];\n\n  // direction of previous route segment\n  let direction: Direction = null;\n  const result: Point[] = [];\n\n  for (let fromIdx = 0, len = points.length; fromIdx < len - 1; fromIdx++) {\n    const toIdx = fromIdx + 1;\n    const from = points[fromIdx];\n    const to = points[toIdx];\n    const isOrth = isOrthogonal(from, to);\n\n    let route = null;\n\n    if (fromIdx === 0) {\n      if (toIdx === len - 1) {\n        // source -> target\n        if (sourceBBox.intersects(targetBBox)) {\n          route = insideNode(from, to, sourceBBox, targetBBox);\n        } else if (!isPointBBoxCenter(from, sourceBBox) && !isPointBBoxCenter(to, targetBBox)) {\n          const fromWithPadding = getNearestBoundaryPoint(from, sourceBBox);\n          const toWithPadding = getNearestBoundaryPoint(to, targetBBox);\n          route = pointToPoint(fromWithPadding, toWithPadding, getDirection(fromWithPadding, toWithPadding));\n          route.points.unshift(fromWithPadding);\n          route.points.push(toWithPadding);\n        } else if (!isOrth) {\n          route = nodeToNode(from, to, sourceBBox, targetBBox);\n        }\n      } else {\n        // source -> point\n        if (isPointInBBox(to, sourceBBox)) {\n          route = insideNode(from, to, sourceBBox, getNodeBBox(to, padding), direction);\n        } else if (!isOrth) {\n          route = nodeToPoint(from, to, sourceBBox);\n        }\n      }\n    } else if (toIdx === len - 1) {\n      // point -> target\n      if (isPointInBBox(from, targetBBox)) {\n        route = insideNode(from, to, getNodeBBox(from, padding), targetBBox, direction);\n      } else if (!isOrth) {\n        route = pointToNode(from, to, targetBBox, direction);\n      }\n    } else if (!isOrth) {\n      // point -> point\n      route = pointToPoint(from, to, direction);\n    }\n\n    // set direction for next iteration\n    if (route) {\n      result.push(...route.points);\n      direction = route.direction;\n    } else {\n      // orthogonal route and not looped\n      direction = getDirection(from, to);\n    }\n\n    if (toIdx < len - 1) result.push(to);\n  }\n\n  return result.map(toVector2);\n}\n\n/**\n * Direction to opposites direction map\n */\nconst opposites = {\n  N: 'S',\n  S: 'N',\n  W: 'E',\n  E: 'W',\n};\n\n/**\n * Direction to radians map\n */\nconst radians = {\n  N: -Math.PI / 2,\n  S: Math.PI / 2,\n  E: 0,\n  W: Math.PI,\n};\n\n/**\n * <zh/>  `from`  `to` \n *\n * <en/> Get the direction between two points, the direction from `from` to `to`\n * @param from - <zh/>  | <en/> start point\n * @param to - <zh/>  | <en/> end point\n * @returns <zh/>  | <en/> direction\n */\nexport function getDirection(from: Point, to: Point): Direction | null {\n  const [fx, fy] = from;\n  const [tx, ty] = to;\n  if (fx === tx) {\n    return fy > ty ? 'N' : 'S';\n  }\n  if (fy === ty) {\n    return fx > tx ? 'W' : 'E';\n  }\n  return null;\n}\n\n/**\n * <zh/> \n *\n * <en/> Get the size of the bounding box, return the width or height according to the direction\n * @param bbox - <zh/>  | <en/> bounding box\n * @param direction - <zh/>  | <en/> direction\n * @returns <zh/>  | <en/> size\n */\nexport function getBBoxSize(bbox: AABB, direction: Direction): number {\n  return direction === 'N' || direction === 'S' ? getBBoxHeight(bbox) : getBBoxWidth(bbox);\n}\n\n/**\n * <zh/> \n *\n * <en/> Calculate orthogonal route from one point to another\n * @param from - <zh/>  | <en/> start point\n * @param to - <zh/>  | <en/> end point\n * @param direction - <zh/>  | <en/> direction of the previous segment\n * @returns <zh/>  | <en/> orthogonal route\n */\nexport function pointToPoint(from: Point, to: Point, direction: Direction): Route {\n  const p1: Point = [from[0], to[1]];\n  const p2: Point = [to[0], from[1]];\n  const d1 = getDirection(from, p1);\n  const d2 = getDirection(from, p2);\n  const opposite = direction ? opposites[direction] : null;\n  const p = d1 === direction || (d1 !== opposite && d2 !== direction) ? p1 : p2;\n\n  return { points: [p], direction: getDirection(p, to) };\n}\n\n/**\n * <zh/> \n *\n * <en/> Calculate orthogonal route from node to point\n * @param from - <zh/>  | <en/> start point\n * @param to - <zh/>  | <en/> end point\n * @param fromBBox - <zh/>  | <en/> bounding box of the start node\n * @returns <zh/>  | <en/> orthogonal route\n */\nexport function nodeToPoint(from: Point, to: Point, fromBBox: AABB): Route {\n  if (isPointBBoxCenter(from, fromBBox)) {\n    const p = freeJoin(from, to, fromBBox);\n\n    return { points: [p], direction: getDirection(p, to) };\n  } else {\n    const fromWithPadding = getNearestBoundaryPoint(from, fromBBox);\n    const isHorizontal = ['left', 'right'].includes(getNearestBoundarySide(from, fromBBox));\n    const p: Point = isHorizontal ? [to[0], fromWithPadding[1]] : [fromWithPadding[0], to[1]];\n\n    return { points: [p], direction: getDirection(p, to) };\n  }\n}\n\n/**\n * <zh/> \n *\n * <en/> Calculate orthogonal route from point to node\n * @param from - <zh/>  | <en/> start point\n * @param to - <zh/>  | <en/> end point\n * @param toBBox - <zh/>  | <en/> bounding box of the end node\n * @param direction - <zh/>  | <en/> direction of the previous segment\n * @returns <zh/>  | <en/> orthogonal route\n */\nexport function pointToNode(from: Point, to: Point, toBBox: AABB, direction: Direction): Route {\n  const toWithPadding = isPointBBoxCenter(to, toBBox) ? to : getNearestBoundaryPoint(to, toBBox);\n  const points: Point[] = [\n    [toWithPadding[0], from[1]],\n    [from[0], toWithPadding[1]],\n  ];\n  const freePoints = points.filter((p) => isPointOutsideBBox(p, toBBox) && !isPointOnBBoxBoundary(p, toBBox, true));\n\n  const freeDirectionPoints = freePoints.filter((p) => getDirection(p, from) !== direction);\n\n  if (freeDirectionPoints.length > 0) {\n    // Pick a point which bears the same direction as the previous segment.\n    const p = freeDirectionPoints.find((p) => getDirection(from, p) === direction) || freeDirectionPoints[0];\n    return {\n      points: [p],\n      direction: getDirection(p, to),\n    };\n  } else {\n    // Here we found only points which are either contained in the element or they would create\n    // a link segment going in opposites direction from the previous one.\n    // We take the point inside element and move it outside the element in the direction the\n    // route is going. Now we can join this point with the current end (using freeJoin).\n    const p = difference(points, freePoints)[0];\n    const p2 = moveTo(to, p, getBBoxSize(toBBox, direction) / 2);\n    const p1 = freeJoin(p2, from, toBBox);\n    return {\n      points: [p1, p2],\n      direction: getDirection(p2, to),\n    };\n  }\n}\n\n/**\n * <zh/> \n *\n * <en/> Calculate orthogonal route from node to node\n * @param from - <zh/>  | <en/> start point\n * @param to - <zh/>  | <en/> end point\n * @param fromBBox - <zh/>  | <en/> bounding box of the start node\n * @param toBBox - <zh/>  | <en/> bounding box of the end node\n * @returns <zh/>  | <en/> orthogonal route\n */\nexport function nodeToNode(from: Point, to: Point, fromBBox: AABB, toBBox: AABB): Route {\n  let route = nodeToPoint(from, to, fromBBox);\n  const p1 = toVector3(route.points[0]);\n\n  if (isPointInBBox(p1, toBBox)) {\n    route = nodeToPoint(to, from, toBBox);\n    const p2 = toVector3(route.points[0]);\n\n    if (isPointInBBox(p2, fromBBox)) {\n      const fromBorder = moveTo(from, p1, getBBoxSize(fromBBox, getDirection(from, p1)) / 2);\n      const toBorder = moveTo(to, p2, getBBoxSize(toBBox, getDirection(to, p2)) / 2);\n      const midPoint: Point = [(fromBorder[0] + toBorder[0]) / 2, (fromBorder[1] + toBorder[1]) / 2];\n\n      const startRoute = nodeToPoint(from, midPoint, fromBBox);\n      const endRoute = pointToNode(midPoint, to, toBBox, startRoute.direction);\n\n      route.points = [startRoute.points[0], endRoute.points[0]];\n      route.direction = endRoute.direction;\n    }\n  }\n\n  return route;\n}\n\n/**\n * <zh/> \n *\n * <en/> Calculate route inside two nodes\n * @param from - <zh/>  | <en/> start point\n * @param to - <zh/>  | <en/> end point\n * @param fromBBox - <zh/>  | <en/> bounding box of the start node\n * @param toBBox - <zh/>  | <en/> bounding box of the end node\n * @param direction - <zh/>  | <en/> direction\n * @returns <zh/>  | <en/> orthogonal route\n */\nexport function insideNode(from: Point, to: Point, fromBBox: AABB, toBBox: AABB, direction?: Direction): Route {\n  const DEFAULT_OFFSET = 0.01;\n  const boundary = getCombinedBBox([fromBBox, toBBox]);\n  const reversed = distance(to, boundary.center) > distance(from, boundary.center);\n  const [start, end] = reversed ? [to, from] : [from, to];\n  const halfPerimeter = getBBoxHeight(boundary) + getBBoxWidth(boundary);\n\n  let p1: Point;\n  if (direction) {\n    const ref: Point = [\n      start[0] + halfPerimeter * Math.cos(radians[direction]),\n      start[1] + halfPerimeter * Math.sin(radians[direction]),\n    ];\n    // `getNearestBoundaryPoint` returns a point on the boundary, so we need to move it a bit to ensure it's outside the element and then get the correct `p2` via `freeJoin`.\n    p1 = moveTo(getNearestBoundaryPoint(ref, boundary), ref, DEFAULT_OFFSET);\n  } else {\n    p1 = moveTo(getNearestBoundaryPoint(start, boundary), start, -DEFAULT_OFFSET);\n  }\n\n  let p2 = freeJoin(p1, end, boundary);\n\n  let points = [round(p1, 2), round(p2, 2)];\n\n  if (isEqual(round(p1), round(p2))) {\n    const rad = angle(subtract(p1, start), [1, 0, 0]) + Math.PI / 2;\n    p2 = [end[0] + halfPerimeter * Math.cos(rad), end[1] + halfPerimeter * Math.sin(rad), 0];\n    p2 = round(moveTo(getNearestBoundaryPoint(p2, boundary), end, -DEFAULT_OFFSET), 2);\n    const p3 = freeJoin(p1, p2, boundary);\n    points = [p1, p3, p2];\n  }\n\n  return {\n    points: reversed ? points.reverse() : points,\n    direction: reversed ? getDirection(p1, to) : getDirection(p2, to),\n  };\n}\n\n/**\n * <zh/>  `p` p,p1  p,p2 p \n *\n * <en/> Returns a point `p` where lines p,p1 and p,p2 are perpendicular and p is not contained in the given box\n * @param p1 - <zh/>  | <en/> point\n * @param p2 - <zh/>  | <en/> point\n * @param bbox - <zh/>  | <en/> bounding box\n * @returns <zh/>  | <en/> point\n */\nexport function freeJoin(p1: Point, p2: Point, bbox: AABB): Point {\n  let p: Point = [p1[0], p2[1]];\n  if (isPointInBBox(p, bbox)) {\n    p = [p2[0], p1[1]];\n  }\n  return p;\n}\n", "import type { AABB, DisplayObject, TransformArray } from '@antv/g';\nimport type { PathArray } from '@antv/util';\nimport { isEqual, isNumber } from '@antv/util';\nimport type { EdgeData } from '../spec';\nimport type {\n  EdgeBadgeStyleProps,\n  EdgeKey,\n  EdgeLabelStyleProps,\n  ID,\n  LoopPlacement,\n  Node,\n  NodeLikeData,\n  Point,\n  Port,\n  Size,\n  Vector2,\n} from '../types';\nimport { getBBoxHeight, getBBoxSize, getBBoxWidth, getNearestBoundarySide, getNodeBBox } from './bbox';\nimport { isCollapsed } from './collapsibility';\nimport { getAllPorts, getNodeConnectionPoint, getPortConnectionPoint, getPortPosition } from './element';\nimport { idOf } from './id';\nimport { isCollinear, isHorizontal, moveTo, parsePoint } from './point';\nimport { freeJoin } from './router/orth';\nimport { add, distance, manhattanDistance, multiply, normalize, perpendicular, subtract } from './vector';\n\n/**\n * <zh/> \n *\n * <en/> Get the style of the label's position\n * @param key - <zh/>  | <en/> The edge object\n * @param placement - <zh/>  | <en/> Position of the label\n * @param autoRotate - <zh/>  | <en/> Whether to auto-rotate\n * @param offsetX - <zh/>  | <en/> Horizontal offset of the label relative to the edge\n * @param offsetY - <zh/>  | <en/> Vertical offset of the label relative to the edge\n * @returns <zh/>  | <en/> Returns the style of the label's position\n */\nexport function getLabelPositionStyle(\n  key: EdgeKey,\n  placement: EdgeLabelStyleProps['placement'],\n  autoRotate: boolean,\n  offsetX: number,\n  offsetY: number,\n): Partial<EdgeLabelStyleProps> {\n  const START_RATIO = 0;\n  const MIDDLE_RATIO = 0.5;\n  const END_RATIO = 0.99;\n\n  let ratio = typeof placement === 'number' ? placement : MIDDLE_RATIO;\n  if (placement === 'start') ratio = START_RATIO;\n  if (placement === 'end') ratio = END_RATIO;\n\n  const point = parsePoint(key.getPoint(ratio));\n  const pointOffset = parsePoint(key.getPoint(ratio + 0.01));\n\n  let textAlign: 'left' | 'right' | 'center' =\n    placement === 'start' ? 'left' : placement === 'end' ? 'right' : 'center';\n\n  if (isHorizontal(point, pointOffset) || !autoRotate) {\n    const [x, y] = getXYByPlacement(key, ratio, offsetX, offsetY);\n    return { transform: [['translate', x, y]], textAlign };\n  }\n\n  let angle = Math.atan2(pointOffset[1] - point[1], pointOffset[0] - point[0]);\n\n  const isRevert = pointOffset[0] < point[0];\n  if (isRevert) {\n    textAlign = textAlign === 'center' ? textAlign : textAlign === 'left' ? 'right' : 'left';\n    offsetX! *= -1;\n    angle += Math.PI;\n  }\n\n  const [x, y] = getXYByPlacement(key, ratio, offsetX, offsetY, angle);\n  const transform: TransformArray = [\n    ['translate', x, y],\n    ['rotate', (angle / Math.PI) * 180],\n  ];\n\n  return {\n    textAlign,\n    transform,\n  };\n}\n\n/**\n * <zh/> \n *\n * <en/> Get the position style of the badge on the edge\n * @param shapeMap - <zh/>  | <en/> Shape map on the edge\n * @param placement - <zh/>  | <en/> Badge position\n * @param labelPlacement - <zh/>  | <en/> Label position\n * @param offsetX - <zh/>  | <en/> Horizontal offset\n * @param offsetY - <zh/>  | <en/> Vertical offset\n * @returns <zh/>  | <en/> Position style of the badge\n */\nexport function getBadgePositionStyle(\n  shapeMap: Record<string, DisplayObject<any, any>>,\n  placement: EdgeBadgeStyleProps['placement'],\n  labelPlacement: EdgeLabelStyleProps['placement'],\n  offsetX: number,\n  offsetY: number,\n) {\n  const badgeWidth = shapeMap.badge?.getGeometryBounds().halfExtents[0] * 2 || 0;\n  const labelWidth = shapeMap.label?.getGeometryBounds().halfExtents[0] * 2 || 0;\n\n  return getLabelPositionStyle(\n    shapeMap.key as EdgeKey,\n    labelPlacement,\n    true,\n    (labelWidth ? (labelWidth / 2 + badgeWidth / 2) * (placement === 'suffix' ? 1 : -1) : 0) + offsetX,\n    offsetY,\n  );\n}\n\n/**\n * <zh/> \n *\n * <en/> Get the coordinates at the specified position on the given edge\n * @param key - <zh/>  | <en/> Edge instance\n * @param ratio - <zh/>  | <en/> Position ratio\n * @param offsetX - <zh/>  | <en/> Horizontal offset\n * @param offsetY - <zh/>  | <en/> Vertical offset\n * @param angle - <zh/>  | <en/> Rotation angle\n * @returns <zh/>  | <en/> Coordinates\n */\nfunction getXYByPlacement(key: EdgeKey, ratio: number, offsetX: number, offsetY: number, angle?: number) {\n  const [pointX, pointY] = parsePoint(key.getPoint(ratio));\n  let actualOffsetX = offsetX;\n  let actualOffsetY = offsetY;\n\n  if (angle) {\n    actualOffsetX = offsetX * Math.cos(angle) - offsetY * Math.sin(angle);\n    actualOffsetY = offsetX * Math.sin(angle) + offsetY * Math.cos(angle);\n  }\n\n  return [pointX + actualOffsetX, pointY + actualOffsetY];\n}\n\n/** ==================== Curve Edge =========================== */\n\n/**\n * <zh/> \n *\n * <en/> Calculate the control point of the curve\n * @param sourcePoint - <zh/>  | <en/> Source point\n * @param targetPoint - <zh/>  | <en/> Target point\n * @param curvePosition - <zh/>  0-1 | <en/> The relative position of the control point on the line (value range from 0 to 1)\n * @param curveOffset - <zh/>  | <en/> The distance between the control point and the line\n * @returns <zh/>  | <en/> Control points\n */\nexport function getCurveControlPoint(\n  sourcePoint: Point,\n  targetPoint: Point,\n  curvePosition: number,\n  curveOffset: number,\n): Point {\n  if (isEqual(sourcePoint, targetPoint)) return sourcePoint;\n  const lineVector = subtract(targetPoint, sourcePoint);\n  const controlPoint: Point = [\n    sourcePoint[0] + curvePosition * lineVector[0],\n    sourcePoint[1] + curvePosition * lineVector[1],\n  ];\n  const perpVector = normalize(perpendicular(lineVector as Vector2, false));\n  controlPoint[0] += curveOffset * perpVector[0];\n  controlPoint[1] += curveOffset * perpVector[1];\n  return controlPoint;\n}\n\n/**\n * <zh/>  `curveOffset`\n *\n * <en/> parse the distance of the control point from the line `curveOffset`\n * @param curveOffset - <zh/> curveOffset | <en/> curveOffset\n * @returns <zh/>  curveOffset | <en/> standard curveOffset\n */\nexport function parseCurveOffset(curveOffset: number | [number, number]): [number, number] {\n  if (isNumber(curveOffset)) return [curveOffset, -curveOffset];\n  return curveOffset;\n}\n\n/**\n * <zh/>  `curvePosition``0-1`\n *\n * <en/> parse the relative position of the control point on the line `curvePosition`\n * @param curvePosition - <zh/> curvePosition | <en/> curvePosition\n * @returns <zh/>  curvePosition | <en/> standard curvePosition\n */\nexport function parseCurvePosition(curvePosition: number | [number, number]): [number, number] {\n  if (isNumber(curvePosition)) return [curvePosition, 1 - curvePosition];\n  return curvePosition;\n}\n\n/**\n * <zh/> \n *\n * <en/> Calculate the path for drawing a quadratic Bessel curve\n * @param sourcePoint - <zh/>  | <en/> Source point\n * @param targetPoint - <zh/>  | <en/> Target point\n * @param controlPoint - <zh/>  | <en/> Control point\n * @returns <zh/>  | <en/> Returns curve path\n */\nexport function getQuadraticPath(sourcePoint: Point, targetPoint: Point, controlPoint: Point): PathArray {\n  return [\n    ['M', sourcePoint[0], sourcePoint[1]],\n    ['Q', controlPoint[0], controlPoint[1], targetPoint[0], targetPoint[1]],\n  ];\n}\n\n/**\n * <zh/> \n *\n * <en/> Calculate the path for drawing a cubic Bessel curve\n * @param sourcePoint - <zh/>  | <en/> Source point\n * @param targetPoint - <zh/>  | <en/> Target point\n * @param controlPoints - <zh/>  | <en/> Control point\n * @returns <zh/>  | <en/> Returns curve path\n */\nexport function getCubicPath(sourcePoint: Point, targetPoint: Point, controlPoints: [Point, Point]): PathArray {\n  return [\n    ['M', sourcePoint[0], sourcePoint[1]],\n    [\n      'C',\n      controlPoints[0][0],\n      controlPoints[0][1],\n      controlPoints[1][0],\n      controlPoints[1][1],\n      targetPoint[0],\n      targetPoint[1],\n    ],\n  ];\n}\n\n/** ==================== Polyline Edge =========================== */\n\n/**\n * <zh/> \n *\n * <en/> Calculates the path for drawing a polyline\n * @param points - <zh/>  | <en/> The vertices of the polyline\n * @param radius - <zh/>  | <en/> Radius of the rounded corner\n * @param z - <zh/>  | <en/> Whether the path is closed\n * @returns <zh/>  | <en/> Returns the path for drawing a polyline\n */\nexport function getPolylinePath(points: Point[], radius = 0, z = false): PathArray {\n  const targetIndex = points.length - 1;\n  const sourcePoint = points[0];\n  const targetPoint = points[targetIndex];\n  const controlPoints = points.slice(1, targetIndex);\n  const pathArray: PathArray = [['M', sourcePoint[0], sourcePoint[1]]];\n  controlPoints.forEach((midPoint, i) => {\n    const prevPoint = controlPoints[i - 1] || sourcePoint;\n    const nextPoint = controlPoints[i + 1] || targetPoint;\n    if (!isCollinear(prevPoint, midPoint, nextPoint) && radius) {\n      const [ps, pt] = getBorderRadiusPoints(prevPoint, midPoint, nextPoint, radius);\n      pathArray.push(['L', ps[0], ps[1]], ['Q', midPoint[0], midPoint[1], pt[0], pt[1]], ['L', pt[0], pt[1]]);\n    } else {\n      pathArray.push(['L', midPoint[0], midPoint[1]]);\n    }\n  });\n  pathArray.push(['L', targetPoint[0], targetPoint[1]]);\n  if (z) pathArray.push(['Z']);\n  return pathArray;\n}\n\n/**\n * <zh/> \n *\n * <en/> Calculates the control points of the Bezier curve generated by three non-collinear points according to the given radius to simulate an arc\n * @param prevPoint - <zh/>  | <en/> Previous point\n * @param midPoint - <zh/>  | <en/> Middle point\n * @param nextPoint - <zh/>  | <en/> Next point\n * @param radius - <zh/>  | <en/> Radius of the rounded corner\n * @returns <zh/>  | <en/> Returns control points\n */\nexport function getBorderRadiusPoints(\n  prevPoint: Point,\n  midPoint: Point,\n  nextPoint: Point,\n  radius: number,\n): [Point, Point] {\n  const d0 = manhattanDistance(prevPoint, midPoint);\n  const d1 = manhattanDistance(nextPoint, midPoint);\n  //  | use the smaller value between the given radius and the minimum radius\n  const r = Math.min(radius, Math.min(d0, d1) / 2);\n  const ps: Point = [\n    midPoint[0] - (r / d0) * (midPoint[0] - prevPoint[0]),\n    midPoint[1] - (r / d0) * (midPoint[1] - prevPoint[1]),\n  ];\n  const pt: Point = [\n    midPoint[0] - (r / d1) * (midPoint[0] - nextPoint[0]),\n    midPoint[1] - (r / d1) * (midPoint[1] - nextPoint[1]),\n  ];\n  return [ps, pt];\n}\n\n/** ==================== Loop Edge =========================== */\n\nexport const getRadians = (bbox: AABB): Record<LoopPlacement, [number, number]> => {\n  const halfPI = Math.PI / 2;\n  const halfHeight = getBBoxHeight(bbox) / 2;\n  const halfWidth = getBBoxWidth(bbox) / 2;\n  const angleWithX = Math.atan2(halfHeight, halfWidth) / 2;\n  const angleWithY = Math.atan2(halfWidth, halfHeight) / 2;\n  return {\n    top: [-halfPI - angleWithY, -halfPI + angleWithY],\n    'top-right': [-halfPI + angleWithY, -angleWithX],\n    'right-top': [-halfPI + angleWithY, -angleWithX],\n    right: [-angleWithX, angleWithX],\n    'bottom-right': [angleWithX, halfPI - angleWithY],\n    'right-bottom': [angleWithX, halfPI - angleWithY],\n    bottom: [halfPI - angleWithY, halfPI + angleWithY],\n    'bottom-left': [halfPI + angleWithY, Math.PI - angleWithX],\n    'left-bottom': [halfPI + angleWithY, Math.PI - angleWithX],\n    left: [Math.PI - angleWithX, Math.PI + angleWithX],\n    'top-left': [Math.PI + angleWithX, -halfPI - angleWithY],\n    'left-top': [Math.PI + angleWithX, -halfPI - angleWithY],\n  };\n};\n\n/**\n * <zh/> \n *\n * <en/> Get the start and end points of the loop edge\n * @param node - <zh/>  | <en/> Node instance\n * @param placement - <zh/>  | <en/> Loop position relative to the node\n * @param clockwise - <zh/>  | <en/> Whether to draw the loop clockwise\n * @param sourcePort - <zh/>  | <en/> Source port\n * @param targetPort - <zh/>  | <en/> Target port\n * @returns <zh/>  | <en/> Start and end points\n */\nexport function getLoopEndpoints(\n  node: Node,\n  placement: LoopPlacement,\n  clockwise: boolean,\n  sourcePort?: Port,\n  targetPort?: Port,\n): [Point, Point] {\n  const bbox = getNodeBBox(node);\n  const center = node.getCenter();\n\n  let sourcePoint = sourcePort && getPortPosition(sourcePort);\n  let targetPoint = targetPort && getPortPosition(targetPort);\n\n  if (!sourcePoint || !targetPoint) {\n    const radians = getRadians(bbox);\n    const angle1 = radians[placement][0];\n    const angle2 = radians[placement][1];\n    const [width, height] = getBBoxSize(bbox);\n    const r = Math.max(width, height);\n    const point1: Point = add(center, [r * Math.cos(angle1), r * Math.sin(angle1), 0]);\n    const point2: Point = add(center, [r * Math.cos(angle2), r * Math.sin(angle2), 0]);\n\n    sourcePoint = getNodeConnectionPoint(node, point1);\n    targetPoint = getNodeConnectionPoint(node, point2);\n\n    if (!clockwise) {\n      [sourcePoint, targetPoint] = [targetPoint, sourcePoint];\n    }\n  }\n\n  return [sourcePoint, targetPoint];\n}\n\n/**\n * <zh/> \n *\n * <en/> Get the path of the loop edge\n * @param node - <zh/>  | <en/> Node instance\n * @param placement - <zh/>  | <en/> Loop position relative to the node\n * @param clockwise - <zh/>  | <en/> Whether to draw the loop clockwise\n * @param dist - <zh/>  keyShape  | <en/> The distance from the edge of the node keyShape to the top of the self-loop\n * @param sourcePortKey - <zh/>  key | <en/> Source port key\n * @param targetPortKey - <zh/>  key | <en/> Target port key\n * @returns <zh/>  | <en/> Returns the path of the loop edge\n */\nexport function getCubicLoopPath(\n  node: Node,\n  placement: LoopPlacement,\n  clockwise: boolean,\n  dist: number,\n  sourcePortKey?: string,\n  targetPortKey?: string,\n) {\n  const sourcePort = node.getPorts()[(sourcePortKey || targetPortKey)!];\n  const targetPort = node.getPorts()[(targetPortKey || sourcePortKey)!];\n\n  // 1.  | Get the start and end points\n  let [sourcePoint, targetPoint] = getLoopEndpoints(node, placement, clockwise, sourcePort, targetPort);\n\n  // 2.  | Get the control points\n  const controlPoints = getCubicLoopControlPoints(node, sourcePoint, targetPoint, dist);\n\n  // 3.  | If the port is defined, adjust the endpoint to intersect with the port boundary\n  if (sourcePort) sourcePoint = getPortConnectionPoint(sourcePort, controlPoints[0]);\n  if (targetPort) targetPoint = getPortConnectionPoint(targetPort, controlPoints.at(-1) as Point);\n\n  return getCubicPath(sourcePoint, targetPoint, controlPoints);\n}\n\n/**\n * <zh/> \n *\n * <en/> Get the control points of the loop edge\n * @param node - <zh/>  | <en/> Node instance\n * @param sourcePoint - <zh/>  | <en/> Source point\n * @param targetPoint - <zh/>  | <en/> Target point\n * @param dist - <zh/>  keyShape  | <en/> The distance from the edge of the node keyShape to the top of the self-loop\n * @returns <zh/>  | <en/> Control points\n */\nexport function getCubicLoopControlPoints(\n  node: Node,\n  sourcePoint: Point,\n  targetPoint: Point,\n  dist: number,\n): [Point, Point] {\n  const center = node.getCenter();\n\n  if (isEqual(sourcePoint, targetPoint)) {\n    const direction = subtract(sourcePoint, center);\n    const adjustment: Point = [\n      dist * Math.sign(direction[0]) || dist / 2,\n      dist * Math.sign(direction[1]) || -dist / 2,\n      0,\n    ];\n    return [add(sourcePoint, adjustment), add(targetPoint, multiply(adjustment, [1, -1, 1]))];\n  }\n\n  return [\n    moveTo(center, sourcePoint, distance(center, sourcePoint) + dist),\n    moveTo(center, targetPoint, distance(center, targetPoint) + dist),\n  ];\n}\n\n/**\n * <zh/> \n *\n * <en/> Get the path of the loop polyline edge\n * @param node - <zh/>  | <en/> Node instance\n * @param radius - <zh/>  | <en/> Radius of the rounded corner\n * @param placement - <zh/>  | <en/> Loop position relative to the node\n * @param clockwise - <zh/>  | <en/> Whether to draw the loop clockwise\n * @param dist - <zh/>  keyShape  | <en/> The distance from the edge of the node keyShape to the top of the self-loop\n * @param sourcePortKey - <zh/>  key | <en/> Source port key\n * @param targetPortKey - <zh/>  key | <en/> Target port key\n * @returns <zh/>  | <en/> Returns the path of the loop polyline edge\n */\nexport function getPolylineLoopPath(\n  node: Node,\n  radius: number,\n  placement: LoopPlacement,\n  clockwise: boolean,\n  dist: number,\n  sourcePortKey?: string,\n  targetPortKey?: string,\n) {\n  const allPortsMap = getAllPorts(node);\n  const sourcePort = allPortsMap[(sourcePortKey || targetPortKey)!];\n  const targetPort = allPortsMap[(targetPortKey || sourcePortKey)!];\n\n  // 1.  | Get the start and end points\n  let [sourcePoint, targetPoint] = getLoopEndpoints(node, placement, clockwise, sourcePort, targetPort);\n\n  // 2.  | Get the control points\n  const controlPoints = getPolylineLoopControlPoints(node, sourcePoint, targetPoint, dist);\n\n  // 3.  | If the port is defined, adjust the endpoint to intersect with the port boundary\n  if (sourcePort) sourcePoint = getPortConnectionPoint(sourcePort, controlPoints[0]);\n  if (targetPort) targetPoint = getPortConnectionPoint(targetPort, controlPoints.at(-1) as Point);\n\n  return getPolylinePath([sourcePoint, ...controlPoints, targetPoint], radius);\n}\n\n/**\n * <zh/> \n *\n * <en/> Get the control points of the loop polyline edge\n * @param node - <zh/>  | <en/> Node instance\n * @param sourcePoint - <zh/>  | <en/> Source point\n * @param targetPoint - <zh/>  | <en/> Target point\n * @param dist - <zh/>  keyShape  | <en/> The distance from the edge of the node keyShape to the top of the self-loop\n * @returns <zh/>  | <en/> Control points\n */\nexport function getPolylineLoopControlPoints(node: Node, sourcePoint: Point, targetPoint: Point, dist: number) {\n  const controlPoints: Point[] = [];\n  const bbox = getNodeBBox(node);\n\n  // 1.  | The start and end points are the same\n  if (isEqual(sourcePoint, targetPoint)) {\n    const side = getNearestBoundarySide(sourcePoint, bbox);\n    switch (side) {\n      case 'left':\n        controlPoints.push([sourcePoint[0] - dist, sourcePoint[1]]);\n        controlPoints.push([sourcePoint[0] - dist, sourcePoint[1] + dist]);\n        controlPoints.push([sourcePoint[0], sourcePoint[1] + dist]);\n        break;\n      case 'right':\n        controlPoints.push([sourcePoint[0] + dist, sourcePoint[1]]);\n        controlPoints.push([sourcePoint[0] + dist, sourcePoint[1] + dist]);\n        controlPoints.push([sourcePoint[0], sourcePoint[1] + dist]);\n        break;\n      case 'top':\n        controlPoints.push([sourcePoint[0], sourcePoint[1] - dist]);\n        controlPoints.push([sourcePoint[0] + dist, sourcePoint[1] - dist]);\n        controlPoints.push([sourcePoint[0] + dist, sourcePoint[1]]);\n        break;\n      case 'bottom':\n        controlPoints.push([sourcePoint[0], sourcePoint[1] + dist]);\n        controlPoints.push([sourcePoint[0] + dist, sourcePoint[1] + dist]);\n        controlPoints.push([sourcePoint[0] + dist, sourcePoint[1]]);\n        break;\n    }\n  } else {\n    const sourceSide = getNearestBoundarySide(sourcePoint, bbox);\n    const targetSide = getNearestBoundarySide(targetPoint, bbox);\n    // 2.  | The start and end points are on the same side\n    if (sourceSide === targetSide) {\n      const side = sourceSide;\n      let x, y;\n      switch (side) {\n        case 'left':\n          x = Math.min(sourcePoint[0], targetPoint[0]) - dist;\n          controlPoints.push([x, sourcePoint[1]]);\n          controlPoints.push([x, targetPoint[1]]);\n          break;\n        case 'right':\n          x = Math.max(sourcePoint[0], targetPoint[0]) + dist;\n          controlPoints.push([x, sourcePoint[1]]);\n          controlPoints.push([x, targetPoint[1]]);\n          break;\n        case 'top':\n          y = Math.min(sourcePoint[1], targetPoint[1]) - dist;\n          controlPoints.push([sourcePoint[0], y]);\n          controlPoints.push([targetPoint[0], y]);\n          break;\n        case 'bottom':\n          y = Math.max(sourcePoint[1], targetPoint[1]) + dist;\n          controlPoints.push([sourcePoint[0], y]);\n          controlPoints.push([targetPoint[0], y]);\n          break;\n      }\n    } else {\n      // 3.  | The start and end points are on different sides\n      const getPointOffSide = (side: 'left' | 'right' | 'top' | 'bottom', point: Point): Point => {\n        return {\n          left: [point[0] - dist, point[1]],\n          right: [point[0] + dist, point[1]],\n          top: [point[0], point[1] - dist],\n          bottom: [point[0], point[1] + dist],\n        }[side] as Point;\n      };\n      const p1 = getPointOffSide(sourceSide, sourcePoint);\n      const p2 = getPointOffSide(targetSide, targetPoint);\n      const p3 = freeJoin(p1, p2, bbox);\n      controlPoints.push(p1, p3, p2);\n    }\n  }\n\n  return controlPoints;\n}\n\n/**\n * <zh/> \n *\n * <en/> Get all the edges in the subgraph and group them into internal and external edges\n * @param ids - <zh/>  ID  | <en/> Node ID array\n * @param getRelatedEdges - <zh/>  | <en/> Get node edges\n * @returns <zh/>  | <en/> Subgraph edges\n */\nexport function getSubgraphRelatedEdges(ids: ID[], getRelatedEdges: (id: ID) => EdgeData[]) {\n  const edges = new Set<EdgeData>();\n  const internal = new Set<EdgeData>();\n  const external = new Set<EdgeData>();\n\n  ids.forEach((id) => {\n    const relatedEdges = getRelatedEdges(id);\n    relatedEdges.forEach((edge) => {\n      edges.add(edge);\n      if (ids.includes(edge.source) && ids.includes(edge.target)) internal.add(edge);\n      else external.add(edge);\n    });\n  });\n\n  return { edges: Array.from(edges), internal: Array.from(internal), external: Array.from(external) };\n}\n\n/**\n * <zh/> \n *\n * <en/> Get the actual connected object of the edge\n * @param node - <zh/>  | <en/> Logical connection node data\n * @param getParentData - <zh/>  | <en/> Get parent node data\n * @returns <zh/>  | <en/> Actual connected node data\n */\nexport function findActualConnectNodeData(node: NodeLikeData, getParentData: (id: ID) => NodeLikeData | undefined) {\n  const path: NodeLikeData[] = [];\n  let current = node;\n  while (current) {\n    path.push(current);\n    const parent = getParentData(idOf(current));\n    if (parent) current = parent;\n    else break;\n  }\n\n  if (path.some((n) => n.style?.collapsed)) {\n    const index = path.reverse().findIndex(isCollapsed);\n    return path[index] || path.at(-1);\n  }\n\n  return node;\n}\n\n/**\n * <zh/> \n *\n * <en/> Get the size of the arrow\n * @param lineWidth - <zh/>  | <en/> The line width of the edge where the arrow is located\n * @param size - <zh/>  | <en/> Custom arrow size\n * @returns <zh/>  | <en/> Arrow size\n */\nexport function getArrowSize(lineWidth: number, size?: Size): Size {\n  if (size) return size;\n\n  if (lineWidth < 4) return 10;\n  if (lineWidth === 4) return 12;\n  return lineWidth * 2.5;\n}\n", "/* eslint-disable jsdoc/require-returns */\n/* eslint-disable jsdoc/require-param */\nimport type { PathArray } from '@antv/util';\n\nexport type SymbolFactor = (width: number, height: number) => PathArray;\n\n/**\n * \n */\nexport const circle: SymbolFactor = (width: number, height: number) => {\n  const r = Math.max(width, height) / 2;\n  return [['M', -width / 2, 0], ['A', r, r, 0, 1, 0, 2 * r - width / 2, 0], ['A', r, r, 0, 1, 0, -width / 2, 0], ['Z']];\n};\n\n/**\n * \n */\nexport const triangle: SymbolFactor = (width: number, height: number) => {\n  return [['M', -width / 2, 0], ['L', width / 2, -height / 2], ['L', width / 2, height / 2], ['Z']];\n};\n\n/**\n * \n */\nexport const diamond: SymbolFactor = (width: number, height: number) => {\n  return [['M', -width / 2, 0], ['L', 0, -height / 2], ['L', width / 2, 0], ['L', 0, height / 2], ['Z']];\n};\n\n/**\n * >>\n */\nexport const vee: SymbolFactor = (width: number, height: number) => {\n  return [\n    ['M', -width / 2, 0],\n    ['L', width / 2, -height / 2],\n    ['L', (4 * width) / 5 - width / 2, 0],\n    ['L', width / 2, height / 2],\n    ['Z'],\n  ];\n};\n\n/**\n * \n */\nexport const rect: SymbolFactor = (width: number, height: number) => {\n  return [\n    ['M', -width / 2, -height / 2],\n    ['L', width / 2, -height / 2],\n    ['L', width / 2, height / 2],\n    ['L', -width / 2, height / 2],\n    ['Z'],\n  ];\n};\n\n/**\n * \n */\nexport const triangleRect: SymbolFactor = (width: number, height: number) => {\n  const tWidth = width / 2;\n  const rWidth = width / 7;\n  const rBeginX = width - rWidth;\n  return [\n    ['M', -tWidth, 0],\n    ['L', 0, -height / 2],\n    ['L', 0, height / 2],\n    ['Z'],\n    ['M', rBeginX - tWidth, -height / 2],\n    ['L', rBeginX + rWidth - tWidth, -height / 2],\n    ['L', rBeginX + rWidth - tWidth, height / 2],\n    ['L', rBeginX - tWidth, height / 2],\n    ['Z'],\n  ];\n};\n\n/**\n * >\n */\nexport const simple: SymbolFactor = (width: number, height: number) => {\n  return [\n    ['M', width / 2, -height / 2],\n    ['L', -width / 2, 0],\n    ['L', width / 2, 0],\n    ['L', -width / 2, 0],\n    ['L', width / 2, height / 2],\n  ];\n};\n", "import type { DisplayObject, DisplayObjectConfig, Group, LineStyleProps, PathStyleProps } from '@antv/g';\nimport { Image, Path } from '@antv/g';\nimport type { PathArray } from '@antv/util';\nimport { isFunction, pick } from '@antv/util';\nimport type {\n  Edge,\n  EdgeArrowStyleProps,\n  EdgeBadgeStyleProps,\n  EdgeKey,\n  EdgeLabelStyleProps,\n  ID,\n  Keyframe,\n  LoopStyleProps,\n  Node,\n  Point,\n  Prefix,\n} from '../../types';\nimport { getBBoxHeight, getBBoxWidth, getNodeBBox } from '../../utils/bbox';\nimport { getArrowSize, getBadgePositionStyle, getCubicLoopPath, getLabelPositionStyle } from '../../utils/edge';\nimport { findPorts, getConnectionPoint, getPortPosition, isSameNode } from '../../utils/element';\nimport { subStyleProps } from '../../utils/prefix';\nimport { parseSize } from '../../utils/size';\nimport { mergeOptions } from '../../utils/style';\nimport * as Symbol from '../../utils/symbol';\nimport { getWordWrapWidthByEnds } from '../../utils/text';\nimport { BaseElement } from '../base-element';\nimport type { BadgeStyleProps, BaseShapeStyleProps, LabelStyleProps } from '../shapes';\nimport { Badge, Label } from '../shapes';\n\n/**\n * <zh/> \n *\n * <en/> Base style properties of the edge\n */\nexport interface BaseEdgeStyleProps\n  extends\n    BaseShapeStyleProps,\n    Prefix<'label', EdgeLabelStyleProps>,\n    Prefix<'halo', PathStyleProps>,\n    Prefix<'badge', EdgeBadgeStyleProps>,\n    Prefix<'startArrow', EdgeArrowStyleProps>,\n    Prefix<'endArrow', EdgeArrowStyleProps>,\n    Prefix<'loop', LoopStyleProps> {\n  /**\n   * <zh/> \n   *\n   * <en/> Whether to display the label of the edge\n   * @defaultValue true\n   */\n  label?: boolean;\n  /**\n   * <zh/> \n   *\n   * <en/> Whether to enable self-loop edge\n   * @defaultValue true\n   */\n  loop?: boolean;\n  /**\n   * <zh/> \n   *\n   * <en/> Whether to display the halo of the edge\n   * @defaultValue false\n   */\n  halo?: boolean;\n  /**\n   * <zh/> \n   *\n   * <en/> Whether to display the badge of the edge\n   * @defaultValue true\n   */\n  badge?: boolean;\n  /**\n   * <zh/> \n   *\n   * <en/> Whether to display the start arrow of the edge\n   * @defaultValue false\n   */\n  startArrow?: boolean;\n  /**\n   * <zh/> \n   *\n   * <en/> Whether to display the end arrow of the edge\n   * @defaultValue false\n   */\n  endArrow?: boolean;\n  /**\n   * <zh/> \n   *\n   * <en/> Offset of the start arrow\n   */\n  startArrowOffset?: number;\n  /**\n   * <zh/> \n   *\n   * <en/> Offset of the end arrow\n   */\n  endArrowOffset?: number;\n  /**\n   * <zh/>  ID\n   *\n   * <en/> The ID of the source node\n   * @remarks\n   * <zh/>  G6 `sourceNode`  `source` `sourceNode`  G6  Combo  Combo `sourceNode`  Combo  ID\n   *\n   * <en/> This property concerning the physical origin, maintained internally by G6. In general, `sourceNode` corresponds to the `source` attribute of the parent level. However, in certain cases, such as when a Combo is collapsed and internal nodes are destroyed, corresponding edges will automatically connect to the parent Combo. At this point, `sourceNode` will be changed to the ID of the parent Combo\n   */\n  sourceNode: ID;\n  /**\n   * <zh/>  shape\n   *\n   * <en/> The source shape. Represents the start of the edge\n   */\n  targetNode: ID;\n  /**\n   * <zh/>  port\n   *\n   * <en/> The Port of the source node\n   */\n  sourcePort?: string;\n  /**\n   * <zh/>  port\n   *\n   * <en/> The Port of the target node\n   */\n  targetPort?: string;\n  /**\n   * <zh/>     \n   *\n   * <en/> Add a marker at the \"start point\", where the \"start point\" is the intersection of the edge and the source node\n   */\n  markerStart?: DisplayObject | null;\n  /**\n   * <zh/>   \n   *\n   * <en/> Adjust the position of the marker at the \"start point\", positive offset inward, negative offset outward\n   * @defaultValue 0\n   */\n  markerStartOffset?: number;\n  /**\n   * <zh/>     \n   *\n   * <en/> Add a marker at the \"end point\", where the \"end point\" is the intersection of the edge and the target node\n   */\n  markerEnd?: DisplayObject | null;\n  /**\n   * <zh/>   \n   *\n   * <en/> Adjust the position of the marker at the \"end point\", positive offset inward, negative offset outward\n   * @defaultValue 0\n   */\n  markerEndOffset?: number;\n  /**\n   * <zh/>      C \n   *\n   * <en/> Place a marker on each vertex of the path except for the \"start point\" and \"end point\". In the internal implementation, because we will convert some commands in the path to C commands, these controlPoints are actually the control points of the cubic Bezier curve\n   */\n  markerMid?: DisplayObject | null;\n  /**\n   * <zh/> 3D \n   *\n   * <en/> Effective in 3D scenes, always facing the screen, so the line width is not affected by the perspective projection image\n   * @defaultValue true\n   */\n  isBillboard?: boolean;\n}\n\ntype ParsedBaseEdgeStyleProps = Required<BaseEdgeStyleProps>;\n\n/**\n * <zh/> \n *\n * <en/> Base class of the edge\n */\nexport abstract class BaseEdge extends BaseElement<BaseEdgeStyleProps> implements Edge {\n  public type = 'edge';\n\n  static defaultStyleProps: Partial<BaseEdgeStyleProps> = {\n    badge: true,\n    badgeOffsetX: 0,\n    badgeOffsetY: 0,\n    badgePlacement: 'suffix',\n    isBillboard: true,\n    label: true,\n    labelAutoRotate: true,\n    labelIsBillboard: true,\n    labelMaxWidth: '80%',\n    labelOffsetX: 4,\n    labelOffsetY: 0,\n    labelPlacement: 'center',\n    labelTextBaseline: 'middle',\n    labelWordWrap: false,\n    halo: false,\n    haloDroppable: false,\n    haloLineDash: 0,\n    haloLineWidth: 12,\n    haloPointerEvents: 'none',\n    haloStrokeOpacity: 0.25,\n    haloZIndex: -1,\n    loop: true,\n    startArrow: false,\n    startArrowLineDash: 0,\n    startArrowLineJoin: 'round',\n    startArrowLineWidth: 1,\n    startArrowTransformOrigin: 'center',\n    startArrowType: 'vee',\n    endArrow: false,\n    endArrowLineDash: 0,\n    endArrowLineJoin: 'round',\n    endArrowLineWidth: 1,\n    endArrowTransformOrigin: 'center',\n    endArrowType: 'vee',\n    loopPlacement: 'top',\n    loopClockwise: true,\n  };\n\n  constructor(options: DisplayObjectConfig<BaseEdgeStyleProps>) {\n    super(mergeOptions({ style: BaseEdge.defaultStyleProps }, options));\n  }\n\n  protected get sourceNode() {\n    const { sourceNode: source } = this.parsedAttributes;\n    return this.context.element!.getElement<Node>(source)!;\n  }\n\n  protected get targetNode() {\n    const { targetNode: target } = this.parsedAttributes;\n    return this.context.element!.getElement<Node>(target)!;\n  }\n\n  protected getKeyStyle(attributes: ParsedBaseEdgeStyleProps): PathStyleProps {\n    const { loop, ...style } = this.getGraphicStyle(attributes);\n    const { sourceNode, targetNode } = this;\n\n    const d = loop && isSameNode(sourceNode, targetNode) ? this.getLoopPath(attributes) : this.getKeyPath(attributes);\n\n    const keyStyle: PathStyleProps = { d };\n\n    Path.PARSED_STYLE_LIST.forEach((key) => {\n      // @ts-expect-error skip type error\n      if (key in style) keyStyle[key] = style[key];\n    });\n\n    return keyStyle;\n  }\n\n  protected abstract getKeyPath(attributes: ParsedBaseEdgeStyleProps): PathArray;\n\n  protected getLoopPath(attributes: ParsedBaseEdgeStyleProps): PathArray {\n    const { sourcePort, targetPort } = attributes;\n    const node = this.sourceNode;\n\n    const bbox = getNodeBBox(node);\n    const defaultDist = Math.max(getBBoxWidth(bbox), getBBoxHeight(bbox));\n\n    const {\n      placement,\n      clockwise,\n      dist = defaultDist,\n    } = subStyleProps<Required<LoopStyleProps>>(this.getGraphicStyle(attributes), 'loop');\n\n    return getCubicLoopPath(node, placement, clockwise, dist, sourcePort, targetPort);\n  }\n\n  protected getEndpoints(\n    attributes: ParsedBaseEdgeStyleProps,\n    optimize = true,\n    controlPoints: Point[] | (() => Point[]) = [],\n  ): [Point, Point] {\n    const { sourcePort: sourcePortKey, targetPort: targetPortKey } = attributes;\n    const { sourceNode, targetNode } = this;\n\n    const [sourcePort, targetPort] = findPorts(sourceNode, targetNode, sourcePortKey, targetPortKey);\n\n    if (!optimize) {\n      const sourcePoint = sourcePort ? getPortPosition(sourcePort) : sourceNode.getCenter();\n      const targetPoint = targetPort ? getPortPosition(targetPort) : targetNode.getCenter();\n      return [sourcePoint, targetPoint];\n    }\n\n    const _controlPoints = typeof controlPoints === 'function' ? controlPoints() : controlPoints;\n    const sourcePoint = getConnectionPoint(sourcePort || sourceNode, _controlPoints[0] || targetPort || targetNode);\n    const targetPoint = getConnectionPoint(\n      targetPort || targetNode,\n      _controlPoints[_controlPoints.length - 1] || sourcePort || sourceNode,\n    );\n\n    return [sourcePoint, targetPoint];\n  }\n\n  protected getHaloStyle(attributes: ParsedBaseEdgeStyleProps): false | PathStyleProps {\n    if (attributes.halo === false) return false;\n\n    const keyStyle = this.getKeyStyle(attributes);\n    const haloStyle = subStyleProps<LineStyleProps>(this.getGraphicStyle(attributes), 'halo');\n\n    return { ...keyStyle, ...haloStyle };\n  }\n\n  protected getLabelStyle(attributes: ParsedBaseEdgeStyleProps): false | LabelStyleProps {\n    if (attributes.label === false || !attributes.labelText) return false;\n\n    const labelStyle = subStyleProps<Required<EdgeLabelStyleProps>>(this.getGraphicStyle(attributes), 'label');\n    const { placement, offsetX, offsetY, autoRotate, maxWidth, ...restStyle } = labelStyle;\n    const labelPositionStyle = getLabelPositionStyle(\n      this.shapeMap.key as EdgeKey,\n      placement,\n      autoRotate,\n      offsetX,\n      offsetY,\n    );\n\n    const bbox = this.shapeMap.key.getLocalBounds();\n    const wordWrapWidth = getWordWrapWidthByEnds([bbox.min, bbox.max], maxWidth);\n\n    return Object.assign({ wordWrapWidth }, labelPositionStyle, restStyle);\n  }\n\n  protected getBadgeStyle(attributes: ParsedBaseEdgeStyleProps): false | BadgeStyleProps {\n    if (attributes.badge === false || !attributes.badgeText) return false;\n\n    const { offsetX, offsetY, placement, ...badgeStyle } = subStyleProps<Required<EdgeBadgeStyleProps>>(\n      attributes,\n      'badge',\n    );\n\n    return Object.assign(\n      badgeStyle,\n      getBadgePositionStyle(this.shapeMap, placement, attributes.labelPlacement, offsetX, offsetY),\n    );\n  }\n\n  protected drawArrow(attributes: ParsedBaseEdgeStyleProps, type: 'start' | 'end') {\n    const isStart = type === 'start';\n    const arrowType = type === 'start' ? 'startArrow' : 'endArrow';\n    const enable = attributes[arrowType];\n\n    const keyShape = this.shapeMap.key as Path;\n\n    if (enable) {\n      const arrowStyle = this.getArrowStyle(attributes, isStart);\n\n      const [marker, markerOffset, arrowOffset] = isStart\n        ? (['markerStart', 'markerStartOffset', 'startArrowOffset'] as const)\n        : (['markerEnd', 'markerEndOffset', 'endArrowOffset'] as const);\n\n      const arrow = keyShape.parsedStyle[marker];\n      // update\n      if (arrow) arrow.attr(arrowStyle);\n      // create\n      else {\n        const Ctor = arrowStyle.src ? Image : Path;\n        const arrowShape = new Ctor({ style: arrowStyle });\n        keyShape.style[marker] = arrowShape;\n      }\n      keyShape.style[markerOffset] = attributes[arrowOffset] || arrowStyle.width / 2 + +arrowStyle.lineWidth;\n    } else {\n      // destroy\n      const marker = isStart ? 'markerStart' : 'markerEnd';\n      keyShape.style[marker]?.destroy();\n      keyShape.style[marker] = null;\n    }\n  }\n\n  private getArrowStyle(attributes: ParsedBaseEdgeStyleProps, isStart: boolean) {\n    const keyStyle = this.getShape('key')!.attributes;\n    const arrowType = isStart ? 'startArrow' : 'endArrow';\n    const { size, type, ...arrowStyle } = subStyleProps<Required<EdgeArrowStyleProps>>(\n      this.getGraphicStyle(attributes),\n      arrowType,\n    );\n    const [width, height] = parseSize(getArrowSize(keyStyle.lineWidth, size));\n    const arrowFn = isFunction(type) ? type : Symbol[type] || Symbol.triangle;\n    const d = arrowFn(width, height);\n\n    return Object.assign(\n      pick(keyStyle, ['stroke', 'strokeOpacity', 'fillOpacity']),\n      { width, height },\n      { ...(d && { d, fill: type === 'simple' ? '' : keyStyle.stroke }) },\n      arrowStyle,\n    );\n  }\n\n  protected drawLabelShape(attributes: ParsedBaseEdgeStyleProps, container: Group) {\n    const style = this.getLabelStyle(attributes);\n    this.upsert('label', Label, style, container);\n  }\n\n  protected drawHaloShape(attributes: ParsedBaseEdgeStyleProps, container: Group) {\n    const style = this.getHaloStyle(attributes);\n    this.upsert('halo', Path, style, container);\n  }\n\n  protected drawBadgeShape(attributes: ParsedBaseEdgeStyleProps, container: Group) {\n    const style = this.getBadgeStyle(attributes);\n    this.upsert('badge', Badge, style, container);\n  }\n\n  protected drawSourceArrow(attributes: ParsedBaseEdgeStyleProps) {\n    this.drawArrow(attributes, 'start');\n  }\n\n  protected drawTargetArrow(attributes: ParsedBaseEdgeStyleProps) {\n    this.drawArrow(attributes, 'end');\n  }\n\n  protected drawKeyShape(attributes: ParsedBaseEdgeStyleProps, container: Group): Path | undefined {\n    const style = this.getKeyStyle(attributes);\n    return this.upsert('key', Path, style, container);\n  }\n\n  public render(attributes = this.parsedAttributes, container: Group = this): void {\n    // 1. key shape\n    this.drawKeyShape(attributes, container);\n    if (!this.getShape('key')) return;\n\n    // 2. arrows\n    this.drawSourceArrow(attributes);\n    this.drawTargetArrow(attributes);\n\n    // 3. label\n    this.drawLabelShape(attributes, container);\n\n    // 4. halo\n    this.drawHaloShape(attributes, container);\n\n    // 5. badges\n    this.drawBadgeShape(attributes, container);\n  }\n\n  protected onframe() {\n    this.drawKeyShape(this.parsedAttributes, this);\n    this.drawSourceArrow(this.parsedAttributes);\n    this.drawTargetArrow(this.parsedAttributes);\n    this.drawHaloShape(this.parsedAttributes, this);\n    this.drawLabelShape(this.parsedAttributes, this);\n    this.drawBadgeShape(this.parsedAttributes, this);\n  }\n\n  public animate(keyframes: Keyframe[], options?: number | KeyframeAnimationOptions) {\n    const animation = super.animate(keyframes, options);\n\n    if (!animation) return animation;\n\n    //  currentTime \n    // Trigger update when setting currentTime\n    return new Proxy(animation, {\n      set: (target, propKey, value) => {\n        //  onframe \n        // Need to delay the timing of the onframe call, wait for the node position update to complete\n        if (propKey === 'currentTime') Promise.resolve().then(() => this.onframe());\n        return Reflect.set(target, propKey, value);\n      },\n    });\n  }\n}\n", "import type { DisplayObjectConfig } from '@antv/g';\nimport type { PathArray } from '@antv/util';\nimport type { Point } from '../../types';\nimport { getCubicPath, getCurveControlPoint, parseCurveOffset, parseCurvePosition } from '../../utils/edge';\nimport { mergeOptions } from '../../utils/style';\nimport type { BaseEdgeStyleProps } from './base-edge';\nimport { BaseEdge } from './base-edge';\n\n/**\n * <zh/> \n *\n * <en/> Cubic Bezier curve style properties\n */\nexport interface CubicStyleProps extends BaseEdgeStyleProps {\n  /**\n   * <zh/>  `curveOffset`  `curvePosition` \n   *\n   * <en/> Control points. Used to define the shape of the curve. If not specified, it will be calculated using `curveOffset` and `curvePosition`.\n   */\n  controlPoints?: [Point, Point];\n  /**\n   * <zh/> `0-1`\n   *\n   * <en/> The relative position of the control point on the line, ranging from `0-1`\n   * @defaultValue 0.5\n   */\n  curvePosition?: number | [number, number];\n  /**\n   * <zh/> \n   *\n   * <en/> The distance of the control point from the line\n   * @defaultValue 20\n   */\n  curveOffset?: number | [number, number];\n}\n\ntype ParsedCubicStyleProps = Required<CubicStyleProps>;\n\n/**\n * <zh/> \n *\n * <en/> Cubic Bezier curve\n */\nexport class Cubic extends BaseEdge {\n  static defaultStyleProps: Partial<CubicStyleProps> = {\n    curvePosition: 0.5,\n    curveOffset: 20,\n  };\n\n  constructor(options: DisplayObjectConfig<CubicStyleProps>) {\n    super(mergeOptions({ style: Cubic.defaultStyleProps }, options));\n  }\n\n  /**\n   * @inheritdoc\n   */\n  protected getKeyPath(attributes: ParsedCubicStyleProps): PathArray {\n    const [sourcePoint, targetPoint] = this.getEndpoints(attributes);\n    const { controlPoints, curvePosition, curveOffset } = attributes;\n\n    const actualControlPoints = this.getControlPoints(\n      sourcePoint,\n      targetPoint,\n      parseCurvePosition(curvePosition),\n      parseCurveOffset(curveOffset),\n      controlPoints,\n    );\n\n    return getCubicPath(sourcePoint, targetPoint, actualControlPoints);\n  }\n\n  protected getControlPoints(\n    sourcePoint: Point,\n    targetPoint: Point,\n    curvePosition: [number, number],\n    curveOffset: [number, number],\n    controlPoints?: [Point, Point],\n  ): [Point, Point] {\n    return controlPoints?.length === 2\n      ? controlPoints\n      : [\n          getCurveControlPoint(sourcePoint, targetPoint, curvePosition[0], curveOffset[0]),\n          getCurveControlPoint(sourcePoint, targetPoint, curvePosition[1], curveOffset[1]),\n        ];\n  }\n}\n", "import type { DisplayObjectConfig } from '@antv/g';\nimport type { Point } from '../../types';\nimport { mergeOptions } from '../../utils/style';\nimport type { BaseEdgeStyleProps } from './base-edge';\nimport { Cubic } from './cubic';\n\n/**\n * <zh/> \n *\n * <en/> Cubic Bezier curve in horizontal direction style properties\n */\nexport interface CubicHorizontalStyleProps extends BaseEdgeStyleProps {\n  /**\n   * <zh/> `0-1`\n   *\n   * <en/> The relative position of the control point on the line, ranging from `0-1`\n   * @defaultValue [0.5, 0.5]\n   */\n  curvePosition?: number | [number, number];\n  /**\n   * <zh/> \n   *\n   * <en/> The distance of the control point from the line\n   * @defaultValue [0, 0]\n   */\n  curveOffset?: number | [number, number];\n}\n\n/**\n * <zh/> \n *\n * <en/> Cubic Bezier curve in horizontal direction\n * @remarks\n * <zh/>  x  y \n *\n * <en/> Please note that when calculating the control points, the distance on the x-axis is mainly considered, and the change on the y-axis is ignored\n */\nexport class CubicHorizontal extends Cubic {\n  static defaultStyleProps: Partial<CubicHorizontalStyleProps> = {\n    curvePosition: [0.5, 0.5],\n    curveOffset: [0, 0],\n  };\n\n  constructor(options: DisplayObjectConfig<CubicHorizontalStyleProps>) {\n    super(mergeOptions({ style: CubicHorizontal.defaultStyleProps }, options));\n  }\n\n  protected getControlPoints(\n    sourcePoint: Point,\n    targetPoint: Point,\n    curvePosition: [number, number],\n    curveOffset: [number, number],\n  ): [Point, Point] {\n    const xDist = targetPoint[0] - sourcePoint[0];\n    return [\n      [sourcePoint[0] + xDist * curvePosition[0] + curveOffset[0], sourcePoint[1]],\n      [targetPoint[0] - xDist * curvePosition[1] + curveOffset[1], targetPoint[1]],\n    ];\n  }\n}\n", "import type { DisplayObjectConfig } from '@antv/g';\nimport type { NodeData } from '../../spec';\nimport type { Point } from '../../types';\nimport { positionOf } from '../../utils/position';\nimport { mergeOptions } from '../../utils/style';\nimport { distance, rad, subtract } from '../../utils/vector';\nimport type { CubicStyleProps } from './cubic';\nimport { Cubic } from './cubic';\n\n/**\n * <zh/> \n *\n * <en/> Radial cubic style props\n */\nexport interface CubicRadialStyleProps extends CubicStyleProps {}\n\n/**\n * <zh/> \n *\n * <en/> Radial cubic edge\n */\nexport class CubicRadial extends Cubic {\n  static defaultStyleProps: Partial<CubicStyleProps> = {\n    curvePosition: 0.5,\n    curveOffset: 20,\n  };\n\n  constructor(options: DisplayObjectConfig<CubicStyleProps>) {\n    super(mergeOptions({ style: CubicRadial.defaultStyleProps }, options));\n  }\n\n  private get ref(): NodeData {\n    return this.context.model.getRootsData()[0];\n  }\n\n  protected getEndpoints(attributes: Required<CubicStyleProps>): [Point, Point] {\n    if (this.sourceNode.id === this.ref.id) {\n      return super.getEndpoints(attributes);\n    }\n\n    const refPoint = positionOf(this.ref);\n    const sourcePoint = this.sourceNode.getIntersectPoint(refPoint, true);\n    const targetPoint = this.targetNode.getIntersectPoint(refPoint);\n\n    return [sourcePoint, targetPoint];\n  }\n\n  private toRadialCoordinate(p: Point) {\n    const refPoint = positionOf(this.ref);\n    const r = distance(p, refPoint);\n    const radian = rad(subtract(p, refPoint));\n    return [r, radian];\n  }\n\n  protected getControlPoints(\n    sourcePoint: Point,\n    targetPoint: Point,\n    curvePosition: [number, number],\n    curveOffset: [number, number],\n  ): [Point, Point] {\n    const [r1, rad1] = this.toRadialCoordinate(sourcePoint);\n    const [r2] = this.toRadialCoordinate(targetPoint);\n\n    const rDist = r2 - r1;\n\n    return [\n      [\n        sourcePoint[0] + (rDist * curvePosition[0] + curveOffset[0]) * Math.cos(rad1),\n        sourcePoint[1] + (rDist * curvePosition[0] + curveOffset[0]) * Math.sin(rad1),\n      ],\n      [\n        targetPoint[0] - (rDist * curvePosition[1] - curveOffset[0]) * Math.cos(rad1),\n        targetPoint[1] - (rDist * curvePosition[1] - curveOffset[0]) * Math.sin(rad1),\n      ],\n    ];\n  }\n}\n", "import type { DisplayObjectConfig } from '@antv/g';\nimport type { Point } from '../../types';\nimport { mergeOptions } from '../../utils/style';\nimport type { BaseEdgeStyleProps } from './base-edge';\nimport { Cubic } from './cubic';\n\n/**\n * <zh/> \n *\n * <en/> Cubic Bezier curve style properties in vertical direction\n */\nexport interface CubicVerticalStyleProps extends BaseEdgeStyleProps {\n  /**\n   * <zh/> `0-1`\n   *\n   * <en/> The relative position of the control point on the line, ranging from `0-1`\n   * @defaultValue [0.5, 0.5]\n   */\n  curvePosition?: number | [number, number];\n  /**\n   * <zh/> \n   *\n   * <en/> The distance of the control point from the line\n   * @defaultValue [0, 0]\n   */\n  curveOffset?: number | [number, number];\n}\n\n/**\n * <zh/> \n *\n * <en/> Cubic Bezier curve in vertical direction\n * @remarks\n * <zh/>  y  x \n *\n * <en/> Please note that when calculating the control points, the distance on the y-axis is mainly considered, and the change on the x-axis is ignored\n */\nexport class CubicVertical extends Cubic {\n  static defaultStyleProps: Partial<CubicVerticalStyleProps> = {\n    curvePosition: [0.5, 0.5],\n    curveOffset: [0, 0],\n  };\n\n  constructor(options: DisplayObjectConfig<CubicVerticalStyleProps>) {\n    super(mergeOptions({ style: CubicVertical.defaultStyleProps }, options));\n  }\n\n  protected getControlPoints(\n    sourcePoint: Point,\n    targetPoint: Point,\n    curvePosition: [number, number],\n    curveOffset: [number, number],\n  ): [Point, Point] {\n    const yDist = targetPoint[1] - sourcePoint[1];\n    return [\n      [sourcePoint[0], sourcePoint[1] + yDist * curvePosition[0] + curveOffset[0]],\n      [targetPoint[0], targetPoint[1] - yDist * curvePosition[1] + curveOffset[1]],\n    ];\n  }\n}\n", "import type { DisplayObjectConfig } from '@antv/g';\nimport type { PathArray } from '@antv/util';\nimport { mergeOptions } from '../../utils/style';\nimport type { BaseEdgeStyleProps } from './base-edge';\nimport { BaseEdge } from './base-edge';\n\n/**\n * <zh/> \n *\n * <en/> Line style properties\n */\nexport interface LineStyleProps extends BaseEdgeStyleProps {}\n\ntype ParsedLineStyleProps = Required<LineStyleProps>;\n\n/**\n * <zh/> \n *\n * <en/> Line\n */\nexport class Line extends BaseEdge {\n  static defaultStyleProps: Partial<LineStyleProps> = {};\n\n  constructor(options: DisplayObjectConfig<LineStyleProps>) {\n    super(mergeOptions({ style: Line.defaultStyleProps }, options));\n  }\n\n  protected getKeyPath(attributes: ParsedLineStyleProps): PathArray {\n    const [sourcePoint, targetPoint] = this.getEndpoints(attributes);\n    return [\n      ['M', sourcePoint[0], sourcePoint[1]],\n      ['L', targetPoint[0], targetPoint[1]],\n    ];\n  }\n}\n", "import { isNumber } from '@antv/util';\nimport type { Direction, ID, Node, Point, ShortestPathRouterOptions } from '../../types';\nimport { getBBoxSegments, getBBoxSize, getExpandedBBox, isPointInBBox, isPointOnBBoxBoundary } from '../bbox';\nimport { getLinesIntersection } from '../line';\nimport { add, manhattanDistance, toVector2 } from '../vector';\n\nconst defaultCfg: ShortestPathRouterOptions = {\n  enableObstacleAvoidance: false,\n  offset: 10,\n  maxAllowedDirectionChange: Math.PI / 2,\n  maximumLoops: 3000,\n  gridSize: 5,\n  startDirections: ['top', 'right', 'bottom', 'left'],\n  endDirections: ['top', 'right', 'bottom', 'left'],\n  directionMap: {\n    right: { stepX: 1, stepY: 0 },\n    left: { stepX: -1, stepY: 0 },\n    bottom: { stepX: 0, stepY: 1 },\n    top: { stepX: 0, stepY: -1 },\n  },\n  penalties: { 0: 0, 90: 0 },\n  distFunc: manhattanDistance,\n};\n\nconst keyOf = (point: Point) => `${Math.round(point[0])}|||${Math.round(point[1])}`;\n\nfunction alignToGrid(p: Point, gridSize: number): Point;\nfunction alignToGrid(p: number, gridSize: number): number;\n/**\n * <zh/> \n *\n * <en/> Align to the grid\n * @param p - <zh/>  | <en/> point\n * @param gridSize - <zh/>  | <en/> grid size\n * @returns <zh/>  | <en/> aligned point\n */\nfunction alignToGrid(p: number | Point, gridSize: number): number | Point {\n  const align = (value: number) => Math.round(value / gridSize);\n  if (isNumber(p)) return align(p);\n  return p.map(align) as Point;\n}\n\n/**\n * <zh/>  180 \n *\n * <en/ >Get changed direction angle and make sure less than 180 degrees\n * @param angle1 - <zh/>  | <en/> the first angle\n * @param angle2 - <zh/>  | <en/> the second angle\n * @returns <zh/>  | <en/> changed direction angle\n */\nfunction getAngleDiff(angle1: number, angle2: number) {\n  const directionChange = Math.abs(angle1 - angle2);\n  return directionChange > Math.PI ? 2 * Math.PI - directionChange : directionChange;\n}\n\n/**\n * <zh/>  p1  p2  x \n *\n * <en/> Get the angle between the vector from p1 to p2 and the positive direction of the x-axis, in radians\n * @param p1 - <zh/>  p1 | <en/> point p1\n * @param p2 - <zh/>  p2 | <en/> point p2\n * @returns <zh/>  | <en/> angle\n */\nfunction getDirectionAngle(p1: Point, p2: Point) {\n  const deltaX = p2[0] - p1[0];\n  const deltaY = p2[1] - p1[1];\n\n  if (!deltaX && !deltaY) return 0;\n\n  return Math.atan2(deltaY, deltaX);\n}\n\n/**\n * <zh/> \n *\n * <en/> Get direction change between two points\n * @param current - <zh/>  | <en/> current point\n * @param neighbor - <zh/>  | <en/> neighbor point\n * @param cameFrom - <zh/>  | <en/> source point\n * @param scaleStartPoint - <zh/>  | <en/> scaled start point\n * @returns <zh/>  | <en/> direction change\n */\nfunction getDirectionChange(\n  current: Point,\n  neighbor: Point,\n  cameFrom: Record<string, Point>,\n  scaleStartPoint: Point,\n): number {\n  const directionAngle = getDirectionAngle(current, neighbor);\n\n  const currentCameFrom = cameFrom[keyOf(current)];\n  const prev = !currentCameFrom ? scaleStartPoint : currentCameFrom;\n  const prevDirectionAngle = getDirectionAngle(prev, current);\n\n  return getAngleDiff(prevDirectionAngle, directionAngle);\n}\n\n/**\n * <zh/> \n *\n * <en/> Get obstacle map\n * @param nodes - <zh/>  | <en/> all nodes on the graph\n * @param options - <zh/>  | <en/> router options\n * @returns <zh/>  | <en/> obstacle map\n */\nconst getObstacleMap = (nodes: Node[], options: Required<ShortestPathRouterOptions>) => {\n  const { offset, gridSize } = options;\n  const obstacleMap: Record<string, boolean> = {};\n\n  nodes.forEach((item: Node) => {\n    if (!item || item.destroyed || !item.isVisible()) return;\n    const bbox = getExpandedBBox(item.getRenderBounds(), offset);\n    for (let x = alignToGrid(bbox.min[0], gridSize); x <= alignToGrid(bbox.max[0], gridSize); x += 1) {\n      for (let y = alignToGrid(bbox.min[1], gridSize); y <= alignToGrid(bbox.max[1], gridSize); y += 1) {\n        obstacleMap[`${x}|||${y}`] = true;\n      }\n    }\n  });\n  return obstacleMap;\n};\n\n/**\n * <zh/> \n *\n * <en/> Estimate minimum cost from the starting point to multiple anchor points\n * @param from - <zh/>  | <en/> source point\n * @param anchors - <zh/>  | <en/> anchor points\n * @param distFunc - <zh/>  | <en/> distance function\n * @returns <zh/>  | <en/> minimum cost\n */\nexport function estimateCost(from: Point, anchors: Point[], distFunc: (p1: Point, p2: Point) => number) {\n  return Math.min(...anchors.map((anchor) => distFunc(from, anchor)));\n}\n\n/**\n * <zh/> \n *\n * <en/> Given a set of points and a reference point, find the point closest to the reference point from the set of points\n * @param points - <zh/>  | <en/> set of points\n * @param refPoint - <zh/>  | <en/> reference point\n * @param distFunc - <zh/>  | <en/> distance function\n * @returns <zh/>  | <en/> nearest point\n */\nexport function getNearestPoint(points: Point[], refPoint: Point, distFunc: (p1: Point, p2: Point) => number): Point {\n  let nearestPoint = points[0];\n  let minDistance = distFunc(points[0], refPoint);\n  for (let i = 0; i < points.length; i++) {\n    const point = points[i];\n    const dis = distFunc(point, refPoint);\n    if (dis < minDistance) {\n      nearestPoint = point;\n      minDistance = dis;\n    }\n  }\n  return nearestPoint;\n}\n\n/**\n * Calculate the connection points on the expanded BBox\n * @param point\n * @param node\n * @param directions\n * @param options\n */\nconst getBoxPoints = (\n  point: Point,\n  node: Node,\n  directions: Direction[],\n  options: Required<ShortestPathRouterOptions>,\n): Point[] => {\n  // create-edge endNode  null\n  if (!node) return [point];\n\n  const { directionMap, offset } = options;\n  const expandedBBox = getExpandedBBox(node.getRenderBounds(), offset);\n\n  const points = (Object.keys(directionMap) as Direction[]).reduce<Point[]>((res, directionKey) => {\n    if (directions.includes(directionKey)) {\n      const direction = directionMap[directionKey];\n      const [width, height] = getBBoxSize(expandedBBox);\n      const otherPoint: Point = [point[0] + direction.stepX * width, point[1] + direction.stepY * height];\n      const segments = getBBoxSegments(expandedBBox);\n      for (let i = 0; i < segments.length; i++) {\n        const intersectP = getLinesIntersection([point, otherPoint], segments[i]);\n        if (intersectP && isPointOnBBoxBoundary(intersectP, expandedBBox)) {\n          res.push(intersectP);\n        }\n      }\n    }\n\n    return res;\n  }, []);\n\n  if (!isPointInBBox(point, expandedBBox)) {\n    points.push(point);\n  }\n\n  return points.map((point) => alignToGrid(point, options.gridSize));\n};\n\nconst getControlPoints = (\n  current: Point,\n  cameFrom: Record<ID, Point>,\n  scaleStartPoint: Point,\n  endPoint: Point,\n  startPoints: Point[],\n  scaleEndPoint: Point,\n  gridSize: number,\n) => {\n  const controlPoints: Point[] = [];\n\n  // append endPoint\n  let pointZero: Point = [\n    scaleEndPoint[0] === endPoint[0] ? endPoint[0] : current[0] * gridSize,\n    scaleEndPoint[1] === endPoint[1] ? endPoint[1] : current[1] * gridSize,\n  ];\n  controlPoints.unshift(pointZero);\n\n  let _current = current;\n  let _currentCameFrom = cameFrom[keyOf(_current)];\n\n  while (_currentCameFrom) {\n    const prePoint = _currentCameFrom;\n    const point = _current;\n    const directionChange = getDirectionChange(prePoint, point, cameFrom, scaleStartPoint);\n\n    if (directionChange) {\n      pointZero = [\n        prePoint[0] === point[0] ? pointZero[0] : prePoint[0] * gridSize,\n        prePoint[1] === point[1] ? pointZero[1] : prePoint[1] * gridSize,\n      ];\n      controlPoints.unshift(pointZero);\n    }\n    _currentCameFrom = cameFrom[keyOf(prePoint)];\n    _current = prePoint;\n  }\n\n  // append startPoint\n  const realStartPoints = startPoints.map((point) => [point[0] * gridSize, point[1] * gridSize] as Point);\n  const startPoint = getNearestPoint(realStartPoints, pointZero, manhattanDistance);\n\n  controlPoints.unshift(startPoint);\n\n  return controlPoints;\n};\n\n/**\n * Find the shortest path between a given source node to a destination node according to A* Search Algorithmhttps://www.geeksforgeeks.org/a-search-algorithm/\n * @param sourceNode - <zh/>  | <en/> source node\n * @param targetNode - <zh/>  | <en/> target node\n * @param nodes - <zh/>  | <en/> all nodes on the graph\n * @param config - <zh/>  | <en/> router options\n * @returns <zh/>  | <en/> control point array\n */\nexport function aStarSearch(\n  sourceNode: Node,\n  targetNode: Node,\n  nodes: Node[],\n  config: ShortestPathRouterOptions,\n): Point[] {\n  const startPoint = toVector2(sourceNode.getCenter());\n  const endPoint = toVector2(targetNode.getCenter());\n\n  const options = Object.assign(defaultCfg, config) as Required<ShortestPathRouterOptions>;\n\n  const { gridSize } = options;\n\n  const obstacles = options.enableObstacleAvoidance ? nodes : [sourceNode, targetNode];\n  const obstacleMap = getObstacleMap(obstacles, options);\n\n  const scaleStartPoint = alignToGrid(startPoint, gridSize);\n  const scaleEndPoint = alignToGrid(endPoint, gridSize);\n\n  const startPoints = getBoxPoints(startPoint, sourceNode, options.startDirections, options);\n  const endPoints = getBoxPoints(endPoint, targetNode, options.endDirections, options);\n\n  startPoints.forEach((point) => delete obstacleMap[keyOf(point)]);\n  endPoints.forEach((point) => delete obstacleMap[keyOf(point)]);\n\n  const openList: Record<string, Point> = {};\n  const closedList: Record<string, boolean> = {};\n  const cameFrom: Record<string, Point> = {};\n\n  // The movement cost to move from the starting point to the current point on the grid.\n  const gScore: Record<string, number> = {};\n\n  // The estimated movement cost to move from the starting point to the end point after passing through the current point.\n  // f = g + h\n  const fScore: Record<string, number> = {};\n\n  const sortedOpenSet = new SortedArray();\n\n  for (let i = 0; i < startPoints.length; i++) {\n    const firstStep = startPoints[i];\n    const key = keyOf(firstStep);\n    openList[key] = firstStep;\n    gScore[key] = 0;\n    fScore[key] = estimateCost(firstStep, endPoints, options.distFunc);\n\n    // Push start point to sortedOpenSet\n    sortedOpenSet.add({\n      id: key,\n      value: fScore[key],\n    });\n  }\n\n  const endPointsKeys = endPoints.map((point) => keyOf(point));\n\n  let remainLoops = options.maximumLoops;\n  let current: Point;\n  let curCost = Infinity;\n\n  for (const [id, value] of Object.entries(openList)) {\n    if (fScore[id] <= curCost) {\n      curCost = fScore[id];\n      current = value;\n    }\n  }\n\n  while (Object.keys(openList).length > 0 && remainLoops > 0) {\n    const minId = sortedOpenSet.minId(false);\n    if (minId) {\n      current = openList[minId];\n    } else {\n      break;\n    }\n    const key = keyOf(current);\n\n    // If currentNode is final, return the successful path\n    if (endPointsKeys.includes(key)) {\n      return getControlPoints(current, cameFrom, scaleStartPoint, endPoint, startPoints, scaleEndPoint, gridSize);\n    }\n\n    // Set currentNode as closed\n    delete openList[key];\n    sortedOpenSet.remove(key);\n    closedList[key] = true;\n\n    // Get the neighbor points of the next step\n    for (const dir of Object.values(options.directionMap)) {\n      const neighbor = add(current, [dir.stepX, dir.stepY]);\n      const neighborId = keyOf(neighbor);\n      if (closedList[neighborId]) continue;\n\n      const directionChange = getDirectionChange(current, neighbor, cameFrom, scaleStartPoint);\n      if (directionChange > options.maxAllowedDirectionChange) continue;\n\n      if (obstacleMap[neighborId]) continue; // skip if intersects\n\n      // Add neighbor points to openList, and calculate the cost of each neighbor point\n      if (!openList[neighborId]) {\n        openList[neighborId] = neighbor;\n      }\n\n      const directionPenalties = options.penalties[directionChange];\n      const neighborCost =\n        options.distFunc(current, neighbor) + (isNaN(directionPenalties) ? gridSize : directionPenalties);\n      const costFromStart = gScore[key] + neighborCost;\n      const neighborGScore = gScore[neighborId];\n\n      if (neighborGScore && costFromStart >= neighborGScore) continue;\n\n      cameFrom[neighborId] = current;\n      gScore[neighborId] = costFromStart;\n      fScore[neighborId] = costFromStart + estimateCost(neighbor, endPoints, options.distFunc);\n\n      sortedOpenSet.add({\n        id: neighborId,\n        value: fScore[neighborId],\n      });\n    }\n    remainLoops -= 1;\n  }\n\n  return [];\n}\n\ntype Item = {\n  id: string;\n  value: number;\n};\n\n/**\n * <zh/> \n *\n * <en/> Sorted array, sorted in ascending order\n */\nexport class SortedArray {\n  public arr: Item[] = [];\n\n  private map: Record<string, boolean> = {};\n\n  constructor() {\n    this.arr = [];\n    this.map = {};\n  }\n\n  private _innerAdd(item: Item, length: number) {\n    let low = 0,\n      high = length - 1;\n    while (high - low > 1) {\n      const mid = Math.floor((low + high) / 2);\n      if (this.arr[mid].value > item.value) {\n        high = mid;\n      } else if (this.arr[mid].value < item.value) {\n        low = mid;\n      } else {\n        this.arr.splice(mid, 0, item);\n        this.map[item.id] = true;\n        return;\n      }\n    }\n    this.arr.splice(high, 0, item);\n    this.map[item.id] = true;\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Add the new item to the appropriate index\n   * @param item - <zh/>  | <en/> new item\n   */\n  public add(item: Item) {\n    // \n    // If exists, remove it\n    delete this.map[item.id];\n\n    const length = this.arr.length;\n    // \n    // If empty or the last element is less than the current element, add to the end\n    if (!length || this.arr[length - 1].value < item.value) {\n      this.arr.push(item);\n      this.map[item.id] = true;\n      return;\n    }\n\n    // \n    // Find the appropriate position to insert in ascending order\n    this._innerAdd(item, length);\n  }\n\n  public remove(id: string) {\n    if (!this.map[id]) return;\n    delete this.map[id];\n  }\n\n  private _clearAndGetMinId() {\n    let res;\n    for (let i = this.arr.length - 1; i >= 0; i--) {\n      if (this.map[this.arr[i].id]) res = this.arr[i].id;\n      else this.arr.splice(i, 1);\n    }\n    return res;\n  }\n\n  private _findFirstId() {\n    while (this.arr.length) {\n      const first = this.arr.shift()!;\n      if (this.map[first.id]) return first.id;\n    }\n  }\n\n  public minId(clear: boolean) {\n    if (clear) {\n      return this._clearAndGetMinId();\n    } else {\n      return this._findFirstId();\n    }\n  }\n}\n", "import type { DisplayObjectConfig } from '@antv/g';\nimport type { PathArray } from '@antv/util';\nimport type { LoopStyleProps, Point, PolylineRouter } from '../../types';\nimport { getBBoxHeight, getBBoxWidth, getNodeBBox } from '../../utils/bbox';\nimport { getPolylineLoopPath, getPolylinePath } from '../../utils/edge';\nimport { subStyleProps } from '../../utils/prefix';\nimport { orth } from '../../utils/router/orth';\nimport { aStarSearch } from '../../utils/router/shortest-path';\nimport { mergeOptions } from '../../utils/style';\nimport type { BaseEdgeStyleProps } from './base-edge';\nimport { BaseEdge } from './base-edge';\n\n/**\n * <zh/> \n *\n * <en/> Polyline style properties\n */\nexport interface PolylineStyleProps extends BaseEdgeStyleProps {\n  /**\n   * <zh/> \n   *\n   * <en/> The radius of the rounded corner\n   * @defaultValue 0\n   */\n  radius?: number;\n  /**\n   * <zh/> \n   *\n   * <en/> Control point array\n   */\n  controlPoints?: Point[];\n  /**\n   * <zh/>  controlPoints \n   *\n   * <en/> Whether to enable routing, it is enabled by default and controlPoints will be automatically included\n   * @defaultValue false\n   */\n  router?: PolylineRouter;\n}\n\ntype ParsedPolylineStyleProps = Required<PolylineStyleProps>;\n\n/**\n * <zh/> \n *\n * <en/> Polyline\n */\nexport class Polyline extends BaseEdge {\n  static defaultStyleProps: Partial<PolylineStyleProps> = {\n    radius: 0,\n    controlPoints: [],\n    router: false,\n  };\n\n  constructor(options: DisplayObjectConfig<PolylineStyleProps>) {\n    super(mergeOptions({ style: Polyline.defaultStyleProps }, options));\n  }\n\n  protected getControlPoints(attributes: ParsedPolylineStyleProps): Point[] {\n    const { router } = attributes;\n    const { sourceNode, targetNode } = this;\n    const [sourcePoint, targetPoint] = this.getEndpoints(attributes, false);\n\n    let controlPoints: Point[] = [];\n\n    if (!router) {\n      controlPoints = attributes.controlPoints;\n    } else {\n      if (router.type === 'shortest-path') {\n        const nodes = this.context.element!.getNodes();\n        controlPoints = aStarSearch(sourceNode, targetNode, nodes, router);\n\n        if (!controlPoints.length) {\n          controlPoints = orth(sourcePoint, targetPoint, sourceNode, targetNode, attributes.controlPoints, {\n            padding: router.offset,\n          });\n        }\n      } else if (router.type === 'orth') {\n        controlPoints = orth(sourcePoint, targetPoint, sourceNode, targetNode, attributes.controlPoints, router);\n      }\n    }\n\n    return controlPoints;\n  }\n\n  protected getPoints(attributes: ParsedPolylineStyleProps): Point[] {\n    const controlPoints = this.getControlPoints(attributes);\n\n    const [newSourcePoint, newTargetPoint] = this.getEndpoints(attributes, true, controlPoints);\n    return [newSourcePoint, ...controlPoints, newTargetPoint];\n  }\n\n  protected getKeyPath(attributes: ParsedPolylineStyleProps): PathArray {\n    const points = this.getPoints(attributes);\n\n    return getPolylinePath(points, attributes.radius);\n  }\n\n  protected getLoopPath(attributes: ParsedPolylineStyleProps): PathArray {\n    const { sourcePort: sourcePortKey, targetPort: targetPortKey, radius } = attributes;\n    const node = this.sourceNode;\n\n    const bbox = getNodeBBox(node);\n    //  bbox  1/4\n    // Default distance of the turning point is 1/4 of the maximum width and height of the bbox\n    const defaultDist = Math.max(getBBoxWidth(bbox), getBBoxHeight(bbox)) / 4;\n\n    const {\n      placement,\n      clockwise,\n      dist = defaultDist,\n    } = subStyleProps<Required<LoopStyleProps>>(this.getGraphicStyle(attributes), 'loop');\n\n    return getPolylineLoopPath(node, radius, placement, clockwise, dist, sourcePortKey, targetPortKey);\n  }\n}\n", "import type { DisplayObjectConfig } from '@antv/g';\nimport type { PathArray } from '@antv/util';\nimport type { Point } from '../../types';\nimport { getCurveControlPoint, getQuadraticPath } from '../../utils/edge';\nimport { mergeOptions } from '../../utils/style';\nimport type { BaseEdgeStyleProps } from './base-edge';\nimport { BaseEdge } from './base-edge';\n\n/**\n * <zh/> \n *\n * <en/> Quadratic Bezier curve style properties\n */\nexport interface QuadraticStyleProps extends BaseEdgeStyleProps {\n  /**\n   * <zh/> `curveOffset``curvePosition`\n   *\n   * <en/> Control point. Used to define the shape of the curve. If not specified, it will be calculated using `curveOffset` and `curvePosition`.\n   */\n  controlPoint?: Point;\n  /**\n   * <zh/> `0-1`\n   *\n   * <en/> The relative position of the control point on the line, ranging from `0-1`\n   * @defaultValue 0.5\n   */\n  curvePosition?: number;\n  /**\n   * <zh/> \n   *\n   * <en/> The distance of the control point from the line\n   * @defaultValue 30\n   */\n  curveOffset?: number;\n}\n\ntype ParsedQuadraticStyleProps = Required<QuadraticStyleProps>;\n\n/**\n * <zh/> \n *\n * <en/> Quadratic Bezier curve\n */\nexport class Quadratic extends BaseEdge {\n  static defaultStyleProps: Partial<QuadraticStyleProps> = {\n    curvePosition: 0.5,\n    curveOffset: 30,\n  };\n\n  constructor(options: DisplayObjectConfig<QuadraticStyleProps>) {\n    super(mergeOptions({ style: Quadratic.defaultStyleProps }, options));\n  }\n\n  protected getKeyPath(attributes: ParsedQuadraticStyleProps): PathArray {\n    const { curvePosition, curveOffset } = attributes;\n    const [sourcePoint, targetPoint] = this.getEndpoints(attributes);\n    const controlPoint =\n      attributes.controlPoint || getCurveControlPoint(sourcePoint, targetPoint, curvePosition, curveOffset);\n    return getQuadraticPath(sourcePoint, targetPoint, controlPoint);\n  }\n}\n", "import type { AABB, DisplayObject, TextStyleProps } from '@antv/g';\nimport { get, isNumber, isString, set } from '@antv/util';\nimport { BaseCombo, BaseEdge, BaseNode } from '../elements';\nimport type { BaseShape, BaseShapeStyleProps } from '../elements/shapes';\nimport type { Combo, Edge, Element, Node, NodePortStyleProps, Placement, Point, TriangleDirection } from '../types';\nimport type { NodeLabelStyleProps, Port } from '../types/node';\nimport { getBBoxHeight, getBBoxWidth } from './bbox';\nimport { isPoint } from './is';\nimport { findNearestPoints, getEllipseIntersectPoint } from './point';\nimport { getXYByPlacement } from './position';\n\n/**\n * <zh/>  Node \n *\n * <en/> Judge whether the instance is Node\n * @param shape - <zh/>  | <en/> instance\n * @returns <zh/>  Node  | <en/> whether the instance is Node\n */\nexport function isNode(shape: DisplayObject | Port): shape is Node {\n  return shape instanceof BaseNode && shape.type === 'node';\n}\n\n/**\n * <zh/>  Edge \n *\n * <en/> Judge whether the instance is Edge\n * @param shape - <zh/>  | <en/> instance\n * @returns <zh/>  Edge  | <en/> whether the instance is Edge\n */\nexport function isEdge(shape: DisplayObject): shape is Edge {\n  return shape instanceof BaseEdge;\n}\n\n/**\n * <zh/>  Combo \n *\n * <en/> Judge whether the instance is Combo\n * @param shape - <zh/>  | <en/> instance\n * @returns <zh/>  Combo  | <en/> whether the instance is Combo\n */\nexport function isCombo(shape: any): shape is Combo {\n  return shape instanceof BaseCombo;\n}\n\n/**\n * <zh/>  Element \n *\n * <en/> Judge whether the instance is Element\n * @param shape - <zh/>  | <en/> instance\n * @returns <zh/>  Element  | <en/> whether the instance is Element\n */\nexport function isElement(shape: any): shape is Element {\n  return isNode(shape) || isEdge(shape) || isCombo(shape);\n}\n\n/**\n * <zh/> \n *\n * <en/> Whether the two nodes are the same\n * @param node1 - <zh/> 1 | <en/> Node1\n * @param node2 - <zh/> 2 | <en/> Node2\n * @returns <zh/>  | <en/> Whether the same\n */\nexport function isSameNode(node1: Node, node2: Node): boolean {\n  if (!node1 || !node2) return false;\n  return node1 === node2;\n}\n\nconst PORT_MAP: Record<string, Point> = {\n  top: [0.5, 0],\n  right: [1, 0.5],\n  bottom: [0.5, 1],\n  left: [0, 0.5],\n  'left-top': [0, 0],\n  'top-left': [0, 0],\n  'left-bottom': [0, 1],\n  'bottom-left': [0, 1],\n  'right-top': [1, 0],\n  'top-right': [1, 0],\n  'right-bottom': [1, 1],\n  'bottom-right': [1, 1],\n  default: [0.5, 0.5],\n};\n\n/**\n * Get the Port x, y by `position`.\n * @param bbox - BBox of element.\n * @param placement - The position relative with element.\n * @param portMap - The map of position.\n * @param isRelative - Whether the position in MAP is relative.\n * @returns [x, y]\n */\nexport function getPortXYByPlacement(\n  bbox: AABB,\n  placement?: Placement,\n  portMap: Record<string, Point> = PORT_MAP,\n  isRelative = true,\n): Point {\n  const DEFAULT = [0.5, 0.5];\n  const p: [number, number] = isString(placement) ? get(portMap, placement.toLocaleLowerCase(), DEFAULT) : placement;\n\n  if (!isRelative && isString(placement)) return p;\n\n  const [x, y] = p || DEFAULT;\n  return [bbox.min[0] + getBBoxWidth(bbox) * x, bbox.min[1] + getBBoxHeight(bbox) * y];\n}\n\n/**\n * <zh/> \n *\n * <en/> Get all ports\n * @param node - <zh/>  | <en/> Node\n * @returns <zh/>  | <en/> All Ports\n */\nexport function getAllPorts(node: Node): Record<string, Port> {\n  if (!node) return {};\n  // 1.  | Get the ports that need to be drawn\n  const ports = node.getPorts();\n\n  // 2.  | Get the ports that do not need to be drawn\n  const portsStyle = node.attributes.ports || [];\n  portsStyle.forEach((portStyle: NodePortStyleProps, i: number) => {\n    const { key, placement } = portStyle;\n    if (isSimplePort(portStyle)) {\n      ports[key || i] ||= getXYByPlacement(node.getShape('key').getBounds(), placement);\n    }\n  });\n  return ports;\n}\n\n/**\n * <zh/> \n *\n * <en/> Whether it is a simple port, which will not draw additional graphics\n * @param portStyle - <zh/>  | <en/> Port Style\n * @returns <zh/>  | <en/> Whether it is a simple port\n */\nexport function isSimplePort(portStyle: NodePortStyleProps): boolean {\n  const { r } = portStyle;\n  return !r || Number(r) === 0;\n}\n\n/**\n * <zh/> \n *\n * <en/> Get the position of the port\n * @param port - <zh/>  | <en/> Port\n * @returns <zh/>  | <en/> Port Position\n */\nexport function getPortPosition(port: Port): Point {\n  return isPoint(port) ? port : (port.getPosition() as Point);\n}\n\n/**\n * <zh/> \n *\n * <en/> Find the source port and target port\n * @param sourceNode - <zh/>  | <en/> Source Node\n * @param targetNode - <zh/>  | <en/> Target Node\n * @param sourcePortKey - <zh/>  key | <en/> Source Port Key\n * @param targetPortKey - <zh/>  key | <en/> Target Port Key\n * @returns <zh/>  | <en/> Source Port and Target Port\n */\nexport function findPorts(\n  sourceNode: Node,\n  targetNode: Node,\n  sourcePortKey?: string,\n  targetPortKey?: string,\n): [Port | undefined, Port | undefined] {\n  const sourcePort = findPort(sourceNode, targetNode, sourcePortKey, targetPortKey);\n  const targetPort = findPort(targetNode, sourceNode, targetPortKey, sourcePortKey);\n  return [sourcePort, targetPort];\n}\n\n/**\n * <zh/> \n *\n * <en/> Find the most likely connected port on the node\n * @remarks\n * 1. If `portKey` is specified, return the port.\n * 2. If `portKey` is not specified, return the port closest to the opposite connection points.\n * 3. If the node has no ports, return undefined.\n * @param node - <zh/>  | <en/> Node\n * @param oppositeNode - <zh/>  | <en/> Opposite Node\n * @param portKey - <zh/> key | <en/> Port Key\n * @param oppositePortKey - <zh/>  key | <en/> Opposite Port Key\n * @returns <zh/>  | <en/> Port\n */\nexport function findPort(node: Node, oppositeNode: Node, portKey?: string, oppositePortKey?: string): Port | undefined {\n  const portsMap = getAllPorts(node);\n  if (portKey) return portsMap[portKey];\n\n  const ports = Object.values(portsMap);\n  if (ports.length === 0) return undefined;\n\n  const positions = ports.map((port) => getPortPosition(port));\n  const oppositePositions = findConnectionPoints(oppositeNode, oppositePortKey);\n  const [nearestPosition] = findNearestPoints(positions, oppositePositions);\n  return ports.find((port) => getPortPosition(port) === nearestPosition);\n}\n\n/**\n * <zh/> \n *\n * <en/> Find all possible connection points on the node\n * @remarks\n * 1. If `portKey` is specified, return the position of the port.\n * 2. If `portKey` is not specified, return positions of all ports.\n * 3. If the node has no ports, return the center of the node.\n * @param node - <zh/>  | <en/> Node\n * @param portKey - <zh/> key | <en/> Port Key, return all if not specified\n * @returns <zh/>  | <en/> Connection Point\n */\nfunction findConnectionPoints(node: Node, portKey?: string): Point[] {\n  const allPortsMap = getAllPorts(node);\n  if (portKey) return [getPortPosition(allPortsMap[portKey])];\n  const oppositePorts = Object.values(allPortsMap);\n  return oppositePorts.length > 0 ? oppositePorts.map((port) => getPortPosition(port)) : [node.getCenter()];\n}\n\n/**\n * <zh/> , \n *\n * <en/> Get the connection point\n * @param node - <zh/>  | <en/> Node or Port\n * @param opposite - <zh/>  | <en/> Opposite Point or Node\n * @returns <zh/>  | <en/> Connection Point\n */\nexport function getConnectionPoint(node: Port | Node | Combo, opposite: Node | Port): Point {\n  return isCombo(node) || isNode(node)\n    ? getNodeConnectionPoint(node, opposite)\n    : getPortConnectionPoint(node, opposite);\n}\n\n/**\n * <zh/> \n *\n * <en/> Get the connection point of the port\n * @param port - <zh/>  | <en/> Port\n * @param opposite - <zh/>  | <en/> Opposite Point or Node\n * // @param oppositePort - <zh/>  | <en/> Opposite Port\n * @returns <zh/>  | <en/> Port Point\n */\nexport function getPortConnectionPoint(port: Port, opposite: Node | Port): Point {\n  if (!port || !opposite) return [0, 0, 0];\n  if (isPoint(port)) return port;\n\n  // 1. linkToCenter  true | If linkToCenter is true, return the center of the port\n  if (port.attributes.linkToCenter) return port.getPosition() as Point;\n\n  // 2. \n  // 2. Get a specific opposite point: if it is a port or a node, return its center; if it is a specific point, return directly\n  const oppositePosition = isPoint(opposite)\n    ? opposite\n    : isNode(opposite)\n      ? opposite.getCenter()\n      : opposite.getPosition();\n\n  // 3.  | Return the intersection point on the port boundary\n  return getEllipseIntersectPoint(oppositePosition as Point, port.getBounds());\n}\n\n/**\n * <zh/> \n *\n * <en/> Get the Node Connection Point\n * @param nodeLike - <zh/>  | <en/> Node or Combo\n * @param opposite - <zh/>  | <en/> Opposite Point or Node\n * // @param oppositePort - <zh/>  | <en/> Opposite Port\n * @returns <zh/>  | <en/> Node Point\n */\nexport function getNodeConnectionPoint(nodeLike: Node | Combo, opposite: Node | Port): Point {\n  if (!nodeLike || !opposite) return [0, 0, 0];\n  const oppositePosition = isPoint(opposite)\n    ? opposite\n    : isNode(opposite)\n      ? opposite.getCenter()\n      : (opposite.getPosition() as Point);\n  return nodeLike.getIntersectPoint(oppositePosition) || nodeLike.getCenter();\n}\n\n/**\n * Get the Text style by `position`.\n * @param bbox - BBox of element.\n * @param placement - The position relative with element.\n * @param offsetX - The offset x.\n * @param offsetY - The offset y.\n * @param isReverseBaseline - Whether reverse the baseline.\n * @returns Partial<TextStyleProps>\n */\nexport function getTextStyleByPlacement(\n  bbox: AABB,\n  placement: NodeLabelStyleProps['placement'] = 'bottom',\n  offsetX: number = 0,\n  offsetY: number = 0,\n  isReverseBaseline = false,\n): Partial<TextStyleProps> {\n  const direction = placement.split('-');\n  const [x, y] = getXYByPlacement(bbox, placement);\n\n  const [top, bottom]: TextStyleProps['textBaseline'][] = isReverseBaseline ? ['bottom', 'top'] : ['top', 'bottom'];\n\n  const textBaseline: TextStyleProps['textBaseline'] = direction.includes('top')\n    ? bottom\n    : direction.includes('bottom')\n      ? top\n      : 'middle';\n\n  const textAlign: TextStyleProps['textAlign'] = direction.includes('left')\n    ? 'right'\n    : direction.includes('right')\n      ? 'left'\n      : 'center';\n\n  return {\n    transform: [['translate', x + offsetX, y + offsetY]],\n    textBaseline,\n    textAlign,\n  };\n}\n\n/**\n * <zh/> \n *\n * <en/> Get Star Points\n * @param outerR - <zh/>  | <en/> outer radius\n * @param innerR - <zh/>  | <en/> inner radius\n * @returns <zh/>  | <en/> Star Points\n */\nexport function getStarPoints(outerR: number, innerR: number): Point[] {\n  return [\n    [0, -outerR],\n    [innerR * Math.cos((3 * Math.PI) / 10), -innerR * Math.sin((3 * Math.PI) / 10)],\n    [outerR * Math.cos(Math.PI / 10), -outerR * Math.sin(Math.PI / 10)],\n    [innerR * Math.cos(Math.PI / 10), innerR * Math.sin(Math.PI / 10)],\n    [outerR * Math.cos((3 * Math.PI) / 10), outerR * Math.sin((3 * Math.PI) / 10)],\n    [0, innerR],\n    [-outerR * Math.cos((3 * Math.PI) / 10), outerR * Math.sin((3 * Math.PI) / 10)],\n    [-innerR * Math.cos(Math.PI / 10), innerR * Math.sin(Math.PI / 10)],\n    [-outerR * Math.cos(Math.PI / 10), -outerR * Math.sin(Math.PI / 10)],\n    [-innerR * Math.cos((3 * Math.PI) / 10), -innerR * Math.sin((3 * Math.PI) / 10)],\n  ];\n}\n\n/**\n * Get Star Port Point.\n * @param outerR - outer radius\n * @param innerR - inner radius\n * @returns Port points for Star.\n */\nexport function getStarPorts(outerR: number, innerR: number): Record<string, Point> {\n  const r: Record<string, Point> = {};\n\n  r['top'] = [0, -outerR];\n\n  r['left'] = [-outerR * Math.cos(Math.PI / 10), -outerR * Math.sin(Math.PI / 10)];\n\n  r['left-bottom'] = [-outerR * Math.cos((3 * Math.PI) / 10), outerR * Math.sin((3 * Math.PI) / 10)];\n\n  r['bottom'] = [0, innerR];\n\n  r['right-bottom'] = [outerR * Math.cos((3 * Math.PI) / 10), outerR * Math.sin((3 * Math.PI) / 10)];\n\n  r['right'] = r['default'] = [outerR * Math.cos(Math.PI / 10), -outerR * Math.sin(Math.PI / 10)];\n\n  return r;\n}\n\n/**\n * <zh/> \n *\n * <en/> Get the points of a triangle\n * @param width - <zh/>  | <en/> width\n * @param height - <zh/>  | <en/> height\n * @param direction - <zh/>  | <en/> The direction of the triangle\n * @returns <zh/>  | <en/> The points of a rectangle\n */\nexport function getTrianglePoints(width: number, height: number, direction: TriangleDirection): Point[] {\n  const halfHeight = height / 2;\n  const halfWidth = width / 2;\n  const MAP: Record<TriangleDirection, Point[]> = {\n    up: [\n      [-halfWidth, halfHeight],\n      [halfWidth, halfHeight],\n      [0, -halfHeight],\n    ],\n    left: [\n      [-halfWidth, 0],\n      [halfWidth, halfHeight],\n      [halfWidth, -halfHeight],\n    ],\n    right: [\n      [-halfWidth, halfHeight],\n      [-halfWidth, -halfHeight],\n      [halfWidth, 0],\n    ],\n    down: [\n      [-halfWidth, -halfHeight],\n      [halfWidth, -halfHeight],\n      [0, halfHeight],\n    ],\n  };\n  return MAP[direction] || MAP['up'];\n}\n\n/**\n * <zh/> \n *\n * <en/> Get the Ports of Triangle.\n * @param width - <zh/>  | <en/> width\n * @param height - <zh/>  | <en/> height\n * @param direction - <zh/>  | <en/> The direction of the triangle\n * @returns <zh/>  | <en/> The Ports of Triangle\n */\nexport function getTrianglePorts(width: number, height: number, direction: TriangleDirection): Record<string, Point> {\n  const halfHeight = height / 2;\n  const halfWidth = width / 2;\n  const ports: Record<string, Point> = {};\n  if (direction === 'down') {\n    ports['bottom'] = ports['default'] = [0, halfHeight];\n    ports['right'] = [halfWidth, -halfHeight];\n    ports['left'] = [-halfWidth, -halfHeight];\n  } else if (direction === 'left') {\n    ports['top'] = [halfWidth, -halfHeight];\n    ports['bottom'] = [halfWidth, halfHeight];\n    ports['left'] = ports['default'] = [-halfWidth, 0];\n  } else if (direction === 'right') {\n    ports['top'] = [-halfWidth, -halfHeight];\n    ports['bottom'] = [-halfWidth, halfHeight];\n    ports['right'] = ports['default'] = [halfWidth, 0];\n  } else {\n    //up\n    ports['left'] = [-halfWidth, halfHeight];\n    ports['top'] = ports['default'] = [0, -halfHeight];\n    ports['right'] = [halfWidth, halfHeight];\n  }\n  return ports;\n}\n\n/**\n * <zh/> \n *\n * <en/> Get the points of a rectangle\n * @param width - <zh/>  | <en/> width\n * @param height - <zh/>  | <en/> height\n * @returns <zh/>  | <en/> The points of a rectangle\n */\nexport function getBoundingPoints(width: number, height: number): Point[] {\n  return [\n    [width / 2, -height / 2],\n    [width / 2, height / 2],\n    [-width / 2, height / 2],\n    [-width / 2, -height / 2],\n  ];\n}\n\n/**\n * Get Diamond PathArray.\n * @param width - diamond width\n * @param height - diamond height\n * @returns The PathArray for G\n */\nexport function getDiamondPoints(width: number, height: number): Point[] {\n  return [\n    [0, -height / 2],\n    [width / 2, 0],\n    [0, height / 2],\n    [-width / 2, 0],\n  ];\n}\n/**\n * <zh/> \n *\n * <en/> Whether the element is visible\n * @param element - <zh/>  | <en/> element\n * @returns <zh/>  | <en/> whether the element is visible\n */\nexport function isVisible(element: DisplayObject) {\n  return get(element, ['style', 'visibility']) !== 'hidden';\n}\n\n/**\n * <zh/> \n *\n * <en/> Set element attributes (optimize performance)\n * @param element - <zh/>  | <en/> element\n * @param style - <zh/>  | <en/> style\n */\nexport function setAttributes(element: BaseShape<any>, style: Partial<BaseShapeStyleProps> & Record<string, any>) {\n  const { zIndex, transform, transformOrigin, visibility, cursor, clipPath, component, ...rest } = style;\n  Object.assign(element.attributes, rest);\n\n  if (transform) element.setAttribute('transform', transform);\n  if (isNumber(zIndex)) element.setAttribute('zIndex', zIndex);\n  if (transformOrigin) element.setAttribute('transformOrigin', transformOrigin);\n  if (visibility) element.setAttribute('visibility', visibility);\n  if (cursor) element.setAttribute('cursor', cursor);\n  if (clipPath) element.setAttribute('clipPath', clipPath);\n  if (component) element.setAttribute('component', component);\n}\n\n/**\n * <zh/> \n *\n * <en/> Update shape style\n * @param shape - <zh/>  | <en/> shape\n * @param style - <zh/>  | <en/> style\n */\nexport function updateStyle<T extends DisplayObject>(shape: T, style: Record<string, unknown>) {\n  if ('update' in shape) (shape.update as (style: Record<string, unknown>) => void)(style);\n  else shape.attr(style);\n}\n\n/**\n * Get Hexagon PathArray\n * @param outerR - <zh/>  | <en/> the  radius of circumscribed circle\n *  @returns The PathArray for G\n */\nexport function getHexagonPoints(outerR: number): Point[] {\n  return [\n    [0, outerR],\n    [(outerR * Math.sqrt(3)) / 2, outerR / 2],\n    [(outerR * Math.sqrt(3)) / 2, -outerR / 2],\n    [0, -outerR],\n    [(-outerR * Math.sqrt(3)) / 2, -outerR / 2],\n    [(-outerR * Math.sqrt(3)) / 2, outerR / 2],\n  ];\n}\n\n/**\n * <zh/>  element controller \n *\n * <en/> Mark the element as to be destroyed, used to identify the element to be destroyed in the element controller\n * @param element - <zh/>  | <en/> element\n */\nexport function markToBeDestroyed(element: DisplayObject) {\n  set(element, '__to_be_destroyed__', true);\n}\n\n/**\n * <zh/> \n *\n * <en/> Determine whether the element is to be destroyed\n * @param element - <zh/>  | <en/> element\n * @returns <zh/>  | <en/> whether the element is to be destroyed\n */\nexport function isToBeDestroyed(element: DisplayObject | unknown) {\n  return get(element, '__to_be_destroyed__', false);\n}\n", "import { isFunction } from '@antv/util';\nimport { CommonEvent } from '../constants';\nimport type { RuntimeContext } from '../runtime/types';\nimport type { ID, IPointerEvent, NodeLikeData } from '../types';\nimport { isCollapsed } from '../utils/collapsibility';\nimport { isElement } from '../utils/element';\nimport type { BaseBehaviorOptions } from './base-behavior';\nimport { BaseBehavior } from './base-behavior';\n\n/**\n * <zh/> /\n *\n * <en/> Collapse/Expand combo behavior options\n */\nexport interface CollapseExpandOptions extends BaseBehaviorOptions {\n  /**\n   * <zh/> \n   *\n   * <en/> Whether to enable animation\n   * @defaultValue true\n   */\n  animation?: boolean;\n  /**\n   * <zh/> /\n   *\n   * <en/> Whether to enable the expand/collapse function\n   * @defaultValue true\n   */\n  enable?: boolean | ((event: IPointerEvent) => boolean);\n  /**\n   * <zh/> \n   *\n   * <en/> Trigger method\n   * @defaultValue 'dblclick'\n   */\n  trigger?: CommonEvent.CLICK | CommonEvent.DBLCLICK;\n  /**\n   * <zh/> \n   *\n   * <en/> Callback when collapse is completed\n   */\n  onCollapse?: (id: ID) => void;\n  /**\n   * <zh/> \n   *\n   * <en/> Callback when expand is completed\n   */\n  onExpand?: (id: ID) => void;\n  /**\n   * <zh/> \n   *\n   * <en/> Whether to focus on the target element to avoid view offset\n   */\n  align?: boolean;\n}\n\n/**\n * <zh/> /\n *\n * <en/> Collapse/Expand Element behavior\n * @remarks\n * <zh/> /\n *\n * <en/> Expand/collapse elements by operation.\n */\nexport class CollapseExpand extends BaseBehavior<CollapseExpandOptions> {\n  static defaultOptions: Partial<CollapseExpandOptions> = {\n    enable: true,\n    animation: true,\n    trigger: CommonEvent.DBLCLICK,\n    align: true,\n  };\n\n  constructor(context: RuntimeContext, options: CollapseExpandOptions) {\n    super(context, Object.assign({}, CollapseExpand.defaultOptions, options));\n\n    this.bindEvents();\n  }\n\n  public update(options: Partial<CollapseExpandOptions>) {\n    this.unbindEvents();\n    super.update(options);\n    this.bindEvents();\n  }\n\n  private bindEvents() {\n    const { graph } = this.context;\n    const { trigger } = this.options;\n    graph.on(`node:${trigger}`, this.onCollapseExpand);\n    graph.on(`combo:${trigger}`, this.onCollapseExpand);\n  }\n\n  private unbindEvents() {\n    const { graph } = this.context;\n    const { trigger } = this.options;\n    graph.off(`node:${trigger}`, this.onCollapseExpand);\n    graph.off(`combo:${trigger}`, this.onCollapseExpand);\n  }\n\n  private onCollapseExpand = async (event: IPointerEvent) => {\n    if (!this.validate(event)) return;\n    const { target } = event;\n    if (!isElement(target)) return;\n\n    const id = target.id;\n    const { model, graph } = this.context;\n    const data = model.getElementDataById(id) as NodeLikeData;\n    if (!data) return false;\n\n    const { onCollapse, onExpand, animation, align } = this.options;\n    if (isCollapsed(data)) {\n      await graph.expandElement(id, { animation, align });\n      onExpand?.(id);\n    } else {\n      await graph.collapseElement(id, { animation, align });\n      onCollapse?.(id);\n    }\n  };\n\n  private validate(event: IPointerEvent): boolean {\n    if (this.destroyed) return false;\n    const { enable } = this.options;\n    if (isFunction(enable)) return enable(event);\n    return !!enable;\n  }\n\n  public destroy(): void {\n    this.unbindEvents();\n    super.destroy();\n  }\n}\n", "import { get } from '@antv/util';\nimport type { ComboData, EdgeData, GraphData, NodeData } from '../spec';\nimport type { ElementDatum, ID } from '../types';\n\n/**\n * <zh/>  //Combo \n *\n * <en/> Merge the data of two nodes/edges/combos\n * @param original - <zh/>  | <en/> original data\n * @param modified - <zh/>  | <en/> data to be merged\n * @returns <zh/>  | <en/> merged data\n * @remarks\n * <zh/> datastyle \n *\n * <en/> Only the first level of data will be merged, the second level of data under data and style will be overwritten\n */\nexport function mergeElementsData<T extends NodeData | EdgeData | ComboData>(original: T, modified: Partial<T>): T {\n  const { data: originalData, style: originalStyle, ...originalAttrs } = original;\n  const { data: modifiedData, style: modifiedStyle, ...modifiedAttrs } = modified;\n\n  const result = {\n    ...originalAttrs,\n    ...modifiedAttrs,\n  };\n\n  if (originalData || modifiedData) {\n    Object.assign(result, { data: { ...originalData, ...modifiedData } });\n  }\n\n  if (originalStyle || modifiedStyle) {\n    Object.assign(result, { style: { ...originalStyle, ...modifiedStyle } });\n  }\n\n  return result as T;\n}\n\n/**\n * <zh/> \n *\n * <en/> Clone clement data\n * @param data - <zh/>  | <en/> data to be cloned\n * @returns <zh/>  | <en/> cloned data\n * @remarks\n * <zh/> datastyle\n *\n * <en/> Only clone to the second level (data, style)\n */\nexport function cloneElementData<T extends NodeData | EdgeData | ComboData>(data: T): T {\n  const { data: customData, style, ...restAttrs } = data;\n  const clonedData = restAttrs as T;\n  if (customData) clonedData.data = { ...customData };\n  if (style) clonedData.style = { ...style };\n  return clonedData;\n}\n\n/**\n * <zh/> \n *\n * <en/> Determine if the data is empty\n * @param data - <zh/>  | <en/> graph data\n * @returns <zh/>  | <en/> is empty\n */\nexport function isEmptyData(data: GraphData) {\n  return !get(data, ['nodes', 'length']) && !get(data, ['edges', 'length']) && !get(data, ['combos', 'length']);\n}\n\n/**\n * <zh/> \n *\n * <en/> Determine if two element data are equal\n * @param original - <zh/>  | <en/> original data\n * @param modified - <zh/>  | <en/> modified data\n * @returns <zh/>  | <en/> is equal\n * @remarks\n * <zh/>  isEqual\n *\n * <en/> Compared to isEqual, this method does not compare data at a lower level\n */\nexport function isElementDataEqual(original: Partial<ElementDatum> = {}, modified: Partial<ElementDatum> = {}) {\n  const {\n    states: originalStates = [],\n    data: originalData = {},\n    style: originalStyle = {},\n    children: originalChildren = [],\n    ...originalAttrs\n  } = original;\n  const {\n    states: modifiedStates = [],\n    data: modifiedData = {},\n    style: modifiedStyle = {},\n    children: modifiedChildren = [],\n    ...modifiedAttrs\n  } = modified;\n\n  const isArrayEqual = (arr1: unknown[], arr2: unknown[]) => {\n    if (arr1.length !== arr2.length) return false;\n    return arr1.every((item, index) => item === arr2[index]);\n  };\n  const isObjectEqual = (obj1: Record<string, unknown>, obj2: Record<string, unknown>) => {\n    const keys1 = Object.keys(obj1);\n    const keys2 = Object.keys(obj2);\n    if (keys1.length !== keys2.length) return false;\n    return keys1.every((key) => obj1[key] === obj2[key]);\n  };\n\n  if (!isObjectEqual(originalAttrs, modifiedAttrs)) return false;\n  if (!isArrayEqual(originalChildren as ID[], modifiedChildren as ID[])) return false;\n  if (!isArrayEqual(originalStates, modifiedStates)) return false;\n  if (!isObjectEqual(originalData, modifiedData)) return false;\n  if (!isObjectEqual(originalStyle, modifiedStyle)) return false;\n\n  return true;\n}\n\nexport const OVERRIDE_KEY = '__internal_override__';\n/**\n * <zh/> \n *\n * <en/> Determine whether the element data can be overridden\n * @param datum - <zh/>  | <en/> element data\n * @returns <zh/>  | <en/> is overridable\n */\nexport function isOverridable(datum: ElementDatum): boolean {\n  return datum[OVERRIDE_KEY] !== false;\n}\n", "import { isFunction, uniqueId } from '@antv/util';\nimport { CanvasEvent, ComboEvent, CommonEvent, EdgeEvent, NodeEvent } from '../constants';\nimport type { RuntimeContext } from '../runtime/types';\nimport type { EdgeData } from '../spec';\nimport type { EdgeStyle } from '../spec/element/edge';\nimport type { ID, IElementEvent, IPointerEvent, NodeLikeData } from '../types';\nimport { OVERRIDE_KEY } from '../utils/data';\nimport type { BaseBehaviorOptions } from './base-behavior';\nimport { BaseBehavior } from './base-behavior';\n\nconst ASSIST_EDGE_ID = 'g6-create-edge-assist-edge-id';\nconst ASSIST_NODE_ID = 'g6-create-edge-assist-node-id';\n\n/**\n * <zh/> \n *\n * <en/> Create edge behavior options\n */\nexport interface CreateEdgeOptions extends BaseBehaviorOptions {\n  /**\n   * <zh/> \n   *\n   * <en/> Whether to enable the function of creating edges\n   * @defaultValue true\n   */\n  enable?: boolean | ((event: IPointerEvent) => boolean);\n  /**\n   * <zh/> \n   *\n   * <en/> Style configs of the new edge\n   */\n  style?: EdgeStyle;\n  /**\n   * <zh/>    \n   *\n   * <en/> trigger click or drag.\n   * @defaultValue 'drag'\n   */\n  trigger?: 'click' | 'drag';\n  /**\n   * <zh/> \n   *\n   * <en/> Callback when create is completed.\n   */\n  onFinish?: (edge: EdgeData) => void;\n  /**\n   * <zh/>  undefined\n   *\n   * <en/> Callback when create edge, return EdgeData. If returns undefined, the edge will not be created.\n   */\n  onCreate?: (edge: EdgeData) => EdgeData | undefined;\n}\n\n/**\n * <zh/> \n *\n * <en/> Create edge behavior\n * @remarks\n * <zh/> \n *\n * <en/> Create edges by dragging or clicking nodes, and support custom edge styles.\n */\nexport class CreateEdge extends BaseBehavior<CreateEdgeOptions> {\n  static defaultOptions: Partial<CreateEdgeOptions> = {\n    animation: true,\n    enable: true,\n    style: {},\n    trigger: 'drag',\n    onCreate: (data) => data,\n    onFinish: () => {},\n  };\n\n  public source?: ID;\n\n  constructor(context: RuntimeContext, options: CreateEdgeOptions) {\n    super(context, Object.assign({}, CreateEdge.defaultOptions, options));\n    this.bindEvents();\n  }\n\n  /**\n   * Update options\n   * @param options - The options to update\n   * @internal\n   */\n  public update(options: Partial<CreateEdgeOptions>): void {\n    super.update(options);\n    this.bindEvents();\n  }\n\n  private bindEvents() {\n    const { graph } = this.context;\n    const { trigger } = this.options;\n    this.unbindEvents();\n\n    if (trigger === 'click') {\n      graph.on(NodeEvent.CLICK, this.handleCreateEdge);\n      graph.on(ComboEvent.CLICK, this.handleCreateEdge);\n      graph.on(CanvasEvent.CLICK, this.cancelEdge);\n      graph.on(EdgeEvent.CLICK, this.cancelEdge);\n    } else {\n      graph.on(NodeEvent.DRAG_START, this.handleCreateEdge);\n      graph.on(ComboEvent.DRAG_START, this.handleCreateEdge);\n      graph.on(CommonEvent.POINTER_UP, this.drop);\n    }\n\n    graph.on(CommonEvent.POINTER_MOVE, this.updateAssistEdge);\n  }\n\n  private drop = async (event: IElementEvent) => {\n    const { targetType } = event;\n    if (['combo', 'node'].includes(targetType) && this.source) {\n      await this.handleCreateEdge(event);\n    } else {\n      await this.cancelEdge();\n    }\n  };\n\n  private handleCreateEdge = async (event: IElementEvent) => {\n    if (!this.validate(event)) return;\n    const { graph, canvas, batch, element } = this.context;\n    const { style } = this.options;\n\n    if (this.source) {\n      this.createEdge(event);\n      await this.cancelEdge();\n      return;\n    }\n\n    batch!.startBatch();\n    canvas.setCursor('crosshair');\n    this.source = this.getSelectedNodeIDs([event.target.id])[0];\n    const sourceNode = graph.getElementData(this.source) as NodeLikeData;\n\n    graph.addNodeData([\n      {\n        id: ASSIST_NODE_ID,\n        type: 'circle',\n        [OVERRIDE_KEY]: false,\n        style: {\n          size: 1,\n          visibility: 'hidden',\n          ports: [{ key: 'port-1', placement: [0.5, 0.5] }],\n          x: sourceNode.style?.x,\n          y: sourceNode.style?.y,\n        },\n      },\n    ]);\n\n    graph.addEdgeData([\n      {\n        id: ASSIST_EDGE_ID,\n        source: this.source,\n        target: ASSIST_NODE_ID,\n        style: {\n          pointerEvents: 'none',\n          ...style,\n        },\n      },\n    ]);\n    await element!.draw({ animation: false })?.finished;\n  };\n\n  private updateAssistEdge = async (event: IPointerEvent) => {\n    if (!this.source) return;\n    const { model, element } = this.context;\n    model.translateNodeTo(ASSIST_NODE_ID, [event.client.x, event.client.y]);\n    await element!.draw({ animation: false, silence: true })?.finished;\n  };\n\n  private createEdge = (event: IElementEvent) => {\n    const { graph } = this.context;\n    const { style, onFinish, onCreate } = this.options;\n    const targetId = event.target?.id;\n    if (targetId === undefined || this.source === undefined) return;\n\n    const target = this.getSelectedNodeIDs([event.target.id])?.[0];\n    const id = `${this.source}-${target}-${uniqueId()}`;\n\n    const edgeData = onCreate({ id, source: this.source, target, style });\n    if (edgeData) {\n      graph.addEdgeData([edgeData]);\n      onFinish(edgeData);\n    }\n  };\n\n  private cancelEdge = async () => {\n    if (!this.source) return;\n    const { graph, element, batch } = this.context;\n\n    graph.removeNodeData([ASSIST_NODE_ID]);\n\n    this.source = undefined;\n\n    await element!.draw({ animation: false })?.finished;\n    batch!.endBatch();\n  };\n\n  private getSelectedNodeIDs(currTarget: ID[]) {\n    return Array.from(\n      new Set(\n        this.context.graph\n          .getElementDataByState('node', this.options.state)\n          .map((node) => node.id)\n          .concat(currTarget),\n      ),\n    );\n  }\n\n  private validate(event: IPointerEvent) {\n    if (this.destroyed) return false;\n    const { enable } = this.options;\n    if (isFunction(enable)) return enable(event);\n    return !!enable;\n  }\n\n  private unbindEvents() {\n    const { graph } = this.context;\n\n    graph.off(NodeEvent.CLICK, this.handleCreateEdge);\n    graph.off(ComboEvent.CLICK, this.handleCreateEdge);\n    graph.off(CanvasEvent.CLICK, this.cancelEdge);\n    graph.off(EdgeEvent.CLICK, this.cancelEdge);\n    graph.off(NodeEvent.DRAG_START, this.handleCreateEdge);\n    graph.off(ComboEvent.DRAG_START, this.handleCreateEdge);\n    graph.off(CommonEvent.POINTER_UP, this.drop);\n    graph.off(CommonEvent.POINTER_MOVE, this.updateAssistEdge);\n  }\n\n  public destroy() {\n    this.unbindEvents();\n    super.destroy();\n  }\n}\n", "import type { Cursor } from '@antv/g';\nimport { debounce, isObject } from '@antv/util';\nimport { CommonEvent } from '../constants';\nimport type { RuntimeContext } from '../runtime/types';\nimport type { IDragEvent, IKeyboardEvent, IPointerEvent, Vector2, ViewportAnimationEffectTiming } from '../types';\nimport { getExpandedBBox, getPointBBox, isPointInBBox } from '../utils/bbox';\nimport { parsePadding } from '../utils/padding';\nimport { PinchHandler } from '../utils/pinch';\nimport type { ShortcutKey } from '../utils/shortcut';\nimport { Shortcut } from '../utils/shortcut';\nimport { multiply, rotate, subtract } from '../utils/vector';\nimport type { BaseBehaviorOptions } from './base-behavior';\nimport { BaseBehavior } from './base-behavior';\n\n/**\n * <zh/> \n *\n * <en/> Drag canvas behavior options\n */\nexport interface DragCanvasOptions extends BaseBehaviorOptions {\n  /**\n   * <zh/> \n   *\n   * <en/> Whether to enable the animation of dragging, only valid when using key movement\n   */\n  animation?: ViewportAnimationEffectTiming;\n  /**\n   * <zh/> \n   *\n   * <en/> Whether to enable the function of dragging the canvas\n   * @defaultValue true\n   */\n  enable?: boolean | ((event: IPointerEvent | IKeyboardEvent) => boolean);\n  /**\n   * <zh/> \n   * - `'x'`: \n   * - `'y'`: \n   * - `'both'`: \n   *\n   * <en/> Allowed drag direction\n   * - `'x'`: Only allow horizontal drag\n   * - `'y'`: Only allow vertical drag\n   * - `'both'`: Allow horizontal and vertical drag\n   * @defaultValue `'both'`\n   */\n  direction?: 'x' | 'y' | 'both';\n  /**\n   * <zh/>  [0, Infinity] \n   *\n   * <en/> The draggable viewport range allows you to drag up to one screen by default. You can set the range for each direction (top, right, bottom, left) individually, with each direction's range between [0, Infinity]\n   * @defaultValue Infinity\n   */\n  range?: number | number[];\n  /**\n   * <zh/> \n   *\n   * <en/> The way to trigger dragging, default to dragging with the pointer pressed\n   */\n  trigger?: {\n    up: ShortcutKey;\n    down: ShortcutKey;\n    left: ShortcutKey;\n    right: ShortcutKey;\n  };\n  /**\n   * <zh/> \n   *\n   * <en/> The distance of a single key movement\n   * @defaultValue 10\n   */\n  sensitivity?: number;\n  /**\n   * <zh/> \n   *\n   * <en/> Callback when dragging is completed\n   */\n  onFinish?: () => void;\n}\n\n/**\n * <zh/> \n *\n * <en/> Drag canvas behavior\n */\nexport class DragCanvas extends BaseBehavior<DragCanvasOptions> {\n  static defaultOptions: Partial<DragCanvasOptions> = {\n    enable: (event) => {\n      if ('targetType' in event) return event.targetType === 'canvas';\n      return true;\n    },\n    sensitivity: 10,\n    direction: 'both',\n    range: Infinity,\n  };\n\n  private shortcut: Shortcut;\n\n  private defaultCursor: Cursor;\n\n  constructor(context: RuntimeContext, options: DragCanvasOptions) {\n    super(context, Object.assign({}, DragCanvas.defaultOptions, options));\n\n    this.shortcut = new Shortcut(context.graph);\n\n    this.bindEvents();\n    this.defaultCursor = this.context.canvas.getConfig().cursor || 'default';\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Update options\n   * @param options - <zh/>  | <en/> Options\n   * @internal\n   */\n  public update(options: Partial<DragCanvasOptions>): void {\n    this.unbindEvents();\n    super.update(options);\n    this.bindEvents();\n  }\n\n  private bindEvents() {\n    const { trigger } = this.options;\n\n    if (isObject(trigger)) {\n      const { up = [], down = [], left = [], right = [] } = trigger;\n      this.shortcut.bind(up, (event) => this.onTranslate([0, 1], event));\n      this.shortcut.bind(down, (event) => this.onTranslate([0, -1], event));\n      this.shortcut.bind(left, (event) => this.onTranslate([1, 0], event));\n      this.shortcut.bind(right, (event) => this.onTranslate([-1, 0], event));\n    } else {\n      const { graph } = this.context;\n      graph.on(CommonEvent.DRAG_START, this.onDragStart);\n      graph.on(CommonEvent.DRAG, this.onDrag);\n      graph.on(CommonEvent.DRAG_END, this.onDragEnd);\n    }\n  }\n\n  private isDragging = false;\n\n  private onDragStart = (event: IDragEvent) => {\n    if (!this.validate(event)) return;\n    this.isDragging = true;\n    this.context.canvas.setCursor('grabbing');\n  };\n\n  private onDrag = (event: IDragEvent) => {\n    if (!this.isDragging || PinchHandler.isPinching) return;\n    const x = event.movement?.x ?? event.dx;\n    const y = event.movement?.y ?? event.dy;\n    if ((x | y) !== 0) {\n      this.translate([x, y], false);\n    }\n  };\n\n  private onDragEnd = () => {\n    this.isDragging = false;\n    this.context.canvas.setCursor(this.defaultCursor);\n    this.options.onFinish?.();\n  };\n\n  private invokeOnFinish = debounce(() => {\n    this.options.onFinish?.();\n  }, 300);\n\n  private async onTranslate(value: Vector2, event: IPointerEvent | IKeyboardEvent) {\n    if (!this.validate(event)) return;\n    const { sensitivity } = this.options;\n    const delta = sensitivity * -1;\n    await this.translate(multiply(value, delta) as Vector2, this.options.animation);\n\n    this.invokeOnFinish();\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Translate canvas\n   * @param offset - <zh/>  | <en/> Translation distance\n   * @param animation - <zh/>  | <en/> Animation configuration\n   * @internal\n   */\n  protected async translate(offset: Vector2, animation?: ViewportAnimationEffectTiming) {\n    offset = this.clampByDirection(offset);\n    offset = this.clampByRange(offset);\n    offset = this.clampByRotation(offset);\n\n    await this.context.graph.translateBy(offset, animation);\n  }\n\n  private clampByRotation([dx, dy]: Vector2): Vector2 {\n    const rotation = this.context.graph.getRotation();\n    return rotate([dx, dy], rotation);\n  }\n\n  private clampByDirection([dx, dy]: Vector2): Vector2 {\n    const { direction } = this.options;\n    if (direction === 'x') {\n      dy = 0;\n    } else if (direction === 'y') {\n      dx = 0;\n    }\n    return [dx, dy];\n  }\n\n  private clampByRange([dx, dy]: Vector2): Vector2 {\n    const { viewport, canvas } = this.context;\n\n    const [canvasWidth, canvasHeight] = canvas.getSize();\n    const [top, right, bottom, left] = parsePadding(this.options.range);\n    const range = [canvasHeight * top, canvasWidth * right, canvasHeight * bottom, canvasWidth * left];\n    const draggableArea = getExpandedBBox(getPointBBox(viewport!.getCanvasCenter()), range);\n\n    const nextViewportCenter = subtract(viewport!.getViewportCenter(), [dx, dy, 0]);\n    if (!isPointInBBox(nextViewportCenter, draggableArea)) {\n      const {\n        min: [minX, minY],\n        max: [maxX, maxY],\n      } = draggableArea;\n\n      if ((nextViewportCenter[0] < minX && dx > 0) || (nextViewportCenter[0] > maxX && dx < 0)) {\n        dx = 0;\n      }\n      if ((nextViewportCenter[1] < minY && dy > 0) || (nextViewportCenter[1] > maxY && dy < 0)) {\n        dy = 0;\n      }\n    }\n    return [dx, dy];\n  }\n\n  private validate(event: IPointerEvent | IKeyboardEvent) {\n    if (this.destroyed) return false;\n    const { enable } = this.options;\n    if (typeof enable === 'function') return enable(event);\n    return !!enable;\n  }\n\n  private unbindEvents() {\n    this.shortcut.unbindAll();\n    const { graph } = this.context;\n    graph.off(CommonEvent.DRAG_START, this.onDragStart);\n    graph.off(CommonEvent.DRAG, this.onDrag);\n    graph.off(CommonEvent.DRAG_END, this.onDragEnd);\n  }\n\n  public destroy(): void {\n    this.shortcut.destroy();\n    this.unbindEvents();\n    this.context.canvas.setCursor(this.defaultCursor);\n    super.destroy();\n  }\n}\n", "import type { BaseStyleProps, Cursor } from '@antv/g';\nimport { Rect } from '@antv/g';\nimport { isFunction } from '@antv/util';\nimport { COMBO_KEY, CanvasEvent, ComboEvent, CommonEvent } from '../constants';\nimport type { RuntimeContext } from '../runtime/types';\nimport type { EdgeDirection, ID, IElementDragEvent, IPointerEvent, Point, Prefix, State, Vector2 } from '../types';\nimport { getBBoxSize, getCombinedBBox } from '../utils/bbox';\nimport { isToBeDestroyed } from '../utils/element';\nimport { idOf } from '../utils/id';\nimport { subStyleProps } from '../utils/prefix';\nimport { Shortcut, ShortcutKey } from '../utils/shortcut';\nimport { divide, rotate, subtract } from '../utils/vector';\nimport type { BaseBehaviorOptions } from './base-behavior';\nimport { BaseBehavior } from './base-behavior';\n\n/**\n * <zh/> \n *\n * <en/> Drag element behavior options\n */\nexport interface DragElementOptions extends BaseBehaviorOptions, Prefix<'shadow', BaseStyleProps> {\n  /**\n   * <zh/> \n   *\n   * <en/> Whether to enable drag animation\n   * @defaultValue true\n   */\n  animation?: boolean;\n  /**\n   * <zh/>  node  combo\n   *\n   * <en/> Whether to enable the function of dragging the nodedefault can drag node and combo\n   * @defaultValue ['node', 'combo'].includes(event.targetType)\n   */\n  enable?: boolean | ((event: IElementDragEvent) => boolean);\n  /**\n   * <zh/> \n   * \n   *\n   * <en/> The way to trigger drag element\n   * Support triggering by pressing a combination of keys\n   */\n  trigger?: ShortcutKey;\n  /**\n   * <zh/> \n   * - `'link'`: \n   * - `'move'`: \n   * - `'none'`: \n   *\n   * <en/> Drag operation effect\n   * - `'link'`: Place the drag element as a child element of the target element\n   * - `'move'`: Move the element and update the parent element size\n   * - `'none'`: Only update the drag target position, no additional operations\n   * @remarks\n   * <zh/> combo  node  combo \n   *\n   * <en/> The combo element can be placed as an element container into the node or combo element\n   * @defaultValue 'move'\n   */\n  dropEffect?: 'link' | 'move' | 'none';\n  /**\n   * <zh/> \n   *\n   * <en/> The state name of the selected node, when multi-selection is enabled, the selected nodes will be found based on this state\n   * @defaultValue 'selected'\n   */\n  state?: State;\n  /**\n   * <zh/> \n   * - `'none'`: \n   * - `'out'`: \n   * - `'in'`: \n   * - `'both'`: \n   * - `'all'`: \n   *\n   * <en/> Edges hidden during dragging\n   * - `'none'`: do not hide\n   * - `'out'`: hide the edges with the node as the source node\n   * - `'in'`: hide the edges with the node as the target node\n   * - `'both'`: hide all edges related to the node\n   * - `'all'`: hide all edges in the graph\n   * @remarks\n   * <zh/> \n   *\n   * <en/> Edges will not be hidden when using the drag shadow\n   * @defaultValue 'none'\n   */\n  hideEdge?: 'none' | 'all' | EdgeDirection;\n  /**\n   * <zh/> \n   *\n   * <en/> Whether to enable the drag shadow, that is, use a shape to replace the node to follow the mouse movement\n   */\n  shadow?: boolean;\n  /**\n   * <zh/> \n   *\n   * <en/> Callback when dragging is completed\n   */\n  onFinish?: (ids: ID[]) => void;\n  /**\n   * <zh/> \n   *\n   * <en/> Cursor style\n   */\n  cursor?: {\n    /**\n     * <zh/> \n     *\n     * <en/> Default cursor style\n     */\n    default?: Cursor;\n    /**\n     * <zh/> \n     *\n     * <en/> Cursor style that can be grabbed\n     */\n    grab: Cursor;\n    /**\n     * <zh/> \n     *\n     * <en/> Cursor style when grabbing\n     */\n    grabbing: Cursor;\n  };\n}\n\n/**\n * <zh/> \n *\n * <en/> Drag element behavior\n */\nexport class DragElement extends BaseBehavior<DragElementOptions> {\n  static defaultOptions: Partial<DragElementOptions> = {\n    animation: true,\n    enable: (event) => ['node', 'combo'].includes(event.targetType),\n    trigger: [],\n    dropEffect: 'move',\n    state: 'selected',\n    hideEdge: 'none',\n    shadow: false,\n    shadowZIndex: 100,\n    shadowFill: '#F3F9FF',\n    shadowFillOpacity: 0.5,\n    shadowStroke: '#1890FF',\n    shadowStrokeOpacity: 0.9,\n    shadowLineDash: [5, 5],\n    cursor: {\n      default: 'default',\n      grab: 'grab',\n      grabbing: 'grabbing',\n    },\n  };\n\n  protected enable: boolean = false;\n\n  private enableElements = ['node', 'combo'];\n\n  protected target: ID[] = [];\n\n  private shadow?: Rect;\n\n  private shadowOrigin: Point = [0, 0];\n\n  private hiddenEdges: ID[] = [];\n\n  private isDragging: boolean = false;\n\n  private shortcut: Shortcut;\n\n  constructor(context: RuntimeContext, options: DragElementOptions) {\n    super(context, Object.assign({}, DragElement.defaultOptions, options));\n    this.shortcut = new Shortcut(context.graph);\n\n    this.onDragStart = this.onDragStart.bind(this);\n    this.onDrag = this.onDrag.bind(this);\n    this.onDragEnd = this.onDragEnd.bind(this);\n    this.onDrop = this.onDrop.bind(this);\n\n    this.bindEvents();\n  }\n  /**\n   * <zh/> \n   *\n   * <en/> Update the element dragging configuration\n   * @param options - <zh/>  | <en/> options\n   * @internal\n   */\n  public update(options: Partial<DragElementOptions>): void {\n    this.unbindEvents();\n    super.update(options);\n    this.bindEvents();\n  }\n\n  private bindEvents() {\n    const { graph, canvas } = this.context;\n\n    // @ts-expect-error internal property\n    const $canvas: HTMLCanvasElement = canvas.getLayer().getContextService().$canvas;\n    if ($canvas) {\n      $canvas.addEventListener('blur', this.onDragEnd);\n      $canvas.addEventListener('contextmenu', this.onDragEnd);\n    }\n\n    this.enableElements.forEach((type) => {\n      graph.on(`${type}:${CommonEvent.DRAG_START}`, this.onDragStart);\n      graph.on(`${type}:${CommonEvent.DRAG}`, this.onDrag);\n      graph.on(`${type}:${CommonEvent.DRAG_END}`, this.onDragEnd);\n      graph.on(`${type}:${CommonEvent.POINTER_ENTER}`, this.setCursor);\n      graph.on(`${type}:${CommonEvent.POINTER_LEAVE}`, this.setCursor);\n    });\n\n    if (['link'].includes(this.options.dropEffect)) {\n      graph.on(ComboEvent.DROP, this.onDrop);\n      graph.on(CanvasEvent.DROP, this.onDrop);\n    }\n  }\n\n  /**\n   * <zh/>  id \n   *\n   * <en/> Get the id collection of the currently selected node\n   * @param currTarget - <zh/>  id  | <en/> The id collection of the current drag target element\n   * @returns <zh/>  id  | <en/> The id collection of the currently selected node\n   * @internal\n   */\n  protected getSelectedNodeIDs(currTarget: ID[]) {\n    return Array.from(\n      new Set(\n        this.context.graph\n          .getElementDataByState('node', this.options.state)\n          .map((node) => node.id)\n          .concat(currTarget),\n      ),\n    );\n  }\n\n  /**\n   * Get the delta of the drag\n   * @param event - drag event object\n   * @returns delta\n   * @internal\n   */\n  protected getDelta(event: IElementDragEvent) {\n    const zoom = this.context.graph.getZoom();\n    return divide([event.dx, event.dy], zoom);\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Callback when dragging starts\n   * @param event - <zh/>  | <en/> drag event object\n   * @internal\n   */\n  protected onDragStart(event: IElementDragEvent) {\n    this.enable = this.validate(event);\n    if (!this.enable) return;\n\n    const { batch, canvas, graph } = this.context;\n    canvas.setCursor(this.options!.cursor?.grabbing || 'grabbing');\n    this.isDragging = true;\n    batch!.startBatch();\n\n    // \n    // If the current node is selected, query all selected nodes in the canvas, otherwise only drag the current node\n    const id = event.target.id;\n    const states = graph.getElementState(id);\n    if (states.includes(this.options.state)) this.target = this.getSelectedNodeIDs([id]);\n    else this.target = [id];\n\n    this.hideEdge();\n    this.context.graph.frontElement(this.target);\n    if (this.options.shadow) this.createShadow(this.target);\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Callback when dragging\n   * @param event - <zh/>  | <en/> drag event object\n   * @internal\n   */\n  protected onDrag(event: IElementDragEvent) {\n    if (!this.enable) return;\n    const delta = this.getDelta(event);\n\n    if (this.options.shadow) this.moveShadow(delta);\n    else this.moveElement(this.target, delta);\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Callback when dragging ends\n   * @internal\n   */\n  protected onDragEnd() {\n    if (!this.enable) return; // It can be called multiple times\n    this.enable = false;\n    if (this.options.shadow) {\n      if (!this.shadow) return;\n      this.shadow.style.visibility = 'hidden';\n      const { x = 0, y = 0 } = this.shadow.attributes;\n      const [dx, dy] = subtract([+x, +y], this.shadowOrigin);\n      this.moveElement(this.target, [dx, dy]);\n    }\n    this.showEdges();\n    this.options.onFinish?.(this.target);\n    const { batch, canvas } = this.context;\n    batch!.endBatch();\n    canvas.setCursor(this.options!.cursor?.grab || 'grab');\n    this.isDragging = false;\n    this.target = [];\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Callback when dragging is released\n   * @param event - <zh/>  | <en/> drag event object\n   */\n  private onDrop = async (event: IElementDragEvent) => {\n    if (this.options.dropEffect !== 'link') return;\n    const { model, element } = this.context;\n    const modifiedParentId = event.target.id;\n    this.target.forEach((id) => {\n      const originalParent = model.getParentData(id, COMBO_KEY);\n      //  combo  combo \n      // If it is a drag and drop within the original parent combo, you need to refresh the combo data\n      if (originalParent && idOf(originalParent) === modifiedParentId) {\n        model.refreshComboData(modifiedParentId);\n      }\n      model.setParent(id, modifiedParentId, COMBO_KEY);\n    });\n    await element?.draw({ animation: true })?.finished;\n  };\n\n  private setCursor = (event: IPointerEvent) => {\n    if (this.isDragging) return;\n    const { type } = event;\n    const { canvas } = this.context;\n    const { cursor } = this.options;\n\n    if (type === CommonEvent.POINTER_ENTER) canvas.setCursor(cursor?.grab || 'grab');\n    else canvas.setCursor(cursor?.default || 'default');\n  };\n\n  /**\n   * <zh/>  trigger \n   *\n   * <en/> Is the current key consistent with the trigger configuration\n   * @returns <zh/>  | <en/> Is consistent\n   * @internal\n   */\n  protected isKeydown(): boolean {\n    const { trigger } = this.options;\n    if (!trigger?.length) return true;\n    return this.shortcut.match(trigger);\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Verify if the element is allowed to be dragged\n   * @param event - <zh/>  | <en/> drag event object\n   * @returns <zh/>  | <en/> Whether to allow dragging\n   * @internal\n   */\n  protected validate(event: IElementDragEvent) {\n    if (\n      this.destroyed ||\n      isToBeDestroyed(event.target) ||\n      // @ts-expect-error private property\n      // combo/node\n      this.context.graph.isCollapsingExpanding ||\n      !this.isKeydown()\n    )\n      return false;\n    const { enable } = this.options;\n    if (isFunction(enable)) return enable(event);\n    return !!enable;\n  }\n\n  protected clampByRotation([dx, dy]: Point): Vector2 {\n    const rotation = this.context.graph.getRotation();\n    return rotate([dx, dy], rotation);\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Move the element\n   * @param ids - <zh/>  id  | <en/> element id collection\n   * @param offset <zh/>  | <en/> offset\n   * @internal\n   */\n  protected async moveElement(ids: ID[], offset: Point) {\n    const { graph, model } = this.context;\n    const { dropEffect } = this.options;\n\n    if (dropEffect === 'move') ids.forEach((id) => model.refreshComboData(id));\n    graph.translateElementBy(Object.fromEntries(ids.map((id) => [id, this.clampByRotation(offset)])), false);\n  }\n\n  private moveShadow(offset: Point) {\n    if (!this.shadow) return;\n    const { x = 0, y = 0 } = this.shadow.attributes;\n    const [dx, dy] = offset;\n    this.shadow.attr({ x: +x + dx, y: +y + dy });\n  }\n\n  private createShadow(target: ID[]) {\n    const shadowStyle = subStyleProps(this.options, 'shadow');\n\n    const bbox = getCombinedBBox(target.map((id) => this.context.element!.getElement(id)!.getBounds()));\n    const [x, y] = bbox.min;\n    this.shadowOrigin = [x, y];\n    const [width, height] = getBBoxSize(bbox);\n    const positionStyle = { width, height, x, y };\n\n    if (this.shadow) {\n      this.shadow.attr({\n        ...shadowStyle,\n        ...positionStyle,\n        visibility: 'visible',\n      });\n    } else {\n      this.shadow = new Rect({\n        style: {\n          // @ts-ignore $layer is not in the type definition\n          $layer: 'transient',\n          ...shadowStyle,\n          ...positionStyle,\n          pointerEvents: 'none',\n        },\n      });\n      this.context.canvas.appendChild(this.shadow);\n    }\n  }\n\n  private showEdges() {\n    if (this.options.shadow || this.hiddenEdges.length === 0) return;\n    this.context.graph.showElement(this.hiddenEdges);\n    this.hiddenEdges = [];\n  }\n\n  /**\n   * Hide the edge\n   * @internal\n   */\n  protected hideEdge() {\n    const { hideEdge, shadow } = this.options;\n    if (hideEdge === 'none' || shadow) return;\n    const { graph } = this.context;\n    if (hideEdge === 'all') this.hiddenEdges = graph.getEdgeData().map(idOf);\n    else {\n      this.hiddenEdges = Array.from(\n        new Set(this.target.map((id) => graph.getRelatedEdgesData(id, hideEdge).map(idOf)).flat()),\n      );\n    }\n    graph.hideElement(this.hiddenEdges);\n  }\n\n  private unbindEvents() {\n    const { graph, canvas } = this.context;\n\n    // @ts-expect-error internal property\n    const $canvas: HTMLCanvasElement = canvas.getLayer().getContextService().$canvas;\n    if ($canvas) {\n      $canvas.removeEventListener('blur', this.onDragEnd);\n      $canvas.removeEventListener('contextmenu', this.onDragEnd);\n    }\n\n    this.enableElements.forEach((type) => {\n      graph.off(`${type}:${CommonEvent.DRAG_START}`, this.onDragStart);\n      graph.off(`${type}:${CommonEvent.DRAG}`, this.onDrag);\n      graph.off(`${type}:${CommonEvent.DRAG_END}`, this.onDragEnd);\n      graph.off(`${type}:${CommonEvent.POINTER_ENTER}`, this.setCursor);\n      graph.off(`${type}:${CommonEvent.POINTER_LEAVE}`, this.setCursor);\n    });\n\n    graph.off(`combo:${CommonEvent.DROP}`, this.onDrop);\n    graph.off(`canvas:${CommonEvent.DROP}`, this.onDrop);\n  }\n\n  public destroy() {\n    this.unbindEvents();\n    this.shadow?.destroy();\n    super.destroy();\n  }\n}\n", "import { ID, Node, PlainObject } from '../types';\n\nexport function doBFS<N extends PlainObject>(\n  queue: Node<N>[],\n  visited: Set<ID>,\n  fn: (node: Node<N>) => boolean | void,\n  navigator: (id: ID) => Node<N>[],\n): boolean {\n  while (queue.length) {\n    const node = queue.shift()!;\n    const abort = fn(node);\n    if (abort) {\n      return true;\n    }\n    visited.add(node.id);\n    navigator(node.id).forEach((n) => {\n      if (!visited.has(n.id)) {\n        visited.add(n.id);\n        queue.push(n);\n      }\n    });\n  }\n  return false;\n}\n\nexport function doDFS<N extends PlainObject>(\n  node: Node<N>,\n  visited: Set<ID>,\n  fn: (node: Node<N>) => boolean | void,\n  navigator: (id: ID) => Node<N>[],\n): boolean {\n  const abort = fn(node);\n  if (abort) {\n    return true;\n  }\n\n  visited.add(node.id);\n  for (const n of navigator(node.id)) {\n    if (!visited.has(n.id)) {\n      if (doDFS(n, visited, fn, navigator)) {\n        return true;\n      }\n    }\n  }\n\n  return false;\n}\n", "import { Graph } from './graph';\nimport {\n  Edge,\n  GraphChangedEvent,\n  GraphViewOptions,\n  ID,\n  Node,\n  PlainObject,\n} from './types';\nimport { doBFS, doDFS } from './utils/traverse';\n\nconst defaultFilter = () => true;\n\nexport class GraphView<N extends PlainObject, E extends PlainObject> {\n  private graph: Graph<N, E>;\n  private nodeFilter: (node: Node<N>) => boolean;\n  private edgeFilter: (edge: Edge<E>) => boolean;\n\n  // caches\n  public cacheEnabled: boolean;\n  private inEdgesMap: Map<ID, Array<Edge<E>>> = new Map();\n  private outEdgesMap: Map<ID, Array<Edge<E>>> = new Map();\n  private bothEdgesMap: Map<ID, Array<Edge<E>>> = new Map();\n  private allNodesMap: Map<ID, Node<N>> = new Map();\n  private allEdgesMap: Map<ID, Edge<E>> = new Map();\n\n  constructor(options: GraphViewOptions<N, E>) {\n    this.graph = options.graph;\n    const nodeFilter = options.nodeFilter || defaultFilter;\n    const edgeFilter = options.edgeFilter || defaultFilter;\n\n    this.nodeFilter = nodeFilter;\n    this.edgeFilter = (edge) => {\n      const { source, target } = this.graph.getEdgeDetail(edge.id);\n      if (!nodeFilter(source) || !nodeFilter(target)) {\n        return false;\n      }\n      return edgeFilter(edge, source, target);\n    };\n\n    if (options.cache === 'auto') {\n      this.cacheEnabled = true;\n      this.startAutoCache();\n    } else if (options.cache === 'manual') {\n      this.cacheEnabled = true;\n    } else {\n      this.cacheEnabled = false;\n    }\n  }\n\n  /**\n   * Clear all cache data. Therefore `getAllNodes()` will return `[]`.\n   * If you want to disable caching, use `graphView.cacheEnabled = false` instead.\n   */\n  public clearCache = (): void => {\n    this.inEdgesMap.clear();\n    this.outEdgesMap.clear();\n    this.bothEdgesMap.clear();\n    this.allNodesMap.clear();\n    this.allEdgesMap.clear();\n  };\n\n  /**\n   * Fully refresh all cache data to the current graph state.\n   */\n  public refreshCache = (): void => {\n    this.clearCache();\n    this.updateCache(this.graph.getAllNodes().map((node) => node.id));\n  };\n\n  /**\n   * Instead of a fully refreshment, this method partially update the cache data by specifying\n   * involved(added, removed, updated) nodes. It's more efficient when handling small changes\n   * on a large graph.\n   */\n  public updateCache = (involvedNodeIds: Set<ID> | Array<ID>): void => {\n    const involvedEdgeIds = new Set<ID>();\n    involvedNodeIds.forEach((id) => {\n      // Collect all involved old edges.\n      const oldEdgesSet = this.bothEdgesMap.get(id);\n      if (oldEdgesSet) {\n        oldEdgesSet.forEach((edge) => involvedEdgeIds.add(edge.id));\n      }\n\n      if (!this.hasNode(id)) {\n        // When an involved node becomes unvisitable:\n        // 1. Delete its related edges cache.\n        this.inEdgesMap.delete(id);\n        this.outEdgesMap.delete(id);\n        this.bothEdgesMap.delete(id);\n        // 2. Delete it from the allNodesMap.\n        this.allNodesMap.delete(id);\n      } else {\n        // When an involved node becomes or stays visitable:\n        // 1. Collect its new edges.\n        const inEdges = this.graph\n          .getRelatedEdges(id, 'in')\n          .filter(this.edgeFilter);\n        const outEdges = this.graph\n          .getRelatedEdges(id, 'out')\n          .filter(this.edgeFilter);\n        const bothEdges = Array.from(new Set([...inEdges, ...outEdges]));\n        bothEdges.forEach((edge) => involvedEdgeIds.add(edge.id));\n\n        // 2. Update its related edges cache.\n        this.inEdgesMap.set(id, inEdges);\n        this.outEdgesMap.set(id, outEdges);\n        this.bothEdgesMap.set(id, bothEdges);\n\n        // 3. Add to allNodesMap.\n        this.allNodesMap.set(id, this.graph.getNode(id));\n      }\n    });\n\n    // Update allEdgesMap.\n    involvedEdgeIds.forEach((id) => {\n      if (this.hasEdge(id)) {\n        this.allEdgesMap.set(id, this.graph.getEdge(id));\n      } else {\n        this.allEdgesMap.delete(id);\n      }\n    });\n  };\n\n  public startAutoCache() {\n    this.refreshCache();\n    this.graph.on('changed', this.handleGraphChanged);\n  }\n\n  public stopAutoCache() {\n    this.graph.off('changed', this.handleGraphChanged);\n  }\n\n  private handleGraphChanged = (event: GraphChangedEvent<N, E>) => {\n    // Collect all involved nodes.\n    const involvedNodeIds: Set<ID> = new Set();\n    event.changes.forEach((change) => {\n      switch (change.type) {\n        case 'NodeAdded':\n          involvedNodeIds.add(change.value.id);\n          break;\n        case 'NodeDataUpdated':\n          involvedNodeIds.add(change.id);\n          break;\n        case 'EdgeAdded':\n          involvedNodeIds.add(change.value.source);\n          involvedNodeIds.add(change.value.target);\n          break;\n        case 'EdgeUpdated':\n          if (\n            change.propertyName === 'source' ||\n            change.propertyName === 'target'\n          ) {\n            involvedNodeIds.add(change.oldValue);\n            involvedNodeIds.add(change.newValue);\n          }\n          break;\n        case 'EdgeDataUpdated':\n          if (event.graph.hasEdge(change.id)) {\n            const edge = event.graph.getEdge(change.id);\n            involvedNodeIds.add(edge.source);\n            involvedNodeIds.add(edge.target);\n          }\n          break;\n        case 'EdgeRemoved':\n          involvedNodeIds.add(change.value.source);\n          involvedNodeIds.add(change.value.target);\n          break;\n        case 'NodeRemoved':\n          involvedNodeIds.add(change.value.id);\n          break;\n        default:\n          break;\n      }\n    });\n    // Update their caches.\n    this.updateCache(involvedNodeIds);\n  };\n\n  // ================= Node =================\n  private checkNodeExistence(id: ID): void {\n    this.getNode(id);\n  }\n\n  hasNode(id: ID): boolean {\n    if (!this.graph.hasNode(id)) return false;\n    const node = this.graph.getNode(id);\n    return this.nodeFilter(node);\n  }\n\n  public areNeighbors(firstNodeId: ID, secondNodeId: ID): boolean {\n    this.checkNodeExistence(firstNodeId);\n    return this.getNeighbors(secondNodeId).some(\n      (neighbor) => neighbor.id === firstNodeId,\n    );\n  }\n\n  public getNode(id: ID): Node<N> {\n    const node = this.graph.getNode(id);\n    if (!this.nodeFilter(node)) {\n      throw new Error('Node not found for id: ' + id);\n    }\n    return node;\n  }\n\n  public getRelatedEdges(id: ID, direction?: 'in' | 'out' | 'both'): Edge<E>[] {\n    this.checkNodeExistence(id);\n    if (this.cacheEnabled) {\n      if (direction === 'in') {\n        return this.inEdgesMap.get(id)!;\n      } else if (direction === 'out') {\n        return this.outEdgesMap.get(id)!;\n      } else {\n        return this.bothEdgesMap.get(id)!;\n      }\n    }\n    const edges = this.graph.getRelatedEdges(id, direction);\n    return edges.filter(this.edgeFilter);\n  }\n\n  public getDegree(id: ID, direction?: 'in' | 'out' | 'both'): number {\n    return this.getRelatedEdges(id, direction).length;\n  }\n\n  public getSuccessors(id: ID): Node<N>[] {\n    const outEdges = this.getRelatedEdges(id, 'out');\n    const targets = outEdges.map((edge) => this.getNode(edge.target));\n    return Array.from(new Set(targets));\n  }\n\n  public getPredecessors(id: ID): Node<N>[] {\n    const inEdges = this.getRelatedEdges(id, 'in');\n    const sources = inEdges.map((edge) => this.getNode(edge.source));\n    return Array.from(new Set(sources));\n  }\n\n  public getNeighbors(id: ID): Node<N>[] {\n    const predecessors = this.getPredecessors(id);\n    const successors = this.getSuccessors(id);\n    return Array.from(new Set([...predecessors, ...successors]));\n  }\n\n  // ================= Edge =================\n  public hasEdge(id: ID): boolean {\n    if (!this.graph.hasEdge(id)) return false;\n    const edge = this.graph.getEdge(id);\n    return this.edgeFilter(edge);\n  }\n\n  public getEdge(id: ID): Edge<E> {\n    const edge = this.graph.getEdge(id);\n    if (!this.edgeFilter(edge)) {\n      throw new Error('Edge not found for id: ' + id);\n    }\n    return edge;\n  }\n\n  public getEdgeDetail(id: ID): {\n    edge: Edge<E>;\n    source: Node<N>;\n    target: Node<N>;\n  } {\n    const edge = this.getEdge(id);\n    return {\n      edge,\n      source: this.getNode(edge.source),\n      target: this.getNode(edge.target),\n    };\n  }\n\n  // ================= Tree =================\n  public hasTreeStructure(treeKey: string | undefined): boolean {\n    return this.graph.hasTreeStructure(treeKey);\n  }\n\n  public getRoots(treeKey?: string): Node<N>[] {\n    return this.graph.getRoots(treeKey).filter(this.nodeFilter);\n  }\n\n  public getChildren(id: ID, treeKey?: string): Node<N>[] {\n    this.checkNodeExistence(id);\n    return this.graph.getChildren(id, treeKey).filter(this.nodeFilter);\n  }\n\n  public getParent(id: ID, treeKey?: string): Node<N> | null {\n    this.checkNodeExistence(id);\n    const parent = this.graph.getParent(id, treeKey);\n    if (!parent || !this.nodeFilter(parent)) return null;\n    return parent;\n  }\n\n  // ================= Graph =================\n  public getAllNodes(): Node<N>[] {\n    if (this.cacheEnabled) {\n      return Array.from(this.allNodesMap.values());\n    }\n    return this.graph.getAllNodes().filter(this.nodeFilter);\n  }\n\n  public getAllEdges(): Edge<E>[] {\n    if (this.cacheEnabled) {\n      return Array.from(this.allEdgesMap.values());\n    }\n    return this.graph.getAllEdges().filter(this.edgeFilter);\n  }\n\n  public bfs(\n    id: ID,\n    fn: (node: Node<N>) => void,\n    direction: 'in' | 'out' | 'both' = 'out',\n  ): void {\n    const navigator = {\n      in: this.getPredecessors.bind(this),\n      out: this.getSuccessors.bind(this),\n      both: this.getNeighbors.bind(this),\n    }[direction];\n    doBFS([this.getNode(id)], new Set(), fn, navigator);\n  }\n\n  public dfs(\n    id: ID,\n    fn: (node: Node<N>) => void,\n    direction: 'in' | 'out' | 'both' = 'out',\n  ): void {\n    const navigator = {\n      in: this.getPredecessors.bind(this),\n      out: this.getSuccessors.bind(this),\n      both: this.getNeighbors.bind(this),\n    }[direction];\n    doDFS(this.getNode(id), new Set(), fn, navigator);\n  }\n}\n", "import EventEmitter from '@antv/event-emitter';\nimport { GraphView } from './graphView';\nimport {\n  Node,\n  Edge,\n  GraphChange,\n  GraphChangedEvent,\n  GraphOptions,\n  ID,\n  TreeData,\n  PlainObject,\n  TreeIndices,\n  NodeDataUpdated,\n  TreeStructureChanged,\n  GraphViewOptions,\n} from './types';\nimport { doBFS, doDFS } from './utils/traverse';\n\nexport class Graph<\n  N extends PlainObject,\n  E extends PlainObject,\n> extends EventEmitter {\n  private nodeMap: Map<ID, Node<N>> = new Map();\n  private edgeMap: Map<ID, Edge<E>> = new Map();\n  private inEdgesMap: Map<ID, Set<Edge<E>>> = new Map();\n  private outEdgesMap: Map<ID, Set<Edge<E>>> = new Map();\n  private bothEdgesMap: Map<ID, Set<Edge<E>>> = new Map();\n  private treeIndices: TreeIndices<Node<N>> = new Map();\n\n  private changes: GraphChange<N, E>[] = [];\n  private batchCount = 0;\n\n  /**\n   * This function is called with a {@link GraphChangedEvent} each time a graph change happened.\n   *\n   * `event.changes` contains all the graph changes in order since last `onChanged`.\n   */\n  public onChanged: (event: GraphChangedEvent<N, E>) => void = () => {\n    // Do nothing.\n  };\n\n  /**\n   * Create a new Graph instance.\n   * @param options - The options to initialize a graph. See {@link GraphOptions}.\n   *\n   * ```ts\n   * const graph = new Graph({\n   *   // Optional, initial nodes.\n   *   nodes: [\n   *     // Each node has a unique ID.\n   *     { id: 'A', foo: 1 },\n   *     { id: 'B', foo: 1 },\n   *   ],\n   *   // Optional, initial edges.\n   *   edges: [\n   *     { id: 'C', source: 'B', target: 'B', weight: 1 },\n   *   ],\n   *   // Optional, called with a GraphChangedEvent.\n   *   onChanged: (event) => {\n   *     console.log(event);\n   *   }\n   * });\n   * ```\n   */\n  constructor(options?: GraphOptions<N, E>) {\n    super();\n    if (!options) return;\n    if (options.nodes) this.addNodes(options.nodes);\n    if (options.edges) this.addEdges(options.edges);\n    if (options.tree) this.addTree(options.tree);\n    if (options.onChanged) this.onChanged = options.onChanged;\n  }\n\n  /**\n   * Batch several graph changes into one.\n   *\n   * Make several changes, but dispatch only one ChangedEvent at the end of batch:\n   * ```ts\n   * graph.batch(() => {\n   *   graph.addNodes([]);\n   *   graph.addEdges([]);\n   * });\n   * ```\n   *\n   * Batches can be nested. Only the outermost batch will dispatch a ChangedEvent:\n   * ```ts\n   * graph.batch(() => {\n   *   graph.addNodes([]);\n   *   graph.batch(() => {\n   *     graph.addEdges([]);\n   *   });\n   * });\n   * ```\n   */\n  public batch = (fn: () => void): void => {\n    this.batchCount += 1;\n    fn();\n    this.batchCount -= 1;\n    if (!this.batchCount) {\n      this.commit();\n    }\n  };\n\n  /**\n   * Reset changes and dispatch a ChangedEvent.\n   */\n  private commit(): void {\n    const changes = this.changes;\n    this.changes = [];\n    const event = {\n      graph: this,\n      changes,\n    };\n    this.emit('changed', event);\n    this.onChanged(event);\n  }\n\n  /**\n   * Reduce the number of ordered graph changes by dropping or merging unnecessary changes.\n   *\n   * For example, if we update a node and remove it in a batch:\n   *\n   * ```ts\n   * graph.batch(() => {\n   *   graph.updateNodeData('A', 'foo', 2);\n   *   graph.removeNode('A');\n   * });\n   * ```\n   *\n   * We get 2 atomic graph changes like\n   *\n   * ```ts\n   * [\n   *   { type: 'NodeDataUpdated', id: 'A', propertyName: 'foo', oldValue: 1, newValue: 2 },\n   *   { type: 'NodeRemoved', value: { id: 'A', data: { foo: 2 } },\n   * ]\n   * ```\n   *\n   * Since node 'A' has been removed, we actually have no need to handle with NodeDataUpdated change.\n   *\n   * `reduceChanges()` here helps us remove such changes.\n   */\n  public reduceChanges(changes: GraphChange<N, E>[]): GraphChange<N, E>[] {\n    let mergedChanges: GraphChange<N, E>[] = [];\n    changes.forEach((change) => {\n      switch (change.type) {\n        case 'NodeRemoved': {\n          // NodeAdded: A added.\n          // NodeDataUpdated: A changed.\n          // TreeStructureChanged: A's parent changed.\n          // NodeRemoved: A removed.  Since A was removed, above three changes may be ignored.\n          let isNewlyAdded = false;\n          mergedChanges = mergedChanges.filter((pastChange) => {\n            if (pastChange.type === 'NodeAdded') {\n              const sameId = pastChange.value.id === change.value.id;\n              if (sameId) {\n                isNewlyAdded = true;\n              }\n              return !sameId;\n            } else if (pastChange.type === 'NodeDataUpdated') {\n              return pastChange.id !== change.value.id;\n            } else if (pastChange.type === 'TreeStructureChanged') {\n              return pastChange.nodeId !== change.value.id;\n            }\n            return true;\n          });\n          if (!isNewlyAdded) {\n            mergedChanges.push(change);\n          }\n          break;\n        }\n        case 'EdgeRemoved': {\n          // EdgeAdded: A added.\n          // EdgeDataUpdated: A changed.\n          // EdgeDataUpdated: A's source/target changed.\n          // EdgeRemoved: A removed.  Since A was removed, above three changes may be ignored.\n          let isNewlyAdded = false;\n          mergedChanges = mergedChanges.filter((pastChange) => {\n            if (pastChange.type === 'EdgeAdded') {\n              const sameId = pastChange.value.id === change.value.id;\n              if (sameId) {\n                isNewlyAdded = true;\n              }\n              return !sameId;\n            } else if (\n              pastChange.type === 'EdgeDataUpdated' ||\n              pastChange.type === 'EdgeUpdated'\n            ) {\n              return pastChange.id !== change.value.id;\n            }\n            return true;\n          });\n          if (!isNewlyAdded) {\n            mergedChanges.push(change);\n          }\n          break;\n        }\n        case 'NodeDataUpdated':\n        case 'EdgeDataUpdated':\n        case 'EdgeUpdated': {\n          // NodeDataUpdated: { id: A, propertyName: 'foo', oldValue: 1, newValue: 2 }.\n          // NodeDataUpdated: { id: A, propertyName: 'foo', oldValue: 2, newValue: 3 }.\n          //  Could be merged as { id: A, propertyName: 'foo', oldValue: 1, newValue: 3 }.\n          const index = mergedChanges.findIndex((pastChange) => {\n            return (\n              pastChange.type === change.type &&\n              pastChange.id === change.id &&\n              (change.propertyName === undefined ||\n                pastChange.propertyName === change.propertyName)\n            );\n          });\n          const existingChange = mergedChanges[index];\n          if (existingChange) {\n            if (change.propertyName !== undefined) {\n              // The incoming change is of the same property of existing change.\n              (existingChange as NodeDataUpdated<N>).newValue = change.newValue;\n            } else {\n              // The incoming change is a whole data override.\n              mergedChanges.splice(index, 1);\n              mergedChanges.push(change);\n            }\n          } else {\n            mergedChanges.push(change);\n          }\n          break;\n        }\n        case 'TreeStructureDetached': {\n          // TreeStructureAttached\n          // TreeStructureChanged\n          // TreeStructureDetached  Since the tree struct was detached, above 2 changes may be ignored.\n          mergedChanges = mergedChanges.filter((pastChange) => {\n            if (pastChange.type === 'TreeStructureAttached') {\n              return pastChange.treeKey !== change.treeKey;\n            } else if (pastChange.type === 'TreeStructureChanged') {\n              return pastChange.treeKey !== change.treeKey;\n            }\n            return true;\n          });\n          mergedChanges.push(change);\n          break;\n        }\n        case 'TreeStructureChanged': {\n          const existingChange = mergedChanges.find((pastChange) => {\n            return (\n              pastChange.type === 'TreeStructureChanged' &&\n              pastChange.treeKey === change.treeKey &&\n              pastChange.nodeId === change.nodeId\n            );\n          });\n          if (existingChange) {\n            (existingChange as TreeStructureChanged).newParentId =\n              change.newParentId;\n          } else {\n            mergedChanges.push(change);\n          }\n          break;\n        }\n        default:\n          mergedChanges.push(change);\n          break;\n      }\n    });\n    return mergedChanges;\n  }\n\n  // ================= Node =================\n  private checkNodeExistence(id: ID): void {\n    this.getNode(id);\n  }\n\n  /**\n   * Check if a node exists in the graph.\n   * @group NodeMethods\n   */\n  public hasNode(id: ID): boolean {\n    return this.nodeMap.has(id);\n  }\n\n  /**\n   * Tell if two nodes are neighbors.\n   * @group NodeMethods\n   */\n  public areNeighbors(firstNodeId: ID, secondNodeId: ID): boolean {\n    return this.getNeighbors(secondNodeId).some(\n      (neighbor) => neighbor.id === firstNodeId,\n    );\n  }\n\n  /**\n   * Get the node data with given ID.\n   * @group NodeMethods\n   */\n  public getNode(id: ID): Node<N> {\n    const node = this.nodeMap.get(id);\n    if (!node) {\n      throw new Error('Node not found for id: ' + id);\n    }\n    return node;\n  }\n\n  /**\n   * Given a node ID, find all edges of the node.\n   * @param id - ID of the node\n   * @param direction - Edge direction, defaults to 'both'.\n   * @group NodeMethods\n   */\n  public getRelatedEdges(id: ID, direction?: 'in' | 'out' | 'both'): Edge<E>[] {\n    this.checkNodeExistence(id);\n\n    if (direction === 'in') {\n      const inEdges = this.inEdgesMap.get(id)!;\n      return Array.from(inEdges);\n    } else if (direction === 'out') {\n      const outEdges = this.outEdgesMap.get(id)!;\n      return Array.from(outEdges);\n    } else {\n      const bothEdges = this.bothEdgesMap.get(id)!;\n      return Array.from(bothEdges);\n    }\n  }\n\n  /**\n   * Get the degree of the given node.\n   * @group NodeMethods\n   */\n  public getDegree(id: ID, direction?: 'in' | 'out' | 'both'): number {\n    return this.getRelatedEdges(id, direction).length;\n  }\n\n  /**\n   * Get all successors of the given node.\n   */\n  public getSuccessors(id: ID): Node<N>[] {\n    const outEdges = this.getRelatedEdges(id, 'out');\n    const targets = outEdges.map((edge) => this.getNode(edge.target));\n    return Array.from(new Set(targets));\n  }\n\n  /**\n   * Get all predecessors of the given node.\n   */\n  public getPredecessors(id: ID): Node<N>[] {\n    const inEdges = this.getRelatedEdges(id, 'in');\n    const sources = inEdges.map((edge) => this.getNode(edge.source));\n    return Array.from(new Set(sources));\n  }\n\n  /**\n   * Given a node ID, find its neighbors.\n   * @param id - ID of the node\n   * @group NodeMethods\n   */\n  public getNeighbors(id: ID): Node<N>[] {\n    const predecessors = this.getPredecessors(id);\n    const successors = this.getSuccessors(id);\n    return Array.from(new Set([...predecessors, ...successors]));\n  }\n\n  private doAddNode(node: Node<N>): void {\n    if (this.hasNode(node.id)) {\n      throw new Error('Node already exists: ' + node.id);\n    }\n    this.nodeMap.set(node.id, node);\n    this.inEdgesMap.set(node.id, new Set());\n    this.outEdgesMap.set(node.id, new Set());\n    this.bothEdgesMap.set(node.id, new Set());\n    this.treeIndices.forEach((tree) => {\n      tree.childrenMap.set(node.id, new Set());\n    });\n    this.changes.push({ type: 'NodeAdded', value: node });\n  }\n\n  /**\n   * Add all nodes of the given array, or iterable, into the graph.\n   * @group NodeMethods\n   */\n  public addNodes(nodes: Iterable<Node<N>>) {\n    this.batch(() => {\n      for (const node of nodes) {\n        this.doAddNode(node);\n      }\n    });\n  }\n\n  /**\n   * Add a single node into the graph.\n   * @group NodeMethods\n   */\n  public addNode(node: Node<N>): void {\n    this.addNodes([node]);\n  }\n\n  private doRemoveNode(id: ID): void {\n    const node = this.getNode(id);\n    const bothEdges = this.bothEdgesMap.get(id);\n    bothEdges?.forEach((edge) => this.doRemoveEdge(edge.id));\n    this.nodeMap.delete(id);\n    this.treeIndices.forEach((tree) => {\n      tree.childrenMap.get(id)?.forEach((child) => {\n        tree.parentMap.delete(child.id);\n      });\n\n      const parent = tree.parentMap.get(id);\n      if (parent) tree.childrenMap.get(parent.id)?.delete(node);\n\n      tree.parentMap.delete(id);\n      tree.childrenMap.delete(id);\n    });\n    this.bothEdgesMap.delete(id);\n    this.inEdgesMap.delete(id);\n    this.outEdgesMap.delete(id);\n    this.changes.push({ type: 'NodeRemoved', value: node });\n  }\n\n  /**\n   * Remove nodes and their attached edges from the graph.\n   * @group NodeMethods\n   */\n  public removeNodes(idList: ID[]): void {\n    this.batch(() => {\n      idList.forEach((id) => this.doRemoveNode(id));\n    });\n  }\n\n  /**\n   * Remove a single node and its attached edges from the graph.\n   * @group NodeMethods\n   */\n  public removeNode(id: ID): void {\n    this.removeNodes([id]);\n  }\n\n  private updateNodeDataProperty<P extends keyof N>(\n    id: ID,\n    propertyName: P,\n    value: N[P],\n  ): void {\n    const node = this.getNode(id);\n    this.batch(() => {\n      const oldValue = node.data[propertyName];\n      const newValue = value;\n      node.data[propertyName] = newValue;\n      this.changes.push({\n        type: 'NodeDataUpdated',\n        id,\n        propertyName,\n        oldValue,\n        newValue,\n      });\n    });\n  }\n\n  /**\n   * Like Object.assign, merge all properties of `path` to the node data.\n   * @param id Node ID.\n   * @param patch A data object to merge.\n   */\n  public mergeNodeData(id: ID, patch: Partial<N>): void {\n    this.batch(() => {\n      Object.entries(patch).forEach(([propertyName, value]) => {\n        this.updateNodeDataProperty(id, propertyName, value);\n      });\n    });\n  }\n\n  /**\n   * Update node data. This will replace the whole data object.\n   *\n   * ```ts\n   * updateNodeData(id, data); // Works like `node.data = data`\n   * ```\n   *\n   * @group NodeMethods\n   */\n  public updateNodeData(id: ID, data: N): void;\n  /**\n   * Update a single property on the node data.\n   *\n   * To update multiple properties, you could {@link Graph.batch batch} several updates or use {@link Graph.mergeNodeData mergeNodeData}.\n   *\n   * ```ts\n   * updateNodeData(id, key, value); // Works like `node.data[key] = value`\n   * ```\n   *\n   * @group NodeMethods\n   */\n  public updateNodeData<P extends keyof N>(\n    id: ID,\n    propertyName: P,\n    value: N[P],\n  ): void;\n  /**\n   * Update node data by a update function.\n   *\n   * ```ts\n   * updateNodeData(id, oldData => newData);\n   * ```\n   * @group NodeMethods\n   */\n  public updateNodeData(id: ID, update: (data: N) => N): void;\n  public updateNodeData(...args: any[]): void {\n    const id: ID = args[0];\n    const node = this.getNode(id);\n    if (typeof args[1] === 'string') {\n      // id, propertyName, value\n      this.updateNodeDataProperty(id, args[1], args[2]);\n      return;\n    }\n    let data: N;\n    if (typeof args[1] === 'function') {\n      // id, update\n      const update = args[1];\n      data = update(node.data);\n    } else if (typeof args[1] === 'object') {\n      // id, data\n      data = args[1];\n    }\n    this.batch(() => {\n      const oldValue = node.data;\n      const newValue = data;\n      node.data = data;\n      this.changes.push({\n        type: 'NodeDataUpdated',\n        id,\n        oldValue,\n        newValue,\n      });\n    });\n  }\n\n  // ================= Edge =================\n  private checkEdgeExistence(id: ID): void {\n    if (!this.hasEdge(id)) {\n      throw new Error('Edge not found for id: ' + id);\n    }\n  }\n\n  /**\n   * Check if an edge exists in the graph.\n   * @group NodeMethods\n   */\n  public hasEdge(id: ID): boolean {\n    return this.edgeMap.has(id);\n  }\n\n  /**\n   * Get the edge data with given ID.\n   * @group EdgeMethods\n   */\n  public getEdge(id: ID): Edge<E> {\n    this.checkEdgeExistence(id);\n    return this.edgeMap.get(id)!;\n  }\n\n  /**\n   * Get the edge, the source node, and the target node by an edge ID.\n   * @group EdgeMethods\n   */\n  public getEdgeDetail(id: ID): {\n    edge: Edge<E>;\n    source: Node<N>;\n    target: Node<N>;\n  } {\n    const edge = this.getEdge(id);\n    return {\n      edge,\n      source: this.getNode(edge.source),\n      target: this.getNode(edge.target),\n    };\n  }\n\n  private doAddEdge(edge: Edge<E>): void {\n    if (this.hasEdge(edge.id)) {\n      throw new Error('Edge already exists: ' + edge.id);\n    }\n    this.checkNodeExistence(edge.source);\n    this.checkNodeExistence(edge.target);\n\n    this.edgeMap.set(edge.id, edge);\n    const inEdges = this.inEdgesMap.get(edge.target)!;\n    const outEdges = this.outEdgesMap.get(edge.source)!;\n    const bothEdgesOfSource = this.bothEdgesMap.get(edge.source)!;\n    const bothEdgesOfTarget = this.bothEdgesMap.get(edge.target)!;\n    inEdges.add(edge);\n    outEdges.add(edge);\n    bothEdgesOfSource.add(edge);\n    bothEdgesOfTarget.add(edge);\n\n    this.changes.push({ type: 'EdgeAdded', value: edge });\n  }\n\n  /**\n   * Add all edges of the given iterable(an array, a set, etc.) into the graph.\n   * @group EdgeMethods\n   */\n  public addEdges(edges: Iterable<Edge<E>>): void {\n    this.batch(() => {\n      for (const edge of edges) {\n        this.doAddEdge(edge);\n      }\n    });\n  }\n\n  /**\n   * Add a single edge pointing from `source` to `target` into the graph.\n   *\n   * ```ts\n   * graph.addNode({ id: 'NodeA' });\n   * graph.addNode({ id: 'NodeB' });\n   * graph.addEdge({ id: 'EdgeA', source: 'NodeA', target: 'NodeB' });\n   * ```\n   *\n   * If `source` or `target` were not found in the current graph, it throws an Error.\n   * @group EdgeMethods\n   */\n  public addEdge(edge: Edge<E>): void {\n    this.addEdges([edge]);\n  }\n\n  private doRemoveEdge(id: ID): void {\n    const edge = this.getEdge(id);\n    const outEdges = this.outEdgesMap.get(edge.source)!;\n    const inEdges = this.inEdgesMap.get(edge.target)!;\n    const bothEdgesOfSource = this.bothEdgesMap.get(edge.source)!;\n    const bothEdgesOfTarget = this.bothEdgesMap.get(edge.target)!;\n    outEdges.delete(edge);\n    inEdges.delete(edge);\n    bothEdgesOfSource.delete(edge);\n    bothEdgesOfTarget.delete(edge);\n    this.edgeMap.delete(id);\n    this.changes.push({ type: 'EdgeRemoved', value: edge });\n  }\n\n  /**\n   * Remove edges whose id was included in the given id list.\n   * @group EdgeMethods\n   */\n  public removeEdges(idList: ID[]): void {\n    this.batch(() => {\n      idList.forEach((id) => this.doRemoveEdge(id));\n    });\n  }\n\n  /**\n   * Remove a single edge of the given id.\n   * @group EdgeMethods\n   */\n  public removeEdge(id: ID): void {\n    this.removeEdges([id]);\n  }\n\n  /**\n   * Change the source of an edge. The source must be found in current graph.\n   * @group EdgeMethods\n   */\n  public updateEdgeSource(id: ID, source: ID): void {\n    const edge = this.getEdge(id);\n    this.checkNodeExistence(source);\n    const oldSource = edge.source;\n    const newSource = source;\n    this.outEdgesMap.get(oldSource)!.delete(edge);\n    this.bothEdgesMap.get(oldSource)!.delete(edge);\n    this.outEdgesMap.get(newSource)!.add(edge);\n    this.bothEdgesMap.get(newSource)!.add(edge);\n    edge.source = source;\n    this.batch(() => {\n      this.changes.push({\n        type: 'EdgeUpdated',\n        id,\n        propertyName: 'source',\n        oldValue: oldSource,\n        newValue: newSource,\n      });\n    });\n  }\n\n  /**\n   * Change the target of an edge. The target must be found in current graph.\n   * @group EdgeMethods\n   */\n  public updateEdgeTarget(id: ID, target: ID): void {\n    const edge = this.getEdge(id);\n    this.checkNodeExistence(target);\n    const oldTarget = edge.target;\n    const newTarget = target;\n    this.inEdgesMap.get(oldTarget)!.delete(edge);\n    this.bothEdgesMap.get(oldTarget)!.delete(edge);\n    this.inEdgesMap.get(newTarget)!.add(edge);\n    this.bothEdgesMap.get(newTarget)!.add(edge);\n    edge.target = target;\n    this.batch(() => {\n      this.changes.push({\n        type: 'EdgeUpdated',\n        id,\n        propertyName: 'target',\n        oldValue: oldTarget,\n        newValue: newTarget,\n      });\n    });\n  }\n\n  private updateEdgeDataProperty<P extends keyof E>(\n    id: ID,\n    propertyName: P,\n    value: E[P],\n  ): void {\n    const edge = this.getEdge(id);\n    this.batch(() => {\n      const oldValue = edge.data[propertyName];\n      const newValue = value;\n      edge.data[propertyName] = newValue;\n      this.changes.push({\n        type: 'EdgeDataUpdated',\n        id,\n        propertyName,\n        oldValue,\n        newValue,\n      });\n    });\n  }\n\n  /**\n   * Update edge data. This will replace the whole data object.\n   *\n   * ```ts\n   * updateEdgeData(id, data); // Works like `edge.data = data`\n   * ```\n   *\n   * @group EdgeMethods\n   */\n  public updateEdgeData(id: ID, data: E): void;\n  /**\n   * Update a single property on the edge data.\n   *\n   * To update multiple properties, you could {@link Graph.batch batch} several updates or use {@link Graph.mergeEdgeData mergeNodeData}.\n   *\n   * ```ts\n   * updateEdgeData(id, key, value); // Works like `edge.data[key] = value`\n   * ```\n   *\n   * @group EdgeMethods\n   */\n  public updateEdgeData<P extends keyof E>(\n    id: ID,\n    propertyName: P,\n    value: E[P],\n  ): void;\n  /**\n   * Update edge data by a update function.\n   *\n   * ```ts\n   * updateEdgeData(id, oldData => newData);\n   * ```\n   * @group EdgeMethods\n   */\n  public updateEdgeData(id: ID, update: (data: E) => E): void;\n  public updateEdgeData(...args: any[]): void {\n    const id: ID = args[0];\n    const edge = this.getEdge(id);\n    if (typeof args[1] === 'string') {\n      // id, propertyName, value\n      this.updateEdgeDataProperty(id, args[1], args[2]);\n      return;\n    }\n    let data: E;\n    if (typeof args[1] === 'function') {\n      // id, update\n      const update = args[1];\n      data = update(edge.data);\n    } else if (typeof args[1] === 'object') {\n      // id, data\n      data = args[1];\n    }\n    this.batch(() => {\n      const oldValue = edge.data;\n      const newValue = data;\n      edge.data = data;\n      this.changes.push({\n        type: 'EdgeDataUpdated',\n        id,\n        oldValue,\n        newValue,\n      });\n    });\n  }\n\n  /**\n   * @group EdgeMethods\n   */\n  public mergeEdgeData(id: ID, patch: Partial<E>): void {\n    this.batch(() => {\n      Object.entries(patch).forEach(([propertyName, value]) => {\n        this.updateEdgeDataProperty(id, propertyName, value);\n      });\n    });\n  }\n\n  // ================= Tree =================\n  private checkTreeExistence(treeKey: string | undefined): void {\n    if (!this.hasTreeStructure(treeKey)) {\n      throw new Error('Tree structure not found for treeKey: ' + treeKey);\n    }\n  }\n\n  public hasTreeStructure(treeKey: string | undefined): boolean {\n    return this.treeIndices.has(treeKey);\n  }\n\n  /**\n   * Attach a new tree structure representing the hierarchy of all nodes in the graph.\n   * @param treeKey A unique key of the tree structure. You can attach multiple tree structures with different keys.\n   *\n   * ```ts\n   * const graph = new Graph({\n   *   nodes: [{ id: 1 }, { id: 2 }, { id: 3 }],\n   * });\n   * graph.attachTreeStructure('Inheritance');\n   * graph.setParent(2, 1, 'Inheritance');\n   * graph.setParent(3, 1, 'Inheritance');\n   * graph.getRoots('Inheritance'); // [1]\n   * graph.getChildren(1, 'Inheritance'); // [2,3]\n   * ```\n   * @group TreeMethods\n   */\n  public attachTreeStructure(treeKey?: string): void {\n    if (this.treeIndices.has(treeKey)) {\n      // Already attached.\n      return;\n    }\n    this.treeIndices.set(treeKey, {\n      parentMap: new Map(),\n      childrenMap: new Map(),\n    });\n    this.batch(() => {\n      this.changes.push({\n        type: 'TreeStructureAttached',\n        treeKey,\n      });\n    });\n  }\n\n  /**\n   * Detach the tree structure of the given tree key from the graph.\n   *\n   * ```ts\n   * graph.detachTreeStructure('Inheritance');\n   * graph.getRoots('Inheritance'); // Error!\n   * ```\n   * @group TreeMethods\n   */\n  public detachTreeStructure(treeKey?: string): void {\n    this.checkTreeExistence(treeKey);\n    this.treeIndices.delete(treeKey);\n    this.batch(() => {\n      this.changes.push({\n        type: 'TreeStructureDetached',\n        treeKey,\n      });\n    });\n  }\n\n  /**\n   * Traverse the given tree data, add each node into the graph, then attach the tree structure.\n   *\n   * ```ts\n   * graph.addTree({\n   *   id: 1,\n   *   children: [\n   *     { id: 2 },\n   *     { id: 3 },\n   *   ],\n   * }, 'Inheritance');\n   * graph.getRoots('Inheritance'); // [1]\n   * graph.getChildren(1, 'Inheritance'); // [2, 3]\n   * graph.getAllNodes(); // [1, 2, 3]\n   * graph.getAllEdges(); // []\n   * ```\n   * @group TreeMethods\n   */\n  public addTree(tree: TreeData<N> | TreeData<N>[], treeKey?: string): void {\n    this.batch(() => {\n      this.attachTreeStructure(treeKey);\n\n      // Add Nodes\n      const nodes: TreeData<N>[] = [];\n      const stack = Array.isArray(tree) ? tree : [tree];\n      while (stack.length) {\n        const node = stack.shift()!;\n        nodes.push(node);\n        if (node.children) {\n          stack.push(...node.children);\n        }\n      }\n      this.addNodes(nodes);\n\n      // Set parent for each child node.\n      nodes.forEach((parent) => {\n        parent.children?.forEach((child) => {\n          this.setParent(child.id, parent.id, treeKey);\n        });\n      });\n    });\n  }\n\n  /**\n   * Get the root nodes of an attached tree structure.\n   *\n   * Consider a graph with the following tree structure attached:\n   * ```\n   * Tree structure:\n   *    O     3\n   *   / \\    |\n   *  1   2   4\n   * ```\n   * `graph.getRoots()` takes all nodes without a parent, therefore [0, 3] was returned.\n   *\n   * Newly added nodes are also unparented. So they are counted as roots.\n   * ```ts\n   * graph.addNode({ id: 5 });\n   * graph.getRoots(); // [0, 3, 5]\n   * ```\n   *\n   * Here is how the tree structure looks like:\n   * ```\n   * Tree structure:\n   *    O     3  5\n   *   / \\    |\n   *  1   2   4\n   * ```\n   *\n   * By setting a parent, a root node no more be a root.\n   * ```ts\n   * graph.setParent(5, 2);\n   * graph.getRoots(); // [0, 3]\n   * ```\n   *\n   * The tree structure now becomes:\n   * ```\n   * Tree structure:\n   *    O     3\n   *   / \\    |\n   *  1   2   4\n   *      |\n   *      5\n   * ```\n   *\n   * Removing a node forces its children to be unparented, or roots.\n   * ```ts\n   * graph.removeNode(0);\n   * graph.getRoots(); // [1, 2, 3]\n   * ```\n   *\n   * You might draw the the structure as follow:\n   * ```\n   * Tree structure:\n   *  1   2  3\n   *      |  |\n   *      5  4\n   * ```\n   * @group TreeMethods\n   */\n  public getRoots(treeKey?: string): Node<N>[] {\n    this.checkTreeExistence(treeKey);\n    return this.getAllNodes().filter(\n      (node) => !this.getParent(node.id, treeKey),\n    );\n  }\n\n  /**\n   * Given a node ID and an optional tree key, get the children of the node in the specified tree structure.\n   * @group TreeMethods\n   */\n  public getChildren(id: ID, treeKey?: string): Node<N>[] {\n    this.checkNodeExistence(id);\n    this.checkTreeExistence(treeKey);\n    const tree = this.treeIndices.get(treeKey)!;\n    const children = tree.childrenMap.get(id);\n    return Array.from(children || []);\n  }\n\n  /**\n   * Given a node ID and an optional tree key, get the parent of the node in the specified tree structure.\n   * If the given node is one of the tree roots, this returns null.\n   * @group TreeMethods\n   */\n  public getParent(id: ID, treeKey?: string): Node<N> | null {\n    this.checkNodeExistence(id);\n    this.checkTreeExistence(treeKey);\n    const tree = this.treeIndices.get(treeKey)!;\n    return tree.parentMap.get(id) || null;\n  }\n\n  /**\n   * Returns an array of all the ancestor nodes, staring from the parent to the root.\n   */\n  public getAncestors(id: ID, treeKey?: string): Node<N>[] {\n    const ancestors: Node<N>[] = [];\n    let current = this.getNode(id);\n    let parent: Node<N> | null;\n    // eslint-disable-next-line no-cond-assign\n    while ((parent = this.getParent(current.id, treeKey))) {\n      ancestors.push(parent);\n      current = parent;\n    }\n    return ancestors;\n  }\n\n  /**\n   * Set node parent. If this operation causes a circle, it fails with an error.\n   * @param id - ID of the child node.\n   * @param parent - ID of the parent node. If it is undefined or null, means unset parent for node with id.\n   * @param treeKey - Which tree structure the relation is applied to.\n   * @group TreeMethods\n   */\n  public setParent(id: ID, parent?: ID | null, treeKey?: string) {\n    this.checkTreeExistence(treeKey);\n\n    const tree = this.treeIndices.get(treeKey);\n\n    if (!tree) return;\n\n    const node = this.getNode(id);\n    const oldParent = tree.parentMap.get(id);\n\n    // Same parent id as old one, skip\n    if (oldParent?.id === parent) return;\n\n    // New parent is undefined or null, unset parent for the node\n    if (parent === undefined || parent === null) {\n      if (oldParent) {\n        tree.childrenMap.get(oldParent.id)?.delete(node);\n      }\n      tree.parentMap.delete(id);\n      return;\n    }\n\n    const newParent = this.getNode(parent);\n\n    // Set parent\n    tree.parentMap.set(id, newParent);\n\n    // Set children\n    if (oldParent) {\n      tree.childrenMap.get(oldParent.id)?.delete(node);\n    }\n    let children = tree.childrenMap.get(newParent.id);\n    if (!children) {\n      children = new Set();\n      tree.childrenMap.set(newParent.id, children);\n    }\n    children.add(node);\n\n    this.batch(() => {\n      this.changes.push({\n        type: 'TreeStructureChanged',\n        treeKey,\n        nodeId: id,\n        oldParentId: oldParent?.id,\n        newParentId: newParent.id,\n      });\n    });\n  }\n\n  dfsTree(id: ID, fn: (node: Node<N>) => boolean | void, treeKey?: string) {\n    const navigator = (nodeId: ID) => this.getChildren(nodeId, treeKey);\n    return doDFS(this.getNode(id), new Set(), fn, navigator);\n  }\n\n  bfsTree(id: ID, fn: (node: Node<N>) => boolean | void, treeKey?: string) {\n    const navigator = (nodeId: ID) => this.getChildren(nodeId, treeKey);\n    return doBFS([this.getNode(id)], new Set(), fn, navigator);\n  }\n\n  // ================= Graph =================\n  /**\n   * Get all nodes in the graph as an array.\n   */\n  public getAllNodes(): Node<N>[] {\n    return Array.from(this.nodeMap.values());\n  }\n\n  /**\n   * Get all edges in the graph as an array.\n   */\n  public getAllEdges(): Edge<E>[] {\n    return Array.from(this.edgeMap.values());\n  }\n\n  public bfs(\n    id: ID,\n    fn: (node: Node<N>) => boolean | void,\n    direction: 'in' | 'out' | 'both' = 'out',\n  ): boolean {\n    const navigator = {\n      in: this.getPredecessors.bind(this),\n      out: this.getSuccessors.bind(this),\n      both: this.getNeighbors.bind(this),\n    }[direction];\n    return doBFS([this.getNode(id)], new Set(), fn, navigator);\n  }\n\n  public dfs(\n    id: ID,\n    fn: (node: Node<N>) => boolean | void,\n    direction: 'in' | 'out' | 'both' = 'out',\n  ): boolean {\n    const navigator = {\n      in: this.getPredecessors.bind(this),\n      out: this.getSuccessors.bind(this),\n      both: this.getNeighbors.bind(this),\n    }[direction];\n    return doDFS(this.getNode(id), new Set(), fn, navigator);\n  }\n\n  public clone(): Graph<N, E> {\n    // Make a shallow copy of nodes and edges.\n    const newNodes = this.getAllNodes().map((oldNode) => {\n      return { ...oldNode, data: { ...oldNode.data } };\n    });\n    const newEdges = this.getAllEdges().map((oldEdge) => {\n      return { ...oldEdge, data: { ...oldEdge.data } };\n    });\n\n    // Create a new graph with shallow copied nodes and edges.\n    const newGraph = new Graph<N, E>({\n      nodes: newNodes,\n      edges: newEdges,\n    });\n\n    // Add tree indices.\n    this.treeIndices.forEach(\n      ({ parentMap: oldParentMap, childrenMap: oldChildrenMap }, treeKey) => {\n        const parentMap = new Map<ID, Node<N>>();\n        oldParentMap.forEach((parent, key) => {\n          parentMap.set(key, newGraph.getNode(parent.id));\n        });\n\n        const childrenMap = new Map<ID, Set<Node<N>>>();\n        oldChildrenMap.forEach((children, key) => {\n          childrenMap.set(\n            key,\n            new Set(Array.from(children).map((n) => newGraph.getNode(n.id))),\n          );\n        });\n\n        newGraph.treeIndices.set(treeKey, {\n          parentMap: parentMap,\n          childrenMap: childrenMap,\n        });\n      },\n    );\n\n    return newGraph;\n  }\n\n  public toJSON(): string {\n    return JSON.stringify({\n      nodes: this.getAllNodes(),\n      edges: this.getAllEdges(),\n      // FIXME: And tree structures?\n    });\n  }\n\n  public createView(\n    options: Omit<GraphViewOptions<N, E>, 'graph'>,\n  ): GraphView<N, E> {\n    return new GraphView({\n      graph: this,\n      ...options,\n    });\n  }\n}\n", "import type { RuntimeContext } from '../runtime/types';\nimport type { GraphData } from '../spec';\nimport type { BaseLayoutOptions } from './types';\n\n/**\n * <zh/> \n *\n * <en/> Base class for layout\n */\nexport abstract class BaseLayout<O extends BaseLayoutOptions = any> {\n  public abstract id: string;\n\n  public options: O;\n\n  protected context: RuntimeContext;\n\n  constructor(context: RuntimeContext, options?: O) {\n    this.context = context;\n    this.options = options || ({} as O);\n  }\n\n  public stop?: () => void;\n\n  public tick?: (iterations?: number) => GraphData;\n\n  public abstract execute(model: GraphData, options?: O): Promise<GraphData>;\n}\n", "import { Graph as Graphlib } from '@antv/graphlib';\nimport { deepMix, isNumber } from '@antv/util';\nimport { COMBO_KEY } from '../constants';\nimport { BaseLayout } from '../layouts/base-layout';\nimport { idOf } from './id';\nimport { parsePoint } from './point';\n\nimport type { LayoutMapping, Graph as LayoutModel, Node as LayoutNodeData } from '@antv/layout';\nimport type { AntVLayout } from '../layouts/types';\nimport type { RuntimeContext } from '../runtime/types';\nimport type { GraphData } from '../spec/data';\nimport type { LayoutOptions, STDLayoutOptions } from '../spec/layout';\nimport type { AdaptiveLayout, ID } from '../types';\n\n/**\n * <zh/>  combo \n *\n * <en/> Determine if it is a combo layout\n * @param options - <zh/>  | <en/> Layout options\n * @returns <zh/>  combo  | <en/> Whether it is a combo layout\n */\nexport function isComboLayout(options: STDLayoutOptions) {\n  const { type } = options;\n  if (['comboCombined', 'comboForce'].includes(type)) return true;\n  if (type === 'antv-dagre' && options.sortByCombo) return true;\n  return false;\n}\n\n/**\n * <zh/> \n *\n * <en/> Determine if it is a tree layout\n * @param options - <zh/>  | <en/> Layout options\n * @returns <zh/>  | <en/> Whether it is a tree layout\n */\nexport function isTreeLayout(options: STDLayoutOptions) {\n  const { type } = options;\n  return ['compact-box', 'mindmap', 'dendrogram', 'indented'].includes(type);\n}\n\n/**\n * <zh/> \n *\n * <en/> Is the position specified in the data\n * @param data - <zh/>  | <en/> Data\n * @returns <zh/>  | <en/> Is the position specified\n */\nexport function isPositionSpecified(data: Record<string, unknown>) {\n  return isNumber(data.x) && isNumber(data.y);\n}\n\n/**\n * <zh/> \n *\n * <en/> Is pre-layout\n * @remarks\n * <zh/> \n *\n * <en/> Pre-layout refers to calculating the layout before initializing the elements, which is suitable for some layouts that need to calculate the position in advance.\n * @param options - <zh/>  | <en/> Layout options\n * @returns <zh/>  | <en/> Is it a pre-layout\n */\nexport function isPreLayout(options?: LayoutOptions) {\n  return !Array.isArray(options) && options?.preLayout;\n}\n\n/**\n * <zh/>  G6 \n *\n * <en/> Convert the layout result to G6 data\n * @param layoutMapping - <zh/>  | <en/> Layout mapping\n * @returns <zh/> G6  | <en/> G6 data\n */\nexport function layoutMapping2GraphData(layoutMapping: LayoutMapping): GraphData {\n  const { nodes, edges } = layoutMapping;\n  const data: GraphData = { nodes: [], edges: [], combos: [] };\n\n  nodes.forEach((nodeLike) => {\n    const target = nodeLike.data._isCombo ? data.combos : data.nodes;\n    const { x, y, z = 0 } = nodeLike.data;\n    target?.push({\n      id: nodeLike.id as ID,\n      style: { x, y, z },\n    });\n  });\n\n  edges.forEach((edge) => {\n    const {\n      id,\n      source,\n      target,\n      data: { points = [], controlPoints = points.slice(1, points.length - 1) },\n    } = edge;\n\n    data.edges!.push({\n      id: id as ID,\n      source: source as ID,\n      target: target as ID,\n      style: {\n        /**\n         * antv-dagre  controlPointsdagre  points\n         * antv-dagre returns controlPoints, dagre returns points\n         */\n        ...(controlPoints?.length ? { controlPoints: controlPoints.map(parsePoint) } : {}),\n      },\n    });\n  });\n\n  return data;\n}\n\n/**\n * <zh/>  @antv/layout  G6 \n *\n * <en/> Adapt @antv/layout layout to G6 layout\n * @param Ctor - <zh/>  | <en/> Layout class\n * @param context - <zh/>  | <en/> Runtime context\n * @returns <zh/> G6  | <en/> G6 layout class\n */\nexport function layoutAdapter(\n  Ctor: new (options: Record<string, unknown>) => AntVLayout,\n  context: RuntimeContext,\n): new (context: RuntimeContext, options?: Record<string, unknown>) => BaseLayout {\n  class AdaptLayout extends BaseLayout implements AdaptiveLayout {\n    public instance: AntVLayout;\n\n    public id: string;\n\n    constructor(context: RuntimeContext, options?: Record<string, unknown>) {\n      super(context, options);\n      this.instance = new Ctor({});\n      this.id = this.instance.id;\n\n      if ('stop' in this.instance && 'tick' in this.instance) {\n        const instance = this.instance;\n        this.stop = instance.stop.bind(instance);\n        this.tick = (iterations?: number) => {\n          const tickResult = instance.tick(iterations);\n          return layoutMapping2GraphData(tickResult);\n        };\n      }\n    }\n\n    public async execute(model: GraphData, options?: STDLayoutOptions): Promise<GraphData> {\n      return layoutMapping2GraphData(\n        await this.instance.execute(\n          this.graphData2LayoutModel(model),\n          this.transformOptions(deepMix({}, this.options, options)),\n        ),\n      );\n    }\n\n    private transformOptions(options: STDLayoutOptions) {\n      if (!('onTick' in options)) return options;\n      const onTick = options.onTick as (data: GraphData) => void;\n      options.onTick = (data: LayoutMapping) => onTick(layoutMapping2GraphData(data));\n      return options;\n    }\n\n    public graphData2LayoutModel(data: GraphData): LayoutModel {\n      const { nodes = [], edges = [], combos = [] } = data;\n      const nodesToLayout: LayoutNodeData[] = nodes.map((datum) => {\n        const id = idOf(datum);\n        const { data, style, combo, ...rest } = datum;\n\n        const result = {\n          id,\n          data: {\n            // grid  data[sortBy] data  data, style \n            // The grid layout will directly read data[sortBy], compatible processing, need to avoid users using data, style and other fields under data\n            ...data,\n            data,\n            // antv-dagre  data.parentId\n            // antv-dagre will read data.parentId\n            ...(combo ? { parentId: combo } : {}),\n            style,\n            ...rest,\n          },\n        };\n        //  data \n        if (style?.x) Object.assign(result.data, { x: style.x });\n        if (style?.y) Object.assign(result.data, { y: style.y });\n        if (style?.z) Object.assign(result.data, { z: style.z });\n\n        return result;\n      });\n      const nodesIdMap = new Map(nodesToLayout.map((node) => [node.id, node]));\n\n      const edgesToLayout = edges\n        .filter((edge) => {\n          const { source, target } = edge;\n          return nodesIdMap.has(source) && nodesIdMap.has(target);\n        })\n        .map((edge) => {\n          const { source, target, data, style } = edge;\n          return { id: idOf(edge), source, target, data: { ...data }, style: { ...style } };\n        });\n\n      const combosToLayout: LayoutNodeData[] = combos.map((combo) => {\n        return { id: idOf(combo), data: { _isCombo: true, ...combo.data }, style: { ...combo.style } };\n      });\n\n      const layoutModel = new Graphlib({\n        nodes: [...nodesToLayout, ...combosToLayout],\n        edges: edgesToLayout,\n      });\n\n      if (context.model.model.hasTreeStructure(COMBO_KEY)) {\n        layoutModel.attachTreeStructure(COMBO_KEY);\n        //  / Synchronize hierarchical relationships\n        nodesToLayout.forEach((node) => {\n          const parent = context.model.model.getParent(node.id, COMBO_KEY);\n          if (parent && layoutModel.hasNode(parent.id)) {\n            layoutModel.setParent(node.id, parent.id, COMBO_KEY);\n          }\n        });\n      }\n\n      return layoutModel;\n    }\n  }\n\n  return AdaptLayout;\n}\n\n/**\n * <zh/> \n *\n * <en/> Call layout member methods\n * @remarks\n * <zh/>  G6  \\@antv/layout \n *\n * <en/> Provide a common way to call methods on G6 layout and \\@antv/layout layout\n * @param layout - <zh/>  | <en/> Layout instance\n * @param method - <zh/>  | <en/> Method name\n * @param args - <zh/>  | <en/> Arguments\n * @returns <zh/>  | <en/> Return value\n */\nexport function invokeLayoutMethod(layout: BaseLayout, method: string, ...args: unknown[]) {\n  if (method in layout) {\n    return (layout as any)[method](...args);\n  }\n  // invoke AdaptLayout method\n  if ('instance' in layout) {\n    const instance = (layout as any).instance;\n    if (method in instance) return instance[method](...args);\n  }\n  return null;\n}\n\n/**\n * <zh/> \n *\n * <en/> Get layout member properties\n * @param layout - <zh/>  | <en/> Layout instance\n * @param name - <zh/>  | <en/> Property name\n * @returns <zh/>  | <en/> Return value\n */\nexport function getLayoutProperty(layout: BaseLayout, name: string) {\n  if (name in layout) return (layout as any)[name];\n  if ('instance' in layout) {\n    const instance = (layout as any).instance;\n    if (name in instance) return instance[name];\n  }\n  return null;\n}\n", "import type { ID, IElementDragEvent, Point } from '../types';\nimport { idOf } from '../utils/id';\nimport { getLayoutProperty, invokeLayoutMethod } from '../utils/layout';\nimport { print } from '../utils/print';\nimport { add } from '../utils/vector';\nimport type { DragElementOptions } from './drag-element';\nimport { DragElement } from './drag-element';\n\n/**\n * <zh/> \n *\n * <en/> Call d3-force layout to drag element behavior options\n */\nexport interface DragElementForceOptions extends Omit<DragElementOptions, 'animation' | 'dropEffect' | 'shadow'> {\n  /**\n   * <zh/> \n   * - `true`: \n   * - `false`: \n   *\n   * <en/> Whether the node remains in a fixed position after dragging ends\n   * - `true`: After dragging ends, the node's position will remain fixed and will not be affected by the layout algorithm\n   * - `false`: After dragging ends, the node's position will continue to be affected by the layout algorithm\n   */\n  fixed?: boolean;\n}\n\n/**\n * <zh/> \n *\n * <en/> Call d3-force layout to drag element behavior\n * @remarks\n * <zh/>  d3-force \n *\n * <en/> This behavior can only be used with d3-force layout. The layout will be recalculated in real time during dragging.\n */\nexport class DragElementForce extends DragElement {\n  private get forceLayoutInstance() {\n    return this.context.layout!.getLayoutInstance().find((layout) => ['d3-force', 'd3-force-3d'].includes(layout?.id));\n  }\n\n  /**\n   * Whether the behavior is enabled\n   * @param event - The event object\n   * @returns Is the behavior enabled\n   * @internal\n   */\n  protected validate(event: IElementDragEvent): boolean {\n    if (!this.context.layout) return false;\n\n    //  / The force layout is not used\n    if (!this.forceLayoutInstance) {\n      print.warn('DragElementForce only works with d3-force or d3-force-3d layout');\n      return false;\n    }\n\n    return super.validate(event);\n  }\n\n  /**\n   * Move selected elements by offset\n   * @param ids - The selected element IDs\n   * @param offset - The offset to move\n   * @internal\n   */\n  protected async moveElement(ids: ID[], offset: Point) {\n    const layout = this.forceLayoutInstance;\n    this.context.graph.getNodeData(ids).forEach((element, index) => {\n      const { x = 0, y = 0 } = element.style || {};\n      if (layout)\n        invokeLayoutMethod(layout, 'setFixedPosition', ids[index], [...add([+x, +y], this.clampByRotation(offset))]);\n    });\n  }\n\n  /**\n   * Triggered when the drag starts\n   * @param event - The event object\n   * @internal\n   */\n  protected onDragStart(event: IElementDragEvent) {\n    this.enable = this.validate(event);\n    if (!this.enable) return;\n\n    this.target = this.getSelectedNodeIDs([event.target.id]);\n    this.hideEdge();\n    this.context.graph.frontElement(this.target);\n\n    const layout = this.forceLayoutInstance;\n    if (layout) getLayoutProperty(layout, 'simulation').alphaTarget(0.3).restart();\n\n    this.context.graph.getNodeData(this.target).forEach((element) => {\n      const { x = 0, y = 0 } = element.style || {};\n      if (layout) invokeLayoutMethod(layout, 'setFixedPosition', idOf(element), [+x, +y]);\n    });\n  }\n\n  /**\n   * Triggered when dragging\n   * @param event - The event object\n   * @internal\n   */\n  protected onDrag(event: IElementDragEvent) {\n    if (!this.enable) return;\n\n    const delta = this.getDelta(event);\n    this.moveElement(this.target, delta);\n  }\n\n  /**\n   * Triggered when the drag ends\n   * @internal\n   */\n  protected onDragEnd() {\n    const layout = this.forceLayoutInstance;\n    if (layout) getLayoutProperty(layout, 'simulation').alphaTarget(0);\n\n    if (this.options.fixed) return;\n\n    this.context.graph.getNodeData(this.target).forEach((element) => {\n      if (layout) invokeLayoutMethod(layout, 'setFixedPosition', idOf(element), [null, null, null]);\n    });\n  }\n}\n", "import type { DisplayObject } from '@antv/g';\nimport { isEmpty, isFunction, isNumber } from '@antv/util';\nimport { GraphEvent } from '../constants';\nimport type { RuntimeContext } from '../runtime/types';\nimport type { ComboData, EdgeData, NodeData } from '../spec';\nimport type {\n  Combo,\n  Edge,\n  Element,\n  ID,\n  IGraphLifeCycleEvent,\n  IViewportEvent,\n  Node,\n  NodeLikeData,\n  State,\n} from '../types';\nimport { idOf } from '../utils/id';\nimport { getDescendantShapes } from '../utils/shape';\nimport type { BaseBehaviorOptions } from './base-behavior';\nimport { BaseBehavior } from './base-behavior';\n\nexport type FixShapeConfig = {\n  /**\n   * <zh/> \n   *\n   * <en/> Specify the shape to be fixed in size. This can be a class name string of the shape, or a function that takes all shapes composing the element and returns the target shape\n   */\n  shape: string | ((shapes: DisplayObject[]) => DisplayObject);\n  /**\n   * <zh/> \n   *\n   * <en/> Specify the fields of the shape to be fixed in size. If not specified, the entire shape's size will be fixed by default\n   */\n  fields?: string[];\n};\n\n/**\n * <zh/> \n *\n * <en/> Fix element size behavior options\n */\nexport interface FixElementSizeOptions extends BaseBehaviorOptions {\n  /**\n   * <zh/> \n   *\n   * <en/> Whether to enable the fix element size behavior. Enabled by default when zooming out\n   * @remarks\n   * <zh/>  `enable: (event) => event.data.scale < 1` `enable: (event) => event.data.scale > 1` `enable: true`\n   *\n   * <en/> Enabled by default when zooming out, set `enable: (event) => event.data.scale < 1`; If you want to enable it when zooming in, set `enable: (event) => event.data.scale > 1`; If you want to enable it when zooming in and out, set `enable: true`\n   * @defaultValue (event) => Boolean(event.data.scale < 1)\n   */\n  enable?: boolean | ((event: IViewportEvent) => boolean);\n  /**\n   * <zh/> \n   *\n   * <en/> Specify the state of elements to be fixed in size\n   * @defaultValue `'selected'`\n   */\n  state?: State;\n  /**\n   * <zh/> \n   *\n   * <en/> Node filter for filtering which nodes remain fixed in size during zooming\n   * @defaultValue () => true\n   */\n  nodeFilter?: (datum: NodeData) => boolean;\n  /**\n   * <zh/> \n   *\n   * <en/> Edge filter for filtering which edges remain fixed in size during zooming\n   * @defaultValue () => true\n   */\n  edgeFilter?: (datum: EdgeData) => boolean;\n  /**\n   * <zh/> Combo  Combo \n   *\n   * <en/> Combo filter for filtering which combos remain fixed in size during zooming\n   * @defaultValue () => true\n   */\n  comboFilter?: (datum: ComboData) => boolean;\n  /**\n   * <zh/>  undefined\n   *\n   * <en/> Node configuration for defining which node attributes should remain fixed in size visually. If not specified (i.e., undefined), the entire node will be fixed in size.\n   * @example\n   * <zh/>  lineWidth\n   *\n   * <en/> If you want to fix the lineWidth of the key shape of the node during zooming, you can configure it like this:\n   * ```ts\n   * { node: [{ shape: 'key', fields: ['lineWidth'] }] }\n   *```\n   * <zh/> \n   *\n   * <en/> If you want to keep the label size of the element unchanged during zooming, you can configure it like this:\n   * ```ts\n   *  { shape: 'label' }\n   * ```\n   */\n  node?: FixShapeConfig | FixShapeConfig[];\n  /**\n   * <zh/>  lineWidthlabelFontSize \n   *\n   * <en/> Edge configuration for defining which edge attributes should remain fixed in size visually. By default, the lineWidth and labelFontSize attributes are fixed\n   * @defaultValue [{ shape: 'key', fields: ['lineWidth'] }, { shape: 'halo', fields: ['lineWidth'] }, { shape: 'label' }]\n   */\n  edge?: FixShapeConfig | FixShapeConfig[];\n  /**\n   * <zh/> Combo  Combo \n   *\n   * <en/> Combo configuration for defining which combo attributes should remain fixed in size visually. By default, the entire combo will be fixed\n   */\n  combo?: FixShapeConfig | FixShapeConfig[];\n  /**\n   * <zh/> \n   *\n   * <en/> Whether to reset styles when elements are redrawn\n   * @defaultValue false\n   */\n  reset?: boolean;\n}\n\n/**\n * <zh/> \n *\n * <en/> Fix element size while zooming\n */\nexport class FixElementSize extends BaseBehavior<FixElementSizeOptions> {\n  static defaultOptions: Partial<FixElementSizeOptions> = {\n    enable: (event: IViewportEvent) => event.data.scale! < 1,\n    nodeFilter: () => true,\n    edgeFilter: () => true,\n    comboFilter: () => true,\n    edge: [{ shape: 'key', fields: ['lineWidth'] }, { shape: 'halo', fields: ['lineWidth'] }, { shape: 'label' }],\n    reset: false,\n  };\n\n  constructor(context: RuntimeContext, options: FixElementSizeOptions) {\n    super(context, Object.assign({}, FixElementSize.defaultOptions, options));\n    this.bindEvents();\n  }\n\n  private isZoomEvent = (event: IViewportEvent) => Boolean(event.data && 'scale' in event.data);\n\n  private relatedEdgeToUpdate: Set<ID> = new Set();\n\n  private zoom = this.context.graph.getZoom();\n\n  private fixElementSize = async (event: IViewportEvent) => {\n    if (!this.validate(event)) return;\n\n    const { graph } = this.context;\n    const { state, nodeFilter, edgeFilter, comboFilter } = this.options;\n\n    const nodeData = (state ? graph.getElementDataByState('node', state) : graph.getNodeData()).filter(nodeFilter);\n    const edgeData = (state ? graph.getElementDataByState('edge', state) : graph.getEdgeData()).filter(edgeFilter);\n    const comboData = (state ? graph.getElementDataByState('combo', state) : graph.getComboData()).filter(comboFilter);\n\n    //  | Set the threshold to prevent jitter when too large or too small\n    const currentScale = this.isZoomEvent(event)\n      ? (this.zoom = Math.max(0.01, Math.min(event.data.scale!, 10)))\n      : this.zoom;\n\n    const nodeLikeData = [...nodeData, ...comboData];\n    if (nodeLikeData.length > 0) {\n      nodeLikeData.forEach((datum) => this.fixNodeLike(datum, currentScale));\n    }\n\n    this.updateRelatedEdges();\n\n    if (edgeData.length > 0) {\n      edgeData.forEach((datum) => this.fixEdge(datum, currentScale));\n    }\n  };\n\n  private cachedStyles: Map<ID, { shape: DisplayObject; [field: string]: any }[]> = new Map();\n\n  private getOriginalFieldValue = (id: ID, shape: DisplayObject, field: string) => {\n    const shapesStyle = this.cachedStyles.get(id) || [];\n    const shapeStyle = shapesStyle.find((style) => style.shape === shape)?.style || {};\n    if (!(field in shapeStyle)) {\n      shapeStyle[field] = shape.attributes[field];\n      this.cachedStyles.set(id, [\n        ...shapesStyle.filter((style) => style.shape !== shape),\n        { shape, style: shapeStyle },\n      ]);\n    }\n    return shapeStyle[field];\n  };\n\n  private scaleEntireElement = (id: ID, el: DisplayObject, currentScale: number) => {\n    el.setLocalScale(1 / currentScale);\n    const shapesStyle = this.cachedStyles.get(id) || [];\n    shapesStyle.push({ shape: el });\n    this.cachedStyles.set(id, shapesStyle);\n  };\n\n  private scaleSpecificShapes = (el: Element, currentScale: number, config: FixShapeConfig | FixShapeConfig[]) => {\n    const descendantShapes = getDescendantShapes(el);\n    const configs = Array.isArray(config) ? config : [config];\n\n    configs.forEach((config: FixShapeConfig) => {\n      const { shape: shapeFilter, fields } = config;\n      const shape = typeof shapeFilter === 'function' ? shapeFilter(descendantShapes) : el.getShape(shapeFilter);\n\n      if (!shape) return;\n      if (!fields) {\n        this.scaleEntireElement(el.id, shape, currentScale);\n        return;\n      }\n\n      fields.forEach((field) => {\n        const oriFieldValue = this.getOriginalFieldValue(el.id, shape, field);\n        if (!isNumber(oriFieldValue)) return;\n        shape.style[field] = oriFieldValue / currentScale;\n      });\n    });\n  };\n\n  private skipIfExceedViewport = (el: Element) => {\n    const { viewport } = this.context;\n    return !viewport?.isInViewport(el.getRenderBounds(), false, 30);\n  };\n\n  private fixNodeLike = (datum: NodeLikeData, currentScale: number) => {\n    const id = idOf(datum);\n    const { element, model } = this.context;\n    const el = element!.getElement(id) as Node | Combo;\n\n    if (!el || this.skipIfExceedViewport(el)) return;\n\n    const edges = model.getRelatedEdgesData(id);\n    edges.forEach((edge) => this.relatedEdgeToUpdate.add(idOf(edge)));\n\n    const config = this.options[(el as any).type];\n    if (!config) {\n      this.scaleEntireElement(id, el, currentScale);\n      return;\n    }\n    this.scaleSpecificShapes(el, currentScale, config);\n  };\n\n  private fixEdge = (datum: EdgeData, currentScale: number) => {\n    const id = idOf(datum);\n    const el = this.context.element!.getElement(id) as Edge;\n\n    if (!el || this.skipIfExceedViewport(el)) return;\n\n    const config = this.options.edge;\n    if (!config) {\n      el.style.transformOrigin = 'center';\n      this.scaleEntireElement(id, el, currentScale);\n      return;\n    }\n    this.scaleSpecificShapes(el, currentScale, config);\n  };\n\n  private updateRelatedEdges = () => {\n    const { element } = this.context;\n    if (this.relatedEdgeToUpdate.size > 0) {\n      this.relatedEdgeToUpdate.forEach((id) => {\n        const edge = element!.getElement(id) as Edge;\n        edge?.update({});\n      });\n    }\n    this.relatedEdgeToUpdate.clear();\n  };\n\n  private restoreCachedStyles() {\n    if (this.cachedStyles.size > 0) {\n      this.cachedStyles.forEach((shapesStyle) => {\n        shapesStyle.forEach(({ shape, style }) => {\n          if (isEmpty(style)) {\n            shape.setLocalScale(1);\n          } else {\n            if (this.options.state) return;\n            Object.entries(style).forEach(([field, value]) => (shape.style[field] = value));\n          }\n        });\n      });\n      const { graph, element } = this.context;\n      const nodeIds = Object.keys(Object.fromEntries(this.cachedStyles)).filter(\n        (id) => id && graph.getElementType(id) === 'node',\n      );\n      if (nodeIds.length > 0) {\n        const edgeIds = new Set<ID>();\n        nodeIds.forEach((id) => {\n          graph.getRelatedEdgesData(id).forEach((edge) => edgeIds.add(idOf(edge)));\n        });\n        edgeIds.forEach((id) => {\n          const edge = element?.getElement(id) as Edge;\n          edge?.update({});\n        });\n      }\n    }\n    // this.cachedStyles.clear();\n  }\n\n  private resetTransform = async (event: IGraphLifeCycleEvent) => {\n    //  | Skip when rendering the first screen\n    if (event.data?.firstRender) return;\n\n    if (this.options.reset) {\n      this.restoreCachedStyles();\n    } else {\n      this.fixElementSize({ data: { scale: this.zoom } } as IViewportEvent);\n    }\n  };\n\n  private bindEvents() {\n    const { graph } = this.context;\n    graph.on(GraphEvent.AFTER_DRAW, this.resetTransform);\n    graph.on(GraphEvent.AFTER_TRANSFORM, this.fixElementSize);\n  }\n\n  private unbindEvents() {\n    const { graph } = this.context;\n    graph.off(GraphEvent.AFTER_DRAW, this.resetTransform);\n    graph.off(GraphEvent.AFTER_TRANSFORM, this.fixElementSize);\n  }\n\n  private validate(event: IViewportEvent) {\n    if (this.destroyed) return false;\n    const { enable } = this.options;\n    if (isFunction(enable)) return enable(event);\n    return !!enable;\n  }\n\n  public destroy(): void {\n    this.unbindEvents();\n    super.destroy();\n  }\n}\n", "import { isFunction } from '@antv/util';\nimport { CommonEvent } from '../constants';\nimport { ELEMENT_TYPES } from '../constants/element';\nimport type { RuntimeContext } from '../runtime/types';\nimport type { IElementEvent, ViewportAnimationEffectTiming } from '../types';\nimport { Shortcut, ShortcutKey } from '../utils/shortcut';\nimport type { BaseBehaviorOptions } from './base-behavior';\nimport { BaseBehavior } from './base-behavior';\n\n/**\n * <zh/> \n *\n * <en/> Focus element behavior options\n */\nexport interface FocusElementOptions extends BaseBehaviorOptions {\n  /**\n   * <zh/> \n   *\n   * <en/> Whether to enable animation\n   */\n  animation?: ViewportAnimationEffectTiming;\n  /**\n   * <zh/> \n   *\n   * <en/> Whether to enable the function of focusing on the element\n   * @defaultValue true\n   */\n  enable?: boolean | ((event: IElementEvent) => boolean);\n  /**\n   * <zh/> \n   * \n   *\n   * <en/> The shortcut key to trigger focus\n   * Focus can only be triggered when the element is clicked while the key combination is pressed.\n   */\n  trigger?: ShortcutKey;\n}\n\n/**\n * <zh/> \n *\n * <en/> Focus element behavior\n * @remarks\n * <zh/> \n *\n * <en/> When an element is clicked, the element is focused to the center of the view.\n */\nexport class FocusElement extends BaseBehavior<FocusElementOptions> {\n  static defaultOptions: Partial<FocusElementOptions> = {\n    animation: {\n      easing: 'ease-in',\n      duration: 500,\n    },\n    enable: true,\n    trigger: [],\n  };\n\n  private shortcut: Shortcut;\n\n  constructor(context: RuntimeContext, options: FocusElementOptions) {\n    super(context, Object.assign({}, FocusElement.defaultOptions, options));\n    this.shortcut = new Shortcut(context.graph);\n    this.bindEvents();\n  }\n\n  private bindEvents() {\n    const { graph } = this.context;\n    this.unbindEvents();\n\n    ELEMENT_TYPES.forEach((type) => {\n      graph.on(`${type}:${CommonEvent.CLICK}`, this.focus);\n    });\n  }\n\n  private focus = async (event: IElementEvent) => {\n    if (!this.validate(event)) return;\n    const { graph } = this.context;\n\n    await graph.focusElement(event.target.id, this.options.animation);\n  };\n\n  private validate(event: IElementEvent) {\n    if (this.destroyed || !this.isKeydown()) return false;\n    const { enable } = this.options;\n    if (isFunction(enable)) return enable(event);\n    return !!enable;\n  }\n\n  /**\n   * <zh/>  trigger \n   *\n   * <en/> Is the current key consistent with the trigger configuration\n   * @returns <zh/>  | <en/> Is consistent\n   * @internal\n   */\n  private isKeydown(): boolean {\n    const { trigger } = this.options;\n    if (!trigger?.length) return true;\n    return this.shortcut.match(trigger);\n  }\n\n  private unbindEvents() {\n    const { graph } = this.context;\n\n    ELEMENT_TYPES.forEach((type) => {\n      graph.off(`${type}:${CommonEvent.CLICK}`, this.focus);\n    });\n  }\n\n  public destroy() {\n    this.unbindEvents();\n    this.shortcut.destroy();\n    super.destroy();\n  }\n}\n", "import { isFunction } from '@antv/util';\nimport { CommonEvent } from '../constants';\nimport { ELEMENT_TYPES } from '../constants/element';\nimport type { RuntimeContext } from '../runtime/types';\nimport type { EdgeDirection, Element, ElementType, ID, IDragEvent, IPointerEvent, State } from '../types';\nimport { isToBeDestroyed } from '../utils/element';\nimport { idsOf } from '../utils/id';\nimport { getElementNthDegreeIds } from '../utils/relation';\nimport type { BaseBehaviorOptions } from './base-behavior';\nimport { BaseBehavior } from './base-behavior';\n\n/**\n * <zh/> \n *\n * <en/> Hover element behavior options\n */\nexport interface HoverActivateOptions extends BaseBehaviorOptions {\n  /**\n   * <zh/> \n   *\n   * <en/> Whether to enable animation\n   * @defaultValue true\n   */\n  animation?: boolean;\n  /**\n   * <zh/> \n   *\n   * <en/> Whether to enable hover element function\n   * @defaultValue true\n   */\n  enable?: boolean | ((event: IPointerEvent) => boolean);\n  /**\n   * <zh/> n\n   * -  `0`\n   * - `1` \n   *\n   * <en/> N-degree relationship of the hovered element\n   * - default to `0`, which means only the current node is activated\n   * - `1` means the current node and its directly adjacent nodes and edges are activated, etc\n   * @defaultValue 0\n   */\n  degree?: number | ((event: IPointerEvent) => number);\n  /**\n   * <zh/> \n   * - `'both'`: \n   * - `'in'`: \n   * - `'out'`: \n   *\n   * <en/> Specify the direction of the edge\n   * - `'both'`: Activate all relationships of the current node\n   * - `'in'`: Activate the incoming edges and nodes of the current node\n   * - `'out'`: Activate the outgoing edges and nodes of the current node\n   * @defaultValue 'both'\n   */\n  direction?: EdgeDirection;\n  /**\n   * <zh/>  `active`\n   *\n   * <en/> Active element state, default to`active`\n   * @defaultValue 'active'\n   */\n  state?: State;\n  /**\n   * <zh/> \n   *\n   * <en/> Inactive element state, default to no change\n   */\n  inactiveState?: State;\n  /**\n   * <zh/> \n   *\n   * <en/> Callback when the element is hovered\n   */\n  onHover?: (event: IPointerEvent) => void;\n  /**\n   * <zh/> \n   *\n   * <en/> Callback when the hover ends\n   */\n  onHoverEnd?: (event: IPointerEvent) => void;\n}\n\n/**\n * <zh/> \n *\n * <en/> Hover element behavior\n * @remarks\n * <zh/> \n *\n * <en/> When the mouse hovers over an element, you can activate the state of the element, such as highlighting nodes or edges.\n */\nexport class HoverActivate extends BaseBehavior<HoverActivateOptions> {\n  static defaultOptions: Partial<HoverActivateOptions> = {\n    animation: false,\n    enable: true,\n    degree: 0,\n    direction: 'both',\n    state: 'active',\n    inactiveState: undefined,\n  };\n\n  private isFrozen = false;\n\n  constructor(context: RuntimeContext, options: HoverActivateOptions) {\n    super(context, Object.assign({}, HoverActivate.defaultOptions, options));\n    this.bindEvents();\n  }\n\n  private toggleFrozen = (e: IDragEvent) => {\n    this.isFrozen = e.type === 'dragstart';\n  };\n\n  private bindEvents() {\n    const { graph } = this.context;\n    this.unbindEvents();\n\n    ELEMENT_TYPES.forEach((type) => {\n      graph.on(`${type}:${CommonEvent.POINTER_ENTER}`, this.hoverElement);\n      graph.on(`${type}:${CommonEvent.POINTER_LEAVE}`, this.hoverElement);\n    });\n\n    const canvas = this.context.canvas.document;\n    canvas.addEventListener(`${CommonEvent.DRAG_START}`, this.toggleFrozen);\n    canvas.addEventListener(`${CommonEvent.DRAG_END}`, this.toggleFrozen);\n  }\n\n  private hoverElement = (event: IPointerEvent<Element>) => {\n    if (!this.validate(event)) return;\n    const isEnter = event.type === CommonEvent.POINTER_ENTER;\n    this.updateElementsState(event, isEnter);\n\n    const { onHover, onHoverEnd } = this.options;\n    if (isEnter) onHover?.(event);\n    else onHoverEnd?.(event);\n  };\n\n  protected getActiveIds(event: IPointerEvent<Element>) {\n    const { graph } = this.context;\n    const { degree, direction } = this.options;\n    const elementId = event.target.id;\n\n    return degree\n      ? getElementNthDegreeIds(\n          graph,\n          event.targetType as ElementType,\n          elementId,\n          typeof degree === 'function' ? degree(event) : degree,\n          direction,\n        )\n      : [elementId];\n  }\n\n  private updateElementsState = (event: IPointerEvent<Element>, add: boolean) => {\n    if (!this.options.state && !this.options.inactiveState) return;\n\n    const { graph } = this.context;\n    const { state, animation, inactiveState } = this.options;\n\n    const activeIds = this.getActiveIds(event);\n    const states: Record<ID, State[]> = {};\n\n    if (state) {\n      Object.assign(states, this.getElementsState(activeIds, state, add));\n    }\n\n    if (inactiveState) {\n      const inactiveIds = idsOf(graph.getData(), true).filter((id) => !activeIds.includes(id));\n      Object.assign(states, this.getElementsState(inactiveIds, inactiveState, add));\n    }\n    graph.setElementState(states, animation);\n  };\n\n  private getElementsState = (ids: ID[], state: State, add: boolean) => {\n    const { graph } = this.context;\n    const states: Record<ID, State[]> = {};\n    ids.forEach((id) => {\n      const currentState = graph.getElementState(id);\n      if (add) {\n        states[id] = currentState.includes(state) ? currentState : [...currentState, state];\n      } else {\n        states[id] = currentState.filter((s) => s !== state);\n      }\n    });\n    return states;\n  };\n\n  private validate(event: IPointerEvent<Element>) {\n    if (\n      this.destroyed ||\n      this.isFrozen ||\n      isToBeDestroyed(event.target) ||\n      // @ts-expect-error private property\n      // combo/node\n      this.context.graph.isCollapsingExpanding\n    )\n      return false;\n    const { enable } = this.options;\n    if (isFunction(enable)) return enable(event);\n    return !!enable;\n  }\n\n  private unbindEvents() {\n    const { graph } = this.context;\n\n    ELEMENT_TYPES.forEach((type) => {\n      graph.off(`${type}:${CommonEvent.POINTER_ENTER}`, this.hoverElement);\n      graph.off(`${type}:${CommonEvent.POINTER_LEAVE}`, this.hoverElement);\n    });\n\n    const canvas = this.context.canvas.document;\n    canvas.removeEventListener(`${CommonEvent.DRAG_START}`, this.toggleFrozen);\n    canvas.removeEventListener(`${CommonEvent.DRAG_END}`, this.toggleFrozen);\n  }\n\n  public destroy() {\n    this.unbindEvents();\n    super.destroy();\n  }\n}\n", "import { Path } from '@antv/g';\nimport type { IPointerEvent, Point } from '../types';\nimport { pointsToPath } from '../utils/path';\nimport type { BrushSelectOptions } from './brush-select';\nimport { BrushSelect, getCursorPoint } from './brush-select';\n\n/**\n * <zh/> \n *\n * <en/> Lasso select behavior options\n */\nexport interface LassoSelectOptions extends BrushSelectOptions {}\n\n/**\n * <zh/> \n *\n * <en/> Lasso select behavior\n * @remarks\n * <zh/> \n *\n * <en/> Select a group of elements with an irregular polygon.\n */\nexport class LassoSelect extends BrushSelect {\n  private points?: Point[];\n  private pathShape?: Path;\n\n  /**\n   * Triggered when the mouse is pressed\n   * @param event - mouse event\n   * @internal\n   */\n  protected onPointerDown(event: IPointerEvent) {\n    if (!super.validate(event) || !super.isKeydown() || this.points) return;\n    const { canvas, graph } = this.context;\n\n    this.pathShape = new Path({\n      id: 'g6-lasso-select',\n      style: this.options.style,\n    });\n\n    canvas.appendChild(this.pathShape);\n\n    this.points = [getCursorPoint(event, graph)];\n  }\n\n  /**\n   * Triggered when the mouse is moved\n   * @param event - mouse event\n   * @internal\n   */\n  protected onPointerMove(event: IPointerEvent) {\n    if (!this.points) return;\n    const { immediately, mode } = this.options;\n\n    this.points.push(getCursorPoint(event, this.context.graph));\n\n    this.pathShape?.setAttribute('d', pointsToPath(this.points));\n\n    if (immediately && mode === 'default' && this.points.length > 2) super.updateElementsStates(this.points);\n  }\n\n  /**\n   * Triggered when the mouse is released\n   * @internal\n   */\n  protected onPointerUp() {\n    if (!this.points) return;\n    if (this.points.length < 2) {\n      this.clearLasso();\n      return;\n    }\n    super.updateElementsStates(this.points);\n\n    this.clearLasso();\n  }\n\n  private clearLasso() {\n    this.pathShape?.remove();\n    this.pathShape = undefined;\n    this.points = undefined;\n  }\n}\n", "import type { BaseStyleProps, DisplayObject } from '@antv/g';\nimport { debounce, isFunction } from '@antv/util';\nimport { GraphEvent } from '../constants';\nimport type { RuntimeContext } from '../runtime/types';\nimport type { ElementType } from '../types';\nimport type { IViewportEvent } from '../types/event';\nimport { setVisibility } from '../utils/visibility';\nimport type { BaseBehaviorOptions } from './base-behavior';\nimport { BaseBehavior } from './base-behavior';\n\n/**\n * <zh/> \n *\n * <en/> Canvas optimization behavior options\n */\nexport interface OptimizeViewportTransformOptions extends BaseBehaviorOptions {\n  /**\n   * <zh/> \n   *\n   * <en/> Whether to enable canvas optimization function\n   * @defaultValue true\n   */\n  enable?: boolean | ((event: IViewportEvent) => boolean);\n  /**\n   * <zh/> \n   *\n   * <en/> Specify the shapes that are always visible. After applying this interaction, only the shapes specified by this property will remain visible during the canvas operation, and the rest of the shapes will be hidden to improve rendering performance. By default, nodes are always visible, while other shapes are automatically hidden during canvas operations\n   */\n  shapes?:\n    | { node?: string[]; edge?: string[]; combo?: string[] }\n    | ((type: ElementType, shape: DisplayObject) => boolean);\n  /**\n   * <zh/> \n   *\n   * <en/> Set debounce time\n   * @defaultValue 200\n   */\n  debounce?: number;\n}\n\n/**\n * <zh/> \n *\n * <en/> Hide elements during canvas operations (dragging, zooming, scrolling)\n */\nexport class OptimizeViewportTransform extends BaseBehavior<OptimizeViewportTransformOptions> {\n  static defaultOptions: Partial<OptimizeViewportTransformOptions> = {\n    enable: true,\n    debounce: 200,\n    shapes: (type: ElementType) => type === 'node',\n  };\n\n  private hiddenShapes: DisplayObject[] = [];\n\n  private isVisible: boolean = true;\n\n  constructor(context: RuntimeContext, options: OptimizeViewportTransformOptions) {\n    super(context, Object.assign({}, OptimizeViewportTransform.defaultOptions, options));\n    this.bindEvents();\n  }\n\n  private setElementsVisibility = (\n    elements: DisplayObject[],\n    visibility: BaseStyleProps['visibility'],\n    filter?: (shape: DisplayObject) => boolean,\n  ) => {\n    elements.filter(Boolean).forEach((element) => {\n      if (visibility === 'hidden' && !element.isVisible()) {\n        this.hiddenShapes.push(element);\n      } else if (visibility === 'visible' && this.hiddenShapes.includes(element)) {\n        this.hiddenShapes.splice(this.hiddenShapes.indexOf(element), 1);\n      } else {\n        setVisibility(element, visibility, filter);\n      }\n    });\n  };\n\n  private filterShapes = (type: ElementType, filter: OptimizeViewportTransformOptions['shapes']) => {\n    if (isFunction(filter)) return (shape: DisplayObject) => !filter(type, shape);\n    const includesClassnames = filter?.[type];\n    return (shape: DisplayObject) => {\n      if (!shape.className) return true;\n      return !includesClassnames?.includes(shape.className);\n    };\n  };\n\n  private hideShapes = (event: IViewportEvent) => {\n    if (!this.validate(event) || !this.isVisible) return;\n\n    const { element } = this.context;\n    const { shapes = {} } = this.options;\n    this.setElementsVisibility(element!.getNodes(), 'hidden', this.filterShapes('node', shapes));\n    this.setElementsVisibility(element!.getEdges(), 'hidden', this.filterShapes('edge', shapes));\n    this.setElementsVisibility(element!.getCombos(), 'hidden', this.filterShapes('combo', shapes));\n    this.isVisible = false;\n  };\n\n  private showShapes = debounce((event: IViewportEvent) => {\n    if (!this.validate(event) || this.isVisible) return;\n\n    const { element } = this.context;\n    this.setElementsVisibility(element!.getNodes(), 'visible');\n    this.setElementsVisibility(element!.getEdges(), 'visible');\n    this.setElementsVisibility(element!.getCombos(), 'visible');\n    this.isVisible = true;\n  }, this.options.debounce);\n\n  private bindEvents() {\n    const { graph } = this.context;\n\n    graph.on(GraphEvent.BEFORE_TRANSFORM, this.hideShapes);\n    graph.on(GraphEvent.AFTER_TRANSFORM, this.showShapes);\n  }\n\n  private unbindEvents() {\n    const { graph } = this.context;\n\n    graph.off(GraphEvent.BEFORE_TRANSFORM, this.hideShapes);\n    graph.off(GraphEvent.AFTER_TRANSFORM, this.showShapes);\n  }\n\n  private validate(event: IViewportEvent) {\n    if (this.destroyed) return false;\n\n    const { enable } = this.options;\n    if (isFunction(enable)) return enable(event);\n    return !!enable;\n  }\n\n  public update(options: Partial<OptimizeViewportTransformOptions>) {\n    this.unbindEvents();\n    super.update(options);\n    this.bindEvents();\n  }\n\n  public destroy() {\n    this.unbindEvents();\n    super.destroy();\n  }\n}\n", "import { isFunction, isObject } from '@antv/util';\nimport { CommonEvent } from '../constants';\nimport type { RuntimeContext } from '../runtime/types';\nimport type { IKeyboardEvent, Point } from '../types';\nimport { getExpandedBBox, getPointBBox, isPointInBBox } from '../utils/bbox';\nimport { parsePadding } from '../utils/padding';\nimport { Shortcut, ShortcutKey } from '../utils/shortcut';\nimport { multiply, subtract } from '../utils/vector';\nimport type { BaseBehaviorOptions } from './base-behavior';\nimport { BaseBehavior } from './base-behavior';\n\n/**\n * <zh/> \n *\n * <en/> Scroll canvas behavior options\n */\nexport interface ScrollCanvasOptions extends BaseBehaviorOptions {\n  /**\n   * <zh/> \n   *\n   * <en/> Whether to enable the function of scrolling the canvas\n   * @defaultValue true\n   */\n  enable?: boolean | ((event: WheelEvent | IKeyboardEvent) => boolean);\n  /**\n   * <zh/> \n   *\n   * <en/> The way to trigger scrolling, default to scrolling with the pointer pressed\n   */\n  trigger?: {\n    up: ShortcutKey;\n    down: ShortcutKey;\n    left: ShortcutKey;\n    right: ShortcutKey;\n  };\n  /**\n   * <zh/> \n   * - \n   * - `'x'` : \n   * - `'y'` : \n   *\n   * <en/> The allowed rolling direction\n   * - by default, there is no restriction\n   * - `'x'`: only allow horizontal scrolling\n   * - `'y'`: only allow vertical scrolling\n   */\n  direction?: 'x' | 'y';\n  /**\n   * <zh/>  [0, Infinity] \n   *\n   * <en/> The scrollable viewport range allows you to scroll up to one screen by default. You can set the range for each direction (top, right, bottom, left) individually, with each direction's range between [0, Infinity]\n   * @defaultValue 1\n   */\n  range?: number | number[];\n  /**\n   * <zh/> \n   *\n   * <en/> Scroll sensitivity\n   * @defaultValue 1\n   */\n  sensitivity?: number;\n  /**\n   * <zh/> \n   *\n   * <en/> Callback when scrolling is completed\n   */\n  onFinish?: () => void;\n  /**\n   * <zh/> \n   *\n   * <en/> Whether to prevent the default event\n   * @defaultValue true\n   */\n  preventDefault?: boolean;\n}\n\n/**\n * <zh/> \n *\n * <en/> Scroll canvas behavior\n */\nexport class ScrollCanvas extends BaseBehavior<ScrollCanvasOptions> {\n  static defaultOptions: Partial<ScrollCanvasOptions> = {\n    enable: true,\n    sensitivity: 1,\n    preventDefault: true,\n    range: Infinity,\n  };\n\n  private shortcut: Shortcut;\n\n  constructor(context: RuntimeContext, options: ScrollCanvasOptions) {\n    super(context, Object.assign({}, ScrollCanvas.defaultOptions, options));\n\n    this.shortcut = new Shortcut(context.graph);\n\n    this.bindEvents();\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Update options\n   * @param options - <zh/>  | <en/> Options\n   * @internal\n   */\n  public update(options: Partial<ScrollCanvasOptions>): void {\n    super.update(options);\n    this.bindEvents();\n  }\n\n  private bindEvents() {\n    const { trigger } = this.options;\n    this.shortcut.unbindAll();\n    if (isObject(trigger)) {\n      this.graphDom?.removeEventListener(CommonEvent.WHEEL, this.onWheel);\n      const { up = [], down = [], left = [], right = [] } = trigger;\n\n      this.shortcut.bind(up, (event) => this.scroll([0, -10], event));\n      this.shortcut.bind(down, (event) => this.scroll([0, 10], event));\n      this.shortcut.bind(left, (event) => this.scroll([-10, 0], event));\n      this.shortcut.bind(right, (event) => this.scroll([10, 0], event));\n    } else {\n      /**\n       * canvaswheel\n       * https://g.antv.antgroup.com/api/event/faq#%E5%9C%A8-chrome-%E4%B8%AD%E7%A6%81%E6%AD%A2%E9%A1%B5%E9%9D%A2%E9%BB%98%E8%AE%A4%E6%BB%9A%E5%8A%A8%E8%A1%8C%E4%B8%BA\n       */\n      this.graphDom?.addEventListener(CommonEvent.WHEEL, this.onWheel, { passive: false });\n    }\n  }\n\n  get graphDom() {\n    return this.context.graph.getCanvas().getContextService().getDomElement();\n  }\n\n  private onWheel = async (event: WheelEvent) => {\n    if (this.options.preventDefault) event.preventDefault();\n    const diffX = event.deltaX;\n    const diffY = event.deltaY;\n\n    await this.scroll([-diffX, -diffY], event);\n  };\n\n  private formatDisplacement(d: Point) {\n    const { sensitivity } = this.options;\n\n    d = multiply(d, sensitivity);\n    d = this.clampByDirection(d);\n    d = this.clampByRange(d);\n\n    return d;\n  }\n\n  private clampByDirection([dx, dy]: Point) {\n    const { direction } = this.options;\n    if (direction === 'x') {\n      dy = 0;\n    } else if (direction === 'y') {\n      dx = 0;\n    }\n    return [dx, dy] as Point;\n  }\n\n  private clampByRange([dx, dy]: Point) {\n    const { viewport, canvas } = this.context;\n\n    const [canvasWidth, canvasHeight] = canvas.getSize();\n    const [top, right, bottom, left] = parsePadding(this.options.range);\n    const range = [canvasHeight * top, canvasWidth * right, canvasHeight * bottom, canvasWidth * left];\n    const scrollableArea = getExpandedBBox(getPointBBox(viewport!.getCanvasCenter()), range);\n\n    const nextViewportCenter = subtract(viewport!.getViewportCenter(), [dx, dy, 0]);\n    if (!isPointInBBox(nextViewportCenter, scrollableArea)) {\n      const {\n        min: [minX, minY],\n        max: [maxX, maxY],\n      } = scrollableArea;\n\n      if ((nextViewportCenter[0] < minX && dx > 0) || (nextViewportCenter[0] > maxX && dx < 0)) {\n        dx = 0;\n      }\n      if ((nextViewportCenter[1] < minY && dy > 0) || (nextViewportCenter[1] > maxY && dy < 0)) {\n        dy = 0;\n      }\n    }\n    return [dx, dy] as Point;\n  }\n\n  private async scroll(value: Point, event: WheelEvent | IKeyboardEvent) {\n    if (!this.validate(event)) return;\n    const { onFinish } = this.options;\n    const graph = this.context.graph;\n    const formattedValue = this.formatDisplacement(value);\n    await graph.translateBy(formattedValue, false);\n    onFinish?.();\n  }\n\n  private validate(event: WheelEvent | IKeyboardEvent) {\n    if (this.destroyed) return false;\n\n    const { enable } = this.options;\n    if (isFunction(enable)) return enable(event);\n    return !!enable;\n  }\n  /**\n   * <zh/> \n   *\n   * <en/> Destroy the canvas scrolling\n   */\n  public destroy(): void {\n    this.shortcut.destroy();\n    this.graphDom?.removeEventListener(CommonEvent.WHEEL, this.onWheel);\n    super.destroy();\n  }\n}\n", "import { clamp, isFunction } from '@antv/util';\nimport { CommonEvent } from '../constants';\nimport type { RuntimeContext } from '../runtime/types';\nimport type {\n  IKeyboardEvent,\n  IPointerEvent,\n  IWheelEvent,\n  Point,\n  PointObject,\n  ViewportAnimationEffectTiming,\n} from '../types';\nimport { parsePoint } from '../utils/point';\nimport type { ShortcutKey } from '../utils/shortcut';\nimport { Shortcut } from '../utils/shortcut';\nimport type { BaseBehaviorOptions } from './base-behavior';\nimport { BaseBehavior } from './base-behavior';\n\n/**\n * <zh/> \n *\n * <en/> Zoom canvas behavior options\n */\nexport interface ZoomCanvasOptions extends BaseBehaviorOptions {\n  /**\n   * <zh/> \n   *\n   * <en/> Whether to enable the animation of zooming\n   * @defaultValue '{ duration: 200 }'\n   */\n  animation?: ViewportAnimationEffectTiming;\n  /**\n   * <zh/> \n   *\n   * <en/> Whether to enable the function of zooming the canvas\n   * @defaultValue true\n   */\n  enable?: boolean | ((event: IWheelEvent | IKeyboardEvent | IPointerEvent) => boolean);\n  /**\n   * <zh/> ()\n   * - \n   *\n   * <en/> zoom center(viewport coordinates)\n   * - by default , the center is the mouse position center\n   */\n  origin?: Point;\n  /**\n   * <zh/> \n   * - ShortcutKey****['Control']  Control \n   * - CombinationKey { zoomIn: ['Control', '+'], zoomOut: ['Control', '-'], reset: ['Control', '0'] }\n   *\n   * <en/> The way to trigger zoom\n   * - ShortcutKey: Combination shortcut key, **default to zoom with the mouse wheel**, ['Control'] means zooming when holding down the Control key and scrolling the mouse wheel\n   * - CombinationKey: Zoom shortcut key, such as { zoomIn: ['Control', '+'], zoomOut: ['Control', '-'], reset: ['Control', '0'] }\n   */\n  trigger?:\n    | ShortcutKey\n    | {\n        zoomIn: ShortcutKey;\n        zoomOut: ShortcutKey;\n        reset: ShortcutKey;\n      };\n  /**\n   * <zh/> \n   *\n   * <en/> Zoom sensitivity\n   * @defaultValue 1\n   */\n  sensitivity?: number;\n  /**\n   * <zh/> \n   *\n   * <en/> Callback when zooming is completed\n   */\n  onFinish?: () => void;\n  /**\n   * <zh/> \n   *\n   * <en/> Whether to prevent the default event\n   * @defaultValue true\n   */\n  preventDefault?: boolean;\n}\n\n/**\n * <zh/> \n *\n * <en/> Zoom canvas behavior\n */\nexport class ZoomCanvas extends BaseBehavior<ZoomCanvasOptions> {\n  static defaultOptions: Partial<ZoomCanvasOptions> = {\n    animation: { duration: 200 },\n    enable: true,\n    sensitivity: 1,\n    trigger: [],\n    preventDefault: true,\n  };\n\n  private shortcut: Shortcut;\n\n  constructor(context: RuntimeContext, options: ZoomCanvasOptions) {\n    super(context, Object.assign({}, ZoomCanvas.defaultOptions, options));\n\n    this.shortcut = new Shortcut(context.graph);\n\n    this.bindEvents();\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Update options\n   * @param options - <zh/>  | <en/> Options\n   * @internal\n   */\n  public update(options: Partial<ZoomCanvasOptions>): void {\n    super.update(options);\n    this.bindEvents();\n  }\n\n  private bindEvents() {\n    const { trigger } = this.options;\n    this.shortcut.unbindAll();\n\n    if (Array.isArray(trigger)) {\n      if (trigger.includes(CommonEvent.PINCH)) {\n        this.shortcut.bind([CommonEvent.PINCH], (event) => {\n          this.zoom(event.scale, event, false);\n        });\n      } else {\n        const container = this.context.canvas.getContainer();\n        container?.addEventListener(CommonEvent.WHEEL, this.preventDefault);\n        this.shortcut.bind([...trigger, CommonEvent.WHEEL], (event) => {\n          const { deltaX, deltaY } = event;\n          this.zoom(-(deltaY ?? deltaX), event, false);\n        });\n      }\n    }\n\n    if (typeof trigger === 'object') {\n      const {\n        zoomIn = [],\n        zoomOut = [],\n        reset = [],\n      } = trigger as {\n        zoomIn: ShortcutKey;\n        zoomOut: ShortcutKey;\n        reset: ShortcutKey;\n      };\n      this.shortcut.bind(zoomIn, (event) => this.zoom(10, event, this.options.animation));\n      this.shortcut.bind(zoomOut, (event) => this.zoom(-10, event, this.options.animation));\n      this.shortcut.bind(reset, this.onReset);\n    }\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Zoom canvas\n   * @param value - <zh/>  > 0  < 0  | <en/> Zoom value, > 0 zoom in, < 0 zoom out\n   * @param event - <zh/>  | <en/> Event object\n   * @param animation - <zh/>  | <en/> Zoom animation configuration\n   */\n  protected zoom = async (\n    value: number,\n    event: IWheelEvent | IKeyboardEvent | IPointerEvent,\n    animation: ZoomCanvasOptions['animation'],\n  ) => {\n    if (!this.validate(event)) return;\n    const { graph } = this.context;\n\n    let origin: Point | undefined = this.options.origin;\n    if (!origin && 'viewport' in event) {\n      origin = parsePoint(event.viewport as PointObject);\n    }\n\n    const { sensitivity, onFinish } = this.options;\n    const ratio = 1 + (clamp(value, -50, 50) * sensitivity) / 100;\n    const zoom = graph.getZoom();\n    await graph.zoomTo(zoom * ratio, animation, origin);\n\n    onFinish?.();\n  };\n\n  protected onReset = async () => {\n    await this.context.graph.zoomTo(1, this.options.animation);\n  };\n\n  /**\n   * <zh/> \n   *\n   * <en/> Verify whether it can be zoomed\n   * @param event - <zh/>  | <en/> Event object\n   * @returns <zh/>  | <en/> Whether it can be zoomed\n   * @internal\n   */\n  protected validate(event: IWheelEvent | IKeyboardEvent | IPointerEvent) {\n    if (this.destroyed) return false;\n    const { enable } = this.options;\n    if (isFunction(enable)) return enable(event);\n    return !!enable;\n  }\n\n  private preventDefault = (event: Event) => {\n    if (this.options.preventDefault) event.preventDefault();\n  };\n\n  /**\n   * <zh/> \n   *\n   * <en/> Destroy zoom canvas\n   */\n  public destroy() {\n    this.shortcut.destroy();\n    this.context.canvas.getContainer()?.removeEventListener(CommonEvent.WHEEL, this.preventDefault);\n    super.destroy();\n  }\n}\n", "import type { HierarchyNode } from './types';\n\n/**\n * Get average height or height for node's position calculation, according to align.\n * @param preNode previous node\n * @param node current node, whose position is going to be calculated\n * @param align 'center' means nodes align at the center, other value means align at the left-top\n * @param heightField field name for height value on preNode and node\n * @return the height for calculation\n */\nexport function getHeight(\n  preNode: HierarchyNode,\n  node: HierarchyNode,\n  align?: 'center' | undefined,\n  heightField: keyof HierarchyNode = 'height',\n): number {\n  const preNodeHeight = preNode[heightField] as number;\n  const nodeHeight = node[heightField] as number;\n  return align === 'center' ? (preNodeHeight + nodeHeight) / 2 : preNode.height;\n}\n\nexport const assign = Object.assign;\n", "import { assign } from '../util';\nimport type { HierarchyData, HierarchyNode, HierarchyOptions, BoundingBox } from '../types';\n\nconst PEM = 18;\nconst DEFAULT_HEIGHT = PEM * 2;\nconst DEFAULT_GAP = PEM;\n\nconst DEFAULT_OPTIONS: Required<\n  Pick<\n    HierarchyOptions,\n    | 'getId'\n    | 'getPreH'\n    | 'getPreV'\n    | 'getHGap'\n    | 'getVGap'\n    | 'getChildren'\n    | 'getHeight'\n    | 'getWidth'\n  >\n> = {\n  getId(d: HierarchyData): string {\n    return (d.id || d.name) as string;\n  },\n  getPreH(d: HierarchyData): number {\n    return d.preH || 0;\n  },\n  getPreV(d: HierarchyData): number {\n    return d.preV || 0;\n  },\n  getHGap(d: HierarchyData): number {\n    return d.hgap || DEFAULT_GAP;\n  },\n  getVGap(d: HierarchyData): number {\n    return d.vgap || DEFAULT_GAP;\n  },\n  getChildren(d: HierarchyData): HierarchyData[] | undefined {\n    return d.children;\n  },\n  getHeight(d: HierarchyData): number {\n    return d.height || DEFAULT_HEIGHT;\n  },\n  getWidth(d: HierarchyData): number {\n    const label = d.label || ' ';\n    return d.width || label.split('').length * PEM; // FIXME DO NOT get width like this\n  },\n};\n\nclass Node implements HierarchyNode {\n  data: HierarchyData;\n  id: string;\n  x: number = 0;\n  y: number = 0;\n  width: number;\n  height: number;\n  depth: number = 0;\n  children: HierarchyNode[] = [];\n  parent?: HierarchyNode;\n  hgap: number = 0;\n  vgap: number = 0;\n  preH: number;\n  preV: number;\n\n  constructor(data: HierarchyData | HierarchyNode, options: HierarchyOptions) {\n    if (data instanceof Node || ('x' in data && 'y' in data && 'children' in data)) {\n      // If it's already a Node, cast and return\n      const node = data as Node;\n      this.data = node.data;\n      this.id = node.id;\n      this.x = node.x;\n      this.y = node.y;\n      this.width = node.width;\n      this.height = node.height;\n      this.depth = node.depth;\n      this.children = node.children;\n      this.parent = node.parent;\n      this.hgap = node.hgap;\n      this.vgap = node.vgap;\n      this.preH = node.preH;\n      this.preV = node.preV;\n      return;\n    }\n\n    this.data = data as HierarchyData;\n\n    /*\n     * Gaps: filling space between nodes\n     * (x, y) ----------------------\n     * |            vgap            |\n     * |    --------------------    h\n     * | h |                    |   e\n     * | g |                    |   i\n     * | a |                    |   g\n     * | p |                    |   h\n     * |   ---------------------    t\n     * |                            |\n     *  -----------width------------\n     */\n    const hgap = options.getHGap!(data);\n    const vgap = options.getVGap!(data);\n    this.preH = options.getPreH!(data);\n    this.preV = options.getPreV!(data);\n    this.width = options.getWidth!(data);\n    this.height = options.getHeight!(data);\n    this.width += this.preH;\n    this.height += this.preV;\n    this.id = options.getId!(data);\n\n    this.addGap(hgap, vgap);\n  }\n\n  isRoot(): boolean {\n    return this.depth === 0;\n  }\n\n  isLeaf(): boolean {\n    return this.children.length === 0;\n  }\n\n  addGap(hgap: number, vgap: number): void {\n    this.hgap += hgap;\n    this.vgap += vgap;\n    this.width += 2 * hgap;\n    this.height += 2 * vgap;\n  }\n\n  eachNode(callback: (node: HierarchyNode) => void): void {\n    let nodes: HierarchyNode[] = [this];\n    let current: HierarchyNode | undefined;\n    while ((current = nodes.shift())) {\n      callback(current);\n      nodes = current.children.concat(nodes);\n    }\n  }\n\n  DFTraverse(callback: (node: HierarchyNode) => void): void {\n    this.eachNode(callback);\n  }\n\n  BFTraverse(callback: (node: HierarchyNode) => void): void {\n    let nodes: HierarchyNode[] = [this];\n    let current: HierarchyNode | undefined;\n    while ((current = nodes.shift())) {\n      callback(current);\n      nodes = nodes.concat(current.children);\n    }\n  }\n\n  getBoundingBox(): BoundingBox {\n    const bb: BoundingBox = {\n      left: Number.MAX_VALUE,\n      top: Number.MAX_VALUE,\n      width: 0,\n      height: 0,\n    };\n    this.eachNode((node) => {\n      bb.left = Math.min(bb.left, node.x);\n      bb.top = Math.min(bb.top, node.y);\n      bb.width = Math.max(bb.width, node.x + node.width);\n      bb.height = Math.max(bb.height, node.y + node.height);\n    });\n    return bb;\n  }\n\n  translate(tx: number = 0, ty: number = 0): void {\n    this.eachNode((node) => {\n      node.x += tx;\n      node.y += ty;\n      node.x += node.preH;\n      node.y += node.preV;\n    });\n  }\n\n  right2left(): void {\n    const bb = this.getBoundingBox();\n    this.eachNode((node) => {\n      node.x = node.x - (node.x - bb.left) * 2 - node.width;\n    });\n    this.translate(bb.width, 0);\n  }\n\n  bottom2top(): void {\n    const bb = this.getBoundingBox();\n    this.eachNode((node) => {\n      node.y = node.y - (node.y - bb.top) * 2 - node.height;\n    });\n    this.translate(0, bb.height);\n  }\n}\n\nexport default function hierarchy(\n  data: HierarchyData,\n  options: HierarchyOptions = {},\n  isolated?: boolean,\n): HierarchyNode {\n  options = assign({}, DEFAULT_OPTIONS, options);\n  const root = new Node(data, options);\n  const nodes: HierarchyNode[] = [root];\n  let node: HierarchyNode | undefined;\n\n  if (!isolated && !data.collapsed) {\n    while ((node = nodes.shift())) {\n      if (!node.data.collapsed) {\n        const children = options.getChildren!(node.data);\n        const length = children ? children.length : 0;\n        node.children = new Array(length);\n        if (children && length) {\n          for (let i = 0; i < length; i++) {\n            const child = new Node(children[i], options);\n            node.children[i] = child;\n            nodes.push(child);\n            child.parent = node;\n            child.depth = node.depth + 1;\n          }\n        }\n      }\n    }\n  }\n\n  return root;\n}\n", "import hierarchy from './hierarchy';\nimport type { HierarchyData, HierarchyNode, HierarchyOptions } from '../types';\n\nexport default class Layout {\n  options: HierarchyOptions;\n  rootNode: HierarchyNode;\n\n  constructor(root: HierarchyData, options: HierarchyOptions = {}) {\n    this.options = options;\n    this.rootNode = hierarchy(root, options);\n  }\n\n  execute(): HierarchyNode {\n    throw new Error('please override this method');\n  }\n}\n", "import type { HierarchyNode, HierarchyOptions } from '../types';\n\ninterface WrappedTreeNode {\n  w: number;\n  h: number;\n  y: number;\n  x: number;\n  c: WrappedTreeNode[];\n  cs: number;\n  prelim: number;\n  mod: number;\n  shift: number;\n  change: number;\n  tl: WrappedTreeNode | null;\n  tr: WrappedTreeNode | null;\n  el: WrappedTreeNode | null;\n  er: WrappedTreeNode | null;\n  msel: number;\n  mser: number;\n}\n\nclass WrappedTree implements WrappedTreeNode {\n  w: number;\n  h: number;\n  y: number;\n  x: number = 0;\n  c: WrappedTreeNode[];\n  cs: number;\n  prelim: number = 0;\n  mod: number = 0;\n  shift: number = 0;\n  change: number = 0;\n  tl: WrappedTreeNode | null = null;\n  tr: WrappedTreeNode | null = null;\n  el: WrappedTreeNode | null = null;\n  er: WrappedTreeNode | null = null;\n  msel: number = 0;\n  mser: number = 0;\n\n  constructor(w: number = 0, h: number = 0, y: number = 0, c: WrappedTreeNode[] = []) {\n    this.w = w || 0;\n    this.h = h || 0;\n    this.y = y || 0;\n    this.c = c || [];\n    this.cs = c.length;\n  }\n\n  static fromNode(root: HierarchyNode | null, isHorizontal?: boolean): WrappedTreeNode | null {\n    if (!root) return null;\n    const children: WrappedTreeNode[] = [];\n    root.children.forEach((child) => {\n      const wrappedChild = WrappedTree.fromNode(child, isHorizontal);\n      if (wrappedChild) children.push(wrappedChild);\n    });\n    if (isHorizontal) {\n      return new WrappedTree(root.height, root.width, root.x, children);\n    }\n    return new WrappedTree(root.width, root.height, root.y, children);\n  }\n}\n\nfunction moveRight(node: HierarchyNode, move: number, isHorizontal?: boolean): void {\n  if (isHorizontal) {\n    node.y += move;\n  } else {\n    node.x += move;\n  }\n  node.children.forEach((child) => {\n    moveRight(child, move, isHorizontal);\n  });\n}\n\nfunction getMin(node: HierarchyNode, isHorizontal?: boolean): number {\n  let res = isHorizontal ? node.y : node.x;\n  node.children.forEach((child) => {\n    res = Math.min(getMin(child, isHorizontal), res);\n  });\n  return res;\n}\n\nfunction normalize(node: HierarchyNode, isHorizontal?: boolean): void {\n  const min = getMin(node, isHorizontal);\n  moveRight(node, -min, isHorizontal);\n}\n\nfunction convertBack(\n  converted: WrappedTreeNode,\n  root: HierarchyNode,\n  isHorizontal?: boolean,\n): void {\n  if (isHorizontal) {\n    root.y = converted.x;\n  } else {\n    root.x = converted.x;\n  }\n  converted.c.forEach((child, i) => {\n    convertBack(child, root.children[i], isHorizontal);\n  });\n}\n\nfunction layer(node: HierarchyNode, isHorizontal?: boolean, d: number = 0): void {\n  if (isHorizontal) {\n    node.x = d;\n    d += node.width;\n  } else {\n    node.y = d;\n    d += node.height;\n  }\n  node.children.forEach((child) => {\n    layer(child, isHorizontal, d);\n  });\n}\n\ninterface IYL {\n  low: number;\n  index: number;\n  nxt: IYL | null;\n}\n\nexport default function nonLayeredTidy(\n  root: HierarchyNode,\n  options: HierarchyOptions = {},\n): HierarchyNode {\n  const isHorizontal = options.isHorizontal;\n\n  function firstWalk(t: WrappedTreeNode): void {\n    if (t.cs === 0) {\n      setExtremes(t);\n      return;\n    }\n    firstWalk(t.c[0]);\n    let ih: IYL | null = updateIYL(bottom(t.c[0].el!), 0, null);\n    for (let i = 1; i < t.cs; ++i) {\n      firstWalk(t.c[i]);\n      const min = bottom(t.c[i].er!);\n      separate(t, i, ih);\n      ih = updateIYL(min, i, ih);\n    }\n    positionRoot(t);\n    setExtremes(t);\n  }\n\n  function setExtremes(t: WrappedTreeNode): void {\n    if (t.cs === 0) {\n      t.el = t;\n      t.er = t;\n      t.msel = t.mser = 0;\n    } else {\n      t.el = t.c[0].el;\n      t.msel = t.c[0].msel;\n      t.er = t.c[t.cs - 1].er;\n      t.mser = t.c[t.cs - 1].mser;\n    }\n  }\n\n  function separate(t: WrappedTreeNode, i: number, ih: IYL | null): void {\n    let sr: WrappedTreeNode | null = t.c[i - 1];\n    let mssr = sr.mod;\n    let cl: WrappedTreeNode | null = t.c[i];\n    let mscl = cl.mod;\n    while (sr !== null && cl !== null) {\n      if (ih && bottom(sr) > ih.low) ih = ih.nxt;\n      const dist = mssr + sr.prelim + sr.w - (mscl + cl.prelim);\n      if (dist > 0) {\n        mscl += dist;\n        if (ih) moveSubtree(t, i, ih.index, dist);\n      }\n      const sy = bottom(sr);\n      const cy = bottom(cl);\n      if (sy <= cy) {\n        sr = nextRightContour(sr);\n        if (sr !== null) mssr += sr.mod;\n      }\n      if (sy >= cy) {\n        cl = nextLeftContour(cl);\n        if (cl !== null) mscl += cl.mod;\n      }\n    }\n    if (!sr && !!cl) {\n      setLeftThread(t, i, cl, mscl);\n    } else if (!!sr && !cl) {\n      setRightThread(t, i, sr, mssr);\n    }\n  }\n\n  function moveSubtree(t: WrappedTreeNode, i: number, si: number, dist: number): void {\n    t.c[i].mod += dist;\n    t.c[i].msel += dist;\n    t.c[i].mser += dist;\n    distributeExtra(t, i, si, dist);\n  }\n\n  function nextLeftContour(t: WrappedTreeNode): WrappedTreeNode | null {\n    return t.cs === 0 ? t.tl : t.c[0];\n  }\n\n  function nextRightContour(t: WrappedTreeNode): WrappedTreeNode | null {\n    return t.cs === 0 ? t.tr : t.c[t.cs - 1];\n  }\n\n  function bottom(t: WrappedTreeNode): number {\n    return t.y + t.h;\n  }\n\n  function setLeftThread(\n    t: WrappedTreeNode,\n    i: number,\n    cl: WrappedTreeNode,\n    modsumcl: number,\n  ): void {\n    const li = t.c[0].el!;\n    li.tl = cl;\n    const diff = modsumcl - cl.mod - t.c[0].msel;\n    li.mod += diff;\n    li.prelim -= diff;\n    t.c[0].el = t.c[i].el;\n    t.c[0].msel = t.c[i].msel;\n  }\n\n  function setRightThread(\n    t: WrappedTreeNode,\n    i: number,\n    sr: WrappedTreeNode,\n    modsumsr: number,\n  ): void {\n    const ri = t.c[i].er!;\n    ri.tr = sr;\n    const diff = modsumsr - sr.mod - t.c[i].mser;\n    ri.mod += diff;\n    ri.prelim -= diff;\n    t.c[i].er = t.c[i - 1].er;\n    t.c[i].mser = t.c[i - 1].mser;\n  }\n\n  function positionRoot(t: WrappedTreeNode): void {\n    t.prelim =\n      (t.c[0].prelim + t.c[0].mod + t.c[t.cs - 1].mod + t.c[t.cs - 1].prelim + t.c[t.cs - 1].w) /\n        2 -\n      t.w / 2;\n  }\n\n  function secondWalk(t: WrappedTreeNode, modsum: number): void {\n    modsum += t.mod;\n    t.x = t.prelim + modsum;\n    addChildSpacing(t);\n    for (let i = 0; i < t.cs; i++) {\n      secondWalk(t.c[i], modsum);\n    }\n  }\n\n  function distributeExtra(t: WrappedTreeNode, i: number, si: number, dist: number): void {\n    if (si !== i - 1) {\n      const nr = i - si;\n      t.c[si + 1].shift += dist / nr;\n      t.c[i].shift -= dist / nr;\n      t.c[i].change -= dist - dist / nr;\n    }\n  }\n\n  function addChildSpacing(t: WrappedTreeNode): void {\n    let d = 0;\n    let modsumdelta = 0;\n    for (let i = 0; i < t.cs; i++) {\n      d += t.c[i].shift;\n      modsumdelta += d + t.c[i].change;\n      t.c[i].mod += modsumdelta;\n    }\n  }\n\n  function updateIYL(low: number, index: number, ih: IYL | null): IYL {\n    while (ih !== null && low >= ih.low) {\n      ih = ih.nxt;\n    }\n    return {\n      low,\n      index,\n      nxt: ih,\n    };\n  }\n\n  // do layout\n  layer(root, isHorizontal);\n  const wt = WrappedTree.fromNode(root, isHorizontal);\n  if (wt) {\n    firstWalk(wt);\n    secondWalk(wt, 0);\n    convertBack(wt, root, isHorizontal);\n    normalize(root, isHorizontal);\n  }\n\n  return root;\n}\n", "import hierarchy from './hierarchy';\nimport type { HierarchyNode, HierarchyOptions } from '../types';\n\nexport default function separateRoot(\n  root: HierarchyNode,\n  options: HierarchyOptions,\n): { left: HierarchyNode; right: HierarchyNode } {\n  // separate into left and right trees\n  const left = hierarchy(root.data, options, true); // root only\n  const right = hierarchy(root.data, options, true); // root only\n\n  // automatically\n  const treeSize = root.children.length;\n  const rightTreeSize = Math.round(treeSize / 2);\n\n  // separate left and right tree by meta data\n  const getSide =\n    options.getSide ||\n    function (_child: HierarchyNode, index: number): 'left' | 'right' {\n      if (index < rightTreeSize) {\n        return 'right';\n      }\n      return 'left';\n    };\n\n  for (let i = 0; i < treeSize; i++) {\n    const child = root.children[i];\n    const side = getSide(child, i);\n    if (side === 'right') {\n      right.children.push(child);\n    } else {\n      left.children.push(child);\n    }\n  }\n\n  left.eachNode((node) => {\n    if (!node.isRoot()) {\n      node.side = 'left';\n    }\n  });\n\n  right.eachNode((node) => {\n    if (!node.isRoot()) {\n      node.side = 'right';\n    }\n  });\n\n  return {\n    left,\n    right,\n  };\n}\n", "import separateTree from './separate-root';\nimport type { HierarchyNode, HierarchyOptions, Direction } from '../types';\n\nconst VALID_DIRECTIONS: Direction[] = [\n  'LR', // left to right\n  'RL', // right to left\n  'TB', // top to bottom\n  'BT', // bottom to top\n  'H', // horizontal\n  'V', // vertical\n];\n\nconst HORIZONTAL_DIRECTIONS: Direction[] = ['LR', 'RL', 'H'];\n\nconst isHorizontal = (direction: Direction): boolean =>\n  HORIZONTAL_DIRECTIONS.indexOf(direction) > -1;\n\nconst DEFAULT_DIRECTION: Direction = VALID_DIRECTIONS[0];\n\ntype LayoutAlgorithm = (root: HierarchyNode, options: HierarchyOptions) => HierarchyNode;\n\nexport default function doLayout(\n  root: HierarchyNode,\n  options: HierarchyOptions,\n  layoutAlgorithm: LayoutAlgorithm,\n): HierarchyNode {\n  const direction = options.direction || DEFAULT_DIRECTION;\n  options.isHorizontal = isHorizontal(direction);\n\n  if (direction && VALID_DIRECTIONS.indexOf(direction) === -1) {\n    throw new TypeError(`Invalid direction: ${direction}`);\n  }\n\n  if (direction === VALID_DIRECTIONS[0]) {\n    // LR\n    layoutAlgorithm(root, options);\n  } else if (direction === VALID_DIRECTIONS[1]) {\n    // RL\n    layoutAlgorithm(root, options);\n    root.right2left();\n  } else if (direction === VALID_DIRECTIONS[2]) {\n    // TB\n    layoutAlgorithm(root, options);\n  } else if (direction === VALID_DIRECTIONS[3]) {\n    // BT\n    layoutAlgorithm(root, options);\n    root.bottom2top();\n  } else if (direction === VALID_DIRECTIONS[4] || direction === VALID_DIRECTIONS[5]) {\n    // H or V\n    // separate into left and right trees\n    const { left, right } = separateTree(root, options);\n    // do layout for left and right trees\n    layoutAlgorithm(left, options);\n    layoutAlgorithm(right, options);\n    if (options.isHorizontal) {\n      left.right2left();\n    } else {\n      left.bottom2top();\n    }\n    // combine left and right trees\n    right.translate(left.x - right.x, left.y - right.y);\n    // translate root\n    root.x = left.x;\n    root.y = right.y;\n    const bb = root.getBoundingBox();\n    if (options.isHorizontal) {\n      if (bb.top < 0) {\n        root.translate(0, -bb.top);\n      }\n    } else {\n      if (bb.left < 0) {\n        root.translate(-bb.left, 0);\n      }\n    }\n  }\n\n  // fixed root position, default value is true\n  let fixedRoot = options.fixedRoot;\n  if (fixedRoot === undefined) fixedRoot = true;\n  if (fixedRoot) {\n    root.translate(-(root.x + root.width / 2 + root.hgap), -(root.y + root.height / 2 + root.vgap));\n  }\n\n  reassignXYIfRadial(root, options);\n\n  return root;\n}\n\nfunction reassignXYIfRadial(root: HierarchyNode, options: HierarchyOptions): void {\n  if (options.radial) {\n    const [rScale, radScale] = options.isHorizontal ? ['x', 'y'] : ['y', 'x'];\n\n    const min = { x: Infinity, y: Infinity };\n    const max = { x: -Infinity, y: -Infinity };\n\n    let count = 0;\n    root.DFTraverse((node) => {\n      count++;\n      const { x, y } = node;\n      min.x = Math.min(min.x, x);\n      min.y = Math.min(min.y, y);\n      max.x = Math.max(max.x, x);\n      max.y = Math.max(max.y, y);\n    });\n\n    const radDiff = max[radScale as 'x' | 'y'] - min[radScale as 'x' | 'y'];\n    if (radDiff === 0) return;\n\n    const avgRad = (Math.PI * 2) / count;\n    root.DFTraverse((node) => {\n      const nodeRadScale = node[radScale as 'x' | 'y'];\n      const minRadScale = min[radScale as 'x' | 'y'];\n      const nodeRScale = node[rScale as 'x' | 'y'];\n      const rootRScale = root[rScale as 'x' | 'y'];\n\n      const rad = ((nodeRadScale - minRadScale) / radDiff) * (Math.PI * 2 - avgRad) + avgRad;\n      const r = nodeRScale - rootRScale;\n      node.x = Math.cos(rad) * r;\n      node.y = Math.sin(rad) * r;\n    });\n  }\n}\n", "import TreeLayout from './layout/base';\nimport nonLayeredTidyTree from './layout/non-layered-tidy';\nimport doTreeLayout from './layout/do-layout';\nimport { assign } from './util';\nimport type { HierarchyData, HierarchyNode, CompactBoxOptions } from './types';\n\nclass CompactBoxTreeLayout extends TreeLayout {\n  execute(): HierarchyNode {\n    return doTreeLayout(this.rootNode, this.options, nonLayeredTidyTree);\n  }\n}\n\nconst DEFAULT_OPTIONS: CompactBoxOptions = {};\n\nexport default function compactBoxLayout(\n  root: HierarchyData,\n  options?: CompactBoxOptions,\n): HierarchyNode {\n  const mergedOptions = assign({}, DEFAULT_OPTIONS, options);\n  return new CompactBoxTreeLayout(root, mergedOptions).execute();\n}\n", "import { assign } from '../util';\nimport type { HierarchyNode, HierarchyOptions } from '../types';\n\ninterface WrappedTreeNode {\n  x: number;\n  y: number;\n  height: number;\n  leftChild: WrappedTreeNode | null;\n  rightChild: WrappedTreeNode | null;\n  children: WrappedTreeNode[];\n  originNode: HierarchyNode;\n  isLeaf: boolean;\n  drawingDepth?: number;\n}\n\nclass WrappedTree implements WrappedTreeNode {\n  x: number = 0;\n  y: number = 0;\n  height: number;\n  leftChild: WrappedTreeNode | null = null;\n  rightChild: WrappedTreeNode | null = null;\n  children: WrappedTreeNode[];\n  originNode!: HierarchyNode;\n  isLeaf: boolean = false;\n\n  constructor(height: number = 0, children: WrappedTreeNode[] = []) {\n    this.height = height;\n    this.children = children;\n  }\n}\n\nconst DEFAULT_OPTIONS = {\n  isHorizontal: true,\n  nodeSep: 20,\n  nodeSize: 20,\n  rankSep: 200,\n  subTreeSep: 10,\n};\n\nfunction convertBack(converted: WrappedTreeNode, root: HierarchyNode, isHorizontal: boolean): void {\n  if (isHorizontal) {\n    root.x = converted.x;\n    root.y = converted.y;\n  } else {\n    root.x = converted.y;\n    root.y = converted.x;\n  }\n  converted.children.forEach((child, i) => {\n    convertBack(child, root.children[i], isHorizontal);\n  });\n}\n\nexport default function dendrogram(\n  root: HierarchyNode,\n  options: HierarchyOptions = {},\n): HierarchyNode {\n  const mergedOptions = assign({}, DEFAULT_OPTIONS, options);\n\n  let maxDepth = 0;\n\n  function wrappedTreeFromNode(n: HierarchyNode): WrappedTreeNode {\n    n.width = 0;\n    if (n.depth && n.depth > maxDepth) {\n      maxDepth = n.depth;\n    }\n    const children = n.children;\n    const childrenCount = children.length;\n    const t = new WrappedTree(0, []);\n    children.forEach((child, i) => {\n      const childWT = wrappedTreeFromNode(child);\n      t.children.push(childWT);\n      if (i === 0) {\n        t.leftChild = childWT;\n      }\n      if (i === childrenCount - 1) {\n        t.rightChild = childWT;\n      }\n    });\n    t.originNode = n;\n    t.isLeaf = n.isLeaf();\n    return t;\n  }\n\n  function getDrawingDepth(t: WrappedTreeNode): number {\n    if (t.isLeaf || t.children.length === 0) {\n      t.drawingDepth = maxDepth;\n    } else {\n      const depths = t.children.map((child) => getDrawingDepth(child));\n      const minChildDepth = Math.min(...depths);\n      t.drawingDepth = minChildDepth - 1;\n    }\n    return t.drawingDepth;\n  }\n\n  let prevLeaf: WrappedTreeNode | null = null;\n\n  function position(t: WrappedTreeNode): void {\n    t.x = t.drawingDepth! * mergedOptions.rankSep;\n    if (t.isLeaf) {\n      t.y = 0;\n      if (prevLeaf) {\n        t.y = prevLeaf.y + prevLeaf.height + mergedOptions.nodeSep;\n        if (t.originNode.parent !== prevLeaf.originNode.parent) {\n          t.y += mergedOptions.subTreeSep;\n        }\n      }\n      prevLeaf = t;\n    } else {\n      t.children.forEach((child) => {\n        position(child);\n      });\n      t.y = (t.leftChild!.y + t.rightChild!.y) / 2;\n    }\n  }\n\n  const wt = wrappedTreeFromNode(root);\n  getDrawingDepth(wt);\n  position(wt);\n  convertBack(wt, root, mergedOptions.isHorizontal);\n\n  return root;\n}\n", "import TreeLayout from './layout/base';\nimport dendrogram from './layout/dendrogram';\nimport doTreeLayout from './layout/do-layout';\nimport { assign } from './util';\nimport type { HierarchyData, HierarchyNode, DendrogramOptions } from './types';\n\nclass DendrogramLayout extends TreeLayout {\n  execute(): HierarchyNode {\n    this.rootNode.width = 0;\n    return doTreeLayout(this.rootNode, this.options, dendrogram);\n  }\n}\n\nconst DEFAULT_OPTIONS: DendrogramOptions = {};\n\nexport default function dendrogramLayout(\n  root: HierarchyData,\n  options?: DendrogramOptions,\n): HierarchyNode {\n  const mergedOptions = assign({}, DEFAULT_OPTIONS, options);\n  return new DendrogramLayout(root, mergedOptions).execute();\n}\n", "import { getHeight } from '../util';\nimport type { HierarchyNode } from '../types';\n\nfunction positionNode(\n  node: HierarchyNode,\n  previousNode: HierarchyNode | null,\n  indent: number | ((node: HierarchyNode) => number),\n  dropCap: boolean,\n  align?: 'center' | undefined,\n): void {\n  // calculate the node's horizontal offset DX, dx's type might be number or function\n  const displacementX = (typeof indent === 'function' ? indent(node) : indent) * node.depth;\n\n  if (!dropCap) {\n    try {\n      if (node.parent && node.id === node.parent.children[0].id) {\n        node.x += displacementX;\n        node.y = previousNode ? previousNode.y : 0;\n        return;\n      }\n    } catch {\n      // skip to normal when a node has no parent\n    }\n  }\n\n  node.x += displacementX;\n  if (previousNode) {\n    node.y = previousNode.y + getHeight(previousNode, node, align);\n    if (previousNode.parent && node.parent && node.parent.id !== previousNode.parent.id) {\n      // previous node has different parent\n      const prevParent = previousNode.parent;\n      const preY = prevParent.y + getHeight(prevParent, node, align);\n      node.y = preY > node.y ? preY : node.y;\n    }\n  } else {\n    node.y = 0;\n  }\n}\n\nexport default function indented(\n  root: HierarchyNode,\n  indent: number | ((node: HierarchyNode) => number),\n  dropCap: boolean,\n  align?: 'center' | undefined,\n): void {\n  let previousNode: HierarchyNode | null = null;\n  root.eachNode((node) => {\n    positionNode(node, previousNode, indent, dropCap, align);\n    previousNode = node;\n  });\n}\n", "import TreeLayout from './layout/base';\nimport indentedTree from './layout/indented';\nimport separateTree from './layout/separate-root';\nimport { assign } from './util';\nimport type { HierarchyData, HierarchyNode, IndentedOptions, Direction } from './types';\n\nconst VALID_DIRECTIONS: Direction[] = [\n  'LR', // left to right\n  'RL', // right to left\n  'H', // horizontal\n];\nconst DEFAULT_DIRECTION: Direction = VALID_DIRECTIONS[0];\n\nclass IndentedLayout extends TreeLayout {\n  execute(): HierarchyNode {\n    const options = this.options as IndentedOptions;\n    const root = this.rootNode;\n    options.isHorizontal = true;\n\n    // default indent 20 and sink first children;\n    const { indent = 20, dropCap = true, direction = DEFAULT_DIRECTION, align } = options;\n\n    if (direction && VALID_DIRECTIONS.indexOf(direction) === -1) {\n      throw new TypeError(`Invalid direction: ${direction}`);\n    }\n\n    if (direction === VALID_DIRECTIONS[0]) {\n      // LR\n      indentedTree(root, indent, dropCap, align);\n    } else if (direction === VALID_DIRECTIONS[1]) {\n      // RL\n      indentedTree(root, indent, dropCap, align);\n      root.right2left();\n    } else if (direction === VALID_DIRECTIONS[2]) {\n      // H\n      // separate into left and right trees\n      const { left, right } = separateTree(root, options);\n      indentedTree(left, indent, dropCap, align);\n      left.right2left();\n      indentedTree(right, indent, dropCap, align);\n      const bbox = left.getBoundingBox();\n      right.translate(bbox.width, 0);\n      root.x = right.x - root.width / 2;\n    }\n\n    return root;\n  }\n}\n\nconst DEFAULT_OPTIONS: IndentedOptions = {};\n\nexport default function indentedLayout(\n  root: HierarchyData,\n  options?: IndentedOptions,\n): HierarchyNode {\n  const mergedOptions = assign({}, DEFAULT_OPTIONS, options);\n  return new IndentedLayout(root, mergedOptions).execute();\n}\n", "import { assign } from '../util';\nimport type { HierarchyNode, HierarchyOptions } from '../types';\n\nfunction secondWalk(node: HierarchyNode, options: HierarchyOptions): number {\n  let totalHeight = 0;\n  if (!node.children.length) {\n    totalHeight = node.height;\n  } else {\n    node.children.forEach((c) => {\n      totalHeight += secondWalk(c, options);\n    });\n  }\n  node._subTreeSep = options.getSubTreeSep!(node.data);\n  node.totalHeight = Math.max(node.height, totalHeight) + 2 * node._subTreeSep;\n  return node.totalHeight;\n}\n\nfunction thirdWalk(node: HierarchyNode): void {\n  const children = node.children;\n  const len = children.length;\n  if (len) {\n    children.forEach((c) => {\n      thirdWalk(c);\n    });\n    const first = children[0];\n    const last = children[len - 1];\n    const childrenHeight = last.y - first.y + last.height;\n    let childrenTotalHeight = 0;\n    children.forEach((child) => {\n      childrenTotalHeight += child.totalHeight!;\n    });\n    if (childrenHeight > node.height) {\n      // \n      node.y = first.y + childrenHeight / 2 - node.height / 2;\n    } else if (children.length !== 1 || node.height > childrenTotalHeight) {\n      // \n      const offset = node.y + (node.height - childrenHeight) / 2 - first.y;\n      children.forEach((c) => {\n        c.translate(0, offset);\n      });\n    } else {\n      // \n      node.y = (first.y + first.height / 2 + last.y + last.height / 2) / 2 - node.height / 2;\n    }\n  }\n}\n\nconst DEFAULT_OPTIONS: HierarchyOptions = {\n  getSubTreeSep() {\n    return 0;\n  },\n};\n\nexport default function mindmap(\n  root: HierarchyNode,\n  options: HierarchyOptions = {},\n): HierarchyNode {\n  options = assign({}, DEFAULT_OPTIONS, options);\n\n  root.parent = {\n    x: 0,\n    width: 0,\n    height: 0,\n    y: 0,\n  } as HierarchyNode;\n\n  // first walk\n  root.BFTraverse((node) => {\n    node.x = node.parent!.x + node.parent!.width;\n  });\n\n  root.parent = undefined;\n\n  // second walk\n  secondWalk(root, options);\n\n  // adjusting\n  // separating nodes\n  root.startY = 0;\n  root.y = root.totalHeight! / 2 - root.height / 2;\n  root.eachNode((node) => {\n    const children = node.children;\n    const len = children.length;\n    if (len) {\n      const first = children[0];\n      first.startY = node.startY! + node._subTreeSep!;\n      if (len === 1) {\n        first.y = node.y + node.height / 2 - first.height / 2;\n      } else {\n        first.y = first.startY + first.totalHeight! / 2 - first.height / 2;\n        for (let i = 1; i < len; i++) {\n          const c = children[i];\n          c.startY = children[i - 1].startY! + children[i - 1].totalHeight!;\n          c.y = c.startY + c.totalHeight! / 2 - c.height / 2;\n        }\n      }\n    }\n  });\n\n  // third walk\n  thirdWalk(root);\n\n  return root;\n}\n", "import TreeLayout from './layout/base';\nimport mindmap from './layout/mindmap';\nimport doTreeLayout from './layout/do-layout';\nimport { assign } from './util';\nimport type { HierarchyData, HierarchyNode, MindmapOptions } from './types';\n\nclass MindmapLayout extends TreeLayout {\n  execute(): HierarchyNode {\n    return doTreeLayout(this.rootNode, this.options, mindmap);\n  }\n}\n\nconst DEFAULT_OPTIONS: MindmapOptions = {};\n\nexport default function mindmapLayout(\n  root: HierarchyData,\n  options?: MindmapOptions,\n): HierarchyNode {\n  const mergedOptions = assign({}, DEFAULT_OPTIONS, options);\n  return new MindmapLayout(root, mergedOptions).execute();\n}\n", "import compactBox from './compact-box';\nimport dendrogram from './dendrogram';\nimport indented from './indented';\nimport mindmap from './mindmap';\n\nexport { compactBox, dendrogram, indented, mindmap };\n\nexport * from './types';\n\nexport default {\n  compactBox,\n  dendrogram,\n  indented,\n  mindmap,\n};\n\nexport const version = '0.7.0';\n", null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, "export default function(d) {\n  const x = +this._x.call(null, d),\n      y = +this._y.call(null, d),\n      z = +this._z.call(null, d);\n  return add(this.cover(x, y, z), x, y, z, d);\n}\n\nfunction add(tree, x, y, z, d) {\n  if (isNaN(x) || isNaN(y) || isNaN(z)) return tree; // ignore invalid points\n\n  var parent,\n      node = tree._root,\n      leaf = {data: d},\n      x0 = tree._x0,\n      y0 = tree._y0,\n      z0 = tree._z0,\n      x1 = tree._x1,\n      y1 = tree._y1,\n      z1 = tree._z1,\n      xm,\n      ym,\n      zm,\n      xp,\n      yp,\n      zp,\n      right,\n      bottom,\n      deep,\n      i,\n      j;\n\n  // If the tree is empty, initialize the root as a leaf.\n  if (!node) return tree._root = leaf, tree;\n\n  // Find the existing leaf for the new point, or add it.\n  while (node.length) {\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm; else x1 = xm;\n    if (bottom = y >= (ym = (y0 + y1) / 2)) y0 = ym; else y1 = ym;\n    if (deep = z >= (zm = (z0 + z1) / 2)) z0 = zm; else z1 = zm;\n    if (parent = node, !(node = node[i = deep << 2 | bottom << 1 | right])) return parent[i] = leaf, tree;\n  }\n\n  // Is the new point is exactly coincident with the existing point?\n  xp = +tree._x.call(null, node.data);\n  yp = +tree._y.call(null, node.data);\n  zp = +tree._z.call(null, node.data);\n  if (x === xp && y === yp && z === zp) return leaf.next = node, parent ? parent[i] = leaf : tree._root = leaf, tree;\n\n  // Otherwise, split the leaf node until the old and new point are separated.\n  do {\n    parent = parent ? parent[i] = new Array(8) : tree._root = new Array(8);\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm; else x1 = xm;\n    if (bottom = y >= (ym = (y0 + y1) / 2)) y0 = ym; else y1 = ym;\n    if (deep = z >= (zm = (z0 + z1) / 2)) z0 = zm; else z1 = zm;\n  } while ((i = deep << 2 | bottom << 1 | right) === (j = (zp >= zm) << 2 | (yp >= ym) << 1 | (xp >= xm)));\n  return parent[j] = node, parent[i] = leaf, tree;\n}\n\nexport function addAll(data) {\n  if (!Array.isArray(data)) data = Array.from(data);\n  const n = data.length;\n  const xz = new Float64Array(n);\n  const yz = new Float64Array(n);\n  const zz = new Float64Array(n);\n  let x0 = Infinity,\n      y0 = Infinity,\n      z0 = Infinity,\n      x1 = -Infinity,\n      y1 = -Infinity,\n      z1 = -Infinity;\n\n  // Compute the points and their extent.\n  for (let i = 0, d, x, y, z; i < n; ++i) {\n    if (isNaN(x = +this._x.call(null, d = data[i])) || isNaN(y = +this._y.call(null, d)) || isNaN(z = +this._z.call(null, d))) continue;\n    xz[i] = x;\n    yz[i] = y;\n    zz[i] = z;\n    if (x < x0) x0 = x;\n    if (x > x1) x1 = x;\n    if (y < y0) y0 = y;\n    if (y > y1) y1 = y;\n    if (z < z0) z0 = z;\n    if (z > z1) z1 = z;\n  }\n\n  // If there were no (valid) points, abort.\n  if (x0 > x1 || y0 > y1 || z0 > z1) return this;\n\n  // Expand the tree to cover the new points.\n  this.cover(x0, y0, z0).cover(x1, y1, z1);\n\n  // Add the new points.\n  for (let i = 0; i < n; ++i) {\n    add(this, xz[i], yz[i], zz[i], data[i]);\n  }\n\n  return this;\n}\n", "export default function(x, y, z) {\n  if (isNaN(x = +x) || isNaN(y = +y) || isNaN(z = +z)) return this; // ignore invalid points\n\n  var x0 = this._x0,\n      y0 = this._y0,\n      z0 = this._z0,\n      x1 = this._x1,\n      y1 = this._y1,\n      z1 = this._z1;\n\n  // If the octree has no extent, initialize them.\n  // Integer extent are necessary so that if we later double the extent,\n  // the existing octant boundaries dont change due to floating point error!\n  if (isNaN(x0)) {\n    x1 = (x0 = Math.floor(x)) + 1;\n    y1 = (y0 = Math.floor(y)) + 1;\n    z1 = (z0 = Math.floor(z)) + 1;\n  }\n\n  // Otherwise, double repeatedly to cover.\n  else {\n    var t = x1 - x0 || 1,\n        node = this._root,\n        parent,\n        i;\n\n    while (x0 > x || x >= x1 || y0 > y || y >= y1 || z0 > z || z >= z1) {\n      i = (z < z0) << 2 | (y < y0) << 1 | (x < x0);\n      parent = new Array(8), parent[i] = node, node = parent, t *= 2;\n      switch (i) {\n        case 0: x1 = x0 + t, y1 = y0 + t, z1 = z0 + t; break;\n        case 1: x0 = x1 - t, y1 = y0 + t, z1 = z0 + t; break;\n        case 2: x1 = x0 + t, y0 = y1 - t, z1 = z0 + t; break;\n        case 3: x0 = x1 - t, y0 = y1 - t, z1 = z0 + t; break;\n        case 4: x1 = x0 + t, y1 = y0 + t, z0 = z1 - t; break;\n        case 5: x0 = x1 - t, y1 = y0 + t, z0 = z1 - t; break;\n        case 6: x1 = x0 + t, y0 = y1 - t, z0 = z1 - t; break;\n        case 7: x0 = x1 - t, y0 = y1 - t, z0 = z1 - t; break;\n      }\n    }\n\n    if (this._root && this._root.length) this._root = node;\n  }\n\n  this._x0 = x0;\n  this._y0 = y0;\n  this._z0 = z0;\n  this._x1 = x1;\n  this._y1 = y1;\n  this._z1 = z1;\n  return this;\n}\n", "export default function() {\n  var data = [];\n  this.visit(function(node) {\n    if (!node.length) do data.push(node.data); while (node = node.next)\n  });\n  return data;\n}\n", "export default function(_) {\n  return arguments.length\n      ? this.cover(+_[0][0], +_[0][1], +_[0][2]).cover(+_[1][0], +_[1][1], +_[1][2])\n      : isNaN(this._x0) ? undefined : [[this._x0, this._y0, this._z0], [this._x1, this._y1, this._z1]];\n}\n", "export default function(node, x0, y0, z0, x1, y1, z1) {\n  this.node = node;\n  this.x0 = x0;\n  this.y0 = y0;\n  this.z0 = z0;\n  this.x1 = x1;\n  this.y1 = y1;\n  this.z1 = z1;\n}\n", "import Octant from \"./octant.js\";\n\nexport default function(x, y, z, radius) {\n  var data,\n      x0 = this._x0,\n      y0 = this._y0,\n      z0 = this._z0,\n      x1,\n      y1,\n      z1,\n      x2,\n      y2,\n      z2,\n      x3 = this._x1,\n      y3 = this._y1,\n      z3 = this._z1,\n      octs = [],\n      node = this._root,\n      q,\n      i;\n\n  if (node) octs.push(new Octant(node, x0, y0, z0, x3, y3, z3));\n  if (radius == null) radius = Infinity;\n  else {\n    x0 = x - radius, y0 = y - radius, z0 = z - radius;\n    x3 = x + radius, y3 = y + radius, z3 = z + radius;\n    radius *= radius;\n  }\n\n  while (q = octs.pop()) {\n\n    // Stop searching if this octant cant contain a closer node.\n    if (!(node = q.node)\n        || (x1 = q.x0) > x3\n        || (y1 = q.y0) > y3\n        || (z1 = q.z0) > z3\n        || (x2 = q.x1) < x0\n        || (y2 = q.y1) < y0\n        || (z2 = q.z1) < z0) continue;\n\n    // Bisect the current octant.\n    if (node.length) {\n      var xm = (x1 + x2) / 2,\n          ym = (y1 + y2) / 2,\n          zm = (z1 + z2) / 2;\n\n      octs.push(\n        new Octant(node[7], xm, ym, zm, x2, y2, z2),\n        new Octant(node[6], x1, ym, zm, xm, y2, z2),\n        new Octant(node[5], xm, y1, zm, x2, ym, z2),\n        new Octant(node[4], x1, y1, zm, xm, ym, z2),\n        new Octant(node[3], xm, ym, z1, x2, y2, zm),\n        new Octant(node[2], x1, ym, z1, xm, y2, zm),\n        new Octant(node[1], xm, y1, z1, x2, ym, zm),\n        new Octant(node[0], x1, y1, z1, xm, ym, zm)\n      );\n\n      // Visit the closest octant first.\n      if (i = (z >= zm) << 2 | (y >= ym) << 1 | (x >= xm)) {\n        q = octs[octs.length - 1];\n        octs[octs.length - 1] = octs[octs.length - 1 - i];\n        octs[octs.length - 1 - i] = q;\n      }\n    }\n\n    // Visit this point. (Visiting coincident points isnt necessary!)\n    else {\n      var dx = x - +this._x.call(null, node.data),\n          dy = y - +this._y.call(null, node.data),\n          dz = z - +this._z.call(null, node.data),\n          d2 = dx * dx + dy * dy + dz * dz;\n      if (d2 < radius) {\n        var d = Math.sqrt(radius = d2);\n        x0 = x - d, y0 = y - d, z0 = z - d;\n        x3 = x + d, y3 = y + d, z3 = z + d;\n        data = node.data;\n      }\n    }\n  }\n\n  return data;\n}\n", "const distance = (x1, y1, z1, x2, y2, z2) => Math.sqrt((x1-x2)**2 + (y1-y2)**2 + (z1-z2)**2);\n\nexport function findAllWithinRadius(x, y, z, radius) {\n  const result = [];\n\n  const xMin = x - radius;\n  const yMin = y - radius;\n  const zMin = z - radius;\n  const xMax = x + radius;\n  const yMax = y + radius;\n  const zMax = z + radius;\n\n  this.visit((node, x1, y1, z1, x2, y2, z2) => {\n    if (!node.length) {\n      do {\n        const d = node.data;\n        if (distance(x, y, z, this._x(d), this._y(d), this._z(d)) <= radius) {\n          result.push(d);\n        }\n      } while (node = node.next);\n    }\n    return x1 > xMax || y1 > yMax || z1 > zMax || x2 < xMin || y2 < yMin || z2 < zMin;\n  });\n\n  return result;\n}\n", "export default function(d) {\n  if (isNaN(x = +this._x.call(null, d)) || isNaN(y = +this._y.call(null, d)) || isNaN(z = +this._z.call(null, d))) return this; // ignore invalid points\n\n  var parent,\n      node = this._root,\n      retainer,\n      previous,\n      next,\n      x0 = this._x0,\n      y0 = this._y0,\n      z0 = this._z0,\n      x1 = this._x1,\n      y1 = this._y1,\n      z1 = this._z1,\n      x,\n      y,\n      z,\n      xm,\n      ym,\n      zm,\n      right,\n      bottom,\n      deep,\n      i,\n      j;\n\n  // If the tree is empty, initialize the root as a leaf.\n  if (!node) return this;\n\n  // Find the leaf node for the point.\n  // While descending, also retain the deepest parent with a non-removed sibling.\n  if (node.length) while (true) {\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm; else x1 = xm;\n    if (bottom = y >= (ym = (y0 + y1) / 2)) y0 = ym; else y1 = ym;\n    if (deep = z >= (zm = (z0 + z1) / 2)) z0 = zm; else z1 = zm;\n    if (!(parent = node, node = node[i = deep << 2 | bottom << 1 | right])) return this;\n    if (!node.length) break;\n    if (parent[(i + 1) & 7] || parent[(i + 2) & 7] || parent[(i + 3) & 7] || parent[(i + 4) & 7] || parent[(i + 5) & 7] || parent[(i + 6) & 7] || parent[(i + 7) & 7]) retainer = parent, j = i;\n  }\n\n  // Find the point to remove.\n  while (node.data !== d) if (!(previous = node, node = node.next)) return this;\n  if (next = node.next) delete node.next;\n\n  // If there are multiple coincident points, remove just the point.\n  if (previous) return (next ? previous.next = next : delete previous.next), this;\n\n  // If this is the root point, remove it.\n  if (!parent) return this._root = next, this;\n\n  // Remove this leaf.\n  next ? parent[i] = next : delete parent[i];\n\n  // If the parent now contains exactly one leaf, collapse superfluous parents.\n  if ((node = parent[0] || parent[1] || parent[2] || parent[3] || parent[4] || parent[5] || parent[6] || parent[7])\n      && node === (parent[7] || parent[6] || parent[5] || parent[4] || parent[3] || parent[2] || parent[1] || parent[0])\n      && !node.length) {\n    if (retainer) retainer[j] = node;\n    else this._root = node;\n  }\n\n  return this;\n}\n\nexport function removeAll(data) {\n  for (var i = 0, n = data.length; i < n; ++i) this.remove(data[i]);\n  return this;\n}\n", "export default function() {\n  return this._root;\n}\n", "export default function() {\n  var size = 0;\n  this.visit(function(node) {\n    if (!node.length) do ++size; while (node = node.next)\n  });\n  return size;\n}\n", "import Octant from \"./octant.js\";\n\nexport default function(callback) {\n  var octs = [], q, node = this._root, child, x0, y0, z0, x1, y1, z1;\n  if (node) octs.push(new Octant(node, this._x0, this._y0, this._z0, this._x1, this._y1, this._z1));\n  while (q = octs.pop()) {\n    if (!callback(node = q.node, x0 = q.x0, y0 = q.y0, z0 = q.z0, x1 = q.x1, y1 = q.y1, z1 = q.z1) && node.length) {\n      var xm = (x0 + x1) / 2, ym = (y0 + y1) / 2, zm = (z0 + z1) / 2;\n      if (child = node[7]) octs.push(new Octant(child, xm, ym, zm, x1, y1, z1));\n      if (child = node[6]) octs.push(new Octant(child, x0, ym, zm, xm, y1, z1));\n      if (child = node[5]) octs.push(new Octant(child, xm, y0, zm, x1, ym, z1));\n      if (child = node[4]) octs.push(new Octant(child, x0, y0, zm, xm, ym, z1));\n      if (child = node[3]) octs.push(new Octant(child, xm, ym, z0, x1, y1, zm));\n      if (child = node[2]) octs.push(new Octant(child, x0, ym, z0, xm, y1, zm));\n      if (child = node[1]) octs.push(new Octant(child, xm, y0, z0, x1, ym, zm));\n      if (child = node[0]) octs.push(new Octant(child, x0, y0, z0, xm, ym, zm));\n    }\n  }\n  return this;\n}\n", "import Octant from \"./octant.js\";\n\nexport default function(callback) {\n  var octs = [], next = [], q;\n  if (this._root) octs.push(new Octant(this._root, this._x0, this._y0, this._z0, this._x1, this._y1, this._z1));\n  while (q = octs.pop()) {\n    var node = q.node;\n    if (node.length) {\n      var child, x0 = q.x0, y0 = q.y0, z0 = q.z0, x1 = q.x1, y1 = q.y1, z1 = q.z1, xm = (x0 + x1) / 2, ym = (y0 + y1) / 2, zm = (z0 + z1) / 2;\n      if (child = node[0]) octs.push(new Octant(child, x0, y0, z0, xm, ym, zm));\n      if (child = node[1]) octs.push(new Octant(child, xm, y0, z0, x1, ym, zm));\n      if (child = node[2]) octs.push(new Octant(child, x0, ym, z0, xm, y1, zm));\n      if (child = node[3]) octs.push(new Octant(child, xm, ym, z0, x1, y1, zm));\n      if (child = node[4]) octs.push(new Octant(child, x0, y0, zm, xm, ym, z1));\n      if (child = node[5]) octs.push(new Octant(child, xm, y0, zm, x1, ym, z1));\n      if (child = node[6]) octs.push(new Octant(child, x0, ym, zm, xm, y1, z1));\n      if (child = node[7]) octs.push(new Octant(child, xm, ym, zm, x1, y1, z1));\n    }\n    next.push(q);\n  }\n  while (q = next.pop()) {\n    callback(q.node, q.x0, q.y0, q.z0, q.x1, q.y1, q.z1);\n  }\n  return this;\n}\n", "export function defaultX(d) {\n  return d[0];\n}\n\nexport default function(_) {\n  return arguments.length ? (this._x = _, this) : this._x;\n}\n", "export function defaultY(d) {\n  return d[1];\n}\n\nexport default function(_) {\n  return arguments.length ? (this._y = _, this) : this._y;\n}\n", "export function defaultZ(d) {\n  return d[2];\n}\n\nexport default function(_) {\n  return arguments.length ? (this._z = _, this) : this._z;\n}\n", "import tree_add, {addAll as tree_addAll} from \"./add.js\";\nimport tree_cover from \"./cover.js\";\nimport tree_data from \"./data.js\";\nimport tree_extent from \"./extent.js\";\nimport tree_find from \"./find.js\";\nimport { findAllWithinRadius as tree_findAllWithinRadius } from \"./findAll.js\";\nimport tree_remove, {removeAll as tree_removeAll} from \"./remove.js\";\nimport tree_root from \"./root.js\";\nimport tree_size from \"./size.js\";\nimport tree_visit from \"./visit.js\";\nimport tree_visitAfter from \"./visitAfter.js\";\nimport tree_x, {defaultX} from \"./x.js\";\nimport tree_y, {defaultY} from \"./y.js\";\nimport tree_z, {defaultZ} from \"./z.js\";\n\nexport default function octree(nodes, x, y, z) {\n  var tree = new Octree(x == null ? defaultX : x, y == null ? defaultY : y, z == null ? defaultZ : z, NaN, NaN, NaN, NaN, NaN, NaN);\n  return nodes == null ? tree : tree.addAll(nodes);\n}\n\nfunction Octree(x, y, z, x0, y0, z0, x1, y1, z1) {\n  this._x = x;\n  this._y = y;\n  this._z = z;\n  this._x0 = x0;\n  this._y0 = y0;\n  this._z0 = z0;\n  this._x1 = x1;\n  this._y1 = y1;\n  this._z1 = z1;\n  this._root = undefined;\n}\n\nfunction leaf_copy(leaf) {\n  var copy = {data: leaf.data}, next = copy;\n  while (leaf = leaf.next) next = next.next = {data: leaf.data};\n  return copy;\n}\n\nvar treeProto = octree.prototype = Octree.prototype;\n\ntreeProto.copy = function() {\n  var copy = new Octree(this._x, this._y, this._z, this._x0, this._y0, this._z0, this._x1, this._y1, this._z1),\n      node = this._root,\n      nodes,\n      child;\n\n  if (!node) return copy;\n\n  if (!node.length) return copy._root = leaf_copy(node), copy;\n\n  nodes = [{source: node, target: copy._root = new Array(8)}];\n  while (node = nodes.pop()) {\n    for (var i = 0; i < 8; ++i) {\n      if (child = node.source[i]) {\n        if (child.length) nodes.push({source: child, target: node.target[i] = new Array(8)});\n        else node.target[i] = leaf_copy(child);\n      }\n    }\n  }\n\n  return copy;\n};\n\ntreeProto.add = tree_add;\ntreeProto.addAll = tree_addAll;\ntreeProto.cover = tree_cover;\ntreeProto.data = tree_data;\ntreeProto.extent = tree_extent;\ntreeProto.find = tree_find;\ntreeProto.findAllWithinRadius = tree_findAllWithinRadius;\ntreeProto.remove = tree_remove;\ntreeProto.removeAll = tree_removeAll;\ntreeProto.root = tree_root;\ntreeProto.size = tree_size;\ntreeProto.visit = tree_visit;\ntreeProto.visitAfter = tree_visitAfter;\ntreeProto.x = tree_x;\ntreeProto.y = tree_y;\ntreeProto.z = tree_z;\n", null, null, "import * as matrix from './matrix.js';\n\nexport const AbstractMatrix = matrix.AbstractMatrix;\nexport const CHO = matrix.CHO;\nexport const CholeskyDecomposition = matrix.CholeskyDecomposition;\nexport const DistanceMatrix = matrix.DistanceMatrix;\nexport const EVD = matrix.EVD;\nexport const EigenvalueDecomposition = matrix.EigenvalueDecomposition;\nexport const LU = matrix.LU;\nexport const LuDecomposition = matrix.LuDecomposition;\nexport const Matrix = matrix.Matrix;\nexport const MatrixColumnSelectionView = matrix.MatrixColumnSelectionView;\nexport const MatrixColumnView = matrix.MatrixColumnView;\nexport const MatrixFlipColumnView = matrix.MatrixFlipColumnView;\nexport const MatrixFlipRowView = matrix.MatrixFlipRowView;\nexport const MatrixRowSelectionView = matrix.MatrixRowSelectionView;\nexport const MatrixRowView = matrix.MatrixRowView;\nexport const MatrixSelectionView = matrix.MatrixSelectionView;\nexport const MatrixSubView = matrix.MatrixSubView;\nexport const MatrixTransposeView = matrix.MatrixTransposeView;\nexport const NIPALS = matrix.NIPALS;\nexport const Nipals = matrix.Nipals;\nexport const QR = matrix.QR;\nexport const QrDecomposition = matrix.QrDecomposition;\nexport const SVD = matrix.SVD;\nexport const SingularValueDecomposition = matrix.SingularValueDecomposition;\nexport const SymmetricMatrix = matrix.SymmetricMatrix;\nexport const WrapperMatrix1D = matrix.WrapperMatrix1D;\nexport const WrapperMatrix2D = matrix.WrapperMatrix2D;\nexport const correlation = matrix.correlation;\nexport const covariance = matrix.covariance;\nexport default matrix.default.Matrix ? matrix.default.Matrix : matrix.Matrix;\nexport const determinant = matrix.determinant;\nexport const inverse = matrix.inverse;\nexport const linearDependencies = matrix.linearDependencies;\nexport const pseudoInverse = matrix.pseudoInverse;\nexport const solve = matrix.solve;\nexport const wrap = matrix.wrap;\n", null, null, null, null, "export default function(d) {\n  const x = +this._x.call(null, d);\n  return add(this.cover(x), x, d);\n}\n\nfunction add(tree, x, d) {\n  if (isNaN(x)) return tree; // ignore invalid points\n\n  var parent,\n      node = tree._root,\n      leaf = {data: d},\n      x0 = tree._x0,\n      x1 = tree._x1,\n      xm,\n      xp,\n      right,\n      i,\n      j;\n\n  // If the tree is empty, initialize the root as a leaf.\n  if (!node) return tree._root = leaf, tree;\n\n  // Find the existing leaf for the new point, or add it.\n  while (node.length) {\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm; else x1 = xm;\n    if (parent = node, !(node = node[i = +right])) return parent[i] = leaf, tree;\n  }\n\n  // Is the new point is exactly coincident with the existing point?\n  xp = +tree._x.call(null, node.data);\n  if (x === xp) return leaf.next = node, parent ? parent[i] = leaf : tree._root = leaf, tree;\n\n  // Otherwise, split the leaf node until the old and new point are separated.\n  do {\n    parent = parent ? parent[i] = new Array(2) : tree._root = new Array(2);\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm; else x1 = xm;\n  } while ((i = +right) === (j = +(xp >= xm)));\n  return parent[j] = node, parent[i] = leaf, tree;\n}\n\nexport function addAll(data) {\n  if (!Array.isArray(data)) data = Array.from(data);\n  const n = data.length;\n  const xz = new Float64Array(n);\n  let x0 = Infinity,\n      x1 = -Infinity;\n\n  // Compute the points and their extent.\n  for (let i = 0, x; i < n; ++i) {\n    if (isNaN(x = +this._x.call(null, data[i]))) continue;\n    xz[i] = x;\n    if (x < x0) x0 = x;\n    if (x > x1) x1 = x;\n  }\n\n  // If there were no (valid) points, abort.\n  if (x0 > x1) return this;\n\n  // Expand the tree to cover the new points.\n  this.cover(x0).cover(x1);\n\n  // Add the new points.\n  for (let i = 0; i < n; ++i) {\n    add(this, xz[i], data[i]);\n  }\n\n  return this;\n}\n", "export default function(x) {\n  if (isNaN(x = +x)) return this; // ignore invalid points\n\n  var x0 = this._x0,\n      x1 = this._x1;\n\n  // If the binarytree has no extent, initialize them.\n  // Integer extent are necessary so that if we later double the extent,\n  // the existing half boundaries dont change due to floating point error!\n  if (isNaN(x0)) {\n    x1 = (x0 = Math.floor(x)) + 1;\n  }\n\n  // Otherwise, double repeatedly to cover.\n  else {\n    var z = x1 - x0 || 1,\n        node = this._root,\n        parent,\n        i;\n\n    while (x0 > x || x >= x1) {\n      i = +(x < x0);\n      parent = new Array(2), parent[i] = node, node = parent, z *= 2;\n      switch (i) {\n        case 0: x1 = x0 + z; break;\n        case 1: x0 = x1 - z; break;\n      }\n    }\n\n    if (this._root && this._root.length) this._root = node;\n  }\n\n  this._x0 = x0;\n  this._x1 = x1;\n  return this;\n}\n", "export default function() {\n  var data = [];\n  this.visit(function(node) {\n    if (!node.length) do data.push(node.data); while (node = node.next)\n  });\n  return data;\n}\n", "export default function(_) {\n  return arguments.length\n      ? this.cover(+_[0][0]).cover(+_[1][0])\n      : isNaN(this._x0) ? undefined : [[this._x0], [this._x1]];\n}\n", "export default function(node, x0, x1) {\n  this.node = node;\n  this.x0 = x0;\n  this.x1 = x1;\n}\n", "import Half from \"./half.js\";\n\nexport default function(x, radius) {\n  var data,\n      x0 = this._x0,\n      x1,\n      x2,\n      x3 = this._x1,\n      halves = [],\n      node = this._root,\n      q,\n      i;\n\n  if (node) halves.push(new Half(node, x0, x3));\n  if (radius == null) radius = Infinity;\n  else {\n    x0 = x - radius;\n    x3 = x + radius;\n  }\n\n  while (q = halves.pop()) {\n\n    // Stop searching if this half cant contain a closer node.\n    if (!(node = q.node)\n        || (x1 = q.x0) > x3\n        || (x2 = q.x1) < x0) continue;\n\n    // Bisect the current half.\n    if (node.length) {\n      var xm = (x1 + x2) / 2;\n\n      halves.push(\n        new Half(node[1], xm, x2),\n        new Half(node[0], x1, xm)\n      );\n\n      // Visit the closest half first.\n      if (i = +(x >= xm)) {\n        q = halves[halves.length - 1];\n        halves[halves.length - 1] = halves[halves.length - 1 - i];\n        halves[halves.length - 1 - i] = q;\n      }\n    }\n\n    // Visit this point. (Visiting coincident points isnt necessary!)\n    else {\n      var d = Math.abs(x - +this._x.call(null, node.data));\n      if (d < radius) {\n        radius = d;\n        x0 = x - d;\n        x3 = x + d;\n        data = node.data;\n      }\n    }\n  }\n\n  return data;\n}\n", "export default function(d) {\n  if (isNaN(x = +this._x.call(null, d))) return this; // ignore invalid points\n\n  var parent,\n      node = this._root,\n      retainer,\n      previous,\n      next,\n      x0 = this._x0,\n      x1 = this._x1,\n      x,\n      xm,\n      right,\n      i,\n      j;\n\n  // If the tree is empty, initialize the root as a leaf.\n  if (!node) return this;\n\n  // Find the leaf node for the point.\n  // While descending, also retain the deepest parent with a non-removed sibling.\n  if (node.length) while (true) {\n    if (right = x >= (xm = (x0 + x1) / 2)) x0 = xm; else x1 = xm;\n    if (!(parent = node, node = node[i = +right])) return this;\n    if (!node.length) break;\n    if (parent[(i + 1) & 1]) retainer = parent, j = i;\n  }\n\n  // Find the point to remove.\n  while (node.data !== d) if (!(previous = node, node = node.next)) return this;\n  if (next = node.next) delete node.next;\n\n  // If there are multiple coincident points, remove just the point.\n  if (previous) return (next ? previous.next = next : delete previous.next), this;\n\n  // If this is the root point, remove it.\n  if (!parent) return this._root = next, this;\n\n  // Remove this leaf.\n  next ? parent[i] = next : delete parent[i];\n\n  // If the parent now contains exactly one leaf, collapse superfluous parents.\n  if ((node = parent[0] || parent[1])\n      && node === (parent[1] || parent[0])\n      && !node.length) {\n    if (retainer) retainer[j] = node;\n    else this._root = node;\n  }\n\n  return this;\n}\n\nexport function removeAll(data) {\n  for (var i = 0, n = data.length; i < n; ++i) this.remove(data[i]);\n  return this;\n}\n", "export default function() {\n  return this._root;\n}\n", "export default function() {\n  var size = 0;\n  this.visit(function(node) {\n    if (!node.length) do ++size; while (node = node.next)\n  });\n  return size;\n}\n", "import Half from \"./half.js\";\n\nexport default function(callback) {\n  var halves = [], q, node = this._root, child, x0, x1;\n  if (node) halves.push(new Half(node, this._x0, this._x1));\n  while (q = halves.pop()) {\n    if (!callback(node = q.node, x0 = q.x0, x1 = q.x1) && node.length) {\n      var xm = (x0 + x1) / 2;\n      if (child = node[1]) halves.push(new Half(child, xm, x1));\n      if (child = node[0]) halves.push(new Half(child, x0, xm));\n    }\n  }\n  return this;\n}\n", "import Half from \"./half.js\";\n\nexport default function(callback) {\n  var halves = [], next = [], q;\n  if (this._root) halves.push(new Half(this._root, this._x0, this._x1));\n  while (q = halves.pop()) {\n    var node = q.node;\n    if (node.length) {\n      var child, x0 = q.x0, x1 = q.x1, xm = (x0 + x1) / 2;\n      if (child = node[0]) halves.push(new Half(child, x0, xm));\n      if (child = node[1]) halves.push(new Half(child, xm, x1));\n    }\n    next.push(q);\n  }\n  while (q = next.pop()) {\n    callback(q.node, q.x0, q.x1);\n  }\n  return this;\n}\n", "export function defaultX(d) {\n  return d[0];\n}\n\nexport default function(_) {\n  return arguments.length ? (this._x = _, this) : this._x;\n}\n", "import tree_add, {addAll as tree_addAll} from \"./add.js\";\nimport tree_cover from \"./cover.js\";\nimport tree_data from \"./data.js\";\nimport tree_extent from \"./extent.js\";\nimport tree_find from \"./find.js\";\nimport tree_remove, {removeAll as tree_removeAll} from \"./remove.js\";\nimport tree_root from \"./root.js\";\nimport tree_size from \"./size.js\";\nimport tree_visit from \"./visit.js\";\nimport tree_visitAfter from \"./visitAfter.js\";\nimport tree_x, {defaultX} from \"./x.js\";\n\nexport default function binarytree(nodes, x) {\n  var tree = new Binarytree(x == null ? defaultX : x, NaN, NaN);\n  return nodes == null ? tree : tree.addAll(nodes);\n}\n\nfunction Binarytree(x, x0, x1) {\n  this._x = x;\n  this._x0 = x0;\n  this._x1 = x1;\n  this._root = undefined;\n}\n\nfunction leaf_copy(leaf) {\n  var copy = {data: leaf.data}, next = copy;\n  while (leaf = leaf.next) next = next.next = {data: leaf.data};\n  return copy;\n}\n\nvar treeProto = binarytree.prototype = Binarytree.prototype;\n\ntreeProto.copy = function() {\n  var copy = new Binarytree(this._x, this._x0, this._x1),\n      node = this._root,\n      nodes,\n      child;\n\n  if (!node) return copy;\n\n  if (!node.length) return copy._root = leaf_copy(node), copy;\n\n  nodes = [{source: node, target: copy._root = new Array(2)}];\n  while (node = nodes.pop()) {\n    for (var i = 0; i < 2; ++i) {\n      if (child = node.source[i]) {\n        if (child.length) nodes.push({source: child, target: node.target[i] = new Array(2)});\n        else node.target[i] = leaf_copy(child);\n      }\n    }\n  }\n\n  return copy;\n};\n\ntreeProto.add = tree_add;\ntreeProto.addAll = tree_addAll;\ntreeProto.cover = tree_cover;\ntreeProto.data = tree_data;\ntreeProto.extent = tree_extent;\ntreeProto.find = tree_find;\ntreeProto.remove = tree_remove;\ntreeProto.removeAll = tree_removeAll;\ntreeProto.root = tree_root;\ntreeProto.size = tree_size;\ntreeProto.visit = tree_visit;\ntreeProto.visitAfter = tree_visitAfter;\ntreeProto.x = tree_x;", "import {dispatch} from \"d3-dispatch\";\nimport {timer} from \"d3-timer\";\nimport lcg from \"./lcg.js\";\n\nvar MAX_DIMENSIONS = 3;\n\nexport function x(d) {\n  return d.x;\n}\n\nexport function y(d) {\n  return d.y;\n}\n\nexport function z(d) {\n  return d.z;\n}\n\nvar initialRadius = 10,\n    initialAngleRoll = Math.PI * (3 - Math.sqrt(5)), // Golden ratio angle\n    initialAngleYaw = Math.PI * 20 / (9 + Math.sqrt(221)); // Markov irrational number\n\nexport default function(nodes, numDimensions) {\n  numDimensions = numDimensions || 2;\n\n  var nDim = Math.min(MAX_DIMENSIONS, Math.max(1, Math.round(numDimensions))),\n      simulation,\n      alpha = 1,\n      alphaMin = 0.001,\n      alphaDecay = 1 - Math.pow(alphaMin, 1 / 300),\n      alphaTarget = 0,\n      velocityDecay = 0.6,\n      forces = new Map(),\n      stepper = timer(step),\n      event = dispatch(\"tick\", \"end\"),\n      random = lcg();\n\n  if (nodes == null) nodes = [];\n\n  function step() {\n    tick();\n    event.call(\"tick\", simulation);\n    if (alpha < alphaMin) {\n      stepper.stop();\n      event.call(\"end\", simulation);\n    }\n  }\n\n  function tick(iterations) {\n    var i, n = nodes.length, node;\n\n    if (iterations === undefined) iterations = 1;\n\n    for (var k = 0; k < iterations; ++k) {\n      alpha += (alphaTarget - alpha) * alphaDecay;\n\n      forces.forEach(function (force) {\n        force(alpha);\n      });\n\n      for (i = 0; i < n; ++i) {\n        node = nodes[i];\n        if (node.fx == null) node.x += node.vx *= velocityDecay;\n        else node.x = node.fx, node.vx = 0;\n        if (nDim > 1) {\n          if (node.fy == null) node.y += node.vy *= velocityDecay;\n          else node.y = node.fy, node.vy = 0;\n        }\n        if (nDim > 2) {\n          if (node.fz == null) node.z += node.vz *= velocityDecay;\n          else node.z = node.fz, node.vz = 0;\n        }\n      }\n    }\n\n    return simulation;\n  }\n\n  function initializeNodes() {\n    for (var i = 0, n = nodes.length, node; i < n; ++i) {\n      node = nodes[i], node.index = i;\n      if (node.fx != null) node.x = node.fx;\n      if (node.fy != null) node.y = node.fy;\n      if (node.fz != null) node.z = node.fz;\n      if (isNaN(node.x) || (nDim > 1 && isNaN(node.y)) || (nDim > 2 && isNaN(node.z))) {\n        var radius = initialRadius * (nDim > 2 ? Math.cbrt(0.5 + i) : (nDim > 1 ? Math.sqrt(0.5 + i) : i)),\n          rollAngle = i * initialAngleRoll,\n          yawAngle = i * initialAngleYaw;\n\n        if (nDim === 1) {\n          node.x = radius;\n        } else if (nDim === 2) {\n          node.x = radius * Math.cos(rollAngle);\n          node.y = radius * Math.sin(rollAngle);\n        } else { // 3 dimensions: use spherical distribution along 2 irrational number angles\n          node.x = radius * Math.sin(rollAngle) * Math.cos(yawAngle);\n          node.y = radius * Math.cos(rollAngle);\n          node.z = radius * Math.sin(rollAngle) * Math.sin(yawAngle);\n        }\n      }\n      if (isNaN(node.vx) || (nDim > 1 && isNaN(node.vy)) || (nDim > 2 && isNaN(node.vz))) {\n        node.vx = 0;\n        if (nDim > 1) { node.vy = 0; }\n        if (nDim > 2) { node.vz = 0; }\n      }\n    }\n  }\n\n  function initializeForce(force) {\n    if (force.initialize) force.initialize(nodes, random, nDim);\n    return force;\n  }\n\n  initializeNodes();\n\n  return simulation = {\n    tick: tick,\n\n    restart: function() {\n      return stepper.restart(step), simulation;\n    },\n\n    stop: function() {\n      return stepper.stop(), simulation;\n    },\n\n    numDimensions: function(_) {\n      return arguments.length\n          ? (nDim = Math.min(MAX_DIMENSIONS, Math.max(1, Math.round(_))), forces.forEach(initializeForce), simulation)\n          : nDim;\n    },\n\n    nodes: function(_) {\n      return arguments.length ? (nodes = _, initializeNodes(), forces.forEach(initializeForce), simulation) : nodes;\n    },\n\n    alpha: function(_) {\n      return arguments.length ? (alpha = +_, simulation) : alpha;\n    },\n\n    alphaMin: function(_) {\n      return arguments.length ? (alphaMin = +_, simulation) : alphaMin;\n    },\n\n    alphaDecay: function(_) {\n      return arguments.length ? (alphaDecay = +_, simulation) : +alphaDecay;\n    },\n\n    alphaTarget: function(_) {\n      return arguments.length ? (alphaTarget = +_, simulation) : alphaTarget;\n    },\n\n    velocityDecay: function(_) {\n      return arguments.length ? (velocityDecay = 1 - _, simulation) : 1 - velocityDecay;\n    },\n\n    randomSource: function(_) {\n      return arguments.length ? (random = _, forces.forEach(initializeForce), simulation) : random;\n    },\n\n    force: function(name, _) {\n      return arguments.length > 1 ? ((_ == null ? forces.delete(name) : forces.set(name, initializeForce(_))), simulation) : forces.get(name);\n    },\n\n    find: function() {\n      var args = Array.prototype.slice.call(arguments);\n      var x = args.shift() || 0,\n          y = (nDim > 1 ? args.shift() : null) || 0,\n          z = (nDim > 2 ? args.shift() : null) || 0,\n          radius = args.shift() || Infinity;\n\n      var i = 0,\n          n = nodes.length,\n          dx,\n          dy,\n          dz,\n          d2,\n          node,\n          closest;\n\n      radius *= radius;\n\n      for (i = 0; i < n; ++i) {\n        node = nodes[i];\n        dx = x - node.x;\n        dy = y - (node.y || 0);\n        dz = z - (node.z ||0);\n        d2 = dx * dx + dy * dy + dz * dz;\n        if (d2 < radius) closest = node, radius = d2;\n      }\n\n      return closest;\n    },\n\n    on: function(name, _) {\n      return arguments.length > 1 ? (event.on(name, _), simulation) : event.on(name);\n    }\n  };\n}\n", null, null, null, null, null, null, null, null, null, null, null, "/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\n\nimport {\n  Endpoint,\n  EventSource,\n  Message,\n  MessageType,\n  PostMessageWithOrigin,\n  WireValue,\n  WireValueType,\n} from \"./protocol\";\nexport type { Endpoint };\n\nexport const proxyMarker = Symbol(\"Comlink.proxy\");\nexport const createEndpoint = Symbol(\"Comlink.endpoint\");\nexport const releaseProxy = Symbol(\"Comlink.releaseProxy\");\nexport const finalizer = Symbol(\"Comlink.finalizer\");\n\nconst throwMarker = Symbol(\"Comlink.thrown\");\n\n/**\n * Interface of values that were marked to be proxied with `comlink.proxy()`.\n * Can also be implemented by classes.\n */\nexport interface ProxyMarked {\n  [proxyMarker]: true;\n}\n\n/**\n * Takes a type and wraps it in a Promise, if it not already is one.\n * This is to avoid `Promise<Promise<T>>`.\n *\n * This is the inverse of `Unpromisify<T>`.\n */\ntype Promisify<T> = T extends Promise<unknown> ? T : Promise<T>;\n/**\n * Takes a type that may be Promise and unwraps the Promise type.\n * If `P` is not a Promise, it returns `P`.\n *\n * This is the inverse of `Promisify<T>`.\n */\ntype Unpromisify<P> = P extends Promise<infer T> ? T : P;\n\n/**\n * Takes the raw type of a remote property and returns the type that is visible to the local thread on the proxy.\n *\n * Note: This needs to be its own type alias, otherwise it will not distribute over unions.\n * See https://www.typescriptlang.org/docs/handbook/advanced-types.html#distributive-conditional-types\n */\ntype RemoteProperty<T> =\n  // If the value is a method, comlink will proxy it automatically.\n  // Objects are only proxied if they are marked to be proxied.\n  // Otherwise, the property is converted to a Promise that resolves the cloned value.\n  T extends Function | ProxyMarked ? Remote<T> : Promisify<T>;\n\n/**\n * Takes the raw type of a property as a remote thread would see it through a proxy (e.g. when passed in as a function\n * argument) and returns the type that the local thread has to supply.\n *\n * This is the inverse of `RemoteProperty<T>`.\n *\n * Note: This needs to be its own type alias, otherwise it will not distribute over unions. See\n * https://www.typescriptlang.org/docs/handbook/advanced-types.html#distributive-conditional-types\n */\ntype LocalProperty<T> = T extends Function | ProxyMarked\n  ? Local<T>\n  : Unpromisify<T>;\n\n/**\n * Proxies `T` if it is a `ProxyMarked`, clones it otherwise (as handled by structured cloning and transfer handlers).\n */\nexport type ProxyOrClone<T> = T extends ProxyMarked ? Remote<T> : T;\n/**\n * Inverse of `ProxyOrClone<T>`.\n */\nexport type UnproxyOrClone<T> = T extends RemoteObject<ProxyMarked>\n  ? Local<T>\n  : T;\n\n/**\n * Takes the raw type of a remote object in the other thread and returns the type as it is visible to the local thread\n * when proxied with `Comlink.proxy()`.\n *\n * This does not handle call signatures, which is handled by the more general `Remote<T>` type.\n *\n * @template T The raw type of a remote object as seen in the other thread.\n */\nexport type RemoteObject<T> = { [P in keyof T]: RemoteProperty<T[P]> };\n/**\n * Takes the type of an object as a remote thread would see it through a proxy (e.g. when passed in as a function\n * argument) and returns the type that the local thread has to supply.\n *\n * This does not handle call signatures, which is handled by the more general `Local<T>` type.\n *\n * This is the inverse of `RemoteObject<T>`.\n *\n * @template T The type of a proxied object.\n */\nexport type LocalObject<T> = { [P in keyof T]: LocalProperty<T[P]> };\n\n/**\n * Additional special comlink methods available on each proxy returned by `Comlink.wrap()`.\n */\nexport interface ProxyMethods {\n  [createEndpoint]: () => Promise<MessagePort>;\n  [releaseProxy]: () => void;\n}\n\n/**\n * Takes the raw type of a remote object, function or class in the other thread and returns the type as it is visible to\n * the local thread from the proxy return value of `Comlink.wrap()` or `Comlink.proxy()`.\n */\nexport type Remote<T> =\n  // Handle properties\n  RemoteObject<T> &\n    // Handle call signature (if present)\n    (T extends (...args: infer TArguments) => infer TReturn\n      ? (\n          ...args: { [I in keyof TArguments]: UnproxyOrClone<TArguments[I]> }\n        ) => Promisify<ProxyOrClone<Unpromisify<TReturn>>>\n      : unknown) &\n    // Handle construct signature (if present)\n    // The return of construct signatures is always proxied (whether marked or not)\n    (T extends { new (...args: infer TArguments): infer TInstance }\n      ? {\n          new (\n            ...args: {\n              [I in keyof TArguments]: UnproxyOrClone<TArguments[I]>;\n            }\n          ): Promisify<Remote<TInstance>>;\n        }\n      : unknown) &\n    // Include additional special comlink methods available on the proxy.\n    ProxyMethods;\n\n/**\n * Expresses that a type can be either a sync or async.\n */\ntype MaybePromise<T> = Promise<T> | T;\n\n/**\n * Takes the raw type of a remote object, function or class as a remote thread would see it through a proxy (e.g. when\n * passed in as a function argument) and returns the type the local thread has to supply.\n *\n * This is the inverse of `Remote<T>`. It takes a `Remote<T>` and returns its original input `T`.\n */\nexport type Local<T> =\n  // Omit the special proxy methods (they don't need to be supplied, comlink adds them)\n  Omit<LocalObject<T>, keyof ProxyMethods> &\n    // Handle call signatures (if present)\n    (T extends (...args: infer TArguments) => infer TReturn\n      ? (\n          ...args: { [I in keyof TArguments]: ProxyOrClone<TArguments[I]> }\n        ) => // The raw function could either be sync or async, but is always proxied automatically\n        MaybePromise<UnproxyOrClone<Unpromisify<TReturn>>>\n      : unknown) &\n    // Handle construct signature (if present)\n    // The return of construct signatures is always proxied (whether marked or not)\n    (T extends { new (...args: infer TArguments): infer TInstance }\n      ? {\n          new (\n            ...args: {\n              [I in keyof TArguments]: ProxyOrClone<TArguments[I]>;\n            }\n          ): // The raw constructor could either be sync or async, but is always proxied automatically\n          MaybePromise<Local<Unpromisify<TInstance>>>;\n        }\n      : unknown);\n\nconst isObject = (val: unknown): val is object =>\n  (typeof val === \"object\" && val !== null) || typeof val === \"function\";\n\n/**\n * Customizes the serialization of certain values as determined by `canHandle()`.\n *\n * @template T The input type being handled by this transfer handler.\n * @template S The serialized type sent over the wire.\n */\nexport interface TransferHandler<T, S> {\n  /**\n   * Gets called for every value to determine whether this transfer handler\n   * should serialize the value, which includes checking that it is of the right\n   * type (but can perform checks beyond that as well).\n   */\n  canHandle(value: unknown): value is T;\n\n  /**\n   * Gets called with the value if `canHandle()` returned `true` to produce a\n   * value that can be sent in a message, consisting of structured-cloneable\n   * values and/or transferrable objects.\n   */\n  serialize(value: T): [S, Transferable[]];\n\n  /**\n   * Gets called to deserialize an incoming value that was serialized in the\n   * other thread with this transfer handler (known through the name it was\n   * registered under).\n   */\n  deserialize(value: S): T;\n}\n\n/**\n * Internal transfer handle to handle objects marked to proxy.\n */\nconst proxyTransferHandler: TransferHandler<object, MessagePort> = {\n  canHandle: (val): val is ProxyMarked =>\n    isObject(val) && (val as ProxyMarked)[proxyMarker],\n  serialize(obj) {\n    const { port1, port2 } = new MessageChannel();\n    expose(obj, port1);\n    return [port2, [port2]];\n  },\n  deserialize(port) {\n    port.start();\n    return wrap(port);\n  },\n};\n\ninterface ThrownValue {\n  [throwMarker]: unknown; // just needs to be present\n  value: unknown;\n}\ntype SerializedThrownValue =\n  | { isError: true; value: Error }\n  | { isError: false; value: unknown };\ntype PendingListenersMap = Map<\n  string,\n  (value: WireValue | PromiseLike<WireValue>) => void\n>;\n\n/**\n * Internal transfer handler to handle thrown exceptions.\n */\nconst throwTransferHandler: TransferHandler<\n  ThrownValue,\n  SerializedThrownValue\n> = {\n  canHandle: (value): value is ThrownValue =>\n    isObject(value) && throwMarker in value,\n  serialize({ value }) {\n    let serialized: SerializedThrownValue;\n    if (value instanceof Error) {\n      serialized = {\n        isError: true,\n        value: {\n          message: value.message,\n          name: value.name,\n          stack: value.stack,\n        },\n      };\n    } else {\n      serialized = { isError: false, value };\n    }\n    return [serialized, []];\n  },\n  deserialize(serialized) {\n    if (serialized.isError) {\n      throw Object.assign(\n        new Error(serialized.value.message),\n        serialized.value\n      );\n    }\n    throw serialized.value;\n  },\n};\n\n/**\n * Allows customizing the serialization of certain values.\n */\nexport const transferHandlers = new Map<\n  string,\n  TransferHandler<unknown, unknown>\n>([\n  [\"proxy\", proxyTransferHandler],\n  [\"throw\", throwTransferHandler],\n]);\n\nfunction isAllowedOrigin(\n  allowedOrigins: (string | RegExp)[],\n  origin: string\n): boolean {\n  for (const allowedOrigin of allowedOrigins) {\n    if (origin === allowedOrigin || allowedOrigin === \"*\") {\n      return true;\n    }\n    if (allowedOrigin instanceof RegExp && allowedOrigin.test(origin)) {\n      return true;\n    }\n  }\n  return false;\n}\n\nexport function expose(\n  obj: any,\n  ep: Endpoint = globalThis as any,\n  allowedOrigins: (string | RegExp)[] = [\"*\"]\n) {\n  ep.addEventListener(\"message\", function callback(ev: MessageEvent) {\n    if (!ev || !ev.data) {\n      return;\n    }\n    if (!isAllowedOrigin(allowedOrigins, ev.origin)) {\n      console.warn(`Invalid origin '${ev.origin}' for comlink proxy`);\n      return;\n    }\n    const { id, type, path } = {\n      path: [] as string[],\n      ...(ev.data as Message),\n    };\n    const argumentList = (ev.data.argumentList || []).map(fromWireValue);\n    let returnValue;\n    try {\n      const parent = path.slice(0, -1).reduce((obj, prop) => obj[prop], obj);\n      const rawValue = path.reduce((obj, prop) => obj[prop], obj);\n      switch (type) {\n        case MessageType.GET:\n          {\n            returnValue = rawValue;\n          }\n          break;\n        case MessageType.SET:\n          {\n            parent[path.slice(-1)[0]] = fromWireValue(ev.data.value);\n            returnValue = true;\n          }\n          break;\n        case MessageType.APPLY:\n          {\n            returnValue = rawValue.apply(parent, argumentList);\n          }\n          break;\n        case MessageType.CONSTRUCT:\n          {\n            const value = new rawValue(...argumentList);\n            returnValue = proxy(value);\n          }\n          break;\n        case MessageType.ENDPOINT:\n          {\n            const { port1, port2 } = new MessageChannel();\n            expose(obj, port2);\n            returnValue = transfer(port1, [port1]);\n          }\n          break;\n        case MessageType.RELEASE:\n          {\n            returnValue = undefined;\n          }\n          break;\n        default:\n          return;\n      }\n    } catch (value) {\n      returnValue = { value, [throwMarker]: 0 };\n    }\n    Promise.resolve(returnValue)\n      .catch((value) => {\n        return { value, [throwMarker]: 0 };\n      })\n      .then((returnValue) => {\n        const [wireValue, transferables] = toWireValue(returnValue);\n        ep.postMessage({ ...wireValue, id }, transferables);\n        if (type === MessageType.RELEASE) {\n          // detach and deactive after sending release response above.\n          ep.removeEventListener(\"message\", callback as any);\n          closeEndPoint(ep);\n          if (finalizer in obj && typeof obj[finalizer] === \"function\") {\n            obj[finalizer]();\n          }\n        }\n      })\n      .catch((error) => {\n        // Send Serialization Error To Caller\n        const [wireValue, transferables] = toWireValue({\n          value: new TypeError(\"Unserializable return value\"),\n          [throwMarker]: 0,\n        });\n        ep.postMessage({ ...wireValue, id }, transferables);\n      });\n  } as any);\n  if (ep.start) {\n    ep.start();\n  }\n}\n\nfunction isMessagePort(endpoint: Endpoint): endpoint is MessagePort {\n  return endpoint.constructor.name === \"MessagePort\";\n}\n\nfunction closeEndPoint(endpoint: Endpoint) {\n  if (isMessagePort(endpoint)) endpoint.close();\n}\n\nexport function wrap<T>(ep: Endpoint, target?: any): Remote<T> {\n  const pendingListeners : PendingListenersMap = new Map();\n\n  ep.addEventListener(\"message\", function handleMessage(ev: Event) {\n    const { data } = ev as MessageEvent;\n    if (!data || !data.id) {\n      return;\n    }\n    const resolver = pendingListeners.get(data.id);\n    if (!resolver) {\n      return;\n    }\n\n    try {\n      resolver(data);\n    } finally {\n      pendingListeners.delete(data.id);\n    }\n  });\n\n  return createProxy<T>(ep, pendingListeners, [], target) as any;\n}\n\nfunction throwIfProxyReleased(isReleased: boolean) {\n  if (isReleased) {\n    throw new Error(\"Proxy has been released and is not useable\");\n  }\n}\n\nfunction releaseEndpoint(ep: Endpoint) {\n  return requestResponseMessage(ep, new Map(), {\n    type: MessageType.RELEASE,\n  }).then(() => {\n    closeEndPoint(ep);\n  });\n}\n\ninterface FinalizationRegistry<T> {\n  new (cb: (heldValue: T) => void): FinalizationRegistry<T>;\n  register(\n    weakItem: object,\n    heldValue: T,\n    unregisterToken?: object | undefined\n  ): void;\n  unregister(unregisterToken: object): void;\n}\ndeclare var FinalizationRegistry: FinalizationRegistry<Endpoint>;\n\nconst proxyCounter = new WeakMap<Endpoint, number>();\nconst proxyFinalizers =\n  \"FinalizationRegistry\" in globalThis &&\n  new FinalizationRegistry((ep: Endpoint) => {\n    const newCount = (proxyCounter.get(ep) || 0) - 1;\n    proxyCounter.set(ep, newCount);\n    if (newCount === 0) {\n      releaseEndpoint(ep);\n    }\n  });\n\nfunction registerProxy(proxy: object, ep: Endpoint) {\n  const newCount = (proxyCounter.get(ep) || 0) + 1;\n  proxyCounter.set(ep, newCount);\n  if (proxyFinalizers) {\n    proxyFinalizers.register(proxy, ep, proxy);\n  }\n}\n\nfunction unregisterProxy(proxy: object) {\n  if (proxyFinalizers) {\n    proxyFinalizers.unregister(proxy);\n  }\n}\n\nfunction createProxy<T>(\n  ep: Endpoint,\n  pendingListeners: PendingListenersMap,\n  path: (string | number | symbol)[] = [],\n  target: object = function () {}\n): Remote<T> {\n  let isProxyReleased = false;\n  const proxy = new Proxy(target, {\n    get(_target, prop) {\n      throwIfProxyReleased(isProxyReleased);\n      if (prop === releaseProxy) {\n        return () => {\n          unregisterProxy(proxy);\n          releaseEndpoint(ep);\n          pendingListeners.clear();\n          isProxyReleased = true;\n        };\n      }\n      if (prop === \"then\") {\n        if (path.length === 0) {\n          return { then: () => proxy };\n        }\n        const r = requestResponseMessage(ep, pendingListeners, {\n          type: MessageType.GET,\n          path: path.map((p) => p.toString()),\n        }).then(fromWireValue);\n        return r.then.bind(r);\n      }\n      return createProxy(ep, pendingListeners, [...path, prop]);\n    },\n    set(_target, prop, rawValue) {\n      throwIfProxyReleased(isProxyReleased);\n      // FIXME: ES6 Proxy Handler `set` methods are supposed to return a\n      // boolean. To show good will, we return true asynchronously \\_()_/\n      const [value, transferables] = toWireValue(rawValue);\n      return requestResponseMessage(\n        ep,\n        pendingListeners,\n        {\n          type: MessageType.SET,\n          path: [...path, prop].map((p) => p.toString()),\n          value,\n        },\n        transferables\n      ).then(fromWireValue) as any;\n    },\n    apply(_target, _thisArg, rawArgumentList) {\n      throwIfProxyReleased(isProxyReleased);\n      const last = path[path.length - 1];\n      if ((last as any) === createEndpoint) {\n        return requestResponseMessage(ep, pendingListeners, {\n          type: MessageType.ENDPOINT,\n        }).then(fromWireValue);\n      }\n      // We just pretend that `bind()` didnt happen.\n      if (last === \"bind\") {\n        return createProxy(ep, pendingListeners, path.slice(0, -1));\n      }\n      const [argumentList, transferables] = processArguments(rawArgumentList);\n      return requestResponseMessage(\n        ep,\n        pendingListeners,\n        {\n          type: MessageType.APPLY,\n          path: path.map((p) => p.toString()),\n          argumentList,\n        },\n        transferables\n      ).then(fromWireValue);\n    },\n    construct(_target, rawArgumentList) {\n      throwIfProxyReleased(isProxyReleased);\n      const [argumentList, transferables] = processArguments(rawArgumentList);\n      return requestResponseMessage(\n        ep,\n        pendingListeners,\n        {\n          type: MessageType.CONSTRUCT,\n          path: path.map((p) => p.toString()),\n          argumentList,\n        },\n        transferables\n      ).then(fromWireValue);\n    },\n  });\n  registerProxy(proxy, ep);\n  return proxy as any;\n}\n\nfunction myFlat<T>(arr: (T | T[])[]): T[] {\n  return Array.prototype.concat.apply([], arr);\n}\n\nfunction processArguments(argumentList: any[]): [WireValue[], Transferable[]] {\n  const processed = argumentList.map(toWireValue);\n  return [processed.map((v) => v[0]), myFlat(processed.map((v) => v[1]))];\n}\n\nconst transferCache = new WeakMap<any, Transferable[]>();\nexport function transfer<T>(obj: T, transfers: Transferable[]): T {\n  transferCache.set(obj, transfers);\n  return obj;\n}\n\nexport function proxy<T extends {}>(obj: T): T & ProxyMarked {\n  return Object.assign(obj, { [proxyMarker]: true }) as any;\n}\n\nexport function windowEndpoint(\n  w: PostMessageWithOrigin,\n  context: EventSource = globalThis,\n  targetOrigin = \"*\"\n): Endpoint {\n  return {\n    postMessage: (msg: any, transferables: Transferable[]) =>\n      w.postMessage(msg, targetOrigin, transferables),\n    addEventListener: context.addEventListener.bind(context),\n    removeEventListener: context.removeEventListener.bind(context),\n  };\n}\n\nfunction toWireValue(value: any): [WireValue, Transferable[]] {\n  for (const [name, handler] of transferHandlers) {\n    if (handler.canHandle(value)) {\n      const [serializedValue, transferables] = handler.serialize(value);\n      return [\n        {\n          type: WireValueType.HANDLER,\n          name,\n          value: serializedValue,\n        },\n        transferables,\n      ];\n    }\n  }\n  return [\n    {\n      type: WireValueType.RAW,\n      value,\n    },\n    transferCache.get(value) || [],\n  ];\n}\n\nfunction fromWireValue(value: WireValue): any {\n  switch (value.type) {\n    case WireValueType.HANDLER:\n      return transferHandlers.get(value.name)!.deserialize(value.value);\n    case WireValueType.RAW:\n      return value.value;\n  }\n}\n\nfunction requestResponseMessage(\n  ep: Endpoint,\n  pendingListeners: PendingListenersMap,\n  msg: Message,\n  transfers?: Transferable[]\n): Promise<WireValue> {\n  return new Promise((resolve) => {\n    const id = generateUUID();\n    pendingListeners.set(id, resolve);\n    if (ep.start) {\n      ep.start();\n    }\n    ep.postMessage({ id, ...msg }, transfers);\n});\n}\n\nfunction generateUUID(): string {\n  return new Array(4)\n    .fill(0)\n    .map(() => Math.floor(Math.random() * Number.MAX_SAFE_INTEGER).toString(16))\n    .join(\"-\");\n}\n", null, "import { isEmpty, memoize } from '@antv/util';\nimport type { BaseLayoutOptions } from '../layouts/types';\nimport type { EdgeData, GraphData, NodeData } from '../spec';\nimport type { ElementDatum, ID, Point, Size, STDSize } from '../types';\nimport { idOf } from '../utils/id';\nimport { parseSize } from '../utils/size';\nimport { BaseLayout } from './base-layout';\n\nexport interface FishboneLayoutOptions extends BaseLayoutOptions {\n  /**\n   * <zh/> \n   *\n   * <en/> Node size\n   */\n  nodeSize?: Size | ((node: NodeData) => Size);\n  /**\n   * <zh/> \n   * - `'RL'` \n   * - `'LR'` \n   *\n   * <en/> Layout direction\n   * - `'RL'` From right to left, the fish head is on the right\n   * - `'LR'` From left to right, the fish head is on the left\n   * @defaultValue `'LR'`\n   */\n  direction?: 'RL' | 'LR';\n  /**\n   * <zh/> \n   *\n   * <en/> Get horizontal spacing\n   */\n  hGap?: number;\n  /**\n   * <zh/> \n   *\n   * <en/> Get vertical spacing\n   */\n  vGap?: number;\n  /**\n   * <zh/> \n   *\n   * <en/> Get rib separation\n   * @defaultValue () => 60\n   */\n  getRibSep?: (node: NodeData) => number;\n  /**\n   * <zh/> \n   *\n   * <en/> Layout width\n   */\n  width?: number;\n  /**\n   * <zh/> \n   *\n   * <en/> Layout height\n   */\n  height?: number;\n}\n\ntype NodeResult = { id: ID; x: number; y: number };\ntype EdgeResult = { id: ID; controlPoints: Point[]; relatedNodeId: ID };\ntype LayoutResult = { nodes: NodeResult[]; edges: EdgeResult[] };\n\n/**\n * <zh/> \n *\n * <en/> Fishbone layout\n * @remarks\n * <zh/> [](https://en.wikipedia.org/wiki/Ishikawa_diagram)\n *\n * <en/> [Fishbone layout](https://en.wikipedia.org/wiki/Ishikawa_diagram) is a graphical layout method specifically designed to represent hierarchical data. By simulating the shape of a fishbone, it arranges data nodes according to their hierarchical structure, making the hierarchical relationships of the data clearer and more intuitive. The fishbone diagram layout is particularly suitable for datasets that need to display causal relationships, hierarchical structures, or classification information.\n */\nexport class FishboneLayout extends BaseLayout {\n  id = 'fishbone';\n\n  static defaultOptions: Partial<FishboneLayoutOptions> = {\n    direction: 'RL',\n    getRibSep: () => 60,\n  };\n\n  private getRoot() {\n    const roots = this.context.model.getRootsData();\n    if (isEmpty(roots) || roots.length > 2) return;\n\n    return roots[0];\n  }\n\n  private formatSize(nodeSize: Size | ((node: NodeData) => Size)): (node: NodeData) => STDSize {\n    const nodeSizeFunc = typeof nodeSize === 'function' ? nodeSize : () => nodeSize;\n    return (node: NodeData) => parseSize(nodeSizeFunc(node));\n  }\n\n  private doLayout(root: NodeData, options: Required<FishboneLayoutOptions>): LayoutResult {\n    const { hGap, getRibSep, vGap, nodeSize, height } = options;\n\n    const { model } = this.context;\n\n    const getSize = this.formatSize(nodeSize);\n    let ribX = getSize(root)[0] + getRibSep(root);\n\n    const getHorizontalOffset = (node: NodeData, result = 0): number => {\n      result += hGap * ((node.children || []).length + 1);\n\n      node.children?.forEach((childId) => {\n        const child = model.getNodeLikeDatum(childId) as NodeData;\n        child.children?.forEach((grandChildId) => {\n          const grandChild = model.getNodeLikeDatum(grandChildId) as NodeData;\n          result = getHorizontalOffset(grandChild, result);\n        });\n      });\n\n      return result;\n    };\n\n    const getAuxiliaryPoint = (node: NodeData): number => {\n      if (node.depth === 1) return ribX;\n\n      const parent = model.getParentData(node.id, 'tree') as NodeData;\n\n      if (isAtEvenDepth(node)) {\n        const ancestor = model.getParentData(parent.id, 'tree') as NodeData;\n        const deltaY = calculateY(node) - calculateY(ancestor);\n        return getAuxiliaryPoint(parent) + (deltaY * hGap) / vGap;\n      } else {\n        const nodeIndex = (parent.children || []).indexOf(node.id);\n        const followingSiblingsIncludeSelf = model.getNodeData((parent.children || []).slice(nodeIndex));\n        return (\n          calculateX(parent) -\n          followingSiblingsIncludeSelf.reduce((acc, sibling) => acc + getHorizontalOffset(sibling), 0) -\n          getSize(parent)[0] / 2\n        );\n      }\n    };\n\n    const calculateX = memoize(\n      (node: NodeData): number => {\n        if (isRoot(node)) return getSize(node)[0] / 2;\n\n        const parent = model.getParentData(node.id, 'tree') as NodeData;\n\n        if (isAtEvenDepth(node)) {\n          return getAuxiliaryPoint(node) + getHorizontalOffset(node) + getSize(node)[0] / 2;\n        } else {\n          const deltaY = calculateY(node) - calculateY(parent);\n          const ratio = hGap / vGap;\n          return getAuxiliaryPoint(node) + deltaY * ratio;\n        }\n      },\n      (node) => node.id,\n    );\n\n    const getParentY = (nodeId: ID): number => calculateY(model.getParentData(nodeId, 'tree')!);\n\n    const calculateY = memoize(\n      (node: NodeData): number => {\n        if (isRoot(node)) return height / 2;\n\n        if (!isAtEvenDepth(node)) {\n          // If the node has no children, calculate Y based on the parent\n          if (isEmpty(node.children)) return getParentY(node.id) + vGap;\n\n          // If the last child has no children, calculate Y based on the last child\n          const lastChild = model.getNodeLikeDatum(node.children!.slice(-1)[0]);\n          if (isEmpty(lastChild.children)) return calculateY(lastChild) + vGap;\n\n          // If the last child has children, calculate Y based on the last descendant of the last child\n          const lastDescendant = model.getDescendantsData(node.id).slice(-1)[0];\n          return (isAtEvenDepth(lastDescendant) ? getParentY(lastDescendant.id) : calculateY(lastDescendant)) + vGap;\n        } else {\n          // depth > 0 && isAtEvenDepth(node)\n          const parent = model.getParentData(node.id, 'tree') as NodeData;\n          const nodeIndex = parent.children!.indexOf(node.id);\n          // If the node is the first sibling, return Y based on parent\n          if (nodeIndex === 0) return getParentY(parent.id) + vGap;\n\n          // If the previous sibling has no children, calculate Y based on the previous sibling\n          const prevSibling = model.getNodeLikeDatum(parent.children![nodeIndex - 1]);\n          if (isEmpty(prevSibling.children)) return calculateY(prevSibling) + vGap;\n\n          // If the previous sibling has children, calculate Y based on the last descendant of the previous sibling\n          const descendants = model.getDescendantsData(prevSibling.id);\n          return (\n            Math.max(\n              ...descendants.map((descendant) =>\n                isAtEvenDepth(descendant) ? getParentY(descendant.id) : calculateY(descendant),\n              ),\n            ) + vGap\n          );\n        }\n      },\n      (node) => node.id,\n    );\n\n    let tmpRibX = 0;\n    const result: LayoutResult = { nodes: [], edges: [] };\n\n    const layout = (node: NodeData) => {\n      node.children?.forEach((childId) => layout(model.getNodeLikeDatum(childId)));\n\n      const y = calculateY(node);\n      const x = calculateX(node);\n      result.nodes.push({ id: node.id, x, y });\n\n      if (isRoot(node)) return;\n\n      const edge = model.getRelatedEdgesData(node.id, 'in')[0];\n      const controlPoint = [getAuxiliaryPoint(node), isAtEvenDepth(node) ? y : getParentY(node.id)] as Point;\n      result.edges.push({ id: idOf(edge), controlPoints: [controlPoint], relatedNodeId: node.id });\n\n      tmpRibX = Math.max(tmpRibX, x + getRibSep(node));\n      if (node.depth === 1) ribX = tmpRibX;\n    };\n\n    layout(root);\n\n    return result;\n  }\n\n  private placeAlterative(result: LayoutResult, root: NodeData) {\n    const oddIndexedRibs = (root.children || []).filter((_, index) => index % 2 !== 0);\n    if (oddIndexedRibs.length === 0) return result;\n\n    const { model } = this.context;\n    const rootY = result.nodes.find((node) => node.id === root.id)!.y;\n\n    const shouldFlip = (nodeId: ID) => {\n      const ancestors = model.getAncestorsData(nodeId, 'tree');\n      if (isEmpty(ancestors)) return false;\n      const ribId = ancestors.length === 1 ? nodeId : ancestors[ancestors.length - 2].id;\n      return oddIndexedRibs.includes(ribId);\n    };\n\n    result.nodes.forEach((node) => {\n      if (shouldFlip(node.id)) node.y = 2 * rootY - node.y;\n    });\n    result.edges.forEach((edge) => {\n      if (shouldFlip(edge.relatedNodeId)) {\n        edge.controlPoints = edge.controlPoints.map((point) => [point[0], 2 * rootY - point[1]]);\n      }\n    });\n  }\n\n  private rightToLeft(result: LayoutResult, options: Required<FishboneLayoutOptions>) {\n    result.nodes.forEach((node) => (node.x = options.width! - node.x));\n    result.edges.forEach((edge) => {\n      edge.controlPoints = edge.controlPoints.map((point) => [options.width! - point[0], point[1]]);\n    });\n    return result;\n  }\n\n  async execute(data: GraphData, propOptions: FishboneLayoutOptions): Promise<GraphData> {\n    const options = { ...FishboneLayout.defaultOptions, ...this.options, ...propOptions };\n    const { direction, nodeSize } = options;\n\n    const root = this.getRoot();\n    if (!root) return data;\n\n    const getSize = this.formatSize(nodeSize);\n    options.vGap ||= Math.max(...(data.nodes || []).map((node) => getSize(node)[1]));\n    options.hGap ||= Math.max(...(data.nodes || []).map((node) => getSize(node)[0]));\n\n    let result = this.doLayout(root, options);\n\n    this.placeAlterative(result, root);\n\n    if (direction === 'RL') {\n      result = this.rightToLeft(result, options);\n    }\n\n    const { model } = this.context;\n    const nodes: NodeData[] = [];\n    const edges: EdgeData[] = [];\n\n    result.nodes.forEach((node) => {\n      const { id, x, y } = node;\n      const nodeData = model.getNodeLikeDatum(id);\n      nodes.push(assignElementStyle(nodeData, { x, y }) as NodeData);\n    });\n\n    result.edges.forEach((edge) => {\n      const { id, controlPoints } = edge;\n      const edgeData = model.getEdgeDatum(id);\n      edges.push(assignElementStyle(edgeData, { controlPoints }) as EdgeData);\n    });\n\n    return { nodes, edges };\n  }\n}\n\nconst assignElementStyle = (element: ElementDatum, style: Record<string, unknown>) => {\n  return { ...element, style: { ...(element.style || {}), ...style } };\n};\n\nconst isRoot = (node: NodeData) => node.depth === 0;\n\nconst isAtEvenDepth = (node: NodeData) => (node.depth ||= 0) % 2 === 0;\n", "import type { GraphData, NodeData } from '../spec';\nimport type { ID, Padding, Size } from '../types';\nimport { parsePadding } from '../utils/padding';\nimport { parseSize } from '../utils/size';\nimport { BaseLayout } from './base-layout';\nimport type { BaseLayoutOptions } from './types';\n\nexport interface SnakeLayoutOptions extends BaseLayoutOptions {\n  /**\n   * <zh/> \n   *\n   * <en/> Node size\n   */\n  nodeSize?: Size | ((node: NodeData) => Size);\n  /**\n   * <zh/> \n   *\n   * <en/> Padding, the distance between the layout area and the canvas boundary\n   * @defaultValue 0\n   */\n  padding?: Padding;\n  /**\n   * <zh/> \n   *\n   * <en/> Node sorting method\n   */\n  sortBy?: (nodeA: NodeData, nodeB: NodeData) => -1 | 0 | 1;\n  /**\n   * <zh/> \n   *\n   * <en/> Number of node columns\n   * @defaultValue 5\n   */\n  cols?: number;\n  /**\n   * <zh/> \n   *\n   * <en/> The size of the gap between a node's rows\n   */\n  rowGap?: number;\n  /**\n   * <zh/> \n   *\n   * <en/> The size of the gap between a node's columns\n   */\n  colGap?: number;\n  /**\n   * <zh/> \n   *\n   * <en/> Whether the node arrangement direction is clockwise\n   * @defaultValue true\n   * @remarks\n   * <zh/>  S  S \n   *\n   * <en/> When arranged clockwise, the nodes start from the upper left corner, the first row is arranged from left to right, the second row is arranged from right to left, and so on, forming an S-shaped path. When arranged counterclockwise, the nodes start from the upper right corner, the first row is arranged from right to left, the second row is arranged from left to right, and so on, forming a reverse S-shaped path.\n   */\n  clockwise?: boolean;\n}\n\n/**\n * <zh/> \n *\n * <en/> Snake layout\n * @remarks\n * <zh/> Snake Layout\n *\n * <zh/>  S \n *\n * <en/> The Snake layout is a special way of graph layout that can more effectively display long chain structures in a smaller space. Note that the graph data needs to ensure that the nodes are linearly arranged in the order from the source node to the sink node to form a clear path.\n *\n * <en/> The nodes are arranged in an S-shaped pattern, with the first node at the beginning of the first row, and the following nodes arranged to the right until the end of the row. After reaching the end of the row, the nodes in the next row are arranged in reverse from right to left. This process is repeated until all nodes are arranged.\n */\nexport class SnakeLayout extends BaseLayout {\n  public id = 'snake';\n\n  static defaultOptions: Partial<SnakeLayoutOptions> = {\n    padding: 0,\n    cols: 5,\n    clockwise: true,\n  };\n\n  private formatSize(nodes: NodeData[], size?: Size | ((node: NodeData) => Size)): [number, number] {\n    const sizeFn = typeof size === 'function' ? size : ((() => size) as (node: NodeData) => Size);\n    return nodes.reduce(\n      (acc, node) => {\n        const [w, h] = parseSize(sizeFn(node)) || [0, 0];\n        return [Math.max(acc[0], w), Math.max(acc[1], h)];\n      },\n      [0, 0],\n    );\n  }\n\n  /**\n   * Validates the graph data to ensure it meets the requirements for linear arrangement.\n   * @param data - Graph data\n   * @returns false if the graph is not connected, has more than one source or sink node, or contains cycles.\n   */\n  private validate(data: GraphData): boolean {\n    const { nodes = [], edges = [] } = data;\n    const inDegree: { [key: ID]: number } = {};\n    const outDegree: { [key: ID]: number } = {};\n    const adjList: { [key: ID]: ID[] } = {};\n\n    nodes.forEach((node) => {\n      inDegree[node.id] = 0;\n      outDegree[node.id] = 0;\n      adjList[node.id] = [];\n    });\n\n    edges.forEach((edge) => {\n      inDegree[edge.target]++;\n      outDegree[edge.source]++;\n      adjList[edge.source].push(edge.target);\n    });\n\n    // \n    // Check if the graph is connected\n    const visited: Set<ID> = new Set();\n    const dfs = (nodeId: ID) => {\n      if (visited.has(nodeId)) return;\n      visited.add(nodeId);\n      adjList[nodeId].forEach(dfs);\n    };\n    dfs(nodes[0].id);\n    if (visited.size !== nodes.length) return false;\n\n    // \n    // Check if there is exactly one source node and one sink node\n    const sourceNodes = nodes.filter((node) => inDegree[node.id] === 0);\n    const sinkNodes = nodes.filter((node) => outDegree[node.id] === 0);\n    if (sourceNodes.length !== 1 || sinkNodes.length !== 1) return false;\n\n    // \n    // Check if the middle nodes have only one predecessor and one successor\n    const middleNodes = nodes.filter((node) => inDegree[node.id] === 1 && outDegree[node.id] === 1);\n    if (middleNodes.length !== nodes.length - 2) return false;\n\n    return true;\n  }\n\n  async execute(model: GraphData, options?: SnakeLayoutOptions): Promise<GraphData> {\n    if (!this.validate(model)) return model;\n\n    const {\n      nodeSize: propNodeSize,\n      padding: propPadding,\n      sortBy,\n      cols,\n      colGap: propColSep,\n      rowGap: propRowSep,\n      clockwise,\n      width,\n      height,\n    } = Object.assign({}, SnakeLayout.defaultOptions, this.options, options) as Required<SnakeLayoutOptions>;\n\n    const [top, right, bottom, left] = parsePadding(propPadding);\n    const nodeSize = this.formatSize(model.nodes || [], propNodeSize);\n\n    const rows = Math.ceil((model.nodes || []).length / cols);\n    let colSep = propColSep ? propColSep : (width - left - right - cols * nodeSize[0]) / (cols - 1);\n    let rowSep = propRowSep ? propRowSep : (height - top - bottom - rows * nodeSize[1]) / (rows - 1);\n    if (rowSep === Infinity || rowSep < 0) rowSep = 0;\n    if (colSep === Infinity || colSep < 0) colSep = 0;\n\n    const sortedNodes = sortBy ? model.nodes?.sort(sortBy) : topologicalSort(model);\n\n    const nodes = (sortedNodes || []).map((node, index) => {\n      const rowIndex = Math.floor(index / cols);\n      const colIndex = index % cols;\n\n      const actualColIndex = clockwise\n        ? rowIndex % 2 === 0\n          ? colIndex\n          : cols - 1 - colIndex\n        : rowIndex % 2 === 0\n          ? cols - 1 - colIndex\n          : colIndex;\n\n      const x = left + actualColIndex * (nodeSize[0] + colSep) + nodeSize[0] / 2;\n      const y = top + rowIndex * (nodeSize[1] + rowSep) + nodeSize[1] / 2;\n\n      return {\n        id: node.id,\n        style: { x, y },\n      };\n    });\n\n    return { nodes };\n  }\n}\n\n/**\n * Topological sorting. The nodes are sorted according to the order of the paths(from the start node to the end node).\n * @param data - Graph data\n * @returns Sorted nodes\n */\nfunction topologicalSort(data: GraphData): NodeData[] {\n  const { nodes = [], edges = [] } = data;\n  const inDegree: { [key: ID]: number } = {};\n  const adjList: { [key: ID]: ID[] } = {};\n\n  nodes.forEach((node) => {\n    inDegree[node.id] = 0;\n    adjList[node.id] = [];\n  });\n\n  edges.forEach((edge) => {\n    inDegree[edge.target]++;\n    adjList[edge.source].push(edge.target);\n  });\n\n  const queue: ID[] = [];\n  const sortedNodes: NodeData[] = [];\n\n  nodes.forEach((node) => {\n    if (inDegree[node.id] === 0) {\n      queue.push(node.id);\n    }\n  });\n\n  while (queue.length > 0) {\n    const nodeId = queue.shift()!;\n    const node = nodes.find((n) => n.id === nodeId)!;\n    sortedNodes.push(node);\n\n    adjList[nodeId].forEach((neighbor) => {\n      inDegree[neighbor]--;\n      if (inDegree[neighbor] === 0) {\n        queue.push(neighbor);\n      }\n    });\n  }\n\n  return sortedNodes;\n}\n", "/**\n * <zh/> \n *\n * <en/> Built-in palettes\n */\nexport const spectral = [\n  'rgb(158, 1, 66)',\n  'rgb(213, 62, 79)',\n  'rgb(244, 109, 67)',\n  'rgb(253, 174, 97)',\n  'rgb(254, 224, 139)',\n  'rgb(255, 255, 191)',\n  'rgb(230, 245, 152)',\n  'rgb(171, 221, 164)',\n  'rgb(102, 194, 165)',\n  'rgb(50, 136, 189)',\n  'rgb(94, 79, 162)',\n];\n\nexport const tableau = [\n  'rgb(78, 121, 167)',\n  'rgb(242, 142, 44)',\n  'rgb(225, 87, 89)',\n  'rgb(118, 183, 178)',\n  'rgb(89, 161, 79)',\n  'rgb(237, 201, 73)',\n  'rgb(175, 122, 161)',\n  'rgb(255, 157, 167)',\n  'rgb(156, 117, 95)',\n  'rgb(186, 176, 171)',\n];\n\nexport const oranges = [\n  'rgb(255, 245, 235)',\n  'rgb(254, 230, 206)',\n  'rgb(253, 208, 162)',\n  'rgb(253, 174, 107)',\n  'rgb(253, 141, 60)',\n  'rgb(241, 105, 19)',\n  'rgb(217, 72, 1)',\n  'rgb(166, 54, 3)',\n  'rgb(127, 39, 4)',\n];\n\nexport const greens = [\n  'rgb(247, 252, 245)',\n  'rgb(229, 245, 224)',\n  'rgb(199, 233, 192)',\n  'rgb(161, 217, 155)',\n  'rgb(116, 196, 118)',\n  'rgb(65, 171, 93)',\n  'rgb(35, 139, 69)',\n  'rgb(0, 109, 44)',\n  'rgb(0, 68, 27)',\n];\n\nexport const blues = [\n  'rgb(247, 251, 255)',\n  'rgb(222, 235, 247)',\n  'rgb(198, 219, 239)',\n  'rgb(158, 202, 225)',\n  'rgb(107, 174, 214)',\n  'rgb(66, 146, 198)',\n  'rgb(33, 113, 181)',\n  'rgb(8, 81, 156)',\n  'rgb(8, 48, 107)',\n];\n", "import { BaseExtension } from '../registry/extension';\nimport type { CustomPluginOption } from '../spec/plugin';\n\nexport interface BasePluginOptions extends CustomPluginOption {}\n\n/**\n * <zh/> \n *\n * <en/> Base class for plugins\n */\nexport abstract class BasePlugin<T extends BasePluginOptions> extends BaseExtension<T> {}\n", "/**\n * <zh/> \n *\n * <en/> Create a plugin container\n * @param type - <zh/>  | <en/> plugin type\n * @param cover - <zh/>  | <en/> Whether the container covers the entire canvas\n * @param style - <zh/>  | <en/> Additional style\n * @returns <zh/>  | <en/> plugin container\n */\nexport function createPluginContainer(type: string, cover = true, style?: Partial<CSSStyleDeclaration>): HTMLElement {\n  const container = document.createElement('div');\n\n  container.setAttribute('class', `g6-${type}`);\n\n  Object.assign(container.style, {\n    position: 'absolute',\n    display: 'block',\n  });\n\n  if (cover) {\n    Object.assign(container.style, {\n      position: 'unset',\n      gridArea: '1 / 1 / 2 / 2',\n      inset: '0px',\n      height: '100%',\n      width: '100%',\n      overflow: 'hidden',\n      pointerEvents: 'none',\n    });\n  }\n\n  if (style) Object.assign(container.style, style);\n\n  return container;\n}\n\n/**\n * <zh/>  DOM \n *\n * <en/> Create a DOM element, if exists, remove it and create a new one.\n * @param id - <zh/> id | <en/> id\n * @param tag - <zh/>  | <en/> tag\n * @param style - <zh/>  | <en/> style\n * @param innerHTML - <zh/>  | <en/> innerHTML\n * @param container - <zh/>  | <en/> container\n * @returns <zh/>  DOM  | <en/> created DOM element\n */\nexport function insertDOM(\n  id: string,\n  tag = 'div',\n  style: Partial<CSSStyleDeclaration> = {},\n  innerHTML = '',\n  container: HTMLElement = document.body,\n) {\n  const dom = document.getElementById(id);\n  if (dom) dom.remove();\n\n  const div = document.createElement(tag);\n  div.innerHTML = innerHTML;\n  div.id = id;\n\n  Object.assign(div.style, style);\n\n  container.appendChild(div);\n\n  return div;\n}\n", "import { omit } from '@antv/util';\nimport type { RuntimeContext } from '../../runtime/types';\nimport type { BasePluginOptions } from '../base-plugin';\nimport { BasePlugin } from '../base-plugin';\nimport { createPluginContainer } from '../utils/dom';\n\n/**\n * <zh/> \n *\n * <en/> Background options\n */\nexport interface BackgroundOptions extends BasePluginOptions, CSSStyleDeclaration {}\n\n/**\n * <zh/> \n *\n * <en/> Background image\n * @remarks\n * <zh/> \n *\n * <en/> Support setting a background image for the canvas to make the canvas more hierarchical and narrative.\n */\nexport class Background extends BasePlugin<BackgroundOptions> {\n  static defaultOptions: Partial<BackgroundOptions> = {\n    transition: 'background 0.5s',\n    backgroundSize: 'cover',\n    zIndex: '-1', // aviod to cover the other plugin's dom, eg: grid-line.\n  };\n\n  private $element: HTMLElement = createPluginContainer('background');\n\n  constructor(context: RuntimeContext, options: BackgroundOptions) {\n    super(context, Object.assign({}, Background.defaultOptions, options));\n\n    const $container = this.context.canvas.getContainer();\n    $container!.prepend(this.$element);\n\n    this.update(options);\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Update the background image configuration\n   * @param options - <zh/>  | <en/> Options\n   * @internal\n   */\n  public async update(options: Partial<BackgroundOptions>) {\n    super.update(options);\n\n    // Set the background style.\n    Object.assign(this.$element.style, omit(this.options, ['key', 'type']));\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Destroy the background image\n   * @internal\n   */\n  public destroy(): void {\n    super.destroy();\n    // Remove the background dom.\n    this.$element.remove();\n  }\n}\n", "export function linePtSegDistSq(lx1: number, ly1: number, lx2: number, ly2: number, x: number, y: number) {\n  // taken from JDK 8 java.awt.geom.Line2D#ptSegDistSq(double, double, double, double, double, double)\n  const x1 = lx1;\n  const y1 = ly1;\n  const x2 = lx2 - x1;\n  const y2 = ly2 - y1;\n  let px = x - x1;\n  let py = y - y1;\n  let dotprod = px * x2 + py * y2;\n  let projlenSq = 0;\n\n  if (dotprod <= 0) {\n    projlenSq = 0;\n  } else {\n    px = x2 - px;\n    py = y2 - py;\n    dotprod = px * x2 + py * y2;\n    if (dotprod <= 0) {\n      projlenSq = 0;\n    } else {\n      projlenSq = (dotprod * dotprod) / (x2 * x2 + y2 * y2);\n    }\n  }\n\n  const lenSq = px * px + py * py - projlenSq;\n  if (lenSq < 0) {\n    return 0;\n  }\n  return lenSq;\n}\n\nexport function ptsDistanceSq(x1: number, y1: number, x2: number, y2: number) {\n  return (x1 - x2) * (x1 - x2) + (y1 - y2) * (y1 - y2);\n}\n\nexport function doublePointsEqual(x1: number, y1: number, x2: number, y2: number, delta: number) {\n  return ptsDistanceSq(x1, y1, x2, y2) < delta * delta;\n}\n\nexport function round(digits: number) {\n  if (!Number.isFinite(digits)) {\n    return (v: number) => v;\n  }\n  if (digits === 0) {\n    return Math.round;\n  }\n  const factor = Math.pow(10, digits);\n  return (v: number) => Math.round(v * factor) / factor;\n}\n", "import { linePtSegDistSq } from '../utils';\nimport type { ILine, IRectangle2 } from '../interfaces';\n\nexport function lineBoundingBox(line: ILine): IRectangle2 {\n  const minX = Math.min(line.x1, line.x2);\n  const maxX = Math.max(line.x1, line.x2);\n  const minY = Math.min(line.y1, line.y2);\n  const maxY = Math.max(line.y1, line.y2);\n\n  return {\n    x: minX,\n    y: minY,\n    x2: maxX,\n    y2: maxY,\n    width: maxX - minX,\n    height: maxY - minY,\n  };\n}\n\nexport class Line {\n  constructor(\n    public x1: number,\n    public y1: number,\n    public x2: number,\n    public y2: number\n  ) {}\n\n  equals(that: ILine) {\n    return this.x1 === that.x1 && this.y1 === that.y1 && this.x2 === that.x2 && this.y2 === that.y2;\n  }\n\n  draw(ctx: CanvasRenderingContext2D) {\n    ctx.moveTo(this.x1, this.y1);\n    ctx.lineTo(this.x2, this.y2);\n  }\n\n  toString() {\n    return `Line(from=(${this.x1},${this.y1}),to=(${this.x2},${this.y2}))`;\n  }\n\n  static from(l: { x1: number; y1: number; x2: number; y2: number }) {\n    return new Line(l.x1, l.y1, l.x2, l.y2);\n  }\n\n  // whether an infinite line to positive x from the point p will cut through the line\n  cuts(px: number, py: number) {\n    if (this.y1 === this.y2) {\n      return false;\n    }\n    if ((py < this.y1 && py <= this.y2) || (py > this.y1 && py >= this.y2)) {\n      return false;\n    }\n    if (px > this.x1 && px >= this.x2) {\n      return false;\n    }\n    if (px < this.x1 && px <= this.x2) {\n      return true;\n    }\n    const cross = this.x1 + ((py - this.y1) * (this.x2 - this.x1)) / (this.y2 - this.y1);\n    return px <= cross;\n  }\n\n  distSquare(x: number, y: number) {\n    return linePtSegDistSq(this.x1, this.y1, this.x2, this.y2, x, y);\n  }\n\n  ptClose(x: number, y: number, r: number) {\n    // check whether the point is outside the bounding rectangle with padding r\n    if (this.x1 < this.x2) {\n      if (x < this.x1 - r || x > this.x2 + r) {\n        return false;\n      }\n    } else {\n      if (x < this.x2 - r || x > this.x1 + r) {\n        return false;\n      }\n    }\n    if (this.y1 < this.y2) {\n      if (y < this.y1 - r || y > this.y2 + r) {\n        return false;\n      }\n    } else {\n      if (y < this.y2 - r || y > this.y1 + r) {\n        return false;\n      }\n    }\n    return true;\n  }\n}\n", "import { Line } from './model/Line';\nimport type { IRectangle2, ILine, IRectangle } from './interfaces';\n\nexport enum EState {\n  POINT = 1,\n  PARALLEL = 2,\n  COINCIDENT = 3,\n  NONE = 4,\n}\n\nexport class Intersection {\n  constructor(\n    public readonly state: EState,\n    public readonly x = 0,\n    public readonly y = 0\n  ) {}\n}\n\nexport function intersectLineLine(la: ILine, lb: ILine) {\n  const uaT = (lb.x2 - lb.x1) * (la.y1 - lb.y1) - (lb.y2 - lb.y1) * (la.x1 - lb.x1);\n  const ubT = (la.x2 - la.x1) * (la.y1 - lb.y1) - (la.y2 - la.y1) * (la.x1 - lb.x1);\n  const uB = (lb.y2 - lb.y1) * (la.x2 - la.x1) - (lb.x2 - lb.x1) * (la.y2 - la.y1);\n  if (uB) {\n    const ua = uaT / uB;\n    const ub = ubT / uB;\n    if (0 <= ua && ua <= 1 && 0 <= ub && ub <= 1) {\n      return new Intersection(EState.POINT, la.x1 + ua * (la.x2 - la.x1), la.y1 + ua * (la.y2 - la.y1));\n    }\n    return new Intersection(EState.NONE);\n  }\n  return new Intersection(uaT === 0 || ubT === 0 ? EState.COINCIDENT : EState.PARALLEL);\n}\n\nexport function fractionAlongLineA(la: ILine, lb: ILine) {\n  const uaT = (lb.x2 - lb.x1) * (la.y1 - lb.y1) - (lb.y2 - lb.y1) * (la.x1 - lb.x1);\n  const ubT = (la.x2 - la.x1) * (la.y1 - lb.y1) - (la.y2 - la.y1) * (la.x1 - lb.x1);\n  const uB = (lb.y2 - lb.y1) * (la.x2 - la.x1) - (lb.x2 - lb.x1) * (la.y2 - la.y1);\n  if (uB) {\n    const ua = uaT / uB;\n    const ub = ubT / uB;\n    if (0 <= ua && ua <= 1 && 0 <= ub && ub <= 1) {\n      return ua;\n    }\n  }\n  return Number.POSITIVE_INFINITY;\n}\n\nexport function hasFractionToLineCenter(bounds: IRectangle2, line: ILine) {\n  function testLine(xa: number, ya: number, xb: number, yb: number) {\n    let testDistance = fractionAlongLineA(line, new Line(xa, ya, xb, yb));\n    testDistance = Math.abs(testDistance - 0.5);\n    if (testDistance >= 0 && testDistance <= 1) {\n      return 1;\n    }\n    return 0;\n  }\n\n  // top\n  let countIntersections = testLine(bounds.x, bounds.y, bounds.x2, bounds.y);\n  // left\n  countIntersections += testLine(bounds.x, bounds.y, bounds.x, bounds.y2);\n  if (countIntersections > 1) {\n    return true;\n  }\n  // bottom\n  countIntersections += testLine(bounds.x, bounds.y2, bounds.x2, bounds.y2);\n  if (countIntersections > 1) {\n    return true;\n  }\n  // right\n  countIntersections += testLine(bounds.x2, bounds.y, bounds.x2, bounds.y2);\n  // if no intersection, return -1\n  return countIntersections > 0;\n}\n\nexport enum OutCode {\n  LEFT,\n  TOP,\n  RIGHT,\n  BOTTOM,\n}\n\nexport function outcode(bounds: IRectangle, px: number, py: number): Set<OutCode> {\n  // taken from JDK 8 java.awt.geom.Rectangle2D.Double#outcode(double, double)\n  const out = new Set<OutCode>();\n  if (bounds.width <= 0) {\n    out.add(OutCode.LEFT);\n    out.add(OutCode.RIGHT);\n  } else if (px < bounds.x) {\n    out.add(OutCode.LEFT);\n  } else if (px > bounds.x + bounds.width) {\n    out.add(OutCode.RIGHT);\n  }\n  if (bounds.height <= 0) {\n    out.add(OutCode.TOP);\n    out.add(OutCode.BOTTOM);\n  } else if (py < bounds.y) {\n    out.add(OutCode.TOP);\n  } else if (py > bounds.y + bounds.height) {\n    out.add(OutCode.BOTTOM);\n  }\n  return out;\n}\n\nexport function intersectsLine(bounds: IRectangle, line: ILine) {\n  let x1 = line.x1;\n  let y1 = line.y1;\n  const x2 = line.x2;\n  const y2 = line.y2;\n  // taken from JDK 8 java.awt.geom.Rectangle2D.Double#intersectsLine(double, double, double, double)\n  const out2 = Array.from(outcode(bounds, x2, y2));\n  if (out2.length === 0) {\n    return true;\n  }\n  let out1 = outcode(bounds, x1, y1);\n  while (out1.size !== 0) {\n    for (const a of out2) {\n      if (out1.has(a)) {\n        return false;\n      }\n    }\n    if (out1.has(OutCode.RIGHT) || out1.has(OutCode.LEFT)) {\n      let x = bounds.x;\n      if (out1.has(OutCode.RIGHT)) {\n        x += bounds.width;\n      }\n      y1 = y1 + ((x - x1) * (y2 - y1)) / (x2 - x1);\n      x1 = x;\n    } else {\n      let y = bounds.y;\n      if (out1.has(OutCode.BOTTOM)) {\n        y += bounds.height;\n      }\n      x1 = x1 + ((y - y1) * (x2 - x1)) / (y2 - y1);\n      y1 = y;\n    }\n    out1 = outcode(bounds, x1, y1);\n  }\n  return true;\n}\n\nexport function fractionToLineCenter(bounds: IRectangle2, line: ILine) {\n  let minDistance = Number.POSITIVE_INFINITY;\n  let countIntersections = 0;\n\n  function testLine(xa: number, ya: number, xb: number, yb: number) {\n    let testDistance = fractionAlongLineA(line, new Line(xa, ya, xb, yb));\n    testDistance = Math.abs(testDistance - 0.5);\n    if (testDistance >= 0 && testDistance <= 1) {\n      countIntersections++;\n      if (testDistance < minDistance) {\n        minDistance = testDistance;\n      }\n    }\n  }\n\n  // top\n  testLine(bounds.x, bounds.y, bounds.x2, bounds.y);\n  // left\n  testLine(bounds.x, bounds.y, bounds.x, bounds.y2);\n  if (countIntersections > 1) {\n    return minDistance;\n  }\n  // bottom\n  testLine(bounds.x, bounds.y2, bounds.x2, bounds.y2);\n  if (countIntersections > 1) {\n    return minDistance;\n  }\n  // right\n  testLine(bounds.x2, bounds.y, bounds.x2, bounds.y2);\n  // if no intersection, return -1\n  if (countIntersections === 0) {\n    return -1;\n  }\n  return minDistance;\n}\n\nexport function fractionToLineEnd(bounds: IRectangle2, line: ILine) {\n  let minDistance = Number.POSITIVE_INFINITY;\n  let countIntersections = 0;\n\n  function testLine(xa: number, ya: number, xb: number, yb: number) {\n    const testDistance = fractionAlongLineA(line, new Line(xa, ya, xb, yb));\n    if (testDistance >= 0 && testDistance <= 1) {\n      countIntersections++;\n      if (testDistance < minDistance) {\n        minDistance = testDistance;\n      }\n    }\n  }\n\n  // top\n  testLine(bounds.x, bounds.y, bounds.x2, bounds.y);\n  // left\n  testLine(bounds.x, bounds.y, bounds.x, bounds.y2);\n  if (countIntersections > 1) {\n    return minDistance;\n  }\n  // bottom\n  testLine(bounds.x, bounds.y2, bounds.x2, bounds.y2);\n  if (countIntersections > 1) {\n    return minDistance;\n  }\n  // right\n  testLine(bounds.x2, bounds.y, bounds.x2, bounds.y2);\n  // if no intersection, return -1\n  if (countIntersections === 0) {\n    return -1;\n  }\n  return minDistance;\n}\n\nexport function testIntersection(line: ILine, bounds: IRectangle2) {\n  let count = 0;\n  // top\n  const top = intersectLineLine(line, new Line(bounds.x, bounds.y, bounds.x2, bounds.y));\n  count += top.state === EState.POINT ? 1 : 0;\n  // left\n  const left = intersectLineLine(line, new Line(bounds.x, bounds.y, bounds.x, bounds.y2));\n  count += left.state === EState.POINT ? 1 : 0;\n  // bottom\n  const bottom = intersectLineLine(line, new Line(bounds.x, bounds.y2, bounds.x2, bounds.y2));\n  count += bottom.state === EState.POINT ? 1 : 0;\n  // right\n  const right = intersectLineLine(line, new Line(bounds.x2, bounds.y, bounds.x2, bounds.y2));\n  count += right.state === EState.POINT ? 1 : 0;\n\n  return { top, left, bottom, right, count };\n}\n", "import type { IPoint, IRectangle, IRectangle2, ICircle } from '../interfaces';\nimport { ptsDistanceSq } from '../utils';\nimport { outcode, OutCode } from '../Intersection';\n\nexport class Rectangle implements IRectangle2, ICircle {\n  constructor(\n    public x: number,\n    public y: number,\n    public width: number,\n    public height: number\n  ) {}\n\n  get x2() {\n    return this.x + this.width;\n  }\n\n  get y2() {\n    return this.y + this.height;\n  }\n\n  get cx() {\n    return this.x + this.width / 2;\n  }\n\n  get cy() {\n    return this.y + this.height / 2;\n  }\n\n  get radius() {\n    return Math.max(this.width, this.height) / 2;\n  }\n\n  static from(r: IRectangle) {\n    return new Rectangle(r.x, r.y, r.width, r.height);\n  }\n\n  equals(that: IRectangle) {\n    return this.x === that.x && this.y === that.y && this.width === that.width && this.height === that.height;\n  }\n\n  clone() {\n    return new Rectangle(this.x, this.y, this.width, this.height);\n  }\n\n  add(that: IRectangle) {\n    const x = Math.min(this.x, that.x);\n    const y = Math.min(this.y, that.y);\n    const x2 = Math.max(this.x2, that.x + that.width);\n    const y2 = Math.max(this.y2, that.y + that.height);\n    this.x = x;\n    this.y = y;\n    this.width = x2 - x;\n    this.height = y2 - y;\n  }\n\n  addPoint(p: IPoint) {\n    const x = Math.min(this.x, p.x);\n    const y = Math.min(this.y, p.y);\n    const x2 = Math.max(this.x2, p.x);\n    const y2 = Math.max(this.y2, p.y);\n    this.x = x;\n    this.y = y;\n    this.width = x2 - x;\n    this.height = y2 - y;\n  }\n\n  toString() {\n    return `Rectangle[x=${this.x}, y=${this.y}, w=${this.width}, h=${this.height}]`;\n  }\n\n  draw(ctx: CanvasRenderingContext2D) {\n    ctx.rect(this.x, this.y, this.width, this.height);\n  }\n\n  containsPt(px: number, py: number) {\n    return px >= this.x && px <= this.x2 && py >= this.y && py <= this.y2;\n  }\n\n  get area() {\n    return this.width * this.height;\n  }\n\n  intersects(that: IRectangle) {\n    if (this.area <= 0 || that.width <= 0 || that.height <= 0) {\n      return false;\n    }\n    return that.x + that.width > this.x && that.y + that.height > this.y && that.x < this.x2 && that.y < this.y2;\n  }\n\n  distSquare(tempX: number, tempY: number) {\n    // test current point to see if it is inside rectangle\n    if (this.containsPt(tempX, tempY)) {\n      return 0;\n    }\n    // which edge of rectangle is closest\n    const code = outcode(this, tempX, tempY);\n    // top\n    if (code.has(OutCode.TOP)) {\n      // and left\n      if (code.has(OutCode.LEFT)) {\n        // linear distance from upper left corner\n        return ptsDistanceSq(tempX, tempY, this.x, this.y);\n      }\n      if (code.has(OutCode.RIGHT)) {\n        // and right\n        // linear distance from upper right corner\n        return ptsDistanceSq(tempX, tempY, this.x2, this.y);\n      }\n      // distance from top line segment\n      return (this.y - tempY) * (this.y - tempY);\n    }\n    // bottom\n    if (code.has(OutCode.BOTTOM)) {\n      // and left\n      if (code.has(OutCode.LEFT)) {\n        // linear distance from lower left corner\n        return ptsDistanceSq(tempX, tempY, this.x, this.y2);\n      }\n      // and right\n      if (code.has(OutCode.RIGHT)) {\n        // linear distance from lower right corner\n        return ptsDistanceSq(tempX, tempY, this.x2, this.y2);\n      }\n      // distance from bottom line segment\n      return (tempY - this.y2) * (tempY - this.y2);\n    }\n    // left only\n    if (code.has(OutCode.LEFT)) {\n      // linear distance from left edge\n      return (this.x - tempX) * (this.x - tempX);\n    }\n    // right only\n    if (code.has(OutCode.RIGHT)) {\n      // linear distance from right edge\n      return (tempX - this.x2) * (tempX - this.x2);\n    }\n    return 0;\n  }\n}\n\nexport function boundingBox(path: ReadonlyArray<IPoint>) {\n  if (path.length === 0) {\n    return null;\n  }\n  const first = path[0];\n  const bb = new Rectangle(first.x, first.y, 0, 0);\n  for (const point of path) {\n    bb.addPoint(point);\n  }\n  return bb;\n}\n", "import type { ICircle, IRectangle2 } from '../interfaces';\nimport { ptsDistanceSq } from '../utils';\n\nexport class Circle implements IRectangle2, ICircle {\n  constructor(\n    public cx: number,\n    public cy: number,\n    public radius: number\n  ) {}\n\n  get x() {\n    return this.cx - this.radius;\n  }\n\n  get x2() {\n    return this.cx + this.radius;\n  }\n\n  get width() {\n    return this.radius * 2;\n  }\n\n  get y() {\n    return this.cy - this.radius;\n  }\n\n  get y2() {\n    return this.cy + this.radius;\n  }\n\n  get height() {\n    return this.radius * 2;\n  }\n\n  static from(r: ICircle) {\n    return new Circle(r.cx, r.cy, r.radius);\n  }\n\n  containsPt(x: number, y: number) {\n    return ptsDistanceSq(this.cx, this.cy, x, y) < this.radius * this.radius;\n  }\n\n  distSquare(tempX: number, tempY: number) {\n    const dist = ptsDistanceSq(this.cx, this.cy, tempX, tempY);\n    if (dist < this.radius * this.radius) {\n      // inside\n      return 0;\n    }\n    const offset = Math.sqrt(dist) - this.radius;\n    return offset * offset;\n  }\n\n  draw(ctx: CanvasRenderingContext2D) {\n    ctx.ellipse(this.cx, this.cy, this.radius, this.radius, 0, 0, Math.PI * 2);\n  }\n}\n", "import type { IRectangle, IPoint } from '../interfaces';\nimport { Rectangle } from './Rectangle';\n\nexport class Area {\n  private readonly area: Float32Array;\n\n  constructor(\n    public readonly pixelGroup: number,\n    public readonly i = 0,\n    public readonly j = 0,\n    public readonly pixelX = 0,\n    public readonly pixelY = 0,\n    public readonly width: number = 10,\n    public readonly height: number = 10,\n    pixels = new Float32Array(Math.max(0, width * height)).fill(0)\n  ) {\n    this.area = pixels;\n  }\n\n  createSub(rect: IRectangle, pixelPos: IPoint) {\n    return new Area(this.pixelGroup, rect.x, rect.y, pixelPos.x, pixelPos.y, rect.width, rect.height);\n  }\n\n  static fromPixelRegion(pixelRect: IRectangle, pixelGroup: number) {\n    return new Area(\n      pixelGroup,\n      0,\n      0,\n      pixelRect.x,\n      pixelRect.y,\n      Math.ceil(pixelRect.width / pixelGroup),\n      Math.ceil(pixelRect.height / pixelGroup)\n    );\n  }\n\n  copy(sub: Area, pixelPoint: IPoint) {\n    return new Area(\n      this.pixelGroup,\n      this.scaleX(pixelPoint.x),\n      this.scaleY(pixelPoint.y),\n      pixelPoint.x,\n      pixelPoint.y,\n      sub.width,\n      sub.height,\n      sub.area\n    );\n  }\n\n  boundX(pos: number) {\n    if (pos < this.i) {\n      return this.i;\n    }\n    if (pos >= this.width) {\n      return this.width - 1;\n    }\n    return pos;\n  }\n\n  boundY(pos: number) {\n    if (pos < this.j) {\n      return this.j;\n    }\n    if (pos >= this.height) {\n      return this.height - 1;\n    }\n    return pos;\n  }\n\n  scaleX(pixel: number) {\n    return this.boundX(Math.floor((pixel - this.pixelX) / this.pixelGroup));\n  }\n\n  scaleY(pixel: number) {\n    return this.boundY(Math.floor((pixel - this.pixelY) / this.pixelGroup));\n  }\n\n  scale(pixelRect: IRectangle) {\n    const x = this.scaleX(pixelRect.x);\n    const y = this.scaleY(pixelRect.y);\n    const x2 = this.boundX(Math.ceil((pixelRect.x + pixelRect.width - this.pixelX) / this.pixelGroup));\n    const y2 = this.boundY(Math.ceil((pixelRect.y + pixelRect.height - this.pixelY) / this.pixelGroup));\n    const width = x2 - x;\n    const height = y2 - y;\n    return new Rectangle(x, y, width, height);\n  }\n\n  invertScaleX(v: number) {\n    return Math.round(v * this.pixelGroup + this.pixelX);\n  }\n\n  invertScaleY(v: number) {\n    return Math.round(v * this.pixelGroup + this.pixelY);\n  }\n\n  addPadding(rect: Rectangle, pixelPadding: number) {\n    const padding = Math.ceil(pixelPadding / this.pixelGroup);\n    const x = this.boundX(rect.x - padding);\n    const y = this.boundY(rect.y - padding);\n    const x2 = this.boundX(rect.x2 + padding);\n    const y2 = this.boundY(rect.y2 + padding);\n    const width = x2 - x;\n    const height = y2 - y;\n    return new Rectangle(x, y, width, height);\n  }\n\n  get(i: number, j: number) {\n    if (i < 0 || j < 0 || i >= this.width || j >= this.height) {\n      return Number.NaN;\n    }\n    return this.area[i + j * this.width];\n  }\n\n  inc(i: number, j: number, v: number) {\n    if (i < 0 || j < 0 || i >= this.width || j >= this.height) {\n      return;\n    }\n    this.area[i + j * this.width] += v;\n  }\n\n  set(i: number, j: number, v: number) {\n    if (i < 0 || j < 0 || i >= this.width || j >= this.height) {\n      return;\n    }\n    this.area[i + j * this.width] = v;\n  }\n\n  incArea(sub: Area, factor: number) {\n    if (sub.width <= 0 || sub.height <= 0 || factor === 0) {\n      return;\n    }\n    // assume it is within the bounds\n    const w = this.width;\n    const aw = sub.width;\n    const i1 = Math.max(0, sub.i);\n    const j1 = Math.max(0, sub.j);\n    const i2 = Math.min(sub.i + sub.width, w);\n    const j2 = Math.min(sub.j + sub.height, this.height);\n\n    if (j2 <= 0 || i2 <= 0 || i1 >= w || j2 >= this.height) {\n      return;\n    }\n\n    for (let j = j1; j < j2; j++) {\n      const subRow = (j - sub.j) * aw;\n      const row = j * w;\n      for (let i = i1; i < i2; i++) {\n        const v = sub.area[i - sub.i + subRow];\n        if (v === 0) {\n          continue;\n        }\n        this.area[i + row] += factor * v;\n      }\n    }\n  }\n\n  fill(value: number) {\n    this.area.fill(value);\n  }\n\n  fillArea(rect: IRectangle, value: number) {\n    const offset = rect.x + rect.y * this.width;\n    for (let j = 0; j < rect.height; j++) {\n      const pos = offset + j * this.width;\n      this.area.fill(value, pos, pos + rect.width);\n    }\n  }\n\n  fillHorizontalLine(i: number, j: number, width: number, value: number) {\n    const offset = i + j * this.width;\n    this.area.fill(value, offset, offset + width);\n  }\n\n  fillVerticalLine(i: number, j: number, height: number, value: number) {\n    const offset = i + j * this.width;\n    for (let k = 0; k < height; k++) {\n      this.area[offset + k * this.width] = value;\n    }\n  }\n\n  clear() {\n    this.area.fill(0);\n  }\n\n  toString() {\n    let r = '';\n    for (let j = 0; j < this.height; j++) {\n      const row = j * this.width;\n      for (let i = 0; i < this.width; i++) {\n        const v = this.area[row + i];\n        r += v.toFixed(1).padStart(6);\n        r += ' ';\n      }\n      r += '\\n';\n    }\n    return r;\n  }\n\n  draw(ctx: CanvasRenderingContext2D, offset = true) {\n    if (this.width <= 0 || this.height <= 0) {\n      return;\n    }\n    ctx.save();\n    if (offset) {\n      ctx.translate(this.pixelX, this.pixelY);\n    }\n    const min = this.area.reduce((acc, v) => Math.min(acc, v), Number.POSITIVE_INFINITY);\n    const max = this.area.reduce((acc, v) => Math.max(acc, v), Number.NEGATIVE_INFINITY);\n\n    const scale = (v: number) => (v - min) / (max - min);\n    ctx.scale(this.pixelGroup, this.pixelGroup);\n    for (let i = 0; i < this.width; i++) {\n      for (let j = 0; j < this.height; j++) {\n        const v = this.area[i + j * this.width];\n        ctx.fillStyle = `rgba(0, 0, 0, ${scale(v)})`;\n        ctx.fillRect(i, j, 1, 1);\n      }\n    }\n    ctx.restore();\n  }\n\n  drawThreshold(ctx: CanvasRenderingContext2D, threshold: number, offset = true) {\n    if (this.width <= 0 || this.height <= 0) {\n      return;\n    }\n    ctx.save();\n    if (offset) {\n      ctx.translate(this.pixelX, this.pixelY);\n    }\n    ctx.scale(this.pixelGroup, this.pixelGroup);\n    for (let i = 0; i < this.width; i++) {\n      for (let j = 0; j < this.height; j++) {\n        const v = this.area[i + j * this.width];\n        ctx.fillStyle = v > threshold ? 'black' : 'white';\n        ctx.fillRect(i, j, 1, 1);\n      }\n    }\n    ctx.restore();\n  }\n}\n", "import type { IRectangle } from './interfaces';\n\nexport function addPadding(rect: IRectangle, padding: number): IRectangle;\nexport function addPadding(rect: ReadonlyArray<IRectangle>, padding: number): ReadonlyArray<IRectangle>;\nexport function addPadding(\n  rect: IRectangle | ReadonlyArray<IRectangle>,\n  padding: number\n): IRectangle | ReadonlyArray<IRectangle> {\n  const map = (r: IRectangle) => ({\n    x: r.x - padding,\n    y: r.y - padding,\n    width: r.width + 2 * padding,\n    height: r.height + 2 * padding,\n  });\n  if (Array.isArray(rect)) {\n    return rect.map(map);\n  }\n  return map(rect as IRectangle);\n}\n", "import { lineBoundingBox } from './model';\nimport type { Area } from './model/Area';\nimport { addPadding } from './padding';\nimport type { IRectangle, ILine } from './interfaces';\nimport { linePtSegDistSq } from './utils';\n\nexport function createLineInfluenceArea(line: ILine, potentialArea: Area, padding: number) {\n  return createGenericInfluenceArea(\n    Object.assign(lineBoundingBox(line), {\n      distSquare: (x: number, y: number) => linePtSegDistSq(line.x1, line.y1, line.x2, line.y2, x, y),\n    }),\n    potentialArea,\n    padding\n  );\n}\n\nexport function createGenericInfluenceArea(\n  shape: IRectangle & { distSquare(x: number, y: number): number },\n  potentialArea: Area,\n  padding: number\n) {\n  const lr = addPadding(shape, padding);\n  const scaled = potentialArea.scale(lr);\n  const area = potentialArea.createSub(scaled, lr);\n  sample(area, potentialArea, padding, (x, y) => shape.distSquare(x, y));\n  return area;\n}\n\nfunction sample(area: Area, potentialArea: Area, padding: number, distanceFunction: (x: number, y: number) => number) {\n  const padding2 = padding * padding;\n\n  // find the affected subregion of potentialArea\n  // for every point in active subregion of potentialArea, calculate\n  // distance to nearest point on rectangle and add influence\n\n  for (let y = 0; y < area.height; y++) {\n    for (let x = 0; x < area.width; x++) {\n      // convert back to screen coordinates\n      const tempX = potentialArea.invertScaleX(area.i + x);\n      const tempY = potentialArea.invertScaleY(area.j + y);\n      const distanceSq = distanceFunction(tempX, tempY);\n      if (distanceSq === 0) {\n        area.set(x, y, padding2);\n        continue;\n      }\n      // only influence if less than r1\n      if (distanceSq < padding2) {\n        const dr = padding - Math.sqrt(distanceSq);\n        area.set(x, y, dr * dr);\n      }\n    }\n  }\n  return area;\n}\n\nexport function createRectangleInfluenceArea(\n  rect: IRectangle & { distSquare(x: number, y: number): number },\n  potentialArea: Area,\n  padding: number\n) {\n  const scaled = potentialArea.scale(rect);\n  const padded = potentialArea.addPadding(scaled, padding);\n  const area = potentialArea.createSub(padded, { x: rect.x - padding, y: rect.y - padding });\n  const paddingLeft = scaled.x - padded.x;\n  const paddingTop = scaled.y - padded.y;\n  const paddingRight = padded.x2 - scaled.x2;\n  const paddingBottom = padded.y2 - scaled.y2;\n  const innerWidth = padded.width - paddingLeft - paddingRight;\n  const innerHeight = padded.height - paddingTop - paddingBottom;\n\n  // outside rect ... depends on distance\n  // cttc\n  // lffr\n  // lffr\n  // cbbc\n  const padding2 = padding * padding;\n  // within the rect ... full ri2\n  area.fillArea(\n    {\n      x: paddingLeft,\n      y: paddingTop,\n      width: innerWidth + 1,\n      height: innerHeight + 1,\n    },\n    padding2\n  );\n\n  const straightDistances: number[] = [0];\n  const maxPadding = Math.max(paddingTop, paddingLeft, paddingRight, paddingBottom);\n  {\n    const tempX = potentialArea.invertScaleX(scaled.x + scaled.width / 2);\n    for (let i = 1; i < maxPadding; i++) {\n      const tempY = potentialArea.invertScaleY(scaled.y - i);\n      const distanceSq = rect.distSquare(tempX, tempY);\n      // only influence if less than r1\n      if (distanceSq < padding2) {\n        const dr = padding - Math.sqrt(distanceSq);\n        straightDistances.push(dr * dr);\n      } else {\n        break;\n      }\n    }\n  }\n  const cornerDistances: number[][] = [];\n  const maxHorizontalPadding = Math.max(paddingLeft, paddingRight);\n  const maxVerticalPadding = Math.max(paddingTop, paddingRight);\n  for (let i = 1; i < maxHorizontalPadding; i++) {\n    const tempX = potentialArea.invertScaleX(scaled.x - i);\n    const row: number[] = [];\n    for (let j = 1; j < maxVerticalPadding; j++) {\n      const tempY = potentialArea.invertScaleY(scaled.y - j);\n      const distanceSq = rect.distSquare(tempX, tempY);\n      // only influence if less than r1\n      if (distanceSq < padding2) {\n        const dr = padding - Math.sqrt(distanceSq);\n        row.push(dr * dr);\n      } else {\n        row.push(0);\n      }\n    }\n    cornerDistances.push(row);\n  }\n\n  //top\n  for (let y = 1; y < Math.min(paddingTop, straightDistances.length); y++) {\n    const value = straightDistances[y];\n    area.fillHorizontalLine(paddingLeft, paddingTop - y, innerWidth + 1, value);\n  }\n  //bottom\n  for (let y = 1; y < Math.min(paddingBottom, straightDistances.length); y++) {\n    const value = straightDistances[y];\n    area.fillHorizontalLine(paddingLeft, paddingTop + innerHeight + y, innerWidth + 1, value);\n  }\n  //left\n  for (let x = 1; x < Math.min(paddingLeft, straightDistances.length); x++) {\n    const value = straightDistances[x];\n    area.fillVerticalLine(paddingLeft - x, paddingTop, innerHeight + 1, value);\n  }\n  //right\n  for (let x = 1; x < Math.min(paddingBottom, straightDistances.length); x++) {\n    const value = straightDistances[x];\n    area.fillVerticalLine(paddingLeft + innerWidth + x, paddingTop, innerHeight + 1, value);\n  }\n  //top/bottom left\n  for (let i = 1; i < paddingLeft; i++) {\n    const row = cornerDistances[i - 1];\n    const ii = paddingLeft - i;\n    for (let j = 1; j < paddingTop; j++) {\n      area.set(ii, paddingTop - j, row[j - 1]);\n    }\n    for (let j = 1; j < paddingBottom; j++) {\n      area.set(ii, paddingTop + innerHeight + j, row[j - 1]);\n    }\n  }\n  //top/bottom right\n  for (let i = 1; i < paddingRight; i++) {\n    const row = cornerDistances[i - 1];\n    const ii = paddingLeft + innerWidth + i;\n    for (let j = 1; j < paddingTop; j++) {\n      area.set(ii, paddingTop - j, row[j - 1]);\n    }\n    for (let j = 1; j < paddingBottom; j++) {\n      area.set(ii, paddingTop + innerHeight + j, row[j - 1]);\n    }\n  }\n\n  // const other = sample(padded, potentialArea, padding, (x, y) => rect.rectDistSq(x, y));\n  // console.log(other.toString());\n  // console.log(area.toString());\n  return area;\n}\n", "export declare type IPoint = { x: number; y: number };\n\nexport interface ICenterPoint {\n  cx: number;\n  cy: number;\n}\n\nexport interface IRectangle extends IPoint {\n  width: number;\n  height: number;\n}\n\nexport interface IRectangle2 extends IRectangle {\n  x2: number;\n  y2: number;\n}\n\nexport interface ILine {\n  x1: number;\n  y1: number;\n  x2: number;\n  y2: number;\n}\n\nexport interface ICircle extends ICenterPoint {\n  radius: number;\n}\n\nexport function rect(x: number, y: number, width: number, height: number): IRectangle {\n  return { x, y, width, height };\n}\n\nexport function circle(cx: number, cy: number, radius: number): ICircle {\n  return { cx, cy, radius };\n}\n\nexport function line(x1: number, y1: number, x2: number, y2: number): ILine {\n  return { x1, y1, x2, y2 };\n}\n\nexport function point(x: number, y: number) {\n  return { x, y };\n}\n", "import {\n  EState,\n  fractionToLineCenter,\n  Intersection,\n  testIntersection,\n  hasFractionToLineCenter,\n  intersectsLine,\n} from './Intersection';\nimport { Line } from './model/Line';\nimport { doublePointsEqual, ptsDistanceSq } from './utils';\nimport { type IPoint, point, type ICircle, type IRectangle2 } from './interfaces';\n\nexport function calculateVirtualEdges(\n  items: ReadonlyArray<ICircle>,\n  nonMembers: ReadonlyArray<IRectangle2 & { containsPt(x: number, y: number): boolean }>,\n  maxRoutingIterations: number,\n  morphBuffer: number\n) {\n  if (items.length === 0) {\n    return [];\n  }\n  const sorted = sortByDistanceToCentroid(items);\n\n  return sorted\n    .map((d, i) => {\n      const visited = sorted.slice(0, i);\n      return connectItem(nonMembers, d, visited, maxRoutingIterations, morphBuffer);\n    })\n    .flat();\n}\n\nfunction connectItem(\n  nonMembers: ReadonlyArray<IRectangle2 & { containsPt(x: number, y: number): boolean }>,\n  item: ICircle,\n  visited: ReadonlyArray<ICircle>,\n  maxRoutingIterations: number,\n  morphBuffer: number\n) {\n  const itemCenter = point(item.cx, item.cy);\n\n  // discover the nearest neighbor with minimal interference items\n  const closestNeighbor = calculateClosestNeighbor(itemCenter, visited, nonMembers);\n  if (closestNeighbor == null) {\n    return [];\n  }\n  // if there is a visited closest neighbor, add straight line between\n  // them to the positive energy to ensure connected clusters\n  const directLine = new Line(itemCenter.x, itemCenter.y, closestNeighbor.cx, closestNeighbor.cy);\n\n  // route the edge around intersecting nodes not in set\n  const scannedLines = computeRoute(directLine, nonMembers, maxRoutingIterations, morphBuffer);\n\n  return mergeLines(scannedLines, nonMembers);\n}\n\nfunction computeRoute(\n  directLine: Line,\n  nonMembers: ReadonlyArray<IRectangle2 & { containsPt(x: number, y: number): boolean }>,\n  maxRoutingIterations: number,\n  morphBuffer: number\n) {\n  // route the edge around intersecting nodes not in set\n  const scannedLines: Line[] = [];\n  const linesToCheck: Line[] = [];\n  linesToCheck.push(directLine);\n\n  let hasIntersection = true;\n\n  for (let iterations = 0; iterations < maxRoutingIterations && hasIntersection; iterations++) {\n    hasIntersection = false;\n    while (!hasIntersection && linesToCheck.length > 0) {\n      const line = linesToCheck.pop()!;\n      // resolve intersections in order along edge\n      const closestItem = getCenterItem(nonMembers, line);\n      const intersections = closestItem ? testIntersection(line, closestItem) : null;\n\n      // 2 intersections = line passes through item\n      if (!closestItem || !intersections || intersections.count !== 2) {\n        // no intersection found, mark this line as completed\n        if (!hasIntersection) {\n          scannedLines.push(line);\n        }\n        continue;\n      }\n\n      let tempMorphBuffer = morphBuffer;\n      let movePoint = rerouteLine(closestItem, tempMorphBuffer, intersections, true);\n      // test the movePoint already exists\n      let foundFirst = pointExists(movePoint, linesToCheck) || pointExists(movePoint, scannedLines);\n      let pointInside = isPointInRectangles(movePoint, nonMembers);\n      // prefer first corner, even if buffer becomes very small\n      while (!foundFirst && pointInside && tempMorphBuffer >= 1) {\n        // try a smaller buffer\n        tempMorphBuffer /= 1.5;\n        movePoint = rerouteLine(closestItem, tempMorphBuffer, intersections, true);\n        foundFirst = pointExists(movePoint, linesToCheck) || pointExists(movePoint, scannedLines);\n        pointInside = isPointInRectangles(movePoint, nonMembers);\n      }\n\n      if (movePoint && !foundFirst && !pointInside) {\n        // add 2 rerouted lines to check\n        linesToCheck.push(new Line(line.x1, line.y1, movePoint.x, movePoint.y));\n        linesToCheck.push(new Line(movePoint.x, movePoint.y, line.x2, line.y2));\n        // indicate intersection found\n        hasIntersection = true;\n      }\n\n      if (hasIntersection) {\n        continue;\n      }\n\n      // if we didn't find a valid point around the\n      // first corner, try the second\n      tempMorphBuffer = morphBuffer;\n      movePoint = rerouteLine(closestItem, tempMorphBuffer, intersections, false);\n      let foundSecond = pointExists(movePoint, linesToCheck) || pointExists(movePoint, scannedLines);\n      pointInside = isPointInRectangles(movePoint, nonMembers);\n      // if both corners have been used, stop; otherwise gradually reduce buffer and try second corner\n      while (!foundSecond && pointInside && tempMorphBuffer >= 1) {\n        // try a smaller buffer\n        tempMorphBuffer /= 1.5;\n        movePoint = rerouteLine(closestItem, tempMorphBuffer, intersections, false);\n        foundSecond = pointExists(movePoint, linesToCheck) || pointExists(movePoint, scannedLines);\n        pointInside = isPointInRectangles(movePoint, nonMembers);\n      }\n\n      if (movePoint && !foundSecond) {\n        // add 2 rerouted lines to check\n        linesToCheck.push(new Line(line.x1, line.y1, movePoint.x, movePoint.y));\n        linesToCheck.push(new Line(movePoint.x, movePoint.y, line.x2, line.y2));\n        // indicate intersection found\n        hasIntersection = true;\n      }\n      // no intersection found, mark this line as completed\n      if (!hasIntersection) {\n        scannedLines.push(line);\n      }\n    }\n  }\n  // finalize any that were not rerouted (due to running out of\n  // iterations) or if we aren't morphing\n  while (linesToCheck.length > 0) {\n    scannedLines.push(linesToCheck.pop()!);\n  }\n\n  return scannedLines;\n}\n\nfunction mergeLines(scannedLines: Line[], nonMembers: ReadonlyArray<IRectangle2>) {\n  const finalRoute: Line[] = [];\n  // try to merge consecutive lines if possible\n  while (scannedLines.length > 0) {\n    const line1 = scannedLines.pop()!;\n    if (scannedLines.length === 0) {\n      finalRoute.push(line1);\n      break;\n    }\n    const line2 = scannedLines.pop()!;\n    const mergeLine = new Line(line1.x1, line1.y1, line2.x2, line2.y2);\n    // resolve intersections in order along edge\n    const closestItem = getCenterItem(nonMembers, mergeLine);\n    // merge most recent line and previous line\n    if (!closestItem) {\n      scannedLines.push(mergeLine);\n    } else {\n      finalRoute.push(line1);\n      scannedLines.push(line2);\n    }\n  }\n  return finalRoute;\n}\n\nfunction calculateClosestNeighbor(\n  itemCenter: IPoint,\n  visited: ReadonlyArray<ICircle>,\n  nonMembers: ReadonlyArray<IRectangle2>\n) {\n  let minLengthSq = Number.POSITIVE_INFINITY;\n  return visited.reduce(\n    (closestNeighbor, neighborItem) => {\n      const distanceSq = ptsDistanceSq(itemCenter.x, itemCenter.y, neighborItem.cx, neighborItem.cy);\n      if (distanceSq > minLengthSq) {\n        // the interference can only increase the distance so if already bigger, return\n        return closestNeighbor;\n      }\n\n      const directLine = new Line(itemCenter.x, itemCenter.y, neighborItem.cx, neighborItem.cy);\n      // augment distance by number of interfering items\n      const numberInterferenceItems = itemsCuttingLine(nonMembers, directLine);\n\n      // TODO is there a better function to consider interference in nearest-neighbor checking? This is hacky\n      if (distanceSq * (numberInterferenceItems + 1) * (numberInterferenceItems + 1) < minLengthSq) {\n        closestNeighbor = neighborItem;\n        minLengthSq = distanceSq * (numberInterferenceItems + 1) * (numberInterferenceItems + 1);\n      }\n      return closestNeighbor;\n    },\n    null as ICircle | null\n  );\n}\n\nfunction sortByDistanceToCentroid<T extends ICircle>(items: ReadonlyArray<T>) {\n  if (items.length < 2) {\n    return items;\n  }\n  let totalX = 0;\n  let totalY = 0;\n  items.forEach((item) => {\n    totalX += item.cx;\n    totalY += item.cy;\n  });\n  totalX /= items.length;\n  totalY /= items.length;\n  return items\n    .map((item) => {\n      const diffX = totalX - item.cx;\n      const diffY = totalY - item.cy;\n      const dist = diffX * diffX + diffY * diffY;\n      return [item, dist] as [T, number];\n    })\n    .sort((a, b) => a[1] - b[1])\n    .map((d) => d[0]);\n}\n\nfunction isPointInRectangles(p: IPoint, rects: ReadonlyArray<{ containsPt(x: number, y: number): boolean }>) {\n  return rects.some((r) => r.containsPt(p.x, p.y));\n}\n\nfunction pointExists(pointToCheck: IPoint, lines: ReadonlyArray<Line>) {\n  return lines.some((checkEndPointsLine) => {\n    if (doublePointsEqual(checkEndPointsLine.x1, checkEndPointsLine.y1, pointToCheck.x, pointToCheck.y, 1e-3)) {\n      return true;\n    }\n    if (doublePointsEqual(checkEndPointsLine.x2, checkEndPointsLine.y2, pointToCheck.x, pointToCheck.y, 1e-3)) {\n      return true;\n    }\n    return false;\n  });\n}\n\nfunction getCenterItem(items: ReadonlyArray<IRectangle2>, testLine: Line) {\n  let minDistance = Number.POSITIVE_INFINITY;\n  let closestItem: IRectangle2 | null = null;\n\n  for (const item of items) {\n    if (!intersectsLine(item, testLine)) {\n      continue;\n    }\n    const distance = fractionToLineCenter(item, testLine);\n    // find closest intersection\n    if (distance >= 0 && distance < minDistance) {\n      closestItem = item;\n      minDistance = distance;\n    }\n  }\n  return closestItem;\n}\n\nfunction itemsCuttingLine(items: ReadonlyArray<IRectangle2>, testLine: Line) {\n  return items.reduce((count, item) => {\n    if (intersectsLine(item, testLine) && hasFractionToLineCenter(item, testLine)) {\n      return count + 1;\n    }\n    return count;\n  }, 0);\n}\n\nfunction rerouteLine(\n  item: IRectangle2,\n  rerouteBuffer: number,\n  intersections: { top: Intersection; left: Intersection; right: Intersection; bottom: Intersection },\n  wrapNormal: boolean\n) {\n  const topIntersect = intersections.top;\n  const leftIntersect = intersections.left;\n  const bottomIntersect = intersections.bottom;\n  const rightIntersect = intersections.right;\n\n  // wrap around the most efficient way\n  if (wrapNormal) {\n    // left side\n    if (leftIntersect.state === EState.POINT) {\n      if (topIntersect.state === EState.POINT)\n        // triangle, must go around top left\n        return point(item.x - rerouteBuffer, item.y - rerouteBuffer);\n      if (bottomIntersect.state === EState.POINT)\n        // triangle, must go around bottom left\n        return point(item.x - rerouteBuffer, item.y2 + rerouteBuffer);\n      // else through left to right, calculate areas\n      const totalArea = item.width * item.height;\n      // top area\n      const topArea = item.width * ((leftIntersect.y - item.y + (rightIntersect.y - item.y)) * 0.5);\n      if (topArea < totalArea * 0.5) {\n        // go around top (the side which would make a greater movement)\n        if (leftIntersect.y > rightIntersect.y)\n          // top left\n          return point(item.x - rerouteBuffer, item.y - rerouteBuffer);\n        // top right\n        return point(item.x2 + rerouteBuffer, item.y - rerouteBuffer);\n      }\n      // go around bottom\n      if (leftIntersect.y < rightIntersect.y)\n        // bottom left\n        return point(item.x - rerouteBuffer, item.y2 + rerouteBuffer);\n      // bottom right\n      return point(item.x2 + rerouteBuffer, item.y2 + rerouteBuffer);\n    }\n    // right side\n    if (rightIntersect.state === EState.POINT) {\n      if (topIntersect.state === EState.POINT)\n        // triangle, must go around top right\n        return point(item.x2 + rerouteBuffer, item.y - rerouteBuffer);\n      if (bottomIntersect.state === EState.POINT)\n        // triangle, must go around bottom right\n        return point(item.x2 + rerouteBuffer, item.y2 + rerouteBuffer);\n    }\n    // else through top to bottom, calculate areas\n    const totalArea = item.height * item.width;\n    const leftArea = item.height * ((topIntersect.x - item.x + (rightIntersect.x - item.x)) * 0.5);\n    if (leftArea < totalArea * 0.5) {\n      // go around left\n      if (topIntersect.x > bottomIntersect.x)\n        // top left\n        return point(item.x - rerouteBuffer, item.y - rerouteBuffer);\n      // bottom left\n      return point(item.x - rerouteBuffer, item.y2 + rerouteBuffer);\n    }\n    // go around right\n    if (topIntersect.x < bottomIntersect.x)\n      // top right\n      return point(item.x2 + rerouteBuffer, item.y - rerouteBuffer);\n    // bottom right\n    return point(item.x2 + rerouteBuffer, item.y2 + rerouteBuffer);\n  }\n  // wrap around opposite (usually because the first move caused a problem)\n  if (leftIntersect.state === EState.POINT) {\n    if (topIntersect.state === EState.POINT)\n      // triangle, must go around bottom right\n      return point(item.x2 + rerouteBuffer, item.y2 + rerouteBuffer);\n    if (bottomIntersect.state === EState.POINT)\n      // triangle, must go around top right\n      return point(item.x2 + rerouteBuffer, item.y - rerouteBuffer);\n    // else through left to right, calculate areas\n    const totalArea = item.height * item.width;\n    const topArea = item.width * ((leftIntersect.y - item.y + (rightIntersect.y - item.y)) * 0.5);\n    if (topArea < totalArea * 0.5) {\n      // go around bottom (the side which would make a lesser movement)\n      if (leftIntersect.y > rightIntersect.y)\n        // bottom right\n        return point(item.x2 + rerouteBuffer, item.y2 + rerouteBuffer);\n      // bottom left\n      return point(item.x - rerouteBuffer, item.y2 + rerouteBuffer);\n    }\n    // go around top\n    if (leftIntersect.y < rightIntersect.y)\n      // top right\n      return point(item.x2 + rerouteBuffer, item.y - rerouteBuffer);\n    // top left\n    return point(item.x - rerouteBuffer, item.y - rerouteBuffer);\n  }\n  if (rightIntersect.state === EState.POINT) {\n    if (topIntersect.state === EState.POINT)\n      // triangle, must go around bottom left\n      return point(item.x - rerouteBuffer, item.y2 + rerouteBuffer);\n    if (bottomIntersect.state === EState.POINT)\n      // triangle, must go around top left\n      return point(item.x - rerouteBuffer, item.y - rerouteBuffer);\n  }\n  // else through top to bottom, calculate areas\n  const totalArea = item.height * item.width;\n  const leftArea = item.height * ((topIntersect.x - item.x + (rightIntersect.x - item.x)) * 0.5);\n  if (leftArea < totalArea * 0.5) {\n    // go around right\n    if (topIntersect.x > bottomIntersect.x)\n      // bottom right\n      return point(item.x2 + rerouteBuffer, item.y2 + rerouteBuffer);\n    // top right\n    return point(item.x2 + rerouteBuffer, item.y - rerouteBuffer);\n  }\n  // go around left\n  if (topIntersect.x < bottomIntersect.x)\n    // bottom left\n    return point(item.x - rerouteBuffer, item.y2 + rerouteBuffer);\n  // top left\n  return point(item.x - rerouteBuffer, item.y - rerouteBuffer);\n}\n", "import { PointPath } from '../PointPath';\nimport { linePtSegDistSq } from '../utils';\nimport type { IPoint } from '../interfaces';\n\nfunction canTakeNext(path: PointPath, start: number, end: number, toleranceSquared: number) {\n  const validEnd = path.closed ? end < path.length : end < path.length - 1;\n  if (!validEnd) {\n    return false;\n  }\n\n  const s = path.get(start);\n  const e = path.get(end + 1);\n\n  for (let index = start + 1; index <= end; index++) {\n    const p = path.get(index);\n    const len = linePtSegDistSq(s.x, s.y, e.x, e.y, p.x, p.y);\n    if (len > toleranceSquared) {\n      return false;\n    }\n  }\n  return true;\n}\n\nexport function shapeSimplifier(tolerance = 0.0) {\n  return (path: PointPath) => {\n    if (tolerance < 0 || path.length < 3) {\n      return path;\n    }\n    const points: IPoint[] = [];\n    let start = 0;\n    const toleranceSquared = tolerance * tolerance;\n    while (start < path.length) {\n      let end = start + 1;\n      while (canTakeNext(path, start, end, toleranceSquared)) {\n        end++;\n      }\n      points.push(path.get(start));\n      start = end;\n    }\n    return new PointPath(points);\n  };\n}\n", "import { PointPath } from '../PointPath';\nimport type { IPoint } from '../interfaces';\n\nfunction basicFunction(i: number, t: number) {\n  // the basis function for a cubic B spline\n  switch (i) {\n    case -2:\n      return (((-t + 3.0) * t - 3.0) * t + 1.0) / 6.0;\n    case -1:\n      return ((3.0 * t - 6.0) * t * t + 4.0) / 6.0;\n    case 0:\n      return (((-3.0 * t + 3.0) * t + 3.0) * t + 1.0) / 6.0;\n    case 1:\n      return (t * t * t) / 6.0;\n    default:\n      throw new Error('unknown error');\n  }\n}\n\nexport function bSplineShapeGenerator(granularity = 6.0) {\n  const ORDER = 3;\n  const START_INDEX = ORDER - 1;\n  const REL_END = 1;\n  const REL_START = REL_END - ORDER;\n\n  function calcPoint(path: PointPath, i: number, t: number): IPoint {\n    let px = 0.0;\n    let py = 0.0;\n    for (let j = REL_START; j <= REL_END; j++) {\n      const p = path.get(i + j);\n      const bf = basicFunction(j, t);\n      px += bf * p.x;\n      py += bf * p.y;\n    }\n    return { x: px, y: py };\n  }\n\n  return (path: PointPath) => {\n    // covering special cases\n    if (path.length < 3) {\n      return path;\n    }\n    // actual b-spline calculation\n    const res: IPoint[] = [];\n    const closed = path.closed;\n    const count = path.length + ORDER - 1 + (closed ? 0 : 2);\n    res.push(calcPoint(path, START_INDEX - (closed ? 0 : 2), 0));\n    for (let ix = START_INDEX - (closed ? 0 : 2); ix < count; ix++) {\n      for (let k = 1; k <= granularity; k++) {\n        res.push(calcPoint(path, ix, k / granularity));\n      }\n    }\n    return new PointPath(res);\n  };\n}\n", "import { PointPath } from '../PointPath';\nimport type { IPoint } from '../interfaces';\n\nexport function samplePath(skip = 8) {\n  return (path: PointPath) => {\n    // start with global SKIP value, but decrease skip amount if there aren't enough points in the surface\n    let actSkip = skip;\n    // prepare viz attribute array\n    let size = path.length;\n\n    if (actSkip > 1) {\n      size = Math.floor(path.length / actSkip);\n      // if we reduced too much (fewer than three points in reduced surface) reduce skip and try again\n      while (size < 3 && actSkip > 1) {\n        actSkip -= 1;\n        size = Math.floor(path.length / actSkip);\n      }\n    }\n\n    const finalHull: IPoint[] = [];\n    // copy hull values\n    for (let i = 0, j = 0; j < size; j++, i += actSkip) {\n      finalHull.push(path.get(i));\n    }\n    return new PointPath(finalHull);\n  };\n}\n", "import { shapeSimplifier, bSplineShapeGenerator, samplePath } from './simplifiers';\nimport { Line, boundingBox } from './model';\nimport type { IPoint, ICenterPoint } from './interfaces';\nimport { round } from './utils';\n\nexport class PointPath {\n  readonly points: ReadonlyArray<IPoint>;\n\n  readonly closed: boolean;\n\n  constructor(points: ReadonlyArray<IPoint> = [], closed = true) {\n    this.points = points;\n    this.closed = closed;\n  }\n\n  get(index: number): IPoint {\n    const i = index;\n    const l = this.points.length;\n    if (index < 0) {\n      return this.closed ? this.get(index + l) : this.points[0];\n    } else if (index >= l) {\n      return this.closed ? this.get(index - l) : this.points[l - 1];\n    }\n    return this.points[i];\n  }\n\n  get length() {\n    return this.points.length;\n  }\n\n  toString(roundToDigits: number | ((v: number) => number) = Infinity) {\n    const points = this.points;\n    if (points.length === 0) {\n      return '';\n    }\n    const rounder = typeof roundToDigits === 'function' ? roundToDigits : round(roundToDigits);\n    let r = 'M';\n    for (const p of points) {\n      r += `${rounder(p.x)},${rounder(p.y)} L`;\n    }\n    r = r.slice(0, -1);\n    if (this.closed) {\n      r += ' Z';\n    }\n    return r;\n  }\n\n  draw(ctx: CanvasRenderingContext2D) {\n    const points = this.points;\n    if (points.length === 0) {\n      return;\n    }\n    ctx.beginPath();\n\n    ctx.moveTo(points[0].x, points[0].y);\n\n    for (const p of points) {\n      ctx.lineTo(p.x, p.y);\n    }\n\n    if (this.closed) {\n      ctx.closePath();\n    }\n  }\n\n  sample(skip?: number) {\n    return samplePath(skip)(this);\n  }\n\n  simplify(tolerance?: number) {\n    return shapeSimplifier(tolerance)(this);\n  }\n\n  bSplines(granularity?: number) {\n    return bSplineShapeGenerator(granularity)(this);\n  }\n\n  apply(transformer: (path: PointPath) => PointPath) {\n    return transformer(this);\n  }\n\n  containsElements(members: ReadonlyArray<ICenterPoint>) {\n    const bb = boundingBox(this.points);\n    if (!bb) {\n      return false;\n    }\n    return members.every((member) => {\n      return bb.containsPt(member.cx, member.cy) && this.withinArea(member.cx, member.cy);\n    });\n  }\n\n  withinArea(px: number, py: number) {\n    if (this.length === 0) {\n      return false;\n    }\n    let crossings = 0;\n    const first = this.points[0]!;\n    const line = new Line(first.x, first.y, first.x, first.y);\n\n    for (let i = 1; i < this.points.length; i++) {\n      const cur = this.points[i];\n      line.x1 = line.x2;\n      line.y1 = line.y2;\n      line.x2 = cur.x;\n      line.y2 = cur.y;\n\n      if (line.cuts(px, py)) {\n        crossings++;\n      }\n    }\n    // close to start\n    line.x1 = line.x2;\n    line.y1 = line.y2;\n    line.x2 = first.x;\n    line.y2 = first.y;\n\n    if (line.cuts(px, py)) {\n      crossings++;\n    }\n\n    return crossings % 2 === 1;\n  }\n}\n", "import { PointPath } from '../PointPath';\nimport { Rectangle } from './Rectangle';\nimport type { IPoint } from '../interfaces';\n\nexport class PointList {\n  private count = 0;\n\n  private readonly arr: IPoint[] = [];\n\n  private readonly set = new Set<string>();\n\n  constructor(size = 0) {\n    this.arr.length = size; // pre-allocating\n  }\n\n  add(p: IPoint) {\n    this.set.add(`${p.x}x${p.y}`);\n    this.arr[this.count++] = p;\n  }\n\n  contains(p: IPoint) {\n    return this.set.has(`${p.x}x${p.y}`);\n  }\n\n  isFirst(p: IPoint) {\n    if (this.count === 0) {\n      return false;\n    }\n    const o = this.arr[0];\n    return o != null && o.x === p.x && o.y === p.y;\n  }\n\n  path() {\n    return new PointPath(this.arr.slice(0, this.count));\n  }\n\n  clear() {\n    // for (let i = 0; i < this.count; i++) {\n    //   this.arr[i] = null; // nulling is cheaper than deleting or reallocating\n    // }\n    this.set.clear();\n    this.count = 0;\n  }\n\n  get(ix: number) {\n    return this.arr[ix];\n  }\n\n  get length() {\n    return this.count;\n  }\n}\n\nexport function boundingBox(path: PointPath) {\n  if (path.length === 0) {\n    return null;\n  }\n  const first = path.points[0];\n  const bb = new Rectangle(first.x, first.y, 0, 0);\n  for (const point of path.points) {\n    bb.addPoint(point);\n  }\n  return bb;\n}\n", "import { PointList } from './model/PointList';\nimport type { Area } from './model/Area';\n\nconst N = 0;\nconst S = 1;\nconst E = 2;\nconst W = 3;\n\nexport function marchingSquares(potentialArea: Area, threshold: number) {\n  const estLength = (Math.floor(potentialArea.width) + Math.floor(potentialArea.height)) * 2;\n  const contour = new PointList(estLength);\n\n  function updateDir(x: number, y: number, dir: number, res: number) {\n    const v = potentialArea.get(x, y);\n    if (Number.isNaN(v)) {\n      return Number.NaN;\n    }\n    if (v > threshold) {\n      return dir + res;\n    }\n    return dir;\n  }\n\n  function getState(x: number, y: number) {\n    let dir = N;\n    dir = updateDir(x, y, dir, 1);\n    dir = updateDir(x + 1, y, dir, 2);\n    dir = updateDir(x, y + 1, dir, 4);\n    dir = updateDir(x + 1, y + 1, dir, 8);\n    if (Number.isNaN(dir)) {\n      // console.warn(\n      //   'marched out of bounds: ' + x + ' ' + y + ' bounds: ' + potentialArea.width + ' ' + potentialArea.height\n      // );\n      return -1;\n    }\n    return dir;\n  }\n\n  let direction = S;\n\n  function doMarch(xPos: number, yPos: number) {\n    let x = xPos;\n    let y = yPos;\n    let xPixel = potentialArea.invertScaleX(x);\n    let yPixel = potentialArea.invertScaleY(y);\n    // artificial limit\n    for (let i = 0; i < potentialArea.width * potentialArea.height; i++) {\n      // iterative version of end recursion\n      const p = { x: xPixel, y: yPixel };\n      // check if we're back where we started\n      if (contour.contains(p)) {\n        if (!contour.isFirst(p)) {\n          // encountered a loop but haven't returned to start; will change\n          // direction using conditionals and continue back to start\n        } else {\n          return true;\n        }\n      } else {\n        contour.add(p);\n      }\n      const state = getState(x, y);\n      // x, y are upper left of 2X2 marching square\n      switch (state) {\n        case -1:\n          return true; // Marched out of bounds\n        case 0:\n        case 3:\n        case 2:\n        case 7:\n          direction = E;\n          break;\n        case 12:\n        case 14:\n        case 4:\n          direction = W;\n          break;\n        case 6:\n          direction = direction === N ? W : E;\n          break;\n        case 1:\n        case 13:\n        case 5:\n          direction = N;\n          break;\n        case 9:\n          direction = direction === E ? N : S;\n          break;\n        case 10:\n        case 8:\n        case 11:\n          direction = S;\n          break;\n        default:\n          console.warn('Marching squares invalid state: ' + state);\n          return true;\n      }\n\n      switch (direction) {\n        case N:\n          y--; // up\n          yPixel -= potentialArea.pixelGroup;\n          break;\n        case S:\n          y++; // down\n          yPixel += potentialArea.pixelGroup;\n          break;\n        case W:\n          x--; // left\n          xPixel -= potentialArea.pixelGroup;\n          break;\n        case E:\n          x++; // right\n          xPixel += potentialArea.pixelGroup;\n          break;\n        default:\n          console.warn('Marching squares invalid state: ' + state);\n          return true;\n      }\n    }\n    return true;\n  }\n\n  for (let x = 0; x < potentialArea.width; x++) {\n    for (let y = 0; y < potentialArea.height; y++) {\n      if (potentialArea.get(x, y) <= threshold) {\n        continue;\n      }\n      const state = getState(x, y);\n      if (state < 0 || state === 15) {\n        continue;\n      }\n      if (doMarch(x, y)) {\n        return contour.path();\n      }\n    }\n  }\n  return null;\n}\n", "import type { ICircle, ILine, IRectangle } from './interfaces';\nimport { createGenericInfluenceArea, createLineInfluenceArea, createRectangleInfluenceArea } from './potentialAreas';\nimport { calculateVirtualEdges } from './routing';\nimport { Circle } from './model';\nimport { Area } from './model/Area';\nimport { Line, lineBoundingBox } from './model/Line';\nimport { marchingSquares } from './MarchingSquares';\nimport { Rectangle } from './model/Rectangle';\nimport { addPadding } from './padding';\nimport { PointPath } from './PointPath';\n\nexport interface IPotentialOptions {\n  /**\n   * how many pixels per potential area group to improve speed\n   * @default 4\n   */\n  pixelGroup?: number;\n  morphBuffer?: number;\n}\n\nexport interface IRoutingOptions {\n  virtualEdges?: boolean;\n  /**\n   * maximum number of iterations when computing routes between members\n   * @default 100\n   */\n  maxRoutingIterations?: number;\n  morphBuffer?: number;\n}\nexport interface IOutlineOptions {\n  /**\n   * maximum number of iterations when computing the contour\n   * @default 20\n   */\n  maxMarchingIterations?: number;\n\n  edgeR0?: number;\n  edgeR1?: number;\n  nodeR0?: number;\n  nodeR1?: number;\n\n  threshold?: number;\n  memberInfluenceFactor?: number;\n  edgeInfluenceFactor?: number;\n  nonMemberInfluenceFactor?: number;\n}\n\nexport interface IBubbleSetOptions extends IRoutingOptions, IOutlineOptions, IPotentialOptions {}\n\nexport const defaultOptions: Readonly<Required<IBubbleSetOptions>> = {\n  maxRoutingIterations: 100,\n  maxMarchingIterations: 20,\n  pixelGroup: 4,\n  edgeR0: 10,\n  edgeR1: 20,\n  nodeR0: 15,\n  nodeR1: 50,\n  morphBuffer: 10,\n\n  threshold: 1,\n  memberInfluenceFactor: 1,\n  edgeInfluenceFactor: 1,\n  nonMemberInfluenceFactor: -0.8,\n\n  virtualEdges: true,\n};\n\nfunction isCircle(v: IRectangle | ICircle): v is ICircle {\n  return v != null && typeof (v as ICircle).radius === 'number';\n}\n\nfunction isEqual(a: IRectangle | ICircle, b: IRectangle | ICircle) {\n  if (isCircle(a) !== isCircle(b)) {\n    return false;\n  }\n  if (isCircle(a)) {\n    const bc = b as ICircle;\n    return a.cx === bc.cx && a.cy === bc.cy && a.radius === bc.radius;\n  }\n  const br = b as IRectangle;\n  return a.x === br.x && a.y === br.y && a.width === br.width && a.height === br.height;\n}\n\nenum EDirty {\n  MEMBERS,\n  NON_MEMBERS,\n  EDGES,\n}\n\ninterface IMember {\n  readonly raw: IRectangle | ICircle;\n  obj: Rectangle | Circle;\n  area: Area | null;\n}\n\ninterface IEdge {\n  readonly raw: ILine;\n  obj: Line;\n  area: Area | null;\n}\n\nexport class BubbleSets {\n  private readonly dirty = new Set<EDirty>();\n\n  private readonly o: Required<IBubbleSetOptions>;\n\n  private readonly members: IMember[] = [];\n\n  private readonly nonMembers: IMember[] = [];\n\n  private virtualEdges: IEdge[] = [];\n\n  private readonly edges: IEdge[] = [];\n\n  private activeRegion = new Rectangle(0, 0, 0, 0);\n\n  private potentialArea = new Area(1, 0, 0, 0, 0, 0, 0);\n\n  constructor(options: IBubbleSetOptions = {}) {\n    this.o = Object.assign({}, defaultOptions, options);\n  }\n\n  pushMember(...members: ReadonlyArray<IRectangle | ICircle>) {\n    if (members.length === 0) {\n      return;\n    }\n    this.dirty.add(EDirty.MEMBERS);\n    for (const v of members) {\n      this.members.push({\n        raw: v,\n        obj: isCircle(v) ? Circle.from(v) : Rectangle.from(v),\n        area: null,\n      });\n    }\n  }\n\n  removeMember(member: IRectangle | ICircle) {\n    const index = this.members.findIndex((d) => isEqual(d.raw, member));\n    if (index < 0) {\n      return false;\n    }\n    this.members.splice(index, 1);\n    this.dirty.add(EDirty.MEMBERS);\n    return true;\n  }\n\n  removeNonMember(nonMember: IRectangle | ICircle) {\n    const index = this.nonMembers.findIndex((d) => isEqual(d.raw, nonMember));\n    if (index < 0) {\n      return false;\n    }\n    this.nonMembers.splice(index, 1);\n    this.dirty.add(EDirty.NON_MEMBERS);\n    return true;\n  }\n\n  removeEdge(edge: ILine) {\n    const index = this.edges.findIndex((d) => d.obj.equals(edge));\n    if (index < 0) {\n      return false;\n    }\n    this.edges.splice(index, 1);\n    this.dirty.add(EDirty.NON_MEMBERS);\n    return true;\n  }\n\n  pushNonMember(...nonMembers: ReadonlyArray<IRectangle | ICircle>) {\n    if (nonMembers.length === 0) {\n      return;\n    }\n    this.dirty.add(EDirty.NON_MEMBERS);\n    for (const v of nonMembers) {\n      this.nonMembers.push({\n        raw: v,\n        obj: isCircle(v) ? Circle.from(v) : Rectangle.from(v),\n        area: null,\n      });\n    }\n  }\n\n  pushEdge(...edges: ReadonlyArray<ILine>) {\n    if (edges.length === 0) {\n      return;\n    }\n    this.dirty.add(EDirty.EDGES);\n    for (const v of edges) {\n      this.edges.push({\n        raw: v,\n        obj: Line.from(v),\n        area: null,\n      });\n    }\n  }\n\n  private update() {\n    const dirtyMembers = this.dirty.has(EDirty.MEMBERS);\n    const dirtyNonMembers = this.dirty.has(EDirty.NON_MEMBERS);\n    let dirtyEdges = this.dirty.has(EDirty.EDGES);\n    this.dirty.clear();\n\n    const memberObjs = this.members.map((d) => d.obj);\n    if (this.o.virtualEdges && (dirtyMembers || dirtyNonMembers)) {\n      // update virtual edges\n      const nonMembersAsRects = this.nonMembers.map((d) => d.obj);\n      const virtualEdges = calculateVirtualEdges(\n        memberObjs,\n        nonMembersAsRects,\n        this.o.maxRoutingIterations,\n        this.o.morphBuffer\n      );\n\n      const old = new Map<string, Area | null>(this.virtualEdges.map((e) => [e.obj.toString(), e.area]));\n      // reuse edge areas if possible\n      this.virtualEdges = virtualEdges.map((e) => ({\n        raw: e,\n        obj: e,\n        area: old.get(e.toString()) ?? null,\n      }));\n      dirtyEdges = true;\n    }\n\n    let activeRegionDirty = false;\n    if (dirtyMembers || dirtyEdges) {\n      // update the active region\n      const edgesObj = this.virtualEdges.concat(this.edges).map((e) => e.obj);\n      const bb = unionBoundingBox(memberObjs, edgesObj);\n      const padding = Math.max(this.o.edgeR1, this.o.nodeR1) + this.o.morphBuffer;\n      const activeRegion = Rectangle.from(addPadding(bb, padding));\n      if (!activeRegion.equals(this.activeRegion)) {\n        activeRegionDirty = true;\n        this.activeRegion = activeRegion;\n      }\n    }\n\n    if (activeRegionDirty) {\n      const potentialWidth = Math.ceil(this.activeRegion.width / this.o.pixelGroup);\n      const potentialHeight = Math.ceil(this.activeRegion.height / this.o.pixelGroup);\n\n      if (this.activeRegion.x !== this.potentialArea.pixelX || this.activeRegion.y !== this.potentialArea.pixelY) {\n        // full recreate\n        this.potentialArea = Area.fromPixelRegion(this.activeRegion, this.o.pixelGroup);\n        this.members.forEach((m) => (m.area = null));\n        this.nonMembers.forEach((m) => (m.area = null));\n        this.edges.forEach((m) => (m.area = null));\n        this.virtualEdges.forEach((m) => (m.area = null));\n      } else if (potentialWidth !== this.potentialArea.width || potentialHeight !== this.potentialArea.height) {\n        // recreate but we can keep the existing areas\n        this.potentialArea = Area.fromPixelRegion(this.activeRegion, this.o.pixelGroup);\n      }\n    }\n\n    // update\n    const existing = new Map<string, Area>();\n    const addCache = (m: IMember) => {\n      if (m.area) {\n        const key = `${m.obj.width}x${m.obj.height}x${m.obj instanceof Rectangle ? 'R' : 'C'}`;\n        existing.set(key, m.area);\n      }\n    };\n    const createOrAddCache = (m: IMember) => {\n      if (m.area) {\n        return;\n      }\n      const key = `${m.obj.width}x${m.obj.height}x${m.obj instanceof Rectangle ? 'R' : 'C'}`;\n      if (existing.has(key)) {\n        const r = existing.get(key)!;\n        m.area = this.potentialArea.copy(r, { x: m.obj.x - this.o.nodeR1, y: m.obj.y - this.o.nodeR1 });\n        return;\n      }\n      const r =\n        m.obj instanceof Rectangle\n          ? createRectangleInfluenceArea(m.obj, this.potentialArea, this.o.nodeR1)\n          : createGenericInfluenceArea(m.obj, this.potentialArea, this.o.nodeR1);\n      m.area = r;\n      existing.set(key, r);\n    };\n    this.members.forEach(addCache);\n    this.nonMembers.forEach(addCache);\n\n    this.members.forEach(createOrAddCache);\n    this.nonMembers.forEach((m) => {\n      if (!this.activeRegion.intersects(m.obj)) {\n        m.area = null;\n      } else {\n        createOrAddCache(m);\n      }\n    });\n\n    this.edges.forEach((edge) => {\n      if (!edge.area) {\n        edge.area = createLineInfluenceArea(edge.obj, this.potentialArea, this.o.edgeR1);\n      }\n    });\n    this.virtualEdges.forEach((edge) => {\n      if (!edge.area) {\n        edge.area = createLineInfluenceArea(edge.obj, this.potentialArea, this.o.edgeR1);\n      }\n    });\n  }\n\n  drawMembers(ctx: CanvasRenderingContext2D) {\n    for (const member of this.members) {\n      member.obj.draw(ctx);\n    }\n  }\n\n  drawNonMembers(ctx: CanvasRenderingContext2D) {\n    for (const member of this.nonMembers) {\n      member.obj.draw(ctx);\n    }\n  }\n\n  drawEdges(ctx: CanvasRenderingContext2D) {\n    for (const edge of this.edges) {\n      edge.obj.draw(ctx);\n    }\n  }\n\n  drawPotentialArea(ctx: CanvasRenderingContext2D, offset = true) {\n    this.potentialArea.draw(ctx, offset);\n  }\n\n  compute() {\n    if (this.members.length === 0) {\n      return new PointPath([]);\n    }\n\n    if (this.dirty.size > 0) {\n      this.update();\n    }\n\n    const { o, potentialArea } = this;\n\n    const members = this.members.map((m) => m.area!);\n    const edges = this.virtualEdges.concat(this.edges).map((d) => d.area!);\n    const nonMembers = this.nonMembers.filter((d) => d.area != null).map((d) => d.area!);\n    const memberObjs = this.members.map((m) => m.obj);\n\n    return calculatePotentialOutline(\n      potentialArea,\n      members,\n      edges,\n      nonMembers,\n      (p) => p.containsElements(memberObjs),\n      o\n    );\n  }\n}\n\nexport function calculatePotentialOutline(\n  potentialArea: Area,\n  members: ReadonlyArray<Area>,\n  edges: ReadonlyArray<Area>,\n  nonMembers: ReadonlyArray<Area>,\n  validPath: (path: PointPath) => boolean,\n  options: IOutlineOptions = {}\n) {\n  const o = Object.assign({}, defaultOptions, options);\n  let threshold = o.threshold;\n  let memberInfluenceFactor = o.memberInfluenceFactor;\n  let edgeInfluenceFactor = o.edgeInfluenceFactor;\n  let nonMemberInfluenceFactor = o.nonMemberInfluenceFactor;\n\n  // using inverse a for numerical stability\n  const nodeInfA = (o.nodeR0 - o.nodeR1) * (o.nodeR0 - o.nodeR1);\n  const edgeInfA = (o.edgeR0 - o.edgeR1) * (o.edgeR0 - o.edgeR1);\n\n  // try to march, check if surface contains all items\n  for (let iterations = 0; iterations < o.maxMarchingIterations; iterations++) {\n    potentialArea.clear();\n\n    // add all positive energy (included items) first, as negative energy\n    // (morphing) requires all positives to be already set\n    if (memberInfluenceFactor !== 0) {\n      const f = memberInfluenceFactor / nodeInfA;\n      for (const item of members) {\n        // add node energy\n        potentialArea.incArea(item, f);\n      }\n    }\n\n    if (edgeInfluenceFactor !== 0) {\n      // add the influence of all the virtual edges\n      const f = edgeInfluenceFactor / edgeInfA;\n      for (const area of edges) {\n        potentialArea.incArea(area, f);\n      }\n    }\n\n    // calculate negative energy contribution for all other visible items within bounds\n    if (nonMemberInfluenceFactor !== 0) {\n      const f = nonMemberInfluenceFactor / nodeInfA;\n      for (const area of nonMembers) {\n        // add node energy\n        potentialArea.incArea(area, f);\n      }\n    }\n\n    // compute contour\n    const contour = marchingSquares(potentialArea, threshold);\n    if (contour && validPath(contour)) {\n      // found a valid path\n      return contour;\n    }\n\n    // prepare for next iteration\n\n    // reduce negative influences first; this will allow the surface to\n    // pass without making it fatter all around (which raising the threshold does)\n    threshold *= 0.95;\n    if (iterations <= o.maxMarchingIterations * 0.5) {\n      memberInfluenceFactor *= 1.2;\n      edgeInfluenceFactor *= 1.2;\n    } else if (nonMemberInfluenceFactor !== 0 && nonMembers.length > 0) {\n      // after half the iterations, start increasing positive energy and lowering the threshold\n      nonMemberInfluenceFactor *= 0.8;\n    } else {\n      break;\n    }\n  }\n  // cannot find a solution\n  return new PointPath([]);\n}\n\nexport function unionBoundingBox(memberItems: IRectangle[], edgeItems: Line[]) {\n  if (memberItems.length === 0) {\n    return new Rectangle(0, 0, 0, 0);\n  }\n  const activeRegion = Rectangle.from(memberItems[0]);\n  for (const m of memberItems) {\n    activeRegion.add(m);\n  }\n  for (const l of edgeItems) {\n    activeRegion.add(lineBoundingBox(l));\n  }\n  return activeRegion;\n}\n\nexport function createOutline(\n  members: ReadonlyArray<IRectangle | ICircle>,\n  nonMembers: ReadonlyArray<IRectangle> = [],\n  edges: ReadonlyArray<ILine> = [],\n  options: IOutlineOptions = {}\n) {\n  if (members.length === 0) {\n    return new PointPath([]);\n  }\n  const bb = new BubbleSets(options);\n  bb.pushMember(...members);\n  bb.pushNonMember(...nonMembers);\n  bb.pushEdge(...edges);\n  return bb.compute();\n}\n", "import type { PathArray } from '@antv/util';\nimport { deepMix, isEqual, isFunction } from '@antv/util';\nimport type { IBubbleSetOptions, ILine, IRectangle } from 'bubblesets-js';\nimport { BubbleSets as BubbleSetsJS, Line, Rectangle, defaultOptions } from 'bubblesets-js';\nimport { GraphEvent } from '../constants';\nimport type { ContourStyleProps } from '../elements/shapes';\nimport { Contour } from '../elements/shapes';\nimport type { Graph } from '../runtime/graph';\nimport type { RuntimeContext } from '../runtime/types';\nimport type { ID } from '../types';\nimport { getBBoxHeight, getBBoxWidth } from '../utils/bbox';\nimport { arrayDiff } from '../utils/diff';\nimport type { ElementLifeCycleEvent } from '../utils/event';\nimport { idOf } from '../utils/id';\nimport { getClosedSpline } from '../utils/path';\nimport { parsePoint } from '../utils/point';\nimport type { BasePluginOptions } from './base-plugin';\nimport { BasePlugin } from './base-plugin';\n\n/**\n * <zh/> \n *\n * <en/> BubbleSets options\n */\nexport interface BubbleSetsOptions extends BasePluginOptions, IBubbleSetOptions, ContourStyleProps {\n  /**\n   * <zh/> \n   *\n   * <en/> Member elements, including nodes and edges\n   */\n  members: ID[];\n  /**\n   * <zh/> \n   *\n   * <en/> Elements to avoid, these elements will not be included when drawing the contour, currently only nodes are supported\n   */\n  avoidMembers?: ID[];\n}\n\n/**\n * <zh/> \n *\n * <en/> BubbleSets\n * @remarks\n * <zh/> BubbleSets  Christopher Collins  2009  \"Bubble Sets: Revealing Set Relations with Isocontours over Existing Visualizations\" \n *\n * <zh/>  \"\"\n *\n * <en/> BubbleSets was originally proposed by Christopher Collins in the 2009 paper \"Bubble Sets: Revealing Set Relations with Isocontours over Existing Visualizations\".\n *\n * <en/> The principle is to represent sets by creating a shape similar to a bubble. Each set is represented by a unique \"bubble\", and the elements in the set are contained within this bubble. If two sets have an intersection, then the two bubbles will have an overlapping part, which represents the intersection of the two sets.\n */\nexport class BubbleSets extends BasePlugin<BubbleSetsOptions> {\n  private shape?: Contour;\n\n  private bubbleSets!: BubbleSetsJS;\n\n  private path: PathArray | null = null;\n\n  private members: Map<ID, IRectangle | ILine> = new Map();\n\n  private avoidMembers: Map<ID, IRectangle | ILine> = new Map();\n\n  private bubbleSetOptions: IBubbleSetOptions = {};\n\n  static defaultOptions: Partial<BubbleSetsOptions> = {\n    members: [],\n    avoidMembers: [],\n    /** shape style */\n    fill: 'lightblue',\n    fillOpacity: 0.2,\n    stroke: 'blue',\n    strokeOpacity: 0.2,\n    /** bubbleSetJS config */\n    ...defaultOptions,\n  };\n\n  constructor(context: RuntimeContext, options: BubbleSetsOptions) {\n    super(context, deepMix({}, BubbleSets.defaultOptions, options));\n\n    this.bindEvents();\n\n    this.bubbleSets = new BubbleSetsJS(this.options);\n  }\n\n  private bindEvents() {\n    this.context.graph.on(GraphEvent.AFTER_RENDER, this.drawBubbleSets);\n    this.context.graph.on(GraphEvent.AFTER_ELEMENT_UPDATE, this.updateBubbleSetsPath);\n  }\n\n  private init() {\n    this.bubbleSets = new BubbleSetsJS(this.options);\n    this.members.clear();\n    this.avoidMembers.clear();\n    this.path = null;\n  }\n\n  private parseOptions() {\n    const { type, key, members, avoidMembers, ...rest } = this.options;\n    const res = Object.keys(rest).reduce(\n      (acc: { style: ContourStyleProps; bubbleSetOptions: IBubbleSetOptions }, key: string) => {\n        if (key in defaultOptions) {\n          acc.bubbleSetOptions[key as keyof IBubbleSetOptions] = rest[key];\n        } else {\n          acc.style[key as keyof ContourStyleProps] = rest[key];\n        }\n        return acc;\n      },\n      { style: {}, bubbleSetOptions: {} },\n    );\n    return { type, key, members, avoidMembers, ...res };\n  }\n\n  private drawBubbleSets = () => {\n    const { style, bubbleSetOptions } = this.parseOptions();\n    if (!isEqual(this.bubbleSetOptions, bubbleSetOptions)) this.init();\n    this.bubbleSetOptions = { ...bubbleSetOptions };\n\n    const finalStyle = { ...style, d: this.getPath() };\n    if (!this.shape) {\n      this.shape = new Contour({ style: finalStyle });\n      this.context.canvas.appendChild(this.shape);\n    } else {\n      this.shape.update(finalStyle);\n    }\n  };\n\n  private updateBubbleSetsPath = (event: ElementLifeCycleEvent) => {\n    if (!this.shape) return;\n    const id = idOf(event.data);\n    if (![...this.options.members, ...this.options.avoidMembers].includes(id)) return;\n    this.shape.update({ ...this.parseOptions().style, d: this.getPath(id) });\n  };\n\n  private getPath = (forceUpdateId?: ID): PathArray => {\n    const { graph } = this.context;\n\n    const currMembers = this.options.members;\n    const prevMembers = [...this.members.keys()];\n    const currAvoidMembers = this.options.avoidMembers;\n    const prevAvoidMembers = [...this.avoidMembers.keys()];\n\n    if (currMembers.length === 0 && currAvoidMembers.length === 0) {\n      this.members.clear();\n      this.avoidMembers.clear();\n      this.path = [] as unknown as PathArray;\n      return this.path;\n    }\n\n    if (\n      !forceUpdateId &&\n      this.path &&\n      isEqual(currMembers, prevMembers) &&\n      isEqual(currAvoidMembers, prevAvoidMembers)\n    ) {\n      return this.path;\n    }\n\n    const { enter: membersToEnter = [], exit: membersToExit = [] } = arrayDiff(prevMembers, currMembers, (d) => d);\n    const { enter: avoidMembersToEnter = [], exit: avoidMembersToExit = [] } = arrayDiff(\n      prevAvoidMembers,\n      currAvoidMembers,\n      (d) => d,\n    );\n\n    if (forceUpdateId) {\n      const isMemberNow = currMembers.includes(forceUpdateId);\n      const isAvoidNow = currAvoidMembers.includes(forceUpdateId);\n\n      if (isMemberNow) {\n        membersToExit.push(forceUpdateId);\n        membersToEnter.push(forceUpdateId);\n      }\n      if (isAvoidNow) {\n        avoidMembersToExit.push(forceUpdateId);\n        avoidMembersToEnter.push(forceUpdateId);\n      }\n    }\n\n    const updateBubbleSets = (ids: ID[], isEntering: boolean, isMember: boolean) => {\n      ids.forEach((id) => {\n        const members = isMember ? this.members : this.avoidMembers;\n        const pushMember = isMember ? 'pushMember' : 'pushNonMember';\n        const removeMember = isMember ? 'removeMember' : 'removeNonMember';\n        if (isEntering) {\n          let area: IRectangle | ILine;\n          if (graph.getElementType(id) === 'edge') {\n            [area] = convertToLine(graph, id);\n            this.bubbleSets.pushEdge(area);\n          } else {\n            [area] = convertToRectangle(graph, id);\n            this.bubbleSets[pushMember](area);\n          }\n          members.set(id, area);\n        } else {\n          const area = members.get(id);\n          if (area) {\n            if (graph.getElementType(id) === 'edge') {\n              this.bubbleSets.removeEdge(area as ILine);\n            } else {\n              this.bubbleSets[removeMember](area as IRectangle);\n            }\n            members.delete(id);\n          }\n        }\n      });\n    };\n\n    updateBubbleSets(membersToExit, false, true);\n    updateBubbleSets(membersToEnter, true, true);\n    updateBubbleSets(avoidMembersToExit, false, false);\n    updateBubbleSets(avoidMembersToEnter, true, false);\n\n    const pointPath = this.bubbleSets.compute();\n    const cleanPath = pointPath.sample(8).simplify(0).bSplines().simplify(0);\n    this.path = getClosedSpline(cleanPath.points.map(parsePoint));\n    return this.path;\n  };\n\n  /**\n   * <zh/> \n   *\n   * <en/> Add member elements\n   * @param members - <zh/>  | <en/> single or multiple\n   */\n  public addMember(members: ID | ID[]) {\n    const membersToAdd = Array.isArray(members) ? members : [members];\n    if (membersToAdd.some((member) => this.options.avoidMembers.includes(member))) {\n      this.options.avoidMembers = this.options.avoidMembers.filter((id) => !membersToAdd.includes(id));\n    }\n    this.options.members = [...new Set([...this.options.members, ...membersToAdd])];\n    this.drawBubbleSets();\n  }\n  /**\n   * <zh/> \n   *\n   * <en/> Remove member elements\n   * @param members - <zh/>  | <en/> single or multiple\n   */\n  public removeMember(members: ID | ID[]) {\n    const membersToRemove = Array.isArray(members) ? members : [members];\n    this.options.members = this.options.members.filter((id) => !membersToRemove.includes(id));\n    this.drawBubbleSets();\n  }\n  /**\n   * <zh/> \n   *\n   * <en/> Update member elements\n   * @param members - <zh/>  | <en/> value or callback function\n   */\n  public updateMember(members: ID[] | ((prev: ID[]) => ID[])) {\n    this.options.members = isFunction(members) ? members(this.options.members) : members;\n    this.drawBubbleSets();\n  }\n  /**\n   * <zh/> \n   *\n   * <en/> Get member elements\n   * @returns <zh/>  | <en/> member elements array\n   */\n  public getMember() {\n    return this.options.members;\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Add elements to avoid\n   * @param avoidMembers - <zh/>  | <en/> single or multiple\n   */\n  public addAvoidMember(avoidMembers: ID | ID[]) {\n    const avoidMembersToAdd = Array.isArray(avoidMembers) ? avoidMembers : [avoidMembers];\n    if (avoidMembersToAdd.some((avoidMember) => this.options.members.includes(avoidMember))) {\n      this.options.members = this.options.members.filter((id) => !avoidMembersToAdd.includes(id));\n    }\n    this.options.avoidMembers = [...new Set([...this.options.avoidMembers, ...avoidMembersToAdd])];\n    this.drawBubbleSets();\n  }\n  /**\n   * <zh/> \n   *\n   * <en/> Remove elements to avoid\n   * @param avoidMembers - <zh/>  | <en/> single or multiple\n   */\n  public removeAvoidMember(avoidMembers: ID | ID[]) {\n    const avoidMembersToRemove = Array.isArray(avoidMembers) ? avoidMembers : [avoidMembers];\n    if (this.options.avoidMembers.some((member) => avoidMembersToRemove.includes(member))) {\n      this.options.avoidMembers = this.options.avoidMembers.filter((id) => !avoidMembersToRemove.includes(id));\n      this.drawBubbleSets();\n    }\n  }\n  /**\n   * <zh/> \n   *\n   * <en/> Update elements to avoid\n   * @param avoidMembers - <zh/>  | <en/> single or multiple\n   */\n  public updateAvoidMember(avoidMembers: ID | ID[]) {\n    this.options.avoidMembers = Array.isArray(avoidMembers) ? avoidMembers : [avoidMembers];\n    this.drawBubbleSets();\n  }\n  /**\n   * <zh/> \n   *\n   * <en/> Get elements to avoid\n   * @returns avoidMembers <zh/>  | <en/> member elements array\n   */\n  public getAvoidMember() {\n    return this.options.avoidMembers;\n  }\n  /**\n   * <zh/> \n   *\n   * <en/> Destroy\n   * @internal\n   */\n  public destroy(): void {\n    this.context.graph.off(GraphEvent.AFTER_RENDER, this.drawBubbleSets);\n    this.context.graph.off(GraphEvent.AFTER_ELEMENT_UPDATE, this.updateBubbleSetsPath);\n\n    if (this.shape) {\n      this.shape.destroy();\n      this.shape = undefined;\n    }\n\n    super.destroy();\n  }\n}\n\n/**\n * <zh/>  BubbleSetJS \n *\n * <en/> Convert nodes to rectangles supported by BubbleSetJS\n * @param graph - <zh/>  | <en/> graph instance\n * @param ids - <zh/>  ID  | <en/> element ID array\n * @returns <zh/>  | <en/> rectangle array\n */\nconst convertToRectangle = (graph: Graph, ids: ID | ID[]): IRectangle[] => {\n  const idArr = Array.isArray(ids) ? ids : [ids];\n  return idArr.map((id) => {\n    const bbox = graph.getElementRenderBounds(id);\n    return new Rectangle(bbox.min[0], bbox.min[1], getBBoxWidth(bbox), getBBoxHeight(bbox));\n  });\n};\n\n/**\n * <zh/>  BubbleSetJS \n *\n * <en/> Convert edges to lines supported by BubbleSetJS\n * @param graph - <zh/>  | <en/> graph instance\n * @param ids - <zh/>  ID  | <en/> element ID array\n * @returns <zh/>  | <en/> line array\n */\nconst convertToLine = (graph: Graph, ids: ID | ID[]): ILine[] => {\n  const idArr = Array.isArray(ids) ? ids : [ids];\n  return idArr.map((id) => {\n    const data = graph.getEdgeData(id);\n    const source = graph.getElementPosition(data.source);\n    const target = graph.getElementPosition(data.target);\n    return Line.from({ x1: source[0], y1: source[1], x2: target[0], y2: target[1] });\n  });\n};\n", "import { GraphEvent } from '../constants';\nimport type { RuntimeContext } from '../runtime/types';\nimport type { BasePluginOptions } from './base-plugin';\nimport { BasePlugin } from './base-plugin';\n\nexport interface CameraSettingOptions extends BasePluginOptions {\n  /**\n   * <zh/>  3D \n   * - `'perspective'` : \n   * - `'orthographic'` : \n   *\n   * <en/> Projection mode, perspective projection is only valid in 3D scenes\n   * - `'perspective'` : perspective projection\n   * - `'orthographic'` : Orthogonal projection\n   */\n  projectionMode?: 'perspective' | 'orthographic';\n  /**\n   * <zh/> \n   * - `'orbiting'`: \n   * - `'exploring'`:  orbiting\n   * - `'tracking'`: \n   *\n   * <en/> Camera type\n   * - `'orbiting'`: Fixed viewpoint, change camera position\n   * - `'exploring'`: Similar to orbiting, but allows the camera to rotate between the North Pole and the South Pole\n   * - `'tracking'`: Fixed camera position, change viewpoint\n   */\n  cameraType?: 'orbiting' | 'exploring' | 'tracking';\n  /**\n   * <zh/> \n   *\n   * <en/> The position of the near plane\n   */\n  near?: number;\n  /**\n   * <zh/> \n   *\n   * <en/> The position of the far plane\n   */\n  far?: number;\n  /**\n   * <zh/> \n   *\n   * <en/> Camera field of view, only valid in perspective camera\n   */\n  fov?: number;\n  /**\n   * <zh/> \n   * - number : \n   * - `'auto'` : \n   *\n   * <en/> Camera viewport aspect ratio, only valid in perspective camera.\n   * - number : Specific aspect ratio\n   * - `'auto'` : Automatically set to the aspect ratio of the canvas\n   */\n  aspect?: number | 'auto';\n  /**\n   * <zh/> \n   *\n   * <en/> The distance from the camera to the target\n   * @defaultValue 500\n   */\n  distance?: number;\n  /**\n   * <zh/> \n   *\n   * <en/> Minimum distance\n   */\n  minDistance?: number;\n  /**\n   * <zh/> \n   *\n   * <en/> Maximum distance\n   */\n  maxDistance?: number;\n  /**\n   * <zh/> \n   *\n   * <en/> Roll\n   */\n  roll?: number;\n  /**\n   * <zh/> \n   *\n   * <en/> Elevation\n   */\n  elevation?: number;\n  /**\n   * <zh/> \n   *\n   * <en/> Azimuth\n   */\n  azimuth?: number;\n}\n\n/**\n * <zh/> \n *\n * <en/> Configure camera parameters\n */\nexport class CameraSetting extends BasePlugin<CameraSettingOptions> {\n  constructor(context: RuntimeContext, options: CameraSettingOptions) {\n    super(context, options);\n    this.bindEvents();\n  }\n  /**\n   * <zh/> \n   *\n   * <en/> Update camera parameters\n   * @param options - <zh/>  | <en/> Camera configuration options\n   * @internal\n   */\n  public update(options: Partial<CameraSettingOptions>): void {\n    this.setOptions(options);\n    super.update(options);\n  }\n\n  private bindEvents() {\n    this.context.graph.once(GraphEvent.BEFORE_DRAW, () => this.setOptions(this.options));\n  }\n\n  private setOptions = (options: Partial<CameraSettingOptions>) => {\n    const caller = {\n      cameraType: 'setType',\n      near: 'setNear',\n      far: 'setFar',\n      fov: 'setFov',\n      aspect: 'setAspect',\n      //  projectionMode  near/far/fov/aspect \n      // Ensure that projectionMode is set after near/far/fov/aspect\n      projectionMode: 'setProjectionMode',\n      distance: 'setDistance',\n      minDistance: 'setMinDistance',\n      maxDistance: 'setMaxDistance',\n      roll: 'setRoll',\n      elevation: 'setElevation',\n      azimuth: 'setAzimuth',\n    } as const;\n\n    const valueMapper = (key: string, value: string) => {\n      switch (key) {\n        case 'projectionMode':\n          return value === 'perspective' ? 1 : 0;\n        case 'cameraType':\n          return { orbiting: 0, exploring: 1, tracking: 2 }[value]!;\n        case 'aspect':\n          if (typeof value === 'number') return value;\n          return this.getCanvasAspect();\n        default:\n          return value;\n      }\n    };\n\n    Object.entries(caller).forEach(([key, method]) => {\n      const value = options[key];\n      if (value !== undefined) {\n        const actualValue = valueMapper(key, value);\n        // @ts-expect-error incorrect ts type check\n        this.context.canvas.getCamera()[method](actualValue);\n      }\n    });\n  };\n\n  private getCanvasAspect() {\n    const [width, height] = this.context.viewport!.getCanvasSize();\n    return width / height;\n  }\n}\n", "/**\n * <zh/> \n * <en/> The item of the right-click menu.\n */\nexport type Item = {\n  /**\n   * <zh/> \n   * <en/> The name of the menu item.\n   */\n  name: string;\n  /**\n   * <zh/> \n   * <en/> The value corresponding to the menu item.\n   */\n  value: string;\n};\n\n/**\n * Get the content of the right-click menu.\n * @param items - context menu items\n * @returns HTML string\n */\nexport function getContentFromItems(items: Item[]) {\n  return `\n    <ul class=\"g6-contextmenu-ul\">\n      ${items.map((item) => `<li  class=\"g6-contextmenu-li\" value=\"${item.value}\">${item.name}</li>`).join('')}\n    </ul>\n  `;\n}\n\n/**\n * Style of the right-click menu, same with `tooltip`.\n */\nexport const CONTEXTMENU_CSS = `\n  .g6-contextmenu {\n    font-size: 12px;\n    background-color: rgba(255, 255, 255, 0.96);\n    border-radius: 4px;\n    overflow: hidden;\n    box-shadow: rgba(0, 0, 0, 0.12) 0px 6px 12px 0px;\n    transition: visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1) 0s, left 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s, top 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s;\n  }\n\n  .g6-contextmenu-ul {\n    max-width: 256px;\n    min-width: 96px;\n    list-style: none;\n    padding: 0;\n    margin: 0;\n  }\n\n  .g6-contextmenu-li {\n    padding: 8px 12px;\n    cursor: pointer;\n    user-select: none;\n  }\n\n  .g6-contextmenu-li:hover {\n    background-color: #f5f5f5;\n    cursor: pointer;\n  }\n`;\n", "import type { RuntimeContext } from '../../runtime/types';\nimport type { Element } from '../../types';\nimport type { IElementEvent } from '../../types/event';\nimport type { BasePluginOptions } from '../base-plugin';\nimport { BasePlugin } from '../base-plugin';\nimport { createPluginContainer, insertDOM } from '../utils/dom';\nimport type { Item } from './util';\nimport { CONTEXTMENU_CSS, getContentFromItems } from './util';\n/**\n * <zh/> \n *\n * <en/> Contextmenu options\n */\nexport interface ContextmenuOptions extends BasePluginOptions {\n  /**\n   * <zh/>  DOM \n   *\n   * <en/> The class name appended to the menu DOM for custom styles\n   * @defaultValue 'g6-contextmenu'\n   */\n  className?: string;\n  /**\n   * <zh/> \n   * - `'click'` : \n   * - `'contextmenu'` : \n   *\n   * <en/> How to trigger the context menu\n   * - `'click'` : Click trigger\n   * - `'contextmenu'` : Right-click trigger\n   * @defaultValue 'contextmenu'\n   */\n  trigger?: 'click' | 'contextmenu';\n  /**\n   * <zh/>  XY \n   *\n   * <en/> The offset X, y direction of the menu\n   * @defaultValue [4, 4]\n   */\n  offset?: [number, number];\n  /**\n   * <zh/> \n   *\n   * <en/> The callback method triggered when the menu is clicked\n   */\n  onClick?: (value: string, target: HTMLElement, current: Element) => void;\n  /**\n   * <zh/>  `Promise`  `getContent` \n   *\n   * <en/> Return the list of menu items, support the `Promise` type return value. It is a shortcut configuration of `getContent`\n   */\n  getItems?: (event: IElementEvent) => Item[] | Promise<Item[]>;\n  /**\n   * <zh/>  `Promise`  `getItems` \n   *\n   * <en/> Return the content of menu, support the `Promise` type return value, you can also use `getItems` for shortcut configuration\n   */\n  getContent?: (event: IElementEvent) => HTMLElement | string | Promise<HTMLElement | string>;\n  /**\n   * <zh/>  `getContent`  `Promise` \n   *\n   * <en/> The menu content when loading is used when getContent returns a Promise\n   */\n  loadingContent?: HTMLElement | string;\n  /**\n   * <zh/> \n   *\n   * <en/> Whether the plugin is available, determine whether the right-click menu is supported through parameters, The default is all available\n   * @defaultValue true\n   */\n  enable?: boolean | ((event: IElementEvent) => boolean);\n}\n\n/**\n * <zh/> \n *\n * <en/> Contextmenu\n * @remarks\n * <zh/> \n *\n * <en/> Contextmenu, also known as the right-click menu , is a menu that appears when a user clicks on a specific area. Supports triggering custom events before and after clicking.\n */\nexport class Contextmenu extends BasePlugin<ContextmenuOptions> {\n  static defaultOptions: Partial<ContextmenuOptions> = {\n    trigger: 'contextmenu',\n    offset: [4, 4],\n    loadingContent: '<div class=\"g6-contextmenu-loading\">Loading...</div>',\n    getContent: () => 'It is a empty context menu.',\n    enable: () => true,\n  };\n\n  private $element!: HTMLElement;\n\n  private targetElement: Element | null = null;\n\n  constructor(context: RuntimeContext, options: ContextmenuOptions) {\n    super(context, Object.assign({}, Contextmenu.defaultOptions, options));\n\n    this.initElement();\n    this.update(options);\n  }\n\n  private initElement() {\n    this.$element = createPluginContainer('contextmenu', false, { zIndex: '99' });\n    const { className } = this.options;\n    if (className) this.$element.classList.add(className);\n\n    const $container = this.context.canvas.getContainer();\n    $container!.appendChild(this.$element);\n\n    insertDOM('g6-contextmenu-css', 'style', {}, CONTEXTMENU_CSS, document.head);\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Show the contextmenu\n   * @param event - <zh/>  | <en/> Element pointer event\n   * @internal\n   */\n  public async show(event: IElementEvent) {\n    const { enable, offset } = this.options;\n\n    if ((typeof enable === 'function' && !enable(event)) || !enable) {\n      this.hide();\n      return;\n    }\n\n    const content = await this.getDOMContent(event);\n\n    if (content instanceof HTMLElement) {\n      this.$element.innerHTML = '';\n      this.$element.appendChild(content);\n    } else {\n      this.$element.innerHTML = content;\n    }\n\n    // NOTICE:  client \n    const clientRect = this.context.graph.getCanvas().getContainer()!.getBoundingClientRect();\n\n    this.$element.style.left = `${event.client.x - clientRect.left + offset[0]}px`;\n    this.$element.style.top = `${event.client.y - clientRect.top + offset[1]}px`;\n    this.$element.style.display = 'block';\n\n    this.targetElement = event.target;\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Hide the contextmenu\n   */\n  public hide() {\n    this.$element.style.display = 'none';\n    this.targetElement = null;\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Update the contextmenu options\n   * @param options - <zh/>  | <en/> Options\n   * @internal\n   */\n  public update(options: Partial<ContextmenuOptions>) {\n    this.unbindEvents();\n    super.update(options);\n    this.bindEvents();\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Destroy the contextmenu\n   * @internal\n   */\n  public destroy(): void {\n    this.unbindEvents();\n    super.destroy();\n    this.$element.remove();\n  }\n\n  private async getDOMContent(event: IElementEvent) {\n    const { getContent, getItems } = this.options;\n\n    if (getItems) {\n      return getContentFromItems(await getItems(event));\n    }\n    return await getContent(event);\n  }\n\n  private bindEvents() {\n    const { graph } = this.context;\n    const { trigger } = this.options;\n\n    graph.on(`canvas:${trigger}`, this.onTriggerEvent);\n    graph.on(`node:${trigger}`, this.onTriggerEvent);\n    graph.on(`edge:${trigger}`, this.onTriggerEvent);\n    graph.on(`combo:${trigger}`, this.onTriggerEvent);\n\n    document.addEventListener('click', this.onMenuItemClick);\n  }\n\n  private unbindEvents() {\n    const { graph } = this.context;\n    const { trigger } = this.options;\n\n    graph.off(`canvas:${trigger}`, this.onTriggerEvent);\n    graph.off(`node:${trigger}`, this.onTriggerEvent);\n    graph.off(`edge:${trigger}`, this.onTriggerEvent);\n    graph.off(`combo:${trigger}`, this.onTriggerEvent);\n\n    document.removeEventListener('click', this.onMenuItemClick);\n  }\n\n  private onTriggerEvent = (event: IElementEvent) => {\n    // `contextmenu` \n    // `click` \n    event.preventDefault?.();\n    this.show(event);\n  };\n\n  private onMenuItemClick = (event: MouseEvent) => {\n    const { onClick, trigger } = this.options;\n    if (event.target instanceof HTMLElement) {\n      if (event.target.className.includes('g6-contextmenu-li')) {\n        const value = event.target.getAttribute('value') as string;\n        onClick?.(value, event.target, this.targetElement!);\n        this.hide();\n      }\n    }\n\n    if (trigger !== 'click') this.hide();\n  };\n}\n", "import { isEmpty } from '@antv/util';\nimport { GraphEvent } from '../../constants';\nimport type { RuntimeContext } from '../../runtime/types';\nimport type { EdgeData } from '../../spec';\nimport type { ID, Point } from '../../types';\nimport { getPolylinePath } from '../../utils/edge';\nimport { idOf } from '../../utils/id';\nimport { positionOf } from '../../utils/position';\nimport { add, distance, divide, dot, multiply, subtract, toVector2 } from '../../utils/vector';\nimport type { BasePluginOptions } from '../base-plugin';\nimport { BasePlugin } from '../base-plugin';\n\n/**\n * <zh/> \n *\n * <en/> Edge bundling options\n */\nexport interface EdgeBundlingOptions extends BasePluginOptions {\n  /**\n   * <zh/> \n   *\n   * <en/> The strength of the edge\n   * @defaultValue 0.1\n   */\n  K?: number;\n  /**\n   * <zh/> \n   *\n   * <en/> An initial step size. In subsequent cycles, the step size will double incrementally\n   * @defaultValue 0.1\n   */\n  lambda?: number;\n  /**\n   * <zh/> \n   *\n   * <en/> The number of simulation cycles\n   * @defaultValue 6\n   */\n  cycles?: number;\n  /**\n   * <zh/>  `divRate` \n   *\n   * <en/> An initial number of subdivision points for each edge. In subsequent cycles, the number of subdivision points will increase gradually according to `divRate`\n   * @defaultValue 1\n   */\n  divisions?: number;\n  /**\n   * <zh/> \n   *\n   * <en/> The rate at which the number of subdivision points increases\n   * @defaultValue 2\n   */\n  divRate?: number;\n  /**\n   * <zh/>  `iterRate` \n   *\n   * <en/> The number of iteration steps during the first cycle. In subsequent cycles, the number of iterations will decrease gradually according to `iterRate`\n   * @defaultValue 90\n   */\n  iterations?: number;\n  /**\n   * <zh/> \n   *\n   * <en/> The rate at which the number of iterations decreases\n   * @defaultValue 2 / 3\n   */\n  iterRate?: number;\n  /**\n   * <zh/> \n   *\n   * <en/> Edge compatibility threshold, which determines which edges should be bundled together\n   * @defaultValue 0.6\n   */\n  bundleThreshold?: number;\n}\n\n/**\n * <zh/> \n *\n * <en/> Edge bundling\n * @remarks\n * <zh/> Edge Bundling\n *\n * <zh/> G6  FEDBForce-Directed Edge Bundling for Graph Visualization\n *\n * <en/> Edge bundling is a graph visualization technique used to reduce visual clutter in complex network graphs and reveal high-level patterns and structures in the graph. The idea is to bundle adjacent edges together.\n *\n * <en/> The edge bundling plugin provided in G6 is based on the implementation of the paper FEDB (Force-Directed Edge Bundling for Graph Visualization): modeling edges as flexible springs that can attract each other and bundling them in a self-organizing way.\n */\nexport class EdgeBundling extends BasePlugin<EdgeBundlingOptions> {\n  static defaultOptions: Partial<EdgeBundlingOptions> = {\n    K: 0.1,\n    lambda: 0.1,\n    divisions: 1,\n    divRate: 2,\n    cycles: 6,\n    iterations: 90,\n    iterRate: 2 / 3,\n    bundleThreshold: 0.6,\n  };\n\n  constructor(context: RuntimeContext, options?: EdgeBundlingOptions) {\n    super(context, Object.assign({}, EdgeBundling.defaultOptions, options));\n    this.bindEvents();\n  }\n\n  private edgeBundles: Record<ID, EdgeData[]> = {};\n\n  private edgePoints: Record<ID, Point[]> = {};\n\n  private get nodeMap(): Record<ID, Point> {\n    const nodes = this.context.model.getNodeData();\n    return Object.fromEntries(nodes.map((node) => [idOf(node), toVector2(positionOf(node))]));\n  }\n\n  private divideEdges(divisions: number) {\n    const edges = this.context.model.getEdgeData();\n\n    edges.forEach((edge) => {\n      const edgeId = idOf(edge);\n      this.edgePoints[edgeId] ||= [];\n\n      const source = this.nodeMap[edge.source];\n      const target = this.nodeMap[edge.target];\n\n      if (divisions === 1) {\n        this.edgePoints[edgeId].push(source);\n        this.edgePoints[edgeId].push(divide(add(source, target), 2));\n        this.edgePoints[edgeId].push(target);\n      } else {\n        const edgeLength =\n          this.edgePoints[edgeId].length === 0\n            ? // edge is a straight line\n              distance(source, target)\n            : // edge is a polyline\n              getEdgeLength(this.edgePoints[edgeId]);\n\n        const divisionLength = edgeLength / (divisions + 1);\n        let currentDivisionLength = divisionLength;\n\n        const newEdgePoints: Point[] = [source];\n\n        for (let i = 1; i < this.edgePoints[edgeId].length; i++) {\n          const prevEp = this.edgePoints[edgeId][i - 1];\n          const ep = this.edgePoints[edgeId][i];\n          let oriDivisionLength = distance(ep, prevEp);\n\n          while (oriDivisionLength > currentDivisionLength) {\n            const ratio = currentDivisionLength / oriDivisionLength;\n            const edgePoint = add(prevEp, multiply(subtract(ep, prevEp), ratio));\n            newEdgePoints.push(edgePoint);\n\n            oriDivisionLength -= currentDivisionLength;\n            currentDivisionLength = divisionLength;\n          }\n\n          currentDivisionLength -= oriDivisionLength;\n        }\n\n        newEdgePoints.push(target);\n        this.edgePoints[edgeId] = newEdgePoints;\n      }\n    });\n  }\n\n  private getVectorPosition(edge: EdgeData): VectorPosition {\n    const source = this.nodeMap[edge.source];\n    const target = this.nodeMap[edge.target];\n    const [vx, vy] = subtract(target, source);\n    const length = distance(source, target);\n    return { source, target, vx, vy, length };\n  }\n\n  private measureEdgeCompatibility(edge1: EdgeData, edge2: EdgeData) {\n    const vector1 = this.getVectorPosition(edge1);\n    const vector2 = this.getVectorPosition(edge2);\n\n    const ac = getAngleCompatibility(vector1, vector2);\n    const sc = getScaleCompatibility(vector1, vector2);\n    const pc = getPositionCompatibility(vector1, vector2);\n    const vc = getVisibilityCompatibility(vector1, vector2);\n\n    return ac * sc * pc * vc;\n  }\n\n  private getEdgeBundles() {\n    const edgeBundles: Record<ID, EdgeData[]> = {};\n    const bundleThreshold = this.options.bundleThreshold;\n    const edges = this.context.model.getEdgeData();\n\n    edges.forEach((edge1, i) => {\n      edges.forEach((edge2, j) => {\n        if (j <= i) return;\n\n        const compatibility = this.measureEdgeCompatibility(edge1, edge2);\n        if (compatibility >= bundleThreshold) {\n          edgeBundles[idOf(edge1)] ||= [];\n          edgeBundles[idOf(edge1)].push(edge2);\n          edgeBundles[idOf(edge2)] ||= [];\n          edgeBundles[idOf(edge2)].push(edge1);\n        }\n      });\n    });\n    return edgeBundles;\n  }\n\n  private getSpringForce(divisions: { pre: Point; cur: Point; next: Point }, kp: number): Point {\n    const { pre, cur, next } = divisions;\n    return multiply(subtract(add(pre, next), multiply(cur, 2)), kp);\n  }\n\n  private getElectrostaticForce(pidx: number, edge: EdgeData): Point {\n    if (isEmpty(this.edgeBundles)) {\n      this.edgeBundles = this.getEdgeBundles();\n    }\n\n    const edgeBundle = this.edgeBundles[idOf(edge)];\n    let resForce: Point = [0, 0];\n\n    edgeBundle?.forEach((eb) => {\n      const p1 = this.edgePoints[idOf(eb)][pidx];\n      const p2 = this.edgePoints[idOf(edge)][pidx];\n      const force = subtract(p1, p2);\n      const length = distance(p1, p2);\n      resForce = add(resForce, multiply(force, 1 / length));\n    });\n\n    return resForce;\n  }\n\n  private getEdgeForces(edge: EdgeData, divisions: number, lambda: number): Point[] {\n    const source = this.nodeMap[edge.source];\n    const target = this.nodeMap[edge.target];\n    const kp = this.options.K / (distance(source, target) * (divisions + 1));\n    const edgePointForces: Point[] = [[0, 0]];\n    const edgeId = idOf(edge);\n\n    for (let i = 1; i < divisions; i++) {\n      const spring = this.getSpringForce(\n        {\n          pre: this.edgePoints[edgeId][i - 1],\n          cur: this.edgePoints[edgeId][i],\n          next: this.edgePoints[edgeId][i + 1] || [0, 0],\n        },\n        kp,\n      );\n      const electrostatic = this.getElectrostaticForce(i, edge);\n      edgePointForces.push(multiply(add(spring, electrostatic), lambda));\n    }\n\n    edgePointForces.push([0, 0]);\n\n    return edgePointForces;\n  }\n\n  protected onBundle = () => {\n    const { model, element } = this.context;\n    const edges = model.getEdgeData();\n    this.divideEdges(this.options.divisions);\n\n    const { cycles, iterRate, divRate } = this.options;\n    let { lambda, divisions, iterations } = this.options;\n    for (let i = 0; i < cycles; i++) {\n      for (let j = 0; j < iterations; j++) {\n        const forces: Record<ID, Point[]> = {};\n        edges.forEach((edge) => {\n          if (edge.source === edge.target) return;\n          const edgeId = idOf(edge);\n          forces[edgeId] = this.getEdgeForces(edge, divisions, lambda);\n\n          for (let p = 0; p < divisions + 1; p++) {\n            this.edgePoints[edgeId] ||= [];\n            this.edgePoints[edgeId][p] = add(this.edgePoints[edgeId][p], forces[edgeId][p]);\n          }\n        });\n      }\n\n      // parameters for next cycle\n      lambda /= 2;\n      divisions *= divRate;\n      iterations *= iterRate;\n      this.divideEdges(divisions);\n    }\n\n    edges.forEach((edge) => {\n      const edgeId = idOf(edge);\n      const edgeEl = element!.getElement(edgeId);\n      edgeEl?.update({ d: getPolylinePath(this.edgePoints[edgeId]) });\n    });\n  };\n\n  private bindEvents() {\n    const { graph } = this.context;\n\n    graph.on(GraphEvent.AFTER_RENDER, this.onBundle);\n  }\n\n  private unbindEvents() {\n    const { graph } = this.context;\n\n    graph.off(GraphEvent.AFTER_RENDER, this.onBundle);\n  }\n\n  public destroy(): void {\n    this.unbindEvents();\n    super.destroy();\n  }\n}\n\ninterface VectorPosition {\n  source: Point;\n  target: Point;\n  vx: number;\n  vy: number;\n  length: number;\n}\n\n// The larger the angle between edges P and Q, the smaller Ca(P,Q).\n// Ca(P,Q) is 0 if P and Q are orthogonal and 1 if P and Q are parallel.\nconst getAngleCompatibility = (p: VectorPosition, q: VectorPosition): number => {\n  return Math.abs(dot([p.vx, p.vy], [q.vx, q.vy]) / (p.length * q.length));\n};\n\n// Cs(P,Q) is 1 if P and Q have equal length and approaches 0 if the ratio between the longest and the shortest edge approaches .\nconst getScaleCompatibility = (p: VectorPosition, q: VectorPosition): number => {\n  const aLength = (p.length + q.length) / 2;\n  return 2 / (aLength / Math.min(p.length, q.length) + Math.max(p.length, q.length) / aLength);\n};\n\n// Cp(P,Q) is 1 if Pm and Qm coincide and approaches 0 if ||Pm Qm|| approaches .\nconst getPositionCompatibility = (p: VectorPosition, q: VectorPosition): number => {\n  const aLength = (p.length + q.length) / 2;\n\n  const pMid = divide(add(p.source, p.target), 2);\n  const qMid = divide(add(q.source, q.target), 2);\n\n  return aLength / (aLength + distance(pMid, qMid));\n};\n\nconst projectPointToEdge = (p: Point, e: VectorPosition): Point => {\n  if (e.source[0] === e.target[0]) return [e.source[0], p[1]];\n  if (e.source[1] === e.target[1]) return [p[0], e.source[1]];\n  const k = (e.source[1] - e.target[1]) / (e.source[0] - e.target[0]);\n  const x = (k * k * e.source[0] + k * (p[1] - e.source[1]) + p[0]) / (k * k + 1);\n  const y = k * (x - e.source[0]) + e.source[1];\n  return [x, y];\n};\n\nconst getEdgeVisibility = (p: VectorPosition, q: VectorPosition): number => {\n  const is = projectPointToEdge(q.source, p);\n  const it = projectPointToEdge(q.target, p);\n  const iMid = divide(add(is, it), 2);\n  const pMid = divide(add(p.source, p.target), 2);\n  if (distance(is, it) === 0) return 0;\n  return Math.max(0, 1 - (2 * distance(pMid, iMid)) / distance(is, it));\n};\n\nconst getVisibilityCompatibility = (p: VectorPosition, q: VectorPosition): number => {\n  return Math.min(getEdgeVisibility(p, q), getEdgeVisibility(q, p));\n};\n\n/**\n * Calculate the length of a polyline\n * @param points - The points of the polyline\n * @returns The length of the polyline\n */\nconst getEdgeLength = (points: Point[]): number => {\n  let length = 0;\n  for (let i = 1; i < points.length; i++) {\n    length += distance(points[i], points[i - 1]);\n  }\n  return length;\n};\n", "import { CommonEvent } from '../../constants';\nimport { Circle, type CircleStyleProps } from '../../elements';\nimport type { RuntimeContext } from '../../runtime/types';\nimport type { EdgeData, GraphData, NodeData } from '../../spec';\nimport type { EdgeStyle } from '../../spec/element/edge';\nimport type { NodeStyle } from '../../spec/element/node';\nimport type {\n  Element,\n  ElementDatum,\n  ElementType,\n  ID,\n  IDragEvent,\n  IPointerEvent,\n  Point,\n  PointObject,\n} from '../../types';\nimport { idOf } from '../../utils/id';\nimport { parsePoint, toPointObject } from '../../utils/point';\nimport { positionOf } from '../../utils/position';\nimport { distance } from '../../utils/vector';\nimport type { BasePluginOptions } from '../base-plugin';\nimport { BasePlugin } from '../base-plugin';\n\n/**\n * <zh/> \n *\n * <en/> Edge filter lens plugin options\n */\nexport interface EdgeFilterLensOptions extends BasePluginOptions {\n  /**\n   * <zh/> \n   * - `'pointermove'`\n   * - `'click'`\n   * - `'drag'`\n   *\n   * <en/> The way to move the lens\n   * - `'pointermove'`: always follow the mouse movement\n   * - `'click'`: move the lens when the mouse clicks\n   * - `'drag'`: drag the lens\n   * @defaultValue 'pointermove'\n   */\n  trigger?: 'pointermove' | 'click' | 'drag';\n  /**\n   * <zh/> \n   *\n   * <en/> The radius of the lens\n   * @defaultValue 60\n   */\n  r?: number;\n  /**\n   * <zh/>  `scaleRBy`  `wheel` \n   *\n   * <en/> The maximum radius of the lens. Only valid when `scaleRBy` is `wheel`\n   * @defaultValue canvas \n   */\n  maxR?: number;\n  /**\n   * <zh/>  `scaleRBy`  `wheel` \n   *\n   * <en/> The minimum radius of the lens. Only valid when `scaleRBy` is `wheel`\n   * @defaultValue 0\n   */\n  minR?: number;\n  /**\n   * <zh/> \n   * - `'wheel'`\n   *\n   * <en/> The way to scale the radius of the lens\n   * - `'wheel'`: scale the radius of the lens by the wheel\n   * @defaultValue `'wheel'`\n   */\n  scaleRBy?: 'wheel';\n  /**\n   * <zh/> \n   * - `'both'`\n   * - `'source'`\n   * - `'target'`\n   * - `'either'`\n   *\n   * <en/> The condition for displaying the edge\n   * - `'both'`: The edge is displayed only when both the source node and the target node are in the lens\n   * - `'source'`: The edge is displayed only when the source node is in the lens\n   * - `'target'`: The edge is displayed only when the target node is in the lens\n   * - `'either'`: The edge is displayed when either the source node or the target node is in the lens\n   * @defaultValue 'both'\n   */\n  nodeType?: 'both' | 'source' | 'target' | 'either';\n  /**\n   * <zh/> \n   *\n   * <en/> Filter elements that are never displayed in the lens\n   * @param id - <zh/>  id | <en/> The id of the element\n   * @param elementType - <zh/>  | <en/> The type of the element\n   * @returns <zh/>  | <en/> Whether to display\n   */\n  filter?: (id: ID, elementType: ElementType) => boolean;\n  /**\n   * <zh/> \n   *\n   * <en/> The style of the lens\n   */\n  style?: Partial<CircleStyleProps>;\n  /**\n   * <zh/> \n   *\n   * <en/> The style of the nodes displayed in the lens\n   */\n  nodeStyle?: NodeStyle | ((datum: NodeData) => NodeStyle);\n  /**\n   * <zh/> \n   *\n   * <en/> The style of the edges displayed in the lens\n   */\n  edgeStyle?: EdgeStyle | ((datum: EdgeData) => EdgeStyle);\n  /**\n   * <zh/> \n   *\n   * <en/> Whether to prevent the default event\n   * @defaultValue true\n   */\n  preventDefault?: boolean;\n}\n\nconst defaultLensStyle: Exclude<CircleStyleProps, 'r'> = {\n  fill: '#fff',\n  fillOpacity: 1,\n  lineWidth: 1,\n  stroke: '#000',\n  strokeOpacity: 0.8,\n  zIndex: -Infinity,\n};\n\nconst DELTA = 0.05;\n\n/**\n * <zh/> \n *\n * <en/> Edge filter lens plugin\n * @remarks\n * <zh/> \n *\n * <en/> EdgeFilterLens can keep the focused edges within the lens range, while other edges will not be displayed within that range.\n */\nexport class EdgeFilterLens extends BasePlugin<EdgeFilterLensOptions> {\n  static defaultOptions: Partial<EdgeFilterLensOptions> = {\n    trigger: 'pointermove',\n    r: 60,\n    nodeType: 'both',\n    filter: () => true,\n    style: { lineWidth: 2 },\n    nodeStyle: { label: false },\n    edgeStyle: { label: true },\n    scaleRBy: 'wheel',\n    preventDefault: true,\n  };\n\n  constructor(context: RuntimeContext, options: EdgeFilterLensOptions) {\n    super(context, Object.assign({}, EdgeFilterLens.defaultOptions, options));\n    this.bindEvents();\n  }\n\n  private lens!: Circle;\n\n  private shapes = new Map<ID, Element>();\n\n  private r = this.options.r;\n\n  private get canvas() {\n    return this.context.canvas.getLayer('transient');\n  }\n\n  private get isLensOn() {\n    return this.lens && !this.lens.destroyed;\n  }\n\n  protected onEdgeFilter = (event: IPointerEvent) => {\n    if (this.options.trigger === 'drag' && this.isLensOn) return;\n\n    const origin = parsePoint(event.canvas as PointObject);\n    this.renderLens(origin);\n    this.renderFocusElements();\n  };\n\n  private renderLens = (origin: Point) => {\n    const style = Object.assign({}, defaultLensStyle, this.options.style);\n\n    if (!this.isLensOn) {\n      this.lens = new Circle({ style });\n      this.canvas.appendChild(this.lens);\n    }\n\n    Object.assign(style, toPointObject(origin), { size: this.r * 2 });\n\n    this.lens.update(style);\n  };\n\n  private getFilterData = (): Required<GraphData> => {\n    const { filter } = this.options;\n    const { model } = this.context;\n    const data = model.getData();\n\n    if (!filter) return data;\n\n    const { nodes, edges, combos } = data;\n\n    return {\n      nodes: nodes.filter((node) => filter(idOf(node), 'node')),\n      edges: edges.filter((edge) => filter(idOf(edge), 'edge')),\n      combos: combos.filter((combo) => filter(idOf(combo), 'combo')),\n    };\n  };\n\n  private getFocusElements = (origin: Point) => {\n    const { nodes, edges } = this.getFilterData();\n\n    const focusNodes = nodes.filter((datum) => distance(positionOf(datum), origin) < this.r);\n    const focusNodeIds = focusNodes.map((node) => idOf(node));\n\n    const focusEdges = edges.filter((datum) => {\n      const { source, target } = datum;\n      const isSourceFocus = focusNodeIds.includes(source);\n      const isTargetFocus = focusNodeIds.includes(target);\n\n      switch (this.options.nodeType) {\n        case 'both':\n          return isSourceFocus && isTargetFocus;\n        case 'either':\n          return isSourceFocus !== isTargetFocus;\n        case 'source':\n          return isSourceFocus && !isTargetFocus;\n        case 'target':\n          return !isSourceFocus && isTargetFocus;\n        default:\n          return false;\n      }\n    });\n\n    return { nodes: focusNodes, edges: focusEdges };\n  };\n\n  private renderFocusElements = () => {\n    const { element, graph } = this.context;\n    if (!this.isLensOn) return;\n\n    const origin = this.lens.getCenter();\n    const { nodes, edges } = this.getFocusElements(origin);\n\n    const ids = new Set<ID>();\n\n    const iterate = (datum: ElementDatum) => {\n      const id = idOf(datum);\n      ids.add(id);\n\n      const shape = element!.getElement(id);\n      if (!shape) return;\n\n      const cloneShape = this.shapes.get(id) || shape.cloneNode();\n\n      cloneShape.setPosition(shape.getPosition());\n      cloneShape.id = shape.id;\n\n      if (!this.shapes.has(id)) {\n        this.canvas.appendChild(cloneShape);\n        this.shapes.set(id, cloneShape);\n      } else {\n        Object.entries(shape.attributes).forEach(([key, value]) => {\n          if (cloneShape.style[key] !== value) cloneShape.style[key] = value;\n        });\n      }\n\n      const elementType = graph.getElementType(id) as Exclude<ElementType, 'combo'>;\n      const style = this.getElementStyle(elementType, datum);\n\n      // @ts-ignore\n      cloneShape.update(style);\n    };\n\n    nodes.forEach(iterate);\n    edges.forEach(iterate);\n\n    this.shapes.forEach((shape, id) => {\n      if (!ids.has(id)) {\n        shape.destroy();\n        this.shapes.delete(id);\n      }\n    });\n  };\n\n  private getElementStyle(elementType: ElementType, datum: ElementDatum) {\n    const styler = elementType === 'node' ? this.options.nodeStyle : this.options.edgeStyle;\n    if (typeof styler === 'function') return styler(datum as any);\n    return styler;\n  }\n\n  private scaleRByWheel = (event: WheelEvent) => {\n    if (this.options.preventDefault) event.preventDefault();\n    const { clientX, clientY, deltaX, deltaY } = event;\n    const { graph, canvas } = this.context;\n    const scaleOrigin = graph.getCanvasByClient([clientX, clientY]);\n    const origin = this.lens?.getCenter();\n\n    if (!this.isLensOn || distance(scaleOrigin, origin) > this.r) {\n      return;\n    }\n\n    const { maxR, minR } = this.options;\n    const ratio = deltaX + deltaY > 0 ? 1 / (1 - DELTA) : 1 - DELTA;\n    const canvasR = Math.min(...canvas.getSize()) / 2;\n    this.r = Math.max(minR || 0, Math.min(maxR || canvasR, this.r * ratio));\n\n    this.renderLens(origin);\n    this.renderFocusElements();\n  };\n\n  get graphDom() {\n    return this.context.graph.getCanvas().getContextService().getDomElement();\n  }\n\n  private isLensDragging = false;\n\n  private onDragStart = (event: IDragEvent) => {\n    const dragOrigin = parsePoint(event.canvas as PointObject);\n    const origin = this.lens?.getCenter();\n\n    if (!this.isLensOn || distance(dragOrigin, origin) > this.r) return;\n\n    this.isLensDragging = true;\n  };\n\n  private onDrag = (event: IDragEvent) => {\n    if (!this.isLensDragging) return;\n\n    const dragOrigin = parsePoint(event.canvas as PointObject);\n    this.renderLens(dragOrigin);\n    this.renderFocusElements();\n  };\n\n  private onDragEnd = () => {\n    this.isLensDragging = false;\n  };\n\n  private bindEvents() {\n    const { graph } = this.context;\n    const { trigger, scaleRBy } = this.options;\n\n    const canvas = graph.getCanvas().getLayer();\n\n    if (['click', 'drag'].includes(trigger)) {\n      canvas.addEventListener(CommonEvent.CLICK, this.onEdgeFilter);\n    }\n\n    if (trigger === 'pointermove') {\n      canvas.addEventListener(CommonEvent.POINTER_MOVE, this.onEdgeFilter);\n    } else if (trigger === 'drag') {\n      canvas.addEventListener(CommonEvent.DRAG_START, this.onDragStart);\n      canvas.addEventListener(CommonEvent.DRAG, this.onDrag);\n      canvas.addEventListener(CommonEvent.DRAG_END, this.onDragEnd);\n    }\n\n    if (scaleRBy === 'wheel') {\n      this.graphDom?.addEventListener(CommonEvent.WHEEL, this.scaleRByWheel, { passive: false });\n    }\n  }\n\n  private unbindEvents() {\n    const { graph } = this.context;\n    const { trigger, scaleRBy } = this.options;\n    const canvas = graph.getCanvas().getLayer();\n\n    if (['click', 'drag'].includes(trigger)) {\n      canvas.removeEventListener(CommonEvent.CLICK, this.onEdgeFilter);\n    }\n\n    if (trigger === 'pointermove') {\n      canvas.removeEventListener(CommonEvent.POINTER_MOVE, this.onEdgeFilter);\n    } else if (trigger === 'drag') {\n      canvas.removeEventListener(CommonEvent.DRAG_START, this.onDragStart);\n      canvas.removeEventListener(CommonEvent.DRAG, this.onDrag);\n      canvas.removeEventListener(CommonEvent.DRAG_END, this.onDragEnd);\n    }\n\n    if (scaleRBy === 'wheel') {\n      this.graphDom?.removeEventListener(CommonEvent.WHEEL, this.scaleRByWheel);\n    }\n  }\n\n  public update(options: Partial<EdgeFilterLensOptions>) {\n    this.unbindEvents();\n    super.update(options);\n    this.r = options.r ?? this.r;\n    this.bindEvents();\n  }\n\n  public destroy() {\n    this.unbindEvents();\n    if (this.isLensOn) {\n      this.lens.destroy();\n    }\n    this.shapes.forEach((shape, id) => {\n      shape.destroy();\n      this.shapes.delete(id);\n    });\n    super.destroy();\n  }\n}\n", "import { pick } from '@antv/util';\nimport { CommonEvent } from '../../constants';\nimport type { CircleStyleProps } from '../../elements';\nimport { Circle } from '../../elements';\nimport type { RuntimeContext } from '../../runtime/types';\nimport type { NodeData } from '../../spec';\nimport type { NodeStyle } from '../../spec/element/node';\nimport type { ID, IDragEvent, IPointerEvent, Node, Point, PointObject } from '../../types';\nimport { arrayDiff } from '../../utils/diff';\nimport { idOf } from '../../utils/id';\nimport { parsePoint, toPointObject } from '../../utils/point';\nimport { positionOf } from '../../utils/position';\nimport { distance } from '../../utils/vector';\nimport type { BasePluginOptions } from '../base-plugin';\nimport { BasePlugin } from '../base-plugin';\n\n/**\n * <zh/> \n *\n * <en/> Fisheye Plugin Options\n */\nexport interface FisheyeOptions extends BasePluginOptions {\n  /**\n   * <zh/> \n   * - `'pointermove'`\n   * - `'click'`\n   * - `'drag'`\n   *\n   * <en/> The way to move the fisheye lens\n   * - `'pointermove'`: always follow the mouse movement\n   * - `'click'`: move when the mouse is clicked\n   * - `'drag'`: move by dragging\n   * @defaultValue `'pointermove'`\n   */\n  trigger?: 'pointermove' | 'drag' | 'click';\n  /**\n   * <zh/> \n   *\n   * <en/> The radius of the fisheye lens\n   * @remarks\n   * <img src=\"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*unAvQqAb_NMAAAAAAAAAAAAADmJ7AQ/original\" width=\"200\" />\n   * @defaultValue 120\n   */\n  r?: number;\n  /**\n   * <zh/>  `scaleRBy` \n   *\n   * <en/> The maximum radius that the fisheye lens can be adjusted, used with `scaleRBy`\n   * @defaultValue \n   */\n  maxR?: number;\n  /**\n   * <zh/>  `scaleRBy` \n   *\n   * <en/> The minimum radius that the fisheye lens can be adjusted, used with `scaleRBy`\n   * @defaultValue 0\n   */\n  minR?: number;\n  /**\n   * <zh/> \n   * - `'wheel'`\n   * - `'drag'`\n   *\n   * <en/> The way to adjust the range radius of the fisheye lens\n   * - `'wheel'`: adjust by wheel\n   * - `'drag'`: adjust by drag\n   * @remarks\n   * <zh/>  `trigger``scaleRBy`  `scaleDBy`  `'drag'` `trigger` > `scaleRBy` > `scaleDBy` `scaleRBy`  `scaleDBy`  `'wheel'` `scaleRBy` \n   *\n   * <en/> If `trigger`, `scaleRBy`, and `scaleDBy` are set to `'drag'` at the same time, the priority order is `trigger` > `scaleRBy` > `scaleDBy`, and only the configuration item with the highest priority will be bound to the drag event. Similarly, if `scaleRBy` and `scaleDBy` are set to `'wheel'` at the same time, only `scaleRBy` will be bound to the wheel event\n   */\n  scaleRBy?: 'wheel' | 'drag';\n  /**\n   * <zh/> \n   *\n   * <en/> Distortion factor\n   * @remarks\n   * <img src=\"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*4ITFR7GOl8UAAAAAAAAAAAAADmJ7AQ/original\" width=\"200\" />\n   * @defaultValue 1.5\n   */\n  d?: number;\n  /**\n   * <zh/>  `scaleDBy` \n   *\n   * <en/> The maximum distortion factor that the fisheye lens can be adjusted, used with `scaleDBy`\n   * @defaultValue 5\n   */\n  maxD?: number;\n  /**\n   * <zh/>  `scaleDBy` \n   *\n   * <en/> The minimum distortion factor that the fisheye lens can be adjusted, used with `scaleDBy`\n   * @defaultValue 0\n   */\n  minD?: number;\n  /**\n   * <zh/> \n   * - `'wheel'`\n   * - `'drag'`\n   *\n   * <en/> The way to adjust the distortion factor of the fisheye lens\n   * - `'wheel'`: adjust by wheel\n   * - `'drag'`: adjust by drag\n   */\n  scaleDBy?: 'wheel' | 'drag';\n  /**\n   * <zh/> \n   *\n   * <en/> Whether to display the value of the distortion factor in the fisheye lens\n   * @defaultValue true\n   */\n  showDPercent?: boolean;\n  /**\n   * <zh/> \n   *\n   * <en/> Fisheye Lens Style\n   */\n  style?: Partial<CircleStyleProps>;\n  /**\n   * <zh/> \n   *\n   * <en/> Node style in the fisheye lens\n   */\n  nodeStyle?: NodeStyle | ((datum: NodeData) => NodeStyle);\n  /**\n   * <zh/> \n   *\n   * <en/> Whether to prevent the default event\n   * @defaultValue true\n   */\n  preventDefault?: boolean;\n}\n\nconst defaultLensStyle: Exclude<CircleStyleProps, 'r'> = {\n  fill: '#ccc',\n  fillOpacity: 0.1,\n  lineWidth: 2,\n  stroke: '#000',\n  strokeOpacity: 0.8,\n  labelFontSize: 12,\n};\n\nconst R_DELTA = 0.05;\nconst D_DELTA = 0.1;\n\n/**\n * <zh/> \n *\n * <en/> Fisheye Distortion\n * @remarks\n * <zh/> Fisheye  focus+context \n *\n * <en/> Fisheye is designed for focus+context exploration, it keeps the context and the relationships between context and the focus while magnifying the focus area.\n */\nexport class Fisheye extends BasePlugin<FisheyeOptions> {\n  static defaultOptions: Partial<FisheyeOptions> = {\n    trigger: 'pointermove',\n    r: 120,\n    d: 1.5,\n    maxD: 5,\n    minD: 0,\n    showDPercent: true,\n    style: {},\n    nodeStyle: { label: true },\n    preventDefault: true,\n  };\n\n  constructor(context: RuntimeContext, options: FisheyeOptions) {\n    super(context, Object.assign({}, Fisheye.defaultOptions, options));\n    this.bindEvents();\n  }\n\n  private lens!: Circle;\n\n  private r = this.options.r;\n  private d = this.options.d;\n\n  private get canvas() {\n    return this.context.canvas.getLayer('transient');\n  }\n\n  private get isLensOn() {\n    return this.lens && !this.lens.destroyed;\n  }\n\n  protected onCreateFisheye = (event: IPointerEvent) => {\n    if (this.options.trigger === 'drag' && this.isLensOn) return;\n\n    const origin = parsePoint(event.canvas as PointObject);\n    this.onMagnify(origin);\n  };\n\n  protected onMagnify = (origin: Point) => {\n    if (origin.some(isNaN)) return;\n\n    this.renderLens(origin);\n    this.renderFocusElements();\n  };\n\n  private renderLens = (origin: Point) => {\n    const style = Object.assign({}, defaultLensStyle, this.options.style);\n\n    if (!this.isLensOn) {\n      this.lens = new Circle({ style });\n      this.canvas.appendChild(this.lens);\n    }\n\n    Object.assign(style, toPointObject(origin), {\n      size: this.r * 2,\n      label: this.options.showDPercent,\n      labelText: this.getDPercent(),\n    });\n\n    this.lens.update(style);\n  };\n\n  private getDPercent = () => {\n    const { minD, maxD } = this.options as Required<FisheyeOptions>;\n    const percent = Math.round(((this.d - minD) / (maxD - minD)) * 100);\n    return `${percent}%`;\n  };\n\n  private prevMagnifiedStyleMap = new Map<ID, NodeStyle>();\n  private prevOriginStyleMap = new Map<ID, NodeStyle>();\n\n  private renderFocusElements = () => {\n    if (!this.isLensOn) return;\n\n    const { graph } = this.context;\n    const origin = this.lens.getCenter();\n\n    const molecularParam = (this.d + 1) * this.r;\n\n    const magnifiedStyleMap = new Map<ID, NodeStyle>();\n    const originStyleMap = new Map<ID, NodeStyle>();\n\n    const nodeData = graph.getNodeData();\n    nodeData.forEach((datum) => {\n      const position = positionOf(datum);\n      const distanceToOrigin = distance(position, origin);\n      if (distanceToOrigin > this.r) return;\n\n      const magnifiedDistance = (molecularParam * distanceToOrigin) / (this.d * distanceToOrigin + this.r);\n      const [nodeX, nodeY] = position;\n      const [originX, originY] = origin;\n      const cos = (nodeX - originX) / distanceToOrigin;\n      const sin = (nodeY - originY) / distanceToOrigin;\n\n      const newPoint: Point = [originX + magnifiedDistance * cos, originY + magnifiedDistance * sin];\n      const nodeId = idOf(datum);\n\n      const style = this.getNodeStyle(datum);\n      const originStyle = pick(graph.getElementRenderStyle(nodeId), Object.keys(style));\n\n      magnifiedStyleMap.set(nodeId, { ...toPointObject(newPoint), ...style });\n      originStyleMap.set(nodeId, { ...toPointObject(position), ...originStyle });\n    });\n\n    this.updateStyle(magnifiedStyleMap, originStyleMap);\n  };\n\n  private getNodeStyle = (datum: NodeData) => {\n    const { nodeStyle } = this.options;\n    return typeof nodeStyle === 'function' ? nodeStyle(datum) : nodeStyle;\n  };\n\n  private updateStyle = (magnifiedStyleMap: Map<ID, NodeStyle>, originStyleMap: Map<ID, NodeStyle>) => {\n    const { graph, element } = this.context;\n\n    const { enter, exit, keep } = arrayDiff<ID>(\n      Array.from(this.prevMagnifiedStyleMap.keys()),\n      Array.from(magnifiedStyleMap.keys()),\n      (d) => d,\n    );\n\n    const relatedEdges = new Set<ID>();\n\n    const update = (nodeId: ID, style: NodeStyle) => {\n      const node = element!.getElement(nodeId) as Node;\n      node?.update(style);\n\n      graph.getRelatedEdgesData(nodeId).forEach((datum) => {\n        relatedEdges.add(idOf(datum));\n      });\n    };\n\n    [...enter, ...keep].forEach((nodeId) => {\n      update(nodeId, magnifiedStyleMap.get(nodeId)!);\n    });\n\n    exit.forEach((nodeId) => {\n      update(nodeId, this.prevOriginStyleMap.get(nodeId)!);\n      this.prevOriginStyleMap.delete(nodeId);\n    });\n\n    relatedEdges.forEach((edgeId) => {\n      const edge = element!.getElement(edgeId);\n      edge?.update({});\n    });\n\n    this.prevMagnifiedStyleMap = magnifiedStyleMap;\n    originStyleMap.forEach((style, nodeId) => {\n      if (!this.prevOriginStyleMap.has(nodeId)) {\n        this.prevOriginStyleMap.set(nodeId, style);\n      }\n    });\n  };\n\n  private isWheelValid = (event: WheelEvent) => {\n    if (this.options.preventDefault) event.preventDefault();\n\n    if (!this.isLensOn) return false;\n\n    const { clientX, clientY } = event;\n    const scaleOrigin = this.context.graph.getCanvasByClient([clientX, clientY]);\n    const origin = this.lens.getCenter();\n    if (distance(scaleOrigin, origin) > this.r) return false;\n\n    return true;\n  };\n\n  private scaleR = (positive: boolean) => {\n    const { maxR, minR } = this.options;\n    const ratio = positive ? 1 / (1 - R_DELTA) : 1 - R_DELTA;\n    const canvasR = Math.min(...this.context.canvas.getSize()) / 2;\n    this.r = Math.max(minR || 0, Math.min(maxR || canvasR, this.r * ratio));\n  };\n\n  private scaleD = (positive: boolean) => {\n    const { maxD, minD } = this.options as Required<FisheyeOptions>;\n    const newD = positive ? this.d + D_DELTA : this.d - D_DELTA;\n    this.d = Math.max(minD, Math.min(maxD, newD));\n  };\n\n  private scaleRByWheel = (event: WheelEvent) => {\n    if (!this.isWheelValid(event)) return;\n\n    const { deltaX, deltaY } = event;\n    this.scaleR(deltaX + deltaY > 0);\n\n    const origin = this.lens.getCenter();\n    this.onMagnify(origin);\n  };\n\n  private scaleDByWheel = (event: WheelEvent) => {\n    if (!this.isWheelValid(event)) return;\n\n    const { deltaX, deltaY } = event;\n    this.scaleD(deltaX + deltaY > 0);\n\n    const origin = this.lens.getCenter();\n    this.onMagnify(origin);\n  };\n\n  private isDragValid = (event: IDragEvent) => {\n    if (this.options.preventDefault) event.preventDefault();\n\n    if (!this.isLensOn) return false;\n\n    const dragOrigin = parsePoint(event.canvas as PointObject);\n    const origin = this.lens.getCenter();\n    if (distance(dragOrigin, origin) > this.r) return false;\n\n    return true;\n  };\n\n  private isLensDragging = false;\n\n  private onDragStart = (event: IDragEvent) => {\n    if (!this.isDragValid(event)) return;\n\n    this.isLensDragging = true;\n  };\n\n  private onDrag = (event: IDragEvent) => {\n    if (!this.isLensDragging) return;\n\n    const dragOrigin = parsePoint(event.canvas as PointObject);\n    this.onMagnify(dragOrigin);\n  };\n\n  private onDragEnd = () => {\n    this.isLensDragging = false;\n  };\n\n  private scaleRByDrag = (event: IDragEvent) => {\n    if (!this.isLensDragging) return;\n\n    const { dx, dy } = event;\n    this.scaleR(dx - dy > 0);\n\n    const origin = this.lens.getCenter();\n    this.onMagnify(origin);\n  };\n\n  private scaleDByDrag = (event: IDragEvent) => {\n    if (!this.isLensDragging) return;\n\n    const { dx, dy } = event;\n    this.scaleD(dx - dy > 0);\n\n    const origin = this.lens.getCenter();\n    this.onMagnify(origin);\n  };\n\n  get graphDom() {\n    return this.context.graph.getCanvas().getContextService().getDomElement();\n  }\n\n  private bindEvents() {\n    const { graph } = this.context;\n    const { trigger, scaleRBy, scaleDBy } = this.options;\n\n    const canvas = graph.getCanvas().getLayer();\n\n    if (['click', 'drag'].includes(trigger)) {\n      canvas.addEventListener(CommonEvent.CLICK, this.onCreateFisheye);\n    }\n\n    if (trigger === 'pointermove') {\n      canvas.addEventListener(CommonEvent.POINTER_MOVE, this.onCreateFisheye);\n    }\n\n    if (trigger === 'drag' || scaleRBy === 'drag' || scaleDBy === 'drag') {\n      canvas.addEventListener(CommonEvent.DRAG_START, this.onDragStart);\n      canvas.addEventListener(CommonEvent.DRAG_END, this.onDragEnd);\n\n      const dragFunc = trigger === 'drag' ? this.onDrag : scaleRBy === 'drag' ? this.scaleRByDrag : this.scaleDByDrag;\n      canvas.addEventListener(CommonEvent.DRAG, dragFunc);\n    }\n\n    if (scaleRBy === 'wheel' || scaleDBy === 'wheel') {\n      const wheelFunc = scaleRBy === 'wheel' ? this.scaleRByWheel : this.scaleDByWheel;\n      this.graphDom?.addEventListener(CommonEvent.WHEEL, wheelFunc, { passive: false });\n    }\n  }\n\n  private unbindEvents() {\n    const { graph } = this.context;\n    const { trigger, scaleRBy, scaleDBy } = this.options;\n\n    const canvas = graph.getCanvas().getLayer();\n\n    if (['click', 'drag'].includes(trigger)) {\n      canvas.removeEventListener(CommonEvent.CLICK, this.onCreateFisheye);\n    }\n\n    if (trigger === 'pointermove') {\n      canvas.removeEventListener(CommonEvent.POINTER_MOVE, this.onCreateFisheye);\n    }\n\n    if (trigger === 'drag' || scaleRBy === 'drag' || scaleDBy === 'drag') {\n      canvas.removeEventListener(CommonEvent.DRAG_START, this.onDragStart);\n      canvas.removeEventListener(CommonEvent.DRAG_END, this.onDragEnd);\n\n      const dragFunc = trigger === 'drag' ? this.onDrag : scaleRBy === 'drag' ? this.scaleRByDrag : this.scaleDByDrag;\n      canvas.removeEventListener(CommonEvent.DRAG, dragFunc);\n    }\n\n    if (scaleRBy === 'wheel' || scaleDBy === 'wheel') {\n      const wheelFunc = scaleRBy === 'wheel' ? this.scaleRByWheel : this.scaleDByWheel;\n      this.graphDom?.removeEventListener(CommonEvent.WHEEL, wheelFunc);\n    }\n  }\n\n  public update(options: Partial<FisheyeOptions>) {\n    this.unbindEvents();\n    super.update(options);\n    this.r = options.r ?? this.r;\n    this.d = options.d ?? this.d;\n    this.bindEvents();\n  }\n\n  public destroy() {\n    this.unbindEvents();\n    if (this.isLensOn) {\n      this.lens?.destroy();\n    }\n    this.prevMagnifiedStyleMap.clear();\n    this.prevOriginStyleMap.clear();\n    super.destroy();\n  }\n}\n", "import type { RuntimeContext } from '../../runtime/types';\nimport { print } from '../../utils/print';\nimport type { ShortcutKey } from '../../utils/shortcut';\nimport { Shortcut } from '../../utils/shortcut';\nimport type { BasePluginOptions } from '../base-plugin';\nimport { BasePlugin } from '../base-plugin';\n\n/**\n * <zh/> \n *\n * <en/> Full screen options\n */\nexport interface FullscreenOptions extends BasePluginOptions {\n  /**\n   * <zh/> \n   * - `request` : \n   * - `exit` : \n   *\n   * <en/> The way to trigger full screen\n   * - `request`: request full screen\n   * - `exit`: exit full screen\n   */\n  trigger?: {\n    request?: ShortcutKey;\n    exit?: ShortcutKey;\n  };\n  /**\n   * <zh/> \n   *\n   * <en/> Whether to adapt the canvas size\n   * @defaultValue true\n   */\n  autoFit?: boolean;\n  /**\n   * <zh/> \n   *\n   * <en/> Callback after entering full screen\n   */\n  onEnter?: () => void;\n  /**\n   * <zh/> \n   *\n   * <en/> Callback after exiting full screen\n   */\n  onExit?: () => void;\n}\n\n/**\n * <zh/> \n *\n * <en/> Full screen\n */\nexport class Fullscreen extends BasePlugin<FullscreenOptions> {\n  static defaultOptions: Partial<FullscreenOptions> = {\n    trigger: {},\n    autoFit: true,\n  };\n\n  private shortcut: Shortcut;\n\n  private style: HTMLStyleElement;\n\n  private $el = this.context.canvas.getContainer()!;\n\n  private graphSize: [number, number] = [0, 0];\n\n  constructor(context: RuntimeContext, options: FullscreenOptions) {\n    super(context, Object.assign({}, Fullscreen.defaultOptions, options));\n\n    this.shortcut = new Shortcut(context.graph);\n\n    this.bindEvents();\n\n    this.style = document.createElement('style');\n    document.head.appendChild(this.style);\n    this.style.innerHTML = `\n      :not(:root):fullscreen::backdrop {\n        background: transparent;\n      }\n    `;\n  }\n\n  private bindEvents() {\n    this.unbindEvents();\n    this.shortcut.unbindAll();\n\n    const { request = [], exit = [] } = this.options.trigger;\n    this.shortcut.bind(request, this.request);\n    this.shortcut.bind(exit, this.exit);\n\n    const events = ['webkitfullscreenchange', 'mozfullscreenchange', 'fullscreenchange', 'MSFullscreenChange'];\n    events.forEach((eventName) => {\n      document.addEventListener(eventName, this.onFullscreenChange, false);\n    });\n  }\n\n  private unbindEvents() {\n    this.shortcut.unbindAll();\n    const events = ['webkitfullscreenchange', 'mozfullscreenchange', 'fullscreenchange', 'MSFullscreenChange'];\n    events.forEach((eventName) => {\n      document.removeEventListener(eventName, this.onFullscreenChange, false);\n    });\n  }\n\n  private setGraphSize(fullScreen = true) {\n    let width, height;\n    if (fullScreen) {\n      width = globalThis.screen?.width || 0;\n      height = globalThis.screen?.height || 0;\n      this.graphSize = this.context.graph.getSize();\n    } else {\n      [width, height] = this.graphSize;\n    }\n    this.context.graph.setSize(width, height);\n    this.context.graph.render();\n  }\n\n  private onFullscreenChange = () => {\n    const isFull = !!document.fullscreenElement;\n    if (this.options.autoFit) this.setGraphSize(isFull);\n    if (isFull) {\n      this.options.onEnter?.();\n    } else {\n      this.options.onExit?.();\n    }\n  };\n\n  /**\n   * <zh/> \n   *\n   * <en/> Request full screen\n   */\n  public request() {\n    if (document.fullscreenElement || !isFullscreenEnabled()) return;\n    this.$el.requestFullscreen().catch((err: Error) => {\n      print.warn(`Error attempting to enable full-screen: ${err.message} (${err.name})`);\n    });\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Exit full screen\n   */\n  public exit() {\n    if (!document.fullscreenElement) return;\n    document.exitFullscreen();\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Update options\n   * @param options - <zh/>  | <en/> Options\n   * @internal\n   */\n  public update(options: Partial<FullscreenOptions>): void {\n    this.unbindEvents();\n    super.update(options);\n    this.bindEvents();\n  }\n\n  public destroy(): void {\n    this.exit();\n    this.style.remove();\n    super.destroy();\n  }\n}\n\n/**\n * <zh/> \n *\n * <en/> Determine whether full screen is enabled\n * @returns <zh/>  | <en/> Whether full screen is enabled\n */\nfunction isFullscreenEnabled() {\n  return (\n    document.fullscreenEnabled ||\n    // <zh/>  Reflect  ts  | <en/> use Reflect to avoid ts checking\n    Reflect.get(document, 'webkitFullscreenEnabled') ||\n    Reflect.get(document, 'mozFullscreenEnabled') ||\n    Reflect.get(document, 'msFullscreenEnabled')\n  );\n}\n", "import { isBoolean } from '@antv/util';\nimport { GraphEvent } from '../constants';\nimport type { RuntimeContext } from '../runtime/types';\nimport type { IViewportEvent, Point } from '../types';\nimport { ViewportEvent } from '../utils/event';\nimport { add, mod, multiply } from '../utils/vector';\nimport { BasePlugin, BasePluginOptions } from './base-plugin';\nimport { createPluginContainer } from './utils/dom';\n\n/**\n * <zh/> \n *\n * <en/> Grid line options\n */\nexport interface GridLineOptions extends BasePluginOptions {\n  /**\n   * <zh/> \n   *\n   * <en/> Grid line color\n   * @defaultValue '#0001'\n   */\n  stroke?: string;\n  /**\n   * <zh/> \n   *\n   * <en/> Grid line width\n   * @defaultValue 1\n   */\n  lineWidth?: number | string;\n  /**\n   * <zh/> \n   *\n   * <en/> The size of a single grid\n   * @defaultValue 20\n   */\n  size?: number;\n  /**\n   * <zh/> \n   *\n   * <en/> Whether to show the border\n   * @defaultValue true\n   */\n  border?: boolean;\n  /**\n   * <zh/> \n   *\n   * <en/> Border line width\n   * @defaultValue 1\n   */\n  borderLineWidth?: number;\n  /**\n   * <zh/> \n   *\n   * <en/> Border color\n   * @defaultValue '#0001'\n   * @remarks\n   * <zh/>  [CSS border-color](https://developer.mozilla.org/zh-CN/docs/Web/CSS/border-color)\n   *\n   * <en/> Refer to [CSS border-color](https://developer.mozilla.org/en-US/docs/Web/CSS/border-color) for the complete property definition\n   */\n  borderStroke?: string;\n  /**\n   * <zh/> \n   *\n   * <en/> Border style\n   * @defaultValue 'solid'\n   * @remarks\n   * <zh/>  [CSS border-style](https://developer.mozilla.org/zh-CN/docs/Web/CSS/border-style)\n   *\n   * <en/> Refer to [CSS border-style](https://developer.mozilla.org/en-US/docs/Web/CSS/border-style) for the complete property definition\n   */\n  borderStyle?: string;\n  /**\n   * <zh/> \n   *\n   * <en/> Whether to follow with the graph\n   * @defaultValue false\n   */\n  follow?:\n    | boolean\n    | {\n        /**\n         * <zh/> \n         *\n         * <en/> Whether to follow the graph translation\n         */\n        translate?: boolean;\n        /**\n         * <zh/> \n         *\n         * <en/> Whether to follow the graph zoom\n         */\n        zoom?: boolean;\n      };\n}\n\n/**\n * <zh/> \n *\n * <en/> Grid line\n * @remarks\n * <zh/> \n *\n * <en/> Grid line plugin, often used to auxiliary drawing\n */\nexport class GridLine extends BasePlugin<GridLineOptions> {\n  static defaultOptions: Partial<GridLineOptions> = {\n    border: true,\n    borderLineWidth: 1,\n    borderStroke: '#eee',\n    borderStyle: 'solid',\n    lineWidth: 1,\n    size: 20,\n    stroke: '#eee',\n  };\n\n  private $element: HTMLElement = createPluginContainer('grid-line', true);\n  private offset: Point = [0, 0];\n  private currentScale: number = 1;\n  private baseSize: number;\n\n  constructor(context: RuntimeContext, options: GridLineOptions) {\n    super(context, Object.assign({}, GridLine.defaultOptions, options));\n\n    const $container = this.context.canvas.getContainer()!;\n    $container.prepend(this.$element);\n\n    this.baseSize = this.options.size;\n\n    this.updateStyle();\n    this.bindEvents();\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Update the configuration of the grid line\n   * @param options - <zh/>  | <en/> options\n   * @internal\n   */\n  public update(options: Partial<GridLineOptions>) {\n    super.update(options);\n\n    if (options.size !== undefined) {\n      this.baseSize = options.size;\n    }\n\n    this.updateStyle();\n  }\n\n  private bindEvents() {\n    const { graph } = this.context;\n    graph.on(GraphEvent.AFTER_TRANSFORM, this.onTransform);\n  }\n\n  private updateStyle() {\n    const { stroke, lineWidth, border, borderLineWidth, borderStroke, borderStyle } = this.options;\n\n    const scaledSize = this.baseSize * this.currentScale;\n\n    Object.assign(this.$element.style, {\n      border: border ? `${borderLineWidth}px ${borderStyle} ${borderStroke}` : 'none',\n      backgroundImage: `linear-gradient(${stroke} ${lineWidth}px, transparent ${lineWidth}px), linear-gradient(90deg, ${stroke} ${lineWidth}px, transparent ${lineWidth}px)`,\n      backgroundSize: `${scaledSize}px ${scaledSize}px`,\n      backgroundRepeat: 'repeat',\n    });\n  }\n\n  private updateOffset(delta: Point) {\n    const scaledSize = this.baseSize * this.currentScale;\n    this.offset = mod(add(this.offset, delta), scaledSize);\n    this.$element.style.backgroundPosition = `${this.offset[0]}px ${this.offset[1]}px`;\n  }\n\n  private followZoom = (event: IViewportEvent) => {\n    const {\n      data: { scale, origin },\n    } = event;\n\n    if (!scale || (origin === undefined && this.context.viewport === undefined)) return;\n\n    const prevScale = this.currentScale;\n    this.currentScale = scale;\n\n    const deltaScale = scale / prevScale;\n    const positionOffset = multiply(origin || this.context.graph.getCanvasCenter(), 1 - deltaScale);\n    const scaledSize = this.baseSize * scale;\n\n    const scaledOffset = multiply(this.offset, deltaScale);\n    const modulatedOffset = mod(scaledOffset, scaledSize);\n    const newOffset = add(modulatedOffset, positionOffset);\n\n    this.$element.style.backgroundSize = `${scaledSize}px ${scaledSize}px`;\n    this.$element.style.backgroundPosition = `${newOffset[0]}px ${newOffset[1]}px`;\n\n    this.offset = mod(newOffset, scaledSize);\n  };\n\n  private followTranslate = (event: IViewportEvent) => {\n    if (!this.options.follow) return;\n    const {\n      data: { translate },\n    } = event;\n    if (translate) this.updateOffset(translate);\n  };\n\n  private parseFollow(follow: GridLineOptions['follow']): { translate: boolean; zoom: boolean } {\n    return isBoolean(follow)\n      ? { translate: follow, zoom: follow }\n      : { translate: follow?.translate ?? false, zoom: follow?.zoom ?? false };\n  }\n\n  private onTransform = (event: ViewportEvent) => {\n    const follow = this.parseFollow(this.options.follow);\n\n    if (follow.zoom) this.followZoom(event);\n    if (follow.translate) this.followTranslate(event);\n  };\n\n  /**\n   * <zh/> \n   *\n   * <en/> Destroy the grid line\n   * @internal\n   */\n  public destroy(): void {\n    this.context.graph.off(GraphEvent.AFTER_TRANSFORM, this.onTransform);\n    this.$element.remove();\n    super.destroy();\n  }\n}\n", "import { groupBy } from '@antv/util';\nimport { ChangeType } from '../constants';\nimport type { DataAdded, DataChange, DataChanges, DataRemoved, DataUpdated, ID } from '../types';\nimport { idOf } from './id';\n\n/**\n * <zh/> \n *\n * <en/> Reduce data changes\n * @param changes - <zh/>  | <en/> data changes\n * @returns <zh/>  | <en/> reduced data changes\n */\nexport function reduceDataChanges(changes: DataChange[]): DataChange[] {\n  const results = {\n    Added: new Map<ID, DataAdded>(),\n    Updated: new Map<ID, DataUpdated>(),\n    Removed: new Map<ID, DataRemoved>(),\n  };\n\n  changes.forEach((change) => {\n    const { type, value } = change;\n    const id = idOf(value);\n\n    if (type === 'NodeAdded' || type === 'EdgeAdded' || type === 'ComboAdded') {\n      results.Added.set(id, change);\n    } else if (type === 'NodeUpdated' || type === 'EdgeUpdated' || type === 'ComboUpdated') {\n      //  Added Added \n      // If there is an Added operation, set the current operation to Added\n      if (results.Added.has(id)) {\n        results.Added.set(id, { type: type.replace('Updated', 'Added'), value } as DataAdded);\n      }\n      //  Updated Updated  original\n      // If there is an Updated operation, set the current operation to Updated, but use an earlier version of original\n      else if (results.Updated.has(id)) {\n        const { original } = results.Updated.get(id)!;\n        results.Updated.set(id, { type, value, original } as DataUpdated);\n      } else if (results.Removed.has(id)) {\n        //  Removed\n        // If there is a Removed operation, do nothing\n      } else results.Updated.set(id, change);\n    } else if (type === 'NodeRemoved' || type === 'EdgeRemoved' || type === 'ComboRemoved') {\n      //  Added  Updated  Removed \n      // If there is an Added or Updated operation, delete the Removed operation\n      if (results.Added.has(id)) {\n        results.Added.delete(id);\n      } else if (results.Updated.has(id)) {\n        results.Updated.delete(id);\n        results.Removed.set(id, change);\n      } else {\n        results.Removed.set(id, change);\n      }\n    }\n  });\n\n  // \n  // The order is not important\n  return [\n    ...Array.from(results.Added.values()),\n    ...Array.from(results.Updated.values()),\n    ...Array.from(results.Removed.values()),\n  ];\n}\n\n/**\n * <zh/> \n *\n * <en/> Classify data changes\n * @param changes - <zh/>  | <en/> data changes\n * @returns <zh/>  | <en/> classified data changes\n */\nexport function groupByChangeType(changes: DataChange[]): DataChanges {\n  const {\n    NodeAdded = [],\n    NodeUpdated = [],\n    NodeRemoved = [],\n    EdgeAdded = [],\n    EdgeUpdated = [],\n    EdgeRemoved = [],\n    ComboAdded = [],\n    ComboUpdated = [],\n    ComboRemoved = [],\n  } = groupBy(changes, (change) => change.type) as unknown as Record<`${ChangeType}`, DataChange[]>;\n\n  return {\n    add: {\n      nodes: NodeAdded,\n      edges: EdgeAdded,\n      combos: ComboAdded,\n    },\n    update: {\n      nodes: NodeUpdated,\n      edges: EdgeUpdated,\n      combos: ComboUpdated,\n    },\n    remove: {\n      nodes: NodeRemoved,\n      edges: EdgeRemoved,\n      combos: ComboRemoved,\n    },\n  } as DataChanges;\n}\n", "import { isObject } from '@antv/util';\nimport type { RuntimeContext } from '../../runtime/types';\nimport type { DataChange, DataChanges, ElementDatum } from '../../types';\nimport type { Command } from '../../types/history';\nimport { inferDefaultValue } from '../../utils/animation';\nimport { groupByChangeType, reduceDataChanges } from '../../utils/change';\nimport { idOf } from '../../utils/id';\n\n/**\n * <zh/> \n *\n * <en/> Align the fields of two objects. If the target object lacks fields, default values will be added.\n * @param refObject - <zh/>   <en/> Reference object\n * @param targetObject - <zh/>   <en/> Target object\n */\nexport function alignFields(refObject: Record<string, any>, targetObject: Record<string, any>) {\n  for (const key in refObject) {\n    if (isObject(refObject[key]) && !Array.isArray(refObject[key]) && refObject[key] !== null) {\n      if (!targetObject[key]) targetObject[key] = {};\n      alignFields(refObject[key], targetObject[key]);\n    } else if (targetObject[key] === undefined) {\n      targetObject[key] = inferDefaultValue(key);\n    }\n  }\n}\n\n/**\n * <zh/> \n *\n * <en/> Parse data changes into history commands\n * @param changes - <zh/>   <en/> Data changes\n * @param animation - <zh/>   <en/> Whether to enable animation\n * @param context - <zh/>   <en/> Runtime context\n * @returns <zh/>   <en/> History command\n */\nexport function parseCommand(changes: DataChange[], animation = false, context?: RuntimeContext): Command {\n  const cmd = {\n    animation,\n    current: { add: {}, update: {}, remove: {} },\n    original: { add: {}, update: {}, remove: {} },\n  } as Command;\n\n  const { add, update, remove } = groupByChangeType(reduceDataChanges(changes));\n\n  (['nodes', 'edges', 'combos'] as const).forEach((category) => {\n    if (update[category]) {\n      update[category].forEach((item: DataChanges['update'][typeof category][number]) => {\n        const newValue = { ...item.value };\n        let newOriginal = { ...item.original };\n        if (context) {\n          //  color\n          const itemType = context.graph.getElementType(idOf(item.original));\n          const colorKey = itemType === 'edge' ? 'stroke' : 'fill';\n          const style = context.element!.getElementComputedStyle(itemType, item.original);\n          newOriginal = {\n            ...item.original,\n            style: { [colorKey]: style[colorKey], ...item.original.style },\n          } as ElementDatum;\n        }\n        alignFields(newValue, newOriginal);\n        cmd.current.update[category] ||= [];\n        (cmd.current.update[category] as ElementDatum[]).push(newValue);\n        cmd.original.update[category] ||= [];\n        (cmd.original.update[category] as ElementDatum[]).push(newOriginal);\n      });\n    }\n\n    if (add[category]) {\n      add[category].forEach((item: DataChanges['add'][typeof category][number]) => {\n        const newValue = { ...item.value };\n        cmd.current.add[category] ||= [];\n        (cmd.current.add[category] as ElementDatum[]).push(newValue);\n        cmd.original.remove[category] ||= [];\n        (cmd.original.remove[category] as ElementDatum[]).push(newValue);\n      });\n    }\n\n    if (remove[category]) {\n      remove[category].forEach((item: DataChanges['remove'][typeof category][number]) => {\n        const newValue = { ...item.value };\n        cmd.current.remove[category] ||= [];\n        (cmd.current.remove[category] as ElementDatum[]).push(newValue);\n        cmd.original.add[category] ||= [];\n        (cmd.original.add[category] as ElementDatum[]).push(newValue);\n      });\n    }\n  });\n\n  return cmd;\n}\n", "import EventEmitter from '@antv/event-emitter';\nimport { GraphEvent } from '../../constants';\nimport { HistoryEvent } from '../../constants/events/history';\nimport type { RuntimeContext } from '../../runtime/types';\nimport { DataChange, Loosen } from '../../types';\nimport type { Command } from '../../types/history';\nimport type { GraphLifeCycleEvent } from '../../utils/event';\nimport { idsOf } from '../../utils/id';\nimport type { BasePluginOptions } from '../base-plugin';\nimport { BasePlugin } from '../base-plugin';\nimport { parseCommand } from './util';\n\n/**\n * <zh/> \n *\n * <en/> History options\n */\nexport interface HistoryOptions extends BasePluginOptions {\n  /**\n   * <zh/>  \n   *\n   * <en/> The maximum number of history records\n   * @defaultValue 0()\n   */\n  stackSize?: number;\n  /**\n   * <zh/>  Undo/Redo  falserevert  true  false \n   *\n   * <en/> Called before a command is added to the Undo/Redo queue. If this method returns false, the command will not be added to the queue. revert is true for undo operations and false for redo operations\n   */\n  beforeAddCommand?: (cmd: Command, revert: boolean) => boolean | void;\n  /**\n   * <zh/>  Undo/Redo revert  true  false \n   *\n   * <en/> Called after a command is added to the Undo/Redo queue. revert is true for undo operations and false for redo operations\n   */\n  afterAddCommand?: (cmd: Command, revert: boolean) => void;\n  /**\n   * <zh/> \n   *\n   * <en/> Callback function when executing a command\n   */\n  executeCommand?: (cmd: Command) => void;\n}\n\n/**\n * <zh/> \n *\n * <en/> History\n * @remarks\n * <zh/> \n *\n * <en/> History is used to record data changes in the graph and supports operations such as undo and redo.\n */\nexport class History extends BasePlugin<HistoryOptions> {\n  static defaultOptions: Partial<HistoryOptions> = {\n    stackSize: 0,\n  };\n  private emitter: EventEmitter;\n  private batchChanges: DataChange[][] | null = null;\n  private batchAnimation = false;\n  public undoStack: Command[] = [];\n  public redoStack: Command[] = [];\n  private freezed = false;\n\n  constructor(context: RuntimeContext, options: HistoryOptions) {\n    super(context, Object.assign({}, History.defaultOptions, options));\n\n    this.emitter = new EventEmitter();\n\n    const { graph } = this.context;\n    graph.on(GraphEvent.AFTER_DRAW, this.addCommand);\n    graph.on(GraphEvent.BATCH_START, this.initBatchCommand);\n    graph.on(GraphEvent.BATCH_END, this.addCommand);\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Whether undo can be done\n   * @returns <zh/>  | <en/> Whether undo can be done\n   */\n  public canUndo() {\n    return this.undoStack.length > 0;\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Whether redo can be done\n   * @returns <zh/>  | <en/> Whether redo can be done\n   */\n  public canRedo() {\n    return this.redoStack.length > 0;\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Execute undo\n   * @returns <zh/>  | <en/> Return the current instance\n   */\n  public undo() {\n    const cmd = this.undoStack.pop();\n    if (cmd) {\n      this.executeCommand(cmd);\n\n      const before = this.options.beforeAddCommand?.(cmd, false);\n      if (before === false) return;\n\n      this.redoStack.push(cmd);\n      this.options.afterAddCommand?.(cmd, false);\n      this.notify(HistoryEvent.UNDO, cmd);\n    }\n    return this;\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Execute redo\n   * @returns <zh/>  | <en/> Return the current instance\n   */\n  public redo() {\n    const cmd = this.redoStack.pop();\n    if (cmd) {\n      this.executeCommand(cmd, false);\n      this.undoStackPush(cmd);\n      this.notify(HistoryEvent.REDO, cmd);\n    }\n    return this;\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Execute undo and do not record in history\n   * @returns <zh/>  | <en/> Return the current instance\n   */\n  public undoAndCancel() {\n    const cmd = this.undoStack.pop();\n    if (cmd) {\n      this.executeCommand(cmd, false);\n      this.redoStack = [];\n      this.notify(HistoryEvent.CANCEL, cmd);\n    }\n    return this;\n  }\n\n  private executeCommand = (cmd: Command, revert = true) => {\n    this.freezed = true;\n\n    this.options.executeCommand?.(cmd);\n\n    const values = revert ? cmd.original : cmd.current;\n    this.context.graph.addData(values.add);\n    this.context.graph.updateData(values.update);\n    this.context.graph.removeData(idsOf(values.remove, false));\n    this.context.element?.draw({ silence: true, animation: cmd.animation });\n\n    this.freezed = false;\n  };\n\n  private addCommand = (event: GraphLifeCycleEvent) => {\n    if (this.freezed) return;\n\n    if (event.type === GraphEvent.AFTER_DRAW) {\n      const { dataChanges = [], animation = true } = (event as GraphLifeCycleEvent).data;\n\n      if (this.context.batch?.isBatching) {\n        if (!this.batchChanges) return;\n        this.batchChanges.push(dataChanges);\n        this.batchAnimation &&= animation;\n        return;\n      }\n      this.batchChanges = [dataChanges];\n      this.batchAnimation = animation;\n    }\n\n    this.undoStackPush(parseCommand(this.batchChanges!.flat(), this.batchAnimation, this.context));\n    this.notify(HistoryEvent.ADD, this.undoStack[this.undoStack.length - 1]);\n  };\n\n  private initBatchCommand = (event: GraphLifeCycleEvent) => {\n    const { initiate } = event.data;\n    this.batchAnimation = false;\n    if (initiate) {\n      this.batchChanges = [];\n    } else {\n      const cmd = this.undoStack.pop();\n      if (!cmd) this.batchChanges = null;\n    }\n  };\n\n  private undoStackPush(cmd: Command): void {\n    const { stackSize } = this.options;\n\n    if (stackSize !== 0 && this.undoStack.length >= stackSize) {\n      this.undoStack.shift();\n    }\n\n    const before = this.options.beforeAddCommand?.(cmd, true);\n    if (before === false) return;\n\n    this.undoStack.push(cmd);\n    this.options.afterAddCommand?.(cmd, true);\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Clear history\n   */\n  public clear(): void {\n    this.undoStack = [];\n    this.redoStack = [];\n    this.batchChanges = null;\n    this.batchAnimation = false;\n    this.notify(HistoryEvent.CLEAR, null);\n  }\n\n  private notify(event: Loosen<HistoryEvent>, cmd: Command | null) {\n    this.emitter.emit(event, { cmd });\n    this.emitter.emit(HistoryEvent.CHANGE, { cmd });\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Listen to history events\n   * @param event  - <zh/>  | <en/> Event name\n   * @param handler - <zh/>  | <en/> Event handler\n   */\n  public on(event: Loosen<HistoryEvent>, handler: (e: { cmd?: Command | null }) => void): void {\n    this.emitter.on(event, handler);\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Destroy\n   * @internal\n   */\n  public destroy(): void {\n    const { graph } = this.context;\n    graph.off(GraphEvent.AFTER_DRAW, this.addCommand);\n    graph.off(GraphEvent.BATCH_START, this.initBatchCommand);\n    graph.off(GraphEvent.BATCH_END, this.addCommand);\n\n    this.emitter.off();\n\n    super.destroy();\n    this.undoStack = [];\n    this.redoStack = [];\n  }\n}\n", "import type { Point } from '../../../types';\n\nexport type PointObject = Record<string, number>;\nexport type BBox = [number, number, number, number];\nexport type FormatTuple = [string, string];\n\nexport const formatUtil = {\n  toXy<T extends PointObject>(pointset: T[] | Point[], format?: FormatTuple): T[] | Point[] {\n    if (!format) return [...pointset] as Point[];\n\n    const xProperty = format[0].slice(1);\n    const yProperty = format[1].slice(1);\n\n    return (pointset as T[]).map((pt) => [pt[xProperty], pt[yProperty]]) as Point[];\n  },\n\n  fromXy(coordinates: Point[], format?: FormatTuple): Point[] | PointObject[] {\n    if (!format) return [...coordinates];\n\n    const xProperty = format[0].slice(1);\n    const yProperty = format[1].slice(1);\n\n    return coordinates.map(([x, y]) => ({\n      [xProperty]: x,\n      [yProperty]: y,\n    }));\n  },\n};\nexport type PointConverter = typeof formatUtil;\n", "import type { Point } from '../../../types';\nimport type { BBox } from './format';\n\nexport class Grid {\n  private _cells: Point[][][] = [];\n  private _cellSize: number;\n  private _reverseCellSize: number;\n  constructor(points: Point[], cellSize: number) {\n    this._cellSize = cellSize;\n    this._reverseCellSize = 1 / cellSize;\n    for (const point of points) {\n      const x = this.coordToCellNum(point[0]);\n      const y = this.coordToCellNum(point[1]);\n\n      if (!this._cells[x]) {\n        this._cells[x] = [];\n      }\n\n      if (!this._cells[x][y]) {\n        this._cells[x][y] = [];\n      }\n\n      this._cells[x][y].push(point);\n    }\n  }\n  cellPoints(x: number, y: number): Point[] {\n    return this._cells[x]?.[y] || [];\n  }\n  rangePoints(bbox: BBox): Point[] {\n    const tlCellX = this.coordToCellNum(bbox[0]);\n    const tlCellY = this.coordToCellNum(bbox[1]);\n    const brCellX = this.coordToCellNum(bbox[2]);\n    const brCellY = this.coordToCellNum(bbox[3]);\n    const points: Point[] = [];\n    for (let x = tlCellX; x <= brCellX; x++) {\n      for (let y = tlCellY; y <= brCellY; y++) {\n        const cell = this.cellPoints(x, y);\n        for (const point of cell) {\n          points.push(point);\n        }\n      }\n    }\n    return points;\n  }\n  removePoint(point: Point): Point[] {\n    const cellX = this.coordToCellNum(point[0]);\n    const cellY = this.coordToCellNum(point[1]);\n    const cell = this._cells[cellX][cellY];\n    const index = cell.findIndex(([px, py]) => px === point[0] && py === point[1]);\n    if (index > -1) {\n      cell.splice(index, 1);\n    }\n    return cell;\n  }\n  private trunc(val: number): number {\n    return Math.trunc(val);\n  }\n  coordToCellNum(x: number): number {\n    return this.trunc(x * this._reverseCellSize);\n  }\n  extendBbox(bbox: BBox, scaleFactor: number): BBox {\n    return [\n      bbox[0] - scaleFactor * this._cellSize,\n      bbox[1] - scaleFactor * this._cellSize,\n      bbox[2] + scaleFactor * this._cellSize,\n      bbox[3] + scaleFactor * this._cellSize,\n    ];\n  }\n}\n\nexport function grid(points: Point[], cellSize: number): Grid {\n  return new Grid(points, cellSize);\n}\n", "'use strict';\n\nconst SPLITTER: number = +(Math.pow(2, 27) + 1.0);\n\nexport function twoProduct(a: number, b: number, result?: [number, number]): [number, number] {\n  const x: number = a * b;\n\n  const c: number = SPLITTER * a;\n  const a_big: number = c - a;\n  const ahi: number = c - a_big;\n  const alo: number = a - ahi;\n\n  const d: number = SPLITTER * b;\n  const b_big: number = d - b;\n  const bhi: number = d - b_big;\n  const blo: number = b - bhi;\n\n  const err1: number = x - ahi * bhi;\n  const err2: number = err1 - alo * bhi;\n  const err3: number = err2 - ahi * blo;\n\n  const y: number = alo * blo - err3;\n\n  if (result) {\n    result[0] = y;\n    result[1] = x;\n    return result;\n  }\n\n  return [y, x];\n}\n", "'use strict';\n\nexport function fastTwoSum(a: number, b: number, result?: [number, number]): [number, number] {\n  const x = a + b;\n  const bv = x - a;\n  const av = x - bv;\n  const br = b - bv;\n  const ar = a - av;\n\n  if (result) {\n    result[0] = ar + br;\n    result[1] = x;\n    return result;\n  }\n\n  return [ar + br, x];\n}\n", "'use strict';\n\nimport { twoProduct } from './two-product';\nimport { fastTwoSum as twoSum } from './two-sum';\n\nexport function scaleLinearExpansion(e: number[], scale: number): number[] {\n  const n = e.length;\n\n  if (n === 1) {\n    const ts = twoProduct(e[0], scale);\n    if (ts[0]) {\n      return ts;\n    }\n    return [ts[1]];\n  }\n\n  const g = new Array(2 * n);\n  const q: [number, number] = [0.1, 0.1];\n  const t: [number, number] = [0.1, 0.1];\n  let count = 0;\n\n  twoProduct(e[0], scale, q);\n  if (q[0]) {\n    g[count++] = q[0];\n  }\n\n  for (let i = 1; i < n; ++i) {\n    twoProduct(e[i], scale, t);\n    const pq = q[1];\n    twoSum(pq, t[0], q);\n    if (q[0]) {\n      g[count++] = q[0];\n    }\n    const a = t[1];\n    const b = q[1];\n    const x = a + b;\n    const bv = x - a;\n    const y = b - bv;\n    q[1] = x;\n    if (y) {\n      g[count++] = y;\n    }\n  }\n\n  if (q[1]) {\n    g[count++] = q[1];\n  }\n  if (count === 0) {\n    g[count++] = 0.0;\n  }\n  g.length = count;\n  return g;\n}\n", "'use strict';\n\nfunction scalarScalar(a: number, b: number): number[] {\n  const x = a + b;\n  const bv = x - a;\n  const av = x - bv;\n  const br = b - bv;\n  const ar = a - av;\n  const y = ar + br;\n\n  if (y) {\n    return [y, x];\n  }\n  return [x];\n}\n\nexport function robustSubtract(e: number[], f: number[]): number[] {\n  const ne = e.length | 0;\n  const nf = f.length | 0;\n\n  // Base case: scalar subtraction\n  if (ne === 1 && nf === 1) {\n    return scalarScalar(e[0], -f[0]);\n  }\n\n  const n = ne + nf;\n  const g = new Array(n);\n  let count = 0;\n\n  let ep_tr = 0;\n  let fp_tr = 0;\n\n  const abs = Math.abs;\n  let ei = e[ep_tr];\n  let ea = abs(ei);\n  let fi = -f[fp_tr];\n  let fa = abs(fi);\n\n  let a: number, b: number;\n\n  // Initial comparison to determine `a` and `b`\n  if (ea < fa) {\n    b = ei;\n    ep_tr += 1;\n    if (ep_tr < ne) {\n      ei = e[ep_tr];\n      ea = abs(ei);\n    }\n  } else {\n    b = fi;\n    fp_tr += 1;\n    if (fp_tr < nf) {\n      fi = -f[fp_tr];\n      fa = abs(fi);\n    }\n  }\n\n  if ((ep_tr < ne && ea < fa) || fp_tr >= nf) {\n    a = ei;\n    ep_tr += 1;\n    if (ep_tr < ne) {\n      ei = e[ep_tr];\n      ea = abs(ei);\n    }\n  } else {\n    a = fi;\n    fp_tr += 1;\n    if (fp_tr < nf) {\n      fi = -f[fp_tr];\n      fa = abs(fi);\n    }\n  }\n\n  let x = a + b;\n  let bv = x - a;\n  let y = b - bv;\n\n  let q0 = y;\n  let q1 = x;\n\n  let _x: number, _bv: number, _av: number, _br: number, _ar: number;\n\n  // Main loop for combining expansions\n  while (ep_tr < ne && fp_tr < nf) {\n    if (ea < fa) {\n      a = ei;\n      ep_tr += 1;\n      if (ep_tr < ne) {\n        ei = e[ep_tr];\n        ea = abs(ei);\n      }\n    } else {\n      a = fi;\n      fp_tr += 1;\n      if (fp_tr < nf) {\n        fi = -f[fp_tr];\n        fa = abs(fi);\n      }\n    }\n\n    b = q0;\n    x = a + b;\n    bv = x - a;\n    y = b - bv;\n\n    if (y) {\n      g[count++] = y;\n    }\n\n    _x = q1 + x;\n    _bv = _x - q1;\n    _av = _x - _bv;\n    _br = x - _bv;\n    _ar = q1 - _av;\n\n    q0 = _ar + _br;\n    q1 = _x;\n  }\n\n  // Handle remaining elements in `e`\n  while (ep_tr < ne) {\n    a = ei;\n    b = q0;\n    x = a + b;\n    bv = x - a;\n    y = b - bv;\n\n    if (y) {\n      g[count++] = y;\n    }\n\n    _x = q1 + x;\n    _bv = _x - q1;\n    _av = _x - _bv;\n    _br = x - _bv;\n    _ar = q1 - _av;\n\n    q0 = _ar + _br;\n    q1 = _x;\n\n    ep_tr += 1;\n    if (ep_tr < ne) {\n      ei = e[ep_tr];\n    }\n  }\n\n  // Handle remaining elements in `f`\n  while (fp_tr < nf) {\n    a = fi;\n    b = q0;\n    x = a + b;\n    bv = x - a;\n    y = b - bv;\n\n    if (y) {\n      g[count++] = y;\n    }\n\n    _x = q1 + x;\n    _bv = _x - q1;\n    _av = _x - _bv;\n    _br = x - _bv;\n    _ar = q1 - _av;\n\n    q0 = _ar + _br;\n    q1 = _x;\n\n    fp_tr += 1;\n    if (fp_tr < nf) {\n      fi = -f[fp_tr];\n    }\n  }\n\n  // Finalize the result\n  if (q0) {\n    g[count++] = q0;\n  }\n  if (q1) {\n    g[count++] = q1;\n  }\n  if (!count) {\n    g[count++] = 0.0;\n  }\n\n  g.length = count;\n  return g;\n}\n", "'use strict';\n\nfunction scalarScalar(a: number, b: number): number[] {\n  const x = a + b;\n  const bv = x - a;\n  const av = x - bv;\n  const br = b - bv;\n  const ar = a - av;\n  const y = ar + br;\n\n  if (y) {\n    return [y, x];\n  }\n  return [x];\n}\n\nexport function linearExpansionSum(e: number[], f: number[]): number[] {\n  const ne = e.length | 0;\n  const nf = f.length | 0;\n\n  if (ne === 1 && nf === 1) {\n    return scalarScalar(e[0], f[0]);\n  }\n\n  const n = ne + nf;\n  const g = new Array(n);\n  let count = 0;\n\n  let ep_tr = 0;\n  let fp_tr = 0;\n\n  const abs = Math.abs;\n  let ei = e[ep_tr];\n  let ea = abs(ei);\n  let fi = f[fp_tr];\n  let fa = abs(fi);\n  let a, b;\n\n  if (ea < fa) {\n    b = ei;\n    ep_tr += 1;\n    if (ep_tr < ne) {\n      ei = e[ep_tr];\n      ea = abs(ei);\n    }\n  } else {\n    b = fi;\n    fp_tr += 1;\n    if (fp_tr < nf) {\n      fi = f[fp_tr];\n      fa = abs(fi);\n    }\n  }\n\n  if ((ep_tr < ne && ea < fa) || fp_tr >= nf) {\n    a = ei;\n    ep_tr += 1;\n    if (ep_tr < ne) {\n      ei = e[ep_tr];\n      ea = abs(ei);\n    }\n  } else {\n    a = fi;\n    fp_tr += 1;\n    if (fp_tr < nf) {\n      fi = f[fp_tr];\n      fa = abs(fi);\n    }\n  }\n\n  let x = a + b;\n  let bv = x - a;\n  let y = b - bv;\n  let q0 = y;\n  let q1 = x;\n\n  let _x, _bv, _av, _br, _ar;\n\n  while (ep_tr < ne && fp_tr < nf) {\n    if (ea < fa) {\n      a = ei;\n      ep_tr += 1;\n      if (ep_tr < ne) {\n        ei = e[ep_tr];\n        ea = abs(ei);\n      }\n    } else {\n      a = fi;\n      fp_tr += 1;\n      if (fp_tr < nf) {\n        fi = f[fp_tr];\n        fa = abs(fi);\n      }\n    }\n\n    b = q0;\n    x = a + b;\n    bv = x - a;\n    y = b - bv;\n\n    if (y) {\n      g[count++] = y;\n    }\n\n    _x = q1 + x;\n    _bv = _x - q1;\n    _av = _x - _bv;\n    _br = x - _bv;\n    _ar = q1 - _av;\n    q0 = _ar + _br;\n    q1 = _x;\n  }\n\n  while (ep_tr < ne) {\n    a = ei;\n    b = q0;\n    x = a + b;\n    bv = x - a;\n    y = b - bv;\n\n    if (y) {\n      g[count++] = y;\n    }\n\n    _x = q1 + x;\n    _bv = _x - q1;\n    _av = _x - _bv;\n    _br = x - _bv;\n    _ar = q1 - _av;\n    q0 = _ar + _br;\n    q1 = _x;\n\n    ep_tr += 1;\n    if (ep_tr < ne) {\n      ei = e[ep_tr];\n    }\n  }\n\n  while (fp_tr < nf) {\n    a = fi;\n    b = q0;\n    x = a + b;\n    bv = x - a;\n    y = b - bv;\n\n    if (y) {\n      g[count++] = y;\n    }\n\n    _x = q1 + x;\n    _bv = _x - q1;\n    _av = _x - _bv;\n    _br = x - _bv;\n    _ar = q1 - _av;\n    q0 = _ar + _br;\n    q1 = _x;\n\n    fp_tr += 1;\n    if (fp_tr < nf) {\n      fi = f[fp_tr];\n    }\n  }\n\n  if (q0) {\n    g[count++] = q0;\n  }\n  if (q1) {\n    g[count++] = q1;\n  }\n  if (!count) {\n    g[count++] = 0.0;\n  }\n  g.length = count;\n  return g;\n}\n", "'use strict';\n\nimport { scaleLinearExpansion as robustScale } from './robust-scale';\nimport { robustSubtract } from './robust-subtract';\nimport { linearExpansionSum as robustSum } from './robust-sum';\nimport { twoProduct } from './two-product';\n\ntype PointND = number[];\n\nconst NUM_EXPAND = 5;\nconst EPSILON = 1.1102230246251565e-16;\nconst ERR_BOUND_3 = (3.0 + 16.0 * EPSILON) * EPSILON;\nconst ERR_BOUND_4 = (7.0 + 56.0 * EPSILON) * EPSILON;\n\nfunction orientation_3(\n  sum: typeof robustSum,\n  prod: typeof twoProduct,\n  scale: typeof robustScale,\n  sub: typeof robustSubtract,\n): (m0: PointND, m1: PointND, m2: PointND) => number {\n  return function orientation3Exact(m0, m1, m2) {\n    const p = sum(sum(prod(m1[1], m2[0]), prod(-m2[1], m1[0])), sum(prod(m0[1], m1[0]), prod(-m1[1], m0[0])));\n    const n = sum(prod(m0[1], m2[0]), prod(-m2[1], m0[0]));\n    const d = sub(p, n);\n    return d[d.length - 1];\n  };\n}\n\nfunction orientation_4(\n  sum: typeof robustSum,\n  prod: typeof twoProduct,\n  scale: typeof robustScale,\n  sub: typeof robustSubtract,\n): (m0: PointND, m1: PointND, m2: PointND, m3: PointND) => number {\n  return function orientation4Exact(m0, m1, m2, m3) {\n    const p = sum(\n      sum(\n        scale(sum(prod(m2[1], m3[0]), prod(-m3[1], m2[0])), m1[2]),\n        sum(\n          scale(sum(prod(m1[1], m3[0]), prod(-m3[1], m1[0])), -m2[2]),\n          scale(sum(prod(m1[1], m2[0]), prod(-m2[1], m1[0])), m3[2]),\n        ),\n      ),\n      sum(\n        scale(sum(prod(m1[1], m3[0]), prod(-m3[1], m1[0])), m0[2]),\n        sum(\n          scale(sum(prod(m0[1], m3[0]), prod(-m3[1], m0[0])), -m1[2]),\n          scale(sum(prod(m0[1], m1[0]), prod(-m1[1], m0[0])), m3[2]),\n        ),\n      ),\n    );\n    const n = sum(\n      sum(\n        scale(sum(prod(m2[1], m3[0]), prod(-m3[1], m2[0])), m0[2]),\n        sum(\n          scale(sum(prod(m0[1], m3[0]), prod(-m3[1], m0[0])), -m2[2]),\n          scale(sum(prod(m0[1], m2[0]), prod(-m2[1], m0[0])), m3[2]),\n        ),\n      ),\n      sum(\n        scale(sum(prod(m1[1], m2[0]), prod(-m2[1], m1[0])), m0[2]),\n        sum(\n          scale(sum(prod(m0[1], m2[0]), prod(-m2[1], m0[0])), -m1[2]),\n          scale(sum(prod(m0[1], m1[0]), prod(-m1[1], m0[0])), m2[2]),\n        ),\n      ),\n    );\n    const d = sub(p, n);\n    return d[d.length - 1];\n  };\n}\n\nfunction orientation_5(\n  sum: typeof robustSum,\n  prod: typeof twoProduct,\n  scale: typeof robustScale,\n  sub: typeof robustSubtract,\n): (...args: PointND[]) => number {\n  return function orientation5Exact(m0, m1, m2, m3, m4) {\n    const p = sum(\n      sum(\n        sum(\n          scale(\n            sum(\n              scale(sum(prod(m3[1], m4[0]), prod(-m4[1], m3[0])), m2[2]),\n              sum(\n                scale(sum(prod(m2[1], m4[0]), prod(-m4[1], m2[0])), -m3[2]),\n                scale(sum(prod(m2[1], m3[0]), prod(-m3[1], m2[0])), m4[2]),\n              ),\n            ),\n            m1[3],\n          ),\n          sum(\n            scale(\n              sum(\n                scale(sum(prod(m3[1], m4[0]), prod(-m4[1], m3[0])), m1[2]),\n                sum(\n                  scale(sum(prod(m1[1], m4[0]), prod(-m4[1], m1[0])), -m3[2]),\n                  scale(sum(prod(m1[1], m3[0]), prod(-m3[1], m1[0])), m4[2]),\n                ),\n              ),\n              -m2[3],\n            ),\n            scale(\n              sum(\n                scale(sum(prod(m2[1], m4[0]), prod(-m4[1], m2[0])), m1[2]),\n                sum(\n                  scale(sum(prod(m1[1], m4[0]), prod(-m4[1], m1[0])), -m2[2]),\n                  scale(sum(prod(m1[1], m2[0]), prod(-m2[1], m1[0])), m4[2]),\n                ),\n              ),\n              m3[3],\n            ),\n          ),\n        ),\n        sum(\n          scale(\n            sum(\n              scale(sum(prod(m2[1], m3[0]), prod(-m3[1], m2[0])), m1[2]),\n              sum(\n                scale(sum(prod(m1[1], m3[0]), prod(-m3[1], m1[0])), -m2[2]),\n                scale(sum(prod(m1[1], m2[0]), prod(-m2[1], m1[0])), m3[2]),\n              ),\n            ),\n            -m4[3],\n          ),\n          sum(\n            scale(\n              sum(\n                scale(sum(prod(m3[1], m4[0]), prod(-m4[1], m3[0])), m1[2]),\n                sum(\n                  scale(sum(prod(m1[1], m4[0]), prod(-m4[1], m1[0])), -m3[2]),\n                  scale(sum(prod(m1[1], m3[0]), prod(-m3[1], m1[0])), m4[2]),\n                ),\n              ),\n              m0[3],\n            ),\n            scale(\n              sum(\n                scale(sum(prod(m3[1], m4[0]), prod(-m4[1], m3[0])), m0[2]),\n                sum(\n                  scale(sum(prod(m0[1], m4[0]), prod(-m4[1], m0[0])), -m3[2]),\n                  scale(sum(prod(m0[1], m3[0]), prod(-m3[1], m0[0])), m4[2]),\n                ),\n              ),\n              -m1[3],\n            ),\n          ),\n        ),\n      ),\n      sum(\n        sum(\n          scale(\n            sum(\n              scale(sum(prod(m1[1], m4[0]), prod(-m4[1], m1[0])), m0[2]),\n              sum(\n                scale(sum(prod(m0[1], m4[0]), prod(-m4[1], m0[0])), -m1[2]),\n                scale(sum(prod(m0[1], m1[0]), prod(-m1[1], m0[0])), m4[2]),\n              ),\n            ),\n            m3[3],\n          ),\n          sum(\n            scale(\n              sum(\n                scale(sum(prod(m1[1], m3[0]), prod(-m3[1], m1[0])), m0[2]),\n                sum(\n                  scale(sum(prod(m0[1], m3[0]), prod(-m3[1], m0[0])), -m1[2]),\n                  scale(sum(prod(m0[1], m1[0]), prod(-m1[1], m0[0])), m3[2]),\n                ),\n              ),\n              -m4[3],\n            ),\n            scale(\n              sum(\n                scale(sum(prod(m2[1], m3[0]), prod(-m3[1], m2[0])), m1[2]),\n                sum(\n                  scale(sum(prod(m1[1], m3[0]), prod(-m3[1], m1[0])), -m2[2]),\n                  scale(sum(prod(m1[1], m2[0]), prod(-m2[1], m1[0])), m3[2]),\n                ),\n              ),\n              m0[3],\n            ),\n          ),\n        ),\n        sum(\n          scale(\n            sum(\n              scale(sum(prod(m2[1], m3[0]), prod(-m3[1], m2[0])), m0[2]),\n              sum(\n                scale(sum(prod(m0[1], m3[0]), prod(-m3[1], m0[0])), -m2[2]),\n                scale(sum(prod(m0[1], m2[0]), prod(-m2[1], m0[0])), m3[2]),\n              ),\n            ),\n            -m1[3],\n          ),\n          sum(\n            scale(\n              sum(\n                scale(sum(prod(m1[1], m3[0]), prod(-m3[1], m1[0])), m0[2]),\n                sum(\n                  scale(sum(prod(m0[1], m3[0]), prod(-m3[1], m0[0])), -m1[2]),\n                  scale(sum(prod(m0[1], m1[0]), prod(-m1[1], m0[0])), m3[2]),\n                ),\n              ),\n              m2[3],\n            ),\n            scale(\n              sum(\n                scale(sum(prod(m1[1], m2[0]), prod(-m2[1], m1[0])), m0[2]),\n                sum(\n                  scale(sum(prod(m0[1], m2[0]), prod(-m2[1], m0[0])), -m1[2]),\n                  scale(sum(prod(m0[1], m1[0]), prod(-m1[1], m0[0])), m2[2]),\n                ),\n              ),\n              -m3[3],\n            ),\n          ),\n        ),\n      ),\n    );\n    const n = sum(\n      sum(\n        sum(\n          scale(\n            sum(\n              scale(sum(prod(m3[1], m4[0]), prod(-m4[1], m3[0])), m2[2]),\n              sum(\n                scale(sum(prod(m2[1], m4[0]), prod(-m4[1], m2[0])), -m3[2]),\n                scale(sum(prod(m2[1], m3[0]), prod(-m3[1], m2[0])), m4[2]),\n              ),\n            ),\n            m0[3],\n          ),\n          scale(\n            sum(\n              scale(sum(prod(m3[1], m4[0]), prod(-m4[1], m3[0])), m0[2]),\n              sum(\n                scale(sum(prod(m0[1], m4[0]), prod(-m4[1], m0[0])), -m3[2]),\n                scale(sum(prod(m0[1], m3[0]), prod(-m3[1], m0[0])), m4[2]),\n              ),\n            ),\n            -m2[3],\n          ),\n        ),\n        sum(\n          scale(\n            sum(\n              scale(sum(prod(m2[1], m4[0]), prod(-m4[1], m2[0])), m0[2]),\n              sum(\n                scale(sum(prod(m0[1], m4[0]), prod(-m4[1], m0[0])), -m2[2]),\n                scale(sum(prod(m0[1], m2[0]), prod(-m2[1], m0[0])), m4[2]),\n              ),\n            ),\n            m3[3],\n          ),\n          scale(\n            sum(\n              scale(sum(prod(m2[1], m3[0]), prod(-m3[1], m2[0])), m0[2]),\n              sum(\n                scale(sum(prod(m0[1], m3[0]), prod(-m3[1], m0[0])), -m2[2]),\n                scale(sum(prod(m0[1], m2[0]), prod(-m2[1], m0[0])), m3[2]),\n              ),\n            ),\n            -m4[3],\n          ),\n        ),\n      ),\n      sum(\n        sum(\n          scale(\n            sum(\n              scale(sum(prod(m2[1], m4[0]), prod(-m4[1], m2[0])), m1[2]),\n              sum(\n                scale(sum(prod(m1[1], m4[0]), prod(-m4[1], m1[0])), -m2[2]),\n                scale(sum(prod(m1[1], m2[0]), prod(-m2[1], m1[0])), m4[2]),\n              ),\n            ),\n            m0[3],\n          ),\n          scale(\n            sum(\n              scale(sum(prod(m2[1], m4[0]), prod(-m4[1], m2[0])), m0[2]),\n              sum(\n                scale(sum(prod(m0[1], m4[0]), prod(-m4[1], m0[0])), -m2[2]),\n                scale(sum(prod(m0[1], m2[0]), prod(-m2[1], m0[0])), m4[2]),\n              ),\n            ),\n            -m1[3],\n          ),\n        ),\n        sum(\n          scale(\n            sum(\n              scale(sum(prod(m1[1], m4[0]), prod(-m4[1], m1[0])), m0[2]),\n              sum(\n                scale(sum(prod(m0[1], m4[0]), prod(-m4[1], m0[0])), -m1[2]),\n                scale(sum(prod(m0[1], m1[0]), prod(-m1[1], m0[0])), m4[2]),\n              ),\n            ),\n            m2[3],\n          ),\n          scale(\n            sum(\n              scale(sum(prod(m1[1], m2[0]), prod(-m2[1], m1[0])), m0[2]),\n              sum(\n                scale(sum(prod(m0[1], m2[0]), prod(-m2[1], m0[0])), -m1[2]),\n                scale(sum(prod(m0[1], m1[0]), prod(-m1[1], m0[0])), m2[2]),\n              ),\n            ),\n            -m4[3],\n          ),\n        ),\n      ),\n    );\n    const d = sub(p, n);\n    return d[d.length - 1];\n  };\n}\n\nfunction orientation(n: number) {\n  const fn = n === 3 ? orientation_3 : n === 4 ? orientation_4 : orientation_5;\n  return fn(robustSum, twoProduct, robustScale, robustSubtract);\n}\n\nconst orientation3Exact = orientation(3);\nconst orientation4Exact = orientation(4);\n\nconst CACHED: Array<Function> = [\n  function orientation0() {\n    return 0;\n  },\n  function orientation1() {\n    return 0;\n  },\n  function orientation2(a: PointND, b: PointND) {\n    return b[0] - a[0];\n  },\n  function orientation3(a: PointND, b: PointND, c: PointND) {\n    const l = (a[1] - c[1]) * (b[0] - c[0]);\n    const r = (a[0] - c[0]) * (b[1] - c[1]);\n    const det = l - r;\n    let s: number;\n    if (l > 0) {\n      if (r <= 0) {\n        return det;\n      } else {\n        s = l + r;\n      }\n    } else if (l < 0) {\n      if (r >= 0) {\n        return det;\n      } else {\n        s = -(l + r);\n      }\n    } else {\n      return det;\n    }\n    const tol = ERR_BOUND_3 * s;\n    if (det >= tol || det <= -tol) {\n      return det;\n    }\n    return orientation3Exact(a, b, c);\n  },\n  function orientation4(a: PointND, b: PointND, c: PointND, d: PointND) {\n    const adx = a[0] - d[0];\n    const bdx = b[0] - d[0];\n    const cdx = c[0] - d[0];\n    const ady = a[1] - d[1];\n    const bdy = b[1] - d[1];\n    const cdy = c[1] - d[1];\n    const adz = a[2] - d[2];\n    const bdz = b[2] - d[2];\n    const cdz = c[2] - d[2];\n    const bdx_cdy = bdx * cdy;\n    const cdx_bdy = cdx * bdy;\n    const cdx_ady = cdx * ady;\n    const adx_cdy = adx * cdy;\n    const adx_bdy = adx * bdy;\n    const bdx_ady = bdx * ady;\n    const det = adz * (bdx_cdy - cdx_bdy) + bdz * (cdx_ady - adx_cdy) + cdz * (adx_bdy - bdx_ady);\n    const permanent =\n      (Math.abs(bdx_cdy) + Math.abs(cdx_bdy)) * Math.abs(adz) +\n      (Math.abs(cdx_ady) + Math.abs(adx_cdy)) * Math.abs(bdz) +\n      (Math.abs(adx_bdy) + Math.abs(bdx_ady)) * Math.abs(cdz);\n    const tol = ERR_BOUND_4 * permanent;\n    if (det > tol || -det > tol) {\n      return det;\n    }\n    return orientation4Exact(a, b, c, d);\n  },\n];\n\nfunction slowOrient(args: Array<PointND | PointND>): number {\n  let proc = CACHED[args.length];\n  if (!proc) {\n    proc = CACHED[args.length] = orientation(args.length);\n  }\n  return proc.apply(undefined, ...args);\n}\n\nfunction proc(\n  slow: typeof slowOrient,\n  o0: Function,\n  o1: Function,\n  o2: Function,\n  o3: Function,\n  o4: Function,\n  o5: Function,\n): (...args: Array<PointND | PointND>) => number {\n  return function getOrientation(...args: Array<PointND | PointND>) {\n    switch (args.length) {\n      case 0:\n      case 1:\n        return 0;\n      case 2:\n        return o2(args[0], args[1]);\n      case 3:\n        return o3(args[0], args[1], args[2]);\n      case 4:\n        return o4(args[0], args[1], args[2], args[3]);\n      case 5:\n        return o5(args[0], args[1], args[2], args[3], args[4]);\n    }\n\n    return slow(args);\n  };\n}\n\nfunction generateOrientationProc(): any {\n  while (CACHED.length <= NUM_EXPAND) {\n    CACHED.push(orientation(CACHED.length));\n  }\n  // @ts-ignore\n  const orientationProc = proc(undefined, slowOrient, ...CACHED);\n  for (let i = 0; i <= NUM_EXPAND; ++i) {\n    // @ts-ignore\n    orientationProc[i] = CACHED[i];\n  }\n  return orientationProc;\n}\n\nexport default generateOrientationProc();\n", "'use strict';\n\nimport type { Point } from '../../../types';\nimport robustOrientation from './robust-orientation';\n\nconst orient = robustOrientation[3];\n\nexport function monotoneConvexHull2D(points: Point[]): number[] {\n  const n = points.length;\n\n  // Handle special cases when the input contains fewer than 3 points\n  if (n < 3) {\n    const result = new Array(n);\n    for (let i = 0; i < n; ++i) {\n      result[i] = i;\n    }\n\n    // Special case for exactly 2 identical points\n    if (n === 2 && points[0][0] === points[1][0] && points[0][1] === points[1][1]) {\n      return [0];\n    }\n\n    return result;\n  }\n\n  // Sort point indices along the x-axis (breaking ties with y-axis)\n  const sorted = new Array(n);\n  for (let i = 0; i < n; ++i) {\n    sorted[i] = i;\n  }\n  sorted.sort((a, b) => {\n    const d = points[a][0] - points[b][0];\n    if (d) {\n      return d;\n    }\n    return points[a][1] - points[b][1];\n  });\n\n  // Construct the upper and lower hulls\n  const lower: number[] = [sorted[0], sorted[1]];\n  const upper: number[] = [sorted[0], sorted[1]];\n\n  for (let i = 2; i < n; ++i) {\n    const idx = sorted[i];\n    const p = points[idx];\n\n    // Insert into the lower hull\n    let m = lower.length;\n    while (m > 1 && orient(points[lower[m - 2]], points[lower[m - 1]], p) <= 0) {\n      m -= 1;\n      lower.pop();\n    }\n    lower.push(idx);\n\n    // Insert into the upper hull\n    m = upper.length;\n    while (m > 1 && orient(points[upper[m - 2]], points[upper[m - 1]], p) >= 0) {\n      m -= 1;\n      upper.pop();\n    }\n    upper.push(idx);\n  }\n\n  // Merge the lower and upper hulls into the final result\n  const result = new Array(upper.length + lower.length - 2);\n  let ptr = 0;\n  for (let i = 0, nl = lower.length; i < nl; ++i) {\n    result[ptr++] = lower[i];\n  }\n  for (let j = upper.length - 2; j > 0; --j) {\n    result[ptr++] = upper[j];\n  }\n\n  // Return the final convex hull\n  return result;\n}\n", "import type { Point } from '../../../types';\nimport orient from './robust-orientation';\n\nfunction checkCollinear(a0: Point, a1: Point, b0: Point, b1: Point): boolean {\n  for (let d = 0; d < 2; ++d) {\n    const x0 = a0[d];\n    const y0 = a1[d];\n    const [l0, h0] = [Math.min(x0, y0), Math.max(x0, y0)];\n\n    const x1 = b0[d];\n    const y1 = b1[d];\n    const [l1, h1] = [Math.min(x1, y1), Math.max(x1, y1)];\n    if (h1 < l0 || h0 < l1) return false;\n  }\n  return true;\n}\n\nexport function segmentsIntersect(a0: Point, a1: Point, b0: Point, b1: Point): boolean {\n  const x0 = orient(a0, b0, b1);\n  const y0 = orient(a1, b0, b1);\n  if ((x0 > 0 && y0 > 0) || (x0 < 0 && y0 < 0)) return false;\n  const x1 = orient(b0, a0, a1);\n  const y1 = orient(b1, a0, a1);\n  if ((x1 > 0 && y1 > 0) || (x1 < 0 && y1 < 0)) return false;\n  if (x0 === 0 && y0 === 0 && x1 === 0 && y1 === 0) {\n    return checkCollinear(a0, a1, b0, b1);\n  }\n  return true;\n}\n", "import type { Point } from '../../../types';\nimport type { BBox, FormatTuple } from './format';\nimport { formatUtil } from './format';\nimport type { Grid } from './grid_handle';\nimport { grid } from './grid_handle';\nimport { monotoneConvexHull2D as convexHull } from './monotone-convex-hull-2d';\nimport { segmentsIntersect as intersect } from './robust-segment-intersect';\n\nfunction _filterDuplicates(pointset: Point[]) {\n  const unique = [pointset[0]];\n  let lastPoint = pointset[0];\n  for (let i = 1; i < pointset.length; i++) {\n    const currentPoint = pointset[i];\n    if (lastPoint[0] !== currentPoint[0] || lastPoint[1] !== currentPoint[1]) {\n      unique.push(currentPoint);\n    }\n    lastPoint = currentPoint;\n  }\n  return unique;\n}\n\nfunction _sortByX(pointset: Point[]) {\n  return pointset.sort(function (a, b) {\n    return a[0] - b[0] || a[1] - b[1];\n  });\n}\n\nfunction _sqLength(a: Point, b: Point) {\n  return Math.pow(b[0] - a[0], 2) + Math.pow(b[1] - a[1], 2);\n}\n\nfunction _cos(o: Point, a: Point, b: Point) {\n  const aShifted = [a[0] - o[0], a[1] - o[1]],\n    bShifted = [b[0] - o[0], b[1] - o[1]],\n    sqALen = _sqLength(o, a),\n    sqBLen = _sqLength(o, b),\n    dot = aShifted[0] * bShifted[0] + aShifted[1] * bShifted[1];\n\n  return dot / Math.sqrt(sqALen * sqBLen);\n}\n\nfunction _intersect(segment: [Point, Point], pointset: Point[]) {\n  for (let i = 0; i < pointset.length - 1; i++) {\n    const seg = [pointset[i], pointset[i + 1]];\n    if (\n      (segment[0][0] === seg[0][0] && segment[0][1] === seg[0][1]) ||\n      (segment[0][0] === seg[1][0] && segment[0][1] === seg[1][1])\n    ) {\n      continue;\n    }\n    if (intersect(segment[0], segment[1], seg[0], seg[1])) {\n      return true;\n    }\n  }\n  return false;\n}\n\nfunction _occupiedArea(pointset: Point[]) {\n  let minX = Infinity;\n  let minY = Infinity;\n  let maxX = -Infinity;\n  let maxY = -Infinity;\n\n  for (let i = pointset.length - 1; i >= 0; i--) {\n    if (pointset[i][0] < minX) {\n      minX = pointset[i][0];\n    }\n    if (pointset[i][1] < minY) {\n      minY = pointset[i][1];\n    }\n    if (pointset[i][0] > maxX) {\n      maxX = pointset[i][0];\n    }\n    if (pointset[i][1] > maxY) {\n      maxY = pointset[i][1];\n    }\n  }\n\n  return [\n    maxX - minX, // width\n    maxY - minY, // height\n  ];\n}\n\nfunction _bBoxAround(edge: [Point, Point]): BBox {\n  return [\n    Math.min(edge[0][0], edge[1][0]), // left\n    Math.min(edge[0][1], edge[1][1]), // top\n    Math.max(edge[0][0], edge[1][0]), // right\n    Math.max(edge[0][1], edge[1][1]), // bottom\n  ];\n}\n\nfunction _midPoint(edge: [Point, Point], innerPoints: Point[], convex: Point[]) {\n  let point = null,\n    angle1Cos = MAX_CONCAVE_ANGLE_COS,\n    angle2Cos = MAX_CONCAVE_ANGLE_COS,\n    a1Cos,\n    a2Cos;\n\n  for (let i = 0; i < innerPoints.length; i++) {\n    a1Cos = _cos(edge[0], edge[1], innerPoints[i]);\n    a2Cos = _cos(edge[1], edge[0], innerPoints[i]);\n\n    if (\n      a1Cos > angle1Cos &&\n      a2Cos > angle2Cos &&\n      !_intersect([edge[0], innerPoints[i]], convex) &&\n      !_intersect([edge[1], innerPoints[i]], convex)\n    ) {\n      angle1Cos = a1Cos;\n      angle2Cos = a2Cos;\n      point = innerPoints[i];\n    }\n  }\n\n  return point;\n}\n\nfunction _concave(\n  convex: Point[],\n  maxSqEdgeLen: number,\n  maxSearchArea: [number, number],\n  grid: Grid,\n  edgeSkipList: Set<string>,\n) {\n  let midPointInserted = false;\n\n  for (let i = 0; i < convex.length - 1; i++) {\n    const edge: [Point, Point] = [convex[i], convex[i + 1]];\n    // generate a key in the format X0,Y0,X1,Y1\n    const keyInSkipList = edge[0][0] + ',' + edge[0][1] + ',' + edge[1][0] + ',' + edge[1][1];\n\n    if (_sqLength(edge[0], edge[1]) < maxSqEdgeLen || edgeSkipList.has(keyInSkipList)) {\n      continue;\n    }\n\n    let scaleFactor = 0;\n    let bBoxAround = _bBoxAround(edge);\n    let bBoxWidth;\n    let bBoxHeight;\n    let midPoint;\n    do {\n      bBoxAround = grid.extendBbox(bBoxAround, scaleFactor);\n      bBoxWidth = bBoxAround[2] - bBoxAround[0];\n      bBoxHeight = bBoxAround[3] - bBoxAround[1];\n\n      midPoint = _midPoint(edge, grid.rangePoints(bBoxAround), convex);\n      scaleFactor++;\n    } while (midPoint === null && (maxSearchArea[0] > bBoxWidth || maxSearchArea[1] > bBoxHeight));\n\n    if (bBoxWidth >= maxSearchArea[0] && bBoxHeight >= maxSearchArea[1]) {\n      edgeSkipList.add(keyInSkipList);\n    }\n\n    if (midPoint !== null) {\n      convex.splice(i + 1, 0, midPoint);\n      grid.removePoint(midPoint);\n      midPointInserted = true;\n    }\n  }\n\n  if (midPointInserted) {\n    return _concave(convex, maxSqEdgeLen, maxSearchArea, grid, edgeSkipList);\n  }\n\n  return convex;\n}\n\nexport function hull(pointset: Point[], concavity: number, format?: FormatTuple): Point[] {\n  const maxEdgeLen = concavity || 20;\n\n  const points = _filterDuplicates(_sortByX(formatUtil.toXy(pointset, format) as Point[]));\n\n  if (points.length < 4) {\n    const concave = points.concat([points[0]]);\n    return (format ? formatUtil.fromXy(concave, format) : concave) as Point[];\n  }\n\n  const occupiedArea = _occupiedArea(points);\n  const maxSearchArea: [number, number] = [\n    occupiedArea[0] * MAX_SEARCH_BBOX_SIZE_PERCENT,\n    occupiedArea[1] * MAX_SEARCH_BBOX_SIZE_PERCENT,\n  ];\n\n  const convex = convexHull(points)\n    .reverse()\n    .map((idx: number) => points[idx]); // ccw -> cw, indices -> points\n  convex.push(convex[0]);\n\n  const innerPoints = points.filter(function (pt) {\n    return convex.indexOf(pt) < 0;\n  });\n\n  const cellSize = Math.ceil(1 / (points.length / (occupiedArea[0] * occupiedArea[1])));\n\n  const concave = _concave(convex, Math.pow(maxEdgeLen, 2), maxSearchArea, grid(innerPoints, cellSize), new Set());\n\n  return (format ? formatUtil.fromXy(concave, format) : concave) as Point[];\n}\n\nconst MAX_CONCAVE_ANGLE_COS = Math.cos(90 / (180 / Math.PI)); // angle = 90 deg\nconst MAX_SEARCH_BBOX_SIZE_PERCENT = 0.6;\n", "import { type PathArray } from '@antv/util';\nimport type { Point, Vector2 } from '../../types';\nimport { getLinesIntersection } from '../../utils/line';\nimport { getClosedSpline } from '../../utils/path';\nimport { isCollinear, sortByClockwise } from '../../utils/point';\nimport { add, angle, normalize, perpendicular, scale, subtract, toVector2, toVector3 } from '../../utils/vector';\nimport type { HullOptions } from '../hull';\n\n/**\n * <zh/>  Hull \n *\n * <en/> Compute Hull Path\n * @param points - <zh/>  | <en/> Vertices of Hull\n * @param padding - <zh/>  | <en/> padding\n * @param corner - <zh/>  'sharp''rounded'  'smooth' | <en/> Corner type, currently supports 'sharp', 'rounded' and 'smooth'\n * @returns <zh/> Hull  | <en/> Hull Path\n */\nexport function computeHullPath(points: Point[], padding: number, corner: 'rounded' | 'smooth' | 'sharp'): PathArray {\n  if (points.length === 1) return genSinglePointHullPath(points[0], padding, corner);\n  if (points.length === 2) return genTwoPointsHullPath(points, padding, corner);\n  if (points.length === 3) {\n    const [p1, p2, p3] = sortByClockwise(points);\n    if (isCollinear(p1, p2, p3)) return genTwoPointsHullPath([p1, p3], padding, corner);\n  }\n\n  switch (corner) {\n    case 'smooth':\n      return genMultiPointsSmoothHull(points, padding);\n    case 'sharp':\n      return genMultiPointsSharpHull(points, padding);\n    case 'rounded':\n    default:\n      return genMultiPointsRoundedHull(points, padding);\n  }\n}\n\n/**\n * <zh/>  Hull \n *\n * <en/> Generate Hull Path for a single point\n * @param point - <zh/>  | <en/> Single point\n * @param padding - <zh/>  | <en/> Padding\n * @param corner - <zh/>  | <en/> Corner type\n * @returns <zh/>  Hull  | <en/> Single point Hull Path\n */\nconst genSinglePointHullPath = (point: Point, padding: number, corner: HullOptions['corner']): PathArray => {\n  if (corner === 'sharp')\n    return [\n      ['M', point[0] - padding, point[1] - padding],\n      ['L', point[0] + padding, point[1] - padding],\n      ['L', point[0] + padding, point[1] + padding],\n      ['L', point[0] - padding, point[1] + padding],\n      ['Z'],\n    ];\n  const arcData: [number, number, number, number, number] = [padding, padding, 0, 0, 0];\n  return [\n    ['M', point[0], point[1] - padding],\n    ['A', ...arcData, point[0], point[1] + padding],\n    ['A', ...arcData, point[0], point[1] - padding],\n  ];\n};\n\n/**\n * <zh/>  Hull \n *\n * <en/> Generate Hull Path for two points\n * @param points - <zh/>  | <en/> Two points\n * @param padding - <zh/>  | <en/> Padding\n * @param corner - <zh/>  | <en/> Corner type\n * @returns <zh/>  Hull  | <en/> Two points Hull Path\n */\nconst genTwoPointsHullPath = (points: Point[], padding: number, corner: HullOptions['corner']): PathArray => {\n  const arcData: [number, number, number, number, number] = [padding, padding, 0, 0, 0];\n\n  const point1 =\n    corner === 'sharp' ? add(points[0], scale(normalize(subtract(points[0], points[1])), padding)) : points[0];\n  const point2 =\n    corner === 'sharp' ? add(points[1], scale(normalize(subtract(points[1], points[0])), padding)) : points[1];\n\n  const offsetVector = scale(normalize(perpendicular(subtract(point1, point2) as Vector2, false)), padding);\n  const invOffsetVector = scale(offsetVector, -1);\n\n  const prev = add(point1, offsetVector);\n  const current = add(point2, offsetVector);\n  const p2 = add(point2, invOffsetVector);\n  const p3 = add(point1, invOffsetVector);\n\n  if (corner === 'sharp') {\n    return [['M', prev[0], prev[1]], ['L', current[0], current[1]], ['L', p2[0], p2[1]], ['L', p3[0], p3[1]], ['Z']];\n  }\n\n  return [\n    ['M', prev[0], prev[1]],\n    ['L', current[0], current[1]],\n    ['A', ...arcData, p2[0], p2[1]],\n    ['L', p3[0], p3[1]],\n    ['A', ...arcData, prev[0], prev[1]],\n  ];\n};\n\n/**\n * <zh/>  Hull \n *\n * <en/> Generate Hull Path for multiple points with rounded corners\n * @param points - <zh/>  Hull  | <en/> Points that form the Hull\n * @param padding - <zh/>  | <en/> Padding\n * @returns <zh/>  | <en/> Rounded hull path\n */\nconst genMultiPointsRoundedHull = (points: Point[], padding: number): PathArray => {\n  const segments = sortByClockwise(points).map((current, i) => {\n    const prev2Index = (i - 2 + points.length) % points.length;\n    const prevIndex = (i - 1 + points.length) % points.length;\n    const nextIndex = (i + 1) % points.length;\n    const prev2 = points[prev2Index];\n    const prev = points[prevIndex];\n    const next = points[nextIndex];\n\n    const v0 = subtract(prev2, prev) as Vector2;\n    const v1 = subtract(prev, current) as Vector2;\n    const v2 = subtract(current, next) as Vector2;\n\n    //   Determine if it is a concave angle\n    const isConcave = (v1: Vector2, v2: Vector2): boolean => {\n      return angle(v1, v2, true) < Math.PI;\n    };\n    const concavePrev = isConcave(v0, v1);\n    const concaveNext = isConcave(v1, v2);\n\n    const offsetVector = (v: Vector2) => scale(normalize(perpendicular(v, false)), padding);\n    const offset = offsetVector(v1);\n    return [\n      {\n        p: toVector2(concavePrev ? add(prev, offsetVector(v0)) : add(prev, offset)),\n        concave: concavePrev && prev,\n      },\n      {\n        p: toVector2(concaveNext ? add(current, offsetVector(v2)) : add(current, offset)),\n        concave: concaveNext && current,\n      },\n    ];\n  });\n\n  const arcData = [padding, padding, 0, 0, 0];\n  const startIndex = segments.findIndex(\n    (segment, i) =>\n      !segments[(i - 1 + segments.length) % segments.length][0].concave &&\n      !segments[(i - 1 + segments.length) % segments.length][1].concave &&\n      !segment[0].concave &&\n      !segment[0].concave &&\n      !segment[1].concave,\n  );\n  const sortedSegments = segments.slice(startIndex).concat(segments.slice(0, startIndex));\n  let concavePoints: Point[] = [];\n  return sortedSegments.flatMap((segment, i) => {\n    const pathFragment = [];\n    const lastSegment = sortedSegments[segments.length - 1];\n    if (i === 0) pathFragment.push(['M', ...lastSegment[1].p]);\n    if (!segment[0].concave) {\n      pathFragment.push(['A', ...arcData, ...segment[0].p]);\n    } else {\n      concavePoints.push(segment[0].p, segment[1].p);\n    }\n    if (!segment[1].concave) {\n      pathFragment.push(['L', ...segment[1].p]);\n    } else {\n      concavePoints.unshift(segment[1].p);\n    }\n    if (concavePoints.length === 3) {\n      pathFragment.pop();\n      pathFragment.push(['C', ...concavePoints.flat()]);\n      concavePoints = [];\n    }\n    return pathFragment;\n  }) as PathArray;\n};\n\n/**\n * <zh/>  Hull \n *\n * <en/> Generate Hull Path for multiple points with smooth corners\n * @param points - <zh/>  Hull  | <en/> Points that form the Hull\n * @param padding - <zh/>  | <en/> Padding\n * @returns <zh/>  | <en/> Smooth hull path\n */\nconst genMultiPointsSmoothHull = (points: Point[], padding: number): PathArray => {\n  const hullPoints = sortByClockwise(points).map((p, i) => {\n    const pNext = points[(i + 1) % points.length];\n    return { p, v: normalize(subtract(pNext, p)) };\n  });\n\n  // Compute the expanded hull points, and the nearest prior control point for each.\n  hullPoints.forEach((hp, i) => {\n    const priorIndex = i > 0 ? i - 1 : points.length - 1;\n    const prevV = hullPoints[priorIndex].v as Vector2;\n    const extensionVec = normalize(add(prevV, scale(hp.v, angle(prevV, hp.v, true) < Math.PI ? 1 : -1)));\n    hp.p = add(hp.p, scale(extensionVec, padding));\n  });\n\n  return getClosedSpline(hullPoints.map((obj) => obj.p));\n};\n\n/**\n * <zh/>  Hull \n *\n * <en/> Generate Hull Path for multiple points with sharp corners\n * @param points - <zh/>  Hull  | <en/> Points that form the Hull\n * @param padding - <zh/>  | <en/> Padding\n * @returns <zh/>  | <en/> Sharp hull path\n */\nconst genMultiPointsSharpHull = (points: Point[], padding: number): PathArray => {\n  const segments = points.map((current, i) => {\n    const prev = points[i === 0 ? points.length - 1 : i - 1];\n    const offset = toVector3(scale(normalize(perpendicular(subtract(prev, current) as Vector2, false)), padding));\n    return [add(prev, offset), add(current, offset)];\n  });\n\n  const arr = segments.flat();\n\n  const vertices = arr\n    .map((_, i) => {\n      if (i % 2 === 0) return null;\n      const l1 = [arr[(i - 1) % arr.length], arr[i % arr.length]] as [Point, Point];\n      const l2 = [arr[(i + 1) % arr.length], arr[(i + 2) % arr.length]] as [Point, Point];\n      return getLinesIntersection(l1, l2, true);\n    })\n    .filter(Boolean) as Point[];\n  return vertices.map((point, i) => [i === 0 ? 'M' : 'L', point[0], point[1]]).concat([['Z']]) as PathArray;\n};\n", "import { PathArray, isEqual, isFunction } from '@antv/util';\nimport { GraphEvent } from '../../constants';\nimport type { ContourStyleProps } from '../../elements/shapes';\nimport { Contour } from '../../elements/shapes';\nimport type { RuntimeContext } from '../../runtime/types';\nimport type { ID, Point } from '../../types';\nimport type { ElementLifeCycleEvent } from '../../utils/event';\nimport { idOf } from '../../utils/id';\nimport { positionOf } from '../../utils/position';\nimport type { BasePluginOptions } from '../base-plugin';\nimport { BasePlugin } from '../base-plugin';\nimport { hull } from './hull';\nimport { computeHullPath } from './util';\n\n/**\n * <zh/> Hull \n *\n * <en/> Hull options\n */\nexport interface HullOptions extends BasePluginOptions, ContourStyleProps {\n  /**\n   * <zh/> Hull \n   *\n   * <en/> Elements in Hull\n   */\n  members?: ID[];\n  /**\n   * <zh/>  Infinity  Convex Hull\n   *\n   * <en/> Concavity. Default is Infinity, which means Convex Hull\n   * @defaultValue Infinity\n   */\n  concavity?: number;\n  /**\n   * <zh/> \n   *\n   * <en/> Padding\n   * @defaultValue 10\n   */\n  padding?: number;\n  /**\n   * <zh/> \n   *\n   * <en/> Corner type\n   * @defaultValue 'rounded'\n   */\n  corner?: 'rounded' | 'smooth' | 'sharp';\n}\n\n/**\n * <zh/> \n *\n * <en/> Hull\n * @remarks\n * <zh/> Hull\n *\n * <zh/> Convex Hull\n *\n * <zh/> Concave Hull concavity concavity  concavity  Infinity \n *\n * <en/> Hull is used to process and represent the convex polygon bounding box of a set of points. Hull has two forms: convex hull and concave hull.\n *\n * <en/>  Convex Hull: This is a convex polygon that contains all points and has no concave. You can think of it as the smallest bounding box of a set of points, with no points outside the polygon.\n *\n *  <en/>  Concave Hull: This is a concave polygon that also contains all points, but may have concave. The concavity of the concave hull is controlled by the concavity parameter. The larger the concavity, the smaller the concave. When concavity is Infinity, the concave hull becomes a convex hull.\n */\nexport class Hull extends BasePlugin<HullOptions> {\n  private shape!: Contour;\n  /**\n   * <zh/>  Hull \n   *\n   * <en/> Element Ids on Hull\n   */\n  private hullMemberIds: ID[] = [];\n  /**\n   * <zh/> Hull \n   *\n   * <en/> Hull path\n   */\n  private path!: PathArray;\n\n  private optionsCache!: HullOptions;\n\n  static defaultOptions: Partial<HullOptions> = {\n    members: [],\n    padding: 10,\n    corner: 'rounded',\n    concavity: Infinity,\n    /** hull style */\n    fill: 'lightblue',\n    fillOpacity: 0.2,\n    labelOpacity: 1,\n    stroke: 'blue',\n    strokeOpacity: 0.2,\n  };\n\n  constructor(context: RuntimeContext, options: HullOptions) {\n    super(context, Object.assign({}, Hull.defaultOptions, options));\n\n    this.bindEvents();\n  }\n\n  private bindEvents() {\n    this.context.graph.on(GraphEvent.AFTER_RENDER, this.drawHull);\n    this.context.graph.on(GraphEvent.AFTER_ELEMENT_UPDATE, this.updateHullPath);\n  }\n\n  private unbindEvents() {\n    this.context.graph.off(GraphEvent.AFTER_RENDER, this.drawHull);\n    this.context.graph.off(GraphEvent.AFTER_ELEMENT_UPDATE, this.updateHullPath);\n  }\n\n  private getHullStyle(forceUpdate?: boolean): ContourStyleProps {\n    const { members, padding, corner, ...style } = this.options;\n    return { ...style, d: this.getHullPath(forceUpdate) };\n  }\n\n  private drawHull = () => {\n    if (!this.shape) {\n      this.shape = new Contour({ style: this.getHullStyle() });\n      this.context.canvas.appendChild(this.shape);\n    } else {\n      const forceUpdate = !isEqual(this.optionsCache, this.options);\n      this.shape.update(this.getHullStyle(forceUpdate));\n    }\n    this.optionsCache = { ...this.options };\n  };\n\n  private updateHullPath = (event: ElementLifeCycleEvent) => {\n    if (!this.shape) return;\n    if (!this.options.members.includes(idOf(event.data))) return;\n    this.shape.update({ d: this.getHullPath(true) });\n  };\n\n  private getHullPath = (forceUpdate = false): string | PathArray => {\n    const { graph } = this.context;\n    const members = this.getMember();\n    if (members.length === 0) return '';\n\n    const data = members.map((id) => graph.getNodeData(id));\n    const vertices = hull(data.map(positionOf), this.options.concavity).slice(1).reverse() as Point[];\n    const hullMemberIds = vertices.flatMap((point) => data.filter((m) => isEqual(positionOf(m), point)).map(idOf));\n    if (isEqual(hullMemberIds, this.hullMemberIds) && !forceUpdate) return this.path;\n    this.hullMemberIds = hullMemberIds;\n    this.path = computeHullPath(vertices, this.getPadding(), this.options.corner);\n    return this.path;\n  };\n\n  private getPadding() {\n    const { graph } = this.context;\n\n    const memberPadding = this.hullMemberIds.reduce((acc: number, id: ID) => {\n      const { halfExtents } = graph.getElementRenderBounds(id);\n      const size = Math.max(halfExtents[0], halfExtents[1]);\n      return Math.max(acc, size);\n    }, 0);\n\n    return memberPadding + this.options.padding;\n  }\n\n  /**\n   * <zh/>  Hull \n   *\n   * <en/> Add Hull member\n   * @param members - <zh/>  Ids | <en/> Element Ids\n   */\n  public addMember(members: ID | ID[]) {\n    const membersToAdd = Array.isArray(members) ? members : [members];\n    this.options.members = [...new Set([...this.options.members, ...membersToAdd])];\n    this.shape.update({ d: this.getHullPath() });\n  }\n\n  /**\n   * <zh/>  Hull \n   *\n   * <en/> Remove Hull member\n   * @param members - <zh/>  Ids | <en/> Element Ids\n   */\n  public removeMember(members: ID | ID[]) {\n    const membersToRemove = Array.isArray(members) ? members : [members];\n    this.options.members = this.options.members.filter((id) => !membersToRemove.includes(id));\n    if (membersToRemove.some((id) => this.hullMemberIds.includes(id))) {\n      this.shape.update({ d: this.getHullPath() });\n    }\n  }\n\n  /**\n   * <zh/>  Hull \n   *\n   * <en/> Update Hull member\n   * @param members - <zh/>  Ids | <en/> Element Ids\n   */\n  public updateMember(members: ID[] | ((prev: ID[]) => ID[])) {\n    this.options.members = isFunction(members) ? members(this.options.members) : members;\n    this.shape.update(this.getHullStyle(true));\n  }\n\n  /**\n   * <zh/>  Hull \n   *\n   * <en/> Get Hull member\n   * @returns <zh/>  Ids | <en/> Element Ids\n   */\n  public getMember() {\n    return this.options.members;\n  }\n\n  /**\n   * <zh/>  Hull\n   *\n   * <en/> Destroy Hull\n   * @internal\n   */\n  public destroy(): void {\n    this.unbindEvents();\n    this.shape.destroy();\n    this.hullMemberIds = [];\n    super.destroy();\n  }\n}\n", "import type { IRenderer } from '@antv/g';\nimport { Canvas as GCanvas } from '@antv/g';\nimport { Renderer } from '@antv/g-canvas';\nimport { Canvas } from '../../runtime/canvas';\nimport type { Placement } from '../../types';\nimport { parsePlacement } from '../../utils/placement';\nimport { createPluginContainer } from './dom';\n\ninterface Options {\n  /** <zh/>  | <en/> Plugin width */\n  width: number;\n  /** <zh/>  | <en/> Plugin height */\n  height: number;\n  /** <zh/>  | <en/> Render */\n  renderer?: IRenderer;\n  /** <zh/>  | <en/> Plugin placement */\n  placement: Placement;\n  /** <zh/>  | <en/> Plugin class name */\n  className: string;\n  /** <zh/>  | <en/> Specify the plugin placement container */\n  container?: string | HTMLElement;\n  /** <zh/>  | <en/> Container style */\n  containerStyle?: Partial<CSSStyleDeclaration>;\n  /** <zh/> G6  | <en/> G6 canvas */\n  graphCanvas: Canvas;\n}\n\n/**\n * <zh/> \n *\n * <en/> Create a plugin canvas\n * @param options - <zh/>  | <en/> options\n * @returns <zh/> [, ] | <en/> [container, canvas]\n */\nexport function createPluginCanvas(options: Options): [HTMLElement, GCanvas] {\n  const { width, height, renderer } = options;\n  const $container = getContainer(options);\n\n  const canvas = new GCanvas({\n    width,\n    height,\n    container: $container,\n    renderer: renderer || new Renderer(),\n  });\n\n  return [$container, canvas];\n}\n\n/**\n * <zh/> \n *\n * <en/> Get container\n * @param options - <zh/>  | <en/> options\n * @returns <zh/>  | <en/> container\n */\nfunction getContainer(options: Options) {\n  const { container, className, graphCanvas } = options;\n  if (container) {\n    return typeof container === 'string' ? document.getElementById(container)! : container;\n  }\n\n  const $container = createPluginContainer(className, false);\n\n  const { width, height, containerStyle } = options;\n  const [x, y] = computePosition(options);\n\n  Object.assign($container.style, {\n    position: 'absolute',\n    left: x + 'px',\n    top: y + 'px',\n    width: width + 'px',\n    height: height + 'px',\n    ...containerStyle,\n  });\n\n  graphCanvas.getContainer()?.appendChild($container);\n  return $container;\n}\n\n/**\n * <zh/> \n *\n * <en/> Compute the position of the container\n * @param options - <zh/>  | <en/> options\n * @returns <zh/>  | <en/> position\n */\nfunction computePosition(options: Options) {\n  const { width, height, placement, graphCanvas } = options;\n  const [W, H] = graphCanvas.getSize();\n  const [xRatio, yRatio] = parsePlacement(placement);\n  return [xRatio * (W - width), yRatio * (H - height)];\n}\n", "import { Category, Selection } from '@antv/component';\nimport { CategoryStyleProps } from '@antv/component/lib/ui/legend/types';\nimport { Canvas } from '@antv/g';\nimport { get, isFunction } from '@antv/util';\nimport { GraphEvent } from '../constants';\nimport type { RuntimeContext } from '../runtime/types';\nimport type { ElementDatum, ElementType, ID, State } from '../types';\nimport type { CardinalPlacement } from '../types/placement';\nimport type { BasePluginOptions } from './base-plugin';\nimport { BasePlugin } from './base-plugin';\nimport { createPluginCanvas } from './utils/canvas';\n\ninterface Datum extends Record<string, any> {\n  id?: string;\n  label?: string;\n  color?: string;\n  marker?: string;\n  elementType?: ElementType;\n}\n\n/**\n * <zh/> \n *\n * <en/> Legend options\n */\nexport interface LegendOptions extends BasePluginOptions, Omit<CategoryStyleProps, 'data'> {\n  /**\n   * <zh/> \n   * - `'hover'`\n   * - `'click'`\n   *\n   * <en/> Legend trigger behavior\n   * - `'hover'`mouseover the legend item\n   * - `'click'`click the legend item\n   * @defaultValue 'hover'\n   */\n  trigger?: 'hover' | 'click';\n  /**\n   * <zh/>  'bottom'\n   *\n   * <en/> Relative position of the legend in the canvas, defaults to 'bottom', representing the bottom of the canvas\n   * @defaultValue 'bottom'\n   */\n  position?: CardinalPlacement;\n  /**\n   * <zh/>  Graph \n   *\n   * <en/> The container where the legend is mounted, if not, it will be mounted to the container where the Graph is located\n   */\n  container?: HTMLElement | string;\n  /**\n   * <zh/> \n   *\n   * <en/> The class name of the legend canvas, which does not take effect when an external container is passed in\n   */\n  className?: string;\n  /**\n   * <zh/> \n   *\n   * <en/> The style of the legend container, which does not take effect when an external container is passed in\n   */\n  containerStyle?: Partial<CSSStyleDeclaration>;\n  /**\n   * <zh/> \n   *\n   * <en/> Node Classification Identifier\n   */\n  nodeField?: string | ((item: ElementDatum) => string);\n  /**\n   * <zh/> \n   *\n   * <en/> Edge Classification Identifier\n   */\n  edgeField?: string | ((item: ElementDatum) => string);\n  /**\n   * <zh/> \n   *\n   * <en/> Combo Classification Identifier\n   */\n  comboField?: string | ((item: ElementDatum) => string);\n}\n\n/**\n * <zh/> \n *\n * <en/> Legend\n * @remarks\n * <zh/> \n *\n * <en/> The legend plugin is used to display the classification information of elements in the graph, and supports the display of classification information of nodes, edges, and combos.\n */\nexport class Legend extends BasePlugin<LegendOptions> {\n  static defaultOptions: Partial<LegendOptions> = {\n    position: 'bottom',\n    trigger: 'hover',\n    orientation: 'horizontal',\n    layout: 'flex',\n    itemSpacing: 4,\n    rowPadding: 10,\n    colPadding: 10,\n    itemMarkerSize: 16,\n    itemLabelFontSize: 16,\n    width: 240,\n    height: 160,\n  };\n  private typePrefix = '__data__';\n  private draw = false;\n  private fieldMap = {\n    node: new Map<string, ID[]>(),\n    edge: new Map<string, ID[]>(),\n    combo: new Map<string, ID[]>(),\n  };\n  private selectedItems: string[] = [];\n  private category?: Category;\n  private container?: HTMLElement;\n  private canvas?: Canvas;\n\n  constructor(context: RuntimeContext, options: LegendOptions) {\n    super(context, Object.assign({}, Legend.defaultOptions, options));\n    this.bindEvents();\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Update the legend configuration\n   * @param options - <zh/>  | <en/> Legend options\n   * @internal\n   */\n  public update(options: Partial<LegendOptions>) {\n    super.update(options);\n    this.clear();\n    this.createElement();\n  }\n\n  private clear() {\n    this.canvas?.destroy();\n    this.container?.remove();\n    this.canvas = undefined;\n    this.container = undefined;\n\n    this.draw = false;\n  }\n\n  private bindEvents = () => {\n    const { graph } = this.context;\n    graph.on(GraphEvent.AFTER_DRAW, this.createElement);\n  };\n\n  private changeState = (el: Selection, state: State | State[]) => {\n    const { graph } = this.context;\n    const { typePrefix } = this;\n    const composeId = get(el, [typePrefix, 'id']);\n    const category = get(el, [typePrefix, 'style', 'labelText']);\n    const [type] = composeId.split('__');\n    const ids = this.fieldMap[type as keyof typeof this.fieldMap].get(category) || [];\n\n    graph.setElementState(Object.fromEntries(ids?.map((id) => [id, state])));\n  };\n\n  /**\n   * <zh/> \n   *\n   * <en/> Legend element click event\n   * @param event - <zh/>  | <en/> The element that is clicked\n   */\n  public click = (event: Selection) => {\n    if (this.options.trigger === 'hover') return;\n    const composeId = get(event, [this.typePrefix, 'id']);\n    if (!this.selectedItems.includes(composeId)) {\n      this.selectedItems.push(composeId);\n      this.changeState(event, 'selected');\n    } else {\n      this.selectedItems = this.selectedItems.filter((item) => item !== composeId);\n      this.changeState(event, []);\n    }\n  };\n\n  /**\n   * <zh/> \n   *\n   * <en/> Legend element mouseleave event\n   * @param event - <zh/>  | <en/> The element that is moved out\n   */\n  public mouseleave = (event: Selection) => {\n    if (this.options.trigger === 'click') return;\n    this.selectedItems = [];\n    this.changeState(event, []);\n  };\n\n  /**\n   * <zh/> \n   *\n   * <en/> Legend element mouseenter event\n   * @param event - <zh/>  | <en/> The element that is moved in\n   */\n  public mouseenter = (event: Selection) => {\n    if (this.options.trigger === 'click') return;\n    const composeId = get(event, [this.typePrefix, 'id']);\n    if (!this.selectedItems.includes(composeId)) {\n      this.selectedItems.push(composeId);\n      this.changeState(event, 'active');\n    } else {\n      this.selectedItems = this.selectedItems.filter((item) => item !== composeId);\n    }\n  };\n\n  /**\n   * <zh/> \n   *\n   * <en/> Refresh the status of the legend element\n   */\n  public updateElement() {\n    if (!this.category) return;\n\n    this.category.update({\n      itemMarkerOpacity: ({ id }) => {\n        if (!this.selectedItems.length || this.selectedItems.includes(id)) return 1;\n        return 0.5;\n      },\n      itemLabelOpacity: ({ id }) => {\n        if (!this.selectedItems.length || this.selectedItems.includes(id)) return 1;\n        return 0.5;\n      },\n    });\n  }\n\n  private setFieldMap = (field: string, id: ID, type: ElementType) => {\n    if (!field) return;\n    const map = this.fieldMap[type];\n    if (!map) return;\n    if (!map.has(field)) {\n      map.set(field, [id]);\n    } else {\n      const ids = map.get(field);\n      if (ids) {\n        ids.push(id);\n        map.set(field, ids);\n      }\n    }\n  };\n\n  private getEvents = () => {\n    return {\n      mouseenter: this.mouseenter,\n      mouseleave: this.mouseleave,\n      click: this.click,\n    };\n  };\n\n  protected getMarkerData = (field: string | ((item: ElementDatum) => string), elementType: ElementType) => {\n    if (!field) return [];\n    const { model, element } = this.context;\n    const { nodes, edges, combos } = model.getData();\n    const items: { [key: string]: Datum } = {};\n\n    const getField = (item: ElementDatum) => {\n      if (isFunction(field)) return field(item);\n      return field;\n    };\n\n    const defaultType = {\n      node: 'circle',\n      edge: 'line',\n      combo: 'rect',\n    };\n\n    //  G6 element  components \n    // Used to convert G6 element to types supported by components\n    const markerMapping: { [key: string]: string } = {\n      circle: 'circle',\n      ellipse: 'circle', //  components  ellipse\n      image: 'bowtie',\n      rect: 'square',\n      star: 'cross',\n      triangle: 'triangle',\n      diamond: 'diamond',\n      cubic: 'dot',\n      line: 'hyphen',\n      polyline: 'hyphen',\n      quadratic: 'hv',\n      'cubic-horizontal': 'hyphen',\n      'cubic-vertical': 'line',\n    };\n\n    const getElementStyle = (type: ElementType, datum: ElementDatum) => {\n      const style = element?.getElementComputedStyle(type, datum);\n      return style;\n    };\n\n    const getElementModel = (data: ElementDatum[], type: ElementType) => {\n      data.forEach((item) => {\n        const { id } = item;\n        const value = get(item, ['data', getField(item)]);\n        const marker = element?.getElementType(type, item) || 'circle';\n        const style = getElementStyle(type, item);\n        const color = (type === 'edge' ? style?.stroke : style?.fill) || '#1783ff';\n\n        if (id && value && value.replace(/\\s+/g, '')) {\n          this.setFieldMap(value, id, type);\n          if (!items[value]) {\n            items[value] = {\n              id: `${type}__${id}`,\n              label: value,\n              marker: markerMapping[marker] || defaultType[type],\n              elementType: type,\n              lineWidth: 1,\n              stroke: color,\n              fill: color,\n            };\n          }\n        }\n      });\n    };\n\n    switch (elementType) {\n      case 'node':\n        getElementModel(nodes, 'node');\n        break;\n      case 'edge':\n        getElementModel(edges, 'edge');\n        break;\n      case 'combo':\n        getElementModel(combos, 'combo');\n        break;\n      default:\n        return [];\n    }\n\n    return Object.values(items);\n  };\n\n  private upsertCanvas() {\n    if (this.canvas) return this.canvas;\n\n    const graphCanvas = this.context.canvas;\n    const [canvasWidth, canvasHeight] = graphCanvas.getSize();\n\n    const { width = canvasWidth, height = canvasHeight, position, container, containerStyle, className } = this.options;\n    const [$container, canvas] = createPluginCanvas({\n      width,\n      height,\n      graphCanvas,\n      container,\n      containerStyle,\n      placement: position,\n      className: 'legend',\n    });\n\n    this.container = $container;\n    if (className) $container.classList.add(className);\n    this.canvas = canvas;\n\n    return this.canvas;\n  }\n\n  private createElement = () => {\n    if (this.draw) {\n      this.updateElement();\n      return;\n    }\n    const {\n      width,\n      height,\n      nodeField,\n      edgeField,\n      comboField,\n      trigger,\n      position,\n      container,\n      containerStyle,\n      className,\n      ...rest\n    } = this.options;\n    const nodeItems = this.getMarkerData(nodeField, 'node');\n    const edgeItems = this.getMarkerData(edgeField, 'edge');\n    const comboItems = this.getMarkerData(comboField, 'combo');\n    const items = [...nodeItems, ...comboItems, ...edgeItems];\n\n    const categoryStyle = Object.assign(\n      {\n        width,\n        height,\n        data: items,\n        itemMarkerLineWidth: ({ lineWidth }: Datum) => lineWidth,\n        itemMarker: ({ marker }: Datum) => marker,\n        itemMarkerStroke: ({ stroke }: Datum) => stroke,\n        itemMarkerFill: ({ fill }: Datum) => fill,\n        gridCol: nodeItems.length,\n      },\n      rest,\n      this.getEvents(),\n    );\n\n    const category = new Category({\n      className: 'legend',\n      style: categoryStyle,\n    });\n    this.category = category;\n\n    const canvas = this.upsertCanvas();\n    canvas.appendChild(category);\n\n    this.draw = true;\n  };\n\n  /**\n   * <zh/>\n   *\n   * <en/> Destroy the legend\n   * @internal\n   */\n  public destroy(): void {\n    this.clear();\n    this.context.graph.off(GraphEvent.AFTER_DRAW, this.createElement);\n    super.destroy();\n  }\n}\n", "import { Canvas, DisplayObject, IRenderer, Landmark } from '@antv/g';\nimport { debounce, throttle } from '@antv/util';\nimport { GraphEvent } from '../../constants';\nimport type { RuntimeContext } from '../../runtime/types';\nimport { GraphData } from '../../spec';\nimport type { ElementDatum, ElementType, IGraphLifeCycleEvent, Padding, Placement, Vector3 } from '../../types';\nimport { isVisible } from '../../utils/element';\nimport { idOf } from '../../utils/id';\nimport { parsePadding } from '../../utils/padding';\nimport { toPointObject } from '../../utils/point';\nimport type { BasePluginOptions } from '../base-plugin';\nimport { BasePlugin } from '../base-plugin';\nimport { createPluginCanvas } from '../utils/canvas';\n\n/**\n * <zh/> \n *\n * <en/> Minimap plugin options\n */\nexport interface MinimapOptions extends BasePluginOptions {\n  /**\n   * <zh/> \n   *\n   * <en/> Width and height\n   * @defaultValue [240, 160]\n   */\n  size?: [number, number];\n  /**\n   * <zh/> \n   *\n   * <en/> Padding\n   * @defaultValue 10\n   */\n  padding?: Padding;\n  /**\n   * <zh/> \n   *\n   * <en/> The position of the minimap relative to the canvas\n   * @defaultValue 'right-bottom'\n   */\n  position?: Placement;\n  /**\n   * <zh/> \n   *\n   * <en/> Filter, used to filter elements that do not need to be displayed\n   * @param id - <zh/>  id | <en/> The id of the element\n   * @param elementType - <zh/>  | <en/> The type of the element\n   * @returns <zh/>  | <en/> Whether to display\n   */\n  filter?: (id: string, elementType: ElementType) => boolean;\n  /**\n   * <zh/> \n   *\n   * <en/> The method of generating the thumbnail of the element\n   * @defaultValue 'key'\n   * @remarks\n   * <zh/>\n   * - 'key' \n   * - 'icon'  icon \n   * -  https://g6.antv.antgroup.com/manual/element/node/base-node#style\n   * -  [id, , ]\n   *\n   * <en/>\n   * - 'key' uses the key shape of the element as the thumbnail shape\n   * - 'icon' uses the icon shape of the element as the thumbnail shape\n   * - more shape name see https://g6.antv.antgroup.com/manual/element/node/base-node#style\n   * - You can also pass in a function that receives the [id, type of the element, element] and returns a custom shape\n   */\n  shape?: string | 'key' | 'icon' | ((id: string, elementType: ElementType, element: DisplayObject) => DisplayObject);\n  /**\n   * <zh/> \n   *\n   * <en/> The class name of the minimap canvas, which does not take effect when an external container is passed in\n   */\n  className?: string;\n  /**\n   * <zh/>  Graph \n   *\n   * <en/> The container where the minimap is mounted, if not, it will be mounted to the container where the Graph is located\n   */\n  container?: HTMLElement | string;\n  /**\n   * <zh/> \n   *\n   * <en/> The style of the minimap container, which does not take effect when an external container is passed in\n   */\n  containerStyle?: Partial<CSSStyleDeclaration>;\n  /**\n   * <zh/> \n   *\n   * <en/> The style of the mask\n   */\n  maskStyle?: Partial<CSSStyleDeclaration>;\n  /**\n   * <zh/>  Canvas \n   *\n   * <en/> Renderer, default to use Canvas renderer\n   */\n  renderer?: IRenderer;\n  /**\n   * <zh/> ()\n   *\n   * <en/> Delay update time(ms), used for performance optimization\n   * @defaultValue 128\n   */\n  delay?: number;\n}\n\n/**\n * <zh/> \n *\n * <en/> Minimap plugin\n */\nexport class Minimap extends BasePlugin<MinimapOptions> {\n  static defaultOptions: Partial<MinimapOptions> = {\n    size: [240, 160],\n    shape: 'key',\n    padding: 10,\n    position: 'right-bottom',\n    maskStyle: {\n      border: '1px solid #ddd',\n      background: 'rgba(0, 0, 0, 0.1)',\n    },\n    containerStyle: {\n      border: '1px solid #ddd',\n      background: '#fff',\n    },\n    delay: 128,\n  };\n\n  private canvas!: Canvas;\n\n  constructor(context: RuntimeContext, options: MinimapOptions) {\n    super(context, Object.assign({}, Minimap.defaultOptions, options));\n    this.setOnRender();\n    this.bindEvents();\n  }\n\n  public update(options: Partial<MinimapOptions>): void {\n    this.unbindEvents();\n    super.update(options);\n    if ('delay' in options) this.setOnRender();\n    this.bindEvents();\n  }\n\n  private setOnRender() {\n    this.onRender = debounce(() => {\n      this.renderMinimap();\n      this.renderMask();\n    }, this.options.delay);\n  }\n\n  private bindEvents() {\n    const { graph } = this.context;\n    graph.on(GraphEvent.AFTER_DRAW, this.onDraw);\n    graph.on(GraphEvent.AFTER_RENDER, this.onRender);\n    graph.on(GraphEvent.AFTER_ANIMATE, this.onRender);\n    graph.on(GraphEvent.AFTER_TRANSFORM, this.onTransform);\n  }\n\n  private unbindEvents() {\n    const { graph } = this.context;\n    graph.off(GraphEvent.AFTER_DRAW, this.onDraw);\n    graph.off(GraphEvent.AFTER_RENDER, this.onRender);\n    graph.off(GraphEvent.AFTER_ANIMATE, this.onRender);\n    graph.off(GraphEvent.AFTER_TRANSFORM, this.onTransform);\n  }\n\n  private onDraw = (event: IGraphLifeCycleEvent) => {\n    if (event?.data?.render) return;\n    this.onRender();\n  };\n\n  private onRender!: () => void;\n\n  /**\n   * <zh/> \n   *\n   * <en/> Create or update the minimap\n   */\n  private renderMinimap() {\n    const data = this.getElements();\n    const canvas = this.initCanvas();\n    this.setShapes(canvas, data);\n  }\n\n  private getElements(): Required<GraphData> {\n    const { filter } = this.options;\n    const { model, element } = this.context;\n    const originData = model.getData();\n    //elementMap\n    const data = {\n      nodes: originData.nodes.filter((node) => element?.getElement(idOf(node))),\n      edges: originData.edges.filter((edge) => {\n        const edgeElement = element?.getElement(idOf(edge));\n        // \n        return edgeElement && isVisible(edgeElement);\n      }),\n      combos: originData.combos.filter((combo) => element?.getElement(idOf(combo))),\n    };\n\n    if (!filter) return data;\n\n    const { nodes, edges, combos } = data;\n\n    return {\n      nodes: nodes.filter((node) => filter(idOf(node), 'node')),\n      edges: edges.filter((edge) => filter(idOf(edge), 'edge')),\n      combos: combos.filter((combo) => filter(idOf(combo), 'combo')),\n    };\n  }\n\n  private setShapes(canvas: Canvas, data: Required<GraphData>) {\n    const { nodes, edges, combos } = data;\n\n    const { shape } = this.options;\n    const { element } = this.context;\n\n    const iterate = (datum: ElementDatum, elType: ElementType) => {\n      const id = idOf(datum);\n      const target = element?.getElement(id);\n      if (!target) return;\n\n      const keyShape = target.getShape('key');\n      let cloneShape: DisplayObject;\n\n      if (typeof shape === 'string') {\n        const shapeName = shape;\n        const miniShape = target.getShape(shapeName);\n        cloneShape = miniShape.cloneNode();\n      } else {\n        const miniShape = shape(id, elType, target);\n        if (miniShape === target) {\n          cloneShape = miniShape.cloneNode(true);\n        } else {\n          cloneShape = miniShape;\n        }\n      }\n\n      /**\n       *  keyShape \n       *  keyShape \n       * \n       */\n      cloneShape.setPosition(keyShape.getPosition());\n      // keep zIndex / id\n      if (target.style.zIndex) cloneShape.style.zIndex = target.style.zIndex;\n      cloneShape.id = target.id;\n\n      canvas.appendChild(cloneShape);\n    };\n\n    canvas.removeChildren();\n\n    //  / Note the execution order\n    edges.forEach((datum) => iterate(datum, 'edge'));\n    combos.forEach((datum) => iterate(datum, 'combo'));\n    nodes.forEach((datum) => iterate(datum, 'node'));\n  }\n\n  private container!: HTMLElement;\n\n  private initCanvas() {\n    const {\n      renderer,\n      size: [width, height],\n    } = this.options;\n\n    if (this.canvas) {\n      const { width: w, height: h } = this.canvas.getConfig();\n      if (width !== w || height !== h) this.canvas.resize(width, height);\n      if (renderer) this.canvas.setRenderer(renderer);\n    } else {\n      const { className, position, container, containerStyle } = this.options;\n\n      const [$container, canvas] = createPluginCanvas({\n        renderer,\n        width,\n        height,\n        placement: position,\n        className: 'minimap',\n        container,\n        containerStyle,\n        graphCanvas: this.context.canvas,\n      });\n\n      if (className) $container.classList.add(className);\n\n      this.container = $container;\n      this.canvas = canvas;\n    }\n\n    this.setCamera();\n\n    return this.canvas;\n  }\n\n  private landmarkMap = new Map<string, Landmark>();\n\n  private createLandmark(position: Vector3, focalPoint: Vector3, zoom: number) {\n    const key = `${position.join(',')}-${focalPoint.join(',')}-${zoom}`;\n\n    if (this.landmarkMap.has(key)) return this.landmarkMap.get(key)!;\n\n    const camera = this.canvas.getCamera();\n    const landmark = camera.createLandmark(key, {\n      position,\n      focalPoint,\n      zoom,\n    });\n    this.landmarkMap.set(key, landmark);\n    return landmark;\n  }\n\n  private setCamera() {\n    const { canvas } = this.context;\n\n    const camera = this.canvas?.getCamera();\n    if (!camera) return;\n\n    const {\n      size: [minimapWidth, minimapHeight],\n      padding,\n    } = this.options;\n    const [top, right, bottom, left] = parsePadding(padding);\n    const { min: boundsMin, max: boundsMax, center } = canvas.getBounds('elements');\n    const boundsWidth = boundsMax[0] - boundsMin[0];\n    const boundsHeight = boundsMax[1] - boundsMin[1];\n\n    const availableWidth = minimapWidth - left - right;\n    const availableHeight = minimapHeight - top - bottom;\n\n    const scaleX = availableWidth / boundsWidth;\n    const scaleY = availableHeight / boundsHeight;\n    const scale = Math.min(scaleX, scaleY);\n\n    const landmark = this.createLandmark(center, center, scale);\n    camera.gotoLandmark(landmark, 0);\n  }\n\n  private mask: HTMLElement | null = null;\n\n  private get maskBBox(): [number, number, number, number] {\n    const { canvas: graphCanvas } = this.context;\n    const canvasSize = graphCanvas.getSize();\n    const canvasMin = graphCanvas.getCanvasByViewport([0, 0]);\n    const canvasMax = graphCanvas.getCanvasByViewport(canvasSize);\n\n    const maskMin = this.canvas.canvas2Viewport(toPointObject(canvasMin));\n    const maskMax = this.canvas.canvas2Viewport(toPointObject(canvasMax));\n\n    const width = maskMax.x - maskMin.x;\n    const height = maskMax.y - maskMin.y;\n\n    return [maskMin.x, maskMin.y, width, height];\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Calculate the bounding box of the mask\n   * @returns <zh/>  | <en/> Mask bounding box\n   */\n  private calculateMaskBBox(): [number, number, number, number] {\n    const {\n      size: [minimapWidth, minimapHeight],\n    } = this.options;\n\n    let [x, y, width, height] = this.maskBBox;\n\n    // clamp x, y, width, height\n    if (x < 0) {\n      width = upper(width + x, minimapWidth);\n      x = 0;\n    }\n    if (y < 0) {\n      height = upper(height + y, minimapHeight);\n      y = 0;\n    }\n    if (x + width > minimapWidth) width = lower(minimapWidth - x, 0);\n    if (y + height > minimapHeight) height = lower(minimapHeight - y, 0);\n\n    return [upper(x, minimapWidth), upper(y, minimapHeight), lower(width, 0), lower(height, 0)];\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Create or update the mask\n   */\n  private renderMask() {\n    const { maskStyle } = this.options;\n\n    if (!this.mask) {\n      this.mask = document.createElement('div');\n      this.mask.addEventListener('pointerdown', this.onMaskDragStart);\n      this.mask.draggable = true;\n      this.mask.addEventListener('dragstart', (event) => event.preventDefault && event.preventDefault());\n    }\n\n    this.container.appendChild(this.mask);\n\n    Object.assign(this.mask.style, {\n      ...maskStyle,\n      cursor: 'move',\n      position: 'absolute',\n      pointerEvents: 'auto',\n    });\n\n    this.updateMask();\n  }\n\n  private isMaskDragging = false;\n\n  private onMaskDragStart = (event: PointerEvent) => {\n    if (!this.mask) return;\n    this.isMaskDragging = true;\n    this.mask.setPointerCapture(event.pointerId);\n    this.mask.addEventListener('pointermove', this.onMaskDrag);\n    this.mask.addEventListener('pointerup', this.onMaskDragEnd);\n    this.mask.addEventListener('pointercancel', this.onMaskDragEnd);\n  };\n\n  private onMaskDrag = (event: PointerEvent) => {\n    if (!this.mask || !this.isMaskDragging) return;\n    const {\n      size: [minimapWidth, minimapHeight],\n    } = this.options;\n    const { movementX, movementY } = event;\n\n    const { left, top, width: w, height: h } = this.mask.style;\n    const [, , fullWidth, fullHeight] = this.maskBBox;\n\n    let x = parseInt(left) + movementX;\n    let y = parseInt(top) + movementY;\n    let width = parseInt(w);\n    let height = parseInt(h);\n\n    //  mask  minimap \n    // Ensure that the mask is inside the minimap\n    if (x < 0) x = 0;\n    if (y < 0) y = 0;\n    if (x + width > minimapWidth) x = lower(minimapWidth - width, 0);\n    if (y + height > minimapHeight) y = lower(minimapHeight - height, 0);\n\n    //  mask  mask \n    // When dragging the canvas causes the mask to shrink, dragging the mask will restore it to its actual size\n    if (width < fullWidth) {\n      if (movementX > 0) {\n        x = lower(x - movementX, 0);\n        width = upper(width + movementX, minimapWidth);\n      } else if (movementX < 0) width = upper(width - movementX, minimapWidth);\n    }\n    if (height < fullHeight) {\n      if (movementY > 0) {\n        y = lower(y - movementY, 0);\n        height = upper(height + movementY, minimapHeight);\n      } else if (movementY < 0) height = upper(height - movementY, minimapHeight);\n    }\n\n    Object.assign(this.mask.style, {\n      left: x + 'px',\n      top: y + 'px',\n      width: width + 'px',\n      height: height + 'px',\n    });\n\n    //  movement \n    // Move relative to movement\n    const deltaX = parseInt(left) - x;\n    const deltaY = parseInt(top) - y;\n    if (deltaX === 0 && deltaY === 0) return;\n\n    const zoom1 = this.context.canvas.getCamera().getZoom();\n    const zoom2 = this.canvas.getCamera().getZoom();\n    const ratio = zoom1 / zoom2;\n\n    this.context.graph.translateBy([deltaX * ratio, deltaY * ratio], false);\n  };\n\n  private onMaskDragEnd = (event: PointerEvent) => {\n    if (!this.mask) return;\n    this.isMaskDragging = false;\n    this.mask.releasePointerCapture(event.pointerId);\n    this.mask.removeEventListener('pointermove', this.onMaskDrag);\n    this.mask.removeEventListener('pointerup', this.onMaskDragEnd);\n    this.mask.removeEventListener('pointercancel', this.onMaskDragEnd);\n  };\n\n  private onTransform = throttle(\n    () => {\n      if (this.isMaskDragging) return;\n      this.updateMask();\n      this.setCamera();\n    },\n    32,\n    { leading: true },\n  ) as () => void;\n\n  private updateMask() {\n    if (!this.mask) return;\n    const [x, y, width, height] = this.calculateMaskBBox();\n\n    Object.assign(this.mask.style, {\n      top: y + 'px',\n      left: x + 'px',\n      width: width + 'px',\n      height: height + 'px',\n    });\n  }\n\n  public destroy(): void {\n    this.unbindEvents();\n    this.canvas?.destroy();\n    this.mask?.remove();\n    this.container?.remove();\n    super.destroy();\n  }\n}\n\nconst upper = (value: number, max: number) => Math.min(value, max);\n\nconst lower = (value: number, min: number) => Math.max(value, min);\n", "import { AABB, BaseStyleProps, DisplayObject, Line, LineStyleProps } from '@antv/g';\nimport { isEqual } from '@antv/util';\nimport { NodeEvent } from '../../constants';\nimport type { RuntimeContext } from '../../runtime/types';\nimport type { ID, IDragEvent, Node } from '../../types';\nimport { isVisible } from '../../utils/element';\nimport { divide } from '../../utils/vector';\nimport type { BasePluginOptions } from '../base-plugin';\nimport { BasePlugin } from '../base-plugin';\n\n/**\n * <zh/> \n *\n * <en/> Snapline plugin options\n */\nexport interface SnaplineOptions extends BasePluginOptions {\n  /**\n   * <zh/>  tolerance \n   *\n   * <en/> The alignment accuracy, that is, when the distance between the moved node and the target position is less than tolerance, the alignment line is displayed\n   * @defaultValue 5\n   */\n  tolerance?: number;\n  /**\n   * <zh/> [0, Infinity]\n   *\n   * <en/> The extension distance of the snapline. The value range is [0, Infinity]\n   * @defaultValue 20\n   */\n  offset?: number;\n  /**\n   * <zh/> \n   *\n   * <en/> Whether to enable automatic adsorption\n   * @defaultValue true\n   */\n  autoSnap?: boolean;\n  /**\n   * <zh/> \n   *\n   * <en/> Specifies which shape on the element to use as the reference shape\n   * @defaultValue `'key'`\n   * @remarks\n   * <zh/>\n   * - 'key' \n   * - \n   *\n   * <en/>\n   * - `'key'` uses the key shape of the element as the reference shape\n   * - You can also pass in a function that receives the element and returns a shape\n   */\n  shape?: string | ((node: Node) => DisplayObject);\n  /**\n   * <zh/> \n   *\n   * <en/> Vertical snapline style\n   * @defaultValue `{ stroke: '#1783FF' }`\n   */\n  verticalLineStyle?: BaseStyleProps;\n  /**\n   * <zh/> \n   *\n   * <en/> Horizontal snapline style\n   * @defaultValue `{ stroke: '#1783FF' }`\n   */\n  horizontalLineStyle?: BaseStyleProps;\n  /**\n   * <zh/> \n   *\n   * <en/> Filter, used to filter nodes that do not need to be used as references\n   * @defaultValue `() => true`\n   */\n  filter?: (node: Node) => boolean;\n}\n\nconst defaultLineStyle: LineStyleProps = { x1: 0, y1: 0, x2: 0, y2: 0, visibility: 'hidden' };\n\ntype Metadata = {\n  verticalX: number | null;\n  verticalMinY: number | null;\n  verticalMaxY: number | null;\n  horizontalY: number | null;\n  horizontalMinX: number | null;\n  horizontalMaxX: number | null;\n};\n\n/**\n * <zh/> \n *\n * <en/> Snapline plugin\n */\nexport class Snapline extends BasePlugin<SnaplineOptions> {\n  static defaultOptions: Partial<SnaplineOptions> = {\n    tolerance: 5,\n    offset: 20,\n    autoSnap: true,\n    shape: 'key',\n    verticalLineStyle: { stroke: '#1783FF' },\n    horizontalLineStyle: { stroke: '#1783FF' },\n    filter: () => true,\n  };\n\n  private horizontalLine!: Line;\n  private verticalLine!: Line;\n\n  constructor(context: RuntimeContext, options: SnaplineOptions) {\n    super(context, Object.assign({}, Snapline.defaultOptions, options));\n    this.bindEvents();\n  }\n\n  private initSnapline = () => {\n    const canvas = this.context.canvas.getLayer('transient');\n\n    if (!this.horizontalLine) {\n      this.horizontalLine = canvas.appendChild(\n        new Line({ style: { ...defaultLineStyle, ...this.options.horizontalLineStyle } }),\n      );\n    }\n\n    if (!this.verticalLine) {\n      this.verticalLine = canvas.appendChild(\n        new Line({ style: { ...defaultLineStyle, ...this.options.verticalLineStyle } }),\n      );\n    }\n  };\n\n  private getNodes(): Node[] {\n    const { filter } = this.options;\n    const allNodes = this.context.element?.getNodes() || [];\n\n    // \n    // Nodes that are out of the canvas viewport range, invisible are not considered\n    const nodes = allNodes.filter((node) => {\n      return isVisible(node) && this.context.viewport?.isInViewport(node.getRenderBounds());\n    });\n\n    if (!filter) return nodes;\n\n    return nodes.filter((node) => filter(node));\n  }\n\n  private hideSnapline() {\n    this.horizontalLine.style.visibility = 'hidden';\n    this.verticalLine.style.visibility = 'hidden';\n  }\n\n  private getLineWidth(direction: 'horizontal' | 'vertical') {\n    const { lineWidth } = this.options[`${direction}LineStyle`] as LineStyleProps;\n    return +(lineWidth || defaultLineStyle.lineWidth || 1) / this.context.graph.getZoom();\n  }\n\n  private updateSnapline(metadata: Metadata) {\n    const { verticalX, verticalMinY, verticalMaxY, horizontalY, horizontalMinX, horizontalMaxX } = metadata;\n    const [canvasWidth, canvasHeight] = this.context.canvas.getSize();\n    const { offset } = this.options;\n\n    if (horizontalY !== null) {\n      Object.assign(this.horizontalLine.style, {\n        x1: offset === Infinity ? 0 : horizontalMinX! - offset,\n        y1: horizontalY,\n        x2: offset === Infinity ? canvasWidth : horizontalMaxX! + offset,\n        y2: horizontalY,\n        visibility: 'visible',\n        lineWidth: this.getLineWidth('horizontal'),\n      });\n    } else {\n      this.horizontalLine.style.visibility = 'hidden';\n    }\n\n    if (verticalX !== null) {\n      Object.assign(this.verticalLine.style, {\n        x1: verticalX,\n        y1: offset === Infinity ? 0 : verticalMinY! - offset,\n        x2: verticalX,\n        y2: offset === Infinity ? canvasHeight : verticalMaxY! + offset,\n        visibility: 'visible',\n        lineWidth: this.getLineWidth('vertical'),\n      });\n    } else {\n      this.verticalLine.style.visibility = 'hidden';\n    }\n  }\n\n  private isHorizontalSticking = false;\n  private isVerticalSticking = false;\n  private enableStick = true;\n\n  private autoSnapToLine = async (nodeId: ID, bbox: AABB, metadata: Metadata) => {\n    const { verticalX, horizontalY } = metadata;\n    const { tolerance } = this.options;\n    const {\n      min: [nodeMinX, nodeMinY],\n      max: [nodeMaxX, nodeMaxY],\n      center: [nodeCenterX, nodeCenterY],\n    } = bbox;\n\n    let dx = 0;\n    let dy = 0;\n    if (verticalX !== null) {\n      if (distance(nodeMaxX, verticalX) < tolerance) dx = verticalX - nodeMaxX;\n      if (distance(nodeMinX, verticalX) < tolerance) dx = verticalX - nodeMinX;\n      if (distance(nodeCenterX, verticalX) < tolerance) dx = verticalX - nodeCenterX;\n\n      if (dx !== 0) this.isVerticalSticking = true;\n    }\n    if (horizontalY !== null) {\n      if (distance(nodeMaxY, horizontalY) < tolerance) dy = horizontalY - nodeMaxY;\n      if (distance(nodeMinY, horizontalY) < tolerance) dy = horizontalY - nodeMinY;\n      if (distance(nodeCenterY, horizontalY) < tolerance) dy = horizontalY - nodeCenterY;\n\n      if (dy !== 0) this.isHorizontalSticking = true;\n    }\n    if (dx !== 0 || dy !== 0) {\n      // Stick to the line\n      await this.context.graph.translateElementBy({ [nodeId]: [dx, dy] }, false);\n    }\n  };\n\n  /**\n   * Get the delta of the drag\n   * @param event - drag event object\n   * @returns delta\n   * @internal\n   */\n  protected getDelta(event: IDragEvent<Node>) {\n    const zoom = this.context.graph.getZoom();\n    return divide([event.dx, event.dy], zoom);\n  }\n\n  private enableSnap = (event: IDragEvent<Node>) => {\n    const { target } = event;\n\n    const threshold = 0.5;\n\n    if (this.isHorizontalSticking || this.isVerticalSticking) {\n      const [dx, dy] = this.getDelta(event);\n      if (\n        this.isHorizontalSticking &&\n        this.isVerticalSticking &&\n        Math.abs(dx) <= threshold &&\n        Math.abs(dy) <= threshold\n      ) {\n        this.context.graph.translateElementBy({ [target.id]: [-dx, -dy] }, false);\n        return false;\n      } else if (this.isHorizontalSticking && Math.abs(dy) <= threshold) {\n        this.context.graph.translateElementBy({ [target.id]: [0, -dy] }, false);\n        return false;\n      } else if (this.isVerticalSticking && Math.abs(dx) <= threshold) {\n        this.context.graph.translateElementBy({ [target.id]: [-dx, 0] }, false);\n        return false;\n      } else {\n        this.isHorizontalSticking = false;\n        this.isVerticalSticking = false;\n        this.enableStick = false;\n        setTimeout(() => {\n          this.enableStick = true;\n        }, 200);\n      }\n    }\n\n    return this.enableStick;\n  };\n\n  private calcSnaplineMetadata = (target: Node, nodeBBox: AABB): Metadata => {\n    const { tolerance, shape } = this.options;\n\n    const {\n      min: [nodeMinX, nodeMinY],\n      max: [nodeMaxX, nodeMaxY],\n      center: [nodeCenterX, nodeCenterY],\n    } = nodeBBox;\n\n    let verticalX: number | null = null;\n    let verticalMinY: number | null = null;\n    let verticalMaxY: number | null = null;\n    let horizontalY: number | null = null;\n    let horizontalMinX: number | null = null;\n    let horizontalMaxX: number | null = null;\n\n    this.getNodes().some((snapNode: Node) => {\n      if (isEqual(target.id, snapNode.id)) return false;\n\n      const snapBBox = getShape(snapNode, shape).getRenderBounds();\n      const {\n        min: [snapMinX, snapMinY],\n        max: [snapMaxX, snapMaxY],\n        center: [snapCenterX, snapCenterY],\n      } = snapBBox;\n\n      if (verticalX === null) {\n        if (distance(snapCenterX, nodeCenterX) < tolerance) {\n          verticalX = snapCenterX;\n        } else if (distance(snapMinX, nodeMinX) < tolerance) {\n          verticalX = snapMinX;\n        } else if (distance(snapMinX, nodeMaxX) < tolerance) {\n          verticalX = snapMinX;\n        } else if (distance(snapMaxX, nodeMaxX) < tolerance) {\n          verticalX = snapMaxX;\n        } else if (distance(snapMaxX, nodeMinX) < tolerance) {\n          verticalX = snapMaxX;\n        }\n\n        if (verticalX !== null) {\n          verticalMinY = Math.min(snapMinY, nodeMinY);\n          verticalMaxY = Math.max(snapMaxY, nodeMaxY);\n        }\n      }\n\n      if (horizontalY === null) {\n        if (distance(snapCenterY, nodeCenterY) < tolerance) {\n          horizontalY = snapCenterY;\n        } else if (distance(snapMinY, nodeMinY) < tolerance) {\n          horizontalY = snapMinY;\n        } else if (distance(snapMinY, nodeMaxY) < tolerance) {\n          horizontalY = snapMinY;\n        } else if (distance(snapMaxY, nodeMaxY) < tolerance) {\n          horizontalY = snapMaxY;\n        } else if (distance(snapMaxY, nodeMinY) < tolerance) {\n          horizontalY = snapMaxY;\n        }\n\n        if (horizontalY !== null) {\n          horizontalMinX = Math.min(snapMinX, nodeMinX);\n          horizontalMaxX = Math.max(snapMaxX, nodeMaxX);\n        }\n      }\n\n      return verticalX !== null && horizontalY !== null;\n    });\n    return { verticalX, verticalMinY, verticalMaxY, horizontalY, horizontalMinX, horizontalMaxX };\n  };\n\n  protected onDragStart = () => {\n    this.initSnapline();\n  };\n\n  protected onDrag = async (event: IDragEvent<Node>) => {\n    const { target } = event;\n\n    if (this.options.autoSnap) {\n      const enable = this.enableSnap(event);\n      if (!enable) return;\n    }\n\n    const nodeBBox = getShape(target, this.options.shape).getRenderBounds();\n    const metadata = this.calcSnaplineMetadata(target, nodeBBox);\n\n    this.hideSnapline();\n\n    if (metadata.verticalX !== null || metadata.horizontalY !== null) {\n      this.updateSnapline(metadata);\n    }\n\n    if (this.options.autoSnap) {\n      await this.autoSnapToLine(target.id, nodeBBox, metadata);\n    }\n  };\n\n  protected onDragEnd = () => {\n    this.hideSnapline();\n  };\n\n  private async bindEvents() {\n    const { graph } = this.context;\n    graph.on(NodeEvent.DRAG_START, this.onDragStart);\n    graph.on(NodeEvent.DRAG, this.onDrag);\n    graph.on(NodeEvent.DRAG_END, this.onDragEnd);\n  }\n\n  private unbindEvents() {\n    const { graph } = this.context;\n    graph.off(NodeEvent.DRAG_START, this.onDragStart);\n    graph.off(NodeEvent.DRAG, this.onDrag);\n    graph.off(NodeEvent.DRAG_END, this.onDragEnd);\n  }\n\n  private destroyElements() {\n    this.horizontalLine?.destroy();\n    this.verticalLine?.destroy();\n  }\n\n  public destroy() {\n    this.destroyElements();\n    this.unbindEvents();\n    super.destroy();\n  }\n}\n\nconst distance = (a: number, b: number) => Math.abs(a - b);\n\nconst getShape = (node: Node, shapeFilter: string | ((node: Node) => DisplayObject)) => {\n  return typeof shapeFilter === 'function' ? shapeFilter(node) : node.getShape(shapeFilter);\n};\n", "import { Timebar as TimebarComponent } from '@antv/component';\nimport { Canvas } from '@antv/g';\nimport { isArray, isDate, isNumber } from '@antv/util';\nimport { idOf } from '../utils/id';\nimport { parsePadding } from '../utils/padding';\nimport { BasePlugin } from './base-plugin';\n\nimport type { TimebarStyleProps as TimebarComponentStyleProps } from '@antv/component';\nimport type { RuntimeContext } from '../runtime/types';\nimport type { GraphData } from '../spec';\nimport type { ElementDatum, ElementType, ID, Padding } from '../types';\nimport type { BasePluginOptions } from './base-plugin';\nimport { createPluginCanvas } from './utils/canvas';\n\nconst prospectiveTimeKeys = ['timestamp', 'time', 'date', 'datetime'];\n\n/**\n * <zh/> Timebar \n * <en/> The options of the Timebar.\n */\nexport interface TimebarOptions extends BasePluginOptions {\n  /**\n   * <zh/>  DOM \n   *\n   * <en/> The class name appended to the menu DOM for custom styles\n   * @defaultValue 'g6-timebar'\n   */\n  className?: string;\n  /**\n   * <zh/> X \n   *\n   * <en/> X position\n   * @remarks\n   * <zh/>  `position` \n   *\n   * <en/> `position` will be invalidated after setting `x`\n   */\n  x?: number;\n  /**\n   * <zh/> Y \n   *\n   * <en/> Y position\n   * @remarks\n   * <zh/>  `position` \n   *\n   * <en/> `position` will be invalidated after setting `y`\n   */\n  y?: number;\n  /**\n   * <zh/> \n   *\n   * <en/> Timebar width\n   * @defaultValue 450\n   */\n  width?: number;\n  /**\n   * <zh/> \n   *\n   * <en/> Timebar height\n   * @defaultValue 60\n   */\n  height?: number;\n  /**\n   * <zh/> Timebar \n   *\n   * <en/> Timebar location\n   * @defaultValue 'bottom'\n   */\n  position?: 'bottom' | 'top';\n  /**\n   * <zh/> \n   *\n   * <en/> Padding\n   */\n  padding?: Padding;\n  /**\n   * <zh/> \n   *\n   * <en/> Get element time\n   */\n  getTime?: (datum: ElementDatum) => number;\n  /**\n   * <zh/> \n   *\n   * <en/> Time data\n   * @remarks\n   * <zh/> `timebarType`  `'chart'`  `value` \n   *\n   * <en/> When `timebarType` is `'chart'`, you need to pass in the `value` field as chart data\n   */\n  data: number[] | { time: number; value: number }[];\n  /**\n   * <zh/> Timebar \n   * - `'time'`: \n   * - `'chart'`: \n   *\n   * <en/> Timebar Displays the type\n   * - `'time'`: Display as a timeline\n   * - `'chart'`: Display as a trend chart\n   * @defaultValue 'time'\n   */\n  timebarType?: 'time' | 'chart';\n  /**\n   * <zh/> \n   *\n   * <en/> Filter element types\n   */\n  elementTypes?: ElementType[];\n  /**\n   * <zh/> \n   *  - `'modify'`: \n   *  - `'visibility'`: \n   *\n   * <en/> Filter mode\n   *  - `'modify'`: Filter by modifying the graph data.\n   *  - `'visibility'`: Filter by modifying element visibility\n   * @defaultValue 'modify'\n   */\n  mode?: 'modify' | 'visibility';\n  /**\n   * <zh/> \n   *\n   * <en/> Current time value\n   */\n  values?: number | [number, number] | Date | [Date, Date];\n  /**\n   * <zh/> \n   *\n   * <en/> Custom time formatting in chart mode\n   */\n  labelFormatter?: (time: number | Date) => string;\n  /**\n   * <zh/> \n   *\n   * <en/> Whether to loop\n   * @defaultValue false\n   */\n  loop?: boolean;\n  /**\n   * <zh/> \n   *\n   * <en/> Callback executed when the time interval changes\n   */\n  onChange?: (values: number | [number, number]) => void;\n  /**\n   * <zh/> \n   *\n   * <en/> Callback executed when reset\n   */\n  onReset?: () => void;\n  /**\n   * <zh/> \n   *\n   * <en/> Callback executed when the playback speed changes\n   */\n  onSpeedChange?: (speed: number) => void;\n  /**\n   * <zh/> \n   *\n   * <en/> Callback executed when playback starts\n   */\n  onPlay?: () => void;\n  /**\n   * <zh/> \n   *\n   * <en/> Callback executed when paused\n   */\n  onPause?: () => void;\n  /**\n   * <zh/> \n   *\n   * <en/> Callback executed when backward\n   */\n  onBackward?: () => void;\n  /**\n   * <zh/> \n   *\n   * <en/> Callback executed when forward\n   */\n  onForward?: () => void;\n}\n\n/**\n * <zh/> \n *\n * <en/> Timebar\n */\nexport class Timebar extends BasePlugin<TimebarOptions> {\n  static defaultOptions: Partial<TimebarOptions> = {\n    position: 'bottom',\n    enable: true,\n    timebarType: 'time',\n    className: 'g6-timebar',\n    width: 450,\n    height: 60,\n    zIndex: 3,\n    elementTypes: ['node'],\n    padding: 10,\n    mode: 'modify',\n    getTime: (datum) => inferTime(datum, prospectiveTimeKeys, undefined),\n    loop: false,\n  };\n\n  private timebar?: TimebarComponent;\n\n  private canvas?: Canvas;\n\n  private container?: HTMLElement;\n\n  private originalData?: GraphData;\n\n  private get padding() {\n    return parsePadding(this.options.padding);\n  }\n\n  constructor(context: RuntimeContext, options: TimebarOptions) {\n    super(context, Object.assign({}, Timebar.defaultOptions, options));\n    this.backup();\n    this.upsertTimebar();\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Play\n   */\n  public play() {\n    this.timebar?.play();\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Pause\n   */\n  public pause() {\n    this.timebar?.pause();\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Forward\n   */\n  public forward() {\n    this.timebar?.forward();\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Backward\n   */\n  public backward() {\n    this.timebar?.backward();\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Reset\n   */\n  public reset() {\n    this.timebar?.reset();\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Update timebar configuration options\n   * @param options - <zh/>  | <en/> Options\n   * @internal\n   */\n  public update(options: Partial<TimebarOptions>) {\n    super.update(options);\n    this.backup();\n\n    this.upsertTimebar();\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Backup data\n   */\n  private backup() {\n    this.originalData = shallowCopy(this.context.graph.getData());\n  }\n\n  private upsertTimebar() {\n    const { canvas } = this.context;\n    const { onChange, timebarType, data, x, y, width, height, mode, ...restOptions } = this.options;\n    const canvasSize = canvas.getSize();\n    const [top] = this.padding;\n\n    this.upsertCanvas().ready.then(() => {\n      const style: TimebarComponentStyleProps = {\n        x: canvasSize[0] / 2 - width / 2,\n        y: top,\n        onChange: (value) => {\n          const range = (isArray(value) ? value : [value, value]).map((time) =>\n            isDate(time) ? time.getTime() : time,\n          ) as [number, number];\n\n          if (this.options.mode === 'modify') this.filterElements(range);\n          else this.hiddenElements(range);\n\n          onChange?.(range);\n        },\n        ...restOptions,\n        data: data.map((datum) => (isNumber(datum) ? { time: datum, value: 0 } : datum)),\n        width,\n        height,\n        type: timebarType,\n      };\n\n      if (!this.timebar) {\n        this.timebar = new TimebarComponent({ style });\n        this.canvas?.appendChild(this.timebar);\n      } else {\n        this.timebar.update(style);\n      }\n    });\n  }\n\n  private upsertCanvas() {\n    if (this.canvas) return this.canvas;\n\n    const { className, height, position } = this.options;\n    const graphCanvas = this.context.canvas;\n    const [width] = graphCanvas.getSize();\n    const [top, , bottom] = this.padding;\n\n    const [$container, canvas] = createPluginCanvas({\n      width,\n      height: height + top + bottom,\n      graphCanvas,\n      className: 'timebar',\n      placement: position,\n    });\n\n    this.container = $container;\n    if (className) $container.classList.add(className);\n    this.canvas = canvas;\n\n    return this.canvas;\n  }\n\n  private async filterElements(range: number | [number, number]) {\n    if (!this.originalData) return;\n    const { elementTypes, getTime } = this.options;\n    const { graph, element } = this.context;\n\n    const newData = shallowCopy(this.originalData);\n\n    elementTypes.forEach((type) => {\n      const key = `${type}s` as const;\n      newData[key] = (this.originalData![key] || []).filter((datum) => {\n        const time = getTime(datum);\n        if (match(time, range)) return true;\n        return false;\n      }) as any;\n    });\n\n    const nodeLikeIds = [...newData.nodes, ...newData.combos].map((datum) => idOf(datum));\n    newData.edges = newData.edges!.filter((edge) => {\n      const source = edge.source;\n      const target = edge.target;\n      return nodeLikeIds.includes(source) && nodeLikeIds.includes(target);\n    });\n\n    graph.setData(newData);\n    await element!.draw({ animation: false, silence: true })?.finished;\n  }\n\n  private hiddenElements(range: number | [number, number]) {\n    const { graph } = this.context;\n    const { elementTypes, getTime } = this.options;\n    const hideElementId: ID[] = [];\n    const showElementId: ID[] = [];\n\n    elementTypes.forEach((elementType) => {\n      const key = `${elementType}s` as const;\n      const elementData = this.originalData?.[key] || [];\n\n      elementData.forEach((elementDatum) => {\n        const id = idOf(elementDatum);\n        const time = getTime(elementDatum);\n        if (match(time, range)) showElementId.push(id);\n        else hideElementId.push(id);\n      });\n    });\n\n    graph.hideElement(hideElementId, false);\n    graph.showElement(showElementId, false);\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Destroy the timebar\n   * @internal\n   */\n  public destroy(): void {\n    const { graph } = this.context;\n    this.originalData && graph.setData({ ...this.originalData });\n    this.timebar?.destroy();\n    this.canvas?.destroy();\n    this.container?.remove();\n    this.originalData = undefined;\n    this.container = undefined;\n    this.timebar = undefined;\n    this.canvas = undefined;\n\n    super.destroy();\n  }\n}\n\nconst shallowCopy = (data: GraphData) => {\n  const { nodes = [], edges = [], combos = [] } = data;\n  return {\n    nodes: [...nodes],\n    edges: [...edges],\n    combos: [...combos],\n  };\n};\n\nconst match = (time: number, range: number | [number, number]) => {\n  if (isNumber(range)) return time === range;\n  const [start, end] = range;\n  return time >= start && time <= end;\n};\n\nconst inferTime = (datum: ElementDatum, optionsKeys: string[], defaultValue?: any): number => {\n  for (let i = 0; i < optionsKeys.length; i++) {\n    const key = optionsKeys[i];\n    const val = datum.data?.[key];\n    if (val) return val as number;\n  }\n  return defaultValue;\n};\n", "import { Canvas } from '@antv/g';\nimport { GraphEvent } from '../../constants';\nimport type { LabelStyleProps } from '../../elements/shapes/label';\nimport { Label } from '../../elements/shapes/label';\nimport type { RuntimeContext } from '../../runtime/types';\nimport type { Prefix } from '../../types';\nimport { parsePadding } from '../../utils/padding';\nimport { subStyleProps } from '../../utils/prefix';\nimport type { BasePluginOptions } from '../base-plugin';\nimport { BasePlugin } from '../base-plugin';\nimport { createPluginCanvas } from '../utils/canvas';\n\nconst commonStyle: Partial<LabelStyleProps> = {\n  fill: '#1D2129',\n  wordWrap: true, // \n  maxLines: 1, // \n  textOverflow: 'ellipsis', // \n  textBaseline: 'top',\n\n  /**\n   * textAlign  x \n   * : :  width = 600\n   * - textAlign: 'start' | 'left\n   *     x = 0\n   * - textAlign: 'end' | 'right'\n   *     x = 600 ()\n   * - textAlign: 'center'\n   *     x = 300 ( / 2)\n   */\n  textAlign: 'start',\n  x: 0,\n};\nconst defaultTitleStyle: Partial<LabelStyleProps> = {\n  ...commonStyle,\n  fillOpacity: 0.9,\n  fontSize: 16,\n  fontWeight: 'bold',\n};\nconst defaultSubTitleStyle: Partial<LabelStyleProps> = {\n  ...commonStyle,\n  fillOpacity: 0.65,\n  fontSize: 12,\n  fontWeight: 'normal',\n};\nconst defaultOptions: Partial<TitleOptions> = {\n  align: 'left',\n  spacing: 8,\n  size: 44,\n  padding: [16, 24, 0, 24],\n};\n\nconst titleKey = 'title';\nconst subtitleKey = 'subtitle';\n\n/**\n * <zh/> \n *\n * <en/> Title styles\n */\nexport type TitleStyle = Prefix<typeof titleKey, Omit<LabelStyleProps, 'x' | 'y' | 'text'>>;\n/**\n * <zh/> \n *\n * <en/> Subtitle styles\n */\nexport type SubTitleStyle = Prefix<typeof subtitleKey, Omit<LabelStyleProps, 'x' | 'y' | 'text'>>;\n\n/**\n * <zh/> \n *\n * <en/> Title plugin options\n */\nexport interface TitleOptions extends BasePluginOptions, TitleStyle, SubTitleStyle {\n  /**\n   * <zh/> \n   *\n   * <en/> whole title height\n   * @defaultValue 44\n   */\n  size?: number;\n  /**\n   * <zh/> \n   *\n   * <en/> The entire title is located at the position of the graph\n   * @defaultValue 'left'\n   */\n  align?: 'left' | 'center' | 'right';\n  /**\n   * <zh/> \n   *\n   * <en/> The y spacing between the title and subtitle\n   * @defaultValue 8\n   */\n  spacing?: number;\n  /**\n   * <zh/> \n   *\n   * <en/> whole title padding\n   * @defaultValue [16, 24, 0, 24]\n   */\n  padding?: number | number[];\n  /**\n   * <zh/> \n   *\n   * <en/> title text\n   */\n  [titleKey]: string;\n  /**\n   * <zh/> \n   *\n   * <en/> subtitle text\n   */\n  [subtitleKey]?: string | null;\n  /**\n   * <zh/> \n   *\n   * <en/> The class name of the title canvas, which does not take effect when an external container is passed in\n   */\n  className?: string;\n}\n\nexport class Title extends BasePlugin<TitleOptions> {\n  private canvas!: Canvas;\n  private container!: HTMLElement;\n\n  private get padding() {\n    return parsePadding(this.options.padding);\n  }\n\n  constructor(context: RuntimeContext, options: TitleOptions) {\n    const combineOption = Object.assign({}, defaultOptions, options);\n    super(context, combineOption);\n\n    this.bindEvents();\n  }\n\n  private onRender = () => {\n    const canvas = this.updateCanvas();\n    this.renderTitle(canvas);\n  };\n\n  private bindEvents() {\n    const { graph } = this.context;\n    graph.on(GraphEvent.AFTER_RENDER, this.onRender);\n    graph.on(GraphEvent.AFTER_ANIMATE, this.onRender);\n  }\n\n  private unbindEvents() {\n    const { graph } = this.context;\n    graph.off(GraphEvent.AFTER_RENDER, this.onRender);\n    graph.off(GraphEvent.AFTER_ANIMATE, this.onRender);\n  }\n\n  public destroy(): void {\n    this.unbindEvents();\n    this.canvas?.destroy();\n    this.container?.remove();\n    super.destroy();\n  }\n\n  private updateCanvas() {\n    const { size, className, align } = this.options;\n    const [width] = this.context.canvas.getSize();\n    const [pt = 0, , pb = 0] = this.padding;\n    const height = size + pt + pb;\n\n    if (this.canvas) {\n      const { width: w, height: h } = this.canvas.getConfig();\n      if (width !== w || height !== h) this.canvas.resize(width, height);\n    } else {\n      const positions = {\n        left: 'left-top',\n        center: 'top',\n        right: 'right-top',\n      } as const;\n\n      const [$container, canvas] = createPluginCanvas({\n        width,\n        height,\n        placement: positions[align] || positions.left,\n        className: 'title-canvas',\n        graphCanvas: this.context.canvas,\n      });\n\n      if (className) $container.classList.add(className);\n\n      this.container = $container;\n      this.canvas = canvas;\n    }\n\n    return this.canvas;\n  }\n\n  private renderTitle(canvas: Canvas) {\n    const titles = new TitleComponent({\n      options: this.options,\n      ctx: this.context,\n    });\n\n    canvas.removeChildren();\n    titles.getTitle().forEach((label) => {\n      if (label) canvas.appendChild(label);\n    });\n  }\n}\n\nclass TitleComponent {\n  private options: TitleOptions;\n\n  private context: RuntimeContext;\n  private get padding() {\n    return parsePadding(this.options.padding);\n  }\n\n  constructor(props: { ctx: RuntimeContext; options: TitleOptions }) {\n    const { options, ctx } = props;\n\n    this.options = options;\n\n    this.context = ctx;\n  }\n\n  public getTitle() {\n    const {\n      [titleKey]: propsTitle,\n      [subtitleKey]: propsSubtitle,\n      spacing = 44,\n      padding,\n      align,\n      ...style\n    } = this.options;\n\n    const titleText = propsTitle;\n    const subTitleText = propsSubtitle;\n\n    const titleStyle = subStyleProps(style, titleKey) as LabelStyleProps;\n    const subtitleStyle = subStyleProps(style, subtitleKey) as LabelStyleProps;\n\n    const [topGraphWidth] = this.context.graph.getSize();\n    const [pt = 0, pr = 0, , pl = 0] = this.padding;\n    const canvasWidth = topGraphWidth;\n    const textWidth = canvasWidth - pl - pr;\n\n    let subTitle: Label | null = null;\n\n    let alignX = pl;\n    let textAlign = 'left' as 'left' | 'center' | 'right';\n\n    switch (align) {\n      case 'left':\n        alignX = pl;\n        textAlign = 'left';\n        break;\n      case 'center':\n        alignX = canvasWidth / 2;\n        textAlign = 'center';\n        break;\n\n      case 'right':\n        alignX = canvasWidth - pr;\n        textAlign = 'right';\n        break;\n      default:\n        alignX = pl;\n        textAlign = 'left';\n    }\n\n    const title = new Label({\n      className: titleKey,\n      style: {\n        ...defaultTitleStyle,\n        wordWrapWidth: textWidth - 5,\n        x: alignX,\n        y: pt,\n        textAlign,\n        ...titleStyle,\n        text: titleText,\n      },\n    });\n\n    const titleBBox = title.getBBox();\n\n    if (subTitleText) {\n      subTitle = new Label({\n        className: 'subTitle',\n        style: {\n          ...defaultSubTitleStyle,\n          wordWrapWidth: textWidth - 5,\n          x: alignX,\n          y: titleBBox.height + spacing + pt,\n          textAlign,\n          ...subtitleStyle,\n          text: subTitleText,\n        },\n      });\n    }\n\n    return [title, subTitle];\n  }\n}\n", "import type { CornerPlacement } from '../../types';\n\n/**\n * <zh/> \n *\n * <en/> The item of the toolbar.\n */\nexport interface ToolbarItem {\n  /**\n   * <zh/>  id  'zoom-in''zoom-out''auto-fit''reset'  iconfont  id  svg symbolSee: https://developer.mozilla.org/en-US/docs/Web/SVG/Element/symbol\n   *\n   * <en/> You can use id to configure the built-in toolbar items, which can be values such as 'zoom-in', 'zoom-out', 'auto-fit', 'reset', etc. One of the two configurations with `marker`. The principle is to match the built-in svg symbol through id. See: https://developer.mozilla.org/en-US/docs/Web/SVG/Element/symbol.\n   */\n  readonly id: 'zoom-in' | 'zoom-out' | 'redo' | 'undo' | 'edit' | 'delete' | 'auto-fit' | 'export' | 'reset' | string;\n  /**\n   * <zh/>  onClick \n   *\n   * <en/> The value corresponding to the toolbar item, used as a callback parameter in `onClick`.\n   */\n  readonly value: string;\n  /**\n   * <en/> The title of the toolbar item. The title will be displayed as a tooltip when the mouse hovers over the item.\n   */\n  readonly title?: string;\n}\n\n/**\n * <zh/>  toolbar  position \n *\n * <en/> Parse the position of the toolbar into position style.\n * @param position - position\n * @returns style\n */\nexport function parsePositionToStyle(position: CornerPlacement): Partial<CSSStyleDeclaration> {\n  const style: Partial<CSSStyleDeclaration> = {\n    top: 'unset',\n    right: 'unset',\n    bottom: 'unset',\n    left: 'unset',\n  };\n\n  const directions = position.split('-') as ('top' | 'right' | 'bottom' | 'left')[];\n  directions.forEach((d) => {\n    style[d] = '8px';\n  });\n\n  style.flexDirection = position.startsWith('top') || position.startsWith('bottom') ? 'row' : 'column';\n\n  return style;\n}\n\n/**\n *  toolbar  CSS \n */\nexport const TOOLBAR_CSS = `\n  .g6-toolbar {\n    position: absolute;\n    z-index: 100;\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    justify-content: center;\n    border-radius: 4px;\n    box-shadow: 0px 0px 8px rgba(0, 0, 0, 0.1);\n    opacity: 0.65;\n  }\n  .g6-toolbar .g6-toolbar-item {\n    display: inline-block;\n    width: 16px;\n    height: 16px;\n    padding: 4px;\n    cursor: pointer;\n    box-sizing: content-box;\n  }\n\n  .g6-toolbar .g6-toolbar-item:hover {\n    background-color: #f0f0f0;\n  }\n\n  .g6-toolbar .g6-toolbar-item svg {\n    display: inline-block;\n    width: 100%;\n    height: 100%;\n    pointer-events: none;\n  }\n`;\n\nexport const BUILD_IN_SVG_ICON = `\n  <svg>\n    <symbol id=\"zoom-in\" viewBox=\"64 64 896 896\">\n      <path d=\"M637 443H519V309c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v134H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h118v134c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V519h118c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z\"></path>\n    </symbol>\n    <symbol id=\"zoom-out\" viewBox=\"64 64 896 896\">\n      <path d=\"M637 443H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h312c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z\"></path>\n    </symbol>\n    <symbol id=\"edit\" viewBox=\"64 64 896 896\">\n      <path d=\"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z\"></path>\n    </symbol>\n    <symbol id=\"delete\" viewBox=\"64 64 896 896\">\n      <path d=\"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z\"></path>\n    </symbol>\n    <symbol id=\"redo\" viewBox=\"64 64 896 896\">\n      <path d=\"M758.2 839.1C851.8 765.9 912 651.9 912 523.9 912 303 733.5 124.3 512.6 124 291.4 123.7 112 302.8 112 523.9c0 125.2 57.5 236.9 147.6 310.2 3.5 2.8 8.6 2.2 11.4-1.3l39.4-50.5c2.7-3.4 2.1-8.3-1.2-11.1-8.1-6.6-15.9-13.7-23.4-21.2a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-9.3 9.3-19.1 18-29.3 26L668.2 724a8 8 0 00-14.1 3l-39.6 162.2c-1.2 5 2.6 9.9 7.7 9.9l167 .8c6.7 0 10.5-7.7 6.3-12.9l-37.3-47.9z\"></path>\n    </symbol>\n    <symbol id=\"undo\" viewBox=\"64 64 896 896\">\n      <path d=\"M511.4 124C290.5 124.3 112 303 112 523.9c0 128 60.2 242 153.8 315.2l-37.5 48c-4.1 5.3-.3 13 6.3 12.9l167-.8c5.2 0 9-4.9 7.7-9.9L369.8 727a8 8 0 00-14.1-3L315 776.1c-10.2-8-20-16.7-29.3-26a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-7.5 7.5-15.3 14.5-23.4 21.2a7.93 7.93 0 00-1.2 11.1l39.4 50.5c2.8 3.5 7.9 4.1 11.4 1.3C854.5 760.8 912 649.1 912 523.9c0-221.1-179.4-400.2-400.6-399.9z\"></path>\n    </symbol>\n    <symbol id=\"export\" viewBox=\"64 64 896 896\">\n      <path d=\"M880 912H144c-17.7 0-32-14.3-32-32V144c0-17.7 14.3-32 32-32h360c4.4 0 8 3.6 8 8v56c0 4.4-3.6 8-8 8H184v656h656V520c0-4.4 3.6-8 8-8h56c4.4 0 8 3.6 8 8v360c0 17.7-14.3 32-32 32zM770.87 199.13l-52.2-52.2a8.01 8.01 0 014.7-13.6l179.4-21c5.1-.6 9.5 3.7 8.9 8.9l-21 179.4c-.8 6.6-8.9 9.4-13.6 4.7l-52.4-52.4-256.2 256.2a8.03 8.03 0 01-11.3 0l-42.4-42.4a8.03 8.03 0 010-11.3l256.1-256.3z\"></path>\n    </symbol>\n    <symbol id=\"auto-fit\" viewBox=\"64 64 896 896\">\n      <path d=\"M952 474H829.8C812.5 327.6 696.4 211.5 550 194.2V72c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v122.2C327.6 211.5 211.5 327.6 194.2 474H72c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h122.2C211.5 696.4 327.6 812.5 474 829.8V952c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V829.8C696.4 812.5 812.5 696.4 829.8 550H952c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zM512 756c-134.8 0-244-109.2-244-244s109.2-244 244-244 244 109.2 244 244-109.2 244-244 244z\"></path>\n      <path d=\"M512 392c-32.1 0-62.1 12.4-84.8 35.2-22.7 22.7-35.2 52.7-35.2 84.8s12.5 62.1 35.2 84.8C449.9 619.4 480 632 512 632s62.1-12.5 84.8-35.2C619.4 574.1 632 544 632 512s-12.5-62.1-35.2-84.8A118.57 118.57 0 00512 392z\"></path>\n    </symbol>\n    <symbol id=\"reset\" viewBox=\"64 64 896 896\">\n      <path d=\"M909.1 209.3l-56.4 44.1C775.8 155.1 656.2 92 521.9 92 290 92 102.3 279.5 102 511.5 101.7 743.7 289.8 932 521.9 932c181.3 0 335.8-115 394.6-276.1 1.5-4.2-.7-8.9-4.9-10.3l-56.7-19.5a8 8 0 00-10.1 4.8c-1.8 5-3.8 10-5.9 14.9-17.3 41-42.1 77.8-73.7 109.4A344.77 344.77 0 01655.9 829c-42.3 17.9-87.4 27-133.8 27-46.5 0-91.5-9.1-133.8-27A341.5 341.5 0 01279 755.2a342.16 342.16 0 01-73.7-109.4c-17.9-42.4-27-87.4-27-133.9s9.1-91.5 27-133.9c17.3-41 42.1-77.8 73.7-109.4 31.6-31.6 68.4-56.4 109.3-73.8 42.3-17.9 87.4-27 133.8-27 46.5 0 91.5 9.1 133.8 27a341.5 341.5 0 01109.3 73.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.6 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c-.1-6.6-7.8-10.3-13-6.2z\"></path>\n    </symbol>\n    <symbol id=\"exit-fullscreen\" viewBox=\"0 0 1024 1024\">\n      <path d=\"M418.13333333 361.43786666c0 0.2048-0.13653333 0.4096-0.13653334 0.68266667C417.99679999 362.32533333 418.13333333 362.53013333 418.13333333 362.73493333 418.13333333 371.54133333 414.44693333 379.392 408.78079999 385.39946666 408.43946666 385.7408 408.30293333 386.21866666 408.02986666 386.49173333c-1.09226667 1.09226667-2.59413333 1.77493333-3.82293333 2.73066667C398.40426666 393.65973333 391.64586666 396.8 383.93173333 396.8 383.72693333 396.8 383.59039999 396.73173333 383.38559999 396.73173333S382.97599999 396.8 382.77119999 396.8L112.29866666 396.8C92.50133333 396.8 76.79999999 381.50826666 76.79999999 362.66666666 76.66346666 343.89333333 92.63786666 328.53333333 112.16213333 328.53333333l189.44 0L87.44959999 114.51733333C73.59146666 100.59093333 73.25013333 78.5408 86.63039999 65.29706666c13.17546667-13.44853333 35.36213333-12.97066667 49.152 0.88746667l214.08426667 214.08426667L349.86666666 90.89706666C349.79839999 71.23626666 365.22666666 55.46666666 383.99999999 55.46666666 402.77333333 55.33013333 418.13333333 71.30453333 418.13333333 90.8288L418.13333333 361.43786666zM928.90453333 328.53333333l-189.44 0 214.15253333-214.08426667c13.85813333-13.9264 14.19946667-35.90826667 0.88746667-49.22026666-13.17546667-13.44853333-35.36213333-12.97066667-49.152 0.88746666l-214.08426667 214.08426667L691.26826666 90.89706666C691.26826666 71.23626666 675.83999999 55.46666666 657.06666666 55.46666666 638.29333333 55.33013333 622.93333333 71.30453333 622.93333333 90.8288l0 270.60906666c0 0.2048 0.13653333 0.4096 0.13653333 0.68266667C623.06986666 362.32533333 622.93333333 362.53013333 622.93333333 362.73493333 622.93333333 371.54133333 626.61973333 379.392 632.28586666 385.39946666c0.34133333 0.34133333 0.47786667 0.8192 0.8192 1.09226667 1.09226667 1.09226667 2.59413333 1.77493333 3.8912 2.73066667C642.66239999 393.65973333 649.42079999 396.8 657.13493333 396.8c0.2048 0 0.34133333-0.06826667 0.54613333-0.06826667S658.09066666 396.8 658.29546666 396.8l270.5408 0C948.56533333 396.8 964.26666666 381.50826666 964.26666666 362.66666666 964.40319999 343.89333333 948.42879999 328.53333333 928.90453333 328.53333333zM418.13333333 635.73333333c0-8.8064-3.6864-16.5888-9.35253334-22.66453333C408.43946666 612.72746666 408.30293333 612.2496 408.02986666 611.90826666 406.86933333 610.88426666 405.43573333 610.2016 404.20693333 609.24586666 398.47253333 604.80853333 391.64586666 601.6 383.93173333 601.6 383.72693333 601.6 383.59039999 601.73653333 383.38559999 601.73653333S382.97599999 601.6 382.77119999 601.6L112.29866666 601.6C92.50133333 601.6 76.79999999 616.96 76.79999999 635.73333333 76.66346666 654.50666666 92.63786666 669.86666666 112.16213333 669.86666666l189.44 0-214.15253334 214.15253334c-13.85813333 13.85813333-14.19946667 35.84-0.88746666 49.22026666 13.17546667 13.44853333 35.36213333 12.9024 49.152-0.95573333l214.08426666-214.08426667 0 189.37173334c0 19.59253333 15.42826667 35.49866667 34.2016 35.36213333C402.77333333 943.2064 418.13333333 927.232 418.13333333 907.5712L418.13333333 637.09866666c0-0.27306667-0.13653333-0.47786667-0.13653334-0.68266666C417.99679999 636.14293333 418.13333333 635.93813333 418.13333333 635.73333333zM739.46453333 669.86666666l189.44 0c19.456 0 35.49866667-15.36 35.36213333-34.13333333C964.26666666 616.96 948.56533333 601.6 928.76799999 601.6L658.29546666 601.6C658.09066666 601.6 657.88586666 601.73653333 657.68106666 601.73653333S657.33973333 601.6 657.13493333 601.6C649.42079999 601.6 642.59413333 604.80853333 636.85973333 609.24586666 635.63093333 610.2016 634.19733333 610.88426666 633.03679999 611.90826666 632.76373333 612.2496 632.62719999 612.72746666 632.28586666 613.0688 626.61973333 619.14453333 622.93333333 626.92693333 622.93333333 635.73333333c0 0.2048 0.13653333 0.4096 0.13653333 0.68266667C623.06986666 636.6208 622.93333333 636.8256 622.93333333 637.09866666l0 270.5408C622.93333333 927.232 638.29333333 943.2064 657.06666666 942.93333333c18.77333333 0.13653333 34.2016-15.70133333 34.2016-35.36213333l0-189.37173334 214.08426667 214.08426667c13.78986667 13.85813333 35.90826667 14.40426667 49.152 0.95573333 13.312-13.312 12.97066667-35.36213333-0.88746667-49.22026666L739.46453333 669.86666666z\"  ></path></symbol>\n    <symbol id=\"request-fullscreen\" viewBox=\"0 0 1024 1024\">\n      <path d=\"M69.818182 87.598545v273.128728a34.909091 34.909091 0 0 0 69.818182 0V163.653818l221.928727 222.021818a33.512727 33.512727 0 0 0 47.383273-47.383272L186.926545 116.363636h197.073455a34.909091 34.909091 0 0 0 0-69.818181H110.871273C85.364364 46.545455 69.818182 59.671273 69.818182 87.598545zM938.542545 46.545455H665.413818a34.909091 34.909091 0 0 0 0 69.818181h197.073455L640.465455 338.292364a33.512727 33.512727 0 0 0 47.383272 47.383272l221.928728-222.021818v197.073455a34.909091 34.909091 0 0 0 69.818181 0V87.598545c0-27.927273-15.453091-41.053091-40.96-41.05309z m-827.671272 907.636363h273.128727a34.909091 34.909091 0 0 0 0-69.818182H186.926545l222.021819-221.928727a33.512727 33.512727 0 0 0-47.383273-47.383273L139.636364 837.073455V640a34.909091 34.909091 0 0 0-69.818182 0v273.128727c0 27.927273 15.546182 41.053091 41.053091 41.053091z m868.724363-41.053091V640a34.909091 34.909091 0 0 0-69.818181 0v197.073455L687.941818 615.051636a33.512727 33.512727 0 0 0-47.383273 47.383273L862.487273 884.363636H665.413818a34.909091 34.909091 0 0 0 0 69.818182h273.128727c25.6 0 41.053091-13.125818 41.053091-41.053091z\"  ></path></symbol>\n  </svg>\n`;\n", "import type { RuntimeContext } from '../../runtime/types';\nimport type { CornerPlacement } from '../../types';\nimport type { BasePluginOptions } from '../base-plugin';\nimport { BasePlugin } from '../base-plugin';\nimport { createPluginContainer, insertDOM } from '../utils/dom';\nimport type { ToolbarItem } from './util';\nimport { BUILD_IN_SVG_ICON, TOOLBAR_CSS, parsePositionToStyle } from './util';\n\n/**\n * <zh/> Toolbar \n *\n * <en/> The options of the Toolbar toolbar\n */\nexport interface ToolbarOptions extends BasePluginOptions {\n  /**\n   * <zh/>  DOM  classname `g6-toolbar`\n   *\n   * <en/> The classname appended to the menu DOM for custom styles. The default is `g6-toolbar`\n   */\n  className?: string;\n  /**\n   * <zh/> Toolbar  DOM  style \n   *\n   * <en/> The position of the Toolbar relative to the canvas, which will affect the style of the DOM\n   * @defaultValue 'top-left'\n   */\n  position?: CornerPlacement;\n  /**\n   * <zh/>  style \n   *\n   * <en/> The style style of the Toolbar, which can be used to set its position relative to the canvas\n   */\n  style?: Partial<CSSStyleDeclaration>;\n  /**\n   * <zh/> \n   *\n   * <en/> The callback method triggered when the toolbar item is clicked\n   */\n  onClick?: (value: string, target: Element) => void;\n  /**\n   * <zh/>  `Promise` \n   *\n   * <en/> Return the list of toolbar items, support return a `Promise` as items\n   */\n  getItems: () => ToolbarItem[] | Promise<ToolbarItem[]>;\n}\n\n/**\n * <zh/> \n *\n * <en/> Toolbar, support configuration of toolbar items, and callback methods after clicking\n */\nexport class Toolbar extends BasePlugin<ToolbarOptions> {\n  static defaultOptions: Partial<ToolbarOptions> = {\n    position: 'top-left',\n  };\n\n  private $element: HTMLElement = createPluginContainer('toolbar', false);\n\n  constructor(context: RuntimeContext, options: ToolbarOptions) {\n    super(context, Object.assign({}, Toolbar.defaultOptions, options));\n\n    const $container = this.context.canvas.getContainer();\n    this.$element.style.display = 'flex';\n    $container!.appendChild(this.$element);\n\n    // \n    insertDOM('g6-toolbar-css', 'style', {}, TOOLBAR_CSS, document.head);\n    insertDOM('g6-toolbar-svgicon', 'div', { display: 'none' }, BUILD_IN_SVG_ICON);\n\n    this.$element.addEventListener('click', this.onToolbarItemClick);\n\n    this.update(options);\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Update the configuration of the toolbar\n   * @param options - <zh/>  | <en/> The options of the toolbar\n   * @internal\n   */\n  public async update(options: Partial<ToolbarOptions>) {\n    super.update(options);\n\n    const { className, position, style } = this.options;\n\n    this.$element.className = `g6-toolbar ${className || ''}`;\n\n    // \n    Object.assign(this.$element.style, style, parsePositionToStyle(position));\n\n    this.$element.innerHTML = await this.getDOMContent();\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Destroy the toolbar\n   * @internal\n   */\n  public destroy(): void {\n    this.$element.removeEventListener('click', this.onToolbarItemClick);\n    this.$element.remove();\n\n    super.destroy();\n  }\n\n  private async getDOMContent() {\n    const items = await this.options.getItems();\n    return items\n      .map(\n        (item) => `\n          <div class=\"g6-toolbar-item\" value=\"${item.value}\" title=\"${item.title ?? ''}\">\n            <svg aria-hidden=\"true\" focusable=\"false\">\n              <use xlink:href=\"#${item.id}\"></use>\n            </svg>\n          </div>`,\n      )\n      .join('');\n  }\n\n  private onToolbarItemClick = (e: MouseEvent) => {\n    const { onClick } = this.options;\n    if (e.target instanceof Element) {\n      if (e.target.className.includes('g6-toolbar-item')) {\n        const v = e.target.getAttribute('value') as string;\n        onClick?.(v, e.target);\n      }\n    }\n  };\n}\n", "import type { TooltipStyleProps } from '@antv/component';\nimport { Tooltip as TooltipComponent } from '@antv/component';\nimport { get } from '@antv/util';\nimport type { RuntimeContext } from '../runtime/types';\nimport type { ElementDatum, ElementType, ID, IElementEvent } from '../types';\nimport { isToBeDestroyed } from '../utils/element';\nimport type { BasePluginOptions } from './base-plugin';\nimport { BasePlugin } from './base-plugin';\n\n/**\n * <zh/> \n *\n * <en/> Tooltip plugin options\n */\nexport interface TooltipOptions\n  extends\n    BasePluginOptions,\n    Pick<TooltipStyleProps, 'position' | 'offset' | 'enterable' | 'style' | 'container' | 'title'> {\n  /**\n   *  <zh/>  hover | click\n   * - `'hover'`\n   * - `'click'`\n   *\n   *  <en/> Trigger behavior, optional hover | click\n   * - `'hover'`mouse hover element\n   * - `'click'`mouse click element\n   * @defaultValue 'hover\n   */\n  trigger?: 'hover' | 'click';\n  /**\n   *  <zh/> \n   *\n   *  <en/> Function for getting tooltip content\n   */\n  getContent?: (event: IElementEvent, items: ElementDatum[]) => Promise<HTMLElement | string>;\n  /**\n   *  <zh/> \n   *\n   *  <en/> Is enable\n   *  @defaultValue true\n   */\n  enable?: boolean | ((event: IElementEvent, items: ElementDatum[]) => boolean);\n  /**\n   * <zh/> \n   *\n   * <en/> Callback executed when visibility of the tooltip card is changed\n   */\n  onOpenChange: (open: boolean) => void;\n}\n\n/**\n * <zh/> \n *\n * <en/> Tooltip plugin\n */\nexport class Tooltip extends BasePlugin<TooltipOptions> {\n  static defaultOptions: Partial<TooltipOptions> = {\n    trigger: 'hover',\n    position: 'top-right',\n    enterable: false,\n    enable: true,\n    offset: [10, 10],\n    style: {\n      '.tooltip': {\n        visibility: 'hidden',\n      },\n    },\n  };\n  private currentTarget: string | null = null;\n  private tooltipElement: TooltipComponent | null = null;\n  private container: HTMLElement | null = null;\n\n  constructor(context: RuntimeContext, options: TooltipOptions) {\n    super(context, Object.assign({}, Tooltip.defaultOptions, options));\n    this.render();\n    this.bindEvents();\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Get event and handle event methods\n   * @returns <zh/>  | <en/> Event and handling event methods\n   */\n  private getEvents(): { [key: string]: (event: IElementEvent) => void } {\n    if (this.options.trigger === 'click') {\n      return {\n        'node:click': this.onClick,\n        'edge:click': this.onClick,\n        'combo:click': this.onClick,\n        'canvas:click': this.onPointerLeave,\n        contextmenu: this.onPointerLeave,\n        drag: this.onPointerLeave,\n      };\n    }\n\n    return {\n      'node:pointerover': this.onPointerOver,\n      'node:pointermove': this.onPointerMove,\n      'canvas:pointermove': this.onCanvasMove,\n      'edge:pointerover': this.onPointerOver,\n      'edge:pointermove': this.onPointerMove,\n      'combo:pointerover': this.onPointerOver,\n      'combo:pointermove': this.onPointerMove,\n      contextmenu: this.onPointerLeave,\n      'node:drag': this.onPointerLeave,\n    };\n  }\n  /**\n   * <zh/> tooltip\n   *\n   * <en/> Update the tooltip configuration\n   * @param options - <zh/>  | <en/> options\n   * @internal\n   */\n  public update(options: Partial<TooltipOptions>) {\n    this.unbindEvents();\n    super.update(options);\n    if (this.tooltipElement) {\n      this.container?.removeChild(this.tooltipElement.HTMLTooltipElement);\n    }\n    this.tooltipElement = this.initTooltip();\n    this.bindEvents();\n  }\n\n  private render() {\n    const { canvas } = this.context;\n    const $container = canvas.getContainer();\n    if (!$container) return;\n    this.container = $container;\n    this.tooltipElement = this.initTooltip();\n  }\n\n  private unbindEvents() {\n    const { graph } = this.context;\n    /** The previous event binding needs to be removed when updating the trigger. */\n    const events = this.getEvents();\n    Object.keys(events).forEach((eventName) => {\n      graph.off(eventName, events[eventName]);\n    });\n  }\n\n  private bindEvents() {\n    const { graph } = this.context;\n    const events = this.getEvents();\n    Object.keys(events).forEach((eventName) => {\n      graph.on(eventName, events[eventName]);\n    });\n  }\n\n  private isEnable = (event: IElementEvent, items: ElementDatum[]) => {\n    const { enable } = this.options;\n    if (typeof enable === 'function') {\n      return enable(event, items);\n    }\n    return enable;\n  };\n\n  /**\n   * <zh/> \n   *\n   * <en/> Click event\n   * @param event - <zh/>  | <en/> element\n   */\n  public onClick = (event: IElementEvent) => {\n    const {\n      target: { id },\n    } = event;\n    // click the same item twice, tooltip will be hidden\n    if (this.currentTarget === id) {\n      this.hide(event);\n    } else {\n      this.show(event);\n    }\n  };\n\n  /**\n   * <zh/> (node/edge/combo)\n   *\n   * <en/> Move on target element (node/edge/combo)\n   * @param event - <zh/>  | <en/> target element\n   */\n  public onPointerMove = (event: IElementEvent) => {\n    const { target } = event;\n    if (!this.currentTarget || target.id === this.currentTarget) {\n      return;\n    }\n    this.show(event);\n  };\n  /**\n   * <zh/> //tooltip\n   *\n   * <en/> Hide tooltip when clicking canvas/triggering drag/appearing context menu\n   * @param event - <zh/>  | <en/> target element\n   */\n  public onPointerLeave = (event: IElementEvent) => {\n    this.hide(event);\n  };\n  /**\n   * <zh/> \n   *\n   * <en/> Move canvas\n   * @param event - <zh/>  | <en/> target element\n   */\n  public onCanvasMove = (event: IElementEvent) => {\n    this.hide(event);\n  };\n\n  private onPointerOver = (event: IElementEvent) => {\n    this.show(event);\n  };\n\n  /**\n   * <zh/> \n   *\n   * <en/> Show tooltip of target element\n   * @param id - <zh/>  ID | <en/> element ID\n   */\n  public showById = async (id: ID) => {\n    const event = {\n      target: { id },\n    } as IElementEvent;\n    await this.show(event);\n  };\n\n  private getElementData = (id: ID, targetType: ElementType) => {\n    const { model } = this.context;\n    switch (targetType) {\n      case 'node':\n        return model.getNodeData([id]);\n      case 'edge':\n        return model.getEdgeData([id]);\n      case 'combo':\n        return model.getComboData([id]);\n      default:\n        return [];\n    }\n  };\n\n  /**\n   * <zh/> tooltip\n   *\n   * <en/> Show tooltip on target element\n   * @param event - <zh/>  | <en/> target element\n   * @internal\n   */\n  public show = async (event: IElementEvent) => {\n    const {\n      client,\n      target: { id },\n    } = event;\n    if (isToBeDestroyed(event.target)) return;\n\n    const targetType = this.context.graph.getElementType(id);\n    const { getContent, title } = this.options;\n    const items: ElementDatum[] = this.getElementData(id, targetType as ElementType);\n\n    if (!this.tooltipElement) return;\n    // if shown, when is not enable, hide\n    if (!this.isEnable(event, items)) {\n      this.hide(event);\n      return;\n    }\n\n    let tooltipContent: { [key: string]: unknown } = {};\n    if (getContent) {\n      tooltipContent.content = await getContent(event, items);\n      if (!tooltipContent.content) return;\n    } else {\n      const style = this.context.graph.getElementRenderStyle(id);\n      const color = targetType === 'node' ? style.fill : style.stroke;\n      tooltipContent = {\n        title: title || targetType,\n        data: items.map((item) => {\n          return {\n            name: 'ID',\n            value: item.id || `${item.source} -> ${item.target}`,\n            color,\n          };\n        }),\n      };\n    }\n\n    this.currentTarget = id;\n\n    let x;\n    let y;\n    if (client) {\n      x = client.x;\n      y = client.y;\n    } else {\n      const style = get(items, '0.style', { x: 0, y: 0 });\n      x = style.x;\n      y = style.y;\n    }\n\n    this.options.onOpenChange?.(true);\n    this.tooltipElement.update({\n      ...this.tooltipStyleProps,\n      x,\n      y,\n      style: {\n        '.tooltip': {\n          visibility: 'visible',\n        },\n      },\n      ...tooltipContent,\n    });\n  };\n  /**\n   * <zh/> tooltip\n   *\n   * <en/> Hidden tooltip\n   * @param event - <zh/> , | <en/> Target element, not passed in as external call\n   */\n  public hide = (event?: IElementEvent) => {\n    // if e is undefined, hide the tooltip external call\n    if (!event) {\n      this.options.onOpenChange?.(false);\n      this.tooltipElement?.hide();\n      this.currentTarget = null;\n      return;\n    }\n    if (!this.tooltipElement) return;\n    // No target node: tooltip has been hidden. No need for duplicated call.\n    if (!this.currentTarget) return;\n    const {\n      client: { x, y },\n    } = event;\n    this.options.onOpenChange?.(false);\n    this.tooltipElement.hide(x, y);\n    this.currentTarget = null;\n  };\n\n  private get tooltipStyleProps() {\n    const { canvas } = this.context;\n    const { center } = canvas.getBounds();\n    const $container = canvas.getContainer() as HTMLElement;\n    const { top, left } = $container.getBoundingClientRect();\n    const { style, position, enterable, container = { x: -left, y: -top }, title, offset } = this.options;\n    const [x, y] = center;\n    const [width, height] = canvas.getSize();\n\n    return {\n      x,\n      y,\n      container,\n      title,\n      bounding: { x: 0, y: 0, width, height },\n      position,\n      enterable,\n      offset,\n      style,\n    };\n  }\n\n  private initTooltip = () => {\n    const tooltipElement = new TooltipComponent({\n      className: 'tooltip',\n      style: this.tooltipStyleProps,\n    });\n    this.container?.appendChild(tooltipElement.HTMLTooltipElement);\n    return tooltipElement;\n  };\n\n  /**\n   * <zh/> tooltip\n   *\n   * <en/> Destroy tooltip\n   * @internal\n   */\n  public destroy(): void {\n    this.unbindEvents();\n    if (this.tooltipElement) {\n      this.container?.removeChild(this.tooltipElement.HTMLTooltipElement);\n    }\n    super.destroy();\n  }\n}\n", "// Only use one instance.\nlet canvas: HTMLCanvasElement;\n\n/**\n * Create a canvas instance.\n * @param width - width\n * @param height - height\n * @returns a new Canvas\n */\nfunction createCanvas(width: number, height: number): HTMLCanvasElement {\n  if (!canvas) {\n    canvas = document.createElement('canvas');\n  }\n  canvas.width = width;\n  canvas.height = height;\n  const ctx = canvas.getContext('2d');\n  ctx!.clearRect(0, 0, width, height);\n  return canvas;\n}\n\n/**\n *  base64\n * @param width - width\n * @param height - height\n * @param text - \n * @param style - \n * @returns  base64\n */\nexport async function getTextWatermark(width: number, height: number, text: string, style: any) {\n  const canvas = createCanvas(width, height);\n  const ctx = canvas.getContext('2d')!;\n\n  const {\n    rotate,\n    opacity,\n    textFill,\n    textFontSize,\n    textFontFamily,\n    textFontVariant,\n    textFontWeight,\n    textAlign,\n    textBaseline,\n  } = style;\n\n  // Set the style.\n  // Default is align center and middle.\n  ctx.textAlign = textAlign;\n  ctx.textBaseline = textBaseline;\n  ctx.translate(width / 2, height / 2);\n\n  ctx.font = `${textFontSize}px ${textFontFamily} ${textFontVariant} ${textFontWeight}`;\n\n  rotate && ctx.rotate(rotate);\n  opacity && (ctx.globalAlpha = opacity);\n  if (textFill) {\n    ctx.fillStyle = textFill;\n    // Draw the text.\n    ctx.fillText(`${text}`, 0, 0);\n  }\n\n  // Return the base64.\n  return canvas.toDataURL();\n}\n\n/**\n * Get the image base64 of the watermark.\n * @param width - width\n * @param height - height\n * @param imageURL - image URL\n * @param style - \n * @returns  base64\n */\nexport async function getImageWatermark(width: number, height: number, imageURL: string, style: any) {\n  const canvas = createCanvas(width, height);\n  const ctx = canvas.getContext('2d')!;\n  const { rotate, opacity } = style;\n\n  rotate && ctx.rotate(rotate);\n  opacity && (ctx.globalAlpha = opacity);\n\n  const img = new Image();\n  img.crossOrigin = 'anonymous';\n  img.src = imageURL;\n\n  return new Promise((resolve) => {\n    img.onload = function () {\n      const sepX = width > img.width ? (width - img.width) / 2 : 0;\n      const sepY = height > img.height ? (height - img.height) / 2 : 0;\n      ctx.drawImage(img, 0, 0, img.width, img.height, sepX, sepY, width - sepX * 2, height - sepY * 2);\n      resolve(canvas.toDataURL());\n    };\n  });\n}\n", "import type { RuntimeContext } from '../../runtime/types';\nimport type { BasePluginOptions } from '../base-plugin';\nimport { BasePlugin } from '../base-plugin';\nimport { createPluginContainer } from '../utils/dom';\nimport { getImageWatermark, getTextWatermark } from './util';\n\n/**\n * <zh/> \n *\n * <en/> Watermark options\n */\nexport interface WatermarkOptions extends BasePluginOptions {\n  /**\n   * <zh/> \n   *\n   * <en/> The width of watermark(single)\n   * @defaultValue 200\n   */\n  width?: number;\n  /**\n   * <zh/> \n   *\n   * <en/> The height of watermark(single)\n   * @defaultValue 100\n   */\n  height?: number;\n  /**\n   * <zh/> \n   *\n   * <en/> The opacity of watermark\n   * @defaultValue 0.2\n   */\n  opacity?: number;\n  /**\n   * <zh/> \n   *\n   * <en/> The rotate angle of watermark\n   * @defaultValue Math.PI / 12\n   */\n  rotate?: number;\n  /**\n   * <zh/> \n   *\n   * <en/> The image url, if it has a value, it will be used, otherwise it will use the text\n   */\n  imageURL?: string;\n  /**\n   * <zh/> \n   *\n   * <en/> The text of watermark\n   */\n  text?: string;\n  /**\n   * <zh/> \n   *\n   * <en/> The color of text watermark\n   * @defaultValue '#000'\n   */\n  textFill?: string;\n  /**\n   * <zh/> \n   *\n   * <en/> The font size of text watermark\n   * @defaultValue 16\n   */\n  textFontSize?: number;\n  /**\n   * <zh/> \n   *\n   * <en/> The font of text watermark\n   */\n  textFontFamily?: string;\n  /**\n   * <zh/> \n   *\n   * <en/> The font weight of text watermark\n   */\n  textFontWeight?: string;\n  /**\n   * <zh/> \n   *\n   * <en/> The font variant of text watermark\n   */\n  textFontVariant?: string;\n  /**\n   * <zh/> \n   *\n   * <en/> The text align of text watermark\n   * @defaultValue 'center'\n   */\n  textAlign?: 'center' | 'end' | 'left' | 'right' | 'start';\n  /**\n   * <zh/> \n   *\n   * <en/> The text baseline of text watermark\n   * @defaultValue 'middle'\n   */\n  textBaseline?: 'alphabetic' | 'bottom' | 'hanging' | 'ideographic' | 'middle' | 'top';\n  /**\n   * <zh/> \n   *\n   * <en/> The background attachment of watermark\n   */\n  backgroundAttachment?: string;\n  /**\n   * <zh/> \n   *\n   * <en/> The background blend of watermark\n   */\n  backgroundBlendMode?: string;\n  /**\n   * <zh/> \n   *\n   * <en/> The background clip of watermark\n   */\n  backgroundClip?: string;\n  /**\n   * <zh/> \n   *\n   * <en/> The background color of watermark\n   */\n  backgroundColor?: string;\n  /**\n   * <zh/> \n   *\n   * <en/> The background image of watermark\n   */\n  backgroundImage?: string;\n  /**\n   * <zh/> \n   *\n   * <en/> The background origin of watermark\n   */\n  backgroundOrigin?: string;\n  /**\n   * <zh/> \n   *\n   * <en/> The background position of watermark\n   */\n  backgroundPosition?: string;\n  /**\n   * <zh/> -x\n   *\n   * <en/> The background position-x of watermark\n   */\n  backgroundPositionX?: string;\n  /**\n   * <zh/> -y\n   *\n   * <en/> The background position-y of watermark\n   */\n  backgroundPositionY?: string;\n  /**\n   * <zh/> \n   *\n   * <en/> The background repeat of watermark\n   * @defaultValue 'repeat'\n   */\n  backgroundRepeat?: string;\n  /**\n   * <zh/> \n   *\n   * <en/> The background size of watermark\n   */\n  backgroundSize?: string;\n}\n\n/**\n * <zh/> \n *\n * <en/> Watermark\n * @remarks\n * <zh/>  Graph  div  `background-image`  css  canvas \n *\n * <en/> Support using text and image as watermark, the principle is to add the `background-image` property to the div of the Graph container, and then you can control the position and style of the watermark through css. For text, it will be converted to an image using a hidden canvas\n */\nexport class Watermark extends BasePlugin<WatermarkOptions> {\n  static defaultOptions: Partial<WatermarkOptions> = {\n    width: 200,\n    height: 100,\n    opacity: 0.2,\n    rotate: Math.PI / 12,\n    text: '',\n    textFill: '#000',\n    textFontSize: 16,\n    textAlign: 'center',\n    textBaseline: 'middle',\n    backgroundRepeat: 'repeat',\n  };\n\n  private $element: HTMLElement = createPluginContainer('watermark');\n\n  constructor(context: RuntimeContext, options: WatermarkOptions) {\n    super(context, Object.assign({}, Watermark.defaultOptions, options));\n\n    const $container = this.context.canvas.getContainer();\n    $container!.appendChild(this.$element);\n\n    this.update(options);\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Update the watermark configuration\n   * @param options - <zh/>  | <en/> Options\n   * @internal\n   */\n  public async update(options: Partial<WatermarkOptions>) {\n    super.update(options);\n\n    const { width, height, text, imageURL, ...rest } = this.options;\n\n    // Set the background style.\n    Object.keys(rest).forEach((key) => {\n      if (key.startsWith('background')) {\n        // @ts-expect-error ignore\n        this.$element.style[key] = options[key];\n      }\n    });\n\n    // Set the background image\n    const base64 = imageURL\n      ? await getImageWatermark(width, height, imageURL, rest)\n      : await getTextWatermark(width, height, text, rest);\n    this.$element.style.backgroundImage = `url(${base64})`;\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Destroy the watermark\n   * @internal\n   */\n  public destroy(): void {\n    super.destroy();\n    // Remove the background dom.\n    this.$element.remove();\n  }\n}\n", "import type { CategoricalPalette } from '../palettes/types';\nimport type { PaletteOptions } from '../spec/element/palette';\nimport type { Theme } from './types';\n\nconst BADGE_PALETTE: CategoricalPalette = ['#7E92B5', '#F4664A', '#FFBE3A'];\n\nconst NODE_PALETTE_OPTIONS: PaletteOptions = {\n  type: 'group',\n  color: ['#1783FF', '#00C9C9', '#F08F56', '#D580FF', '#7863FF', '#DB9D0D', '#60C42D', '#FF80CA', '#2491B3', '#17C76F'],\n};\n\nconst EDGE_PALETTE_OPTIONS: PaletteOptions = {\n  type: 'group',\n  color: [\n    '#99ADD1',\n    '#1783FF',\n    '#00C9C9',\n    '#F08F56',\n    '#D580FF',\n    '#7863FF',\n    '#DB9D0D',\n    '#60C42D',\n    '#FF80CA',\n    '#2491B3',\n    '#17C76F',\n  ],\n};\n\ntype ThemeTokens = {\n  bgColor: string;\n  textColor: string;\n  nodeColor: string;\n  nodeColorDisabled: string;\n  nodeStroke: string;\n  nodeBadgePalette?: string[];\n  nodePaletteOptions?: PaletteOptions;\n  nodeHaloStrokeOpacityActive?: number;\n  nodeHaloStrokeOpacitySelected?: number;\n  nodeOpacityDisabled?: number;\n  nodeOpacityInactive?: number;\n  nodeIconOpacityInactive?: number;\n  donutPaletteOptions?: PaletteOptions;\n  edgeColor: string;\n  edgeColorDisabled: string;\n  edgeColorInactive: string;\n  edgePaletteOptions?: PaletteOptions;\n  comboColor: string;\n  comboColorDisabled: string;\n  comboStroke: string;\n  comboStrokeDisabled: string;\n};\n\n/**\n * <zh/> \n *\n * <en/> Create a theme based on the given tokens\n * @param tokens - <zh/>  <en/> Theme tokens\n * @returns <zh/>  <en/> Theme\n */\nexport function create(tokens: ThemeTokens): Theme {\n  const {\n    bgColor,\n    textColor,\n    nodeColor,\n    nodeColorDisabled,\n    nodeStroke,\n    nodeHaloStrokeOpacityActive = 0.15,\n    nodeHaloStrokeOpacitySelected = 0.25,\n    nodeOpacityDisabled = 0.06,\n    nodeIconOpacityInactive = 0.85,\n    nodeOpacityInactive = 0.25,\n    nodeBadgePalette = BADGE_PALETTE,\n    nodePaletteOptions = NODE_PALETTE_OPTIONS,\n    edgeColor,\n    edgeColorDisabled,\n    edgePaletteOptions = EDGE_PALETTE_OPTIONS,\n    comboColor,\n    comboColorDisabled,\n    comboStroke,\n    comboStrokeDisabled,\n    edgeColorInactive,\n  } = tokens;\n\n  return {\n    background: bgColor,\n    node: {\n      palette: nodePaletteOptions,\n      style: {\n        donutOpacity: 1,\n        badgeBackgroundOpacity: 1,\n        badgeFill: '#fff',\n        badgeFontSize: 8,\n        badgePadding: [0, 4],\n        badgePalette: nodeBadgePalette,\n        fill: nodeColor,\n        fillOpacity: 1,\n        halo: false,\n        iconFill: '#fff',\n        iconOpacity: 1,\n        labelBackground: false,\n        labelBackgroundFill: bgColor,\n        labelBackgroundLineWidth: 0,\n        labelBackgroundOpacity: 0.75,\n        labelFill: textColor,\n        labelFillOpacity: 0.85,\n        labelLineHeight: 16,\n        labelPadding: [0, 2],\n        labelFontSize: 12,\n        labelFontWeight: 400,\n        labelOpacity: 1,\n        labelOffsetY: 2,\n        lineWidth: 0,\n        portFill: nodeColor,\n        portLineWidth: 1,\n        portStroke: nodeStroke,\n        portStrokeOpacity: 0.65,\n        size: 32,\n        stroke: nodeStroke,\n        strokeOpacity: 1,\n        zIndex: 2,\n      },\n      state: {\n        selected: {\n          halo: true,\n          haloLineWidth: 24,\n          haloStrokeOpacity: nodeHaloStrokeOpacitySelected,\n          labelFontSize: 12,\n          labelFontWeight: 'bold',\n          lineWidth: 4,\n          stroke: nodeStroke,\n        },\n        active: {\n          halo: true,\n          haloLineWidth: 12,\n          haloStrokeOpacity: nodeHaloStrokeOpacityActive,\n        },\n        highlight: {\n          labelFontWeight: 'bold',\n          lineWidth: 4,\n          stroke: nodeStroke,\n          strokeOpacity: 0.85,\n        },\n        inactive: {\n          badgeBackgroundOpacity: nodeOpacityInactive,\n          donutOpacity: nodeOpacityInactive,\n          fillOpacity: nodeOpacityInactive,\n          iconOpacity: nodeIconOpacityInactive,\n          labelFill: textColor,\n          labelFillOpacity: nodeOpacityInactive,\n          strokeOpacity: nodeOpacityInactive,\n        },\n        disabled: {\n          badgeBackgroundOpacity: 0.25,\n          donutOpacity: nodeOpacityDisabled,\n          fill: nodeColorDisabled,\n          fillOpacity: nodeOpacityDisabled,\n          iconFill: nodeColorDisabled,\n          iconOpacity: 0.25,\n          labelFill: textColor,\n          labelFillOpacity: 0.25,\n          strokeOpacity: nodeOpacityDisabled,\n        },\n      },\n      animation: {\n        enter: 'fade',\n        exit: 'fade',\n        show: 'fade',\n        hide: 'fade',\n        expand: 'node-expand',\n        collapse: 'node-collapse',\n        update: [{ fields: ['x', 'y', 'fill', 'stroke'] }],\n        translate: [{ fields: ['x', 'y'] }],\n      },\n    },\n    edge: {\n      palette: edgePaletteOptions,\n      style: {\n        badgeBackgroundFill: edgeColor,\n        badgeFill: '#fff',\n        badgeFontSize: 8,\n        badgeOffsetX: 10,\n        badgeBackgroundOpacity: 1,\n        fillOpacity: 1,\n        halo: false,\n        haloLineWidth: 12,\n        haloStrokeOpacity: 1,\n        increasedLineWidthForHitTesting: 2,\n        labelBackground: false,\n        labelBackgroundFill: bgColor,\n        labelBackgroundLineWidth: 0,\n        labelBackgroundOpacity: 0.75,\n        labelBackgroundPadding: [4, 4, 4, 4],\n        labelFill: textColor,\n        labelFontSize: 12,\n        labelFontWeight: 400,\n        labelOpacity: 1,\n        labelPlacement: 'center',\n        labelTextBaseline: 'middle',\n        lineWidth: 1,\n        stroke: edgeColor,\n        strokeOpacity: 1,\n        zIndex: 1,\n      },\n      state: {\n        selected: {\n          halo: true,\n          haloStrokeOpacity: 0.25,\n          labelFontSize: 14,\n          labelFontWeight: 'bold',\n          lineWidth: 3,\n        },\n        active: {\n          halo: true,\n          haloStrokeOpacity: 0.15,\n        },\n        highlight: {\n          labelFontWeight: 'bold',\n          lineWidth: 3,\n        },\n        inactive: {\n          stroke: edgeColorInactive,\n          fillOpacity: 0.08,\n          labelOpacity: 0.25,\n          strokeOpacity: 0.08,\n          badgeBackgroundOpacity: 0.25,\n        },\n        disabled: {\n          stroke: edgeColorDisabled,\n          fillOpacity: 0.45,\n          strokeOpacity: 0.45,\n          labelOpacity: 0.25,\n          badgeBackgroundOpacity: 0.45,\n        },\n      },\n      animation: {\n        enter: 'fade',\n        exit: 'fade',\n        expand: 'path-in',\n        collapse: 'path-out',\n        show: 'fade',\n        hide: 'fade',\n        update: [{ fields: ['sourceNode', 'targetNode'] }, { fields: ['stroke'], shape: 'key' }],\n        translate: [{ fields: ['sourceNode', 'targetNode'] }],\n      },\n    },\n    combo: {\n      style: {\n        collapsedMarkerFill: bgColor,\n        collapsedMarkerFontSize: 12,\n        collapsedMarkerFillOpacity: 1,\n        collapsedSize: 32,\n        collapsedFillOpacity: 1,\n        fill: comboColor,\n        halo: false,\n        haloLineWidth: 12,\n        haloStroke: comboStroke,\n        haloStrokeOpacity: 0.25,\n        labelBackground: false,\n        labelBackgroundFill: bgColor,\n        labelBackgroundLineWidth: 0,\n        labelBackgroundOpacity: 0.75,\n        labelBackgroundPadding: [2, 4, 2, 4],\n        labelFill: textColor,\n        labelFontSize: 12,\n        labelFontWeight: 400,\n        labelOpacity: 1,\n        lineDash: 0,\n        lineWidth: 1,\n        fillOpacity: 0.04,\n        strokeOpacity: 1,\n        padding: 10,\n        stroke: comboStroke,\n      },\n      state: {\n        selected: {\n          halo: true,\n          labelFontSize: 14,\n          labelFontWeight: 700,\n          lineWidth: 4,\n        },\n        active: {\n          halo: true,\n        },\n        highlight: {\n          labelFontWeight: 700,\n          lineWidth: 4,\n        },\n        inactive: {\n          fillOpacity: 0.65,\n          labelOpacity: 0.25,\n          strokeOpacity: 0.65,\n        },\n        disabled: {\n          fill: comboColorDisabled,\n          fillOpacity: 0.25,\n          labelOpacity: 0.25,\n          stroke: comboStrokeDisabled,\n          strokeOpacity: 0.25,\n        },\n      },\n      animation: {\n        enter: 'fade',\n        exit: 'fade',\n        show: 'fade',\n        hide: 'fade',\n        expand: 'combo-expand',\n        collapse: 'combo-collapse',\n        update: [{ fields: ['x', 'y'] }, { fields: ['fill', 'stroke', 'lineWidth'], shape: 'key' }],\n        translate: [{ fields: ['x', 'y'] }],\n      },\n    },\n  };\n}\n", "import type { PaletteOptions } from '../spec/element/palette';\nimport { create } from './base';\nimport type { Theme } from './types';\n\nconst EDGE_PALETTE_OPTIONS: PaletteOptions = {\n  type: 'group',\n  color: [\n    '#637088',\n    '#0F55A6',\n    '#008383',\n    '#9C5D38',\n    '#8B53A6',\n    '#4E40A6',\n    '#8F6608',\n    '#3E801D',\n    '#A65383',\n    '#175E75',\n    '#0F8248',\n  ],\n};\n\nconst tokens = {\n  bgColor: '#000000',\n  comboColor: '#fdfdfd',\n  comboColorDisabled: '#d0e4ff',\n  comboStroke: '#99add1',\n  comboStrokeDisabled: '#969696',\n  edgeColor: '#637088',\n  edgeColorDisabled: '#637088',\n  edgeColorInactive: '#D0E4FF',\n  edgePaletteOptions: EDGE_PALETTE_OPTIONS,\n  nodeColor: '#1783ff',\n  nodeColorDisabled: '#D0E4FF',\n  nodeHaloStrokeOpacityActive: 0.25,\n  nodeHaloStrokeOpacitySelected: 0.45,\n  nodeIconOpacityInactive: 0.45,\n  nodeOpacityDisabled: 0.25,\n  nodeOpacityInactive: 0.45,\n  nodeStroke: '#d0e4ff',\n  textColor: '#ffffff',\n};\n\nexport const dark: Theme = create(tokens);\n", "import { create } from './base';\nimport type { Theme } from './types';\n\nconst tokens = {\n  bgColor: '#ffffff',\n  comboColor: '#99ADD1',\n  comboColorDisabled: '#f0f0f0',\n  comboStroke: '#99add1',\n  comboStrokeDisabled: '#d9d9d9',\n  edgeColor: '#99add1',\n  edgeColorDisabled: '#d9d9d9',\n  edgeColorInactive: '#1B324F',\n  nodeColor: '#1783ff',\n  nodeColorDisabled: '#1B324F',\n  nodeHaloStrokeOpacityActive: 0.15,\n  nodeHaloStrokeOpacitySelected: 0.25,\n  nodeIconOpacityInactive: 0.85,\n  nodeOpacityDisabled: 0.06,\n  nodeOpacityInactive: 0.25,\n  nodeStroke: '#000000',\n  textColor: '#000000',\n};\n\nexport const light: Theme = create(tokens);\n", "import { BaseExtension } from '../registry/extension';\nimport type { DrawContext } from '../runtime/element';\nimport type { CustomBehaviorOption } from '../spec/behavior';\nimport type { DrawData } from './types';\n\nexport type BaseTransformOptions = CustomBehaviorOption;\n\n/**\n * <zh/> \n *\n * <en/> Base class for data transforms\n */\nexport abstract class BaseTransform<T extends BaseTransformOptions = BaseTransformOptions> extends BaseExtension<T> {\n  public beforeDraw(data: DrawData, context: DrawContext): DrawData {\n    return data;\n  }\n\n  public afterLayout(type: 'pre', data: DrawData): void;\n  public afterLayout(type: 'post', data?: undefined): void;\n  public afterLayout(type: 'pre' | 'post', data?: DrawData) {}\n}\n", "import type { ComboData } from '../spec';\nimport type { ID } from '../types';\nimport { idOf } from '../utils/id';\nimport { BaseTransform } from './base-transform';\nimport type { DrawData } from './types';\n\n/**\n * <zh/> \n *\n * <en/> Adjust the drawing order of elements\n */\nexport class ArrangeDrawOrder extends BaseTransform {\n  public beforeDraw(input: DrawData): DrawData {\n    const { model } = this.context;\n\n    const combosToAdd = input.add.combos;\n\n    const arrangeCombo = (combos: Map<string, ComboData>): Map<string, ComboData> => {\n      // id, data, zIndex\n      const order: [ID, ComboData, number][] = [];\n      combos.forEach((combo, id) => {\n        const ancestors = model.getAncestorsData(id, 'combo');\n        const path = ancestors.map((ancestor) => idOf(ancestor)).reverse();\n        // combo  zIndex  combo \n        // The zIndex of the combo is the depth from the root combo\n        order.push([id, combo, path.length]);\n      });\n\n      return new Map(\n        order\n          //  zIndex  combo / Sort based on zIndex in descending order, draw child combo first\n          .sort(([, , zIndex1], [, , zIndex2]) => zIndex2 - zIndex1)\n          .map(([id, datum]) => [id, datum]),\n      );\n    };\n\n    input.add.combos = arrangeCombo(combosToAdd);\n    input.update.combos = arrangeCombo(input.update.combos);\n\n    return input;\n  }\n}\n", "import type { ElementDatum, ElementType } from '../types';\nimport { idOf } from '../utils/id';\nimport type { DrawData, ProcedureData } from './types';\n\n/**\n * <zh/> \n *\n * <en/> Reassign drawing tasks\n * @param input - <zh/> | <en/>DrawData\n * @param type - <zh/> | <en/>type\n * @param elementType - <zh/> | <en/>element type\n * @param datum - <zh/> | <en/>data\n * @param overwrite - <zh/> | <en/>whether to overwrite existing data\n */\nexport function reassignTo(\n  input: DrawData,\n  type: 'add' | 'update' | 'remove',\n  elementType: ElementType,\n  datum: ElementDatum,\n  overwrite?: boolean,\n) {\n  const id = idOf(datum);\n  const typeName = `${elementType}s` as keyof ProcedureData;\n  const exitsDatum: any = overwrite\n    ? datum\n    : input.add[typeName].get(id) || input.update[typeName].get(id) || input.remove[typeName].get(id) || datum;\n  Object.entries(input).forEach(([_type, value]) => {\n    if (type === _type) value[typeName].set(id, exitsDatum);\n    else value[typeName].delete(id);\n  });\n}\n\n/**\n * <zh/> \n *\n * <en/> Determine whether the style is consistent with the original style\n * @param style - <zh/>  | <en/> style\n * @param originalStyle - <zh/>  | <en/> original style\n * @returns <zh/>  | <en/> Whether it is consistent\n */\nexport function isStyleEqual(style: Record<string, unknown>, originalStyle: Record<string, unknown>) {\n  return Object.keys(style).every((key) => style[key] === originalStyle[key]);\n}\n", "import { COMBO_KEY } from '../constants';\nimport type { DrawContext } from '../runtime/element';\nimport type { ComboData } from '../spec';\nimport { isCollapsed } from '../utils/collapsibility';\nimport { getSubgraphRelatedEdges } from '../utils/edge';\nimport { idOf } from '../utils/id';\nimport { BaseTransform } from './base-transform';\nimport type { DrawData } from './types';\nimport { reassignTo } from './utils';\n\n/**\n * <zh/> \n *\n * <en/> Process the collapse and expand of combos\n */\nexport class CollapseExpandCombo extends BaseTransform {\n  public beforeDraw(input: DrawData, context: DrawContext): DrawData {\n    if (context.stage === 'visibility') return input;\n    if (!this.context.model.model.hasTreeStructure(COMBO_KEY)) return input;\n\n    const { model } = this.context;\n    const { add, update } = input;\n    // combo \n    // The order of adding and updating combos is first child and then parent, so reverse traversal is used\n    const combos = [...input.update.combos.entries(), ...input.add.combos.entries()];\n    while (combos.length) {\n      const [id, combo] = combos.pop()!;\n\n      if (isCollapsed(combo)) {\n        const descendants = model.getDescendantsData(id);\n        const descendantIds = descendants.map(idOf);\n        const { internal, external } = getSubgraphRelatedEdges(descendantIds, (id) => model.getRelatedEdgesData(id));\n\n        //  / Remove all descendant elements\n        descendants.forEach((descendant) => {\n          const descendantId = idOf(descendant);\n          //  combo  combo\n          // No longer process the descendant combo of the current combo\n          const comboIndex = combos.findIndex(([id]) => id === descendantId);\n          if (comboIndex !== -1) combos.splice(comboIndex, 1);\n\n          const elementType = model.getElementType(descendantId);\n          reassignTo(input, 'remove', elementType, descendant);\n        });\n\n        // / \n        // If it is an internal edge/node, destroy it\n        internal.forEach((edge) => reassignTo(input, 'remove', 'edge', edge));\n\n        // \n        // If it is an external edge, connect to the collapsed object\n        external.forEach((edge) => {\n          const id = idOf(edge);\n          const edgeElement = this.context.element?.getElement(id);\n          if (edgeElement) update.edges.set(id, edge);\n          else add.edges.set(id, edge);\n        });\n      } else {\n        const children = model.getChildrenData(id);\n        const childrenIds = children.map(idOf);\n        const { edges } = getSubgraphRelatedEdges(childrenIds, (id) => model.getRelatedEdgesData(id));\n\n        [...children, ...edges].forEach((descendant) => {\n          const id = idOf(descendant);\n          const elementType = model.getElementType(id);\n\n          const element = this.context.element?.getElement(id);\n          // \n          // If the node does not exist, add it to the new list, if it exists, add it to the update list\n          if (element) reassignTo(input, 'update', elementType, descendant);\n          else reassignTo(input, 'add', elementType, descendant);\n\n          //  / Continue to expand child nodes\n          if (elementType === 'combo') combos.push([id, descendant as ComboData]);\n        });\n      }\n    }\n\n    return input;\n  }\n}\n", "import { TREE_KEY } from '../constants';\nimport type { NodeData } from '../spec';\nimport type { ElementDatum, ElementType, ID } from '../types';\nimport { isCollapsed } from '../utils/collapsibility';\nimport { idOf } from '../utils/id';\nimport { BaseTransform } from './base-transform';\nimport type { DrawData, ProcedureData } from './types';\nimport { reassignTo } from './utils';\n\n// \n// If it does not exist in the task list, add it to the task list\nconst weakAssignTo = (input: DrawData, type: 'add' | 'update', elementType: ElementType, datum: ElementDatum) => {\n  const typeName = `${elementType}s` as keyof ProcedureData;\n  const id = idOf(datum);\n  if (!input.add[typeName].has(id) && !input.update[typeName].has(id)) {\n    input[type][typeName].set(idOf(datum), datum as any);\n  }\n};\n\n/**\n * <zh/> ()\n *\n * <en/> Process the collapse and expand of (tree)nodes\n */\nexport class CollapseExpandNode extends BaseTransform {\n  private getElement(id: ID) {\n    return this.context.element!.getElement(id);\n  }\n\n  private handleExpand(node: NodeData, input: DrawData) {\n    weakAssignTo(input, 'add', 'node', node);\n    if (isCollapsed(node)) return;\n\n    const id = idOf(node);\n    weakAssignTo(input, 'add', 'node', node);\n\n    const relatedEdges = this.context.model.getRelatedEdgesData(id);\n    relatedEdges.forEach((edge) => {\n      reassignTo(input, 'add', 'edge', edge);\n    });\n\n    const children = this.context.model.getChildrenData(id);\n    children.forEach((child) => {\n      this.handleExpand(child, input);\n    });\n  }\n\n  public beforeDraw(input: DrawData): DrawData {\n    const { graph, model } = this.context;\n\n    if (!model.model.hasTreeStructure(TREE_KEY)) return input;\n\n    const {\n      add: { nodes: nodesToAdd, edges: edgesToAdd },\n      update: { nodes: nodesToUpdate },\n    } = input;\n    const nodesToCollapse = new Map<ID, NodeData>();\n    const nodesToExpand = new Map<ID, NodeData>();\n\n    nodesToAdd.forEach((node, id) => {\n      if (isCollapsed(node)) nodesToCollapse.set(id, node);\n    });\n\n    // \n    // If an edge is created that connects to a collapsed node, add it to the list to be expanded\n    edgesToAdd.forEach((edge) => {\n      if (graph.getElementType(edge.source) !== 'node') return;\n      const source = graph.getNodeData(edge.source);\n      if (isCollapsed(source)) nodesToCollapse.set(edge.source, source);\n    });\n\n    nodesToUpdate.forEach((node, id) => {\n      const nodeElement = this.getElement(id);\n      if (!nodeElement) return;\n\n      const isCurrentCollapsed = nodeElement.attributes.collapsed;\n      if (isCollapsed(node)) {\n        if (!isCurrentCollapsed) nodesToCollapse.set(id, node);\n      } else {\n        if (isCurrentCollapsed) nodesToExpand.set(id, node);\n      }\n    });\n\n    const handledNodes = new Set<ID>();\n\n    nodesToCollapse.forEach((node, id) => {\n      // \n      // Add child nodes to the list to be deletedand delete the associated edges\n      const descendants = model.getDescendantsData(id);\n      descendants.forEach((descendant) => {\n        const id = idOf(descendant);\n        if (handledNodes.has(id)) return;\n\n        reassignTo(input, 'remove', 'node', descendant);\n        const relatedEdges = model.getRelatedEdgesData(id);\n        relatedEdges.forEach((edge) => {\n          reassignTo(input, 'remove', 'edge', edge);\n        });\n\n        handledNodes.add(id);\n      });\n    });\n\n    nodesToExpand.forEach((node, id) => {\n      const ancestors = model.getAncestorsData(id, TREE_KEY);\n\n      // \n      // If the ancestor node is collapsed, add it to the removal list\n      if (ancestors.some(isCollapsed)) {\n        reassignTo(input, 'remove', 'node', node);\n        return;\n      }\n\n      this.handleExpand(node, input);\n    });\n\n    return input;\n  }\n}\n", "import type { Element } from '../types';\n\nconst EFFECT_WEAKMAP = new WeakMap<Element, Record<string, any>>();\n\n/**\n * <zh/> \n *\n * <en/> Determine whether the given style are the same as the previous ones\n * @param target - <zh/>  | <en/> Target element\n * @param key - <zh/>  key | <en/> Cache key\n * @param style - <zh/>  | <en/> Style attribute\n * @returns <zh/>  | <en/> Whether to execute the function\n * @deprecated <zh/>  | <en/> This method is deprecated and does not significantly improve performance\n */\nexport function effect<T extends false | Record<string, any>>(target: Element, key: string, style: T): boolean {\n  // return true;\n  if (!EFFECT_WEAKMAP.has(target)) EFFECT_WEAKMAP.set(target, {});\n  const cache = EFFECT_WEAKMAP.get(target)!;\n  if (!cache[key]) {\n    cache[key] = style;\n    return true;\n  }\n  const original = cache[key];\n  if (isStyleEqual(original, style)) return false;\n  cache[key] = style;\n  return true;\n}\n\n/**\n * <zh/> \n *\n * <en/> Compare whether two style attributes are equal\n * @param a - <zh/>  a | <en/> Style attribute a\n * @param b - <zh/>  b | <en/> Style attribute b\n * @param depth - <zh/>  | <en/> Comparison depth\n * @returns <zh/>  | <en/> Whether they are equal\n * @remarks\n * <zh/>  badgesports \n *\n * <en/> Perform a second-level shallow comparison to compare complex shape attributes such as badges and ports\n */\nconst isStyleEqual = (a: false | Record<string, unknown>, b: false | Record<string, unknown>, depth = 2): boolean => {\n  if (typeof a !== 'object' || typeof b !== 'object') return a === b;\n\n  const keys1 = Object.keys(a);\n  const keys2 = Object.keys(b);\n\n  if (keys1.length !== keys2.length) return false;\n\n  for (const key of keys1) {\n    const val1 = a[key];\n    const val2 = b[key];\n    if (depth > 1 && typeof val1 === 'object' && typeof val2 === 'object') {\n      if (!isStyleEqual(val1 as Record<string, unknown>, val2 as Record<string, unknown>, depth - 1)) return false;\n    } else if (val1 !== val2) return false;\n  }\n\n  return true;\n};\n", "import type { ExtensionCategory } from '../constants';\nimport type { Loosen } from '../types';\nimport { print } from '../utils/print';\nimport { EXTENSION_REGISTRY } from './store';\nimport type { ExtensionRegistry } from './types';\n\n/**\n * <zh/> \n *\n * <en/> Registers a new extension.\n * @param category\n * <zh/> {@link ExtensionCategory}\n *\n * <en/> The category under which the extension is to be registered, see {@link ExtensionCategory}\n * @param type\n * <zh/> \n *\n * <en/> Extension type that used as an identifier when mounting the extension on a graph\n * @param Ctor\n * <zh/> \n *\n * <en/> Whether to override the registered extension\n * @remarks\n * <zh/>  `register` \n *\n * <en/> Built-in extensions are automatically registered when the project is imported. For non-built-in extensions, you can manually register them using the `register` method. Extensions only need to be registered once and can be used anywhere in the project.\n * @example\n * ```ts\n * import { register, BaseNode } from '@antv/g6';\n *\n * class CircleNode extends BaseNode {}\n *\n * register('node', 'circle-node', CircleNode);\n * ```\n * @public\n */\nexport function register<T extends ExtensionCategory>(\n  category: Loosen<T>,\n  type: string,\n  Ctor: ExtensionRegistry[T][string],\n) {\n  const ext = EXTENSION_REGISTRY[category][type];\n  if (ext) {\n    print.warn(`The extension ${type} of ${category} has been registered before, and will be overridden.`);\n  }\n\n  Object.assign(EXTENSION_REGISTRY[category]!, { [type]: Ctor });\n}\n", "import type { Cursor, DisplayObject, CanvasConfig as GCanvasConfig, IChildNode } from '@antv/g';\nimport { CanvasEvent, Canvas as GCanvas } from '@antv/g';\nimport { Renderer as CanvasRenderer } from '@antv/g-canvas';\nimport { Plugin as DragNDropPlugin } from '@antv/g-plugin-dragndrop';\nimport { createDOM } from '@antv/util';\nimport type { CanvasOptions } from '../spec/canvas';\nimport type { CanvasLayer, Point } from '../types';\nimport { getBBoxSize, getCombinedBBox } from '../utils/bbox';\nimport { parsePoint, toPointObject } from '../utils/point';\n\nexport interface CanvasConfig extends Pick<\n  GCanvasConfig,\n  'container' | 'devicePixelRatio' | 'width' | 'height' | 'cursor' | 'background'\n> {\n  /**\n   * <zh/> \n   *\n   * <en/> renderer\n   */\n  renderer?: CanvasOptions['renderer'];\n  /**\n   * <zh/> \n   *\n   * <en/> Whether to enable multiple layers\n   * @defaultValue true\n   * @remarks\n   * <zh/> \n   *\n   * <en/> Non-dynamic parameters, only take effect during initialization\n   */\n  enableMultiLayer?: boolean;\n}\n\nexport interface DataURLOptions {\n  /**\n   * <zh/> \n   *  - viewport: \n   *  - overall: \n   *\n   * <en/> export mode\n   *  - viewport: export the content of the viewport\n   *  - overall: export the entire canvas\n   */\n  mode?: 'viewport' | 'overall';\n  /**\n   * <zh/> \n   *\n   * <en/> image type\n   * @defaultValue 'image/png'\n   */\n  type: 'image/png' | 'image/jpeg' | 'image/webp' | 'image/bmp';\n  /**\n   * <zh/> ,  image/jpeg  image/webp  0 ~ 1\n   *\n   * <en/> image quality, only valid for image/jpeg and image/webp, range 0 ~ 1\n   */\n  encoderOptions: number;\n}\n\nconst SINGLE_LAYER_NAME: CanvasLayer[] = ['main'];\nconst MULTI_LAYER_NAME: CanvasLayer[] = ['background', 'main', 'label', 'transient'];\n\n/**\n * <zh/> \n *\n * <en/> Get the main canvas layer\n * @param layers - <zh/>  | <en/> Canvas layer\n * @returns <zh/>  | <en/> Main canvas layer\n */\nfunction getMainLayerOf(layers: Record<CanvasLayer, GCanvas>) {\n  return layers.main;\n}\n\nexport class Canvas {\n  private extends: {\n    config: CanvasConfig;\n    renderer: CanvasOptions['renderer'];\n    renderers: Record<CanvasLayer, CanvasRenderer>;\n    layers: Record<CanvasLayer, GCanvas>;\n  };\n\n  private config: CanvasConfig = {\n    enableMultiLayer: true,\n  };\n\n  public getConfig() {\n    return this.config;\n  }\n\n  public getLayer(layer: CanvasLayer = 'main') {\n    return this.extends.layers[layer] || getMainLayerOf(this.getLayers());\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Get all layers\n   * @returns <zh/>  <en/> Layer\n   */\n  public getLayers() {\n    return this.extends.layers;\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Get renderer\n   * @param layer - <zh/>  <en/> Layer\n   * @returns <zh/>  <en/> Renderer\n   */\n  public getRenderer(layer: CanvasLayer) {\n    return this.extends.renderers[layer];\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Get camera\n   * @param layer - <zh/>  <en/> Layer\n   * @returns <zh/>  <en/> Camera\n   */\n  public getCamera(layer: CanvasLayer = 'main') {\n    return this.getLayer(layer).getCamera();\n  }\n\n  public getRoot(layer: CanvasLayer = 'main') {\n    return this.getLayer(layer).getRoot();\n  }\n\n  public getContextService(layer: CanvasLayer = 'main') {\n    return this.getLayer(layer).getContextService();\n  }\n\n  public setCursor(cursor: Cursor): void {\n    this.config.cursor = cursor;\n    this.getLayer().setCursor(cursor);\n  }\n\n  public get document() {\n    return this.getLayer().document;\n  }\n\n  public get context() {\n    return this.getLayer().context;\n  }\n\n  constructor(config: CanvasConfig) {\n    Object.assign(this.config, config);\n\n    const { renderer, background, cursor, enableMultiLayer, ...restConfig } = this.config;\n    const layersName = enableMultiLayer ? MULTI_LAYER_NAME : SINGLE_LAYER_NAME;\n    const renderers = createRenderers(renderer, layersName);\n    const layers = Object.fromEntries(\n      layersName.map((layer) => {\n        const canvas = new GCanvas({\n          ...restConfig,\n          supportsMutipleCanvasesInOneContainer: enableMultiLayer,\n          renderer: renderers[layer],\n          background: enableMultiLayer ? (layer === 'background' ? background : undefined) : background,\n        });\n\n        return [layer, canvas];\n      }),\n    ) as Record<CanvasLayer, GCanvas>;\n\n    configCanvasDom(layers);\n\n    this.extends = {\n      config: this.config,\n      renderer,\n      renderers,\n      layers,\n    };\n  }\n\n  public get ready() {\n    return Promise.all(Object.entries(this.getLayers()).map(([, canvas]) => canvas.ready));\n  }\n\n  public resize(width: number, height: number) {\n    Object.assign(this.extends.config, { width, height });\n    Object.values(this.getLayers()).forEach((canvas) => {\n      const camera = canvas.getCamera();\n      const position = camera.getPosition();\n      const focalPoint = camera.getFocalPoint();\n\n      canvas.resize(width, height);\n\n      camera.setPosition(position);\n      camera.setFocalPoint(focalPoint);\n    });\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Get canvas boundary\n   * @param group\n   * <zh/> \n   * - undefined: \n   * - 'elements': \n   * - 'plugins': \n   *\n   * <en/> Element group\n   * - undefined: Get the entire canvas boundary\n   * - 'elements': Get only the element boundary\n   * - 'plugins': Get only the plugin boundary\n   * @returns <zh/>  <en/> Boundary\n   */\n  public getBounds(group?: 'elements' | 'plugins') {\n    return getCombinedBBox(\n      Object.values(this.getLayers())\n        .map((canvas) => {\n          const g = group\n            ? (canvas\n                .getRoot()\n                .childNodes.find((node) => (node as DisplayObject).classList.includes(group)) as DisplayObject)\n            : canvas.getRoot();\n          return g;\n        })\n        .filter((el) => el?.childNodes.length > 0)\n        .map((el) => el.getBounds()),\n    );\n  }\n\n  public getContainer() {\n    const container = this.extends.config.container!;\n    return typeof container === 'string' ? document.getElementById(container!) : container;\n  }\n\n  public getSize(): [number, number] {\n    return [this.extends.config.width || 0, this.extends.config.height || 0];\n  }\n\n  public appendChild<T extends IChildNode>(child: T, index?: number): T {\n    const layer = ((child as unknown as DisplayObject).style?.$layer || 'main') as CanvasLayer;\n    return this.getLayer(layer).appendChild(child, index);\n  }\n\n  public setRenderer(renderer: CanvasOptions['renderer']) {\n    if (renderer === this.extends.renderer) return;\n    const renderers = createRenderers(renderer, this.config.enableMultiLayer ? MULTI_LAYER_NAME : SINGLE_LAYER_NAME);\n    this.extends.renderers = renderers;\n    Object.entries(renderers).forEach(([layer, instance]) => this.getLayer(layer as CanvasLayer).setRenderer(instance));\n    configCanvasDom(this.getLayers());\n  }\n\n  public getCanvasByViewport(point: Point): Point {\n    return parsePoint(this.getLayer().viewport2Canvas(toPointObject(point)));\n  }\n\n  public getViewportByCanvas(point: Point): Point {\n    return parsePoint(this.getLayer().canvas2Viewport(toPointObject(point)));\n  }\n\n  public getViewportByClient(point: Point): Point {\n    return parsePoint(this.getLayer().client2Viewport(toPointObject(point)));\n  }\n\n  public getClientByViewport(point: Point): Point {\n    return parsePoint(this.getLayer().viewport2Client(toPointObject(point)));\n  }\n\n  public getClientByCanvas(point: Point): Point {\n    return this.getClientByViewport(this.getViewportByCanvas(point));\n  }\n\n  public getCanvasByClient(point: Point): Point {\n    const main = this.getLayer();\n    const viewportPoint = main.client2Viewport(toPointObject(point));\n    return parsePoint(main.viewport2Canvas(viewportPoint));\n  }\n\n  public async toDataURL(options: Partial<DataURLOptions> = {}) {\n    const devicePixelRatio = globalThis.devicePixelRatio || 1;\n    const { mode = 'viewport', ...restOptions } = options;\n    let [startX, startY, width, height] = [0, 0, 0, 0];\n\n    if (mode === 'viewport') {\n      [width, height] = this.getSize();\n    } else if (mode === 'overall') {\n      const bounds = this.getBounds();\n      const size = getBBoxSize(bounds);\n      [startX, startY] = bounds.min;\n      [width, height] = size;\n    }\n\n    const container: HTMLElement = createDOM('<div id=\"virtual-image\"></div>');\n\n    const offscreenCanvas = new GCanvas({\n      width,\n      height,\n      renderer: new CanvasRenderer(),\n      devicePixelRatio,\n      container,\n      background: this.extends.config.background,\n    });\n\n    await offscreenCanvas.ready;\n\n    offscreenCanvas.appendChild(this.getLayer('background').getRoot().cloneNode(true));\n    offscreenCanvas.appendChild(this.getRoot().cloneNode(true));\n\n    // Handle label canvas\n    const label = this.getLayer('label').getRoot().cloneNode(true);\n    const originCanvasPosition = offscreenCanvas.viewport2Canvas({ x: 0, y: 0 });\n    const currentCanvasPosition = this.getCanvasByViewport([0, 0]);\n    label.translate([\n      currentCanvasPosition[0] - originCanvasPosition.x,\n      currentCanvasPosition[1] - originCanvasPosition.y,\n    ]);\n    label.scale(1 / this.getCamera().getZoom());\n    offscreenCanvas.appendChild(label);\n\n    offscreenCanvas.appendChild(this.getLayer('transient').getRoot().cloneNode(true));\n\n    const camera = this.getCamera();\n    const offscreenCamera = offscreenCanvas.getCamera();\n\n    if (mode === 'viewport') {\n      offscreenCamera.setZoom(camera.getZoom());\n      offscreenCamera.setPosition(camera.getPosition());\n      offscreenCamera.setFocalPoint(camera.getFocalPoint());\n    } else if (mode === 'overall') {\n      const [x, y, z] = offscreenCamera.getPosition();\n      const [fx, fy, fz] = offscreenCamera.getFocalPoint();\n      offscreenCamera.setPosition([x + startX, y + startY, z]);\n      offscreenCamera.setFocalPoint([fx + startX, fy + startY, fz]);\n    }\n\n    const contextService = offscreenCanvas.getContextService();\n\n    return new Promise<string>((resolve) => {\n      offscreenCanvas.addEventListener(CanvasEvent.RERENDER, async () => {\n        //  / Wait for the image to render\n        await new Promise((r) => setTimeout(r, 300));\n        const url = await contextService.toDataURL(restOptions);\n        resolve(url);\n      });\n    });\n  }\n\n  public destroy() {\n    Object.values(this.getLayers()).forEach((canvas) => {\n      const camera = canvas.getCamera();\n      camera.cancelLandmarkAnimation();\n      canvas.destroy();\n    });\n  }\n}\n\n/**\n * <zh/> \n *\n * <en/> Create renderers\n * @param renderer - <zh/>  <en/> Renderer creator\n * @param layersName - <zh/>  <en/> Layer name\n * @returns <zh/>  <en/> Renderer\n */\nfunction createRenderers(renderer: CanvasConfig['renderer'], layersName: CanvasLayer[]) {\n  return Object.fromEntries(\n    layersName.map((layer) => {\n      const instance = renderer?.(layer) || new CanvasRenderer();\n\n      if (instance instanceof CanvasRenderer) {\n        instance.setConfig({ enableDirtyRectangleRendering: false });\n      }\n\n      if (layer === 'main') {\n        instance.registerPlugin(\n          new DragNDropPlugin({\n            isDocumentDraggable: true,\n            isDocumentDroppable: true,\n            dragstartDistanceThreshold: 10,\n            dragstartTimeThreshold: 100,\n          }),\n        );\n      } else {\n        instance.unregisterPlugin(instance.getPlugin('dom-interaction'));\n      }\n\n      return [layer, instance];\n    }),\n  ) as Record<CanvasLayer, CanvasRenderer>;\n}\n\n/**\n * <zh/>  DOM\n *\n * <en/> Configure canvas DOM\n * @param layers - <zh/>  <en/> Canvas\n */\nfunction configCanvasDom(layers: Record<CanvasLayer, GCanvas>) {\n  Object.entries(layers).forEach(([layer, canvas]) => {\n    const domElement = canvas.getContextService().getDomElement() as unknown as HTMLElement;\n\n    // \n    // Set canvas style in browser environment\n    if (domElement?.style) {\n      domElement.style.gridArea = '1 / 1 / 2 / 2';\n      domElement.style.outline = 'none';\n      domElement.tabIndex = 1;\n\n      if (layer !== 'main') domElement.style.pointerEvents = 'none';\n    }\n\n    if (domElement?.parentElement) {\n      domElement.parentElement.style.display = 'grid';\n      // \n      domElement.parentElement.style.isolation = 'isolate';\n    }\n  });\n}\n", "import { isNumber } from '@antv/util';\n\nconst parseInt10 = (d: string) => (d ? parseInt(d) : 0);\n\n/**\n * Get the container's bounding size.\n * @param container dom element.\n * @returns the container width and height\n */\nfunction getContainerSize(container: HTMLElement): [number, number] {\n  const style = getComputedStyle(container);\n\n  const wrapperWidth = container.clientWidth || parseInt10(style.width);\n  const wrapperHeight = container.clientHeight || parseInt10(style.height);\n\n  const widthPadding = parseInt10(style.paddingLeft) + parseInt10(style.paddingRight);\n  const heightPadding = parseInt10(style.paddingTop) + parseInt10(style.paddingBottom);\n\n  return [wrapperWidth - widthPadding, wrapperHeight - heightPadding];\n}\n\n/**\n * Get the size of Graph.\n * @param container container of Graph\n * @returns Size of Graph\n */\nexport function sizeOf(container: HTMLElement | null): [number, number] {\n  if (!container) return [0, 0];\n\n  let effectiveWidth = 640;\n  let effectiveHeight = 480;\n\n  const [containerWidth, containerHeight] = getContainerSize(container);\n  effectiveWidth = containerWidth || effectiveWidth;\n  effectiveHeight = containerHeight || effectiveHeight;\n\n  /** Minimum width */\n  const MIN_CHART_WIDTH = 1;\n  /** Minimum height */\n  const MIN_CHART_HEIGHT = 1;\n\n  return [\n    Math.max(isNumber(effectiveWidth) ? effectiveWidth : MIN_CHART_WIDTH, MIN_CHART_WIDTH),\n    Math.max(isNumber(effectiveHeight) ? effectiveHeight : MIN_CHART_HEIGHT, MIN_CHART_HEIGHT),\n  ];\n}\n", "import type { IAnimation } from '@antv/g';\nimport type { AnimationType, GraphEvent } from '../../constants';\nimport type {\n  ElementDatum,\n  ElementType,\n  IAnimateEvent,\n  IElementLifeCycleEvent,\n  IGraphLifeCycleEvent,\n  IViewportEvent,\n  TransformOptions,\n} from '../../types';\n\nexport class BaseEvent {\n  constructor(public type: string) {}\n}\n\nexport class GraphLifeCycleEvent extends BaseEvent implements IGraphLifeCycleEvent {\n  constructor(\n    type:\n      | GraphEvent.BEFORE_RENDER\n      | GraphEvent.AFTER_RENDER\n      | GraphEvent.BEFORE_DRAW\n      | GraphEvent.AFTER_DRAW\n      | GraphEvent.BEFORE_LAYOUT\n      | GraphEvent.AFTER_LAYOUT\n      | GraphEvent.BEFORE_STAGE_LAYOUT\n      | GraphEvent.AFTER_STAGE_LAYOUT\n      | GraphEvent.BEFORE_SIZE_CHANGE\n      | GraphEvent.AFTER_SIZE_CHANGE\n      | GraphEvent.BATCH_START\n      | GraphEvent.BATCH_END\n      | GraphEvent.BEFORE_DESTROY\n      | GraphEvent.AFTER_DESTROY,\n    public data?: any,\n  ) {\n    super(type);\n  }\n}\n\nexport class AnimateEvent extends BaseEvent implements IAnimateEvent {\n  constructor(\n    type: GraphEvent.BEFORE_ANIMATE | GraphEvent.AFTER_ANIMATE,\n    public animationType: AnimationType,\n    public animation: IAnimation | null,\n    public data?: any,\n  ) {\n    super(type);\n  }\n}\n\nexport class ElementLifeCycleEvent extends BaseEvent implements IElementLifeCycleEvent {\n  constructor(\n    type:\n      | GraphEvent.BEFORE_ELEMENT_CREATE\n      | GraphEvent.AFTER_ELEMENT_CREATE\n      | GraphEvent.BEFORE_ELEMENT_UPDATE\n      | GraphEvent.AFTER_ELEMENT_UPDATE\n      | GraphEvent.BEFORE_ELEMENT_DESTROY\n      | GraphEvent.AFTER_ELEMENT_DESTROY,\n    public elementType: ElementType,\n    public data: ElementDatum,\n  ) {\n    super(type);\n  }\n}\n\nexport class ViewportEvent extends BaseEvent implements IViewportEvent {\n  constructor(\n    type: GraphEvent.BEFORE_TRANSFORM | GraphEvent.AFTER_TRANSFORM,\n    public data: TransformOptions,\n  ) {\n    super(type);\n  }\n}\n", "import type EventEmitter from '@antv/event-emitter';\nimport type { DisplayObject } from '@antv/g';\nimport { Document } from '@antv/g';\nimport { Target } from '../../types';\nimport { isCombo, isEdge, isNode } from '../element';\nimport type { BaseEvent } from './events';\n\nexport * from './events';\n\n/**\n * <zh/>  Event \n *\n * <en/> Trigger event based on Event object\n * @param emitter - <zh/>  | <en/> event target\n * @param event - <zh/>  | <en/> event object\n */\nexport function emit(emitter: EventEmitter, event: BaseEvent) {\n  emitter.emit(event.type, event);\n}\n\n/**\n * <zh/> \n *\n * <en/> Get the event target element\n * @param shape - <zh/>  | <en/> event shape\n * @returns <zh/>  | <en/> target element\n * @remarks\n * <zh/> \n *\n * <en/> Most of the event responses will hit the internal graphics of the element, and this method can be used to get the element to which it belongs\n */\nexport function eventTargetOf(shape?: DisplayObject | Document): { type: string; element: Target } | null {\n  if (!shape) return null;\n\n  if (shape instanceof Document) {\n    return { type: 'canvas', element: shape };\n  }\n\n  let element: DisplayObject | null = shape;\n  while (element) {\n    //  label  \n    // This condition is not applicable to the case where the label and node are rendered separately\n    if (isNode(element)) return { type: 'node', element };\n    if (isEdge(element)) return { type: 'edge', element };\n    if (isCombo(element)) return { type: 'combo', element };\n    element = element.parentElement as DisplayObject | null;\n  }\n\n  return null;\n}\n", "import { ElementDatum } from '../types';\n\n/**\n * <zh/>  zIndex\n * <en/> Get the zIndex of the element\n * @param datum - <zh/>  | <en/> element data\n * @returns - <zh/> zIndex | <en/> zIndex\n */\nexport function getZIndexOf(datum: ElementDatum): number {\n  return datum?.style?.zIndex || 0;\n}\n", "import type { DisplayObject } from '@antv/g';\nimport { get, set } from '@antv/util';\n\nconst CacheTargetKey = 'cachedStyle';\n\nconst getStyleCacheKey = (name: string) => `__${name}__`;\n\n/**\n * <zh/> \n *\n * <en/> Cache shape style\n * @param element - <zh/>  | <en/> shape element\n * @param name - <zh/>  | <en/> style name\n */\nexport function cacheStyle(element: DisplayObject, name: string | string[]) {\n  const names = Array.isArray(name) ? name : [name];\n  if (!get(element, CacheTargetKey)) set(element, CacheTargetKey, {});\n  names.forEach((n) => {\n    set(get(element, CacheTargetKey), getStyleCacheKey(n), element.attributes[n]);\n  });\n}\n\n/**\n * <zh/> \n *\n * <en/> Get cached style\n * @param element - <zh/>  | <en/> shape element\n * @param name - <zh/>  | <en/> style name\n * @returns <zh/>  | <en/> style value\n */\nexport function getCachedStyle(element: DisplayObject, name: string) {\n  return get(element, [CacheTargetKey, getStyleCacheKey(name)]);\n}\n\n/**\n * <zh/> \n *\n * <en/> Whether there is a cached style\n * @param element - <zh/>  | <en/> shape element\n * @param name - <zh/>  | <en/> style name\n * @returns <zh/>  | <en/> Whether there is a cached style\n */\nexport function hasCachedStyle(element: DisplayObject, name: string) {\n  return getStyleCacheKey(name) in (get(element, CacheTargetKey) || {});\n}\n\n/**\n * <zh/> \n *\n * <en/> Set cached style\n * @param element - <zh/>  | <en/> shape element\n * @param name - <zh/>  | <en/> style name\n * @param value - <zh/>  | <en/> style value\n */\nexport function setCacheStyle(element: DisplayObject, name: string, value: any) {\n  set(element, [CacheTargetKey, getStyleCacheKey(name)], value);\n}\n", "import type { IAnimation } from '@antv/g';\nimport { executor } from '../animations/executor';\nimport type { AnimationContext, AnimationEffectTiming } from '../animations/types';\nimport type { ID, Point } from '../types';\nimport { createAnimationsProxy, getElementAnimationOptions, inferDefaultValue } from '../utils/animation';\nimport { getCachedStyle } from '../utils/cache';\nimport type { RuntimeContext } from './types';\n\nexport class Animation {\n  private context: RuntimeContext;\n\n  constructor(context: RuntimeContext) {\n    this.context = context;\n  }\n\n  private tasks: [AnimationContext, AnimationCallbacks | undefined][] = [];\n\n  private animations: Set<IAnimation> = new Set();\n\n  private getTasks() {\n    const tasks = [...this.tasks];\n    this.tasks = [];\n    return tasks;\n  }\n\n  public add(context: AnimationContext, callbacks?: AnimationCallbacks) {\n    this.tasks.push([context, callbacks]);\n  }\n\n  public animate(\n    localAnimation?: AnimationEffectTiming | boolean,\n    callbacks?: AnimationCallbacks,\n    extendOptions?: ExtendOptions,\n  ) {\n    callbacks?.before?.();\n\n    const animations = this.getTasks()\n      .map(([context, cb]) => {\n        const { element, elementType, stage } = context;\n        const options = getElementAnimationOptions(this.context.options, elementType, stage, localAnimation);\n        cb?.before?.();\n        const animation = options.length ? executor(element, this.inferStyle(context, extendOptions), options) : null;\n\n        if (animation) {\n          cb?.beforeAnimate?.(animation);\n          animation.finished.then(() => {\n            cb?.afterAnimate?.(animation);\n            cb?.after?.();\n            this.animations.delete(animation);\n          });\n        } else cb?.after?.();\n\n        return animation;\n      })\n      .filter(Boolean) as IAnimation[];\n\n    animations.forEach((animation) => this.animations.add(animation));\n\n    const animation = createAnimationsProxy(animations);\n\n    if (animation) {\n      callbacks?.beforeAnimate?.(animation);\n\n      animation.finished.then(() => {\n        callbacks?.afterAnimate?.(animation);\n        callbacks?.after?.();\n        this.release();\n      });\n    } else callbacks?.after?.();\n\n    return animation;\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Infer additional animation styles\n   * @param context - <zh/>  | <en/> Animation context\n   * @param options - <zh/>  | <en/> Extend options\n   * @returns <zh/>  | <en/> Initial style and final style\n   */\n  public inferStyle(\n    context: AnimationContext,\n    options?: ExtendOptions,\n  ): [Record<string, unknown>, Record<string, unknown>] {\n    const { element, elementType, stage, originalStyle, updatedStyle = {} } = context;\n\n    if (!context.modifiedStyle) context.modifiedStyle = { ...originalStyle, ...updatedStyle };\n    const { modifiedStyle } = context;\n\n    const fromStyle: Record<string, unknown> = {};\n    const toStyle: Record<string, unknown> = {};\n\n    if (stage === 'enter') {\n      Object.assign(fromStyle, { opacity: 0 });\n    } else if (stage === 'exit') {\n      Object.assign(toStyle, { opacity: 0 });\n    } else if (stage === 'show') {\n      Object.assign(fromStyle, { opacity: 0 });\n      Object.assign(toStyle, { opacity: getCachedStyle(element, 'opacity') ?? inferDefaultValue('opacity') });\n    } else if (stage === 'hide') {\n      Object.assign(fromStyle, { opacity: getCachedStyle(element, 'opacity') ?? inferDefaultValue('opacity') });\n      Object.assign(toStyle, { opacity: 0 });\n    } else if (stage === 'collapse') {\n      const { collapse } = options || {};\n      const { target, descendants, position } = collapse!;\n      if (elementType === 'node') {\n        // \n        // Set the target position for the element to be deleted\n        if (descendants.includes(element.id)) {\n          const [x, y, z] = position;\n          Object.assign(toStyle, { x, y, z });\n        }\n      } else if (elementType === 'combo') {\n        if (element.id === target || descendants.includes(element.id)) {\n          const [x, y] = position;\n          Object.assign(toStyle, { x, y, childrenNode: originalStyle.childrenNode });\n        }\n      } else if (elementType === 'edge') {\n        Object.assign(toStyle, { sourceNode: modifiedStyle.sourceNode, targetNode: modifiedStyle.targetNode });\n      }\n    } else if (stage === 'expand') {\n      const { expand } = options || {};\n      const { target, descendants, position } = expand!;\n      if (elementType === 'node') {\n        // \n        // Set the starting position of the expanded node\n        if (element.id === target || descendants.includes(element.id)) {\n          const [x, y, z] = position;\n          Object.assign(fromStyle, { x, y, z });\n        }\n      } else if (elementType === 'combo') {\n        // \n        // Set the child elements of the expanded combo\n        if (element.id === target || descendants.includes(element.id)) {\n          const [x, y, z] = position;\n          Object.assign(fromStyle, { x, y, z, childrenNode: modifiedStyle.childrenNode });\n        }\n      } else if (elementType === 'edge') {\n        // \n        // Set the starting point and end point of the edge after expansion\n        Object.assign(fromStyle, { sourceNode: modifiedStyle.sourceNode, targetNode: modifiedStyle.targetNode });\n      }\n    }\n\n    return [\n      Object.keys(fromStyle).length > 0 ? Object.assign({}, originalStyle, fromStyle) : originalStyle,\n      Object.keys(toStyle).length > 0 ? Object.assign({}, modifiedStyle, toStyle) : modifiedStyle,\n    ];\n  }\n\n  public stop() {\n    this.animations.forEach((animation) => animation.cancel());\n  }\n\n  public clear() {\n    this.tasks = [];\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Release stock animation objects\n   * @description see: https://github.com/antvis/G/issues/1731\n   */\n  private release() {\n    const { canvas } = this.context;\n\n    // @ts-expect-error private property\n    const animationsWithPromises = canvas.document?.timeline?.animationsWithPromises;\n    if (animationsWithPromises) {\n      // @ts-expect-error private property\n      canvas.document.timeline.animationsWithPromises = animationsWithPromises.filter(\n        (animation: IAnimation) => animation.playState !== 'finished',\n      );\n    }\n  }\n\n  public destroy() {\n    this.stop();\n    this.animations.clear();\n    this.tasks = [];\n  }\n}\n\ninterface AnimationCallbacks {\n  before?: () => void;\n  beforeAnimate?: (animation: IAnimation) => void;\n  afterAnimate?: (animation: IAnimation) => void;\n  after?: () => void;\n}\n\ninterface ExtendOptions {\n  /**\n   * <zh/> stage  collapse /\n   *\n   * <en/> When the stage is collapse, specify the target element and its descendants to expand/collapse\n   */\n  collapse?: {\n    target: ID;\n    descendants: ID[];\n    position: Point;\n  };\n\n  /**\n   * <zh/> stage  expand /\n   *\n   * <en/> When the stage is expand, specify the target element and its descendants to expand/collapse\n   */\n  expand?: {\n    target: ID;\n    descendants: ID[];\n    position: Point;\n  };\n}\n", "import { GraphEvent } from '../constants';\nimport type { BaseEvent } from '../utils/event';\nimport { GraphLifeCycleEvent } from '../utils/event';\nimport type { RuntimeContext } from './types';\n\nexport class BatchController {\n  private context: RuntimeContext;\n\n  private batchCount: number = 0;\n\n  constructor(context: RuntimeContext) {\n    this.context = context;\n  }\n\n  private emit(event: BaseEvent) {\n    const { graph } = this.context;\n    graph.emit(event.type, event);\n  }\n\n  public startBatch(initiate = true) {\n    this.batchCount++;\n    if (this.batchCount === 1) this.emit(new GraphLifeCycleEvent(GraphEvent.BATCH_START, { initiate }));\n  }\n\n  public endBatch() {\n    this.batchCount--;\n    if (this.batchCount === 0) this.emit(new GraphLifeCycleEvent(GraphEvent.BATCH_END));\n  }\n\n  public get isBatching() {\n    return this.batchCount > 0;\n  }\n\n  public destroy() {\n    // @ts-ignore\n    this.context = null;\n  }\n}\n", "import type { DisplayObject, FederatedPointerEvent, FederatedWheelEvent } from '@antv/g';\nimport type { BaseBehavior } from '../behaviors/base-behavior';\nimport { CommonEvent, ContainerEvent } from '../constants';\nimport { ExtensionController } from '../registry/extension';\nimport type { BehaviorOptions, CustomBehaviorOption } from '../spec/behavior';\nimport type { Target } from '../types';\nimport { isToBeDestroyed } from '../utils/element';\nimport { eventTargetOf } from '../utils/event';\nimport type { RuntimeContext } from './types';\n\nexport class BehaviorController extends ExtensionController<BaseBehavior<CustomBehaviorOption>> {\n  /**\n   * <zh/> \n   *\n   *  <en/> The current event target\n   */\n  private currentTarget: Target | null = null;\n\n  private currentTargetType: string | null = null;\n\n  public category = 'behavior' as const;\n\n  constructor(context: RuntimeContext) {\n    super(context);\n    this.forwardEvents();\n    this.setBehaviors(this.context.options.behaviors || []);\n  }\n\n  public setBehaviors(behaviors: BehaviorOptions) {\n    this.setExtensions(behaviors);\n  }\n\n  private forwardEvents() {\n    const container = this.context.canvas.getContainer();\n    if (container) {\n      [ContainerEvent.KEY_DOWN, ContainerEvent.KEY_UP].forEach((name) => {\n        container.addEventListener(name, this.forwardContainerEvents);\n      });\n    }\n\n    const canvas = this.context.canvas.document;\n    if (canvas) {\n      [\n        CommonEvent.CLICK,\n        CommonEvent.DBLCLICK,\n        CommonEvent.POINTER_OVER,\n        CommonEvent.POINTER_LEAVE,\n        CommonEvent.POINTER_ENTER,\n        CommonEvent.POINTER_MOVE,\n        CommonEvent.POINTER_OUT,\n        CommonEvent.POINTER_DOWN,\n        CommonEvent.POINTER_UP,\n        CommonEvent.CONTEXT_MENU,\n        CommonEvent.DRAG_START,\n        CommonEvent.DRAG,\n        CommonEvent.DRAG_END,\n        CommonEvent.DRAG_ENTER,\n        CommonEvent.DRAG_OVER,\n        CommonEvent.DRAG_LEAVE,\n        CommonEvent.DROP,\n        CommonEvent.WHEEL,\n      ].forEach((name) => {\n        canvas.addEventListener(name, this.forwardCanvasEvents);\n      });\n    }\n  }\n\n  private forwardCanvasEvents = (event: FederatedPointerEvent | FederatedWheelEvent) => {\n    const { target: originalTarget } = event;\n    const target = eventTargetOf(originalTarget as DisplayObject);\n    if (!target) return;\n    const { graph, canvas } = this.context;\n    const { type: targetType, element: targetElement } = target;\n    // \n    // Elements that are about to be destroyed or have been destroyed no longer trigger events\n    if ('destroyed' in targetElement && (isToBeDestroyed(targetElement) || targetElement.destroyed)) return;\n\n    const { type, detail, button } = event;\n    const stdEvent = { ...event, target: targetElement, targetType, originalTarget };\n\n    if (type === CommonEvent.POINTER_MOVE) {\n      if (this.currentTarget !== targetElement) {\n        if (this.currentTarget) {\n          graph.emit(`${this.currentTargetType}:${CommonEvent.POINTER_LEAVE}`, {\n            ...stdEvent,\n            type: CommonEvent.POINTER_LEAVE,\n            target: this.currentTarget,\n            targetType: this.currentTargetType,\n          });\n        }\n        if (targetElement) {\n          Object.assign(stdEvent, { type: CommonEvent.POINTER_ENTER });\n          graph.emit(`${targetType}:${CommonEvent.POINTER_ENTER}`, stdEvent);\n        }\n      }\n      this.currentTarget = targetElement;\n      this.currentTargetType = targetType;\n    }\n\n    //  / Click event except right click\n    if (!(type === CommonEvent.CLICK && button === 2)) {\n      graph.emit(`${targetType}:${type}`, stdEvent);\n      graph.emit(type, stdEvent);\n    }\n\n    //  / Double click event\n    if (type === CommonEvent.CLICK && detail === 2) {\n      Object.assign(stdEvent, { type: CommonEvent.DBLCLICK });\n      graph.emit(`${targetType}:${CommonEvent.DBLCLICK}`, stdEvent);\n      graph.emit(CommonEvent.DBLCLICK, stdEvent);\n    }\n\n    //  / Contextmenu\n    if (type === CommonEvent.POINTER_DOWN && button === 2) {\n      Object.assign(stdEvent, {\n        type: CommonEvent.CONTEXT_MENU,\n        preventDefault: () => {\n          canvas.getContainer()?.addEventListener(CommonEvent.CONTEXT_MENU, (e) => e.preventDefault(), {\n            once: true,\n          });\n        },\n      });\n      graph.emit(`${targetType}:${CommonEvent.CONTEXT_MENU}`, stdEvent);\n      graph.emit(CommonEvent.CONTEXT_MENU, stdEvent);\n    }\n  };\n\n  private forwardContainerEvents = (event: FocusEvent | KeyboardEvent) => {\n    this.context.graph.emit(event.type, event);\n  };\n\n  public destroy(): void {\n    const container = this.context.canvas.getContainer();\n    if (container) {\n      [ContainerEvent.KEY_DOWN, ContainerEvent.KEY_UP].forEach((name) => {\n        container.removeEventListener(name, this.forwardContainerEvents);\n      });\n    }\n    this.context.canvas.document.removeAllEventListeners();\n    super.destroy();\n  }\n}\n", "import type { Edge, Graph as Graphlib, Node } from '@antv/graphlib';\nimport { TREE_KEY } from '../constants';\nimport type { ComboData, EdgeData, NodeData } from '../spec';\nimport { NodeLikeData } from '../types/data';\nimport { idOf } from './id';\nimport { isEdgeData } from './is';\n\nexport function toGraphlibData(datums: EdgeData): Edge<EdgeData>;\nexport function toGraphlibData(datums: NodeLikeData): Node<NodeLikeData>;\n/**\n * <zh/>  NodeDataEdgeDataComboData  graphlib \n *\n * <en/> Transform NodeData, EdgeData, ComboData to graphlib data structure\n * @param data - <zh/> combo  | <en/> node, combo data\n * @returns <zh/> graphlib  | <en/> graphlib data\n */\nexport function toGraphlibData(data: NodeData | EdgeData | ComboData): Node<NodeLikeData> | Edge<EdgeData> {\n  const { id = idOf(data), style, data: customData, ...rest } = data;\n  const _data = { ...data, style: { ...style }, data: { ...customData } };\n\n  if (isEdgeData(data)) return { id, data: _data, ...rest } as Edge<EdgeData>;\n  return { id, data: _data } as Node<NodeLikeData>;\n}\n\nexport function toG6Data<T extends EdgeData>(data: Edge<T>): T;\nexport function toG6Data<T extends NodeLikeData>(data: Node<T>): T;\n/**\n * <zh/>  NodeEdgeCombo  G6 \n *\n * <en/> Transform Node, Edge, Combo to G6 data structure\n * @param data - <zh/> graphlib Combo  | <en/> graphlib node, edge, combo data\n * @returns <zh/> G6  | <en/> G6 data\n */\nexport function toG6Data<T extends NodeData | EdgeData | ComboData>(data: Node<T> | Edge<T>): T {\n  return data.data;\n}\n\n/**\n * <zh/> \n *\n * <en/> Create tree structure\n * @param model - <zh/>  | <en/> data model\n */\nexport function createTreeStructure(model: Graphlib<any, any>) {\n  if (model.hasTreeStructure(TREE_KEY)) return;\n\n  model.attachTreeStructure(TREE_KEY);\n  const edges = model.getAllEdges();\n\n  for (const edge of edges) {\n    const { source, target } = edge;\n    model.setParent(target, source, TREE_KEY);\n  }\n}\n", "import { Graph as GraphLib } from '@antv/graphlib';\nimport { isNil, isNumber, uniq } from '@antv/util';\nimport { COMBO_KEY, ChangeType, TREE_KEY } from '../constants';\nimport type { ComboData, EdgeData, GraphData, NodeData } from '../spec';\nimport type {\n  DataAdded,\n  DataChange,\n  DataID,\n  DataRemoved,\n  DataUpdated,\n  ElementDatum,\n  HierarchyKey,\n  ID,\n  NodeLikeData,\n  PartialEdgeData,\n  PartialGraphData,\n  PartialNodeLikeData,\n  Point,\n  State,\n} from '../types';\nimport type { EdgeDirection } from '../types/edge';\nimport type { ElementType } from '../types/element';\nimport { isCollapsed } from '../utils/collapsibility';\nimport { cloneElementData, isElementDataEqual, mergeElementsData } from '../utils/data';\nimport { arrayDiff } from '../utils/diff';\nimport { toG6Data, toGraphlibData } from '../utils/graphlib';\nimport { idOf, parentIdOf } from '../utils/id';\nimport { positionOf } from '../utils/position';\nimport { format, print } from '../utils/print';\nimport { dfs } from '../utils/traverse';\nimport { add } from '../utils/vector';\n\nexport class DataController {\n  public model: GraphLib<NodeLikeData, EdgeData>;\n\n  /**\n   * <zh/>  combo  id\n   *\n   * <en/> The ids of the last deleted combos\n   * @remarks\n   * <zh/>  combo  id  comboIds  Graphlib  changes  NodeRemoved  combo  node\n   *  combo  id isCombo \n   *\n   * <en/> When the combo is deleted, its id will be removed from comboIds. At this time, the NodeRemoved obtained according to the changes event of Graphlib cannot distinguish whether it is a combo or a node.\n   * Therefore, it is necessary to record the id of the last deleted combo and use it to judge isCombo\n   */\n  protected latestRemovedComboIds = new Set<ID>();\n\n  protected comboIds = new Set<ID>();\n\n  /**\n   * <zh/> \n   *\n   * <en/> Get detailed data changes\n   */\n  private changes: DataChange[] = [];\n\n  /**\n   * <zh/> \n   *\n   * <en/> Batch processing counter\n   */\n  private batchCount = 0;\n\n  /**\n   * <zh/> \n   *\n   * <en/> Whether it is in traceless mode\n   */\n  private isTraceless = false;\n\n  constructor() {\n    this.model = new GraphLib();\n  }\n\n  private pushChange(change: DataChange) {\n    if (this.isTraceless) return;\n    const { type } = change;\n\n    if (type === ChangeType.NodeUpdated || type === ChangeType.EdgeUpdated || type === ChangeType.ComboUpdated) {\n      const { value, original } = change;\n      this.changes.push({ value: cloneElementData(value), original: cloneElementData(original), type } as DataUpdated);\n    } else {\n      this.changes.push({ value: cloneElementData(change.value), type } as DataAdded | DataRemoved);\n    }\n  }\n\n  public getChanges(): DataChange[] {\n    return this.changes;\n  }\n\n  public clearChanges() {\n    this.changes = [];\n  }\n\n  public batch(callback: () => void) {\n    this.batchCount++;\n    this.model.batch(callback);\n    this.batchCount--;\n  }\n\n  protected isBatching() {\n    return this.batchCount > 0;\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Perform operations without leaving records\n   * @param callback - <zh/>  | <en/> callback function\n   * @remarks\n   * <zh/> \n   *\n   * <en/> Usually used to adjust elements at runtime and synchronize data to avoid triggering data changes and causing redraws\n   */\n  public silence(callback: () => void) {\n    this.isTraceless = true;\n    callback();\n    this.isTraceless = false;\n  }\n\n  public isCombo(id: ID) {\n    return this.comboIds.has(id) || this.latestRemovedComboIds.has(id);\n  }\n\n  public getData() {\n    return {\n      nodes: this.getNodeData(),\n      edges: this.getEdgeData(),\n      combos: this.getComboData(),\n    };\n  }\n\n  public getNodeData(ids?: ID[]) {\n    return this.model.getAllNodes().reduce((acc, node) => {\n      const data = toG6Data(node);\n      if (this.isCombo(idOf(data))) return acc;\n      if (ids === undefined) acc.push(data);\n      else ids.includes(idOf(data)) && acc.push(data);\n      return acc;\n    }, [] as NodeData[]);\n  }\n\n  public getEdgeDatum(id: ID) {\n    return toG6Data(this.model.getEdge(id));\n  }\n\n  public getEdgeData(ids?: ID[]) {\n    return this.model.getAllEdges().reduce((acc, edge) => {\n      const data = toG6Data(edge);\n      if (ids === undefined) acc.push(data);\n      else ids.includes(idOf(data)) && acc.push(data);\n      return acc;\n    }, [] as EdgeData[]);\n  }\n\n  public getComboData(ids?: ID[]) {\n    return this.model.getAllNodes().reduce((acc, combo) => {\n      const data = toG6Data(combo);\n      if (!this.isCombo(idOf(data))) return acc;\n\n      if (ids === undefined) acc.push(data as ComboData);\n      else ids.includes(idOf(data)) && acc.push(data as ComboData);\n      return acc;\n    }, [] as ComboData[]);\n  }\n\n  public getRootsData(hierarchyKey: HierarchyKey = TREE_KEY) {\n    return this.model.getRoots(hierarchyKey).map(toG6Data);\n  }\n\n  public getAncestorsData(id: ID, hierarchyKey: HierarchyKey): NodeLikeData[] {\n    const { model } = this;\n    if (!model.hasNode(id) || !model.hasTreeStructure(hierarchyKey)) return [];\n    return model.getAncestors(id, hierarchyKey).map(toG6Data);\n  }\n\n  public getDescendantsData(id: ID): NodeLikeData[] {\n    const root = this.getElementDataById(id) as NodeLikeData;\n    const data: NodeLikeData[] = [];\n    dfs(\n      root,\n      (node) => {\n        if (node !== root) data.push(node);\n      },\n      (node) => this.getChildrenData(idOf(node)),\n      'TB',\n    );\n    return data;\n  }\n\n  public getParentData(id: ID, hierarchyKey: HierarchyKey): NodeLikeData | undefined {\n    const { model } = this;\n    if (!hierarchyKey) {\n      print.warn('The hierarchy structure key is not specified');\n      return undefined;\n    }\n    if (!model.hasNode(id) || !model.hasTreeStructure(hierarchyKey)) return undefined;\n    const parent = model.getParent(id, hierarchyKey);\n    return parent ? toG6Data(parent) : undefined;\n  }\n\n  public getChildrenData(id: ID): NodeLikeData[] {\n    const structureKey = this.getElementType(id) === 'node' ? TREE_KEY : COMBO_KEY;\n    const { model } = this;\n    if (!model.hasNode(id) || !model.hasTreeStructure(structureKey)) return [];\n    return model.getChildren(id, structureKey).map(toG6Data);\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Get the data of the specified type of element\n   * @param elementType - <zh/>  | <en/> element type\n   * @returns <zh/>  | <en/> element data\n   */\n  public getElementsDataByType(elementType: ElementType) {\n    if (elementType === 'node') return this.getNodeData();\n    if (elementType === 'edge') return this.getEdgeData();\n    if (elementType === 'combo') return this.getComboData();\n    return [];\n  }\n\n  /**\n   * <zh/>  ID \n   *\n   * <en/> Get the data of the element by ID, no need to care about the type of the element\n   * @param id - <zh/>  ID  | <en/> element ID array\n   * @returns <zh/>  | <en/> data of the element\n   */\n  public getElementDataById(id: ID): ElementDatum {\n    const type = this.getElementType(id);\n    if (type === 'edge') return this.getEdgeDatum(id);\n    return this.getNodeLikeDatum(id);\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Get node data\n   * @param id - <zh/>  ID | <en/> node ID\n   * @returns <zh/>  | <en/> node data\n   */\n  public getNodeLikeDatum(id: ID) {\n    const data = this.model.getNode(id);\n    return toG6Data(data);\n  }\n\n  /**\n   * <zh/>  combo \n   *\n   * <en/> Get all node and combo data\n   * @param ids - <zh/>  combo ID  | <en/> node and combo ID array\n   * @returns <zh/>  combo  | <en/> node and combo data\n   */\n  public getNodeLikeData(ids?: ID[]) {\n    return this.model.getAllNodes().reduce((acc, node) => {\n      const data = toG6Data(node);\n      if (ids) ids.includes(idOf(data)) && acc.push(data);\n      else acc.push(data);\n      return acc;\n    }, [] as NodeLikeData[]);\n  }\n\n  public getElementDataByState(elementType: ElementType, state: string) {\n    const elementData = this.getElementsDataByType(elementType);\n    return elementData.filter((datum) => datum.states?.includes(state));\n  }\n\n  public getElementState(id: ID): State[] {\n    return this.getElementDataById(id)?.states || [];\n  }\n\n  public hasNode(id: ID) {\n    return this.model.hasNode(id) && !this.isCombo(id);\n  }\n\n  public hasEdge(id: ID) {\n    return this.model.hasEdge(id);\n  }\n\n  public hasCombo(id: ID) {\n    return this.model.hasNode(id) && this.isCombo(id);\n  }\n\n  public getRelatedEdgesData(id: ID, direction: EdgeDirection = 'both') {\n    return this.model.getRelatedEdges(id, direction).map(toG6Data) as EdgeData[];\n  }\n\n  public getNeighborNodesData(id: ID) {\n    return this.model.getNeighbors(id).map(toG6Data);\n  }\n\n  public setData(data: GraphData) {\n    const { nodes: modifiedNodes = [], edges: modifiedEdges = [], combos: modifiedCombos = [] } = data;\n    const { nodes: originalNodes, edges: originalEdges, combos: originalCombos } = this.getData();\n\n    const nodeDiff = arrayDiff(originalNodes, modifiedNodes, (node) => idOf(node), isElementDataEqual);\n    const edgeDiff = arrayDiff(originalEdges, modifiedEdges, (edge) => idOf(edge), isElementDataEqual);\n    const comboDiff = arrayDiff(originalCombos, modifiedCombos, (combo) => idOf(combo), isElementDataEqual);\n\n    this.batch(() => {\n      const dataToAdd = {\n        nodes: nodeDiff.enter,\n        edges: edgeDiff.enter,\n        combos: comboDiff.enter,\n      };\n      this.addData(dataToAdd);\n      this.computeZIndex(dataToAdd, 'add', true);\n\n      const dataToUpdate = {\n        nodes: nodeDiff.update,\n        edges: edgeDiff.update,\n        combos: comboDiff.update,\n      };\n      this.updateData(dataToUpdate);\n      this.computeZIndex(dataToUpdate, 'update', true);\n\n      const dataToRemove = {\n        nodes: nodeDiff.exit.map(idOf),\n        edges: edgeDiff.exit.map(idOf),\n        combos: comboDiff.exit.map(idOf),\n      };\n      this.removeData(dataToRemove);\n    });\n  }\n\n  public addData(data: GraphData) {\n    const { nodes, edges, combos } = data;\n    this.batch(() => {\n      // add combo first\n      this.addComboData(combos);\n      this.addNodeData(nodes);\n      this.addEdgeData(edges);\n    });\n    this.computeZIndex(data, 'add');\n  }\n\n  public addNodeData(nodes: NodeData[] = []) {\n    if (!nodes.length) return;\n    this.model.addNodes(\n      nodes.map((node) => {\n        this.pushChange({ value: node, type: ChangeType.NodeAdded });\n        return toGraphlibData(node);\n      }),\n    );\n    this.updateNodeLikeHierarchy(nodes);\n\n    this.computeZIndex({ nodes }, 'add');\n  }\n\n  public addEdgeData(edges: EdgeData[] = []) {\n    if (!edges.length) return;\n    this.model.addEdges(\n      edges.map((edge) => {\n        this.pushChange({ value: edge, type: ChangeType.EdgeAdded });\n        return toGraphlibData(edge);\n      }),\n    );\n\n    this.computeZIndex({ edges }, 'add');\n  }\n\n  public addComboData(combos: ComboData[] = []) {\n    if (!combos.length) return;\n    const { model } = this;\n\n    if (!model.hasTreeStructure(COMBO_KEY)) {\n      model.attachTreeStructure(COMBO_KEY);\n    }\n\n    model.addNodes(\n      combos.map((combo) => {\n        this.comboIds.add(idOf(combo));\n        this.pushChange({ value: combo, type: ChangeType.ComboAdded });\n        return toGraphlibData(combo);\n      }),\n    );\n\n    this.updateNodeLikeHierarchy(combos);\n\n    this.computeZIndex({ combos }, 'add');\n  }\n\n  public addChildrenData(parentId: ID, childrenData: NodeData[]) {\n    const parentData = this.getNodeLikeDatum(parentId) as NodeData;\n    const childrenId = childrenData.map(idOf);\n    this.addNodeData(childrenData);\n    this.updateNodeData([{ id: parentId, children: [...(parentData.children || []), ...childrenId] }]);\n    this.addEdgeData(childrenId.map((childId) => ({ source: parentId, target: childId })));\n  }\n\n  /**\n   * <zh/>  zIndex\n   *\n   * <en/> Calculate zIndex\n   * @param data - <zh/>  | <en/> newly added data\n   * @param type - <zh/>  | <en/> operation type\n   * @param force - <zh/>  | <en/> ignore batch processing\n   * @remarks\n   * <zh/> \n   * - \n   * - / combo\n   * -  children\n   *\n   * <en/> The situation of calling this function:\n   * - Add element\n   * - Update the combo of the node/combo\n   * - Update the children of the node\n   */\n  protected computeZIndex(data: PartialGraphData, type: 'add' | 'update', force = false) {\n    if (!force && this.isBatching()) return;\n    this.batch(() => {\n      const { nodes = [], edges = [], combos = [] } = data;\n\n      combos.forEach((combo) => {\n        const id = idOf(combo);\n        if (type === 'add' && isNumber(combo.style?.zIndex)) return;\n        if (type === 'update' && !('combo' in combo)) return;\n\n        const parent = this.getParentData(id, COMBO_KEY);\n        const zIndex = parent ? (parent.style?.zIndex ?? 0) + 1 : 0;\n\n        this.preventUpdateNodeLikeHierarchy(() => {\n          this.updateComboData([{ id, style: { zIndex } }]);\n        });\n      });\n\n      nodes.forEach((node) => {\n        const id = idOf(node);\n        if (type === 'add' && isNumber(node.style?.zIndex)) return;\n        if (type === 'update' && !('combo' in node) && !('children' in node)) return;\n\n        let zIndex = 0;\n\n        const comboParent = this.getParentData(id, COMBO_KEY);\n        if (comboParent) {\n          zIndex = (comboParent.style?.zIndex || 0) + 1;\n        } else {\n          const nodeParent = this.getParentData(id, TREE_KEY);\n          if (nodeParent) zIndex = nodeParent?.style?.zIndex || 0;\n        }\n\n        this.preventUpdateNodeLikeHierarchy(() => {\n          this.updateNodeData([{ id, style: { zIndex } }]);\n        });\n      });\n\n      edges.forEach((edge) => {\n        if (isNumber(edge.style?.zIndex)) return;\n\n        let { id, source, target } = edge;\n        if (!id) id = idOf(edge);\n        else {\n          const datum = this.getEdgeDatum(id);\n          source = datum.source;\n          target = datum.target;\n        }\n\n        if (!source || !target) return;\n\n        const sourceZIndex = this.getNodeLikeDatum(source)?.style?.zIndex || 0;\n        const targetZIndex = this.getNodeLikeDatum(target)?.style?.zIndex || 0;\n\n        this.updateEdgeData([{ id: idOf(edge), style: { zIndex: Math.max(sourceZIndex, targetZIndex) - 1 } }]);\n      });\n    });\n  }\n\n  /**\n   * <zh/>  zIndex\n   *\n   * <en/> Calculate the zIndex after the element is placed on top\n   * @param id - <zh/>  ID | <en/> ID of the element\n   * @returns <zh/> zIndex | <en/> zIndex\n   */\n  public getFrontZIndex(id: ID) {\n    const elementType = this.getElementType(id);\n    const elementData = this.getElementDataById(id);\n    const data = this.getData();\n\n    //  / Exclude the current element\n    Object.assign(data, {\n      [`${elementType}s`]: data[`${elementType}s`].filter((element) => idOf(element) !== id),\n    });\n\n    if (elementType === 'combo') {\n      //  combo  combo /combo \n      // If the combo is expanded, exclude the child nodes/combos of the combo and the internal edges\n      if (!isCollapsed(elementData as ComboData)) {\n        const ancestorIds = new Set(this.getAncestorsData(id, COMBO_KEY).map(idOf));\n        data.nodes = data.nodes.filter((element) => !ancestorIds.has(idOf(element)));\n        data.combos = data.combos.filter((element) => !ancestorIds.has(idOf(element)));\n        data.edges = data.edges.filter(({ source, target }) => !ancestorIds.has(source) && !ancestorIds.has(target));\n      }\n    }\n\n    return Math.max(\n      elementData.style?.zIndex || 0,\n      0,\n      ...Object.values(data)\n        .flat()\n        .map((datum) => (datum?.style?.zIndex || 0) + 1),\n    );\n  }\n\n  protected updateNodeLikeHierarchy(data: NodeLikeData[]) {\n    if (!this.enableUpdateNodeLikeHierarchy) return;\n    const { model } = this;\n\n    data.forEach((datum) => {\n      const id = idOf(datum);\n      const parent = parentIdOf(datum);\n\n      if (parent !== undefined) {\n        if (!model.hasTreeStructure(COMBO_KEY)) model.attachTreeStructure(COMBO_KEY);\n\n        // \n        // Remove the child relationship of the original parent node, update the data of the original parent node and its ancestors\n        if (parent === null) {\n          this.refreshComboData(id);\n        }\n\n        this.setParent(id, parentIdOf(datum), COMBO_KEY);\n      }\n\n      const children = (datum as NodeData).children || [];\n      if (children.length) {\n        if (!model.hasTreeStructure(TREE_KEY)) model.attachTreeStructure(TREE_KEY);\n        const _children = children.filter((child) => model.hasNode(child));\n        _children.forEach((child) => this.setParent(child, id, TREE_KEY));\n        if (_children.length !== children.length) {\n          // \n          // Remove non-existent child nodes from the data\n          this.updateNodeData([{ id, children: _children }]);\n        }\n      }\n    });\n  }\n\n  private enableUpdateNodeLikeHierarchy = true;\n\n  /**\n   * <zh/> \n   *\n   * <en/> Do not update the node hierarchy when executing changes\n   * @param callback - <zh/>  | <en/> change function\n   */\n  public preventUpdateNodeLikeHierarchy(callback: () => void) {\n    this.enableUpdateNodeLikeHierarchy = false;\n    callback();\n    this.enableUpdateNodeLikeHierarchy = true;\n  }\n\n  public updateData(data: PartialGraphData) {\n    const { nodes, edges, combos } = data;\n    this.batch(() => {\n      this.updateNodeData(nodes);\n      this.updateComboData(combos);\n      this.updateEdgeData(edges);\n    });\n    this.computeZIndex(data, 'update');\n  }\n\n  public updateNodeData(nodes: PartialNodeLikeData<NodeData>[] = []) {\n    if (!nodes.length) return;\n    const { model } = this;\n    this.batch(() => {\n      const modifiedNodes: NodeData[] = [];\n      nodes.forEach((modifiedNode) => {\n        const id = idOf(modifiedNode);\n        const originalNode = toG6Data(model.getNode(id));\n        if (isElementDataEqual(originalNode, modifiedNode)) return;\n\n        const value = mergeElementsData(originalNode, modifiedNode);\n        this.pushChange({ value, original: originalNode, type: ChangeType.NodeUpdated });\n        model.mergeNodeData(id, value);\n        modifiedNodes.push(value);\n      });\n\n      this.updateNodeLikeHierarchy(modifiedNodes);\n    });\n\n    this.computeZIndex({ nodes }, 'update');\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Submit all data to the change record for redrawing\n   */\n  public refreshData() {\n    const { nodes, edges, combos } = this.getData();\n    nodes.forEach((node) => {\n      this.pushChange({ value: node, original: node, type: ChangeType.NodeUpdated });\n    });\n    edges.forEach((edge) => {\n      this.pushChange({ value: edge, original: edge, type: ChangeType.EdgeUpdated });\n    });\n    combos.forEach((combo) => {\n      this.pushChange({ value: combo, original: combo, type: ChangeType.ComboUpdated });\n    });\n  }\n\n  public syncNodeLikeDatum(datum: PartialNodeLikeData<NodeData>) {\n    const { model } = this;\n\n    const id = idOf(datum);\n    if (!model.hasNode(id)) return;\n    const original = toG6Data(model.getNode(id));\n    const value = mergeElementsData(original, datum);\n    model.mergeNodeData(id, value);\n  }\n\n  public syncEdgeDatum(datum: PartialEdgeData<EdgeData>) {\n    const { model } = this;\n\n    const id = idOf(datum);\n    if (!model.hasEdge(id)) return;\n    const original = toG6Data(model.getEdge(id));\n    const value = mergeElementsData(original, datum);\n    model.mergeEdgeData(id, value);\n  }\n\n  public updateEdgeData(edges: PartialEdgeData<EdgeData>[] = []) {\n    if (!edges.length) return;\n    const { model } = this;\n    this.batch(() => {\n      edges.forEach((modifiedEdge) => {\n        const id = idOf(modifiedEdge);\n        const originalEdge = toG6Data(model.getEdge(id));\n        if (isElementDataEqual(originalEdge, modifiedEdge)) return;\n\n        if (modifiedEdge.source && originalEdge.source !== modifiedEdge.source) {\n          model.updateEdgeSource(id, modifiedEdge.source);\n        }\n        if (modifiedEdge.target && originalEdge.target !== modifiedEdge.target) {\n          model.updateEdgeTarget(id, modifiedEdge.target);\n        }\n        const updatedData = mergeElementsData(originalEdge, modifiedEdge);\n        this.pushChange({ value: updatedData, original: originalEdge, type: ChangeType.EdgeUpdated });\n        model.mergeEdgeData(id, updatedData);\n      });\n    });\n\n    this.computeZIndex({ edges }, 'update');\n  }\n\n  public updateComboData(combos: PartialNodeLikeData<ComboData>[] = []) {\n    if (!combos.length) return;\n    const { model } = this;\n    model.batch(() => {\n      const modifiedCombos: ComboData[] = [];\n      combos.forEach((modifiedCombo) => {\n        const id = idOf(modifiedCombo);\n        const originalCombo = toG6Data(model.getNode(id)) as ComboData;\n        if (isElementDataEqual(originalCombo, modifiedCombo)) return;\n\n        const value = mergeElementsData(originalCombo, modifiedCombo);\n        this.pushChange({ value, original: originalCombo, type: ChangeType.ComboUpdated });\n        model.mergeNodeData(id, value);\n        modifiedCombos.push(value);\n      });\n\n      this.updateNodeLikeHierarchy(modifiedCombos);\n    });\n\n    this.computeZIndex({ combos }, 'update');\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Set the parent node of the node\n   * @param id - <zh/>  ID | <en/> node ID\n   * @param parent - <zh/>  ID | <en/> parent node ID\n   * @param hierarchyKey - <zh/>  | <en/> hierarchy type\n   * @param update - <zh/> / | <en/> add new/old parent node data update record\n   */\n  public setParent(id: ID, parent: ID | undefined | null, hierarchyKey: HierarchyKey, update: boolean = true) {\n    if (id === parent) return;\n    const elementData = this.getNodeLikeDatum(id);\n    const originalParentId = parentIdOf(elementData);\n\n    if (originalParentId !== parent && hierarchyKey === COMBO_KEY) {\n      const modifiedDatum = { id, combo: parent };\n      if (this.isCombo(id)) this.syncNodeLikeDatum(modifiedDatum);\n      else this.syncNodeLikeDatum(modifiedDatum);\n    }\n\n    this.model.setParent(id, parent, hierarchyKey);\n\n    if (update && hierarchyKey === COMBO_KEY) {\n      uniq([originalParentId, parent]).forEach((pId) => {\n        if (pId !== undefined) this.refreshComboData(pId);\n      });\n    }\n  }\n\n  /**\n   * <zh/>  combo \n   *\n   * <en/> Refresh combo data\n   * @param id - <zh/> combo ID | <en/> combo ID\n   * @remarks\n   * <zh/> \n   *\n   * <en/> Will not change the data, but will trigger data change events\n   */\n  public refreshComboData(id: ID) {\n    const combo = this.getComboData([id])[0];\n    const ancestors = this.getAncestorsData(id, COMBO_KEY) as ComboData[];\n\n    if (combo) this.pushChange({ value: combo, original: combo, type: ChangeType.ComboUpdated });\n\n    ancestors.forEach((value) => {\n      this.pushChange({ value: value, original: value, type: ChangeType.ComboUpdated });\n    });\n  }\n\n  public getElementPosition(id: ID): Point {\n    const datum = this.getElementDataById(id) as NodeLikeData;\n    return positionOf(datum);\n  }\n\n  public translateNodeLikeBy(id: ID, offset: Point) {\n    if (this.isCombo(id)) this.translateComboBy(id, offset);\n    else this.translateNodeBy(id, offset);\n  }\n\n  public translateNodeLikeTo(id: ID, position: Point) {\n    if (this.isCombo(id)) this.translateComboTo(id, position);\n    else this.translateNodeTo(id, position);\n  }\n\n  public translateNodeBy(id: ID, offset: Point) {\n    const curr = this.getElementPosition(id);\n    const position = add(curr, [...offset, 0].slice(0, 3) as Point);\n    this.translateNodeTo(id, position);\n  }\n\n  public translateNodeTo(id: ID, position: Point) {\n    const [x = 0, y = 0, z = 0] = position;\n    this.preventUpdateNodeLikeHierarchy(() => {\n      this.updateNodeData([{ id, style: { x, y, z } }]);\n    });\n  }\n\n  public translateComboBy(id: ID, offset: Point) {\n    const [dx = 0, dy = 0, dz = 0] = offset;\n    if ([dx, dy, dz].some(isNaN) || [dx, dy, dz].every((o) => o === 0)) return;\n    const combo = this.getComboData([id])[0];\n    if (!combo) return;\n    const seenNodeLikeIds = new Set<ID>();\n    dfs<NodeLikeData>(\n      combo,\n      (succeed) => {\n        const succeedID = idOf(succeed);\n        if (seenNodeLikeIds.has(succeedID)) return;\n        seenNodeLikeIds.add(succeedID);\n        const [x, y, z] = positionOf(succeed);\n        const value = mergeElementsData(succeed, {\n          style: { x: x + dx, y: y + dy, z: z + dz },\n        });\n        this.pushChange({\n          value,\n          // @ts-ignore\n          original: succeed,\n          type: this.isCombo(succeedID) ? ChangeType.ComboUpdated : ChangeType.NodeUpdated,\n        });\n\n        this.model.mergeNodeData(succeedID, value);\n      },\n      (node) => this.getChildrenData(idOf(node)),\n      'BT',\n    );\n  }\n\n  public translateComboTo(id: ID, position: Point) {\n    if (position.some(isNaN)) return;\n    const [tx = 0, ty = 0, tz = 0] = position;\n    const combo = this.getComboData([id])?.[0];\n    if (!combo) return;\n\n    const [comboX, comboY, comboZ] = positionOf(combo);\n    const dx = tx - comboX;\n    const dy = ty - comboY;\n    const dz = tz - comboZ;\n\n    dfs<NodeLikeData>(\n      combo,\n      (succeed) => {\n        const succeedId = idOf(succeed);\n        const [x, y, z] = positionOf(succeed);\n        const value = mergeElementsData(succeed, {\n          style: { x: x + dx, y: y + dy, z: z + dz },\n        });\n        this.pushChange({\n          value,\n          // @ts-ignore\n          original: succeed,\n          type: this.isCombo(succeedId) ? ChangeType.ComboUpdated : ChangeType.NodeUpdated,\n        });\n        this.model.mergeNodeData(succeedId, value);\n      },\n      (node) => this.getChildrenData(idOf(node)),\n      'BT',\n    );\n  }\n\n  public removeData(data: DataID) {\n    const { nodes, edges, combos } = data;\n    this.batch(() => {\n      // remove edges first\n      this.removeEdgeData(edges);\n      this.removeNodeData(nodes);\n      this.removeComboData(combos);\n\n      this.latestRemovedComboIds = new Set(combos);\n    });\n  }\n\n  public removeNodeData(ids: ID[] = []) {\n    if (!ids.length) return;\n    this.batch(() => {\n      ids.forEach((id) => {\n        // \n        // remove related edges and child nodes\n        this.removeEdgeData(this.getRelatedEdgesData(id).map(idOf));\n        // TODO \n\n        this.pushChange({ value: this.getNodeData([id])[0], type: ChangeType.NodeRemoved });\n        this.removeNodeLikeHierarchy(id);\n      });\n      this.model.removeNodes(ids);\n    });\n  }\n\n  public removeEdgeData(ids: ID[] = []) {\n    if (!ids.length) return;\n    ids.forEach((id) => this.pushChange({ value: this.getEdgeData([id])[0], type: ChangeType.EdgeRemoved }));\n    this.model.removeEdges(ids);\n  }\n\n  public removeComboData(ids: ID[] = []) {\n    if (!ids.length) return;\n    this.batch(() => {\n      ids.forEach((id) => {\n        this.pushChange({ value: this.getComboData([id])[0], type: ChangeType.ComboRemoved });\n        this.removeNodeLikeHierarchy(id);\n        this.comboIds.delete(id);\n      });\n      this.model.removeNodes(ids);\n    });\n  }\n\n  /**\n   * <zh/>  children \n   *\n   * <en/> Remove the node hierarchy and move its child nodes to the parent node's children list\n   * @param id - <zh/>  | <en/> node to be processed\n   */\n  protected removeNodeLikeHierarchy(id: ID) {\n    if (this.model.hasTreeStructure(COMBO_KEY)) {\n      const grandParent = parentIdOf(this.getNodeLikeDatum(id));\n\n      //  children \n      // remove from its parent's children list\n      //  graphlib.setParent\n      this.setParent(id, undefined, COMBO_KEY, false);\n      //  children \n      // move the children to the grandparent's children list\n\n      this.model.getChildren(id, COMBO_KEY).forEach((child) => {\n        const childData = toG6Data(child);\n        const childId = idOf(childData);\n        this.setParent(idOf(childData), grandParent, COMBO_KEY, false);\n        const value = mergeElementsData(childData, {\n          id: idOf(childData),\n          combo: grandParent,\n        });\n        this.pushChange({\n          value,\n          original: childData,\n          type: this.isCombo(childId) ? ChangeType.ComboUpdated : ChangeType.NodeUpdated,\n        });\n        this.model.mergeNodeData(idOf(childData), value);\n      });\n\n      if (!isNil(grandParent)) this.refreshComboData(grandParent);\n    }\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Get the type of the element\n   * @param id - <zh/>  ID | <en/> ID of the element\n   * @returns <zh/>  | <en/> type of the element\n   */\n  public getElementType(id: ID): ElementType {\n    if (this.model.hasNode(id)) {\n      if (this.isCombo(id)) return 'combo';\n      return 'node';\n    }\n\n    if (this.model.hasEdge(id)) return 'edge';\n\n    throw new Error(format(`Unknown element type of id: ${id}`));\n  }\n\n  public destroy() {\n    const { model } = this;\n    const nodes = model.getAllNodes();\n    const edges = model.getAllEdges();\n\n    model.removeEdges(edges.map((edge) => edge.id));\n    model.removeNodes(nodes.map((node) => node.id));\n\n    // @ts-expect-error force delete\n    this.context = {};\n  }\n}\n", "/* eslint-disable jsdoc/require-returns */\n/* eslint-disable jsdoc/require-param */\nimport type { BaseStyleProps } from '@antv/g';\nimport { Group } from '@antv/g';\nimport { groupBy } from '@antv/util';\nimport { AnimationType, COMBO_KEY, ChangeType, GraphEvent } from '../constants';\nimport { ELEMENT_TYPES } from '../constants/element';\nimport { getExtension } from '../registry/get';\nimport type { ComboData, EdgeData, GraphData, LayoutOptions, NodeData } from '../spec';\nimport type { AnimationStage } from '../spec/element/animation';\nimport type { DrawData, ProcedureData } from '../transforms/types';\nimport type {\n  Combo,\n  DataChange,\n  Edge,\n  Element,\n  ElementData,\n  ElementDatum,\n  ElementType,\n  ID,\n  Node,\n  NodeLikeData,\n  State,\n  StyleIterationContext,\n} from '../types';\nimport { cacheStyle, hasCachedStyle } from '../utils/cache';\nimport { reduceDataChanges } from '../utils/change';\nimport { isCollapsed } from '../utils/collapsibility';\nimport { isOverridable } from '../utils/data';\nimport { markToBeDestroyed, updateStyle } from '../utils/element';\nimport type { BaseEvent } from '../utils/event';\nimport { AnimateEvent, ElementLifeCycleEvent, GraphLifeCycleEvent, emit } from '../utils/event';\nimport { idOf } from '../utils/id';\nimport { assignColorByPalette, parsePalette } from '../utils/palette';\nimport { positionOf } from '../utils/position';\nimport { print } from '../utils/print';\nimport { computeElementCallbackStyle } from '../utils/style';\nimport { themeOf } from '../utils/theme';\nimport { subtract } from '../utils/vector';\nimport { setVisibility } from '../utils/visibility';\nimport type { RuntimeContext } from './types';\n\nexport class ElementController {\n  private context: RuntimeContext;\n\n  private container!: Group;\n\n  private elementMap: Record<ID, Element> = {};\n\n  private shapeTypeMap: Record<ID, string> = {};\n\n  constructor(context: RuntimeContext) {\n    this.context = context;\n  }\n\n  public init() {\n    this.initContainer();\n  }\n\n  private initContainer() {\n    if (!this.container || this.container.destroyed) {\n      const { canvas } = this.context;\n      this.container = canvas.appendChild(new Group({ className: 'elements' }));\n    }\n  }\n\n  private emit(event: BaseEvent, context: DrawContext) {\n    if (context.silence) return;\n    emit(this.context.graph, event);\n  }\n\n  private forEachElementData(callback: (elementType: ElementType, elementData: ElementData) => void) {\n    ELEMENT_TYPES.forEach((elementType) => {\n      const elementData = this.context.model.getElementsDataByType(elementType);\n      callback(elementType, elementData);\n    });\n  }\n\n  public getElementType(elementType: ElementType, datum: ElementDatum) {\n    const { options, graph } = this.context;\n    const userDefinedType = isOverridable(datum) ? options[elementType]?.type || datum.type : datum.type;\n\n    if (!userDefinedType) {\n      if (elementType === 'edge') return 'line';\n      // node / combo\n      else return 'circle';\n    }\n    if (typeof userDefinedType === 'string') return userDefinedType;\n    // @ts-expect-error skip type check\n    return userDefinedType.call(graph, datum);\n  }\n\n  private getTheme(elementType: ElementType) {\n    return themeOf(this.context.options)[elementType] || {};\n  }\n\n  public getThemeStyle(elementType: ElementType) {\n    return this.getTheme(elementType).style || {};\n  }\n\n  public getThemeStateStyle(elementType: ElementType, states: State[]) {\n    const { state = {} } = this.getTheme(elementType);\n    return Object.assign({}, ...states.map((name) => state[name] || {}));\n  }\n\n  private paletteStyle: Record<ID, string> = {};\n\n  private computePaletteStyle() {\n    const { options } = this.context;\n\n    this.paletteStyle = {};\n\n    this.forEachElementData((elementType, elementData) => {\n      const palette = Object.assign(\n        {},\n        parsePalette(this.getTheme(elementType)?.palette),\n        parsePalette(options[elementType]?.palette),\n      );\n      if (palette?.field) {\n        Object.assign(this.paletteStyle, assignColorByPalette(elementData, palette));\n      }\n    });\n  }\n\n  public getPaletteStyle(elementType: ElementType, id: ID): BaseStyleProps {\n    const color = this.paletteStyle[id];\n    if (!color) return {};\n\n    if (elementType === 'edge') return { stroke: color };\n    return { fill: color };\n  }\n\n  private defaultStyle: Record<ID, Record<string, unknown>> = {};\n\n  /**\n   * <zh/> \n   *\n   * <en/> compute default style of single element\n   */\n  private computeElementDefaultStyle(elementType: ElementType, context: StyleIterationContext) {\n    const { options } = this.context;\n    const defaultStyle = options[elementType]?.style || {};\n    if ('transform' in defaultStyle && Array.isArray(defaultStyle.transform)) {\n      defaultStyle.transform = [...defaultStyle.transform];\n    }\n    this.defaultStyle[idOf(context.datum)] = computeElementCallbackStyle(defaultStyle as any, context);\n  }\n\n  private computeElementsDefaultStyle(ids?: ID[]) {\n    const { graph } = this.context;\n    this.forEachElementData((elementType, elementData) => {\n      const length = elementData.length;\n      for (let i = 0; i < length; i++) {\n        const datum = elementData[i];\n        if (ids === undefined || ids.includes(idOf(datum))) {\n          this.computeElementDefaultStyle(elementType, { datum, graph });\n        }\n      }\n    });\n  }\n\n  public getDefaultStyle(id: ID) {\n    return this.defaultStyle[id] || {};\n  }\n\n  private getElementState(id: ID) {\n    try {\n      const { model } = this.context;\n      return model.getElementState(id);\n    } catch {\n      return [];\n    }\n  }\n\n  private stateStyle: Record<ID, Record<string, unknown>> = {};\n\n  /**\n   * <zh/> \n   *\n   * <en/> get single state style of single element\n   */\n  private getElementStateStyle(elementType: ElementType, state: State, context: StyleIterationContext) {\n    const { options } = this.context;\n    const stateStyle = options[elementType]?.state?.[state] || {};\n    return computeElementCallbackStyle(stateStyle as any, context);\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> compute merged state style of single element\n   */\n  private computeElementStatesStyle(elementType: ElementType, states: State[], context: StyleIterationContext) {\n    this.stateStyle[idOf(context.datum)] = Object.assign(\n      {},\n      ...states.map((state) => this.getElementStateStyle(elementType, state, context)),\n    );\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> compute state style of all elements\n   * @param ids - <zh/>  | <en/> compute state style of specified elements\n   */\n  private computeElementsStatesStyle(ids?: ID[]) {\n    const { graph } = this.context;\n    this.forEachElementData((elementType, elementData) => {\n      const length = elementData.length;\n      for (let i = 0; i < length; i++) {\n        const datum = elementData[i];\n        if (ids === undefined || ids.includes(idOf(datum))) {\n          const states = this.getElementState(idOf(datum));\n          this.computeElementStatesStyle(elementType, states, { datum, graph });\n        }\n      }\n    });\n  }\n\n  public getStateStyle(id: ID) {\n    return this.stateStyle[id] || {};\n  }\n\n  private computeStyle(stage?: string, ids?: ID[]) {\n    const skip = ['translate', 'zIndex'];\n    if (stage && skip.includes(stage)) return;\n\n    this.computePaletteStyle();\n    this.computeElementsDefaultStyle(ids);\n    this.computeElementsStatesStyle(ids);\n  }\n\n  public getElement<T extends Element>(id: ID): T | undefined {\n    return this.elementMap[id] as T;\n  }\n\n  public getNodes() {\n    return this.context.model.getNodeData().map(({ id }) => this.elementMap[id]) as Node[];\n  }\n\n  public getEdges() {\n    return this.context.model.getEdgeData().map((edge) => this.elementMap[idOf(edge)]) as Edge[];\n  }\n\n  public getCombos() {\n    return this.context.model.getComboData().map(({ id }) => this.elementMap[id]) as Combo[];\n  }\n\n  public getElementComputedStyle(elementType: ElementType, datum: ElementDatum) {\n    const id = idOf(datum);\n    // () Priority (from low to high):\n    const themeStyle = this.getThemeStyle(elementType);\n    const paletteStyle = this.getPaletteStyle(elementType, id);\n    const dataStyle = datum.style || {};\n    const defaultStyle = this.getDefaultStyle(id);\n    const themeStateStyle = this.getThemeStateStyle(elementType, this.getElementState(id));\n    const stateStyle = this.getStateStyle(id);\n\n    const style = isOverridable(datum)\n      ? Object.assign({}, themeStyle, paletteStyle, dataStyle, defaultStyle, themeStateStyle, stateStyle)\n      : Object.assign({}, dataStyle);\n\n    if (elementType === 'combo') {\n      const childrenData = this.context.model.getChildrenData(id);\n      const isCollapsed = !!style.collapsed;\n      const childrenNode = isCollapsed ? [] : childrenData.map(idOf).filter((id) => this.getElement(id));\n      Object.assign(style, { childrenNode, childrenData });\n    }\n    return style;\n  }\n\n  private getDrawData(context: DrawContext): DrawPayload | null {\n    this.init();\n\n    const data = this.computeChangesAndDrawData(context);\n    if (!data) return null;\n\n    const { type = 'draw', stage = type } = context;\n    this.markDestroyElement(data.drawData);\n    //  / Calculate style\n    this.computeStyle(stage);\n\n    return { type, stage, data };\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> start render process\n   */\n  public draw(context: DrawContext = { animation: true }) {\n    const drawData = this.getDrawData(context);\n    if (!drawData) return;\n\n    const {\n      data: {\n        drawData: { add, update, remove },\n      },\n    } = drawData;\n\n    this.destroyElements(remove, context);\n    this.createElements(add, context);\n    this.updateElements(update, context);\n\n    return this.setAnimationTask(context, drawData);\n  }\n\n  public async preLayoutDraw(context: DrawContext = { animation: true }) {\n    const preResult = this.getDrawData(context);\n    if (!preResult) return;\n\n    const {\n      data: { drawData },\n    } = preResult;\n\n    await this.context.layout?.preLayout?.(drawData);\n\n    const { add, update, remove } = drawData;\n    this.destroyElements(remove, context);\n    this.createElements(add, context);\n    this.updateElements(update, context);\n\n    return this.setAnimationTask(context, preResult);\n  }\n\n  private setAnimationTask(context: DrawContext, data: DrawPayload) {\n    const { animation, silence } = context;\n    const {\n      data: { dataChanges, drawData },\n      stage,\n      type,\n    } = data;\n\n    return this.context.animation!.animate(\n      animation,\n      silence\n        ? {}\n        : {\n            before: () =>\n              this.emit(\n                new GraphLifeCycleEvent(GraphEvent.BEFORE_DRAW, {\n                  dataChanges,\n                  animation,\n                  stage,\n                  render: type === 'render',\n                }),\n                context,\n              ),\n            beforeAnimate: (animation) =>\n              this.emit(new AnimateEvent(GraphEvent.BEFORE_ANIMATE, AnimationType.DRAW, animation, drawData), context),\n            afterAnimate: (animation) =>\n              this.emit(new AnimateEvent(GraphEvent.AFTER_ANIMATE, AnimationType.DRAW, animation, drawData), context),\n            after: () =>\n              this.emit(\n                new GraphLifeCycleEvent(GraphEvent.AFTER_DRAW, {\n                  dataChanges,\n                  animation,\n                  stage,\n                  render: type === 'render',\n                  firstRender: this.context.graph.rendered === false,\n                }),\n                context,\n              ),\n          },\n    );\n  }\n\n  private computeChangesAndDrawData(context: DrawContext) {\n    const { model } = this.context;\n    const dataChanges = model.getChanges();\n    const tasks = reduceDataChanges(dataChanges);\n    if (tasks.length === 0) return null;\n\n    const {\n      NodeAdded = [],\n      NodeUpdated = [],\n      NodeRemoved = [],\n      EdgeAdded = [],\n      EdgeUpdated = [],\n      EdgeRemoved = [],\n      ComboAdded = [],\n      ComboUpdated = [],\n      ComboRemoved = [],\n    } = groupBy(tasks, (change) => change.type) as unknown as Record<`${ChangeType}`, DataChange[]>;\n\n    const moveToAddedIfUnrendered = (updated: DataChange[], added: DataChange[]) => {\n      const keptUpdates: DataChange[] = [];\n      updated.forEach((change) => {\n        const id = idOf(change.value);\n        if (!this.getElement(id)) {\n          added.push(change);\n        } else {\n          keptUpdates.push(change);\n        }\n      });\n      return keptUpdates;\n    };\n\n    const finalNodeUpdated = moveToAddedIfUnrendered(NodeUpdated, NodeAdded);\n    const finalEdgeUpdated = moveToAddedIfUnrendered(EdgeUpdated, EdgeAdded);\n    const finalComboUpdated = moveToAddedIfUnrendered(ComboUpdated, ComboAdded);\n\n    const dataOf = <T extends DataChange['value']>(data: DataChange[]) =>\n      new Map(\n        data.map((datum) => {\n          const data = datum.value;\n          return [idOf(data), data] as [ID, T];\n        }),\n      );\n\n    const input: DrawData = {\n      add: {\n        nodes: dataOf<NodeData>(NodeAdded),\n        edges: dataOf<EdgeData>(EdgeAdded),\n        combos: dataOf<ComboData>(ComboAdded),\n      },\n      update: {\n        nodes: dataOf<NodeData>(finalNodeUpdated),\n        edges: dataOf<EdgeData>(finalEdgeUpdated),\n        combos: dataOf<ComboData>(finalComboUpdated),\n      },\n      remove: {\n        nodes: dataOf<NodeData>(NodeRemoved),\n        edges: dataOf<EdgeData>(EdgeRemoved),\n        combos: dataOf<ComboData>(ComboRemoved),\n      },\n    };\n    const drawData = this.transformData(input, context);\n\n    //  / Clear changes\n    model.clearChanges();\n\n    return { dataChanges, drawData };\n  }\n\n  private transformData(input: DrawData, context: DrawContext): DrawData {\n    const transforms = this.context.transform.getTransformInstance();\n\n    return Object.values(transforms).reduce((data, transform) => transform.beforeDraw(data, context), input);\n  }\n\n  private createElement(elementType: ElementType, datum: ElementDatum, context: DrawContext) {\n    const id = idOf(datum);\n    const currentElement = this.getElement(id);\n    if (currentElement) return;\n    const type = this.getElementType(elementType, datum);\n    const style = this.getElementComputedStyle(elementType, datum);\n\n    // get shape constructor\n    const Ctor = getExtension(elementType, type);\n    if (!Ctor) return print.warn(`The element ${type} of ${elementType} is not registered.`);\n\n    this.emit(new ElementLifeCycleEvent(GraphEvent.BEFORE_ELEMENT_CREATE, elementType, datum), context);\n\n    const element = this.container.appendChild(\n      new Ctor({\n        id,\n        context: this.context,\n        style,\n      }),\n    ) as Element;\n\n    this.shapeTypeMap[id] = type;\n    this.elementMap[id] = element;\n\n    const { stage = 'enter' } = context;\n\n    this.context.animation?.add(\n      {\n        element,\n        elementType,\n        stage,\n        originalStyle: { ...element.attributes },\n        updatedStyle: style,\n      },\n      {\n        after: () => {\n          this.emit(new ElementLifeCycleEvent(GraphEvent.AFTER_ELEMENT_CREATE, elementType, datum), context);\n          element.onCreate?.();\n        },\n      },\n    );\n  }\n\n  private createElements(data: ProcedureData, context: DrawContext) {\n    const { nodes, edges, combos } = data;\n    const iteration: [ElementType, Map<ID, ElementDatum>][] = [\n      ['node', nodes],\n      ['combo', combos],\n      ['edge', edges],\n    ];\n\n    iteration.forEach(([elementType, elementData]) => {\n      elementData.forEach((datum) => this.createElement(elementType, datum, context));\n    });\n  }\n\n  private getUpdateStageStyle(elementType: ElementType, datum: ElementDatum, context: DrawContext) {\n    const { stage = 'update' } = context;\n\n    //  translate  x, y, z\n    // Optimize the translate stage, return x, y, z directly to avoid calculating style\n    if (stage === 'translate') {\n      if (elementType === 'node' || elementType === 'combo') {\n        const { style: { x = 0, y = 0, z = 0 } = {} } = datum as NodeLikeData;\n        return { x, y, z };\n      } else return {};\n    }\n\n    return this.getElementComputedStyle(elementType, datum);\n  }\n\n  private updateElement(elementType: ElementType, datum: ElementDatum, context: DrawContext) {\n    const id = idOf(datum);\n    const { stage = 'update' } = context;\n\n    const element = this.getElement(id);\n    if (!element) return () => null;\n\n    this.emit(new ElementLifeCycleEvent(GraphEvent.BEFORE_ELEMENT_UPDATE, elementType, datum), context);\n\n    const type = this.getElementType(elementType, datum);\n    const style = this.getUpdateStageStyle(elementType, datum, context);\n\n    // \n    // If the type is different, you need to destroy the original element first, and then create a new element\n    if (this.shapeTypeMap[id] !== type) {\n      element.destroy();\n      delete this.shapeTypeMap[id];\n      delete this.elementMap[id];\n\n      this.createElement(elementType, datum, { animation: false, silence: true });\n    }\n\n    const exactStage = stage !== 'visibility' ? stage : style.visibility === 'hidden' ? 'hide' : 'show';\n\n    //  visibility  hidden after \n    // Avoid setting visibility to hidden immediately, causing the element to be invisible, but set it in the after phase\n    if (exactStage === 'hide') delete style['visibility'];\n\n    this.context.animation?.add(\n      {\n        element,\n        elementType,\n        stage: exactStage,\n        originalStyle: { ...element.attributes },\n        updatedStyle: style,\n      },\n      {\n        before: () => {\n          //  elementMap[id]  element type  element \n          // Access the latest element through elementMap[id] to prevent the loss of element caused by different types\n          const element = this.elementMap[id];\n          if (stage !== 'collapse') updateStyle(element, style);\n\n          if (stage === 'visibility') {\n            //  / Cache original opacity\n            //  animation controller  / The cached value will be accessed in the animation controller\n            if (!hasCachedStyle(element, 'opacity')) cacheStyle(element, 'opacity');\n            this.visibilityCache.set(element, exactStage === 'show' ? 'visible' : 'hidden');\n            if (exactStage === 'show') setVisibility(element, 'visible');\n          }\n        },\n        after: () => {\n          const element = this.elementMap[id];\n          if (stage === 'collapse') updateStyle(element, style);\n          if (exactStage === 'hide') setVisibility(element, this.visibilityCache.get(element));\n          this.emit(new ElementLifeCycleEvent(GraphEvent.AFTER_ELEMENT_UPDATE, elementType, datum), context);\n          element.onUpdate?.();\n        },\n      },\n    );\n  }\n\n  private updateElements(data: ProcedureData, context: DrawContext) {\n    const { nodes, edges, combos } = data;\n    const iteration: [ElementType, Map<ID, ElementDatum>][] = [\n      ['node', nodes],\n      ['combo', combos],\n      ['edge', edges],\n    ];\n\n    iteration.forEach(([elementType, elementData]) => {\n      elementData.forEach((datum) => this.updateElement(elementType, datum, context));\n    });\n  }\n\n  private visibilityCache = new WeakMap<Element, BaseStyleProps['visibility']>();\n\n  /**\n   * <zh/> \n   *\n   * <en/> mark destroy element\n   * @param data - <zh/>  | <en/> draw data\n   */\n  private markDestroyElement(data: DrawData) {\n    Object.values(data.remove).forEach((elementData) => {\n      elementData.forEach((datum) => {\n        const id = idOf(datum);\n        const element = this.getElement(id);\n        if (element) markToBeDestroyed(element);\n      });\n    });\n  }\n\n  private destroyElement(elementType: ElementType, datum: ElementDatum, context: DrawContext) {\n    const { stage = 'exit' } = context;\n    const id = idOf(datum);\n    const element = this.elementMap[id];\n    if (!element) return () => null;\n\n    this.emit(new ElementLifeCycleEvent(GraphEvent.BEFORE_ELEMENT_DESTROY, elementType, datum), context);\n\n    this.context.animation?.add(\n      {\n        element,\n        elementType,\n        stage,\n        originalStyle: { ...element.attributes },\n        updatedStyle: {},\n      },\n      {\n        after: () => {\n          this.clearElement(id);\n          element.destroy();\n          element.onDestroy?.();\n          this.emit(new ElementLifeCycleEvent(GraphEvent.AFTER_ELEMENT_DESTROY, elementType, datum), context);\n        },\n      },\n    );\n  }\n\n  private destroyElements(data: ProcedureData, context: DrawContext) {\n    const { nodes, edges, combos } = data;\n    const iteration: [ElementType, Map<ID, ElementDatum>][] = [\n      ['combo', combos],\n      ['edge', edges],\n      ['node', nodes],\n    ];\n\n    iteration.forEach(([elementType, elementData]) => {\n      elementData.forEach((datum) => this.destroyElement(elementType, datum, context));\n    });\n\n    // TODO \n  }\n\n  private clearElement(id: ID) {\n    delete this.paletteStyle[id];\n    delete this.defaultStyle[id];\n    delete this.stateStyle[id];\n    delete this.elementMap[id];\n    delete this.shapeTypeMap[id];\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Align the layout result to the element to avoid view offset. Will modify the layout result\n   * @param layoutResult - <zh/>  | <en/> layout result\n   * @param id - <zh/>  ID | <en/> element ID\n   */\n  private alignLayoutResultToElement(layoutResult: GraphData, id: ID) {\n    const target = layoutResult.nodes?.find((node) => idOf(node) === id);\n\n    if (target) {\n      const originalPosition = positionOf(this.context.model.getNodeLikeDatum(id));\n      const modifiedPosition = positionOf(target);\n      const delta = subtract(originalPosition, modifiedPosition);\n      layoutResult.nodes?.forEach((node) => {\n        if (node.style?.x) node.style.x += delta[0];\n        if (node.style?.y) node.style.y += delta[1];\n        if (node.style?.z) node.style.z += delta[2] || 0;\n      });\n    }\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Sync layout result\n   * @param id - <zh/>  ID | <en/> element ID\n   * @param align - <zh/>  | <en/> whether to align\n   */\n  private async syncLayoutResult(id: ID, align?: boolean) {\n    const { layout, model } = this.context;\n    if (!layout) return;\n\n    const layoutOptions = this.context.options.layout;\n    const forcePreLayout = (opts: LayoutOptions): LayoutOptions => {\n      if (Array.isArray(opts)) {\n        return opts.map((o) => ({ ...o, preLayout: true }));\n      }\n      return { ...opts, preLayout: true };\n    };\n    const layoutResult = await layout.simulate(layoutOptions ? forcePreLayout(layoutOptions) : undefined);\n    if (align) this.alignLayoutResultToElement(layoutResult, id);\n    model.updateData(layoutResult);\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> collapse node\n   * @param id - <zh/>  ID | <en/> element ID\n   * @param options - <zh/>  | <en/> options\n   */\n  public async collapseNode(id: ID, options: CollapseExpandNodeOptions): Promise<void> {\n    const { animation, align } = options;\n    await this.syncLayoutResult(id, align);\n\n    //  / Recalculate data\n    const data = this.computeChangesAndDrawData({ stage: 'collapse', animation });\n    if (!data) return;\n    const { drawData } = data;\n    const { add, remove, update } = drawData;\n    this.markDestroyElement(drawData);\n    const context = { animation, stage: 'collapse', data: drawData } as const;\n\n    this.destroyElements(remove, context);\n    this.createElements(add, context);\n    this.updateElements(update, context);\n\n    await this.context.animation!.animate(\n      animation,\n      {\n        beforeAnimate: (animation) =>\n          this.emit(new AnimateEvent(GraphEvent.BEFORE_ANIMATE, AnimationType.COLLAPSE, animation, drawData), context),\n        afterAnimate: (animation) =>\n          this.emit(new AnimateEvent(GraphEvent.AFTER_ANIMATE, AnimationType.COLLAPSE, animation, drawData), context),\n      },\n      {\n        collapse: {\n          target: id,\n          descendants: Array.from(remove.nodes).map(([, node]) => idOf(node)),\n          position: positionOf(update.nodes.get(id)!),\n        },\n      },\n    )?.finished;\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> expand node\n   * @param id - <zh/>  ID | <en/> element ID\n   * @param animation - <zh/>  true | <en/> Whether to use animation, default is true\n   */\n  public async expandNode(id: ID, options: CollapseExpandNodeOptions): Promise<void> {\n    const { model } = this.context;\n    const { animation, align } = options;\n    const position = positionOf(model.getNodeData([id])[0]);\n\n    await this.syncLayoutResult(id, align);\n\n    //  / Recalculate data\n    const data = this.computeChangesAndDrawData({ stage: 'expand', animation });\n    this.createElements(data!.drawData.add, { animation: false, stage: 'expand', target: id });\n    //  / Reset animation\n    this.context.animation!.clear();\n    this.computeStyle('expand');\n    if (!data) return;\n    const { drawData } = data;\n    const { update, add } = drawData;\n\n    const context = { animation, stage: 'expand', data: drawData } as const;\n\n    // / / Add new nodes/edges to the update list\n    add.edges.forEach((edge) => update.edges.set(idOf(edge), edge));\n    add.nodes.forEach((node) => update.nodes.set(idOf(node), node));\n\n    this.updateElements(update, context);\n\n    await this.context.animation!.animate(\n      animation,\n      {\n        beforeAnimate: (animation) =>\n          this.emit(new AnimateEvent(GraphEvent.BEFORE_ANIMATE, AnimationType.EXPAND, animation, drawData), context),\n        afterAnimate: (animation) =>\n          this.emit(new AnimateEvent(GraphEvent.AFTER_ANIMATE, AnimationType.EXPAND, animation, drawData), context),\n      },\n      {\n        expand: {\n          target: id,\n          descendants: Array.from(add.nodes).map(([, node]) => idOf(node)),\n          position,\n        },\n      },\n    )?.finished;\n  }\n\n  public async collapseCombo(id: ID, animation: boolean): Promise<void> {\n    const { model, element } = this.context;\n    if (model.getAncestorsData(id, COMBO_KEY).some((datum) => isCollapsed(datum))) return;\n\n    const combo = element!.getElement<Combo>(id)!;\n\n    const position = combo.getComboPosition({\n      ...combo.attributes,\n      collapsed: true,\n    });\n\n    const data = this.computeChangesAndDrawData({ stage: 'collapse', animation });\n    if (!data) return;\n\n    const { dataChanges, drawData } = data;\n    this.markDestroyElement(drawData);\n    const { update, remove } = drawData;\n    const context = { animation, stage: 'collapse', data: drawData } as const;\n\n    this.destroyElements(remove, context);\n    this.updateElements(update, context);\n\n    const idsOf = (data: Map<ID, ElementDatum>) => Array.from(data).map(([, node]) => idOf(node));\n\n    await this.context.animation!.animate(\n      animation,\n      {\n        before: () => this.emit(new GraphLifeCycleEvent(GraphEvent.BEFORE_DRAW, { dataChanges, animation }), context),\n        beforeAnimate: (animation) =>\n          this.emit(new AnimateEvent(GraphEvent.BEFORE_ANIMATE, AnimationType.COLLAPSE, animation, drawData), context),\n        afterAnimate: (animation) =>\n          this.emit(new AnimateEvent(GraphEvent.AFTER_ANIMATE, AnimationType.COLLAPSE, animation, drawData), context),\n        after: () => this.emit(new GraphLifeCycleEvent(GraphEvent.AFTER_DRAW, { dataChanges, animation }), context),\n      },\n      {\n        collapse: {\n          target: id,\n          descendants: [...idsOf(remove.nodes), ...idsOf(remove.combos)],\n          position,\n        },\n      },\n    )?.finished;\n  }\n\n  public async expandCombo(id: ID, animation: boolean): Promise<void> {\n    const { model } = this.context;\n    const position = positionOf(model.getComboData([id])[0]);\n\n    //  / Recalculate data\n    this.computeStyle('expand');\n    const data = this.computeChangesAndDrawData({ stage: 'expand', animation });\n    if (!data) return;\n\n    const { dataChanges, drawData } = data;\n    const { add, update } = drawData;\n    const context = { animation, stage: 'expand', data: drawData, target: id } as const;\n\n    this.createElements(add, context);\n    this.updateElements(update, context);\n\n    const idsOf = (data: Map<ID, ElementDatum>) => Array.from(data).map(([, node]) => idOf(node));\n\n    await this.context.animation!.animate(\n      animation,\n      {\n        before: () => this.emit(new GraphLifeCycleEvent(GraphEvent.BEFORE_DRAW, { dataChanges, animation }), context),\n        beforeAnimate: (animation) =>\n          this.emit(new AnimateEvent(GraphEvent.BEFORE_ANIMATE, AnimationType.EXPAND, animation, drawData), context),\n        afterAnimate: (animation) =>\n          this.emit(new AnimateEvent(GraphEvent.AFTER_ANIMATE, AnimationType.EXPAND, animation, drawData), context),\n        after: () => this.emit(new GraphLifeCycleEvent(GraphEvent.AFTER_DRAW, { dataChanges, animation }), context),\n      },\n      {\n        expand: {\n          target: id,\n          descendants: [...idsOf(add.nodes), ...idsOf(add.combos)],\n          position,\n        },\n      },\n    )?.finished;\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> clear all elements\n   */\n  public clear() {\n    this.container.destroy();\n    this.initContainer();\n    this.elementMap = {};\n    this.shapeTypeMap = {};\n    this.defaultStyle = {};\n    this.stateStyle = {};\n    this.paletteStyle = {};\n  }\n\n  public destroy() {\n    this.clear();\n    this.container.destroy();\n    // @ts-expect-error force delete\n    this.context = {};\n  }\n}\n\nexport interface DrawContext {\n  /** <zh/>  true | <en/> Whether to use animation, default is true */\n  animation?: boolean;\n  /** <zh/>  | <en/> Current draw stage */\n  stage?: AnimationStage;\n  /** <zh/>  | <en/> Whether not to dispatch events */\n  silence?: boolean;\n  /** <zh/> / ID | <en/> ID of the object to collapse/expand */\n  collapseExpandTarget?: ID;\n  /** <zh/>  | <en/> Draw type */\n  type?: 'render' | 'draw';\n  /** <zh/>  id | <en/> ID of the target element in the expand stage */\n  target?: ID;\n}\n\ninterface DrawPayload {\n  data: {\n    dataChanges: DataChange[];\n    drawData: DrawData;\n  };\n  stage: AnimationStage;\n  type: 'render' | 'draw';\n}\n\n/**\n * <zh/> /\n *\n * <en/> Expand / collapse node options\n */\nexport interface CollapseExpandNodeOptions {\n  /**\n   * <zh/> \n   *\n   * <en/> Whether to use animation\n   */\n  animation?: boolean;\n  /**\n   * <zh/> /\n   *\n   * <en/> Ensure that the position of the expanded/collapsed node remains unchanged\n   */\n  align?: boolean;\n}\n", "import type { IAnimation } from '@antv/g';\nimport { Graph as Graphlib } from '@antv/graphlib';\nimport { Supervisor, isLayoutWithIterations } from '@antv/layout';\nimport { deepMix } from '@antv/util';\nimport { COMBO_KEY, GraphEvent, TREE_KEY } from '../constants';\nimport { BaseLayout } from '../layouts';\nimport type { AntVLayout } from '../layouts/types';\nimport { getExtension } from '../registry/get';\nimport type { GraphData, LayoutOptions, NodeData } from '../spec';\nimport type { STDLayoutOptions } from '../spec/layout';\nimport type { DrawData } from '../transforms/types';\nimport type { AdaptiveLayout, ID, TreeData } from '../types';\nimport { getAnimationOptions } from '../utils/animation';\nimport { isCollapsed } from '../utils/collapsibility';\nimport { isToBeDestroyed } from '../utils/element';\nimport { GraphLifeCycleEvent, emit } from '../utils/event';\nimport { createTreeStructure } from '../utils/graphlib';\nimport { idOf } from '../utils/id';\nimport { isTreeLayout, layoutAdapter, layoutMapping2GraphData } from '../utils/layout';\nimport { print } from '../utils/print';\nimport { dfs } from '../utils/traverse';\nimport type { RuntimeContext } from './types';\n\nexport class LayoutController {\n  private context: RuntimeContext;\n\n  private supervisor?: Supervisor;\n\n  private instance?: BaseLayout;\n\n  private instances: BaseLayout[] = [];\n\n  private animationResult?: IAnimation | null;\n\n  private get presetOptions() {\n    return {\n      animation: !!getAnimationOptions(this.context.options, true),\n    };\n  }\n\n  private get options() {\n    const { options } = this.context;\n    return options.layout;\n  }\n\n  constructor(context: RuntimeContext) {\n    this.context = context;\n  }\n\n  public getLayoutInstance(): BaseLayout[] {\n    return this.instances;\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Pre-layout, that is, perform layout before drawing\n   * @param data - <zh/>  | <en/> Draw data\n   * @remarks\n   * <zh/> \n   *\n   * <en/> Pre-layout should only be executed before the first drawing, and subsequent updates will not trigger\n   */\n  public async preLayout(data: DrawData) {\n    const { graph, model } = this.context;\n\n    const { add } = data;\n    emit(graph, new GraphLifeCycleEvent(GraphEvent.BEFORE_LAYOUT, { type: 'pre' }));\n    const simulate = await this.context.layout?.simulate();\n    simulate?.nodes?.forEach((l) => {\n      const id = idOf(l);\n      const node = add.nodes.get(id);\n      model.syncNodeLikeDatum(l);\n      if (node) Object.assign(node.style!, l.style);\n    });\n    simulate?.edges?.forEach((l) => {\n      const id = idOf(l);\n      const edge = add.edges.get(id);\n      model.syncEdgeDatum(l);\n      if (edge) Object.assign(edge.style!, l.style);\n    });\n    simulate?.combos?.forEach((l) => {\n      const id = idOf(l);\n      const combo = add.combos.get(id);\n      model.syncNodeLikeDatum(l);\n      if (combo) Object.assign(combo.style!, l.style);\n    });\n    emit(graph, new GraphLifeCycleEvent(GraphEvent.AFTER_LAYOUT, { type: 'pre' }));\n    this.transformDataAfterLayout('pre', data);\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Post layout, that is, perform layout after drawing\n   * @param layoutOptions - <zh/>  | <en/> Layout options\n   */\n  public async postLayout(layoutOptions: LayoutOptions | undefined = this.options) {\n    if (!layoutOptions) return;\n    const pipeline = Array.isArray(layoutOptions) ? layoutOptions : [layoutOptions];\n    const { graph } = this.context;\n    emit(graph, new GraphLifeCycleEvent(GraphEvent.BEFORE_LAYOUT, { type: 'post' }));\n    for (let index = 0; index < pipeline.length; index++) {\n      const options = pipeline[index];\n      const data = this.getLayoutData(options);\n      const opts = { ...this.presetOptions, ...options };\n\n      emit(graph, new GraphLifeCycleEvent(GraphEvent.BEFORE_STAGE_LAYOUT, { options: opts, index }));\n      const result = await this.stepLayout(data, opts, index);\n      emit(graph, new GraphLifeCycleEvent(GraphEvent.AFTER_STAGE_LAYOUT, { options: opts, index }));\n\n      if (!options.animation) {\n        this.updateElementPosition(result, false);\n      }\n    }\n    emit(graph, new GraphLifeCycleEvent(GraphEvent.AFTER_LAYOUT, { type: 'post' }));\n    this.transformDataAfterLayout('post');\n  }\n\n  private transformDataAfterLayout(type: 'pre' | 'post', data?: DrawData) {\n    const transforms = this.context.transform.getTransformInstance();\n    // @ts-expect-error skip type check\n    Object.values(transforms).forEach((transform) => transform.afterLayout(type, data));\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Simulate layout\n   * @param options - <zh/>  | <en/> Layout options\n   * @returns <zh/>  | <en/> Simulated layout result\n   */\n  public async simulate(options: LayoutOptions | undefined = this.options): Promise<GraphData> {\n    if (!options) return {};\n    const pipeline = Array.isArray(options) ? options : [options];\n\n    let simulation: GraphData = {};\n\n    for (let index = 0; index < pipeline.length; index++) {\n      const options = pipeline[index];\n\n      const data = this.getLayoutData(options);\n      const result = await this.stepLayout(data, { ...this.presetOptions, ...options, animation: false }, index);\n\n      simulation = result;\n    }\n\n    return simulation;\n  }\n\n  public async stepLayout(data: GraphData, options: STDLayoutOptions, index: number): Promise<GraphData> {\n    if (isTreeLayout(options)) return await this.treeLayout(data, options, index);\n    return await this.graphLayout(data, options, index);\n  }\n\n  private async graphLayout(data: GraphData, options: STDLayoutOptions, index: number): Promise<GraphData> {\n    const { animation, enableWorker, iterations = 300 } = options;\n\n    const layout = this.initGraphLayout(options);\n    if (!layout) return {};\n\n    this.instances[index] = layout;\n    this.instance = layout;\n\n    //  web worker  / Use web worker to execute layout\n    if (enableWorker) {\n      const rawLayout = layout as unknown as AdaptiveLayout;\n      this.supervisor = new Supervisor(rawLayout.graphData2LayoutModel(data), rawLayout.instance, { iterations });\n      return layoutMapping2GraphData(await this.supervisor.execute());\n    }\n\n    if (isLayoutWithIterations(layout)) {\n      //  tick  / Update position based on layout iteration tick\n      if (animation) {\n        return await layout.execute(data, {\n          onTick: (tickData: GraphData) => {\n            this.updateElementPosition(tickData, false);\n          },\n        });\n      }\n\n      //  / No animation, return final position directly\n      layout.execute(data);\n      layout.stop();\n      return layout.tick(iterations);\n    }\n\n    //  / Layout without iteration, return final position directly\n    const layoutResult = await layout.execute(data);\n    if (animation) {\n      const animationResult = this.updateElementPosition(layoutResult, animation);\n      await animationResult?.finished;\n    }\n    return layoutResult;\n  }\n\n  private async treeLayout(data: GraphData, options: STDLayoutOptions, index: number): Promise<GraphData> {\n    const { type, animation } = options;\n    // @ts-expect-error @antv/hierarchy  @antv/layout  class\n    // The layout format of @antv/hierarchy is inconsistent with @antv/layout, it exports a method instead of a class\n    const layout = getExtension('layout', type) as (tree: TreeData, options: STDLayoutOptions) => TreeData;\n    if (!layout) return {};\n\n    const { nodes = [], edges = [] } = data;\n\n    const model = new Graphlib({\n      nodes: nodes.map((node) => ({ id: idOf(node), data: node.data || {} })),\n      edges: edges.map((edge) => ({ id: idOf(edge), source: edge.source, target: edge.target, data: edge.data || {} })),\n    });\n\n    createTreeStructure(model);\n\n    const layoutPreset: GraphData = { nodes: [], edges: [] };\n    const layoutResult: GraphData = { nodes: [], edges: [] };\n\n    const roots = model.getRoots(TREE_KEY) as unknown as TreeData[];\n    roots.forEach((root) => {\n      dfs(\n        root,\n        (node) => {\n          node.children = model.getSuccessors(node.id) as TreeData[];\n        },\n        (node) => model.getSuccessors(node.id) as TreeData[],\n        'TB',\n      );\n\n      const result = layout(root, options);\n      const { x: rx, y: ry, z: rz = 0 } = result;\n      //  LayoutMapping  / Convert the layout result to LayoutMapping format\n      dfs(\n        result,\n        (node) => {\n          const { id, x, y, z = 0 } = node;\n          layoutPreset.nodes!.push({ id, style: { x: rx, y: ry, z: rz } });\n          layoutResult.nodes!.push({ id, style: { x, y, z } });\n        },\n        (node) => node.children,\n        'TB',\n      );\n    });\n\n    const offset = this.inferTreeLayoutOffset(layoutResult);\n    applyTreeLayoutOffset(layoutResult, offset);\n\n    if (animation) {\n      //  / Move all nodes to the root node position first\n      applyTreeLayoutOffset(layoutPreset, offset);\n      this.updateElementPosition(layoutPreset, false);\n\n      const animationResult = this.updateElementPosition(layoutResult, animation);\n      await animationResult?.finished;\n    }\n\n    return layoutResult;\n  }\n\n  private inferTreeLayoutOffset(data: GraphData) {\n    let [minX, maxX] = [Infinity, -Infinity];\n    let [minY, maxY] = [Infinity, -Infinity];\n\n    data.nodes?.forEach((node) => {\n      const { x = 0, y = 0 } = node.style || {};\n      minX = Math.min(minX, x);\n      maxX = Math.max(maxX, x);\n      minY = Math.min(minY, y);\n      maxY = Math.max(maxY, y);\n    });\n\n    const { canvas } = this.context;\n    const canvasSize = canvas.getSize();\n    const [x1, y1] = canvas.getCanvasByViewport([0, 0]);\n    const [x2, y2] = canvas.getCanvasByViewport(canvasSize);\n\n    if (minX >= x1 && maxX <= x2 && minY >= y1 && maxY <= y2) return [0, 0] as [number, number];\n\n    const cx = (x1 + x2) / 2;\n    const cy = (y1 + y2) / 2;\n\n    return [cx - (minX + maxX) / 2, cy - (minY + maxY) / 2] as [number, number];\n  }\n\n  public stopLayout() {\n    if (this.instance && isLayoutWithIterations(this.instance)) {\n      this.instance.stop();\n      this.instance = undefined;\n    }\n\n    if (this.supervisor) {\n      this.supervisor.stop();\n      this.supervisor = undefined;\n    }\n\n    if (this.animationResult) {\n      this.animationResult.finish();\n      this.animationResult = undefined;\n    }\n  }\n\n  public getLayoutData(options: STDLayoutOptions): GraphData {\n    const {\n      nodeFilter = () => true,\n      comboFilter = () => true,\n      preLayout = false,\n      isLayoutInvisibleNodes = false,\n    } = options;\n    const { nodes, edges, combos } = this.context.model.getData();\n\n    const { element, model } = this.context;\n    const getElement = (id: ID) => element!.getElement(id);\n\n    const filterFn = preLayout\n      ? (node: NodeData) => {\n          if (!isLayoutInvisibleNodes) {\n            if (node.style?.visibility === 'hidden') return false;\n            if (model.getAncestorsData(node.id, TREE_KEY).some(isCollapsed)) return false;\n            if (model.getAncestorsData(node.id, COMBO_KEY).some(isCollapsed)) return false;\n          }\n          return nodeFilter(node);\n        }\n      : (node: NodeData) => {\n          const id = idOf(node);\n          const element = getElement(id);\n          if (!element) return false;\n          if (isToBeDestroyed(element)) return false;\n          return nodeFilter(node);\n        };\n\n    const nodesToLayout = nodes.filter(filterFn);\n    const combosToLayout = combos.filter(comboFilter);\n\n    const nodeLikeIdsMap = new Map<ID, NodeData>(nodesToLayout.map((node) => [idOf(node), node]));\n    combosToLayout.forEach((combo) => nodeLikeIdsMap.set(idOf(combo), combo));\n\n    const edgesToLayout = edges.filter(({ source, target }) => {\n      return nodeLikeIdsMap.has(source) && nodeLikeIdsMap.has(target);\n    });\n\n    return {\n      nodes: nodesToLayout,\n      edges: edgesToLayout,\n      combos: combosToLayout,\n    };\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Create layout instance\n   * @param options - <zh/>  | <en/> Layout options\n   * @returns <zh/>  | <en/> Layout object\n   */\n  private initGraphLayout(options: STDLayoutOptions) {\n    const { element, viewport } = this.context;\n    const { type, enableWorker, animation, iterations, ...restOptions } = options;\n\n    const [width, height] = viewport!.getCanvasSize();\n    const center = [width / 2, height / 2];\n\n    const nodeSize: number | ((node: NodeData) => number) =\n      (options?.nodeSize as number) ??\n      ((node) => {\n        const nodeElement = element?.getElement(node.id);\n        if (nodeElement) return nodeElement.attributes.size;\n        return element?.getElementComputedStyle('node', node).size;\n      });\n\n    const Ctor = getExtension('layout', type);\n    if (!Ctor) return print.warn(`The layout of ${type} is not registered.`);\n\n    const STDCtor =\n      Object.getPrototypeOf(Ctor.prototype) === BaseLayout.prototype\n        ? Ctor\n        : layoutAdapter(Ctor as new (options?: Record<string, unknown>) => AntVLayout, this.context);\n\n    const layout = new STDCtor(this.context);\n    const config = { nodeSize, width, height, center };\n\n    switch (layout.id) {\n      case 'd3-force':\n      case 'd3-force-3d':\n        Object.assign(config, {\n          center: { x: width / 2, y: height / 2, z: 0 },\n        });\n        break;\n      default:\n        break;\n    }\n\n    deepMix(layout.options, config, restOptions);\n    return layout as unknown as BaseLayout;\n  }\n\n  private updateElementPosition(layoutResult: GraphData, animation: boolean) {\n    const { model, element } = this.context;\n    if (!element) return null;\n    model.updateData(layoutResult);\n\n    return element.draw({ animation, silence: true });\n  }\n\n  public destroy() {\n    this.stopLayout();\n    // @ts-expect-error force delete\n    this.context = {};\n    this.supervisor?.kill();\n    this.supervisor = undefined;\n    this.instance = undefined;\n    this.instances = [];\n    this.animationResult = undefined;\n  }\n}\n\n/**\n * <zh/> \n *\n * <en/> Apply offset to tree layout result\n * @param data - <zh/>  | <en/> Layout data\n * @param offset - <zh/>  | <en/> Offset\n */\nconst applyTreeLayoutOffset = (data: GraphData, offset: [number, number]) => {\n  const [ox, oy] = offset;\n  data.nodes?.forEach((node) => {\n    if (node.style) {\n      const { x = 0, y = 0 } = node.style;\n      node.style.x = x + ox;\n      node.style.y = y + oy;\n    } else {\n      node.style = { x: ox, y: oy };\n    }\n  });\n};\n", "import type { GraphOptions } from '../spec';\n\n/**\n * <zh/> \n *\n * <en/> Infer the final configuration based on the configuration passed by the user\n * @param options - <zh/>  | <en/> Configuration passed by the user\n * @returns <zh/>  | <en/> Final configuration\n */\nexport function inferOptions(options: GraphOptions): GraphOptions {\n  const flow = [inferLayoutOptions];\n  return flow.reduce((acc, infer) => infer(acc), options);\n}\n\n/**\n * <zh/> \n *\n * <en/> Infer layout configuration\n * @param options - <zh/>  | <en/> Configuration passed by the user\n * @returns <zh/>  | <en/> Final configuration\n */\nfunction inferLayoutOptions(options: GraphOptions): GraphOptions {\n  if (!options.layout) return options;\n  if (Array.isArray(options.layout)) return options;\n  if ('preLayout' in options.layout) return options;\n\n  if (\n    [\n      'antv-dagre',\n      'combo-combined',\n      'compact-box',\n      'circular',\n      'concentric',\n      'dagre',\n      'fishbone',\n      'grid',\n      'indented',\n      'mds',\n      'radial',\n      'random',\n      'snake',\n      // <zh/>  preLayout false\n      // <en/> The label position of the following layouts needs to be adapted, and preLayout needs to be manually configured as false\n      'dendrogram',\n      'mindmap',\n    ].includes(options.layout.type)\n  ) {\n    options.layout.preLayout = true;\n  }\n\n  return options;\n}\n", "import type { BasePlugin } from '../plugins/base-plugin';\nimport { ExtensionController } from '../registry/extension';\nimport type { CustomPluginOption, PluginOptions } from '../spec/plugin';\nimport { print } from '../utils/print';\nimport type { RuntimeContext } from './types';\n\nexport class PluginController extends ExtensionController<BasePlugin<CustomPluginOption>> {\n  public category = 'plugin' as const;\n\n  constructor(context: RuntimeContext) {\n    super(context);\n    this.setPlugins(this.context.options.plugins || []);\n  }\n\n  public setPlugins(plugins: PluginOptions) {\n    this.setExtensions(plugins);\n  }\n\n  public getPluginInstance(key: string) {\n    const exactly = this.extensionMap[key];\n    if (exactly) return exactly;\n\n    print.warn(`Cannot find the plugin ${key}, will try to find it by type.`);\n\n    const fussily = this.extensions.find((extension) => extension.type === key);\n    if (fussily) return this.extensionMap[fussily.key];\n  }\n}\n", "import { ExtensionController } from '../registry/extension';\nimport type { CustomTransformOption, TransformOptions } from '../spec/transform';\nimport { BaseTransform } from '../transforms';\nimport type { RuntimeContext } from './types';\n\nexport const REQUIRED_TRANSFORMS: TransformOptions = [\n  'update-related-edges',\n  'collapse-expand-node',\n  'collapse-expand-combo',\n  'get-edge-actual-ends',\n  'arrange-draw-order',\n];\n\nexport class TransformController extends ExtensionController<BaseTransform<CustomTransformOption>> {\n  public category = 'transform' as const;\n\n  constructor(context: RuntimeContext) {\n    super(context);\n    this.setTransforms(this.context.options.transforms || []);\n  }\n\n  protected getTransforms() {}\n\n  public setTransforms(transforms: TransformOptions) {\n    this.setExtensions([\n      ...REQUIRED_TRANSFORMS.slice(0, REQUIRED_TRANSFORMS.length - 1),\n      ...transforms,\n      REQUIRED_TRANSFORMS[REQUIRED_TRANSFORMS.length - 1],\n    ]);\n  }\n\n  public getTransformInstance(): Record<string, BaseTransform>;\n  public getTransformInstance(key: string): BaseTransform;\n  public getTransformInstance(key?: string) {\n    return key ? this.extensionMap[key] : this.extensionMap;\n  }\n}\n", "import { AABB, ICamera } from '@antv/g';\nimport { clamp, isNumber, pick } from '@antv/util';\nimport { AnimationType, GraphEvent } from '../constants';\nimport type {\n  FitViewOptions,\n  ID,\n  Point,\n  TransformOptions,\n  Vector2,\n  Vector3,\n  ViewportAnimationEffectTiming,\n} from '../types';\nimport type { Element } from '../types/element';\nimport { getAnimationOptions } from '../utils/animation';\nimport { getBBoxSize, getCombinedBBox, getExpandedBBox, isBBoxInside, isPointInBBox } from '../utils/bbox';\nimport { AnimateEvent, ViewportEvent, emit } from '../utils/event';\nimport { isPoint } from '../utils/is';\nimport { parsePadding } from '../utils/padding';\nimport { add, divide, subtract } from '../utils/vector';\nimport type { RuntimeContext } from './types';\n\nexport class ViewportController {\n  private context: RuntimeContext;\n\n  private get padding() {\n    return parsePadding(this.context.options.padding);\n  }\n\n  private get paddingOffset(): Point {\n    const [top, right, bottom, left] = this.padding;\n    const [offsetX, offsetY, offsetZ] = [(left - right) / 2, (top - bottom) / 2, 0];\n    return [offsetX, offsetY, offsetZ];\n  }\n\n  constructor(context: RuntimeContext) {\n    this.context = context;\n    const [px, py] = this.paddingOffset;\n    const { zoom, rotation, x = px, y = py } = context.options;\n    this.transform({ mode: 'absolute', scale: zoom, translate: [x, y], rotate: rotation }, false);\n  }\n\n  private get camera() {\n    const { canvas } = this.context;\n    return new Proxy(canvas.getCamera(), {\n      get: (target, prop: keyof ICamera) => {\n        const layers = Object.entries(canvas.getLayers()).filter(([name]) => !['main'].includes(name));\n        const cameras = layers.map(([, layer]) => layer.getCamera());\n\n        const value = target[prop];\n        if (typeof value === 'function') {\n          return (...args: any[]) => {\n            const result = (value as (...args: any[]) => any).apply(target, args);\n            cameras.forEach((camera) => {\n              (camera[prop] as (...args: any[]) => any).apply(camera, args);\n            });\n\n            return result;\n          };\n        }\n      },\n    });\n  }\n\n  private landmarkCounter = 0;\n\n  private createLandmark(options: Parameters<typeof this.camera.createLandmark>[1]) {\n    return this.camera.createLandmark(`landmark-${this.landmarkCounter++}`, options);\n  }\n\n  private getAnimation(animation?: ViewportAnimationEffectTiming) {\n    const finalAnimation = getAnimationOptions(this.context.options, animation);\n    if (!finalAnimation) return false;\n    return pick({ ...finalAnimation }, ['easing', 'duration']) as Exclude<ViewportAnimationEffectTiming, boolean>;\n  }\n\n  public getCanvasSize(): [number, number] {\n    const { canvas } = this.context;\n    const { width = 0, height = 0 } = canvas.getConfig();\n    return [width, height];\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Get the center coordinates of the canvas\n   * @returns - <zh/>  | <en/> Center coordinates of the canvas\n   * @remarks\n   * <zh/> \n   *\n   * <en/> Calculate the center coordinates based on the width and height of the canvas, not affected by the viewport transformation\n   */\n  public getCanvasCenter(): Point {\n    const { canvas } = this.context;\n    const { width = 0, height = 0 } = canvas.getConfig();\n    return [width / 2, height / 2, 0];\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Current viewport center coordinates\n   * @returns - <zh/>  | <en/> Viewport center coordinates\n   * @remarks\n   * <zh/> \n   *\n   * <en/> With the origin of the canvas as the origin, affected by the viewport transformation\n   */\n  public getViewportCenter(): Point {\n    //  camera.getFocalPoint() \n    //  2D  pan focalPoint \n    const [x, y] = this.camera.getPosition();\n    return [x, y, 0];\n  }\n\n  public getGraphCenter(): Point {\n    return this.context.graph.getViewportByCanvas(this.getCanvasCenter());\n  }\n\n  public getZoom() {\n    return this.camera.getZoom();\n  }\n\n  public getRotation() {\n    return this.camera.getRoll();\n  }\n\n  private getTranslateOptions(options: TransformOptions) {\n    const { camera } = this;\n    const { mode, translate = [] } = options;\n    const currentZoom = this.getZoom();\n\n    const position = camera.getPosition();\n    const focalPoint = camera.getFocalPoint();\n    const [cx, cy] = this.getCanvasCenter();\n\n    const [x = 0, y = 0, z = 0] = translate;\n\n    const delta = divide([-x, -y, -z], currentZoom);\n\n    return mode === 'relative'\n      ? {\n          position: add(position as Vector3, delta),\n          focalPoint: add(focalPoint as Vector3, delta),\n        }\n      : {\n          position: add([cx, cy, position[2]], delta),\n          focalPoint: add([cx, cy, focalPoint[2]], delta),\n        };\n  }\n\n  private getRotateOptions(options: TransformOptions) {\n    const { mode, rotate = 0 } = options;\n    const roll = mode === 'relative' ? this.camera.getRoll() + rotate : rotate;\n    return { roll };\n  }\n\n  private getZoomOptions(options: TransformOptions) {\n    const { zoomRange } = this.context.options;\n    const currentZoom = this.camera.getZoom();\n    const { mode, scale = 1 } = options;\n    return clamp(mode === 'relative' ? currentZoom * scale : scale, ...zoomRange!);\n  }\n\n  private transformResolver?: () => void;\n\n  public async transform(options: TransformOptions, animation?: ViewportAnimationEffectTiming): Promise<void> {\n    const { graph } = this.context;\n    const { translate, rotate, scale, origin } = options;\n    this.cancelAnimation();\n\n    const _animation = this.getAnimation(animation);\n\n    emit(graph, new ViewportEvent(GraphEvent.BEFORE_TRANSFORM, options));\n\n    //  setZoomByViewportPoint\n    // For zoom operations, and no translation, rotation, center point, and animation involved, call setZoomByViewportPoint directly\n    if (!rotate && scale && !translate && origin && !_animation) {\n      this.camera.setZoomByViewportPoint(this.getZoomOptions(options), origin as Vector2);\n      emit(graph, new ViewportEvent(GraphEvent.AFTER_TRANSFORM, options));\n      return;\n    }\n\n    const landmarkOptions: Parameters<typeof this.camera.createLandmark>[1] = {};\n    if (translate) Object.assign(landmarkOptions, this.getTranslateOptions(options));\n    if (isNumber(rotate)) Object.assign(landmarkOptions, this.getRotateOptions(options));\n    if (isNumber(scale)) Object.assign(landmarkOptions, { zoom: this.getZoomOptions(options) });\n\n    if (_animation) {\n      emit(graph, new AnimateEvent(GraphEvent.BEFORE_ANIMATE, AnimationType.TRANSFORM, null, options));\n\n      return new Promise<void>((resolve) => {\n        this.transformResolver = resolve;\n        this.camera.gotoLandmark(this.createLandmark(landmarkOptions), {\n          ..._animation,\n          onfinish: () => {\n            emit(graph, new AnimateEvent(GraphEvent.AFTER_ANIMATE, AnimationType.TRANSFORM, null, options));\n            emit(graph, new ViewportEvent(GraphEvent.AFTER_TRANSFORM, options));\n            this.transformResolver = undefined;\n            resolve();\n          },\n        });\n      });\n    } else {\n      this.camera.gotoLandmark(this.createLandmark(landmarkOptions), {\n        duration: 0,\n      });\n\n      emit(graph, new ViewportEvent(GraphEvent.AFTER_TRANSFORM, options));\n    }\n  }\n\n  public async fitView(options?: FitViewOptions, animation?: ViewportAnimationEffectTiming): Promise<void> {\n    const [top, right, bottom, left] = this.padding;\n    const { when = 'always', direction = 'both' } = options || {};\n\n    const [width, height] = this.context.canvas.getSize();\n    const innerWidth = width - left - right;\n    const innerHeight = height - top - bottom;\n\n    const canvasBounds = this.context.canvas.getBounds();\n    const bboxInViewPort = this.getBBoxInViewport(canvasBounds);\n    const [contentWidth, contentHeight] = getBBoxSize(bboxInViewPort);\n\n    const isOverflow =\n      (direction === 'x' && contentWidth >= innerWidth) ||\n      (direction === 'y' && contentHeight >= innerHeight) ||\n      (direction === 'both' && contentWidth >= innerWidth && contentHeight >= innerHeight);\n\n    if (when === 'overflow' && !isOverflow) return await this.fitCenter({ animation });\n\n    const scaleX = innerWidth / contentWidth;\n    const scaleY = innerHeight / contentHeight;\n    const scale = direction === 'x' ? scaleX : direction === 'y' ? scaleY : Math.min(scaleX, scaleY);\n\n    const _animation = this.getAnimation(animation);\n    if (!Number.isFinite(scale)) {\n      return;\n    }\n    await this.transform(\n      {\n        mode: 'relative',\n        scale,\n        translate: add(\n          subtract(this.getCanvasCenter(), this.getBBoxInViewport(canvasBounds).center),\n          divide(this.paddingOffset, scale),\n        ),\n      },\n      _animation,\n    );\n  }\n\n  public async fitCenter(options: FocusOptions): Promise<void> {\n    const canvasBounds = this.context.canvas.getBounds();\n    await this.focus(canvasBounds, options);\n  }\n\n  public async focusElements(ids: ID[], options: FocusOptions = {}): Promise<void> {\n    const { element } = this.context;\n    if (!element) return;\n\n    const getBoundsOf = (el: Element) =>\n      options.shapes ? el.getShape(options.shapes).getRenderBounds() : el.getRenderBounds();\n\n    const elementsBounds = getCombinedBBox(ids.map((id) => getBoundsOf(element.getElement(id)!)));\n    await this.focus(elementsBounds, options);\n  }\n\n  private async focus(bbox: AABB, options: FocusOptions) {\n    const center = this.context.graph.getViewportByCanvas(bbox.center);\n    const position = options.position || this.getCanvasCenter();\n    const delta = subtract(position, center);\n    await this.transform({ mode: 'relative', translate: add(delta, this.paddingOffset) }, options.animation);\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Get the bounding box of the canvas element in the viewport\n   * @param bbox - <zh/>  | <en/> Canvas element bounding box\n   * @returns - <zh/>  | <en/> Bounding box in the viewport\n   */\n  public getBBoxInViewport(bbox: AABB) {\n    const { min, max } = bbox;\n    const { graph } = this.context;\n    const [x1, y1] = graph.getViewportByCanvas(min);\n    const [x2, y2] = graph.getViewportByCanvas(max);\n\n    const bboxInViewport = new AABB();\n    bboxInViewport.setMinMax([x1, y1, 0], [x2, y2, 0]);\n    return bboxInViewport;\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Determine whether the point or bounding box is in the viewport\n   * @param target - <zh/>  | <en/> Point or bounding box\n   * @param complete - <zh/>  | <en/> Whether it is completely in the viewport\n   * @param tolerance - <zh/>  | <en/> Tolerance outside the viewport\n   * @returns - <zh/>  | <en/> Whether it is in the viewport\n   */\n  public isInViewport(target: Point | AABB, complete = false, tolerance = 0) {\n    const { graph } = this.context;\n    const size = this.getCanvasSize();\n\n    const [x1, y1] = graph.getCanvasByViewport([0, 0]);\n    const [x2, y2] = graph.getCanvasByViewport(size);\n\n    let viewportBBox = new AABB();\n    viewportBBox.setMinMax([x1, y1, 0], [x2, y2, 0]);\n\n    if (tolerance) {\n      viewportBBox = getExpandedBBox(viewportBBox, tolerance);\n    }\n\n    return isPoint(target)\n      ? isPointInBBox(target, viewportBBox)\n      : !complete\n        ? viewportBBox.intersects(target)\n        : isBBoxInside(target, viewportBBox);\n  }\n\n  public cancelAnimation() {\n    // @ts-expect-error landmarks is private\n    if (this.camera.landmarks?.length) {\n      this.camera.cancelLandmarkAnimation();\n    }\n    this.transformResolver?.();\n  }\n}\n\nexport interface FocusOptions {\n  /**\n   * <zh/> \n   *\n   * <en/> Animation configuration\n   */\n  animation?: ViewportAnimationEffectTiming;\n  /**\n   * <zh/> \n   *\n   * <en/> Calculate the bounding box by using sub-shapes\n   */\n  shapes?: string;\n  /**\n   * <zh/> \n   *\n   * <en/> Alignment position, default is the center of the canvas\n   */\n  position?: Point;\n}\n", "import EventEmitter from '@antv/event-emitter';\nimport type { AABB, BaseStyleProps } from '@antv/g';\nimport { debounce, isEqual, isFunction, isNumber, isObject, isString, omit } from '@antv/util';\nimport { COMBO_KEY, GraphEvent } from '../constants';\nimport type { Plugin } from '../plugins/types';\nimport type {\n  BehaviorOptions,\n  ComboData,\n  ComboOptions,\n  EdgeData,\n  EdgeOptions,\n  GraphData,\n  GraphOptions,\n  LayoutOptions,\n  NodeData,\n  NodeOptions,\n  PluginOptions,\n  ThemeOptions,\n  TransformOptions,\n} from '../spec';\nimport type { UpdateBehaviorOption } from '../spec/behavior';\nimport type { UpdatePluginOption } from '../spec/plugin';\nimport type { UpdateTransformOption } from '../spec/transform';\nimport type {\n  DataID,\n  EdgeDirection,\n  ElementDatum,\n  ElementType,\n  FitViewOptions,\n  HierarchyKey,\n  ID,\n  IEvent,\n  NodeLikeData,\n  PartialEdgeData,\n  PartialGraphData,\n  PartialNodeLikeData,\n  Point,\n  State,\n  Vector2,\n  ViewportAnimationEffectTiming,\n} from '../types';\nimport { isCollapsed } from '../utils/collapsibility';\nimport { sizeOf } from '../utils/dom';\nimport { getSubgraphRelatedEdges } from '../utils/edge';\nimport { GraphLifeCycleEvent, emit } from '../utils/event';\nimport { idOf } from '../utils/id';\nimport { isPreLayout } from '../utils/layout';\nimport { format } from '../utils/print';\nimport { subtract } from '../utils/vector';\nimport { getZIndexOf } from '../utils/z-index';\nimport { Animation } from './animation';\nimport { BatchController } from './batch';\nimport { BehaviorController } from './behavior';\nimport type { DataURLOptions } from './canvas';\nimport { Canvas } from './canvas';\nimport { DataController } from './data';\nimport type { CollapseExpandNodeOptions } from './element';\nimport { ElementController } from './element';\nimport { LayoutController } from './layout';\nimport { inferOptions } from './options';\nimport { PluginController } from './plugin';\nimport { TransformController } from './transform';\nimport { RuntimeContext } from './types';\nimport { ViewportController } from './viewport';\n\nexport class Graph extends EventEmitter {\n  private options: GraphOptions = {};\n\n  /**\n   * @internal\n   */\n  static defaultOptions: GraphOptions = {\n    autoResize: false,\n    theme: 'light',\n    rotation: 0,\n    zoom: 1,\n    zoomRange: [0.01, 10],\n  };\n\n  /**\n   * <zh/> \n   *\n   * <en/> Whether the current graph instance has been rendered\n   */\n  public rendered = false;\n\n  /**\n   * <zh/> \n   *\n   * <en/> Whether the current graph instance has been destroyed\n   */\n  public destroyed = false;\n\n  // @ts-expect-error will be initialized in createRuntime\n  private context: RuntimeContext = {\n    model: new DataController(),\n  };\n\n  constructor(options: GraphOptions) {\n    super();\n    this._setOptions(Object.assign({}, Graph.defaultOptions, options), true);\n    this.context.graph = this;\n\n    // Listening resize to autoResize.\n    this.options.autoResize && globalThis.addEventListener?.('resize', this.onResize);\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Get options\n   * @returns <zh/>  | <en/> options\n   * @apiCategory option\n   */\n  public getOptions(): GraphOptions {\n    return this.options;\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Set options\n   * @param options - <zh/>  | <en/> options\n   * @remarks\n   * <zh/>  devicePixelRatiocontainer \n   *\n   * <en/> To update devicePixelRatio and container properties, please destroy and recreate the instance\n   * @apiCategory option\n   */\n  public setOptions(options: GraphOptions): void {\n    this._setOptions(options, false);\n  }\n\n  private _setOptions(options: GraphOptions, isInit: boolean) {\n    this.updateCanvas(options);\n    Object.assign(this.options, inferOptions(options));\n\n    if (isInit) {\n      const { data } = options;\n      if (data) this.addData(data);\n      return;\n    }\n    const { behaviors, combo, data, edge, layout, node, plugins, theme, transforms } = options;\n    if (behaviors) this.setBehaviors(behaviors);\n    if (data) this.setData(data);\n    if (node) this.setNode(node);\n    if (edge) this.setEdge(edge);\n    if (combo) this.setCombo(combo);\n    if (layout) this.setLayout(layout);\n    if (theme) this.setTheme(theme);\n    if (plugins) this.setPlugins(plugins);\n    if (transforms) this.setTransforms(transforms);\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Get the size of the current canvas container\n   * @returns <zh/>  | <en/> canvas size\n   * @apiCategory canvas\n   */\n  public getSize(): [number, number] {\n    if (this.context.canvas) return this.context.canvas.getSize();\n    return [this.options.width || 0, this.options.height || 0];\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Set the size of the current canvas container\n   * @param width - <zh/>  | <en/> canvas width\n   * @param height - <zh/>  | <en/> canvas height\n   * @apiCategory canvas\n   */\n  public setSize(width: number, height: number): void {\n    if (width) this.options.width = width;\n    if (height) this.options.height = height;\n\n    this.resize(width, height);\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Get the zoom range of the current graph\n   * @param zoomRange - <zh/>  | <en/> zoom range\n   * @apiCategory viewport\n   */\n  public setZoomRange(zoomRange: GraphOptions['zoomRange']): void {\n    this.options.zoomRange = zoomRange;\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Get the zoom range of the current graph\n   * @returns <zh/>  | <en/> zoom range\n   * @apiCategory viewport\n   */\n  public getZoomRange(): GraphOptions['zoomRange'] {\n    return this.options.zoomRange;\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Set node mapper\n   * @param node - <zh/>  | <en/> node options\n   * @remarks\n   * <zh/>  `options.node` \n   *\n   * <en/> The value of `options.node`\n   * @apiCategory element\n   */\n  public setNode(node: NodeOptions): void {\n    this.options.node = node;\n    this.context.model.refreshData();\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Set edge mapper\n   * @param edge - <zh/>  | <en/> edge options\n   * @remarks\n   * <zh/>  `options.edge` \n   *\n   * <en/> The value of `options.edge`\n   * @apiCategory element\n   */\n  public setEdge(edge: EdgeOptions): void {\n    this.options.edge = edge;\n    this.context.model.refreshData();\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Set combo mapper\n   * @param combo - <zh/>  | <en/> combo options\n   * @remarks\n   * <zh/>  `options.combo` \n   *\n   * <en/> The value of `options.combo`\n   * @apiCategory element\n   */\n  public setCombo(combo: ComboOptions): void {\n    this.options.combo = combo;\n    this.context.model.refreshData();\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Get theme\n   * @returns <zh/>  | <en/> current theme\n   * @apiCategory theme\n   */\n  public getTheme(): ThemeOptions {\n    return this.options.theme!;\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Set theme\n   * @param theme - <zh/>  | <en/> theme name\n   * @example\n   * ```ts\n   * graph.setTheme('dark');\n   * ```\n   * @apiCategory theme\n   */\n  public setTheme(theme: ThemeOptions | ((prev: ThemeOptions) => ThemeOptions)): void {\n    this.options.theme = isFunction(theme) ? theme(this.getTheme()) : theme;\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Set layout\n   * @param layout - <zh/>  | <en/> layout options\n   * @example\n   * ```ts\n   * graph.setLayout({\n   *  type: 'dagre',\n   * })\n   * ```\n   * @apiCategory layout\n   */\n  public setLayout(layout: LayoutOptions | ((prev: LayoutOptions) => LayoutOptions)): void {\n    this.options.layout = isFunction(layout) ? layout(this.getLayout()) : layout;\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Get layout options\n   * @returns <zh/>  | <en/> layout options\n   * @apiCategory layout\n   */\n  public getLayout(): LayoutOptions {\n    return this.options.layout!;\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Set behaviors\n   * @param behaviors - <zh/>  | <en/> behavior options\n   * @remarks\n   * <zh/> \n   *\n   * <en/> The set behavior will completely replace the original behavior. If you need to add behavior, you can use the following method:\n   *\n   * ```ts\n   * graph.setBehaviors((behaviors) => [...behaviors, { type: 'zoom-canvas' }])\n   * ```\n   * @apiCategory behavior\n   */\n  public setBehaviors(behaviors: BehaviorOptions | ((prev: BehaviorOptions) => BehaviorOptions)): void {\n    this.options.behaviors = isFunction(behaviors) ? behaviors(this.getBehaviors()) : behaviors;\n    this.context.behavior?.setBehaviors(this.options.behaviors);\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Update specified behavior options\n   * @param behavior - <zh/>  | <en/> behavior options\n   * @remarks\n   * <zh/>  key \n   *\n   * <en/> If you want to update a behavior, you must specify the key field in the behavior options, for example:\n   * ```ts\n   * {\n   *   behaviors: [{ type: 'zoom-canvas', key: 'zoom-canvas' }]\n   * }\n   *\n   * graph.updateBehavior({ key: 'zoom-canvas', enable: false })\n   * ```\n   * @apiCategory behavior\n   */\n  public updateBehavior(behavior: UpdateBehaviorOption): void {\n    this.setBehaviors((behaviors) =>\n      behaviors.map((_behavior) => {\n        if (typeof _behavior === 'object' && _behavior.key === behavior.key) {\n          return { ..._behavior, ...behavior };\n        }\n        return _behavior;\n      }),\n    );\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Get behaviors options\n   * @returns <zh/>  | <en/> behavior options\n   * @apiCategory behavior\n   */\n  public getBehaviors(): BehaviorOptions {\n    return this.options.behaviors || [];\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Set plugins options\n   * @param plugins - <zh/>  | <en/> plugin options\n   * @remarks\n   * <zh/> \n   *\n   * <en/> The set plugin will completely replace the original plugin configuration. If you need to add a plugin, you can use the following method:\n   * ```ts\n   * graph.setPlugins((plugins) => [...plugins, { key: 'grid-line' }])\n   * ```\n   * @apiCategory plugin\n   */\n  public setPlugins(plugins: PluginOptions | ((prev: PluginOptions) => PluginOptions)): void {\n    this.options.plugins = isFunction(plugins) ? plugins(this.getPlugins()) : plugins;\n    this.context.plugin?.setPlugins(this.options.plugins);\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Update plugin options\n   * @param plugin - <zh/>  | <en/> plugin options\n   * @remarks\n   * <zh/>  key \n   *\n   * <en/> If you want to update a plugin, you must specify the key field in the plugin options, for example:\n   * ```ts\n   * {\n   *   plugins: [{ key: 'grid-line' }]\n   * }\n   *\n   * graph.updatePlugin({ key: 'grid-line', follow: true })\n   * ```\n   * @apiCategory plugin\n   */\n  public updatePlugin(plugin: UpdatePluginOption): void {\n    this.setPlugins((plugins) =>\n      plugins.map((_plugin) => {\n        if (typeof _plugin === 'object' && _plugin.key === plugin.key) {\n          return { ..._plugin, ...plugin };\n        }\n        return _plugin;\n      }),\n    );\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Get plugins options\n   * @returns <zh/>  | <en/> plugin options\n   * @apiCategory plugin\n   */\n  public getPlugins(): PluginOptions {\n    return this.options.plugins || [];\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Get plugin instance\n   * @param key - <zh/>  key plugin  | <en/> plugin key(need to be specified manually when configuring plugin)\n   * @returns <zh/>  | <en/> plugin instance\n   * @remarks\n   * <zh/>  API  `request`  `exit` \n   *\n   * <en/> Some plugins provide API methods for calling, such as the full-screen plugin can call the `request` and `exit` methods to request and exit full-screen\n   * ```ts\n   * const fullscreen = graph.getPluginInstance('fullscreen');\n   *\n   * fullscreen.request();\n   *\n   * fullscreen.exit();\n   * ```\n   * @apiCategory plugin\n   */\n  public getPluginInstance<T extends Plugin>(key: string) {\n    return this.context.plugin!.getPluginInstance(key) as unknown as T;\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Set data transforms\n   * @param transforms - <zh/>  | <en/> data transform options\n   * @remarks\n   * <zh/> \n   *\n   * <en/> Data transforms can perform data transformation during the rendering process of the graph. Currently, it supports transforming the drawing data before rendering.\n   * @apiCategory transform\n   */\n  public setTransforms(transforms: TransformOptions | ((prev: TransformOptions) => TransformOptions)): void {\n    this.options.transforms = isFunction(transforms) ? transforms(this.getTransforms()) : transforms;\n    this.context.transform?.setTransforms(this.options.transforms);\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Update data transform\n   * @param transform - <zh/>  | <en/> data transform options\n   * @apiCategory transform\n   */\n  public updateTransform(transform: UpdateTransformOption): void {\n    this.setTransforms((transforms) =>\n      transforms.map((_transform) => {\n        if (typeof _transform === 'object' && _transform.key === transform.key) {\n          return { ..._transform, ...transform };\n        }\n        return _transform;\n      }),\n    );\n    this.context.model.refreshData();\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Get data transforms options\n   * @returns <zh/>  | <en/> data transform options\n   * @apiCategory transform\n   */\n  public getTransforms(): TransformOptions {\n    return this.options.transforms || [];\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Get graph data\n   * @returns <zh/>  | <en/> Graph data\n   * <zh/> \n   *\n   * <en/> Get the data of the current graph, including node, edge, and combo data\n   * @apiCategory data\n   */\n  public getData(): Required<GraphData> {\n    return this.context.model.getData();\n  }\n  /**\n   * <zh/> \n   * <en/> Determine whether a specified node exists in the graph\n   * @param {ID} id\n   * @returns {boolean}\n   * @remarks <zh/> ,\n   * <en/> Determine whether a specified node exists in the graph and avoid operating on non-existent nodes\n   */\n  public hasNode(id: ID): boolean {\n    return this.context.model.hasNode(id);\n  }\n  /**\n   * <zh/> \n   * <en/> Determine whether a specified edge exists in the graph\n   * @param {ID} id\n   * @returns  {boolean}\n   * @remarks <zh/> ,\n   * <en/> Determine whether a specified edge exists in the graph and avoid operating on non-existent edges\n   */\n  public hasEdge(id: ID): boolean {\n    return this.context.model.hasEdge(id);\n  }\n\n  /**\n   * <zh/> \n   * <en/> Determine whether a specified combo exists in the graph\n   * @param {ID} id\n   * @returns  {boolean}\n   * @remarks <zh/> ,\n   * <en/> Determine whether a specified combo exists in the graph and avoid operating on non-existent combos\n   */\n  public hasCombo(id: ID): boolean {\n    return this.context.model.hasCombo(id);\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Get element data by ID\n   * @param id - <zh/>  ID | <en/> element ID\n   * @returns <zh/>  | <en/> element data\n   * @remarks\n   * <zh/> \n   *\n   * <en/> Get element data directly without considering the element type\n   * @apiCategory data\n   */\n  public getElementData(id: ID): ElementDatum;\n  /**\n   * <zh/> \n   *\n   * <en/> Get multiple element data in batch\n   * @param ids - <zh/>  ID  | <en/> element ID array\n   * @remarks\n   * <zh/> \n   *\n   * <en/> Get element data directly without considering the element type\n   * @apiCategory data\n   */\n  public getElementData(ids: ID[]): ElementDatum[];\n  public getElementData(ids: ID | ID[]): ElementDatum | ElementDatum[] {\n    if (Array.isArray(ids)) return ids.map((id) => this.context.model.getElementDataById(id));\n    return this.context.model.getElementDataById(ids);\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Get all node data\n   * @returns <zh/>  | <en/> node data\n   * @apiCategory data\n   */\n  public getNodeData(): NodeData[];\n  /**\n   * <zh/> \n   *\n   * <en/> Get single node data\n   * @param id - <zh/>  ID | <en/> node ID\n   * @returns <zh/>  | <en/> node data\n   * @example\n   * ```ts\n   * const node1 = graph.getNodeData('node-1');\n   * ```\n   * @apiCategory data\n   * @remarks\n   * <zh/>  id \n   *\n   * <en/> Node id must exist, otherwise an exception will be thrown\n   */\n  public getNodeData(id: ID): NodeData;\n  /**\n   * <zh/> \n   *\n   * <en/> Get multiple node data in batch\n   * @param ids - <zh/>  ID  | <en/> node ID array\n   * @returns <zh/>  | <en/> node data\n   * @example\n   * ```ts\n   * const [node1, node2] = graph.getNodeData(['node-1', 'node-2']);\n   * ```\n   * @apiCategory data\n   * @remarks\n   * <zh/>  id \n   *\n   * <en/> Each node id in the array must exist, otherwise an exception will be thrown\n   */\n  public getNodeData(ids: ID[]): NodeData[];\n  public getNodeData(id?: ID | ID[]): NodeData | NodeData[] {\n    if (id === undefined) return this.context.model.getNodeData();\n    if (Array.isArray(id)) return this.context.model.getNodeData(id);\n    return this.context.model.getNodeLikeDatum(id);\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Get all edge data\n   * @returns <zh/>  | <en/> edge data\n   * @apiCategory data\n   */\n  public getEdgeData(): EdgeData[];\n  /**\n   * <zh/> \n   *\n   * <en/> Get single edge data\n   * @param id - <zh/>  ID | <en/> edge ID\n   * @returns <zh/>  | <en/> edge data\n   * @example\n   * ```ts\n   * const edge1 = graph.getEdgeData('edge-1');\n   * ```\n   * @apiCategory data\n   * @remarks\n   * <zh/>  id \n   *\n   * <en/> Edge id must exist, otherwise an exception will be thrown\n   */\n  public getEdgeData(id: ID): EdgeData;\n  /**\n   * <zh/> \n   *\n   * <en/> Get multiple edge data in batch\n   * @param ids - <zh/>  ID  | <en/> edge ID array\n   * @returns <zh/>  | <en/> edge data\n   * @example\n   * ```ts\n   * const [edge1, edge2] = graph.getEdgeData(['edge-1', 'edge-2']);\n   * ```\n   * @apiCategory data\n   * @remarks\n   * <zh/>  id \n   *\n   * <en/> Each edge id in the array must exist, otherwise an exception will be thrown\n   */\n  public getEdgeData(ids: ID[]): EdgeData[];\n  public getEdgeData(id?: ID | ID[]): EdgeData | EdgeData[] {\n    if (id === undefined) return this.context.model.getEdgeData();\n    if (Array.isArray(id)) return this.context.model.getEdgeData(id);\n    return this.context.model.getEdgeDatum(id);\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Get all combo data\n   * @returns <zh/>  | <en/> combo data\n   * @apiCategory data\n   */\n  public getComboData(): ComboData[];\n  /**\n   * <zh/> \n   *\n   * <en/> Get single combo data\n   * @param id - <zh/> ID | <en/> combo ID\n   * @returns <zh/>  | <en/> combo data\n   * @example\n   * ```ts\n   * const combo1 = graph.getComboData('combo-1');\n   * ```\n   * @apiCategory data\n   * @remarks\n   * <zh/>  id \n   *\n   * <en/> Combo id must exist, otherwise an exception will be thrown\n   */\n  public getComboData(id: ID): ComboData;\n  /**\n   * <zh/> \n   *\n   * <en/> Get multiple combo data in batch\n   * @param ids - <zh/> ID  | <en/> combo ID array\n   * @returns <zh/>  | <en/> combo data\n   * @example\n   * ```ts\n   * const [combo1, combo2] = graph.getComboData(['combo-1', 'combo-2']);\n   * ```\n   * @apiCategory data\n   * @remarks\n   * <zh/>  id \n   *\n   * <en/> Each combo id in the array must exist, otherwise an exception will be thrown\n   */\n  public getComboData(ids: ID[]): ComboData[];\n  public getComboData(id?: ID | ID[]): ComboData | ComboData[] {\n    if (id === undefined) return this.context.model.getComboData();\n    if (Array.isArray(id)) return this.context.model.getComboData(id);\n    return this.context.model.getNodeLikeDatum(id);\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Set full data\n   * @param data - <zh/>  | <en/> data\n   * @remarks\n   * <zh/> G6 \n   *\n   * <en/> Setting full data will replace all data in the current graph, and G6 will automatically calculate the data difference\n   * @apiCategory data\n   */\n  public setData(data: GraphData | ((prev: GraphData) => GraphData)): void {\n    this.context.model.setData(isFunction(data) ? data(this.getData()) : data);\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Add element data\n   * @param data - <zh/>  | <en/> element data\n   * @example\n   * ```ts\n   * graph.addData({\n   *  nodes: [{ id: 'node-1' }, { id: 'node-2' }],\n   *  edges: [{ source: 'node-1', target: 'node-2' }],\n   * });\n   * ```\n   * @apiCategory data\n   */\n  public addData(data: GraphData | ((prev: GraphData) => GraphData)): void {\n    this.context.model.addData(isFunction(data) ? data(this.getData()) : data);\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Add node data\n   * @param data - <zh/>  | <en/> node data\n   * @example\n   * ```ts\n   * graph.addNodeData([{ id: 'node-1' }, { id: 'node-2' }]);\n   * ```\n   * @apiCategory data\n   */\n  public addNodeData(data: NodeData[] | ((prev: NodeData[]) => NodeData[])): void {\n    this.context.model.addNodeData(isFunction(data) ? data(this.getNodeData()) : data);\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Add edge data\n   * @param data - <zh/>  | <en/> edge data\n   * @example\n   * ```ts\n   * graph.addEdgeData([{ source: 'node-1', target: 'node-2' }]);\n   * ```\n   * @apiCategory data\n   */\n  public addEdgeData(data: EdgeData[] | ((prev: EdgeData[]) => EdgeData[])): void {\n    this.context.model.addEdgeData(isFunction(data) ? data(this.getEdgeData()) : data);\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Add combo data\n   * @param data - <zh/>  | <en/> combo data\n   * @example\n   * ```ts\n   * graph.addComboData([{ id: 'combo-1' }]);\n   * ```\n   * @apiCategory data\n   */\n  public addComboData(data: ComboData[] | ((prev: ComboData[]) => ComboData[])): void {\n    this.context.model.addComboData(isFunction(data) ? data(this.getComboData()) : data);\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Add child node data to the tree node\n   * @param parentId - <zh/>  ID | <en/> parent node ID\n   * @param childrenData - <zh/>  | <en/> child node data\n   * @remarks\n   * <zh/>  addNodeData / addComboData \n   *\n   * <en/> Use addNodeData / addComboData method to add child nodes to the combo\n   * @apiCategory data\n   */\n  public addChildrenData(parentId: ID, childrenData: NodeData[]) {\n    this.context.model.addChildrenData(parentId, childrenData);\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Update element data\n   * @param data - <zh/>  | <en/> element data\n   * @remarks\n   * <zh/> \n   *\n   * <en/> Just pass in the data that needs to be updated, no need to pass in the complete data\n   * @example\n   * ```ts\n   * graph.updateData({\n   *   nodes: [{ id: 'node-1', style: { x: 100, y: 100 } }],\n   *   edges: [{ id: 'edge-1', style: { lineWidth: 2 } }]\n   * });\n   * ```\n   * @apiCategory data\n   */\n  public updateData(data: PartialGraphData | ((prev: GraphData) => PartialGraphData)): void {\n    this.context.model.updateData(isFunction(data) ? data(this.getData()) : data);\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Update node data\n   * @param data - <zh/>  | <en/> node data\n   * @remarks\n   * <zh/> \n   *\n   * <en/> Just pass in the data that needs to be updated, no need to pass in the complete data\n   * @example\n   * ```ts\n   * graph.updateNodeData([{ id: 'node-1', style: { x: 100, y: 100 } }]);\n   * ```\n   * @apiCategory data\n   */\n  public updateNodeData(\n    data: PartialNodeLikeData<NodeData>[] | ((prev: NodeData[]) => PartialNodeLikeData<NodeData>[]),\n  ): void {\n    this.context.model.updateNodeData(isFunction(data) ? data(this.getNodeData()) : data);\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Update edge data\n   * @param data - <zh/>  | <en/> edge data\n   * @remarks\n   * <zh/> \n   *\n   * <en/> Just pass in the data that needs to be updated, no need to pass in the complete data\n   * @example\n   * ```ts\n   * graph.updateEdgeData([{ id: 'edge-1', style: { lineWidth: 2 } }]);\n   * ```\n   * @apiCategory data\n   */\n  public updateEdgeData(data: PartialEdgeData<EdgeData>[] | ((prev: EdgeData[]) => PartialEdgeData<EdgeData>[])): void {\n    this.context.model.updateEdgeData(isFunction(data) ? data(this.getEdgeData()) : data);\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Update combo data\n   * @param data - <zh/>  | <en/> combo data\n   * @remarks\n   * <zh/> \n   *\n   * <en/> Just pass in the data that needs to be updated, no need to pass in the complete data\n   * @example\n   * ```ts\n   * graph.updateComboData([{ id: 'combo-1', style: { x: 100, y: 100 } }]);\n   * ```\n   * @apiCategory data\n   */\n  public updateComboData(\n    data: PartialNodeLikeData<ComboData>[] | ((prev: ComboData[]) => PartialNodeLikeData<ComboData>[]),\n  ): void {\n    this.context.model.updateComboData(isFunction(data) ? data(this.getComboData()) : data);\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Remove element data\n   * @param ids - <zh/>  ID  | <en/> element ID array\n   * @example\n   * ```ts\n   * graph.removeData({\n   *   nodes: ['node-1', 'node-2'],\n   *   edges: ['edge-1'],\n   * });\n   * ```\n   * @apiCategory data\n   */\n  public removeData(ids: DataID | ((data: GraphData) => DataID)): void {\n    this.context.model.removeData(isFunction(ids) ? ids(this.getData()) : ids);\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Remove node data\n   * @param ids - <zh/>  ID  | <en/> node ID array\n   * @example\n   * ```ts\n   * graph.removeNodeData(['node-1', 'node-2']);\n   * ```\n   * @apiCategory data\n   */\n  public removeNodeData(ids: ID[] | ((data: NodeData[]) => ID[])): void {\n    this.context.model.removeNodeData(isFunction(ids) ? ids(this.getNodeData()) : ids);\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Remove edge data\n   * @param ids - <zh/>  ID  | <en/> edge ID array\n   * @remarks\n   * <zh/>  source  target `idOf`  ID\n   *\n   * <en/> If only the source and target are provided when passing in the edge data, you need to get the actual ID of the edge through the `idOf` method\n   * @example\n   * ```ts\n   * graph.removeEdgeData(['edge-1']);\n   * ```\n   * @apiCategory data\n   */\n  public removeEdgeData(ids: ID[] | ((data: EdgeData[]) => ID[])): void {\n    this.context.model.removeEdgeData(isFunction(ids) ? ids(this.getEdgeData()) : ids);\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Remove combo data\n   * @param ids - <zh/>  ID  | <en/>  ID array\n   * @example\n   * ```ts\n   * graph.removeComboData(['combo-1']);\n   * ```\n   * @apiCategory data\n   */\n  public removeComboData(ids: ID[] | ((data: ComboData[]) => ID[])): void {\n    this.context.model.removeComboData(isFunction(ids) ? ids(this.getComboData()) : ids);\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Get element type\n   * @param id - <zh/>  ID | <en/> element ID\n   * @returns <zh/>  | <en/> element type\n   * @apiCategory element\n   */\n  public getElementType(id: ID): ElementType {\n    return this.context.model.getElementType(id);\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Get edge data related to the node or combo\n   * @param id - <zh/> ID | <en/> node or combo ID\n   * @param direction - <zh/>  | <en/> edge direction\n   * @returns <zh/>  | <en/> edge data\n   * @apiCategory data\n   */\n  public getRelatedEdgesData(id: ID, direction: EdgeDirection = 'both'): EdgeData[] {\n    return this.context.model.getRelatedEdgesData(id, direction);\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Get the one-hop neighbor node data of the node or combo\n   * @param id - <zh/> ID | <en/> node or combo ID\n   * @returns <zh/>  | <en/> neighbor node data\n   * @apiCategory data\n   */\n  public getNeighborNodesData(id: ID): NodeData[] {\n    return this.context.model.getNeighborNodesData(id);\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Get the ancestor element data of the node or combo\n   * @param id - <zh/> ID | <en/> node or combo ID\n   * @param hierarchy - <zh/>  | <en/> specify tree or combo hierarchy relationship\n   * @returns <zh/>  | <en/> ancestor element data\n   * @remarks\n   * <zh/> \n   *\n   * <en/> The order in the array is from the parent node to the ancestor node\n   * @apiCategory data\n   */\n  public getAncestorsData(id: ID, hierarchy: HierarchyKey): NodeLikeData[] {\n    return this.context.model.getAncestorsData(id, hierarchy);\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Get the parent element data of the node or combo\n   * @param id - <zh/> ID | <en/> node or combo ID\n   * @param hierarchy - <zh/>  | <en/> specify tree or combo hierarchy relationship\n   * @returns <zh/>  | <en/> parent element data\n   * @apiCategory data\n   */\n  public getParentData(id: ID, hierarchy: HierarchyKey): NodeLikeData | undefined {\n    return this.context.model.getParentData(id, hierarchy);\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Get the child element data of the node or combo\n   * @param id - <zh/> ID | <en/> node or combo ID\n   * @returns <zh/>  | <en/> child element data\n   * @apiCategory data\n   */\n  public getChildrenData(id: ID): NodeLikeData[] {\n    return this.context.model.getChildrenData(id);\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Get the descendant element data of the node or combo\n   * @param id - <zh/> ID | <en/> node or combo ID\n   * @returns <zh/>  | <en/> descendant element data\n   * @apiCategory data\n   */\n  public getDescendantsData(id: ID): NodeLikeData[] {\n    return this.context.model.getDescendantsData(id);\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Get node data in a specific state\n   * @param state - <zh/>  | <en/> state\n   * @returns <zh/>  | <en/> node data\n   * @example\n   * ```ts\n   * const nodes = graph.getElementDataByState('node', 'selected');\n   * ```\n   * @apiCategory data\n   */\n  public getElementDataByState(elementType: 'node', state: State): NodeData[];\n  /**\n   * <zh/> \n   *\n   * <en/> Get edge data in a specific state\n   * @param state - <zh/>  | <en/> state\n   * @returns <zh/>  | <en/> edge data\n   * @example\n   * ```ts\n   * const nodes = graph.getElementDataByState('edge', 'selected');\n   * ```\n   * @apiCategory data\n   */\n  public getElementDataByState(elementType: 'edge', state: State): EdgeData[];\n  /**\n   * <zh/> \n   *\n   * <en/> Get combo data in a specific state\n   * @param state - <zh/>  | <en/> state\n   * @returns <zh/>  | <en/> combo data\n   * @example\n   * ```ts\n   * const nodes = graph.getElementDataByState('node', 'selected');\n   * ```\n   * @apiCategory data\n   */\n  public getElementDataByState(elementType: 'combo', state: State): ComboData[];\n  public getElementDataByState(elementType: ElementType, state: State): ElementDatum[] {\n    return this.context.model.getElementDataByState(elementType, state);\n  }\n\n  private async initCanvas() {\n    if (this.context.canvas) return await this.context.canvas.ready;\n\n    const {\n      container = 'container',\n      width,\n      height,\n      renderer,\n      cursor,\n      background,\n      canvas: canvasOptions,\n      devicePixelRatio = globalThis.devicePixelRatio ?? 1,\n    } = this.options;\n    if (container instanceof Canvas) {\n      this.context.canvas = container;\n      if (cursor) container.setCursor(cursor);\n      if (renderer) container.setRenderer(renderer);\n      await container.ready;\n    } else {\n      const $container = isString(container) ? document.getElementById(container!) : container;\n      const containerSize = sizeOf($container!);\n\n      this.emit(GraphEvent.BEFORE_CANVAS_INIT, { container: $container, width, height });\n      const options = {\n        ...canvasOptions,\n        container: $container!,\n        width: width || containerSize[0],\n        height: height || containerSize[1],\n        background,\n        renderer,\n        cursor,\n        devicePixelRatio,\n      };\n\n      const canvas = new Canvas(options);\n\n      this.context.canvas = canvas;\n      await canvas.ready;\n      this.emit(GraphEvent.AFTER_CANVAS_INIT, { canvas });\n    }\n  }\n\n  private updateCanvas(options: GraphOptions) {\n    const { renderer, cursor, height, width } = options;\n    const canvas = this.context.canvas;\n    if (!canvas) return;\n\n    if (renderer) {\n      this.emit(GraphEvent.BEFORE_RENDERER_CHANGE, { renderer: this.options.renderer });\n      canvas.setRenderer(renderer);\n      this.emit(GraphEvent.AFTER_RENDERER_CHANGE, { renderer });\n    }\n\n    if (cursor) canvas.setCursor(cursor);\n\n    if (isNumber(width) || isNumber(height))\n      this.setSize(width ?? this.options.width ?? 0, height ?? this.options.height ?? 0);\n  }\n\n  private initRuntime() {\n    this.context.options = this.options;\n    if (!this.context.batch) this.context.batch = new BatchController(this.context);\n    if (!this.context.plugin) this.context.plugin = new PluginController(this.context);\n    if (!this.context.viewport) this.context.viewport = new ViewportController(this.context);\n    if (!this.context.transform) this.context.transform = new TransformController(this.context);\n    if (!this.context.element) this.context.element = new ElementController(this.context);\n    if (!this.context.animation) this.context.animation = new Animation(this.context);\n    if (!this.context.layout) this.context.layout = new LayoutController(this.context);\n    if (!this.context.behavior) this.context.behavior = new BehaviorController(this.context);\n  }\n\n  private async prepare(): Promise<void> {\n    //  render  destroy \n    // Wait for synchronous tasks to complete, to avoid problems caused by calling destroy immediately after render\n    await Promise.resolve();\n\n    if (this.destroyed) {\n      // \n      // If the graph instance has been destroyed, no further operations will be performed\n      // eslint-disable-next-line no-console\n      console.error(format('The graph instance has been destroyed'));\n      return;\n    }\n\n    await this.initCanvas();\n    this.initRuntime();\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Render\n   * @remarks\n   * <zh/> \n   *\n   * >  render  render  `await graph.render()`  GraphEvent.AFTER_RENDER \n   *\n   * <en/> This process will execute data update, element rendering, and layout execution\n   *\n   * >  render is an asynchronous method. If you need to perform some operations after render, you can use `await graph.render()` or listen to the GraphEvent.AFTER_RENDER event\n   * @apiCategory render\n   */\n  public async render(): Promise<void> {\n    await this.prepare();\n    emit(this, new GraphLifeCycleEvent(GraphEvent.BEFORE_RENDER));\n\n    if (!this.options.layout) {\n      const animation = this.context.element!.draw({ type: 'render' });\n      await Promise.all([animation?.finished, this.autoFit()]);\n    } else if (!this.rendered && isPreLayout(this.options.layout)) {\n      const animation = await this.context.element!.preLayoutDraw({ type: 'render' });\n      await Promise.all([animation?.finished, this.autoFit()]);\n    } else {\n      const animation = this.context.element!.draw({ type: 'render' });\n      await Promise.all([animation?.finished, this.context.layout!.postLayout()]);\n      await this.autoFit();\n    }\n\n    this.rendered = true;\n    emit(this, new GraphLifeCycleEvent(GraphEvent.AFTER_RENDER));\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Draw elements\n   * @returns <zh/>  | <en/> draw result\n   * @remarks\n   * <zh/> \n   *\n   * <zh/>  draw  draw  `await graph.draw()`  GraphEvent.AFTER_DRAW \n   *\n   * <en/> Only execute element drawing, no re-layout\n   *\n   * <en/>  draw is an asynchronous method. If you need to perform some operations after draw, you can use `await graph.draw()` or listen to the GraphEvent.AFTER_DRAW event\n   * @apiCategory render\n   */\n  public async draw(): Promise<void> {\n    await this.prepare();\n    await this.context.element!.draw()?.finished;\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Execute layout\n   * @param layoutOptions - <zh/>  | <en/> Layout options\n   * @apiCategory layout\n   */\n  public async layout(layoutOptions?: LayoutOptions) {\n    await this.context.layout!.postLayout(layoutOptions);\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Stop layout\n   * @remarks\n   * <zh/>  `force` /\n   *\n   * <en/> Suitable for layouts with iterative animations. Currently, `force` belongs to this type of layout, that is, stop the iteration of the force-directed layout. It is generally used to manually stop the iteration animation when the layout iteration time is too long, such as calling in the click canvas/node listener\n   * @apiCategory layout\n   */\n  public stopLayout() {\n    this.context.layout!.stopLayout();\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Clear canvas elements\n   * @apiCategory canvas\n   */\n  public async clear(): Promise<void> {\n    const { model, element } = this.context;\n    model.setData({});\n    model.clearChanges();\n    element?.clear();\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Destroy the current graph instance\n   * @remarks\n   * <zh/> \n   *\n   * <en/> After destruction, no operations can be performed. If you need to reuse it, you need to create a new graph instance\n   * @apiCategory instance\n   */\n  public destroy(): void {\n    emit(this, new GraphLifeCycleEvent(GraphEvent.BEFORE_DESTROY));\n\n    const { layout, animation, element, model, canvas, behavior, plugin } = this.context;\n    plugin?.destroy();\n    behavior?.destroy();\n    layout?.destroy();\n    animation?.destroy();\n    element?.destroy();\n    model.destroy();\n    canvas?.destroy();\n    this.options = {};\n    // @ts-expect-error force delete\n    this.context = {};\n\n    this.off();\n    globalThis.removeEventListener?.('resize', this.onResize);\n\n    this.destroyed = true;\n\n    emit(this, new GraphLifeCycleEvent(GraphEvent.AFTER_DESTROY));\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Get canvas instance\n   * @returns - <zh/>  | <en/> canvas instance\n   * @apiCategory canvas\n   */\n  public getCanvas(): Canvas {\n    return this.context.canvas;\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Resize the canvas to the size of the graph container\n   * @apiCategory viewport\n   */\n  public resize(): void;\n  /**\n   * <zh/> \n   *\n   * <en/> Resize the canvas to the specified width and height\n   * @param width - <zh/>  | <en/> width\n   * @param height - <zh/>  | <en/> height\n   * @apiCategory viewport\n   */\n  public resize(width: number, height: number): void;\n  public resize(width?: number, height?: number): void {\n    const containerSize = sizeOf(this.context.canvas?.getContainer());\n    const specificSize: Vector2 = [width || containerSize[0], height || containerSize[1]];\n\n    if (!this.context.canvas) return;\n\n    const canvasSize = this.context.canvas!.getSize();\n    if (isEqual(specificSize, canvasSize)) return;\n\n    emit(this, new GraphLifeCycleEvent(GraphEvent.BEFORE_SIZE_CHANGE, { size: specificSize }));\n    this.context.canvas.resize(...specificSize);\n    emit(this, new GraphLifeCycleEvent(GraphEvent.AFTER_SIZE_CHANGE, { size: specificSize }));\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Zoom the graph to fit the viewport and move it to the center of the viewport\n   * @param options - <zh/>  | <en/> fit options\n   * @param animation - <zh/>  | <en/> animation options\n   * @apiCategory viewport\n   */\n  public async fitView(options?: FitViewOptions, animation?: ViewportAnimationEffectTiming): Promise<void> {\n    await this.context.viewport?.fitView(options, animation);\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Move the graph to the center of the viewport\n   * @param animation - <zh/>  | <en/> animation options\n   * @apiCategory viewport\n   */\n  public async fitCenter(animation?: ViewportAnimationEffectTiming): Promise<void> {\n    await this.context.viewport?.fitCenter({ animation });\n  }\n\n  private async autoFit(): Promise<void> {\n    const { autoFit } = this.context.options;\n    if (!autoFit) return;\n\n    if (isString(autoFit)) {\n      if (autoFit === 'view') await this.fitView();\n      else if (autoFit === 'center') await this.fitCenter();\n    } else {\n      const { type, animation } = autoFit;\n      if (type === 'view') await this.fitView(autoFit.options, animation);\n      else if (type === 'center') await this.fitCenter(animation);\n    }\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Focus on element\n   * @param id - <zh/>  ID | <en/> element ID\n   * @param animation - <zh/>  | <en/> animation options\n   * @remarks\n   * <zh/> \n   *\n   * <en/> Move the graph so that the element is aligned to the center of the viewport\n   * @apiCategory viewport\n   */\n  public async focusElement(id: ID | ID[], animation?: ViewportAnimationEffectTiming): Promise<void> {\n    await this.context.viewport?.focusElements(Array.isArray(id) ? id : [id], { animation });\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Zoom based on the current zoom ratio (relative zoom)\n   * @param ratio - <zh/>  | <en/> zoom ratio\n   * @param animation - <zh/>  | <en/> animation options\n   * @param origin - <zh/> () | <en/> zoom center(viewport coordinates)\n   * @remarks\n   * <zh/>\n   * - ratio > 1 \n   * - ratio < 1 \n   *\n   * <en/>\n   * - ratio > 1 zoom in\n   * - ratio < 1 zoom out\n   * @apiCategory viewport\n   */\n  public async zoomBy(ratio: number, animation?: ViewportAnimationEffectTiming, origin?: Point): Promise<void> {\n    await this.context.viewport!.transform({ mode: 'relative', scale: ratio, origin }, animation);\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Zoom the canvas to the specified ratio (absolute zoom)\n   * @param zoom - <zh/>  | <en/> specified zoom ratio\n   * @param animation - <zh/>  | <en/> animation options\n   * @param origin - <zh/> () | <en/> zoom center(viewport coordinates)\n   * @remarks\n   * <zh/>\n   * - zoom = 1 \n   * - zoom > 1 \n   * - zoom < 1 \n   *\n   * <en/>\n   * - zoom = 1 default size\n   * - zoom > 1 zoom in\n   * - zoom < 1 zoom out\n   * @apiCategory viewport\n   */\n  public async zoomTo(zoom: number, animation?: ViewportAnimationEffectTiming, origin?: Point): Promise<void> {\n    await this.context.viewport!.transform({ mode: 'absolute', scale: zoom, origin }, animation);\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Get the current zoom ratio\n   * @returns <zh/>  | <en/> zoom ratio\n   * @apiCategory viewport\n   */\n  public getZoom(): number {\n    return this.context.viewport!.getZoom();\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Rotate based on the current rotation angle (relative rotation)\n   * @param angle - <zh/>  | <en/> rotation angle\n   * @param animation - <zh/>  | <en/> animation options\n   * @param origin - <zh/> () | <en/> rotation center(viewport coordinates)\n   * @apiCategory viewport\n   */\n  public async rotateBy(angle: number, animation?: ViewportAnimationEffectTiming, origin?: Point): Promise<void> {\n    await this.context.viewport!.transform({ mode: 'relative', rotate: angle, origin }, animation);\n  }\n\n  /**\n   * <zh/>  ()\n   *\n   * <en/> Rotate the canvas to the specified angle (absolute rotation)\n   * @param angle - <zh/>  | <en/> target angle\n   * @param animation - <zh/>  | <en/> animation options\n   * @param origin - <zh/> () | <en/> rotation center(viewport coordinates)\n   * @apiCategory viewport\n   */\n  public async rotateTo(angle: number, animation?: ViewportAnimationEffectTiming, origin?: Point): Promise<void> {\n    await this.context.viewport!.transform({ mode: 'absolute', rotate: angle, origin }, animation);\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Get the current rotation angle\n   * @returns <zh/>  | <en/> rotation angle\n   * @apiCategory viewport\n   */\n  public getRotation(): number {\n    return this.context.viewport!.getRotation();\n  }\n\n  /**\n   * <zh/>  ()\n   *\n   * <en/> Translate the graph by the specified distance (relative translation)\n   * @param offset - <zh/>  | <en/> offset\n   * @param animation - <zh/>  | <en/> animation options\n   * @apiCategory viewport\n   */\n  public async translateBy(offset: Point, animation?: ViewportAnimationEffectTiming): Promise<void> {\n    await this.context.viewport!.transform({ mode: 'relative', translate: offset }, animation);\n  }\n\n  /**\n   * <zh/>  ()\n   *\n   * <en/> Translate the graph to the specified position (absolute translation)\n   * @param position - <zh/>  | <en/> specified position\n   * @param animation - <zh/>  | <en/> animation options\n   * @apiCategory viewport\n   */\n  public async translateTo(position: Point, animation?: ViewportAnimationEffectTiming): Promise<void> {\n    await this.context.viewport!.transform({ mode: 'absolute', translate: position }, animation);\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Get the position of the graph\n   * @returns <zh/>  | <en/> position of the graph\n   * @remarks\n   * <zh/>  [0, 0]\n   *\n   * <en/> That is, the position of the canvas origin in the viewport coordinate system. By default, the position of the graph is [0, 0]\n   * @apiCategory viewport\n   */\n  public getPosition(): Point {\n    return subtract([0, 0], this.getCanvasByViewport([0, 0]));\n  }\n\n  /**\n   * <zh/>  ()\n   *\n   * <en/> Translate the element by the specified distance (relative translation)\n   * @param id - <zh/>  ID | <en/> element ID\n   * @param offset - <zh/>  | <en/> offset\n   * @param animation - <zh/>  | <en/> whether to enable animation\n   * @apiCategory element\n   */\n  public async translateElementBy(id: ID, offset: Point, animation?: boolean): Promise<void>;\n  /**\n   * <zh/>  ()\n   *\n   * <en/> Batch translate elements by the specified distance (relative translation)\n   * @param offsets - <zh/>  | <en/> offset options\n   * @param animation - <zh/>  | <en/> whether to enable animation\n   * @apiCategory element\n   */\n  public async translateElementBy(offsets: Record<ID, Point>, animation?: boolean): Promise<void>;\n  public async translateElementBy(\n    args1: ID | Record<ID, Point>,\n    args2?: Point | boolean,\n    args3: boolean = true,\n  ): Promise<void> {\n    const [config, animation] = isObject(args1)\n      ? [args1, (args2 as boolean) ?? true]\n      : [{ [args1 as ID]: args2 as Point }, args3];\n\n    Object.entries(config).forEach(([id, offset]) => this.context.model.translateNodeLikeBy(id, offset));\n    await this.context.element!.draw({ animation, stage: 'translate' })?.finished;\n  }\n\n  /**\n   * <zh/>  ()\n   *\n   * <en/> Translate the element to the specified position (absolute translation)\n   * @param id - <zh/>  ID | <en/> element ID\n   * @param position - <zh/>  | <en/> specified position\n   * @param animation - <zh/>  | <en/> whether to enable animation\n   * @apiCategory element\n   */\n  public async translateElementTo(id: ID, position: Point, animation?: boolean): Promise<void>;\n  /**\n   * <zh/>  ()\n   *\n   * <en/> Batch translate elements to the specified position (absolute translation)\n   * @param positions - <zh/>  | <en/> position options\n   * @param animation - <zh/>  | <en/> whether to enable animation\n   * @apiCategory element\n   */\n  public async translateElementTo(positions: Record<ID, Point>, animation?: boolean): Promise<void>;\n  public async translateElementTo(\n    args1: ID | Record<ID, Point>,\n    args2?: boolean | Point,\n    args3: boolean = true,\n  ): Promise<void> {\n    const [config, animation] = isObject(args1)\n      ? [args1, (args2 as boolean) ?? true]\n      : [{ [args1 as ID]: args2 as Point }, args3];\n\n    Object.entries(config).forEach(([id, position]) => this.context.model.translateNodeLikeTo(id, position));\n    await this.context.element!.draw({ animation, stage: 'translate' })?.finished;\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Get element position\n   * @param id - <zh/>  ID | <en/> element ID\n   * @returns <zh/>  | <en/> element position\n   * @apiCategory element\n   */\n  public getElementPosition(id: ID): Point {\n    return this.context.model.getElementPosition(id);\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Get element rendering style\n   * @param id - <zh/>  ID | <en/> element ID\n   * @returns <zh/>  | <en/> element rendering style\n   * @apiCategory element\n   */\n  public getElementRenderStyle(id: ID): Record<string, any> {\n    return omit(this.context.element!.getElement(id)!.attributes, ['context']);\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Set element visibility\n   * @param id - <zh/>  ID | <en/> element ID\n   * @param visibility - <zh/>  | <en/> visibility\n   * @param animation - <zh/>  | <en/> animation options\n   * @remarks\n   * <zh/>  `visible`  `hidden` \n   *\n   * <en/> Visibility configuration includes two states: `visible` and `hidden`\n   * @apiCategory element\n   */\n  public async setElementVisibility(\n    id: ID,\n    visibility: BaseStyleProps['visibility'],\n    animation?: boolean,\n  ): Promise<void>;\n  /**\n   * <zh/> \n   *\n   * <en/> Batch set element visibility\n   * @param visibility - <zh/>  | <en/> visibility options\n   * @param animation - <zh/>  | <en/> animation options\n   * @apiCategory element\n   */\n  public async setElementVisibility(\n    visibility: Record<ID, BaseStyleProps['visibility']>,\n    animation?: boolean,\n  ): Promise<void>;\n  public async setElementVisibility(\n    args1: ID | Record<ID, BaseStyleProps['visibility']>,\n    args2?: boolean | BaseStyleProps['visibility'],\n    args3: boolean = true,\n  ): Promise<void> {\n    const [config, animation] = isObject(args1)\n      ? [args1, (args2 as boolean) ?? true]\n      : [{ [args1]: args2 as BaseStyleProps['visibility'] }, args3];\n\n    const dataToUpdate: Required<PartialGraphData> = { nodes: [], edges: [], combos: [] };\n    Object.entries(config).forEach(([id, value]) => {\n      const elementType = this.getElementType(id);\n      dataToUpdate[`${elementType}s`].push({ id, style: { visibility: value } });\n    });\n\n    const { model, element } = this.context;\n    model.preventUpdateNodeLikeHierarchy(() => {\n      model.updateData(dataToUpdate);\n    });\n    await element!.draw({ animation, stage: 'visibility' })?.finished;\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Show element\n   * @param id - <zh/>  ID | <en/> element ID\n   * @param animation - <zh/>  | <en/> whether to enable animation\n   * @apiCategory element\n   */\n  public async showElement(id: ID | ID[], animation?: boolean): Promise<void> {\n    const ids = Array.isArray(id) ? id : [id];\n    await this.setElementVisibility(\n      Object.fromEntries(ids.map((_id) => [_id, 'visible'] as [ID, BaseStyleProps['visibility']])),\n      animation,\n    );\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Hide element\n   * @param id - <zh/>  ID | <en/> element ID\n   * @param animation - <zh/>  | <en/> whether to enable animation\n   * @apiCategory element\n   */\n  public async hideElement(id: ID | ID[], animation?: boolean): Promise<void> {\n    const ids = Array.isArray(id) ? id : [id];\n    await this.setElementVisibility(\n      Object.fromEntries(ids.map((_id) => [_id, 'hidden'] as [ID, BaseStyleProps['visibility']])),\n      animation,\n    );\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Get element visibility\n   * @param id - <zh/>  ID | <en/> element ID\n   * @returns <zh/>  | <en/> element visibility\n   * @apiCategory element\n   */\n  public getElementVisibility(id: ID): BaseStyleProps['visibility'] {\n    const element = this.context.element!.getElement(id)!;\n    return element?.style?.visibility ?? 'visible';\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Set element z-index\n   * @param id - <zh/>  ID | <en/> element ID\n   * @param zIndex - <zh/>  | <en/> z-index\n   * @apiCategory element\n   */\n  public async setElementZIndex(id: ID, zIndex: number): Promise<void>;\n  /**\n   * <zh/> \n   *\n   * <en/> Batch set element z-index\n   * @param zIndex - <zh/>  | <en/> z-index options\n   * @apiCategory element\n   */\n  public async setElementZIndex(zIndex: Record<ID, number>): Promise<void>;\n  public async setElementZIndex(args1: ID | Record<ID, number>, args2?: number): Promise<void> {\n    const dataToUpdate: Required<PartialGraphData> = { nodes: [], edges: [], combos: [] };\n    const config = isObject(args1) ? args1 : { [args1 as ID]: args2 as number };\n\n    Object.entries(config).forEach(([id, value]) => {\n      const elementType = this.getElementType(id);\n      dataToUpdate[`${elementType}s`].push({ id, style: { zIndex: value } });\n    });\n\n    const { model, element } = this.context;\n    model.preventUpdateNodeLikeHierarchy(() => model.updateData(dataToUpdate));\n    await element!.draw({ animation: false, stage: 'zIndex' })?.finished;\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Bring the element to the front\n   * @param id - <zh/>  ID | <en/> element ID\n   * @apiCategory element\n   */\n  public async frontElement(id: ID | ID[]): Promise<void> {\n    const ids = Array.isArray(id) ? id : [id];\n    const { model } = this.context;\n    const zIndexes: Record<ID, number> = {};\n\n    ids.map((_id) => {\n      const zIndex = model.getFrontZIndex(_id);\n      const elementType = model.getElementType(_id);\n      if (elementType === 'combo') {\n        const ancestor = model.getAncestorsData(_id, COMBO_KEY).at(-1) || this.getComboData(_id);\n        const descendants = [ancestor, ...model.getDescendantsData(idOf(ancestor))];\n        const delta = zIndex - getZIndexOf(ancestor);\n        descendants.forEach((combo) => {\n          zIndexes[idOf(combo)] = this.getElementZIndex(idOf(combo)) + delta;\n        });\n\n        const { internal } = getSubgraphRelatedEdges(descendants.map(idOf), (id) => model.getRelatedEdgesData(id));\n        internal.forEach((edge) => {\n          const edgeId = idOf(edge);\n          zIndexes[edgeId] = this.getElementZIndex(edgeId) + delta;\n        });\n      } else zIndexes[_id] = zIndex;\n    });\n\n    await this.setElementZIndex(zIndexes);\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Get element z-index\n   * @param id - <zh/>  ID | <en/> element ID\n   * @returns <zh/>  | <en/> element z-index\n   * @apiCategory element\n   */\n  public getElementZIndex(id: ID): number {\n    return getZIndexOf(this.context.model.getElementDataById(id));\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Set element state\n   * @param id - <zh/>  ID | <en/> element ID\n   * @param state - <zh/>  | <en/> state\n   * @param animation - <zh/>  | <en/> animation options\n   * @apiCategory element\n   */\n  public async setElementState(id: ID, state: State | State[], animation?: boolean): Promise<void>;\n  /**\n   * <zh/> \n   *\n   * <en/> Batch set element state\n   * @param state - <zh/>  | <en/> state options\n   * @param animation - <zh/>  | <en/> animation options\n   * @apiCategory element\n   */\n  public async setElementState(state: Record<ID, State | State[]>, animation?: boolean): Promise<void>;\n  public async setElementState(\n    args1: ID | Record<ID, State | State[]>,\n    args2?: boolean | State | State[],\n    args3: boolean = true,\n  ): Promise<void> {\n    const [config, animation] = isObject(args1)\n      ? [args1, (args2 as boolean) ?? true]\n      : [{ [args1]: args2 as State | State[] }, args3];\n\n    const parseState = (state: State | State[]) => {\n      if (!state) return [];\n      return Array.isArray(state) ? state : [state];\n    };\n\n    const dataToUpdate: Required<PartialGraphData> = { nodes: [], edges: [], combos: [] };\n    Object.entries(config).forEach(([id, value]) => {\n      const elementType = this.getElementType(id);\n      dataToUpdate[`${elementType}s`].push({ id, states: parseState(value) });\n    });\n    this.updateData(dataToUpdate);\n\n    await this.context.element!.draw({ animation, stage: 'state' })?.finished;\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Get element state\n   * @param id - <zh/>  ID | <en/> element ID\n   * @returns <zh/>  | <en/> element state\n   * @apiCategory element\n   */\n  public getElementState(id: ID): State[] {\n    return this.context.model.getElementState(id);\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Get the rendering bounding box of the element itself and its child nodes in the world coordinate system\n   * @param id - <zh/>  ID | <en/> element ID\n   * @returns <zh/>  | <en/> render bounding box\n   * @apiCategory element\n   */\n  public getElementRenderBounds(id: ID): AABB {\n    return this.context.element!.getElement(id)!.getRenderBounds();\n  }\n\n  private isCollapsingExpanding = false;\n\n  /**\n   * <zh/> \n   *\n   * <en/> Collapse element\n   * @param id - <zh/>  ID | <en/> element ID\n   * @param options - <zh/>  | <en/> whether to enable animation or the options of collapsing node\n   * @apiCategory element\n   */\n  public async collapseElement(id: ID, options: boolean | CollapseExpandNodeOptions = true): Promise<void> {\n    const { model, element } = this.context;\n    if (isCollapsed(model.getNodeLikeData([id])[0])) return;\n    if (this.isCollapsingExpanding) return;\n\n    if (typeof options === 'boolean') options = { animation: options, align: false };\n\n    const elementType = model.getElementType(id);\n\n    await this.frontElement(id);\n    this.isCollapsingExpanding = true;\n\n    //  / Update collapse style\n    model.updateData(\n      elementType === 'node'\n        ? {\n            nodes: [{ id, style: { collapsed: true } }],\n          }\n        : {\n            combos: [{ id, style: { collapsed: true } }],\n          },\n    );\n\n    if (elementType === 'node') await element!.collapseNode(id, options);\n    else if (elementType === 'combo') await element!.collapseCombo(id, !!options.animation);\n\n    this.isCollapsingExpanding = false;\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Expand Element\n   * @param id - <zh/>  ID | <en/> element ID\n   * @param animation - <zh/>  | <en/> whether to enable animation or the options of collapsing node\n   * @param options\n   * @apiCategory element\n   */\n  public async expandElement(id: ID, options: boolean | CollapseExpandNodeOptions = true): Promise<void> {\n    const { model, element } = this.context;\n    if (!isCollapsed(model.getNodeLikeData([id])[0])) return;\n    if (this.isCollapsingExpanding) return;\n\n    if (typeof options === 'boolean') options = { animation: options, align: false };\n\n    const elementType = model.getElementType(id);\n\n    this.isCollapsingExpanding = true;\n\n    //  / Update collapse style\n    model.updateData(\n      elementType === 'node'\n        ? {\n            nodes: [{ id, style: { collapsed: false } }],\n          }\n        : {\n            combos: [{ id, style: { collapsed: false } }],\n          },\n    );\n\n    if (elementType === 'node') await element!.expandNode(id, options);\n    else if (elementType === 'combo') await element!.expandCombo(id, !!options.animation);\n\n    this.isCollapsingExpanding = false;\n  }\n\n  private setElementCollapsibility(id: ID, collapsed: boolean) {\n    const elementType = this.getElementType(id);\n    if (elementType === 'node') this.updateNodeData([{ id, style: { collapsed } }]);\n    else if (elementType === 'combo') this.updateComboData([{ id, style: { collapsed } }]);\n  }\n\n  /**\n   * <zh/>  DataURL\n   *\n   * <en/> Export canvas content as DataURL\n   * @param options - <zh/>  | <en/> export options\n   * @returns <zh/> DataURL | <en/> DataURL\n   * @apiCategory exportImage\n   */\n  public async toDataURL(options: Partial<DataURLOptions> = {}): Promise<string> {\n    return this.context.canvas!.toDataURL(options);\n  }\n\n  /**\n   * <zh/>  DOM \n   *\n   * <en/> Convert the given viewport DOM coordinates to the drawing coordinates on the canvas\n   * @param point - <zh/>  | <en/> viewport coordinates\n   * @returns <zh/>  | <en/> drawing coordinates on the canvas\n   * @apiCategory viewport\n   */\n  public getCanvasByViewport(point: Point): Point {\n    return this.context.canvas.getCanvasByViewport(point);\n  }\n\n  /**\n   * <zh/>  DOM \n   *\n   * <en/> Convert the given drawing coordinates on the canvas to the coordinates of the viewport DOM\n   * @param point - <zh/>  | <en/> canvas coordinates\n   * @returns <zh/>  DOM  | <en/> coordinates of the viewport DOM\n   * @apiCategory viewport\n   */\n  public getViewportByCanvas(point: Point): Point {\n    return this.context.canvas.getViewportByCanvas(point);\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Convert the given drawing coordinates on the canvas to browser coordinates\n   * @param point - <zh/>  | <en/> canvas coordinates\n   * @returns <zh/>  | <en/> browser coordinates\n   * @apiCategory viewport\n   */\n  public getClientByCanvas(point: Point): Point {\n    return this.context.canvas.getClientByCanvas(point);\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Convert the given browser coordinates to drawing coordinates on the canvas\n   * @param point - <zh/>  | <en/> browser coordinates\n   * @returns <zh/>  | <en/> drawing coordinates on the canvas\n   * @apiCategory viewport\n   */\n  public getCanvasByClient(point: Point): Point {\n    return this.context.canvas.getCanvasByClient(point);\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Get the canvas coordinates of the viewport center\n   * @returns <zh/>  | <en/> Canvas coordinates of the viewport center\n   * @apiCategory viewport\n   */\n  public getViewportCenter(): Point {\n    return this.context.viewport!.getViewportCenter();\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Get the viewport coordinates of the viewport center\n   * @returns <zh/>  | <en/> Viewport coordinates of the viewport center\n   * @apiCategory viewport\n   */\n  public getCanvasCenter(): Point {\n    return this.context.viewport!.getCanvasCenter();\n  }\n\n  private onResize = debounce(() => {\n    this.resize();\n  }, 300);\n\n  /**\n   * <zh/> \n   *\n   * <en/> Listen to events\n   * @param eventName - <zh/>  | <en/> event name\n   * @param callback - <zh/>  | <en/> callback function\n   * @param once - <zh/>  | <en/> whether to listen only once\n   * @returns <zh/> Graph  | <en/> Graph instance\n   * @apiCategory event\n   */\n  public on<T extends IEvent = IEvent>(eventName: string, callback: (event: T) => void, once?: boolean): this {\n    return super.on(eventName, callback, once);\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Listen to events once\n   * @param eventName - <zh/>  | <en/> event name\n   * @param callback - <zh/>  | <en/> callback function\n   * @returns <zh/> Graph  | <en/> Graph instance\n   * @apiCategory event\n   */\n  public once<T extends IEvent = IEvent>(eventName: string, callback: (event: T) => void): this {\n    return super.once(eventName, callback);\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Remove all event listeners\n   * @returns <zh/> Graph  | <en/> Graph instance\n   * @apiCategory event\n   */\n  public off(): this;\n  /**\n   * <zh/> \n   *\n   * <en/> Remove all listeners for the specified event\n   * @param eventName - <zh/>  | <en/> event name\n   * @returns <zh/> Graph  | <en/> Graph instance\n   * @apiCategory event\n   */\n  public off(eventName: string): this;\n  /**\n   * <zh/> \n   *\n   * <en/> Remove event listener\n   * @param eventName - <zh/>  | <en/> event name\n   * @param callback - <zh/>  | <en/> callback function\n   * @returns <zh/> Graph  | <en/> Graph instance\n   * @apiCategory event\n   */\n  public off(eventName: string, callback: (...args: any[]) => void): this;\n  public off(eventName?: string, callback?: (...args: any[]) => void) {\n    return super.off(eventName, callback);\n  }\n}\n", "import type { EdgeData, GraphData, NodeData } from '../spec';\nimport type { TreeData } from '../types';\nimport { dfs } from './traverse';\n\ntype TreeDataGetter = {\n  getNodeData?: (datum: TreeData, depth: number) => NodeData;\n  getEdgeData?: (source: TreeData, target: TreeData) => EdgeData;\n  getChildren?: (datum: TreeData) => TreeData[];\n};\n\n/**\n * <zh/> \n *\n * <en/> Convert tree data to graph data\n * @param treeData - <zh/>  | <en/> Tree data\n * @param getter - <zh/>  | <en/> Methods to get nodes and edges\n * @returns <zh/>  | <en/> Graph data\n */\nexport function treeToGraphData(treeData: TreeData, getter?: TreeDataGetter): GraphData {\n  const {\n    getNodeData = (datum: TreeData, depth: number) => {\n      datum.depth = depth;\n      if (!datum.children) return datum as NodeData;\n      const { children, ...restDatum } = datum;\n      return { ...restDatum, children: children.map((child) => child.id) } as NodeData;\n    },\n    getEdgeData = (source: TreeData, target: TreeData) => ({ source: source.id, target: target.id }),\n    getChildren = (datum: TreeData) => datum.children || [],\n  } = getter || {};\n\n  const nodes: NodeData[] = [];\n  const edges: EdgeData[] = [];\n\n  dfs(\n    treeData,\n    (node, depth) => {\n      nodes.push(getNodeData(node, depth));\n      const children = getChildren(node);\n      for (const child of children) {\n        edges.push(getEdgeData(node, child));\n      }\n    },\n    (node) => getChildren(node),\n    'TB',\n  );\n\n  return { nodes, edges };\n}\n", "import { COMBO_KEY } from '../constants';\nimport { idOf } from '../exports';\nimport { DataController } from '../runtime/data';\nimport type { EdgeData } from '../spec';\nimport type { NodeLikeData } from '../types';\nimport { findActualConnectNodeData } from '../utils/edge';\nimport { BaseTransform } from './base-transform';\nimport type { DrawData } from './types';\n/**\n * <zh/> \n *\n * <en/> Get the actual endpoints of the edge\n */\nexport class GetEdgeActualEnds extends BaseTransform {\n  public beforeDraw(input: DrawData): DrawData {\n    const { add, update } = input;\n    const { model } = this.context;\n    [...add.edges.entries(), ...update.edges.entries()].forEach(([, edge]) => {\n      getEdgeEndsContext(model, edge);\n    });\n    return input;\n  }\n}\n\nexport const getEdgeEndsContext = (model: DataController, edge: EdgeData) => {\n  const { source, target } = edge;\n\n  const sourceNodeData = model.getElementDataById(source) as NodeLikeData;\n  const targetNodeData = model.getElementDataById(target) as NodeLikeData;\n\n  const actualSourceNode = findActualConnectNodeData(sourceNodeData, (id) => model.getParentData(id, COMBO_KEY));\n\n  const actualTargetNode = findActualConnectNodeData(targetNodeData, (id) => model.getParentData(id, COMBO_KEY));\n\n  const sourceNode = idOf(actualSourceNode);\n  const targetNode = idOf(actualTargetNode);\n\n  const ends = { sourceNode, targetNode };\n\n  if (edge.style) {\n    Object.assign(edge.style, ends);\n  } else edge.style = ends;\n\n  return edge;\n};\n", "/**\n * <zh/> \n *\n * <en/> Linearly maps a value from one range to another range\n * @param value - <zh/>  | <en/> The value to be mapped\n * @param domain - <zh/>  [, ] | <en/> The input range [min, max]\n * @param range - <zh/>  [, ] | <en/> The output range [min, max]\n * @returns <zh/>  | <en/> The mapped value\n */\nexport const linear = (value: number, domain: [number, number], range: [number, number]) => {\n  const [d0, d1] = domain;\n  const [r0, r1] = range;\n\n  if (d1 === d0) return r0;\n\n  const ratio = (value - d0) / (d1 - d0);\n  return r0 + ratio * (r1 - r0);\n};\n\n/**\n * <zh/> \n *\n * <en/> Logarithmically maps a value from one range to another range\n * @param value - <zh/>  | <en/> The value to be mapped\n * @param domain - <zh/>  [, ] | <en/> The input range [min, max]\n * @param range - <zh/>  [, ] | <en/> The output range [min, max]\n * @returns <zh/>  | <en/> The mapped value\n */\nexport const log = (value: number, domain: [number, number], range: [number, number]) => {\n  const [d0, d1] = domain;\n  const [r0, r1] = range;\n\n  const ratio = Math.log(value - d0 + 1) / Math.log(d1 - d0 + 1);\n  return r0 + ratio * (r1 - r0);\n};\n\n/**\n * <zh/> \n *\n * <en/> Maps a value from one range to another range\n * @param value - <zh/>  | <en/> The value to be mapped\n * @param domain - <zh/>  [, ] | <en/> The input range [min, max]\n * @param range - <zh/>  [, ] | <en/> The output range [min, max]\n * @param exponent - <zh/>  | <en/> The exponent\n * @returns <zh/>  | <en/> The mapped value\n */\nexport const pow = (value: number, domain: [number, number], range: [number, number], exponent: number = 2): number => {\n  const [d0, d1] = domain;\n  const [r0, r1] = range;\n\n  const ratio = Math.pow((value - d0) / (d1 - d0), exponent);\n  return r0 + ratio * (r1 - r0);\n};\n\n/**\n * <zh/> \n *\n * <en/> Maps a value from one range to another range using square root\n * @param value - <zh/>  | <en/> The value to be mapped\n * @param domain - <zh/>  [, ] | <en/> The input range [min, max]\n * @param range - <zh/>  [, ] | <en/> The output range [min, max]\n * @returns <zh/>  | <en/> The mapped value\n */\nexport const sqrt = (value: number, domain: [number, number], range: [number, number]) => {\n  const [d0, d1] = domain;\n  const [r0, r1] = range;\n\n  const ratio = Math.sqrt((value - d0) / (d1 - d0));\n  return r0 + ratio * (r1 - r0);\n};\n", "import { deepMix, pick } from '@antv/util';\nimport type { RuntimeContext } from '../runtime/types';\nimport type { GraphData, NodeData } from '../spec';\nimport type { NodeStyle } from '../spec/element/node';\nimport type { ID, Node, NodeCentralityOptions, Size, STDSize } from '../types';\nimport type { CentralityResult } from '../utils/centrality';\nimport { getNodeCentralities } from '../utils/centrality';\nimport { idOf } from '../utils/id';\nimport { getVerticalPadding } from '../utils/padding';\nimport { linear, log, pow, sqrt } from '../utils/scale';\nimport { parseSize } from '../utils/size';\nimport type { BaseTransformOptions } from './base-transform';\nimport { BaseTransform } from './base-transform';\nimport type { DrawData } from './types';\nimport { isStyleEqual, reassignTo } from './utils';\n\nexport interface MapNodeSizeOptions extends BaseTransformOptions {\n  /**\n   * <zh/> \n   * - `'degree'`\n   * - `'betweenness'`\n   * - `'closeness'`\n   * - `'eigenvector'`\n   * - `'pagerank'`PageRank PageRank \n   * - `(graphData: GraphData) => Map<ID, number>` `graphData` `Map<ID, number>`  ID \n   *\n   * <en/> The method of measuring the node centrality\n   * - `'degree'`: Degree centrality, measures centrality by the degree (number of connected edges) of a node. Nodes with high degree centrality usually have more direct connections and may play important roles in the network\n   * - `'betweenness'`: Betweenness centrality, measures centrality by the number of times a node appears in all shortest paths. Nodes with high betweenness centrality usually act as bridges in the network, controlling the flow of information\n   * - `'closeness'`: Closeness centrality, measures centrality by the reciprocal of the average shortest path length from a node to all other nodes. Nodes with high closeness centrality usually can reach other nodes in the network more quickly\n   * - `'eigenvector'`: Eigenvector centrality, measures centrality by the degree of connection between a node and other central nodes. Nodes with high eigenvector centrality usually connect to other important nodes\n   * - `'pagerank'`: PageRank centrality, measures centrality by the number of times a node is referenced by other nodes, commonly used in directed graphs. Nodes with high PageRank centrality usually have high influence in the network, similar to the page ranking algorithm\n   * - Custom centrality calculation method: `(graphData: GraphData) => Map<ID, number>`, where `graphData` is the graph data, and `Map<ID, number>` is the mapping from node ID to centrality value\n   * @defaultValue { type: 'eigenvector' }\n   */\n  centrality?: NodeCentralityOptions | ((graphData: GraphData) => Map<ID, number>);\n  /**\n   * <zh/> \n   *\n   * <en/> The maximum size of the node\n   * @defaultValue 80\n   */\n  maxSize?: Size;\n  /**\n   * <zh/> \n   *\n   * <en/> The minimum size of the node\n   * @defaultValue 20\n   */\n  minSize?: Size;\n  /**\n   * <zh/> \n   * - `'linear'`\n   * - `'log'`\n   * - `'pow'`\n   * - `'sqrt'`\n   * - `(value: number, domain: [number, number], range: [number, number]) => number` `value` `domain` `range` \n   *\n   * <en/> Scale type\n   * - `'linear'`: Linear scale, maps a value from one range to another range linearly, commonly used for cases where the difference in centrality values is small\n   * - `'log'`: Logarithmic scale, maps a value from one range to another range logarithmically, commonly used for cases where the difference in centrality values is large\n   * - `'pow'`: Power-law scale, maps a value from one range to another range using power law, commonly used for cases where the difference in centrality values is large\n   * - `'sqrt'`: Square root scale, maps a value from one range to another range using square root, commonly used for cases where the difference in centrality values is large\n   * - Custom scale: `(value: number, domain: [number, number], range: [number, number]) => number`where `value` is the value to be mapped, `domain` is the input range, and `range` is the output range\n   * @defaultValue 'log'\n   */\n  scale?:\n    | 'linear'\n    | 'log'\n    | 'pow'\n    | 'sqrt'\n    | ((value: number, domain: [number, number], range: [number, number]) => number);\n  /**\n   * <zh/> \n   *\n   * <en/> Whether to map label size synchronously\n   * @defaultValue false\n   */\n  mapLabelSize?: boolean | [number, number];\n}\n\n/**\n * <zh/> \n *\n * <en/> Map node size based on node importance\n * @remarks\n * <zh/> \n *\n * <en/> In graph visualization, the size of a node is usually used to convey the importance or influence of the node. By adjusting the size of the node based on the centrality of the node, we can more intuitively show the importance of each node in the network, helping users better understand and analyze complex network structures.\n */\nexport class MapNodeSize extends BaseTransform<MapNodeSizeOptions> {\n  static defaultOptions: Partial<MapNodeSizeOptions> = {\n    centrality: { type: 'degree' },\n    maxSize: 80,\n    minSize: 20,\n    scale: 'linear',\n    mapLabelSize: false,\n  };\n\n  constructor(context: RuntimeContext, options: MapNodeSizeOptions) {\n    super(context, deepMix({}, MapNodeSize.defaultOptions, options));\n  }\n\n  public beforeDraw(input: DrawData): DrawData {\n    const { model } = this.context;\n    const nodes = model.getNodeData();\n\n    const maxSize = parseSize(this.options.maxSize);\n    const minSize = parseSize(this.options.minSize);\n\n    const centralities = this.getCentralities(this.options.centrality);\n\n    const maxCentrality = centralities.size > 0 ? Math.max(...centralities.values()) : 0;\n    const minCentrality = centralities.size > 0 ? Math.min(...centralities.values()) : 0;\n    nodes.forEach((datum) => {\n      const size = this.assignSizeByCentrality(\n        centralities.get(idOf(datum)) || 0,\n        minCentrality,\n        maxCentrality,\n        minSize,\n        maxSize,\n        this.options.scale,\n      );\n\n      const element = this.context.element?.getElement<Node>(idOf(datum));\n\n      const style: NodeStyle = { size };\n      this.assignLabelStyle(style, size, datum, element);\n\n      if (!element || !isStyleEqual(style, element.attributes)) {\n        reassignTo(input, element ? 'update' : 'add', 'node', deepMix(datum, { style }), true);\n      }\n    });\n    return input;\n  }\n\n  private assignLabelStyle(style: NodeStyle, size: STDSize, datum: NodeData, element?: Node) {\n    const configStyle = element ? element.config.style : this.context.element?.getElementComputedStyle('node', datum);\n\n    Object.assign(style, pick(configStyle, ['labelFontSize', 'labelLineHeight']));\n\n    if (this.options.mapLabelSize) {\n      const fontSize = this.getLabelSizeByNodeSize(size, Infinity, Number(style.labelFontSize));\n      Object.assign(style, {\n        labelFontSize: fontSize,\n        labelLineHeight: fontSize + getVerticalPadding(style.labelPadding),\n      });\n    }\n    return style;\n  }\n\n  private getLabelSizeByNodeSize(size: STDSize, defaultMaxFontSize: number, defaultMinFontSize: number): number {\n    const fontSize = Math.min(...size) / 2;\n    const [minFontSize, maxFontSize] = !Array.isArray(this.options.mapLabelSize)\n      ? [defaultMinFontSize, defaultMaxFontSize]\n      : this.options.mapLabelSize;\n    return Math.min(maxFontSize, Math.max(fontSize, minFontSize));\n  }\n\n  private getCentralities(centrality: Required<MapNodeSizeOptions>['centrality']): CentralityResult {\n    const { model } = this.context;\n    const graphData = model.getData();\n\n    if (typeof centrality === 'function') return centrality(graphData);\n\n    const getRelatedEdgesData = model.getRelatedEdgesData.bind(model);\n    return getNodeCentralities(graphData, getRelatedEdgesData, centrality);\n  }\n\n  private assignSizeByCentrality = (\n    centrality: number,\n    minCentrality: number,\n    maxCentrality: number,\n    minSize: STDSize,\n    maxSize: STDSize,\n    scale: MapNodeSizeOptions['scale'],\n  ): STDSize => {\n    const domain: [number, number] = [minCentrality, maxCentrality];\n    const rangeX: [number, number] = [minSize[0], maxSize[0]];\n    const rangeY: [number, number] = [minSize[1], maxSize[1]];\n    const rangeZ: [number, number] = [minSize[2], maxSize[2]];\n\n    const interpolate = (centrality: number, range: [number, number]): number => {\n      if (typeof scale === 'function') {\n        return scale(centrality, domain, range);\n      }\n      switch (scale) {\n        case 'linear':\n          return linear(centrality, domain, range);\n        case 'log':\n          return log(centrality, domain, range);\n        case 'pow':\n          return pow(centrality, domain, range, 2);\n        case 'sqrt':\n          return sqrt(centrality, domain, range);\n        default:\n          return range[0];\n      }\n    };\n\n    return [interpolate(centrality, rangeX), interpolate(centrality, rangeY), interpolate(centrality, rangeZ)];\n  };\n}\n", "import type { TransformArray } from '@antv/g';\nimport { rad2deg } from '@antv/g';\nimport type { RuntimeContext } from '../runtime/types';\nimport type { NodeData } from '../spec';\nimport { idOf } from '../utils/id';\nimport { positionOf } from '../utils/position';\nimport { parseSize } from '../utils/size';\nimport { rad, subtract } from '../utils/vector';\nimport type { BaseTransformOptions } from './base-transform';\nimport { BaseTransform } from './base-transform';\n\n/**\n * <zh/> \n *\n * <en/> Options for automatically adjusting the style of node labels according to the radial layout\n */\nexport interface PlaceRadialLabelsOptions extends BaseTransformOptions {\n  /**\n   * <zh/> \n   *\n   * <en/> Offset\n   */\n  offset?: number;\n}\n\n/**\n * <zh/> \n *\n * <en/> Automatically adjust the style of node labels according to the radial layout, including position and rotation angle\n */\nexport class PlaceRadialLabels extends BaseTransform<PlaceRadialLabelsOptions> {\n  static defaultOptions: Partial<PlaceRadialLabelsOptions> = {\n    offset: 5,\n  };\n\n  constructor(context: RuntimeContext, options: PlaceRadialLabelsOptions) {\n    super(context, Object.assign({}, PlaceRadialLabels.defaultOptions, options));\n  }\n\n  private get ref(): NodeData {\n    return this.context.model.getRootsData()[0];\n  }\n\n  public afterLayout() {\n    const refPoint = positionOf(this.ref);\n\n    const { graph, model } = this.context;\n    const data = model.getData();\n\n    data.nodes?.forEach((datum) => {\n      if (idOf(datum) === idOf(this.ref)) return;\n\n      const radian = rad(subtract(positionOf(datum), refPoint));\n      const isLeft = Math.abs(radian) > Math.PI / 2;\n\n      const isLeaf = !datum.children || datum.children.length === 0;\n      const nodeId = idOf(datum);\n      const node = this.context.element?.getElement(nodeId);\n      if (!node || !node.isVisible()) return;\n\n      const nodeHalfWidth = parseSize(graph.getElementRenderStyle(nodeId).size)[0] / 2;\n      const offset = (isLeaf ? 1 : -1) * (nodeHalfWidth + this.options.offset);\n\n      const labelTransform: TransformArray = [\n        ['translate', offset * Math.cos(radian), offset * Math.sin(radian)],\n        ['rotate', isLeft ? rad2deg(radian) + 180 : rad2deg(radian)],\n      ];\n\n      model.updateNodeData([\n        {\n          id: idOf(datum),\n          style: {\n            labelTextAlign: isLeft === isLeaf ? 'right' : 'left',\n            labelTextBaseline: 'middle',\n            labelTransform,\n          },\n        },\n      ]);\n    });\n\n    graph.draw();\n  }\n}\n", "import type { PathStyleProps } from '@antv/g';\nimport { isBoolean, isEmpty, isEqual, isFunction } from '@antv/util';\nimport type { RuntimeContext } from '../runtime/types';\nimport type { EdgeData } from '../spec';\nimport type { EdgeStyle } from '../spec/element/edge';\nimport type { ID, LoopPlacement, NodeLikeData } from '../types';\nimport { groupByChangeType, reduceDataChanges } from '../utils/change';\nimport { idOf } from '../utils/id';\nimport type { BaseTransformOptions } from './base-transform';\nimport { BaseTransform } from './base-transform';\nimport { getEdgeEndsContext } from './get-edge-actual-ends';\nimport type { DrawData } from './types';\nimport { isStyleEqual, reassignTo } from './utils';\n\nconst CUBIC_EDGE_TYPE = 'quadratic';\n\nconst CUBIC_LOOP_PLACEMENTS: LoopPlacement[] = [\n  'top',\n  'top-right',\n  'right',\n  'right-bottom',\n  'bottom',\n  'bottom-left',\n  'left',\n  'left-top',\n];\n\nexport interface ProcessParallelEdgesOptions extends BaseTransformOptions {\n  /**\n   * <zh/> \n   * - `'merge'`: \n   * - '`bundle`': \n   *\n   * <en/> Processing mode\n   * - '`merge`': Merge parallel edges into one edge which is suitable for cases where parallel edges do not need to be distinguished\n   * - '`bundle`': Each edge will be bundled with all other parallel edges and separated from them by varying the curvature. If the number of parallel edges in a group is odd, the central edge will be drawn as a straight line, and the others will be drawn as curves\n   * @defaultValue 'bundle'\n   */\n  mode: 'bundle' | 'merge';\n  /**\n   * <zh/> \n   *\n   * <en/> The edges to be handled, all edges by default\n   */\n  edges?: ID[];\n  /**\n   * <zh/> \n   *\n   * <en/> The distance between edges, only valid for bundling mode\n   */\n  distance?: number;\n  /**\n   * <zh/> \n   *\n   * <en/> The style of the merged edge, only valid for merging mode\n   */\n  style?: PathStyleProps | ((prev: EdgeData[]) => PathStyleProps);\n}\n\n/**\n * <zh/> \n *\n * <en/> Process parallel edges which share the same source and target nodes\n * @remarks\n * <zh/> Parallel Edges(1) bundle(2) merge\n *\n * <en/> Parallel Edges refer to multiple edges existing between two nodes in a graph structure. These edges share the same source and target nodes but may represent different relationships or attributes. To avoid edge overlap and confusion, two methods are provided for handling parallel edges: (1) Bundle Mode: Bundles parallel edges together and separates them from other edges by altering their curvature; (2) Merge Mode: Merges parallel edges into a single aggregated edge.\n */\nexport class ProcessParallelEdges extends BaseTransform<ProcessParallelEdgesOptions> {\n  static defaultOptions: Partial<ProcessParallelEdgesOptions> = {\n    mode: 'bundle',\n    distance: 15, // only valid for bundling mode\n  };\n\n  private cacheMergeStyle: Map<ID, PathStyleProps> = new Map();\n\n  constructor(context: RuntimeContext, options: ProcessParallelEdgesOptions) {\n    super(context, Object.assign({}, ProcessParallelEdges.defaultOptions, options));\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Process parallel edges before each drawing\n   * @param input\n   */\n  public beforeDraw(input: DrawData): DrawData {\n    const edges = this.getAffectedParallelEdges(input);\n\n    if (edges.size === 0) return input;\n\n    this.options.mode === 'bundle'\n      ? this.applyBundlingStyle(input, edges, this.options.distance)\n      : this.applyMergingStyle(input, edges);\n\n    return input;\n  }\n\n  /**\n   * <zh/> \n   *\n   * <en/> Get affected parallel edges\n   * @param input\n   */\n  private getAffectedParallelEdges = (input: DrawData): Map<ID, EdgeData> => {\n    const {\n      add: { edges: edgesToAdd },\n      update: { nodes: nodesToUpdate, edges: edgesToUpdate, combos: combosToUpdate },\n      remove: { edges: edgesToRemove },\n    } = input;\n\n    const { model } = this.context;\n    const edges: Map<ID, EdgeData> = new Map();\n\n    const addRelatedEdges = (_: NodeLikeData, id: ID) => {\n      const relatedEdgesData = model.getRelatedEdgesData(id);\n      relatedEdgesData.forEach((edge) => !edges.has(idOf(edge)) && edges.set(idOf(edge), edge));\n    };\n\n    nodesToUpdate.forEach(addRelatedEdges);\n    combosToUpdate.forEach(addRelatedEdges);\n\n    const pushParallelEdges = (edge: EdgeData) => {\n      // ID\n      // Get the set of edge IDs that have been marked for removal\n      const removedEdgeIds = new Set(input.remove.edges.keys());\n\n      // comboloop\n      // Filter out removed edges to prevent them from being re-added after redirection (fixes the issue where internal edges become loop edges when combo collapses)\n      const validEdgeData = model\n        .getEdgeData()\n        .filter((edge) => !removedEdgeIds.has(idOf(edge)))\n        .map((edge) => getEdgeEndsContext(model, edge));\n\n      // \n      // Find parallel edges and add them to the processing list, ensuring only valid edges are processed\n      getParallelEdges(edge, validEdgeData, true).forEach((e) => {\n        const id = idOf(e);\n        if (!edges.has(id)) edges.set(id, e);\n      });\n    };\n\n    if (edgesToRemove.size) edgesToRemove.forEach(pushParallelEdges);\n\n    if (edgesToAdd.size) edgesToAdd.forEach(pushParallelEdges);\n\n    if (edgesToUpdate.size) {\n      const changes = groupByChangeType(reduceDataChanges(model.getChanges())).update.edges;\n      edgesToUpdate.forEach((edge) => {\n        pushParallelEdges(edge);\n        //  | Add the original edge and its parallel edges to the update list when the endpoints of the edge change\n        const originalEdge = changes.find((e) => idOf(e.value) === idOf(edge))?.original;\n        if (originalEdge && !isParallelEdges(edge, originalEdge)) {\n          pushParallelEdges(originalEdge);\n        }\n      });\n    }\n\n    if (!isEmpty(this.options.edges)) {\n      edges.forEach((_: EdgeData, id: ID) => !this.options.edges.includes(id) && edges.delete(id));\n    }\n\n    // \n    // Sort by user-set order to prevent jitter during bundling\n    const edgeIds = model.getEdgeData().map(idOf);\n    return new Map([...edges].sort((a, b) => edgeIds.indexOf(a[0]) - edgeIds.indexOf(b[0])));\n  };\n\n  protected applyBundlingStyle = (input: DrawData, edges: Map<ID, EdgeData>, distance: number) => {\n    const { edgeMap, reverses } = groupByEndpoints(edges);\n\n    edgeMap.forEach((arcEdges) => {\n      arcEdges.forEach((edge, i, edgeArr) => {\n        const length = edgeArr.length;\n        const style: EdgeStyle = edge.style || {};\n        if (edge.source === edge.target) {\n          const len = CUBIC_LOOP_PLACEMENTS.length;\n          style.loopPlacement = CUBIC_LOOP_PLACEMENTS[i % len];\n          style.loopDist = Math.floor(i / len) * distance + 50;\n        } else if (length === 1) {\n          style.curveOffset = 0;\n        } else {\n          const sign = (i % 2 === 0 ? 1 : -1) * (reverses[`${edge.source}|${edge.target}|${i}`] ? -1 : 1);\n          style.curveOffset =\n            length % 2 === 1\n              ? sign * Math.ceil(i / 2) * distance * 2\n              : sign * (Math.floor(i / 2) * distance * 2 + distance);\n        }\n        const mergedEdgeData = Object.assign(edge, { type: CUBIC_EDGE_TYPE, style });\n\n        const element = this.context.element?.getElement(idOf(edge));\n\n        if (!element || !isStyleEqual(mergedEdgeData.style, element.attributes)) {\n          reassignTo(input, element ? 'update' : 'add', 'edge', mergedEdgeData, true);\n        }\n      });\n    });\n  };\n\n  private resetEdgeStyle = (edge: EdgeData) => {\n    const style = edge.style || {};\n    const cacheStyle = this.cacheMergeStyle.get(idOf(edge)) || {};\n    Object.keys(cacheStyle).forEach((key) => {\n      if (isEqual(style[key], (cacheStyle as any)[key])) {\n        if (edge[key]) {\n          style[key] = edge[key];\n        } else {\n          delete style[key];\n        }\n      }\n    });\n    return Object.assign(edge, { style });\n  };\n\n  protected applyMergingStyle = (input: DrawData, edges: Map<ID, EdgeData>) => {\n    const { edgeMap, reverses } = groupByEndpoints(edges);\n\n    edgeMap.forEach((edges) => {\n      if (edges.length === 1) {\n        const edge = edges[0];\n        const element = this.context.element?.getElement(idOf(edge));\n        const edgeStyle = this.resetEdgeStyle(edge);\n        if (!element || !isStyleEqual(edgeStyle, element.attributes)) {\n          reassignTo(input, element ? 'update' : 'add', 'edge', edgeStyle);\n        }\n        return;\n      }\n\n      const mergedStyle = edges\n        .map(({ source, target, style = {} }, i) => {\n          const { startArrow, endArrow } = style;\n          const newStyle: EdgeData['style'] = {};\n          const [start, end] = reverses[`${source}|${target}|${i}`]\n            ? ['endArrow', 'startArrow']\n            : ['startArrow', 'endArrow'];\n          if (isBoolean(startArrow)) newStyle[start] = startArrow;\n          if (isBoolean(endArrow)) newStyle[end] = endArrow;\n          return newStyle;\n        })\n        .reduce((acc, style) => ({ ...acc, ...style }), {});\n\n      edges.forEach((edge, i, edges) => {\n        if (i !== 0) {\n          reassignTo(input, 'remove', 'edge', edge);\n          return;\n        }\n        const parsedStyle = Object.assign(\n          {},\n          isFunction(this.options.style) ? this.options.style(edges) : this.options.style,\n          { childrenData: edges },\n        );\n        this.cacheMergeStyle.set(idOf(edge), parsedStyle);\n        const mergedEdgeData = {\n          ...edge,\n          type: 'line',\n          style: { ...edge.style, ...mergedStyle, ...parsedStyle },\n        };\n\n        const element = this.context.element?.getElement(idOf(edge));\n        if (!element || !isStyleEqual(mergedEdgeData.style, element.attributes)) {\n          reassignTo(input, element ? 'update' : 'add', 'edge', mergedEdgeData, true);\n        }\n      });\n    });\n  };\n}\n\n/**\n * <zh/> O(n)\n *\n * <en/> Optimized method to group by endpoints, time complexity O(n)\n * @param edges - <zh/>  | <en/> Edges\n * @returns <zh/>  | <en/> Edges grouped by endpoints\n */\nexport const groupByEndpoints = (edges: Map<ID, EdgeData>) => {\n  const edgeMap = new Map<string, EdgeData[]>();\n  const processedEdgesSet = new Set<ID>();\n  const reverses: Record<string, boolean> = {};\n  const includedEdgesInGroup = new Map<string, Set<ID>>();\n\n  for (const [id, edge] of edges) {\n    if (processedEdgesSet.has(id)) continue;\n\n    const { source, target } = edge;\n    const sourceTarget = `${source}-${target}`;\n\n    if (!edgeMap.has(sourceTarget)) {\n      edgeMap.set(sourceTarget, []);\n      includedEdgesInGroup.set(sourceTarget, new Set<ID>());\n    }\n\n    const sourceTargetEdges = edgeMap.get(sourceTarget);\n    const includedEdges = includedEdgesInGroup.get(sourceTarget);\n\n    if (sourceTargetEdges && includedEdges && !includedEdges.has(id)) {\n      sourceTargetEdges.push(edge);\n      includedEdges.add(id);\n      processedEdgesSet.add(id);\n    }\n\n    for (const [otherId, sedge] of edges) {\n      if (processedEdgesSet.has(otherId) || otherId === id) continue;\n\n      if (isParallelEdges(edge, sedge)) {\n        const groupEdges = edgeMap.get(sourceTarget);\n        const includedGroupEdges = includedEdgesInGroup.get(sourceTarget);\n\n        if (groupEdges && includedGroupEdges && !includedGroupEdges.has(otherId)) {\n          groupEdges.push(sedge);\n          includedGroupEdges.add(otherId);\n\n          if (source === sedge.target && target === sedge.source) {\n            reverses[`${sedge.source}|${sedge.target}|${groupEdges.length - 1}`] = true;\n          }\n\n          processedEdgesSet.add(otherId);\n        }\n      }\n    }\n  }\n\n  return { edgeMap, reverses };\n};\n\n/**\n * <zh/> \n *\n * <en/> Get parallel edges\n * @param edge - <zh/>  | <en/> Target edge\n * @param edges - <zh/>  | <en/> Edges\n * @param containsSelf - <zh/>  | <en/> Whether the output result contains the target edge\n * @returns <zh/>  | <en/> Parallel edges\n */\nexport const getParallelEdges = (edge: EdgeData, edges: EdgeData[], containsSelf?: boolean): EdgeData[] => {\n  return edges.filter((e) => (containsSelf || idOf(e) !== idOf(edge)) && isParallelEdges(e, edge));\n};\n\n/**\n * <zh/> \n *\n * <en/> Determine whether two edges are parallel\n * @param edge1 - <zh/> 1 | <en/> Edge 1\n * @param edge2 - <zh/> 2 | <en/> Edge 2\n * @returns <zh/>  | <en/> Whether is parallel\n */\nexport const isParallelEdges = (edge1: EdgeData, edge2: EdgeData) => {\n  const { sourceNode: src1, targetNode: tgt1 } = edge1.style || {};\n  const { sourceNode: src2, targetNode: tgt2 } = edge2.style || {};\n  return (src1 === src2 && tgt1 === tgt2) || (src1 === tgt2 && tgt1 === src2);\n};\n", "import type { DrawContext } from '../runtime/element';\nimport type { ID, NodeLikeData } from '../types';\nimport { idOf } from '../utils/id';\nimport { BaseTransform } from './base-transform';\nimport type { DrawData } from './types';\n\n/**\n *  / combo\n * If the node / combo is updated, the connected edge and the combo it is in need to be updated\n */\nexport class UpdateRelatedEdge extends BaseTransform {\n  public beforeDraw(input: DrawData, context: DrawContext): DrawData {\n    const { stage } = context;\n    if (stage === 'visibility') return input;\n\n    const { model } = this.context;\n    const {\n      update: { nodes, edges, combos },\n    } = input;\n\n    const addRelatedEdges = (_: NodeLikeData, id: ID) => {\n      const relatedEdgesData = model.getRelatedEdgesData(id);\n      relatedEdgesData.forEach((edge) => !edges.has(idOf(edge)) && edges.set(idOf(edge), edge));\n    };\n\n    nodes.forEach(addRelatedEdges);\n    combos.forEach(addRelatedEdges);\n\n    return input;\n  }\n}\n", "import {\n  Circle as GCircle,\n  Ellipse as GEllipse,\n  Group as GGroup,\n  HTML as GHTML,\n  Line as GLine,\n  Path as GPath,\n  Polygon as GPolygon,\n  Polyline as GPolyline,\n  Rect as GRect,\n  Text as GText,\n} from '@antv/g';\nimport { ComboCollapse, ComboExpand, Fade, NodeCollapse, NodeExpand, PathIn, PathOut, Translate } from '../animations';\nimport {\n  AutoAdaptLabel,\n  BrushSelect,\n  ClickSelect,\n  CollapseExpand,\n  CreateEdge,\n  DragCanvas,\n  DragElement,\n  DragElementForce,\n  FixElementSize,\n  FocusElement,\n  HoverActivate,\n  LassoSelect,\n  OptimizeViewportTransform,\n  ScrollCanvas,\n  ZoomCanvas,\n} from '../behaviors';\nimport {\n  Circle,\n  CircleCombo,\n  Cubic,\n  CubicHorizontal,\n  CubicRadial,\n  CubicVertical,\n  Diamond,\n  Donut,\n  Ellipse,\n  HTML,\n  Hexagon,\n  Image,\n  Line,\n  Polyline,\n  Quadratic,\n  Rect,\n  RectCombo,\n  Star,\n  Triangle,\n} from '../elements';\nimport { Badge as BadgeShape, Image as ImageShape, Label as LabelShape } from '../elements/shapes';\nimport {\n  AntVDagreLayout,\n  CircularLayout,\n  ComboCombinedLayout,\n  ConcentricLayout,\n  D3ForceLayout,\n  DagreLayout,\n  FishboneLayout,\n  ForceAtlas2Layout,\n  ForceLayout,\n  FruchtermanLayout,\n  GridLayout,\n  MDSLayout,\n  RadialLayout,\n  RandomLayout,\n  SnakeLayout,\n  compactBox,\n  dendrogram,\n  indented,\n  mindmap,\n} from '../layouts';\nimport { blues, greens, oranges, spectral, tableau } from '../palettes';\nimport {\n  Background,\n  BubbleSets,\n  Contextmenu,\n  EdgeBundling,\n  EdgeFilterLens,\n  Fisheye,\n  Fullscreen,\n  GridLine,\n  History,\n  Hull,\n  Legend,\n  Minimap,\n  Snapline,\n  Timebar,\n  Title,\n  Toolbar,\n  Tooltip,\n  Watermark,\n} from '../plugins';\nimport { dark, light } from '../themes';\nimport {\n  ArrangeDrawOrder,\n  CollapseExpandCombo,\n  CollapseExpandNode,\n  GetEdgeActualEnds,\n  MapNodeSize,\n  PlaceRadialLabels,\n  ProcessParallelEdges,\n  UpdateRelatedEdge,\n} from '../transforms';\nimport type { ExtensionRegistry } from './types';\n\n/**\n * <zh/> \n * <en/> Built-in extensions are registered here.\n */\nconst BUILT_IN_EXTENSIONS: ExtensionRegistry = {\n  animation: {\n    'combo-collapse': ComboCollapse,\n    'combo-expand': ComboExpand,\n    'node-collapse': NodeCollapse,\n    'node-expand': NodeExpand,\n    'path-in': PathIn,\n    'path-out': PathOut,\n    fade: Fade,\n    translate: Translate,\n  },\n  behavior: {\n    'brush-select': BrushSelect,\n    'click-select': ClickSelect,\n    'collapse-expand': CollapseExpand,\n    'create-edge': CreateEdge,\n    'drag-canvas': DragCanvas,\n    'drag-element-force': DragElementForce,\n    'drag-element': DragElement,\n    'fix-element-size': FixElementSize,\n    'focus-element': FocusElement,\n    'hover-activate': HoverActivate,\n    'lasso-select': LassoSelect,\n    'auto-adapt-label': AutoAdaptLabel,\n    'optimize-viewport-transform': OptimizeViewportTransform,\n    'scroll-canvas': ScrollCanvas,\n    'zoom-canvas': ZoomCanvas,\n  },\n  combo: {\n    circle: CircleCombo,\n    rect: RectCombo,\n  },\n  edge: {\n    cubic: Cubic,\n    line: Line,\n    polyline: Polyline,\n    quadratic: Quadratic,\n    'cubic-horizontal': CubicHorizontal,\n    'cubic-radial': CubicRadial,\n    'cubic-vertical': CubicVertical,\n  },\n  layout: {\n    'antv-dagre': AntVDagreLayout,\n    'combo-combined': ComboCombinedLayout,\n    'compact-box': compactBox as any,\n    'd3-force': D3ForceLayout,\n    'force-atlas2': ForceAtlas2Layout,\n    circular: CircularLayout,\n    concentric: ConcentricLayout,\n    dagre: DagreLayout,\n    dendrogram: dendrogram as any,\n    fishbone: FishboneLayout,\n    force: ForceLayout,\n    fruchterman: FruchtermanLayout,\n    grid: GridLayout,\n    indented: indented as any,\n    mds: MDSLayout,\n    mindmap: mindmap as any,\n    radial: RadialLayout,\n    random: RandomLayout,\n    snake: SnakeLayout,\n  },\n  node: {\n    circle: Circle,\n    diamond: Diamond,\n    ellipse: Ellipse,\n    hexagon: Hexagon,\n    html: HTML,\n    image: Image,\n    rect: Rect,\n    star: Star,\n    donut: Donut,\n    triangle: Triangle,\n  },\n  palette: {\n    spectral,\n    tableau,\n    oranges,\n    greens,\n    blues,\n  },\n  theme: {\n    dark,\n    light,\n  },\n  plugin: {\n    'bubble-sets': BubbleSets,\n    'edge-bundling': EdgeBundling,\n    'edge-filter-lens': EdgeFilterLens,\n    'grid-line': GridLine,\n    background: Background,\n    contextmenu: Contextmenu,\n    fisheye: Fisheye,\n    fullscreen: Fullscreen,\n    history: History,\n    hull: Hull,\n    legend: Legend,\n    minimap: Minimap,\n    snapline: Snapline,\n    timebar: Timebar,\n    title: Title,\n    toolbar: Toolbar,\n    tooltip: Tooltip,\n    watermark: Watermark,\n  },\n  transform: {\n    'arrange-draw-order': ArrangeDrawOrder,\n    'collapse-expand-combo': CollapseExpandCombo,\n    'collapse-expand-node': CollapseExpandNode,\n    'get-edge-actual-ends': GetEdgeActualEnds,\n    'map-node-size': MapNodeSize,\n    'place-radial-labels': PlaceRadialLabels,\n    'process-parallel-edges': ProcessParallelEdges,\n    'update-related-edges': UpdateRelatedEdge,\n  },\n  shape: {\n    circle: GCircle,\n    ellipse: GEllipse,\n    group: GGroup,\n    html: GHTML,\n    image: ImageShape,\n    line: GLine,\n    path: GPath,\n    polygon: GPolygon,\n    polyline: GPolyline,\n    rect: GRect,\n    text: GText,\n    label: LabelShape,\n    badge: BadgeShape,\n  },\n};\n\nimport type { ExtensionCategory } from '../constants';\nimport { register } from './register';\n\n/**\n * <zh/> \n *\n * <en/> Register built-in extensions\n */\nexport function registerBuiltInExtensions() {\n  Object.entries(BUILT_IN_EXTENSIONS).forEach(([category, extensions]) => {\n    Object.entries(extensions).forEach(([type, extension]) => {\n      register(category as ExtensionCategory, type, extension as any);\n    });\n  });\n}\n", "import { registerBuiltInExtensions } from './registry/build-in';\n\nregisterBuiltInExtensions();\n", "import type * as React from 'react';\nimport * as ReactDOM from 'react-dom';\n\ntype ContainerType = Element | DocumentFragment;\n\nconst { version } = ReactDOM;\n\n/**\n * <zh/>  React \n *\n * <en/> Get React major version\n * @returns <zh/>  | <en/> Major version\n */\nfunction getReactMajorVersion(): number {\n  return Number((version || '').split('.')[0]);\n}\n\nconst getRenderer = (() => {\n  let rendererPromise: Promise<{\n    render: (node: React.ReactElement, container: ContainerType) => unknown;\n    unmount: (container: ContainerType) => unknown;\n  }>;\n\n  return () => {\n    if (!rendererPromise) {\n      const majorVersion = getReactMajorVersion();\n      if (majorVersion >= 18) {\n        rendererPromise = import('./render18');\n      } else {\n        rendererPromise = import('./render16');\n      }\n    }\n    return rendererPromise;\n  };\n})();\n\n/**\n * <zh/>  React ( React 16 ~ 19)\n *\n * <en/> Render React node(Compatible with React 16 ~ 19)\n * @param node - <zh/> React  | <en/> React node\n * @param container - <zh/>  | <en/> Container\n * @returns <zh/> Promise | <en/> Promise\n */\nexport async function render(node: React.ReactElement, container: ContainerType) {\n  const { render } = await getRenderer();\n  return render(node, container);\n}\n\n/**\n * <zh/>  React ( React 16 ~ 19)\n *\n * <en/> Unmount React node(Compatible with React 16 ~ 19)\n * @param container - <zh/>  | <en/> Container\n * @returns <zh/> Promise | <en/> Promise\n */\nexport async function unmount(container: ContainerType) {\n  const { unmount } = await getRenderer();\n  return unmount(container);\n}\n", "import type { DisplayObjectConfig, HTMLStyleProps as GHTMLStyleProps } from '@antv/g';\nimport type { BaseNodeStyleProps, HTMLStyleProps } from '@antv/g6';\nimport { HTML } from '@antv/g6';\nimport type { FC, ReactElement } from 'react';\nimport { render, unmount } from './render';\n\nexport interface ReactNodeStyleProps extends BaseNodeStyleProps {\n  /**\n   * <zh/> React \n   *\n   * <en/> React component\n   */\n  component: FC;\n}\n\nexport class ReactNode extends HTML {\n  protected getKeyStyle(attributes: Required<HTMLStyleProps>): GHTMLStyleProps {\n    return { ...super.getKeyStyle(attributes) };\n  }\n\n  constructor(options: DisplayObjectConfig<ReactNodeStyleProps>) {\n    super(options as any);\n  }\n\n  public update(attr?: Partial<ReactNodeStyleProps> | undefined): void {\n    super.update(attr);\n  }\n\n  public connectedCallback() {\n    super.connectedCallback();\n    // this.root = createRoot(this.getDomElement());\n    const { component } = this.attributes as unknown as ReactNodeStyleProps;\n    // component  ReactNode\n    // component has been automatically created as ReactNode by the callback mechanism\n    render(component as unknown as ReactElement, this.getDomElement());\n  }\n\n  public attributeChangedCallback(name: any, oldValue: any, newValue: any) {\n    super.attributeChangedCallback(name, oldValue, newValue);\n    if (name === 'component' && oldValue !== newValue) {\n      render(\n        (this.attributes as unknown as ReactNodeStyleProps).component as unknown as ReactElement,\n        this.getDomElement(),\n      );\n    }\n  }\n\n  public destroy(): void {\n    unmount(this.getDomElement());\n    super.destroy();\n  }\n}\n", "import { HoverActivate, idOf } from '@antv/g6';\n/**\n * Behavior to activate the hovered element and its chain (including nodes and edges).\n */\nexport class HoverActivateChain extends HoverActivate {\n    getActiveIds(event) {\n        const { model, graph } = this.context;\n        const targetId = event.target.id;\n        const targetType = graph.getElementType(targetId);\n        const ids = [targetId];\n        if (targetType === 'edge') {\n            const edge = model.getEdgeDatum(targetId);\n            this.collectChainNodes(edge.source, 'in', ids);\n            this.collectChainNodes(edge.target, 'out', ids);\n        }\n        else if (targetType === 'node') {\n            this.collectChainNodes(targetId, 'both', ids);\n        }\n        graph.frontElement(ids);\n        return ids;\n    }\n    collectChainNodes(nodeId, direction, ids) {\n        const { model } = this.context;\n        const edges = model.getRelatedEdgesData(nodeId, direction);\n        edges.forEach((edge) => {\n            if (!ids.includes(idOf(edge)))\n                ids.push(idOf(edge));\n            if (!ids.includes(edge.source)) {\n                ids.push(edge.source);\n                this.collectChainNodes(edge.source, 'in', ids);\n            }\n            if (!ids.includes(edge.target)) {\n                ids.push(edge.target);\n                this.collectChainNodes(edge.target, 'out', ids);\n            }\n        });\n    }\n}\n", "import { HoverActivate, idOf } from '@antv/g6';\nexport class HoverActivateNeighbors extends HoverActivate {\n    getActiveIds(event) {\n        const { model, graph } = this.context;\n        const targetId = event.target.id;\n        const targetType = graph.getElementType(targetId);\n        const ids = [targetId];\n        if (targetType === 'edge') {\n            const edge = model.getEdgeDatum(targetId);\n            ids.push(edge.source, edge.target);\n        }\n        else if (targetType === 'node') {\n            ids.push(...model.getRelatedEdgesData(targetId).map(idOf));\n        }\n        graph.frontElement(ids);\n        return ids;\n    }\n}\n", "import { Polyline } from '@antv/g6';\nexport class IndentedEdge extends Polyline {\n    getControlPoints(attributes) {\n        const [sourcePoint, targetPoint] = this.getEndpoints(attributes, false);\n        const [sx] = sourcePoint;\n        const [, ty] = targetPoint;\n        return [[sx, ty]];\n    }\n}\n", "import { BaseTransform } from '@antv/g6';\n/**\n * ArrangeEdgeZIndex transform, specifically for indented tree layout\n */\nexport class ArrangeEdgeZIndex extends BaseTransform {\n    beforeDraw(input) {\n        const { model } = this.context;\n        const { nodes, edges } = model.getData();\n        const oneLevelNodes = nodes.filter((node) => node.depth === 1);\n        const oneLevelNodeIds = oneLevelNodes.map((node) => node.id);\n        edges.forEach((edge) => {\n            if (oneLevelNodeIds.includes(edge.target)) {\n                edge.style ||= {};\n                edge.style.zIndex = oneLevelNodes.length - oneLevelNodes.findIndex((node) => node.id === edge.target);\n            }\n        });\n        return input;\n    }\n}\n", "import { BaseTransform } from '@antv/g6';\nexport class AssignColorByBranch extends BaseTransform {\n    static defaultOptions = {\n        colors: [\n            '#1783FF',\n            '#F08F56',\n            '#D580FF',\n            '#00C9C9',\n            '#7863FF',\n            '#DB9D0D',\n            '#60C42D',\n            '#FF80CA',\n            '#2491B3',\n            '#17C76F',\n        ],\n    };\n    constructor(context, options) {\n        super(context, Object.assign({}, AssignColorByBranch.defaultOptions, options));\n    }\n    beforeDraw(input) {\n        const nodes = this.context.model.getNodeData();\n        if (nodes.length === 0)\n            return input;\n        let colorIndex = 0;\n        const dfs = (nodeId, color) => {\n            const node = nodes.find((datum) => datum.id == nodeId);\n            if (!node)\n                return;\n            node.style ||= {};\n            node.style.color = color || this.options.colors[colorIndex++ % this.options.colors.length];\n            node.children?.forEach((childId) => dfs(childId, node.style?.color));\n        };\n        nodes.filter((node) => node.depth === 1).forEach((rootNode) => dfs(rootNode.id));\n        return input;\n    }\n}\n", "import { BaseTransform, idOf } from '@antv/g6';\nimport { get, has, set } from 'lodash';\nimport React from 'react';\nimport { CollapseExpandIcon } from '../base';\nimport { withCollapsibleNode } from '../hoc';\nimport { getNeighborNodeIds } from '../utils/data';\nconst { PlusMinusIcon } = CollapseExpandIcon;\nexport class CollapseExpandReactNode extends BaseTransform {\n    static defaultOptions = {\n        enable: true,\n        trigger: 'icon',\n        direction: 'out',\n        iconRender: (isCollapsed) => React.createElement(PlusMinusIcon, { isCollapsed: isCollapsed }),\n        iconPlacement: 'bottom',\n        iconOffsetX: 0,\n        iconOffsetY: 0,\n        iconClassName: '',\n        iconStyle: {},\n        refreshLayout: false,\n    };\n    constructor(context, options) {\n        super(context, Object.assign({}, CollapseExpandReactNode.defaultOptions, options));\n    }\n    afterLayout() {\n        const { graph, element, model } = this.context;\n        const { nodes = [], edges = [] } = graph.getData();\n        const { enable, ...options } = this.options;\n        nodes.forEach((datum) => {\n            const nodeId = idOf(datum);\n            if (datum.children && datum.children.length > 0)\n                return;\n            const children = getNeighborNodeIds(nodeId, edges, this.options.direction);\n            if (children.length === 0)\n                return;\n            model.updateNodeData([{ id: nodeId, children }]);\n        });\n        const nodeMapper = graph.getOptions().node;\n        if (has(nodeMapper, 'style.component')) {\n            const Component = get(nodeMapper, 'style.component');\n            set(nodeMapper, 'style.component', (data) => {\n                if (!(typeof enable === 'function' ? enable(data) : enable))\n                    return Component.call(graph, data);\n                const CollapsibleNode = withCollapsibleNode(Component);\n                return React.createElement(CollapsibleNode, { data: data, graph: graph, ...options });\n            });\n        }\n        graph.setNode(nodeMapper);\n        graph.draw();\n    }\n}\n", "export { ArrowCountIcon } from './arrow-count-icon';\nexport { PlusMinusIcon } from './plus-minus-icon';\n", "import React from 'react';\nimport styled from 'styled-components';\nconst StyledWrapper = styled.div `\n  ${({ $placement }) => {\n    switch ($placement) {\n        case 'top':\n            return 'transform: translate(-50%, -100%); flex-direction: column-reverse;';\n        case 'right':\n            return 'transform: translate(0, -50%);';\n        case 'left':\n            return 'transform: translate(-100%, -50%); flex-direction: row-reverse;';\n        default:\n            return 'transform: translate(-50%, 0); flex-direction: column;';\n    }\n}}\n\n  .arrow-count-icon-bar {\n    ${({ $placement }) => {\n    const isVertical = $placement === 'top' || $placement === 'bottom';\n    return isVertical ? 'width: 3px; height: 8px; margin: 0 7px;' : 'width: 8px; height: 3px; margin: 7px 0;';\n}}\n    background-color: ${({ $color }) => $color};\n  }\n\n  .arrow-count-icon-circle {\n    width: 16px;\n    height: 16px;\n    color: #fff;\n    font-weight: 600;\n    font-size: 10px;\n    line-height: ${({ $isCollapsed }) => ($isCollapsed ? '16px' : '14px')};\n    text-align: center;\n    background-color: ${({ $color }) => $color};\n    border-radius: 50%;\n  }\n\n  .arrow-count-icon-circle-arrow {\n    width: 16px;\n    height: 16px;\n    transform: ${({ $isCollapsed, $placement }) => {\n    if ($isCollapsed)\n        return 'none';\n    switch ($placement) {\n        case 'top':\n            return 'translateY(1px) rotate(-90deg)';\n        case 'right':\n            return 'translateX(-1px) rotate(0deg)';\n        case 'left':\n            return 'translateX(1px) rotate(180deg)';\n        default:\n            return 'translateY(-1px) rotate(90deg)';\n    }\n}};\n  }\n\n  display: ${({ $isCollapsed }) => ($isCollapsed ? 'flex' : 'none')};\n\n  .collapsible-node-wrapper:hover & {\n    display: flex;\n  }\n`;\nexport const ArrowCountIcon = (props) => {\n    const { className, style, graph, data, isCollapsed, countType = 'descendant', placement = 'bottom' } = props;\n    const color = graph.getNodeData(data.id).style?.color || '#99ADD1';\n    const count = (countType === 'descendant' ? graph.getDescendantsData(data.id) : graph.getChildrenData(data.id))\n        .length;\n    return (React.createElement(StyledWrapper, { \"$color\": color, \"$isCollapsed\": isCollapsed, \"$placement\": placement, className: `arrow-count-icon ${isCollapsed ? `arrow-count-icon-collapsed` : ''} ${className || ''}`, style: style },\n        React.createElement(\"div\", { className: \"arrow-count-icon-bar\" }),\n        React.createElement(\"div\", { className: \"arrow-count-icon-circle\" }, isCollapsed ? (count) : (React.createElement(\"div\", { className: \"arrow-count-icon-circle-arrow\" },\n            React.createElement(\"svg\", { width: \"16\", height: \"16\", viewBox: \"0 0 16 16\", fill: \"none\" },\n                React.createElement(\"path\", { d: \"M11,4 L5.5,8 L11,12\", stroke: \"white\", strokeWidth: \"1.5\", strokeLinecap: \"round\", strokeLinejoin: \"round\" })))))));\n};\n", "var unitlessKeys = {\n  animationIterationCount: 1,\n  aspectRatio: 1,\n  borderImageOutset: 1,\n  borderImageSlice: 1,\n  borderImageWidth: 1,\n  boxFlex: 1,\n  boxFlexGroup: 1,\n  boxOrdinalGroup: 1,\n  columnCount: 1,\n  columns: 1,\n  flex: 1,\n  flexGrow: 1,\n  flexPositive: 1,\n  flexShrink: 1,\n  flexNegative: 1,\n  flexOrder: 1,\n  gridRow: 1,\n  gridRowEnd: 1,\n  gridRowSpan: 1,\n  gridRowStart: 1,\n  gridColumn: 1,\n  gridColumnEnd: 1,\n  gridColumnSpan: 1,\n  gridColumnStart: 1,\n  msGridRow: 1,\n  msGridRowSpan: 1,\n  msGridColumn: 1,\n  msGridColumnSpan: 1,\n  fontWeight: 1,\n  lineHeight: 1,\n  opacity: 1,\n  order: 1,\n  orphans: 1,\n  scale: 1,\n  tabSize: 1,\n  widows: 1,\n  zIndex: 1,\n  zoom: 1,\n  WebkitLineClamp: 1,\n  // SVG-related properties\n  fillOpacity: 1,\n  floodOpacity: 1,\n  stopOpacity: 1,\n  strokeDasharray: 1,\n  strokeDashoffset: 1,\n  strokeMiterlimit: 1,\n  strokeOpacity: 1,\n  strokeWidth: 1\n};\n\nexport { unitlessKeys as default };\n", "declare let SC_DISABLE_SPEEDY: boolean | null | undefined;\ndeclare let __VERSION__: string;\n\nimport React from 'react';\n\nexport const SC_ATTR: string =\n  (typeof process !== 'undefined' &&\n    typeof process.env !== 'undefined' &&\n    (process.env.REACT_APP_SC_ATTR || process.env.SC_ATTR)) ||\n  'data-styled';\n\nexport const SC_ATTR_ACTIVE = 'active';\nexport const SC_ATTR_VERSION = 'data-styled-version';\nexport const SC_VERSION = __VERSION__;\nexport const SPLITTER = '/*!sc*/\\n';\n\nexport const IS_BROWSER = typeof window !== 'undefined' && typeof document !== 'undefined';\n\n/**\n * Detect if we're running in a React Server Component environment.\n * RSC environments lack createContext, making this a reliable indicator.\n */\nexport const IS_RSC = typeof React.createContext === 'undefined';\n\nexport const DISABLE_SPEEDY = Boolean(\n  typeof SC_DISABLE_SPEEDY === 'boolean'\n    ? SC_DISABLE_SPEEDY\n    : typeof process !== 'undefined' &&\n        typeof process.env !== 'undefined' &&\n        typeof process.env.REACT_APP_SC_DISABLE_SPEEDY !== 'undefined' &&\n        process.env.REACT_APP_SC_DISABLE_SPEEDY !== ''\n      ? process.env.REACT_APP_SC_DISABLE_SPEEDY === 'false'\n        ? false\n        : process.env.REACT_APP_SC_DISABLE_SPEEDY\n      : typeof process !== 'undefined' &&\n          typeof process.env !== 'undefined' &&\n          typeof process.env.SC_DISABLE_SPEEDY !== 'undefined' &&\n          process.env.SC_DISABLE_SPEEDY !== ''\n        ? process.env.SC_DISABLE_SPEEDY === 'false'\n          ? false\n          : process.env.SC_DISABLE_SPEEDY\n        : process.env.NODE_ENV !== 'production'\n);\n\n// Shared empty execution context when generating static styles\nexport const STATIC_EXECUTION_CONTEXT = {};\n", "import React from 'react';\nimport { IS_RSC } from '../constants';\n\nconst invalidHookCallRe = /invalid hook call/i;\nconst seen = new Set();\n\nexport const checkDynamicCreation = (displayName: string, componentId?: string | undefined) => {\n  if (process.env.NODE_ENV !== 'production') {\n    // Skip check in RSC environments where:\n    // 1. Components are always module-level (can't be in render functions)\n    // 2. Hook detection is unreliable due to different module evaluation context\n    if (IS_RSC) {\n      return;\n    }\n\n    const parsedIdString = componentId ? ` with the id of \"${componentId}\"` : '';\n    const message =\n      `The component ${displayName}${parsedIdString} has been created dynamically.\\n` +\n      \"You may see this warning because you've called styled inside another component.\\n\" +\n      'To resolve this only create new StyledComponents outside of any render method and function component.\\n' +\n      'See https://styled-components.com/docs/basics#define-styled-components-outside-of-the-render-method for more info.\\n';\n\n    // If a hook is called outside of a component:\n    // React 17 and earlier throw an error\n    // React 18 and above use console.error\n\n    const originalConsoleError = console.error;\n    try {\n      let didNotCallInvalidHook = true;\n      console.error = (consoleErrorMessage, ...consoleErrorArgs) => {\n        // The error here is expected, since we're expecting anything that uses `checkDynamicCreation` to\n        // be called outside of a React component.\n        if (invalidHookCallRe.test(consoleErrorMessage)) {\n          didNotCallInvalidHook = false;\n          // This shouldn't happen, but resets `warningSeen` if we had this error happen intermittently\n          seen.delete(message);\n        } else {\n          originalConsoleError(consoleErrorMessage, ...consoleErrorArgs);\n        }\n      };\n      // We purposefully call a hook outside of a component and expect it to throw\n      // If it doesn't, then we're inside another component.\n      // Use useState instead of useRef to avoid importing useRef\n      if (typeof React.useState === 'function') {\n        React.useState(null);\n      }\n\n      if (didNotCallInvalidHook && !seen.has(message)) {\n        console.warn(message);\n        seen.add(message);\n      }\n    } catch (error) {\n      // The error here is expected, since we're expecting anything that uses `checkDynamicCreation` to\n      // be called outside of a React component.\n      if (invalidHookCallRe.test((error as Error).message)) {\n        // This shouldn't happen, but resets `warningSeen` if we had this error happen intermittently\n        seen.delete(message);\n      }\n    } finally {\n      console.error = originalConsoleError;\n    }\n  }\n};\n", "import { Dict } from '../types';\n\nexport const EMPTY_ARRAY = Object.freeze([]) as Readonly<any[]>;\nexport const EMPTY_OBJECT = Object.freeze({}) as Readonly<Dict<any>>;\n", "import { DefaultTheme, ExecutionProps } from '../types';\nimport { EMPTY_OBJECT } from './empties';\n\nexport default function determineTheme(\n  props: ExecutionProps,\n  providedTheme?: DefaultTheme | undefined,\n  defaultProps: { theme?: DefaultTheme | undefined } = EMPTY_OBJECT\n): DefaultTheme | undefined {\n  return (props.theme !== defaultProps.theme && props.theme) || providedTheme || defaultProps.theme;\n}\n", "const elements = [\n  'a',\n  'abbr',\n  'address',\n  'area',\n  'article',\n  'aside',\n  'audio',\n  'b',\n  'bdi',\n  'bdo',\n  'blockquote',\n  'body',\n  'button',\n  'br',\n  'canvas',\n  'caption',\n  'cite',\n  'code',\n  'col',\n  'colgroup',\n  'data',\n  'datalist',\n  'dd',\n  'del',\n  'details',\n  'dfn',\n  'dialog',\n  'div',\n  'dl',\n  'dt',\n  'em',\n  'embed',\n  'fieldset',\n  'figcaption',\n  'figure',\n  'footer',\n  'form',\n  'h1',\n  'h2',\n  'h3',\n  'h4',\n  'h5',\n  'h6',\n  'header',\n  'hgroup',\n  'hr',\n  'html',\n  'i',\n  'iframe',\n  'img',\n  'input',\n  'ins',\n  'kbd',\n  'label',\n  'legend',\n  'li',\n  'main',\n  'map',\n  'mark',\n  'menu',\n  'meter',\n  'nav',\n  'object',\n  'ol',\n  'optgroup',\n  'option',\n  'output',\n  'p',\n  'picture',\n  'pre',\n  'progress',\n  'q',\n  'rp',\n  'rt',\n  'ruby',\n  's',\n  'samp',\n  'search',\n  'section',\n  'select',\n  'slot',\n  'small',\n  'span',\n  'strong',\n  'sub',\n  'summary',\n  'sup',\n  'table',\n  'tbody',\n  'td',\n  'template',\n  'textarea',\n  'tfoot',\n  'th',\n  'thead',\n  'time',\n  'tr',\n  'u',\n  'ul',\n  'var',\n  'video',\n  'wbr',\n  'circle',\n  'clipPath',\n  'defs',\n  'ellipse',\n  'feBlend',\n  'feColorMatrix',\n  'feComponentTransfer',\n  'feComposite',\n  'feConvolveMatrix',\n  'feDiffuseLighting',\n  'feDisplacementMap',\n  'feDistantLight',\n  'feDropShadow',\n  'feFlood',\n  'feFuncA',\n  'feFuncB',\n  'feFuncG',\n  'feFuncR',\n  'feGaussianBlur',\n  'feImage',\n  'feMerge',\n  'feMergeNode',\n  'feMorphology',\n  'feOffset',\n  'fePointLight',\n  'feSpecularLighting',\n  'feSpotLight',\n  'feTile',\n  'feTurbulence',\n  'filter',\n  'foreignObject',\n  'g',\n  'image',\n  'line',\n  'linearGradient',\n  'marker',\n  'mask',\n  'path',\n  'pattern',\n  'polygon',\n  'polyline',\n  'radialGradient',\n  'rect',\n  'stop',\n  'svg',\n  'switch',\n  'symbol',\n  'text',\n  'textPath',\n  'tspan',\n  'use',\n] as const;\n\nexport default new Set(elements);\nexport type SupportedHTMLElements = (typeof elements)[number];\n", "// Source: https://www.w3.org/TR/cssom-1/#serialize-an-identifier\n// Control characters and non-letter first symbols are not supported\nconst escapeRegex = /[!\"#$%&'()*+,./:;<=>?@[\\\\\\]^`{|}~-]+/g;\n\nconst dashesAtEnds = /(^-|-$)/g;\n\n/**\n * TODO: Explore using CSS.escape when it becomes more available\n * in evergreen browsers.\n */\nexport default function escape(str: string) {\n  return str // Replace all possible CSS selectors\n    .replace(escapeRegex, '-') // Remove extraneous hyphens at the start and end\n    .replace(dashesAtEnds, '');\n}\n", "const AD_REPLACER_R = /(a)(d)/gi;\n\n/* This is the \"capacity\" of our alphabet i.e. 2x26 for all letters plus their capitalised\n * counterparts */\nconst charsLength = 52;\n\n/* start at 75 for 'a' until 'z' (25) and then start at 65 for capitalised letters */\nconst getAlphabeticChar = (code: number) => String.fromCharCode(code + (code > 25 ? 39 : 97));\n\n/* input a number, usually a hash and convert it to base-52 */\nexport default function generateAlphabeticName(code: number) {\n  let name = '';\n  let x;\n\n  /* get a char and divide by alphabet-length */\n  for (x = Math.abs(code); x > charsLength; x = (x / charsLength) | 0) {\n    name = getAlphabeticChar(x % charsLength) + name;\n  }\n\n  return (getAlphabeticChar(x % charsLength) + name).replace(AD_REPLACER_R, '$1-$2');\n}\n", "export const SEED = 5381;\n\n// When we have separate strings it's useful to run a progressive\n// version of djb2 where we pretend that we're still looping over\n// the same string\nexport const phash = (h: number, x: string) => {\n  let i = x.length;\n\n  while (i) {\n    h = (h * 33) ^ x.charCodeAt(--i);\n  }\n\n  return h;\n};\n\n// This is a djb2 hashing function\nexport const hash = (x: string) => {\n  return phash(SEED, x);\n};\n", "import generateAlphabeticName from './generateAlphabeticName';\nimport { hash } from './hash';\n\nexport default function generateComponentId(str: string) {\n  return generateAlphabeticName(hash(str) >>> 0);\n}\n", "import { StyledTarget } from '../types';\n\nexport default function getComponentName(target: StyledTarget<any>) {\n  return (\n    (process.env.NODE_ENV !== 'production' ? typeof target === 'string' && target : false) ||\n    (target as Exclude<StyledTarget<any>, string>).displayName ||\n    (target as Function).name ||\n    'Component'\n  );\n}\n", "import { StyledTarget } from '../types';\n\nexport default function isTag(target: StyledTarget<'web'>): target is string {\n  return (\n    typeof target === 'string' &&\n    (process.env.NODE_ENV !== 'production'\n      ? target.charAt(0) === target.charAt(0).toLowerCase()\n      : true)\n  );\n}\n", "import React from 'react';\nimport { AnyComponent } from '../types';\n\nconst hasSymbol = typeof Symbol === 'function' && Symbol.for;\n\n// copied from react-is\nconst REACT_MEMO_TYPE = hasSymbol ? Symbol.for('react.memo') : 0xead3;\nconst REACT_FORWARD_REF_TYPE = hasSymbol ? Symbol.for('react.forward_ref') : 0xead0;\n\n/**\n * Adapted from hoist-non-react-statics to avoid the react-is dependency.\n */\nconst REACT_STATICS = {\n  childContextTypes: true,\n  contextType: true,\n  contextTypes: true,\n  defaultProps: true,\n  displayName: true,\n  getDefaultProps: true,\n  getDerivedStateFromError: true,\n  getDerivedStateFromProps: true,\n  mixins: true,\n  propTypes: true,\n  type: true,\n};\n\nconst KNOWN_STATICS = {\n  name: true,\n  length: true,\n  prototype: true,\n  caller: true,\n  callee: true,\n  arguments: true,\n  arity: true,\n};\n\nconst FORWARD_REF_STATICS = {\n  $$typeof: true,\n  render: true,\n  defaultProps: true,\n  displayName: true,\n  propTypes: true,\n};\n\nconst MEMO_STATICS = {\n  $$typeof: true,\n  compare: true,\n  defaultProps: true,\n  displayName: true,\n  propTypes: true,\n  type: true,\n};\n\nconst TYPE_STATICS = {\n  [REACT_FORWARD_REF_TYPE]: FORWARD_REF_STATICS,\n  [REACT_MEMO_TYPE]: MEMO_STATICS,\n};\n\ntype OmniComponent = AnyComponent;\n\n// adapted from react-is\nfunction isMemo(\n  object: OmniComponent | React.MemoExoticComponent<any>\n): object is React.MemoExoticComponent<any> {\n  const $$typeofType = 'type' in object && object.type.$$typeof;\n\n  return $$typeofType === REACT_MEMO_TYPE;\n}\n\nfunction getStatics(component: OmniComponent) {\n  // React v16.11 and below\n  if (isMemo(component)) {\n    return MEMO_STATICS;\n  }\n\n  // React v16.12 and above\n  return '$$typeof' in component\n    ? TYPE_STATICS[component['$$typeof'] as unknown as string]\n    : REACT_STATICS;\n}\n\nconst defineProperty = Object.defineProperty;\nconst getOwnPropertyNames = Object.getOwnPropertyNames;\nconst getOwnPropertySymbols = Object.getOwnPropertySymbols;\nconst getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\nconst getPrototypeOf = Object.getPrototypeOf;\nconst objectPrototype = Object.prototype;\n\ntype ExcludeList = {\n  [key: string]: true;\n};\n\nexport type NonReactStatics<S extends OmniComponent, C extends ExcludeList = {}> = {\n  [key in Exclude<\n    keyof S,\n    S extends React.MemoExoticComponent<any>\n      ? keyof typeof MEMO_STATICS | keyof C\n      : S extends React.ForwardRefExoticComponent<any>\n        ? keyof typeof FORWARD_REF_STATICS | keyof C\n        : keyof typeof REACT_STATICS | keyof typeof KNOWN_STATICS | keyof C\n  >]: S[key];\n};\n\nexport default function hoistNonReactStatics<\n  T extends OmniComponent,\n  S extends OmniComponent,\n  C extends ExcludeList = {},\n>(targetComponent: T, sourceComponent: S, excludelist?: C | undefined) {\n  if (typeof sourceComponent !== 'string') {\n    // don't hoist over string (html) components\n\n    if (objectPrototype) {\n      const inheritedComponent = getPrototypeOf(sourceComponent);\n      if (inheritedComponent && inheritedComponent !== objectPrototype) {\n        hoistNonReactStatics(targetComponent, inheritedComponent, excludelist);\n      }\n    }\n\n    let keys: (String | Symbol)[] = getOwnPropertyNames(sourceComponent);\n\n    if (getOwnPropertySymbols) {\n      keys = keys.concat(getOwnPropertySymbols(sourceComponent));\n    }\n\n    const targetStatics = getStatics(targetComponent);\n    const sourceStatics = getStatics(sourceComponent);\n\n    for (let i = 0; i < keys.length; ++i) {\n      const key = keys[i] as unknown as string;\n      if (\n        !(key in KNOWN_STATICS) &&\n        !(excludelist && excludelist[key]) &&\n        !(sourceStatics && key in sourceStatics) &&\n        !(targetStatics && key in targetStatics)\n      ) {\n        const descriptor = getOwnPropertyDescriptor(sourceComponent, key);\n\n        try {\n          // Avoid failures from read-only properties\n          defineProperty(targetComponent, key, descriptor!);\n        } catch (e) {\n          /* ignore */\n        }\n      }\n    }\n  }\n\n  return targetComponent as T & NonReactStatics<S, C>;\n}\n", "export default function isFunction(test: any): test is Function {\n  return typeof test === 'function';\n}\n", "import { StyledComponentBrand } from '../types';\n\nexport default function isStyledComponent(target: any): target is StyledComponentBrand {\n  return typeof target === 'object' && 'styledComponentId' in target;\n}\n", "/**\n * Convenience function for joining strings to form className chains\n */\nexport function joinStrings(a?: string | undefined, b?: string | undefined): string {\n  return a && b ? `${a} ${b}` : a || b || '';\n}\n\nexport function joinStringArray(arr: string[], sep?: string | undefined): string {\n  if (arr.length === 0) {\n    return '';\n  }\n\n  let result = arr[0];\n  for (let i = 1; i < arr.length; i++) {\n    result += sep ? sep + arr[i] : arr[i];\n  }\n  return result;\n}\n", "export default function isPlainObject(x: any): x is Record<any, any> {\n  return (\n    x !== null &&\n    typeof x === 'object' &&\n    x.constructor.name === Object.name &&\n    /* check for reasonable markers that the object isn't an element for react & preact/compat */\n    !('props' in x && x.$$typeof)\n  );\n}\n", "import isPlainObject from './isPlainObject';\n\nfunction mixinRecursively(target: any, source: any, forceMerge = false) {\n  /* only merge into POJOs, Arrays, but for top level objects only\n   * allow to merge into anything by passing forceMerge = true */\n  if (!forceMerge && !isPlainObject(target) && !Array.isArray(target)) {\n    return source;\n  }\n\n  if (Array.isArray(source)) {\n    for (let key = 0; key < source.length; key++) {\n      target[key] = mixinRecursively(target[key], source[key]);\n    }\n  } else if (isPlainObject(source)) {\n    for (const key in source) {\n      target[key] = mixinRecursively(target[key], source[key]);\n    }\n  }\n\n  return target;\n}\n\n/**\n * Arrays & POJOs merged recursively, other objects and value types are overridden\n * If target is not a POJO or an Array, it will get source properties injected via shallow merge\n * Source objects applied left to right.  Mutates & returns target.  Similar to lodash merge.\n */\nexport default function mixinDeep(target: any, ...sources: any[]) {\n  for (const source of sources) {\n    mixinRecursively(target, source, true);\n  }\n\n  return target;\n}\n", "/**\n * If the Object prototype is frozen, the \"toString\" property is non-writable. This means that any objects which inherit this property\n * cannot have the property changed using a \"=\" assignment operator. If using strict mode, attempting that will cause an error. If not using\n * strict mode, attempting that will be silently ignored.\n *\n * If the Object prototype is frozen, inherited non-writable properties can still be shadowed using one of two mechanisms:\n *\n *  1. ES6 class methods: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Classes#methods\n *  2. Using the `Object.defineProperty()` static method:\n *     https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty\n *\n * However, this project uses Babel to transpile ES6 classes, and transforms ES6 class methods to use the assignment operator instead:\n * https://babeljs.io/docs/babel-plugin-transform-class-properties#options\n *\n * Therefore, the most compatible way to shadow the prototype's \"toString\" property is to define a new \"toString\" property on this object.\n */\nexport function setToString(object: object, toStringFn: () => string) {\n  Object.defineProperty(object, 'toString', { value: toStringFn });\n}\n", "export default {\n  '1': 'Cannot create styled-component for component: %s.\\n\\n',\n  '2': \"Can't collect styles once you've consumed a `ServerStyleSheet`'s styles! `ServerStyleSheet` is a one off instance for each server-side render cycle.\\n\\n- Are you trying to reuse it across renders?\\n- Are you accidentally calling collectStyles twice?\\n\\n\",\n  '3': 'Streaming SSR is only supported in a Node.js environment; Please do not try to call this method in the browser.\\n\\n',\n  '4': 'The `StyleSheetManager` expects a valid target or sheet prop!\\n\\n- Does this error occur on the client and is your target falsy?\\n- Does this error occur on the server and is the sheet falsy?\\n\\n',\n  '5': 'The clone method cannot be used on the client!\\n\\n- Are you running in a client-like environment on the server?\\n- Are you trying to run SSR on the client?\\n\\n',\n  '6': \"Trying to insert a new style tag, but the given Node is unmounted!\\n\\n- Are you using a custom target that isn't mounted?\\n- Does your document not have a valid head element?\\n- Have you accidentally removed a style tag manually?\\n\\n\",\n  '7': 'ThemeProvider: Please return an object from your \"theme\" prop function, e.g.\\n\\n```js\\ntheme={() => ({})}\\n```\\n\\n',\n  '8': 'ThemeProvider: Please make your \"theme\" prop an object.\\n\\n',\n  '9': 'Missing document `<head>`\\n\\n',\n  '10': 'Cannot find a StyleSheet instance. Usually this happens if there are multiple copies of styled-components loaded at once. Check out this issue for how to troubleshoot and fix the common cases where this situation can happen: https://github.com/styled-components/styled-components/issues/1941#issuecomment-417862021\\n\\n',\n  '11': '_This error was replaced with a dev-time warning, it will be deleted for v4 final._ [createGlobalStyle] received children which will not be rendered. Please use the component without passing children elements.\\n\\n',\n  '12': 'It seems you are interpolating a keyframe declaration (%s) into an untagged string. This was supported in styled-components v3, but is not longer supported in v4 as keyframes are now injected on-demand. Please wrap your string in the css\\\\`\\\\` helper which ensures the styles are injected correctly. See https://www.styled-components.com/docs/api#css\\n\\n',\n  '13': '%s is not a styled component and cannot be referred to via component selector. See https://www.styled-components.com/docs/advanced#referring-to-other-components for more details.\\n\\n',\n  '14': 'ThemeProvider: \"theme\" prop is required.\\n\\n',\n  '15': \"A stylis plugin has been supplied that is not named. We need a name for each plugin to be able to prevent styling collisions between different stylis configurations within the same app. Before you pass your plugin to `<StyleSheetManager stylisPlugins={[]}>`, please make sure each plugin is uniquely-named, e.g.\\n\\n```js\\nObject.defineProperty(importedPlugin, 'name', { value: 'some-unique-name' });\\n```\\n\\n\",\n  '16': \"Reached the limit of how many styled components may be created at group %s.\\nYou may only create up to 1,073,741,824 components. If you're creating components dynamically,\\nas for instance in your render method then you may be running into this limitation.\\n\\n\",\n  '17': \"CSSStyleSheet could not be found on HTMLStyleElement.\\nHas styled-components' style tag been unmounted or altered by another script?\\n\",\n  '18': 'ThemeProvider: Please make sure your useTheme hook is within a `<ThemeProvider>`',\n};\n", "import { Dict } from '../types';\nimport errorMap from './errors';\n\nconst ERRORS: Dict<any> = process.env.NODE_ENV !== 'production' ? errorMap : {};\n\n/**\n * super basic version of sprintf\n */\nfunction format(...args: [string, ...any]) {\n  let a = args[0];\n  const b = [];\n\n  for (let c = 1, len = args.length; c < len; c += 1) {\n    b.push(args[c]);\n  }\n\n  b.forEach(d => {\n    a = a.replace(/%[a-z]/, d);\n  });\n\n  return a;\n}\n\n/**\n * Create an error file out of errors.md for development and a simple web link to the full errors\n * in production mode.\n */\nexport default function throwStyledComponentsError(\n  code: string | number,\n  ...interpolations: any[]\n) {\n  if (process.env.NODE_ENV === 'production') {\n    return new Error(\n      `An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#${code} for more information.${\n        interpolations.length > 0 ? ` Args: ${interpolations.join(', ')}` : ''\n      }`\n    );\n  } else {\n    return new Error(format(ERRORS[code], ...interpolations).trim());\n  }\n}\n", "import { SPLITTER } from '../constants';\nimport styledError from '../utils/error';\nimport { GroupedTag, Tag } from './types';\n\n/** Create a GroupedTag with an underlying Tag implementation */\nexport const makeGroupedTag = (tag: Tag) => {\n  return new DefaultGroupedTag(tag);\n};\n\nconst BASE_SIZE = 1 << 9;\n\nconst DefaultGroupedTag = class DefaultGroupedTag implements GroupedTag {\n  groupSizes: Uint32Array;\n  length: number;\n  tag: Tag;\n\n  constructor(tag: Tag) {\n    this.groupSizes = new Uint32Array(BASE_SIZE);\n    this.length = BASE_SIZE;\n    this.tag = tag;\n  }\n\n  indexOfGroup(group: number) {\n    let index = 0;\n    for (let i = 0; i < group; i++) {\n      index += this.groupSizes[i];\n    }\n\n    return index;\n  }\n\n  insertRules(group: number, rules: string[]) {\n    if (group >= this.groupSizes.length) {\n      const oldBuffer = this.groupSizes;\n      const oldSize = oldBuffer.length;\n\n      let newSize = oldSize;\n      while (group >= newSize) {\n        newSize <<= 1;\n        if (newSize < 0) {\n          throw styledError(16, `${group}`);\n        }\n      }\n\n      this.groupSizes = new Uint32Array(newSize);\n      this.groupSizes.set(oldBuffer);\n      this.length = newSize;\n\n      for (let i = oldSize; i < newSize; i++) {\n        this.groupSizes[i] = 0;\n      }\n    }\n\n    let ruleIndex = this.indexOfGroup(group + 1);\n\n    for (let i = 0, l = rules.length; i < l; i++) {\n      if (this.tag.insertRule(ruleIndex, rules[i])) {\n        this.groupSizes[group]++;\n        ruleIndex++;\n      }\n    }\n  }\n\n  clearGroup(group: number) {\n    if (group < this.length) {\n      const length = this.groupSizes[group];\n      const startIndex = this.indexOfGroup(group);\n      const endIndex = startIndex + length;\n\n      this.groupSizes[group] = 0;\n\n      for (let i = startIndex; i < endIndex; i++) {\n        this.tag.deleteRule(startIndex);\n      }\n    }\n  }\n\n  getGroup(group: number) {\n    let css = '';\n    if (group >= this.length || this.groupSizes[group] === 0) {\n      return css;\n    }\n\n    const length = this.groupSizes[group];\n    const startIndex = this.indexOfGroup(group);\n    const endIndex = startIndex + length;\n\n    for (let i = startIndex; i < endIndex; i++) {\n      css += `${this.tag.getRule(i)}${SPLITTER}`;\n    }\n\n    return css;\n  }\n};\n", "import styledError from '../utils/error';\n\nconst MAX_SMI = 1 << (31 - 1);\n\nlet groupIDRegister: Map<string, number> = new Map();\nlet reverseRegister: Map<number, string> = new Map();\nlet nextFreeGroup = 1;\n\nexport const resetGroupIds = () => {\n  groupIDRegister = new Map();\n  reverseRegister = new Map();\n  nextFreeGroup = 1;\n};\n\nexport const getGroupForId = (id: string): number => {\n  if (groupIDRegister.has(id)) {\n    return groupIDRegister.get(id) as any;\n  }\n\n  while (reverseRegister.has(nextFreeGroup)) {\n    nextFreeGroup++;\n  }\n\n  const group = nextFreeGroup++;\n\n  if (process.env.NODE_ENV !== 'production' && ((group | 0) < 0 || group > MAX_SMI)) {\n    throw styledError(16, `${group}`);\n  }\n\n  groupIDRegister.set(id, group);\n  reverseRegister.set(group, id);\n  return group;\n};\n\nexport const getIdForGroup = (group: number): void | string => {\n  return reverseRegister.get(group);\n};\n\nexport const setGroupForId = (id: string, group: number) => {\n  // move pointer\n  nextFreeGroup = group + 1;\n\n  groupIDRegister.set(id, group);\n  reverseRegister.set(group, id);\n};\n", "import { SC_ATTR, SC_ATTR_ACTIVE, SC_ATTR_VERSION, SC_VERSION, SPLITTER } from '../constants';\nimport { getIdForGroup, setGroupForId } from './GroupIDAllocator';\nimport { Sheet } from './types';\n\nconst SELECTOR = `style[${SC_ATTR}][${SC_ATTR_VERSION}=\"${SC_VERSION}\"]`;\nconst MARKER_RE = new RegExp(`^${SC_ATTR}\\\\.g(\\\\d+)\\\\[id=\"([\\\\w\\\\d-]+)\"\\\\].*?\"([^\"]*)`);\n\nexport const outputSheet = (sheet: Sheet) => {\n  const tag = sheet.getTag();\n  const { length } = tag;\n\n  let css = '';\n  for (let group = 0; group < length; group++) {\n    const id = getIdForGroup(group);\n    if (id === undefined) continue;\n\n    const names = sheet.names.get(id);\n    const rules = tag.getGroup(group);\n    if (names === undefined || !names.size || rules.length === 0) continue;\n\n    const selector = `${SC_ATTR}.g${group}[id=\"${id}\"]`;\n\n    let content = '';\n    if (names !== undefined) {\n      names.forEach(name => {\n        if (name.length > 0) {\n          content += `${name},`;\n        }\n      });\n    }\n\n    // NOTE: It's easier to collect rules and have the marker\n    // after the actual rules to simplify the rehydration\n    css += `${rules}${selector}{content:\"${content}\"}${SPLITTER}`;\n  }\n\n  return css;\n};\n\nconst rehydrateNamesFromContent = (sheet: Sheet, id: string, content: string) => {\n  const names = content.split(',');\n  let name;\n\n  for (let i = 0, l = names.length; i < l; i++) {\n    if ((name = names[i])) {\n      sheet.registerName(id, name);\n    }\n  }\n};\n\nconst rehydrateSheetFromTag = (sheet: Sheet, style: HTMLStyleElement) => {\n  const parts = (style.textContent ?? '').split(SPLITTER);\n  const rules: string[] = [];\n\n  for (let i = 0, l = parts.length; i < l; i++) {\n    const part = parts[i].trim();\n    if (!part) continue;\n\n    const marker = part.match(MARKER_RE);\n\n    if (marker) {\n      const group = parseInt(marker[1], 10) | 0;\n      const id = marker[2];\n\n      if (group !== 0) {\n        // Rehydrate componentId to group index mapping\n        setGroupForId(id, group);\n        // Rehydrate names and rules\n        // looks like: data-styled.g11[id=\"idA\"]{content:\"nameA,\"}\n        rehydrateNamesFromContent(sheet, id, marker[3]);\n        sheet.getTag().insertRules(group, rules);\n      }\n\n      rules.length = 0;\n    } else {\n      rules.push(part);\n    }\n  }\n};\n\nexport const rehydrateSheet = (sheet: Sheet) => {\n  const nodes = document.querySelectorAll(SELECTOR);\n\n  for (let i = 0, l = nodes.length; i < l; i++) {\n    const node = nodes[i] as any as HTMLStyleElement;\n    if (node && node.getAttribute(SC_ATTR) !== SC_ATTR_ACTIVE) {\n      rehydrateSheetFromTag(sheet, node);\n\n      if (node.parentNode) {\n        node.parentNode.removeChild(node);\n      }\n    }\n  }\n};\n", "declare let __webpack_nonce__: string;\n\nexport default function getNonce() {\n  return typeof __webpack_nonce__ !== 'undefined' ? __webpack_nonce__ : null;\n}\n", "import { SC_ATTR, SC_ATTR_ACTIVE, SC_ATTR_VERSION, SC_VERSION } from '../constants';\nimport { InsertionTarget } from '../types';\nimport styledError from '../utils/error';\nimport getNonce from '../utils/nonce';\n\n/** Find last style element if any inside target */\nconst findLastStyleTag = (target: InsertionTarget): void | HTMLStyleElement => {\n  const arr = Array.from(target.querySelectorAll<HTMLStyleElement>(`style[${SC_ATTR}]`));\n\n  return arr[arr.length - 1];\n};\n\n/** Create a style element inside `target` or <head> after the last */\nexport const makeStyleTag = (target?: InsertionTarget | undefined): HTMLStyleElement => {\n  const head = document.head;\n  const parent = target || head;\n  const style = document.createElement('style');\n  const prevStyle = findLastStyleTag(parent);\n  const nextSibling = prevStyle !== undefined ? prevStyle.nextSibling : null;\n\n  style.setAttribute(SC_ATTR, SC_ATTR_ACTIVE);\n  style.setAttribute(SC_ATTR_VERSION, SC_VERSION);\n\n  const nonce = getNonce();\n\n  if (nonce) style.setAttribute('nonce', nonce);\n\n  parent.insertBefore(style, nextSibling);\n\n  return style;\n};\n\n/** Get the CSSStyleSheet instance for a given style element */\nexport const getSheet = (tag: HTMLStyleElement): CSSStyleSheet => {\n  if (tag.sheet) {\n    return tag.sheet as any as CSSStyleSheet;\n  }\n\n  // Avoid Firefox quirk where the style element might not have a sheet property\n  const { styleSheets } = document;\n  for (let i = 0, l = styleSheets.length; i < l; i++) {\n    const sheet = styleSheets[i];\n    if (sheet.ownerNode === tag) {\n      return sheet as any as CSSStyleSheet;\n    }\n  }\n\n  throw styledError(17);\n};\n\n/** Remove a GlobalStyle's SSR-rendered inline style tag(s) from the DOM */\nexport const removeGlobalStyleTag = (componentId: string): void => {\n  if (typeof document === 'undefined') return;\n\n  const styleTags = document.querySelectorAll(`style[data-styled-global=\"${componentId}\"]`);\n  styleTags.forEach(tag => tag.remove());\n};\n", "import { InsertionTarget } from '../types';\nimport { getSheet, makeStyleTag } from './dom';\nimport { SheetOptions, Tag } from './types';\n\n/** Create a CSSStyleSheet-like tag depending on the environment */\nexport const makeTag = ({ isServer, useCSSOMInjection, target }: SheetOptions) => {\n  if (isServer) {\n    return new VirtualTag(target);\n  } else if (useCSSOMInjection) {\n    return new CSSOMTag(target);\n  } else {\n    return new TextTag(target);\n  }\n};\n\nexport const CSSOMTag = class CSSOMTag implements Tag {\n  element: HTMLStyleElement;\n\n  sheet: CSSStyleSheet;\n\n  length: number;\n\n  constructor(target?: InsertionTarget | undefined) {\n    this.element = makeStyleTag(target);\n\n    // Avoid Edge bug where empty style elements don't create sheets\n    this.element.appendChild(document.createTextNode(''));\n\n    this.sheet = getSheet(this.element);\n    this.length = 0;\n  }\n\n  insertRule(index: number, rule: string): boolean {\n    try {\n      this.sheet.insertRule(rule, index);\n      this.length++;\n      return true;\n    } catch (_error) {\n      return false;\n    }\n  }\n\n  deleteRule(index: number): void {\n    this.sheet.deleteRule(index);\n    this.length--;\n  }\n\n  getRule(index: number): string {\n    const rule = this.sheet.cssRules[index];\n\n    // Avoid IE11 quirk where cssText is inaccessible on some invalid rules\n    if (rule && rule.cssText) {\n      return rule.cssText;\n    } else {\n      return '';\n    }\n  }\n};\n\n/** A Tag that emulates the CSSStyleSheet API but uses text nodes */\nexport const TextTag = class TextTag implements Tag {\n  element: HTMLStyleElement;\n  nodes: NodeListOf<Node>;\n  length: number;\n\n  constructor(target?: InsertionTarget | undefined) {\n    this.element = makeStyleTag(target);\n    this.nodes = this.element.childNodes;\n    this.length = 0;\n  }\n\n  insertRule(index: number, rule: string) {\n    if (index <= this.length && index >= 0) {\n      const node = document.createTextNode(rule);\n      const refNode = this.nodes[index];\n      this.element.insertBefore(node, refNode || null);\n      this.length++;\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  deleteRule(index: number) {\n    this.element.removeChild(this.nodes[index]);\n    this.length--;\n  }\n\n  getRule(index: number) {\n    if (index < this.length) {\n      return this.nodes[index].textContent as string;\n    } else {\n      return '';\n    }\n  }\n};\n\n/** A completely virtual (server-side) Tag that doesn't manipulate the DOM */\nexport const VirtualTag = class VirtualTag implements Tag {\n  rules: string[];\n\n  length: number;\n\n  constructor(_target?: InsertionTarget | undefined) {\n    this.rules = [];\n    this.length = 0;\n  }\n\n  insertRule(index: number, rule: string) {\n    if (index <= this.length) {\n      this.rules.splice(index, 0, rule);\n      this.length++;\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  deleteRule(index: number) {\n    this.rules.splice(index, 1);\n    this.length--;\n  }\n\n  getRule(index: number) {\n    if (index < this.length) {\n      return this.rules[index];\n    } else {\n      return '';\n    }\n  }\n};\n", "import { DISABLE_SPEEDY, IS_BROWSER } from '../constants';\nimport { InsertionTarget } from '../types';\nimport { EMPTY_OBJECT } from '../utils/empties';\nimport { setToString } from '../utils/setToString';\nimport { makeGroupedTag } from './GroupedTag';\nimport { getGroupForId } from './GroupIDAllocator';\nimport { outputSheet, rehydrateSheet } from './Rehydration';\nimport { makeTag } from './Tag';\nimport { GroupedTag, Sheet, SheetOptions } from './types';\n\nlet SHOULD_REHYDRATE = IS_BROWSER;\n\ntype SheetConstructorArgs = {\n  isServer?: boolean;\n  useCSSOMInjection?: boolean;\n  target?: InsertionTarget | undefined;\n};\n\ntype GlobalStylesAllocationMap = {\n  [key: string]: number;\n};\ntype NamesAllocationMap = Map<string, Set<string>>;\n\nconst defaultOptions: SheetOptions = {\n  isServer: !IS_BROWSER,\n  useCSSOMInjection: !DISABLE_SPEEDY,\n};\n\n/** Contains the main stylesheet logic for stringification and caching */\nexport default class StyleSheet implements Sheet {\n  gs: GlobalStylesAllocationMap;\n  names: NamesAllocationMap;\n  options: SheetOptions;\n  server: boolean;\n  tag?: GroupedTag | undefined;\n\n  /** Register a group ID to give it an index */\n  static registerId(id: string): number {\n    return getGroupForId(id);\n  }\n\n  constructor(\n    options: SheetConstructorArgs = EMPTY_OBJECT as Object,\n    globalStyles: GlobalStylesAllocationMap = {},\n    names?: NamesAllocationMap | undefined\n  ) {\n    this.options = {\n      ...defaultOptions,\n      ...options,\n    };\n\n    this.gs = globalStyles;\n    this.names = new Map(names as NamesAllocationMap);\n    this.server = !!options.isServer;\n\n    // We rehydrate only once and use the sheet that is created first\n    if (!this.server && IS_BROWSER && SHOULD_REHYDRATE) {\n      SHOULD_REHYDRATE = false;\n      rehydrateSheet(this);\n    }\n\n    setToString(this, () => outputSheet(this));\n  }\n\n  rehydrate(): void {\n    if (!this.server && IS_BROWSER) {\n      rehydrateSheet(this);\n    }\n  }\n\n  reconstructWithOptions(options: SheetConstructorArgs, withNames = true) {\n    return new StyleSheet(\n      { ...this.options, ...options },\n      this.gs,\n      (withNames && this.names) || undefined\n    );\n  }\n\n  allocateGSInstance(id: string) {\n    return (this.gs[id] = (this.gs[id] || 0) + 1);\n  }\n\n  /** Lazily initialises a GroupedTag for when it's actually needed */\n  getTag() {\n    return this.tag || (this.tag = makeGroupedTag(makeTag(this.options)));\n  }\n\n  /** Check whether a name is known for caching */\n  hasNameForId(id: string, name: string): boolean {\n    return this.names.has(id) && (this.names.get(id) as any).has(name);\n  }\n\n  /** Mark a group's name as known for caching */\n  registerName(id: string, name: string) {\n    getGroupForId(id);\n\n    if (!this.names.has(id)) {\n      const groupNames = new Set<string>();\n      groupNames.add(name);\n      this.names.set(id, groupNames);\n    } else {\n      (this.names.get(id) as any).add(name);\n    }\n  }\n\n  /** Insert new rules which also marks the name as known */\n  insertRules(id: string, name: string, rules: string | string[]) {\n    this.registerName(id, name);\n    this.getTag().insertRules(getGroupForId(id), rules);\n  }\n\n  /** Clears all cached names for a given group ID */\n  clearNames(id: string) {\n    if (this.names.has(id)) {\n      (this.names.get(id) as any).clear();\n    }\n  }\n\n  /** Clears all rules for a given group ID */\n  clearRules(id: string) {\n    this.getTag().clearGroup(getGroupForId(id));\n    this.clearNames(id);\n  }\n\n  /** Clears the entire tag which deletes all rules but not its names */\n  clearTag() {\n    // NOTE: This does not clear the names, since it's only used during SSR\n    // so that we can continuously output only new rules\n    this.tag = undefined;\n  }\n}\n", "import * as stylis from 'stylis';\nimport { Stringifier } from '../types';\nimport { EMPTY_ARRAY, EMPTY_OBJECT } from './empties';\nimport throwStyledError from './error';\nimport { SEED, phash } from './hash';\n\nconst AMP_REGEX = /&/g;\n\n// Character codes for fast comparison\nconst DOUBLE_QUOTE = 34; // \"\nconst SINGLE_QUOTE = 39; // '\nconst SLASH = 47; // /\nconst ASTERISK = 42; // *\nconst BACKSLASH = 92; // \\\nconst OPEN_BRACE = 123; // {\nconst CLOSE_BRACE = 125; // }\nconst SEMICOLON = 59; // ;\nconst NEWLINE = 10; // \\n\nconst OPEN_PAREN = 40; // (\nconst CLOSE_PAREN = 41; // )\n\n/**\n * Strips JS-style line comments (//) from CSS, handling comments anywhere\n * in the line while preserving strings, url() contents, and valid CSS.\n * Optimized with early bail and charCodeAt for performance.\n */\nfunction stripLineComments(css: string): string {\n  // Fast path: no // means no line comments\n  if (css.indexOf('//') === -1) return css;\n\n  const len = css.length;\n  const parts: string[] = [];\n  let start = 0;\n  let i = 0;\n  let inString = 0; // 0 = none, DOUBLE_QUOTE or SINGLE_QUOTE when in string\n  let urlDepth = 0; // Track nesting depth inside url()\n\n  while (i < len) {\n    const code = css.charCodeAt(i);\n\n    // Track string state\n    if (\n      (code === DOUBLE_QUOTE || code === SINGLE_QUOTE) &&\n      (i === 0 || css.charCodeAt(i - 1) !== BACKSLASH)\n    ) {\n      if (inString === 0) {\n        inString = code;\n      } else if (inString === code) {\n        inString = 0;\n      }\n      i++;\n      continue;\n    }\n\n    // Skip string content\n    if (inString !== 0) {\n      i++;\n      continue;\n    }\n\n    // Track url() context - check for 'url(' (case insensitive via | 32)\n    if (\n      code === OPEN_PAREN &&\n      i >= 3 &&\n      (css.charCodeAt(i - 1) | 32) === 108 && // l\n      (css.charCodeAt(i - 2) | 32) === 114 && // r\n      (css.charCodeAt(i - 3) | 32) === 117 // u\n    ) {\n      urlDepth = 1;\n      i++;\n      continue;\n    }\n\n    // Track nested parentheses inside url()\n    if (urlDepth > 0) {\n      if (code === CLOSE_PAREN) urlDepth--;\n      else if (code === OPEN_PAREN) urlDepth++;\n      i++;\n      continue;\n    }\n\n    // Check for line comment (only when not in url())\n    if (code === SLASH && i + 1 < len && css.charCodeAt(i + 1) === SLASH) {\n      if (i > start) parts.push(css.substring(start, i));\n      // Skip to end of line\n      while (i < len && css.charCodeAt(i) !== NEWLINE) {\n        i++;\n      }\n      start = i;\n      continue;\n    }\n\n    i++;\n  }\n\n  // No comments found after indexOf check means // was in a string or url()\n  if (start === 0) return css;\n  if (start < len) parts.push(css.substring(start));\n  return parts.join('');\n}\n\n/**\n * Checks if CSS has unbalanced closing braces that would cause stylis\n * to prematurely close rule blocks.\n * Optimized with early bail and charCodeAt for performance.\n */\nfunction hasUnbalancedBraces(css: string): boolean {\n  // Fast path: no closing brace means can't have unbalanced braces\n  if (css.indexOf('}') === -1) return false;\n\n  const len = css.length;\n  let depth = 0;\n  let inString = 0; // 0 = none, char code when in string\n  let inComment = false;\n\n  for (let i = 0; i < len; i++) {\n    const code = css.charCodeAt(i);\n\n    // Handle CSS comments\n    if (inString === 0 && !inComment && code === SLASH && css.charCodeAt(i + 1) === ASTERISK) {\n      inComment = true;\n      i++;\n      continue;\n    }\n    if (inComment) {\n      if (code === ASTERISK && css.charCodeAt(i + 1) === SLASH) {\n        inComment = false;\n        i++;\n      }\n      continue;\n    }\n\n    // Track string state\n    if (\n      (code === DOUBLE_QUOTE || code === SINGLE_QUOTE) &&\n      (i === 0 || css.charCodeAt(i - 1) !== BACKSLASH)\n    ) {\n      if (inString === 0) {\n        inString = code;\n      } else if (inString === code) {\n        inString = 0;\n      }\n      continue;\n    }\n    if (inString !== 0) continue;\n\n    // Track brace depth\n    if (code === OPEN_BRACE) {\n      depth++;\n    } else if (code === CLOSE_BRACE) {\n      depth--;\n      if (depth < 0) return true;\n    }\n  }\n\n  return depth !== 0 || inString !== 0;\n}\n\n/**\n * Sanitizes CSS by removing declarations with unbalanced braces.\n * This contains invalid syntax to just the affected declaration.\n * Optimized with charCodeAt for performance.\n */\nfunction sanitizeCSS(css: string): string {\n  // Fast path: valid CSS passes through unchanged\n  if (!hasUnbalancedBraces(css)) {\n    return css;\n  }\n\n  const len = css.length;\n  let result = '';\n  let declStart = 0;\n  let braceDepth = 0;\n  let inString = 0;\n  let inComment = false;\n\n  for (let i = 0; i < len; i++) {\n    const code = css.charCodeAt(i);\n\n    // Handle CSS comments\n    if (inString === 0 && !inComment && code === SLASH && css.charCodeAt(i + 1) === ASTERISK) {\n      inComment = true;\n      i++;\n      continue;\n    }\n    if (inComment) {\n      if (code === ASTERISK && css.charCodeAt(i + 1) === SLASH) {\n        inComment = false;\n        i++;\n      }\n      continue;\n    }\n\n    // Track string state\n    if (\n      (code === DOUBLE_QUOTE || code === SINGLE_QUOTE) &&\n      (i === 0 || css.charCodeAt(i - 1) !== BACKSLASH)\n    ) {\n      if (inString === 0) {\n        inString = code;\n      } else if (inString === code) {\n        inString = 0;\n      }\n      continue;\n    }\n    if (inString !== 0) continue;\n\n    if (code === OPEN_BRACE) {\n      braceDepth++;\n    } else if (code === CLOSE_BRACE) {\n      braceDepth--;\n\n      if (braceDepth < 0) {\n        // Extra closing brace - skip to next semicolon or newline\n        let skipEnd = i + 1;\n        while (skipEnd < len) {\n          const skipCode = css.charCodeAt(skipEnd);\n          if (skipCode === SEMICOLON || skipCode === NEWLINE) break;\n          skipEnd++;\n        }\n        if (skipEnd < len && css.charCodeAt(skipEnd) === SEMICOLON) skipEnd++;\n\n        braceDepth = 0;\n        i = skipEnd - 1;\n        declStart = skipEnd;\n        continue;\n      }\n\n      if (braceDepth === 0) {\n        result += css.substring(declStart, i + 1);\n        declStart = i + 1;\n      }\n    } else if (code === SEMICOLON && braceDepth === 0) {\n      result += css.substring(declStart, i + 1);\n      declStart = i + 1;\n    }\n  }\n\n  // Add remaining valid content\n  if (declStart < len) {\n    const remaining = css.substring(declStart);\n    if (!hasUnbalancedBraces(remaining)) {\n      result += remaining;\n    }\n  }\n\n  return result;\n}\n\nexport type ICreateStylisInstance = {\n  options?: { namespace?: string | undefined; prefix?: boolean | undefined } | undefined;\n  plugins?: stylis.Middleware[] | undefined;\n};\n\n/**\n * Takes an element and recurses through it's rules added the namespace to the start of each selector.\n * Takes into account media queries by recursing through child rules if they are present.\n */\nfunction recursivelySetNamepace(compiled: stylis.Element[], namespace: String): stylis.Element[] {\n  return compiled.map(rule => {\n    if (rule.type === 'rule') {\n      // add the namespace to the start\n      rule.value = `${namespace} ${rule.value}`;\n      // add the namespace after each comma for subsequent selectors.\n      rule.value = rule.value.replaceAll(',', `,${namespace} `);\n      rule.props = (rule.props as string[]).map(prop => {\n        return `${namespace} ${prop}`;\n      });\n    }\n\n    if (Array.isArray(rule.children) && rule.type !== '@keyframes') {\n      rule.children = recursivelySetNamepace(rule.children, namespace);\n    }\n    return rule;\n  });\n}\n\nexport default function createStylisInstance(\n  {\n    options = EMPTY_OBJECT as object,\n    plugins = EMPTY_ARRAY as unknown as stylis.Middleware[],\n  }: ICreateStylisInstance = EMPTY_OBJECT as object\n) {\n  let _componentId: string;\n  let _selector: string;\n  let _selectorRegexp: RegExp;\n\n  const selfReferenceReplacer = (match: string, offset: number, string: string) => {\n    if (\n      /**\n       * We only want to refer to the static class directly if the selector is part of a\n       * self-reference selector `& + & { color: red; }`\n       */\n      string.startsWith(_selector) &&\n      string.endsWith(_selector) &&\n      string.replaceAll(_selector, '').length > 0\n    ) {\n      return `.${_componentId}`;\n    }\n\n    return match;\n  };\n\n  /**\n   * When writing a style like\n   *\n   * & + & {\n   *   color: red;\n   * }\n   *\n   * The second ampersand should be a reference to the static component class. stylis\n   * has no knowledge of static class so we have to intelligently replace the base selector.\n   *\n   * https://github.com/thysultan/stylis.js/tree/v4.0.2#abstract-syntax-structure\n   */\n  const selfReferenceReplacementPlugin: stylis.Middleware = element => {\n    if (element.type === stylis.RULESET && element.value.includes('&')) {\n      (element.props as string[])[0] = element.props[0]\n        // catch any hanging references that stylis missed\n        .replace(AMP_REGEX, _selector)\n        .replace(_selectorRegexp, selfReferenceReplacer);\n    }\n  };\n\n  const middlewares = plugins.slice();\n\n  middlewares.push(selfReferenceReplacementPlugin);\n\n  /**\n   * Enables automatic vendor-prefixing for styles.\n   */\n  if (options.prefix) {\n    middlewares.push(stylis.prefixer);\n  }\n\n  middlewares.push(stylis.stringify);\n\n  const stringifyRules: Stringifier = (\n    css: string,\n    selector = '',\n    /**\n     * This \"prefix\" referes to a _selector_ prefix.\n     */\n    prefix = '',\n    componentId = '&'\n  ) => {\n    // stylis has no concept of state to be passed to plugins\n    // but since JS is single-threaded, we can rely on that to ensure\n    // these properties stay in sync with the current stylis run\n    _componentId = componentId;\n    _selector = selector;\n    _selectorRegexp = new RegExp(`\\\\${_selector}\\\\b`, 'g');\n\n    const flatCSS = sanitizeCSS(stripLineComments(css));\n    let compiled = stylis.compile(\n      prefix || selector ? `${prefix} ${selector} { ${flatCSS} }` : flatCSS\n    );\n\n    if (options.namespace) {\n      compiled = recursivelySetNamepace(compiled, options.namespace);\n    }\n\n    const stack: string[] = [];\n\n    stylis.serialize(\n      compiled,\n      stylis.middleware(middlewares.concat(stylis.rulesheet(value => stack.push(value))))\n    );\n\n    return stack;\n  };\n\n  stringifyRules.hash = plugins.length\n    ? plugins\n        .reduce((acc, plugin) => {\n          if (!plugin.name) {\n            throwStyledError(15);\n          }\n\n          return phash(acc, plugin.name);\n        }, SEED)\n        .toString()\n    : '';\n\n  return stringifyRules;\n}\n", "import React from 'react';\nimport type stylis from 'stylis';\nimport { IS_RSC } from '../constants';\nimport StyleSheet from '../sheet';\nimport { InsertionTarget, ShouldForwardProp, Stringifier } from '../types';\nimport createStylisInstance from '../utils/stylis';\n\nexport const mainSheet: StyleSheet = new StyleSheet();\nexport const mainStylis: Stringifier = createStylisInstance();\n\nexport type IStyleSheetContext = {\n  shouldForwardProp?: ShouldForwardProp<'web'> | undefined;\n  styleSheet: StyleSheet;\n  stylis: Stringifier;\n};\n\nconst defaultContextValue: IStyleSheetContext = {\n  shouldForwardProp: undefined,\n  styleSheet: mainSheet,\n  stylis: mainStylis,\n};\n\n// Create context only if createContext is available, otherwise create a fallback\nexport const StyleSheetContext = !IS_RSC\n  ? React.createContext<IStyleSheetContext>(defaultContextValue)\n  : ({\n      Provider: ({ children }: { children: React.ReactNode; value?: IStyleSheetContext }) =>\n        children,\n      Consumer: ({ children }: { children: (value: IStyleSheetContext) => React.ReactNode }) =>\n        children(defaultContextValue),\n    } as React.Context<IStyleSheetContext>);\n\nexport const StyleSheetConsumer = StyleSheetContext.Consumer;\n\nexport type IStylisContext = Stringifier | void;\nexport const StylisContext = !IS_RSC\n  ? React.createContext<IStylisContext>(undefined)\n  : ({\n      Provider: ({ children }: { children: React.ReactNode; value?: IStylisContext }) => children,\n      Consumer: ({ children }: { children: (value: IStylisContext) => React.ReactNode }) =>\n        children(undefined),\n    } as React.Context<IStylisContext>);\nexport const StylisConsumer = StylisContext.Consumer;\n\nexport function useStyleSheetContext() {\n  // Skip useContext if we're in an RSC environment without context support\n  return !IS_RSC ? React.useContext(StyleSheetContext) : defaultContextValue;\n}\n\nexport type IStyleSheetManager = React.PropsWithChildren<{\n  /**\n   * If desired, you can pass this prop to disable \"speedy\" insertion mode, which\n   * uses the browser [CSSOM APIs](https://developer.mozilla.org/en-US/docs/Web/API/CSSStyleSheet).\n   * When disabled, rules are inserted as simple text into style blocks.\n   */\n  disableCSSOMInjection?: undefined | boolean;\n  /**\n   * If you are working exclusively with modern browsers, vendor prefixes can often be omitted\n   * to reduce the weight of CSS on the page.\n   */\n  enableVendorPrefixes?: undefined | boolean;\n  /**\n   * Provide an optional selector to be prepended to all generated style rules.\n   */\n  namespace?: undefined | string;\n  /**\n   * Create and provide your own `StyleSheet` if necessary for advanced SSR scenarios.\n   */\n  sheet?: undefined | StyleSheet;\n  /**\n   * Starting in v6, styled-components no longer does its own prop validation\n   * and recommends use of transient props \"$prop\" to pass style-only props to\n   * components. If for some reason you are not able to use transient props, a\n   * prop validation function can be provided via `StyleSheetManager`, such as\n   * `@emotion/is-prop-valid`.\n   *\n   * When the return value is `true`, props will be forwarded to the DOM/underlying\n   * component. If return value is `false`, the prop will be discarded after styles\n   * are calculated.\n   *\n   * Manually composing `styled.{element}.withConfig({shouldForwardProp})` will\n   * override this default.\n   */\n  shouldForwardProp?: undefined | IStyleSheetContext['shouldForwardProp'];\n  /**\n   * An array of plugins to be run by stylis (style processor) during compilation.\n   * Check out [what's available on npm*](https://www.npmjs.com/search?q=keywords%3Astylis).\n   *\n   * \\* The plugin(s) must be compatible with stylis v4 or above.\n   */\n  stylisPlugins?: undefined | stylis.Middleware[];\n  /**\n   * Provide an alternate DOM node to host generated styles; useful for iframes.\n   */\n  target?: undefined | InsertionTarget;\n}>;\n\nexport function StyleSheetManager(props: IStyleSheetManager): React.JSX.Element {\n  // In RSC environments without context support, StyleSheetManager becomes a no-op\n  if (IS_RSC || !React.useMemo) {\n    return props.children as React.JSX.Element;\n  }\n\n  const { styleSheet } = useStyleSheetContext();\n\n  const resolvedStyleSheet = React.useMemo(() => {\n    let sheet = styleSheet;\n\n    if (props.sheet) {\n      sheet = props.sheet;\n    } else if (props.target) {\n      sheet = sheet.reconstructWithOptions({ target: props.target }, false);\n    }\n\n    if (props.disableCSSOMInjection) {\n      sheet = sheet.reconstructWithOptions({ useCSSOMInjection: false });\n    }\n\n    return sheet;\n  }, [props.disableCSSOMInjection, props.sheet, props.target, styleSheet]);\n\n  const stylis = React.useMemo(\n    () =>\n      createStylisInstance({\n        options: { namespace: props.namespace, prefix: props.enableVendorPrefixes },\n        plugins: props.stylisPlugins,\n      }),\n    [props.enableVendorPrefixes, props.namespace, props.stylisPlugins]\n  );\n\n  const styleSheetContextValue = React.useMemo(\n    () => ({\n      shouldForwardProp: props.shouldForwardProp,\n      styleSheet: resolvedStyleSheet,\n      stylis,\n    }),\n    [props.shouldForwardProp, resolvedStyleSheet, stylis]\n  );\n\n  return (\n    <StyleSheetContext.Provider value={styleSheetContextValue}>\n      <StylisContext.Provider value={stylis}>{props.children}</StylisContext.Provider>\n    </StyleSheetContext.Provider>\n  );\n}\n", "import StyleSheet from '../sheet';\nimport { Keyframes as KeyframesType, Stringifier } from '../types';\nimport styledError from '../utils/error';\nimport { setToString } from '../utils/setToString';\nimport { mainStylis } from './StyleSheetManager';\n\nexport default class Keyframes implements KeyframesType {\n  id: string;\n  name: string;\n  rules: string;\n\n  constructor(name: string, rules: string) {\n    this.name = name;\n    this.id = `sc-keyframes-${name}`;\n    this.rules = rules;\n\n    setToString(this, () => {\n      throw styledError(12, String(this.name));\n    });\n  }\n\n  inject = (styleSheet: StyleSheet, stylisInstance: Stringifier = mainStylis): void => {\n    const resolvedName = this.name + stylisInstance.hash;\n\n    if (!styleSheet.hasNameForId(this.id, resolvedName)) {\n      styleSheet.insertRules(\n        this.id,\n        resolvedName,\n        stylisInstance(this.rules, resolvedName, '@keyframes')\n      );\n    }\n  };\n\n  getName(stylisInstance: Stringifier = mainStylis): string {\n    return this.name + stylisInstance.hash;\n  }\n}\n", "import unitless from '@emotion/unitless';\n\n// Taken from https://github.com/facebook/react/blob/b87aabdfe1b7461e7331abb3601d9e6bb27544bc/packages/react-dom/src/shared/dangerousStyleValue.js\nexport default function addUnitIfNeeded(name: string, value: any) {\n  // https://github.com/amilajack/eslint-plugin-flowtype-errors/issues/133\n  if (value == null || typeof value === 'boolean' || value === '') {\n    return '';\n  }\n\n  if (typeof value === 'number' && value !== 0 && !(name in unitless) && !name.startsWith('--')) {\n    return `${value}px`; // Presumes implicit 'px' suffix for unitless numbers except for CSS variables\n  }\n\n  return String(value).trim();\n}\n", "const isUpper = (c: string) => c >= 'A' && c <= 'Z';\n\n/**\n * Hyphenates a camelcased CSS property name, for example:\n *\n *   > hyphenateStyleName('backgroundColor')\n *   < \"background-color\"\n *   > hyphenateStyleName('MozTransition')\n *   < \"-moz-transition\"\n *   > hyphenateStyleName('msTransition')\n *   < \"-ms-transition\"\n *\n * As Modernizr suggests (http://modernizr.com/docs/#prefixed), an `ms` prefix\n * is converted to `-ms-`.\n */\nexport default function hyphenateStyleName(string: string): string {\n  let output = '';\n\n  for (let i = 0; i < string.length; i++) {\n    const c = string[i];\n    // Check for CSS variable prefix\n    if (i === 1 && c === '-' && string[0] === '-') {\n      return string;\n    }\n\n    if (isUpper(c)) {\n      output += '-' + c.toLowerCase();\n    } else {\n      output += c;\n    }\n  }\n\n  return output.startsWith('ms-') ? '-' + output : output;\n}\n", "import Keyframes from '../models/Keyframes';\nimport StyleSheet from '../sheet';\nimport {\n  AnyComponent,\n  Dict,\n  ExecutionContext,\n  Interpolation,\n  IStyledComponent,\n  RuleSet,\n  Stringifier,\n  StyledObject,\n} from '../types';\nimport addUnitIfNeeded from './addUnitIfNeeded';\nimport { EMPTY_ARRAY } from './empties';\nimport getComponentName from './getComponentName';\nimport hyphenate from './hyphenateStyleName';\nimport isFunction from './isFunction';\nimport isPlainObject from './isPlainObject';\nimport isStatelessFunction from './isStatelessFunction';\nimport isStyledComponent from './isStyledComponent';\n\n/**\n * It's falsish not falsy because 0 is allowed.\n */\nconst isFalsish = (chunk: any): chunk is undefined | null | false | '' =>\n  chunk === undefined || chunk === null || chunk === false || chunk === '';\n\nexport const objToCssArray = (obj: Dict<any>): string[] => {\n  const rules = [];\n\n  for (const key in obj) {\n    const val = obj[key];\n    if (!obj.hasOwnProperty(key) || isFalsish(val)) continue;\n\n    // @ts-expect-error Property 'isCss' does not exist on type 'any[]'\n    if ((Array.isArray(val) && val.isCss) || isFunction(val)) {\n      rules.push(`${hyphenate(key)}:`, val, ';');\n    } else if (isPlainObject(val)) {\n      rules.push(`${key} {`, ...objToCssArray(val), '}');\n    } else {\n      rules.push(`${hyphenate(key)}: ${addUnitIfNeeded(key, val)};`);\n    }\n  }\n\n  return rules;\n};\n\nexport default function flatten<Props extends object>(\n  chunk: Interpolation<object>,\n  executionContext?: (ExecutionContext & Props) | undefined,\n  styleSheet?: StyleSheet | undefined,\n  stylisInstance?: Stringifier | undefined\n): RuleSet<Props> {\n  if (isFalsish(chunk)) {\n    return [];\n  }\n\n  /* Handle other components */\n  if (isStyledComponent(chunk)) {\n    return [`.${(chunk as unknown as IStyledComponent<'web', any>).styledComponentId}`];\n  }\n\n  /* Either execute or defer the function */\n  if (isFunction(chunk)) {\n    if (isStatelessFunction(chunk) && executionContext) {\n      const result = chunk(executionContext);\n\n      if (\n        process.env.NODE_ENV !== 'production' &&\n        typeof result === 'object' &&\n        !Array.isArray(result) &&\n        !(result instanceof Keyframes) &&\n        !isPlainObject(result) &&\n        result !== null\n      ) {\n        console.error(\n          `${getComponentName(\n            chunk as AnyComponent\n          )} is not a styled component and cannot be referred to via component selector. See https://www.styled-components.com/docs/advanced#referring-to-other-components for more details.`\n        );\n      }\n\n      return flatten<Props>(result, executionContext, styleSheet, stylisInstance);\n    } else {\n      return [chunk as unknown as IStyledComponent<'web'>];\n    }\n  }\n\n  if (chunk instanceof Keyframes) {\n    if (styleSheet) {\n      chunk.inject(styleSheet, stylisInstance);\n      return [chunk.getName(stylisInstance)];\n    } else {\n      return [chunk];\n    }\n  }\n\n  /* Handle objects */\n  if (isPlainObject(chunk)) {\n    return objToCssArray(chunk as StyledObject<Props>);\n  }\n\n  if (!Array.isArray(chunk)) {\n    return [chunk.toString()];\n  }\n\n  return flatMap(chunk, chunklet =>\n    flatten<Props>(chunklet, executionContext, styleSheet, stylisInstance)\n  );\n}\n\nfunction flatMap<T, U>(array: T[], transform: (value: T, index: number, array: T[]) => U[]): U[] {\n  return Array.prototype.concat.apply(EMPTY_ARRAY, array.map(transform));\n}\n", "import isFunction from './isFunction';\n\nexport default function isStatelessFunction(test: any): test is Function {\n  return isFunction(test) && !(test.prototype && test.prototype.isReactComponent);\n}\n", "import { RuleSet } from '../types';\nimport isFunction from './isFunction';\nimport isStyledComponent from './isStyledComponent';\n\nexport default function isStaticRules<Props extends object>(rules: RuleSet<Props>) {\n  for (let i = 0; i < rules.length; i += 1) {\n    const rule = rules[i];\n\n    if (isFunction(rule) && !isStyledComponent(rule)) {\n      // functions are allowed to be static if they're just being\n      // used to get the classname of a nested styled component\n      return false;\n    }\n  }\n\n  return true;\n}\n", "import { SC_VERSION } from '../constants';\nimport StyleSheet from '../sheet';\nimport { getGroupForId } from '../sheet/GroupIDAllocator';\nimport { ExecutionContext, RuleSet, Stringifier } from '../types';\nimport flatten from '../utils/flatten';\nimport generateName from '../utils/generateAlphabeticName';\nimport { hash, phash } from '../utils/hash';\nimport isStaticRules from '../utils/isStaticRules';\nimport { joinStringArray, joinStrings } from '../utils/joinStrings';\n\ndeclare const __SERVER__: boolean;\n\nconst SEED = hash(SC_VERSION);\n\n/**\n * ComponentStyle is all the CSS-specific stuff, not the React-specific stuff.\n */\nexport default class ComponentStyle {\n  baseHash: number;\n  baseStyle: ComponentStyle | null | undefined;\n  componentId: string;\n  isStatic: boolean;\n  rules: RuleSet<any>;\n  staticRulesId: string;\n\n  constructor(rules: RuleSet<any>, componentId: string, baseStyle?: ComponentStyle | undefined) {\n    this.rules = rules;\n    this.staticRulesId = '';\n    this.isStatic =\n      process.env.NODE_ENV === 'production' &&\n      (baseStyle === undefined || baseStyle.isStatic) &&\n      isStaticRules(rules);\n    this.componentId = componentId;\n    this.baseHash = phash(SEED, componentId);\n    this.baseStyle = baseStyle;\n\n    // NOTE: This registers the componentId, which ensures a consistent order\n    // for this component's styles compared to others\n    StyleSheet.registerId(componentId);\n  }\n\n  generateAndInjectStyles(\n    executionContext: ExecutionContext,\n    styleSheet: StyleSheet,\n    stylis: Stringifier\n  ): { className: string; css: string } {\n    let names = this.baseStyle\n      ? this.baseStyle.generateAndInjectStyles(executionContext, styleSheet, stylis).className\n      : '';\n\n    // force dynamic classnames if user-supplied stylis plugins are in use\n    if (this.isStatic && !stylis.hash) {\n      if (this.staticRulesId && styleSheet.hasNameForId(this.componentId, this.staticRulesId)) {\n        names = joinStrings(names, this.staticRulesId);\n      } else {\n        const cssStatic = joinStringArray(\n          flatten(this.rules, executionContext, styleSheet, stylis) as string[]\n        );\n        const name = generateName(phash(this.baseHash, cssStatic) >>> 0);\n\n        if (!styleSheet.hasNameForId(this.componentId, name)) {\n          const cssStaticFormatted = stylis(cssStatic, `.${name}`, undefined, this.componentId);\n          styleSheet.insertRules(this.componentId, name, cssStaticFormatted);\n        }\n\n        names = joinStrings(names, name);\n        this.staticRulesId = name;\n      }\n    } else {\n      let dynamicHash = phash(this.baseHash, stylis.hash);\n      let css = '';\n\n      for (let i = 0; i < this.rules.length; i++) {\n        const partRule = this.rules[i];\n\n        if (typeof partRule === 'string') {\n          css += partRule;\n\n          if (process.env.NODE_ENV !== 'production') dynamicHash = phash(dynamicHash, partRule);\n        } else if (partRule) {\n          const partString = joinStringArray(\n            flatten(partRule, executionContext, styleSheet, stylis) as string[]\n          );\n          // The same value can switch positions in the array, so we include \"i\" in the hash.\n          dynamicHash = phash(dynamicHash, partString + i);\n          css += partString;\n        }\n      }\n\n      if (css) {\n        const name = generateName(dynamicHash >>> 0);\n\n        if (!styleSheet.hasNameForId(this.componentId, name)) {\n          const cssFormatted = stylis(css, `.${name}`, undefined, this.componentId);\n          styleSheet.insertRules(this.componentId, name, cssFormatted);\n        }\n\n        names = joinStrings(names, name);\n      }\n    }\n\n    // Retrieve CSS from Tag for RSC rendering\n    const generatedCSS =\n      typeof window === 'undefined'\n        ? styleSheet.getTag().getGroup(getGroupForId(this.componentId))\n        : '';\n\n    return { className: names, css: generatedCSS };\n  }\n}\n", "import React from 'react';\nimport { IS_RSC } from '../constants';\nimport styledError from '../utils/error';\nimport isFunction from '../utils/isFunction';\n\n// Helper type for the `DefaultTheme` interface that enforces an object type & exclusively allows\n// for typed keys.\ntype DefaultThemeAsObject<T = object> = Record<keyof T, any>;\n\n/**\n * Override DefaultTheme to get accurate typings for your project.\n *\n * ```\n * // create styled-components.d.ts in your project source\n * // if it isn't being picked up, check tsconfig compilerOptions.types\n * import type { CSSProp } from \"styled-components\";\n * import Theme from './theme';\n *\n * type ThemeType = typeof Theme;\n *\n * declare module \"styled-components\" {\n *  export interface DefaultTheme extends ThemeType {}\n * }\n *\n * declare module \"react\" {\n *  interface DOMAttributes<T> {\n *    css?: CSSProp;\n *  }\n * }\n * ```\n */\nexport interface DefaultTheme extends DefaultThemeAsObject {}\n\ntype ThemeFn = (outerTheme?: DefaultTheme | undefined) => DefaultTheme;\ntype ThemeArgument = DefaultTheme | ThemeFn;\n\ntype Props = {\n  children?: React.ReactNode;\n  theme: ThemeArgument;\n};\n\n// Create context only if createContext is available, otherwise create a fallback\nexport const ThemeContext = !IS_RSC\n  ? React.createContext<DefaultTheme | undefined>(undefined)\n  : ({\n      Provider: ({ children }: { children: React.ReactNode; value?: DefaultTheme }) => children,\n      Consumer: ({ children }: { children: (theme?: DefaultTheme) => React.ReactNode }) =>\n        children(undefined),\n    } as React.Context<DefaultTheme | undefined>);\n\nexport const ThemeConsumer = ThemeContext.Consumer;\n\nfunction mergeTheme(theme: ThemeArgument, outerTheme?: DefaultTheme | undefined): DefaultTheme {\n  if (!theme) {\n    throw styledError(14);\n  }\n\n  if (isFunction(theme)) {\n    const themeFn = theme as ThemeFn;\n    const mergedTheme = themeFn(outerTheme);\n\n    if (\n      process.env.NODE_ENV !== 'production' &&\n      (mergedTheme === null || Array.isArray(mergedTheme) || typeof mergedTheme !== 'object')\n    ) {\n      throw styledError(7);\n    }\n\n    return mergedTheme;\n  }\n\n  if (Array.isArray(theme) || typeof theme !== 'object') {\n    throw styledError(8);\n  }\n\n  return outerTheme ? { ...outerTheme, ...theme } : theme;\n}\n\n/**\n * Returns the current theme (as provided by the closest ancestor `ThemeProvider`.)\n *\n * If no `ThemeProvider` is found, the function will error. If you need access to the theme in an\n * uncertain composition scenario, `React.useContext(ThemeContext)` will not emit an error if there\n * is no `ThemeProvider` ancestor.\n */\nexport function useTheme(): DefaultTheme {\n  // Skip useContext if we're in an RSC environment without context support\n  const theme = !IS_RSC ? React.useContext(ThemeContext) : undefined;\n\n  if (!theme) {\n    throw styledError(18);\n  }\n\n  return theme;\n}\n\n/**\n * Provide a theme to an entire react component tree via context\n */\nexport default function ThemeProvider(props: Props): React.JSX.Element | null {\n  // In RSC environments without context support, ThemeProvider becomes a no-op\n  if (IS_RSC) {\n    return props.children as React.JSX.Element | null;\n  }\n\n  const outerTheme = React.useContext(ThemeContext);\n  const themeContext = React.useMemo(\n    () => mergeTheme(props.theme, outerTheme),\n    [props.theme, outerTheme]\n  );\n\n  if (!props.children) {\n    return null;\n  }\n\n  return <ThemeContext.Provider value={themeContext}>{props.children}</ThemeContext.Provider>;\n}\n", "import isPropValid from '@emotion/is-prop-valid';\nimport React, { createElement, PropsWithoutRef, Ref } from 'react';\nimport { IS_RSC, SC_VERSION } from '../constants';\nimport type {\n  AnyComponent,\n  Attrs,\n  BaseObject,\n  Dict,\n  ExecutionContext,\n  ExecutionProps,\n  IStyledComponent,\n  IStyledComponentFactory,\n  IStyledStatics,\n  OmitNever,\n  RuleSet,\n  StyledOptions,\n  WebTarget,\n} from '../types';\nimport { checkDynamicCreation } from '../utils/checkDynamicCreation';\nimport createWarnTooManyClasses from '../utils/createWarnTooManyClasses';\nimport determineTheme from '../utils/determineTheme';\nimport domElements from '../utils/domElements';\nimport { EMPTY_ARRAY, EMPTY_OBJECT } from '../utils/empties';\nimport escape from '../utils/escape';\nimport generateComponentId from '../utils/generateComponentId';\nimport generateDisplayName from '../utils/generateDisplayName';\nimport hoist from '../utils/hoist';\nimport isFunction from '../utils/isFunction';\nimport isStyledComponent from '../utils/isStyledComponent';\nimport isTag from '../utils/isTag';\nimport { joinStrings } from '../utils/joinStrings';\nimport merge from '../utils/mixinDeep';\nimport { setToString } from '../utils/setToString';\nimport ComponentStyle from './ComponentStyle';\nimport { useStyleSheetContext } from './StyleSheetManager';\nimport { DefaultTheme, ThemeContext } from './ThemeProvider';\n\nconst identifiers: { [key: string]: number } = {};\n\n/* We depend on components having unique IDs */\nfunction generateId(\n  displayName?: string | undefined,\n  parentComponentId?: string | undefined\n): string {\n  const name = typeof displayName !== 'string' ? 'sc' : escape(displayName);\n  // Ensure that no displayName can lead to duplicate componentIds\n  identifiers[name] = (identifiers[name] || 0) + 1;\n\n  const componentId = `${name}-${generateComponentId(\n    // SC_VERSION gives us isolation between multiple runtimes on the page at once\n    // this is improved further with use of the babel plugin \"namespace\" feature\n    SC_VERSION + name + identifiers[name]\n  )}`;\n\n  return parentComponentId ? `${parentComponentId}-${componentId}` : componentId;\n}\n\nfunction useInjectedStyle<T extends ExecutionContext>(\n  componentStyle: ComponentStyle,\n  resolvedAttrs: T\n): { className: string; css: string } {\n  const ssc = useStyleSheetContext();\n\n  const result = componentStyle.generateAndInjectStyles(resolvedAttrs, ssc.styleSheet, ssc.stylis);\n\n  if (process.env.NODE_ENV !== 'production' && React.useDebugValue) {\n    React.useDebugValue(result.className);\n  }\n\n  return result;\n}\n\nfunction resolveContext<Props extends BaseObject>(\n  attrs: Attrs<React.HTMLAttributes<Element> & Props>[],\n  props: ExecutionProps & Props,\n  theme: DefaultTheme\n): React.HTMLAttributes<Element> & ExecutionContext & Props {\n  const context: React.HTMLAttributes<Element> & ExecutionContext & Props = {\n    ...props,\n    // unset, add `props.className` back at the end so props always \"wins\"\n    className: undefined,\n    theme,\n  } as React.HTMLAttributes<Element> & ExecutionContext & Props;\n\n  let attrDef;\n\n  for (let i = 0; i < attrs.length; i += 1) {\n    attrDef = attrs[i];\n    const resolvedAttrDef = isFunction(attrDef) ? attrDef(context) : attrDef;\n\n    for (const key in resolvedAttrDef) {\n      if (key === 'className') {\n        context.className = joinStrings(context.className, resolvedAttrDef[key] as string);\n      } else if (key === 'style') {\n        context.style = { ...context.style, ...(resolvedAttrDef[key] as React.CSSProperties) };\n      } else {\n        // @ts-expect-error attrs can dynamically add arbitrary properties\n        context[key] = resolvedAttrDef[key];\n      }\n    }\n  }\n\n  if ('className' in props && typeof props.className === 'string') {\n    context.className = joinStrings(context.className, props.className);\n  }\n\n  return context;\n}\n\nlet seenUnknownProps = new Set();\n\nfunction useStyledComponentImpl<Props extends BaseObject>(\n  forwardedComponent: IStyledComponent<'web', Props>,\n  props: ExecutionProps & Props,\n  forwardedRef: Ref<Element>\n) {\n  const {\n    attrs: componentAttrs,\n    componentStyle,\n    defaultProps,\n    foldedComponentIds,\n    styledComponentId,\n    target,\n  } = forwardedComponent;\n\n  const contextTheme = !IS_RSC ? React.useContext(ThemeContext) : undefined;\n  const ssc = useStyleSheetContext();\n  const shouldForwardProp = forwardedComponent.shouldForwardProp || ssc.shouldForwardProp;\n\n  if (process.env.NODE_ENV !== 'production' && React.useDebugValue) {\n    React.useDebugValue(styledComponentId);\n  }\n\n  // NOTE: the non-hooks version only subscribes to this when !componentStyle.isStatic,\n  // but that'd be against the rules-of-hooks. We could be naughty and do it anyway as it\n  // should be an immutable value, but behave for now.\n  const theme = determineTheme(props, contextTheme, defaultProps) || EMPTY_OBJECT;\n\n  const context = resolveContext<Props>(componentAttrs, props, theme);\n  const elementToBeCreated: WebTarget = context.as || target;\n  const propsForElement: Dict<any> = {};\n\n  for (const key in context) {\n    // @ts-expect-error context may have arbitrary properties from attrs\n    if (context[key] === undefined) {\n      // Omit undefined values from props passed to wrapped element.\n      // This enables using .attrs() to remove props, for example.\n    } else if (key[0] === '$' || key === 'as' || (key === 'theme' && context.theme === theme)) {\n      // Omit transient props and execution props.\n    } else if (key === 'forwardedAs') {\n      propsForElement.as = context.forwardedAs;\n    } else if (!shouldForwardProp || shouldForwardProp(key, elementToBeCreated)) {\n      // @ts-expect-error context may have arbitrary properties from attrs\n      propsForElement[key] = context[key];\n\n      if (\n        !shouldForwardProp &&\n        process.env.NODE_ENV === 'development' &&\n        !isPropValid(key) &&\n        !seenUnknownProps.has(key) &&\n        // Only warn on DOM Element.\n        domElements.has(elementToBeCreated as any)\n      ) {\n        seenUnknownProps.add(key);\n        console.warn(\n          `styled-components: it looks like an unknown prop \"${key}\" is being sent through to the DOM, which will likely trigger a React console error. If you would like automatic filtering of unknown props, you can opt-into that behavior via \\`<StyleSheetManager shouldForwardProp={...}>\\` (connect an API like \\`@emotion/is-prop-valid\\`) or consider using transient props (\\`$\\` prefix for automatic filtering.)`\n        );\n      }\n    }\n  }\n\n  const { className: generatedClassName, css } = useInjectedStyle(componentStyle, context);\n\n  if (process.env.NODE_ENV !== 'production' && forwardedComponent.warnTooManyClasses) {\n    forwardedComponent.warnTooManyClasses(generatedClassName);\n  }\n\n  let classString = joinStrings(foldedComponentIds, styledComponentId);\n  if (generatedClassName) {\n    classString += ' ' + generatedClassName;\n  }\n  if (context.className) {\n    classString += ' ' + context.className;\n  }\n\n  propsForElement[\n    // handle custom elements which React doesn't properly alias\n    isTag(elementToBeCreated) &&\n    !domElements.has(elementToBeCreated as Extract<typeof domElements, string>)\n      ? 'class'\n      : 'className'\n  ] = classString;\n\n  // forwardedRef is coming from React.forwardRef.\n  // But it might not exist. Since React 19 handles `ref` like a prop, it only define it if there is a value.\n  // We don't want to inject an empty ref.\n  if (forwardedRef) {\n    propsForElement.ref = forwardedRef;\n  }\n\n  const element = createElement(elementToBeCreated, propsForElement);\n\n  // RSC mode: output style tag alongside element\n  // React 19's style hoisting will deduplicate by href and move to <head>\n  if (IS_RSC && css) {\n    return React.createElement(\n      React.Fragment,\n      null,\n      React.createElement('style', {\n        precedence: 'styled-components',\n        href: `sc-${styledComponentId}-${generatedClassName}`,\n        children: css,\n      }),\n      element\n    );\n  }\n\n  return element;\n}\n\nfunction createStyledComponent<\n  Target extends WebTarget,\n  OuterProps extends BaseObject,\n  Statics extends BaseObject = BaseObject,\n>(\n  target: Target,\n  options: StyledOptions<'web', OuterProps>,\n  rules: RuleSet<OuterProps>\n): ReturnType<IStyledComponentFactory<'web', Target, OuterProps, Statics>> {\n  const isTargetStyledComp = isStyledComponent(target);\n  const styledComponentTarget = target as IStyledComponent<'web', OuterProps>;\n  const isCompositeComponent = !isTag(target);\n\n  const {\n    attrs = EMPTY_ARRAY,\n    componentId = generateId(options.displayName, options.parentComponentId),\n    displayName = generateDisplayName(target),\n  } = options;\n\n  const styledComponentId =\n    options.displayName && options.componentId\n      ? `${escape(options.displayName)}-${options.componentId}`\n      : options.componentId || componentId;\n\n  // fold the underlying StyledComponent attrs up (implicit extend)\n  const finalAttrs =\n    isTargetStyledComp && styledComponentTarget.attrs\n      ? styledComponentTarget.attrs.concat(attrs as unknown as Attrs<OuterProps>[]).filter(Boolean)\n      : (attrs as Attrs<OuterProps>[]);\n\n  let { shouldForwardProp } = options;\n\n  if (isTargetStyledComp && styledComponentTarget.shouldForwardProp) {\n    const shouldForwardPropFn = styledComponentTarget.shouldForwardProp;\n\n    if (options.shouldForwardProp) {\n      const passedShouldForwardPropFn = options.shouldForwardProp;\n\n      // compose nested shouldForwardProp calls\n      shouldForwardProp = (prop, elementToBeCreated) =>\n        shouldForwardPropFn(prop, elementToBeCreated) &&\n        passedShouldForwardPropFn(prop, elementToBeCreated);\n    } else {\n      shouldForwardProp = shouldForwardPropFn;\n    }\n  }\n\n  const componentStyle = new ComponentStyle(\n    rules,\n    styledComponentId,\n    isTargetStyledComp ? (styledComponentTarget.componentStyle as ComponentStyle) : undefined\n  );\n\n  function forwardRefRender(\n    props: PropsWithoutRef<ExecutionProps & OuterProps>,\n    ref: Ref<Element>\n  ) {\n    return useStyledComponentImpl<OuterProps>(\n      WrappedStyledComponent,\n      props as ExecutionProps & OuterProps,\n      ref\n    );\n  }\n\n  forwardRefRender.displayName = displayName;\n\n  /**\n   * forwardRef creates a new interim component, which we'll take advantage of\n   * instead of extending ParentComponent to create _another_ interim class\n   */\n  let WrappedStyledComponent = React.forwardRef(forwardRefRender) as unknown as IStyledComponent<\n    'web',\n    any\n  > &\n    Statics;\n  WrappedStyledComponent.attrs = finalAttrs;\n  WrappedStyledComponent.componentStyle = componentStyle;\n  WrappedStyledComponent.displayName = displayName;\n  WrappedStyledComponent.shouldForwardProp = shouldForwardProp;\n\n  // this static is used to preserve the cascade of static classes for component selector\n  // purposes; this is especially important with usage of the css prop\n  WrappedStyledComponent.foldedComponentIds = isTargetStyledComp\n    ? joinStrings(styledComponentTarget.foldedComponentIds, styledComponentTarget.styledComponentId)\n    : '';\n\n  WrappedStyledComponent.styledComponentId = styledComponentId;\n\n  // fold the underlying StyledComponent target up since we folded the styles\n  WrappedStyledComponent.target = isTargetStyledComp ? styledComponentTarget.target : target;\n\n  Object.defineProperty(WrappedStyledComponent, 'defaultProps', {\n    get() {\n      return this._foldedDefaultProps;\n    },\n\n    set(obj) {\n      this._foldedDefaultProps = isTargetStyledComp\n        ? merge({}, styledComponentTarget.defaultProps, obj)\n        : obj;\n    },\n  });\n\n  if (process.env.NODE_ENV !== 'production') {\n    checkDynamicCreation(displayName, styledComponentId);\n\n    WrappedStyledComponent.warnTooManyClasses = createWarnTooManyClasses(\n      displayName,\n      styledComponentId\n    );\n  }\n\n  setToString(WrappedStyledComponent, () => `.${WrappedStyledComponent.styledComponentId}`);\n\n  if (isCompositeComponent) {\n    const compositeComponentTarget = target as AnyComponent;\n\n    hoist<typeof WrappedStyledComponent, typeof compositeComponentTarget>(\n      WrappedStyledComponent,\n      compositeComponentTarget,\n      {\n        // all SC-specific things should not be hoisted\n        attrs: true,\n        componentStyle: true,\n        displayName: true,\n        foldedComponentIds: true,\n        shouldForwardProp: true,\n        styledComponentId: true,\n        target: true,\n      } as { [key in keyof OmitNever<IStyledStatics<'web', OuterProps>>]: true }\n    );\n  }\n\n  return WrappedStyledComponent;\n}\n\nexport default createStyledComponent;\n", "import { StyledTarget } from '../types';\nimport getComponentName from './getComponentName';\nimport isTag from './isTag';\n\nexport default function generateDisplayName(target: StyledTarget<any>) {\n  return isTag(target) ? `styled.${target}` : `Styled(${getComponentName(target)})`;\n}\n", "import { Dict } from '../types';\n\nexport const LIMIT = 200;\n\nexport default (displayName: string, componentId: string) => {\n  let generatedClasses: Dict<any> = {};\n  let warningSeen = false;\n\n  return (className: string) => {\n    if (!warningSeen) {\n      generatedClasses[className] = true;\n      if (Object.keys(generatedClasses).length >= LIMIT) {\n        // Unable to find latestRule in test environment.\n\n        const parsedIdString = componentId ? ` with the id of \"${componentId}\"` : '';\n\n        console.warn(\n          `Over ${LIMIT} classes were generated for component ${displayName}${parsedIdString}.\\n` +\n            'Consider using the attrs method, together with a style object for frequently changed styles.\\n' +\n            'Example:\\n' +\n            '  const Component = styled.div.attrs(props => ({\\n' +\n            '    style: {\\n' +\n            '      background: props.background,\\n' +\n            '    },\\n' +\n            '  }))`width: 100%;`\\n\\n' +\n            '  <Component />'\n        );\n        warningSeen = true;\n        generatedClasses = {};\n      }\n    }\n  };\n};\n", "import { Interpolation } from '../types';\n\nexport default function interleave<Props extends object>(\n  strings: readonly string[],\n  interpolations: Interpolation<Props>[]\n): Interpolation<Props>[] {\n  const result: Interpolation<Props>[] = [strings[0]];\n\n  for (let i = 0, len = interpolations.length; i < len; i += 1) {\n    result.push(interpolations[i], strings[i + 1]);\n  }\n\n  return result;\n}\n", "import {\n  BaseObject,\n  Interpolation,\n  NoInfer,\n  RuleSet,\n  StyledObject,\n  StyleFunction,\n  Styles,\n} from '../types';\nimport { EMPTY_ARRAY } from '../utils/empties';\nimport flatten from '../utils/flatten';\nimport interleave from '../utils/interleave';\nimport isFunction from '../utils/isFunction';\nimport isPlainObject from '../utils/isPlainObject';\n\n/**\n * Used when flattening object styles to determine if we should\n * expand an array of styles.\n */\nconst addTag = <T extends RuleSet<any>>(arg: T): T & { isCss: true } =>\n  Object.assign(arg, { isCss: true } as const);\n\nfunction css(styles: Styles<object>, ...interpolations: Interpolation<object>[]): RuleSet<object>;\nfunction css<Props extends object>(\n  styles: Styles<NoInfer<Props>>,\n  ...interpolations: Interpolation<NoInfer<Props>>[]\n): RuleSet<NoInfer<Props>>;\nfunction css<Props extends object = BaseObject>(\n  styles: Styles<NoInfer<Props>>,\n  ...interpolations: Interpolation<NoInfer<Props>>[]\n): RuleSet<NoInfer<Props>> {\n  if (isFunction(styles) || isPlainObject(styles)) {\n    const styleFunctionOrObject = styles as StyleFunction<Props> | StyledObject<Props>;\n\n    return addTag(\n      flatten<Props>(\n        interleave<Props>(EMPTY_ARRAY, [\n          styleFunctionOrObject,\n          ...interpolations,\n        ]) as Interpolation<object>\n      )\n    );\n  }\n\n  const styleStringArray = styles as TemplateStringsArray;\n\n  if (\n    interpolations.length === 0 &&\n    styleStringArray.length === 1 &&\n    typeof styleStringArray[0] === 'string'\n  ) {\n    return flatten<Props>(styleStringArray);\n  }\n\n  return addTag(\n    flatten<Props>(interleave<Props>(styleStringArray, interpolations) as Interpolation<object>)\n  );\n}\n\nexport default css;\n", "import {\n  Attrs,\n  BaseObject,\n  ExecutionProps,\n  Interpolation,\n  IStyledComponent,\n  IStyledComponentFactory,\n  KnownTarget,\n  NoInfer,\n  Runtime,\n  StyledOptions,\n  StyledTarget,\n  Styles,\n  Substitute,\n} from '../types';\nimport { EMPTY_OBJECT } from '../utils/empties';\nimport styledError from '../utils/error';\nimport css from './css';\n\ntype AttrsResult<T extends Attrs<any>> = T extends (...args: any) => infer P\n  ? P extends object\n    ? P\n    : never\n  : T extends object\n    ? T\n    : never;\n\n/**\n * Based on Attrs being a simple object or function that returns\n * a prop object, inspect the attrs result and attempt to extract\n * any \"as\" prop usage to modify the runtime target.\n */\ntype AttrsTarget<\n  R extends Runtime,\n  T extends Attrs<any>,\n  FallbackTarget extends StyledTarget<R>,\n  Result extends ExecutionProps = AttrsResult<T>,\n> = Result extends { as: infer RuntimeTarget }\n  ? RuntimeTarget extends KnownTarget\n    ? RuntimeTarget\n    : FallbackTarget\n  : FallbackTarget;\n\nexport interface Styled<\n  R extends Runtime,\n  Target extends StyledTarget<R>,\n  OuterProps extends object,\n  OuterStatics extends object = BaseObject,\n> {\n  <Props extends object = BaseObject, Statics extends object = BaseObject>(\n    initialStyles: Styles<Substitute<OuterProps, NoInfer<Props>>>,\n    ...interpolations: Interpolation<Substitute<OuterProps, NoInfer<Props>>>[]\n  ): IStyledComponent<R, Substitute<OuterProps, Props>> &\n    OuterStatics &\n    Statics &\n    (R extends 'web'\n      ? Target extends string\n        ? {}\n        : Omit<Target, keyof React.Component<any>>\n      : {});\n\n  attrs: <\n    Props extends object = BaseObject,\n    PrivateMergedProps extends object = Substitute<OuterProps, Props>,\n    PrivateAttrsArg extends Attrs<PrivateMergedProps> = Attrs<PrivateMergedProps>,\n    PrivateResolvedTarget extends StyledTarget<R> = AttrsTarget<R, PrivateAttrsArg, Target>,\n  >(\n    attrs: PrivateAttrsArg\n  ) => Styled<\n    R,\n    PrivateResolvedTarget,\n    PrivateResolvedTarget extends KnownTarget\n      ? Substitute<\n          Substitute<OuterProps, React.ComponentPropsWithRef<PrivateResolvedTarget>>,\n          Props\n        >\n      : PrivateMergedProps,\n    OuterStatics\n  >;\n\n  withConfig: (config: StyledOptions<R, OuterProps>) => Styled<R, Target, OuterProps, OuterStatics>;\n}\n\nexport default function constructWithOptions<\n  R extends Runtime,\n  Target extends StyledTarget<R>,\n  OuterProps extends object = Target extends KnownTarget\n    ? React.ComponentPropsWithRef<Target>\n    : BaseObject,\n  OuterStatics extends object = BaseObject,\n>(\n  componentConstructor: IStyledComponentFactory<R, StyledTarget<R>, object, any>,\n  tag: StyledTarget<R>,\n  options: StyledOptions<R, OuterProps> = EMPTY_OBJECT\n): Styled<R, Target, OuterProps, OuterStatics> {\n  /**\n   * We trust that the tag is a valid component as long as it isn't\n   * falsish. Typically the tag here is a string or function (i.e.\n   * class or pure function component), however a component may also be\n   * an object if it uses another utility, e.g. React.memo. React will\n   * output an appropriate warning however if the `tag` isn't valid.\n   */\n  if (!tag) {\n    throw styledError(1, tag);\n  }\n\n  /* This is callable directly as a template function */\n  const templateFunction = <Props extends object = BaseObject, Statics extends object = BaseObject>(\n    initialStyles: Styles<Substitute<OuterProps, Props>>,\n    ...interpolations: Interpolation<Substitute<OuterProps, Props>>[]\n  ) =>\n    componentConstructor<Substitute<OuterProps, Props>, Statics>(\n      tag,\n      options as StyledOptions<R, Substitute<OuterProps, Props>>,\n      css<Substitute<OuterProps, Props>>(initialStyles, ...interpolations)\n    );\n\n  /**\n   * Attrs allows for accomplishing two goals:\n   *\n   * 1. Backfilling props at runtime more expressively than defaultProps\n   * 2. Amending the prop interface of a wrapped styled component\n   */\n  templateFunction.attrs = <\n    Props extends object = BaseObject,\n    PrivateMergedProps extends object = Substitute<OuterProps, Props>,\n    PrivateAttrsArg extends Attrs<PrivateMergedProps> = Attrs<PrivateMergedProps>,\n    PrivateResolvedTarget extends StyledTarget<R> = AttrsTarget<R, PrivateAttrsArg, Target>,\n  >(\n    attrs: PrivateAttrsArg\n  ) =>\n    constructWithOptions<\n      R,\n      PrivateResolvedTarget,\n      PrivateResolvedTarget extends KnownTarget\n        ? Substitute<\n            Substitute<OuterProps, React.ComponentPropsWithRef<PrivateResolvedTarget>>,\n            Props\n          >\n        : PrivateMergedProps,\n      OuterStatics\n    >(componentConstructor, tag, {\n      ...options,\n      attrs: Array.prototype.concat(options.attrs, attrs).filter(Boolean),\n    });\n\n  /**\n   * If config methods are called, wrap up a new template function\n   * and merge options.\n   */\n  templateFunction.withConfig = (config: StyledOptions<R, OuterProps>) =>\n    constructWithOptions<R, Target, OuterProps, OuterStatics>(componentConstructor, tag, {\n      ...options,\n      ...config,\n    });\n\n  return templateFunction;\n}\n", "import * as React from 'react';\nimport createStyledComponent from '../models/StyledComponent';\nimport { BaseObject, KnownTarget, WebTarget } from '../types';\nimport domElements, { SupportedHTMLElements } from '../utils/domElements';\nimport constructWithOptions, { Styled as StyledInstance } from './constructWithOptions';\n\nconst baseStyled = <Target extends WebTarget, InjectedProps extends object = BaseObject>(\n  tag: Target\n) =>\n  constructWithOptions<\n    'web',\n    Target,\n    Target extends KnownTarget ? React.ComponentPropsWithRef<Target> & InjectedProps : InjectedProps\n  >(createStyledComponent, tag);\n\nconst styled = baseStyled as typeof baseStyled & {\n  [E in SupportedHTMLElements]: StyledInstance<'web', E, React.JSX.IntrinsicElements[E]>;\n};\n\n// Shorthands for all valid HTML Elements\ndomElements.forEach(domElement => {\n  // @ts-expect-error some react typing bs\n  styled[domElement] = baseStyled<typeof domElement>(domElement);\n});\n\nexport default styled;\nexport { StyledInstance };\n\n/**\n * This is the type of the `styled` HOC.\n */\nexport type Styled = typeof styled;\n\n/**\n * Use this higher-order type for scenarios where you are wrapping `styled`\n * and providing extra props as a third-party library.\n */\nexport type LibraryStyled<LibraryProps extends object = BaseObject> = <Target extends WebTarget>(\n  tag: Target\n) => typeof baseStyled<Target, LibraryProps>;\n", "import StyleSheet from '../sheet';\nimport { ExecutionContext, RuleSet, Stringifier } from '../types';\nimport flatten from '../utils/flatten';\nimport isStaticRules from '../utils/isStaticRules';\nimport { joinStringArray } from '../utils/joinStrings';\n\nexport default class GlobalStyle<Props extends object> {\n  componentId: string;\n  isStatic: boolean;\n  rules: RuleSet<Props>;\n\n  constructor(rules: RuleSet<Props>, componentId: string) {\n    this.rules = rules;\n    this.componentId = componentId;\n    this.isStatic = isStaticRules(rules);\n\n    // pre-register the first instance to ensure global styles\n    // load before component ones\n    StyleSheet.registerId(this.componentId + 1);\n  }\n\n  createStyles(\n    instance: number,\n    executionContext: ExecutionContext & Props,\n    styleSheet: StyleSheet,\n    stylis: Stringifier\n  ): void {\n    const flatCSS = joinStringArray(\n      flatten(this.rules as RuleSet<object>, executionContext, styleSheet, stylis) as string[]\n    );\n    const css = stylis(flatCSS, '');\n    const id = this.componentId + instance;\n\n    // NOTE: We use the id as a name as well, since these rules never change\n    styleSheet.insertRules(id, id, css);\n  }\n\n  removeStyles(instance: number, styleSheet: StyleSheet): void {\n    styleSheet.clearRules(this.componentId + instance);\n  }\n\n  renderStyles(\n    instance: number,\n    executionContext: ExecutionContext & Props,\n    styleSheet: StyleSheet,\n    stylis: Stringifier\n  ): void {\n    if (instance > 2) StyleSheet.registerId(this.componentId + instance);\n\n    const id = this.componentId + instance;\n\n    // For static styles that don't change based on props,\n    // only inject once and don't remove/re-add on every render.\n    // This prevents issues with React StrictMode where the effect cleanup\n    // from the simulated unmount runs after the re-render.\n    if (this.isStatic) {\n      if (!styleSheet.hasNameForId(id, id)) {\n        this.createStyles(instance, executionContext, styleSheet, stylis);\n      }\n      return;\n    }\n\n    // NOTE: Remove old styles, then inject the new ones\n    this.removeStyles(instance, styleSheet);\n    this.createStyles(instance, executionContext, styleSheet, stylis);\n  }\n}\n", "import React from 'react';\nimport { IS_RSC, STATIC_EXECUTION_CONTEXT } from '../constants';\nimport GlobalStyle from '../models/GlobalStyle';\nimport { useStyleSheetContext } from '../models/StyleSheetManager';\nimport { DefaultTheme, ThemeContext } from '../models/ThemeProvider';\nimport StyleSheet from '../sheet';\nimport { removeGlobalStyleTag } from '../sheet/dom';\nimport { getGroupForId } from '../sheet/GroupIDAllocator';\nimport { ExecutionContext, ExecutionProps, Interpolation, Stringifier, Styles } from '../types';\nimport { checkDynamicCreation } from '../utils/checkDynamicCreation';\nimport determineTheme from '../utils/determineTheme';\nimport generateComponentId from '../utils/generateComponentId';\nimport css from './css';\n\ndeclare const __SERVER__: boolean;\n\nexport default function createGlobalStyle<Props extends object>(\n  strings: Styles<Props>,\n  ...interpolations: Array<Interpolation<Props>>\n) {\n  const rules = css<Props>(strings, ...interpolations);\n  const styledComponentId = `sc-global-${generateComponentId(JSON.stringify(rules))}`;\n  const globalStyle = new GlobalStyle<Props>(rules, styledComponentId);\n\n  if (process.env.NODE_ENV !== 'production') {\n    checkDynamicCreation(styledComponentId);\n  }\n\n  // Use a WeakMap to maintain stable instances per stylesheet\n  const instanceMap = new WeakMap<StyleSheet, number>();\n\n  const GlobalStyleComponent: React.ComponentType<ExecutionProps & Props> = props => {\n    const ssc = useStyleSheetContext();\n    const theme = !IS_RSC ? React.useContext(ThemeContext) : undefined;\n\n    // Get or create instance ID for this stylesheet\n    let instance = instanceMap.get(ssc.styleSheet);\n    if (instance === undefined) {\n      instance = ssc.styleSheet.allocateGSInstance(styledComponentId);\n      instanceMap.set(ssc.styleSheet, instance);\n    }\n\n    if (\n      process.env.NODE_ENV !== 'production' &&\n      // @ts-expect-error invariant check\n      React.Children.count(props.children)\n    ) {\n      console.warn(\n        `The global style component ${styledComponentId} was given child JSX. createGlobalStyle does not render children.`\n      );\n    }\n\n    if (\n      process.env.NODE_ENV !== 'production' &&\n      rules.some(rule => typeof rule === 'string' && rule.indexOf('@import') !== -1)\n    ) {\n      console.warn(\n        `Please do not use @import CSS syntax in createGlobalStyle at this time, as the CSSOM APIs we use in production do not handle it well. Instead, we recommend using a library such as react-helmet to inject a typical <link> meta tag to the stylesheet, or simply embedding it manually in your index.html <head> section for a simpler app.`\n      );\n    }\n\n    // Render styles during component execution\n    // Use runtime check since __SERVER__ build constant may not match actual environment\n    const shouldRenderStyles = typeof window === 'undefined' || !ssc.styleSheet.server;\n    if (shouldRenderStyles) {\n      renderStyles(instance, props, ssc.styleSheet, theme, ssc.stylis);\n    }\n\n    // Client-side cleanup: conditionally use hooks\n    // The __SERVER__ and IS_RSC checks are module-level and deterministic, so this doesn't violate rules of hooks\n    if (!__SERVER__ && !IS_RSC) {\n      // Track cleanup state per component instance to handle React StrictMode's simulated unmount/remount\n      const shouldRemoveRef = React.useRef(true);\n\n      React.useLayoutEffect(() => {\n        // Signal that this component is mounted and styles should stay\n        shouldRemoveRef.current = false;\n\n        return () => {\n          // Mark that we're in cleanup\n          shouldRemoveRef.current = true;\n\n          // Use queueMicrotask to delay cleanup slightly.\n          // In React StrictMode's simulated unmount/remount, the next effect\n          // will run before this microtask, setting shouldRemove = false.\n          // In a real unmount, no new effect runs, so styles get removed.\n          queueMicrotask(() => {\n            if (shouldRemoveRef.current) {\n              globalStyle.removeStyles(instance, ssc.styleSheet);\n              // Also remove any SSR-rendered inline style tags with precedence\n              // These persist in the DOM because React 19's hoisted styles don't unmount\n              removeGlobalStyleTag(styledComponentId);\n            }\n          });\n        };\n      }, [instance, ssc.styleSheet]);\n    }\n\n    // RSC mode: output style tag\n    if (IS_RSC) {\n      const id = styledComponentId + instance;\n      const css =\n        typeof window === 'undefined' ? ssc.styleSheet.getTag().getGroup(getGroupForId(id)) : '';\n\n      if (css) {\n        // Use stable href without content hash so React can deduplicate/replace during HMR\n        const href = `${styledComponentId}-${instance}`;\n        return React.createElement('style', {\n          key: href,\n          'data-styled-global': styledComponentId,\n          precedence: 'styled-components',\n          href,\n          children: css,\n        });\n      }\n    }\n\n    return null;\n  };\n\n  function renderStyles(\n    instance: number,\n    props: ExecutionProps,\n    styleSheet: StyleSheet,\n    theme: DefaultTheme | undefined,\n    stylis: Stringifier\n  ) {\n    if (globalStyle.isStatic) {\n      globalStyle.renderStyles(\n        instance,\n        STATIC_EXECUTION_CONTEXT as unknown as ExecutionContext & Props,\n        styleSheet,\n        stylis\n      );\n    } else {\n      const context = {\n        ...props,\n        theme: determineTheme(props, theme, GlobalStyleComponent.defaultProps),\n      } as ExecutionContext & Props;\n\n      globalStyle.renderStyles(instance, context, styleSheet, stylis);\n    }\n  }\n\n  return React.memo(GlobalStyleComponent);\n}\n", "import Keyframes from '../models/Keyframes';\nimport { Interpolation, Styles } from '../types';\nimport generateComponentId from '../utils/generateComponentId';\nimport { joinStringArray } from '../utils/joinStrings';\nimport css from './css';\n\nexport default function keyframes<Props extends object = {}>(\n  strings: Styles<Props>,\n  ...interpolations: Array<Interpolation<Props>>\n): Keyframes {\n  /* Warning if you've used keyframes on React Native */\n  if (\n    process.env.NODE_ENV !== 'production' &&\n    typeof navigator !== 'undefined' &&\n    navigator.product === 'ReactNative'\n  ) {\n    console.warn(\n      '`keyframes` cannot be used on ReactNative, only on the web. To do animation in ReactNative please use Animated.'\n    );\n  }\n\n  const rules = joinStringArray(css<Props>(strings, ...interpolations) as string[]);\n  const name = generateComponentId(rules);\n  return new Keyframes(name, rules);\n}\n", "import React from 'react';\nimport { IS_RSC } from '../constants';\nimport { ThemeContext } from '../models/ThemeProvider';\nimport { AnyComponent, ExecutionProps } from '../types';\nimport determineTheme from '../utils/determineTheme';\nimport getComponentName from '../utils/getComponentName';\nimport hoist, { NonReactStatics } from '../utils/hoist';\n\nexport default function withTheme<T extends AnyComponent>(\n  Component: T\n): React.ForwardRefExoticComponent<\n  React.PropsWithoutRef<React.ComponentPropsWithRef<T> & ExecutionProps> & React.RefAttributes<T>\n> &\n  NonReactStatics<T> {\n  const WithTheme = React.forwardRef<T, React.ComponentPropsWithRef<T> & ExecutionProps>(\n    (props, ref) => {\n      const theme = !IS_RSC ? React.useContext(ThemeContext) : undefined;\n      const themeProp = determineTheme(props, theme, Component.defaultProps);\n\n      if (process.env.NODE_ENV !== 'production' && themeProp === undefined) {\n        console.warn(\n          `[withTheme] You are not using a ThemeProvider nor passing a theme prop or a theme in defaultProps in component class \"${getComponentName(\n            Component\n          )}\"`\n        );\n      }\n\n      return React.createElement(Component, {\n        ...props,\n        theme: themeProp,\n        ref,\n      } as React.ComponentPropsWithRef<T>);\n    }\n  );\n\n  WithTheme.displayName = `WithTheme(${getComponentName(Component)})`;\n\n  return hoist(WithTheme, Component);\n}\n", "import React from 'react';\nimport { type PipeableStream } from 'react-dom/server';\nimport type * as streamInternal from 'stream';\nimport { IS_BROWSER, SC_ATTR, SC_ATTR_VERSION, SC_VERSION } from '../constants';\nimport StyleSheet from '../sheet';\nimport styledError from '../utils/error';\nimport { joinStringArray } from '../utils/joinStrings';\nimport getNonce from '../utils/nonce';\nimport { StyleSheetManager } from './StyleSheetManager';\n\ndeclare const __SERVER__: boolean;\n\nconst CLOSING_TAG_R = /^\\s*<\\/[a-z]/i;\n\nexport default class ServerStyleSheet {\n  instance: StyleSheet;\n  sealed: boolean;\n\n  constructor() {\n    this.instance = new StyleSheet({ isServer: true });\n    this.sealed = false;\n  }\n\n  _emitSheetCSS = (): string => {\n    const css = this.instance.toString();\n    if (!css) return '';\n    const nonce = getNonce();\n    const attrs = [\n      nonce && `nonce=\"${nonce}\"`,\n      `${SC_ATTR}=\"true\"`,\n      `${SC_ATTR_VERSION}=\"${SC_VERSION}\"`,\n    ];\n    const htmlAttr = joinStringArray(attrs.filter(Boolean) as string[], ' ');\n\n    return `<style ${htmlAttr}>${css}</style>`;\n  };\n\n  collectStyles(children: any): React.JSX.Element {\n    if (this.sealed) {\n      throw styledError(2);\n    }\n\n    return <StyleSheetManager sheet={this.instance}>{children}</StyleSheetManager>;\n  }\n\n  getStyleTags = (): string => {\n    if (this.sealed) {\n      throw styledError(2);\n    }\n\n    return this._emitSheetCSS();\n  };\n\n  getStyleElement = () => {\n    if (this.sealed) {\n      throw styledError(2);\n    }\n\n    const css = this.instance.toString();\n    if (!css) return [];\n\n    const props = {\n      [SC_ATTR]: '',\n      [SC_ATTR_VERSION]: SC_VERSION,\n      dangerouslySetInnerHTML: {\n        __html: css,\n      },\n    };\n\n    const nonce = getNonce();\n    if (nonce) {\n      (props as any).nonce = nonce;\n    }\n\n    // v4 returned an array for this fn, so we'll do the same for v5 for backward compat\n    return [<style {...props} key=\"sc-0-0\" />];\n  };\n\n  interleaveWithNodeStream(\n    input: NodeJS.ReadableStream | PipeableStream\n  ): streamInternal.Transform {\n    if (!__SERVER__ || IS_BROWSER) {\n      throw styledError(3);\n    } else if (this.sealed) {\n      throw styledError(2);\n    }\n\n    this.seal();\n\n    const { Transform } = require('stream');\n    const { instance: sheet, _emitSheetCSS } = this;\n\n    const transformer: streamInternal.Transform = new Transform({\n      transform: function appendStyleChunks(\n        chunk: string,\n        /* encoding */\n        _: string,\n        callback: Function\n      ) {\n        // Get the chunk and retrieve the sheet's CSS as an HTML chunk,\n        // then reset its rules so we get only new ones for the next chunk\n        const renderedHtml = chunk.toString();\n        const html = _emitSheetCSS();\n\n        sheet.clearTag();\n\n        // prepend style html to chunk, unless the start of the chunk is a\n        // closing tag in which case append right after that\n        if (CLOSING_TAG_R.test(renderedHtml)) {\n          const endOfClosingTag = renderedHtml.indexOf('>') + 1;\n          const before = renderedHtml.slice(0, endOfClosingTag);\n          const after = renderedHtml.slice(endOfClosingTag);\n\n          this.push(before + html + after);\n        } else {\n          this.push(html + renderedHtml);\n        }\n\n        callback();\n      },\n    });\n\n    // Type guard to determine stream type\n    if ('on' in input && typeof input.on === 'function' && 'pipe' in input) {\n      // NodeJS.ReadableStream\n      const readableStream = input as NodeJS.ReadableStream;\n      readableStream.on('error', err => {\n        // forward the error to the transform stream\n        transformer.emit('error', err);\n      });\n      return readableStream.pipe(transformer);\n    } else if ('pipe' in input && typeof input.pipe === 'function') {\n      // React PipeableStream\n      const pipeableStream = input as PipeableStream;\n      return pipeableStream.pipe(transformer);\n    } else {\n      throw new Error('Unsupported stream type');\n    }\n  }\n\n  seal = (): void => {\n    this.sealed = true;\n  };\n}\n", "import { mainSheet } from './models/StyleSheetManager';\nimport StyleSheet from './sheet';\n\nexport const __PRIVATE__ = {\n  StyleSheet,\n  mainSheet,\n};\n", "/* Import singletons */\nimport { SC_ATTR, SC_VERSION } from './constants';\nimport createGlobalStyle from './constructors/createGlobalStyle';\nimport css from './constructors/css';\nimport keyframes from './constructors/keyframes';\n/* Import Higher Order Components */\nimport withTheme from './hoc/withTheme';\n/* Import hooks */\nimport ServerStyleSheet from './models/ServerStyleSheet';\nimport {\n  IStyleSheetContext,\n  IStyleSheetManager,\n  IStylisContext,\n  StyleSheetConsumer,\n  StyleSheetContext,\n  StyleSheetManager,\n} from './models/StyleSheetManager';\n/* Import components */\nimport ThemeProvider, { ThemeConsumer, ThemeContext, useTheme } from './models/ThemeProvider';\nimport isStyledComponent from './utils/isStyledComponent';\n\n/* Warning if you've imported this file on React Native */\nif (\n  process.env.NODE_ENV !== 'production' &&\n  typeof navigator !== 'undefined' &&\n  navigator.product === 'ReactNative'\n) {\n  console.warn(\n    `It looks like you've imported 'styled-components' on React Native.\\nPerhaps you're looking to import 'styled-components/native'?\\nRead more about this at https://www.styled-components.com/docs/basics#react-native`\n  );\n}\n\nconst windowGlobalKey = `__sc-${SC_ATTR}__`;\n\n/* Warning if there are several instances of styled-components */\nif (\n  process.env.NODE_ENV !== 'production' &&\n  process.env.NODE_ENV !== 'test' &&\n  typeof window !== 'undefined'\n) {\n  // @ts-expect-error dynamic key not in window object\n  window[windowGlobalKey] ||= 0;\n\n  // @ts-expect-error dynamic key not in window object\n  if (window[windowGlobalKey] === 1) {\n    console.warn(\n      `It looks like there are several instances of 'styled-components' initialized in this application. This may cause dynamic styles to not render properly, errors during the rehydration process, a missing theme prop, and makes your application bigger without good reason.\\n\\nSee https://styled-components.com/docs/faqs#why-am-i-getting-a-warning-about-several-instances-of-module-on-the-page for more info.`\n    );\n  }\n\n  // @ts-expect-error dynamic key not in window object\n  window[windowGlobalKey] += 1;\n}\n\n/* Export everything */\nexport * from './secretInternals';\nexport { Attrs, DefaultTheme, ShouldForwardProp } from './types';\nexport {\n  IStyleSheetContext,\n  IStyleSheetManager,\n  IStylisContext,\n  ServerStyleSheet,\n  StyleSheetConsumer,\n  StyleSheetContext,\n  StyleSheetManager,\n  ThemeConsumer,\n  ThemeContext,\n  ThemeProvider,\n  createGlobalStyle,\n  css,\n  isStyledComponent,\n  keyframes,\n  useTheme,\n  SC_VERSION as version,\n  withTheme,\n};\n", "import React from 'react';\nimport styled from 'styled-components';\nconst StyledWrapper = styled.div `\n  height: 16px;\n  width: 16px;\n  transform: translate(-50%, -50%);\n  background: #fff;\n  border-radius: 50%;\n  border: 2px solid #99add1;\n  color: #99add1;\n  font-weight: 800;\n  line-height: 14px;\n  text-align: center;\n  box-sizing: content-box;\n`;\nexport const PlusMinusIcon = (props) => {\n    const { isCollapsed, style, className } = props;\n    return (React.createElement(StyledWrapper, { className: className, style: style }, isCollapsed ? '+' : '-'));\n};\n", "export { OrganizationChartNode } from './organization-chart-node';\nexport { TextNode } from './text-node';\n", "import React from 'react';\nimport styled, { css } from 'styled-components';\nconst StyledWrapper = styled.div `\n  height: inherit;\n  width: inherit;\n  border-radius: 8px;\n  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.12), 0 2px 4px 0 rgba(0, 0, 0, 0.1);\n  position: relative;\n  border: none;\n  background-color: #fff;\n  box-sizing: content-box;\n\n  ${(props) => props.$isActive &&\n    css `\n      transform: translate(-3px, -3px);\n      border: 2px solid #1783ff;\n    `}\n\n  .org-chart-node-line {\n    width: 100%;\n    height: 6px;\n    background-color: ${(props) => props.$color};\n    border-radius: 8px 8px 0 0;\n  }\n\n  .org-chart-node-content {\n    height: calc(100% - 6px);\n    margin: 0 16px 3px;\n    display: flex;\n    align-items: center;\n\n    &-avatar {\n      width: 40px;\n      height: 40px;\n      border-radius: 50%;\n      margin-right: 16px;\n      background-color: ${(props) => props.$color};\n      font-weight: 600;\n      font-size: 18px;\n      text-align: center;\n      line-height: 40px;\n      color: #fff;\n    }\n\n    &-detail {\n      width: calc(100% - 56px);\n    }\n\n    &-name {\n      color: #242424;\n      font-weight: 600;\n      font-size: 18px;\n      margin-bottom: 5px;\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n    }\n\n    &-post {\n      color: #616161;\n      font-size: 14px;\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n    }\n  }\n`;\nexport const OrganizationChartNode = (props) => {\n    const { name, position, status = 'online', isActive, className, style } = props;\n    const colorMap = {\n        online: '#1783FF',\n        busy: '#00C9C9',\n        offline: '#F08F56',\n    };\n    return (React.createElement(StyledWrapper, { \"$color\": colorMap[status], \"$isActive\": isActive, className: className, style: style },\n        React.createElement(\"div\", { className: \"org-chart-node-line\" }),\n        React.createElement(\"div\", { className: \"org-chart-node-content\" },\n            React.createElement(\"div\", { className: \"org-chart-node-content-avatar\" }, name.slice(0, 1)),\n            React.createElement(\"div\", { className: \"org-chart-node-content-detail\" },\n                React.createElement(\"div\", { className: \"org-chart-node-content-name\" }, name),\n                position && React.createElement(\"div\", { className: \"org-chart-node-content-post\" }, position)))));\n};\n", "var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\n    return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport * as ReactDOM from 'react-dom';\n// Let compiler not to search module usage\nvar fullClone = __assign({}, ReactDOM);\nvar version = fullClone.version, reactRender = fullClone.render, unmountComponentAtNode = fullClone.unmountComponentAtNode;\nvar createRoot;\ntry {\n    var mainVersion = Number((version || '').split('.')[0]);\n    if (mainVersion >= 18) {\n        (createRoot = fullClone.createRoot);\n    }\n}\ncatch (e) {\n    // Do nothing;\n}\nfunction toggleWarning(skip) {\n    var __SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED = fullClone.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n    if (__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED &&\n        typeof __SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED === 'object') {\n        __SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.usingClientEntryPoint = skip;\n    }\n}\nvar MARK = '__rc_react_root__';\nfunction modernRender(node, container) {\n    toggleWarning(true);\n    var root = container[MARK] || createRoot(container);\n    toggleWarning(false);\n    root.render(node);\n    container[MARK] = root;\n}\nfunction legacyRender(node, container) {\n    reactRender(node, container);\n}\n/** @private Test usage. Not work in prod */\nexport function _r(node, container) {\n    if (process.env.NODE_ENV !== 'production') {\n        return legacyRender(node, container);\n    }\n}\nexport function render(node, container) {\n    if (createRoot) {\n        modernRender(node, container);\n        return;\n    }\n    legacyRender(node, container);\n}\n// ========================= Unmount ==========================\nfunction modernUnmount(container) {\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            // Delay to unmount to avoid React 18 sync warning\n            return [2 /*return*/, Promise.resolve().then(function () {\n                    var _a;\n                    (_a = container[MARK]) === null || _a === void 0 ? void 0 : _a.unmount();\n                    delete container[MARK];\n                })];\n        });\n    });\n}\nfunction legacyUnmount(container) {\n    unmountComponentAtNode(container);\n}\n/** @private Test usage. Not work in prod */\nexport function _u(container) {\n    if (process.env.NODE_ENV !== 'production') {\n        return legacyUnmount(container);\n    }\n}\nexport function unmount(container) {\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            if (createRoot !== undefined) {\n                // Delay to unmount to avoid React 18 sync warning\n                return [2 /*return*/, modernUnmount(container)];\n            }\n            legacyUnmount(container);\n            return [2 /*return*/];\n        });\n    });\n}\n", "import { render } from '../react/render';\nvar mountMapping = new Map();\nif (typeof document !== 'undefined') {\n    mountMapping.set('tooltip', document.createElement('div'));\n}\nexport var createNode = function (children, isTooltip) {\n    if (isTooltip === void 0) { isTooltip = false; }\n    var mount = null;\n    /**\n     * @description tooltip root\n     */\n    if (isTooltip) {\n        mount = mountMapping.get('tooltip');\n    }\n    else {\n        mount = document.createElement('div');\n        if (children === null || children === void 0 ? void 0 : children.key) {\n            var exist = mountMapping.get(children.key);\n            if (exist) {\n                mount = exist;\n            }\n            else {\n                mountMapping.set(children.key, mount);\n            }\n        }\n    }\n    render(children, mount);\n    return mount;\n};\n", "import React from 'react';\nvar shadowLoading = function (ele) {\n    if (typeof document === 'undefined') {\n        return 'loading';\n    }\n    var shadowRoot = ele.attachShadow({ mode: 'open' });\n    var shadowDiv = document.createElement('div');\n    var shadowStyle = document.createElement('style');\n    shadowStyle.innerHTML = \".loading {\\n    display: inline-block;\\n    position: relative;\\n    width: 80px;\\n    height: 80px;\\n  }\\n  .loading div {\\n    position: absolute;\\n    top: 33px;\\n    width: 13px;\\n    height: 13px;\\n    border-radius: 50%;\\n    background: #ccc;\\n    animation-timing-function: cubic-bezier(0, 1, 1, 0);\\n  }\\n  .loading div:nth-child(1) {\\n    left: 8px;\\n    animation: loading1 0.6s infinite;\\n  }\\n  .loading div:nth-child(2) {\\n    left: 8px;\\n    animation: loading2 0.6s infinite;\\n  }\\n  .loading div:nth-child(3) {\\n    left: 32px;\\n    animation: loading2 0.6s infinite;\\n  }\\n  .loading div:nth-child(4) {\\n    left: 56px;\\n    animation: loading3 0.6s infinite;\\n  }\\n  @keyframes loading1 {\\n    0% {\\n      transform: scale(0);\\n    }\\n    100% {\\n      transform: scale(1);\\n    }\\n  }\\n  @keyframes loading3 {\\n    0% {\\n      transform: scale(1);\\n    }\\n    100% {\\n      transform: scale(0);\\n    }\\n  }\\n  @keyframes loading2 {\\n    0% {\\n      transform: translate(0, 0);\\n    }\\n    100% {\\n      transform: translate(24px, 0);\\n    }\\n  }\\n  \";\n    shadowDiv.classList.add('loading');\n    shadowDiv.innerHTML = '<div></div><div></div><div></div><div></div>';\n    shadowRoot.appendChild(shadowStyle);\n    shadowRoot.appendChild(shadowDiv);\n};\nexport var ChartLoading = function (_a) {\n    var loadingTemplate = _a.loadingTemplate, _b = _a.theme, theme = _b === void 0 ? 'light' : _b;\n    var shadow = React.useRef(null);\n    React.useEffect(function () {\n        if (!loadingTemplate && shadow.current) {\n            shadowLoading(shadow.current);\n        }\n    }, []);\n    var renderLoading = function () {\n        if (loadingTemplate)\n            return loadingTemplate;\n        return React.createElement(\"div\", { ref: shadow });\n    };\n    return (React.createElement(\"div\", { className: \"charts-loading-container\", style: {\n            position: 'absolute',\n            width: '100%',\n            height: '100%',\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            left: 0,\n            top: 0,\n            zIndex: 99,\n            backgroundColor: theme === 'dark' ? 'rgb(20, 20, 20)' : 'rgb(255, 255, 255)',\n        } }, renderLoading()));\n};\n", "var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport React, { Fragment } from 'react';\nvar ErrorBoundary = /** @class */ (function (_super) {\n    __extends(ErrorBoundary, _super);\n    function ErrorBoundary() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.state = {\n            hasError: false,\n        };\n        _this.renderError = function (e) {\n            var errorTemplate = _this.props.errorTemplate;\n            switch (e) {\n                default:\n                    if (typeof errorTemplate === 'function')\n                        return errorTemplate(e);\n                    return errorTemplate ? errorTemplate : React.createElement(\"h5\", null,\n                        \"\\u7EC4\\u4EF6\\u51FA\\u9519\\u4E86\\uFF0C\\u8BF7\\u6838\\u67E5\\u540E\\u91CD\\u8BD5\\uFF1A \",\n                        e.message);\n            }\n        };\n        return _this;\n    }\n    ErrorBoundary.getDerivedStateFromError = function (error) {\n        return { hasError: true, error: error };\n    };\n    ErrorBoundary.getDerivedStateFromProps = function (nextProps, state) {\n        if (state.children !== nextProps.children) {\n            return {\n                children: nextProps.children,\n                hasError: false,\n                error: undefined,\n            };\n        }\n        return null;\n    };\n    ErrorBoundary.prototype.render = function () {\n        if (this.state.hasError) {\n            return this.renderError(this.state.error);\n        }\n        return React.createElement(Fragment, null, this.props.children);\n    };\n    return ErrorBoundary;\n}(React.Component));\nexport { ErrorBoundary };\n", "var __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nimport { isString, memoize, values } from 'lodash';\nimport { getCanvasContext } from './context';\n/**\n * \n * @see https://developer.mozilla.org/zh-CN/docs/Web/API/CanvasRenderingContext2D/measureText\n */\nexport var measureText = memoize(function (text, font) {\n    if (font === void 0) { font = {}; }\n    var fontSize = font.fontSize, _a = font.fontFamily, fontFamily = _a === void 0 ? 'sans-serif' : _a, fontWeight = font.fontWeight, fontStyle = font.fontStyle, fontVariant = font.fontVariant;\n    var ctx = getCanvasContext();\n    // @see https://developer.mozilla.org/zh-CN/docs/Web/CSS/font\n    ctx.font = [fontStyle, fontWeight, fontVariant, \"\".concat(fontSize, \"px\"), fontFamily].join(' ');\n    return ctx.measureText(isString(text) ? text : '');\n}, function (text, font) {\n    if (font === void 0) { font = {}; }\n    return __spreadArray([text], values(font), true).join('');\n});\n/**\n * \n * @param text \n * @param font \n */\nexport var measureTextWidth = function (text, font) {\n    if (font === void 0) { font = {}; }\n    return measureText(text, font).width;\n};\n/**\n * \n * @param text \n * @param font \n */\nexport var measureTextHeight = function (text, font) {\n    if (font === void 0) { font = {}; }\n    var metrics = measureText(text, font);\n    return metrics.actualBoundingBoxAscent + metrics.actualBoundingBoxDescent;\n};\n", "var ctx;\n/**\n *  canvas context\n */\nexport var getCanvasContext = function () {\n    if (!ctx) {\n        ctx = document.createElement('canvas').getContext('2d');\n    }\n    return ctx;\n};\n", "import { measureTextWidth } from '@ant-design/charts-util';\nimport React from 'react';\nimport styled, { css } from 'styled-components';\nimport { darkenHexColor, hexToRgba } from '../../utils/color';\nconst StyledWrapper = styled.div `\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  overflow-wrap: anywhere;\n  line-height: 1.5em;\n  text-align: center;\n  height: inherit;\n  width: inherit;\n  box-sizing: content-box;\n  font-size: 14px;\n\n  ${({ $type, $color, $borderWidth }) => {\n    switch ($type) {\n        case 'normal':\n            return `\n          color: ${$color};\n        `;\n        case 'filled':\n            return css `\n          color: #fff;\n          background-color: ${$color};\n          border-radius: 8px;\n        `;\n        case 'outlined':\n            return css `\n          height: calc(100% - 2 * ${$borderWidth}px);\n          width: calc(100% - 2 * ${$borderWidth}px);\n          color: ${$color};\n          background-color: #fff;\n          border: ${$borderWidth}px solid ${$color};\n          border-radius: 8px;\n        `;\n        case 'underlined':\n            return css `\n          height: calc(100% - ${$borderWidth}px / 2);\n          width: inherit;\n          border-bottom: ${$borderWidth}px solid ${$color};\n          background-color: #fff;\n          color: ${$color};\n        `;\n    }\n}}\n\n  ${({ $isActive, $isSelected, $borderWidth, $color }) => ($isActive || $isSelected) &&\n    css `\n      height: calc(100% - 2 * ${$borderWidth}px);\n      width: calc(100% - 2 * ${$borderWidth}px);\n      border: ${$borderWidth}px solid ${darkenHexColor($color, 100)};\n      ${$isSelected && `box-shadow: 0 0 0 2px ${hexToRgba($color, 0.1)};`}\n    `}\n`;\nexport const TextNode = (props) => {\n    const { className, style = {}, type = 'normal', text = '', font, color = '#1783ff', borderWidth = 3, maxWidth = Infinity, isActive = false, isSelected = false, } = props;\n    const isMultiLine = measureTextWidth(text, font) > maxWidth;\n    return (React.createElement(StyledWrapper, { \"$type\": type, \"$color\": color, \"$borderWidth\": borderWidth, \"$isActive\": isActive, \"$isSelected\": isSelected, className: `text-node text-node-${type} ${className || ''}`, style: { ...style, ...font } },\n        React.createElement(\"div\", { style: isMultiLine ? { width: 'calc(100% - 12px)' } : {} }, text)));\n};\n", "export function hexToRgba(hex, opacity) {\n    let r = 0, g = 0, b = 0;\n    if (hex.length === 4) {\n        r = parseInt(hex[1] + hex[1], 16);\n        g = parseInt(hex[2] + hex[2], 16);\n        b = parseInt(hex[3] + hex[3], 16);\n    }\n    else if (hex.length === 7) {\n        r = parseInt(hex[1] + hex[2], 16);\n        g = parseInt(hex[3] + hex[4], 16);\n        b = parseInt(hex[5] + hex[6], 16);\n    }\n    return `rgba(${r}, ${g}, ${b}, ${opacity})`;\n}\nexport function darkenHexColor(hex, amount) {\n    let r = 0, g = 0, b = 0;\n    if (hex.length === 4) {\n        r = parseInt(hex[1] + hex[1], 16);\n        g = parseInt(hex[2] + hex[2], 16);\n        b = parseInt(hex[3] + hex[3], 16);\n    }\n    else if (hex.length === 7) {\n        r = parseInt(hex[1] + hex[2], 16);\n        g = parseInt(hex[3] + hex[4], 16);\n        b = parseInt(hex[5] + hex[6], 16);\n    }\n    r = Math.max(0, r - amount);\n    g = Math.max(0, g - amount);\n    b = Math.max(0, b - amount);\n    const toHex = (c) => c.toString(16).padStart(2, '0');\n    return `#${toHex(r)}${toHex(g)}${toHex(b)}`;\n}\n", "import { idOf } from '@antv/g6';\nimport { get, isEmpty } from 'lodash';\nimport React, { useEffect, useRef, useState } from 'react';\nimport styled, { css } from 'styled-components';\nconst StyledWrapper = styled.div `\n  position: relative;\n  height: inherit;\n  width: inherit;\n`;\nconst StyledIconWrapper = styled.div `\n  position: absolute;\n  z-index: 10;\n\n  &:hover {\n    cursor: pointer;\n  }\n\n  ${({ $placement, $offsetX, $offsetY }) => {\n    const positions = {\n        top: `left: calc(50% + ${$offsetX}px); top: ${$offsetY}px;`,\n        bottom: `left: calc(50% + ${$offsetX}px); top: calc(100% + ${$offsetY}px);`,\n        right: `left: calc(100% + ${$offsetX}px); top: calc(50% + ${$offsetY}px);`,\n        left: `left: ${$offsetX}px; top: calc(50% + ${$offsetY}px);`,\n    };\n    return css `\n      ${positions[$placement]}\n    `;\n}}\n`;\nexport const withCollapsibleNode = (NodeComponent) => {\n    return (props) => {\n        const { data, graph, trigger, iconRender, iconPlacement, iconOffsetX, iconOffsetY, iconClassName, iconStyle, refreshLayout, } = props;\n        const [isCollapsed, setIsCollapsed] = useState(get(data, 'style.collapsed', false));\n        const wrapperRef = useRef(null);\n        const iconRef = useRef(null);\n        const isIconShown = trigger === 'icon' && !isEmpty(data.children);\n        const handleClickCollapse = async (e) => {\n            e.stopPropagation();\n            const toggleExpandCollapse = isCollapsed ? 'expandElement' : 'collapseElement';\n            await graph[toggleExpandCollapse](idOf(data));\n            setIsCollapsed((prev) => !prev);\n            if (refreshLayout) {\n                await graph.layout();\n            }\n        };\n        useEffect(() => {\n            const target = trigger === 'icon' ? iconRef.current : trigger === 'node' ? wrapperRef.current : trigger;\n            target?.addEventListener('click', handleClickCollapse);\n            return () => {\n                target?.removeEventListener('click', handleClickCollapse);\n            };\n        }, [trigger, isCollapsed]);\n        const computeCallbackStyle = (callableStyle) => {\n            return typeof callableStyle === 'function' ? callableStyle.call(graph, data) : callableStyle;\n        };\n        return (React.createElement(StyledWrapper, { ref: wrapperRef, className: \"collapsible-node-wrapper\" },\n            isIconShown && (React.createElement(StyledIconWrapper, { ref: iconRef, \"$placement\": computeCallbackStyle(iconPlacement), \"$offsetX\": computeCallbackStyle(iconOffsetX), \"$offsetY\": computeCallbackStyle(iconOffsetY), className: iconClassName, style: iconStyle }, iconRender?.call(graph, isCollapsed, data))),\n            NodeComponent.call(graph, data)));\n    };\n};\n", "import { treeToGraphData } from '@antv/g6';\n/**\n * \n * @param nodeId -  ID\n * @param edges - \n * @param direction - \n * @returns  ID\n */\nexport const getNeighborNodeIds = (nodeId, edges, direction) => {\n    const getSuccessorNodeIds = (reverse = false) => {\n        const [source, target] = reverse ? ['target', 'source'] : ['source', 'target'];\n        return edges.filter((edge) => edge[source] === nodeId).map((edge) => edge[target]);\n    };\n    if (direction === 'out')\n        return getSuccessorNodeIds();\n    if (direction === 'in')\n        return getSuccessorNodeIds(true);\n    return getSuccessorNodeIds().concat(getSuccessorNodeIds(true));\n};\nconst EMPTY_GRAPH_DATA = { nodes: [], edges: [] };\n/**\n * \n * @param data - \n * @returns  true false\n */\nexport function isTreeData(data) {\n    if (typeof data !== 'object' || data === null)\n        return false;\n    if (!('id' in data))\n        return false;\n    if ('children' in data) {\n        if (!Array.isArray(data.children))\n            return false;\n        for (const child of data.children) {\n            if (!isTreeData(child))\n                return false;\n        }\n    }\n    return true;\n}\n/**\n * \n * @param data - \n * @returns  true false\n */\nexport function isGraphData(data) {\n    if (typeof data !== 'object' || data === null)\n        return false;\n    if (!Object.keys(data).every((key) => ['nodes', 'edges', 'combos'].includes(key))) {\n        return false;\n    }\n    const { nodes = [], edges = [], combos = [] } = data;\n    if (!Array.isArray(nodes) || !Array.isArray(edges) || !Array.isArray(combos)) {\n        return false;\n    }\n    const nodeIds = new Set(nodes.map((node) => node.id));\n    if (!nodes.every((node) => typeof node === 'object' && node !== null && 'id' in node)) {\n        return false;\n    }\n    if (!edges.every((edge) => nodeIds.has(edge.source) && nodeIds.has(edge.target))) {\n        return false;\n    }\n    return true;\n}\n/**\n * \n * @param data - \n * @returns \n */\nexport function graphData2TreeData(data) {\n    if (!isGraphData(data)) {\n        return;\n    }\n    const { nodes = [], edges = [] } = data;\n    const nodeMap = Object.fromEntries(nodes.map((node) => [node.id, node]));\n    const indegree = Object.fromEntries(nodes.map((node) => [node.id, 0]));\n    const adjList = Object.fromEntries(nodes.map((node) => [node.id, []]));\n    for (const { source, target } of edges) {\n        adjList[source].push(target);\n        indegree[target] = (indegree[target] || 0) + 1;\n    }\n    const roots = Object.entries(indegree)\n        .filter(([_, deg]) => deg === 0)\n        .map(([id]) => id);\n    if (roots.length !== 1) {\n        return;\n    }\n    const buildTree = (nodeId) => {\n        const node = nodeMap[nodeId];\n        return {\n            ...node,\n            children: adjList[nodeId].map(buildTree),\n        };\n    };\n    return buildTree(roots[0]);\n}\n/**\n * \n * @param data - \n * @param defaultExpandLevel - \n * @returns \n */\nexport function treeData2GraphData(data, defaultExpandLevel) {\n    if (!isTreeData(data))\n        return EMPTY_GRAPH_DATA;\n    return treeToGraphData(data, {\n        getNodeData: (datum, depth) => {\n            datum.depth = depth;\n            datum.style ||= {};\n            if (defaultExpandLevel) {\n                datum.style.collapsed = depth >= defaultExpandLevel;\n            }\n            if (!datum.children)\n                return datum;\n            const { children, ...restDatum } = datum;\n            return { ...restDatum, children: children.map((child) => child.id) };\n        },\n    });\n}\n/**\n * Used in TreeGraph scene, accepts tree data or graph data that meets certain conditions\n *\n * Conditions are as follows:\n * 1. There is only one root node\n * 2. Node ID is unique\n * 3. The source and target of the edge are in the node ID\n * 4. No cycle\n * 5. The indegree of the child node is 1\n */\nexport function formatTreeData(data, defaultExpandLevel) {\n    if (!data)\n        return EMPTY_GRAPH_DATA;\n    const treeData = isGraphData(data) ? graphData2TreeData(data) : data;\n    if (!treeData)\n        return EMPTY_GRAPH_DATA;\n    return treeData2GraphData(treeData, defaultExpandLevel);\n}\n", "/**\n * \n * @param value - \n * @param domain -  [, ]\n * @param range -  [, ]\n * @returns \n */\nexport const linear = (value, domain, range) => {\n    const [d0, d1] = domain;\n    const [r0, r1] = range;\n    if (d1 === d0)\n        return r0;\n    const ratio = (value - d0) / (d1 - d0);\n    return r0 + ratio * (r1 - r0);\n};\n/**\n * \n * @param value - \n * @param domain -  [, ]\n * @param range -  [, ]\n * @returns \n */\nexport const log = (value, domain, range) => {\n    const [d0, d1] = domain;\n    const [r0, r1] = range;\n    const ratio = Math.log(value - d0 + 1) / Math.log(d1 - d0 + 1);\n    return r0 + ratio * (r1 - r0);\n};\n/**\n * \n * @param value - \n * @param domain -  [, ]\n * @param range -  [, ]\n * @param exponent - \n * @returns \n */\nexport const pow = (value, domain, range, exponent = 2) => {\n    const [d0, d1] = domain;\n    const [r0, r1] = range;\n    const ratio = Math.pow((value - d0) / (d1 - d0), exponent);\n    return r0 + ratio * (r1 - r0);\n};\n/**\n * \n * @param value - \n * @param domain -  [, ]\n * @param range -  [, ]\n * @returns \n */\nexport const sqrt = (value, domain, range) => {\n    const [d0, d1] = domain;\n    const [r0, r1] = range;\n    const ratio = Math.sqrt((value - d0) / (d1 - d0));\n    return r0 + ratio * (r1 - r0);\n};\n", "import { BaseTransform, idOf } from '@antv/g6';\nimport { linear, log, pow, sqrt } from '../utils/scale';\nexport class MapEdgeLineWidth extends BaseTransform {\n    static defaultOptions = {\n        minValue: (edge, edges) => Math.min(...Object.values(edges)),\n        maxValue: (edge, edges) => Math.max(...Object.values(edges)),\n        minLineWidth: 1,\n        maxLineWidth: 10,\n        scale: 'linear',\n    };\n    constructor(context, options) {\n        super(context, Object.assign({}, MapEdgeLineWidth.defaultOptions, options));\n    }\n    beforeDraw(input) {\n        const { maxValue, minValue, maxLineWidth, minLineWidth, scale, value } = this.options;\n        const edges = this.context.model.getEdgeData();\n        const valueFunc = typeof value === 'function' ? value : () => value;\n        const values = Object.fromEntries(edges.map((edge) => [idOf(edge), valueFunc(edge)]));\n        const { add: { edges: edgesToAdd }, update: { edges: edgesToUpdate }, } = input;\n        [...edgesToAdd.values(), ...edgesToUpdate.values()].forEach((edge) => {\n            const lineWidth = this.assignLineWidthByValue(values[idOf(edge)] || 0, typeof minValue === 'function' ? minValue(edge, values) : minValue, typeof maxValue === 'function' ? maxValue(edge, values) : maxValue, typeof minLineWidth === 'function' ? minLineWidth(edge) : minLineWidth, typeof maxLineWidth === 'function' ? maxLineWidth(edge) : maxLineWidth, scale);\n            edge.style ||= {};\n            edge.style.lineWidth = lineWidth;\n        });\n        return input;\n    }\n    assignLineWidthByValue = (value, minValue, maxValue, minLineWidth, maxLineWidth, scale) => {\n        const domain = [minValue, maxValue];\n        const range = [minLineWidth, maxLineWidth];\n        if (value < minValue || value > maxValue || minValue === maxValue)\n            return range[0];\n        if (typeof scale === 'function')\n            return scale(value, domain, range);\n        switch (scale) {\n            case 'linear':\n                return linear(value, domain, range);\n            case 'log':\n                return log(value, domain, range);\n            case 'pow':\n                return pow(value, domain, range, 2);\n            case 'sqrt':\n                return sqrt(value, domain, range);\n            default:\n                return range[0];\n        }\n    };\n}\n", "import { BaseTransform, parseSize } from '@antv/g6';\n/**\n * HTML  G6  dx  dy\n */\nexport class TranslateReactNodeOrigin extends BaseTransform {\n    beforeDraw(input) {\n        const { graph, element } = this.context;\n        const { add: { nodes: nodesToAdd }, update: { nodes: nodesToUpdate }, } = input;\n        [...nodesToAdd.values(), ...nodesToUpdate.values()].forEach((datum) => {\n            // @ts-expect-error private method invoke\n            element.computeElementDefaultStyle('node', { graph, datum });\n            const style = element.getDefaultStyle(datum.id);\n            const [width, height] = parseSize(style.size);\n            if (!datum.style)\n                datum.style = {};\n            datum.style.dx = -width / 2;\n            datum.style.dy = -height / 2;\n        });\n        return input;\n    }\n}\n", "import { ReactNode } from '@antv/g6-extension-react';\nimport { HoverActivateChain, HoverActivateNeighbors } from '../behaviors';\nimport { IndentedEdge } from '../edges';\nimport { ArrangeEdgeZIndex, AssignColorByBranch, CollapseExpandReactNode, MapEdgeLineWidth, TranslateReactNodeOrigin, } from '../transform';\nexport const BUILT_IN_EXTENSIONS = {\n    node: {\n        react: ReactNode,\n    },\n    edge: {\n        indented: IndentedEdge,\n    },\n    behavior: {\n        'hover-activate-neighbors': HoverActivateNeighbors,\n        'hover-activate-chain': HoverActivateChain,\n    },\n    transform: {\n        'translate-react-node-origin': TranslateReactNodeOrigin,\n        'collapse-expand-react-node': CollapseExpandReactNode,\n        'assign-color-by-branch': AssignColorByBranch,\n        'map-edge-line-width': MapEdgeLineWidth,\n        'arrange-edge-z-index': ArrangeEdgeZIndex,\n    },\n};\n", "import { register } from '@antv/g6';\nimport { BUILT_IN_EXTENSIONS } from './build-in';\nexport function registerBuiltInExtensions() {\n    Object.entries(BUILT_IN_EXTENSIONS).forEach(([category, extensions]) => {\n        Object.entries(extensions).forEach(([type, extension]) => {\n            register(category, type, extension);\n        });\n    });\n}\n", "import { registerBuiltInExtensions } from './core/registry/register';\nregisterBuiltInExtensions();\n", "import React, { forwardRef, useMemo, } from 'react';\nimport { BaseGraph } from '../../core/base-graph';\nimport { COMMON_OPTIONS } from '../../core/constants';\nimport { formatTreeData } from '../../core/utils/data';\nimport { mergeOptions } from '../../core/utils/options';\nimport { DEFAULT_OPTIONS, getDendrogramOptions } from './options';\nexport const Dendrogram = forwardRef(({ children, ...props }, ref) => {\n    const options = useMemo(() => {\n        const { data, defaultExpandLevel, direction = 'horizontal', compact = false, ...restProps } = props;\n        return mergeOptions(COMMON_OPTIONS, DEFAULT_OPTIONS, { data: formatTreeData(data, defaultExpandLevel) }, getDendrogramOptions({ direction, compact }), restProps);\n    }, [props]);\n    return (React.createElement(BaseGraph, { ...options, ref: ref }, children));\n});\n", "import React from 'react';\nexport var GraphinContext = React.createContext({\n    graph: null,\n    isReady: false,\n});\nexport var useGraphin = function () {\n    var context = React.useContext(GraphinContext);\n    if (context === undefined || Object.keys(context).length === 0) {\n        throw new Error('useGraphin must be used within a GraphinProvider.');\n    }\n    return context;\n};\n", "var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nimport React, { forwardRef, memo, useImperativeHandle } from 'react';\nimport { GraphinContext } from './context';\nimport useGraph from './hooks/useGraph';\n/**\n * Graphin, the react component for G6.\n */\nvar Graph = forwardRef(function (props, ref) {\n    var style = props.style, children = props.children, restProps = __rest(props, [\"style\", \"children\"]);\n    var _a = useGraph(restProps), graph = _a.graph, containerRef = _a.containerRef, isReady = _a.isReady;\n    useImperativeHandle(ref, function () { return graph; }, [graph]);\n    var containerStyle = __assign({ height: 'inherit', position: 'relative' }, style);\n    if (children) {\n        return (React.createElement(GraphinContext.Provider, { value: { graph: graph, isReady: isReady } },\n            React.createElement(\"div\", { ref: containerRef, style: containerStyle }, isReady && children)));\n    }\n    return React.createElement(\"div\", { ref: containerRef, style: containerStyle });\n});\nexport var Graphin = memo(Graph);\n", "var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nimport { Graph } from '@antv/g6';\nimport { useEffect, useRef, useState } from 'react';\n/**\n * Hook for creating and managing a G6 graph instance.\n * @param props The props for the Graphin component.\n * @returns An object containing the graph instance, the container ref, and a boolean indicating whether the graph is ready.\n */\nexport default function useGraph(props) {\n    var onInit = props.onInit, onReady = props.onReady, onDestroy = props.onDestroy, options = props.options;\n    var _a = __read(useState(false), 2), isReady = _a[0], setIsReady = _a[1];\n    var graphRef = useRef(null);\n    var containerRef = useRef(null);\n    useEffect(function () {\n        if (graphRef.current || !containerRef.current)\n            return;\n        var graph = new Graph(__assign({ container: containerRef.current }, options));\n        graphRef.current = graph;\n        setIsReady(true);\n        onInit === null || onInit === void 0 ? void 0 : onInit(graphRef.current);\n        return function () {\n            var graph = graphRef.current;\n            if (graph) {\n                graph.destroy();\n                onDestroy === null || onDestroy === void 0 ? void 0 : onDestroy();\n                graphRef.current = null;\n            }\n        };\n    }, []);\n    useEffect(function () {\n        var container = containerRef.current;\n        var graph = graphRef.current;\n        if (!options || !container || !graph || graph.destroyed)\n            return;\n        graph.setOptions(options);\n        graph.render().then(function () { return onReady === null || onReady === void 0 ? void 0 : onReady(graph); });\n    }, [options]);\n    return {\n        graph: graphRef.current,\n        containerRef: containerRef,\n        isReady: isReady,\n    };\n}\n", "import { ChartLoading, ErrorBoundary } from '@ant-design/charts-util';\nimport { Graphin } from '@antv/graphin';\nimport { isEmpty } from 'lodash';\nimport React, { forwardRef, useImperativeHandle, useRef, } from 'react';\nexport const BaseGraph = forwardRef(({ children, ...props }, ref) => {\n    const { containerStyle, className, onInit, onReady, onDestroy, errorTemplate, loading, loadingTemplate, ...options } = props;\n    const graphRef = useRef(null);\n    useImperativeHandle(ref, () => graphRef.current);\n    return (React.createElement(ErrorBoundary, { errorTemplate: errorTemplate },\n        loading && React.createElement(ChartLoading, { loadingTemplate: loadingTemplate }),\n        !isEmpty(options.data) && (React.createElement(Graphin, { ref: (ref) => {\n                graphRef.current = ref;\n            }, className: className, style: containerStyle, options: options, onInit: onInit, onReady: onReady, onDestroy: onDestroy }, children))));\n});\n", "export const COMMON_OPTIONS = {\n    autoResize: true,\n    behaviors: [\n        {\n            key: 'zoom-canvas',\n            type: 'zoom-canvas',\n        },\n        {\n            key: 'drag-canvas',\n            type: 'drag-canvas',\n        },\n    ],\n};\n", "import { isPlainObject } from 'lodash';\n/**\n * \n * @param options \n * @returns \n */\nexport function mergeOptions(...options) {\n    if (options.length === 0)\n        return {};\n    const merged = { ...options[0] };\n    for (let i = 1; i < options.length; i++) {\n        const currentOptions = options[i];\n        for (const key in currentOptions) {\n            if (currentOptions.hasOwnProperty(key)) {\n                const currValue = currentOptions[key];\n                const prevValue = merged[key];\n                if (['component', 'data'].includes(key)) {\n                    merged[key] = currValue;\n                }\n                else if (typeof currValue === 'function') {\n                    if (['plugins', 'behaviors', 'transforms'].includes(key)) {\n                        merged[key] = currValue(prevValue || []);\n                    }\n                    else {\n                        merged[key] = function (datum) {\n                            const value = currValue.call(this, datum);\n                            if (isPlainObject(value))\n                                return mergeOptions(prevValue, value);\n                            return value;\n                        };\n                    }\n                }\n                else if (isPlainObject(currValue) && isPlainObject(prevValue)) {\n                    merged[key] = mergeOptions(prevValue, currValue);\n                }\n                else {\n                    merged[key] = currValue;\n                }\n            }\n        }\n    }\n    return merged;\n}\n", "import { isEmpty } from 'lodash';\nexport const DEFAULT_OPTIONS = {\n    node: {\n        type: 'circle',\n        style: {\n            labelText: (d) => d.id,\n        },\n    },\n};\nexport const getDendrogramOptions = ({ direction, compact, }) => {\n    const isLeafNode = (d) => isEmpty(d.children);\n    const layoutType = compact ? 'compact-box' : 'dendrogram';\n    if (direction === 'vertical') {\n        return {\n            node: {\n                style: {\n                    labelBackground: true,\n                    labelPlacement: 'right',\n                    labelTransform: (d) => (isLeafNode(d) ? 'rotate(90deg) translate(18px)' : 'translate(18px)'),\n                    ports: [{ placement: 'top' }, { placement: 'bottom' }],\n                },\n            },\n            edge: { type: 'cubic-vertical' },\n            layout: { type: layoutType, direction: 'TB', nodeSep: 40, rankSep: 140, getVGap: () => 80, getHGap: () => 20 },\n        };\n    }\n    else if (direction === 'horizontal') {\n        return {\n            node: {\n                style: {\n                    labelBackground: true,\n                    labelPlacement: (d) => (isLeafNode(d) ? 'right' : 'left'),\n                    ports: [{ placement: 'left' }, { placement: 'right' }],\n                },\n            },\n            edge: { type: 'cubic-horizontal' },\n            layout: { type: layoutType, direction: 'LR', nodeSep: 40, rankSep: 200, getVGap: () => 5, getHGap: () => 100 },\n        };\n    }\n    else {\n        return {\n            node: { style: { labelBackground: true } },\n            edge: { type: 'cubic-radial' },\n            layout: {\n                type: layoutType,\n                direction: 'RL',\n                radial: true,\n                nodeSep: 40,\n                rankSep: 200,\n                getVGap: () => 30,\n                getHGap: () => 60,\n            },\n            transforms: (prev) => [...prev, 'place-radial-labels'],\n        };\n    }\n};\n", "import React, { forwardRef, useMemo, } from 'react';\nimport { BaseGraph } from '../../core/base-graph';\nimport { COMMON_OPTIONS } from '../../core/constants';\nimport { formatTreeData } from '../../core/utils/data';\nimport { mergeOptions } from '../../core/utils/options';\nimport { DEFAULT_OPTIONS, getFishboneOptions } from './options';\nexport const Fishbone = forwardRef(({ children, ...props }, ref) => {\n    const { data, defaultExpandLevel, type = 'cause', labelField, ...restProps } = props;\n    const options = useMemo(() => mergeOptions(COMMON_OPTIONS, DEFAULT_OPTIONS, { data: formatTreeData(data) }, getFishboneOptions({ type, labelField }), restProps), [props]);\n    return (React.createElement(BaseGraph, { ...options, ref: ref }, children));\n});\n", "import { get } from 'lodash';\nimport { formatLabel } from '../../core/utils/label';\nimport { measureTextSize } from '../../core/utils/measure-text';\nexport const DEFAULT_OPTIONS = {\n    node: {\n        style: {\n            size: 10,\n            labelPlacement: 'center',\n        },\n    },\n    edge: {\n        type: 'polyline',\n    },\n    layout: {\n        type: 'fishbone',\n        hGap: 40,\n        vGap: 60,\n    },\n    animation: false,\n};\nconst FONT_FAMILY = 'system-ui, sans-serif';\nconst getNodeSize = (id, depth) => {\n    if (depth === 0)\n        return measureTextSize(id, [80, 48], { fontSize: 24, fontWeight: 600, fontFamily: FONT_FAMILY });\n    if (depth === 1)\n        return measureTextSize(id, [80, 30], { fontSize: 18, fontFamily: FONT_FAMILY });\n    return [2, 30];\n};\nconst getNodeFill = (node) => {\n    const depth = node.depth;\n    if (depth === 0)\n        return '#EFF0F0';\n    if (depth === 1)\n        return node.style?.color || '#EFF0F0';\n    return 'transparent';\n};\nexport function getFishboneOptions({ type, labelField }) {\n    const options = {\n        node: {\n            type: 'rect',\n            style: {\n                fill: (d) => getNodeFill(d),\n                labelFill: (d) => (d.depth === 1 ? '#fff' : '#262626'),\n                labelFillOpacity: 1,\n                labelFontSize: (d) => (d.depth === 0 ? 24 : d.depth === 1 ? 18 : 16),\n                labelFontWeight: (d) => (d.depth === 0 ? 600 : 400),\n                labelLineHeight: (d) => (d.depth === 0 ? 26 : d.depth === 1 ? 20 : 18),\n                labelText: (d) => formatLabel(d, labelField),\n                radius: 8,\n                size: (d) => getNodeSize(d.id, d.depth),\n            },\n        },\n        edge: {\n            type: 'polyline',\n            style: {\n                lineWidth: 3,\n                stroke: function (data) {\n                    const target = this.getNodeData(data.target);\n                    return get(target, 'style.color', '#99ADD1');\n                },\n            },\n        },\n        transforms: (prev) => [\n            ...prev,\n            {\n                type: 'assign-color-by-branch',\n                key: 'assign-color-by-branch',\n            },\n            {\n                type: 'arrange-edge-z-index',\n                key: 'arrange-edge-z-index',\n            },\n        ],\n    };\n    options.layout ||= {};\n    if (type === 'decision') {\n        // @ts-ignore\n        options.node.style.labelPlacement = (d) => (d.depth === 0 || d.depth === 1 ? 'center' : 'right');\n        Object.assign(options.layout, { direction: 'LR' });\n    }\n    else if (type === 'cause') {\n        // @ts-ignore\n        options.node.style.labelPlacement = (d) => (d.depth === 0 || d.depth === 1 ? 'center' : 'left');\n        Object.assign(options.layout, { direction: 'RL' });\n    }\n    return options;\n}\n", "import { get } from 'lodash';\nexport function formatLabel(datum, labelField) {\n    const label = labelField\n        ? typeof labelField === 'function'\n            ? labelField(datum)\n            : get(datum, `data.${labelField}`, datum.id)\n        : datum.id;\n    return String(label);\n}\n", "import { measureTextHeight, measureTextWidth } from '@ant-design/charts-util';\n/**\n * \n * @param text - \n * @param offset -  [0, 0]\n * @param font - \n * @param minWidth -  0\n * @param maxWith -  Infinity\n * @returns \n */\nexport function measureTextSize(text, offset = [0, 0], font = { fontSize: 16, fontFamily: 'PingFang SC' }, minWidth = 0, maxWith = Infinity) {\n    const height = measureTextHeight(text, font);\n    const width = measureTextWidth(text, font) + 4;\n    const lineNumber = maxWith === Infinity ? 1 : Math.ceil(width / maxWith);\n    const [offsetWidth, offsetHeight] = offset;\n    return [\n        Math.max(minWidth, Math.min(maxWith, width)) + offsetWidth,\n        offsetHeight + height + height * 1.5 * (lineNumber - 1),\n    ];\n}\n", "import React, { forwardRef, useMemo, } from 'react';\nimport { BaseGraph } from '../../core/base-graph';\nimport { COMMON_OPTIONS } from '../../core/constants';\nimport { mergeOptions } from '../../core/utils/options';\nimport { DEFAULT_OPTIONS, getFlowDirectionGraphOptions } from './options';\nexport const FlowDirectionGraph = forwardRef(({ children, ...props }, ref) => {\n    const { labelField, ...restProps } = props;\n    const options = useMemo(() => mergeOptions(COMMON_OPTIONS, DEFAULT_OPTIONS, getFlowDirectionGraphOptions({ labelField }), restProps), [props]);\n    return (React.createElement(BaseGraph, { ...options, ref: ref }, children));\n});\n", "import React from 'react';\nimport { RCNode } from '../../core/base';\nimport { formatLabel } from '../../core/utils/label';\nconst { TextNode } = RCNode;\nexport const DEFAULT_OPTIONS = {\n    node: {\n        type: 'react',\n        state: {\n            active: {\n                halo: false,\n            },\n            selected: {\n                halo: false,\n            },\n        },\n    },\n    edge: {\n        type: 'cubic-horizontal',\n        style: {\n            strokeOpacity: 0.5,\n        },\n        state: {\n            active: {\n                strokeOpacity: 1,\n            },\n        },\n    },\n    layout: {\n        type: 'dagre',\n        rankdir: 'LR',\n        animation: false,\n    },\n    transforms: ['translate-react-node-origin'],\n};\nexport const getFlowDirectionGraphOptions = ({ labelField, }) => {\n    const options = {\n        node: {\n            style: {\n                component: (data) => {\n                    const label = formatLabel(data, labelField);\n                    return React.createElement(TextNode, { type: \"filled\", text: label });\n                },\n                size: [100, 40],\n                ports: [{ placement: 'left' }, { placement: 'right' }],\n            },\n        },\n    };\n    return options;\n};\n", "import React, { forwardRef, useMemo, } from 'react';\nimport { BaseGraph } from '../../core/base-graph';\nimport { COMMON_OPTIONS } from '../../core/constants';\nimport { mergeOptions } from '../../core/utils/options';\nimport { DEFAULT_OPTIONS, getFlowGraphOptions } from './options';\nexport const FlowGraph = forwardRef(({ children, ...props }, ref) => {\n    const options = useMemo(() => {\n        const { direction = 'horizontal', labelField, ...restProps } = props;\n        return mergeOptions(COMMON_OPTIONS, DEFAULT_OPTIONS, getFlowGraphOptions({ direction, labelField }), restProps);\n    }, [props]);\n    return (React.createElement(BaseGraph, { ...options, ref: ref }, children));\n});\n", "import React from 'react';\nimport { RCNode } from '../../core/base';\nimport { formatLabel } from '../../core/utils/label';\nconst { TextNode } = RCNode;\nexport const DEFAULT_OPTIONS = {\n    node: {\n        type: 'react',\n        state: {\n            active: {\n                halo: false,\n            },\n            selected: {\n                halo: false,\n            },\n        },\n    },\n    edge: {\n        type: 'polyline',\n        style: {\n            lineWidth: 2,\n            endArrow: true,\n            radius: 8,\n            router: {\n                type: 'orth',\n            },\n        },\n    },\n    layout: {\n        type: 'dagre',\n        animation: false,\n    },\n    transforms: ['translate-react-node-origin'],\n};\nexport const getFlowGraphOptions = ({ direction, labelField, }) => {\n    const options = {\n        node: {\n            style: {\n                component: (data) => {\n                    const label = formatLabel(data, labelField);\n                    return React.createElement(TextNode, { type: \"filled\", text: label });\n                },\n                size: [100, 40],\n                ports: direction === 'vertical'\n                    ? [{ placement: 'top' }, { placement: 'bottom' }]\n                    : [{ placement: 'left' }, { placement: 'right' }],\n            },\n        },\n        layout: {\n            type: 'dagre',\n            rankdir: direction === 'vertical' ? 'TB' : 'LR',\n        },\n    };\n    return options;\n};\n", "import React, { forwardRef, useMemo, } from 'react';\nimport { BaseGraph } from '../../core/base-graph';\nimport { COMMON_OPTIONS } from '../../core/constants';\nimport { formatTreeData } from '../../core/utils/data';\nimport { mergeOptions } from '../../core/utils/options';\nimport { DEFAULT_OPTIONS, getIndentedTreeOptions } from './options';\nexport const IndentedTree = forwardRef(({ children, ...props }, ref) => {\n    const { data, defaultExpandLevel, type = 'default', nodeMinWidth, nodeMaxWidth, direction = 'right', labelField, ...restProps } = props;\n    const options = useMemo(() => mergeOptions(COMMON_OPTIONS, DEFAULT_OPTIONS, { data: formatTreeData(data, defaultExpandLevel) }, getIndentedTreeOptions({ type, nodeMinWidth, nodeMaxWidth, direction, labelField }), restProps), [props]);\n    return (React.createElement(BaseGraph, { ...options, ref: ref }, children));\n});\n", "import { get } from 'lodash';\nimport React from 'react';\nimport { CollapseExpandIcon, RCNode } from '../../core/base';\nimport { formatLabel } from '../../core/utils/label';\nimport { measureTextSize } from '../../core/utils/measure-text';\nimport { getNodeSide } from '../../core/utils/node';\nimport { getBoxedTextNodeStyle, getLinearTextNodeStyle } from '../../core/utils/tree';\nconst { ArrowCountIcon } = CollapseExpandIcon;\nconst { TextNode } = RCNode;\nexport const DEFAULT_OPTIONS = {\n    node: {\n        type: 'react',\n        state: {\n            active: {\n                halo: false,\n            },\n            selected: {\n                halo: false,\n            },\n        },\n    },\n    edge: {\n        type: 'indented',\n        style: {\n            lineWidth: 3,\n        },\n    },\n    transforms: (prev) => [\n        ...prev,\n        {\n            type: 'collapse-expand-react-node',\n            key: 'collapse-expand-react-node',\n            enable: false,\n            trigger: 'icon',\n            iconRender: function (isCollapsed, data) {\n                return React.createElement(ArrowCountIcon, { graph: this, data: data, isCollapsed: isCollapsed });\n            },\n        },\n    ],\n    layout: {\n        type: 'indented',\n        direction: 'LR',\n        indent: (node) => getIndent(node, 20),\n        getVGap: () => 14,\n        preLayout: false,\n    },\n    animation: {\n        duration: 500,\n    },\n};\nconst getIndent = (node, preset) => {\n    if (node.depth === 0)\n        return 0;\n    let totalWidth = preset;\n    let currentNode = node.parent;\n    while (currentNode) {\n        totalWidth += currentNode.width / 2;\n        currentNode = currentNode.parent;\n    }\n    return totalWidth / node.depth;\n};\nconst getNodeTextAlign = (graph, data) => {\n    const side = getNodeSide(graph, data);\n    return side === 'left' ? 'right' : side === 'center' ? 'center' : 'left';\n};\nexport const getIndentedTreeOptions = ({ type, nodeMinWidth, nodeMaxWidth, direction, labelField, }) => {\n    let options = {};\n    const minWidth = nodeMinWidth || 0;\n    const maxWidth = nodeMaxWidth || 300;\n    if (type === 'boxed') {\n        options = {\n            node: {\n                style: {\n                    component: function (data) {\n                        const depth = data.depth;\n                        const color = data.style?.color;\n                        const label = formatLabel(data, labelField);\n                        const { font } = getBoxedTextNodeStyle(label, minWidth, maxWidth, depth);\n                        const props = {\n                            type: depth === 0 || depth === 1 ? 'filled' : 'outlined',\n                            text: label,\n                            color: depth === 0 ? '#f1f4f5' : color,\n                            maxWidth,\n                            font,\n                            style: {\n                                textAlign: getNodeTextAlign(this, data),\n                                ...(depth === 0 ? { color: '#252525' } : {}),\n                            },\n                        };\n                        return React.createElement(TextNode, { ...props });\n                    },\n                    size: (data) => {\n                        const label = formatLabel(data, labelField);\n                        return getBoxedTextNodeStyle(label, minWidth, maxWidth, data.depth).size;\n                    },\n                },\n            },\n            edge: {\n                style: {\n                    stroke: function (data) {\n                        const source = this.getNodeData(data.source);\n                        return get(source, 'style.color', '#99ADD1');\n                    },\n                    radius: 16,\n                },\n            },\n            transforms: (prev) => [\n                ...prev,\n                {\n                    type: 'assign-color-by-branch',\n                    key: 'assign-color-by-branch',\n                },\n            ],\n            layout: {\n                type: 'indented',\n                getWidth: (data) => {\n                    const label = formatLabel(data, labelField);\n                    const [width] = getBoxedTextNodeStyle(label, minWidth, maxWidth, data.depth).size;\n                    return width;\n                },\n                getHeight: (data) => {\n                    const label = formatLabel(data, labelField);\n                    const [, height] = getBoxedTextNodeStyle(label, minWidth, maxWidth, data.depth).size;\n                    return height;\n                },\n            },\n        };\n    }\n    else if (type === 'linear') {\n        options = {\n            node: {\n                style: {\n                    component: function (data) {\n                        const depth = data.depth;\n                        const color = data.style?.color;\n                        const label = formatLabel(data, labelField);\n                        const { font } = getLinearTextNodeStyle(label, minWidth, maxWidth, depth);\n                        const props = { text: label, color, maxWidth, font };\n                        Object.assign(props, depth === 0\n                            ? { type: 'filled', color: '#f1f4f5', style: { color: '#252525' } }\n                            : {\n                                type: 'underlined',\n                                style: { textAlign: getNodeTextAlign(this, data) },\n                            });\n                        return React.createElement(TextNode, { ...props });\n                    },\n                    size: (data) => {\n                        const label = formatLabel(data, labelField);\n                        return getLinearTextNodeStyle(label, minWidth, maxWidth, data.depth).size;\n                    },\n                    ports: function (data) {\n                        const side = getNodeSide(this, data);\n                        return side === 'left'\n                            ? [{ placement: 'bottom' }, { placement: 'bottom-right' }]\n                            : side === 'center'\n                                ? [{ placement: 'bottom' }]\n                                : [{ placement: 'bottom' }, { placement: 'bottom-left' }];\n                    },\n                },\n            },\n            edge: {\n                style: {\n                    stroke: function (data) {\n                        const target = this.getNodeData(data.target);\n                        return get(target, 'style.color', '#99ADD1');\n                    },\n                    radius: 24,\n                },\n            },\n            layout: {\n                type: 'indented',\n                getWidth: (data) => {\n                    const label = formatLabel(data, labelField);\n                    const [width] = getLinearTextNodeStyle(label, minWidth, maxWidth, data.depth).size;\n                    return width;\n                },\n                getHeight: (data) => {\n                    const label = formatLabel(data, labelField);\n                    const [, height] = getLinearTextNodeStyle(label, minWidth, maxWidth, data.depth).size;\n                    return height;\n                },\n                getVGap: () => 12,\n            },\n            transforms: (prev) => [\n                ...prev,\n                {\n                    type: 'assign-color-by-branch',\n                    key: 'assign-color-by-branch',\n                },\n                {\n                    type: 'arrange-edge-z-index',\n                    key: 'arrange-edge-z-index',\n                },\n            ],\n        };\n    }\n    else {\n        const PADDING = [24, 16];\n        options = {\n            node: {\n                style: {\n                    component: (data) => {\n                        const label = formatLabel(data, labelField);\n                        return React.createElement(TextNode, { type: \"filled\", text: label });\n                    },\n                    size: (data) => {\n                        const label = formatLabel(data, labelField);\n                        return measureTextSize(label, PADDING);\n                    },\n                },\n            },\n            layout: {\n                type: 'indented',\n                getWidth: (data) => {\n                    const label = formatLabel(data, labelField);\n                    const [width] = measureTextSize(label, PADDING);\n                    return width;\n                },\n                getHeight: (data) => {\n                    const label = formatLabel(data, labelField);\n                    const [, height] = measureTextSize(label, PADDING);\n                    return height;\n                },\n            },\n        };\n    }\n    if (direction) {\n        options.layout ||= {};\n        Object.assign(options.layout, {\n            direction: direction === 'alternate' ? 'H' : direction === 'left' ? 'RL' : 'LR',\n        });\n    }\n    return options;\n};\n", "import { idOf, positionOf } from '@antv/g6';\nimport { memoize } from 'lodash';\n/**\n * Get the side of the node relative to the reference node\n * @param nodeData - Node data\n * @param parentData - Reference node data\n * @returns The side of the node relative to the reference node\n */\nexport const getRelativeSide = memoize((nodeData, refNodeData) => {\n    if (!refNodeData)\n        return 'center';\n    const nodePositionX = positionOf(nodeData)[0];\n    const refNodePositionX = positionOf(refNodeData)[0];\n    return refNodePositionX > nodePositionX ? 'left' : 'right';\n}, (nodeData, refNodeData) => refNodeData ? [positionOf(nodeData), positionOf(refNodeData)].flat().join('-') : 'center');\n/**\n * Get the side of the node relative to the parent node\n * @param graph - Graph instance\n * @param data - Node data\n * @returns The side of the node relative to the parent node\n */\nexport const getNodeSide = (graph, data) => {\n    const parentData = graph.getParentData(idOf(data), 'tree');\n    return getRelativeSide(data, parentData);\n};\n/**\n * Whether the node is a leaf node\n * @param nodeData - node data\n * @returns Whether the node is a leaf node\n */\nexport const isLeafNode = (nodeData) => {\n    return !nodeData.children || nodeData.children.length === 0;\n};\n", "import { memoize } from 'lodash';\nimport { measureTextSize } from './measure-text';\nexport const getLinearTextNodeStyle = memoize((text, minWidth, maxWidth, depth = 0) => {\n    const font = {\n        fontWeight: depth === 0 ? 600 : 400,\n        fontSize: depth === 0 ? 24 : 16,\n    };\n    const offset = depth === 0 ? [64, 30] : [12, 12];\n    const size = measureTextSize(text, offset, font, minWidth, maxWidth);\n    return { font, size };\n});\nexport const getBoxedTextNodeStyle = memoize((text, minWidth, maxWidth, depth = 0) => {\n    const font = {\n        fontWeight: depth === 0 || depth === 1 ? 600 : 400,\n        fontSize: depth === 0 ? 24 : 16,\n    };\n    const offset = depth === 0 ? [64, 30] : [36, 24];\n    const size = measureTextSize(text, offset, font, minWidth, maxWidth);\n    return { font, size };\n});\n", "import React, { forwardRef, useMemo, } from 'react';\nimport { BaseGraph } from '../../core/base-graph';\nimport { COMMON_OPTIONS } from '../../core/constants';\nimport { formatTreeData } from '../../core/utils/data';\nimport { mergeOptions } from '../../core/utils/options';\nimport { DEFAULT_OPTIONS, getMindMapOptions } from './options';\nexport const MindMap = forwardRef(({ children, ...props }, ref) => {\n    const options = useMemo(() => {\n        const { data, type = 'default', nodeMinWidth, nodeMaxWidth, direction = 'alternate', labelField, defaultExpandLevel, ...restProps } = props;\n        const options = mergeOptions(COMMON_OPTIONS, DEFAULT_OPTIONS, { data: formatTreeData(data, defaultExpandLevel) }, getMindMapOptions({ type, nodeMinWidth, nodeMaxWidth, direction, labelField }), restProps);\n        return options;\n    }, [props]);\n    return (React.createElement(BaseGraph, { ...options, ref: ref }, children));\n});\n", "import { get } from 'lodash';\nimport React from 'react';\nimport { CollapseExpandIcon, RCNode } from '../../core/base';\nimport { formatLabel } from '../../core/utils/label';\nimport { measureTextSize } from '../../core/utils/measure-text';\nimport { getNodeSide } from '../../core/utils/node';\nimport { getBoxedTextNodeStyle, getLinearTextNodeStyle } from '../../core/utils/tree';\nconst { ArrowCountIcon } = CollapseExpandIcon;\nconst { TextNode } = RCNode;\nexport const DEFAULT_OPTIONS = {\n    node: {\n        type: 'react',\n        state: {\n            active: {\n                halo: false,\n            },\n            selected: {\n                halo: false,\n            },\n        },\n    },\n    edge: {\n        type: 'cubic-horizontal',\n        style: {\n            lineWidth: 3,\n        },\n    },\n    transforms: (prev) => [\n        ...prev,\n        {\n            type: 'collapse-expand-react-node',\n            key: 'collapse-expand-react-node',\n            enable: false,\n            trigger: 'icon',\n            iconRender: function (isCollapsed, data) {\n                const side = getNodeSide(this, data);\n                return (React.createElement(ArrowCountIcon, { graph: this, data: data, isCollapsed: isCollapsed, placement: side === 'left' ? 'left' : 'right' }));\n            },\n            iconPlacement: function (data) {\n                const side = getNodeSide(this, data);\n                return side === 'left' ? 'left' : 'right';\n            },\n        },\n    ],\n    layout: {\n        type: 'mindmap',\n        direction: 'H',\n        preLayout: false,\n        getWidth: () => 120,\n        getHGap: () => 64,\n    },\n    animation: {\n        duration: 500,\n    },\n};\nexport function getMindMapOptions({ type, direction, nodeMinWidth, nodeMaxWidth, labelField, }) {\n    let options = {};\n    if (type === 'boxed') {\n        const minWidth = nodeMinWidth || 120;\n        const maxWidth = nodeMaxWidth || 300;\n        options = {\n            node: {\n                style: {\n                    component: (data) => {\n                        const depth = data.depth;\n                        const color = data.style?.color;\n                        const label = formatLabel(data, labelField);\n                        const { font } = getBoxedTextNodeStyle(label, minWidth, maxWidth, depth);\n                        const props = { text: label, color, maxWidth, font };\n                        Object.assign(props, depth === 0\n                            ? { type: 'filled', color: '#f1f4f5', style: { color: '#252525' } }\n                            : depth === 1\n                                ? { type: 'filled' }\n                                : { type: 'outlined' });\n                        return React.createElement(TextNode, { ...props });\n                    },\n                    size: (data) => {\n                        const label = formatLabel(data, labelField);\n                        return getBoxedTextNodeStyle(label, minWidth, maxWidth, data.depth).size;\n                    },\n                    dx: function (data) {\n                        const side = getNodeSide(this, data);\n                        const label = formatLabel(data, labelField);\n                        const [width] = getBoxedTextNodeStyle(label, minWidth, maxWidth, data.depth).size;\n                        return side === 'left' ? -width : side === 'center' ? -width / 2 : 0;\n                    },\n                    ports: [{ placement: 'left' }, { placement: 'right' }],\n                },\n            },\n            edge: {\n                style: {\n                    stroke: function (data) {\n                        const source = this.getNodeData(data.source);\n                        return get(source, 'style.color', '#99ADD1');\n                    },\n                },\n            },\n            transforms: (prev) => [...prev, { type: 'assign-color-by-branch', key: 'assign-color-by-branch' }],\n            layout: {\n                type: 'mindmap',\n                getHeight: (data) => {\n                    const label = formatLabel(data, labelField);\n                    const [, height] = getBoxedTextNodeStyle(label, minWidth, maxWidth, data.depth).size;\n                    return height;\n                },\n                getVGap: () => 14,\n            },\n        };\n    }\n    else if (type === 'linear') {\n        const minWidth = nodeMinWidth || 0;\n        const maxWidth = nodeMaxWidth || 300;\n        options = {\n            node: {\n                style: {\n                    component: function (data) {\n                        const side = getNodeSide(this, data);\n                        const depth = data.depth;\n                        const color = data.style?.color;\n                        const label = formatLabel(data, labelField);\n                        const { font } = getLinearTextNodeStyle(label, minWidth, maxWidth, depth);\n                        const props = { text: label, color, maxWidth, font };\n                        Object.assign(props, depth === 0\n                            ? { type: 'filled', color: '#f1f4f5', style: { color: '#252525' } }\n                            : {\n                                type: 'underlined',\n                                style: side === 'left' ? { textAlign: 'right' } : side === 'center' ? { textAlign: 'center' } : {},\n                            });\n                        return React.createElement(TextNode, { ...props });\n                    },\n                    size: (data) => {\n                        const label = formatLabel(data, labelField);\n                        return getLinearTextNodeStyle(label, minWidth, maxWidth, data.depth).size;\n                    },\n                    dx: function (data) {\n                        const side = getNodeSide(this, data);\n                        const label = formatLabel(data, labelField);\n                        const [width] = getLinearTextNodeStyle(label, minWidth, maxWidth, data.depth).size;\n                        return side === 'left' ? -width : side === 'center' ? -width / 2 : 0;\n                    },\n                    dy: function (data) {\n                        const label = formatLabel(data, labelField);\n                        const [, height] = getLinearTextNodeStyle(label, minWidth, maxWidth, data.depth).size;\n                        return height / 2;\n                    },\n                    ports: function (data) {\n                        const side = getNodeSide(this, data);\n                        return side === 'center'\n                            ? [{ placement: 'left' }, { placement: 'right' }]\n                            : [{ placement: 'left-bottom' }, { placement: 'right-bottom' }];\n                    },\n                },\n            },\n            edge: {\n                style: {\n                    stroke: function (data) {\n                        const target = this.getNodeData(data.target);\n                        return get(target, 'style.color', '#99ADD1');\n                    },\n                },\n            },\n            layout: {\n                type: 'mindmap',\n                getHeight: (data) => {\n                    const label = formatLabel(data, labelField);\n                    const [, height] = getLinearTextNodeStyle(label, minWidth, maxWidth, data.depth).size;\n                    return height;\n                },\n                getVGap: () => 12,\n            },\n            transforms: (prev) => [\n                ...prev.filter((t) => t.key !== 'collapse-expand-react-node'),\n                {\n                    type: 'assign-color-by-branch',\n                    key: 'assign-color-by-branch',\n                },\n                {\n                    ...prev.find((t) => t.key === 'collapse-expand-react-node'),\n                    iconOffsetY: (data) => {\n                        if (data.depth === 0)\n                            return 0;\n                        const label = formatLabel(data, labelField);\n                        const [, height] = getLinearTextNodeStyle(label, minWidth, maxWidth, data.depth).size;\n                        return height / 2;\n                    },\n                },\n            ],\n        };\n    }\n    else {\n        const PADDING = [24, 16];\n        options = {\n            node: {\n                style: {\n                    component: (data) => {\n                        const label = formatLabel(data, labelField);\n                        return React.createElement(TextNode, { type: \"filled\", text: label });\n                    },\n                    size: (data) => {\n                        const label = formatLabel(data, labelField);\n                        return measureTextSize(label, PADDING);\n                    },\n                    dx: function (data) {\n                        const side = getNodeSide(this, data);\n                        const label = formatLabel(data, labelField);\n                        const [width] = measureTextSize(label, PADDING);\n                        return side === 'left' ? -width : side === 'center' ? -width / 2 : 0;\n                    },\n                    ports: [{ placement: 'left' }, { placement: 'right' }],\n                },\n            },\n            layout: {\n                type: 'mindmap',\n                getHeight: (data) => {\n                    const label = formatLabel(data, labelField);\n                    const [, height] = measureTextSize(label, PADDING);\n                    return height;\n                },\n            },\n        };\n    }\n    if (direction) {\n        options.layout ||= {};\n        options.layout.direction =\n            direction === 'alternate' ? 'H' : direction === 'left' ? 'RL' : 'LR';\n    }\n    return options;\n}\n", "import React, { forwardRef, useMemo, } from 'react';\nimport { BaseGraph } from '../../core/base-graph';\nimport { COMMON_OPTIONS } from '../../core/constants';\nimport { mergeOptions } from '../../core/utils/options';\nimport { DEFAULT_OPTIONS } from './options';\nexport const NetworkGraph = forwardRef(({ children, ...props }, ref) => {\n    const options = useMemo(() => mergeOptions(COMMON_OPTIONS, DEFAULT_OPTIONS, props), [props]);\n    return (React.createElement(BaseGraph, { ...options, ref: ref }, children));\n});\n", "const SIZE = 32;\nexport const DEFAULT_OPTIONS = {\n    node: {\n        type: 'circle',\n    },\n    layout: {\n        type: 'd3-force',\n        link: {\n            distance: SIZE * 4,\n        },\n        collide: {\n            radius: SIZE,\n        },\n        manyBody: {\n            strength: -SIZE * 22,\n        },\n        x: {},\n        y: {},\n    },\n};\n", "import React, { forwardRef, useMemo, } from 'react';\nimport { BaseGraph } from '../../core/base-graph';\nimport { COMMON_OPTIONS } from '../../core/constants';\nimport { mergeOptions } from '../../core/utils/options';\nimport { DEFAULT_OPTIONS, getOrganizationChartOptions } from './options';\nexport const OrganizationChart = forwardRef(({ children, ...props }, ref) => {\n    const options = useMemo(() => {\n        const { direction = 'vertical', labelField, ...restProps } = props;\n        const options = mergeOptions(COMMON_OPTIONS, DEFAULT_OPTIONS, getOrganizationChartOptions({ direction, labelField }), restProps);\n        return options;\n    }, [props]);\n    return (React.createElement(BaseGraph, { ...options, ref: ref }, children));\n});\n", "import React from 'react';\nimport { RCNode } from '../../core/base';\nimport { formatLabel } from '../../core/utils/label';\nconst { TextNode } = RCNode;\nexport const DEFAULT_OPTIONS = {\n    node: {\n        type: 'react',\n        state: {\n            active: {\n                halo: false,\n            },\n            selected: {\n                halo: false,\n            },\n        },\n    },\n    edge: {\n        type: 'polyline',\n        style: {\n            lineWidth: 2,\n            router: {\n                type: 'orth',\n            },\n        },\n    },\n    layout: {\n        type: 'dagre',\n        animation: false,\n    },\n    transforms: ['translate-react-node-origin'],\n};\nexport function getOrganizationChartOptions({ direction, labelField, }) {\n    const options = {\n        node: {\n            style: {\n                component: (data) => {\n                    const label = formatLabel(data, labelField);\n                    return React.createElement(TextNode, { type: \"filled\", text: label });\n                },\n                size: [100, 40],\n                ports: direction === 'vertical'\n                    ? [{ placement: 'top' }, { placement: 'bottom' }]\n                    : [{ placement: 'left' }, { placement: 'right' }],\n            },\n        },\n        transforms: (prev) => [\n            ...prev,\n            {\n                type: 'collapse-expand-react-node',\n                key: 'collapse-expand-react-node',\n                iconPlacement: direction === 'vertical' ? 'bottom' : 'right',\n                enable: false,\n                refreshLayout: true,\n            },\n        ],\n        layout: {\n            type: 'dagre',\n            rankdir: direction === 'vertical' ? 'TB' : 'LR',\n        },\n    };\n    return options;\n}\n"],
  "mappings": "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GAI8B,cAAA,OAAnBQ,aAAAA,QAAMC,YACfD,aAAAA,QAAMC,SAAS,IAAA,GAGbX,MAAAA,CAA0BZ,GAAKwB,IAAIhB,EAAAA,MACrCE,QAAQe,KAAKjB,EAAAA,GACbR,GAAK0B,IAAIlB,EAAAA;IAEZ,SAAQG,IAAAA;AAGHZ,MAAAA,GAAkBmB,KAAMP,GAAgBgB,OAAAA,KAE1C3B,GAAKmB,OAAOX,EAAAA;IAEf,UAAS;AACRE,cAAQC,QAAQF;IACjB;EACF;AACH;ADzDO,IEHMmB,KAAcC,OAAOC,OAAO,CAAA,CAAA;AFGlC,IEFMC,KAAeF,OAAOC,OAAO,CAAA,CAAA;ACAlB,SAAAE,GACtBC,IACAC,IACAC,IAAAA;AAEA,SAAA,WAFAA,OAAAA,KAAiEJ,KAEzDE,GAAMG,UAAUD,GAAaC,SAASH,GAAMG,SAAUF,MAAiBC,GAAaC;AAC9F;ACTA,IA4JAC,KAAe,oBAAIpC,IA5JF,CACf,KACA,QACA,WACA,QACA,WACA,SACA,SACA,KACA,OACA,OACA,cACA,QACA,UACA,MACA,UACA,WACA,QACA,QACA,OACA,YACA,QACA,YACA,MACA,OACA,WACA,OACA,UACA,OACA,MACA,MACA,MACA,SACA,YACA,cACA,UACA,UACA,QACA,MACA,MACA,MACA,MACA,MACA,MACA,UACA,UACA,MACA,QACA,KACA,UACA,OACA,SACA,OACA,OACA,SACA,UACA,MACA,QACA,OACA,QACA,QACA,SACA,OACA,UACA,MACA,YACA,UACA,UACA,KACA,WACA,OACA,YACA,KACA,MACA,MACA,QACA,KACA,QACA,UACA,WACA,UACA,QACA,SACA,QACA,UACA,OACA,WACA,OACA,SACA,SACA,MACA,YACA,YACA,SACA,MACA,SACA,QACA,MACA,KACA,MACA,OACA,SACA,OACA,UACA,YACA,QACA,WACA,WACA,iBACA,uBACA,eACA,oBACA,qBACA,qBACA,kBACA,gBACA,WACA,WACA,WACA,WACA,WACA,kBACA,WACA,WACA,eACA,gBACA,YACA,gBACA,sBACA,eACA,UACA,gBACA,UACA,iBACA,KA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",
  "names": ["toString", "i", "i", "init_lib_es6", "i", "init_lib_es6", "isAnyArray", "rescale", "matrix", "i", "j", "AbstractMatrix", "Matrix", "add", "mod", "log", "log2", "round", "sqrt", "pow", "max", "v", "x", "size", "scale", "min", "l", "k", "h", "m", "n", "p", "dot", "s", "e", "y", "r2", "c2", "r", "c", "a", "b", "c22", "last", "q", "SymmetricMatrix", "DistanceMatrix", "MatrixColumnView", "MatrixColumnSelectionView", "MatrixFlipColumnView", "MatrixFlipRowView", "MatrixRowView", "MatrixRowSelectionView", "MatrixSelectionView", "MatrixSubView", "MatrixTransposeView", "WrapperMatrix1D", "WrapperMatrix2D", "wrap", "LuDecomposition", "t", "X", "determinant", "QrDecomposition", "SingularValueDecomposition", "U", "V", "f", "g", "Y", "inverse", "solve", "d", "linearDependencies", "pseudoInverse", "covariance", "correlation", "EigenvalueDecomposition", "H", "c3", "s2", "z", "w", "CholeskyDecomposition", "B", "u", "clone", "collection", "isArray", "objectProto", "has", "isArray", "objectProto", "isEmpty", "collection", "isArray", "isString", "size", "isArray", "isFunction", "isObject", "object", "Symbol", "isArray", "Set", "values", "set", "values", "require_lodash", "e", "_", "Graph", "v", "e", "w", "u", "k", "_", "Graph", "g", "v", "e", "_", "g", "dfs", "v", "_", "x", "min", "i", "l", "r", "j", "_", "dijkstra", "g", "v", "w", "distance", "dijkstra", "_", "g", "v", "_", "g", "dfs", "v", "w", "_", "g", "_", "floydWarshall", "g", "v", "w", "d", "k", "i", "j", "_", "g", "g", "e", "_", "dfs", "g", "order", "v", "w", "dfs", "g", "dfs", "g", "_", "Graph", "g", "v", "w", "require_graphlib", "graphlib", "e", "objectProto", "last", "object", "current", "max", "min", "minBy", "isObject", "order", "isArray", "collection", "toString", "uniqueId", "values", "zipObject", "values", "require_lodash", "e", "List", "unlink", "filterOutLinks", "k", "v", "_", "Graph", "List", "greedyFAS", "DEFAULT_WEIGHT_FN", "g", "buildState", "doGreedyFAS", "e", "removeNode", "i", "assignBucket", "w", "v", "_", "greedyFAS", "run", "undo", "g", "dfsFAS", "e", "dfs", "v", "_", "Graph", "addDummyNode", "simplify", "asNonCompoundGraph", "intersectRect", "buildLayerMatrix", "normalizeRanks", "removeEmptyRanks", "addBorderNode", "maxRank", "partition", "g", "v", "e", "rect", "point", "x", "y", "w", "h", "rank", "min", "i", "order", "_", "run", "undo", "g", "normalizeEdge", "e", "v", "w", "i", "require_util", "_", "longestPath", "slack", "g", "dfs", "v", "rank", "e", "_", "Graph", "slack", "feasibleTree", "g", "t", "size", "tightTree", "findMinSlackEdge", "shiftRanks", "dfs", "v", "e", "w", "_", "feasibleTree", "slack", "simplify", "networkSimplex", "initLowLimValues", "initCutValues", "calcCutValue", "leaveEdge", "enterEdge", "exchangeEdges", "g", "t", "e", "f", "v", "assignCutValue", "isTreeEdge", "dfsAssignLowLim", "w", "edge", "isDescendant", "updateRanks", "u", "longestPath", "feasibleTree", "networkSimplex", "rank", "g", "networkSimplexRanker", "tightTreeRanker", "longestPathRanker", "_", "parentDummyChains", "g", "v", "findPath", "w", "dfs", "_", "run", "cleanup", "g", "treeDepths", "e", "sumWeights", "dfs", "v", "_", "addBorderSegments", "g", "dfs", "v", "rank", "maxRank", "addBorderNode", "_", "adjust", "undo", "g", "swapWidthHeight", "reverseY", "swapXY", "v", "swapWidthHeightOne", "e", "w", "reverseYOne", "swapXYOne", "x", "_", "initOrder", "g", "v", "maxRank", "dfs", "_", "crossCount", "g", "i", "twoLayerCrossCount", "v", "e", "_", "barycenter", "g", "v", "e", "_", "resolveConflicts", "i", "e", "doResolveConflicts", "mergeEntries", "entry", "_", "sort", "compareWithBias", "consumeUnsortable", "last", "_", "barycenter", "resolveConflicts", "sort", "sortSubgraph", "g", "v", "w", "mergeBarycenters", "expandSubgraphs", "_", "Graph", "buildLayerGraph", "g", "rank", "createRootNode", "v", "e", "u", "_", "addSubgraphConstraints", "g", "v", "_", "initOrder", "crossCount", "sortSubgraph", "buildLayerGraph", "addSubgraphConstraints", "Graph", "order", "g", "maxRank", "buildLayerGraphs", "assignOrder", "i", "sweepLayerGraphs", "rank", "v", "_", "Graph", "positionX", "findType1Conflicts", "findType2Conflicts", "addConflict", "hasConflict", "verticalAlignment", "horizontalCompaction", "alignCoordinates", "findSmallestWidthAlignment", "balance", "g", "v", "i", "w", "findOtherInnerSegmentNode", "u", "order", "buildBlockGraph", "e", "min", "sep", "max", "x", "width", "_", "positionX", "position", "g", "positionY", "x", "v", "_", "normalize", "rank", "normalizeRanks", "parentDummyChains", "removeEmptyRanks", "addBorderSegments", "order", "position", "Graph", "layout", "g", "buildLayoutGraph", "runLayout", "updateInputGraph", "makeSpaceForEdgeLabels", "removeSelfEdges", "injectEdgeLabelProxies", "assignRankMinMax", "removeEdgeLabelProxies", "insertSelfEdges", "positionSelfEdges", "removeBorderNodes", "fixupEdgeLabelCoords", "translateGraph", "assignNodeIntersects", "reversePointsForReversedEdges", "v", "e", "nodeNumAttrs", "nodeDefaults", "edgeNumAttrs", "edgeDefaults", "edgeAttrs", "canonicalize", "selectNumberAttrs", "w", "maxRank", "x", "y", "h", "p", "p2", "t", "b", "l", "r", "i", "k", "_", "Graph", "g", "h", "v", "e", "i", "u", "require_version", "BubbleSets", "Canvas", "CanvasEvent", "Circle", "Ellipse", "Graph", "HTML", "History", "Image", "Line", "Polyline", "Rect", "Timebar", "Tooltip", "ChangeType", "AnimationType", "CanvasEvent", "ComboEvent", "CommonEvent", "ContainerEvent", "EdgeEvent", "GraphEvent", "HistoryEvent", "NodeEvent", "ExtensionCategory", "values", "_", "x", "y", "z", "i", "t", "__rest", "keyframes", "_a", "x", "y", "z", "result", "p", "min", "max", "point", "x", "y", "z", "i", "b2", "p", "min", "width", "w", "h", "defaultComparator", "a", "b", "LinkedListNode", "LinkedList", "values", "Queue", "getNeighbors", "neighhborsConverter_1", "neighhborsConverter_2", "neighhborsConverter", "getOutEdgesNodeId", "getEdgesByNodeId", "degree", "is_object_default", "i", "is_object_default", "k", "splice", "isNumber", "toString", "i", "l", "k", "clone_default", "f", "default_1", "v", "minVertex", "D", "i", "dijkstra", "_loop_1", "w", "findShortestPath", "Vector", "clone_default", "a", "b", "max", "min", "DistanceType", "UnionFind", "i", "a", "b", "defaultCompare", "a", "b", "MinBinaryHeap", "size", "pageRank", "epsilon", "distance", "j", "i", "Edge", "Node", "Graph", "DFSedge", "DFScode", "i", "History", "e", "GSpan", "_e", "projectIsMin", "_loop_1", "p", "key", "_loop_2", "clone_default", "_loop_3", "counter", "g", "Stack", "get", "degree", "epsilon", "matrix", "i", "j", "d", "key", "b", "d", "a", "sort", "i", "a", "b", "v", "i", "a2", "b2", "s", "determinant", "angle", "a", "b", "v", "x", "y", "angle", "rad", "l2", "p2", "v2", "v", "t", "u", "x", "y", "x", "y", "z", "min", "max", "point", "point", "p", "distance", "p2", "i", "x", "y", "j", "angle", "x2", "y2", "x3", "y3", "u", "x", "y", "p", "h", "k", "canvas", "acc", "s", "CanvasEvent", "x", "y", "navigator", "current", "degree", "__awaiter", "CanvasEvent", "degree", "s", "p", "size", "x", "y", "z", "defaultOptions", "x", "y", "z", "__rest", "size", "d", "palette", "field", "groupData", "min", "max", "_e", "x", "y", "z", "result", "_", "__rest", "width", "point", "it", "values", "i", "last", "x2", "y2", "x3", "y3", "x", "y", "point", "p2", "angle", "__rest", "shape", "Image", "width", "x", "y", "rect", "i", "width", "Image", "size", "__rest", "i", "x", "y", "point", "canvas", "Circle", "r", "size", "point", "Polygon", "point", "Polygon", "width", "Circle", "size", "round", "__rest", "angle", "x", "y", "r", "R", "s", "e", "P", "Ellipse", "size", "point", "Polygon", "size", "HTML", "canvas", "__rest", "width", "x", "y", "i", "point", "Image", "width", "__rest", "Rect", "width", "Polygon", "size", "Polygon", "width", "x", "y", "size", "x", "y", "size", "width", "__rest", "z", "width", "point", "width", "getBBoxSize", "p2", "d2", "p", "isHorizontal", "rad", "point", "x", "y", "getXYByPlacement", "angle", "z", "i", "pt", "r", "radians", "width", "point2", "p2", "current", "n", "size", "width", "r", "__rest", "d", "sourcePoint", "targetPoint", "Image", "size", "width", "p", "r", "r2", "Line", "point", "p", "p2", "current", "x", "y", "i", "width", "Polyline", "p", "x", "y", "i", "r", "width", "width", "__rest", "__awaiter", "__rest", "__rest", "__awaiter", "canvas", "CanvasEvent", "x", "y", "canvas", "__awaiter", "canvas", "CanvasEvent", "x", "y", "width", "navigator", "n", "navigator", "Graph", "current", "navigator", "n", "x", "y", "z", "context", "data", "__rest", "Graph", "layout", "layout", "x", "y", "__awaiter", "config", "__awaiter", "e", "add", "s", "canvas", "degree", "canvas", "__awaiter", "d", "canvas", "__awaiter", "getHeight", "preNode", "node", "align", "heightField", "preNodeHeight", "nodeHeight", "height", "assign", "Object", "DEFAULT_OPTIONS", "getId", "d", "id", "name", "getPreH", "preH", "getPreV", "preV", "getHGap", "hgap", "getVGap", "vgap", "getChildren", "children", "PEM", "label", "width", "split", "length", "Node", "data", "options", "this", "x", "y", "depth", "parent", "getWidth", "addGap", "isRoot", "isLeaf", "callback", "current", "nodes", "shift", "concat", "eachNode", "getBoundingBox", "bb", "left", "Number", "MAX_VALUE", "top", "Math", "min", "max", "tx", "ty", "right2left", "translate", "bottom2top", "hierarchy", "isolated", "root", "collapsed", "Array", "i", "child", "push", "Layout", "rootNode", "execute", "Error", "WrappedTree$1", "WrappedTree", "w", "h", "c", "prelim", "mod", "change", "tl", "tr", "el", "er", "msel", "mser", "cs", "isHorizontal", "forEach", "wrappedChild", "fromNode", "moveRight", "move", "getMin", "res", "normalize", "convertBack", "converted", "layer", "nonLayeredTidy", "setExtremes", "t", "separate", "ih", "sr", "mssr", "cl", "mscl", "bottom", "low", "nxt", "dist", "moveSubtree", "index", "sy", "cy", "nextRightContour", "nextLeftContour", "modsumcl", "li", "diff", "modsumsr", "ri", "si", "nr", "updateIYL", "wt", "firstWalk", "secondWalk", "modsum", "modsumdelta", "separateRoot", "right", "treeSize", "rightTreeSize", "round", "getSide", "_child", "side", "VALID_DIRECTIONS", "HORIZONTAL_DIRECTIONS", "DEFAULT_DIRECTION", "doLayout", "layoutAlgorithm", "direction", "indexOf", "TypeError", "separateTree", "fixedRoot", "radial", "rScale", "radScale", "Infinity", "count", "DFTraverse", "radDiff", "avgRad", "PI", "nodeRadScale", "minRadScale", "nodeRScale", "rootRScale", "rad", "r", "cos", "sin", "CompactBoxTreeLayout", "TreeLayout", "doTreeLayout", "nonLayeredTidyTree", "compactBoxLayout", "mergedOptions", "leftChild", "rightChild", "nodeSep", "nodeSize", "rankSep", "subTreeSep", "dendrogram", "maxDepth", "prevLeaf", "wrappedTreeFromNode", "n", "childrenCount", "childWT", "originNode", "getDrawingDepth", "drawingDepth", "depths", "map", "minChildDepth", "position", "DendrogramLayout", "dendrogramLayout", "indented", "indent", "dropCap", "previousNode", "displacementX", "e", "prevParent", "preY", "IndentedLayout", "indentedTree", "bbox", "indentedLayout", "totalHeight", "_subTreeSep", "getSubTreeSep", "thirdWalk", "len", "first", "last", "childrenHeight", "childrenTotalHeight", "offset", "mindmap", "BFTraverse", "startY", "MindmapLayout", "mindmapLayout", "k", "v", "List", "g", "e", "i", "w", "Graph", "v", "edge", "g", "e", "dfs", "v", "n", "g", "v", "Graph", "e", "edge", "values", "i", "rect", "point", "x", "y", "w", "h", "g", "i", "rank", "v", "min", "order", "maxRank", "a", "b", "doDFS", "navigator", "n", "dfs", "node", "g", "dfs", "v", "rank", "maxRank", "addBorderNode", "g", "undo", "v", "e", "w", "point", "x", "run", "g", "e", "dfs", "v", "run", "g", "e", "v", "w", "i", "undo", "g", "v", "g", "rank", "Graph", "v", "e", "u", "g", "v", "i", "e", "a", "b", "g", "v", "maxRank", "i", "a", "b", "n", "g", "v", "e", "i", "e", "a", "b", "last", "g", "v", "n", "w", "_a", "e", "node", "g", "i", "rank", "Graph", "v", "g", "v", "maxRank", "i", "n", "g", "dfs", "v", "n", "w", "g", "v", "i", "w", "_a", "u", "order", "n", "a", "b", "e", "min", "Graph", "edge", "max", "x", "values", "g", "v", "w", "g", "v", "g", "dfs", "v", "rank", "e", "r", "n", "g", "t", "Graph", "size", "dfs", "v", "e", "w", "n", "g", "t", "e", "f", "dfs", "v", "w", "edge", "u", "g", "g", "e", "run", "undo", "width", "n", "v", "Graph", "w", "maxRank", "x", "y", "h", "p", "p2", "t", "b", "l", "r", "i", "k", "isArray", "size", "i", "j", "k", "matrix", "e", "v", "isArray", "p2", "clone", "v", "n", "k", "parseSize", "size", "x", "y", "z", "d", "size", "nodeSize", "nodeSpacing", "parseSize", "g", "Graph", "size", "parseSize", "width", "point", "isHorizontal", "a", "b", "point2", "max", "min", "i", "getControlPoints", "x", "y", "DEFAULTS_LAYOUT_OPTIONS", "width", "n", "i", "r", "angle", "k", "j", "DEFAULTS_LAYOUT_OPTIONS", "width", "isArray", "parseSize", "nodeSize", "i", "r", "j", "d", "x", "y", "z", "add", "i", "j", "n", "x", "y", "z", "t", "i", "_", "find_default", "x", "y", "z", "x2", "y2", "z2", "x3", "y3", "z3", "q", "i", "d2", "d", "distance", "x2", "y2", "z2", "x", "y", "z", "d", "remove_default", "d", "x", "y", "z", "i", "j", "n", "size", "q", "q", "d", "x_default", "_", "d", "y_default", "_", "d", "_", "x", "y", "z", "i", "find_default", "remove_default", "x_default", "y_default", "i", "x", "y", "z", "size", "d", "n", "data", "q", "x2", "width", "y2", "DEFAULTS_LAYOUT_OPTIONS", "i", "width", "Graph", "d", "degree", "n", "x", "y", "z", "node", "Matrix", "SingularValueDecomposition", "DEFAULTS_LAYOUT_OPTIONS", "p", "i", "j", "M", "Matrix", "SingularValueDecomposition", "layout", "DEFAULTS_LAYOUT_OPTIONS", "n", "Graph", "options", "x", "y", "nodes", "d", "spacing", "isArray", "size", "_a", "layout", "position", "n", "_", "apply", "add_default", "d", "x", "add", "i", "j", "addAll", "n", "cover_default", "x", "z", "i", "data_default", "extent_default", "_", "find_default", "x", "x2", "x3", "q", "i", "d", "remove_default", "d", "x", "i", "j", "removeAll", "n", "root_default", "size_default", "size", "visit_default", "q", "visitAfter_default", "q", "defaultX", "d", "x_default", "_", "x", "defaultX", "leaf_copy", "treeProto", "i", "add_default", "addAll", "cover_default", "data_default", "extent_default", "find_default", "remove_default", "removeAll", "root_default", "size_default", "visit_default", "visitAfter_default", "x_default", "g", "width", "parseSize", "dagre", "x", "y", "b", "F", "x", "y", "s", "d", "DEFAULTS_LAYOUT_OPTIONS", "width", "Graph", "j", "i", "degree", "dir", "eucliDis", "add", "max", "DEFAULTS_LAYOUT_OPTIONS", "i", "width", "Graph", "k", "c", "j", "k2", "v", "u", "e", "DEFAULTS_LAYOUT_OPTIONS", "position", "n", "n2", "width", "parseSize", "p", "w", "h", "i", "min", "max", "x", "y", "M", "Matrix", "SingularValueDecomposition", "i", "x", "y", "SPEED_DIVISOR", "DEFAULTS_LAYOUT_OPTIONS", "width", "k", "i", "_", "v", "u", "j", "n", "DEFAULTS_LAYOUT_OPTIONS", "width", "i", "handleInfinity", "x", "y", "p", "v", "u", "j", "a", "matrix", "max", "DEFAULTS_LAYOUT_OPTIONS", "width", "wrap", "obj", "returnValue", "proxy", "r", "p", "last", "v", "layout", "wrap", "result", "_a", "layout", "y", "x", "_", "point", "size", "w", "h", "dfs", "width", "x", "y", "n", "x", "y", "x2", "y2", "round", "v", "Line", "ctx", "l", "cross", "r", "EState", "OutCode", "a", "width", "p", "point", "Circle", "i", "j", "rect", "w", "k", "min", "max", "scale", "point", "x", "y", "d", "i", "Line", "a", "b", "p", "r", "distance", "totalArea", "leftArea", "s", "e", "t", "j", "k", "size", "l", "round", "ctx", "o", "N", "S", "E", "v", "defaultOptions", "EDirty", "Circle", "m", "f", "BubbleSets", "d", "__rest", "key", "defaultOptions", "Line", "options", "width", "i", "j", "p", "p2", "q", "e", "k", "x", "y", "it", "Circle", "canvas", "defaultLensStyle", "Circle", "position", "d", "canvas", "width", "scale", "add", "History", "values", "format", "pt", "x", "y", "point", "x", "y", "a", "b", "x", "c", "d", "y", "a", "b", "x", "e", "scale", "n", "g", "q", "t", "i", "a", "b", "x", "y", "a", "b", "x", "y", "e", "f", "ne", "n", "g", "scalarScalar", "a", "b", "x", "y", "e", "f", "ne", "n", "g", "scale", "orientation3Exact", "p", "n", "d", "orientation4Exact", "a", "b", "c", "l", "r", "s", "proc", "o2", "i", "n", "result", "i", "a", "b", "d", "lower", "upper", "p", "m", "j", "d", "i", "a", "b", "o", "dot", "point", "grid", "format", "concave", "pt", "p2", "point", "point2", "current", "i", "v2", "v1", "v", "p", "_", "l2", "point", "m", "__rest", "size", "width", "canvas", "x", "y", "W", "H", "width", "position", "__rest", "canvas", "w", "h", "x", "y", "width", "canvas", "position", "scale", "max", "min", "canvas", "__awaiter", "distance", "_a", "a", "b", "Timebar", "canvas", "x", "y", "width", "__rest", "_a", "position", "i", "defaultOptions", "canvas", "size", "width", "pt", "w", "h", "ctx", "__rest", "position", "d", "e", "v", "position", "Tooltip", "__awaiter", "x", "y", "_e", "canvas", "position", "width", "width", "ctx", "canvas", "rotate", "width", "__rest", "tokens", "EDGE_PALETTE_OPTIONS", "tokens", "order", "add", "id", "id", "isStyleEqual", "a", "b", "Canvas", "__rest", "canvas", "width", "position", "g", "point", "size", "x", "y", "z", "__awaiter", "r", "d", "n", "_a", "animation", "_b", "_c", "position", "x", "y", "z", "canvas", "canvas", "e", "__rest", "Graph", "_e", "_a", "position", "x", "y", "z", "o", "canvas", "i", "isCollapsed", "id", "add", "animation", "data", "_a", "x", "y", "z", "element", "_b", "layout", "o", "position", "idsOf", "add", "l", "options", "layout", "Graph", "x", "y", "z", "canvas", "x2", "y2", "element", "__rest", "width", "x", "y", "canvas", "width", "position", "z", "rotate", "scale", "min", "max", "x2", "y2", "size", "Graph", "data", "layout", "width", "Canvas", "canvas", "angle", "position", "id", "point", "__rest", "add", "scale", "centrality", "size", "_a", "_", "edge", "e", "a", "b", "distance", "i", "cacheStyle", "edges", "_a", "_", "Line", "Polyline", "Circle", "Ellipse", "HTML", "Image", "Rect", "BubbleSets", "History", "Timebar", "Tooltip", "version", "render", "unmount", "HTML", "Polyline", "dfs", "_a", "import_lodash", "import_react", "import_react", "SC_ATTR", "process", "env", "REACT_APP_SC_ATTR", "SC_ATTR_ACTIVE", "SC_ATTR_VERSION", "SC_VERSION", "SPLITTER", "IS_BROWSER", "window", "document", "IS_RSC", "React", "createContext", "DISABLE_SPEEDY", "Boolean", "SC_DISABLE_SPEEDY", "REACT_APP_SC_DISABLE_SPEEDY", "NODE_ENV", "invalidHookCallRe", "seen", "Set", "checkDynamicCreation", "displayName", "componentId", "IS_RSC", "parsedIdString", "concat", "message_1", "originalConsoleError_1", "console", "error", "didNotCallInvalidHook_1", "consoleErrorMessage", "consoleErrorArgs", "_i", "arguments", "length", "test", "delete", "apply", "__spreadArray", "React", "useState", "has", "warn", "add", "message", "EMPTY_ARRAY", "Object", "freeze", "EMPTY_OBJECT", "determineTheme", "props", "providedTheme", "defaultProps", "theme", "domElements", "escapeRegex", "dashesAtEnds", "escape", "str", "replace", "AD_REPLACER_R", "getAlphabeticChar", "code", "String", "fromCharCode", "generateAlphabeticName", "x", "name", "Math", "abs", "phash", "h", "i", "charCodeAt", "hash", "generateComponentId", "getComponentName", "target", "isTag", "charAt", "toLowerCase", "hasSymbol", "Symbol", "for", "REACT_MEMO_TYPE", "REACT_FORWARD_REF_TYPE", "REACT_STATICS", "childContextTypes", "contextType", "contextTypes", "getDefaultProps", "getDerivedStateFromError", "getDerivedStateFromProps", "mixins", "propTypes", "type", "KNOWN_STATICS", "prototype", "caller", "callee", "arity", "MEMO_STATICS", "$$typeof", "compare", "TYPE_STATICS", "_a", "render", "getStatics", "component", "object", "defineProperty", "getOwnPropertyNames", "getOwnPropertySymbols", "getOwnPropertyDescriptor", "getPrototypeOf", "objectPrototype", "hoistNonReactStatics", "targetComponent", "sourceComponent", "excludelist", "inheritedComponent", "keys", "targetStatics", "sourceStatics", "key", "descriptor", "e", "isFunction", "isStyledComponent", "joinStrings", "a", "b", "joinStringArray", "arr", "sep", "result", "isPlainObject", "constructor", "mixinRecursively", "source", "forceMerge", "Array", "isArray", "setToString", "toStringFn", "value", "ERRORS", "format", "args", "c", "len", "push", "forEach", "d", "throwStyledComponentsError", "interpolations", "Error", "join", "trim", "DefaultGroupedTag", "tag", "this", "groupSizes", "Uint32Array", "indexOfGroup", "group", "index", "insertRules", "rules", "oldBuffer", "oldSize", "newSize", "styledError", "set", "ruleIndex", "l", "insertRule", "clearGroup", "length_1", "startIndex", "endIndex", "deleteRule", "getGroup", "css", "getRule", "SPLITTER", "MAX_SMI", "groupIDRegister", "Map", "reverseRegister", "nextFreeGroup", "getGroupForId", "id", "get", "setGroupForId", "SELECTOR", "SC_ATTR", "SC_ATTR_VERSION", "SC_VERSION", "MARKER_RE", "RegExp", "rehydrateNamesFromContent", "sheet", "content", "names", "split", "registerName", "rehydrateSheetFromTag", "style", "n", "parts", "textContent", "part", "marker", "match", "parseInt", "getTag", "rehydrateSheet", "nodes", "document", "querySelectorAll", "node", "getAttribute", "SC_ATTR_ACTIVE", "parentNode", "removeChild", "getNonce", "__webpack_nonce__", "makeStyleTag", "head", "parent", "createElement", "prevStyle", "from", "nextSibling", "setAttribute", "nonce", "insertBefore", "CSSOMTag", "element", "appendChild", "createTextNode", "styleSheets", "ownerNode", "rule", "_error", "cssRules", "cssText", "TextTag", "childNodes", "VirtualTag", "_target", "splice", "SHOULD_REHYDRATE", "IS_BROWSER", "defaultOptions", "isServer", "useCSSOMInjection", "DISABLE_SPEEDY", "StyleSheet", "options", "globalStyles", "_this", "__assign", "gs", "server", "r", "size", "selector", "registerId", "rehydrate", "reconstructWithOptions", "withNames", "undefined", "allocateGSInstance", "hasNameForId", "groupNames", "clearNames", "clear", "clearRules", "clearTag", "AMP_REGEX", "SLASH", "hasUnbalancedBraces", "indexOf", "depth", "inString", "inComment", "recursivelySetNamepace", "compiled", "namespace", "map", "replaceAll", "prop", "children", "createStylisInstance", "_componentId", "_selector", "_selectorRegexp", "_b", "_c", "_d", "plugins", "selfReferenceReplacer", "offset", "string", "startsWith", "endsWith", "middlewares", "slice", "RULESET", "includes", "prefix", "prefixer", "stringify", "stringifyRules", "flatCSS", "declStart", "braceDepth", "skipEnd", "skipCode", "substring", "remaining", "start", "urlDepth", "compile", "stack", "serialize", "middleware", "rulesheet", "reduce", "acc", "plugin", "throwStyledError", "toString", "mainSheet", "mainStylis", "defaultContextValue", "shouldForwardProp", "styleSheet", "stylis", "StyleSheetContext", "Provider", "Consumer", "createContext", "StyleSheetConsumer", "StylisContext", "useStyleSheetContext", "useContext", "StyleSheetManager", "useMemo", "resolvedStyleSheet", "disableCSSOMInjection", "enableVendorPrefixes", "stylisPlugins", "styleSheetContextValue", "Keyframes", "inject", "stylisInstance", "resolvedName", "getName", "addUnitIfNeeded", "unitless", "isUpper", "hyphenateStyleName", "output", "isFalsish", "chunk", "objToCssArray", "obj", "val", "hasOwnProperty", "isCss", "hyphenate", "flatten", "executionContext", "styledComponentId", "isReactComponent", "chunklet", "isStaticRules", "SEED", "ComponentStyle", "baseStyle", "staticRulesId", "isStatic", "baseHash", "generateAndInjectStyles", "className", "cssStatic", "name_1", "generateName", "cssStaticFormatted", "dynamicHash", "partRule", "partString", "name_2", "cssFormatted", "window", "ThemeContext", "ThemeConsumer", "identifiers", "seenUnknownProps", "Set", "createStyledComponent", "target", "options", "rules", "isTargetStyledComp", "isStyledComponent", "styledComponentTarget", "isCompositeComponent", "isTag", "_a", "attrs", "EMPTY_ARRAY", "_b", "componentId", "displayName", "parentComponentId", "name", "escape", "concat", "generateComponentId", "SC_VERSION", "_c", "getComponentName", "styledComponentId", "finalAttrs", "filter", "Boolean", "shouldForwardProp", "shouldForwardPropFn_1", "passedShouldForwardPropFn_1", "prop", "elementToBeCreated", "componentStyle", "ComponentStyle", "undefined", "forwardRefRender", "props", "ref", "forwardedComponent", "forwardedRef", "componentAttrs", "defaultProps", "foldedComponentIds", "contextTheme", "IS_RSC", "React", "useContext", "ThemeContext", "ssc", "useStyleSheetContext", "useDebugValue", "theme", "determineTheme", "EMPTY_OBJECT", "context", "attrDef", "__assign", "className", "i", "length", "resolvedAttrDef", "isFunction", "key", "joinStrings", "style", "as", "propsForElement", "forwardedAs", "isPropValid", "has", "domElements", "add", "console", "warn", "resolvedAttrs", "result", "generateAndInjectStyles", "styleSheet", "stylis", "generatedClassName", "css", "warnTooManyClasses", "classString", "element", "createElement", "Fragment", "precedence", "href", "children", "WrappedStyledComponent", "forwardRef", "Object", "defineProperty", "get", "this", "_foldedDefaultProps", "set", "obj", "sources", "_i", "arguments", "sources_1", "mixinRecursively", "checkDynamicCreation", "generatedClasses", "warningSeen", "keys", "parsedIdString", "setToString", "hoist", "interleave", "strings", "interpolations", "len", "push", "addTag", "arg", "assign", "isCss", "styles", "isPlainObject", "flatten", "__spreadArray", "styleStringArray", "constructWithOptions", "componentConstructor", "tag", "styledError", "templateFunction", "initialStyles", "apply", "Array", "prototype", "withConfig", "config", "baseStyled", "styled", "forEach", "domElement", "GlobalStyle", "isStatic", "isStaticRules", "StyleSheet", "registerId", "createStyles", "instance", "executionContext", "joinStringArray", "id", "insertRules", "removeStyles", "clearRules", "renderStyles", "hasNameForId", "ServerStyleSheet", "_this", "this", "_emitSheetCSS", "css", "instance", "toString", "nonce", "getNonce", "htmlAttr", "joinStringArray", "concat", "SC_ATTR", "SC_ATTR_VERSION", "SC_VERSION", "filter", "Boolean", "getStyleTags", "sealed", "styledError", "getStyleElement", "n", "props", "_a", "dangerouslySetInnerHTML", "__html", "React", "key", "seal", "StyleSheet", "isServer", "prototype", "collectStyles", "children", "createElement", "StyleSheetManager", "sheet", "interleaveWithNodeStream", "input", "navigator", "product", "console", "warn", "windowGlobalKey", "concat", "SC_ATTR", "window", "isVertical", "isCollapsed", "React", "import_react", "StyledWrapper", "isCollapsed", "React", "import_react", "StyledWrapper", "position", "React", "ReactDOM", "__assign", "t", "s", "i", "n", "p", "__assign", "ReactDOM", "version", "e", "import_react", "React", "import_react", "d", "b", "p", "ErrorBoundary", "e", "React", "ctx", "__spreadArray", "i", "l", "ctx", "import_react", "r", "g", "b", "c", "StyledWrapper", "React", "import_lodash", "import_react", "StyledWrapper", "isCollapsed", "e", "React", "_", "PlusMinusIcon", "React", "isCollapsed", "linear", "log", "pow", "sqrt", "scale", "linear", "log", "pow", "sqrt", "values", "width", "BUILT_IN_EXTENSIONS", "registerBuiltInExtensions", "BUILT_IN_EXTENSIONS", "registerBuiltInExtensions", "import_react", "import_react", "React", "import_react", "import_react", "__assign", "t", "s", "i", "n", "p", "o", "m", "r", "e", "Graph", "graph", "__assign", "t", "s", "i", "n", "p", "__rest", "e", "Graph", "React", "import_lodash", "import_react", "_a", "React", "ref", "import_lodash", "mergeOptions", "i", "import_lodash", "d", "_a", "mergeOptions", "React", "import_react", "import_lodash", "import_lodash", "width", "DEFAULT_OPTIONS", "d", "_a", "mergeOptions", "DEFAULT_OPTIONS", "React", "import_react", "import_react", "TextNode", "DEFAULT_OPTIONS", "React", "_a", "mergeOptions", "DEFAULT_OPTIONS", "React", "import_react", "import_react", "TextNode", "DEFAULT_OPTIONS", "React", "_a", "mergeOptions", "DEFAULT_OPTIONS", "React", "import_react", "import_lodash", "import_react", "import_lodash", "import_lodash", "size", "ArrowCountIcon", "TextNode", "DEFAULT_OPTIONS", "isCollapsed", "React", "width", "_a", "mergeOptions", "DEFAULT_OPTIONS", "React", "import_react", "import_lodash", "import_react", "ArrowCountIcon", "TextNode", "DEFAULT_OPTIONS", "isCollapsed", "React", "width", "t", "_a", "options", "mergeOptions", "DEFAULT_OPTIONS", "React", "import_react", "DEFAULT_OPTIONS", "mergeOptions", "DEFAULT_OPTIONS", "React", "import_react", "import_react", "TextNode", "DEFAULT_OPTIONS", "React", "_a", "options", "mergeOptions", "DEFAULT_OPTIONS", "React"]
}
