/**
 * RiverEdge SaaS 多组织框架 - 全局样式
 *
 * 只保留必要的全局样式，尽量使用 Ant Design 原生样式
 */

* {
  box-sizing: border-box;
}

/* 数字输入框：与普通文本框保持一致的边距（使用内边距，减少外边距，避免选中背景被圆角裁剪） */
.ant-input-number.ant-input-number-sm .ant-input-number-input {
  padding: 0 4px !important;
}

/* UniDropdown / 数据字典选择：二分之一宽度并补偿边距（表单网格布局） */
.dictionary-select-wrapper {
  width: 100%;
  min-width: 0;
  box-sizing: border-box;
  .ant-select {
    width: 100% !important;
    min-width: 0 !important;
    max-width: 100%;
    .ant-select-selector {
      width: 100% !important;
      box-sizing: border-box;
    }
  }
}

/* 全局滚动条样式优化，支持暗黑模式自动适配 */
::-webkit-scrollbar {
  width: 10px;
  height: 10px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background-color: var(--ant-colorFillSecondary);
  border-radius: 10px;
  /* 使用透明边框和 background-clip 实现薄形滚动条效果 */
  border: 3px solid transparent;
  background-clip: content-box;
}

::-webkit-scrollbar-thumb:hover {
  background-color: var(--ant-colorFill);
  border: 2px solid transparent;
}

/* Firefox 滚动条适配 */
* {
  scrollbar-width: thin;
  scrollbar-color: var(--ant-colorFillSecondary) transparent;
}

/* ant-pro-layout-container：隐藏滚动条且不占宽度 */
.ant-pro-layout-container {
  scrollbar-width: none;
  -ms-overflow-style: none;
}
.ant-pro-layout-container::-webkit-scrollbar {
  display: none;
  width: 0;
  height: 0;
}

html,
body {
  margin: 0;
  padding: 0;
  height: 100%;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'PingFang SC', 'Hiragino Sans GB',
    'Microsoft YaHei', 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', sans-serif;
  // B 端项目核心优化：虽然不再强制使用全等宽字体，但保留数字的等宽特性（表格对齐必须）
  font-variant-numeric: tabular-nums; 

  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  /* 使用 Ant Design 主题变量，支持深色模式 */
  background-color: var(--ant-colorBgLayout);
  /* 滚动限制在 ant-layout-content 内，禁止 body 出现滚动条，避免 Dropdown/Select 关闭时滚动条闪现 */
  overflow: hidden;
}

#root {
  height: 100%;
  min-height: 100vh;
}

code {
  font-family: ui-monospace, 'SF Mono', 'Menlo', 'Monaco', 'Consolas', 'Courier New', monospace;
  /* 使用主题变量，支持深色模式 */
  background-color: var(--ant-colorFillTertiary);
  padding: 2px 6px;
  border-radius: 3px;
  font-size: 0.9em;
}

/* 触屏模式全局样式 */
.touchscreen-mode {
  /* 触屏模式下的字体大小调整 */
  font-size: 24px;

  /* 触屏模式下的按钮样式 */
  .ant-btn {
    min-height: 60px;
    font-size: 24px;
    padding: 12px 24px;

    /* 按钮间距 */
    & + .ant-btn {
      margin-left: 20px;
    }
  }

  /* 触屏模式下的输入框样式 */
  .ant-input,
  .ant-input-number-input,
  .ant-select-selector {
    min-height: 60px;
    font-size: 24px;
    padding: 12px 16px;
  }

  /* 触屏模式下的表单标签样式 */
  .ant-form-item-label > label {
    font-size: 24px;
    height: 60px;
    line-height: 60px;
  }

  /* 触屏模式下的表格样式 */
  .ant-table {
    font-size: 24px;

    .ant-table-thead > tr > th {
      font-size: 24px;
      padding: 16px;
      min-height: 60px;
    }

    .ant-table-tbody > tr > td {
      font-size: 24px;
      padding: 16px;
      min-height: 60px;
    }
  }

  /* 触屏模式下的卡片样式 */
  .ant-card {
    .ant-card-head-title {
      font-size: 32px;
      font-weight: 600;
    }

    .ant-card-body {
      font-size: 24px;
    }
  }

  /* 触屏模式下的间距调整 */
  .ant-space-item {
    margin-right: 20px !important;
    margin-bottom: 20px !important;
  }

  /* 触屏模式下的Modal样式 */
  .ant-modal {
    .ant-modal-header {
      .ant-modal-title {
        font-size: 32px;
        font-weight: 600;
      }
    }

    .ant-modal-body {
      font-size: 24px;
    }

    .ant-modal-footer {
      .ant-btn {
        min-height: 60px;
        font-size: 24px;
      }
    }
  }

  /* 触屏模式下的Drawer样式 */
  .ant-drawer {
    .ant-drawer-header {
      .ant-drawer-title {
        font-size: 32px;
        font-weight: 600;
      }
    }

    .ant-drawer-body {
      font-size: 24px;
    }
  }
}

/* 移动端响应式样式 */
@media (max-width: 768px) {
  /* 移动端字体大小调整 */
  body {
    font-size: 14px;
  }

  /* 移动端按钮样式 */
  .ant-btn {
    min-height: 44px;
    font-size: 14px;
    padding: 8px 16px;
  }

  /* 移动端输入框样式 */
  .ant-input,
  .ant-input-number-input,
  .ant-select-selector {
    min-height: 44px;
    font-size: 14px;
    padding: 8px 12px;
  }

  /* 移动端表格样式 */
  .ant-table {
    font-size: 12px;

    .ant-table-thead > tr > th {
      font-size: 12px;
      padding: 8px;
    }

    .ant-table-tbody > tr > td {
      font-size: 12px;
      padding: 8px;
    }
  }

  /* 移动端卡片样式 */
  .ant-card {
    .ant-card-head-title {
      font-size: 16px;
      font-weight: 600;
    }

    .ant-card-body {
      font-size: 14px;
      padding: 12px;
    }
  }

  /* 移动端Modal样式 */
  .ant-modal {
    max-width: 95vw;
    margin: 10px auto;

    .ant-modal-header {
      .ant-modal-title {
        font-size: 18px;
        font-weight: 600;
      }
    }

    .ant-modal-body {
      font-size: 14px;
      padding: 16px;
    }

    .ant-modal-footer {
      .ant-btn {
        min-height: 44px;
        font-size: 14px;
      }
    }
  }

  /* 移动端Drawer样式（排除需求计算详情抽屉，该抽屉在桌面端需更宽） */
  .ant-drawer:not(.demand-computation-drawer) {
    width: 90vw !important;

    .ant-drawer-header {
      .ant-drawer-title {
        font-size: 18px;
        font-weight: 600;
      }
    }

    .ant-drawer-body {
      font-size: 14px;
      padding: 16px;
    }
  }

  /* 移动端表单样式 */
  .ant-form-item-label > label {
    font-size: 14px;
    height: 44px;
    line-height: 44px;
  }

  /* 移动端间距调整 */
  .ant-space-item {
    margin-right: 8px !important;
    margin-bottom: 8px !important;
  }
}

/* 两栏布局中的 uni-table 高度限制 */
.two-column-layout-content {
  /* 确保内容区使用 flex 布局 */
  display: flex !important;
  flex-direction: column !important;
  min-height: 0 !important;
  overflow: hidden !important;

  /* uni-table 容器在 two-column-layout 中时，高度填满容器 */
  > .uni-table-container {
    flex: 1 !important;
    display: flex !important;
    flex-direction: column !important;
    min-height: 0 !important;
    height: 100% !important;

    /* ProTable 容器 */
    > div {
      flex: 1 !important;
      display: flex !important;
      flex-direction: column !important;
      min-height: 0 !important;
      height: 100% !important;

      /* ProTable 本身 */
      .ant-pro-table {
        flex: 1 !important;
        display: flex !important;
        flex-direction: column !important;
        min-height: 0 !important;
        height: 100% !important;

        /* ProTable 内容区 */
        .ant-pro-table-list-toolbar {
          flex-shrink: 0 !important;
        }

        .ant-pro-table-container {
          flex: 1 !important;
          display: flex !important;
          flex-direction: column !important;
          min-height: 0 !important;
          height: 100% !important;

          /* 表格容器 */
          .ant-table-wrapper {
            flex: 1 !important;
            display: flex !important;
            flex-direction: column !important;
            min-height: 0 !important;
            height: 100% !important;
            overflow: hidden !important;

            /* 表格内容 */
            .ant-spin-nested-loading {
              flex: 1 !important;
              display: flex !important;
              flex-direction: column !important;
              min-height: 0 !important;
              height: 100% !important;
              overflow: hidden !important;

              .ant-spin-container {
                flex: 1 !important;
                display: flex !important;
                flex-direction: column !important;
                min-height: 0 !important;
                height: 100% !important;
                overflow: hidden !important;

                .ant-table {
                  display: flex !important;
                  flex-direction: column !important;
                  height: 100% !important;

                  .ant-table-container {
                    flex: 1 !important;
                    display: flex !important;
                    flex-direction: column !important;
                    min-height: 0 !important;
                    height: 100% !important;
                    overflow: hidden !important;

                    .ant-table-header {
                      flex-shrink: 0 !important;
                    }

                    /* 确保表头和表体列宽一致 - 使用 table-layout: fixed */
                    .ant-table {
                      table-layout: fixed !important;
                    }

                    /* 确保表头和表体容器宽度一致 */
                    .ant-table-header table,
                    .ant-table-body table {
                      width: 100% !important;
                      table-layout: fixed !important;
                    }

                    .ant-table-body {
                      flex: 1 !important;
                      min-height: 0 !important;
                      overflow-y: auto !important;
                      overflow-x: auto !important;
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}

/* 高级搜索 Modal 动画统一 */
.query-search-modal-wrap {
  /* 确保 Modal 动画方向一致：始终从上向下弹出 */
  .ant-modal {
    animation-duration: 0.3s;
    animation-timing-function: cubic-bezier(0.08, 0.82, 0.17, 1);
  }

  /* 打开动画：从上向下 */
  &.ant-modal-enter .ant-modal {
    animation-name: antModalSlideDown;
  }

  /* 关闭动画：从下向上 */
  &.ant-modal-leave .ant-modal {
    animation-name: antModalSlideUp;
  }
}

/* Modal 从上向下弹出动画 */
@keyframes antModalSlideDown {
  from {
    opacity: 0;
    transform: translateY(-20px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Modal 从下向上收起动画 */
@keyframes antModalSlideUp {
  from {
    opacity: 1;
    transform: translateY(0);
  }

  to {
    opacity: 0;
    transform: translateY(-20px);
  }
}

/* 左侧面板树组件统一 padding - 所有在 left-panel-scroll-container 内的树组件 */
.left-panel-scroll-container .ant-tree {
  padding: 10px !important;
}

/* 树节点上下间距优化 - 仅应用于左侧面板的树，排除弹窗中的树 */
.left-panel-scroll-container .ant-tree .ant-tree-treenode {
  height: 32px !important;
  line-height: 32px !important;
  margin: calc(var(--ant-padding-xs) / 2) !important;
}

/* 排除弹窗中的树组件 */
.ant-popover .ant-tree .ant-tree-treenode,
.ant-pro-table-column-setting-list .ant-tree .ant-tree-treenode,
.ant-dropdown .ant-tree .ant-tree-treenode {
  height: auto !important;
  line-height: normal !important;
  margin: 0 !important;
}

/* Spin 嵌套容器 padding 优化 */
.ant-spin-nested-loading > .ant-spin-container {
  padding: 0 !important;
}

.hide-scrollbar,
.left-panel-scroll-container {
  overflow: auto;
}

/* 两栏布局右侧内容区：可滚动但不显示滚动条 */
.two-column-layout-right-content-scroll {
  overflow-y: auto !important;
  overflow-x: hidden !important;
  scrollbar-width: none;
  -ms-overflow-style: none;
  &::-webkit-scrollbar {
    display: none;
    width: 0;
    height: 0;
  }
}

/* 需求计算详情抽屉：桌面端固定宽度 1200px，移动端 90vw */
@media (min-width: 769px) {
  .demand-computation-drawer .ant-drawer-content-wrapper {
    width: 1300px !important;
  }
}
@media (max-width: 768px) {
  .demand-computation-drawer .ant-drawer-content-wrapper {
    width: 90vw !important;
  }
}

/* Modal/抽屉内容区：超出时滚动但不显示垂直滚动条（也不占宽度） */
.ant-drawer-body {
  overflow-y: auto;
  overflow-x: hidden;
  scrollbar-width: none;
  -ms-overflow-style: none;
  &::-webkit-scrollbar {
    display: none;
    width: 0;
    height: 0;
  }
}

.ant-modal-body {
  overflow-y: auto;
  overflow-x: hidden;
  scrollbar-width: none;
  -ms-overflow-style: none;
  &::-webkit-scrollbar {
    display: none;
    width: 0;
    height: 0;
  }
}

/* 全局：Modal 确认按钮组默认居左 */
.ant-modal .ant-modal-footer,
.ant-modal .ant-pro-form-submitter {
  display: flex !important;
  justify-content: flex-start !important;
  flex-wrap: wrap;
  gap: 8px;
}
.ant-modal .ant-modal-footer .ant-space {
  justify-content: flex-start;
}

/* 全局：Modal 内表单标题为粗体 */
.ant-modal .ant-form-item-label > label {
  font-weight: 600;
}

/* 全局：Modal 标题区高度规范（与打印预览一致，统一标题高度） */
.ant-modal .ant-modal-header {
  min-height: 38px !important;
  display: flex !important;
  align-items: center !important;
  padding-bottom: 6px;
  border-bottom: 1px solid var(--ant-colorBorder);
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.04);
  padding-inline-end: 56px !important;
}

/* 全局：Modal 关闭按钮（圆角跟随系统，红色系最佳实践） */
.ant-modal .ant-modal-close {
  width: 32px !important;
  height: 32px !important;
  background: #fff1f0 !important;
  color: #cf1322 !important;
  border-radius: var(--ant-borderRadius, 6px) !important;
  inset-inline-end: 24px !important;
  top: 36px !important;
  transform: translateY(-50%) !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
}
.ant-modal .ant-modal-close:hover {
  background: #ffccc7 !important;
  color: #a8071a !important;
}

/* 全局：Modal 标题几何装饰（主题色竖条） */
.ant-modal .ant-modal-header .ant-modal-title {
  position: relative;
  padding-left: 12px;

  &::before {
    content: '';
    position: absolute;
    left: 0;
    top: 50%;
    transform: translateY(-50%);
    width: 4px;
    height: 1em;
    background: var(--ant-colorPrimary);
    border-radius: 2px;
  }
}

/* 应用级菜单分组标题容器样式优化 - 修改包含 menu-group-title-app 的菜单项容器 */
/* 通过 data-menu-id 属性定位应用分组菜单项（key 以 app-group- 开头） */
.ant-menu-item[data-menu-id*='app-group-'],
.ant-menu-item[class*='menu-group-title-app'] {
  /* 减小容器的上下 padding */
  padding-top: 10px !important;
  padding-bottom: 0 !important;
  height: 26px !important;
  line-height: 16px !important;

  /* 设置默认颜色为主题色 */
  color: var(--ant-colorPrimary) !important;

  /* 完全禁用容器的 hover 效果 */
  &:hover,
  &:focus,
  &:active {
    background-color: transparent !important;
    color: var(--ant-colorPrimary) !important;
    box-shadow: none !important;
    border: none !important;

    /* 禁用 hover 时的伪元素 */
    &::before,
    &::after {
      display: none !important;
    }
  }

  /* 禁用选中状态 */
  &.ant-menu-item-selected {
    background-color: transparent !important;
    color: var(--ant-colorPrimary) !important;
  }

  /* 禁用所有可能的 hover 效果 */
  &:hover .ant-menu-title-content,
  &:hover .menu-group-title-app {
    background-color: transparent !important;
    color: var(--ant-colorPrimary) !important;
  }

  /* 确保内部内容区域也没有 padding */
  .ant-menu-title-content {
    padding-top: 0 !important;
    padding-bottom: 0 !important;
  }
}

/* ProTable 全局边框设置（排除 uni-table 中的 ProTable） */
/* 仅外圈边框模式：显示卡片边框，内部表格保持默认 */
.ant-modal .ant-table {
  /* 显示卡片边框 */
  border: 1px solid var(--ant-colorBorder) !important;
  border-radius: var(--ant-borderRadius) !important;
}

:where(.css-dev-only-do-not-override-dbp7pc).ant-tree .ant-tree-switcher:before {
  top: 4px !important;
}

/* 强制所有滚动条轨道透明（覆盖浏览器默认，用于甘特图等） */
*::-webkit-scrollbar-track {
  background: transparent !important;
}
*::-webkit-scrollbar {
  background: transparent !important;
}
