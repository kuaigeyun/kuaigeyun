# Inngest æ•°æ®åº“è¯´æ˜

## ğŸ“‹ æ¦‚è¿°

Inngest ä½œä¸ºå·¥ä½œæµå¼•æ“ï¼Œéœ€è¦è‡ªå·±çš„æ•°æ®åº“æ¥å­˜å‚¨å·¥ä½œæµæ‰§è¡Œç›¸å…³çš„å…ƒæ•°æ®å’ŒçŠ¶æ€ä¿¡æ¯ã€‚è¿™ä¸ªæ•°æ®åº“ä¸ä¸šåŠ¡æ•°æ®åº“ï¼ˆ`riveredge`ï¼‰æ˜¯**å®Œå…¨ç‹¬ç«‹**çš„ï¼Œç”¨äºä¸åŒçš„ç›®çš„ã€‚

---

## ğŸ¯ Inngest æ•°æ®åº“çš„ä½œç”¨

### 1. å·¥ä½œæµæ‰§è¡ŒçŠ¶æ€ç®¡ç†

**ä½œç”¨**ï¼šå­˜å‚¨æ¯ä¸ªå·¥ä½œæµå‡½æ•°çš„æ‰§è¡ŒçŠ¶æ€å’Œå†å²è®°å½•

**å­˜å‚¨å†…å®¹**ï¼š
- âœ… **å‡½æ•°è¿è¡Œè®°å½•**ï¼ˆFunction Runsï¼‰
  - è¿è¡Œ IDï¼ˆRun IDï¼‰
  - å‡½æ•° IDï¼ˆFunction IDï¼‰
  - è§¦å‘äº‹ä»¶ï¼ˆTrigger Eventï¼‰
  - æ‰§è¡ŒçŠ¶æ€ï¼ˆpendingã€runningã€completedã€failedï¼‰
  - å¼€å§‹æ—¶é—´ã€ç»“æŸæ—¶é—´
  - æ‰§è¡Œç»“æœ

- âœ… **æ­¥éª¤æ‰§è¡Œè®°å½•**ï¼ˆStep Executionsï¼‰
  - æ­¥éª¤ IDï¼ˆStep IDï¼‰
  - æ­¥éª¤åç§°ï¼ˆStep Nameï¼‰
  - æ­¥éª¤çŠ¶æ€
  - æ­¥éª¤è¾“å…¥/è¾“å‡ºæ•°æ®
  - æ­¥éª¤æ‰§è¡Œæ—¶é—´

- âœ… **é‡è¯•è®°å½•**ï¼ˆRetriesï¼‰
  - é‡è¯•æ¬¡æ•°
  - é‡è¯•åŸå› 
  - é‡è¯•æ—¶é—´
  - é‡è¯•ç»“æœ

**ç¤ºä¾‹åœºæ™¯**ï¼š
```python
# å½“å‘é€æ¶ˆæ¯äº‹ä»¶æ—¶
await inngest_client.send_event(
    event=Event(name="message/send", data={...})
)

# Inngest æ•°æ®åº“ä¼šè®°å½•ï¼š
# - äº‹ä»¶æ¥æ”¶æ—¶é—´
# - è§¦å‘çš„å‡½æ•°ï¼ˆmessage-senderï¼‰
# - å‡½æ•°æ‰§è¡ŒçŠ¶æ€
# - æ‰§è¡Œç»“æœ
```

### 2. äº‹ä»¶å­˜å‚¨å’Œé˜Ÿåˆ—ç®¡ç†

**ä½œç”¨**ï¼šå­˜å‚¨æ¥æ”¶åˆ°çš„æ‰€æœ‰äº‹ä»¶ï¼Œç®¡ç†äº‹ä»¶é˜Ÿåˆ—

**å­˜å‚¨å†…å®¹**ï¼š
- âœ… **äº‹ä»¶è®°å½•**ï¼ˆEventsï¼‰
  - äº‹ä»¶ IDï¼ˆEvent IDï¼‰
  - äº‹ä»¶åç§°ï¼ˆEvent Nameï¼‰
  - äº‹ä»¶æ•°æ®ï¼ˆEvent Dataï¼‰
  - äº‹ä»¶æ—¶é—´æˆ³
  - äº‹ä»¶çŠ¶æ€ï¼ˆpendingã€processedã€failedï¼‰

- âœ… **äº‹ä»¶é˜Ÿåˆ—**ï¼ˆEvent Queueï¼‰
  - å¾…å¤„ç†äº‹ä»¶åˆ—è¡¨
  - äº‹ä»¶ä¼˜å…ˆçº§
  - äº‹ä»¶å¤„ç†é¡ºåº

**ç¤ºä¾‹åœºæ™¯**ï¼š
```python
# å‘é€äº‹ä»¶
await inngest_client.send_event(
    event=Event(
        name="approval/submit",
        data={"tenant_id": 1, "approval_id": "..."}
    )
)

# Inngest æ•°æ®åº“ä¼šè®°å½•ï¼š
# - äº‹ä»¶å·²æ¥æ”¶
# - äº‹ä»¶åŠ å…¥é˜Ÿåˆ—
# - äº‹ä»¶ç­‰å¾…å¤„ç†
# - äº‹ä»¶è¢«å¤„ç†
```

### 3. å®šæ—¶è§¦å‘å™¨ç®¡ç†

**ä½œç”¨**ï¼šç®¡ç† Cronã€Intervalã€Date ç­‰å®šæ—¶è§¦å‘å™¨

**å­˜å‚¨å†…å®¹**ï¼š
- âœ… **è§¦å‘å™¨é…ç½®**ï¼ˆTrigger Configurationsï¼‰
  - Cron è¡¨è¾¾å¼
  - é—´éš”æ—¶é—´
  - ç›®æ ‡æ—¥æœŸ
  - è§¦å‘å™¨çŠ¶æ€

- âœ… **è§¦å‘å™¨æ‰§è¡Œè®°å½•**ï¼ˆTrigger Executionsï¼‰
  - è§¦å‘æ—¶é—´
  - è§¦å‘çš„å‡½æ•°
  - æ‰§è¡Œç»“æœ

**ç¤ºä¾‹åœºæ™¯**ï¼š
```python
# å®šæ—¶ä»»åŠ¡è°ƒåº¦å™¨æ¯åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡
@inngest_client.create_function(
    fn_id="scheduled-task-scheduler",
    trigger=TriggerCron(cron="* * * * *")
)

# Inngest æ•°æ®åº“ä¼šè®°å½•ï¼š
# - æ¯æ¬¡ Cron è§¦å‘çš„æ—¶é—´
# - è§¦å‘çš„å‡½æ•°
# - æ‰§è¡ŒçŠ¶æ€
```

### 4. å·¥ä½œæµç¼–æ’çŠ¶æ€

**ä½œç”¨**ï¼šå­˜å‚¨å¤æ‚å·¥ä½œæµçš„ç¼–æ’çŠ¶æ€å’ŒèŠ‚ç‚¹æµè½¬ä¿¡æ¯

**å­˜å‚¨å†…å®¹**ï¼š
- âœ… **å·¥ä½œæµå®ä¾‹**ï¼ˆWorkflow Instancesï¼‰
  - å·¥ä½œæµ ID
  - å½“å‰èŠ‚ç‚¹
  - èŠ‚ç‚¹çŠ¶æ€
  - èŠ‚ç‚¹è¾“å…¥/è¾“å‡º

- âœ… **èŠ‚ç‚¹æ‰§è¡Œå†å²**ï¼ˆNode Execution Historyï¼‰
  - èŠ‚ç‚¹æ‰§è¡Œé¡ºåº
  - èŠ‚ç‚¹æ‰§è¡Œç»“æœ
  - èŠ‚ç‚¹ä¹‹é—´çš„æ•°æ®ä¼ é€’

**ç¤ºä¾‹åœºæ™¯**ï¼š
```python
# å®¡æ‰¹æµç¨‹å·¥ä½œæµ
@inngest_client.create_function(
    fn_id="approval-workflow",
    trigger=TriggerEvent(event="approval/submit")
)

# Inngest æ•°æ®åº“ä¼šè®°å½•ï¼š
# - å·¥ä½œæµå¯åŠ¨
# - æ¯ä¸ªèŠ‚ç‚¹çš„æ‰§è¡ŒçŠ¶æ€
# - èŠ‚ç‚¹ä¹‹é—´çš„æ•°æ®æµè½¬
# - å·¥ä½œæµå®ŒæˆçŠ¶æ€
```

### 5. ä»»åŠ¡é‡è¯•å’Œé”™è¯¯å¤„ç†

**ä½œç”¨**ï¼šå­˜å‚¨ä»»åŠ¡é‡è¯•ä¿¡æ¯å’Œé”™è¯¯æ—¥å¿—

**å­˜å‚¨å†…å®¹**ï¼š
- âœ… **é‡è¯•è®°å½•**ï¼ˆRetry Recordsï¼‰
  - é‡è¯•æ¬¡æ•°
  - é‡è¯•é—´éš”
  - é‡è¯•åŸå› 
  - é‡è¯•ç»“æœ

- âœ… **é”™è¯¯æ—¥å¿—**ï¼ˆError Logsï¼‰
  - é”™è¯¯ç±»å‹
  - é”™è¯¯æ¶ˆæ¯
  - é”™è¯¯å †æ ˆ
  - é”™è¯¯æ—¶é—´

**ç¤ºä¾‹åœºæ™¯**ï¼š
```python
# å¦‚æœæ¶ˆæ¯å‘é€å¤±è´¥ï¼ŒInngest ä¼šè‡ªåŠ¨é‡è¯•
@inngest_client.create_function(
    fn_id="message-sender",
    retries=3  # é‡è¯•3æ¬¡
)

# Inngest æ•°æ®åº“ä¼šè®°å½•ï¼š
# - ç¬¬ä¸€æ¬¡æ‰§è¡Œå¤±è´¥
# - é‡è¯•1ï¼šå¤±è´¥
# - é‡è¯•2ï¼šå¤±è´¥
# - é‡è¯•3ï¼šæˆåŠŸ
```

---

## ğŸ—„ï¸ æ•°æ®åº“æ¶æ„å¯¹æ¯”

### Inngest æ•°æ®åº“ vs ä¸šåŠ¡æ•°æ®åº“

| ç‰¹æ€§ | Inngest æ•°æ®åº“ | ä¸šåŠ¡æ•°æ®åº“ï¼ˆriveredgeï¼‰ |
|------|---------------|----------------------|
| **æ•°æ®åº“å** | `inngest` | `riveredge` |
| **ç”¨é€”** | å·¥ä½œæµå¼•æ“å…ƒæ•°æ® | ä¸šåŠ¡æ•°æ® |
| **å­˜å‚¨å†…å®¹** | å·¥ä½œæµçŠ¶æ€ã€äº‹ä»¶é˜Ÿåˆ—ã€æ‰§è¡Œå†å² | ç”¨æˆ·ã€è®¢å•ã€å®¡æ‰¹å®ä¾‹ç­‰ä¸šåŠ¡æ•°æ® |
| **æ•°æ®éš”ç¦»** | å…¨å±€å…±äº«ï¼ˆæ‰€æœ‰ç§Ÿæˆ·å…±ç”¨ï¼‰ | å¤šç§Ÿæˆ·éš”ç¦»ï¼ˆtenant_idï¼‰ |
| **ç®¡ç†æ–¹å¼** | Inngest è‡ªåŠ¨ç®¡ç† | åº”ç”¨å±‚ç®¡ç†ï¼ˆTortoise ORMï¼‰ |
| **è¡¨ç»“æ„** | Inngest è‡ªåŠ¨åˆ›å»º | åº”ç”¨å±‚å®šä¹‰ï¼ˆAerich è¿ç§»ï¼‰ |
| **è®¿é—®æ–¹å¼** | Inngest æœåŠ¡ç›´æ¥è®¿é—® | FastAPI åº”ç”¨è®¿é—® |

### æ•°æ®æµå‘

```
ä¸šåŠ¡æ•°æ®åº“ï¼ˆriveredgeï¼‰
â”œâ”€â”€ ä¸šåŠ¡æ•°æ®ï¼ˆç”¨æˆ·ã€è®¢å•ã€å®¡æ‰¹ç­‰ï¼‰
â””â”€â”€ è§¦å‘äº‹ä»¶
    â”‚
    â–¼
Inngest å®¢æˆ·ç«¯ï¼ˆPython SDKï¼‰
    â”‚
    â–¼
Inngest æ•°æ®åº“ï¼ˆinngestï¼‰
â”œâ”€â”€ äº‹ä»¶å­˜å‚¨
â”œâ”€â”€ å·¥ä½œæµçŠ¶æ€
â””â”€â”€ æ‰§è¡Œå†å²
    â”‚
    â–¼
Inngest å‡½æ•°æ‰§è¡Œ
    â”‚
    â–¼
ä¸šåŠ¡æ•°æ®åº“ï¼ˆriveredgeï¼‰
â””â”€â”€ æ›´æ–°ä¸šåŠ¡æ•°æ®
```

---

## ğŸ” Inngest æ•°æ®åº“è¡¨ç»“æ„

### ä¸»è¦è¡¨ï¼ˆInngest è‡ªåŠ¨åˆ›å»ºï¼‰

Inngest å¯åŠ¨æ—¶ä¼šè‡ªåŠ¨åˆ›å»ºä»¥ä¸‹è¡¨ï¼ˆå…·ä½“è¡¨åå¯èƒ½å› ç‰ˆæœ¬è€Œå¼‚ï¼‰ï¼š

#### 1. äº‹ä»¶è¡¨ï¼ˆEventsï¼‰

```sql
-- å­˜å‚¨æ‰€æœ‰æ¥æ”¶åˆ°çš„äº‹ä»¶
CREATE TABLE events (
    id UUID PRIMARY KEY,
    name VARCHAR(255) NOT NULL,           -- äº‹ä»¶åç§°
    data JSONB,                          -- äº‹ä»¶æ•°æ®
    user_id VARCHAR(255),                -- ç”¨æˆ·IDï¼ˆå¯é€‰ï¼‰
    ts TIMESTAMP DEFAULT NOW(),          -- äº‹ä»¶æ—¶é—´æˆ³
    -- ... å…¶ä»–å­—æ®µ
);
```

#### 2. å‡½æ•°è¿è¡Œè¡¨ï¼ˆFunction Runsï¼‰

```sql
-- å­˜å‚¨å‡½æ•°æ‰§è¡Œè®°å½•
CREATE TABLE function_runs (
    id UUID PRIMARY KEY,
    function_id VARCHAR(255) NOT NULL,   -- å‡½æ•°ID
    event_id UUID,                       -- è§¦å‘äº‹ä»¶ID
    status VARCHAR(50),                  -- çŠ¶æ€ï¼ˆpendingã€runningã€completedã€failedï¼‰
    started_at TIMESTAMP,
    ended_at TIMESTAMP,
    output JSONB,                        -- æ‰§è¡Œç»“æœ
    error TEXT,                          -- é”™è¯¯ä¿¡æ¯
    -- ... å…¶ä»–å­—æ®µ
);
```

#### 3. æ­¥éª¤æ‰§è¡Œè¡¨ï¼ˆStep Executionsï¼‰

```sql
-- å­˜å‚¨æ­¥éª¤æ‰§è¡Œè®°å½•ï¼ˆç”¨äºå¤šæ­¥éª¤å·¥ä½œæµï¼‰
CREATE TABLE step_executions (
    id UUID PRIMARY KEY,
    run_id UUID NOT NULL,                -- å‡½æ•°è¿è¡ŒID
    step_id VARCHAR(255) NOT NULL,      -- æ­¥éª¤ID
    name VARCHAR(255),                    -- æ­¥éª¤åç§°
    status VARCHAR(50),                  -- çŠ¶æ€
    input JSONB,                        -- è¾“å…¥æ•°æ®
    output JSONB,                        -- è¾“å‡ºæ•°æ®
    started_at TIMESTAMP,
    ended_at TIMESTAMP,
    -- ... å…¶ä»–å­—æ®µ
);
```

#### 4. è§¦å‘å™¨è¡¨ï¼ˆTriggersï¼‰

```sql
-- å­˜å‚¨å®šæ—¶è§¦å‘å™¨é…ç½®
CREATE TABLE triggers (
    id UUID PRIMARY KEY,
    function_id VARCHAR(255) NOT NULL,   -- å‡½æ•°ID
    trigger_type VARCHAR(50),             -- è§¦å‘å™¨ç±»å‹ï¼ˆcronã€intervalã€dateï¼‰
    trigger_config JSONB,                 -- è§¦å‘å™¨é…ç½®
    last_triggered_at TIMESTAMP,         -- æœ€åè§¦å‘æ—¶é—´
    -- ... å…¶ä»–å­—æ®µ
);
```

---

## ğŸ”„ ä¸ä¸šåŠ¡æ•°æ®åº“çš„å…³ç³»

### æ•°æ®åˆ†ç¦»åŸåˆ™

1. **Inngest æ•°æ®åº“**ï¼šå­˜å‚¨å·¥ä½œæµå¼•æ“çš„**å…ƒæ•°æ®**å’Œ**æ‰§è¡ŒçŠ¶æ€**
   - ä¸å­˜å‚¨ä¸šåŠ¡æ•°æ®
   - ä¸åŒ…å« `tenant_id`ï¼ˆå› ä¸º Inngest æ•°æ®åº“æ˜¯å…¨å±€çš„ï¼‰

2. **ä¸šåŠ¡æ•°æ®åº“**ï¼šå­˜å‚¨**ä¸šåŠ¡æ•°æ®**å’Œ**ä¸šåŠ¡çŠ¶æ€**
   - å­˜å‚¨æ‰€æœ‰ä¸šåŠ¡å®ä½“ï¼ˆç”¨æˆ·ã€è®¢å•ã€å®¡æ‰¹ç­‰ï¼‰
   - åŒ…å« `tenant_id`ï¼ˆå¤šç§Ÿæˆ·éš”ç¦»ï¼‰
   - é€šè¿‡ `inngest_run_id` å…³è” Inngest æ‰§è¡Œè®°å½•

### å…³è”æ–¹å¼

**ä¸šåŠ¡æ•°æ®åº“é€šè¿‡ `inngest_run_id` å…³è” Inngest æ‰§è¡Œè®°å½•**ï¼š

```python
# ä¸šåŠ¡æ•°æ®åº“ä¸­çš„å®¡æ‰¹å®ä¾‹
class ApprovalInstance(BaseModel):
    id: int
    uuid: str
    tenant_id: int
    inngest_run_id: str  # å…³è” Inngest å‡½æ•°è¿è¡ŒID
    status: str
    # ... å…¶ä»–å­—æ®µ

# é€šè¿‡ inngest_run_id æŸ¥è¯¢ Inngest æ‰§è¡ŒçŠ¶æ€
async def get_approval_workflow_status(approval_instance: ApprovalInstance):
    """
    é€šè¿‡ inngest_run_id æŸ¥è¯¢ Inngest å·¥ä½œæµæ‰§è¡ŒçŠ¶æ€
    """
    # è°ƒç”¨ Inngest API æŸ¥è¯¢è¿è¡ŒçŠ¶æ€
    async with httpx.AsyncClient() as client:
        response = await client.get(
            f"http://localhost:8288/api/v1/runs/{approval_instance.inngest_run_id}",
            headers={"Authorization": "Bearer your-token"}
        )
        return response.json()
```

---

## ğŸ¯ å¤šç§Ÿæˆ·éš”ç¦»ç­–ç•¥

### Inngest æ•°æ®åº“å±‚é¢

**Inngest æ•°æ®åº“æ˜¯å…¨å±€çš„ï¼Œä¸åŒ…å«ç§Ÿæˆ·éš”ç¦»**ï¼š
- âŒ Inngest æ•°æ®åº“ä¸å­˜å‚¨ `tenant_id`
- âŒ Inngest æ•°æ®åº“ä¸åŒºåˆ†ç§Ÿæˆ·
- âœ… æ‰€æœ‰ç§Ÿæˆ·å…±ç”¨åŒä¸€ä¸ª Inngest æ•°æ®åº“

**åŸå› **ï¼š
- Inngest æ•°æ®åº“åªå­˜å‚¨å·¥ä½œæµå¼•æ“çš„å…ƒæ•°æ®
- å·¥ä½œæµæ‰§è¡ŒçŠ¶æ€æ˜¯å¼•æ“å±‚é¢çš„ï¼Œä¸æ˜¯ä¸šåŠ¡å±‚é¢çš„
- ç§Ÿæˆ·éš”ç¦»åœ¨ä¸šåŠ¡æ•°æ®åº“å±‚é¢å®ç°

### ä¸šåŠ¡æ•°æ®åº“å±‚é¢

**ä¸šåŠ¡æ•°æ®åº“é€šè¿‡ `tenant_id` å®ç°å¤šç§Ÿæˆ·éš”ç¦»**ï¼š
- âœ… æ‰€æœ‰ä¸šåŠ¡è¡¨éƒ½åŒ…å« `tenant_id`
- âœ… æ‰€æœ‰æŸ¥è¯¢éƒ½ä½¿ç”¨ `tenant_id` è¿‡æ»¤
- âœ… é€šè¿‡ `inngest_run_id` å…³è” Inngest æ‰§è¡Œè®°å½•

**å…³è”æµç¨‹**ï¼š
```
1. ä¸šåŠ¡æ“ä½œè§¦å‘äº‹ä»¶ï¼ˆåŒ…å« tenant_idï¼‰
   â†“
2. Inngest æ¥æ”¶äº‹ä»¶ï¼Œå­˜å‚¨åˆ° Inngest æ•°æ®åº“ï¼ˆä¸åŒ…å« tenant_idï¼‰
   â†“
3. Inngest æ‰§è¡Œå‡½æ•°ï¼Œå‡½æ•°å†…éƒ¨ä½¿ç”¨ tenant_id æŸ¥è¯¢ä¸šåŠ¡æ•°æ®
   â†“
4. ä¸šåŠ¡æ•°æ®åº“æ›´æ–°ï¼Œä¿å­˜ inngest_run_id
   â†“
5. é€šè¿‡ inngest_run_id å…³è” Inngest æ‰§è¡Œè®°å½•
```

---

## ğŸ“Š æ•°æ®æŸ¥è¯¢ç¤ºä¾‹

### æŸ¥è¯¢ Inngest æ‰§è¡ŒçŠ¶æ€

```python
import httpx

async def get_inngest_run_status(run_id: str) -> Dict[str, Any]:
    """
    æŸ¥è¯¢ Inngest å‡½æ•°è¿è¡ŒçŠ¶æ€
    
    Args:
        run_id: Inngest è¿è¡ŒIDï¼ˆä»ä¸šåŠ¡æ•°æ®åº“çš„ inngest_run_id å­—æ®µè·å–ï¼‰
        
    Returns:
        Dict[str, Any]: è¿è¡ŒçŠ¶æ€ä¿¡æ¯
    """
    async with httpx.AsyncClient() as client:
        response = await client.get(
            f"http://localhost:8288/api/v1/runs/{run_id}",
            headers={"Authorization": "Bearer your-token"}  # å¦‚æœéœ€è¦è®¤è¯
        )
        if response.status_code == 200:
            return response.json()
        else:
            return {
                "success": False,
                "error": f"æŸ¥è¯¢å¤±è´¥: {response.status_code}"
            }
```

### æŸ¥è¯¢äº‹ä»¶å†å²

```python
async def get_event_history(event_name: str, limit: int = 100) -> List[Dict[str, Any]]:
    """
    æŸ¥è¯¢äº‹ä»¶å†å²
    
    Args:
        event_name: äº‹ä»¶åç§°ï¼ˆå¦‚ "message/send"ï¼‰
        limit: è¿”å›æ•°é‡é™åˆ¶
        
    Returns:
        List[Dict[str, Any]]: äº‹ä»¶åˆ—è¡¨
    """
    async with httpx.AsyncClient() as client:
        response = await client.get(
            f"http://localhost:8288/api/v1/events",
            params={
                "name": event_name,
                "limit": limit
            },
            headers={"Authorization": "Bearer your-token"}
        )
        if response.status_code == 200:
            return response.json().get("data", [])
        else:
            return []
```

---

## ğŸ”§ æ•°æ®åº“é…ç½®

### é…ç½®æ–‡ä»¶

**æ–‡ä»¶ä½ç½®**ï¼š`bin/inngest.config.json`

```json
{
    "event_api": {
        "port": 8288,
        "host": "0.0.0.0"
    },
    "database": {
        "url": "postgresql://postgres:postgres@localhost:5432/inngest",
        "pool_size": 10
    },
    "log_level": "info"
}
```

### æ•°æ®åº“åˆ›å»º

**æ–‡ä»¶ä½ç½®**ï¼š`riveredge-backend/scripts/create_inngest_database.sql`

```sql
-- åˆ›å»º Inngest ä¸“ç”¨æ•°æ®åº“
CREATE DATABASE inngest
    WITH 
    OWNER = postgres
    ENCODING = 'UTF8'
    TEMPLATE = template0
    TABLESPACE = pg_default
    CONNECTION LIMIT = -1;

COMMENT ON DATABASE inngest IS 'Inngest å·¥ä½œæµå¼•æ“ä¸“ç”¨æ•°æ®åº“ï¼Œç”¨äºå­˜å‚¨å·¥ä½œæµçŠ¶æ€å’Œæ‰§è¡Œå†å²';
```

---

## âš ï¸ æ³¨æ„äº‹é¡¹

### 1. æ•°æ®åº“ç‹¬ç«‹æ€§

- âœ… **Inngest æ•°æ®åº“ä¸ä¸šåŠ¡æ•°æ®åº“å®Œå…¨ç‹¬ç«‹**
- âœ… **ä¸è¦å°†ä¸šåŠ¡æ•°æ®å­˜å‚¨åˆ° Inngest æ•°æ®åº“**
- âœ… **ä¸è¦å°† Inngest å…ƒæ•°æ®å­˜å‚¨åˆ°ä¸šåŠ¡æ•°æ®åº“**

### 2. æ•°æ®å¤‡ä»½

- âœ… **Inngest æ•°æ®åº“éœ€è¦å•ç‹¬å¤‡ä»½**
- âœ… **ä¸šåŠ¡æ•°æ®åº“å¤‡ä»½ä¸åŒ…æ‹¬ Inngest æ•°æ®åº“**
- âœ… **å»ºè®®å®šæœŸå¤‡ä»½ Inngest æ•°æ®åº“ï¼ˆç”¨äºæ¢å¤å·¥ä½œæµæ‰§è¡Œå†å²ï¼‰**

### 3. æ•°æ®æ¸…ç†

- âœ… **Inngest æ•°æ®åº“ä¼šæŒç»­å¢é•¿ï¼ˆå­˜å‚¨æ‰€æœ‰æ‰§è¡Œå†å²ï¼‰**
- âœ… **å»ºè®®å®šæœŸæ¸…ç†æ—§æ•°æ®ï¼ˆæ ¹æ®ä¸šåŠ¡éœ€æ±‚ï¼‰**
- âœ… **å¯ä»¥é…ç½®æ•°æ®ä¿ç•™ç­–ç•¥ï¼ˆå¦‚ä¿ç•™æœ€è¿‘ 30 å¤©çš„æ•°æ®ï¼‰**

### 4. æ€§èƒ½è€ƒè™‘

- âœ… **Inngest æ•°æ®åº“ä¸»è¦ç”¨äºæŸ¥è¯¢ï¼Œå†™å…¥é¢‘ç‡è¾ƒé«˜**
- âœ… **å»ºè®®ä½¿ç”¨ç‹¬ç«‹çš„ PostgreSQL å®ä¾‹ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰**
- âœ… **æ ¹æ®è´Ÿè½½è°ƒæ•´è¿æ¥æ± å¤§å°ï¼ˆpool_sizeï¼‰**

### 5. å¤šç§Ÿæˆ·éš”ç¦»

- âš ï¸ **Inngest æ•°æ®åº“ä¸åŒ…å«ç§Ÿæˆ·éš”ç¦»**
- âš ï¸ **ç§Ÿæˆ·éš”ç¦»åœ¨ä¸šåŠ¡æ•°æ®åº“å±‚é¢å®ç°**
- âš ï¸ **æŸ¥è¯¢ Inngest æ•°æ®æ—¶ï¼Œéœ€è¦é€šè¿‡ä¸šåŠ¡æ•°æ®åº“çš„ `inngest_run_id` å…³è”**

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [Inngest é›†æˆæŒ‡å—](./Inngesté›†æˆæŒ‡å—.md)
- [Inngest è‡ªæ‰˜ç®¡éƒ¨ç½²æŒ‡å—](./Inngestè‡ªæ‰˜ç®¡éƒ¨ç½²æŒ‡å—.md)
- [Inngest å¤šç§Ÿæˆ·éš”ç¦»æ–¹æ¡ˆ](./Inngestå¤šç§Ÿæˆ·éš”ç¦»æ–¹æ¡ˆ.md)

---

## âœ… æ€»ç»“

Inngest æ•°æ®åº“çš„ä½œç”¨ï¼š

1. **å·¥ä½œæµæ‰§è¡ŒçŠ¶æ€ç®¡ç†**ï¼šå­˜å‚¨å‡½æ•°æ‰§è¡ŒçŠ¶æ€ã€æ­¥éª¤æ‰§è¡Œè®°å½•ã€é‡è¯•è®°å½•
2. **äº‹ä»¶å­˜å‚¨å’Œé˜Ÿåˆ—ç®¡ç†**ï¼šå­˜å‚¨æ‰€æœ‰æ¥æ”¶çš„äº‹ä»¶ï¼Œç®¡ç†äº‹ä»¶é˜Ÿåˆ—
3. **å®šæ—¶è§¦å‘å™¨ç®¡ç†**ï¼šç®¡ç† Cronã€Intervalã€Date ç­‰å®šæ—¶è§¦å‘å™¨
4. **å·¥ä½œæµç¼–æ’çŠ¶æ€**ï¼šå­˜å‚¨å¤æ‚å·¥ä½œæµçš„ç¼–æ’çŠ¶æ€å’ŒèŠ‚ç‚¹æµè½¬ä¿¡æ¯
5. **ä»»åŠ¡é‡è¯•å’Œé”™è¯¯å¤„ç†**ï¼šå­˜å‚¨é‡è¯•ä¿¡æ¯å’Œé”™è¯¯æ—¥å¿—

**æ ¸å¿ƒç‰¹ç‚¹**ï¼š
- âœ… Inngest æ•°æ®åº“æ˜¯**å·¥ä½œæµå¼•æ“çš„å…ƒæ•°æ®åº“**
- âœ… ä¸ä¸šåŠ¡æ•°æ®åº“**å®Œå…¨ç‹¬ç«‹**
- âœ… **ä¸åŒ…å«ç§Ÿæˆ·éš”ç¦»**ï¼ˆç§Ÿæˆ·éš”ç¦»åœ¨ä¸šåŠ¡æ•°æ®åº“å±‚é¢å®ç°ï¼‰
- âœ… é€šè¿‡ `inngest_run_id` å…³è”ä¸šåŠ¡æ•°æ®å’Œ Inngest æ‰§è¡Œè®°å½•

---

**æœ€åæ›´æ–°**ï¼š2025-01-11

