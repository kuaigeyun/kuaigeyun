# 绩效数据最佳实践

## 📋 概述

本文档详细说明绩效数据模块（假期、技能）的开发最佳实践，结合 RiverEdge SaaS 框架规范和 DDD 应用层设计规范。

## 🎯 模块说明

绩效数据模块用于管理绩效相关的基础数据，包含：
- **假期（Holiday）**：假期信息管理
- **技能（Skill）**：技能信息管理

## 🏗️ 技术架构

### 后端架构（传统分层）

```
riveredge-backend/src/apps/master_data/
├── api/
│   └── performance.py                # 绩效数据 API
├── services/
│   └── performance_service.py       # 绩效数据服务
├── models/
│   └── performance.py               # 绩效数据模型
└── schemas/
    └── performance_schemas.py       # 绩效数据 Schema
```

## 📐 数据库设计规范

### 假期表（seed_master_data_holidays）

```sql
CREATE TABLE seed_master_data_holidays (
    id SERIAL PRIMARY KEY,
    uuid VARCHAR(36) NOT NULL UNIQUE,
    tenant_id INTEGER NOT NULL,
    name VARCHAR(200) NOT NULL,
    holiday_date DATE NOT NULL,
    holiday_type VARCHAR(50),
    description TEXT,
    is_active BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    deleted_at TIMESTAMP NULL,
    INDEX idx_tenant_id (tenant_id),
    INDEX idx_uuid (uuid),
    INDEX idx_holiday_date (holiday_date),
    INDEX idx_holiday_type (holiday_type)
);
```

### 技能表（seed_master_data_skills）

```sql
CREATE TABLE seed_master_data_skills (
    id SERIAL PRIMARY KEY,
    uuid VARCHAR(36) NOT NULL UNIQUE,
    tenant_id INTEGER NOT NULL,
    code VARCHAR(50) NOT NULL,
    name VARCHAR(200) NOT NULL,
    category VARCHAR(50),
    description TEXT,
    is_active BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    deleted_at TIMESTAMP NULL,
    UNIQUE(tenant_id, code),
    INDEX idx_tenant_id (tenant_id),
    INDEX idx_code (code),
    INDEX idx_uuid (uuid),
    INDEX idx_category (category)
);
```

## ✅ 检查清单

### 开发前准备

- [ ] 确认数据库表结构设计
- [ ] 确认假期类型设计
- [ ] 确认技能分类设计

### 开发中

- [ ] 遵循命名规范
- [ ] 所有查询必须包含 `tenant_id` 过滤
- [ ] 假期表使用 DATE 类型存储日期
- [ ] 编写完整的注释（中文）
- [ ] 编写单元测试（覆盖率 > 80%）

### 开发后

- [ ] 完整功能测试
- [ ] 性能测试
- [ ] 文档完善
- [ ] 代码审查

## 📚 相关文档

- [主数据管理APP开发计划](./主数据管理APP开发计划.md)
- [工厂数据最佳实践](./1.工厂数据最佳实践.md)

---

**最后更新**：2025-01-11

