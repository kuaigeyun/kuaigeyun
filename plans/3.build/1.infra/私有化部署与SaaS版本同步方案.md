# ç§æœ‰åŒ–éƒ¨ç½²ä¸ SaaS ç‰ˆæœ¬åŒæ­¥æ–¹æ¡ˆ

## ğŸ“‹ æ¦‚è¿°

RiverEdge SaaS å¤šç»„ç»‡æ¡†æ¶éœ€è¦åŒæ—¶æ”¯æŒï¼š
1. **SaaS åŒ–è¿è¥**ï¼šå¤šç§Ÿæˆ·å…±äº«åŒä¸€å¥—ä»£ç å’Œæ•°æ®åº“
2. **ç§æœ‰åŒ–éƒ¨ç½²**ï¼šå®¢æˆ·ç‹¬ç«‹éƒ¨ç½²ï¼Œå¯èƒ½éœ€è¦å®šåˆ¶åŒ–

**æ ¸å¿ƒæŒ‘æˆ˜**ï¼š
- å¦‚ä½•ä¿æŒç§æœ‰åŒ–éƒ¨ç½²ç‰ˆæœ¬ä¸ SaaS ä¸»ç‰ˆæœ¬åŠŸèƒ½åŒæ­¥ï¼Ÿ
- å¦‚ä½•å¤„ç†ç§æœ‰åŒ–éƒ¨ç½²çš„å®šåˆ¶åŒ–éœ€æ±‚ï¼Ÿ
- å¦‚ä½•ç®¡ç†ä»£ç åˆ†æ”¯å’Œç‰ˆæœ¬å‘å¸ƒï¼Ÿ
- å¦‚ä½•åŒæ­¥æ•°æ®åº“è¿ç§»ï¼Ÿ

---

## ğŸ¯ è®¾è®¡åŸåˆ™

### 1. å•ä¸€ä»£ç åº“ï¼ˆSingle Source of Truthï¼‰
- âœ… **ä¸»ä»£ç åº“**ï¼šæ‰€æœ‰åŠŸèƒ½åœ¨ä¸»åˆ†æ”¯ï¼ˆ`main`/`develop`ï¼‰å¼€å‘
- âœ… **ç»Ÿä¸€æ¶æ„**ï¼šSaaS å’Œç§æœ‰åŒ–éƒ¨ç½²ä½¿ç”¨ç›¸åŒçš„ä»£ç æ¶æ„
- âœ… **é…ç½®é©±åŠ¨**ï¼šé€šè¿‡é…ç½®åŒºåˆ† SaaS å’Œç§æœ‰åŒ–éƒ¨ç½²æ¨¡å¼

### 2. é…ç½®éš”ç¦»ï¼Œä»£ç ç»Ÿä¸€
- âœ… **é…ç½®åˆ†ç¦»**ï¼šSaaS å’Œç§æœ‰åŒ–éƒ¨ç½²é€šè¿‡ç¯å¢ƒå˜é‡/é…ç½®æ–‡ä»¶åŒºåˆ†
- âœ… **ä»£ç ç»Ÿä¸€**ï¼šæ ¸å¿ƒä¸šåŠ¡é€»è¾‘ä»£ç å®Œå…¨ä¸€è‡´
- âœ… **å®šåˆ¶åŒ–éš”ç¦»**ï¼šå®šåˆ¶åŒ–åŠŸèƒ½é€šè¿‡æ’ä»¶æœºåˆ¶æˆ–ç‹¬ç«‹æ¨¡å—å®ç°

### 3. ç‰ˆæœ¬åŒæ­¥ç­–ç•¥
- âœ… **è¯­ä¹‰åŒ–ç‰ˆæœ¬**ï¼šä½¿ç”¨è¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶ï¼ˆSemantic Versioningï¼‰
- âœ… **å®šæœŸåŒæ­¥**ï¼šç§æœ‰åŒ–éƒ¨ç½²å®šæœŸä»ä¸»ç‰ˆæœ¬æ‹‰å–æ›´æ–°
- âœ… **è¿ç§»å…¼å®¹**ï¼šæ•°æ®åº“è¿ç§»å‘åå…¼å®¹ï¼Œæ”¯æŒå¢é‡æ›´æ–°

### 4. å®šåˆ¶åŒ–æ”¯æŒ
- âœ… **æ’ä»¶æœºåˆ¶**ï¼šå®šåˆ¶åŒ–åŠŸèƒ½é€šè¿‡æ’ä»¶å®ç°ï¼Œä¸ä¿®æ”¹æ ¸å¿ƒä»£ç 
- âœ… **é…ç½®è¦†ç›–**ï¼šæ”¯æŒé€šè¿‡é…ç½®æ–‡ä»¶è¦†ç›–é»˜è®¤è¡Œä¸º
- âœ… **æ‰©å±•ç‚¹**ï¼šæä¾›æ‰©å±•ç‚¹æ”¯æŒå®šåˆ¶åŒ–éœ€æ±‚

---

## ğŸ—ï¸ Git åˆ†æ”¯ç­–ç•¥

### åˆ†æ”¯ç»“æ„

```
main (ç”Ÿäº§åˆ†æ”¯)
â”œâ”€â”€ develop (å¼€å‘åˆ†æ”¯)
â”‚   â”œâ”€â”€ feature/* (åŠŸèƒ½åˆ†æ”¯)
â”‚   â””â”€â”€ fix/* (ä¿®å¤åˆ†æ”¯)
â”œâ”€â”€ release/* (å‘å¸ƒåˆ†æ”¯)
â”‚   â”œâ”€â”€ release/v1.0.0 (SaaS å‘å¸ƒ)
â”‚   â””â”€â”€ release/v1.0.0-private (ç§æœ‰åŒ–å‘å¸ƒ)
â””â”€â”€ private/* (ç§æœ‰åŒ–å®šåˆ¶åˆ†æ”¯)
    â”œâ”€â”€ private/client-a (å®¢æˆ· A å®šåˆ¶)
    â””â”€â”€ private/client-b (å®¢æˆ· B å®šåˆ¶)
```

### åˆ†æ”¯è¯´æ˜

#### 1. `main` åˆ†æ”¯ï¼ˆç”Ÿäº§åˆ†æ”¯ï¼‰
- **ç”¨é€”**ï¼šSaaS ç”Ÿäº§ç¯å¢ƒä»£ç 
- **ä¿æŠ¤**ï¼šåªèƒ½é€šè¿‡ `release/*` åˆ†æ”¯åˆå¹¶
- **ç‰ˆæœ¬æ ‡ç­¾**ï¼šæ¯ä¸ªå‘å¸ƒæ‰“ä¸Šç‰ˆæœ¬æ ‡ç­¾ï¼ˆå¦‚ `v1.0.0`ï¼‰

#### 2. `develop` åˆ†æ”¯ï¼ˆå¼€å‘åˆ†æ”¯ï¼‰
- **ç”¨é€”**ï¼šæ—¥å¸¸å¼€å‘åˆ†æ”¯
- **æ¥æº**ï¼šä» `main` åˆ†æ”¯åˆ›å»º
- **åˆå¹¶**ï¼šåŠŸèƒ½åˆ†æ”¯åˆå¹¶åˆ° `develop`ï¼Œæµ‹è¯•é€šè¿‡ååˆå¹¶åˆ° `main`

#### 3. `release/*` åˆ†æ”¯ï¼ˆå‘å¸ƒåˆ†æ”¯ï¼‰
- **ç”¨é€”**ï¼šå‡†å¤‡å‘å¸ƒçš„ç‰ˆæœ¬
- **å‘½å**ï¼š`release/v1.0.0`ï¼ˆSaaSï¼‰æˆ– `release/v1.0.0-private`ï¼ˆç§æœ‰åŒ–ï¼‰
- **ç”Ÿå‘½å‘¨æœŸ**ï¼šå‘å¸ƒå®Œæˆååˆ é™¤

#### 4. `private/*` åˆ†æ”¯ï¼ˆç§æœ‰åŒ–å®šåˆ¶åˆ†æ”¯ï¼‰
- **ç”¨é€”**ï¼šå®¢æˆ·å®šåˆ¶åŒ–ä»£ç 
- **å‘½å**ï¼š`private/client-a`ï¼ˆå®¢æˆ· A çš„å®šåˆ¶ï¼‰
- **ç­–ç•¥**ï¼šå®šæœŸä» `main` åˆ†æ”¯åˆå¹¶æ›´æ–°
- **éš”ç¦»**ï¼šå®šåˆ¶åŒ–ä»£ç ä¸åˆå¹¶å›ä¸»åˆ†æ”¯

---

## ğŸ”„ ç‰ˆæœ¬åŒæ­¥æµç¨‹

### SaaS ç‰ˆæœ¬å‘å¸ƒæµç¨‹

```
1. å¼€å‘é˜¶æ®µ
   develop â†’ feature/* â†’ develop

2. æµ‹è¯•é˜¶æ®µ
   develop â†’ release/v1.0.0 â†’ æµ‹è¯• â†’ ä¿®å¤

3. å‘å¸ƒé˜¶æ®µ
   release/v1.0.0 â†’ main â†’ æ‰“æ ‡ç­¾ v1.0.0

4. éƒ¨ç½²é˜¶æ®µ
   main â†’ SaaS ç”Ÿäº§ç¯å¢ƒ
```

### ç§æœ‰åŒ–éƒ¨ç½²åŒæ­¥æµç¨‹

```
1. åˆå§‹éƒ¨ç½²
   main (v1.0.0) â†’ private/client-a (åˆå§‹ç‰ˆæœ¬)

2. å®šåˆ¶åŒ–å¼€å‘
   private/client-a â†’ feature/custom-* â†’ private/client-a

3. ä¸»ç‰ˆæœ¬æ›´æ–°
   main (v1.1.0) â†’ private/client-a (åˆå¹¶æ›´æ–°)

4. å†²çªè§£å†³
   - è‡ªåŠ¨åˆå¹¶ï¼šæ— å†²çªçš„æ›´æ–°è‡ªåŠ¨åˆå¹¶
   - æ‰‹åŠ¨è§£å†³ï¼šå®šåˆ¶åŒ–ä»£ç ä¸ä¸»ç‰ˆæœ¬å†²çªæ—¶æ‰‹åŠ¨è§£å†³

5. æµ‹è¯•éƒ¨ç½²
   private/client-a â†’ ç§æœ‰åŒ–æµ‹è¯•ç¯å¢ƒ â†’ ç”Ÿäº§ç¯å¢ƒ
```

### åŒæ­¥ç­–ç•¥

#### ç­–ç•¥ 1ï¼šå®šæœŸåŒæ­¥ï¼ˆæ¨èï¼‰
- **é¢‘ç‡**ï¼šæ¯æœˆæˆ–æ¯å­£åº¦åŒæ­¥ä¸€æ¬¡
- **æ–¹å¼**ï¼šä» `main` åˆ†æ”¯åˆå¹¶åˆ° `private/*` åˆ†æ”¯
- **ä¼˜åŠ¿**ï¼šä¿æŒåŠŸèƒ½åŒæ­¥ï¼Œå‡å°‘å†²çª
- **é€‚ç”¨**ï¼šå¤§å¤šæ•°ç§æœ‰åŒ–éƒ¨ç½²

#### ç­–ç•¥ 2ï¼šæŒ‰éœ€åŒæ­¥
- **è§¦å‘**ï¼šå®¢æˆ·ä¸»åŠ¨è¯·æ±‚æ›´æ–°
- **æ–¹å¼**ï¼šä»æŒ‡å®šç‰ˆæœ¬æ ‡ç­¾åˆå¹¶
- **ä¼˜åŠ¿**ï¼šå®¢æˆ·å¯æ§ï¼Œå‡å°‘ä¸å¿…è¦çš„æ›´æ–°
- **é€‚ç”¨**ï¼šå¯¹ç¨³å®šæ€§è¦æ±‚é«˜çš„å®¢æˆ·

#### ç­–ç•¥ 3ï¼šLTS ç‰ˆæœ¬åŒæ­¥
- **å®šä¹‰**ï¼šé•¿æœŸæ”¯æŒç‰ˆæœ¬ï¼ˆLong Term Supportï¼‰
- **æ–¹å¼**ï¼šåªåŒæ­¥ LTS ç‰ˆæœ¬ï¼ˆå¦‚ v1.0.0, v2.0.0ï¼‰
- **ä¼˜åŠ¿**ï¼šç¨³å®šæ€§é«˜ï¼Œæ›´æ–°é¢‘ç‡ä½
- **é€‚ç”¨**ï¼šå¯¹ç¨³å®šæ€§è¦æ±‚æé«˜çš„å®¢æˆ·

---

## ğŸ”§ é…ç½®ç®¡ç†ç­–ç•¥

### é…ç½®å±‚çº§

```
1. å¹³å°çº§é…ç½®ï¼ˆplatform_config.pyï¼‰
   - æ•°æ®åº“è¿æ¥
   - Redis è¿æ¥
   - JWT é…ç½®
   - æœåŠ¡å™¨é…ç½®

2. ç³»ç»Ÿçº§é…ç½®ï¼ˆsystem_parametersï¼‰
   - ç«™ç‚¹è®¾ç½®
   - å‚æ•°è®¾ç½®
   - åŠŸèƒ½å¼€å…³

3. ç§Ÿæˆ·çº§é…ç½®ï¼ˆtenant_configï¼‰
   - ç»„ç»‡è®¾ç½®
   - ç»„ç»‡å‚æ•°
   - ç»„ç»‡åŠŸèƒ½å¼€å…³
```

### SaaS vs ç§æœ‰åŒ–éƒ¨ç½²é…ç½®å·®å¼‚

#### 1. éƒ¨ç½²æ¨¡å¼æ ‡è¯†

```python
# platform_config.py
class PlatformSettings(BaseSettings):
    # éƒ¨ç½²æ¨¡å¼ï¼š'saas' æˆ– 'private'
    DEPLOYMENT_MODE: str = Field(default="saas", description="éƒ¨ç½²æ¨¡å¼")
    
    # SaaS æ¨¡å¼ç‰¹æœ‰é…ç½®
    SAAS_MULTI_TENANT: bool = Field(default=True, description="æ˜¯å¦å¤šç§Ÿæˆ·æ¨¡å¼")
    SAAS_TENANT_REGISTRATION: bool = Field(default=True, description="æ˜¯å¦å…è®¸ç§Ÿæˆ·æ³¨å†Œ")
    
    # ç§æœ‰åŒ–éƒ¨ç½²ç‰¹æœ‰é…ç½®
    PRIVATE_SINGLE_TENANT: bool = Field(default=False, description="æ˜¯å¦å•ç§Ÿæˆ·æ¨¡å¼")
    PRIVATE_TENANT_ID: int = Field(default=1, description="ç§æœ‰åŒ–éƒ¨ç½²çš„ç§Ÿæˆ·ID")
```

#### 2. åŠŸèƒ½å¼€å…³ï¼ˆFeature Flagsï¼‰

```python
# core/services/feature_flag_service.py
class FeatureFlagService:
    """åŠŸèƒ½å¼€å…³æœåŠ¡"""
    
    @staticmethod
    async def is_feature_enabled(
        feature_name: str,
        tenant_id: Optional[int] = None
    ) -> bool:
        """
        æ£€æŸ¥åŠŸèƒ½æ˜¯å¦å¯ç”¨
        
        Args:
            feature_name: åŠŸèƒ½åç§°
            tenant_id: ç§Ÿæˆ·IDï¼ˆå¯é€‰ï¼‰
        
        Returns:
            bool: åŠŸèƒ½æ˜¯å¦å¯ç”¨
        """
        # 1. æ£€æŸ¥å¹³å°çº§é…ç½®
        platform_config = await SystemParameterService.get_parameter(
            f"feature.{feature_name}.enabled"
        )
        if platform_config is not None:
            return platform_config.value == "true"
        
        # 2. æ£€æŸ¥ç§Ÿæˆ·çº§é…ç½®ï¼ˆSaaS æ¨¡å¼ï¼‰
        if tenant_id:
            tenant_config = await TenantConfigService.get_config(
                tenant_id, f"feature.{feature_name}.enabled"
            )
            if tenant_config is not None:
                return tenant_config.value == "true"
        
        # 3. é»˜è®¤å€¼ï¼ˆæ ¹æ®éƒ¨ç½²æ¨¡å¼ï¼‰
        from infra.config.platform_config import platform_settings
        if platform_settings.DEPLOYMENT_MODE == "private":
            # ç§æœ‰åŒ–éƒ¨ç½²é»˜è®¤å¯ç”¨æ‰€æœ‰åŠŸèƒ½
            return True
        else:
            # SaaS æ¨¡å¼æ ¹æ®åŠŸèƒ½å®šä¹‰è¿”å›é»˜è®¤å€¼
            return self._get_default_feature_value(feature_name)
```

#### 3. ç¯å¢ƒå˜é‡é…ç½®

```bash
# .env.saas (SaaS éƒ¨ç½²)
DEPLOYMENT_MODE=saas
SAAS_MULTI_TENANT=true
SAAS_TENANT_REGISTRATION=true

# .env.private (ç§æœ‰åŒ–éƒ¨ç½²)
DEPLOYMENT_MODE=private
PRIVATE_SINGLE_TENANT=true
PRIVATE_TENANT_ID=1
SAAS_TENANT_REGISTRATION=false
```

---

## ğŸ“¦ æ•°æ®åº“è¿ç§»åŒæ­¥

### è¿ç§»æ–‡ä»¶ç®¡ç†

#### 1. ç»Ÿä¸€è¿ç§»æ–‡ä»¶
- âœ… **æ‰€æœ‰è¿ç§»æ–‡ä»¶**ï¼šå­˜å‚¨åœ¨ `migrations/models/` ç›®å½•
- âœ… **ç‰ˆæœ¬æ§åˆ¶**ï¼šè¿ç§»æ–‡ä»¶é€šè¿‡ Git ç‰ˆæœ¬æ§åˆ¶
- âœ… **å‘½åè§„èŒƒ**ï¼š`{åºå·}_{æ—¶é—´æˆ³}_{æè¿°}.py`

#### 2. è¿ç§»åŒæ­¥ç­–ç•¥

```python
# è¿ç§»æ–‡ä»¶ç¤ºä¾‹
# migrations/models/33_20251212000000_add_custom_field.py

async def upgrade():
    """
    å‡çº§è¿ç§»
    
    æ‰§è¡Œé¡ºåºï¼š
    1. æ£€æŸ¥è¿ç§»æ˜¯å¦å·²æ‰§è¡Œï¼ˆé€šè¿‡ aerich_version è¡¨ï¼‰
    2. æ‰§è¡Œ SQL è¯­å¥
    3. è®°å½•è¿ç§»ç‰ˆæœ¬
    """
    # æ£€æŸ¥æ˜¯å¦å·²æ‰§è¡Œ
    # æ‰§è¡Œè¿ç§» SQL
    # è®°å½•ç‰ˆæœ¬
    pass

async def downgrade():
    """
    é™çº§è¿ç§»ï¼ˆå¯é€‰ï¼‰
    
    ç”¨äºå›æ»šè¿ç§»
    """
    pass
```

#### 3. è¿ç§»æ‰§è¡Œæµç¨‹

**SaaS ç¯å¢ƒ**ï¼š
```bash
# è‡ªåŠ¨æ‰§è¡Œï¼ˆé€šè¿‡ CI/CDï¼‰
aerich upgrade
```

**ç§æœ‰åŒ–éƒ¨ç½²**ï¼š
```bash
# æ‰‹åŠ¨æ‰§è¡Œï¼ˆå®¢æˆ·æ‰§è¡Œï¼‰
aerich upgrade

# æˆ–é€šè¿‡æ›´æ–°è„šæœ¬
python scripts/apply_migrations.py --version v1.1.0
```

#### 4. è¿ç§»å…¼å®¹æ€§

- âœ… **å‘åå…¼å®¹**ï¼šæ–°è¿ç§»ä¸èƒ½ç ´åç°æœ‰æ•°æ®
- âœ… **å¢é‡æ›´æ–°**ï¼šæ”¯æŒä»ä»»æ„ç‰ˆæœ¬å‡çº§åˆ°æœ€æ–°ç‰ˆæœ¬
- âœ… **å›æ»šæ”¯æŒ**ï¼šæä¾›é™çº§è¿ç§»ï¼ˆå¯é€‰ï¼‰

---

## ğŸ¨ å®šåˆ¶åŒ–æ”¯æŒ

### 1. æ’ä»¶æœºåˆ¶ï¼ˆæ¨èï¼‰

```python
# å®šåˆ¶åŒ–åŠŸèƒ½é€šè¿‡æ’ä»¶å®ç°
# apps/custom/client-a-plugin/
â”œâ”€â”€ __init__.py
â”œâ”€â”€ manifest.json
â”œâ”€â”€ api/
â”‚   â””â”€â”€ custom_api.py
â”œâ”€â”€ models/
â”‚   â””â”€â”€ custom_model.py
â””â”€â”€ services/
    â””â”€â”€ custom_service.py
```

**ä¼˜åŠ¿**ï¼š
- âœ… ä¸ä¿®æ”¹æ ¸å¿ƒä»£ç 
- âœ… æ˜“äºç»´æŠ¤å’Œæ›´æ–°
- âœ… æ”¯æŒçƒ­æ’æ‹”

### 2. é…ç½®è¦†ç›–

```python
# é€šè¿‡é…ç½®æ–‡ä»¶è¦†ç›–é»˜è®¤è¡Œä¸º
# config/custom/client-a-config.py

CUSTOM_CONFIG = {
    "theme": {
        "primary_color": "#1890ff",
        "logo_url": "/custom/logo.png"
    },
    "features": {
        "custom_report": True,
        "custom_dashboard": True
    }
}
```

### 3. æ‰©å±•ç‚¹ï¼ˆExtension Pointsï¼‰

```python
# core/utils/extension_points.py

class ExtensionPoint:
    """æ‰©å±•ç‚¹åŸºç±»"""
    
    @staticmethod
    async def before_user_create(user_data: dict) -> dict:
        """
        ç”¨æˆ·åˆ›å»ºå‰çš„æ‰©å±•ç‚¹
        
        Returns:
            dict: ä¿®æ”¹åçš„ç”¨æˆ·æ•°æ®
        """
        return user_data
    
    @staticmethod
    async def after_user_create(user: User) -> None:
        """
        ç”¨æˆ·åˆ›å»ºåçš„æ‰©å±•ç‚¹
        """
        pass
```

**ä½¿ç”¨æ–¹å¼**ï¼š
```python
# apps/custom/client-a-plugin/hooks.py
from core.utils.extension_points import ExtensionPoint

class ClientAHooks(ExtensionPoint):
    @staticmethod
    async def before_user_create(user_data: dict) -> dict:
        # å®šåˆ¶åŒ–é€»è¾‘
        user_data["custom_field"] = "custom_value"
        return user_data
```

---

## ğŸ“Š ç‰ˆæœ¬ç®¡ç†

### è¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶

```
ä¸»ç‰ˆæœ¬å·.æ¬¡ç‰ˆæœ¬å·.ä¿®è®¢å·[-é¢„å‘å¸ƒæ ‡è¯†][+æ„å»ºå…ƒæ•°æ®]

ç¤ºä¾‹ï¼š
- v1.0.0ï¼šæ­£å¼å‘å¸ƒ
- v1.1.0ï¼šæ–°åŠŸèƒ½
- v1.1.1ï¼šBug ä¿®å¤
- v1.2.0-beta.1ï¼šBeta ç‰ˆæœ¬
- v1.2.0-rc.1ï¼šå€™é€‰ç‰ˆæœ¬
```

### ç‰ˆæœ¬å‘å¸ƒæµç¨‹

#### 1. ç‰ˆæœ¬è§„åˆ’
- **ä¸»ç‰ˆæœ¬**ï¼ˆv1.0.0 â†’ v2.0.0ï¼‰ï¼šä¸å…¼å®¹çš„ API å˜æ›´
- **æ¬¡ç‰ˆæœ¬**ï¼ˆv1.0.0 â†’ v1.1.0ï¼‰ï¼šæ–°åŠŸèƒ½ï¼Œå‘åå…¼å®¹
- **ä¿®è®¢ç‰ˆæœ¬**ï¼ˆv1.0.0 â†’ v1.0.1ï¼‰ï¼šBug ä¿®å¤ï¼Œå‘åå…¼å®¹

#### 2. å‘å¸ƒæ£€æŸ¥æ¸…å•

```
â–¡ ä»£ç å®¡æŸ¥å®Œæˆ
â–¡ å•å…ƒæµ‹è¯•é€šè¿‡
â–¡ é›†æˆæµ‹è¯•é€šè¿‡
â–¡ æ•°æ®åº“è¿ç§»æµ‹è¯•é€šè¿‡
â–¡ æ–‡æ¡£æ›´æ–°å®Œæˆ
â–¡ ç‰ˆæœ¬å·æ›´æ–°
â–¡ CHANGELOG æ›´æ–°
â–¡ å‘å¸ƒåˆ†æ”¯åˆ›å»º
â–¡ ç‰ˆæœ¬æ ‡ç­¾åˆ›å»º
```

#### 3. å‘å¸ƒè„šæœ¬

```bash
# scripts/release.sh
#!/bin/bash

VERSION=$1
BRANCH="release/v${VERSION}"

# 1. åˆ›å»ºå‘å¸ƒåˆ†æ”¯
git checkout -b ${BRANCH}

# 2. æ›´æ–°ç‰ˆæœ¬å·
# æ›´æ–° pyproject.tomlã€package.json ç­‰

# 3. æ›´æ–° CHANGELOG
# è‡ªåŠ¨ç”Ÿæˆæˆ–æ‰‹åŠ¨æ›´æ–°

# 4. æäº¤æ›´æ”¹
git add .
git commit -m "chore: release v${VERSION}"

# 5. åˆå¹¶åˆ° main
git checkout main
git merge ${BRANCH}

# 6. æ‰“æ ‡ç­¾
git tag -a v${VERSION} -m "Release v${VERSION}"

# 7. æ¨é€åˆ°è¿œç¨‹
git push origin main
git push origin v${VERSION}

# 8. åˆ é™¤å‘å¸ƒåˆ†æ”¯
git branch -d ${BRANCH}
```

---

## ğŸ”„ åŒæ­¥å·¥å…·å’Œè„šæœ¬

### 1. ç‰ˆæœ¬åŒæ­¥è„šæœ¬

```python
# scripts/sync_private_deployment.py
"""
ç§æœ‰åŒ–éƒ¨ç½²ç‰ˆæœ¬åŒæ­¥è„šæœ¬

åŠŸèƒ½ï¼š
1. ä»ä¸»ç‰ˆæœ¬æ‹‰å–æ›´æ–°
2. è‡ªåŠ¨åˆå¹¶åˆ°ç§æœ‰åŒ–åˆ†æ”¯
3. æ£€æµ‹å†²çª
4. ç”ŸæˆåŒæ­¥æŠ¥å‘Š
"""

import subprocess
import sys
from pathlib import Path

def sync_private_deployment(
    private_branch: str,
    main_version: str = "main"
):
    """
    åŒæ­¥ç§æœ‰åŒ–éƒ¨ç½²ç‰ˆæœ¬
    
    Args:
        private_branch: ç§æœ‰åŒ–åˆ†æ”¯åç§°ï¼ˆå¦‚ 'private/client-a'ï¼‰
        main_version: ä¸»ç‰ˆæœ¬åˆ†æ”¯æˆ–æ ‡ç­¾ï¼ˆå¦‚ 'main' æˆ– 'v1.1.0'ï¼‰
    """
    # 1. åˆ‡æ¢åˆ°ç§æœ‰åŒ–åˆ†æ”¯
    subprocess.run(["git", "checkout", private_branch])
    
    # 2. æ‹‰å–æœ€æ–°ä»£ç 
    subprocess.run(["git", "fetch", "origin"])
    
    # 3. åˆå¹¶ä¸»ç‰ˆæœ¬
    result = subprocess.run(
        ["git", "merge", f"origin/{main_version}"],
        capture_output=True,
        text=True
    )
    
    # 4. æ£€æŸ¥å†²çª
    if "CONFLICT" in result.stdout:
        print(f"âŒ æ£€æµ‹åˆ°å†²çªï¼Œéœ€è¦æ‰‹åŠ¨è§£å†³")
        print(f"å†²çªæ–‡ä»¶ï¼š")
        # è§£æå†²çªæ–‡ä»¶
        return False
    else:
        print(f"âœ… åŒæ­¥æˆåŠŸ")
        return True

if __name__ == "__main__":
    if len(sys.argv) < 2:
        print("Usage: python sync_private_deployment.py <private_branch> [main_version]")
        sys.exit(1)
    
    private_branch = sys.argv[1]
    main_version = sys.argv[2] if len(sys.argv) > 2 else "main"
    
    sync_private_deployment(private_branch, main_version)
```

### 2. è¿ç§»æ£€æŸ¥è„šæœ¬

```python
# scripts/check_migration_status.py
"""
æ£€æŸ¥æ•°æ®åº“è¿ç§»çŠ¶æ€

åŠŸèƒ½ï¼š
1. æ£€æŸ¥å½“å‰æ•°æ®åº“ç‰ˆæœ¬
2. æ£€æŸ¥å¯ç”¨è¿ç§»æ–‡ä»¶
3. ç”Ÿæˆè¿ç§»æŠ¥å‘Š
"""

import asyncio
from tortoise import Tortoise
from aerich import Command

async def check_migration_status():
    """æ£€æŸ¥è¿ç§»çŠ¶æ€"""
    # åˆå§‹åŒ–æ•°æ®åº“è¿æ¥
    await Tortoise.init(
        db_url="postgres://...",
        modules={"models": ["infra.models", "core.models"]}
    )
    
    # è·å– Aerich å‘½ä»¤
    command = Command(
        tortoise_config={
            "connections": {...},
            "apps": {...}
        }
    )
    
    # æ£€æŸ¥è¿ç§»çŠ¶æ€
    status = await command.status()
    print(f"å½“å‰æ•°æ®åº“ç‰ˆæœ¬ï¼š{status.current_version}")
    print(f"å¯ç”¨è¿ç§»ï¼š{status.available_migrations}")
    
    # ç”Ÿæˆè¿ç§»æŠ¥å‘Š
    if status.available_migrations:
        print(f"\néœ€è¦æ‰§è¡Œçš„è¿ç§»ï¼š")
        for migration in status.available_migrations:
            print(f"  - {migration}")

if __name__ == "__main__":
    asyncio.run(check_migration_status())
```

### 3. é…ç½®å¯¹æ¯”è„šæœ¬

```python
# scripts/compare_configs.py
"""
å¯¹æ¯” SaaS å’Œç§æœ‰åŒ–éƒ¨ç½²é…ç½®å·®å¼‚

åŠŸèƒ½ï¼š
1. å¯¹æ¯”é…ç½®æ–‡ä»¶å·®å¼‚
2. ç”Ÿæˆé…ç½®è¿ç§»æŒ‡å—
3. æ£€æŸ¥é…ç½®å…¼å®¹æ€§
"""

def compare_configs(saas_config_path: str, private_config_path: str):
    """å¯¹æ¯”é…ç½®å·®å¼‚"""
    # è¯»å–é…ç½®æ–‡ä»¶
    saas_config = load_config(saas_config_path)
    private_config = load_config(private_config_path)
    
    # å¯¹æ¯”å·®å¼‚
    differences = find_differences(saas_config, private_config)
    
    # ç”ŸæˆæŠ¥å‘Š
    print("é…ç½®å·®å¼‚ï¼š")
    for key, (saas_value, private_value) in differences.items():
        print(f"  {key}:")
        print(f"    SaaS: {saas_value}")
        print(f"    ç§æœ‰åŒ–: {private_value}")
    
    return differences
```

---

## ğŸ“‹ å®æ–½å»ºè®®

### é˜¶æ®µä¸€ï¼šåŸºç¡€è®¾ç½®ï¼ˆ1-2 å‘¨ï¼‰

1. **Git åˆ†æ”¯ç­–ç•¥**
   - [ ] åˆ›å»º `main` å’Œ `develop` åˆ†æ”¯
   - [ ] è®¾ç½®åˆ†æ”¯ä¿æŠ¤è§„åˆ™
   - [ ] é…ç½® CI/CD æµç¨‹

2. **é…ç½®ç®¡ç†**
   - [ ] æ·»åŠ  `DEPLOYMENT_MODE` é…ç½®
   - [ ] å®ç°åŠŸèƒ½å¼€å…³æœåŠ¡
   - [ ] åˆ›å»ºé…ç½®æ¨¡æ¿ï¼ˆ`.env.saas`, `.env.private`ï¼‰

3. **ç‰ˆæœ¬ç®¡ç†**
   - [ ] è®¾ç½®è¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶
   - [ ] åˆ›å»ºç‰ˆæœ¬å‘å¸ƒè„šæœ¬
   - [ ] é…ç½®ç‰ˆæœ¬æ ‡ç­¾è‡ªåŠ¨åŒ–

### é˜¶æ®µäºŒï¼šåŒæ­¥æœºåˆ¶ï¼ˆ2-3 å‘¨ï¼‰

1. **åŒæ­¥å·¥å…·**
   - [ ] å¼€å‘ç‰ˆæœ¬åŒæ­¥è„šæœ¬
   - [ ] å¼€å‘è¿ç§»æ£€æŸ¥è„šæœ¬
   - [ ] å¼€å‘é…ç½®å¯¹æ¯”è„šæœ¬

2. **æ–‡æ¡£å’ŒæŒ‡å—**
   - [ ] ç¼–å†™åŒæ­¥æ“ä½œæŒ‡å—
   - [ ] ç¼–å†™å†²çªè§£å†³æŒ‡å—
   - [ ] ç¼–å†™å®šåˆ¶åŒ–å¼€å‘æŒ‡å—

3. **æµ‹è¯•éªŒè¯**
   - [ ] æµ‹è¯•ç‰ˆæœ¬åŒæ­¥æµç¨‹
   - [ ] æµ‹è¯•è¿ç§»åŒæ­¥æµç¨‹
   - [ ] æµ‹è¯•å†²çªè§£å†³æµç¨‹

### é˜¶æ®µä¸‰ï¼šå®šåˆ¶åŒ–æ”¯æŒï¼ˆ2-3 å‘¨ï¼‰

1. **æ’ä»¶æœºåˆ¶**
   - [ ] å®Œå–„æ’ä»¶åŠ è½½æœºåˆ¶
   - [ ] å®ç°æ‰©å±•ç‚¹ç³»ç»Ÿ
   - [ ] åˆ›å»ºæ’ä»¶å¼€å‘æ¨¡æ¿

2. **é…ç½®è¦†ç›–**
   - [ ] å®ç°é…ç½®è¦†ç›–æœºåˆ¶
   - [ ] åˆ›å»ºé…ç½®æ¨¡æ¿
   - [ ] ç¼–å†™é…ç½®æ–‡æ¡£

3. **å®šåˆ¶åŒ–æŒ‡å—**
   - [ ] ç¼–å†™å®šåˆ¶åŒ–å¼€å‘æŒ‡å—
   - [ ] åˆ›å»ºå®šåˆ¶åŒ–ç¤ºä¾‹
   - [ ] æä¾›æŠ€æœ¯æ”¯æŒæµç¨‹

---

## ğŸ¯ æœ€ä½³å®è·µ

### 1. ä»£ç ç®¡ç†
- âœ… **å•ä¸€ä»£ç åº“**ï¼šæ‰€æœ‰ä»£ç åœ¨ä¸»ä»£ç åº“ç®¡ç†
- âœ… **åˆ†æ”¯éš”ç¦»**ï¼šå®šåˆ¶åŒ–ä»£ç åœ¨ç‹¬ç«‹åˆ†æ”¯
- âœ… **å®šæœŸåŒæ­¥**ï¼šç§æœ‰åŒ–åˆ†æ”¯å®šæœŸä»ä¸»åˆ†æ”¯åˆå¹¶

### 2. é…ç½®ç®¡ç†
- âœ… **ç¯å¢ƒå˜é‡**ï¼šä½¿ç”¨ç¯å¢ƒå˜é‡åŒºåˆ†éƒ¨ç½²æ¨¡å¼
- âœ… **é…ç½®æ¨¡æ¿**ï¼šæä¾›é…ç½®æ¨¡æ¿å’Œç¤ºä¾‹
- âœ… **é…ç½®éªŒè¯**ï¼šå¯åŠ¨æ—¶éªŒè¯é…ç½®å®Œæ•´æ€§

### 3. ç‰ˆæœ¬å‘å¸ƒ
- âœ… **è¯­ä¹‰åŒ–ç‰ˆæœ¬**ï¼šä½¿ç”¨è¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶
- âœ… **å‘å¸ƒæ£€æŸ¥**ï¼šä¸¥æ ¼æ‰§è¡Œå‘å¸ƒæ£€æŸ¥æ¸…å•
- âœ… **ç‰ˆæœ¬æ–‡æ¡£**ï¼šæ¯ä¸ªç‰ˆæœ¬æä¾›è¯¦ç»†çš„ CHANGELOG

### 4. å®šåˆ¶åŒ–å¼€å‘
- âœ… **æ’ä»¶ä¼˜å…ˆ**ï¼šä¼˜å…ˆä½¿ç”¨æ’ä»¶æœºåˆ¶å®ç°å®šåˆ¶åŒ–
- âœ… **æ‰©å±•ç‚¹**ï¼šé€šè¿‡æ‰©å±•ç‚¹æ”¯æŒå®šåˆ¶åŒ–éœ€æ±‚
- âœ… **ä»£ç éš”ç¦»**ï¼šå®šåˆ¶åŒ–ä»£ç ä¸æ±¡æŸ“æ ¸å¿ƒä»£ç 

### 5. æŠ€æœ¯æ”¯æŒ
- âœ… **åŒæ­¥æŒ‡å—**ï¼šæä¾›è¯¦ç»†çš„åŒæ­¥æ“ä½œæŒ‡å—
- âœ… **å†²çªè§£å†³**ï¼šæä¾›å†²çªè§£å†³æœ€ä½³å®è·µ
- âœ… **æŠ€æœ¯æ”¯æŒ**ï¼šå»ºç«‹æŠ€æœ¯æ”¯æŒæµç¨‹å’Œæ¸ é“

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [Git å·¥ä½œæµè§„èŒƒ](../2.rules/8.Gitå·¥ä½œæµè§„èŒƒ.md)
- [æ•°æ®åº“å‘½åè§„èŒƒ](../2.rules/3.æ•°æ®åº“å‘½åè§„èŒƒ.md)
- [API è®¾è®¡è§„èŒƒ](../2.rules/6.APIè®¾è®¡è§„èŒƒ.md)
- [æ’ä»¶åŠ è½½æœºåˆ¶ä¼˜åŒ–æ–¹æ¡ˆ](../4.features/æ’ä»¶åŠ è½½æœºåˆ¶ä¼˜åŒ–æ–¹æ¡ˆ.md)

---

## âœ… æ€»ç»“

æœ¬æ–¹æ¡ˆé€šè¿‡ä»¥ä¸‹æ–¹å¼è§£å†³ç§æœ‰åŒ–éƒ¨ç½²ä¸ SaaS ç‰ˆæœ¬åŒæ­¥é—®é¢˜ï¼š

1. **å•ä¸€ä»£ç åº“**ï¼šæ‰€æœ‰åŠŸèƒ½åœ¨ä¸»ä»£ç åº“å¼€å‘ï¼Œä¿æŒä»£ç ç»Ÿä¸€
2. **é…ç½®é©±åŠ¨**ï¼šé€šè¿‡é…ç½®åŒºåˆ† SaaS å’Œç§æœ‰åŒ–éƒ¨ç½²æ¨¡å¼
3. **åˆ†æ”¯ç­–ç•¥**ï¼šä½¿ç”¨ Git åˆ†æ”¯ç®¡ç†ä¸åŒéƒ¨ç½²ç‰ˆæœ¬
4. **å®šæœŸåŒæ­¥**ï¼šç§æœ‰åŒ–éƒ¨ç½²å®šæœŸä»ä¸»ç‰ˆæœ¬æ‹‰å–æ›´æ–°
5. **å®šåˆ¶åŒ–éš”ç¦»**ï¼šå®šåˆ¶åŒ–åŠŸèƒ½é€šè¿‡æ’ä»¶æœºåˆ¶å®ç°ï¼Œä¸ä¿®æ”¹æ ¸å¿ƒä»£ç 
6. **ç‰ˆæœ¬ç®¡ç†**ï¼šä½¿ç”¨è¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶å’Œå‘å¸ƒæµç¨‹

**æ ¸å¿ƒä¼˜åŠ¿**ï¼š
- âœ… ä»£ç ç»Ÿä¸€ï¼Œæ˜“äºç»´æŠ¤
- âœ… åŠŸèƒ½åŒæ­¥ï¼Œå‡å°‘é‡å¤å¼€å‘
- âœ… å®šåˆ¶åŒ–éš”ç¦»ï¼Œä¸å½±å“æ ¸å¿ƒä»£ç 
- âœ… ç‰ˆæœ¬å¯æ§ï¼Œæ”¯æŒçµæ´»æ›´æ–°ç­–ç•¥

---

## ğŸŒ å‰ç«¯ç‰ˆæœ¬ç®¡ç†åŠŸèƒ½

### åŠŸèƒ½æ¦‚è¿°

ä¸ºç§æœ‰åŒ–éƒ¨ç½²æä¾›å‰ç«¯ WEB ç•Œé¢ï¼Œè®©ç”¨æˆ·å¯ä»¥åœ¨æµè§ˆå™¨ä¸­ï¼š
- âœ… æŸ¥çœ‹å½“å‰ç‰ˆæœ¬ä¿¡æ¯
- âœ… æ£€æŸ¥å¯ç”¨ç‰ˆæœ¬æ›´æ–°
- âœ… æŸ¥çœ‹ç‰ˆæœ¬æ›´æ–°å†…å®¹ï¼ˆCHANGELOGï¼‰
- âœ… ä¸€é”®è§¦å‘ç‰ˆæœ¬å‡çº§
- âœ… æŸ¥çœ‹å‡çº§è¿›åº¦å’Œæ—¥å¿—
- âœ… å‡çº§å‰è‡ªåŠ¨å¤‡ä»½

### åŠŸèƒ½è®¾è®¡

#### 1. åç«¯ API è®¾è®¡

```python
# infra/api/version_management/version_management.py
"""
ç‰ˆæœ¬ç®¡ç† API

æä¾›ç‰ˆæœ¬æ£€æŸ¥ã€ç‰ˆæœ¬ä¿¡æ¯ã€ç‰ˆæœ¬å‡çº§ç­‰åŠŸèƒ½
"""

from fastapi import APIRouter, Depends, HTTPException, status
from typing import List, Optional
from pydantic import BaseModel, Field
from datetime import datetime

from infra.api.deps.deps import get_current_user
from infra.models.user import User
from infra.domain.security.platform_superadmin_security import require_platform_superadmin

router = APIRouter(prefix="/api/v1/infra/version", tags=["Version Management"])


class VersionInfo(BaseModel):
    """ç‰ˆæœ¬ä¿¡æ¯"""
    version: str = Field(..., description="ç‰ˆæœ¬å·")
    release_date: datetime = Field(..., description="å‘å¸ƒæ—¥æœŸ")
    changelog: str = Field(..., description="æ›´æ–°æ—¥å¿—")
    is_lts: bool = Field(default=False, description="æ˜¯å¦ä¸ºé•¿æœŸæ”¯æŒç‰ˆæœ¬")
    is_prerelease: bool = Field(default=False, description="æ˜¯å¦ä¸ºé¢„å‘å¸ƒç‰ˆæœ¬")


class CurrentVersionResponse(BaseModel):
    """å½“å‰ç‰ˆæœ¬å“åº”"""
    current_version: str = Field(..., description="å½“å‰ç‰ˆæœ¬å·")
    deployment_mode: str = Field(..., description="éƒ¨ç½²æ¨¡å¼ï¼ˆsaas/privateï¼‰")
    last_update_date: Optional[datetime] = Field(None, description="æœ€åæ›´æ–°æ—¶é—´")


class AvailableVersionsResponse(BaseModel):
    """å¯ç”¨ç‰ˆæœ¬å“åº”"""
    available_versions: List[VersionInfo] = Field(..., description="å¯ç”¨ç‰ˆæœ¬åˆ—è¡¨")
    latest_version: str = Field(..., description="æœ€æ–°ç‰ˆæœ¬å·")
    has_update: bool = Field(..., description="æ˜¯å¦æœ‰æ›´æ–°")


class UpgradeRequest(BaseModel):
    """å‡çº§è¯·æ±‚"""
    target_version: str = Field(..., description="ç›®æ ‡ç‰ˆæœ¬å·")
    auto_backup: bool = Field(default=True, description="æ˜¯å¦è‡ªåŠ¨å¤‡ä»½")
    skip_migration: bool = Field(default=False, description="æ˜¯å¦è·³è¿‡æ•°æ®åº“è¿ç§»")


class UpgradeResponse(BaseModel):
    """å‡çº§å“åº”"""
    upgrade_id: str = Field(..., description="å‡çº§ä»»åŠ¡ID")
    status: str = Field(..., description="å‡çº§çŠ¶æ€ï¼ˆpending/running/completed/failedï¼‰")
    message: str = Field(..., description="å‡çº§æ¶ˆæ¯")


@router.get("/current", response_model=CurrentVersionResponse)
async def get_current_version(
    current_user: User = Depends(get_current_user),
):
    """
    è·å–å½“å‰ç‰ˆæœ¬ä¿¡æ¯
    
    æ‰€æœ‰ç”¨æˆ·éƒ½å¯ä»¥æŸ¥çœ‹å½“å‰ç‰ˆæœ¬
    """
    from infra.config.platform_config import platform_settings
    
    return CurrentVersionResponse(
        current_version=platform_settings.APP_VERSION,
        deployment_mode=platform_settings.DEPLOYMENT_MODE,
        last_update_date=None,  # ä»æ•°æ®åº“æˆ–é…ç½®æ–‡ä»¶è¯»å–
    )


@router.get("/available", response_model=AvailableVersionsResponse)
async def get_available_versions(
    current_user: User = Depends(require_platform_superadmin),
):
    """
    è·å–å¯ç”¨ç‰ˆæœ¬åˆ—è¡¨
    
    éœ€è¦å¹³å°è¶…çº§ç®¡ç†å‘˜æƒé™
    """
    # ä» Git ä»“åº“æˆ–ç‰ˆæœ¬æœåŠ¡å™¨è·å–å¯ç”¨ç‰ˆæœ¬
    # è¿™é‡Œéœ€è¦å®ç°ç‰ˆæœ¬æ£€æŸ¥é€»è¾‘
    available_versions = await check_available_versions()
    
    from infra.config.platform_config import platform_settings
    current_version = platform_settings.APP_VERSION
    
    latest_version = available_versions[0].version if available_versions else current_version
    has_update = compare_versions(latest_version, current_version) > 0
    
    return AvailableVersionsResponse(
        available_versions=available_versions,
        latest_version=latest_version,
        has_update=has_update,
    )


@router.get("/{version}", response_model=VersionInfo)
async def get_version_info(
    version: str,
    current_user: User = Depends(require_platform_superadmin),
):
    """
    è·å–æŒ‡å®šç‰ˆæœ¬çš„è¯¦ç»†ä¿¡æ¯
    
    éœ€è¦å¹³å°è¶…çº§ç®¡ç†å‘˜æƒé™
    """
    version_info = await get_version_details(version)
    if not version_info:
        raise HTTPException(
            status_code=status.HTTP_404_NOT_FOUND,
            detail=f"ç‰ˆæœ¬ {version} ä¸å­˜åœ¨"
        )
    return version_info


@router.post("/upgrade", response_model=UpgradeResponse)
async def upgrade_version(
    request: UpgradeRequest,
    current_user: User = Depends(require_platform_superadmin),
):
    """
    æ‰§è¡Œç‰ˆæœ¬å‡çº§
    
    éœ€è¦å¹³å°è¶…çº§ç®¡ç†å‘˜æƒé™
    å‡çº§è¿‡ç¨‹ï¼š
    1. æ£€æŸ¥ç›®æ ‡ç‰ˆæœ¬æ˜¯å¦å¯ç”¨
    2. è‡ªåŠ¨å¤‡ä»½ï¼ˆå¦‚æœå¯ç”¨ï¼‰
    3. ä¸‹è½½æ›´æ–°æ–‡ä»¶
    4. æ‰§è¡Œæ•°æ®åº“è¿ç§»
    5. æ›´æ–°ä»£ç 
    6. é‡å¯æœåŠ¡ï¼ˆå¯é€‰ï¼‰
    """
    # æ£€æŸ¥ç›®æ ‡ç‰ˆæœ¬
    available_versions = await check_available_versions()
    target_version_info = next(
        (v for v in available_versions if v.version == request.target_version),
        None
    )
    if not target_version_info:
        raise HTTPException(
            status_code=status.HTTP_400_BAD_REQUEST,
            detail=f"ç‰ˆæœ¬ {request.target_version} ä¸å¯ç”¨"
        )
    
    # åˆ›å»ºå‡çº§ä»»åŠ¡
    upgrade_id = await create_upgrade_task(
        target_version=request.target_version,
        auto_backup=request.auto_backup,
        skip_migration=request.skip_migration,
        user_id=current_user.id,
    )
    
    # å¼‚æ­¥æ‰§è¡Œå‡çº§ï¼ˆä½¿ç”¨ Inngest æˆ–åå°ä»»åŠ¡ï¼‰
    await trigger_upgrade_task(upgrade_id)
    
    return UpgradeResponse(
        upgrade_id=upgrade_id,
        status="pending",
        message="å‡çº§ä»»åŠ¡å·²åˆ›å»ºï¼Œæ­£åœ¨æ‰§è¡Œ..."
    )


@router.get("/upgrade/{upgrade_id}", response_model=UpgradeResponse)
async def get_upgrade_status(
    upgrade_id: str,
    current_user: User = Depends(require_platform_superadmin),
):
    """
    è·å–å‡çº§ä»»åŠ¡çŠ¶æ€
    
    éœ€è¦å¹³å°è¶…çº§ç®¡ç†å‘˜æƒé™
    """
    upgrade_status = await get_upgrade_task_status(upgrade_id)
    if not upgrade_status:
        raise HTTPException(
            status_code=status.HTTP_404_NOT_FOUND,
            detail=f"å‡çº§ä»»åŠ¡ {upgrade_id} ä¸å­˜åœ¨"
        )
    return upgrade_status


@router.post("/upgrade/{upgrade_id}/cancel")
async def cancel_upgrade(
    upgrade_id: str,
    current_user: User = Depends(require_platform_superadmin),
):
    """
    å–æ¶ˆå‡çº§ä»»åŠ¡
    
    éœ€è¦å¹³å°è¶…çº§ç®¡ç†å‘˜æƒé™
    åªèƒ½åœ¨å‡çº§ä»»åŠ¡å¤„äº pending æˆ– running çŠ¶æ€æ—¶å–æ¶ˆ
    """
    success = await cancel_upgrade_task(upgrade_id)
    if not success:
        raise HTTPException(
            status_code=status.HTTP_400_BAD_REQUEST,
            detail="æ— æ³•å–æ¶ˆå‡çº§ä»»åŠ¡ï¼ˆå¯èƒ½å·²å®Œæˆæˆ–å¤±è´¥ï¼‰"
        )
    return {"message": "å‡çº§ä»»åŠ¡å·²å–æ¶ˆ"}


# è¾…åŠ©å‡½æ•°ï¼ˆéœ€è¦å®ç°ï¼‰

async def check_available_versions() -> List[VersionInfo]:
    """
    æ£€æŸ¥å¯ç”¨ç‰ˆæœ¬
    
    ä» Git ä»“åº“æˆ–ç‰ˆæœ¬æœåŠ¡å™¨è·å–å¯ç”¨ç‰ˆæœ¬åˆ—è¡¨
    """
    # å®ç°ç‰ˆæœ¬æ£€æŸ¥é€»è¾‘
    # å¯ä»¥ä» Git æ ‡ç­¾ã€ç‰ˆæœ¬æœåŠ¡å™¨ APIã€æˆ–é…ç½®æ–‡ä»¶è¯»å–
    pass


async def get_version_details(version: str) -> Optional[VersionInfo]:
    """
    è·å–ç‰ˆæœ¬è¯¦ç»†ä¿¡æ¯
    
    åŒ…æ‹¬ CHANGELOGã€å‘å¸ƒæ—¥æœŸç­‰
    """
    # å®ç°ç‰ˆæœ¬è¯¦æƒ…è·å–é€»è¾‘
    # å¯ä»¥ä» CHANGELOG.mdã€Git æ ‡ç­¾ä¿¡æ¯ã€æˆ–ç‰ˆæœ¬æœåŠ¡å™¨è·å–
    pass


def compare_versions(version1: str, version2: str) -> int:
    """
    æ¯”è¾ƒä¸¤ä¸ªç‰ˆæœ¬å·
    
    Returns:
        int: 1 if version1 > version2, -1 if version1 < version2, 0 if equal
    """
    # å®ç°ç‰ˆæœ¬å·æ¯”è¾ƒé€»è¾‘
    pass


async def create_upgrade_task(
    target_version: str,
    auto_backup: bool,
    skip_migration: bool,
    user_id: int,
) -> str:
    """
    åˆ›å»ºå‡çº§ä»»åŠ¡
    
    Returns:
        str: å‡çº§ä»»åŠ¡ID
    """
    # å®ç°å‡çº§ä»»åŠ¡åˆ›å»ºé€»è¾‘
    pass


async def trigger_upgrade_task(upgrade_id: str) -> None:
    """
    è§¦å‘å‡çº§ä»»åŠ¡æ‰§è¡Œ
    
    ä½¿ç”¨ Inngest æˆ–åå°ä»»åŠ¡å¼‚æ­¥æ‰§è¡Œ
    """
    # å®ç°å‡çº§ä»»åŠ¡è§¦å‘é€»è¾‘
    pass


async def get_upgrade_task_status(upgrade_id: str) -> Optional[UpgradeResponse]:
    """
    è·å–å‡çº§ä»»åŠ¡çŠ¶æ€
    """
    # å®ç°å‡çº§ä»»åŠ¡çŠ¶æ€æŸ¥è¯¢é€»è¾‘
    pass


async def cancel_upgrade_task(upgrade_id: str) -> bool:
    """
    å–æ¶ˆå‡çº§ä»»åŠ¡
    """
    # å®ç°å‡çº§ä»»åŠ¡å–æ¶ˆé€»è¾‘
    pass
```

#### 2. å‰ç«¯é¡µé¢è®¾è®¡

```typescript
// riveredge-frontend/src/pages/system/version-management/index.tsx
/**
 * ç‰ˆæœ¬ç®¡ç†é¡µé¢
 * 
 * åŠŸèƒ½ï¼š
 * 1. æ˜¾ç¤ºå½“å‰ç‰ˆæœ¬ä¿¡æ¯
 * 2. æ£€æŸ¥å¯ç”¨ç‰ˆæœ¬æ›´æ–°
 * 3. æŸ¥çœ‹ç‰ˆæœ¬æ›´æ–°å†…å®¹ï¼ˆCHANGELOGï¼‰
 * 4. ä¸€é”®è§¦å‘ç‰ˆæœ¬å‡çº§
 * 5. æŸ¥çœ‹å‡çº§è¿›åº¦å’Œæ—¥å¿—
 */

import React, { useState, useEffect } from 'react';
import {
  Card,
  Typography,
  Space,
  Button,
  Tag,
  Alert,
  Descriptions,
  List,
  Modal,
  Progress,
  Steps,
  message,
  Divider,
} from 'antd';
import {
  CheckCircleOutlined,
  ExclamationCircleOutlined,
  DownloadOutlined,
  ReloadOutlined,
  InfoCircleOutlined,
} from '@ant-design/icons';
import { ProCard } from '@ant-design/pro-components';
import { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';
import type { VersionInfo, CurrentVersionResponse, AvailableVersionsResponse } from '@/services/versionManagement';

const { Title, Text, Paragraph } = Typography;

const VersionManagementPage: React.FC = () => {
  const [selectedVersion, setSelectedVersion] = useState<VersionInfo | null>(null);
  const [upgradeModalVisible, setUpgradeModalVisible] = useState(false);
  const [upgradeProgress, setUpgradeProgress] = useState(0);
  const queryClient = useQueryClient();

  // è·å–å½“å‰ç‰ˆæœ¬
  const { data: currentVersion, isLoading: currentVersionLoading } = useQuery({
    queryKey: ['version', 'current'],
    queryFn: async () => {
      const response = await fetch('/api/v1/infra/version/current', {
        headers: {
          'Authorization': `Bearer ${localStorage.getItem('token')}`,
        },
      });
      if (!response.ok) throw new Error('è·å–å½“å‰ç‰ˆæœ¬å¤±è´¥');
      return response.json() as Promise<CurrentVersionResponse>;
    },
  });

  // è·å–å¯ç”¨ç‰ˆæœ¬
  const { data: availableVersions, isLoading: availableVersionsLoading } = useQuery({
    queryKey: ['version', 'available'],
    queryFn: async () => {
      const response = await fetch('/api/v1/infra/version/available', {
        headers: {
          'Authorization': `Bearer ${localStorage.getItem('token')}`,
        },
      });
      if (!response.ok) throw new Error('è·å–å¯ç”¨ç‰ˆæœ¬å¤±è´¥');
      return response.json() as Promise<AvailableVersionsResponse>;
    },
    enabled: !!currentVersion, // åªæœ‰åœ¨è·å–åˆ°å½“å‰ç‰ˆæœ¬åæ‰è·å–å¯ç”¨ç‰ˆæœ¬
  });

  // å‡çº§ç‰ˆæœ¬
  const upgradeMutation = useMutation({
    mutationFn: async (targetVersion: string) => {
      const response = await fetch('/api/v1/infra/version/upgrade', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'Authorization': `Bearer ${localStorage.getItem('token')}`,
        },
        body: JSON.stringify({
          target_version: targetVersion,
          auto_backup: true,
          skip_migration: false,
        }),
      });
      if (!response.ok) {
        const error = await response.json();
        throw new Error(error.detail || 'å‡çº§å¤±è´¥');
      }
      return response.json();
    },
    onSuccess: (data) => {
      message.success('å‡çº§ä»»åŠ¡å·²åˆ›å»ºï¼Œæ­£åœ¨æ‰§è¡Œ...');
      setUpgradeModalVisible(true);
      // å¼€å§‹è½®è¯¢å‡çº§çŠ¶æ€
      pollUpgradeStatus(data.upgrade_id);
    },
    onError: (error: Error) => {
      message.error(error.message || 'å‡çº§å¤±è´¥');
    },
  });

  // è½®è¯¢å‡çº§çŠ¶æ€
  const pollUpgradeStatus = async (upgradeId: string) => {
    const interval = setInterval(async () => {
      try {
        const response = await fetch(`/api/v1/infra/version/upgrade/${upgradeId}`, {
          headers: {
            'Authorization': `Bearer ${localStorage.getItem('token')}`,
          },
        });
        if (!response.ok) throw new Error('è·å–å‡çº§çŠ¶æ€å¤±è´¥');
        const data = await response.json();
        
        // æ›´æ–°è¿›åº¦ï¼ˆæ ¹æ®å‡çº§çŠ¶æ€ä¼°ç®—ï¼‰
        if (data.status === 'running') {
          setUpgradeProgress((prev) => Math.min(prev + 10, 90));
        } else if (data.status === 'completed') {
          setUpgradeProgress(100);
          clearInterval(interval);
          message.success('å‡çº§å®Œæˆï¼');
          queryClient.invalidateQueries({ queryKey: ['version'] });
          setTimeout(() => {
            setUpgradeModalVisible(false);
            message.info('ç³»ç»Ÿå°†åœ¨ 5 ç§’ååˆ·æ–°é¡µé¢');
            setTimeout(() => window.location.reload(), 5000);
          }, 2000);
        } else if (data.status === 'failed') {
          clearInterval(interval);
          message.error(`å‡çº§å¤±è´¥ï¼š${data.message}`);
        }
      } catch (error) {
        console.error('è·å–å‡çº§çŠ¶æ€å¤±è´¥:', error);
      }
    }, 2000); // æ¯ 2 ç§’è½®è¯¢ä¸€æ¬¡
  };

  // å¤„ç†å‡çº§ç¡®è®¤
  const handleUpgrade = () => {
    if (!selectedVersion) return;
    upgradeMutation.mutate(selectedVersion.version);
  };

  // æŸ¥çœ‹ç‰ˆæœ¬è¯¦æƒ…
  const handleViewVersionDetails = async (version: string) => {
    try {
      const response = await fetch(`/api/v1/infra/version/${version}`, {
        headers: {
          'Authorization': `Bearer ${localStorage.getItem('token')}`,
        },
      });
      if (!response.ok) throw new Error('è·å–ç‰ˆæœ¬è¯¦æƒ…å¤±è´¥');
      const versionInfo = await response.json() as VersionInfo;
      setSelectedVersion(versionInfo);
      setUpgradeModalVisible(true);
    } catch (error) {
      message.error('è·å–ç‰ˆæœ¬è¯¦æƒ…å¤±è´¥');
    }
  };

  return (
    <div style={{ padding: '24px' }}>
      <Title level={2}>ç‰ˆæœ¬ç®¡ç†</Title>
      
      <Space direction="vertical" size="large" style={{ width: '100%' }}>
        {/* å½“å‰ç‰ˆæœ¬ä¿¡æ¯ */}
        <ProCard title="å½“å‰ç‰ˆæœ¬" loading={currentVersionLoading}>
          {currentVersion && (
            <Descriptions column={2}>
              <Descriptions.Item label="ç‰ˆæœ¬å·">
                <Tag color="blue" style={{ fontSize: '16px', padding: '4px 12px' }}>
                  {currentVersion.current_version}
                </Tag>
              </Descriptions.Item>
              <Descriptions.Item label="éƒ¨ç½²æ¨¡å¼">
                <Tag color={currentVersion.deployment_mode === 'private' ? 'green' : 'orange'}>
                  {currentVersion.deployment_mode === 'private' ? 'ç§æœ‰åŒ–éƒ¨ç½²' : 'SaaS éƒ¨ç½²'}
                </Tag>
              </Descriptions.Item>
              <Descriptions.Item label="æœ€åæ›´æ–°æ—¶é—´">
                {currentVersion.last_update_date
                  ? new Date(currentVersion.last_update_date).toLocaleString('zh-CN')
                  : 'æœªçŸ¥'}
              </Descriptions.Item>
            </Descriptions>
          )}
        </ProCard>

        {/* å¯ç”¨ç‰ˆæœ¬æ›´æ–° */}
        <ProCard
          title="å¯ç”¨ç‰ˆæœ¬"
          loading={availableVersionsLoading}
          extra={
            <Button
              icon={<ReloadOutlined />}
              onClick={() => queryClient.invalidateQueries({ queryKey: ['version', 'available'] })}
            >
              åˆ·æ–°
            </Button>
          }
        >
          {availableVersions && (
            <>
              {availableVersions.has_update ? (
                <Alert
                  message="å‘ç°æ–°ç‰ˆæœ¬"
                  description={`æœ€æ–°ç‰ˆæœ¬ï¼š${availableVersions.latest_version}ï¼Œå½“å‰ç‰ˆæœ¬ï¼š${currentVersion?.current_version}`}
                  type="info"
                  showIcon
                  icon={<InfoCircleOutlined />}
                  style={{ marginBottom: 16 }}
                />
              ) : (
                <Alert
                  message="å·²æ˜¯æœ€æ–°ç‰ˆæœ¬"
                  description="å½“å‰ç‰ˆæœ¬å·²æ˜¯æœ€æ–°ç‰ˆæœ¬ï¼Œæ— éœ€æ›´æ–°"
                  type="success"
                  showIcon
                  icon={<CheckCircleOutlined />}
                  style={{ marginBottom: 16 }}
                />
              )}

              <List
                dataSource={availableVersions.available_versions}
                renderItem={(version) => (
                  <List.Item
                    actions={[
                      <Button
                        key="view"
                        type="link"
                        onClick={() => handleViewVersionDetails(version.version)}
                      >
                        æŸ¥çœ‹è¯¦æƒ…
                      </Button>,
                      <Button
                        key="upgrade"
                        type="primary"
                        icon={<DownloadOutlined />}
                        disabled={
                          !availableVersions.has_update ||
                          version.version === currentVersion?.current_version
                        }
                        onClick={() => handleViewVersionDetails(version.version)}
                      >
                        å‡çº§åˆ°æ­¤ç‰ˆæœ¬
                      </Button>,
                    ]}
                  >
                    <List.Item.Meta
                      title={
                        <Space>
                          <Tag color="blue">{version.version}</Tag>
                          {version.is_lts && <Tag color="green">LTS</Tag>}
                          {version.is_prerelease && <Tag color="orange">é¢„å‘å¸ƒ</Tag>}
                          {version.version === availableVersions.latest_version && (
                            <Tag color="red">æœ€æ–°</Tag>
                          )}
                        </Space>
                      }
                      description={
                        <div>
                          <Text type="secondary">
                            å‘å¸ƒæ—¥æœŸï¼š{new Date(version.release_date).toLocaleDateString('zh-CN')}
                          </Text>
                        </div>
                      }
                    />
                  </List.Item>
                )}
              />
            </>
          )}
        </ProCard>
      </Space>

      {/* å‡çº§ç¡®è®¤å¯¹è¯æ¡† */}
      <Modal
        title="ç‰ˆæœ¬å‡çº§ç¡®è®¤"
        open={upgradeModalVisible}
        onCancel={() => {
          if (upgradeProgress < 100) {
            Modal.confirm({
              title: 'ç¡®è®¤å–æ¶ˆå‡çº§ï¼Ÿ',
              content: 'å‡çº§æ­£åœ¨è¿›è¡Œä¸­ï¼Œå–æ¶ˆå¯èƒ½å¯¼è‡´ç³»ç»Ÿä¸ç¨³å®š',
              onOk: () => {
                setUpgradeModalVisible(false);
                setUpgradeProgress(0);
              },
            });
          } else {
            setUpgradeModalVisible(false);
            setUpgradeProgress(0);
          }
        }}
        footer={null}
        width={800}
      >
        {selectedVersion && (
          <Space direction="vertical" size="large" style={{ width: '100%' }}>
            {/* ç‰ˆæœ¬ä¿¡æ¯ */}
            <Descriptions column={2} bordered>
              <Descriptions.Item label="å½“å‰ç‰ˆæœ¬">
                <Tag color="blue">{currentVersion?.current_version}</Tag>
              </Descriptions.Item>
              <Descriptions.Item label="ç›®æ ‡ç‰ˆæœ¬">
                <Tag color="green">{selectedVersion.version}</Tag>
              </Descriptions.Item>
              <Descriptions.Item label="å‘å¸ƒæ—¥æœŸ" span={2}>
                {new Date(selectedVersion.release_date).toLocaleString('zh-CN')}
              </Descriptions.Item>
              <Descriptions.Item label="ç‰ˆæœ¬ç±»å‹" span={2}>
                <Space>
                  {selectedVersion.is_lts && <Tag color="green">é•¿æœŸæ”¯æŒç‰ˆæœ¬ (LTS)</Tag>}
                  {selectedVersion.is_prerelease && <Tag color="orange">é¢„å‘å¸ƒç‰ˆæœ¬</Tag>}
                </Space>
              </Descriptions.Item>
            </Descriptions>

            {/* æ›´æ–°æ—¥å¿— */}
            <div>
              <Title level={5}>æ›´æ–°å†…å®¹</Title>
              <div
                style={{
                  maxHeight: '300px',
                  overflowY: 'auto',
                  padding: '12px',
                  background: '#f5f5f5',
                  borderRadius: '4px',
                }}
              >
                <pre style={{ whiteSpace: 'pre-wrap', margin: 0 }}>
                  {selectedVersion.changelog}
                </pre>
              </div>
            </div>

            {/* å‡çº§è¿›åº¦ */}
            {upgradeProgress > 0 && (
              <div>
                <Divider />
                <Title level={5}>å‡çº§è¿›åº¦</Title>
                <Progress percent={upgradeProgress} status="active" />
                <Text type="secondary" style={{ fontSize: '12px' }}>
                  å‡çº§æ­£åœ¨è¿›è¡Œä¸­ï¼Œè¯·å‹¿å…³é—­æ­¤çª—å£...
                </Text>
              </div>
            )}

            {/* å‡çº§æç¤º */}
            <Alert
              message="å‡çº§æç¤º"
              description={
                <ul style={{ margin: 0, paddingLeft: '20px' }}>
                  <li>å‡çº§å‰ç³»ç»Ÿå°†è‡ªåŠ¨å¤‡ä»½æ•°æ®åº“å’Œé…ç½®æ–‡ä»¶</li>
                  <li>å‡çº§è¿‡ç¨‹ä¸­ç³»ç»Ÿå¯èƒ½ä¼šçŸ­æš‚ä¸å¯ç”¨</li>
                  <li>å‡çº§å®Œæˆåç³»ç»Ÿå°†è‡ªåŠ¨é‡å¯</li>
                  <li>å»ºè®®åœ¨ä¸šåŠ¡ä½å³°æœŸè¿›è¡Œå‡çº§</li>
                </ul>
              }
              type="warning"
              showIcon
              icon={<ExclamationCircleOutlined />}
            />

            {/* æ“ä½œæŒ‰é’® */}
            {upgradeProgress === 0 && (
              <div style={{ textAlign: 'right', marginTop: 16 }}>
                <Space>
                  <Button onClick={() => setUpgradeModalVisible(false)}>å–æ¶ˆ</Button>
                  <Button
                    type="primary"
                    loading={upgradeMutation.isPending}
                    onClick={handleUpgrade}
                  >
                    ç¡®è®¤å‡çº§
                  </Button>
                </Space>
              </div>
            )}
          </Space>
        )}
      </Modal>
    </div>
  );
};

export default VersionManagementPage;
```

#### 3. è·¯ç”±é…ç½®

```typescript
// riveredge-frontend/src/routes/index.tsx
// åœ¨ç³»ç»Ÿç®¡ç†è·¯ç”±ä¸­æ·»åŠ ç‰ˆæœ¬ç®¡ç†é¡µé¢

import VersionManagementPage from '../pages/system/version-management';

// åœ¨è·¯ç”±é…ç½®ä¸­æ·»åŠ 
<Route
  path="/system/version-management"
  element={
    <LayoutWrapper>
      <VersionManagementPage />
    </LayoutWrapper>
  }
/>
```

#### 4. èœå•é…ç½®

```typescript
// åœ¨ç³»ç»Ÿç®¡ç†èœå•ä¸­æ·»åŠ ç‰ˆæœ¬ç®¡ç†èœå•é¡¹
{
  key: 'version-management',
  label: 'ç‰ˆæœ¬ç®¡ç†',
  path: '/system/version-management',
  icon: <DownloadOutlined />,
  permission: 'infra:version:manage', // éœ€è¦å¹³å°è¶…çº§ç®¡ç†å‘˜æƒé™
}
```

### å®‰å…¨è€ƒè™‘

1. **æƒé™æ§åˆ¶**
   - âœ… åªæœ‰å¹³å°è¶…çº§ç®¡ç†å‘˜å¯ä»¥æŸ¥çœ‹å¯ç”¨ç‰ˆæœ¬å’Œå‡çº§
   - âœ… æ™®é€šç”¨æˆ·å¯ä»¥æŸ¥çœ‹å½“å‰ç‰ˆæœ¬ä¿¡æ¯

2. **å‡çº§å‰æ£€æŸ¥**
   - âœ… æ£€æŸ¥ç›®æ ‡ç‰ˆæœ¬æ˜¯å¦å¯ç”¨
   - âœ… æ£€æŸ¥å½“å‰ç³»ç»ŸçŠ¶æ€ï¼ˆæ˜¯å¦æœ‰æ­£åœ¨è¿è¡Œçš„ä»»åŠ¡ï¼‰
   - âœ… æ£€æŸ¥ç£ç›˜ç©ºé—´å’Œæ•°æ®åº“è¿æ¥

3. **å‡çº§è¿‡ç¨‹**
   - âœ… è‡ªåŠ¨å¤‡ä»½æ•°æ®åº“å’Œé…ç½®æ–‡ä»¶
   - âœ… å‡çº§è¿‡ç¨‹å¯ä¸­æ–­ï¼ˆåœ¨å®‰å…¨ç‚¹ï¼‰
   - âœ… å‡çº§å¤±è´¥è‡ªåŠ¨å›æ»š

4. **å‡çº§åéªŒè¯**
   - âœ… éªŒè¯å‡çº§æ˜¯å¦æˆåŠŸ
   - âœ… æ£€æŸ¥ç³»ç»ŸåŠŸèƒ½æ˜¯å¦æ­£å¸¸
   - âœ… æä¾›å›æ»šé€‰é¡¹

### å®æ–½å»ºè®®

1. **é˜¶æ®µä¸€ï¼šåŸºç¡€åŠŸèƒ½ï¼ˆ1-2 å‘¨ï¼‰**
   - [ ] å®ç°ç‰ˆæœ¬æ£€æŸ¥ API
   - [ ] å®ç°ç‰ˆæœ¬ä¿¡æ¯è·å– API
   - [ ] åˆ›å»ºå‰ç«¯ç‰ˆæœ¬ç®¡ç†é¡µé¢
   - [ ] æ·»åŠ èœå•å’Œè·¯ç”±

2. **é˜¶æ®µäºŒï¼šå‡çº§åŠŸèƒ½ï¼ˆ2-3 å‘¨ï¼‰**
   - [ ] å®ç°å‡çº§ä»»åŠ¡åˆ›å»ºå’Œæ‰§è¡Œ
   - [ ] å®ç°å‡çº§è¿›åº¦è·Ÿè¸ª
   - [ ] å®ç°è‡ªåŠ¨å¤‡ä»½åŠŸèƒ½
   - [ ] å®ç°å‡çº§æ—¥å¿—è®°å½•

3. **é˜¶æ®µä¸‰ï¼šä¼˜åŒ–å’Œå®Œå–„ï¼ˆ1-2 å‘¨ï¼‰**
   - [ ] ä¼˜åŒ–å‡çº§æµç¨‹
   - [ ] æ·»åŠ å‡çº§å‰æ£€æŸ¥
   - [ ] å®ç°å‡çº§å›æ»šåŠŸèƒ½
   - [ ] å®Œå–„é”™è¯¯å¤„ç†å’Œæç¤º

---

**æœ€åæ›´æ–°**ï¼š2025-01-11

