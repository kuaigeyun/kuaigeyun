# å¿«æ ¼è½»CRM - å»ºè®¾è¿›åº¦

## âœ… å·²å®Œæˆå·¥ä½œ

### é˜¶æ®µä¸€ï¼šåº”ç”¨æ³¨å†Œï¼ˆå·²å®Œæˆï¼‰
- [x] åˆ›å»ºåº”ç”¨ç›®å½•ç»“æ„
- [x] åˆ›å»º `manifest.json` æ–‡ä»¶
- [x] æ³¨å†Œåº”ç”¨åˆ°ç³»ç»Ÿï¼ˆç³»ç»Ÿå¯åŠ¨æ—¶è‡ªåŠ¨æ‰«ææ³¨å†Œï¼‰
- [x] åœ¨ `main.py` ä¸­æ³¨å†ŒAPIè·¯ç”±
- [x] åœ¨ `database.py` ä¸­æ³¨å†Œæ•°æ®æ¨¡å‹

### é˜¶æ®µäºŒï¼šæ•°æ®æ¨¡å‹è®¾è®¡ï¼ˆå·²å®Œæˆï¼‰
- [x] åˆ›å»ºçº¿ç´¢æ¨¡å‹ï¼ˆLeadï¼‰
- [x] åˆ›å»ºå•†æœºæ¨¡å‹ï¼ˆOpportunityï¼‰
- [x] åˆ›å»ºé”€å”®è®¢å•æ¨¡å‹ï¼ˆSalesOrderï¼‰
- [x] åˆ›å»ºæœåŠ¡å·¥å•æ¨¡å‹ï¼ˆServiceWorkOrderï¼‰
- [x] åˆ›å»ºä¿ä¿®æ¨¡å‹ï¼ˆWarrantyï¼‰
- [x] åˆ›å»ºæŠ•è¯‰æ¨¡å‹ï¼ˆComplaintï¼‰
- [x] åˆ›å»ºå®‰è£…è®°å½•æ¨¡å‹ï¼ˆInstallationï¼‰
- [x] åˆ›å»ºæœåŠ¡åˆåŒæ¨¡å‹ï¼ˆServiceContractï¼‰
- [x] åˆ›å»ºçº¿ç´¢è·Ÿè¿›è®°å½•æ¨¡å‹ï¼ˆLeadFollowUpï¼‰
- [x] åˆ›å»ºå•†æœºè·Ÿè¿›è®°å½•æ¨¡å‹ï¼ˆOpportunityFollowUpï¼‰

### é˜¶æ®µä¸‰ï¼šæ•°æ®éªŒè¯æ¨¡å¼ï¼ˆå·²å®Œæˆï¼‰
- [x] åˆ›å»ºçº¿ç´¢Schemaï¼ˆLeadCreate, LeadUpdate, LeadResponseï¼‰
- [x] åˆ›å»ºå•†æœºSchemaï¼ˆOpportunityCreate, OpportunityUpdate, OpportunityResponseï¼‰
- [x] åˆ›å»ºé”€å”®è®¢å•Schemaï¼ˆSalesOrderCreate, SalesOrderUpdate, SalesOrderResponseï¼‰
- [x] åˆ›å»ºæœåŠ¡å·¥å•Schemaï¼ˆServiceWorkOrderCreate, ServiceWorkOrderUpdate, ServiceWorkOrderResponseï¼‰
- [x] åˆ›å»ºä¿ä¿®Schemaï¼ˆWarrantyCreate, WarrantyUpdate, WarrantyResponseï¼‰
- [x] åˆ›å»ºæŠ•è¯‰Schemaï¼ˆComplaintCreate, ComplaintUpdate, ComplaintResponseï¼‰
- [x] åˆ›å»ºå®‰è£…è®°å½•Schemaï¼ˆInstallationCreate, InstallationUpdate, InstallationResponseï¼‰
- [x] åˆ›å»ºæœåŠ¡åˆåŒSchemaï¼ˆServiceContractCreate, ServiceContractUpdate, ServiceContractResponseï¼‰
- [x] åˆ›å»ºçº¿ç´¢è·Ÿè¿›è®°å½•Schemaï¼ˆLeadFollowUpCreate, LeadFollowUpUpdate, LeadFollowUpResponseï¼‰
- [x] åˆ›å»ºå•†æœºè·Ÿè¿›è®°å½•Schemaï¼ˆOpportunityFollowUpCreate, OpportunityFollowUpUpdate, OpportunityFollowUpResponseï¼‰

### é˜¶æ®µå››ï¼šä¸šåŠ¡é€»è¾‘å®ç°ï¼ˆå·²å®Œæˆï¼‰
- [x] å®ç°çº¿ç´¢æœåŠ¡ï¼ˆLeadServiceï¼‰
  - [x] create_lead()ï¼šåˆ›å»ºçº¿ç´¢
  - [x] get_lead_by_uuid()ï¼šè·å–çº¿ç´¢
  - [x] list_leads()ï¼šåˆ—è¡¨æŸ¥è¯¢
  - [x] update_lead()ï¼šæ›´æ–°çº¿ç´¢
  - [x] score_lead()ï¼šçº¿ç´¢è¯„åˆ†
  - [x] assign_lead()ï¼šåˆ†é…çº¿ç´¢
  - [x] convert_lead()ï¼šè½¬åŒ–çº¿ç´¢
  - [x] delete_lead()ï¼šåˆ é™¤çº¿ç´¢
- [x] å®ç°å•†æœºæœåŠ¡ï¼ˆOpportunityServiceï¼‰
  - [x] create_opportunity()ï¼šåˆ›å»ºå•†æœº
  - [x] get_opportunity_by_uuid()ï¼šè·å–å•†æœº
  - [x] list_opportunities()ï¼šåˆ—è¡¨æŸ¥è¯¢
  - [x] update_opportunity()ï¼šæ›´æ–°å•†æœº
  - [x] calculate_probability()ï¼šè®¡ç®—æˆäº¤æ¦‚ç‡
  - [x] change_stage()ï¼šå˜æ›´å•†æœºé˜¶æ®µ
  - [x] convert_opportunity()ï¼šè½¬åŒ–å•†æœº
  - [x] delete_opportunity()ï¼šåˆ é™¤å•†æœº
- [x] å®ç°é”€å”®è®¢å•æœåŠ¡ï¼ˆSalesOrderServiceï¼‰
  - [x] create_sales_order()ï¼šåˆ›å»ºè®¢å•
  - [x] get_sales_order_by_uuid()ï¼šè·å–è®¢å•
  - [x] list_sales_orders()ï¼šåˆ—è¡¨æŸ¥è¯¢
  - [x] update_sales_order()ï¼šæ›´æ–°è®¢å•
  - [x] track_order()ï¼šè®¢å•è·Ÿè¸ª
  - [x] change_order()ï¼šè®¢å•å˜æ›´
  - [x] deliver_order()ï¼šè®¢å•äº¤ä»˜
  - [x] delete_sales_order()ï¼šåˆ é™¤è®¢å•
- [x] å®ç°æœåŠ¡å·¥å•æœåŠ¡ï¼ˆServiceWorkOrderServiceï¼‰
  - [x] create_workorder()ï¼šåˆ›å»ºå·¥å•
  - [x] get_workorder_by_uuid()ï¼šè·å–å·¥å•
  - [x] list_workorders()ï¼šåˆ—è¡¨æŸ¥è¯¢
  - [x] assign_workorder()ï¼šåˆ†é…å·¥å•
  - [x] update_workorder()ï¼šæ›´æ–°å·¥å•
  - [x] close_workorder()ï¼šå…³é—­å·¥å•
  - [x] delete_workorder()ï¼šåˆ é™¤å·¥å•
- [x] å®ç°ä¿ä¿®æœåŠ¡ï¼ˆWarrantyServiceï¼‰
  - [x] create_warranty()ï¼šåˆ›å»ºä¿ä¿®
  - [x] get_warranty_by_uuid()ï¼šè·å–ä¿ä¿®
  - [x] list_warranties()ï¼šåˆ—è¡¨æŸ¥è¯¢
  - [x] update_warranty()ï¼šæ›´æ–°ä¿ä¿®
  - [x] delete_warranty()ï¼šåˆ é™¤ä¿ä¿®
- [x] å®ç°æŠ•è¯‰æœåŠ¡ï¼ˆComplaintServiceï¼‰
  - [x] create_complaint()ï¼šåˆ›å»ºæŠ•è¯‰
  - [x] get_complaint_by_uuid()ï¼šè·å–æŠ•è¯‰
  - [x] list_complaints()ï¼šåˆ—è¡¨æŸ¥è¯¢
  - [x] process_complaint()ï¼šå¤„ç†æŠ•è¯‰
  - [x] update_complaint()ï¼šæ›´æ–°æŠ•è¯‰
  - [x] delete_complaint()ï¼šåˆ é™¤æŠ•è¯‰
- [x] å®ç°å®‰è£…è®°å½•æœåŠ¡ï¼ˆInstallationServiceï¼‰
  - [x] create_installation()ï¼šåˆ›å»ºå®‰è£…è®°å½•
  - [x] get_installation_by_uuid()ï¼šè·å–å®‰è£…è®°å½•
  - [x] list_installations()ï¼šåˆ—è¡¨æŸ¥è¯¢
  - [x] update_installation()ï¼šæ›´æ–°å®‰è£…è®°å½•
  - [x] delete_installation()ï¼šåˆ é™¤å®‰è£…è®°å½•
- [x] å®ç°æœåŠ¡åˆåŒæœåŠ¡ï¼ˆServiceContractServiceï¼‰
  - [x] create_contract()ï¼šåˆ›å»ºåˆåŒ
  - [x] get_contract_by_uuid()ï¼šè·å–åˆåŒ
  - [x] list_contracts()ï¼šåˆ—è¡¨æŸ¥è¯¢
  - [x] update_contract()ï¼šæ›´æ–°åˆåŒ
  - [x] delete_contract()ï¼šåˆ é™¤åˆåŒ
- [x] å®ç°é”€å”®æ¼æ–—æœåŠ¡ï¼ˆSalesFunnelServiceï¼‰
  - [x] get_funnel_view()ï¼šè·å–æ¼æ–—è§†å›¾
  - [x] analyze_stage()ï¼šåˆ†æé˜¶æ®µæ•°æ®
  - [x] calculate_conversion_rate()ï¼šè®¡ç®—è½¬åŒ–ç‡
  - [x] forecast_sales()ï¼šé”€å”®é¢„æµ‹
  - [x] analyze_bottleneck()ï¼šåˆ†æç“¶é¢ˆé˜¶æ®µ
- [x] å®ç°çº¿ç´¢è·Ÿè¿›è®°å½•æœåŠ¡ï¼ˆLeadFollowUpServiceï¼‰
  - [x] create_followup()ï¼šåˆ›å»ºè·Ÿè¿›è®°å½•
  - [x] get_followup_by_uuid()ï¼šè·å–è·Ÿè¿›è®°å½•
  - [x] list_followups()ï¼šåˆ—è¡¨æŸ¥è¯¢
  - [x] update_followup()ï¼šæ›´æ–°è·Ÿè¿›è®°å½•
  - [x] delete_followup()ï¼šåˆ é™¤è·Ÿè¿›è®°å½•
- [x] å®ç°å•†æœºè·Ÿè¿›è®°å½•æœåŠ¡ï¼ˆOpportunityFollowUpServiceï¼‰
  - [x] create_followup()ï¼šåˆ›å»ºè·Ÿè¿›è®°å½•
  - [x] get_followup_by_uuid()ï¼šè·å–è·Ÿè¿›è®°å½•
  - [x] list_followups()ï¼šåˆ—è¡¨æŸ¥è¯¢
  - [x] update_followup()ï¼šæ›´æ–°è·Ÿè¿›è®°å½•
  - [x] delete_followup()ï¼šåˆ é™¤è·Ÿè¿›è®°å½•

### é˜¶æ®µäº”ï¼šAPIæ¥å£å¼€å‘ï¼ˆå·²å®Œæˆï¼‰
- [x] å®ç°çº¿ç´¢APIï¼ˆ/api/v1/apps/kuaicrm/leadsï¼‰
  - [x] POST /leadsï¼šåˆ›å»ºçº¿ç´¢
  - [x] GET /leadsï¼šè·å–çº¿ç´¢åˆ—è¡¨
  - [x] GET /leads/{uuid}ï¼šè·å–çº¿ç´¢è¯¦æƒ…
  - [x] PUT /leads/{uuid}ï¼šæ›´æ–°çº¿ç´¢
  - [x] POST /leads/{uuid}/scoreï¼šçº¿ç´¢è¯„åˆ†
  - [x] POST /leads/{uuid}/assignï¼šåˆ†é…çº¿ç´¢
  - [x] POST /leads/{uuid}/convertï¼šè½¬åŒ–çº¿ç´¢
  - [x] DELETE /leads/{uuid}ï¼šåˆ é™¤çº¿ç´¢
- [x] å®ç°å•†æœºAPIï¼ˆ/api/v1/apps/kuaicrm/opportunitiesï¼‰
  - [x] POST /opportunitiesï¼šåˆ›å»ºå•†æœº
  - [x] GET /opportunitiesï¼šè·å–å•†æœºåˆ—è¡¨
  - [x] GET /opportunities/{uuid}ï¼šè·å–å•†æœºè¯¦æƒ…
  - [x] PUT /opportunities/{uuid}ï¼šæ›´æ–°å•†æœº
  - [x] POST /opportunities/{uuid}/calculate-probabilityï¼šè®¡ç®—æˆäº¤æ¦‚ç‡
  - [x] POST /opportunities/{uuid}/change-stageï¼šå˜æ›´å•†æœºé˜¶æ®µ
  - [x] POST /opportunities/{uuid}/convertï¼šè½¬åŒ–å•†æœº
  - [x] DELETE /opportunities/{uuid}ï¼šåˆ é™¤å•†æœº
- [x] å®ç°é”€å”®è®¢å•APIï¼ˆ/api/v1/apps/kuaicrm/sales-ordersï¼‰
  - [x] POST /sales-ordersï¼šåˆ›å»ºè®¢å•
  - [x] GET /sales-ordersï¼šè·å–è®¢å•åˆ—è¡¨
  - [x] GET /sales-orders/{uuid}ï¼šè·å–è®¢å•è¯¦æƒ…
  - [x] PUT /sales-orders/{uuid}ï¼šæ›´æ–°è®¢å•
  - [x] GET /sales-orders/{uuid}/trackingï¼šè®¢å•è·Ÿè¸ª
  - [x] POST /sales-orders/{uuid}/changeï¼šè®¢å•å˜æ›´
  - [x] POST /sales-orders/{uuid}/deliverï¼šè®¢å•äº¤ä»˜
  - [x] POST /sales-orders/{uuid}/submit-approvalï¼šæäº¤è®¢å•å®¡æ‰¹
  - [x] GET /sales-orders/{uuid}/approval-statusï¼šè·å–è®¢å•å®¡æ‰¹çŠ¶æ€
  - [x] POST /sales-orders/{uuid}/cancel-approvalï¼šå–æ¶ˆè®¢å•å®¡æ‰¹
  - [x] DELETE /sales-orders/{uuid}ï¼šåˆ é™¤è®¢å•
- [x] å®ç°æœåŠ¡å·¥å•APIï¼ˆ/api/v1/apps/kuaicrm/service-workordersï¼‰
  - [x] POST /service-workordersï¼šåˆ›å»ºå·¥å•
  - [x] GET /service-workordersï¼šè·å–å·¥å•åˆ—è¡¨
  - [x] GET /service-workorders/{uuid}ï¼šè·å–å·¥å•è¯¦æƒ…
  - [x] PUT /service-workorders/{uuid}/assignï¼šåˆ†é…å·¥å•
  - [x] PUT /service-workorders/{uuid}ï¼šæ›´æ–°å·¥å•
  - [x] POST /service-workorders/{uuid}/closeï¼šå…³é—­å·¥å•
  - [x] DELETE /service-workorders/{uuid}ï¼šåˆ é™¤å·¥å•
- [x] å®ç°ä¿ä¿®ç®¡ç†APIï¼ˆ/api/v1/apps/kuaicrm/warrantiesï¼‰
  - [x] POST /warrantiesï¼šåˆ›å»ºä¿ä¿®
  - [x] GET /warrantiesï¼šè·å–ä¿ä¿®åˆ—è¡¨
  - [x] GET /warranties/{uuid}ï¼šè·å–ä¿ä¿®è¯¦æƒ…
  - [x] PUT /warranties/{uuid}ï¼šæ›´æ–°ä¿ä¿®
  - [x] DELETE /warranties/{uuid}ï¼šåˆ é™¤ä¿ä¿®
- [x] å®ç°æŠ•è¯‰å¤„ç†APIï¼ˆ/api/v1/apps/kuaicrm/complaintsï¼‰
  - [x] POST /complaintsï¼šåˆ›å»ºæŠ•è¯‰
  - [x] GET /complaintsï¼šè·å–æŠ•è¯‰åˆ—è¡¨
  - [x] GET /complaints/{uuid}ï¼šè·å–æŠ•è¯‰è¯¦æƒ…
  - [x] POST /complaints/{uuid}/processï¼šå¤„ç†æŠ•è¯‰
  - [x] PUT /complaints/{uuid}ï¼šæ›´æ–°æŠ•è¯‰
  - [x] DELETE /complaints/{uuid}ï¼šåˆ é™¤æŠ•è¯‰
- [x] å®ç°å®‰è£…è®°å½•APIï¼ˆ/api/v1/apps/kuaicrm/installationsï¼‰
  - [x] POST /installationsï¼šåˆ›å»ºå®‰è£…è®°å½•
  - [x] GET /installationsï¼šè·å–å®‰è£…è®°å½•åˆ—è¡¨
  - [x] GET /installations/{uuid}ï¼šè·å–å®‰è£…è®°å½•è¯¦æƒ…
  - [x] PUT /installations/{uuid}ï¼šæ›´æ–°å®‰è£…è®°å½•
  - [x] DELETE /installations/{uuid}ï¼šåˆ é™¤å®‰è£…è®°å½•
- [x] å®ç°æœåŠ¡åˆåŒAPIï¼ˆ/api/v1/apps/kuaicrm/service-contractsï¼‰
  - [x] POST /service-contractsï¼šåˆ›å»ºåˆåŒ
  - [x] GET /service-contractsï¼šè·å–åˆåŒåˆ—è¡¨
  - [x] GET /service-contracts/{uuid}ï¼šè·å–åˆåŒè¯¦æƒ…
  - [x] PUT /service-contracts/{uuid}ï¼šæ›´æ–°åˆåŒ
  - [x] DELETE /service-contracts/{uuid}ï¼šåˆ é™¤åˆåŒ
- [x] å®ç°é”€å”®æ¼æ–—APIï¼ˆ/api/v1/apps/kuaicrm/funnelï¼‰
  - [x] GET /funnel/viewï¼šè·å–æ¼æ–—è§†å›¾
  - [x] GET /funnel/stages/{stage}ï¼šåˆ†æé˜¶æ®µæ•°æ®
  - [x] GET /funnel/conversionï¼šè®¡ç®—è½¬åŒ–ç‡
  - [x] GET /funnel/forecastï¼šé”€å”®é¢„æµ‹
  - [x] GET /funnel/bottleneckï¼šåˆ†æç“¶é¢ˆé˜¶æ®µ
- [x] å®ç°çº¿ç´¢è·Ÿè¿›è®°å½•APIï¼ˆ/api/v1/apps/kuaicrm/lead-followupsï¼‰
  - [x] POST /lead-followupsï¼šåˆ›å»ºè·Ÿè¿›è®°å½•
  - [x] GET /lead-followupsï¼šè·å–è·Ÿè¿›è®°å½•åˆ—è¡¨
  - [x] GET /lead-followups/{uuid}ï¼šè·å–è·Ÿè¿›è®°å½•è¯¦æƒ…
  - [x] PUT /lead-followups/{uuid}ï¼šæ›´æ–°è·Ÿè¿›è®°å½•
  - [x] DELETE /lead-followups/{uuid}ï¼šåˆ é™¤è·Ÿè¿›è®°å½•
- [x] å®ç°å•†æœºè·Ÿè¿›è®°å½•APIï¼ˆ/api/v1/apps/kuaicrm/opportunity-followupsï¼‰
  - [x] POST /opportunity-followupsï¼šåˆ›å»ºè·Ÿè¿›è®°å½•
  - [x] GET /opportunity-followupsï¼šè·å–è·Ÿè¿›è®°å½•åˆ—è¡¨
  - [x] GET /opportunity-followups/{uuid}ï¼šè·å–è·Ÿè¿›è®°å½•è¯¦æƒ…
  - [x] PUT /opportunity-followups/{uuid}ï¼šæ›´æ–°è·Ÿè¿›è®°å½•
  - [x] DELETE /opportunity-followups/{uuid}ï¼šåˆ é™¤è·Ÿè¿›è®°å½•

## ğŸš§ å®¡æ‰¹æ¨¡å—å®Œå–„ï¼ˆå·²å®Œæˆï¼‰

### å®¡æ‰¹æ¨¡å—åŠŸèƒ½å®Œå–„
- [x] å®Œå–„å®¡æ‰¹èŠ‚ç‚¹æµè½¬é€»è¾‘ï¼ˆå®ç°å¤šèŠ‚ç‚¹æµè½¬ã€è‡ªåŠ¨è·å–ä¸‹ä¸€èŠ‚ç‚¹å®¡æ‰¹äººï¼‰
- [x] åˆ›å»ºå®¡æ‰¹å†å²è®°å½•æ¨¡å‹ï¼ˆApprovalHistoryï¼‰
- [x] åˆ›å»ºå®¡æ‰¹å†å²è®°å½•Schemaå’ŒService
- [x] åˆ›å»ºå®¡æ‰¹å†å²è®°å½•APIï¼ˆ/api/v1/system/approval-instances/approval-historiesï¼‰
- [x] å®ç°å®¡æ‰¹å®Œæˆå›è°ƒæœºåˆ¶ï¼ˆè‡ªåŠ¨æ›´æ–°è®¢å•çŠ¶æ€ï¼‰
- [x] å®Œå–„å®¡æ‰¹æ“ä½œé€»è¾‘ï¼ˆæ”¯æŒå¤šèŠ‚ç‚¹æµè½¬ï¼‰

### è®¢å•å®¡æ‰¹æµç¨‹é›†æˆ
- [x] åœ¨SalesOrderæ¨¡å‹ä¸­æ·»åŠ å®¡æ‰¹ç›¸å…³å­—æ®µï¼ˆapproval_instance_id, approval_statusï¼‰
- [x] å®ç°æäº¤è®¢å•å®¡æ‰¹åŠŸèƒ½ï¼ˆsubmit_for_approvalï¼‰
- [x] å®ç°æŸ¥è¯¢è®¢å•å®¡æ‰¹çŠ¶æ€åŠŸèƒ½ï¼ˆget_approval_statusï¼‰
- [x] å®ç°å–æ¶ˆè®¢å•å®¡æ‰¹åŠŸèƒ½ï¼ˆcancel_approvalï¼‰
- [x] å®ç°å®¡æ‰¹å®Œæˆè‡ªåŠ¨å›è°ƒï¼ˆå®¡æ‰¹é€šè¿‡/æ‹’ç»åè‡ªåŠ¨æ›´æ–°è®¢å•çŠ¶æ€ï¼‰
- [x] åˆ›å»ºè®¢å•å®¡æ‰¹ç›¸å…³APIæ¥å£

## ğŸš§ è¿›è¡Œä¸­å·¥ä½œ

### æ•°æ®åº“è¿ç§»ï¼ˆå·²å®Œæˆï¼‰
- [x] åˆ›å»ºæ•°æ®åº“è¿ç§»æ–‡ä»¶ï¼ˆAerichï¼‰
  - [x] è¿ç§»æ–‡ä»¶1ï¼š`42_20251215112102_create_crm_models.py`
    - [x] åˆ›å»º8ä¸ªCRMæ ¸å¿ƒæ•°æ®è¡¨ï¼ˆçº¿ç´¢ã€å•†æœºã€é”€å”®è®¢å•ã€æœåŠ¡å·¥å•ã€ä¿ä¿®ã€æŠ•è¯‰ã€å®‰è£…è®°å½•ã€æœåŠ¡åˆåŒï¼‰
  - [x] è¿ç§»æ–‡ä»¶2ï¼š`43_20251215113624_create_crm_models.py`
    - [x] åˆ›å»º2ä¸ªCRMè·Ÿè¿›è®°å½•è¡¨ï¼ˆçº¿ç´¢è·Ÿè¿›è®°å½•ã€å•†æœºè·Ÿè¿›è®°å½•ï¼‰
  - [x] è¿ç§»æ–‡ä»¶3ï¼š`44_20251215114247_create_crm_models.py`
    - [x] åˆ›å»ºå®¡æ‰¹å†å²è®°å½•è¡¨ï¼ˆcore_approval_historiesï¼‰
    - [x] ä¸ºé”€å”®è®¢å•è¡¨æ·»åŠ å®¡æ‰¹ç›¸å…³å­—æ®µï¼ˆapproval_instance_id, approval_statusï¼‰
- [x] æ‰§è¡Œæ•°æ®åº“è¿ç§»
- [x] éªŒè¯æ•°æ®è¡¨åˆ›å»ºæˆåŠŸ
- [x] æ€»è®¡åˆ›å»º11ä¸ªCRMç›¸å…³æ•°æ®è¡¨ï¼ˆ10ä¸ªCRMè¡¨ + 1ä¸ªå®¡æ‰¹å†å²è¡¨ï¼‰

## ğŸ“‹ å¾…å®Œæˆå·¥ä½œ

### é˜¶æ®µä¸‰ï¼šä¸šåŠ¡é€»è¾‘å®ç°ï¼ˆå·²å®Œæˆï¼‰
- [x] å®ç°çº¿ç´¢è¯„åˆ†åŠŸèƒ½ï¼ˆå·²å®Œå–„ï¼Œè€ƒè™‘è·Ÿè¿›æ¬¡æ•°ã€è”ç³»ä¿¡æ¯å®Œæ•´åº¦ã€åˆ†é…çŠ¶æ€ç­‰å› ç´ ï¼‰
- [x] å®ç°çº¿ç´¢è½¬åŒ–åŠŸèƒ½ï¼ˆåŸºç¡€ç‰ˆæœ¬ï¼‰
- [x] å®ç°å•†æœºé˜¶æ®µç®¡ç†ï¼ˆåŸºç¡€ç‰ˆæœ¬ï¼‰
- [x] å®ç°å•†æœºè½¬åŒ–åŠŸèƒ½ï¼ˆåŸºç¡€ç‰ˆæœ¬ï¼‰
- [x] å®ç°è®¢å•å˜æ›´åŠŸèƒ½ï¼ˆåŸºç¡€ç‰ˆæœ¬ï¼‰
- [x] å®ç°è®¢å•äº¤ä»˜åŠŸèƒ½ï¼ˆåŸºç¡€ç‰ˆæœ¬ï¼‰
- [x] å®ç°è®¢å•è·Ÿè¸ªåŠŸèƒ½ï¼ˆåŸºç¡€ç‰ˆæœ¬ï¼‰
- [x] å®ç°çº¿ç´¢è·Ÿè¿›è®°å½•åŠŸèƒ½ï¼ˆå·²åˆ›å»ºè·Ÿè¿›è®°å½•è¡¨å’Œå®Œæ•´æœåŠ¡ï¼‰
- [x] å®ç°å•†æœºè·Ÿè¿›è®°å½•åŠŸèƒ½ï¼ˆå·²åˆ›å»ºè·Ÿè¿›è®°å½•è¡¨å’Œå®Œæ•´æœåŠ¡ï¼‰
- [x] å®ç°è®¢å•å®¡æ‰¹æµç¨‹ï¼ˆå·²ä¸å®¡æ‰¹æ¨¡å—é›†æˆï¼ŒåŒ…å«æäº¤å®¡æ‰¹ã€æŸ¥è¯¢çŠ¶æ€ã€å–æ¶ˆå®¡æ‰¹ã€å®¡æ‰¹å›è°ƒï¼‰
- [x] å®Œå–„çº¿ç´¢è¯„åˆ†ç®—æ³•ï¼ˆå·²è€ƒè™‘è·Ÿè¿›æ¬¡æ•°ã€è”ç³»ä¿¡æ¯å®Œæ•´åº¦ã€åˆ†é…çŠ¶æ€ã€çŠ¶æ€ç­‰å› ç´ ï¼‰
- [x] å®Œå–„å•†æœºæˆäº¤æ¦‚ç‡ç®—æ³•ï¼ˆå·²è€ƒè™‘è·Ÿè¿›æ¬¡æ•°ã€å•†æœºé‡‘é¢ã€é¢„è®¡æˆäº¤æ—¥æœŸã€è´Ÿè´£äººã€æ¥æºç­‰å› ç´ ï¼‰

### é˜¶æ®µå››ï¼šAPIæ¥å£å¼€å‘ï¼ˆå¾…å®Œå–„ï¼‰
- [x] å®ç°çº¿ç´¢è¯„åˆ†API
- [x] å®ç°çº¿ç´¢è½¬åŒ–API
- [x] å®ç°å•†æœºé˜¶æ®µç®¡ç†API
- [x] å®ç°å•†æœºè½¬åŒ–API
- [x] å®ç°è®¢å•å˜æ›´API
- [x] å®ç°è®¢å•äº¤ä»˜API
- [x] å®ç°è®¢å•è·Ÿè¸ªAPI
- [x] å®ç°é”€å”®æ¼æ–—API
- [x] å®ç°çº¿ç´¢è·Ÿè¿›è®°å½•APIï¼ˆå·²å®Œæˆï¼ŒåŒ…å«CRUDå’Œåˆ—è¡¨æŸ¥è¯¢ï¼‰
- [x] å®ç°å•†æœºè·Ÿè¿›è®°å½•APIï¼ˆå·²å®Œæˆï¼ŒåŒ…å«CRUDå’Œåˆ—è¡¨æŸ¥è¯¢ï¼‰
- [x] å®ç°è®¢å•å®¡æ‰¹APIï¼ˆå·²å®Œæˆï¼ŒåŒ…å«æäº¤å®¡æ‰¹ã€æŸ¥è¯¢å®¡æ‰¹çŠ¶æ€ã€å–æ¶ˆå®¡æ‰¹ï¼‰

### é˜¶æ®µäº”ï¼šå‰ç«¯é¡µé¢å¼€å‘ï¼ˆå·²å®Œæˆï¼‰
- [x] åˆ›å»ºå‰ç«¯åº”ç”¨å…¥å£æ–‡ä»¶ï¼ˆsrc/apps/kuaicrm/index.tsxï¼‰
- [x] åˆ›å»ºCRMæœåŠ¡æ–‡ä»¶ï¼ˆservices/process.tsï¼‰
- [x] åˆ›å»ºCRMç±»å‹å®šä¹‰æ–‡ä»¶ï¼ˆtypes/process.tsï¼‰
- [x] å®ç°çº¿ç´¢ç®¡ç†é¡µé¢ï¼ˆpages/leads/index.tsxï¼‰
- [x] å®ç°å•†æœºç®¡ç†é¡µé¢ï¼ˆpages/opportunities/index.tsxï¼‰
- [x] å®ç°é”€å”®æ¼æ–—é¡µé¢ï¼ˆpages/funnel/index.tsxï¼‰
- [x] å®ç°è®¢å•ç®¡ç†é¡µé¢ï¼ˆpages/sales-orders/index.tsxï¼ŒåŒ…å«å®¡æ‰¹åŠŸèƒ½ï¼‰
- [x] å®ç°å®¢æˆ·æœåŠ¡é¡µé¢ï¼ˆpages/service/index.tsxï¼‰
- [x] å®ç°é”€å”®åˆ†æé¡µé¢ï¼ˆpages/analysis/index.tsxï¼‰

### é˜¶æ®µå…­ï¼šé›†æˆæµ‹è¯•ï¼ˆå¾…å¼€å§‹ï¼‰
- [ ] å•å…ƒæµ‹è¯•
- [ ] é›†æˆæµ‹è¯•
- [ ] ç«¯åˆ°ç«¯æµ‹è¯•

### é˜¶æ®µä¸ƒï¼šç§»åŠ¨ç«¯æ”¯æŒï¼ˆå¾…å¼€å§‹ï¼‰
- [ ] ç§»åŠ¨ç«¯é¡µé¢å¼€å‘
- [ ] ç§»åŠ¨ç«¯APIé€‚é…

## ğŸ“ æ–‡ä»¶æ¸…å•

### å·²åˆ›å»ºæ–‡ä»¶
- `riveredge-backend/src/apps/kuaicrm/__init__.py`
- `riveredge-backend/src/apps/kuaicrm/manifest.json`
- `riveredge-backend/src/apps/kuaicrm/models/__init__.py`
- `riveredge-backend/src/apps/kuaicrm/models/lead.py`
- `riveredge-backend/src/apps/kuaicrm/models/opportunity.py`
- `riveredge-backend/src/apps/kuaicrm/models/sales_order.py`
- `riveredge-backend/src/apps/kuaicrm/models/service_workorder.py`
- `riveredge-backend/src/apps/kuaicrm/models/warranty.py`
- `riveredge-backend/src/apps/kuaicrm/models/complaint.py`
- `riveredge-backend/src/apps/kuaicrm/models/installation.py`
- `riveredge-backend/src/apps/kuaicrm/models/service_contract.py`
- `riveredge-backend/src/apps/kuaicrm/models/lead_followup.py`
- `riveredge-backend/src/apps/kuaicrm/models/opportunity_followup.py`
- `riveredge-backend/src/apps/kuaicrm/schemas/__init__.py`
- `riveredge-backend/src/apps/kuaicrm/schemas/lead_schemas.py`
- `riveredge-backend/src/apps/kuaicrm/schemas/opportunity_schemas.py`
- `riveredge-backend/src/apps/kuaicrm/schemas/sales_order_schemas.py`
- `riveredge-backend/src/apps/kuaicrm/services/__init__.py`
- `riveredge-backend/src/apps/kuaicrm/services/lead_service.py`
- `riveredge-backend/src/apps/kuaicrm/services/opportunity_service.py`
- `riveredge-backend/src/apps/kuaicrm/services/sales_order_service.py`
- `riveredge-backend/src/apps/kuaicrm/services/service_workorder_service.py`
- `riveredge-backend/src/apps/kuaicrm/services/warranty_service.py`
- `riveredge-backend/src/apps/kuaicrm/services/complaint_service.py`
- `riveredge-backend/src/apps/kuaicrm/services/installation_service.py`
- `riveredge-backend/src/apps/kuaicrm/services/service_contract_service.py`
- `riveredge-backend/src/apps/kuaicrm/services/sales_funnel_service.py`
- `riveredge-backend/src/apps/kuaicrm/services/lead_followup_service.py`
- `riveredge-backend/src/apps/kuaicrm/services/opportunity_followup_service.py`
- `riveredge-backend/src/apps/kuaicrm/api/__init__.py`
- `riveredge-backend/src/apps/kuaicrm/api/router.py`
- `riveredge-backend/src/apps/kuaicrm/api/leads.py`
- `riveredge-backend/src/apps/kuaicrm/api/opportunities.py`
- `riveredge-backend/src/apps/kuaicrm/api/sales_orders.py`
- `riveredge-backend/src/apps/kuaicrm/api/service_workorders.py`
- `riveredge-backend/src/apps/kuaicrm/api/warranties.py`
- `riveredge-backend/src/apps/kuaicrm/api/complaints.py`
- `riveredge-backend/src/apps/kuaicrm/api/installations.py`
- `riveredge-backend/src/apps/kuaicrm/api/service_contracts.py`
- `riveredge-backend/src/apps/kuaicrm/api/funnel.py`
- `riveredge-backend/src/apps/kuaicrm/api/lead_followups.py`
- `riveredge-backend/src/apps/kuaicrm/api/opportunity_followups.py`
- `riveredge-backend/src/core/models/approval_history.py`
- `riveredge-backend/src/core/schemas/approval_history.py`
- `riveredge-backend/src/core/services/approval_history_service.py`
- `riveredge-backend/src/core/api/approval_processes/approval_histories.py`
- `riveredge-backend/scripts/create_crm_migration.py`
- `riveredge-backend/scripts/apply_crm_migration.py`
- `riveredge-backend/migrations/models/42_20251215112102_create_crm_models.py`
- `riveredge-backend/migrations/models/43_20251215113624_create_crm_models.py`
- `riveredge-backend/migrations/models/44_20251215114247_create_crm_models.py`
- `riveredge-frontend/src/apps/kuaicrm/index.tsx`
- `riveredge-frontend/src/apps/kuaicrm/services/process.ts`
- `riveredge-frontend/src/apps/kuaicrm/types/process.ts`
- `riveredge-frontend/src/apps/kuaicrm/pages/leads/index.tsx`
- `riveredge-frontend/src/apps/kuaicrm/pages/opportunities/index.tsx`
- `riveredge-frontend/src/apps/kuaicrm/pages/funnel/index.tsx`
- `riveredge-frontend/src/apps/kuaicrm/pages/sales-orders/index.tsx`
- `riveredge-frontend/src/apps/kuaicrm/pages/service/index.tsx`
- `riveredge-frontend/src/apps/kuaicrm/pages/analysis/index.tsx`

### å·²æ›´æ–°æ–‡ä»¶
- `riveredge-backend/src/server/main.py`ï¼ˆæ·»åŠ CRMè·¯ç”±æ³¨å†Œï¼‰
- `riveredge-backend/src/infra/infrastructure/database/database.py`ï¼ˆæ·»åŠ CRMæ¨¡å‹å’Œå®¡æ‰¹å†å²æ¨¡å‹æ³¨å†Œï¼‰
- `riveredge-backend/src/core/services/approval_instance_service.py`ï¼ˆå®Œå–„èŠ‚ç‚¹æµè½¬é€»è¾‘ï¼Œæ·»åŠ å®¡æ‰¹å†å²è®°å½•ï¼Œæ·»åŠ å®¡æ‰¹å®Œæˆå›è°ƒï¼‰
- `riveredge-backend/src/core/api/approval_processes/__init__.py`ï¼ˆæ³¨å†Œå®¡æ‰¹å†å²è®°å½•APIï¼‰
- `riveredge-backend/src/apps/kuaicrm/models/sales_order.py`ï¼ˆæ·»åŠ å®¡æ‰¹ç›¸å…³å­—æ®µï¼‰
- `riveredge-backend/src/apps/kuaicrm/schemas/sales_order_schemas.py`ï¼ˆæ·»åŠ å®¡æ‰¹å­—æ®µåˆ°å“åº”Schemaï¼‰

## ğŸ¯ ä¸‹ä¸€æ­¥å·¥ä½œ

1. **å®Œå–„é«˜çº§åŠŸèƒ½**ï¼ˆå·²å®Œæˆï¼‰
   - [x] å®ç°çº¿ç´¢è·Ÿè¿›è®°å½•åŠŸèƒ½ï¼ˆå·²å®Œæˆï¼‰
   - [x] å®ç°å•†æœºè·Ÿè¿›è®°å½•åŠŸèƒ½ï¼ˆå·²å®Œæˆï¼‰
   - [x] å®ç°è®¢å•å®¡æ‰¹æµç¨‹ï¼ˆå·²å®Œæˆï¼Œå·²ä¸å®¡æ‰¹æ¨¡å—é›†æˆï¼‰
   - [x] å®Œå–„çº¿ç´¢è¯„åˆ†ç®—æ³•ï¼ˆå·²å®Œæˆï¼Œè€ƒè™‘è·Ÿè¿›æ¬¡æ•°ã€è”ç³»ä¿¡æ¯å®Œæ•´åº¦ã€åˆ†é…çŠ¶æ€ç­‰å› ç´ ï¼‰
   - [x] å®Œå–„å•†æœºæˆäº¤æ¦‚ç‡ç®—æ³•ï¼ˆå·²å®Œæˆï¼Œè€ƒè™‘è·Ÿè¿›æ¬¡æ•°ã€å•†æœºé‡‘é¢ã€é¢„è®¡æˆäº¤æ—¥æœŸç­‰å› ç´ ï¼‰
   - [x] å®Œå–„å®¡æ‰¹æ¨¡å—èŠ‚ç‚¹æµè½¬é€»è¾‘ï¼ˆå·²å®Œæˆï¼‰
   - [x] åˆ›å»ºå®¡æ‰¹å†å²è®°å½•åŠŸèƒ½ï¼ˆå·²å®Œæˆï¼‰

2. **å‰ç«¯å¼€å‘**ï¼ˆå·²å®Œæˆï¼‰
   - [x] åˆ›å»ºå‰ç«¯åº”ç”¨ç»“æ„
   - [x] å®ç°çº¿ç´¢ç®¡ç†é¡µé¢ï¼ˆåŒ…å«è¯„åˆ†ã€åˆ†é…ã€è½¬åŒ–åŠŸèƒ½ï¼‰
   - [x] å®ç°å•†æœºç®¡ç†é¡µé¢ï¼ˆåŒ…å«é˜¶æ®µç®¡ç†ã€æ¦‚ç‡è®¡ç®—ã€è½¬åŒ–åŠŸèƒ½ï¼‰
   - [x] å®ç°é”€å”®æ¼æ–—é¡µé¢ï¼ˆåŒ…å«æ¼æ–—è§†å›¾ã€ç»Ÿè®¡æ•°æ®ï¼‰
   - [x] å®ç°è®¢å•ç®¡ç†é¡µé¢ï¼ˆåŒ…å«å®¡æ‰¹åŠŸèƒ½ã€å®¡æ‰¹çŠ¶æ€æŸ¥çœ‹ï¼‰
   - [x] å®ç°å®¢æˆ·æœåŠ¡é¡µé¢ï¼ˆåŸºç¡€æ¡†æ¶ï¼‰
   - [x] å®ç°é”€å”®åˆ†æé¡µé¢ï¼ˆåŸºç¡€æ¡†æ¶ï¼‰

3. **é›†æˆæµ‹è¯•**
   - å•å…ƒæµ‹è¯•
   - é›†æˆæµ‹è¯•
   - ç«¯åˆ°ç«¯æµ‹è¯•

4. **ç§»åŠ¨ç«¯æ”¯æŒ**
   - ç§»åŠ¨ç«¯é¡µé¢å¼€å‘
   - ç§»åŠ¨ç«¯APIé€‚é…

---

**æ›´æ–°æ—¥æœŸ**ï¼š2024-12-15
**å½“å‰è¿›åº¦**ï¼šçº¦98%ï¼ˆåŸºç¡€ç»“æ„ã€æ ¸å¿ƒåŠŸèƒ½ã€æ•°æ®åº“è¿ç§»ã€é«˜çº§åŠŸèƒ½å’Œå‰ç«¯é¡µé¢å…¨éƒ¨å®Œæˆï¼Œæ‰€æœ‰æ•°æ®è¡¨å·²åˆ›å»ºï¼Œè®¢å•å®¡æ‰¹æµç¨‹å·²é›†æˆï¼‰

## ğŸ“Š å®Œæˆåº¦ç»Ÿè®¡

- **æ•°æ®æ¨¡å‹**ï¼š10/10 (100%)
- **æ•°æ®éªŒè¯Schema**ï¼š10/10 (100%)
- **ä¸šåŠ¡æœåŠ¡**ï¼š11/11 (100%)
- **APIæ¥å£**ï¼š10/10 (100%)
- **é«˜çº§åŠŸèƒ½**ï¼š10/10 (100%)
- **å‰ç«¯é¡µé¢**ï¼š6/6 (100%)
- **é›†æˆæµ‹è¯•**ï¼š0/4 (0%)
- **ç§»åŠ¨ç«¯æ”¯æŒ**ï¼š0/4 (0%)

## ğŸ¯ ä¸‹ä¸€æ­¥é‡ç‚¹

1. **é›†æˆæµ‹è¯•**ï¼ˆå•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•ã€ç«¯åˆ°ç«¯æµ‹è¯•ï¼‰
2. **ç§»åŠ¨ç«¯æ”¯æŒ**ï¼ˆç§»åŠ¨ç«¯é¡µé¢å¼€å‘ã€ç§»åŠ¨ç«¯APIé€‚é…ï¼‰
3. **åŠŸèƒ½å®Œå–„**ï¼ˆå®¢æˆ·æœåŠ¡è¯¦ç»†åŠŸèƒ½ã€é”€å”®åˆ†æå›¾è¡¨ç­‰ï¼‰
