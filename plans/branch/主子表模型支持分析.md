# RiverEdge SaaS å¤šç»„ç»‡æ¡†æ¶ - ä¸»å­è¡¨æ¨¡å‹å®˜æ–¹åŸç”Ÿæ”¯æŒåˆ†æ

## ğŸ“‹ æ¦‚è¿°

æœ¬æ–‡æ¡£åˆ†æ **RiverEdge SaaS å¤šç»„ç»‡æ¡†æ¶ (RiverEdge SaaS Multi-tenant Framework)** å½“å‰æŠ€æœ¯é€‰å‹å¯¹**ä¸»å­è¡¨æ¨¡å‹**çš„å®˜æ–¹åŸç”Ÿæ”¯æŒæƒ…å†µã€‚

## ğŸ¯ ä¸»å­è¡¨æ¨¡å‹å®šä¹‰

ä¸»å­è¡¨æ¨¡å‹æ˜¯æŒ‡ä¸€å¯¹å¤šå…³ç³»çš„æ•°æ®æ¨¡å‹ï¼Œä¾‹å¦‚ï¼š
- **è®¢å•ï¼ˆä¸»è¡¨ï¼‰** â† **è®¢å•æ˜ç»†ï¼ˆå­è¡¨ï¼‰**
- **ç”Ÿäº§è®¡åˆ’ï¼ˆä¸»è¡¨ï¼‰** â† **ç”Ÿäº§ä»»åŠ¡ï¼ˆå­è¡¨ï¼‰**
- **BOMï¼ˆä¸»è¡¨ï¼‰** â† **BOM æ˜ç»†ï¼ˆå­è¡¨ï¼‰**

## ğŸ”§ åç«¯æ”¯æŒåˆ†æ

### Tortoise ORM - âœ… å®˜æ–¹åŸç”Ÿæ”¯æŒ

**Tortoise ORM å®Œå…¨æ”¯æŒä¸»å­è¡¨æ¨¡å‹**ï¼Œé€šè¿‡ä»¥ä¸‹æ–¹å¼å®ç°ï¼š

#### 1. å…³ç³»å®šä¹‰

```python
# models/order.py
from tortoise.models import Model
from tortoise import fields

class Order(BaseModel):
    """è®¢å•ä¸»è¡¨"""
    id = fields.IntField(pk=True)
    tenant_id = fields.IntField()
    order_no = fields.CharField(max_length=50, unique=True)
    customer_name = fields.CharField(max_length=100)
    total_amount = fields.DecimalField(max_digits=10, decimal_places=2)
    created_at = fields.DatetimeField(auto_now_add=True)
    updated_at = fields.DatetimeField(auto_now=True)
    
    # ä¸€å¯¹å¤šå…³ç³»ï¼šä¸€ä¸ªè®¢å•æœ‰å¤šä¸ªè®¢å•æ˜ç»†
    items: fields.ReverseRelation["OrderItem"]
    
    class Meta:
        table = "orders"

class OrderItem(BaseModel):
    """è®¢å•æ˜ç»†è¡¨ï¼ˆå­è¡¨ï¼‰"""
    id = fields.IntField(pk=True)
    tenant_id = fields.IntField()
    order_id = fields.ForeignKeyField(
        'models.Order', 
        related_name='items',  # åå‘å…³ç³»åç§°
        on_delete=fields.CASCADE  # çº§è”åˆ é™¤
    )
    product_id = fields.IntField()
    product_name = fields.CharField(max_length=100)
    quantity = fields.IntField()
    price = fields.DecimalField(max_digits=10, decimal_places=2)
    amount = fields.DecimalField(max_digits=10, decimal_places=2)
    created_at = fields.DatetimeField(auto_now_add=True)
    updated_at = fields.DatetimeField(auto_now=True)
    
    class Meta:
        table = "order_items"
        indexes = [("order_id", "product_id")]  # å¤åˆç´¢å¼•
```

#### 2. æŸ¥è¯¢æ”¯æŒ

```python
# æŸ¥è¯¢è®¢å•åŠå…¶æ˜ç»†ï¼ˆé¢„åŠ è½½ï¼‰
order = await Order.get(id=1).prefetch_related('items')

# è®¿é—®å­è¡¨æ•°æ®
for item in order.items:
    print(item.product_name, item.quantity)

# é€šè¿‡å­è¡¨æŸ¥è¯¢ä¸»è¡¨
item = await OrderItem.get(id=1)
order = await item.order  # è®¿é—®ä¸»è¡¨

# åˆ›å»ºä¸»å­è¡¨æ•°æ®
order = await Order.create(
    order_no="ORD001",
    customer_name="å®¢æˆ·A",
    total_amount=1000.00
)

# åˆ›å»ºå­è¡¨æ•°æ®
item1 = await OrderItem.create(
    order_id=order.id,
    product_id=1,
    product_name="äº§å“A",
    quantity=10,
    price=100.00,
    amount=1000.00
)
```

#### 3. äº‹åŠ¡æ”¯æŒ

```python
from tortoise.transactions import in_transaction

# äº‹åŠ¡ä¸­åˆ›å»ºä¸»å­è¡¨æ•°æ®
async with in_transaction() as connection:
    order = await Order.create(
        order_no="ORD001",
        customer_name="å®¢æˆ·A",
        total_amount=1000.00,
        using_db=connection
    )
    
    await OrderItem.create(
        order_id=order.id,
        product_id=1,
        product_name="äº§å“A",
        quantity=10,
        price=100.00,
        amount=1000.00,
        using_db=connection
    )
```

#### 4. çº§è”æ“ä½œ

```python
# Tortoise ORM æ”¯æŒçº§è”åˆ é™¤
# å½“åˆ é™¤ä¸»è¡¨è®°å½•æ—¶ï¼Œè‡ªåŠ¨åˆ é™¤å­è¡¨è®°å½•ï¼ˆå¦‚æœè®¾ç½®äº† on_delete=CASCADEï¼‰

# åˆ é™¤è®¢å•ï¼ˆè‡ªåŠ¨åˆ é™¤æ‰€æœ‰è®¢å•æ˜ç»†ï¼‰
await order.delete()  # ä¼šè‡ªåŠ¨åˆ é™¤æ‰€æœ‰å…³è”çš„ OrderItem
```

#### 5. èšåˆæŸ¥è¯¢

```python
# ç»Ÿè®¡è®¢å•æ˜ç»†æ•°é‡
from tortoise.functions import Count

orders = await Order.annotate(
    item_count=Count('items')
).all()

for order in orders:
    print(f"è®¢å• {order.order_no} æœ‰ {order.item_count} ä¸ªæ˜ç»†")
```

**æ€»ç»“**ï¼šâœ… **Tortoise ORM å®Œå…¨æ”¯æŒä¸»å­è¡¨æ¨¡å‹**ï¼Œæä¾›ï¼š
- ForeignKey å…³ç³»å®šä¹‰
- åå‘å…³ç³»ï¼ˆReverseRelationï¼‰
- é¢„åŠ è½½ï¼ˆprefetch_relatedï¼‰
- çº§è”æ“ä½œï¼ˆCASCADEï¼‰
- äº‹åŠ¡æ”¯æŒ
- èšåˆæŸ¥è¯¢

---

### Pydantic v2 - âœ… å®˜æ–¹åŸç”Ÿæ”¯æŒ

**Pydantic v2 å®Œå…¨æ”¯æŒåµŒå¥—æ¨¡å‹**ï¼Œå¯ä»¥å®šä¹‰ä¸»å­è¡¨çš„ Schemaï¼š

#### 1. åµŒå¥— Schema å®šä¹‰

```python
# schemas/order.py
from pydantic import BaseModel, Field
from typing import List, Optional
from decimal import Decimal

class OrderItemCreate(BaseModel):
    """è®¢å•æ˜ç»†åˆ›å»º Schema"""
    product_id: int
    product_name: str = Field(..., max_length=100)
    quantity: int = Field(..., gt=0)
    price: Decimal = Field(..., gt=0)
    amount: Decimal

class OrderItemResponse(BaseModel):
    """è®¢å•æ˜ç»†å“åº” Schema"""
    id: int
    product_id: int
    product_name: str
    quantity: int
    price: Decimal
    amount: Decimal
    
    class Config:
        from_attributes = True

class OrderCreate(BaseModel):
    """è®¢å•åˆ›å»º Schemaï¼ˆåŒ…å«å­è¡¨ï¼‰"""
    order_no: str = Field(..., max_length=50)
    customer_name: str = Field(..., max_length=100)
    total_amount: Decimal
    items: List[OrderItemCreate] = Field(..., min_items=1)  # å­è¡¨åˆ—è¡¨

class OrderResponse(BaseModel):
    """è®¢å•å“åº” Schemaï¼ˆåŒ…å«å­è¡¨ï¼‰"""
    id: int
    order_no: str
    customer_name: str
    total_amount: Decimal
    items: List[OrderItemResponse]  # å­è¡¨åˆ—è¡¨
    created_at: datetime
    updated_at: datetime
    
    class Config:
        from_attributes = True
```

#### 2. æ•°æ®éªŒè¯

```python
# Pydantic è‡ªåŠ¨éªŒè¯åµŒå¥—æ•°æ®
order_data = {
    "order_no": "ORD001",
    "customer_name": "å®¢æˆ·A",
    "total_amount": 1000.00,
    "items": [
        {
            "product_id": 1,
            "product_name": "äº§å“A",
            "quantity": 10,
            "price": 100.00,
            "amount": 1000.00
        },
        {
            "product_id": 2,
            "product_name": "äº§å“B",
            "quantity": 5,
            "price": 200.00,
            "amount": 1000.00
        }
    ]
}

# è‡ªåŠ¨éªŒè¯åµŒå¥—ç»“æ„
order = OrderCreate(**order_data)
```

**æ€»ç»“**ï¼šâœ… **Pydantic v2 å®Œå…¨æ”¯æŒåµŒå¥—æ¨¡å‹**ï¼Œæä¾›ï¼š
- åµŒå¥— Schema å®šä¹‰
- è‡ªåŠ¨æ•°æ®éªŒè¯
- ç±»å‹å®‰å…¨
- æ•°æ®è½¬æ¢

---

### FastAPI - âœ… å®˜æ–¹åŸç”Ÿæ”¯æŒ

**FastAPI å®Œå…¨æ”¯æŒåµŒå¥—æ¨¡å‹**ï¼Œå¯ä»¥æ¥æ”¶å’Œè¿”å›ä¸»å­è¡¨æ•°æ®ï¼š

#### 1. API å®šä¹‰

```python
# api/v1/orders.py
from fastapi import APIRouter, Depends
from schemas.order import OrderCreate, OrderResponse
from services.order_service import OrderService

router = APIRouter(prefix="/api/v1/orders", tags=["è®¢å•"])

@router.post("", response_model=OrderResponse)
async def create_order(
    order: OrderCreate,  # è‡ªåŠ¨æ¥æ”¶åµŒå¥—çš„ä¸»å­è¡¨æ•°æ®
    current_user = Depends(get_current_user)
):
    """åˆ›å»ºè®¢å•ï¼ˆåŒ…å«è®¢å•æ˜ç»†ï¼‰"""
    return await OrderService.create_order_with_items(order)

@router.get("/{id}", response_model=OrderResponse)
async def get_order(id: int):
    """è·å–è®¢å•ï¼ˆåŒ…å«è®¢å•æ˜ç»†ï¼‰"""
    return await OrderService.get_order_with_items(id)
```

**æ€»ç»“**ï¼šâœ… **FastAPI å®Œå…¨æ”¯æŒåµŒå¥—æ¨¡å‹**ï¼Œæä¾›ï¼š
- è‡ªåŠ¨æ¥æ”¶åµŒå¥—æ•°æ®
- è‡ªåŠ¨éªŒè¯åµŒå¥—ç»“æ„
- è‡ªåŠ¨ç”Ÿæˆ API æ–‡æ¡£

---

## ğŸ¨ å‰ç«¯æ”¯æŒåˆ†æ

### Ant Design Pro Components - âœ… å®˜æ–¹åŸç”Ÿæ”¯æŒ

**Ant Design Pro Components å®Œå…¨æ”¯æŒä¸»å­è¡¨æ¨¡å‹**ï¼Œé€šè¿‡ä»¥ä¸‹ç»„ä»¶å®ç°ï¼š

#### 1. ProTable - åµŒå¥—è¡¨æ ¼æ”¯æŒ

**ProTable æ”¯æŒå±•å¼€è¡Œï¼ˆexpandableï¼‰**ï¼Œå¯ä»¥å±•ç¤ºå­è¡¨æ•°æ®ï¼š

```tsx
import { ProTable } from '@ant-design/pro-components';
import { Table } from 'antd';

interface Order {
  id: number;
  orderNo: string;
  customerName: string;
  totalAmount: number;
  items: OrderItem[];
}

interface OrderItem {
  id: number;
  productName: string;
  quantity: number;
  price: number;
  amount: number;
}

export default function OrderList() {
  const columns = [
    { title: 'è®¢å•å·', dataIndex: 'orderNo', width: 150 },
    { title: 'å®¢æˆ·åç§°', dataIndex: 'customerName', width: 200 },
    { title: 'æ€»é‡‘é¢', dataIndex: 'totalAmount', width: 120 },
  ];

  return (
    <ProTable<Order>
      columns={columns}
      request={async (params) => {
        const result = await request('/api/v1/orders', { params });
        return {
          data: result.data,
          success: true,
          total: result.total,
        };
      }}
      rowKey="id"
      expandable={{
        expandedRowRender: (record) => (
          <Table
            columns={[
              { title: 'äº§å“åç§°', dataIndex: 'productName' },
              { title: 'æ•°é‡', dataIndex: 'quantity' },
              { title: 'å•ä»·', dataIndex: 'price' },
              { title: 'é‡‘é¢', dataIndex: 'amount' },
            ]}
            dataSource={record.items}
            rowKey="id"
            pagination={false}
            size="small"
          />
        ),
        rowExpandable: (record) => record.items && record.items.length > 0,
      }}
    />
  );
}
```

#### 2. ProForm - åµŒå¥—è¡¨å•æ”¯æŒ

**ProForm æ”¯æŒåµŒå¥—è¡¨å•ï¼ˆForm.Listï¼‰**ï¼Œå¯ä»¥ç¼–è¾‘ä¸»å­è¡¨æ•°æ®ï¼š

```tsx
import { ProForm, ProFormText, ProFormDigit, ProFormList } from '@ant-design/pro-components';
import { Button, Space } from 'antd';

export default function OrderForm() {
  return (
    <ProForm
      onFinish={async (values) => {
        // values åŒ…å«ä¸»è¡¨å’Œå­è¡¨æ•°æ®
        await request('/api/v1/orders', {
          method: 'POST',
          data: values,
        });
      }}
    >
      {/* ä¸»è¡¨å­—æ®µ */}
      <ProFormText
        name="orderNo"
        label="è®¢å•å·"
        rules={[{ required: true }]}
      />
      <ProFormText
        name="customerName"
        label="å®¢æˆ·åç§°"
        rules={[{ required: true }]}
      />
      <ProFormDigit
        name="totalAmount"
        label="æ€»é‡‘é¢"
        rules={[{ required: true }]}
      />

      {/* å­è¡¨å­—æ®µï¼ˆä½¿ç”¨ ProFormListï¼‰ */}
      <ProFormList
        name="items"
        label="è®¢å•æ˜ç»†"
        min={1}
        copyIconProps={false}
        deleteIconProps={{
          tooltipText: 'åˆ é™¤',
        }}
        creatorButtonProps={{
          creatorButtonText: 'æ·»åŠ æ˜ç»†',
        }}
      >
        {(f, index, action) => (
          <Space key={f.key} align="baseline">
            <ProFormText
              name={[f.name, 'productName']}
              label="äº§å“åç§°"
              rules={[{ required: true }]}
            />
            <ProFormDigit
              name={[f.name, 'quantity']}
              label="æ•°é‡"
              min={1}
              rules={[{ required: true }]}
            />
            <ProFormDigit
              name={[f.name, 'price']}
              label="å•ä»·"
              min={0}
              rules={[{ required: true }]}
            />
            <ProFormDigit
              name={[f.name, 'amount']}
              label="é‡‘é¢"
              min={0}
              rules={[{ required: true }]}
            />
            <Button
              type="link"
              danger
              onClick={() => action.remove(f.name)}
            >
              åˆ é™¤
            </Button>
          </Space>
        )}
      </ProFormList>
    </ProForm>
  );
}
```

#### 3. ProDescriptions - åµŒå¥—æè¿°åˆ—è¡¨

**ProDescriptions æ”¯æŒåµŒå¥—å±•ç¤º**ï¼Œå¯ä»¥å±•ç¤ºä¸»å­è¡¨è¯¦æƒ…ï¼š

```tsx
import { ProDescriptions } from '@ant-design/pro-components';
import { Table } from 'antd';

export default function OrderDetail({ orderId }: { orderId: number }) {
  const { data } = useRequest(() => request(`/api/v1/orders/${orderId}`));

  return (
    <ProDescriptions
      title="è®¢å•è¯¦æƒ…"
      dataSource={data}
      columns={[
        { title: 'è®¢å•å·', dataIndex: 'orderNo' },
        { title: 'å®¢æˆ·åç§°', dataIndex: 'customerName' },
        { title: 'æ€»é‡‘é¢', dataIndex: 'totalAmount' },
        {
          title: 'è®¢å•æ˜ç»†',
          dataIndex: 'items',
          render: (items: OrderItem[]) => (
            <Table
              columns={[
                { title: 'äº§å“åç§°', dataIndex: 'productName' },
                { title: 'æ•°é‡', dataIndex: 'quantity' },
                { title: 'å•ä»·', dataIndex: 'price' },
                { title: 'é‡‘é¢', dataIndex: 'amount' },
              ]}
              dataSource={items}
              rowKey="id"
              pagination={false}
              size="small"
            />
          ),
        },
      ]}
    />
  );
}
```

**æ€»ç»“**ï¼šâœ… **Ant Design Pro Components å®Œå…¨æ”¯æŒä¸»å­è¡¨æ¨¡å‹**ï¼Œæä¾›ï¼š
- ProTable å±•å¼€è¡Œå±•ç¤ºå­è¡¨
- ProForm åµŒå¥—è¡¨å•ç¼–è¾‘ä¸»å­è¡¨
- ProDescriptions åµŒå¥—å±•ç¤ºä¸»å­è¡¨è¯¦æƒ…

---

### Ant Design (åŸºç¡€ç»„ä»¶) - âœ… å®˜æ–¹åŸç”Ÿæ”¯æŒ

**Ant Design çš„ Table å’Œ Form ç»„ä»¶ä¹Ÿæ”¯æŒä¸»å­è¡¨**ï¼š

#### 1. Table åµŒå¥—è¡¨æ ¼

```tsx
import { Table } from 'antd';

<Table
  columns={columns}
  dataSource={orders}
  expandable={{
    expandedRowRender: (record) => (
      <Table
        columns={itemColumns}
        dataSource={record.items}
        pagination={false}
        size="small"
      />
    ),
  }}
/>
```

#### 2. Form åµŒå¥—è¡¨å•

```tsx
import { Form, Input, Button } from 'antd';

<Form.List name="items">
  {(fields, { add, remove }) => (
    <>
      {fields.map((field) => (
        <Space key={field.key}>
          <Form.Item
            {...field}
            name={[field.name, 'productName']}
            label="äº§å“åç§°"
          >
            <Input />
          </Form.Item>
          <Button onClick={() => remove(field.name)}>åˆ é™¤</Button>
        </Space>
      ))}
      <Button onClick={() => add()}>æ·»åŠ æ˜ç»†</Button>
    </>
  )}
</Form.List>
```

**æ€»ç»“**ï¼šâœ… **Ant Design åŸºç¡€ç»„ä»¶ä¹Ÿæ”¯æŒä¸»å­è¡¨æ¨¡å‹**

---

## ğŸ“Š æ”¯æŒæƒ…å†µæ€»ç»“

| æŠ€æœ¯æ ˆ | ç»„ä»¶ | ä¸»å­è¡¨æ”¯æŒ | æ”¯æŒæ–¹å¼ |
|--------|------|-----------|---------|
| **åç«¯** | Tortoise ORM | âœ… å®Œå…¨æ”¯æŒ | ForeignKey + ReverseRelation |
| **åç«¯** | Pydantic v2 | âœ… å®Œå…¨æ”¯æŒ | åµŒå¥— Schema |
| **åç«¯** | FastAPI | âœ… å®Œå…¨æ”¯æŒ | åµŒå¥—æ¨¡å‹è‡ªåŠ¨å¤„ç† |
| **å‰ç«¯** | ProTable | âœ… å®Œå…¨æ”¯æŒ | expandable å±•å¼€è¡Œ |
| **å‰ç«¯** | ProForm | âœ… å®Œå…¨æ”¯æŒ | ProFormList åµŒå¥—è¡¨å• |
| **å‰ç«¯** | ProDescriptions | âœ… å®Œå…¨æ”¯æŒ | åµŒå¥—æ¸²æŸ“ |
| **å‰ç«¯** | Table (Ant Design) | âœ… å®Œå…¨æ”¯æŒ | expandable å±•å¼€è¡Œ |
| **å‰ç«¯** | Form (Ant Design) | âœ… å®Œå…¨æ”¯æŒ | Form.List åµŒå¥—è¡¨å• |

## âœ… ç»“è®º

**RiverEdge SaaS å¤šç»„ç»‡æ¡†æ¶çš„å½“å‰æŠ€æœ¯é€‰å‹å¯¹ä¸»å­è¡¨æ¨¡å‹æœ‰å®Œæ•´çš„å®˜æ–¹åŸç”Ÿæ”¯æŒ**ï¼š

### åç«¯æ”¯æŒ âœ…

1. **Tortoise ORM**ï¼š
   - âœ… ForeignKey å…³ç³»å®šä¹‰
   - âœ… åå‘å…³ç³»ï¼ˆReverseRelationï¼‰
   - âœ… é¢„åŠ è½½ï¼ˆprefetch_relatedï¼‰
   - âœ… çº§è”æ“ä½œï¼ˆCASCADEï¼‰
   - âœ… äº‹åŠ¡æ”¯æŒ
   - âœ… èšåˆæŸ¥è¯¢

2. **Pydantic v2**ï¼š
   - âœ… åµŒå¥— Schema å®šä¹‰
   - âœ… è‡ªåŠ¨æ•°æ®éªŒè¯
   - âœ… ç±»å‹å®‰å…¨

3. **FastAPI**ï¼š
   - âœ… è‡ªåŠ¨æ¥æ”¶åµŒå¥—æ•°æ®
   - âœ… è‡ªåŠ¨éªŒè¯åµŒå¥—ç»“æ„
   - âœ… è‡ªåŠ¨ç”Ÿæˆ API æ–‡æ¡£

### å‰ç«¯æ”¯æŒ âœ…

1. **ProTable**ï¼š
   - âœ… expandable å±•å¼€è¡Œå±•ç¤ºå­è¡¨
   - âœ… æ”¯æŒåµŒå¥—è¡¨æ ¼

2. **ProForm**ï¼š
   - âœ… ProFormList åµŒå¥—è¡¨å•
   - âœ… æ”¯æŒåŠ¨æ€æ·»åŠ /åˆ é™¤å­è¡¨é¡¹

3. **ProDescriptions**ï¼š
   - âœ… åµŒå¥—å±•ç¤ºä¸»å­è¡¨è¯¦æƒ…

4. **Ant Design åŸºç¡€ç»„ä»¶**ï¼š
   - âœ… Table expandable
   - âœ… Form.List

## ğŸ¯ å®æ–½å»ºè®®

### 1. åç«¯å®ç°

```python
# 1. å®šä¹‰æ¨¡å‹å…³ç³»
class Order(BaseModel):
    items: fields.ReverseRelation["OrderItem"]

class OrderItem(BaseModel):
    order_id = fields.ForeignKeyField('models.Order', related_name='items')

# 2. å®šä¹‰ Schema
class OrderCreate(BaseModel):
    items: List[OrderItemCreate]

# 3. å®ç° API
@router.post("", response_model=OrderResponse)
async def create_order(order: OrderCreate):
    # äº‹åŠ¡ä¸­åˆ›å»ºä¸»å­è¡¨
    async with in_transaction():
        order_obj = await Order.create(**order.dict(exclude={'items'}))
        for item in order.items:
            await OrderItem.create(order_id=order_obj.id, **item.dict())
    return await Order.get(id=order_obj.id).prefetch_related('items')
```

### 2. å‰ç«¯å®ç°

```tsx
// 1. åˆ—è¡¨é¡µé¢ï¼ˆProTable + expandableï¼‰
<ProTable
  expandable={{
    expandedRowRender: (record) => (
      <Table dataSource={record.items} />
    ),
  }}
/>

// 2. è¡¨å•é¡µé¢ï¼ˆProForm + ProFormListï¼‰
<ProForm>
  <ProFormList name="items">
    {/* å­è¡¨å­—æ®µ */}
  </ProFormList>
</ProForm>
```

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **æ•°æ®ä¸€è‡´æ€§**ï¼šä½¿ç”¨äº‹åŠ¡ç¡®ä¿ä¸»å­è¡¨æ•°æ®ä¸€è‡´æ€§
2. **çº§è”åˆ é™¤**ï¼šåˆç†è®¾ç½® `on_delete` ç­–ç•¥
3. **æ€§èƒ½ä¼˜åŒ–**ï¼šä½¿ç”¨ `prefetch_related` é¿å… N+1 æŸ¥è¯¢
4. **å‰ç«¯éªŒè¯**ï¼šç¡®ä¿å­è¡¨æ•°æ®éªŒè¯è§„åˆ™æ­£ç¡®
5. **ç”¨æˆ·ä½“éªŒ**ï¼šæä¾›æ¸…æ™°çš„å­è¡¨æ·»åŠ /åˆ é™¤æ“ä½œ

## ğŸš€ æ€»ç»“

**RiverEdge æ¡†æ¶çš„å½“å‰æŠ€æœ¯é€‰å‹å¯¹ä¸»å­è¡¨æ¨¡å‹æœ‰å®Œæ•´çš„å®˜æ–¹åŸç”Ÿæ”¯æŒï¼Œæ— éœ€å¼•å…¥é¢å¤–çš„ç¬¬ä¸‰æ–¹åº“**ï¼š

- âœ… **åç«¯**ï¼šTortoise ORM + Pydantic + FastAPI å®Œå…¨æ”¯æŒ
- âœ… **å‰ç«¯**ï¼šProTable + ProForm + ProDescriptions å®Œå…¨æ”¯æŒ
- âœ… **å¼€å‘æ•ˆç‡**ï¼šå®˜æ–¹åŸç”Ÿæ”¯æŒï¼Œå¼€å‘ä½“éªŒå¥½
- âœ… **ç±»å‹å®‰å…¨**ï¼šTypeScript + Python ç±»å‹æç¤º
- âœ… **æ–‡æ¡£å®Œå–„**ï¼šå®˜æ–¹æ–‡æ¡£è¯¦ç»†ï¼Œç¤ºä¾‹ä¸°å¯Œ

**å»ºè®®**ï¼šç›´æ¥ä½¿ç”¨å®˜æ–¹åŸç”Ÿæ”¯æŒï¼Œæ— éœ€é¢å¤–å¼•å…¥ç¬¬ä¸‰æ–¹åº“ã€‚

---

**ç›¸å…³æ–‡æ¡£**ï¼š
- [Tortoise ORM å…³ç³»æ–‡æ¡£](https://tortoise.github.io/relations.html)
- [Pydantic åµŒå¥—æ¨¡å‹æ–‡æ¡£](https://docs.pydantic.dev/latest/concepts/models/#nested-models)
- [ProTable å±•å¼€è¡Œæ–‡æ¡£](https://procomponents.ant.design/components/table#expandable)
- [ProForm åµŒå¥—è¡¨å•æ–‡æ¡£](https://procomponents.ant.design/components/form#formlist)

