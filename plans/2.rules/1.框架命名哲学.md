# RiverEdge SaaS 多组织框架 - 命名规范与哲学

## 📋 命名哲学

**RiverEdge SaaS 多组织框架 (RiverEdge SaaS Multi-tenant Framework)** 采用**常规 B 端项目命名**，遵循业界最佳实践，确保命名清晰、直观、易于理解。

## 🏗️ 架构层级体系

根据系统架构图，框架采用**三层结构设计**：

```
根目录 (Root Directory)
│
├── 🌐 前端 (riveredge-frontend)
│   └── src/                    # 前端源代码（扁平化结构）
│       ├── components/         # 公共组件
│       ├── pages/             # 页面组件
│       ├── routes/            # 路由配置
│       ├── services/          # API 服务
│       └── ...
│
├── 🔧 后端 (riveredge-backend)
│   └── src/
│       ├── app/                # 应用入口层
│       ├── platform/           # 平台级功能模块
│       ├── core/               # 系统级功能模块
│       └── static/             # 静态资源
│
├── 📱 移动端 (riveredge-leaf) - 可选
│   └── ...
│
└── 🌱 应用插件 (riveredge-seed)
    └── seed-插件名/            # 应用插件（MES、ERP、WMS、CRM 等）
```

## 📦 模块命名说明

### 🌐 前端 (riveredge-frontend)

**命名含义**：
- **Frontend** = 前端
- 包含平台级和系统级前端功能

**架构层级**：

#### 前端扁平化结构（src/ 下直接组织）
- **结构**：所有前端代码直接在 `src/` 下组织，已移除 `app/` 目录层级
- **职责**：
  - 平台级前端功能（运营看板、组织管理等）
  - 系统级前端功能（用户管理、角色管理等）
  - 公共组件和工具函数
  - 路由管理和状态管理

**目录结构**：
- `src/components/` - 公共组件
- `src/pages/` - 页面组件
- `src/routes/` - 路由配置
- `src/services/` - API 服务
- `src/stores/` - 状态管理（Zustand）
- `src/hooks/` - 自定义 Hooks
- `src/utils/` - 工具函数
- `src/types/` - TypeScript 类型定义
- `src/locales/` - 国际化文件
- `src/contexts/` - React Context
- `src/guards/` - 路由守卫
- `src/layouts/` - 布局组件

---

### 🔧 后端 (riveredge-backend)

**命名含义**：
- **Backend** = 后端
- 包含平台级和系统级后端功能

**架构层级**：

#### app (应用入口层)
- **App** = 应用
- FastAPI 应用入口，整合所有路由和中间件
- 提供应用启动和配置

**职责**：
- FastAPI 应用初始化
- 路由注册和整合
- 中间件配置
- 应用生命周期管理

#### platform (平台级功能模块)
- **Platform** = 平台
- 平台级后端基础设施和服务
- 为所有后端应用提供基础支撑

**职责**：
- 平台级配置管理（单独管理）
- 超管密码配置（单独设置）
- 租户管理（组织管理）
- 套餐管理
- 平台监控和统计
- 数据库基础设施
- 缓存基础设施
- 日志基础设施
- 监控基础设施
- 统一响应格式
- 异常处理
- 领域逻辑（domain/）

**架构设计**：传统分层架构（Controller → Service → Repository）

#### core (系统级功能模块)
- **Core** = 核心
- 系统级后端 API 和核心功能
- 提供系统级服务和功能

**职责**：
- 租户上下文管理（核心隔离机制）
- 认证授权（租户隔离）
- 用户管理（租户隔离）
- 角色权限（租户隔离）
- 部门管理（租户隔离）
- 系统配置管理
- 组织内数据管理
- Inngest 任务调度 ⭐ **FIR 核心**

**架构设计**：传统分层架构（Controller → Service → Repository）

**关系**：
- `core` (系统级) → `platform` (平台级)
- 系统级功能依赖平台级的基础设施

---

### 📱 移动端 (riveredge-leaf) - 可选

**命名含义**：
- **Leaf** = 叶子（移动端应用）
- 轻量、灵活、可移动的应用

**架构层级**：

#### leaf (移动端) - 扩展层级
- **Leaf** = 叶子
- 移动端应用，轻量、灵活、可移动

**职责**：
- 移动端应用
- 生产现场数据录入
- 移动端工单查看
- 设备巡检应用

---

### 🌱 应用插件 (riveredge-seed)

**命名含义**：
- **Seed** = 种子（应用插件）
- 每个 seed 都是独立的、可生长的应用

**架构层级**：

#### seed (应用插件) - 应用级
- **Seed** = 种子
- 应用级业务功能，通过插件系统实现
- 每个业务应用独立设计

**职责**：
- 业务应用功能（MES、ERP、WMS、CRM 等）
- 业务数据展示和管理
- 领域模型设计和实现
- 业务流程管理

**架构设计**：DDD（领域驱动设计）架构

**目录结构**（每个插件）：
- `frontend/` - 前端代码
- `backend/` - 后端代码（DDD 架构）
  - `domain/` - 领域层
  - `application/` - 应用层
  - `infrastructure/` - 基础设施层

---

## 🎯 架构关系图

### 三层结构关系图

```
                    ┌─────────────┐
                    │  platform   │  ← 平台级：平台后端基础设施
                    │  (平台级)    │
                    └──────┬──────┘
                           │
                    ┌──────▼──────┐
                    │    core     │  ← 系统级：系统级后端 API
                    │  (系统级)   │
                    └──────┬──────┘
                           │
                    ┌──────▼──────┐
                    │  frontend   │  ← 前端应用（平台级 + 系统级）
                    │  (前端)     │
                    └──────┬──────┘
                           │
        ┌──────────────────┼──────────────────┐
        │                  │                  │
   ┌────▼────┐      ┌──────▼──────┐     ┌─────▼─────┐
   │  seed   │      │    seed     │     │   seed   │
   │ (应用级) │      │  (应用级)   │     │ (应用级)  │
   │  MES    │      │    ERP      │     │   WMS    │
   └─────────┘      └─────────────┘     └──────────┘
```

### 层级关系说明

**三层结构设计**：

1. **平台级（Platform Level）**：
   - **platform** (平台后端)：平台级后端基础设施
   - **架构设计**：传统分层架构（Controller → Service → Repository）
   - **职责**：平台整体运营和管理

2. **系统级（System Level）**：
   - **core** (系统级后端)：系统级后端 API
   - **架构设计**：传统分层架构（Controller → Service → Repository）
   - **职责**：当前组织的系统管理

3. **应用级（Application Level）**：
   - **seed** (应用插件)：业务应用功能
   - **架构设计**：DDD（领域驱动设计）架构
   - **职责**：业务应用功能实现

---

## 📊 模块命名映射表

### 根目录结构

```
riveredge/
├── riveredge-frontend/     # 前端
│   └── src/                # 前端源代码（扁平化结构）
│
├── riveredge-backend/      # 后端
│   └── src/
│       ├── app/            # 应用入口层
│       ├── platform/       # 平台级功能模块
│       └── core/           # 系统级功能模块
│
├── riveredge-leaf/         # 移动端（可选）
│   └── ...
│
└── riveredge-seed/         # 应用插件集合
    └── seed-插件名/        # 应用插件（MES、ERP、WMS、CRM 等）
```

### 模块命名与架构层级对应

| 模块名称 | 架构层级 | 对应概念 | 职责说明 |
|---------|---------|---------|---------|
| `riveredge-frontend/src` | 平台级 + 系统级 | frontend | 前端应用 |
| `riveredge-backend/src/app` | 应用入口层 | app | FastAPI 应用入口 |
| `riveredge-backend/src/platform` | 平台级 | platform | 平台后端基础设施 |
| `riveredge-backend/src/core` | 系统级 | core | 系统级后端 API |
| `riveredge-seed/seed-插件名` | 应用级 | seed | 应用插件（MES、ERP、WMS、CRM 等） |

### 数据库命名与架构层级对应

| 数据库前缀 | 架构层级 | 对应概念 | 使用场景 |
|-----------|---------|---------|---------|
| `platform_` | 平台级 | platform | 平台级配置表、租户管理表 |
| `core_` | 系统级 | core | 系统级后端表（用户、角色、权限等） |
| `seed_插件名_` | 应用级 | seed | 应用插件表（MES、ERP、WMS、CRM 等） |

**说明**：
- `platform_` 前缀对应平台级后端（platform）
- `core_` 前缀对应系统级后端（core）
- `seed_插件名_` 前缀对应应用插件（seed）

---

## 🔗 架构关系说明

### 依赖关系

1. **后端依赖关系**：
   - `core` (系统级) → `platform` (平台级)
   - 系统级功能依赖平台级的基础设施

2. **应用级依赖关系**：
   - `seed` → `core` (系统级) → `platform` (平台级)
   - 应用级功能依赖系统级和平台级功能

### 层级关系

1. **平台级**：提供基础设施和服务
   - `platform` (平台后端)
   - 架构设计：传统分层架构

2. **系统级**：提供核心功能和框架
   - `core` (系统级后端)
   - 架构设计：传统分层架构

3. **应用级**：提供业务功能和应用
   - `seed` (应用插件)
   - 架构设计：DDD（领域驱动设计）架构

---

## ✅ 命名特点

1. **统一前缀**：所有模块使用 `riveredge-` 前缀
2. **常规 B 端命名**：遵循业界最佳实践，命名清晰直观
3. **层级清晰**：三层结构设计，层级分明
4. **关系明确**：依赖关系和层级关系清晰
5. **易于理解**：命名直观，易于记忆和理解

---

## 📝 命名规范总结

### 已确定的命名

- ✅ **riveredge-frontend/src**: 前端应用（扁平化结构）
- ✅ **riveredge-backend/src/app**: 应用入口层
- ✅ **riveredge-backend/src/platform**: 平台级功能模块
- ✅ **riveredge-backend/src/core**: 系统级功能模块
- ✅ **riveredge-seed/seed-插件名**: 应用插件（MES、ERP、WMS、CRM 等）

### 命名优势

1. **常规 B 端命名**：遵循业界最佳实践，易于理解
2. **层级清晰**：三层结构设计，职责分明
3. **易于维护**：命名直观，降低学习成本
4. **扩展性强**：支持插件化扩展，结构灵活
5. **架构明确**：平台级、系统级使用传统分层架构，应用级使用 DDD 架构

---

## 🎯 技术栈（FIR）

**FIR 技术栈组合**：
- **F** - **FastAPI**: 高性能异步 Web 框架
- **I** - **Inngest**: 现代化任务调度系统
- **R** - **React**: 现代化前端框架

**架构设计**：
- **平台级、系统级**：传统分层架构（Controller → Service → Repository）
- **应用级**：DDD（领域驱动设计）架构

---

**最后更新**：2025-01-04
**状态**：根据最新架构设计更新为常规 B 端命名
