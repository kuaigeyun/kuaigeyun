# å‘½åè§„èŒƒæ£€æŸ¥æ¸…å•

## ğŸ“‹ æ£€æŸ¥èŒƒå›´

æ£€æŸ¥æ‰€æœ‰æ–‡ä»¶åã€æ–¹æ³•åã€æ–‡ä»¶å¤¹ç»“æ„ã€æ•°æ®åº“è¡¨åã€APIæ–¹æ³•åæ˜¯å¦è§„èŒƒä¸”åŒºåˆ†äº†å±‚çº§ã€‚

**æ£€æŸ¥æ—¥æœŸ**ï¼š2025-01-XX  
**æ£€æŸ¥èŒƒå›´**ï¼šå¹³å°çº§ï¼ˆsoilï¼‰å’Œç³»ç»Ÿçº§ï¼ˆtree_rootï¼‰çš„æ‰€æœ‰ä»£ç 

---

## 1. æ•°æ®åº“è¡¨åæ£€æŸ¥

### è§„èŒƒè¦æ±‚
- **å¹³å°çº§è¡¨**ï¼šä½¿ç”¨ `soil_` å‰ç¼€ï¼ˆå¹³å°çº§åç«¯ï¼‰
- **ç§Ÿæˆ·ç®¡ç†è¡¨**ï¼šä½¿ç”¨ `tree_` å‰ç¼€ï¼ˆç§Ÿæˆ·ç®¡ç†ï¼‰
- **ç³»ç»Ÿçº§è¡¨**ï¼šä½¿ç”¨ `root_` å‰ç¼€ï¼ˆç³»ç»Ÿçº§åç«¯ï¼‰
- æ‰€æœ‰è¡¨åå¿…é¡»ä½¿ç”¨ `snake_case`ï¼Œå¤æ•°å½¢å¼

### å½“å‰è¡¨åæ¸…å•

#### å¹³å°çº§è¡¨ï¼ˆsoil_ å‰ç¼€ï¼‰
- [ ] `soil_platform_superadmin` - å¹³å°è¶…çº§ç®¡ç†å‘˜è¡¨ âœ…
- [ ] `soil_packages` - å¥—é¤è¡¨ âœ…

#### ç§Ÿæˆ·ç®¡ç†è¡¨ï¼ˆtree_ å‰ç¼€ï¼‰
- [ ] `tree_tenants` - ç»„ç»‡è¡¨ âœ…
- [ ] `tree_tenant_configs` - ç»„ç»‡é…ç½®è¡¨ âœ…
- [ ] `tree_tenant_activity_logs` - ç»„ç»‡æ´»åŠ¨æ—¥å¿—è¡¨ âœ…

#### ç³»ç»Ÿçº§è¡¨ï¼ˆroot_ å‰ç¼€ï¼‰
- [ ] `root_users` - ç”¨æˆ·è¡¨ âœ…
- [ ] `root_roles` - è§’è‰²è¡¨ âœ…
- [ ] `root_permissions` - æƒé™è¡¨ âœ…
- [ ] `root_role_permissions` - è§’è‰²æƒé™å…³è”è¡¨ âœ…
- [ ] `root_user_roles` - ç”¨æˆ·è§’è‰²å…³è”è¡¨ âœ…
- [ ] `root_departments` - éƒ¨é—¨è¡¨ âœ…
- [ ] `root_positions` - èŒä½è¡¨ âœ…
- [ ] `root_saved_searches` - ä¿å­˜æœç´¢è¡¨ âœ…ï¼ˆå¹³å°çº§åŠŸèƒ½ï¼Œä½†è¡¨åä½¿ç”¨ root_ï¼Œéœ€ç¡®è®¤ï¼‰

### é—®é¢˜è®°å½•
- âš ï¸ `root_saved_searches` - ä¿å­˜æœç´¢è¡¨ï¼Œå±äºå¹³å°çº§åŠŸèƒ½ï¼Œä½†è¡¨åä½¿ç”¨ `root_` å‰ç¼€ï¼Œéœ€è¦ç¡®è®¤æ˜¯å¦åº”è¯¥æ”¹ä¸º `soil_saved_searches`

---

## 2. API è·¯ç”±å‰ç¼€æ£€æŸ¥

### è§„èŒƒè¦æ±‚
- **å¹³å°çº§ API**ï¼šä½¿ç”¨ `/api/v1/platform/` æˆ– `/api/v1/superadmin/` å‰ç¼€
- **ç³»ç»Ÿçº§ API**ï¼šä½¿ç”¨ `/api/v1/` å‰ç¼€ï¼ˆç›´æ¥èµ„æºåï¼‰
- æ‰€æœ‰ API è·¯å¾„å¿…é¡»ä»¥ `/api/v1/` å¼€å¤´

### å½“å‰ API è·¯ç”±æ¸…å•

#### å¹³å°çº§ APIï¼ˆsoilï¼‰
- [ ] `/api/v1/platform/tenants` - ç»„ç»‡ç®¡ç† âœ…
- [ ] `/api/v1/platform/packages` - å¥—é¤ç®¡ç† âœ…
- [ ] `/api/v1/platform/monitoring` - å¹³å°ç›‘æ§ âœ…
- [ ] `/api/v1/platform/auth` - å¹³å°ç®¡ç†å‘˜è®¤è¯ âœ…
- [ ] `/api/v1/platform/admin` - å¹³å°ç®¡ç†å‘˜ç®¡ç† âœ…
- [ ] `/api/v1/superadmin/auth` - è¶…çº§ç®¡ç†å‘˜è®¤è¯ âœ…
- [ ] `/api/v1/saved-searches` - ä¿å­˜æœç´¢ âœ…ï¼ˆå¹³å°çº§åŠŸèƒ½ï¼Œä½†è·¯å¾„æœªä½¿ç”¨ platform å‰ç¼€ï¼‰

#### ç³»ç»Ÿçº§ APIï¼ˆtree_rootï¼‰
- [ ] `/api/v1/roles` - è§’è‰²ç®¡ç† âœ…
- [ ] `/api/v1/permissions` - æƒé™ç®¡ç† âœ…
- [ ] `/api/v1/departments` - éƒ¨é—¨ç®¡ç† âœ…
- [ ] `/api/v1/positions` - èŒä½ç®¡ç† âœ…
- [ ] `/api/v1/users` - è´¦æˆ·ç®¡ç† âœ…

### é—®é¢˜è®°å½•
- âš ï¸ `/api/v1/saved-searches` - ä¿å­˜æœç´¢ APIï¼Œå±äºå¹³å°çº§åŠŸèƒ½ï¼Œä½†è·¯å¾„æœªä½¿ç”¨ `/api/v1/platform/` å‰ç¼€

---

## 3. æ–‡ä»¶å¤¹ç»“æ„æ£€æŸ¥

### è§„èŒƒè¦æ±‚
- **å¹³å°çº§**ï¼š`soil/` ç›®å½•
- **ç³»ç»Ÿçº§**ï¼š`tree_root/` ç›®å½•
- å­ç›®å½•ç»“æ„ï¼š`models/`, `schemas/`, `services/`, `api/`

### å½“å‰æ–‡ä»¶å¤¹ç»“æ„

#### å¹³å°çº§ï¼ˆsoil/ï¼‰
```
soil/
â”œâ”€â”€ api/
â”‚   â”œâ”€â”€ auth/              âœ…
â”‚   â”œâ”€â”€ deps/              âœ…
â”‚   â”œâ”€â”€ monitoring/        âœ…
â”‚   â”œâ”€â”€ packages/          âœ…
â”‚   â”œâ”€â”€ platform_superadmin/ âœ…
â”‚   â”œâ”€â”€ saved_searches/    âœ…
â”‚   â””â”€â”€ tenants/           âœ…
â”œâ”€â”€ models/                âœ…
â”œâ”€â”€ schemas/               âœ…
â”œâ”€â”€ services/              âœ…
â””â”€â”€ config/                âœ…
```

#### ç³»ç»Ÿçº§ï¼ˆtree_root/ï¼‰
```
tree_root/
â”œâ”€â”€ api/
â”‚   â”œâ”€â”€ departments/       âœ…
â”‚   â”œâ”€â”€ deps/              âœ…
â”‚   â”œâ”€â”€ permissions/       âœ…
â”‚   â”œâ”€â”€ positions/         âœ…
â”‚   â”œâ”€â”€ roles/             âœ…
â”‚   â””â”€â”€ users/             âœ…
â”œâ”€â”€ models/                âœ…
â”œâ”€â”€ schemas/               âœ…
â””â”€â”€ services/              âœ…
```

### é—®é¢˜è®°å½•
- âœ… æ–‡ä»¶å¤¹ç»“æ„ç¬¦åˆè§„èŒƒ

---

## 4. æ–‡ä»¶åæ£€æŸ¥

### è§„èŒƒè¦æ±‚
- **Python æ–‡ä»¶**ï¼šä½¿ç”¨ `snake_case`
- **API æ–‡ä»¶**ï¼šä½¿ç”¨å¤æ•°å½¢å¼ï¼ˆå¦‚ `users.py`, `roles.py`ï¼‰
- **Service æ–‡ä»¶**ï¼šä½¿ç”¨ `_service.py` åç¼€
- **Schema æ–‡ä»¶**ï¼šä½¿ç”¨å•æ•°å½¢å¼ï¼ˆå¦‚ `user.py`, `role.py`ï¼‰

### å½“å‰æ–‡ä»¶åæ¸…å•

#### å¹³å°çº§ï¼ˆsoil/ï¼‰
**API æ–‡ä»¶**ï¼š
- [ ] `soil/api/auth/auth.py` âœ…
- [ ] `soil/api/packages/packages.py` âœ…
- [ ] `soil/api/packages/packages_config.py` âœ…
- [ ] `soil/api/platform_superadmin/platform_superadmin.py` âœ…
- [ ] `soil/api/platform_superadmin/auth.py` âœ…
- [ ] `soil/api/saved_searches/saved_searches.py` âœ…
- [ ] `soil/api/tenants/tenants.py` âœ…
- [ ] `soil/api/monitoring/statistics.py` âœ…

**Service æ–‡ä»¶**ï¼š
- [ ] `soil/services/auth_service.py` âœ…
- [ ] `soil/services/package_service.py` âœ…
- [ ] `soil/services/platform_superadmin_auth_service.py` âœ…
- [ ] `soil/services/platform_superadmin_service.py` âœ…
- [ ] `soil/services/saved_search_service.py` âœ…
- [ ] `soil/services/superadmin_auth_service.py` âœ…
- [ ] `soil/services/superadmin_service.py` âœ…
- [ ] `soil/services/tenant_service.py` âœ…
- [ ] `soil/services/user_service.py` âœ…

**Schema æ–‡ä»¶**ï¼š
- [ ] `soil/schemas/auth.py` âœ…
- [ ] `soil/schemas/package.py` âœ…
- [ ] `soil/schemas/platform_superadmin.py` âœ…
- [ ] `soil/schemas/saved_search.py` âœ…
- [ ] `soil/schemas/superadmin.py` âœ…
- [ ] `soil/schemas/tenant.py` âœ…
- [ ] `soil/schemas/user.py` âœ…

**Model æ–‡ä»¶**ï¼š
- [ ] `soil/models/base.py` âœ…
- [ ] `soil/models/package.py` âœ…
- [ ] `soil/models/platform_superadmin.py` âœ…
- [ ] `soil/models/saved_search.py` âœ…
- [ ] `soil/models/tenant.py` âœ…
- [ ] `soil/models/tenant_activity_log.py` âœ…
- [ ] `soil/models/tenant_config.py` âœ…
- [ ] `soil/models/user.py` âœ…

#### ç³»ç»Ÿçº§ï¼ˆtree_root/ï¼‰
**API æ–‡ä»¶**ï¼š
- [ ] `tree_root/api/departments/departments.py` âœ…
- [ ] `tree_root/api/permissions/permissions.py` âœ…
- [ ] `tree_root/api/positions/positions.py` âœ…
- [ ] `tree_root/api/roles/roles.py` âœ…
- [ ] `tree_root/api/users/users.py` âœ…

**Service æ–‡ä»¶**ï¼š
- [ ] `tree_root/services/department_service.py` âœ…
- [ ] `tree_root/services/permission_service.py` âœ…
- [ ] `tree_root/services/position_service.py` âœ…
- [ ] `tree_root/services/role_service.py` âœ…
- [ ] `tree_root/services/user_service.py` âœ…

**Schema æ–‡ä»¶**ï¼š
- [ ] `tree_root/schemas/department.py` âœ…
- [ ] `tree_root/schemas/permission.py` âœ…
- [ ] `tree_root/schemas/position.py` âœ…
- [ ] `tree_root/schemas/role.py` âœ…
- [ ] `tree_root/schemas/user.py` âœ…

**Model æ–‡ä»¶**ï¼š
- [ ] `tree_root/models/base.py` âœ…
- [ ] `tree_root/models/department.py` âœ…
- [ ] `tree_root/models/permission.py` âœ…
- [ ] `tree_root/models/position.py` âœ…
- [ ] `tree_root/models/role.py` âœ…
- [ ] `tree_root/models/role_permission.py` âœ…
- [ ] `tree_root/models/user_role.py` âœ…

### é—®é¢˜è®°å½•
- âœ… æ–‡ä»¶ååŸºæœ¬ç¬¦åˆè§„èŒƒ

---

## 5. æ–¹æ³•åæ£€æŸ¥

### è§„èŒƒè¦æ±‚
- **Python æ–¹æ³•**ï¼šä½¿ç”¨ `snake_case`ï¼ŒåŠ¨è¯å¼€å¤´
- **Service æ–¹æ³•**ï¼šä½¿ç”¨ `create_`, `get_`, `update_`, `delete_` ç­‰åŠ¨è¯å‰ç¼€
- **API ç«¯ç‚¹å‡½æ•°**ï¼šä½¿ç”¨ RESTful é£æ ¼å‘½å

### å¾…æ£€æŸ¥çš„æ–¹æ³•å
- [ ] Service å±‚æ–¹æ³•å
- [ ] API ç«¯ç‚¹å‡½æ•°å
- [ ] å·¥å…·å‡½æ•°å

---

## 6. éœ€è¦ç»Ÿä¸€çš„é—®é¢˜

### é—®é¢˜ 1ï¼šä¿å­˜æœç´¢åŠŸèƒ½çš„å±‚çº§å½’å±
- **å½“å‰çŠ¶æ€**ï¼š
  - è¡¨åï¼š`root_saved_searches`ï¼ˆä½¿ç”¨ root_ å‰ç¼€ï¼‰
  - API è·¯å¾„ï¼š`/api/v1/saved-searches`ï¼ˆæœªä½¿ç”¨ platform å‰ç¼€ï¼‰
  - æ–‡ä»¶ä½ç½®ï¼š`soil/api/saved_searches/`ï¼ˆå¹³å°çº§ç›®å½•ï¼‰
- **é—®é¢˜**ï¼šå±‚çº§å½’å±ä¸ä¸€è‡´
- **å»ºè®®**ï¼š
  - å¦‚æœå±äºå¹³å°çº§åŠŸèƒ½ï¼šè¡¨åæ”¹ä¸º `soil_saved_searches`ï¼ŒAPI è·¯å¾„æ”¹ä¸º `/api/v1/platform/saved-searches`
  - å¦‚æœå±äºç³»ç»Ÿçº§åŠŸèƒ½ï¼šæ–‡ä»¶ç§»åŠ¨åˆ° `tree_root/api/saved_searches/`ï¼ŒAPI è·¯å¾„ä¿æŒ `/api/v1/saved-searches`

### é—®é¢˜ 2ï¼šUser æ¨¡å‹çš„å±‚çº§å½’å±
- **å½“å‰çŠ¶æ€**ï¼š
  - è¡¨åï¼š`root_users`ï¼ˆä½¿ç”¨ root_ å‰ç¼€ï¼‰
  - æ–‡ä»¶ä½ç½®ï¼š`soil/models/user.py`ï¼ˆå¹³å°çº§ç›®å½•ï¼‰
  - API è·¯å¾„ï¼š`/api/v1/users`ï¼ˆç³»ç»Ÿçº§è·¯å¾„ï¼‰
- **é—®é¢˜**ï¼šUser æ¨¡å‹åœ¨ soil ä¸­ï¼Œä½†è¡¨åå’Œ API éƒ½æ˜¯ç³»ç»Ÿçº§
- **å»ºè®®**ï¼šUser æ¨¡å‹åº”è¯¥ç§»åŠ¨åˆ° `tree_root/models/user.py`ï¼Œæˆ–è€…ä¿æŒç°çŠ¶ä½†æ˜ç¡®è¯´æ˜ User æ˜¯è·¨å±‚çº§çš„å…±äº«æ¨¡å‹

---

## 7. æ£€æŸ¥ç»“æœæ±‡æ€»

### âœ… ç¬¦åˆè§„èŒƒçš„éƒ¨åˆ†
1. æ•°æ®åº“è¡¨ååŸºæœ¬ç¬¦åˆè§„èŒƒï¼ˆå‰ç¼€æ­£ç¡®ï¼‰
2. æ–‡ä»¶å¤¹ç»“æ„æ¸…æ™°ï¼Œå±‚çº§åˆ†æ˜
3. æ–‡ä»¶åç¬¦åˆ snake_case è§„èŒƒ
4. API è·¯ç”±å‰ç¼€åŸºæœ¬æ­£ç¡®

### âš ï¸ éœ€è¦ç»Ÿä¸€çš„é—®é¢˜
1. ä¿å­˜æœç´¢åŠŸèƒ½çš„å±‚çº§å½’å±ä¸ä¸€è‡´
2. User æ¨¡å‹çš„å±‚çº§å½’å±éœ€è¦æ˜ç¡®

---

## 8. ä¸‹ä¸€æ­¥è¡ŒåŠ¨

1. ç¡®è®¤ä¿å­˜æœç´¢åŠŸèƒ½çš„å±‚çº§å½’å±
2. ç¡®è®¤ User æ¨¡å‹çš„å±‚çº§å½’å±
3. ç»Ÿä¸€å‘½åè§„èŒƒ
4. æ›´æ–°ç›¸å…³æ–‡æ¡£

