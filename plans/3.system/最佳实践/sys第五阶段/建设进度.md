# 第五阶段建设进度

## 📋 概述

本文档跟踪第五阶段（个人中心）的建设进度。

**建设时间**：4 周  
**状态**：⏳ **待开始**

---

## 📊 总体进度

**总体进度**：25%（1个模块完成：个人资料；3个模块待开始：偏好设置、我的消息、我的任务）

**状态**：🚧 **进行中**

---

## 📋 模块建设进度

| 模块 | 模型 | Schema | Service | API | 迁移 | 前端服务 | 前端页面 | 路由 | 菜单 | 状态 |
|------|------|--------|---------|-----|------|----------|----------|------|------|------|
| **1. 个人资料** | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ **已完成** |
| **2. 偏好设置** | ⏳ | ⏳ | ⏳ | ⏳ | ⏳ | ⏳ | ⏳ | ⏳ | ⏳ | ⏳ 待开始 |
| **3. 我的消息** | ⏳ | ⏳ | ⏳ | ⏳ | ⏳ | ⏳ | ⏳ | ⏳ | ⏳ | ⏳ 待开始 |
| **4. 我的任务** | - | ⏳ | ⏳ | ⏳ | - | ⏳ | ⏳ | ⏳ | ⏳ | ⏳ 待开始 |

**说明**：
- ✅ 已完成
- ⏳ 待开始
- - 不需要（复用其他模块）

---

## 🚀 详细建设进度

### 1. 个人资料（第1优先级）

**预计时间**：1 周  
**状态**：⏳ 待开始

**依赖**：用户管理（已有用户模型）

#### 后端开发

- [x] 扩展用户模型
  - [x] 在 `soil/models/user.py` 中添加个人资料字段（avatar、bio、contact_info）
  - [x] 创建数据库迁移（`23_20250102220000_add_user_profile_fields.py`）

- [x] 创建 Schema
  - [x] `schemas/user_profile.py`（个人资料 Schema）
  - [x] 更新 `schemas/__init__.py`

- [x] 创建 Service
  - [x] `services/user_profile_service.py`（个人资料服务）

- [x] 创建 API
  - [x] `api/user_profile/user_profile.py`（个人资料管理 API）
  - [x] 更新 `maintree/main.py` 注册路由

#### 前端开发

- [x] 创建前端服务
  - [x] `services/userProfile.ts`（个人资料服务）

- [x] 创建前端页面
  - [x] `pages/personal/profile/index.tsx`（个人资料页面）
  - [x] 添加路由配置
  - [x] 添加菜单配置

---

### 2. 偏好设置（第2优先级）

**预计时间**：1 周  
**状态**：⏳ 待开始

**依赖**：无（独立功能）

#### 后端开发

- [ ] 创建数据库模型
  - [ ] `models/user_preference.py`（用户偏好模型）
  - [ ] 更新 `models/__init__.py`

- [ ] 创建 Schema
  - [ ] `schemas/user_preference.py`（用户偏好 Schema）
  - [ ] 更新 `schemas/__init__.py`

- [ ] 创建 Service
  - [ ] `services/user_preference_service.py`（用户偏好服务，包含 Redis 缓存）

- [ ] 创建 API
  - [ ] `api/user_preferences/user_preferences.py`（用户偏好管理 API）
  - [ ] 更新 `maintree/main.py` 注册路由

- [ ] 数据库迁移
  - [ ] 创建用户偏好表迁移

#### 前端开发

- [ ] 创建前端服务
  - [ ] `services/userPreference.ts`（用户偏好服务）

- [ ] 创建前端页面
  - [ ] `pages/personal/preferences/index.tsx`（偏好设置页面）
  - [ ] 添加路由配置
  - [ ] 添加菜单配置

---

### 3. 我的消息（第3优先级）

**预计时间**：1 周  
**状态**：⏳ 待开始

**依赖**：消息管理（需要消息系统）

#### 后端开发

- [ ] 创建数据库模型
  - [ ] `models/user_message.py`（用户消息模型）
  - [ ] 更新 `models/__init__.py`

- [ ] 创建 Schema
  - [ ] `schemas/user_message.py`（用户消息 Schema）
  - [ ] 更新 `schemas/__init__.py`

- [ ] 创建 Service
  - [ ] `services/user_message_service.py`（用户消息服务）

- [ ] 创建 API
  - [ ] `api/user_messages/user_messages.py`（用户消息管理 API）
  - [ ] 更新 `maintree/main.py` 注册路由

- [ ] 数据库迁移
  - [ ] 创建用户消息表迁移

#### 前端开发

- [ ] 创建前端服务
  - [ ] `services/userMessage.ts`（用户消息服务）

- [ ] 创建前端页面
  - [ ] `pages/personal/messages/index.tsx`（我的消息页面）
  - [ ] 添加路由配置
  - [ ] 添加菜单配置

---

### 4. 我的任务（第4优先级）

**预计时间**：1 周  
**状态**：⏳ 待开始

**依赖**：审批流程（任务来自审批）

#### 后端开发

- [ ] 创建 Schema
  - [ ] `schemas/my_task.py`（我的任务 Schema）
  - [ ] 更新 `schemas/__init__.py`

- [ ] 创建 Service
  - [ ] `services/my_task_service.py`（我的任务服务，查询审批实例）

- [ ] 创建 API
  - [ ] `api/my_tasks/my_tasks.py`（我的任务管理 API）
  - [ ] 更新 `maintree/main.py` 注册路由

**注意**：复用审批流程模块的 `ApprovalInstance` 模型，不需要新建模型和迁移。

#### 前端开发

- [ ] 创建前端服务
  - [ ] `services/myTask.ts`（我的任务服务）

- [ ] 创建前端页面
  - [ ] `pages/personal/tasks/index.tsx`（我的任务页面）
  - [ ] 添加路由配置
  - [ ] 添加菜单配置

---

## 📚 相关文档

- [README.md](./README.md)
- [1.个人资料最佳实践.md](./1.个人资料最佳实践.md)
- [2.偏好设置最佳实践.md](./2.偏好设置最佳实践.md)
- [3.我的消息最佳实践.md](./3.我的消息最佳实践.md)
- [4.我的任务最佳实践.md](./4.我的任务最佳实践.md)
- [前端页面布局规范.md](./前端页面布局规范.md)
- [系统级功能文件结构规划.md](./系统级功能文件结构规划.md)

---

**最后更新**：2025-01-XX

